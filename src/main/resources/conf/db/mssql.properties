# Configurations
db.executeSingleStatement=false


module.child.name=WITH RecursiveCte AS\n (SELECT m.moduleid, m.orgid, m.name, m.display_name, m.table_name, m.module_type, m.is_trash_enabled, m.data_interval, m.extends_id FROM modules m \n WHERE orgid = ? and name = ?\n UNION ALL\n SELECT m1.moduleid, m1.orgid, m1.name, m1.display_name, m1.table_name, m1.module_type, m1.is_trash_enabled, m1.data_interval, m1.extends_id FROM modules m1\n INNER JOIN RecursiveCte RCTE ON m1.moduleid = RCTE.extends_id\n )\n SELECT moduleid, orgid, name, display_name, table_name, module_type, is_trash_enabled, data_interval, extends_id FROM RecursiveCte
module.child.id=WITH RecursiveCte AS\n ( \n SELECT m.moduleid, m.orgid, m.name, m.display_name, m.table_name, m.module_type, m.is_trash_enabled, m.data_interval, m.extends_id FROM modules m \n WHERE orgid = ? and moduleid = ? \n UNION ALL \n SELECT m1.moduleid, m1.orgid, m1.name, m1.display_name, m1.table_name, m1.module_type, m1.is_trash_enabled, m1.data_interval, m1.extends_id FROM modules m1 \n INNER JOIN RecursiveCte RCTE ON m1.moduleid = RCTE.extends_id \n ) \n SELECT moduleid, orgid, name, display_name, table_name, module_type, is_trash_enabled, data_interval, extends_id FROM RecursiveCte

module.submodule.get=WITH RecursiveCte AS\n ( \n SELECT m.moduleid, m.orgid, m.name, m.display_name, m.table_name, m.module_type, m.is_trash_enabled, m.data_interval, m.extends_id FROM modules m \n WHERE orgid = ? and name = ? \n UNION ALL \n SELECT m1.moduleid, m1.orgid, m1.name, m1.display_name, m1.table_name, m1.module_type, m1.is_trash_enabled, m1.data_interval, m1.extends_id FROM modules m1 \n INNER JOIN RecursiveCte RCTE ON m1.moduleid = RCTE.extends_id \n ) \n SELECT child_module_id from submodulesrel where parent_module_id in (select moduleid FROM RecursiveCte where module_type in ({0}))

# report date aggr query
year.expr=format(dateadd(s, {$place_holder1$}, (DATEADD(s, {$place_holder$}/1000, '1970-01-01 00:00:00'))),'yyyy')
monthandyear.expr=format(dateadd(s, {$place_holder1$}, (DATEADD(s, {$place_holder$}/1000, '1970-01-01 00:00:00'))),'yyyy MM')
weekandyear.expr=convert(varchar, datepart(year, dateadd(s, {$place_holder1$}, (DATEADD(s, {$place_holder$}/1000, '1970-01-01 00:00:00'))))) + ' ' + convert(varchar, datepart(week, dateadd(s, {$place_holder1$}, (DATEADD(s, {$place_holder$}/1000, '1970-01-01 00:00:00')))))
fulldate.expr=format(dateadd(s, {$place_holder1$}, (DATEADD(s, {$place_holder$}/1000, '1970-01-01 00:00:00'))),'yyyy MM dd')
month.expr=format(dateadd(s, {$place_holder1$}, (DATEADD(s, {$place_holder$}/1000, '1970-01-01 00:00:00'))),'MM')
hoursofdayonly.expr=format(dateadd(s, {$place_holder1$}, (DATEADD(s, {$place_holder$}/1000, '1970-01-01 00:00:00'))),'yyyy MM dd HH')

