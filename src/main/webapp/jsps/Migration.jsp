<%@ page import="com.facilio.sql.*,java.util.*,com.facilio.bmsconsole.modules.FieldFactory,com.facilio.accounts.util.AccountUtil,com.facilio.bmsconsole.context.ReadingContext,com.facilio.constants.FacilioConstants,org.apache.commons.chain.Chain,com.facilio.bmsconsole.commands.FacilioContext,com.facilio.bmsconsole.commands.FacilioChainFactory" %>



<%

AccountUtil.setCurrentAccount(58);

String csvContent="1483300800000:4.8,1483387200000:5.1,1483473600000:4.3,1483560000000:3.9,1483646400000:5,1483732800000:3.8,1483819200000:3.3,1483905600000:3.5,1483992000000:4.5,1484078400000:4.8,1484164800000:3.6,1484251200000:4.3,1484337600000:3.4,1484424000000:2.6,1484510400000:2.5,1484596800000:3.3,1484683200000:3,1484769600000:3.9,1484856000000:5.4,1484942400000:6.2,1485028800000:6.7,1485115200000:6,1485201600000:3.4,1485288000000:2.1,1485374400000:2.4,1485460800000:3.2,1485547200000:4.3,1485633600000:5.3,1485720000000:4.6,1485806400000:3.2,1485892800000:4.2,1485979200000:3.6,1486065600000:0,1486152000000:0.3,1486238400000:0.8,1486324800000:1,1486411200000:1.9,1486497600000:2.4,1486584000000:3.6,1486670400000:4.7,1486756800000:5,1486843200000:4.3,1486929600000:6.6,1487016000000:6.7,1487102400000:6.6,1487188800000:5.2,1487275200000:6.6,1487361600000:2.5,1487448000000:0.5,1487534400000:0.9,1487620800000:1,1487707200000:1.8,1487793600000:3.6,1487880000000:6.5,1487966400000:6.3,1488052800000:3,1488139200000:1.8,1488225600000:2.7,1488312000000:4.2,1488398400000:5.4,1488484800000:6.2,1488571200000:6.2,1488657600000:7.1,1488744000000:7.2,1488830400000:4,1488916800000:3.9,1489003200000:5.2,1489089600000:5.1,1489176000000:7.8,1489262400000:9.1,1489348800000:9.7,1489435200000:9.5,1489521600000:8.9,1489608000000:9,1489694400000:8.4,1489780800000:8.8,1489867200000:10.8,1489953600000:11.7,1490040000000:3.6,1490126400000:3.5,1490212800000:5.9,1490299200000:5.2,1490385600000:4.7,1490472000000:6.4,1490558400000:6.8,1490644800000:6.8,1490731200000:8.1,1490817600000:9.5,1490904000000:10.7,1490990400000:12.9,1491076800000:13.5,1491163200000:13.5,1491249600000:8,1491336000000:6.6,1491422400000:7,1491508800000:10,1491595200000:12.2,1491681600000:14,1491768000000:14.3,1491854400000:14.1,1491940800000:15,1492027200000:15.7,1492113600000:14.8,1492200000000:13.1,1492286400000:12.9,1492372800000:11.2,1492459200000:11.4,1492545600000:12.1,1492632000000:11.9,1492718400000:8.6,1492804800000:9.4,1492891200000:11.4,1492977600000:13.2,1493064000000:14.4,1493150400000:12.6,1493236800000:12.1,1493323200000:13.9,1493409600000:15.4,1493496000000:16.3,1493582400000:15.6,1493668800000:15,1493755200000:15.3,1493841600000:16.6,1493928000000:16.8,1494014400000:17.8,1494100800000:17.1,1494187200000:17.4,1494273600000:16.6,1494360000000:14.5,1494446400000:13.6,1494532800000:14.5,1494619200000:14.7,1494705600000:15.4,1494792000000:14.6,1494878400000:13.8,1494964800000:13.5,1495051200000:15.3,1495137600000:13.7,1495224000000:14.4,1495310400000:15.3,1495396800000:16.9,1495483200000:13.5,1495569600000:14,1495656000000:15.8,1495742400000:13.8,1495828800000:13.5,1495915200000:16.6,1496001600000:16.3,1496088000000:16.3,1496174400000:15.7,1496260800000:15,1496347200000:15.8,1496433600000:15.8,1496520000000:15.3,1496606400000:14.2,1496692800000:19.6,1496779200000:20,1496865600000:18.6,1496952000000:17.7,1497038400000:17,1497124800000:18,1497211200000:16.8,1497297600000:16,1497384000000:18,1497470400000:21.7,1497556800000:20.7,1497643200000:18.9,1497729600000:17.5,1497816000000:15.9,1497902400000:16.6,1497988800000:16.3,1498075200000:17.7,1498161600000:19.2,1498248000000:18.8,1498334400000:18,1498420800000:17.8,1498507200000:16.2,1498593600000:16.8,1498680000000:19.9,1498766400000:20.5,1498852800000:19.9,1498939200000:18.9,1499025600000:17.5,1499112000000:17.5,1499198400000:18.3,1499284800000:18.9,1499371200000:20.1,1499457600000:20.7,1499544000000:20,1499630400000:21.5,1499716800000:20.4,1499803200000:21.9,1499889600000:21.1,1499976000000:20.1,1500062400000:20.7,1500148800000:21.7,1500235200000:20.9,1500321600000:20.4,1500408000000:23.1,1500494400000:21.1,1500580800000:21,1500667200000:20.7,1500753600000:20.1,1500840000000:21,1500926400000:21.2,1501012800000:21.8,1501099200000:21.7,1501185600000:20.3,1501272000000:19.1,1501358400000:18.1,1501444800000:19.2,1501531200000:19.4,1501617600000:22.3,1501704000000:23.6,1501790400000:21.5,1501876800000:19.6,1501963200000:21.2,1502049600000:22.7,1502136000000:21.9,1502222400000:19.5,1502308800000:20.4,1502395200000:21.3,1502481600000:19.8,1502568000000:19,1502654400000:19.8,1502740800000:19.5,1502827200000:17.7,1502913600000:18.4,1503000000000:18.9,1503086400000:17.5,1503172800000:20.2,1503259200000:19.4,1503345600000:19.6,1503432000000:18.6,1503518400000:17.3,1503604800000:16.6,1503691200000:17,1503777600000:18,1503864000000:19.6,1503950400000:18.5,1504036800000:18.4,1504123200000:15.9,1504209600000:15.4,1504296000000:16.2,1504382400000:16.8,1504468800000:18.4,1504555200000:19,1504641600000:19,1504728000000:18.7,1504814400000:18.2,1504900800000:17.8,1504987200000:15.8,1505073600000:17.6,1505160000000:17.9,1505246400000:17,1505332800000:16.8,1505419200000:17.2,1505505600000:16.9,1505592000000:16.5,1505678400000:17.9,1505764800000:17.6,1505851200000:16.7,1505937600000:19,1506024000000:18,1506110400000:17.9,1506196800000:16.7,1506283200000:15.2,1506369600000:14.1,1506456000000:14,1506542400000:14.7,1506628800000:14.4,1506715200000:15.3,1506801600000:15.6,1506888000000:15.5,1506974400000:14.8,1507060800000:14.9,1507147200000:15.4,1507233600000:14.7,1507320000000:14.7,1507406400000:14.7,1507492800000:14.6,1507579200000:14.3,1507665600000:13.9,1507752000000:14.4,1507838400000:13.6,1507924800000:13.2,1508011200000:13.3,1508097600000:13.4,1508184000000:12.8,1508270400000:12.8,1508356800000:14.2,1508443200000:14.3,1508529600000:12.8,1508616000000:12.8,1508702400000:12.7,1508788800000:13.2,1508875200000:13.1,1508961600000:13.2,1509048000000:13.1,1509134400000:12.4,1509220800000:12.6,1509307200000:12.6,1509393600000:11.6,1509480000000:11.7,1509566400000:12,1509652800000:11.7,1509739200000:11.3,1509825600000:10.9,1509912000000:11.4,1509998400000:11.6,1510084800000:10.8,1510171200000:10.8,1510257600000:10.6,1510344000000:10.4,1510430400000:10.5,1510516800000:11.1,1510603200000:8.7,1510689600000:8.9,1510776000000:8.6,1510862400000:8.6,1510948800000:8.4,1511035200000:8,1511121600000:8,1511208000000:7.3,1511294400000:7.6,1511380800000:7.6,1511467200000:7.3,1511553600000:7.7,1511640000000:5.8,1511726400000:5.7,1511812800000:6.7,1511899200000:8.2,1511985600000:6.9,1512072000000:7.1,1512158400000:7.1,1512244800000:7,1512331200000:5.8,1512417600000:4.5,1512504000000:3.4,1512590400000:3.7,1512676800000:3.2,1512763200000:4.8,1512849600000:5.2,1512936000000:4,1513022400000:5.3,1513108800000:3.7,1513195200000:4.1,1513281600000:5,1513368000000:4.7,1513454400000:2.3,1513540800000:2.4,1513627200000:3.5,"
		+ "1513713600000:4,1513800000000:4.4,1513886400000:4.8,1513972800000:4.1,1514059200000:3.3,"
		+ "1514145600000:4.5,1514232000000:4.2,1514318400000:4.3,1514404800000:5.6,1514491200000:5.4,1514577600000:4.5,"
		+ "1514664000000:3.6,1514750400000:3.2,1514836800000:2.9,1514923200000:2.8,1515009600000:3.5,"
		+ "1515096000000:3.5,1515182400000:3,1515268800000:3.6,1515355200000:3.4,1515441600000:2.1,1515528000000:2.8,1515614400000:3.1,1515700800000:3.3,1515787200000:2.4,1515873600000:2.6,1515960000000:1.9,1516046400000:2.6,1516132800000:2.7,1516219200000:1.9,1516305600000:2.6,1516392000000:2.8,1516478400000:1.9,1516564800000:2.2,1516651200000:2.4,1516737600000:1.9,1516824000000:2.2,1516910400000:3.7,1516996800000:4.5,1517083200000:3.4,1517169600000:2,1517256000000:1.5,1517342400000:1.8,1517428800000:1.6,1517515200000:1.8,1517601600000:2.1,1517688000000:2.7,1517774400000:2.2,1517860800000:1.8,1517947200000:1.9,1518033600000:1.7,1518120000000:2.4,1518206400000:1.8,1518292800000:2.8,1518379200000:4.1,1518465600000:6,1518552000000:7.4,1518638400000:6.6,1518724800000:7.2,1518811200000:8,1518897600000:9.1,1518984000000:7.2,1519070400000:4.4,1519156800000:3.4,1519243200000:4.8,1519329600000:7.1,1519416000000:9.7,1519502400000:6,1519588800000:4.8,1519675200000:6.6,1519761600000:6.2,1519848000000:6.6,1519934400000:5.7,1520020800000:4.5";


String[] readings= csvContent.split(",");
List<ReadingContext> readingList=new ArrayList<ReadingContext>();
int length=readings.length;
for(int i=0;i<length;i++) {
	  
	   String row= readings[i];
	   String[] rowArr=row.split(":");
	   long ttime=Long.parseLong(rowArr[0]);
	   double value=Double.parseDouble(rowArr[1]);
	   ReadingContext reading = new ReadingContext();
	   reading.addReading("coolingDegreeDays", value);
		reading.setParentId(382);
		reading.setTtime(ttime);
		readingList.add(reading);
}

FacilioContext context = new FacilioContext();
context.put(FacilioConstants.ContextNames.MODULE_NAME, "coolingdegreedays");
context.put(FacilioConstants.ContextNames.READINGS, readingList);
context.put(FacilioConstants.ContextNames.UPDATE_LAST_READINGS,false);
Chain addReading = FacilioChainFactory.getAddOrUpdateReadingValuesChain();
addReading.execute(context);
	  
 



%>