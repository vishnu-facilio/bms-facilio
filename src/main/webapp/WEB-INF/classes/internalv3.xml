<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">


<struts>
    <package name="v3InternalApi" strict-method-invocation="false" extends="v3BaseApi">
        
        <interceptors>
            <interceptor name="internalauthinterceptor" class="com.facilio.auth.ServiceTokenInterceptor" />
            <interceptor-stack name="defaultInterceptor">
                <interceptor-ref name="defaultStack" />
                <interceptor-ref name="internalauthinterceptor">
                    <param name="service">iam</param>
                </interceptor-ref>
                <interceptor-ref name="json">
                    <param name="enableSMD">true</param>
                </interceptor-ref>
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="defaultInterceptor" />

        <global-results>
            <result name="unauthenticated" type="httpheader">
                <param name="status">401</param>
            </result>
            <result name="invaliduser" type="httpheader">
                <param name="status">400</param>
            </result>
            <result name="exception" type="chain">
                <param name="actionName">handleException</param>
                <param name="namespace">/v3/exception</param>
            </result>
        </global-results>
        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="exception" />
        </global-exception-mappings>
    </package>

    <package name="dcApi" namespace="/api/v3/internal/dc" extends="v3InternalApi">
        <action name="lookup"  class="com.facilio.auth.actions.FacilioDCAction" method="dclookup">
        </action>
        
        <action name="add" class="com.facilio.auth.actions.FacilioDCAction" method="addUser">
        </action>

        <action name="deleteDevicePassCode" class="com.facilio.auth.actions.FacilioDCAction" method="deleteDevicePassCode">
        </action>

        <action name="markCodeAsConnected" class="com.facilio.auth.actions.FacilioDCAction" method="markCodeAsConnected">
        </action>

        <action name="getDeviceCodeInfo" class="com.facilio.auth.actions.FacilioDCAction" method="getDeviceCodeInfo">
        </action>

        <action name="getDevicePasscode" class="com.facilio.auth.actions.FacilioDCAction" method="getDevicePasscode">
        </action>
    </package>

</struts>
