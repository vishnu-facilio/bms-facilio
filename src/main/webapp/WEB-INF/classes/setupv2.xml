<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
	<package name="setupApiV2" namespace="/api/v2/setup" extends="v2Api">
		<action name="addmobilesetting"  class="com.facilio.bmsconsole.actions.UserAction" method="v2addMobileSetting">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param> -->
		</action>
		<action name="removemobilesetting"  class="com.facilio.bmsconsole.actions.UserAction" method="v2removeMobileSetting">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param> -->
		</action>
	</package>
	
	<package name="approvalRuleApiV2" namespace="/api/v2/setup/approvalrule" extends="v2Api">
		<action name="add"  class="com.facilio.bmsconsole.actions.V2WorkflowAction" method="addApprovalRule">
		</action>
		
		<action name="update"  class="com.facilio.bmsconsole.actions.V2WorkflowAction" method="updateApprovalRule">
		</action>
		
		<action name="*"  class="com.facilio.bmsconsole.actions.V2WorkflowAction" method="fetchApprovalRule">
            <param name="ruleId">{1}</param>
            <result name="success" type="json">
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">responseCode, ^result.*</param>
				<param name="excludeProperties">result.rule.actions</param>
			</result>
		</action>
	</package>
	
	<package name="scheduledRuleApiV2" namespace="/api/v2/setup/scheduledrule" extends="v2Api">
		<action name="add"  class="com.facilio.bmsconsole.actions.V2WorkflowAction" method="addScheduledRule">
		</action>
		
		<action name="update"  class="com.facilio.bmsconsole.actions.V2WorkflowAction" method="updateScheduledRule">
		</action>
	</package>
	
	<package name="scheduledActionApiV2" namespace="/api/v2/setup/scheduledaction" extends="v2Api">
		<action name="add"  class="com.facilio.bmsconsole.actions.ScheduledAction" method="addScheduledAction">
		</action>
		<action name="run"  class="com.facilio.bmsconsole.actions.ScheduledAction" method="executeScheduledAction">
		</action>
	</package>
	
	<package name="alarmSetupApiV2" namespace="/api/v2/setup/alarm" extends="v2Api">
		<action name="rules"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="newFetchWorkflowRulesOfType">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
            <param name="ruleType">1</param>
		</action>
	</package>
	
	<package name="alarmRuleApiV2" namespace="/api/v2/setup/alarm/rules" extends="v2Api">
		<action name="status"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="changeWorkflowStatus">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
		</action>
		
		<action name="add" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addReadingRule">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
		</action>
		
		<action name="addcustom" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
		</action>
		
		<action name="update" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateReadingRule">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
		</action>
		
		<action name="updatecustom" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
		</action>
		
		<action name="delete"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="deleteWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
		</action>
		
		<action name="*"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="fetchWorkflow">
			<param name="moduleName">setup</param>
            <param name="permission">ALARM_SETTINGS</param>
            <param name="ruleId">{1}</param>
		</action>
	</package>
	
	<package name="woSetupApiV2" namespace="/api/v2/setup/workorder" extends="v2Api">
		<action name="rules"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="fetchWorkflowRulesOfType">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
	</package>
	
	<package name="woRuleApiV2" namespace="/api/v2/setup/workorder/rules" extends="v2Api">
	
		<action name="addcustom" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="updatecustom" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="addassignment" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addAssignmentRule">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="updateassignment" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateAssignmentRule">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="addsla" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addSLARule">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="updatesla" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateSLARule">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="delete"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="deleteWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="status"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="changeWorkflowStatus">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
		</action>
		
		<action name="*"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="fetchWorkflow">
			<param name="moduleName">setup</param>
            <param name="permission">WORKORDER_SETTINGS</param>
            <param name="ruleId">{1}</param>
		</action>
	</package>
	
	<package name="assetSetupApiV2" namespace="/api/v2/setup/asset" extends="v2Api">
		<action name="rules"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="fetchWorkflowRulesOfType">
			<param name="moduleName">setup</param>
            <param name="permission">ASSET_SETTINGS</param>
		</action>
	</package>
	
	<package name="assetRuleApiV2" namespace="/api/v2/setup/asset/rules" extends="v2Api">
	
		<action name="addcustom" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">ASSET_SETTINGS</param>
		</action>
		
		<action name="updatecustom" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateWorkflowRule">
			<param name="moduleName">setup</param>
            <param name="permission">ASSET_SETTINGS</param>
		</action>
		
		<action name="*"  class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="fetchWorkflow">
			<param name="moduleName">setup</param>
            <param name="permission">ASSET_SETTINGS</param>
            <param name="ruleId">{1}</param>
		</action>
	</package>
	
	<package name="controllerSetupApiV2" namespace="/api/v2/setup/controllers" extends="setupApiV2">
		<action name="delete"  class="com.facilio.bmsconsole.actions.ControllerAction" method="deleteController">
			<param name="moduleName">setup</param>
			<param name="permission">CONTROLLER</param>
		</action>
	</package>

	<package name="agentApiV2" namespace="/api/v2/setup/agent" extends="setupApiV2">
		<action name="list"  class="com.facilio.bmsconsole.actions.ControllerAction" method="getAgentDetails">
		</action>

		<!--<action name="delete"  class="com.facilio.bmsconsole.actions.ControllerAction" method="deleteAgent">
		</action>
			-->
		<action name="edit"  class="com.facilio.bmsconsole.actions.ControllerAction" method="editAgent">
		</action>

		<action name="log"  class="com.facilio.bmsconsole.actions.ControllerAction" method="getLogMessage">
		</action>

		<action name="logCount"  class="com.facilio.bmsconsole.actions.ControllerAction" method="getLogCount">
		</action>

		<action name="fetchMessage"  class="com.facilio.bmsconsole.actions.ControllerAction" method="getPublishMessage">
		</action>

		<!--<action name="metrics"  class="com.facilio.bmsconsole.actions.ControllerAction" method="getMetrics">
		</action>
		-->

	</package>

        <package name="integrationApiV2" namespace="/api/v2/setup/agent/integration/wattsense" extends="setupApiV2">
        <action name="add" class="com.facilio.agentIntegration.AgentIntegrationAction" method="addWattsense">
        </action>

		<action name="list" class="com.facilio.agentIntegration.AgentIntegrationAction" method="listWattsense">
		</action>

		<action name="delete" class="com.facilio.agentIntegration.AgentIntegrationAction" method="deleteWattsense">
		</action>

    </package>

	<package name="controllerApiV2" namespace="/api/v2/setup/controller" extends="setupApiV2">
		<action name="list"  class="com.facilio.bmsconsole.actions.ControllerAction" method="fetchControllerDetails">
		</action>

		<action name="edit"  class="com.facilio.bmsconsole.actions.ControllerAction" method="controllerEdit">
		</action>
	</package>

	<package name="costSetupApiV2" namespace="/api/v2/setup/cost" extends="setupApiV2">
	</package>
</struts>