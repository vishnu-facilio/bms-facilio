<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
<package name="setupPackage" namespace="/api/setup" extends="homeApi">
<interceptors>
			<interceptor name="cacheinterceptor"
						 class="com.facilio.bmsconsole.interceptors.CacheInterceptor" />
			<interceptor name="scopeinterceptor"
				class="com.facilio.bmsconsole.interceptors.ScopeInterceptor" />
			<interceptor name="datasourceinterceptor"
				class="com.facilio.bmsconsole.interceptors.DataSourceInterceptor" />
			<interceptor name="authinterceptor"
				class="com.facilio.bmsconsole.interceptors.AuthInterceptor" />
			<interceptor-stack name="defaultInterceptor">
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="authinterceptor" />
				<interceptor-ref name="datasourceinterceptor" />
				<interceptor-ref name="scopeinterceptor" />
				<interceptor-ref name="cacheinterceptor" />
				<interceptor-ref name="json">
					<param name="enableSMD">true</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="defaultInterceptor" />
		<action name="getWorkflowRules" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="fetchWorkflowRulesOfType">
			<param name="moduleName">setup</param>
            <param name="permission">ASSET_SETTINGS</param>
			<result name="success" type="json">
				<param name="root">workflowRuleList</param>
			</result>
		</action>
		<action name="fetchWorkflowRules" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="newFetchWorkflowRulesOfType">
			<param name="moduleName">setup</param>
            <param name="permission">ASSET_SETTINGS</param>
			<result name="success" type="json">
				<param name="root">workflowRuleList</param>
			</result>
		</action>
		<action name="runThroughFilters" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="runThroughFilters">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
			</result>
		</action>
		<action name="addReadingrules" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addReadingRule">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="root">readingRule</param>
			</result>
		</action>
		<action name="updateReadingRule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateReadingRule">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="root">readingRule</param>
			</result>
		</action>
		<action name="getReadingRules" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="getReadingRulesMap">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="root">readingRules</param>
			</result>
		</action>
		<action name="addWorkflowRule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addWorkflowRule">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="root">rule</param>
			</result>
		</action>
		<action name="updateWorkflowRule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateWorkflowRule">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="root">rule</param>
			</result>
		</action>
		<action name="deleteRule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="deleteWorkflowRule">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		<action name="getRule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="fetchWorkflow">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="ignoreHierarchy">false</param>
				<param name="root">rule</param>
			</result>
		</action>
		<action name="addAssignmentRule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addAssignmentRule">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
				<param name="root">rule</param>
			</result>
		</action>
		<action name="updateAssignmentRule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateAssignmentRule">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
				<param name="root">rule</param>
			</result>
		</action>
		<action name="addSLARule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addSLARule">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
				<param name="root">rule</param>
			</result>
		</action>
		<action name="updateSLARule" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="updateSLARule">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
				<param name="root">rule</param>
			</result>
		</action>
		<action name="addReadingrules" class="com.facilio.bmsconsole.actions.WorkflowRuleAction" method="addReadingRule">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">ORG_ACCESS_ADMINISTER</param> -->
			<result name="success" type="json">
				<param name="root">readingRule</param>
			</result>
		</action>
		<action name="userlist" class="com.facilio.bmsconsole.actions.UserAction" method="userList">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<param name="cache">org</param>  
			<result name="success" type="json">
			<param name="includeProperties">users.*</param></result>
		</action>
		<action name="portalusers" class="com.facilio.bmsconsole.actions.UserAction" method="portalUserList">
			<param name="moduleName">setup</param>
			<param name="permission">USER_ACCESS_ADMINISTER</param>
			<param name="cache">org</param>
			<result name="success" type="json">
				<param name="includeProperties">users.*</param></result>
		</action>
	<action name="deleteportaluser" class="com.facilio.bmsconsole.actions.UserAction" method="deletePortalUser">
		<param name="moduleName">setup</param>
		<param name="permission">USER_ACCESS_ADMINISTER</param>
		<param name="cache">org</param>
		<result name="success" type="json">
			<param name="includeProperties">users.*</param></result>
		<result name="error" type="json">
		  <param name="includeProperties">error.*</param></result>
	</action>
		<action name="groups" class="com.facilio.bmsconsole.actions.GroupAction" method="groupList">
		<param name="moduleName">setup</param>
		<param name="permission">USER_MANAGEMENT</param>
		<param name="cache">org</param>
            <result name="success" type="json">
			<param name="includeProperties">groups.*,roles.*,users.*</param></result>
		</action>
		<action name="roles" class="com.facilio.bmsconsole.actions.RoleAction" method="roleList">
		<param name="moduleName">setup</param>
		<param name="permission">USER_MANAGEMENT</param>
		<param name="cache">org</param>
            <result name="success" type="json">
			<param name="includeProperties">groups.*,roles.*,users.*</param></result>
		</action>
		<action name="downloadCertificate" class="com.facilio.bmsconsole.actions.DeviceAction" method="downloadCertificate">
			<param name="moduleName">setup</param>
			<param name="permission">CONTROLLER</param>
			<result name="success" type="json">
				<param name="includeProperties">url</param>
			</result>
		</action>
		<action name="device" class="com.facilio.bmsconsole.actions.DeviceAction" method="deviceList">
			<param name="moduleName">setup</param>
			<param name="permission">CONTROLLER</param>
			<result name="success" type="json">
				<param name="includeProperties">deviceList,deviceList\[\d+\],deviceList\[\d+\].*</param>
			</result>
		</action>
		<action name="devicelayout" class="com.facilio.bmsconsole.actions.DeviceAction" method="newDevice">
			<param name="moduleName">setup</param>
			<param name="permission">CONTROLLER</param>
			<result name="success" type="json">
				<param name="includeProperties">formlayout,formlayout\[\d+\],formlayout\[\d+\].*</param>
			</result>
		</action>
		<action name="addDevice" class="com.facilio.bmsconsole.actions.DeviceAction" method="addDevice">
			<param name="moduleName">setup</param>
			<param name="permission">CONTROLLER</param>
			<result name="success" type="json">
				<param name="includeProperties">device.*</param>
			</result>
		</action>
		<action name="stateflow" class="com.facilio.bmsconsole.actions.TicketStatusAction" method="showStateFlow">
            <result name="success" type="json">
			<param name="includeProperties">stateFlow.*</param></result>
		</action>	
		<action name="changestatus" class="com.facilio.bmsconsole.actions.UserAction" method="changeStatus">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">user.orgUserId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="deleteUser" class = "com.facilio.bmsconsole.actions.UserAction" method = "deleteUser">
			<param name="moduleName">setup</param>
			<param name= "permission">USER_MANAGEMENT</param>
			<result name = "success" type="json">
				<param name ="includeProperties">userId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
	    <action name="adduser" class="com.facilio.bmsconsole.actions.UserAction" method="addUser">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">userId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
			</action>
			<action name="inviterequester" class="com.facilio.bmsconsole.actions.UserAction" method="inviteRequester">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">userId</param>
			</result>
			</action>
			<action name="resendinvite" class="com.facilio.bmsconsole.actions.UserAction" method="resendInvite">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">userId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
			</action>
		<action name="updateuser"  class="com.facilio.bmsconsole.actions.UserAction" method="updateUser">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">userId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="addmobilesetting"  class="com.facilio.bmsconsole.actions.UserAction" method="addMobileSetting">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param> -->
			<result name="success" type="json">
				<param name="includeProperties">^userMobileSetting.*</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="removemobilesetting"  class="com.facilio.bmsconsole.actions.UserAction" method="removeMobileSetting">
			<!-- <param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param> -->
			<result name="success" type="json">
				<param name="includeProperties">^userMobileSetting.*</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="addgroup" class="com.facilio.bmsconsole.actions.GroupAction" method="addGroup">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">groupId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="updategroup" class="com.facilio.bmsconsole.actions.GroupAction" method="updateGroup">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">groupId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="deletegroup" class="com.facilio.bmsconsole.actions.GroupAction" method="deleteGroup">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">groupId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		
		<action name="deleterole" class="com.facilio.bmsconsole.actions.RoleAction" method="deleteRole">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">roleId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="changeTeamStatus" class="com.facilio.bmsconsole.actions.GroupAction" method="changeTeamStatus">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">group.groupId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>	
		<action name="addRole" class="com.facilio.bmsconsole.actions.RoleAction" method="addRole">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">roleId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="updaterole" class="com.facilio.bmsconsole.actions.RoleAction" method="updateRole">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">roleId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="addalarmemail" class="com.facilio.bmsconsole.actions.NotificationAction" method="addAlarmEMailNotifier">
            <param name="moduleName">setup</param>
			<param name="permission">ALARM_SETTINGS</param>
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		<action name="addalarmsms" class="com.facilio.bmsconsole.actions.NotificationAction" method="addAlarmSMSNotifier">
            <param name="moduleName">setup</param>
			<param name="permission">ALARM_SETTINGS</param>
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>	
		<action name="alarmrules" class="com.facilio.bmsconsole.actions.NotificationAction" method="alarmCreationRulesList">
            <param name="moduleName">setup</param>
			<param name="permission">ALARM_SETTINGS</param>
            <result name="success" type="json">
				<param name="includeProperties">alarmCreationRules.*,emails.*,phoneNumbers.*</param>
			</result>
		</action>
		<action name="workflowRuleType" class="com.facilio.bmsconsole.actions.NotificationAction" method="getWONotificationRules">
			<param name="moduleName">setup</param>
			<param name="permission">GENERAL</param>
			<result name="success" type="json">
				<param name="enumAsBean">true</param>
				<param name="root">workFlowNotifications</param>
			</result>
		</action>
		<action name="updateworkflowaction" class="com.facilio.bmsconsole.actions.NotificationAction" method="updateWorkFlowRuleAction">
			<param name="moduleName">setup</param>
			<param name="permission">GENERAL</param>
			<result name="success" type="json">
				<param name="root">action</param>
			</result>
		</action>
		<action name="turnonrule" class="com.facilio.bmsconsole.actions.NotificationAction" method="turnOnWorkflow">
            <param name="moduleName">setup</param>
			<param name="permission">GENERAL</param>
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		
		<action name="turnoffrule" class="com.facilio.bmsconsole.actions.NotificationAction" method="turnOffWorkflow">
            <param name="moduleName">setup</param>
			<param name="permission">GENERAL</param>
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		<action name="createactiontemplate" class="com.facilio.bmsconsole.actions.NotificationAction" method="updateActionTemplateWorkFlowRule">
            <param name="moduleName">setup</param>
			<param name="permission">GENERAL</param>
            <result name="success" type="json">
				<param name="includeProperties">template</param>
			</result>
		</action>
	<!-- Work Order Actions -->		
	 <action name="emailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="showEmailSettings">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
				<param name="includeProperties">emailSetting.*,supportEmails.*</param>
			</result>
		</action>	
	<!-- <action name="notifications" class="com.facilio.bmsconsole.actions.SetupActions" method="showNotificationSettings">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">emailNotifications.*</param>
			</result>
		</action>	 -->
		
		<action name="wonotifications" class="com.facilio.bmsconsole.actions.SetupActions" method="showWONotificationSettings">
			
			<result name="success" type="json">
				<param name="includeProperties">emailNotifications.*</param>
			</result>
		</action>	
		
		<action name="alarmnotifications" class="com.facilio.bmsconsole.actions.SetupActions" method="showAlarmsNotificationSettings">
			
			<result name="success" type="json">
				<param name="includeProperties">emailNotifications.*</param>
			</result>
		</action>	
		
	<action name="updatenotifications" class="com.facilio.bmsconsole.actions.SetupActions" method="updateNotificationSettings">
			<param name="moduleName">setup</param>
			<param name="permission">GENERAL</param>
			<result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>	
	<action name="updateemailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="updateSupportEmailSetting">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		<action name="addemailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="addSupportEmailSetting">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
				<param name="includeProperties">supportEmailId</param>
			</result>
		</action>
		<action name="deleteemailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="deleteSupportEmailSetting">
			<param name="moduleName">setup</param>
			<param name="permission">WORKORDER_SETTINGS</param>
			<result name="success" type="json">
			</result>
		</action>
				
		<action name="subscription" class="com.facilio.bmsconsole.actions.UserAction"
			method="subscriptionInfo">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">^subscription.*</param>
			</result>
		</action>
		<action name="updatecard" class="com.facilio.bmsconsole.actions.UserAction"
			method="updateCard">
			<param name="moduleName">setup</param>
			<param name="permission">USER_MANAGEMENT</param>
			<result name="success" type="json">
				<param name="includeProperties">^updateCard.*</param>
			</result>
		</action>
		
		<action name="addcontrollersettings" class="com.facilio.bmsconsole.actions.SetupActions" method="addControllerSettings">
		<param name="moduleName">setup</param>
		<param name="permission">CONTROLLER</param>
		<result name="success" type="json">
				<param name="includeProperties">controllerSettingsId</param>
			</result>
		</action>
		<action name="editcontrollersettings" class="com.facilio.bmsconsole.actions.SetupActions" method="editControllerSettings">
			<param name="moduleName">setup</param>
			<param name="permission">CONTROLLER</param>
			<result name="success" type="json">
				<param name="includeProperties">controllerSettingsId</param>
			</result>
		</action>		
	</package>

</struts>