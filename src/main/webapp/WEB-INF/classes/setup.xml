<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
<package name="setupPackage" namespace="/api/setup" extends="homeApi">
<interceptors>
			
			<interceptor-stack name="defaultInterceptor">
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="authinterceptor" />
				<interceptor-ref name="cacheinterceptor" />
				<interceptor-ref name="json">
					<param name="enableSMD">true</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="defaultInterceptor" />
		
		<action name="userlist" class="com.facilio.bmsconsole.actions.UserAction" method="userList">
			<param name="permission">USER_ACCESS_ADMINISTER</param>
			<param name="cache">org</param>  
			<result name="success" type="json">
			<param name="includeProperties">users.*</param></result>
		</action>
		<action name="groups" class="com.facilio.bmsconsole.actions.GroupAction" method="groupList">
		<param name="permission">GROUP_ACCESS_ADMINISTER</param>
		<param name="cache">org</param>
            <result name="success" type="json">
			<param name="includeProperties">groups.*,roles.*,users.*</param></result>
		</action>		
		<action name="device" class="com.facilio.bmsconsole.actions.DeviceAction" method="deviceList">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">deviceList,deviceList\[\d+\],deviceList\[\d+\].*</param>
			</result>
		</action>
		<action name="devicelayout" class="com.facilio.bmsconsole.actions.DeviceAction" method="newDevice">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">formlayout,formlayout\[\d+\],formlayout\[\d+\].*</param>
			</result>
		</action>
		<action name="addDevice" class="com.facilio.bmsconsole.actions.DeviceAction" method="addDevice">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">device.*</param>
			</result>
		</action>
		<action name="stateflow" class="com.facilio.bmsconsole.actions.TicketStatusAction" method="showStateFlow">
            <result name="success" type="json">
			<param name="includeProperties">stateFlow.*</param></result>
		</action>	
		<action name="changestatus" class="com.facilio.bmsconsole.actions.UserAction" method="changeStatus">
			<param name="permission">USER_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">user.orgUserId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="deleteUser" class = "com.facilio.bmsconsole.actions.UserAction" method = "deleteUser">
			<param name= "permission">USER_ACCESS_ADMINISTER</param>
			<result name = "Success" type="json">
				<param name ="includeProperties">userId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
	    <action name="adduser" class="com.facilio.bmsconsole.actions.UserAction" method="addUser">
			<param name="permission">USER_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">userId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
			</action>
		<action name="updateuser"  class="com.facilio.bmsconsole.actions.UserAction" method="updateUser">
			<param name="permission">USER_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">userId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>
		<action name="addgroup" class="com.facilio.bmsconsole.actions.GroupAction" method="addGroup">
			<param name="permission">GROUP_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">groupId</param>
			</result>
			<result name="error" type="json">
				<param name="statusCode">500</param>
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">^actionErrors.*,^fieldErrors.*</param>
			</result>
		</action>	
		<action name="addalarmemail" class="com.facilio.bmsconsole.actions.NotificationAction" method="addAlarmEMailNotifier">
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		<action name="addalarmsms" class="com.facilio.bmsconsole.actions.NotificationAction" method="addAlarmSMSNotifier">
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>	
		<action name="alarmrules" class="com.facilio.bmsconsole.actions.NotificationAction" method="alarmCreationRulesList">
            <result name="success" type="json">
				<param name="includeProperties">alarmCreationRules.*,emails.*,phoneNumbers.*</param>
			</result>
		</action>
		<action name="readingrules" class="com.facilio.bmsconsole.actions.NotificationAction" method="alarmCreationRulesList">
            <result name="success" type="json">
				<param name="includeProperties">alarmCreationRules.*,emails.*,phoneNumbers.*</param>
			</result>
		</action>
		<action name="turnonrule" class="com.facilio.bmsconsole.actions.NotificationAction" method="turnOnWorkflow">
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		
		<action name="turnoffrule" class="com.facilio.bmsconsole.actions.NotificationAction" method="turnOffWorkflow">
            <result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
	<!-- Work Order Actions -->		
	 <action name="emailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="showEmailSettings">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">emailSetting.*,supportEmails.*</param>
			</result>
		</action>	
	<!-- <action name="notifications" class="com.facilio.bmsconsole.actions.SetupActions" method="showNotificationSettings">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">emailNotifications.*</param>
			</result>
		</action>	 -->
		
		<action name="wonotifications" class="com.facilio.bmsconsole.actions.SetupActions" method="showWONotificationSettings">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">emailNotifications.*</param>
			</result>
		</action>	
		
		<action name="alarmnotifications" class="com.facilio.bmsconsole.actions.SetupActions" method="showAlarmsNotificationSettings">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">emailNotifications.*</param>
			</result>
		</action>	
		
	<action name="updatenotifications" class="com.facilio.bmsconsole.actions.SetupActions" method="updateNotificationSettings">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>	
<action name="updateemailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="updateSupportEmailSetting">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">result</param>
			</result>
		</action>
		<action name="addemailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="addSupportEmailSetting">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
				<param name="includeProperties">supportEmailId</param>
			</result>
		</action>
		<action name="deleteemailsettings" class="com.facilio.bmsconsole.actions.SetupActions" method="deleteSupportEmailSetting">
			<param name="permission">ORG_ACCESS_ADMINISTER</param>
			<result name="success" type="json">
			</result>
		</action>
				
	</package>

</struts>