"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[3037],{
/***/549670:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var dlv__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={computed:{errMessage:function(){var query=dlv__WEBPACK_IMPORTED_MODULE_0___default()(this,"$route.query.errMessage","");return query||""},previousRoute:function(){var prevRoute=dlv__WEBPACK_IMPORTED_MODULE_0___default()(this,"$route.query.prevRoute",window.location.href);return prevRoute},errorCode:function(){var status=dlv__WEBPACK_IMPORTED_MODULE_0___default()(this,"$route.query.errorCode","");return status}}}},
/***/640161:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(212826)
/* harmony import */;var d3__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(348727);
/* harmony default export */__webpack_exports__.Z={generate:function(chartContext){if(chartContext.data.value){var svg=chartContext.svg,textwidth=this.getTextWidth(chartContext.data.value+" "+chartContext.data.unit),colors=chartContext.data.color.split(",");colors[0]=colors.length&&colors[0]?colors[0]:"#f87a60",colors[1]=colors.length&&colors[1]?colors[1]:"#9c5fb8";var segmentWidth=100,width=100,height=100,fontSize=Math.min(width,height)/4,percentage=chartContext.data.value&&chartContext.data.currentValue?chartContext.data.currentValue/chartContext.data.value*100/width*100:0,lastpercentage=chartContext.data.value&&chartContext.data.existingvalue?chartContext.data.existingvalue/chartContext.data.value*100/width*100:0,colorScale=d3__WEBPACK_IMPORTED_MODULE_3__.scaleLinear().domain([0,Number(chartContext.data.value)]).range([colors[1],colors[0]]);chartContext.defs=svg.append("defs"),chartContext.gradient=chartContext.defs.append("linearGradient").attr("id","svgGradient").attr("x1","100%").attr("x2","0%").attr("y1","100%").attr("y2","100%"),chartContext.gradient.append("stop").attr("class","start").attr("offset","0%").attr("stop-color",(function(){return colors.length&&colors[0]?colors[0]:"#f87a60"})).attr("stop-opacity",1),chartContext.gradient.append("stop").attr("class","end").attr("offset","2000%").attr("stop-color",(function(){return colors.length&&colors[1]?colors[1]:"#9c5fb8"})).attr("stop-opacity",1),svg.append("rect").attr("class","bg-rect").attr("rx",1.5).attr("ry",1.5).attr("fill","#f6f6f6").attr("height",3).attr("width",(function(){return 1*segmentWidth})).attr("x",0),chartContext.svg.append("text").attr("text-anchor","middle").style("font-size",(function(){var font=fontSize/2-fontSize/4;return chartContext.data.value.toString().length>2?(font-=font/chartContext.data.value.toString().length-1,font+"px"):font+"px"})).attr("dy",fontSize/2-3).attr("dx",(function(){return 103-textwidth})).style("text-transform","uppercase").text((function(){return chartContext.data.currentValue})).style("fill",colorScale(Number(chartContext.data.currentValue))),chartContext.svg.append("text").attr("text-anchor","middle").style("font-size",(function(){var font=fontSize/2-fontSize/4;return chartContext.data.value.toString().length>2?(font-=font/chartContext.data.value.toString().length-1,font+"px"):font+"px"})).attr("dy",fontSize/2-3).attr("dx",(function(){return 115-textwidth})).style("text-transform","uppercase").text((function(){return"/"+chartContext.data.value+" "+chartContext.data.unit})).style("fill","#666666");var progress=svg.append("rect").attr("class","progress-rect").style("fill","url(#svgGradient)").attr("height",3).attr("width",lastpercentage||0).attr("rx",1.5).attr("ry",1.5).attr("x",0);progress.transition().duration(1e3).attr("width",(function(){return percentage}))}},getTextWidth:function(text){
// re-use canvas object for better performance
var textWidthCanvas=null,canvas=textWidthCanvas||(textWidthCanvas=document.createElement("canvas")),context=canvas.getContext("2d"),metrics=context.measureText(text);return metrics.width}}},
/***/387901:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */__webpack_require__(689730);
/* harmony import */var d3__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(348727);
/* harmony default export */__webpack_exports__.Z={generate:function(chartContext){var data=chartContext.data,percentage=data.value&&data.currentValue?data.currentValue/data.value:0,prepercent=data.value&&data.existingvalue?data.existingvalue/data.value:0,colors=chartContext.data.color.split(","),tau=(1+5/9)*Math.PI,width=100,height=100,outerRadius=Math.min(width,height)/2,innerRadius=outerRadius/5*4.6,fontSize=Math.min(width,height)/4;chartContext.arc=d3__WEBPACK_IMPORTED_MODULE_1__.arc().innerRadius(innerRadius).outerRadius(outerRadius).cornerRadius(outerRadius-innerRadius).startAngle(0);var svg=chartContext.svg;chartContext.text=svg.append("text").text("0%").attr("text-anchor","middle").style("font-size",fontSize+"px").style("fill","#333").attr("dy",-fontSize/4).attr("dx",2),chartContext.svg.append("text").attr("text-anchor","middle").style("font-size",fontSize/2-fontSize/4+"px").style("fill","#333").attr("dy",fontSize/4).attr("dx",2).style("text-transform","uppercase").text((function(){var lable1=data.centerText[0]?data.centerText[0].label:"";return lable1.length>14?lable1.slice(0,14)+"...":lable1})).style("fill","#f6766b").style("font-weight","bold").style("letter-spacing"," 0.6px"),chartContext.svg.append("text").attr("text-anchor","middle").style("font-size",fontSize/2-fontSize/5+"px").style("fill","#333").attr("dy",fontSize/1.5).attr("dx",2).style("text-transform","uppercase").text((function(){var lable2=data.centerText[1]?data.centerText[1].label:"";return lable2.length>14?lable2.slice(0,14)+"...":lable2})).style("fill","#666666").style("font-weight","bold").style("letter-spacing"," 0.3px"),chartContext.defs=svg.append("defs"),chartContext.gradient=chartContext.defs.append("linearGradient").attr("id","svgGradient").attr("x1","100%").attr("x2","0%").attr("y1","0%").attr("y2","100%"),chartContext.gradient.append("stop").attr("class","start").attr("offset","0%").attr("stop-color",(function(){return colors.length&&colors[0]?colors[0]:"#f87a60"})).attr("stop-opacity",1),chartContext.gradient.append("stop").attr("class","end").attr("offset","2000%").attr("stop-color",(function(){return colors.length&&colors[1]?colors[1]:"#9c5fb8"})).attr("stop-opacity",1),svg.append("path").datum({endAngle:tau}).style("fill","#f7f8f9").attr("d",chartContext.arc),chartContext.midground=svg.append("path").datum({endAngle:(prepercent||0)*tau}).style("fill","url(#svgGradient)").attr("d",chartContext.arc);var arcTween=function(transition,newAngle){transition.attrTween("d",(function(d){var interpolate=d3__WEBPACK_IMPORTED_MODULE_1__.interpolate(d.endAngle,newAngle);return function(t){return d.endAngle=interpolate(t),
// chartContext.text.text(Math.round((d.endAngle / tau) * 100) + '%') existingvalue
chartContext.text.text(data.currentValue+" "+(data.unit?data.unit:"")),chartContext.arc(d)}}))};chartContext.midground.transition().duration(1e3).call(arcTween,percentage*tau)}}},
/***/486613:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */U:function(){/* binding */return getColumnConfig}
/* harmony export */});
/* unused harmony export setColumnConfig */
/* harmony import */var src_util_helpers_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(778390),columnConfig={agentAlarm:{fixedColumns:["subject","lastOccurredTime","lastCreatedTime","acknowledged","readingalarmcategory","acknowledgedBy","acknowledgedTime","severity"],fixedSelectableColumns:["severity","noOfOccurrences","acknowledgedBy"],availableColumns:["resource"],showLookupColumns:!1,lookupToShow:["asset","space"]},accounttype:{fixedColumns:["name"],availableColumns:[]},site:{fixedColumns:["name","id"],availableColumns:[],showLookupColumns:!1,nonSelectableColumns:["space1","space2","space3","space4","building","floor","controllerId","sourceType","sourceId","operatingHour"]},building:{fixedColumns:["name","id"],availableColumns:[],showLookupColumns:!1,nonSelectableColumns:["space1","space2","space3","space4","building","floor","controllerId","sourceType","sourceId","operatingHour"]},asset:{fixedColumns:["name"],availableColumns:[],nonSelectableColumns:["hideToCustomer","parentAssetId","stateFlowId"],showLookupColumns:!1},failureclass:{fixedColumns:["name"]},item:{fixedColumns:["itemType"]},tool:{fixedColumns:["toolType"],showLookupColumns:!0,lookupToShow:["toolType","storeRoom"]},service:{fixedColumns:["name"],availableColumns:["status","description","duration","sellingPrice","buyingPrice","paymentType"],showLookupColumns:!1},transferrequestshipment:{fixedColumns:["transferRequest"]},transferrequest:{fixedColumns:["requestSubject","id"]},workorder:{fixedColumns:["subject","localId"],availableColumns:["category","description","dueDate","responseDueDate","moduleState","sourceType","assignedTo","createdTime","createdBy","priority","resource","type","modifiedTime","actualWorkStart","actualWorkEnd","totalCost","siteId","vendor","requester",src_util_helpers_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.ZP.isLicenseEnabled("TENANTS")?"tenant":"",src_util_helpers_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.ZP.isLicenseEnabled("CLIENT")?"client":"","noOfNotes","noOfTasks","noOfAttachments","attachmentPreview","jobPlan"]},workpermit:{fixedColumns:["name"],availableColumns:[],nonSelectableColumns:["ticket","approvalFlowId","stateFlowId","isRecurring","recurringInfoId","permitType"]},jobplan:{fixedColumns:["name"],availableColumns:[],showLookupColumns:!0,lookupToShow:[]},inspectionTemplate:{fixedColumns:["name"],availableColumns:[]},inspectionResponse:{fixedColumns:["name"],availableColumns:[]},newreadingalarm:{fixedColumns:["subject"],fixedSelectableColumns:["severity"]},sensorrollupalarm:{fixedColumns:["readingFieldId"],nonSelectableColumns:["type","noOfNotes","lastWoId","lastOccurrenceId","lastOccurredTime","lastClearedTime","key","description"],availableColumns:[],showLookupColumns:!1},bmsalarm:{fixedColumns:["subject"],fixedSelectableColumns:["severity"]},quote:{fixedColumns:["subject"],availableColumns:[],nonSelectableColumns:["workorder","approvalFlowId","stateFlowId","parentId"]},requestForQuotation:{fixedColumns:["name"]},purchaserequest:{fixedColumns:["name","localId"],availableColumns:[],showLookupColumns:!0,lookupToShow:["vendor","storeRoom"]},vendorQuotes:{fixedColumns:["requestForQuotation","id","vendor"]},purchaseorder:{fixedColumns:["name","localId"],availableColumns:[],showLookupColumns:!0,lookupToShow:["vendor","storeRoom"]},receivable:{fixedColumns:["poId"],availableColumns:[],showLookupColumns:!0},termsandconditions:{fixedColumns:["name"],availableColumns:[],showLookupColumns:!0,lookupToShow:[]},newreadingrules:{fixedColumns:["id","name"]},purchasecontracts:{fixedColumns:["name","localId"],availableColumns:[],showLookupColumns:!0,lookupToShow:["space","type"]},budget:{fixedColumns:["name","localId"],availableColumns:[]},chartofaccount:{fixedColumns:["name"],availableColumns:[],nonSelectableColumns:["localId"]},insurance:{fixedColumns:["companyName"],fixedSelectableColumns:["photo"]},visitorlog:{fixedColumns:["visitor","localId","visitorName"],availableColumns:[],showLookupColumns:!0,lookupToShow:["visitor"],nonSelectableColumns:["passCode"]},invitevisitor:{fixedColumns:["visitor","localId","visitorName"],availableColumns:[],showLookupColumns:!1},visitor:{fixedColumns:["name"],availableColumns:[]},watchlist:{fixedColumns:["name","localId"],availableColumns:[]},controlGroupv2:{fixedColumns:["id","name"],availableColumns:[],showLookupColumns:!1},controlSchedule:{fixedColumns:["id","name","sysCreatedTime","sysCreatedBy"],availableColumns:[],showLookupColumns:!1},facility:{fixedColumns:["name"],availableColumns:[]},amenity:{fixedColumns:["name"],availableColumns:[]},facilitybooking:{fixedColumns:["facility"],availableColumns:[]},serviceRequest:{fixedColumns:["subject"],availableColumns:[]},contactdirectory:{fixedColumns:[],availableColumns:[],nonSelectableColumns:["approvalFlowId","stateFlowId"]},admindocuments:{fixedColumns:[],availableColumns:[],nonSelectableColumns:["approvalFlowId","stateFlowId"]},announcement:{fixedColumns:["title"],availableColumns:[]},neighbourhood:{fixedColumns:["title"],availableColumns:[],nonSelectableColumns:["approvalFlowId","stateFlowId"]},dealsandoffers:{fixedColumns:["title"],availableColumns:[],nonSelectableColumns:["approvalFlowId","stateFlowId"]},newsandinformation:{fixedColumns:["title"],availableColumns:[],nonSelectableColumns:["approvalFlowId","stateFlowId"]},audience:{fixedColumns:["name"],availableColumns:[]},deliveries:{fixedColumns:["name"],availableColumns:[]},deliveryArea:{fixedColumns:["name"],availableColumns:[]},department:{fixedColumns:["name"],availableColumns:[]},desks:{fixedColumns:["name"],availableColumns:[]},gatePass:{fixedColumns:["localId"],availableColumns:["fromStoreRoom","toStoreRoom","parentWorkOrderId","parentPoId","status","issuedToPhoneNumber","vehicleNo","isReturnable","gatePassType","issuedBy","issuedTo","returnTime","issuedTime"]},lockers:{fixedColumns:["name"],availableColumns:[]},moves:{fixedColumns:["employee"],availableColumns:[]},operationalarm:{fixedColumns:["subject"],fixedSelectableColumns:["severity","noOfOccurrences","acknowledgedBy"],availableColumns:["resource","lastOccurredTime","lastCreatedTime","acknowledgedBy","acknowledged","readingalarmcategory","acknowledgedTime","severity"],showLookupColumns:!1,lookupToShow:["asset","space"]},parkingstall:{fixedColumns:["name"],availableColumns:[]},reservation:{fixedColumns:["name"],availableColumns:["startTime","endTime"],showLookupColumns:!1},rooms:{fixedColumns:["name"],availableColumns:[]},shift:{fixedColumns:["name"],availableColumns:["startTime","endTime","defaultShift"],showLookupColumns:!1},shiftRotation:{fixedColumns:["name"],availableColumns:["startTime","endTime","defaultShiftRotation"],showLookupColumns:!1},shipment:{fixedColumns:["localId"],availableColumns:["transferredBy","receivedBy","fromStore","toStore","status","localId"],showLookupColumns:!1},space:{fixedColumns:["name"],fixedSelectableColumns:["photo"]},alarm:{fixedColumns:["subject"],fixedSelectableColumns:["severity","acknowledgedBy","noOfEvents"],availableColumns:["alarmClass","alarmType","previousSeverity","condition","modifiedTime","createdTime","clearedTime","source","resource"],showLookupColumns:!1,lookupToShow:["asset","space"]},attendance:{fixedColumns:["day"],availableColumns:["user","checkInTime","checkOutTime","workingHours","status","lastCheckInTime","totalPaidBreakHrs","lastBreakStartTime"],showLookupColumns:!0,lookupToShow:["user"]},break:{fixedColumns:["name"],availableColumns:["breakTime","breakType"],showLookupColumns:!1},labourcontracts:{fixedColumns:["name","localId"],availableColumns:[],showLookupColumns:!0,lookupToShow:["space","type"]},rentalleasecontracts:{fixedColumns:["name","localId"],availableColumns:[],showLookupColumns:!0,lookupToShow:["space","type"]},warrantycontracts:{fixedColumns:["name","localId"],availableColumns:[],showLookupColumns:!0,lookupToShow:["space","type"]},hazardPrecaution:{fixedColumns:["precaution"]},safetyPlanHazard:{fixedColumns:["hazard"]},vendorDocuments:{fixedColumns:["documentName"]},contact:{fixedColumns:["name","localId"],availableColumns:[],showLookupColumns:!1},mlAnomalyAlarm:{fixedColumns:["subject"],fixedSelectableColumns:["severity","noOfOccurrences","acknowledgedBy"],availableColumns:["resource","lastOccurredTime","lastCreatedTime","acknowledgedBy","acknowledged","readingalarmcategory","acknowledgedTime","severity"],showLookupColumns:!1,lookupToShow:["asset","space"]},tenantunit:{fixedColumns:["name"],fixedSelectableColumns:["photo"]},DEFAULT:{fixedColumns:["name"],fixedSelectableColumns:["photo"]}},getColumnConfig=function(moduleName){return columnConfig[moduleName]||columnConfig.DEFAULT}},
/***/594144:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Nt:function(){/* binding */return SCOPE_LOOKUP_FIELDS},
/* harmony export */QY:function(){/* binding */return JOB_PLAN_SCOPE},
/* harmony export */Si:function(){/* binding */return JOB_PLAN_SECTION_SCOPE},
/* harmony export */wY:function(){/* binding */return addResourceParams},
/* harmony export */zO:function(){/* binding */return JOB_PLAN_TASK_SCOPE}
/* harmony export */});
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(450886),__webpack_require__(990260)),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(150361),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_2__),JOB_PLAN_SCOPE={1:"ASSETS",2:"SPACES",3:"ASSETCATEGORY",4:"SPACECATEGORY",5:"BUILDINGS",6:"SITES",7:"FLOORS",8:"GENERAL"},JOB_PLAN_SECTION_SCOPE={1:{"Every Asset":5},2:{"Asset Category":4,"Every Space":5},3:{"Every Asset":5},4:{"Asset Category":4,"Every Space":5},5:{"Space Category":3,"Asset Category":4,"Every Building":5},6:{"Space Category":3,"Asset Category":4,"All Buildings":7,"Every Site":5},7:{"Space Category":3,"Asset Category":4,"Every Floor":5},8:{General:5}},JOB_PLAN_TASK_SCOPE={"Space Category":{"Asset Category":4,"Every Space":5},"Asset Category":{"Every Asset":5},"All Buildings":{"Space Category":3,"Asset Category":4,"Every Building":5},"Every Site":{"Space Category":3,"Asset Category":4,"All Buildings":7,"Every Site":5},"Every Space":{"Asset Category":4,"Every Space":5},"Every Asset":{"Every Asset":5},"Every Building":{"Space Category":3,"Asset Category":4,"Every Building":5},"Every Floor":{"Space Category":3,"Asset Category":4,"Every Floor":5},General:{General:5}},SCOPE_LOOKUP_FIELDS={3:{isDataLoading:!1,options:[],config:{},lookupModuleName:"spacecategory",placeHolderText:"Select Space Category",field:{lookupModule:{name:"spacecategory",displayName:"Space Category"}},multiple:!1},4:{isDataLoading:!1,options:[],config:{},lookupModuleName:"assetcategory",placeHolderText:"Select Asset Category",field:{lookupModule:{name:"assetcategory",displayName:"Asset Category"}},multiple:!1}};
/* harmony import */
// Adding resource contexts for loading readings for tasks:
function addResourceParams(formModel,section){var jobPlanResource,_ref=formModel||{},jobPlanCategory=_ref.jobPlanCategory,assetCategory=_ref.assetCategory,spaceCategory=_ref.spaceCategory,_ref2=jobPlanCategory||{},category=_ref2.id;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_3__/* .isEmpty */.xb)(category)||("ASSETCATEGORY"===JOB_PLAN_SCOPE[category]&&(jobPlanResource=assetCategory),"SPACECATEGORY"===JOB_PLAN_SCOPE[category]&&(jobPlanResource=spaceCategory));var resource,serializedSection=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_2___default()(section),_ref3=serializedSection||{},tasks=_ref3.tasks,jobPlanSectionCategory=_ref3.jobPlanSectionCategory;if("ASSETCATEGORY"===JOB_PLAN_SCOPE[jobPlanSectionCategory]){var _ref4=section||{},_spaceCategory=_ref4.spaceCategory,_ref5=_spaceCategory||{},_ref5$id=_ref5.id,id=void 0===_ref5$id?null:_ref5$id;resource=id}else{var _ref6=section||{},_assetCategory=_ref6.assetCategory,_ref7=_assetCategory||{},_ref7$id=_ref7.id,_id=void 0===_ref7$id?null:_ref7$id;resource=_id}var sectionResource=resource,serializedTasks=tasks.map((function(task){var resource,_ref8=task||{},jobPlanTaskCategory=_ref8.jobPlanTaskCategory;if(3===jobPlanTaskCategory){var _ref9=task||{},_spaceCategory2=_ref9.spaceCategory,_ref10=_spaceCategory2||{},_ref10$id=_ref10.id,_id2=void 0===_ref10$id?null:_ref10$id;resource=_id2}else{var _ref11=task||{},_assetCategory2=_ref11.assetCategory,_ref12=_assetCategory2||{},_ref12$id=_ref12.id,_id3=void 0===_ref12$id?null:_ref12$id;resource=_id3}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},task),{},{jobPlanResource:jobPlanResource,sectionResource:sectionResource,resource:resource,jobPlanCategory:category})}));return serializedSection=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},serializedSection),{},{tasks:serializedTasks,resource:resource}),serializedSection}
/***/},
/***/367389:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */M:function(){/* binding */return ChangeStatusModel}
/* harmony export */});
/* harmony import */var _dec,_dec2,_class,_descriptor,_descriptor2,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(482482),__webpack_require__(424590)),_facilio_data__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__(177377),__webpack_require__(634338),__webpack_require__(480390)),util_picklist__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(961358),dlv__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_12__),_facilio_api__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(32284),ChangeStatusModel=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)(),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .prop */.vg)({deserialize:function(actionObj){var new_state=dlv__WEBPACK_IMPORTED_MODULE_12___default()(actionObj,"template.originalTemplate.new_state",null)||dlv__WEBPACK_IMPORTED_MODULE_12___default()(actionObj,"templateJson.new_state",null)||null;return{new_state:new_state}},serialize:function(new_stateData){return{templateJson:{new_state:new_stateData}}}}),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(ChangeStatusModel,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(ChangeStatusModel);function ChangeStatusModel(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(this,ChangeStatusModel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"actionType",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"new_state",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(ChangeStatusModel,null,[{key:"getTicketStatus",value:function(){var _getTicketStatus=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(moduleId){var _yield$getFieldOption,error,options;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,util_picklist__WEBPACK_IMPORTED_MODULE_11__/* .getFieldOptions */._K)({field:{lookupModuleName:"ticketstatus",skipDeserialize:!0,filters:{parentModuleId:{operatorId:9,value:["".concat(moduleId)]}}}});case 2:if(_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,!error){_context.next=9;break}throw error;case 9:return _context.abrupt("return",options||{});case 10:case"end":return _context.stop()}}),_callee)})));function getTicketStatus(_x){return _getTicketStatus.apply(this,arguments)}return getTicketStatus}()},{key:"fetchMetaModuleId",value:function(){var _fetchMetaModuleId=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(moduleName){var _yield$API$get,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_13__/* .API */.bl.get("/module/metafields",{moduleName:moduleName});case 2:if(_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,!error){_context2.next=9;break}throw error;case 9:return _context2.abrupt("return",dlv__WEBPACK_IMPORTED_MODULE_12___default()(data,"meta.module.moduleId",null));case 10:case"end":return _context2.stop()}}),_callee2)})));function fetchMetaModuleId(_x2){return _fetchMetaModuleId.apply(this,arguments)}return fetchMetaModuleId}()}]),ChangeStatusModel}(_facilio_data__WEBPACK_IMPORTED_MODULE_14__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"actionType",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 19}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"new_state",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class);
/* harmony import */},
/***/878833:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */E:function(){/* binding */return EmailModel}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_dec10,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_descriptor10,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(482482),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(424590),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__(177377),__webpack_require__(595082)),_facilio_data__WEBPACK_IMPORTED_MODULE_37__=(__webpack_require__(714566),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(212826),__webpack_require__(689730),__webpack_require__(634338),__webpack_require__(506203),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(322462),__webpack_require__(425728),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(480390)),dlv__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_32__),_utils__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(848841),_facilio_api__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(32284),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(990260),src_util_helpers_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(778390),src_util_common_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(927698),EmailModel=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)(),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({deserialize:function(actionObj){var _ref=actionObj||{},templateJson=_ref.templateJson,template=_ref.template,_ref2=template||templateJson||{},emailStructureId=_ref2.emailStructureId,isNew=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(null===templateJson||void 0===templateJson?void 0:templateJson.to)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(template),isNewTemplate=isNew||emailStructureId>0;return{isNewTemplate:isNewTemplate}},serialize:null}),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({deserialize:function(actionObj){var _ref3=actionObj||{},templateJson=_ref3.templateJson,template=_ref3.template,isNew=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(null===templateJson||void 0===templateJson?void 0:templateJson.to)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(template);return{isNew:isNew}},serialize:null}),_dec4=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({serialize:null}),_dec5=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({deserialize:function(actionObj){var _ref4=actionObj||{},template=_ref4.template,templateJson=_ref4.templateJson,moduleName=_ref4.moduleName,extraProperties={},_ref5=templateJson||template,emailStructureId=_ref5.emailStructureId,isNew=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(null===templateJson||void 0===templateJson?void 0:templateJson.to)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(template),isNewTemplate=emailStructureId>0;if(isNew)return{templateJson:{to:[],cc:[],bcc:[],subject:"",message:"",fromAddr:null,emailStructureId:null,sendAsSeparateMail:!0,isAttachmentAdded:!1,templateFileFileIds:[],templateFileIds:[],templateUrlStrings:[],attachmentList:[],workflow:{},userWorkflow:{isV2Script:!0,workflowV2String:""},ftl:!1}};var _ref6=template||templateJson||{},message=_ref6.message,subject=_ref6.subject,_ref6$fromAddr=_ref6.fromAddr,fromAddr=void 0===_ref6$fromAddr?null:_ref6$fromAddr,_emailStructureId=_ref6.emailStructureId,_ref6$fromID=_ref6.fromID,fromID=void 0===_ref6$fromID?null:_ref6$fromID,sendAsSeparateMail=_ref6.sendAsSeparateMail,userWorkflow=_ref6.userWorkflow,isAttachmentAdded=_ref6.isAttachmentAdded,_ref6$ftl=_ref6.ftl,ftl=void 0!==_ref6$ftl&&_ref6$ftl,workflow=_ref6.workflow,toField=_ref6.to,ccField=_ref6.cc,bccField=_ref6.bcc;
//a special occation where message,subject surprisingly included only in originalTemplate
if(!Object.hasOwn(template||{},"subject")&&!Object.hasOwn(templateJson||{},"subject")){var _ref7=template||{},originalTemplate=_ref7.originalTemplate;subject=(null===originalTemplate||void 0===originalTemplate?void 0:originalTemplate.subject)||"",message=(null===originalTemplate||void 0===originalTemplate?void 0:originalTemplate.message)||""}(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(userWorkflow)&&(userWorkflow={isV2Script:!0,workflowV2String:""});var _ref8=userWorkflow||{},_ref8$workflowV2Strin=_ref8.workflowV2String,workflowV2String=void 0===_ref8$workflowV2Strin?"":_ref8$workflowV2Strin,userTemplate=template;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(templateJson)){var _to=templateJson.to,_cc=templateJson.cc,_bcc=templateJson.bcc;userTemplate=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */.Z)({originalTemplate:{to:_to,cc:_cc,bcc:_bcc}},templateJson)}var to=[],cc=[],bcc=[];if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(workflow)?(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(toField)&&(to=(toField||"").split(",")),!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(ccField)&&(cc=(ccField||"").split(",")),!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(bccField)&&(bcc=(bccField||"").split(","))):(to=src_util_common_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.getUsersFromTemplate(userTemplate),cc=src_util_common_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.getUsersFromTemplate(userTemplate,"cc"),bcc=src_util_common_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.getUsersFromTemplate(userTemplate,"bcc")),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(userWorkflow.workflowV2String)||(userWorkflow.workflowV2String=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(moduleName)?workflowV2String.replace("Map test() { ","").slice(0,-2):workflowV2String.replace("Map scriptFunc(Map "+moduleName+") {\n","").replace(new RegExp("\n}$"),"")),!isNewTemplate){var templateObj=templateJson;_emailStructureId=null,!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(template)&&(templateObj=template.originalTemplate);var _templateObj=templateObj,_templateObj$html=_templateObj.html,html=void 0!==_templateObj$html&&_templateObj$html;extraProperties={html:html}}return{templateJson:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */.Z)({},extraProperties),{},{subject:subject,message:message,isAttachmentAdded:isAttachmentAdded,templateFileFileIds:[],templateFileIds:[],templateUrlStrings:[],attachmentList:[],to:to,cc:cc,bcc:bcc,fromAddr:fromAddr||fromID,emailStructureId:isNewTemplate?_emailStructureId:null,sendAsSeparateMail:sendAsSeparateMail,workflow:{},userWorkflow:userWorkflow,ftl:ftl})}},serialize:function(templateJson,instance){var moduleName=instance.moduleName,to=templateJson.to,cc=templateJson.cc,bcc=templateJson.bcc,userWorkflow=templateJson.userWorkflow,workflow=templateJson.workflow,_userWorkflow=userWorkflow,workflowV2String=_userWorkflow.workflowV2String,ccKey=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(cc)?null:{ids:cc,key:"cc"},bccKey=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(bcc)?null:{ids:bcc,key:"bcc"};if(src_util_common_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.setUserMailWorkflow(to,templateJson,"mail",moduleName,!1,ccKey,bccKey),!instance.isNewTemplate){var stringsMayContainPlaceholders="".concat(templateJson.message," ").concat(templateJson.subject," ").concat(((null===templateJson||void 0===templateJson?void 0:templateJson.templateUrlStrings)||[]).join());src_util_common_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z.setExpressionFromPlaceHolder(workflow,stringsMayContainPlaceholders,moduleName)}instance.addModuleParam();var type=1,name="New WorkOrder Email Template";return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(userWorkflow.workflowV2String)?userWorkflow=null:userWorkflow.workflowV2String=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(moduleName)?"Map test() { "+workflowV2String+" }":"Map scriptFunc(Map "+moduleName+") {\n"+workflowV2String+"\n}",(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(templateJson.attachmentList)?(delete templateJson.attachmentList,delete templateJson.templateFileIds,delete templateJson.templateUrlStrings,delete templateJson.templateFileFileIds):templateJson.attachmentList=instance.constructAttachmentList(),delete templateJson.isAttachmentAdded,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(cc)&&delete templateJson.cc,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(bcc)&&delete templateJson.bcc,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(templateJson.emailStructureId)&&delete templateJson.emailStructureId,(templateJson.to||[]).length<2&&delete templateJson.sendAsSeparateMail,{templateJson:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */.Z)({},templateJson),{},{name:name,type:type,userWorkflow:userWorkflow})}}}),_dec6=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({serialize:null}),_dec7=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({serialize:null}),_dec8=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({serialize:null}),_dec9=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({deserialize:function(actionObj){var rule=actionObj.rule;return{configRuleName:rule?rule.name+"_"+rule.ruleType:""}},serialize:null}),_dec10=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .prop */.vg)({deserialize:function(actionObj){var _notifConfig$configRu,rule=actionObj.rule,configRuleName=rule?rule.name+"_"+rule.ruleType:"";return{isUserNonEditable:rule&&!1===(null===(_notifConfig$configRu=_utils__WEBPACK_IMPORTED_MODULE_33__/* .notifConfig */.r8[configRuleName])||void 0===_notifConfig$configRu?void 0:_notifConfig$configRu.isUsersEditable)}},serialize:null}),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(EmailModel,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */.Z)(EmailModel);function EmailModel(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(this,EmailModel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"cachedFields",void 0),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"actionType",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"isNewTemplate",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"isNew",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"templateId",_descriptor4,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"templateJson",_descriptor5,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"moduleName",_descriptor6,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"rule",_descriptor7,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"option",_descriptor8,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"configRuleName",_descriptor9,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this),"isUserNonEditable",_descriptor10,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(EmailModel,[{key:"getEmailTemplateList",value:function(){var _getEmailTemplateList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee(){var _yield$API$get,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_34__/* .API */.bl.get("v2/template/email/list",{moduleName:this.moduleName});case 2:return _yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,_context.abrupt("return",{data:null===data||void 0===data?void 0:data.emailStructures,error:error});case 6:case"end":return _context.stop()}}),_callee,this)})));function getEmailTemplateList(){return _getEmailTemplateList.apply(this,arguments)}return getEmailTemplateList}()},{key:"getReceivingUsers",value:function(){var _getReceivingUsers=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee2(){var search,appId,receiverType,responseObj,_args2=arguments;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return search=_args2.length>0&&void 0!==_args2[0]?_args2[0]:"",appId=_args2.length>1?_args2[1]:void 0,receiverType=_args2.length>2&&void 0!==_args2[2]?_args2[2]:["to"],_context2.next=5,_utils__WEBPACK_IMPORTED_MODULE_33__/* .fetchUsers */.uh.bind(this,search,appId,receiverType)();case 5:return responseObj=_context2.sent,_context2.abrupt("return",responseObj);case 7:case"end":return _context2.stop()}}),_callee2,this)})));function getReceivingUsers(){return _getReceivingUsers.apply(this,arguments)}return getReceivingUsers}()},{key:"getReceivingFields",value:function(){var _getReceivingFields=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee3(){var search,moduleName,cachedFields,fields,_yield$API$get2,data,userFields,tenantFields,clientFields,vendorsFields,audienceFields,senderFieldOptions,_args3=arguments;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(search=_args3.length>0&&void 0!==_args3[0]?_args3[0]:"",moduleName=this.moduleName,cachedFields=this.cachedFields,fields=[],(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(cachedFields)){_context3.next=7;break}fields=cachedFields,_context3.next=13;break;case 7:return _context3.next=9,_facilio_api__WEBPACK_IMPORTED_MODULE_34__/* .API */.bl.get("/module/metafields",{moduleName:moduleName});case 9:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,fields=dlv__WEBPACK_IMPORTED_MODULE_32___default()(data,"meta.fields",[]),this.cachedFields=fields;case 13:return fields=this.filteredFieldsList(fields,search),userFields=fields.filter((function(field){var lookupModulename=dlv__WEBPACK_IMPORTED_MODULE_32___default()(field,"lookupModule.name"),userField=["users","groups"].includes(lookupModulename),requesterField="workorder"===moduleName&&"requester"===dlv__WEBPACK_IMPORTED_MODULE_32___default()(field,"name","");return userField||requesterField})),tenantFields=this.getSpecificlookupList(fields,"tenant"),clientFields=this.getSpecificlookupList(fields,"client"),vendorsFields=this.getSpecificlookupList(fields,"vendors"),audienceFields=this.getSpecificlookupList(fields,"audience"),senderFieldOptions=this.userTemplateOptions({userFields:userFields,audienceFields:audienceFields,vendorsFields:vendorsFields,clientFields:clientFields,tenantFields:tenantFields}),_context3.abrupt("return",senderFieldOptions||{});case 21:case"end":return _context3.stop()}}),_callee3,this)})));function getReceivingFields(){return _getReceivingFields.apply(this,arguments)}return getReceivingFields}()},{key:"getSpecificlookupList",value:function(fields,lookupModule){var filteredFields=(fields||[]).filter((function(field){var _field$lookupModule=field.lookupModule,_field$lookupModule2=void 0===_field$lookupModule?{}:_field$lookupModule,lookupModulename=_field$lookupModule2.name;return lookupModulename===lookupModule}));return filteredFields}},{key:"constructOptionGroup",value:function(fields,getValue){var _this2=this,fieldsList=[];return fields.forEach((function(field){var options={label:field.displayName,value:getValue(field,_this2.moduleName)};fieldsList.push(options)})),fieldsList}},{key:"filteredFieldsList",value:function(fields){var search=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",filteredFields=fields.filter((function(field){var displayName=field.displayName,lcName=displayName.toLowerCase(),lcSearch=search.toLowerCase(),displayTypeEnum=dlv__WEBPACK_IMPORTED_MODULE_32___default()(field,"displayType._name"),multiLookupField="MULTI_LOOKUP_SIMPLE"===displayTypeEnum;return!multiLookupField&&lcName.match(lcSearch)}));return filteredFields}},{key:"userTemplateOptions",value:function(otherFields){var _this3=this,userFields=otherFields.userFields,audienceFields=otherFields.audienceFields,vendorsFields=otherFields.vendorsFields,clientFields=otherFields.clientFields,tenantFields=otherFields.tenantFields,options=[];if(!this.rule||!Object.hasOwn(_utils__WEBPACK_IMPORTED_MODULE_33__/* .notifConfig */.r8||{},this.configRuleName)){var usersGroup=this.constructOptionGroup(userFields,this.getValue);if(options.Fields=[],!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(usersGroup)&&(options.Fields=usersGroup),src_util_helpers_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */.ZP.isLicenseEnabled("VENDOR")){var vendorGroup=this.constructOptionGroup(vendorsFields,this.getPrimaryEmailValue);!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(vendorGroup)&&(options.Vendors=vendorGroup)}if(src_util_helpers_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */.ZP.isLicenseEnabled("TENANTS")){var tenantGroup=this.constructOptionGroup(tenantFields,this.getPrimaryEmailValue);!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(tenantGroup)&&(options.Tenants=tenantGroup)}if(src_util_helpers_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */.ZP.isLicenseEnabled("CLIENT")){var clientGroup=this.constructOptionGroup(clientFields,this.getPrimaryEmailValue);!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(clientGroup)&&(options.Clients=clientGroup)}var audienceGroup=this.constructOptionGroup(audienceFields,this.getFieldNameValue);if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(audienceGroup)&&(options.Audiences=audienceGroup),"quote"===this.moduleName){var isSysCreatedFound=options.Fields.find((function(item){return item.label===_utils__WEBPACK_IMPORTED_MODULE_33__/* .sysCreatedByUserOption */.k$.label}));isSysCreatedFound||options.Fields.push({label:_utils__WEBPACK_IMPORTED_MODULE_33__/* .sysCreatedByUserOption */.k$.label,value:this.getValue(_utils__WEBPACK_IMPORTED_MODULE_33__/* .sysCreatedByUserOption */.k$,this.moduleName)})}return options}var conf=_utils__WEBPACK_IMPORTED_MODULE_33__/* .notifConfig */.r8[this.configRuleName]||{};return options=userFields.filter((function(user){return(conf.options||[]).includes(user.field)})).map((function(user){return{label:user.label,value:_this3.getValue(user,conf.module)}})),options}},{key:"fetchEmailTemplateList",value:function(){var _fetchEmailTemplateList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee4(){var _yield$API$get3,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_34__/* .API */.bl.get("v2/template/email/list?moduleName=".concat(this.moduleName));case 2:return _yield$API$get3=_context4.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,_context4.abrupt("return",{data:data.emailStructures,error:error});case 6:case"end":return _context4.stop()}}),_callee4,this)})));function fetchEmailTemplateList(){return _fetchEmailTemplateList.apply(this,arguments)}return fetchEmailTemplateList}()},{key:"addAttachmentList",value:function(){var _addAttachmentList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee5(){var templateJson,templateId,_yield$API$get4,data,error,attachmentObj;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(templateJson=this.templateJson,templateId=this.templateId,!templateJson.isAttachmentAdded){_context5.next=8;break}return _context5.next=4,_facilio_api__WEBPACK_IMPORTED_MODULE_34__/* .API */.bl.get("/v2/template/attachment/getList",{templateId:templateId});case 4:_yield$API$get4=_context5.sent,data=_yield$API$get4.data,error=_yield$API$get4.error,error||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(data)||(attachmentObj=this.deserializeAttachments(data),this.templateJson=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */.Z)({},this.templateJson),attachmentObj));case 8:case"end":return _context5.stop()}}),_callee5,this)})));function addAttachmentList(){return _addAttachmentList.apply(this,arguments)}return addAttachmentList}()},{key:"deserializeAttachments",value:function(data){var _ref9=data||{},attachmentUrlList=_ref9.attachmentUrlList,attachmentList=_ref9.attachments,attachmentFileFieldslList=_ref9.attachmentFileFieldslList,templateUrlStrings=(attachmentUrlList||[]).map((function(url){return url.urlString})),templateFileFileIds=(attachmentFileFieldslList||[]).map((function(fieldObj){return fieldObj.fieldId})),templateFileIds=(attachmentList||[]).map((function(attachment){return attachment.fileId}));return{templateFileFileIds:templateFileFileIds,templateFileIds:templateFileIds,templateUrlStrings:templateUrlStrings,attachmentList:attachmentList}}},{key:"constructAttachmentList",value:function(){var _ref10=this||{},templateJson=_ref10.templateJson;this.templateJson.attachmentList=[];var attachmentList=[],templateFileIds=templateJson.templateFileIds,templateUrlStrings=templateJson.templateUrlStrings,templateFileFileIds=templateJson.templateFileFileIds,mappedFileIds=(templateFileIds||[]).map((function(fileId){return{fileId:fileId,type:1}})),mappedFileFileIds=(templateFileFileIds||[]).map((function(fieldId){return{fieldId:fieldId,type:2}})),mappedUrlStrings=(templateUrlStrings||[]).filter((function(url){return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(url)})).map((function(urlString){return{urlString:urlString,type:3}}));return attachmentList=[].concat((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(mappedFileIds),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(mappedUrlStrings),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(mappedFileFileIds)),attachmentList}},{key:"prependDivInMessage",value:function(){this.templateJson.message&&(this.templateJson.message="<div style='white-space:pre'>"+this.templateJson.message+"</div>")}},{key:"onSaveAttachments",value:function(urlArray,fileIds,attachments,fileFieldIds){this.templateJson.templateUrlStrings=urlArray,this.templateJson.templateFileIds=fileIds,this.templateJson.templateFileFileIds=fileFieldIds,this.templateJson.attachmentList=attachments}},{key:"handleAddrChange",value:function(receiverType,userOptionList){return _utils__WEBPACK_IMPORTED_MODULE_33__/* .handleAddrChange */.dg.bind(this,receiverType,userOptionList,!0,!0)()}},{key:"addModuleParam",value:function(){var templateJson=this.templateJson,moduleName=this.moduleName;return _utils__WEBPACK_IMPORTED_MODULE_33__/* .addModuleParam */.mg.bind(this,templateJson,moduleName)()}},{key:"getValue",value:function(user,module){return"${"+(user.value?user.value:module+"."+(user.field||user.name))+".email:-}"}},{key:"getPrimaryEmailValue",value:function(user,module){return"${"+(user.value?user.value:module+"."+(user.field||user.name))+".primaryContactEmail:-}"}},{key:"getFieldNameValue",value:function(field,module){var _ref11=field||{},name=_ref11.name,lookupModule=_ref11.lookupModule,_ref12=lookupModule||{},lookupModuleName=_ref12.name;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_38__/* .isEmpty */.xb)(name)?module:"".concat(name,".notif_mod_").concat(lookupModuleName)}}],[{key:"getSenderList",value:function(){var _getSenderList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().mark((function _callee6(){var _yield$API$get5,data,error;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,_facilio_api__WEBPACK_IMPORTED_MODULE_34__/* .API */.bl.get("/v3/modules/data/list",{moduleName:"emailFromAddress"});case 2:if(_yield$API$get5=_context6.sent,data=_yield$API$get5.data,error=_yield$API$get5.error,error){_context6.next=8;break}
/* sourceType=1 filters all addresses added for notifications */return data.emailFromAddress=data.emailFromAddress.filter((function(em){return 1===em.sourceType})),_context6.abrupt("return",data.emailFromAddress);case 8:case"end":return _context6.stop()}}),_callee6)})));function getSenderList(){return _getSenderList.apply(this,arguments)}return getSenderList}()}]),EmailModel}(_facilio_data__WEBPACK_IMPORTED_MODULE_37__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"actionType",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"isNewTemplate",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"isNew",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"templateId",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_descriptor5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"templateJson",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_descriptor6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"moduleName",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"rule",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"option",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"configRuleName",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor10=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */.Z)(_class.prototype,"isUserNonEditable",[_dec10],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class);
/* harmony import */},
/***/510109:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */w:function(){/* binding */return NotificationModel}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_class,_descriptor,_descriptor2,_descriptor3,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(482482),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(424590),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(177377),__webpack_require__(595082)),_facilio_data__WEBPACK_IMPORTED_MODULE_34__=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(212826),__webpack_require__(689730),__webpack_require__(634338),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(322462),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(843843),__webpack_require__(480390)),dlv__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_28__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(990260),src_util_common_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(927698),_facilio_api__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(32284),util_appUtil__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(843097),util_constant__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(354754),_utils__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(848841),NotificationModel=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_34__/* .prop */.vg)(),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_34__/* .prop */.vg)({deserialize:function(actionObj){var _ref=actionObj||{},template=_ref.template,templateJson=_ref.templateJson,moduleName=_ref.moduleName,isNew=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(null===templateJson||void 0===templateJson?void 0:templateJson.application)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(template);if(isNew)return{templateJson:{application:null,to:[],subject:null,message:null,isPushNotification:!1,workflow:{},userWorkflow:{isV2Script:!0,workflowV2String:""}}};var message=null,subject=null,userTemplate=null,to=null,_ref2=template||templateJson||{},_ref2$application=_ref2.application,application=void 0===_ref2$application?null:_ref2$application,_ref2$body=_ref2.body,body=void 0===_ref2$body?"":_ref2$body,_ref2$isSendNotificat=_ref2.isSendNotification,isSendNotification=void 0!==_ref2$isSendNotificat&&_ref2$isSendNotificat,_ref2$type=_ref2.type,type=void 0===_ref2$type?8:_ref2$type,userWorkflow=_ref2.userWorkflow,ftl=_ref2.ftl;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(userWorkflow)&&(userWorkflow={isV2Script:!0,workflowV2String:""});var _ref3=userWorkflow||{},_ref3$workflowV2Strin=_ref3.workflowV2String,workflowV2String=void 0===_ref3$workflowV2Strin?"":_ref3$workflowV2Strin;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(templateJson)){var templateData=((null===template||void 0===template?void 0:template.originalTemplate)||{}).data||{};message=templateData.text||null,subject=templateData.title||null,userTemplate=template}else message=templateJson.message,subject=templateJson.subject,userTemplate=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)({originalTemplate:{to:templateJson.to}},templateJson);return to=src_util_common_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */.Z.getUsersFromTemplate(userTemplate)||[],(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(userWorkflow.workflowV2String)||(userWorkflow.workflowV2String=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(moduleName)?workflowV2String.replace("Map test() { ","").slice(0,-2):workflowV2String.replace("Map scriptFunc(Map "+moduleName+") {\n","").replace(new RegExp("\n}$"),"")),{templateJson:{application:application,body:body,to:to,isSendNotification:isSendNotification,isPushNotification:isSendNotification,type:type,message:message,subject:subject,userWorkflow:userWorkflow,workflow:{},ftl:ftl}}},serialize:function(templateJson,instance){var to=templateJson.to,isPushNotification=templateJson.isPushNotification,userWorkflow=templateJson.userWorkflow,_templateJson$workflo=templateJson.workflow,workflow=void 0===_templateJson$workflo?{}:_templateJson$workflo,_userWorkflow=userWorkflow,workflowV2String=_userWorkflow.workflowV2String,moduleName=instance.moduleName,type=8,name="New WorkOrder Push Notification Template",isSendNotification=isPushNotification;return src_util_common_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */.Z.setUserMailWorkflow(to,templateJson,"mobile",moduleName),src_util_common_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */.Z.setExpressionFromPlaceHolder(workflow,templateJson.message,instance.moduleName),src_util_common_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */.Z.setExpressionFromPlaceHolder(workflow,templateJson.subject),instance.formatMobileData(templateJson,moduleName),instance.addModuleParam(templateJson,moduleName),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(userWorkflow.workflowV2String)?userWorkflow=null:userWorkflow.workflowV2String=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(moduleName)?"Map test() { "+workflowV2String+" }":"Map scriptFunc(Map "+moduleName+") {\n"+workflowV2String+"\n}",{templateJson:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */.Z)({},templateJson),{},{type:type,name:name,isSendNotification:isSendNotification,userWorkflow:userWorkflow})}}}),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_34__/* .prop */.vg)(),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z)(NotificationModel,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(NotificationModel);function NotificationModel(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(this,NotificationModel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"fields",{}),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"actionType",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"templateJson",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this),"moduleName",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(NotificationModel,[{key:"getReceivingUsers",value:function(){var _getReceivingUsers=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(){var search,responseObj,_args=arguments;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return search=_args.length>0&&void 0!==_args[0]?_args[0]:"",_context.next=3,_utils__WEBPACK_IMPORTED_MODULE_33__/* .fetchUsers */.uh.bind(this,search,null,["to"])();case 3:return responseObj=_context.sent,_context.abrupt("return",responseObj);case 5:case"end":return _context.stop()}}),_callee,this)})));function getReceivingUsers(){return _getReceivingUsers.apply(this,arguments)}return getReceivingUsers}()},{key:"getMetaFields",value:function(){var _getMetaFields=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(){var moduleName,fields,_yield$API$get,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(moduleName=this.moduleName,fields=this.fields,!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_35__/* .isEmpty */.xb)(fields)){_context2.next=8;break}return _context2.next=4,_facilio_api__WEBPACK_IMPORTED_MODULE_30__/* .API */.bl.get("/module/metafields",{moduleName:moduleName});case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,fields=dlv__WEBPACK_IMPORTED_MODULE_28___default()(data,"meta.fields",[]),this.fields=fields;case 8:return _context2.abrupt("return",fields);case 9:case"end":return _context2.stop()}}),_callee2,this)})));function getMetaFields(){return _getMetaFields.apply(this,arguments)}return getMetaFields}()},{key:"fetchFieldList",value:function(){var _fetchFieldList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee3(){var search,moduleName,fields,userFields,options,sysCreatedByUserLabel,sysCreatedByUserValue,_args3=arguments;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return search=_args3.length>0&&void 0!==_args3[0]?_args3[0]:"",moduleName=this.moduleName,_context3.next=4,this.getMetaFields();case 4:return fields=_context3.sent,userFields=(fields||[]).filter((function(field){var _ref4=field||{},_ref4$displayName=_ref4.displayName,displayName=void 0===_ref4$displayName?"":_ref4$displayName,lcName=displayName.toLowerCase(),lcSearch=search.toLowerCase(),displayTypeEnum=dlv__WEBPACK_IMPORTED_MODULE_28___default()(field,"displayType._name"),isMultiLookupField="MULTI_LOOKUP_SIMPLE"===displayTypeEnum,lookupModulename=dlv__WEBPACK_IMPORTED_MODULE_28___default()(field,"lookupModule.name"),isUserField=["users","groups","people"].includes(lookupModulename),isRequesterField="workorder"===moduleName&&"requester"===dlv__WEBPACK_IMPORTED_MODULE_28___default()(field,"name","");return!isMultiLookupField&&(isUserField||isRequesterField)&&lcName.match(lcSearch)})),options=userFields.map((function(fieldObj){var _ref5=fieldObj||{},displayName=_ref5.displayName,value=_ref5.value,field=_ref5.field,name=_ref5.name,fieldValue=value||moduleName+"."+(field||name);return{label:displayName,value:"${".concat(fieldValue,".id:-}")}})),"quote"===moduleName&&(sysCreatedByUserLabel="Created By",sysCreatedByUserValue="sysCreatedBy",options.push({label:sysCreatedByUserLabel,value:"${".concat(moduleName,".").concat(sysCreatedByUserValue,".id:-}")})),_context3.abrupt("return",options);case 9:case"end":return _context3.stop()}}),_callee3,this)})));function fetchFieldList(){return _fetchFieldList.apply(this,arguments)}return fetchFieldList}()},{key:"handleAddrChange",value:function(receiverType,userOptionList){return _utils__WEBPACK_IMPORTED_MODULE_33__/* .handleAddrChange */.dg.bind(this,receiverType,userOptionList,!0,!1)()}},{key:"formatMobileData",value:function(data,moduleName){var summaryPage=moduleName.toUpperCase()+"_SUMMARY",message={content_available:!0,summary_id:"${"+moduleName+".id}",sound:"default",module_name:moduleName,priority:"high",text:data.message,click_action:summaryPage,title:data.subject};data.body=JSON.stringify({name:moduleName.toUpperCase()+"_PUSH_NOTIFICATION",notification:message,data:message,id:data.id}),data.to=data.id,src_util_common_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */.Z.setExpressionFromPlaceHolder(data.workflow,"${"+moduleName+".id}")}},{key:"addModuleParam",value:function(){var templateJson=this.templateJson,moduleName=this.moduleName;return _utils__WEBPACK_IMPORTED_MODULE_33__/* .addModuleParam */.mg.bind(this,templateJson,moduleName)()}},{key:"fetchAppList",value:function(){var _fetchAppList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee4(){var _constants$appCategor,FEATURE_GROUPING,WORK_CENTERS,PORTALS,_yield$loadApps,error,data;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _constants$appCategor=util_constant__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */.Z.appCategory,FEATURE_GROUPING=_constants$appCategor.FEATURE_GROUPING,WORK_CENTERS=_constants$appCategor.WORK_CENTERS,PORTALS=_constants$appCategor.PORTALS,_context4.next=3,(0,util_appUtil__WEBPACK_IMPORTED_MODULE_31__/* .loadApps */.jJ)();case 3:if(_yield$loadApps=_context4.sent,error=_yield$loadApps.error,data=_yield$loadApps.data,!error){_context4.next=10;break}throw error;case 10:return _context4.abrupt("return",(data||[]).filter((function(app){return[FEATURE_GROUPING,WORK_CENTERS,PORTALS].includes(app.appCategory)})));case 11:case"end":return _context4.stop()}}),_callee4)})));function fetchAppList(){return _fetchAppList.apply(this,arguments)}return fetchAppList}()}]),NotificationModel}(_facilio_data__WEBPACK_IMPORTED_MODULE_34__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"actionType",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"templateJson",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{application:null,to:[],subject:null,default:"true",message:null,isPushNotification:!1,workflow:null,userWorkflow:{isV2Script:!0,workflowV2String:""}}}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)(_class.prototype,"moduleName",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class);
/* harmony import */},
/***/721486:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */q:function(){/* binding */return ScriptModel}
/* harmony export */});
/* harmony import */var _dec,_dec2,_dec3,_class,_descriptor,_descriptor2,_descriptor3,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(900251),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(862833),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(513087),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(352417),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(793806),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(624343),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(482482),__webpack_require__(424590)),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(177377),__webpack_require__(595082)),_facilio_data__WEBPACK_IMPORTED_MODULE_18__=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(212826),__webpack_require__(689730),__webpack_require__(634338),__webpack_require__(480390)),dlv__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_17__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(990260),ScriptModel=(_dec=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_18__/* .prop */.vg)(),_dec2=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_18__/* .prop */.vg)({serialize:null}),_dec3=(0,_facilio_data__WEBPACK_IMPORTED_MODULE_18__/* .prop */.vg)({deserialize:function(actionObj){var _ref=actionObj||{},moduleName=_ref.moduleName,serverWorkflowString=dlv__WEBPACK_IMPORTED_MODULE_17___default()(actionObj,"template.originalTemplate.workflowContext.workflowV2String","")||"",clientWorkflowString=dlv__WEBPACK_IMPORTED_MODULE_17___default()(actionObj,"templateJson.resultWorkflowContext.workflowV2String","")||"",workflowString=serverWorkflowString||clientWorkflowString||"",serverIsV2Script=dlv__WEBPACK_IMPORTED_MODULE_17___default()(actionObj,"template.originalTemplate.workflowContext.isV2Script",null),clientIsV2Script=dlv__WEBPACK_IMPORTED_MODULE_17___default()(actionObj,"templateJson.resultWorkflowContext.isV2Script",null),isV2Script=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__/* .isNullOrUndefined */.le)(serverIsV2Script)?!!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__/* .isNullOrUndefined */.le)(clientIsV2Script)||clientIsV2Script:serverIsV2Script,workflowV2String=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__/* .isEmpty */.xb)(moduleName)?workflowString.replace("void test() { ","").slice(0,-2):workflowString.replace("void scriptFunc(Map "+moduleName+") {\n","").replace(new RegExp("\n}$"),""),workflowContextId=dlv__WEBPACK_IMPORTED_MODULE_17___default()(actionObj,"templateJson.resultWorkflowContext.id",null),workflowContext={workflowV2String:workflowV2String,isV2Script:isV2Script};return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__/* .isEmpty */.xb)(workflowContextId)||(workflowContext=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)({},workflowContext),{},{id:workflowContextId})),{workflowContext:workflowContext}},validate:function(workflowContext){var _ref2=workflowContext||{},workflowV2String=_ref2.workflowV2String;return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__/* .isEmpty */.xb)(workflowV2String)},serialize:function(workflowContext,instance){var _ref3=workflowContext||{},workflowV2String=_ref3.workflowV2String,isV2Script=_ref3.isV2Script,id=_ref3.id,workflowString=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__/* .isEmpty */.xb)(instance.moduleName)?"void test() { "+workflowV2String+" }":"void scriptFunc(Map "+instance.moduleName+") {\n"+workflowV2String+"\n}",resultWorkflowContext={workflowV2String:workflowString,isV2Script:isV2Script||!0};(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_19__/* .isEmpty */.xb)(id)||(resultWorkflowContext=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */.Z)({},resultWorkflowContext),{},{id:id}));var templateJson={resultWorkflowContext:resultWorkflowContext};return{templateJson:templateJson}}}),_class=function(_SetupData){(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)(ScriptModel,_SetupData);var _super=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z)(ScriptModel);function ScriptModel(){var _this;(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(this,ScriptModel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"actionType",_descriptor,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"moduleName",_descriptor2,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_initializerDefineProperty_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this),"workflowContext",_descriptor3,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_this)),_this}return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(ScriptModel)}(_facilio_data__WEBPACK_IMPORTED_MODULE_18__/* .SetupData */.vW),_descriptor=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"actionType",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 21}}),_descriptor2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"moduleName",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_applyDecoratedDescriptor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */.Z)(_class.prototype,"workflowContext",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{workflowV2String:"",isV2Script:!0}}}),_class);
/* harmony import */},
/***/848841:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */dg:function(){/* binding */return handleAddrChange},
/* harmony export */g8:function(){/* binding */return quillEditorConfig},
/* harmony export */k$:function(){/* binding */return sysCreatedByUserOption},
/* harmony export */mg:function(){/* binding */return addModuleParam},
/* harmony export */r8:function(){/* binding */return notifConfig},
/* harmony export */uh:function(){/* binding */return fetchUsers}
/* harmony export */});
/* unused harmony exports actionHash, actionType, Modules, Fields */
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(548534),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(595082),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_23__=(__webpack_require__(186466),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(947522),__webpack_require__(300268),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(634338),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(990260)),src_util_common_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(927698),dlv__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_21__),_facilio_api__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(32284),Modules={WORKORDER:"workorder",WORKREQUEST:"workorderrequest",ALARM:"alarm"},Fields={REQUESTER:"requester",REQUESTED_BY:"requestedBy",ASSIGNED_BY:"assignedBy",ASSIGNED_TO:"assignedTo",ASSIGNED_GROUP:"assignmentGroup",VENDOR:"vendor",TENANT:"tenant",SYS_CREATED_BY:"sysCreatedBy"},sysCreatedByUserOption={label:"Created By",field:Fields.SYS_CREATED_BY},notifConfig={"Approve Workrequest_11":{options:[Fields.REQUESTER],module:Modules.WORKREQUEST,isUsersEditable:!0},"Reject Workrequest_11":{options:[Fields.REQUESTER],module:Modules.WORKREQUEST,isUsersEditable:!0},"Notify Requester on Closing Workorder_11":{options:[Fields.REQUESTER],module:Modules.WORKORDER,isUsersEditable:!0},"Technician Closes Workorder_11":{options:[Fields.ASSIGNED_TO,Fields.ASSIGNED_BY],module:Modules.WORKORDER},"Assign Tech_11":{options:[Fields.ASSIGNED_TO],module:Modules.WORKORDER,isUsersEditable:!0},"Assign Team_11":{options:[Fields.ASSIGNED_GROUP],module:Modules.WORKORDER,isUsersEditable:!0},"Add Comment_11":{options:[Fields.ASSIGNED_TO,Fields.ASSIGNED_BY],module:Modules.WORKORDER},"Technician Resolves Workorder_11":{options:[Fields.ASSIGNED_TO,Fields.ASSIGNED_BY],module:Modules.WORKORDER},"Workorder on hold_11":{options:[Fields.ASSIGNED_BY],module:Modules.WORKORDER},Approval:{options:[Fields.REQUESTED_BY,Fields.REQUESTER],module:Modules.WORKORDER}},handleAddrChange=function(receiverType,userOptionList,isPlaceHolder,isEmail){var _this=this,selectedReceivers=this.templateJson[receiverType]||[];userOptionList=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */.Z)({},userOptionList||{}),isPlaceHolder?{PlaceHolders:[]}:{}),isEmail?{EmailIds:[]}:{});var valuedOptions=Object.values(userOptionList),receiverValuesArr=valuedOptions.reduce((function(prev,arr){var _arr$;return isNaN(null===(_arr$=arr[0])||void 0===_arr$?void 0:_arr$.value)&&prev.push.apply(prev,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((arr||[]).map((function(obj){return obj.value})))),prev}),[]);return selectedReceivers=(selectedReceivers||[]).filter((function(value){return isNaN(value)&&!receiverValuesArr.includes(value)})),selectedReceivers.forEach((function(receiver){var receiverObj={label:receiver,value:receiver};if(isEmail&&src_util_common_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */.Z.validateEmail(receiver))userOptionList.EmailIds.push(receiverObj);else if(isPlaceHolder&&receiver.startsWith("${cs."))userOptionList.PlaceHolders.push(receiverObj);else{var valueIndex=_this.templateJson[receiverType].findIndex((function(value){return value===receiver}));-1!==valueIndex&&_this.templateJson[receiverType].splice(valueIndex,1)}})),userOptionList},quillEditorConfig={toolbar:[["bold","italic","underline","link",{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{size:["small",!1,"large","huge"]},{align:["","right","center","justify"]},{header:[1,2,3,4,5,6,!1]}]]},fetchUsers=function(){var _ref=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(){var search,appIdProp,receiverTypeList,_ref2,appId,userList,defaultIds,params,_yield$API$get,data,error,_data,_this2=this,_args=arguments;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return search=_args.length>0&&void 0!==_args[0]?_args[0]:"",appIdProp=_args.length>1&&void 0!==_args[1]?_args[1]:null,receiverTypeList=_args.length>2&&void 0!==_args[2]?_args[2]:["to"],_ref2=this.templateJson||{},appId=_ref2.application,userList=[],defaultIds=[],params={page:1,perPage:20,inviteAcceptStatus:!0,appId:(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_23__/* .isEmpty */.xb)(appIdProp)?appId:appIdProp,search:(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_23__/* .isEmpty */.xb)(search)?null:search},(receiverTypeList||[]).forEach((function(type){var endList=dlv__WEBPACK_IMPORTED_MODULE_21___default()(_this2.templateJson,type,null);if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_23__/* .isEmpty */.xb)(endList)){var userIds=(endList||[]).filter((function(id){return"number"===typeof id}));defaultIds=[].concat((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(defaultIds),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(userIds))}})),defaultIds=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(new Set(defaultIds)),!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_23__/* .isEmpty */.xb)(defaultIds)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_23__/* .isEmpty */.xb)(search)&&(params.defaultIds=defaultIds,params.perPage=defaultIds.length>20?defaultIds.length:20),_context.next=11,_facilio_api__WEBPACK_IMPORTED_MODULE_22__/* .API */.bl.get("/setup/newUserList",params);case 11:return _yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(userList=data=((null===(_data=data)||void 0===_data?void 0:_data.users)||[]).map((function(user){return{value:user.id,label:user.name+" ("+user.email+")"}}))),_context.abrupt("return",{data:userList,error:error});case 16:case"end":return _context.stop()}}),_callee,this)})));return function(){return _ref.apply(this,arguments)}}(),addModuleParam=function(templateJson,moduleName){var workflowParameters=dlv__WEBPACK_IMPORTED_MODULE_21___default()(templateJson,"workflow.parameters"),ftl=templateJson.ftl,isModuleInWorkflow=ftl&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_23__/* .isEmpty */.xb)(workflowParameters)&&workflowParameters.some((function(param){return param.name===moduleName}));isModuleInWorkflow||templateJson.workflow.parameters.push({name:moduleName,typeString:"String"})};
/* harmony import */},
/***/76495:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */DJ:function(){/* binding */return dataTypes},
/* harmony export */GG:function(){/* binding */return lookupType},
/* harmony export */K5:function(){/* binding */return colorPalette}
/* harmony export */});var dataTypes={BOOLEAN:4,DATE:5,DATE_TIME:6,LOOKUP:7,ENUM:8,SYSTEM_ENUM:12},lookupType={BASE_ENTITY:1,PICK_LIST:2},colorPalette=["#c75c77","#379970","#411793","#3f7984","#84b5c9","#4e74a8","#936eda","#fe46a1","#e57373","#f06292","#ba68c8","#9575cd","#7886cb","#64b5f6","#50c2f7","#4ed0e1","#4db6ac","#81c784","#aed680","#ffb64e","#a1887f"]},
/***/12637:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Hb:function(){/* binding */return deserializeApprover},
/* harmony export */c_:function(){/* binding */return serializeApprover},
/* harmony export */p9:function(){/* binding */return getApproverOptions},
/* harmony export */xy:function(){/* binding */return approverTypes}
/* harmony export */});
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(150124),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(482482),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(548534),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_12__=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(186466),__webpack_require__(990260)),dlv__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(226905),dlv__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(dlv__WEBPACK_IMPORTED_MODULE_10__),_facilio_api__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(32284),approverType={USER:1,ROLE:2,TEAM:3,FIELD:4,TENANT:6,VENDOR:7},approverTypes=[{id:approverType.USER,name:"User"},{id:approverType.ROLE,name:"Role"},{id:approverType.TEAM,name:"Team"},{id:approverType.FIELD,name:"Field"},{id:approverType.TENANT,name:"Tenant"},{id:approverType.VENDOR,name:"Vendor"}];
/* harmony import */function getSupportedFields(_x){return _getSupportedFields.apply(this,arguments)}function _getSupportedFields(){return _getSupportedFields=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee(fields){var peopleModuleId,_yield$API$get,data,error,_data$meta,_data$meta2,_data$meta2$module,module;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return peopleModuleId=null,_context.next=3,_facilio_api__WEBPACK_IMPORTED_MODULE_11__/* .API */.bl.get("/module/meta",{moduleName:"people"});case 3:return _yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_data$meta=data.meta,_data$meta2=void 0===_data$meta?{}:_data$meta,_data$meta2$module=_data$meta2.module,module=void 0===_data$meta2$module?{}:_data$meta2$module,module&&(peopleModuleId=module["moduleId"])),_context.abrupt("return",fields.filter((function(field){var isPeopleField=!1;if(peopleModuleId){var extendedModuleIds=dlv__WEBPACK_IMPORTED_MODULE_10___default()(field,"lookupModule.extendedModuleIds",[]),moduleId=dlv__WEBPACK_IMPORTED_MODULE_10___default()(field,"lookupModule.moduleId",null);isPeopleField=peopleModuleId===moduleId||extendedModuleIds.some((function(id){return id===peopleModuleId}))}var isUserField="users"===dlv__WEBPACK_IMPORTED_MODULE_10___default()(field,"lookupModule.name","");return[7,13].includes(field.dataType)&&(isUserField||isPeopleField)})));case 8:case"end":return _context.stop()}}),_callee)}))),_getSupportedFields.apply(this,arguments)}function getTenantFields(fields){return fields.filter((function(field){return 7===field.dataType&&"tenant"===dlv__WEBPACK_IMPORTED_MODULE_10___default()(field,"lookupModule.name","")}))}function getVendorFields(fields){return fields.filter((function(field){return 7===field.dataType&&"vendors"===dlv__WEBPACK_IMPORTED_MODULE_10___default()(field,"lookupModule.name","")}))}function getApproverOptions(_x2){return _getApproverOptions.apply(this,arguments)}function _getApproverOptions(){return _getApproverOptions=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)((0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().mark((function _callee2(options){var supportedTypes,types,supportedFields,_args2=arguments;return(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return supportedTypes=_args2.length>1&&void 0!==_args2[1]?_args2[1]:null,types=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_12__/* .isEmpty */.xb)(supportedTypes)?Object.values(approverType):supportedTypes,_context2.next=4,getSupportedFields(options.fields);case 4:return supportedFields=_context2.sent,_context2.abrupt("return",types.reduce((function(res,type){return type===approverType.USER?res[type]=options.users:type===approverType.ROLE?res[type]=options.roles:type===approverType.TEAM?res[type]=options.teams:type===approverType.VENDOR?res[type]=getVendorFields(options.fields):type===approverType.TENANT?res[type]=getTenantFields(options.fields):type===approverType.FIELD&&(res[type]=supportedFields),res}),{}));case 6:case"end":return _context2.stop()}}),_callee2)}))),_getApproverOptions.apply(this,arguments)}function deserializeApprover(approver){var type=approver.type,roleId=approver.roleId,userId=approver.userId,fieldId=approver.fieldId,groupId=approver.groupId,approverObj={type:null,approverId:null};return approverObj.type=type,type===approverType.USER?userId>0?approverObj.approverId=userId:fieldId>0&&(approverObj.approverId="requester"):type===approverType.ROLE?approverObj.approverId=roleId:type===approverType.TEAM?approverObj.approverId=groupId:[approverType.FIELD,approverType.TENANT,approverType.VENDOR].includes(type)&&(approverObj.approverId=fieldId),approverObj}function serializeApprover(approver,_ref){var _ref2,_ref$fields=_ref.fields,fields=void 0===_ref$fields?[]:_ref$fields,approverKeys={1:"userId",2:"roleId",3:"groupId",4:"fieldId",6:"fieldId",7:"fieldId"};return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_12__/* .isEmpty */.xb)(approver.type)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_12__/* .isEmpty */.xb)(approver.approverId)?null:"requester"===approver.approverId?(approver.approverId=(fields.find((function(f){return"requester"===f.name}))||{}).id,{fieldId:approver.approverId,type:approver.type,actions:approver.actions}):(_ref2={},(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(_ref2,approverKeys[approver.type],approver.approverId),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(_ref2,"type",approver.type),(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(_ref2,"actions",approver.actions),_ref2)}
/***/},
/***/852452:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */C:function(){/* binding */return calendarSupportModules},
/* harmony export */X:function(){/* binding */return moduleByLocalId}
/* harmony export */});var calendarSupportModules=["workorder","asset","newreadingalarm","bmsalarm","serviceRequest","inspectionTemplate","inspectionResponse","alarm","custom"],moduleByLocalId=["workorder","inspectionResponse","purchaseorder","purchaserequest","facility","facilitybooking"]},
/***/405759:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */E:function(){/* binding */return findRouterForModuleInApp},
/* harmony export */P:function(){/* binding */return moduleRouteHash}
/* harmony export */});
/* harmony import */__webpack_require__(634338);
/* harmony import */var moduleRouteHash={workorder:{LIST:{name:"workorderhomev1"},VIEW_MANAGER:{name:"workorder-viewmanager"},VIEW_CREATION:{name:"workorder-view-creation-form"},OVERVIEW:function(id,viewname){return{name:"wosummarynew",params:{id:id,viewname:viewname}}}},jobplan:{LIST:{name:"jobPlanList"},VIEW_MANAGER:{name:"workorder-viewmanager"},VIEW_CREATION:{name:"workorder-view-creation-form"}},asset:{LIST:{name:"assethomev1"},VIEW_MANAGER:{name:"assets-viewmanager"},VIEW_CREATION:{name:"assets-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/at/assets/".concat(viewname,"/").concat(id,"/overview")}}},failureclass:{LIST:{name:"failure-class-list"},VIEW_MANAGER:{name:"assets-viewmanager"},VIEW_CREATION:{name:"assets-view-creation-form"}},contact:{LIST:{name:"contactlist"},VIEW_MANAGER:{name:"contacts-viewmanager"},VIEW_CREATION:{name:"contacts-view-creation-form"}},purchaserequest:{LIST:{name:"purchaserequest"},VIEW_MANAGER:{name:"purchase-viewmanager"},VIEW_CREATION:{name:"purchase-view-creation-form"}},purchaseorder:{LIST:{name:"purchaseorder"},VIEW_MANAGER:{name:"purchase-viewmanager"},VIEW_CREATION:{name:"purchase-view-creation-form"},OVERVIEW:function(id,viewname){return{name:"poSummary",params:{id:id,viewname:viewname}}}},receivable:{LIST:{name:"receivable"},VIEW_MANAGER:{name:"purchase-viewmanager"},VIEW_CREATION:{name:"purchase-view-creation-form"}},termsandconditions:{LIST:{name:"tandclist"},VIEW_MANAGER:{name:"purchase-viewmanager"},VIEW_CREATION:{name:"purchase-view-creation-form"}},vendors:{LIST:{name:"vendorList"},VIEW_MANAGER:{name:"vendor-viewmanager"},VIEW_CREATION:{name:"vendor-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/vendor/vendors/".concat(viewname,"/summary/").concat(id)}}},insurance:{LIST:{name:"insurancesList"},VIEW_MANAGER:{name:"vendor-viewmanager"},VIEW_CREATION:{name:"vendor-view-creation-form"}},employee:{LIST:{name:"employee-v2-list"},VIEW_MANAGER:{name:"people-viewmanager"},VIEW_CREATION:{name:"people-view-creation-form"}},
// department: {
//   LIST: { name: 'departmentList' },
//   VIEW_MANAGER: { name: 'employee-viewmanager' },
//   VIEW_CREATION: { name: 'employee-view-creation-form' },
// },
tenantcontact:{LIST:{name:"tenantcontactlist"},VIEW_MANAGER:{name:"tm-viewmanager"},VIEW_CREATION:{name:"tm-view-creation-form"}},tenant:{LIST:{name:"tenantreports"},VIEW_MANAGER:{name:"tm-viewmanager"},VIEW_CREATION:{name:"tm-view-creation-form"}},tenantunit:{LIST:{name:"tenantunit-list"},VIEW_MANAGER:{name:"tm-viewmanager"},VIEW_CREATION:{name:"tm-view-creation-form"}},quote:{LIST:{name:"quotation-list"},VIEW_MANAGER:{name:"tm-viewmanager"},VIEW_CREATION:{name:"tm-view-creation-form"}},sensorrollupalarm:{LIST:{name:"sensorrollupalarm-list"},VIEW_MANAGER:{name:"sensoralarm-viewmanager"},VIEW_CREATION:{name:"sensoralarm-view-creation-form"}},newreadingalarm:{LIST:{name:"newreadingalarm-list"},VIEW_MANAGER:{name:"sensoralarm-viewmanager"},VIEW_CREATION:{name:"sensoralarm-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/fa/faults/".concat(viewname,"/newsummary/").concat(id)}}},bmsalarm:{LIST:{name:"bmsalarm-list"},VIEW_MANAGER:{name:"sensoralarm-viewmanager"},VIEW_CREATION:{name:"sensoralarm-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/fa/bmsalarms/".concat(viewname,"/summary/").concat(id)}}},newreadingrules:{LIST:{name:"newrules"},VIEW_MANAGER:{name:"sensoralarm-viewmanager"},VIEW_CREATION:{name:"sensoralarm-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/fa/newrules/".concat(viewname,"/").concat(id,"/summary")}}},visitorlog:{LIST:{name:"visits-list"},VIEW_MANAGER:{name:"vi-viewmanager"},VIEW_CREATION:{name:"vi-view-creation-form"}},invitevisitor:{LIST:{name:"invites-list"},VIEW_MANAGER:{name:"vi-viewmanager"},VIEW_CREATION:{name:"vi-view-creation-form"}},groupinvite:{LIST:{name:"group-invites-list"},VIEW_MANAGER:{name:"vi-viewmanager"},VIEW_CREATION:{name:"vi-view-creation-form"}},watchlist:{LIST:{name:"watchlist-list"},VIEW_MANAGER:{name:"vi-viewmanager"},VIEW_CREATION:{name:"vi-view-creation-form"}},serviceRequest:{LIST:{name:"serviceRequestList"},VIEW_MANAGER:{name:"serviceRequest-viewmanager"},VIEW_CREATION:{name:"serviceRequest-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/sr/serviceRequest/".concat(viewname,"/").concat(id,"/overview")}}},contactdirectory:{LIST:{name:"list-contactdir"},VIEW_MANAGER:{name:"serviceRequest-viewmanager"},VIEW_CREATION:{name:"serviceRequest-view-creation-form"}},admindocuments:{LIST:{name:"list-admindocs"},VIEW_MANAGER:{name:"serviceRequest-viewmanager"},VIEW_CREATION:{name:"serviceRequest-view-creation-form"}},safetyPlan:{LIST:{name:"safetyplan"},VIEW_MANAGER:{name:"safetyplan-viewmanager"},VIEW_CREATION:{name:"safetyplan-view-creation-form"}},hazard:{LIST:{name:"hazard"},VIEW_MANAGER:{name:"safetyplan-viewmanager"},VIEW_CREATION:{name:"safetyplan-view-creation-form"}},precaution:{LIST:{name:"precaution"},VIEW_MANAGER:{name:"safetyplan-viewmanager"},VIEW_CREATION:{name:"safetyplan-view-creation-form"}},client:{LIST:{name:"client-list"},VIEW_MANAGER:{name:"cl-viewmanager"},VIEW_CREATION:{name:"cl-view-creation-form"}},purchasecontracts:{LIST:{name:"contractList"},VIEW_MANAGER:{name:"contractlist-viewmanager"},VIEW_CREATION:{name:"contractlist-view-creation-form"}},labourcontracts:{LIST:{name:"contractList"},VIEW_MANAGER:{name:"contractlist-viewmanager"},VIEW_CREATION:{name:"contractlist-view-creation-form"}},rentalleasecontracts:{LIST:{name:"contractList"},VIEW_MANAGER:{name:"contractlist-viewmanager"},VIEW_CREATION:{name:"contractlist-view-creation-form"}},warrantycontracts:{LIST:{name:"contractList"},VIEW_MANAGER:{name:"contractlist-viewmanager"},VIEW_CREATION:{name:"contractlist-view-creation-form"}},announcement:{LIST:{name:"announcementsList"},VIEW_MANAGER:{name:"announcements-viewmanager"},VIEW_CREATION:{name:"announcements-view-creation-form"}},newsandinformation:{LIST:{name:"newsList"},VIEW_MANAGER:{name:"announcements-viewmanager"},VIEW_CREATION:{name:"announcements-view-creation-form"}},budget:{LIST:{name:"budgetList"},VIEW_MANAGER:{name:"budget-viewmanager"},VIEW_CREATION:{name:"budget-view-creation-form"}},chartofaccount:{LIST:{name:"coaList"},VIEW_MANAGER:{name:"budget-viewmanager"},VIEW_CREATION:{name:"budget-view-creation-form"}},accounttype:{LIST:{name:"accountTypeList"},VIEW_MANAGER:{name:"budget-viewmanager"},VIEW_CREATION:{name:"budget-view-creation-form"}},facilitybooking:{LIST:{name:"bookingList"},VIEW_MANAGER:{name:"booking-viewmanager"},VIEW_CREATION:{name:"booking-view-creation-form"}},facility:{LIST:{name:"facilityList"},VIEW_MANAGER:{name:"booking-viewmanager"},VIEW_CREATION:{name:"booking-view-creation-form"}},amenity:{LIST:{name:"amenityList"},VIEW_MANAGER:{name:"booking-viewmanager"},VIEW_CREATION:{name:"booking-view-creation-form"}},storeRoom:{LIST:{name:"storerooms"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},transferrequest:{LIST:{name:"transferrequestList"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},transferrequestshipment:{LIST:{name:"trShipmentList"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},item:{LIST:{name:"item"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},itemTypes:{LIST:{name:"itemtypes"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},gatepass:{LIST:{name:"gatepass"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},service:{LIST:{name:"service"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},tool:{LIST:{name:"tool"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},toolTypes:{LIST:{name:"tooltypes"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},inventoryrequest:{LIST:{name:"inventoryrequest"},VIEW_MANAGER:{name:"inventory-viewmanager"},VIEW_CREATION:{name:"inventory-view-creation-form"}},inspectionTemplate:{LIST:{name:"inspectionTemplateList"},VIEW_MANAGER:{name:"inspection-viewmanager"},VIEW_CREATION:{name:"inspection-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/inspection/template/".concat(viewname,"/summary/").concat(id)}}},inspectionResponse:{LIST:{name:"individualInspectionList"},VIEW_MANAGER:{name:"inspection-viewmanager"},VIEW_CREATION:{name:"inspection-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/inspection/individual/".concat(viewname,"/summary/").concat(id)}}},deliveries:{LIST:{name:"deliveriesList"},VIEW_MANAGER:{name:"deliveries-viewmanager"},VIEW_CREATION:{name:"deliveries-view-creation-form"}},deliveryArea:{LIST:{name:"deliveryAreaList"},VIEW_MANAGER:{name:"deliveries-viewmanager"},VIEW_CREATION:{name:"deliveries-view-creation-form"}},lockers:{LIST:{name:"lockersList"},VIEW_MANAGER:{name:"lockers-viewmanager"},VIEW_CREATION:{name:"lockers-view-creation-form"}},parkingstall:{LIST:{name:"parkingstallList"},VIEW_MANAGER:{name:"parkingstall-viewmanager"},VIEW_CREATION:{name:"parkingstall-view-creation-form"}},moves:{LIST:{name:"movesList"},VIEW_MANAGER:{name:"moves-viewmanager"},VIEW_CREATION:{name:"moves-view-creation-form"}},desks:{LIST:{name:"desksList"},VIEW_MANAGER:{name:"desks-viewmanager"},VIEW_CREATION:{name:"desks-view-creation-form"}},inductionTemplate:{LIST:{name:"inductionTemplateList"},VIEW_MANAGER:{name:"induction-viewmanager"},VIEW_CREATION:{name:"induction-view-creation-form"}},inductionResponse:{LIST:{name:"individualInductionList"},VIEW_MANAGER:{name:"induction-viewmanager"},VIEW_CREATION:{name:"induction-view-creation-form"}},surveyTemplate:{LIST:{name:"surveyTemplateList"},VIEW_MANAGER:{name:"survey-viewmanager"},VIEW_CREATION:{name:"survey-view-creation-form"}},surveyResponse:{LIST:{name:"individualSurveyList"},VIEW_MANAGER:{name:"survey-viewmanager"},VIEW_CREATION:{name:"survey-view-creation-form"}},preventivemaintenance:{LIST:{name:"pm-planned-list"},VIEW_MANAGER:{name:"workorder-viewmanager"},VIEW_CREATION:{name:"workorder-view-creation-form"}},controlGroupv2:{LIST:{name:"group-list"},VIEW_MANAGER:{name:"controls-viewmanager"},VIEW_CREATION:{name:"controls-view-creation-form"}},audience:{LIST:{name:"audienceList"},VIEW_MANAGER:{name:"announcements-viewmanager"},VIEW_CREATION:{name:"announcements-view-creation-form"}},neighbourhood:{LIST:{name:"neighbourhoodList"},VIEW_MANAGER:{name:"announcements-viewmanager"},VIEW_CREATION:{name:"announcements-view-creation-form"}},dealsandoffers:{LIST:{name:"dealsandoffersList"},VIEW_MANAGER:{name:"announcements-viewmanager"},VIEW_CREATION:{name:"announcements-view-creation-form"}},shift:{LIST:{name:"shift-v2-list"},VIEW_MANAGER:{name:"shift-viewmanager"},VIEW_CREATION:{name:"shift-view-creation-form"}},break:{LIST:{name:"break-v2-list"},VIEW_MANAGER:{name:"break-viewmanager"},VIEW_CREATION:{name:"break-view-creation-form"}},DEFAULT:{LIST:{name:"custommodules-list"},VIEW_MANAGER:{name:"custommodules-viewmanager"},VIEW_CREATION:{name:"custommodules-view-creation-form"}},workpermit:{LIST:{name:"workPermitList"},VIEW_MANAGER:{name:"workorder-viewmanager"},VIEW_CREATION:{name:"workorder-view-creation-form"}},alarm:{OVERVIEW:function(id,viewname){return{path:"/app/fa/faults/".concat(viewname,"/newsummary/").concat(id)}}},ticket:{OVERVIEW:function(id,viewname){return{name:"wosummarynew",params:{id:id,viewname:viewname}}}},energymeter:{LIST:{name:"energyHome"},VIEW_MANAGER:{name:"energymeter-viewmanager"},VIEW_CREATION:{name:"energymeter-view-creation-form"},OVERVIEW:function(id,viewname){return{path:"/app/en/energymeter/".concat(viewname,"/").concat(id,"/overview")}}},plannedmaintenance:{LIST:{name:"pm-list"},VIEW_MANAGER:{name:"pm-viewmanager"},VIEW_CREATION:{name:"pm-view-creation-form"}},custom:{LIST:{name:"custommodules-list"},VIEW_MANAGER:{name:"custommodules-viewmanager"},VIEW_CREATION:{name:"custommodules-view-creation-form"},OVERVIEW:function(id,viewname,moduleName){return{name:"custommodules-summary",params:{moduleName:moduleName,viewname:viewname,id:id}}}}};function findRouterForModuleInApp(moduleName,type){var moduleRouteObj=moduleRouteHash[moduleName]||moduleRouteHash.DEFAULT,currentRoute=moduleRouteObj[type]||{};return currentRoute||null}
/***/},
/***/167021:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(103336),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(488478),_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(566347),moment_timezone__WEBPACK_IMPORTED_MODULE_39__=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(186466),__webpack_require__(843843),__webpack_require__(897389),__webpack_require__(879288),__webpack_require__(76265),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(865137),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(538077),__webpack_require__(241830),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(689730),__webpack_require__(212826),__webpack_require__(228436),__webpack_require__(902918),__webpack_require__(339772),__webpack_require__(795765),__webpack_require__(506203),__webpack_require__(162506),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(322462),__webpack_require__(75239),__webpack_require__(480008)),moment_timezone__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_39__),vue__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(720144),util_deepmerge__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(708634),_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(460895),d3__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(348727),src_newcharts_model_newDateModel__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(138810),src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(415402),charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(676240),third_party_ckmeans_min_js__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(196009),billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(192098),billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49___default=__webpack_require__.n(billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49__),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(990260),chroma_js__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(428670);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={prepare:function(chartContext){var params={};if(params.padding=chartContext.options.customPadding?chartContext.options.customPadding:chartContext.options.padding,params.size=chartContext.options.size,this.prepareGeneralOptions(chartContext,params),params.data=this.prepareData(chartContext),params.axis=this.prepareAxis(chartContext),params.tooltip=this.prepareTooltip(chartContext),chartContext.options.regionConfig&&(params.regions=this.prepareRegionData(chartContext)),chartContext.options.point&&(params.point=chartContext.options.point),chartContext.options.axes&&(params.data.axes=chartContext.options.axes),chartContext.options.chartType&&(params.data.type=chartContext.options.chartType),"scatter"===params.data.type&&!0!==chartContext.options.combo&&(params.point={show:!0,pattern:chartContext.Readingdp||chartContext.scatterConfig?params.point.pattern:[]}),chartContext.options.fixedAxis&&Object.keys(chartContext.options.fixedAxis).forEach((function(rt){params.axis[rt].label&&(params.axis[rt].label.text=chartContext.options.fixedAxis[rt].label),params.axis[rt].min&&params.axis[rt].min>=0&&(params.axis[rt].min=chartContext.options.fixedAxis[rt].min),params.axis[rt].max&&(params.axis[rt].max=chartContext.options.fixedAxis[rt].max)})),this.applyDefaultOptions(chartContext,params),chartContext.options.disbaleNiceTickMarks||chartContext.options.isGroupedByTime||(!0!==chartContext.options.general.normalizeStack||"stackedbar"!==chartContext.options.type)&&this.applyNiceTickMarks(params,chartContext),chartContext.options.hasOwnProperty("zoom")&&(params.zoom=chartContext.options.zoom),chartContext.options.hasOwnProperty("isDepreciationCostTrend")&&params.data.json["Current Price"]){var unitMap={},yData=params.data.json["Current Price"].map((function(d){return d})),depData=params.data.json["Depreciated Amount"].map((function(d){return d})),firstCost=yData.find((function(val){return null!==val})),OBVIndex=yData.indexOf(firstCost),OBV=[];if(firstCost)for(var idx in yData)yData[idx]===firstCost&&parseInt(idx)===OBVIndex?(yData[idx]=0,depData[idx]=null,OBV.push(firstCost)):OBV.push(null);else OBV=yData.map((function(){return null}));unitMap["OBV"]=chartContext.unitMap["Current Price"];var newParams={data:{json:{"Current Price":yData,"Depreciated Amount":depData,OBV:OBV},colors:{OBV:"#ec6363"},names:{OBV:"Opening Book Value"},groups:[["Opening Book Value","Current Price","Depreciated Amount"]],axes:{"Depreciated Amount":params.data.axes["Current Price"],OBV:params.data.axes["Current Price"]},order:"asc",labels:{format:{"Depreciated Amount":function(x){return[0,null].includes(x)?"":x},OBV:function(x){return[0,null].includes(x)?"":x}}}},bar:{width:{ratio:.75}}};return chartContext.unitMap=util_deepmerge__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */.Z.objectAssignDeep({},chartContext.unitMap,unitMap),util_deepmerge__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */.Z.objectAssignDeep({},params,newParams)}if(chartContext.scatterConfig&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__/* .isEmpty */.xb)(params.data.types)){var types=Object.values(params.data.types);types.includes("bubble")&&(params["plugins"]=[new(billboard_js_dist_plugin_billboardjs_plugin_bubblecompare_js__WEBPACK_IMPORTED_MODULE_49___default())({minR:10,maxR:50,expandScale:1})])}if("bar"===chartContext.options.type&&chartContext.options.bar.showGroupTotal){var groupTotalData=this.getGroupTotalDataPoint(params,null);groupTotalData&&(params.data.json.group_total=groupTotalData,params.data.colors.group_total="rgba(126,127,127,0.2)",params.data.labels=!1)}if(chartContext.baselineData){var json=this.prepareBaselineData(chartContext);params.data.json=this.extendObject(params.data.json,json);var names=this.getNamesForBaseline(chartContext);params.data.names=this.extendObject(params.data.names,names);var axes=this.getXYMapForBaseline(chartContext);params.data.axes=this.extendObject(params.data.axes,axes);var xs=this.getXsMapForBaseline(chartContext);params.data.xs=this.extendObject(params.data.xs,xs);var _types=this.getTypesForBaseline(chartContext);params.data.types=this.extendObject(params.data.types,_types);var colors=this.getColorsForBaseline(chartContext);params.data.colors=this.extendObject(params.data.colors,colors),params.line.point=[]}return params},extendObject:function(originalObj,data){for(var i in data)originalObj[i]=data[i];return originalObj},linearInterpolationForBaseLine:function(arr1,arr2,resolution){for(var lerp=function(x,y,a){return x*(1-a)+y*a},xaxis=[],yaxis=[],i=0;i<arr1.length;i++){var diff=arr1[i]-arr1[i+1],inbetweenCount=void 0;inbetweenCount=diff<0?parseInt(-1*diff/resolution):parseInt(diff/resolution);for(var j=0;j<=inbetweenCount;j++){
// let x = arr1[i] + j * resolution
// console.log('x value -> ', x)
// let y = interpolate(arr1[i], arr2[i], arr1[i + 1], arr2[i + 1], x)
var percent=j/inbetweenCount,x=lerp(arr1[i],arr1[i+1],percent),y=lerp(arr2[i],arr2[i+1],percent);xaxis.push(x.toFixed(2)),yaxis.push(y.toFixed(2))}}return[xaxis,yaxis]},prepareBaselineData:function(chartContext){var _this=this,graphPoints=chartContext.baselineData,result=[],tempX=[],tempY=[],count=0,alphabet="abcdefghijklmnopqrstuvwxyz".split("");return graphPoints.forEach((function(op){JSON.parse(op.graphValue).forEach((function(td){""!==td.x&&""!==td.y&&(tempX.push(parseFloat(td.x)),tempY.push(parseFloat(td.y)))}));var interploteResult=_this.linearInterpolationForBaseLine(tempX,tempY,.02);result[alphabet[count]]=interploteResult[1],result[alphabet[count+1]]=interploteResult[0],tempX=[],tempY=[],count+=2})),result},getNamesForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<selectedGraphPoints.length;i+=1)result[alphabet[count]]=selectedGraphPoints[i].label,result[alphabet[count+1]]=selectedGraphPoints[i].label,count+=2;return result},getXYMapForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,val=selectedGraphPoints.length,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},i=0;i<val;i+=1)result[alphabet[i]]="y",result[alphabet[i+1]]="x";return result},getColorsForBaseline:function(chartContext){for(var colors=chartContext.baselineColors,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<chartContext.baselineData.length;i+=1)result[alphabet[count]]=colors[i],result[alphabet[count+1]]=colors[i],count+=2;return result},getTypesForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,val=selectedGraphPoints.length,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<val;i+=1)result[alphabet[count]]="line",result[alphabet[count+1]]="line",count+=2;return result},getXsMapForBaseline:function(chartContext){for(var selectedGraphPoints=chartContext.baselineData,val=selectedGraphPoints.length,alphabet="abcdefghijklmnopqrstuvwxyz".split(""),result={},count=0,i=0;i<val;i+=1)result[alphabet[count]]=alphabet[count+1],count+=2;return result},getGroupTotalDataPoint:function(c3Params,hiddenTargetIds){for(var groupedBarPoints=[],_i=0,_Object$keys=Object.keys(c3Params.data.json);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];c3Params.data.groups.indexOf(key)<0&&"x"!==key&&("bar"!==c3Params.data.type&&"bar"!==c3Params.data.types[key]||groupedBarPoints.push(key))}if(groupedBarPoints.length>1){for(var groupTotalData=[],i=0;i<c3Params.data.json.x.length;i++){var _step,sum=0,_iterator=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(groupedBarPoints);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _key=_step.value;(!hiddenTargetIds||hiddenTargetIds.indexOf(_key)<0)&&"group_total"!==_key&&(sum+=parseFloat(c3Params.data.json[_key][i]?c3Params.data.json[_key][i]:0))}}catch(err){_iterator.e(err)}finally{_iterator.f()}groupTotalData.push(sum)}return groupTotalData}return null},rerenderInterSecions:function(chart){if(chart.hasOwnProperty("clipId")){var id="intersections-container-"+chart.clipId;document.getElementById(id)&&document.getElementById(id).remove()}else document.getElementById("intersections-container")&&document.getElementById("intersections-container").remove()},drawIntersections:function(chart,chartContext){if(chartContext.options.intersections){this.rerenderInterSecions(chart,chartContext),chart.hasOwnProperty("clipId")?chart.intersectionContainer=chart.svg.select("g").select(".bb-chart").append("g").attr("class","intersections-container").attr("id","intersections-container-"+chart.clipId):chart.intersectionContainer=chart.svg.select("g").select(".bb-chart").append("g").attr("class","intersections-container").attr("id","intersections-container");for(var i=0;i<chartContext.options.intersections.length;i++)chart.hiddenTargetIds.length||this.drawPaths(chart,chartContext,chartContext.options.intersections[i],i)}},scaleTime:function(chart){return d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain(chart.orgXDomain).range(chart.xAxis.config.range)},prepareSpecificRangeOfChartData:function(chart,chartContext,params){if(!(chartContext&&chart&&params&&params.regions))return{minDomain:new Date(chart.orgXDomain[0]),maxDomain:new Date(chart.orgXDomain[1]),xMin:chart.xMin,xMax:chart.xMax,data:chartContext.data};if(params.regions.length){var timeScale=this.scaleTime(chart),d=params.regions[0];return{minDomain:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat),maxDomain:new Date(chart.orgXDomain[1]),xMin:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),xMax:chart.xMax,data:chartContext.data}}},drawPaths:function(chart,chartContext,config,index){if(chart){var pathArea=chart.intersectionContainer.append("g").attr("class","intersections-"+index),yAxis=chart.yAxis.config.valueOf().tickValues,yMin=0,yMax=0;yAxis&&yAxis.length&&(yMin=yAxis[0],yMax=yAxis[yAxis.length-1]);var xdata={};xdata=this.prepareSpecificRangeOfChartData(chart,chartContext);var xDomain=chart.xAxis.params.orgXScale.domain()?chart.xAxis.params.orgXScale.domain():[new Date(chart.orgXDomain[0]),new Date(chart.orgXDomain[1])],x=d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain(xDomain).range(chart.xAxis.config.range),y=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().range(chart.yAxis.config.range.reverse()).domain([yMin,yMax]),points=[];points=this.regionAreaPoints(xdata.data,config.from,config.to,chartContext.options.xFormat);var area=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y1((function(d){return y(d.high)})).defined((function(d){if(null!==d.low&&null!==d.high)return d})),area1=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y0((function(d){return y(d.low)})).defined((function(d){return d}));pathArea.datum(points),pathArea.append("defs").append("pattern").attr("id","diagonalHatchnew").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#dadada").attr("stroke-width",1),pathArea.append("clipPath").attr("id",config.context.id+"clip-below").append("path").attr("d",area.y0(chart.yAxis.config.range[1])),pathArea.append("clipPath").attr("id",config.context.id+"clip-above").append("path").attr("d",area.y0(chart.yAxis.config.range[0])),pathArea.append("path").attr("class","area above").attr("clip-path","url(#"+config.context.id+"clip-above)").attr("d",area.y0((function(d){return y(d["low"])}))).style("opacity",1).style("stroke","none").style("fill","none"),pathArea.append("path").attr("class","area below").attr("clip-path","url(#"+config.context.id+"clip-below)").attr("d",area1.y1((function(d){return y(d["high"])}))).style("opacity",1).style("stroke","none").style("fill","#f36886")}},renderDiffPath:function(chart,chartContext,params,config){if(chart){chart.svg.select("g").select(".bb-chart").select(config.context.class).remove();var pathArea=chart.svg.select("g").select(".bb-chart").append("g").attr("class",config.context.class),yAxis=chart.yAxis.config.valueOf().tickValues,yMin=0,yMax=0;yAxis&&yAxis.length&&(yMin=yAxis[0],yMax=yAxis[yAxis.length-1]);var xdata={};xdata=this.prepareSpecificRangeOfChartData(chart,chartContext,params);var x=d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain([new Date(chart.orgXDomain[0]),new Date(chart.orgXDomain[1])]).range(chart.xAxis.config.range),y=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().range(chart.yAxis.config.range.reverse()).domain([yMin,yMax]),points=[];points=params.regions?this.regionAreaPoints(xdata.data,config.from,config.to,chartContext.options.xFormat,params.regions[0]):this.regionAreaPoints(xdata.data,config.from,config.to,chartContext.options.xFormat);var area=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y1((function(d){return y(d.high)})).defined((function(d){if(null!==d.low&&null!==d.high)return d})),area1=d3__WEBPACK_IMPORTED_MODULE_42__.area().x((function(d){return x(d.x)})).y0((function(d){return y(d.low)})).defined((function(d){return d}));pathArea.datum(points),pathArea.append("defs").append("pattern").attr("id","diagonalHatch").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#dadada").attr("stroke-width",1),pathArea.append("clipPath").attr("id",config.context.id+"clip-below").append("path").attr("d",area.y0(chart.yAxis.config.range[1])),pathArea.append("clipPath").attr("id",config.context.id+"clip-above").append("path").attr("d",area.y0(chart.yAxis.config.range[0])),config.to&&config.to.color&&!config.to.disable&&pathArea.append("path").attr("class","area above").attr("clip-path","url(#"+config.context.id+"clip-above)").attr("d",area.y0((function(d){return y(d["low"])}))).style("opacity",.2).style("stroke","none").style("fill",config.to.color),config.to.disable||pathArea.append("path").attr("class","area above").attr("clip-path","url(#"+config.context.id+"clip-above)").attr("d",area.y0((function(d){return y(d["low"])}))).style("opacity",.2).style("stroke","none").style("fill","url(#diagonalHatch)"),config.from&&config.from.color&&!config.from.disable&&pathArea.append("path").attr("class","area below").attr("clip-path","url(#"+config.context.id+"clip-below)").attr("d",area1.y1((function(d){return y(d["high"])}))).style("opacity",.2).style("stroke","none").style("fill",config.from.color),config.from.disable||pathArea.append("path").attr("class","area below").attr("clip-path","url(#"+config.context.id+"clip-below)").attr("d",area1.y1((function(d){return y(d["high"])}))).style("opacity",.2).style("stroke","none").style("fill","url(#diagonalHatch)")}},regionAreaPoints:function(points,from,to,format,region){var data=[];return region?points.x.forEach((function(d,index){moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(region.reportingPeriodStartTime,format)<=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d,format)&&data.push({x:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d,format),high:points[from.point][index]?Number(points[from.point][index]):null,low:points[to.point][index]?Number(points[to.point][index]):null})})):points.x.forEach((function(d,index){data.push({x:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d,format),high:points[from.point][index]?Number(points[from.point][index]):null,low:points[to.point][index]?Number(points[to.point][index]):null})})),data},prepareRegionData:function(chartContext){var data={};data=chartContext.options.regionConfig;var endOfMomentDay=Number(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).endOf("month").format("DD")),endOfDay=Number(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).format("DD"));return data["start"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.start).format(chartContext.options.xFormat),endOfMomentDay===endOfDay&&"MM-YYYY"===chartContext.options.xFormat?data["end"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).add(1,"day").format(chartContext.options.xFormat):data["end"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.end).format(chartContext.options.xFormat),data["reportingPeriodStartTime"]=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(data.reportingPeriodStartTime).format(chartContext.options.xFormat),[data]},prepareColorTile:function(chartContext,params){return{pattern:[params.data.colors["F"]],tiles:function(){var pattern=d3__WEBPACK_IMPORTED_MODULE_42__.select(document.createElementNS(d3__WEBPACK_IMPORTED_MODULE_42__.namespaces.svg,"pattern")).attr("patternUnits","userSpaceOnUse").attr("width","6").attr("height","6"),g=pattern.append("g").attr("fill-rule","evenodd").attr("stroke-width",1).append("g").attr("fill","rgb(255, 127, 14)");g.append("polygon").attr("points","5 0 6 0 0 6 0 5"),g.append("polygon").attr("points","6 5 6 6 5 6");var gradient=d3__WEBPACK_IMPORTED_MODULE_42__.select(document.createElementNS(d3__WEBPACK_IMPORTED_MODULE_42__.namespaces.svg,"linearGradient")).attr("patternUnits","userSpaceOnUse").attr("x2","0").attr("y2","80%");
// Should return an array of SVGPatternElement
return gradient.append("stop").attr("offset","49%").attr("stop-color","blue"),gradient.append("stop").attr("offset","50%").attr("stop-color","grey"),gradient.append("stop").attr("offset","51%").attr("stop-color","red"),[pattern.node(),gradient.node()]}}},prepareMobile:function(c3Params){var _c3Params$axis,source=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$source?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$source:"";return"analytics"===source?(c3Params.padding.left=45,c3Params.padding.right=15,c3Params.padding.bottom=-20):"dashboard"===source?c3Params.axis&&c3Params.axis.y2&&c3Params.axis.y2.show?(c3Params.padding.left=45,c3Params.padding.right=45,c3Params.padding.bottom="donut"===c3Params.data.type||"pie"===c3Params.data.type?20:-20):(c3Params.padding.left=45,c3Params.padding.right=15,c3Params.padding.bottom="donut"===c3Params.data.type||"pie"===c3Params.data.type?20:-20,c3Params.axis.x&&c3Params.axis.x.tick&&"category"===c3Params.axis.x.type&&(c3Params.axis.x.tick.multiline=!1,c3Params.axis.x.tick.rotate=20,c3Params.axis.x.tick.tooltip=!1,c3Params.padding.bottom+=20)):null!==c3Params&&void 0!==c3Params&&null!==(_c3Params$axis=c3Params.axis)&&void 0!==_c3Params$axis&&_c3Params$axis.rotated?(c3Params.padding.left=100,c3Params.padding.right=100,c3Params.padding.top=45,c3Params.padding.bottom=-20):(c3Params.padding.left=45,c3Params.padding.right=15,c3Params.padding.bottom="donut"===c3Params.data.type||"pie"===c3Params.data.type?20:-20),c3Params.zoom.enabled=!1,c3Params.mobile=!0,c3Params},prepareBooleanAlarmChart:function(chartContext,x,alarms){var params={padding:{top:20,left:30,right:30,bottom:0}},dummyData=[];if(x&&x.length)for(var i=0;i<x.length;i++)dummyData.push(1);params.data={json:{x:alarms.data.x,alarms:alarms.data.alarms},xFormat:"%m-%d-%Y %H:%M",x:"x"},params.size={height:50},alarms.barSize&&"mini"===alarms.barSize&&(params.size.height=40),alarms.barSize&&"small"===alarms.barSize&&(params.size.height=50),alarms.barSize&&"medium"===alarms.barSize&&(params.size.height=57),params.size.height+=70,params.grid={x:{show:!1},y:{show:!1}},params.axis=this.prepareAxis(chartContext),params.axis.x.tick.values=null,params.axis.x.min=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.axis.x.max=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.tooltip={show:!1,contents:function(d){if(alarms.regions[d[0].value]){var _step2,alarmList=alarms.regions[d[0].value].alarms,tooltipData=[],_iterator2=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarmList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var alarm=_step2.value;tooltipData.push({label:"Alarm",value:alarm.subject})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var tooltipConfig={className:"bb-chart-tooltip",data:tooltipData,mode:1};return _graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)}return null}},params.axis.x.show=!0,params.axis.y.show=!1,params.axis.y.tick.format=null,params.axis.x.tick.outer=!1,params.axis.y2.show=!1,params.legend={show:!1};var _step3,regions=[],alarmSeverityValues={},_iterator3=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarms.regions);try{var _loop=function(){var _step6,alarm=_step3.value,severityMap={},isCleared=!1,highSev=null,highSevId=null,_iterator6=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarm.alarms);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var a=_step6.value,sevId=a.severity?a.severity.id:0,severity=sevId?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId,!0):null;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,a.previousSeverity&&(sevId=a.previousSeverity.id,severity=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId,!0))),severity&&(highSev?highSev>severity.cardinality&&(highSev=severity.cardinality,highSevId=sevId):(highSev=severity.cardinality,highSevId=sevId)),severityMap[sevId]||(severityMap[sevId]=0),severityMap[sevId]=severityMap[sevId]+1}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}var maxSeverity=highSevId||Object.keys(severityMap).reduce((function(a,b){return severityMap[a]>severityMap[b]?a:b})),maxSeverityCount=severityMap[maxSeverity];regions.push({start:alarm.start,end:alarm.end,class:"fc-boolean-"+maxSeverity+"_"+maxSeverityCount,alarms:alarm.alarms,isCleared:isCleared,count:alarm.count}),alarmSeverityValues[maxSeverity]||(alarmSeverityValues[maxSeverity]=[]),alarmSeverityValues[maxSeverity].push(maxSeverityCount)};for(_iterator3.s();!(_step3=_iterator3.n()).done;)_loop()}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return params.regions=regions,params.onafterinit=function(){for(var severityId in alarmSeverityValues){var color=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId)?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId,!0).color:"#ff0000",alarmValues=alarmSeverityValues[severityId],distinctAlarmValues=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(new Set(alarmValues));distinctAlarmValues.sort((function(a,b){return b-a}));var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);parentSelector.selectAll(".fc-boolean-0").style("fill",color),parentSelector.selectAll(".fc-boolean-0 rect").style("fill-opacity","0.1");var _step4,_iterator4=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(distinctAlarmValues);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var al=_step4.value;.1;var key="0.8".replace(".","");parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").style("fill",color),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").classed("fc-boolean-rect-"+key,!0),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al).on("mouseover",(function(d){var _step5,tooltipData=[],alarmTooltipData=[],_iterator5=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d.alarms);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var alarm=_step5.value,severity=alarm.severity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.severity.id,!0):null,isCleared=!1;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,severity=alarm.previousSeverity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.previousSeverity.id,!0):null);var message=void 0,subject=void 0;vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.isLicenseEnabled("NEW_ALARMS")?(message=alarm.alarm.description||"",subject=alarm.alarm&&alarm.alarm.subject?alarm.alarm.subject:""):(message=alarm.problem||alarm.readingMessage,subject=alarm.subject||""),alarmTooltipData.push({name:subject,message:message,severity:severity,isCleared:isCleared,count:d.alams&&d.alams.legend?d.alams.length:0})}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("LLL")+" - "+moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("LLL"),subtitle:{start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("hh:mm a"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("hh:mm a")},titleObj:{start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("DD MMM YYYY"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("DD MMM YYYY")},data:tooltipData,alarms:alarms.showTimeOnly?null:alarmTooltipData,count:alarmTooltipData.length?alarmTooltipData[0].count:0,mode:1};_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltip1(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()})).on("click",(function(d){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip(),d.alarms&&d.alarms.length&&chartContext.openAlarm&&chartContext.openAlarm(d.alarms)}))}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}},params},prepareBooleanChart:function(chartContext,x,alarms){var params={};params.padding={top:20,left:chartContext.options.padding.left,right:chartContext.options.padding.right,bottom:0};for(var dummyData=[],i=0;i<x.length;i++)dummyData.push(1);params.data={json:{x:alarms.data.x,alarms:alarms.data.alarms},xFormat:"%m-%d-%Y %H:%M",x:"x"},params.size={height:50},alarms.barSize&&"mini"===alarms.barSize&&(params.size.height=40),alarms.barSize&&"small"===alarms.barSize&&(params.size.height=50),alarms.barSize&&"medium"===alarms.barSize&&(params.size.height=57),params.grid={x:{show:!1},y:{show:!1}},params.axis=this.prepareAxis(chartContext),params.axis.x.tick.values=null,params.axis.x.min=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.axis.x.max=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),params.tooltip={show:!1,contents:function(d){if(alarms.regions[d[0].value]){var _step7,alarmList=alarms.regions[d[0].value].alarms,tooltipData=[],_iterator7=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarmList);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var alarm=_step7.value;tooltipData.push({label:"Alarm",value:alarm.subject})}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}var tooltipConfig={className:"bb-chart-tooltip",data:tooltipData,mode:1};return _graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)}return null}},params.axis.x.show=!1,params.axis.y.show=!1,params.axis.y.tick.format=null,params.axis.y2.show=!1,params.legend={show:!1};var _step8,regions=[],alarmSeverityValues={},_iterator8=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarms.regions);try{var _loop2=function(){var _step11,alarm=_step8.value,severityMap={},isCleared=!1,highSev=null,highSevId=null,_iterator11=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(alarm.alarms);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var a=_step11.value,sevId=a.severity?a.severity.id:0,severity=sevId?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId):null;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,a.previousSeverity&&(sevId=a.previousSeverity.id,severity=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(sevId))),severity&&(highSev?highSev>severity.cardinality&&(highSev=severity.cardinality,highSevId=sevId):(highSev=severity.cardinality,highSevId=sevId)),severityMap[sevId]||(severityMap[sevId]=0),severityMap[sevId]=severityMap[sevId]+1}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}var maxSeverity=highSevId||Object.keys(severityMap).reduce((function(a,b){return severityMap[a]>severityMap[b]?a:b})),maxSeverityCount=severityMap[maxSeverity];regions.push({start:alarm.start,end:alarm.end,class:"fc-boolean-"+maxSeverity+"_"+maxSeverityCount,alarms:alarm.alarms,isCleared:isCleared,count:alarm.count}),alarmSeverityValues[maxSeverity]||(alarmSeverityValues[maxSeverity]=[]),alarmSeverityValues[maxSeverity].push(maxSeverityCount)};for(_iterator8.s();!(_step8=_iterator8.n()).done;)_loop2()}catch(err){_iterator8.e(err)}finally{_iterator8.f()}return params.regions=regions,params.onafterinit=function(){for(var severityId in alarmSeverityValues){var color=vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId)?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(severityId).color:"#ff0000",alarmValues=alarmSeverityValues[severityId],distinctAlarmValues=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(new Set(alarmValues));distinctAlarmValues.sort((function(a,b){return b-a}));var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);parentSelector.selectAll(".fc-boolean-0").style("fill",color),parentSelector.selectAll(".fc-boolean-0 rect").style("fill-opacity","0.1");var _step9,_iterator9=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(distinctAlarmValues);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var al=_step9.value;.1;var key="0.8".replace(".","");parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").style("fill",color),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al+" rect").classed("fc-boolean-rect-"+key,!0),parentSelector.selectAll(".fc-boolean-"+severityId+"_"+al).on("mouseover",(function(d){var _step10,tooltipData=[],alarmTooltipData=[],_iterator10=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d.alarms);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var alarm=_step10.value,severity=alarm.severity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.severity.id):null,isCleared=!1;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,severity=alarm.previousSeverity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.previousSeverity.id):null);var message=void 0,subject=void 0;vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.isLicenseEnabled("NEW_ALARMS")?(message=alarm.alarm.description||"",subject=alarm.alarm&&alarm.alarm.subject?alarm.alarm.subject:""):(message=alarm.problem||alarm.readingMessage,subject=alarm.subject||""),alarmTooltipData.push({name:subject,message:message,severity:severity,isCleared:isCleared,count:d.count})}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start).format("LLL")+" - "+moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end).format("LLL"),data:tooltipData,alarms:alarms.showTimeOnly?null:alarmTooltipData,count:alarmTooltipData.length?alarmTooltipData[0].count:0,mode:1};_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltip1(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()})).on("click",(function(d){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip(),d.alarms&&d.alarms.length&&chartContext.openAlarm&&chartContext.openAlarm(d.alarms)}))}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}},params},prepareMultichart:function(chartContext){var _this2=this,dataList=this.prepareMultichartData(chartContext),c3Data=[],index=0,overallHeight=chartContext.options.size.height-20,withoutBooleanPoints=dataList.filter((function(dl){return!dl.booleanChart&&!dl.enumChart}));overallHeight-=50*(dataList.length-withoutBooleanPoints.length);var _step12,_iterator12=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataList);try{var _loop3=function(){var d=_step12.value;index+=1;var params={};params.label=d.label,params.key=d.key,params.padding={top:chartContext.options.padding.top,right:chartContext.options.padding.right,bottom:chartContext.options.padding.bottom,left:chartContext.options.padding.left},_this2.prepareGeneralOptions(chartContext,params,d.key),params.data=d,params.axis=_this2.prepareAxis(chartContext,d.key),chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length||chartContext.Readingdp?params.tooltip=_this2.prepareTooltip(chartContext):params.tooltip=_this2.prepareMultichartTooltip(chartContext),params.data.point&&(params.point=params.data.point),"scatter"===params.data.type&&!0!==chartContext.options.combo&&(params.point={show:!0,pattern:chartContext.Readingdp||chartContext.scatterConfig?params.point.pattern:[]}),_this2.applyDefaultOptions(chartContext,params),chartContext.options.disbaleNiceTickMarks||chartContext.options.isGroupedByTime||(!0!==chartContext.options.general.normalizeStack||"stackedbar"!==chartContext.options.type)&&_this2.applyNiceTickMarks(params,chartContext),index!==dataList.length||!0!==params.axis.x.show||chartContext.scatterConfig||(overallHeight-=50);var height=chartContext.groupByMetrics?150:100;if(overallHeight){var calcHeight=overallHeight/withoutBooleanPoints.length;(calcHeight>=100&&!chartContext.groupByMetrics||calcHeight>=150)&&(height=calcHeight)}if(params.size={height:height,width:chartContext.options.size.width},chartContext.scatterConfig&&(dataList.length>2?params.size.height=chartContext.options.size.height/Math.ceil(dataList.length/2):params.size.height=chartContext.options.size.height),index===dataList.length||chartContext.scatterConfig||(params.axis.x.label.text="",params.axis.x.show=!!chartContext.scatterConfig,params.padding.bottom=-6,params.size.height=params.size.height-25),params.padding.top=0,d.booleanChart){params.grid.y=!1,params.size.height=25,params.axis.x.label.text="",params.axis.x.show=!1,params.axis.y.show=!1,params.axis.y2.show=!1,params.padding.bottom=-25,params.axis.x.min=chartContext.dateRange.range.highResMin,params.axis.x.max=chartContext.dateRange.range.highResMax;var offClassName="fc-boolean-"+d.key+"-0",onClassName="fc-boolean-"+d.key+"-1",booleanTimeline=chartContext.booleanData&&chartContext.booleanData[d.key.replace("datapoint_","")]?chartContext.booleanData[d.key.replace("datapoint_","")]:null;if(booleanTimeline&&booleanTimeline.length){var _step13,regions=[],x=[],y=[],_iterator13=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(booleanTimeline);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var range=_step13.value;x.push(range.start),y.push(null),x.push(range.end),y.push(null),regions.push({start:range.start,end:range.end,class:range.value?onClassName:offClassName})}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}params.regions=regions,params.data.json.x=x,params.data.json[d.key.replace("datapoint_","")]=y,params.data.xFormat="%m-%d-%Y %H:%M",params.axis.x.tick.values=null}else params.data.xFormat="%m-%d-%Y %H:%M",params.regions={start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),class:offClassName},params.data.json.x=[moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm")],params.data.json[d.key.replace("datapoint_","")]=[null,null],params.axis.x.tick.values=null;params.tooltip.show=!1;var c3Self=_this2;params.onafterinit=function(){var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);parentSelector.selectAll("."+onClassName).style("fill",d.booleanChart.color),parentSelector.selectAll("."+onClassName+" rect").style("fill-opacity","0.9"),parentSelector.selectAll("."+onClassName+" rect").classed("fc-boolean-rect-09",!0),parentSelector.selectAll("."+offClassName).style("fill",d.booleanChart.color),parentSelector.selectAll("."+offClassName+" rect").style("fill-opacity","0.1"),parentSelector.selectAll(".bb-chart").style("display","none");// removed the bb-chart element from the boolean chart. it causes tool tip issue. mouse over event fires when mouse over the alarm charts not a boolean chart
var self=this;parentSelector.selectAll("."+onClassName).on("mousemove",(function(){var _step14,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator14=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var dataPoint=_step14.value;if("group"===dataPoint.type){if(dataPoint.children){var _step15,children=[],_iterator15=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var dp=_step15.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson&&children.push({label:dp.label,value:tVal,color:dp.color})}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson=chartContext.data[dataPoint.key],_unit=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal=null===_dJson[closestIdx]?0:_dJson[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal=c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal=["days","hours","minutes","seconds","milliseconds"].includes(_unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal,_unit,dataPoint.convertTounit):("$"===_unit?_unit+" ":"")+_actualVal+(_unit&&"$"!==_unit?" "+_unit:""),_val=_actualVal;_enumMap&&_enumMap[_val]&&(_tVal=_enumMap[_val]),_dJson&&tooltipData.push({label:dataPoint.label,value:_tVal,color:dataPoint.color})}}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()})),parentSelector.selectAll("."+offClassName).on("mousemove",(function(){var _step16,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator16=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var dataPoint=_step16.value;if("group"===dataPoint.type){if(dataPoint.children){var _step17,children=[],_iterator17=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var dp=_step17.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson&&children.push({label:dp.label,value:tVal,color:dp.color})}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson2=chartContext.data[dataPoint.key],_unit2=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap2=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal2=null===_dJson2[closestIdx]?0:_dJson2[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal2=c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal2=["days","hours","minutes","seconds","milliseconds"].includes(_unit2)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal2,_unit2,dataPoint.convertTounit):("$"===_unit2?_unit2+" ":"")+_actualVal2+(_unit2&&"$"!==_unit2?" "+_unit2:""),_val2=_actualVal2;_enumMap2&&_enumMap2[_val2]&&(_tVal2=_enumMap2[_val2]),_dJson2&&tooltipData.push({label:dataPoint.label,value:_tVal2,color:dataPoint.color})}}}catch(err){_iterator16.e(err)}finally{_iterator16.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}}if(d.enumChart){params.grid.y=!1,params.size.height=25,params.axis.x.label.text="",params.axis.x.show=!1,params.axis.y.show=!1,params.axis.y2.show=!1,params.padding.bottom=-25,params.axis.x.min=chartContext.dateRange.range.highResMin,params.axis.x.max=chartContext.dateRange.range.highResMax;for(var _offClassName="fc-boolean-"+d.key+"-0",classes={},_i2=0,_Object$keys2=Object.keys(d.enumMap);_i2<_Object$keys2.length;_i2++){var enumVal=_Object$keys2[_i2];classes[enumVal]="fc-boolean-"+d.key+"-"+enumVal}var _booleanTimeline=chartContext.booleanData&&chartContext.booleanData[d.key.replace("datapoint_","")]?chartContext.booleanData[d.key.replace("datapoint_","")]:null;if(_booleanTimeline&&_booleanTimeline.length){var _step18,_regions=[],_x=[],_y=[],_iterator18=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_booleanTimeline);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _range=_step18.value;_x.push(_range.start),_y.push(null),_x.push(_range.end),_y.push(null),_regions.push({start:_range.start,end:_range.end,class:_range.value?classes[_range.value]:_offClassName})}}catch(err){_iterator18.e(err)}finally{_iterator18.f()}params.regions=_regions,params.data.json.x=_x,params.data.json[d.key.replace("datapoint_","")]=_y,params.data.xFormat="%m-%d-%Y %H:%M",params.axis.x.tick.values=null}else params.data.xFormat="%m-%d-%Y %H:%M",params.regions={start:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),end:moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),class:_offClassName},params.data.json.x=[moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm"),moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.dateRange.time[1]?chartContext.dateRange.time[1]:chartContext.dateRange.time[0]).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).format("MM-DD-YYYY HH:mm")],params.data.json[d.key.replace("datapoint_","")]=[null,null],params.axis.x.tick.values=null;params.tooltip.show=!1;var _c3Self=_this2;params.onafterinit=function(){for(var self=this,parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element),_i3=0,_Object$keys3=Object.keys(d.enumMap);_i3<_Object$keys3.length;_i3++){var _enumVal=_Object$keys3[_i3];parentSelector.selectAll("."+classes[_enumVal]).style("fill",d.enumColorMap[_enumVal]),parentSelector.selectAll("."+classes[_enumVal]+" rect").style("fill-opacity","0.9"),parentSelector.selectAll("."+classes[_enumVal]+" rect").classed("fc-boolean-rect-09",!0),parentSelector.selectAll("."+classes[_enumVal]).on("mousemove",(function(){var _step19,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=_c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator19=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var dataPoint=_step19.value;if("group"===dataPoint.type){if(dataPoint.children){var _step20,children=[],_iterator20=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var dp=_step20.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=_c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;if(enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson){var data={label:dp.label,value:tVal};"---"!==val&&(data["color"]="ENUM"===dp.dataType?dp.enumColorMap[val]:dp.color),children.push(data)}}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson3=chartContext.data[dataPoint.key],_unit3=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap3=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal3=null===_dJson3[closestIdx]?0:_dJson3[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal3=_c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal3=["days","hours","minutes","seconds","milliseconds"].includes(_unit3)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal3,_unit3,dataPoint.convertTounit):("$"===_unit3?_unit3+" ":"")+_actualVal3+(_unit3&&"$"!==_unit3?" "+_unit3:""),_val3=_actualVal3;if(_enumMap3&&_enumMap3[_val3]&&(_tVal3=_enumMap3[_val3]),_dJson3){var _data={label:dataPoint.label,value:_tVal3};"---"!==_val3&&(_data["color"]="ENUM"===dataPoint.dataType?dataPoint.enumColorMap[_val3]:dataPoint.color),tooltipData.push(_data)}}}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}parentSelector.selectAll("."+_offClassName).style("fill",d.enumChart.color),parentSelector.selectAll("."+_offClassName+" rect").style("fill-opacity","0.1"),parentSelector.selectAll(".bb-chart").style("display","none"),// removed the bb-chart element from the boolean chart. it causes tool tip issue. mouse over event fires when mouse over the alarm charts not a boolean chart
parentSelector.selectAll("."+_offClassName).on("mousemove",(function(){var _step21,mouse=d3__WEBPACK_IMPORTED_MODULE_42__.mouse(this),closestDate=_c3Self.newFindClosest(chartContext.data.x,chartContext.options.axis.x.time.format.d3Format,self.x.invert(mouse[0])),closestIdx=closestDate.i,xVal=closestDate.date,tooltipData=[],_iterator21=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var dataPoint=_step21.value;if("group"===dataPoint.type){if(dataPoint.children){var _step22,children=[],_iterator22=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var dp=_step22.value,dJson=chartContext.data[dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=null===dJson[closestIdx]?0:dJson[closestIdx];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=_c3Self.getBooleanValue(chartContext,xVal,dp.key,closestIdx));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;if(enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson){var data={label:dp.label,value:tVal};"---"!==val&&(data["color"]="ENUM"===dp.dataType?dp.enumColorMap[val]:dp.color),tooltipData.push(data)}}}catch(err){_iterator22.e(err)}finally{_iterator22.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else{var _dJson4=chartContext.data[dataPoint.key],_unit4=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap4=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal4=null===_dJson4[closestIdx]?0:_dJson4[closestIdx];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal4=_c3Self.getBooleanValue(chartContext,xVal,dataPoint.key,closestIdx));var _tVal4=["days","hours","minutes","seconds","milliseconds"].includes(_unit4)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal4,_unit4,dataPoint.convertTounit):("$"===_unit4?_unit4+" ":"")+_actualVal4+(_unit4&&"$"!==_unit4?" "+_unit4:""),_val4=_actualVal4;if(_enumMap4&&_enumMap4[_val4]&&(_tVal4=_enumMap4[_val4]),_dJson4){var _data2={label:dataPoint.label,value:_tVal4};"---"!==_val4&&(_data2["color"]="ENUM"===dataPoint.dataType?dataPoint.enumColorMap[_val4]:dataPoint.color),tooltipData.push(_data2)}}}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=xVal;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(xVal)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(xVal).format(dateFormat):"number"===typeof xVal&&(tooltipTitle=chartContext.data.x[xVal]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};if(chartContext.tooltipCallback)return chartContext.tooltipCallback(tooltipData,tooltipConfig,tooltipTitle),null;_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig)})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}}if(index!==dataList.length||chartContext.scatterConfig||(params.axis.x.show||!d.enumChart&&!d.booleanChart?params.axis.x.show&&(d.enumChart||d.booleanChart||(params.size.height=params.size.height+50),params.padding.bottom=0):(params.axis.x.show=!0,params.size.height=95,params.axis.x.label.text="Timestamp",params.padding.bottom=0)),params.axis.y&&params.axis.y.show&&(params.axis.y.label=" "),params.axis.y2&&params.axis.y2.show&&(params.axis.y2.label=" "),chartContext.options.customizeC3){var mergedparams=util_deepmerge__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */.Z.objectAssignDeep(params,chartContext.options.customizeC3);params=mergedparams}params.data.json=Object.freeze(params.data.json),c3Data.push(params)};for(_iterator12.s();!(_step12=_iterator12.n()).done;)_loop3()}catch(err){_iterator12.e(err)}finally{_iterator12.f()}return c3Data},newFindClosest:function(dates,d3Format,testDate){for(var date=new Date(testDate),max=dates.length,parseTime=d3__WEBPACK_IMPORTED_MODULE_42__.timeParse(d3Format),lowIdx=null,lowDate=null,lowDiff=null,i=0;i<max;i++){var dateObj=parseTime(dates[i]),d=date-dateObj;d<0&&(d=-d),lowDiff?lowDiff>d&&(lowDiff=d,lowDate=dateObj,lowIdx=i):(lowDate=dateObj,lowDiff=d,lowIdx=i)}return{i:lowIdx,date:lowDate}},prepareGeneralOptions:function(chartContext,params,multichartKey){var generalOptions=chartContext.options.general,grid={x:{show:generalOptions.grid.x},y:{show:generalOptions.grid.y}};if("pie"!==chartContext.options.type&&"donut"!==chartContext.options.type&&"gauge"!==chartContext.options.type){if(grid.y.lines=[{value:0,class:"x-axis-zero-line"}],grid.y2={lines:[{value:0,class:"x-axis-zero-line"}]},chartContext.options.safeLimit&&chartContext.options.safeLimit.length){var points=[];chartContext.options.dataPoints.forEach((function(dp){"group"===dp.type?multichartKey?multichartKey==="group_"+dp.label&&points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):multichartKey?multichartKey==="datapoint_"+dp.key&&points.push(dp):points.push(dp)}));var _step23,safeLimitColorMap={},keyIndex=0,_iterator23=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.safeLimit);try{var _loop4=function(){var sl=_step23.value;keyIndex+=1;var dpObj=points.find((function(dp){return dp.key===sl.datapoint}));if(!dpObj)return 1;// continue
if(!0===dpObj.safelimit){var className="safelimit-"+keyIndex;safeLimitColorMap[className]=dpObj.color,grid.y.lines.push({value:sl.value,text:sl.label+": "+sl.value,class:className+" "+sl.key,axis:dpObj.axes,position:"y2"===dpObj.axes?"end":"start"})}};for(_iterator23.s();!(_step23=_iterator23.n()).done;)_loop4()}catch(err){_iterator23.e(err)}finally{_iterator23.f()}params.onafterinit=function(){var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);for(var key in safeLimitColorMap)parentSelector.selectAll("."+key+" line").style("stroke",safeLimitColorMap[key]),parentSelector.selectAll("."+key+" text").style("fill",safeLimitColorMap[key]),parentSelector.selectAll("."+key+".min line").style("stroke-dasharray","2,2"),parentSelector.selectAll("."+key+".max line").style("stroke-dasharray","8,2")}}if(chartContext.options.benchmark&&(chartContext.options.benchmark.variances||chartContext.options.benchmark.constant||chartContext.options.benchmark.lines)){var _points=[];chartContext.options.dataPoints.forEach((function(dp){"group"===dp.type?multichartKey?multichartKey==="group_"+dp.label&&_points.push.apply(_points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):_points.push.apply(_points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):multichartKey?multichartKey==="datapoint_"+dp.key&&_points.push(dp):_points.push(dp)}));var colorMap={},_keyIndex=0;chartContext.options.benchmark.constant&&grid.y.lines.push({value:chartContext.options.benchmark.constant,text:"Benchmark : ".concat(chartContext.options.benchmark.constant),class:"safelimit-constant benchmark",axis:"y",position:"end"}),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__/* .isArray */.kJ)(chartContext.options.benchmark.lines)&&((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_48__/* .isEmpty */.xb)(chartContext.options.benchmark.lines)||chartContext.options.benchmark.lines.forEach((function(constantLine){if(_keyIndex+=1,""!=constantLine.value&&!0===constantLine.show){var className="safelimit-constantLine-".concat(_keyIndex);colorMap[className]=constantLine.color,grid.y.lines.push({value:constantLine.value,text:"".concat(constantLine.label," : ").concat(constantLine.value),class:"".concat(className," benchmark"),axis:"y",position:"end"})}}))),_points.forEach((function(dp){chartContext.options.benchmark.variances[dp.key]&&chartContext.options.benchmark.variances[dp.key].length&&chartContext.reportVarianceData&&chartContext.options.benchmark.variances[dp.key].forEach((function(variance){if(chartContext.reportVarianceData["".concat(dp.key,".").concat(variance)]){_keyIndex+=1;var className="safelimit-".concat(_keyIndex);colorMap[className]=dp.color;var value=parseInt(chartContext.reportVarianceData["".concat(dp.key,".").concat(variance)]),label=chartContext.options.benchmark.label?chartContext.options.benchmark.label:"Benchmark";grid.y.lines.push({value:value,text:"".concat(label,": ").concat(value),class:"".concat(className," benchmark"),axis:dp.axes,position:"end"})}}))})),params.onafterinit=function(){var parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element);for(var key in colorMap)parentSelector.selectAll("."+key+" line").style("stroke",colorMap[key]),parentSelector.selectAll("."+key+" text").style("fill",colorMap[key]),parentSelector.selectAll("."+key+".min line").style("stroke-dasharray","2,2"),parentSelector.selectAll("."+key+".max line").style("stroke-dasharray","8,2");parentSelector.selectAll(".safelimit-constant line").style("stroke","#000"),parentSelector.selectAll(".safelimit-constant text").style("fill","#000")}}}chartContext.scatterConfig&&(grid["focus"]={show:!0,y:!0}),params.grid=grid,params.point=chartContext.options.general.point?chartContext.options.general.point:generalOptions.point,params.line={connectNull:!chartContext.options.line||null===chartContext.options.line.connectNull||chartContext.options.line.connectNull}},prepareMultichartData:function(chartContext){var _this3=this,chartDataList=[];if(chartContext.options.dataPoints&&chartContext.options.dataPoints.length){var _step24,_iterator24=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{var _loop5=function(){var dataPoint=_step24.value,data=chartContext.scatterConfig?{}:{x:"x"};chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(data.xFormat=chartContext.options.axis.x.time.format.d3Format),chartContext.options.general.labels&&(data.labels=!0);var names={},colors={},types={},groups=[],axes={},jsonData={},xs={},xMap={};if(chartContext.scatterConfig&&chartContext.xMap&&(xMap=chartContext.xMap),chartContext.options.isGroupedByTime){if(chartContext.options.isGroupedByTime){var columns=[],pointaxes={},pointtypes={};if("datapoint"===dataPoint.type||"rangeGroup"===dataPoint.type)columns=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===dataPoint.key})),pointaxes[dataPoint.key]=dataPoint.axes,pointtypes[dataPoint.key]=dataPoint.chartType;else if(dataPoint.children&&dataPoint.children.length){var _step27,_iterator27=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{var _loop6=function(){var child=_step27.value,col=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===child.key}));columns=columns.concat(col),pointaxes[child.key]=child.axes,pointtypes[child.key]=child.chartType};for(_iterator27.s();!(_step27=_iterator27.n()).done;)_loop6()}catch(err){_iterator27.e(err)}finally{_iterator27.f()}}var _step28,_group=[],_iterator28=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(columns);try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var column=_step28.value;chartContext.options.timeGroupOptions[column].name&&(pointaxes[column.split("_")[0]]&&(axes[column]=pointaxes[column.split("_")[0]]),pointtypes[column.split("_")[0]]&&(types[column]="stackedbar"===pointtypes[column.split("_")[0]]?"bar":pointtypes[column.split("_")[0]],"stackedbar"===pointtypes[column.split("_")[0]]&&_group.push(column)),names[column]=chartContext.options.timeGroupOptions[column].name,colors[column]=chartContext.options.timeGroupOptions[column].color,jsonData[column]=chartContext.data[column])}}catch(err){_iterator28.e(err)}finally{_iterator28.f()}_group.length&&groups.push(_group)}}else if("datapoint"===dataPoint.type||"rangeGroup"===dataPoint.type){if(dataPoint.visible){if(chartContext.data[dataPoint.key]&&(jsonData[dataPoint.key]=chartContext.data[dataPoint.key]),xMap[dataPoint.key]||dataPoint.key.split("_").length&&xMap[dataPoint.key.split("_")[0]])if(3===dataPoint.pointType){var key=dataPoint.key.split("_")[0];xs[dataPoint.key]=xMap[key]}else xs[dataPoint.key]=xMap[dataPoint.key];dataPoint.label&&(names[dataPoint.key]=dataPoint.label),dataPoint.chartType&&(types[dataPoint.key]="stackedbar"===dataPoint.chartType||"histogram"===dataPoint.chartType?"bar":dataPoint.chartType),dataPoint.color&&(colors[dataPoint.key]=dataPoint.color),dataPoint.axes&&(axes[dataPoint.key]=dataPoint.axes),chartContext.scatterConfig?(types[dataPoint.key]="scatter",3===dataPoint.pointType&&(
//trendLine
types[dataPoint.key]="line")):3===dataPoint.pointType&&(
//trendLine
types[dataPoint.key]="line")}else if(!1===dataPoint.visible)return 0;// continue
}else if(dataPoint.children&&dataPoint.children.length){var booleanDpList=dataPoint.children.filter((function(dp){return"BOOLEAN"===dp.dataType||"ENUM"===dp.dataType}));if(booleanDpList&&booleanDpList.length){var _step25,_iterator25=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(booleanDpList);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var child=_step25.value,booleanData=chartContext.scatterConfig?{}:{x:"x"};chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(booleanData.xFormat=chartContext.options.axis.x.time.format.d3Format),chartContext.options.general.labels&&(booleanData.labels=!0);var booleanNames={},booleanColors={},booleanTypes={},booleanAxes={},booleanJsonData={},booleanxs={};if(child.visible)chartContext.data[child.key]&&(booleanJsonData[child.key]=chartContext.data[child.key]),xMap[child.key]&&(booleanxs[child.key]=xMap[child.key]),child.label&&(booleanNames[child.key]=child.label),child.chartType&&(booleanTypes[child.key]=child.chartType),child.color&&(booleanColors[child.key]=child.color),child.axes&&(booleanAxes[child.key]=child.axes);else if(!1===child.visible)continue;if(chartContext.scatterConfig||(booleanJsonData.x=chartContext.data.x),booleanData.json=booleanJsonData,booleanData.names=booleanNames,booleanData.colors=booleanColors,booleanData.types=booleanTypes,booleanData.type="area",booleanData.axes=booleanAxes,booleanData.key=child.type+"_"+(child.key?child.key:child.label),booleanData.label=child.label,0!==Object.keys(booleanxs).length){booleanData["xs"]=booleanxs;for(var _i4=0,_Object$keys4=Object.keys(booleanxs);_i4<_Object$keys4.length;_i4++){var xkey=_Object$keys4[_i4];!booleanData.json[booleanxs[xkey]]&&chartContext.data[booleanxs[xkey]]&&(booleanData.json[booleanxs[xkey]]=chartContext.data[booleanxs[xkey]])}}booleanData.booleanChart="BOOLEAN"===child.dataType?{color:child.color}:null,"ENUM"===child.dataType&&(booleanData.enumChart="ENUM"===child.dataType?{color:child.color}:null,booleanData.enumMap=child.enumMap,child.enumColorMap&&(booleanData.enumColorMap=child.enumColorMap)),chartDataList.push(booleanData)}}catch(err){_iterator25.e(err)}finally{_iterator25.f()}return 0;// continue
}var _step26,group=[],visibleChildPoints=0,_iterator26=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _child=_step26.value;if(_child.visible){if(chartContext.data[_child.key]&&(jsonData[_child.key]=chartContext.data[_child.key]),xMap[_child.key]||_child.key.split("_").length&&xMap[_child.key.split("_")[0]])if(3===dataPoint.pointType){var _key2=_child.key.split("_")[0];xs[_child.key]=xMap[_key2]}else xs[_child.key]=xMap[_child.key];_child.label&&(names[_child.key]=_child.label),_child.chartType&&(types[_child.key]=_child.chartType),_child.color&&(colors[_child.key]=_child.color),_child.axes&&(axes[_child.key]=_child.axes),"stackedbar"===_child.chartType&&(types[_child.key]="bar",group.push(_child.key?_child.key+"":_child.key)),chartContext.scatterConfig?(types[_child.key]="scatter",3===dataPoint.pointType&&(
//trendLine
types[_child.key]="line")):3===dataPoint.pointType&&(
//trendLine
types[_child.key]="line")}"undefined"!==typeof _child.visible&&!0!==_child.visible||(visibleChildPoints+=1)}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}if(group.length&&groups.push(group),0===visibleChildPoints)return 0;// continue
}if(chartContext.scatterConfig||(jsonData.x=chartContext.data.x),data.json=jsonData,data.names=names,data.colors=colors,data.types=types,0!==Object.keys(xs).length){data["xs"]=xs,data["xSort"]=!1;for(var _i5=0,_Object$keys5=Object.keys(xs);_i5<_Object$keys5.length;_i5++){var _xkey=_Object$keys5[_i5];!data.json[xs[_xkey]]&&chartContext.data[xs[_xkey]]&&(data.json[xs[_xkey]]=chartContext.data[xs[_xkey]])}}else chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length&&(data["xSort"]=!1);var allowedTypes=["scatter","bubble"],scatterJSOn={},colorClusters={};if(Object.keys(types).find((function(key){return"scatter"===types[key]}))&&(!chartContext.options.regressionConfig||0===chartContext.options.regressionConfig.length)||chartContext.options.trendLine&&chartContext.options.trendLine.enable)if(data.point={},data.point["show"]=!0,data.point["pattern"]=[],"datapoint"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key])||6===dataPoint.pointType)if(chartContext.scatterConfig&&dataPoint.pointCustomization){var pointPattern=_this3.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&data.point.pattern.push(pointPattern),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=_this3.getClusters(data.json[dataPoint.key].slice()),chartContext.options.scatter.size&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=_this3.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>");else if("systemgroup"===dataPoint.type){var _step29,_iterator29=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _child2=_step29.value;if(allowedTypes.includes(types[_child2.key]))if(chartContext.scatterConfig&&_child2.pointCustomization){var _pointPattern=_this3.getPointPattern(_child2.pointCustomization.shape);"x"!==_child2.axes&&data.point.pattern.push(_pointPattern),scatterJSOn[_child2.key]=_child2.pointCustomization,colorClusters[_child2.key]=_this3.getClusters(data.json[_child2.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==_child2.axes?(data.json[_child2.key]=_this3.getBubbleFormatedData(data.json[_child2.key],data.json[_child2.pointCustomization.size.basedOn]),data.types[_child2.key]="bubble"):data.types[_child2.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator29.e(err)}finally{_iterator29.f()}}else if("rangeGroup"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key]))if(chartContext.scatterConfig&&dataPoint.pointCustomization){var _pointPattern2=_this3.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&data.point.pattern.push(_pointPattern2),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=_this3.getClusters(data.json[dataPoint.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=_this3.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>");else if(dataPoint.children&&dataPoint.children.length){var _step30,_iterator30=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _child3=_step30.value;if(allowedTypes.includes(types[_child3.key]))if(chartContext.scatterConfig&&_child3.pointCustomization){var _pointPattern3=_this3.getPointPattern(_child3.pointCustomization.shape);"x"!==_child3.axes&&data.point.pattern.push(_pointPattern3),scatterJSOn[_child3.key]=_child3.pointCustomization,colorClusters[_child3.key]=_this3.getClusters(data.json[_child3.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==_child3.axes?(data.json[_child3.key]=_this3.getBubbleFormatedData(data.json[_child3.key],data.json[_child3.pointCustomization.size.basedOn]),data.types[_child3.key]="bubble"):data.types[_child3.key]="scatter"}else data.point.pattern.push("circle");else data.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator30.e(err)}finally{_iterator30.f()}}data.color=function(color,d){if(scatterJSOn[d.id]&&chartContext.options.scatter.color.mode){var colorKey=scatterJSOn[d.id].color.basedOn;if(colorClusters[colorKey]){var colorScale="monochrome"===chartContext.options.scatter.color.mode?chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6):["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],colorRange=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[colorKey]).range("monochrome"===chartContext.options.scatter.color.mode?colorScale.slice(1,6):colorScale);return"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value?d.value.y?colorRange(d.value.y):colorRange(d.value):color}}else if(chartContext.options.scatter&&"monochrome"===chartContext.options.scatter.color.mode){if(colorClusters[d.id]){var _colorScale=chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6),_colorRange=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[d.id]).range(_colorScale.slice(1,6));return"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value?d.value.y?_colorRange(d.value.y):_colorRange(d.value):color}}else if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value){var matchpoint=chartContext.options.dataPoints.find((function(dp){return dp.key===d.id}));if(matchpoint&&matchpoint.colorCriteria){var min,max,mincolor,maxcolor,resultcolor,_step31,_iterator31=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(matchpoint.colorCriteria);try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var crit=_step31.value;("undefined"===typeof min||min>crit.min)&&(min=crit.min,mincolor=crit.color),("undefined"===typeof max||max<crit.max)&&(max=crit.max,maxcolor=crit.color),d.value>=crit.min&&d.value<crit.max?resultcolor=crit.color:d.value<min?resultcolor=mincolor:d.value>max&&(resultcolor=maxcolor)}}catch(err){_iterator31.e(err)}finally{_iterator31.f()}return resultcolor}}return color},data.type=chartContext.Readingdp||chartContext.scatterConfig?"scatter":"area",groups.length&&(data.groups=groups),data.axes=axes,data.key=dataPoint.type+"_"+(dataPoint.key?dataPoint.key:dataPoint.label),data.label=dataPoint.label,data.booleanChart="BOOLEAN"===dataPoint.dataType?{color:dataPoint.color}:null,"ENUM"===dataPoint.dataType&&(data.enumChart="ENUM"===dataPoint.dataType?{color:dataPoint.color}:null,data.enumMap=dataPoint.enumMap,dataPoint.enumColorMap&&(data.enumColorMap=dataPoint.enumColorMap)),chartDataList.push(data)};for(_iterator24.s();!(_step24=_iterator24.n()).done;)_loop5()}catch(err){_iterator24.e(err)}finally{_iterator24.f()}}return chartDataList},transformPieData:function(type,chartContext){for(var data=chartContext.data,options=chartContext.options,newData={},colors={},labels={},dataKey=Object.keys(data).filter((function(k){return"x"!==k}))[0],i=0;i<data.x.length;i++){var key=data.x[i];if(newData[key]=[data[dataKey][i]],-1!==options.axis.x.datatype.indexOf("date")){var parseTime=d3__WEBPACK_IMPORTED_MODULE_42__.timeParse(chartContext.options.axis.x.time.format.d3Format);labels[key]=this.newGetDateFormat(parseTime(key),chartContext.dateRange.period,chartContext.dateRange.rangeType)}options.xColorMap&&options.xColorMap[key]&&(colors[key]=options.xColorMap[key])}return newData.x=[dataKey],chartContext.xActualDataType=chartContext.options.axis.x.datatype,chartContext.options.axis.x.datatype="string",chartContext.xLabelMap=labels,{json:newData,colors:colors,labels:labels,type:type}},prepareData:function(chartContext){var data={json:Object.assign({},chartContext.data),type:"stackedbar"===chartContext.options.type||"histogram"===chartContext.options.type?"bar":chartContext.options.type};if(chartContext.scatterConfig||(data.x="x"),chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(data.xFormat=chartContext.options.axis.x.time.format.d3Format),chartContext.options.general.labels&&(data.labels=!0),chartContext.xValueMode)return data=this.transformPieData(data.type,chartContext),data;var xMap={};if(chartContext.scatterConfig&&chartContext.xMap&&(xMap=chartContext.xMap),chartContext.options.dataPoints&&chartContext.options.dataPoints.length){var names={},colors={},types={},groups=[],axes={},hidden=[],stackedGroup=[],xs={};if(chartContext.options.isGroupedByTime){if(chartContext.options.timeGroupOptions){var allPoints=[];chartContext.options.dataPoints.forEach((function(dp){"group"===dp.type?allPoints.push.apply(allPoints,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(dp.children)):allPoints.push(dp)}));for(var _loop8=function(){var column=_Object$keys6[_i6];chartContext.options.timeGroupOptions[column].visible||hidden.push(column),"stackedbar"===chartContext.options.type&&(types[column]="bar",stackedGroup.push(column?column+"":column));var point=allPoints.find((function(dp){return dp.key===column.split("_")[0]}));point&&point.axes&&(axes[column]=point.axes),names[column]=chartContext.options.timeGroupOptions[column].name,colors[column]=chartContext.options.timeGroupOptions[column].color},_i6=0,_Object$keys6=Object.keys(chartContext.options.timeGroupOptions);_i6<_Object$keys6.length;_i6++)_loop8()}}else{var _step32,_iterator32=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{var _loop7=function(){var dataPoint=_step32.value;if("datapoint"===dataPoint.type){if(dataPoint.label&&(names[dataPoint.key]=dataPoint.label),dataPoint.chartType&&(types[dataPoint.key]=dataPoint.chartType),dataPoint.color&&(colors[dataPoint.key]=dataPoint.color),dataPoint.axes&&(axes[dataPoint.key]=dataPoint.axes),chartContext.options.hideDataPoints&&chartContext.options.hideDataPoints.length&&chartContext.options.hideDataPoints.find((function(rt){return rt===dataPoint.key}))&&(dataPoint.visible=!1),!1===dataPoint.visible&&hidden.push(dataPoint.key),(!chartContext.options.combo&&"stackedbar"===chartContext.options.type||"stackedbar"===dataPoint.chartType)&&(types[dataPoint.key]="bar",stackedGroup.push(dataPoint.key?dataPoint.key+"":dataPoint.key)),chartContext.options.combo&&"histogram"===dataPoint.chartType&&(types[dataPoint.key]="bar"),xMap[dataPoint.key]||dataPoint.key.split("_").length&&xMap[dataPoint.key.split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var key=dataPoint.key.split("_")[0];xs[dataPoint.key]=xMap[key]}else xs[dataPoint.key]=xMap[dataPoint.key];chartContext.Readingdp||chartContext.options.trendLine&&chartContext.options.trendLine.enable?(types[dataPoint.key]=chartContext.options.type,3!==dataPoint.pointType&&6!==dataPoint.pointType||(
//trendLine
types[dataPoint.key]="line")):3!==dataPoint.pointType&&6!==dataPoint.pointType||(
//trendLine
types[dataPoint.key]="line")}else if("systemgroup"===dataPoint.type){var _step33,group=[],_iterator33=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var child=_step33.value;if(group.push(child.key?child.key+"":child.key),xMap[child.key]||child.key.toString().split("_").length&&xMap[child.key.toString().split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var _key3=dataPoint.key.split("_")[0];xs[child.key]=xMap[_key3]}else xs[child.key]=xMap[dataPoint.key];child.label&&(names[child.key]=child.label),dataPoint.chartType&&(types[child.key]=dataPoint.chartType),child.color&&(colors[child.key]=child.color),child.axes&&(axes[child.key]=child.axes),chartContext.options.hideDataPoints&&chartContext.options.hideDataPoints.length&&chartContext.options.hideDataPoints.find((function(rt){return rt===dataPoint.key}))&&(dataPoint.visible=!1),!1===dataPoint.visible&&hidden.push(dataPoint.key)}}catch(err){_iterator33.e(err)}finally{_iterator33.f()}"bar"!==chartContext.options.type&&"histogram"!==chartContext.options.type&&groups.push(group)}else if("rangeGroup"===dataPoint.type){if(dataPoint.label&&(names[dataPoint.key]=dataPoint.label),dataPoint.chartType&&(types[dataPoint.key]=dataPoint.chartType),dataPoint.color&&(colors[dataPoint.key]=dataPoint.color),dataPoint.axes&&(axes[dataPoint.key]=dataPoint.axes),chartContext.options.hideDataPoints&&chartContext.options.hideDataPoints.length&&chartContext.options.hideDataPoints.find((function(rt){return rt===dataPoint.key}))&&(dataPoint.visible=!1),!1===dataPoint.visible&&hidden.push(dataPoint.key),xMap[dataPoint.key]||dataPoint.key.split("_").length&&xMap[dataPoint.key.split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var _key4=dataPoint.key.split("_")[0];xs[dataPoint.key]=xMap[_key4]}else xs[dataPoint.key]=xMap[dataPoint.key]}else if(dataPoint.children&&dataPoint.children.length){var _step34,_group2=[],_iterator34=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var _child4=_step34.value;if("x"!==_child4.axes){if(_group2.push(_child4.key?_child4.key+"":_child4.key),_child4.label&&(names[_child4.key]=_child4.label),dataPoint.chartType)if("scatter"===_child4.chartType){if(xMap[_child4.key]||_child4.key.split("_").length&&xMap[_child4.key.split("_")[0]])if(3===dataPoint.pointType||6===dataPoint.pointType){var _key5=_child4.key.split("_")[0];xs[_child4.key]=xMap[_key5]}else xs[_child4.key]=xMap[_child4.key];types[_child4.key]=_child4.chartType}else types[_child4.key]=dataPoint.chartType;_child4.color&&(colors[_child4.key]=_child4.color),_child4.axes&&(axes[_child4.key]=_child4.axes),!1===dataPoint.visible&&hidden.push(dataPoint.key)}}}catch(err){_iterator34.e(err)}finally{_iterator34.f()}groups.push(_group2)}};for(_iterator32.s();!(_step32=_iterator32.n()).done;)_loop7()}catch(err){_iterator32.e(err)}finally{_iterator32.f()}}0!==stackedGroup.length&&groups.push(stackedGroup),data.names=names,data.colors=colors,data.types=types;var allowedTypes=["scatter","bubble"],scatterJSOn={},colorClusters={};if(Object.keys(types).find((function(key){return allowedTypes.includes(types[key])}))&&(!chartContext.options.regressionConfig||0===chartContext.options.regressionConfig.length)||chartContext.options.trendLine&&chartContext.options.trendLine.enable){chartContext.options.point={},chartContext.options.point["show"]=!0,chartContext.options.point["pattern"]=[];var _step35,_iterator35=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.options.dataPoints);try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var dataPoint=_step35.value;if("datapoint"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key])||6===dataPoint.pointType)if(chartContext.scatterConfig&&dataPoint.pointCustomization){var pointPattern=this.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&chartContext.options.point.pattern.push(pointPattern),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=this.getClusters(data.json[dataPoint.key].slice()),"reading"===chartContext.options.scatter.size.mode&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=this.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>");else if("systemgroup"===dataPoint.type){var _step36,_iterator36=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var child=_step36.value;if(allowedTypes.includes(types[child.key]))if(chartContext.scatterConfig&&child.pointCustomization){var _pointPattern4=this.getPointPattern(child.pointCustomization.shape);"x"!==child.axes&&chartContext.options.point.pattern.push(_pointPattern4),scatterJSOn[child.key]=child.pointCustomization,colorClusters[child.key]=this.getClusters(data.json[child.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==child.axes?(data.json[child.key]=this.getBubbleFormatedData(data.json[child.key],data.json[child.pointCustomization.size.basedOn]),data.types[child.key]="bubble"):data.types[child.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator36.e(err)}finally{_iterator36.f()}}else if("rangeGroup"===dataPoint.type)if(allowedTypes.includes(types[dataPoint.key]))if(chartContext.scatterConfig&&dataPoint.pointCustomization){var _pointPattern5=this.getPointPattern(dataPoint.pointCustomization.shape);"x"!==dataPoint.axes&&chartContext.options.point.pattern.push(_pointPattern5),scatterJSOn[dataPoint.key]=dataPoint.pointCustomization,colorClusters[dataPoint.key]=this.getClusters(data.json[dataPoint.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==dataPoint.axes?(data.json[dataPoint.key]=this.getBubbleFormatedData(data.json[dataPoint.key],data.json[dataPoint.pointCustomization.size.basedOn]),data.types[dataPoint.key]="bubble"):data.types[dataPoint.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>");else if(dataPoint.children&&dataPoint.children.length){var _step37,_iterator37=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var _child5=_step37.value;if(allowedTypes.includes(types[_child5.key]))if(chartContext.scatterConfig&&_child5.pointCustomization){var _pointPattern6=this.getPointPattern(_child5.pointCustomization.shape);"x"!==_child5.axes&&chartContext.options.point.pattern.push(_pointPattern6),scatterJSOn[_child5.key]=_child5.pointCustomization,colorClusters[_child5.key]=this.getClusters(data.json[_child5.key]),"reading"===chartContext.options.scatter.size.mode&&"x"!==_child5.axes?(data.json[_child5.key]=this.getBubbleFormatedData(data.json[_child5.key],data.json[_child5.pointCustomization.size.basedOn]),data.types[_child5.key]="bubble"):data.types[_child5.key]="scatter"}else chartContext.options.point.pattern.push("circle");else chartContext.options.point.pattern.push("<polygon></polygon>")}}catch(err){_iterator37.e(err)}finally{_iterator37.f()}}}}catch(err){_iterator35.e(err)}finally{_iterator35.f()}}data.color=function(color,d){if(scatterJSOn[d.id]&&chartContext.options.scatter.color.mode){var colorKey=scatterJSOn[d.id].color.basedOn;if(colorClusters[colorKey]){var colorScale="monochrome"===chartContext.options.scatter.color.mode?chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6):chartContext.options.scatter.color.colors?chartContext.options.scatter.color.colors:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],colorRange=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[colorKey]).range("monochrome"===chartContext.options.scatter.color.mode?colorScale.slice(1,6):colorScale);if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)){var val=data.json[colorKey][d.index];
// for data point
return val?val.y?colorRange(val.y):colorRange(val):color;
// for label
}return color}}else if(chartContext.options.scatter&&"monochrome"===chartContext.options.scatter.color.mode){if(colorClusters[d.id]){var _colorScale2=chroma_js__WEBPACK_IMPORTED_MODULE_47__.scale(["white",color]).colors(6),_colorRange2=d3__WEBPACK_IMPORTED_MODULE_42__.scaleLinear().domain(colorClusters[d.id]).range(_colorScale2.slice(1,6));return"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value?d.value.y?_colorRange2(d.value.y):_colorRange2(d.value):color}}else if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d)&&d.value){var matchpoint=chartContext.options.dataPoints.find((function(dp){return dp.key===d.id}));if(matchpoint&&matchpoint.colorCriteria){var min,max,mincolor,maxcolor,resultcolor,_step38,_iterator38=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(matchpoint.colorCriteria);try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var crit=_step38.value;("undefined"===typeof min||min>crit.min)&&(min=crit.min,mincolor=crit.color),("undefined"===typeof max||max<crit.max)&&(max=crit.max,maxcolor=crit.color),d.value>=crit.min&&d.value<crit.max?resultcolor=crit.color:d.value<min?resultcolor=mincolor:d.value>max&&(resultcolor=maxcolor)}}catch(err){_iterator38.e(err)}finally{_iterator38.f()}return resultcolor}}return color},data.groups=groups,data.axes=axes,0!==Object.keys(xs).length?(data["xs"]=xs,data["xSort"]=!1):chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length&&(data["xSort"]=!1),hidden.length&&(data.hide=hidden)}return chartContext.options.general&&chartContext.options.general.normalizeStack&&(data.stack={normalize:!0}),chartContext.options.general&&chartContext.options.general.dataOrder&&"none"!==chartContext.options.general.dataOrder&&(data.order=chartContext.options.general.dataOrder),data},getOnlyDataPoints:function(dataPoints){var _step39,result=[],_iterator39=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoints);try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var dataPoint=_step39.value;if("datapoint"===dataPoint.type.trim().toLowerCase())result.push(dataPoint);else{var _step40,_iterator40=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var child=_step40.value;result.push(child)}}catch(err){_iterator40.e(err)}finally{_iterator40.f()}}}}catch(err){_iterator39.e(err)}finally{_iterator39.f()}return result},getTickCount:function(chartContext,tickCount,decimals,axis){var tickObject={};if(!decimals){var onlyDataPoints=this.getOnlyDataPoints(chartContext.options.dataPoints),maxArr=[],_loop9=function(dataKey){if("x"===dataKey)return 1;// continue
var dp=onlyDataPoints.find((function(dp){return dp.key===dataKey}));dp&&dp.length||"y"!==axis?dp&&dp.axes===axis&&maxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(chartContext.data[dataKey])):maxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(chartContext.data[dataKey]))};for(var dataKey in chartContext.data)_loop9(dataKey);var yMax=d3__WEBPACK_IMPORTED_MODULE_42__.max(maxArr);yMax&&tickCount&&yMax<tickCount?yMax<1&&yMax>0?(tickObject["decimal"]=2,tickObject["count"]=tickCount):(tickCount=Math.round(yMax)+1,tickObject["count"]=tickCount):tickObject["count"]=tickCount}return tickObject},prepareAxis:function(chartContext,multiChartKey){var axisOptions=chartContext.options.axis;multiChartKey&&chartContext.options.multichart[multiChartKey]&&!chartContext.Readingdp&&(axisOptions=chartContext.options.multichart[multiChartKey].axis);var c3Axis={};if(c3Axis.rotated=axisOptions.rotated,c3Axis.x={show:axisOptions.x.show,label:axisOptions.x.label,tick:{},height:70},-1===axisOptions.x.datatype.indexOf("number")&&-1===axisOptions.x.datatype.indexOf("decimal")?(chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length||chartContext.Readingdp?c3Axis.x.type="indexed":c3Axis.x.type=-1!==axisOptions.x.datatype.indexOf("date")&&this.periodCheck(chartContext.dateRange)?"timeseries":"category","category"!==c3Axis.x.type&&"indexed"!==c3Axis.x.type||(axisOptions.x.tick.hasOwnProperty("fit")?c3Axis.x.tick.fit=axisOptions.x.tick.fit:chartContext.options&&"scatter"===chartContext.options.type?c3Axis.x.tick.fit=!1:c3Axis.x.tick.fit=!0)):(chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length||axisOptions.x.datatype.indexOf("number")>=0||axisOptions.x.datatype.indexOf("decimal")>=0?c3Axis.x.type="indexed":c3Axis.x.type="category",axisOptions.x.tick.hasOwnProperty("fit")?c3Axis.x.tick.fit=axisOptions.x.tick.fit:chartContext.options&&"scatter"===chartContext.options.type?c3Axis.x.tick.fit=!1:c3Axis.x.tick.fit="indexed"!==c3Axis.x.type),"timeseries"===c3Axis.x.type){var self=this,dateRangeObj=chartContext.dateRange,index=0,perDate=null;if(c3Axis.x.tick.format=function(date){var axisLabel=chartContext.options.isMobile?self.mobileDateFormat(date,dateRangeObj.period,dateRangeObj.rangeType,dateRangeObj):self.newGetDateFormat(date,dateRangeObj.period,dateRangeObj.rangeType,index,perDate);return index++,perDate=date,axisLabel},dateRangeObj.range.domain&&dateRangeObj.range.domain.length<10&&(c3Axis.x.tick.values=dateRangeObj.range.domain),chartContext.options.isMobileMulti&&(axisOptions.x.culling={max:4}),axisOptions.x.culling&&axisOptions.x.culling.max&&chartContext.options.isMobile){var newList=[];if(dateRangeObj.range.domain&&dateRangeObj.range.domain.length<6)newList=dateRangeObj.range.domain;else if(dateRangeObj.range.domain&&7===dateRangeObj.range.domain.length)newList.push(dateRangeObj.range.domain[0]),newList.push(dateRangeObj.range.domain[2]),newList.push(dateRangeObj.range.domain[4]),newList.push(dateRangeObj.range.domain[dateRangeObj.range.domain.length-1]);else if(dateRangeObj.range.domain&&dateRangeObj.range.domain.length>8){for(var split=parseInt(dateRangeObj.range.domain.length/axisOptions.x.culling.max),i=0;i<axisOptions.x.culling.max;i++)newList.push(dateRangeObj.range.domain[i*split]);newList[newList.length-1]!==dateRangeObj.range.domain[dateRangeObj.range.domain.length-1]&&newList.push(dateRangeObj.range.domain[dateRangeObj.range.domain.length-1])}else newList=dateRangeObj.range.domain;c3Axis.x.tick.values=newList}c3Axis.x.tick.fit=!1,
// c3Axis.x.tick.count = 10
c3Axis.x.min=dateRangeObj.range.min,c3Axis.x.max=dateRangeObj.range.max}
// else{
//   if(axisOptions.x.range){
//     c3Axis.x.min = axisOptions.x.range.min
//     c3Axis.x.max = axisOptions.x.range.max
//   }
// }
if(-1===axisOptions.x.datatype.indexOf("number")&&-1===axisOptions.x.datatype.indexOf("decimal")||(null!==axisOptions.x.range.min&&""!==axisOptions.x.range.min&&(c3Axis.x.min=axisOptions.x.range.min),null!==axisOptions.x.range.max&&""!==axisOptions.x.range.max&&(c3Axis.x.max=axisOptions.x.range.max),axisOptions.x.tick.format&&(c3Axis.x.tick.format=axisOptions.x.tick.format)),chartContext.data&&chartContext.data.x&&(chartContext.data.x.length<4&&(c3Axis.x.tick.multiline=!0),chartContext.data.x.length>0&&"timeseries"===c3Axis.x.type)){var _chartContext$dateRan,xData=chartContext.data.x;xData[0]<c3Axis.x.min&&(c3Axis.x.min=xData[0]),xData[xData.length-1]>c3Axis.x.max&&(c3Axis.x.max=xData[xData.length-1]),"monthly"===(null===chartContext||void 0===chartContext||null===(_chartContext$dateRan=chartContext.dateRange)||void 0===_chartContext$dateRan?void 0:_chartContext$dateRan.period)&&(c3Axis.x.tick.culling=!1)}"vertical"===axisOptions.x.tick.direction?(c3Axis.x.tick.rotate=90,c3Axis.x.tick.multiline=!1,c3Axis.x.tick.tooltip=!0):"slanting"===axisOptions.x.tick.direction&&(c3Axis.x.tick.rotate=45,c3Axis.x.tick.multiline=!1,c3Axis.x.tick.tooltip=!0),chartContext.scatterConfig&&(c3Axis.x.tick.count=axisOptions.x.ticks.count,c3Axis.x.tick.format=function(d){if(axisOptions.x.format.decimals)return d3__WEBPACK_IMPORTED_MODULE_42__.format(",."+axisOptions.x.format.decimals+"f")(d);var val=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(Math.round(Math.ceil(100*d)/100));return val})
/* y axis formatting start */,c3Axis.y={},c3Axis.y.show=axisOptions.y.show,c3Axis.y.label={text:axisOptions.y.label.text,position:axisOptions.y.label.position},axisOptions.y.unit&&![""," "].includes(axisOptions.y.unit)&&(c3Axis.y.label.text+=" ("+this.formatUnit(axisOptions.y.unit)+")");var tickCount=this.getTickCount(chartContext,axisOptions.y.ticks.count,axisOptions.y.format.decimals,"y");
/* y axis formatting end */
if(tickCount.decimal&&(axisOptions.y.format.decimals=tickCount.decimal),c3Axis.y.tick={count:tickCount.count?tickCount.count:axisOptions.y.ticks.count,format:function(d){var _axisOptions;if(axisOptions.y.format.decimals)return d3__WEBPACK_IMPORTED_MODULE_42__.format(",."+axisOptions.y.format.decimals+"f")(d);if(null!==(_axisOptions=axisOptions)&&void 0!==_axisOptions&&null!==(_axisOptions=_axisOptions.y)&&void 0!==_axisOptions&&_axisOptions.formatUnit&&"None"!==axisOptions.y.formatUnit){if("M"===axisOptions.y.formatUnit){var _val5=Math.round(Math.round(Math.ceil(100*d)/100)/1e6);return 0!==_val5?_val5+"M":_val5}if("K"===axisOptions.y.formatUnit){var _val6=Math.round(Math.round(Math.ceil(100*d)/100)/1e3);return 0!==_val6?_val6+"K":_val6}if("L"===axisOptions.y.formatUnit){var _val7=Math.round(Math.round(Math.ceil(100*d)/100)/1e5);return 0!==_val7?_val7+"L":_val7}if("C"===axisOptions.y.formatUnit){var _val8=Math.round(Math.round(Math.ceil(100*d)/100)/1e7);return 0!==_val8?_val8+"C":_val8}}var val=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(Math.round(Math.ceil(100*d)/100));return axisOptions.y.format.unit?val+=axisOptions.y.format.unit:chartContext.options.general&&chartContext.options.general.normalizeStack&&(val+="%"),val}
// stepSize: 1,
// culling: {
//   max: 10,
// },
},c3Axis.y.min=axisOptions.y.range.min,axisOptions.y.range.max&&(c3Axis.y.max=axisOptions.y.range.max),c3Axis.y.padding=axisOptions.y.padding,axisOptions.y2){c3Axis.y2={},c3Axis.y2.show=axisOptions.y2.show,c3Axis.y2.label={text:axisOptions.y2.label.text,position:axisOptions.y2.label.position},axisOptions.y2.unit&&![""," "].includes(axisOptions.y2.unit)&&(c3Axis.y2.label.text+=" ("+this.formatUnit(axisOptions.y2.unit)+")");var y2TickCount=this.getTickCount(chartContext,axisOptions.y2.ticks.count,axisOptions.y2.format.decimals,"y2");y2TickCount.decimal&&(axisOptions.y2.format.decimals=y2TickCount.decimal),c3Axis.y2.tick={count:y2TickCount.count?y2TickCount.count:axisOptions.y2.ticks.count,format:function(d){var _axisOptions2;if(axisOptions.y2.format.decimals)return d3__WEBPACK_IMPORTED_MODULE_42__.format(",."+axisOptions.y2.format.decimals+"f")(d);if(null!==(_axisOptions2=axisOptions)&&void 0!==_axisOptions2&&null!==(_axisOptions2=_axisOptions2.y2)&&void 0!==_axisOptions2&&_axisOptions2.formatUnit&&"None"!==axisOptions.y2.formatUnit){if("M"===axisOptions.y2.formatUnit){var _val9=Math.round(Math.round(Math.ceil(100*d)/100)/1e6);return 0!==_val9?_val9+"M":_val9}if("K"===axisOptions.y2.formatUnit){var _val10=Math.round(Math.round(Math.ceil(100*d)/100)/1e3);return 0!==_val10?_val10+"K":_val10}if("L"===axisOptions.y2.formatUnit){var _val11=Math.round(Math.round(Math.ceil(100*d)/100)/1e5);return 0!==_val11?_val11+"L":_val11}if("C"===axisOptions.y2.formatUnit){var _val12=Math.round(Math.round(Math.ceil(100*d)/100)/1e7);return 0!==_val12?_val12+"C":_val12}}var val=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(Math.round(Math.ceil(100*d)/100));return axisOptions.y2.format.unit&&(val+=axisOptions.y2.format.unit),val}},c3Axis.y2.min=axisOptions.y2.range.min,axisOptions.y2.range.max&&(c3Axis.y2.max=axisOptions.y2.range.max),c3Axis.y2.padding=axisOptions.y2.padding}return c3Axis.rotated&&(c3Axis.x.label.position="outer-middle",c3Axis.y.label.position="outer-center",c3Axis.y2.label.position="outer-center"),11===chartContext.options.common.mode&&(c3Axis.y.label.text="Duration (Days)",c3Axis.y.tick.format=function(timeStamp){return src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */.Z.formatTime(timeStamp,!0)}),c3Axis},formatUnit:function(unit){if(unit)switch(unit){case"&deg;C":return"C";case"&deg;F":return"F";case"&#x3BC;V":return"V";case"&#x3BC;A":return"A";case"&#x3BC;W":return"W";case"&#x3BC;Hz":return"Hz";case"&deg;":return"";default:return unit}},mobileDateFormat:function(date,period,rangeType,dateRangeObj){period=period||"high";var mdate=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date);if(rangeType){if("yearly"===period)return mdate.format("YYYY");if("D"===rangeType)return parseInt(dateRangeObj.offset)>1?mdate.format("MMM D"):mdate.format("hh a");if("W"===rangeType){if("high"===period)return mdate.format("ddd");if("hourly"===period)return mdate.format("ddd");if("daily"===period)return mdate.format("ddd");if("weekly"===period)return mdate.format("ddd");if("dayofweek"===period)return mdate.format("ddd")}else if("M"===rangeType){if("high"===period)return mdate.format("MMM D");if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return"W"+mdate.format("WW YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("dayofweek"===period)return mdate.format("ddd")}else if("Y"===rangeType)if("high"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("hourly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("daily"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("weekly"===period)return"W"+mdate.format("WW YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("dayofweek"===period)return mdate.format("ddd")}else if("R"===rangeType){if("high"===period)return mdate.format("MMM D");if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return mdate.format("MMM D");if("monthly"===period)return mdate.format("MMM");if("dayofweek"===period)return mdate.format("ddd")}else if("Q"===rangeType){if("high"===period)return mdate.format("MMM D");if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return mdate.format("MMM D");if("monthly"===period)return mdate.format("MMM");if("dayofweek"===period)return mdate.format("ddd")}}return date.getMilliseconds()?mdate.format(".SSS"):date.getSeconds()?mdate.format(":ss"):date.getMinutes()?mdate.format("hh:mm"):date.getHours()?mdate.format("hh a"):date.getDay()&&1!==date.getDate()||1!==date.getDate()?mdate.format("MMM D"):date.getMonth()?mdate.format("MMM"):date.getYear()?mdate.format("MMM YYYY"):mdate.format("MMM D, YYYY")},getAggregate:function(childAggregate,isParent){var formatHierarchy=src_newcharts_model_newDateModel__WEBPACK_IMPORTED_MODULE_43__/* ["default"] */.Z.formatHierarchy,index=null;return formatHierarchy.forEach((function(element){element.label===childAggregate.trim().toLowerCase()&&(index=formatHierarchy.indexOf(element))})),isParent?formatHierarchy[index+1]:formatHierarchy[index]},getNewDateFormat:function(date,dateRangeObject,formatString,tickCount){var parentAggregate=null,aggregateObject=null,formatHierarchy=src_newcharts_model_newDateModel__WEBPACK_IMPORTED_MODULE_43__/* ["default"] */.Z.formatHierarchy;for(var index in formatHierarchy){if(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.min,formatString).isSame(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.max,formatString),formatHierarchy[index].momentLabel)){var aggregate=this.getAggregate(dateRangeObject.period,!1);return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(aggregate.formatString)}var _diff=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.max,formatString).diff(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.min,formatString),formatHierarchy[index].momentLabel,!0);if(_diff<formatHierarchy[index].maxLimit){_diff<tickCount?0===index?(aggregateObject=formatHierarchy[index],parentAggregate=formatHierarchy[formatHierarchy.indexOf(aggregateObject)+1]):(parentAggregate=formatHierarchy[index],aggregateObject=formatHierarchy[formatHierarchy.indexOf(parentAggregate)-1]):(aggregateObject=formatHierarchy[index],parentAggregate=formatHierarchy[formatHierarchy.indexOf(aggregateObject)+1]);break}"yearly"===formatHierarchy[index].label&&(parentAggregate=formatHierarchy[index],aggregateObject=formatHierarchy[formatHierarchy.indexOf(parentAggregate)-1])}var diff=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.max,formatString).diff(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(dateRangeObject.range.min,formatString),parentAggregate.momentLabel,!0);if(diff<=parentAggregate.maxLimit&&diff<tickCount)return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(aggregateObject.formatString);if(diff<=parentAggregate.maxLimit&&diff>tickCount)return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(parentAggregate.formatString);var totalLabel=aggregateObject.formatString+" "+parentAggregate.formatString;return moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date,formatString).format(totalLabel)},newGetDateFormat:function(date,period,rangeType,index,perDate){var mdate=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date);if(rangeType&&period){if("yearly"===period)return mdate.format("YYYY");if("D"===rangeType){if("hourly"===period)return mdate.format("hh a")}else if("W"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return mdate.format("ddd")}else{if("daily"===period)return mdate.format("ddd");if("dayofweek"===period)return mdate.format("ddd")}else if("M"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D")}else{if("daily"===period)return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}else if("Y"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDay()&&1!==date.getDate())return void 0!==index&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if(1!==date.getDate())return void 0!==index&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("daily"===period){if(date.getDay()&&1!==date.getDate())return void 0!==index&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if(1!==date.getDate())return mdate.format("D")+"\n"+mdate.format("MMM");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("weekly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("quarterly"===period)return mdate.format("[Q]Q YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}}else if("Q"===rangeType){if("hourly"===period)return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if("daily"===period)return void 0!==index&&0===index||1===date.getDate()?mdate.format("D")+"\n"+mdate.format("MMM"):mdate.format("D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("quarterly"===period)return mdate.format("[Q]Q YYYY");if("monthly"===period)return mdate.format("MMM YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM YYYY")}}return date.getMilliseconds()?mdate.format(".SSS"):date.getSeconds()?mdate.format(":ss"):date.getMinutes()?mdate.format("hh:mm"):date.getHours()?mdate.format("hh a"):date.getDay()&&1!==date.getDate()&&void 0!==(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(index)&&0===index?mdate.format("D")+"\n"+mdate.format("MMM"):date.getDay()&&1===date.getDate()?"monthly"===period?mdate.format("MMM"):mdate.format("D")+"\n"+mdate.format("MMM"):date.getDay()&&1!==date.getDate()&&perDate&&perDate!==date||0===date.getDay()&&1!==date.getDate()&&void 0!==(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(index)&&index>0&&"D"===rangeType?mdate.format("D"):1!==date.getDate()||date.getMonth()&&rangeType&&"D"===rangeType?mdate.format("D")+"\n"+mdate.format("MMM"):date.getMonth()?mdate.format("MMM"):date.getYear()?mdate.format("MMM YYYY"):mdate.format("MMM D, YYYY")},getDateFormat:function(date,period,rangeType){var mdate=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(date);if(rangeType&&period){if("yearly"===period)return mdate.format("YYYY");if("D"===rangeType){if("hourly"===period)return mdate.format("hh a")}else if("W"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return mdate.format("ddd")}else{if("daily"===period)return mdate.format("ddd");if("dayofweek"===period)return mdate.format("ddd")}else if("M"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDate())return mdate.format("MMM D")}else{if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}else if("Y"===rangeType)if("hourly"===period){if(date.getHours())return mdate.format("hh a");if(date.getDay()&&1!==date.getDate())return mdate.format("MMM D");if(1!==date.getDate())return mdate.format("MMM D");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("daily"===period){if(date.getDay()&&1!==date.getDate())return mdate.format("MMM D");if(1!==date.getDate())return mdate.format("MMM D");if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else if("weekly"===period){
// if (date.getDate() !== 1) {
//   return 'W' + mdate.format('WW YYYY')
// }
if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("quarterly"===period)return mdate.format("[Q]Q YYYY");if("monthly"===period){if(date.getMonth())return mdate.format("MMM");if(date.getYear())return mdate.format("MMM YYYY")}else{if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM")}}else if("Q"===rangeType){if("hourly"===period)return mdate.format("MMM D");if("daily"===period)return mdate.format("MMM D");if("weekly"===period)return"W"+mdate.format("ww YYYY");if("monthly"===period)return mdate.format("MMM YYYY");if("dayofweek"===period)return mdate.format("ddd");if("dayofmonth"===period)return mdate.format("DD");if("weekofyear"===period)return"W"+mdate.format("WW");if("monthofyear"===period)return mdate.format("MMM YYYY")}}return date.getMilliseconds()?mdate.format(".SSS"):date.getSeconds()?mdate.format(":ss"):date.getMinutes()?mdate.format("hh:mm"):date.getHours()?mdate.format("hh a"):date.getDay()&&1!==date.getDate()||1!==date.getDate()?mdate.format("MMM D"):date.getMonth()?mdate.format("MMM"):date.getYear()?mdate.format("MMM YYYY"):mdate.format("MMM D, YYYY")},getMatchingAlarmRegion:function(chartContext,dateStr){var date=new Date(dateStr);if(chartContext.alarms){var _step41,_iterator41=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(chartContext.alarms.regions);try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var region=_step41.value,startDate=new Date(region.start),endDate=new Date(region.end);if(date>=startDate&&date<endDate)return region}}catch(err){_iterator41.e(err)}finally{_iterator41.f()}}return null},getBooleanValue:function(chartContext,date,dataPointKey){
// boolean tooltip fix
if(chartContext.booleanData&&chartContext.booleanData[dataPointKey]){var _step42,booleanData=chartContext.booleanData[dataPointKey],_iterator42=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(booleanData);try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var region=_step42.value,startDate=new Date(region.start),endDate=new Date(region.end);if(date>=startDate&&date<endDate)return region.value}}catch(err){_iterator42.e(err)}finally{_iterator42.f()}}return"---"},getLabelWithCaps:function(name){var firstChar=name.charAt(0);return firstChar=firstChar.toUpperCase(),name=name.toLowerCase(),name=name.slice(1),name=firstChar+name,name},prepareTooltip:function(chartContext){var self=this,tooltipOptions={show:!0,onhide:function(){if(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip(),chartContext.tooltipHideCallback)return chartContext.tooltipHideCallback(),null},contents:function(d,defaultTitleFormat,defaultValueFormat,color){if(chartContext.options.regressionConfig&&0!==chartContext.options.regressionConfig.length&&d&&d.length){var regressionPoint=d.find((function(e){return e.id.endsWith("regr")}));if(regressionPoint)return null}var tooltipData=[],alarms=[],tooltipTitle=null,isSingleMode=!1,baselinePoints=chartContext.options.dataPoints.filter((function(point){return point.isBaseLine})),diffMap={};if(baselinePoints&&baselinePoints.length){var _step43,_iterator43=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(baselinePoints);try{var _loop10=function(){var bd=_step43.value,baseval=d.find((function(d1){return d1.id===bd.key})),val=d.find((function(d1){return d1.id===bd.dpAlias}));if(baseval&&null!==baseval.value&&val&&null!==val.value){var diff=(val.value-baseval.value)/baseval.value*100;diffMap[bd.dpAlias]=diff}};for(_iterator43.s();!(_step43=_iterator43.n()).done;)_loop10()}catch(err){_iterator43.e(err)}finally{_iterator43.f()}}var groupTotal=d.find((function(d1){return"group_total"===d1.id})),groupPercentMap={},groupTotalUnit=null;if(groupTotal&&groupTotal.value){var _step44,_iterator44=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d);try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var e=_step44.value;if("group_total"!==e.id){groupTotalUnit=chartContext.unitMap[e.id];var diff=e.value/groupTotal.value*100;groupPercentMap[e.id]=diff}}}catch(err){_iterator44.e(err)}finally{_iterator44.f()}}var _step45,_iterator45=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(d);try{var _loop11=function(){var e=_step45.value;if(chartContext.options.isDepreciationCostTrend&&"Current Price"===e.id)return 0;// continue
if(null!==e&&!e.id.endsWith("TrendLine")){var _unit6=chartContext.xValueMode?chartContext.options.dataPoints[0].unitStr:chartContext.unitMap[e.id],_enumMap5=chartContext.enumMap[e.id];if(!chartContext.options.tooltip.showNullValues&&null===e.value)return 0;// continue
var _val13=null===e.value?0:e.value,dataPoints=chartContext.options.dataPoints,_dataPoint=dataPoints.filter((function(point){return point.key===e.id}));
// fetch data Point from chartContext
if(0!==_dataPoint.length&&_dataPoint[0].customFormat)_dataPoint.pointCustomization&&(_val13=_val13&&_val13.y?_val13.y:_val13),_val13=src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */.Z.getFormattedValue(_val13,null,_dataPoint[0].customFormat);else if(11!==chartContext.options.common.mode)if(_val13&&_val13.y&&(_val13=_val13&&_val13.y?_val13.y:_val13),Number.isInteger(_val13))_val13=d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(_val13);else if(Array.isArray(_val13)){var _step48,_iterator48=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(_val13);try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var value=_step48.value;value=Number.isInteger(value)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(value):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(value)}}catch(err){_iterator48.e(err)}finally{_iterator48.f()}}else _val13=d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(_val13);var valueStr=null,valueUnit=null;if(_dataPoint.length&&"rangeGroup"===_dataPoint[0].type&&Array.isArray(_val13))for(var ranges=["max","avg","min"],rangeValues=[],i=ranges.length-1;i>=0;i--){var v=_val13[i];v=ranges[i]+": "+v,_unit6&&(v=v+" "+_unit6),rangeValues.push(v),valueStr=rangeValues.join()}else"$"===_unit6?valueStr=_unit6+_val13:["days","hours","minutes","seconds","milliseconds"].includes(_unit6)?valueStr=(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_val13,_unit6,_dataPoint.length?_dataPoint[0].convertTounit:null,void 0,_unit6,chartContext.options.defaultDurationUnit):(valueStr=_val13,valueUnit=_unit6);_enumMap5&&_enumMap5[e.value]&&(valueStr=_enumMap5[e.value]);var label=e.name,_diff2=diffMap?diffMap[e.id]:null;"group_total"===label&&(label=chartContext.options.bar.groupTotalLabel||"Group Total",valueUnit=groupTotalUnit);var percent=null;if(groupPercentMap&&groupPercentMap[e.id]&&(percent=groupPercentMap[e.id]),chartContext.xValueMode){var percentage=null;try{if(chartContext.xActualDataType&&-1!==chartContext.xActualDataType.indexOf("date")&&chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format){var _dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip;label=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(e.name,chartContext.options.axis.x.time.format.format).format(_dateFormat)}else label=chartContext.xLabelMap&&chartContext.xLabelMap[e.name]?chartContext.xLabelMap[e.name]:e.name;var calculatePercent=function(value,data){var total=d3__WEBPACK_IMPORTED_MODULE_42__.sum(data),percent=total?value/total*100:0;return d3__WEBPACK_IMPORTED_MODULE_42__.format(".1f")(percent)};percentage=calculatePercent(e.value,chartContext.data[Object.keys(chartContext.data).filter((function(k){return"x"!==k}))[0]])}catch(error){label=chartContext.xLabelMap&&chartContext.xLabelMap[e.name]?chartContext.xLabelMap[e.name]:e.name}tooltipTitle=label,tooltipData.push({label:chartContext.options.dataPoints&&chartContext.options.dataPoints.length?chartContext.options.dataPoints[0].label:chartContext.options.axis.y.label.text,value:valueStr,unit:valueUnit,color:color(e),key:e.id}),percentage&&(isSingleMode=!0,tooltipData.push({label:"Percentage",value:percentage,unit:"%",color:color(e),key:e.id}))}else 11===chartContext.options.common.mode?tooltipData.push({label:"Duration",value:src_components_mixins_NumberFormatHelper__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */.Z.formatTime(valueStr),color:color(e),key:e.id}):chartContext.scatterConfig||(chartContext.specialScatter&&(label=chartContext.options.axis.y.label.text),tooltipData.push({label:label,value:valueStr,unit:valueUnit,color:color(e),diff:_diff2,percent:percent,key:e.id}))}};for(_iterator45.s();!(_step45=_iterator45.n()).done;)_loop11()}catch(err){_iterator45.e(err)}finally{_iterator45.f()}if(chartContext.scatterConfig){var _step46,relatedpoints=chartContext.options.dataPoints.filter((function(dp){return dp.key.split("_").length&&dp.key.split("_")[0]===d[0].id})),_iterator46=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(relatedpoints);try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var dataPoint=_step46.value,dJson=chartContext.data[dataPoint.key],unit=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],enumMap=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],actualVal=null===dJson[d[0].index]?0:dJson[d[0].index],tVal=null;tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dataPoint.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:"");var val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]),dJson&&tooltipData.push({label:dataPoint.name,value:tVal,key:dataPoint.id?dataPoint.id:dataPoint.key})}}catch(err){_iterator46.e(err)}finally{_iterator46.f()}}var dateFormat="LLL";if(chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip),(chartContext.options.regressionConfig&&0!=chartContext.options.regressionConfig.length||chartContext.scatterConfig)&&chartContext.options.timeValues){dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip;var time=null;dateFormat&&(time=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(chartContext.options.timeValues[d[0].index]).format(chartContext.options.axis.x.time.format.tooltip),tooltipData.push({label:"Time",value:time}))}if("object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d[0].x)){tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d[0].x).format(dateFormat);var matchingAlarmRegion=self.getMatchingAlarmRegion(chartContext,d[0].x);if(matchingAlarmRegion&&matchingAlarmRegion.alarms){var _step47,_iterator47=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(matchingAlarmRegion.alarms);try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var alarm=_step47.value,severity=alarm.severity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.severity.id):null,isCleared=!1;severity&&"clear"===severity.severity.toLowerCase()&&(isCleared=!0,severity=alarm.previousSeverity?vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getAlarmSeverity(alarm.previousSeverity.id):null);var message=void 0,subject=void 0;vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.isLicenseEnabled("NEW_ALARMS")?(message=alarm.alarm.description||"",subject=alarm.alarm&&alarm.alarm.subject?alarm.alarm.subject:""):(message=alarm.problem||alarm.readingMessage,subject=alarm.subject||""),alarms.push({name:subject,message:message,severity:severity,isCleared:isCleared,count:matchingAlarmRegion.count})}}catch(err){_iterator47.e(err)}finally{_iterator47.f()}}}else"number"!==typeof d[0].x||chartContext.scatterConfig||(tooltipTitle=chartContext.data.x[d[0].x]);if(tooltipTitle||(tooltipTitle=d[0].x),chartContext.Readingdp){d[0].x&&(tooltipTitle=d[0].x);var _unit5=chartContext.Readingdp.yAxis&&chartContext.Readingdp.yAxis.unitStr?chartContext.Readingdp.yAxis.unitStr:"";tooltipTitle=tooltipTitle+" "+_unit5}if(!chartContext.options.isSystemGroup&&"pie"!=chartContext.options.type&&"donut"!=chartContext.options.type&&"bubble"!=chartContext.options.type&&"scatter"!=chartContext.options.type&&"gauge"!=chartContext.options.type){var newToolTipData=[];chartContext.options.dataPoints.forEach((function(dt){if("datapoint"===dt.type){var x=tooltipData.findIndex((function(z){return z.key===dt.key}));-1!==x&&newToolTipData.push(tooltipData[x])}else if("group"===dt.type){var newData={label:dt.label,children:[],is_group:!0};dt.children.forEach((function(ch){var x=tooltipData.findIndex((function(z){return z.key===ch.key}));-1!==x&&newData.children.push(tooltipData[x])})),newData.children.length>0&&newToolTipData.push(newData)}})),tooltipData=newToolTipData}
// if (d[0].id === d[0].id.toLowerCase()) {
//   tooltipData = [
//     {
//       label: 'X value',
//       value: d[0].x,
//     },
//     {
//       label: 'Y value',
//       value: d[0].value,
//     },
//   ]
//   tooltipTitle = d[0].name
// }
if(1===d.length||isSingleMode){var _chartContext$options,tlData=[];chartContext.options.axis.x.label.text&&tooltipTitle&&tlData.push({label:chartContext.options.axis.x.label.text,value:tooltipTitle}),tlData.push.apply(tlData,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(tooltipData));var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},data:tlData,color:tlData[tlData.length-1].color,alarms:alarms.showTimeOnly?null:alarms,count:alarms.length?alarms[0].count:0,dataPoint:chartContext.options.dataPoints};return null!==(_chartContext$options=chartContext.options)&&void 0!==_chartContext$options&&_chartContext$options.tooltip.compare_indicator&&(tooltipConfig.compare_indicator=chartContext.options.tooltip.compare_indicator),chartContext.options.axis.x.label.text||(tooltipConfig.title=tooltipTitle),(chartContext.specialScatter||chartContext.scatterConfig)&&(tooltipConfig.title=d[0].name),chartContext.tooltipCallback?(chartContext.tooltipCallback(d,tooltipConfig,tooltipTitle),null):(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig),null)}var _chartContext$options2,_tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,alarms:alarms.showTimeOnly?null:alarms,count:alarms.length?alarms[0].count:0,data:tooltipData,dataPoint:chartContext.options.dataPoints};return null!==(_chartContext$options2=chartContext.options)&&void 0!==_chartContext$options2&&null!==(_chartContext$options2=_chartContext$options2.tooltip)&&void 0!==_chartContext$options2&&_chartContext$options2.compare_indicator&&(_tooltipConfig.compare_indicator=chartContext.options.tooltip.compare_indicator),chartContext.tooltipCallback?(chartContext.tooltipCallback(d,_tooltipConfig,tooltipTitle),null):(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(_tooltipConfig),null)}};return"asc"!==chartContext.options.tooltip.sortOrder&&"desc"!==chartContext.options.tooltip.sortOrder||(tooltipOptions.order=chartContext.options.tooltip.sortOrder),chartContext.scatterConfig&&(tooltipOptions["grouped"]=!1),tooltipOptions},prepareMultichartTooltip:function(chartContext){var self=this,tooltipOptions={show:!0,linked:!chartContext.scatterConfig&&{name:chartContext.multichartUniqueKey},onshow:function(){chartContext.hoveringChart||(chartContext.hoveringChart=null)},onhide:function(){chartContext.hoveringChart=null,_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()},contents:function(d){if(chartContext.hoveringChart){if(!chartContext.options.isMobile)return null}else chartContext.hoveringChart=d[0].id;var _step49,tooltipData=[],_iterator49=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$helpers.getDataPoints(chartContext.options.dataPoints,[1,2,4,6],!0));try{var _loop12=function(){var dataPoint=_step49.value;if(!chartContext.scatterConfig||d[0].id===dataPoint.key)if(chartContext.options.isGroupedByTime){var columns=[],_children=[];if("datapoint"===dataPoint.type||"rangeGroup"===dataPoint.type)columns=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===dataPoint.key}));else if(dataPoint.children&&dataPoint.children.length){var _step51,_iterator51=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{var _loop13=function(){var child=_step51.value,col=Object.keys(chartContext.options.timeGroupOptions).filter((function(k){return k.split("_")[0]===child.key}));columns=columns.concat(col)};for(_iterator51.s();!(_step51=_iterator51.n()).done;)_loop13()}catch(err){_iterator51.e(err)}finally{_iterator51.f()}}var _step52,_iterator52=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(columns);try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var column=_step52.value,_dJson6=chartContext.data[column],_unit8=chartContext.unitMap[column.split("_")[0]],_actualVal6=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:null===_dJson6[d[0].index]?0:_dJson6[d[0].index],_tVal6=["days","hours","minutes","seconds","milliseconds"].includes(_unit8)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal6,_unit8,dataPoint.convertTounit):("$"===_unit8?_unit8+" ":"")+_actualVal6+(_unit8&&"$"!==_unit8?" "+_unit8:""),_tRawVal=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:_dJson6[d[0].index];_dJson6&&_children.push({key:column,rawValue:_tRawVal,rawunit:_unit8,label:chartContext.options.timeGroupOptions[column].name,value:_tVal6,color:chartContext.options.timeGroupOptions[column].color})}}catch(err){_iterator52.e(err)}finally{_iterator52.f()}tooltipData.push({label:dataPoint.label,is_group:!0,children:_children})}else if("group"===dataPoint.type){if(dataPoint.children){var _step50,children=[],_iterator50=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(dataPoint.children);try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var dp=_step50.value;if(dp.visible){var dJson=chartContext.data["x"===dp.axes?"x":dp.key],unit=chartContext.unitMap[dp.dpKey||dp.key],enumMap=chartContext.enumMap[dp.dpKey||dp.key],actualVal=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:null===dJson[d[0].index]?0:dJson[d[0].index];"BOOLEAN"!==dp.dataType&&"ENUM"!==dp.dataType||(actualVal=self.getBooleanValue(chartContext,d[0].x,dp.key));var tVal=["days","hours","minutes","seconds","milliseconds"].includes(unit)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(actualVal,unit,dp.convertTounit):("$"===unit?unit+" ":"")+actualVal+(unit&&"$"!==unit?" "+unit:""),val=actualVal;enumMap&&enumMap[val]&&(tVal=enumMap[val]);var tRawVal=enumMap&&enumMap[val]?enumMap[val]:dJson[d[0].index];dJson&&children.push({key:dp.key,rawValue:tRawVal,rawunit:unit,label:dp.label,value:tVal,color:dp.color})}}}catch(err){_iterator50.e(err)}finally{_iterator50.f()}children.length&&tooltipData.push({label:dataPoint.label,is_group:!0,children:children})}}else if(dataPoint.visible){var _dJson5=chartContext.data[dataPoint.key],_unit7=chartContext.unitMap[dataPoint.dpKey||dataPoint.key],_enumMap6=chartContext.enumMap[dataPoint.dpKey||dataPoint.key],_actualVal5=chartContext.scatterConfig?d[0].value&&d[0].value.y?d[0].value.y:d[0].value:null===_dJson5[d[0].index]?0:_dJson5[d[0].index];"BOOLEAN"!==dataPoint.dataType&&"ENUM"!==dataPoint.dataType||(_actualVal5=self.getBooleanValue(chartContext,d[0].x,dataPoint.key));var _tVal5=null;if("rangeGroup"===dataPoint.type){var range=["max","avg","min"];_tVal5||(_tVal5=[]);for(var i=range.length-1;i>=0;i--){var finalVal=range[i]+": "+_dJson5[d[0].index][i]+(_unit7?" "+_unit7:"");_tVal5.push(finalVal)}_tVal5=_tVal5.join(",")}else{_tVal5=["days","hours","minutes","seconds","milliseconds"].includes(_unit7)?(0,charts_helpers_formatter__WEBPACK_IMPORTED_MODULE_45__/* .formatDuration */.LU)(_actualVal5,_unit7,dataPoint.convertTounit):("$"===_unit7?_unit7+" ":"")+_actualVal5+(_unit7&&"$"!==_unit7?" "+_unit7:"");var _val14=_actualVal5;_enumMap6&&_enumMap6[_val14]&&(_tVal5=_enumMap6[_val14])}_dJson5&&tooltipData.push({label:dataPoint.label,value:_tVal5,color:dataPoint.color})}};for(_iterator49.s();!(_step49=_iterator49.n()).done;)_loop12()}catch(err){_iterator49.e(err)}finally{_iterator49.f()}var dateFormat="LLL";chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format&&(dateFormat=chartContext.options.axis.x.time&&chartContext.options.axis.x.time.format.tooltip);var tooltipTitle=d[0].x;"object"===(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(d[0].x)?tooltipTitle=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d[0].x).format(dateFormat):"number"!==typeof d[0].x||chartContext.scatterConfig||(tooltipTitle=chartContext.data.x[d[0].x]);var tooltipConfig={position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},title:tooltipTitle,mode:1,data:tooltipData,dataPoint:chartContext.options.dataPoints};return chartContext.tooltipCallback?(chartContext.tooltipCallback(d,tooltipConfig,tooltipTitle),null):(_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart(tooltipConfig),null)}};return chartContext.scatterConfig&&(tooltipOptions["grouped"]=!1),tooltipOptions},prepareColorPalette:function(){},getTitleList:function(chartCore,chartContext,params){var data=chartCore,timeScale=d3__WEBPACK_IMPORTED_MODULE_42__.scaleTime().domain([new Date(data.orgXDomain[0]),new Date(data.orgXDomain[1])]).range(chartCore.xAxis.config.range),d={start:params.regions.length?params.regions[0].start:null,end:params.regions.length?params.regions[0].end:null},regionsTitles=[{title:"BASELINE PERIOD",startWidth:data.xMin,endWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),diff:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat))-data.xMin,key:"FIRST",margin:data.margin},{title:"ECM",startWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),endWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat)),diff:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat))-timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.start,chartContext.options.xFormat)),key:"MID",margin:data.margin},{title:"REPORTING PERIOD",startWidth:timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat)),endWidth:data.xMax,diff:data.xMax-timeScale(moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(d.end,chartContext.options.xFormat)),key:"LAST",margin:data.margin}];chartContext.regionsTitles=regionsTitles},applyDefaultOptions:function(chartContext,params){var self=this;if("timeseries"!==params.axis.x.type||params.data.booleanChart||params.data.enumChart)params.zoom={enabled:!1};else{params.zoom={enabled:{type:"drag"}};var lastTime=chartContext.data["x"][chartContext.data["x"].length-1];lastTime=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(lastTime).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).valueOf();var currentTime=moment_timezone__WEBPACK_IMPORTED_MODULE_39___default()(new Date).tz(vue__WEBPACK_IMPORTED_MODULE_50__["default"].prototype.$timezone).valueOf();(!chartContext.data.x.length||lastTime<=currentTime)&&(params.zoom={enabled:{type:"drag"}})}params.onzoom=function(){},params.oninit=function(){};var isToggle=!1;params.onrendered=function(){try{chartContext.options.diffChartConfig&&Object.keys(chartContext.options.diffChartConfig).length>1&&(params.regions&&self.getTitleList(this,chartContext,params),chartContext.options.diffChartConfig&&self.renderDiffPath(this,chartContext,params,chartContext.options.diffChartConfig)),chartContext.options.intersections&&chartContext.options.intersections.length&&self.drawIntersections(this,chartContext);var yAxis=null,y2Axis=null;if(params.key&&chartContext.options.multichart[params.key]?(
// multichart case
yAxis=chartContext.options.multichart[params.key].axis.y,y2Axis=chartContext.options.multichart[params.key].axis.y2):(yAxis=chartContext.options.axis.y,y2Axis=chartContext.options.axis.y2),yAxis&&this.axes.y&&this.axes.y.select("text")){var textWidth=this.axes.y.select("text").node().getComputedTextLength(),text=this.axes.y.select("text").text();if(this.height<textWidth){var widthPerChar=textWidth/text.length,maxChar=this.height/widthPerChar;if(maxChar=Math.floor(maxChar)-1,text.length>maxChar){var diff=text.length-yAxis.label.text.length,trimmedText=yAxis.label.text.substring(0,maxChar-diff)+"..";yAxis.unit&&(trimmedText+=" ("+yAxis.unit+")"),this.axes.y.select("text").text(trimmedText),this.axes.y.select("text").append("svg:title").text((function(){return text}))}}}if(y2Axis&&this.axes.y2&&this.axes.y2.select("text")){var _textWidth=this.axes.y2.select("text").node().getComputedTextLength(),_text=this.axes.y2.select("text").text();if(this.height<_textWidth){var _widthPerChar=_textWidth/_text.length,_maxChar=this.height/_widthPerChar;if(_maxChar=Math.floor(_maxChar)-1,_text.length>_maxChar){var _diff3=_text.length-y2Axis.label.text.length,_trimmedText=y2Axis.label.text.substring(0,_maxChar-_diff3)+"..";y2Axis.unit&&(_trimmedText+=" ("+y2Axis.unit+")"),this.axes.y2.select("text").text(_trimmedText),this.axes.y2.select("text").append("svg:title").text((function(){return _text}))}}}if(this.arcs.select(".bb-chart-arcs-title").selectAll("tspan").attr("dy","15"),this.arcs.select(".bb-chart-arcs-title").select("tspan").attr("dy","-10"),isToggle?isToggle=!1:self.applyGroupTotalBar.bind(this,chartContext)(),"histogram"===chartContext.options.type&&!(chartContext.options.dataPoints.length>1)&&!(chartContext.options.dataPoints[0].groupBy.length>0)){var noOfBars=params.data.json.x.length,barParams=[];if(chartContext.options.axis.rotated)for(var j=1;j<noOfBars;j++){var barStart=parseInt(this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+(j-1).toString()).node().getAttribute("d").split(",")[1].split(" ")[1].split("V")[1]);barParams=[];var barStartNext=this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+j.toString()).node().getAttribute("d").split(",");barParams.push(barStartNext[0]),barParams=barParams.concat(barStartNext[1].split(" "));var level1=barParams[1].split("H"),changedValue=barStart+1+"H"+level1[1];barParams[1]=changedValue,barParams[1]=barParams.slice(0,2).join(","),this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+j.toString()).attr("d",barParams.splice(1).join(" "))}else for(var i=1;i<noOfBars;i++){var _barStart=parseInt(this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+(i-1).toString()).node().getAttribute("d").split(",")[1].split(" ")[1].split("H")[1]),_barStartNext=this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+i.toString()).node().getAttribute("d").split(","),check="M"+(_barStart+1).toString();_barStartNext[0]=check,this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar-"+i.toString()).attr("d",_barStartNext.join(","))}}
// eslint-disable-next-line no-empty
}catch(error){}},params.ontoggle=function(){isToggle=!0},params.legend={show:!1},params.bar={padding:1,width:{ratio:"histogram"!==chartContext.options.type||chartContext.options.dataPoints.length>1||chartContext.options.dataPoints[0].groupBy.length>0?.5:1}},("histogram"!=chartContext.options.type||chartContext.options.dataPoints.length>1||chartContext.options.dataPoints[0].groupBy.length>0)&&(params.bar.width.max=75),chartContext.options.bar&&chartContext.options.bar.radius&&(params.bar.radius={ratio:.1*chartContext.options.bar.radius}),chartContext.options.bar&&chartContext.options.bar.padding&&(params.bar.padding=chartContext.options.bar.padding);var areaOptions={};if(chartContext.options.area.linearGradient&&(areaOptions.linearGradient=!0),chartContext.options.area.above&&(areaOptions.above=!0),Object.keys(areaOptions).length&&(params.area=areaOptions),chartContext.options.donut.labelType&&"percentage"!==chartContext.options.donut.labelType&&(params.donut={label:{format:function(d){return"none"===chartContext.options.donut.labelType?"":Number.isInteger(d)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(d):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(d)}}},params.pie={label:{threshold:.01,format:function(d){return"none"===chartContext.options.donut.labelType?"":Number.isInteger(d)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(d):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(d)}}}),chartContext.options.donut.centerText.primaryText||chartContext.options.donut.centerText.secondaryText){var totalValList=[];for(var key in params.data.json)"x"===key||params.data.hide&&-1!==params.data.hide.indexOf(key)||totalValList.push(d3__WEBPACK_IMPORTED_MODULE_42__.sum(params.data.json[key]));var fieldMap={_sum:d3__WEBPACK_IMPORTED_MODULE_42__.sum(totalValList),_min:d3__WEBPACK_IMPORTED_MODULE_42__.min(totalValList),_max:d3__WEBPACK_IMPORTED_MODULE_42__.max(totalValList),_avg:d3__WEBPACK_IMPORTED_MODULE_42__.mean(totalValList)},unit=chartContext.xValueMode&&chartContext.options.dataPoints.length?chartContext.options.dataPoints[0].unitStr:null,donutTitle="";if(chartContext.options.donut.centerText.primaryText){var primaryText=chartContext.options.donut.centerText.primaryText;for(var fl in fieldMap){var fieldVal=fieldMap[fl];chartContext.options.donut.centerText.primaryRoundOff&&(fieldVal=parseInt(fieldVal)),fieldVal=chartContext.options.donut.centerText.primaryUnit?this.formatStringWithUnit(fieldVal,chartContext.options.donut.centerText.primaryUnit):unit?this.formatDurationToHighestUnit(fieldVal,unit):this.formatNumber(fieldVal),primaryText=primaryText.replace(new RegExp(fl,"g"),fieldVal)}donutTitle+=primaryText}if(donutTitle+="\n",donutTitle+=" ",donutTitle+="\n",donutTitle+=" ",donutTitle+="\n",chartContext.options.donut.centerText.secondaryText){var secondaryText=chartContext.options.donut.centerText.secondaryText;for(var _fl in fieldMap){var _fieldVal=fieldMap[_fl];chartContext.options.donut.centerText.secondaryRoundOff&&(_fieldVal=parseInt(_fieldVal)),_fieldVal=chartContext.options.donut.centerText.secondaryUnit?this.formatStringWithUnit(_fieldVal,chartContext.options.donut.centerText.secondaryUnit):unit?this.formatDurationToHighestUnit(_fieldVal,unit):this.formatNumber(_fieldVal),secondaryText=secondaryText.replace(new RegExp(_fl,"g"),_fieldVal)}donutTitle+=secondaryText}params.donut||(params.donut={}),params.donut.title=donutTitle}chartContext.options.legend.show&&"right"===chartContext.options.legend.position&&(params.axis.y2.show||(params.padding.right=10))},applyGroupTotalBar:function(chartContext){try{if("bar"===chartContext.options.type&&chartContext.options.bar.showGroupTotal&&this.data.targets.length>1){var singleBarWidth=this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").select(".bb-chart-bar").select(".bb-bars").select(".bb-bar").node().getBoundingClientRect().width,noOfBars=Object.keys(chartContext.data).length-1;// exluding x
noOfBars-=this.hiddenTargetIds.length,this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").selectAll(".bb-chart-bar").style("transform","translateX("+singleBarWidth+"px)");var newWidth=singleBarWidth*noOfBars+noOfBars;this.svg.select("g").select(".bb-chart").select(".bb-chart-bars").selectAll(".bb-bars-group-total .bb-shape").attr("d",(function(){var existsD=this.getAttribute("d"),hStr=existsD.match(/H[0-9\.]+/g)+"",newHStr="H"+Math.round(parseFloat(hStr.replace("H",""))+(newWidth-singleBarWidth)),newD=existsD.replace(hStr,newHStr);return newD})).style("transform","translateX(-"+newWidth+"px)")}
// eslint-disable-next-line no-empty
}catch(error){}},applyNiceTickMarks:function(c3Params,chartContext){try{var yMaxArr=[],y2MaxArr=[],groupedKeys=[];if(c3Params.data.groups&&c3Params.data.groups.length){var _step53,_iterator53=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(c3Params.data.groups);try{var _loop14=function(){var _step54,grp=_step53.value,grpData=[],_iterator54=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(grp);try{var _loop15=function(){var g=_step54.value;groupedKeys.push(g);for(var _loop16=function(i){if(c3Params.data.json[g][i]){var getGroupData=function(){var y=c3Params.data.json[g][i].y,d=c3Params.data.json[g][i];return y?grpData[i]>=parseFloat(y)?grpData[i]:parseFloat(y):grpData[i]>=parseFloat(d)?grpData[i]:parseFloat(d)};grpData[i]&&(grpData[i]=getGroupData()),grpData.push(c3Params.data.json[g][i].y?parseFloat(c3Params.data.json[g][i].y):parseFloat(c3Params.data.json[g][i]))}},i=0;i<c3Params.data.json[g].length;i++)_loop16(i)};for(_iterator54.s();!(_step54=_iterator54.n()).done;)_loop15()}catch(err){_iterator54.e(err)}finally{_iterator54.f()}"y"===c3Params.data.axes[grp[0]]&&yMaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(grpData)),"y2"===c3Params.data.axes[grp[0]]&&y2MaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(grpData))};for(_iterator53.s();!(_step53=_iterator53.n()).done;)_loop14()}catch(err){_iterator53.e(err)}finally{_iterator53.f()}}if(c3Params.data.axes)for(var keys=Object.keys(c3Params.data.axes),_i7=0,_keys=keys;_i7<_keys.length;_i7++){var key=_keys[_i7];groupedKeys.indexOf(key)<0&&("y"===c3Params.data.axes[key]&&c3Params.data.hide&&!c3Params.data.hide.includes(key)&&yMaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(c3Params.data.json[key],(function(d){return d&&d.y?parseFloat(d.y):parseFloat(d)}))),"y2"!==c3Params.data.axes[key]||c3Params.data.hide.includes(key)||y2MaxArr.push(d3__WEBPACK_IMPORTED_MODULE_42__.max(c3Params.data.json[key],(function(d){return d&&d.y?parseFloat(d.y):parseFloat(d)}))))}yMaxArr&&yMaxArr.length&&!c3Params.axis.y.min&&!c3Params.axis.y.max&&d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr)&&(c3Params.axis.y.tick.values=this.findNiceDelta(d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr),c3Params.axis.y.tick.count)),chartContext.scatterConfig&&yMaxArr&&yMaxArr.length&&(!c3Params.axis.y.max||""===c3Params.axis.y.max)&&d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr)&&(c3Params.axis.y.max=d3__WEBPACK_IMPORTED_MODULE_42__.max(yMaxArr)),y2MaxArr&&y2MaxArr.length&&!c3Params.axis.y2.min&&!c3Params.axis.y2.max&&d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr)&&(c3Params.axis.y2.tick.values=this.findNiceDelta(d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr),c3Params.axis.y2.tick.count)),chartContext.scatterConfig&&y2MaxArr&&y2MaxArr.length&&(!c3Params.axis.y2.max||""===c3Params.axis.y2.max)&&d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr)&&(c3Params.axis.y2.max=d3__WEBPACK_IMPORTED_MODULE_42__.max(y2MaxArr))}catch(error){}},findNiceDelta:function(maxVal,count){for(var step=maxVal/(count-1),order=Math.pow(10,Math.floor(Math.log10(step))),delta=step/order,ndex=[1,2,2.5,3,4,5,10],ndexLenght=ndex.length,stepVal=null,i=ndexLenght-2;i>=0;--i)if(delta>ndex[i]){stepVal=ndex[i+1]*order;break}stepVal||(stepVal=delta*order);var stepList=[];stepList.push(0);for(var j=1;j<count;j++)stepList.push(j*stepVal);return stepList},periodCheck:function(dateRange){return!dateRange||!["dayofweek","dayofmonth","hourofday"].includes(dateRange.period)},prepareProgressChart:function(chartContext,colors,unit){var params={};this.prepareGeneralOptions(chartContext,params),params.data=this.prepareData(chartContext),colors&&(params.data.colors=colors),params.axis=this.prepareAxis(chartContext),params.padding={top:chartContext.options.padding.top,bottom:chartContext.options.padding.bottom,left:10};var overallHeight=100;this.applyDefaultOptions(chartContext,params),!0!==params.axis.x.show&&(overallHeight-=50),params.size={height:overallHeight,width:chartContext.options.size.width},params.padding.top=0,params.grid.y=!1,params.axis.x.label.text="",params.axis.y.show=!1,params.axis.y2.show=!1,params.padding.bottom=-25;var _step55,classes={},regions=[],tooltipData=[],labelMap={current:"Current",baseline:"Baseline",median:"National Median",target:"Target"},maxValue=params.data.json.x[params.data.json.x.length-1],delta=maxValue*(chartContext.options.regionMultiplier?chartContext.options.regionMultiplier:.005),_iterator55=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(Object.keys(params.data.json).filter((function(k){return"x"!==k})));try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var dkey=_step55.value;classes[dkey]="fc-boolean-"+dkey+"-1";var _step57,_iterator57=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(params.data.json[dkey]);try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var data=_step57.value;data&&(regions.push({start:"current"===dkey?0:data-delta,end:"current"===dkey?data:data+delta,class:classes[dkey]}),tooltipData.push({label:labelMap[dkey]?labelMap[dkey]:dkey,value:d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(parseInt(data)),unit:unit,color:colors[dkey]}))}}catch(err){_iterator57.e(err)}finally{_iterator57.f()}params.data.json[dkey]=params.data.json.x.map((function(){return null}))}}catch(err){_iterator55.e(err)}finally{_iterator55.f()}return params.regions=regions,params.axis.x.tick.values=params.data.json.x,params.tooltip&&(params.tooltip["show"]=!1),params.onafterinit=function(){var _step56,parentSelector=d3__WEBPACK_IMPORTED_MODULE_42__.select(this.api.element),_iterator56=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */.Z)(Object.keys(params.data.json).filter((function(k){return"x"!==k})));try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var dkey=_step56.value;parentSelector.selectAll("."+classes[dkey]).style("fill",params.data.colors[dkey]),parentSelector.selectAll("."+classes[dkey]+" rect").style("fill-opacity","0.9"),parentSelector.selectAll("."+classes[dkey]+" rect").classed("fc-boolean-rect-09",!0),parentSelector.selectAll(".bb-chart").style("display","none"),// removed the bb-chart element from the boolean chart. it causes tool tip issue. mouse over event fires when mouse over the alarm charts not a boolean chart
parentSelector.selectAll("."+classes[dkey]).on("mousemove",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.showTooltipForNewChart({data:tooltipData,position:{left:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageX,top:d3__WEBPACK_IMPORTED_MODULE_42__.event.pageY},mode:1})})).on("mouseout",(function(){_graph_mixins_tooltip__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */.Z.hideTooltip()}))}}catch(err){_iterator56.e(err)}finally{_iterator56.f()}},params.axis.x.show&&(params.padding.bottom=0),params.axis.y&&params.axis.y.show&&(params.axis.y.label=" "),params.axis.y2&&params.axis.y2.show&&(params.axis.y2.label=" "),params.data.json=Object.freeze(params.data.json),params},getPointPattern:function(pattern){switch(pattern){case"circle":return"circle";case"rectangle":return"rectangle";case"triangle":return"<polygon points='2.5 0 0 5 5 5'></polygon>";case"diamond":return"<polygon points='2.5 0 0 2.5 2.5 5 5 2.5 2.5 0'></polygon>";default:return"circle"}},getClusters:function(data){var clusterData=[];data&&data.length&&(clusterData=(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */.Z)(new Set(data.filter((function(val){return null!==val})))).sort((function(a,b){return parseFloat(a)-parseFloat(b)})));var clusters=[];if(clusterData.length>=5)clusters=(0,third_party_ckmeans_min_js__WEBPACK_IMPORTED_MODULE_46__/* ["default"] */.Z)(clusterData,5);else{clusters=clusterData;while(clusters.length<5)clusters.push(parseFloat(clusters[clusters.length-1])+1)}return clusters},getBubbleFormatedData:function(yData,zData){return yData&&zData&&yData.length===zData.length?yData.map((function(val,idx){return{y:val&&val.y?parseFloat(val.y):parseFloat(val),z:zData[idx]&&zData[idx].y?parseFloat(zData[idx].y):parseFloat(zData[idx])}})):yData},formatDurationToHighestUnit:function(val,unit){return"hours"===unit?val>24?"".concat(this.formatNumber(val/24)," days"):"".concat(this.formatNumber(val)," hours"):"minutes"===unit?val>1440?"".concat(this.formatNumber(val/1440)," days"):val>60?"".concat(this.formatNumber(val/60)," hours"):"".concat(val," minutes"):"seconds"===unit?val>86400?"".concat(this.formatNumber(val/86400)," days"):val>3600?"".concat(this.formatNumber(val/3600)," hours"):val>60?"".concat(this.formatNumber(val/60)," minutes"):"".concat(this.formatNumber(val)," seconds"):["$","",""].includes(unit)?"".concat(unit," ").concat(this.formatNumber(val)):"".concat(this.formatNumber(val)," ").concat(unit)},formatStringWithUnit:function(val,unit){return["$","",""].includes(unit)?"".concat(unit," ").concat(this.formatNumber(val)):"".concat(this.formatNumber(val)," ").concat(unit)},formatNumber:function(fieldVal){return fieldVal=Number.isInteger(fieldVal)?d3__WEBPACK_IMPORTED_MODULE_42__.format(",")(fieldVal):d3__WEBPACK_IMPORTED_MODULE_42__.format(",.2f")(fieldVal),fieldVal}}},
/***/794211:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return color_helper}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js
var createForOfIteratorHelper=__webpack_require__(566347),paletteGenerator=(__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(162506),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(362273)),chartGroupedColors={colors:{green:["#EFFFE9","#D0FAEE","#cff0da","#C5E99B","#ADE2D3","#99f19e","#a8dba8","#88dba3","#8CD790","#79bd9a","#78b7b5","#3ac569","#5CAB7D","#5A9367","#44633F","#3a5134","#3F4B3B","#3B4E32"],yellow:["#FBFFB9","#FFF9B8","#FDFF89","#fff1b9","#f8ecc9","#feee7d","#f6ea8c","#fedfa1","#ffe45b","#ede574","#FDD692","#F1D38D","#faca65","#ffc952","#f9d423","#f9d422","#EFDC05","#fdc23e","#f8ca00","#fcbe32","#f9c00c"],brown:["#CFAA9E","#D09E88","#ca7d89","#bd7575","#CE6D39","#C65146","#b84a39","#af4034","#754F44","#6f3826","#881600","#6f2108","#49010F","#1c140d"],orange:["#FFEEE4","#f2e9e1","#f9cdad","#faca65","#f0b658","#ecb163","#F8A540","#fc913a","#F68657","#F17F42","#e77e4d","#fa6b7a","#e97f02","#ff5f2e","#DE6449","#e3632d","#C16200"],scarlet:["#f9320c","#E71D36","#bd1550"],red:["#FADAD8","#fec9c9","#f1bbba","#F7AA97","#fc9d9a","#fc9d99","#fd999a","#ef9e9f","#ED9282","#FF8585","#ff7473","#ff7761","#EE7785","#d68189","#DE7E73","#ec7863","#EC7357","#F16B6F","#f26d5b","#EC6A5C","#cb7575","#EC6363","#f15c5c","#e85a71","#f05958","#ff4e50","#f94e3f","#fe4365","#f1404b","#df405a","#E53A40","#c03546","#c72e45","#a6172d"],
// 'green-1': [ '#D4E8C1', '#CDE7C1', '#b3d7cb', '#A1DBB2', '#94CDC7', '#99CEB4', '#8ABBAA', '#60c5ba', '#83B09B' ],
"light-green":["#D7FFF1","#cff09e","#c6e5d9","#E3E36A","#cbe86b","#AACD6E","#67D5B5","#8FBC94","#58C9B9","#75D701","#77AF9C","#2EC4B6","#6d9d88","#55967e","#56A902","#4f953b","#285943"],violet:["#D1B6E1","#CBA6C3","#A593E0","#9988B2","#9e759c","#8b7e97","#9055A2","#6a60a9","#7c6071","#6C5585","#6C49B8","#8F2D56","#87314e","#56445D","#62376e","#791E94","#4E395F","#71226e","#7200da","#512645","#5c196b","#492540","#311e3e","#490a3d"],pink:["#F9CDAD","#ffbbd6","#fab1ce","#f199bc","#C89EC4","#D499B9","#df8bb4","#ee6e9f","#fa6b7a","#f349eb","#E75785","#ef5285","#e94e77","#FF4265","#c7537d","#91637e","#d64072","#ed317f","#d62a9d","#ee2560","#f100e5","#bf209f","#D81159","#D81159"],peach:["#fee5ad","#FFE3A1","#f8dfae"],"dark-yellow":["#fffcf0","#ffda8e","#fbd14b","#FFBC42","#F6B352","#f9a11b","#f9a11b"],grey:["#a3a1a1","#a79c8e","#8c9184","#9B8281","#8b8687","#7C7877","#5e5e5f","#534847","#3E4348","#404146","#3e4149","#3f4040","#383A3F","#343838","#3C3530","#333030","#282c37"]}},color_helper={newColorPicker:function(dataPoints,existingColors){var colors=paletteGenerator/* default */.Z.generate(dataPoints,(
// Colors
function(color){
// This function filters valid colors
var hcl=color.hcl();return 0<=hcl[0]<=69&&177<=hcl[0]<=360&&hcl[1]>=0&&hcl[1]<=85&&hcl[2]>=20&&hcl[2]<=95}),!0,
// Using Force Vector instead of k-Means
50,
// Steps (quality)
!1,
// Ultra precision
"Default");if(colors=colors.map((function(color){return color.hex()})),existingColors&&0!==existingColors.length){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(colors);try{for(_iterator.s();!(_step=_iterator.n()).done;){var color=_step.value;if(existingColors.includes(color)){var index=colors.indexOf(color);colors.splice(index,1)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return colors},colorPicker:function(dataPoints,stateType){stateType||(stateType=1);var choosenColor=[],choosenShade=[],state=this.stateTypeEnum[stateType];switch(state){case"NORMAL":choosenShade=this.stateNormal(dataPoints);break;case"RANK":var colorNames=Object.keys(chartGroupedColors.colors),color=colorNames[Math.floor(Math.random()*colorNames.length)],shades=chartGroupedColors.colors[color];if(choosenColor.push(color),shades.length<dataPoints)for(var i=0;i<dataPoints;i++)choosenShade.push(shades[i]);else choosenShade=shades;break;case"HIGH":choosenColor=[],choosenShade=[];for(var _colorNames=Object.keys(chartGroupedColors.colors),_loop=function(){var color=_colorNames[Math.floor(Math.random()*_colorNames.length)],shades=chartGroupedColors.colors[color];if(choosenColor.includes(color)){var presentShades=choosenShade.filter((function(element){return shades.includes(element)})),shade=presentShades[presentShades.length-1];return choosenShade.push(shades.indexOf(shade)-1),1;// continue
}choosenColor.push(color),choosenShade.push(shades[shades.length-1])},_i=0;_i<dataPoints;_i++)_loop();break;default:choosenColor=[],choosenShade=[],choosenShade=this.stateNormal(dataPoints);break}
// sorting colors using hexsorter
for(var sortedShades=[],j=choosenShade.length-1;j>=0;j--){var shade=choosenShade[j];sortedShades.push(shade),choosenShade.splice(choosenShade.indexOf(shade),1)}return sortedShades.reverse()},stateNormal:function(dataPoints){for(var choosenColor=[],choosenShade=[],colorNames=Object.keys(chartGroupedColors.colors),i=0;i<dataPoints;i++){var color=colorNames[Math.floor(Math.random()*colorNames.length)],shades=chartGroupedColors.colors[color];if(choosenColor.includes(color)&&choosenColor.length>=colorNames.length){var shade=shades[Math.floor(Math.random()*shades.length)];if(choosenShade.includes(shade)){i-=1;continue}choosenShade.push(shades[Math.floor(Math.random()*shades.length)])}else if(choosenColor.includes(color))i-=1;else{var _shade=shades[Math.floor(Math.random()*shades.length)];choosenColor.push(color),choosenShade.push(_shade)}}return choosenShade}};
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js
},
/***/503162:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(488478),newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(374575)),util_deepmerge__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(708634);
/* harmony import */
/* harmony default export */__webpack_exports__.Z={props:["width","height","data","options","dateRange","alarms","hidecharttypechanger","clientWidth","fixedChartHeight","mergeOption"],computed:{size:function(){return this.width&&this.height?{width:this.width,height:this.height}:null===this.width&&this.height?{height:this.height}:null}},methods:{getOptions:function(){var options=this.options?this.options:{};this.size&&(options.size={height:this.$el.clientHeight?this.$el.clientHeight:this.size.height}),this.clientWidth&&this.$el.clientWidth&&(options.size||(options.size={}),options.size.width=this.$el.clientWidth),this.$route.query&&this.$route.query.print&&(options.size||(options.size={}),options.size.width=800);var defaultOptions={};return defaultOptions=util_deepmerge__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */.Z.objectAssignDeep(defaultOptions,newcharts_model_chart_model__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */.Z.constant,options),defaultOptions},getUnitMap:function(dataPoints){var unitMap={},points=[];return dataPoints.length&&dataPoints.forEach((function(dp){"group"===dp.type||"systemgroup"===dp.type?points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(dp.children)):points.push(dp)})),points.length&&points.forEach((function(dp){unitMap[dp.key]=dp.unitStr})),unitMap},getEnumMap:function(dataPoints){var enumMap={},points=[];return dataPoints.length&&dataPoints.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)(dp.children)):points.push(dp)})),points.length&&points.forEach((function(dp){enumMap[dp.key]=dp.enumMap})),enumMap}},watch:{size:function(){this.resize&&this.resize()},options:{handler:function(){this.update&&this.update()},deep:!0}}}},
/***/374575:
/***/function(__unused_webpack_module,__webpack_exports__){
/* harmony default export */__webpack_exports__.Z={constant:{padding:{top:40,right:100,bottom:10,left:100},size:{height:450}},options:{common:{mode:1,buildingIds:[]},general:{grid:{y:!0,x:!1},point:{show:!1},labels:!1,normalizeStack:!1,dataOrder:null,hideZeroes:!1},settings:{chartMode:"single",alarm:!1,chart:!0,table:!0,safelimit:!0,enableAlarm:!0,autoGroup:!1,timeperiod:!1,filterBar:!1},tooltip:{grouped:!1,sortOrder:"none",showNullValues:!1,compare_indicator:2},donut:{labelType:"percentage",centerText:{primaryText:null,primaryUnit:null,primaryRoundOff:!1,secondaryText:null,secondaryUnit:null,secondaryRoundOff:!1}},area:{above:!1,linearGradient:!0},line:{connectNull:!0},bar:{radius:null,padding:null,showGroupTotal:!1,groupTotalLabel:"Group Total"},treemap:{size:"A",color:"A"},table:{hideIndex:!1,removeNegativeValue:!1},axis:{rotated:!1,showy2axis:!0,x:{show:!0,label:{text:null,position:"outer-center"},tick:{direction:"auto"},range:{min:null,max:null},ticks:{count:null},format:{decimals:0}},y:{show:!0,label:{text:null,position:"outer-middle"},unit:null,scale:"linear",range:{min:null,max:null},ticks:{count:5},format:{decimals:0},padding:{bottom:0},formatUnit:"None"},y2:{show:!1,label:{text:null,position:"outer-middle"},unit:null,scale:"linear",range:{min:null,max:null},ticks:{count:5},format:{decimals:0},padding:{top:0,bottom:0},formatUnit:"None"}},legend:{show:!0,position:"top",width:180},trendLine:{enable:!1,type:"1",degree:"2",selectedPoints:[],showr2:!1,decimal:2},scatter:{shape:"circle",color:{mode:null,pallete:1,colors:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],reading:null},size:{mode:null,reading:null}},widgetLegend:{show:!1},benchmark:{show:!1,label:"Benchmark"},colorPalette:"auto"},style:{pie:{label:{show:!0}},donut:{width:null,label:{show:!0}},gauge:{width:null,label:{show:!0},min:0,max:100,unit:" %"},line:{point:{show:!0,radius:5},lineMode:"default",
// 'spline', 'step'
stepType:"step",
// 'step-after', 'step-before'
stroke:{width:1,opacity:1,dashed:{length:2,space:2}},connectNull:!1},area:{point:{show:!0,radius:5},lineMode:"default",
// 'spline', 'step'
stepType:"step",
// 'step-after', 'step-before'
fillOpacity:null,stroke:{width:1,opacity:1,dashed:{length:2,space:2}},connectNull:!1},bar:{width:null/* bar width in pixels or { ratio: 0.5 } */},scatter:{point:{radius:5}}}};
/***/},
/***/944524:
/***/function(__unused_webpack_module,__webpack_exports__){var defaultFormats={number:{type:"number",unit:{label:"auto",labelId:1,value:null},decimal:0,negation:"-",separator:{thousand:","}},decimal:{type:"decimal",unit:{label:"auto",labelId:1,value:null},decimal:2,negation:"-",separator:{thousand:",",decimal:"."}},currency:{type:"currency",currency:{value:"$",position:0},unit:{label:"auto",labelId:1,value:null},decimal:0,negation:"-",separator:{thousand:",",decimal:"."}}};
/* harmony default export */__webpack_exports__.Z={getDefaultFormat:function(){return defaultFormats}}},
/***/138810:
/***/function(__unused_webpack_module,__webpack_exports__){
/* harmony default export */__webpack_exports__.Z={formatHierarchy:[{label:"minute",momentLabel:"minute",formatString:"mm",maxLimit:60},{label:"hourly",momentLabel:"hour",formatString:"HH",maxLimit:24},{label:"daily",momentLabel:"day",formatString:"ddd DD",maxLimit:7},{label:"weekly",momentLabel:"week",formatString:"WW",maxLimit:4},{label:"monthly",momentLabel:"month",formatString:"MMM",maxLimit:12},{label:"yearly",momentLabel:"year",formatString:"YYYY",maxLimit:1}]};
/***/},
/***/380390:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Sparkline}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
var slicedToArray=__webpack_require__(554621),createForOfIteratorHelper=__webpack_require__(566347),vue_runtime_esm=(__webpack_require__(879288),__webpack_require__(689730),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(670560),__webpack_require__(720144)),Spot=(__webpack_require__(397895),__webpack_require__(506203),__webpack_require__(96976),{props:["points","spotStyles","spotProps"],methods:{lastPoint:function(points){var pl=points.length;return Math.sign=Math.sign||function(x){return x>0?1:-1},pl<2?0:Math.sign(points[pl-2].y-points[pl-1].y)}},render:function(h){var _this=this,points=this.points,spotStyles=this.spotStyles,spotProps=this.spotProps,pl=points.length;return h("g",function(){var items=[];return spotStyles&&items.push(h("circle",{style:spotStyles,attrs:{cx:points[0].x,cy:points[0].y,r:spotProps.size}})),items.push(h("circle",{style:Object.assign(spotStyles,{fill:spotProps.spotColors[_this.lastPoint(points)],fillOpacity:1,strokeOpacity:1}),attrs:{cx:points[pl-1].x,cy:points[pl-1].y,r:spotProps.size}})),items}())}}),Text={props:["point","margin","text","textStyles"],render:function(h){var point=this.point,text=this.text,textStyles=this.textStyles,x=point.x,y=point.y;return h("g",[h("text",{style:textStyles,attrs:{x:x,y:y},ref:"sparklineText"},text)])},mounted:function(){var text=this.$refs.sparklineText,textBox=text&&text.getBBox();textBox&&(text.setAttribute("x",textBox.x-textBox.width/2),text.setAttribute("y",this.margin+textBox.height/2))}},utils_mean=function(data){return data.reduce((function(a,b){return a+b}))/data.length},evt=(__webpack_require__(865137),function(mouseEvents,data,p){var evts={};return"function"===typeof mouseEvents&&["enter","leave","up","down","move","over"].map((function(evt){return evts["mouse".concat(evt)]=function(){return mouseEvents("mouse".concat(evt),data,p)}})),evts}),RefLine={props:["points","margin","refLineType","refLineProps","refLineStyles"],render:function(h){var points=this.points,refLineType=this.refLineType,refLineProps=this.refLineProps,refLineStyles=this.refLineStyles,ypoints=points.map((function(p){return p.y})),types=["max","min","mean","avg","median","custom"],type="mean";types.indexOf(refLineType)>-1&&(type="max"===refLineType?"min":"min"===refLineType?"max":refLineType);var y="custom"===type&&refLineProps&&refLineProps.value||utils_mean(ypoints);return refLineStyles["shape-rendering"]="crispEdges",h("line",{style:refLineStyles,attrs:{x1:points[0].x,y1:y,x2:points[points.length-1].x,y2:y}})}},utils_min=function(data){return Math.min.apply(Math,data)},utils_max=function(data){return Math.max.apply(Math,data)},dataToPoints=function(_ref){var data=_ref.data,limit=_ref.limit,_ref$width=_ref.width,width=void 0===_ref$width?1:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?1:_ref$height,_ref$margin=_ref.margin,margin=void 0===_ref$margin?0:_ref$margin,_ref$max=_ref.max,max=void 0===_ref$max?utils_max(data):_ref$max,_ref$min=_ref.min,min=void 0===_ref$min?utils_min(data):_ref$min,_ref$textHeight=_ref.textHeight,textHeight=void 0===_ref$textHeight?0:_ref$textHeight,len=data.length;limit&&limit<len&&(data=data.slice(len-limit));var vfactor=(height-2*margin-textHeight)/(max-min||2),hfactor=(width-2*margin)/((limit||len)-(len>1?1:0));return data.map((function(d,i){return{x:i*hfactor+margin,y:(max===min?1:max-d)*vfactor+margin+textHeight}}))},Line={name:"sparkline-line",props:{data:{type:Array,default:function(){return[]}},hasSpot:{type:Boolean,default:!1},limit:{type:[Number,String],default:3},width:{type:[Number,String],default:100},height:{type:[Number,String],default:30},margin:{type:Number,default:3},styles:{type:Object,default:function(){return{}}},max:{type:Number},min:{type:Number},spotlight:{type:[Number,Boolean],default:!1},spotStyles:{type:Object,default:function(){return{strokeOpacity:0,fillOpacity:0}}},spotProps:{type:Object,default:function(){return{size:3,spotColors:{"-1":"red",0:"yellow",1:"green"}}}},refLineType:{
// 'max', 'min', 'mean', 'avg', 'median', 'custom' or false
type:[String,Boolean],default:"mean"},refLineStyles:{stroke:"#d14",strokeOpacity:1,strokeDasharray:"2, 2"},refLineProps:{type:Object,default:function(){return{value:null}}},mouseEvents:Function,bus:Object,textStyles:{type:Object,default:function(){return{fontSize:10}}}},render:function(h){var _this$data=this.data,data=void 0===_this$data?[]:_this$data,hasSpot=this.hasSpot,limit=this.limit,width=this.width,height=this.height,margin=this.margin,styles=this.styles,max=this.max,min=this.min,spotlight=this.spotlight,spotStyles=this.spotStyles,spotProps=this.spotProps,refLineStyles=this.refLineStyles,bus=this.bus,mouseEvents=this.mouseEvents,textStyles=this.textStyles;if(!data.length)return null;var hasSpotlight="number"===typeof spotlight,leeway=10,points=dataToPoints({data:data,limit:limit,width:width,height:height,margin:margin,max:max,min:min,textHeight:hasSpotlight?leeway:0});bus&&bus.$emit("setValue",{id:"sparkline__".concat(this._uid),color:styles.stroke||styles.fill||"#fff",data:data,points:points,limit:limit,type:"line"});var linePoints=points.map((function(p){return[p.x,p.y]})).reduce((function(a,b){return a.concat(b)})),closePolyPoints=[points[points.length-1].x,height-margin,margin,height-margin,margin,points[0].y],fillPoints=linePoints.concat(closePolyPoints),lineStyle={stroke:styles.stroke||"slategray",strokeWidth:styles.strokeWidth||"1",strokeLinejoin:styles.strokeLinejoin||"round",strokeLinecap:styles.strokeLinecap||"round",fill:"none"},fillStyle={stroke:styles.stroke||"none",strokeWidth:"0",fillOpacity:styles.fillOpacity||".1",fill:styles.fill||"none",
// slategray
pointerEvents:"auto"},props=this.$props;props.points=points;var checkSpotType=function(items,p,i){return!hasSpot&&!hasSpotlight||!hasSpot&&spotlight===i&&(props.text=data[spotlight],props.point=p,props.textStyles=textStyles,items.push(h(Text,{props:props})),!0)};return h("g",function(){var items=[];return items.push(h("polyline",{style:fillStyle,attrs:{points:fillPoints.join(" ")}}),h("polyline",{style:lineStyle,attrs:{points:linePoints.join(" ")}})),hasSpotlight&&points.map((function(p,i){return checkSpotType(items,p,i)&&items.push(h("circle",{style:spotStyles,attrs:{cx:p.x,cy:p.y,r:spotProps.size,rel:data[i]},props:{key:i},on:evt(mouseEvents,data[i],p)}))})),hasSpot&&items.push(h(Spot,{props:props})),refLineStyles&&items.push(h(RefLine,{props:props})),items}())}},Curve={name:"sparkline-curve",props:{data:{type:Array,default:function(){return[]}},hasSpot:{type:Boolean,default:!1},limit:{type:[Number,String],default:3},width:{type:[Number,String],default:100},height:{type:[Number,String],default:30},margin:{type:Number,default:3},styles:{type:Object,default:function(){return{}}},max:{type:Number},min:{type:Number},spotlight:{type:[Number,Boolean],default:!1},spotStyles:{type:Object,default:function(){return{strokeOpacity:0,fillOpacity:0}}},spotProps:{type:Object,default:function(){return{size:3,spotColors:{"-1":"red",0:"yellow",1:"green"}}}},refLineType:{
// 'max', 'min', 'mean', 'avg', 'median', 'custom' or false
type:[String,Boolean],default:"mean"},refLineStyles:{stroke:"#d14",strokeOpacity:1,strokeDasharray:"2, 2"},refLineProps:{type:Object,default:function(){return{value:null}}},mouseEvents:Function,bus:Object,divisor:{type:[Number,String],default:.5},textStyles:{type:Object,default:function(){return{fontSize:10}}}},render:function(h){var _this$data=this.data,data=void 0===_this$data?[]:_this$data,hasSpot=this.hasSpot,limit=this.limit,width=this.width,height=this.height,margin=this.margin,styles=this.styles,max=this.max,min=this.min,spotlight=this.spotlight,spotStyles=this.spotStyles,spotProps=this.spotProps,refLineStyles=this.refLineStyles,bus=this.bus,mouseEvents=this.mouseEvents,divisor=this.divisor,textStyles=this.textStyles;// 0.25
if(!data.length)return null;var prev,hasSpotlight="number"===typeof spotlight,leeway=10,points=dataToPoints({data:data,limit:limit,width:width,height:height,margin:margin,max:max,min:min,textHeight:hasSpotlight?leeway:0});bus&&bus.$emit("setValue",{id:"sparkline__".concat(this._uid),color:styles.stroke||styles.fill||"#fff",data:data,points:points,limit:limit,type:"curve"});var curve=function(p){var res;if(prev){var len=(p.x-prev.x)*divisor;res=["C",prev.x+len,prev.y,p.x-len,p.y,p.x,p.y]}else res=[p.x,p.y];return prev=p,res},linePoints=points.map((function(p){return curve(p)})).reduce((function(a,b){return a.concat(b)})),closePolyPoints=["L".concat(points[points.length-1].x),height-margin,margin,height-margin,margin,points[0].y],fillPoints=linePoints.concat(closePolyPoints),lineStyle={stroke:styles.stroke||"slategray",strokeWidth:styles.strokeWidth||"1",strokeLinejoin:styles.strokeLinejoin||"round",strokeLinecap:styles.strokeLinecap||"round",fill:"none"},fillStyle={stroke:styles.stroke||"none",strokeWidth:"0",fillOpacity:styles.fillOpacity||".1",fill:styles.fill||"none"},props=this.$props;props.points=points;var checkSpotType=function(items,p,i){return!hasSpot&&!hasSpotlight||!hasSpot&&spotlight===i&&(props.text=data[spotlight],props.point=p,props.textStyles=textStyles,items.push(h(Text,{props:props})),!0)};return h("g",function(){var items=[];return items.push(h("path",{style:fillStyle,attrs:{d:"M".concat(fillPoints.join(" "))}}),h("path",{style:lineStyle,attrs:{d:"M".concat(linePoints.join(" "))}})),hasSpotlight&&points.map((function(p,i){return checkSpotType(items,p,i)&&items.push(h("circle",{style:spotStyles,attrs:{cx:p.x,cy:p.y,r:spotProps.size,rel:data[i]},props:{key:i},on:evt(mouseEvents,data[i],p)}))})),hasSpot&&items.push(h(Spot,{props:props})),refLineStyles&&items.push(h(RefLine,{props:props})),items}())}},Bar={name:"sparkline-bar",props:{data:{type:Array,default:function(){return[]}},limit:{type:[Number,String],default:3},width:{type:[Number,String],default:100},height:{type:[Number,String],default:30},margin:{type:Number,default:3},styles:{type:Object,default:function(){return{}}},max:{type:Number},min:{type:Number},spotlight:{type:[Number,Boolean],default:!1},spotStyles:{type:Object,default:function(){return{strokeOpacity:0,fillOpacity:0}}},spotProps:{type:Object,default:function(){return{size:3,spotColors:{"-1":"red",0:"yellow",1:"green"}}}},refLineType:{
// 'max', 'min', 'mean', 'avg', 'median', 'custom' or false
type:[String,Boolean],default:"mean"},refLineStyles:{stroke:"#d14",strokeOpacity:1,strokeDasharray:"2, 2"},refLineProps:{type:Object,default:function(){return{value:null}}},mouseEvents:Function,bus:Object},render:function(h){var _this=this,_this$data=this.data,data=void 0===_this$data?[]:_this$data,limit=this.limit,width=this.width,height=this.height,margin=this.margin,styles=this.styles,max=this.max,min=this.min,refLineStyles=this.refLineStyles,bus=this.bus,mouseEvents=this.mouseEvents;if(!data.length)return null;var points=dataToPoints({data:data,limit:limit,width:width,height:height,margin:margin,max:max,min:min}),strokeWidth=styles&&styles.strokeWidth||0,marginWidth=margin?2*margin:0,nonLimit=data.length===limit,barWidth=styles.barWidth||nonLimit?(width-limit*(marginWidth+strokeWidth))/limit:points&&points.length>=2?Math.max(0,points[1].x-points[0].x-strokeWidth-marginWidth):0,props=this.$props,adjustPos=[];return props.points=points,h("g",{attrs:{}},function(){var items=[];return points.map((function(p,i){return items.push(h("rect",{style:styles,attrs:{
// x: p.x - (barWidth + strokeWidth) / 2,
x:function(){if(adjustPos[i]=adjustPos[i]||{},nonLimit){var curX=Math.ceil((barWidth+strokeWidth+marginWidth)*i+margin);return adjustPos[i].x=curX+barWidth,curX}var _curX=Math.ceil(p.x-strokeWidth*i);return adjustPos[i].x=_curX+barWidth,_curX}(),
// y: -height,
y:function(){return adjustPos[i].y=Math.ceil(p.y)}(),width:Math.ceil(barWidth),height:Math.ceil(Math.max(0,height-p.y)),rel:data[i]},props:{key:i},on:evt(mouseEvents,data[i],p)}))})),bus&&bus.$emit("setValue",{id:"sparkline__".concat(_this._uid),color:styles.stroke||styles.fill||"#fff",data:data,points:adjustPos,limit:limit,type:"bar"}),refLineStyles&&items.push(h(RefLine,{props:props})),items}())}},Pie={name:"sparkline-pie",props:{data:{type:Array,default:function(){return[]}},width:{type:[Number,String],default:100},height:{type:[Number,String],default:30},margin:{type:Number,default:3},styles:{type:Object,default:function(){return{}}},indicatorStyles:{type:[Object,Boolean],default:function(){return{stroke:"red"}}},tooltipProps:{type:Object,default:function(){return{formatter:function(){return null}}}},tooltipStyles:{type:Object,default:function(){return{position:"absolute",display:"none",background:"rgba(0, 0, 0, 0.6)",borderRadius:"3px",minWidth:"30px",padding:"3px",color:"#fff",fontSize:"12px"}}}},data:function(){return{onFocus:!1}},watch:{data:function(){this.onFocus&&this.hideTooltip()}},methods:{hideTooltip:function(){var tooltip=this.$parent.$refs.sparklineTooltip;tooltip&&(tooltip.style.display="none")},showTooltip:function(evt,value,color){var tooltip=this.$parent.$refs.sparklineTooltip;tooltip&&(tooltip.style.display="");var leeway=tooltip.getBoundingClientRect(),tooltipContent='<span style="color:'.concat(color,';">&bull;</span>&nbsp;').concat(value,"<br />");if(leeway){tooltip.style.left="".concat(evt.clientX+.25*leeway.width,"px"),tooltip.style.top="".concat(evt.clientY-leeway.height,"px");try{tooltip.innerHTML=this.tooltipProps.formatter({value:value,color:color})||tooltipContent}catch(e){return tooltip.innerHTML=tooltipContent}}}},render:function(h){var _this=this,_this$data=this.data,data=void 0===_this$data?[]:_this$data,width=this.width,height=this.height,styles=this.styles,indicatorStyles=this.indicatorStyles;if(!data.length)return null;var _step,center=Math.min(width/2,height/2),strokeWidth=styles&&styles.strokeWidth||0,radius=center-strokeWidth/2,prevPieNumbers=0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.$parent.$slots.default);try{for(_iterator.s();!(_step=_iterator.n()).done;){var slot=_step.value;"sparklinePie"===slot.tag&&prevPieNumbers++}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(prevPieNumbers>1)return null;var total=Math.ceil(data.reduce((function(a,b){return(b.hasOwnProperty("value")?b.value:b)+a}),0)),angleStart=0,angleEnd=0,startX=center;return h("g",{attrs:{}},function(){var items=[];return 1===data.length?items.push(h("ellipse",{style:styles,attrs:{cx:startX,cy:center,rx:radius,ry:radius,fill:data[0].color},on:{mousemove:function(evt){_this.onFocus=!0,indicatorStyles&&_this.showTooltip(evt,data[0].value,data[0].color)},mouseleave:function(){_this.onFocus=!1,_this.hideTooltip()}}})):data.map((function(d,i){var value=d.hasOwnProperty("value")?d.value:d,isLarge=value/total>.5,angle=360*value/total;angleStart=angleEnd,angleEnd=angleStart+angle;var x1=startX+radius*Math.cos(Math.PI*angleStart/180),y1=center+radius*Math.sin(Math.PI*angleStart/180),x2=startX+radius*Math.cos(Math.PI*angleEnd/180),y2=center+radius*Math.sin(Math.PI*angleEnd/180),path="M".concat(startX,",").concat(center," L").concat(x1,",").concat(y1," A").concat(radius,",").concat(radius," 0 ").concat(isLarge?1:0,",1 ").concat(x2,",").concat(y2," Z"),color=d.hasOwnProperty("color")?d.color:styles&&styles.fill||"#000";items.push(h("path",{style:styles,attrs:{fill:color,d:path},props:{key:i},on:{mousemove:function(evt){_this.onFocus=!0,indicatorStyles&&_this.showTooltip(evt,value,color)},mouseleave:function(){_this.onFocus=!1,_this.hideTooltip()}}}))})),items}())}},Sparkline={name:"sparkline",props:{width:{type:[Number,String],default:100},height:{type:[Number,String],default:30},preserveAspectRatio:{type:String,default:"none"},margin:{type:Number,default:2},styles:{type:Object,default:function(){return{}}},indicatorStyles:{type:[Object,Boolean],default:function(){return{stroke:"red"}}},tooltipProps:{type:Object,default:function(){return{formatter:function(){return null}}}},tooltipStyles:{type:Object,default:function(){return{position:"absolute",display:"none",background:"rgba(0, 0, 0, 0.6)",borderRadius:"3px",minWidth:"30px",padding:"3px",color:"#fff",fontSize:"12px"}}},aliases:{type:String}},data:function(){return{datum:{},curEvt:{},onFocus:!1}},created:function(){var _this=this;this.bus.$on("setValue",(function(val){var data=val.data,points=val.points,color=val.color,limit=val.limit;_this.datum[val.id]={data:data.length>=limit?data.slice(-limit):data,points:points,color:color},Object.keys(_this.curEvt).length&&_this.updateData()}))},mounted:function(){var fragment=document.createDocumentFragment();fragment.appendChild(this.$refs.sparklineTooltip),document.body.appendChild(fragment)},beforeDestroy:function(){var tooltip=this.$refs.sparklineTooltip;tooltip&&tooltip.parentNode.removeChild(tooltip)},computed:{bus:function(){return new vue_runtime_esm["default"]}},methods:{setStatus:function(){var status=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],indicator=this.$refs.sparklineIndicator,tooltip=this.$refs.sparklineTooltip;tooltip&&(tooltip.style.display=status?"":"none"),indicator&&(indicator.style.display=status?"":"none")},updateData:function(){if(!this.onFocus)return!1;var rect,curData,tooltipContent="",tooltip=this.$refs.sparklineTooltip;for(var datum in this.datum)if(curData=null,this.datum.hasOwnProperty(datum)){this.setStatus(!1);var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.datum[datum].points.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=(0,slicedToArray/* default */.Z)(_step.value,2),index=_step$value[0],pos=_step$value[1];this.curEvt.ox<pos.x&&null===curData&&(this.setStatus(),rect=tooltip.getBoundingClientRect(),curData={value:this.datum[datum].data[index],color:this.datum[datum].color,aliases:this.aliases,index:index},tooltipContent+='<span style="color:'.concat(curData.color,';">&bull;</span>&nbsp;').concat(curData.value,"<br />"))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}if(rect){tooltip.style.left="".concat(this.curEvt.cx+.25*rect.width,"px"),tooltip.style.top="".concat(this.curEvt.cy-rect.height,"px");try{tooltip.innerHTML=this.tooltipProps.formatter(curData)||tooltipContent}catch(e){return tooltip.innerHTML=tooltipContent}}}},render:function(h){var _this2=this,width=this.width,height=this.height,preserveAspectRatio=this.preserveAspectRatio,styles=this.styles,indicatorStyles=this.indicatorStyles,svgOpts={viewBox:"0 0 ".concat(width," ").concat(height),preserveAspectRatio:preserveAspectRatio};styles.width="".concat(parseInt(width,10),"px"),styles.height="".concat(parseInt(height,10),"px");var rootProps=this.$props;indicatorStyles&&(rootProps.bus=this.bus);var slots=this.$slots.default;return h("div",{class:"sparkline-wrap"},[h("svg",{style:styles,attrs:svgOpts,on:{mousemove:function(evt){if(indicatorStyles){var ox=evt.offsetX||evt.layerX,oy=evt.offsetY||evt.layerY,cx=evt.clientX,cy=evt.clientY;_this2.curEvt={ox:ox,oy:oy,cx:cx,cy:cy,target:evt.target};var indicator=_this2.$refs.sparklineIndicator;indicator.setAttribute("x1",ox),indicator.setAttribute("x2",ox)}_this2.onFocus=!0,_this2.updateData()},mouseleave:function(){_this2.onFocus=!1,_this2.setStatus(!1)}}},function(){var items=slots.map((function(item){var tag=item.tag,props=Object.assign({},rootProps,item.data&&item.data.attrs||{});return h("sparklineLine"===tag?Line:"sparklineCurve"===tag?Curve:"sparklineBar"===tag?Bar:Pie,{props:props})}));return indicatorStyles&&(indicatorStyles["shape-rendering"]="crispEdges",indicatorStyles["display"]="none",items.push(h("line",{style:indicatorStyles,class:"tooltip-line-indicator",attrs:{x1:0,y1:0,x2:0,y2:height},ref:"sparklineIndicator"}))),items}()),h("div",{class:"sparkline-tooltip",style:this.tooltipStyles,ref:"sparklineTooltip"})])}};
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js
}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/chunk-common-d812e6f1.js.map