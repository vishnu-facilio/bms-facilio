(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[80788,57544,85050],{
/***/201117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupFieldWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FLookupFieldWrapper.vue?vue&type=template&id=0b196d62
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"lookup-wrapper"},[_vm.fieldObj.field?_c("FLookupField",{class:{"handle-wizard-icon":_vm.handleWizardIcon},attrs:{model:_vm.modelObj,field:_vm.fieldObj,disabled:_vm.disabled,siteId:_vm.siteId,hideLookupIcon:_vm.hideWizard,hideDropDown:_vm.hideDropDown,preHookFilterConstruction:_vm.filterConstruction,fetchOptionsOnLoad:_vm.fetchOptionsOnLoad,fetchOptionsMethod:_vm.fetchOptionsMethod},on:{"update:model":function($event){_vm.modelObj=$event},showLookupWizard:_vm.showLookupWizard,recordSelected:_vm.onRecordSelected}}):_c("el-input"),!_vm.hideWizard&&_vm.canShowLookupWizard?_c("div",[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.fieldObj,siteId:_vm.siteId,withReadings:_vm.withReadings},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue,showMainFieldSearch:function($event){return _vm.onWizardShow(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),FLookupField=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(891719),__webpack_require__(855048)),validation=__webpack_require__(990260),FLookupFieldWrappervue_type_script_lang_js={name:"f-lookup-field-wrapper",props:{value:[Number,String,Array],label:String,
// Label of selected value if any
formField:Object,field:Object,
// Pass field object if form field not available and field avaialble
moduleName:String,
// Pass module name and field name if field object not avaialble
fieldName:String,disabled:{type:Boolean,default:!1},siteId:Number,hideWizard:{type:Boolean,default:!1},hideDropDown:{type:Boolean,default:!1},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},withReadings:Boolean,handleWizardIcon:{
// To handle wizard icon css
type:Boolean,default:!0},filterConstruction:{type:Function,default:function(field){return field.filters}}},components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(42054)]).then(__webpack_require__.bind(__webpack_require__,499751))}},data:function(){return{fieldObj:{isDataLoading:!1,options:[],lookupModuleName:"",field:null,filters:{},isDisabled:!1},canShowLookupWizard:!1}},computed:{modelObj:{get:function(){return(0,validation/* isEmpty */.xb)(this.value)?this.value:(0,validation/* isArray */.kJ)(this.value)?this.value.map((function(val){return parseInt(val)})):parseInt(this.value)},set:function(value){this.$emit("input",value)}}},created:function(){this.handleDefaultOption()},mounted:function(){var formField=this.formField,field=this.field;(0,validation/* isEmpty */.xb)(formField)?(0,validation/* isEmpty */.xb)(field)?this.fetchField():this.setField(field):this.fieldObj=formField},watch:{canShowLookupWizard:function(value){value||this.onWizardShow(value)}},methods:{showLookupWizard:function(field,canShow){this.fieldObj=field,this.canShowLookupWizard=canShow,this.onWizardShow(!0)},setLookupFieldValue:function(props){var _this=this,field=props.field,_ref=field||{},multiple=_ref.multiple,selectedItems=_ref.selectedItems;if(multiple){var valueArr=[];selectedItems.forEach((function(item){var value=item.value,label=item.label;_this.addOption(value,label),valueArr.push(value)})),this.modelObj=valueArr,this.onRecordSelected(selectedItems,valueArr)}else{var _ref2=selectedItems||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,1),selectedItem=_ref3[0],value=selectedItem.value,label=selectedItem.label;this.addOption(value,label),this.modelObj=value,this.onRecordSelected(selectedItem)}this.onWizardShow(!1)},onWizardShow:function(show){this.$emit("showingLookupWizard",show)},fetchField:function(){var _this2=this,moduleName=this.moduleName,fieldName=this.fieldName;this.$util.loadModuleMeta(moduleName).then((function(meta){var field=meta.fields.find((function(field){return field.name===fieldName}));_this2.setField(field)}))},onRecordSelected:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.$emit.apply(this,["recordSelected"].concat(args))},handleDefaultOption:function(){var label=this.label,value=this.value;(0,validation/* isEmpty */.xb)(label)||(0,validation/* isEmpty */.xb)(value)||this.addOption(value,label)},setField:function(field){var fieldObj=this.fieldObj;fieldObj.field=field,fieldObj.multiple=field.multiple,fieldObj.lookupModuleName=field.lookupModule.name,(0,validation/* isArray */.kJ)(this.modelObj)?fieldObj.selectedItems=this.modelObj.map((function(id){return{value:id}})):fieldObj.selectedItems={value:this.modelObj}},addOption:function(id,label){var fieldObj=this.fieldObj,options=fieldObj.options,newOptionObj={label:label,value:id};(0,validation/* isEmpty */.xb)(options)?options.push(newOptionObj):options.some((function(option){return option.value===id}))||options.unshift(newOptionObj),this.$set(this.fieldObj,"options",options)}}},components_FLookupFieldWrappervue_type_script_lang_js=FLookupFieldWrappervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FLookupFieldWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupFieldWrapper=component.exports},
/***/21864:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return OutsideClick}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/OutsideClick.vue?vue&type=template&id=6761c108
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.onOutsideClick,expression:"onOutsideClick"}]},[_vm._t("default")],2):_vm._e()},staticRenderFns=[],OutsideClickvue_type_script_lang_js={props:["visibility"],methods:{onOutsideClick:function(){this.$emit("onOutsideClick"),this.$emit("update:visibility",!1)}}},components_OutsideClickvue_type_script_lang_js=OutsideClickvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_OutsideClickvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,OutsideClick=component.exports},
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/965797:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldPicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/fields/FieldPicker.vue?vue&type=template&id=45d1fb12
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"field-dialog",attrs:{visible:!0,width:"50%","append-to-body":!0,"show-close":!1,"before-close":_vm.handleclose}},[_c("div",{staticStyle:{height:"610px"}},[_c("el-row",[_c("el-col",{staticClass:"dialog_header"},[_vm._v(" "+_vm._s(_vm.title?_vm.title:"FIELDS")+" ")])],1),_c("el-row",[_c("el-col",{staticClass:"border-right overflow-y-scroll height500",attrs:{span:8}},[_c("div",{staticClass:"d-flex pT5 pB5 pL30 pR5",staticStyle:{"border-bottom":"1px solid #e5e4e4"}},[_c("i",{staticClass:"el-icon-search pT7 pR10",staticStyle:{color:"#25243e"}}),_c("el-input",{attrs:{placeholder:"Search Fields",autofocus:!0,clearable:""},on:{change:function($event){return _vm.filterSearchQuery(!0)}},model:{value:_vm.filterValue,callback:function($$v){_vm.filterValue=$$v},expression:"filterValue"}})],1),_c("div",{staticClass:"pL30 pR15"},[_c("el-checkbox-group",{staticClass:"overflow-y-scroll",model:{value:_vm.fieldList,callback:function($$v){_vm.fieldList=$$v},expression:"fieldList"}},_vm._l(_vm.filteredList,(function(field,index){return _c("el-checkbox",{key:index,staticClass:"checkbox",attrs:{label:field.name}},[_vm._v(" "+_vm._s(field.displayName)+" ")])})),1)],1)]),_c("el-col",{staticClass:"overflow-y-scroll height500",attrs:{span:16}},[_c("div",{staticClass:"selected_header"},[_vm._v("Selected Fields")]),_c("draggable",_vm._b({staticClass:"pL20 pR20",attrs:{list:_vm.list,group:"list"}},"draggable",_vm.fieldSectionDragOptions,!1),_vm._l(_vm.list,(function(field,index){return _c("div",{key:index,staticClass:"mB10 mT15"},[field.hasOwnProperty("fieldId")?_c("div",{staticClass:"field-row d-flex"},[_vm.isInFormConfig?_c("div",{staticClass:"task-handle mR10"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]):_vm._e(),_c("div",{staticClass:"mT-auto mB-auto fd-name"},[_vm._v(" "+_vm._s(field.displayName||"")+" ")]),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_vm.isInFormConfig?_c("div",{staticClass:"mR10 pR10 inline mandatory-checkbox field-checkbox"},[_c("el-checkbox",{model:{value:field.required,callback:function($$v){_vm.$set(field,"required",$$v)},expression:"field.required"}},[_vm._v(" Is Mandatory ")])],1):_vm._e(),_c("div",{staticClass:"mR10 inline",on:{click:function($event){return _vm.remove(field)}}},[_c("i",{staticClass:"el-icon-delete pointer trash-icon"})])])]):_vm._e()])})),0)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.handleclose()}}},[_vm._v(" CANCEL ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v(" Save ")])],1)],1)])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(990260)),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),FieldPickervue_type_script_lang_js={props:["title","availableFields","isInFormConfig","selectedList"],components:{draggable:vuedraggable_umd_default()},data:function(){return{list:[],filterValue:"",filteredList:[],fieldSectionDragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0}}},created:function(){this.list=(0,toConsumableArray/* default */.Z)(this.selectedList),this.filterSearchQuery()},computed:{fieldList:{get:function(){var list=this.list;return(0,validation/* isEmpty */.xb)(list)?[]:list.filter((function(field){return field.hasOwnProperty("fieldId")})).map((function(field){return field.name}))},set:function(value){var availableFields=this.availableFields,selectedFields=value.map((function(fieldName){var field=availableFields.find((function(field){return field.name===fieldName}));return(0,validation/* isEmpty */.xb)(field)?null:field})).filter((function(f){return!(0,validation/* isEmpty */.xb)(f)}));this.list=(0,toConsumableArray/* default */.Z)(selectedFields)}}},methods:{handleclose:function(){this.$emit("close")},save:function(){this.$emit("save",this.list),this.handleclose()},remove:function(field){var index=this.list.findIndex((function(fld){return fld.name===field.name}));this.list.splice(index,1)},filterSearchQuery:function(errorMessage){var _this=this,filterObj=this.availableFields.filter((function(field){var name=field.displayName.toLowerCase();return name.includes(_this.filterValue.toLowerCase())}));(0,validation/* isEmpty */.xb)(filterObj)?(errorMessage&&this.$message.error("Cannot find filtered field"),this.filteredList=this.availableFields):this.filteredList=filterObj}}},fields_FieldPickervue_type_script_lang_js=FieldPickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(fields_FieldPickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldPicker=component.exports},
/***/634559:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldUpdateDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/fields/FieldUpdateDialog.vue?vue&type=template&id=3a6c8a46
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"Field Change","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},_vm._l(_vm.fieldChange.templateJson.fieldMatcher,(function(fieldMatcher,index){return _c("div",{key:index},[_c("el-row",{staticClass:"visibility-visible-actions fc-row-hover pT10 pB10 pL10 pointer"},[_c("el-col",{attrs:{span:1}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(_vm._s(index+1))])])]),_c("el-col",{staticClass:"pL10",attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:""},on:{change:function($event){return _vm.statusFieldName(fieldMatcher,index)}},model:{value:fieldMatcher.field,callback:function($$v){_vm.$set(fieldMatcher,"field",$$v)},expression:"fieldMatcher.field"}},_vm._l(_vm.updateFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.name}})})),1)],1),_c("el-col",{attrs:{span:9}},[_c("div",{},[fieldMatcher.fieldObj?fieldMatcher.isSpacePicker?_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",attrs:{disabled:""},model:{value:_vm.field.parseLabel,callback:function($$v){_vm.$set(_vm.field,"parseLabel",$$v)},expression:"field.parseLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},slot:"suffix"})])],1):_c("div",{staticClass:"flex-middle"},["NUMBER"===fieldMatcher.fieldObj[0].dataType||"DECIMAL"===fieldMatcher.fieldObj[0].dataType?_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",attrs:{type:"number"},model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}}):"BOOLEAN"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 mL20 width100pxss",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}},[_c("el-option",{attrs:{label:fieldMatcher.fieldObj[0].trueVal?fieldMatcher.fieldObj[0].trueVal:"Yes",value:"true"}}),_c("el-option",{attrs:{label:fieldMatcher.fieldObj[0].falseVal?fieldMatcher.fieldObj[0].falseVal:"No",value:"false"}})],1):"ENUM"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL20",attrs:{filterable:"","collapse-tags":""},model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}},_vm._l(_vm.picklistOptions[fieldMatcher.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):"DATE"===fieldMatcher.fieldObj[0].dataTypeEnum._name||"DATE_TIME"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-row",{staticClass:"mL20"},[_c("el-col",{attrs:{span:7}},[_c("el-input",{staticClass:"fc-input-full-border-select2 width75px",attrs:{type:"number"},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.days,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"days",$$v)},expression:"fieldMatcher.dateObject.days"}}),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Days ")])],1),_c("el-col",{staticClass:"pL30",attrs:{span:7}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width75px",attrs:{clearable:"",filterable:"",placeholder:"Num"},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.hours,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"hours",$$v)},expression:"fieldMatcher.dateObject.hours"}},_vm._l(_vm.$constants.HOURS,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Hours ")])],1),_c("el-col",{staticClass:"pL60",attrs:{span:7}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width75px",attrs:{placeholder:"Num",filterable:""},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.minute,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"minute",$$v)},expression:"fieldMatcher.dateObject.minute"}},_vm._l(_vm.minDuration,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Mins ")])],1)],1):"LOOKUP"===fieldMatcher.fieldObj[0].dataTypeEnum._name&&"LOOKUP_SIMPLE"===fieldMatcher.fieldObj[0].displayType._name||"LOOKUP"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL20",attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.valueArray,callback:function($$v){_vm.$set(fieldMatcher,"valueArray",$$v)},expression:"fieldMatcher.valueArray"}},_vm._l(_vm.picklistOptions[fieldMatcher.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width130px",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}})],1):_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}})],1)])]),_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"visibility-hide-actions pT10 mR20 text-right pointer"},[_c("img",{staticClass:"pointer",attrs:{src:__webpack_require__(353654)},on:{click:_vm.addRow}}),_vm.fieldChange.templateJson.fieldMatcher.length>1&&1!==_vm.fieldChange.templateJson.fieldMatcher.length?_c("img",{staticClass:"pointer mL5",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(index)}}}):_vm._e()])])],1)],1)})),0),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.actionSave(_vm.fieldChange)}}},[_vm._v("Save")])],1)])],1)},staticRenderFns=[],validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(434284),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(990260)),FieldUpdateDialogvue_type_script_lang_js={props:["statusFieldName","fieldChange","moduleFields","module","picklistOptions","addRow","actionSave","fieldUpdateValue","durationConfig"],data:function(){return{moduleObj:{},excludeFields:["stateFlowId","siteId","photo","moduleState"],updateFieldName:{alarm:["severity"],newreadingalarm:["severity"],workorder:["assignedTo","assignmentGroup","category","dueDate","priority","type"],asset:["type","model","manufacturer","purchasedDate","retireDate","unitPrice","warrantyExpiryDate","department"],dealsandoffers:["active"]}}},computed:{updateFields:function(){var _this=this,fields=[],_this$moduleObj=this.moduleObj,moduleObj=void 0===_this$moduleObj?{}:_this$moduleObj,excludeFields=this.excludeFields,moduleFields=this.moduleFields,$getProperty=this.$getProperty,decommissionFields=["decommission","decommissionedBy","viewRecommissionedBtn","commissionedTime"];return(0,validation/* isEmpty */.xb)(moduleFields)?"CUSTOM"===$getProperty(moduleObj.typeEnum,"_name","")&&(fields=moduleFields.filter((function(field){return!excludeFields.includes(field.name)}))):(moduleFields=moduleFields.filter((function(field){return!decommissionFields.includes(field.name)})),fields=this.updateFieldName[this.module]?moduleFields.filter((function(field){return!field.default||_this.updateFieldName[_this.module]&&_this.updateFieldName[_this.module].includes(field.name)})):moduleFields),fields},minDuration:function(){var durationConfig=this.durationConfig;if(this.$getProperty(durationConfig,"minInterval")){for(var minutes=[],minInterval=durationConfig.minInterval,i=0;i<60;i+=minInterval)minutes.push(i);return minutes}return this.$constants.MINUTES}},mounted:function(){this.getMetaFields()},methods:{getMetaFields:function(){var _this2=this,module=this.module;if(module){var url="/module/meta?moduleName=".concat(module);this.$http.get(url).then((function(response){_this2.moduleObj=response.data.meta.module}))}},changeDataType:function(criteria){if("DATE_TIME"===criteria.fieldObj[0].dataTypeEnum._name||"DATE"===criteria.fieldObj[0].dataTypeEnum._name){if(criteria.dateObject){var interval=this.$helpers.daysHoursMinuToSec(criteria.dateObject);criteria.value=1e3*interval}}else criteria.valueArray&&(
// let values = criteria.valueArray.join()
criteria.value={id:criteria.valueArray});this.$forceUpdate()},deleteRow:function(index){this.fieldChange.templateJson.fieldMatcher.splice(index,1)},close:function(){this.$emit("update:fieldUpdateValue",!1)}}},fields_FieldUpdateDialogvue_type_script_lang_js=FieldUpdateDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(fields_FieldUpdateDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldUpdateDialog=component.exports},
/***/855048:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FLookupField.vue?vue&type=template&id=473d4b8e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isFieldLoading}}):_c("div",{staticClass:"f-lookup-chooser f-lookup-chooser-container"},[_c("el-select",{ref:"selectBox",class:["fc-input-full-border-select2 width100",(!_vm.canHideLookupIcon||_vm.canShowQuickCreateIcon)&&"resource-search",_vm.isMultiple&&"fc-tag",_vm.hideDropDown&&!_vm.disabled&&"skip-disable"],attrs:{"collapse-tags":"",remote:_vm.isRemote,filterable:"",clearable:_vm.canHideLookupIcon,multiple:_vm.isMultiple,popperAppendToBody:_vm.popperAppendToBody,"remote-method":function(searchText){return _vm.remoteMethod(searchText)},loading:_vm.field.isDataLoading,"loading-text":_vm.$t("common._common.searching"),disabled:_vm.disabled||_vm.hideDropDown,placeholder:_vm.field.placeHolderText||"Select"},on:{change:_vm.recordSelected},model:{value:_vm.modelObj,callback:function($$v){_vm.modelObj=$$v},expression:"modelObj"}},[_c("div",{staticClass:"flRight d-flex",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},slot:"prefix"},[_vm.canShowSystemClear?_c("div",{staticClass:"flookup-remove-icon-alignment flookup-remove-icon",on:{click:_vm.clearData}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e(),_vm.canHideLookupIcon?_vm._e():_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openLookupFieldWizard(_vm.field)}}},[_c("inline-svg",{attrs:{src:"lookup",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1),_vm.canShowQuickCreateIcon?_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openQuickCreate()}}},[_c("el-tooltip",{attrs:{effect:"dark",content:"Add\n          "+_vm.moduleDisplayName,placement:"top"}},[_c("inline-svg",{attrs:{src:"add-pink",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1)],1):_vm._e()]),_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:option.value+" "+index,staticClass:"fc-input-full-border-select2 width100",attrs:{label:option.label,value:option.value}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.$validation.isEmpty(option.secondaryLabel)?_vm._e():_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.secondaryLabel))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13 pL10",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])}))],2),_vm.showQuickCreateData?_c("QuickCreateData",{attrs:{canShowDialog:_vm.showQuickCreateData,quickCreateField:_vm.field,setAddedRecord:_vm.setAddedRecord},on:{"update:canShowDialog":function($event){_vm.showQuickCreateData=$event},"update:can-show-dialog":function($event){_vm.showQuickCreateData=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(634338),__webpack_require__(990260)),constant=__webpack_require__(354754),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),FieldLoader=__webpack_require__(62979),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),LOOKUP_FIELD_PLACEHOLDER_MAP={people:{value:"${LOGGED_PEOPLE}",label:"Current User"},users:{value:"${LOGGED_USER}",label:"Current User"}},FLookupFieldvue_type_script_lang_js={name:"f-lookup-field",props:{model:{},field:{type:Object},disabled:{type:Boolean},siteId:{type:[Number,String]},categoryId:{type:Number},hideLookupIcon:{type:Boolean,default:!1},popperAppendToBody:{required:!1,type:Boolean,default:!0},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},preHookFilterConstruction:{type:Function,default:function(field){return field.filters}},hideDropDown:{type:Boolean,default:!1},skipLoading:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},userfilmoduleEnum:{type:String},parentModuleId:{type:Number},selectedOptions:{type:Array}},components:{FieldLoader:FieldLoader/* default */.Z,QuickCreateData:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(99813)]).then(__webpack_require__.bind(__webpack_require__,676433))}},data:function(){return{localSearch:!1,isLoadedOnce:!1,currentModelValue:!1,showQuickCreateData:!1}},computed:{customOptions:function(){var _ref=this||{},field=_ref.field,_ref2=field||{},lookupModule=_ref2.lookupModule;if((0,validation/* isEmpty */.xb)(lookupModule))return[];var _ref3=lookupModule||{},name=_ref3.name;return(0,validation/* isEmpty */.xb)(LOOKUP_FIELD_PLACEHOLDER_MAP[name])?[]:[LOOKUP_FIELD_PLACEHOLDER_MAP[name]]},modelObj:{get:function(){return this.model},set:function(value){this.currentModelValue=value,this.$emit("update:model",value)}},moduleDisplayName:function(){var field=this.field,_ref4=field.field||{},lookupModule=_ref4.lookupModule,_ref5=lookupModule||{},displayName=_ref5.displayName;return displayName},isFieldLoading:function(){var field=this.field,defaultIds=this.defaultIds,skipLoading=this.skipLoading,isLoadedOnce=this.isLoadedOnce;return!skipLoading&&!isLoadedOnce&&!(0,validation/* isEmpty */.xb)(defaultIds)&&field.isDataLoading},isPickListTypeModule:function(){var field=this.field,fieldObj=field.field,_ref6=fieldObj||field,lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},type=_ref7.type;
// type 1 is for base entity modules
return!!type&&1!==type},isRemote:function(){var localSearch=this.localSearch;return!localSearch},canHideLookupIcon:function(){var hideLookupIcon=this.hideLookupIcon,isPickListTypeModule=this.isPickListTypeModule,hideDropDown=this.hideDropDown,field=this.field,userfilmoduleEnum=this.userfilmoduleEnum,_ref8=field||{},config=_ref8.config,canHide=!1;if(!(0,validation/* isEmpty */.xb)(config)){var canShowLookupWizard=this.$getProperty(config,"canShowLookupWizard",null);(0,validation/* isNull */.Ft)(canShowLookupWizard)||(canHide=!canShowLookupWizard)}return!hideDropDown&&("PICK_LIST"===userfilmoduleEnum||(canHide||hideLookupIcon||isPickListTypeModule))},canShowQuickCreateIcon:function(){var disabled=this.disabled,field=this.field,_ref9=field||{},config=_ref9.config,canShow=!1;return(0,validation/* isEmpty */.xb)(config)||(canShow=this.$getProperty(config,"canShowQuickCreate")),disabled&&(canShow=!1),canShow},isSiteEnabled:function(){var siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;return!(0,validation/* isEmpty */.xb)(currentSiteId)},isMultiple:function(){var field=this.field;return!!field.multiple},resourceModuleName:function(){var field=this.field,config=field.config,lookupModuleName=field.lookupModuleName,_ref10=config||{},isFiltersEnabled=_ref10.isFiltersEnabled,filterValue=_ref10.filterValue;if(isFiltersEnabled&&constant/* default */.Z.LOOKUP_FILTER_ENABLED_FIELDS.includes(lookupModuleName)){var moduleName=constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue];return moduleName}return null},isResourceField:function(){var field=this.field,name=field.name,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field)||"resource"===name;return isResourceField},
// To prefill the existing values, we have to send default ids in picklist api
defaultIds:function(){var modelObj=this.modelObj,selectedOptions=this.selectedOptions,isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(modelObj)||!1,defaultIds=[],selectedOptionsArr=(selectedOptions||[]).map((function(option){return parseInt(option)}));return(0,validation/* isEmpty */.xb)(selectedOptions)?(0,validation/* isEmpty */.xb)(modelObj)||isPlaceHoldersEnabled||(defaultIds=(0,validation/* isArray */.kJ)(modelObj)?(0,toConsumableArray/* default */.Z)(modelObj):[modelObj]):defaultIds=(0,toConsumableArray/* default */.Z)(selectedOptionsArr),defaultIds=defaultIds.filter((function(val){return!constant/* default */.Z.FIELD_PLACEHOLDERS.includes(val)})),defaultIds},operatorLookupModule:function(){var field=this.field,_ref11=field||{},operatorLookupModule=_ref11.operatorLookupModule;return operatorLookupModule||{}},skipSiteFilter:function(){var field=this.field,_ref12=field||{},config=_ref12.config,_ref13=config||{},_ref13$skipSiteFilter=_ref13.skipSiteFilter,skipSiteFilter=void 0!==_ref13$skipSiteFilter&&_ref13$skipSiteFilter;return skipSiteFilter},canShowSystemClear:function(){var canHideLookupIcon=this.canHideLookupIcon,isClearable=this.isClearable,modelObj=this.modelObj,disabled=this.disabled;return!canHideLookupIcon&&!disabled&&(isClearable&&!(0,validation/* isEmpty */.xb)(modelObj))}},watch:{model:function(newVal){var _this=this,currentModelValue=this.currentModelValue,isRemote=this.isRemote;isEqual_default()(newVal,currentModelValue)||(isRemote&&this.getOptions({initialFetch:!0}).then((function(options){_this.$set(_this.field,"options",options)})),this.$set(this,"modelObj",newVal))},siteId:{handler:function(newVal,oldVal){var _this2=this,isSiteEnabled=this.isSiteEnabled,skipSiteFilter=this.skipSiteFilter;skipSiteFilter||isSiteEnabled||newVal===oldVal||this.getOptions({initialFetch:!0}).then((function(options){_this2.$set(_this2.field,"options",options)}))}},parentModuleId:{handler:function(newVal,oldVal){var _this3=this;newVal!==oldVal&&this.getOptions({initialFetch:!0}).then((function(options){_this3.$set(_this3.field,"options",options)}))}},operatorLookupModule:{handler:function(newVal,oldVal){var _this4=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this4.$set(_this4.field,"options",options)}))}},"field.clientCriteria":{handler:function(newVal,oldVal){var _this5=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this5.$set(_this5.field,"options",options)}))}},categoryId:{handler:function(newVal,oldVal){var _this6=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this6.$set(_this6.field,"options",options)}))}},"field.options":{handler:function(value){var modelObj=this.modelObj;if(!(0,validation/* isEmpty */.xb)(value))if((0,validation/* isEmpty */.xb)(modelObj))this.field.selectedItems=[];else if((0,validation/* isArray */.kJ)(modelObj)){var selectedItems=value.filter((function(option){return modelObj.includes(option.value)}));this.field.selectedItems=selectedItems}else{var selectedItem=value.find((function(option){return option.value===modelObj}));this.field.selectedItems=[selectedItem]}},immediate:!0},isLoadedOnce:{handler:function(value){value&&this.$emit("optionsLoadedOnce")}}},created:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var fetchOptionsOnLoad,field,modelObj,customOptions,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:
// Have to skip fetching options initially, when module is 'resource' and filters is not enabled
if(fetchOptionsOnLoad=_this7.fetchOptionsOnLoad,field=_this7.field,modelObj=_this7.modelObj,customOptions=_this7.customOptions,_this7.currentModelValue=modelObj,_this7.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx,!fetchOptionsOnLoad){_context2.next=12;break}return _context2.next=6,_this7.getOptions({initialFetch:!0});case 6:if(_context2.t0=_context2.sent,_context2.t0){_context2.next=9;break}_context2.t0=[];case 9:options=_context2.t0,_this7.$set(_this7.field,"options",[].concat((0,toConsumableArray/* default */.Z)(customOptions),(0,toConsumableArray/* default */.Z)(options))),_this7.$set(_this7,"isLoadedOnce",!0);case 12:_this7.remoteMethod=_this7.$helpers.debounce(function(){var _ref14=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(searchText){var isDataLoading,_options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isDataLoading=field.isDataLoading,isDataLoading){_context.next=6;break}return _context.next=4,_this7.getOptions({searchText:searchText});case 4:_options=_context.sent,_this7.$set(_this7.field,"options",_options);case 6:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref14.apply(this,arguments)}}(),1e3);case 13:case"end":return _context2.stop()}}),_callee2)})))()},methods:{focus:function(){(0,validation/* isEmpty */.xb)(this.$refs["selectBox"])||this.$refs["selectBox"].focus()},getOptions:function(params){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var searchText,initialFetch,fetchOptionsMethod,field,siteId,categoryId,isRemote,defaultIds,resourceModuleName,isResourceField,skipSiteFilter,selectedOptions,_field$filters,fieldFilters,options,filters,props,perPageCount,_yield$_this8$fetchOp,_yield$_this8$fetchOp2,optionsArr,error,_ref15,message,_yield$getFieldOption,_yield$getFieldOption2,_optionsArr,_error,meta,_ref16,_message,_meta$localSearch,localSearch;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
/*
                Have to return empty options if field is of resourcetype, if filters havent be enabled
                and if no values selected already
              */
if(searchText=params.searchText,initialFetch=params.initialFetch,fetchOptionsMethod=_this8.fetchOptionsMethod,field=_this8.field,siteId=_this8.siteId,categoryId=_this8.categoryId,isRemote=_this8.isRemote,defaultIds=_this8.defaultIds,resourceModuleName=_this8.resourceModuleName,isResourceField=_this8.isResourceField,skipSiteFilter=_this8.skipSiteFilter,selectedOptions=_this8.selectedOptions,_field$filters=field.filters,fieldFilters=void 0===_field$filters?{}:_field$filters,options=[],(0,validation/* isEmpty */.xb)(resourceModuleName)||(field.resourceLookupModuleName=resourceModuleName),filters=_this8.preHookFilterConstruction(field),(0,validation/* isEmpty */.xb)(filters)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fieldFilters),filters)),(0,validation/* isEmpty */.xb)(categoryId)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field.filters),{},{category:{operator:"is",value:["".concat(categoryId)]}})),props={field:field,searchText:searchText},skipSiteFilter||(props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{siteId:siteId})),!(isResourceField&&(0,validation/* isEmpty */.xb)(resourceModuleName)&&(0,validation/* isEmpty */.xb)(defaultIds))){_context3.next=12;break}return _context3.abrupt("return",options);case 12:if(initialFetch&&isRemote&&(perPageCount=defaultIds.length>50?defaultIds.length:50,props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{page:1,perPage:perPageCount,defaultIds:defaultIds}),((0,validation/* isEmpty */.xb)(resourceModuleName)&&isResourceField||!(0,validation/* isEmpty */.xb)(selectedOptions))&&(
// Have to fetch only selected values, which is same as the number of defaultids
props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{perPage:defaultIds.length}))),_this8.$set(field,"isDataLoading",!0),(0,validation/* isEmpty */.xb)(fetchOptionsMethod)){_context3.next=25;break}return _context3.next=17,_this8.fetchOptionsMethod(props);case 17:_yield$_this8$fetchOp=_context3.sent,_yield$_this8$fetchOp2=_yield$_this8$fetchOp.options,optionsArr=void 0===_yield$_this8$fetchOp2?[]:_yield$_this8$fetchOp2,error=_yield$_this8$fetchOp.error,error&&(_ref15=error||{},message=_ref15.message,_this8.$message.error(message||"Error Occured")),options=optionsArr,_context3.next=35;break;case 25:return _context3.next=27,(0,picklist/* getFieldOptions */._K)(props);case 27:_yield$getFieldOption=_context3.sent,_yield$getFieldOption2=_yield$getFieldOption.options,_optionsArr=void 0===_yield$getFieldOption2?[]:_yield$getFieldOption2,_error=_yield$getFieldOption.error,meta=_yield$getFieldOption.meta,_error&&(_ref16=_error||{},_message=_ref16.message,_this8.$message.error(_message||"Error Occured")),meta&&(0,validation/* isEmpty */.xb)(searchText)&&(_meta$localSearch=meta.localSearch,localSearch=void 0!==_meta$localSearch&&_meta$localSearch,_this8.$set(_this8,"localSearch",localSearch)),options=_optionsArr;case 35:return _this8.$set(field,"isDataLoading",!1),_context3.abrupt("return",options);case 37:case"end":return _context3.stop()}}),_callee3)})))()},clearData:function(){this.$emit("update:model",""),this.recordSelected("")},recordSelected:function(value){var field=this.field,_this$field$options=this.field.options,options=void 0===_this$field$options?[]:_this$field$options,isMultiple=this.isMultiple,selectedValues=null;isMultiple?(selectedValues=options.filter((function(e){return(value||[]).includes(e.value)})),field.selectedItems=selectedValues):(selectedValues=options.find((function(e){return e.value==value}))||{},field.selectedItems=[],(0,validation/* isEmpty */.xb)(selectedValues)||(field.selectedItems=[selectedValues])),this.$emit("recordSelected",selectedValues,field)},openLookupFieldWizard:function(field){var disabled=this.disabled;disabled||this.$emit("showLookupWizard",field,!0)},openQuickCreate:function(){var disabled=this.disabled;disabled||(this.showQuickCreateData=!0)},setAddedRecord:function(props){var record=props.record,_ref17=record||{},id=_ref17.id,name=record.displayName||record.name||record.subject,field=this.field;field.selectedItems=[{value:id,label:name}],this.$emit("setLookupFieldValue",{field:(0,objectSpread2/* default */.Z)({},field)})}}},forms_FLookupFieldvue_type_script_lang_js=FLookupFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FLookupFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupField=component.exports},
/***/62979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FieldLoader.vue?vue&type=template&id=7252e23e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"field-loading loading-shimmer"}):_vm._e()},staticRenderFns=[],FieldLoadervue_type_script_lang_js={props:{isLoading:{type:Boolean,required:!0}}},forms_FieldLoadervue_type_script_lang_js=FieldLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FieldLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldLoader=component.exports},
/***/24187:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return components_FieldPicker}});
// EXTERNAL MODULE: ./node_modules/@facilio/utils/validation.js
var render,staticRenderFns,validation=__webpack_require__(990260),FieldPicker=__webpack_require__(965797),FieldPickervue_type_script_lang_js={extends:FieldPicker/* default */.Z,methods:{save:function(){this.$emit("save",this.list),(0,validation/* isEmpty */.xb)(this.list)||this.handleclose()}}},components_FieldPickervue_type_script_lang_js=FieldPickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FieldPickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,components_FieldPicker=component.exports;
// EXTERNAL MODULE: ./src/components/fields/FieldPicker.vue + 6 modules
},
/***/930871:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FilterCondition}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/FilterCondition.vue?vue&type=template&id=07f5ab06&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"filter-condition-container"},[_c("el-popover",{attrs:{value:!0,visibleArrow:!1,popperClass:_vm.popoverClass}},[_c("outside-click",{staticClass:"filter-condition-block",attrs:{visibility:!0},on:{onOutsideClick:function($event){return _vm.close()}}},[_c("div",{staticClass:"filter-condition-body"},[_vm.isTag?_c("div",{staticClass:"fc-dark-blue-txt13 f13 pointer mL10 pT10 pB10 fwBold",on:{click:function($event){return $event.stopPropagation(),_vm.$emit("back")}}},[_c("i",{staticClass:"el-icon-back fw6 mR10 fc-dark-blue-txt13"}),_vm._v(" Back to Filter List ")]):_vm._e(),_vm.currentFilterProxy?_c("div",{staticClass:"filter-condition-radion-btn pT10"},[_vm.dateTimeFields.includes(_vm.fieldName)||["DATE_TIME","DATE"].includes(_vm.currentFilterProxy.operator)?_c("div",[_vm._l(_vm.currentFilterProxy.options,(function(label,value){return _c("el-radio",{key:value,staticClass:"fc-radio-btn pB10",attrs:{label:value},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},[_vm._v(" "+_vm._s(label)+" ")])})),"date"===_vm.currentFilterProxy.type?_c("div",[_vm.currentFilterProxy.hideDateRange?_vm._e():_c("el-radio",{staticClass:"fc-radio-btn pB10",attrs:{label:"20",value:"20"},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},[_vm._v(" Custom ")]),"20"===_vm.currentFilterValueProxy?_c("f-date-picker",{staticClass:"position-relative fc-subheader-right-search",attrs:{type:"datetimerange","value-format":"timestamp",format:"dd-MM-yyyy HH:mm"},on:{change:_vm.applyFilters},model:{value:_vm.currentFilterProxy.dateRange,callback:function($$v){_vm.$set(_vm.currentFilterProxy,"dateRange",$$v)},expression:"currentFilterProxy.dateRange"}}):_vm._e()],1):_vm._e()],2):_c("div",{staticClass:"filter-radio-display"},[_vm._l(_vm.conditionList,(function(condition){return[_vm.allowedConditions(condition)?_c("el-radio",{key:condition.operatorId,staticClass:"fc-radio-btn pB10",attrs:{label:condition.operatorId},model:{value:_vm.operatorId,callback:function($$v){_vm.operatorId=$$v},expression:"operatorId"}},[_vm._v(" "+_vm._s(condition.operator)+" "),"select"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-select",{staticClass:"search-select-comp2 fc-tag mT10 search-filter-border-left fc-search-select-width select-border-left",attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"Select"},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},_vm._l(_vm.currentFilterProxy.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1),["resourceType","lookup"].includes(_vm.currentFilterProxy.displayType)&&![1,2].includes(condition.operatorId)&&condition.operatorId===_vm.operatorId?_c("div",[_vm.$fieldUtils.isLookupDropDownField(_vm.metaInfo.fields.find((function(v){return v.name===_vm.fieldName})))?_c("FLookupFieldWrapper",{staticClass:"search-input-comp search-select-comp2 fc-tag mT10 search-filter-border-left fc-search-select-width select-border-left",attrs:{hideDropDown:_vm.hideDropDownForLookup,field:_vm.getFieldObj(_vm.currentFilterProxy,_vm.fieldName),label:_vm.currentFilterProxy.selectedLabel},on:{recordSelected:_vm.setLookUpFilter,showingLookupWizard:function($event){_vm.showingLookupWizard=!0}},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}}):_vm._e()],1):_vm._e(),"string"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"text",autofocus:!0},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})],1),"number"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"number",autofocus:!0},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})],1),"decimal"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"number",autofocus:!0},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})],1),["asset","space"].includes(_vm.currentFilterProxy.displayType)&&![1,2].includes(condition.operatorId)&&condition.operatorId===_vm.operatorId?_c("div",[_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border fc-tag mT1 fc-search-select-width mT10 search-filter-border-left",attrs:{filterable:"",multiple:"","collapse-tags":"",value:_vm.$validation.isEmpty(_vm.currentFilterValueProxy)?null:[1],disabled:""}},[_c("el-option",{attrs:{label:_vm.spaceAssetFilter,value:1}})],1),_c("i",{staticClass:"el-input__icon el-icon-search filter-spacce-condition-search",attrs:{slot:"suffix"},on:{click:function($event){return _vm.spaceAssetProps(_vm.currentFilterProxy)}},slot:"suffix"})],1),_vm.chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{showAsset:"asset"===_vm.currentFilterProxy.displayType,initialValues:_vm.initialValues,visibility:_vm.chooserVisibility,hideBanner:!0},on:{associate:function($event){return _vm.associateResource($event,_vm.currentFilterProxy)},"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e()],1):_vm._e()]):_vm._e()]}))],2)]):_vm._e()]),_c("div",{staticClass:"search-select-filter-btn"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold",on:{click:function($event){return _vm.applyFilters()}}},[_vm._v(" DONE ")])],1)])],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),OutsideClick=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(21864)),validation=__webpack_require__(990260),SpaceAssetMultiChooser=__webpack_require__(673362),FDatePicker=__webpack_require__(358551),SearchTagMixin=__webpack_require__(200689),FLookupFieldWrapper=__webpack_require__(201117),FilterConditionvue_type_script_lang_js={props:["fieldName","isTag","popClass","hideDropDownForLookup"],components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,FDatePicker:FDatePicker/* default */.Z,OutsideClick:OutsideClick/* default */.Z,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z},mixins:[SearchTagMixin/* default */.Z],data:function(){return{initialValues:null,chooserVisibility:!1,excludeOperators:[74,75,76,77,78,79,35,87,52,53],operatorId:null,operators:{subject:"STRING",title:"STRING",primaryContactName:"STRING",description:"STRING",name:"STRING",primaryContactEmail:"STRING",primaryContactPhone:"STRING",assetCategoryId:"LOOKUP",kpiCategory:"LOOKUP",assetDepartment:"LOOKUP",siteId:"LOOKUP",assetType:"LOOKUP",category:"LOOKUP",dueDate:"DATE",actualWorkEnd:"DATE",space:"LOOKUP",visitedSpace:"LOOKUP",asset:"LOOKUP",resource:"LOOKUP",sourceType:"NUMBER",ticketType:"LOOKUP",typeId:"LOOKUP",status:"LOOKUP",moduleState:"LOOKUP",assignedTo:"LOOKUP",registeredBy:"LOOKUP",executedBy:"LOOKUP",frequency:"LOOKUP",createdTime:"LOOKUP",tasks:"LOOKUP",priority:"LOOKUP",alarmType:"NUMBER",acknowledgedBy:"LOOKUP",severity:"LOOKUP",previousSeverity:"LOOKUP",readingAlarmCategory:"LOOKUP",readingrule:"LOOKUP",tenant:"LOOKUP"},popoverClass:"right-0 p0",showingLookupWizard:!1}},computed:{currentFilterProxy:{get:function(){var fieldName=this.fieldName,filterObjectsData=this.filterObjectsData;return filterObjectsData[fieldName]||{}},set:function(value){var filterObjectsData=this.filterObjectsData,fieldName=this.fieldName;this.$set(filterObjectsData,fieldName,value)}},currentFilterValueProxy:{get:function(){var currentFilterProxy=this.currentFilterProxy;return currentFilterProxy.value||[]},set:function(value){this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{value:value})}},spaceAssetFilter:function(){var currentFilterProxy=this.currentFilterProxy,filter="";return(0,validation/* isEmpty */.xb)(currentFilterProxy.value)||(filter=currentFilterProxy.value.length,"asset"===currentFilterProxy.displayType?filter+="Asset":filter+="Space",currentFilterProxy.value.length>1&&(filter+="s")),filter},conditionList:function(){var type=this.$getProperty(this.operators,this.fieldName,null),_ref=this.metaInfo||{},_ref$operators=_ref.operators,operators=void 0===_ref$operators?{}:_ref$operators;return(0,validation/* isEmpty */.xb)(type)?(type=this.currentFilterProxy,operators[type.operator]):operators[type]}},watch:{fieldName:{handler:function(){var currentFilterProxy=this.currentFilterProxy;this.operatorId=this.$getProperty(currentFilterProxy,"operatorId",null)},immediate:!0},popClass:{handler:function(newValue){newValue&&(this.popoverClass=newValue,this.popoverClass+=" p0")},immediate:!0}},methods:{allowedConditions:function(label){return!("BUILDING_IS"===label._name&&"space"!==this.fieldName||"LOOKUP"===label._name||this.excludeOperators.includes(label.operatorId))},associateResource:function(resource,field){this.chooserVisibility=!1,field.value=resource.resourceList?resource.resourceList.map((function(res){return res.id})):[],this.applyFilters()},applyFilters:function(){this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{operatorId:this.operatorId}),this.applyFilter(),this.close()},close:function(){this.chooserVisibility||this.showingLookupWizard||this.$emit("close")}}},components_FilterConditionvue_type_script_lang_js=FilterConditionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FilterConditionvue_type_script_lang_js,render,staticRenderFns,!1,null,"07f5ab06",null)
/* harmony default export */,FilterCondition=component.exports},
/***/200689:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SearchTagMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var render,staticRenderFns,defineProperty=__webpack_require__(482482),slicedToArray=__webpack_require__(554621),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(336585),__webpack_require__(450886),__webpack_require__(212826),__webpack_require__(420629)),validation=__webpack_require__(990260),clone=__webpack_require__(766678),clone_default=__webpack_require__.n(clone),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),SPACE_FIELDS=["space","visitedSpace","resourceIdSpace"],OPERATOR_CHECK={isEmpty:1,isNotEmpty:2,related:88},SearchTagMixinvue_type_script_lang_js={created:function(){var moduleName=this.moduleName,singleFieldFilterObj=this.singleFieldFilterObj;if((0,validation/* isUndefined */.o8)(singleFieldFilterObj)&&moduleName){var promises=[this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadAssetType"),this.$store.dispatch("loadRoles"),this.$store.dispatch("loadAssetDepartment"),this.$store.dispatch("loadSites"),this.$store.dispatch("loadInventoryCategory"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadReadingAlarmCategory"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadTicketStatus",moduleName),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadUsers")];this.searchMetaInfo||promises.push(this.$store.dispatch("view/loadModuleMeta",moduleName)),Promise.all(promises).catch((function(){})).finally(this.initSearchFields)}},data:function(){return{excludeCustomfieldsForSpecificModules:["readingrule","preventivemaintenance"],dateTimeFields:["createdTime","dueDate","responseDueDate","actualWorkEnd","acknowledgedTime","warrantyExpiryDate","clearedTime","modifiedTime"]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({showSearch:function(state){return state.search.active},users:function(state){return state.users},groups:function(state){return state.groups},viewMetaInfo:function(state){return state.view.metaInfo}})),(0,vuex_esm/* mapGetters */.Se)({getFilterConfig:"search/getFilterConfig"})),{},{metaInfo:function(){return this.viewMetaInfo},appliedFilters:function(){var $route=this.$route,_ref=$route||{},search=_ref.query.search;return(0,validation/* isEmpty */.xb)(search)?null:JSON.parse(this.$route.query.search)},filterObjectsData:{get:function(){var config=this.getFilterConfig;return this.$getProperty(config,"data",null)},set:function(value){var config=this.getFilterConfig||{};this.$store.dispatch("search/updateFilterConfig",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},config),{},{data:value}))}}}),watch:{moduleName:function(newVal,oldVal){if(newVal&&newVal!==oldVal&&(0,validation/* isUndefined */.o8)(this.singleFieldFilterObj)){var moduleName=this.moduleName,excludeCustomfieldsForSpecificModules=this.excludeCustomfieldsForSpecificModules,canAddCustomFields=moduleName&&!excludeCustomfieldsForSpecificModules.includes(moduleName),payload={moduleName:moduleName,canAddCustomFields:canAddCustomFields,includeAllMetaFields:this.includeAllMetaFields};this.searchMetaInfo||this.$store.dispatch("view/loadModuleMeta",newVal),this.$store.dispatch("loadTicketStatus",newVal),this.$store.dispatch("search/init",payload)}}},methods:{initSearchFields:function(){var _this=this,singleFieldFilterObj=this.singleFieldFilterObj;if((0,validation/* isUndefined */.o8)(singleFieldFilterObj)){if(this.config){var config=cloneDeep_default()(this.config);this.$store.dispatch("search/updateFilterConfig",config)}var excludeCustomfieldsForSpecificModules=this.excludeCustomfieldsForSpecificModules,moduleName=this.moduleName,metaInfo=this.metaInfo,includeAllMetaFields=this.includeAllMetaFields,canAddCustomFields=moduleName&&!excludeCustomfieldsForSpecificModules.includes(moduleName);this.$store.dispatch("search/init",{moduleName:moduleName,canAddCustomFields:canAddCustomFields,includeAllMetaFields:includeAllMetaFields,metaInfo:metaInfo}).finally((function(){return _this.setFilterApplied()}))}},getFieldObj:function(currentFilterProxy,fieldName){var metaInfo=this.metaInfo;if(88!==currentFilterProxy.operatorId){var searchFieldName=fieldName;["resourceIdSpace","resourceIdAsset"].includes(fieldName)&&(searchFieldName="space");var fieldObj=metaInfo.fields.find((function(field){return field.name===searchFieldName}));return"resourceType"===currentFilterProxy.displayType&&this.$set(fieldObj,"multiple",!0),"siteId"===fieldName?(this.$set(fieldObj,"lookupModule",{name:"site",displayName:"Site"}),this.$set(fieldObj,"multiple",!0)):"resourceIdSpace"===fieldName?(this.$set(fieldObj,"lookupModule",{name:"basespace",displayName:"Space"}),this.$set(fieldObj,"multiple",!0)):"resourceIdAsset"===fieldName&&(this.$set(fieldObj,"lookupModule",{name:"asset",displayName:"Asset"}),this.$set(fieldObj,"multiple",!0)),fieldObj}return"siteId"===fieldName?{lookupModule:{name:"site"}}:{lookupModule:{name:fieldName}}},setFilterApplied:function(){var _this2=this,appliedFilters=(0,validation/* isEmpty */.xb)(this.appliedFilters)?{}:this.appliedFilters,filters=Object.keys(appliedFilters||{}),filterObjectsData=clone_default()(this.filterObjectsData||{});Object.entries(filterObjectsData).forEach((function(_ref2){var _ref3=(0,slicedToArray/* default */.Z)(_ref2,2),fieldName=_ref3[0],filterData=_ref3[1],key=filterData.key?filterData.key:fieldName;if(filters.includes(key)){var filterObj=_this2.$getProperty(appliedFilters,key,{});(0,validation/* isArray */.kJ)(filterObj)&&(filterObj=filterObj[0]);var _filterObj=filterObj,operatorId=_filterObj.operatorId,value=_filterObj.value,selectedLabel=_filterObj.selectedLabel,_ref4=_this2.getFieldObj({},"siteId")||{},_ref4$multiple=_ref4.multiple,multiple=void 0!==_ref4$multiple&&_ref4$multiple;if(["string","number"].includes(filterData.displayType))filterData.value=(0,validation/* isEmpty */.xb)(value)?"":value[0];else if("lookup"===filterData.displayType)
//filterData.value = !isEmpty(value) ? value[0] : '' // replacement for this is given in below if-else condition
!(0,validation/* isEmpty */.xb)(value)&&(0,validation/* isArray */.kJ)(value)&&value.length>0?multiple||1!=value.length?filterData.value=value:filterData.value=value[0]:filterData.value="",filterData.selectedLabel=selectedLabel;else if(filterData.customdate){if(!(0,validation/* isEmpty */.xb)(value)){var dateRange=value.map((function(date){return parseInt(date)}));filterData.dateRange=dateRange}filterData.value=operatorId+""}else filterData.value=value;filterData.operatorId=operatorId}})),this.filterObjectsData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.filterObjectsData),filterObjectsData)},spaceAssetProps:function(filterData){this.chooserVisibility=!0;var selectedResources=this.$getProperty(filterData,"value",[]).map((function(id){return{id:parseInt(id)}}));this.initialValues={isIncludeResource:!0,selectedResources:selectedResources}},operatorIdForFields:function(filterData,fieldName){var operatorId;return operatorId=(0,validation/* isEmpty */.xb)(filterData.operatorId)?"resourceIdSpace"===fieldName||"resourceIdAsset"===fieldName?15:SPACE_FIELDS.includes(fieldName)?38:["subject","name","title"].includes(fieldName)||"STRING"===this.$getProperty(filterData,"operator","")?5:["sourceType","alarmType"].includes(fieldName)||["NUMBER","DECIMAL"].includes(this.$getProperty(filterData,"operator",""))?9:"isAcknowledged"===fieldName||"BOOLEAN"===this.$getProperty(filterData,"operator","")?15:"ENUM"===this.$getProperty(filterData,"operator","")?54:36:filterData.operatorId,operatorId},setOperatorId:function(fieldData,fieldName){var returnId=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,validation/* isEmpty */.xb)(fieldName)&&(fieldName=this.fieldName),(0,validation/* isEmpty */.xb)(fieldData)&&(fieldData=this.$getProperty(this.filterObjectsData,fieldName,null));var operatorId=this.operatorIdForFields(fieldData,fieldName);if(returnId)return operatorId;this.$setProperty(fieldData,"operatorId",operatorId)},constructDateFilter:function(filterValue,fieldName){filterValue=filterValue.split("_");var operatorId=1===filterValue.length?parseInt(filterValue[0]):parseInt(filterValue[1]),filter={operatorId:operatorId};if(20===operatorId){var filterData=this.$getProperty(this.filterObjectsData,fieldName,null),dateRange=this.$getProperty(filterData,"dateRange",null);if((0,validation/* isEmpty */.xb)(dateRange))return!1;filter.value=dateRange.map((function(date){return date+""}))}else[39,40,41,50,59,60,61].includes(operatorId)&&(filter.value=[filterValue[0]]);return filter},setCustomDateFilters:function(filters,fieldName){var filter,_this3=this,filterData=this.$getProperty(this.filterObjectsData,fieldName),filterVal=filterData.value,key=filterData.key||fieldName;(0,validation/* isArray */.kJ)(filterVal)?(filters[key]=[],filterVal.forEach((function(fval){filter=_this3.constructDateFilter(fval,fieldName),filter&&filters[key].push(filter)}))):(filter=this.constructDateFilter(filterVal,fieldName),filter&&(filters[key]=filter))},applyFilter:function(filterData){(0,validation/* isEmpty */.xb)(filterData)?filterData=this.filterObjectsData:this.filterObjectsData=filterData;var filters=this.formatDataForFilter(filterData);(0,validation/* isEmpty */.xb)(filters)?this.$store.dispatch("search/resetFilters"):this.$store.dispatch("search/applyFilters",filters),this.showFilterCondition=!1,this.close()},formatDataForFilter:function(filterData){var _this4=this,filters={},_loop=function(){var field=filterData[fieldName],key=field.key?field.key:fieldName;if(!(0,validation/* isEmpty */.xb)(field.value)||[OPERATOR_CHECK.isEmpty,OPERATOR_CHECK.isNotEmpty].includes(field.operatorId))if(field.customdate)_this4.setCustomDateFilters(filters,fieldName);else{var filterObj={operatorId:_this4.setOperatorId(field,fieldName,!0)};if([OPERATOR_CHECK.isEmpty,OPERATOR_CHECK.isNotEmpty].includes(field.operatorId)){var _ref5=_this4.$getProperty(filterData,fieldName,null)||{},operator=_ref5.operator;["subject","name","title"].includes(fieldName)||!(0,validation/* isEmpty */.xb)(operator)&&"STRING"===operator?field.value="":field.value=[]}if("assignedTo"===fieldName){var users=[],groups=[];field.value.forEach((function(user){-1!==user.indexOf("_group")?groups.push(user.substring(0,user.indexOf("_group"))):users.push(user)})),users.length&&(filterObj.value=users),groups.length&&(filterObj.value=groups,key="assignedToId"===key?"assignmentGroupId":"assignmentGroup"),filters[key]=filterObj}else{var value;if((0,validation/* isArray */.kJ)(field.value)?(0,validation/* isObject */.Kn)(field.value[0])?(field.value[0].value=_this4.$getProperty(field.value[0],"value")+"",value=field.value):value=field.value.map((function(val){return val+""})):value=[field.value],filterObj.value=value,SPACE_FIELDS.includes(fieldName)||"asset"===fieldName||"resourceIdAsset"==fieldName?(key=field.key||fieldName,filters[key]||(filters[key]=[]),(0,validation/* isObject */.Kn)(filters[key])?(0,validation/* isEmpty */.xb)(filters[key].value)||(filters[key]=(0,objectSpread2/* default */.Z)({},filterObj)):filters[key].push(filterObj)):filters[key]=filterObj,"lookup"===field.displayType){
//Since fieldValue is array of only one object
(0,validation/* isArray */.kJ)(filters[key])&&(filters[key]=filters[key][0]);var fieldValue=filters[key].value,_ref6=_this4.getFieldObj(field,fieldName)||{},_ref6$multiple=_ref6.multiple,multiple=void 0!==_ref6$multiple&&_ref6$multiple;(0,validation/* isArray */.kJ)(fieldValue)&&!multiple&&(fieldValue=fieldValue[0]),filters[key]["selectedLabel"]=field.selectedLabel,
// filters[key].value = !isEmpty(fieldValue) ? [fieldValue.toString()]: []
(0,validation/* isEmpty */.xb)(fieldValue)?filters[key].value=[]:filters[key].value=multiple?fieldValue:[fieldValue.toString()],OPERATOR_CHECK.related===field.operatorId&&(filters[key].relatedFieldName=field.relatedFieldName)}}}};for(var fieldName in filterData)_loop();return filters},setLookUpFilter:function(filter){if((0,validation/* isArray */.kJ)(filter)){var valueArr=[];filter.forEach((function(item){var key=item.hasOwnProperty("id")?"id":"value";valueArr.push(item[key])})),this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{value:valueArr})}else{var value=filter.value,selectedLabel=filter.label;this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{value:value,selectedLabel:selectedLabel})}this.showingLookupWizard=!1,this.applyFilter()},resetFilterData:function(){var _this5=this,appliedFilters=(0,validation/* isEmpty */.xb)(this.appliedFilters)?{}:this.appliedFilters,filters=Object.keys(appliedFilters||{});Object.entries(this.filterObjectsData||{}).forEach((function(_ref7){var _ref8=(0,slicedToArray/* default */.Z)(_ref7,2),fieldName=_ref8[0],filterData=_ref8[1],key=filterData.key?filterData.key:fieldName;filters.includes(key)||(filterData.value=(0,validation/* isArray */.kJ)(filterData.value)?[]:"",delete filterData.operatorId,_this5.filterObjectsData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this5.filterObjectsData),{},(0,defineProperty/* default */.Z)({},fieldName,filterData)))}))}}},components_SearchTagMixinvue_type_script_lang_js=SearchTagMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SearchTagMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SearchTagMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
},
/***/134077:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScriptEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/setupActions/components/ScriptEditor.vue?vue&type=template&id=3fe27b0f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container fc-dialog-center-body-p0",attrs:{visible:!0,width:"60%",title:_vm.$t("common.products.script"),"append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("CodeMirror",{attrs:{codeeditor:!0},model:{value:_vm.scriptData.workflowContext.workflowV2String,callback:function($$v){_vm.$set(_vm.scriptData.workflowContext,"workflowV2String",$$v)},expression:"scriptData.workflowContext.workflowV2String"}})],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.actionSave}},[_vm._v(" Save ")])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),CodeMirror=__webpack_require__(919324),ScriptModel=__webpack_require__(721486),ScriptEditorvue_type_script_lang_js={props:["actionObj","moduleName"],components:{CodeMirror:CodeMirror/* default */.Z},data:function(){return{scriptData:null}},created:function(){var actionObj=this.actionObj,moduleName=this.moduleName,scriptObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},actionObj||{}),{},{moduleName:moduleName});this.scriptData=new ScriptModel/* ScriptModel */.q(scriptObj)},methods:{closeDialog:function(){this.$emit("onClose")},actionSave:function(){var isValid=this.scriptData.validate();isValid?(this.$emit("onSave",this.scriptData.serialize()),this.closeDialog()):this.$message.error("Script is Empty")}}},components_ScriptEditorvue_type_script_lang_js=ScriptEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ScriptEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScriptEditor=component.exports},
/***/292974:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return StatusUpdate}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/setupActions/components/StatusUpdate.vue?vue&type=template&id=5163edd4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"40%",title:_vm.$t("setup.setup.change_status"),"custom-class":"dialog-header-padding","append-to-body":!0,"close-on-click-modal":!1,"show-close":!1}},[_vm.isLoading?_c("div",{staticClass:"height120"},[_c("span",{staticClass:"rectangle loading-shimmer"})]):_c("div",{staticClass:"height120 overflow-y-scroll"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mT5",attrs:{filterable:""},model:{value:_vm.statusUpdateObj.new_state,callback:function($$v){_vm.$set(_vm.statusUpdateObj,"new_state",$$v)},expression:"statusUpdateObj.new_state"}},_vm._l(_vm.statusList,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.actionSave}},[_vm._v(" "+_vm._s(_vm.$t("common._common.save")))])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),ChangeStatusModel=__webpack_require__(367389),validation=__webpack_require__(990260),StatusUpdatevue_type_script_lang_js={props:["actionObj","moduleName","moduleId"],data:function(){return{statusUpdateObj:{},statusList:{},isLoading:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var metaModuleId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.isLoading=!0,_this.statusUpdateObj=new ChangeStatusModel/* ChangeStatusModel */.M(_this.actionObj||{}),metaModuleId=null,!(0,validation/* isEmpty */.xb)(_this.moduleId)){_context.next=7;break}return _context.next=6,_this.fetchModuleId();case 6:metaModuleId=_context.sent;case 7:return _context.prev=7,_context.next=10,ChangeStatusModel/* ChangeStatusModel */.M.getTicketStatus(_this.moduleId||metaModuleId);case 10:_this.statusList=_context.sent,_context.next=16;break;case 13:_context.prev=13,_context.t0=_context["catch"](7),_this.$message.error(_context.t0.message);case 16:_this.isLoading=!1;case 17:case"end":return _context.stop()}}),_callee,null,[[7,13]])})))()},methods:{fetchModuleId:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,ChangeStatusModel/* ChangeStatusModel */.M.fetchMetaModuleId(_this2.moduleName);case 3:return _context2.abrupt("return",_context2.sent);case 6:_context2.prev=6,_context2.t0=_context2["catch"](0),_this2.$message.error(_context2.t0.message);case 9:case"end":return _context2.stop()}}),_callee2,null,[[0,6]])})))()},closeDialog:function(){this.$emit("onClose")},actionSave:function(){this.$emit("onSave",this.statusUpdateObj.serialize()),this.closeDialog()}}},components_StatusUpdatevue_type_script_lang_js=StatusUpdatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_StatusUpdatevue_type_script_lang_js,render,staticRenderFns,!1,null,"5163edd4",null)
/* harmony default export */,StatusUpdate=component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/888776:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewStateTransition}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/NewStateTransition.vue?vue&type=template&id=2920f88d&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-form",{attrs:{model:_vm.stateTransitionObj,"label-position":"top"}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage}}),_c("div",{staticClass:"new-header-container pL20 pR30 state-transition-header"},[_c("div",{staticClass:"d-flex"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mR10 pointer",attrs:{title:"Go Back"},on:{click:_vm.cancel}},[_c("inline-svg",{attrs:{src:"left-arrow",iconClass:"icon vertical-middle"}})],1),_c("div",{staticClass:"stateflow-setup-title"},[_vm._v(" "+_vm._s(_vm.isNew?"New State Transition":"Edit State Transition")+" ")])]),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer pT3",staticStyle:{color:"red"},attrs:{title:"Delete transition"},on:{click:function($event){return _vm.remove()}}})]),_vm.showProgressBar?_c("div",{class:["sidebar-loader",_vm.saving&&"on"]}):_vm._e(),_vm.loading?_c("div",{staticClass:"new-body-modal new-stateflow-modal new-stateflow-transition-modal"},[_vm._l([1,2,3],(function(index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("span",{staticClass:"lines loading-shimmer width50 mB10"}),_c("span",{staticClass:"lines loading-shimmer width95 mB10 height40"})])],1)],1)})),_c("el-row",{staticClass:"mB10 mT10"},[_c("el-col",{attrs:{span:24}},[_c("span",{staticClass:"lines loading-shimmer width50 mB10"}),_c("div",{staticClass:"mT10 d-flex"},_vm._l([1,2,3],(function(index){return _c("div",{key:index,staticClass:"flex-middle flex-grow"},[_c("span",{staticClass:"circle loading-shimmer"}),_c("span",{staticClass:"lines loading-shimmer mL10 mR30 flex-grow"})])})),0)])],1)],2):_c("div",{staticClass:"new-body-modal new-stateflow-modal new-stateflow-transition-modal"},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(_vm._s(_vm.$t("setup.stateflow.name")))]),_c("el-input",{staticClass:"width100 pR20",attrs:{autofocus:_vm.isNew,placeholder:"Enter transition name"},on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.stateTransitionObj.name,callback:function($$v){_vm.$set(_vm.stateTransitionObj,"name",$$v)},expression:"stateTransitionObj.name"}})],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("From State")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR20",attrs:{placeholder:"Select the from state",filterable:""},on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.stateTransitionObj.fromStateId,callback:function($$v){_vm.$set(_vm.stateTransitionObj,"fromStateId",$$v)},expression:"stateTransitionObj.fromStateId"}},_vm._l(_vm.ticketStatus,(function(item){return _c("el-option",{key:item.id,attrs:{label:item.displayName,value:item.id}})})),1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("To State")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR20",attrs:{placeholder:"Select the to state",filterable:""},on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.stateTransitionObj.toStateId,callback:function($$v){_vm.$set(_vm.stateTransitionObj,"toStateId",$$v)},expression:"stateTransitionObj.toStateId"}},_vm._l(_vm.ticketStatus,(function(item){return _c("el-option",{key:item.id,attrs:{label:item.displayName,value:item.id}})})),1)],1)],1)],1),_c("el-row",{staticClass:"mB10 mT10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Button Priority")]),_c("el-radio-group",{staticClass:"mT5",on:{change:function($event){return _vm.autoSave()}},model:{value:_vm.stateTransitionObj.buttonType,callback:function($$v){_vm.$set(_vm.stateTransitionObj,"buttonType",$$v)},expression:"stateTransitionObj.buttonType"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.buttonTypeList[1].key}},[_vm._v(" "+_vm._s(_vm.buttonTypeList[1].value))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.buttonTypeList[2].key}},[_vm._v(" "+_vm._s(_vm.buttonTypeList[2].value))]),_c("el-radio",{staticClass:"fc-radio-btn is-focus is-checked",attrs:{label:_vm.buttonTypeList[0].key}},[_vm._v(_vm._s(_vm.buttonTypeList[0].value))])],1)],1)],1)],1),_vm.isNew?_vm._e():_c("div",[_c("el-tabs",{staticClass:"state-transition-tabs",model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_c("el-tab-pane",{attrs:{label:"Before",name:"before"}},[_c("before-state-transition",{attrs:{transitionObj:_vm.stateTransitionObj,module:_vm.module,timeObj:_vm.timeObj,dateObj:_vm.dateObj,moduleFields:_vm.moduleFields,save:_vm.save,setProps:_vm.setProps},on:{"update:timeObj":function($event){_vm.timeObj=$event},"update:time-obj":function($event){_vm.timeObj=$event},"update:dateObj":function($event){_vm.dateObj=$event},"update:date-obj":function($event){_vm.dateObj=$event}}})],1),_c("el-tab-pane",{attrs:{label:"Confirmations",name:"confirmation"}},[_c("state-transition-confirmations",{ref:"stateFlowConfirmations",attrs:{module:_vm.module,transition:_vm.stateTransitionObj,criteriaList:_vm.criteriaList,criteriaListLoading:_vm.criteriaListLoading},on:{setCondition:_vm.setCondition,autoSave:_vm.save}})],1),_c("el-tab-pane",{attrs:{label:"Validations",name:"validation"}},[_c("state-transition-validations",{ref:"stateFlowValidations",attrs:{module:_vm.module,transition:_vm.stateTransitionObj,criteriaList:_vm.criteriaList,criteriaListLoading:_vm.criteriaListLoading},on:{setCondition:_vm.setCondition,autoSave:_vm.save}})],1),_c("el-tab-pane",{attrs:{label:"After",name:"after"}},[_c("state-transition-actions",{ref:"stateFlowActions",attrs:{stateflow:_vm.stateTransitionObj,actions:_vm.supportedActionList,module:_vm.module,moduleFields:_vm.moduleFields,moduleId:_vm.moduleId},on:{onUpdate:function(actions){return _vm.stateTransitionObj.actions=actions||[]},autoSave:_vm.save}})],1)],1)],1)],1),_vm.showDeleteDialog?_c("delete-dialog",{on:{onClose:function($event){_vm.showDeleteDialog=!1},onSave:function($event){return _vm.deleteTransition(_vm.stateTransitionObj)}}}):_vm._e(),_vm.isAutoSaveNeeded?_vm._e():_c("div",{staticClass:"dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.cancel}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save shadow-none",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.save}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1)],1)],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),vuex_esm=(__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(336585),__webpack_require__(450886),__webpack_require__(879288),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(420629)),utils_validation=__webpack_require__(990260),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),api=__webpack_require__(32284),ErrorBanner=__webpack_require__(297157),BeforeStateTransitionvue_type_template_id_447b35c4_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" Who can perform this transition? ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",on:{change:function($event){return _vm.onTypeChange()}},model:{value:_vm.transitionObj.type,callback:function($$v){_vm.$set(_vm.transitionObj,"type",$$v)},expression:"transitionObj.type"}},_vm._l(_vm.executionTypes,(function(executionType){return _c("el-option",{key:executionType.key,attrs:{label:executionType.label,value:executionType.key,"default-first-option":!0}})})),1)],1)],1)],1),_vm.transitionObj.type===_vm.$constants.TRANSITION_TYPE.user?_c("div",[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" Specify users, roles or groups who can perform this transition ")]),_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"new-statetransition-config",class:_vm.isConfiguredUser?"configured-green":"configure-blue pointer",on:{click:function($event){_vm.setEditObj(),_vm.canShowPopUp=!0}}},[_vm._v(" "+_vm._s(_vm.isConfiguredUser?"Configured":"Configure")+" ")]),_vm.isConfiguredUser?_c("div",[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon pL30 txt-color",attrs:{title:"Edit User"},on:{click:function($event){_vm.setEditObj(),_vm.canShowPopUp=!0}}})]):_vm._e()]),_vm.canShowPopUp?_c("state-transition-approvers",{attrs:{moduleFields:_vm.moduleFields,transitionObj:_vm.transitionObj},on:{onClose:_vm.close,onSave:_vm.saveUser}}):_vm._e(),_c("div",{staticClass:"d-flex flex-direction-column mT25"},[_c("el-checkbox",{staticClass:"fc-input-label-txt txt-color portal-checkbox",on:{change:function($event){return _vm.save()}},model:{value:_vm.transitionObj.showInOccupantPortal,callback:function($$v){_vm.$set(_vm.transitionObj,"showInOccupantPortal",$$v)},expression:"transitionObj.showInOccupantPortal"}},[_vm._v(" Show in Occupant Portal ")]),_c("el-checkbox",{staticClass:"fc-input-label-txt txt-color portal-checkbox",on:{change:function($event){return _vm.save()}},model:{value:_vm.transitionObj.showInVendorPortal,callback:function($$v){_vm.$set(_vm.transitionObj,"showInVendorPortal",$$v)},expression:"transitionObj.showInVendorPortal"}},[_vm._v(" Show in Vendor Portal ")]),this.$helpers.isLicenseEnabled("TENANTS")?_c("el-checkbox",{staticClass:"fc-input-label-txt txt-color portal-checkbox",on:{change:function($event){return _vm.save()}},model:{value:_vm.transitionObj.showInTenantPortal,callback:function($$v){_vm.$set(_vm.transitionObj,"showInTenantPortal",$$v)},expression:"transitionObj.showInTenantPortal"}},[_vm._v(" Show in Tenant Portal ")]):_vm._e(),this.$helpers.isLicenseEnabled("CLIENT_PORTAL")?_c("el-checkbox",{staticClass:"fc-input-label-txt txt-color portal-checkbox",on:{change:function($event){return _vm.save()}},model:{value:_vm.transitionObj.showInClientPortal,callback:function($$v){_vm.$set(_vm.transitionObj,"showInClientPortal",$$v)},expression:"transitionObj.showInClientPortal"}},[_vm._v(" Show in Client Portal ")]):_vm._e(),_c("el-checkbox",{staticClass:"fc-input-label-txt txt-color portal-checkbox",on:{change:function($event){return _vm.save()}},model:{value:_vm.transitionObj.shouldExecuteFromPermalink,callback:function($$v){_vm.$set(_vm.transitionObj,"shouldExecuteFromPermalink",$$v)},expression:"transitionObj.shouldExecuteFromPermalink"}},[_vm._v(" Allow Permalinks ")])],1),_c("hr",{staticClass:"separator-line mR40 mT20"})],1):_vm._e(),_vm.isAutomatedByTime?_c("div",[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" Specify the time after which the transition is performed ")]),_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"new-statetransition-config",class:_vm.isConfiguredTime?"configured-green":"configure-blue pointer",on:{click:function($event){_vm.setEditObj(),_vm.canShowPopUp=!0}}},[_vm._v(" "+_vm._s(_vm.isConfiguredTime?"Configured":"Configure Time")+" ")]),_vm.isConfiguredTime?_c("div",[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon pL30 txt-color",attrs:{title:"Edit"},on:{click:function($event){_vm.setEditObj(),_vm.canShowPopUp=!0}}})]):_vm._e()]),_vm.canShowPopUp?_c("state-transition-time",{attrs:{timeObj:_vm.time,dataObj:_vm.dateField,moduleFields:_vm.moduleFields},on:{save:_vm.onTimeChange,close:function($event){return _vm.close()}}}):_vm._e(),_c("hr",{staticClass:"separator-line mR40 mT20"})],1):[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" Specify conditions for this transition ")]),_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"new-statetransition-config",class:_vm.isConfiguredCriteria?"configured-green":"configure-blue pointer",on:{click:function($event){_vm.setEditObj(),_vm.canShowCriteria=!0}}},[_vm._v(" "+_vm._s(_vm.isConfiguredCriteria?"Configured":"Configure Criteria")+" ")]),_vm.isConfiguredCriteria?_c("div",{staticClass:"d-flex"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon pL30 txt-color",attrs:{title:"Edit Criteria"},on:{click:function($event){_vm.setEditObj(),_vm.canShowCriteria=!0}}}),_c("span",{staticClass:"reset-txt pointer mL20",on:{click:function($event){return _vm.resetCriteria()}}},[_vm._v(" Reset ")])]):_vm._e()]),_vm.canShowCriteria?_c("state-transition-criteria",{attrs:{module:_vm.module,activeCriteria:_vm.activeCriteria},on:{save:function(criteria){_vm.activeCriteria=criteria,_vm.saveCriteria()},close:function($event){return _vm.close()}}}):_vm._e(),_c("hr",{staticClass:"separator-line mR40 mT20"})],_vm.transitionObj.type===_vm.$constants.TRANSITION_TYPE.user?[_vm.isGeoFenchingCheck?_c("GeoFencing",{attrs:{module:_vm.module,transition:_vm.transitionObj,setProps:_vm.setProps},on:{onSave:_vm.save}}):_vm._e(),_c("StateTransitionQR",{attrs:{module:_vm.module,transition:_vm.transitionObj,setProps:_vm.setProps},on:{onSave:function($event){return _vm.save()}}}),_c("div",[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" Update fields while performing this transition ")]),_c("div",{staticClass:"d-flex items-baseline"},[_vm.isFieldConfigured?[_c("div",{staticClass:"configured-green new-statetransition-config d-flex items-center"},[_vm._v(" Configured ")]),_c("a",{staticClass:"cursor-pointer reset-txt mL30",on:{click:function($event){return _vm.editForm()}}},[_c("inline-svg",{attrs:{src:"svgs/edit",iconClass:"icon icon-xxs"}}),_vm._v(" Customize ")],1),_c("a",{staticClass:"mL20 cursor-pointer reset-txt",on:{click:function($event){return _vm.removeForm()}}},[_vm._v(" Reset ")])]:[_c("div",{staticClass:"configure-blue pointer new-statetransition-config d-flex items-center",on:{click:function($event){return _vm.openPopup()}}},[_vm._v(" Configure "),_c("Spinner",{attrs:{show:_vm.isSavingForm,color:"#6171db",size:"25"}})],1)]],2)]),_vm.canShowFieldPopup?_c("FieldPickerDialog",{attrs:{availableFields:_vm.formFields,selectedList:_vm.selectedFieldsList,isInFormConfig:!0,itemKey:"fieldId"},on:{save:_vm.saveFields,close:_vm.closePopup}}):_vm._e(),_vm.canShowFormBuilder?_c("FormsEdit",{staticClass:"formbuilder-container",attrs:{moduleName:_vm.module,id:_vm.activeFormId,onSave:_vm.closeForm,showDeleteForField:function(ref){ref.name;return!0},isUpdateForm:!0}}):_vm._e(),_c("div",[_c("hr",{staticClass:"separator-line mR40 mT20"}),_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" Create a record while performing this transition ")]),_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"new-statetransition-config",class:_vm.isFormConfigured?"configured-green":"configure-blue pointer",on:{click:function($event){_vm.canShowModuleFormPicker=!0}}},[_vm._v(" "+_vm._s(_vm.isFormConfigured?"Configured":"Configure")+" ")]),_vm.isFormConfigured?_c("div",[_c("i",{staticClass:"el-icon-edit pointer edit-icon pL30 txt-color",on:{click:function($event){_vm.canShowModuleFormPicker=!0}}}),_c("span",{staticClass:"reset-txt pointer mL20",on:{click:function($event){return _vm.removeForm()}}},[_vm._v(" Reset ")])]):_vm._e()])]),_vm.canShowModuleFormPicker?_c("ModuleFormPicker",{attrs:{transitionObj:_vm.transitionObj,module:_vm.module},on:{"update:transitionObj":function($event){_vm.transitionObj=$event},"update:transition-obj":function($event){_vm.transitionObj=$event},save:function($event){return _vm.save()},close:_vm.close}}):_vm._e(),_c("hr",{staticClass:"separator-line mR40 mT20"})]:_vm._e()],2)},BeforeStateTransitionvue_type_template_id_447b35c4_scoped_true_staticRenderFns=[],router=__webpack_require__(329435),uuid=__webpack_require__(455877),StateTransitionApproversvue_type_template_id_7b4b7e0a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"User","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},[_vm.activeApprovers&&_vm.activeApprovers.length>1?_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mL10",attrs:{prop:"name"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("To be perfomed by")]),_c("el-radio-group",{staticClass:"mT10",model:{value:_vm.allApprovalRequired,callback:function($$v){_vm.allApprovalRequired=$$v},expression:"allApprovalRequired"}},_vm._l(_vm.requiredApprovers,(function(requiredApproverType){return _c("el-radio",{key:"radio-"+requiredApproverType.value,staticClass:"fc-radio-btn",attrs:{label:requiredApproverType.value}},[_vm._v(" "+_vm._s(requiredApproverType.label)+" ")])})),1)],1)],1)],1):_vm._e(),_vm._l(_vm.activeApprovers,(function(approver,key){return _c("el-row",{key:key,staticClass:"criteria-condition-block"},[_c("el-col",{attrs:{span:6}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select",filterable:""},on:{change:function($event){return _vm.resetApproverId(key)}},model:{value:approver.type,callback:function($$v){_vm.$set(approver,"type",$$v)},expression:"approver.type"}},_vm._l(_vm.approverTypes,(function(type,index){return _c("el-option",{key:"type-"+index,attrs:{label:type.name,value:type.id}})})),1)],1),_c("el-col",{staticClass:"pL20",attrs:{span:15}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select",filterable:""},model:{value:approver.approverId,callback:function($$v){_vm.$set(approver,"approverId",$$v)},expression:"approver.approverId"}},_vm._l(_vm.typeOptionMap[approver.type],(function(option,index){return _c("el-option",{key:"approveroption-"+index,attrs:{label:option.displayName||option.name,value:option.id}})})),1)],1),_c("el-col",{staticClass:"mT5 mL5 border-left action",attrs:{span:3}},[key+1===_vm.activeApprovers.length?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addApprover}}):_vm._e(),_c("img",{staticClass:"delete-icon mL5",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteApprovers(key)}}})])],1)}))],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)])],1)},StateTransitionApproversvue_type_template_id_7b4b7e0a_scoped_true_staticRenderFns=[],approverUtils=(__webpack_require__(162506),__webpack_require__(12637)),StateTransitionApproversvue_type_script_lang_js={props:["transitionObj","moduleFields"],data:function(){return{approverTypes:approverUtils/* approverTypes */.xy,requiredApprovers:[{label:"Any one",value:!1},{label:"All",value:!0}],typeOptionMap:[],activeApprovers:[],allApprovalRequired:!1}},created:function(){this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.init()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},teams:function(state){return state.groups},roles:function(state){return state.roles}})),{},{typeOptions:function(){return{users:[].concat((0,toConsumableArray/* default */.Z)(this.users),[{name:"Requester",id:"requester"}]),roles:this.roles,teams:this.teams,fields:this.moduleFields}}}),watch:{typeOptions:{handler:function(){var _handler=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(typeOptions){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,approverUtils/* getApproverOptions */.p9)(typeOptions);case 2:this.typeOptionMap=_context.sent;case 3:case"end":return _context.stop()}}),_callee,this)})));function handler(_x){return _handler.apply(this,arguments)}return handler}(),immediate:!0}},methods:{init:function(){(0,utils_validation/* isEmpty */.xb)(this.transitionObj.approvers)?(this.activeApprovers=[],this.addApprover()):(this.activeApprovers=this.transitionObj.approvers,this.allApprovalRequired=!!this.transitionObj.allApprovalRequired)},addApprover:function(){this.activeApprovers.push({type:null,approverId:null})},deleteApprovers:function(index){var approver=this.activeApprovers[index];1!==this.activeApprovers.length||(0,utils_validation/* isEmpty */.xb)(approver.approverId)&&(0,utils_validation/* isEmpty */.xb)(approver.type)||this.addApprover(),this.activeApprovers.splice(index,1)},resetApproverId:function(index){var approver=this.activeApprovers[index];this.$set(this.activeApprovers,index,(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},approver),{},{approverId:null}))},close:function(){this.$emit("onClose")},save:function(){var approvers=(0,toConsumableArray/* default */.Z)(this.activeApprovers.filter((function(a){return!(0,utils_validation/* isEmpty */.xb)(a.type)&&!(0,utils_validation/* isEmpty */.xb)(a.approverId)})));(0,utils_validation/* isEmpty */.xb)(approvers)?(this.transitionObj.approvers=[],this.transitionObj.allApprovalRequired=!1):(this.transitionObj.approvers=this.activeApprovers,this.transitionObj.allApprovalRequired=this.allApprovalRequired),this.$emit("onSave"),this.activeApprovers=[],this.allApprovalRequired=!1}}},popups_StateTransitionApproversvue_type_script_lang_js=StateTransitionApproversvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(popups_StateTransitionApproversvue_type_script_lang_js,StateTransitionApproversvue_type_template_id_7b4b7e0a_scoped_true_render,StateTransitionApproversvue_type_template_id_7b4b7e0a_scoped_true_staticRenderFns,!1,null,"7b4b7e0a",null)
/* harmony default export */,StateTransitionApprovers=component.exports,StateTransitionCriteria=__webpack_require__(557428),StateTransitionTimevue_type_template_id_1126dd55_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"Configure Time","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}),_c("div",{staticClass:"height380 overflow-y-scroll pB50"},[_c("el-radio-group",{staticClass:"criteria-radio-label mB20",on:{change:_vm.clearData},model:{value:_vm.transitionDateObj.type,callback:function($$v){_vm.$set(_vm.transitionDateObj,"type",$$v)},expression:"transitionDateObj.type"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:2}},[_vm._v(" On Time ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:4}},[_vm._v(" On Date ")])],1),_vm.transitionDateObj.type!==_vm.$constants.TRANSITION_TYPE.time?_c("el-row",{staticClass:"mB20"},[_c("el-col",{staticClass:"mB20",attrs:{span:15}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.dateField"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select field"},model:{value:_vm.transitionDateObj.dateFieldId,callback:function($$v){_vm.$set(_vm.transitionDateObj,"dateFieldId",$$v)},expression:"transitionDateObj.dateFieldId"}},_vm._l(_vm.filteredDateFields,(function(fld,index){return _c("el-option",{key:fld.id+"_"+index,attrs:{label:fld.displayName,value:fld.id}})})),1)],1),_c("el-col",{attrs:{span:18}},[_c("p",{staticClass:"fc-input-label-txt mB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.schedule_type"))+" ")]),_c("el-radio-group",{staticClass:"criteria-radio-label",model:{value:_vm.transitionDateObj.scheduleType,callback:function($$v){_vm.$set(_vm.transitionDateObj,"scheduleType",$$v)},expression:"transitionDateObj.scheduleType"}},[_vm.canShowBefore?_c("el-radio",{key:1,staticClass:"fc-radio-btn",attrs:{label:_vm.scheduleTypes.BEFORE}},[_vm._v(" Before ")]):_vm._e(),_c("el-radio",{key:2,staticClass:"fc-radio-btn",attrs:{label:_vm.scheduleTypes.ON}},[_vm._v(" On ")]),_c("el-radio",{key:3,staticClass:"fc-radio-btn",attrs:{label:_vm.scheduleTypes.AFTER}},[_vm._v(" After ")])],1)],1)],1):_vm._e(),_vm.canShowTime?_c("el-row",[_c("el-col",{staticClass:"pR10",attrs:{span:_vm.isDateTimeField?8:12}},[_c("p",{staticClass:"fc-input-label-txt f13 pB5"},[_vm._v("Days")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{clearable:"",placeholder:"Select"},model:{value:_vm.transitionDateObj.date.days,callback:function($$v){_vm.$set(_vm.transitionDateObj.date,"days",$$v)},expression:"transitionDateObj.date.days"}},_vm._l(30,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1)],1),_vm.isDateTimeField?[_c("el-col",{staticClass:"pL10 pR10",attrs:{span:8}},[_c("p",{staticClass:"fc-input-label-txt f13 pB5"},[_vm._v("Hours")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{clearable:""},model:{value:_vm.transitionDateObj.date.hours,callback:function($$v){_vm.$set(_vm.transitionDateObj.date,"hours",$$v)},expression:"transitionDateObj.date.hours"}},_vm._l(_vm.$constants.HOURS,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1)],1),_c("el-col",{staticClass:"pL10",attrs:{span:8}},[_c("p",{staticClass:"fc-input-label-txt f13 pB5"},[_vm._v("Mins")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select"},model:{value:_vm.transitionDateObj.date.minute,callback:function($$v){_vm.$set(_vm.transitionDateObj.date,"minute",$$v)},expression:"transitionDateObj.date.minute"}},_vm._l(_vm.$constants.MINUTES,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1)],1)]:_c("el-col",{staticClass:"pL10",attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt f13 pB5"},[_vm._v("Time")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{"collapse-tags":""},model:{value:_vm.transitionDateObj.time,callback:function($$v){_vm.$set(_vm.transitionDateObj,"time",$$v)},expression:"transitionDateObj.time"}},_vm._l(_vm.timeOption,(function(time){return _c("el-option",{key:time,attrs:{label:time,value:time}})})),1)],1)],2):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.saveTime()}}},[_vm._v(" Save ")])],1)],1)],1)},StateTransitionTimevue_type_template_id_1126dd55_staticRenderFns=[],utils_field=(__webpack_require__(425728),__webpack_require__(815872)),scheduleTypes={BEFORE:1,ON:2,AFTER:3},StateTransitionTimevue_type_script_lang_js={components:{ErrorBanner:ErrorBanner/* default */.Z},props:["timeObj","dataObj","moduleFields"],data:function(){return{transitionDateObj:{type:2,date:null},error:!1,errorMessage:"",scheduleTypes:scheduleTypes}},computed:{canShowTime:function(){var TRANSITION_TYPE=this.$constants.TRANSITION_TYPE,_this$transitionDateO=this.transitionDateObj,scheduleType=_this$transitionDateO.scheduleType,type=_this$transitionDateO.type,BEFORE=scheduleTypes.BEFORE,AFTER=scheduleTypes.AFTER;return TRANSITION_TYPE.time===type||[BEFORE,AFTER].includes(scheduleType)},canShowBefore:function(){var dateFieldId=this.transitionDateObj.dateFieldId,beforeDateFieldsToExclude=["createdTime","modifiedTime"],beforeFieldIds=this.moduleFields.filter((function(field){return beforeDateFieldsToExclude.includes(field.name)})).map((function(field){return field.id}));return!beforeFieldIds.includes(dateFieldId)},filteredDateFields:function(){var dateFieldToExclude=["sysCreatedTime","sysModifiedTime","sysDeletedTime"],beforeDateFieldsToExclude=["createdTime","modifiedTime"],transitionDateObj=this.transitionDateObj,moduleFields=this.moduleFields,scheduleType=transitionDateObj.scheduleType,excludedfields=[].concat(dateFieldToExclude);return scheduleType===scheduleTypes.BEFORE&&(excludedfields=[].concat((0,toConsumableArray/* default */.Z)(excludedfields),beforeDateFieldsToExclude)),(moduleFields||[]).filter((function(field){return!excludedfields.includes(field.name)&&((0,utils_field/* isDateTimeField */.K)(field)||(0,utils_field/* isDateField */.y2)(field))}))},isDateTimeField:function(){var TRANSITION_TYPE=this.$constants.TRANSITION_TYPE,_this$transitionDateO2=this.transitionDateObj,dateFieldId=_this$transitionDateO2.dateFieldId,type=_this$transitionDateO2.type,field=this.moduleFields.find((function(d){return d.fieldId===dateFieldId}))||{};return TRANSITION_TYPE.time===type||!(0,utils_validation/* isEmpty */.xb)(field)&&(0,utils_field/* isDateTimeField */.K)(field)},timeOption:function(){var timeOption=[];return this.$constants.HOURS.forEach((function(t){var time=(t<10?"0".concat(t):t)+":";timeOption.push(time+"00"),timeOption.push(time+"30")})),timeOption}},watch:{timeObj:{handler:function(newVal){this.transitionDateObj.date=newVal},immediate:!0},dataObj:{handler:function(newVal){this.transitionDateObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.transitionDateObj),newVal)},immediate:!0},isDateTimeField:function(){var isDateTimeField=this.isDateTimeField,transitionDateObj=this.transitionDateObj,time=isDateTimeField?null:"00:00";this.transitionDateObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},transitionDateObj),{},{time:time,date:{days:null,minute:0,hours:0}})}},methods:{saveTime:function(){var _this$transitionDateO3=this.transitionDateObj,type=_this$transitionDateO3.type,date=_this$transitionDateO3.date,scheduleType=_this$transitionDateO3.scheduleType,dateFieldId=_this$transitionDateO3.dateFieldId,time=_this$transitionDateO3.time,TRANSITION_TYPE=this.$constants.TRANSITION_TYPE,days=date.days,minute=date.minute,hours=date.hours,timeField=!(0,utils_validation/* isEmpty */.xb)(days)||0!==minute||0!==hours,dateFieldTimeValidation=scheduleType===scheduleTypes.ON||timeField||!(0,utils_validation/* isEmpty */.xb)(time),dateFieldValidation=type===TRANSITION_TYPE.datefield&&!(0,utils_validation/* isEmpty */.xb)(dateFieldId)&&dateFieldTimeValidation;if(!(type===TRANSITION_TYPE.time&&timeField||dateFieldValidation))return this.error=!0,void(this.errorMessage=" Please select fields");this.$emit("save",this.transitionDateObj)},close:function(){this.$emit("close")},clearData:function(){var type=this.transitionDateObj.type,time=this.isDateTimeField?null:"00:00";this.transitionDateObj={scheduleType:3,dateFieldId:null,time:time,type:type,date:{days:null,minute:0,hours:0}}}}},popups_StateTransitionTimevue_type_script_lang_js=StateTransitionTimevue_type_script_lang_js,StateTransitionTime_component=(0,componentNormalizer/* default */.Z)(popups_StateTransitionTimevue_type_script_lang_js,StateTransitionTimevue_type_template_id_1126dd55_render,StateTransitionTimevue_type_template_id_1126dd55_staticRenderFns,!1,null,null,null)
/* harmony default export */,StateTransitionTime=StateTransitionTime_component.exports,ModuleFormPickervue_type_template_id_7d7cb97e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"40%",title:"Configure","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorMessage=$event},"update:error-message":function($event){_vm.errorMessage=$event}}}),_c("div",{staticClass:"height330 overflow-y-scroll pB50 transition-field-dialog"},[_c("el-row",{staticClass:"pR30"},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" Create a record while performing this transition ")])])],1),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Module")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{loading:_vm.isModuleLoading,placeholder:"Select Module"},on:{change:_vm.getModuleForm},model:{value:_vm.selectedFormModule,callback:function($$v){_vm.selectedFormModule=$$v},expression:"selectedFormModule"}},_vm._l(_vm.filteredModulesList,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.displayName,value:item.name}})})),1)],1)],1),_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:20}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Form")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{loading:_vm.isFormLoading,disabled:!_vm.selectedFormModule,placeholder:"Select Form"},model:{value:_vm.selectedFormId,callback:function($$v){_vm.selectedFormId=$$v},expression:"selectedFormId"}},_vm._l(_vm.relatedModuleForms,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.displayName,value:item.id}})})),1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving},on:{click:function($event){return _vm.saveForm()}}},[_vm._v("Save")])],1)],1)],1)},ModuleFormPickervue_type_template_id_7d7cb97e_staticRenderFns=[],DIALOG_TYPE={FIELD:1,FORM:2},ModuleFormPickervue_type_script_lang_js={props:["transitionObj","module","autoSave"],components:{ErrorBanner:ErrorBanner/* default */.Z},data:function(){return{isModuleLoading:!1,isFormLoading:!1,formModules:[],relatedModuleForms:[],selectedFormModule:null,selectedFormId:null,isSaving:!1,error:!1,errorMessage:"",DIALOG_TYPE:DIALOG_TYPE}},created:function(){this.getModules(),this.init()},computed:{filteredModulesList:function(){return(this.formModules||[]).filter((function(modules){var custom=modules.custom,name=modules.name;return["workorder","workpermit"].includes(name)||custom}))}},methods:{init:function(){var _this$transitionObj=this.transitionObj,_this$transitionObj$f=_this$transitionObj.formModuleName,formModuleName=void 0===_this$transitionObj$f?null:_this$transitionObj$f,_this$transitionObj$f2=_this$transitionObj.formId,formId=void 0===_this$transitionObj$f2?null:_this$transitionObj$f2,dialogType=_this$transitionObj.dialogType;dialogType===DIALOG_TYPE.FORM&&((0,utils_validation/* isEmpty */.xb)(formModuleName)?this.selectedFormId=null:(this.selectedFormModule=formModuleName,this.getForms(),this.selectedFormId=(0,utils_validation/* isEmpty */.xb)(formId)?null:formId))},getModules:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.isModuleLoading=!0,_context.prev=1,params={moduleName:_this.module},_context.next=5,api/* API */.bl.get("v2/forms/subFormModules",params);case 5:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_this.formModules=(null===data||void 0===data?void 0:data.modules)||[]),_context.next=14;break;case 11:_context.prev=11,_context.t0=_context["catch"](1),_this.formModules=[];case 14:_this.isModuleLoading=!1;case 15:case"end":return _context.stop()}}),_callee,null,[[1,11]])})))()},getForms:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,_yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.isFormLoading=!0,_context2.prev=1,params={moduleName:_this2.selectedFormModule,skipTemplatePermission:!0},_context2.next=5,api/* API */.bl.get("v2/forms",params);case 5:_yield$API$get2=_context2.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error||(_this2.relatedModuleForms=(null===data||void 0===data?void 0:data.forms)||[]),_context2.next=14;break;case 11:_context2.prev=11,_context2.t0=_context2["catch"](1),_this2.relatedModuleForms=[];case 14:_this2.isFormLoading=!1;case 15:case"end":return _context2.stop()}}),_callee2,null,[[1,11]])})))()},getModuleForm:function(){this.selectedFormId=null,this.getForms()},close:function(){this.selectedFormModule=null,this.selectedFormId=null,this.$emit("close")},saveForm:function(){(0,utils_validation/* isEmpty */.xb)(this.selectedFormId)||(this.$set(this.transitionObj,"dialogType",DIALOG_TYPE.FORM),this.$set(this.transitionObj,"formId",this.selectedFormId),this.$set(this.transitionObj,"formModuleName",this.selectedFormModule),this.$emit("save"),this.close())}}},popups_ModuleFormPickervue_type_script_lang_js=ModuleFormPickervue_type_script_lang_js,ModuleFormPicker_component=(0,componentNormalizer/* default */.Z)(popups_ModuleFormPickervue_type_script_lang_js,ModuleFormPickervue_type_template_id_7d7cb97e_render,ModuleFormPickervue_type_template_id_7d7cb97e_staticRenderFns,!1,null,null,null)
/* harmony default export */,ModuleFormPicker=ModuleFormPicker_component.exports,FormsEdit=__webpack_require__(185759),Spinner=__webpack_require__(604947),FieldPicker=__webpack_require__(24187),StateTransitionQRvue_type_template_id_ed19c164_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" "+_vm._s(_vm.$t("stateflow.transition.make_qr_mandatory"))+" ")]),_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"new-statetransition-config",class:_vm.isConfiguredQR?"configured-green":"configure-blue pointer",on:{click:_vm.editQRField}},[_vm._v(" "+_vm._s(_vm.isConfiguredQR?_vm.$t("stateflow.transition.configured"):_vm.$t("stateflow.transition.configure"))+" ")]),_vm.isConfiguredQR?_c("div",{staticClass:"d-flex"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon pL30 txt-color",attrs:{title:_vm.$t("stateflow.transition.edit")},on:{click:_vm.editQRField}}),_c("span",{staticClass:"reset-txt pointer mL20",on:{click:function($event){return _vm.resetQR()}}},[_vm._v(" "+_vm._s(_vm.$t("stateflow.transition.reset"))+" ")])]):_vm._e()]),_vm.canShowQR?_c("StateTransitionQRForm",{attrs:{module:_vm.module,activeQRField:_vm.activeQRField},on:{onSave:_vm.save,onClose:_vm.close}}):_vm._e(),_c("hr",{staticClass:"separator-line mR40 mT20"})],1)},StateTransitionQRvue_type_template_id_ed19c164_staticRenderFns=[],StateTransitionQRFormvue_type_template_id_50f190c3_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:!0,width:"40%",title:_vm.$t("stateflow.transition.configure_field"),"append-to-body":!0,"before-close":_vm.close,"close-on-click-modal":!1}},[_c("div",{staticClass:"pB50"},[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" "+_vm._s(_vm.$t("stateflow.transition.choose_field_map_qr"))+" ")]),_c("el-row",{staticClass:"mB30"},[_vm.loading?_c("el-col",{attrs:{span:20}},[_c("span",{staticClass:"stateflow-transition-qr-line loading-shimmer"})]):_c("el-col",{attrs:{span:20}},[_c("el-cascader",{staticClass:"fc-input-full-border2 width100",attrs:{options:_vm.fieldOptions,props:{expandTrigger:"hover",value:"fieldId",label:"displayName",children:"fields"},placeholder:_vm.$t("stateflow.transition.select_field"),"popper-class":"sla-duration-field"},model:{value:_vm.selectedQrField,callback:function($$v){_vm.selectedQrField=$$v},expression:"selectedQrField"}})],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveForm}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)],1)])},StateTransitionQRFormvue_type_template_id_50f190c3_scoped_true_staticRenderFns=[],StateTransitionQRFormvue_type_script_lang_js={props:["module","activeQRField"],data:function(){return{fieldOptions:[],selectedQrField:[],loading:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return(0,utils_validation/* isEmpty */.xb)(_this.activeQRField)||(_this.selectedQrField=(0,toConsumableArray/* default */.Z)(_this.activeQRField)),_context.next=3,_this.loadPlaceholderFieldOptions();case 3:case"end":return _context.stop()}}),_callee)})))()},methods:{loadPlaceholderFieldOptions:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data,error,_ref,placeholders,_ref2,fields,moduleFields,fieldTypeFilter,lookupModuleFields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loading=!0,_context2.next=3,api/* API */.bl.get("v3/placeholders/".concat(_this2.module));case 3:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_ref=data||{},placeholders=_ref.placeholders,_ref2=placeholders||{},fields=_ref2.fields,moduleFields=_ref2.moduleFields,(0,utils_validation/* isEmpty */.xb)(fields)||(fieldTypeFilter=function(fld){return!(0,utils_validation/* isEmpty */.xb)(fld.fieldId)&&["STRING"].includes(fld.dataType)},lookupModuleFields={},(0,utils_validation/* isEmpty */.xb)(moduleFields)||Object.keys(moduleFields).forEach((function(fieldName){lookupModuleFields[fieldName]=(moduleFields[fieldName]||[]).filter(fieldTypeFilter)})),fields.forEach((function(field){var _ref3=field||{},lookupModuleName=_ref3.module;lookupModuleName&&(field.fields=lookupModuleFields[lookupModuleName]||[])})),_this2.fieldOptions=fields.filter((function(fld){return fieldTypeFilter(fld)||!(0,utils_validation/* isEmpty */.xb)(fld.fields)})))),_this2.loading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},saveForm:function(){var selectedQrField=this.selectedQrField;if(!(0,utils_validation/* isEmpty */.xb)(selectedQrField)){var _selectedQrField=(0,slicedToArray/* default */.Z)(selectedQrField,2),_selectedQrField$=_selectedQrField[0],qrFieldId=void 0===_selectedQrField$?-99:_selectedQrField$,_selectedQrField$2=_selectedQrField[1],qrLookupFieldId=void 0===_selectedQrField$2?-99:_selectedQrField$2;this.$emit("onSave",{qrFieldId:qrFieldId,qrLookupFieldId:qrLookupFieldId}),this.close()}},close:function(){this.$emit("onClose")}}},popups_StateTransitionQRFormvue_type_script_lang_js=StateTransitionQRFormvue_type_script_lang_js,StateTransitionQRForm_component=(0,componentNormalizer/* default */.Z)(popups_StateTransitionQRFormvue_type_script_lang_js,StateTransitionQRFormvue_type_template_id_50f190c3_scoped_true_render,StateTransitionQRFormvue_type_template_id_50f190c3_scoped_true_staticRenderFns,!1,null,"50f190c3",null)
/* harmony default export */,StateTransitionQRForm=StateTransitionQRForm_component.exports,StateTransitionQRvue_type_script_lang_js={props:["module","transition","setProps"],components:{StateTransitionQRForm:StateTransitionQRForm},data:function(){return{canShowQR:!1,activeQRField:null}},computed:{isConfiguredQR:function(){var _ref=this.transition||{},qrFieldId=_ref.qrFieldId,qrLookupFieldId=_ref.qrLookupFieldId;return!(0,utils_validation/* isEmpty */.xb)(qrFieldId)&&-99!==qrFieldId||!(0,utils_validation/* isEmpty */.xb)(qrLookupFieldId)&&-99!==qrLookupFieldId}},methods:{editQRField:function(){var _ref2=this.transition||{},qrFieldId=_ref2.qrFieldId,qrLookupFieldId=_ref2.qrLookupFieldId;this.activeQRField=[],(0,utils_validation/* isEmpty */.xb)(qrFieldId)||-99===qrFieldId||(this.activeQRField.push(qrFieldId),(0,utils_validation/* isEmpty */.xb)(qrLookupFieldId)||-99===qrLookupFieldId||this.activeQRField.push(qrLookupFieldId)),this.canShowQR=!0},resetQR:function(){this.setProps({qrFieldId:-99,qrLookupFieldId:-99}),this.activeQRField=null,this.$emit("onSave")},close:function(){this.activeQRField=null,this.canShowQR=!1},save:function(qrFieldObj){this.activeQRField=null,this.setProps((0,objectSpread2/* default */.Z)({},qrFieldObj||{})),this.$emit("onSave")}}},stateflow_StateTransitionQRvue_type_script_lang_js=StateTransitionQRvue_type_script_lang_js,StateTransitionQR_component=(0,componentNormalizer/* default */.Z)(stateflow_StateTransitionQRvue_type_script_lang_js,StateTransitionQRvue_type_template_id_ed19c164_render,StateTransitionQRvue_type_template_id_ed19c164_staticRenderFns,!1,null,null,null)
/* harmony default export */,StateTransitionQR=StateTransitionQR_component.exports,GeoFencingvue_type_template_id_7c232aba_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",[_c("p",{staticClass:"fc-input-label-txt txt-color"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.geo_restriction"))+" ")]),_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"new-statetransition-config",class:_vm.isFormConfigured?"configured-green":"configure-blue pointer",on:{click:_vm.editGeoField}},[_vm._v(" "+_vm._s(_vm.isFormConfigured?"Configured":"Configure")+" ")]),_vm.isFormConfigured?_c("div",[_c("i",{staticClass:"el-icon-edit pointer edit-icon pL30 txt-color",on:{click:_vm.editGeoField}}),_c("span",{staticClass:"reset-txt pointer mL20",on:{click:function($event){return _vm.removeForm()}}},[_vm._v(" Reset ")])]):_vm._e()]),_c("hr",{staticClass:"separator-line mR40 mT20"})]),_vm.canShowGeoFencingFormPicker?_c("GeoFencingFormVue",{attrs:{selectedGeoFields:_vm.selectedGeoFields,module:_vm.module},on:{save:_vm.save,close:_vm.close}}):_vm._e()],1)},GeoFencingvue_type_template_id_7c232aba_staticRenderFns=[],GeoFencingFormvue_type_template_id_182d9940_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:!0,width:"40%",title:_vm.$t("stateflow.transition.configure_field"),"append-to-body":!0,"before-close":_vm.close,"close-on-click-modal":!1}},[_c("el-form",{ref:"ruleForm",staticClass:"pB50 geo-fenching-form",attrs:{model:_vm.ruleForm,rules:_vm.rule,"label-position":"top"}},[_c("el-form-item",{staticClass:"txt-color",attrs:{label:_vm.$t("setup.bim.bim_location"),prop:"selectedGeoField"}},[_vm.loading?_c("div",[_c("span",{staticClass:"stateflow-transition-qr-line loading-shimmer"})]):_c("div",[_c("el-cascader",{staticClass:"fc-input-full-border2 width100",attrs:{options:_vm.fieldOptions,props:{expandTrigger:"hover",value:"fieldId",label:"displayName",children:"fields"},placeholder:_vm.$t("stateflow.transition.select_field")},model:{value:_vm.ruleForm.selectedGeoField,callback:function($$v){_vm.$set(_vm.ruleForm,"selectedGeoField",$$v)},expression:"ruleForm.selectedGeoField"}})],1)]),_c("el-form-item",{staticClass:"txt-color",attrs:{label:_vm.$t("setup.stateflow.range"),prop:"range"}},[_c("el-input",{staticClass:"fc-input-full-border2 width40",attrs:{placeholder:_vm.$t("setup.stateflow.enter_range"),type:"number"},model:{value:_vm.ruleForm.range,callback:function($$v){_vm.$set(_vm.ruleForm,"range",$$v)},expression:"ruleForm.range"}},[_c("template",{slot:"append"},[_vm._v("m")])],2)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.saveForm("ruleForm")}}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)],1)],1)},GeoFencingFormvue_type_template_id_182d9940_scoped_true_staticRenderFns=[],GeoFencingFormvue_type_script_lang_js=(__webpack_require__(821057),{props:["module","selectedGeoFields"],data:function(){var _this=this;return{loading:!1,fieldOptions:[],ruleForm:{selectedGeoField:[],range:null},rule:{selectedGeoField:[{required:!0,message:this.$t("setup.stateflow.please_select_field"),trigger:"change"}],range:[{required:!0,message:this.$t("setup.stateflow.please_select_range"),validator:function(rule,value,callback){if((0,utils_validation/* isEmpty */.xb)(value)||value<1)return callback(new Error(_this.$t("setup.stateflow.please_select_range")));callback()},trigger:"blur"}]}}},created:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this2$selectedGeoFie,activeGeoField,range;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return(0,utils_validation/* isEmpty */.xb)(_this2.selectedGeoFields)||(_this2$selectedGeoFie=_this2.selectedGeoFields,activeGeoField=_this2$selectedGeoFie.activeGeoField,range=_this2$selectedGeoFie.range,_this2.ruleForm={selectedGeoField:(0,toConsumableArray/* default */.Z)(activeGeoField),range:range}),_context.next=3,_this2.loadPlaceholderFieldOptions();case 3:case"end":return _context.stop()}}),_callee)})))()},methods:{loadPlaceholderFieldOptions:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data,error,_ref,fields,moduleFields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.loading=!0,_context2.next=3,api/* API */.bl.get("v2/getFields/geoLocation/".concat(_this3.module));case 3:if(_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,(0,utils_validation/* isEmpty */.xb)(error)){_context2.next=10;break}return _this3.loading=!1,_this3.$message.error(error.message),_context2.abrupt("return");case 10:_ref=data||{},fields=_ref.fields,moduleFields=_ref.moduleFields,_this3.fieldOptions=(fields||[]).filter((function(field){var _ref2=field||{},lookupModuleName=_ref2.module,dataType=_ref2.dataType,moduleFieldList=moduleFields[lookupModuleName]||null,isLookupField="LOOKUP"===dataType,isValidLookupField=isLookupField&&(!(0,utils_validation/* isEmpty */.xb)(moduleFieldList)||"location"===lookupModuleName);return!isLookupField||isValidLookupField})).map((function(field){var _ref3=field||{},lookupModuleName=_ref3.module;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{fields:moduleFields[lookupModuleName]})})),_this3.loading=!1;case 13:case"end":return _context2.stop()}}),_callee2)})))()},close:function(){this.$emit("close")},saveForm:function(geoFenchingForm){var _this4=this;this.$refs[geoFenchingForm].validate((function(valid){if(!valid)return!1;var _this4$ruleForm=_this4.ruleForm,selectedGeoField=_this4$ruleForm.selectedGeoField,range=_this4$ruleForm.range,_selectedGeoField=(0,slicedToArray/* default */.Z)(selectedGeoField,2),_selectedGeoField$=_selectedGeoField[0],locationFieldId=void 0===_selectedGeoField$?-99:_selectedGeoField$,_selectedGeoField$2=_selectedGeoField[1],locationLookupFieldId=void 0===_selectedGeoField$2?-99:_selectedGeoField$2,radius=(0,utils_validation/* isEmpty */.xb)(range)?-99:parseInt(range);_this4.$emit("save",{locationFieldId:locationFieldId,locationLookupFieldId:locationLookupFieldId,radius:radius}),_this4.close()}))}}}),stateflow_GeoFencingFormvue_type_script_lang_js=GeoFencingFormvue_type_script_lang_js,GeoFencingForm_component=(0,componentNormalizer/* default */.Z)(stateflow_GeoFencingFormvue_type_script_lang_js,GeoFencingFormvue_type_template_id_182d9940_scoped_true_render,GeoFencingFormvue_type_template_id_182d9940_scoped_true_staticRenderFns,!1,null,"182d9940",null)
/* harmony default export */,GeoFencingForm=GeoFencingForm_component.exports,GeoFencingvue_type_script_lang_js={props:["module","transition","setProps"],data:function(){return{canShowGeoFencingFormPicker:!1,activeGeoField:null,selectedGeoFields:{}}},components:{GeoFencingFormVue:GeoFencingForm},computed:{isFormConfigured:function(){return(this.hasLocationFieldId||this.hasLocationLookupFieldId)&&this.hasRadius},hasLocationFieldId:function(){var _ref=this.transition||{},locationFieldId=_ref.locationFieldId;return!(0,utils_validation/* isEmpty */.xb)(locationFieldId)&&-99!==locationFieldId},hasLocationLookupFieldId:function(){var _ref2=this.transition||{},locationLookupFieldId=_ref2.locationLookupFieldId;return!(0,utils_validation/* isEmpty */.xb)(locationLookupFieldId)&&-99!==locationLookupFieldId},hasRadius:function(){var _ref3=this.transition||{},radius=_ref3.radius;return!(0,utils_validation/* isEmpty */.xb)(radius)&&-99!==radius}},methods:{close:function(){this.canShowGeoFencingFormPicker=!1},removeForm:function(){this.setProps({locationFieldId:-99,locationLookupFieldId:-99,radius:-99}),this.$emit("onSave")},editGeoField:function(){var _ref4=this.transition||{},locationFieldId=_ref4.locationFieldId,locationLookupFieldId=_ref4.locationLookupFieldId,radius=_ref4.radius;this.activeGeoField=[],this.hasLocationFieldId&&(this.activeGeoField.push(locationFieldId),this.hasLocationLookupFieldId&&this.activeGeoField.push(locationLookupFieldId)),this.selectedGeoFields={activeGeoField:this.activeGeoField,range:this.hasRadius?radius:null},this.canShowGeoFencingFormPicker=!0},save:function(GeoFieldObj){this.setProps((0,objectSpread2/* default */.Z)({},GeoFieldObj||{})),this.$emit("onSave")}}},stateflow_GeoFencingvue_type_script_lang_js=GeoFencingvue_type_script_lang_js,GeoFencing_component=(0,componentNormalizer/* default */.Z)(stateflow_GeoFencingvue_type_script_lang_js,GeoFencingvue_type_template_id_7c232aba_render,GeoFencingvue_type_template_id_7c232aba_staticRenderFns,!1,null,null,null)
/* harmony default export */,GeoFencing=GeoFencing_component.exports,BeforeStateTransitionvue_type_script_lang_js_DIALOG_TYPE={FIELD:1,FORM:2},GEOFENCING_LICENSE=["workorder","serviceRequest","inspectionResponse","asset","facilitybooking"],BeforeStateTransitionvue_type_script_lang_js={props:["transitionObj","module","timeObj","dateObj","moduleFields","save","setProps"],components:{StateTransitionApprovers:StateTransitionApprovers,ModuleFormPicker:ModuleFormPicker,StateTransitionCriteria:StateTransitionCriteria/* default */.Z,StateTransitionTime:StateTransitionTime,FormsEdit:FormsEdit["default"],Spinner:Spinner/* default */.Z,FieldPickerDialog:FieldPicker/* default */.Z,StateTransitionQR:StateTransitionQR,GeoFencing:GeoFencing},data:function(){return{activeCriteria:null,activeFormId:null,time:{days:null,minute:0,hours:0},dateField:{scheduleType:3,dateFieldId:null,time:null},canShowPopUp:!1,canShowCriteria:!1,canShowFormBuilder:!1,canShowModuleFormPicker:!1,isSavingForm:!1,error:!1,errorMessage:"",formFields:[],selectedFieldsList:[],canShowFieldPopup:!1}},created:function(){this.fetchFormFields()},computed:{isConfiguredUser:function(){var approvers=this.transitionObj.approvers,approver=this.$getProperty(approvers,"0",null);return!(0,utils_validation/* isEmpty */.xb)(approver)&&!(0,utils_validation/* isEmpty */.xb)(approver.type)},isConfiguredTime:function(){var _this$timeObj=this.timeObj,days=_this$timeObj.days,hours=_this$timeObj.hours,minute=_this$timeObj.minute,dateFieldId=this.dateObj.dateFieldId,timeConfig=!(0,utils_validation/* isEmpty */.xb)(days)||0!==minute||0!==hours;return!(0,utils_validation/* isEmpty */.xb)(dateFieldId)||timeConfig},isConfiguredCriteria:function(){return!(0,utils_validation/* isEmpty */.xb)(this.transitionObj.criteria)},isFieldConfigured:function(){var _this$transitionObj=this.transitionObj,dialogType=_this$transitionObj.dialogType,formId=_this$transitionObj.formId;return dialogType===BeforeStateTransitionvue_type_script_lang_js_DIALOG_TYPE.FIELD&&!(0,utils_validation/* isEmpty */.xb)(formId)},isFormConfigured:function(){var _this$transitionObj2=this.transitionObj,dialogType=_this$transitionObj2.dialogType,formId=_this$transitionObj2.formId,formModuleName=_this$transitionObj2.formModuleName;return dialogType===BeforeStateTransitionvue_type_script_lang_js_DIALOG_TYPE.FORM&&!(0,utils_validation/* isEmpty */.xb)(formId)&&!(0,utils_validation/* isEmpty */.xb)(formModuleName)},executionTypes:function(){var _this$$constants$TRAN=this.$constants.TRANSITION_TYPE,datefield=_this$$constants$TRAN.datefield,time=_this$$constants$TRAN.time,type=this.transitionObj.type,optionType=type===datefield?datefield:time;return[{key:1,label:"User"},{key:optionType,label:"Automated by Time"},{key:3,label:"Automated by Condition"}]},isAutomatedByTime:function(){var _this$$constants$TRAN2=this.$constants.TRANSITION_TYPE,time=_this$$constants$TRAN2.time,datefield=_this$$constants$TRAN2.datefield,type=this.transitionObj.type;return[time,datefield].includes(type)},isGeoFenchingCheck:function(){return GEOFENCING_LICENSE.includes(this.module)}},methods:{setEditObj:function(){this.activeCriteria=this.$helpers.cloneObject(this.transitionObj.criteria),this.time=this.$helpers.cloneObject(this.timeObj),this.dateField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$helpers.cloneObject(this.dateObj)),{},{type:this.transitionObj.type})},close:function(){this.canShowPopUp=!1,this.canShowCriteria=!1,this.activeCriteria=null,this.canShowModuleFormPicker=!1,this.canShowFormBuilder=!1,this.time={days:null,minute:0,hours:0},this.dateField={scheduleType:3,dateFieldId:null,time:null},this.error=!1,this.errorMessage=""},onTimeChange:function(dateObj){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var type,date,scheduleType,dateFieldId,time,TRANSITION_TYPE,TIME,DATE;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return type=dateObj.type,date=dateObj.date,scheduleType=dateObj.scheduleType,dateFieldId=dateObj.dateFieldId,time=dateObj.time,_this.$set(_this.transitionObj,"type",type),_this.time=date,_this.dateField={scheduleType:scheduleType,dateFieldId:dateFieldId,time:time},TRANSITION_TYPE=_this.$constants.TRANSITION_TYPE,TIME=TRANSITION_TYPE.time,DATE=TRANSITION_TYPE.datefield,[TIME,DATE].includes(_this.transitionObj.type)&&(_this.transitionObj.type===DATE&&_this.$emit("update:dateObj",_this.dateField),_this.$emit("update:timeObj",_this.time)),_this.close(),_context.next=10,_this.save();case 10:case"end":return _context.stop()}}),_callee)})))()},onTypeChange:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(1!==_this2.transitionObj.type){_context2.next=3;break}return _context2.next=3,_this2.save();case 3:case"end":return _context2.stop()}}),_callee2)})))()},saveUser:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.close(),_context3.next=3,_this3.save();case 3:case"end":return _context3.stop()}}),_callee3)})))()},resetCriteria:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this4.setProps({criteria:null,criteriaId:-99}),_this4.activeCriteria=null,_context4.next=4,_this4.save();case 4:case"end":return _context4.stop()}}),_callee4)})))()},saveCriteria:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _this5.canShowCriteria&&!(0,utils_validation/* isEmpty */.xb)(_this5.activeCriteria)&&_this5.setProps({criteria:_this5.activeCriteria}),_context5.next=3,_this5.save();case 3:_this5.close();case 4:case"end":return _context5.stop()}}),_callee5)})))()},createForm:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var transitionId,moduleName,selectedFieldsList,_getApp,appLinkName,appId,url,params,_yield$API$post,error,data,id;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return transitionId=_this6.transitionObj.id,moduleName=_this6.module,selectedFieldsList=_this6.selectedFieldsList,_getApp=(0,router/* getApp */.wx)(),appLinkName=_getApp.linkName,appId=_getApp.id,url="v2/forms/add",params={appLinkName:appLinkName,moduleName:moduleName,form:{name:"transition_form_".concat(transitionId,"_").concat((0,uuid.v4)()),displayName:"Enter details",appLinkName:appLinkName,appId:appId,labelPosition:1,showInMobile:!0,hideInList:!0,siteIds:[],sections:[{fields:selectedFieldsList}],stateFlowId:-99}},_this6.isSavingForm=!0,_context6.next=8,api/* API */.bl.post(url,params);case 8:if(_yield$API$post=_context6.sent,error=_yield$API$post.error,data=_yield$API$post.data,!error){_context6.next=15;break}_this6.$message.error(error.message||"Error Occured"),_context6.next=20;break;case 15:return id=data.form.id,_this6.setProps({dialogType:BeforeStateTransitionvue_type_script_lang_js_DIALOG_TYPE.FIELD,formId:id}),_context6.next=19,_this6.save();case 19:_this6.editForm(id);case 20:_this6.isSavingForm=!1;case 21:case"end":return _context6.stop()}}),_callee6)})))()},editForm:function(id){var formId=this.transitionObj.formId;this.activeFormId=id||formId,this.canShowFormBuilder=!0},closeForm:function(){this.activeFormId=null,this.canShowFormBuilder=!1},removeForm:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _this7.setProps({dialogType:-99,formId:null,formModuleName:""}),_context7.next=3,_this7.save();case 3:case"end":return _context7.stop()}}),_callee7)})))()},fetchFormFields:function(){var _this8=this;return api/* API */.bl.get("/v2/forms/fields",{moduleName:this.module}).then((function(_ref){var data=_ref.data,error=_ref.error;if(!error){var fields=_this8.$getProperty(data,"fields")||[];_this8.formFields=fields.filter((function(field){return"TASKS"!==field.displayTypeEnum}))||[]}}))},openPopup:function(){this.canShowFieldPopup=!0},saveFields:function(fields){var _this9=this;this.selectedFieldsList=fields,(0,utils_validation/* isEmpty */.xb)(fields)?this.$message.error(this.$t("common.header.please_select_one_field")):(this.canShowFieldPopup=!1,this.$nextTick((function(){_this9.activePopupType=null,_this9.createForm()})))},closePopup:function(){this.canShowFieldPopup=!1,this.activePopupType=null}}},stateflow_BeforeStateTransitionvue_type_script_lang_js=BeforeStateTransitionvue_type_script_lang_js,BeforeStateTransition_component=(0,componentNormalizer/* default */.Z)(stateflow_BeforeStateTransitionvue_type_script_lang_js,BeforeStateTransitionvue_type_template_id_447b35c4_scoped_true_render,BeforeStateTransitionvue_type_template_id_447b35c4_scoped_true_staticRenderFns,!1,null,"447b35c4",null)
/* harmony default export */,BeforeStateTransition=BeforeStateTransition_component.exports,StateTransitionActionsvue_type_template_id_7bdc471f_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-row",{staticClass:"pR30"},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" Configure actions to execute when this transiton occurs. ")]),_c("el-dropdown",{attrs:{"hide-on-click":"",trigger:"click"},on:{command:_vm.addAction}},[_c("div",{staticClass:"pointer new-statetransition-config configure-blue"},[_vm._v(" Configure ")]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.actions,(function(action,index){return _c("el-dropdown-item",{key:index,attrs:{command:_vm.actionsHash[action].actionParam}},[_vm._v(_vm._s(_vm.actionsHash[action]&&_vm.actionsHash[action].label))])})),1)],1)],1)],1),_c("hr",{staticClass:"separator-line mR40 mT20"}),_c("div",{staticClass:"mR40"},[_vm.isEmailConfi?_c("el-row",{staticClass:"action-row"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Send Email")])]),_c("el-col",{staticClass:"pT4",attrs:{span:12}},[_c("span",{staticClass:"configured-green"},[_vm._v("Configured")]),_vm.isEmailConfi?_c("span",{staticClass:"mL20 action-edit-section"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Mail"},on:{click:function($event){return _vm.editAction(_vm.emailContext)}}}),_c("span",{staticClass:"mL20 reset-txt pointer",on:{click:function($event){return _vm.reset("mail")}}},[_vm._v("Reset")])]):_vm._e()])],1):_vm._e(),_vm.isSmsConfi?_c("el-row",{staticClass:"action-row"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Send SMS")])]),_c("el-col",{staticClass:"pT4",attrs:{span:12}},[_c("span",{staticClass:"configured-green"},[_vm._v("Configured")]),_vm.isSmsConfi?_c("span",{staticClass:"mL20 action-edit-section"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Sms"},on:{click:function($event){return _vm.editAction(_vm.smsContent)}}}),_c("span",{staticClass:"mL20 reset-txt pointer",on:{click:function($event){return _vm.reset("sms")}}},[_vm._v("Reset")])]):_vm._e()])],1):_vm._e(),_vm.isMobileConfig?_c("el-row",{staticClass:"action-row"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Send Mobile Notification")])]),_c("el-col",{staticClass:"pT4",attrs:{span:12}},[_c("span",{staticClass:"configured-green"},[_vm._v("Configured")]),_vm.isMobileConfig?_c("span",{staticClass:"mL20 action-edit-section"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Mobile"},on:{click:function($event){return _vm.editAction(_vm.mobileContent)}}}),_c("span",{staticClass:"mL20 reset-txt pointer",on:{click:function($event){return _vm.reset("mobile")}}},[_vm._v("Reset")])]):_vm._e()])],1):_vm._e(),_vm.isFieldConfi?_c("el-row",{staticClass:"action-row"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Field Update")])]),_c("el-col",{staticClass:"pT4",attrs:{span:12}},[_c("span",{staticClass:"configured-green"},[_vm._v("Configured")]),_vm.isFieldConfi?_c("span",{staticClass:"mL20 action-edit-section"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Field"},on:{click:function($event){return _vm.editAction(_vm.fieldContext)}}}),_c("span",{staticClass:"mL20 reset-txt pointer",on:{click:function($event){return _vm.reset("fieldChange")}}},[_vm._v("Reset")])]):_vm._e()])],1):_vm._e(),_vm.isScriptConfi?_c("el-row",{staticClass:"action-row"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Execute Script")])]),_c("el-col",{staticClass:"pT4",attrs:{span:12}},[_c("span",{staticClass:"configured-green"},[_vm._v("Configured")]),_vm.isScriptConfi?_c("span",{staticClass:"mL20 action-edit-section"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Script"},on:{click:function($event){return _vm.editAction(_vm.scriptData)}}}),_c("span",{staticClass:"mL20 reset-txt pointer",on:{click:function($event){return _vm.reset("script")}}},[_vm._v("Reset")])]):_vm._e()])],1):_vm._e(),_vm.isStatusConfi?_c("el-row",{staticClass:"action-row"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Change Status")])]),_c("el-col",{staticClass:"pT4",attrs:{span:12}},[_c("span",{staticClass:"configured-green"},[_vm._v("Configured")]),_vm.isStatusConfi?_c("span",{staticClass:"mL20 action-edit-section"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Script"},on:{click:function($event){return _vm.editAction(_vm.changeStatus)}}}),_c("span",{staticClass:"mL20 reset-txt pointer",on:{click:function($event){return _vm.reset("changeStatus")}}},[_vm._v("Reset")])]):_vm._e()])],1):_vm._e()],1),_c("send-notification",{ref:"notificationpage",staticClass:"ruleDialog",attrs:{visibility:_vm.actionEdit,mode:_vm.actionMode,option:_vm.actionData,module:_vm.module},on:{onsave:_vm.actionSave,"update:visibility":function($event){_vm.actionEdit=$event},"update:mode":function($event){_vm.actionMode=$event},"update:option":function($event){_vm.actionData=$event}}}),_vm.fieldUpdateValue?_c("field-update-dialog",{attrs:{statusFieldName:_vm.statusFieldName,fieldChange:_vm.fieldChange,moduleFields:_vm.moduleFields,module:_vm.module,picklistOptions:_vm.picklistOptions,addRow:_vm.addRow,actionSave:_vm.actionSave,fieldUpdateValue:_vm.fieldUpdateValue},on:{"update:fieldUpdateValue":function($event){_vm.fieldUpdateValue=$event},"update:field-update-value":function($event){_vm.fieldUpdateValue=$event}}}):_vm._e(),_vm.openStatusDialog?_c("ChangeStatusDialog",{attrs:{actionObj:_vm.changeStatus,moduleName:_vm.module,moduleId:_vm.moduleId},on:{onSave:_vm.actionSave,onClose:_vm.closeDialog}}):_vm._e(),_vm.showScriptDialog?_c("ScriptDialog",{attrs:{actionObj:_vm.scriptData,moduleName:_vm.module},on:{onSave:_vm.actionSave,onClose:function($event){_vm.showScriptDialog=!1}}}):_vm._e()],1)},StateTransitionActionsvue_type_template_id_7bdc471f_scoped_true_staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),NotificationHelper=(__webpack_require__(339772),__webpack_require__(648324),__webpack_require__(683038)),SendNotification=__webpack_require__(617650),FieldUpdateDialog=__webpack_require__(634559),StatusUpdate=__webpack_require__(292974),ScriptEditor=__webpack_require__(134077),picklist=__webpack_require__(961358),StateTransitionActionsvue_type_script_lang_js={props:["module","stateflow","actions","moduleFields","moduleId"],mixins:[NotificationHelper/* default */.Z],components:{SendNotification:SendNotification/* default */.Z,FieldUpdateDialog:FieldUpdateDialog/* default */.Z,ScriptDialog:ScriptEditor/* default */.Z,ChangeStatusDialog:StatusUpdate/* default */.Z},data:function(){return{assets:null,categoryMetric:null,isEmailConfi:!1,isFieldConfi:!1,isStatusConfi:!1,isScriptConfi:!1,isControlConfi:!1,showScriptDialog:!1,emailContext:"",smsContent:"",fieldContext:"",controlContext:"",mobileContent:"",woContext:"",isSmsConfi:!1,isMobileConfig:!1,actionMode:"mail",actionEdit:!1,picklistOptions:{},actionIndex:null,fieldUpdateValue:!1,openStatusDialog:!1,actionData:null,fieldChange:{actionType:13,templateJson:{fieldMatcher:[]}},changeStatus:{actionType:19,templateJson:{new_state:null}},actionsHash:{email:{label:"Send Email",actionParam:"mail"},sms:{label:"Send SMS",actionParam:"sms"},mobile:{label:"Send Mobile Notification",actionParam:"mobile"},fieldUpdate:{label:"Field Update",actionParam:"fieldChange"},script:{label:"Execute Script",actionParam:"script"},changeStatus:{label:"Change Status",actionParam:"changeStatus"}},scriptData:null}},mounted:function(){this.stateflow&&this.initData(this.stateflow)},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},assetCategory:function(state){return state.assetCategory},ticketpriority:function(state){return state.ticketPriority}})),watch:{moduleFields:function(){this.initData(this.stateflow)}},methods:{initData:function(stateflow){var _this=this,actions=this.$getProperty(stateflow,"actions",[])||[];actions&&0===actions.length?this.addRow():actions.forEach((function(action){if(3===parseInt(action.actionType))_this.isEmailConfi=!0,_this.emailContext=action;else if(4===parseInt(action.actionType))_this.isSmsConfi=!0,_this.smsContent=action;else if(7===parseInt(action.actionType))_this.isMobileConfig=!0,_this.mobileContent=action;else if(13===parseInt(action.actionType)){_this.isFieldConfi=!0;var index=0;if(!(0,utils_validation/* isEmpty */.xb)(action.template)){var originalTemplate=action.template.originalTemplate,_loop=function(key){if(_this.addRow(),originalTemplate.hasOwnProperty(key)){var fieldMatcher=_this.fieldChange.templateJson.fieldMatcher[index],field=_this.moduleFields.filter((function(field){return field.name===key}));!(0,utils_validation/* isEmpty */.xb)(field)&&_this.setFieldMatcher(fieldMatcher,field,key,originalTemplate),_this.statusFieldName(fieldMatcher,index),index++}};for(var key in originalTemplate)_loop(key);_this.fieldContext=action}}else if(21===parseInt(action.actionType)){_this.isScriptConfi=!0,_this.scriptData=action;var templateJson={resultWorkflowContext:action.template.originalTemplate.workflowContext};_this.scriptData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this.scriptData),{},{templateJson:templateJson})}else if(19===parseInt(action.actionType)){_this.isStatusConfi=!0;var new_state=_this.$getProperty(action,"template.originalTemplate.new_state"),changeStatus=_this.changeStatus,_templateJson={new_state:new_state};_this.changeStatus=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},changeStatus),{},{templateJson:_templateJson})}}))},editAction:function(action){this.actionData=action,3===action.actionType?(this.actionMode="mail",this.actionEdit=!0,this.isEmailConfi=!0):4===action.actionType?(this.actionMode="sms",this.actionEdit=!0,this.isSmsConfi=!0):7===action.actionType?(this.actionMode="mobile",this.actionEdit=!0,this.isMobileConfig=!0):13===action.actionType?(this.isFieldConfi=!0,this.fieldUpdateValue=!0,this.actionMode="fieldChange",this.$forceUpdate()):21===action.actionType?(this.actionMode="script",this.showScriptDialog=!0,this.isScriptConfi=!0):19===action.actionType&&(this.isStatusConfi=!0,this.openStatusDialog=!0,this.actionMode="changeStatus")},setFieldMatcher:function(fieldMatcher,field,key,originalTemplate){fieldMatcher.field=key,fieldMatcher.value=originalTemplate[key],"LOOKUP"===field[0].dataTypeEnum._name?(0,utils_validation/* isEmpty */.xb)(originalTemplate[key].id)?(fieldMatcher.valueArray=originalTemplate[key],fieldMatcher.value=originalTemplate[key]):(fieldMatcher.valueArray=originalTemplate[key].id,fieldMatcher.value.id=originalTemplate[key].id):"DATE_TIME"!==field[0].dataTypeEnum._name&&"DATE"!==field[0].dataTypeEnum._name||(fieldMatcher.dateObject=this.$helpers.secTodaysHoursMinu(originalTemplate[key]/1e3)),fieldMatcher.fieldObj=field},loadPickList:function(moduleName,fieldName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this2.picklistOptions={},_context.next=3,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 3:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this2.$message.error(error.message||"Error Occured"):_this2.$set(_this2.picklistOptions,fieldName,options);case 7:case"end":return _context.stop()}}),_callee)})))()},loadSpecialTypePickList:function(specialType,fieldName){var pickOption={};if("users"===specialType){var userList=this.$store.state.users;pickOption["${LOGGED_USER}"]="Current User";var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(userList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var user=_step.value;pickOption[user.id]=user.name}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.$set(this.picklistOptions,fieldName,pickOption)}else if("groups"===specialType){var _step2,groupList=this.$store.state.groups,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(groupList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var group=_step2.value;pickOption[group.groupId]=group.name}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}this.$set(this.picklistOptions,fieldName,pickOption)}else"alarmType"===specialType?this.$set(this.picklistOptions,fieldName,this.$constants.AlarmCategory):"sourceType"===specialType&&this.$set(this.picklistOptions,fieldName,this.$constants.SourceType)},statusFieldName:function(selectedField,index){var field=this.moduleFields.filter((function(field){return field.name===selectedField.field})),fieldMatcher=this.fieldChange.templateJson.fieldMatcher[index];if(fieldMatcher.fieldObj=field,fieldMatcher.isSpacePicker=!1,!(0,utils_validation/* isEmpty */.xb)(field)){if(fieldMatcher.columnName=field[0].completeColumnName,"ENUM"===field[0].dataTypeEnum._name&&this.$set(this.picklistOptions,field[0].name,field[0].enumMap),"LOOKUP"===field[0].dataTypeEnum._name&&field[0].specialType)this.loadSpecialTypePickList(field[0].specialType,field[0].name);else if("LOOKUP"===field[0].dataTypeEnum._name&&field[0].lookupModule)if("ticketpriority"===field[0].lookupModule.name){
// handling key value pair to match existing flow pattern
var priority={};this.ticketpriority.forEach((function(d){priority[d.id]=d.displayName})),this.$set(this.picklistOptions,field[0].name,priority)}else this.loadPickList(field[0].lookupModule.name,field[0].name);this.$forceUpdate()}},loadCategoryMetric:function(id){var _this3=this;this.$util.loadAssetReadingFields(-1,id).then((function(fields){_this3.categoryMetric=fields})),this.$util.loadAsset({withReadings:!0,categoryId:id}).then((function(response){var _this3$assets;_this3.assets=[],_this3.assets.push({id:"${workorder.resource.id}",name:"Current Asset"}),(_this3$assets=_this3.assets).push.apply(_this3$assets,(0,toConsumableArray/* default */.Z)(response.assets))}))},deleteAction:function(idx){this.stateflow.actions&&this.stateflow.actions.splice(idx,1)},actionSave:function(dataObj){var data=this.$helpers.cloneObject(dataObj),actions=this.stateflow.actions||[],idx=actions.findIndex((function(d){return d.actionType===data.actionType}));-1!==idx&&actions.splice(idx,1),3===data.actionType?(this.isEmailConfi=!0,this.emailContext=data):4===data.actionType?(this.isSmsConfi=!0,this.smsContent=data):7===data.actionType?(this.isMobileConfig=!0,this.formatMobileData(data.templateJson),this.mobileContent=data):13===data.actionType?(this.fieldUpdateValue=!1,this.fieldContext=data,this.isFieldConfi=!0):19===data.actionType?(this.openStatusDialog=!1,this.changeStatus=data,this.isStatusConfi=!0):21===data.actionType&&(this.showScriptDialog=!1,this.isScriptConfi=!0,this.scriptData=data||{}),this.addModuleParam(data),actions.push(data),this.actionEdit=!1,this.$emit("onUpdate",this.updateAction(actions)),this.$emit("autoSave")},addAction:function(cmd){this.actionMode=cmd,this.actionData=null,"script"===cmd?this.showScriptDialog=!0:"workorder"!==cmd&&"fieldChange"!==cmd&&"changeStatus"!==cmd&&"controls"!==cmd?this.actionEdit=!0:"fieldChange"===cmd?(this.fieldUpdateValue=!0,this.$getProperty(this.fieldChange,"templateJson.fieldMatcher.length",0)<=0&&this.addRow()):"changeStatus"===cmd&&(this.openStatusDialog=!0)},reset:function(action){var actions=this.stateflow.actions||[];if("sms"===action){var idx=actions.findIndex((function(d){return 4===d.actionType}));actions.splice(idx,1),this.smsContent="",this.isSmsConfi=!1}else if("mail"===action){var _idx=actions.findIndex((function(d){return 3===d.actionType}));actions.splice(_idx,1),this.emailContext="",this.isEmailConfi=!1}else if("mobile"===action){var _idx2=actions.findIndex((function(d){return 7===d.actionType}));actions.splice(_idx2,1),this.mobileContent="",this.isMobileConfig=!1}else if("fieldChange"===action){var _idx3=actions.findIndex((function(d){return 13===d.actionType}));actions.splice(_idx3,1),this.isFieldConfi=!1}else if("changeStatus"===action){var _idx4=actions.findIndex((function(d){return 19===d.actionType}));actions.splice(_idx4,1),this.changeStatus=null,this.isStatusConfi=!1}else if("script"===action){var _idx5=actions.findIndex((function(d){return 21===d.actionType}));actions.splice(_idx5,1),this.isScriptConfi=!1,this.scriptData=null}this.$emit("autoSave"),this.$forceUpdate()},updateAction:function(actions){var _this4=this,newlist=[];return actions.filter((function(action){return 5!==action.actionType})).map((function(action){var template;if(3===action.actionType)template=_this4.$refs.notificationpage.getDataToSave(_this4.emailContext,"mail");else if(4===action.actionType)template=_this4.$refs.notificationpage.getDataToSave(_this4.smsContent,"sms");else if(7===action.actionType){var data=_this4.$refs.notificationpage.getDataToSave(_this4.mobileContent,"mobile");_this4.formatMobileData(data.templateJson),template=data}else 13===action.actionType?template=_this4.fieldChange:21===action.actionType?template={actionType:_this4.scriptData.actionType,templateJson:_this4.scriptData.templateJson}:19===action.actionType&&(template=_this4.changeStatus);_this4.addModuleParam(template),newlist.push(template||action)})),this.$emit("update:actions",newlist),newlist},formatMobileData:function(data){var summaryPage=this.module.toUpperCase()+"_SUMMARY",message={content_available:!0,summary_id:"${"+this.module+".id}",sound:"default",module_name:this.module,priority:"high",text:data.message,click_action:summaryPage,title:data.subject};data.body=JSON.stringify({name:this.module.toUpperCase()+"_PUSH_NOTIFICATION",notification:message,data:message,id:data.id}),data.to=data.id,this.$common.setExpressionFromPlaceHolder(data.workflow,"${"+this.module+".id}")},addRow:function(){this.$getProperty(this.fieldChange,"templateJson.fieldMatcher",[]).push({field:"",isSpacePicker:!1,value:null,parseLabel:null,valueArray:null,dateObject:{},fieldObj:null})},addModuleParam:function(template){var _this5=this,workflowParameters=this.$getProperty(template,"templateJson.workflow.parameters"),ftl=this.$getProperty(template,"templateJson.ftl");ftl&&workflowParameters&&!workflowParameters.some((function(param){return param.name===_this5.module}))&&(template.templateJson.workflow=template.templateJson.workflow||{},template.templateJson.workflow.parameters.push({name:this.module,typeString:"String"}))},serializeActions:function(){var actions=this.stateflow.actions||[];return this.updateAction(actions)},closeDialog:function(){this.openStatusDialog=!1}}},stateflow_StateTransitionActionsvue_type_script_lang_js=StateTransitionActionsvue_type_script_lang_js,StateTransitionActions_component=(0,componentNormalizer/* default */.Z)(stateflow_StateTransitionActionsvue_type_script_lang_js,StateTransitionActionsvue_type_template_id_7bdc471f_scoped_true_render,StateTransitionActionsvue_type_template_id_7bdc471f_scoped_true_staticRenderFns,!1,null,"7bdc471f",null)
/* harmony default export */,StateTransitionActions=StateTransitionActions_component.exports,StateTransitionValidationsvue_type_template_id_1d96b770_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" Add validations to run before this transition executes. ")]),_c("div",{staticClass:"pointer new-statetransition-config configure-blue",on:{click:function($event){return _vm.addValidationRow()}}},[_vm._v(" Add Validations ")]),_c("hr",{staticClass:"separator-line mR40 mT20"}),_c("div",{staticClass:"mB40"},[_vm.canShowValidations?_vm._l(_vm.transition.validations,(function(validation,index){return _c("div",{key:index,staticClass:"validation-block mR50"},[_c("div",{staticClass:"action-row flex-middle"},[_c("div",{staticClass:"width50"},[_c("p",{staticClass:"details-Heading pB5 line-height20 txt-color break-word"},[_vm._v(" "+_vm._s(validation.name)+" ")]),_c("p",{staticClass:"error-message-validation line-height18"},[_vm._v(" "+_vm._s(validation.errorMessage)+" ")])]),_c("div",{staticClass:"width50 action d-flex justify-content-end"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon pR20",attrs:{title:"Edit validation rule"},on:{click:function($event){return _vm.editValidation(index)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete delete-icon pointer pR20",attrs:{title:"Delete validation rule"},on:{click:function($event){return _vm.removeValidationRow(index)}}})])]),_c("hr",{staticClass:"separator-line m0"})])})):_vm._e()],2),_vm.showValidationPopUp?_c("el-dialog",{staticClass:"fieldchange-dialog-validation fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"Validations","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height400 overflow-y-scroll pB60"},[_vm.error?_c("error-banner",{staticStyle:{margin:"0 0 20px 0"},attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}):_vm._e(),_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Name")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{autofocus:!0,placeholder:"Enter validation name",reseize:"none"},model:{value:_vm.validation.name,callback:function($$v){_vm.$set(_vm.validation,"name",$$v)},expression:"validation.name"}}),_c("p",{staticClass:"fc-input-label-txt pT20 pB0"},[_vm._v("Condition")]),_c("el-select",{staticClass:"fc-input-full-border2 width100 fc-tag",attrs:{filterable:"",loading:_vm.criteriaListLoading,placeholder:"Select Condition","popper-class":"condition-popover"},model:{value:_vm.validation.namedCriteriaId,callback:function($$v){_vm.$set(_vm.validation,"namedCriteriaId",$$v)},expression:"validation.namedCriteriaId"}},[_vm._l(_vm.criteriaList,(function(criteria){return _c("el-option",{key:criteria.id,attrs:{label:criteria.name,value:criteria.id}})})),_c("div",{staticClass:"search-select-filter-btn pT5"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold pT10 pB10",on:{click:function($event){_vm.showCreate=!0}}},[_vm._v(" Add New ")])],1),_c("div",{staticClass:"el-select-dropdown__empty",attrs:{slot:"empty"},slot:"empty"},[_c("div",{staticClass:"empty-text"},[_vm._v("No data")]),_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold pT10 pB10",on:{click:function($event){_vm.showCreate=!0}}},[_vm._v(" Add New ")])],1)],2),_c("div",{staticClass:"flex-center-row-space"},[_c("p",{staticClass:"fc-input-label-txt pT20 pB5"},[_vm._v("Error Message")]),_c("div",{staticClass:"fc-pdf-blue-txt-13 pointer pL10 bold fc-underline-hover pT20 line-height24",on:{click:function($event){_vm.openScript=!0}}},[_vm._v(" Configure Script ")])]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{type:"textarea","min-rows":3,autosize:{minRows:3,maxRows:4},placeholder:"Enter an error message",reseize:"none"},model:{value:_vm.validation.errorMessage,callback:function($$v){_vm.$set(_vm.validation,"errorMessage",$$v)},expression:"validation.errorMessage"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save(_vm.validation)}}},[_vm._v("Save")])],1)]):_vm._e(),_vm.showCreate?_c("ConditionManagerForm",{attrs:{isNew:!0,moduleName:_vm.module},on:{onSave:_vm.setConditions,onClose:function($event){_vm.showCreate=!1}}}):_vm._e(),_vm.openScript?_c("PlaceholderScriptConfig",{attrs:{module:_vm.module,scriptTemplate:_vm.validation.errorMessagePlaceHolderScript},on:{"update:scriptTemplate":function($event){return _vm.$set(_vm.validation,"errorMessagePlaceHolderScript",$event)},"update:script-template":function($event){return _vm.$set(_vm.validation,"errorMessagePlaceHolderScript",$event)},onClose:function($event){_vm.openScript=!1}}}):_vm._e()],1)},StateTransitionValidationsvue_type_template_id_1d96b770_scoped_true_staticRenderFns=[],ConditionManagerForm=__webpack_require__(233889),PlaceholderScriptConfig=__webpack_require__(116143),StateTransitionValidationsvue_type_script_lang_js={props:["transition","module","criteriaList","criteriaListLoading"],data:function(){return{error:!1,errorMessage:"",showValidationPopUp:!1,validation:null,index:-1,showCreate:!1,openScript:!1}},components:{ConditionManagerForm:ConditionManagerForm/* default */.Z,ErrorBanner:ErrorBanner/* default */.Z,PlaceholderScriptConfig:PlaceholderScriptConfig/* default */.Z},computed:{canShowValidations:function(){var validations=this.transition.validations;return!(0,utils_validation/* isEmpty */.xb)(validations)}},methods:{setConditions:function(condition){this.$emit("setCondition",condition),this.validation.namedCriteriaId=condition.id},addValidationRow:function(){this.validation={name:"",errorMessage:"",namedCriteriaId:null,errorMessagePlaceHolderScript:null},this.index=this.transition.validations.length,this.showValidationPopUp=!0},removeValidationRow:function(index){this.transition.validations.splice(index,1),this.error=!1,this.errorMessage="",this.$emit("autoSave")},editValidation:function(index){this.showValidationPopUp=!0,this.validation=this.$helpers.cloneObject(this.transition.validations[index]),this.index=index},close:function(){this.showValidationPopUp=!1,this.validation=null,this.index=-1},save:function(validation){var index=this.index,name=validation.name,errorMessage=validation.errorMessage,namedCriteriaId=validation.namedCriteriaId;if((0,utils_validation/* isEmpty */.xb)(name)||(0,utils_validation/* isEmpty */.xb)(errorMessage)||(0,utils_validation/* isEmpty */.xb)(namedCriteriaId))return this.error=!0,void(this.errorMessage="Please configure a valid rule");this.$set(this.transition.validations,index,(0,objectSpread2/* default */.Z)({},validation)),this.error=!1,this.errorMessage="",this.$emit("autoSave"),this.close()}}},stateflow_StateTransitionValidationsvue_type_script_lang_js=StateTransitionValidationsvue_type_script_lang_js,StateTransitionValidations_component=(0,componentNormalizer/* default */.Z)(stateflow_StateTransitionValidationsvue_type_script_lang_js,StateTransitionValidationsvue_type_template_id_1d96b770_scoped_true_render,StateTransitionValidationsvue_type_template_id_1d96b770_scoped_true_staticRenderFns,!1,null,"1d96b770",null)
/* harmony default export */,StateTransitionValidations=StateTransitionValidations_component.exports,StateTransitionConfirmationsvue_type_template_id_2c9728de_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" Add confirmations required before this transition executes. ")]),_c("div",{staticClass:"pointer new-statetransition-config configure-blue",on:{click:function($event){return _vm.addValidationRow()}}},[_vm._v(" Add Confirmation ")]),_c("hr",{staticClass:"separator-line mR40 mT20"}),_c("div",{staticClass:"mB40"},[_vm.hasConfirmations?_vm._l(_vm.transition.confirmationDialogs,(function(confirmationDialog,index){return _c("div",{key:index,staticClass:"validation-block mR50"},[_c("div",{staticClass:"action-row flex-middle"},[_c("div",{staticClass:"width50"},[_c("p",{staticClass:"details-Heading pB5 line-height20 txt-color break-word"},[_vm._v(" "+_vm._s(confirmationDialog.name)+" ")]),_c("p",{staticClass:"error-message-validation line-height18"},[_vm._v(" "+_vm._s(confirmationDialog.message)+" ")])]),_c("div",{staticClass:"width50 action d-flex justify-content-end"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon pR20",attrs:{title:"Edit validation rule"},on:{click:function($event){return _vm.editConfirmation(index)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete delete-icon pointer pR20",attrs:{title:"Delete validation rule"},on:{click:function($event){return _vm.removeConfirmation(index)}}})])]),_c("hr",{staticClass:"separator-line m0"})])})):_vm._e()],2),_vm.showConfirmationPopup?_c("el-dialog",{staticClass:"fieldchange-dialog-validation fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"Confirmation","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height400 overflow-y-scroll pB60"},[_vm.error?_c("error-banner",{staticStyle:{margin:"0 0 20px 0"},attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}):_vm._e(),_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Name")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{autofocus:!0,placeholder:"Enter dialog name",reseize:"none"},model:{value:_vm.confirmation.name,callback:function($$v){_vm.$set(_vm.confirmation,"name",$$v)},expression:"confirmation.name"}}),_c("p",{staticClass:"fc-input-label-txt pT20 pB0"},[_vm._v("Condition")]),_c("el-select",{staticClass:"fc-input-full-border2 width100 fc-tag",attrs:{filterable:"",loading:_vm.criteriaListLoading,placeholder:"Select Condition","popper-class":"condition-popover"},model:{value:_vm.confirmation.namedCriteriaId,callback:function($$v){_vm.$set(_vm.confirmation,"namedCriteriaId",$$v)},expression:"confirmation.namedCriteriaId"}},[_vm._l(_vm.criteriaList,(function(criteria){return _c("el-option",{key:criteria.id,attrs:{label:criteria.name,value:criteria.id}})})),_c("div",{staticClass:"search-select-filter-btn pT5"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold pT10 pB10",on:{click:function($event){_vm.showCreate=!0}}},[_vm._v(" Add New ")])],1),_c("div",{staticClass:"el-select-dropdown__empty",attrs:{slot:"empty"},slot:"empty"},[_c("div",{staticClass:"empty-text"},[_vm._v("No data")]),_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold pT10 pB10",on:{click:function($event){_vm.showCreate=!0}}},[_vm._v(" Add New ")])],1)],2),_c("div",{staticClass:"flex-center-row-space"},[_c("p",{staticClass:"fc-input-label-txt pT20 pB5"},[_vm._v("Message")]),_c("div",{staticClass:"fc-pdf-blue-txt-13 pointer pL10 bold fc-underline-hover pT20 line-height24",on:{click:function($event){_vm.openScript=!0}}},[_vm._v(" Configure Script ")])]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{"min-rows":3,autosize:{minRows:3,maxRows:4},type:"textarea",placeholder:"Enter a message",reseize:"none"},model:{value:_vm.confirmation.message,callback:function($$v){_vm.$set(_vm.confirmation,"message",$$v)},expression:"confirmation.message"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save(_vm.confirmation)}}},[_vm._v("Save")])],1)]):_vm._e(),_vm.showCreate?_c("ConditionManagerForm",{attrs:{isNew:!0,moduleName:_vm.module},on:{onSave:_vm.setConditions,onClose:function($event){_vm.showCreate=!1}}}):_vm._e(),_vm.openScript?_c("PlaceholderScriptConfig",{attrs:{module:_vm.module,scriptTemplate:_vm.confirmation.messagePlaceHolderScript},on:{"update:scriptTemplate":function($event){return _vm.$set(_vm.confirmation,"messagePlaceHolderScript",$event)},"update:script-template":function($event){return _vm.$set(_vm.confirmation,"messagePlaceHolderScript",$event)},onClose:function($event){_vm.openScript=!1}}}):_vm._e()],1)},StateTransitionConfirmationsvue_type_template_id_2c9728de_scoped_true_staticRenderFns=[],StateTransitionConfirmationsvue_type_script_lang_js={props:["transition","module","criteriaList","criteriaListLoading"],data:function(){return{error:!1,errorMessage:"",showConfirmationPopup:!1,confirmation:null,index:-1,showCreate:!1,openScript:!1}},components:{ConditionManagerForm:ConditionManagerForm/* default */.Z,ErrorBanner:ErrorBanner/* default */.Z,PlaceholderScriptConfig:PlaceholderScriptConfig/* default */.Z},computed:{hasConfirmations:function(){var confirmationDialogs=this.transition.confirmationDialogs;return!(0,utils_validation/* isEmpty */.xb)(confirmationDialogs)}},methods:{setConditions:function(condition){this.$emit("setCondition",condition),this.confirmation.namedCriteriaId=condition.id},addValidationRow:function(){this.confirmation={name:"",message:"",namedCriteriaId:null,messagePlaceHolderScript:null},this.index=this.transition.confirmationDialogs.length,this.showConfirmationPopup=!0},removeConfirmation:function(index){this.transition.confirmationDialogs.splice(index,1),this.error=!1,this.errorMessage="",this.$emit("autoSave")},editConfirmation:function(index){this.showConfirmationPopup=!0;var confirmation=this.transition.confirmationDialogs[index],_ref=confirmation||{},namedCriteriaId=_ref.namedCriteriaId;this.confirmation=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},confirmation),{},{namedCriteriaId:(0,utils_validation/* isEmpty */.xb)(namedCriteriaId)?null:namedCriteriaId}),this.index=index},close:function(){this.showConfirmationPopup=!1,this.confirmation=null,this.index=-1},save:function(confirmation){var index=this.index,name=confirmation.name,message=confirmation.message,namedCriteriaId=confirmation.namedCriteriaId;if((0,utils_validation/* isEmpty */.xb)(namedCriteriaId)&&delete confirmation.namedCriteriaId,(0,utils_validation/* isEmpty */.xb)(name)||(0,utils_validation/* isEmpty */.xb)(message))return this.error=!0,void(this.errorMessage="Please configure a valid confirmation dialog");this.$set(this.transition.confirmationDialogs,index,(0,objectSpread2/* default */.Z)({},confirmation)),this.error=!1,this.errorMessage="",this.$emit("autoSave"),this.close()}}},stateflow_StateTransitionConfirmationsvue_type_script_lang_js=StateTransitionConfirmationsvue_type_script_lang_js,StateTransitionConfirmations_component=(0,componentNormalizer/* default */.Z)(stateflow_StateTransitionConfirmationsvue_type_script_lang_js,StateTransitionConfirmationsvue_type_template_id_2c9728de_scoped_true_render,StateTransitionConfirmationsvue_type_template_id_2c9728de_scoped_true_staticRenderFns,!1,null,"2c9728de",null)
/* harmony default export */,StateTransitionConfirmations=StateTransitionConfirmations_component.exports,TransitionDeleteDialog=__webpack_require__(555563),NewStateTransitionvue_type_script_lang_js_DIALOG_TYPE={FIELD:1,FORM:2},NewStateTransitionvue_type_script_lang_js={props:["isNew","transitionObj","closeAction","stateFlowId","stateFlowObj","module","isAutoSaveNeeded","showProgressBar"],components:{ErrorBanner:ErrorBanner/* default */.Z,BeforeStateTransition:BeforeStateTransition,StateTransitionActions:StateTransitionActions,StateTransitionValidations:StateTransitionValidations,StateTransitionConfirmations:StateTransitionConfirmations,DeleteDialog:TransitionDeleteDialog/* default */.Z},data:function(){return{loading:!0,saving:!1,error:!1,errorMessage:"",activeTab:"before",stateTransitionObj:{criteria:null,approvers:[],showInVendorPortal:!1,showInTenantPortal:!1,shouldExecuteFromPermalink:!1,actions:[],allApprovalRequired:!1,type:1,buttonType:-1,dialogType:NewStateTransitionvue_type_script_lang_js_DIALOG_TYPE.FIELD,formModuleName:null,validations:[]},formName:null,selectedFormFields:[],requesterField:[{name:"Requester",id:"requester"}],timeObj:{days:null,minute:0,hours:0},dateObj:{scheduleType:3,dateFieldId:null,time:null},supportedActionList:["email","fieldUpdate"].concat((0,toConsumableArray/* default */.Z)(this.$helpers.isLicenseEnabled("SMS")?["sms"]:[]),["mobile","script","changeStatus"]),buttonTypeList:[{key:0,value:"Not Specified"},{key:1,value:"Primary"},{key:2,value:"Secondary"}],moduleFieldsMeta:[],moduleId:null,
//namedCriteria
criteriaList:[],criteriaListLoading:!1,
// Props for stateflow builder
isPartialTransition:!1,tempTransitionId:null,showDeleteDialog:!1}},created:function(){var _this=this;this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.getModuleFields();var promises=[this.$store.dispatch("loadTicketStatus",{moduleName:this.module,forceUpdate:!0})];Promise.all(promises).then((function(){_this.init(),_this.loadCriteriaList()}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},teams:function(state){return state.groups},roles:function(state){return state.roles}})),{},{moduleFields:function(){return this.moduleFieldsMeta||null},ticketStatus:function(){return this.$store.state.ticketStatus[this.module]}}),watch:{transitionObj:function(newValue,oldValue){(null===newValue||void 0===newValue?void 0:newValue.id)!==(null===oldValue||void 0===oldValue?void 0:oldValue.id)&&this.init()}},methods:{init:function(){var _this2=this;!(0,utils_validation/* isEmpty */.xb)(this.transitionObj)&&this.transitionObj.isPartial&&(this.isPartialTransition=!0,this.tempTransitionId=this.transitionObj.id,delete this.transitionObj.isPartial,delete this.transitionObj.id),this.isPartialTransition?(this.stateTransitionObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.stateTransitionObj),this.transitionObj),this.deserialize(),this.loading=!1):this.loadTransitionData().then((function(){_this2.deserialize(),_this2.loading=!1}))},loadTransitionData:function(){var _this3=this,id=this.transitionObj.id;return(0,utils_validation/* isEmpty */.xb)(id)?Promise.resolve():api/* API */.bl.get("/v2/statetransition/view?stateTransitionId=".concat(id)).then((function(_ref){var error=_ref.error,data=_ref.data;if(!error){var transition=data.transition;return _this3.stateTransitionObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this3.transitionObj),transition)}}))},setCondition:function(condition){var _this4=this;this.criteriaList.push(condition),this.criteriaListLoading=!0,this.$nextTick((function(){_this4.criteriaListLoading=!1}))},loadCriteriaList:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,_yield$API$post,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this5.criteriaListLoading=!0,moduleName=_this5.module,_context.next=4,api/* API */.bl.post("v2/namedCriteria/list",{moduleName:moduleName});case 4:_yield$API$post=_context.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this5.$message.error(error.message||"Error Occurred"):_this5.criteriaList=data.namedCriteriaList||[],_this5.criteriaListLoading=!1;case 9:case"end":return _context.stop()}}),_callee)})))()},setProps:function(props){var _this6=this;Object.entries(props).forEach((function(_ref2){var _ref3=(0,slicedToArray/* default */.Z)(_ref2,2),key=_ref3[0],value=_ref3[1];_this6.$set(_this6.stateTransitionObj,key,value)}))},deserialize:function(){var _this7=this,_this$stateTransition=this.stateTransitionObj,approvers=_this$stateTransition.approvers,form=_this$stateTransition.form,formId=_this$stateTransition.formId,actions=_this$stateTransition.actions,type=_this$stateTransition.type,_this$stateTransition2=_this$stateTransition.dialogType,dialogType=void 0===_this$stateTransition2?null:_this$stateTransition2,TRANSITION_TYPE=this.$constants.TRANSITION_TYPE;if((0,utils_validation/* isEmpty */.xb)(approvers)||(this.stateTransitionObj.approvers=approvers.map((function(approver){return(0,approverUtils/* deserializeApprover */.Hb)(approver)}))),actions||(this.stateTransitionObj.actions=[]),TRANSITION_TYPE.time===Number(type))this.timeObj=this.$helpers.secTodaysHoursMinu(this.stateTransitionObj.scheduleTime);else if(TRANSITION_TYPE.datefield===Number(type)){var _this$stateTransition3=this.stateTransitionObj,dateFieldId=_this$stateTransition3.dateFieldId,scheduleType=_this$stateTransition3.scheduleType,time=_this$stateTransition3.time;this.dateObj={dateFieldId:dateFieldId,scheduleType:scheduleType,time:time},this.timeObj=this.$helpers.secTodaysHoursMinu(this.stateTransitionObj.interval)}this.selectedFormFields=[],form&&formId&&dialogType===NewStateTransitionvue_type_script_lang_js_DIALOG_TYPE.FIELD&&form.sections&&form.sections.length>0&&form.sections.forEach((function(field){(0,utils_validation/* isEmpty */.xb)(field.subFormId)?(field.fields||[]).forEach((function(field){_this7.selectedFormFields.push(field)})):_this7.selectedFormFields.push(field)}))},serialize:function(data){var _this8=this,_data$stateTransition=data.stateTransition,type=_data$stateTransition.type,criteria=_data$stateTransition.criteria,dialogType=_data$stateTransition.dialogType,TRANSITION_TYPE=this.$constants.TRANSITION_TYPE;if(type===TRANSITION_TYPE.user){var approvers=data.stateTransition.approvers;(0,utils_validation/* isEmpty */.xb)(approvers)||(data.stateTransition.approvers=approvers.map((function(approver){return(0,approverUtils/* serializeApprover */.c_)(approver,{fields:_this8.moduleFields})}))),delete data.stateTransition.dateFieldId,delete data.stateTransition.scheduleType,delete data.stateTransition.time,delete data.stateTransition.timeObj,delete data.stateTransition.interval,delete data.stateTransition.scheduleTime}else if([TRANSITION_TYPE.time,TRANSITION_TYPE.datefield].includes(type)){delete data.stateTransition.approvers,delete data.stateTransition.criteria;var interval=this.$helpers.daysHoursMinuToSec(this.timeObj);if(TRANSITION_TYPE.datefield===type){var _this$dateObj=this.dateObj,dateFieldId=_this$dateObj.dateFieldId,scheduleType=_this$dateObj.scheduleType,time=_this$dateObj.time;data.stateTransition=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},data.stateTransition),{},{dateFieldId:dateFieldId,scheduleType:scheduleType,time:time,interval:interval}),delete data.stateTransition.scheduleTime}else delete data.stateTransition.dateFieldId,delete data.stateTransition.scheduleType,delete data.stateTransition.time,delete data.stateTransition.interval,data.stateTransition.scheduleTime=interval;delete data.stateTransition.timeObj}else type===TRANSITION_TYPE.condition&&(delete data.stateTransition.approvers,delete data.stateTransition.scheduleTime,delete data.stateTransition.dateFieldId,delete data.stateTransition.scheduleType,delete data.stateTransition.time,delete data.stateTransition.timeObj,delete data.stateTransition.interval);
// Criteria Handling
if(criteria&&(data.stateTransition.criteria=this.serializeCriteria(criteria)),
// Button type handling
this.isNew||-1!==data.stateTransition.buttonType||(data.stateTransition.buttonType=-99),
// Form handling
delete data.stateTransition.form,[TRANSITION_TYPE.time,TRANSITION_TYPE.condition].includes(type))data.stateTransition.formModuleName="",data.stateTransition.formId=-99;else if(dialogType===NewStateTransitionvue_type_script_lang_js_DIALOG_TYPE.FIELD)data.stateTransition.formModuleName="",data.stateTransition.formId=data.stateTransition.formId||-99;else{var _data$stateTransition2=data.stateTransition,formModuleName=_data$stateTransition2.formModuleName,formId=_data$stateTransition2.formId;((0,utils_validation/* isEmpty */.xb)(formModuleName)||(0,utils_validation/* isEmpty */.xb)(formId))&&(data.stateTransition.formModuleName="",data.stateTransition.formId=-99)}
// Action Serialization
var actionsTab=this.$refs["stateFlowActions"];data.stateTransition.actions=actionsTab&&actionsTab.serializeActions()||[],
// Temp handling for fixing issue with 'criteria' object inside module obj
// TODO Should fix using models
this.$getProperty(data.stateTransition,"module")&&delete data.stateTransition.module,this.$getProperty(data.stateTransition,"event")&&delete data.stateTransition.event},save:function(){var _this9=this;this.saving=!0;var data={moduleName:this.module};return data.stateTransition=(0,objectSpread2/* default */.Z)({moduleId:this.stateFlowObj.moduleId,stateFlowId:this.stateFlowId,shouldFormInterfaceApply:!1},this.stateTransitionObj),this.serialize(data),this.$emit("onSaving"),api/* API */.bl.post("/v2/statetransition/addOrUpdate",data).then((function(_ref4){var error=_ref4.error,data=_ref4.data;if(error)_this9.$emit("onError",error);else{var eventName=_this9.isNew?"onTransitionCreate":"onTransitionUpdate";_this9.$emit(eventName,data.transition,_this9.isPartialTransition?_this9.tempTransitionId:null)}})).finally((function(){return _this9.saving=!1}))},loadFieldId:function(fieldName){if(this.moduleFieldsMeta)return this.moduleFieldsMeta.filter((function(field){return field.name===fieldName}))},getModuleFields:function(){var _this10=this;api/* API */.bl.get("/module/metafields?moduleName=".concat(this.module)).then((function(_ref5){var error=_ref5.error,data=_ref5.data;error||(_this10.moduleFieldsMeta=_this10.$getProperty(data,"meta.fields",[]),_this10.moduleId=_this10.$getProperty(data,"meta.module.id",null))}))},serializeCriteria:function(criteria){for(var _loop=function(){var condition=_Object$keys[_i],hasValidFieldName=criteria.conditions[condition].hasOwnProperty("fieldName")&&!(0,utils_validation/* isEmpty */.xb)(criteria.conditions[condition].fieldName);if(hasValidFieldName){var discardKeys=["valueArray","operatorsDataType","operatorLabel","operator"];discardKeys.forEach((function(key){delete criteria.conditions[condition][key]}))}else delete criteria.conditions[condition]},_i=0,_Object$keys=Object.keys(criteria.conditions);_i<_Object$keys.length;_i++)_loop();return criteria&&criteria.conditions&&0===Object.keys(criteria.conditions).length&&(criteria=null),criteria},cancel:function(){this.$emit("onClose")},remove:function(){this.isNew?this.isPartialTransition&&this.$emit("onDelete",this.tempTransitionId,{isPartial:!0}):this.showDeleteDialog=!0},deleteTransition:function(_ref6){var _this11=this,id=_ref6.id;return api/* API */.bl.post("/v2/statetransition/delete",{stateFlowId:this.stateFlowId,stateTransitionId:id}).then((function(_ref7){var error=_ref7.error;error?_this11.$message.error(error.message||"Error Occurred"):(_this11.$emit("onDelete",id),_this11.cancel())}))},autoSave:debounce_default()((function(){var _this$stateTransition4=this.stateTransitionObj,name=_this$stateTransition4.name,fromStateId=_this$stateTransition4.fromStateId,toStateId=_this$stateTransition4.toStateId,areEmptyFields=(0,utils_validation/* isEmpty */.xb)(name)||(0,utils_validation/* isEmpty */.xb)(fromStateId)||(0,utils_validation/* isEmpty */.xb)(toStateId);if(!0===this.isAutoSaveNeeded){if(this.isNew&&areEmptyFields)return;this.save()}}),2e3)}},stateflow_NewStateTransitionvue_type_script_lang_js=NewStateTransitionvue_type_script_lang_js,NewStateTransition_component=(0,componentNormalizer/* default */.Z)(stateflow_NewStateTransitionvue_type_script_lang_js,render,staticRenderFns,!1,null,"2920f88d",null)
/* harmony default export */,NewStateTransition=NewStateTransition_component.exports},
/***/555563:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TransitionDeleteDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/TransitionDeleteDialog.vue?vue&type=template&id=5a70b931&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"30%",title:"Confirm Delete","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height140 overflow-y-scroll pB50 pT10"},[_vm._v(" Are you sure you want to delete this transition? ")]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save delete-dialog",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Confirm")])],1)])],1)},staticRenderFns=[],TransitionDeleteDialogvue_type_script_lang_js={methods:{save:function(){this.$emit("onSave"),this.close()},close:function(){this.$emit("onClose")}}},stateflow_TransitionDeleteDialogvue_type_script_lang_js=TransitionDeleteDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(stateflow_TransitionDeleteDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,"5a70b931",null)
/* harmony default export */,TransitionDeleteDialog=component.exports},
/***/188742:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"22bc1f7e3fecc069519710728d363ce9.svg";
/***/},
/***/15482:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/noData-light.3b5d6592.png"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/80788.js.map