"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[20854],{
/***/622957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupEmptyState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupEmptyState.vue?vue&type=template&id=839bdf38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-empty"},[_c("div",{staticClass:"fc-setup-empty-image"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}})],1),_c("div",{staticClass:"fc-setup-empty-txt"},[_vm._t("emptyHeading")],2),_c("div",{staticClass:"fc-setup-empty-txt-desc"},[_vm._t("emptyDescription")],2)])},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupEmptyState=component.exports},
/***/291612:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupHeaderTabs}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupHeaderTabs.vue?vue&type=template&id=86381c1c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{},[_c("el-header",{staticClass:"fc-v1-setup-header",attrs:{height:"150"}},[_c("div",{staticClass:"flex-middle justify-content-space fc-header-border-bottom p20"},[_c("div",[_c("div",{staticClass:"fc-v1-setup-heading"},[_vm._t("heading")],2),_c("div",{staticClass:"fc-v1-setup-description"},[_vm._t("description")],2)]),_c("div",{staticClass:"flex-middle"},[_vm._t("actions")],2)]),_c("div",[_c("div",{staticClass:"fc-setup-tab-content"},[_vm._t("tabs",(function(){return[_vm._t("tabFilter",(function(){return[_c("div",{staticClass:"flex-middle justify-content-space p20"},[_c("div",{},[_vm._t("filter")],2),_c("div",{},[_vm._t("searchAndPagination")],2)])]})),_vm._t("tabContent")]}))],2)])])],1)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={}
/* normalize component */,component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupHeaderTabs=component.exports},
/***/233432:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupLoader.vue?vue&type=template&id=367e612c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-loader"},[_vm._t("setupLoading")],2)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupLoader=component.exports},
/***/20854:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Variables}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/variables/Variables.vue?vue&type=template&id=13c93bc3
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("setup-header",{scopedSlots:_vm._u([{key:"heading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("common._common.variables"))+" ")]},proxy:!0},{key:"description",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("common._common.list_of_all_variables"))+" ")]},proxy:!0},{key:"actions",fn:function(){return[_c("el-button",{staticClass:"fc-secondary-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.addNewGroupOrVariable("group")}}},[_vm._v(_vm._s(_vm.$t("common.header.add_group")))]),_c("el-button",{staticClass:"fc-primary-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.addNewGroupOrVariable("variable")}}},[_vm._v(_vm._s(_vm.$t("common.products.add_variable")))])]},proxy:!0},{key:"filter",fn:function(){return[_c("div",{staticClass:"group-select"},[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.group_filter"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 fc-tag resource-search prefix-left-align skip-disable",attrs:{filterable:""},on:{change:function($event){return _vm.selectGroup()}},model:{value:_vm.selectedGroupId,callback:function($$v){_vm.selectedGroupId=$$v},expression:"selectedGroupId"}},_vm._l(_vm.allGroups,(function(group){return _c("el-option-group",{key:group.label,attrs:{label:group.label}},_vm._l(group.options,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.name,value:item.value}})})),1)})),1)],1)]},proxy:!0},{key:"searchAndPagination",fn:function(){return[_vm.searchShow?_c("i",{staticClass:"el-icon-search pointer fc-page-search",on:{click:_vm.searchInputShow}}):_vm._e(),_vm.searchInputHide?_c("el-input",{staticClass:"width100 fc-input-full-border2 fc-input-full-border2-prefix fc-variable-search",attrs:{size:"medium",placeholder:"Search"},on:{input:function($event){return _vm.searchListData()}},model:{value:_vm.searchData,callback:function($$v){_vm.searchData=$$v},expression:"searchData"}},[_c("i",{staticClass:"el-input__icon pointer fc-grey8 f14 fwBold el-icon-search mR5 pT3",attrs:{slot:"prefix"},slot:"prefix"}),_c("i",{staticClass:"el-icon-close",attrs:{slot:"suffix"},on:{click:_vm.hideSearchInput},slot:"suffix"})]):_vm._e()]},proxy:!0}])}),_vm.loading?_c("setup-loader",{scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})]},proxy:!0}],null,!1,3199698086)}):_vm.$validation.isEmpty(_vm.variableList)&&!_vm.loading?_c("setup-empty",{scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("common.products.no_variables_available"))+" ")]},proxy:!0},{key:"emptyDescription",fn:function(){},proxy:!0}])}):_vm.$validation.isEmpty(_vm.groupList)||_vm.loading?_vm._e():_c("div",{staticClass:"p15 fc-setup-table-layout-scroll"},_vm._l(_vm.groupList,(function(groupData){return _c("div",{key:groupData.id},[_vm.$validation.isEmpty(_vm.filteredData[groupData.id])||_vm.loading?_vm._e():_c("div",[_c("div",[_c("div",{staticClass:"fc-setup-group-header visibility-visible-actions"},[_c("div",{staticClass:"fc-white-14 bold text-left flex-middle"},[_c("div",[_vm._v(_vm._s(groupData.name))]),_c("div",{staticClass:"fc-white-12 fw4 pL10 fc-italic"},[_vm._v(" "+_vm._s("("+groupData.linkName+")")+" ")])]),_c("div",{staticClass:"visibility-hide-actions flex-middle"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pointer",attrs:{title:_vm.$t("setup.users_management.delete_group")},on:{click:function($event){return $event.stopPropagation(),_vm.deleteGroup("group",{group:groupData})}}},[_c("inline-svg",{staticClass:"mR10",attrs:{src:"svgs/delete",iconClass:"icon icon-sm fc-lookup-icon fill-white"}})],1),_c("div",{staticClass:"pointer",on:{click:function($event){return $event.stopPropagation(),_vm.editGroupOrVariable("group",{group:groupData})}}},[_c("inline-svg",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{src:"svgs/edit",iconClass:"icon icon-sm fc-lookup-icon fill-white edit-icon",title:_vm.$t("common.header.edit_group")}})],1)])]),_c("div",{staticClass:"mB20"},[_c("el-header",{staticClass:"fc-table-header-sticky",attrs:{height:"40"}},[_c("el-row",[_c("el-col",{staticClass:"pL10",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.$t("common._common.name"))+" ")]),_c("el-col",{staticClass:"pL8",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.link_name"))+" ")]),_c("el-col",{staticClass:"pL5 type-width",attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("el-col",{attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.$t("asset.readings.value"))+" ")])],1)],1),_c("el-table",{ref:"variableTable",refInFor:!0,staticClass:"fc-setup-table fc-setup-table-header-hide",staticStyle:{width:"100%"},attrs:{data:_vm.filteredData[groupData.id],"cell-style":{padding:"12px 30px"},height:"100%",fit:!0}},[_c("el-table-column",{attrs:{label:"",prop:"name",width:"250px"}}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{prop:"displayLinkName",width:"250px",label:""},scopedSlots:_vm._u([{key:"default",fn:function(variable){return[_c("div",{staticClass:"flex-middle"},[_c("div",[_vm._v(" "+_vm._s(variable.row.displayLinkName)+" ")]),_c("div",{staticClass:"pointer pL5 visibility-hide-actions",on:{click:function($event){return _vm.copyLinkName(variable.row.displayLinkName)}}},[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-lg vertical-bottom"}})],1)])]}}],null,!0)}),_c("el-table-column",{attrs:{label:"",prop:"displayType","class-name":"text-capitalize",width:"150px"}}),_c("el-table-column",{attrs:{label:"",prop:"displayValue",width:"200px"}}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{width:"200px"},scopedSlots:_vm._u([{key:"default",fn:function(variable){return[_c("div",{staticClass:"text-center flex-middle"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete fc-delete-icon visibility-hide-actions pR15",attrs:{"data-arrow":"true",title:_vm.$t("common.header.delete_variable")},on:{click:function($event){return _vm.deleteVariable(variable.row)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit edit-icon visibility-hide-actions",attrs:{"data-arrow":"true",title:_vm.$t("common.products.edit_variable")},on:{click:function($event){return _vm.editGroupOrVariable("variable",{variable:variable.row})}}})])]}}],null,!0)})],1)],1)])])])})),0),_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:_vm.showGroupDeletionWarning,width:"30%",title:_vm.$t("common.header.warning"),"custom-class":"dialog-header-padding","append-to-body":!0,"before-close":function(){_vm.showGroupDeletionWarning=!1}}},[_c("div",{staticClass:"overflow-y-scroll pB40 pT10",staticStyle:{"word-break":"break-word"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.group_associated_with_variables"))+" "),_c("br"),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.header.remove_variables_before_delete"))+" ")])]),_vm.showAddForm?_c("AddNewForm",{attrs:{groupList:_vm.groupList,selectedVariable:_vm.selectedVariable,selectedGroup:_vm.selectedGroup,selectedGroupId:_vm.selectedGroupId,formType:_vm.type,isNew:_vm.isNew},on:{onClose:function($event){_vm.showAddForm=!1},onSave:_vm.saveRecord}}):_vm._e()],1)},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),GroupAndVariableFormvue_type_template_id_32635063_render=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(186466),__webpack_require__(634338),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(879288),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(947522),__webpack_require__(169358),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return"group"===_vm.formType?_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:_vm.isNew?_vm.$t("common.header.add_group"):_vm.$t("common.header.edit_group"),visible:!0,width:"30%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height300"},[_c("el-form",{ref:"groupForm",attrs:{rules:_vm.rules,model:_vm.group}},[_c("el-form-item",{attrs:{label:_vm.$t("common.header.group_name"),prop:"name",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common.header.group_name")},on:{change:function($event){return _vm.fillLinkName("group")}},model:{value:_vm.group.name,callback:function($$v){_vm.$set(_vm.group,"name",$$v)},expression:"group.name"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("setup.setupLabel.link_name"),prop:"linkName",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("setup.setupLabel.link_name")},model:{value:_vm.group.linkName,callback:function($$v){_vm.$set(_vm.group,"linkName",$$v)},expression:"group.linkName"}})],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitGroupForm()}}},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.confirm"))+" ")])],1)],1)]):_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"add-new-form-animated slideInRight fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog add-new-form","before-close":_vm.closeDialog}},[_c("el-form",{ref:"variableForm",staticClass:"fc-form",attrs:{model:_vm.variable,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?_vm.$t("common.products.add_variable"):_vm.$t("common.products.edit_variable"))+" ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("el-form-item",{attrs:{prop:"name",label:_vm.$t("common.products.name")}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common.header.variable_name")},on:{change:function($event){return _vm.fillLinkName("variable")}},model:{value:_vm.variable.name,callback:function($$v){_vm.$set(_vm.variable,"name",$$v)},expression:"variable.name"}})],1),_c("el-form-item",{attrs:{prop:"linkName",label:_vm.$t("setup.setupLabel.link_name")}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("setup.setupLabel.link_name")},model:{value:_vm.variable.linkName,callback:function($$v){_vm.$set(_vm.variable,"linkName",$$v)},expression:"variable.linkName"}})],1),_c("el-form-item",{attrs:{prop:"groupId",label:_vm.$t("common.header.group_name")}},[_c("el-select",{staticClass:"fc-input-full-border2 width100 fc-tag",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",loading:_vm.loading,"loading-text":_vm.loadingText},on:{change:_vm.createNewGroupOrSetGroup},model:{value:_vm.variable.groupId,callback:function($$v){_vm.$set(_vm.variable,"groupId",$$v)},expression:"variable.groupId"}},_vm._l(_vm.groupList,(function(groupItem,index){return _c("el-option",{key:index,attrs:{label:groupItem.name,value:groupItem.id}})})),1)],1),_c("div",{staticClass:"d-flex"},[_c("el-form-item",{staticClass:"width50",attrs:{prop:"type",label:_vm.$t("common._common.type")}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR30",attrs:{filterable:""},on:{change:_vm.resetValue},model:{value:_vm.variable.type,callback:function($$v){_vm.$set(_vm.variable,"type",$$v)},expression:"variable.type"}},_vm._l(_vm.variableTypes,(function(name,dataType){return _c("el-option",{key:name,staticClass:"text-capitalize",attrs:{label:name.toLowerCase(),value:Number(dataType)}})})),1)],1),_c("el-form-item",{staticClass:"width50",attrs:{prop:"valueString",label:_vm.$t("common._common._input_value")}},[["NUMBER","STRING","DECIMAL"].includes(_vm.variableTypes[_vm.variable.type])?[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{autofocus:"",type:_vm.getInputType(_vm.variableTypes[_vm.variable.type]),placeholder:_vm.$t("common._common.enter_variable_value")},model:{value:_vm.variable.valueString,callback:function($$v){_vm.$set(_vm.variable,"valueString",$$v)},expression:"variable.valueString"}})]:_vm._e(),["BOOLEAN"].includes(_vm.variableTypes[_vm.variable.type])?[_c("el-checkbox",{model:{value:_vm.variable.valueString,callback:function($$v){_vm.$set(_vm.variable,"valueString",$$v)},expression:"variable.valueString"}})]:_vm._e(),["DATE","DATETIME"].includes(_vm.variableTypes[_vm.variable.type])?[_c("el-date-picker",{staticClass:"fc-input-full-border2 width100",attrs:{type:_vm.getInputType(_vm.variableTypes[_vm.variable.type])},model:{value:_vm.variable.valueString,callback:function($$v){_vm.$set(_vm.variable,"valueString",$$v)},expression:"variable.valueString"}})]:_vm._e()],2)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitVariable()}}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1)])],1)}),GroupAndVariableFormvue_type_template_id_32635063_staticRenderFns=[],objectSpread2=__webpack_require__(595082),api=(__webpack_require__(907409),__webpack_require__(821057),__webpack_require__(212826),__webpack_require__(32284)),variableTypes={1:"NUMBER",2:"STRING",3:"DECIMAL",4:"BOOLEAN",5:"DATE",6:"DATETIME"},regex=/^[a-zA-Z_$]\w*/,GroupAndVariableFormvue_type_script_lang_js={props:["selectedVariable","isNew","selectedGroup","selectedGroupId","formType","groupList"],data:function(){return{saving:!1,group:{name:"",linkName:""},variable:{groupId:this.selectedGroupId?this.selectedGroupId:null,name:"",linkName:"",type:1,valueString:null},variableTypes:variableTypes,loading:!1,loadingText:null,rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"},linkName:{required:!0,validator:function(rule,value,callback){regex.test(value)?callback():callback(new Error("Enter a valid name"))},trigger:"change"},groupId:{required:!0,message:this.$t("common._common.please_select_group"),trigger:"change"},type:{required:!0,message:this.$t("common._common.please_select_variable_type"),trigger:"change"},valueString:{required:!0,message:this.$t("common._common.please_enter_value"),trigger:"change"}}}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.isNew||(_this.group=_this.selectedGroup,_this.variable=_this.selectedVariable);case 1:case"end":return _context.stop()}}),_callee)})))()},methods:{submitGroupForm:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var group,formType;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:group=_this2.group,formType=_this2.formType,_this2.$refs["groupForm"].validate(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(valid){var url,params,_yield$API$post,error,data,_ref2,variableGroup;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(valid){_context2.next=2;break}return _context2.abrupt("return",!1);case 2:return _this2.saving=!0,url="v3/globalVariable/addOrUpdateGroup",params={variableGroup:(0,objectSpread2/* default */.Z)({},group)},_context2.next=7,api/* API */.bl.post(url,params);case 7:_yield$API$post=_context2.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this2.$message.error(error.message||"Error Occurred"):(_ref2=data||{},variableGroup=_ref2.variableGroup,_this2.$message.success(_this2.$t("common.header.group_added_or_updated")),_this2.$emit("onSave",formType,variableGroup),_this2.closeDialog()),_this2.saving=!1;case 12:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref.apply(this,arguments)}}());case 2:case"end":return _context3.stop()}}),_callee3)})))()},submitVariable:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var variable,formType,_ref3,valueString,type;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:variable=_this3.variable,formType=_this3.formType,_ref3=variable||{},valueString=_ref3.valueString,type=_ref3.type,["DATE","DATETIME"].includes(variableTypes[type])&&(_this3.variable.valueString=valueString.getTime()),["BOOLEAN"].includes(variableTypes[type])&&(_this3.variable.valueString=!!valueString),_this3.$refs["variableForm"].validate(function(){var _ref4=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(valid){var url,params,_yield$API$post2,error,data,_ref5,_variable;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(valid){_context4.next=2;break}return _context4.abrupt("return",!1);case 2:return _this3.saving=!0,url="v3/globalVariable/addOrUpdate",params={variable:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},variable),{},{valueString:_this3.variable.valueString.toString()})},_context4.next=7,api/* API */.bl.post(url,params);case 7:_yield$API$post2=_context4.sent,error=_yield$API$post2.error,data=_yield$API$post2.data,error?_this3.$message.error(error.message||"Error Occurred"):(_ref5=data||{},_variable=_ref5.variable,_this3.$message.success(_this3.$t("common._common.variable_added_or_updated_successfully")),_this3.$emit("onSave",formType,_variable),_this3.closeDialog()),_this3.saving=!1;case 12:case"end":return _context4.stop()}}),_callee4)})));return function(_x2){return _ref4.apply(this,arguments)}}());case 5:case"end":return _context5.stop()}}),_callee5)})))()},createNewGroupOrSetGroup:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var variable,_ref6,groupName,url,params,_yield$API$post3,error,data,_ref7,variableGroup;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(variable=_this4.variable,_ref6=variable||{},groupName=_ref6.groupId,"string"!==typeof groupName){_context6.next=15;break}return _this4.loadingText="Adding new Group...",_this4.loading=!0,url="v3/globalVariable/addOrUpdateGroup",params={variableGroup:{name:groupName,linkName:groupName.toLowerCase().replace(/ /g,"_")}},_context6.next=9,api/* API */.bl.post(url,params);case 9:_yield$API$post3=_context6.sent,error=_yield$API$post3.error,data=_yield$API$post3.data,error?_this4.$message.error(error.message||"Error Occurred"):(_ref7=data||{},variableGroup=_ref7.variableGroup,_this4.$emit("onSave","group",variableGroup),_this4.$nextTick((function(){_this4.$set(variable,"groupId",variableGroup.id)}))),_this4.loadingText=null,_this4.loading=!1;case 15:case"end":return _context6.stop()}}),_callee6)})))()},fillLinkName:function(type){if("group"===type){var name=this.group.name,linkName=name.toLowerCase().replace(/ /g,"_");this.group.linkName=linkName}else{var _name=this.variable.name,_linkName=_name.toLowerCase().replace(/ /g,"_");this.variable.linkName=_linkName}},getInputType:function(type){var inputTypes={NUMBER:"number",DECIMAL:"number",DATE:"date",DATETIME:"datetime"};return inputTypes[type]||"text"},resetValue:function(){this.variable.valueString=null},closeDialog:function(){this.$emit("onClose")}}},variables_GroupAndVariableFormvue_type_script_lang_js=GroupAndVariableFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(variables_GroupAndVariableFormvue_type_script_lang_js,GroupAndVariableFormvue_type_template_id_32635063_render,GroupAndVariableFormvue_type_template_id_32635063_staticRenderFns,!1,null,null,null)
/* harmony default export */,GroupAndVariableForm=component.exports,validation=__webpack_require__(990260),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),SetupLoader=__webpack_require__(233432),SetupEmptyState=__webpack_require__(622957),SetupHeaderTabs=__webpack_require__(291612),Variablesvue_type_script_lang_js={components:{AddNewForm:GroupAndVariableForm,SetupHeader:SetupHeaderTabs/* default */.Z,SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z},data:function(){return{bulkVariableEdit:!1,type:null,showAddForm:!1,selectedVariable:null,selectedGroup:null,isNew:!1,groupList:[],groupVariablesMap:[],selectedGroupId:0,loading:!0,showGroupDeletionWarning:!1,totalCount:null,perPage:50,searchData:null,saving:!1,showVariable:null,filteredData:{},searchShow:!0,searchInputHide:!1}},created:function(){this.loadRecords()},watch:{page:function(){this.loadRecords()}},computed:{allGroups:function(){var groupList=this.groupList,allGroupList=[{label:"",options:[{name:"All",value:0}]}],options=groupList.map((function(group){var name=group.name,id=group.id;return{name:name,value:id}}));return allGroupList.push({label:"Groups",options:options}),allGroupList},variableList:function(){var selectedGroupId=this.selectedGroupId,groupVariablesMap=this.groupVariablesMap,loading=this.loading;return loading?[]:0===selectedGroupId?Object.values(groupVariablesMap).reduce((function(variableList,eachGrpVariable){return variableList=[].concat((0,toConsumableArray/* default */.Z)(variableList),(0,toConsumableArray/* default */.Z)(eachGrpVariable)),variableList}),[]):groupVariablesMap[selectedGroupId]}},methods:{loadRecords:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadGroupList();case 2:return _context.next=4,_this.loadGroupVariableList();case 4:_this.searchListData();case 5:case"end":return _context.stop()}}),_callee)})))()},addNewGroupOrVariable:function(type){this.selectedVariable=null,this.selectedGroup=null,this.isNew=!0,this.showAddForm=!0,this.type=type},editAllData:function(groupData,type){this.selectedVariable=groupData.id,this.showAddForm=!1,this.isNew=!1,this.type=type},editGroupOrVariable:function(type,_ref){var group=_ref.group,variable=_ref.variable;this.selectedVariable=null,this.selectedGroup=null,"group"===type?
// let group = this.groupList.find(group => group.id === selectedGroupId)
this.selectedGroup=group:this.selectedVariable=variable,this.showAddForm=!0,this.isNew=!1,this.type=type},deleteGroup:function(type,_ref2){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var group,groupVariableList,dialogObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:group=_ref2.group,_ref2.variable,
// let { selectedGroupId } = this
groupVariableList=group,0!==groupVariableList.length?_this2.showGroupDeletionWarning=!0:(dialogObj={title:_this2.$t("common.wo_report.delete_group"),htmlMessage:_this2.$t("common._common.are_you_sure_want_to_delete_group_from_this_app"),rbDanger:!0,rbLabel:_this2.$t("common.login_expiry.rbLabel")},_this2.$dialog.confirm(dialogObj).then((function(value){value&&api/* API */.bl.post("v3/globalVariable/deleteGroup",{id:selectedGroupId}).then((function(_ref3){var error=_ref3.error;if(error)_this2.$message.error(error.message||"Error Occured");else{var index=_this2.groupList.findIndex((function(group){return group.id===selectedGroupId}));(0,validation/* isEmpty */.xb)(index)||(_this2.groupList.splice(index,1),_this2.selectedGroupId=0),_this2.$message.success(_this2.$t("common._common.group_deleted_sucess"))}}))})));case 3:case"end":return _context2.stop()}}),_callee2)})))()},deleteVariable:function(_ref4){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var id,groupId,value,_yield$API$post,error,idx;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return id=_ref4.id,groupId=_ref4.groupId,_context3.next=3,_this3.$dialog.confirm({title:_this3.$t("common.header.delete_variable"),htmlMessage:_this3.$t("common._common.are_you_want_delete_this_variable"),rbDanger:!0,rbLabel:_this3.$t("common._common.confirm")});case 3:if(value=_context3.sent,value){_context3.next=6;break}return _context3.abrupt("return");case 6:return _context3.next=8,api/* API */.bl.post("v3/globalVariable/delete",{id:id});case 8:_yield$API$post=_context3.sent,error=_yield$API$post.error,error?_this3.$message.error(error.message||"Error Occurred"):(idx=_this3.groupVariablesMap[groupId].findIndex((function(s){return s.id===id})),(0,validation/* isEmpty */.xb)(idx)||(_this3.groupVariablesMap[groupId].splice(idx,1),_this3.$message.success(_this3.$t("common._common.variable_deleted_successfully"))));case 11:case"end":return _context3.stop()}}),_callee3)})))()},loadGroupList:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var url,_yield$API$get,error,data,message,_ref5,list;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return url="v3/globalVariable/listGroup",_context4.next=3,api/* API */.bl.get(url);case 3:_yield$API$get=_context4.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?(message=error.message,_this4.$message.error(message)):(_ref5=data||{},list=_ref5.list,_this4.groupList=list||[]);case 7:case"end":return _context4.stop()}}),_callee4)})))()},serializeVariableList:function(variableList,groupId){var _this$groupList$find=this.groupList.find((function(group){return group.id===groupId})),groupName=_this$groupList$find.name,groupLinkName=_this$groupList$find.linkName;return variableList.map((function(variable){var groupId=variable.groupId,id=variable.id,linkName=variable.linkName,name=variable.name,type=variable.type,typeEnum=variable.typeEnum,valueString=variable.valueString,displayValue=valueString;if(["BOOLEAN"].includes(typeEnum))displayValue="true"===valueString?"True":"False",valueString="true"===valueString;else if(["DATE","DATE_TIME"].includes(typeEnum)){var displayDate=new Date(Number(valueString)),formatObj={DATE:"DD-MMM-YYYY",DATE_TIME:"DD-MMM-YYYY HH:mm"};valueString=displayDate,displayValue=moment_timezone_default()(displayDate).format(formatObj[typeEnum])}var displayLinkName=groupLinkName+"."+linkName;return{groupId:groupId,id:id,linkName:linkName,displayLinkName:displayLinkName,name:name,type:type,typeEnum:typeEnum,valueString:valueString,groupName:groupName,displayType:typeEnum.toLowerCase().replace("_"," "),displayValue:displayValue}}))},loadGroupVariableList:function(){var _this5=this;this.groupVariablesMap={};var groupList=this.groupList,promises=groupList.map((function(group){return _this5.loadGroupVariables(group.id)}));return Promise.all(promises).then((function(data){_this5.groupVariablesMap=data.reduce((function(groupVariablesMap,eachGrpVariableList){var _ref6=eachGrpVariableList||{},groupId=_ref6.groupId,variableList=_ref6.variableList;return groupVariablesMap[groupId]=variableList,groupVariablesMap}),{})})).finally((function(){_this5.loading=!1}))},loadGroupVariables:function(groupId){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var url,params,_yield$API$get2,error,data,_ref7,list;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return url="v3/globalVariable/list",params={groupId:groupId},_context5.next=4,api/* API */.bl.get(url,params);case 4:if(_yield$API$get2=_context5.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error){_context5.next=10;break}return _ref7=data||{},list=_ref7.list,_context5.abrupt("return",{groupId:groupId,variableList:(0,validation/* isEmpty */.xb)(list)?[]:_this6.serializeVariableList(list,groupId)});case 10:case"end":return _context5.stop()}}),_callee5)})))()},saveRecord:function(formType,recordData){if("group"===formType){var idx=this.groupList.findIndex((function(grp){return grp.id===recordData.id}));if((0,validation/* isEmpty */.xb)(idx))this.groupList.push(recordData),this.groupVariablesMap[recordData.id]=[];else{this.groupList.splice(idx,1,recordData);var variableList=this.$getProperty(this.groupVariablesMap,"".concat(recordData.id),[]);this.groupVariablesMap[recordData.id]=this.serializeVariableList(variableList,recordData.id)}}else{var groupId=recordData.groupId,id=recordData.id,groupVariableList=this.groupVariablesMap[groupId],_idx=groupVariableList.findIndex((function(variable){return variable.id===id}));(0,validation/* isEmpty */.xb)(_idx)?groupVariableList.push(recordData):groupVariableList.splice(_idx,1,recordData),this.$set(this.groupVariablesMap,groupId,this.serializeVariableList(groupVariableList,groupId)),this.selectedGroupId=groupId}},copyLinkName:function(copy){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,navigator.clipboard.writeText(copy);case 2:_this7.$message({message:"Copied - "+copy,type:"success"});case 3:case"end":return _context6.stop()}}),_callee6)})))()},selectGroup:function(){this.searchListData()},searchListData:function(){var dataMap=this.filterList();this.filteredData=this.filterSelectedGroup(dataMap)},filterSelectedGroup:function(value){var selectedGroupId=this.selectedGroupId;return selectedGroupId>0?(0,defineProperty/* default */.Z)({},selectedGroupId,value[selectedGroupId]):value},filterList:function(){var _this8=this,groupVariablesMap=this.groupVariablesMap,searchData=this.searchData,newgroupVariablesMap={};return Object.keys(groupVariablesMap).forEach((function(key){var variables=groupVariablesMap[key],list=[];variables.forEach((function(variable){(null===searchData||""===searchData||variable.name.toLowerCase().indexOf(searchData.toLowerCase())>-1)&&list.push(variable)})),_this8.$set(newgroupVariablesMap,key,list)})),newgroupVariablesMap},closeBulkDialog:function(){this.bulkVariableEdit=!1},onGroupSelect:function(groupData){this.bulkVariableEdit=!0,this.showVariable=groupData[0]},searchInputShow:function(){this.searchShow=!1,this.searchInputHide=!0},hideSearchInput:function(){this.searchShow=!0,this.searchInputHide=!1}}},variables_Variablesvue_type_script_lang_js=Variablesvue_type_script_lang_js,Variables_component=(0,componentNormalizer/* default */.Z)(variables_Variablesvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Variables=Variables_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/20854.js.map