"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[10238],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/510238:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Functions}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/Functions.vue?vue&type=template&id=460884ea
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 function-page"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v(_vm._s(_vm.$t("setup.setup.functions")))]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.list.list_functions"))+" ")])]),_c("div",{staticClass:"nameSpace-btn setting-page-btn flex-middle"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){_vm.addNamespaceDialog=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.add.add_function")))])],1)]),_c("div",{staticClass:"pR10 width300px fR"},[_c("f-search",{model:{value:_vm.nameSpaces,callback:function($$v){_vm.nameSpaces=$$v},expression:"nameSpaces"}})],1),_c("div",{staticClass:"container-scroll clearboth"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("div",{staticClass:"col-lg-12 col-md-12 overflow-x"},[_c("table",{staticClass:"setting-list-view-table"},[_vm._m(0),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_vm.emptyState?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center height50vh",attrs:{colspan:"100%"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/coding",iconClass:"icon text-center icon-80"}}),_c("div",{staticClass:"pT10 bold fc-black-14"},[_vm._v(" "+_vm._s(_vm.$t("setup.empty.empty_functions"))+" ")])],1)])]):_c("tbody",[_vm._l(_vm.nameSpaces,(function(nameSpace,idex){return[_c("tr",{key:idex,staticClass:"tablerow visibility-visible-actions namespace-bg"},[_c("td",{attrs:{colspan:"100%"}},[_c("div",[_c("span",{staticClass:"fc-pink bold text-left"},[_vm._v(_vm._s(_vm.$getProperty(nameSpace,"name","")))]),_c("span",{staticClass:"pR50 fR"},[_vm.checkIfFunctionsAvailable(nameSpace)?_c("i",{staticClass:"visibility-hide-actions el-icon-delete delete-icon-danger pointer",on:{click:function($event){return _vm.deleteNameSpace(nameSpace)}}}):_vm._e()])])])]),_vm._l(nameSpace.functions,(function(functionObj,idx1){return _c("tr",{key:idex+"-"+idx1,staticClass:"tablerow visibility-visible-actions"},[_c("td",[_c("div",{staticClass:"fc-black-14 text-left bold pointer"},[_vm._v(" "+_vm._s(functionObj.name?functionObj.name:" ")+" ")])]),_c("td",{staticStyle:{width:"10%"}},[_c("div",{staticClass:"fc-black-14 text-left",staticStyle:{width:"100px"}},[_vm._v(" "+_vm._s(functionObj.returnTypeString)+" ")])]),_c("td",[_vm._v(" "+_vm._s(_vm._f("formatDate")(functionObj.sysModifiedTime))+" ")]),_c("td",[_c("div",{staticClass:"fc-black-14 flex-middle text-left"},[_vm._v(" "+_vm._s(_vm.$getProperty(functionObj.sysModifiedByObj,"name"))+" ")])]),_c("td",[_c("div",{staticClass:"visibility-hide-actions"},[_c("i",{staticClass:"el-icon-edit pointer pR10",on:{click:function($event){return _vm.editFunction(nameSpace,functionObj)}}}),_c("i",{staticClass:"el-icon-delete delete-icon-danger pointer",on:{click:function($event){return _vm.deleteFunction(functionObj)}}})])])])}))]}))],2)])])])]),_c("el-dialog",{attrs:{visible:_vm.addNamespaceDialog,fullscreen:!1,"before-close":_vm.cancel,open:"top",width:"35%",title:_vm.$t("setup.add.add_function"),"custom-class":"assetaddvaluedialog fc-dialog-center-container  fc-web-form-dialog function-dialog"},on:{"update:visible":function($event){_vm.addNamespaceDialog=$event}}},[_c("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm pB60",attrs:{model:_vm.data,rules:_vm.rules,"label-width":"120px"}},[_c("el-form-item",{staticClass:"label-top-form-item",attrs:{prop:"nameSpace"}},[_c("p",{staticClass:"label-txt2"},[_vm._v(_vm._s(_vm.$t("setup.setupLabel.namespace")))]),_c("el-autocomplete",{staticClass:"fc-input-full-border-select2 width100",attrs:{"popper-class":"my-autocomplete fc-input-full-border-select2","fetch-suggestions":_vm.querySearch,placeholder:_vm.$t("setup.setupLabel.namespace")},on:{select:_vm.selectNameSpace},scopedSlots:_vm._u([{key:"default",fn:function(ref){var item=ref.item;return[_c("div",{staticClass:"dashboard-folder-name"},[_vm._v(_vm._s(item.name))])]}}]),model:{value:_vm.data.nameSpace,callback:function($$v){_vm.$set(_vm.data,"nameSpace",$$v)},expression:"data.nameSpace"}})],1),_c("el-form-item",{staticClass:"label-top-form-item pT10",attrs:{prop:"functionname"}},[_c("p",{staticClass:"label-txt2"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.function_name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 ",attrs:{placeholder:_vm.$t("setup.setupLabel.function_name")},model:{value:_vm.data.functionname,callback:function($$v){_vm.$set(_vm.data,"functionname",$$v)},expression:"data.functionname"}})],1),_c("el-form-item",{staticClass:"label-top-form-item pT10",attrs:{prop:"returnType"}},[_c("p",{staticClass:"label-txt2"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.return_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("setup.setupLabel.return_type")},model:{value:_vm.data.returnType,callback:function($$v){_vm.$set(_vm.data,"returnType",$$v)},expression:"data.returnType"}},_vm._l(_vm.returnTypes,(function(key,value){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1)],1),_c("el-form-item",{staticClass:"label-top-form-item pT10",attrs:{prop:"returnType"}},[_c("p",{staticClass:"label-txt2"},[_vm._v(_vm._s(_vm.$t("setup.setupLabel.arguments")))]),_vm._l(_vm.data.arguments,(function(arg,i){return _c("el-row",{key:i,staticClass:"arg-container p5"},[_c("el-col",{attrs:{span:11}},[_c("el-input",{staticClass:"fc-input-full-border-select2 ",attrs:{placeholder:_vm.$t("setup.setupLabel.function_name")},model:{value:arg.argName,callback:function($$v){_vm.$set(arg,"argName",$$v)},expression:"arg.argName"}})],1),_c("el-col",{attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pL10",attrs:{placeholder:_vm.$t("setup.setupLabel.data_type")},model:{value:arg.dataType,callback:function($$v){_vm.$set(arg,"dataType",$$v)},expression:"arg.dataType"}},_vm._l(_vm.returnTypes,(function(key,value){return key>0?_c("el-option",{key:key,attrs:{label:value,value:_vm.returnTypesToName[key]}}):_vm._e()})),1)],1),_c("el-col",{staticClass:"text-center pT5",attrs:{span:4}},[_c("div",{staticClass:"pL10 inline_flex "},[_c("i",{staticClass:"el-icon-circle-plus-outline f22 fw4 pointer fc-row-add-icon",on:{click:function($event){return _vm.addArguments(arg)}}}),_vm.data.arguments.length>1?_c("i",{staticClass:"el-icon-remove-outline f22 fw4 pointer fc-row-delete-icon pL5",on:{click:function($event){return _vm.removeArguments(i)}}}):_vm._e()])])],1)}))],2)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.cancel()}}},[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.submitForm()}}},[_vm._v(_vm._s(_vm.$t("setup.users_management.add"))+" ")])],1)],1)],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("FUNCTION NAME")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("RETURN TYPE")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("MODIFIED TIME")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("MODIFIED BY")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])])}],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),Avatar=(__webpack_require__(821057),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(162506),__webpack_require__(947522),__webpack_require__(574752)),FSearch=__webpack_require__(947748),api=__webpack_require__(32284),validation=__webpack_require__(990260),Functionsvue_type_script_lang_js={components:{Avatar:Avatar["default"],FSearch:FSearch/* default */.Z},data:function(){var _this=this,nameSpaceValidate=function(rule,value,callback){""===value?callback(new Error("Please Enter the namespace")):value.split(" ").length>1?callback(new Error("Please Enter the valid namespace")):callback()},functionNameValidate=function(rule,value,callback){""===value?callback(new Error(_this.$t("setup.setupLabel.enter_function_name"))):value.split(" ").length>1?callback(new Error(_this.$t("setup.setupLabel.enter_valid_fucntion_name"))):callback()};return{isNew:!0,loading:!1,returnTypes:{Void:0,String:1,Number:2,Boolean:3,Map:4,List:5},returnTypesToName:{0:"void",1:"String",2:"Number",3:"Boolean",4:"Map",5:"List"},data:{functionname:"",nameSpace:"",description:"",returnType:null,workflowNameSpace:null,workflowUserFunction:null,arguments:[{argName:"",dataType:null}],code:{payload:"void test(){\n    \n    \n}",result:""}},rules:{nameSpace:[{validator:nameSpaceValidate,trigger:"blur"}],functionname:[{validator:functionNameValidate,trigger:"blur"}]},addNamespaceDialog:!1,functionname:"",nameSpaces:[],newFunction:!0}},mounted:function(){this.loadNameSpaceList()},computed:{emptyState:function(){var nameSpaces=this.nameSpaces,loading=this.loading;return(0,validation/* isEmpty */.xb)(nameSpaces)&&!loading}},methods:{handleNameSpace:function(command){"delete"===command&&this.deleteFunction()},checkIfFunctionsAvailable:function(nameSpace){var functions=nameSpace.functions;return(0,validation/* isEmpty */.xb)(functions)},querySearch:function(queryString,cb){var results=queryString?this.nameSpaces.filter(this.createFilter(queryString)):this.nameSpaces;cb(results)},createFilter:function(queryString){return function(link){return 0===link.name.toLowerCase().indexOf(queryString.toLowerCase())}},editFunction:function(namespace,fun){namespace&&fun&&(this.setData(namespace,fun),this.newFunction=!0,this.$router.push({name:"functions.edit",params:{namespaceId:null===namespace||void 0===namespace?void 0:namespace.id,functionId:null===fun||void 0===fun?void 0:fun.id}}))},selectNameSpace:function(item){item&&(this.data.nameSpace=item.name,this.data.workflowNameSpace=item)},setData:function(namespace,fun){namespace&&fun&&(this.data.workflowNameSpace=namespace,this.data.workflowUserFunction=fun,this.data.functionname=fun.name,this.data.nameSpace=namespace.name,this.data.returnType=fun.returnType,this.data.code.payload=fun.workflowV2String)},loadNameSpaceList:function(){var _arguments=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,params,_yield$API$get,error,data,_ref,workflowNameSpaceList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_this2.loading=!0,params={},_context.next=5,api/* API */.bl.get("/v2/workflow/getNameSpaceListWithFunctions",params,{force:force});case 5:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this2.$message.error(error.message||"Error Occured"):(_ref=data||{},workflowNameSpaceList=_ref.workflowNameSpaceList,_this2.nameSpaces=workflowNameSpaceList||{}),_this2.loading=!1;case 10:case"end":return _context.stop()}}),_callee)})))()},setnameSpace:function(){this.data.nameSpace=this.data.functionname.replace(/\W+(.)/g,(function(match,chr){return chr.toUpperCase()}))},cancel:function(){this.addNamespaceDialog=!1},submitForm:function(){var _this3=this;this.$refs["ruleForm"].validate((function(valid){if(!valid)return!1;_this3.saveNameSpace()}))},deleteNameSpace:function(data){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return params={namespace:data},_context2.next=3,api/* API */.bl.post("v2/workflow/deleteNameSpace",params);case 3:_yield$API$post=_context2.sent,error=_yield$API$post.error,error?_this4.$message.error(error.message||"Error Occurred"):(_this4.$message.success(_this4.$t("setup.setup.namespace_delete")),_this4.loadNameSpaceList(!0));case 6:case"end":return _context2.stop()}}),_callee2)})))()},deleteFunction:function(functionObj){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var value,_ref2,id,params,_yield$API$post2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this5.$dialog.confirm({title:"Delete Function",htmlMessage:"Are you sure want to delete this Function?",rbDanger:!0,rbLabel:"Confirm"});case 2:if(value=_context3.sent,value){_context3.next=5;break}return _context3.abrupt("return");case 5:return _ref2=functionObj||{},id=_ref2.id,params={workflow:{id:id}},_context3.next=9,api/* API */.bl.post("v2/workflow/deleteWorkflow",params);case 9:_yield$API$post2=_context3.sent,error=_yield$API$post2.error,error?_this5.$message.error(error.message||"Error Occurred"):(_this5.$message.success("Function deleted successfully"),_this5.loadNameSpaceList(!0));case 12:case"end":return _context3.stop()}}),_callee3)})))()},clearData:function(){this.data={functionname:"",nameSpace:"",description:"",returnType:null,workflowNameSpace:null,workflowUserFunction:null,arguments:[{argName:"",dataType:null}],code:{payload:"void test(){\n    \n    \n}",result:""}}},saveNameSpace:function(){var _this6=this;this.data.workflowNameSpace&&this.data.workflowNameSpace.id?this.addFunction(this.data):this.$http.post("/v2/workflow/addNameSpace",{namespace:{name:this.data.nameSpace}}).then((function(response){response.data.result&&response.data.result.workflowNameSpace&&(_this6.data.workflowNameSpace=response.data.result.workflowNameSpace,_this6.addNamespaceDialog=!1,_this6.addFunction(_this6.data))})).catch((function(error){error&&this.$message.error(error.message||"Error Occurred")}))},addFunction:function(data){var _this7=this,params={};this.constructCodePayload(data),params["userFunction"]={workflowV2String:data.code.payload,isV2Script:!0},params["userFunction"]["nameSpaceId"]=data.workflowNameSpace.id,params["userFunction"]["returnType"]=data.returnType,api/* API */.bl.post("/v2/workflow/addUserFunction",params).then((function(response){var _response$data,_response$data2;response.data.result&&response.data.result.workflowUserFunction&&(_this7.data.workflowUserFunction=response.data.result.workflowUserFunction);var namespaceId=null===response||void 0===response||null===(_response$data=response.data)||void 0===_response$data||null===(_response$data=_response$data.workflowUserFunction)||void 0===_response$data?void 0:_response$data.nameSpaceId,functionId=null===response||void 0===response||null===(_response$data2=response.data)||void 0===_response$data2||null===(_response$data2=_response$data2.workflowUserFunction)||void 0===_response$data2?void 0:_response$data2.id;_this7.addNamespaceDialog=!1,_this7.$router.push({name:"functions.edit",params:{namespaceId:namespaceId,functionId:functionId}})})).catch((function(error){error&&this.$message.error(error.message||"Error Occurred")}))},constructCodePayload:function(data){data&&data.functionname&&(data.code.payload=this.returnTypesToName[data.returnType]+" "+data.functionname+this.setArguments(data)+"{\n    \n    \n}")},addArguments:function(arg){arg.argName.length>0&&arg.dataType?this.data.arguments.push({argName:"",dataType:null}):this.$message.error("Plase Enter all the fields")},removeArguments:function(i){this.data.arguments.splice(i,1)},setArguments:function(data){if(data&&data.arguments&&data.arguments.length){if(data.hasOwnProperty("returnType")){var str="(";return data.arguments.forEach((function(arg,index){arg.dataType&&(str+=arg.dataType+" "+arg.argName,index!==data.arguments.length-1&&(str+=", "))})),str+")"}return"()"}return"()"}}},setup_Functionsvue_type_script_lang_js=Functionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_Functionsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Functions=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/10238.js.map