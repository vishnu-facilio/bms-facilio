"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[89106,32686,80865,53021],{
/***/724460:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SignatureColumn}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/SignatureColumn.vue?vue&type=template&id=00c0fd35&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasSignature({field:_vm.field,record:_vm.record})?_c("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"hover","close-delay":100}},[_c("div",{staticClass:"signature-field-container"},[_c("img",{attrs:{src:_vm.getSignatureUrl({field:_vm.field,record:_vm.record})}})]),_c("a",{attrs:{slot:"reference"},slot:"reference"},[_vm._v("Signed")])]):_c("div",[_vm._v("Not Signed")])],1)},staticRenderFns=[],validation=(__webpack_require__(434284),__webpack_require__(990260)),baseUrl=__webpack_require__(420499),SignatureColumnvue_type_script_lang_js={props:["field","record"],methods:{hasSignature:function(props){var field=props.field,record=props.record,_ref=field||{},name=_ref.name,isDefaultField=this.$getProperty(field||{},"default");if(isDefaultField)return!(0,validation/* isEmpty */.xb)(record["".concat(name,"Id")]);var recordData=this.$getProperty(record,"data.".concat(name,"Id"));return!(0,validation/* isEmpty */.xb)(recordData)||!(0,validation/* isEmpty */.xb)(record["".concat(name,"Id")])},getSignatureUrl:function(props){
// TODO move this handling to some util
var field=props.field,record=props.record,_ref2=field||{},name=_ref2.name;if(!(0,validation/* isEmpty */.xb)(field)){var url="".concat((0,baseUrl/* getBaseURL */.BS)()),previewUrl=null,_field$default=field.default,isDefault=void 0!==_field$default&&_field$default;return previewUrl=isDefault?this.$getProperty(record,"".concat(name,"Url")):this.$getProperty(record.data,"".concat(name,"Url"))||this.$getProperty(record,"".concat(name,"Url")),(0,validation/* isEmpty */.xb)(previewUrl)?void 0:url+"".concat(previewUrl.split("/api")[1])}}}},list_SignatureColumnvue_type_script_lang_js=SignatureColumnvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_SignatureColumnvue_type_script_lang_js,render,staticRenderFns,!1,null,"00c0fd35",null)
/* harmony default export */,SignatureColumn=component.exports},
/***/213657:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return GlimpseCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/GlimpseCard.vue?vue&type=template&id=3cadb0c7
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"quick-summary-card-container"},[_c("div",{staticClass:"p8"},[_c("div",{staticClass:"d-flex pB10 align-center height20 justify-content-space"},[_c("div",[_c("span",{staticClass:"f14 id-color"},[_vm._v("#"+_vm._s(_vm.config.id)+" ")]),_vm.$validation.isEmpty(_vm.config.moduleState)?_vm._e():_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15 status-content "},[_vm._v(" "+_vm._s(_vm.config.moduleState)+" ")])]),_vm.config.canShowRedirect?_c("div",{staticClass:"open-summary",on:{click:_vm.redirectToSummary}},[_c("inline-svg",{attrs:{src:"svgs/external-link2",iconClass:"icon icon-xs"}})],1):_vm._e()]),_c("div",{staticClass:"d-flex align-center"},[_vm.config.canShowImage?_c("img",{staticClass:"image-circle mR10",attrs:{src:_vm.config.imageUrl}}):_vm._e(),_c("div",{staticClass:"f16 bold elipsis-txt fld-dis-name"},[_vm._v(" "+_vm._s(_vm.config.displayName)+" ")])])]),_vm._t("fields")],2)},staticRenderFns=[],GlimpseCardvue_type_script_lang_js={props:["config"],methods:{redirectToSummary:function(){this.$emit("redirectToSummary")}}},components_GlimpseCardvue_type_script_lang_js=GlimpseCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_GlimpseCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,GlimpseCard=component.exports},
/***/705219:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return GlimpseLookupWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/GlimpseLookupWrapper.vue?vue&type=template&id=74c602b4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{trigger:"hover","visible-arrow":!1,"open-delay":800,disabled:!_vm.showWigetFields},on:{hide:_vm.onHidePopover,show:function($event){_vm.onShowpopover=!0}}},[_c("div",{staticClass:"width-fit  quick-summary-card-header pointer",attrs:{slot:"reference"},on:{mouseenter:_vm.onHoverFields,mouseover:function($event){_vm.showEyeIcon=!0}},slot:"reference"},[_vm.canShowLink?_c("div",{staticClass:"bluetxt f13",class:[_vm.canShowEyeIcon?"qs-field":"bluetxt"],on:{click:function($event){return _vm.redirectToLookUpFieldSummary(_vm.field,_vm.record)}}},[_vm._v(" "+_vm._s(_vm.displayValue)+" ")]):_c("div",[_vm._v(_vm._s(_vm.displayValue))]),_c("div",{class:[_vm.canShowEyeIcon?"qs-selection-bar":"selection-bar"]})]),_vm.showWigetFields?_c("GlimpseCardWrapper",_vm._b({attrs:{field:_vm.field,details:_vm.details,displayValue:_vm.displayValue,lookupModuleName:_vm.lookupModuleName,canShowRedirect:_vm.canShowLink,moduleName:_vm.moduleName,recordId:_vm.recordId,siteList:_vm.siteList}},"GlimpseCardWrapper",_vm.$attrs,!1)):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),GlimpseCardWrappervue_type_template_id_7a4f427f_render=(__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(670560),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isLoading?_c("div",_vm._l(2,(function(i){return _c("div",{key:i,staticClass:"fields-glimpse"},[_c("div",{staticClass:"loading-shimmer line"}),_c("div",{staticClass:"loading-shimmer line1 mB10"})])})),0):_vm.canShowGlimpse?_c("glimpse-card",{key:"event-"+_vm.details.id,attrs:{config:_vm.glimpseConfig},on:{redirectToSummary:function($event){return _vm.redirectToLookUpFieldSummary(_vm.field)}},scopedSlots:_vm._u([{key:"fields",fn:function(){return[_c("div",{staticClass:"fd-field-details-card width100"},[_c("field-details",{attrs:{columns:_vm.columns,detailsLayout:_vm.detailsLayout,config:_vm.fieldConfig}})],1)]},proxy:!0}])}):_vm.$validation.isEmpty(_vm.deletedRecord)?_vm._e():_c("div",{staticClass:"deleted-glimpse-text"},[_c("fc-icon",{attrs:{group:"action",name:"info",size:"15"}}),_vm._v(" "+_vm._s(_vm.deletedRecord)+" ")],1)],1)}),GlimpseCardWrappervue_type_template_id_7a4f427f_staticRenderFns=[],app=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(865137),__webpack_require__(654564),__webpack_require__(90385),__webpack_require__(782080)),baseUrl=__webpack_require__(420499),vuex_esm=__webpack_require__(420629),FetchViewsMixin=__webpack_require__(646716),routeUtil=__webpack_require__(405759),validation=__webpack_require__(990260),router=__webpack_require__(329435),GlimpseCard=__webpack_require__(213657),calendarSupportUtil=__webpack_require__(852452),picklist=__webpack_require__(961358),GlimpseCardWrappervue_type_script_lang_js={mixins:[FetchViewsMixin/* default */.Z],components:{FieldDetails:app/* NewFieldDetails */.f3,GlimpseCard:GlimpseCard/* default */.Z},props:["details","field","lookupModuleName","displayValue","canShowRedirect","siteList","recordId","moduleName","updateSite"],data:function(){return{isLoading:!1,canShowGlimpse:!1,deletedRecord:"",detailsLayout:[],glimpseData:[],columns:2}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.isLoading=!0,_context.next=3,_this.fetchSites();case 3:return _context.next=5,_this.fetchSummaryDetails();case 5:return _this.deserialize(),_context.next=8,_this.$store.dispatch("getActiveCurrencyList");case 8:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("glimpse",{glimpseDetails:function(state){return state.glimpseDetails},glimpseFields:function(state){return state.glimpseFields},deletedGlimpse:function(state){return state.deletedGlimpse}})),(0,vuex_esm/* mapState */.rn)({currencyList:function(state){return state.activeCurrencies},account:function(state){return state.account}})),(0,vuex_esm/* mapGetters */.Se)("glimpse",["getGlimpseFieldId"])),{},{glimpseModuleState:function(){var displayName=this.$getProperty(this.glimpseData,"moduleState.displayName",null)||null;return displayName},multiCurrency:function(){var _ref=this.$getProperty(this.account,"data.currencyInfo")||{},displaySymbol=_ref.displaySymbol,currencyCode=_ref.currencyCode,multiCurrencyEnabled=_ref.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}},canShowImage:function(){var _this$details;return!(0,validation/* isEmpty */.xb)(null===(_this$details=this.details)||void 0===_this$details?void 0:_this$details.photoFileName)},lookupFieldName:function(){var _ref2=this.field||{},name=_ref2.name;return name},imageUrl:function(){var getImage=this.getImage,details=this.details;return getImage(null===details||void 0===details?void 0:details.photoId)||""},fieldConfig:function(){var multiCurrency=this.multiCurrency,currencyList=this.currencyList;return{dateformat:this.$dateformat,timezone:this.$timezone,timeformat:this.$timeformat,showDivider:!1,org:this.$account.org,multiCurrency:multiCurrency,currencies:currencyList}},glimpseId:function(){var _ref3=this.details||{},id=_ref3.id,localId=_ref3.localId;return calendarSupportUtil/* moduleByLocalId */.X.includes(this.lookupModuleName)&&localId||id},glimpseConfig:function(){var glimpseId=this.glimpseId,canShowImage=this.canShowImage,imageUrl=this.imageUrl,glimpseModuleState=this.glimpseModuleState,canShowRedirect=this.canShowRedirect,displayValue=this.displayValue,config={id:glimpseId,moduleState:glimpseModuleState,displayName:displayValue,canShowRedirect:canShowRedirect,canShowImage:canShowImage,imageUrl:imageUrl};return config}}),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)("glimpse",["loadGlimpse"])),{},{getImage:function(photoId){return"".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(photoId)},fetchSites:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var details,siteId,siteObj,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(details=_this2.details,siteId=details.siteId||null,siteObj=_this2.getSiteDisplayName(siteId),!(0,validation/* isEmpty */.xb)(siteObj)||(0,validation/* isEmpty */.xb)(siteId)){_context2.next=10;break}return _context2.next=6,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"site"},defaultIds:[siteId],perPage:1});case 6:_yield$getFieldOption=_context2.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error||(0,validation/* isEmpty */.xb)(options)||(_this2.updateSite(options),_this2.$emit("updateSite",options));case 10:case"end":return _context2.stop()}}),_callee2)})))()},fetchSummaryDetails:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var details,moduleName,lookupModuleName,glimpseFields,lookupFieldName,deletedGlimpse,recordId,isDeletedRecord,hasFieldDetails;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(details=_this3.details,moduleName=_this3.moduleName,lookupModuleName=_this3.lookupModuleName,glimpseFields=_this3.glimpseFields,lookupFieldName=_this3.lookupFieldName,deletedGlimpse=_this3.deletedGlimpse,recordId=_this3.recordId,isDeletedRecord=deletedGlimpse[lookupModuleName],!(0,validation/* isEmpty */.xb)(isDeletedRecord)){_context3.next=7;break}if(hasFieldDetails=glimpseFields[details.id]||null,!(0,validation/* isEmpty */.xb)(hasFieldDetails)){_context3.next=7;break}return _context3.next=7,_this3.loadGlimpse({moduleName:moduleName,lookupModuleName:lookupModuleName,id:recordId,lookupFieldName:lookupFieldName,recordId:null===details||void 0===details?void 0:details.id});case 7:case"end":return _context3.stop()}}),_callee3)})))()},deserialize:function(){var _this$details2,_this4=this,data=this.glimpseDetails[this.lookupModuleName]||{};if(this.deletedRecord=this.deletedGlimpse[null===(_this$details2=this.details)||void 0===_this$details2?void 0:_this$details2.id]||{},(0,validation/* isEmpty */.xb)(this.deletedRecord)){this.canShowGlimpse=!0;var fields=(data.configurationFields||[]).map((function(flt){var _ref4=flt||{},facilioField=_ref4.facilioField,sequenceNumber=_ref4.sequenceNumber,_ref5=facilioField||{},displayName=_ref5.displayName,name=_ref5.name,dataTypeEnum=_ref5.dataTypeEnum,_ref5$enumMap=_ref5.enumMap,enumMap=void 0===_ref5$enumMap?{}:_ref5$enumMap,trueVal=_ref5.trueVal,falseVal=_ref5.falseVal,displayType=_ref5.displayType,options=(0,objectSpread2/* default */.Z)({},enumMap)||{};return"BOOLEAN"===dataTypeEnum&&(options={trueVal:trueVal,falseVal:falseVal}),{displayName:displayName,name:name,sequenceNumber:sequenceNumber,dataTypeEnum:dataTypeEnum,options:options,displayType:displayType}})),details=this.glimpseFields[this.details.id],_ref6=details||{},currencyCode=_ref6.currencyCode,exchangeRate=_ref6.exchangeRate;this.glimpseData=details;var result=(fields||[]).flatMap((function(fld){var value=(0,validation/* isEmpty */.xb)(details[null===fld||void 0===fld?void 0:fld.name])?null:details[null===fld||void 0===fld?void 0:fld.name];if(["siteId","site"].includes(null===fld||void 0===fld?void 0:fld.name)){var name=_this4.getSiteDisplayName(details[fld.name]);value="siteId"===(null===fld||void 0===fld?void 0:fld.name)?name:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},details[fld.name]),{},{name:name})}var res=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fld),{},{value:value});return"MULTI_CURRENCY_FIELD"===fld.dataTypeEnum&&(res=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},res),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})),res})).sort((function(s1,s2){return s1.sequenceNumber-s2.sequenceNumber}));this.columns=1===result.length?1:2,this.detailsLayout=[{fields:result}]}this.isLoading=!1},getSiteDisplayName:function(siteValue){var siteObj=(this.siteList||[]).find((function(site){return site.value===(null===siteValue||void 0===siteValue?void 0:siteValue.id)||siteValue})),_ref7=siteObj||{},label=_ref7.label;return label},redirectToLookUpFieldSummary:function(lookUpField){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _ref8,lookupModuleName,field,_ref9,lookupModule,_ref10,name,custom,id,moduleName,viewname,_ref11,routeName,currentModuleName,routeObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _ref8=lookUpField||{},lookupModuleName=_ref8.lookupModuleName,field=_ref8.field,_ref9=field||{},lookupModule=_ref9.lookupModule,_ref10=lookupModule||{},name=_ref10.name,custom=_ref10.custom,id=_this5.details.id,moduleName=lookupModuleName||name,_context4.next=7,_this5.fetchView(moduleName);case 7:if(viewname=_context4.sent,!(0,validation/* isEmpty */.xb)(id)){_context4.next=10;break}return _context4.abrupt("return");case 10:(0,router/* isWebTabsEnabled */.tj)()?(_ref11=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},routeName=_ref11.name,routeName&&_this5.$router.push({name:routeName,params:{viewname:viewname,id:id}})):(currentModuleName=custom?"custom":moduleName,routeObj=(0,routeUtil/* findRouterForModuleInApp */.E)(currentModuleName,router/* pageTypes */.As.OVERVIEW)||{},(0,validation/* isEmpty */.xb)(routeObj)||_this5.$router.push(routeObj(id,viewname,moduleName)));case 11:case"end":return _context4.stop()}}),_callee4)})))()}})},components_GlimpseCardWrappervue_type_script_lang_js=GlimpseCardWrappervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_GlimpseCardWrappervue_type_script_lang_js,GlimpseCardWrappervue_type_template_id_7a4f427f_render,GlimpseCardWrappervue_type_template_id_7a4f427f_staticRenderFns,!1,null,null,null)
/* harmony default export */,GlimpseCardWrapper=component.exports,GlimpseLookupWrappervue_type_script_lang_js={mixins:[FetchViewsMixin/* default */.Z],props:["field","record","siteList","hideGlimpse","recordModuleName"],components:{GlimpseCardWrapper:GlimpseCardWrapper},data:function(){return{showWigetFields:!1,showEyeIcon:!1,onShowpopover:!1}},mounted:function(){var _this=this,channel=new BroadcastChannel("glimpse");channel.addEventListener("message",(function(event){var message=event.data;"resetDetails"===message&&_this.resetGlimpseDetails()}))},beforeDestroy:function(){this.resetGlimpse()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("glimpse",{glimpseDetails:function(state){return state.glimpseDetails},deletedGlimpse:function(state){return state.deletedGlimpse}})),{},{canShowEyeIcon:function(){return this.showWigetFields&&this.showEyeIcon},recordId:function(){var _ref=this.record||{},id=_ref.id;return id},moduleName:function(){var _ref2=this||{},recordModuleName=_ref2.recordModuleName,record=_ref2.record,field=_ref2.field,$route=_ref2.$route,_ref3=record||{},moduleName=_ref3.moduleName,name=this.$getProperty(field.field,"module.name")||"",_ref4=(null===$route||void 0===$route?void 0:$route.meta)||{},recordMetaModuleName=_ref4.moduleName;return recordModuleName||moduleName||name||recordMetaModuleName},details:function(){var _ref5=this.field||{},name=_ref5.name,recordValue=this.record[name];if("siteId"===name){var siteObj=(this.siteList||[]).find((function(site){return site.value===recordValue})),_ref6=siteObj||{},displayName=_ref6.label,value=_ref6.value;return{displayName:displayName,id:value}}return recordValue||{}},webTabRouteName:function(){var lookupModuleName=this.lookupModuleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref7=(0,router/* findRouteForModule */.Jp)(lookupModuleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name;return name}return null},lookupModuleName:function(){var _this$field;if("siteId"===(null===(_this$field=this.field)||void 0===_this$field?void 0:_this$field.name))return"site";var _ref8=this.field||{},lookupModuleName=_ref8.lookupModuleName,_ref8$field=_ref8.field,_ref8$field2=void 0===_ref8$field?{}:_ref8$field,_ref8$field2$lookupMo=_ref8$field2.lookupModule,_ref8$field2$lookupMo2=void 0===_ref8$field2$lookupMo?{}:_ref8$field2$lookupMo,name=_ref8$field2$lookupMo2.name;return lookupModuleName||name||null},displayValue:function(){var _ref9=this.details||{},primaryValue=_ref9.primaryValue,name=_ref9.name,displayName=_ref9.displayName,subject=_ref9.subject,_ref10=this.field||{},displayValue=_ref10.displayValue,value=displayName||name||subject||displayValue||"---";return(0,validation/* isEmpty */.xb)(primaryValue)?value:primaryValue},canShowLink:function(){var isLookUpRedirectApplicable=this.isLookUpRedirectApplicable,field=this.field,displayValue=this.displayValue,hideGlimpse=this.hideGlimpse;return isLookUpRedirectApplicable(field)&&"---"!=displayValue&&!hideGlimpse}}),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)("glimpse",["loadGlimpseMetaFields","resetGlimpse","resetGlimpseDetails"])),{},{onHidePopover:function(){this.showEyeIcon=!1,this.onShowpopover=!1,this.showWigetFields=!1},onHoverFields:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _glimpseDetails$looku,lookupModuleName,glimpseDetails,hideGlimpse,currentModuleMeta;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(lookupModuleName=_this2.lookupModuleName,glimpseDetails=_this2.glimpseDetails,hideGlimpse=_this2.hideGlimpse,!hideGlimpse){_context.next=3;break}return _context.abrupt("return");case 3:if(currentModuleMeta=glimpseDetails[lookupModuleName]||null,!(0,validation/* isEmpty */.xb)(currentModuleMeta)){_context.next=6;break}return _context.abrupt("return");case 6:return _context.next=8,_this2.loadGlimpseMetaFields({moduleName:lookupModuleName});case 8:_this2.showWigetFields=(null===(_glimpseDetails$looku=glimpseDetails[lookupModuleName])||void 0===_glimpseDetails$looku?void 0:_glimpseDetails$looku.active)&&"---"!=_this2.displayValue;case 9:case"end":return _context.stop()}}),_callee)})))()},redirectToLookUpFieldSummary:function(lookUpField,details){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this3$details,_ref11,lookupModuleName,field,_ref12,lookupModule,fieldName,_ref13,name,custom,id,moduleName,siteObj,_ref14,value,_details$fieldName,viewname,currentModuleName,routeObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if((0,validation/* isEmpty */.xb)(_this3.deletedGlimpse[null===(_this3$details=_this3.details)||void 0===_this3$details?void 0:_this3$details.id])){_context2.next=2;break}return _context2.abrupt("return");case 2:return _ref11=lookUpField||{},lookupModuleName=_ref11.lookupModuleName,field=_ref11.field,_ref12=field||{},lookupModule=_ref12.lookupModule,fieldName=_ref12.name,_ref13=lookupModule||{},name=_ref13.name,custom=_ref13.custom,id=null,moduleName=null,"siteId"===fieldName?(siteObj=(_this3.siteList||[]).find((function(site){return site.value===details[fieldName]})),_ref14=siteObj||{},value=_ref14.value,id=value,moduleName="site"):(id=(null===(_details$fieldName=details[fieldName])||void 0===_details$fieldName?void 0:_details$fieldName.id)||null,moduleName=lookupModuleName||name),_context2.next=9,_this3.fetchView(moduleName);case 9:if(viewname=_context2.sent,!(0,validation/* isEmpty */.xb)(id)){_context2.next=12;break}return _context2.abrupt("return");case 12:(0,router/* isWebTabsEnabled */.tj)()?(0,validation/* isEmpty */.xb)(_this3.webTabRouteName)||_this3.$router.push({name:_this3.webTabRouteName,params:{viewname:viewname,id:id}}):(currentModuleName=custom?"custom":moduleName,routeObj=(0,routeUtil/* findRouterForModuleInApp */.E)(currentModuleName,router/* pageTypes */.As.OVERVIEW)||{},(0,validation/* isEmpty */.xb)(routeObj)||_this3.$router.push(routeObj(id,viewname,moduleName)));case 13:case"end":return _context2.stop()}}),_callee2)})))()},isLookUpRedirectApplicable:function(field){var webTabRouteName=this.webTabRouteName,_ref15=field||{},lookupModuleName=_ref15.lookupModuleName,fieldObj=_ref15.field,_ref16=fieldObj||{},lookupModule=_ref16.lookupModule,_ref17=lookupModule||{},custom=_ref17.custom,typeEnum=_ref17.typeEnum,name=_ref17.name,lookupName=lookupModuleName||name||null,routeObj={};custom||(routeObj=(0,routeUtil/* findRouterForModuleInApp */.E)(lookupName,router/* pageTypes */.As.OVERVIEW));var hasMainAppRoute=!(0,router/* isWebTabsEnabled */.tj)()&&(!(0,validation/* isEmpty */.xb)(routeObj)||custom),hasWebTabRoute=(0,router/* isWebTabsEnabled */.tj)()&&!(0,validation/* isEmpty */.xb)(webTabRouteName),hasRoute=hasMainAppRoute||hasWebTabRoute;return lookupName&&"BASE_ENTITY"===typeEnum&&hasRoute}})},components_GlimpseLookupWrappervue_type_script_lang_js=GlimpseLookupWrappervue_type_script_lang_js,GlimpseLookupWrapper_component=(0,componentNormalizer/* default */.Z)(components_GlimpseLookupWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,"74c602b4",null)
/* harmony default export */,GlimpseLookupWrapper=GlimpseLookupWrapper_component.exports},
/***/383943:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CustomModulesCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/custom-module/CustomModulesCreation.vue?vue&type=template&id=7325388c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:[_vm.isCreateEditWidgetConfigured?"form-widget-container":"form-data-creation",_vm.isEmpty(_vm.widgetsArr)?"":"form-creation-widgets",_vm.customClassForContainer]},[_vm.showEmptyState?_c("div",{staticClass:"form-empty-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"mB10 mT10 no-template-text f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("forms.live_form.no_forms"))+" ")]),_c("div",{staticClass:"contact-admin-text f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("forms.live_form.contact_admin"))+" ")])],1):_c("div",{staticClass:"height-100",class:[_vm.$validation.isEmpty(_vm.widgetsArr)?"":"form-left-container"]},[_vm.isCreateEditWidgetConfigured?_vm._e():_c("div",{staticClass:"header mT20 mB10 d-flex"},[_c("div",{staticClass:"title mT10"},[_vm._v(_vm._s(_vm.title))]),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return _c("el-option",{key:index,attrs:{value:form,label:form.displayName}})})),1):_vm._e()],1),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_vm.isCreateEditWidgetConfigured?_c("ConnectedAppViewWidget",{attrs:{widgetId:_vm.widgetId,recordId:_vm.moduleDataId,context:_vm.moduleData}}):_c("f-webform",{ref:"f-webform",attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isEdit:_vm.isEdit,isV3Api:_vm.isV3Api,moduleData:_vm.moduleData,moduleDataId:_vm.moduleDataId,isWidgetsSupported:_vm.isWidgetsSupported,subFormRecords:_vm.subFormRecords,modifyFieldPropsHook:_vm.modifyFieldPropsHook},on:{"update:form":function($event){_vm.formObj=$event},onBlur:_vm.onBlurHook,onWidgetChange:_vm.onWidgetChange,save:_vm.saveRecord,cancel:_vm.redirectToList}})],1),_c("portal-target",{staticClass:"widgets-container",attrs:{name:"side-bar-widgets"}})],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(990260)),FormCreation=__webpack_require__(373729),ConnectedAppViewWidget=__webpack_require__(767004),FetchViewsMixin=__webpack_require__(646716),router=__webpack_require__(329435),CustomModuleData=__webpack_require__(689565),CustomModulesCreationvue_type_script_lang_js={extends:FormCreation/* default */.Z,props:["dataObj","selectedFormDetails"],components:{ConnectedAppViewWidget:ConnectedAppViewWidget["default"]},mixins:[FetchViewsMixin/* default */.Z],data:function(){return{widgetId:null,isEmpty:validation/* isEmpty */.xb}},computed:{showEmptyState:function(){var _ref=this||{},forms=_ref.forms;return!this.isLoading&&(0,validation/* isEmpty */.xb)(forms)&&!this.isCreateEditWidgetConfigured},moduleName:function(){var moduleName=this.$route.params.moduleName;// TODO: make this a prop and use directly
return moduleName||(moduleName=this.$attrs.moduleName),(0,validation/* isEmpty */.xb)(moduleName)?null:moduleName},moduleDisplayName:function(){return this.formObj&&this.formObj.module?this.formObj.module.displayName:""},isWidgetsSupported:function(){return!0},isCreateEditWidgetConfigured:function(){var widgetId=this.widgetId;return!(0,validation/* isEmpty */.xb)(widgetId)},isV3Api:function(){return!0},modelDataClass:function(){return CustomModuleData/* CustomModuleData */.u},customProps:function(){return{}},loadDataManually:function(){return!1}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleDataId,moduleName,loadDataManually,widgetId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(moduleDataId=_this.moduleDataId,moduleName=_this.moduleName,loadDataManually=_this.loadDataManually,_this.isLoading=!0,(0,validation/* isEmpty */.xb)(moduleDataId)&&!loadDataManually){_context.next=7;break}return _context.next=5,_this.loadModuleData({moduleName:moduleName,moduleDataId:moduleDataId});case 5:_context.next=8;break;case 7:_this.moduleData=new _this.modelDataClass((0,objectSpread2/* default */.Z)({moduleName:moduleName},_this.dataObj||{}));case 8:if((0,validation/* isEmpty */.xb)(_this.selectedFormDetails)){_context.next=13;break}return _context.next=11,_this.loadFormData(null,_this.selectedFormDetails||null);case 11:return _this.selectedForm=_context.sent,_context.abrupt("return");case 13:return _context.next=15,_this.getCreateEditRecordWidgetId();case 15:if(widgetId=_context.sent,(0,validation/* isEmpty */.xb)(widgetId)){_context.next=21;break}_this.widgetId=widgetId,_this.isLoading=!1,_context.next=24;break;case 21:return _context.next=23,_this.loadFormsList(moduleName);case 23:_this.setInitialForm();case 24:_this.isLoading=!1;case 25:case"end":return _context.stop()}}),_callee)})))()},getCreateEditRecordWidgetId:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var isEdit,operatorValue,filters,_yield$_this2$modelDa,connectedAppWidgets,_ref2,_ref3,selectedWidget,_ref4,widgetId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return isEdit=_this2.isEdit,operatorValue=isEdit?7:6,filters={entityType:{operatorId:9,value:["".concat(operatorValue)]}},_this2.isLoading=!0,_context2.prev=4,_context2.next=7,_this2.modelDataClass.loadWidgets(filters);case 7:return _yield$_this2$modelDa=_context2.sent,connectedAppWidgets=_yield$_this2$modelDa.connectedAppWidgets,_ref2=connectedAppWidgets||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,1),selectedWidget=_ref3[0],_ref4=selectedWidget||{},widgetId=_ref4.id,_context2.abrupt("return",widgetId);case 14:_context2.prev=14,_context2.t0=_context2["catch"](4),_this2.showErrorToastMessage(_context2.t0,_this2.$t("custommodules.form.widget_error"));case 17:case"end":return _context2.stop()}}),_callee2,null,[[4,14]])})))()},loadFormsList:function(moduleName){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,_this3.modelDataClass.loadFormsList(moduleName);case 3:_this3.forms=_context3.sent,_context3.next=9;break;case 6:_context3.prev=6,_context3.t0=_context3["catch"](0),_this3.showErrorToastMessage(_context3.t0,_this3.$t("custommodules.form.form_template_error"));case 9:case"end":return _context3.stop()}}),_callee3,null,[[0,6]])})))()},loadModuleData:function(_ref5){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleDataId,moduleName,_ref6,customProps;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return moduleDataId=_ref5.moduleDataId,moduleName=_ref5.moduleName,_context4.prev=1,_ref6=_this4||{},customProps=_ref6.customProps,_context4.next=5,_this4.modelDataClass.fetch((0,objectSpread2/* default */.Z)({moduleName:moduleName,id:moduleDataId},customProps));case 5:_this4.moduleData=_context4.sent,_context4.next=11;break;case 8:_context4.prev=8,_context4.t0=_context4["catch"](1),_this4.showErrorToastMessage(_context4.t0,_this4.$t("custommodules.summary.record_summary_error"));case 11:case"end":return _context4.stop()}}),_callee4,null,[[1,8]])})))()},loadFormData:function(formId,selectedFormDetails){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var selectedForm,moduleName,moduleDataId,moduleData,loadDataManually,dataObj,formObj,form;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return selectedForm=_this5.selectedForm,moduleName=_this5.moduleName,moduleDataId=_this5.moduleDataId,moduleData=_this5.moduleData,loadDataManually=_this5.loadDataManually,dataObj=_this5.dataObj,formObj={},_context5.prev=2,_context5.next=5,_this5.modelDataClass.loadFormData({formId:formId,moduleName:moduleName,selectedForm:selectedFormDetails||selectedForm});case 5:form=_context5.sent,(0,validation/* isEmpty */.xb)(form)||(formObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},form),{},{secondaryBtnLabel:_this5.$t("common._common.cancel"),primaryBtnLabel:_this5.$t("common._common._save")}),((0,validation/* isEmpty */.xb)(moduleDataId)||(0,validation/* isEmpty */.xb)(null===moduleData||void 0===moduleData?void 0:moduleData.id))&&!loadDataManually&&(0,validation/* isEmpty */.xb)(dataObj)||(formObj=_this5.moduleData.deserialize(formObj)),_this5.formObj=formObj),_context5.next=12;break;case 9:_context5.prev=9,_context5.t0=_context5["catch"](2),_this5.showErrorToastMessage(_context5.t0,_this5.$t("custommodules.form.form_details_error"));case 12:return _context5.abrupt("return",formObj);case 13:case"end":return _context5.stop()}}),_callee5,null,[[2,9]])})))()},saveRecord:function(formModel){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var formObj,afterSaveHook,afterSerializeHook,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return formObj=_this6.formObj,afterSaveHook=_this6.afterSaveHook,afterSerializeHook=_this6.afterSerializeHook,_this6.isSaving=!0,
//same params as serialize method
_context6.next=4,_this6.moduleData.save(formObj,formModel,afterSerializeHook);case 4:response=_context6.sent,_this6.isSaving=!1,
// Hook to handle notification after crud operation
_this6.notificationHandler(response),
// Hook to handle response after crud operation
!(0,validation/* isEmpty */.xb)(afterSaveHook)&&(0,validation/* isFunction */.mf)(afterSaveHook)&&_this6.afterSaveHook(response);case 8:case"end":return _context6.stop()}}),_callee6)})))()},afterSaveHook:function(response){var moduleName=this.moduleName,data=response[moduleName],id=data.id;this.redirectToSummary(id)},redirectToSummary:function(id){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var moduleName,viewname,_ref7,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _this7.isSaving=!0,moduleName=_this7.moduleName,_context7.next=4,_this7.fetchView(moduleName);case 4:viewname=_context7.sent,_this7.isSaving=!1,(0,router/* isWebTabsEnabled */.tj)()?(_ref7=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name,name&&_this7.$router.push({name:name,params:{viewname:viewname,id:id}})):_this7.$router.push({name:"custommodules-summary",params:{id:id,viewname:viewname}}).catch((function(){}));case 7:case"end":return _context7.stop()}}),_callee7)})))()},redirectToList:function(){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref8=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref8.name;name&&this.$router.push({name:name})}else this.$router.push({name:"custommodules-list",params:{moduleName:moduleName}}).catch((function(){}))},showErrorToastMessage:function(error,customMsg){var message=(null===error||void 0===error?void 0:error.message)||customMsg;this.$message.error(message)}}},custom_module_CustomModulesCreationvue_type_script_lang_js=CustomModulesCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(custom_module_CustomModulesCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CustomModulesCreation=component.exports},
/***/66368:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RichTextPreviewDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v1/RichTextPreviewDialog.vue?vue&type=template&id=680e3acf&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container rich-text-preview-dialog",attrs:{visible:_vm.showRichTextPreview,"append-to-body":!0,title:_vm.richTextPreviewTitle,width:"45%","before-close":_vm.closeDialog}},[_c("div",{staticClass:"wo-rich-text-area"},[_c("div",{staticClass:"rich-text-preview-details",domProps:{innerHTML:_vm._s(_vm.richTextContent)}})])])},staticRenderFns=[],RichTextPreviewDialogvue_type_script_lang_js={name:"RichTextPreview",props:["richTextField","richTextContent","showRichTextPreview"],computed:{richTextPreviewTitle:function(){var _this$richTextField=this.richTextField,richTextField=void 0===_this$richTextField?{}:_this$richTextField;return this.$getProperty(richTextField,"displayName","---")}},methods:{closeDialog:function(){this.$emit("closeRichTextPreview")}}},v1_RichTextPreviewDialogvue_type_script_lang_js=RichTextPreviewDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_RichTextPreviewDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,"680e3acf",null)
/* harmony default export */,RichTextPreviewDialog=component.exports},
/***/209870:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WoV3EditForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v3/WoV3EditForm.vue?vue&type=template&id=0a10ab59
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",[_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{fullscreen:!0,"append-to-body":!0,visible:_vm.visibility,title:_vm.$t("common._common.workorder_edit"),"custom-class":"fc-wo-edit-form-dialog fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog f-webform-right-dialog new-asset-container","before-close":_vm.cancelForm}},[_c("div",{staticClass:"header pT10 pB10 pL30 pR30 d-flex"},[_c("div",{staticClass:"title mT10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.workorder_edit"))+" ")]),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return _c("el-option",{key:index,attrs:{value:form,label:form.displayName}})})),1):_vm._e()],1),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,isSaving:_vm.isSaving,isEdit:!0,moduleDataId:_vm.moduleDataId,moduleData:_vm.moduleData,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isV3Api:!0,modifySectionPropsHook:_vm.modifySectionPropsHook,modifyFieldPropsHook:_vm.modifyFieldPropsHook},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.saveRecord,cancel:_vm.cancelForm}})],1)],1):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),CustomModulesCreation=(__webpack_require__(339772),__webpack_require__(434284),__webpack_require__(162506),__webpack_require__(383943)),FetchViewsMixin=__webpack_require__(646716),TasksMixin=__webpack_require__(153046),validation=__webpack_require__(990260),WoV3EditFormvue_type_script_lang_js={extends:CustomModulesCreation["default"],mixins:[FetchViewsMixin/* default */.Z,TasksMixin/* default */.Z],props:{visibility:Boolean,wo:Object},name:"WoV3EditForm",methods:{cancelForm:function(){this.$emit("visibilityUpdate",!1)},afterSaveHook:function(){this.$emit("visibilityUpdate",!1),this.$root.$emit("reloadWO")},modifySectionPropsHook:function(section){
// editing tasks is not allowed; hiding the section in form
var fields=section.fields;if(!(0,validation/* isEmpty */.xb)(fields)&&(0,validation/* isArray */.kJ)(fields)&&1===fields.length){var displayTypeEnum=fields[0].displayTypeEnum;if("TASKS"===displayTypeEnum)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{hideSection:!0})}else{
// guarenteed to have 1 assignment field
var assignmentFldIndex=fields.findIndex((function(f){return"assignment"===f.name}));if(-1===assignmentFldIndex)return;var assignmentField=fields[assignmentFldIndex]||{},userObj=this.$getProperty(assignmentField,"value.assignedTo.id",null),groupObj=this.$getProperty(assignmentField,"value.assignmentGroup.id",null);this.$set(assignmentField.value,"assignedTo",(0,validation/* isEmpty */.xb)(userObj)?{id:""}:userObj),this.$set(assignmentField.value,"assignmentGroup",(0,validation/* isEmpty */.xb)(groupObj)?{id:""}:groupObj),fields.splice(assignmentFldIndex,1,assignmentField),this.$set(section,"fields",fields)}},modifyFieldPropsHook:function(field){var _ref=field||{},name=_ref.name;if("jobPlan"===name)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0})}}},v3_WoV3EditFormvue_type_script_lang_js=WoV3EditFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v3_WoV3EditFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WoV3EditForm=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/89106.js.map