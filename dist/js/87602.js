"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[87602],{
/***/987602:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SmartCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/cards/v2/SmartCard.vue?vue&type=template&id=b5405b8c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dragabale-card readingcard height100"},[_vm.loading?_c("shimmer-loading",{staticClass:"map-shimmer"}):_c("div",{staticClass:"height100 smart-table-wrapper"},[_vm.mode?_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"reading-color-picker",trigger:"click"}},[_c("div",[_c("div",{staticClass:"color-picker-section"},[_c("div",{staticClass:"c-picker-label"},[_vm._v(" "+_vm._s(_vm.$t("panel.layout.back_colour"))+" : ")]),_vm._l(_vm.predefineColors,(function(color,index){return _c("div",{key:index,staticClass:"color-picker-conatiner"},[_c("div",{staticClass:"color-box",class:{active:_vm.data.style.bgColor===color},style:"background:"+color+";",on:{click:function($event){_vm.data.style.bgColor=color,_vm.setParams()}}})])}))],2),_c("div",{staticClass:"color-picker-section mT20"},[_c("div",{staticClass:"c-picker-label"},[_vm._v("Text color :")]),_vm._l(_vm.predefineColors,(function(color,index){return _c("div",{key:index,staticClass:"color-picker-conatiner"},[_c("div",{staticClass:"color-box",class:{active:_vm.data.style.color===color},style:"background:"+color+";",on:{click:function($event){_vm.data.style.color=color,_vm.setParams()}}})])}))],2)]),_c("div",{staticClass:"color-choose-icon",attrs:{slot:"reference"},slot:"reference"},[_vm.mode?_c("i",{staticClass:"fa fa-font reading-card-color-picker"}):_vm._e()])]):_vm._e(),_vm.result?_c("div",{staticClass:"sm-card-body kpi-container",style:_vm.getStyle},[_c("div",{staticClass:"sm-card-label kpi-sections"},[_vm._v(_vm._s(_vm.result.label))]),_c("div",{staticClass:"sm-card-value kpi-data kpi-count pointer"},[_vm._v(" "+_vm._s(_vm.result.value)),_vm.result.unit?_c("span",{staticClass:"f18"},[_vm._v(_vm._s(_vm.result.unit))]):_vm._e()]),_vm.result.percentage?_c("div",{staticClass:"sm-card-sublabel kpi-label kpi-period"},[_vm._v(" "+_vm._s(_vm.result.percentage)+"% ")]):_vm._e(),_vm.result.sublabel?_c("div",{staticClass:"sm-card-sublabel kpi-label kpi-period"},[_vm._v(" "+_vm._s(_vm.result.sublabel)+" ")]):_vm._e()]):_vm._e()],1)],1)},staticRenderFns=[],ShimmerLoading=(__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(516400)),colors=__webpack_require__(519898),SmartCardvue_type_script_lang_js={props:["widget","config"],mixins:[colors/* default */.Z],data:function(){return{predefineColors:colors/* default */.Z.readingcardColors,loading:!0,result:null,data:null}},mounted:function(){this.getParams(),this.loadCardData()},components:{shimmerLoading:ShimmerLoading/* default */.Z},computed:{mode:function(){return!(!this.$route.query||!this.$route.query.create||"edit"!==this.$route.query.create)||!(!this.$route.query||!this.$route.query.create||"new"!==this.$route.query.create)},getStyle:function(){if(this.data.style){var style=this.data.style;return"background:".concat(style.bgColor,";color:").concat(style.color)}return"background:#fff;color:#000"}},methods:{refresh:function(){this.getParams(),this.loadCardData()},perpareElTableResult:function(result){return result.data?result.data:[]},getData:function(result){this.result=result.result},getParams:function(){this.widget.dataOptions.data?(this.widget.dataOptions.metaJson=JSON.stringify(this.widget.dataOptions.data),this.data=this.widget.dataOptions.data,this.setParams()):this.widget.id>-1&&this.widget.dataOptions.metaJson&&(this.data=JSON.parse(this.widget.dataOptions.metaJson),this.setParams())},setParams:function(){this.data&&!this.data.style?this.data.style={color:this.color,bgcolor:this.bgcolor}:this.style=this.data.style,this.widget.dataOptions.metaJson=JSON.stringify(this.data)},loadCardData:function(){var self=this,params=null;params={workflow:{isV2Script:!0,workflowV2String:this.data.workflowV2String},staticKey:"kpiCard"},this.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){self.getData(response.data.cardResult),self.loading=!1})).catch((function(error){self.loading=!1}))}}},v2_SmartCardvue_type_script_lang_js=SmartCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v2_SmartCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SmartCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/87602.js.map