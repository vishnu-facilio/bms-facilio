"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[36682],{
/***/636682:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return LogsTableSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/agent/logs/LogsTableSummary.vue?vue&type=template&id=6d252a93&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"pB12 pT12 pL25 pR25 border-bottom1px flex-middle"},[_c("div",{staticClass:"log-breadcrumb-inner pointer",on:{click:_vm.agentHomeRoute}},[_vm._v(" "+_vm._s(_vm.$t("agent.logs.home"))+" ")]),_vm._m(0),_c("div",{staticClass:"log-breadcrumb-inner pointer",on:{click:_vm.agentDataLogsRoute}},[_vm._v(" "+_vm._s(_vm.$t("agent.logs.data_logs"))+" ")]),_vm._m(1),_c("div",{staticClass:"log-breadcrumbBold-active"},[_vm._v("#"+_vm._s(_vm.parentId))])]),_c("div",{staticClass:"pL25 pT15 pR25 pB15 border-bottom1px bold f16"},[_vm._v(" "+_vm._s(_vm.$t("agent.logs.summary"))+" ")]),_c("div",{staticClass:"log-detail-container"},[_c("div",{staticClass:"bold f16"},[_vm._v(_vm._s(_vm.$t("agent.logs.details")))]),_c("div",{staticClass:"flex-center-row-space pT27"},[_c("div",{staticClass:"width25"},[_c("div",{staticClass:"f14 bold"},[_vm._v(_vm._s(_vm.$t("agent.logs.time_stamp")))]),_c("div",{staticClass:"details-sub-text"},[_vm._v(_vm._s(_vm.timeStamp))])]),_c("div",{staticClass:"width25"},[_c("div",{staticClass:"f14 bold"},[_vm._v(_vm._s(_vm.$t("agent.logs.payload")))]),_c("div",{staticClass:"log-details-button pointer",on:{click:function($event){return _vm.openPayloadDialog(_vm.dataLog)}}},[_vm._v(" "+_vm._s(_vm.$t("agent.logs.view_payload"))+" ")])]),_c("div",{staticClass:"width25"},[_c("div",{staticClass:"f14 bold"},[_vm._v(_vm._s(_vm.$t("agent.logs.agent_name")))]),_c("el-tooltip",{attrs:{effect:"dark",content:this.agentName,placement:"bottom-start","open-delay":300,disabled:_vm.$validation.isEmpty(this.agentName)}},[_c("div",{staticClass:"details-sub-text"},[_vm._v(_vm._s(_vm.agentName))])])],1),_c("div",{staticClass:"width25"},[_c("div",{staticClass:"f14 bold"},[_vm._v(_vm._s(_vm.$t("agent.logs.cont_name")))]),_c("el-tooltip",{attrs:{effect:"dark",content:this.controllerName,placement:"bottom-start","open-delay":300,disabled:_vm.$validation.isEmpty(this.controllerName)}},[_c("div",{staticClass:"details-sub-text"},[_vm._v(_vm._s(_vm.controllerName))])])],1)])]),_vm.isLoading?_c("div",[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.payloadData)&&!_vm.isLoading?_c("div",{staticClass:"data_log-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"q-item-label nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("agent.empty.no_dataLog"))+" ")])],1):_c("div",{staticClass:"logs-table-shadow group-table-page"},[_c("div",{staticClass:"log-table-header fc-setup-group-header flex-center-row-space"},[_vm._v(" "+_vm._s(_vm.$t("agent.logs.readings"))+" "),_c("pagination",{ref:"f-page",attrs:{total:_vm.totalRecords,perPage:_vm.perPage}})],1),_c("div",{staticClass:"fc-group-table"},[_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.payloadData,"cell-style":{padding:"12px 20px"},fit:!0,height:"auto"}},[_c("el-table-column",{staticClass:"flex-middle",attrs:{label:_vm.$t("agent.logs.point")},scopedSlots:_vm._u([{key:"default",fn:function(dataLogRecord){return[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$getProperty(dataLogRecord.row,"point"),placement:"top-start","open-delay":300,disabled:_vm.$validation.isEmpty(_vm.$getProperty(dataLogRecord.row,"point"))}},[_c("div",{staticClass:"truncate-text"},[_vm._v(" "+_vm._s(_vm.$getProperty(dataLogRecord.row,"point","---"))+" ")])])]}}])}),_c("el-table-column",{staticClass:"flex-middle",attrs:{label:_vm.$t("agent.logs.asset")},scopedSlots:_vm._u([{key:"default",fn:function(dataLogRecord){return[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.getResourceName(dataLogRecord.row),placement:"top-start","open-delay":600,disabled:_vm.$validation.isEmpty(_vm.getResourceName(dataLogRecord.row))}},[_c("div",{staticClass:"truncate-text text-left"},[_vm._v(" "+_vm._s(_vm.getResourceName(dataLogRecord.row))+" ")])])]}}])}),_c("el-table-column",{staticClass:"flex-middle",attrs:{label:_vm.$t("agent.logs.reading")},scopedSlots:_vm._u([{key:"default",fn:function(dataLogRecord){return[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.getReading(dataLogRecord),placement:"top-start","open-delay":600,disabled:"---"==_vm.getReading(dataLogRecord)}},[_c("div",{ref:"reading-column-"+dataLogRecord.row.id,staticClass:"truncate-text"},[_vm._v(" "+_vm._s(_vm.getReading(dataLogRecord))+" ")])])]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("agent.logs.value")},scopedSlots:_vm._u([{key:"default",fn:function(dataLogRecord){return[_c("div",[_vm._v(" "+_vm._s(_vm.$getProperty(dataLogRecord.row,"value","---"))+" ")])]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("agent.logs.status")},scopedSlots:_vm._u([{key:"default",fn:function(dataLogRecord){return[_c("div",{class:[_vm.getStatusClass(dataLogRecord)]},[_vm._v(" "+_vm._s(_vm.getStatus(dataLogRecord))+" ")])]}}])}),_vm.showExceptionColumn?_c("el-table-column",{attrs:{prop:"exception"},scopedSlots:_vm._u([{key:"default",fn:function(dataLogRecord){return[_vm.isException(dataLogRecord)?_c("div",[_c("el-button",{staticClass:"log-button-hover",attrs:{type:"text"},on:{click:function($event){return _vm.openExceptionDialog(dataLogRecord)}}},[_vm._v(_vm._s(_vm.$t("agent.logs.view_ex")))])],1):_vm._e()]}}],null,!1,1512978380)}):_vm._e()],1)],1)]),_vm.payloadVisible?_c("el-dialog",{staticClass:"log-dialog",attrs:{title:_vm.$t("agent.logs.payload"),visible:_vm.payloadVisible,width:"30%","append-to-body":!0,"before-close":function(){return _vm.payloadVisible=!1}},on:{"update:visible":function($event){_vm.payloadVisible=$event}}},[_c("pre",{attrs:{id:"json"}},[_vm._v(_vm._s(_vm.payLoad))])]):_vm._e(),_vm.exceptionVisible?_c("el-dialog",{staticClass:"log-exception-dialog",attrs:{title:_vm.$t("agent.logs.exception"),visible:_vm.exceptionVisible,width:"30%","append-to-body":!0,"before-close":_vm.closeExceptionDialog},on:{"update:visible":function($event){_vm.exceptionVisible=$event}}},[_vm._v(_vm._s(_vm.getException(_vm.activeDatalog)))]):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"log-breadcrumb-inner pL10 pR10"},[_c("i",{staticClass:"el-icon-arrow-right f14 fwBold"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"log-breadcrumb-inner pL10 pR10"},[_c("i",{staticClass:"el-icon-arrow-right f14 fwBold"})])}],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(169358),__webpack_require__(634338),__webpack_require__(32284)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),validation=__webpack_require__(990260),FPagination=__webpack_require__(929593),MESSAGE_STATUS={1:{label:"Failure",class:"log-failure-status"},2:{label:"Success",class:"log-success-status"}},LogsTableSummaryvue_type_script_lang_js={name:"LogsTableSummary",props:["dataLog"],components:{Pagination:FPagination/* default */.Z},mounted:function(){this.loadPayloadData(),this.deserialize()},computed:{parentId:function(){var route=this.$route,params=route.params,parentId=params.parentId;return(0,validation/* isEmpty */.xb)(parentId)?-1:parentId},page:function(){return this.$route.query.page||1}},watch:{page:function(newVal,oldVal){newVal!=oldVal&&this.loadPayloadData()}},data:function(){return{isLoading:!1,payloadData:[],payLoad:"",agentName:"",controllerName:"",timeStamp:"",payloadVisible:!1,totalRecords:0,perPage:50,moduleName:"agentDataProcessingLogger",activeDatalog:null,exceptionVisible:!1,readings:{},showExceptionColumn:!0,agentId:null,id:null,resourceMap:{}}},methods:{loadPayloadData:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref,page,perPage,moduleName,parentId,filters,parentIdFilter,params,url,_yield$API$get,error,data,meta,_ref2,payloadData,readings,resourceMap;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.isLoading=!0,_ref=_this||{},page=_ref.page,perPage=_ref.perPage,moduleName=_ref.moduleName,parentId=_ref.parentId,filters={},parentIdFilter={parentId:{operatorId:9,value:["".concat(parentId)]}},filters=JSON.stringify((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),parentIdFilter)),params={page:page,perPage:perPage,withCount:!0,orderType:"asc",orderBy:"POINT",moduleName:moduleName,filters:filters},url="/v3/modules/data/list",_context.next=9,api/* API */.bl.get(url,params);case 9:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,meta=_yield$API$get.meta,(0,validation/* isEmpty */.xb)(error)?(_this.totalRecords=_this.$getProperty(meta,"pagination.totalCount",null),_ref2=data||{},payloadData=_ref2.agentDataProcessingLogger,readings=_ref2.readings,resourceMap=_ref2.resourceMap,_this.readings=readings,_this.payloadData=payloadData,_this.resourceMap=resourceMap,_this.isLoading=!1):_this.$message.error(error.message||"Error Occured");case 14:case"end":return _context.stop()}}),_callee)})))()},deserialize:function(){var _ref3=this||{},dataLog=_ref3.dataLog,_ref4=dataLog||{},startTime=_ref4.startTime,agent=_ref4.agent,controller=_ref4.controller,messageStatus=_ref4.messageStatus,id=_ref4.id,timeStamp=moment_timezone_default()(startTime).tz(this.$timezone).format("DD MMM YYYY hh:mmA");this.timeStamp=timeStamp,this.id=id;var _ref5=agent||{},agentName=_ref5.displayName;this.agentName=agentName;var _ref6=agent||{},agentId=_ref6.id;this.agentId=agentId;var _ref7=controller||{},controllerName=_ref7.name;this.controllerName=controllerName,this.showExceptionColumn=1==messageStatus||2==messageStatus},getStatus:function(dataLogRecord){var _MESSAGE_STATUS$statu,_ref8=dataLogRecord||{},row=_ref8.row,_ref9=row||{},status=_ref9.status;return(0,validation/* isEmpty */.xb)(MESSAGE_STATUS[status])?"":null===(_MESSAGE_STATUS$statu=MESSAGE_STATUS[status])||void 0===_MESSAGE_STATUS$statu?void 0:_MESSAGE_STATUS$statu.label},getStatusClass:function(dataLogRecord){var _MESSAGE_STATUS$statu2,_ref10=dataLogRecord||{},row=_ref10.row,_ref11=row||{},status=_ref11.status;return(0,validation/* isEmpty */.xb)(MESSAGE_STATUS[status])?"":null===(_MESSAGE_STATUS$statu2=MESSAGE_STATUS[status])||void 0===_MESSAGE_STATUS$statu2?void 0:_MESSAGE_STATUS$statu2.class},agentHomeRoute:function(){this.$router.replace({name:"overview"})},agentDataLogsRoute:function(){this.$router.replace({name:"logs",query:{agentId:this.agentId}})},isException:function(dataLog){var _ref12=dataLog||{},dataLogRecord=_ref12.row,_ref13=dataLogRecord||{},status=_ref13.status;return 1==status},openExceptionDialog:function(dataLog){var _ref14=dataLog||{},row=_ref14.row;this.activeDatalog=row,this.exceptionVisible=!0},closeExceptionDialog:function(dataLog){this.activeDatalog=null,this.exceptionVisible=!1},getException:function(dataLog){var _ref15=dataLog||{},errorStackTrace=_ref15.errorStackTrace;return errorStackTrace},getReading:function(dataLogRecord){var _ref16=dataLogRecord||{},row=_ref16.row,_ref17=this||{},readings=_ref17.readings,readingId=row.readingId,reading=readings[readingId]||{};return reading.name||"---"},openPayloadDialog:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref18,payLoad,_ref19,id,params,url,_yield$API$get2,error,data,_ref20,agentDataLogger,_ref21,payload,_payLoad;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_ref18=_this2||{},payLoad=_ref18.payLoad,!(0,validation/* isEmpty */.xb)(payLoad)){_context2.next=14;break}return _ref19=_this2||{},id=_ref19.id,params={includeParentFilter:!0,moduleName:"agentDataLogger",id:id},url="/v3/modules/data/summary",_context2.next=7,api/* API */.bl.get(url,params);case 7:_yield$API$get2=_context2.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,_yield$API$get2.meta,(0,validation/* isEmpty */.xb)(error)?(_ref20=data||{},agentDataLogger=_ref20.agentDataLogger,_ref21=agentDataLogger||{},payload=_ref21.payload,_payLoad=JSON.stringify(JSON.parse(payload),null,2),_this2.payLoad=_payLoad,_this2.payloadVisible=!0):_this2.$message.error(error.message||"Error Occured"),_context2.next=15;break;case 14:_this2.payloadVisible=!0;case 15:case"end":return _context2.stop()}}),_callee2)})))()},getResourceName:function(dataLogRecord){return(0,validation/* isEmpty */.xb)(this.resourceMap)?this.$getProperty(dataLogRecord,"asset.name"):(dataLogRecord.readingScope<0&&(dataLogRecord.readingScope=1),this.$getProperty(this.resourceMap,"".concat(dataLogRecord.readingScope,".").concat(dataLogRecord.resourceId)))}}},logs_LogsTableSummaryvue_type_script_lang_js=LogsTableSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(logs_LogsTableSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"6d252a93",null)
/* harmony default export */,LogsTableSummary=component.exports},
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/36682.js.map