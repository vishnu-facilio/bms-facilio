"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[54723],{
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/54723:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SupplierSummaryTransactionsWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/etisalat/suppliers/SupplierSummaryTransactionsWidget.vue?vue&type=template&id=77de238a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",[_c("div",{},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):_vm._e(),_vm.$validation.isEmpty(_vm.result)&&!_vm.loading?_c("div",{ref:"preview-container",staticClass:"fc-empty-center height400"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/history",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Transactions available ")])],1):_vm._e(),_vm.loading||_vm.$validation.isEmpty(_vm.result)?_vm._e():_c("div",[_c("table",{staticClass:"width100 fc-suppier-payment-table"},[_c("thead",[_c("tr",[_vm._m(0),_vm._m(1),_vm._m(2),_vm.isLandloard?_vm._e():_c("th",{staticClass:"pL15 pR15",staticStyle:{width:"10%"}},[_c("div",{staticClass:"fc-black-11 text-uppercase"},[_vm._v("ARREAR")])]),_vm._m(3)])]),_vm._l(_vm.result,(function(value,index){return _c("tbody",{key:index},[_c("tr",{staticClass:"border-bottom19"},[_c("td",{staticStyle:{width:"11%"}},[_c("div",{staticClass:"bold"},[_vm._v(" "+_vm._s(_vm.getDate(value.time,"MMM YYYY",!0))+" ")])]),_c("td",{staticStyle:{width:"30%"}}),_c("td",{staticStyle:{width:"30%"}}),_c("td",{staticStyle:{width:"10%"}}),_c("td",{staticStyle:{width:"20%"}})]),_vm._l(value.value["invoices"],(function(invoice,index){return _c("tr",{key:index,staticClass:"border-bottom19"},[_c("td",{staticClass:"border-right10",staticStyle:{width:"11%"}},[_c("div",{staticClass:"fc-blue-txt3-13"},[_vm._v(" "+_vm._s(invoice["singleline_11"]||"")+" ")])]),_c("td",{staticClass:"border-right10",staticStyle:{width:"30%"}},[_c("div",{staticClass:"fc-black-13 text-left bold"},[_vm._v(" "+_vm._s(invoice.decimal_2?_vm.formatCurrency(invoice.decimal_2)+" AED":"0 AED")+" ")]),_c("div",{staticClass:"fc-greey9-12 f13 text-left pT5"},[_c("span",{staticClass:"fc-greey9-12 f13"},[_vm._v(_vm._s(invoice.number?"From "+invoice.number+" Bills":""))])])]),_c("td",{staticClass:"border-right10",staticStyle:{width:"30%"}},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" Payment Memo Date : "+_vm._s(_vm.getDate(invoice.date_1,"DD MMM YYYY"))+" ")]),_c("div",{staticClass:"fc-black-13 text-left pT10"},[_vm._v(" Region code : "+_vm._s(invoice.singleline_4||"")+" ")]),_c("div",{staticClass:"fc-black-13 text-left pT10"},[_vm._v(" Cost Center :"+_vm._s(invoice.singleline_6||"")+" ")])]),_vm.isLandloard?_vm._e():_c("td",{staticClass:"border-right10 text-center",staticStyle:{width:"10%"}},[_vm._v(" "+_vm._s(invoice.boolean?"Yes":"No")+" ")]),_c("td",{staticStyle:{width:"20%"}},[_c("div",{staticClass:"fc-blue-txt3-13 pointer",on:{click:function($event){return _vm.getSummarySheet(invoice,value.value.time)}}},[_vm._v(" Summary Sheet ")]),_c("div",{staticClass:"fc-blue-txt3-13 pT10 pointer",on:{click:function($event){return _vm.goToInvoice(invoice)}}},[_vm._v(" View Payment Memo ")])])])}))],2)}))],2)])],1)]),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("th",{staticClass:"pL15 pR15",staticStyle:{width:"11%"}},[_c("div",{staticClass:"fc-black-11 text-uppercase"},[_vm._v("Payment Memo NO")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("th",{staticClass:"pL15 pR15",staticStyle:{width:"30%"}},[_c("div",{staticClass:"fc-black-11 text-uppercase"},[_vm._v(" Payment Memo Value ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("th",{staticClass:"pL15 pR15",staticStyle:{width:"30%"}},[_c("div",{staticClass:"fc-black-11 text-uppercase"},[_vm._v(" Payment Memo DETAILS ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("th",{staticClass:"pL15 pR15",staticStyle:{width:"20%"}},[_c("div",{staticClass:"fc-black-11 text-uppercase"},[_vm._v("DOCUMENTS")])])}],esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(879288),__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(865137),__webpack_require__(420629)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),formatter=__webpack_require__(676240),Spinner=__webpack_require__(604947),router=__webpack_require__(329435),SupplierSummaryTransactionsWidgetvue_type_script_lang_js={props:["details","moduleName","calculateDimensions","resizeWidget"],data:function(){return{pdfopen:!1,currentPage:0,pageCount:0,exportDownloadUrl:null,loading:!1,result:[],params:{nameSpace:"SupplierSummary",functionName:"getTransaction",paramList:[]}}},mounted:function(){this.getData()},components:{Spinner:Spinner/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo}})),{},{fields:function(){return this.moduleMeta.fields||[]},fieldDisplayNames:function(){var _this=this;if(this.moduleMeta&&this.moduleMeta.fields){var fieldMap={};return this.moduleMeta.fields.forEach((function(field){_this.$set(fieldMap,field.name,field.displayName)})),fieldMap}return[]},isLandloard:function(){return!(!this.details||!this.details.data["picklist"]||2!==this.details.data.picklist)}}),methods:{autoResize:function(){var _this2=this;this.$nextTick((function(){var height=_this2.$refs["preview-container"].scrollHeight,width=_this2.$refs["preview-container"].scrollWidth,_this2$calculateDimen=_this2.calculateDimensions({height:height,width:width}),h=_this2$calculateDimen.h;_this2.resizeWidget({h:h})}))},formatCurrency:function(value){return(0,formatter/* formatCurrency */.xG)(value,2)},goToInvoice:function(invoice){var routeData;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("custom_invoices",router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&(routeData=this.$router.resolve({name:name,params:{viewname:"all",id:invoice.id}}))}else routeData=this.$router.resolve({path:"/app/supp/custom_invoices/all/".concat(invoice.id,"/summary")});routeData&&window.open(routeData.href,"_blank")},getSummarySheet:function(invoice,timeStamp){var _this3=this,paymentMemoId=invoice.id,params=(this.details,null);this.allArrearsTableData=[],this.params.paramList.push(paymentMemoId);var supliervalue=[];supliervalue.push(paymentMemoId+"");var endTime=moment_timezone_default()(Number(timeStamp)).tz(this.$timezone).endOf("month").valueOf(),startTime=moment_timezone_default()(Number(timeStamp)).tz(this.$timezone).startOf("month").valueOf(),time=[];time.push(startTime+""),time.push(endTime+"");var filter={date_5:{operatorId:20,value:time},invoice:{operatorId:36,value:supliervalue,selectedLabel:invoice.name}},url="/exportModule?type=2&moduleName=custom_utilitybills&specialFields=false&viewName=all&includeParentFilter=true";this.$message({showClose:!0,message:"Downloading...",type:"success"}),filter&&(params="&filters="+JSON.stringify(filter)),this.$http.post(url,params).then((function(response){response.data&&"object"===(0,esm_typeof/* default */.Z)(response.data)?_this3.exportDownloadUrl=response.data.fileUrl:_this3.$error.message("Export failed")}))},getDate:function(time,formatter,uppercase){return uppercase?moment_timezone_default()(Number(time)).tz(this.$timezone).format(formatter).toUpperCase():moment_timezone_default()(Number(time)).tz(this.$timezone).format(formatter)},getData:function(){var _this4=this;this.loading=!0;var supplierrid=this.details.id;this.params.paramList.push(supplierrid),this.params.paramList.push(15778224e5),this.params.paramList.push(1609444799999),this.$http.post("/v2/workflow/runWorkflow",this.params).then((function(resp){_this4.loading=!1,resp.data.result&&resp.data.result.workflow&&resp.data.result.workflow.returnValue&&(_this4.result=_this4.sortResult(resp.data.result.workflow.returnValue)),_this4.autoResize()}))},sortResult:function(data){if(data){var timeStamp=Object.keys(data),sortedData=[];return timeStamp.forEach((function(rt){var d={time:Number(rt),value:data[rt]};sortedData.push(d)})),sortedData.sort((function(a,b){return a.time-b.time}))}return data}}},suppliers_SupplierSummaryTransactionsWidgetvue_type_script_lang_js=SupplierSummaryTransactionsWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(suppliers_SupplierSummaryTransactionsWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SupplierSummaryTransactionsWidget=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/54723.js.map