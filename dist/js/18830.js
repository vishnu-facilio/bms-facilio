(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[18830],{
/***/676433:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return QuickCreateData}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/QuickCreateData.vue?vue&type=template&id=dbd9e180
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{attrs:{visible:_vm.canShowDialog,"append-to-body":!0,title:"Add "+_vm.moduleDisplayName,"before-close":_vm.closeDialog,"custom-class":"fc-dialog-center-container f-webform-right-dialog quick-create-container",top:"5vh"},on:{"update:visible":function($event){_vm.canShowDialog=$event}}},[_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.createQuickRecord,cancel:_vm.closeDialog}})],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FormCreation=(__webpack_require__(976801),__webpack_require__(434284),__webpack_require__(373729)),FWebform=__webpack_require__(434500),validation=__webpack_require__(990260),api=__webpack_require__(32284),constant=__webpack_require__(354754),QuickCreateDatavue_type_script_lang_js={name:"QuickCreateData",extends:FormCreation/* default */.Z,components:{FWebform:FWebform/* default */.Z},props:["canShowDialog","quickCreateField","setAddedRecord"],data:function(){return{isSaving:!1}},computed:{moduleName:function(){var quickCreateField=this.quickCreateField,lookupModuleName=quickCreateField.lookupModuleName,config=quickCreateField.config,_ref=config||{},_ref$isFiltersEnabled=_ref.isFiltersEnabled,isFiltersEnabled=void 0!==_ref$isFiltersEnabled&&_ref$isFiltersEnabled,filterValue=_ref.filterValue,configLookupModuleName=_ref.lookupModuleName;return isFiltersEnabled&&(lookupModuleName=configLookupModuleName||constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue]),lookupModuleName},moduleDisplayName:function(){var quickCreateField=this.quickCreateField,_ref2=quickCreateField||{},displayName=_ref2.displayName;return displayName},moduleDataId:function(){return null},
// Have to remove this hack, once we implement v3 for below listed module
isV3Api:function(){var moduleName=this.moduleName,v2SupportedArr=["building","asset","tenantcontact","clientcontact","vendorcontact","employee"];return!v2SupportedArr.includes(moduleName)}},methods:{afterSaveHook:function(response){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,isV3Api,moduleData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:moduleName=_this.moduleName,isV3Api=_this.isV3Api,moduleData={},moduleData=isV3Api?response[moduleName]||{}:response["moduleData"]||{},(0,validation/* isEmpty */.xb)(moduleData)||(_this.setAddedRecord({record:moduleData}),_this.closeDialog());case 4:case"end":return _context.stop()}}),_callee)})))()},closeDialog:function(){this.$emit("update:canShowDialog",!1),this.$emit("update:quickCreateField",null)},
// Have to remove this once, all the modules are supported by v3
createQuickRecord:function(formModel){var isV3Api=this.isV3Api;isV3Api?this.saveRecord(formModel):this.saveRecordV2(formModel)},systemFieldHandler:function(finalObj,field,value){var name=field.name;return(0,validation/* isEmpty */.xb)(value)||(finalObj.data[name]=value),finalObj},saveRecordV2:function(formModel){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,formObj,formId,url,data,response,_ref3,_ref3$data,responseData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return moduleName=_this2.moduleName,formObj=_this2.formObj,formId=formModel.formId,url="/v2/module/data/add",data={moduleName:moduleName,withLocalId:!1,moduleData:_this2.serializedData(formObj,formModel)},(0,validation/* isEmpty */.xb)(formId)||(data.moduleData.formId=formId),_this2.isSaving=!0,_context2.next=8,api/* API */.bl.post(url,data);case 8:response=_context2.sent,_this2.isSaving=!1,_ref3=response||{},_ref3$data=_ref3.data,responseData=void 0===_ref3$data?{}:_ref3$data,_this2.notificationHandler(response),_this2.afterSaveHook(responseData);case 13:case"end":return _context2.stop()}}),_callee2)})))()}}},forms_QuickCreateDatavue_type_script_lang_js=QuickCreateDatavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_QuickCreateDatavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,QuickCreateData=component.exports},
/***/874249:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RichTextArea}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/RichTextArea.vue?vue&type=template&id=7711575b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isRichText?_c("div",{staticClass:"richtext-area"},[_c("RichText",{style:{minHeight:_vm.minHeight,maxHeight:_vm.maxHeight,overflow:_vm.overflow},attrs:{readOnly:_vm.disabled,placeholder:_vm.placeholder,hideImgTool:_vm.hideImgTool,hideUnorderedList:_vm.hideUnorderedList,hideOrderedList:_vm.hideOrderedList,secondaryToolbar:_vm.secondaryToolbar,istoolbarPositionBottom:_vm.istoolbarPositionBottom,isMoreOption:_vm.isMoreOption,customToolOrder:_vm.customToolOrder,iconColor:_vm.iconColor},scopedSlots:_vm._u([_vm.canShowModeToggle?{key:"editorMode",fn:function(){return[_c("div",{staticClass:"self-center marginL-auto mR15 cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.plain_text_mode"))+" ")])]},proxy:!0}:null],null,!0),model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1):_c("div",{staticClass:"richtext-area plain-text-mode"},[_c("div",{staticClass:"richtext-editor"},[_c("div",{staticClass:"richtext-toolbar"},[_c("div",{staticClass:"toolbar-button marginL-auto cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.switch_to_richtext"))+" ")])]),_c("el-input",{key:"plain-text",staticClass:"richtext-content",attrs:{type:"textarea",resize:"none",placeholder:_vm.placeholder},model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1)])},staticRenderFns=[],ui_forms=(__webpack_require__(879288),__webpack_require__(141323)),filters=__webpack_require__(638203),RichTextAreavue_type_script_lang_js={props:{value:{type:String},field:{type:Object},rows:{type:Number,default:10},maxRows:{type:Number,default:12},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Enter text here"},isEdit:{type:Boolean,default:!1},hideImgTool:{type:Boolean,default:!1},hideOrderedList:{type:Boolean,default:!1},hideUnorderedList:{type:Boolean,default:!1},isRichTextMode:{type:Boolean,default:!0},canShowModeToggle:{type:Boolean,default:!1},istoolbarPositionBottom:{type:Boolean},customToolOrder:{type:Array},isMoreOption:{type:Boolean},secondaryToolbar:{type:Boolean},iconColor:{type:String}},components:{RichText:ui_forms/* RichText */.Ho},computed:{content:{get:function(){return this.value},set:function(value){this.$emit("input",value)}},isRichText:{get:function(){return this.isRichTextMode},set:function(value){this.$emit("update:isRichTextMode",value)}},
// Assuming a <p></p> tag inside editor
// has fonts-size 1rem and margin-bottom 1rem
minHeight:function(){return"".concat(2*this.rows,"rem")},maxHeight:function(){return"".concat(2*this.maxRows,"rem")},overflow:function(){return"hidden"}},methods:{changeMode:function(){var isRichText=this.isRichText,value=this.value;if(isRichText)this.showConfirmModeSwitch();else{var htmlContent="<p>".concat(value,"</p>");this.content=htmlContent,this.proceedChangingModes()}},showConfirmModeSwitch:function(){var _this=this,dialogObj={htmlMessage:"".concat(this.$t("forms.builder.switch_alert")),rbDanger:!0,rbLabel:"Confirm"};this.$dialog.confirm(dialogObj).then((function(canProceed){if(canProceed){var value=_this.value,textContent=(0,filters/* htmlToText */.s9)(value);_this.content=textContent,_this.proceedChangingModes()}}))},proceedChangingModes:function(){var isRichText=this.isRichText;this.isRichText=!isRichText}}},forms_RichTextAreavue_type_script_lang_js=RichTextAreavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_RichTextAreavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RichTextArea=component.exports},
/***/188742:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"22bc1f7e3fecc069519710728d363ce9.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/18830.js.map