"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[96324,32686,80865,53021],{
/***/18503:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PurchaseOrderCreation}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var render,staticRenderFns,objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FormCreation=(__webpack_require__(879288),__webpack_require__(634338),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(373729)),PurchaseMixin=__webpack_require__(456462),validation=__webpack_require__(990260),api=__webpack_require__(32284),router=__webpack_require__(329435),PurchaseOrderCreationvue_type_script_lang_js={extends:FormCreation/* default */.Z,props:["viewname"],mixins:[PurchaseMixin/* default */.Z],data:function(){return{}},computed:{isEdit:function(){var conversionId=this.conversionId;return!(0,validation/* isEmpty */.xb)(conversionId)},conversionId:function(){var $route=this.$route,_$route$query=$route.query,recordIds=_$route$query.recordIds,vendorQuote=_$route$query.vendorQuote,id=$route.params.id;return Number(id)||recordIds||vendorQuote},prIds:function(){var $route=this.$route,recordIds=$route.query.recordIds;return recordIds},requestForQuotation:function(){var $route=this.$route,requestForQuotation=$route.query.requestForQuotation;return requestForQuotation},vendorQuote:function(){var $route=this.$route,vendorQuote=$route.query.vendorQuote;return vendorQuote},title:function(){var moduleDisplayName=this.moduleDisplayName,moduleDataId=this.moduleDataId;return(0,validation/* isNumber */.hj)(moduleDataId)?"Edit ".concat(moduleDisplayName):"Create ".concat(moduleDisplayName)},isWidgetsSupported:function(){return!0},isV3Api:function(){return!0},moduleName:function(){return"purchaseorder"},moduleDisplayName:function(){return"Purchase Order"}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var conversionId,moduleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return conversionId=_this.conversionId,moduleName=_this.moduleName,_this.isLoading=!0,_context.next=4,_this.loadFormsList(moduleName);case 4:if((0,validation/* isEmpty */.xb)(conversionId)){_context.next=7;break}return _context.next=7,_this.loadModuleData({moduleName:moduleName,conversionId:conversionId});case 7:_this.setInitialForm(),_this.isLoading=!1;case 9:case"end":return _context.stop()}}),_callee)})))()},loadModuleData:function(_ref){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var conversionId,moduleName,url,param,_yield$API$get,data,error,message,_ref2,purchaseorder,purchaserequest,summaryData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return conversionId=_ref.conversionId,moduleName=_ref.moduleName,url="/v2/module/data/".concat(conversionId,"?moduleName=").concat(moduleName),param={id:conversionId},!(0,validation/* isEmpty */.xb)(_this2.prIds)&&(0,validation/* isArray */.kJ)(JSON.parse(_this2.prIds))?(url="/v2/purchaseorder/convertPrToPo",param={recordIds:JSON.parse(_this2.prIds)}):(0,validation/* isEmpty */.xb)(_this2.vendorQuote)?url="v3/modules/data/summary?moduleName=purchaseorder":(url="/v3/requestForQuotation/convertVendorQuoteToPo",param={vendorQuote:_this2.vendorQuote}),_context2.next=6,api/* API */.bl.get(url,param);case 6:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(message=error.message,_this2.$message.error(message)):(_ref2=data||{},purchaseorder=_ref2.purchaseorder,purchaserequest=_ref2.purchaserequest,summaryData=purchaseorder||purchaserequest,(summaryData||{}).data&&(summaryData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},summaryData),summaryData.data)),(0,validation/* isEmpty */.xb)(summaryData.lineItems)||summaryData.lineItems.forEach((function(lineItem){(0,validation/* isEmpty */.xb)(lineItem.tax)&&_this2.$set(lineItem,"tax",{id:null}),(0,validation/* isEmpty */.xb)(lineItem.toolType)&&_this2.$set(lineItem,"toolType",{id:null}),(0,validation/* isEmpty */.xb)(lineItem.itemType)&&_this2.$set(lineItem,"itemType",{id:null}),(0,validation/* isEmpty */.xb)(lineItem.service)&&_this2.$set(lineItem,"service",{id:null}),(0,validation/* isEmpty */.xb)(lineItem.description)&&_this2.$set(lineItem,"description",""),(0,validation/* isEmpty */.xb)(lineItem.unitOfMeasure)&&_this2.$set(lineItem,"unitOfMeasure",null)})),_this2.moduleData=summaryData);case 10:case"end":return _context2.stop()}}),_callee2)})))()},
/* Event related methods */saveRecord:function(formModel){var _this3=this,formObj=this.formObj,serializedData=this.serializedData(formObj,formModel);!(0,validation/* isEmpty */.xb)(serializedData.lineItems)&&(0,validation/* isArray */.kJ)(serializedData.lineItems)&&serializedData.lineItems.forEach((function(lineItem){1===lineItem.inventoryType?(lineItem.toolType=null,lineItem.service=null,_this3.storeRoomCheck=!0,(0,validation/* areValuesEmpty */.sD)(lineItem.itemType)&&(lineItem.itemType=null)):2===lineItem.inventoryType?(lineItem.itemType=null,lineItem.service=null,_this3.storeRoomCheck=!0,(0,validation/* areValuesEmpty */.sD)(lineItem.toolType)&&(lineItem.toolType=null)):3===lineItem.inventoryType?(lineItem.itemType=null,lineItem.toolType=null,(0,validation/* areValuesEmpty */.sD)(lineItem.service)&&(lineItem.service=null)):4===lineItem.inventoryType&&(lineItem.itemType=null,lineItem.toolType=null,lineItem.service=null),((0,validation/* isEmpty */.xb)(lineItem.tax)||(0,validation/* isEmpty */.xb)(lineItem.tax.id))&&(lineItem.tax=null)})),this.storeRoomCheck&&(0,validation/* isNullOrUndefined */.le)((serializedData.storeRoom||{}).id)?this.$message.error("Please Enter Storeroom"):this.submitForm(serializedData)},redirectToList:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _ref3=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.LIST)||{},name=_ref3.name;name&&this.$router.push({name:name,query:this.$route.query})}else this.$router.push({name:"purchaseorder"})},redirectToSummary:function(id){if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref4.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else{var url="/app/purchase/po/all/summary/".concat(id);this.$router.push({path:url})}}}},po_PurchaseOrderCreationvue_type_script_lang_js=PurchaseOrderCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(po_PurchaseOrderCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PurchaseOrderCreation=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/96324.js.map