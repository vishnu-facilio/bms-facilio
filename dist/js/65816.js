(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[65816],{
/***/83322:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewChartSettings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FNewChartSettings.vue?vue&type=template&id=bb085188
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{width:250,"popper-class":"pT0 pB0"},model:{value:_vm.popoverVisibility,callback:function($$v){_vm.popoverVisibility=$$v},expression:"popoverVisibility"}},[_c("outside-click",{staticClass:"pT20 pB20",attrs:{visibility:_vm.popoverVisibility},on:{onOutsideClick:function($event){_vm.popoverVisibility=!1}}},[!1!==_vm.showChartMode?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Mode")]),_c("div",{},[_c("el-radio-group",{staticClass:"fc-radio-btn chart-setting-group pT10",attrs:{disabled:_vm.disableChartMode},on:{change:_vm.onChartModeChange},model:{value:_vm.settings.chartMode,callback:function($$v){_vm.$set(_vm.settings,"chartMode",$$v)},expression:"settings.chartMode"}},[_c("el-radio",{attrs:{label:"single"}},[_vm._v("Single")]),_c("el-radio",{attrs:{label:"multi"}},[_vm._v("Multiple")])],1)],1)]):_vm._e(),!1!==_vm.showAlarm?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Alarm")]),_c("div",[_c("el-radio-group",{staticClass:"chart-setting-group fc-radio-btn pT10",on:{change:function($event){return _vm.onSettingsChange("alarm")}},model:{value:_vm.settings.alarm,callback:function($$v){_vm.$set(_vm.settings,"alarm",$$v)},expression:"settings.alarm"}},[_c("el-radio",{attrs:{label:!0}},[_vm._v("Show")]),_c("el-radio",{attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("fields.properties.hideFieldTxt")))])],1)],1)]):_vm._e(),!1!==_vm.showTimePeriod?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Time period")]),_c("div",[_c("el-radio-group",{staticClass:"chart-setting-group fc-radio-btn pT10",model:{value:_vm.settings.timeperiod,callback:function($$v){_vm.$set(_vm.settings,"timeperiod",$$v)},expression:"settings.timeperiod"}},[_c("el-radio",{attrs:{label:!0}},[_vm._v("Show")]),_c("el-radio",{attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("fields.properties.hideFieldTxt")))])],1)],1)]):_vm._e(),_vm.showFilterBar?_c("div",{staticClass:"pL10 pB20"},[_c("div",{staticClass:"label-txt-black pb5"},[_vm._v("Filter")]),_c("div",[_c("el-radio-group",{staticClass:"chart-setting-group fc-radio-btn pT10",on:{change:function($event){return _vm.onSettingsChange("filter")}},model:{value:_vm.settings.filterBar,callback:function($$v){_vm.$set(_vm.settings,"filterBar",$$v)},expression:"settings.filterBar"}},[_c("el-radio",{attrs:{label:!0}},[_vm._v("Show")]),_c("el-radio",{attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("fields.properties.hideFieldTxt")))])],1)],1)]):_vm._e()]),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mR30 pT5 chart-icon pointer flRight portfolio-equiv-icon pB8",attrs:{slot:"reference",title:"Report Settings","data-arrow":"true"},slot:"reference"},[_c("span",{on:{click:function($event){$event.stopPropagation(),_vm.popoverVisibility=!0}}},[_c("InlineSvg",{staticClass:"rotate90 fc-grey-svg2",staticStyle:{top:"2px"},attrs:{src:"svgs/equalization",iconClass:"icon icon-sm-md"}})],1)])],1)},staticRenderFns=[],NewDataFormatHelper=(__webpack_require__(169358),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(804911)),InlineSvg=__webpack_require__(586166),OutsideClick=__webpack_require__(21864),FNewChartSettingsvue_type_script_lang_js={props:["dataPoints","settings","showChartMode","showAlarm","showChart","showTable","showSafelimit","showTimePeriod","disableChartMode","showFilterBar"],data:function(){return{popoverVisibility:!1}},mixins:[NewDataFormatHelper/* default */.Z],components:{InlineSvg:InlineSvg/* default */.Z,OutsideClick:OutsideClick/* default */.Z},methods:{onChartModeChange:function(){if("multi"===this.settings.chartMode){var unitCount=this.countUnits(this.dataPoints);Object.keys(unitCount).length>1?(this.settings.autoGroup=!0,this.autoGroupDataPoints(unitCount)):this.settings.autoGroup=!1}else this.settings.autoGroup=!1,this.autoGroupDataPoints()},onToggleChart:function(){this.settings.chart||(this.settings.table=!0)},onToggleTable:function(){this.settings.table||(this.settings.chart=!0)},autoGroupDataPoints:function(unitCount){if(this.settings.autoGroup)this.groupDataPoints(unitCount,this.dataPoints);else
// remove groups enabled by autogrouping
for(var groupIndex=this.dataPoints.length-1;groupIndex>=0;groupIndex--)if("group"===this.dataPoints[groupIndex].type&&(!this.dataPoints[groupIndex].unit||!this.dataPoints[groupIndex].dataType))for(var group=this.dataPoints.splice(groupIndex,1),children=group[0].children,childIndex=children.length-1;childIndex>=0;childIndex--){var removedChild=children.splice(childIndex,1);this.dataPoints.push(removedChild[0])}},groupDataPoints:function(unitCount,dataPoints){this.dataPoints=this.groupPoints(unitCount,dataPoints)},onSettingsChange:function(option){this.$emit("onSettingsChange",option)}}},components_FNewChartSettingsvue_type_script_lang_js=FNewChartSettingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewChartSettingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewChartSettings=component.exports},
/***/565304:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ComponentChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/DashboardCompoents/ComponentChooser.vue?vue&type=template&id=407154f9
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-user-filter-manager"},[_c("el-dialog",{staticClass:"db-user-filter-manager-dialog",attrs:{visible:_vm.dialogVisible,"show-close":!1,"append-to-body":!0,title:"Add components",width:"70%","before-close":_vm.handleClose}},[_c("div",{staticClass:"body"},[_c("div",{staticClass:"filter-config-container"},[_c("div",{staticClass:"cp-border-right width20"},[_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.tabs,(function(value,key){return _c("div",{key:key,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-tab pointer",class:{active:_vm.activeName===value},on:{click:function($event){return _vm.setOption(value)}}},[_vm._v(" "+_vm._s(key)+" ")])])})),0)]),"analytics"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2  width100 pR10",attrs:{filterable:""},model:{value:_vm.selectAnalyticsType,callback:function($$v){_vm.selectAnalyticsType=$$v},expression:"selectAnalyticsType"}},_vm._l(_vm.analyticsReportTypes,(function(value,key){return _c("el-option",{key:key,attrs:{value:value,label:key}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.analytics,callback:function($$v){_vm.$set(_vm.search,"analytics",$$v)},expression:"search.analytics"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.analyticsLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.filteredAnalyticsReports&&_vm.filteredAnalyticsReports.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.filteredAnalyticsReports,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer bonder-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.name)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.reports.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Reports available ")])],1)]],2)])]):_vm._e(),"pivot"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-8"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.pivotReports,callback:function($$v){_vm.$set(_vm.search,"pivotReports",$$v)},expression:"search.pivotReports"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.pivotReportsLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.pivotReportsList&&_vm.pivotReportsList.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.pivotReportsList,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer bonder-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.name)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.reports.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Reports available ")])],1)]],2)])]):_vm._e(),"report"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2  width100 pR10",attrs:{filterable:""},on:{change:_vm.setModuleName},model:{value:_vm.selectedModule,callback:function($$v){_vm.selectedModule=$$v},expression:"selectedModule"}},_vm._l(_vm.modulesList,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.name,label:m.displayName}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.report,callback:function($$v){_vm.$set(_vm.search,"report",$$v)},expression:"search.report"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.reportLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.selectedReportsWithFolder&&_vm.selectedReportsWithFolder.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.selectedReportsWithFolder,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer bonder-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.name)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.reports.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Reports available ")])],1)]],2)])]):"view"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right  cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR10",attrs:{filterable:""},on:{change:_vm.setModuleName},model:{value:_vm.selectedModule,callback:function($$v){_vm.selectedModule=$$v},expression:"selectedModule"}},_vm._l(_vm.modulesList,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.name,label:m.displayName}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.view,callback:function($$v){_vm.$set(_vm.search,"view",$$v)},expression:"search.view"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.viewLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.selectediVewsWithFolder&&_vm.selectediVewsWithFolder.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.selectediVewsWithFolder,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer border-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.label)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.views.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.displayName},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Views available ")])],1)]],2)])]):"graphics"===_vm.activeName&&_vm.$helpers.isLicenseEnabled("GRAPHICS")?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR10",attrs:{filterable:""},model:{value:_vm.selectedAssetCatergoryId,callback:function($$v){_vm.selectedAssetCatergoryId=$$v},expression:"selectedAssetCatergoryId"}},_vm._l(_vm.filteredAssetCategory,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.id,label:m.name}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.graphics,callback:function($$v){_vm.$set(_vm.search,"graphics",$$v)},expression:"search.graphics"}})],1)])]),_c("div",{staticClass:"filter-config-left col-12",staticStyle:{height:"calc(60vh - 80px)",overflow:"auto"}},[_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.getfullGraphicsList,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer border-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.label)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.list.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0)])]):_vm._e(),_c("div",{staticClass:" row width30"},[_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 10px)"}},[_c("div",{staticClass:"filter-config-right col-12"},[_c("div",{staticClass:"selcted-filters-title"},[_vm._v(" SELECTED COMPONENTS ")]),_vm.selectedData&&_vm.selectedData.length?[_c("draggable",_vm._b({attrs:{list:_vm.selectedData}},"draggable",_vm.fieldSectionDragOptions,!1),_vm._l(_vm.selectedData,(function(report,index){return _c("div",{key:index,staticClass:"mB10 mT15"},[_c("div",{staticClass:"field-row"},[_c("div",{staticClass:"task-handle mR10 pointer mT10"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_c("div",{staticClass:"mT-auto mB-auto"},[report.optionName&&"view"===report.optionName?_c("div",[_vm._v(" "+_vm._s(report.displayName||"")+" ")]):_c("div",[_vm._v(" "+_vm._s(report.name||"")+" ")]),_c("div",{staticClass:"secondary-text pT5",staticStyle:{color:"#c0c4cb","font-weight":"400","font-size":"11px"}},[_vm._v(" "+_vm._s(report.typeDisplayName?report.typeDisplayName+" "+(report.moduleDisplayName?"in "+report.moduleDisplayName:""):"")+" ")])]),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_c("div",{staticClass:"mR10 inline"},[_c("i",{staticClass:"el-icon-delete pointer trash-icon",on:{click:function($event){report.selected=!1,_vm.deleteselectedData(index)}}})])])])])})),0)]:[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"50%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No components selected ")])],1)]],2)])])])]),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.handleClose}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.addToDashboard}},[_vm._v("Done")])],1)])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),vuedraggable_umd=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(909980)),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),api=__webpack_require__(32284),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),ComponentChooservue_type_script_lang_js={components:{draggable:vuedraggable_umd_default()},props:["data","reportLoading"],data:function(){return{analyticsLoading:!1,pivotReportsLoading:!1,dialogVisible:!0,viewLoading:!0,selectedModule:"workorder",selectAnalyticsType:"all",selectedAssetCatergoryId:-1,activeName:"analytics",fieldSectionDragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0},tabs:{"Analytical Reports":"analytics","Module Reports":"report","Pivot Reports":"pivot",Views:"view",Graphics:"graphics"},search:{report:"",view:"",graphics:"",analytics:"",pivotReports:""},analyticsReportTypes:{All:"all",Portfolio:"PORTFOLIO",Building:"BUILDING",Heatmap:"HEAT_MAP",Treemap:"TREE_MAP",Scatter:"SCATTER"},selectedReports:[],selectedviews:[],selectedData:[],modulesList:[],viewsList:[],analyticsReports:[],pivotReports:[]}},created:function(){var _this=this;this.$store.dispatch("loadAssetCategory"),this.getView(),this.loadAnalyticsReport(),this.loadPivotReports(),api/* API */.bl.get("v2/automation/module").then((function(_ref){var data=_ref.data;_this.modulesList=data.modules,_this.modulesList.forEach((function(rt){_this.$set(rt,"id",rt.moduleId)})),_this.modulesList.push({displayName:"Building performance",name:"energydata",id:-1}),_this.modulesList.push({displayName:"Fault detection and diagnostics",name:"alarm",id:-2})}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{filteredAssetCategory:function(){var data={name:"All",id:-1};return[(0,objectSpread2/* default */.Z)({},data)].concat((0,toConsumableArray/* default */.Z)(this.assetCategory))},getLicenseEnabledModules:function(){var getLicenseEnabledModules=this.data.getLicenseEnabledModules;return getLicenseEnabledModules||[]},newReportTree:function(){var _this2=this,reports=this.data.reports,search=this.search;return reports?(reports.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,report.typeDisplayName="Module Report",report.optionName="report",folder.moduleId&&(report.moduleDisplayName=_this2.getModuleName(folder.moduleId)),_this2.$set(report,"selected",_this2.isSelectedData(report)),_this2.compareString(report.name,search.report)?report.disabled=!1:report.disabled=!0}))})),reports.filter((function(rt){if(rt.reports){var rp=rt.reports.filter((function(report){return!report.disabled}));if(rp&&rp.length)return rp}return null}))):[]},reportTree:function(){var _this3=this,reportTree=this.data.reportTree,search=this.search;return reportTree?(reportTree.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,report.typeDisplayName="Module Report",report.optionName="report",folder.moduleId&&(report.moduleDisplayName=_this3.getModuleName(folder.moduleId)),_this3.$set(report,"selected",_this3.isSelectedData(report)),_this3.compareString(report.name,search.report)?report.disabled=!1:report.disabled=!0}))})),reportTree.filter((function(rt){if(rt.reports){var rp=rt.reports.filter((function(report){return!report.disabled}));if(rp&&rp.length)return rp}return null}))):[]},allreports:function(){var _this$data=this.data,reports=_this$data.reports,reportTree=_this$data.reportTree;return reports&&!reportTree?reports.map((function(rt){return rt.reports})):!reports&&reportTree?this.concatArray(reportTree.map((function(rt){return rt.reports}))):reports&&reportTree?[].concat((0,toConsumableArray/* default */.Z)(this.concatArray(reports.map((function(rt){return rt.reports})))),(0,toConsumableArray/* default */.Z)(this.concatArray(reportTree.map((function(rt){return rt.reports}))))):[]},selectedReportsWithFolder:function(){var newReportTree=this.newReportTree,reportTree=this.reportTree,r=[],rt=[];return newReportTree&&newReportTree.length&&(r=newReportTree),reportTree&&reportTree.length&&(rt=reportTree),[].concat((0,toConsumableArray/* default */.Z)(r),(0,toConsumableArray/* default */.Z)(rt))},selectediVewsWithFolder:function(){
// let { supportedModules, customModuleList } = this
// let r = []
// let rt = []
// if (supportedModules && supportedModules.length) {
//   r = supportedModules
// }
// if (customModuleList && customModuleList.length) {
//   rt = customModuleList
// }
// return [...r, ...rt]
return this.supportedModules},supportedModules:function(module){var _this4=this,viewsList=this.viewsList,search=this.search;
// let { supportedModules } = this.data
return viewsList?(viewsList.forEach((function(folder){folder.views&&folder.views.forEach((function(report){report.folderName=folder.label,report.typeDisplayName="View",report.optionName="view",module&&(report.moduleName=module.selectedModule),folder.moduleId&&(report.moduleDisplayName=_this4.getModuleName(folder.moduleId)),_this4.compareString(report.displayName,search.view)?report.disabled=!1:report.disabled=!0}))})),viewsList.filter((function(rt){if(rt.views){var views=rt.views.filter((function(report){return!report.disabled}));if(views&&views.length)return views}return null}))):[]},customModuleList:function(){var _this5=this,customModuleList=this.data.customModuleList,search=this.search;return customModuleList?(customModuleList.forEach((function(folder){folder.list&&folder.list.forEach((function(report){report.folderName=folder.label,report.typeDisplayName="View",report.optionName="view",folder.moduleId&&(report.moduleDisplayName=_this5.getModuleName(folder.moduleId)),_this5.compareString(report.displayName,search.view)?report.disabled=!1:report.disabled=!0}))})),customModuleList.filter((function(rt){if(rt.list){var list=rt.list.filter((function(report){return!report.disabled}));if(list&&list.length)return list}return null}))):[]},allviews:function(){var _this$data2=this.data,customModuleList=_this$data2.customModuleList,supportedModules=_this$data2.supportedModules;return customModuleList&&!supportedModules?customModuleList.map((function(rt){return rt.list})):!customModuleList&&supportedModules?this.concatArray(supportedModules.map((function(rt){return rt.list}))):customModuleList&&supportedModules?[].concat((0,toConsumableArray/* default */.Z)(this.concatArray(supportedModules.map((function(rt){return rt.list})))),(0,toConsumableArray/* default */.Z)(this.concatArray(customModuleList.map((function(rt){return rt.list}))))):[]},getfullGraphicsList:function(){var _this6=this,graphicsData=this.graphicsList.filter((function(rt){return rt.assetCategoryId===_this6.selectedAssetCatergoryId})),data={label:"Graphics",expand:!0,list:-1===this.selectedAssetCatergoryId?this.graphicsList:graphicsData};return[(0,objectSpread2/* default */.Z)({},data)]},analyticsList:function(){var _this7=this,analyticsReports=this.analyticsReports,search=this.search;return analyticsReports?(analyticsReports.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,folder.moduleId&&(report.moduleDisplayName=_this7.getModuleName(folder.moduleId)),_this7.$set(report,"selected",_this7.isSelectedData(report)),_this7.compareString(report.name,search.analytics)?report.disabled=!1:report.disabled=!0}))})),analyticsReports.filter((function(rt){if(rt.reports){var reports=rt.reports.filter((function(report){return!report.disabled}));if(reports&&reports.length)return reports}return null}))):[]},pivotReportsList:function(){var _this8=this,pivotReports=this.pivotReports,search=this.search;
//pivot reports that match search string
return pivotReports?(pivotReports.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,folder.moduleId&&(report.moduleDisplayName=_this8.getModuleName(folder.moduleId)),_this8.$set(report,"selected",_this8.isSelectedData(report)),_this8.compareString(report.name,search.pivotReports)?report.disabled=!1:report.disabled=!0}))})),pivotReports.filter((function(rt){if(rt.reports){var reports=rt.reports.filter((function(report){return!report.disabled}));if(reports&&reports.length)return reports}return null}))):[]},filteredAnalyticsReports:function(){var analyticsList=this.analyticsList,selectAnalyticsType=this.selectAnalyticsType;return"all"===selectAnalyticsType?analyticsList:analyticsList.filter((function(folder){var reports=folder.reports.filter((function(report){return report.analyticsTypeEnum===selectAnalyticsType}));return reports&&reports.length?reports:null}))},graphicsList:function(){var _this9=this,graphicsList=this.data.graphicsList,search=this.search;return graphicsList?(graphicsList.forEach((function(graphics){graphics.typeDisplayName="Graphics",graphics.optionName="graphics",_this9.compareString(graphics.name,search.analytics)?graphics.disabled=!1:graphics.disabled=!0})),graphicsList):[]},selectedGraphicsList:function(){return this.graphicsList?this.graphicsList.filter((function(report){return report&&report.selected?report:null})):[]}}),methods:{loadAnalyticsReport:function(){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this10.analyticsLoading=!0,url="/v3/report/folders?moduleName=energyData",_context.next=4,api/* API */.bl.get(url).then((function(_ref2){var data=_ref2.data;_this10.analyticsReports=data.reportFolders;var i=0;_this10.analyticsReports.forEach((function(folder){0===i?_this10.$set(folder,"expand",!0):_this10.$set(folder,"expand",!1),_this10.$set(folder,"label",folder.displayName),folder.reports.forEach((function(rt){_this10.$set(rt,"selected",_this10.isSelectedData(rt)),_this10.$set(rt,"disabled",!1),_this10.$set(rt,"disabled",!1),_this10.$set(rt,"folderName",folder.displayName),_this10.$set(rt,"typeDisplayName","Analytical Report"),_this10.$set(rt,"optionName","report"),_this10.$set(rt,"moduleDisplayName","Analytical Report")})),i++})),_this10.analyticsLoading=!1})).catch((function(){_this10.analyticsLoading=!1}));case 4:case"end":return _context.stop()}}),_callee)})))()},loadPivotReports:function(){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var url,_yield$API$get,data,error,i;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this11.pivotReportsLoading=!0,url="/v3/report/folders?moduleName=energyData&isPivot=true",_context2.next=4,api/* API */.bl.get(url);case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this11.pivotReports=data.reportFolders,i=0,_this11.pivotReports.forEach((function(folder){0===i?_this11.$set(folder,"expand",!0):_this11.$set(folder,"expand",!1),_this11.$set(folder,"label",folder.displayName),folder.reports.forEach((function(rt){_this11.$set(rt,"selected",_this11.isSelectedData(rt)),_this11.$set(rt,"disabled",!1),_this11.$set(rt,"disabled",!1),_this11.$set(rt,"folderName",folder.displayName),_this11.$set(rt,"typeDisplayName","Pivot Report"),_this11.$set(rt,"optionName","report"),_this11.$set(rt,"moduleDisplayName","Pivot Report")})),i++}))),_this11.pivotReportsLoading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},getView:function(moduleName){var _this12=this,selectedModule=this.selectedModule;this.viewLoading=!0,this.viewsList=[];var displayname="Work orders";moduleName&&(displayname=this.modulesList.find((function(rt){return rt.name===moduleName})).displayName);var url="v2/views/viewList?moduleName=".concat(selectedModule),query=this.$route.query,_ref3=query||{},appId=_ref3.appId;(0,validation/* isEmpty */.xb)(appId)||(url+="&appId=".concat(appId)),api/* API */.bl.get(url).then((function(_ref4){var data=_ref4.data;if(data.groupViews){var groups=data.groupViews;groups.forEach((function(folder){_this12.$set(folder,"expand",!1),_this12.$set(folder,"label",folder.displayName),folder.views.forEach((function(rt){_this12.$set(rt,"selected",_this12.isSelectedData(rt)),_this12.$set(rt,"disabled",!1),_this12.$set(rt,"disabled",!1),_this12.$set(rt,"folderName",folder.displayName),_this12.$set(rt,"typeDisplayName","View"),_this12.$set(rt,"optionName","view"),_this12.$set(rt,"moduleDisplayName",displayname)}))})),_this12.viewsList=groups}_this12.viewLoading=!1}))},isSelectedData:function(component){var isCompoentd=this.selectedData.findIndex((function(rt){return rt.id===component.id?rt:null}));return isCompoentd>-1},getModuleName:function(moduleId){var m=this.modulesList.find((function(rt){return rt.id===moduleId}));return m&&m.displayName?m.displayName:""},compareString:function(string1,string2){return""===string2||!!(string1&&string2&&string1.toLowerCase().indexOf(string2.toLowerCase())>=0)},searchReport:function(){var activeName=this.activeName,search=this.search;"analytics"===activeName&&""!==search.report?this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!0})):"report"===activeName&&""===search.report&&this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!1})),"report"===activeName&&""!==search.report?this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!0})):"report"===activeName&&""===search.report&&this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!1})),"view"===activeName&&""!==search.view?this.selectediVewsWithFolder.forEach((function(rt){rt.expand=!0})):"view"===activeName&&""===search.view&&this.selectediVewsWithFolder.forEach((function(rt){rt.expand=!1})),"pivot"===activeName&&""!==search.pivotReports?this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!0})):"pivot"===activeName&&""===search.pivotReports&&this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!1}))},addToDashboard:function(){var _this13=this;this.selectedReports.forEach((function(rt){_this13.$set(rt,"optionName","report")})),this.selectedviews.forEach((function(rt){_this13.$set(rt,"optionName","view")})),this.selectedGraphicsList.forEach((function(rt){_this13.$set(rt,"optionName","graphics")})),
// let data = [
//   ...this.selectedReports,
//   ...this.selectedviews,
//   ...this.selectedGraphicsList,
// ]
this.$emit("addElement",this.selectedData),this.handleClose()},setOption:function(name){this.activeName=name,this.$emit("option",name)},close:function(){this.$emit("close")},handleClose:function(){this.close(),this.$emit("resetreportData")},expand:function(folder){this.$set(folder,"expand",!folder.expand)},concatArray:function(array){return[].concat.apply([],array)},setModuleName:function(){"view"===this.activeName&&this.getView(this.selectedModule),this.$emit("setModuleName",this.selectedModule,this.selectedData)},deleteselectedData:function(index){this.selectedData.splice(index,1)},getselectedData:function(data){
// let selectedReports = this.concatArray(this.allreports).filter(report => {
//   if (report && report.selected) {
//     return report
//   }
// })
// let selectedviews = this.concatArray(this.allviews).filter(report => {
//   if (report && report.selected) {
//     return report
//   }
// })
// let graphicsList = this.graphicsList.filter(report => {
//   if (report && report.selected) {
//     return report
//   }
// })
// this.selectedData = [
//   ...selectedReports,
//   ...selectedviews,
//   ...graphicsList,
// ]
if(data.selected)this.selectedData.push(data);else{var findData=this.selectedData.findIndex((function(rt){return rt.id===data.id}));this.deleteselectedData(findData)}},getViewData:function(){this.selectedviews=this.concatArray(this.allviews).filter((function(report){return report&&report.selected?report:null}))},handleClick:function(){}}},DashboardCompoents_ComponentChooservue_type_script_lang_js=ComponentChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(DashboardCompoents_ComponentChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ComponentChooser=component.exports},
/***/146040:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DashboardFilterWidgetConfigDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/dashboard-filters/DashboardFilterWidgetConfigDialog.vue?vue&type=template&id=aaf9149a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-widget-filter-manager"},[_c("el-dialog",{staticClass:"db-widget-filter-manager-dialog",attrs:{visible:_vm.visibility,"show-close":!1,"append-to-body":!0,title:"Dashboard Filters",width:"35%"}},[_c("div",{staticClass:"body"},[_c("el-checkbox",{staticClass:"mB20",staticStyle:{border:"none"},attrs:{label:"Exclude widget from dashboard filters"},model:{value:_vm.checkBoxModel,callback:function($$v){_vm.checkBoxModel=$$v},expression:"checkBoxModel"}}),"view"==_vm.widget.type?_c("div",{staticClass:"timeline-filter-mapping"},[_c("div",{staticClass:"mB10 exlude-filter-text"},[_vm._v(" Apply timeline filter to ")]),_c("el-select",{staticClass:"fc-input-full-border-h35",attrs:{disabled:_vm.checkBoxModel,loading:_vm.loadingDateFields,"loading-text":"loading",clearable:""},model:{value:_vm.selectModel,callback:function($$v){_vm.selectModel=$$v},expression:"selectModel"}},_vm._l(_vm.dateFields,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.displayName,value:option.name}})})),1)],1):_vm._e()],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveFilterConfig}},[_vm._v("Done")])],1)])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),utility_methods=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(773258)),field=__webpack_require__(815872),api=__webpack_require__(32284),DashboardFilterWidgetConfigDialogvue_type_script_lang_js={components:{},props:["visibility","widget"],created:function(){var widget=(0,utility_methods/* deepCloneObject */.kh)(this.widget),_widget$widgetSetting=widget.widgetSettings,checkBoxModel=_widget$widgetSetting.excludeDbFilters,selectModel=_widget$widgetSetting.dateField;this.checkBoxModel=checkBoxModel,this.selectModel=selectModel,"view"==this.widget.type&&
//for list widget , need to manually map date field
this.loadFields()},data:function(){return{checkBoxModel:null,selectModel:null,dateFields:[],loadingDateFields:!1}},methods:{loadFields:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loadingDateFields=!0,_context.next=3,api/* API */.bl.get("v2/modules/meta/".concat(_this.widget.dataOptions.moduleName));case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(_this.$message.error("Error loading meta fields"),_this.loading):_this.dateFields=data.meta.fields.filter((function(e){return(0,field/* isDateTypeField */.S6)(e)})),_this.loadingDateFields=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},closeDialog:function(){this.$emit("update:visibility",!1)},saveFilterConfig:function(){var widgetSettings={excludeDbFilters:this.checkBoxModel,dateField:this.selectModel};this.$emit("widgetFilterConfigChange",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.widget),{},{widgetSettings:widgetSettings}))}}},dashboard_filters_DashboardFilterWidgetConfigDialogvue_type_script_lang_js=DashboardFilterWidgetConfigDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_filters_DashboardFilterWidgetConfigDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardFilterWidgetConfigDialog=component.exports},
/***/974102:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return MultipleRegressionAnalysis}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/newTools/v1/MultipleRegressionAnalysis.vue?vue&type=template&id=93c8893c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-energy-regression-page fc-energy-regression"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__asset_main p20 height100"},["undefined"!==typeof _vm.resultObj&&_vm.resultObj||0!==_vm.regressionInfo.length?_c("div",{staticClass:"fc__layout__flexes fc__main__con__width height100"},_vm._l(_vm.regressionInfo,(function(regressionResult,idx){return _c("div",{key:idx,staticClass:"fc__asset__main__scroll"},[_c("div",{staticClass:"white-bg p20 fc__layout__flexes position-relative"},[_c("div",{staticClass:"fc-black-13 bold text-left"},[_c("span",{staticClass:"regression-eq-title"},[_vm._v("Regression equation -")]),_c("span",{staticClass:"fc-black-14 fw4"},[_vm._v(_vm._s(regressionResult.expressionString?regressionResult.expressionString:""))])]),_c("div",[_c("table",{staticClass:"regression-table"},[_c("tr",[_c("td",{staticClass:"regression-table-first-td"},[_vm._v(" "+_vm._s("Y")+" ")]),_c("td",[_vm._v(" "+_vm._s(regressionResult.yPoint.name)+" ")])]),_vm._l(regressionResult.dataPoints,(function(dataPoint,dataPointIdx){return _c("tr",{key:dataPointIdx},[_c("td",{staticClass:"regression-table-first-td"},[_vm._v(" "+_vm._s(dataPoint.aliases.actual)+" ")]),_c("td",[_vm._v(" "+_vm._s(dataPoint.name)+" ")])])}))],2)])]),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-grey2 f11 text-uppercase fwBold"},[_vm._v(" Regression Statistics ")]),_c("div",{staticClass:"white-bg fc__layout__flexes position-relative mT10"},[_c("el-row",{staticClass:"p20 border-bottom4"},[_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"fc-black-13 bold text-left"},[_vm._v(" Multiple R ")])]),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(Math.sqrt(regressionResult.rsquared).toPrecision(2))+" ")])]),_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"fc-black-13 bold text-left"},[_vm._v(" Standard Error ")])]),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(regressionResult.standardError)+" ")])])],1),_c("el-row",{staticClass:"p20 border-bottom4"},[_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"fc-black-13 bold text-left"},[_vm._v(" R Square ")])]),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(regressionResult.rsquared)+" ")])]),_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"fc-black-13 bold text-left"},[_vm._v(" Observations ")])]),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(regressionResult.observations)+" ")])])],1),_c("el-row",{staticClass:"p20"},[_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"fc-black-13 bold text-left"},[_vm._v(" Adjusted R Square ")])]),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(regressionResult.adjustedrSquared)+" ")])])],1)],1)]),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-grey2 f11 text-uppercase fwBold"},[_vm._v(" ANOVA ")]),_c("div",{staticClass:"white-bg fc__layout__flexes position-relative mT10 settings-table-hover-bg-remove"},[_c("table",{staticClass:"setting-list-view-table width100"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"}),_vm._l(_vm.anovaResultKeys,(function(anovaColumn,idx2){return _c("th",{key:idx2,staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(anovaColumn.displayName)+" ")])}))],2)]),_c("tbody",_vm._l(regressionResult.anovaMetrics,(function(anovaRecord,metricIdx){return _c("tr",{key:metricIdx},[_c("td",[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(_vm.stringWithCaps(anovaRecord.resultVariable))+" ")])]),_vm._l(_vm.anovaResultKeys,(function(metricColumn,columnIdx){return _c("td",{key:columnIdx},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(-1===anovaRecord[metricColumn.name]?" ":anovaRecord[metricColumn.name])+" ")])])}))],2)})),0)])])]),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-grey2 f11 text-uppercase fwBold"},[_vm._v(" Regression metrics ")]),_c("div",{staticClass:"white-bg fc__layout__flexes position-relative mT10 settings-table-hover-bg-remove"},[_c("table",{staticClass:"setting-list-view-table width100"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"}),_vm._l(_vm.regressionStatKeys,(function(regressionStat,regressionStatIdx){return _c("th",{key:regressionStatIdx,staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(regressionStat.displayName)+" ")])}))],2)]),_c("tbody",_vm._l(regressionResult.regressionMetrics,(function(metricRecord,metricRecordIdx){return _c("tr",{key:metricRecordIdx},[_c("td",[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(metricRecord.name)+" ")])]),_vm._l(_vm.regressionStatKeys,(function(stat,statIdx){return _c("td",{key:statIdx},[_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(-1===metricRecord[stat.name]?"N/A":metricRecord[stat.name])+" ")])])}))],2)})),0)])])])])})),0):_vm._e()])])])])},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FNewAnalyticsModelHelper=(__webpack_require__(689730),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(146371)),MultipleRegressionAnalysisvue_type_script_lang_js={watch:{resultObj:{handler:function(newVal,oldVal){"undefined"!==typeof this.resultObj&&this.resultObj&&this.prepareRegressionInfo()},deep:!0},regressionMetrics:{handler:function(newVal,oldVal){"undefined"!==typeof this.regressionMetrics&&this.regressionMetrics&&this.prepareRegressionInfo()},deep:!0}},data:function(){return{regressionMetricKeys:null,regressionStatKeys:null,anovaResultKeys:null,regressionInfo:[]}},props:["resultObj","regressionMetrics","analyticsConfig"],created:function(){this.regressionMetricKeys=FNewAnalyticsModelHelper/* default */.Z.regressionMetrics(),this.regressionStatKeys=FNewAnalyticsModelHelper/* default */.Z.regressionStatistics(),this.anovaResultKeys=FNewAnalyticsModelHelper/* default */.Z.anovaResultKeys(),"undefined"!==typeof this.regressionMetrics&&null!==this.regressionMetrics?this.populateRegressionInfo():"undefined"!==typeof this.resultObj&&null!==this.resultObj&&this.prepareRegressionInfo()},methods:{populateRegressionInfo:function(){this.regressionInfo=this.regressionMetrics},stringWithCaps:function(string){var firstChar=string.charAt(0),remaining=string.slice(1);return firstChar.toUpperCase()+remaining.toLowerCase()},prepareRegressionInfo:function(){var _this=this;if("undefined"!==typeof this.resultObj&&null!==this.resultObj&&this.resultObj.reportData.data&&0!=this.resultObj.reportData.data.length&&this.resultObj.reportData.regressionResult&&0!==this.resultObj.reportData.regressionResult.length){this.regressionInfo=[];var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.resultObj.regressionConfig);try{var _loop=function(){var config=_step.value,key=FNewAnalyticsModelHelper/* default */.Z.computeRegressionAlias(config),temp={};temp["alias"]=key;var result=_this.resultObj.reportData.regressionResult[key],regressionDataPoint=_this.resultObj.report.dataPoints.filter((function(dp){return dp.aliases.actual===key}));regressionDataPoint.length&&(temp["expressionString"]=regressionDataPoint[0].expressionString);var dataPoints=[],_loop2=function(alias){if("constant"!==alias){var dataPoint=_this.resultObj.report.dataPoints.find((function(dp){return dp.aliases.actual===alias}));dataPoint&&dataPoints.push(dataPoint)}};for(var alias in result.coefficientMap)_loop2(alias);var yDataPoint=_this.resultObj.report.dataPoints.find((function(dp){return dp.aliases.actual===config.yAxis.alias}));yDataPoint&&(temp["yPoint"]=yDataPoint),temp["dataPoints"]=dataPoints;var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(_this.regressionMetricKeys);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var heading=_step2.value;temp[heading.name]=result[heading.name]}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}for(var variableName in temp["anovaMetrics"]=result["anovaMetrics"],result.regressionMetrics){var row=result.regressionMetrics[variableName];row["name"]=variableName}temp["regressionMetrics"]=result.regressionMetrics,_this.regressionInfo.push(temp)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}}},computed:{}},v1_MultipleRegressionAnalysisvue_type_script_lang_js=MultipleRegressionAnalysisvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_MultipleRegressionAnalysisvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MultipleRegressionAnalysis=component.exports},
/***/163833:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return DashboardEditer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/dashboard/DashboardEditer.vue?vue&type=template&id=78c607a0
var CardBuilderDashboardMixin_render,CardBuilderDashboardMixin_staticRenderFns,DashboardComponentMixins_render,DashboardComponentMixins_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dashboard-main-section new-dashboard"},[_vm.loading?_vm._e():_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"new-create-dashboard-header fc-theme-color flex-middle justify-between visibility-visible-actions"},[_c("div",{staticClass:"pull-left width30"},[_c("div",{staticClass:"flex-middle width100 justify-content-end"},[_c("el-input",{staticClass:"create-dashboard-input-title newreport-title-input dashboard-title-input",attrs:{autofocus:!0,placeholder:"Enter Alternative Dashboard Name"},model:{value:_vm.dashboard.label,callback:function($$v){_vm.$set(_vm.dashboard,"label",$$v)},expression:"dashboard.label"}}),_c("div",{staticClass:"pointer"},[_c("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"click","popper-class":"p0 dashboard-folder-chooser"},model:{value:_vm.chooseFolderPopover,callback:function($$v){_vm.chooseFolderPopover=$$v},expression:"chooseFolderPopover"}},[_c("el-row",{staticClass:"p10 border-bottom1px fol-header"},[_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"bold"},[_vm._v("Choose Folder")])]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"pull-right"},[_c("div",{on:{click:function($event){_vm.showAddDashboardfolder=!0}}},[_c("i",{staticClass:"el-icon-folder-add f18 pointer"})])])])],1),_c("el-row",{},[_c("el-col",{staticClass:"p10",attrs:{span:24}},[_c("div",{},[_c("el-input",{staticClass:"fc-input-full-border4 fc-small-btn",attrs:{size:"small","suffix-icon":"el-icon-search",placeholder:"Search Folder"},model:{value:_vm.dashboardFolderQuery,callback:function($$v){_vm.dashboardFolderQuery=$$v},expression:"dashboardFolderQuery"}})],1)]),_c("el-col",{staticClass:"dashboard-folder-height p10",attrs:{span:24}},_vm._l(_vm.filteredDashboardList,(function(folder,index){return _c("div",{key:index,staticClass:"pointer p10 dashboard-folder f13",class:{active:_vm.selectedDashoardFolder.id===folder.id,bold:_vm.selectedDashoardFolder.id===folder.id},on:{click:function($event){_vm.handleSelect(folder),_vm.chooseFolderPopover=!1}}},[_vm.selectedDashoardFolder.id===folder.id?_c("i",{staticClass:"el-icon-folder pR3",staticStyle:{color:"#ef508f"}}):_c("i",{staticClass:"el-icon-folder pR3"}),_vm._v(" "+_vm._s(folder.name)+" "),_vm.selectedDashoardFolder.id===folder.id?_c("div",{staticClass:"pull-right"},[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"green"}})]):_vm._e()])})),0)],1),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_c("div",{staticClass:"display-flex text-t-none"},[_c("div",{staticClass:"f14 pL10"},[_vm._v(_vm._s(" in "))]),_c("div",{staticClass:"display-flex btn-effect-1"},[_c("i",{staticClass:"el-icon-folder f18 pR5 primary-font"}),_c("div",{staticClass:"primary-font f14 ellipsis"},[_vm._v(" "+_vm._s(_vm.selectedDashoardFolder.name)+" ")])])])])],1)],1)],1)]),_c("div",{staticClass:"flex-middle width100 justify-content-end"},[_vm.showTabOptions?_c("div",{staticClass:"flex-middle create-dashboard-btn-section"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pointer",attrs:{title:"Edit Dashboard Tabs"}},[_c("el-popover",{attrs:{"popper-class":"dashboard-option-dialog",placement:"bottom",width:"300",trigger:"click"}},[_c("div",[_c("div",{staticClass:" dashboard-option-header p10"},[_vm._v(" Tab Options ")]),_c("div",{staticClass:"p10"},[_c("div",{staticClass:"row pT10"},[_c("div",{staticClass:"col-6"},[_vm._v("Tabs")]),_c("div",{staticClass:"col-6"},[_c("el-switch",{staticClass:"pull-right el-input-textbox-full-border",on:{change:_vm.toggleTabsVisibility},model:{value:_vm.dashboardOptions.showTabs,callback:function($$v){_vm.$set(_vm.dashboardOptions,"showTabs",$$v)},expression:"dashboardOptions.showTabs"}})],1)]),_c("div",{staticClass:"row pT10"},[_c("div",{staticClass:"col-6 self-center"},[_vm._v("Tab Position")]),_c("div",{staticClass:"col-6"},[_c("el-select",{staticClass:"pull-right el-input-textbox-full-border",attrs:{placeholder:"Please select the position"},model:{value:_vm.dashboardOptions.dashboardTabPlacement,callback:function($$v){_vm.$set(_vm.dashboardOptions,"dashboardTabPlacement",$$v)},expression:"dashboardOptions.dashboardTabPlacement"}},[_c("el-option",{attrs:{label:"Top",value:1}}),_c("el-option",{attrs:{label:"Left",value:2}})],1)],1)])])]),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_c("img",{staticClass:"delete-icon mL5",staticStyle:{height:"20px",width:"20px","margin-right":"3px","margin-top":"3p"},attrs:{src:__webpack_require__(215748)}})])])],1)]):_vm._e(),_c("div",{staticClass:"flex-middle create-dashboard-btn-section dashboard-folder"},[_c("el-dropdown",{attrs:{placement:"bottom"},on:{command:_vm.handleButton}},[_c("el-button",{staticClass:"pT10 PR20 fc-create-btn mL10 mR10 f13",attrs:{type:"primary"}},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Add"),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"addText"}},[_vm._v("Add Text")]),_c("el-dropdown-item",{attrs:{command:"addImage"}},[_vm._v("Add Image")]),_c("el-dropdown-item",{attrs:{command:"addComponent"}},[_vm._v("Add Component")]),_c("el-dropdown-item",{attrs:{command:"addSection"}},[_vm._v("Add Group")]),_vm.canShowNewCardBuilder?_c("el-dropdown-item",{attrs:{command:"addCard"}},[_vm._v("Add Card")]):_vm._e()],1)],1)],1),_c("el-button",{staticClass:"plain f13",staticStyle:{height:"35px !important"},attrs:{size:"medium"},on:{click:function($event){return _vm.cancel()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.cancel"))+" ")]),_c("el-button",{staticClass:"setup-el-btn mR10 f13",staticStyle:{height:"35px !important"},attrs:{size:"medium",type:"primary",disabled:_vm.dashboardSave},on:{click:_vm.saveDashboard}},[_vm._v(_vm._s(_vm.dashboardSave?"Saving":_vm.$t("panel.dashboard.save")))])],1)])])]),_c("div",{staticClass:"row",staticStyle:{position:"relative"}},[_c("div",{staticClass:"col-12 container-section",style:_vm.getHeight},[_c("el-row",{staticClass:"height-100"},[_vm.dashboardTabId&&_vm.dashboardTabContexts&&_vm.dashboardTabContexts.length>0?_c("div",[2===_vm.dashboardOptions.dashboardTabPlacement?_c("el-col",{attrs:{span:4}},[_c("vertical-tab-selector",{attrs:{tabsList:_vm.dashboardTabContexts,currentTabId:_vm.dashboardTabId,isEditor:_vm.editMode},on:{toggleDashboardTabEditor:_vm.toggleDashboardTabEditor,changeDashboardTabId:_vm.changeDashboardTabId}})],1):_vm._e(),1===_vm.dashboardOptions.dashboardTabPlacement?_c("el-col",{attrs:{span:24}},[_c("dashboard-top-tab",{attrs:{edit:!0,dashboardTabContexts:_vm.dashboardTabContexts,dashboardTabId:_vm.dashboardTabId},on:{toggleDashboardTabEditor:_vm.toggleDashboardTabEditor,changeDashboardTabId:_vm.changeDashboardTabId}})],1):_vm._e()],1):_vm._e(),_c("el-col",{staticClass:"height-100",attrs:{span:_vm.tabsEnabled?20:24}},[_c("div",{staticClass:"height100 scrollable dashboardmainlayout"},[_vm.loading||!_vm.dashboardLayout||_vm.dashboardTabLoading?_c("cube-loader"):_c("div",{staticClass:"dashboard-container edit-dashboard-container gridstack-container",class:{editmode:_vm.editMode}},[1==_vm.showGridstackComponent?_c("GridstackLayout",{ref:"gridstack",staticClass:"gridstack-layout",attrs:{margin:"5px",layout:_vm.dashboardLayout,float:!1,column:96,rowHeight:"15px",static:"view"==_vm.viewOrEdit,minRows:12,disableOneColumnMode:!0},on:{sectionHeightChanged:_vm.adjustSectionHeight,"update:layout":function($event){_vm.dashboardLayout=$event}}},_vm._l(_vm.dashboardLayout,(function(item){return _c("GridstackItem",{key:item.id,staticClass:"dashboard-f-widget",class:{"gridstack-group":"section"==item.type},attrs:{"item-content-style":_vm.sectionStyle[item.id],x:item.x,y:item.y,w:item.w,h:item.h,id:item.id,noResize:item.hasOwnProperty("children")||!!_vm.widgetConfigMap.hasOwnProperty(item.id)&&_vm.widgetConfigMap[item.id].noResize,itemContentCustomClass:["shadow-widget"]}},[item.hasOwnProperty("children")?_c("SectionContainer",{attrs:{section:item,viewOrEdit:_vm.viewOrEdit},on:{clone:function($event){return _vm.cloneSection(item.id)},removeSection:function($event){return _vm.deleteWidget(item.id)},editSection:function($event){return _vm.editSection(item.id)},addWidgetToSection:function(widgetType){_vm.addWidgetToSection(item.id,widgetType)},resizeSection:_vm.resizeSection}},[_c("GridstackSection",{attrs:{id:item.id,item:item}},_vm._l(item.children,(function(child){return _c("GridstackItem",{key:child.id,attrs:{id:child.id,w:child.w,h:child.h,x:child.x,y:child.y,noResize:child.hasOwnProperty("children")||!!_vm.widgetConfigMap.hasOwnProperty(child.id)&&_vm.widgetConfigMap[child.id].noResize,itemContentCustomClass:["shadow-widget"]}},[_c("widget-wrapper",{attrs:{updateWidget:_vm.updateWidget,parentId:item.id,groupList:_vm.groupList,loadImmediately:_vm.loadImmediately,isLazyDashboard:_vm.isLazyDashboard,hideTimelineFilterInsideWidget:!1,item:child,widgetConfig:_vm.widgetConfigMap[child.id]||{},viewOrEdit:_vm.viewOrEdit},on:{removeWidget:function($event){return _vm.deleteWidget(child.id)},duplicateWidget:_vm.duplicateWidget}})],1)})),1)],1):[_c("widget-wrapper",{attrs:{parentId:"master",updateWidget:_vm.updateWidget,groupList:_vm.groupList,loadImmediately:_vm.loadImmediately,isLazyDashboard:_vm.isLazyDashboard,item:item,hideTimelineFilterInsideWidget:!1,widgetConfig:_vm.widgetConfigMap[item.id]||{},viewOrEdit:_vm.viewOrEdit},on:{removeWidget:function($event){return _vm.deleteWidget(item.id)},duplicateWidget:_vm.duplicateWidget}})]],2)})),1):_vm._e()],1)],1)])],1)],1)]),_vm.dashboardTabEditorVisibility?_c("Dashboard-tab-dialog-editor",{attrs:{visibility:_vm.dashboardTabEditorVisibility,dashboardObject:_vm.dashboard},on:{"update:visibility":function($event){_vm.dashboardTabEditorVisibility=$event}}}):_vm._e(),_vm.showCardBuilderSetup?_c("new-card-builder",{on:{close:function($event){_vm.showCardBuilderSetup=!1},save:_vm.addCard}}):_vm._e(),_vm.showReportChooser?_c("report-chooser",{attrs:{data:_vm.componentData,reportLoading:_vm.reportLoading},on:{close:function($event){_vm.showReportChooser=!1},resetreportData:function($event){return _vm.resetreportData()},addElement:_vm.addReports,expand:_vm.expand,option:_vm.setoption,setModuleName:_vm.setModuleName}}):_vm._e(),_c("el-dialog",{attrs:{title:"Add Dashboard Folder",visible:_vm.showAddDashboardfolder,width:"30%","before-close":_vm.closeAddDashboard},on:{"update:visible":function($event){_vm.showAddDashboardfolder=$event}}},[_c("div",{staticClass:"height150"},[_c("el-input",{staticClass:"create-dashboard-input-title fc-input-full-border2",attrs:{autofocus:!0,placeholder:"Enter the Folder Name"},model:{value:_vm.newDashboardName,callback:function($$v){_vm.newDashboardName=$$v},expression:"newDashboardName"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeAddDashboard()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addDashbopardFolder()}}},[_vm._v("Save")])],1)]),_vm.showImageEditer?_c("f-photoUploader",{attrs:{dialogVisible:_vm.showImageEditer,editwidget:!1},on:{"update:dialogVisible":function($event){_vm.showImageEditer=$event},"update:dialog-visible":function($event){_vm.showImageEditer=$event},input:function($event){_vm.showImageEditer=!1},"upload-done":_vm.addImageCard,"upload-failed":_vm.imageCardUploadFailed}}):_vm._e(),_vm.showtextcard?_c("text-card-editer",{attrs:{visibility:_vm.showtextcard},on:{"update:visibility":function($event){_vm.showtextcard=$event},add:_vm.addtextcard,close:function($event){_vm.showtextcard=!1}}}):_vm._e(),_vm.showSectionEditor?_c("section-editer",{attrs:{visibility:_vm.showSectionEditor,section:_vm.sectionSelectedForEditing},on:{"update:visibility":function($event){_vm.showSectionEditor=$event},createSection:_vm.createSection,updateSection:_vm.updateSection}}):_vm._e(),_vm.showEnableDashboardModal?_c("enable-dashboard-tabs",{on:{save:function(data){_vm.showEnableDashboardModal=!1,_vm.addNewDashboardTab(data)},close:function(){_vm.dashboardOptions.showTabs=!_vm.dashboardOptions.showTabs,// Since the user press cancel, reset the 'showTabs'.
_vm.showEnableDashboardModal=!1}}}):_vm._e(),_vm.showDisableTabsModal?_c("disable-dashboard-tabs",{attrs:{tabs:_vm.dashboardTabsList},on:{close:function(){_vm.dashboardOptions.showTabs=!_vm.dashboardOptions.showTabs,// Since the user press cancel, reset the 'showTabs'.
_vm.showDisableTabsModal=!1},save:function(data){_vm.showDisableTabsModal=!1,_vm.disableTabs(data)}}}):_vm._e()],1)},staticRenderFns=[],esm_typeof=__webpack_require__(103336),slicedToArray=__webpack_require__(554621),toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),VerticalTabSelector=(__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(169358),__webpack_require__(879288),__webpack_require__(648324),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(970469)),lodash=(__webpack_require__(339772),__webpack_require__(496486)),MoveToMixin={data:function(){return{}},methods:{moveToGroup:function(toGroupId,widgetToBeMoved){var self=this,groups=this.dashboardLayout;
// Remove the widget from its Gridstack grid and push it into the `toGroupId` Gridstack grid.
if("master"==toGroupId)this.deleteWidget(widgetToBeMoved.id),groups.push((0,lodash.cloneDeep)(widgetToBeMoved));else{this.deleteWidget(widgetToBeMoved.id);var sectionIndex=groups.findIndex((function(_ref){var id=_ref.id;return id==toGroupId}));groups[sectionIndex].children.push((0,lodash.cloneDeep)(widgetToBeMoved))}this.$nextTick((function(){var id=widgetToBeMoved.id,_self$findIndexUsingI=self.findIndexUsingId(id),childIndex=_self$findIndexUsingI.childIndex,index=_self$findIndexUsingI.index;
// If the widget has a child index then it must be present inside of a section / group,
if(childIndex>=0){var _self$dashboardLayout,_ref2=null!==(_self$dashboardLayout=self.dashboardLayout[index])&&void 0!==_self$dashboardLayout?_self$dashboardLayout:{},_ref2$collapsed=_ref2.collapsed,collapsed=void 0!==_ref2$collapsed&&_ref2$collapsed;
// The widget has been moved into a section,
// TODO: Expand the section before making the widget vibrate.
// For now if the widget has been moved to a section which is collapsed then don't
// vibrate the widget.
// const keyframes = [
//   {
//     transform: 'scale(1)',
//   },
//   {
//     transform: 'scale(1.05)',
//   },
//   {
//     transform: 'scale(1)',
//   },
//   {
//     transform: 'scale(1.05)',
//   },
//   {
//     transform: 'scale(1)',
//   },
// ]
// const options = {
//   duration: 500,
//   iterations: 2,
// }
if(collapsed){var groupId=self.dashboardLayout[index].id,groupElement=self.$el.querySelector('[gs-id="'.concat(groupId,'"]'));groupElement.scrollIntoView({block:"nearest",behavior:"smooth"})}else{var widgetElement=self.$el.querySelector('[gs-id="'.concat(id,'"]'));widgetElement.scrollIntoView({block:"nearest",behavior:"smooth"})}}}))}},computed:{groupList:function(){var dashboardLayout=this.dashboardLayout,self=this,groupList=dashboardLayout.reduce((function(groupList,section){var type=section.type,id=section.id,name=section.name;return"section"==type&&groupList.push({label:name,groupId:id,action:function(widget){self.moveToGroup(id,widget)},icon:"el-icon-folder-opened"}),groupList}),[{label:"Master",groupId:"master",action:function(widget){self.moveToGroup("master",widget)},icon:"el-icon-folder-opened"}]);return groupList}}},WidgetWrapper=__webpack_require__(560274),api=__webpack_require__(32284),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),CubeLoader=__webpack_require__(144580),TextCardPopup=__webpack_require__(94505),SectionContainer=__webpack_require__(447413),SectionEditervue_type_template_id_27027882_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:!0,"before-close":_vm.close,"custom-class":"section-settings-dialog","show-close":!1,"close-on-click-modal":!1,"modal-append-to-body":!1}},[_c("span",{staticClass:"section-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._v("Configure Group")]),_c("el-form",{ref:"ruleForm",attrs:{model:_vm.settings,"label-position":"top"}},[_c("p",{staticClass:"dash-section-sub-title"},[_vm._v(" Display options ")]),_c("el-form-item",[_c("p",{staticClass:"dash-section-input-label-txt mT10"},[_vm._v(" Name ")]),_c("el-input",{staticClass:"width612 pR20 fc-input-full-border2",attrs:{placeholder:"Enter name",autofocus:!0},model:{value:_vm.settings.name,callback:function($$v){_vm.$set(_vm.settings,"name",$$v)},expression:"settings.name"}})],1),_c("p",{staticClass:"dash-section-sub-title mT20"},[_vm._v(" Theme ")]),_c("el-form-item",[_c("p",{staticClass:"dash-section-input-label-txt mT10"},[_vm._v(" Background ")]),_c("el-radio-group",{model:{value:_vm.settings.banner_meta.type,callback:function($$v){_vm.$set(_vm.settings.banner_meta,"type",$$v)},expression:"settings.banner_meta.type"}},[_c("el-radio",{staticClass:"fc-radio-btn f13",attrs:{label:"color"}},[_vm._v("Color")]),_c("el-radio",{staticClass:"fc-radio-btn f13",attrs:{label:"banner"}},[_vm._v("Banner")])],1)],1),"banner"==_vm.bannerType?_c("el-form-item",[_c("banner-picker",{model:{value:_vm.settings.banner_meta.banner,callback:function($$v){_vm.$set(_vm.settings.banner_meta,"banner",$$v)},expression:"settings.banner_meta.banner"}})],1):_vm._e(),"color"==_vm.bannerType?_c("el-form-item",[_c("color-picker",{model:{value:_vm.settings.banner_meta.color,callback:function($$v){_vm.$set(_vm.settings.banner_meta,"color",$$v)},expression:"settings.banner_meta.color"}})],1):_vm._e()],1),_c("span",{staticClass:"dash-section-footer-btn",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"mL10 dialog-btn confirm-btn",attrs:{size:"medium",type:"el-button  el-button--primary"},on:{click:_vm.save}},[_vm._v("Save")]),_c("el-button",{staticClass:"mR10 dialog-btn cancel-btn",attrs:{size:"medium"},on:{click:_vm.close}},[_vm._v(" Cancel ")])],1)],1)},SectionEditervue_type_template_id_27027882_scoped_true_staticRenderFns=[],ColorPickervue_type_template_id_075eb9f1_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"picker-container pB10"},_vm._l(_vm.colors,(function(tile){return _c("div",{key:tile.label,staticClass:"picker-color",class:{"active-color":tile.color==_vm.color.color},style:{"background-color":tile.color},on:{click:function($event){return _vm.changeColor(tile)}}})})),0)},ColorPickervue_type_template_id_075eb9f1_scoped_true_staticRenderFns=[],validation=__webpack_require__(990260),ColorPickervue_type_script_lang_js={model:{prop:"color",event:"click"},props:{color:{type:Object,required:!0}},created:function(){this.setDefaultColor()},data:function(){return{colors:[{label:"blue",color:"#406dce",background:"#FAFBFF"},{label:"orange",color:"#e9913b",background:"#FFFDFB"},{label:"olive-green",color:"#4a798c",background:"#F9FDFF"},{label:"red",color:"#ff6c6a",background:"#FFF7F7"},{label:"green",color:"#458462",background:"#F9FFFB"},{label:"purple",color:"#bc5bb1",background:"#FFFAFE"},{label:"voilet",color:"#644d9e",background:"#FBF9FF"},{label:"light-green",color:"#70b599",background:"#F4FFFA"}]}},methods:{setDefaultColor:function(){var self=this,selectedColor=this.colors.find((function(color){return color.label=self.color.label}));if((0,validation/* isEmpty */.xb)(selectedColor)){var _this$colors=(0,slicedToArray/* default */.Z)(this.colors,1),firstColor=_this$colors[0];this.changeColor(firstColor)}},changeColor:function(color){this.$emit("click",color)}}},groups_ColorPickervue_type_script_lang_js=ColorPickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(groups_ColorPickervue_type_script_lang_js,ColorPickervue_type_template_id_075eb9f1_scoped_true_render,ColorPickervue_type_template_id_075eb9f1_scoped_true_staticRenderFns,!1,null,"075eb9f1",null)
/* harmony default export */,ColorPicker=component.exports,BannerPickervue_type_template_id_9b9e07ec_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-radio-group",{model:{value:_vm.selectedBanner,callback:function($$v){_vm.selectedBanner=$$v},expression:"selectedBanner"}},_vm._l(_vm.banners,(function(banner){return _c("el-row",{key:banner.label,staticClass:"banner-input"},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:banner.label},on:{change:function($event){return _vm.updateBanner(banner)}}},[_c("div",{staticClass:"banner",style:{"background-image":"url("+__webpack_require__(4307)("./"+banner.label+".svg")+")","background-size":"cover"}})])],1)})),1)},BannerPickervue_type_template_id_9b9e07ec_scoped_true_staticRenderFns=[],FIRST_ITEM_INDEX=0,BannerPickervue_type_script_lang_js={model:{prop:"banner",event:"change"},props:{banner:{type:Object,required:!0}},created:function(){this.setDefaultBanner()},data:function(){return{banners:[{label:"voilet",borderColor:"#bc5bb1",backgroundColor:"#FBF9FF"},{label:"orange",borderColor:"#e9913b",backgroundColor:"#FFFDFB"},{label:"teal",borderColor:"#4a798c",backgroundColor:"#F9FDFF"},{label:"red",borderColor:"#ff6c6a",backgroundColor:"#FFF7F7"},{label:"dark-green",borderColor:"#458462",backgroundColor:"#F9FFFB"},{label:"purple",borderColor:"#644d9e",backgroundColor:"#FFFAFE"},{label:"light-green",borderColor:"#70b599",backgroundColor:"#F4FFFA"},{label:"blue",borderColor:"#487cd8",backgroundColor:"#FAFBFF"}],selectedBanner:{}}},methods:{updateBanner:function(banner){this.$emit("change",banner)},setDefaultBanner:function(){var _banners$find,banner=this.banner,banners=this.banners,_ref=null!==(_banners$find=banners.find((function(b){return(0,lodash.isEqual)(b,banner)})))&&void 0!==_banners$find?_banners$find:{},label=_ref.label;(0,validation/* isEmpty */.xb)(label)?this.selectedBanner=banners[FIRST_ITEM_INDEX].label:this.selectedBanner=label}}},groups_BannerPickervue_type_script_lang_js=BannerPickervue_type_script_lang_js,BannerPicker_component=(0,componentNormalizer/* default */.Z)(groups_BannerPickervue_type_script_lang_js,BannerPickervue_type_template_id_9b9e07ec_scoped_true_render,BannerPickervue_type_template_id_9b9e07ec_scoped_true_staticRenderFns,!1,null,"9b9e07ec",null)
/* harmony default export */,BannerPicker=BannerPicker_component.exports,SectionEditervue_type_script_lang_js={components:{ColorPicker:ColorPicker,BannerPicker:BannerPicker},props:{visibility:{type:Boolean,required:!0},section:{type:Object,required:!0,default:function(){return{name:"Title",desc:"Description",x:0,y:2,w:96,h:20,minW:96,
// link: {
//   linkToDashboard: false,
//   dashboard: '',
// },
maxW:96,type:"section",collapsed:!1,banner_meta:{type:"color",color:{label:"blue",color:"#406dce",background:"#E9F0FF"},banner:{label:"voilet",borderColor:"#bc5bb1",backgroundColor:"#FBF9FF"}},children:[]}}}},data:function(){return{triggerTypeList:[],settings:{}}},computed:{bannerType:function(){var type=this.settings.banner_meta.type;return null!==type&&void 0!==type?type:""},isNewSection:function(){
// New sections don't have id (Create mode), but the already existing sections have id (Edit mode).
var id=this.section.id;return!id}},created:function(){this.settings=(0,lodash.cloneDeep)(this.section)},methods:{save:function(){var isNewSection=this.isNewSection,settings=this.settings;isNewSection?this.$emit("createSection",settings):this.$emit("updateSection",settings),this.close()},close:function(){this.$emit("update:visibility",!1)}}},groups_SectionEditervue_type_script_lang_js=SectionEditervue_type_script_lang_js,SectionEditer_component=(0,componentNormalizer/* default */.Z)(groups_SectionEditervue_type_script_lang_js,SectionEditervue_type_template_id_27027882_scoped_true_render,SectionEditervue_type_template_id_27027882_scoped_true_staticRenderFns,!1,null,"27027882",null)
/* harmony default export */,SectionEditer=SectionEditer_component.exports,dashboard=__webpack_require__(292325),ReportHelper=__webpack_require__(507815),DateHelper=__webpack_require__(281230),FPhotoUploader=__webpack_require__(363256),vuex_esm=(__webpack_require__(212826),__webpack_require__(162506),__webpack_require__(420629)),DashboardHelper={data:function(){return{backupDashboard:{},dashboardLayouts:{},dashboardTabforWidgets:null,newDashboardTabName:null,EnableDashboardOptions:!1,disableDashboardOptions:!1,copyallWidgets:!1,dashboardOptions:{showTabs:!1,dashboardTabPlacement:2},reportLoading:!1,chooseFolderPopover:!1,showAddDashboardfolder:!1,dashboardSave:!1,newDashboardName:"",assetCardData:null,buildingCardData:null,dashboardFolderQuery:"",kpiCard:null,assetcardEdit:!1,showFcuCardDialog:!1,showAlarmbarCardDialog:!1,showBooleanCardDialog:!1,fcuCardData:null,booleancardData:null,alarmcardData:null,cardToLayoutMap:{AHU:{w:12,h:20},LIGHT:{w:12,h:12},PUMP:{w:12,h:12},PUMP1:{w:12,h:12},WATER_TANK:{w:12,h:12},HVAC:{w:16,h:20},HVAC2:{w:12,h:12},HVAC3:{w:12,h:12},HVAC4:{w:20,h:24},HVAC5:{w:20,h:24},HVAC6:{w:20,h:24},HVAC7:{w:20,h:24},HVAC8:{w:20,h:24},HVAC9:{w:20,h:24},HVAC10:{w:20,h:24}}}},created:function(){this.$store.dispatch("loadAssetCategory")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategoryPickList"])),{},{tabsEnabled:function(){var dashboardTabContexts=this.dashboardTabContexts,dashboardOptions=this.dashboardOptions;return!(!dashboardTabContexts||!dashboardTabContexts.length||2!==dashboardOptions.dashboardTabPlacement)},bglayout:function(){for(var layout=[],prevX=0,prevY=1,i=0;i<=240;i++){var l={x:prevX,y:prevY,w:1,h:1,i:i.toString()};prevX+=1,prevX>24&&(prevX=0,prevY+=1),layout.push(l)}return layout},filteredDashboardList:function(){var _this=this;return this.dashboardFolderQuery&&""!==this.dashboardFolderQuery?this.dashboardFolderList.filter((function(rt){return rt.name.toLowerCase().includes(_this.dashboardFolderQuery.toLowerCase())})):this.dashboardFolderList}}),methods:{reset_uid:function(widgets){var _step,list=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(widgets);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _widget$widget,widget=_step.value,newId=this.get_uid();if(widget.id=newId,null!==widget&&void 0!==widget&&null!==(_widget$widget=widget.widget)&&void 0!==_widget$widget&&_widget$widget.id&&(widget.widget.id=newId),"section"==(null===widget||void 0===widget?void 0:widget.type)){var _step2,children=widget.children,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(children);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _child$widget,child=_step2.value,newChildId=this.get_uid();child.id=newChildId,null!==child&&void 0!==child&&null!==(_child$widget=child.widget)&&void 0!==_child$widget&&_child$widget.id&&(child.widget.id=newChildId)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}list.push(widget)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return list},changeWidgetsAndSave:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var self,_yield$_this2$fetchDa,data,error,_data$dashboardJson$,_data$dashboardJson$2,widgets;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return self=_this2,_context.next=3,_this2.fetchDashboardUsingLinkName();case 3:if(_yield$_this2$fetchDa=_context.sent,data=_yield$_this2$fetchDa.data,error=_yield$_this2$fetchDa.error,error){_context.next=15;break}return widgets=self.deserializeWidgets(null!==(_data$dashboardJson$=null===data||void 0===data||null===(_data$dashboardJson$2=data.dashboardJson[0])||void 0===_data$dashboardJson$2?void 0:_data$dashboardJson$2.children)&&void 0!==_data$dashboardJson$?_data$dashboardJson$:[]),_context.next=10,self.saveTab({redirect:!1,widgets:widgets});case 10:return _context.next=12,self.loadDashboard();case 12:self.dashboardLayouts={},// Clear tabs cache.
_context.next=16;break;case 15:self.$message.error(error);case 16:case"end":return _context.stop()}}),_callee)})))()},disableTabs:function(data){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var self,_ref,tabId,copyAllWidgets,_yield$_this3$fetchDa,_data,error,_data$dashboardTabCon,_ref2,_ref2$clientWidgetJso,clientWidgetJson,_error$message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(self=_this3,_ref=null!==data&&void 0!==data?data:{},tabId=_ref.toTab,copyAllWidgets=_ref.copyAllWidgets,// Name of the tab the contents of which needs to be copied to the
// main dashboard since we are disabling the tabs... This is lame
// feature since we only are able to select 1 dashboard tab...
_this3.widgetsToCopy=[],!copyAllWidgets){_context2.next=21;break}if(tabId!=_this3.dashboardTabId){_context2.next=9;break}
// current tab id == selected tab id?
_this3.widgetsToCopy=_this3.reset_uid((0,lodash.cloneDeep)(_this3.dashboardLayout)),_context2.next=21;break;case 9:if(!(tabId in _this3.dashboardLayouts)){_context2.next=14;break}
// User might have switch between multiple tabs, the tab data might be in the cache!
_this3.widgetsToCopy=_this3.reset_uid((0,lodash.cloneDeep)(_this3.dashboardLayouts[tabId])),_context2.next=21;break;case 14:return _context2.next=16,_this3.fetchDashboardTab(tabId);case 16:_yield$_this3$fetchDa=_context2.sent,_data=_yield$_this3$fetchDa.data,error=_yield$_this3$fetchDa.error,error?self.$message.error(null!==(_error$message=error.message)&&void 0!==_error$message?_error$message:"Error Occurred"):(_ref2=null!==(_data$dashboardTabCon=null===_data||void 0===_data?void 0:_data.dashboardTabContext)&&void 0!==_data$dashboardTabCon?_data$dashboardTabCon:{},_ref2$clientWidgetJso=_ref2.clientWidgetJson,clientWidgetJson=void 0===_ref2$clientWidgetJso?[]:_ref2$clientWidgetJso,self.widgetsToCopy=self.reset_uid(self.deserializeWidgets((0,lodash.cloneDeep)(clientWidgetJson))));case 21:return _context2.next=23,self.changeWidgetsAndSave();case 23:case"end":return _context2.stop()}}),_callee2)})))()},validateFolder:function(){return this.dashboardFolderList.length,null!==this.selectedDashoardFolder.name||(this.$message({message:"Enter Dashboard folder",type:"error"}),!1)},removeWidgets:function(dasthboardlayout){return dasthboardlayout.filter((function(widget){if(widget&&widget.w&&widget.h)return widget}))},prepareDashboardTab:function(dashboardLayout,dashboardTabId,dashboardTabName){var self=this;this.dashboardSave=!0;var dashboardWidgets=self.getDashboardWidgets(dashboardLayout),dashboardObj={tabId:dashboardTabId,tabEnabled:self.dashboardOptions.showTabs,dashboardName:dashboardTabName,linkName:self.dashboardLink,dashboardWidgets:dashboardWidgets,dashboardFolderId:self.dashboard.dashboardFolderId?self.dashboard.dashboardFolderId:null};return dashboardObj},updateDashboardTabId:function(dashboards,dashboardTabId){var _this4=this;return dashboardTabId?(dashboards.forEach((function(rt){_this4.$set(rt,"dashboardTabId",dashboardTabId)})),dashboards):(dashboards.forEach((function(rt){_this4.$set(rt,"dashboardTabId",_this4.dashboardTabId)})),dashboards)},addNewDashboardTab:function(data){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var self,_ref3,tabName,copyAllWidgets,_yield$API$post,error,mainDashboardWidgets,_error$message2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
// There were no tabs, so we showed the user a modal,
// asked him to create a tab...
return self=_this5,_ref3=null!==data&&void 0!==data?data:{},tabName=_ref3.tabName,copyAllWidgets=_ref3.copyAllWidgets,_context3.next=4,api/* API */.bl.post("dashboard/addDashboardTab",{dashboardTabContext:{name:tabName,sequence:1,dashboardId:_this5.dashboard.id}});case 4:if(_yield$API$post=_context3.sent,error=_yield$API$post.error,!(0,validation/* isEmpty */.xb)(error)){_context3.next=17;break}
// Now that a single tab has been created, enable dashboard tabs...
return mainDashboardWidgets=(0,lodash.cloneDeep)(self.dashboardLayout),_context3.next=10,_this5.saveTab({redirect:!1});case 10:return _context3.next=12,_this5.loadDashboard();case 12:self.widgetsToCopy=[],copyAllWidgets&&(
// If copyAllWidgets is true, then copy all the widgets present in the dashboard
// to the dashboard tab...
// Push the widgets stored in mainDashboardWidgets
// into  dashboardLayout (the current tabs's layout).
self.widgetsToCopy=self.reset_uid(mainDashboardWidgets)),_this5.$message.success("Dashboard Tab Added Successfully"),_context3.next=18;break;case 17:_this5.$message.error(null!==(_error$message2=error.message)&&void 0!==_error$message2?_error$message2:"Error Occured");case 18:case"end":return _context3.stop()}}),_callee3)})))()},loadEmptyDashboard:function(){var _this6=this,layout=this.dashboardLayout;this.$http.get("/dashboard/".concat(this.dashboardLink)).then((function(response){if(response.data){_this6.dashboardTabContexts=response.data.dashboardJson[0].tabs,_this6.dashboard=response.data.dashboardJson[0],_this6.dashboardTabsList=[];var tabId=-1;if(_this6.dashboardTabContexts){var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(_this6.dashboardTabContexts);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var tab=_step3.value;if(_this6.newDashboardTabName&&_this6.newDashboardTabName===tab.name&&1===tab.sequence&&(tabId=tab.id,_this6.selectedTabId=tabId),_this6.dashboardTabsList.push({id:tab.id,name:tab.name,expand:!1}),tab.childTabs&&tab.childTabs.length>0){var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(tab.childTabs);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var childTab=_step4.value;_this6.newDashboardTabName&&_this6.newDashboardTabName===childTab.name&&1===childTab.sequence&&(tabId=tab.id,_this6.selectedTabId=tabId),_this6.dashboardTabsList.push({id:childTab.id,name:childTab.name})}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}if(_this6.newDashboardTabName)_this6.$router.push({query:{create:_this6.$route.query.create,tab:tabId}}),layout.forEach((function(rt){rt.dashboardTabId=tabId})),_this6.dashboardLayout=layout;else if(_this6.dashboardTabsList.length){var _tabId=_this6.dashboardTabsList[0].id;_this6.$router.push({query:{create:_this6.$route.query.create,tab:_tabId}})}}else if(-1===tabId){var query=_this6.$route.query,_ref4=query||{},appId=_ref4.appId;if((0,validation/* isEmpty */.xb)(appId))_this6.$router.push(_this6.newconstractUrl());else{var url="/app/newdashboardmanager";_this6.$router.push(url)}}}})).catch((function(error){_this6.$message.error("Error Occured")}))},saveDisabledDashboardOptions:function(){var copyallWidgets=this.copyallWidgets,dashboardTabforWidgets=this.dashboardTabforWidgets,dashboardlayout=(this.newDashboardTabName,null);copyallWidgets&&dashboardTabforWidgets?(Object.keys(this.dashboardLayouts).length&&dashboardTabforWidgets!==this.dashboardTabId&&this.dashboardLayouts[dashboardTabforWidgets]?(dashboardlayout=this.dashboardLayouts[dashboardTabforWidgets],this.dashboardlayout=dashboardlayout):dashboardTabforWidgets!==this.dashboardTabId&&this.getDashboardTabWidgets(dashboardTabforWidgets),this.dashboardLayouts={},this.setIdNull(),this.dashboardTabContexts=null):(this.getDashboardDefualtWidget(),this.removeTabQuerry(),this.setEmptyTab()),this.closeDashboardOption(!0)},removeTabQuerry:function(){this.$router.push({query:{create:this.$route.query.create}})},setEmptyTab:function(){this.dashboardLayouts={},this.dashboardLayout=[],this.dashboardTabContexts=[]},getDashboardDefualtWidget:function(){var _this7=this;this.dashboardTabLoading=!0,this.$http.get("/dashboard/"+this.dashboard.linkName).then((function(response){if(response.data){var dashboard=response.data.dashboardJson[0].children;_this7.$set(_this7.dashboard,"children",dashboard),_this7.prepareDashboardLayout()}_this7.dashboardTabLoading=!1})).catch((function(){_this7.dashboardTabLoading=!1}))},setIdNull:function(){this.dashboardLayout.forEach((function(rt){rt.widget&&rt.widget.id&&(rt.widget.id=-1)}))},beforeCloseDashboardOption:function(){
// this.dashboardOptions.showTabs = !this.dashboardOptions.showTabs
},toggleTabsVisibility:function(){var showTabs=this.dashboardOptions.showTabs;showTabs?this.setDefaultEnableDashboardTabOptions():
// Tabs is enabled, we are disabling it, show a modal...
this.showDisableTabsModal=!0},setDefaultDisableDashboardTabOptions:function(){this.copyallWidgets=!1,this.dashboardTabsList&&this.dashboardTabsList.length&&(this.dashboardTabforWidgets=this.dashboardTabsList[0].id)},setDefaultEnableDashboardTabOptions:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var self,_yield$API$put,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return self=_this8,_context4.next=3,api/* API */.bl.put("/dashboard/enableDashboardTabs",{dashboardId:_this8.dashboard.id});case 3:if(_yield$API$put=_context4.sent,data=_yield$API$put.data,error=_yield$API$put.error,!(0,validation/* isEmpty */.xb)(error)){_context4.next=16;break}if(null===data||void 0===data||!data.dashboard){_context4.next=13;break}return _context4.next=10,self.loadDashboard();case 10:self.$message.success("Dashboard Tab Enabled Successfully"),_context4.next=14;break;case 13:
// -> Tabs enabled
self.showEnableDashboardModal=!0;case 14:_context4.next=17;break;case 16:self.$message.error(null!==error&&void 0!==error?error:"Error Occured");case 17:case"end":return _context4.stop()}}),_callee4)})))()},closeAddDashboard:function(){this.showAddDashboardfolder=!1},addDashbopardFolderNew:function(){var _this9=this,newDashboardName=this.newDashboardName;this.closeAddDashboard();var reportFolderObj={name:newDashboardName},query=this.$route.query,_ref5=query||{},appId=_ref5.appId;!(0,validation/* isEmpty */.xb)(appId)&&appId>0&&(reportFolderObj.appId=appId),this.$http.post("dashboard/addDashboardFolder?moduleName=workorder",{dashboardFolderContext:reportFolderObj}).then((function(response){var dashboardFolderContext=response.data.dashboardFolderContext;_this9.selectedDashoardFolder.name=newDashboardName,_this9.selectedDashoardFolder.id=dashboardFolderContext.id,_this9.pushDashboardFolder(dashboardFolderContext),_this9.newDashboardName=null})).catch((function(){
// this.$message({
//   message: 'Dashboard Folder not saved',
//   type: 'error',
// })
}))},pushDashboardFolder:function(folder){folder.displayOrder=this.dashboardFolderList.length+1,this.dashboardFolderList.push(folder)},addDashbopardFolder:function(){this.addDashbopardFolderNew(),this.dashbaordFolderName=this.newDashboardName,this.selectedDashoardFolder.name=this.dashbaordFolderName,this.showAddDashboardfolder=!1},handleButton:function(command){var sectionIndex=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.sectionIndex=sectionIndex,// Note down the index, we will push the widget to the correct index later...
"addCard"===command?this.showCardBuilderSetup=!0:"addText"===command?this.showtextcard=!0:"addImage"===command?this.showImageEditer=!0:"addComponent"===command?this.showReportChooser=!0:"addSection"==command&&(
// Show the section editer first, so that the user can customize the section
// before adding it to the dashboard.
this.sectionSelectedForEditing=void 0,this.showSectionEditor=!0)},updateSection:function(section){var id=section.id,index=this.dashboardLayout.findIndex((function(s){return s.id==id}));this.$set(this.dashboardLayout,index,(0,lodash.cloneDeep)(section))},cloneSection:function(sectionId){var self=this,sectionCopy=(0,lodash.cloneDeep)(this.dashboardLayout.find((function(s){return s.id==sectionId}))),children=sectionCopy.children;children.forEach((function(widget){widget["id"]=self.get_uid()})),sectionCopy["id"]=this.get_uid(),this.dashboardLayout.push(sectionCopy)},editSection:function(id){var index=this.dashboardLayout.findIndex((function(s){return s.id==id}));this.sectionSelectedForEditing=this.dashboardLayout[index],this.showSectionEditor=!0},createSection:function(section){var _ref6=null!==section&&void 0!==section?section:{},id=_ref6.id;id||(section["id"]=this.get_uid(),this.dashboardLayout.push(section))},addWidgetToSection:function(id,option){var index=this.dashboardLayout.findIndex((function(w){return w.id==id}));this.handleButton(option,index)},setoption:function(option){this.option=option},getWidgetNextPosition:function(w,h,i){var maxY=0,maxX=0;this.dashboardLayout.forEach((function(layout){var y=layout.y;y>maxY&&(maxY=y)}));var ymaxLayouts=this.dashboardLayout.filter((function(layout){var y=layout.y;if(y===maxY)return layout}));ymaxLayouts.forEach((function(layout){var x=layout.x;x>maxX&&(maxX=x)}));var layout=ymaxLayouts.find((function(layout){var x=layout.x;if(x===maxX)return layout})),l={x:0,y:1/0,i:i};if(0===this.dashboardLayout.length&&(l={x:0,y:0,i:i}),layout){var nextX=layout.x+layout.w;nextX>96||nextX+w>96?(l.x=0,l.y=layout.y+layout.h):(l.x=nextX,l.y=layout.y+w)}return l},getReportWidget:function(data,layout,cardName){var position={};if("cards"===this.option&&"textcard"===cardName)position=this.getWidgetNextPosition(4,4,this.dashboardlength+""),layout.x=position.x,layout.y=position.y,layout.widget.layout.x=position.x,layout.widget.layout.y=position.y,layout.widget.dataOptions.metaJson=this.textcardData;else if("cards"===this.option&&"imagecard"===cardName)position=this.getWidgetNextPosition(4,4,this.dashboardlength+""),layout.x=position.x,layout.y=position.y,layout.widget.layout.x=position.x,layout.widget.layout.y=position.y;else if("view"===this.option){var ctype="view";position=this.getWidgetNextPosition(this.getMinW(ctype),this.getMinH(ctype),this.dashboardlength+"");var uid=this.get_uid();layout={id:uid,x:position.x,y:position.y,w:this.getMinW("view"),h:this.getMinH("view"),widget:{layout:{width:this.getMinW("view"),x:position.x,y:position.y,position:this.dashboardlength,height:this.getMinH("view")},header:{subtitle:"today",title:data.displayName,export:!1},dataOptions:{dataurl:"",refresh_interval:100,viewName:data.name,name:"dummy",moduleName:data.moduleName},type:"view",id:uid},label:data.displayName,minW:this.getMinW("view"),minH:this.getMinH("view")}}else if("graphics"===this.option){var _ctype="graphics";position=this.getWidgetNextPosition(this.getMinW(_ctype),this.getMinH(_ctype),this.dashboardlength+""),layout={id:String(data.id),x:position.x,y:position.y,w:this.getMinW("graphics"),h:this.getMinH("graphics"),widget:{layout:{width:this.getMinW("graphics"),x:0,y:1/0,position:this.dashboardlength,height:this.getMinH("graphics")},header:{subtitle:"today",title:data.name,export:!1},dataOptions:{dataurl:"",refresh_interval:100,webUrl:data.url,name:"dummy"},type:"graphics",graphicsId:data.id},minW:this.getMinW("graphics"),minH:this.getMinH("graphics"),label:data.label}}else if(data.widget){position=this.getWidgetNextPosition(this.getMinW(data.widget.type),this.getMinH(data.widget.type),this.dashboardlength+"");var _uid=this.get_uid();layout={id:_uid,x:position.x,y:position.y,w:this.getMinW(data.widget.type),h:this.getMinH(data.widget.type),widget:{layout:{width:this.getMinW(data.widget.type),x:position.x,y:position.y,position:this.dashboardlength,height:this.getMinW(data.widget.type)},header:data.widget.header,dataOptions:data.widget.dataOptions,id:_uid,reportId:data.widget.dataOptions.reportId,type:data.widget.type,name:""},minW:this.getMinW(data.widget.type),minH:this.getMinH(data.widget.type),moved:!1}}else{var type=data.type,_ctype2="line";position=this.getWidgetNextPosition(this.getMinW(_ctype2),this.getMinH(_ctype2),this.dashboardlength+"");var _uid2=this.get_uid();layout={id:_uid2,x:position.x,y:position.y,w:this.getMinW(_ctype2),h:this.getMinH(_ctype2),widget:{layout:{width:this.getMinW(_ctype2),x:position.x,y:position.y,position:this.dashboardlength,height:this.getMinW(_ctype2)},header:{title:data.name},dataOptions:{newReportId:data.id,newReport:this.newLayout?data:this.getCurrentModule()&&"workorder"===this.getCurrentModule().module||4===type?{type:type}:null},id:_uid2,newReportId:data.id,type:"chart",name:""},minW:this.getMinW(_ctype2),minH:this.getMinH(_ctype2),moved:!1},"chart"==layout.widget.type&&(layout.widget["widgetSettings"]={showHelpText:!1,excludeDbFilters:!1},layout.widget["helpText"]=""),4===type&&(layout.widget.dataOptions["reportTemplate"]=data.reportTemplate)}return layout},addColorMapElemnt:function(){this.readingCard.colorMapConfig["NUMBER"].push({label:null,min:null,max:null,textColor:"#000",bgColor:"#fff"})},removeColorMapElemnt:function(index){this.readingCard.colorMapConfig["NUMBER"].splice(index,1)},addColorMapElemntforDecimal:function(){this.readingCard.colorMapConfig["DECIMAL"].push({label:null,min:null,max:null,textColor:"#000",bgColor:"#fff"})},removeColorMapElemntDecimal:function(index){this.readingCard.colorMapConfig["DECIMAL"].splice(index,1)},saveBooleancard:function(data){this.booleancardData=data,this.addNewelemnt(),this.isDraging=!1},saveAlarmcard:function(data){this.alarmcardData=data,this.addNewelemnt(),this.isDraging=!1},addAssetCard:function(data){this.assetCardData=data,this.addNewelemnt(),this.isDraging=!1,this.showCardBuilder=!1},cardBuilder:function(data){this.kpiCard=data,this.addNewelemnt(),this.isDraging=!1,this.showkpiCard=!1,this.showkpitargetCard=!1},setBuildingCardData:function(data){this.buildingCardData=data,this.addNewelemnt(),this.isDraging=!1,this.dialogVisible=!1},updateKpiCard:function(data){this.kpiCard=data,this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.data=data,this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.metaJson=JSON.stringify(data),this.isDraging=!1,this.showkpiCard=!1,this.showkpitargetCard=!1,this.dialogVisible=!1,this.$refs["widget["+this.editwidgetData.index+"]"]&&this.$refs["widget["+this.editwidgetData.index+"]"].length&&this.$refs["widget["+this.editwidgetData.index+"]"][0].refresh()},saveFcuCard:function(data){this.fcuCardData=data,this.addNewelemnt(),this.isDraging=!1},updatFacuCard:function(data){this.isDraging=!1},updateAssetCardData:function(data){this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.metaJson=JSON.stringify(data),this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.readingComboCard=data;var widget=this.$helpers.cloneObject(this.dashboardLayout[this.editwidgetData.index]);widget.h=this.assetCardLayoutChanger(data),this.dashboardLayout.splice(this.editwidgetData.index,1,widget),this.isDraging=!1,this.showCardBuilder=!1,this.assetCardData=null,this.assetcardEdit=!1},editAssetCard:function(data){this.isDraging=!0,this.showCardBuilder=!0,this.assetCardData=data},loadAHUAssets:function(catagoryName){if(this.getAssetCategoryPickList()){var self=this,catagory=this.getAssetCategoryPickList(),catagoryId=null;Object.keys(this.getAssetCategoryPickList()).forEach((function(id){catagory[parseInt(id)]===catagoryName&&(catagoryId=parseInt(id))})),catagoryId&&"catagoryName"!==this.AHUcardCatogry&&this.$util.loadAsset({categoryId:catagoryId}).then((function(response){self.assets=response,self.AHUcardCatogry=catagoryName}))}},getCardSpacificLayout:function(h){var layout={1:4,2:6,3:9,4:12,5:18,6:20,7:22};return layout[h]||4*h},assetCardLayoutChanger:function(assetCardData){if(!assetCardData)return 12;var h=0;if("AHU"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),(assetCardData.templates.runStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),assetCardData.templates.autoStatus.value&&(h+=1),assetCardData.templates.temperature.value&&(h+=1),assetCardData.templates.valveFeedback.value&&(h+=1),(assetCardData.templates.scheduledControl.value||assetCardData.templates.staticControl.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("LIGHT"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),(assetCardData.templates.lightStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),assetCardData.templates.autoStatus.value&&(h+=1),(assetCardData.templates.scheduledControl.value||assetCardData.templates.staticControl.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("PUMP"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),assetCardData.templates.runStatusPercent.value&&(h+=1),(assetCardData.templates.autoStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("PUMP1"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),(assetCardData.templates.runStatus.value||assetCardData.templates.percentage.value)&&(h+=1),(assetCardData.templates.autoStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("WATER_TANK"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),assetCardData.templates.levelPercent.value&&(h+=1),assetCardData.templates.levelPercent.value&&(h+=1),h>1?this.getCardSpacificLayout(h):4;var cardsvalue=["HVAC","HVAC4","HVAC5","HVAC6","HVAC7","HVAC8","HVAC9","HVAC10"];return cardsvalue.includes(assetCardData.cardType)&&assetCardData.templates?(Object.keys(assetCardData.templates).forEach((function(key){assetCardData.templates[key].value&&(h+=1)})),h>1?this.getCardSpacificLayout(h):4):"HVAC2"===assetCardData.cardType&&assetCardData.templates?(assetCardData.templates.name.value&&(h+=1),assetCardData.templates.runStatusValue.value&&(h+=1),assetCardData.templates.temperature.value&&(h+=1),h>1?this.getCardSpacificLayout(h):4):"HVAC3"===assetCardData.cardType&&assetCardData.templates?(assetCardData.templates.name.value&&(h+=1),assetCardData.templates.runStatusValue.value&&(h+=1),assetCardData.templates.autoStatus.value&&(h+=1),assetCardData.templates.valveFeedback.value&&(h+=1),h>1?this.getCardSpacificLayout(h):4):void 0}}},DashboardTopTab=__webpack_require__(534724),DashboardTabDialogEditorvue_type_template_id_e423e05c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-tab-dialog-editor"},[_c("el-dialog",{staticClass:"db-user-filter-manager-dialog",attrs:{visible:_vm.visibility,"show-close":!1,"append-to-body":!0,title:_vm.$t("home.dashboard.tab_manager"),width:"40%","before-close":_vm.closeDialog}},[_c("div",[_c("div",{staticClass:"p20 tab-section"},[_c("draggable",_vm._b({staticClass:"tab-container",on:{change:_vm.updateOrder},model:{value:_vm.dashboardTabList,callback:function($$v){_vm.dashboardTabList=$$v},expression:"dashboardTabList"}},"draggable",_vm.dashboardParentTabDragOptions,!1),_vm._l(_vm.dashboardTabList,(function(parentTab,pIndex){return _c("div",{key:pIndex,staticClass:"mB10 mT15 box-border"},[_c("div",{staticClass:"tab-drag-row pL15",on:{click:function($event){return _vm.toggleExpand(parentTab)}}},[_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_vm.editTabId&&_vm.editTabId===parentTab.id?_c("div",[_c("el-input",{attrs:{placeholder:"Tab name"},on:{blur:function($event){_vm.editTabId=null}},model:{value:parentTab.name,callback:function($$v){_vm.$set(parentTab,"name",$$v)},expression:"parentTab.name"}})],1):_c("div",{staticClass:"mT-auto mB-auto"},[_vm._v(" "+_vm._s(parentTab.name)+" ")]),_c("div",{staticClass:"mL-auto mT-auto mB-auto inline-flex"},[_c("div",{staticClass:"mR10 inline"},[_c("i",{staticClass:"el-icon-edit pointer trash-icon hoverIcon",on:{click:function($event){_vm.editTabId=parentTab.id}}})]),_c("div",{staticClass:"mR10 inline"},[_c("el-popover",{ref:"dynamic"+pIndex,refInFor:!0,attrs:{placement:"bottom",width:"280",trigger:"click","after-enter":_vm.nameChange,"popper-class":"inventory-list-popover-1"}},[_c("div",[_c("el-row",{staticClass:"add-dashboard-popper p20"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Subtab Name :"))]),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.newDashboardTabName,callback:function($$v){_vm.newDashboardTabName=$$v},expression:"newDashboardTabName"}})],1)],1),_c("el-row",[_c("el-button",{staticClass:"modal-btn-save width100",attrs:{loading:_vm.loading.newTab},on:{click:function($event){return _vm.addNewTab(parentTab,pIndex)}}},[_vm._v(_vm._s(_vm.$t("panel.share.ad")))])],1)],1)]),_c("i",{directives:[{name:"popover",rawName:"v-popover",value:"dynamic"+pIndex,expression:"`dynamic${pIndex}`"},{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                      placement: 'top',\n                      animation: 'shift-away',\n                      arrow: true,\n                    }"}],staticClass:"el-icon-plus pL10 hoverIcon",attrs:{title:"Add Sub Tab"}})],1),_c("div",{staticClass:"mR10 inline"},[_c("i",{staticClass:"el-icon-delete pointer trash-icon hoverIcon",on:{click:function($event){return _vm.deleteTab(parentTab,!0)}}})]),parentTab.expand&&parentTab.childTabs&&parentTab.childTabs.length>0?_c("i",{staticClass:"el-icon-arrow-down"}):parentTab.childTabs&&parentTab.childTabs.length>0?_c("i",{staticClass:"el-icon-arrow-right"}):_c("i",{staticClass:"el-icon-arrow-right opacity-0"})])]),parentTab.childTabs&&parentTab.expand?_c("div",[_c("draggable",_vm._b({staticClass:"drag-folder pointer",on:{change:_vm.onDashBoardChildTabChange},model:{value:parentTab.childTabs,callback:function($$v){_vm.$set(parentTab,"childTabs",$$v)},expression:"parentTab.childTabs"}},"draggable",_vm.dashboardChildTabDragOptions,!1),_vm._l(parentTab.childTabs,(function(childTab,chIndex){return _c("div",{key:chIndex,staticClass:"pL15 pL25 tab-drag-row-child"},[_c("div",{staticClass:"task-handle mR10 pointer "},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_vm.editTabId&&_vm.editTabId===childTab.id?_c("div",[_c("el-input",{attrs:{placeholder:"Tab name"},on:{blur:function($event){_vm.editTabId=null}},model:{value:childTab.name,callback:function($$v){_vm.$set(childTab,"name",$$v)},expression:"childTab.name"}})],1):_c("div",{staticClass:"mT-auto mB-auto"},[_vm._v(" "+_vm._s(childTab.name)+" ")]),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_c("div",{staticClass:"mR10 inline-flex"},[_c("i",{staticClass:"el-icon-edit pointer trash-icon hoverIcon mR10",on:{click:function($event){_vm.editTabId=childTab.id}}}),_c("i",{staticClass:"el-icon-delete pointer trash-icon hoverIcon",on:{click:function($event){return _vm.deleteTab(childTab,!1,parentTab)}}})])])])})),0)],1):_vm._e()])})),0),_c("el-popover",{attrs:{placement:"bottom",width:"280",trigger:"click","after-enter":_vm.nameChange,"popper-class":"inventory-list-popover-1"},model:{value:_vm.showdialog,callback:function($$v){_vm.showdialog=$$v},expression:"showdialog"}},[_c("div",{staticClass:"f12 add-text",attrs:{slot:"reference"},slot:"reference"},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Add Tab ")]),_c("div",[_c("el-row",{staticClass:"add-dashboard-popper p20"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Tab Name :"))]),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.newDashboardTabName,callback:function($$v){_vm.newDashboardTabName=$$v},expression:"newDashboardTabName"}})],1)],1),_c("el-row",[_c("el-button",{staticClass:"modal-btn-save width100",attrs:{loading:_vm.loading.newTab},on:{click:function($event){return _vm.addNewTab(!1)}}},[_vm._v(_vm._s(_vm.$t("panel.share.ad")))])],1)],1)])],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.updateTabList()}}},[_vm._v("Save")])],1)])])],1)},DashboardTabDialogEditorvue_type_template_id_e423e05c_staticRenderFns=[],vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),DashboardTabDialogEditorvue_type_script_lang_js={props:["dashboardObject","visibility"],components:{draggable:vuedraggable_umd_default()},data:function(){return{showdialog:!1,showdialog1:!1,editTabId:null,loading:{newTab:!1,initial:!1},saving:!1,dashboardTabList:[],dragOptions:{draggable:this.moveIt?".asd":"",handle:".icon-caret-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},newDashboardTabName:null,moveIt:!0}},mounted:function(){this.constructDashboardTab()},computed:{dashboardChildTabDragOptions:function(){return{group:"dashboardChildTab"}},dashboardParentTabDragOptions:function(){return{group:"dashboardParentTab"}}},methods:{addTabDialog:function(){this.showdialog=!0},closeDialog:function(){this.$emit("update:visibility",!1)},constructDashboardTab:function(){if(this.dashboardObject&&this.dashboardObject.tabEnabled&&this.dashboardObject.tabs){var _step,order=0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.dashboardObject.tabs);try{for(_iterator.s();!(_step=_iterator.n()).done;){var tab=_step.value;this.$set(tab,"expand",!1),this.$set(tab,"edit",!1),this.$set(tab,"sequence",++order)}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.dashboardTabList=this.dashboardObject.tabs}else this.dashboardTabList=[]},addNewTab:function(parentTab,index){var _this=this;this.showdialog=!1,this.showdialog1=!1,index&&(this.$refs["dynamic".concat(index)][0].showPopper=!1);var param={dashboardTabContext:{name:this.newDashboardTabName,sequence:this.dashboardTabList?this.dashboardTabList.length+1:1,dashboardId:this.dashboardObject.id}};parentTab&&parentTab.id>0&&(param.dashboardTabContext["dashboardTabId"]=parentTab.id,param.dashboardTabContext["sequence"]=parentTab.childTabs?parentTab.childTabs.length+1:1),this.loading.newTab=!0,this.$http.post("dashboard/addDashboardTab",param).then((function(response){if(response.data){_this.$message.success("Dashboard Tab Added Successfully");var tabContext=response.data.dashboardTabContext;parentTab?parentTab.childTabs?parentTab.childTabs.push(tabContext):(_this.$set(parentTab,"childTabs",[tabContext]),parentTab.expand=!0):(_this.$set(tabContext,"expand",!1),_this.$set(tabContext,"edit",!1),_this.dashboardTabList.push(tabContext))}else _this.$message.error("Error Occured");_this.newDashboardTabName=null,_this.loading.newTab=!1})).catch((function(error){_this.$message.error("Error Occured"),_this.newDashboardTabName=null,_this.loading.newTab=!1}))},editTabName:function(){this.$message("Edit Tab name")},updateOrder:function(){var order=0;this.dashboardTabList.forEach((function(element){element["sequence"]=++order}))},updateTabList:function(){var _this2=this,tabsContext=this.dashboardTabList;this.closeDialog();var tempContextList=[];if(tabsContext&&tabsContext.length>0){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(tabsContext);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var tab=_step2.value,tempContext={};tempContext["dashboardId"]=tab.dashboardId,tempContext["id"]=tab.id,tempContext["name"]=tab.name,tempContext["sequence"]=tab.sequence,tempContext["dashboardTabId"]=tab.dashboardTabId,tempContextList.push(tempContext)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}this.$http.post("dashboard/updateDashboardTabsList",{dashboardTabContexts:tempContextList}).then((function(response){response.data?_this2.$message.success("Updated Successfully"):_this2.$message.error("Error Occured")})).catch((function(error){_this2.$message.error("Error Occured")}))},deleteTab:function(tabContext,isParent,parentTab){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var param,confirmObj,deleteTabConfirmation;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(isParent&&tabContext.childTabs&&tabContext.childTabs.length>0)){_context.next=4;break}_this3.$message.error("Delete All Child Tabs Before Deleting Parent Tab"),_context.next=10;break;case 4:return param={dashboardTabId:tabContext.id},confirmObj={title:"Delete Tab",message:"Are you sure you want to delete this ?",rbLabel:"Yes, delete",lbLabel:"No, cancel"},_context.next=8,_this3.$dialog.confirm(confirmObj);case 8:deleteTabConfirmation=_context.sent,deleteTabConfirmation&&_this3.$http.post("dashboard/deleteDashboardTab",param).then((function(response){var index;response.data?(_this3.$message.success("Dashboard Tab Deleted Successfully"),isParent?(index=_this3.dashboardTabList.indexOf(tabContext),_this3.dashboardTabList.splice(index,1)):(index=parentTab.childTabs.indexOf(tabContext),parentTab.childTabs.splice(index,1))):_this3.$message.error("Error Occured");_this3.$router.replace("/")})).catch((function(error){_this3.$message.error("Error Occured")}));case 10:case"end":return _context.stop()}}),_callee)})))()},toggleExpand:function(val){val.expand=!val.expand},nameChange:function(){this.newDashboardTabName=null},onDashBoardChildTabChange:function(data){var _this4=this,dashboardTabList=this.dashboardTabList;if(data["moved"]&&data["moved"].element)for(var _loop=function(){var list=dashboardTabList[i];if(list.childTabs&&list.childTabs.find((function(rl){return rl.id===data["moved"].element.id}))){var listdata=[],j=0;list.childTabs.forEach((function(tab){listdata.push({id:tab.id,sequence:j,dashboardTabId:list.id}),j++})),_this4.dashboardTabList=listdata}},i=0;i<dashboardTabList.length;i++)_loop();else if(data["added"]&&data["added"].element)for(var _loop2=function(){var list=dashboardTabList[_i];if(list.childTabs&&list.childTabs.find((function(rl){return rl.id===data["added"].element.id}))){var listdata=[],j=0;list.childTabs.forEach((function(tab){listdata.push({id:tab.id,displayOrder:j,dashboardTabId:list.id}),j++})),_this4.dashboardTabList=listdata}},_i=0;_i<dashboardTabList.length;_i++)_loop2()}}},dashboard_DashboardTabDialogEditorvue_type_script_lang_js=DashboardTabDialogEditorvue_type_script_lang_js,DashboardTabDialogEditor_component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardTabDialogEditorvue_type_script_lang_js,DashboardTabDialogEditorvue_type_template_id_e423e05c_render,DashboardTabDialogEditorvue_type_template_id_e423e05c_staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardTabDialogEditor=DashboardTabDialogEditor_component.exports,CardBuilder=__webpack_require__(606750),CardBuilderDashboardMixinvue_type_script_lang_js={data:function(){return{}},methods:{addCard:function(_ref){var cardContext=_ref.cardContext,_ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$w=_ref2.w,w=void 0===_ref2$w?24:_ref2$w,_ref2$h=_ref2.h,h=void 0===_ref2$h?12:_ref2$h;this.showCardBuilderSetup=!1;var uid=this.get_uid(),widget={id:uid,x:0,y:0,w:w,h:h,minW:w,minH:h,widget:{dataOptions:cardContext,type:"card",id:uid,widgetSettings:{showHelpText:!1},helpText:""}};this.addWidget(widget)}}},card_builder_CardBuilderDashboardMixinvue_type_script_lang_js=CardBuilderDashboardMixinvue_type_script_lang_js,CardBuilderDashboardMixin_component=(0,componentNormalizer/* default */.Z)(card_builder_CardBuilderDashboardMixinvue_type_script_lang_js,CardBuilderDashboardMixin_render,CardBuilderDashboardMixin_staticRenderFns,!1,null,null,null)
/* harmony default export */,CardBuilderDashboardMixin=CardBuilderDashboardMixin_component.exports,router=__webpack_require__(329435),ComponentChooser=__webpack_require__(565304),DashboardComponentMixinsvue_type_script_lang_js={data:function(){return{showReportChooser:!1,textcardData:null}},computed:{componentData:function(){var data={},newReportTree=this.newReportTree,reportTree=this.reportTree,supportedModules=this.supportedModules,customModuleList=this.customModuleList,graphicsList=this.graphicsList,getLicenseEnabledModules=this.getLicenseEnabledModules;return newReportTree&&newReportTree.length&&this.$set(data,"reports",newReportTree),reportTree&&reportTree.length&&this.$set(data,"reportTree",reportTree),supportedModules&&supportedModules.length&&this.$set(data,"supportedModules",supportedModules),customModuleList&&customModuleList.length&&this.$set(data,"customModuleList",customModuleList),graphicsList&&graphicsList.length&&this.$set(data,"graphicsList",graphicsList),getLicenseEnabledModules&&getLicenseEnabledModules.length&&this.$set(data,"getLicenseEnabledModules",getLicenseEnabledModules),data}},methods:{updatetextcard:function(_ref){var textData=_ref.textData,id=_ref.id,_this$findIndexUsingI=this.findIndexUsingId(id),index=_this$findIndexUsingI.index,childIndex=_this$findIndexUsingI.childIndex,widget=null;widget=(0,validation/* isEmpty */.xb)(childIndex)?this.dashboardLayout[index]:this.dashboardLayout[index].children[childIndex],this.$set(widget.widget.dataOptions,"metaJson",textData),this.showtextcard=!1},addtextcard:function(text){var newId=this.get_uid(),widgetCount=this.dashboardLayout.length,widget={i:newId,id:newId,x:0,y:0,w:48,h:24,widget:{layout:{width:48,x:0,y:0,position:widgetCount+1,height:24},header:{subtitle:"today",title:"",export:!1},dataOptions:{dataurl:"",refresh_interval:100,name:"dummy",staticKey:"textcard",metaJson:text},type:"static",id:newId,name:"",widgetSettings:{showHelpText:!1},helpText:""},minW:48,minH:24,moved:!1};this.addWidget(widget),this.showtextcard=!1},addImageCard:function(jsonData){var widgetCount=this.dashboardLayout.length,newId=this.get_uid(),widget={i:newId,id:newId,x:0,y:0,w:24,h:24,widget:{layout:{width:24,x:0,y:0,position:widgetCount+1,height:24},header:{subtitle:"today",title:"",export:!1},dataOptions:{dataurl:"",refresh_interval:100,name:"dummy",staticKey:"imagecard",imagecardDataUrl:null,imagecardData:jsonData},type:"static",id:newId,name:"",widgetSettings:{showHelpText:!1,excludeDbFilters:!1},helpText:""},minW:24,minH:24,moved:!1};this.addWidget(widget),this.showImageEditer=!1},imageCardUploadFailed:function(){this.$message.error("Unable to upload image, please try again later."),this.showImageEditer=!1},addWidget:function(widget){var clonedWidget=(0,lodash.cloneDeep)(widget);this.sectionIndex>=0?this.dashboardLayout[this.sectionIndex].children.push(clonedWidget):this.dashboardLayout.push(clonedWidget)},addReports:function(reports){var _this=this,self=this;(0,validation/* isEmpty */.xb)(reports)||(reports.forEach((function(report){var widgetCount=self.dashboardLayout.length,_report$optionName=report.optionName,reportType=void 0===_report$optionName?"":_report$optionName;if("report"==reportType){
// This covers `Module Widget` and `Analytical widget`, see component choose from dashboardEditer.vue;
var newReportId=report.id,name=report.name,type=report.type,reportTemplate=report.reportTemplate,newId=self.get_uid(),widget={i:newId,x:0,y:0,w:32,h:32,id:newId,widget:{layout:{width:32,x:0,y:0,position:widgetCount+1,
// + 1 since we are calculating before pushing it to the array.
height:32},header:{title:name},dataOptions:{newReportId:newReportId,newReport:report},id:newId,newReportId:newReportId,type:"chart",name:"",widgetSettings:{showHelpText:!1,excludeDbFilters:!1},helpText:""},minW:32,minH:32,moved:!1};4===type&&(
// This is lame... They have monkey patched to support a feature in a random widget.
widget.widget.dataOptions["reportTemplate"]=reportTemplate),self.addWidget(widget)}else if("view"==reportType){
// This covers the `view` widget, see component chooser in dashboardEditer.
var _newId=self.get_uid(),moduleName=report.moduleName,_name=report.name,displayName=report.displayName,_widget={i:_newId,id:_newId,x:0,y:0,w:32,h:32,widget:{layout:{width:32,x:0,y:0,position:widgetCount+1,height:32},header:{subtitle:"today",title:displayName,export:!1},dataOptions:{dataurl:"",refresh_interval:100,viewName:_name,name:"dummy",moduleName:moduleName},type:"view",id:_newId,widgetSettings:{showHelpText:!1},helpText:""},label:displayName,minW:32,minH:32,moved:!1};self.addWidget(_widget)}else if("graphics"==reportType){var label=report.label,id=report.id,_name2=report.name,url=report.url,_widgetCount=_this.dashboardLayout.length,_newId2=self.get_uid(),_widget2={i:_newId2,id:_newId2,x:0,y:0,w:96,h:45,widget:{layout:{width:96,x:0,y:0,position:_widgetCount+1,height:45},header:{subtitle:"today",title:_name2,export:!1},dataOptions:{dataurl:"",refresh_interval:100,webUrl:url,name:"dummy"},type:"graphics",graphicsId:id,widgetSettings:{showHelpText:!1},helpText:""},minW:96,minH:45,label:label,moved:!1};self.addWidget(_widget2)}})),this.$message.success(this.$t("common._common.widget_added_successfully"))),this.sectionIndex=-1},addDashboardElement:function(reports){var _this2=this;if(reports){var index=this.dashboardLayout.length;reports.forEach((function(element){_this2.selectedBuilding=null,_this2.editwidgetData=null,_this2.newDashboardData=element,_this2.drop()})),this.$message.success(this.$t("common._common.widget_added_successfully")),this.scrollToLatestWidget(index)}},scrollToLatestWidget:function(index){var _this3=this;this.$nextTick((function(){setTimeout((function(){for(var elements=document.getElementsByClassName("grid-stack-item-content"),i=index;i<_this3.dashboardLayout.length;i++)elements[i].style.boxShadow="0 2px 4px 4px rgb(219 232 14 / 50%)";document.getElementsByClassName("grid-stack-item-content")[index].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),_this3.countDownCss(index)}),1e3)}))},countDownCss:function(index){var _this4=this,countDown=4,count=setInterval((function(){countDown-=1;var elements=document.getElementsByClassName("grid-stack-item-content");if(4===countDown)for(var i=index;i<_this4.dashboardLayout.length;i++)elements[i].style.boxShadow="0 2px 4px 4px rgb(219 232 14 / 50%)";if(3===countDown)for(var _i=index;_i<_this4.dashboardLayout.length;_i++)elements[_i].style.boxShadow="0 2px 4px 3px rgb(219 232 14 / 50%)";if(2===countDown)for(var _i2=index;_i2<_this4.dashboardLayout.length;_i2++)elements[_i2].style.boxShadow="0 2px 4px 2px rgb(219 232 14 / 50%)";if(1===countDown)for(var _i3=index;_i3<_this4.dashboardLayout.length;_i3++)elements[_i3].style.boxShadow="0 2px 4px 1px rgb(219 232 14 / 50%)";if(0===countDown){for(var _i4=index;_i4<_this4.dashboardLayout.length;_i4++)elements[_i4].style.boxShadow="none";clearInterval(count)}}),500)},resetreportData:function(){var _this$graphicsList;this.newReportTree.forEach((function(folder){folder.reports.forEach((function(report){report.selected=!1}))})),this.reportTree.forEach((function(folder){folder.reports.forEach((function(report){report.selected=!1}))})),this.supportedModules.forEach((function(folder){folder.list.forEach((function(report){report.selected=!1}))})),this.customModuleList.forEach((function(folder){folder.list.forEach((function(report){report.selected=!1}))})),null===(_this$graphicsList=this.graphicsList)||void 0===_this$graphicsList||_this$graphicsList.forEach((function(report){report.selected=!1}))}}},dashboard_DashboardComponentMixinsvue_type_script_lang_js=DashboardComponentMixinsvue_type_script_lang_js,DashboardComponentMixins_component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardComponentMixinsvue_type_script_lang_js,DashboardComponentMixins_render,DashboardComponentMixins_staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardComponentMixins=DashboardComponentMixins_component.exports,DashboardMixin=__webpack_require__(265334),DisableDashboardTabsvue_type_template_id_2811ead0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:"Disable Dashboard Tab",visible:_vm.showModal,"close-on-click-modal":!1,"show-close":!1,width:"30%"},on:{"update:visible":function($event){_vm.showModal=$event}}},[_c("div",{staticClass:"height150"},[_c("el-checkbox",{model:{value:_vm.copyAllWidgets,callback:function($$v){_vm.copyAllWidgets=$$v},expression:"copyAllWidgets"}},[_vm._v(" Copy tab widgets to main dashboard")]),_vm.copyAllWidgets?_c("div",{staticClass:"pT15"},[_c("el-row",{staticClass:"add-dashboard-popper"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Tab Name"))]),_c("el-col",{attrs:{span:24}},[_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a Tab"},model:{value:_vm.toTab,callback:function($$v){_vm.toTab=$$v},expression:"toTab"}},_vm._l(_vm.tabs,(function(tab,ix){return _c("el-option",{key:ix,attrs:{label:tab.name,value:tab.id}})})),1)],1)],1)],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function(){return _vm.$emit("close")}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Confirm")])],1)])},DisableDashboardTabsvue_type_template_id_2811ead0_staticRenderFns=[],DisableDashboardTabsvue_type_script_lang_js={data:function(){return{toTab:"",copyAllWidgets:!1,isModalVisible:!0}},props:{tabs:{type:Array,required:!0}},methods:{save:function(){this.copyAllWidgets?""!=this.toTab?this.$emit("save",{toTab:this.toTab,copyAllWidgets:this.copyAllWidgets}):this.$message.error("Please select a tab!"):this.$emit("save",{copyAllWidgets:!1})}},computed:{showModal:{get:function(){return this.isModalVisible},set:function(value){var _this=this;value||(this.isModalVisible=!1,this.$nextTick((function(){_this.$emit("close")})))}}}},dashboard_DisableDashboardTabsvue_type_script_lang_js=DisableDashboardTabsvue_type_script_lang_js,DisableDashboardTabs_component=(0,componentNormalizer/* default */.Z)(dashboard_DisableDashboardTabsvue_type_script_lang_js,DisableDashboardTabsvue_type_template_id_2811ead0_render,DisableDashboardTabsvue_type_template_id_2811ead0_staticRenderFns,!1,null,null,null)
/* harmony default export */,DisableDashboardTabs=DisableDashboardTabs_component.exports,EnableDashboardTabsvue_type_template_id_4eaafa83_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:"Enable Dashboard Tab",visible:_vm.showModal,width:"30%","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function($event){_vm.showModal=$event}}},[_c("div",{staticClass:"height150"},[_c("el-row",{staticClass:"add-dashboard-popper"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Tab Name"))]),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Enter Tab Name"},model:{value:_vm.newTabName,callback:function($$v){_vm.newTabName=$$v},expression:"newTabName"}})],1)],1),_c("div",{staticClass:"pT15"},[_c("el-checkbox",{model:{value:_vm.copyAllWidgets,callback:function($$v){_vm.copyAllWidgets=$$v},expression:"copyAllWidgets"}},[_vm._v("Copy all the widgets to new tab")])],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function(){_vm.showModal=!1}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v(_vm._s("Save"))])],1)])},EnableDashboardTabsvue_type_template_id_4eaafa83_staticRenderFns=[],EnableDashboardTabsvue_type_script_lang_js={data:function(){return{isModalVisible:!0,newTabName:"",copyAllWidgets:!1}},methods:{save:function(){""==this.newTabName?this.$message.error("Tab name should not be empty!"):this.$emit("save",{tabName:this.newTabName,copyAllWidgets:""!=this.copyAllWidgets&&this.copyAllWidgets})}},computed:{showModal:{get:function(){return this.isModalVisible},set:function(value){var _this=this;value||(this.isModalVisible=!1,this.$nextTick((function(){_this.$emit("close")})))}}}},dashboard_EnableDashboardTabsvue_type_script_lang_js=EnableDashboardTabsvue_type_script_lang_js,EnableDashboardTabs_component=(0,componentNormalizer/* default */.Z)(dashboard_EnableDashboardTabsvue_type_script_lang_js,EnableDashboardTabsvue_type_template_id_4eaafa83_render,EnableDashboardTabsvue_type_template_id_4eaafa83_staticRenderFns,!1,null,null,null)
/* harmony default export */,EnableDashboardTabs=EnableDashboardTabs_component.exports,DashboardEditervue_type_script_lang_js={mixins:[MoveToMixin,ReportHelper/* default */.Z,DateHelper/* default */.Z,DashboardHelper,CardBuilderDashboardMixin,DashboardMixin/* default */.Z,DashboardComponentMixins],components:{DisableDashboardTabs:DisableDashboardTabs,EnableDashboardTabs:EnableDashboardTabs,VerticalTabSelector:VerticalTabSelector/* default */.Z,WidgetWrapper:WidgetWrapper/* default */.Z,SectionEditer:SectionEditer,CubeLoader:CubeLoader/* default */.Z,reportChooser:ComponentChooser/* default */.Z,GridstackLayout:dashboard/* GridstackLayout */.CA,GridstackItem:dashboard/* GridstackItem */.Hn,GridstackSection:dashboard/* GridstackSection */.NS,FPhotoUploader:FPhotoUploader/* default */.Z,NewCardBuilder:CardBuilder/* default */.Z,textCardEditer:TextCardPopup/* default */.Z,DashboardTabDialogEditor:DashboardTabDialogEditor,DashboardTopTab:DashboardTopTab/* default */.Z,SectionContainer:SectionContainer/* default */.Z},data:function(){return{showDisableTabsModal:!1,showEnableDashboardModal:!1,loadImmediately:!0,uid:-1,customModuleList:[],supportedModules:[{label:"Work Orders",value:"workorder",list:[],expand:!1,license:"MAINTENANCE"},{label:"Planned Maintenance",value:"preventivemaintenance",list:[],expand:!1},{label:"Alarms",value:this.$helpers.isLicenseEnabled("NEW_ALARMS")?"newreadingalarm":"alarm",list:[],expand:!1,license:"ALARMS"},{label:"Assets",value:"asset",list:[],expand:!1,license:"SPACE_ASSET"},{label:"Inventory Request",value:"inventoryrequest",list:[],expand:!1,license:"INVENTORY"},{label:"Item",value:"item",list:[],expand:!1,license:"INVENTORY"},{label:"Contracts",value:"contracts",list:[],expand:!1,license:"CONTRACT"},{label:"Purchaseorder",value:"purchaseorder",list:[],expand:!1,license:"PURCHASE"},{label:"Purchaserequest",value:"purchaserequest",list:[],expand:!1,license:"PURCHASE"},{label:"Visitor",value:"visitor",list:[],expand:!1,license:"VISITOR"},{label:"Custom module",value:"custom",list:[],expand:!1,license:"CONNECTEDAPPS"},{label:"Visits",value:"visitorlog",list:[],expand:!1,license:"VISITOR"},{label:"contact",value:"contact",list:[],expand:!1,license:"VISITOR"},{label:"Watchlist",value:"watchlist",list:[],expand:!1,license:"VISITOR"},{label:"Visitor invite",value:"invitevisitor",list:[],expand:!1,license:"VISITOR"},{label:"Tenants",moduleName:"tenant",list:[],expand:!1,license:"TENANTS"}],modules:[{label:"Maintenance",moduleName:"workorder",license:"MAINTENANCE"},{label:"Fault detection and diagnostics",moduleName:"alarm",license:"ALARMS"},{label:"Building performance",moduleName:"energydata",license:"ENERGY"},{label:"Asset",moduleName:"asset",license:"SPACE_ASSET"},{label:"Inventory Request",moduleName:"inventoryrequest",list:[],expand:!1,license:"INVENTORY"},{label:"Item",moduleName:"item",list:[],expand:!1,license:"INVENTORY"},{label:"Contracts",moduleName:"contracts",list:[],expand:!1,license:"CONTRACT"},{label:"Purchaseorder",moduleName:"purchaseorder",list:[],expand:!1,license:"PURCHASE"},{label:"Purchaserequest",moduleName:"purchaserequest",list:[],expand:!1,license:"PURCHASE"},{label:"Visitor",moduleName:"visitor",list:[],expand:!1,license:"VISITOR"},{label:"Custom module",moduleName:"custom",list:[],expand:!1,license:"CONNECTEDAPPS"},{label:"Visits",moduleName:"visitorlog",list:[],expand:!1,license:"VISITOR"},{label:"contact",moduleName:"contact",list:[],expand:!1,license:"VISITOR"},{label:"Watchlist",moduleName:"watchlist",list:[],expand:!1,license:"VISITOR"},{label:"Visitor invite",moduleName:"invitevisitor",list:[],expand:!1,license:"VISITOR"},{label:"Tenants",moduleName:"tenant",list:[],expand:!1,license:"TENANTS"}],showTabOptions:!0,sectionIndex:-1,sectionSelectedForEditing:null,showSectionEditor:!1,render:!0,selectedModule:"Maintenance",folderLoading:!0,moduleName:"workorder",loading:!0,dialogVisible:!1,buildingCard:!1,gaugeSetup:!1,pmreadingsetup:!1,smartmapsetup:!1,smarttablesetup:!1,smarttablewrappersetup:!1,smartcardsetup:!1,showCardBuilderSetup:!1,targetMeterDialog:!1,editwidgetcalled:!1,editwidgetData:null,selectedWidgetId:-1,readingpopup:!1,webcardVisible:!1,ahupopup:!1,addreadingVisible:!1,addreadingVisible2:!1,addreadingVisible3:!1,selectedBuilding:null,dashboard:{label:""},assets:[],AHUcardCatogry:"",AHUcard:{catogry:"",id:null},newdashboard:{label:null,linkName:""},readingCard:{title:"",mode:1,parentId:-1,legend:"sum",editmode:!1,parentName1:"",colorMap:!1,colorMapConfig:{},write:!1,readingType:-1,targetreading:{max:0,maxmode:"usetarget",readingName:"",targetmode:"constant",count:0,maxValue:0,maxPercentage:0,needMax:!1,parentName2:"",enableCenterText1:!0},aggregationFunc:3,readingName:"",operatorId:28,layout:{color:"",fontColor:""}},webUrl:null,dashboardLayout:[],deletlayout:[],webView:[],sharingDialogVisible:!1,removeChartList:[],selectedDashoardFolder:{id:-1,name:"default"},dashboardFolderList:[],convertedlayout:null,chartDeleted:!1,newDashboardData:[],buildings:[],tempBuildings:[],allBuildings:[],readingcardlegend:["Sum","Avg","Min","Max"],emptywidget:!1,isDraging:!1,shareTo:2,showkpiCard:!1,showkpitargetCard:!1,sharedUsers:[],sharedRoles:[],sharedGroups:[],viewList:[],collapseSidebar:!1,reportTree:[],newReportTree:[],dashboardlength:0,option:"report",temp:{dis:"",label:""},dragedElement:"test",showImageEditer:!1,showtextcard:!1,showCardBuilder:!1,avatarDataUrl:null,imagecardData:null,params:{userId:0},headers:{Authorization:""},imageUploadUrl:null,graphicsList:null,connectedAppWidgetList:null,dashboardTabContexts:null,dashboardTabLoading:null,showTemplateReportDialog:!1,currentTemplateReportId:null,dashboardTabEditorVisibility:!1,showWidgetHelpTextConfig:!1,widgetForHelpTextConfig:null,widgetConfigMap:{}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({dashboardTabsList:function(){var _this$dashboardTabCon;return(null!==(_this$dashboardTabCon=this.dashboardTabContexts)&&void 0!==_this$dashboardTabCon?_this$dashboardTabCon:[]).reduce((function(list,tab){if(list.push({id:tab.id,name:tab.name,expand:!1}),!(0,validation/* isEmpty */.xb)(null===tab||void 0===tab?void 0:tab.childTabs)){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(tab.childTabs);try{for(_iterator.s();!(_step=_iterator.n()).done;){var childTab=_step.value;list.push({id:childTab.id,name:childTab.name})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return list}),[])},isLazyDashboard:function(){return!0}},(0,vuex_esm/* mapState */.rn)({groups:function(state){return state.groups},users:function(state){return state.users},roles:function(state){return state.roles}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{getLicenseEnabledModules:function(){var _this=this;return this.modules.filter((function(module){if(_this.$helpers.isLicenseEnabled(module.license))return module}))},dashboardLink:function(){return this.$route.params.dashboardlink},editMode:function(){return!0},getHeight:function(){return"height:"+(window.appConfig&&window.appConfig.isTvMode?window.appConfig.height+"px;":"80vh;")},mode:function(){return this.$route.query&&"new"===this.$route.query.create?"new":"edit"},viewOrEdit:function(){return"edit"},dashboardTabId:function(){var _this$$route,_this$$route2;return null!==(_this$$route=this.$route)&&void 0!==_this$$route&&null!==(_this$$route=_this$$route.query)&&void 0!==_this$$route&&_this$$route.tab?parseInt(null===(_this$$route2=this.$route)||void 0===_this$$route2||null===(_this$$route2=_this$$route2.query)||void 0===_this$$route2?void 0:_this$$route2.tab):null},canShowNewCardBuilder:function(){return!0}}),mounted:function(){this.init(),this.subscribeEventBus(),this.loadReportsData()},beforeDestroy:function(){this.unsubscribeEventBus()},watch:{dashboardLink:function(){
// When the dashboard changes (dashboardLink, is the name of the dashboard!), reload the component again.
this.loadDashboard()},$route:function(){this.openFirstReport()},dashboardTabId:{handler:function(){var _handler=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(newVal){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!newVal){_context.next=7;break}if(!this.dashboardLayouts[this.dashboardTabId]){_context.next=5;break}this.changeDashboardLayout({layout:cloneDeep_default()(this.dashboardLayouts[this.dashboardTabId])}),_context.next=7;break;case 5:return _context.next=7,this.loadDashboardTabs();case 7:case"end":return _context.stop()}}),_callee,this)})));function handler(_x){return _handler.apply(this,arguments)}return handler}()}},methods:{adjustSectionHeight:function(sectionId){
// Got rekt! In some cases Gridstack section is not emitting change event.
// Assume a Gridstack section having two widgets A and B, widget B is vertically below widget A.
// If we move the widget A to the master grid from the section grid, the change event for widget B is not
// get emitted, this bug is present in the package itself, can't do anything about it right now.
var dashboardLayout=this.dashboardLayout,section=dashboardLayout.find((function(section){return section.id==sectionId})),id=section.id,collapsed=section.collapsed,widgets=section.children;if(!collapsed&&!(0,validation/* isEmpty */.xb)(widgets)){var SECTION_HEAD_HEIGHT=7,PADDING_BOTTOM=1,SECTION_BODY_HEIGHT=Math.max.apply(Math,(0,toConsumableArray/* default */.Z)(widgets.map((function(o){return o.y+o.h})))),TOTAL_HEIGHT=SECTION_HEAD_HEIGHT+SECTION_BODY_HEIGHT+PADDING_BOTTOM;this.$refs["gridstack"].updateItem(id,{h:TOTAL_HEIGHT})}},get_uid:function(){return String(this.uid--);// Number is a primitive, no need to cloneDeep.
},loadReportsData:function(){this.loadNewReportTree(),this.$helpers.isLicenseEnabled("GRAPHICS")&&this.loadGraphicsList()},loadNewReportTree:function(){var self=this;this.reportLoading=!0;var url="/v3/report/folders?moduleName=";
// Lame, hard code edgecase...
"energy"===this.moduleName?url+="energyData":"custom"===this.moduleName?url+="custommodule":"newreadingalarm"===this.moduleName||"bmsalarm"===this.moduleName?url+="alarm":url+=this.moduleName,api/* API */.bl.get(url).then((function(resp){if(!resp.error){var data=resp.data.reportFolders,treeData=data.map((function(d){if(d.expand=!1,d.reports.forEach((function(rt){rt.selected=!1,rt.disabled=!1})),self.$route.params.reportid){var reportId=parseInt(self.$route.params.reportid),report=d.reports.find((function(rt){return rt.id===reportId}));report&&(d.expand=!0)}return d}));self.newReportTree=treeData,self.openFirstReport(),self.reportLoading=!1}}))},loadGraphicsList:function(){var _this2=this;api/* API */.bl.get("/v2/graphics/list").then((function(response){_this2.graphicsList=response.data.graphics_list,_this2.graphicsList.forEach((function(rt){_this2.$set(rt,"selected",!1),_this2.$set(rt,"disabled",!1)}))}))},handleHelpTextChange:function(_ref){var id=_ref.id,helpText=_ref.helpText,widgetSettings=_ref.widgetSettings;if(this.dashboardLayout){var _this$findIndexUsingI=this.findIndexUsingId(id),index=_this$findIndexUsingI.index,childIndex=_this$findIndexUsingI.childIndex;(0,validation/* isEmpty */.xb)(childIndex)?(this.$set(this.dashboardLayout[index].widget,"widgetSettings",widgetSettings),this.$set(this.dashboardLayout[index].widget,"helpText",helpText)):(this.$set(this.dashboardLayout[index].children[childIndex].widget,"widgetSettings",widgetSettings),this.$set(this.dashboardLayout[index].children[childIndex].widget,"helpText",helpText)),this.showWidgetHelpTextConfig=!1}},setModuleName:function(name){this.moduleName=name,this.loadNewReportTree(),this.loadReportTree()},loadReportTree:function(){var self=this;this.reportLoading=!0;var url="/report/workorder/getAllWorkOrderReports?moduleName=";"energy"===this.moduleName?url+="energyData":url+=this.moduleName,"custom"!==this.moduleName&&api/* API */.bl.get(url).then((function(response){var data=response.data.allWorkOrderJsonReports,treeData=data.map((function(d){if(d.expand=!1,d.reports.forEach((function(rt){rt.selected=!1,rt.disabled=!1})),self.$route.params.reportid){var reportId=parseInt(self.$route.params.reportid),report=d.children.find((function(rt){return rt.widget.dataOptions.reportId===reportId}));report&&(d.expand=!0)}return d}));self.reportTree=treeData.filter((function(row){return"Default"!==row.label&&"Old Reports"!==row.label})),self.openFirstReport(),self.loading=!1,self.reportLoading=!1})).catch((function(error){error&&(self.loading=!1)}))},setDefaultDashboard:function(){var _this$dashboardFolder,FIRST_FOLDER_INDEX=0;this.selectedDashoardFolder=null!==(_this$dashboardFolder=this.dashboardFolderList[FIRST_FOLDER_INDEX])&&void 0!==_this$dashboardFolder?_this$dashboardFolder:{}},getIndex:function(index){return index},fetchDashboardUsingLinkName:function(){var url="/v3/dashboard/"+this.dashboardLink;return api/* API */.bl.get(url,{},{force:!0})},loadDashboard:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this3$$route$query,_this3$$route,_ref2,appId,self,_yield$_this3$fetchDa,data,error,dashboard,_ref3,tabs,tabEnabled,dashboardTabPlacement,_ref4,_ref5,firstTab,query,_query,_error$message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.loading=!0,_ref2=null!==(_this3$$route$query=null===(_this3$$route=_this3.$route)||void 0===_this3$$route?void 0:_this3$$route.query)&&void 0!==_this3$$route$query?_this3$$route$query:{},appId=_ref2.appId,self=_this3,_context2.next=5,_this3.fetchDashboardUsingLinkName();case 5:_yield$_this3$fetchDa=_context2.sent,data=_yield$_this3$fetchDa.data,error=_yield$_this3$fetchDa.error,(0,validation/* isEmpty */.xb)(error)?(dashboard=data.dashboardJson[0],self.dashboard=dashboard,_ref3=null!==dashboard&&void 0!==dashboard?dashboard:{},tabs=_ref3.tabs,tabEnabled=_ref3.tabEnabled,dashboardTabPlacement=_ref3.dashboardTabPlacement,self.dashboardTabContexts=tabs,!(0,validation/* isEmpty */.xb)(tabs)&&tabEnabled?(
// For dashboard in which 'tabs' are enabled...
self.dashboardOptions.showTabs=tabEnabled,self.dashboardOptions.dashboardTabPlacement=-1===dashboardTabPlacement?2:dashboardTabPlacement,
// Sometimes the user comes to a dashboard in which tabs are enabled using just the dashboard's linkName without a tabId.
// Set the first tab in route url if this.dashboardTabId (Computed comes from route url) is not set.
self.dashboardTabId||(_ref4=null!==tabs&&void 0!==tabs?tabs:[],_ref5=(0,slicedToArray/* default */.Z)(_ref4,1),firstTab=_ref5[0],query={create:self.$route.query.create,tab:null===firstTab||void 0===firstTab?void 0:firstTab.id},(0,validation/* isEmpty */.xb)(appId)||(query.appId=appId),self.$router.replace({path:self.$route.path,query:query}))):(
// Dashboards in which 'tabs' are not enabled...
self.dashboardTabContexts=null,_query={create:self.$route.query.create},(0,validation/* isEmpty */.xb)(appId)||(_query.appId=appId),self.$router.replace({path:self.$route.path,query:_query}),self.prepareDashboardLayout(cloneDeep_default()(dashboard.children))),self.setFolder()):self.$message.error(null!==(_error$message=error.message)&&void 0!==_error$message?_error$message:"Error Occurred"),_this3.loading=!1;case 10:case"end":return _context2.stop()}}),_callee2)})))()},setFolder:function(){if("edit"===this.mode&&!(0,validation/* isEmpty */.xb)(this.dashboardFolderList)){var dashboardFolderId=this.dashboard.dashboardFolderId;this.selectedDashoardFolder=this.dashboardFolderList.find((function(folder){return folder.id===dashboardFolderId}))}},changeDashboardTabId:function(id){id&&id>0&&this.dashboardTabId!==id&&(this.dashboardLayouts[this.dashboardTabId]=cloneDeep_default()(this.dashboardLayout),this.$router.replace({path:this.$route.path,query:{create:this.$route.query.create,tab:id}}))},fetchDashboardTab:function(tabId){return api/* API */.bl.get("/v3/dashboard/tab/"+tabId)},loadDashboardTabs:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var self,_yield$_this4$fetchDa,data,error,_ref6,clientWidgetJson,_error$message2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return self=_this4,_this4.dashboardTabLoading=!0,_context3.next=4,_this4.fetchDashboardTab(self.dashboardTabId);case 4:_yield$_this4$fetchDa=_context3.sent,data=_yield$_this4$fetchDa.data,error=_yield$_this4$fetchDa.error,error?self.$message.error(null!==(_error$message2=null===error||void 0===error?void 0:error.message)&&void 0!==_error$message2?_error$message2:"Error Occurred"):(_ref6=null!==data&&void 0!==data?data:{},clientWidgetJson=_ref6.dashboardTabContext.clientWidgetJson,self.dashboard["children"]=clientWidgetJson,_this4.prepareDashboardLayout(cloneDeep_default()(clientWidgetJson))),_this4.dashboardTabLoading=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},saveDashboard:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if((0,validation/* isEmpty */.xb)(_this5.dashboard.label)){_context4.next=16;break}if((0,validation/* isEmpty */.xb)(_this5.selectedDashoardFolder)){_context4.next=13;break}if(_this5.dashboardSave=!0,"new"!=_this5.mode){_context4.next=8;break}return _context4.next=6,_this5.saveNewDashboard();case 6:_context4.next=11;break;case 8:if("edit"!=_this5.mode){_context4.next=11;break}return _context4.next=11,_this5.saveOldDashboard();case 11:_context4.next=14;break;case 13:_this5.$message.error("Please select a folder.");case 14:_context4.next=17;break;case 16:_this5.$message.error("Please name the dashboard");case 17:case"end":return _context4.stop()}}),_callee4)})))()},saveNewDashboard:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var self,_yield$API$get,data,error,selectedModule,_error$message3;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:
// While creating a new dashboard the user can't create and switch tabs because we hide features related to tabs in new dashboard creation mode.
return self=_this6,_context5.next=3,api/* API */.bl.get("/dashboard/supportedmodules");case 3:if(_yield$API$get=_context5.sent,data=_yield$API$get.data,error=_yield$API$get.error,error){_context5.next=12;break}return selectedModule=data.modules.find((function(i){return"workorder"==i.name})),_context5.next=10,self.createNewDashboard(selectedModule.moduleId);case 10:_context5.next=13;break;case 12:self.$message.error(null!==(_error$message3=null===error||void 0===error?void 0:error.message)&&void 0!==_error$message3?_error$message3:"Error Occurred");case 13:case"end":return _context5.stop()}}),_callee5)})))()},createNewDashboard:function(moduleId){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var self,req,_yield$API$post,error,data,_ref7,dashboard,dashboardObj,_error$message4;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return self=_this7,req={dashboard:{dashboardName:_this7.dashboard.label,dashboardFolderId:_this7.selectedDashoardFolder.id,moduleId:moduleId}},_context6.next=4,api/* API */.bl.post("/dashboard/add",req);case 4:if(_yield$API$post=_context6.sent,error=_yield$API$post.error,data=_yield$API$post.data,error){_context6.next=14;break}return _ref7=null!==data&&void 0!==data?data:{},dashboard=_ref7.dashboard,dashboardObj={dashboard_meta:{id:dashboard.id,dashboardFolderId:dashboard.dashboardFolderId,dashboardName:dashboard.dashboardName,tabEnabled:dashboard.tabEnabled,dashboardWidgets:self.getDashboardWidgets(cloneDeep_default()(self.dashboardLayout)),linkName:dashboard.linkName}},_context6.next=12,self.submitDashboard(dashboardObj);case 12:_context6.next=15;break;case 14:self.$message.error(null!==(_error$message4=null===error||void 0===error?void 0:error.message)&&void 0!==_error$message4?_error$message4:"Error Occurred");case 15:case"end":return _context6.stop()}}),_callee6)})))()},saveTab:function(){var _arguments=arguments,_this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var _self$selectedDashoar,_ref8,_ref8$redirect,redirect,_ref8$widgets,widgets,self,dashboardObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _ref8=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:{},_ref8$redirect=_ref8.redirect,redirect=void 0===_ref8$redirect||_ref8$redirect,_ref8$widgets=_ref8.widgets,widgets=void 0===_ref8$widgets?[]:_ref8$widgets,self=_this8,dashboardObj={dashboard_meta:{id:self.dashboard.id,
// For now, if linkName is used use id, for tabs use dashboardId.
dashboardId:self.dashboard.id,tabId:self.dashboardTabId,tabEnabled:self.dashboardOptions.showTabs,dashboardTabPlacement:self.dashboardOptions.dashboardTabPlacement,dashboardName:self.dashboard.label,linkName:self.dashboardLink,dashboardWidgets:(0,validation/* isEmpty */.xb)(widgets)?_this8.getDashboardWidgets(cloneDeep_default()(_this8.dashboardLayout)):_this8.getDashboardWidgets(cloneDeep_default()(widgets)),dashboardFolderId:null===(_self$selectedDashoar=self.selectedDashoardFolder)||void 0===_self$selectedDashoar?void 0:_self$selectedDashoar.id}},_context7.next=5,self.submitDashboard(dashboardObj,redirect);case 5:case"end":return _context7.stop()}}),_callee7)})))()},saveMultiTab:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var _this9$dashboardTabCo,self,tabNames,tabs,dashboardObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return self=_this9,// Save all the recent changes done to the dashboardLayouts hashMap so that we can update all the tabs in one shot.
_this9.dashboardLayouts[_this9.dashboardTabId]=cloneDeep_default()(_this9.dashboardLayout),tabNames=(null!==(_this9$dashboardTabCo=_this9.dashboardTabContexts)&&void 0!==_this9$dashboardTabCo?_this9$dashboardTabCo:[]).reduce((function(tabNames,rt){return tabNames[rt.id]=rt.name,(0,validation/* isEmpty */.xb)(null===rt||void 0===rt?void 0:rt.childTabs)||rt.childTabs.forEach((function(rl){tabNames[rl.id]=rl.name})),tabNames}),{}),tabs=Object.keys(_this9.dashboardLayouts).reduce((function(tabs,key){var dashboardLayout=cloneDeep_default()(self.dashboardLayouts[key]),tabName=tabNames[key],layout=self.prepareDashboardTab(dashboardLayout,Number(key),tabName);return tabs.push(layout),tabs}),[]),dashboardObj={dashboard_meta:{dashboardName:self.dashboard.label,dashboardId:_this9.dashboard.id,tabs:tabs,multi_tab_update:!0}},_context8.next=7,_this9.submitDashboard(dashboardObj);case 7:case"end":return _context8.stop()}}),_callee8)})))()},submitDashboard:function(dashboardObj){var _arguments2=arguments,_this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){var _dashboardObj$dashboa,redirect,self,_ref9,tabEnabled,multi_tab_update,newDashboardLink,url,_yield$API$post2,error,link,_error$message5;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return redirect=!(_arguments2.length>1&&void 0!==_arguments2[1])||_arguments2[1],self=_this10,_ref9=null!==(_dashboardObj$dashboa=null===dashboardObj||void 0===dashboardObj?void 0:dashboardObj.dashboard_meta)&&void 0!==_dashboardObj$dashboa?_dashboardObj$dashboa:{},tabEnabled=_ref9.tabEnabled,multi_tab_update=_ref9.multi_tab_update,newDashboardLink=_ref9.linkName,url="",url=(tabEnabled||multi_tab_update)&&redirect?"/v3/dashboard/tab/update":"/v3/dashboard/update",_context9.next=7,api/* API */.bl.post(url,dashboardObj);case 7:_yield$API$post2=_context9.sent,_yield$API$post2.data,error=_yield$API$post2.error,(0,validation/* isEmpty */.xb)(error)?(self.$message({message:"Dashboard updated successfully!",type:"success"}),redirect&&(link=self.newconstractUrl(newDashboardLink),self.$router.push(link))):self.$message.error(null!==(_error$message5=null===error||void 0===error?void 0:error.message)&&void 0!==_error$message5?_error$message5:"Error Occurred"),self.dashboardSave=!1;case 12:case"end":return _context9.stop()}}),_callee9)})))()},saveOldDashboard:function(){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee10(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context10){while(1)switch(_context10.prev=_context10.next){case 0:if(!Object.keys(_this11.dashboardLayouts).length){_context10.next=5;break}return _context10.next=3,_this11.saveMultiTab();case 3:_context10.next=7;break;case 5:return _context10.next=7,_this11.saveTab();case 7:case"end":return _context10.stop()}}),_callee10)})))()},formatWidgetData:function(item,i){var _gridItem$widget,_gridItem$widget2,_gridItem$widget3,_gridItem$widget4,_gridItem$widget5,gridItem=cloneDeep_default()(item),widgetData=null,reportTemplate=null!==gridItem&&void 0!==gridItem&&null!==(_gridItem$widget=gridItem.widget)&&void 0!==_gridItem$widget&&null!==(_gridItem$widget=_gridItem$widget.dataOptions)&&void 0!==_gridItem$widget&&_gridItem$widget.reportTemplate?gridItem.widget.dataOptions.reportTemplate:null;
// This method needs to be refactored by someone experience...
// Don't touch this...
("object"===(0,esm_typeof/* default */.Z)(reportTemplate)&&(reportTemplate=JSON.stringify(reportTemplate)),"card"===gridItem.widget.type)?widgetData=cloneDeep_default()((0,objectSpread2/* default */.Z)({id:gridItem.widget.id,type:gridItem.widget.type,layoutWidth:gridItem.w,layoutHeight:gridItem.h,order:i+1,xPosition:gridItem.x,yPosition:gridItem.y,helpText:null===gridItem||void 0===gridItem||null===(_gridItem$widget2=gridItem.widget)||void 0===_gridItem$widget2?void 0:_gridItem$widget2.helpText,widgetSettings:null===gridItem||void 0===gridItem||null===(_gridItem$widget3=gridItem.widget)||void 0===_gridItem$widget3?void 0:_gridItem$widget3.widgetSettings},gridItem.widget.dataOptions)):widgetData=cloneDeep_default()({id:gridItem.widget.id,type:gridItem.widget.type,layoutWidth:gridItem.w,layoutHeight:gridItem.h,order:i+1,xPosition:gridItem.x,yPosition:gridItem.y,headerText:gridItem.widget.header.title,reportId:gridItem.widget.dataOptions.reportId,newReportId:gridItem.widget.dataOptions.newReportId,staticKey:gridItem.widget.dataOptions.staticKey?gridItem.widget.dataOptions.staticKey:null,viewName:gridItem.widget.dataOptions.viewName?gridItem.widget.dataOptions.viewName:null,moduleName:gridItem.widget.dataOptions.moduleName?gridItem.widget.dataOptions.moduleName:null,reportTemplate:reportTemplate,helpText:null===gridItem||void 0===gridItem||null===(_gridItem$widget4=gridItem.widget)||void 0===_gridItem$widget4?void 0:_gridItem$widget4.helpText,widgetSettings:null===gridItem||void 0===gridItem||null===(_gridItem$widget5=gridItem.widget)||void 0===_gridItem$widget5?void 0:_gridItem$widget5.widgetSettings});if("graphics"===widgetData.type&&(widgetData.graphicsId=gridItem.widget.graphicsId,gridItem.widget.dataOptions&&gridItem.widget.dataOptions.graphicsOptions&&(widgetData.graphicsOptions="object"===(0,esm_typeof/* default */.Z)(gridItem.widget.dataOptions.graphicsOptions)?JSON.stringify(gridItem.widget.dataOptions.graphicsOptions):gridItem.widget.dataOptions.graphicsOptions)),gridItem.widget.dataOptions.building&&(widgetData.baseSpaceId=gridItem.widget.dataOptions.building.id),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingcard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingWithGraphCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingGaugeCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"textcard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson+""),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"imagecard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.imagecardData&&(widgetData.paramsJson={photoId:gridItem.widget.dataOptions.imagecardData.photoId,url:gridItem.widget.dataOptions.imagecardData.url},widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.imagecardData)),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"web"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard1"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard2"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard3"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCardNew"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingComboCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var data1=JSON.parse(gridItem.widget.dataOptions.metaJson);data1.expressions&&data1.hasOwnProperty("v2Script")&&data1.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:data1.expressions,workflowUIMode:1,isV2Script:data1.v2Script,workflowV2String:data1.workflowV2String}})):data1&&data1.expressions&&(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:data1.expressions,workflowUIMode:1}}))}if(gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var _data=JSON.parse(gridItem.widget.dataOptions.metaJson);_data.expressions&&_data.hasOwnProperty("v2Script")&&_data.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data.expressions,workflowUIMode:1,isV2Script:_data.v2Script,workflowV2String:_data.workflowV2String}})):_data.workflowV2String?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{isV2Script:!0,workflowV2String:_data.workflowV2String}})):_data&&_data.expressions?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data.expressions,workflowUIMode:1}})):(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{v2Script:!0,workflowV2String:"void test(){↵    ↵    ↵}"}}))}if(gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.paramsJson&&(widgetData.paramsJson=gridItem.widget.dataOptions.paramsJson||{}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiMultiResultCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var _data2=JSON.parse(gridItem.widget.dataOptions.metaJson);_data2.expressions&&_data2.hasOwnProperty("v2Script")&&_data2.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data2.expressions,workflowUIMode:1,isV2Script:_data2.v2Script,workflowV2String:_data2.workflowV2String}})):_data2&&_data2.expressions&&(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data2.expressions,workflowUIMode:1}}))}// Convert random negative number to -1 for db to know that it is a new widget.
return gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fcucard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrillFcu"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrillFcuList"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel1"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel2"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel3"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel1List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel2List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel3List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"resourceAlarmBar"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson,widgetData.paramsJson=JSON.parse(gridItem.widget.dataOptions.metaJson).params),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"alarmbarwidget"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson,widgetData.paramsJson=JSON.parse(gridItem.widget.dataOptions.metaJson).params),"chart"===gridItem.widget.type&&gridItem.widget.dataOptions&&gridItem.widget.dataOptions.hasOwnProperty("chartTypeInt")&&(widgetData.chartType=gridItem.widget.dataOptions.chartTypeInt),widgetData.id=gridItem.id<0?-1:gridItem.id,cloneDeep_default()(widgetData)},getDashboardWidgets:function(layout){var self=this,dashboardWidgets=[];return null!==layout&&layout.forEach((function(widget,index){if(widget.children){var section=[];widget.banner_meta=JSON.stringify(widget.banner_meta),// The backend people wants this property value as string.
widget.children.forEach((function(childWidget,childIndex){section.push(self.formatWidgetData(childWidget,childIndex))})),delete widget.children,widget["section"]=section,widget.id=widget.id<0?-1:widget.id,dashboardWidgets.push(widget)}else dashboardWidgets.push(self.formatWidgetData(widget,index))})),dashboardWidgets},newconstractUrl:function(){var dashboardLink=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,dashboardlink=(0,validation/* isEmpty */.xb)(dashboardLink)?this.dashboardLink:dashboardLink;if(!(0,router/* isWebTabsEnabled */.tj)())return"/app/home/dashboard/"+dashboardlink;var _ref10=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.DASHBOARD_VIEWER)||{},name=_ref10.name;return name?this.$router.resolve({name:name,params:{dashboardlink:dashboardlink}}).href:void 0},cancel:function(){this.$router.push(this.newconstractUrl())},openFirstReport:function(){var self=this;self.$route.params.reportid||this.$route.path.includes("scheduled")||(self.newReportTree&&self.newReportTree.length&&self.newReportTree[0].reports.length?self.newReportTree[0].expand=!0:self.reportTree.length&&self.reportTree[0].children.length&&(self.reportTree[0].expand=!0))},expand:function(folder){this.$set(folder,"expand",!folder.expand),this.changeDashboardTabId(folder.id)},addDataPopUp:function(data){this.dialogVisible=!0,this.buildings="all"===data?this.allBuildings:this.tempBuildings},addReadingPopUp:function(){this.readingpopup=!0},showtextCardPopUp:function(){this.showtextcard=!0},showEmptyDashboard:function(){this.showTabOptions=!1,this.dashboardLayout=[],this.dashboardTabLoading=!1,this.loading=!1,this.showGridstackComponent=!0},init:function(){var _this12=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee11(){var self;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context11){while(1)switch(_context11.prev=_context11.next){case 0:return self=_this12,_context11.next=3,_this12.loadFolder();case 3:"edit"===self.mode?self.loadDashboard():"new"===self.mode&&(self.setDefaultDashboard(),// Set the first folder in the list as current folder.
self.showEmptyDashboard());case 4:case"end":return _context11.stop()}}),_callee11)})))()},loadFolder:function(){var _this13=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee12(){var _this13$$route$query,_this13$$route,self,_ref11,appId,url,_yield$API$get2,data,error,_error$message6;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context12){while(1)switch(_context12.prev=_context12.next){case 0:return self=_this13,_ref11=null!==(_this13$$route$query=null===(_this13$$route=_this13.$route)||void 0===_this13$$route?void 0:_this13$$route.query)&&void 0!==_this13$$route$query?_this13$$route$query:{},appId=_ref11.appId,url="/dashboard/getDashboardFolder",(0,validation/* isEmpty */.xb)(appId)||(url+="?appId="+appId),_context12.next=6,api/* API */.bl.get(url);case 6:_yield$API$get2=_context12.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,(0,validation/* isEmpty */.xb)(error)?self.dashboardFolderList=data.dashboardFolders:_this13.$message.error(null!==(_error$message6=error.message)&&void 0!==_error$message6?_error$message6:"Error Occurred");case 10:case"end":return _context12.stop()}}),_callee12)})))()},handleSelect:function(item){this.dashbaordFolderName=item.name,this.selectedDashoardFolder=item},toggleDashboardTabEditor:function(){this.dashboardTabEditorVisibility=!this.dashboardTabEditorVisibility}}},dashboard_DashboardEditervue_type_script_lang_js=DashboardEditervue_type_script_lang_js,DashboardEditer_component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardEditervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardEditer=DashboardEditer_component.exports},
/***/797995:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CriteriaTable}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/CriteriaTable.vue?vue&type=template&id=57ecf97f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-report-pdf-details mT40"},[_c("div",{staticClass:"fc-report-pdf-heading"},[_vm._v(" REPORT CONDITIONS "),_vm.criteriaObj.conditions.length>1?_c("span",{staticClass:"fw4"},[_vm._v("( Matching Criteria : "+_vm._s(_vm.criteriaObj.pattern)+" )")]):_vm._e()]),_c("div",{staticClass:"pT20 flex-middle flex-wrap"},[_vm._l(_vm.criteriaObj.conditions,(function(condition,index){return[_c("div",{key:index,staticClass:"fc-report-pdf-border mB20 report-option-table",class:100===condition.width?"width50":"width100"},[_c("table",{staticClass:"width100"},[_c("td",{staticClass:"fc-rpeort-pdf-col-bg text-center",staticStyle:{width:"7%"}},[_vm._v(" "+_vm._s(condition.key)+" ")]),_c("td",{staticClass:"fc-report-pdf-border-left pl10",class:(condition.width,"width25")},[_vm._v(" "+_vm._s(condition.field)+" ")]),_c("td",{staticClass:"fc-report-pdf-border-left pl10 pR10 text-lowercase",class:(condition.width,"width25")},[_vm._v(" "+_vm._s(condition.operator)+" ")]),_c("td",{staticClass:"fc-report-pdf-border-left pl10 pR10",class:"width100"===condition.width?"width60":"width70"},[_vm._v(" "+_vm._s(_vm.formatCriteriaValue(condition.value,condition.fieldType))+" ")])])])]}))],2)])},staticRenderFns=[],CriteriaTablevue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(506203),{props:["criteriaObj"],mounted:function(){var _this=this;this.criteriaObj.conditions.forEach((function(condition){condition.value&&condition.value.length>30&&_this.$set(condition,"width",100)}))},methods:{formatCriteriaValue:function(valueArray,type){var self=this,values=[];return Array.isArray(valueArray)&&("Date"==type?valueArray.forEach((function(value){-1!=value&&values.push(self.$options.filters.formatDate(value,!0))})):"DateTime"==type?valueArray.forEach((function(value){-1!=value&&values.push(self.$options.filters.formatDate(value))})):values=valueArray),values.join(", ")}}}),report_CriteriaTablevue_type_script_lang_js=CriteriaTablevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(report_CriteriaTablevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CriteriaTable=component.exports},
/***/376662:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDateTimeFilter}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/components/FDateTimeFilter.vue?vue&type=template&id=3d3d91c4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"row report-user-filters"},[_vm._e()])},staticRenderFns=[],validation=(__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(300268),__webpack_require__(990260)),FDateTimeFiltervue_type_script_lang_js={props:["filters","report"],watch:{filters:{handler:function(newVal,oldVal){newVal!=oldVal&&this.applyDateTimeFilter(newVal)}}},methods:{applyDateTimeFilter:function(filters){var _this$report,ttimeFilter=this.formTTimeFilter(filters);ttimeFilter&&4!==(null===this||void 0===this||null===(_this$report=this.report)||void 0===_this$report?void 0:_this$report.reportType)&&this.$emit("applyTTimeFilter",{filters:ttimeFilter,isTTimeFilter:!0})},formTTimeFilter:function(filters){var formTTimeFilerObj={},flag=!0;if(filters){var keys=Object.keys(filters);if(keys.forEach((function(key,index){key&&key.startsWith("ttime_")&&(formTTimeFilerObj[key]=filters[key])})),flag&&!(0,validation/* isEmpty */.xb)(formTTimeFilerObj))return formTTimeFilerObj}return null}}},components_FDateTimeFiltervue_type_script_lang_js=FDateTimeFiltervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDateTimeFiltervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDateTimeFilter=component.exports},
/***/81938:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DashboardEmailReport}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/forms/DashboardEmailReport.vue?vue&type=template&id=789a73c7
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,"custom-class":"fc-dialog-center-container fc-dashboard-email-dialog","before-close":_vm.close,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.email_this_report"))+" ")])])]),_c("div",{staticClass:"height500 p30"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("To")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border2 width100 fc-tag",attrs:{multiple:"",filterable:"","default-first-option":"","collapse-tags":""},model:{value:_vm.mailJson.to,callback:function($$v){_vm.$set(_vm.mailJson,"to",$$v)},expression:"mailJson.to"}},_vm._l(_vm.users,(function(user){return user.inviteAcceptStatus?_c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}},[_vm._v(_vm._s(user.name+" ("+user.email+")"))]):_vm._e()})),1)],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Format "),_c("div",[_c("el-select",{staticClass:"fc-input-full-border2 width100 mT10",attrs:{"collapse-tags":""},model:{value:_vm.format,callback:function($$v){_vm.format=$$v},expression:"format"}},_vm._l(_vm.fileFormats,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1)],1)])])],1),_c("div",{staticClass:"fc-input-label-txt pT15",staticStyle:{clear:"both"}},[_vm._v("Subject")]),_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"text"},model:{value:_vm.mailJson.subject,callback:function($$v){_vm.$set(_vm.mailJson,"subject",$$v)},expression:"mailJson.subject"}})],1),_c("div",{staticClass:"fc-input-label-txt pT20"},[_vm._v("Description")]),_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"textarea",placeholder:_vm.$t("common._common.enter_desc"),autoComplete:"off",autosize:{minRows:4,maxRows:4},resize:"none"},model:{value:_vm.mailJson.message,callback:function($$v){_vm.$set(_vm.mailJson,"message",$$v)},expression:"mailJson.message"}})],1)],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.sendMail}},[_vm._v("SEND")])],1)])},staticRenderFns=[],vue_runtime_esm=(__webpack_require__(434284),__webpack_require__(506203),__webpack_require__(902918),__webpack_require__(648324),__webpack_require__(720144)),DashboardEmailReportvue_type_script_lang_js={props:["visibility","report","moduleReportConfig"],data:function(){return{format:1,mailJson:{to:[],subject:"",message:""}}},computed:{type:function(){var type=this.report.type;return type||-1},moduleName:function(){var module=this.report.module;return module&&module.name?module.name:null},users:function(){return this.$store.state.users},params:function(){var report=this.report,type=this.type;if(report&&1===type){var _report$dateRange,dateOperator=report.dateRange.operatorId,dateOperatorValue=20===report.dateRange.operatorId?null===(_report$dateRange=report.dateRange)||void 0===_report$dateRange||null===(_report$dateRange=_report$dateRange.time)||void 0===_report$dateRange?void 0:_report$dateRange.join(","):report.dateRange.value;!dateOperator&&null!==report&&void 0!==report&&report.dateOperator&&(dateOperator=report.dateOperator),!dateOperatorValue&&null!==report&&void 0!==report&&report.dateValue&&(dateOperatorValue=report.dateValue);var params={mode:this.type,startTime:report.dateRange.startTime,endTime:report.dateRange.endTime,dateOperator:dateOperator,dateOperatorValue:dateOperatorValue,chartType:report.chartState?report.chartState.type:null};return params}return{}},fileFormats:function(){var fileFormats={},formats=vue_runtime_esm["default"].prototype.$constants.FILE_FORMAT;if(this.report&&this.report.id&&-1!=this.report.id||this.params&&this.params.reportId)for(var format in formats)"Image"!==formats[format]&&(fileFormats[format]=formats[format]);else for(var _format in formats)"Image"!==formats[_format]&&"PDF"!==formats[_format]&&(fileFormats[_format]=formats[_format]);return fileFormats}},mounted:function(){this.report?(this.mailJson.subject=this.report.name+(this.report.name.endsWith("report")||this.report.name.endsWith("Report")?"":" report"),this.mailJson.message="Hi,\nThe report on "+this.report.name+" has been sent to you from "+this.$getProperty(window.brandConfig,"name","Facilio")+"."):this.mailJson.message="Hi,\nThis report has been sent to you."},methods:{close:function(){this.$emit("update:visibility",!1)},sendMail:function(){var self=this,type=this.type,url=null;if(this.mailJson.to.length&&this.mailJson.subject){var mailTemplate=this.$helpers.cloneObject(this.mailJson);this.$common.setUserMailWorkflow(this.mailJson.to,mailTemplate);var data={fileFormat:this.format,emailTemplate:mailTemplate};2===type?(this.report.id&&-1!==this.report.id?data["reportId"]=this.report.id:(this.$helpers.extend(data,this.moduleReportConfig),data["moduleName"]=this.moduleName),this.$message({message:"Sending email...",duration:0}),this.close(),url="/v2/report/sendModuleReportMail"):(this.$helpers.extend(data,this.params),this.report.id&&-1!==this.report.id&&(data["reportId"]=this.report.id),this.$message({message:"Sending email...",duration:0}),this.close(),url="/v2/report/sendMail",this.report&&4===this.report.type&&this.report.currentTemplate&&(url=url+"?templateString="+encodeURIComponent(JSON.stringify(this.report.currentTemplate)))),this.$http.post(url,data).then((function(response){self.$message.closeAll(),response.data&&0===response.data.responseCode?(self.$message({message:"Email sent successfully!",type:"success"}),self.mailJson.to=[],self.mailJson.subject="",self.mailJson.message=""):self.$message({message:"Email sending failed!",type:"error"})}))}}}},forms_DashboardEmailReportvue_type_script_lang_js=DashboardEmailReportvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_DashboardEmailReportvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardEmailReport=component.exports},
/***/215748:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"5345996a3e23b269740d087ef40865a0.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/65816.js.map