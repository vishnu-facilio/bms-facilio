"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[27978],{
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/622957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupEmptyState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupEmptyState.vue?vue&type=template&id=839bdf38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-empty"},[_c("div",{staticClass:"fc-setup-empty-image"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}})],1),_c("div",{staticClass:"fc-setup-empty-txt"},[_vm._t("emptyHeading")],2),_c("div",{staticClass:"fc-setup-empty-txt-desc"},[_vm._t("emptyDescription")],2)])},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupEmptyState=component.exports},
/***/875396:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewWebTabPermission}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/roles/NewWebTabPermission.vue?vue&type=template&id=39141442
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-animated slideInRight fc-dialog-form fc-dialog-right setup-dialog80 setup-dialog webtab-role","before-close":_vm.closeDialog}},[_c("div",{staticClass:"header-layout"},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{staticClass:"header-content"},[_c("div",[_c("div",{staticClass:"role-name"},[_vm._v(_vm._s(_vm.role.name))]),_c("div",{staticClass:"role-descrip"},[_vm._v(_vm._s(_vm.role.description))])]),_c("div",[_c("el-button",{staticClass:"fc-v1-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"fc-v1-btn-save",attrs:{loading:_vm.saving},on:{click:_vm.saveRole}},[_vm._v(_vm._s(_vm.saving?"Saving":"Save")+" ")])],1)]),_c("div",{staticClass:"header-content mT10"},[_c("div",[_c("inline-svg",{staticClass:"vertical-middle mR5",attrs:{src:"product-icons/app",iconClass:"icon icon-md"}}),_vm._v(" "+_vm._s(_vm.appName)+" ")],1),_c("div",[_c("inline-svg",{staticClass:"mL5",attrs:{src:"svgs/default-view",iconClass:_vm.getViewIconClass(_vm.layoutTypes.DEFAULT_VIEW)},nativeOn:{click:function($event){return _vm.selectView(_vm.layoutTypes.DEFAULT_VIEW)}}}),_c("inline-svg",{staticClass:"mL5",attrs:{src:"svgs/web-view",iconClass:_vm.getViewIconClass(_vm.layoutTypes.WEB_VIEW)},nativeOn:{click:function($event){return _vm.selectView(_vm.layoutTypes.WEB_VIEW)}}}),_c("inline-svg",{staticClass:"mL5",attrs:{src:"svgs/mobile-view",iconClass:_vm.getViewIconClass(_vm.layoutTypes.MOBILE_VIEW)},nativeOn:{click:function($event){return _vm.selectView(_vm.layoutTypes.MOBILE_VIEW)}}})],1)])],1),_c("div",{staticClass:"tab-permission-layout"},[_c("div",{staticClass:"tab-permission-sidebar"},[_vm.selectedLayout===_vm.layoutTypes.DEFAULT_VIEW?[_c("div",{staticClass:"search-box"},[_c("i",{staticClass:"el-icon-search pT7 pR10",staticStyle:{color:"rgba(0, 0, 0, 0.5)"}}),_c("el-input",{attrs:{placeholder:"Search tabs",autofocus:!0,clearable:""},model:{value:_vm.filterValue,callback:function($$v){_vm.filterValue=$$v},expression:"filterValue"}})],1),_c("div",{staticClass:"sidebar-container pB100"},[_vm.tabListLoading?_vm._l([1,2,3,4,5],(function(index){return _c("div",{key:index,staticStyle:{padding:"10px 30px"}},[_c("span",{staticClass:"tab-lines loading-shimmer"})])})):_vm._l(_vm.filteredTabs,(function(tab){return _c("div",{key:tab.id,staticClass:"tab-list-name",attrs:{id:_vm.trimTabName(tab.name)+"-link"},on:{click:function($event){_vm.scrollTo(_vm.trimTabName(tab.name))}}},[_vm._v(" "+_vm._s(tab.name)+" ")])}))],2)]:[_c("div",{staticClass:"sidebar-container"},[_vm.groupListLoading?_vm._l([1,2,3,4,5],(function(index){return _c("div",{key:index,staticStyle:{padding:"10px 30px"}},[_c("span",{staticClass:"grp-lines loading-shimmer"})])})):_vm._l(_vm.groupPermissions,(function(group){return _c("div",{key:group.id,class:["group-list",_vm.activeGroupId===group.id&&"active"],on:{click:function($event){_vm.activeGroupId=group.id}}},[_c("inline-svg",{staticClass:"mR20",attrs:{src:_vm.getGroupIcon(group.iconType),iconClass:"icon group-icon-color "+_vm.getGroupIconClass(group.iconType)}}),_c("div",[_c("div",{staticClass:"group-name"},[_vm._v(_vm._s(group.name))]),_c("div",{staticClass:"group-tabs textoverflow-ellipsis"},[_vm._v(" "+_vm._s(_vm.getTabNames(group.tabs))+" ")])]),_c("el-switch",{staticClass:"mL-auto",on:{change:function($event){return _vm.toggleGroupPermissions(group)}},model:{value:group.groupPermission,callback:function($$v){_vm.$set(group,"groupPermission",$$v)},expression:"group.groupPermission"}})],1)}))],2)]],2),_c("div",{staticClass:"tab-permission-content"},[_vm.showEmptyState?_c("div",{staticClass:"empty-state-class"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/history",iconClass:"icon icon-xxxxlg"}}),_vm.selectedLayout!==_vm.layoutTypes.DEFAULT_VIEW?[_vm.$validation.isEmpty(_vm.groupPermissions)?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common._common.no_groups_available_app",{appName:_vm.appName}))+" ")]):_vm.$validation.isEmpty(_vm.tabListForGroup)&&_vm.activeGroupId?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common._common.no_tabs_associated_for_group"))+" ")]):_vm._e()]:_c("div",[_vm._v(" "+_vm._s(_vm.$t("common._common.no_tabs_available_app",{appName:_vm.appName}))+" ")])],2):_vm.tabListLoading||_vm.groupListLoading?_c("div",{staticClass:"loading-state-class"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):[_vm.selectedLayout!==_vm.layoutTypes.DEFAULT_VIEW?_c("div",{staticClass:"group-header-wrapper"},[_c("div",{staticClass:"group-tabs-header"},_vm._l(_vm.tabListForGroup,(function(tab){return _c("div",{key:tab.id,staticClass:"selected-group-tab-name",attrs:{id:_vm.trimTabName(tab.name)+"-link"},on:{click:function($event){_vm.scrollTo(_vm.trimTabName(tab.name))}}},[_vm._v(" "+_vm._s(tab.name)+" "),_c("div",{staticClass:"border-highlight"})])})),0)]):_vm._e(),_c("div",{staticClass:"tab-content-layout"},_vm._l(_vm.tabListForGroup,(function(tab){return _c("div",{key:tab.id,staticClass:"pT20 pB20",attrs:{id:_vm.trimTabName(tab.name)+"-section"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"tab-name"},[_vm._v(_vm._s(tab.name))]),_c("div",{staticClass:"mL-auto"},[_vm._v(" "+_vm._s(tab.tabPermission?"Enabled":"Enable")+" ")]),_c("el-switch",{staticClass:"mL10 mR20",attrs:{"active-color":"#ef4f8f"},on:{change:function($event){return _vm.toggleTabPermissions(tab)}},model:{value:tab.tabPermission,callback:function($$v){_vm.$set(tab,"tabPermission",$$v)},expression:"tab.tabPermission"}})],1),_c("div",{staticClass:"tab-permissions"},[_vm._l(tab.permission,(function(permissionVal,permissionName,index){return[_c("div",{key:permissionName+"-"+index,staticClass:"tab-permission-list"},[_c("div",{staticClass:"tab-permission-name"},[_vm._v(" "+_vm._s(permissionName)+" ")]),_c("el-switch",{staticClass:"width50px mL20",on:{change:function($event){return _vm.togglePermission(tab,permissionName)}},model:{value:permissionVal.enabled,callback:function($$v){_vm.$set(permissionVal,"enabled",$$v)},expression:"permissionVal.enabled"}}),_c("div",{staticClass:"mL20"},[permissionVal.enabled&&permissionVal.permissions?_c("el-radio-group",{staticClass:"fc-radio-btn",model:{value:permissionVal.actionName,callback:function($$v){_vm.$set(permissionVal,"actionName",$$v)},expression:"permissionVal.actionName"}},_vm._l(permissionVal.permissions,(function(perm,permName){return _c("el-radio",{key:perm.actionName,attrs:{label:perm.actionName}},[_vm._v(" "+_vm._s(permName)+" ")])})),1):_vm._e()],1)],1),permissionVal.enabled&&permissionVal.subPermission?_vm._l(permissionVal.subPermission,(function(subPermVal,subPermName,index){return _c("div",{key:subPermName+"-"+index,staticClass:"tab-permission-list"},[_c("div",{staticClass:"tab-subpermission-name"},[_vm._v(" "+_vm._s(subPermName)+" ")]),_c("el-switch",{staticClass:"mL20 tab-subpermission-padding",model:{value:subPermVal.enabled,callback:function($$v){_vm.$set(subPermVal,"enabled",$$v)},expression:"subPermVal.enabled"}})],1)})):_vm._e()]}))],2)])})),0)]],2)])])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),defineProperty=__webpack_require__(482482),api=(__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(169358),__webpack_require__(186466),__webpack_require__(450886),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(32284)),validation=__webpack_require__(990260),ErrorBanner=__webpack_require__(297157),ScrollHandlingMixin=__webpack_require__(409697),sortBy=__webpack_require__(189734),sortBy_default=__webpack_require__.n(sortBy),webtabUtil=__webpack_require__(617494),layoutTypes={DEFAULT_VIEW:0,WEB_VIEW:1,MOBILE_VIEW:2},NewWebTabPermissionvue_type_script_lang_js={props:["role","app"],components:{ErrorBanner:ErrorBanner/* default */.Z},mixins:[ScrollHandlingMixin/* default */.Z],data:function(){return{tabPermissions:[],groupPermissions:[],errorText:"Please enter role name",error:!1,saving:!1,selectedLayout:1,filterValue:null,iconClass:"icon icon-xxxl p5 pointer",groupListLoading:!1,tabListLoading:!1,appLayouts:null,activeGroupId:null,layoutTypes:layoutTypes,getGroupIcon:webtabUtil/* getGroupIcon */.rG,getGroupIconClass:webtabUtil/* getGroupIconClass */.Hg}},computed:{appId:function(){return this.app.id},appName:function(){return this.app.name||"this app"},filteredTabs:function(){var filterValue=this.filterValue,tabPermissions=this.tabPermissions;return(0,validation/* isEmpty */.xb)(filterValue)?tabPermissions:tabPermissions.filter((function(tab){var tabName=tab.name.toLowerCase();return tabName.includes(filterValue.toLowerCase())}))},tabListForGroup:function(){var activeGroupId=this.activeGroupId,tabPermissions=this.tabPermissions,selectedLayout=this.selectedLayout,layoutTypes=this.layoutTypes,groupPermissions=this.groupPermissions;if(selectedLayout!==layoutTypes.DEFAULT_VIEW&&!(0,validation/* isEmpty */.xb)(activeGroupId)){var _groupPermissions$fin=groupPermissions.find((function(group){return group.id===activeGroupId})),tabs=_groupPermissions$fin.tabs;return tabPermissions.filter((function(tab){return!(0,validation/* isEmpty */.xb)(tabs[tab.id])}))}return tabPermissions},enabledLayouts:function(){var _enabledLayouts,appLayouts=this.appLayouts,_this$layoutTypes=this.layoutTypes,DEFAULT_VIEW=_this$layoutTypes.DEFAULT_VIEW,WEB_VIEW=_this$layoutTypes.WEB_VIEW,MOBILE_VIEW=_this$layoutTypes.MOBILE_VIEW,enabledLayouts=(_enabledLayouts={},(0,defineProperty/* default */.Z)(_enabledLayouts,DEFAULT_VIEW,!0),(0,defineProperty/* default */.Z)(_enabledLayouts,WEB_VIEW,!1),(0,defineProperty/* default */.Z)(_enabledLayouts,MOBILE_VIEW,!1),_enabledLayouts);return(0,validation/* isEmpty */.xb)(appLayouts)||appLayouts.forEach((function(layout){enabledLayouts[layout.layoutDeviceType]=!0})),enabledLayouts},showEmptyState:function(){var groupPermissions=this.groupPermissions,tabListForGroup=this.tabListForGroup,selectedLayout=this.selectedLayout,layoutTypes=this.layoutTypes,tabListLoading=this.tabListLoading,groupListLoading=this.groupListLoading,defaultLayout=selectedLayout===layoutTypes.DEFAULT_VIEW;return defaultLayout&&!tabListLoading?(0,validation/* isEmpty */.xb)(tabListForGroup):!defaultLayout&&!groupListLoading&&((0,validation/* isEmpty */.xb)(groupPermissions)||(0,validation/* isEmpty */.xb)(tabListForGroup))}},created:function(){this.init()},watch:{selectedLayout:function(value){value!==this.layoutTypes.DEFAULT_VIEW?(this.constructGroupPermission(),this.activeGroupId=this.$getProperty(this.groupPermissions,"0.id",null)):this.activeGroupId=null},tabListForGroup:function(value){var _this=this;this.sidebarElements=[],this.sectionElements=[],this.setElementsId(),(0,validation/* isEmpty */.xb)(value)||this.$nextTick((function(){var tabName=_this.trimTabName(value[0].name);_this.scrollTo(tabName)}))},enabledLayouts:function(value){var _this$layoutTypes2=this.layoutTypes,DEFAULT_VIEW=_this$layoutTypes2.DEFAULT_VIEW,WEB_VIEW=_this$layoutTypes2.WEB_VIEW,MOBILE_VIEW=_this$layoutTypes2.MOBILE_VIEW,selectedLayout=this.selectedLayout;selectedLayout!==WEB_VIEW||value[selectedLayout]||(value[MOBILE_VIEW]?this.selectedLayout=MOBILE_VIEW:this.selectedLayout=DEFAULT_VIEW)}},methods:{loadTabs:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var role,_ref,roleId,additionalParams,_yield$loadAppTabs,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return role=_this2.role,_ref=role||{},roleId=_ref.roleId,additionalParams={roleId:roleId},_context.next=5,(0,webtabUtil/* loadAppTabs */.V)(_this2.appId,additionalParams);case 5:_yield$loadAppTabs=_context.sent,error=_yield$loadAppTabs.error,data=_yield$loadAppTabs.data,error?_this2.$message.error(error.message||"Error Occured"):_this2.constructTabPermission(data),_this2.tabListLoading=!1;case 10:case"end":return _context.stop()}}),_callee)})))()},loadAppLayouts:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var role,_ref2,roleId,additionalParams,_yield$loadLayouts,error,data,_ref3,layouts;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return role=_this3.role,_ref2=role||{},roleId=_ref2.roleId,additionalParams={roleId:roleId},_context2.next=5,(0,webtabUtil/* loadLayouts */.H8)(_this3.appId,!0,additionalParams);case 5:_yield$loadLayouts=_context2.sent,error=_yield$loadLayouts.error,data=_yield$loadLayouts.data,error?_this3.$message.error(error.message||"Error Occured"):(_ref3=data||{},layouts=_ref3.layouts,_this3.appLayouts=layouts,_this3.constructGroupPermission(),_this3.activeGroupId=_this3.$getProperty(_this3.groupPermissions,"0.id",null),_this3.$nextTick(_this3.registerScrollHandler)),_this3.groupListLoading=!1;case 10:case"end":return _context2.stop()}}),_callee2)})))()},init:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.tabListLoading=!0,_this4.groupListLoading=!0,_context3.next=4,_this4.loadTabs();case 4:return _context3.next=6,_this4.loadAppLayouts();case 6:case"end":return _context3.stop()}}),_callee3)})))()},constructTabPermission:function(tabsList){var _this5=this,tabPermissions=tabsList.reduce((function(tabWithPermission,tab){var permission=tab.permission,id=tab.id,name=tab.name,tabPermissions=_this5.setTabPermissions(permission),_ref4=tabPermissions||{},tabHasPermission=_ref4.tabHasPermission,permissionList=_ref4.permissionList,tabPermission={id:id,name:name,tabPermission:tabHasPermission,permission:permissionList};return tabWithPermission.push(tabPermission),tabWithPermission}),[]);this.tabPermissions=tabPermissions.filter((function(tab){return!(0,validation/* isEmpty */.xb)(tab.permission)||!(0,validation/* isEmpty */.xb)(tab.permission2)}))},setTabPermissions:function(permission){var tabHasPermission=!1,permissionList=[];return(0,validation/* isEmpty */.xb)(permission)||(permissionList=permission.reduce((function(permissionObj,permName){var actionName=permName.actionName,displayName=permName.displayName,value=permName.value,permissions=permName.permissions,permissionMapping=permName.permissionMapping,enabled=permName.enabled,subPermName="";enabled&&(tabHasPermission=!0),actionName&&(subPermName=actionName.toLowerCase().split("_")[0]);var parentPermName=Object.keys(permissionObj).find((function(perm){return subPermName===perm.toLowerCase()}));if(parentPermName)permissionObj[parentPermName].subPermission=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},permissionObj[parentPermName].subPermission),{},(0,defineProperty/* default */.Z)({},displayName,{actionName:actionName,value:value,enabled:enabled,permissionMapping:permissionMapping}));else if(permissionObj[displayName]={actionName:actionName,value:value,enabled:enabled,permissionMapping:permissionMapping},!(0,validation/* isEmpty */.xb)(permissions)){var activeActionName,permissionEnabled={},rolePermission=permissions.reduce((function(rolePerm,perm){var actionName=perm.actionName,displayName=perm.displayName,value=perm.value,permissionMapping=perm.permissionMapping,enabled=perm.enabled;return enabled&&(permissionEnabled={enabled:enabled,value:value,permissionMapping:permissionMapping},tabHasPermission=!0,activeActionName=actionName),rolePerm[displayName]={actionName:actionName,value:value,permissionMapping:permissionMapping,enabled:enabled},rolePerm}),{});permissionObj[displayName]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},permissionObj[displayName]),permissionEnabled),{},{actionName:activeActionName,permissions:rolePermission})}return permissionObj}),{})),{permissionList:permissionList,tabHasPermission:tabHasPermission}},constructGroupPermission:function(){var _this6=this,_ref5=this.appLayouts.find((function(view){return view.layoutDeviceType===_this6.selectedLayout}))||{},groups=_ref5.webTabGroupList;if((0,validation/* isEmpty */.xb)(groups))this.groupPermissions=[];else{var groupPermissions=groups.reduce((function(groupWithPermission,group){var id=group.id,name=group.name,iconType=group.iconType,_group$webTabs=group.webTabs,webTabs=void 0===_group$webTabs?[]:_group$webTabs,order=group.order;webTabs=webTabs.filter((function(tab){return!(0,validation/* isEmpty */.xb)(tab.permission)}));var tabs=webTabs.reduce((function(groupTab,tab){return groupTab[tab.id]=tab.name,groupTab}),{}),groupPermission={id:id,name:name,iconType:iconType,tabs:tabs,order:order,groupPermission:_this6.checkGroupPermission(tabs)};return!(0,validation/* isEmpty */.xb)(tabs)&&Object.keys(tabs).length>0&&groupWithPermission.push(groupPermission),groupWithPermission}),[]);this.groupPermissions=sortBy_default()(groupPermissions,["order"])}},checkGroupPermission:function(tabs){return this.tabPermissions.reduce((function(hasPerm,tab){var id=tab.id,tabPermission=tab.tabPermission;return(0,validation/* isEmpty */.xb)(tabs[id])||(hasPerm=hasPerm||tabPermission),hasPerm}),!1)},toggleGroupPermissions:function(group){var _this7=this,groupPermission=group.groupPermission,tabs=group.tabs;this.tabPermissions.forEach((function(tab){(0,validation/* isEmpty */.xb)(tabs[tab.id])||(tab.tabPermission=groupPermission,_this7.toggleSubTabPermission(tab,groupPermission))}))},toggleTabPermissions:function(tab){var tabPermission=tab.tabPermission,id=tab.id;this.toggleSubTabPermission(tab,tabPermission),this.toggleGroup(id)},togglePermission:function(tab,permissionName){var _this8=this,permission=tab.permission,id=tab.id,isTabActive=Object.values(permission).reduce((function(isPermEnabled,tabpermission){var enabled=tabpermission.enabled;return isPermEnabled=isPermEnabled||enabled,isPermEnabled}),!1),_permission$permissio=permission[permissionName],enabled=_permission$permissio.enabled,permissions=_permission$permissio.permissions,subPermission=_permission$permissio.subPermission,actualPermission=(permission||{})[permissionName];if(!(0,validation/* isEmpty */.xb)(permissions))if(enabled){var key=Object.keys(permissions)[0],_key=(permissions||{})[key],value=_key.value,permissionMapping=_key.permissionMapping,actionName=_key.actionName;(0,validation/* isEmpty */.xb)(actualPermission)||(this.$setProperty(tab,"permission.".concat(permissionName,".value"),value),this.$setProperty(tab,"permission.".concat(permissionName,".permissionMapping"),permissionMapping),this.$setProperty(tab,"permission.".concat(permissionName,".actionName"),actionName))}//First role
else(0,validation/* isEmpty */.xb)(actualPermission)||this.$setProperty(tab,"permission.".concat(permissionName,".value"),0);(0,validation/* isEmpty */.xb)(subPermission)||Object.keys(subPermission).forEach((function(perm){var _ref6=tab||{},permission=_ref6.permission,permissionObj=(permission||{})[permissionName],_ref7=permissionObj||{},subPermission=_ref7.subPermission,actualSubPermission=(subPermission||{})[perm];if(!(0,validation/* isEmpty */.xb)(actualSubPermission)){var _subPermission=_this8.$getProperty(tab,"permission.".concat(permissionName,".subPermission"))||{};_this8.$setProperty(_subPermission,"".concat(perm,".enabled"),enabled),_this8.$setProperty(tab,"permission.".concat(permissionName,".subPermission"),_subPermission)}})),tab.tabPermission=isTabActive,this.toggleGroup(id)},toggleGroup:function(tabId){var currentGroup=this.groupPermissions.find((function(group){return!(0,validation/* isEmpty */.xb)(group.tabs[tabId])}));(0,validation/* isEmpty */.xb)(currentGroup)||(currentGroup.groupPermission=this.tabListForGroup.reduce((function(isPermEnabled,tab){return isPermEnabled=isPermEnabled||tab.tabPermission,isPermEnabled}),!1))},toggleSubTabPermission:function(tab,enabledVal){var _this9=this,permission=tab.permission;(0,validation/* isEmpty */.xb)(permission)||Object.values(permission).forEach((function(tabPerm){var permissions=tabPerm.permissions,subPermission=tabPerm.subPermission;if(tabPerm.enabled=enabledVal,!(0,validation/* isEmpty */.xb)(permissions)){if(enabledVal){var key=Object.keys(permissions)[0],actualPermission=permissions[key]||{},value=actualPermission.value,permissionMapping=actualPermission.permissionMapping,actionName=actualPermission.actionName;(0,validation/* isEmpty */.xb)(actualPermission)||(tabPerm.value=value,tabPerm.permissionMapping=permissionMapping,tabPerm.actionName=actionName)}else tabPerm.value=0;(0,validation/* isEmpty */.xb)(subPermission)||Object.keys(subPermission).forEach((function(perm){var _ref8=tabPerm||{},subPermission=_ref8.subPermission,actualSubPerm=(subPermission||{})[perm];(0,validation/* isEmpty */.xb)(actualSubPerm)||_this9.$setProperty(tabPerm,"subPermission.".concat(perm,".enabled"),enabledVal)}))}}))},getTabNames:function(tabs){return Object.values(tabs).reduce((function(tabNames,tab,index,tabs){var tabsLength=tabs.length;return tabNames+=tab,tabsLength!==index+1&&(tabNames+=", "),tabNames}),"")},serialize:function(){var _this10=this,permissions=this.tabPermissions.map((function(tab){var id=tab.id,permission=tab.permission;if(permission){var tabObj={id:id,permission:_this10.getAllPermissionForTab(permission)};return tabObj}return null})).filter((function(tab){return!(0,validation/* isEmpty */.xb)(tab)}));return permissions},getAllPermissionForTab:function(permission){var permissionList=[];return Object.values(permission).map((function(value){(0,validation/* isEmpty */.xb)(value["subPermission"])||permissionList.push.apply(permissionList,(0,toConsumableArray/* default */.Z)(Object.values(value["subPermission"]))),permissionList.push(value)})),permissionList},getViewIconClass:function(layoutType){var iconClass=this.iconClass;return this.enabledLayouts[layoutType]||(iconClass+=" fill-disabled-grey"),layoutType===this.selectedLayout&&(iconClass+=" fill-pink"),iconClass},selectView:function(layoutType){!this.groupListLoading&&this.enabledLayouts[layoutType]&&(this.selectedLayout=layoutType)},saveRole:function(){var _this11=this;if((0,validation/* isEmpty */.xb)(this.role.name))this.error=!0;else{this.error=!1;var url="/setup/updateWebTabRole",_this$role=this.role,name=_this$role.name,description=_this$role.description,roleId=_this$role.roleId,appId=this.appId,role={name:name,description:description,roleId:roleId},params={role:role,roleApp:[{applicationId:appId}],webTabs:this.serialize()};this.saving=!0,api/* API */.bl.post(url,params).then((function(_ref9){var error=_ref9.error;error?_this11.$message.error(error.message||"Error occured while saving"):(_this11.$message.success("Saved Successfully"),_this11.$emit("onSave"),_this11.closeDialog())})).finally((function(){_this11.saving=!1}))}},closeDialog:function(){this.$emit("onClose")}}},roles_NewWebTabPermissionvue_type_script_lang_js=NewWebTabPermissionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(roles_NewWebTabPermissionvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewWebTabPermission=component.exports},
/***/796210:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RoleDetailsForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/roles/RoleDetailsForm.vue?vue&type=template&id=5bd026bf
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:(_vm.isNew?"New":"Edit")+" Role",visible:!0,width:"30%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("el-form",{ref:"roleForm",staticClass:"pB50",attrs:{model:_vm.role,rules:_vm.rules,"label-position":"top"}},[_c("el-form-item",{attrs:{label:_vm.$t("common.products.name"),prop:"name"}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{placeholder:_vm.$t("common._common.enter_role_name"),autofocus:""},model:{value:_vm.role.name,callback:function($$v){_vm.$set(_vm.role,"name",$$v)},expression:"role.name"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("common.wo_report.report_description"),prop:"description"}},[_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:_vm.$t("setup.setupLabel.add_a_decs"),resize:"none"},model:{value:_vm.role.description,callback:function($$v){_vm.$set(_vm.role,"description",$$v)},expression:"role.description"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveRole}},[_vm._v(" "+_vm._s(_vm.$t("common._common.confirm"))+" ")])],1)],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(450886),__webpack_require__(32284)),validation=__webpack_require__(990260),RoleDetailsFormvue_type_script_lang_js={props:["isNew","role","appId","isWebTabRole"],data:function(){return{rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"}}}},methods:{saveRole:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var appId,valid,_this$role,name,description,roleId,_this$role$newPermiss,newPermissions,_this$role$permission,permissions,params,successMsg,url,newPerm;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return appId=_this.appId,_context.next=3,_this.$refs["roleForm"].validate();case 3:if(valid=_context.sent,valid){_context.next=6;break}return _context.abrupt("return");case 6:_this$role=_this.role,name=_this$role.name,description=_this$role.description,roleId=_this$role.roleId,_this$role$newPermiss=_this$role.newPermissions,newPermissions=void 0===_this$role$newPermiss?[]:_this$role$newPermiss,_this$role$permission=_this$role.permissions,permissions=void 0===_this$role$permission?[]:_this$role$permission,params={},successMsg="",url="",_this.isNew?(url="/setup/addRole",successMsg=_this.$t("common.products.role_created_successfully"),params={role:{name:name,description:description},roleApp:[{applicationId:appId}],permissions:[]}):(successMsg=_this.$t("common.products.role_updated_successfully"),_this.isWebTabRole?(url="/setup/updateWebTabRole",newPerm=[],(0,validation/* isEmpty */.xb)(newPermissions)||(newPerm=newPermissions.map((function(perm){var tabId=perm.tabId,permission=perm.permission;return{tabId:tabId,permission:permission}}))),params={role:{name:name,description:description,roleId:roleId},roleApp:[{applicationId:appId}],newPermissions:newPerm}):(url="/setup/updaterole",params={role:{name:name,description:description,roleId:roleId},roleApp:[{applicationId:appId}],permissions:permissions})),api/* API */.bl.post(url,params).then((function(_ref){var error=_ref.error;error?_this.$message.error(error.message||"Error Occured"):(_this.$message.success(successMsg),_this.$emit("onSave"),_this.closeDialog())}));case 12:case"end":return _context.stop()}}),_callee)})))()},closeDialog:function(){this.$emit("onClose")}}},roles_RoleDetailsFormvue_type_script_lang_js=RoleDetailsFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(roles_RoleDetailsFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RoleDetailsForm=component.exports},
/***/409697:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScrollHandlingMixin}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(538077),__webpack_require__(450886);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var render,staticRenderFns,vue_scrollto=__webpack_require__(593081),vue_scrollto_default=__webpack_require__.n(vue_scrollto),validation=__webpack_require__(990260),ScrollHandlingMixinvue_type_script_lang_js={data:function(){return{rootElementForScroll:".tab-content-layout",sidebarElements:[],sectionElements:[]}},beforeDestroy:function(){var root=document.querySelector(this.rootElementForScroll);root&&root.removeEventListener("scroll",this.scrollhandler)},methods:{setElementsId:function(){var _this=this;this.tabListForGroup.forEach((function(tab){var name=tab.name;_this.sidebarElements.push("#".concat(_this.trimTabName(name),"-link")),_this.sectionElements.push("#".concat(_this.trimTabName(name),"-section"))}))},trimTabName:function(tabName){var trimmedName=tabName.replace(/\W+/g,"");return trimmedName},registerScrollHandler:function(){var root=document.querySelector(this.rootElementForScroll);root&&root.addEventListener("scroll",this.scrollhandler,{passive:!0})},scrollTo:function(sectionName){var _this2=this,rootElementForScroll=this.rootElementForScroll,onDone=function(){return _this2.highlightSidebarElement(sectionName)};vue_scrollto_default().scrollTo("#".concat(sectionName,"-section"),500,{container:rootElementForScroll,easing:"ease-in",offset:0,force:!0,onDone:onDone})},highlightSidebarElement:function(sectionName){var elements=this.sidebarElements.map((function(e){return document.querySelector(e)})).filter((function(e){return!(0,validation/* isEmpty */.xb)(e)}));elements.forEach((function(el){el.getAttribute("id")==="".concat(sectionName,"-link")?el.classList.add("active"):el.classList.remove("active")}))},scrollhandler:function(){var highlightSidebarElement=this.highlightSidebarElement,layoutType=this.layoutType,layoutTypes=this.layoutTypes,elements=this.sectionElements.map((function(id){return document.querySelector(id)}));window.requestAnimationFrame((function(){elements.forEach((function(el){var _el$getBoundingClient=el.getBoundingClientRect(),top=_el$getBoundingClient.top,sectionName=el.getAttribute("id").split("-")[0],topScrollHeight=layoutType!==layoutTypes.DEFAULT_VIEW?200:160;top<=topScrollHeight&&highlightSidebarElement(sectionName)}))}))}}},roles_ScrollHandlingMixinvue_type_script_lang_js=ScrollHandlingMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(roles_ScrollHandlingMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScrollHandlingMixin=component.exports},
/***/828604:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WebTabRolePermission}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/roles/WebTabRolePermission.vue?vue&type=template&id=2d6f7108
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-animated slideInRight fc-dialog-form fc-dialog-right setup-dialog80 setup-dialog webtab-role","before-close":_vm.closeDialog}},[_c("div",{staticClass:"header-layout"},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{staticClass:"header-content"},[_c("div",[_c("div",{staticClass:"role-name"},[_vm._v(_vm._s(_vm.role.name))]),_c("div",{staticClass:"role-descrip"},[_vm._v(_vm._s(_vm.role.description))])]),_c("div",[_c("el-button",{staticClass:"fc-v1-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel ")]),_c("el-button",{staticClass:"fc-v1-btn-save",attrs:{loading:_vm.saving},on:{click:_vm.saveRole}},[_vm._v(_vm._s(_vm.saving?"Saving":"Save")+" ")])],1)]),_c("div",{staticClass:"header-content mT10"},[_c("div",[_c("inline-svg",{staticClass:"vertical-middle mR5",attrs:{src:"product-icons/app",iconClass:"icon icon-md"}}),_vm._v(" "+_vm._s(_vm.appName)+" ")],1),_c("div",[_c("inline-svg",{staticClass:"mL5",attrs:{src:"svgs/default-view",iconClass:_vm.getViewIconClass(_vm.layoutTypes.DEFAULT_VIEW)},nativeOn:{click:function($event){return _vm.selectView(_vm.layoutTypes.DEFAULT_VIEW)}}}),_c("inline-svg",{staticClass:"mL5",attrs:{src:"svgs/web-view",iconClass:_vm.getViewIconClass(_vm.layoutTypes.WEB_VIEW)},nativeOn:{click:function($event){return _vm.selectView(_vm.layoutTypes.WEB_VIEW)}}}),_c("inline-svg",{staticClass:"mL5",attrs:{src:"svgs/mobile-view",iconClass:_vm.getViewIconClass(_vm.layoutTypes.MOBILE_VIEW)},nativeOn:{click:function($event){return _vm.selectView(_vm.layoutTypes.MOBILE_VIEW)}}})],1)])],1),_c("div",{staticClass:"tab-permission-layout"},[_c("div",{staticClass:"tab-permission-sidebar"},[_vm.selectedLayout===_vm.layoutTypes.DEFAULT_VIEW?[_c("div",{staticClass:"search-box"},[_c("i",{staticClass:"el-icon-search pT7 pR10",staticStyle:{color:"rgba(0, 0, 0, 0.5)"}}),_c("el-input",{attrs:{placeholder:"Search tabs",autofocus:!0,clearable:""},model:{value:_vm.filterValue,callback:function($$v){_vm.filterValue=$$v},expression:"filterValue"}})],1),_c("div",{staticClass:"sidebar-container pB100"},[_vm.tabListLoading?_vm._l([1,2,3,4,5],(function(index){return _c("div",{key:index,staticStyle:{padding:"10px 30px"}},[_c("span",{staticClass:"tab-lines loading-shimmer"})])})):_vm._l(_vm.filteredTabs,(function(tab){return _c("div",{key:tab.id,staticClass:"tab-list-name",attrs:{id:_vm.trimTabName(tab.name)+"-link"},on:{click:function($event){_vm.scrollTo(_vm.trimTabName(tab.name))}}},[_vm._v(" "+_vm._s(tab.name)+" ")])}))],2)]:[_c("div",{staticClass:"sidebar-container"},[_vm.groupListLoading?_vm._l([1,2,3,4,5],(function(index){return _c("div",{key:index,staticStyle:{padding:"10px 30px"}},[_c("span",{staticClass:"grp-lines loading-shimmer"})])})):_vm._l(_vm.groupPermissions,(function(group){return _c("div",{key:group.id,class:["group-list",_vm.activeGroupId===group.id&&"active"],on:{click:function($event){_vm.activeGroupId=group.id}}},[_c("inline-svg",{staticClass:"mR20",attrs:{src:_vm.getGroupIcon(group.iconType),iconClass:"icon group-icon-color "+_vm.getGroupIconClass(group.iconType)}}),_c("div",[_c("div",{staticClass:"group-name"},[_vm._v(_vm._s(group.name))]),_c("div",{staticClass:"group-tabs textoverflow-ellipsis"},[_vm._v(" "+_vm._s(_vm.getTabNames(group.tabs))+" ")])]),_c("el-switch",{staticClass:"mL-auto",on:{change:function($event){return _vm.toggleGroupPermissions(group)}},model:{value:group.groupPermission,callback:function($$v){_vm.$set(group,"groupPermission",$$v)},expression:"group.groupPermission"}})],1)}))],2)]],2),_c("div",{staticClass:"tab-permission-content"},[_vm.showEmptyState?_c("div",{staticClass:"empty-state-class"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/history",iconClass:"icon icon-xxxxlg"}}),_vm.selectedLayout!==_vm.layoutTypes.DEFAULT_VIEW?[_vm.$validation.isEmpty(_vm.groupPermissions)?_c("div",[_vm._v(" No Groups available for "+_vm._s(_vm.appName)+" ")]):_vm.$validation.isEmpty(_vm.tabListForGroup)&&_vm.activeGroupId?_c("div",[_vm._v(" No Tabs associated for this group ")]):_vm._e()]:_c("div",[_vm._v(" No Tabs available for "+_vm._s(_vm.appName)+" ")])],2):_vm.tabListLoading||_vm.groupListLoading?_c("div",{staticClass:"loading-state-class"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):[_vm.selectedLayout!==_vm.layoutTypes.DEFAULT_VIEW?_c("div",{staticClass:"group-header-wrapper"},[_c("div",{staticClass:"group-tabs-header"},_vm._l(_vm.tabListForGroup,(function(tab){return _c("div",{key:tab.id,staticClass:"selected-group-tab-name",attrs:{id:_vm.trimTabName(tab.name)+"-link"},on:{click:function($event){_vm.scrollTo(_vm.trimTabName(tab.name))}}},[_vm._v(" "+_vm._s(tab.name)+" "),_c("div",{staticClass:"border-highlight"})])})),0)]):_vm._e(),_c("div",{staticClass:"tab-content-layout"},_vm._l(_vm.tabListForGroup,(function(tab){return _c("div",{key:tab.id,staticClass:"pT20 pB20",attrs:{id:_vm.trimTabName(tab.name)+"-section"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"tab-name"},[_vm._v(_vm._s(tab.name))]),_c("div",{staticClass:"mL-auto"},[_vm._v(" "+_vm._s(tab.tabPermission?"Enabled":"Enable")+" ")]),_c("el-switch",{staticClass:"mL10 mR20",attrs:{"active-color":"#ef4f8f"},on:{change:function($event){return _vm.toggleTabPermissions(tab)}},model:{value:tab.tabPermission,callback:function($$v){_vm.$set(tab,"tabPermission",$$v)},expression:"tab.tabPermission"}})],1),_c("div",{staticClass:"tab-permissions"},[_vm._l(tab.permission,(function(permissionVal,permissionName,index){return[_c("div",{key:permissionName+"-"+index,staticClass:"tab-permission-list"},[_c("div",{staticClass:"tab-permission-name"},[_vm._v(" "+_vm._s(permissionName)+" ")]),_c("el-switch",{staticClass:"width50px mL20",on:{change:function($event){return _vm.togglePermission(tab,permissionName)}},model:{value:permissionVal.enabled,callback:function($$v){_vm.$set(permissionVal,"enabled",$$v)},expression:"permissionVal.enabled"}}),_c("div",{staticClass:"mL20"},[permissionVal.enabled&&permissionVal.permissions?_c("el-radio-group",{staticClass:"fc-radio-btn",model:{value:permissionVal.value,callback:function($$v){_vm.$set(permissionVal,"value",$$v)},expression:"permissionVal.value"}},_vm._l(permissionVal.permissions,(function(perm,permName){return _c("el-radio",{key:perm.value,attrs:{label:perm.value}},[_vm._v(" "+_vm._s(permName)+" ")])})),1):_vm._e()],1)],1),permissionVal.enabled&&permissionVal.subPermission?_vm._l(permissionVal.subPermission,(function(subPermVal,subPermName,index){return _c("div",{key:subPermName+"-"+index,staticClass:"tab-permission-list"},[_c("div",{staticClass:"tab-subpermission-name"},[_vm._v(" "+_vm._s(subPermName)+" ")]),_c("el-switch",{staticClass:"mL20 tab-subpermission-padding",model:{value:subPermVal.enabled,callback:function($$v){_vm.$set(subPermVal,"enabled",$$v)},expression:"subPermVal.enabled"}})],1)})):_vm._e()]}))],2)])})),0)]],2)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),defineProperty=__webpack_require__(482482),api=(__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(169358),__webpack_require__(186466),__webpack_require__(450886),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(32284)),validation=__webpack_require__(990260),ErrorBanner=__webpack_require__(297157),ScrollHandlingMixin=__webpack_require__(409697),sortBy=__webpack_require__(189734),sortBy_default=__webpack_require__.n(sortBy),webtabUtil=__webpack_require__(617494),layoutTypes={DEFAULT_VIEW:0,WEB_VIEW:1,MOBILE_VIEW:2},WebTabRolePermissionvue_type_script_lang_js={props:["role","app"],components:{ErrorBanner:ErrorBanner/* default */.Z},mixins:[ScrollHandlingMixin/* default */.Z],data:function(){return{tabPermissions:[],groupPermissions:[],errorText:"Please enter role name",error:!1,saving:!1,selectedLayout:1,filterValue:null,iconClass:"icon icon-xxxl p5 pointer",groupListLoading:!1,tabListLoading:!1,appLayouts:null,activeGroupId:null,layoutTypes:layoutTypes,getGroupIcon:webtabUtil/* getGroupIcon */.rG,getGroupIconClass:webtabUtil/* getGroupIconClass */.Hg}},computed:{appId:function(){return this.app.id},appName:function(){return this.app.name||"this app"},filteredTabs:function(){var filterValue=this.filterValue,tabPermissions=this.tabPermissions;return(0,validation/* isEmpty */.xb)(filterValue)?tabPermissions:tabPermissions.filter((function(tab){var tabName=tab.name.toLowerCase();return tabName.includes(filterValue.toLowerCase())}))},tabListForGroup:function(){var activeGroupId=this.activeGroupId,tabPermissions=this.tabPermissions,selectedLayout=this.selectedLayout,layoutTypes=this.layoutTypes,groupPermissions=this.groupPermissions;if(selectedLayout!==layoutTypes.DEFAULT_VIEW&&!(0,validation/* isEmpty */.xb)(activeGroupId)){var _groupPermissions$fin=groupPermissions.find((function(group){return group.id===activeGroupId})),tabs=_groupPermissions$fin.tabs;return tabPermissions.filter((function(tab){return!(0,validation/* isEmpty */.xb)(tabs[tab.id])}))}return tabPermissions},enabledLayouts:function(){var _enabledLayouts,appLayouts=this.appLayouts,_this$layoutTypes=this.layoutTypes,DEFAULT_VIEW=_this$layoutTypes.DEFAULT_VIEW,WEB_VIEW=_this$layoutTypes.WEB_VIEW,MOBILE_VIEW=_this$layoutTypes.MOBILE_VIEW,enabledLayouts=(_enabledLayouts={},(0,defineProperty/* default */.Z)(_enabledLayouts,DEFAULT_VIEW,!0),(0,defineProperty/* default */.Z)(_enabledLayouts,WEB_VIEW,!1),(0,defineProperty/* default */.Z)(_enabledLayouts,MOBILE_VIEW,!1),_enabledLayouts);return(0,validation/* isEmpty */.xb)(appLayouts)||appLayouts.forEach((function(layout){enabledLayouts[layout.layoutDeviceType]=!0})),enabledLayouts},showEmptyState:function(){var groupPermissions=this.groupPermissions,tabListForGroup=this.tabListForGroup,selectedLayout=this.selectedLayout,layoutTypes=this.layoutTypes,tabListLoading=this.tabListLoading,groupListLoading=this.groupListLoading,defaultLayout=selectedLayout===layoutTypes.DEFAULT_VIEW;return defaultLayout&&!tabListLoading?(0,validation/* isEmpty */.xb)(tabListForGroup):!defaultLayout&&!groupListLoading&&((0,validation/* isEmpty */.xb)(groupPermissions)||(0,validation/* isEmpty */.xb)(tabListForGroup))}},created:function(){this.init()},watch:{selectedLayout:function(value){value!==this.layoutTypes.DEFAULT_VIEW?(this.constructGroupPermission(),this.activeGroupId=this.$getProperty(this.groupPermissions,"0.id",null)):this.activeGroupId=null},tabListForGroup:function(value){var _this=this;this.sidebarElements=[],this.sectionElements=[],this.setElementsId(),(0,validation/* isEmpty */.xb)(value)||this.$nextTick((function(){var tabName=_this.trimTabName(value[0].name);_this.scrollTo(tabName)}))},enabledLayouts:function(value){var _this$layoutTypes2=this.layoutTypes,DEFAULT_VIEW=_this$layoutTypes2.DEFAULT_VIEW,WEB_VIEW=_this$layoutTypes2.WEB_VIEW,MOBILE_VIEW=_this$layoutTypes2.MOBILE_VIEW,selectedLayout=this.selectedLayout;selectedLayout!==WEB_VIEW||value[selectedLayout]||(value[MOBILE_VIEW]?this.selectedLayout=MOBILE_VIEW:this.selectedLayout=DEFAULT_VIEW)}},methods:{loadTabs:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$loadAppTabs,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,webtabUtil/* loadAppTabs */.V)(_this2.appId);case 2:_yield$loadAppTabs=_context.sent,error=_yield$loadAppTabs.error,data=_yield$loadAppTabs.data,error?_this2.$message.error(error.message||"Error Occured"):_this2.constructTabPermission(data),_this2.tabListLoading=!1;case 7:case"end":return _context.stop()}}),_callee)})))()},loadAppLayouts:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$loadLayouts,error,data,_ref,layouts;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,webtabUtil/* loadLayouts */.H8)(_this3.appId);case 2:_yield$loadLayouts=_context2.sent,error=_yield$loadLayouts.error,data=_yield$loadLayouts.data,error?_this3.$message.error(error.message||"Error Occured"):(_ref=data||{},layouts=_ref.layouts,_this3.appLayouts=layouts,_this3.constructGroupPermission(),_this3.activeGroupId=_this3.$getProperty(_this3.groupPermissions,"0.id",null),_this3.$nextTick(_this3.registerScrollHandler)),_this3.groupListLoading=!1;case 7:case"end":return _context2.stop()}}),_callee2)})))()},init:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.tabListLoading=!0,_this4.groupListLoading=!0,_context3.next=4,_this4.loadTabs();case 4:return _context3.next=6,_this4.loadAppLayouts();case 6:case"end":return _context3.stop()}}),_callee3)})))()},constructTabPermission:function(tabsList){var _this5=this,_ref2=this.role||{},newPermissions=_ref2.newPermissions,tabVsPerm={};(0,validation/* isEmpty */.xb)(newPermissions)||(tabVsPerm=newPermissions.reduce((function(tabPerm,perm){var tabId=perm.tabId,permission=perm.permission;return tabPerm[tabId]=permission,tabPerm}),{})),this.tabPermissions=tabsList.reduce((function(tabWithPermission,tab){var permission=tab.permission,id=tab.id,name=tab.name,tabPermission={id:id,name:name,tabPermission:!(0,validation/* isEmpty */.xb)(tabVsPerm[id]),permission:_this5.setTabPermissions(permission,tabVsPerm[id])};return tabWithPermission.push(tabPermission),tabWithPermission}),[])},setTabPermissions:function(permission){var tabPermissionCount=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(0,validation/* isEmpty */.xb)(permission))return permission.reduce((function(permissionObj,permName){var actionName=permName.actionName,displayName=permName.displayName,value=permName.value,permissions=permName.permissions,tabPermValue=tabPermissionCount&value,enabled=0!==tabPermValue&&tabPermValue===value,subPermName="";actionName&&(subPermName=actionName.toLowerCase().split("_")[0]);var parentPermName=Object.keys(permissionObj).find((function(perm){return subPermName===perm.toLowerCase()}));if(parentPermName)permissionObj[parentPermName].subPermission=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},permissionObj[parentPermName].subPermission),{},(0,defineProperty/* default */.Z)({},displayName,{actionName:actionName,value:value,enabled:enabled}));else if(permissionObj[displayName]={actionName:actionName,value:value,enabled:enabled},!(0,validation/* isEmpty */.xb)(permissions)){var permissionEnabled={},rolePermission=permissions.reduce((function(rolePerm,perm){var actionName=perm.actionName,displayName=perm.displayName,value=perm.value,tabPermValue=tabPermissionCount&value,enabled=0!==tabPermValue&&tabPermValue===value;return enabled&&(permissionEnabled={enabled:enabled,value:value}),rolePerm[displayName]={actionName:actionName,value:value},rolePerm}),{});permissionObj[displayName]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},permissionObj[displayName]),permissionEnabled),{},{permissions:rolePermission})}return permissionObj}),{})},constructGroupPermission:function(){var _this6=this,_ref3=this.appLayouts.find((function(view){return view.layoutDeviceType===_this6.selectedLayout}))||{},groups=_ref3.webTabGroupList;if((0,validation/* isEmpty */.xb)(groups))this.groupPermissions=[];else{var groupPermissions=groups.reduce((function(groupWithPermission,group){var id=group.id,name=group.name,iconType=group.iconType,_group$webTabs=group.webTabs,webTabs=void 0===_group$webTabs?[]:_group$webTabs,order=group.order,tabs=webTabs.reduce((function(groupTab,tab){return groupTab[tab.id]=tab.name,groupTab}),{}),groupPermission={id:id,name:name,iconType:iconType,tabs:tabs,order:order,groupPermission:_this6.checkGroupPermission(tabs)};return groupWithPermission.push(groupPermission),groupWithPermission}),[]);this.groupPermissions=sortBy_default()(groupPermissions,["order"])}},checkGroupPermission:function(tabs){return this.tabPermissions.reduce((function(hasPerm,tab){var id=tab.id,tabPermission=tab.tabPermission;return(0,validation/* isEmpty */.xb)(tabs[id])||(hasPerm=hasPerm||tabPermission),hasPerm}),!1)},toggleGroupPermissions:function(group){var _this7=this,groupPermission=group.groupPermission,tabs=group.tabs;this.tabPermissions.forEach((function(tab){(0,validation/* isEmpty */.xb)(tabs[tab.id])||(tab.tabPermission=groupPermission,_this7.toggleSubTabPermission(tab,groupPermission))}))},toggleTabPermissions:function(tab){var tabPermission=tab.tabPermission,id=tab.id;this.toggleSubTabPermission(tab,tabPermission),this.toggleGroup(id)},togglePermission:function(tab,permissionName){var permission=tab.permission,id=tab.id,isTabActive=Object.values(permission).reduce((function(isPermEnabled,tabpermission){var enabled=tabpermission.enabled;return isPermEnabled=isPermEnabled||enabled,isPermEnabled}),!1),_permission$permissio=permission[permissionName],enabled=_permission$permissio.enabled,permissions=_permission$permissio.permissions,subPermission=_permission$permissio.subPermission;(0,validation/* isEmpty */.xb)(permissions)||(tab.permission[permissionName].value=enabled?permissions["All"].value:0,(0,validation/* isEmpty */.xb)(subPermission)||Object.keys(subPermission).forEach((function(perm){tab.permission[permissionName].subPermission[perm].enabled=enabled}))),tab.tabPermission=isTabActive,this.toggleGroup(id)},toggleGroup:function(tabId){var currentGroup=this.groupPermissions.find((function(group){return!(0,validation/* isEmpty */.xb)(group.tabs[tabId])}));(0,validation/* isEmpty */.xb)(currentGroup)||(currentGroup.groupPermission=this.tabListForGroup.reduce((function(isPermEnabled,tab){return isPermEnabled=isPermEnabled||tab.tabPermission,isPermEnabled}),!1))},toggleSubTabPermission:function(tab,enabledVal){var permission=tab.permission;(0,validation/* isEmpty */.xb)(permission)||Object.values(permission).forEach((function(tabPerm){var permissions=tabPerm.permissions,subPermission=tabPerm.subPermission;tabPerm.enabled=enabledVal,(0,validation/* isEmpty */.xb)(permissions)||(tabPerm.value=enabledVal?permissions["All"].value:0,(0,validation/* isEmpty */.xb)(subPermission)||Object.keys(subPermission).forEach((function(perm){tabPerm.subPermission[perm].enabled=enabledVal})))}))},getTabNames:function(tabs){return Object.values(tabs).reduce((function(tabNames,tab,index,tabs){var tabsLength=tabs.length;return tabNames+=tab,tabsLength!==index+1&&(tabNames+=", "),tabNames}),"")},serialize:function(){var permissions=this.tabPermissions.map((function(tab){var id=tab.id,tabPermission=tab.tabPermission,permission=tab.permission;if(tabPermission&&permission){var totalPermission=Object.values(permission).reduce((function(permVal,perm){var enabled=perm.enabled,value=perm.value,subPermission=perm.subPermission;return enabled&&(permVal+=value,(0,validation/* isEmpty */.xb)(subPermission)||(permVal+=Object.values(subPermission).reduce((function(subPermNum,subPerm){var enabled=subPerm.enabled,value=subPerm.value;return enabled&&(subPermNum+=value),subPermNum}),0))),permVal}),0),tabObj={tabId:id,permission:totalPermission};return tabObj}return null})).filter((function(tab){return!(0,validation/* isEmpty */.xb)(tab)}));return permissions},getViewIconClass:function(layoutType){var iconClass=this.iconClass;return this.enabledLayouts[layoutType]||(iconClass+=" fill-disabled-grey"),layoutType===this.selectedLayout&&(iconClass+=" fill-pink"),iconClass},selectView:function(layoutType){!this.groupListLoading&&this.enabledLayouts[layoutType]&&(this.selectedLayout=layoutType)},saveRole:function(){var _this8=this;if((0,validation/* isEmpty */.xb)(this.role.name))this.error=!0;else{this.error=!1;var url="/setup/updateWebTabRole",_this$role=this.role,name=_this$role.name,description=_this$role.description,roleId=_this$role.roleId,appId=this.appId,role={name:name,description:description,roleId:roleId},newPermissions=this.serialize(),params={role:role,roleApp:[{applicationId:appId}],newPermissions:newPermissions};this.saving=!0,api/* API */.bl.post(url,params).then((function(_ref4){var error=_ref4.error;error?_this8.$message.error(error.message||"Error occured while saving"):(_this8.$message.success("Saved Successfully"),_this8.$emit("onSave"),_this8.closeDialog())})).finally((function(){_this8.saving=!1}))}},closeDialog:function(){this.$emit("onClose")}}},roles_WebTabRolePermissionvue_type_script_lang_js=WebTabRolePermissionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(roles_WebTabRolePermissionvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WebTabRolePermission=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/27978.js.map