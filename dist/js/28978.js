"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[28978],{
/***/528978:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SparePartsWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/asset/SparePartsWidget.vue?vue&type=template&id=d010abee
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("LineItemList",_vm._b({ref:"lineItemList",attrs:{config:_vm.listConfiguration,widgetDetails:_vm.widgetDetails,moduleDisplayName:"Spare Parts",moduleName:"assetSpareParts",additionalParams:_vm.additionalParams,unSavedRecords:_vm.unSavedRecords,canHideEdit:"false",viewname:"hidden-all"},on:{"update:unSavedRecords":function($event){_vm.unSavedRecords=$event},"update:un-saved-records":function($event){_vm.unSavedRecords=$event},emptyStateBtn:_vm.showLookupWizard},scopedSlots:_vm._u([{key:"footer-btns",fn:function(){return[_c("el-button",{staticClass:"line-item-list-footer-add-btn",attrs:{type:"primary"},on:{click:_vm.showLookupWizard}},[_vm._v(" "+_vm._s("Select Spareparts")+" ")])]},proxy:!0}])},"LineItemList",_vm.$attrs,!1),[_vm.canShowLookupWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.fieldObj,withReadings:!0},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),LineItemListOld=(__webpack_require__(648324),__webpack_require__(450886),__webpack_require__(666237)),FLookupFieldWizard=__webpack_require__(499751),validation=__webpack_require__(990260),api=__webpack_require__(32284),SparePartsWidgetvue_type_script_lang_js={props:["widget","details","moduleName"],components:{LineItemList:LineItemListOld/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},data:function(){return{recordList:[],unSavedRecords:[],canShowLookupWizard:!1,canHideSearch:!0,fieldObj:{isDataLoading:!1,options:[],lookupModuleName:"assetSpareParts",placeHolderText:"".concat(this.$t("commissioning.sheet.select_asset")),field:{lookupModule:{name:"assetSpareParts",displayName:"Spare Parts"}},multiple:!0},additionalParams:{asset:{id:this.details.id}}}},computed:{filters:function(){var _this$details,fieldName=this.moduleName,filterObj={};return filterObj[fieldName]={operatorId:9,value:[JSON.stringify(null===(_this$details=this.details)||void 0===_this$details?void 0:_this$details.id)]},filterObj},widgetDetails:function(){var widget=this.widget,_ref=widget||{},relatedList=_ref.relatedList,_ref2=relatedList||{},summaryWidgetName=_ref2.summaryWidgetName,emptyStateText=this.$t("common._common.spare_parts_empty_text");return{perPage:10,summaryWidgetName:summaryWidgetName,emptyStateText:emptyStateText,emptyStateBtnList:[{value:"default_add"},{label:"Select Spare Parts",value:"select_spare_parts"}]}},listConfiguration:function(){var filters=this.filters;return{expand:!1,isSelectionEnabled:!1,isIndexEnabled:!1,filters:filters,canHideColumnConfig:!0,canHideSearch:!0,canHideFooter:!1,canEnableMainFieldAction:!1}}},methods:{showLookupWizard:function(){this.canShowLookupWizard=!0},setLookupFieldValue:function(selectedData){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var assetId,_ref3,field,_ref4,selectedItems,selectedIds,queryParam,_yield$API$get,data,error,_ref5,assetSpareParts;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.$refs["lineItemList"].isLoading=!0,assetId=_this.$getProperty(_this,"details.id",null),_ref3=selectedData||{},field=_ref3.field,_ref4=field||{},selectedItems=_ref4.selectedItems,!(0,validation/* isEmpty */.xb)(selectedItems)){_context.next=6;break}return _context.abrupt("return");case 6:return selectedIds=selectedItems.map((function(element){return null===element||void 0===element?void 0:element.value})),queryParam={selectedIds:selectedIds,assetId:assetId},_context.next=10,api/* API */.bl.get("/v3/assetSpareParts/select",queryParam);case 10:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this.$message.error(error.message||_this.$t("common._common.error_occured")):(_ref5=data||{},assetSpareParts=_ref5.assetSpareParts,_this.unSavedRecords=assetSpareParts||[],_this.$refs["lineItemList"].loadRecords(!0));case 14:case"end":return _context.stop()}}),_callee)})))()}}},asset_SparePartsWidgetvue_type_script_lang_js=SparePartsWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(asset_SparePartsWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SparePartsWidget=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/28978.js.map