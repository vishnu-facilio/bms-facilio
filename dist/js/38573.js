"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[38573],{
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports},
/***/738573:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AgentLogs}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/agents/AgentLogs.vue?vue&type=template&id=601c8aae&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_vm._m(0),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT20"},[_c("div",{staticClass:"col-lg-12 col-md-12 overflow-x"},[_c("div",{staticClass:"d-flex flex-direction-row justify-content-space pB25"},[_c("div",[_c("div",{staticClass:"category-blue-txt pB10"},[_vm._v("Agent")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{filterable:"",placeholder:"Select Agent",width:"250px"},on:{change:function($event){_vm.totalCount=null}},model:{value:_vm.selectedAgentId,callback:function($$v){_vm.selectedAgentId=$$v},expression:"selectedAgentId"}},_vm._l(_vm.agents,(function(agent,index){return _c("el-option",{key:index,attrs:{label:agent.displayName||agent.name,value:agent.id,"no-data-text":"No controllers available"}})})),1)],1),_c("div",{staticClass:"d-flex flex-direction-row"},[!_vm.loading&&_vm.totalCount&&0!==_vm.logs.length?_c("pagination",{staticClass:"pB15",staticStyle:{"margin-top":"auto"},attrs:{total:_vm.totalCount,perPage:_vm.perPage}}):_vm._e()],1)]),_c("table",{staticClass:"setting-list-view-table"},[_vm._m(1),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_vm.logs&&0===_vm.logs.length?_c("tbody",[_vm._m(2)]):_c("tbody",_vm._l(_vm.logs,(function(log){return _c("tr",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],key:log.timeStamp,staticClass:"tablerow"},[_c("td",[_c("div",{staticClass:"label-txt3-14"},[_vm._v(" "+_vm._s(_vm.$constants.AGENT_LOG_CMD_HASH[log.command]||"---")+" ")])]),_c("td",[_c("div",{staticClass:"label-txt3-14"},[_vm._v(" "+_vm._s(_vm.$constants.AGENT_LOG_STATUS_HASH[log.status]||"---")+" ")])]),_c("td",[log.isCustomMessage?_c("div",[_c("a",{staticClass:"f14",on:{click:function($event){return _vm.showPublishMessage(log.msgid)}}},[_vm._v("Show Message")])]):[_c("div",{staticClass:"label-txt3-14"},[_vm._v(_vm._s(log.content))]),log.retries?_c("div",{staticClass:"label-txt3-12 mT5"},[_vm._v(" Connection Count: "+_vm._s(log.retries)+" ")]):_vm._e()]],2),_c("td",[_c("div",{staticClass:"label-txt3-14"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(log.timestamp))+" ")])])])})),0)])])])]),_vm.showLogMsgPopup?_c("el-dialog",{staticClass:"agents-dialog",staticStyle:{"z-index":"9999999999"},attrs:{title:"Agent Details",visible:_vm.showLogMsgPopup,width:"40%"},on:{"update:visible":function($event){_vm.showLogMsgPopup=$event}}},[_vm.messageHash[_vm.selectedMessageId]?_vm.messageHash[_vm.selectedMessageId].loading?_c("div",[_vm._v(" Loading message... ")]):_c("pre",{staticClass:"json-view"},[_vm._v(_vm._s(_vm.messageHash[_vm.selectedMessageId].json))]):_c("div",[_vm._v("No data received.")])]):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v("Logs")]),_c("div",{staticClass:"heading-description"},[_vm._v("List of all log entries")])])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("Command")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("Status")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("Content")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("Timestamp")])])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v("No logs available.")])])}],defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),FPagination=(__webpack_require__(879288),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(670560),__webpack_require__(929593)),validation=__webpack_require__(990260),AgentLogsvue_type_script_lang_js={title:function(){return"Logs"},components:{Pagination:FPagination/* default */.Z},data:function(){return{isNew:!0,loading:!1,logs:[],totalCount:null,showDialog:!1,agents:[],selectedAgentId:null,perPage:50,messageHash:{},selectedMessageId:null,showLogMsgPopup:!1}},created:function(){var _this=this;this.selectedAgentId=this.$route.query.agentId?parseInt(this.$route.query.agentId):null,this.loadAgents().then((function(){(0,validation/* isEmpty */.xb)(_this.agents)||(_this.loadLogEntries(),_this.loadCount())}))},methods:{loadAgents:function(){var _this2=this;return this.loading=!0,this.$http.get("/v2/setup/agent/list").then((function(response){_this2.agents=response.data.result.agentDetails?response.data.result.agentDetails:[],_this2.selectedAgentId=parseInt(_this2.$route.query.agentId)||_this2.agents[0].id})).catch((function(){_this2.loading=!1}))},processLogEntry:function(logEntry){var message=(0,validation/* isNumber */.hj)(logEntry.message)?Number(logEntry.message):logEntry.message;if((0,validation/* isNumber */.hj)(logEntry.message)&&message>1e3){var retryCount=message%1e3,content=message-retryCount;logEntry=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},logEntry),{},{content:this.$constants.AGENT_LOG_CONTENT_HASH[content],retries:retryCount})}else logEntry.content=this.$constants.AGENT_LOG_CONTENT_HASH[message]||message;var hasMsgId=!(0,validation/* isEmpty */.xb)(logEntry.msgid),isMsgNull=(0,validation/* isEmpty */.xb)(logEntry.message),isMsgEqualsId=Number(logEntry.msgid)===Number(logEntry.message);return hasMsgId&&(isMsgNull||isMsgEqualsId)&&(logEntry.isCustomMessage=!0),logEntry},loadLogEntries:function(){var _this3=this;return this.loading=!0,this.$http.get("/v2/setup/agent/log?agentId=".concat(this.selectedAgentId,"&perPage=").concat(this.perPage,"&page=").concat(this.page)).then((function(response){_this3.loading=!1,0===response.data.responseCode&&(_this3.logs=response.data.result.logs.map(_this3.processLogEntry)||[])})).catch((function(){_this3.logs=[],_this3.loading=!1}))},loadCount:function(){var _this4=this;return this.$http.get("/v2/setup/agent/logCount?agentId=".concat(this.selectedAgentId)).then((function(response){_this4.totalCount=response.data.result.logCount||null})).catch((function(){_this4.loading=!1}))},showPublishMessage:function(msgId){this.fetchMessage(msgId),this.selectedMessageId=msgId,this.showLogMsgPopup=!0},fetchMessage:function(msgid){var _this5=this,msgUnAvailable=function(msgid){_this5.$set(_this5,"messageHash",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this5.messageHash),{},(0,defineProperty/* default */.Z)({},msgid,null)))};if((0,validation/* isEmpty */.xb)(this.messageHash[msgid]))return this.messageHash[msgid]={loading:!0,json:""},this.$http.get("/v2/setup/agent/fetchMessage?messageId=".concat(msgid)).then((function(response){if(0!==response.data.responseCode||(0,validation/* isEmpty */.xb)(response.data.result.publishMessage))msgUnAvailable(msgid);else{var message=response.data.result.publishMessage,json=message&&JSON.parse(message.dataStr);_this5.$set(_this5,"messageHash",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this5.messageHash),{},(0,defineProperty/* default */.Z)({},msgid,{loading:!1,json:json?JSON.stringify(json,null,2):""})))}})).catch((function(){return msgUnAvailable(msgid)}))}},computed:{page:function(){return this.$route.query.page||1}},watch:{selectedAgentId:function(val){this.$router.push({query:{agentId:val}}),this.loadLogEntries(),this.loadCount()},page:function(){this.loadLogEntries()}}},agents_AgentLogsvue_type_script_lang_js=AgentLogsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(agents_AgentLogsvue_type_script_lang_js,render,staticRenderFns,!1,null,"601c8aae",null)
/* harmony default export */,AgentLogs=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/38573.js.map