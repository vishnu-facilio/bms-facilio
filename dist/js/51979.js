"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[51979],{
/***/851979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Add_Controller}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/Add-Controller.vue?vue&type=template&id=f749cc06
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_c("div",{staticClass:"setting-header2"},[_vm._m(0),_c("div",{staticClass:"action-btn setting-page-btn"},[_vm.addControllerlist.length>0?_c("el-button",{staticClass:"plain",on:{click:_vm.downloadCertificate}},[_vm._v("Download Certificate")]):_vm._e(),_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){_vm.showDialog=!0,_vm.isNew=!0}}},[_vm._v("Add Controller")]),_vm.showDialog?_c("new-addController",{attrs:{isNew:_vm.isNew,model:_vm.model,visibility:_vm.showDialog},on:{"update:visibility":function($event){_vm.showDialog=$event},saved:_vm.addControllerSaved}}):_vm._e()],1)]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_vm._m(1),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):0===_vm.addControllerlist.length?_c("tbody",[_vm._m(2)]):_c("tbody",_vm._l(_vm.addControllerlist,(function(addController){return _c("tr",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],key:addController.id,staticClass:"tablerow"},[_c("td",[_vm._v(_vm._s(addController.name))]),_c("td",[_vm._v(_vm._s(addController.macAddr))]),_c("td",[_vm._v(_vm._s(_vm.prettyPrint(addController.buildingIds)))]),_c("td",[_c("div",{staticClass:"text-left actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center",width:"120px"}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Controller"},on:{click:function($event){return _vm.editController(addController)}}})])])])})),0)])])])])])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v("Controllers")]),_c("div",{staticClass:"heading-description"},[_vm._v("List of all controllers")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" CONTROLLER NAME ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("MAC ADDRESS")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("BUILDINGS")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v(" No Controller available. ")])])}],NewController=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(506203),__webpack_require__(382003)),Add_Controllervue_type_script_lang_js={title:function(){return"AddController"},components:{NewAddController:NewController/* default */.Z},data:function(){return{isNew:!0,loading:!1,addControllerlist:[],showDialog:!1,buildings:{}}},mounted:function(){var _this=this;this.$store.dispatch("loadBuildings"),this.loading=!0,this.$util.loadSpace(2).then((function(response){response.basespaces&&response.basespaces.forEach((function(i){_this.buildings[i.id]=i.name})),_this.loadaddController(),_this.loading=!1})).catch((function(_){_this.loading=!1}))},methods:{prettyPrint:function(buildingIds){var _this2=this;if(!buildingIds||0===buildingIds.length)return"---";var b=[];return buildingIds.forEach((function(i){return b.push(_this2.buildings[i])})),b.join(", ")},loadaddController:function(){var _this3=this;this.loading=!0,this.$http.get("/setup/controllersettings").then((function(response){_this3.loading=!1,_this3.addControllerlist=response.data.controllerSettings?response.data.controllerSettings:[]})).catch((function(_){_this3.loading=!1}))},downloadCertificate:function(){var _this4=this;this.loading=!0,this.$http.get("/setup/downloadCertificate").then((function(response){_this4.loading=!1,window.location.href=response.data.url})).catch((function(_){_this4.loading=!1}))},addControllerSaved:function(){this.loadaddController()},editController:function(controller){this.isNew=!1,this.model=controller,this.showDialog=!0}}},setup_Add_Controllervue_type_script_lang_js=Add_Controllervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_Add_Controllervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Add_Controller=component.exports},
/***/382003:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewController}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/agents/NewController.vue?vue&type=template&id=193b4ae1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",[_c("el-form",{ref:"controllerForm",staticClass:"fc-form",attrs:{model:_vm.newaddController,rules:_vm.rules,"label-position":"top","label-width":"120px"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?"New":"Edit")+" Controller ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Controller Name")]),_c("el-form-item",{attrs:{prop:"name"}},[_c("el-input",{staticClass:"fc-input-txt fc-name-input",attrs:{disabled:!_vm.isNew,placeholder:"Enter Controller Name"},model:{value:_vm.newaddController.name,callback:function($$v){_vm.$set(_vm.newaddController,"name",$$v)},expression:"newaddController.name"}})],1)],1),_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" Display Name ")]),_c("el-form-item",{attrs:{prop:"name"}},[_c("el-input",{staticClass:"fc-input-txt fc-name-input",attrs:{placeholder:"Enter Display Name"},model:{value:_vm.newaddController.displayName,callback:function($$v){_vm.$set(_vm.newaddController,"displayName",$$v)},expression:"newaddController.displayName"}})],1)],1),_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" Controller Type ")]),_c("el-form-item",{attrs:{prop:"controllerType"}},[_c("el-select",{attrs:{disabled:!_vm.isNew},model:{value:_vm.newaddController.controllerType,callback:function($$v){_vm.$set(_vm.newaddController,"controllerType",$$v)},expression:"newaddController.controllerType"}},_vm._l(_vm.$constants.ControllerTypes,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1)],1)],1),_vm.$common.isBacnetController(_vm.newaddController)?_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" Instance Number ")]),_c("el-form-item",{attrs:{prop:"instanceNumber"}},[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{disabled:!_vm.isNew,placeholder:"Enter Instance Number"},model:{value:_vm.newaddController.instanceNumber,callback:function($$v){_vm.$set(_vm.newaddController,"instanceNumber",$$v)},expression:"newaddController.instanceNumber"}})],1)],1):_vm._e(),_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" Mac Address ")]),_c("el-form-item",{attrs:{prop:"macAddr"}},[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{disabled:!_vm.isNew,placeholder:"Enter Mac Address"},model:{value:_vm.newaddController.macAddr,callback:function($$v){_vm.$set(_vm.newaddController,"macAddr",$$v)},expression:"newaddController.macAddr"}})],1)],1),_c("div",[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v("Interval")]),_c("el-form-item",{attrs:{prop:"dataInterval"}},[_c("el-select",{staticClass:"fc-input-select",attrs:{placeholder:"Enter Interval"},model:{value:_vm.newaddController.dataInterval,callback:function($$v){_vm.$set(_vm.newaddController,"dataInterval",$$v)},expression:"newaddController.dataInterval"}},[_c("el-option",{attrs:{label:"5 mins",value:5}}),_c("el-option",{attrs:{label:"10 mins",value:10}}),_c("el-option",{attrs:{label:"15 mins",value:15}}),_c("el-option",{attrs:{label:"20 mins",value:20}}),_c("el-option",{attrs:{label:"30 mins",value:30}}),_c("el-option",{attrs:{label:"1 hour",value:60}})],1)],1)],1),_c("div",[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical inline mR20"},[_vm._v(" Is Writable ")]),_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},model:{value:_vm.newaddController.writable,callback:function($$v){_vm.$set(_vm.newaddController,"writable",$$v)},expression:"newaddController.writable"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm("controllerForm")}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"SAVE")+" ")])],1)])],1)])},staticRenderFns=[],NewControllervue_type_script_lang_js=(__webpack_require__(434284),__webpack_require__(260228),{props:["visibility","isNew","model"],data:function(){return{saving:!1,newaddnetworkForm:{id:-1,name:"",macAddr:"",controllerType:null,dataInterval:null,writable:null,instanceNumber:null,displayName:""},rules:{dataInterval:[{required:!0,message:"Please select a data interval",trigger:"blur"}]}}},mounted:function(){var _this=this;if(!this.isNew){var _this$model=this.model,id=_this$model.id,name=_this$model.name,macAddr=_this$model.macAddr,controllerType=_this$model.controllerType,dataInterval=_this$model.dataInterval,writable=_this$model.writable,instanceNumber=_this$model.instanceNumber,displayName=_this$model.displayName;Object.assign(this.newaddController,{id:id,name:name,macAddr:macAddr,controllerType:controllerType,dataInterval:dataInterval,writable:writable,instanceNumber:instanceNumber,displayName:displayName});var nullableFields=["dataInterval","controllerType"];nullableFields.forEach((function(fieldName){-1===_this.newAgent[fieldName]&&(_this.newAgent[fieldName]=null)}))}},methods:{submitForm:function(controllerForm){var _this2=this;this.$refs[controllerForm].validate((function(valid){if(valid){_this2.saving=!0;var data={controllerContext:_this2.$helpers.cloneObject(_this2.newaddController)};data.controllerContext.dataInterval||(data.controllerContext.dataInterval=15),_this2.$http.post("/v2/setup/controller/edit",data).then((function(response){200===response.status&&(_this2.$message("Controller has been updated."),_this2.saving=!1,_this2.resetForm(),_this2.$emit("saved"),_this2.$emit("update:visibility",!1))}))}}))},resetForm:function(){this.$refs["controllerForm"].resetFields()},closeDialog:function(){this.$emit("update:visibility",!1)},cancel:function(){this.$emit("canceled")}}}),agents_NewControllervue_type_script_lang_js=NewControllervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(agents_NewControllervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewController=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/51979.js.map