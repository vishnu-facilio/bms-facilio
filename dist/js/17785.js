"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[17785],{
/***/517785:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SelectVisitorTypeForms}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/SelectVisitorTypeForms.vue?vue&type=template&id=93034ab0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("portal",{attrs:{to:"module-summary-actions",slim:""}},[_c("el-select",{staticClass:"fc-input-full-border2 width200px pR15",attrs:{placeholder:"Select App",filterable:""},on:{change:_vm.loadAppData},model:{value:_vm.appId,callback:function($$v){_vm.appId=$$v},expression:"appId"}},_vm._l(_vm.apps,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1)],1),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common._common.form"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common._common.status"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])]),_vm.isLoading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1)])]):0===_vm.visitorType.length?_c("tbody",[_c("tr",{staticClass:"tablerow"},[_c("td",{staticClass:"text-center",staticStyle:{"padding-top":"18px","padding-bottom":"18px"},attrs:{colspan:"100%"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.no_templates_available"))+" ")])])]):_c("tbody",[_vm._l(_vm.visitorType,(function(vType,index){return[vType?_c("tr",{key:index,staticClass:"tablerow"},[_c("td",{staticClass:"text-capitalize",staticStyle:{width:"30%"},on:{click:function($event){return _vm.editForm(vType)}}},[_vm._v(" "+_vm._s(vType.name)+" ")]),vType.form?_c("td",{staticClass:"text-capitalize",staticStyle:{width:"30%"},on:{click:function($event){return _vm.editForm(vType)}}},[_vm._v(" "+_vm._s(vType.form.displayName)+" ")]):_c("td",[_vm._v(" "+_vm._s("---")+" ")]),_c("td",{staticClass:"text-capitalize"},[_c("el-switch",{attrs:{disabled:vType.visitorFormId<0},on:{change:function($event){return _vm.updateStatus(vType)}},model:{value:vType.formEnabled,callback:function($$v){_vm.$set(vType,"formEnabled",$$v)},expression:"vType.formEnabled"}})],1),_c("td",[_c("div",{staticClass:"text-left actions text-center mL20",staticStyle:{"margin-top":"-3px"}},[_c("i",{staticClass:"el-icon-edit pointer",on:{click:function($event){return _vm.openTypeFormCreation(vType)}}})])])]):_vm._e()]}))],2)])])])]),_vm.showFormCreation?_c("VisitorTypeFormsEditForm",{attrs:{showFormCreation:_vm.showFormCreation,error:_vm.error,errorMessage:_vm.errorMessage,isEdit:_vm.isEdit,appId:_vm.appId,formList:_vm.forms,moduleName:_vm.moduleName,visitorType:_vm.selectedType},on:{"update:showFormCreation":function($event){_vm.showFormCreation=$event},"update:show-form-creation":function($event){_vm.showFormCreation=$event},"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorMessage=$event},"update:error-message":function($event){_vm.errorMessage=$event},saveRecord:_vm.updateStatus}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(32284)),validation=__webpack_require__(990260),VisitorTypeFormsEditFormvue_type_template_id_d1feaae0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"SELECT VISITOR TYPE FORM",visible:_vm.canShowFormCreation,width:"30%",height:"40%","append-to-body":!0,"before-close":_vm.beforeClose},on:{"update:visible":function($event){_vm.canShowFormCreation=$event}}},[_c("div",{class:"height250"},[_c("el-form",{ref:"visitorType",attrs:{model:_vm.visitorType}},[_c("el-form-item",{staticClass:"mB20",attrs:{label:_vm.$t("Select Form"),prop:"visitorFormId"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 height100 scrollable",attrs:{placeholder:_vm.$t("common._common.select")},model:{value:_vm.visitorType.visitorFormId,callback:function($$v){_vm.$set(_vm.visitorType,"visitorFormId",$$v)},expression:"visitorType.visitorFormId"}},_vm._l(_vm.formList,(function(form){return _c("el-option",{key:form.id,attrs:{label:form.displayName,value:form.id}})})),1)],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addNewForm(_vm.visitorType)}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)])},VisitorTypeFormsEditFormvue_type_template_id_d1feaae0_staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(879288),__webpack_require__(420629)),VisitorTypeFormsEditFormvue_type_script_lang_js={props:{showFormCreation:{type:Boolean},error:{type:Boolean},formList:{type:Array},visitorType:{type:Object},isEdit:{type:Boolean},errorMessage:{type:String},moduleName:{type:String,required:!0},appId:{type:Number}},data:function(){return{}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.site}})),{},{canShowFormCreation:{get:function(){return this.showFormCreation},set:function(value){this.$emit("update:showFormCreation",value)}},errVal:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}},errMsgVal:{get:function(){return this.errorMessage},set:function(value){return this.$emit("update:errorMsg",value)}}}),methods:{addNewForm:function(visitorType){this.$emit("saveRecord",visitorType)},closeDialogBox:function(){this.canShowFormCreation=!1},beforeClose:function(done){this.$set(this,"errMsgVal",null),this.$set(this,"errVal",!1),done()}}},setup_VisitorTypeFormsEditFormvue_type_script_lang_js=VisitorTypeFormsEditFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_VisitorTypeFormsEditFormvue_type_script_lang_js,VisitorTypeFormsEditFormvue_type_template_id_d1feaae0_render,VisitorTypeFormsEditFormvue_type_template_id_d1feaae0_staticRenderFns,!1,null,null,null)
/* harmony default export */,VisitorTypeFormsEditForm=component.exports,SelectVisitorTypeFormsvue_type_script_lang_js={props:["moduleName","visitorTypeId"],components:{VisitorTypeFormsEditForm:VisitorTypeFormsEditForm},data:function(){return{apps:[],appId:null,isLoading:!0,forms:[],isEdit:!1,showFormCreation:!1,errorMessage:null,error:!1,visitorType:[],selectedType:null}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.availableApps();case 2:return _context.next=4,_this.loadVisitorType();case 4:return _context.next=6,_this.loadForms();case 6:case"end":return _context.stop()}}),_callee)})))()},methods:{availableApps:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return moduleName=_this2.moduleName,_context2.next=3,api/* API */.bl.get("v2/application/fetchList",{moduleName:moduleName});case 3:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this2.$message.error(error.message||"Error Occured"):(_this2.apps=data.application||[],(0,validation/* isEmpty */.xb)(_this2.appId)&&(_this2.appId=(_this2.apps.find((function(app){return"newapp"===app.linkName}))||_this2.apps[0]).id));case 7:case"end":return _context2.stop()}}),_callee2)})))()},loadForms:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var moduleName,appId,params,_yield$API$get2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return moduleName=_this3.moduleName,appId=_this3.appId,params={moduleName:moduleName,appId:appId,fetchDisabledForms:!0},_this3.isLoading=!0,_context3.next=5,api/* API */.bl.get("/v2/forms",params);case 5:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?_this3.$message.error(error.message||"Error Occured"):_this3.forms=data.forms||[],_this3.isLoading=!1;case 10:case"end":return _context3.stop()}}),_callee3)})))()},loadVisitorType:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var appId,moduleName,url,param,_yield$API$get3,data,error,visitorType;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return appId=_this4.appId,moduleName=_this4.moduleName,_this4.isLoading=!0,url="v3/modules/data/list",param={moduleName:"visitorType",appId:appId,parentModuleName:moduleName,showAll:!0},_context4.next=6,api/* API */.bl.get(url,param);case 6:_yield$API$get3=_context4.sent,data=_yield$API$get3.data,error=_yield$API$get3.error,error?_this4.$message.error(error.message||"Error Occured"):(visitorType=data.visitorType,_this4.visitorType=visitorType||[]),_this4.isLoading=!1;case 11:case"end":return _context4.stop()}}),_callee4)})))()},openTypeFormCreation:function(visitorType){this.selectedType=visitorType,this.showFormCreation=!0},loadAppData:function(){this.loadVisitorType(),this.loadForms()},updateStatus:function(vType){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var url,param,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return url="v3/visitorTypeForm/update",param={parentModuleName:_this5.moduleName,appId:_this5.appId,visitorType:vType},_context5.next=4,api/* API */.bl.post(url,param);case 4:_yield$API$post=_context5.sent,error=_yield$API$post.error,error?_this5.$message.error(error.message||"Error occurred while updating Visitor Type Form"):(_this5.showFormCreation=!1,_this5.loadVisitorType(),_this5.$message.success("Updated successfully"));case 7:case"end":return _context5.stop()}}),_callee5)})))()}}},setup_SelectVisitorTypeFormsvue_type_script_lang_js=SelectVisitorTypeFormsvue_type_script_lang_js,SelectVisitorTypeForms_component=(0,componentNormalizer/* default */.Z)(setup_SelectVisitorTypeFormsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SelectVisitorTypeForms=SelectVisitorTypeForms_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/17785.js.map