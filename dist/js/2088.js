(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[2088],{
/***/918325:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AssetDuplicationViewer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AssetDuplicationViewer.vue?vue&type=template&id=49d0ced3
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container new-add-duplicate-dialog fc-dialog-header-hide",attrs:{visible:_vm.visible,width:"45%",maxHeight:"300px",title:_vm.moduleName+" Duplication",confirmTitle:"UPDATE"},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{staticClass:"positon-relative duplicate-dialog-body"},[_c("div",{staticClass:"record-duplicate-dialog-form"},[_c("div",{staticClass:"record-duplicate-dialog-form-left",class:{"duplicate-right-side-width":_vm.$validation.isEmpty(_vm.records)}},[_c("div",{staticClass:"label-txt-black text-uppercase fwBold duplicate-header-left"},[_vm._v(" "+_vm._s(_vm.moduleName)+" "+_vm._s(_vm.$t("common._common.duplication"))+" ")]),_c("div",{staticClass:"pL30 pR30"},[_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.name"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common._common.enter_the_name")},model:{value:_vm.duplicateObj.name,callback:function($$v){_vm.$set(_vm.duplicateObj,"name",$$v)},expression:"duplicateObj.name"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.starting_number"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"number",placeholder:_vm.$t("common.placeholders.enter_the_starting_number"),min:0},model:{value:_vm.startingNumber,callback:function($$v){_vm.startingNumber=$$v},expression:"startingNumber"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.quantity"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"number",placeholder:_vm.$t("common.placeholders.enter_the_quantity"),min:0,max:100},model:{value:_vm.duplicateObj.quantity,callback:function($$v){_vm.$set(_vm.duplicateObj,"quantity",$$v)},expression:"duplicateObj.quantity"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.prefix"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.placeholders.enter_the_prefix")},model:{value:_vm.duplicateObj.prefix,callback:function($$v){_vm.$set(_vm.duplicateObj,"prefix",$$v)},expression:"duplicateObj.prefix"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.suffix"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.placeholders.enter_the_suffix")},model:{value:_vm.duplicateObj.sufix,callback:function($$v){_vm.$set(_vm.duplicateObj,"sufix",$$v)},expression:"duplicateObj.sufix"}})],1)])],1)],1)]),_vm.$validation.isEmpty(_vm.records)?_vm._e():[_c("div",{staticClass:"record-duplicate-dialog-form-right",class:{"duplicate-right-side-hide":!_vm.records}},[_c("div",[_c("div",{staticClass:"flex-middle record-duplicate-left-header"},[_c("div",{staticClass:"label-txt-black fwBold mL10"},[_vm._v(" "+_vm._s(_vm.records.length)+" "+_vm._s(_vm.listName)+_vm._s(_vm.duplicateObj.quantity>1?"s":"")+" ")])]),_vm._l(_vm.records,(function(value,index){return index<10?_c("div",{key:index,staticClass:"pR30 pL30 pT3"},[_c("div",{staticClass:"fc-black-13 text-left pT15 pB15 border-bottom3 bold"},[_vm._v(" "+_vm._s(value)+" ")])]):_vm._e()})),_vm.records.length>10?_c("div",{staticClass:"pR30 pL30 pT20"},[_c("i",{staticClass:"el-icon-plus plus-button",staticStyle:{"font-weight":"700","font-size":"12px"}}),_c("span",{staticClass:"fc-black-13 text-left pT15 pB15 bold"},[_vm._v(" "+_vm._s(_vm.records.length-10)+" "+_vm._s(_vm.listName)+_vm._s(_vm.records.length-10>1?"s":""))])]):_vm._e()],2)])],_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.visible=!1,_vm.actioncancel()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.actionSave()}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"Save"))])],1)],2)])],1)],1)},staticRenderFns=[],utils_validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(990260)),ErrorBanner=__webpack_require__(297157),AssetDuplicationViewervue_type_script_lang_js={data:function(){return{visible:!0,saving:!1,error:!1,errorText:"",startingNumber:1,duplicateObj:{name:null,quantity:"1",prefix:null,sufix:null}}},computed:{records:function(){var duplicateObj=this.duplicateObj,startingNumber=this.startingNumber,recordList=[];if(!(0,utils_validation/* isEmpty */.xb)(duplicateObj.name))for(var i=0;i<duplicateObj.quantity;i++){var value=((0,utils_validation/* isEmpty */.xb)(duplicateObj.prefix)?"":duplicateObj.prefix+" ")+((0,utils_validation/* isEmpty */.xb)(duplicateObj.name)?"":duplicateObj.name)+(!(0,utils_validation/* isEmpty */.xb)(startingNumber)&&startingNumber>0?" ":"")+(!(0,utils_validation/* isEmpty */.xb)(startingNumber)&&startingNumber>0?startingNumber:"")+((0,utils_validation/* isEmpty */.xb)(duplicateObj.sufix)?"":" "+duplicateObj.sufix);value.length>0&&recordList.push(value),startingNumber++}return recordList}},components:{ErrorBanner:ErrorBanner/* default */.Z},watch:{selectedRecordObj:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.init()},visible:function(newVal,oldVal){newVal||this.actioncancel()},"duplicateObj.quantity":function(newData){newData>100?(this.errorText="Quantity should not exceed 100",this.error=!0):this.error=!1}},mounted:function(){this.init()},props:["moduleName","selectedRecord","selectedRecordObj","listName"],methods:{init:function(){this.selectedRecordObj&&this.$set(this.duplicateObj,"name",(0,utils_validation/* isEmpty */.xb)(this.selectedRecordObj)?null:this.selectedRecordObj.name)},actioncancel:function(){this.$emit("closed")},actionSave:function(){var _this=this,moduleName=this.moduleName,startingNumber=this.startingNumber,selectedRecord=this.selectedRecord,duplicateObj=this.duplicateObj;if(this.validation(),!this.error){this.saving=!0;var url="/v2/module/recordsDuplication",params={moduleName:moduleName,id:selectedRecord,startingNumber:parseInt(startingNumber),duplicateObj:duplicateObj};this.$http.post(url,params).then((function(response){response.data&&0===response.data.responseCode?(_this.$message({message:moduleName+" duplicated successfully",type:"success"}),_this.saving=!1,_this.$emit("sucess"),_this.$emit("closed")):(_this.$error.message("Export failed"),_this.$emit("closed"))}))}},validation:function(){(0,utils_validation/* isEmpty */.xb)(this.duplicateObj.name)?(this.errorText="Please enter the name",this.error=!0):(0,utils_validation/* isEmpty */.xb)(this.duplicateObj.quantity)?(this.errorText="Please enter the quantity",this.error=!0):!(0,utils_validation/* isEmpty */.xb)(this.duplicateObj.quantity)&&this.duplicateObj.quantity>100?(this.errorText="Quantity should not exceed 100",this.error=!0):(0,utils_validation/* isEmpty */.xb)(this.startingNumber)?(this.errorText="Please enter the startingNumber",this.error=!0):(this.errorText="",this.error=!1)}}},components_AssetDuplicationViewervue_type_script_lang_js=AssetDuplicationViewervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AssetDuplicationViewervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AssetDuplicationViewer=component.exports},
/***/574655:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return BulkUpdateViewer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/BulkUpdateViewer.vue?vue&type=template&id=147d3385
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("f-dialog",{attrs:{"append-to-body":!0,visible:_vm.fieldUpdateValue,width:"45%",maxHeight:"300px",title:"Bulk Update",confirmTitle:"UPDATE"},on:{"update:visible":function($event){_vm.fieldUpdateValue=$event},save:function($event){return _vm.actionSave(_vm.fieldMatcher)},close:function($event){_vm.fieldUpdateValue=!1,_vm.actioncancel()}}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},_vm._l(_vm.fieldMatcher,(function(element,index){return _c("div",{key:index},[_c("el-row",{staticClass:"visibility-visible-actions fc-row-hover pT10 pB10 pL10 pointer"},[_c("el-col",{attrs:{span:1}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(" "+_vm._s(index+1)+" ")])])]),_c("el-col",{staticClass:"mL10",attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:""},on:{change:function($event){return _vm.statusFieldName(element,index)}},model:{value:element.field,callback:function($$v){_vm.$set(element,"field",$$v)},expression:"element.field"}},_vm._l(_vm.updateFields,(function(field,index){return _c("el-option",{key:index,attrs:{disabled:!_vm.checkUpdate(field),label:field.displayName,value:field.name}})})),1)],1),_c("el-col",{attrs:{span:9}},[_c("div",[element.fieldObj?element.isSpacePicker?_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100 mL40",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){return _vm.checkinput(element)}},model:{value:_vm.selectedspace,callback:function($$v){_vm.selectedspace=$$v},expression:"selectedspace"}},[_vm.searchbool?_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0,_vm.assignindex(index)}},slot:"suffix"}):_vm._e()]),_c("space-asset-chooser",{attrs:{visibility:_vm.chooserVisibility},on:{associate:_vm.associate,"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1):element.isAssigned?_c("div",[_c("div",{staticClass:"fc-border-input-div2 width100 mL40"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.confirmRequest)))]),_c("span",{staticStyle:{float:"right","padding-right":"12px"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_c("f-assignment",{attrs:{model:_vm.confirmRequest,viewtype:"form"},on:{value:function($event){return _vm.updateConfirmRequest($event,index)}}})],1):_c("div",["NUMBER"===element.fieldObj[0].dataTypeEnum._name||"DECIMAL"===element.fieldObj[0].dataType?_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width140px",attrs:{type:"number"},on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}}):"BOOLEAN"===element.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 mL40 width140px",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}},[_c("el-option",{attrs:{label:element.fieldObj[0].trueVal?element.fieldObj[0].trueVal:"Yes",value:"true"}}),_c("el-option",{attrs:{label:element.fieldObj[0].falseVal?element.fieldObj[0].falseVal:"No",value:"false"}})],1):"ENUM"===element.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL40",attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}},_vm._l(_vm.picklistOptions[element.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):"DATE"===element.fieldObj[0].dataTypeEnum._name||"DATE_TIME"===element.fieldObj[0].dataTypeEnum._name?_c("el-row",{staticClass:"mL40"},[_c("el-date-picker",{staticClass:"fc-input-full-border-select2 width100 date-editor",staticStyle:{width:"290px"},attrs:{type:"datetime"},on:{change:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}})],1):"LOOKUP"!==element.fieldObj[0].dataTypeEnum._name||"LOOKUP_SIMPLE"!==element.fieldObj[0].displayType._name&&"LOOKUP_POPUP"!==element.fieldObj[0].displayType._name?_vm.isMultiLookUpField(element)?_c("FLookupField",{key:index+" "+element.fieldObj[0].id,staticClass:"width100 mL40 bulk-update-flookup",attrs:{"data-test-selector":""+element.fieldObj[0].name,model:element.valueArray,field:_vm.getMultiLookUpFieldObj(element.fieldObj[0]),canShowLookupWizard:_vm.showLookupFieldWizard},on:{recordSelected:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)},"update:model":function($event){return _vm.$set(element,"valueArray",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}}):_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width100",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}}):_c("FLookupField",{key:index+" "+element.fieldObj[0].id,staticClass:"width100 mL40 bulk-update-flookup",attrs:{"data-test-selector":""+element.fieldObj[0].name,model:element.valueArray,field:element.fieldObj[0],canShowLookupWizard:_vm.showLookupFieldWizard},on:{recordSelected:function($event){_vm.changeDataType(element,index),_vm.checkinput(element)},"update:model":function($event){return _vm.$set(element,"valueArray",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}})],1):_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL40 width100",on:{change:function($event){return _vm.checkinput(element)}},model:{value:element.value,callback:function($$v){_vm.$set(element,"value",$$v)},expression:"element.value"}})],1)])]),_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"visibility-hide-actions pT15 pL55 pointer"},[_c("img",{staticClass:"pointer",attrs:{src:__webpack_require__(353654)},on:{click:function($event){return _vm.addRow(element)}}}),_vm.indexbool?_c("img",{staticClass:"pointer mL5",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(element,index)}}}):_vm._e()])])],1)],1)})),0),_vm.showLookupFieldWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.showLookupFieldWizard,selectedLookupField:_vm.selectedLookupField,withReadings:!0},on:{"update:canShowLookupWizard":function($event){_vm.showLookupFieldWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.showLookupFieldWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}}):_vm._e()],1)],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(339772),__webpack_require__(420629)),picklist=__webpack_require__(961358),FAssignment=__webpack_require__(383274),SpaceAssetChooser=__webpack_require__(372587),FDialogNew=__webpack_require__(436756),validation=__webpack_require__(990260),FLookupField=__webpack_require__(855048),FLookupFieldWizard=__webpack_require__(499751),TeamStaffMixin=__webpack_require__(462599),BulkUpdateViewervue_type_script_lang_js={created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadGroups")},mixins:[TeamStaffMixin/* default */.Z],computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},assetCategory:function(state){return state.assetCategory},ticketpriority:function(state){return state.ticketPriority},moduleFields:function(state){return state.view.metaInfo.fields}})),data:function(){return{confirmRequest:{assignedTo:{id:null},assignmentGroup:{id:null}},showLookupFieldWizard:!1,indexcount:0,checkbool:!1,indexbool:!1,updateFields:[],fieldbool:!1,fielddeletelist:[],fieldupdatelist:[],fieldnewlist:[],searchbool:!0,selectedspace:null,referindex:-1,index:null,fieldContext:"",chooserVisibility:!1,picklistOptions:{},fieldUpdateValue:!0,spacePicker:!1,fieldMatcher:[],selectedLookupField:null}},components:{FAssignment:FAssignment/* default */.Z,FDialog:FDialogNew/* default */.Z,SpaceAssetChooser:SpaceAssetChooser/* default */.Z,FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},props:["module","fieldlist"],watch:{},mounted:function(){this.addRow(),this.update()},methods:{updateConfirmRequest:function(value,index){null!=value.assignedTo.id&&(this.confirmRequest.assignedTo.id=value.assignedTo.id,this.fieldMatcher[index].value=value.assignedTo.id),null!=value.assignmentGroup.id&&(this.confirmRequest.assignmentGroup.id=value.assignmentGroup.id,this.fieldMatcher[index].valueArray=value.assignmentGroup.id)},checkinput:function(selectedField){this.fieldupdatelist.push(selectedField.field)},actioncancel:function(){this.$emit("closed")},assignindex:function(val){this.index=val},associate:function(selectedObj){this.searchbool=!1,this.fieldMatcher[this.index].parseLabel=selectedObj,this.selectedspace=selectedObj.name,this.chooserVisibility=!1},update:function(){var _this=this;this.fieldnewlist=this.fieldlist,this.moduleFields&&this.fieldnewlist&&(this.updateFields=this.moduleFields.filter((function(field){return!field.default||_this.fieldnewlist.includes(field.name)})),this.updateFields.find((function(fm){"assignedTo"===fm.name&&(fm.displayName="Team / Staff")})))},checkUpdate:function(field){return!this.fieldupdatelist.find((function(fm){return fm===field.name}))},statusFieldName:function(selectedField,index){void 0!=selectedField&&this.fieldupdatelist.push(selectedField.field);var field=this.moduleFields.filter((function(field){return field.name===selectedField.field}));if(this.fieldMatcher[index].fieldObj=field,this.fieldMatcher[index].isSpacePicker=!1,this.fieldMatcher[index].isAssigned=!1,field.length>0){if(this.fieldMatcher[index].columnName=field[0].completeColumnName,"ENUM"===field[0].dataTypeEnum._name&&this.$set(this.picklistOptions,field[0].name,field[0].enumMap),"LOOKUP"===field[0].dataTypeEnum._name&&field[0].specialType)"requester"===field[0].specialType?this.loadPickList(field[0].lookupModule.name,field[0].name):this.loadSpecialTypePickList(field[0].specialType,field[0].name,index);else if("LOOKUP"===field[0].dataTypeEnum._name&&field[0].lookupModule)if("ticketpriority"===field[0].lookupModule.name){var priority={};this.ticketpriority.forEach((function(d){priority[d.id]=d.displayName})),this.$set(this.picklistOptions,field[0].name,priority)}else"resource"===field[0].lookupModule.name?this.loadSpecialTypePickList(field[0].lookupModule.name,field[0].name,index):this.loadPickList(field[0].lookupModule.name,field[0].name);this.$forceUpdate()}},loadPickList:function(moduleName,fieldName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this2.$message.error(error.message||"Error Occured"):_this2.$set(_this2.picklistOptions,fieldName,options);case 6:case"end":return _context.stop()}}),_callee)})))()},changeDataType:function(criteria,index){if((0,validation/* isEmpty */.xb)(index)||(0,validation/* isEmpty */.xb)(criteria[index])||"DATE_TIME"!==criteria[index].fieldObj[0].dataTypeEnum._name&&"DATE"!==criteria[index].fieldObj[0].dataTypeEnum._name)criteria.valueArray&&(criteria.value={id:criteria.valueArray});else if(criteria[index].value){var interval=this.$helpers.daysHoursMinuToSec(criteria[index].value);criteria[index].value=1e3*interval,this.fieldMatcher[index].value=criteria[index].value}this.$forceUpdate()},actionSave:function(datas){var data=this.$helpers.cloneObject(datas);data&&this.$emit("submit",data)},addRow:function(){var _this3=this;this.indexcount++;var fieldMatcher=this.fieldMatcher;this.indexcount>1?this.indexbool=!0:this.indexbool=!1,this.moduleFields&&this.fieldlist&&(this.updateFields=this.moduleFields.filter((function(field){return!field.default||_this3.fieldlist.includes(field.name)})),this.updateFields.find((function(fm){"assignedTo"===fm.name&&(fm.displayName="Team / Staff")})));var newField={field:"",isSpacePicker:!1,isAssigned:!1,value:null,parseLabel:null,valueArray:null,dateObject:{},fieldObj:[{displayName:"",dataTypeEnum:{_name:""}}]};this.$set(this.fieldMatcher,fieldMatcher.length,newField)},deleteRow:function(element,index){this.indexcount--,this.indexcount>1?this.indexbool=!0:this.indexbool=!1;for(var i=0;i<this.fieldupdatelist.length;i++)this.fieldupdatelist[i]===element.field&&(this.referindex=i);-1!=this.referindex&&this.fieldupdatelist.splice(this.referindex,1),this.referindex=-1,
// this.fielddeletelist.push(element.field)
this.fieldMatcher.splice(index,1)},loadSpecialTypePickList:function(specialType,fieldName,index){var self=this,pickOption={};if("users"===specialType||"groups"===specialType)this.fieldMatcher[index].isAssigned=!0;else if("basespace"===specialType){this.fieldMatcher[index].isSpacePicker=!0;var _step,spaceList=self.$store.state.spaces,_iterator=(0,createForOfIteratorHelper/* default */.Z)(spaceList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var space=_step.value;pickOption[space.id]=space.name}}catch(err){_iterator.e(err)}finally{_iterator.f()}self.$set(self.picklistOptions,fieldName,pickOption)}else"resource"===specialType?this.fieldMatcher[index].isSpacePicker=!0:"sourceType"===specialType&&self.$set(self.picklistOptions,fieldName,this.$constants.SourceType)},showLookupWizard:function(field,canShow){this.selectedLookupField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{config:{}}),this.showLookupFieldWizard=canShow},setLookupFieldValue:function(value){var _this4=this,field=value.field,selectedItems=field.selectedItems,fieldMatcher=this.fieldMatcher,selectedLookupField=this.selectedLookupField,currentFieldIndex=fieldMatcher.findIndex((function(field){var name=_this4.$getProperty(field,"fieldObj.0.name");return name===selectedLookupField.name})),currentField=fieldMatcher[currentFieldIndex];if(field.multiple){var valueArrayItems=[];selectedItems.forEach((function(selectedItem){var _ref=selectedItem||{},value=_ref.value;valueArrayItems.push(value)})),currentField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currentField),{},{valueArray:valueArrayItems})}else currentField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currentField),{},{valueArray:selectedItems[0].value});(0,validation/* isEmpty */.xb)(fieldMatcher[currentFieldIndex])||(this.$set(this.fieldMatcher,currentFieldIndex,currentField),this.changeDataType(currentField,currentFieldIndex),this.checkinput(currentField)),this.showLookupFieldWizard=!1},isMultiLookUpField:function(element){var _ref2=element||{},fieldObj=_ref2.fieldObj,_ref3=fieldObj[0]||{},displayType=_ref3.displayType,dataTypeEnum=_ref3.dataTypeEnum,_ref4=displayType||{},displayTypeName=_ref4._name,_ref5=dataTypeEnum||{},dataTypeEnumName=_ref5._name;return!("MULTI_LOOKUP"!==dataTypeEnumName||!["MULTI_LOOKUP_POPUP","MULTI_LOOKUP_SIMPLE"].includes(displayTypeName))},getMultiLookUpFieldObj:function(variable){return variable["multiple"]=!0,variable}}},components_BulkUpdateViewervue_type_script_lang_js=BulkUpdateViewervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_BulkUpdateViewervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,BulkUpdateViewer=component.exports},
/***/350367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUploadPhotos}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FUploadPhotos.vue?vue&type=template&id=5a0f9682
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"upload-photos-dialog fc-dialog-center-container",attrs:{title:"Upload Photos",visible:_vm.showDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event},"before-close":_vm.closeDialog}},[_vm.showDialog?_c("el-upload",{attrs:{multiple:"","list-type":"picture-card","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-error":_vm.onError,"on-remove":_vm.onRemove}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e(),_c("span",{staticClass:"dialog-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.done}},[_vm._v("Done")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),eventBus=__webpack_require__(398011),FUploadPhotosvue_type_script_lang_js={props:["module","record","list"],data:function(){return{photos:[],showDialog:!1,isChanged:!1}},methods:{open:function(){this.photos=(0,validation/* isEmpty */.xb)(this.list)?[]:this.list,this.showDialog=!0},onUpload:function(_ref){var file=_ref.file,data=(_ref.onError,{parentId:this.record.id,module:this.module}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.list.push(result.photos[0]),this.isChanged=!0)},onError:function(){this.$message.error(this.$t("setup.users_management.Invalid_image"))},onRemove:function(file){var _this=this;this.$http.post("/v2/photos/delete",{id:file.id,photoId:file.photoId,module:this.module,parentId:this.record.id}).then((function(response){if(0===response.data.responseCode){var list=(0,toConsumableArray/* default */.Z)(_this.list),index=list.findIndex((function(f){return f.id===file.id}));list.splice(index,1),_this.$emit("updatePhotos",list),_this.isChanged=!0}})).catch((function(){}))},done:function(){this.showDialog=!1,this.photos=[],this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1)},closeDialog:function(){this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1),this.showDialog=!1}}},components_FUploadPhotosvue_type_script_lang_js=FUploadPhotosvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUploadPhotosvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUploadPhotos=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/751201:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Asset}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Asset.vue?vue&type=template&id=30a11ac8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.asset?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[!_vm.showSlide||"undefined"!==typeof _vm.disableSlide&&!1!==_vm.disableSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{staticClass:"fc-avatar-carousel",attrs:{trigger:"click",autoplay:!1,"indicator-position":"none"}},[_vm._l(_vm.photos,(function(photo,index){return[photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()]}))],2)],1),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.asset.name))])])]):_vm._e(),!_vm.showUpload||"undefined"!==typeof _vm.disableUpload&&!1!==_vm.disableUpload?_vm._e():_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{module:"assetphotos",list:_vm.photos,record:_vm.asset},on:{updatePhotos:function($event){return _vm.handleUpdate()}}})],1)])]):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(350367)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),api=__webpack_require__(32284),Assetvue_type_script_lang_js={props:["size","asset","name","hovercard","disableUpload","disableSlide"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.asset.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge","widget"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl()},created:function(){this.$store.dispatch("loadAssetType")},computed:(0,objectSpread2/* default */.Z)({showSlide:function(){if(this.photos&&this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},(0,vuex_esm/* mapGetters */.Se)(["getAssetType"])),watch:{asset:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var asset,size,sliderEnabledSize,disableSlide,_ref,avatarUrl,assetId,_yield$API$get,error,data,_ref2,_ref2$photos,photos,defaultAvatarUrl;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(asset=_this.asset,size=_this.size,sliderEnabledSize=_this.sliderEnabledSize,disableSlide=_this.disableSlide,_ref=asset||{},avatarUrl=_ref.avatarUrl,assetId=_ref.id,!(sliderEnabledSize.indexOf(size)>=0&&(!disableSlide||disableSlide&&"true"===disableSlide))){_context.next=12;break}if(!assetId){_context.next=12;break}return _this.photosLoading=!0,_context.next=7,api/* API */.bl.get("/photos/get?module=assetphotos&parentId=".concat(assetId));case 7:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_ref2=data||{},_ref2$photos=_ref2.photos,photos=void 0===_ref2$photos?[]:_ref2$photos,(0,validation/* isEmpty */.xb)(photos)||photos.forEach((function(photo){var _ref3=photo||{},url=_ref3.url;(0,validation/* isEmpty */.xb)(url)||(avatarUrl=url)})),_this.$set(_this,"photos",photos)),_this.photosLoading=!1;case 12:(0,validation/* isEmpty */.xb)(avatarUrl)?(defaultAvatarUrl=_this.getDefaultAvatar()||"",_this.$set(_this,"avatarUrl",defaultAvatarUrl)):_this.$set(_this,"avatarUrl",avatarUrl);case 13:case"end":return _context.stop()}}),_callee)})))()},handleUpdate:function(){this.loadAvatarUrl()},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.asset&&this.asset.type&&this.asset.type.id){var name=this.getAssetType(this.asset.type.id)?this.getAssetType(this.asset.type.id).name:"";return __webpack_require__("Plumbing Equipment"===name||"Equipment"===name?164065:"Furniture"===name?703659:"Vehicle"===name?916803:164065)}return __webpack_require__(164065)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Assetvue_type_script_lang_js=Assetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Assetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Asset=component.exports},
/***/202088:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AssetList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/asset/v1/AssetList.vue?vue&type=template&id=6611f1ec
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("CommonListLayout",{staticClass:"custom-module-list-layout asset-list-page",attrs:{moduleName:_vm.moduleName,showViewRearrange:!0,showViewEdit:!0,visibleViewCount:3,getPageTitle:function(){return _vm.viewName},pathPrefix:_vm.parentPath+"/"+_vm.modulePrefix+"/",hideSubHeader:_vm.canHideSubHeader,recordCount:_vm.recordCount,recordLoading:_vm.showLoading},scopedSlots:_vm._u([{key:"header",fn:function(){return[_vm.canHideFilter?_vm._e():_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName}}),_vm.showSearch?_vm._e():[_vm.canShowVisualSwitch?_c("visual-type",{on:{onSwitchVisualize:function(val){return _vm.canShowListView=val}}}):_vm._e(),186===_vm.$account.org.id?_c("div",[_c("el-dropdown",{on:{command:_vm.switchView}},[_c("img",{staticClass:"as-view-icon",attrs:{src:__webpack_require__(212708)}}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"list"}},[_vm._v(_vm._s(_vm.$t("common._common.list_view")))]),_c("el-dropdown-item",{attrs:{command:"map"}},[_vm._v(_vm._s(_vm.$t("common._common.map_view")))]),_c("el-dropdown-item",{attrs:{command:"floormap"}},[_vm._v(_vm._s(_vm.$t("common._common.floor_plan_view")))])],1)],1)],1):_vm._e(),_c("CustomButton",{staticClass:"custom-button",attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_TOP},on:{onSuccess:_vm.onCustomButtonSuccess,onError:function(){}}}),_vm.$hasPermission("asset:CREATE")?_c("button",{staticClass:"fc-create-btn",on:{click:_vm.addAsset}},[_vm._v(" "+_vm._s(_vm.$t("common._common._new"))+" "+_vm._s(_vm.moduleDisplayName)+" ")]):_vm._e()]]},proxy:!0},_vm.canShowCalendarHeader?{key:"sub-header",fn:function(){return[_vm.showListView?_vm._e():_c("CalendarDateWrapper")]},proxy:!0}:null,{key:"sub-header-actions",fn:function(){return[_vm.showSearch||_vm.isEmpty(_vm.records)?_vm._e():[_c("pagination",{staticClass:"pL15 fc-black-small-txt-12",attrs:{total:_vm.recordCount,currentPageCount:_vm.currentPageCount,perPage:_vm.perPage,skipTotalCount:!0}}),_vm.recordCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),placement:"right"}},[_c("Sort",{key:_vm.moduleName+"-sort",attrs:{moduleName:_vm.moduleName},on:{onSortChange:_vm.updateSort}})],1),_c("span",{staticClass:"separator"},[_vm._v("|")]),_vm.isAltayerNonPrivilagedUser?_vm._e():[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.export"),placement:"left"}},[_c("f-export-settings",{attrs:{module:_vm.moduleName,viewDetail:_vm.viewDetail,showViewScheduler:!1,showMail:!1,filters:_vm.filters}})],1)]]]},proxy:!0}],null,!0)},[_c("div",{staticClass:"height100"},[_vm.showLoading?_c("Spinner",{staticClass:"mT40",attrs:{show:_vm.showLoading}}):"map"===_vm.view?_c("div",{staticClass:"height100"},[_c("asset-mapview",{attrs:{markers:_vm.mapAssets}})],1):"floormap"===_vm.view?_c("div",[_c("floor-map",{attrs:{assets:_vm.records}})],1):_vm.showListView?[_vm.$validation.isEmpty(_vm.records)&&!_vm.showLoading?_c("div",{staticClass:"cm-empty-state-container white-bg flex-middle justify-content-center  m10 mT0 "},[_c("inline-svg",{attrs:{src:"svgs/emptystate/assets-listempty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"q-item-label nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("asset.assets.no_asset"))+" ")])],1):_vm._e(),_vm.showLoading||_vm.$validation.isEmpty(_vm.records)?_vm._e():_c("div",{staticClass:"height100"},[_c("div",{staticClass:"cm-list-container"},[_c("div",{staticClass:"column-customization-icon",attrs:{disabled:!_vm.isColumnCustomizable},on:{click:_vm.toShowColumnSettings}},[_c("el-tooltip",{attrs:{disabled:_vm.isColumnCustomizable,placement:"top",content:_vm.$t("common._common.you_dont_have_permission")}},[_c("inline-svg",{staticClass:"text-center position-absolute icon",attrs:{src:"column-setting"}})],1)],1),_vm.selectedListItemsIds.length>0?_c("div",{staticClass:"pull-left table-header-actions"},[_vm.$hasPermission("asset:UPDATE")?_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary",on:{click:function($event){_vm.bulkbool=!0}}},[_c("i",{staticClass:"fa fa-refresh b-icon"}),_vm._v(" "+_vm._s(_vm.$t("common._common.update"))+" ")])]):_vm._e(),_vm.$hasPermission("asset:DELETE")?_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary pointer",class:{disabled:_vm.deleteLoading},on:{click:function($event){return _vm.deleteAsset(_vm.selectedListItemsIds)}}},[_vm.deleteLoading?_c("i",{staticClass:"fa fa-circle-o-notch b-icon fa-spin",attrs:{"aria-hidden":"true"}}):_c("i",{staticClass:"fa fa-trash-o b-icon"}),_vm._v(" "+_vm._s(_vm.$t("asset.assets.delete"))+" ")])]):_vm._e(),_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary pointer",on:{click:_vm.redirectToQrPage}},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"printer",iconClass:"icon icon-sm mR5"}}),_vm._v(" "+_vm._s(_vm.$t("asset.assets.print_qr"))+" ")],1)]),_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary pointer",on:{click:function($event){_vm.canGenerateZip=!0,_vm.onQrSelected()}}},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"download3",iconClass:"icon icon-sm mR5"}}),_vm._v(" "+_vm._s(_vm.$t("asset.assets.download_qr"))+" ")],1)]),_c("CustomButton",{staticClass:"custom-button",attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_BAR,selectedRecords:_vm.selectedListItemsObj},on:{onSuccess:_vm.onCustomButtonSuccess,onError:function(){}}})],1):_vm._e(),_c("CommonList",{attrs:{viewDetail:_vm.viewDetail,records:_vm.records,moduleName:_vm.moduleName,redirectToOverview:_vm.openAssetOverview,slotList:_vm.slotList,canShowCustomButton:"true",refreshList:_vm.onCustomButtonSuccess},on:{"selection-change":_vm.selectAsset},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+record.id))])])]}},{key:_vm.slotList[1].criteria,fn:function(ref){var record=ref.record;return[_c("router-link",{staticClass:"d-flex fw5 label-txt-black ellipsis main-field-column",attrs:{to:_vm.openAssetOverview(record.id)}},[_c("asset-avatar",{attrs:{name:!1,size:"lg",asset:record}}),_c("el-tooltip",{attrs:{effect:"dark",content:record.name||"---",placement:"top-start","open-delay":600}},[_c("div",{staticClass:"fw5 width200px"},[_c("span",{staticClass:"list-main-field"},[_vm._v(_vm._s(record.name||"---"))])])])],1)]}},{key:_vm.slotList[2].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex text-center"},[_vm.$hasPermission("asset:UPDATE")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.openAssetCreation(record)}}}):_vm._e(),_vm.$hasPermission("asset:DELETE")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteAsset([record.id])}}}):_vm._e()])]}}],null,!0)})],1),_vm.showQrDialog?_c("f-dialog",{attrs:{visible:_vm.showQrDialog,width:"30%",confirmTitle:_vm.$t("asset.assets.generate"),stayOnSave:!0,loading:_vm.fetchingAllAssets,loadingTitle:_vm.$t("asset.assets.generating"),customClass:"qr-dialog",title:_vm.$t("asset.assets.generate_qr")},on:{"update:visible":function($event){_vm.showQrDialog=$event},save:_vm.generateQRCode,close:function($event){_vm.showQrDialog=!1}}},[_c("div",[_vm._v("Selected asset geneated")])]):_vm._e(),_vm.showPrintPreview?_c("div",[_c("generate-q-r-code",{attrs:{assets:_vm.assetsForQr}})],1):_vm._e()],1)]:_vm.showListView?_vm._e():_c("CalendarView",{ref:"calendar",attrs:{moduleName:_vm.moduleName,record:_vm.records,viewDetail:_vm.viewDetail,viewname:_vm.viewname,filters:_vm.filters}}),_vm.canShowAssetCreation?_c("new-asset",{ref:"new-asset",attrs:{canShowAssetCreation:_vm.canShowAssetCreation,moduleName:"asset",selectedCategory:_vm.selectedCategory,dataId:_vm.assetId,moduleDisplayName:"Asset"},on:{"update:canShowAssetCreation":function($event){_vm.canShowAssetCreation=$event},"update:can-show-asset-creation":function($event){_vm.canShowAssetCreation=$event},"update:selectedCategory":function($event){_vm.selectedCategory=$event},"update:selected-category":function($event){_vm.selectedCategory=$event},refreshlist:_vm.refreshRecordDetails}}):_vm._e(),_vm.showAssetDuplicationDialog?_c("AssetDuplicationViewer",{attrs:{moduleName:_vm.duplicateAssetObj.categoryModuleName||"asset",listName:"Asset",selectedRecord:_vm.duplicateAssetObj.id,selectedRecordObj:_vm.duplicateAssetObj},on:{sucess:_vm.refreshRecordDetails,closed:function($event){_vm.showAssetDuplicationDialog=!1}}}):_vm._e(),_vm.bulkbool?_c("bulk-update-viewer",{attrs:{module:_vm.moduleName,fieldlist:_vm.bulkfieldlist,"content-css":{padding:"0px",background:"#f7f8fa",Width:"10vw",Height:"30vh"}},on:{submit:_vm.bulkAction,closed:function($event){_vm.bulkbool=!1}}}):_vm._e(),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:_vm.moduleName,viewName:_vm.viewname},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}}),_vm.canShowCategoryDialog?_c("CategoryListDialog",{attrs:{canShowCategoryDialog:_vm.canShowCategoryDialog,selectedCategory:_vm.selectedCategory},on:{"update:canShowCategoryDialog":function($event){_vm.canShowCategoryDialog=$event},"update:can-show-category-dialog":function($event){_vm.canShowCategoryDialog=$event},"update:selectedCategory":function($event){_vm.selectedCategory=$event},"update:selected-category":function($event){_vm.selectedCategory=$event},openAssetCreation:_vm.openAssetCreation}}):_vm._e(),_vm.showDialog?_c("DeleteDialog",{attrs:{moduleName:_vm.moduleName,errorMap:_vm.errorMap,type:_vm.errorType},on:{onClose:function($event){_vm.showDialog=!1},refresh:function($event){return _vm.refreshRelatedList()}}}):_vm._e(),_c("portal",{attrs:{to:"view-manager-link"}},[_c("router-link",{staticClass:"view-manager-btn",attrs:{tag:"div",to:{path:_vm.parentPath+"/"+_vm.moduleName+"/viewmanager"}}},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}}),_c("span",{staticClass:"label mL10 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.views_manager"))+" ")])],1)],1)],2)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),defineProperty=__webpack_require__(482482),createForOfIteratorHelper=__webpack_require__(566347),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),AssetMapViewvue_type_template_id_c912c102_render=(__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(450886),__webpack_require__(879288),__webpack_require__(648324),__webpack_require__(506203),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(857267),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"assetmap"},[_c("gmap-map",{ref:"mapView",attrs:{center:_vm.center,zoom:8,options:_vm.mapOptions},on:{click:function($event){_vm.isClicked=!0}}},[_vm.isClicked?_c("gmap-info-window",{attrs:{options:{pixelOffset:{width:-0,height:-10}},position:_vm.currentMarker.location}},[[_c("div",{staticClass:"assetmap-info-window"},[_c("div",{staticClass:"am-header row p15 f12 pB0"},[_c("div",{staticClass:"col-6"},[_vm._v(_vm._s(_vm.$t("common._common.asset_detail")))]),_c("div",{staticClass:"col-6 text-right"},[_c("i",{staticClass:"el-icon-close pointer f13",on:{click:function($event){_vm.isClicked=!1}}})])]),_c("div",{staticClass:"am-info-row row p15"},[_c("div",{staticClass:"am-info-label  col-4"},[_c("div",{staticClass:"height100"},[_vm.currentMarker.avatarUrl?_c("img",{staticClass:"default-img",attrs:{src:_vm.currentMarker.avatarUrl}}):_c("div",{staticClass:"default-img"})])]),_c("div",{staticClass:"am-info-label  col-8 pL10"},[_c("div",{staticClass:"am-id "},[_vm._v("#"+_vm._s(_vm.currentMarker.id))]),_c("div",{staticClass:"am-label am-subject"},[_vm._v(_vm._s(_vm.currentMarker.name))]),_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.currentMarker.category?_vm.getAssetCategory(_vm.currentMarker.category.id).displayName:"")+" ")]),_c("div",{staticClass:"mT10"},[_c("el-button",{staticClass:"plain",attrs:{size:"mini"},on:{click:function($event){return _vm.openAsset(_vm.currentMarker)}}},[_vm._v(_vm._s(_vm.$t("common._common.open_asset")))])],1)])])])]],2):_vm._e(),_vm._l(_vm.markers,(function(d,index){return _c("gmap-marker",{key:index,staticClass:"gmarker",attrs:{position:d.location,clickable:!0,draggable:!1,options:_vm.getOptions(d),icon:_vm.getIcon(d)},on:{"update:position":function($event){return _vm.$set(d,"location",$event)},mouseover:function($event){return _vm.getHoverdData(d)},mouseleave:function($event){return _vm.leaveHoverdData(d)},click:function($event){return _vm.loadInfo(d)}}})}))],2)],1)}),AssetMapViewvue_type_template_id_c912c102_staticRenderFns=[],vuex_esm=__webpack_require__(420629),AssetMapViewvue_type_script_lang_js={props:["markers","mapheight"],data:function(){return{mapOptions:{gestureHandling:"cooperative",maxZoom:19},currentMarker:{},isClicked:!1,ishoverd:!1,center:{lat:12.9712077,lng:77.9095786}}},created:function(){this.$store.dispatch("loadAssetCategory")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),watch:{markers:function(data){if(data.length>1){var _step,bounds=new window.google.maps.LatLngBounds,_iterator=(0,createForOfIteratorHelper/* default */.Z)(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var m=_step.value;bounds.extend(m.location)}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.$refs.mapView.fitBounds(bounds)}}},mounted:function(){if(this.markers.length>1){var self=this;setTimeout((function(){var _step2,bounds=new window.google.maps.LatLngBounds,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.markers);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var m=_step2.value;bounds.extend(m.location)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}self.$refs.mapView.fitBounds(bounds)}),1e3)}},methods:{loadInfo:function(data){this.currentMarker=data,this.isClicked=!0},openAsset:function(asset){this.$router.push({path:"/app/at/assets/all/"+asset.id+"/overview"}),this.selectedAsset.asset=null},getHoverdData:function(data){this.currentMarker=data,this.ishoverd=!0},leaveHoverdData:function(data){this.currentMarker=data,this.ishoverd=!1},getIcon:function(data){if(data)return{url:data.markerUrl,scaledSize:data.marker?{width:20,height:20,f:"10px",b:"px"}:{width:15,height:15,f:"px",b:"px"},origin:(data.marker,{x:0,y:0}),content:""}},getOptions:function(data){if(data)return{pixelOffset:data.marker?{top:-0,bottom:-38}:{width:0,height:0}}}}},components_AssetMapViewvue_type_script_lang_js=AssetMapViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AssetMapViewvue_type_script_lang_js,AssetMapViewvue_type_template_id_c912c102_render,AssetMapViewvue_type_template_id_c912c102_staticRenderFns,!1,null,null,null)
/* harmony default export */,AssetMapView=component.exports,NewAsset=__webpack_require__(686092),GenerateQRCodevue_type_template_id_12ed4763_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"scrollable-y100",staticStyle:{width:"100%"}},[_c("div",{staticClass:"assets-qrcode-printview"},[_vm.assets?_c("div",_vm._l(_vm.assets,(function(asset,index){return _c("div",{key:index},[_c("div",{staticClass:"pT25 page-break-inside-avoid",staticStyle:{"text-align":"center"}},[_c("div",{staticStyle:{"text-align":"center"}},[_c("qriously",{attrs:{value:asset.qrVal||"facilio_"+_vm.$org.id+"_"+asset.id,size:500,level:"H"}})],1),_c("div",{staticStyle:{"text-align":"center"}},[_c("h3",{staticStyle:{"font-size":"40px",color:"#333333","font-weight":"500"}},[_vm._v(" "+_vm._s(asset.name)+" ")])])])])})),0):_vm._e()])])},GenerateQRCodevue_type_template_id_12ed4763_staticRenderFns=[],GenerateQRCodevue_type_script_lang_js={props:["assets"]},assets_GenerateQRCodevue_type_script_lang_js=GenerateQRCodevue_type_script_lang_js,GenerateQRCode_component=(0,componentNormalizer/* default */.Z)(assets_GenerateQRCodevue_type_script_lang_js,GenerateQRCodevue_type_template_id_12ed4763_render,GenerateQRCodevue_type_template_id_12ed4763_staticRenderFns,!1,null,null,null)
/* harmony default export */,GenerateQRCode=GenerateQRCode_component.exports,FDialogNew=__webpack_require__(436756),AssetDuplicationViewer=__webpack_require__(918325),BulkUpdateViewer=__webpack_require__(574655),FloorMapvue_type_template_id_1928683e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"multi f-element",attrs:{id:"floormapspaceassetchooser"}},[_c("div",{staticStyle:{height:"100%","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div"),_c("el-row",{staticClass:"position-relative"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticStyle:{padding:"10px 20px","border-bottom":"1px solid rgb(230, 236, 243) !important"}},[_c("div",{staticClass:"asset-chooser-select-block"},_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[4!==field.spaceType?[_c("span",{staticClass:"label-txt-black fw-bold pR10"},[_vm._v("Select "+_vm._s(field.placeHolder)+": ")]),!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{staticClass:"fc-input-full-border-select2 mR20",attrs:{clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){3===field.spaceType?_vm.loadFloorviewData(field):_vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()]:_vm._e()],2)})),0)])]),_c("el-col",{attrs:{span:24}},[_vm.floorMapdata?_c("floor-plan-viewer",{attrs:{id:_vm.floorMapdata.id,assetList:_vm.assets}}):_vm._e()],1)],1)],1)])])},FloorMapvue_type_template_id_1928683e_staticRenderFns=[],ResourceMixin=(__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(22637)),FloorPlanViewervue_type_template_id_16c12dd2_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-center pT20 asset-image-view-con"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading}}):_c("div",[_c("div",{staticClass:"fplan-zoom-toolbar"},[_c("i",{staticClass:"el-icon-plus",on:{click:function($event){return _vm.changeScale(.1)}}}),_c("i",{staticClass:"el-icon-minus",on:{click:function($event){return _vm.changeScale(-.1)}}}),_c("el-popover",{attrs:{placement:"right","popper-class":"fplan-zoom-toolbar-popover"},model:{value:_vm.zoomPopover,callback:function($$v){_vm.zoomPopover=$$v},expression:"zoomPopover"}},[_c("ul",{staticClass:"fplan-zoom-toolbar-menu"},[1===_vm.imageShowType?_c("li",{on:{click:function($event){return _vm.showOriginalImage()}}},[_vm._v(" Show Original Image ")]):_vm._e(),2===_vm.imageShowType?_c("li",{on:{click:function($event){return _vm.showScaledImage()}}},[_vm._v(" Show Scaled Image ")]):_vm._e()]),_c("i",{staticClass:"el-icon-more",attrs:{slot:"reference"},slot:"reference"})])],1),_c("canvas",{ref:"imageEditorCanvas"}),_vm.selectedAsset&&_vm.selectedAsset.asset?_c("div",{staticClass:"fplan-asset-tooltip-info",style:{top:_vm.selectedAsset.position.top+"px",left:_vm.selectedAsset.position.left+"px"}},[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("i",{staticClass:"el-icon-close pointer fR",on:{click:function($event){_vm.selectedAsset.asset=null}}})]),_c("el-col",{staticClass:"asset-avatar-col",attrs:{span:12}},[_c("asset-avatar",{attrs:{size:"shuge",disableUpload:!0,disableSlide:!0,name:"false",asset:_vm.selectedAsset.asset}})],1),_c("el-col",{attrs:{span:12}},[_c("div",[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.selectedAsset.asset.id))])]),_c("div",{staticClass:"fc-black-17 bold"},[_vm._v(_vm._s(_vm.selectedAsset.asset.name))]),_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.selectedAsset.asset.category?_vm.getAssetCategory(_vm.selectedAsset.asset.category.id).displayName:"")+" ")]),_c("div",{staticClass:"mT30"},[_c("el-button",{staticClass:"plain",attrs:{size:"mini"},on:{click:function($event){return _vm.openAsset(_vm.selectedAsset.asset)}}},[_vm._v("Open Asset")])],1)])],1)],1):_vm._e()])],1)},FloorPlanViewervue_type_template_id_16c12dd2_staticRenderFns=[],imagemap=(__webpack_require__(737960),__webpack_require__(51101)),Asset=__webpack_require__(751201),baseUrl=__webpack_require__(420499),FloorPlanViewervue_type_script_lang_js={props:["id","assetList"],components:{AssetAvatar:Asset["default"]},data:function(){return{loading:!0,floorObj:null,mapContext:null,assetListData:null,zoomPopover:!1,selectedAsset:{asset:null,position:{top:null,left:null}},imageShowType:1,
// 1 - scaled, 2 - original
currentScaledSize:null}},mounted:function(){this.loadFloorPlan()},created:function(){this.$store.dispatch("loadAssetCategory")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),watch:{id:function(newVal,oldVal){this.loadFloorPlan()},assetList:function(newVal,oldVal){this.loadFloorPlan()}},methods:{loadFloorPlan:function(){var self=this;self.loading=!0,self.$http.get("/floor/"+this.id).then((function(response){self.floorObj=response.data.record,self.loading=!1,self.assetList?(self.assetListData=self.assetList,self.$nextTick((function(){self.initMap()}))):self.loadFloorAssets()}))},loadFloorAssets:function(){var self=this,params="";params=params+"&filters="+encodeURIComponent(JSON.stringify({space:[{operatorId:38,value:[this.id+""]}]})),params+="&moduleName=asset",params=params+"&includeParentFilter="+!0;var url="/asset/all?"+params;this.$http.get(url).then((function(response){self.assetListData=response.data.assets,self.initMap()}))},getFloorPlanImageURL:function(){return(0,baseUrl/* getBaseURL */.BS)()+"/v2/files/preview/"+this.floorObj.floorPlanId},initMap:function(){var _this=this,self=this,assetMap={};if(this.assetListData&&this.assetListData.length){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.assetListData);try{for(_iterator.s();!(_step=_iterator.n()).done;){var at=_step.value;assetMap[at.id+""]={asset:at}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}var floorMapInfo=JSON.parse(this.floorObj.floorPlanInfo);if(!this.currentScaledSize)if(1===this.imageShowType){var scaleSize={width:this.$el.offsetWidth,height:this.$el.offsetHeight},ratio=Math.min(scaleSize.width/floorMapInfo.imageMeta.scaledSize.width,scaleSize.height/floorMapInfo.imageMeta.scaledSize.height);this.currentScaledSize={width:floorMapInfo.imageMeta.scaledSize.width*ratio,height:floorMapInfo.imageMeta.scaledSize.height*ratio}}else this.currentScaledSize=floorMapInfo.imageMeta.scaledSize;this.mapContext={canvas:this.$refs["imageEditorCanvas"],imageScale:"custom",scaleSize:this.currentScaledSize,assetMappingConfig:{assetMap:assetMap,showAssetName:floorMapInfo.assetMappingConfig.showAssetName,defaultDotColor:floorMapInfo.assetMappingConfig.defaultDotColor,defaultTextColor:floorMapInfo.assetMappingConfig.defaultTextColor}},this.resizeMap(floorMapInfo.imageMeta.scaledSize,this.currentScaledSize,floorMapInfo.areas),this.mapContext.toggleControls=function(enable){},imagemap/* default */.Z.initMap(this.mapContext),this.fileReader=new FileReader,this.fileReader.onload=function(e){_this.mapContext.load(e.target.result),_this.imageLoaded=!0},self.mapContext.canvas.onselectstart=function(){return!1},self.mapContext.canvas.ondblclick=function(){},self.mapContext.canvas.onmousedown=function(e){},self.mapContext.canvas.onclick=function(event){var x=event.offsetX,y=event.offsetY;self.selectedAsset.asset=null,self.mapContext.rects.forEach((function(rect){if(y>rect.y&&y<rect.y+rect.height&&x>rect.x&&x<rect.x+rect.width){var l=event.clientX-60;l+300>window.innerWidth&&(l-=300);var t=event.clientY-100;t+150>window.innerHeight&&(t-=160),self.selectedAsset.position.top=t,self.selectedAsset.position.left=l,self.selectedAsset.asset=self.mapContext.assetMappingConfig.assetMap[rect.assetId+""].asset}}))},this.mapContext.onImageLoad=function(){_this.loadAreas(floorMapInfo.areas),_this.mapContext.redraw=!0,_this.mapContext.draw()},this.mapContext.load(this.getFloorPlanImageURL())},loadAreas:function(areas){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(areas);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var area=_step2.value,rectContext={canvas:this.mapContext.canvas,x:area.x,y:area.y,width:area.width,height:area.height,linkType:area.link.type,url:area.link.url,dashboardId:area.link.dashboardId,reportId:area.link.reportId,assetId:area.link.assetId,alt:area.link.alt,target:area.link.target};imagemap/* default */.Z.initRect(rectContext,this.mouseX,this.mouseY),this.mapContext.add(rectContext,!0)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}},resizeMap:function(oldSize,newSize,areas){if(areas){var _step3,wPercent=newSize.width/oldSize.width,hPercent=newSize.height/oldSize.height,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(areas);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var rect=_step3.value;rect.x=rect.x*wPercent-14*wPercent,rect.width=rect.width*wPercent,rect.y=rect.y*hPercent-16*hPercent,rect.height=rect.height*hPercent}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}},changeScale:function(scalePercent){this.currentScaledSize&&(this.currentScaledSize.width=this.currentScaledSize.width+this.currentScaledSize.width*scalePercent,this.currentScaledSize.height=this.currentScaledSize.height+this.currentScaledSize.height*scalePercent,this.initMap())},openAsset:function(asset){this.$router.push({path:"/app/at/assets/all/"+asset.id+"/overview"}),this.selectedAsset.asset=null},showOriginalImage:function(){this.imageShowType=2,this.currentScaledSize=null,this.zoomPopover=!1,this.initMap()},showScaledImage:function(){this.imageShowType=1,this.currentScaledSize=null,this.zoomPopover=!1,this.initMap()}}},components_FloorPlanViewervue_type_script_lang_js=FloorPlanViewervue_type_script_lang_js,FloorPlanViewer_component=(0,componentNormalizer/* default */.Z)(components_FloorPlanViewervue_type_script_lang_js,FloorPlanViewervue_type_template_id_16c12dd2_render,FloorPlanViewervue_type_template_id_16c12dd2_staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanViewer=FloorPlanViewer_component.exports,FloorMapvue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner","assets"],data:function(){return{selectall:!1,showQuickSearch:!1,floorMapdata:null,includeType:"all",selectedList:[]}},components:{FloorPlanViewer:FloorPlanViewer},created:function(){this.$store.dispatch("loadAssetCategory")},computed:{categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}},mounted:function(){this.initResourceData();
// this.loadDefaultFloor()
},watch:{query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},loadDefaultFloor:function(){this.resourceConfig.find((function(rt){return 1===rt.spaceType}))&&this.resourceConfig.find((function(rt){return 1===rt.spaceType})).options.length&&this.onLocationChange(this.resourceConfig.find((function(rt){return 1===rt.spaceType})).options[0])},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource.selected=!1,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},openSpace:function(){this.isAsset=!1,this.loadSpace()},toggleQuickSearch:function(){var _this=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this2=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this2.$set(resource,"selected",_this2.selectall),_this2.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this3=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this3.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this3.$set(resource,"selected",resourceSelectedObj),_this3.setSelectedResource(resource)}))),this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this3.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},loadFloorviewData:function(field){this.floorMapdata=field.options.length?field.options.find((function(rt){return rt.id===field.value})):null,this.applyFilter()},applyFilter:function(){var redirectUrl={space:[{operatorId:38,value:[this.floorMapdata.id+""]}]},view={};this.$route.query&&this.$route.query.view&&(view=this.$helpers.cloneObject(JSON.parse(this.$route.query.view)),view.viewName="floormap",view.hidePagination=!0),this.$router.push("/app/at/assets/all?includeParentFilter=true&hidePagination=true&search="+encodeURIComponent(JSON.stringify(redirectUrl))+"&view="+encodeURIComponent(JSON.stringify(view)))},onLocationChange:function(field){var _this4=this;if(2===field.spaceType){var self=this;self.$http.get("/floor?buildingId="+field.value).then((function(response){response.data&&response.data.records&&(self.resourceConfig.find((function(rt){return 3===rt.spaceType})).options=response.data.records.filter((function(rt){return null!==rt.floorPlanInfo})))}))}else this.onLocationSelected(field).then((function(){_this4.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this5=this;this.loadResourceData().then((function(){_this5.setListSelected()}))},setListSelected:function(){var _this6=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this6.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_FloorMapvue_type_script_lang_js=FloorMapvue_type_script_lang_js,FloorMap_component=(0,componentNormalizer/* default */.Z)(components_FloorMapvue_type_script_lang_js,FloorMapvue_type_template_id_1928683e_render,FloorMapvue_type_template_id_1928683e_staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorMap=FloorMap_component.exports,validation=__webpack_require__(990260),qrious=__webpack_require__(422331),qrious_default=__webpack_require__.n(qrious),jszip_min=__webpack_require__(255733),jszip_min_default=__webpack_require__.n(jszip_min),FileSaver_min=__webpack_require__(293162),CategoryListDialogvue_type_template_id_fda63cd6_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.canShowDialog?_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Categories",visible:_vm.canShowDialog,width:"30%","append-to-body":!0},on:{"update:visible":function($event){_vm.canShowDialog=$event}}},[_c("div",{staticClass:"height250"},[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.category"))+" "),_c("span",{staticClass:"label-span"},[_vm._v("*")])]),_c("FLookupField",{staticClass:"width400px mT10",attrs:{model:_vm.categoryFormObj.categoryId,field:_vm.selectedLookupField},on:{"update:model":function($event){return _vm.$set(_vm.categoryFormObj,"categoryId",$event)},showLookupWizard:_vm.showLookupWizard}}),_vm.canShowLookupWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.selectedLookupField},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setWizardValue}}):_vm._e(),_vm.error?_c("div",{staticClass:"category-empty-msg"},[_vm._v(_vm._s(_vm.message))]):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving},on:{click:function($event){return _vm.openAssetCreation()}}},[_vm._v(_vm._s(_vm.$t("common._common.confirm")))])],1)],1)]):_vm._e()},CategoryListDialogvue_type_template_id_fda63cd6_scoped_true_staticRenderFns=[],api=__webpack_require__(32284),FLookupField=__webpack_require__(855048),FLookupFieldWizard=__webpack_require__(499751),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),selectedLookupField={isDataLoading:!1,options:[],config:{},lookupModuleName:"assetcategory",field:{lookupModule:{name:"assetcategory",displayName:"Asset Category"}},multiple:!1,selectedItems:[]},CategoryListDialogvue_type_script_lang_js={props:["canShowCategoryDialog","selectedCategory"],components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},data:function(){return{error:!1,isSaving:!1,message:this.$t("common._common.please_select_category"),canShowLookupWizard:!1,selectedLookupField:selectedLookupField,categoryFormObj:{categoryId:null}}},computed:{canShowDialog:{get:function(){return this.canShowCategoryDialog},set:function(value){this.$emit("update:canShowCategoryDialog",value)}}},watch:{selectedLookupField:{handler:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.error=!1,_this.canShowLookup=!1;case 2:case"end":return _context.stop()}}),_callee)})))()},deep:!0}},methods:{closeDialog:function(){this.$set(this,"canShowDialog",!1)},showLookupWizard:function(_,canShow){this.canShowLookupWizard=canShow},setWizardValue:function(props){var _ref=props||{},field=_ref.field,_ref2=field||{},_ref2$selectedItems=_ref2.selectedItems,selectedItems=void 0===_ref2$selectedItems?[]:_ref2$selectedItems,selectedItemIds=[];(0,validation/* isEmpty */.xb)(selectedItems)||(selectedItemIds=selectedItems.find((function(item){return item.value})).value||{}),this.$set(this.categoryFormObj,"categoryId",selectedItemIds)},openAssetCreation:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var categoryFormObj,_ref3,categoryId,param,_yield$API$get,data,error,_ref4,assetcategory,selectedCategory;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(categoryFormObj=_this2.categoryFormObj,_ref3=categoryFormObj||{},categoryId=_ref3.categoryId,_this2.isSaving=!0,(0,validation/* isEmpty */.xb)(categoryId)){_context2.next=13;break}return param={moduleName:"assetcategory",id:categoryId},_context2.next=7,api/* API */.bl.get("v3/modules/data/summary",param);case 7:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_ref4=data||{},assetcategory=_ref4.assetcategory,selectedCategory=cloneDeep_default()(assetcategory),_this2.$emit("update:selectedCategory",selectedCategory),_this2.$emit("openAssetCreation")),_context2.next=14;break;case 13:_this2.error=!0;case 14:_this2.isSaving=!1;case 15:case"end":return _context2.stop()}}),_callee2)})))()}}},components_CategoryListDialogvue_type_script_lang_js=CategoryListDialogvue_type_script_lang_js,CategoryListDialog_component=(0,componentNormalizer/* default */.Z)(components_CategoryListDialogvue_type_script_lang_js,CategoryListDialogvue_type_template_id_fda63cd6_scoped_true_render,CategoryListDialogvue_type_template_id_fda63cd6_scoped_true_staticRenderFns,!1,null,"fda63cd6",null)
/* harmony default export */,CategoryListDialog=CategoryListDialog_component.exports,router=__webpack_require__(329435),DeleteDialog=__webpack_require__(539395),OtherMixin=__webpack_require__(964967),CommonModuleList=__webpack_require__(347446),AssetListvue_type_script_lang_js={mixins:[OtherMixin/* default */.Z],extends:CommonModuleList["default"],name:"AssetList",components:{AssetDuplicationViewer:AssetDuplicationViewer/* default */.Z,BulkUpdateViewer:BulkUpdateViewer/* default */.Z,AssetMapview:AssetMapView,AssetAvatar:Asset["default"],NewAsset:NewAsset/* default */.Z,GenerateQRCode:GenerateQRCode,FDialog:FDialogNew/* default */.Z,FloorMap:FloorMap,CategoryListDialog:CategoryListDialog,DeleteDialog:DeleteDialog/* default */.Z},data:function(){return{records:[],bulkfieldlist:["type","department","manufacturer","supplier","model","unitPrice"],bulkbool:!1,loading:!0,showPrintPreview:!1,selectAll:!1,selectedListItemsIds:[],selectedListItemsObj:[],duplicateAssetObj:{},recordCount:null,assetQr:[],deleteLoading:!1,showColumnSettings:!1,perPage:50,qrParam:"current",assetsForQr:null,fetchingAllAssets:!1,showQrDialog:!1,canGenerateZip:!1,showAssetDuplicationDialog:!1,canShowAssetCreation:!1,canShowCategoryDialog:!1,assetId:null,selectedCategory:null,errorMap:null,errorType:null,showDialog:!1}},created:function(){this.$store.dispatch("loadAssetType"),this.$store.dispatch("loadTicketStatus","asset"),this.$store.dispatch("loadAssetDepartment"),this.$store.dispatch("loadAssetCategory")},mounted:function(){324===this.$account.user.orgId&&this.bulkfieldlist.push("space")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({showSearch:function(state){return state.search.active},assetCategory:function(state){return state.assetCategory}})),(0,vuex_esm/* mapGetters */.Se)({getSiteById:"getSite",getAsset_CategoryById:"getAssetCategory",getAssetTypeById:"getAssetType",getAssetDepartmentById:"getAssetDepartment",getAssetCategoryByModule:"getAssetCategoryByModule"})),{},{parentPath:function(){return"/app/at"},modulePrefix:function(){return"assets"},view:function(){if(this.$route.query.view){var data=JSON.parse(this.$route.query.view);return!!data.viewName&&data.viewName}return!1},categoryList:function(){var categories=this.assetCategory;return(0,validation/* isEmpty */.xb)(categories)?[]:categories},viewName:function(){var viewList={all:"All Assets",energy:"Energy Assets",hvac:"HVAC Assets",active:"Active Assets",retired:"Retired Assets"},title=this.viewname?this.$getProperty(viewList,this.viewname):null;return title||"Assets"},mapAssets:function(){var location=[];this.records.forEach((function(asset){asset.currentLocation&&location.indexOf(asset.currentLocation)<0&&location.push(asset.currentLocation)}));var markers=this.assets.map((function(asset){var geoLocationEnabled=asset.geoLocationEnabled,currentLocation=asset.currentLocation;if(geoLocationEnabled&&currentLocation){var _location={lat:currentLocation.split(",").length>1?Number(currentLocation.split(",")[0]):0,lng:currentLocation.split(",").length>1?Number(currentLocation.split(",")[1]):0},markerUrl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgY2xhc3M9IiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTE0LjgzNywwLDAsMTE0LjgzNywwLDI1NnMxMTQuODM3LDI1NiwyNTYsMjU2czI1Ni0xMTQuODM3LDI1Ni0yNTZTMzk3LjE2MywwLDI1NiwweiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojRjYxODQ1IiBkYXRhLW9sZF9jb2xvcj0iI0Y2MTk0NiI+PC9wYXRoPgoJPC9nPgo8L2c+PC9nPiA8L3N2Zz4=";return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},asset),{},{location:_location,markerUrl:markerUrl,marker:!1})}return asset}));return markers},slotList:function(){return[{name:"id",isHardcodedColumn:!0,columnAttrs:{"min-width":110,label:"ID",fixed:"left"}},{criteria:JSON.stringify({name:"name"})},{name:"editDelete",isActionColumn:!0,columnAttrs:{width:130,class:"visibility-visible-actions",fixed:"right"}}]},printQrSelectedUrl:function(){var url,appName=(0,router/* getApp */.wx)().linkName,encodedIds=encodeURIComponent(this.selectedListItemsIds.join(","));return url=(0,router/* isWebTabsEnabled */.tj)()?"/".concat(appName,"/pdf/asset/").concat(encodedIds):"/app/pdf/asset/".concat(encodedIds),window.location.protocol+"//"+window.location.host+url}}),methods:{bulkAction:function(actions){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var fields,_iterator,_step,action,id,cate,moduleName,selectedListItemsIds,recordMap,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:fields={},_iterator=(0,createForOfIteratorHelper/* default */.Z)(actions);try{for(_iterator.s();!(_step=_iterator.n()).done;)action=_step.value,"category"===action.field?(id=parseInt(action.valueArray),cate=_this.getAsset_CategoryById(id)||{},fields.category={id:id,name:cate.displayName}):"type"===action.fieldObj[0].name?fields.type={id:action.valueArray,name:_this.getAssetTypeById(parseInt(action.valueArray)).name}:"department"===action.fieldObj[0].name?fields.department={id:action.valueArray,name:_this.getAssetDepartmentById(parseInt(action.valueArray)).name}:"assignedTo"===action.field?(null!=action.value&&(fields.assignedTo={id:parseInt(action.value)}),null!=action.valueArray&&(fields.assignmentGroup={id:parseInt(action.valueArray)})):fields[action.field]=action.value}catch(err){_iterator.e(err)}finally{_iterator.f()}return moduleName=_this.moduleName,selectedListItemsIds=_this.selectedListItemsIds,recordMap=selectedListItemsIds.map((function(id){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fields||{}),{},{id:id})})),params={moduleName:moduleName,data:(0,defineProperty/* default */.Z)({},moduleName,recordMap)},_this.loading=!0,_context.next=9,api/* API */.bl.post("v3/modules/bulkPatch/".concat(moduleName),params);case 9:return _yield$API$post=_context.sent,error=_yield$API$post.error,error?_this.$message.error((null===error||void 0===error?void 0:error.message)||_this.$t("common._common.failed_to_update")):_this.$message.success(_this.$t("common._common.bulk_asset_updated_successfully")),_context.next=14,_this.refreshRecordDetails();case 14:_this.bulkbool=!1;case 15:case"end":return _context.stop()}}),_callee)})))()},onQrSelected:function(){this.selectedListItemsIds.length===this.perPage&&this.recordCount>this.perPage?this.showQrDialog=!0:(this.qrParam="current",this.generateQRCode())},invokeAssetduplicationDialog:function(asset){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$fetchRecor,error,record;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.fetchRecord(_this2.moduleName,{id:asset.id});case 2:_yield$API$fetchRecor=_context2.sent,error=_yield$API$fetchRecor.error,record=_yield$API$fetchRecor[_this2.moduleName],error||(_this2.duplicateAssetObj=record||{}),_this2.showAssetDuplicationDialog=!0;case 7:case"end":return _context2.stop()}}),_callee2)})))()},selectAsset:function(selectAssetcheck){this.selectedListItemsObj=selectAssetcheck,this.selectedListItemsIds=selectAssetcheck.map((function(value){return value.id}))},generateQRCode:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var canGenerateZip,generate,fetchqr,viewname,filters,url,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(canGenerateZip=_this3.canGenerateZip,generate=function(){canGenerateZip?_this3.generateQRZip():(_this3.showPrintPreview=!0,_this3.$nextTick((function(){window.print()})))},_this3.assetsForQr=[],fetchqr=function(){if(_this3.assetQr=_this3.assetsForQr.filter((function(asset){return!asset.qrVal})),_this3.assetQr.length){var param=[];for(var i in _this3.assetQr)param.push(_this3.assetQr[i].id);
// eslint-disable-next-line @facilio/no-http
_this3.$http.post("v2/assets/generateqr",{id:param}).then((function(response){var keys=Object.keys(response.data.result.mappedqr),_loop=function(_i){var assetindex=_this3.records.find((function(asset){return asset.id==keys[_i]})),assetForindex=_this3.assetsForQr.find((function(asset){return asset.id==keys[_i]})),ai=_this3.records.indexOf(assetindex),afi=_this3.assetsForQr.indexOf(assetForindex);_this3.records[ai].qrVal=response.data.result.mappedqr[keys[_i]],_this3.assetsForQr[afi].qrVal=response.data.result.mappedqr[keys[_i]]};for(var _i in keys)_loop(_i);_this3.$nextTick((function(){generate()}))})).catch((function(){_this3.fetchingAllAssets=!1}))}else _this3.$nextTick((function(){generate()}))},"current"!==_this3.qrParam){_context3.next=10;break}_this3.showQrDialog=!1,_this3.assetsForQr=_this3.records.filter((function(asset){return _this3.selectedListItemsIds.includes(asset.id)})),fetchqr(),_context3.next=20;break;case 10:return _this3.fetchingAllAssets=!0,viewname=_this3.viewname,filters=_this3.filters,url="/asset/"+viewname+"?selectFields[0]=name&selectFields[1]=qrVal",filters&&(url=url+"&filters="+encodeURIComponent(JSON.stringify(filters))),_context3.next=16,api/* API */.bl.get(url);case 16:_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this3.fetchingAllAssets=!1,_this3.showQrDialog=!1,_this3.assetsForQr=data.assets,fetchqr());case 20:case"end":return _context3.stop()}}),_callee3)})))()},generateQRZip:function(){var _this4=this,assetsForQr=this.assetsForQr;if(!(0,validation/* isEmpty */.xb)(assetsForQr)){var qrZip=new(jszip_min_default()),qrZipFolder=qrZip.folder("asset-qr");assetsForQr.forEach((function(asset){var siteName,qrVal=asset.qrVal,name=asset.name,siteId=asset.siteId;if(!(0,validation/* isEmpty */.xb)(siteId)){var site=_this4.getSiteById(siteId);siteName=site?site.name:""}if(!(0,validation/* isEmpty */.xb)(qrVal)&&!(0,validation/* isEmpty */.xb)(qrious_default())){var value=new(qrious_default())({value:qrVal,size:120}),assetImgData=value.toDataURL();
// https://github.com/Stuk/jszip/issues/404
// Have to remove data:image/png;base64
qrZipFolder.file("".concat(siteName,"/").concat(name.replace("/","-"),".png"),assetImgData.split("base64,")[1],{base64:!0,createFolder:!0})}})),qrZipFolder.generateAsync({type:"blob"}).then((function(content){(0,FileSaver_min.saveAs)(content,"asset-qr")}))}},addAsset:function(){"asset"===this.moduleName?this.canShowCategoryDialog=!0:(this.selectedCategory=this.getAssetCategoryByModule(this.moduleName),this.openAssetCreation())},openAssetCreation:function(asset){var _this5=this;if((0,validation/* isEmpty */.xb)(asset))this.$set(this,"assetId",null);else{var id=asset.id,category=asset.category,categoryId=category.id;if(!(0,validation/* isEmpty */.xb)(categoryId)){var selectedCategory=this.getAsset_CategoryById(categoryId);(0,validation/* isEmpty */.xb)(selectedCategory)||this.$set(this,"selectedCategory",selectedCategory)}this.$set(this,"assetId",id)}this.$set(this,"canShowCategoryDialog",!1),this.$nextTick((function(){_this5.$set(_this5,"canShowAssetCreation",!0)}))},deleteAsset:function(idList){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var moduleName,_yield$API$updateReco,error,map;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return moduleName=_this6.moduleName,_context5.next=3,api/* API */.bl.updateRecord(moduleName,{id:idList[0],data:{},params:{fetchChildCount:!0,recordIds:idList}});case 3:_yield$API$updateReco=_context5.sent,error=_yield$API$updateReco.error,!error||error&&3!=error.code?_this6.$dialog.confirm({title:_this6.$t("asset.assets.delete_asset"),message:_this6.$t("asset.assets.delete_asset_msg"),rbDanger:!0,rbLabel:_this6.$t("common._common.delete")}).then(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(value){var _yield$API$deleteReco,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!value){_context4.next=14;break}return _this6.deleteLoading=!0,_context4.next=4,api/* API */.bl.deleteRecord(moduleName,idList);case 4:if(_yield$API$deleteReco=_context4.sent,_error=_yield$API$deleteReco.error,!_error){_context4.next=10;break}_this6.$message.error(_this6.$t("asset.assets.asset_delete_failed")),_context4.next=13;break;case 10:return _this6.$message.success(_this6.$t("asset.assets.asset_delete_success")),_context4.next=13,_this6.refreshRecordDetails();case 13:_this6.deleteLoading=!1;case 14:case"end":return _context4.stop()}}),_callee4)})));return function(_x){return _ref.apply(this,arguments)}}()):(map=JSON.parse(error.message),_this6.errorMap=map,_this6.errorType=error.code,_this6.showDialog=!0);case 6:case"end":return _context5.stop()}}),_callee5)})))()},openAssetOverview:function(id){var viewname=this.viewname,parentPath=this.parentPath,$route=this.$route;if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)("asset",router/* pageTypes */.As.OVERVIEW)||{},name=_ref2.name,route={name:name,params:{viewname:viewname,id:id},query:$route.query};return name&&route}return{path:"".concat(parentPath,"/assets/").concat(viewname,"/").concat(id,"/overview"),query:$route.query}},switchView:function(command){if(this.$route.query){var query=this.$helpers.cloneObject(this.$route.query)||{};query.view="floormap"===command?JSON.stringify({viewName:command,hidePagination:!0}):JSON.stringify({viewName:command}),this.$router.push({query:query})}},unSelectRecords:function(){this.selectedListItemsIds=[],this.selectedListItemsObj=[]},redirectToQrPage:function(){window.open(this.printQrSelectedUrl)}}},v1_AssetListvue_type_script_lang_js=AssetListvue_type_script_lang_js,AssetList_component=(0,componentNormalizer/* default */.Z)(v1_AssetListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AssetList=AssetList_component.exports},
/***/686092:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewAsset}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/asset/v1/NewAsset.vue?vue&type=template&id=3df9bd96
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showCreateNewDialog?_c("el-dialog",{attrs:{visible:_vm.showCreateNewDialog,fullscreen:!0,"custom-class":"fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog f-webform-right-dialog new-asset-container","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.showCreateNewDialog=$event}}},[_c("div",{staticClass:"header pT10 pB10 pL40 pR40 d-flex"},[_c("div",{staticClass:"title mT10"},[_vm._v(_vm._s(_vm.title))]),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},on:{change:function($event){return _vm.handleSelectChange.apply(void 0,arguments)}},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return"default_asset_mobile"!==form.name?_c("el-option",{key:index,attrs:{value:form,label:form.displayName}}):_vm._e()})),1):_vm._e()],1),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,fieldTransitionFn:_vm.setSelectedCategory,formLabelPosition:"top",isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isEdit:!_vm.$validation.isEmpty(_vm.dataId)},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.saveRecord,cancel:_vm.closeDialog}})],1):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(434284),__webpack_require__(32284)),FormCreation=__webpack_require__(373729),validation=__webpack_require__(990260),NewAssetvue_type_script_lang_js={extends:FormCreation/* default */.Z,props:["canShowAssetCreation","moduleName","moduleDisplayName","dataId","selectedCategory"],computed:{showCreateNewDialog:{get:function(){return this.canShowAssetCreation},set:function(value){this.$emit("update:canShowAssetCreation",value)}},currentSelectedCategory:{get:function(){return this.selectedCategory},set:function(value){this.$emit("update:selectedCategory",value)}},isV3Api:function(){return!0}},methods:{
/* getter setter methods*/setSelectedCategory:function(field){var selectedCategory=this.selectedCategory;if("category"===field.name){var categoryId=(selectedCategory||{}).id;this.$set(field,"value",categoryId),this.$set(field,"disabled",!0)}return field},
/* event related methods */closeDialog:function(){this.$set(this,"currentSelectedCategory",null),this.$set(this,"showCreateNewDialog",!1)},handleSelectChange:function(formObj){var module=formObj.module,_ref=module||{},name=_ref.name;(0,validation/* isEmpty */.xb)(name)||this.$emit("update:moduleName",name),this.$emit("update:moduleName","asset")},saveRecord:function(data){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var formObj,moduleDataId,moduleDisplayName,moduleName,formId,successMsg,assetToSave,response,_ref2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(formObj=_this.formObj,moduleDataId=_this.moduleDataId,moduleDisplayName=_this.moduleDisplayName,moduleName=_this.moduleName,formId=null===formObj||void 0===formObj?void 0:formObj.id,successMsg="",assetToSave=_this.serializedData(formObj,data),!(assetToSave.rotatingItem&&assetToSave.rotatingItem.id&&assetToSave.rotatingItem.id>0&&assetToSave.rotatingTool&&assetToSave.rotatingTool.id&&assetToSave.rotatingTool.id>0)){_context.next=7;break}return _this.$message.error("Asset can only be either a Rotating Item or a Rotating Tool"),_context.abrupt("return");case 7:if((0,validation/* isEmpty */.xb)(moduleDataId)?successMsg="".concat(moduleDisplayName," created successfully!"):(successMsg="".concat(moduleDisplayName," updated successfully!"),assetToSave.id=moduleDataId),_this.isSaving=!0,(0,validation/* isEmpty */.xb)(formId)||(assetToSave.formId=formId),response={},!(0,validation/* isEmpty */.xb)(moduleDataId)){_context.next=17;break}return _context.next=14,api/* API */.bl.createRecord(moduleName,{data:assetToSave});case 14:response=_context.sent,_context.next=20;break;case 17:return _context.next=19,api/* API */.bl.updateRecord(moduleName,{id:moduleDataId,data:assetToSave});case 19:response=_context.sent;case 20:_ref2=response||{},error=_ref2.error,_this.isSaving=!1,error?_this.$message.error((null===error||void 0===error?void 0:error.message)||"Error occured while saving asset"):(_this.$message.success(successMsg),_this.closeDialog(),_this.$emit("refreshlist"));case 23:case"end":return _context.stop()}}),_callee)})))()},
/* Overrided hooks */loadFormsList:function(moduleName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var categoryModuleName,url,_yield$API$get,data,error,message,_ref3,_ref3$forms,forms;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return categoryModuleName=_this2.selectedCategory.moduleName,url="/v2/forms?moduleName=".concat(categoryModuleName,"&fetchExtendedModuleForms=",!0),_this2.isLoading=!0,_context2.next=5,api/* API */.bl.get(url);case 5:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(message=error.message,_this2.$message.error(message)):(_ref3=data||{},_ref3$forms=_ref3.forms,forms=void 0===_ref3$forms?[]:_ref3$forms,_this2.$set(_this2,"forms",forms));case 9:case"end":return _context2.stop()}}),_callee2)})))()}}},v1_NewAssetvue_type_script_lang_js=NewAssetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_NewAssetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewAsset=component.exports},
/***/539395:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DeleteDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/spacemanagement/overview/components/DeleteDialog.vue?vue&type=template&id=3f6a354a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"delete-dialog",staticStyle:{padding:"0px",margin:"0px"},attrs:{visible:!0,"show-close":!1,title:_vm.title,width:"40%","append-to-body":!0,"before-close":_vm.closeDeleteDialog}},[_c("div",[[3==_vm.type?_c("span",[_vm._v(_vm._s(_vm.$t("common._common.space_delete_error",{moduleName:_vm.moduleName})))]):_c("span",[_vm._v(_vm._s(_vm.$t("common._common.space_delete_warning",{moduleName:_vm.moduleName})))]),_c("table",{staticClass:"fc-border4 width100 mT20"},[_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$t("common._common.dependency")))]),_c("th",[_vm._v(_vm._s(_vm.$t("common._common.count")))])]),_vm.errorMap?_vm._l(_vm.errorMap,(function(value,key){return _c("tr",{key:key},[_c("td",[_vm._v(_vm._s(key))]),_c("td",[_vm._v(_vm._s(value))])])})):_vm._e()],2),3==_vm.type?_c("div",{staticClass:"f-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"form-btn f13 bold secondary text-center text-uppercase cancel-btn-focus",attrs:{type:"primary"},on:{click:function($event){return _vm.closeDeleteDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.close"))+" ")])],1):_c("div",{staticClass:"f-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel mR0",attrs:{type:"primary"},on:{click:function($event){return _vm.closeDeleteDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"mL0 btn--danger",attrs:{type:"primary"},on:{click:function($event){return _vm.deleteRecord()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])],1)]],2)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=__webpack_require__(32284),DeleteDialogvue_type_script_lang_js={props:["moduleName","errorMap","type","id"],computed:{title:function(){return 3===this.type?this.$t("common._common.error"):this.$t("common.header.warning")}},methods:{closeDeleteDialog:function(){this.$emit("onClose")},deleteRecord:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var id,_yield$API$deleteReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return id=_this.id,_context.next=3,api/* API */.bl.deleteRecord(_this.moduleName,[id]);case 3:_yield$API$deleteReco=_context.sent,error=_yield$API$deleteReco.error,error?_this.$message.error(error):(_this.$message.success(_this.$t("space.sites.delete_success")),_this.$emit("onDelete"),_this.$emit("refresh"),_this.closeDeleteDialog());case 6:case"end":return _context.stop()}}),_callee)})))()}}},components_DeleteDialogvue_type_script_lang_js=DeleteDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_DeleteDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,"3f6a354a",null)
/* harmony default export */,DeleteDialog=component.exports},
/***/212708:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4d728995d5ae19e60924366d0315b8b0.svg";
/***/},
/***/164065:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ee31f43b8151f3590eba8e0562377413.svg";
/***/},
/***/703659:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"782922838e1b33e6568fd666d379c2b8.svg";
/***/},
/***/916803:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"45e80daecf3b2313cd875b1056bb278b.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/2088.js.map