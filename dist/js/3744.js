"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[3744],{
/***/646716:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FetchViewsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),FetchViewsMixinvue_type_script_lang_js={methods:{fetchView:function(moduleName){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,data,error,_ref,groupViews;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,params={moduleName:moduleName,groupType:1,viewType:1},_context.next=4,api/* API */.bl.get("/v2/views/viewList",params);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error){_context.next=10;break}return _ref=data||{},groupViews=_ref.groupViews,_context.abrupt("return",_this.getFirstView(groupViews));case 10:_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context["catch"](0),_context.abrupt("return","all");case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])})))()},getFirstView:function(groupViews){var _ref2=(groupViews||[]).find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref2.views,_this$$getProperty=this.$getProperty(views,"0",{}),name=_this$$getProperty.name;return name||"all"}}},base_FetchViewsMixinvue_type_script_lang_js=FetchViewsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_FetchViewsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FetchViewsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/303744:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AudiencePublished}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/community/components/AudiencePublished.vue?vue&type=template&id=64dfcf16&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pL30 pR30 d-flex flex-direction-column"},[_c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title mL0 flex-middle justify-between"},[_vm._v(" "+_vm._s(_vm.$t("common.products.audience"))+" ")])]),_c("div",{ref:"publishTo-container",staticClass:"d-flex mT10 mB30 flex-direction-row flex-wrap"},_vm._l(_vm.getAudienceList,(function(audience,index){return _c("el-tooltip",{key:"tooltip-"+audience.id+"-"+index,attrs:{placement:"top",effect:"dark"}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("div",{staticClass:"height-auto width150px align-center p8"},[_c("div",{staticStyle:{"font-size":"10px"}},[_vm._v("Audience")]),_c("div",{staticStyle:{"font-size":"14px","font-weight":"500"}},[_vm._v(" "+_vm._s(_vm.getSharingTypeDisplayString(_vm.$getProperty(_vm.getGroupedSharing[audience.id],"sharingType"),_vm.$getProperty(_vm.getGroupedSharing[audience.id],"sharingTypeMeta")))+" ")]),_vm.$getProperty(_vm.getGroupedSharing[audience.id],"hasRoleFilter")?_c("div",[_c("div",{staticStyle:{"font-size":"10px","margin-top":"15px"}},[_vm._v("Filtered By")]),_c("div",{staticStyle:{"font-size":"14px","font-weight":"500"}},[_vm._v("Selected Roles")])]):_vm._e()])]),_c("div",{key:"audience-"+audience.name+"-"+index,staticClass:"tag pointer",on:{click:function($event){return _vm.redirectToAudience(audience.id)}}},[_vm._v(" "+_vm._s(audience.name)+" ")])])})),1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),FetchViewsMixin=(__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(646716)),router=__webpack_require__(329435),validation=__webpack_require__(990260),sharingTypes={TENANT_UNIT:1,ROLE:2,PEOPLE:3,BUILDING:4},sharingTypesMeta={ALL:1,SELECTED:2},AudiencePublishedvue_type_script_lang_js={props:["details","widget"],mixins:[FetchViewsMixin/* default */.Z],computed:{getAudienceList:function(){var details=this.details,_ref=details||{},audience=_ref.audience;return audience||[]},sharingModuleName:function(){return this.$getProperty(this.widget,"widgetParams.sharingInfoModuleName")},getGroupedSharing:function(){var details=this.details,$getProperty=this.$getProperty,sharingModuleName=this.sharingModuleName,publishedTo=$getProperty(details,"".concat(sharingModuleName))||[];return publishedTo.reduce((function(publishedObj,currentObj){var _audienceId,_ref2=currentObj||{},sharedToSpace=_ref2.sharedToSpace,sharedToRole=_ref2.sharedToRole,sharedToPeople=_ref2.sharedToPeople,sharingType=_ref2.sharingType,audienceId=_ref2.audienceId,ALL=sharingTypesMeta.ALL,SELECTED=sharingTypesMeta.SELECTED,sharingTypeMeta=ALL,isSharingTypeSelected=!(0,validation/* isEmpty */.xb)(sharedToSpace)||!(0,validation/* isEmpty */.xb)(sharedToRole)||!(0,validation/* isEmpty */.xb)(sharedToPeople),additionObj={};if(isSharingTypeSelected&&(sharingTypeMeta=SELECTED),audienceId=null===(_audienceId=audienceId)||void 0===_audienceId?void 0:_audienceId.id,audienceId in publishedObj){var ROLE=sharingTypes.ROLE,_ref3=publishedObj[audienceId]||{},prevSharingType=_ref3.sharingType;sharingType===ROLE&&prevSharingType!==ROLE?additionObj={hasRoleFilter:!0,sharingType:prevSharingType}:sharingType!==ROLE&&prevSharingType===ROLE&&(additionObj={hasRoleFilter:!0,sharingType:sharingType})}return publishedObj[audienceId]=(0,objectSpread2/* default */.Z)({sharingType:sharingType,hasRoleFilter:!1,sharingTypeMeta:sharingTypeMeta},additionObj),publishedObj}),{})}},methods:{redirectToAudience:function(id){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var view,_ref4,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.fetchView("audience");case 2:view=_context.sent,(0,router/* isWebTabsEnabled */.tj)()?(_ref4=(0,router/* findRouteForModule */.Jp)(_this.moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref4.name,name&&_this.$router.push({name:name,params:{viewname:view,id:id}})):_this.$router.push({name:"audienceSummary",params:{viewname:view,id:id}});case 4:case"end":return _context.stop()}}),_callee)})))()},getSharingTypeDisplayString:function(sharingType,sharingTypeMeta){var prefix="";switch(sharingTypeMeta===sharingTypesMeta.ALL?prefix+="All":sharingTypeMeta===sharingTypesMeta.SELECTED&&(prefix+="Selected"),sharingType){case sharingTypes.TENANT_UNIT:return prefix+" Tenant Units";case sharingTypes.ROLE:return prefix+" Roles";case sharingTypes.PEOPLE:return prefix+" Peoples";case sharingTypes.BUILDING:return prefix+" Buildings";default:return"---"}}}},components_AudiencePublishedvue_type_script_lang_js=AudiencePublishedvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AudiencePublishedvue_type_script_lang_js,render,staticRenderFns,!1,null,"64dfcf16",null)
/* harmony default export */,AudiencePublished=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/3744.js.map