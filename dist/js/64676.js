"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[64676],{
/***/964676:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CumulativeSavings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/static/CumulativeSavings.vue?vue&type=template&id=40ab6487
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 energy-saving-card"},[_c("shimmer-loading",{directives:[{name:"show",rawName:"v-show",value:_vm.loading,expression:"loading"}],attrs:{config:{type:"form"}}}),_c("div",{staticClass:"dragabale-card  saving-card"},[_c("div",{staticClass:"f14 fw6 uppercase f16 energy-savings-txt",staticStyle:{padding:"8% 20% 6%"}},[_vm._v(" "+_vm._s(_vm.$t("panel.card.savings"))+" ")]),_vm._m(0),_c("div",{staticClass:"sv-month"},[_vm._v(_vm._s(_vm.$t("panel.tyre.month")))]),_c("div",{staticClass:"sv-date"},[_vm._v(" "+_vm._s(_vm.$t("panel.card.as_on"))+" "+_vm._s(_vm.day)+" "+_vm._s(_vm.month)+" ")])])],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"progressParent energy-saving"},[_c("div",{attrs:{id:"donutProgress"}})])}],d3=(__webpack_require__(897389),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(879288),__webpack_require__(348727)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),ShimmerLoading=__webpack_require__(516400),CumulativeSavingsvue_type_script_lang_js={props:["widget","currentDashboard"],data:function(){return{loading:!0,percentage:0,data:null,day:moment_timezone_default()().format("Do"),month:moment_timezone_default()().format("MMM")}},components:{shimmerLoading:ShimmerLoading/* default */.Z},computed:{buildingId:function(){return this.currentDashboard?this.currentDashboard.buildingId:this.$route.params.buildingid?parseInt(this.$route.params.buildingid):void 0}},mounted:function(){this.loadcardData()},methods:{loadcardData:function(){var self=this;self.loading=!0;var params={widgetId:self.widget.id,reportSpaceFilterContext:{buildingId:self.buildingId}};self.$http.post("dashboard/getCardData",params).then((function(response){self.data=self.prepareData(response.data.cardResult),self.loading=!1,self.drawChrat()})).catch((function(){}))},prepareData:function(data){var d={};return this.percentage=data.savedPercentage||0,d.percentage=data.savedPercentage||0,d.savedConsumption=this.formater1(data.savedConsumption),d.baselineConsumption=this.formater1(data.baselineConsumption),d.baselineCost=this.formater(data.baselineCost),d.savedCost=this.formater(data.savedCost),d},formater:function(value){if(value>-1){value=value.toFixed(0),value=value.toString();var unit="";return value.length>6?(value=(value/1e6).toFixed(2),unit="M"):value.length>3&&(value=(value/1e3).toFixed(2),unit="k"),Number(value)+unit}},formater1:function(value){if(value>-1){value=value.toFixed(0),value=value.toString();var unit="kWh";return value.length>6?(value=(value/1e6).toFixed(2),unit="GWh"):value.length>3&&(value=(value/1e3).toFixed(2),unit="MWh"),Number(value)+unit}},drawChrat:function(){this.percentage=this.percentage.toFixed(2);var percentage=(this.percentage?this.percentage:0)/100,tau=(1+4/9)*Math.PI,width=120,height=120,outerRadius=Math.min(width,height)/2,innerRadius=outerRadius/5*4.5,fontSize=Math.min(width,height)/4,arc=d3.arc().innerRadius(innerRadius).outerRadius(outerRadius).cornerRadius(outerRadius-innerRadius).startAngle(0),svg=d3.select("#donutProgress").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(width,height)+" "+Math.min(width,height)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+Math.min(width,height)/2+","+Math.min(width,height)/2+")"),text=svg.append("text").text(this.data.savedCost).attr("text-anchor","middle").style("font-size",fontSize/2+"px").style("fill","#333").attr("dy",-fontSize).attr("dx",-1-this.data.savedCost).style("fill","#fff"),textUnit=svg.append("text").text("AED").style("font-size",fontSize/4+"px").style("fill","#333").style("font-weight","bold").attr("dy",-fontSize).attr("dx",3*this.data.savedCost.length+1).style("fill","#fff");svg.append("text").text(this.data.savedConsumption).attr("text-anchor","middle").style("font-size",fontSize/3+"px").style("fill","#333").attr("class","op6").attr("dy",-14).attr("dx",2).style("fill","#fff"),svg.append("text").text(this.percentage+"% SAVINGS").attr("text-anchor","middle").style("font-size",fontSize/4+"px").style("fill","#333").attr("class","savings-txt").attr("dy",-3).attr("dx",2).style("fill","#53c6e3"),svg.append("line").style("stroke","#ffffff").style("stroke-width","1").style("opacity","0.1").attr("dy",fontSize).attr("dx",2).attr("x1",30).attr("x2",-25).attr("y1",5).attr("y2",5);var fontSizeChange=this.data.baselineCost+" AED for "+this.data.baselineConsumption;
// fontSize.length = fontSizeChange
svg.append("text").text(fontSizeChange).attr("text-anchor","middle").style("font-size",fontSize/(fontSizeChange.length/5)+"px").style("fill","#333").attr("dy",.25*fontSize*3).attr("dx",2).attr("class","baseline-aed-kwh").style("fill","#fff"),svg.append("text").text("BASELINE MODEL").attr("text-anchor","middle").style("font-size",fontSize/5+"px").style("fill","#333").attr("dy",.35*fontSize*3).attr("dx",2).attr("class","baseline-model-txt").style("fill","#fff");var defs=svg.append("defs"),gradient=defs.append("linearGradient").attr("id","svgGradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","100%");gradient.append("stop").attr("class","start").attr("offset","0%").attr("stop-color","#96d6b7").attr("stop-opacity",1),gradient.append("stop").attr("class","end").attr("offset",100*percentage+"%").attr("stop-color","#39b2c2").attr("stop-opacity",1),svg.append("path").datum({endAngle:tau}).style("fill","#ffffff").style("opacity","0.1").attr("d",arc).style("transform","rotate(-130deg)");var midground=svg.append("path").datum({endAngle:0*tau}).style("fill","url(#svgGradient)").attr("d",arc).style("transform","rotate(-130deg)");function arcTween(transition,newAngle,data){transition.attrTween("d",(function(d){var interpolate=d3.interpolate(d.endAngle,newAngle);return function(t){return d.endAngle=interpolate(t),text.text(data.savedCost),text.attr("dx",-1-data.savedCost.length),textUnit.attr("dx",3*data.savedCost.length),arc(d)}}))}midground.transition().duration(750).call(arcTween,percentage*tau,this.data)}}},static_CumulativeSavingsvue_type_script_lang_js=CumulativeSavingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(static_CumulativeSavingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CumulativeSavings=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/64676.js.map