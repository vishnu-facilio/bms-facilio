(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[56357],{
/***/588:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return chartIcon}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/charts/components/chartIcon.vue?vue&type=template&id=23f433a8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["pie"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(928824)}}):"doughnut"===_vm.icon||"donut"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(629443)}}):"bar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(341029)}}):"stackedbar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(709333)}}):"histogram"===_vm.icon?_c("fc-icon",{staticClass:"chart-icon-new filter-theme-color",staticStyle:{border:"1.5px solid #ef508f","border-radius":"2px",display:"flex","justify-content":"center","align-items":"center"},attrs:{group:"chart-data",name:"histogram",color:"#ef508f",size:"17"}}):"groupedbar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(717328)}}):"line"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(570678)}}):"area"===_vm.icon||"area-spline"===_vm.icon||"area-step"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(887025)}}):"progress"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(71761)}}):"heatMap"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(413273)}}):"cubsim"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(129816)}}):"tabular"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(407826)}}):"gauge"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(91677)}}):_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(570678)}})],1)},staticRenderFns=[],chartIconvue_type_script_lang_js={props:["icon"]},components_chartIconvue_type_script_lang_js=chartIconvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_chartIconvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,chartIcon=component.exports},
/***/613071:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSchedule2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSchedule2.vue?vue&type=template&id=a6cf229e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",{attrs:{gutter:80,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.simple?"Frequency":"Repetition")+" ")]),_c("el-select",{staticStyle:{width:"100%"},model:{value:_vm.schedule.frequencyType,callback:function($$v){_vm.$set(_vm.schedule,"frequencyType",$$v)},expression:"schedule.frequencyType"}},_vm._l(_vm.frequencyTypes,(function(ftype,index){return _c("el-option",{key:index,attrs:{label:ftype.label,value:ftype.value}})})),1)],1),-1===_vm.schedule.frequencyType?_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt mT8"},[_vm._v("Frequency")]),_c("el-cascader",{staticClass:"fcascader mT10",staticStyle:{width:"100%"},attrs:{options:_vm.generateFrequencyList()},model:{value:_vm.schedule.frequency,callback:function($$v){_vm.$set(_vm.schedule,"frequency",$$v)},expression:"schedule.frequency"}}),"day"!==_vm.schedule.frequency[0]?_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Choose reminder time ")]):_vm._e(),"week"===_vm.schedule.frequency[0]?_c("div",[_c("el-select",{attrs:{multiple:""},model:{value:_vm.schedule.executeOnDays,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDays",$$v)},expression:"schedule.executeOnDays"}},_vm._l(_vm.days,(function(day){return _c("el-option",{key:day,attrs:{label:day,value:day}})})),1)],1):_vm._e(),"month"===_vm.schedule.frequency[0]?_c("div",[_c("el-select",{model:{value:_vm.schedule.executeOnType,callback:function($$v){_vm.$set(_vm.schedule,"executeOnType",$$v)},expression:"schedule.executeOnType"}},[_c("el-option",{attrs:{label:"Day",value:"day"}}),_c("el-option",{attrs:{label:"Week",value:"week"}})],1),"day"===_vm.schedule.executeOnType?_c("el-select",{attrs:{multiple:""},model:{value:_vm.schedule.executeOnDates,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDates",$$v)},expression:"schedule.executeOnDates"}},_vm._l(_vm.getNumberRange(31),(function(date){return _c("el-option",{key:date.value,attrs:{label:date.label,value:date.value}})})),1):_vm._e(),"week"===_vm.schedule.executeOnType?_c("el-cascader",{attrs:{options:_vm.getWeekList()},model:{value:_vm.schedule.executeOnWeek,callback:function($$v){_vm.$set(_vm.schedule,"executeOnWeek",$$v)},expression:"schedule.executeOnWeek"}},[_vm._v(" > ")]):_vm._e()],1):"year"===_vm.schedule.frequency[0]?_c("div",[_c("el-select",{attrs:{multiple:""},model:{value:_vm.schedule.executeOnMonth,callback:function($$v){_vm.$set(_vm.schedule,"executeOnMonth",$$v)},expression:"schedule.executeOnMonth"}},_vm._l(_vm.months,(function(month){return _c("el-option",{key:month,attrs:{label:month,value:month}})})),1)],1):_vm._e()],1):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),moment=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(76265),__webpack_require__(730381)),moment_default=__webpack_require__.n(moment),FSchedule2vue_type_script_lang_js={props:["from","value","initialSchedule","simple"],data:function(){return{frequencyTypes:[],scheduleInfo:{times:["23:59"],frequencyType:3,values:[13]},schedule:{frequencyType:0,frequency:["day",1],executeOnDays:[],executeOnType:"day",executeOnDates:[],executeOnWeek:[],executeOnMonth:[]},days:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weeks:["First","Second","Third","Fourth","Last"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{startTime:function(){return this.from?this.from:new Date}},mounted:function(){var self=this;this.loadScheduleInfo(),this.setInitialValue(),this.$watch("schedule",(function(newVal){var _this=this;self.$emit("input",this.constructScheduleObj(this.schedule)),self.$emit("input2",this.frequencyTypes.find((function(rt){return rt.value===_this.schedule.frequencyType})))}),{deep:!0})},methods:{getDayIndex:function(dayName){if(!dayName){var date=moment_default()(this.startTime);dayName=date.format("ddd")}var dayIndex=this.days.indexOf(dayName);return dayIndex+1},getMonthIndex:function(monthName){if(!monthName){var date=moment_default()(this.startTime);monthName=date.format("MMM")}var monthIndex=this.months.indexOf(monthName);return monthIndex+1},getWeekName:function(weekIndex){if(!weekIndex){var date=moment_default()(this.startTime);weekIndex=Math.ceil(date.date()/7)}var weekName=this.weeks[weekIndex-1];return weekName||(weekName=this.weeks[this.weeks.length-1]),weekName},getWeekIndex:function(weekName){if(!weekName){var date=moment_default()(this.startTime);return Math.ceil(date.date()/7)}var weekIndex=this.weeks.indexOf(weekName);return weekIndex+1},loadScheduleInfo:function(){var date=moment_default()(this.startTime);this.frequencyTypes=[],this.simple?this.schedule.frequencyType=1:this.frequencyTypes.push({label:"Do not repeat",value:0}),this.frequencyTypes.push({label:"Daily",value:1});var dayName=date.format("dddd");this.frequencyTypes.push({label:"Weekly (every "+dayName+")",value:2}),this.frequencyTypes.push({label:"Monthly (on day "+date.format("DD")+")",value:3});var dayShortName=date.format("ddd"),weekOfMonthStr=this.getWeekName();this.simple||this.frequencyTypes.push({label:"Monthly (every "+weekOfMonthStr+" "+dayShortName+")",value:4}),this.frequencyTypes.push({label:"Yearly (on "+date.format("DD MMMM")+")",value:5}),this.simple||this.frequencyTypes.push({label:"Custom",value:-1}),this.schedule.executeOnDays.length||this.schedule.executeOnDays.push(dayShortName),this.schedule.executeOnDates.length||this.schedule.executeOnDates.push(parseInt(date.format("DD"))),this.schedule.executeOnWeek.length||(this.schedule.executeOnWeek.push(weekOfMonthStr),this.schedule.executeOnWeek.push("Whole_Week")),this.schedule.executeOnMonth.length||this.schedule.executeOnMonth.push(date.format("MMM"))},constructScheduleObj:function(scheduleObj){var date=moment_default()(this.startTime),newSchedule={frequencyType:0,frequency:1,values:[],times:[]};if(newSchedule.times.push(date.format("HH:mm")),scheduleObj.frequencyType>=0){if(newSchedule.frequencyType=scheduleObj.frequencyType,2===newSchedule.frequencyType){var dayIndex=this.getDayIndex();newSchedule.values.push(dayIndex)}else if(3===newSchedule.frequencyType){var dateNo=date.format("DD");newSchedule.values.push(parseInt(dateNo))}else if(4===newSchedule.frequencyType){var weekOfMonth=Math.ceil(date.date()/7);newSchedule.weekFrequency=weekOfMonth;var _dayIndex=this.getDayIndex();newSchedule.values.push(_dayIndex)}else if(5===newSchedule.frequencyType){var monthIndex=this.getMonthIndex();newSchedule.values.push(monthIndex)}}else{
// custom scheduling
if("day"===scheduleObj.frequency[0])newSchedule.frequencyType=1;else if("week"===scheduleObj.frequency[0]){newSchedule.frequencyType=2,newSchedule.values=[];var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(scheduleObj.executeOnDays);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dayName=_step.value;newSchedule.values.push(this.getDayIndex(dayName))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else if("month"===scheduleObj.frequency[0])if("day"===scheduleObj.executeOnType)newSchedule.frequencyType=3,newSchedule.values=scheduleObj.executeOnDates;else{newSchedule.frequencyType=4,newSchedule.weekFrequency=this.getWeekIndex(scheduleObj.executeOnWeek[0]),newSchedule.values=[];var weekValue=scheduleObj.executeOnWeek[1];if("Whole_Week"===weekValue)newSchedule.values=[1,2,3,4,5,6,7];else if("Mon_Fri"===weekValue)newSchedule.values=[1,2,3,4,5];else if("Weekend"===weekValue)newSchedule.values=[6,7];else{var _dayIndex2=this.getDayIndex(weekValue);_dayIndex2>0&&(newSchedule.values=[_dayIndex2])}}else if("year"===scheduleObj.frequency[0]){newSchedule.frequencyType=5,newSchedule.values=[];var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(scheduleObj.executeOnMonth);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var monthName=_step2.value;newSchedule.values.push(this.getMonthIndex(monthName))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}newSchedule.frequency=scheduleObj.frequency[1]}return newSchedule},generateFrequencyList:function(){var newObj=[{value:"day",label:"Day",children:this.generateFrequencyTimes("day",50)},{value:"week",label:"Week",children:this.generateFrequencyTimes("week",50)},{value:"month",label:"Month",children:this.generateFrequencyTimes("month",50)},{value:"year",label:"Year",children:this.generateFrequencyTimes("year",50)}];return newObj},generateFrequencyTimes:function(type,no){for(var list=[],i=0;i<no;i++)0===i?list.push({label:"Every "+type,value:1}):list.push({label:"Every "+(i+1)+" "+type+"s",value:i+1});return list},getWeekList:function(){var options=[{label:"First",value:"First",children:this.getWeekDays()},{label:"Second",value:"Second",children:this.getWeekDays()},{label:"Third",value:"Third",children:this.getWeekDays()},{label:"Fourth",value:"Fourth",children:this.getWeekDays()},{label:"Last",value:"Last",children:this.getWeekDays()}];return options},getNumberRange:function(no){for(var list=[],i=1;i<=no;i++)list.push({label:i+"",value:i});return list},getWeekDays:function(){var list=[{label:"Whole week",value:"Whole_Week"},{label:"Mon",value:"Mon"},{label:"Tue",value:"Tue"},{label:"Wed",value:"Wed"},{label:"Thu",value:"Thu"},{label:"Fri",value:"Fri"},{label:"Sat",value:"Sat"},{label:"Sun",value:"Sun"},{label:"Mon - Fri",value:"Mon_Fri"},{label:"Weekend",value:"Weekend"}];return list},setInitialValue:function(){var _this2=this;if(this.initialSchedule)if(this.initialSchedule.frequency>1){var val="day";if(2===this.initialSchedule.frequencyType)val="week",this.schedule.executeOnDays=this.initialSchedule.values.map((function(day){return _this2.days[day-1]}));else if(3===this.initialSchedule.frequencyType)this.schedule.executeOnType="day",this.schedule.executeOnDates=this.initialSchedule.values,val="month";else if(4===this.initialSchedule.frequencyType){var value;this.schedule.executeOnType="week",this.schedule.executeOnWeek[0]=this.getWeekName(this.initialSchedule.weekFrequency);var length=this.initialSchedule.values.length;value=7===length?"Whole_Week":5===length?"Mon_Fri":2===length?"Weekend":this.days[this.initialSchedule.values[0]-1],this.schedule.executeOnWeek[1]=value,val="month"}else 5===this.initialSchedule.frequencyType&&(this.schedule.executeOnMonth=this.initialSchedule.values.map((function(month){return _this2.months[month-1]})),val="year");this.schedule.frequency=[val,this.initialSchedule.frequency],this.schedule.frequencyType=-1}else this.schedule.frequencyType=this.initialSchedule.frequencyType;else this.$emit("input",this.constructScheduleObj(this.schedule)),this.$emit("input2",this.frequencyTypes.find((function(rt){return rt.value===_this2.schedule.frequencyType})))}},watch:{startTime:function(){var _this3=this;this.loadScheduleInfo(),this.$emit("input",this.constructScheduleObj(this.schedule)),this.$emit("input2",this.frequencyTypes.find((function(rt){return rt.value===_this3.schedule.frequencyType})))},initialSchedule:function(){this.setInitialValue()}}},components_FSchedule2vue_type_script_lang_js=FSchedule2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSchedule2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSchedule2=component.exports},
/***/470168:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ReportSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/ReportSummary.vue?vue&type=template&id=3e550030
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"reports-summary"},[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.report?_c("div",{staticClass:"reports-header"},[_c("div",{staticClass:"report-title pull-left",staticStyle:{width:"50%"}},[_c("div",{staticClass:"title row"},[_c("div",{staticStyle:{overflow:"hidden"}},[_vm.titleEdit?_c("el-input",{staticClass:"create-dashboard-input-title f18 fc-widget-label ellipsis",attrs:{autofocus:!0,placeholder:""},on:{blur:function($event){return _vm.blurevent()}},model:{value:_vm.title,callback:function($$v){_vm.title=$$v},expression:"title"}}):_c("div",{staticClass:"f18 fc-widget-label ellipsis",on:{dblclick:function($event){return _vm.editheader("edit")}}},[_vm._v(" "+_vm._s(_vm.report.options.name)+" ")])],1),_vm.$hasPermission(this.getCurrentModule().module+":CREATE_EDIT_REPORTS")?_c("div",{staticClass:"title-actions"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit default",attrs:{"data-position":"bottom","data-arrow":"true",title:"Edit name"},on:{click:function($event){return _vm.editheader()}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit default hide",attrs:{"data-position":"bottom","data-arrow":"true",title:"Edit"},on:{click:function($event){return _vm.editReport()}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete default",attrs:{"data-position":"bottom","data-arrow":"true",title:"Delete"},on:{click:function($event){return _vm.deleteReport()}}})]):_vm._e()]),_c("div",{staticClass:"description"},[_vm._v(" "+_vm._s(_vm.report.options.description?_vm.report.options.description:"---")+" ")])]),_vm.$hasPermission(this.getCurrentModule().module+":EXPORT_REPORTS")?_c("div",{staticClass:"pull-right",staticStyle:{"padding-right":"5px",display:"inline-flex","padding-top":"10px"}},[_c("div",{staticClass:"report-options"},[_c("el-dropdown",{on:{command:_vm.exportData}},[_c("el-button",{staticClass:"fc-chart-btn",attrs:{size:"small",type:"text"}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(153813)}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"1",name:"CSV"}},[_vm._v("As CSV")]),_c("el-dropdown-item",{attrs:{command:"2",name:"Excel"}},[_vm._v("As Excel")]),_c("el-dropdown-item",{attrs:{command:"3",name:"PDF"}},[_vm._v("As PDF")])],1)],1),_c("email-report",{attrs:{visibility:_vm.email,report:_vm.report},on:{"update:visibility":function($event){_vm.email=$event}}}),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-chart-btn",attrs:{size:"small",type:"text",title:_vm.$t("home.dashboard.schedule_report"),"data-position":"bottom","data-arrow":"true"},on:{click:function($event){return _vm.scheduleexecution()}}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(598685)}})]),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-chart-btn",attrs:{size:"small",type:"text",title:_vm.$t("common.wo_report.email_this_report"),"data-position":"bottom","data-arrow":"true"},on:{click:function($event){return _vm.emailexecution()}}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(2175)}})]),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-chart-btn",attrs:{size:"small",type:"text",title:"Print","data-position":"bottom","data-arrow":"true"},on:{click:_vm.printReport}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(467511)}})])],1)]):_vm._e(),_c("div",{staticStyle:{clear:"both"}})]):_vm._e(),_c("div",{staticClass:"height100 scrollable chart-table-layout",staticStyle:{"padding-bottom":"0px"}},[_vm.report&&"tabular"===_vm.report.options.type?_c("date",{staticClass:"filter-field date-filter-comp text-center pT5",attrs:{mills:_vm.getMills(_vm.report.datefilter).time,filter:_vm.getMills(_vm.report.datefilter).filter,dateObj:_vm.report.datefilter},on:{data:_vm.setdate}}):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:!_vm.report||_vm.report&&"matrix"!==_vm.report.options.type&&"tabular"!==_vm.report.options.type,expression:"\n        !report ||\n          (report &&\n            report.options.type !== 'matrix' &&\n            report.options.type !== 'tabular')\n      "}],staticClass:"reports-chart"},[_c("f-report",{ref:"freport",attrs:{config:{id:_vm.reportId},currentDateFilter:_vm.currentDateFilter,currentEMFilter:_vm.energyMeterFilter,print:_vm.isPrint},on:{"update:currentDateFilter":function($event){_vm.currentDateFilter=$event},"update:current-date-filter":function($event){_vm.currentDateFilter=$event},"update:currentEMFilter":function($event){_vm.energyMeterFilter=$event},"update:current-e-m-filter":function($event){_vm.energyMeterFilter=$event},onload:_vm.reportLoaded}})],1),_vm.report&&"tabular"===_vm.report.options.type?_c("div",{staticClass:"reports-underlyingdata"},[_vm.loading?_c("spinner",{staticClass:"mT15",staticStyle:{margin:"0 auto"},attrs:{show:_vm.loading,size:"80"}}):_c("f-tabular-report",{attrs:{reportObject:_vm.reportObject}})],1):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.report&&"matrix"!==_vm.report.options.type&&"tabular"!==_vm.report.options.type,expression:"\n        report &&\n          report.options.type !== 'matrix' &&\n          report.options.type !== 'tabular'\n      "}],staticClass:"reports-underlyingdata",staticStyle:{"padding-bottom":"150px"}},[_c("f-tabular-data",{ref:"tabulardata"})],1)],1)])},staticRenderFns=[],tooltip=(__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(460895)),FReport=__webpack_require__(712744),FTabularReport=__webpack_require__(329744),FTabularData=__webpack_require__(478542),EmailReport=__webpack_require__(150406),ScheduleReportvue_type_template_id_747d00ba_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"trend-dialog headernew",attrs:{id:"schedule-form",visible:_vm.visibility,fullscreen:!0,"custom-class":"fc-dialog-right"},on:{"update:visible":function($event){_vm.visibility=$event},close:_vm.close}},[_c("div",[_c("div",{staticClass:"title"},[_vm._v(_vm._s(_vm.$t("common.wo_report.schedule_report")))]),_c("div",{staticClass:" pT20"},[_c("div",{staticClass:"subheader colorPink"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.schedule"))+" ")]),_c("el-date-picker",{staticClass:"form-item pT15",staticStyle:{width:"56%"},attrs:{"float-label":"Start Date",type:"datetime"},model:{value:_vm.scheduleForm.startTime,callback:function($$v){_vm.$set(_vm.scheduleForm,"startTime",$$v)},expression:"scheduleForm.startTime"}}),_c("f-schedule",{staticClass:"pT15",staticStyle:{width:"71%","margin-bottom":"20px"},attrs:{from:_vm.scheduleForm.startTime,initialSchedule:_vm.initialSchedule,simple:"true"},on:{input2:_vm.getfreq},model:{value:_vm.scheduleForm.schedule,callback:function($$v){_vm.$set(_vm.scheduleForm,"schedule",$$v)},expression:"scheduleForm.schedule"}})],1),_c("div",{staticClass:"heading"},[_vm._v(_vm._s(_vm.$t("common.wo_report.ends")))]),_c("div",[_c("div",[_c("el-radio",{staticClass:"newradio pT15 labelText",attrs:{color:"secondary",label:"never"},model:{value:_vm.endType,callback:function($$v){_vm.endType=$$v},expression:"endType"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.never")))])],1),_c("div",{staticClass:"row"},[_c("el-radio",{staticClass:"newradio pT15 labelText",attrs:{color:"secondary",label:"after"},model:{value:_vm.endType,callback:function($$v){_vm.endType=$$v},expression:"endType"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.after")))]),_c("div",{directives:[{name:"show",rawName:"v-show",value:"after"===_vm.endType,expression:"endType === 'after'"}]},[_c("el-input",{staticStyle:{width:"180px","margin-left":"20px"},attrs:{placeholder:"",type:"number",min:"1"},model:{value:_vm.maxCount,callback:function($$v){_vm.maxCount=$$v},expression:"maxCount"}}),_c("span",{staticStyle:{"margin-left":"10px"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.times")))])],1)],1),_c("div",{staticClass:"row"},[_c("el-radio",{staticClass:"newradio pT15 labelText",attrs:{color:"secondary",label:"on"},model:{value:_vm.endType,callback:function($$v){_vm.endType=$$v},expression:"endType"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.on")))]),_c("div",{directives:[{name:"show",rawName:"v-show",value:"on"===_vm.endType,expression:"endType === 'on'"}],staticClass:"row"},[_c("el-date-picker",{staticStyle:{width:"180px","margin-left":"30px","vertical-align":"text-bottom"},attrs:{type:"datetime",placeholder:"dd/mm/yy"},model:{value:_vm.endTime,callback:function($$v){_vm.endTime=$$v},expression:"endTime"}})],1)],1)]),_c("div",{staticClass:"pT20 subheader colorPink",staticStyle:{"padding-bottom":"15px"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.email_this_report"))+" ")]),_c("div",{staticClass:"heading",staticStyle:{float:"right"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.format"))+" "),_c("div",[_c("el-select",{model:{value:_vm.format,callback:function($$v){_vm.format=$$v},expression:"format"}},_vm._l(_vm.$constants.FILE_FORMAT,(function(label,value){return"Image"!==label?_c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}}):_vm._e()})),1)],1)]),_c("div",{staticClass:"heading"},[_vm._v(_vm._s(_vm.$t("common.wo_report.to")))]),_c("el-select",{staticClass:"filter-form",staticStyle:{width:"280px",overflow:"scroll"},attrs:{multiple:"",filterable:"","default-first-option":""},model:{value:_vm.mailJson.to,callback:function($$v){_vm.$set(_vm.mailJson,"to",$$v)},expression:"mailJson.to"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:parseInt(user.id)}},[_vm._v(_vm._s(user.name+" ("+user.email+")"))])})),1),_c("div",{staticClass:"heading pT15",staticStyle:{clear:"both"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.report_subject"))+" ")]),_c("div",[_c("el-input",{attrs:{type:"text"},on:{change:function($event){_vm.messageChanged=!0}},model:{value:_vm.mailJson.subject,callback:function($$v){_vm.$set(_vm.mailJson,"subject",$$v)},expression:"mailJson.subject"}})],1),_c("div",{staticClass:"heading pT15"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.report_description"))+" ")]),_c("div",[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{type:"textarea",autosize:{minRows:6,maxRows:6},resize:"none"},on:{change:function($event){_vm.messageChanged=!0}},model:{value:_vm.mailJson.message,callback:function($$v){_vm.$set(_vm.mailJson,"message",$$v)},expression:"mailJson.message"}})],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("button",{staticClass:"modal-btn-cancel",attrs:{type:"button"},on:{click:_vm.close}},[_c("span",[_vm._v(_vm._s(_vm.$t("common._common.cancel")))])]),_c("button",{staticClass:"modal-btn-save",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.$t("common.wo_report.schedule")))])])])])},ScheduleReportvue_type_template_id_747d00ba_staticRenderFns=[],esm_typeof=__webpack_require__(103336),FSchedule2=(__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(613071)),ScheduleReportvue_type_script_lang_js={props:["visibility","report","isEdit","model"],data:function(){return{scheduleForm:{startTime:new Date,schedule:null},initialSchedule:null,format:1,frequencyObj:null,mailJson:{to:[],subject:"",message:""},endType:"never",endTime:null,maxCount:null,messageChanged:!1}},components:{FSchedule:FSchedule2/* default */.Z},computed:{users:function(){return this.$store.state.users}},watch:{visibility:function(val){val&&(this.isEdit?this.init():(this.scheduleForm.startTime=new Date,this.setInitialMessage(this.frequencyObj)))}},mounted:function(){this.init()},methods:{init:function(){this.isEdit&&this.model&&(this.model.scheduleForm.schedule.timeObjects=null,this.scheduleForm.startTime=this.model.scheduleForm.startTime,this.scheduleForm.schedule=this.model.scheduleForm.schedule,this.initialSchedule=this.model.scheduleForm.schedule,this.format=this.model.format,this.mailJson=this.model.mailJson,this.mailJson.to=this.model.mailJson.to,this.model.endTime&&(this.endTime=this.model.endTime),this.model.maxCount&&(this.maxCount=this.model.maxCount),this.maxCount>0?this.endType="after":this.endType=this.endTime>0?"on":"never")},setInitialMessage:function(data){!this.messageChanged&&this.report&&(this.mailJson.message=this.$t("common.wo_report.mail_reported_from_facilio",[this.$getProperty(window.brandConfig,"name","Facilio")])+this.$account.user.name+"\n\nReport name : "+this.report.name+(this.report.description?"\nDescription: "+this.report.description:"")+"\nFrequency: "+(data?data.label:"")+"\n\nDetailed report is available at \n"+window.location.href+"\n\nRegards, \nTeam "+this.$getProperty(window.brandConfig,"name","Facilio"),this.mailJson.subject=this.report.name+this.$t("common.wo_report.report_schedule_at")+this.$options.filters.formatDate(this.$helpers.getTimeInOrg(this.scheduleForm.startTime)))},close:function(){this.$emit("update:visibility",!1)},getfreq:function(data){return this.frequencyObj=data,this.mailJson.message=this.$t("common.wo_report.mail_reported_from_facilio",[this.$getProperty(window.brandConfig,"name","Facilio")])+this.$account.user.name+"\nReport name : "+this.report.options.name+"\nDescription: "+this.report.options.description+"\nFrequency: "+(data?data.label:"")+"\nDetailed report is available in the here. \n"+window.location.href+"\nRegards, \nTeam "+this.$getProperty(window.brandConfig,"name","Facilio"),this.mailJson.subject=this.report.options.name+this.$t("common.wo_report.report_schedule_at")+this.scheduleForm.startTime,data},save:function(){if(this.mailJson.to.length&&this.mailJson.subject){var self=this,mailTemplate=this.$helpers.cloneObject(this.mailJson);this.$common.setUserMailWorkflow(this.mailJson.to,mailTemplate);var url,data={type:this.format,reportId:this.isEdit?this.model.reportId:this.report.options.id,emailTemplate:mailTemplate,scheduleInfo:this.scheduleForm.schedule,startTime:this.$helpers.getTimeInOrg(this.scheduleForm.startTime)};if("after"===this.endType){if(!(this.maxCount>0))return;data.maxCount=this.maxCount}else if("on"===this.endType){if(!this.endTime)return;if(data.endTime=this.$helpers.getTimeInOrg(this.endTime),data.endTime<data.startTime)return void this.$message({message:this.$t("common.wo_report.end_time_schedule"),type:"error"})}this.isEdit?(url="/dashboard/editScheduledReport",data.id=[this.model.id]):url="/dashboard/scheduleReport",this.$http.post(url,data).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(self.$message({message:self.$t("common.wo_report.schedule_success"),type:"success"}),self.reset(),self.isEdit?self.$emit("save"):self.close()):self.$message({message:self.$t("common.wo_report.schedule_failed"),type:"error"})}))}},reset:function(){this.mailJson.to=[],this.mailJson.subject="",this.mailJson.message="",this.endTime=null,this.maxCount=null,this.endType="never"}}},forms_ScheduleReportvue_type_script_lang_js=ScheduleReportvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_ScheduleReportvue_type_script_lang_js,ScheduleReportvue_type_template_id_747d00ba_render,ScheduleReportvue_type_template_id_747d00ba_staticRenderFns,!1,null,null,null)
/* harmony default export */,ScheduleReport=component.exports,ReportHelper=__webpack_require__(507815),DatePicker=__webpack_require__(106537),router=__webpack_require__(329435),ReportSummaryvue_type_script_lang_js={mixins:[ReportHelper/* default */.Z],components:{FReport:FReport/* default */.Z,FTabularReport:FTabularReport/* default */.Z,FTabularData:FTabularData/* default */.Z,EmailReport:EmailReport/* default */.Z,ScheduleReport:ScheduleReport,date:DatePicker/* default */.Z},data:function(){return{exportDownloadUrl:null,titleEdit:!1,title:null,report:null,reportObject:null,email:!1,schedule:!1,currentDateFilter:null,isPrint:!1,energyMeterFilter:null,dateObj:null,loading:!1}},destroyed:function(){tooltip/* default */.Z.hideTooltip()},computed:{reportId:function(){var reportId=this.$attrs.reportid||this.$route.params.reportid;return parseInt(reportId)}},watch:{$route:{handler:function(newData,oldData){this.titleEdit=!1}}},methods:{reportLoaded:function(report,reportObject){this.report=report,this.reportObject=reportObject,this.report&&this.report.options&&(this.tilte=this.report.options.name?this.report.options.name:null),this.$refs["tabulardata"]&&this.$refs["tabulardata"].initData(this.report)},editheader:function(){this.titleEdit=!0,this.report&&this.report.options&&(this.title=this.report.options.name?this.report.options.name:null)},blurevent:function(){this.title.replace(/\s/g,"").length>0&&this.titleEdit?(this.titleEdit=!1,this.report.options.name=this.title,this.updateReport()):this.titleEdit=!0},updateReport:function(){var params={reportContext:{name:this.report.options.name,id:this.report.options.id}};this.$http.post("/dashboard/updateReport",params).then((function(response){}))},editReport:function(){var reportId=this.reportId;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_FORM)||{},name=_ref.name;name&&this.$router.push({name:name,query:{reportId:reportId}})}else this.$router.replace({path:"".concat(this.getCurrentModule().rootPath,"/edit/").concat(reportId)})},deleteReport:function(){var self=this,promptObj={title:"Delete Report",message:"Are you sure you want to delete this Report?",rbDanger:!0,rbLabel:"Delete"};self.$dialog.confirm(promptObj).then((function(value){value&&self.$http.post("dashboard/deleteReport",{reportId:self.reportId}).then((function(response){self.$emit("reportDeleted",{type:"old",reportId:self.reportId})})).catch((function(error){self.$message({message:error.response.data.errorString,type:"error"})}))}))},exportData:function(cmd,name){var _this=this,self=this,reportId=self.report.tabledata?self.report.tabledata[0].options.id:self.report.options.id,param={type:cmd,reportId:reportId};this.currentDateFilter&&(param.dateFilter=this.currentDateFilter),this.energyMeterFilter&&(param.energyMeterFilter=this.energyMeterFilter,this.energyMeterFilter.buildingId&&(param.reportSpaceFilterContext={buildingId:parseInt(this.energyMeterFilter.buildingId)})),this.$attrs.buildingid&&(param.reportSpaceFilterContext={buildingId:parseInt(this.$attrs.buildingid)}),this.$message("Exporting as "+name.$vnode.data.attrs.name),this.$http.post("/dashboard/export",param).then((function(response){_this.$message.close(),_this.exportDownloadUrl=response.data.fileUrl}))},reload:function(d){location.reload()},emailexecution:function(){this.email=!0},scheduleexecution:function(){this.schedule=!0},printReport:function(){this.isPrint=!this.isPrint},setdate:function(data){var self=this,url="/dashboard/getData",params={};params.reportId=self.reportId,data&&(params.dateFilter=data.time),this.loading=!0,self.$http.post(url,params).then((function(response){self.reportObject=response.data,self.loading=!1}))}}},report_ReportSummaryvue_type_script_lang_js=ReportSummaryvue_type_script_lang_js,ReportSummary_component=(0,componentNormalizer/* default */.Z)(report_ReportSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ReportSummary=ReportSummary_component.exports},
/***/329744:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FTabularReport}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/components/FTabularReport.vue?vue&type=template&id=8a28787a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.reportObject?_c("HotTable",{ref:"hotTable",staticClass:"f-tabular-report-hot",style:_vm.styleCss,attrs:{root:_vm.root,settings:_vm.hotSettings}}):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),formatter=(__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(676240)),vue_handsontable=__webpack_require__(366258),vue_handsontable_default=__webpack_require__.n(vue_handsontable),d3=__webpack_require__(348727),FTabularReportvue_type_script_lang_js={components:{HotTable:vue_handsontable_default()},props:["reportObject","config"],data:function(){return{root:"tabular-report-hot",hotTableWidth:1e3,hotSettings:{data:[],columns:[],colHeaders:!0,rowHeaders:!0,readOnly:!0,columnSorting:!0,manualColumnResize:!0,manualColumnMove:!0,fixedColumnsLeft:1}}},mounted:function(){this.setHotTableWidth(),this.init(),this.render();var self=this;window.addEventListener("resize",(function(){self.setHotTableWidth()}))},computed:{styleCss:function(){return this.hotTableWidth?"width: "+this.hotTableWidth+"px !important;":"width: 1000px !important;"}},watch:{reportObject:{handler:function(newData,oldData){this.render()},deep:!0}},methods:{init:function(){var self=this;this.hotSettings.afterColumnMove=function(from,to){self.saveCurrentState()},this.hotSettings.afterColumnResize=function(col,width){self.saveCurrentState()}},setHotTableWidth:function(){this.hotTableWidth=parseInt(d3.select(this.$el).style("width"))},render:function(){var _step,colHeaders=[],colWidth=[],columns=[],validWidth=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.reportObject.reportColumns);try{for(_iterator.s();!(_step=_iterator.n()).done;){var column=_step.value;column.report.id===this.reportObject.reportContext.id&&(column.isMainReport=!0),525!==column.report.id&&(column.isMainReport?(colHeaders.push(column.report.xAxisLabel),columns.push({type:"text"})):(colHeaders.push(column.report.name),columns.push({type:"numeric"})),colWidth.push(column.width),column.width<=0&&(validWidth=!1))}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.hotSettings.columns=columns,this.hotSettings.colHeaders=colHeaders,validWidth&&(this.hotSettings.colWidths=null,this.hotSettings.colWidths=colWidth);var _step2,formattedData=[],_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.reportObject.reportData);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){for(var row=_step2.value,newRow=[],i=0;i<row.length;i++){var _column=this.reportObject.reportColumns[i];if(!_column)break;if(null===row[i]||"null"===row[i])newRow.push("");else{var field=_column.isMainReport?_column.report.xAxisField:_column.report.y1AxisField,operator=_column.isMainReport?_column.report.XAxisAggregateOpperator:_column.report.y1AxisAggregateOpperator,axisColumn={datatype:field&&field.field.dataTypeEnum?field.field.dataTypeEnum._name.toLowerCase():"string",operation:operator?operator._name.toLowerCase():""};newRow.push(formatter/* default */.ZP.formatValue(row[i],axisColumn))}}formattedData.push(newRow)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}this.hotSettings.data=formattedData},saveCurrentState:function(){for(var _this=this,self=this,colHeaders=self.hotSettings.colHeaders,modifiedColumns=[],colIdMap={},_loop=function(){var colHeader=self.$refs["hotTable"].table.getColHeader(i),colWidth=self.$refs["hotTable"].table.getColWidth(i),reportColumn=_this.reportObject.reportColumns.find((function(rc){return rc.report.name===colHeader||rc.report.xAxisLabel===colHeader}));if(colIdMap[reportColumn.id+""])return 1;// continue
colIdMap[reportColumn.id+""]=!0;var modifiedColumn={id:reportColumn.id,width:colWidth};modifiedColumns.push(modifiedColumn)},i=0;i<colHeaders.length;i++)_loop();self.$http.post("/dashboard/updateTabularSequence",{reportColumns:modifiedColumns}).then((function(response){}))}}},components_FTabularReportvue_type_script_lang_js=FTabularReportvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FTabularReportvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FTabularReport=component.exports},
/***/150406:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return EmailReport}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/forms/EmailReport.vue?vue&type=template&id=74708e0b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"trend-dialog headernew",attrs:{visible:_vm.visibility,fullscreen:!0,"custom-class":"fc-dialog-right","before-close":_vm.close},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"emailReport"}},[_c("div",{staticClass:"dialog-title title"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.email_this_report"))+" ")]),_c("div",{staticClass:"heading pT15",staticStyle:{float:"right"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.format"))+" "),_c("div",[_c("el-select",{staticClass:"email-format",model:{value:_vm.format,callback:function($$v){_vm.format=$$v},expression:"format"}},_vm._l(_vm.$constants.FILE_FORMAT,(function(label,value){return"Image"!==label?_c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}}):_vm._e()})),1)],1)]),_c("div",{staticClass:"heading pT15 "},[_vm._v("To")]),_c("div",[_c("el-select",{staticClass:"filter-form",staticStyle:{width:"300px",overflow:"scroll"},attrs:{multiple:"",filterable:"","default-first-option":""},model:{value:_vm.mailJson.to,callback:function($$v){_vm.$set(_vm.mailJson,"to",$$v)},expression:"mailJson.to"}},_vm._l(_vm.users,(function(user){return user.inviteAcceptStatus?_c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}},[_vm._v(_vm._s(user.name+" ("+user.email+")"))]):_vm._e()})),1)],1),_c("div",{staticClass:"heading pT15",staticStyle:{clear:"both"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.subject"))+" ")]),_c("div",[_c("el-input",{attrs:{type:"text"},model:{value:_vm.mailJson.subject,callback:function($$v){_vm.$set(_vm.mailJson,"subject",$$v)},expression:"mailJson.subject"}})],1),_c("div",{staticClass:"heading pT15"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.description"))+" ")]),_c("div",[_c("el-input",{attrs:{type:"textarea",rows:3},model:{value:_vm.mailJson.message,callback:function($$v){_vm.$set(_vm.mailJson,"message",$$v)},expression:"mailJson.message"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("button",{staticClass:"modal-btn-cancel",attrs:{type:"button"},on:{click:_vm.close}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"modal-btn-save",attrs:{type:"button"},on:{click:_vm.sendMail}},[_c("span",[_vm._v(_vm._s(_vm.$t("common.wo_report.send")))])])])])},staticRenderFns=[],esm_typeof=__webpack_require__(103336),AnalyticsMixin=(__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(244936)),EmailReportvue_type_script_lang_js={props:["visibility","report","analyticsConfig"],mixins:[AnalyticsMixin/* default */.Z],data:function(){return{format:1,mailJson:{to:[],subject:this.report.options.name+"Report",message:"The following Report from "+this.$getProperty(window.brandConfig,"name","Facilio")+" has been mailed to you by "+this.$account.user.name+"\nReport name : "+this.report.options.name+"\nDescription: "+this.report.options.description+"\nDetailed report is available in the here. \n"+window.location.href+"\nRegards, \nTeam "+this.$getProperty(window.brandConfig,"name","Facilio")}}},mounted:function(){this.report&&this.report.options&&this.report.options.name&&(this.mailJson.subject=this.report.options.name+" Report",this.mailJson.message="Hi,\nThe report on "+this.report.options.name+"has been sent to you from "+this.$getProperty(window.brandConfig,"name","Facilio")+". Please have a look at "+window.location.href)},computed:{users:function(){return this.$store.state.users}},methods:{close:function(){this.$emit("update:visibility",!1)},sendMail:function(type){var self=this;if(this.mailJson.to.length&&this.mailJson.subject){var mailTemplate=this.$helpers.cloneObject(this.mailJson);this.$common.setUserMailWorkflow(this.mailJson.to,mailTemplate);var data={type:this.format,emailTemplate:mailTemplate};this.report?data.reportId=this.report.options.id:this.$helpers.extend(data,this.getExportParam(this.analyticsConfig)),this.$message({message:"Sending email...",duration:0}),this.close(),this.$http.post("/dashboard/sendReportMail",data).then((function(response){self.$message.closeAll(),"object"===(0,esm_typeof/* default */.Z)(response.data)?(self.$message({message:"Email sent successfully!",type:"success"}),self.mailJson.to=[],self.mailJson.subject="",self.mailJson.message=""):self.$message({message:"Email sending failed!",type:"error"})}))}}}},forms_EmailReportvue_type_script_lang_js=EmailReportvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_EmailReportvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailReport=component.exports},
/***/410108:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f1c32ac6a1501ce55d7f2300b27d5e44.svg";
/***/},
/***/887025:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d48efac97df00618be2544d7f1f74f91.svg";
/***/},
/***/341029:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"de70c08c169675a03d6f6f01e3ac8485.svg";
/***/},
/***/598685:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"274712e4f5ec9e2930d39e8197292de9.svg";
/***/},
/***/129816:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"dfcbbadf4f8f09681ad8f2de015afb01.svg";
/***/},
/***/629443:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"85ea53fd2628a4ae14c73fee9cb609a6.svg";
/***/},
/***/2175:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"7e35747b18170acc69a34bfa74280639.svg";
/***/},
/***/153813:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"9c716467b9890487a1b01493444e23c1.svg";
/***/},
/***/91677:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d03d12044be501e3bdbdc83d030da718.svg";
/***/},
/***/717328:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"274def972329432efd7d03727bb5999c.svg";
/***/},
/***/413273:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"1f25d1b30ac0891c72ce35e280c7bdd4.svg";
/***/},
/***/570678:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ac77e7e49ce3d548023f1938bf0c314.svg";
/***/},
/***/928824:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6a1913f5986e24342d2477d78bebbe25.svg";
/***/},
/***/467511:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"cefca6b5f1c23bbab335218af2a93316.svg";
/***/},
/***/71761:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"1286a23c6f12683d5209b7f870725c4e.svg";
/***/},
/***/709333:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4996a0a169dce81b1a1f65b7449a9834.svg";
/***/},
/***/407826:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"187c798f2c8a54e79cbaafc1005755e6.svg";
/***/},
/***/754125:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./af":702525,"./af.js":702525,"./ar":689102,"./ar-dz":463778,"./ar-dz.js":463778,"./ar-kw":410960,"./ar-kw.js":410960,"./ar-ly":281490,"./ar-ly.js":281490,"./ar-ma":985507,"./ar-ma.js":985507,"./ar-sa":224042,"./ar-sa.js":224042,"./ar-tn":191523,"./ar-tn.js":191523,"./ar.js":689102,"./az":938365,"./az.js":938365,"./be":544860,"./be.js":544860,"./bg":709904,"./bg.js":709904,"./bm":660952,"./bm.js":660952,"./bn":709807,"./bn.js":709807,"./bo":858437,"./bo.js":858437,"./br":784557,"./br.js":784557,"./bs":979332,"./bs.js":979332,"./ca":493667,"./ca.js":493667,"./cs":276860,"./cs.js":276860,"./cv":515427,"./cv.js":515427,"./cy":158863,"./cy.js":158863,"./da":513520,"./da.js":513520,"./de":112111,"./de-at":30464,"./de-at.js":30464,"./de-ch":750701,"./de-ch.js":750701,"./de.js":112111,"./dv":494438,"./dv.js":494438,"./el":33121,"./el.js":33121,"./en-au":849197,"./en-au.js":849197,"./en-ca":753885,"./en-ca.js":753885,"./en-gb":551914,"./en-gb.js":551914,"./en-ie":880938,"./en-ie.js":880938,"./en-nz":619722,"./en-nz.js":619722,"./eo":742783,"./eo.js":742783,"./es":56820,"./es-do":559651,"./es-do.js":559651,"./es-us":146018,"./es-us.js":146018,"./es.js":56820,"./et":818686,"./et.js":818686,"./eu":831323,"./eu.js":831323,"./fa":261885,"./fa.js":261885,"./fi":263741,"./fi.js":263741,"./fo":219961,"./fo.js":219961,"./fr":802800,"./fr-ca":388121,"./fr-ca.js":388121,"./fr-ch":427979,"./fr-ch.js":427979,"./fr.js":802800,"./fy":428930,"./fy.js":428930,"./gd":695513,"./gd.js":695513,"./gl":224485,"./gl.js":224485,"./gom-latn":703878,"./gom-latn.js":703878,"./gu":25435,"./gu.js":25435,"./he":862825,"./he.js":862825,"./hi":727282,"./hi.js":727282,"./hr":402438,"./hr.js":402438,"./hu":591310,"./hu.js":591310,"./hy-am":614794,"./hy-am.js":614794,"./id":108761,"./id.js":108761,"./is":256593,"./is.js":256593,"./it":272196,"./it.js":272196,"./ja":812645,"./ja.js":812645,"./jv":471869,"./jv.js":471869,"./ka":174093,"./ka.js":174093,"./kk":919794,"./kk.js":919794,"./km":792637,"./km.js":792637,"./kn":828684,"./kn.js":828684,"./ko":94565,"./ko.js":94565,"./ky":465606,"./ky.js":465606,"./lb":472027,"./lb.js":472027,"./lo":280366,"./lo.js":280366,"./lt":327311,"./lt.js":327311,"./lv":531851,"./lv.js":531851,"./me":952700,"./me.js":952700,"./mi":673575,"./mi.js":673575,"./mk":195509,"./mk.js":195509,"./ml":429866,"./ml.js":429866,"./mr":713798,"./mr.js":713798,"./ms":526848,"./ms-my":701212,"./ms-my.js":701212,"./ms.js":526848,"./mt":863181,"./mt.js":863181,"./my":63977,"./my.js":63977,"./nb":47248,"./nb.js":47248,"./ne":891859,"./ne.js":891859,"./nl":127058,"./nl-be":66901,"./nl-be.js":66901,"./nl.js":127058,"./nn":561748,"./nn.js":561748,"./pa-in":634266,"./pa-in.js":634266,"./pl":79581,"./pl.js":79581,"./pt":687410,"./pt-br":906114,"./pt-br.js":906114,"./pt.js":687410,"./ro":138295,"./ro.js":138295,"./ru":539862,"./ru.js":539862,"./sd":59548,"./sd.js":59548,"./se":293236,"./se.js":293236,"./si":340289,"./si.js":340289,"./sk":658339,"./sk.js":658339,"./sl":574170,"./sl.js":574170,"./sq":615316,"./sq.js":615316,"./sr":668791,"./sr-cyrl":447630,"./sr-cyrl.js":447630,"./sr.js":668791,"./ss":65773,"./ss.js":65773,"./sv":731159,"./sv.js":731159,"./sw":422329,"./sw.js":422329,"./ta":267054,"./ta.js":267054,"./te":971280,"./te.js":971280,"./tet":154120,"./tet.js":154120,"./th":254679,"./th.js":254679,"./tl-ph":63270,"./tl-ph.js":63270,"./tlh":845386,"./tlh.js":845386,"./tr":664669,"./tr.js":664669,"./tzl":691434,"./tzl.js":691434,"./tzm":57217,"./tzm-latn":547665,"./tzm-latn.js":547665,"./tzm.js":57217,"./uk":969596,"./uk.js":969596,"./ur":985133,"./ur.js":985133,"./uz":349456,"./uz-latn":978737,"./uz-latn.js":978737,"./uz.js":349456,"./vi":905577,"./vi.js":905577,"./x-pseudo":464564,"./x-pseudo.js":464564,"./yo":68854,"./yo.js":68854,"./zh-cn":795817,"./zh-cn.js":795817,"./zh-hk":266634,"./zh-hk.js":266634,"./zh-tw":749292,"./zh-tw.js":749292};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=754125}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/56357.js.map