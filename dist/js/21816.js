(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[21816],{
/***/201117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupFieldWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FLookupFieldWrapper.vue?vue&type=template&id=0b196d62
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"lookup-wrapper"},[_vm.fieldObj.field?_c("FLookupField",{class:{"handle-wizard-icon":_vm.handleWizardIcon},attrs:{model:_vm.modelObj,field:_vm.fieldObj,disabled:_vm.disabled,siteId:_vm.siteId,hideLookupIcon:_vm.hideWizard,hideDropDown:_vm.hideDropDown,preHookFilterConstruction:_vm.filterConstruction,fetchOptionsOnLoad:_vm.fetchOptionsOnLoad,fetchOptionsMethod:_vm.fetchOptionsMethod},on:{"update:model":function($event){_vm.modelObj=$event},showLookupWizard:_vm.showLookupWizard,recordSelected:_vm.onRecordSelected}}):_c("el-input"),!_vm.hideWizard&&_vm.canShowLookupWizard?_c("div",[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.fieldObj,siteId:_vm.siteId,withReadings:_vm.withReadings},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue,showMainFieldSearch:function($event){return _vm.onWizardShow(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),FLookupField=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(891719),__webpack_require__(855048)),validation=__webpack_require__(990260),FLookupFieldWrappervue_type_script_lang_js={name:"f-lookup-field-wrapper",props:{value:[Number,String,Array],label:String,
// Label of selected value if any
formField:Object,field:Object,
// Pass field object if form field not available and field avaialble
moduleName:String,
// Pass module name and field name if field object not avaialble
fieldName:String,disabled:{type:Boolean,default:!1},siteId:Number,hideWizard:{type:Boolean,default:!1},hideDropDown:{type:Boolean,default:!1},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},withReadings:Boolean,handleWizardIcon:{
// To handle wizard icon css
type:Boolean,default:!0},filterConstruction:{type:Function,default:function(field){return field.filters}}},components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(42054)]).then(__webpack_require__.bind(__webpack_require__,499751))}},data:function(){return{fieldObj:{isDataLoading:!1,options:[],lookupModuleName:"",field:null,filters:{},isDisabled:!1},canShowLookupWizard:!1}},computed:{modelObj:{get:function(){return(0,validation/* isEmpty */.xb)(this.value)?this.value:(0,validation/* isArray */.kJ)(this.value)?this.value.map((function(val){return parseInt(val)})):parseInt(this.value)},set:function(value){this.$emit("input",value)}}},created:function(){this.handleDefaultOption()},mounted:function(){var formField=this.formField,field=this.field;(0,validation/* isEmpty */.xb)(formField)?(0,validation/* isEmpty */.xb)(field)?this.fetchField():this.setField(field):this.fieldObj=formField},watch:{canShowLookupWizard:function(value){value||this.onWizardShow(value)}},methods:{showLookupWizard:function(field,canShow){this.fieldObj=field,this.canShowLookupWizard=canShow,this.onWizardShow(!0)},setLookupFieldValue:function(props){var _this=this,field=props.field,_ref=field||{},multiple=_ref.multiple,selectedItems=_ref.selectedItems;if(multiple){var valueArr=[];selectedItems.forEach((function(item){var value=item.value,label=item.label;_this.addOption(value,label),valueArr.push(value)})),this.modelObj=valueArr,this.onRecordSelected(selectedItems,valueArr)}else{var _ref2=selectedItems||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,1),selectedItem=_ref3[0],value=selectedItem.value,label=selectedItem.label;this.addOption(value,label),this.modelObj=value,this.onRecordSelected(selectedItem)}this.onWizardShow(!1)},onWizardShow:function(show){this.$emit("showingLookupWizard",show)},fetchField:function(){var _this2=this,moduleName=this.moduleName,fieldName=this.fieldName;this.$util.loadModuleMeta(moduleName).then((function(meta){var field=meta.fields.find((function(field){return field.name===fieldName}));_this2.setField(field)}))},onRecordSelected:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.$emit.apply(this,["recordSelected"].concat(args))},handleDefaultOption:function(){var label=this.label,value=this.value;(0,validation/* isEmpty */.xb)(label)||(0,validation/* isEmpty */.xb)(value)||this.addOption(value,label)},setField:function(field){var fieldObj=this.fieldObj;fieldObj.field=field,fieldObj.multiple=field.multiple,fieldObj.lookupModuleName=field.lookupModule.name,(0,validation/* isArray */.kJ)(this.modelObj)?fieldObj.selectedItems=this.modelObj.map((function(id){return{value:id}})):fieldObj.selectedItems={value:this.modelObj}},addOption:function(id,label){var fieldObj=this.fieldObj,options=fieldObj.options,newOptionObj={label:label,value:id};(0,validation/* isEmpty */.xb)(options)?options.push(newOptionObj):options.some((function(option){return option.value===id}))||options.unshift(newOptionObj),this.$set(this.fieldObj,"options",options)}}},components_FLookupFieldWrappervue_type_script_lang_js=FLookupFieldWrappervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FLookupFieldWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupFieldWrapper=component.exports},
/***/521816:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/NewSearch.vue?vue&type=template&id=79257406
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showSearchfilter?_c("outside-click",{attrs:{visibility:_vm.showSearchfilter},on:{onOutsideClick:function($event){return _vm.close()}}},[_c("div",{staticClass:"inline-flex hideSearch"},[_c("el-select",{staticClass:"search-select-comp",attrs:{slot:"prepend",filterable:"",placeholder:"Select"},slot:"prepend",model:{value:_vm.fieldName,callback:function($$v){_vm.fieldName=$$v},expression:"fieldName"}},[_vm._l(_vm.config.data,(function(label,value){return _c("el-option",{key:value,attrs:{label:_vm.config.data[value].label,value:value}})})),_c("el-button",{attrs:{slot:"append","prefix-icon":"el-icon-search"},slot:"append"})],2),_vm.config.data[_vm.fieldName]&&"select"===_vm.config.data[_vm.fieldName].displayType&&"date"!==_vm.config.data[_vm.fieldName].type?_c("div",[_c("el-select",{ref:"dropdown",staticClass:"search-select-comp2 search-border-left fc-tag",attrs:{disabled:1==_vm.config.data[_vm.fieldName].operatorId||2==_vm.config.data[_vm.fieldName].operatorId,multiple:"","collapse-tags":"",filterable:"",placeholder:1==_vm.config.data[_vm.fieldName].operatorId?"is Empty":2==_vm.config.data[_vm.fieldName].operatorId?"is Not Empty":"Search..","popper-class":"f-search-popover"},on:{change:function($event){return _vm.searchchange()}},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},[_vm._l(_vm.config.data[_vm.fieldName].options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),"date"!==_vm.config.data[_vm.fieldName].type||_vm.config.data[_vm.fieldName].hideDateRange?_vm._e():_c("el-option",{attrs:{label:"Custom",value:"20"}}),_c("div",{staticClass:"search-select-filter-btn"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold",on:{click:function($event){return _vm.apply()}}},[_vm._v("DONE")])],1)],2)],1):_vm._e(),"lookup"!==_vm.config.data[_vm.fieldName].displayType||_vm.config.data[_vm.fieldName].specialType?_vm._e():_c("div",[_c("FLookupFieldWrapper",{staticClass:"search-input-comp",attrs:{field:_vm.metaInfo.fields.find((function(v){return v.name===_vm.fieldName})),label:(_vm.formModel[_vm.fieldName]||{}).label},on:{recordSelected:function(value){return _vm.setLookUpFilter(value,_vm.fieldName)},showingLookupWizard:function($event){_vm.showingLookupWizard=!0}},model:{value:(_vm.formModel[_vm.fieldName]||{}).id,callback:function($$v){_vm.$set(_vm.formModel[_vm.fieldName]||{},"id",$$v)},expression:"(formModel[fieldName] || {}).id"}})],1),_vm.config.data[_vm.fieldName]&&"select"===_vm.config.data[_vm.fieldName].displayType&&"date"===_vm.config.data[_vm.fieldName].type?_c("div",["20"!==_vm.config.data[_vm.fieldName].value?_c("el-select",{staticClass:"search-select-comp2 search-border-left fc-tag fc-search-bar-select",attrs:{filterable:"","collapse-tags":"",placeholder:"Select","popper-class":"f-search-popover","popper-append-to-body":!1},on:{change:function($event){return _vm.filterApply()}},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},[_vm._l(_vm.config.data[_vm.fieldName].options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),"date"!==_vm.config.data[_vm.fieldName].type||_vm.config.data[_vm.fieldName].hideDateRange?_vm._e():_c("el-option",{attrs:{label:"Custom",value:"20"}})],2):_vm._e()],1):_vm._e(),_c("f-date-picker",{directives:[{name:"show",rawName:"v-show",value:_vm.config.data[_vm.fieldName]&&"date"===_vm.config.data[_vm.fieldName].type&&(_vm.config.data[_vm.fieldName].single?"20"===_vm.config.data[_vm.fieldName].value:_vm.config.data[_vm.fieldName].value.includes("20")),expression:"\n          config.data[fieldName] &&\n            config.data[fieldName].type === 'date' &&\n            (config.data[fieldName].single\n              ? config.data[fieldName].value === '20'\n              : config.data[fieldName].value.includes('20'))\n        "}],ref:"fdate",staticClass:"mT10 position-relative new-search-date-filter search-date-picker",attrs:{type:"datetimerange","value-format":"timestamp",format:"dd-MM-yyyy HH:mm"},on:{change:_vm.onFilterChanged},model:{value:_vm.config.data[_vm.fieldName].dateRange,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"dateRange",$$v)},expression:"config.data[fieldName].dateRange"}}),_vm.config.data[_vm.fieldName]&&"string"===_vm.config.data[_vm.fieldName].displayType?_c("div",[_c("el-input",{staticClass:"input-with-select search-input-comp search-icon-set",attrs:{slot:"prepend",disabled:1==_vm.config.data[_vm.fieldName].operatorId||2==_vm.config.data[_vm.fieldName].operatorId,placeholder:1==_vm.config.data[_vm.fieldName].operatorId?"is Empty":2==_vm.config.data[_vm.fieldName].operatorId?"is Not Empty":"Search..",clearable:"",autofocus:!0,type:"search","prefix-icon":1==_vm.config.data[_vm.fieldName].operatorId||2==_vm.config.data[_vm.fieldName].operatorId?"":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.apply()}},slot:"prepend",model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e(),_vm.config.data[_vm.fieldName]&&"number"===_vm.config.data[_vm.fieldName].displayType?_c("div",[_c("el-input",{staticClass:"input-with-select search-input-comp search-icon-set",attrs:{slot:"prepend",type:"number",disabled:1==_vm.config.data[_vm.fieldName].operatorId||2==_vm.config.data[_vm.fieldName].operatorId,placeholder:1==_vm.config.data[_vm.fieldName].operatorId?"is Empty":2==_vm.config.data[_vm.fieldName].operatorId?"is Not Empty":"Search..",clearable:"",autofocus:!0,"prefix-icon":1==_vm.config.data[_vm.fieldName].operatorId||2==_vm.config.data[_vm.fieldName].operatorId?"":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.apply()}},slot:"prepend",model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e(),_vm.config.data[_vm.fieldName]&&["asset","space"].includes(_vm.config.data[_vm.fieldName].displayType)?[_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border search-select-comp2 down-arrow-remove search-border-left fc-tag",staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",collapse:"",value:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?[1]:null,disabled:""}},[_c("el-option",{attrs:{label:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?_vm.config.data[_vm.fieldName].value.length+("asset"===_vm.config.data[_vm.fieldName].displayType?" Asset":" Space")+(_vm.config.data[_vm.fieldName].value.length>1?"s":"")+" selected":"",value:1}})],1),1!=_vm.config.data[_vm.fieldName].operatorId&&2!=_vm.config.data[_vm.fieldName].operatorId?_c("i",{staticClass:"el-input__icon el-icon-search filter-space-search-icon3",attrs:{slot:"suffix"},on:{click:function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",!0)}},slot:"suffix"}):_vm._e()],1)]:_vm._e(),_c("el-button",{staticClass:"pointer user-select-none filter-btn",attrs:{disabled:"date"===_vm.config.data[_vm.fieldName].type&&"20"!==_vm.config.data[_vm.fieldName].value},on:{click:function($event){return $event.stopPropagation(),_vm.selectOperatorDialog()}}},[_c("img",{staticStyle:{width:"18px"},attrs:{src:__webpack_require__(7634)}})]),_vm.showFilterCondition?_c("transition",{attrs:{name:"fade"}},[_c("outside-click",{staticClass:"filter-condition-block",attrs:{visibility:_vm.showFilterCondition},on:{"update:visibility":function($event){_vm.showFilterCondition=$event}}},[_c("div",{staticClass:"filter-condition-body"},[_c("div",{staticClass:"filter-condition-radion-btn pT10"},["createdTime"!==_vm.fieldName&&"dueDate"!==_vm.fieldName&&"actualWorkEnd"!==_vm.fieldName&&"warrantyExpiryDate"!==_vm.fieldName&&_vm.config.data[_vm.fieldName]&&"acknowledgedTime"!==_vm.fieldName&&"clearedTime"!==_vm.fieldName&&"modifiedTime"!==_vm.fieldName&&"isAcknowledged"!==_vm.fieldName&&"connected"!==_vm.fieldName&&_vm.config.data[_vm.fieldName]&&"DATE_TIME"!==_vm.config.data[_vm.fieldName].operator&&"DATE"!==_vm.config.data[_vm.fieldName].operator?_c("div",{staticClass:"filter-radio-display"},[_vm.operators&&_vm.operators[_vm.fieldName]?_c("div",_vm._l(_vm.moduleMeta.operators[_vm.operators[_vm.fieldName]],(function(label){return _vm.selectedlist(label,_vm.operators[_vm.fieldName])?_c("el-radio",{key:label.operatorId,staticClass:"fc-radio-btn pB10",attrs:{label:label.operatorId,value:label.operatorId},model:{value:_vm.config.data[_vm.fieldName].operatorId,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"operatorId",$$v)},expression:"config.data[fieldName].operatorId"}},[_vm._v(" "+_vm._s(label.operator)+" "),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",["select"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-select",{staticClass:"search-select-comp2 fc-tag mT10 search-border-left fc-search-select-width",attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"Select"},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},_vm._l(_vm.config.data[_vm.fieldName].options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",["string"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"text",autofocus:!0},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",["number"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"number",autofocus:!0},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[["asset","space"].includes(_vm.config.data[_vm.fieldName].displayType)&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border fc-tag mT1 fc-search-select-width mT10",attrs:{filterable:"",multiple:"",collapse:"",value:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?[1]:null,disabled:""}},[_c("el-option",{attrs:{label:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?_vm.config.data[_vm.fieldName].value.length+("asset"===_vm.config.data[_vm.fieldName].displayType?" Asset":" Space")+(_vm.config.data[_vm.fieldName].value.length>1?"s":"")+" selected":"",value:1}})],1),_c("i",{staticClass:"el-input__icon el-icon-search filter-spacce-condition-search",attrs:{slot:"suffix"},on:{click:function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",!0)}},slot:"suffix"})],1),_vm.config.data[_vm.fieldName].chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{showAsset:"asset"===_vm.config.data[_vm.fieldName].displayType,initialValues:{isIncludeResource:!0,selectedResources:_vm.config.data[_vm.fieldName].value.map((function(id){return{id:parseInt(id)}}))},visibility:_vm.config.data[_vm.fieldName].chooserVisibility,hideBanner:!0,selectedResource:_vm.selectedeResourceObj},on:{associate:function($event){return _vm.associateResource($event,_vm.config.data[_vm.fieldName])},"update:visibility":function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",$event)}}}):_vm._e()],1):_vm._e()]):_vm._e()]):_vm._e()})),1):_vm.config.data[_vm.fieldName].operator?_c("div",_vm._l(_vm.moduleMeta.operators[_vm.config.data[_vm.fieldName].operator],(function(label){return _vm.selectedlist(label,_vm.config.data[_vm.fieldName].operator)?_c("el-radio",{key:label.operatorId,staticClass:"fc-radio-btn pB10",attrs:{label:label.operatorId,value:label.operatorId},model:{value:_vm.config.data[_vm.fieldName].operatorId,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"operatorId",$$v)},expression:"config.data[fieldName].operatorId"}},[_vm._v(" "+_vm._s(label.operator)+" "),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",["select"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-select",{staticClass:"search-select-comp2 fc-tag mT10 search-border-left fc-search-select-width",attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"Select"},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},_vm._l(_vm.config.data[_vm.fieldName].options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",["string"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",staticStyle:{width:"100%"},attrs:{type:"text",autofocus:!0},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",["number"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"number",autofocus:!0},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[["asset","space"].includes(_vm.config.data[_vm.fieldName].displayType)&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border fc-tag mT10 fc-search-select-width",staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",collapse:"",value:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?[1]:null,disabled:""}},[_c("el-option",{attrs:{label:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?_vm.config.data[_vm.fieldName].value.length+("asset"===_vm.config.data[_vm.fieldName].displayType?" Asset":" Space")+(_vm.config.data[_vm.fieldName].value.length>1?"s":"")+" selected":"",value:1}})],1),_c("i",{staticClass:"el-input__icon el-icon-search filter-spacce-condition-search",attrs:{slot:"suffix"},on:{click:function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",!0)}},slot:"suffix"})],1),_vm.config.data[_vm.fieldName].chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{showAsset:"asset"===_vm.config.data[_vm.fieldName].displayType,initialValues:{isIncludeResource:!0,selectedResources:_vm.config.data[_vm.fieldName].value.map((function(id){return{id:parseInt(id)}}))},visibility:_vm.config.data[_vm.fieldName].chooserVisibility,hideBanner:!0,selectedResource:_vm.selectedeResourceObj},on:{associate:function($event){return _vm.associateResource($event,_vm.config.data[_vm.fieldName])},"update:visibility":function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",$event)}}}):_vm._e()],1):_vm._e()]):_vm._e()]):_vm._e()})),1):_vm._e()]):_c("div",[_vm._l(_vm.config.data[_vm.fieldName].options,(function(label4,value4){return _c("el-radio",{key:value4,staticClass:"fc-radio-btn pB10",attrs:{label:value4},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},[_vm._v(_vm._s(label4))])})),"date"!==_vm.config.data[_vm.fieldName].type||_vm.config.data[_vm.fieldName].hideDateRange?_vm._e():_c("el-radio",{attrs:{label:"20",value:"20"},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},[_vm._v("Custom")]),"date"===_vm.config.data[_vm.fieldName].type&&(_vm.config.data[_vm.fieldName].single?"20"===_vm.config.data[_vm.fieldName].value:_vm.config.data[_vm.fieldName].value.includes("20"))?_c("f-date-picker",{staticClass:"mT10 position-relative",attrs:{type:"datetimerange","value-format":"timestamp",format:"dd-MM-yyyy HH:mm"},on:{change:_vm.onFilterChanged},model:{value:_vm.config.data[_vm.fieldName].dateRange,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"dateRange",$$v)},expression:"config.data[fieldName].dateRange"}}):_vm._e()],2)])]),_c("div",{staticClass:"search-select-filter-btn"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold",on:{click:function($event){return _vm.apply()}}},[_vm._v("DONE")])],1)])],1):_vm._e()],2)]):_vm._e(),_vm.config.data[_vm.fieldName]&&_vm.config.data[_vm.fieldName].chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{showAsset:"asset"===_vm.config.data[_vm.fieldName].displayType,initialValues:{isIncludeResource:!0,selectedResources:_vm.config.data[_vm.fieldName].value.map((function(id){return{id:parseInt(id)}}))},visibility:_vm.config.data[_vm.fieldName].chooserVisibility,hideBanner:!0},on:{associate:function($event){return _vm.associateResource($event,_vm.config.data[_vm.fieldName])},"update:visibility":function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",$event)}}}):_vm._e(),_c("div"),_c("el-dialog",{staticStyle:{"z-index":"999999","overflow-y":"scroll !important"},attrs:{visible:_vm.showSaveDialog,"append-to-body":!0,fullscreen:!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog55 setup-dialog save-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.showSaveDialog=$event}}},[_c("div",{staticClass:"wo-save-dialog"},[_c("p",{staticClass:"setup-modal-title",staticStyle:{margin:"0"}},[_vm._v("Save as New View")]),_c("el-row",[_c("el-col",{attrs:{span:13}},[_c("el-input",{attrs:{placeholder:"Name",autofocus:!0},model:{value:_vm.newViewName,callback:function($$v){_vm.newViewName=$$v},expression:"newViewName"}})],1)],1),_vm.config.disableColumnCustomization?_vm._e():_c("div",[_c("div",{staticClass:"wo-save-subH"},[_vm._v("CUSTOMIZE COLUMNS")]),_c("div",{staticClass:"wo-save-greytxt"},[_vm._v(" Drag and drop columns that you wish to save in this view ")]),_c("div",{staticClass:"wo-rearrage-container"},[_c("div",{staticClass:"wo-rearrage-left wo-rearrange-box mR40"},[_c("p",{staticClass:"rearrange-box-header"},[_c("span",{staticClass:"rearrange-box-H"},[_vm._v("AVAILABLE COLUMNS")])]),_c("div",{staticClass:"rearrange-box-body"},[_vm.moduleMeta?_c("div",[_c("draggable",{staticClass:"dragArea",attrs:{options:{group:"people"}},model:{value:_vm.allColumns,callback:function($$v){_vm.allColumns=$$v},expression:"allColumns"}},_vm._l(_vm.availableColumns,(function(element,index){return element.id>"-1"?_c("div",{key:index,staticClass:"rearrange-el-block"},[_c("span",{staticClass:"rearrange-plus-icon",staticStyle:{cursor:"pointer"},on:{click:function($event){return _vm.addcolumn(element,index,_vm.availableColumns)}}},[_vm._v("+")]),_c("span",{staticClass:"rearrange-txt"},[_vm._v(_vm._s(element.label))]),_c("span",{staticStyle:{"text-align":"right",float:"right","margin-right":"4px","margin-top":"4px"}},[_c("img",{staticClass:"icon-right",staticStyle:{height:"16px"},attrs:{src:__webpack_require__(57197)}})])]):_vm._e()})),0)],1):_vm._e()])]),_c("div",{staticClass:"wo-rearrage-right wo-rearrange-box"},[_c("p",{staticClass:"rearrange-box-header"},[_c("span",{staticClass:"rearrange-box-H"},[_vm._v("SELECTED COLUMNS")])]),_c("div",{staticClass:"rearrange-box-body"},[_vm.moduleMeta?_c("div",[_vm._l(_vm.fixedSelectedCol,(function(col,index){return _c("div",{key:index,staticClass:"rearrange-el-block",staticStyle:{border:"solid 1px #f0f0f0"}},[_c("span",{staticClass:"rearrange-txt2",staticStyle:{opacity:"0.5"}},[_vm._v(" "+_vm._s(col.label)+" ")])])})),_c("draggable",{staticClass:"dragArea",attrs:{options:{group:"people"}},model:{value:_vm.selectedColumns,callback:function($$v){_vm.selectedColumns=$$v},expression:"selectedColumns"}},_vm._l(_vm.selectedColumns,(function(element,index){return element.id>"-1"?_c("div",{key:index,staticClass:"rearrange-el-block"},[_c("span",[_c("i",{staticClass:"el-icon-close rearrange-plus-icon3",staticStyle:{"font-size":"16px","font-weight":"600",cursor:"pointer"},on:{click:function($event){return _vm.removeColumn(element,index,_vm.selectedColumns)}}})]),_c("span",{staticClass:"rearrange-txt2"},[_vm._v(_vm._s(element.label))]),_c("span",{staticStyle:{"text-align":"right",float:"right","margin-right":"4px","margin-top":"4px"}},[_c("img",{staticClass:"icon-right",staticStyle:{height:"16px"},attrs:{src:__webpack_require__(57197)}})])]):_vm._e()})),0)],2):_vm._e()])])])]),_c("div",{staticClass:"wo-save-subH"},[_vm._v("FILTERS")]),Object.keys(_vm.filtersApplies).length>"0"?_c("div",{staticClass:"fc-grey-text-input-label pB10"},[_vm._v(" Existing Filters ")]):_vm._e(),Object.keys(_vm.filtersApplies).length>"0"?_c("div",[_c("new-tag",{staticClass:"saveas-newtag",attrs:{config:_vm.config,filters:_vm.filtersApplies,showCloseIcon:!1}})],1):_vm._e(),null!==_vm.appliedFilters?_c("div",[_c("div",{staticClass:"fc-grey-text-input-label pB10 pT10"},[_vm._v("New Filters")]),_c("div",[_c("new-tag",{staticClass:"saveas-newtag",attrs:{config:_vm.config,filters:_vm.appliedFilters,showFilterAdd:_vm.showAddFilter,showCloseIcon:!0}})],1)]):_vm._e(),_c("div",{staticClass:"wo-save-subH"},[_vm._v("SHARING PERMISSIONS")]),_c("el-row",{staticStyle:{margin:"0px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"35px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"add"},[_c("el-radio",{staticClass:"newradio",attrs:{label:1},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v("Only Me")]),_c("el-radio",{staticClass:"newradio",attrs:{label:2},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v("Everyone")]),_c("el-radio",{staticClass:"newradio",attrs:{label:3},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v("Specific")])],1)])],1),3===_vm.shareTo?_c("el-row",{staticClass:"mT30 el-select-block"},[_c("el-col",{attrs:{span:24}},[_c("label",{staticClass:"sharing-label"},[_vm._v("Team")]),_c("el-select",{staticClass:"width60",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.sharedGroups,callback:function($$v){_vm.sharedGroups=$$v},expression:"sharedGroups"}},_vm._l(_vm.groups,(function(group){return _c("el-option",{key:group.id,attrs:{label:group.name,value:group.id}})})),1)],1)],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticClass:"mT30 el-select-block"},[_c("el-col",{attrs:{span:24}},[_c("label",{staticClass:"sharing-label"},[_vm._v("Role")]),_c("el-select",{staticClass:"width60",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:_vm.$t("common.wo_report.choose_roles")},model:{value:_vm.sharedRoles,callback:function($$v){_vm.sharedRoles=$$v},expression:"sharedRoles"}},_vm._l(_vm.roles,(function(role){return _c("el-option",{key:role.id,attrs:{label:role.name,value:role.id}})})),1)],1)],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticClass:"mT30 el-select-block"},[_c("el-col",{attrs:{span:24}},[_c("label",{staticClass:"sharing-label"},[_vm._v("Staff")]),_c("el-select",{staticClass:"width60",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:_vm.$t("common.wo_report.choose_teams")},model:{value:_vm.sharedUsers,callback:function($$v){_vm.sharedUsers=$$v},expression:"sharedUsers"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)],1):_vm._e()],1),_c("span",{staticClass:"dialog-footer modal-footer-fixed",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showSaveDialog=!1}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.newView()}}},[_vm._v("Save")])],1)])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),esm_typeof=__webpack_require__(103336),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(212826),__webpack_require__(648324),__webpack_require__(857267),__webpack_require__(162506),__webpack_require__(634338),__webpack_require__(420629)),NewTag=__webpack_require__(588633),ViewMixin=__webpack_require__(453877),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),SpaceAssetMultiChooser=__webpack_require__(673362),OutsideClick=__webpack_require__(21864),FDatePicker=__webpack_require__(358551),validation=__webpack_require__(990260),FLookupFieldWrapper=__webpack_require__(201117),picklist=__webpack_require__(961358),spaceFields=["space","visitedSpace"],NewSearchvue_type_script_lang_js={mixins:[ViewMixin/* default */.Z],props:["sortConfig","showSearch","config","saveAs","save","resetFilters","defaultFilter","moduleName","loadViews","includeAllMetaFields"],data:function(){return{configData:{},states:[],existingFilter:{},excludeOperators:[74,75,76,77,78,79,35,87,52,53],filtersApplies:{},nonSelectableColumns:["assignmentGroup","asset","week","hour","month","day","localId","id","photoId","space","hideToCustomer","parentAssetId","moduleState","stateFlowId","id"],excludeCustomfieldsForSpecificModules:["readingrule","preventivemaintenance"],selectedeResourceObj:[],showAddFilter:!0,configs:this.$helpers.cloneObject(this.config),showFilterCondition:!1,showingLookupWizard:!1,showSearchfilter:!0,chooserVisibility:!1,selectOperatotr:!1,fieldName:this.defaultFilter,formModel:{},filterApplied:!1,showSaveDialog:!1,select:"",radio2:"",allColumns:[],availableColumns:[],selectedColumns:[],loading:!1,operators:{subject:"STRING",title:"STRING",primaryContactName:"STRING",qrVal:"STRING",id:"STRING",description:"STRING",name:"STRING",primaryContactEmail:"STRING",companyName:"STRING",primaryContactPhone:"STRING",tenant:"LOOKUP",vendor:"LOOKUP",assetCategory:"LOOKUP",kpiCategory:"LOOKUP",assetDepartment:"LOOKUP",siteId:"LOOKUP",assetType:"LOOKUP",category:"LOOKUP",dueDate:"DATE",actualWorkEnd:"DATE",space:"LOOKUP",visitedSpace:"LOOKUP",asset:"LOOKUP",sourceType:"NUMBER",ticketType:"LOOKUP",typeId:"LOOKUP",status:"LOOKUP",moduleState:"LOOKUP",assignedTo:"LOOKUP",registeredBy:"LOOKUP",executedBy:"LOOKUP",frequency:"NUMBER",createdTime:"LOOKUP",tasks:"LOOKUP",priority:"LOOKUP",alarmType:"NUMBER",acknowledgedBy:"LOOKUP",severity:"LOOKUP",previousSeverity:"LOOKUP",readingAlarmCategory:"LOOKUP",readingrule:"LOOKUP",faultType:"LOOKUP"},statusFieldNotNeeded:["readingrule","newreadingalarm"],newViewName:"",selectedResourceName:null,shareTo:2,sharedGroups:[],sharedUsers:[],sharedRoles:[],viewSharing:[]}},components:{draggable:vuedraggable_umd_default(),SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,OutsideClick:OutsideClick/* default */.Z,NewTag:NewTag/* default */.Z,FDatePicker:FDatePicker/* default */.Z,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z},watch:{appliedFilters:function(val){val?!Object.keys(val).length||this.filterApplied&&this.config.saveView||(this.filterApplied=!0):this.filterApplied&&this.reset(null,!0),this.clearLookUpFilter(val)},saveAs:{handler:function(newData,oldData){newData!==oldData&&(this.init(),this.showSaveDialog=!0)},deep:!0},resetFilters:{handler:function(newData,oldData){newData!==oldData&&(this.reset(null,!1),this.resetValues())},deep:!0},save:{handler:function(newData,oldData){newData!==oldData&&(this.init(),this.confirmationEditViews())},deep:!0},fieldName:{handler:function(newData,oldData){newData!==oldData&&this.searchchange()},deep:!0},viewFilters:function(){
// this.reset(null, true)
},shareTo:function(val,oldVal){3===val&&this.sharedUsers.push(this.userDetails.id)},allFields:{handler:function(val){this.allColumns=this.$helpers.cloneObject(val),this.checkColumns(),this.setOptions()},deep:!0},viewColumns:{handler:function(){this.availableColumns=[],this.selectedColumns=[],this.checkColumns()}},showSearch:function(val){val&&(this.showSearchfilter=!0)},defaultFilter:function(val){this.fieldName=val},moduleName:{handler:function(newData,oldData){newData!==oldData&&this.constructCustomObject()},deep:!0}},mounted:function(){this.allColumns=this.$helpers.cloneObject(this.allFields),this.checkColumns(),this.constructCustomObject(),this.appliedFilters&&(this.filterApplied=!0)},created:function(){var _this=this;Promise.all([this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("view/loadModuleMeta",this.moduleName),this.$store.dispatch("loadReadingAlarmCategory"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAssetDepartment"),this.$store.dispatch("loadAssetType"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadInventoryCategory"),this.$store.dispatch("loadRoles"),this.$store.dispatch("loadSites"),this.$store.dispatch("loadGroups"),this.getStateList()]).then((function(){_this.statusFieldNotNeeded.includes(_this.moduleName)||_this.constructStatusField(),_this.setOptions()}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo},users:function(state){return state.users},groups:function(state){return state.groups},ticketpriority:function(state){return state.ticketPriority},ticketcategory:function(state){return state.ticketCategory},readingAlarmCategory:function(state){return state.readingAlarmCategory},alarmseverity:function(state){return state.alarmSeverity},assetcategory:function(state){return state.assetCategory},inventoryCategory:function(state){return state.inventoryCategory},siteList:function(state){return state.sites},assetdepartment:function(state){return state.assetDepartment},assettype:function(state){return state.assetType},viewDetail:function(state){return state.view.currentViewDetail},userDetails:function(state){return state.account.user},roles:function(state){return state.roles}})),{},{ticketcategoryPicklist:function(){return this.ticketcategory.map((function(d){return d.displayName}))}},(0,vuex_esm/* mapGetters */.Se)(["getTicketTypePickList","getCurrentUser"])),{},{tickettype:function(){return this.getTicketTypePickList()},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:"all"},appliedFilters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},allFields:function(){var _this2=this,obj=[];return this.moduleMeta&&this.moduleMeta.fields&&(obj=this.moduleMeta.fields.filter((function(field){return(_this2.config.availableColumns||-1!==_this2.config.availableColumns.indexOf(field.name)||!field.default)&&(!_this2.config.fixedCols||!_this2.config.fixedCols.includes(field.name))})).map((function(field,idx){return{id:field.id,label:field.columnDisplayName||field.displayName,key:field.name||""}}))),obj},fixedSelectedCol:function(){var _this3=this;return this.config.fixedCols&&this.moduleMeta.fields?this.moduleMeta.fields.filter((function(field){return _this3.config.fixedCols.includes(field.name)})).map((function(field){return{id:field.id,label:field.columnDisplayName||field.displayName}})):[]},viewFilters:function(){return this.viewDetail?this.viewDetail.filters:null},includeParentFilter:function(){return this.$route.query.includeParentFilter&&("true"===this.$route.query.includeParentFilter||!0===this.$route.query.includeParentFilter)}}),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({setLookUpFilter:function(filter,fieldName){(0,validation/* isEmpty */.xb)(filter)||(this.formModel[fieldName].label=filter.label,this.apply()),this.showingLookupWizard=!1},clearLookUpFilter:function(val){var _this4=this,filters=Object.keys(val||{}),formModelKey=Object.keys(this.formModel||{});(0,validation/* isEmpty */.xb)(filters)||(0,validation/* isEmpty */.xb)(formModelKey)||formModelKey.forEach((function(fval){filters.includes(fval)?filters.includes(fval)&&(_this4.formModel[fval].id=(0,validation/* isEmpty */.xb)(val[fval][0])||(0,validation/* isEmpty */.xb)(val[fval][0].value)?"":parseInt(val[fval][0].value[0]),_this4.formModel[fval].label=(0,validation/* isEmpty */.xb)(val[fval][0])||(0,validation/* isEmpty */.xb)(val[fval][0].selectedLabel)?"":val[fval][0].selectedLabel):(_this4.formModel[fval].id="",_this4.formModel[fval].label="")}))},getStateList:function(){var _this5=this;return this.$http.get("v2/state/list?parentModuleName=".concat(this.moduleName)).then((function(_ref){var data=_ref.data;_this5.states=data.result.status||[]})).catch((function(_ref2){var _ref2$message=_ref2.message,message=void 0===_ref2$message?"Error loading states":_ref2$message;_this5.$message.error(message)}))},constructStatusField:function(){if(!(0,validation/* isEmpty */.xb)(this.moduleMeta)&&!(0,validation/* isEmpty */.xb)(this.moduleMeta.module)&&(0,validation/* isEmpty */.xb)(this.config.data.moduleState)){var stateOptions={};if((0,validation/* isEmpty */.xb)(this.states)||this.states.forEach((function(state){stateOptions[state.id]=state.displayName})),(this.moduleMeta.module.stateFlowEnabled||!this.moduleMeta.module.custom)&&!this.config.excludeModuleStateField){var stateObj={label:"Status",displayType:"select",options:stateOptions,value:[],key:"moduleState"};this.$set(this.config.data,"moduleState",stateObj)}}},constructCustomObject:function(){var _this6=this,a={stringObj:{label:"",displayType:"string",value:[]},dateObj:{label:"",displayType:"select",dateRange:[],type:"date",customdate:!0,options:{22:"Today",26:"Till Yesterday",31:"This Week",30:"Last Week","2_50":"Last 2 Weeks",32:"Next Week","2_61":"Next 2 Days","7_61":"Next 7 Days",28:"This Month",27:"Last Month"},value:""}};this.moduleName&&!this.excludeCustomfieldsForSpecificModules.includes(this.moduleName)&&this.$store.dispatch("view/loadModuleMeta",this.moduleName).then((function(){var metaObject=_this6.moduleMeta;if(metaObject&&metaObject.fields)for(var _loop=function(){var values;if(1!=metaObject.fields[i].default&&"undefined"===typeof _this6.includeAllMetaFields||_this6.includeAllMetaFields){var key="";if(key=metaObject.fields[i].name,values=_this6.$helpers.cloneObject(a.stringObj),"DATE"==metaObject.fields[i].dataTypeEnum._name||"DATE_TIME"==metaObject.fields[i].dataTypeEnum._name)values=_this6.$helpers.cloneObject(a.dateObj),values.label=metaObject.fields[i].displayName,values.default=metaObject.fields[i].default,values.operator=metaObject.fields[i].dataTypeEnum._name,values["key"]=metaObject.fields[i].name,_this6.$set(_this6.config.data,key,values);else if("STRING"==metaObject.fields[i].dataTypeEnum._name)values.label=metaObject.fields[i].displayName,values.displayType="string",values.default=metaObject.fields[i].default,values.operator=metaObject.fields[i].dataTypeEnum._name,values.operatorId=5,_this6.$set(_this6.config.data,key,values);else if("BOOLEAN"==metaObject.fields[i].dataTypeEnum._name)values.label=metaObject.fields[i].displayName,values.displayType="select",values.type="Boolean",values.default=metaObject.fields[i].default,values.operator=metaObject.fields[i].dataTypeEnum._name,values.options={true:metaObject.fields[i].trueVal||"Yes",false:metaObject.fields[i].falseVal||"No"},_this6.$set(values,"value",""),values["key"]=metaObject.fields[i].name,_this6.$set(_this6.config.data,key,values);else if("NUMBER"==metaObject.fields[i].dataTypeEnum._name)values.label=metaObject.fields[i].displayName,values.displayType="number",values.default=metaObject.fields[i].default,values.operator=metaObject.fields[i].dataTypeEnum._name,values.operatorId=9,_this6.$set(_this6.config.data,key,values);else if("LOOKUP"==metaObject.fields[i].dataTypeEnum._name){if(values.label=metaObject.fields[i].displayName,values.displayType="lookup",metaObject.fields[i].specialType&&"users"===metaObject.fields[i].specialType){var userOptions={};_this6.users.forEach((function(user){userOptions[user.id]=user.name})),values.specialType,values.displayType="select",values.options=userOptions}values.default=metaObject.fields[i].default,(0,validation/* isEmpty */.xb)(metaObject.fields[i].lookupModule)||(0,validation/* isEmpty */.xb)(metaObject.fields[i].lookupModule.name)||(_this6.$set(values,"lookupModuleName",metaObject.fields[i].lookupModule.name),_this6.$set(_this6.operators,key,"LOOKUP")),values.isCustomFieldLookup=!0,values.operator=metaObject.fields[i].dataTypeEnum._name,values.operatorId=36,_this6.$set(_this6.config.data,key,values);var lookupObj={id:"",label:""};_this6.$set(_this6.formModel,key,lookupObj)}else"ENUM"==metaObject.fields[i].dataTypeEnum._name&&(values.label=metaObject.fields[i].displayName,values.default=metaObject.fields[i].default,values.displayType="select",values.operatorId=54,values.operator=metaObject.fields[i].dataTypeEnum._name,values.type="enum",values.value=[],values.options=metaObject.fields[i].enumMap,values["key"]=metaObject.fields[i].name,_this6.$set(_this6.config.data,key,values))}},i=0;i<metaObject.fields.length;i++)_loop()})),this.dataConfig()},filterApply:function(){"20"!==this.config.data[this.fieldName].value?this.apply():this.$refs["fdate"].focus()},outsideClick:function(){this.showFilterCondition=!1}},(0,vuex_esm/* mapActions */.nv)({saveNewView:"view/saveNewView",editView:"view/editView"})),{},{confirmationEditViews:function(){var self=this;self.$dialog.confirm({title:"Edit View",message:"Are you sure you want to EDIT the view?",rbDanger:!0,rbLabel:"Edit"}).then((function(value){self.editViews()}))},newView:function(){
// if (this.viewDetail.isDefault === false) {
//   this.init()
//   this.saveAsNewView()
// } else {
this.init(),this.saveAsNewView()},selectedlist:function(label,operatorType){return("BUILDING_IS"!==label._name||"space"===this.fieldName)&&("LOOKUP"!==label._name&&!this.excludeOperators.includes(label.operatorId))},selectOperatorDialog:function(){this.showFilterCondition=!0,("sourceType"===this.fieldName||"alarmType"===this.fieldName||this.config.data[this.fieldName].operator&&"NUMBER"===this.config.data[this.fieldName].operator)&&this.$set(this.config.data[this.fieldName],"operatorId",9),this.config.data[this.fieldName].operatorId||"sourceType"===this.fieldName?this.config.data[this.fieldName].operatorId&&this.$set(this.config.data[this.fieldName],"operatorId",this.appliedFilters[this.fieldName].operatorId):this.$set(this.config.data[this.fieldName],"operatorId",spaceFields.includes(this.fieldName)?38:"subject"===this.fieldName||"name"===this.fieldName||"title"===this.fieldName||this.config.data[this.fieldName].operator&&"STRING"===this.config.data[this.fieldName].operator?5:36)},searchchange:function(){var data=this.config.data;"tenant"===this.fieldName&&this.loadPickList("tenant",data.tenant),"client"===this.fieldName&&this.loadPickList("client",data.client),"vendor"===this.fieldName&&this.loadPickList("vendors",data.vendor),"itemType"===this.fieldName&&this.loadPickList("itemTypes",data.itemType),"toolType"===this.fieldName&&this.loadPickList("toolTypes",data.toolType),"storeRoom"===this.fieldName&&this.loadPickList("storeRoom",data.storeRoom),"fromStore"===this.fieldName&&this.loadPickList("storeRoom",data.fromStore),"toStore"===this.fieldName&&this.loadPickList("storeRoom",data.toStore),"visitor"===this.fieldName&&this.loadPickList("visitor",data.visitor),"visitorType"===this.fieldName&&this.loadPickList("visitorType",data.visitorType),"serviceRequest"===this.moduleName&&"urgency"===this.fieldName&&this.loadPickList("servicerequestpriority",data.urgency),"rule"===this.fieldName&&this.loadPickList("readingrule",data.rule),"building"===this.fieldName&&this.loadPickList("building",data.building)},escapeToHide:function(){},clearFields:function(fieldName){this.config.data[fieldName].value="subject"===fieldName||"name"===fieldName||"title"===fieldName?"":[]},dataConfig:function(){this.configData=this.config},editOldView:function(){this.apply(),this.editViews()},operatorSelect:function(){this.selectOperatotr=!this.selectOperatotr},apply:function(){var _this7=this;this.$emit("hideSearch");var filters={},lookupFilter={},_loop2=function(){
// if (typeof(this.config.data[fieldName].isCustomFieldLookup) === "undefined" || !this.config.data[fieldName].isCustomFieldLookup) {
// if (fieldName === 'rule') {
//   this.config.data.rule.push({
//     moduleName: 'alarmRaeding',
//   })
// }
var field=_this7.config.data[fieldName],key=field.key||fieldName;if((1===field.operatorId||2===field.operatorId||field.value)&&(1===field.operatorId||2===field.operatorId||!Array.isArray(field.value)||field.value.length))if(field.customdate)_this7.setCustomDateFilters(filters,fieldName);else{var filterObj={operatorId:field.operatorId||(spaceFields.includes(fieldName)?38:"subject"===fieldName||_this7.config.data[_this7.fieldName].operator&&"STRING"===_this7.config.data[_this7.fieldName].operator||"name"===fieldName||"title"===fieldName?5:"sourceType"===fieldName||_this7.config.data[fieldName].operator&&"NUMBER"===_this7.config.data[fieldName].operator||"alarmType"===fieldName?9:"isAcknowledged"===fieldName||"connected"===fieldName?15:36)};if(1!==field.operatorId&&2!==field.operatorId||("subject"===fieldName||"name"===fieldName||"title"===fieldName||_this7.config.data[_this7.fieldName].operator&&"STRING"===_this7.config.data[_this7.fieldName].operator?field.value="":field.value=[]),"assignedTo"===fieldName){var users=[],groups=[];field.value.forEach((function(user){-1!==user.indexOf("_group")?groups.push(user.substring(0,user.indexOf("_group"))):users.push(user)})),users.length&&(filterObj.value=users),groups.length&&(filterObj.value=groups,key="assignedToId"===key?"assignmentGroupId":"assignmentGroup"),filters[key]=filterObj}else filterObj.value=Array.isArray(field.value)?field.value.map((function(val){return val+""})):[field.value],spaceFields.includes(fieldName)||"asset"===fieldName?(key=field.key||"resource",filters[key]||(filters[key]=[]),filters[key].push(filterObj)):filters[key]=filterObj}};for(var fieldName in this.config.data)_loop2();if(Object.keys(this.formModel).length)for(var key in this.formModel)if(this.formModel[key].id){var value=[{operatorId:this.config.data[key]&&this.config.data[key].operatorId?this.config.data[key].operatorId:36,value:[this.formModel[key].id?this.formModel[key].id.toString():""],selectedLabel:this.formModel[key].label?this.formModel[key].label:""}];this.$set(lookupFilter,key,value)}if(Object.keys(filters).length>"0"||Object.keys(this.formModel).length){var queryParam={search:JSON.stringify(filters)};this.config.includeParentCriteria&&(queryParam.includeParentFilter=!0),this.$route.query.view&&(queryParam.view=this.$helpers.cloneObject(this.$route.query.view)),filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),lookupFilter),(0,validation/* isEmpty */.xb)(filters)||this.$router.replace({query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{search:JSON.stringify(filters),includeParentFilter:!0,page:1})})}this.filterApplied=!0,this.showFilterCondition=!1,(0,validation/* isEmpty */.xb)(this.$refs["dropdown"])||this.$refs.dropdown.blur()},applyFilter:function(){var _this8=this,filters={},_loop3=function(){
// if (fieldName === 'rule') {
//   this.configs.data.rule.push({
//     moduleName: 'alarmRaeding',
//   })
// }
var field=_this8.configs.data[fieldName],key=field.key||fieldName;if((1===field.operatorId||2===field.operatorId||field.value)&&(1===field.operatorId||2===field.operatorId||!Array.isArray(field.value)||field.value.length))if(field.customdate)_this8.setCustomDateFilters(filters,fieldName);else{var filterObj={operatorId:field.operatorId||(spaceFields.includes(fieldName)?38:"subject"===fieldName||_this8.config.data[_this8.fieldName].operator&&"STRING"===_this8.config.data[_this8.fieldName].operator||"name"===fieldName||"title"===fieldName?5:"sourceType"===fieldName||_this8.config.data[fieldName].operator&&"NUMBER"===_this8.config.data[fieldName].operator?9:"isAcknowledged"===fieldName||"connected"===fieldName?15:36)};if(1!==field.operatorId&&2!==field.operatorId||("subject"===fieldName||"name"===fieldName||"title"===fieldName||_this8.config.data[_this8.fieldName].operator&&"STRING"===_this8.config.data[_this8.fieldName].operator?field.value="":field.value=[]),"assignedTo"===fieldName){var users=[],groups=[];field.value.forEach((function(user){-1!==user.indexOf("_group")?groups.push(user.substring(0,user.indexOf("_group"))):users.push(user)})),users.length&&(filterObj.value=users),groups.length&&(filterObj.value=groups,key="assignedToId"===key?"assignmentGroupId":"assignmentGroup"),filters[key]=filterObj}else filterObj.value=Array.isArray(field.value)?field.value.map((function(val){return val+""})):[field.value],spaceFields.includes(fieldName)||"asset"===fieldName?(key=field.key||"resource",filters[key]||(filters[key]=[]),filters[key].push(filterObj)):filters[key]=filterObj}};for(var fieldName in this.configs.data)_loop3();Object.keys(filters).length>"0"&&(this.filtersApplies=filters)},closeDialog:function(){this.$emit("update:visibility",!1)},reset:function(event,resetValueOnly){for(var field in this.filterApplied=!1,this.config.data){var data=this.config.data[field];data.value=data.single?"":[],delete data.operatorId}
// setting height back to normal for select tags
var elem=document.getElementById("new-view-filter");if(elem&&elem.querySelectorAll(".el-input__inner").forEach((function(node){node.style.removeProperty("height")})),!resetValueOnly&&this.appliedFilters){var querry={};this.$route.query.mapview&&(querry.mapview=!0),this.$router.push({path:this.$route.path,query:querry})}},addcolumn:function(element,index,allColumns){this.selectedColumns.push(element),allColumns.splice(index,1)},removeColumn:function(element,index,selectedColumns){this.availableColumns.push(element),selectedColumns.splice(index,1)},saveAsNewView:function(){var self=this;if(this.newViewName&&(this.config.disableColumnCustomization||this.selectedColumns.length)){this.applySharing();var fields=null;if(!this.config.disableColumnCustomization){var columns=[].concat((0,toConsumableArray/* default */.Z)(this.fixedSelectedCol),(0,toConsumableArray/* default */.Z)(this.selectedColumns));fields=columns.map((function(col){return{fieldId:col.id,columnDisplayName:col.label,fieldName:col.key||""}}))}if(this.loadViews){var a={moduleName:this.moduleName,view:{displayName:this.newViewName,fields:fields,includeParentCriteria:!0,filtersJson:JSON.stringify(this.appliedFilters),viewSharing:this.viewSharing},parentView:this.currentView};self.$http.post("/view/add",a).then((function(response){self.showSaveDialog=!1,"object"===(0,esm_typeof/* default */.Z)(response.data)?(self.resetValues(),self.$router.push({path:self.config.path+response.data.name,query:{}}),self.$nextTick((function(){self.$router.push({path:self.config.path+response.data.name,query:{}})})),self.loadView(),self.$message({message:"View created successfully!",type:"success"})):self.$message({message:"View creation failed!",type:"error"})}))}else this.saveNewView({moduleName:this.moduleName,view:{displayName:this.newViewName,fields:fields,includeParentCriteria:!0,filtersJson:JSON.stringify(this.appliedFilters),viewSharing:this.viewSharing},parentView:this.currentView}).then((function(data){self.showSaveDialog=!1,self.resetValues(),self.$router.push({path:self.config.path+data.name,query:{}}),self.$nextTick((function(){self.$router.push({path:self.config.path+data.name,query:{}})})),self.$message({message:"View created successfully!",type:"success"})})).catch((function(){self.$message({message:"View creation failed!",type:"error"})}))}},loadView:function(){this.$emit("loadView")},applySharing:function(){var self=this;if(this.viewSharing=[],1===self.shareTo)this.viewSharing.push({type:1,userId:self.getCurrentUser().ouid});else if(3===self.shareTo){if(self.sharedUsers.length>0){this.viewSharing.push({type:1,userId:self.getCurrentUser().ouid});for(var i=0;i<self.sharedUsers.length;i++)self.sharedUsers[i]!==self.getCurrentUser().ouid&&this.viewSharing.push({type:1,userId:self.sharedUsers[i]})}if(self.sharedRoles.length>0)for(var _i=0;_i<self.sharedRoles.length;_i++)this.viewSharing.push({type:2,roleId:self.sharedRoles[_i]});if(self.sharedGroups.length>0)for(var _i2=0;_i2<self.sharedGroups.length;_i2++)this.viewSharing.push({type:3,groupId:self.sharedGroups[_i2]})}},onFilterChanged:function(value){this.apply(),this.filterApplied&&(this.filterApplied=!1)},isDateOperatorWithValue:function(operatorId){
// TODO get value from date operator
return[39,40,41,50,59,60,61].includes(operatorId)},loadPickList:function(moduleName,field){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!field.options||!Object.keys(field.options).length){_context.next=2;break}return _context.abrupt("return");case 2:return _this9.picklistOptions={},_context.next=5,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 5:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this9.$message.error(error.message||"Error Occured"):_this9.$set(field,"options",options);case 9:case"end":return _context.stop()}}),_callee)})))()},setCustomDateFilters:function(filters,fieldName){var _this10=this,constructDateFilter=function(val){val=val.split("_");var operatorId=1===val.length?parseInt(val[0]):parseInt(val[1]),filter={operatorId:operatorId};if(20===operatorId){var dateRange=_this10.config.data[fieldName].dateRange;if(!dateRange||!dateRange.length)return!1;filter.value=_this10.config.data[fieldName].dateRange.map((function(date){return date+""}))}else _this10.isDateOperatorWithValue(operatorId)&&(filter.value=[val[0]]);return filter},filterVal=this.config.data[fieldName].value,key=this.config.data[fieldName].key||fieldName;if(Array.isArray(filterVal))filters[key]=[],filterVal.forEach((function(fval){var filter=constructDateFilter(fval);filter&&filters[key].push(filter)}));else{var filter=constructDateFilter(filterVal);filter&&(filters[key]=filter)}},formatOptions:function(field,list){var _this11=this,data=this.config.data;data[field]&&list&&list.forEach((function(val){_this11.$set(data[field].options,val.id,val.name)}))},associateResource:function(resource,field){this.$set(field,"chooserVisibility",!1),field.value=resource.resourceList?resource.resourceList.map((function(res){return res.id})):[],this.onFilterChanged(),this.apply()},setFieldValue:function(filterVal,field,fieldKey){filterVal&&("assignmentGroup"===fieldKey||"assignedTo"===fieldKey?(filterVal="assignmentGroup"===fieldKey?filterVal.filter((function(id){return"-100"!==id})).map((function(id){return id+"_group"})):filterVal,field.value&&!field.single?field.value=[].concat((0,toConsumableArray/* default */.Z)(field.value),(0,toConsumableArray/* default */.Z)(filterVal)):field.value=filterVal):field.value=filterVal)},setOptions:function(){var data=this.config.data,userOptions={};if(this.users.forEach((function(user){userOptions[user.id]=user.name})),data.assignedTo&&(data.assignedTo.options=userOptions,(0,validation/* isEmpty */.xb)(this.groups)||this.groups.forEach((function(group){data.assignedTo.options[group.id+"_group"]=group.name}))),data.executedBy&&(data.executedBy.options=userOptions,(0,validation/* isEmpty */.xb)(this.groups)||this.groups.forEach((function(group){data.executedBy.options[group.id+"_group"]=group.name}))),data.issuedTo&&(data.issuedTo.options=userOptions),data.issuedBy&&(data.issuedBy.options=userOptions),data.requestedBy&&(data.requestedBy.options=userOptions),data.registeredBy&&(data.registeredBy.options=userOptions),data.requestedFor&&(data.requestedFor.options=userOptions),data.host&&(data.host.options=userOptions),data.inviteHost&&(data.inviteHost.options=userOptions),
// Adding this since Main field is lookup
"item"===this.moduleName&&data.itemType&&this.loadPickList("itemTypes",data.itemType),"tool"===this.moduleName&&data.toolType&&this.loadPickList("toolTypes",data.toolType),data.priority&&((0,validation/* isEmpty */.xb)(this.ticketpriority)||this.ticketpriority.forEach((function(prior){data.priority.options[prior.id]=prior.displayName}))),data.siteId&&this.siteList&&this.siteList.forEach((function(sit){data.siteId.options[sit.id]=sit.name})),data.severity&&((0,validation/* isEmpty */.xb)(this.alarmseverity)||this.alarmseverity.forEach((function(severity){data.severity.options[severity.id]=severity.severity,data.previousSeverity&&(data.previousSeverity.options[severity.id]=severity.severity)}))),data.acknowledgedBy&&(data.acknowledgedBy.options=userOptions),data.clearedBy&&(data.clearedBy.options=userOptions),data.severity&&((0,validation/* isEmpty */.xb)(this.alarmseverity)||this.alarmseverity.forEach((function(severity){data.severity.options[severity.id]=severity.severity}))),data.ticketType&&((0,validation/* isEmpty */.xb)(this.tickettype)||(data.ticketType.options=this.tickettype)),data.frequency&&(data.frequency.options=Object.assign({},{0:"Once"},this.$constants.FACILIO_FREQUENCY)),data.faultType&&this.moduleMeta&&null!=this.moduleMeta.fields){var faultFields=this.moduleMeta.fields.filter((function(d){return"faultType"===d.name}));data.faultType.options=faultFields[0].enumMap}this.formatOptions("category",this.ticketcategory),this.formatOptions("readingAlarmCategory",this.readingAlarmCategory),this.formatOptions("assetCategory",this.assetcategory),this.formatOptions("assetDepartment",this.assetdepartment),this.formatOptions("assetType",this.assettype),this.formatOptions("inventoryCategory",this.inventoryCategory)},editViews:function(){var _this12=this,data={moduleName:this.config.moduleName,view:{name:this.viewDetail.name,id:this.viewDetail.id}},finalFilteredJsonWithParentFilters={};finalFilteredJsonWithParentFilters=this.filtersApplies?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.filtersApplies),this.appliedFilters):this.appliedFilters,data.view.filtersJson=JSON.stringify(finalFilteredJsonWithParentFilters),this.editView(data).then((function(data){_this12.showSaveDialog=!1,_this12.resetValues(),_this12.$nextTick((function(){_this12.$router.push({path:_this12.config.path+data.view.name,query:{}})})),_this12.$message.success("View Edited successfully!")})).catch((function(error){_this12.$message.error(error.message)}))},queryHandler:function(){this.query=null,this.reset()},resetValues:function(){if(this.filterApplied=!1,this.allColumns=this.$helpers.cloneObject(this.allFields),this.selectedColumns=[],this.newViewName="",this.sharedGroups=[],this.sharedUsers=[],this.sharedRoles=[],this.viewSharing=[],!(0,validation/* isEmpty */.xb)(this.formModel))for(var key in this.formModel)this.formModel[key]={id:"",label:""}},getLookupValue:function(field,filter,fieldName){var _this13=this,name=Object.keys(filter.value)[0],lookupFilter=filter.value[name],operatorId=lookupFilter.operatorId,valuesToCheck=lookupFilter.value,optionsToSelect=[],idsArr=Object.keys(this.config.data[fieldName].options);
// TODO needs to check more operators and support multiple lookups
// TODO needs to get operatorid from metainfo
// All the option values for the field
return"typeCode"===name&&"status"===fieldName&&(valuesToCheck=["Closed"],"1"===lookupFilter.value[0]&&(operatorId=4)),idsArr.forEach((function(id){
// TODO check more operator ids
valuesToCheck.includes(_this13.config.data[fieldName].options[id])?4!==operatorId&&optionsToSelect.push(id):4===operatorId&&optionsToSelect.push(id)})),optionsToSelect},getValuesFromFilter:function(field,filter,fieldName){var value;
// TODO temporary...needs to improve
if(35===filter.operatorId)value=this.getLookupValue(field,filter,fieldName);else if(15===filter.operatorId||15===field.operatorId)value=filter.value&&"true"===filter.value[0]?"true":"false";else if(!field.customdate||filter.value&&filter.value.length||!field.options[filter.operatorId]){if(filter.value)if("date"===field.type&&20===filter.operatorId)value="20",field.dateRange=filter.value;else if(this.isDateOperatorWithValue(filter.operatorId))value=filter.value[0]+"_"+filter.operatorId,value=field.single?value:[value];else if(10===filter.operatorId||10===field.operatorId){var options=this.config.data[fieldName].options,idsArr=Object.keys(options);value=[],idsArr.forEach((function(id){filter.value.includes(id)||value.push(id)}))}else value=field.single?filter.value[0]:filter.value}else value=field.single?filter.operatorId+"":[filter.operatorId+""];return value},init:function(){var _this14=this,filters=Object.assign({},this.viewFilters),self=this,fieldKeyMap={};for(var fieldName in this.configs.data)this.configs.data.hasOwnProperty(fieldName)&&this.configs.data[fieldName].key&&(fieldKeyMap[this.configs.data[fieldName].key]=fieldName);var _loop4=function(fieldKey){if(filters.hasOwnProperty(fieldKey)||"assignmentGroup"===fieldKey){var field,filterVal,filter=filters[fieldKey],_fieldName="assignmentGroup"===fieldKey?"assignedTo":fieldKey,isResourceField=!1;if("resource"===_fieldName||"resourceId"===_fieldName?(field=_this14.configs.data.space||_this14.configs.data.asset?{parent:"resource"}:null,isResourceField=!0):field=_this14.configs.data[_fieldName]||_this14.configs.data[fieldKeyMap[_fieldName]],field)Array.isArray(filter)?(filterVal=[],filter.forEach((function(fval){isResourceField&&(filterVal=[],field=38===fval.operatorId?_this14.configs.data.space:_this14.configs.data.asset);var val=self.getValuesFromFilter(field,fval,fieldKeyMap[_fieldName]||_fieldName);Array.isArray(val)?filterVal=[].concat((0,toConsumableArray/* default */.Z)(filterVal),(0,toConsumableArray/* default */.Z)(val)):15===field.operatorId?filterVal=val:filterVal.push(val),isResourceField&&self.setFieldValue(filterVal,field,fieldKey)}))):(isResourceField&&(field=38===filter.operatorId?_this14.config.data.space:_this14.config.data.asset,field=38===filter.operatorId?_this14.configs.data.space:_this14.configs.data.asset),filterVal=self.getValuesFromFilter(field,filter,fieldKeyMap[_fieldName]||_fieldName)),Array.isArray(filter)&&isResourceField||self.setFieldValue(filterVal,field,fieldKey)}};for(var fieldKey in filters)_loop4(fieldKey);this.applyFilter()},checkColumns:function(){for(var j in this.selectedColumns=[],this.allColumns){var k=!1;for(var i in this.viewColumns)this.allColumns[j].label===this.viewColumns[i].displayName&&(this.selectedColumns.push(this.allColumns[j]),k=!0);k||this.nonSelectableColumns.includes(this.allColumns[j].key)||this.availableColumns.push(this.allColumns[j])}},close:function(){this.showingLookupWizard||(this.showSearchfilter=!1,this.$emit("hideSearch"))}})},components_NewSearchvue_type_script_lang_js=NewSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_NewSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewSearch=component.exports},
/***/588633:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewTag}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/NewTag.vue?vue&type=template&id=747a18e2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.filters&&Object.keys(_vm.filters).length>"0"?_c("div",{staticClass:"tag-inline"},_vm._l(_vm.filters,(function(label,value){return _c("div",{key:value,staticClass:"tag-inline"},[_vm.isBuildingOperator(label)?_c("el-tag",{staticClass:"mR10 filter-search-tag",attrs:{closable:_vm.showCloseIcon,"disable-transitions":!1},on:{close:function($event){return _vm.handleClose(value)}}},[_vm._v(_vm._s(_vm.tagHandling(label,value)))]):!_vm.$validation.isEmpty(label.value)||_vm.$validation.isEmpty(_vm.fieldLabelMap[value])||_vm.$validation.isEmpty(_vm.operatorMap[label.operatorId])||null!==_vm.checkForDateTimeField(value,label)?!label.value||0!==label.value.length&&1!==label.value.length||null!==_vm.checkForDateTimeField(value,label)?label.value&&label.value.length>1&&null===_vm.checkForDateTimeField(value,label)?_vm._l(label.value,(function(spli,index){return _c("el-tag",{key:index,staticClass:"mR10 filter-search-tag",attrs:{closable:_vm.showCloseIcon,"disable-transitions":!1},on:{close:function($event){return _vm.handleClose(value,spli)}}},[_vm._v(_vm._s(_vm.fieldLabelMap[value])+" "+_vm._s(_vm.operatorMap[label.operatorId])+" "+_vm._s(_vm.getValue(value,label,Number(spli))))])})):null!==_vm.checkForDateTimeField(value,label)?_c("el-tag",{staticClass:"mR10 filter-search-tag",attrs:{closable:_vm.showCloseIcon,"disable-transitions":!1},on:{close:function($event){return _vm.handleClose(value)}}},[_vm._v(_vm._s(_vm.checkForDateTimeField(value,label)))]):_c("el-tag",{staticClass:"mR10 filter-search-tag",attrs:{closable:_vm.showCloseIcon,"disable-transitions":!1},on:{close:function($event){return _vm.handleClose(value)}}},[_vm._v(_vm._s(_vm.tagHandling(label,value)))]):_c("el-tag",{staticClass:"mR10 filter-search-tag",attrs:{closable:_vm.showCloseIcon,"disable-transitions":!1},on:{close:function($event){return _vm.handleClose(value)}}},[_vm._v(_vm._s(_vm.fieldLabelMap[value])+" "+_vm._s(_vm.operatorMap[label.operatorId])+" "+_vm._s(_vm.getValue(value,label,null)))]):_c("el-tag",{staticClass:"mR10 filter-search-tag",attrs:{closable:_vm.showCloseIcon,"disable-transitions":!1},on:{close:function($event){return _vm.handleClose(value)}}},[_vm._v(_vm._s(_vm.fieldLabelMap[value])+" "+_vm._s(_vm.operatorMap[label.operatorId])+" ")])],2)})),0):_vm._e(),_vm.showFilterAdd?_c("div",{staticClass:"tag-list-container"},[_c("div",{staticClass:"f13 fc-dark-blue-txt13 pointer mL10 pT10 fwBold",on:{click:function($event){$event.stopPropagation(),_vm.showFilterList=!0}}},[_c("i",{staticClass:"el-icon-plus fc-dark-blue-txt13 f13 fwBold"}),_vm._v(" "+_vm._s(_vm.$t("common._common.add_filter"))+" ")]),_c("transition",{attrs:{name:"fade"}},[_vm.showFilterList?[_c("outside-click",{staticClass:"tag-list-block z-index1234",attrs:{visibility:!0},on:{onOutsideClick:function($event){return _vm.close()}}},[_c("div",{staticClass:"tag-list-header"},[_c("el-input",{staticClass:"tag-list-search",attrs:{type:"text",placeholder:"Search...",autofocus:!0},model:{value:_vm.search,callback:function($$v){_vm.search=$$v},expression:"search"}}),_c("div",{staticClass:"tag-list-body"},_vm._l(_vm.config.data,(function(obj,value){return""===_vm.search||obj.label.toLowerCase().startsWith(_vm.search.toLowerCase())?_c("div",{key:value,attrs:{value:value}},[_c("div",{staticClass:"label-txt-black2 pT10 pB10 pL20 pR20 pointer fc-list-active-hover",on:{click:function($event){return $event.stopPropagation(),_vm.showFilter(value)}}},[_vm._v(" "+_vm._s(_vm.config.data[value].label)+" ")])]):_vm._e()})),0)],1)])]:_vm._e()],2),_c("div",{staticClass:"tag-list-filter-condition-container"},[_c("transition",{attrs:{name:"fade"}},[_vm.showTagFilterCondition?[_c("outside-click",{staticClass:"filter-condition-block",attrs:{visibility:!0},on:{onOutsideClick:_vm.handleConditionClose}},[_c("div",{staticClass:"filter-condition-body"},[_c("div",{staticClass:"fc-dark-blue-txt13 f13 pointer mL10 pT10 fwBold",on:{click:function($event){return $event.stopPropagation(),_vm.back.apply(null,arguments)}}},[_c("i",{staticClass:"el-icon-back fw6 mR10 fc-dark-blue-txt13"}),_vm._v(" Back to "+_vm._s(_vm.fieldLabelMap[_vm.fieldName])+" ")]),_c("div",{staticClass:"filter-condition-radion-btn pT20"},[_c("div",{staticClass:"filter-radio-display"},["createdTime"!==_vm.fieldName&&"actualWorkEnd"!==_vm.fieldName&&"lastPurchasedDate"!==_vm.fieldName&&"lastIssuedDate"!==_vm.fieldName&&"acknowledgedTime"!==_vm.fieldName&&"dueDate"!==_vm.fieldName&&"responseDueDate"!==_vm.fieldName&&"warrantyExpiryDate"!==_vm.fieldName&&"clearedTime"!==_vm.fieldName&&"modifiedTime"!==_vm.fieldName&&"isAcknowledged"!==_vm.fieldName&&"connected"!==_vm.fieldName?_c("div",[_vm.config.data[_vm.fieldName]&&_vm.config.data[_vm.fieldName].operator?_c("div",_vm._l(_vm.moduleMeta.operators[_vm.config.data[_vm.fieldName].operator],(function(label){return _vm.selectedlist(label,_vm.config.data[_vm.fieldName].operator)?_c("el-radio",{key:label.operatorId,staticClass:"fc-radio-btn pB10",attrs:{label:label.operatorId,value:label.operatorId},model:{value:_vm.config.data[_vm.fieldName].operatorId,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"operatorId",$$v)},expression:"config.data[fieldName].operatorId"}},[_vm._v(" "+_vm._s(label.operator)+" "),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[_vm.config.data[_vm.fieldName]&&"select"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-select",{staticClass:"fc-input-full-border2 search-select-comp2 mT10 fc-tag pR10 fc-search-select-width",attrs:{filterable:"","collapse-tags":"",multiple:"",placeholder:"Select"},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},_vm._l(_vm.config.data[_vm.fieldName].options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1):_vm._e(),"lookup"!==_vm.config.data[_vm.fieldName].displayType||1===label.operatorId||2===label.operatorId||_vm.config.data[_vm.fieldName].specialType?_vm._e():_c("div",[_c("FLookupFieldWrapper",{staticClass:"search-input-comp",attrs:{field:_vm.moduleMeta.fields.find((function(v){return v.name===_vm.fieldName}))},on:{recordSelected:function(value){return _vm.setLookUpFilter(value,_vm.fieldName)},showingLookupWizard:function($event){_vm.showingLookupWizard=!0}},model:{value:(_vm.formModel[_vm.fieldName]||{}).id,callback:function($$v){_vm.$set(_vm.formModel[_vm.fieldName]||{},"id",$$v)},expression:"(formModel[fieldName] || {}).id"}})],1)]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[_vm.fieldName&&_vm.config.data[_vm.fieldName]&&("string"===_vm.config.data[_vm.fieldName].displayType||"number"===_vm.config.data[_vm.fieldName].displayType)&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"text",autofocus:!0},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[_vm.fieldName&&["asset","space"].includes(_vm.config.data[_vm.fieldName].displayType)&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border fc-tag",staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",collapse:"",value:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?[1]:null,disabled:""}},[_c("el-option",{attrs:{label:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?_vm.config.data[_vm.fieldName].value.length+("asset"===_vm.config.data[_vm.fieldName].displayType?" "+_vm.$t("common._common.asset"):" "+_vm.$t("common.space_asset_chooser.space"))+(_vm.config.data[_vm.fieldName].value.length>1?"s":"")+" "+_vm.$t("common._common.selected"):"",value:1}})],1),_c("i",{staticClass:"el-input__icon el-icon-search filter-icon-search",attrs:{slot:"suffix"},on:{click:function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",!0)}},slot:"suffix"})],1)]):_vm._e()]):_vm._e()]):_vm._e()})),1):_c("div",_vm._l(_vm.moduleMeta.operators[_vm.operator[_vm.fieldName]],(function(label){return _vm.selectedlist(label,_vm.operator[_vm.fieldName])?_c("el-radio",{key:label.operatorId,staticClass:"fc-radio-btn pB10",attrs:{label:label.operatorId,value:label.operatorId},model:{value:_vm.config.data[_vm.fieldName].operatorId,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"operatorId",$$v)},expression:"config.data[fieldName].operatorId"}},[_vm._v(" "+_vm._s(label.operator)+" "),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[_vm.config.data[_vm.fieldName]&&"select"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-select",{staticClass:"fc-input-full-border2 search-select-comp2 mT10 fc-tag pR10 fc-search-select-width",attrs:{filterable:"","collapse-tags":"",multiple:"",placeholder:"Select"},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},_vm._l(_vm.config.data[_vm.fieldName].options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1):_vm._e(),"lookup"!==_vm.config.data[_vm.fieldName].displayType||1===label.operatorId||2===label.operatorId||_vm.config.data[_vm.fieldName].specialType?_vm._e():_c("div",[_c("FLookupFieldWrapper",{staticClass:"search-input-comp",attrs:{field:_vm.moduleMeta.fields.find((function(v){return v.name===_vm.fieldName}))},on:{recordSelected:function(value){return _vm.setLookUpFilter(value,_vm.fieldName)},showingLookupWizard:function($event){_vm.showingLookupWizard=!0}},model:{value:(_vm.formModel[_vm.fieldName]||{}).id,callback:function($$v){_vm.$set(_vm.formModel[_vm.fieldName]||{},"id",$$v)},expression:"(formModel[fieldName] || {}).id"}})],1)]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[_vm.fieldName&&_vm.config.data[_vm.fieldName]&&"string"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"text",autofocus:!0},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[_vm.fieldName&&_vm.config.data[_vm.fieldName]&&"number"===_vm.config.data[_vm.fieldName].displayType&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"number",autofocus:!0},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}})],1):_vm._e()]):_vm._e(),label.operatorId==_vm.config.data[_vm.fieldName].operatorId?_c("div",[_vm.fieldName&&["asset","space"].includes(_vm.config.data[_vm.fieldName].displayType)&&1!==label.operatorId&&2!==label.operatorId?_c("div",[_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border fc-tag fc-search-select-width mT10",attrs:{filterable:"",multiple:"",collapse:"",value:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?[1]:null,disabled:""}},[_c("el-option",{attrs:{label:_vm.config.data[_vm.fieldName].value&&_vm.config.data[_vm.fieldName].value.length?_vm.config.data[_vm.fieldName].value.length+("asset"===_vm.config.data[_vm.fieldName].displayType?" Asset":" Space")+(_vm.config.data[_vm.fieldName].value.length>1?"s":"")+" selected":"",value:1}})],1),_c("i",{staticClass:"el-input__icon el-icon-search fc-tag-filter-icon-search",attrs:{slot:"suffix"},on:{click:function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",!0)}},slot:"suffix"})],1)]):_vm._e()]):_vm._e()]):_vm._e()})),1)]):_c("div",[_vm._l(_vm.config.data[_vm.fieldName].options,(function(label4,value4){return _c("el-radio",{key:value4,staticClass:"fc-radio-btn pB10",attrs:{label:value4},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},[_vm._v(_vm._s(label4))])})),"date"!==_vm.config.data[_vm.fieldName].type||_vm.config.data[_vm.fieldName].hideDateRange?_vm._e():_c("el-radio",{attrs:{label:"20",value:"20"},model:{value:_vm.config.data[_vm.fieldName].value,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"value",$$v)},expression:"config.data[fieldName].value"}},[_vm._v("Custom")]),"date"===_vm.config.data[_vm.fieldName].type&&(_vm.config.data[_vm.fieldName].single?"20"===_vm.config.data[_vm.fieldName].value:_vm.config.data[_vm.fieldName].value.includes("20"))?_c("f-date-picker",{staticClass:"mT10 position-relative",attrs:{type:"datetimerange","value-format":"timestamp",format:"dd-MM-yyyy HH:mm"},on:{change:_vm.onFilterChanged},model:{value:_vm.config.data[_vm.fieldName].dateRange,callback:function($$v){_vm.$set(_vm.config.data[_vm.fieldName],"dateRange",$$v)},expression:"config.data[fieldName].dateRange"}}):_vm._e()],2)])])]),_c("div",{staticClass:"filter-condition-footer"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold",on:{click:function($event){return _vm.apply()}}},[_vm._v("DONE")])],1)])]:_vm._e()],2)],1)],1):_vm._e(),_vm.config.data[_vm.fieldName]&&_vm.config.data[_vm.fieldName].chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{showAsset:"asset"===_vm.config.data[_vm.fieldName].displayType,initialValues:{isIncludeResource:!0,selectedResources:_vm.config.data[_vm.fieldName].value.map((function(id){return{id:parseInt(id)}}))},visibility:_vm.config.data[_vm.fieldName].chooserVisibility,hideBanner:!0},on:{associate:function($event){return _vm.associateResource($event,_vm.config.data[_vm.fieldName])},"update:visibility":function($event){return _vm.$set(_vm.config.data[_vm.fieldName],"chooserVisibility",$event)}}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(857267),__webpack_require__(879288),__webpack_require__(212826),__webpack_require__(538077),__webpack_require__(648324),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(420629)),SpaceAssetMultiChooser=__webpack_require__(673362),FLookupFieldWrapper=__webpack_require__(201117),OutsideClick=__webpack_require__(21864),FDatePicker=__webpack_require__(358551),validation=__webpack_require__(990260),picklist=__webpack_require__(961358),spaceFields=["space","visitedSpace"],NewTagvue_type_script_lang_js={props:["filters","config","showFilterAdd","showCloseIcon","isAssetsCategory","specialOperatorHandling"],data:function(){return{inputVisible:!1,states:[],formModel:{},excludeOperators:[74,75,76,77,78,79,35,87,52,53],siteMap:{},done:!1,search:"",fieldName:"",itemTypes:null,filtersApplied:{},inputValue:"",searchLists:{subject:"Subject",assetCategoryId:"Category",title:"Title",name:"Name",category:"Category",categoryId:"Category",tenant:"Tenant",tenantId:"Tenant",assetCategory:"Category",assetDepartment:"Department",siteId:"Site",assetType:"Type",warrantyExpiryDate:"Warranty Expiry Date",resource:"Resource",dueDate:"Due Date",responseDueDate:"Response Due Date",space:"Space",visitedSpace:"Visited Space",asset:"Asset",sourceType:"Source Type",ticketType:"Type",typeId:"Type",type:"Type",status:"Status",assignedTo:"Assigned To",assignedToId:"Assigned To",priorityId:"Priority",frequency:"Frequency",createdTime:"Created Time",actualWorkEnd:"Resolved Time",comments:"Comments",tasks:"Tasks",priority:"Priority",modifiedTime:"Modified Time",actualWorkStart:"Actual Work Start",acknowledgedBy:"Acknowledged By",acknowledgedTime:"Acknowledged Time",alarmType:"Type",clearedTime:"Cleared Time",previousSeverity:"Previous Severity",severity:"Severity",itemType:"Item Type",toolType:"Tool Type",storeRoom:"Store Room",issuedTo:"Issued To",alarmSeverityId:"Severity",lastPurchasedDate:"Last Purchased Date",workorder:"Work Order",lastIssuedDate:"Last Issued Date",isAcknowledged:"Is Acknowledged"},operator:{subject:"STRING",title:"STRING",primaryContactName:"STRING",qrVal:"STRING",id:"STRING",name:"STRING",description:"STRING",primaryContactEmail:"STRING",primaryContactPhone:"STRING",assetCategory:"LOOKUP",kpiCategory:"LOOKUP",assetDepartment:"LOOKUP",siteId:"LOOKUP",assetType:"LOOKUP",department:"LOOKUP",type:"LOOKUP",typeId:"LOOKUP",category:"LOOKUP",categoryId:"LOOKUP",tenant:"LOOKUP",vendor:"LOOKUP",tenantId:"LOOKUP",moduleState:"LOOKUP",assetCategoryId:"LOOKUP",alarmSeverityId:"LOOKUP",dueDate:"DATE",responseDueDate:"DATE",space:"LOOKUP",visitedSpace:"LOOKUP",resourceId:"LOOKUP",asset:"LOOKUP",sourceType:"NUMBER",ticketType:"LOOKUP",status:"LOOKUP",assignedTo:"LOOKUP",assignedToId:"LOOKUP",frequency:"NUMBER",assignmentGroup:"LOOKUP",tasks:"LOOKUP",priority:"LOOKUP",priorityId:"LOOKUP",alarmType:"NUMBER",acknowledgedBy:"LOOKUP",severity:"LOOKUP",itemType:"LOOKUP",toolType:"LOOKUP",storeRoom:"LOOKUP",issuedTo:"LOOKUP",lastPurchasedDate:"DATE",lastIssuedDate:"DATE",previousSeverity:"LOOKUP"},frequency:{1:"Daily",2:"Weekly",3:"Monthly",4:"Quarterly",5:"Half Yearly",6:"Annually"},isAcknowledged:{true:"Yes",false:"No"},showFilterList:!1,showTagFilterCondition:!1,showingLookupWizard:!1}},created:function(){var _this=this;Promise.all([this.$store.dispatch("loadSite"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAssetDepartment"),this.$store.dispatch("loadAssetType"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadSites"),this.$store.dispatch("loadGroups"),this.getStateList()]).then((function(){_this.constructStatusField(),_this.init(),_this.setOptions()}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketpriority:function(state){return state.ticketPriority},ticketcategory:function(state){return state.ticketCategory},alarmseverity:function(state){return state.alarmSeverity},assetcategory:function(state){return state.assetCategory},tenant:function(state){return state.tenant.tenants},siteList:function(state){return state.site},sitedetails:function(state){return state.sites},assetdepartment:function(state){return state.assetDepartment},assettype:function(state){return state.assetType},moduleMeta:function(state){return state.view.metaInfo},viewDetail:function(state){return state.view.currentViewDetail}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketTypePickList"])),{},{tickettype:function(){return this.getTicketTypePickList()},appliedFilters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},operatorMap:function(){var opMap={};if(this.moduleMeta&&this.moduleMeta.operators)for(var key in this.moduleMeta.operators)for(var k in this.moduleMeta.operators[key])opMap[this.moduleMeta.operators[key][k].operatorId]=this.moduleMeta.operators[key][k].operator;return opMap},fieldLabelMap:function(){var fieldmap={};if(this.moduleMeta&&this.moduleMeta.fields&&this.moduleMeta.fields.forEach((function(d){fieldmap[d.name]=d.displayName})),this.config.data)for(var k in this.config.data)this.config.data[k].key?fieldmap[this.config.data[k].key]=this.config.data[k].label:fieldmap[k]=this.config.data[k].label;return fieldmap}}),components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,OutsideClick:OutsideClick/* default */.Z,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z,FDatePicker:FDatePicker/* default */.Z},watch:{appliedFilters:function(val){val&&this.applyfilters(),this.constructFormmodelForLookupFields()}},mounted:function(){this.applyfilters(),this.setOptions(),this.siteDetail(),this.constructFormmodelForLookupFields()},methods:{setLookUpFilter:function(filter,fieldName){if(!(0,validation/* isEmpty */.xb)(filter)){var value={id:filter.value,label:filter.label};this.$set(this.formModel,fieldName,value)}this.showingLookupWizard=!1},getStateList:function(){var _this2=this;if(this.config.moduleName)return this.$http.get("v2/state/list?parentModuleName=".concat(this.config.moduleName)).then((function(_ref){var data=_ref.data;_this2.states=data.result.status||[]})).catch((function(_ref2){var _ref2$message=_ref2.message,message=void 0===_ref2$message?"Error loading states":_ref2$message;_this2.$message.error(message)}))},constructStatusField:function(){if(!(0,validation/* isEmpty */.xb)(this.moduleMeta)&&!(0,validation/* isEmpty */.xb)(this.moduleMeta.module)&&(0,validation/* isEmpty */.xb)(this.config.data.moduleState)&&!(0,validation/* isEmpty */.xb)(this.states)){var stateOptions={};if((0,validation/* isEmpty */.xb)(this.states)||this.states.forEach((function(state){stateOptions[state.id]=state.displayName})),this.moduleMeta.module.stateFlowEnabled||!this.moduleMeta.module.custom){var stateObj={label:"Status",displayType:"select",options:stateOptions,value:[],key:"moduleState"};this.$set(this.config.data,"moduleState",stateObj)}}},constructFormmodelForLookupFields:function(){var _this3=this,appliedFilters=this.appliedFilters;for(var key in this.config.data)if(this.config.data[key]&&this.config.data[key].isCustomFieldLookup){this.$set(this.operator,key,"LOOKUP");var lookupObj={id:"",label:""};!(0,validation/* isEmpty */.xb)(this.config.data[key].value)&&this.config.data[key].value.length>0&&(lookupObj.id=parseInt(this.config.data[key].value[0]),lookupObj.label=(0,validation/* isEmpty */.xb)(this.config.data[key].options)?"":this.config.data[key].options[parseInt(this.config.data[key].value[0])]),this.$set(this.formModel,key,lookupObj)}if(!(0,validation/* isEmpty */.xb)(appliedFilters)&&!(0,validation/* isEmpty */.xb)(this.formModel)){var filters=Object.keys(appliedFilters||{}),formModelKey=Object.keys(this.formModel||{});(0,validation/* isEmpty */.xb)(filters)||(0,validation/* isEmpty */.xb)(formModelKey)||formModelKey.forEach((function(fval){filters.includes(fval)?filters.includes(fval)&&(_this3.formModel[fval].id=(0,validation/* isEmpty */.xb)(appliedFilters[fval][0])||(0,validation/* isEmpty */.xb)(appliedFilters[fval][0].value)?"":parseInt(appliedFilters[fval][0].value[0]),_this3.formModel[fval].label=(0,validation/* isEmpty */.xb)(appliedFilters[fval][0])||(0,validation/* isEmpty */.xb)(appliedFilters[fval][0].selectedLabel)?"":appliedFilters[fval][0].selectedLabel):(_this3.formModel[fval].id="",_this3.formModel[fval].label="")}))}},tagHandling:function(resObj,value){var lookupField={};if(lookupField=this.moduleMeta&&this.moduleMeta.fields?this.moduleMeta.fields.find((function(at){return at.name===value})):{},Array.isArray(resObj)||(resObj=[resObj]),"resource"===value||"resourceId"===value){if(resObj&&2!==resObj.length)return resObj[0].value.length+(resObj[0].value&&resObj[0].value.length>1?" Spaces/Assets Selected":" Space/Asset Selected");if(resObj&&2===resObj.length)return resObj[0].value.length+" Spaces/Assets Selected"}else{if(spaceFields.includes(value))return resObj[0].value.length+(resObj[0].value.length>1?" Spaces selected":" Space selected");if(resObj&&resObj[0]&&resObj[0].selectedLabel&&lookupField&&"LOOKUP"===lookupField.dataTypeEnum._name)return lookupField.displayName+" is "+resObj[0].selectedLabel}return""},fetchDetailForLookUpTag:function(resObj,value){var filters=(0,defineProperty/* default */.Z)({},value,resObj),queryObj={viewname:all,page:1,filters:filters||"",moduleName:this.$route.params.moduleName};this.$store.dispatch("customModule/fetchCustomModuleList",queryObj).then((function(){})).catch((function(error){}))},checkForDateTimeField:function(field,fieldObj){if(this.moduleMeta&&this.moduleMeta.fields){var a={};return a=this.moduleMeta.fields.find((function(at){return at.name===field})),a&&("DATE"===a.dataTypeEnum._name||"DATETIME"===a.dataTypeEnum._name||"DATE_TIME"===a.dataTypeEnum._name)?fieldObj.value&&1===fieldObj.value.length?this.fieldLabelMap[field]+" is "+this.operatorMap[fieldObj.operatorId].replace(" N "," "+fieldObj.value[0]+" "):fieldObj.value&&fieldObj.value.length>1?this.fieldLabelMap[field]+" is "+this.$options.filters.formatDate(Number(fieldObj.value[0]),!0,!1)+" - "+this.$options.filters.formatDate(Number(fieldObj.value[1]),!0,!1):(0,validation/* isArray */.kJ)(fieldObj)?this.fieldLabelMap[field]+" is "+this.operatorMap[fieldObj[0].operatorId]:this.fieldLabelMap[field]+" is "+this.operatorMap[fieldObj.operatorId]:null}},getValue:function(field,fieldObj,fieldId){if(!this.moduleMeta)return"";var a={};return a=this.moduleMeta.fields.find((function(at){return at.name===field})),"id"===field?parseInt(fieldObj.value[0]):("type"!==field&&"typeId"!==field||"workorder"!==this.moduleMeta.name&&"preventivemaintenance"!==this.moduleMeta.name?"category"===field&&this.isAssetsCategory||"assetCategoryId"===field?field="assetCategory":"categoryId"===field&&"preventivemaintenance"===this.moduleMeta.name?field="category":"assignedToId"===field&&"preventivemaintenance"===this.moduleMeta.name?field="assignedTo":"priorityId"===field&&"preventivemaintenance"===this.moduleMeta.name?field="priority":"department"===field?field="assetDepartment":"type"===field&&this.isAssetsCategory?field="assetType":"alarmSeverityId"===field&&(field="severity"):field="ticketType",this.config.data[field]?fieldId&&0===fieldObj.value.length?"":fieldId&&fieldObj.value.length>1?this.config.data[field].options[fieldId]:a&&"STRING"===a.dataTypeEnum._name?fieldObj.value[0]:!a||"NUMBER"!==a.dataTypeEnum._name&&"DECIMAL"!==a.dataTypeEnum._name||"siteId"===field||a.default&&"serialNumber"!==a.name&&"maxOccupancy"!==a.name&&"area"!==a.name?this.config.data[field].options[fieldObj.value[0]]:fieldObj.value[0].toString():void 0)},siteDetail:function(){var _this4=this;this.sitedetails&&this.sitedetails.forEach((function(status){_this4.siteMap[status.id]=status.name}))},handleClose:function(tag,index){var filter={};if(filter=this.$helpers.cloneObject(this.filtersApplied),index&&"dueDate"!==tag&&"responseDueDate"!==tag&&"createdTime"!==tag&&"actualWorkEnd"!==tag&&"acknowledgedTime"!==tag&&"warrantyExpiryDate"!==tag&&"clearedTime"!==tag&&"modifiedTime"!==tag){var a=[],b=[];a=filter[tag].value,b=a.filter((function(item){return item!==index})),filter[tag].value=b,b.length>0?this.filtersApplied[tag].value=filter[tag].value:(delete this.filtersApplied[tag],"type"!==tag&&"typeId"!==tag||"workorder"!==this.moduleMeta.name&&"preventivemaintenance"!==this.moduleMeta.name?"category"===tag&&this.isAssetsCategory?tag="assetCategory":"tenant"!==tag||"workorder"!==this.moduleMeta.name&&"preventivemaintenance"!==this.moduleMeta.name?"categoryId"===tag&&"preventivemaintenance"===this.moduleMeta.name?tag="category":"assignedToId"===tag&&"preventivemaintenance"===this.moduleMeta.name?tag="assignedTo":"priorityId"===tag&&"preventivemaintenance"===this.moduleMeta.name?tag="priority":"department"===tag?tag="assetDepartment":"type"===tag?tag="assetType":"assetCategoryId"===tag?tag="assetCategory":"alarmSeverityId"===tag&&(tag="severity"):tag="tenant":tag="ticketType",this.config.data[tag].value=[])}else if(index){if("createdTime"===tag||"dueDate"===tag||"responseDueDate"===tag||"actualWorkEnd"===tag||"acknowledgedTime"===tag||"warrantyExpiryDate"===tag||"clearedTime"===tag||"modifiedTime"===tag){var _a=[],_b=[];_a=filter[tag],_b=_a.filter((function(item){return item["operatorId"]!==index})),filter[tag]=_b,_b.length>0?this.filtersApplied[tag]=filter[tag]:(delete this.filtersApplied[tag],this.config.data[tag].value=[])}}else"subject"===tag||"name"===tag||"title"===tag?(delete this.filtersApplied[tag],this.config.data[tag].value=""):"resource"===tag||"resourceId"===tag?delete this.filtersApplied[tag]:(delete this.filtersApplied[tag],"type"!==tag&&"typeId"!==tag||"workorder"!==this.moduleMeta.name&&"preventivemaintenance"!==this.moduleMeta.name?"category"===tag&&this.isAssetsCategory||"assetCategoryId"===tag?tag="assetCategory":"categoryId"===tag&&"preventivemaintenance"===this.moduleMeta.name?tag="category":"assignedToId"===tag&&"preventivemaintenance"===this.moduleMeta.name?tag="assignedTo":"priorityId"===tag&&"preventivemaintenance"===this.moduleMeta.name?tag="priority":"tenant"!==tag||"workorder"!==this.moduleMeta.name&&"preventivemaintenance"!==this.moduleMeta.name?"department"===tag?tag="assetDepartment":"type"===tag&&(tag="assetType"):tag="tenant":tag="ticketType",this.config.data[tag].value=[]);var queryParam={search:JSON.stringify(this.filtersApplied)};if(this.$route.query.view&&(queryParam.view=this.$helpers.cloneObject(this.$route.query.view)),this.$router.replace({query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{search:JSON.stringify(this.filtersApplied),includeParentFilter:!0})}),Object.keys(this.filtersApplied).length<="0"){var querry={};this.$route.query.view&&(querry.view=this.$helpers.cloneObject(this.$route.query.view)),this.$router.push({query:querry})}},showInput:function(){var _this5=this;this.inputVisible=!0,this.$nextTick((function(_){_this5.$refs.saveTagInput.$refs.input.focus()}))},outsideClick:function(){this.showFilterCondition=!1},applyfilters:function(){this.filtersApplied=this.filters},back:function(){this.showTagFilterCondition=!1,this.showFilterList=!0},showFilter:function(value){if(this.fieldName=value,this.showFilterList=!1,this.showTagFilterCondition=!0,("sourceType"===this.fieldName||"alarmType"===this.fieldName||this.config.data[this.fieldName].operator&&"NUMBER"===this.config.data[this.fieldName].operator)&&this.$set(this.config.data[this.fieldName],"operatorId",9),this.config.data[this.fieldName].operatorId||"createdTime"===this.fieldName||"sourceType"===this.fieldName||"dueDate"===this.fieldName||"responseDueDate"===this.fieldName||"actualWorkEnd"===this.fieldName||"acknowledgedTime"===this.fieldName||"clearedTime"===this.fieldName||"modifiedTime"===this.fieldName||"lastPurchasedDate"===this.fieldName||"lastIssuedDate"===this.fieldName){if(this.config.data[this.fieldName].operatorId){var filter=this.appliedFilters[this.fieldName];!(0,validation/* isEmpty */.xb)(filter)&&Array.isArray(filter)&&(filter=filter[0],this.$set(this.config.data[this.fieldName],"operatorId",filter&&filter.operatorId?filter.operatorId:""))}}else this.$set(this.config.data[this.fieldName],"operatorId",spaceFields.includes(this.fieldName)?38:"isAcknowledged"===this.fieldName||"connected"===this.fieldName?15:"subject"===this.fieldName||"name"===this.fieldName||this.config.data[this.fieldName].operator&&"STRING"===this.config.data[this.fieldName].operator||"title"===this.fieldName?5:36)},associateResource:function(resource,field){this.$set(field,"chooserVisibility",!1),field.value=resource.resourceList?resource.resourceList.map((function(res){return res.id})):[],this.onFilterChanged(),this.apply()},selectedlist:function(label,operatorType){return!("BUILDING_IS"===label._name&&!spaceFields.includes(this.fieldName))&&("LOOKUP"!==label._name&&!this.excludeOperators.includes(label.operatorId))},setCustomDateFilters:function(filters,fieldName){var _this6=this,constructDateFilter=function(val){val=val.split("_");var operatorId=1===val.length?parseInt(val[0]):parseInt(val[1]),filter={operatorId:operatorId};if(20===operatorId){var dateRange=_this6.config.data[fieldName].dateRange;if(!dateRange||!dateRange.length)return!1;filter.value=_this6.config.data[fieldName].dateRange.map((function(date){return date+""}))}else _this6.isDateOperatorWithValue(operatorId)&&(filter.value=[val[0]]);return filter},filterVal=this.config.data[fieldName].value,key=this.config.data[fieldName].key||fieldName;if(Array.isArray(filterVal))filters[key]=[],filterVal.forEach((function(fval){var filter=constructDateFilter(fval);filter&&filters[key].push(filter)}));else{var filter=constructDateFilter(filterVal);filter&&(filters[key]=filter)}},isDateOperatorWithValue:function(operatorId){
// TODO get value from date operator
return[39,40,41,50,59,60,61].includes(operatorId)},apply:function(){var _this7=this,filters={},lookupFilter={},_loop=function(){if("undefined"===typeof _this7.config.data[fieldName].isCustomFieldLookup||!_this7.config.data[fieldName].isCustomFieldLookup){"rule"===fieldName&&_this7.config.data.rule.push({moduleName:"alarmRaeding"});var field=_this7.config.data[fieldName],_key=field.key||fieldName;if((1===field.operatorId||2===field.operatorId||field.value)&&(1===field.operatorId||2===field.operatorId||!Array.isArray(field.value)||field.value.length))if(field.customdate)_this7.setCustomDateFilters(filters,fieldName);else{var filterObj={operatorId:field.operatorId||(spaceFields.includes(fieldName)?38:"subject"===fieldName||_this7.config.data[_this7.fieldName].operator&&"STRING"===_this7.config.data[_this7.fieldName].operator||"name"===fieldName||"title"===fieldName?5:"sourceType"===fieldName||_this7.config.data[fieldName].operator&&"NUMBER"===_this7.config.data[fieldName].operator||"alarmType"===fieldName?9:"isAcknowledged"===fieldName||"connected"===fieldName?15:36)};if(1!==field.operatorId&&2!==field.operatorId||("subject"===fieldName||"name"===fieldName||"title"===fieldName||_this7.config.data[_this7.fieldName].operator&&"STRING"===_this7.config.data[_this7.fieldName].operator?field.value="":field.value=[]),"assignedTo"===fieldName){var users=[],groups=[];field.value.forEach((function(user){-1!==user.indexOf("_group")?groups.push(user.substring(0,user.indexOf("_group"))):users.push(user)})),users.length&&(filterObj.value=users),groups.length&&(filterObj.value=groups,_key="assignedToId"===_key?"assignmentGroupId":"assignmentGroup"),filters[_key]=filterObj}else filterObj.value=Array.isArray(field.value)?field.value.map((function(val){return val+""})):[field.value],spaceFields.includes(fieldName)||"asset"===fieldName?(_key=field.key||"resource",filters[_key]||(filters[_key]=[]),filters[_key].push(filterObj)):filters[_key]=filterObj}}};for(var fieldName in this.config.data)_loop();if(Object.keys(this.formModel).length)for(var key in this.formModel)if(this.formModel[key].id){var value=[{operatorId:this.config.data[key]&&this.config.data[key].operatorId?this.config.data[key].operatorId:36,value:[this.formModel[key].id?this.formModel[key].id.toString():""],selectedLabel:this.formModel[key].label}];this.$set(lookupFilter,key,value)}if(Object.keys(filters).length>"0"||Object.keys(this.formModel).length){var queryParam={search:JSON.stringify(filters)};this.config.includeParentCriteria&&(queryParam.includeParentFilter=!0),this.$route.query.view&&(queryParam.view=this.$helpers.cloneObject(this.$route.query.view)),filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),lookupFilter),this.$router.replace({query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{search:JSON.stringify(filters),includeParentFilter:!0})})}this.showTagFilterCondition=!1},init:function(){var _this8=this,filters=Object.assign({},this.appliedFilters),self=this,fieldKeyMap={};for(var fieldName in this.config.data)this.config.data.hasOwnProperty(fieldName)&&this.config.data[fieldName].key&&(fieldKeyMap[this.config.data[fieldName].key]=fieldName);var _loop2=function(fieldKey){if(filters.hasOwnProperty(fieldKey)||"assignmentGroup"===fieldKey){var field,filterVal,filter=filters[fieldKey],_fieldName="assignmentGroup"===fieldKey?"assignedTo":fieldKey,isResourceField=!1;if("resource"===_fieldName||"resourceId"===_fieldName?(field=_this8.config.data.space||_this8.config.data.asset?{parent:"resource"}:null,isResourceField=!0):field=_this8.config.data[_fieldName]||_this8.config.data[fieldKeyMap[_fieldName]],field)Array.isArray(filter)?(filterVal=[],filter.forEach((function(fval){isResourceField&&(filterVal=[],field=38===fval.operatorId?_this8.config.data.space:_this8.config.data.asset);var val=self.getValuesFromFilter(field,fval,fieldKeyMap[_fieldName]||_fieldName);Array.isArray(val)?filterVal=[].concat((0,toConsumableArray/* default */.Z)(filterVal),(0,toConsumableArray/* default */.Z)(val)):15===field.operatorId?filterVal=val:filterVal.push(val),isResourceField&&self.setFieldValue(filterVal,field,fieldKey)}))):(isResourceField&&(field=38===filter.operatorId?_this8.config.data.space:_this8.config.data.asset,field=38===filter.operatorId?_this8.config.data.space:_this8.config.data.asset),filterVal=self.getValuesFromFilter(field,filter,fieldKeyMap[_fieldName]||_fieldName)),Array.isArray(filter)&&isResourceField||(field.operatorId=filter.operatorId,self.setFieldValue(filterVal,field,fieldKey))}};for(var fieldKey in filters)_loop2(fieldKey)},getValuesFromFilter:function(field,filter,fieldName){var value;
// TODO temporary...needs to improve
return 35===filter.operatorId?value=this.getLookupValue(field,filter,fieldName):15===filter.operatorId||15===field.operatorId?value=filter.value&&"true"===filter.value[0]?"true":"false":!field.customdate||filter.value&&filter.value.length||!field.options[filter.operatorId]?filter.value&&("date"===field.type&&20===filter.operatorId?(value="20",field.dateRange=filter.value):this.isDateOperatorWithValue(filter.operatorId)?(value=filter.value[0]+"_"+filter.operatorId,value=field.single?value:[value]):value=field.single?filter.value[0]:filter.value):value=field.single?filter.operatorId+"":[filter.operatorId+""],value},setFieldValue:function(filterVal,field,fieldKey){filterVal&&("assignmentGroup"===fieldKey||"assignedTo"===fieldKey?(filterVal="assignmentGroup"===fieldKey?filterVal.filter((function(id){return"-100"!==id})).map((function(id){return id+"_group"})):filterVal,field.value&&!field.single?field.value=[].concat((0,toConsumableArray/* default */.Z)(field.value),(0,toConsumableArray/* default */.Z)(filterVal)):field.value=filterVal):field.value=filterVal)},onFilterChanged:function(value){this.apply(),this.filterApplied&&(this.filterApplied=!1)},formatOptions:function(field,list){var _this9=this,data=this.config.data;data[field]&&list.forEach((function(val){_this9.$set(data[field].options,val.id,val.name)}))},setOptions:function(){var data=this.config.data,userOptions={};if(this.users.forEach((function(user){userOptions[user.id]=user.name})),data.assignedTo&&(data.assignedTo.options=userOptions,this.groups.forEach((function(group){data.assignedTo.options[group.id+"_group"]=group.name}))),!(0,validation/* isEmpty */.xb)(this.formModel))for(var key in this.formModel)(0,validation/* isEmpty */.xb)(data[key])||(0,validation/* isEmpty */.xb)(data[key]).value||this.loadPickList(data[key].lookupModuleName,data[key]);data.category&&this.loadPickList("ticketcategory",data.category),data.tenant&&this.loadPickList("tenant",data.tenant),data.vendor&&this.loadPickList("vendors",data.vendor),data.itemTypes&&this.loadPickList("itemTypes",data.itemTypes),data.priority&&((0,validation/* isEmpty */.xb)(this.ticketpriority)||this.ticketpriority.forEach((function(prior){data.priority.options[prior.id]=prior.displayName}))),data.siteId&&this.siteList.forEach((function(sit){data.siteId.options[sit.id]=sit.name})),data.severity&&((0,validation/* isEmpty */.xb)(this.alarmseverity)||this.alarmseverity.forEach((function(severity){data.severity.options[severity.id]=severity.severity,data.previousSeverity&&(data.previousSeverity.options[severity.id]=severity.severity)}))),data.acknowledgedBy&&(data.acknowledgedBy.options=userOptions),data.clearedBy&&(data.clearedBy.options=userOptions),data.ticketType&&((0,validation/* isEmpty */.xb)(this.tickettype)||(data.ticketType.options=this.tickettype)),data.frequency&&(data.frequency.options=Object.assign({},{0:"Once"},this.$constants.FACILIO_FREQUENCY)),(0,validation/* isEmpty */.xb)(this.assetcategory)||this.formatOptions("assetCategory",this.assetcategory),(0,validation/* isEmpty */.xb)(this.assetdepartment)||this.formatOptions("assetDepartment",this.assetdepartment),(0,validation/* isEmpty */.xb)(this.assettype)||this.formatOptions("assetType",this.assettype),this.constructFormmodelForLookupFields()},loadPickList:function(moduleName,field){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this10.picklistOptions={},_context.next=3,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 3:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this10.$message.error(error.message||"Error Occured"):_this10.$set(field,"options",options);case 7:case"end":return _context.stop()}}),_callee)})))()},handleInputConfirm:function(){var inputValue=this.inputValue;inputValue&&this.dynamicTags.push(inputValue),this.inputVisible=!1,this.inputValue=""},isBuildingOperator:function(filter){return Array.isArray(filter)?filter.length&&38===filter[0].operatorId:38===filter.operatorId},close:function(){this.showTagFilterCondition||this.showingLookupWizard||(this.showFilterList=!1)},handleConditionClose:function(){this.showingLookupWizard||(this.showTagFilterCondition=!1)}}},components_NewTagvue_type_script_lang_js=NewTagvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_NewTagvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewTag=component.exports},
/***/21864:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return OutsideClick}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/OutsideClick.vue?vue&type=template&id=6761c108
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.onOutsideClick,expression:"onOutsideClick"}]},[_vm._t("default")],2):_vm._e()},staticRenderFns=[],OutsideClickvue_type_script_lang_js={props:["visibility"],methods:{onOutsideClick:function(){this.$emit("onOutsideClick"),this.$emit("update:visibility",!1)}}},components_OutsideClickvue_type_script_lang_js=OutsideClickvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_OutsideClickvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,OutsideClick=component.exports},
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/855048:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FLookupField.vue?vue&type=template&id=473d4b8e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isFieldLoading}}):_c("div",{staticClass:"f-lookup-chooser f-lookup-chooser-container"},[_c("el-select",{ref:"selectBox",class:["fc-input-full-border-select2 width100",(!_vm.canHideLookupIcon||_vm.canShowQuickCreateIcon)&&"resource-search",_vm.isMultiple&&"fc-tag",_vm.hideDropDown&&!_vm.disabled&&"skip-disable"],attrs:{"collapse-tags":"",remote:_vm.isRemote,filterable:"",clearable:_vm.canHideLookupIcon,multiple:_vm.isMultiple,popperAppendToBody:_vm.popperAppendToBody,"remote-method":function(searchText){return _vm.remoteMethod(searchText)},loading:_vm.field.isDataLoading,"loading-text":_vm.$t("common._common.searching"),disabled:_vm.disabled||_vm.hideDropDown,placeholder:_vm.field.placeHolderText||"Select"},on:{change:_vm.recordSelected},model:{value:_vm.modelObj,callback:function($$v){_vm.modelObj=$$v},expression:"modelObj"}},[_c("div",{staticClass:"flRight d-flex",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},slot:"prefix"},[_vm.canShowSystemClear?_c("div",{staticClass:"flookup-remove-icon-alignment flookup-remove-icon",on:{click:_vm.clearData}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e(),_vm.canHideLookupIcon?_vm._e():_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openLookupFieldWizard(_vm.field)}}},[_c("inline-svg",{attrs:{src:"lookup",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1),_vm.canShowQuickCreateIcon?_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openQuickCreate()}}},[_c("el-tooltip",{attrs:{effect:"dark",content:"Add\n          "+_vm.moduleDisplayName,placement:"top"}},[_c("inline-svg",{attrs:{src:"add-pink",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1)],1):_vm._e()]),_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:option.value+" "+index,staticClass:"fc-input-full-border-select2 width100",attrs:{label:option.label,value:option.value}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.$validation.isEmpty(option.secondaryLabel)?_vm._e():_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.secondaryLabel))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13 pL10",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])}))],2),_vm.showQuickCreateData?_c("QuickCreateData",{attrs:{canShowDialog:_vm.showQuickCreateData,quickCreateField:_vm.field,setAddedRecord:_vm.setAddedRecord},on:{"update:canShowDialog":function($event){_vm.showQuickCreateData=$event},"update:can-show-dialog":function($event){_vm.showQuickCreateData=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(634338),__webpack_require__(990260)),constant=__webpack_require__(354754),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),FieldLoader=__webpack_require__(62979),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),LOOKUP_FIELD_PLACEHOLDER_MAP={people:{value:"${LOGGED_PEOPLE}",label:"Current User"},users:{value:"${LOGGED_USER}",label:"Current User"}},FLookupFieldvue_type_script_lang_js={name:"f-lookup-field",props:{model:{},field:{type:Object},disabled:{type:Boolean},siteId:{type:[Number,String]},categoryId:{type:Number},hideLookupIcon:{type:Boolean,default:!1},popperAppendToBody:{required:!1,type:Boolean,default:!0},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},preHookFilterConstruction:{type:Function,default:function(field){return field.filters}},hideDropDown:{type:Boolean,default:!1},skipLoading:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},userfilmoduleEnum:{type:String},parentModuleId:{type:Number},selectedOptions:{type:Array}},components:{FieldLoader:FieldLoader/* default */.Z,QuickCreateData:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(99813)]).then(__webpack_require__.bind(__webpack_require__,676433))}},data:function(){return{localSearch:!1,isLoadedOnce:!1,currentModelValue:!1,showQuickCreateData:!1}},computed:{customOptions:function(){var _ref=this||{},field=_ref.field,_ref2=field||{},lookupModule=_ref2.lookupModule;if((0,validation/* isEmpty */.xb)(lookupModule))return[];var _ref3=lookupModule||{},name=_ref3.name;return(0,validation/* isEmpty */.xb)(LOOKUP_FIELD_PLACEHOLDER_MAP[name])?[]:[LOOKUP_FIELD_PLACEHOLDER_MAP[name]]},modelObj:{get:function(){return this.model},set:function(value){this.currentModelValue=value,this.$emit("update:model",value)}},moduleDisplayName:function(){var field=this.field,_ref4=field.field||{},lookupModule=_ref4.lookupModule,_ref5=lookupModule||{},displayName=_ref5.displayName;return displayName},isFieldLoading:function(){var field=this.field,defaultIds=this.defaultIds,skipLoading=this.skipLoading,isLoadedOnce=this.isLoadedOnce;return!skipLoading&&!isLoadedOnce&&!(0,validation/* isEmpty */.xb)(defaultIds)&&field.isDataLoading},isPickListTypeModule:function(){var field=this.field,fieldObj=field.field,_ref6=fieldObj||field,lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},type=_ref7.type;
// type 1 is for base entity modules
return!!type&&1!==type},isRemote:function(){var localSearch=this.localSearch;return!localSearch},canHideLookupIcon:function(){var hideLookupIcon=this.hideLookupIcon,isPickListTypeModule=this.isPickListTypeModule,hideDropDown=this.hideDropDown,field=this.field,userfilmoduleEnum=this.userfilmoduleEnum,_ref8=field||{},config=_ref8.config,canHide=!1;if(!(0,validation/* isEmpty */.xb)(config)){var canShowLookupWizard=this.$getProperty(config,"canShowLookupWizard",null);(0,validation/* isNull */.Ft)(canShowLookupWizard)||(canHide=!canShowLookupWizard)}return!hideDropDown&&("PICK_LIST"===userfilmoduleEnum||(canHide||hideLookupIcon||isPickListTypeModule))},canShowQuickCreateIcon:function(){var disabled=this.disabled,field=this.field,_ref9=field||{},config=_ref9.config,canShow=!1;return(0,validation/* isEmpty */.xb)(config)||(canShow=this.$getProperty(config,"canShowQuickCreate")),disabled&&(canShow=!1),canShow},isSiteEnabled:function(){var siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;return!(0,validation/* isEmpty */.xb)(currentSiteId)},isMultiple:function(){var field=this.field;return!!field.multiple},resourceModuleName:function(){var field=this.field,config=field.config,lookupModuleName=field.lookupModuleName,_ref10=config||{},isFiltersEnabled=_ref10.isFiltersEnabled,filterValue=_ref10.filterValue;if(isFiltersEnabled&&constant/* default */.Z.LOOKUP_FILTER_ENABLED_FIELDS.includes(lookupModuleName)){var moduleName=constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue];return moduleName}return null},isResourceField:function(){var field=this.field,name=field.name,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field)||"resource"===name;return isResourceField},
// To prefill the existing values, we have to send default ids in picklist api
defaultIds:function(){var modelObj=this.modelObj,selectedOptions=this.selectedOptions,isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(modelObj)||!1,defaultIds=[],selectedOptionsArr=(selectedOptions||[]).map((function(option){return parseInt(option)}));return(0,validation/* isEmpty */.xb)(selectedOptions)?(0,validation/* isEmpty */.xb)(modelObj)||isPlaceHoldersEnabled||(defaultIds=(0,validation/* isArray */.kJ)(modelObj)?(0,toConsumableArray/* default */.Z)(modelObj):[modelObj]):defaultIds=(0,toConsumableArray/* default */.Z)(selectedOptionsArr),defaultIds=defaultIds.filter((function(val){return!constant/* default */.Z.FIELD_PLACEHOLDERS.includes(val)})),defaultIds},operatorLookupModule:function(){var field=this.field,_ref11=field||{},operatorLookupModule=_ref11.operatorLookupModule;return operatorLookupModule||{}},skipSiteFilter:function(){var field=this.field,_ref12=field||{},config=_ref12.config,_ref13=config||{},_ref13$skipSiteFilter=_ref13.skipSiteFilter,skipSiteFilter=void 0!==_ref13$skipSiteFilter&&_ref13$skipSiteFilter;return skipSiteFilter},canShowSystemClear:function(){var canHideLookupIcon=this.canHideLookupIcon,isClearable=this.isClearable,modelObj=this.modelObj,disabled=this.disabled;return!canHideLookupIcon&&!disabled&&(isClearable&&!(0,validation/* isEmpty */.xb)(modelObj))}},watch:{model:function(newVal){var _this=this,currentModelValue=this.currentModelValue,isRemote=this.isRemote;isEqual_default()(newVal,currentModelValue)||(isRemote&&this.getOptions({initialFetch:!0}).then((function(options){_this.$set(_this.field,"options",options)})),this.$set(this,"modelObj",newVal))},siteId:{handler:function(newVal,oldVal){var _this2=this,isSiteEnabled=this.isSiteEnabled,skipSiteFilter=this.skipSiteFilter;skipSiteFilter||isSiteEnabled||newVal===oldVal||this.getOptions({initialFetch:!0}).then((function(options){_this2.$set(_this2.field,"options",options)}))}},parentModuleId:{handler:function(newVal,oldVal){var _this3=this;newVal!==oldVal&&this.getOptions({initialFetch:!0}).then((function(options){_this3.$set(_this3.field,"options",options)}))}},operatorLookupModule:{handler:function(newVal,oldVal){var _this4=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this4.$set(_this4.field,"options",options)}))}},"field.clientCriteria":{handler:function(newVal,oldVal){var _this5=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this5.$set(_this5.field,"options",options)}))}},categoryId:{handler:function(newVal,oldVal){var _this6=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this6.$set(_this6.field,"options",options)}))}},"field.options":{handler:function(value){var modelObj=this.modelObj;if(!(0,validation/* isEmpty */.xb)(value))if((0,validation/* isEmpty */.xb)(modelObj))this.field.selectedItems=[];else if((0,validation/* isArray */.kJ)(modelObj)){var selectedItems=value.filter((function(option){return modelObj.includes(option.value)}));this.field.selectedItems=selectedItems}else{var selectedItem=value.find((function(option){return option.value===modelObj}));this.field.selectedItems=[selectedItem]}},immediate:!0},isLoadedOnce:{handler:function(value){value&&this.$emit("optionsLoadedOnce")}}},created:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var fetchOptionsOnLoad,field,modelObj,customOptions,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:
// Have to skip fetching options initially, when module is 'resource' and filters is not enabled
if(fetchOptionsOnLoad=_this7.fetchOptionsOnLoad,field=_this7.field,modelObj=_this7.modelObj,customOptions=_this7.customOptions,_this7.currentModelValue=modelObj,_this7.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx,!fetchOptionsOnLoad){_context2.next=12;break}return _context2.next=6,_this7.getOptions({initialFetch:!0});case 6:if(_context2.t0=_context2.sent,_context2.t0){_context2.next=9;break}_context2.t0=[];case 9:options=_context2.t0,_this7.$set(_this7.field,"options",[].concat((0,toConsumableArray/* default */.Z)(customOptions),(0,toConsumableArray/* default */.Z)(options))),_this7.$set(_this7,"isLoadedOnce",!0);case 12:_this7.remoteMethod=_this7.$helpers.debounce(function(){var _ref14=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(searchText){var isDataLoading,_options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isDataLoading=field.isDataLoading,isDataLoading){_context.next=6;break}return _context.next=4,_this7.getOptions({searchText:searchText});case 4:_options=_context.sent,_this7.$set(_this7.field,"options",_options);case 6:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref14.apply(this,arguments)}}(),1e3);case 13:case"end":return _context2.stop()}}),_callee2)})))()},methods:{focus:function(){(0,validation/* isEmpty */.xb)(this.$refs["selectBox"])||this.$refs["selectBox"].focus()},getOptions:function(params){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var searchText,initialFetch,fetchOptionsMethod,field,siteId,categoryId,isRemote,defaultIds,resourceModuleName,isResourceField,skipSiteFilter,selectedOptions,_field$filters,fieldFilters,options,filters,props,perPageCount,_yield$_this8$fetchOp,_yield$_this8$fetchOp2,optionsArr,error,_ref15,message,_yield$getFieldOption,_yield$getFieldOption2,_optionsArr,_error,meta,_ref16,_message,_meta$localSearch,localSearch;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
/*
                Have to return empty options if field is of resourcetype, if filters havent be enabled
                and if no values selected already
              */
if(searchText=params.searchText,initialFetch=params.initialFetch,fetchOptionsMethod=_this8.fetchOptionsMethod,field=_this8.field,siteId=_this8.siteId,categoryId=_this8.categoryId,isRemote=_this8.isRemote,defaultIds=_this8.defaultIds,resourceModuleName=_this8.resourceModuleName,isResourceField=_this8.isResourceField,skipSiteFilter=_this8.skipSiteFilter,selectedOptions=_this8.selectedOptions,_field$filters=field.filters,fieldFilters=void 0===_field$filters?{}:_field$filters,options=[],(0,validation/* isEmpty */.xb)(resourceModuleName)||(field.resourceLookupModuleName=resourceModuleName),filters=_this8.preHookFilterConstruction(field),(0,validation/* isEmpty */.xb)(filters)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fieldFilters),filters)),(0,validation/* isEmpty */.xb)(categoryId)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field.filters),{},{category:{operator:"is",value:["".concat(categoryId)]}})),props={field:field,searchText:searchText},skipSiteFilter||(props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{siteId:siteId})),!(isResourceField&&(0,validation/* isEmpty */.xb)(resourceModuleName)&&(0,validation/* isEmpty */.xb)(defaultIds))){_context3.next=12;break}return _context3.abrupt("return",options);case 12:if(initialFetch&&isRemote&&(perPageCount=defaultIds.length>50?defaultIds.length:50,props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{page:1,perPage:perPageCount,defaultIds:defaultIds}),((0,validation/* isEmpty */.xb)(resourceModuleName)&&isResourceField||!(0,validation/* isEmpty */.xb)(selectedOptions))&&(
// Have to fetch only selected values, which is same as the number of defaultids
props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{perPage:defaultIds.length}))),_this8.$set(field,"isDataLoading",!0),(0,validation/* isEmpty */.xb)(fetchOptionsMethod)){_context3.next=25;break}return _context3.next=17,_this8.fetchOptionsMethod(props);case 17:_yield$_this8$fetchOp=_context3.sent,_yield$_this8$fetchOp2=_yield$_this8$fetchOp.options,optionsArr=void 0===_yield$_this8$fetchOp2?[]:_yield$_this8$fetchOp2,error=_yield$_this8$fetchOp.error,error&&(_ref15=error||{},message=_ref15.message,_this8.$message.error(message||"Error Occured")),options=optionsArr,_context3.next=35;break;case 25:return _context3.next=27,(0,picklist/* getFieldOptions */._K)(props);case 27:_yield$getFieldOption=_context3.sent,_yield$getFieldOption2=_yield$getFieldOption.options,_optionsArr=void 0===_yield$getFieldOption2?[]:_yield$getFieldOption2,_error=_yield$getFieldOption.error,meta=_yield$getFieldOption.meta,_error&&(_ref16=_error||{},_message=_ref16.message,_this8.$message.error(_message||"Error Occured")),meta&&(0,validation/* isEmpty */.xb)(searchText)&&(_meta$localSearch=meta.localSearch,localSearch=void 0!==_meta$localSearch&&_meta$localSearch,_this8.$set(_this8,"localSearch",localSearch)),options=_optionsArr;case 35:return _this8.$set(field,"isDataLoading",!1),_context3.abrupt("return",options);case 37:case"end":return _context3.stop()}}),_callee3)})))()},clearData:function(){this.$emit("update:model",""),this.recordSelected("")},recordSelected:function(value){var field=this.field,_this$field$options=this.field.options,options=void 0===_this$field$options?[]:_this$field$options,isMultiple=this.isMultiple,selectedValues=null;isMultiple?(selectedValues=options.filter((function(e){return(value||[]).includes(e.value)})),field.selectedItems=selectedValues):(selectedValues=options.find((function(e){return e.value==value}))||{},field.selectedItems=[],(0,validation/* isEmpty */.xb)(selectedValues)||(field.selectedItems=[selectedValues])),this.$emit("recordSelected",selectedValues,field)},openLookupFieldWizard:function(field){var disabled=this.disabled;disabled||this.$emit("showLookupWizard",field,!0)},openQuickCreate:function(){var disabled=this.disabled;disabled||(this.showQuickCreateData=!0)},setAddedRecord:function(props){var record=props.record,_ref17=record||{},id=_ref17.id,name=record.displayName||record.name||record.subject,field=this.field;field.selectedItems=[{value:id,label:name}],this.$emit("setLookupFieldValue",{field:(0,objectSpread2/* default */.Z)({},field)})}}},forms_FLookupFieldvue_type_script_lang_js=FLookupFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FLookupFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupField=component.exports},
/***/62979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FieldLoader.vue?vue&type=template&id=7252e23e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"field-loading loading-shimmer"}):_vm._e()},staticRenderFns=[],FieldLoadervue_type_script_lang_js={props:{isLoading:{type:Boolean,required:!0}}},forms_FieldLoadervue_type_script_lang_js=FieldLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FieldLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldLoader=component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/7634:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"a9487fe98c87670f4c21aa6dfd4aef8d.svg";
/***/},
/***/57197:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"5e90307bf0660533e9223683666781aa.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/21816.js.map