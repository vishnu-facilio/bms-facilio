"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[70490],{
/***/570490:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AgentAlarmSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/agent/Alarm/AgentAlarmSummary.vue?vue&type=template&id=0e840268&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-v1-alarm-overview",staticStyle:{height:"auto","overflow-y":"scroll"}},[_vm.alarmOverviewLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.alarmOverviewLoading,size:"80"}})],1):_vm.alarm&&_vm.occurrence?_c("div",{staticClass:"fc__layout__align fc__asset__main__header pT20 pB20 pL20 pR20 position-relative",staticStyle:{width:"auto","align-items":"center !important","border-bottom":"none"}},[_vm.alarm?_c("div",[_c("div",{staticClass:"wos-id",attrs:{title:"Back"}},[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.alarm.id))])]),_c("div",{staticClass:"fc-black-18 fw3 flex-middle max-width550px"},[_c("div",{staticClass:"max-width550px fw4 flex-middle"},[_vm._v(" "+_vm._s(_vm.alarm.subject)+" ")]),_vm.alarm.severity?_c("div",{staticClass:"flex-middle mT10 pL10"},[_c("div",{staticClass:"uppercase secondary-color summaryseverityTag f11",style:{"background-color":_vm.getAlarmColor(_vm.alarm)}},[_vm._v(" "+_vm._s(_vm.getAlarmDisplayName(_vm.alarm))+" ")])]):_vm._e()])]):_vm._e(),_c("div",{staticClass:"display-flex mR10 agent-alarm-summary-btn"},[_vm.alarmOverviewLoading?_vm._e():_c("div",{staticClass:"flex-middle z-10 alarm-timer"},[_c("div",{staticClass:"fc-black-12"},[_vm._v("Duration:")]),_vm.occurrence&&_vm.occurrence.createdTime&&-1===_vm.occurrence.clearedTime?_c("timer",{staticClass:"fc-red-new bold f14 p10 alarm-timer-duration",attrs:{time:_vm.occurrence.createdTime,twoDigits:!0,title:_vm._f("formatDate")(_vm.occurrence.createdTime)}}):_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n            distance: 0,\n            interactive: true,\n            theme: 'light',\n            animation: 'scale',\n            arrow: true,\n          }"}],staticClass:"fc-red-new bold f14 p10 alarm-cleared-duration",attrs:{time:_vm.occurrence.clearedTime-_vm.occurrence.createdTime,staticTime:!0,twoDigits:!0,title:_vm._f("formatDate")(_vm.occurrence.clearedTime-_vm.occurrence.createdTime)}})],1)])]):_vm._e(),_vm.alarm?_c("page",{key:_vm.alarm.id,attrs:{module:"agentAlarm",notesModuleName:_vm.notesModuleName,id:_vm.alarm.id,details:{alarm:_vm.alarm,occurrence:_vm.occurrence,id:_vm.alarm.id},primaryFields:_vm.primaryFields}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(32284)),PageBuilder=__webpack_require__(760218),Timer=__webpack_require__(114857),NewAlarmMixin=__webpack_require__(230255),validation=__webpack_require__(990260),AgentAlarmSummaryvue_type_script_lang_js={components:{Page:PageBuilder/* default */.Z,Timer:Timer/* default */.Z},mixins:[NewAlarmMixin/* default */.Z],created:function(){this.init()},props:["viewname","moduleName"],data:function(){return{notesModuleName:"basealarmnotes",currentModuleName:this.moduleName,alarmOverviewLoading:!1,primaryFields:[],currentAlarm:null}},computed:{id:function(){var paramId=this.$getProperty(this.$route,"params.id");return(0,validation/* isEmpty */.xb)(paramId)?"":parseInt(paramId)},alarm:function(){return this.currentAlarm}},watch:{id:{handler:function(){this.loadRecords()}},occurrence:function(){var currentAlarmId=this.$getProperty(this,"currentAlarm.id");this.getOccurrenceFromId(currentAlarmId),this.getEventsFromId(currentAlarmId)}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var currentAlarmId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadRecords();case 2:return currentAlarmId=_this.$getProperty(_this,"currentAlarm.id"),_context.next=5,Promise.all([_this.getOccurrenceFromId(currentAlarmId),_this.getEventsFromId(currentAlarmId)]);case 5:case"end":return _context.stop()}}),_callee)})))()},loadRecords:function(){var _arguments=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force,currentModuleName,_yield$API$fetchRecor,agentAlarm,_yield$API$fetchRecor2,alarmoccurrence;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return force=!(_arguments.length>0&&void 0!==_arguments[0])||_arguments[0],_context2.prev=1,currentModuleName=_this2.currentModuleName,_context2.next=5,api/* API */.bl.fetchRecord(currentModuleName,{id:_this2.id},{force:force});case 5:return _yield$API$fetchRecor=_context2.sent,agentAlarm=_yield$API$fetchRecor.agentAlarm,_this2.currentAlarm=agentAlarm,_context2.next=10,api/* API */.bl.fetchRecord("alarmoccurrence",{id:_this2.$getProperty(agentAlarm,"lastOccurrenceId")},{force:force});case 10:_yield$API$fetchRecor2=_context2.sent,alarmoccurrence=_yield$API$fetchRecor2.alarmoccurrence,_this2.occurrence=alarmoccurrence,_context2.next=18;break;case 15:_context2.prev=15,_context2.t0=_context2["catch"](1),_this2.$message.error(_context2.t0.message);case 18:case"end":return _context2.stop()}}),_callee2,null,[[1,15]])})))()}}},Alarm_AgentAlarmSummaryvue_type_script_lang_js=AgentAlarmSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Alarm_AgentAlarmSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"0e840268",null)
/* harmony default export */,AgentAlarmSummary=component.exports},
/***/114857:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Timer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Timer.vue?vue&type=template&id=79408276
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-timer"},[_c("div",{staticClass:"inline_flex"},[_vm.days>0?_c("div",{staticClass:"t-days"},[_vm.days<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.days)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.days))]),_vm.days<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.day"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.days"))+" ")])]):_vm._e(),_vm.days>0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_c("div",{staticClass:"t-hours"},[_vm.hours<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.hours)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.hours))]),_vm.hours<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hour"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hours"))+" ")])]),_c("div",{staticClass:"t-separate"},[_vm._v(":")]),_c("div",{staticClass:"t-mins"},[_vm.mins<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.mins)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.mins))]),_vm.mins<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.min"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.mins"))+" ")])]),_vm.days<=0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_vm.days<=0?_c("div",{staticClass:"t-secs"},[_vm.secs<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.secs)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.secs))]),_vm.secs<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.sec"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.secs"))+" ")])]):_vm._e()])])},staticRenderFns=[],Timervue_type_script_lang_js={props:["time","color","twoDigits","staticTime","static","duration"],data:function(){return{days:"",hours:"",mins:"",secs:"",bgColor:"color: "+this.color+";",intervalObj:null}},watch:{time:function(){this.initCounter()},staticTime:{handler:function(newValue,oldValue){newValue!==oldValue&&this.staticTime&&this.initCounter()}}},mounted:function(){this.initCounter()},methods:{initCounter:function(){var date,dateObj=new Date(this.time),currentTime=Date.now();if(this.staticTime){this.days="",this.hours="",this.mins="",this.secs="",this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null),date=dateObj/1e3,date<0&&date>-2&&(date=0);var d=Math.floor(date/86400),h=Math.floor(date%86400/3600),m=Math.floor(date%3600/60),s=Math.floor(date%3600%60);this.days=d>=0?d:0,this.hours=h>=0?h:0,this.mins=m>=0?m:0,this.secs=s>=0?s:0}else if(this.static){this.days="",this.hours="",this.mins="",this.secs="",date=this.duration,date<0&&date>-2&&(date=0);var _d=Math.floor(date/86400),_h=Math.floor(date%86400/3600),_m=Math.floor(date%3600/60),_s=Math.floor(date%3600%60);this.days=_d>=0?_d:0,this.hours=_h>=0?_h:0,this.mins=_m>=0?_m:0,this.secs=_s>=0?_s:0}else{date=(currentTime-dateObj)/1e3,date<0&&date>-2&&(date=0);var _d2=Math.floor(date/86400),_h2=Math.floor(date%86400/3600),_m2=Math.floor(date%3600/60),_s2=Math.floor(date%3600%60);this.days=_d2>=0?_d2:0,this.hours=_h2>=0?_h2:0,this.mins=_m2>=0?_m2:0,this.secs=_s2>=0?_s2:0,this.startCounter()}},startCounter:function(){this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null);var self=this;this.intervalObj=setInterval((function(){self.secs++,self.secs>=60&&(self.secs=0,self.mins++),self.mins>=60&&(self.mins=0,self.hours++),self.hours>=24&&(self.hours=0,self.days++)}),1e3)}}},components_Timervue_type_script_lang_js=Timervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Timervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Timer=component.exports},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/70490.js.map