"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[29139],{
/***/29139:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AgentData}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/agent/AgentData.vue?vue&type=template&id=098dd062
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"page-width-cal agent-data-page"},[_c("el-header",{staticClass:"fc-agent-main-header",attrs:{height:"80"}},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",[_c("div",{staticClass:"fc-agent-black-26"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.agent_data"))+" ")])]),_c("div",[_c("div",{staticClass:"fc-dark-blue5 f13 bold"},[_c("span",{staticClass:"fc-black-com f12 pR5 bold"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.last_received"))+" ")]),_vm.$validation.isEmpty(_vm.agents)?_c("span",[_vm._v("---")]):_vm.$validation.isEmpty(_vm.agents)?_vm._e():_c("span",[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.agentLastReceivedTime.lastDataReceivedTime))+" "),_c("div",{staticClass:"text-right f11"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(_vm.agentLastReceivedTime.lastDataReceivedTime))+" ")])])])])])]),_c("div",{staticClass:"agent-list-scroll scrollbar-style"},[_vm.loading?_c("div",{staticClass:"flex-middle fc-empty-white m10 fc-agent-empty-state"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.agents)&&!_vm.loading?_c("div",{staticClass:"height100vh fc-empty-white flex-middle justify-content-center flex-direction-column m10 fc-agent-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"q-item-label nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("agent.empty.no_agent_data"))+" ")])],1):_vm._e(),_vm.loading||_vm.$validation.isEmpty(_vm.agents)?_vm._e():_c("div",{staticClass:"fc-agent-table p10 fc-list-table-container"},[_c("el-table",{staticClass:"fc-list-view fc-table-td-height fc-table-viewchooser pB100",staticStyle:{width:"100%"},attrs:{data:_vm.agents,fit:!0,height:"auto","default-sort":{prop:"time",order:"descending"}},on:{"selection-change":_vm.selectAgent}},[_c("el-table-column",{attrs:{type:"index",width:"90",fixed:"left",label:"s.no"}}),_c("el-table-column",{attrs:{width:"180",label:"data time",sortable:"",prop:"time"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[agent.row.timestamp?_c("div",[_c("div",[_vm._v(_vm._s(_vm._f("formatDate")(agent.row.timestamp)))]),_c("div",[_vm._v(_vm._s(_vm._f("fromNow")(agent.row.timestamp)))])]):_c("div",[_vm._v("---")])]}}],null,!1,692055276)}),_c("el-table-column",{attrs:{width:"180",label:"received time",sortable:"",prop:"time"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[agent.row.arrivalTime?_c("div",[_c("div",[_vm._v(_vm._s(_vm._f("formatDate")(agent.row.arrivalTime)))]),_c("div",[_vm._v(_vm._s(_vm._f("fromNow")(agent.row.arrivalTime)))])]):_c("div",[_vm._v("---")])]}}],null,!1,1929665540)}),_c("el-table-column",{staticClass:"pL0",attrs:{label:"agent",width:"180"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_vm._v(_vm._s(agent.row.device))]}}],null,!1,3703280485)}),_c("el-table-column",{attrs:{label:"data"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("div",[_c("div",{staticClass:"mL10 fc-pdf-blue-txt-13",on:{click:function($event){return _vm.showIotMessage(agent.row)}}},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.show_message"))+" ")])])]}}],null,!1,1958184153)})],1)],1)]),_vm.showMsgJson&&_vm.showMsgJson.id?_c("el-dialog",{staticClass:"agents-dialog fc-dialog-center-container",staticStyle:{"z-index":"9999999999"},attrs:{title:"Message",visible:_vm.showMsgPopup,width:"40%","append-to-body":!0},on:{"update:visible":function($event){_vm.showMsgPopup=$event}}},[_c("div",{staticClass:"label-txt-black line-height24 height400 overflow-y-scroll pB50"},[_c("pre",{staticClass:"fc-json-view"},[_vm._v(_vm._s(_vm.showMsgJson.message))])])]):_vm._e(),_c("div",{staticClass:"help-icon-position pointer",on:{click:function($event){return _vm.helpDialogOpen()}}},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"svgs/question",iconClass:"icon icon-xxlll"}})],1),_vm.showHelpDialog?_c("agent-help",{attrs:{visibility:_vm.showHelpDialog},on:{"update:visibility":function($event){_vm.showHelpDialog=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),HelpDatavue_type_template_id_82649750_render=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(228436),__webpack_require__(648324),__webpack_require__(169358),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog25 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v("Agent Data Helper")])])]),_c("div",{staticClass:"new-body-modal pT0 pL0 pR0 mT0"},[_c("el-collapse",{staticClass:"fc-agent-collapse fc-pushing-data-collapse",attrs:{accordion:""},model:{value:_vm.activeNames,callback:function($$v){_vm.activeNames=$$v},expression:"activeNames"}},[_c("el-collapse-item",{attrs:{title:"Time",name:"1"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" Time at which the message was sent by the agent. ")])]),_c("el-collapse-item",{attrs:{title:"Agent",name:"2"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" Name of the agent which sent the message. ")])]),_c("el-collapse-item",{attrs:{title:"Data",name:"3"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" Message which was sent by the Agent ")])])],1)],1)])],1)}),HelpDatavue_type_template_id_82649750_staticRenderFns=[],HelpDatavue_type_script_lang_js={props:["visibility"],data:function(){return{activeNames:["1"]}},methods:{closeDialog:function(){this.$emit("update:visibility",!1)}}},AgentHelperDocs_HelpDatavue_type_script_lang_js=HelpDatavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(AgentHelperDocs_HelpDatavue_type_script_lang_js,HelpDatavue_type_template_id_82649750_render,HelpDatavue_type_template_id_82649750_staticRenderFns,!1,null,null,null)
/* harmony default export */,HelpData=component.exports,AgentDatavue_type_script_lang_js={title:function(){return"Agent Data"},components:{AgentHelp:HelpData},data:function(){return{showHelpDialog:!1,isNew:!0,loading:!1,agents:[],showDialog:!1,buildings:{},agent:null,listCount:"",totalCount:null,selectall:!1,selectedAgent:[],total:null,selectedAgentShutdownObj:[],selectedAgentShutdown:[],showMsgPopup:!1,showMsgJson:null,agentLastReceivedTime:[],readMore:!1}},mounted:function(){this.loadAgents()},computed:{},watch:{selectAll:function(val){var self=this;val?(this.selectedAgent=[],this.agents.filter((function(agent){self.selectedAgent.push(agent.id)}))):this.selectedAgent.length===this.agents.length&&(this.selectedAgent=[]),this.loadCount()}},methods:{activateReadMore:function(){this.readMoreSelected=!0},loadAgents:function(){var _this=this;this.loading=!0,this.$http.get("/v2/agent/data").then((function(response){_this.loading=!1,_this.agents=response.data.result&&response.data.result.data?response.data.result.data:[],_this.agentLastReceivedTime=response.data.result})).catch((function(){_this.agents=[],_this.loading=!1}))},selectAgent:function(selectedSh){this.selectedAgentShutdown=selectedSh.map((function(value){return value.id}))},agentShutdown:function(){var _this2=this;this.loading=!0;var shutdown={recordIds:this.selectedAgentShutdown};this.$http.post("/v2/agent/shutdown",shutdown).then((function(response){200===response.data.responseCode?(_this2.$message.success("Shutdown updated successfully."),_this2.loading=!1):(_this2.$message.error(response.data.message),_this2.loading=!1)}))},showAddAgent:function(){this.showDialog=!0},showIotMessage:function(agent){this.showMsgPopup=!0,this.showMsgJson=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},agent),{},{message:JSON.stringify(JSON.parse(agent.message),null,2).trim()})},helpDialogOpen:function(){this.showHelpDialog=!0}}},agent_AgentDatavue_type_script_lang_js=AgentDatavue_type_script_lang_js,AgentData_component=(0,componentNormalizer/* default */.Z)(agent_AgentDatavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AgentData=AgentData_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/29139.js.map