"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[59525,44819,84707,32686,80865,53021],{
/***/503116:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ListLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/ListLayout.vue?vue&type=template&id=75565601&scoped=true
var render=function(){var this$1=this,_vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"h100 height100 overflow-hidden list-layout-container"},[_c("div",{staticClass:"setting-header2 position-relative fp-header indoor-fp-topbar p10 new-fp-header z-index1"},[_c("portal",{attrs:{to:"employee-portal-top-header"},scopedSlots:_vm._u([{key:"default",fn:function(props){return _c("span",{},[_c("FloorSwitcher",{attrs:{floorplanId:_vm.floorplanIdFromRoute,floorId:_vm.floorId,buildingId:_vm.buildingId,building:_vm.building,floor:_vm.floor}}),props&&!props.targetRecived?_c("span",[_c("portal",{attrs:{to:"floorplan-building-swicth"}},[_c("div",{staticClass:"setting-title-block fp-chooser-new",on:{click:function($event){return _vm.showBuildingFilter(props)}}},[_c("div",{staticClass:"fc-black3-16 fw4 f15 line-height20"},[_c("i",{staticClass:"el-icon-office-building f18 mR10"}),_vm.building?_c("span",[_vm._v(_vm._s(""+_vm.building.name))]):_c("span",[_vm._v(_vm._s("Building"))]),_c("span",[_c("i",{staticClass:"el-icon-arrow-right fc-grey-text12-light f18 pR5 pL5 vertical-bottom bold"})]),_vm.floor?_c("span",[_vm._v(_vm._s(""+_vm.floor.name))]):_c("span",[_vm._v(_vm._s("Floor"))])])])])],1):_vm._e()],1)}}])}),_c("portal",{attrs:{to:"employee-portal-top-header2"},scopedSlots:_vm._u([{key:"default",fn:function(props){return _c("span",{},[_c("FloorSwitcher",{attrs:{floorplanId:_vm.floorplanIdFromRoute,floorId:_vm.floorId,buildingId:_vm.buildingId,building:_vm.building,floor:_vm.floor,diableSwitcherDialog:!0}}),props&&!props.targetRecived?_c("span",[_c("portal",{attrs:{to:"floorplan-building-swicth"}},[_c("div",{staticClass:"setting-title-block fp-chooser-new",on:{click:_vm.showBuildingFilter}},[_c("div",{staticClass:"fc-black3-16 fw4 f15 line-height20"},[_c("i",{staticClass:"el-icon-office-building f18 mR10"}),_vm.building?_c("span",[_vm._v(_vm._s(""+_vm.building.name))]):_c("span",[_vm._v(_vm._s("Building"))]),_c("span",[_c("i",{staticClass:"el-icon-arrow-right fc-grey-text12-light f18 pR5 pL5 vertical-bottom bold"})]),_vm.floor?_c("span",[_vm._v(_vm._s(""+_vm.floor.name))]):_c("span",[_vm._v(_vm._s("Floor"))])])])])],1):_vm._e()],1)}}])}),_c("portal-target",{attrs:{name:"floorplan-building-swicth"}}),_c("portal-target",{staticClass:"indoor-fp-layout-portal",attrs:{name:"indoorFloorPlanLayout"}}),_vm.portalLayout?_vm._e():_c("div",{staticClass:"action-btn setting-page-btn flex"},[_vm.showViewOption&&(_vm.showViewAssignmentOption||_vm.showAssignmentDepartmentOption||_vm.showAssignmentOwnOption)&&(_vm.showViewBookingOption||_vm.showBookingDepartmentOption||_vm.showBookingOwnOption)?_c("el-radio-group",{staticClass:"fp-mode-switch",model:{value:_vm.viewerMode,callback:function($$v){_vm.viewerMode=$$v},expression:"viewerMode"}},[_c("el-radio-button",{attrs:{label:"ASSIGNMENT"}},[_c("div",{staticClass:"flex-middle"},[_c("inline-svg",{attrs:{src:"svgs/user-check",iconClass:"icon text-center icon-sm-md"}}),_c("div",{staticClass:"pL5"},[_vm._v(" Assignment ")])],1)]),_c("el-radio-button",{attrs:{label:"BOOKING"}},[_c("div",{staticClass:"flex-middle"},[_c("inline-svg",{attrs:{src:"svgs/calendar2",iconClass:"icon text-center icon-sm-md"}}),_c("div",{staticClass:"pL5"},[_vm._v("Booking")])],1)])],1):_vm._e(),_vm.isPortalLayout?_vm._e():[_vm.showViewOption&&(_vm.showEditOption||_vm.showCreateOption)?_c("el-dropdown",{staticClass:"pointer fc-actions-floor",attrs:{trigger:"click"},on:{command:_vm.actions}},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more rotate-90 pointer"})]),_c("el-dropdown-menu",{staticClass:"dashboard-subheader-dp",attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.showEditOption?_c("el-dropdown-item",{attrs:{command:"edit"}},[_c("div",[_vm._v(" "+_vm._s(_vm.$t("common._common.edit"))+" ")])]):_vm._e(),_vm.showCreateOption?_c("el-dropdown-item",{attrs:{command:"new"}},[_c("div",[_vm._v(" "+_vm._s("Add Floor Plan")+" ")])]):_vm._e()],1)],1):_vm._e()]],2),_c("div",{staticClass:"new-search-conatiner"},[_c("IndoorFloorPlanSearchList",{attrs:{floorId:_vm.floorId}})],1),_vm.loading||"BOOKING"!==_vm.viewerMode?_vm._e():_c("div",{staticClass:"d-flex"},[_c("el-popover",{staticClass:"filter-popover",attrs:{placement:"bottom","popper-class":"p0 top filter-popover",width:"370",trigger:"click"},model:{value:_vm.showPopover,callback:function($$v){_vm.showPopover=$$v},expression:"showPopover"}},[_c("div",{staticClass:"popover-slot pointer relative",attrs:{slot:"reference"},slot:"reference"},[_c("inline-svg",{staticClass:" m-auto d-flex",attrs:{src:"svgs/employeePortal/filter-icon",iconClass:"icon"}}),_vm.showFilterTab?_c("div",{staticClass:"active-filter-indicator"}):_vm._e()],1),_c("div",{staticClass:"filter-dropdown width100"},[_c("div",{staticClass:"sticky"},[_c("div",{staticClass:"header-container"},[_c("div",{staticClass:"title"},[_vm._v(_vm._s("Filters"))]),_c("div",{staticClass:"pointer",staticStyle:{"line-height":"14px"},on:{click:function(){this$1.showPopover=!1}}},[_c("inline-svg",{attrs:{src:"svgs/ic-close",iconClass:"icon icon-md"}})],1)]),_c("div",{staticClass:"search-outer"},[_c("el-input",{staticClass:"amenity-search",attrs:{clearable:"","prefix-icon":"el-icon-search",placeholder:"Search amenities"},model:{value:_vm.amenitySearch,callback:function($$v){_vm.amenitySearch=$$v},expression:"amenitySearch"}})],1)]),_vm.filteredAmenities?_c("div",{staticClass:"amenity-container"},_vm._l(Object.keys(_vm.filteredAmenities),(function(value,key){return _c("div",{key:key,staticClass:"mB20"},[_c("div",{staticClass:"amenity-category"},[_vm._v(_vm._s(value))]),_c("div",{staticClass:"d-flex-wrap"},_vm._l(_vm.filteredAmenities[value],(function(amenity,index){return _c("div",{key:index,staticClass:"mR10 p0 mB10",attrs:{command:amenity}},[_c("el-tag",{staticClass:"amenity-name pointer",class:{"active-class":amenity.active},on:{click:function($event){return _vm.handleClick(amenity)}}},[_vm._v(_vm._s(amenity.name))])],1)})),0)])})),0):_vm._e()])])],1)],1),_vm.showFilterTab?_c("div",{staticClass:"filter-tab d-flex"},[_vm._l(_vm.amenities,(function(value,index){return _c("div",{key:index},[value.active?_c("el-tag",{staticClass:"filter-amenity-name mR10",attrs:{closable:""},on:{close:function($event){return _vm.handleClick(value)}}},[_vm._v(" "+_vm._s(value.name)+" ")]):_vm._e()],1)})),_vm.clearAll?_c("div",{staticClass:"divider-div"},[_c("el-tag",{staticClass:"filter-amenity-name pointer",on:{click:function($event){return _vm.handleCloseAll()}}},[_vm._v(_vm._s("Clear All"))])],1):_vm._e()],2):_vm._e(),_vm.switchView?_c("IndoorFloorPlanBookingsListView",{attrs:{searchText:_vm.searchText},on:{changed:function(){this$1.switchView=!this$1.switchView}}}):_vm._e(),_vm.loading||!_vm.floorplanIdFromRoute||"ASSIGNMENT"!=_vm.viewerMode||_vm.switchView?_vm.loading||!_vm.floorplanIdFromRoute||"BOOKING"!=_vm.viewerMode||_vm.switchView?_vm._e():_c("IndoorFloorPlanBookingsView",{ref:"bookingView",class:_vm.switchView?"hide":"",attrs:{id:_vm.floorplanIdFromRoute,customTime:_vm.customTime},on:{floorPlanLoaded:_vm.getFloorDetails}}):[_vm.openAssignmentDialog?_c("IndoorFloorplandialog",{on:{close:_vm.handleCloseAssignment},scopedSlots:_vm._u([{key:"main",fn:function(){return[_c("IndoorFloorPlanAssignmentView",{ref:"assignmentView",attrs:{id:_vm.floorplanIdFromRoute,building:_vm.building,floor:_vm.floor},on:{floorPlanLoaded:_vm.getFloorDetails}})]},proxy:!0}],null,!1,194879645)}):_c("IndoorFloorPlanAssignmentView",{ref:"assignmentView",attrs:{id:_vm.floorplanIdFromRoute,building:_vm.building,floor:_vm.floor},on:{floorPlanLoaded:_vm.getFloorDetails}})],_vm.fpEditor?_c("div",{staticClass:"formbuilder-fullscreen-popup floor-plan-builder height100"},[_c("FloorPlanEditor",{attrs:{id:_vm.floorplanIdFromRoute,visibile:_vm.fpEditor},on:{close:_vm.closeEditor,"update:visibile":function($event){_vm.fpEditor=$event}}})],1):_vm._e(),_vm.filterDialogOpen?_c("IndoorFloorPlanSwitcher",{attrs:{visibility:_vm.filterDialogOpen,floorplanId:_vm.floorplanIdFromRoute,floorId:_vm.floorId,buildingId:_vm.buildingId},on:{"update:visibility":function($event){_vm.filterDialogOpen=$event}}}):_vm._e(),_vm.newFp?_c("floorplanUploader",{attrs:{visibility:_vm.newFp,moduleName:"indoorfloorplan"},on:{"update:visibility":function($event){_vm.newFp=$event},saved:_vm.floorplanSaved}}):_vm._e(),_c("portal-target",{attrs:{name:"employee-portal-floor-swicther"}})],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),Layout=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(425728),__webpack_require__(526755)),IndoorFloorPlanBookingsListView=__webpack_require__(534536),api=__webpack_require__(32284),eventBus=__webpack_require__(398011),throttle=__webpack_require__(823493),throttle_default=__webpack_require__.n(throttle),router=__webpack_require__(329435),EmployeePortalFloorSwithervue_type_template_id_1301b83c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"emp-floor-swicther",on:{click:_vm.handleClick}},[_c("div",{staticClass:"emp-floor-name"},[_c("span",{staticClass:"pR5",staticStyle:{position:"relative",top:"3px"}},[_c("inline-svg",{staticStyle:{width:"16px",opacity:"0.8"},attrs:{src:"svgs/employeePortal/floormap",iconClass:"icon"}})],1),_vm.isBuildingLoading?_c("span",[_c("ShimmerDiv")],1):_vm.building?_c("span",{staticClass:"pR5"},[_vm._v(" "+_vm._s(_vm.building.name))]):_vm._e(),_c("span",{staticClass:"mR5"},[_vm._v(" / ")]),_vm.isFloorLoading?_c("span",[_c("ShimmerDiv")],1):_vm.floor?_c("span",{staticClass:"pR5"},[_vm._v(_vm._s(_vm.floor.name))]):_vm._e(),_vm.diableSwitcherDialog||_vm.isFloorLoading?_vm._e():_c("span",[_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{"font-weight":"600","font-size":"14px"}})])])]),_vm.diableSwitcherDialog?_vm._e():_c("portal",{attrs:{to:"employee-portal-floor-swicther"}},[_vm.showFilter?_c("IndoorFloorPlanSwitcher",{attrs:{visibility:_vm.showFilter,floorplanId:_vm.floorplanId,floorId:_vm.floorId,buildingId:_vm.buildingId},on:{"update:visibility":function($event){_vm.showFilter=$event},close:_vm.handleCloseFilterdilaog}}):_vm._e()],1)],1)},EmployeePortalFloorSwithervue_type_template_id_1301b83c_scoped_true_staticRenderFns=[],IndoorFloorPlanSwitcher2vue_type_template_id_de396588_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floor-filter-con floor-swicther-2"},[_c("div",{staticClass:"fp-sw-mask",on:{click:_vm.handleChange}}),_c("div",{staticClass:"floor-sw-mask-top-layer"},[_c("div",{staticClass:"floor-filter-search p0"},[_c("el-input",{staticClass:"fc-input-full-border2 emp-fc-input-full-border2",attrs:{placeholder:"Search","prefix-icon":"el-icon-search",clearable:""},model:{value:_vm.search,callback:function($$v){_vm.search=$$v},expression:"search"}})],1),_vm.recentlySwitchedFloors.length?_c("div",{staticClass:"recent-search p15"},[_c("div",{staticClass:"pB10"},[_vm._v(" Recent searches ")]),_c("div",{staticClass:"em-tag"},_vm._l(_vm.recentlySwitchedFloors,(function(floor,index){return _c("span",{key:index,staticClass:"recent-name pointer el-tag el-tag--light m5",on:{click:function($event){return _vm.changeFloorPlan(floor)}}},[_c("div",{staticClass:"recent-icon-con"},[_c("InlineSvg",{attrs:{iconClass:"icon icon-md recent-icon",src:"svgs/employeePortal/recent-floor"}})],1),_vm._v(" "+_vm._s(floor.name)+" ")])})),0)]):_vm._e(),_c("div",[_c("el-collapse",{attrs:{accordion:""},model:{value:_vm.activeName,callback:function($$v){_vm.activeName=$$v},expression:"activeName"}},_vm._l(_vm.filterdData,(function(building,index){return building.children&&building.children.length?_c("el-collapse-item",{key:index,staticClass:"em-sw-building",attrs:{title:building.name,name:String(index)}},_vm._l(building.children,(function(floor,floorIndex){return _c("div",{key:floorIndex,staticClass:"emp-sw-floor",on:{click:function($event){return _vm.changeFloorPlan(floor)}}},[_vm._v(" "+_vm._s(floor.name)+" ")])})),0):_vm._e()})),1)],1)])])},IndoorFloorPlanSwitcher2vue_type_template_id_de396588_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),IndoorFloorPlanSwitcher=(__webpack_require__(538077),__webpack_require__(61514),__webpack_require__(339772),__webpack_require__(648324),__webpack_require__(450886),__webpack_require__(517185)),IndoorFloorPlanSwitcher2vue_type_script_lang_js={extends:IndoorFloorPlanSwitcher/* default */.Z,data:function(){return{activeName:["0"],floors:[],search:null,recentlySwitchedFloors:[]}},mounted:function(){this.getRecentFloors()},computed:{filteredBuildings:function(){var _this=this,siteBuildingMap=this.siteBuildingMap,buildingandSiteMap={},buildingsList=[];return siteBuildingMap&&Object.keys(siteBuildingMap).forEach((function(siteId){var buildings=siteBuildingMap[siteId].filter((function(building){return _this.search?building.name.toLowerCase().indexOf(_this.search.toLowerCase())>-1?building:null:building}));buildings.length&&(buildingsList.push.apply(buildingsList,(0,toConsumableArray/* default */.Z)(buildings)),_this.$set(buildingandSiteMap,siteId,buildings))})),buildingsList},filteredfloor:function(){var _this2=this;return this.floors.filter((function(data){return _this2.search?data.name.toLowerCase().indexOf(_this2.search.toLowerCase())>-1?data:null:data}))},filterdData:function(){var _this3=this,data=[];return this.filteredBuildings.forEach((function(building){var d=null;d=building;var floors=_this3.filteredfloor.filter((function(rt){return rt.buildingId===building.id}));_this3.$set(d,"children",floors),data.push(d)})),data}},methods:{getRecentFloors:function(){var floorList=JSON.parse(window.localStorage.getItem("RECENTLY_SWITCHED_FLOORS"));this.recentlySwitchedFloors=null!==floorList?floorList:[]},afterFloorplanChangeHook:function(floor){null!==floor&&void 0!==floor&&floor.id&&-1===this.recentlySwitchedFloors.findIndex((function(rt){return rt.id===floor.id}))&&this.setLocalitem(floor)},setLocalitem:function(floor){var data={id:floor.id,indoorFloorPlanId:floor.indoorFloorPlanId,name:floor.name};this.recentlySwitchedFloors.push(data),this.recentlySwitchedFloors.length>3&&this.recentlySwitchedFloors.pop(),window.localStorage.setItem("RECENTLY_SWITCHED_FLOORS",JSON.stringify(this.recentlySwitchedFloors))},afterBuildingDataHook:function(){this.loadFloors()},loadFloors:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var buildings,filter,url,params,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(buildings=_this4.filteredBuildings.map((function(rt){return rt.id})),!buildings.length){_context.next=10;break}return filter={building:{operatorId:36,value:buildings.map((function(rt){return String(rt)}))},indoorFloorPlanId:{operatorId:2}},url="/v2/module/data/list",params={moduleName:"floor",viewName:"hidden-all",filters:JSON.stringify(filter)},_context.next=7,api/* API */.bl.get(url,params);case 7:_yield$API$get=_context.sent,data=_yield$API$get.data,null!==data&&void 0!==data&&data.moduleDatas&&(_this4.floors=data.moduleDatas);case 10:case"end":return _context.stop()}}),_callee)})))()}}},components_IndoorFloorPlanSwitcher2vue_type_script_lang_js=IndoorFloorPlanSwitcher2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_IndoorFloorPlanSwitcher2vue_type_script_lang_js,IndoorFloorPlanSwitcher2vue_type_template_id_de396588_render,IndoorFloorPlanSwitcher2vue_type_template_id_de396588_staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanSwitcher2=component.exports,ShimmerDivvue_type_template_id_f5a2e3b0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"shimmer-container"},[_c("div",{staticClass:"shimmer-bg title-line",style:{height:_vm.height,width:_vm.width}})])},ShimmerDivvue_type_template_id_f5a2e3b0_staticRenderFns=[],ShimmerDivvue_type_script_lang_js={props:{height:{default:"20px"},width:{default:"80px"}}},components_ShimmerDivvue_type_script_lang_js=ShimmerDivvue_type_script_lang_js,ShimmerDiv_component=(0,componentNormalizer/* default */.Z)(components_ShimmerDivvue_type_script_lang_js,ShimmerDivvue_type_template_id_f5a2e3b0_render,ShimmerDivvue_type_template_id_f5a2e3b0_staticRenderFns,!1,null,null,null)
/* harmony default export */,ShimmerDiv=ShimmerDiv_component.exports,EmployeePortalFloorSwithervue_type_script_lang_js={props:["floorplanId","floorId","buildingId","building","floor","diableSwitcherDialog"],components:{IndoorFloorPlanSwitcher:IndoorFloorPlanSwitcher2,ShimmerDiv:ShimmerDiv},data:function(){return{showFilter:!1}},computed:{isBuildingLoading:function(){var _this$building;
//temp method need proper fix
return!!(null!==(_this$building=this.building)&&void 0!==_this$building&&_this$building.name&&this.building.name.indexOf("loading")>-1)},isFloorLoading:function(){var _this$floor;
//temp method need proper fix
return!!(null!==(_this$floor=this.floor)&&void 0!==_this$floor&&_this$floor.name&&this.floor.name.indexOf("loading")>-1)}},methods:{handleClick:function(){this.showFilter=!this.showFilter},handleCloseFilterdilaog:function(){this.showFilter=!1}}},indoorFloorPlan_EmployeePortalFloorSwithervue_type_script_lang_js=EmployeePortalFloorSwithervue_type_script_lang_js,EmployeePortalFloorSwither_component=(0,componentNormalizer/* default */.Z)(indoorFloorPlan_EmployeePortalFloorSwithervue_type_script_lang_js,EmployeePortalFloorSwithervue_type_template_id_1301b83c_scoped_true_render,EmployeePortalFloorSwithervue_type_template_id_1301b83c_scoped_true_staticRenderFns,!1,null,"1301b83c",null)
/* harmony default export */,EmployeePortalFloorSwither=EmployeePortalFloorSwither_component.exports,IndoorFloorPlanSearchListvue_type_template_id_7e880160_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"emp-search-container "},[_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"fc-search-bottom-border inline width100 inline-flex self-center"},[_c("el-input",{staticClass:"width100 fc-input-full-border2 fc-input-full-border2-prefix",attrs:{size:"medium",placeholder:"Search",clearable:""},on:{input:function($event){return _vm.searchContent()},focus:function(){_vm.handleFocusSwicth()},blur:function($event){return _vm.blurSearchBox()}},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}},[_c("i",{staticClass:"el-input__icon pointer fc-grey8 f14 fwBold el-icon-search mR5",attrs:{slot:"prefix"},slot:"prefix"})])],1),_c("div",{staticClass:"search-result-component z-10"},[_c("IndoorFloorplanObjectList",{attrs:{showSearchList:_vm.showSearchList,searchText:_vm.searchText,employeesList:_vm.employeesList,isLoading:_vm.isLoading},on:{actionEmployee:_vm.actionEmployee}})],1)]),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"SWITCH FLOOR",visible:_vm.openFloorPlanDialog,width:"30%","before-close":_vm.closeDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.openFloorPlanDialog=$event}}},[_c("div",{staticClass:"height150"},[_vm.openfloorplanData?_c("div",{staticClass:"label-txt-black"},[_vm.openfloorplanData.loading?_c("span",[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("span",{staticStyle:{"word-break":"normal"}},[_vm._v(" "+_vm._s(_vm.openfloorplanData.message)+" ")])]):_vm._e()]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.openFloorPlanDialog=!1}}},[_vm._v(_vm._s("CANCEL")+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.openFloorPlan()}}},[_vm._v(_vm._s("SWITCH")+" ")])],1)])],1)},IndoorFloorPlanSearchListvue_type_template_id_7e880160_staticRenderFns=[],IndoorFloorplanObjectList=(__webpack_require__(634338),__webpack_require__(365768)),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),IndoorFloorPlanSearchListvue_type_script_lang_js={props:["floorId"],components:{IndoorFloorplanObjectList:IndoorFloorplanObjectList/* default */.Z},data:function(){return{employeesList:[],showSearchList:!1,searchText:null,isLoading:!1,openFloorPlanDialog:!1,openfloorplanData:null,employeLoading:!1}},mounted:function(){this.getEmployeeApi()},methods:{handleFocusSwicth:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.showSearchList=!0,_context.next=3,_this.employeeSearchList(_this.searchText);case 3:case"end":return _context.stop()}}),_callee)})))()},blurSearchBox:function(){var _this2=this;
// its due to @blur trigger before the click action
this.$helpers.delay(200).then((function(){_this2.showSearchList=!1}))},searchContent:debounce_default()((function(){this.employeeSearchList(this.searchText)}),100),employeeSearchList:function(searchText){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,filters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.isLoading=!0,_this3.employeesList=[],params={},filters={},filters["name"]={operatorId:5,value:[searchText]},params={moduleName:"employee",page:1,perPage:20,includeParentFilter:!0},searchText&&(params.filters=JSON.stringify(filters)),_this3.employeLoading=!0,_context2.next=10,api/* API */.bl.get("v2/module/data/list",params).then((function(_ref){var data=_ref.data;data&&(_this3.employeesList=data.moduleDatas),_this3.employeLoading=!1}));case 10:_this3.isLoading=!1;case 11:case"end":return _context2.stop()}}),_callee2)})))()},getEmployeeApi:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var params,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.employeesList=[],params={moduleName:"employee",page:1,perPage:20,includeParentFilter:!0},_this4.employeLoading=!0,_context3.next=5,api/* API */.bl.get("v2/module/data/list",params);case 5:_yield$API$get=_context3.sent,data=_yield$API$get.data,data&&(_this4.employeesList=data.moduleDatas),_this4.employeLoading=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},openFloorPlan:function(){this.openfloorplanData&&this.openfloorplanData.indoorFloorPlanId&&(this.$router.push({path:"/employee/floorplan/floor-map/indoorfloorplan/".concat(this.openfloorplanData.floorId,"/").concat(this.openfloorplanData.indoorFloorPlanId),query:{deskId:this.openfloorplanData.deskId}}),
// window.open(routeData.href, '_blank')
this.closeDialog())},closeDialog:function(){this.openFloorPlanDialog=!1},actionEmployee:function(employee){if(this.openfloorplanData={},employee&&employee.space&&employee.space.id){var floor=employee.space.floor;if(floor&&floor.id)if(floor.id===this.floorId)this.emitData("desks",employee.space);else{var data={deskId:employee.space.id,deskName:employee.space.name,employeeName:employee.name,floorId:floor.id,message:"",loading:!0,indoorFloorPlanId:-1};this.openfloorplanData=data,this.openFloorPlanDialog=!0,this.getFloor()}}},getFloor:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var floorId,params,_yield$API$post,data,floor,building,employeeName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return floorId=_this5.openfloorplanData.floorId,params={floorId:floorId},_context4.next=4,api/* API */.bl.post("v2/floor/details",params);case 4:_yield$API$post=_context4.sent,data=_yield$API$post.data,data&&(floor=data.floor,building=floor.building,_this5.openfloorplanData.indoorFloorPlanId=floor.indoorFloorPlanId,employeeName=_this5.openfloorplanData.employeeName,_this5.openfloorplanData.message="".concat(employeeName," is located at ").concat(floor.name," ").concat(building&&building.name?", "+building.name:"",". Do you want to switch the floor plan?")),_this5.openfloorplanData.loading=!1;case 8:case"end":return _context4.stop()}}),_callee4)})))()},emitData:function(modulesName,data){
// this.$emit('focus', modulesName, data)
eventBus/* eventBus */.Y.$emit("focusMarker",modulesName,data)}}},components_IndoorFloorPlanSearchListvue_type_script_lang_js=IndoorFloorPlanSearchListvue_type_script_lang_js,IndoorFloorPlanSearchList_component=(0,componentNormalizer/* default */.Z)(components_IndoorFloorPlanSearchListvue_type_script_lang_js,IndoorFloorPlanSearchListvue_type_template_id_7e880160_render,IndoorFloorPlanSearchListvue_type_template_id_7e880160_staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanSearchList=IndoorFloorPlanSearchList_component.exports,IndoorFloorplandialogvue_type_template_id_314a58c0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"indoor-floorplan-editor fc-indoor-floorplan-editor-view indoor-floorplan-editor-new",attrs:{id:"dialogviewer"}},[_c("div",{staticClass:"setting-header2 position-relative fp-header indoor-fp-topbar flex-middle"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"fc-black3-16 fw4 flex-middle cursor-default"},[_c("portal-target",{staticClass:"emp-floor-switcher",attrs:{name:"employee-portal-top-header2","slot-props":{targetRecived:!0,disableDialog:!1}}}),_c("span",{staticClass:"fc-grey3-text14 bold f14"})],1)]),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none",attrs:{type:"primary"},on:{click:function($event){return _vm.$emit("close")}}},[_vm._v("Done")])],1)]),_c("el-tabs",{staticClass:"fp-new-layout-conatiner",on:{"tab-click":_vm.handleClick},model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_c("el-tab-pane",{attrs:{label:"Assignment",name:"assignment"}},[_c("div",{staticClass:"main-layout"},[_c("div",{staticClass:"dialog-sidebar"},[_c("portal-target",{attrs:{name:"ASSIGNMENT_SIDEBAR"}})],1),_vm._t("main")],2)])],1)],1)])},IndoorFloorplandialogvue_type_template_id_314a58c0_staticRenderFns=[],IndoorFloorplandialogvue_type_script_lang_js={data:function(){return{activeTab:"assignment",PORTAL_NAME:"assignment-view-floor-switch"}}},indoorFloorPlan_IndoorFloorplandialogvue_type_script_lang_js=IndoorFloorplandialogvue_type_script_lang_js,IndoorFloorplandialog_component=(0,componentNormalizer/* default */.Z)(indoorFloorPlan_IndoorFloorplandialogvue_type_script_lang_js,IndoorFloorplandialogvue_type_template_id_314a58c0_render,IndoorFloorplandialogvue_type_template_id_314a58c0_staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorplandialog=IndoorFloorplandialog_component.exports,ListLayoutvue_type_script_lang_js={extends:Layout["default"],components:{IndoorFloorPlanBookingsListView:IndoorFloorPlanBookingsListView/* default */.Z,FloorSwitcher:EmployeePortalFloorSwither,IndoorFloorPlanSearchList:IndoorFloorPlanSearchList,IndoorFloorplandialog:IndoorFloorplandialog},data:function(){return{switchView:!1,searchText:null,amenities:[],amenitySearch:null,amenityFields:[],amenitiesList:[],showPopover:!1,openAssignmentDialog:!1}},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.openAssignmentDialog=!1,_this.defaultMode(),_context.next=4,_this.getAmenityMeta();case 4:return _context.next=6,_this.getAmenities();case 6:_this.initDefaultEvents();case 7:case"end":return _context.stop()}}),_callee)})))()},computed:{isPortalLayout:function(){var PORTALS=this.$constants.appCategory.PORTALS;return!(!(0,router/* getApp */.wx)()||(0,router/* getApp */.wx)().appCategory!==PORTALS)},formatedAmenityObj:function(){var _this2=this,obj={},amenities=this.amenities,amenityEnumMap=this.amenityEnumMap;return amenities.forEach((function(element){if(_this2.$set(element,"active",!1),amenityEnumMap){var key=amenityEnumMap[element.category]||"";obj["".concat(key)]||(obj["".concat(key)]=[]),obj["".concat(key)].push(element)}})),obj},filteredAmenities:function(){var formatedAmenityObj=this.formatedAmenityObj,amenitySearch=this.amenitySearch;if(amenitySearch){var obj={};return Object.keys(formatedAmenityObj).forEach((function(element){formatedAmenityObj[element].forEach((function(value){value.name.toLowerCase().includes(amenitySearch.toLowerCase())&&(obj["".concat(element)]||(obj["".concat(element)]=[]),obj["".concat(element)].push(value))}))})),obj}return formatedAmenityObj},clearAll:function(){var _this3=this,count=0;return Object.keys(this.filteredAmenities).forEach((function(element){_this3.filteredAmenities[element].forEach((function(value){value.active&&(count+=1)}))})),count>=2},showFilterTab:function(){var _this4=this,count=0;return Object.keys(this.filteredAmenities).forEach((function(element){_this4.filteredAmenities[element].forEach((function(value){value.active&&(count+=1)}))})),count>=1}},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("OPEN_ASSIGNMENT_IN_DIALOG",(function(){}))},methods:{defaultMode:function(){this.viewerMode="BOOKING"},initDefaultEvents:function(){var _this5=this;eventBus/* eventBus */.Y.$on("OPEN_ASSIGNMENT_IN_DIALOG",(function(){_this5.openAssignmentDialog=!0}))},handleCloseAssignment:function(){this.openAssignmentDialog=!1,eventBus/* eventBus */.Y.$emit("SWITCH_FLOORPLAN_MODE","BOOKING")},handleCloseAll:function(){var _this6=this;Object.keys(this.filteredAmenities).forEach((function(element){_this6.filteredAmenities[element].forEach((function(value){value.active=!1}))})),this.ResetFilter()},handleClick:throttle_default()((function(amenityObj){amenityObj.active=!amenityObj.active,this.applyFilter()}),1500),switcher:function(){var _this$$route;null!==(_this$$route=this.$route)&&void 0!==_this$$route&&null!==(_this$$route=_this$$route.query)&&void 0!==_this$$route&&_this$$route.featureId&&this.$router.replace({query:{}}),this.switchView=!this.switchView},getAmenityMeta:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,error,data,amenityFields,obj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/module/meta?moduleName=amenity");case 2:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this7.$message.error(error.message||"Error Occured"):(amenityFields=data.meta.fields||[],obj=amenityFields.find((function(f){return"category"==f.name})),_this7.amenityEnumMap=null!==obj&&void 0!==obj&&obj.enumMap?obj.enumMap:{});case 6:case"end":return _context2.stop()}}),_callee2)})))()},getAmenities:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,api/* API */.bl.get("/v3/modules/data/list?viewName=all&page=1&includeParentFilter=false&withCount=true&perPage=50&moduleName=amenity");case 2:_yield$API$get2=_context3.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?_this8.$message.error(error.message||"Error Occured"):_this8.amenities=data.amenity||[];case 6:case"end":return _context3.stop()}}),_callee3)})))()},applyFilter:function(){var _this9=this,array=[];Object.keys(this.filteredAmenities).forEach((function(element){_this9.filteredAmenities[element].forEach((function(value){value.active&&array.push(value.id)}))})),eventBus/* eventBus */.Y.$emit("amenity-filter",array)},applySelectFilter:function(){this.applyFilter(),this.showPopover=!1},ResetFilter:function(){eventBus/* eventBus */.Y.$emit("reset-amenity"),this.showPopover=!1}}},indoorFloorPlan_ListLayoutvue_type_script_lang_js=ListLayoutvue_type_script_lang_js,ListLayout_component=(0,componentNormalizer/* default */.Z)(indoorFloorPlan_ListLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,"75565601",null)
/* harmony default export */,ListLayout=ListLayout_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/59525.js.map