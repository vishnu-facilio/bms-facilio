(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[83023],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/628539:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FEditor.vue?vue&type=template&id=0c30c6a9
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"editor",attrs:{id:_vm.tid?_vm.tid:Math.random().toString(36).substr(2,9)}})},staticRenderFns=[],createClass=__webpack_require__(862833),classCallCheck=__webpack_require__(513087),inherits=__webpack_require__(793806),createSuper=__webpack_require__(624343),quill=(__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(676095)),quill_default=__webpack_require__.n(quill),FEditorvue_type_script_lang_js={props:["value","placeholder","editorModules","disabled","tid","registerCustomModules"],data:function(){return{quill:null}},mounted:function(){this.registerPrototypes(),this.setupQuillEditor(),this.handleInitialContent(),this.registerEditorEventListeners(),this.$emit("ready",this.quill)},watch:{value:function(val){val===this.quill.root.innerHTML||this.quill.hasFocus()||(this.quill.root.innerHTML=val)},disabled:function(status){this.quill.enable(!status)}},beforeDestroy:function(){this.quill=null,delete this.quill},methods:{setupQuillEditor:function(){var modules={};this.editorModules&&(modules=this.editorModules);var editorConfig={debug:!1,modules:modules,theme:"snow",placeholder:this.placeholder?this.placeholder:"",readOnly:!!this.disabled&&this.disabled};this.quill=new(quill_default())(this.$el,editorConfig)},registerPrototypes:function(){quill_default().prototype.getHTML=function(){return this.container.querySelector(".ql-editor").innerHTML},quill_default().prototype.getWordCount=function(){return this.container.querySelector(".ql-editor").innerText.length};var Block=quill_default()["import"]("blots/block"),Div=function(_Block){(0,inherits/* default */.Z)(Div,_Block);var _super=(0,createSuper/* default */.Z)(Div);function Div(){return(0,classCallCheck/* default */.Z)(this,Div),_super.apply(this,arguments)}return(0,createClass/* default */.Z)(Div)}(Block);Div.tagName="div",Div.blotName="div",Div.allowedChildren=Block.allowedChildren,Div.allowedChildren.push(Block),quill_default().register(Div,!1),this.registerCustomModules&&this.registerCustomModules(quill_default())},registerEditorEventListeners:function(){this.quill.on("text-change",this.handleTextChange),this.quill.on("selection-change",this.handleSelectionChange),this.listenForEditorEvent("text-change"),this.listenForEditorEvent("selection-change"),this.listenForEditorEvent("editor-change")},listenForEditorEvent:function(type){var _this=this;this.quill.on(type,(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_this.$emit.apply(_this,[type].concat(args))}))},handleInitialContent:function(){this.value&&(this.quill.root.innerHTML=this.value)},handleSelectionChange:function(range,oldRange){!range&&oldRange?this.$emit("blur",this.quill):range&&!oldRange&&this.$emit("focus",this.quill)},handleTextChange:function(){var editorContent="<div><br></div>"===this.quill.getHTML()?"":this.quill.getHTML();this.$emit("input",editorContent)},removeFormat:function(){this.quill.removeFormat(0,this.quill.getLength())}}},components_FEditorvue_type_script_lang_js=FEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FEditor=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/94505:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TextCardPopup}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/TextCardPopup.vue?vue&type=template&id=031f2052
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("el-dialog",{attrs:{title:(_vm.isNew?"Add":"Edit")+" Text",visible:_vm.visibility,"append-to-body":!0,"before-close":_vm.closeDialog,"custom-class":"floorplan-property-dialog graphic-object-dialog fc-dialog-center-container setup-dialog60 text-card-dialog"},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"text-editor-body"},[_c("div",{staticClass:"f-quill ql-snow"},[_c("f-editor",{attrs:{editorModules:_vm.quillEditorConfig},model:{value:_vm.data,callback:function($$v){_vm.data=$$v},expression:"data"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]),_vm.data&&this.widget&&this.widget.widget?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.updateObjectProps}},[_vm._v(_vm._s("UPDATE"))]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v(_vm._s("SAVE"))])],1)]):_vm._e()},staticRenderFns=[],colors=__webpack_require__(519898),FEditor=__webpack_require__(628539),TextCardPopupvue_type_script_lang_js={props:["visibility","widget"],components:{FEditor:FEditor/* default */.Z},data:function(){return{data:null,quillEditorConfig:{toolbar:[["bold","italic","underline","link",{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{size:["small",!1,"large","huge"]},{header:[1,2,3,4,5,6,!1]},{color:colors/* default */.Z.textCardColors},{background:colors/* default */.Z.textCardColors},{align:["","right","center","justify"]}]]}}},mounted:function(){this.getData()},computed:{isNew:function(){return!(this.data&&this.widget&&this.widget.widget)}},methods:{getData:function(){this.widget&&this.widget.widget&&this.widget.widget.dataOptions.metaJson&&(this.data=this.widget.widget.dataOptions.metaJson)},closeDialog:function(){this.$emit("update:visibility",!1),this.$emit("close")},save:function(){this.$emit("add",this.data)},updateObjectProps:function(){this.widget.widget.dataOptions.metaJson=this.data,this.$emit("update",this.data)}}},components_TextCardPopupvue_type_script_lang_js=TextCardPopupvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_TextCardPopupvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TextCardPopup=component.exports},
/***/565304:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ComponentChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/DashboardCompoents/ComponentChooser.vue?vue&type=template&id=407154f9
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-user-filter-manager"},[_c("el-dialog",{staticClass:"db-user-filter-manager-dialog",attrs:{visible:_vm.dialogVisible,"show-close":!1,"append-to-body":!0,title:"Add components",width:"70%","before-close":_vm.handleClose}},[_c("div",{staticClass:"body"},[_c("div",{staticClass:"filter-config-container"},[_c("div",{staticClass:"cp-border-right width20"},[_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.tabs,(function(value,key){return _c("div",{key:key,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-tab pointer",class:{active:_vm.activeName===value},on:{click:function($event){return _vm.setOption(value)}}},[_vm._v(" "+_vm._s(key)+" ")])])})),0)]),"analytics"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2  width100 pR10",attrs:{filterable:""},model:{value:_vm.selectAnalyticsType,callback:function($$v){_vm.selectAnalyticsType=$$v},expression:"selectAnalyticsType"}},_vm._l(_vm.analyticsReportTypes,(function(value,key){return _c("el-option",{key:key,attrs:{value:value,label:key}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.analytics,callback:function($$v){_vm.$set(_vm.search,"analytics",$$v)},expression:"search.analytics"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.analyticsLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.filteredAnalyticsReports&&_vm.filteredAnalyticsReports.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.filteredAnalyticsReports,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer bonder-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.name)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.reports.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Reports available ")])],1)]],2)])]):_vm._e(),"pivot"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-8"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.pivotReports,callback:function($$v){_vm.$set(_vm.search,"pivotReports",$$v)},expression:"search.pivotReports"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.pivotReportsLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.pivotReportsList&&_vm.pivotReportsList.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.pivotReportsList,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer bonder-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.name)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.reports.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Reports available ")])],1)]],2)])]):_vm._e(),"report"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2  width100 pR10",attrs:{filterable:""},on:{change:_vm.setModuleName},model:{value:_vm.selectedModule,callback:function($$v){_vm.selectedModule=$$v},expression:"selectedModule"}},_vm._l(_vm.modulesList,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.name,label:m.displayName}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.report,callback:function($$v){_vm.$set(_vm.search,"report",$$v)},expression:"search.report"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.reportLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.selectedReportsWithFolder&&_vm.selectedReportsWithFolder.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.selectedReportsWithFolder,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer bonder-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.name)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.reports.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Reports available ")])],1)]],2)])]):"view"===_vm.activeName?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right  cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR10",attrs:{filterable:""},on:{change:_vm.setModuleName},model:{value:_vm.selectedModule,callback:function($$v){_vm.selectedModule=$$v},expression:"selectedModule"}},_vm._l(_vm.modulesList,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.name,label:m.displayName}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.view,callback:function($$v){_vm.$set(_vm.search,"view",$$v)},expression:"search.view"}})],1)])]),_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 80px)"}},[_vm.viewLoading?_c("div",{staticClass:"filter-config-left col-12"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"filter-config-left col-12"},[_vm.selectediVewsWithFolder&&_vm.selectediVewsWithFolder.length?_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.selectediVewsWithFolder,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer border-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.label)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.views.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.displayName},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0):[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No Views available ")])],1)]],2)])]):"graphics"===_vm.activeName&&_vm.$helpers.isLicenseEnabled("GRAPHICS")?_c("div",{staticClass:" row width50"},[_c("div",{staticClass:"header-area p20 col-12 cp-border-right cp-border-bottom"},[_c("div",{staticClass:"report-search row"},[_c("div",{staticClass:"col-4"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR10",attrs:{filterable:""},model:{value:_vm.selectedAssetCatergoryId,callback:function($$v){_vm.selectedAssetCatergoryId=$$v},expression:"selectedAssetCatergoryId"}},_vm._l(_vm.filteredAssetCategory,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.id,label:m.name}})})),1)],1),_c("div",{staticClass:"col-4"}),_c("div",{staticClass:"col-4"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,"suffix-icon":"el-icon-search",placeholder:"Search"},on:{input:function($event){return _vm.searchReport()}},model:{value:_vm.search.graphics,callback:function($$v){_vm.$set(_vm.search,"graphics",$$v)},expression:"search.graphics"}})],1)])]),_c("div",{staticClass:"filter-config-left col-12",staticStyle:{height:"calc(60vh - 80px)",overflow:"auto"}},[_c("div",{staticClass:"filter-config-accordian"},_vm._l(_vm.getfullGraphicsList,(function(folder,moduleIndex){return _c("div",{key:moduleIndex,staticClass:"accordian-item"},[_c("div",{staticClass:"accordian-item-header pointer border-top-none",on:{click:function($event){return _vm.expand(folder)}}},[_vm._v(" "+_vm._s(folder.label)+" "),_c("i",{staticClass:"accordian-arrow",class:[{expanded:folder.expand}]})]),folder.expand?_c("div",{staticClass:"accordian-item-body"},[_c("div",{staticClass:"module-fields-container"},_vm._l(folder.list.filter((function(rt){return!rt.disabled})),(function(report,fieldIndex){return _c("div",{key:fieldIndex,staticClass:"module-field"},[_c("el-checkbox",{staticStyle:{border:"none"},attrs:{label:report.name},on:{change:function($event){return _vm.getselectedData(report,fieldIndex)}},model:{value:report.selected,callback:function($$v){_vm.$set(report,"selected",$$v)},expression:"report.selected"}})],1)})),0)]):_vm._e()])})),0)])]):_vm._e(),_c("div",{staticClass:" row width30"},[_c("div",{staticClass:" row width100",staticStyle:{height:"calc(60vh - 10px)"}},[_c("div",{staticClass:"filter-config-right col-12"},[_c("div",{staticClass:"selcted-filters-title"},[_vm._v(" SELECTED COMPONENTS ")]),_vm.selectedData&&_vm.selectedData.length?[_c("draggable",_vm._b({attrs:{list:_vm.selectedData}},"draggable",_vm.fieldSectionDragOptions,!1),_vm._l(_vm.selectedData,(function(report,index){return _c("div",{key:index,staticClass:"mB10 mT15"},[_c("div",{staticClass:"field-row"},[_c("div",{staticClass:"task-handle mR10 pointer mT10"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_c("div",{staticClass:"mT-auto mB-auto"},[report.optionName&&"view"===report.optionName?_c("div",[_vm._v(" "+_vm._s(report.displayName||"")+" ")]):_c("div",[_vm._v(" "+_vm._s(report.name||"")+" ")]),_c("div",{staticClass:"secondary-text pT5",staticStyle:{color:"#c0c4cb","font-weight":"400","font-size":"11px"}},[_vm._v(" "+_vm._s(report.typeDisplayName?report.typeDisplayName+" "+(report.moduleDisplayName?"in "+report.moduleDisplayName:""):"")+" ")])]),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_c("div",{staticClass:"mR10 inline"},[_c("i",{staticClass:"el-icon-delete pointer trash-icon",on:{click:function($event){report.selected=!1,_vm.deleteselectedData(index)}}})])])])])})),0)]:[_c("div",{staticClass:"emptyIcon text-center",staticStyle:{"margin-top":"50%"}},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xlg"}}),_c("div",{staticClass:"fc-black-24  f14 text-center"},[_vm._v(" No components selected ")])],1)]],2)])])])]),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.handleClose}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.addToDashboard}},[_vm._v("Done")])],1)])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),vuedraggable_umd=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(909980)),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),api=__webpack_require__(32284),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),ComponentChooservue_type_script_lang_js={components:{draggable:vuedraggable_umd_default()},props:["data","reportLoading"],data:function(){return{analyticsLoading:!1,pivotReportsLoading:!1,dialogVisible:!0,viewLoading:!0,selectedModule:"workorder",selectAnalyticsType:"all",selectedAssetCatergoryId:-1,activeName:"analytics",fieldSectionDragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0},tabs:{"Analytical Reports":"analytics","Module Reports":"report","Pivot Reports":"pivot",Views:"view",Graphics:"graphics"},search:{report:"",view:"",graphics:"",analytics:"",pivotReports:""},analyticsReportTypes:{All:"all",Portfolio:"PORTFOLIO",Building:"BUILDING",Heatmap:"HEAT_MAP",Treemap:"TREE_MAP",Scatter:"SCATTER"},selectedReports:[],selectedviews:[],selectedData:[],modulesList:[],viewsList:[],analyticsReports:[],pivotReports:[]}},created:function(){var _this=this;this.$store.dispatch("loadAssetCategory"),this.getView(),this.loadAnalyticsReport(),this.loadPivotReports(),api/* API */.bl.get("v2/automation/module").then((function(_ref){var data=_ref.data;_this.modulesList=data.modules,_this.modulesList.forEach((function(rt){_this.$set(rt,"id",rt.moduleId)})),_this.modulesList.push({displayName:"Building performance",name:"energydata",id:-1}),_this.modulesList.push({displayName:"Fault detection and diagnostics",name:"alarm",id:-2})}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{filteredAssetCategory:function(){var data={name:"All",id:-1};return[(0,objectSpread2/* default */.Z)({},data)].concat((0,toConsumableArray/* default */.Z)(this.assetCategory))},getLicenseEnabledModules:function(){var getLicenseEnabledModules=this.data.getLicenseEnabledModules;return getLicenseEnabledModules||[]},newReportTree:function(){var _this2=this,reports=this.data.reports,search=this.search;return reports?(reports.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,report.typeDisplayName="Module Report",report.optionName="report",folder.moduleId&&(report.moduleDisplayName=_this2.getModuleName(folder.moduleId)),_this2.$set(report,"selected",_this2.isSelectedData(report)),_this2.compareString(report.name,search.report)?report.disabled=!1:report.disabled=!0}))})),reports.filter((function(rt){if(rt.reports){var rp=rt.reports.filter((function(report){return!report.disabled}));if(rp&&rp.length)return rp}return null}))):[]},reportTree:function(){var _this3=this,reportTree=this.data.reportTree,search=this.search;return reportTree?(reportTree.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,report.typeDisplayName="Module Report",report.optionName="report",folder.moduleId&&(report.moduleDisplayName=_this3.getModuleName(folder.moduleId)),_this3.$set(report,"selected",_this3.isSelectedData(report)),_this3.compareString(report.name,search.report)?report.disabled=!1:report.disabled=!0}))})),reportTree.filter((function(rt){if(rt.reports){var rp=rt.reports.filter((function(report){return!report.disabled}));if(rp&&rp.length)return rp}return null}))):[]},allreports:function(){var _this$data=this.data,reports=_this$data.reports,reportTree=_this$data.reportTree;return reports&&!reportTree?reports.map((function(rt){return rt.reports})):!reports&&reportTree?this.concatArray(reportTree.map((function(rt){return rt.reports}))):reports&&reportTree?[].concat((0,toConsumableArray/* default */.Z)(this.concatArray(reports.map((function(rt){return rt.reports})))),(0,toConsumableArray/* default */.Z)(this.concatArray(reportTree.map((function(rt){return rt.reports}))))):[]},selectedReportsWithFolder:function(){var newReportTree=this.newReportTree,reportTree=this.reportTree,r=[],rt=[];return newReportTree&&newReportTree.length&&(r=newReportTree),reportTree&&reportTree.length&&(rt=reportTree),[].concat((0,toConsumableArray/* default */.Z)(r),(0,toConsumableArray/* default */.Z)(rt))},selectediVewsWithFolder:function(){
// let { supportedModules, customModuleList } = this
// let r = []
// let rt = []
// if (supportedModules && supportedModules.length) {
//   r = supportedModules
// }
// if (customModuleList && customModuleList.length) {
//   rt = customModuleList
// }
// return [...r, ...rt]
return this.supportedModules},supportedModules:function(module){var _this4=this,viewsList=this.viewsList,search=this.search;
// let { supportedModules } = this.data
return viewsList?(viewsList.forEach((function(folder){folder.views&&folder.views.forEach((function(report){report.folderName=folder.label,report.typeDisplayName="View",report.optionName="view",module&&(report.moduleName=module.selectedModule),folder.moduleId&&(report.moduleDisplayName=_this4.getModuleName(folder.moduleId)),_this4.compareString(report.displayName,search.view)?report.disabled=!1:report.disabled=!0}))})),viewsList.filter((function(rt){if(rt.views){var views=rt.views.filter((function(report){return!report.disabled}));if(views&&views.length)return views}return null}))):[]},customModuleList:function(){var _this5=this,customModuleList=this.data.customModuleList,search=this.search;return customModuleList?(customModuleList.forEach((function(folder){folder.list&&folder.list.forEach((function(report){report.folderName=folder.label,report.typeDisplayName="View",report.optionName="view",folder.moduleId&&(report.moduleDisplayName=_this5.getModuleName(folder.moduleId)),_this5.compareString(report.displayName,search.view)?report.disabled=!1:report.disabled=!0}))})),customModuleList.filter((function(rt){if(rt.list){var list=rt.list.filter((function(report){return!report.disabled}));if(list&&list.length)return list}return null}))):[]},allviews:function(){var _this$data2=this.data,customModuleList=_this$data2.customModuleList,supportedModules=_this$data2.supportedModules;return customModuleList&&!supportedModules?customModuleList.map((function(rt){return rt.list})):!customModuleList&&supportedModules?this.concatArray(supportedModules.map((function(rt){return rt.list}))):customModuleList&&supportedModules?[].concat((0,toConsumableArray/* default */.Z)(this.concatArray(supportedModules.map((function(rt){return rt.list})))),(0,toConsumableArray/* default */.Z)(this.concatArray(customModuleList.map((function(rt){return rt.list}))))):[]},getfullGraphicsList:function(){var _this6=this,graphicsData=this.graphicsList.filter((function(rt){return rt.assetCategoryId===_this6.selectedAssetCatergoryId})),data={label:"Graphics",expand:!0,list:-1===this.selectedAssetCatergoryId?this.graphicsList:graphicsData};return[(0,objectSpread2/* default */.Z)({},data)]},analyticsList:function(){var _this7=this,analyticsReports=this.analyticsReports,search=this.search;return analyticsReports?(analyticsReports.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,folder.moduleId&&(report.moduleDisplayName=_this7.getModuleName(folder.moduleId)),_this7.$set(report,"selected",_this7.isSelectedData(report)),_this7.compareString(report.name,search.analytics)?report.disabled=!1:report.disabled=!0}))})),analyticsReports.filter((function(rt){if(rt.reports){var reports=rt.reports.filter((function(report){return!report.disabled}));if(reports&&reports.length)return reports}return null}))):[]},pivotReportsList:function(){var _this8=this,pivotReports=this.pivotReports,search=this.search;
//pivot reports that match search string
return pivotReports?(pivotReports.forEach((function(folder){folder.reports&&folder.reports.forEach((function(report){report.folderName=folder.name,folder.moduleId&&(report.moduleDisplayName=_this8.getModuleName(folder.moduleId)),_this8.$set(report,"selected",_this8.isSelectedData(report)),_this8.compareString(report.name,search.pivotReports)?report.disabled=!1:report.disabled=!0}))})),pivotReports.filter((function(rt){if(rt.reports){var reports=rt.reports.filter((function(report){return!report.disabled}));if(reports&&reports.length)return reports}return null}))):[]},filteredAnalyticsReports:function(){var analyticsList=this.analyticsList,selectAnalyticsType=this.selectAnalyticsType;return"all"===selectAnalyticsType?analyticsList:analyticsList.filter((function(folder){var reports=folder.reports.filter((function(report){return report.analyticsTypeEnum===selectAnalyticsType}));return reports&&reports.length?reports:null}))},graphicsList:function(){var _this9=this,graphicsList=this.data.graphicsList,search=this.search;return graphicsList?(graphicsList.forEach((function(graphics){graphics.typeDisplayName="Graphics",graphics.optionName="graphics",_this9.compareString(graphics.name,search.analytics)?graphics.disabled=!1:graphics.disabled=!0})),graphicsList):[]},selectedGraphicsList:function(){return this.graphicsList?this.graphicsList.filter((function(report){return report&&report.selected?report:null})):[]}}),methods:{loadAnalyticsReport:function(){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this10.analyticsLoading=!0,url="/v3/report/folders?moduleName=energyData",_context.next=4,api/* API */.bl.get(url).then((function(_ref2){var data=_ref2.data;_this10.analyticsReports=data.reportFolders;var i=0;_this10.analyticsReports.forEach((function(folder){0===i?_this10.$set(folder,"expand",!0):_this10.$set(folder,"expand",!1),_this10.$set(folder,"label",folder.displayName),folder.reports.forEach((function(rt){_this10.$set(rt,"selected",_this10.isSelectedData(rt)),_this10.$set(rt,"disabled",!1),_this10.$set(rt,"disabled",!1),_this10.$set(rt,"folderName",folder.displayName),_this10.$set(rt,"typeDisplayName","Analytical Report"),_this10.$set(rt,"optionName","report"),_this10.$set(rt,"moduleDisplayName","Analytical Report")})),i++})),_this10.analyticsLoading=!1})).catch((function(){_this10.analyticsLoading=!1}));case 4:case"end":return _context.stop()}}),_callee)})))()},loadPivotReports:function(){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var url,_yield$API$get,data,error,i;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this11.pivotReportsLoading=!0,url="/v3/report/folders?moduleName=energyData&isPivot=true",_context2.next=4,api/* API */.bl.get(url);case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this11.pivotReports=data.reportFolders,i=0,_this11.pivotReports.forEach((function(folder){0===i?_this11.$set(folder,"expand",!0):_this11.$set(folder,"expand",!1),_this11.$set(folder,"label",folder.displayName),folder.reports.forEach((function(rt){_this11.$set(rt,"selected",_this11.isSelectedData(rt)),_this11.$set(rt,"disabled",!1),_this11.$set(rt,"disabled",!1),_this11.$set(rt,"folderName",folder.displayName),_this11.$set(rt,"typeDisplayName","Pivot Report"),_this11.$set(rt,"optionName","report"),_this11.$set(rt,"moduleDisplayName","Pivot Report")})),i++}))),_this11.pivotReportsLoading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},getView:function(moduleName){var _this12=this,selectedModule=this.selectedModule;this.viewLoading=!0,this.viewsList=[];var displayname="Work orders";moduleName&&(displayname=this.modulesList.find((function(rt){return rt.name===moduleName})).displayName);var url="v2/views/viewList?moduleName=".concat(selectedModule),query=this.$route.query,_ref3=query||{},appId=_ref3.appId;(0,validation/* isEmpty */.xb)(appId)||(url+="&appId=".concat(appId)),api/* API */.bl.get(url).then((function(_ref4){var data=_ref4.data;if(data.groupViews){var groups=data.groupViews;groups.forEach((function(folder){_this12.$set(folder,"expand",!1),_this12.$set(folder,"label",folder.displayName),folder.views.forEach((function(rt){_this12.$set(rt,"selected",_this12.isSelectedData(rt)),_this12.$set(rt,"disabled",!1),_this12.$set(rt,"disabled",!1),_this12.$set(rt,"folderName",folder.displayName),_this12.$set(rt,"typeDisplayName","View"),_this12.$set(rt,"optionName","view"),_this12.$set(rt,"moduleDisplayName",displayname)}))})),_this12.viewsList=groups}_this12.viewLoading=!1}))},isSelectedData:function(component){var isCompoentd=this.selectedData.findIndex((function(rt){return rt.id===component.id?rt:null}));return isCompoentd>-1},getModuleName:function(moduleId){var m=this.modulesList.find((function(rt){return rt.id===moduleId}));return m&&m.displayName?m.displayName:""},compareString:function(string1,string2){return""===string2||!!(string1&&string2&&string1.toLowerCase().indexOf(string2.toLowerCase())>=0)},searchReport:function(){var activeName=this.activeName,search=this.search;"analytics"===activeName&&""!==search.report?this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!0})):"report"===activeName&&""===search.report&&this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!1})),"report"===activeName&&""!==search.report?this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!0})):"report"===activeName&&""===search.report&&this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!1})),"view"===activeName&&""!==search.view?this.selectediVewsWithFolder.forEach((function(rt){rt.expand=!0})):"view"===activeName&&""===search.view&&this.selectediVewsWithFolder.forEach((function(rt){rt.expand=!1})),"pivot"===activeName&&""!==search.pivotReports?this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!0})):"pivot"===activeName&&""===search.pivotReports&&this.selectedReportsWithFolder.forEach((function(rt){rt.expand=!1}))},addToDashboard:function(){var _this13=this;this.selectedReports.forEach((function(rt){_this13.$set(rt,"optionName","report")})),this.selectedviews.forEach((function(rt){_this13.$set(rt,"optionName","view")})),this.selectedGraphicsList.forEach((function(rt){_this13.$set(rt,"optionName","graphics")})),
// let data = [
//   ...this.selectedReports,
//   ...this.selectedviews,
//   ...this.selectedGraphicsList,
// ]
this.$emit("addElement",this.selectedData),this.handleClose()},setOption:function(name){this.activeName=name,this.$emit("option",name)},close:function(){this.$emit("close")},handleClose:function(){this.close(),this.$emit("resetreportData")},expand:function(folder){this.$set(folder,"expand",!folder.expand)},concatArray:function(array){return[].concat.apply([],array)},setModuleName:function(){"view"===this.activeName&&this.getView(this.selectedModule),this.$emit("setModuleName",this.selectedModule,this.selectedData)},deleteselectedData:function(index){this.selectedData.splice(index,1)},getselectedData:function(data){
// let selectedReports = this.concatArray(this.allreports).filter(report => {
//   if (report && report.selected) {
//     return report
//   }
// })
// let selectedviews = this.concatArray(this.allviews).filter(report => {
//   if (report && report.selected) {
//     return report
//   }
// })
// let graphicsList = this.graphicsList.filter(report => {
//   if (report && report.selected) {
//     return report
//   }
// })
// this.selectedData = [
//   ...selectedReports,
//   ...selectedviews,
//   ...graphicsList,
// ]
if(data.selected)this.selectedData.push(data);else{var findData=this.selectedData.findIndex((function(rt){return rt.id===data.id}));this.deleteselectedData(findData)}},getViewData:function(){this.selectedviews=this.concatArray(this.allviews).filter((function(report){return report&&report.selected?report:null}))},handleClick:function(){}}},DashboardCompoents_ComponentChooservue_type_script_lang_js=ComponentChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(DashboardCompoents_ComponentChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ComponentChooser=component.exports},
/***/52965:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return DashboardEditer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/DashboardEditer.vue?vue&type=template&id=d419d0ee
var CardLayoutMixin_render,CardLayoutMixin_staticRenderFns,DashboardComponentMixins_render,DashboardComponentMixins_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dashboard-main-section"},["new"===_vm.mode?_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"new-create-dashboard-header fc-theme-color flex-middle justify-between"},[_c("div",{staticStyle:{width:"40%","padding-left":"5px",display:"inline-flex"}},[_c("div",[_c("el-input",{staticClass:"create-dashboard-input-title",attrs:{autofocus:!0,placeholder:"Enter the Dashboard name"},model:{value:_vm.newdashboard.label,callback:function($$v){_vm.$set(_vm.newdashboard,"label",$$v)},expression:"newdashboard.label"}})],1),_vm.folderLoading?_vm._e():_c("div",{staticClass:"pointer"},[_c("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"click","popper-class":"p0 dashboard-folder-chooser"},model:{value:_vm.chooseFolderPopover,callback:function($$v){_vm.chooseFolderPopover=$$v},expression:"chooseFolderPopover"}},[_c("el-row",{staticClass:"p10 border-bottom1px fol-header"},[_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"bold"},[_vm._v("Choose Folder")])]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"pull-right"},[_c("div",{on:{click:function($event){_vm.showAddDashboardfolder=!0}}},[_c("i",{staticClass:"el-icon-folder-add f18 pointer"})])])])],1),_c("el-row",{},[_c("el-col",{staticClass:"p10",attrs:{span:24}},[_c("div",{},[_c("el-input",{staticClass:"fc-input-full-border4 fc-small-btn",attrs:{size:"small","suffix-icon":"el-icon-search",placeholder:"Search Folder"},model:{value:_vm.dashboardFolderQuery,callback:function($$v){_vm.dashboardFolderQuery=$$v},expression:"dashboardFolderQuery"}})],1)]),_c("el-col",{staticClass:"dashboard-folder-height p10",attrs:{span:24}},_vm._l(_vm.filteredDashboardList,(function(folder,index){return _c("div",{key:index,staticClass:"pointer p10 dashboard-folder f13",class:{active:_vm.selectedDashoardFolder.id===folder.id,bold:_vm.selectedDashoardFolder.id===folder.id},on:{click:function($event){_vm.handleSelect(folder),_vm.chooseFolderPopover=!1}}},[_vm.selectedDashoardFolder.id===folder.id?_c("i",{staticClass:"el-icon-folder pR3",staticStyle:{color:"#ef508f"}}):_c("i",{staticClass:"el-icon-folder pR3"}),_vm._v(" "+_vm._s(folder.name)+" "),_vm.selectedDashoardFolder.id===folder.id?_c("div",{staticClass:"pull-right"},[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"green"}})]):_vm._e()])})),0)],1),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_c("div",{staticClass:"display-flex text-t-none"},[_c("div",{staticClass:"f14 pL10"},[_vm._v(_vm._s(" in "))]),_c("div",{staticClass:"display-flex btn-effect-1"},[_c("i",{staticClass:"el-icon-folder f18 pR5 primary-font"}),_c("div",{staticClass:"primary-font f14 ellipsis"},[_vm._v(" "+_vm._s(_vm.selectedDashoardFolder.name)+" ")])])])])],1)],1)]),_c("div",{staticClass:"create-dashboard-btn-section"},[_c("el-dropdown",{on:{command:_vm.handleButton}},[_c("el-button",{staticClass:"pT10 PR20 fc-create-btn mL10 mR10 f13",attrs:{type:"primary"}},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Add"),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"addText"}},[_vm._v("Add Text")]),_c("el-dropdown-item",{attrs:{command:"addImage"}},[_vm._v("Add Image")]),_c("el-dropdown-item",{attrs:{command:"addComponent"}},[_vm._v("Add Component")]),_vm.canShowNewCardBuilder?_c("el-dropdown-item",{attrs:{command:"addCard"}},[_vm._v("Add Card")]):_vm._e()],1)],1),_c("el-button",{staticClass:"plain f13",staticStyle:{height:"35px !important"},attrs:{size:"medium"},on:{click:function($event){return _vm.cancel()}}},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.cancel"))+" ")]),_c("el-button",{staticClass:"setup-el-btn f13 mR10",staticStyle:{height:"35px !important"},attrs:{size:"medium",disabled:_vm.dashboardSave,type:"primary",loading:_vm.dashboardSave},on:{click:_vm.loadSupportedModules}},[_vm._v(" "+_vm._s(_vm.dashboardSave?"Saving":_vm.$t("panel.dashboard.save")))])],1)])])]):_vm.dashboard&&!_vm.loading?_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"new-create-dashboard-header fc-theme-color flex-middle justify-between visibility-visible-actions"},[_c("div",{staticClass:"pull-left width30"},[_c("div",{staticClass:"flex-middle width100 justify-content-end"},[_c("el-input",{staticClass:"create-dashboard-input-title newreport-title-input dashboard-title-input",attrs:{autofocus:!0,placeholder:"Enter Alternative Dashboard Name"},model:{value:_vm.dashboard.label,callback:function($$v){_vm.$set(_vm.dashboard,"label",$$v)},expression:"dashboard.label"}}),_c("div",{staticClass:"pointer"},[_c("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"click","popper-class":"p0 dashboard-folder-chooser"},model:{value:_vm.chooseFolderPopover,callback:function($$v){_vm.chooseFolderPopover=$$v},expression:"chooseFolderPopover"}},[_c("el-row",{staticClass:"p10 border-bottom1px fol-header"},[_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"bold"},[_vm._v("Choose Folder")])]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"pull-right"},[_c("div",{on:{click:function($event){_vm.showAddDashboardfolder=!0}}},[_c("i",{staticClass:"el-icon-folder-add f18 pointer"})])])])],1),_c("el-row",{},[_c("el-col",{staticClass:"p10",attrs:{span:24}},[_c("div",{},[_c("el-input",{staticClass:"fc-input-full-border4 fc-small-btn",attrs:{size:"small","suffix-icon":"el-icon-search",placeholder:"Search Folder"},model:{value:_vm.dashboardFolderQuery,callback:function($$v){_vm.dashboardFolderQuery=$$v},expression:"dashboardFolderQuery"}})],1)]),_c("el-col",{staticClass:"dashboard-folder-height p10",attrs:{span:24}},_vm._l(_vm.filteredDashboardList,(function(folder,index){return _c("div",{key:index,staticClass:"pointer p10 dashboard-folder f13",class:{active:_vm.selectedDashoardFolder.id===folder.id,bold:_vm.selectedDashoardFolder.id===folder.id},on:{click:function($event){_vm.handleSelect(folder),_vm.chooseFolderPopover=!1}}},[_vm.selectedDashoardFolder.id===folder.id?_c("i",{staticClass:"el-icon-folder pR3",staticStyle:{color:"#ef508f"}}):_c("i",{staticClass:"el-icon-folder pR3"}),_vm._v(" "+_vm._s(folder.name)+" "),_vm.selectedDashoardFolder.id===folder.id?_c("div",{staticClass:"pull-right"},[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"green"}})]):_vm._e()])})),0)],1),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_c("div",{staticClass:"display-flex text-t-none"},[_c("div",{staticClass:"f14 pL10"},[_vm._v(_vm._s(" in "))]),_c("div",{staticClass:"display-flex btn-effect-1"},[_c("i",{staticClass:"el-icon-folder f18 pR5 primary-font"}),_c("div",{staticClass:"primary-font f14 ellipsis"},[_vm._v(" "+_vm._s(_vm.selectedDashoardFolder.name)+" ")])])])])],1)],1)],1)]),_c("div",{staticClass:"flex-middle width100 justify-content-end"},[_c("div",{staticClass:"flex-middle create-dashboard-btn-section"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pointer",attrs:{title:"Edit Dashboard Tabs"}},[_c("el-popover",{attrs:{"popper-class":"dashboard-option-dialog",placement:"bottom",width:"300",trigger:"click"}},[_c("div",[_c("div",{staticClass:" dashboard-option-header p10"},[_vm._v(" Tab Options ")]),_c("div",{staticClass:"p10"},[_c("div",{staticClass:"row pT10"},[_c("div",{staticClass:"col-6"},[_vm._v("Tabs")]),_c("div",{staticClass:"col-6"},[_c("el-switch",{staticClass:"pull-right el-input-textbox-full-border",on:{change:function($event){return _vm.showconfirmationDilog()}},model:{value:_vm.dashboardOptions.showTabs,callback:function($$v){_vm.$set(_vm.dashboardOptions,"showTabs",$$v)},expression:"dashboardOptions.showTabs"}})],1)]),_c("div",{staticClass:"row pT10"},[_c("div",{staticClass:"col-6 self-center"},[_vm._v("Tab Position")]),_c("div",{staticClass:"col-6"},[_c("el-select",{staticClass:"pull-right el-input-textbox-full-border",attrs:{placeholder:"Please select the position"},model:{value:_vm.dashboardOptions.dashboardTabPlacement,callback:function($$v){_vm.$set(_vm.dashboardOptions,"dashboardTabPlacement",$$v)},expression:"dashboardOptions.dashboardTabPlacement"}},[_c("el-option",{attrs:{label:"Top",value:1}}),_c("el-option",{attrs:{label:"Left",value:2}})],1)],1)])])]),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_c("img",{staticClass:"delete-icon mL5",staticStyle:{height:"20px",width:"20px","margin-right":"3px","margin-top":"3p"},attrs:{src:__webpack_require__(215748)},on:{click:function($event){_vm.showDashboardOption=!0}}})])])],1)]),_c("div",{staticClass:"flex-middle create-dashboard-btn-section dashboard-folder"},[_c("el-dropdown",{on:{command:_vm.handleButton}},[_c("el-button",{staticClass:"pT10 PR20 fc-create-btn mL10 mR10 f13",attrs:{type:"primary"}},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Add"),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"addText"}},[_vm._v("Add Text")]),_c("el-dropdown-item",{attrs:{command:"addImage"}},[_vm._v("Add Image")]),_c("el-dropdown-item",{attrs:{command:"addComponent"}},[_vm._v("Add Component")]),_vm.canShowNewCardBuilder?_c("el-dropdown-item",{attrs:{command:"addCard"}},[_vm._v("Add Card")]):_vm._e()],1)],1)],1),_c("el-button",{staticClass:"plain f13",staticStyle:{height:"35px !important"},attrs:{size:"medium"},on:{click:function($event){return _vm.cancel()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.cancel"))+" ")]),_c("el-button",{staticClass:"setup-el-btn mR10 f13",staticStyle:{height:"35px !important"},attrs:{size:"medium",type:"primary",loading:_vm.dashboardSave},on:{click:_vm.saveMultiTab}},[_vm._v(_vm._s(_vm.dashboardSave?"Saving":_vm.$t("panel.dashboard.save")))])],1)])])]):_vm._e(),_c("div",{staticClass:"row",staticStyle:{position:"relative"}},["new"!==_vm.mode||_vm.dashboardLayout.length?_c("div",{staticClass:"col-12 container-section",class:{fullWidth:!0===_vm.collapseSidebar},style:_vm.getHeight},[_c("el-row",{staticClass:"height-100"},[_vm.dashboardTabContexts&&_vm.dashboardTabContexts.length>0&&2===_vm.dashboardOptions.dashboardTabPlacement?_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"dashboard-tab-sidebar view-panel"},[_vm.dashboardTabContexts&&_vm.dashboardTabContexts.length>0?_c("div",{staticClass:"dashboard-tab-sidebar-scroll"},_vm._l(_vm.dashboardTabContexts,(function(folder,index){return _c("div",{key:index,staticClass:"dashboard-folder-container"},[_c("div",{staticClass:"dfolder-name",class:{active:_vm.dashboardTabId===folder.id},on:{click:function($event){return _vm.expand(folder)}}},[_c("div",{staticClass:"mL5"},[_c("span",[_vm._v(_vm._s(folder.name))]),folder.childTabs?_c("div",{staticClass:"dfolder-icon fR"},[folder.expand?_c("i",{staticClass:"el-icon-arrow-down"}):_c("i",{staticClass:"el-icon-arrow-right"})]):_vm._e()])]),_c("div",{directives:[{name:"show",rawName:"v-show",value:folder.expand,expression:"folder.expand"}],staticClass:"dfolder-children"},_vm._l(folder.childTabs,(function(childFolder,cId){return _c("div",{key:cId,class:{active:_vm.dashboardTabId===childFolder.id},on:{click:function($event){return _vm.changeDashboardTabId(childFolder.id)}}},[_c("span",{staticClass:"mL5"},[_vm._v(_vm._s(childFolder.name))])])})),0)])})),0):_vm._e(),_c("div",{staticClass:"addTab-btn view-manager-btn",on:{click:function($event){return _vm.toggleDashboardTabEditor()}}},[_c("i",{staticClass:"el-icon-setting"}),_c("span",{staticClass:"label mL10 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("home.dashboard.tab_manager"))+" ")])])])]):_vm._e(),1===_vm.dashboardOptions.dashboardTabPlacement&&_vm.dashboardTabContexts&&_vm.dashboardTabContexts.length>0?_c("el-col",{attrs:{span:24}},[_c("dashboard-top-tab",{attrs:{edit:!0,dashboardTabContexts:_vm.dashboardTabContexts,dashboardTabId:_vm.dashboardTabId},on:{toggleDashboardTabEditor:_vm.toggleDashboardTabEditor,changeDashboardTabId:_vm.changeDashboardTabId}})],1):_vm._e(),_c("el-col",{staticClass:"height-100",attrs:{span:_vm.tabsEnabled?20:24}},[_c("div",{staticClass:"height100 scrollable dashboardmainlayout"},[_vm.loading||!_vm.dashboardLayout||_vm.dashboardTabLoading?_c("div",[_c("div",{staticClass:"sk-cube-grid"},[_c("div",{staticClass:"sk-cube sk-cube1"}),_c("div",{staticClass:"sk-cube sk-cube2"}),_c("div",{staticClass:"sk-cube sk-cube3"}),_c("div",{staticClass:"sk-cube sk-cube4"}),_c("div",{staticClass:"sk-cube sk-cube5"}),_c("div",{staticClass:"sk-cube sk-cube6"}),_c("div",{staticClass:"sk-cube sk-cube7"}),_c("div",{staticClass:"sk-cube sk-cube8"}),_c("div",{staticClass:"sk-cube sk-cube9"})])]):_c("div",{staticClass:"dashboard-container edit-dashboard-container",class:{editmode:_vm.editMode},on:{dragenter:_vm.containerEntry}},[_vm.$route.query.filters?_c("dashboard-filter"):_vm._e(),_vm.isDraging?_c("div",{class:{dragzone:1==_vm.isDraging},on:{drop:_vm.drop,dragover:_vm.allowDrop}},[_c("div",{staticClass:"dropArea"},[_vm._v(" "+_vm._s(_vm.$t("panel.drop"))+" "),_c("el-dialog",{attrs:{title:"Select Building","modal-append-to-body":!1,"custom-class":"select-building-dialog",visible:_vm.dialogVisible,width:"20%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("el-select",{attrs:{placeholder:"Please select a building"},model:{value:_vm.selectedBuilding,callback:function($$v){_vm.selectedBuilding=$$v},expression:"selectedBuilding"}},_vm._l(_vm.buildings,(function(building,index){return _c("el-option",{key:index,attrs:{label:building.name,value:building.id}})})),1),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v(_vm._s(_vm.$t("panel.share.cancel")))]),_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.selectBuildings()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)],1),_c("el-dialog",{attrs:{title:"WEB CARD","modal-append-to-body":!1,"custom-class":"select-building-dialog webcard",visible:_vm.webcardVisible,width:"20%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.webcardVisible=$event}}},[_c("el-input",{attrs:{placeholder:"Enter the URL"},model:{value:_vm.webUrl,callback:function($$v){_vm.webUrl=$$v},expression:"webUrl"}}),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.cancel")))]),_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.selectwebcard()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)],1),_c("el-dialog",{class:{readingmode4:4===_vm.readingCard.mode,editmode:_vm.readingCard.editmode},attrs:{"custom-class":"select-building-dialog select-reading-dialog","modal-append-to-body":!1,visible:_vm.readingpopup,width:_vm.readingCard.editmode?"90%":"80%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.readingpopup=$event}}},[_c("div",{staticClass:"new-header-container"},[_vm.readingCard.editmode?_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.edit_read_card"))+" ")])]):_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.add_read_card"))+" ")])])]),_c("div",{class:{"mT20 mL10 mR40":_vm.readingCard.editmode,"mT20 mL40 mR40":!_vm.readingCard.editmode}},[_c("div",{staticClass:"row"},[_vm.readingCard.editmode?_vm._e():_c("div",{staticClass:"reading-card-layout-changer col-5"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"card-layout-big pointer col-6",class:{active:1===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=1}}},[_c("div",{staticClass:"rd-conatiner"},[_c("div",{staticClass:"sample-card-content"},[_c("div",{staticClass:"card-small-heading"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.energy_usage"))+" ")]),_c("div",{staticClass:"card-static-reading"},[_vm._v(" 999 "),_c("span",{staticClass:"card-reading-value"},[_vm._v("kWh")])]),_c("div",{staticClass:"f12 bold"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.ths_mnth"))+" ")])])])]),_c("div",{staticClass:"card-layout-big pointer layout-3 col-6",class:{active:3===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=3}}},[_c("div",{staticClass:"rd-conatiner text-center"},[_c("img",{staticClass:"svg-icon",attrs:{src:__webpack_require__(723815)}})])]),_c("div",{staticClass:"card-layout-small pointer col-6",class:{active:2===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=2}}},[_c("div",{staticClass:"rd-conatiner"},[_c("div",{staticClass:"sample-card-content"},[_c("div",{staticClass:"card-small-heading"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.energy_usage"))+" ")]),_c("div",{staticClass:"card-static-reading"},[_vm._v(" 999 "),_c("span",{staticClass:"card-reading-value"},[_vm._v("kWh")])]),_c("div",{staticClass:"f12 bold"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.ths_mnth"))+" ")])])])]),_c("div",{staticClass:"card-layout-big pointer layout-3 col-6",class:{active:4===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=4}}},[_c("div",{staticClass:"rd-conatiner text-center"},[_c("img",{staticClass:"svg-icon",attrs:{src:__webpack_require__(665600)}})])])])]),4===_vm.readingCard.mode?_c("div",{staticClass:"reading-card-data-selecter col-7",class:{"col-12":_vm.readingCard.editmode}},[_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.add_read"))+" ")]),_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading"},model:{value:_vm.addreadingVisible2,callback:function($$v){_vm.addreadingVisible2=$$v},expression:"addreadingVisible2"}},[_c("f-add-data-point",{ref:"addDataPointForm",attrs:{showLastValue:!0,source:"dashboardedit",newReading:!0,editdata:_vm.readingCard},on:{save:_vm.getDatapoint,cancel:_vm.cancelDataPointAdder}}),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{slot:"reference",autofocus:!0,placeholder:3===_vm.readingCard.mode?"Click to add Reading Graph data":"Click to add Reading",disabled:!0},slot:"reference",model:{value:_vm.readingCard.readingName,callback:function($$v){_vm.$set(_vm.readingCard,"readingName",$$v)},expression:"readingCard.readingName"}})],1)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.title"))+" ")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{autofocus:!0,placeholder:"Enter the title"},model:{value:_vm.readingCard.title,callback:function($$v){_vm.$set(_vm.readingCard,"title",$$v)},expression:"readingCard.title"}})],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.add_tgt_read"))+" ")]),_c("div",{staticClass:"row readingcard-graph-container"},[_c("div",{staticClass:"col-6"},[_c("el-select",{staticClass:"el-input-textbox-full-border col-9",attrs:{placeholder:"Select the option"},model:{value:_vm.readingCard.targetreading.targetmode,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"targetmode",$$v)},expression:"\n                                    readingCard.targetreading.targetmode\n                                  "}},[_c("el-option",{attrs:{label:"Set constant",value:"constant"}}),_c("el-option",{attrs:{label:"Reading",value:"reading"}})],1)],1),_c("div",{staticClass:"col-6"},["reading"===_vm.readingCard.targetreading.targetmode?_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading  fc-popover-p0"},model:{value:_vm.addreadingVisible3,callback:function($$v){_vm.addreadingVisible3=$$v},expression:"addreadingVisible3"}},[_c("f-add-data-point",{ref:"addDataPointForm1",attrs:{showLastValue:!0,source:"dashboardedit",newReading:!0,editdata:_vm.readingCard.targetreading},on:{save:_vm.getTragetDatapoint,cancel:_vm.cancelDataPointAdder}}),_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border",attrs:{slot:"reference",autofocus:!0,placeholder:"Click to add target reading",disabled:!0},slot:"reference",model:{value:_vm.readingCard.targetreading.readingName,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"readingName",$$v)},expression:"\n                                      readingCard.targetreading.readingName\n                                    "}})],1):_vm._e(),"constant"===_vm.readingCard.targetreading.targetmode?_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border",attrs:{autofocus:!0,placeholder:"Enter only traget value"},model:{value:_vm.readingCard.targetreading.count,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"count",$$v)},expression:"readingCard.targetreading.count"}}):_vm._e()],1)])]),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.max"))+" ")]),_c("div",{staticClass:"row readingcard-graph-container"},[_c("div",{staticClass:"col-8"},[_c("el-select",{staticClass:"el-input-textbox-full-border col-12",attrs:{placeholder:"Select the option"},model:{value:_vm.readingCard.targetreading.maxmode,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"maxmode",$$v)},expression:"readingCard.targetreading.maxmode"}},[_c("el-option",{attrs:{label:"Same as target Reading",value:"usetarget"}}),_c("el-option",{attrs:{label:"Set constant",value:"constant"}}),_c("el-option",{attrs:{label:"Percentage of target reading",value:"percentage"}})],1)],1),"constant"===_vm.readingCard.targetreading.maxmode?_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border col-4",attrs:{autofocus:!0,placeholder:"Enter only Max value"},model:{value:_vm.readingCard.targetreading.maxValue,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"maxValue",$$v)},expression:"readingCard.targetreading.maxValue"}}):"usetarget"===_vm.readingCard.targetreading.maxmode?_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border col-4",attrs:{autofocus:!0,disabled:!0,placeholder:""}}):_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border col-4",attrs:{autofocus:!0,placeholder:"Enter only max %"},model:{value:_vm.readingCard.targetreading.maxpercentage,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"maxpercentage",$$v)},expression:"\n                                  readingCard.targetreading.maxpercentage\n                                "}})],1)]),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.period"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.operatorId,callback:function($$v){_vm.$set(_vm.readingCard,"operatorId",$$v)},expression:"readingCard.operatorId"}},[_vm._l(_vm.getdateOperators().filter((function(rt){return"Range"===rt.label})),(function(dateRange,index){return[_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})]}))],2)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.aggregation"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.aggregationFunc,callback:function($$v){_vm.$set(_vm.readingCard,"aggregationFunc",$$v)},expression:"readingCard.aggregationFunc"}},_vm._l(_vm.aggregateFunctions,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.value}})})),1)],1),_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{model:{value:_vm.readingCard.targetreading.enableCenterText1,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"enableCenterText1",$$v)},expression:"\n                                readingCard.targetreading.enableCenterText1\n                              "}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.enable_center_label"))+" ")])],1)]):_c("div",{staticClass:"reading-card-data-selecter col-7",class:{"col-12":_vm.readingCard.editmode}},[_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.select_reading"))+" ")]),_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading"},model:{value:_vm.addreadingVisible2,callback:function($$v){_vm.addreadingVisible2=$$v},expression:"addreadingVisible2"}},[_c("f-add-data-point",{ref:"addDataPointForm",attrs:{showLastValue:!0,source:"dashboardedit",newReading:!0,editdata:_vm.readingCard},on:{save:_vm.getDatapoint,cancel:_vm.cancelDataPointAdder}}),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{slot:"reference",autofocus:!0,placeholder:3===_vm.readingCard.mode?"Click to add Reading Graph data":"Click to add Reading",disabled:!0},slot:"reference",model:{value:_vm.readingCard.readingName,callback:function($$v){_vm.$set(_vm.readingCard,"readingName",$$v)},expression:"readingCard.readingName"}})],1)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.title"))+" ")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{autofocus:!0,placeholder:"Enter the title"},model:{value:_vm.readingCard.title,callback:function($$v){_vm.$set(_vm.readingCard,"title",$$v)},expression:"readingCard.title"}})],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.period"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.operatorId,callback:function($$v){_vm.$set(_vm.readingCard,"operatorId",$$v)},expression:"readingCard.operatorId"}},_vm._l(_vm.getdateOperators().filter((function(rt){return"Range"===rt.label})),(function(dateRange,index){return _c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})})),1)],1),3===_vm.readingCard.mode?_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.aggregation"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.legend,callback:function($$v){_vm.$set(_vm.readingCard,"legend",$$v)},expression:"readingCard.legend"}},_vm._l(_vm.aggregateFunctions,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.name}})})),1)],1):_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.aggregation"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.aggregationFunc,callback:function($$v){_vm.$set(_vm.readingCard,"aggregationFunc",$$v)},expression:"readingCard.aggregationFunc"}},_vm._l(_vm.aggregateFunctions,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.value}})})),1)],1),1===_vm.readingCard.mode&&2===_vm.readingCard.readingType&&_vm.$helpers.isLicenseEnabled("CONTROL_ACTIONS")&&6===_vm.readingCard.aggregationFunc?_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{model:{value:_vm.readingCard.write,callback:function($$v){_vm.$set(_vm.readingCard,"write",$$v)},expression:"readingCard.write"}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.enable_control")))])],1):_vm._e(),1===_vm.readingCard.mode&&6===_vm.readingCard.aggregationFunc&&_vm.readingCard&&_vm.readingCard.readings&&_vm.readingCard.readings.readingField&&_vm.colorMapSupported[_vm.readingCard.readings.readingField.dataTypeEnum]?_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{on:{change:function($event){return _vm.setColorMapProperties(_vm.readingCard)}},model:{value:_vm.readingCard.colorMap,callback:function($$v){_vm.$set(_vm.readingCard,"colorMap",$$v)},expression:"readingCard.colorMap"}},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.condition_format")))])],1):_vm._e(),2===_vm.readingCard.mode&&2===_vm.readingCard.readingType&&_vm.$helpers.isLicenseEnabled("CONTROL_ACTIONS")&&6===_vm.readingCard.aggregationFunc?_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{model:{value:_vm.readingCard.write,callback:function($$v){_vm.$set(_vm.readingCard,"write",$$v)},expression:"readingCard.write"}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.enable_control")))])],1):_vm._e(),3===_vm.readingCard.mode?_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.graph_aggregation"))+" ")]),_c("div",{staticClass:"row readingcard-graph-container"},[_c("div",{staticClass:"col-3 readingcard-graph-agg"},[_vm._v(" "+_vm._s(_vm.$util.getCardLabelfromOperatorId(_vm.readingCard.operatorId))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border col-9",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.aggregationFunc,callback:function($$v){_vm.$set(_vm.readingCard,"aggregationFunc",$$v)},expression:"readingCard.aggregationFunc"}},_vm._l(_vm.aggregateFunctions2,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.value}})})),1)],1)]):_vm._e(),_vm.readingCard.colorMap&&!_vm.readingCard.readings?_c("spinner",{attrs:{show:_vm.readingCard.colorMap&&!_vm.readingCard.readings,size:"80"}}):_vm._e(),_vm.readingCard.colorMap&&_vm.readingCard.readings&&_vm.readingCard.readings.readingField&&_vm.colorMapSupported[_vm.readingCard.readings.readingField.dataTypeEnum]&&Object.keys(_vm.readingCard.colorMapConfig).length?_c("div",{staticClass:"reading-card-container"},["BOOLEAN"===_vm.readingCard.readings.readingField.dataTypeEnum?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.value"))+" ")]),_c("div",{staticClass:"col-6"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v("Bg")])]),_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2 self-center"},[_vm._v("0")]),_c("div",{staticClass:"col-6 self-center"},[_c("el-input",{staticClass:"el-input-textbox-full-border fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.min.label,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.min,"label",$$v)},expression:"\n                                      readingCard.colorMapConfig.BOOLEAN.min\n                                        .label\n                                    "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.min.textColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.min,"textColor",$$v)},expression:"\n                                      readingCard.colorMapConfig.BOOLEAN.min\n                                        .textColor\n                                    "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.min.bgColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.min,"bgColor",$$v)},expression:"\n                                      readingCard.colorMapConfig.BOOLEAN.min\n                                        .bgColor\n                                    "}})],1)]),_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2 self-center"},[_vm._v("1")]),_c("div",{staticClass:"col-6 self-center"},[_c("el-input",{staticClass:"el-input-textbox-full-border fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.max.label,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.max,"label",$$v)},expression:"\n                                      readingCard.colorMapConfig.BOOLEAN.max\n                                        .label\n                                    "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.max.textColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.max,"textColor",$$v)},expression:"\n                                      readingCard.colorMapConfig.BOOLEAN.max\n                                        .textColor\n                                    "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.max.bgColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.max,"bgColor",$$v)},expression:"\n                                      readingCard.colorMapConfig.BOOLEAN.max\n                                        .bgColor\n                                    "}})],1)])]):_vm._e(),"ENUM"===_vm.readingCard.readings.readingField.dataTypeEnum&&_vm.readingCard.readings.readingField.enumMap&&Object.keys(_vm.readingCard.readings.readingField.enumMap).length&&_vm.readingCard.colorMapConfig["ENUM"]?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.value"))+" ")]),_c("div",{staticClass:"col-6"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v("Bg")])]),_vm.render?_vm._l(_vm.readingCard.colorMapConfig["ENUM"],(function(value,key){return _c("div",{key:key,staticClass:"row pB5"},[_c("div",{staticClass:"col-2 self-center"},[_vm._v(" "+_vm._s(key)+" ")]),_c("div",{staticClass:"col-6 self-center"},[_c("el-input",{key:key,staticClass:"el-input-textbox-full-border fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:value.label,callback:function($$v){_vm.$set(value,"label",$$v)},expression:"value.label"}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.textColor,callback:function($$v){_vm.$set(value,"textColor",$$v)},expression:"value.textColor"}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.bgColor,callback:function($$v){_vm.$set(value,"bgColor",$$v)},expression:"value.bgColor"}})],1)])})):_vm._e()],2):_vm._e(),"NUMBER"===_vm.readingCard.readings.readingField.dataTypeEnum&&_vm.readingCard.colorMapConfig["NUMBER"]&&_vm.readingCard.colorMapConfig["NUMBER"].length?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mn"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mx"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v("Bg")])]),_vm.render?_vm._l(_vm.readingCard.colorMapConfig["NUMBER"],(function(value,key){return _c("div",{key:key,staticClass:"row pB10 visibility-visible-actions"},[_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.min,callback:function($$v){_vm.$set(value,"min",$$v)},expression:"value.min"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.max,callback:function($$v){_vm.$set(value,"max",$$v)},expression:"value.max"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input",{key:key,staticClass:"el-input-textbox-full-border fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:value.label,callback:function($$v){_vm.$set(value,"label",$$v)},expression:"value.label"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.textColor,callback:function($$v){_vm.$set(value,"textColor",$$v)},expression:"value.textColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.bgColor,callback:function($$v){_vm.$set(value,"bgColor",$$v)},expression:"value.bgColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center nowrap visibility-hide-actions",class:{pL0:!key,"text-left":!key}},[_c("span",{staticClass:"add-icon",on:{click:function($event){return _vm.addColorMapElemnt()}}},[_c("i",{staticClass:"el-icon-circle-plus-outline"})]),key?_c("span",{staticClass:"delete-icon",on:{click:function($event){return _vm.removeColorMapElemnt(key)}}},[_c("i",{staticClass:"el-icon-remove-outline"})]):_vm._e()])])})):_vm._e()],2):_vm._e(),"DECIMAL"===_vm.readingCard.readings.readingField.dataTypeEnum&&_vm.readingCard.colorMapConfig["DECIMAL"]&&_vm.readingCard.colorMapConfig["DECIMAL"].length?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mn"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mx"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v("Bg")])]),_vm.render?_vm._l(_vm.readingCard.colorMapConfig["DECIMAL"],(function(value,key){return _c("div",{key:key,staticClass:"row pB10 visibility-visible-actions"},[_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.min,callback:function($$v){_vm.$set(value,"min",$$v)},expression:"value.min"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.max,callback:function($$v){_vm.$set(value,"max",$$v)},expression:"value.max"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input",{key:key,staticClass:"el-input-textbox-full-border fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:value.label,callback:function($$v){_vm.$set(value,"label",$$v)},expression:"value.label"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.textColor,callback:function($$v){_vm.$set(value,"textColor",$$v)},expression:"value.textColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.bgColor,callback:function($$v){_vm.$set(value,"bgColor",$$v)},expression:"value.bgColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center nowrap visibility-hide-actions",class:{pL0:!key,"text-left":!key}},[_c("span",{staticClass:"add-icon",on:{click:function($event){return _vm.addColorMapElemntforDecimal()}}},[_c("i",{staticClass:"el-icon-circle-plus-outline"})]),key?_c("span",{staticClass:"delete-icon",on:{click:function($event){return _vm.removeColorMapElemntDecimal(key)}}},[_c("i",{staticClass:"el-icon-remove-outline"})]):_vm._e()])])})):_vm._e()],2):_vm._e()]):_vm._e()],1)])]),_c("span",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v(_vm._s(_vm.$t("panel.share.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addreadings()}}},[_vm._v(_vm._s(_vm.$t("panel.share.confirm")))])],1)]),_c("el-dialog",{attrs:{title:"AHU Status Card","modal-append-to-body":!1,"custom-class":"select-building-dialog select-reading-dialog select-ahu-dialog ",visible:_vm.ahupopup,width:"20%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.ahupopup=$event}}},[_c("div",[_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.sel_ahu"))+" ")]),_c("el-select",{attrs:{placeholder:"Please select the asset"},on:{change:function($event){return _vm.loadAHUAssets(_vm.AHUcard.catogry)}},model:{value:_vm.AHUcard.catogry,callback:function($$v){_vm.$set(_vm.AHUcard,"catogry",$$v)},expression:"AHUcard.catogry"}},[_c("el-option",{attrs:{label:"AHU",value:"AHU"}}),135===this.$account.org.id?_c("el-option",{attrs:{label:"FAHU",value:"FAHU"}}):_vm._e(),_vm.$route.query.showallcards&&135!==_vm.$account.org.id?_c("el-option",{attrs:{label:"FAHU",value:"FAHU"}}):_vm._e()],1)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.sel_asset"))+" ")]),_c("el-select",{attrs:{placeholder:"Please select the asset"},model:{value:_vm.AHUcard.id,callback:function($$v){_vm.$set(_vm.AHUcard,"id",$$v)},expression:"AHUcard.id"}},_vm._l(_vm.assets.assets,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1)]),_c("span",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v(_vm._s(_vm.$t("panel.share.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addAHUData()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)]),_c("f-photoUploader",{attrs:{module:_vm.currentModuleName?_vm.currentModuleName.module:"",dialogVisible:_vm.showAvatarUpload,widget:_vm.editwidgetData,editwidget:_vm.editwidgetcalled},on:{"update:dialogVisible":function($event){_vm.showAvatarUpload=$event},"update:dialog-visible":function($event){_vm.showAvatarUpload=$event},"image-updated":_vm.avatarCropSuccess,input:_vm.getInput,"upload-done":_vm.avatarCropUploadSuccess,"upload-failed":_vm.avatarCropUploadFail,update:_vm.imageCardUpdate}}),_c("textCard",{attrs:{visibility:_vm.showtextcard,widget:_vm.editwidgetData},on:{"update:visibility":function($event){_vm.showtextcard=$event},update:_vm.updatetextcard,add:_vm.addtextcard,close:_vm.closetextcard}}),_c("f-card-builder",{attrs:{visibility:_vm.showCardBuilder,addAssetCard:_vm.assetCardData,assetcardEdit:_vm.assetcardEdit},on:{"update:visibility":function($event){_vm.showCardBuilder=$event},close:_vm.cancelBuilding,save:_vm.addAssetCard,update:_vm.updateAssetCardData}}),_c("f-fcu-card",{attrs:{visibility:_vm.showFcuCardDialog,cardData:_vm.fcuCardData},on:{"update:visibility":function($event){_vm.showFcuCardDialog=$event},close:_vm.cancelBuilding,update:_vm.updatFacuCard,save:_vm.saveFcuCard}}),_c("f-boolean-card-dialog",{attrs:{visibility:_vm.showBooleanCardDialog,cardData:_vm.booleancardData},on:{"update:visibility":function($event){_vm.showBooleanCardDialog=$event},close:_vm.cancelBuilding,update:_vm.updatFacuCard,save:_vm.saveBooleancard}}),_c("f-alarmbar-card-dialog",{attrs:{visibility:_vm.showAlarmbarCardDialog,cardData:_vm.alarmcardData},on:{"update:visibility":function($event){_vm.showAlarmbarCardDialog=$event},close:_vm.cancelBuilding,update:_vm.updatFacuCard,save:_vm.saveAlarmcard}}),_vm.showkpiCard?_c("kpi-card-setup",{attrs:{visibility:_vm.showkpiCard,kpiCard:_vm.kpiCard},on:{"update:visibility":function($event){_vm.showkpiCard=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.showkpitargetCard?_c("kpi-target-card",{attrs:{visibility:_vm.showkpitargetCard,cardData:_vm.kpiCard},on:{"update:visibility":function($event){_vm.showkpitargetCard=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.buildingCard?_c("dashbaord-dialog",{attrs:{visibility:_vm.buildingCard,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.buildingCard=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.targetMeterDialog?_c("target-meter-dialog",{attrs:{visibility:_vm.targetMeterDialog,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.targetMeterDialog=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.gaugeSetup?_c("gauge-card-setup",{attrs:{visibility:_vm.gaugeSetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.gaugeSetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.pmreadingsetup?_c("pmreading-card-setup",{attrs:{visibility:_vm.pmreadingsetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.pmreadingsetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smartmapsetup?_c("smart-map-setup",{attrs:{visibility:_vm.smartmapsetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smartmapsetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smarttablesetup?_c("smart-table-setup",{attrs:{visibility:_vm.smarttablesetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smarttablesetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smarttablewrappersetup?_c("smart-table-wrapper-setup",{attrs:{visibility:_vm.smarttablewrappersetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smarttablewrappersetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smartcardsetup?_c("smart-card-setup",{attrs:{visibility:_vm.smartcardsetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smartcardsetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e()],1)]):_vm._e(),_c("div",[_c("div",[_c("grid-layout",{attrs:{layout:_vm.dashboardLayout,"col-num":96,rowHeight:_vm.height,"is-draggable":_vm.editMode,"is-resizable":_vm.editMode,"use-css-transforms":!0,margin:[_vm.margin,_vm.margin]},on:{"update:layout":function($event){_vm.dashboardLayout=$event}}},_vm._l(_vm.dashboardLayout,(function(item,index){return _c("grid-item",{key:index,staticClass:"dashboard-f-widget",class:{gridempty:item&&0===item.w},attrs:{"is-mirrored":!1,x:item.x,y:item.y,w:item.w,h:item.h,i:item.i,"drag-allow-from":".fc-widget-header, .dragabale-card, .map-drag-area, .shimmer, .ql-toolbar","drag-ignore-from":_vm.getDragIgnoreClass(item.widget),"is-resizable":_vm.resizecontrol(item)}},["card"===item.widget.type?_c("CardWrapper",{key:"newCard-"+index,ref:"widget["+index+"]",refInFor:!0,attrs:{widget:item.widget,widgetConfig:item,dashboardId:_vm.dashboard?_vm.dashboard.id:null,showRemove:!0,showEdit:!0},on:{removeCard:_vm.deleteCard,editCard:_vm.editCard,duplicate:_vm.duplicate,helpTextConfig:_vm.openHelpTextConfig}}):_c("f-widget",{key:index,ref:"widget["+index+"]",refInFor:!0,attrs:{type:item.widget.type,selectedWidgetId:_vm.selectedWidgetId,editwidget:_vm.editwidgetcalled,widget:item.widget,grid:item,rowHeight:_vm.height,dashboard:_vm.dashboard?_vm.dashboard.id:null,mode:_vm.editMode},on:{deletechart:function($event){return _vm.deleteChart(index)},widget:function($event){_vm.updatewidget,_vm.getIndex(index)},editwidget:function($event){return _vm.editwidget(index)},helpTextConfig:_vm.openHelpTextConfig}})],1)})),1)],1)])],1),_vm.editMode?_c("div",[_c("new-chart-widget",{ref:"newChartWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null,moduleName:_vm.moduleName}}),_c("new-list-widget",{ref:"newListWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("new-map-widget",{ref:"newMapWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("new-prebuilt-widget",{ref:"newStaticWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("new-web-widget",{ref:"newWebWidget",attrs:{dashboardId:_vm.dashboard?_vm.dashboard.id:null}}),_c("el-dialog",{attrs:{title:"Dashboard Sharing",visible:_vm.sharingDialogVisible,width:"50%"},on:{"update:visible":function($event){_vm.sharingDialogVisible=$event}}},[_c("el-row",{staticStyle:{margin:"0px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"35px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"add"},[_c("el-radio",{attrs:{label:1},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.only_me")))]),_c("el-radio",{attrs:{label:2},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.everyone")))]),_c("el-radio",{attrs:{label:3},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.specific")))])],1)])],1),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.users"))+" ")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.sharedUsers,callback:function($$v){_vm.sharedUsers=$$v},expression:"sharedUsers"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.roles"))+" ")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_roles")},model:{value:_vm.sharedRoxles,callback:function($$v){_vm.sharedRoxles=$$v},expression:"sharedRoxles"}},_vm._l(_vm.roles,(function(role){return _c("el-option",{key:role.id,attrs:{label:role.name,value:role.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.teams"))+" ")]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_teams")},model:{value:_vm.sharedGroups,callback:function($$v){_vm.sharedGroups=$$v},expression:"sharedGroups"}},_vm._l(_vm.groups,(function(group){return _c("el-option",{key:group.id,attrs:{label:group.name,value:group.id}})})),1)],1)])],1):_vm._e(),_c("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{on:{click:function($event){_vm.sharingDialogVisible=!1}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.cancel")))]),_c("el-button",{attrs:{type:"primary"},on:{click:_vm.applySharing}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)],1),_vm.dashboardTabEditorVisibility?_c("Dashboard-tab-dialog-editor",{attrs:{visibility:_vm.dashboardTabEditorVisibility,dashboardObject:_vm.dashboard},on:{"update:visibility":function($event){_vm.dashboardTabEditorVisibility=$event}}}):_vm._e()],1):_vm._e()])])],1)],1):_c("div",{staticClass:"col-12 container-section ",class:{fullWidth:!0===_vm.collapseSidebar},style:_vm.getHeight,on:{dragenter:_vm.containerEntry}},[_c("div",{staticClass:"height100 scrollable dashboardmainlayout newdashboardmainlayout"},[_c("div",{ref:"editdashboard",staticClass:"dashboard-container",class:{editmode:_vm.editMode},on:{dragenter:_vm.containerEntry}},[_vm.$route.query.filters?_c("dashboard-filter"):_vm._e(),_vm.isDraging?_c("div",{class:{dragzone:1==_vm.isDraging},on:{drop:_vm.drop,dragover:_vm.allowDrop}},[_c("div",{staticClass:"dropArea"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.drop"))+" "),_c("el-dialog",{attrs:{title:"Select Building","modal-append-to-body":!1,"custom-class":"select-building-dialog",visible:_vm.dialogVisible,width:"20%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("el-select",{attrs:{placeholder:"Please select a building"},model:{value:_vm.selectedBuilding,callback:function($$v){_vm.selectedBuilding=$$v},expression:"selectedBuilding"}},_vm._l(_vm.buildings,(function(building,index){return _c("el-option",{key:index,attrs:{label:building.name,value:building.id}})})),1),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.cancel")))]),_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.selectBuildings()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)],1),_c("el-dialog",{attrs:{title:"Select Building","modal-append-to-body":!1,"custom-class":"select-building-dialog",visible:_vm.dialogVisible,width:"20%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("el-select",{attrs:{placeholder:"Please select a building"},model:{value:_vm.selectedBuilding,callback:function($$v){_vm.selectedBuilding=$$v},expression:"selectedBuilding"}},_vm._l(_vm.buildings,(function(building,index){return _c("el-option",{key:index,attrs:{label:building.name,value:building.id}})})),1),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.cancel")))]),_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.selectBuildings()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)],1),_c("el-dialog",{attrs:{title:"WEB CARD","modal-append-to-body":!1,"custom-class":"select-building-dialog webcard",visible:_vm.webcardVisible,width:"20%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.webcardVisible=$event}}},[_c("el-input",{attrs:{placeholder:"Enter the URL"},model:{value:_vm.webUrl,callback:function($$v){_vm.webUrl=$$v},expression:"webUrl"}}),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.cancel")))]),_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.selectwebcard()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)],1),_c("el-dialog",{class:{readingmode4:4===_vm.readingCard.mode,editmode:_vm.readingCard.editmode},attrs:{"custom-class":"select-building-dialog select-reading-dialog",visible:_vm.readingpopup,"modal-append-to-body":!1,width:"60%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.readingpopup=$event}}},[_c("div",{staticClass:"new-header-container"},[_vm.readingCard.editmode?_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.edit_Read_card"))+" ")])]):_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.add_Read_card"))+" ")])])]),_c("div",{class:{"mT20 mL10 mR40":_vm.readingCard.editmode,"mT20 mL40 mR40":!_vm.readingCard.editmode}},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"reading-card-layout-changer col-5"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"card-layout-big pointer col-6",class:{active:1===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=1}}},[_c("div",{staticClass:"rd-conatiner"},[_c("div",{staticClass:"sample-card-content"},[_c("div",{staticClass:"card-small-heading"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.energy_usage"))+" ")]),_c("div",{staticClass:"card-static-reading"},[_vm._v(" 999 "),_c("span",{staticClass:"card-reading-value"},[_vm._v("kWh")])]),_c("div",{staticClass:"f12 bold"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.ths_mnth"))+" ")])])])]),_c("div",{staticClass:"card-layout-big pointer layout-3 col-6",class:{active:3===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=3}}},[_c("div",{staticClass:"rd-conatiner text-center"},[_c("img",{staticClass:"svg-icon",attrs:{src:__webpack_require__(723815)}})])]),_c("div",{staticClass:"card-layout-small pointer col-6",class:{active:2===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=2}}},[_c("div",{staticClass:"rd-conatiner"},[_c("div",{staticClass:"sample-card-content"},[_c("div",{staticClass:"card-small-heading"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.energy_usage"))+" ")]),_c("div",{staticClass:"card-static-reading"},[_vm._v(" 999 "),_c("span",{staticClass:"card-reading-value"},[_vm._v("kWh")])]),_c("div",{staticClass:"f12 bold"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.ths_mnth"))+" ")])])])]),_c("div",{staticClass:"card-layout-big pointer layout-3 col-6",class:{active:4===_vm.readingCard.mode},on:{click:function($event){_vm.readingCard.mode=4}}},[_c("div",{staticClass:"rd-conatiner text-center"},[_c("img",{staticClass:"svg-icon",attrs:{src:__webpack_require__(665600)}})])])])]),4===_vm.readingCard.mode?_c("div",{staticClass:"reading-card-data-selecter col-7",class:{"col-12":_vm.readingCard.editmode}},[_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.add_read"))+" ")]),_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading  fc-popover-p0"},model:{value:_vm.addreadingVisible2,callback:function($$v){_vm.addreadingVisible2=$$v},expression:"addreadingVisible2"}},[_c("f-add-data-point",{ref:"addDataPointForm",attrs:{showLastValue:!0,source:"dashboardedit",editdata:_vm.readingCard},on:{save:_vm.getDatapoint,cancel:_vm.cancelDataPointAdder}}),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{slot:"reference",autofocus:!0,placeholder:3===_vm.readingCard.mode?"Click to add Reading Graph data":"Click to add Reading",disabled:!0},slot:"reference",model:{value:_vm.readingCard.readingName,callback:function($$v){_vm.$set(_vm.readingCard,"readingName",$$v)},expression:"readingCard.readingName"}})],1)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.title"))+" ")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{autofocus:!0,placeholder:"Enter the title"},model:{value:_vm.readingCard.title,callback:function($$v){_vm.$set(_vm.readingCard,"title",$$v)},expression:"readingCard.title"}})],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.add_tgt_read"))+" ")]),_c("div",{staticClass:"row readingcard-graph-container"},[_c("div",{staticClass:"col-6"},[_c("el-select",{staticClass:"el-input-textbox-full-border col-9",attrs:{placeholder:"Select the option"},model:{value:_vm.readingCard.targetreading.targetmode,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"targetmode",$$v)},expression:"readingCard.targetreading.targetmode"}},[_c("el-option",{attrs:{label:"Set constant",value:"constant"}}),_c("el-option",{attrs:{label:"Reading",value:"reading"}})],1)],1),_c("div",{staticClass:"col-6"},["reading"===_vm.readingCard.targetreading.targetmode?_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading  fc-popover-p0"},model:{value:_vm.addreadingVisible3,callback:function($$v){_vm.addreadingVisible3=$$v},expression:"addreadingVisible3"}},[_c("f-add-data-point",{ref:"addDataPointForm1",attrs:{showLastValue:!0,source:"dashboardedit",newReading:!0,editdata:_vm.readingCard.targetreading},on:{save:_vm.getTragetDatapoint,cancel:_vm.cancelDataPointAdder}}),_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border",attrs:{slot:"reference",autofocus:!0,placeholder:"Click to add target reading",disabled:!0},slot:"reference",model:{value:_vm.readingCard.targetreading.readingName,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"readingName",$$v)},expression:"\n                                  readingCard.targetreading.readingName\n                                "}})],1):_vm._e(),"constant"===_vm.readingCard.targetreading.targetmode?_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border",attrs:{autofocus:!0,placeholder:"Enter only traget value"},model:{value:_vm.readingCard.targetreading.count,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"count",$$v)},expression:"readingCard.targetreading.count"}}):_vm._e()],1)])]),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.max"))+" ")]),_c("div",{staticClass:"row readingcard-graph-container"},[_c("div",{staticClass:"col-8"},[_c("el-select",{staticClass:"el-input-textbox-full-border col-12",attrs:{placeholder:"Select the option"},model:{value:_vm.readingCard.targetreading.maxmode,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"maxmode",$$v)},expression:"readingCard.targetreading.maxmode"}},[_c("el-option",{attrs:{label:"Same as target Reading",value:"usetarget"}}),_c("el-option",{attrs:{label:"Set constant",value:"constant"}}),_c("el-option",{attrs:{label:"Percentage of target reading",value:"percentage"}})],1)],1),"constant"===_vm.readingCard.targetreading.maxmode?_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border col-4",attrs:{autofocus:!0,placeholder:"Enter only Max value"},model:{value:_vm.readingCard.targetreading.maxValue,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"maxValue",$$v)},expression:"readingCard.targetreading.maxValue"}}):"usetarget"===_vm.readingCard.targetreading.maxmode?_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border col-4",attrs:{autofocus:!0,disabled:!0,placeholder:""}}):_c("el-input",{staticClass:"BL0 addReading-title el-input-textbox-full-border col-4",attrs:{autofocus:!0,placeholder:"Enter only max %"},model:{value:_vm.readingCard.targetreading.maxpercentage,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"maxpercentage",$$v)},expression:"readingCard.targetreading.maxpercentage"}})],1)]),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.period"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.operatorId,callback:function($$v){_vm.$set(_vm.readingCard,"operatorId",$$v)},expression:"readingCard.operatorId"}},_vm._l(_vm.getdateOperators().filter((function(rt){return"Range"===rt.label})),(function(dateRange,index){return _c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})})),1)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.aggregation"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.aggregationFunc,callback:function($$v){_vm.$set(_vm.readingCard,"aggregationFunc",$$v)},expression:"readingCard.aggregationFunc"}},_vm._l(_vm.aggregateFunctions,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.value}})})),1)],1),_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{model:{value:_vm.readingCard.targetreading.enableCenterText1,callback:function($$v){_vm.$set(_vm.readingCard.targetreading,"enableCenterText1",$$v)},expression:"\n                            readingCard.targetreading.enableCenterText1\n                          "}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.enable__center_label"))+" ")])],1)]):_c("div",{staticClass:"reading-card-data-selecter col-7",class:{"col-12":_vm.readingCard.editmode}},[_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.select_reading"))+" ")]),_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading"},model:{value:_vm.addreadingVisible2,callback:function($$v){_vm.addreadingVisible2=$$v},expression:"addreadingVisible2"}},[_c("f-add-data-point",{ref:"addDataPointForm",attrs:{showLastValue:!0,source:"dashboardedit",newReading:!0,editdata:_vm.readingCard},on:{save:_vm.getDatapoint,cancel:_vm.cancelDataPointAdder}}),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{slot:"reference",autofocus:!0,placeholder:3===_vm.readingCard.mode?"Click to add Reading Graph data":"Click to add Reading",disabled:!0},slot:"reference",model:{value:_vm.readingCard.readingName,callback:function($$v){_vm.$set(_vm.readingCard,"readingName",$$v)},expression:"readingCard.readingName"}})],1)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.title"))+" ")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",attrs:{autofocus:!0,placeholder:"Enter the title"},model:{value:_vm.readingCard.title,callback:function($$v){_vm.$set(_vm.readingCard,"title",$$v)},expression:"readingCard.title"}})],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.period"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.operatorId,callback:function($$v){_vm.$set(_vm.readingCard,"operatorId",$$v)},expression:"readingCard.operatorId"}},_vm._l(_vm.getdateOperators().filter((function(rt){return"Range"===rt.label})),(function(dateRange,index){return _c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})})),1)],1),3===_vm.readingCard.mode?_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.aggregation"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.legend,callback:function($$v){_vm.$set(_vm.readingCard,"legend",$$v)},expression:"readingCard.legend"}},_vm._l(_vm.aggregateFunctions,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.name}})})),1)],1):_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.aggregation"))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.aggregationFunc,callback:function($$v){_vm.$set(_vm.readingCard,"aggregationFunc",$$v)},expression:"readingCard.aggregationFunc"}},_vm._l(_vm.aggregateFunctions,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.value}})})),1)],1),1===_vm.readingCard.mode&&2===_vm.readingCard.readingType&&_vm.$helpers.isLicenseEnabled("CONTROL_ACTIONS")&&6===_vm.readingCard.aggregationFunc?_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{model:{value:_vm.readingCard.write,callback:function($$v){_vm.$set(_vm.readingCard,"write",$$v)},expression:"readingCard.write"}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.enable_control")))])],1):_vm._e(),1===_vm.readingCard.mode&&6===_vm.readingCard.aggregationFunc?_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{on:{change:function($event){return _vm.setColorMapProperties(_vm.readingCard)}},model:{value:_vm.readingCard.colorMap,callback:function($$v){_vm.$set(_vm.readingCard,"colorMap",$$v)},expression:"readingCard.colorMap"}},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.condition_format")))])],1):_vm._e(),2===_vm.readingCard.mode&&2===_vm.readingCard.readingType&&_vm.$helpers.isLicenseEnabled("CONTROL_ACTIONS")&&6===_vm.readingCard.aggregationFunc?_c("div",{staticClass:"reading-card-container"},[_c("el-checkbox",{model:{value:_vm.readingCard.write,callback:function($$v){_vm.$set(_vm.readingCard,"write",$$v)},expression:"readingCard.write"}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.enable_control")))])],1):_vm._e(),3===_vm.readingCard.mode?_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.graph_aggregation"))+" ")]),_c("div",{staticClass:"row readingcard-graph-container"},[_c("div",{staticClass:"col-3 readingcard-graph-agg"},[_vm._v(" "+_vm._s(_vm.$util.getCardLabelfromOperatorId(_vm.readingCard.operatorId))+" ")]),_c("el-select",{staticClass:"el-input-textbox-full-border col-9",attrs:{placeholder:"Please select a building"},model:{value:_vm.readingCard.aggregationFunc,callback:function($$v){_vm.$set(_vm.readingCard,"aggregationFunc",$$v)},expression:"readingCard.aggregationFunc"}},_vm._l(_vm.aggregateFunctions2,(function(legend,index){return _c("el-option",{key:index,attrs:{label:legend.label,value:legend.value}})})),1)],1)]):_vm._e(),_vm.readingCard.colorMap&&!_vm.readingCard.readings?_c("spinner",{attrs:{show:_vm.readingCard.colorMap&&!_vm.readingCard.readings,size:"80"}}):_vm._e(),_vm.readingCard.colorMap&&_vm.readingCard.readings&&_vm.readingCard.readings.readingField&&_vm.colorMapSupported[_vm.readingCard.readings.readingField.dataTypeEnum]&&Object.keys(_vm.readingCard.colorMapConfig).length?_c("div",{staticClass:"reading-card-container"},["BOOLEAN"===_vm.readingCard.readings.readingField.dataTypeEnum?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.value"))+" ")]),_c("div",{staticClass:"col-6"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v("Bg")])]),_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2 self-center"},[_vm._v("0")]),_c("div",{staticClass:"col-6 self-center"},[_c("el-input",{staticClass:"el-input-textbox-full-border bR3 fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.min.label,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.min,"label",$$v)},expression:"\n                                  readingCard.colorMapConfig.BOOLEAN.min.label\n                                "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.min.textColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.min,"textColor",$$v)},expression:"\n                                  readingCard.colorMapConfig.BOOLEAN.min\n                                    .textColor\n                                "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.min.bgColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.min,"bgColor",$$v)},expression:"\n                                  readingCard.colorMapConfig.BOOLEAN.min\n                                    .bgColor\n                                "}})],1)]),_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2 self-center"},[_vm._v("1")]),_c("div",{staticClass:"col-6 self-center"},[_c("el-input",{staticClass:"el-input-textbox-full-border bR3 fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.max.label,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.max,"label",$$v)},expression:"\n                                  readingCard.colorMapConfig.BOOLEAN.max.label\n                                "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.max.textColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.max,"textColor",$$v)},expression:"\n                                  readingCard.colorMapConfig.BOOLEAN.max\n                                    .textColor\n                                "}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{staticClass:"dashboard-color-picker",attrs:{size:"small"},model:{value:_vm.readingCard.colorMapConfig.BOOLEAN.max.bgColor,callback:function($$v){_vm.$set(_vm.readingCard.colorMapConfig.BOOLEAN.max,"bgColor",$$v)},expression:"\n                                  readingCard.colorMapConfig.BOOLEAN.max\n                                    .bgColor\n                                "}})],1)])]):_vm._e(),"ENUM"===_vm.readingCard.readings.readingField.dataTypeEnum&&_vm.readingCard.readings.readingField.enumMap&&Object.keys(_vm.readingCard.readings.readingField.enumMap).length&&_vm.readingCard.colorMapConfig["ENUM"]?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-2"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.value"))+" ")]),_c("div",{staticClass:"col-6"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-2 text-center"},[_vm._v("Bg")])]),_vm.render?_vm._l(_vm.readingCard.colorMapConfig["ENUM"],(function(value,key){return _c("div",{key:key,staticClass:"row pB5"},[_c("div",{staticClass:"col-2 self-center"},[_vm._v(_vm._s(key))]),_c("div",{staticClass:"col-6 self-center"},[_c("el-input",{key:key,staticClass:"el-input-textbox-full-border bR3 fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:value.label,callback:function($$v){_vm.$set(value,"label",$$v)},expression:"value.label"}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.textColor,callback:function($$v){_vm.$set(value,"textColor",$$v)},expression:"value.textColor"}})],1),_c("div",{staticClass:"col-2 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.bgColor,callback:function($$v){_vm.$set(value,"bgColor",$$v)},expression:"value.bgColor"}})],1)])})):_vm._e()],2):_vm._e(),"NUMBER"===_vm.readingCard.readings.readingField.dataTypeEnum&&_vm.readingCard.colorMapConfig["NUMBER"]&&_vm.readingCard.colorMapConfig["NUMBER"].length?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mn"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mx"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v("Bg")])]),_vm.render?_vm._l(_vm.readingCard.colorMapConfig["NUMBER"],(function(value,key){return _c("div",{key:key,staticClass:"row pB10 visibility-visible-actions"},[_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.min,callback:function($$v){_vm.$set(value,"min",$$v)},expression:"value.min"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.max,callback:function($$v){_vm.$set(value,"max",$$v)},expression:"value.max"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input",{key:key,staticClass:"el-input-textbox-full-border bR3 fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:value.label,callback:function($$v){_vm.$set(value,"label",$$v)},expression:"value.label"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.textColor,callback:function($$v){_vm.$set(value,"textColor",$$v)},expression:"value.textColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.bgColor,callback:function($$v){_vm.$set(value,"bgColor",$$v)},expression:"value.bgColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center nowrap visibility-hide-actions",class:{pL0:!key,"text-left":!key}},[_c("span",{staticClass:"add-icon",on:{click:function($event){return _vm.addColorMapElemnt()}}},[_c("i",{staticClass:"el-icon-circle-plus-outline"})]),key?_c("span",{staticClass:"delete-icon",on:{click:function($event){return _vm.removeColorMapElemnt(key)}}},[_c("i",{staticClass:"el-icon-remove-outline"})]):_vm._e()])])})):_vm._e()],2):_vm._e(),"DECIMAL"===_vm.readingCard.readings.readingField.dataTypeEnum&&_vm.readingCard.colorMapConfig["DECIMAL"]&&_vm.readingCard.colorMapConfig["DECIMAL"].length?_c("div",{staticClass:"color-map-container"},[_c("div",{staticClass:"row pB5"},[_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mn"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.mx"))+" ")]),_c("div",{staticClass:"col-3"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.label"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.text"))+" ")]),_c("div",{staticClass:"col-1 text-center"},[_vm._v("Bg")])]),_vm.render?_vm._l(_vm.readingCard.colorMapConfig["DECIMAL"],(function(value,key){return _c("div",{key:key,staticClass:"row pB10 visibility-visible-actions"},[_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.min,callback:function($$v){_vm.$set(value,"min",$$v)},expression:"value.min"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input-number",{attrs:{size:"mini"},model:{value:value.max,callback:function($$v){_vm.$set(value,"max",$$v)},expression:"value.max"}})],1),_c("div",{staticClass:"col-3 self-center"},[_c("el-input",{key:key,staticClass:"el-input-textbox-full-border bR3 fc-input-full-border-h35",attrs:{placeholder:"Please input"},model:{value:value.label,callback:function($$v){_vm.$set(value,"label",$$v)},expression:"value.label"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.textColor,callback:function($$v){_vm.$set(value,"textColor",$$v)},expression:"value.textColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center"},[_c("el-color-picker",{key:key,staticClass:"dashboard-color-picker",attrs:{size:"small"},on:{change:function($event){return _vm.$forceUpdate()}},model:{value:value.bgColor,callback:function($$v){_vm.$set(value,"bgColor",$$v)},expression:"value.bgColor"}})],1),_c("div",{staticClass:"col-1 self-center text-center nowrap visibility-hide-actions",class:{pL0:!key,"text-left":!key}},[_c("span",{staticClass:"add-icon",on:{click:function($event){return _vm.addColorMapElemntforDecimal()}}},[_c("i",{staticClass:"el-icon-circle-plus-outline"})]),key?_c("span",{staticClass:"delete-icon",on:{click:function($event){return _vm.removeColorMapElemntDecimal(key)}}},[_c("i",{staticClass:"el-icon-remove-outline"})]):_vm._e()])])})):_vm._e()],2):_vm._e()]):_vm._e()],1)])]),_c("span",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addreadings()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)]),_c("el-dialog",{attrs:{title:"AHU Status Card","modal-append-to-body":!1,"custom-class":"select-building-dialog select-reading-dialog select-ahu-dialog ",visible:_vm.ahupopup,width:"20%","before-close":_vm.cancelBuilding},on:{"update:visible":function($event){_vm.ahupopup=$event}}},[_c("div",[_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.sel_ahu"))+" ")]),_c("el-select",{attrs:{placeholder:"Please select the asset"},on:{change:function($event){return _vm.loadAHUAssets(_vm.AHUcard.catogry)}},model:{value:_vm.AHUcard.catogry,callback:function($$v){_vm.$set(_vm.AHUcard,"catogry",$$v)},expression:"AHUcard.catogry"}},[_c("el-option",{attrs:{label:"AHU",value:"AHU"}}),135===this.$account.org.id?_c("el-option",{attrs:{label:"FAHU",value:"FAHU"}}):_vm._e(),_vm.$route.query.showallcards&&135!==_vm.$account.org.id?_c("el-option",{attrs:{label:"FAHU",value:"FAHU"}}):_vm._e()],1)],1),_c("div",{staticClass:"reading-card-container"},[_c("div",{staticClass:"reading-card-header"},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.sel_asset"))+" ")]),_c("el-select",{attrs:{placeholder:"Please select the asset"},model:{value:_vm.AHUcard.id,callback:function($$v){_vm.$set(_vm.AHUcard,"id",$$v)},expression:"AHUcard.id"}},_vm._l(_vm.assets.assets,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1)]),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancelBuilding()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.addAHUData()}}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)]),_c("f-photoUploader",{attrs:{module:_vm.currentModuleName?_vm.currentModuleName.module:"",dialogVisible:_vm.showAvatarUpload,widget:_vm.editwidgetData,editwidget:_vm.editwidgetcalled},on:{"update:dialogVisible":function($event){_vm.showAvatarUpload=$event},"update:dialog-visible":function($event){_vm.showAvatarUpload=$event},"image-updated":_vm.avatarCropSuccess,input:_vm.getInput,"upload-done":_vm.avatarCropUploadSuccess,"upload-failed":_vm.avatarCropUploadFail,update:_vm.imageCardUpdate}}),_c("textCard",{attrs:{visibility:_vm.showtextcard,widget:_vm.editwidgetData},on:{"update:visibility":function($event){_vm.showtextcard=$event},update:_vm.updatetextcard,add:_vm.addtextcard,close:_vm.closetextcard}}),_c("f-card-builder",{attrs:{visibility:_vm.showCardBuilder,addAssetCard:_vm.assetCardData,assetcardEdit:_vm.assetcardEdit},on:{"update:visibility":function($event){_vm.showCardBuilder=$event},close:_vm.cancelBuilding,save:_vm.addAssetCard,update:_vm.updateAssetCardData}}),_c("f-fcu-card",{attrs:{visibility:_vm.showFcuCardDialog,cardData:_vm.fcuCardData},on:{"update:visibility":function($event){_vm.showFcuCardDialog=$event},close:_vm.cancelBuilding,update:_vm.updatFacuCard,save:_vm.saveFcuCard}}),_c("f-boolean-card-dialog",{attrs:{visibility:_vm.showBooleanCardDialog,cardData:_vm.booleancardData},on:{"update:visibility":function($event){_vm.showBooleanCardDialog=$event},close:_vm.cancelBuilding,update:_vm.updatFacuCard,save:_vm.saveBooleancard}}),_c("f-alarmbar-card-dialog",{attrs:{visibility:_vm.showAlarmbarCardDialog,cardData:_vm.alarmcardData},on:{"update:visibility":function($event){_vm.showAlarmbarCardDialog=$event},close:_vm.cancelBuilding,update:_vm.updatFacuCard,save:_vm.saveAlarmcard}}),_vm.showkpiCard?_c("kpi-card-setup",{attrs:{visibility:_vm.showkpiCard,kpiCard:_vm.kpiCard},on:{"update:visibility":function($event){_vm.showkpiCard=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.showkpitargetCard?_c("kpi-target-card",{attrs:{visibility:_vm.showkpitargetCard,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.showkpitargetCard=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.buildingCard?_c("dashbaord-dialog",{attrs:{visibility:_vm.buildingCard,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.buildingCard=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.targetMeterDialog?_c("target-meter-dialog",{attrs:{visibility:_vm.targetMeterDialog,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.targetMeterDialog=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.gaugeSetup?_c("gauge-card-setup",{attrs:{visibility:_vm.gaugeSetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.gaugeSetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.pmreadingsetup?_c("pmreading-card-setup",{attrs:{visibility:_vm.pmreadingsetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.pmreadingsetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smartmapsetup?_c("smart-map-setup",{attrs:{visibility:_vm.smartmapsetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smartmapsetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smarttablesetup?_c("smart-table-setup",{attrs:{visibility:_vm.smarttablesetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smarttablesetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smarttablewrappersetup?_c("smart-table-wrapper-setup",{attrs:{visibility:_vm.smarttablewrappersetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smarttablewrappersetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e(),_vm.smartcardsetup?_c("smart-card-setup",{attrs:{visibility:_vm.smartcardsetup,buildings:_vm.buildings,cardData:_vm.kpiCard,type:_vm.newDashboardData.childKey},on:{"update:visibility":function($event){_vm.smartcardsetup=$event},close:_vm.cancelBuilding,save:_vm.cardBuilder,update:_vm.updateKpiCard}}):_vm._e()],1)]):_vm._e()],1)])])]),_vm.showCardBuilderSetup?_c("NewCardBuilder",{attrs:{cardData:_vm.selectedCardData,isDuplicate:_vm.isDuplicate,type:_vm.newDashboardData.childKey},on:{close:_vm.onBuilderClosed,save:_vm.onCardSave,duplicate:_vm.onCardDuplicate,update:_vm.onCardUpdate}}):_vm._e(),_vm.showCompoents?_c("DashboardCompoents",{attrs:{data:_vm.componentData,reportLoading:_vm.reportLoading},on:{close:function($event){return _vm.closeCompoent()},resetreportData:function($event){return _vm.resetreportData()},addElement:_vm.addDashboardElement,expand:_vm.expand,option:_vm.setoption,setModuleName:_vm.setModuleName}}):_vm._e(),_c("el-dialog",{attrs:{title:"Add Dashboard Folder",visible:_vm.showAddDashboardfolder,width:"30%","before-close":_vm.closeAddDashboard},on:{"update:visible":function($event){_vm.showAddDashboardfolder=$event}}},[_c("div",{staticClass:"height150"},[_c("el-input",{staticClass:"create-dashboard-input-title fc-input-full-border2",attrs:{autofocus:!0,placeholder:"Enter the Folder Name"},model:{value:_vm.newDashboardName,callback:function($$v){_vm.newDashboardName=$$v},expression:"newDashboardName"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeAddDashboard()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addDashbopardFolder()}}},[_vm._v("Save")])],1)]),_vm.EnableDashboardOptions?_c("el-dialog",{attrs:{title:"Disable Dashboard Tab",visible:_vm.EnableDashboardOptions,"close-on-click-modal":!1,"show-close":!1,width:"30%"},on:{"update:visible":function($event){_vm.EnableDashboardOptions=$event}}},[_c("div",{staticClass:"height150"},[_c("el-checkbox",{model:{value:_vm.copyallWidgets,callback:function($$v){_vm.copyallWidgets=$$v},expression:"copyallWidgets"}},[_vm._v(" Copy tab widgets to main dashboard")]),_vm.copyallWidgets?_c("div",{staticClass:"pT15"},[_c("el-row",{staticClass:"add-dashboard-popper"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Tab Name"))]),_c("el-col",{attrs:{span:24}},[_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.dashboardTabforWidgets,callback:function($$v){_vm.dashboardTabforWidgets=$$v},expression:"dashboardTabforWidgets"}},_vm._l(_vm.dashboardTabsList,(function(tab,ix){return _c("el-option",{key:ix,attrs:{label:tab.name,value:tab.id}})})),1)],1)],1)],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDashboardOption(!1)}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.saveDisabledDashboardOptions()}}},[_vm._v("Confirm")])],1)]):_vm._e(),_vm.disableDashboardOptions?_c("el-dialog",{attrs:{title:"Enable Dashboard Tab",visible:_vm.disableDashboardOptions,width:"30%","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function($event){_vm.disableDashboardOptions=$event}}},[_c("div",{staticClass:"height150"},[_c("el-row",{staticClass:"add-dashboard-popper"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Tab Name"))]),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Enter Tab Name"},model:{value:_vm.newDashboardTabName,callback:function($$v){_vm.newDashboardTabName=$$v},expression:"newDashboardTabName"}})],1)],1),_c("div",{staticClass:"pT15"},[_c("el-checkbox",{model:{value:_vm.copyallWidgets,callback:function($$v){_vm.copyallWidgets=$$v},expression:"copyallWidgets"}},[_vm._v("Copy all the widgets to new tab")])],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDashboardOption(!1)}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.saveEnabledDashboardOptions()}}},[_vm._v(_vm._s(_vm.newDashboardTabName?"Save":"Confirm"))])],1)]):_vm._e(),_vm.showWidgetHelpTextConfig?_c("WidgetHelpTextConfig",{attrs:{visibility:_vm.showWidgetHelpTextConfig,widget:_vm.widgetForHelpTextConfig},on:{"update:visibility":function($event){_vm.showWidgetHelpTextConfig=$event},helpTextChanged:_vm.handleHelpTextChange}}):_vm._e()],1)},staticRenderFns=[],esm_typeof=__webpack_require__(103336),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),FWidget=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(425728),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(843843),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(169358),__webpack_require__(879288),__webpack_require__(648324),__webpack_require__(821057),__webpack_require__(638433)),NewChartWidget=__webpack_require__(327536),TextCardPopup=__webpack_require__(94505),NewListWidget=__webpack_require__(854850),NewMapWidget=__webpack_require__(67361),NewPrebuiltWidget=__webpack_require__(768874),NewWebWidget=__webpack_require__(830269),FAddDataPoint=__webpack_require__(576583),vue_grid_layout_common=__webpack_require__(477502),DashboardFilter=__webpack_require__(346939),ReportHelper=__webpack_require__(507815),DateHelper=__webpack_require__(281230),FPhotoUploadervue_type_template_id_59c9decd_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-image-editor",{attrs:{visibility:_vm.dialogVisible,module:_vm.module,conf:_vm.widget,editwidget:_vm.editwidget,uploadLoading:_vm.loading},on:{onupload:_vm.onUpload,close:_vm.closedialog,"update:visibility":function($event){_vm.dialogVisible=$event},onupdate:_vm.onUpdate}})},FPhotoUploadervue_type_template_id_59c9decd_staticRenderFns=[],FImageEditorvue_type_template_id_d3dc92c2_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"f-image-editor fc-dialog-center-container","modal-append-to-body":!1,visible:_vm.visibility,width:_vm.showAssetMapping?"95%":"80%",title:_vm.showAssetMapping?"Floor Plan - Asset Mapper":"Image Card"},on:{open:_vm.initDialog,"before-close":_vm.resetDialog,close:_vm.resetDialog,"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"imgeditor-container",on:{mousemove:_vm.handleMouseMove,mouseup:_vm.handleMouseUp,dragover:_vm.handlePreventDefault,dragend:_vm.handlePreventDefault,drop:_vm.handleFileDrop}},[_c("div",{staticClass:"imgeditor-main-area row"},[_c("div",{staticClass:"imgeditor-image-area col-9"},[_vm.imageLoaded?_vm._e():_c("div",{staticClass:"imgeditor-upload-area"},[_c("input",{attrs:{id:"img",type:"file"},on:{change:function($event){return _vm.handleFileChange($event.target.files[0])}}}),_c("img",{attrs:{src:__webpack_require__(250620),width:"150",height:"150"}}),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files")+" "+_vm.$t("common.attachment_form.click_to_browse"))+" ")])]),_c("canvas",{ref:"imageEditorCanvas"})]),_vm.mapContext?_c("div",{staticClass:"imgeditor-sidebar col-3"},[_vm.imageLoaded?_c("el-row",{staticClass:"p10"},[_c("el-col",{attrs:{span:24}},[_vm.showAssetMapping?_c("div",{staticClass:"f11 pT10 pB10"},[_c("i",{staticClass:"el-icon-info mR5 fw-bold"}),_vm._v("Double click the image anywhere to add asset mapping. ")]):_c("div",{staticClass:"f11 mT10"},[_c("i",{staticClass:"el-icon-info mR5 fw-bold"}),_vm._v("Double click the image anywhere to add link blocks. ")])])],1):_vm._e(),_vm.selectedArea&&!_vm.showAssetMapping?_c("el-form",{staticStyle:{"margin-top":"20px","border-top":"1px solid #e0e0e0"}},[_c("div",{staticClass:"linkmap-form-header"},[_vm._v("Link Mapping")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{attrs:{prop:"linkType"}},[_c("div",[_vm._v("Link Type")]),_c("el-select",{model:{value:_vm.selectedArea.linkType,callback:function($$v){_vm.$set(_vm.selectedArea,"linkType",$$v)},expression:"selectedArea.linkType"}},[_c("el-option",{attrs:{value:"dashboard",label:"Dashboard"}}),_c("el-option",{attrs:{value:"report",label:"Report"}}),_vm.showAssetMapping?_c("el-option",{attrs:{value:"asset",label:"Asset"}}):_vm._e(),_c("el-option",{attrs:{value:"url",label:"Custom URL"}})],1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},["url"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"url"}},[_c("div",[_vm._v("Link")]),_c("el-input",{model:{value:_vm.selectedArea.url,callback:function($$v){_vm.$set(_vm.selectedArea,"url",$$v)},expression:"selectedArea.url"}})],1):_vm._e(),"dashboard"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"dashboardId"}},[_c("p",[_vm._v("Select Dashboard")]),_c("el-select",{attrs:{filterable:"",placeholder:"Select Dashboard"},model:{value:_vm.selectedArea.dashboardId,callback:function($$v){_vm.$set(_vm.selectedArea,"dashboardId",$$v)},expression:"selectedArea.dashboardId"}},_vm._l(_vm.dashboardList,(function(dfolder,index){return _vm.dashboardList?_c("el-option-group",{key:index,attrs:{label:dfolder.name}},_vm._l(dfolder.dashboards,(function(dashboard,didx){return _c("el-option",{key:didx,attrs:{label:dashboard.dashboardName,value:dashboard.linkName}})})),1):_vm._e()})),1)],1):_vm._e(),"asset"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"assetId"}},[_c("p",[_vm._v("Select Asset")]),_c("el-select",{attrs:{filterable:"",placeholder:"Select Asset width100"},on:{change:function($event){return _vm.setAsset(_vm.selectedArea)}},model:{value:_vm.selectedArea.assetId,callback:function($$v){_vm.$set(_vm.selectedArea,"assetId",$$v)},expression:"selectedArea.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1):_vm._e(),"report"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"reportId"}},[_c("p",[_vm._v("Select Report")]),_c("el-select",{attrs:{filterable:"",placeholder:"Select Report"},model:{value:_vm.selectedArea.reportId,callback:function($$v){_vm.$set(_vm.selectedArea,"reportId",$$v)},expression:"selectedArea.reportId"}},_vm._l(_vm.reportList,(function(repotFolder,index){return _vm.reportList?_c("el-option-group",{key:index,attrs:{label:repotFolder.name}},_vm._l(repotFolder.reports,(function(report,ridx){return _c("el-option",{key:ridx,attrs:{label:report.name,value:report.id}})})),1):_vm._e()})),1)],1):_vm._e()],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},["url"===_vm.selectedArea.linkType?_c("el-form-item",{attrs:{prop:"alt"}},[_c("p",[_vm._v("Alt")]),_c("el-input",{model:{value:_vm.selectedArea.alt,callback:function($$v){_vm.$set(_vm.selectedArea,"alt",$$v)},expression:"selectedArea.alt"}})],1):_vm._e()],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{attrs:{prop:"target"}},[_c("p",[_vm._v("Target")]),_c("el-select",{model:{value:_vm.selectedArea.target,callback:function($$v){_vm.$set(_vm.selectedArea,"target",$$v)},expression:"selectedArea.target"}},[_c("el-option",{attrs:{value:"popup",label:"Popup"}}),_c("el-option",{attrs:{value:"_self",label:"Same tab"}}),_c("el-option",{attrs:{value:"_blank",label:"New tab"}})],1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",[_c("el-button",{staticClass:"pointer",attrs:{type:"danger",size:"mini"},on:{click:_vm.removeSelectedRect}},[_vm._v("Remove Link")])],1)],1)],1)],1):_vm._e(),_vm.selectedArea&&_vm.showAssetMapping?_c("el-form",{staticClass:"pT10 pL20 pR20",staticStyle:{"margin-top":"20px","border-top":"1px solid #e0e0e0"}},[_c("div",{staticClass:"linkmap-form-header"},[_vm._v("Asset Mapping")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{attrs:{prop:"assetId"}},[_c("p",[_vm._v("Select Asset")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{filterable:"",placeholder:"Select Asset"},on:{change:function($event){return _vm.setAsset(_vm.selectedArea)}},model:{value:_vm.selectedArea.assetId,callback:function($$v){_vm.$set(_vm.selectedArea,"assetId",$$v)},expression:"selectedArea.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-form-item",[_c("el-button",{staticClass:"pointer",attrs:{type:"danger",size:"mini"},on:{click:_vm.removeSelectedRect}},[_vm._v("Remove")])],1)],1)],1)],1):_vm._e(),_vm.imageLoaded&&_vm.showAssetMapping?_c("el-form",{staticClass:"pT10 pL20 pR20",staticStyle:{"border-top":"1px solid #e0e0e0"}},[_c("div",{staticClass:"linkmap-form-header"},[_vm._v("Customize Asset Map")]),_vm.imageLoaded&&_vm.mapContext?_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"showAssetName"}},[_c("p",[_vm._v("Show Asset Name")]),_c("el-checkbox",{on:{change:function($event){_vm.mapContext.redraw=!0}},model:{value:_vm.mapContext.assetMappingConfig.showAssetName,callback:function($$v){_vm.$set(_vm.mapContext.assetMappingConfig,"showAssetName",$$v)},expression:"mapContext.assetMappingConfig.showAssetName"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{staticClass:"fc-color-picker",attrs:{prop:"defaultTextColor"}},[_c("p",[_vm._v("Text Color")]),_c("el-color-picker",{attrs:{"popper-class":"chart-custom-color-picker"},on:{change:function($event){_vm.mapContext.redraw=!0}},model:{value:_vm.mapContext.assetMappingConfig.defaultTextColor,callback:function($$v){_vm.$set(_vm.mapContext.assetMappingConfig,"defaultTextColor",$$v)},expression:"mapContext.assetMappingConfig.defaultTextColor"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{staticClass:"fc-color-picker",attrs:{prop:"defaultDotColor"}},[_c("p",[_vm._v("Dot Color")]),_c("el-color-picker",{attrs:{"popper-class":"chart-custom-color-picker"},on:{change:function($event){_vm.mapContext.redraw=!0}},model:{value:_vm.mapContext.assetMappingConfig.defaultDotColor,callback:function($$v){_vm.$set(_vm.mapContext.assetMappingConfig,"defaultDotColor",$$v)},expression:"mapContext.assetMappingConfig.defaultDotColor"}})],1)],1)],1):_vm._e()],1):_vm._e()],1):_vm._e()])]),_c("span",{staticClass:"modal-dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6 modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_vm.update?_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:_vm.updateImage}},[_vm._v("UPDATE")]):_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary",disabled:_vm.uploadLoading},on:{click:_vm.uploadImage}},[_vm._v(_vm._s(_vm.uploadLoading?"Uploading...":"Upload"))])],1)])},FImageEditorvue_type_template_id_d3dc92c2_staticRenderFns=[],imagemap=(__webpack_require__(737960),__webpack_require__(51101)),api=__webpack_require__(32284),Status={IDLE:0,RESIZING:1,DRAGGING:2},FImageEditorvue_type_script_lang_js={props:["visibility","module","conf","editwidget","showAssetMapping","editAssetMapping","spaceId","uploadLoading"],data:function(){return{imageLoaded:!1,selectedArea:null,update:!1,status:Status.IDLE,selectedFile:null,fileReader:null,mapContext:null,currentAnchor:-1,cursors:["nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize"],mouseX:null,mouseY:null,mouseOffsetX:null,mouseOffsetY:null,dashboardList:null,reportList:null,assetList:null,currentScale:1,scaleMultiplier:.8}},mounted:function(){if(this.editAssetMapping)this.initDialog(this.editAssetMapping.url),this.update=!0;else if(this.showAssetMapping)this.initDialog();else{if(this.conf&&this.conf.widget&&this.conf.widget.id>-1&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.metaJson){var data=JSON.parse(this.conf.widget.dataOptions.metaJson);this.initDialog(data.url),this.update=!0}if(this.conf&&this.conf.widget&&-1===this.conf.widget.id&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.imagecardData){var _data=this.conf.widget.dataOptions.imagecardData;this.initDialog(_data.url),this.update=!0}}this.loadDashboards(),this.loadReports(),this.loadAssets()},methods:{initDialog:function(url){var _this=this;this.$nextTick((function(){_this.initUpload(url)}))},resetDialog:function(){this.mapContext=null,this.update=!1,this.$emit("close")},closeDialog:function(){this.$emit("update:visibility",!1),this.$emit("close")},zoomIn:function(){this.currentScale+=this.scaleMultiplier,this.mapContext.context.scale(this.currentScale,this.currentScale),this.mapContext.redraw=!0},zoomOut:function(){this.currentScale-=this.scaleMultiplier,this.mapContext.context.scale(this.currentScale,this.currentScale),this.mapContext.redraw=!0},uploadImage:function(){var imageObj={file:this.selectedFile,areas:this.getAreas(),imageMeta:this.mapContext.imageMeta,assetMappingConfig:{showAssetName:this.mapContext.assetMappingConfig.showAssetName,defaultDotColor:this.mapContext.assetMappingConfig.defaultDotColor,defaultTextColor:this.mapContext.assetMappingConfig.defaultTextColor}};this.$emit("onupload",imageObj)},updateImage:function(){if(this.showAssetMapping){var data={imageMeta:this.mapContext.imageMeta,areas:this.getAreas(),assetMappingConfig:{showAssetName:this.mapContext.assetMappingConfig.showAssetName,defaultDotColor:this.mapContext.assetMappingConfig.defaultDotColor,defaultTextColor:this.mapContext.assetMappingConfig.defaultTextColor}};this.$emit("onupdate",data)}else{var imageObj={file:this.selectedFile,areas:this.getAreas(),imageMeta:this.mapContext.imageMeta},_data2=this.conf&&this.conf.widget&&this.conf.widget.id>-1?JSON.parse(this.conf.widget.dataOptions.metaJson):this.conf.widget.dataOptions.imagecardData;_data2.options={imageMeta:imageObj.imageMeta,areas:imageObj.areas},this.$emit("onupdate",_data2)}},handleMouseUp:function(e){this.status!==Status.IDLE&&(this.status=Status.IDLE,this.currentAnchor=-1)},handlePreventDefault:function(e){e.preventDefault()},handleMouseMove:function(e){var offsets={top:0,left:0};if(this.mapContext&&(offsets.top=this.mapContext.canvas.getBoundingClientRect().top+window.scrollY,offsets.left=this.mapContext.canvas.getBoundingClientRect().left+window.scrollX),this.mouseX=Math.floor(Math.max(0,e.pageX-offsets.left)),this.mouseY=Math.floor(Math.max(0,e.pageY-offsets.top)),this.status===Status.DRAGGING){var s={x:this.mouseX-this.mouseOffsetX,y:this.mouseY-this.mouseOffsetY};this.mapContext.selected.set(s),this.mapContext.redraw=!0}else if(this.status===Status.RESIZING)this.mapContext.selected.transform(this.currentAnchor,this.mouseX,this.mouseY),this.mapContext.redraw=!0;else if(this.mapContext&&this.mapContext.selected){for(
// see if we're hovering over an anchor
var anchors=this.mapContext.selected.anchors(),i=8;i--;){var anchor=anchors[i];
// we dont need to use the ghost context because
// selection handles will always be rectangles
if(this.mouseX>=anchor.x&&this.mouseX<=anchor.x+6&&this.mouseY>=anchor.y&&this.mouseY<=anchor.y+6)
// we found one!
return this.currentAnchor=i,this.mapContext.redraw=!0,void(e.target.style.cursor=this.cursors[i])}this.currentAnchor=-1,e.target.style.cursor=this.mapContext.selected.isWithin(this.mouseX,this.mouseY)?"move":"auto"}},initUpload:function(editImageURL){var _this2=this,self=this;function draw(){self.mapContext&&(self.mapContext.draw(),window.requestAnimationFrame(draw))}this.mapContext={canvas:this.$refs["imageEditorCanvas"],imageScale:"original",assetMappingConfig:{assetMap:{},showAssetName:!1,defaultDotColor:"#FF0000",defaultTextColor:"#000000"}},this.editAssetMapping&&(this.mapContext.assetMappingConfig.showAssetName=this.editAssetMapping.assetMappingConfig.showAssetName,this.mapContext.assetMappingConfig.defaultDotColor=this.editAssetMapping.assetMappingConfig.defaultDotColor,this.mapContext.assetMappingConfig.defaultTextColor=this.editAssetMapping.assetMappingConfig.defaultTextColor),this.mapContext.toggleControls=function(enable){_this2.selectedArea=enable?_this2.mapContext.selected:null},imagemap/* default */.Z.initMap(this.mapContext),this.fileReader=new FileReader,this.fileReader.onload=function(e){_this2.mapContext.load(e.target.result),_this2.imageLoaded=!0},self.mapContext.canvas.onselectstart=function(){return!1},self.mapContext.canvas.ondblclick=function(){var rectContext={canvas:self.mapContext.canvas};imagemap/* default */.Z.initRect(rectContext,self.mouseX,self.mouseY),self.mapContext.add(rectContext)},self.mapContext.canvas.onmousedown=function(e){if(-1!==self.currentAnchor)self.status=Status.RESIZING;else if(self.status!==Status.DRAGGING){for(var i=self.mapContext.rects.length;i--;){var rect=self.mapContext.rects[i];if(rect.isWithin(self.mouseX,self.mouseY))return self.status=Status.DRAGGING,self.mouseOffsetX=self.mouseX-rect.x,self.mouseOffsetY=self.mouseY-rect.y,void(self.mapContext.selected!==rect&&self.mapContext.select(rect))}self.status=Status.IDLE,self.mapContext.deselect()}},editImageURL&&(this.mapContext.onImageLoad=function(){_this2.loadAreas()},this.mapContext.load(editImageURL),this.imageLoaded=!0),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,window.requestAnimationFrame(draw),document.querySelector(".imgeditor-image-area").addEventListener("paste",(function(e){_this2.handleFileChange(e.clipboardData.items[0].getAsFile())}))},setAsset:function(selectedArea){selectedArea.linkType="asset";var asset=this.assetList.find((function(at){return at.id===selectedArea.assetId}));this.mapContext.assetMappingConfig.assetMap[asset.id+""]={asset:asset},this.mapContext.redraw=!0},changeImageScale:function(){this.mapContext.changeImageScale(this.mapContext.imageScale)},handleFileDrop:function(e){e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length&&this.handleFileChange(e.dataTransfer.files[0])},handleFileChange:function(file){this.selectedFile=file,this.fileReader.readAsDataURL(file)},addRect:function(){var rectContext={canvas:this.mapContext.canvas};imagemap/* default */.Z.initRect(rectContext,this.mouseX,this.mouseY),this.mapContext.add(rectContext)},getAreas:function(){var areas=[];if(this.mapContext&&this.mapContext.rects&&this.mapContext.rects.length){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.mapContext.rects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var rect=_step.value;areas.push({x:rect.x,y:rect.y,width:rect.width,height:rect.height,type:"rect",link:{type:rect.linkType,url:rect.url,alt:rect.alt,dashboardId:rect.dashboardId,reportId:rect.reportId,assetId:rect.assetId,target:rect.target}})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return areas},loadAreas:function(){if(this.editAssetMapping){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.editAssetMapping.areas);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var area=_step2.value,rectContext={canvas:this.mapContext.canvas,x:area.x,y:area.y,width:area.width,height:area.height,linkType:area.link.type,url:area.link.url,dashboardId:area.link.dashboardId,reportId:area.link.reportId,assetId:area.link.assetId,alt:area.link.alt,target:area.link.target};imagemap/* default */.Z.initRect(rectContext,this.mouseX,this.mouseY),this.mapContext.add(rectContext)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else if(this.conf.widget&&this.conf.widget.id>-1&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.metaJson){var data=JSON.parse(this.conf.widget.dataOptions.metaJson);if(data.options&&data.options.areas&&data.options.areas.length){var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(data.options.areas);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _area=_step3.value,_rectContext={canvas:this.mapContext.canvas,x:_area.x,y:_area.y,width:_area.width,height:_area.height,linkType:_area.link.type,url:_area.link.url,dashboardId:_area.link.dashboardId,reportId:_area.link.reportId,alt:_area.link.alt,target:_area.link.target};imagemap/* default */.Z.initRect(_rectContext,this.mouseX,this.mouseY),this.mapContext.add(_rectContext)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}else if(this.conf.widget&&-1===this.conf.widget.id&&this.conf.widget.dataOptions&&this.conf.widget.dataOptions.imagecardData){var _data3=this.conf.widget.dataOptions.imagecardData;if(_data3.options&&_data3.options.areas&&_data3.options.areas.length){var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(_data3.options.areas);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _area2=_step4.value,_rectContext2={canvas:this.mapContext.canvas,x:_area2.x,y:_area2.y,width:_area2.width,height:_area2.height,linkType:_area2.link.type,url:_area2.link.url,dashboardId:_area2.link.dashboardId,reportId:_area2.link.reportId,alt:_area2.link.alt,target:_area2.link.target};imagemap/* default */.Z.initRect(_rectContext2,this.mouseX,this.mouseY),this.mapContext.add(_rectContext2)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}},removeSelectedRect:function(){this.mapContext.remove()},reset:function(){this.mapContext.reset()},loadDashboards:function(){if(this.module){var self=this;this.$http.get("/dashboardTree?moduleName="+this.module).then((function(response){self.dashboardList=response.data.dashboardFolders}))}},loadReports:function(){if(this.module){var self=this;api/* API */.bl.get("/v3/report/folders?moduleName="+this.module).then((function(response){response.error||(self.reportList=response.data?response.data.reportFolders:null)}))}},loadAssets:function(){if(this.module){var self=this,url="/asset/all";if(self.spaceId){var params="";params=params+"&filters="+encodeURIComponent(JSON.stringify({space:[{operatorId:38,value:[this.spaceId+""]}]})),params+="&moduleName=asset",params=params+"&includeParentFilter="+!0,url=url+"?"+params}this.$http.get(url).then((function(response){if(self.assetList=response.data.assets,self.editAssetMapping){var _step5,_iterator5=(0,createForOfIteratorHelper/* default */.Z)(self.editAssetMapping.areas);try{var _loop=function(){var area=_step5.value,asset=self.assetList.find((function(at){return at.id===area.link.assetId}));self.mapContext.assetMappingConfig.assetMap[area.link.assetId+""]={asset:asset}};for(_iterator5.s();!(_step5=_iterator5.n()).done;)_loop()}catch(err){_iterator5.e(err)}finally{_iterator5.f()}self.mapContext.redraw=!0}}))}}}},components_FImageEditorvue_type_script_lang_js=FImageEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FImageEditorvue_type_script_lang_js,FImageEditorvue_type_template_id_d3dc92c2_render,FImageEditorvue_type_template_id_d3dc92c2_staticRenderFns,!1,null,null,null)
/* harmony default export */,FImageEditor=component.exports,FPhotoUploadervue_type_script_lang_js={props:["dialogVisible","module","widget","editwidget"],components:{FImageEditor:FImageEditor},data:function(){return{loading:!1}},methods:{closedialog:function(){this.$emit("update:dialogVisible",!1),this.$emit("input",!1)},onUpload:function(imageObj){var self=this;self.loading=!0;var formdata=new FormData;formdata.append("avatar",imageObj.file),self.$http.post("/widget/addPhoto",formdata).then((function(response){self.loading=!1,self.$emit("update:dialogVisible",!1);var respData={photoId:response.data.photoId,url:response.data.url,options:{imageMeta:imageObj.imageMeta,areas:imageObj.areas}};self.$emit("upload-done",respData),self.closeDialog=!0})).catch((function(error){self.$emit("upload-failed",error)}))},onUpdate:function(data){var self=this;self.loading=!0,self.$emit("update",data),self.closeDialog=!0}}},components_FPhotoUploadervue_type_script_lang_js=FPhotoUploadervue_type_script_lang_js,FPhotoUploader_component=(0,componentNormalizer/* default */.Z)(components_FPhotoUploadervue_type_script_lang_js,FPhotoUploadervue_type_template_id_59c9decd_render,FPhotoUploadervue_type_template_id_59c9decd_staticRenderFns,!1,null,null,null)
/* harmony default export */,FPhotoUploader=FPhotoUploader_component.exports,CardBuildervue_type_template_id_9b7903a8_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{attrs:{"custom-class":"f-card-builder","modal-append-to-body":!1,visible:_vm.visibility,width:_vm.assetcardEdit?"30%":"80%",top:"0%",title:"Card Builder","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_vm.editLoading?_c("div",{staticClass:"editLoading"},[_c("i",{staticClass:"el-icon-loading"})]):_vm._e(),_c("div",{staticClass:"f-builder-body"},[_c("div",{staticClass:"row"},[_vm.assetcardEdit?_vm._e():_c("div",{staticClass:"col-8 assetcard-layout"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"AHU"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"170px",width:"110px"},attrs:{src:__webpack_require__(321917)},on:{click:function($event){_vm.cardData.cardType="AHU"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"PUMP"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",attrs:{src:__webpack_require__(376416)},on:{click:function($event){_vm.cardData.cardType="PUMP"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"PUMP1"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",attrs:{src:__webpack_require__(376416)},on:{click:function($event){_vm.cardData.cardType="PUMP1"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"LIGHT"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(715614)},on:{click:function($event){_vm.cardData.cardType="LIGHT"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"170px",width:"110px"},attrs:{src:__webpack_require__(223245)},on:{click:function($event){_vm.cardData.cardType="HVAC"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"WATER_TANK"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",attrs:{src:__webpack_require__(117686)},on:{click:function($event){_vm.cardData.cardType="WATER_TANK"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC2"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",attrs:{src:__webpack_require__(61927)},on:{click:function($event){_vm.cardData.cardType="HVAC2"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC3"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(69039)},on:{click:function($event){_vm.cardData.cardType="HVAC3"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC4"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(396926)},on:{click:function($event){_vm.cardData.cardType="HVAC4"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC5"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(568039)},on:{click:function($event){_vm.cardData.cardType="HVAC5"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC6"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(798898)},on:{click:function($event){_vm.cardData.cardType="HVAC6"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC7"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(325038)},on:{click:function($event){_vm.cardData.cardType="HVAC7"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC8"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(362146)},on:{click:function($event){_vm.cardData.cardType="HVAC8"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC9"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(778456)},on:{click:function($event){_vm.cardData.cardType="HVAC9"}}})]),_c("div",{staticClass:"col-4 cb-layout-section",class:{active:"HVAC10"===_vm.cardData.cardType}},[_c("img",{staticClass:"card-icons",staticStyle:{height:"140px",width:"110px"},attrs:{src:__webpack_require__(595188)},on:{click:function($event){_vm.cardData.cardType="HVAC10"}}})])])]),_c("div",{staticClass:"assetcard-dataChooser",class:_vm.assetcardEdit?"col-12":"col-4"},[_c("el-form",{ref:"AssetCardForm",attrs:{model:_vm.cardData,"label-position":"top"}},[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("Select category")]),_c("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.loadAssetbyCategory()}},model:{value:_vm.cardData.selectedCategoryId,callback:function($$v){_vm.$set(_vm.cardData,"selectedCategoryId",$$v)},expression:"cardData.selectedCategoryId"}},_vm._l(_vm.assetCategory,(function(category,index){return _c("el-option",{key:index,attrs:{label:category.name,value:category.id}})})),1)],1)],1)],1),_vm.assetList&&_vm.cardData.cardType?_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("Select assets")]),_c("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.loadNewReadingFileds()}},model:{value:_vm.cardData.parentId,callback:function($$v){_vm.$set(_vm.cardData,"parentId",$$v)},expression:"cardData.parentId"}},_vm._l(_vm.assetscategory,(function(asset,key){return _c("el-option",{key:key,attrs:{label:_vm.assetList[key],value:key}})})),1)],1)],1)],1):_vm._e(),_vm._l(_vm.templates[_vm.cardData.cardType],(function(readingKey,key){return _vm.fieldList&&_vm.cardData.parentId?_c("el-row",{key:key},[_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"pT10"},[key&&_vm.templates[_vm.cardData.cardType][key]&&_vm.templates[_vm.cardData.cardType][key].icon&&_vm.templates[_vm.cardData.cardType][key].icon.property&&"URL"===_vm.templates[_vm.cardData.cardType][key].icon.property?_c("img",{staticClass:"card-icons",attrs:{src:_vm.getIconPath(_vm.templates[_vm.cardData.cardType][key].icon.path)}}):_vm._e(),key&&_vm.templates[_vm.cardData.cardType][key]&&_vm.templates[_vm.cardData.cardType][key].icon&&_vm.templates[_vm.cardData.cardType][key].icon.property&&"TEXT"===_vm.templates[_vm.cardData.cardType][key].icon.property?_c("span",[_vm._v(_vm._s(_vm.templates[_vm.cardData.cardType][key].icon.path))]):_vm._e(),key&&_vm.templates[_vm.cardData.cardType][key]&&_vm.templates[_vm.cardData.cardType][key].icon&&_vm.templates[_vm.cardData.cardType][key].icon.property&&"BUTTON"===_vm.templates[_vm.cardData.cardType][key].icon.property?_c("div",{staticClass:"button-filed",class:_vm.templates[_vm.cardData.cardType][key].icon.size},[_vm._v(" "+_vm._s(_vm.templates[_vm.cardData.cardType][key].icon.path)+" ")]):_vm._e()])],1),"SELECT"===_vm.templates[_vm.cardData.cardType][key].inputType?_c("el-col",{attrs:{span:16}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v(" "+_vm._s("Select "+readingKey.displayName+" Field")+" ")]),_c("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.loadField(key)}},model:{value:_vm.templates[_vm.cardData.cardType][key].value,callback:function($$v){_vm.$set(_vm.templates[_vm.cardData.cardType][key],"value",$$v)},expression:"templates[cardData.cardType][key].value"}},[_vm._l(_vm.fieldList,(function(field,index){return"all"!==_vm.templates[_vm.cardData.cardType][key].Rkey&&field.field[_vm.templates[_vm.cardData.cardType][key].Rkey]===_vm.templates[_vm.cardData.cardType][key].Rvalue?_c("el-option",{key:index,attrs:{label:field.field.displayName,value:field.field.id}}):_vm._e()})),_vm._l(_vm.fieldList,(function(field,index){return"all"===_vm.templates[_vm.cardData.cardType][key].Rkey?_c("el-option",{key:index,attrs:{label:field.field.displayName,value:field.field.id}}):_vm._e()}))],2)],1)],1):_vm._e(),"TEXT"===_vm.templates[_vm.cardData.cardType][key].inputType?_c("el-col",{attrs:{span:16}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("Enter the text")]),_c("el-input",{model:{value:_vm.templates[_vm.cardData.cardType][key].value,callback:function($$v){_vm.$set(_vm.templates[_vm.cardData.cardType][key],"value",$$v)},expression:"templates[cardData.cardType][key].value"}})],1)],1):_vm._e()],1):_vm._e()}))],2)],1)])]),_c("span",{staticClass:"modal-dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6 modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Cancel")]),_vm.assetcardEdit?_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:_vm.update}},[_vm._v("Update")]):_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Ok")])],1)]),void 0],2)},CardBuildervue_type_template_id_9b7903a8_staticRenderFns=[],AssetCardHelper=(__webpack_require__(186466),__webpack_require__(322196)),vuex_esm=__webpack_require__(420629),CardBuildervue_type_script_lang_js={mixins:[AssetCardHelper/* default */.Z],props:["visibility","addAssetCard","assetcardEdit"],data:function(){return{loading:!1,editLoading:!1,readings:null,assetList:null,cardtype:["AHU","PUMP","LIGHT","WATER_TANK","HVAC","HVAC2","HVAC3","HVAC4","HVAC5","HVAC6","HVAC7","PUMP1"],workflowTemplate:{name:null,aggregateString:"lastValue",fieldName:null,fieldId:-1,moduleName:"energydata",criteria:{pattern:"1",conditions:{1:{fieldName:"parentId",operatorId:9,sequence:"1",value:null}}},orderByFieldName:"ttime",sortBy:"desc",limit:1},iconsUrl:{name:"",runStatus:"cardIcon/off-on-icon.svg",autoStatus:"",temperature:"",tripStatus:"",valveFeedback:""},assetscategory:null,fieldList:null,cardData:{selectedCategoryId:null,parentId:null,fieldIds:null,cardType:"AHU"}}},created:function(){this.$store.dispatch("loadAssetCategory")},mounted:function(){this.loadReadings(),this.assetcardEdit&&(this.editLoading=!0)},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),methods:{closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},editCardBuilder:function(){this.addAssetCard&&(this.cardData=this.addAssetCard.cardData?this.addAssetCard.cardData:null,this.fieldList=this.addAssetCard.fieldList?this.addAssetCard.fieldList:null,this.tools=this.addAssetCard.tools?this.addAssetCard.tools:null,this.templates[this.cardData.cardType]=this.addAssetCard.templates?this.addAssetCard.templates:null,this.categoryWithAssets(this.readings),this.editLoading=!1)},save:function(){var _this=this,self=this;this.$emit("update:dialogVisible",!1);var expressionsData=[],metadata={};Object.keys(this.templates[this.cardData.cardType]).forEach((function(rt){"TEXT"!==self.templates[_this.cardData.cardType][rt].inputType&&null!==self.templates[_this.cardData.cardType][rt].value&&expressionsData.push(self.constractData(self.templates[_this.cardData.cardType][rt],rt))})),Object.keys(this.templates[this.cardData.cardType]).forEach((function(rt){"TEXT"===self.templates[_this.cardData.cardType][rt].inputType&&null!==self.templates[_this.cardData.cardType][rt].value&&(metadata[rt]=self.templates[_this.cardData.cardType][rt].value)
/* temp checkonly */,metadata.cardType=_this.cardData.cardType}));var data={templates:this.templates[this.cardData.cardType],parentId:this.cardData.parentId,expressions:expressionsData,metaJson:metadata,cardType:this.cardData.cardType,cardData:this.cardData,fieldList:this.fieldList,tools:this.tools};this.$emit("save",data)},update:function(){var _this2=this,self=this;this.$emit("update:dialogVisible",!1);var expressionsData=[],metadata={};Object.keys(this.templates[this.cardData.cardType]).forEach((function(rt){"TEXT"!==self.templates[_this2.cardData.cardType][rt].inputType&&null!==self.templates[_this2.cardData.cardType][rt].value&&expressionsData.push(self.constractData(self.templates[_this2.cardData.cardType][rt],rt))})),Object.keys(this.templates[this.cardData.cardType]).forEach((function(rt){"TEXT"===self.templates[_this2.cardData.cardType][rt].inputType&&null!==self.templates[_this2.cardData.cardType][rt].value&&(metadata[rt]=self.templates[_this2.cardData.cardType][rt].value)
/* temp checkonly */,metadata.cardType=_this2.cardData.cardType}));var data={templates:this.templates[this.cardData.cardType],parentId:this.cardData.parentId,expressions:expressionsData,metaJson:metadata,cardType:this.cardData.cardType,cardData:this.cardData,fieldList:this.fieldList,tools:this.tools};this.$emit("update",data)},constractData:function(rawData,key){var data=this.$helpers.cloneObject(this.workflowTemplate);if(rawData&&"TEXT"!==rawData.inputType)return data.name=key,data.fieldName=rawData.readings&&rawData.readings.name?rawData.readings.name:null,data.fieldId=rawData.readings&&rawData.readings.id?rawData.readings.id:null,data.criteria.conditions["1"].value=this.cardData.parentId,data.moduleName=rawData.readings&&rawData.readings.module&&rawData.readings.module.name?rawData.readings.module.name:"energydata",data},loadAssetbyCategory:function(){this.cardData.parentId=null,this.categoryWithAssets(this.readings)},loadReadings:function(){var self=this;self.$http.get("/asset/getreadings").then((function(response){self.readings=response.data,self.assetList=response.data&&response.data.assets?response.data.assets:null,self.assetcardEdit&&self.editCardBuilder()}))},categoryWithAssets:function(data){data&&this.cardData.selectedCategoryId&&data.categoryWithAssets&&(this.assetscategory=data.categoryWithAssets[this.cardData.selectedCategoryId])},loadAssetCategory:function(){if(this.cardData.parentId&&this.readings.fields&&this.readings.fields){this.fieldList=[];var fields=Object.values(this.readings.fields),fieldIdList=this.readings.categoryWithAssets[this.cardData.selectedCategoryId][Number(this.cardData.parentId)];this.fieldList=fields.filter((function(rt){for(var index=0;index<fieldIdList.length;index++){var element=fieldIdList[index];if(parseInt(element)===rt.id)return rt.toggle=!1,rt}}))}},loadNewReadingFileds:function(){var _this3=this,self=this;Object.keys(this.tools).forEach((function(rt){_this3.tools[rt].value=null})),this.cardData.parentId&&this.readings.fields&&this.readings.fields&&(this.fieldList=[],this.$util.loadLatestReading(Number(this.cardData.parentId)).then((function(fields){self.fieldList=fields})))},loadField:function(key){this.templates[this.cardData.cardType][key].readings=this.readings.fields[this.templates[this.cardData.cardType][key].value]},getIconPath:function(iconPath){if(iconPath.indexOf("cardIcon")>-1){var path=[];path=iconPath.split("/"),iconPath=path[path.length-1]}return __webpack_require__(945239)("./"+iconPath)}}},components_CardBuildervue_type_script_lang_js=CardBuildervue_type_script_lang_js,CardBuilder_component=(0,componentNormalizer/* default */.Z)(components_CardBuildervue_type_script_lang_js,CardBuildervue_type_template_id_9b7903a8_render,CardBuildervue_type_template_id_9b7903a8_staticRenderFns,!1,null,null,null)
/* harmony default export */,CardBuilder=CardBuilder_component.exports,FCUCardDialogvue_type_template_id_73a4ca76_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{attrs:{"custom-class":"fcu-card-builder","modal-append-to-body":!1,visible:_vm.visibility,width:"30%",top:"0%",title:"SELECT FCU CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"FCUCARD",attrs:{model:_vm.data,"label-position":"top"}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("Select Building")]),_c("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","collapse-tags":""},model:{value:_vm.data.selectedBuilding,callback:function($$v){_vm.$set(_vm.data,"selectedBuilding",$$v)},expression:"data.selectedBuilding"}},_vm._l(_vm.buildingList,(function(list,index){return _c("el-option",{key:index,attrs:{label:list.name,value:list.id}})})),1)],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("Select Level")]),_c("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.selectlevel()}},model:{value:_vm.data.level,callback:function($$v){_vm.$set(_vm.data,"level",$$v)},expression:"data.level"}},_vm._l(_vm.lists,(function(list,index){return _c("el-option",{key:index,attrs:{label:list.label,value:list.value}})})),1)],1)],1),_c("span",{staticClass:"modal-dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6 modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Ok")])],1)],1)],1)},FCUCardDialogvue_type_template_id_73a4ca76_staticRenderFns=[],FCUCardDialogvue_type_script_lang_js={props:["visibility"],data:function(){return{data:{level:null,selectedBuilding:null},buildingList:null,lists:[{label:"level 1",value:1},{label:"level 2",value:2},{label:"level 3",value:3}]}},created:function(){this.$store.dispatch("loadBuildings")},mounted:function(){this.loadBuilding()},methods:{closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(){this.$emit("update:visibility",!1),this.$emit("save",this.data)},loadBuilding:function(){var self=this,formData=new FormData,url="/report/alarms/getAllBuildings";self.$http.post(url,formData).then((function(response){self.buildingList=response.data}))},selectlevel:function(){}}},components_FCUCardDialogvue_type_script_lang_js=FCUCardDialogvue_type_script_lang_js,FCUCardDialog_component=(0,componentNormalizer/* default */.Z)(components_FCUCardDialogvue_type_script_lang_js,FCUCardDialogvue_type_template_id_73a4ca76_render,FCUCardDialogvue_type_template_id_73a4ca76_staticRenderFns,!1,null,null,null)
/* harmony default export */,FCUCardDialog=FCUCardDialog_component.exports,FBooleanCardDialogvue_type_template_id_b3d912da_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{attrs:{"custom-class":"fcu-card-builder","modal-append-to-body":!1,visible:_vm.visibility,width:"30%",top:"0%",title:"SELECT FCU CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"FCUCARD",attrs:{model:_vm.data,"label-position":"top"}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("NAME")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{autofocus:!0,placeholder:"Enter the title"},model:{value:_vm.data.name,callback:function($$v){_vm.$set(_vm.data,"name",$$v)},expression:"data.name"}})],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("ASSET")]),_c("el-input",{staticClass:"el-input-textbox-full-border",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type"),disabled:!0},model:{value:_vm.data.assetName,callback:function($$v){_vm.$set(_vm.data,"assetName",$$v)},expression:"data.assetName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.openAssetChooser=!0}},slot:"suffix"})])],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("PERIOD")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{placeholder:"Please select a building"},model:{value:_vm.data.periodId,callback:function($$v){_vm.$set(_vm.data,"periodId",$$v)},expression:"data.periodId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1)],1),_c("span",{staticClass:"modal-dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6 modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Ok")])],1)],1),_c("space-asset-chooser",{attrs:{showAsset:!0,visibility:_vm.openAssetChooser,resourceType:[2],appendToBody:!1},on:{associate:_vm.associate,"update:visibility":function($event){_vm.openAssetChooser=$event}}})],1)},FBooleanCardDialogvue_type_template_id_b3d912da_staticRenderFns=[],SpaceAssetChooser=__webpack_require__(372587),FBooleanCardDialogvue_type_script_lang_js={mixins:[DateHelper/* default */.Z],props:["visibility"],components:{SpaceAssetChooser:SpaceAssetChooser/* default */.Z},data:function(){return{data:{},openAssetChooser:!1}},mounted:function(){},methods:{closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},handleIconClick:function(){this.openAssetChooser=!0},associate:function(data){this.data.asset=data,this.data.assetName=data.name,this.openAssetChooser=!1},save:function(){var data={carddata:this.data,selectedObj:this.data.asset};this.$emit("update:visibility",!1),this.$emit("save",data)},selectlevel:function(){}}},components_FBooleanCardDialogvue_type_script_lang_js=FBooleanCardDialogvue_type_script_lang_js,FBooleanCardDialog_component=(0,componentNormalizer/* default */.Z)(components_FBooleanCardDialogvue_type_script_lang_js,FBooleanCardDialogvue_type_template_id_b3d912da_render,FBooleanCardDialogvue_type_template_id_b3d912da_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBooleanCardDialog=FBooleanCardDialog_component.exports,FAlarmBarCardDialogvue_type_template_id_c95b316c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"alarmbar-dialog"},[_c("el-dialog",{staticClass:"fc-dialog-center-container fcu-alarm-dialog",attrs:{"custom-class":"fcu-card-builder",top:"0%","modal-append-to-body":!1,visible:_vm.visibility,width:"30%",title:"ALARM BAR CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"FCUCARD",attrs:{model:_vm.data,"label-position":"top"}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Name")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{autofocus:!0,placeholder:"Enter the title"},model:{value:_vm.data.name,callback:function($$v){_vm.$set(_vm.data,"name",$$v)},expression:"data.name"}})],1),_c("el-form-item",[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select"},model:{value:_vm.data.assetCategoryId,callback:function($$v){_vm.$set(_vm.data,"assetCategoryId",$$v)},expression:"data.assetCategoryId"}},_vm._l(_vm.assetCategory,(function(category,index){return _c("el-option",{key:index,attrs:{label:category.displayName,value:category.id}})})),1),_vm.errorText.category?_c("span",[_vm._v(" "+_vm._s(_vm.errorText.asset))]):_vm._e()],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Asset")]),_c("el-input",{staticClass:"el-input-textbox-full-border",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type"),disabled:!0},model:{value:_vm.resourceLabel,callback:function($$v){_vm.resourceLabel=$$v},expression:"resourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.openAssetChooser=!0}},slot:"suffix"})]),_vm.errorText.asset?_c("span",{staticClass:"error-txt"},[_vm._v(" "+_vm._s(_vm.errorText.asset))]):_vm._e()],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Period")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{placeholder:"Please select a period"},model:{value:_vm.data.periodId,callback:function($$v){_vm.$set(_vm.data,"periodId",$$v)},expression:"data.periodId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1)],1),_c("span",{staticClass:"modal-dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6 modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"col-6 modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Ok")])],1)],1),_c("space-asset-multi-chooser",{attrs:{visibility:_vm.openAssetChooser,initialValues:_vm.resourceData,resourceType:[2],showAsset:!0,disable:!0},on:{associate:_vm.associate,"update:visibility":function($event){_vm.openAssetChooser=$event}}})],1)},FAlarmBarCardDialogvue_type_template_id_c95b316c_staticRenderFns=[],SpaceAssetMultiChooser=__webpack_require__(673362),FAlarmBarCardDialogvue_type_script_lang_js={mixins:[DateHelper/* default */.Z],props:["visibility"],components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z},data:function(){return{data:{asset:[]},errorText:[],error:!1,selectedResourceList:null,openAssetChooser:!1}},mounted:function(){},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{resourceData:function(){return{assetCategory:this.data.assetCategoryId}},resourceLabel:function(){var _this=this;if(this.data.assetCategoryId>0){var message,category=this.assetCategory.filter((function(d){return d.id===_this.data.assetCategoryId})),selectedCount=this.selectedResourceList?this.selectedResourceList.length:null;if(selectedCount){var includeMsg=this.isIncludeResource?"included":"excluded";if(1===selectedCount)return this.selectedResourceList[0].name;message=selectedCount+" "+category[0].name+(selectedCount>1?"s":"")+" "+includeMsg}else message="All "+category[0].name+"s selected";return message}return null}}),methods:{closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},handleIconClick:function(){this.openAssetChooser=!0},associate:function(data){data.resourceList&&data.resourceList.length&&(this.selectedResourceList=data.resourceList,this.isIncludeResource=data.isInclude),
// this.data.assets = this.selectedResourceList.map(resource => resource.id)
this.data.asset=this.selectedResourceList.map((function(resource){return resource.id})),this.data.assetName=data.resourceList[0].name,this.openAssetChooser=!1},save:function(){
// if (this.data.assetCategoryId > 0 ) {
//   this.errorText['category'] =  'Please select asset Category and  '
//   this.error = true
//   return false
// }
if(this.errorText=[],this.error=!1,this.data.asset.length<=0)return this.errorText["asset"]=" * Please Select Asset ",this.error=!0,!1;var data={carddata:this.data,selectedObj:this.data.asset};this.$emit("update:visibility",!1),this.$emit("save",data)},selectlevel:function(){}}},components_FAlarmBarCardDialogvue_type_script_lang_js=FAlarmBarCardDialogvue_type_script_lang_js,FAlarmBarCardDialog_component=(0,componentNormalizer/* default */.Z)(components_FAlarmBarCardDialogvue_type_script_lang_js,FAlarmBarCardDialogvue_type_template_id_c95b316c_render,FAlarmBarCardDialogvue_type_template_id_c95b316c_staticRenderFns,!1,null,null,null)
/* harmony default export */,FAlarmBarCardDialog=FAlarmBarCardDialog_component.exports,validation=(__webpack_require__(212826),__webpack_require__(228436),__webpack_require__(162506),__webpack_require__(990260)),DashboardHelper={data:function(){return{backupDashboard:{},dashboardLayouts:{},dashboardTabforWidgets:null,newDashboardTabName:null,EnableDashboardOptions:!1,disableDashboardOptions:!1,copyallWidgets:!1,dashboardOptions:{showTabs:!1,dashboardTabPlacement:2},reportLoading:!1,chooseFolderPopover:!1,showAddDashboardfolder:!1,dashboardSave:!1,newDashboardName:"",assetCardData:null,buildingCardData:null,dashboardFolderQuery:"",kpiCard:null,assetcardEdit:!1,showFcuCardDialog:!1,showAlarmbarCardDialog:!1,showBooleanCardDialog:!1,fcuCardData:null,booleancardData:null,alarmcardData:null,cardToLayoutMap:{AHU:{w:12,h:20},LIGHT:{w:12,h:12},PUMP:{w:12,h:12},PUMP1:{w:12,h:12},WATER_TANK:{w:12,h:12},HVAC:{w:16,h:20},HVAC2:{w:12,h:12},HVAC3:{w:12,h:12},HVAC4:{w:20,h:24},HVAC5:{w:20,h:24},HVAC6:{w:20,h:24},HVAC7:{w:20,h:24},HVAC8:{w:20,h:24},HVAC9:{w:20,h:24},HVAC10:{w:20,h:24}}}},created:function(){this.$store.dispatch("loadAssetCategory")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategoryPickList"])),{},{tabsEnabled:function(){var dashboardTabContexts=this.dashboardTabContexts,dashboardOptions=this.dashboardOptions;return!(!dashboardTabContexts||!dashboardTabContexts.length||2!==dashboardOptions.dashboardTabPlacement)},bglayout:function(){for(var layout=[],prevX=0,prevY=1,i=0;i<=240;i++){var l={x:prevX,y:prevY,w:1,h:1,i:i.toString()};prevX+=1,prevX>24&&(prevX=0,prevY+=1),layout.push(l)}return layout},filteredDashboardList:function(){var _this=this;return this.dashboardFolderQuery&&""!==this.dashboardFolderQuery?this.dashboardFolderList.filter((function(rt){return rt.name.toLowerCase().includes(_this.dashboardFolderQuery.toLowerCase())})):this.dashboardFolderList}}),methods:{beforeDestroyHook:function(){
// before destroy hooks
},validateFolder:function(){return this.dashboardFolderList.length,null!==this.selectedDashoardFolder.name||(this.$message({message:"Enter Dashboard folder",type:"error"}),!1)},updateMultiTab:function(params){var _this2=this;this.$http.post("/dashboard/updateTabsList",params).then((function(){_this2.$message({message:"Dashboard updated successfully!",type:"success"}),_this2.$router.push(_this2.newconstractUrl(_this2.dashboard))}))},removeWidgets:function(dasthboardlayout){return dasthboardlayout.filter((function(widget){if(widget&&widget.w&&widget.h)return widget}))},prepareWidgetToSave:function(dasthboardlayout,dashboardTabId,dashboardTabName){var self=this;this.dashboardSave=!0;var dashboardWidgets=[],widgetData=null;if(null!==dasthboardlayout)for(var i=0;i<dasthboardlayout.length;i++){var gridItem=dasthboardlayout[i],reportTemplate=gridItem.widget.dataOptions.newReport&&gridItem.widget.dataOptions.newReport.type&&4===gridItem.widget.dataOptions.newReport.type?gridItem.widget.dataOptions.reportTemplate?gridItem.widget.dataOptions.reportTemplate:gridItem.widget.dataOptions.newReport.reportTemplate:null;if("object"===(0,esm_typeof/* default */.Z)(reportTemplate)&&(reportTemplate=JSON.stringify(reportTemplate)),widgetData="card"===gridItem.widget.type?(0,objectSpread2/* default */.Z)({id:gridItem.widget.id,type:gridItem.widget.type,layoutWidth:gridItem.w,layoutHeight:gridItem.h,order:i+1,xPosition:gridItem.x,yPosition:gridItem.y},gridItem.widget.dataOptions):{id:gridItem.widget.id,type:gridItem.widget.type,layoutWidth:gridItem.w,layoutHeight:gridItem.h,order:i+1,xPosition:gridItem.x,yPosition:gridItem.y,headerText:gridItem.widget.header.title,reportId:gridItem.widget.dataOptions.reportId,newReportId:gridItem.widget.dataOptions.newReportId,staticKey:gridItem.widget.dataOptions.staticKey?gridItem.widget.dataOptions.staticKey:null,viewName:gridItem.widget.dataOptions.viewName?gridItem.widget.dataOptions.viewName:null,moduleName:gridItem.widget.dataOptions.moduleName?gridItem.widget.dataOptions.moduleName:null,reportTemplate:reportTemplate},"graphics"===widgetData.type&&(widgetData.graphicsId=gridItem.widget.graphicsId,gridItem.widget.dataOptions&&gridItem.widget.dataOptions.graphicsOptions&&(widgetData.graphicsOptions="object"===(0,esm_typeof/* default */.Z)(gridItem.widget.dataOptions.graphicsOptions)?JSON.stringify(gridItem.widget.dataOptions.graphicsOptions):gridItem.widget.dataOptions.graphicsOptions)),gridItem.widget.dataOptions.building&&(widgetData.baseSpaceId=gridItem.widget.dataOptions.building.id),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingcard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingWithGraphCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingGaugeCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"textcard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson+""),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"imagecard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.imagecardData&&(widgetData.paramsJson={photoId:gridItem.widget.dataOptions.imagecardData.photoId,url:gridItem.widget.dataOptions.imagecardData.url},widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.imagecardData)),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"web"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard1"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard2"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard3"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCardNew"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingComboCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var data1=JSON.parse(gridItem.widget.dataOptions.metaJson);data1.expressions&&data1.hasOwnProperty("v2Script")&&data1.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:data1.expressions,workflowUIMode:1,isV2Script:data1.v2Script,workflowV2String:data1.workflowV2String}})):data1&&data1.expressions&&(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:data1.expressions,workflowUIMode:1}}))}if(gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var _data=JSON.parse(gridItem.widget.dataOptions.metaJson);_data.expressions&&_data.hasOwnProperty("v2Script")&&_data.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data.expressions,workflowUIMode:1,isV2Script:_data.v2Script,workflowV2String:_data.workflowV2String}})):_data.workflowV2String?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{isV2Script:!0,workflowV2String:_data.workflowV2String}})):_data&&_data.expressions?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data.expressions,workflowUIMode:1}})):(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{v2Script:!0,workflowV2String:"void test(){↵    ↵    ↵}"}}))}if(gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.paramsJson&&(widgetData.paramsJson=gridItem.widget.dataOptions.paramsJson||{}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiMultiResultCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var _data2=JSON.parse(gridItem.widget.dataOptions.metaJson);_data2.expressions&&_data2.hasOwnProperty("v2Script")&&_data2.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data2.expressions,workflowUIMode:1,isV2Script:_data2.v2Script,workflowV2String:_data2.workflowV2String}})):_data2&&_data2.expressions&&(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data2.expressions,workflowUIMode:1}}))}gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fcucard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrillFcu"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrillFcuList"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel1"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel2"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel3"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel1List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel2List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel3List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"resourceAlarmBar"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson,widgetData.paramsJson=JSON.parse(gridItem.widget.dataOptions.metaJson).params),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"alarmbarwidget"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson,widgetData.paramsJson=JSON.parse(gridItem.widget.dataOptions.metaJson).params),"chart"===gridItem.widget.type&&gridItem.widget.dataOptions&&gridItem.widget.dataOptions.hasOwnProperty("chartTypeInt")&&(widgetData.chartType=gridItem.widget.dataOptions.chartTypeInt),dashboardWidgets.push(widgetData)}var dashboardObj={};return"new"===self.mode?(dashboardObj={dashboardMeta:{id:self.dashboard.id,tabEnabled:self.dashboardOptions.showTabs,dashboardName:self.newdashboard.label,dashboardWidgets:dashboardWidgets,dashboardFolderId:self.dashboard.dashboardFolderId?self.dashboard.dashboardFolderId:null}},self.selectedDashoardFolder&&(dashboardObj.dashboardMeta.dashboardFolderId=self.selectedDashoardFolder&&self.selectedDashoardFolder.id?self.selectedDashoardFolder.id:null)):(dashboardObj={dashboardMeta:{id:self.dashboard.id,tabEnabled:self.dashboardOptions.showTabs,dashboardName:self.dashboard.label,linkName:self.dashboardLink,dashboardWidgets:dashboardWidgets,dashboardFolderId:self.dashboard.dashboardFolderId?self.dashboard.dashboardFolderId:null}},self.selectedDashoardFolder&&(dashboardObj.dashboardMeta.dashboardFolderId=self.selectedDashoardFolder&&self.selectedDashoardFolder.id?self.selectedDashoardFolder.id:null)),this.buildingId&&"sitedashboard"===this.dashboardLink?dashboardObj.siteId=this.buildingId:this.buildingId&&"buildingdashboard"===this.dashboardLink&&(dashboardObj.buildingId=this.buildingId),{dashboardName:dashboardObj.dashboardMeta.dashboardName,dashboardId:dashboardObj.dashboardMeta.id,dashboardFolderId:dashboardObj.dashboardMeta.dashboardFolderId,tabId:dashboardTabId,dashboardWidgets:this.updateDashboardTabId(dashboardObj.dashboardMeta.dashboardWidgets,dashboardTabId),dashboardTabName:dashboardTabName}},updateDashboardTabId:function(dashboards,dashboardTabId){var _this3=this;return dashboardTabId?(dashboards.forEach((function(rt){_this3.$set(rt,"dashboardTabId",dashboardTabId)})),dashboards):(dashboards.forEach((function(rt){_this3.$set(rt,"dashboardTabId",_this3.dashboardTabId)})),dashboards)},addNewDashboardTab:function(){var _this4=this,param={dashboardTabContext:{name:this.newDashboardTabName,sequence:1,dashboardId:this.dashboard.id}};this.$http.post("dashboard/addDashboardTab",param).then((function(response){response.data&&(_this4.saveEdit(_this4.dashboard),_this4.$message.success("Dashboard Tab Added Successfully"))})).catch((function(error){_this4.$message.error("Error Occured")}))},loadEmptyDashboard:function(){var _this5=this,layout=this.dashboardLayout;this.$http.get("/dashboard/".concat(this.dashboardLink)).then((function(response){if(response.data){_this5.dashboardTabContexts=response.data.dashboardJson[0].tabs,_this5.dashboard=response.data.dashboardJson[0],_this5.dashboardTabsList=[];var tabId=-1;if(_this5.dashboardTabContexts){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(_this5.dashboardTabContexts);try{for(_iterator.s();!(_step=_iterator.n()).done;){var tab=_step.value;if(_this5.newDashboardTabName&&_this5.newDashboardTabName===tab.name&&1===tab.sequence&&(tabId=tab.id,_this5.selectedTabId=tabId),_this5.dashboardTabsList.push({id:tab.id,name:tab.name,expand:!1}),tab.childTabs&&tab.childTabs.length>0){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(tab.childTabs);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var childTab=_step2.value;_this5.newDashboardTabName&&_this5.newDashboardTabName===childTab.name&&1===childTab.sequence&&(tabId=tab.id,_this5.selectedTabId=tabId),_this5.dashboardTabsList.push({id:childTab.id,name:childTab.name})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(_this5.newDashboardTabName)_this5.$router.push({query:{create:_this5.$route.query.create,tab:tabId}}),layout.forEach((function(rt){rt.dashboardTabId=tabId})),_this5.dashboardLayout=layout;else if(_this5.dashboardTabsList.length){var _tabId=_this5.dashboardTabsList[0].id;_this5.$router.push({query:{create:_this5.$route.query.create,tab:_tabId}})}}else if(-1===tabId){var query=_this5.$route.query,_ref=query||{},appId=_ref.appId;if((0,validation/* isEmpty */.xb)(appId))_this5.$router.push(_this5.newconstractUrl());else{var url="/app/newdashboardmanager";_this5.$router.push(url)}}}})).catch((function(error){_this5.$message.error("Error Occured")}))},saveEnabledDashboardOptions:function(){if(this.copyallWidgets&&null===this.newDashboardTabName||""===this.newDashboardTabName||""===this.newDashboardTabName.trim())this.$message.error("Tab name cannot be empty");else{this.copyallWidgets;var newDashboardTabName=this.newDashboardTabName;newDashboardTabName?this.addNewDashboardTab():this.saveEdit(this.dashboard),this.closeDashboardOption(!0)}},saveDisabledDashboardOptions:function(){var copyallWidgets=this.copyallWidgets,dashboardTabforWidgets=this.dashboardTabforWidgets,dashboardlayout=(this.newDashboardTabName,null);copyallWidgets&&dashboardTabforWidgets?(Object.keys(this.dashboardLayouts).length&&dashboardTabforWidgets!==this.dashboardTabId&&this.dashboardLayouts[dashboardTabforWidgets]?(dashboardlayout=this.dashboardLayouts[dashboardTabforWidgets],this.dashboardlayout=dashboardlayout):dashboardTabforWidgets!==this.dashboardTabId&&this.getDashboardTabWidgets(dashboardTabforWidgets),this.dashboardLayouts={},this.setIdNull(),this.dashboardTabContexts=null):(this.getDashboardDefualtWidget(),this.removeTabQuerry(),this.setEmptyTab()),this.closeDashboardOption(!0)},removeTabQuerry:function(){this.$router.push({query:{create:this.$route.query.create}})},setEmptyTab:function(){this.dashboardLayouts={},this.dashboardLayout=[],this.dashboardTabContexts=[]},getDashboardDefualtWidget:function(){var _this6=this;this.dashboardTabLoading=!0,this.$http.get("/dashboard/"+this.dashboard.linkName).then((function(response){if(response.data){var dashboard=response.data.dashboardJson[0].children;_this6.$set(_this6.dashboard,"children",dashboard),_this6.prepareDashboardLayout()}_this6.dashboardTabLoading=!1})).catch((function(){_this6.dashboardTabLoading=!1}))},getDashboardTabWidgets:function(dashboardTabId){var _this7=this;this.dashboardTabLoading=!0,this.$http.get("/dashboard/getTabWidgets?dashboardTabId="+dashboardTabId).then((function(response){if(response.data.dashboardTabContext){var dashboard=response.data.dashboardTabContext.clientWidgetJson;_this7.$set(_this7.dashboard,"children",dashboard),_this7.prepareDashboardLayout(),_this7.setIdNull()}_this7.dashboardTabLoading=!1})).catch((function(){_this7.dashboardTabLoading=!1}))},setIdNull:function(){this.dashboardLayout.forEach((function(rt){rt.widget&&rt.widget.id&&(rt.widget.id=-1)}))},closeDashboardOption:function(disbaled){if(!disbaled){var showTabs=this.dashboardOptions.showTabs;this.$set(this.dashboardOptions,"showTabs",!showTabs)}this.EnableDashboardOptions=!1,this.disableDashboardOptions=!1},beforeCloseDashboardOption:function(){
// this.dashboardOptions.showTabs = !this.dashboardOptions.showTabs
},showconfirmationDilog:function(){var showTabs=this.dashboardOptions.showTabs;this.dashboard.tabEnabled=showTabs,showTabs?this.setDefaultEnableDashboardTabOptions():(this.setDefaultDisableDashboardTabOptions(),this.EnableDashboardOptions=!0)},setDefaultDisableDashboardTabOptions:function(){this.copyallWidgets=!1,this.dashboardTabsList&&this.dashboardTabsList.length&&(this.dashboardTabforWidgets=this.dashboardTabsList[0].id)},setDefaultEnableDashboardTabOptions:function(){var _this8=this;this.copyallWidgets=!0,this.newDashboardTabName="";var params={dashboardId:this.dashboard.id};this.$http.put("/dashboard/enableDashboardTabs",params).then((function(response){response.data.dashboard?(_this8.$router.push(_this8.newconstractUrl()),_this8.closeDashboardOption(!0),_this8.$message.success("Dashboard Tab Enabled Successfully")):_this8.disableDashboardOptions=!0}))},setDefaultDashboard:function(){var filteredDashboardList=this.filteredDashboardList,selectedDashoardFolder=this.selectedDashoardFolder;this.dashbaordFolderName;if(filteredDashboardList&&filteredDashboardList.length){var folder=filteredDashboardList.find((function(rt){return"workorder"===rt.moduleName}));folder?(selectedDashoardFolder.id=folder.id,selectedDashoardFolder.name=folder.name,folder.name):(selectedDashoardFolder.id=filteredDashboardList[0].id,selectedDashoardFolder.name=filteredDashboardList[0].name,filteredDashboardList[0].name)}else selectedDashoardFolder.name=null},closeAddDashboard:function(){this.showAddDashboardfolder=!1},addDashbopardFolderNew:function(){var _this9=this,newDashboardName=this.newDashboardName;this.closeAddDashboard();var reportFolderObj={name:newDashboardName},query=this.$route.query,_ref2=query||{},appId=_ref2.appId;!(0,validation/* isEmpty */.xb)(appId)&&appId>0&&(reportFolderObj.appId=appId),this.$http.post("dashboard/addDashboardFolder?moduleName=workorder",{dashboardFolderContext:reportFolderObj}).then((function(response){var dashboardFolderContext=response.data.dashboardFolderContext;_this9.selectedDashoardFolder.name=newDashboardName,_this9.selectedDashoardFolder.id=dashboardFolderContext.id,_this9.pushDashboardFolder(dashboardFolderContext),_this9.newDashboardName=null})).catch((function(){
// this.$message({
//   message: 'Dashboard Folder not saved',
//   type: 'error',
// })
}))},pushDashboardFolder:function(folder){folder.displayOrder=this.dashboardFolderList.length+1,this.dashboardFolderList.push(folder)},addDashbopardFolder:function(){this.addDashbopardFolderNew(),this.dashbaordFolderName=this.newDashboardName,this.selectedDashoardFolder.name=this.dashbaordFolderName,this.showAddDashboardfolder=!1},handleButton:function(command){"addCard"===command?this.openNewCardBuilder():"addText"===command?this.addText():"addImage"===command?this.addImage():"addComponent"===command&&this.openDashboardCompoents()},setoption:function(option){this.option=option},getWidgetNextPosition:function(w,h,i){var maxY=0,maxX=0;this.dashboardLayout.forEach((function(layout){var y=layout.y;y>maxY&&(maxY=y)}));var ymaxLayouts=this.dashboardLayout.filter((function(layout){var y=layout.y;if(y===maxY)return layout}));ymaxLayouts.forEach((function(layout){var x=layout.x;x>maxX&&(maxX=x)}));var layout=ymaxLayouts.find((function(layout){var x=layout.x;if(x===maxX)return layout})),l={x:0,y:1/0,i:i};if(0===this.dashboardLayout.length&&(l={x:0,y:0,i:i}),layout){var nextX=layout.x+layout.w;nextX>96||nextX+w>96?(l.x=0,l.y=layout.y+layout.h):(l.x=nextX,l.y=layout.y+w)}return l},getReportWidget:function(data,layout,cardName){var position={};if("cards"===this.option&&"textcard"===cardName)position=this.getWidgetNextPosition(4,4,this.dashboardlength+""),layout.x=position.x,layout.y=position.y,layout.widget.layout.x=position.x,layout.widget.layout.y=position.y,layout.widget.dataOptions.metaJson=this.textcardData;else if("cards"===this.option&&"imagecard"===cardName)position=this.getWidgetNextPosition(4,4,this.dashboardlength+""),layout.x=position.x,layout.y=position.y,layout.widget.layout.x=position.x,layout.widget.layout.y=position.y;else if("view"===this.option){var ctype="view";position=this.getWidgetNextPosition(this.getMinW(ctype),this.getMinH(ctype),this.dashboardlength+""),layout={i:this.dashboardlength+"",x:position.x,y:position.y,w:this.getMinW("view"),h:this.getMinH("view"),widget:{layout:{width:this.getMinW("view"),x:position.x,y:position.y,position:this.dashboardlength,height:this.getMinH("view")},header:{subtitle:"today",title:data.displayName,export:!1},dataOptions:{dataurl:"",refresh_interval:100,viewName:data.name,name:"dummy",moduleName:data.moduleName},type:"view",id:-1},label:data.displayName,minW:this.getMinW("view"),minH:this.getMinH("view")}}else if("graphics"===this.option){var _ctype="graphics";position=this.getWidgetNextPosition(this.getMinW(_ctype),this.getMinH(_ctype),this.dashboardlength+""),layout={i:this.dashboardlength+"",x:position.x,y:position.y,w:this.getMinW("graphics"),h:this.getMinH("graphics"),widget:{layout:{width:this.getMinW("graphics"),x:0,y:1/0,position:this.dashboardlength,height:this.getMinH("graphics")},header:{subtitle:"today",title:data.name,export:!1},dataOptions:{dataurl:"",refresh_interval:100,webUrl:data.url,name:"dummy"},type:"graphics",graphicsId:data.id},minW:this.getMinW("graphics"),minH:this.getMinH("graphics"),label:data.label}}else if(data.widget)position=this.getWidgetNextPosition(this.getMinW(data.widget.type),this.getMinH(data.widget.type),this.dashboardlength+""),layout={i:this.dashboardlength+"",x:position.x,y:position.y,w:this.getMinW(data.widget.type),h:this.getMinH(data.widget.type),widget:{layout:{width:this.getMinW(data.widget.type),x:position.x,y:position.y,position:this.dashboardlength,height:this.getMinW(data.widget.type)},header:data.widget.header,dataOptions:data.widget.dataOptions,id:-1,reportId:data.widget.dataOptions.reportId,type:data.widget.type,name:""},minW:this.getMinW(data.widget.type),minH:this.getMinH(data.widget.type),moved:!1};else{var type=data.type,_ctype2="line";position=this.getWidgetNextPosition(this.getMinW(_ctype2),this.getMinH(_ctype2),this.dashboardlength+""),layout={i:this.dashboardlength+"",x:position.x,y:position.y,w:this.getMinW(_ctype2),h:this.getMinH(_ctype2),widget:{layout:{width:this.getMinW(_ctype2),x:position.x,y:position.y,position:this.dashboardlength,height:this.getMinW(_ctype2)},header:{title:data.name},dataOptions:{newReportId:data.id,newReport:this.newLayout?data:this.getCurrentModule()&&"workorder"===this.getCurrentModule().module||4===type?{type:type}:null},id:-1,newReportId:data.id,type:"chart",name:""},minW:this.getMinW(_ctype2),minH:this.getMinH(_ctype2),moved:!1},4===type&&(layout.widget.dataOptions["reportTemplate"]=data.reportTemplate)}return layout},updateBuildingCard:function(data){},setColorMapProperties:function(readingCard){if(readingCard.colorMap&&readingCard.readings&&readingCard.readings.readingField&&this.colorMapSupported[readingCard.readings.readingField.dataTypeEnum]){if("BOOLEAN"===readingCard.readings.readingField.dataTypeEnum&&(this.readingCard.colorMapConfig={BOOLEAN:{min:{label:null,textColor:"#000",bgColor:"#fff"},max:{label:null,textColor:"#000",bgColor:"#fff"}}}),"ENUM"===readingCard.readings.readingField.dataTypeEnum){var d={};this.readingCard.colorMapConfig=[];var data=readingCard.readings.readingField.enumMap;for(var key in data)data.hasOwnProperty(key)&&(d[key]={value:key,label:data[key],textColor:"#000",bgColor:"#fff"});this.readingCard.colorMapConfig={ENUM:this.$helpers.cloneObject(d)}}"NUMBER"===readingCard.readings.readingField.dataTypeEnum&&(this.readingCard.colorMapConfig={NUMBER:[{label:null,min:null,max:null,textColor:"#000",bgColor:"#fff"}]}),"DECIMAL"===readingCard.readings.readingField.dataTypeEnum&&(this.readingCard.colorMapConfig={DECIMAL:[{label:null,min:null,max:null,textColor:"#000",bgColor:"#fff"}]})}else this.readingCard.colorMapConfig={}},addColorMapElemnt:function(){this.readingCard.colorMapConfig["NUMBER"].push({label:null,min:null,max:null,textColor:"#000",bgColor:"#fff"})},removeColorMapElemnt:function(index){this.readingCard.colorMapConfig["NUMBER"].splice(index,1)},addColorMapElemntforDecimal:function(){this.readingCard.colorMapConfig["DECIMAL"].push({label:null,min:null,max:null,textColor:"#000",bgColor:"#fff"})},removeColorMapElemntDecimal:function(index){this.readingCard.colorMapConfig["DECIMAL"].splice(index,1)},saveBooleancard:function(data){this.booleancardData=data,this.addNewelemnt(),this.isDraging=!1},saveAlarmcard:function(data){this.alarmcardData=data,this.addNewelemnt(),this.isDraging=!1},addAssetCard:function(data){this.assetCardData=data,this.addNewelemnt(),this.isDraging=!1,this.showCardBuilder=!1},cardBuilder:function(data){this.kpiCard=data,this.addNewelemnt(),this.isDraging=!1,this.showkpiCard=!1,this.showkpitargetCard=!1},setBuildingCardData:function(data){this.buildingCardData=data,this.addNewelemnt(),this.isDraging=!1,this.dialogVisible=!1},updateKpiCard:function(data){this.kpiCard=data,this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.data=data,this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.metaJson=JSON.stringify(data),this.isDraging=!1,this.showkpiCard=!1,this.showkpitargetCard=!1,this.dialogVisible=!1,this.$refs["widget["+this.editwidgetData.index+"]"]&&this.$refs["widget["+this.editwidgetData.index+"]"].length&&this.$refs["widget["+this.editwidgetData.index+"]"][0].refresh()},saveFcuCard:function(data){this.fcuCardData=data,this.addNewelemnt(),this.isDraging=!1},updatFacuCard:function(data){this.isDraging=!1},updateAssetCardData:function(data){this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.metaJson=JSON.stringify(data),this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.readingComboCard=data;var widget=this.$helpers.cloneObject(this.dashboardLayout[this.editwidgetData.index]);widget.h=this.assetCardLayoutChanger(data),this.dashboardLayout.splice(this.editwidgetData.index,1,widget),this.isDraging=!1,this.showCardBuilder=!1,this.assetCardData=null,this.assetcardEdit=!1},editAssetCard:function(data){this.isDraging=!0,this.showCardBuilder=!0,this.assetCardData=data},loadAHUAssets:function(catagoryName){if(this.getAssetCategoryPickList()){var self=this,catagory=this.getAssetCategoryPickList(),catagoryId=null;Object.keys(this.getAssetCategoryPickList()).forEach((function(id){catagory[parseInt(id)]===catagoryName&&(catagoryId=parseInt(id))})),catagoryId&&"catagoryName"!==this.AHUcardCatogry&&this.$util.loadAsset({categoryId:catagoryId}).then((function(response){self.assets=response,self.AHUcardCatogry=catagoryName}))}},getCardSpacificLayout:function(h){var layout={1:4,2:6,3:9,4:12,5:18,6:20,7:22};return layout[h]||4*h},assetCardLayoutChanger:function(assetCardData){if(!assetCardData)return 12;var h=0;if("AHU"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),(assetCardData.templates.runStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),assetCardData.templates.autoStatus.value&&(h+=1),assetCardData.templates.temperature.value&&(h+=1),assetCardData.templates.valveFeedback.value&&(h+=1),(assetCardData.templates.scheduledControl.value||assetCardData.templates.staticControl.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("LIGHT"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),(assetCardData.templates.lightStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),assetCardData.templates.autoStatus.value&&(h+=1),(assetCardData.templates.scheduledControl.value||assetCardData.templates.staticControl.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("PUMP"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),assetCardData.templates.runStatusPercent.value&&(h+=1),(assetCardData.templates.autoStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("PUMP1"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),(assetCardData.templates.runStatus.value||assetCardData.templates.percentage.value)&&(h+=1),(assetCardData.templates.autoStatus.value||assetCardData.templates.tripStatus.value)&&(h+=1),h>1?this.getCardSpacificLayout(h):4;if("WATER_TANK"===assetCardData.cardType&&assetCardData.templates)return assetCardData.templates.name.value&&(h+=1),assetCardData.templates.levelPercent.value&&(h+=1),assetCardData.templates.levelPercent.value&&(h+=1),h>1?this.getCardSpacificLayout(h):4;var cardsvalue=["HVAC","HVAC4","HVAC5","HVAC6","HVAC7","HVAC8","HVAC9","HVAC10"];return cardsvalue.includes(assetCardData.cardType)&&assetCardData.templates?(Object.keys(assetCardData.templates).forEach((function(key){assetCardData.templates[key].value&&(h+=1)})),h>1?this.getCardSpacificLayout(h):4):"HVAC2"===assetCardData.cardType&&assetCardData.templates?(assetCardData.templates.name.value&&(h+=1),assetCardData.templates.runStatusValue.value&&(h+=1),assetCardData.templates.temperature.value&&(h+=1),h>1?this.getCardSpacificLayout(h):4):"HVAC3"===assetCardData.cardType&&assetCardData.templates?(assetCardData.templates.name.value&&(h+=1),assetCardData.templates.runStatusValue.value&&(h+=1),assetCardData.templates.autoStatus.value&&(h+=1),assetCardData.templates.valveFeedback.value&&(h+=1),h>1?this.getCardSpacificLayout(h):4):void 0}}},KFICardbuilderDialogvue_type_template_id_5cbb5711_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"f-kfi-card-builder fc-dialog-center-container","append-to-body":!0,visible:_vm.visibility,width:"50%",title:"KPI CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[_c("span",{staticClass:"kpi-card-header"},[_vm._v("KPI CARD")]),_c("el-select",{staticClass:"fc-input-full-border-select2  p0 pL10",attrs:{filterable:""},on:{change:function($event){return _vm.setModuleName(_vm.data.moduleName)}},model:{value:_vm.data.moduleName,callback:function($$v){_vm.$set(_vm.data,"moduleName",$$v)},expression:"data.moduleName"}},_vm._l(_vm.modulesObjList,(function(moduleObj){return _c("el-option-group",{key:moduleObj.label,attrs:{label:moduleObj.label}},_vm._l(moduleObj.list,(function(list){return _c("el-option",{key:list.moduleName,attrs:{label:list.label,value:list.moduleName}})})),1)})),1)],1),_c("div",{staticStyle:{height:"500px"}},[_vm.loading?_c("div",[_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm._e()],1):_vm._l(_vm.data.expressions,(function(expression,index){return[_c("el-form",{key:index,ref:"FCUCARD",refInFor:!0,attrs:{model:expression,"label-position":"top"}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("el-col",{attrs:{span:19}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Name")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{autofocus:!0,placeholder:"Name"},model:{value:expression.actualName,callback:function($$v){_vm.$set(expression,"actualName",$$v)},expression:"expression.actualName"}})],1)],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("el-col",{attrs:{span:19}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Metric")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{placeholder:"Please select a building"},model:{value:expression.aggregateString,callback:function($$v){_vm.$set(expression,"aggregateString",$$v)},expression:"expression.aggregateString"}},_vm._l(_vm.data.metrics,(function(metric,index){return _c("el-option",{key:index,attrs:{label:metric.displayName,value:metric.name}})})),1)],1),"count"!==expression.aggregateString?_c("el-col",{attrs:{span:2,offset:1}},[_c("div",{staticClass:"fc-input-div-full-border-f14-1 pointer mT25"},[_c("el-popover",{attrs:{disabled:!_vm.showMetricAggregation(_vm.metric),placement:"bottom",width:"70",trigger:"click","popper-class":"metric-popover"},model:{value:_vm.toggleMetricAggregation,callback:function($$v){_vm.toggleMetricAggregation=$$v},expression:"toggleMetricAggregation"}},[_vm._l(_vm.metricAggregation,(function(metricAggr,metricAggrIdx){return _c("div",{key:metricAggrIdx,staticClass:"pointer pT5 pB5 fc-label-hover label-txt-black f14 text-center",class:{active:_vm.data.expressions[index].fieldName===metricAggr.value},attrs:{value:metricAggr.value},on:{click:function($event){return _vm.setMetricAggregation(metricAggr,index)}}},[_vm._v(" "+_vm._s(metricAggr.label)+" ")])})),_c("img",{staticClass:"p15",attrs:{slot:"reference",disabled:!_vm.showMetricAggregation(_vm.metric),src:__webpack_require__(667527)},slot:"reference"})],2)],1)]):_vm._e()],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("div",{staticClass:"height100"},[_c("new-criteria-builder",{staticClass:"report-criteria-buuilder",attrs:{exrule:_vm.data.expressions[0].criteria,showSiteField:!0,module:_vm.data.moduleName,title:_vm.$t("setup.users_management.specify_rules_for_assigment_rules")},on:{condition:_vm.getCriteria,moduleMetaObject:_vm.getModuleObject}})],1)]),_c("el-form-item",{staticClass:"pB60",attrs:{prop:"category"}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Date Fields")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"80%"},attrs:{placeholder:"Please select a building"},on:{change:function($event){_vm.data.operatorId=22}},model:{value:_vm.data.selectedTimeField,callback:function($$v){_vm.$set(_vm.data,"selectedTimeField",$$v)},expression:"data.selectedTimeField"}},[_vm._l(_vm.data.timeFields.filter((function(rt){return null!==rt.columnName})),(function(time,index){return _c("el-option",{key:index,attrs:{label:time.displayName,value:time.columnName}})})),_c("el-option",{attrs:{label:"None",value:null}})],2)],1),_vm.data.selectedTimeField?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Period")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"80%"},attrs:{placeholder:"Please select a building"},model:{value:_vm.data.operatorId,callback:function($$v){_vm.$set(_vm.data,"operatorId",$$v)},expression:"data.operatorId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1):_vm._e()],1)],1)]}))],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Close")]),_vm.kpiCard?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save("update")}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)])},KFICardbuilderDialogvue_type_template_id_5cbb5711_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),NewCriteriaBuilder=(__webpack_require__(336585),__webpack_require__(634338),__webpack_require__(506203),__webpack_require__(859850)),kpiConstants=__webpack_require__(361251),KFICardbuilderDialogvue_type_script_lang_js={props:["visibility","kpiCard"],mixins:[DateHelper/* default */.Z],data:function(){return{moduleMetaObject:null,periods:{Yesterday:{baseLineSupported:!0,currentOperator:!1,dynamicOperator:!0,operator:"Yesterday",operatorId:25,valueNeeded:!1,_name:"YESTERDAY"},"Current Week":{baseLineSupported:!0,currentOperator:!0,dynamicOperator:!0,operator:"Current Week",operatorId:31,valueNeeded:!1,_name:"CURRENT_WEEK"},"Last Month":{baseLineSupported:!0,currentOperator:!1,dynamicOperator:!0,operator:"Last Month",operatorId:27,valueNeeded:!1,_name:"LAST_MONTH"},"is not empty":{dynamicOperator:!1,operator:"is not empty",operatorId:2,valueNeeded:!1,_name:"IS_NOT_EMPTY"},Today:{baseLineSupported:!0,currentOperator:!0,dynamicOperator:!0,operator:"Today",operatorId:22,valueNeeded:!1,_name:"TODAY"},"Current Month":{baseLineSupported:!0,currentOperator:!0,dynamicOperator:!0,operator:"Current Month",operatorId:28,valueNeeded:!1,_name:"CURRENT_MONTH"},"Current Year":{baseLineSupported:!0,currentOperator:!0,dynamicOperator:!0,operator:"Current Year",operatorId:44,valueNeeded:!1,_name:"CURRENT_YEAR"},"Last Year":{baseLineSupported:!0,currentOperator:!0,dynamicOperator:!0,operator:"Last Year",operatorId:45,valueNeeded:!1,_name:"LAST_YEAR"}},metricAggregation:[{label:"AVG",value:"avg"},{label:"SUM",value:"sum"},{label:"MIN",value:"min"},{label:"MAX",value:"max"}],loading:!1,toggleMetricAggregation:!1,data:{name:"",moduleName:"workorder",datatype:"NUMBER",metrics:[],timeFields:[],selectedTimeField:null,operatorId:null,metricAgg:null,conditionalFormatting:[],expressions:[{name:null,actualName:null,fieldName:"id",aggregateString:"count",aggregate:null,moduleName:"workorder",criteria:{pattern:"(1)",conditions:{1:{fieldName:"__vue_devtool_undefined__",value:"__vue_devtool_undefined__",columnName:"__vue_devtool_undefined__",operatorId:"__vue_devtool_undefined__"}},resourceOperator:!1}}]},showCriteriaBuilder:!1,selectedIndex:0,modulesObjList:[]}},components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadModules();case 2:_this.loadData();case 3:case"end":return _context.stop()}}),_callee)})))()},computed:{metric:function(){var _this2=this;return this.data&&this.data.aggregateString?this.data.metrics.find((function(rt){return rt.name===_this2.data.aggregateString})):this.data.metrics.length?this.data.metrics[0]:null}},methods:{loadModules:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,error,data,modulesListKey;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/v3/modules/list/all");case 2:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this3.$message.error(error.message):(modulesListKey={systemModules:"System Modules",customModules:"Custom Modules"},Object.entries(modulesListKey).forEach((function(_ref){var _ref2=(0,slicedToArray/* default */.Z)(_ref,2),key=_ref2[0],value=_ref2[1],list=data[key].map((function(list){return{moduleName:list.name,label:list.displayName}}));"systemModules"===key&&(list=[].concat((0,toConsumableArray/* default */.Z)(list),(0,toConsumableArray/* default */.Z)((0,kpiConstants/* getModules */.h)().filter((function(module){return!0===_this3.$helpers.isLicenseEnabled(module.license)}))))),_this3.modulesObjList.push({list:list,label:value})})));case 6:case"end":return _context2.stop()}}),_callee2)})))()},getModuleObject:function(moduleMetaObject){this.moduleMetaObject=moduleMetaObject},deforamtData:function(data){if(data&&data.selectedTimeField){if(Object.keys(data.expressions[0].criteria.conditions).length){var serachValue=
// ' and ' +
// Object.keys(data.expressions[0].criteria.conditions)[
//   Object.keys(data.expressions[0].criteria.conditions).length - 2
// ] +
" and "+Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-1]+")",newPattern=data.expressions[0].criteria.pattern.replace(serachValue,")");data.expressions[0].criteria.pattern=newPattern,Object.keys(data.expressions[0].criteria.conditions).forEach((function(key){var lastValue=Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-1];
// let lastBeforeValue = Object.keys(
//   data.expressions[0].criteria.conditions
// )[Object.keys(data.expressions[0].criteria.conditions).length - 2]
key===lastValue&&delete data.expressions[0].criteria.conditions[key]}))}return data}return data},loadData:function(){this.kpiCard&&(this.data=this.deforamtData(this.kpiCard),this.data.hasOwnProperty("moduleName")||(this.data.moduleName="workorder")),this.loadFields()},closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},setMertic:function(){},setModuleName:function(modulename){this.loadDefaultData(modulename),this.data.expressions[0].moduleName=modulename,this.loadFields()},loadDefaultData:function(modulename){this.data={name:"",moduleName:modulename||"workorder",metrics:[],timeFields:[],selectedTimeField:null,operatorId:null,metricAgg:null,expressions:[{name:null,actualName:null,fieldName:"id",aggregateString:"count",aggregate:null,moduleName:"workorder",criteria:{pattern:"(1)",conditions:{1:{fieldName:"__vue_devtool_undefined__",value:"__vue_devtool_undefined__",columnName:"__vue_devtool_undefined__",operatorId:"__vue_devtool_undefined__"}},resourceOperator:!1}}]}},showMetricAggregation:function(metric){return!metric||!metric.defaultMetric||(this.toggleMetricAggregation=!1,!1)},validateData:function(){return!(!this.data||!this.data.expressions.length)&&(null!==this.data.expressions[0].actualName&&!!(this.data.expressions[0].criteria&&this.data.expressions[0].criteria.conditions&&Object.keys(this.data.expressions[0].criteria.conditions).length&&void 0!==this.data.expressions[0].criteria.conditions[1].columnName))},setMetricAggregation:function(agg,index){this.data.expressions[index].fieldName=agg.value,this.toggleMetricAggregation=!1},save:function(update){this.validateData()?(this.$emit("update:visibility",!1),this.data.selectedTimeField?
// this.applyPeriod()
this.applyTimefields():this.data.operatorId=null,this.convertData(),update?this.$emit("update",this.data):this.$emit("save",this.data)):this.$message.error("Please enter all the details !!")},convertData:function(){var _this4=this;this.data.expressions.forEach((function(expression){if("count"!==expression.aggregateString){var temp=expression.aggregateString;expression.aggregateString=expression.fieldName,expression.fieldName=temp}expression.name=_this4.formatName(expression.actualName)}))},formatName:function(name){return name.toLocaleLowerCase().split(" ").join("")},applyTimefields:function(){var _this5=this;if(this.data&&this.data.expressions.length&&this.data.expressions[0].criteria.conditions){var timeObj=this.data.timeFields.find((function(rt){return rt.columnName===_this5.data.selectedTimeField})),defaultExpresion={fieldName:timeObj.name,value:null,columnName:this.data.selectedTimeField,operatorId:this.data.operatorId,isResourceOperator:!1,parseLabel:null,valueArray:[],operatorLabel:Object.values(this.periods).find((function(rt){return rt.operatorId=_this5.data.operatorId}))?Object.values(this.periods).find((function(rt){return rt.operatorId=_this5.data.operatorId})).operator:"",active:!1,operatorsDataType:{dataType:timeObj.dataTypeEnum,displayType:timeObj.displayType},isSpacePicker:!1};this.data.expressions[0].criteria.conditions[Object.keys(this.data.expressions[0].criteria.conditions).length+1]=defaultExpresion,this.data.expressions[0].criteria.pattern=this.data.expressions[0].criteria.pattern.split(")")[0]+" and "+Object.keys(this.data.expressions[0].criteria.conditions).length+")"}},applyPeriod:function(){if(this.data&&this.data.expressions.length&&this.data.expressions[0].criteria.conditions){var defaultExpresion={fieldName:"dueDate",value:null,columnName:"Tickets.DUE_DATE",operatorId:this.data.operatorId,isResourceOperator:!1,parseLabel:null,valueArray:[],operatorLabel:"Today",active:!1,operatorsDataType:{dataType:"DATE_TIME",displayType:"DATETIME"},isSpacePicker:!1};this.data.expressions[0].criteria.conditions[Object.keys(this.data.expressions[0].criteria.conditions).length+1]=defaultExpresion,this.data.expressions[0].criteria.pattern=this.data.expressions[0].criteria.pattern.split(")")[0]+" and "+Object.keys(this.data.expressions[0].criteria.conditions).length+")"}},constractData:function(rawData){var data=this.$helpers.cloneObject(rawData);return data},addCriteriaAndResconstruct:function(){this.showCriteriaBuilder=!1},showcriteriabuilder:function(index){this.selectedIndex=index,this.showCriteriaBuilder=!0},getCriteria:function(criteria){this.data.expressions[this.selectedIndex].criteria=criteria},loadFields:function(){var _this6=this;this.loading=!0,this.prepareMetrics(),this.$http.post("/v2/report/getReportFields",{moduleName:this.data.moduleName}).then((function(response){_this6.getTimeFields(response.data.result),_this6.loading=!1}))},getTimeFields:function(result){result.meta&&result.meta.dimension&&result.meta.dimension.time&&(this.data.timeFields=result.meta.dimension.time)},prepareMetrics:function(){var _this7=this,url="v2/kpi/module/metrics?moduleName=".concat(this.data.moduleName);return this.$http.get(url).then((function(_ref3){var data=_ref3.data;if(0===data.responseCode){var metrics=data.result.metrics;_this7.data.metrics=metrics}})).catch((function(){_this7.data.metrics=[]}))}}},components_KFICardbuilderDialogvue_type_script_lang_js=KFICardbuilderDialogvue_type_script_lang_js,KFICardbuilderDialog_component=(0,componentNormalizer/* default */.Z)(components_KFICardbuilderDialogvue_type_script_lang_js,KFICardbuilderDialogvue_type_template_id_5cbb5711_render,KFICardbuilderDialogvue_type_template_id_5cbb5711_staticRenderFns,!1,null,null,null)
/* harmony default export */,KFICardbuilderDialog=KFICardbuilderDialog_component.exports,DashboardCardDialogsvue_type_template_id_79a749f0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:_vm.keyToName[_vm.data.key],"append-to-body":!0,"custom-class":{"building-dialog":!0,"select-building-dialog":!0,"fc-dialog-center-container":!0,"dashboard-card-dialog":!0,"control-command-card-dialog":_vm.data.key&&"controlCommandmini"===_vm.data.key},visible:_vm.visibility,width:"30%","before-close":_vm.cancel},on:{"update:visible":function($event){_vm.visibility=$event}}},[_vm.data.key&&"controlCommandmini"===_vm.data.key?_c("div",[_c("contol-command-dialog",{directives:[{name:"show",rawName:"v-show",value:"controlCommandmini"===_vm.data.key,expression:"data.key === 'controlCommandmini'"}],attrs:{modelData:_vm.data.buildings},on:{"update:modelData":function($event){return _vm.$set(_vm.data,"buildings",$event)},"update:model-data":function($event){return _vm.$set(_vm.data,"buildings",$event)}}})],1):_c("div",[_vm.data.key&&"profilemini"===_vm.data.key?_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v("Image Field")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please select a building",filterable:""},model:{value:_vm.data.buildings.selectedBuilding,callback:function($$v){_vm.$set(_vm.data.buildings,"selectedBuilding",$$v)},expression:"data.buildings.selectedBuilding"}},[_c("el-option-group",{attrs:{label:"Sites"}},_vm._l(_vm.sites,(function(site,idx){return _c("el-option",{key:idx,attrs:{label:site.name,value:site.id}})})),1),_c("el-option-group",{attrs:{label:"Buildings"}},_vm._l(_vm.buildings,(function(building,index){return _c("el-option",{key:index,attrs:{label:building.name,value:building.id}})})),1)],1)],1):_vm._e(),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT10"},[_vm._v("Asset")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{disabled:!0,type:"text",placeholder:_vm.$t("common._common.to_search_type")},model:{value:_vm.selectedResourceLabel,callback:function($$v){_vm.selectedResourceLabel=$$v},expression:"selectedResourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.pickerVisibility=!0}},slot:"suffix"})])],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v("Reading")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please select a Field",filterable:"","no-data-text":"Loading..."},on:{change:function($event){return _vm.setModulename(_vm.data.buildings.selectedReading)}},model:{value:_vm.data.buildings.selectedReading,callback:function($$v){_vm.$set(_vm.data.buildings,"selectedReading",$$v)},expression:"data.buildings.selectedReading"}},_vm._l(_vm.readings,(function(reading,index){return _c("el-option",{key:index,attrs:{label:reading.displayName,value:reading.name}})})),1)],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v("Period")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please select a period"},model:{value:_vm.data.operatorId,callback:function($$v){_vm.$set(_vm.data,"operatorId",$$v)},expression:"data.operatorId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Aggregation ")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please select a aggregation"},model:{value:_vm.data.aggregation,callback:function($$v){_vm.$set(_vm.data,"aggregation",$$v)},expression:"data.aggregation"}},_vm._l(_vm.aggregateFunctions,(function(agg,index){return _c("el-option",{key:index,attrs:{label:agg.label,value:agg.name}})})),1)],1),_vm.data.key&&"energycostmini"===_vm.data.key?_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Cost - Multiplication factor ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"cost"},model:{value:_vm.data.cost,callback:function($$v){_vm.$set(_vm.data,"cost",$$v)},expression:"data.cost"}}),_c("div",{staticClass:"fc-grey2 f11 pT5"},[_vm._v("* (Multiplication factor * Reading )")])],1):_vm._e(),_vm.data.key&&"carbonmini"===_vm.data.key?_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Carbon - Multiplication factor ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"cost"},model:{value:_vm.data.carbon,callback:function($$v){_vm.$set(_vm.data,"carbon",$$v)},expression:"data.carbon"}}),_c("div",{staticClass:"fc-grey2 f11 pT5"},[_vm._v("* (Multiplication factor * Reading )")])],1):_vm._e()]),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancel()}}},[_vm._v("Cancel")]),_vm.data.edit?_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.update()}}},[_vm._v("Update")]):_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Confirm")])],1),_c("space-asset-chooser",{attrs:{resourceType:[2],visibility:_vm.pickerVisibility,query:_vm.quickSearchQuery,picktype:"'asset'",showAsset:!0,appendToBody:!0,closeOnClickModel:!0,filter:_vm.filter},on:{associate:function($event){return _vm.associate($event)},"update:visibility":function($event){_vm.pickerVisibility=$event}}})],1)},DashboardCardDialogsvue_type_template_id_79a749f0_staticRenderFns=[],NewDateHelper=__webpack_require__(105534),ControlCommandDialogvue_type_template_id_395e2933_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Controlable Asset ")]),_c("el-select",{staticClass:" fc-input-full-border2",attrs:{placeholder:"Please select a Field",filterable:"","no-data-text":"Loading..."},model:{value:_vm.modelData.selectedAsset,callback:function($$v){_vm.$set(_vm.modelData,"selectedAsset",$$v)},expression:"modelData.selectedAsset"}},_vm._l(_vm.controlableAssets,(function(asset){return _c("el-option",{key:asset.id,attrs:{label:asset.name,value:asset.id}})})),1)],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Reading ")]),_c("el-select",{staticClass:" fc-input-full-border2",attrs:{placeholder:"Please select a Field",filterable:"","no-data-text":"Loading..."},model:{value:_vm.modelData.selectedReading,callback:function($$v){_vm.$set(_vm.modelData,"selectedReading",$$v)},expression:"modelData.selectedReading"}},_vm._l(_vm.assetReadings,(function(reading,index){return _c("el-option",{key:index,attrs:{label:reading.displayName,value:reading.name}})})),1)],1)])},ControlCommandDialogvue_type_template_id_395e2933_staticRenderFns=[],ControlCommandMixin=__webpack_require__(257321),ControlCommandDialogvue_type_script_lang_js={props:["modelData"],mixins:[ControlCommandMixin/* default */.Z],data:function(){return{controlCommand:{},assetReadings:null,controlableAssets:null}},watch:{"modelData.selectedAsset":{handler:function(newVal,oldVal){oldVal!==newVal&&(this.assetReadings=this.getControlableReadings(newVal),this.modelData.assetdetails=this.controlableAssets.filter((function(asset){return asset.id===newVal})))},immediate:!0},"modelData.selectedReading":{handler:function(newVal,oldVal){oldVal!==newVal&&(this.modelData.readingField=this.assetReadings.filter((function(field){return field.name===newVal})))},immediate:!0}},computed:{},methods:{getControlableAssets:function(){var _this=this;this.$http.get("/v2/controlAction/getControllableAssets").then((function(response){_this.controlableAssets=response.data.result.controllableResources}))},getControlableReadings:function(resourceId){var _this2=this;this.$http.get("/v2/controlAction/getControllableFields?resourceId="+resourceId).then((function(response){_this2.assetReadings=response.data.result.controllableFields}))}},mounted:function(){this.getControlableAssets()}},components_ControlCommandDialogvue_type_script_lang_js=ControlCommandDialogvue_type_script_lang_js,ControlCommandDialog_component=(0,componentNormalizer/* default */.Z)(components_ControlCommandDialogvue_type_script_lang_js,ControlCommandDialogvue_type_template_id_395e2933_render,ControlCommandDialogvue_type_template_id_395e2933_staticRenderFns,!1,null,null,null)
/* harmony default export */,ControlCommandDialog=ControlCommandDialog_component.exports,DashboardCardDialogsvue_type_script_lang_js={props:["visibility","cardData","type"],mixins:[DateHelper/* default */.Z,ControlCommandMixin/* default */.Z],data:function(){return{pickerVisibility:!1,quickSearchQuery:"",selectedResourceLabel:null,data:{key:"",edit:!1,operatorId:28,aggregation:"sum",dateFilter:null,cost:1,carbon:1,buildings:{selectedBuilding:null,selectedAsset:null,selectedReading:null,SelectedModuleName:null,readingField:null,assetdetails:null},building:{},expressions:[]},assets:[],buildingVsAssets:{},readings:[],keyToName:{profilemini:"Energy",energycostmini:"Energy Cost",carbonmini:"Carbon Emission",controlCommandmini:"Control Command"},aggregateFunctions:[{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}]}},mounted:function(){},components:{SpaceAssetChooser:SpaceAssetChooser/* default */.Z,ContolCommandDialog:ControlCommandDialog},created:function(){var _this=this;this.visibility&&Promise.all([this.$store.dispatch("loadSites"),this.$store.dispatch("loadBuildings")]).then((function(){_this.getControlableAssets(),_this.cardData&&(_this.data=_this.cardData),_this.loadDefaults(),_this.loadReadingFields()}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.sites},buildings:function(state){return state.buildings}})),{},{controlableAssets:function(){return this.getControlableAssets()},filter:function(){}}),methods:{setModulename:function(moduleName){var reading=this.readings.find((function(rt){return rt.name===moduleName}));this.data.buildings.SelectedModuleName=reading.module&&reading.module.name?reading.module.name:"energydata"},associate:function(selectedObj){this.data.buildings.selectedAsset=selectedObj.id,this.loadAssetFields(),this.selectedResourceLabel=selectedObj.name,this.pickerVisibility=!1,this.$forceUpdate()},loadDefaults:function(){this.data.buildings.selectedAsset&&this.loadAssetFields(),this.data.key=this.type||""},cancel:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(){this.validate()&&(this.setValues(),this.$emit("save",this.data),this.cancel())},validate:function(){return this.data.key&&"profilemini"===this.data.key&&!this.data.buildings.selectedBuilding?(this.$message.error("Select image Field"),!1):this.data.buildings.selectedAsset?!!this.data.buildings.selectedReading||(this.$message.error("Select readings details"),!1):(this.$message.error("Select asset details"),!1)},update:function(){this.validate()&&(this.setValues(),this.$emit("update",this.data))},getworkFlowString:function(){var string="";if("energycostmini"===this.data.key)string='Map test(){  date = new NameSpace("date");    period = date.getDateRange("'+this.data.dateFilter.queryStr+'");    lastMonth = date.getDateRange("Last Month"); db = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' &&  ttime == period],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "'+this.data.aggregation+'" };   db1 = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' && ttime == lastMonth],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "'+this.data.aggregation+'" };  thisMonthEnergy = Module("'+this.data.buildings.SelectedModuleName+'").fetch(db); if (thisMonthEnergy == null) {thisMonthEnergy = 0;} lastEnergy = Module("'+this.data.buildings.SelectedModuleName+'").fetch(db1);  data = {}; cost = (thisMonthEnergy * '+this.data.cost+');data["currentVal"] = cost;data["lastVal"] = lastEnergy;return data;}';else if("carbonmini"===this.data.key)string='Map test(){  date = new NameSpace("date");    period = date.getDateRange("'+this.data.dateFilter.queryStr+'");     lastMonth = date.getDateRange("Last Month"); db = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' &&  ttime == period],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "'+this.data.aggregation+'" };   db1 = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' && ttime == lastMonth],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "'+this.data.aggregation+'" };   thisMonthEnergy = Module("'+this.data.buildings.SelectedModuleName+'").fetch(db); if (thisMonthEnergy == null) {thisMonthEnergy = 0;} lastEnergy = Module("'+this.data.buildings.SelectedModuleName+'").fetch(db1); data = {}; cost = (thisMonthEnergy * '+this.data.carbon+');data["currentVal"] = cost;data["lastVal"] = lastEnergy;return data;}';else if("controlCommandmini"===this.data.key){
// comso
var moduleName=this.data.buildings.readingField[0].module.name;string='Map test(){   date = new NameSpace("date");    period = date.getDateRange("'+this.data.dateFilter.queryStr+'");    lastMonth = date.getDateRange("Last Month"); db = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' &&  ttime == period],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "lastValue" };   db1 = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' && ttime == lastMonth],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "'+this.data.aggregation+'" };   thisMonthEnergy = Module("'+moduleName+'").fetch(db); if (thisMonthEnergy == null) {thisMonthEnergy = 0;} fieldObj = new NameSpace("module").getField("'+this.data.buildings.selectedReading+'", "'+moduleName+'"); lastEnergy = Module("'+moduleName+'").fetch(db1); readingField = '+this.data.buildings.readingField[0].id+"; parentId ="+this.data.buildings.selectedAsset+';data = {}; data["currentVal"] = thisMonthEnergy;data["readingField"]= readingField;data["fieldObj"]=fieldObj;data["parentId"]= parentId ;data["lastVal"] = lastEnergy;return data;}'}else string='Map test(){  date = new NameSpace("date");    period = date.getDateRange("'+this.data.dateFilter.queryStr+'");    lastMonth = date.getDateRange("Last Month"); db = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' &&  ttime == period],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "'+this.data.aggregation+'" };   db1 = {   criteria : [parentId == '+this.data.buildings.selectedAsset+' && ttime == lastMonth],   field : "'+this.data.buildings.selectedReading+'",   aggregation : "'+this.data.aggregation+'" };   thisMonthEnergy = Module("'+this.data.buildings.SelectedModuleName+'").fetch(db); if (thisMonthEnergy == null) {thisMonthEnergy = 0;} lastEnergy = Module("'+this.data.buildings.SelectedModuleName+'").fetch(db1); data = {}; data["currentVal"] = thisMonthEnergy;data["lastVal"] = lastEnergy;return data;}';return string},setValues:function(){var _this2=this;this.data.building=[].concat((0,toConsumableArray/* default */.Z)(this.buildings),(0,toConsumableArray/* default */.Z)(this.sites)).find((function(rt){return rt.id===_this2.data.buildings.selectedBuilding})),this.data.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(this.data.operatorId),this.data.dateFilter["queryStr"]=this.getdateOperators().find((function(rt){return rt.value===_this2.data.operatorId})).queryStr,this.data.workflowV2String=this.getworkFlowString()},loadAssetFields:function(){var _this3=this,assetId=this.data.buildings.selectedAsset;this.$util.loadAssetReadingFields(assetId).then((function(response){_this3.readings=response}))},loadReadingFields:function(){var self=this;self.$http.get("/asset/getreadings").then((function(response){self.assets=response&&response.data&&response.data.assets?response.data.assets:{}}))}}},components_DashboardCardDialogsvue_type_script_lang_js=DashboardCardDialogsvue_type_script_lang_js,DashboardCardDialogs_component=(0,componentNormalizer/* default */.Z)(components_DashboardCardDialogsvue_type_script_lang_js,DashboardCardDialogsvue_type_template_id_79a749f0_render,DashboardCardDialogsvue_type_template_id_79a749f0_staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardCardDialogs=DashboardCardDialogs_component.exports,TargetMeterDialogvue_type_template_id_3d0f2ac5_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:_vm.keyToName[_vm.data.key],"modal-append-to-body":!1,"custom-class":"building-dialog meter-dialog-page fc-dialog-header-hide text-center",visible:_vm.visibility,width:"90%","before-close":_vm.cancel},on:{"update:visible":function($event){_vm.visibility=$event}}},[0===_vm.data.template?_c("div",{staticClass:"meter-dialog-body"},[_c("div",{staticClass:"width100 tr-header "},[_c("div",{staticClass:"fL pointer",on:{click:_vm.cancel}},[_c("i",{staticClass:"el-icon-arrow-left pL5"}),_vm._v("Back ")]),_c("div",{staticClass:"fR pointer",on:{click:_vm.cancel}},[_c("i",{staticClass:"el-icon-close"})])]),_c("div",{staticClass:"fc-black-com f14 fwBold pB20 header-new-1"},[_vm._v(" Choose Target meter style ")]),_c("div",{staticClass:"graybg"}),_c("div",{staticClass:"meter-dialog-body-bg"},[_c("div",{staticClass:"flex-middle p20"},[_c("div",{staticClass:"width100"},[_c("div",{staticClass:"meter-card-bg mR10 active-border",on:{click:function($event){_vm.data.template=1}}},[_c("div",{staticClass:"text-center"},[_c("img",{attrs:{src:__webpack_require__(611203)}})])]),_c("div",{staticClass:"label-txt-black pB10 text-center pT10 pR10"},[_vm._v(" Dial Gauge ")])]),_c("div",{staticClass:"width100"},[_c("div",{staticClass:"meter-card-bg mL10",on:{click:function($event){_vm.data.template=1}}},[_c("div",{staticClass:"text-center"},[_c("img",{attrs:{src:__webpack_require__(151826)}})])]),_c("div",{staticClass:"label-txt-black pB10 text-center pT10 pL10"},[_vm._v(" Traffic Lights ")])])])])]):_vm._e(),1===_vm.data.template?_c("div",{staticClass:"chart-transition"},[_c("el-row",{staticClass:"target-meter-body-conatiner"},[_c("el-col",{staticClass:"pL40",attrs:{span:16}},[_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" Title ")]),_c("el-input",{staticClass:"fc-input-full-border2 pT10",attrs:{placeholder:"Title"},model:{value:_vm.data.title,callback:function($$v){_vm.$set(_vm.data,"title",$$v)},expression:"data.title"}})],1),_c("div",{staticClass:"reading-card-container pT20"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" Add Reading ")]),_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading  fc-popover-p0"},model:{value:_vm.addreadingVisible,callback:function($$v){_vm.addreadingVisible=$$v},expression:"addreadingVisible"}},[_c("f-add-data-point",{ref:"addDataPointForm",attrs:{showLastValue:!0,source:"dashboardedit"},on:{save:_vm.getBaseDatapoint,cancel:_vm.cancelDataPoint}}),_c("el-input",{staticClass:"addReading-title fc-input-full-border2",attrs:{slot:"reference",autofocus:!0,placeholder:"Click to add Reading",disabled:!0},slot:"reference",model:{value:_vm.data.selectedReading1,callback:function($$v){_vm.$set(_vm.data,"selectedReading1",$$v)},expression:"data.selectedReading1"}})],1)],1),_c("div",{staticClass:"reading-card-container pT20"},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" Add Target Reading ")]),_c("div",{},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select the option"},model:{value:_vm.data.targetmode,callback:function($$v){_vm.$set(_vm.data,"targetmode",$$v)},expression:"data.targetmode"}},[_c("el-option",{attrs:{label:"Set constant",value:"constant"}}),_c("el-option",{attrs:{label:"Reading",value:"reading"}})],1)],1),_c("el-col",{attrs:{span:12}},["reading"===_vm.data.targetmode?_c("el-popover",{attrs:{placement:"right",width:"300","popper-class":"select-card-reading  fc-popover-p0"},model:{value:_vm.addreadingVisible2,callback:function($$v){_vm.addreadingVisible2=$$v},expression:"addreadingVisible2"}},[_c("f-add-data-point",{ref:"addDataPointForm1",attrs:{showLastValue:!0,source:"dashboardedit",newReading:!0},on:{save:_vm.getTragetDatapoint,cancel:_vm.cancelDataPoint}}),_c("el-input",{staticClass:"width100 addReading-title fc-input-full-border2",attrs:{slot:"reference",autofocus:!0,placeholder:"Click to add target reading",disabled:!0},slot:"reference",model:{value:_vm.data.selectedReading2,callback:function($$v){_vm.$set(_vm.data,"selectedReading2",$$v)},expression:"data.selectedReading2"}})],1):_vm._e(),"constant"===_vm.data.targetmode?_c("el-input",{staticClass:"addReading-title fc-input-full-border2 width100",attrs:{autofocus:!0,placeholder:"Enter only traget value"},model:{value:_vm.data.targetConstant,callback:function($$v){_vm.$set(_vm.data,"targetConstant",$$v)},expression:"data.targetConstant"}}):_vm._e()],1)],1)],1)]),_c("el-row",{staticClass:"pT20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" Period ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select a period"},model:{value:_vm.data.operatorId,callback:function($$v){_vm.$set(_vm.data,"operatorId",$$v)},expression:"data.operatorId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"reading-card-header fc-input-label-txt"},[_vm._v(" Aggregation ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select a aggregation"},model:{value:_vm.data.aggregation,callback:function($$v){_vm.$set(_vm.data,"aggregation",$$v)},expression:"data.aggregation"}},_vm._l(_vm.aggregateFunctions,(function(agg,index){return _c("el-option",{key:index,attrs:{label:agg.label,value:agg.name}})})),1)],1)],1)],1),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"text-center"},[_c("img",{staticStyle:{width:"180px"},attrs:{src:__webpack_require__(611203)}})])])],1)],1):_vm._e(),0!==_vm.data.template?_c("div",{staticClass:"dialog-footer row modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.cancel()}}},[_vm._v("Cancel")]),_vm.data.edit?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.update()}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Confirm")])],1):_vm._e()])},TargetMeterDialogvue_type_template_id_3d0f2ac5_staticRenderFns=[],FAddDataPointNewvue_type_template_id_b44e79f2_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-left"},["reading"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Type")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.type,callback:function($$v){_vm.$set(_vm.compareObject,"type",$$v)},expression:"compareObject.type"}},[_c("el-option",{attrs:{label:"Space",value:"space"}}),_c("el-option",{attrs:{label:"Asset",value:"asset"}})],1)],1),"space"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Space")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectSpace},model:{value:_vm.compareObject.spaceId,callback:function($$v){_vm.$set(_vm.compareObject,"spaceId",$$v)},expression:"compareObject.spaceId"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:parseInt(space.id)}})})),1)],1):_vm._e(),"asset"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Asset")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1):_vm._e(),_vm.newReading?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.setReading},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.field.displayName,value:field.field.id}})})),1)],1):_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5b hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:func.value}}):_vm._e()})),1)],1)]):_vm._e(),"meter"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.$store.getters.getBuildingsPickList(),(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Meter")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.subMeters,(function(meter,index){return _c("el-option",{key:index,attrs:{label:meter.name,value:meter.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5 hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:parseInt(func.value)}}):_vm._e()})),1)],1)]):_vm._e(),"enpi"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.buildingList,(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("EnPI")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.readingFields,value:field.id}})})),1)],1)]):_vm._e(),_c("div",{staticClass:"row mT30"},[_c("div",{staticClass:"modal-btn-cancel col-6 fc-el-btn",on:{click:_vm.cancel}},[_vm._v("cancel")]),_c("div",{staticClass:"modal-btn-save fc-el-btn col-6",on:{click:_vm.save}},[_vm._v("Ok")])])])},FAddDataPointNewvue_type_template_id_b44e79f2_staticRenderFns=[],FAddDataPointNewvue_type_script_lang_js={props:["type","aggregate","reading","showLastValue","source","newReading","editdata"],data:function(){return{compareObject:{type:"space",buildingId:"",spaceId:"",assetId:"",readingFieldId:"",aggregateFunc:3,hasBaseline:!1,baseLineId:""},baselineList:[],assetList:[],spaceList:[],subMeters:[],readingFields:[],aggregateFunctions:[{label:"Actual",value:0,name:"actual"},{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getBuildingsPickList"])),{},{buildingList:function(){return this.getBuildingsPickList()},dataPointType:function(){return this.type?this.type:"reading"},"compareObject.assetId":function(){return parseInt(this.compareObject.assetId)}}),created:function(){var _this=this;this.$store.dispatch("loadEnergyMeters"),this.$store.dispatch("loadBuildings").then((function(){_this.init()}))},mounted:function(){},methods:{init:function(){this.loadAssets(),this.loadSpaces(),this.loadBaselines()},reset:function(){this.compareObject=null,this.compareObject={type:"space",spaceId:"",assetId:"",readingFieldId:"",aggregateFunc:0,hasBaseline:!1,baseLineId:""}},open:function(options){this.reset(),options&&(this.compareObject=Object.assign(this.compareObject,this.compareObject,options),this.compareObject.type=this.compareObject.parentType,this.compareObject.buildingId?(this.compareObject.assetId=parseInt(this.compareObject.parentId),this.loadSubMeters()):"space"===this.compareObject.parentType?this.compareObject.parentId&&(this.compareObject.spaceId=parseInt(this.compareObject.parentId)):this.compareObject.parentId&&(this.compareObject.assetId=parseInt(this.compareObject.parentId)),this.compareObject.readingFieldId&&this.loadReadingFields()),0===this.aggregate?this.compareObject.aggregateFunc=this.aggregate:this.compareObject.yAggr?this.compareObject.aggregateFunc=this.compareObject.yAggr:this.compareObject.aggregateFunc=3},save:function(){var _this2=this,reportName="";this.compareObject.spaceId&&(this.compareObject.space=this.spaceList.find((function(a){return a.id===_this2.compareObject.spaceId})),reportName=this.compareObject.space.name),this.compareObject.assetId&&(this.compareObject.asset=this.assetList.find((function(a){return a.id===_this2.compareObject.assetId})),reportName=this.compareObject.asset.name),this.compareObject.readingFieldId&&(this.newReading?(this.compareObject.readingField=this.readingFields.find((function(a){return a.field.id===_this2.compareObject.readingFieldId})).field,this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")")):(this.compareObject.readingField=this.readingFields.find((function(a){return a.id===_this2.compareObject.readingFieldId})),this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")"))),this.compareObject.name=reportName,this.compareObject.aggregateFunctions=this.aggregateFunctions,this.$emit("save",this.compareObject)},cancel:function(){this.$emit("cancel")},selectSpace:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},selectAsset:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},loadAssets:function(){var _this3=this;this.loading=!0;var self=this;this.$util.loadAsset({withReadings:!0}).then((function(response){response.assets&&(_this3.assetList=response.assets,self.editdata&&self.editdata.editmode&&(self.$store.getters.getBuildingsPickList()[self.editdata.parentId]?(self.compareObject.type="space",self.compareObject.spaceId=self.editdata.parentId):_this3.assetList.find((function(rt){return rt.id===self.editdata.parentId}))&&(self.compareObject.type="asset",self.compareObject.assetId=self.editdata.parentId,self.compareObject.readingFieldId=self.editdata.reading?self.editdata.reading.readingFieldId:self.editdata.readingFieldId)),_this3.compareObject.assetId&&_this3.loadReadingFields(),_this3.loading=!1)}))},getAsset:function(id){return this.assetList.find((function(obj){return obj.id===id}))},loadSpaces:function(){var self=this,url="/basespace";this.$http.get(url).then((function(response){response.data&&(self.spaceList=response.data.basespaces,self.compareObject.spaceId&&self.loadReadingFields())}))},getSpace:function(id){return this.spaceList.find((function(obj){return obj.id===id}))},loadBaselines:function(){var self=this;self.$http.get("/baseline/all").then((function(response){200===response.status&&(self.baselineList=response.data?response.data:[])}))},setReading:function(){},loadReadingFields:function(){var _this4=this,self=this;this.newReading?"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadLatestReading(this.compareObject.assetId).then((function(readingFields){self.readingFields=readingFields;var defaultReadingName=self.reading?self.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).field:[];energyDelta.readingType=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).readingType:-1,energyDelta?((0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=energyDelta.id),self.compareObject.fullList=self.$helpers.cloneObject(readingFields),self.editdata&&self.editdata.editmode&&self.save()):(0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"space"===self.compareObject.type&&self.compareObject.spaceId&&self.$util.loadLatestReading(self.compareObject.spaceId).then((function(readingFields){self.readingFields="enpi"!==self.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.field.dataTypeEnum})),self.editdata&&self.editdata.editmode&&self.save(),!self.compareObject.readingFieldId&&self.readingFields.length&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadAssetReadingFields(this.compareObject.assetId).then((function(readingFields){if(_this4.readingFields=readingFields,!_this4.compareObject.readingFieldId){var defaultReadingName=_this4.reading?_this4.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=_this4.readingFields.find((function(r){return r.columnName===defaultReadingName}));_this4.compareObject.readingFieldId=energyDelta?energyDelta.id:_this4.readingFields[0].id}})):"space"===this.compareObject.type&&this.compareObject.spaceId&&this.$util.loadSpaceReadingFields(this.compareObject.spaceId).then((function(readingFields){_this4.readingFields="enpi"!==_this4.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.typeEnum._name})),!_this4.compareObject.readingFieldId&&_this4.readingFields.length&&(_this4.compareObject.readingFieldId=_this4.readingFields[0].id)}))},selectBuilding:function(){"meter"===this.type?(this.compareObject.type="asset",this.loadSubMeters()):"enpi"===this.type&&(this.compareObject.type="space",this.compareObject.spaceId=parseInt(this.compareObject.buildingId),this.loadReadingFields())},loadSubMeters:function(){var self=this,url="/dashboard/getSubMeters?buildingId="+this.compareObject.buildingId;self.$http.get(url).then((function(response){var energyAssets=response.data.energyMeters,subMeterList=[];if(energyAssets&&self.assetList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(energyAssets);try{var _loop=function(){var ea=_step.value,asset=self.assetList.find((function(aa){return aa.id===ea.id}));asset&&subMeterList.push(ea)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}else subMeterList=energyAssets;self.subMeters=subMeterList,self.compareObject.assetId&&self.loadReadingFields()}))}}},components_FAddDataPointNewvue_type_script_lang_js=FAddDataPointNewvue_type_script_lang_js,FAddDataPointNew_component=(0,componentNormalizer/* default */.Z)(components_FAddDataPointNewvue_type_script_lang_js,FAddDataPointNewvue_type_template_id_b44e79f2_render,FAddDataPointNewvue_type_template_id_b44e79f2_staticRenderFns,!1,null,null,null)
/* harmony default export */,FAddDataPointNew=FAddDataPointNew_component.exports,TargetMeterDialogvue_type_script_lang_js={props:["visibility","cardData","buildings","type"],mixins:[DateHelper/* default */.Z],data:function(){return{data:{key:"",title:"",parentType:"asset",template:1,parentId1:null,fieldName1:null,fieldObj1:null,fieldObj2:null,parentId2:null,fieldName2:null,selectedReading1:null,selectedReading2:null,targetConstant:1,targetmode:"constant",edit:!1,operatorId:28,aggregation:"sum",dateFilter:null,building:{},expressions:[]},addreadingVisible:!1,addreadingVisible2:!1,readingingfields:{},assets:[],buildingVsAssets:{},readings:[],keyToName:{profilemini:"Building Energy",energycostmini:"Building Energy Cost",carbonmini:"Carbon Emission"},aggregateFunctions:[{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}]}},components:{FAddDataPoint:FAddDataPointNew},created:function(){this.$store.dispatch("loadBuildings")},mounted:function(){this.visibility&&(this.cardData&&(this.data=this.cardData),this.loadDefaults(),this.loadReadingFields())},methods:{loadDefaults:function(){this.data.key=this.type||""},back:function(){this.$router.go(-1)},cancel:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(){this.setValues(),this.$emit("save",this.data),this.cancel()},update:function(){this.setValues(),this.$emit("update",this.data)},getworkFlowString:function(){var string="";return string=this.data&&"constant"===this.data.targetmode?'Map test(){  date = new NameSpace("date");  period = date.getDateRange("'+this.data.dateFilter.queryStr+'"); db = {   criteria : [parentId == '+this.data.parentId1+' &&  ttime == period],   field : "'+this.data.fieldName1+'",   aggregation : "'+this.data.aggregation+'" };   baseValue = Module("'+(this.data.fieldObj1&&this.data.fieldObj1.module&&this.data.fieldObj1.module.name?this.data.fieldObj1.module.name:"energydata")+'").fetch(db); data = {}; data["baseValue"] = baseValue;data["targetValue"] = '+this.data.targetConstant+';fieldObj = new NameSpace("module").getField("'+this.data.fieldName1+'","'+(this.data.fieldObj1&&this.data.fieldObj1.module&&this.data.fieldObj1.module.name?this.data.fieldObj1.module.name:"energydata")+'");  data["fieldObj"] = null;\tif (fieldObj != null) {   data["fieldObj"] = fieldObj;}return data;}':'Map test(){  date = new NameSpace("date");  period = date.getDateRange("'+this.data.dateFilter.queryStr+'"); db = {   criteria : [parentId == '+this.data.parentId1+' &&  ttime == period],   field : "'+this.data.fieldName1+'",   aggregation : "'+this.data.aggregation+'" };   db1 = {   criteria : [parentId == '+this.data.parentId2+' &&  ttime == period],   field : "'+this.data.fieldName2+'",   aggregation : "'+this.data.aggregation+'" }   baseValue =  Module("'+(this.data.fieldObj1&&this.data.fieldObj1.module&&this.data.fieldObj1.module.name?this.data.fieldObj1.module.name:"energydata")+'"); targetValue =  Module("'+(this.data.fieldObj2&&this.data.fieldObj2.module&&this.data.fieldObj2.module.name?this.data.fieldObj2.module.name:"energydata")+'").fetch(db1); data = {}; data["baseValue"] = baseValue;data["targetValue"] = targetValue;fieldObj = new NameSpace("module").getField("'+this.data.fieldName1+'","'+(this.data.fieldObj1&&this.data.fieldObj1.module&&this.data.fieldObj1.module.name?this.data.fieldObj1.module.name:"energydata")+'");  data["fieldObj"] = null;\tif (fieldObj != null) {   data["fieldObj"] = fieldObj;}return data;}',string},setValues:function(){var _this=this;this.data.building=this.buildings.find((function(rt){return rt.id===_this.data.selectedBuilding})),this.data.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(this.data.operatorId),this.data.dateFilter["queryStr"]=this.getdateOperators().find((function(rt){return rt.value===_this.data.operatorId})).queryStr,this.data.workflowV2String=this.getworkFlowString()},cancelDataPoint:function(data){this.addreadingVisible=!1},getBaseDatapoint:function(data){data&&("asset"===data.type?(this.data.parentId1=data.assetId,this.data.fieldName1=data.readingField.name,this.data.fieldObj1=data.readingField,this.data.selectedReading1=data.name):(this.data.parentId1=data.spaceId,this.data.fieldName1=data.readingField.name,this.data.fieldObj1=data.readingField,this.data.selectedReading1=data.name)),this.addreadingVisible=!1},getTragetDatapoint:function(data){data&&("asset"===data.type?(this.data.parentId2=data.assetId,this.data.fieldName2=data.readingField.name,this.data.fieldObj2=data.readingField,this.data.selectedReading2=data.name):(this.data.parentId2=data.spaceId,this.data.fieldName2=data.readingField.name,this.data.fieldObj2=data.readingField,this.data.selectedReading2=data.name)),this.addreadingVisible2=!1},loadAssetFields:function(){var _this2=this,assetId=this.data.parentId;this.$util.loadAssetReadingFields(assetId).then((function(response){_this2.readings=response}))},loadReadingFields:function(){var self=this;self.$http.get("/asset/getreadings").then((function(response){response&&(self.readingingfields=response.data)}))}}},components_TargetMeterDialogvue_type_script_lang_js=TargetMeterDialogvue_type_script_lang_js,TargetMeterDialog_component=(0,componentNormalizer/* default */.Z)(components_TargetMeterDialogvue_type_script_lang_js,TargetMeterDialogvue_type_template_id_3d0f2ac5_render,TargetMeterDialogvue_type_template_id_3d0f2ac5_staticRenderFns,!1,null,null,null)
/* harmony default export */,TargetMeterDialog=TargetMeterDialog_component.exports,DashboardTopTab=__webpack_require__(585081),DashboardTabDialogEditorvue_type_template_id_db362a6a_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-tab-dialog-editor"},[_c("el-dialog",{staticClass:"db-user-filter-manager-dialog",attrs:{visible:_vm.visibility,"show-close":!1,"append-to-body":!0,title:_vm.$t("home.dashboard.tab_manager"),width:"40%","before-close":_vm.closeDialog}},[_c("div",[_c("div",{staticClass:"p20 tab-section"},[_c("draggable",_vm._b({staticClass:"tab-container",on:{change:_vm.updateOrder},model:{value:_vm.dashboardTabList,callback:function($$v){_vm.dashboardTabList=$$v},expression:"dashboardTabList"}},"draggable",_vm.dashboardParentTabDragOptions,!1),_vm._l(_vm.dashboardTabList,(function(parentTab,pIndex){return _c("div",{key:pIndex,staticClass:"mB10 mT15 box-border"},[_c("div",{staticClass:"tab-drag-row pL15",on:{click:function($event){return _vm.toggleExpand(parentTab)}}},[_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_vm.editTabId&&_vm.editTabId===parentTab.id?_c("div",[_c("el-input",{attrs:{placeholder:"Tab name"},on:{blur:function($event){_vm.editTabId=null}},model:{value:parentTab.name,callback:function($$v){_vm.$set(parentTab,"name",$$v)},expression:"parentTab.name"}})],1):_c("div",{staticClass:"mT-auto mB-auto"},[_vm._v(" "+_vm._s(parentTab.name)+" ")]),_c("div",{staticClass:"mL-auto mT-auto mB-auto inline-flex"},[_c("div",{staticClass:"mR10 inline"},[_c("i",{staticClass:"el-icon-edit pointer trash-icon hoverIcon",on:{click:function($event){_vm.editTabId=parentTab.id}}})]),_c("div",{staticClass:"mR10 inline"},[_c("el-popover",{ref:"dynamic"+pIndex,refInFor:!0,attrs:{placement:"bottom",width:"280",trigger:"click","after-enter":_vm.nameChange,"popper-class":"inventory-list-popover-1"}},[_c("div",[_c("el-row",{staticClass:"add-dashboard-popper p20"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Subtab Name :"))]),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.newDashboardTabName,callback:function($$v){_vm.newDashboardTabName=$$v},expression:"newDashboardTabName"}})],1)],1),_c("el-row",[_c("el-button",{staticClass:"modal-btn-save width100",attrs:{loading:_vm.loading.newTab},on:{click:function($event){return _vm.addNewTab(parentTab,pIndex)}}},[_vm._v(_vm._s(_vm.$t("panel.share.ad")))])],1)],1)]),_c("i",{directives:[{name:"popover",rawName:"v-popover",value:"dynamic"+pIndex,expression:"`dynamic${pIndex}`"},{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                      placement: 'top',\n                      animation: 'shift-away',\n                      arrow: true,\n                    }"}],staticClass:"el-icon-plus pL10 hoverIcon",attrs:{title:"Add Sub Tab"}})],1),_c("div",{staticClass:"mR10 inline"},[_c("i",{staticClass:"el-icon-delete pointer trash-icon hoverIcon",on:{click:function($event){return _vm.deleteTab(parentTab,!0)}}})]),parentTab.expand&&parentTab.childTabs&&parentTab.childTabs.length>0?_c("i",{staticClass:"el-icon-arrow-down"}):parentTab.childTabs&&parentTab.childTabs.length>0?_c("i",{staticClass:"el-icon-arrow-right"}):_c("i",{staticClass:"el-icon-arrow-right opacity-0"})])]),parentTab.childTabs&&parentTab.expand?_c("div",[_c("draggable",_vm._b({staticClass:"drag-folder pointer",on:{change:_vm.onDashBoardChildTabChange},model:{value:parentTab.childTabs,callback:function($$v){_vm.$set(parentTab,"childTabs",$$v)},expression:"parentTab.childTabs"}},"draggable",_vm.dashboardChildTabDragOptions,!1),_vm._l(parentTab.childTabs,(function(childTab,chIndex){return _c("div",{key:chIndex,staticClass:"pL15 pL25 tab-drag-row-child"},[_c("div",{staticClass:"task-handle mR10 pointer "},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_vm.editTabId&&_vm.editTabId===childTab.id?_c("div",[_c("el-input",{attrs:{placeholder:"Tab name"},on:{blur:function($event){_vm.editTabId=null}},model:{value:childTab.name,callback:function($$v){_vm.$set(childTab,"name",$$v)},expression:"childTab.name"}})],1):_c("div",{staticClass:"mT-auto mB-auto"},[_vm._v(" "+_vm._s(childTab.name)+" ")]),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_c("div",{staticClass:"mR10 inline-flex"},[_c("i",{staticClass:"el-icon-edit pointer trash-icon hoverIcon mR10",on:{click:function($event){_vm.editTabId=childTab.id}}}),_c("i",{staticClass:"el-icon-delete pointer trash-icon hoverIcon",on:{click:function($event){return _vm.deleteTab(childTab,!1,parentTab)}}})])])])})),0)],1):_vm._e()])})),0),_c("el-popover",{attrs:{placement:"bottom",width:"280",trigger:"click","after-enter":_vm.nameChange,"popper-class":"inventory-list-popover-1"},model:{value:_vm.showdialog,callback:function($$v){_vm.showdialog=$$v},expression:"showdialog"}},[_c("div",{staticClass:"f12 add-text",attrs:{slot:"reference"},slot:"reference"},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Add Tab ")]),_c("div",[_c("el-row",{staticClass:"add-dashboard-popper p20"},[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm._v(_vm._s("Tab Name :"))]),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.newDashboardTabName,callback:function($$v){_vm.newDashboardTabName=$$v},expression:"newDashboardTabName"}})],1)],1),_c("el-row",[_c("el-button",{staticClass:"modal-btn-save width100",attrs:{loading:_vm.loading.newTab},on:{click:function($event){return _vm.addNewTab(!1)}}},[_vm._v(_vm._s(_vm.$t("panel.share.ad")))])],1)],1)])],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.updateTabList()}}},[_vm._v("Save")])],1)])])],1)},DashboardTabDialogEditorvue_type_template_id_db362a6a_staticRenderFns=[],vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),DashboardTabDialogEditorvue_type_script_lang_js={props:["dashboardObject","visibility"],components:{draggable:vuedraggable_umd_default()},data:function(){return{showdialog:!1,showdialog1:!1,editTabId:null,loading:{newTab:!1,initial:!1},saving:!1,dashboardTabList:[],dragOptions:{draggable:this.moveIt?".asd":"",handle:".icon-caret-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},newDashboardTabName:null,moveIt:!0}},mounted:function(){this.constructDashboardTab()},computed:{dashboardChildTabDragOptions:function(){return{group:"dashboardChildTab"}},dashboardParentTabDragOptions:function(){return{group:"dashboardParentTab"}}},methods:{addTabDialog:function(){this.showdialog=!0},closeDialog:function(){this.$emit("update:visibility",!1)},constructDashboardTab:function(){if(this.dashboardObject&&this.dashboardObject.tabEnabled&&this.dashboardObject.tabs){var _step,order=0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.dashboardObject.tabs);try{for(_iterator.s();!(_step=_iterator.n()).done;){var tab=_step.value;this.$set(tab,"expand",!1),this.$set(tab,"edit",!1),this.$set(tab,"sequence",++order)}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.dashboardTabList=this.dashboardObject.tabs}else this.dashboardTabList=[]},addNewTab:function(parentTab,index){var _this=this;this.showdialog=!1,this.showdialog1=!1,index&&(this.$refs["dynamic".concat(index)][0].showPopper=!1);var param={dashboardTabContext:{name:this.newDashboardTabName,sequence:this.dashboardTabList?this.dashboardTabList.length+1:1,dashboardId:this.dashboardObject.id}};parentTab&&parentTab.id>0&&(param.dashboardTabContext["dashboardTabId"]=parentTab.id,param.dashboardTabContext["sequence"]=parentTab.childTabs?parentTab.childTabs.length+1:1),this.loading.newTab=!0,this.$http.post("dashboard/addDashboardTab",param).then((function(response){if(response.data){_this.$message.success("Dashboard Tab Added Successfully");var tabContext=response.data.dashboardTabContext;parentTab?parentTab.childTabs?parentTab.childTabs.push(tabContext):(_this.$set(parentTab,"childTabs",[tabContext]),parentTab.expand=!0):(_this.$set(tabContext,"expand",!1),_this.$set(tabContext,"edit",!1),_this.dashboardTabList.push(tabContext))}else _this.$message.error("Error Occured");_this.newDashboardTabName=null,_this.loading.newTab=!1})).catch((function(error){_this.$message.error("Error Occured"),_this.newDashboardTabName=null,_this.loading.newTab=!1}))},editTabName:function(){this.$message("Edit Tab name")},updateOrder:function(){var order=0;this.dashboardTabList.forEach((function(element){element["sequence"]=++order}))},updateTabList:function(){var _this2=this,tabsContext=this.dashboardTabList;this.closeDialog();var tempContextList=[];if(tabsContext&&tabsContext.length>0){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(tabsContext);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var tab=_step2.value,tempContext={};tempContext["dashboardId"]=tab.dashboardId,tempContext["id"]=tab.id,tempContext["name"]=tab.name,tempContext["sequence"]=tab.sequence,tempContext["dashboardTabId"]=tab.dashboardTabId,tempContextList.push(tempContext)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}this.$http.post("dashboard/updateDashboardTabsList",{dashboardTabContexts:tempContextList}).then((function(response){response.data?_this2.$message.success("Updated Successfully"):_this2.$message.error("Error Occured")})).catch((function(error){_this2.$message.error("Error Occured")}))},deleteTab:function(tabContext,isParent,parentTab){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var param,confirmObj,deleteTabConfirmation;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(isParent&&tabContext.childTabs&&tabContext.childTabs.length>0)){_context.next=4;break}_this3.$message.error("Delete All Child Tabs Before Deleting Parent Tab"),_context.next=10;break;case 4:return param={dashboardTabId:tabContext.id},confirmObj={title:"Delete Tab",message:"Are you sure you want to delete this ?",rbLabel:"Yes, delete",lbLabel:"No, cancel"},_context.next=8,_this3.$dialog.confirm(confirmObj);case 8:deleteTabConfirmation=_context.sent,deleteTabConfirmation&&_this3.$http.post("dashboard/deleteDashboardTab",param).then((function(response){var index;response.data?(_this3.$message.success("Dashboard Tab Deleted Successfully"),isParent?(index=_this3.dashboardTabList.indexOf(tabContext),_this3.dashboardTabList.splice(index,1)):(index=parentTab.childTabs.indexOf(tabContext),parentTab.childTabs.splice(index,1))):_this3.$message.error("Error Occured");_this3.$router.replace("/")})).catch((function(error){_this3.$message.error("Error Occured")}));case 10:case"end":return _context.stop()}}),_callee)})))()},toggleExpand:function(val){val.expand=!val.expand},nameChange:function(){this.newDashboardTabName=null},onDashBoardChildTabChange:function(data){var _this4=this,dashboardTabList=this.dashboardTabList;if(data["moved"]&&data["moved"].element)for(var _loop=function(){var list=dashboardTabList[i];if(list.childTabs&&list.childTabs.find((function(rl){return rl.id===data["moved"].element.id}))){var listdata=[],j=0;list.childTabs.forEach((function(tab){listdata.push({id:tab.id,sequence:j,dashboardTabId:list.id}),j++})),_this4.dashboardTabList=listdata}},i=0;i<dashboardTabList.length;i++)_loop();else if(data["added"]&&data["added"].element)for(var _loop2=function(){var list=dashboardTabList[_i];if(list.childTabs&&list.childTabs.find((function(rl){return rl.id===data["added"].element.id}))){var listdata=[],j=0;list.childTabs.forEach((function(tab){listdata.push({id:tab.id,displayOrder:j,dashboardTabId:list.id}),j++})),_this4.dashboardTabList=listdata}},_i=0;_i<dashboardTabList.length;_i++)_loop2()}}},dashboard_DashboardTabDialogEditorvue_type_script_lang_js=DashboardTabDialogEditorvue_type_script_lang_js,DashboardTabDialogEditor_component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardTabDialogEditorvue_type_script_lang_js,DashboardTabDialogEditorvue_type_template_id_db362a6a_render,DashboardTabDialogEditorvue_type_template_id_db362a6a_staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardTabDialogEditor=DashboardTabDialogEditor_component.exports,KPITargetMeterDialogvue_type_template_id_3050934f_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"wo-kfi-target f-kfi-card-builder fc-dialog-center-container","append-to-body":!0,visible:_vm.visibility,width:"50%",title:"KPI CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[_c("span",{staticClass:"kpi-card-header"},[_vm._v("TARGET METER")]),_c("el-select",{staticClass:"fc-input-full-border-select2  p0 pL10",attrs:{filterable:""},on:{change:function($event){return _vm.setModuleName(_vm.data.moduleName)}},model:{value:_vm.data.moduleName,callback:function($$v){_vm.$set(_vm.data,"moduleName",$$v)},expression:"data.moduleName"}},_vm._l(_vm.getLicenseEnabledModules,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.moduleName,label:m.label}})})),1)],1),_c("div",{staticStyle:{height:"500px"}},[_vm.loading?_c("div",[_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm._e()],1):_vm._l(_vm.data.expressions,(function(expression,index){return[_c("el-form",{key:index,ref:"FCUCARD",refInFor:!0,attrs:{model:expression,"label-position":"top"}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("el-col",{attrs:{span:19}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Name")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{autofocus:!0,placeholder:"Name"},model:{value:expression.actualName,callback:function($$v){_vm.$set(expression,"actualName",$$v)},expression:"expression.actualName"}})],1)],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("el-col",{attrs:{span:19}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Target Metric")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{placeholder:"Please select a building"},model:{value:expression.aggregateString,callback:function($$v){_vm.$set(expression,"aggregateString",$$v)},expression:"expression.aggregateString"}},_vm._l(_vm.data.metrics,(function(metric,index){return _c("el-option",{key:index,attrs:{label:metric.displayName,value:metric.name}})})),1)],1),"count"!==expression.aggregateString?_c("el-col",{attrs:{span:2,offset:1}},[_c("div",{staticClass:"fc-input-div-full-border-f14-1 pointer mT25"},[_c("el-popover",{attrs:{disabled:!_vm.showMetricAggregation(_vm.metric),placement:"bottom",width:"70",trigger:"click","popper-class":"metric-popover"},model:{value:_vm.toggleMetricAggregation,callback:function($$v){_vm.toggleMetricAggregation=$$v},expression:"toggleMetricAggregation"}},[_vm._l(_vm.metricAggregation,(function(metricAggr,metricAggrIdx){return _c("div",{key:metricAggrIdx,staticClass:"pointer pT5 pB5 fc-label-hover label-txt-black f14 text-center",attrs:{value:metricAggr.value},on:{click:function($event){return _vm.setMetricAggregation(metricAggr,expression.aggregate,index)}}},[_vm._v(" "+_vm._s(metricAggr.label)+" ")])})),_c("img",{staticClass:"p15",attrs:{slot:"reference",disabled:!_vm.showMetricAggregation(_vm.metric),src:__webpack_require__(667527)},slot:"reference"})],2)],1)]):_vm._e()],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("div",{staticClass:"height100"},[_c("new-criteria-builder",{staticClass:"report-criteria-buuilder",attrs:{exrule:_vm.data.expressions[0].criteria,showSiteField:!0,module:_vm.data.moduleName,title:_vm.$t("setup.users_management.specify_rules_for_assigment_rules")},on:{condition:_vm.getCriteria}})],1)]),_c("el-form-item",{attrs:{prop:"category"}},[_c("el-col",{attrs:{span:19}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Target Constant")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{autofocus:!0,placeholder:"Target Constant"},model:{value:_vm.data.targetConstant,callback:function($$v){_vm.$set(_vm.data,"targetConstant",$$v)},expression:"data.targetConstant"}})],1)],1),_c("el-form-item",{staticClass:"pB60",attrs:{prop:"category"}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Date Fields")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"80%"},attrs:{placeholder:"Please select a building"},model:{value:_vm.data.selectedTimeField,callback:function($$v){_vm.$set(_vm.data,"selectedTimeField",$$v)},expression:"data.selectedTimeField"}},_vm._l(_vm.data.timeFields,(function(time,index){return _c("el-option",{key:index,attrs:{label:time.displayName,value:time.columnName}})})),1)],1),_vm.data.selectedTimeField?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Period")]),_c("el-select",{staticClass:"el-input-textbox-full-border",staticStyle:{width:"80%"},attrs:{placeholder:"Please select a building"},model:{value:_vm.data.operatorId,callback:function($$v){_vm.$set(_vm.data,"operatorId",$$v)},expression:"data.operatorId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1):_vm._e()],1)],1)]}))],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Close")]),_vm.cardData?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save("update")}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)])},KPITargetMeterDialogvue_type_template_id_3050934f_staticRenderFns=[],KPITargetMeterDialogvue_type_script_lang_js={props:["visibility","cardData"],mixins:[DateHelper/* default */.Z],data:function(){return{modules:[{label:"Maintenance",moduleName:"workorder",license:"MAINTENANCE"},{label:"Fault detection and diagnostics",moduleName:"alarm",license:"ALARMS"},{label:"Asset",moduleName:"asset",license:"SPACE_ASSET"},{label:"Inventory Request",moduleName:"inventoryrequest",list:[],expand:!1,license:"INVENTORY"},{label:"Item",moduleName:"item",list:[],expand:!1,license:"INVENTORY"},{label:"Contracts",moduleName:"contracts",list:[],expand:!1,license:"CONTRACT"},{label:"Purchaseorder",moduleName:"purchaseorder",list:[],expand:!1,license:"PURCHASE"},{label:"Purchaserequest",moduleName:"purchaserequest",list:[],expand:!1,license:"PURCHASE"}],metricAggregation:[{label:"AVG",value:"avg"},{label:"SUM",value:"sum"},{label:"MIN",value:"min"},{label:"MAX",value:"max"}],loading:!1,toggleMetricAggregation:!1,data:{name:"",moduleName:"workorder",targetConstant:null,metrics:[],timeFields:[],selectedTimeField:null,operatorId:22,metricAgg:null,expressions:[{name:null,actualName:null,fieldName:"id",aggregateString:"count",aggregate:null,moduleName:"workorder",criteria:{pattern:"(1)",conditions:{1:{fieldName:"__vue_devtool_undefined__",value:"__vue_devtool_undefined__",columnName:"__vue_devtool_undefined__",operatorId:"__vue_devtool_undefined__"}},resourceOperator:!1}}]},showCriteriaBuilder:!1,selectedIndex:0}},components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z},mounted:function(){this.loadData()},computed:{getLicenseEnabledModules:function(){var _this=this;return this.modules.filter((function(module){return!0===_this.$helpers.isLicenseEnabled(module.license)}))},metric:function(){var _this2=this;return this.data&&this.data.aggregateString?this.data.metrics.find((function(rt){return rt.name===_this2.data.aggregateString})):this.data.metrics.length?this.data.metrics[0]:null}},methods:{deforamtData:function(data){if(data&&data.selectedTimeField&&Object.keys(data.expressions[0].criteria.conditions)&&Object.keys(data.expressions[0].criteria.conditions).length>1){if(Object.keys(data.expressions[0].criteria.conditions).length){var serachValue=" and "+Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-2]+" and "+Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-1]+")",newPattern=data.expressions[0].criteria.pattern.replace(serachValue,")");data.expressions[0].criteria.pattern=newPattern,Object.keys(data.expressions[0].criteria.conditions).forEach((function(key){var lastValue=Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-1],lastBeforeValue=Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-2];key!==lastValue&&key!==lastBeforeValue||delete data.expressions[0].criteria.conditions[key]}))}return data}return data},loadData:function(){this.cardData&&(this.data=this.deforamtData(this.cardData),this.data.hasOwnProperty("moduleName")||(this.data.moduleName="workorder")),this.loadFields()},closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},setMertic:function(){},setModuleName:function(modulename){this.loadDefaultData(modulename),this.data.expressions[0].moduleName=modulename,this.loadFields()},loadDefaultData:function(modulename){this.data={name:"",targetConstant:null,moduleName:modulename||"workorder",metrics:[],timeFields:[],selectedTimeField:null,operatorId:null,metricAgg:null,expressions:[{name:null,actualName:null,fieldName:"id",aggregateString:"count",aggregate:null,moduleName:"workorder",criteria:{pattern:"(1)",conditions:{1:{fieldName:"__vue_devtool_undefined__",value:"__vue_devtool_undefined__",columnName:"__vue_devtool_undefined__",operatorId:"__vue_devtool_undefined__"}},resourceOperator:!1}}]}},showMetricAggregation:function(metric){return!metric||!metric.defaultMetric||(this.toggleMetricAggregation=!1,!1)},validateData:function(){if(this.data&&this.data.expressions.length){if(null===this.data.expressions[0].actualName)return!1;if(this.data.expressions[0].criteria&&this.data.expressions[0].criteria.conditions){var conditions=this.data.expressions[0].criteria.conditions,criteriaObjValues=Object.values(conditions),hasError=criteriaObjValues.every((function(field){if(!(0,validation/* isEmpty */.xb)(field)){var _field$active=field.active,active=void 0!==_field$active&&_field$active,fieldName=field.fieldName,operatorId=field.operatorId,value=field.value;if(!(0,validation/* isEmpty */.xb)(fieldName)&&!(0,validation/* isEmpty */.xb)(operatorId)){if(!active)return!0;if(!(0,validation/* isEmpty */.xb)(value))return!0}}return!1}));return hasError}return!1}return!1},setMetricAggregation:function(agg,data,index){this.data.expressions[index].fieldName=agg.value,this.toggleMetricAggregation=!1},save:function(update){this.validateData()?(this.$emit("update:visibility",!1),this.data.selectedTimeField?(this.applyPeriod(),this.applyTimefields()):this.data.operatorId=null,this.convertData(),update?this.$emit("update",this.data):this.$emit("save",this.data)):this.$message.error("Please enter all the details !!")},convertData:function(){var _this3=this;this.data.expressions.forEach((function(expression){if("count"!==expression.aggregateString){var temp=expression.aggregateString;expression.aggregateString=expression.fieldName,expression.fieldName=temp}expression.name=_this3.formatName(expression.actualName)}))},formatName:function(name){return name.toLocaleLowerCase().split(" ").join("")},applyTimefields:function(){if(this.data&&this.data.expressions.length&&this.data.expressions[0].criteria.conditions){var defaultExpresion={fieldName:"createdTime",value:null,columnName:this.data.selectedTimeField,operatorId:this.data.operatorId,isResourceOperator:!1,parseLabel:null,valueArray:[],operatorLabel:"Today",active:!1,operatorsDataType:{dataType:"DATE_TIME",displayType:"DATETIME"},isSpacePicker:!1};this.data.expressions[0].criteria.conditions[Object.keys(this.data.expressions[0].criteria.conditions).length+1]=defaultExpresion,this.data.expressions[0].criteria.pattern=this.data.expressions[0].criteria.pattern.split(")")[0]+" and "+Object.keys(this.data.expressions[0].criteria.conditions).length+")"}},applyPeriod:function(){if(this.data&&this.data.expressions.length&&this.data.expressions[0].criteria.conditions){var defaultExpresion={fieldName:"dueDate",value:null,columnName:"Tickets.DUE_DATE",operatorId:this.data.operatorId,isResourceOperator:!1,parseLabel:null,valueArray:[],operatorLabel:"Today",active:!1,operatorsDataType:{dataType:"DATE_TIME",displayType:"DATETIME"},isSpacePicker:!1};this.data.expressions[0].criteria.conditions[Object.keys(this.data.expressions[0].criteria.conditions).length+1]=defaultExpresion,this.data.expressions[0].criteria.pattern=this.data.expressions[0].criteria.pattern.split(")")[0]+" and "+Object.keys(this.data.expressions[0].criteria.conditions).length+")"}},constractData:function(rawData){var data=this.$helpers.cloneObject(rawData);return data},addCriteriaAndResconstruct:function(){this.showCriteriaBuilder=!1},showcriteriabuilder:function(index){this.selectedIndex=index,this.showCriteriaBuilder=!0},getCriteria:function(criteria){this.data.expressions[this.selectedIndex].criteria=criteria},loadFields:function(){var _this4=this;this.loading=!0,this.$http.post("/v2/report/getReportFields",{moduleName:this.data.moduleName}).then((function(response){_this4.prepareMetrics(response.data.result),_this4.getTimeFields(response.data.result),_this4.loading=!1}))},getTimeFields:function(result){result.meta&&result.meta.dimension&&result.meta.dimension.time&&(this.data.timeFields=result.meta.dimension.time)},prepareMetrics:function(result){if(this.data.metrics=[],result&&result.meta&&result.meta.metrics){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(result.meta.metrics);try{for(_iterator.s();!(_step=_iterator.n()).done;){var metric=_step.value;"actualWorkDuration"===metric.name&&(metric.displayName="Work Duration",this.data.metrics.push(metric)),this.data.metrics.push(metric)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var defaultMetric={};defaultMetric["displayName"]="Number of "+this.data.moduleName+"s",defaultMetric["defaultMetric"]=!0,defaultMetric["fieldId"]=-1,defaultMetric["name"]="count",this.data.metrics.push(defaultMetric)}}}},components_KPITargetMeterDialogvue_type_script_lang_js=KPITargetMeterDialogvue_type_script_lang_js,KPITargetMeterDialog_component=(0,componentNormalizer/* default */.Z)(components_KPITargetMeterDialogvue_type_script_lang_js,KPITargetMeterDialogvue_type_template_id_3050934f_render,KPITargetMeterDialogvue_type_template_id_3050934f_staticRenderFns,!1,null,null,null)
/* harmony default export */,KPITargetMeterDialog=KPITargetMeterDialog_component.exports,GaugeCardSetupvue_type_template_id_01db1a50_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:"Gauge Setup","append-to-body":!0,"custom-class":{"building-dialog":!0,"select-building-dialog":!0,"fc-dialog-center-container":!0,"gauge-setip-dialog":!0},visible:_vm.visibility,width:"30%","before-close":_vm.cancel},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",[_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v("Name")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Name"},model:{value:_vm.data.title,callback:function($$v){_vm.$set(_vm.data,"title",$$v)},expression:"data.title"}})],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT10"},[_vm._v("Asset")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{disabled:!0,type:"text",placeholder:_vm.$t("common._common.to_search_type")},model:{value:_vm.selectedResourceLabel,callback:function($$v){_vm.selectedResourceLabel=$$v},expression:"selectedResourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.pickerVisibility=!0}},slot:"suffix"})])],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v("Reading")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please select a Field",filterable:"","no-data-text":"Loading..."},model:{value:_vm.data.buildings.selectedReading,callback:function($$v){_vm.$set(_vm.data.buildings,"selectedReading",$$v)},expression:"data.buildings.selectedReading"}},_vm._l(_vm.readings,(function(reading,index){return _c("el-option",{key:index,attrs:{label:reading.displayName,value:reading.name}})})),1)],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v("Period")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please select a period"},model:{value:_vm.data.operatorId,callback:function($$v){_vm.$set(_vm.data,"operatorId",$$v)},expression:"data.operatorId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v("Min value")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Min value"},model:{value:_vm.data.min,callback:function($$v){_vm.$set(_vm.data,"min",$$v)},expression:"data.min"}})],1),_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Max valuer ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Max Value"},model:{value:_vm.data.max,callback:function($$v){_vm.$set(_vm.data,"max",$$v)},expression:"data.max"}})],1)]),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancel()}}},[_vm._v("Cancel")]),_vm.data.edit?_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.update()}}},[_vm._v("Update")]):_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Confirm")])],1),_c("space-asset-chooser",{attrs:{resourceType:[2],visibility:_vm.pickerVisibility,query:_vm.quickSearchQuery,picktype:"'asset'",showAsset:!0,appendToBody:!0,closeOnClickModel:!0,filter:_vm.filter},on:{associate:function($event){return _vm.associate($event)},"update:visibility":function($event){_vm.pickerVisibility=$event}}})],1)},GaugeCardSetupvue_type_template_id_01db1a50_staticRenderFns=[],GaugeCardSetupvue_type_script_lang_js={props:["visibility","cardData","type"],mixins:[DateHelper/* default */.Z,ControlCommandMixin/* default */.Z],data:function(){return{pickerVisibility:!1,quickSearchQuery:"",selectedResourceLabel:null,data:{key:"",title:"",edit:!1,operatorId:28,aggregation:"sum",gaugeMeta:{minorTicks:2,majorTicks:[0,200,400,600,800,1e3],highlights:[{from:0,to:350,color:"#ffb2a6"},{from:350,to:800,color:"#c5fdc0"},{from:800,to:1e3,color:"#ffffc6"}]},fieldObj1:null,dateFilter:null,min:null,max:null,buildings:{selectedBuilding:null,selectedAsset:null,selectedReading:null,readingField:null,assetdetails:null},building:{},expressions:[]},assets:[],buildingVsAssets:{},readings:[],keyToName:{profilemini:"Energy",energycostmini:"Energy Cost",carbonmini:"Carbon Emission",controlCommandmini:"Control Command"},aggregateFunctions:[{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}]}},mounted:function(){},components:{SpaceAssetChooser:SpaceAssetChooser/* default */.Z},created:function(){var _this=this;this.visibility&&Promise.all([this.$store.dispatch("loadSites"),this.$store.dispatch("loadBuildings")]).then((function(){_this.getControlableAssets(),_this.cardData&&(_this.data=_this.cardData),_this.loadDefaults(),_this.loadReadingFields()}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.sites},buildings:function(state){return state.buildings}})),{},{controlableAssets:function(){return this.getControlableAssets()},filter:function(){}}),methods:{associate:function(selectedObj){
// this.confirmRequest.resource = selectedObj
this.data.buildings.selectedAsset=selectedObj.id,this.loadAssetFields(),this.selectedResourceLabel=selectedObj.name,this.pickerVisibility=!1,this.$forceUpdate()},loadDefaults:function(){this.data.buildings.selectedAsset&&this.loadAssetFields(),this.data.key=this.type||""},cancel:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(){this.setValues(),this.$emit("save",this.data),this.cancel()},update:function(){this.setValues(),this.$emit("update",this.data)},getworkFlowString:function(){var string="";return string='Map test(){  date = new NameSpace("date");\n           period = date.getDateRange("'.concat(this.data.dateFilter.queryStr,'");\n           db = {   criteria : [parentId == ').concat(this.data.buildings.selectedAsset,' &&  ttime == period],   field : "').concat(this.data.buildings.selectedReading,'",   aggregation : "sum" };\n              db1 = {   criteria : [parentId == ').concat(this.data.buildings.selectedAsset,' &&  ttime == period],   field : "').concat(this.data.buildings.selectedReading,'",   aggregation : "min" };\n              db2 = {   criteria : [parentId == ').concat(this.data.buildings.selectedAsset,' &&  ttime == period],   field : "').concat(this.data.buildings.selectedReading,'",   aggregation : "max" };\n              db3 = {   criteria : [parentId == ').concat(this.data.buildings.selectedAsset,' &&  ttime == period],   field : "').concat(this.data.buildings.selectedReading,'",   aggregation : "avg" };\n              db4 = {   criteria : [parentId == ').concat(this.data.buildings.selectedAsset,' &&  ttime == period],   field : "').concat(this.data.buildings.selectedReading,'",   aggregation : "lastValue" };\n           sumvalue = Module("').concat(this.data.fieldObj1.module.name,'").fetch(db);\n           minvalue = Module("').concat(this.data.fieldObj1.module.name,'").fetch(db1);\n           maxvalue = Module("').concat(this.data.fieldObj1.module.name,'").fetch(db2);\n           avgvalue = Module("').concat(this.data.fieldObj1.module.name,'").fetch(db3);\n           lastvalue = Module("').concat(this.data.fieldObj1.module.name,'").fetch(db4);\n           data = {};\n           data["sum"] = sumvalue;\n            data["min"] = minvalue;\n           data["max"] = maxvalue;\n           data["avg"] = avgvalue;\n           data["lastValue"] = lastvalue;\n\n           fieldObj = new NameSpace("module").getField("').concat(this.data.buildings.selectedReading,'","').concat(this.data.fieldObj1.module.name,'");\n           data["fieldObj"] = null;\n           if (fieldObj != null) { data["fieldObj"] = fieldObj;}\n           data["minValue"] = ').concat(this.data.min,';\n          data["maxValue"] = ').concat(this.data.max,";\n           return data;\n          }"),string},setValues:function(){var _this2=this;this.data.fieldObj1=this.readings.find((function(rt){return rt.name===_this2.data.buildings.selectedReading})),this.data.building=[].concat((0,toConsumableArray/* default */.Z)(this.buildings),(0,toConsumableArray/* default */.Z)(this.sites)).find((function(rt){return rt.id===_this2.data.buildings.selectedBuilding})),this.data.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(this.data.operatorId),this.data.dateFilter["queryStr"]=this.getdateOperators().find((function(rt){return rt.value===_this2.data.operatorId})).queryStr,this.data.workflowV2String=this.getworkFlowString()},loadAssetFields:function(){var _this3=this,assetId=this.data.buildings.selectedAsset;this.$util.loadAssetReadingFields(assetId).then((function(response){_this3.readings=response}))},loadReadingFields:function(){var self=this;self.$http.get("/asset/getreadings").then((function(response){self.assets=response&&response.data&&response.data.assets?response.data.assets:{}}))}}},components_GaugeCardSetupvue_type_script_lang_js=GaugeCardSetupvue_type_script_lang_js,GaugeCardSetup_component=(0,componentNormalizer/* default */.Z)(components_GaugeCardSetupvue_type_script_lang_js,GaugeCardSetupvue_type_template_id_01db1a50_render,GaugeCardSetupvue_type_template_id_01db1a50_staticRenderFns,!1,null,null,null)
/* harmony default export */,GaugeCardSetup=GaugeCardSetup_component.exports,PmreadingCardSetupvue_type_template_id_6e33c990_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:"PM Readings","append-to-body":!0,"custom-class":{"building-dialog":!0,"select-building-dialog":!0,"fc-dialog-center-container":!0,"gauge-setip-dialog":!0},visible:_vm.visibility,width:"30%","before-close":_vm.cancel},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",[_c("div",[_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Preventive Maintenance ")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please select a Field",filterable:"","no-data-text":"Loading..."},on:{change:_vm.loadResources},model:{value:_vm.data.pmId,callback:function($$v){_vm.$set(_vm.data,"pmId",$$v)},expression:"data.pmId"}},_vm._l(_vm.pmlist,(function(pm,index){return _c("el-option",{key:index,attrs:{label:pm.name,value:pm.id}})})),1)],1),2===_vm.pmCreationType?[4===_vm.assignmentType?_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Asset ")]):_c("div",{staticClass:"reading-card-header fc-input-label-txt pT20"},[_vm._v(" Space ")]),_c("el-select",{staticClass:"fc-input-full-border2",model:{value:_vm.data.config.resourceId,callback:function($$v){_vm.$set(_vm.data.config,"resourceId",$$v)},expression:"data.config.resourceId"}},_vm._l(_vm.pmResourceList,(function(resource,key){return _c("el-option",{key:key,attrs:{label:resource.name,value:resource.id}})})),1)]:_vm._e(),_c("div",{staticClass:"pT10"},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Default period")]),_c("el-select",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Please select a building"},model:{value:_vm.data.config.operatorId,callback:function($$v){_vm.$set(_vm.data.config,"operatorId",$$v)},expression:"data.config.operatorId"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}}):_vm._e()})),1)],1)],2),_c("span",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"col-6",on:{click:function($event){return _vm.cancel()}}},[_vm._v("Cancel")]),_vm.data.edit?_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.update()}}},[_vm._v("Update")]):_c("el-button",{staticClass:"col-6",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Confirm")])],1)])},PmreadingCardSetupvue_type_template_id_6e33c990_staticRenderFns=[],PmreadingCardSetupvue_type_script_lang_js={props:["visibility","cardData","type"],mixins:[DateHelper/* default */.Z],data:function(){return{pickerVisibility:!1,quickSearchQuery:"",selectedResourceLabel:null,data:{pmId:null,config:{operatorId:22,resourceId:null}},pmlist:[],pmResourceList:[],pmMap:{},pmCreationType:null,assignmentType:null}},mounted:function(){this.loadPmList()},methods:{loadResources:function(){var _this=this;this.pmResourceList=[],this.data.config.resourceId=null;var pm=this.pmMap[this.data.pmId];this.pmCreationType=pm.pmCreationType,this.assignmentType=pm.assignmentType,this.$http.get("/workorder/getMultiplePMResources?pmId="+this.data.pmId).then((function(response){_this.pmResourceList=response.data.multiPmResources}))},loadPmList:function(){var self=this;this.$http.get("/planned/all").then((function(response){self.pmlist=response.data,self.pmlist&&self.pmlist.forEach((function(i){return self.pmMap[i.id]=i}))})).catch((function(){}))},cancel:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(){this.setValues(),this.$emit("save",this.data),this.cancel()},update:function(){this.setValues(),this.$emit("update",this.data)},setValues:function(){}}},components_PmreadingCardSetupvue_type_script_lang_js=PmreadingCardSetupvue_type_script_lang_js,PmreadingCardSetup_component=(0,componentNormalizer/* default */.Z)(components_PmreadingCardSetupvue_type_script_lang_js,PmreadingCardSetupvue_type_template_id_6e33c990_render,PmreadingCardSetupvue_type_template_id_6e33c990_staticRenderFns,!1,null,null,null)
/* harmony default export */,PmreadingCardSetup=PmreadingCardSetup_component.exports,SmartMapSetupvue_type_template_id_6e3c9c40_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"f-kfi-card-builder fc-dialog-center-container kpi-map-setup-dilaog","append-to-body":!0,visible:_vm.visibility,width:"50%",title:"KPI CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[_c("span",{staticClass:"kpi-card-header"},[_vm._v("SMART MAP")])]),_c("div",{staticStyle:{height:"500px"}},[_c("el-form",{ref:"FCUCARD",attrs:{model:_vm.data,"label-position":"top"}},[_c("el-form-item",{attrs:{prop:"category"}},[_c("el-col",{attrs:{span:19}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Name")]),_c("el-input",{staticClass:"addReading-title el-input-textbox-full-border",staticStyle:{width:"100%"},attrs:{autofocus:!0,placeholder:"Name"},model:{value:_vm.data.name,callback:function($$v){_vm.$set(_vm.data,"name",$$v)},expression:"data.name"}})],1)],1),_c("el-form-item",{attrs:{prop:"moduleName"}},[_c("el-col",{attrs:{span:19}},[_c("p",{staticClass:"grey-text2 kpi-text-3 "},[_vm._v("Module Name")]),_c("el-select",{staticClass:"fc-input-full-border-select2  p0",attrs:{filterable:""},on:{change:function($event){return _vm.setmoduleName(_vm.data.module)}},model:{value:_vm.data.module,callback:function($$v){_vm.$set(_vm.data,"module",$$v)},expression:"data.module"}},_vm._l(_vm.getLicenseEnabledmoduleNames,(function(m,mIdx){return _c("el-option",{key:mIdx,attrs:{value:m.moduleName,label:m.label}})})),1)],1)],1)],1),_vm.loading?_c("div",[_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm._e()],1):_vm._e(),_vm._l(_vm.data.expressions,(function(expression,index){return _c("el-form",{key:index,ref:"FCUCARD",refInFor:!0,staticClass:"criteria-box",attrs:{model:expression,"label-position":"top"}},[_c("el-form-item",{attrs:{prop:"category"}},["count"!==expression.aggregateString?_c("el-col",{attrs:{span:2,offset:1}},[_c("div",{staticClass:"fc-input-div-full-border-f14-1 pointer mT25"},[_c("el-popover",{attrs:{disabled:!_vm.showMetricAggregation(_vm.metric),placement:"bottom",width:"70",trigger:"click","popper-class":"metric-popover"},model:{value:_vm.toggleMetricAggregation,callback:function($$v){_vm.toggleMetricAggregation=$$v},expression:"toggleMetricAggregation"}},[_vm._l(_vm.metricAggregation,(function(metricAggr,metricAggrIdx){return _c("div",{key:metricAggrIdx,staticClass:"pointer pT5 pB5 fc-label-hover label-txt-black f14 text-center",attrs:{value:metricAggr.value},on:{click:function($event){return _vm.setMetricAggregation(metricAggr,expression.aggregate,index)}}},[_vm._v(" "+_vm._s(metricAggr.label)+" ")])})),_c("img",{staticClass:"p15",attrs:{slot:"reference",disabled:!_vm.showMetricAggregation(_vm.metric),src:__webpack_require__(667527)},slot:"reference"})],2)],1)]):_vm._e()],1),_c("el-form-item",{attrs:{prop:"category"}},[_c("div",{staticClass:"height100"},[_c("new-criteria-builder",{staticClass:"report-criteria-buuilder",attrs:{exrule:_vm.data.expressions[0].criteria,showSiteField:!0,module:_vm.data.module,title:_vm.$t("setup.users_management.specify_rules_for_assigment_rules")},on:{moduleObj:_vm.getModuleList,condition:_vm.getCriteria}})],1)])],1)})),_c("map-marker",{staticClass:"criteria-box mT20",attrs:{data:_vm.data,marker:_vm.data.marker,markerValue:_vm.data.markerValue,moduleFieldList:_vm.moduleFieldList}})],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Close")]),_vm.kpiCard?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save("update")}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)])},SmartMapSetupvue_type_template_id_6e3c9c40_staticRenderFns=[],MapMarkerSettingsvue_type_template_id_0a6a1ae4_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm._v(" MARKER "),_c("el-tabs",{staticClass:"mT30",attrs:{type:"border-card"}},[_c("el-tab-pane",{attrs:{label:"Style"}},[_c("div",[_c("el-row",[_c("el-col",{staticClass:"p10",attrs:{span:10}},[_c("p",[_vm._v("color")]),_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:_vm.marker.style.color,callback:function($$v){_vm.$set(_vm.marker.style,"color",$$v)},expression:"marker.style.color"}})],1),_c("el-col",{staticClass:"p10",attrs:{span:10}},[_c("p",[_vm._v("Action Type")]),_c("el-select",{staticClass:"fc-input-full-border-select2",model:{value:_vm.marker.action.type,callback:function($$v){_vm.$set(_vm.marker.action,"type",$$v)},expression:"marker.action.type"}},_vm._l(_vm.markerActions,(function(value,key){return _c("el-option",{key:key,attrs:{label:key,value:value}})})),1)],1),1===_vm.marker.action.type?_c("el-col",{staticClass:"p10",attrs:{span:20}},[_c("p",[_vm._v("URL")]),_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.marker.action.url,callback:function($$v){_vm.$set(_vm.marker.action,"url",$$v)},expression:"marker.action.url"}})],1):_vm._e()],1)],1)]),_c("el-tab-pane",{attrs:{label:"value"}},[_c("el-row",{staticClass:"mT10 maxWidth90",attrs:{gutter:10}},[_c("el-col",{attrs:{span:8}},[_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",model:{value:_vm.markerValue.type,callback:function($$v){_vm.$set(_vm.markerValue,"type",$$v)},expression:"markerValue.type"}},_vm._l(_vm.valueMap[_vm.data.module],(function(value,key){return _c("el-option",{key:key,attrs:{label:key,value:value.fieldName}})})),1)],1)]),"reading"===_vm.markerValue.type?[_c("el-col",{attrs:{span:8}},[_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",on:{change:function($event){return _vm.setReadingModuleName()}},model:{value:_vm.data.readingObj.categoryId,callback:function($$v){_vm.$set(_vm.data.readingObj,"categoryId",$$v)},expression:"data.readingObj.categoryId"}},_vm._l(_vm.assetCategory,(function(category,index){return _c("el-option",{key:index,attrs:{label:category.name,value:category.id}})})),1)],1)]),_c("el-col",{attrs:{span:8}},[_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",model:{value:_vm.data.readingObj.field,callback:function($$v){_vm.$set(_vm.data.readingObj,"field",$$v)},expression:"data.readingObj.field"}},_vm._l(_vm.fields,(function(field,index){return _c("el-option",{key:index,attrs:{label:_vm.readings.fields[field].displayName,value:_vm.readings.fields[field].name}})})),1)],1)]),_c("el-col",{staticClass:"mT10",attrs:{span:8}},[_c("div",[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select a period"},model:{value:_vm.data.readingObj.period,callback:function($$v){_vm.$set(_vm.data.readingObj,"period",$$v)},expression:"data.readingObj.period"}},_vm._l(_vm.getdateOperators(),(function(dateRange,index){return"Range"!==dateRange.label?_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.queryStr}}):_vm._e()})),1)],1)]),_c("el-col",{staticClass:"mT10",attrs:{span:8}},[_c("div",[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select a aggregation"},model:{value:_vm.data.readingObj.aggregation,callback:function($$v){_vm.$set(_vm.data.readingObj,"aggregation",$$v)},expression:"data.readingObj.aggregation"}},_vm._l(_vm.aggregateFunctions,(function(agg,index){return _c("el-option",{key:index,attrs:{label:agg.label,value:agg.name}})})),1)],1)])]:_vm._e()],2),_c("div")],1),_c("el-tab-pane",{attrs:{label:"Conditional formatting"}},_vm._l(_vm.marker.conditionalFormatting,(function(condition,index){return _c("div",{key:index,staticClass:"relative criteria-box"},[_c("el-row",{staticClass:"mT10 maxWidth90",attrs:{gutter:10}},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"fc-input-label-txt mb5"}),_c("div",[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{disabled:!0},model:{value:_vm.markerValue.type,callback:function($$v){_vm.$set(_vm.markerValue,"type",$$v)},expression:"markerValue.type"}})],1)]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"fc-input-label-txt mb5"}),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",model:{value:condition.operatorId,callback:function($$v){_vm.$set(condition,"operatorId",$$v)},expression:"condition.operatorId"}},_vm._l(_vm.NUMBER,(function(value,key){return _c("el-option",{key:key,attrs:{label:key,value:value.operatorId}})})),1)],1)]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"fc-input-label-txt mb5"}),_c("div",[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:condition.value,callback:function($$v){_vm.$set(condition,"value",$$v)},expression:"condition.value"}})],1)]),_c("el-col",{staticClass:"p10",attrs:{span:10}},[_c("p",[_vm._v("color")]),_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:condition.style.color,callback:function($$v){_vm.$set(condition.style,"color",$$v)},expression:"condition.style.color"}})],1)],1),_c("div",{staticClass:"contion-action-btn pointer"},[_vm.marker.conditionalFormatting.length-1===index?_c("img",{staticClass:"add-icon",staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addContions}}):_vm._e(),_vm.marker.conditionalFormatting.length>1?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"3px","margin-left":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteCondition(index)}}}):_vm._e()])],1)})),0),_c("el-tab-pane",{attrs:{label:"User filter"}},_vm._l(_vm.marker.conditionalFormatting,(function(condition,index){return _c("div",{key:index,staticClass:"relative criteria-box"},[_c("el-row",{staticClass:"mT10 maxWidth90",attrs:{gutter:10}},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"fc-input-label-txt mb5"}),_c("div",[_c("el-select",{staticClass:"fc-border-select",attrs:{filterable:"",placeholder:"Select"},model:{value:_vm.data.userFilter.field,callback:function($$v){_vm.$set(_vm.data.userFilter,"field",$$v)},expression:"data.userFilter.field"}},_vm._l(_vm.moduleFieldList.fields,(function(field,idx1){return _c("el-option",{key:idx1,attrs:{label:field.displayName,value:field.name}})})),1)],1)])],1),_c("div",{staticClass:"contion-action-btn pointer"},[_vm.marker.conditionalFormatting.length-1===index?_c("img",{staticClass:"add-icon",staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addContions}}):_vm._e(),_vm.marker.conditionalFormatting.length>1?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"3px","margin-left":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteCondition(index)}}}):_vm._e()])],1)})),0)],1)],1)},MapMarkerSettingsvue_type_template_id_0a6a1ae4_staticRenderFns=[],colors=__webpack_require__(519898),MapMarkerSettingsvue_type_script_lang_js={props:["marker","data","markerValue","moduleFieldList"],mixins:[DateHelper/* default */.Z],data:function(){return{readings:null,markerActions:{URL:1,Functions:2,Popover:3},valueMap:{asset:{"Workorder Count":{fieldName:"noOfWorkorders"},"Alarms Count":{fieldName:"noOfAlarms"},Reading:{fieldName:"reading"}},site:{"Workorder Count":{fieldName:"noOfWorkorders"},"Alarms Count":{fieldName:"noOfAlarms"},"Assets Count":{fieldName:"noOfAssets"},Reading:{fieldName:"reading"}},building:{"Workorder Count":{fieldName:"noOfWorkorders"},"Alarms Count":{fieldName:"noOfAlarms"},"Assets Count":{fieldName:"noOfAssets"},Reading:{fieldName:"reading"}}},aggregateFunctions:[{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}],NUMBER:{"<=":{dynamicOperator:!1,operator:"<=",operatorId:12,valueNeeded:!0,_name:"LESS_THAN_EQUAL"}," > ":{dynamicOperator:!1,operator:" > ",operatorId:78,placeHoldersMandatory:!0,valueNeeded:!1,_name:"GREATER_THAN"}," = ":{dynamicOperator:!1,operator:" = ",operatorId:74,placeHoldersMandatory:!0,valueNeeded:!1,_name:"EQUAL"}," < ":{dynamicOperator:!1,operator:" < ",operatorId:76,placeHoldersMandatory:!0,valueNeeded:!1,_name:"LESS_THAN"},"is not empty":{dynamicOperator:!1,operator:"is not empty",operatorId:2,valueNeeded:!1,_name:"IS_NOT_EMPTY"}," != ":{dynamicOperator:!1,operator:" != ",operatorId:75,placeHoldersMandatory:!0,valueNeeded:!1,_name:"NOT_EQUAL"}," >= ":{dynamicOperator:!1,operator:" >= ",operatorId:79,placeHoldersMandatory:!0,valueNeeded:!1,_name:"GREATER_THAN_EQUAL"}," <= ":{dynamicOperator:!1,operator:" <= ",operatorId:77,placeHoldersMandatory:!0,valueNeeded:!1,_name:"LESS_THAN_EQUAL"},"is empty":{dynamicOperator:!1,operator:"is empty",operatorId:1,valueNeeded:!1,_name:"IS_EMPTY"},"!=":{dynamicOperator:!1,operator:"!=",operatorId:10,valueNeeded:!0,_name:"NOT_EQUALS"},"<":{dynamicOperator:!1,operator:"<",operatorId:11,valueNeeded:!0,_name:"LESS_THAN"},"=":{dynamicOperator:!1,operator:"=",operatorId:9,valueNeeded:!0,_name:"EQUALS"},">":{dynamicOperator:!1,operator:">",operatorId:13,valueNeeded:!0,_name:"GREATER_THAN"},">=":{dynamicOperator:!1,operator:">=",operatorId:14,valueNeeded:!0,_name:"GREATER_THAN_EQUAL"}}}},created:function(){this.$store.dispatch("loadAssetCategory"),this.loadReadings()},computed:{assetCategory:function(){return this.$store.state.assetCategory},fields:function(){return this.readings&&this.readings.categoryWithAssets[this.data.readingObj.categoryId]?Object.keys(this.readings.categoryWithFields[this.data.readingObj.categoryId]):[]}},methods:{loadReadings:function(){var self=this;self.loading=!0;var url="/asset/getreadings";self.$http.get(url).then((function(response){self.readings=response.data,self.loading=!1}))},setReadingModuleName:function(){var _this=this;this.data.readingObj.moduleName=this.assetCategory.find((function(rt){return rt.id===_this.data.readingObj.categoryId})).moduleName},getPredefinedColors:function(){return colors/* default */.Z.readingcardColors},addContions:function(){var emptyData={output:"OUTPUT",operatorId:9,value:null,style:{icon:"",color:"#933F95"}};this.marker.conditionalFormatting.push(emptyData)},deleteCondition:function(index){this.marker.conditionalFormatting.splice(index,1)}}},components_MapMarkerSettingsvue_type_script_lang_js=MapMarkerSettingsvue_type_script_lang_js,MapMarkerSettings_component=(0,componentNormalizer/* default */.Z)(components_MapMarkerSettingsvue_type_script_lang_js,MapMarkerSettingsvue_type_template_id_0a6a1ae4_render,MapMarkerSettingsvue_type_template_id_0a6a1ae4_staticRenderFns,!1,null,null,null)
/* harmony default export */,MapMarkerSettings=MapMarkerSettings_component.exports,SmartMapSetupvue_type_script_lang_js={props:["visibility","kpiCard"],mixins:[DateHelper/* default */.Z],data:function(){return{moduleFieldList:[],moduleNames:[{label:"Asset",moduleName:"asset",license:"SPACE_ASSET"},{label:"Site",moduleName:"site",license:"ENERGY"},{label:"Building",module:"building",license:"ENERGY"}],metricAggregation:[{label:"AVG",value:"avg"},{label:"SUM",value:"sum"},{label:"MIN",value:"min"},{label:"MAX",value:"max"}],loading:!1,toggleMetricAggregation:!1,data:{name:"",locationField:"location",module:"asset",metrics:[],timeFields:[],selectedTimeField:null,operatorId:null,metricAgg:null,marker:{style:{color:"#EC598C"},action:{type:1,fuction:null,url:null,popover:null},value:null,conditionalFormatting:[{output:"OUTPUT",operatorId:9,value:null,style:{icon:"",color:"#933F95"}}]},readingObj:{categoryId:null,field:null,period:"Today",aggregation:"sum",moduleName:"energydata"},userFilter:{field:[]},markerValue:{type:null,id:21323},expressions:[{name:null,actualName:null,fieldName:"id",aggregateString:"count",aggregate:null,moduleName:"asset",criteria:{pattern:"(1)",conditions:{1:{fieldName:"__vue_devtool_undefined__",value:"__vue_devtool_undefined__",columnName:"__vue_devtool_undefined__",operatorId:"__vue_devtool_undefined__"}},resourceOperator:!1}}]},showCriteriaBuilder:!1,selectedIndex:0}},components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z,MapMarker:MapMarkerSettings},mounted:function(){this.loadData()},computed:{getLicenseEnabledmoduleNames:function(){var _this=this;return this.moduleNames.filter((function(moduleName){return!0===_this.$helpers.isLicenseEnabled(moduleName.license)}))},metric:function(){var _this2=this;return this.data&&this.data.aggregateString?this.data.metrics.find((function(rt){return rt.name===_this2.data.aggregateString})):this.data.metrics.length?this.data.metrics[0]:null}},methods:{getModuleList:function(data){this.moduleFieldList=data},deforamtData:function(data){if(data&&data.selectedTimeField){if(Object.keys(data.expressions[0].criteria.conditions).length){var serachValue=" and "+Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-2]+" and "+Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-1]+")",newPattern=data.expressions[0].criteria.pattern.replace(serachValue,")");data.expressions[0].criteria.pattern=newPattern,Object.keys(data.expressions[0].criteria.conditions).forEach((function(key){var lastValue=Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-1],lastBeforeValue=Object.keys(data.expressions[0].criteria.conditions)[Object.keys(data.expressions[0].criteria.conditions).length-2];key!==lastValue&&key!==lastBeforeValue||delete data.expressions[0].criteria.conditions[key]}))}return data}return data},loadData:function(){this.kpiCard&&(this.data=this.deforamtData(this.kpiCard),this.data.hasOwnProperty("moduleNameName")||(this.data.module="workorder")),this.loadFields()},closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},setMertic:function(){},setmoduleName:function(moduleName){this.$helpers.isLicenseEnabled("NEWALARM")&&"alarm"===this.data.module&&(moduleName="newreadingalarm"),this.loadDefaultData(moduleName),this.data.expressions[0].moduleName=moduleName,this.loadFields()},loadDefaultData:function(moduleName){this.data={name:"",moduleName:moduleName||"workorder",metrics:[],timeFields:[],selectedTimeField:null,operatorId:null,metricAgg:null,expressions:[{name:null,actualName:null,fieldName:"id",aggregateString:"count",aggregate:null,moduleName:"workorder",criteria:{pattern:"(1)",conditions:{1:{fieldName:"__vue_devtool_undefined__",value:"__vue_devtool_undefined__",columnName:"__vue_devtool_undefined__",operatorId:"__vue_devtool_undefined__"}},resourceOperator:!1}}]}},showMetricAggregation:function(metric){return!metric||!metric.defaultMetric||(this.toggleMetricAggregation=!1,!1)},validateData:function(){return!(!this.data||!this.data.expressions.length)&&(null!==this.data.expressions[0].actualName&&!!(this.data.expressions[0].criteria&&this.data.expressions[0].criteria.conditions&&Object.keys(this.data.expressions[0].criteria.conditions).length&&void 0!==this.data.expressions[0].criteria.conditions[1].columnName))},setMetricAggregation:function(agg,data,index){this.data.expressions[0].actualName=this.data.name,this.data.expressions[index].fieldName=agg.value,this.toggleMetricAggregation=!1},save:function(update){this.$emit("update:visibility",!1),this.convertData(),update?this.$emit("update",this.data):this.$emit("save",this.data)},convertData:function(){var _this3=this;this.data.expressions.forEach((function(expression){if("count"!==expression.aggregateString){var temp=expression.aggregateString;expression.aggregateString=expression.fieldName,expression.fieldName=temp}expression.name=_this3.formatName(_this3.data.name)}))},formatName:function(name){return name.toLocaleLowerCase().split(" ").join("")},applyTimefields:function(){if(this.data&&this.data.expressions.length&&this.data.expressions[0].criteria.conditions){var defaultExpresion={fieldName:"createdTime",value:null,columnName:this.data.selectedTimeField,operatorId:this.data.operatorId,isResourceOperator:!1,parseLabel:null,valueArray:[],operatorLabel:"Today",active:!1,operatorsDataType:{dataType:"DATE_TIME",displayType:"DATETIME"},isSpacePicker:!1};this.data.expressions[0].criteria.conditions[Object.keys(this.data.expressions[0].criteria.conditions).length+1]=defaultExpresion,this.data.expressions[0].criteria.pattern=this.data.expressions[0].criteria.pattern.split(")")[0]+" and "+Object.keys(this.data.expressions[0].criteria.conditions).length+")"}},applyPeriod:function(){if(this.data&&this.data.expressions.length&&this.data.expressions[0].criteria.conditions){var defaultExpresion={fieldName:"dueDate",value:null,columnName:"Tickets.DUE_DATE",operatorId:this.data.operatorId,isResourceOperator:!1,parseLabel:null,valueArray:[],operatorLabel:"Today",active:!1,operatorsDataType:{dataType:"DATE_TIME",displayType:"DATETIME"},isSpacePicker:!1};this.data.expressions[0].criteria.conditions[Object.keys(this.data.expressions[0].criteria.conditions).length+1]=defaultExpresion,this.data.expressions[0].criteria.pattern=this.data.expressions[0].criteria.pattern.split(")")[0]+" and "+Object.keys(this.data.expressions[0].criteria.conditions).length+")"}},constractData:function(rawData){var data=this.$helpers.cloneObject(rawData);return data},addCriteriaAndResconstruct:function(){this.showCriteriaBuilder=!1},showcriteriabuilder:function(index){this.selectedIndex=index,this.showCriteriaBuilder=!0},getCriteria:function(criteria){this.data.expressions[this.selectedIndex].criteria=criteria},loadFields:function(){var _this4=this;this.loading=!0,this.$http.post("/v2/report/getReportFields",{moduleName:this.data.module}).then((function(response){_this4.prepareMetrics(response.data.result),_this4.getTimeFields(response.data.result),_this4.loading=!1}))},getTimeFields:function(result){result.meta&&result.meta.dimension&&result.meta.dimension.time&&(this.data.timeFields=result.meta.dimension.time)},prepareMetrics:function(result){if(this.data.metrics=[],result&&result.meta&&result.meta.metrics){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(result.meta.metrics);try{for(_iterator.s();!(_step=_iterator.n()).done;){var metric=_step.value;"actualWorkDuration"===metric.name&&(metric.displayName="Work Duration"),this.data.metrics.push(metric)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var defaultMetric={};defaultMetric["displayName"]="Number of "+this.data.module+"s",defaultMetric["defaultMetric"]=!0,defaultMetric["fieldId"]=-1,defaultMetric["name"]="count",this.data.metrics.push(defaultMetric)}}}},components_SmartMapSetupvue_type_script_lang_js=SmartMapSetupvue_type_script_lang_js,SmartMapSetup_component=(0,componentNormalizer/* default */.Z)(components_SmartMapSetupvue_type_script_lang_js,SmartMapSetupvue_type_template_id_6e3c9c40_render,SmartMapSetupvue_type_template_id_6e3c9c40_staticRenderFns,!1,null,null,null)
/* harmony default export */,SmartMapSetup=SmartMapSetup_component.exports,SmartTableSetupvue_type_template_id_3386416f_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"f-kfi-card-builder fc-dialog-center-container kpi-map-setup-dilaog","append-to-body":!0,visible:_vm.visibility,width:"85%",title:"KPI CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[_c("span",{staticClass:"kpi-card-header"},[_vm._v("SMART MAP")])]),_c("el-row",[_c("el-col",{attrs:{span:10}},[_c("code-mirror",{staticClass:"left-con pT20 pR20",model:{value:_vm.data.workflowV2String,callback:function($$v){_vm.$set(_vm.data,"workflowV2String",$$v)},expression:"data.workflowV2String"}})],1),_c("el-col",{attrs:{span:4}},[_c("el-button",{staticClass:"btn-blue-fill p20",on:{click:function($event){return _vm.submit()}}},[_vm._v("RUN")])],1),_c("el-col",{attrs:{span:10}},[_c("el-row",[_c("el-col",{attrs:{span:24}},_vm._l(_vm.data.columns,(function(column,index){return _c("div",{key:index,staticClass:"relative"},[_c("el-row",{staticClass:"mT10 maxWidth90",attrs:{gutter:10}},[_c("el-col",{attrs:{span:4}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"key"},model:{value:column.key,callback:function($$v){_vm.$set(column,"key",$$v)},expression:"column.key"}})],1),_c("el-col",{attrs:{span:8}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Label"},model:{value:column.label,callback:function($$v){_vm.$set(column,"label",$$v)},expression:"column.label"}})],1),_c("el-col",{attrs:{span:8}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setupLabel.data_type")},model:{value:column.datatype,callback:function($$v){_vm.$set(column,"datatype",$$v)},expression:"column.datatype"}},_vm._l(_vm.dataTypes,(function(type,idx){return _c("el-option",{key:idx,attrs:{label:type,value:type}})})),1)],1),_c("el-col",{attrs:{span:4}},[_c("el-checkbox",{model:{value:column.merge,callback:function($$v){_vm.$set(column,"merge",$$v)},expression:"column.merge"}})],1),column.merge?_c("el-col",{attrs:{span:4}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setupLabel.data_type")},model:{value:column.mergeKey,callback:function($$v){_vm.$set(column,"mergeKey",$$v)},expression:"column.mergeKey"}},_vm._l(_vm.data.columns.map((function(rt){return rt.key})),(function(key,idx){return _c("el-option",{key:idx,attrs:{label:key,value:key}})})),1)],1):_vm._e()],1),_c("div",{staticClass:"contion-action-btn2 pointer"},[_vm.data.columns.length-1===index?_c("img",{staticClass:"add-icon",staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addContions}}):_vm._e(),_vm.data.columns.length>1?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"3px","margin-left":"3px",position:"relative",top:"10px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteCondition(index)}}}):_vm._e()])],1)})),0),_c("el-col",{attrs:{span:24}},_vm._l(_vm.errors,(function(error,index){return _c("el-tag",{key:index,attrs:{type:"danger"}},[_vm._v(_vm._s(error))])})),1),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"right-con p20",attrs:{type:"textarea",id:"resultBox",rows:2,placeholder:"Result",autosize:{minRows:2,maxRows:50}},model:{value:_vm.result,callback:function($$v){_vm.result=$$v},expression:"result"}})],1)],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Close")]),_vm.cardData?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save("update")}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)],1)},SmartTableSetupvue_type_template_id_3386416f_staticRenderFns=[],CodeMirror=__webpack_require__(919324),SmartTableSetupvue_type_script_lang_js={props:["visibility","cardData"],data:function(){return{result:null,dataTypes:["TEXT","BOOLEAN","NUMBER","DATE"],columns:"",errors:[],data:{columns:[{key:"",label:"",datatype:"TEXT",width:"",merge:!1,mergeKey:null,conditionalFormatting:[]}],workflowV2String:'Map getTable(){\n            date = new NameSpace("date");\n            period = date.getDateRange("Today");\n            db = {\n              criteria: [createdTime == period]\n            };\n\n            workorder = Module("workorder").fetch(db);\n\n            returnValue = {};\n            dataList = [];\n            for each index,work in workorder {\n              val = {};\n              val["a"] = work.serialNumber;\n              val["b"] = work.subject;\n              val["c"] = work.createdTime;\n              val["d"] = work.noOfTasks;\n              dataList.add(val);\n            }\n            returnValue["data"] = dataList;\n            log ""+returnValue;\n            return returnValue;\n          }'}}},components:{CodeMirror:CodeMirror/* default */.Z},mounted:function(){this.cardData&&(this.data=this.cardData)},computed:{},methods:{addContions:function(){var emptyData={key:"a",label:"Name",datatype:"TEXT",width:"",merge:!1,mergeKey:null,conditionalFormatting:[]};this.data.columns.push(emptyData)},deleteCondition:function(index){this.data.columns.splice(index,1)},submit:function(){var _this=this;this.setResult(""),this.$http.post("/v2/workflow/runWorkflow",{workflow:{workflowV2String:this.data.workflowV2String,isV2Script:!0}}).then((function(response){response.data.result.workflow.logString&&_this.setResult(response.data.result.workflow.logString),_this.setError(response.data.result.workflowSyntaxError)})).catch((function(){}))},setError:function(errors){this.errors=errors&&errors.errors||[],this.errors=errors&&errors.errors?errors.errors:[]},setResult:function(result){this.result=result},closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(update){var valid=!0;valid?(this.$emit("update:visibility",!1),update?this.$emit("update",this.data):this.$emit("save",this.data)):this.$message.error("Please enter all the details !!")}}},components_SmartTableSetupvue_type_script_lang_js=SmartTableSetupvue_type_script_lang_js,SmartTableSetup_component=(0,componentNormalizer/* default */.Z)(components_SmartTableSetupvue_type_script_lang_js,SmartTableSetupvue_type_template_id_3386416f_render,SmartTableSetupvue_type_template_id_3386416f_staticRenderFns,!1,null,null,null)
/* harmony default export */,SmartTableSetup=SmartTableSetup_component.exports,SmartTableWrapperSetupvue_type_template_id_c3aa1248_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"f-kfi-card-builder fc-dialog-center-container kpi-map-setup-dilaog","append-to-body":!0,visible:_vm.visibility,width:"85%",title:"KPI CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[_c("span",{staticClass:"kpi-card-header"},[_vm._v("SMART MAP")])]),_c("el-row",[_c("el-col",{attrs:{span:10}},[_c("code-mirror",{staticClass:"left-con pT20 pR20",model:{value:_vm.data.workflowV2String,callback:function($$v){_vm.$set(_vm.data,"workflowV2String",$$v)},expression:"data.workflowV2String"}})],1),_c("el-col",{attrs:{span:4}},[_c("el-button",{staticClass:"btn-blue-fill p20",on:{click:function($event){return _vm.submit()}}},[_vm._v("RUN")])],1),_c("el-col",{attrs:{span:10}},[_c("el-row",[_c("el-col",{attrs:{span:24}},_vm._l(_vm.data.columns,(function(column,index){return _c("div",{key:index,staticClass:"relative"},[_c("el-row",{staticClass:"mT10 maxWidth90",attrs:{gutter:10}},[_c("el-col",{attrs:{span:4}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"key"},model:{value:column.key,callback:function($$v){_vm.$set(column,"key",$$v)},expression:"column.key"}})],1),_c("el-col",{attrs:{span:8}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Label"},model:{value:column.label,callback:function($$v){_vm.$set(column,"label",$$v)},expression:"column.label"}})],1),_c("el-col",{attrs:{span:8}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setupLabel.data_type")},model:{value:column.datatype,callback:function($$v){_vm.$set(column,"datatype",$$v)},expression:"column.datatype"}},_vm._l(_vm.dataTypes,(function(type,idx){return _c("el-option",{key:idx,attrs:{label:type,value:type}})})),1)],1),_c("el-col",{attrs:{span:4}},[_c("el-checkbox",{model:{value:column.merge,callback:function($$v){_vm.$set(column,"merge",$$v)},expression:"column.merge"}})],1),column.merge?_c("el-col",{attrs:{span:4}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setupLabel.data_type")},model:{value:column.mergeKey,callback:function($$v){_vm.$set(column,"mergeKey",$$v)},expression:"column.mergeKey"}},_vm._l(_vm.data.columns.map((function(rt){return rt.key})),(function(key,idx){return _c("el-option",{key:idx,attrs:{label:key,value:key}})})),1)],1):_vm._e()],1),_c("div",{staticClass:"contion-action-btn2 pointer"},[_vm.data.columns.length-1===index?_c("img",{staticClass:"add-icon",staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addContions}}):_vm._e(),_vm.data.columns.length>1?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"3px","margin-left":"3px",position:"relative",top:"10px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteCondition(index)}}}):_vm._e()])],1)})),0),_c("el-col",{attrs:{span:24}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setupLabel.data_type")},model:{value:_vm.data.functionId,callback:function($$v){_vm.$set(_vm.data,"functionId",$$v)},expression:"data.functionId"}},_vm._l(_vm.functions,(function(fun,idx){return _c("el-option-group",{key:idx,attrs:{label:fun.name}},_vm._l(fun.functions,(function(funtion,ix){return _c("el-option",{key:ix,attrs:{label:funtion.name,value:funtion.id}})})),1)})),1)],1),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Title"},model:{value:_vm.data.tableName,callback:function($$v){_vm.$set(_vm.data,"tableName",$$v)},expression:"data.tableName"}})],1),_c("el-col",{attrs:{span:24}},[_c("el-checkbox",{model:{value:_vm.data.filters.building,callback:function($$v){_vm.$set(_vm.data.filters,"building",$$v)},expression:"data.filters.building"}},[_vm._v("building")]),_c("el-checkbox",{model:{value:_vm.data.filters.Assetcategory,callback:function($$v){_vm.$set(_vm.data.filters,"Assetcategory",$$v)},expression:"data.filters.Assetcategory"}},[_vm._v("Assetcategory")]),_c("el-checkbox",{model:{value:_vm.data.filters.outOfScopeBuilding,callback:function($$v){_vm.$set(_vm.data.filters,"outOfScopeBuilding",$$v)},expression:"data.filters.outOfScopeBuilding"}},[_vm._v("Out of Scope Building")])],1),_c("el-col",{attrs:{span:8}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setupLabel.data_type")},model:{value:_vm.data.datefilterId,callback:function($$v){_vm.$set(_vm.data,"datefilterId",$$v)},expression:"data.datefilterId"}},[_vm._l(_vm.dateOperators,(function(type,idx){return _c("el-option",{key:idx,attrs:{label:type.label,value:type.enumValue}})})),_c("el-option",{attrs:{label:"This Quarter",value:68}}),_c("el-option",{attrs:{label:"Last Quarter",value:69}})],2)],1),_c("el-col",{attrs:{span:24}},_vm._l(_vm.errors,(function(error,index){return _c("el-tag",{key:index,attrs:{type:"danger"}},[_vm._v(_vm._s(error))])})),1),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"right-con p20",attrs:{type:"textarea",id:"resultBox",rows:2,placeholder:"Result",autosize:{minRows:2,maxRows:50}},model:{value:_vm.result,callback:function($$v){_vm.result=$$v},expression:"result"}})],1)],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Close")]),_vm.cardData?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save("update")}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)],1)},SmartTableWrapperSetupvue_type_template_id_c3aa1248_staticRenderFns=[],card_constants=__webpack_require__(806186),SmartTableWrapperSetupvue_type_script_lang_js={props:["visibility","cardData"],data:function(){return{dateOperators:card_constants/* dateOperators */._M,result:null,datefilterId:22,functions:null,dataTypes:["TEXT","BOOLEAN","NUMBER","DATE"],columns:"",errors:[],data:{functionId:null,tableName:null,filters:{building:!1,outOfScopeBuilding:!0,Assetcategory:!1},columns:[{key:"",label:"",datatype:"TEXT",width:"",merge:!1,mergeKey:null,conditionalFormatting:[]}],workflowV2String:'Map getTable(){\n            date = new NameSpace("date");\n            period = date.getDateRange("Today");\n            db = {\n              criteria: [createdTime == period]\n            };\n\n            workorder = Module("workorder").fetch(db);\n\n            returnValue = {};\n            dataList = [];\n            for each index,work in workorder {\n              val = {};\n              val["a"] = work.serialNumber;\n              val["b"] = work.subject;\n              val["c"] = work.createdTime;\n              val["d"] = work.noOfTasks;\n              dataList.add(val);\n            }\n            returnValue["data"] = dataList;\n            log ""+returnValue;\n            return returnValue;\n          }'}}},components:{CodeMirror:CodeMirror/* default */.Z},mounted:function(){this.cardData&&(this.data=this.cardData,this.data.filters||(this.data.filters={building:!1,Assetcategory:!1,outOfScopeBuilding:!1})),this.loadNameSpaceList()},computed:{},methods:{loadNameSpaceList:function(){var _this=this;this.$http.get("/v2/workflow/getNameSpaceListWithFunctions").then((function(response){_this.functions=response.data.result.workflowNameSpaceList?response.data.result.workflowNameSpaceList:[]})).catch((function(){_this.functions=[]}))},addContions:function(){var emptyData={key:"a",label:"Name",datatype:"TEXT",width:"",merge:!1,mergeKey:null,conditionalFormatting:[]};this.data.columns.push(emptyData)},deleteCondition:function(index){this.data.columns.splice(index,1)},submit:function(){var _this2=this;this.setResult(""),this.$http.post("/v2/workflow/runWorkflow",{workflow:{workflowV2String:this.data.workflowV2String,isV2Script:!0}}).then((function(response){response.data.result.workflow.logString&&_this2.setResult(response.data.result.workflow.logString),_this2.setError(response.data.result.workflowSyntaxError)})).catch((function(){}))},setError:function(errors){this.errors=errors&&errors.errors||[],this.errors=errors&&errors.errors?errors.errors:[]},setResult:function(result){this.result=result},closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(update){var valid=!0;valid?(this.$emit("update:visibility",!1),update?this.$emit("update",this.data):this.$emit("save",this.data)):this.$message.error("Please enter all the details !!")}}},components_SmartTableWrapperSetupvue_type_script_lang_js=SmartTableWrapperSetupvue_type_script_lang_js,SmartTableWrapperSetup_component=(0,componentNormalizer/* default */.Z)(components_SmartTableWrapperSetupvue_type_script_lang_js,SmartTableWrapperSetupvue_type_template_id_c3aa1248_render,SmartTableWrapperSetupvue_type_template_id_c3aa1248_staticRenderFns,!1,null,null,null)
/* harmony default export */,SmartTableWrapperSetup=SmartTableWrapperSetup_component.exports,SmartCardSetupvue_type_template_id_8a8430b4_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{"custom-class":"f-kfi-card-builder fc-dialog-center-container kpi-map-setup-dilaog","append-to-body":!0,visible:_vm.visibility,width:"85%",title:"KPI CARD","before-close":_vm.closedialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[_c("span",{staticClass:"kpi-card-header"},[_vm._v("SMART CARD")])]),_c("el-row",[_c("el-col",{attrs:{span:10}},[_c("code-mirror",{staticClass:"left-con pT20 pR20",model:{value:_vm.data.workflowV2String,callback:function($$v){_vm.$set(_vm.data,"workflowV2String",$$v)},expression:"data.workflowV2String"}})],1),_c("el-col",{attrs:{span:4}},[_c("el-button",{staticClass:"btn-blue-fill p20",on:{click:function($event){return _vm.submit()}}},[_vm._v("RUN")])],1),_c("el-col",{attrs:{span:10}},[_c("el-row",[_c("el-col",{attrs:{span:24}},_vm._l(_vm.errors,(function(error,index){return _c("el-tag",{key:index,attrs:{type:"danger"}},[_vm._v(_vm._s(error))])})),1),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"right-con p20",attrs:{type:"textarea",id:"resultBox",rows:2,placeholder:"Result",autosize:{minRows:2,maxRows:50}},model:{value:_vm.result,callback:function($$v){_vm.result=$$v},expression:"result"}})],1)],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closedialog}},[_vm._v("Close")]),_vm.cardData?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save("update")}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)],1)},SmartCardSetupvue_type_template_id_8a8430b4_staticRenderFns=[],SmartCardSetupvue_type_script_lang_js={props:["visibility","cardData"],data:function(){return{result:null,dataTypes:["TEXT","BOOLEAN","NUMBER","DATE"],columns:"",errors:[],data:{style:{bgColor:"#fff",color:"#000"},columns:[{key:"",label:"",datatype:"TEXT",width:"20",merge:!0,mergeKey:null}],workflowV2String:'Map getTable(){\n            date = new NameSpace("date");\n            period = date.getDateRange("Today");\n            db = {\n              criteria: [createdTime == period]\n            };\n\n            workorder = Module("workorder").fetch(db);\n\n            returnValue = {};\n            dataList = [];\n            for each index,work in workorder {\n              val = {};\n              val["a"] = work.serialNumber;\n              val["b"] = work.subject;\n              val["c"] = work.createdTime;\n              val["d"] = work.noOfTasks;\n              dataList.add(val);\n            }\n            returnValue["data"] = dataList;\n            log ""+returnValue;\n            return returnValue;\n          }'}}},components:{CodeMirror:CodeMirror/* default */.Z},mounted:function(){this.cardData&&(this.data=this.cardData)},computed:{},methods:{addContions:function(){var emptyData={key:"a",label:"Name",datatype:"TEXT",width:"20",merge:!0,mergeKey:null};this.data.columns.push(emptyData)},deleteCondition:function(index){this.data.columns.splice(index,1)},submit:function(){var _this=this;this.setResult(""),this.$http.post("/v2/workflow/runWorkflow",{workflow:{workflowV2String:this.data.workflowV2String,isV2Script:!0}}).then((function(response){response.data.result.workflow.logString&&_this.setResult(response.data.result.workflow.logString),_this.setError(response.data.result.workflowSyntaxError)})).catch((function(){}))},setError:function(errors){this.errors=errors&&errors.errors||[],this.errors=errors&&errors.errors?errors.errors:[]},setResult:function(result){this.result=result},closedialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)},save:function(update){var valid=!0;valid?(this.$emit("update:visibility",!1),update?this.$emit("update",this.data):this.$emit("save",this.data)):this.$message.error("Please enter all the details !!")}}},components_SmartCardSetupvue_type_script_lang_js=SmartCardSetupvue_type_script_lang_js,SmartCardSetup_component=(0,componentNormalizer/* default */.Z)(components_SmartCardSetupvue_type_script_lang_js,SmartCardSetupvue_type_template_id_8a8430b4_render,SmartCardSetupvue_type_template_id_8a8430b4_staticRenderFns,!1,null,null,null)
/* harmony default export */,SmartCardSetup=SmartCardSetup_component.exports,CardBuildervue_type_template_id_a756eb9e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-header-hide overflow-y cardBuilder-dialog",attrs:{visible:!0,"custom-class":"card-builder-popup scale-up-center",width:_vm.popupWidth}},[_vm.loading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_vm.showCardTypes?_c("CardTypes",{ref:"cardTypePicker",attrs:{cardTypes:_vm.cardTypes,onSelect:_vm.onCardSelect,onClose:_vm.onClose}}):_vm.componentName?_c(_vm.componentName,{tag:"component",attrs:{isNew:!_vm.isEdit,cardMeta:_vm.selectedCard,savedCardData:_vm.cardData&&_vm.cardData.dataOptions,cardType:_vm.selectedCard.cardType,onCardSave:_vm.onSave,onCardUpdate:_vm.onUpdate,onGoBack:function(data){return _vm.onGoBack(_vm.selectedCard.cardType,data)},onClose:_vm.onClose,isDuplicate:_vm.isDuplicate,onCardDuplicate:_vm.onDuplicate}}):_vm._e()],1)},CardBuildervue_type_template_id_a756eb9e_staticRenderFns=[],CardTypesvue_type_template_id_0ed280ff_scoped_true_render=(__webpack_require__(762795),__webpack_require__(413383),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pT20 fc-card-builder-page-animation"},[_c("div",{staticClass:"header pL30 pR30"},[_c("span",{staticClass:"pointer",on:{click:_vm.switchToCardView}},[_vm.showLayoutView?_c("inline-svg",{staticClass:"vertical-top rotate-90 mR20",attrs:{src:"svgs/arrow",iconClass:"icon"}}):_vm._e()],1),_vm._v(" "+_vm._s(_vm.title)+" "),_c("span",{staticClass:"pointer",on:{click:_vm.onClose}},[_c("inline-svg",{staticClass:"vertical-middle fR",attrs:{src:"svgs/close",iconClass:"icon icon-sm"}})],1)]),_c("div",{staticClass:"pT20 pL30 pB40",class:["container",_vm.showLayoutView&&"card-type-container-bg"]},[_vm.showLayoutView?[_c("div",{staticClass:"flex-middle flex-wrap"},_vm._l(_vm.selectedCard.layouts,(function(layout){return _c("div",{key:layout.type,staticClass:"item layout-item pointer",on:{click:function($event){return _vm.onSelect(_vm.selectedCard.type,layout)}}},[_c("img",{style:layout.style?layout.style:"",attrs:{src:__webpack_require__(650566)("./"+layout.icon+".jpg"),iconClass:"icon layout-card-icon"}}),_c("div",{staticClass:"name fc-black-13 text-left"},[_vm._v(_vm._s(layout.name))])])})),0)]:_vm._l(_vm.cardTypes,(function(card){return _c("div",{key:card.type,staticClass:"item pointer",on:{click:function($event){return _vm.switchToLayoutView(card)}}},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:card.icon,iconClass:"icon icon-xxlg"}}),_c("div",{staticClass:"name fc-black-15"},[_vm._v(_vm._s(card.name))])],1)}))],2)])}),CardTypesvue_type_template_id_0ed280ff_scoped_true_staticRenderFns=[],CardTypesvue_type_script_lang_js={props:["onSelect","onClose","cardTypes"],data:function(){return{showLayoutView:!1,selectedCard:null}},computed:{title:function(){return this.showLayoutView?"Choose Layout":"Add Card"}},methods:{openLayoutView:function(defaultSelection){if(defaultSelection){var card=this.cardTypes.find((function(c){return c.type===defaultSelection}));(0,validation/* isEmpty */.xb)(card)||(this.showLayoutView=!0,this.selectedCard=card)}},switchToLayoutView:function(card){card.layouts&&1===card.layouts.length?this.onSelect(card.type,card.layouts[0]):(this.selectedCard=card,this.showLayoutView=!0)},switchToCardView:function(){this.showLayoutView=!1,this.selectedCard=null}}},components_CardTypesvue_type_script_lang_js=CardTypesvue_type_script_lang_js,CardTypes_component=(0,componentNormalizer/* default */.Z)(components_CardTypesvue_type_script_lang_js,CardTypesvue_type_template_id_0ed280ff_scoped_true_render,CardTypesvue_type_template_id_0ed280ff_scoped_true_staticRenderFns,!1,null,"0ed280ff",null)
/* harmony default export */,CardTypes=CardTypes_component.exports,CardLayoutMixinvue_type_script_lang_js={components:{gauge_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(17142)]).then(__webpack_require__.bind(__webpack_require__,829953))},gauge_layout_2:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(3164)]).then(__webpack_require__.bind(__webpack_require__,442243))},gauge_layout_3:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(38988)]).then(__webpack_require__.bind(__webpack_require__,232210))},gauge_layout_4:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(48828),__webpack_require__.e(8725)]).then(__webpack_require__.bind(__webpack_require__,348828))},gauge_layout_5:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(72586),__webpack_require__.e(59297)]).then(__webpack_require__.bind(__webpack_require__,772586))},gauge_layout_6:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(96879),__webpack_require__.e(33570),__webpack_require__.e(18508)]).then(__webpack_require__.bind(__webpack_require__,533570))},gauge_layout_7:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(96879),__webpack_require__.e(5020),__webpack_require__.e(22378),__webpack_require__.e(82612),__webpack_require__.e(86845)]).then(__webpack_require__.bind(__webpack_require__,182612))},readingcard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(99187)]).then(__webpack_require__.bind(__webpack_require__,39428))},readingcard_layout_2:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(53569),__webpack_require__.e(93195)]).then(__webpack_require__.bind(__webpack_require__,653569))},readingcard_layout_3:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(16817),__webpack_require__.e(48728)]).then(__webpack_require__.bind(__webpack_require__,216817))},readingcard_layout_4:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(30250),__webpack_require__.e(73993)]).then(__webpack_require__.bind(__webpack_require__,530250))},readingcard_layout_5:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(30250),__webpack_require__.e(16851)]).then(__webpack_require__.bind(__webpack_require__,892397))},readingCard6:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(17418),__webpack_require__.e(4943)]).then(__webpack_require__.bind(__webpack_require__,917418))},mapcard_layout_1:function(){return __webpack_require__.e(/* import() */16843).then(__webpack_require__.bind(__webpack_require__,216843))},datatable:function(){return __webpack_require__.e(/* import() */95025).then(__webpack_require__.bind(__webpack_require__,133719))},weathercard_layout_1:function(){return __webpack_require__.e(/* import() */52748).then(__webpack_require__.bind(__webpack_require__,52748))},carboncard_layout_1:function(){return __webpack_require__.e(/* import() */90356).then(__webpack_require__.bind(__webpack_require__,256642))},energycost_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(81625)]).then(__webpack_require__.bind(__webpack_require__,266385))},graphicalcard_layout_1:function(){return __webpack_require__.e(/* import() */31688).then(__webpack_require__.bind(__webpack_require__,178459))},energycard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(45219)]).then(__webpack_require__.bind(__webpack_require__,469895))},controlcard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(12440)]).then(__webpack_require__.bind(__webpack_require__,599885))},kpicard_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(96879),__webpack_require__.e(5020),__webpack_require__.e(22378),__webpack_require__.e(87492)]).then(__webpack_require__.bind(__webpack_require__,479374))},kpicard_layout_2:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(96879),__webpack_require__.e(5020),__webpack_require__.e(22378),__webpack_require__.e(8094)]).then(__webpack_require__.bind(__webpack_require__,938084))},pmreadings_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(93361),__webpack_require__.e(37797)]).then(__webpack_require__.bind(__webpack_require__,293361))},web_layout_1:function(){return __webpack_require__.e(/* import() */30556).then(__webpack_require__.bind(__webpack_require__,430556))},photos_layout_1:function(){return __webpack_require__.e(/* import() */18424).then(__webpack_require__.bind(__webpack_require__,18424))},table_layout_1:function(){return Promise.all(/* import() */[__webpack_require__.e(96879),__webpack_require__.e(9634),__webpack_require__.e(86080)]).then(__webpack_require__.bind(__webpack_require__,609634))},floorplan_layout_1:function(){return __webpack_require__.e(/* import() */91859).then(__webpack_require__.bind(__webpack_require__,391859))}},data:function(){return{cardTypes:[{type:"target",icon:"svgs/cardbuilder/targetcard",name:"Gauge",layouts:[{type:"TARGET1",component:"gauge_layout_1",icon:"target-meter1",name:"Gauge Layout 1",style:"width: 200px; height: 233px;"},{type:"TARGET2",component:"gauge_layout_2",icon:"target-meter2",name:"Gauge Layout 2",style:"width: 200px; height: 233px;"},{type:"TARGET3",component:"gauge_layout_3",icon:"target-meter3",name:"Gauge Layout 3",style:"width: 200px; height: 233px;"},{type:"TARGET4",component:"gauge_layout_4",icon:"target-meter4",name:"Gauge Layout 4",style:"width: 200px; height: 233px;"},{type:"TARGET5",component:"gauge_layout_5",icon:"target-meter6",name:"Gauge Layout 5",style:"width: 200px; height: 233px;"},{type:"TARGET6",component:"gauge_layout_6",icon:"target-meter-6",name:"Gauge Layout 6",style:"width: 200px; height: 233px;"},{type:"TARGET7",component:"gauge_layout_7",icon:"target-meter7",name:"Gauge Layout 7",style:"width: 200px; height: 233px;"}]},{type:"reading",icon:"svgs/cardbuilder/readingcard",name:"Reading",layouts:[{type:"READING1",component:"readingcard_layout_1",icon:"reading-card1",name:"Reading Card 1",style:"width: 250px; height: 205px;",styles:{popupWidth:"73%"}},{type:"READING2",component:"readingcard_layout_2",icon:"reading-card2",name:"Reading Card (With Baseline)",style:"width: 306px; height: 205px; border: 1px solid rgb(237, 243, 243);"},{type:"READING3",component:"readingcard_layout_3",icon:"reading-card-graph",name:"Reading Card 3",style:"width: 215px; height: 200px;"},{type:"READING4",component:"readingcard_layout_4",icon:"reading-card5",name:"Reading Card (With Multi-Aggregation)",style:"width: 100%;height: auto; border: 1px solid rgb(237, 243, 243);"},{type:"READING5",component:"readingcard_layout_5",icon:"reading-card4",name:"Reading Card (Multi-Asset)",style:"width: 100%; height: auto;border: 1px solid rgb(237, 243, 243);",styles:{popupWidth:"70%"}}]},{type:"map",icon:"svgs/cardbuilder/map",name:"Map",layouts:[{styles:{popupWidth:"70%"},type:"MAP1",component:"mapcard_layout_1",icon:"svgs/cardbuilder/map",name:"Map"}]},
// {
//   type: 'datatable',
//   icon: 'svgs/cardbuilder/default-icon',
//   name: 'Data Table',
//   layouts: [
//     {
//       type: 'TABLE1',
//       component: 'datatable',
//       icon: 'svgs/cardbuilder/default-icon',
//       name: 'Layout 1',
//     },
//   ],
// },
{type:"weather",icon:"svgs/cardbuilder/weather",name:"Weather",layouts:[{type:"WEATHER1",component:"weathercard_layout_1",icon:"svgs/cardbuilder/weather",name:"Weather Layout 1"}]},{type:"carbon",icon:"svgs/cardbuilder/carbon",name:"Carbon",layouts:[{type:"CARBON1",component:"carboncard_layout_1",icon:"svgs/cardbuilder/carbon",name:"Carbon Layout 1"}]},{type:"energy",icon:"svgs/cardbuilder/energy",name:"ENERGY",layouts:[{type:"ENERGYCARD1",component:"energycard_layout_1",icon:"svgs/cardbuilder/energy",name:"Energy Layout 1"}]},{type:"energyCost",icon:"svgs/cardbuilder/energyCost",name:"Energy Cost",layouts:[{type:"ENERGYCOST1",component:"energycost_layout_1",icon:"svgs/cardbuilder/energyCost",name:"Energy Cost Layout 1"}]},{type:"graphics",icon:"svgs/cardbuilder/livedata",name:"Live Data",layouts:[{type:"GRAPHICS1",component:"graphicalcard_layout_1",icon:"svgs/cardbuilder/livedata",name:"Live Data Layout 1"}]},{type:"control",icon:"svgs/cardbuilder/controls",name:"Control Command",layouts:[{type:"CONTROL1",component:"controlcard_layout_1",icon:"svgs/cardbuilder/controls",name:"Control Command Layout 1"}]},{type:"kpi",icon:"svgs/cardbuilder/kpi",name:"KPI",layouts:[{type:"KPICARD1",component:"kpicard_layout_1",style:"width: 300px; height: 220px;",icon:"reading-card1",name:"KPI Layout 1"},{type:"KPICARD2",component:"kpicard_layout_2",style:"width: 300px; height: 220px;",icon:"reading-card2",name:"KPI Layout 2"}]},{type:"pmreadings",icon:"svgs/cardbuilder/pm",name:"PM Readings",layouts:[{type:"PMREADINGS1",component:"pmreadings_layout_1",icon:"svgs/cardbuilder/pm",name:"PM Readings Layout 1"}]},{type:"web",icon:"svgs/cardbuilder/web",name:"Connected App",layouts:[{type:"WEB1",component:"web_layout_1",icon:"svgs/cardbuilder/web",name:"Connected App"}]},{type:"photos",icon:"svgs/cardbuilder/Photos",name:"Photos",layouts:[{type:"PHOTOS",component:"photos_layout_1",icon:"svgs/cardbuilder/Photos",name:"Photots Layout 1"}]},{type:"readingtable",icon:"svgs/cardbuilder/default-icon",name:"Reading Table",layouts:[{type:"READINGTABLE1",component:"table_layout_1",icon:"svgs/cardbuilder/default-icon",name:"Reading Table 1"}]},{type:"floorplan",icon:"svgs/cardbuilder/default-icon",name:"Floor Plan",layouts:[{type:"FLOORPLAN1",component:"floorplan_layout_1",icon:"svgs/cardbuilder/default-icon",name:"Floor Plan"}]}]}}},mixins_CardLayoutMixinvue_type_script_lang_js=CardLayoutMixinvue_type_script_lang_js,CardLayoutMixin_component=(0,componentNormalizer/* default */.Z)(mixins_CardLayoutMixinvue_type_script_lang_js,CardLayoutMixin_render,CardLayoutMixin_staticRenderFns,!1,null,null,null)
/* harmony default export */,CardLayoutMixin=CardLayoutMixin_component.exports,card_builder_CardBuildervue_type_script_lang_js={props:["cardData","isDuplicate"],mixins:[CardLayoutMixin],components:{CardTypes:CardTypes},data:function(){return{loading:!1,showCardTypes:!0,showCardConfig:!0,selectedCard:null,isEdit:!1}},created:function(){(0,validation/* isEmpty */.xb)(this.cardData)||this.init()},computed:{componentName:function(){if(!this.showCardTypes&&!(0,validation/* isEmpty */.xb)(this.selectedCard))return this.selectedCard.component},popupWidth:function(){return this.showCardTypes||(0,validation/* isEmpty */.xb)(this.selectedCard)?"64%":this.selectedCard.styles&&this.selectedCard.styles.popupWidth?this.selectedCard.styles.popupWidth:"70%"}},methods:{init:function(){var cardData=this.cardData;if(!(0,validation/* isEmpty */.xb)(cardData.dataOptions)){var cardLayout=cardData.dataOptions.cardLayout,layouts=this.cardTypes.map((function(type){return type.layouts.map((function(layout){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},layout),{},{parentType:type.type})}))})).flat(),selectedCard=layouts.find((function(layout){return layout.component===cardLayout}));(0,validation/* isEmpty */.xb)(selectedCard)||(this.isEdit=!0,this.onCardSelect(selectedCard.parentType,selectedCard))}},onCardSelect:function(cardType,layoutObj){this.showCardTypes=!1,this.selectedCard=(0,objectSpread2/* default */.Z)({cardType:cardType},layoutObj)},onGoBack:function(){var _this=this,selectedCardType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.selectedCard=null,this.showCardTypes=!0,this.isEdit&&this.onClose();var hasMultiLayout=((this.cardTypes.find((function(c){return c.type===selectedCardType}))||{}).layouts||[]).length>1;selectedCardType&&hasMultiLayout&&this.$nextTick((function(){var cardTypePicker=_this.$refs["cardTypePicker"];cardTypePicker&&cardTypePicker.openLayoutView(selectedCardType)}))},onSave:function(data,layout){this.$emit("save",data,layout)},onClose:function(){this.isEdit=!1,this.$emit("close")},onDuplicate:function(data,layout){this.$emit("duplicate",data,layout)},onUpdate:function(data,layout){this.isEdit=!1,this.$emit("update",data,layout)}}},pages_card_builder_CardBuildervue_type_script_lang_js=card_builder_CardBuildervue_type_script_lang_js,card_builder_CardBuilder_component=(0,componentNormalizer/* default */.Z)(pages_card_builder_CardBuildervue_type_script_lang_js,CardBuildervue_type_template_id_a756eb9e_render,CardBuildervue_type_template_id_a756eb9e_staticRenderFns,!1,null,null,null)
/* harmony default export */,card_builder_CardBuilder=card_builder_CardBuilder_component.exports,CardBuilderDashboardMixin=__webpack_require__(756974),CardWrapper=__webpack_require__(180531),router=__webpack_require__(329435),ComponentChooser=__webpack_require__(565304),DashboardComponentMixinsvue_type_script_lang_js={data:function(){return{showCompoents:!1,textcardData:null}},computed:{componentData:function(){var data={},newReportTree=this.newReportTree,reportTree=this.reportTree,supportedModules=this.supportedModules,customModuleList=this.customModuleList,graphicsList=this.graphicsList,getLicenseEnabledModules=this.getLicenseEnabledModules;return newReportTree&&newReportTree.length&&this.$set(data,"reports",newReportTree),reportTree&&reportTree.length&&this.$set(data,"reportTree",reportTree),supportedModules&&supportedModules.length&&this.$set(data,"supportedModules",supportedModules),customModuleList&&customModuleList.length&&this.$set(data,"customModuleList",customModuleList),graphicsList&&graphicsList.length&&this.$set(data,"graphicsList",graphicsList),getLicenseEnabledModules&&getLicenseEnabledModules.length&&this.$set(data,"getLicenseEnabledModules",getLicenseEnabledModules),data}},methods:{updatetextcard:function(data){this.textcardData=null,this.textcardData=data,this.isDraging=!1,this.showtextcard=!1},addtextcard:function(data){this.textcardData=null,this.textcardData=data,this.addNewelemnt(),this.isDraging=!1,this.showtextcard=!1},closetextcard:function(){this.textcardData=null,this.isDraging=!1,this.showtextcard=!1},addText:function(){var _this=this,d={key:"textcard",label:"Text card",w:48,h:24,optionName:"cards"};this.start(d),this.$nextTick((function(){_this.drop(),_this.$nextTick((function(){_this.dragend()}))}))},addImage:function(){var _this2=this,d={key:"imagecard",label:"Image card",w:24,h:24,optionName:"cards"};this.start(d),this.$nextTick((function(){_this2.drop(),_this2.$nextTick((function(){_this2.dragend()}))}))},addDashboardElement:function(data){var _this3=this;if(data){var index=this.dashboardLayout.length;data.forEach((function(element){element.optionName&&(_this3.option=element.optionName),_this3.start(element),_this3.drop(),_this3.$nextTick((function(){_this3.dragend()}))})),this.$message.success(this.$t("common._common.widget_added_successfully")),this.scrollToLatestWidget(index)}},scrollToLatestWidget:function(index){var _this4=this;this.$nextTick((function(){setTimeout((function(){for(var elements=document.getElementsByClassName("vue-grid-item"),i=index;i<_this4.dashboardLayout.length;i++)elements[i].style.boxShadow="0 2px 4px 4px rgb(219 232 14 / 50%)";document.getElementsByClassName("vue-grid-item")[index].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),_this4.countDownCss(index)}),800)}))},countDownCss:function(index){var _this5=this,countDown=4,count=setInterval((function(){countDown-=1;var elements=document.getElementsByClassName("vue-grid-item");if(4===countDown)for(var i=index;i<_this5.dashboardLayout.length;i++)elements[i].style.boxShadow="0 2px 4px 4px rgb(219 232 14 / 50%)";if(3===countDown)for(var _i=index;_i<_this5.dashboardLayout.length;_i++)elements[_i].style.boxShadow="0 2px 4px 3px rgb(219 232 14 / 50%)";if(2===countDown)for(var _i2=index;_i2<_this5.dashboardLayout.length;_i2++)elements[_i2].style.boxShadow="0 2px 4px 2px rgb(219 232 14 / 50%)";if(1===countDown)for(var _i3=index;_i3<_this5.dashboardLayout.length;_i3++)elements[_i3].style.boxShadow="0 2px 4px 1px rgb(219 232 14 / 50%)";if(0===countDown){for(var _i4=index;_i4<_this5.dashboardLayout.length;_i4++)elements[_i4].style.boxShadow="none";clearInterval(count)}}),500)},resetreportData:function(){this.newReportTree.forEach((function(folder){folder.reports.forEach((function(report){report.selected=!1}))})),this.reportTree.forEach((function(folder){folder.reports.forEach((function(report){report.selected=!1}))})),this.supportedModules.forEach((function(folder){folder.list.forEach((function(report){report.selected=!1}))})),this.customModuleList.forEach((function(folder){folder.list.forEach((function(report){report.selected=!1}))})),this.graphicsList.forEach((function(report){report.selected=!1}))},openDashboardCompoents:function(){this.showCompoents=!0},closeCompoent:function(){this.showCompoents=!1}}},DashboardCompoents_DashboardComponentMixinsvue_type_script_lang_js=DashboardComponentMixinsvue_type_script_lang_js,DashboardComponentMixins_component=(0,componentNormalizer/* default */.Z)(DashboardCompoents_DashboardComponentMixinsvue_type_script_lang_js,DashboardComponentMixins_render,DashboardComponentMixins_staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardComponentMixins=DashboardComponentMixins_component.exports,baseUrl=__webpack_require__(420499),WidgetHelpTextConfigvue_type_template_id_cc775f7c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"db-widget-filter-manager"},[_c("el-dialog",{staticClass:"db-widget-filter-manager-dialog",attrs:{visible:_vm.visibility,"show-close":!1,"append-to-body":!0,title:"Customize Help Text",width:"35%"}},[_c("div",{staticClass:"body"},[_c("el-checkbox",{staticClass:"mB20",staticStyle:{border:"none"},attrs:{label:"Show helptext cue in widgets"},model:{value:_vm.checkBoxModel,callback:function($$v){_vm.checkBoxModel=$$v},expression:"checkBoxModel"}}),_c("div",{staticClass:"mB15 help-text-title"},[_vm._v(" Help text ")]),_c("el-input",{staticClass:"fc-input-full-border-textarea width100 help-text-txt-area ",attrs:{type:"textarea",resize:"none",placeholder:_vm.$t("common._common.enter_desc")},model:{value:_vm.helpTextModel,callback:function($$v){_vm.helpTextModel=$$v},expression:"helpTextModel"}})],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveFilterConfig}},[_vm._v("Done")])],1)])],1)},WidgetHelpTextConfigvue_type_template_id_cc775f7c_staticRenderFns=[],utility_methods=__webpack_require__(773258),WidgetHelpTextConfigvue_type_script_lang_js={components:{},props:["visibility","widget"],created:function(){var widget=(0,utility_methods/* deepCloneObject */.kh)(this.widget),checkBoxModel=widget.widgetSettings.showHelpText,helpText=widget.helpText;this.checkBoxModel=checkBoxModel||!1,this.helpTextModel=helpText},data:function(){return{checkBoxModel:null,helpTextModel:null}},methods:{closeDialog:function(){this.$emit("update:visibility",!1)},saveFilterConfig:function(){var widget=(0,utility_methods/* deepCloneObject */.kh)(this.widget);widget.widgetSettings.showHelpText=this.checkBoxModel,widget.helpText=this.helpTextModel,this.$emit("helpTextChanged",widget)}}},widget_WidgetHelpTextConfigvue_type_script_lang_js=WidgetHelpTextConfigvue_type_script_lang_js,WidgetHelpTextConfig_component=(0,componentNormalizer/* default */.Z)(widget_WidgetHelpTextConfigvue_type_script_lang_js,WidgetHelpTextConfigvue_type_template_id_cc775f7c_render,WidgetHelpTextConfigvue_type_template_id_cc775f7c_staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetHelpTextConfig=WidgetHelpTextConfig_component.exports,DashboardEditervue_type_script_lang_js={mixins:[ReportHelper/* default */.Z,DateHelper/* default */.Z,DashboardHelper,CardBuilderDashboardMixin/* default */.Z,DashboardComponentMixins],props:["sites","currentDashboard"],components:{DashboardCompoents:ComponentChooser/* default */.Z,NewChartWidget:NewChartWidget/* default */.Z,NewListWidget:NewListWidget/* default */.Z,NewMapWidget:NewMapWidget/* default */.Z,NewPrebuiltWidget:NewPrebuiltWidget/* default */.Z,NewWebWidget:NewWebWidget/* default */.Z,FWidget:FWidget/* default */.Z,GridLayout:vue_grid_layout_common.GridLayout,GridItem:vue_grid_layout_common.GridItem,DashboardFilter:DashboardFilter/* default */.Z,FAddDataPoint:FAddDataPoint/* default */.Z,FPhotoUploader:FPhotoUploader,FCardBuilder:CardBuilder,FFcuCard:FCUCardDialog,FBooleanCardDialog:FBooleanCardDialog,FAlarmbarCardDialog:FAlarmBarCardDialog,kpiCardSetup:KFICardbuilderDialog,
// DashboardTabEditor,
DashbaordDialog:DashboardCardDialogs,TargetMeterDialog:TargetMeterDialog,kpiTargetCard:KPITargetMeterDialog,GaugeCardSetup:GaugeCardSetup,PmreadingCardSetup:PmreadingCardSetup,SmartMapSetup:SmartMapSetup,SmartTableSetup:SmartTableSetup,SmartTableWrapperSetup:SmartTableWrapperSetup,SmartCardSetup:SmartCardSetup,NewCardBuilder:card_builder_CardBuilder,CardWrapper:CardWrapper/* default */.Z,textCard:TextCardPopup/* default */.Z,DashboardTabDialogEditor:DashboardTabDialogEditor,DashboardTopTab:DashboardTopTab/* default */.Z,WidgetHelpTextConfig:WidgetHelpTextConfig},data:function(){return{render:!0,selectedModule:"Maintenance",colorMapSupported:{ENUM:"ENUM",BOOLEAN:"BOOLEAN",DECIMAL:"DECIMAL",NUMBER:"NUMBER"},folderLoading:!0,moduleName:"workorder",loading:!0,dialogVisible:!1,buildingCard:!1,gaugeSetup:!1,pmreadingsetup:!1,smartmapsetup:!1,smarttablesetup:!1,smarttablewrappersetup:!1,smartcardsetup:!1,showCardBuilderSetup:!1,targetMeterDialog:!1,editwidgetcalled:!1,editwidgetData:null,selectedWidgetId:-1,readingpopup:!1,webcardVisible:!1,ahupopup:!1,addreadingVisible:!1,addreadingVisible2:!1,addreadingVisible3:!1,selectedBuilding:null,dashboard:null,assets:[],AHUcardCatogry:"",AHUcard:{catogry:"",id:null},newdashboard:{label:null,linkName:""},readingCard:{title:"",mode:1,parentId:-1,legend:"sum",editmode:!1,parentName1:"",colorMap:!1,colorMapConfig:{},write:!1,readingType:-1,targetreading:{max:0,maxmode:"usetarget",readingName:"",targetmode:"constant",count:0,maxValue:0,maxPercentage:0,needMax:!1,parentName2:"",enableCenterText1:!0},aggregationFunc:3,readingName:"",operatorId:28,layout:{color:"",fontColor:""}},webUrl:null,rowHeight:100,dashboardLayout:[],deletlayout:[],webView:[],sharingDialogVisible:!1,removeChartList:[],dashbaordFolderName:"",selectedDashoardFolder:{id:-1,name:"default"},dashboardFolderList:[],convertedlayout:null,chartDeleted:!1,newDashboardData:[],buildings:[],tempBuildings:[],allBuildings:[],aggregateFunctions:[{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}],aggregateFunctions2:[{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"}],chartypes:[{type:"static",value:0},{type:"chart",value:1},{type:"list",value:2},{type:"view",value:2},{type:"map",value:3},{type:"web",value:4}],readingcardlegend:["Sum","Avg","Min","Max"],customModuleList:[],supportedModules:[{label:"Work Orders",value:"workorder",list:[],expand:!1,license:"MAINTENANCE"},{label:"Planned Maintenance",value:"preventivemaintenance",list:[],expand:!1},{label:"Alarms",value:this.$helpers.isLicenseEnabled("NEW_ALARMS")?"newreadingalarm":"alarm",list:[],expand:!1,license:"ALARMS"},{label:"Assets",value:"asset",list:[],expand:!1,license:"SPACE_ASSET"},{label:"Inventory Request",value:"inventoryrequest",list:[],expand:!1,license:"INVENTORY"},{label:"Item",value:"item",list:[],expand:!1,license:"INVENTORY"},{label:"Contracts",value:"contracts",list:[],expand:!1,license:"CONTRACT"},{label:"Purchaseorder",value:"purchaseorder",list:[],expand:!1,license:"PURCHASE"},{label:"Purchaserequest",value:"purchaserequest",list:[],expand:!1,license:"PURCHASE"},{label:"Visitor",value:"visitor",list:[],expand:!1,license:"VISITOR"},{label:"Custom module",value:"custom",list:[],expand:!1,license:"CONNECTEDAPPS"},{label:"Visits",value:"visitorlog",list:[],expand:!1,license:"VISITOR"},{label:"contact",value:"contact",list:[],expand:!1,license:"VISITOR"},{label:"Watchlist",value:"watchlist",list:[],expand:!1,license:"VISITOR"},{label:"Visitor invite",value:"invitevisitor",list:[],expand:!1,license:"VISITOR"},{label:"Tenants",moduleName:"tenant",list:[],expand:!1,license:"TENANTS"}],wocards:[{disbale:262!==this.$account.org.id&&"true",key:"kpiCard",childKey:"multiTrend",label:"Multi Trend",w:48,h:24},{disbale:(!this.$route.query||!this.$route.query.showallcards)&&"true",key:"kpiCard",childKey:"linearCard",label:"Linear Gauge Card",w:29,h:27},{disbale:(!this.$route.query||!this.$route.query.showallcards)&&"true",key:"kpiCard",childKey:"radialCard",label:"Radial Gauge Card",w:29,h:27},{key:"kpiCard",label:"KPI Card",w:12,h:12},{
// disbale:
//   this.$route.query && this.$route.query.showallcards
//     ? false
//     : 'true',
key:"kpiCard",childKey:"kpitargetCard",label:"Target KPI Card",w:24,h:24},{key:"textcard",label:"Text card",w:48,h:24},{key:"imagecard",label:"Image card",w:20,h:20},{key:"web",label:"Web Card",w:48,h:24}],cards:[{disbale:146===this.$account.org.id&&"true",key:"kpiCard",childKey:"smarttable",label:"Smart Table",w:24,h:12},
// {
//   disbale: this.$account.org.id !== 146 ? false : 'true',
//   key: 'kpiCard',
//   childKey: 'smarttablewrapper',
//   label: 'Smart Table Wrapper',
//   w: 24,
//   h: 12,
// },
{disbale:146===this.$account.org.id&&"true",key:"kpiCard",childKey:"smartcard",label:"Smart Card",w:24,h:12},{disbale:(!this.$route.query||!this.$route.query.showallcards)&&"true",key:"kpiCard",childKey:"smartnewmap",label:"Smart New Map",w:24,h:12},{key:"kpiCard",childKey:"pmreadingswidget",label:"Pm Readings Widget",w:24,h:12},{disbale:(!this.$route.query||!this.$route.query.showallcards)&&"true",key:"kpiCard",childKey:"smartenergymap",label:"Smart Energy Map",w:24,h:12},{disbale:(!this.$route.query||!this.$route.query.showallcards)&&"true",key:"kpiCard",childKey:"smartmap",label:"Smart Map",w:24,h:12},{disbale:(!this.$route.query||!this.$route.query.showallcards)&&"true",key:"kpiMultiResultCard",label:"KPI Multi Result Card",w:12,h:12},{
// disbale:
//   this.$route.query && this.$route.query.showallcards
//     ? false
//     : 'true',
disbale:146===this.$account.org.id&&"true",key:"resourceAlarmBar",label:"Boolean Card",w:12,h:12},{disbale:146===this.$account.org.id&&"true",key:"alarmbarwidget",label:"Alarm Card",w:12,h:12},{disbale:169!==this.$account.org.id&&"true",key:"emrillFcu",label:"FCU Status",w:20,h:16},{disbale:169!==this.$account.org.id&&"true",key:"emrillFcuList",label:"FCU List",w:48,h:16},{
// disbale: (this.$route.query && this.$route.query.showallcards) ? false : 'true',
key:"readingComboCard",label:"Card builder",w:12,h:12},{key:"readingcard",label:"Reading card",w:16,h:12},{disbale:(!this.$route.query||!this.$route.query.showallcards)&&"true",key:"kpiCard",childKey:"targetmeter",label:"Target Meter",w:24,h:24},{key:"textcard",label:"Text card",w:48,h:24},{key:"imagecard",label:"Image card",w:20,h:20},{key:"web",label:"Web",w:48,h:24},{disbale:135!==this.$account.org.id&&"true",key:"fahuStatusCard",label:"AHU Status",w:12,h:12},{disbale:146!==this.$account.org.id&&"true",key:"fahuStatusCardNew",label:"AHU Status",w:12,h:12},{disbale:(!this.$route.query||!this.$route.query.showallcards||135===this.$account.org.id)&&"true",key:"fahuStatusCard3",label:"AHU Status",w:12,h:12},{disbale:133!==this.$account.org.id&&"true",key:"fahuStatusCard1",label:"AHU Status",w:12,h:12},{key:"weathermini",label:"Weather",w:24,h:12},{key:"kpiCard",childKey:"carbonmini",label:"Carbon Emission",w:24,h:12},{key:"kpiCard",childKey:"energycostmini",label:"Energy cost",w:24,h:12},{key:"kpiCard",childKey:"controlCommandmini",label:"Control Command",w:24,h:12},{key:"kpiCard",childKey:"profilemini",label:"Energy",w:24,h:12}],staticWidgets:[{key:"profilecard",label:"Profile Card",w:24,h:24},{key:"energycard",label:"Energy Card",w:24,h:24},{key:"energycost",label:"Energy Cost",w:24,h:24},{key:"energycostaltayer",label:"Energy Saving",w:24,h:24},{key:"weathercard",label:"Weather Card",w:24,h:24},{key:"weathercardaltayer",label:"Weather saving Card",w:24,h:24},{key:"workordersummary",label:"Workorder Summary",w:24,h:32},{key:"categories",label:"Categories",w:24,h:32},{key:"technicians",label:"Technicians",w:24,h:32},{key:"closedwotrend",label:"Closed WO Trend",w:24,h:32},{key:"mywosummary",label:"My Workorder Summary",w:24,h:32},{key:"openalarms",label:"Open Alarms",w:24,h:32},{key:"buildingopenalarms",label:"Building Open Alarms",w:24,h:32},{key:"mapwidget",label:"Site Map Widget",w:64,h:32},{key:"buildingmapwidget",label:"Building Map Widget",w:64,h:32},{key:"sampleppm",label:"PPM Low to Moderate Risk Scoresheet",w:96,h:32},{key:"utsdata",label:"uts",w:96,h:40},{disbale:169!==this.$account.org.id&&"true",key:"emrillFcu",label:"FCU Status",w:20,h:16},{disbale:169!==this.$account.org.id&&"true",key:"emrillFcuList",label:"FCU List",w:48,h:16}],emptywidget:!1,isDraging:!1,shareTo:2,showkpiCard:!1,showkpitargetCard:!1,sharedUsers:[],sharedRoles:[],sharedGroups:[],viewList:[],collapseSidebar:!1,reportTree:[],newReportTree:[],dashboardlength:0,option:"report",temp:{dis:"",label:""},list2:[{widget:{layout:{width:null,position:1,height:650},header:{subtitle:"today",title:"Open Workorders by Team",export:!0},dataOptions:{dataurl:"/dashboard/getData?reportId=231",refresh_interval:100,reportId:231,name:"dummy",type:"stackedbar"},type:"chart"},label:"Open Workorders by Team"}],modules:[{label:"Maintenance",moduleName:"workorder",license:"MAINTENANCE"},{label:"Fault detection and diagnostics",moduleName:"alarm",license:"ALARMS"},{label:"Building performance",moduleName:"energydata",license:"ENERGY"},{label:"Asset",moduleName:"asset",license:"SPACE_ASSET"},{label:"Inventory Request",moduleName:"inventoryrequest",list:[],expand:!1,license:"INVENTORY"},{label:"Item",moduleName:"item",list:[],expand:!1,license:"INVENTORY"},{label:"Contracts",moduleName:"contracts",list:[],expand:!1,license:"CONTRACT"},{label:"Purchaseorder",moduleName:"purchaseorder",list:[],expand:!1,license:"PURCHASE"},{label:"Purchaserequest",moduleName:"purchaserequest",list:[],expand:!1,license:"PURCHASE"},{label:"Visitor",moduleName:"visitor",list:[],expand:!1,license:"VISITOR"},{label:"Custom module",moduleName:"custom",list:[],expand:!1,license:"CONNECTEDAPPS"},{label:"Visits",moduleName:"visitorlog",list:[],expand:!1,license:"VISITOR"},{label:"contact",moduleName:"contact",list:[],expand:!1,license:"VISITOR"},{label:"Watchlist",moduleName:"watchlist",list:[],expand:!1,license:"VISITOR"},{label:"Visitor invite",moduleName:"invitevisitor",list:[],expand:!1,license:"VISITOR"},{label:"Tenants",moduleName:"tenant",list:[],expand:!1,license:"TENANTS"}],dragedElement:"test",showAvatarUpload:!1,showtextcard:!1,showCardBuilder:!1,avatarDataUrl:null,imagecardData:null,params:{userId:0},headers:{Authorization:""},imageUploadUrl:null,currentModuleName:null,graphicsList:null,connectedAppWidgetList:null,dashboardTabContexts:null,dashboardTabLoading:null,dashboardTabsList:null,selectedTabId:null,showTemplateReportDialog:!1,currentTemplateReportId:null,dashboardTabEditorVisibility:!1,showWidgetHelpTextConfig:!1,widgetForHelpTextConfig:null}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groups:function(state){return state.groups},users:function(state){return state.users},roles:function(state){return state.roles}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{getLicenseEnabledModules:function(){var _this=this;return this.modules.filter((function(module){if(_this.$helpers.isLicenseEnabled(module.license))return module}))},dashboardLink:function(){var dashboardlink=this.$attrs.dashboardlink||this.$route.params.dashboardlink;return["residentialbuildingdashboard","commercialbuildingdashboard"].includes(dashboardlink)?"buildingdashboard":dashboardlink},buildingId:function(){return this.$attrs.buildingid||this.$route.params.buildingid},editMode:function(){return!0},getHeight:function(){return"height:"+(window.appConfig&&window.appConfig.isTvMode?window.appConfig.height+"px;":"80vh;")},margin:function(){return document.getElementsByClassName("layout-page")[0].offsetWidth/100},height:function(){if(this.collapseSidebar)
// return (document.getElementsByClassName('layout-page')[0].offsetWidth / 96) - ((document.getElementsByClassName('layout-page')[0].offsetWidth / 96) / 3)
return document.getElementsByClassName("layout-page")[0].offsetWidth/1e4;var width=document.getElementsByClassName("layout-page")[0].offsetWidth-document.getElementsByClassName("layout-page")[0].offsetWidth/4+60;return width/1e4},mode:function(){return this.$route.query&&"new"===this.$route.query.create?"new":"edit"},dashboardTabId:function(){return this.$route.query&&this.$route.query.tab?parseInt(this.$route.query.tab):null},newLayout:function(){return!!this.$helpers.isLicenseEnabled("NEW_LAYOUT")},canShowNewCardBuilder:function(){return!0}}),created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadUsers")},mounted:function(){this.$helpers.isLicenseEnabled("NEW_LAYOUT")||(this.moduleName=this.getCurrentModule().module),this.initData(),this.loadNewDashboardFoler(),this.$helpers.isLicenseEnabled("GRAPHICS")&&this.loadGraphicsList()},beforeDestroy:function(){this.beforeDestroyHook()},watch:{dashboardLink:function(){this.loadFolder("watch")},buildingId:function(){this.loadFolder("watch")},$route:function(){this.openFirstReport()},dashboardTabId:function(){this.dashboardLayouts[this.dashboardTabId]?this.dashboardLayout=this.dashboardLayouts[this.dashboardTabId]:this.loadDashboardTabWidgets()}},methods:{handleHelpTextChange:function(widgetToChange){
//To do: Handle for tabbed Dbs also
if(
// done to avoid prop mutation
// Widget text edit component emits ,widget obj with helptext and settings
// find same widget obj in layouyt and mutate it here
this.showWidgetHelpTextConfig=!1,this.dashboardLayout){var gridItem=this.dashboardLayout.find((function(e){return(null===e||void 0===e?void 0:e.widget.id)==widgetToChange.id}));null!==gridItem&&void 0!==gridItem&&gridItem.widget&&(gridItem.widget.widgetSettings=widgetToChange.widgetSettings,gridItem.widget.helpText=widgetToChange.helpText)}},openHelpTextConfig:function(widget){this.widgetForHelpTextConfig=widget,this.showWidgetHelpTextConfig=!0},cardbuilderadd:function(){var _this2=this,templateJson={key:"kpiCard",childKey:"cardbuilder",label:"Card Builder",w:24,h:12};this.option="cards",this.start(templateJson),this.$nextTick((function(){_this2.drop()}))},setModuleName:function(name){
// let moduleName = this.modules.find(rt => rt.label === name).moduleName
this.moduleName=name,Promise.all([this.loadNewReportTree(),this.loadReportTree(!0)]).then((function(){}))},getModuleSpacificCards:function(){return"workorder"===this.moduleName?this.wocards:this.moduleName.indexOf("energy")>-1?this.cards:this.wocards},initData:function(){var self=this;self.loading=!0;var baseURL=(0,baseUrl/* getBaseURL */.BS)()?(0,baseUrl/* getBaseURL */.BS)():document.location.origin+"/api";-1===baseURL.indexOf("http")&&(baseURL=document.location.protocol+"//"+baseURL),this.imageUploadUrl=baseURL+"/widget/addPhoto",this.currentModuleName="workorder",// ******** need update
Promise.all([this.loadNewReportTree(),this.loadReportTree(),this.getAllbuildings(),this.getFullbuildings()]).then((function(){self.loadFolder(),self.loading=!1})),
// this.moduleViews()
this.dashbaordScreen()},resizecontrol:function(item){if(this.editMode){if("card"===item.widget.type){var cardContext=this.$getProperty(item,"widget.dataOptions",null);return!(0,validation/* isEmpty */.xb)(cardContext)&&this.canResizeCard(cardContext)}return!("static"===item.widget.type&&!this.allowResizewidget(item.widget.dataOptions.staticKey))&&!("cards"===item.widget.type&&!this.allowResizewidget(item.widget.dataOptions.staticKey))}},allowResizewidget:function(key){return!!key&&("textcard"===key||("imagecard"===key||("web"===key||("readingComboCard"===key||("kpiCard"===key||("emrilllevel"===key||("emrilllevel1List"===key||("emrilllevel2List"===key||("emrilllevel3List"===key||("emrillFcuList"===key||("resourceAlarmBar"===key||("alarmbarwidget"===key||("kpiMultiResultCard"===key||key.indexOf("tempcard")>-1)))))))))))))},getAllbuildings:function(){var _this3=this,self=this,params={};return new Promise((function(resolve){var currentModule={module:_this3.moduleName},url="/report/energy/portfolio/getAllBuildings";"workorder"!==currentModule.module&&"alarm"!==currentModule.module||(url="/report/alarms/getAllBuildings"),self.$http.post(url,params).then((function(response){"energydata"===currentModule.module?(self.buildings=response.data.reportData.buildingDetails,self.tempBuildings=response.data.reportData.buildingDetails,resolve(response)):self.buildings=response.data})).catch((function(){}))}))},getFullbuildings:function(){var _this4=this,self=this,params={};return new Promise((function(resolve){var currentModule=_this4.moduleName,url="/report/alarms/getAllBuildings";self.$http.post(url,params).then((function(response){"energydata"===currentModule.module?(self.allBuildings=response.data,resolve(response)):self.allBuildings=response.data})).catch((function(){}))}))},loadReportTree:function(loadOnlyTree){var self=this,moduleName=this.moduleName;this.reportLoading=!0,"energy"===moduleName&&(moduleName="energyData"),"custom"!==moduleName&&self.$http.get("/report/workorder/getAllWorkOrderReports?moduleName="+moduleName).then((function(response){var data=response.data.allWorkOrderJsonReports,treeData=data.map((function(d){if(d.expand=!1,d.reports.forEach((function(rt){rt.selected=!1,rt.disabled=!1})),self.$route.params.reportid){var reportId=parseInt(self.$route.params.reportid),report=d.children.find((function(rt){return rt.widget.dataOptions.reportId===reportId}));report&&(d.expand=!0)}return d}));self.reportTree=treeData.filter((function(row){return"Default"!==row.label&&"Old Reports"!==row.label})),self.openFirstReport(),self.loading=!1,self.reportLoading=!1})).catch((function(error){error&&(self.loading=!1)})),!0!==loadOnlyTree&&"new"!==this.mode&&this.loadFolder("watch")},loadNewReportTree:function(){var self=this;this.reportLoading=!0;var moduleName=this.moduleName;"energy"===moduleName?moduleName="energyData":"newreadingalarm"!==moduleName&&"bmsalarm"!==moduleName||(moduleName="alarm");var url="/v3/report/folders?moduleName="+moduleName;"custom"===moduleName&&(url="v3/report/folders?moduleName=custommodule"),api/* API */.bl.get(url).then((function(resp){if(!resp.error){var data=resp.data.reportFolders,treeData=data.map((function(d){if(d.expand=!1,d.reports.forEach((function(rt){rt.selected=!1,rt.disabled=!1})),self.$route.params.reportid){var reportId=parseInt(self.$route.params.reportid),report=d.reports.find((function(rt){return rt.id===reportId}));report&&(d.expand=!0)}return d}));self.newReportTree=treeData,self.openFirstReport(),self.reportLoading=!1}}))},moduleViews:function(){for(var _this5=this,self=this,_loop=function(i){self.supportedModules[i].value&&"custom"!==self.supportedModules[i].value&&(self.supportedModules[i].license&&_this5.$helpers.isLicenseEnabled(self.supportedModules[i].license)?self.$http.get("/view?moduleName="+self.supportedModules[i].value).then((function(response){self.supportedModules[i].list=response.data.views,self.supportedModules[i].list.forEach((function(rt){self.$set(rt,"selected",!1),self.$set(rt,"disabled",!1)}))})):self.supportedModules[i].license||self.$http.get("/view?moduleName="+self.supportedModules[i].value).then((function(response){self.supportedModules[i].list=response.data.views,self.supportedModules[i].list.forEach((function(rt){self.$set(rt,"selected",!1),self.$set(rt,"disabled",!1)}))})))},i=0;i<self.supportedModules.length;i++)_loop(i);this.customModuleList=[],this.$http("/v2/module/list").then((function(response){var moduleList=response.data.result.moduleList;if(!(0,validation/* isEmpty */.xb)(moduleList)){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(moduleList);try{var _loop2=function(){var cmodule=_step.value,custom={label:cmodule.displayName,value:cmodule.name,list:[],expand:!1,license:"CONNECTEDAPPS"};self.$http.get("/view?moduleName="+cmodule.name).then((function(response){response.data.views&&(custom.list=response.data.views,custom.list.forEach((function(rt){rt.selected=!1,rt.disabled=!1})),self.customModuleList.push(custom))}))};for(_iterator.s();!(_step=_iterator.n()).done;)_loop2()}catch(err){_iterator.e(err)}finally{_iterator.f()}}}))},deletedashboard:function(){var self=this,data={dashboardId:this.dashboard.id};self.$dialog.confirm({title:"Delete Dashboard",message:"Are you sure you want to delete this Dashboard?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&self.$http.post("/dashboard/deleteDashboard",data).then((function(){self.$message({message:"Dashboard deleted successfully!",type:"success"}),self.$router.go(-1)}))}))},loadSharing:function(){var self=this;self.dashboard?self.$http.get("/dashboardsharing/"+self.dashboard.id).then((function(response){if(response.data.dashboardSharing)if(0===response.data.dashboardSharing.length)self.shareTo=2;else{self.sharedUsers=[],self.sharedRoles=[],self.sharedGroups=[];for(var i=0;i<response.data.dashboardSharing.length;i++){var dashboardSharing=response.data.dashboardSharing[i];1===dashboardSharing.sharingType?self.sharedUsers.push(dashboardSharing.orgUserId):2===dashboardSharing.sharingType?self.sharedRoles.push(dashboardSharing.roleId):3===dashboardSharing.sharingType&&self.sharedGroups.push(dashboardSharing.groupId)}1===response.data.dashboardSharing.length&&1===self.sharedUsers.length&&self.sharedUsers[0]===self.getCurrentUser().ouid?self.shareTo=1:self.shareTo=3}self.sharingDialogVisible=!0})):self.$message({message:"Please Save The Dashboard",type:"error"})},updatewidget:function(){},getIndex:function(index){return index},applySharing:function(){var self=this,dashboardSharing=[];if(1===self.shareTo)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});else if(3===self.shareTo){if(self.sharedUsers.length>0){dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});for(var i=0;i<self.sharedUsers.length;i++)self.sharedUsers[i]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[i]})}if(self.sharedRoles.length>0)for(var _i=0;_i<self.sharedRoles.length;_i++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:2,roleId:self.sharedRoles[_i]});if(self.sharedGroups.length>0)for(var _i2=0;_i2<self.sharedGroups.length;_i2++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:3,groupId:self.sharedGroups[_i2]})}self.$http.post("/dashboardsharing/apply",{dashboardId:self.dashboard.id,dashboardSharing:dashboardSharing}).then((function(){self.$message({message:"Sharing applied successfully!",type:"success"}),self.sharingDialogVisible=!1}))},loadDashboard:function(){var query=this.$route.query,_ref=query||{},appId=_ref.appId,self=this;self.loading=!0,self.dashboardLayout=null;var url="/dashboard/"+this.dashboardLink;this.$helpers.isLicenseEnabled("NEW_LAYOUT")?this.dashboardLink.includes("buildingdashboard")?(url+="?moduleName=energydata",self.siteId?url+="&siteId="+self.siteId:self.buildingId&&(url+="&buildingId="+self.buildingId)):self.siteId?url+="?siteId="+self.siteId:self.buildingId&&(url+="?buildingId="+self.buildingId):(url+="?moduleName="+this.getCurrentModule().module,self.siteId?url+="&siteId="+self.siteId:self.buildingId&&(url+="&buildingId="+self.buildingId)),self.$http.get(url).then((function(response){if(self.dashboard=response.data.dashboardJson[0],self.backupDashboard=self.$helpers.cloneObject(response.data.dashboardJson[0]),self.dashboard.tabEnabled&&(self.dashboardOptions.showTabs=self.dashboard.tabEnabled),-1===self.dashboard.dashboardTabPlacement?self.dashboardOptions.dashboardTabPlacement=2:self.dashboardOptions.dashboardTabPlacement=self.dashboard.dashboardTabPlacement,response.data.dashboardJson[0].tabs&&response.data.dashboardJson[0].tabs.length>0){self.dashboardTabContexts=response.data.dashboardJson[0].tabs,self.dashboardTabsList=[];var _query={create:self.$route.query.create,tab:self.dashboardTabContexts[0].id};(0,validation/* isEmpty */.xb)(appId)||(_query.appId=appId),self.dashboardTabId||self.$router.replace({path:self.$route.path,query:_query});var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.dashboardTabContexts);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var tab=_step2.value;if(self.dashboardTabsList.push({id:tab.id,name:tab.name,expand:!1}),tab.childTabs&&tab.childTabs.length>0){var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(tab.childTabs);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var childTab=_step3.value;self.dashboardTabsList.push({id:childTab.id,name:childTab.name})}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}self.loadDashboardTabWidgets()}else{self.dashboardTabContexts=null;var _query2={create:self.$route.query.create};(0,validation/* isEmpty */.xb)(appId)||(_query2.appId=appId),self.$router.replace({path:self.$route.path,query:_query2})}self.prepareDashboardLayout(),"edit"===self.mode&&self.dashboardFolderList.length&&(self.selectedDashoardFolder=self.dashboardFolderList.find((function(rt){return rt.id===self.dashboard.dashboardFolderId})),self.dashbaordFolderName=self.selectedDashoardFolder&&self.selectedDashoardFolder.name?self.selectedDashoardFolder.name:""),self.loading=!1}))},changeDashboardTabId:function(id){id&&id>0&&this.dashboardTabId!==id&&(this.$set(this.dashboardLayouts,this.dashboardTabId,this.dashboardLayout),this.$router.replace({path:this.$route.path,query:{create:this.$route.query.create,tab:id}}))},loadDashboardTabWidgets:function(){var _this6=this;this.copyallWidgets&&this.newDashboardTabName&&this.dashboardOptions.showTabs||this.dashboardTabId&&(this.selectedTabId=this.dashboardTabId,this.dashboardTabLoading=!0,this.$http.get("/dashboard/getTabWidgets?dashboardTabId="+this.dashboardTabId).then((function(response){if(response.data.dashboardTabContext){var dashboard=response.data.dashboardTabContext.clientWidgetJson;_this6.$set(_this6.dashboard,"children",dashboard),_this6.prepareDashboardLayout(),_this6.$emit("dashboardobj",_this6.dashboard)}else _this6.$route.replace(_this6.$route.path);_this6.dashboardTabLoading=!1})).catch((function(){_this6.dashboardTabLoading=!1})))},loadNewDashboardFoler:function(){var query=this.$route.query,_ref2=query||{},appId=_ref2.appId,self=this,moduleName=this.moduleName;"energy"===moduleName&&(moduleName="energyData"),this.folderLoading=!0;var url="/dashboard/getDashboardFolder";!(0,validation/* isEmpty */.xb)(appId)&&appId>0&&(url+="?appId="+appId),this.$helpers.isLicenseEnabled("NEW_LAYOUT")||(url+="?moduleName="+moduleName),self.$http.get(url).then((function(response){self.dashboardFolderList=response.data.dashboardFolders,"new"===self.mode&&self.setDefaultDashboard(),self.folderLoading=!1}))},prepareDashboardLayout:function(){for(var self=this,layout=[],tx=0,i=0;i<self.dashboard.children.length;i++){
// Sections / Groups are not support in old dashboard
var type=self.dashboard.children[i].widget.type;if("section"!=type){tx+self.dashboard.children[i].widget.layout.width>96&&(tx=0);var x=1*(self.dashboard.children[i].widget.layout.x?self.dashboard.children[i].widget.layout.x:0),y=1*(self.dashboard.children[i].widget.layout.y?self.dashboard.children[i].widget.layout.y:0);layout.push({i:self.dashboard.children[i].widget.id+"",x:1*x,y:1*y,w:1*self.dashboard.children[i].widget.layout.width,h:1*self.dashboard.children[i].widget.layout.height,widget:self.dashboard.children[i].widget,minW:self.getMinW(self.dashboard.children[i].widget.type,self.dashboard.children[i].widget),minH:self.getMinH(self.dashboard.children[i].widget.type,self.dashboard.children[i].widget)}),tx+=1*self.dashboard.children[i].widget.layout.width}}self.dashboardLayout=layout,self.dashboardlength=self.dashboardLayout.length>0?self.dashboardLayout.length:0},getMinW:function(type,widget){if(this.newDashboardData&&this.newDashboardData.widget&&this.newDashboardData.widget.dataOptions&&this.newDashboardData.widget.dataOptions.type&&"boolean"===this.newDashboardData.widget.dataOptions.type)return 4;if(widget&&widget.dataOptions&&widget.dataOptions.staticKey){if("textcard"===widget.dataOptions.staticKey)return 4;if("imagecard"===widget.dataOptions.staticKey)return 4;if("web"===widget.dataOptions.staticKey)return 4;if("readingComboCard"===widget.dataOptions.staticKey)return 4}if(type){var width=24;switch(type){case"chart":width=32;break;case"static":width=24;break;case"view":width=48;break;case"list":width=40;break;case"map":width=56;break;case"web":width=32;break;case"connectedapps":width=32;break;case"graphics":width=96;break;default:width=32;break}return width}return 24},getMinH:function(type,widget){if(this.newDashboardData&&this.newDashboardData.widget&&this.newDashboardData.widget.dataOptions&&this.newDashboardData.widget.dataOptions.type&&"boolean"===this.newDashboardData.widget.dataOptions.type)return 4;if(widget&&widget.dataOptions&&widget.dataOptions.staticKey){if("textcard"===widget.dataOptions.staticKey)return 4;if("imagecard"===widget.dataOptions.staticKey)return 4;if("web"===widget.dataOptions.staticKey)return 4;if("readingComboCard"===widget.dataOptions.staticKey)return 4}if(type){var height=24;switch(type){case"chart":height=24;break;case"static":height=32;break;case"view":height=32;break;case"list":height=32;break;case"map":height=32;break;case"buildingcard":height=24;break;case"web":height=32;break;case"connectedapps":height=32;break;case"graphics":height=45;break;default:height=32;break}return height}return 32},saveEditDashboard:function(){var _this7=this,self=this,foldername={Analytics:"Analytics","Fault diagnosis":"Fault diagnosis",Maintenance:"Maintenance",default:"default"};if(0!==self.supportedModules.length){var data={dashboard:{dashboardName:this.newdashboard.label,moduleId:this.$helpers.isLicenseEnabled("NEW_LAYOUT")?this.supportedModules.find((function(row){return"workorder"===row.name})).moduleId:"custom"!==this.moduleName?this.supportedModules.find((function(row){return row.name===_this7.moduleName})).moduleId:this.supportedModules.find((function(row){return"asset"===row.name})).moduleId,dashboardFolderId:this.selectedDashoardFolder&&this.selectedDashoardFolder.id?this.selectedDashoardFolder.id:this.dashboardFolderList.find((function(rt){return foldername[rt.name]}))?this.dashboardFolderList.find((function(rt){return foldername[rt.name]})).id:-1}};this.selectedDashoardFolder&&this.selectedDashoardFolder.name&&(this.dashbaordFolderName=this.selectedDashoardFolder.name),
// if (
//   this.dashboardFolderList.length &&
//   this.dashboardFolderList.find(
//     rt => rt.name === this.dashbaordFolderName
//   )
// ) {
//   let item = this.dashboardFolderList.find(
//     rt => rt.name === this.dashbaordFolderName
//   )
//   this.dashbaordFolderName = item.name
//   this.selectedDashoardFolder = item
// }
this.addDashboardFolder(data)}},savefolderandDashboard:function(data,mode,dashboardObj,dashboard){var self=this,reportFolderObj={name:this.dashbaordFolderName},moduleName=this.$helpers.isLicenseEnabled("NEW_LAYOUT")?"workorder":self.getCurrentModule().module;self.$http.post("dashboard/addDashboardFolder?moduleName="+moduleName,{dashboardFolderContext:reportFolderObj}).then((function(response){data.dashboard.dashboardFolderId=response.data.dashboardFolderContext.id,"edit"===mode&&dashboardObj&&dashboard?(dashboardObj.dashboardMeta.dashboardFolderId=response.data.dashboardFolderContext.id,self.updateDashboardapi(dashboardObj,dashboard)):self.saveDashboard(data)})).catch((function(){self.$message({message:"Dashboard Folder not saved",type:"error"})}))},addDashboardFolder:function(data){var dashboardname=[],self=this;dashboardname.push(this.dashbaordFolderName),
// if ((dashboardname[0].replace(/\s/g, '').length > 0) && this.dashboardFolderList.filter(rt => rt.name === self.dashbaordFolderName).length === 0) {
//   delete data.dashboardFolderId
//   this.selectedDashoardFolder = null
// }
null===this.selectedDashoardFolder&&dashboardname[0].replace(/\s/g,"").length>0?(data.dashboardFolderId&&delete data.dashboardFolderId,this.savefolderandDashboard(data)):null===this.selectedDashoardFolder&&0===dashboardname[0].replace(/\s/g,"").length?(data.dashboardFolderId&&delete data.dashboardFolderId,this.saveDashboard(data)):this.selectedDashoardFolder&&dashboardname[0].replace(/\s/g,"").length>0&&this.dashboardFolderList.filter((function(rt){return rt.name===self.dashbaordFolderName})).length>0?(data.dashboard.dashboardFolderId=this.selectedDashoardFolder.id,this.saveDashboard(data)):this.selectedDashoardFolder&&dashboardname[0].replace(/\s/g,"").length>0&&0===this.dashboardFolderList.length&&this.saveDashboard(data)},loadSupportedModules:function(){var self=this;if(this.validateFolder()){this.dashboardSave=!0;var url="/dashboard/supportedmodules";this.$http.get(url).then((function(response){response.data.modules&&(self.supportedModules=response.data.modules,self.saveEditDashboard())}))}},saveDashboard:function(data){var self=this;null!==data.dashboard.dashboardName&&null!==data.dashboard.dashboardName?self.$http.post("/dashboard/add",data).then((function(response){self.$message({message:"Dashboard created successfully!",type:"success"}),self.newdashboard.linkName=response.data.dashboard.linkName,self.loadNewDb(response.data.dashboard)})):self.$message({message:"Please Enter The Dashboard Name!",type:"error"})},loadNewDb:function(dashboard){var self=this;
// self.prepareDashboardLayout()
self.saveEdit(dashboard,"load")},loadNewDashboard:function(link){var self=this;self.loading=!0,self.$http.get("/dashboard/"+link).then((function(response){self.dashboard=response.data.dashboardJson[0],self.prepareDashboardLayout(),self.saveEdit(),self.loading=!1}))},saveMultiTab:function(){var _this8=this;if(Object.keys(this.dashboardLayouts).length&&this.dashboardTabContexts&&this.dashboardTabContexts.length){this.$set(this.dashboardLayouts,this.dashboardTabId,this.dashboardLayout);var tabs=[],tabNames={};this.dashboardTabContexts.forEach((function(rt){_this8.$set(tabNames,rt.id,rt.name),rt.childTabs&&rt.childTabs.length&&rt.childTabs.forEach((function(rl){_this8.$set(tabNames,rl.id,rl.name)}))})),Object.keys(this.dashboardLayouts).forEach((function(key){var dasthboardlayout=_this8.dashboardLayouts[key],tabName=tabNames[key];dasthboardlayout=_this8.removeWidgets(dasthboardlayout),tabs.push(_this8.prepareWidgetToSave(dasthboardlayout,Number(key),tabName))}));var params={dashboardMeta:{dashboardId:this.dashboard.id,tabs:tabs}};this.updateMultiTab(params)}else this.saveEdit()},saveEdit:function(dashboard,mode){var self=this;this.dashboardSave=!0;var dashboardWidgets=[],widgetData=null;if(null!==self.dashboardLayout)for(var i=0;i<self.dashboardLayout.length;i++){var _gridItem$widget,_gridItem$widget2,_gridItem$widget3,_gridItem$widget4,gridItem=self.dashboardLayout[i],reportTemplate=gridItem.widget.dataOptions.newReport&&gridItem.widget.dataOptions.newReport.type&&4===gridItem.widget.dataOptions.newReport.type?gridItem.widget.dataOptions.reportTemplate?gridItem.widget.dataOptions.reportTemplate:gridItem.widget.dataOptions.newReport.reportTemplate:null;if("object"===(0,esm_typeof/* default */.Z)(reportTemplate)&&(reportTemplate=JSON.stringify(reportTemplate)),"card"===gridItem.widget.type)widgetData=(0,objectSpread2/* default */.Z)({id:gridItem.widget.id,type:gridItem.widget.type,layoutWidth:gridItem.w,layoutHeight:gridItem.h,order:i+1,xPosition:gridItem.x,yPosition:gridItem.y,helpText:null===gridItem||void 0===gridItem||null===(_gridItem$widget=gridItem.widget)||void 0===_gridItem$widget?void 0:_gridItem$widget.helpText,widgetSettings:null===gridItem||void 0===gridItem||null===(_gridItem$widget2=gridItem.widget)||void 0===_gridItem$widget2?void 0:_gridItem$widget2.widgetSettings},gridItem.widget.dataOptions);else widgetData={id:gridItem.widget.id,type:gridItem.widget.type,layoutWidth:gridItem.w,layoutHeight:gridItem.h,order:i+1,xPosition:gridItem.x,yPosition:gridItem.y,headerText:gridItem.widget.header.title,reportId:gridItem.widget.dataOptions.reportId,newReportId:gridItem.widget.dataOptions.newReportId,staticKey:gridItem.widget.dataOptions.staticKey?gridItem.widget.dataOptions.staticKey:null,viewName:gridItem.widget.dataOptions.viewName?gridItem.widget.dataOptions.viewName:null,moduleName:gridItem.widget.dataOptions.moduleName?gridItem.widget.dataOptions.moduleName:null,reportTemplate:reportTemplate,helpText:null===gridItem||void 0===gridItem||null===(_gridItem$widget3=gridItem.widget)||void 0===_gridItem$widget3?void 0:_gridItem$widget3.helpText,widgetSettings:null===gridItem||void 0===gridItem||null===(_gridItem$widget4=gridItem.widget)||void 0===_gridItem$widget4?void 0:_gridItem$widget4.widgetSettings};if("graphics"===widgetData.type&&(widgetData.graphicsId=gridItem.widget.graphicsId,gridItem.widget.dataOptions&&gridItem.widget.dataOptions.graphicsOptions&&(widgetData.graphicsOptions="object"===(0,esm_typeof/* default */.Z)(gridItem.widget.dataOptions.graphicsOptions)?JSON.stringify(gridItem.widget.dataOptions.graphicsOptions):gridItem.widget.dataOptions.graphicsOptions)),gridItem.widget.dataOptions.building&&(widgetData.baseSpaceId=gridItem.widget.dataOptions.building.id),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingcard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingWithGraphCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingGaugeCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.params&&(widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.params.metaJson),widgetData.paramsJson=gridItem.widget.dataOptions.params.paramsJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"textcard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson+""),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"imagecard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.imagecardData&&(widgetData.paramsJson={photoId:gridItem.widget.dataOptions.imagecardData.photoId,url:gridItem.widget.dataOptions.imagecardData.url},widgetData.metaJson=JSON.stringify(gridItem.widget.dataOptions.imagecardData)),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"web"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard1"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard2"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCard3"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fahuStatusCardNew"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.AHUcard&&(widgetData.paramsJson={parentId:gridItem.widget.dataOptions.AHUcard.id}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"readingComboCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var data1=JSON.parse(gridItem.widget.dataOptions.metaJson);data1.expressions&&data1.hasOwnProperty("v2Script")&&data1.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:data1.expressions,workflowUIMode:1,isV2Script:data1.v2Script,workflowV2String:data1.workflowV2String}})):data1&&data1.expressions&&(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:data1.expressions,workflowUIMode:1}}))}if(gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var _data=JSON.parse(gridItem.widget.dataOptions.metaJson);_data.expressions&&_data.hasOwnProperty("v2Script")&&_data.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data.expressions,workflowUIMode:1,isV2Script:_data.v2Script,workflowV2String:_data.workflowV2String}})):_data.workflowV2String?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{isV2Script:!0,workflowV2String:_data.workflowV2String}})):_data&&_data.expressions?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data.expressions,workflowUIMode:1}})):(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{v2Script:!0,workflowV2String:"void test(){↵    ↵    ↵}"}}))}if(gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.paramsJson&&(widgetData.paramsJson=gridItem.widget.dataOptions.paramsJson||{}),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"kpiMultiResultCard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson){widgetData.metaJson=gridItem.widget.dataOptions.metaJson;var _data2=JSON.parse(gridItem.widget.dataOptions.metaJson);_data2.expressions&&_data2.hasOwnProperty("v2Script")&&_data2.hasOwnProperty("workflowV2String")?(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data2.expressions,workflowUIMode:1,isV2Script:_data2.v2Script,workflowV2String:_data2.workflowV2String}})):_data2&&_data2.expressions&&(widgetData.widgetVsWorkflowContexts=[],widgetData.widgetVsWorkflowContexts.push({workflow:{expressions:_data2.expressions,workflowUIMode:1}}))}gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"fcucard"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrillFcu"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrillFcuList"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel1"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel2"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel3"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel1List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel2List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"emrilllevel3List"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"resourceAlarmBar"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson,widgetData.paramsJson=JSON.parse(gridItem.widget.dataOptions.metaJson).params),gridItem.widget.dataOptions&&gridItem.widget.dataOptions.staticKey&&"alarmbarwidget"===gridItem.widget.dataOptions.staticKey&&gridItem.widget.dataOptions.metaJson&&(widgetData.metaJson=gridItem.widget.dataOptions.metaJson,widgetData.paramsJson=JSON.parse(gridItem.widget.dataOptions.metaJson).params),"chart"===gridItem.widget.type&&gridItem.widget.dataOptions&&gridItem.widget.dataOptions.hasOwnProperty("chartTypeInt")&&(widgetData.chartType=gridItem.widget.dataOptions.chartTypeInt),dashboardWidgets.push(widgetData)}var dashboardObj={};if("new"===self.mode?(dashboardObj={dashboardMeta:{id:dashboard.id,tabEnabled:self.dashboardOptions.showTabs,dashboardName:self.newdashboard.label,dashboardWidgets:dashboardWidgets,dashboardFolderId:dashboard.dashboardFolderId?dashboard.dashboardFolderId:null}},self.selectedDashoardFolder&&(dashboardObj.dashboardMeta.dashboardFolderId=self.selectedDashoardFolder&&self.selectedDashoardFolder.id?self.selectedDashoardFolder.id:null)):(dashboardObj={dashboardMeta:{id:self.dashboard.id,tabEnabled:self.dashboardOptions.showTabs,dashboardTabPlacement:self.dashboardOptions.dashboardTabPlacement,dashboardName:self.dashboard.label,linkName:self.dashboardLink,dashboardWidgets:dashboardWidgets,dashboardFolderId:dashboard?dashboard.dashboardFolderId?dashboard.dashboardFolderId:null:self.dashboard.dashboardFolderId?self.dashboard.dashboardFolderId:null}},self.selectedDashoardFolder&&(dashboardObj.dashboardMeta.dashboardFolderId=self.selectedDashoardFolder&&self.selectedDashoardFolder.id?self.selectedDashoardFolder.id:null)),this.buildingId&&"sitedashboard"===this.dashboardLink?dashboardObj.siteId=this.buildingId:this.buildingId&&"buildingdashboard"===this.dashboardLink&&(dashboardObj.buildingId=this.buildingId),null!==dashboardObj.dashboardMeta.dashboardName&&""!==dashboardObj.dashboardMeta.dashboardName)if("load"!==mode){var dashboardname=[];if(dashboardname.push(self.dashbaordFolderName),self.dashbaordFolderName.replace(/\s/g,"").length>0&&self.supportedModules.length&&0===self.dashboardFolderList.filter((function(rt){return rt.name===self.dashbaordFolderName})).length){
// self.selectedDashoardFolder = null
var data={dashboard:{dashboardName:self.dashboard&&self.dashboard.label?self.dashboard.label:null,dashboardFolderId:self.selectedDashoardFolder&&self.selectedDashoardFolder.id?self.selectedDashoardFolder.id:null}};self.supportedModules.find((function(row){return row.value===self.getCurrentModule().module}))&&(data.dashboard.moduleId=self.supportedModules.find((function(row){return row.value===self.getCurrentModule().module.moduleId}))),self.savefolderandDashboard(data,"edit",dashboardObj,dashboard)}else self.dashbaordFolderName.replace(/\s/g,"").length>0&&self.supportedModules.length&&self.dashboardFolderList.find((function(rt){return rt.name===self.dashbaordFolderName}))?self.updateDashboardapi(dashboardObj,dashboard):0===dashboardname[0].replace(/\s/g,"").length&&(self.selectedDashoardFolder=null,delete dashboardObj.dashboardMeta.dashboardFolderId,self.updateDashboardapi(dashboardObj,dashboard))}else self.updateDashboardapi(dashboardObj,dashboard);else self.$message({message:"Please Enter The Dashboard Name!",type:"error"})},updateDashboardapi:function(dashboardObj,dashboard){var self=this;if(dashboardObj.dashboardMeta&&dashboardObj.dashboardMeta.dashboardWidgets){var data=[];data=dashboardObj.dashboardMeta.dashboardWidgets.filter((function(rt){return 0!==rt.layoutHeight})),dashboardObj.dashboardMeta.dashboardWidgets=data}this.dashboardTabId&&this.dashboardOptions.showTabs?this.updateDashboardTab(dashboardObj,dashboard):self.$http.post("/dashboard/update",dashboardObj).then((function(){self.$message({message:"Dashboard updated successfully!",type:"success"}),self.copyallWidgets||self.newDashboardTabName||self.dashboardOptions.showTabs?self.loadEmptyDashboard():self.$router.push(self.newconstractUrl(dashboard)),self.dashboardSave=!1}))},updateDashboardTab:function(dashboardObj,dashboard){var _this9=this,selectedTab=this.dashboardTabsList.find((function(i){return i.id===_this9.selectedTabId})),param={dashboardMeta:{dashboardName:dashboardObj.dashboardMeta.dashboardName,dashboardId:dashboardObj.dashboardMeta.id,dashboardFolderId:dashboardObj.dashboardMeta.dashboardFolderId,tabId:this.dashboardTabId,dashboardTabPlacement:this.dashboardOptions.dashboardTabPlacement,dashboardWidgets:this.updateDashboardTabId(dashboardObj.dashboardMeta.dashboardWidgets),dashboardTabName:selectedTab.name}},self=this;self.$http.post("/dashboard/updateTab",param).then((function(){self.$message({message:"Dashboard updated successfully!",type:"success"}),self.$router.push(self.newconstractUrl(dashboard))}))},newconstractUrl:function(){var dashboardlink="new"===this.mode?this.newdashboard.linkName:this.dashboardLink;if(!(0,router/* isWebTabsEnabled */.tj)())return"/app/home/dashboard/"+dashboardlink;var _ref3=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.DASHBOARD_VIEWER)||{},name=_ref3.name;return name?this.$router.resolve({name:name,params:{dashboardlink:dashboardlink}}).href:void 0},cancelEdit:function(){location.reload(),this.$router.go(-1)},cancel:function(){this.$router.push(this.newconstractUrl());
// this.$router.go(-1)
},handleAddWidget:function(widgetType){"chart"===widgetType?this.$refs.newChartWidget.open():"list"===widgetType?this.$refs.newListWidget.open():"map"===widgetType?this.$refs.newMapWidget.open():"static"===widgetType?this.$refs.newStaticWidget.open():"web"===widgetType&&this.$refs.newWebWidget.open()},editwidget:function(index){if(this.selectedWidgetId=-1,index>-1&&this.dashboardLayout[index]&&this.dashboardLayout[index].widget){var widget=this.dashboardLayout[index].widget;this.isDraging=!0,this.editwidgetData=this.dashboardLayout[index],this.editwidgetData.index=index;var data=(widget&&widget.id,widget.dataOptions);this.selectedWidgetId=widget.id,this.prepareEditwidgetData(widget,data)}},prepareEditwidgetData:function(widget,data){if("readingcard"===data.staticKey||"readingGaugeCard"===data.staticKey||"readingWithGraphCard"===data.staticKey)widget.dataOptions.reading?(this.readingCard=this.$helpers.cloneObject(widget.dataOptions.reading),this.readingCard.operatorId=widget.dataOptions.reading&&widget.dataOptions.reading.operatorId?widget.dataOptions.reading.operatorId:28,this.readingCard.editmode=!0):this.setReadingcardData(widget.dataOptions,widget),this.addReadingPopUp();else if("imagecard"===data.staticKey)this.showImageCardPopUp();else if("textcard"===data.staticKey)this.showtextCardPopUp();else if("kpiCard"===data.staticKey){if(widget.dataOptions.metaJson)if(widget.dataOptions.paramsJson&&widget.dataOptions.paramsJson.key){this.newDashboardData.childKey=widget.dataOptions.paramsJson.key;var metaJson=JSON.parse(widget.dataOptions.metaJson);this.editKpiCard(metaJson),"targetmeter"===this.newDashboardData.childKey?this.targetMeterDialog=!0:"kpitargetCard"===this.newDashboardData.childKey?this.showkpitargetCard=!0:"linearCard"===this.newDashboardData.childKey||"radialCard"===this.newDashboardData.childKey?this.gaugeSetup=!0:"pmreadingswidget"===this.newDashboardData.childKey?this.pmreadingsetup=!0:"smartnewmap"===this.newDashboardData.childKey?this.smartmapsetup=!0:"smarttable"===this.newDashboardData.childKey?this.smarttablesetup=!0:"smarttablewrapper"===this.newDashboardData.childKey?this.smarttablewrappersetup=!0:"smartcard"===this.newDashboardData.childKey?this.smartcardsetup=!0:"cardbuilder"===this.newDashboardData.childKey?this.showCardBuilderSetup=!0:this.buildingCard=!0}else this.editKpiCard(JSON.parse(widget.dataOptions.metaJson)),this.showkpiCard=!0}else if("readingComboCard"===data.staticKey&&widget.dataOptions.metaJson){var editKpiCard=JSON.parse(widget.dataOptions.metaJson);this.assetcardEdit=!0,this.showCardBuilder=!0,this.editAssetCard(editKpiCard)}},editKpiCard:function(data){data&&(data.hasOwnProperty("edit")&&(data.edit=!0),this.kpiCard=null,this.kpiCard=this.$helpers.cloneObject(data))},setReadingcardData:function(data){var meta=JSON.parse(data.metaJson),params=data.paramsJson;this.readingCard.title=meta.title,this.readingCard.mode=meta.mode||this.readingCard.mode,this.readingCard.parentId=params.parentId,this.readingCard.aggregationFunc=params.aggregateFunc||this.readingCard.aggregationFunc,this.readingCard.readingFieldId=params.fieldId,this.readingCard.operatorId=params.dateOperator?params.dateOperator:params.dateFilter&&params.dateFilter.value?params.dateFilter.value:28,this.readingCard.editmode=!0,this.readingCard.write=params.write,this.readingCard.colorMap=!!meta.colorMap&&meta.colorMap,this.readingCard.colorMapConfig=meta.colorMap?meta.colorMapConfig:{},"readingGaugeCard"===data.staticKey&&(this.readingCard.targetreading.readingFieldId=params.fieldId1,this.readingCard.targetreading.parentId=params.parentId1,this.readingCard.targetreading.count=params.constant,this.readingCard.targetreading.targetmode=params.fieldId1>-1?"reading":"constant",this.readingCard.targetreading.maxmode=-1===params.maxConstant&&-1===params.maxPercentage?"usetarget":params.maxConstant>-1?"constant":params.maxPercentage>-1?"percentage":"usetarget",this.readingCard.targetreading.enableCenterText1=!meta||void 0===meta["enableCenterText1"]||meta.enableCenterText1,-1===params.maxConstant&&-1===params.maxPercentage?this.readingCard.targetreading.maxValue=null:params.maxConstant>-1?this.readingCard.targetreading.maxValue=params.maxConstant:params.maxPercentage>-1&&(this.readingCard.targetreading.maxpercentage=params.maxPercentage))},deleteChart:function(index){this.currentTemplateReportId=null,this.deletlayout.push(this.dashboardLayout[index]),this.dashboardLayout[index].w=0,this.dashboardLayout[index].h=0,this.dashboardLayout[index].minH=0,this.dashboardLayout[index].minW=0,this.dashboardLayout[index].x=0,this.dashboardLayout[index].y=0,this.editwidgetData=null},openFirstReport:function(){var self=this;self.$route.params.reportid||this.$route.path.includes("scheduled")||(self.newReportTree&&self.newReportTree.length&&self.newReportTree[0].reports.length?self.newReportTree[0].expand=!0:self.reportTree.length&&self.reportTree[0].children.length&&(self.reportTree[0].expand=!0))},expand:function(folder){this.$set(folder,"expand",!folder.expand),this.changeDashboardTabId(folder.id)},getReportLink:function(reportId){return this.getCurrentModule().rootPath+"/view/"+reportId},handleNewCommand:function(cmd){if("reportfolder"===cmd){var self=this,promptObj={title:"New Report Folder",promptPlaceholder:"Folder name",rbLabel:"Save"};self.$dialog.prompt(promptObj).then((function(value){if(null!==value){var reportFolderObj={name:value};self.$http.post("dashboard/addReportFolder?moduleName="+self.getCurrentModule().module,{reportFolderContext:reportFolderObj}).then((function(response){response.data.reportFolderContext?(self.$message({message:"Folder created successfully.",type:"success"}),self.reportTree.push(response.data.reportFolderContext)):self.$message({message:"Folder creation failed.",type:"warning"})}))}}))}else"tabular"===cmd?this.$router.replace({path:this.getCurrentModule().rootPath+"/newtabular"}):"matrix"===cmd?this.$router.replace({path:this.getCurrentModule().rootPath+"/newmatrix"}):this.$router.replace({path:this.getCurrentModule().rootPath+"/new"})},dashbaordScreen:function(){var stage=window.localStorage.getItem("dashboard");this.collapseSidebar=null!==stage&&"true"===stage},toggle:function(){var stage=!this.collapseSidebar;this.collapseSidebar=stage,window.localStorage.setItem("dashboard",stage)},drag:function(){},allowDrop:function(e){e.preventDefault()},start:function(data,parent){this.selectedBuilding=null,this.editwidgetData=null,parent&&(data.moduleName=parent),this.newDashboardData=data,this.isDraging=!0},resetCardData:function(){this.readingCard={title:"",mode:1,parentId:-1,legend:"sum",parentName1:"",write:!1,readingType:-1,targetreading:{max:0,maxmode:"usetarget",readingName:"",targetmode:"constant",count:0,maxValue:0,maxPercentage:0,needMax:!1,parentName2:"",enableCenterText1:!0},aggregationFunc:3,readingName:"",operatorId:28,layout:{color:"",fontColor:""},colorMap:!1,colorMapConfig:{}}},dragEnter:function(){},drop:function(){if(this.emptywidget=!0,"energycostmini"===this.newDashboardData.key||"profilemini"===this.newDashboardData.key||"carbonmini"===this.newDashboardData.key||"weathermini"===this.newDashboardData.key)"weathermini"===this.newDashboardData.key?this.addDataPopUp("all"):this.addDataPopUp();else if("readingcard"===this.newDashboardData.key)this.resetCardData(),this.addReadingPopUp();else if("imagecard"===this.newDashboardData.key)this.showImageCardPopUp();else if("textcard"===this.newDashboardData.key)this.showtextCardPopUp();else if("web"===this.newDashboardData.key)this.webcardVisible=!0;else if("fahuStatusCard"===this.newDashboardData.key)this.ahupopup=!0;else if("fahuStatusCard1"===this.newDashboardData.key)this.ahupopup=!0;else if("fahuStatusCard3"===this.newDashboardData.key)this.ahupopup=!0;else if("fahuStatusCardNew"===this.newDashboardData.key)this.ahupopup=!0;else if("readingComboCard"===this.newDashboardData.key)this.showCardBuilder=!0;else if("kpiCard"===this.newDashboardData.key){var keys={profilemini:"profilemini",energycostmini:"energycostmini",carbonmini:"carbonmini",controlCommandmini:"controlCommandmini"};keys[this.newDashboardData.childKey]?this.buildingCard=!0:"smartmap"===this.newDashboardData.childKey||"smartenergymap"===this.newDashboardData.childKey?this.addNewelemnt():"targetmeter"===this.newDashboardData.childKey?this.targetMeterDialog=!0:"kpitargetCard"===this.newDashboardData.childKey?this.showkpitargetCard=!0:"linearCard"===this.newDashboardData.childKey||"radialCard"===this.newDashboardData.childKey?this.gaugeSetup=!0:"pmreadingswidget"===this.newDashboardData.childKey?this.pmreadingsetup=!0:"smartnewmap"===this.newDashboardData.childKey?this.smartmapsetup=!0:"smarttable"===this.newDashboardData.childKey?this.smarttablesetup=!0:"smarttablewrapper"===this.newDashboardData.childKey?this.smarttablewrappersetup=!0:"smartcard"===this.newDashboardData.childKey?this.smartcardsetup=!0:"cardbuilder"===this.newDashboardData.childKey?this.showCardBuilderSetup=!0:"multiTrend"===this.newDashboardData.childKey?this.addNewelemnt():this.showkpiCard=!0,this.kpiCard=null}else"fcucard"===this.newDashboardData.key||"emrilllevel"===this.newDashboardData.key||"emrillFcu"===this.newDashboardData.key||"emrillFcuList"===this.newDashboardData.key?this.showFcuCardDialog=!0:"resourceAlarmBar"===this.newDashboardData.key?this.showBooleanCardDialog=!0:"alarmbarwidget"===this.newDashboardData.key?this.showAlarmbarCardDialog=!0:this.addNewelemnt()},avatarCropUploadSuccess:function(jsonData){this.imagecardData=null,this.imagecardData=jsonData,this.addNewelemnt(),this.isDraging=!1,this.showAvatarUpload=!1},imageCardUpdate:function(data){this.imagecardData=null,this.imagecardData=data,this.editwidgetData&&this.editwidgetData.index&&(this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.metaJson=JSON.stringify(data),this.dashboardLayout[this.editwidgetData.index].widget.dataOptions.imagecardData=data),this.editwidgetcalled=!this.editwidgetcalled,this.isDraging=!1,this.showAvatarUpload=!1,this.editwidgetData=null},avatarCropSuccess:function(avatarDataUrl){this.avatarDataUrl=null,this.avatarDataUrl=avatarDataUrl},avatarCropUploadFail:function(){this.isDraging=!1,this.showAvatarUpload=!1,this.avatarDataUrl=null},updateWidget:function(){this.dashboardLayout[this.editwidgetData.index]=this.updateWidgetLayout(this.editwidgetData),this.editwidgetcalled=!this.editwidgetcalled,this.readingCard.editmode=!1,
// this.dashboardLayout.slice(this.editwidgetData.index, 1)
// this.dashboardLayout.insert(this.editwidgetData.index, this.editwidgetData)
this.editwidgetData=null},addreadings:function(){this.readingPopupValidation().valid?(this.editwidgetData?this.updateWidget():this.addNewelemnt(),this.isDraging=!1,this.readingpopup=!1):this.$message({message:this.readingPopupValidation().message,type:"error"})},addAHUData:function(){this.addNewelemnt(),this.isDraging=!1,this.ahupopup=!1},readingPopupValidation:function(){var data=this.readingCard,valid=!0,message="";if(null!==data.operatorId&&-1!==data.operatorId||(valid=!1,message="please select date range"),null!==data.readingName&&""!==data.readingName||(valid=!1,message="please select reading"),null!==data.title&&""!==data.title||(valid=!1,message="please select title"),4===this.readingCard.mode&&this.readingCard.targetreading){var target=this.readingCard.targetreading;"reading"===target.targetmode?null!==target.readingName&&""!==target.readingName||(valid=!1,message="please select target reading"):"constant"===target.targetmode&&(isNaN(Number(target.count))||Number(target.count)===1/0)&&(valid=!1,message="please enter the valid target value"),"usetarget"!==target.maxmode&&(isNaN(Number(target.maxValue))&&"constant"===target.maxmode?(valid=!1,message="please enter the valid max value"):isNaN(Number(target.maxpercentage))&&"percentage"===target.maxmode&&(valid=!1,message="please enter the valid max percentage"))}return{valid:valid,message:message}},selectBuildings:function(){this.selectedBuilding?(this.addNewelemnt(!1,this.selectedBuilding),this.dialogVisible=!1,this.isDraging=!1):this.$message({message:"Please select building",type:"error"})},selectwebcard:function(){-1!==this.webUrl.indexOf("http")&&-1!==this.webUrl.indexOf("http")||(this.webUrl="https://"+this.webUrl),this.webcardValidation()?(this.addNewelemnt(),this.webcardVisible=!1,this.isDraging=!1):this.$message({message:"Please provide a valid url",type:"error"})},webcardValidation:function(){return!!this.webUrl&&!!this.webUrl.length},cancelBuilding:function(){this.dialogVisible=!1,this.isDraging=!1,this.readingpopup=!1,this.showAvatarUpload=!1,this.showtextcard=!1,this.ahupopup=!1,this.webcardVisible=!1,this.showCardBuilder=!1,this.assetcardEdit=!1,this.showFcuCardDialog=!1,this.showBooleanCardDialog=!1,this.showAlarmbarCardDialog=!1,this.buildingCard=!1,this.gaugeSetup=!1,this.pmreadingsetup=!1,this.smartmapsetup=!1,this.smarttablesetup=!1,this.smarttablewrappersetup=!1,this.smartcardsetup=!1,this.showCardBuilderSetup=!1,this.targetMeterDialog=!1,this.resetCardData()},addDataPopUp:function(data){this.dialogVisible=!0,this.buildings="all"===data?this.allBuildings:this.tempBuildings},addReadingPopUp:function(){this.readingpopup=!0},showImageCardPopUp:function(){this.showAvatarUpload=!0},showtextCardPopUp:function(){this.showtextcard=!0},getDatapoint:function(data){var _this10=this;data&&(this.addreadingVisible2=!1,this.readingCard.readings=data,this.readingCard.readingName=data.name,this.readingCard.parentId="space"===data.type?data.space&&data.space.id?data.space.id:-1:data.asset&&data.asset.id?data.asset.id:-1,this.readingCard.title=this.readingCard.title.length?this.readingCard.title:this.readingCard.readingName,this.readingCard.parentName1=this.readingCard.readingName||"",this.readingCard.id?this.readingCard.readingType=data.fullList&&this.readingCard.id?data.fullList.find((function(rt){return rt.id===_this10.readingCard.id})).readingType:-1:this.readingCard.readingType=data.fullList&&data.readingField&&data.readingField.id?data.fullList.find((function(rt){return rt.fieldId===data.readingField.id})).readingType:-1)},getTragetDatapoint:function(data){data&&(this.addreadingVisible3=!1,this.readingCard.targetreading.readings=data,this.readingCard.targetreading.readingName=data.name,this.readingCard.targetreading.parentId="space"===data.type?data.space&&data.space.id?data.space.id:-1:data.asset&&data.asset.id?data.asset.id:-1,
// this.readingCard.title = this.readingCard.title.length ? ((this.readingCard.title === this.readingCard.readingName) ? (this.readingCard.readingName + ' vs ' + this.readingCard.targetreading.readingName) : this.readingCard.title) : (this.readingCard.readingName + 'vs' + this.readingCard.targetreading.readingName)
this.readingCard.targetreading.parentName2=this.readingCard.targetreading&&this.readingCard.targetreading.readingName?this.readingCard.targetreading.readingName:"")},cancelDataPointAdder:function(){this.addreadingVisible2=!1,this.addreadingVisible3=!1},containerover:function(){this.emptywidget=!0},dropContainer:function(){this.emptywidget=!0},dragend:function(){this.dialogVisible||this.readingpopup||this.showAvatarUpload||this.showtextcard||this.ahupopup||this.webcardVisible||this.showCardBuilder||this.showFcuCardDialog||this.showBooleanCardDialog||this.showAlarmbarCardDialog||this.showkpiCard||this.showkpitargetCard||this.buildingCard||this.gaugeSetup||this.pmreadingsetup||this.smartmapsetup||this.smarttablesetup||this.smarttablewrappersetup||this.smartcardsetup||this.showCardBuilderSetup||this.targetMeterDialog||(this.isDraging=!1)},triggerEvent:function(element,eventName){if("createEvent"in document){var evt=document.createEvent("HTMLEvents");evt.initEvent(eventName,!1,!0),element.dispatchEvent(evt)}else element.fireEvent("on"+eventName)},containerEntry:function(){
// let elemnt = document.getElementsByClassName('fc-widget-header')[0]
},addNewelemnt:function(mode){this.dashboardlength=this.dashboardlength+1;var data=this.newDashboardData,layout={};data.optionName&&(this.option=data.optionName),"view"===this.option?layout=this.getReportWidget(data,layout):"static"===this.option?layout={i:this.dashboardlength+"",x:0,y:0,w:data.w,h:data.h,widget:{layout:{width:data.w,x:0,y:1/0,position:this.dashboardlength,height:data.h},header:{subtitle:"today",title:this.getTitle(data),export:!1},dataOptions:{dataurl:"",refresh_interval:100,name:"dummy",staticKey:data.key},type:"static",id:-1,name:""},minW:data.w,minH:data.h}:"cards"===this.option?(layout={i:this.dashboardlength+"",x:0,y:0,w:data.w,h:data.h,widget:{layout:{width:data.w,x:0,y:1/0,position:this.dashboardlength,height:data.h},header:{subtitle:"today",title:"",export:!1},dataOptions:{dataurl:"",refresh_interval:100,name:"dummy",staticKey:data.key},type:"static",id:-1,name:""},minW:data.w,minH:data.h},2===this.readingCard.mode&&(layout.h=8,layout.widget.height=8,layout.minH=8),3===this.readingCard.mode&&(layout.h=16,layout.widget.height=16,layout.minH=16),4===this.readingCard.mode&&(layout.h=16,layout.widget.height=16,layout.minH=16,layout.widget.dataOptions.staticKey="readingGaugeCard"),"readingComboCard"===layout.widget.dataOptions.staticKey&&(layout.h=this.assetCardData&&this.assetCardData.cardType?this.assetCardLayoutChanger(this.assetCardData):12,layout.widget.layout.height=this.assetCardData&&this.assetCardData.cardType?this.assetCardLayoutChanger(this.assetCardData):12,layout.widget.height=this.assetCardData&&this.assetCardData.cardType?this.assetCardLayoutChanger(this.assetCardData):12,layout.minH=this.assetCardData&&this.assetCardData.cardType?this.assetCardLayoutChanger(this.assetCardData):12,layout.w=this.assetCardData&&this.assetCardData.cardType?this.cardToLayoutMap[this.assetCardData.cardType].w:12,layout.widget.width=this.assetCardData&&this.assetCardData.cardType?this.cardToLayoutMap[this.assetCardData.cardType].w:12,layout.widget.layout.width=this.assetCardData&&this.assetCardData.cardType?this.cardToLayoutMap[this.assetCardData.cardType].w:12,layout.minW=this.assetCardData&&this.assetCardData.cardType?this.cardToLayoutMap[this.assetCardData.cardType].w:12),"imagecard"===layout.widget.dataOptions.staticKey&&(layout=this.getReportWidget(data,layout,"imagecard")),"textcard"===layout.widget.dataOptions.staticKey&&(layout=this.getReportWidget(data,layout,"textcard")),"web"===layout.widget.dataOptions.staticKey&&(layout.minH=4,layout.minW=4),"FAHU"===this.AHUcard.catogry&&"fahuStatusCard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.staticKey="fahuStatusCard2"),this.fcuCardData&&this.fcuCardData.level&&"fcucard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.staticKey="emrilllevel"+this.fcuCardData.level),this.fcuCardData&&this.fcuCardData.level&&"emrilllevel"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.staticKey="emrilllevel"+this.fcuCardData.level+"List"),"kpiCard"===layout.widget.dataOptions.staticKey&&data.childKey&&(layout.widget.dataOptions.paramsJson={key:data.childKey})):layout="web"===this.option?{i:this.dashboardlength+"",x:0,y:0,w:this.getMinW("web"),h:this.getMinH("web"),widget:{layout:{width:this.getMinW("web"),x:0,y:1/0,position:this.dashboardlength,height:this.getMinH("web")},header:{subtitle:"today",title:data.name,export:!1},dataOptions:{dataurl:"",refresh_interval:100,webUrl:data.url,name:"dummy"},type:"web",id:-1},minW:this.getMinW("web"),minH:this.getMinH("web"),label:data.label}:"connectedapps"===this.option?{i:this.dashboardlength+"",x:0,y:0,w:this.getMinW("connectedapps"),h:this.getMinH("connectedapps"),widget:{layout:{width:this.getMinW("connectedapps"),x:0,y:1/0,position:this.dashboardlength,height:this.getMinH("connectedapps")},header:{subtitle:"today",title:data.name,export:!1},dataOptions:{dataurl:"",refresh_interval:100,webUrl:data.url,name:"dummy"},type:"connectedapps",id:data.id},minW:this.getMinW("connectedapps"),minH:this.getMinH("connectedapps"),label:data.label}:(this.option,this.getReportWidget(data,layout)),
// if(data.type && data.type === 4 && (this.currentTemplateReportId === null || this.currentTemplateReportId !== this.newDashboardData.id)){
//   this.showTemplateReportDialog = true
//   return
// }
mode||this.dashboardLayout.push(this.updateWidgetLayout(layout))},updateWidgetLayout:function(layout){var _this11=this;return layout.widget&&layout.widget.dataOptions&&layout.widget.dataOptions.staticKey&&"readingcard"===layout.widget.dataOptions.staticKey&&(1===this.readingCard.mode&&(layout.h=12,layout.widget.height=12,layout.minH=12),2===this.readingCard.mode&&(layout.h=8,layout.widget.height=8,layout.minH=8),3===this.readingCard.mode&&(layout.h=16,layout.widget.height=16,layout.minH=16,layout.widget.dataOptions.staticKey="readingWithGraphCard"),4===this.readingCard.mode&&(layout.h=16,layout.widget.height=16,layout.minH=16,layout.widget.dataOptions.staticKey="readingGaugeCard")),this.selectedBuilding&&(layout.widget.dataOptions.building=this.buildings.find((function(rt){return rt.id===_this11.selectedBuilding}))),layout.widget.dataOptions&&"readingcard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.reading=this.readingCard,this.readingCard={}),layout.widget.dataOptions&&"readingWithGraphCard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.reading=this.readingCard,this.readingCard={}),layout.widget.dataOptions&&"readingGaugeCard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.reading=this.readingCard,this.readingCard={}),layout.widget.dataOptions&&"imagecard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.imagecardDataUrl=this.avatarDataUrl,layout.widget.dataOptions.imagecardData=this.imagecardData),layout.widget.dataOptions&&"web"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.metaJson=this.webUrl,this.webUrl=null),layout.widget.dataOptions&&"fahuStatusCard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.AHUcard=this.AHUcard,this.AHUcard={catogry:"",id:null}),layout.widget.dataOptions&&"fahuStatusCard1"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.AHUcard=this.AHUcard,this.AHUcard={catogry:"",id:null}),layout.widget.dataOptions&&"fahuStatusCard2"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.AHUcard=this.AHUcard,this.AHUcard={catogry:"",id:null}),layout.widget.dataOptions&&"fahuStatusCard3"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.AHUcard=this.AHUcard,this.AHUcard={catogry:"",id:null}),layout.widget.dataOptions&&"fahuStatusCardNew"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.AHUcard=this.AHUcard,this.AHUcard={catogry:"",id:null}),layout.widget.dataOptions&&"readingComboCard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.readingComboCard=this.assetCardData,this.assetCardData=null),layout.widget.dataOptions&&"kpiCard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.data=this.kpiCard,this.kpiCard=null),layout.widget.dataOptions&&"fcucard"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"resourceAlarmBar"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.booleancardData,this.booleancardData=null),layout.widget.dataOptions&&"alarmbarwidget"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.alarmcardData,this.alarmcardData=null),layout.widget.dataOptions&&"emrillFcu"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrillFcuList"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel1"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel2"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel3"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel1List"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel2List"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel3List"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"emrilllevel3List"===layout.widget.dataOptions.staticKey&&(layout.widget.dataOptions.cardData=this.fcuCardData,this.fcuCardData=null),layout.widget.dataOptions&&"buildingmapwidget"===layout.widget.dataOptions.staticKey&&(this.isDraging=!1),layout.widget.dataOptions&&"mapwidget"===layout.widget.dataOptions.staticKey&&(this.isDraging=!1),this.readingCard={title:"",mode:1,parentId:-1,legend:"sum",parentName1:"",write:!1,readingType:-1,targetreading:{max:0,maxmode:"usetarget",readingName:"",targetmode:"constant",count:0,maxValue:0,maxPercentage:0,needMax:!1,parentName2:"",enableCenterText1:!0},aggregationFunc:3,readingName:"",operatorId:28,layout:{color:"",fontColor:""},colorMap:!1,colorMapConfig:{}},layout},getTitle:function(data){var key=data.key;return"profilecard"===key||"energycard"===key||"energycost"===key||"weathercard"===key||"energycostaltayer"===key||"weathercardaltayer"===key||"mapwidget"===key||"buildingmapwidget"===key||"weathermini"===key||"carbonmini"===key||"energycostmini"===key||"controlCommandmini"===key||"profilemini"===key||"readingcard"===key?"":data.label},getDragIgnoreClass:function(widget){return widget&&widget.dataOptions&&"mapwidget"===widget.dataOptions.staticKey||widget&&widget.dataOptions&&widget.dataOptions.staticKey,""},getStaticWidgetList:function(widgets){if(widgets)return 108!==this.$account.org.id&&113!==this.$account.org.id&&(widgets=widgets.filter((function(widget){return"sampleppm"!==widget.key}))),widgets},querySearch:function(queryString,cb){var dashboardFolderList=this.dashboardFolderList,results=queryString?dashboardFolderList.filter(this.createFilter(queryString)):dashboardFolderList;
// call callback function to return suggestion objects
cb(results)},createFilter:function(queryString){return function(link){return 0===link.name.toLowerCase().indexOf(queryString.toLowerCase())}},loadFolder:function(source){var query=this.$route.query,_ref4=query||{},appId=_ref4.appId,self=this,moduleName=this.moduleName;"energy"===moduleName&&(moduleName="energyData");var url="/dashboard/getDashboardFolder";this.$helpers.isLicenseEnabled("NEW_LAYOUT")||(url+="?moduleName="+moduleName),(0,validation/* isEmpty */.xb)(appId)||(url+="?appId="+appId),self.$http.get(url).then((function(response){var foldername={Analytics:"Analytics","Fault diagnosis":"Fault diagnosis",Maintenance:"Maintenance",default:"default"};self.dashboardFolderList=response.data.dashboardFolders,"new"===self.mode&&(self.dashbaordFolderName=self.dashboardFolderList&&self.dashboardFolderList.length&&self.dashboardFolderList.find((function(rt){return foldername[rt.name]}))?self.dashboardFolderList.find((function(rt){return foldername[rt.name]})).name:"Maintenance"),"new"===self.mode&&self.setDefaultDashboard(),"watch"===source&&self.loadDashboard()}))},handleSelect:function(item){this.dashbaordFolderName=item.name,this.selectedDashoardFolder=item},handleIconClick:function(){},getSourceFile:function(){},getInput:function(){this.cancelBuilding()},loadGraphicsList:function(){var _this12=this;this.$http.get("/v2/graphics/list").then((function(response){if(0!==response.data.responseCode)throw new Error(response.data.message);_this12.graphicsList=response.data.result.graphics_list,_this12.graphicsList.forEach((function(rt){_this12.$set(rt,"selected",!1),_this12.$set(rt,"disabled",!1)}))})).catch((function(error){_this12.$message.error(error)}))},loadConnectedAppWidgetList:function(){var _this13=this,connectedAppsUrl="/v2/connectedApps/widgetList?filters="+encodeURIComponent(JSON.stringify({entityType:{operatorId:9,value:["3"]}}));this.$http.get(connectedAppsUrl).then((function(response){if(0!==response.data.responseCode)throw new Error(response.data.message);_this13.connectedAppWidgetList=response.data.result.connectedAppWidgets})).catch((function(error){_this13.$message.error(error)}))},toggleDashboardTabEditor:function(){this.dashboardTabEditorVisibility=!this.dashboardTabEditorVisibility}}},dashboard_DashboardEditervue_type_script_lang_js=DashboardEditervue_type_script_lang_js,DashboardEditer_component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardEditervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardEditer=DashboardEditer_component.exports},
/***/576583:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAddDataPoint}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/FAddDataPoint.vue?vue&type=template&id=d1ff10a8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-left"},["reading"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Type")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",disabled:_vm.canDisableTypePicker},model:{value:_vm.compareObject.type,callback:function($$v){_vm.$set(_vm.compareObject,"type",$$v)},expression:"compareObject.type"}},[_c("el-option",{attrs:{label:"Space",value:"space"}}),_c("el-option",{attrs:{label:"Asset",value:"asset"}})],1)],1),"space"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Space")]),_vm.multipleParent?_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{multiple:"",filterable:""},on:{change:_vm.loadReadingsOnly},model:{value:_vm.compareObject.parentIds,callback:function($$v){_vm.$set(_vm.compareObject,"parentIds",$$v)},expression:"compareObject.parentIds"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:parseInt(space.id)}})})),1):_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectSpace},model:{value:_vm.compareObject.spaceId,callback:function($$v){_vm.$set(_vm.compareObject,"spaceId",$$v)},expression:"compareObject.spaceId"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:parseInt(space.id)}})})),1)],1):_vm._e(),"asset"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Asset")]),_vm.multipleParent?_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",multiple:""},on:{change:_vm.loadReadingsOnly},model:{value:_vm.compareObject.parentIds,callback:function($$v){_vm.$set(_vm.compareObject,"parentIds",$$v)},expression:"compareObject.parentIds"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1):_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1):_vm._e(),_vm.newReading?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.setReading},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.field.displayName,value:field.field.id}})})),1)],1):_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5b hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:func.value}}):_vm._e()})),1)],1)]):_vm._e(),"meter"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.$store.getters.getBuildingsPickList(),(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Meter")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.subMeters,(function(meter,index){return _c("el-option",{key:index,attrs:{label:meter.name,value:meter.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5 hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:parseInt(func.value)}}):_vm._e()})),1)],1)]):_vm._e(),"enpi"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.buildingList,(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("EnPI")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.readingFields,value:field.id}})})),1)],1)]):_vm._e(),_c("div",{staticClass:"row mT30"},[_c("div",{staticClass:"modal-btn-cancel col-6 fc-el-btn",on:{click:_vm.cancel}},[_vm._v("cancel")]),_c("div",{staticClass:"modal-btn-save fc-el-btn col-6",on:{click:_vm.save}},[_vm._v("Ok")])])])},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(670560),__webpack_require__(420629)),validation=__webpack_require__(990260),FAddDataPointvue_type_script_lang_js={props:["type","aggregate","reading","showLastValue","source","newReading","editdata","multipleParent","readingType"],data:function(){return{compareObject:{type:"space",buildingId:"",spaceId:"",parentIds:[],assetId:"",readingFieldId:"",aggregateFunc:3,hasBaseline:!1,baseLineId:""},canDisableTypePicker:!1,baselineList:[],assetList:[],spaceList:[],subMeters:[],readingFields:[],aggregateFunctions:[{label:"Actual",value:0,name:"actual"},{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getBuildingsPickList"])),{},{buildingList:function(){return this.getBuildingsPickList()},dataPointType:function(){return this.type?this.type:"reading"},"compareObject.assetId":function(){return parseInt(this.compareObject.assetId)}}),created:function(){var _this=this;this.$store.dispatch("loadEnergyMeters"),this.$store.dispatch("loadBuildings").then((function(){_this.init()}))},mounted:function(){},methods:{init:function(){this.loadSpaces(),this.loadAssets(),this.loadBaselines(),this.readingType&&(this.compareObject.type=this.readingType,this.canDisableTypePicker=!0)},reset:function(){this.compareObject=null,this.compareObject={type:"space",spaceId:"",assetId:"",readingFieldId:"",aggregateFunc:0,hasBaseline:!1,baseLineId:""}},open:function(options){this.reset(),options&&(this.compareObject=Object.assign(this.compareObject,this.compareObject,options),this.compareObject.type=this.compareObject.parentType,this.compareObject.buildingId?(this.compareObject.assetId=parseInt(this.compareObject.parentId),this.loadSubMeters()):"space"===this.compareObject.parentType?this.compareObject.parentId&&(this.compareObject.spaceId=parseInt(this.compareObject.parentId)):this.compareObject.parentId&&(this.compareObject.assetId=parseInt(this.compareObject.parentId)),this.compareObject.readingFieldId&&this.loadReadingFields()),0===this.aggregate?this.compareObject.aggregateFunc=this.aggregate:this.compareObject.yAggr?this.compareObject.aggregateFunc=this.compareObject.yAggr:this.compareObject.aggregateFunc=3},save:function(){var _this2=this;if(this.compareObject.readingFieldId){var reportName="";this.compareObject.spaceId&&(this.compareObject.space=this.spaceList.find((function(a){return a.id===_this2.compareObject.spaceId})),reportName=this.compareObject.space.name),this.compareObject.assetId&&(this.compareObject.asset=this.assetList.find((function(a){return a.id===_this2.compareObject.assetId})),reportName=this.compareObject.asset.name),this.compareObject.readingFieldId&&(this.newReading?(this.compareObject.readingField=this.readingFields.find((function(a){return a.field.id===_this2.compareObject.readingFieldId})).field,this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")")):(this.compareObject.readingField=this.readingFields.find((function(a){return a.id===_this2.compareObject.readingFieldId})),this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")"))),this.compareObject.name=reportName,this.compareObject.aggregateFunctions=this.aggregateFunctions,this.$emit("save",this.compareObject)}else this.$message.error("Please select the reading")},cancel:function(){this.$emit("cancel")},selectSpace:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},selectAsset:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},loadReadingsOnly:function(){this.loadReadingFieldsArray()},loadAssets:function(){var _this3=this;this.loading=!0;var self=this;this.$util.loadAsset({withReadings:!0}).then((function(response){response.assets&&(_this3.assetList=response.assets,self.editdata&&self.editdata.editmode&&(self.$store.getters.getBuildingsPickList()[self.editdata.parentId]?(self.compareObject.type="space",self.compareObject.spaceId=self.editdata.parentId):_this3.assetList.find((function(rt){return rt.id===self.editdata.parentId}))&&(self.compareObject.type="asset",self.compareObject.assetId=self.editdata.parentId,self.compareObject.readingFieldId=self.editdata.reading?self.editdata.reading.readingFieldId:self.editdata.readingFieldId)),_this3.compareObject.assetId&&_this3.loadReadingFields(),_this3.loading=!1)}))},getAsset:function(id){return this.assetList.find((function(obj){return obj.id===id}))},loadSpaces:function(){var self=this,url="/basespace";this.$http.get(url).then((function(response){response.data&&(self.spaceList=response.data.basespaces,self.compareObject.spaceId&&self.loadReadingFields())}))},getSpace:function(id){return this.spaceList.find((function(obj){return obj.id===id}))},loadBaselines:function(){var self=this;self.$http.get("/baseline/all").then((function(response){200===response.status&&(self.baselineList=response.data?response.data:[])}))},setReading:function(){},loadReadingFieldsArray:function(){var _this4=this,assetId=this.compareObject.parentIds.length?this.compareObject.parentIds[0]:null,spaceId=this.compareObject.parentIds.length?this.compareObject.parentIds[0]:null;"asset"===this.compareObject.type&&assetId?this.$util.loadAssetReadingFields(assetId).then((function(readingFields){if(_this4.readingFields=readingFields,!_this4.compareObject.readingFieldId){var defaultReadingName=_this4.reading?_this4.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=_this4.readingFields.find((function(r){return r.columnName===defaultReadingName}));_this4.compareObject.readingFieldId=energyDelta?energyDelta.id:_this4.readingFields[0].id}})):"space"===this.compareObject.type&&spaceId&&this.$util.loadSpaceReadingFields(spaceId).then((function(readingFields){_this4.readingFields="enpi"!==_this4.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.typeEnum._name})),!_this4.compareObject.readingFieldId&&_this4.readingFields.length&&(_this4.compareObject.readingFieldId=_this4.readingFields[0].id)}))},loadReadingFields:function(){var _this5=this,self=this;this.newReading?"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadLatestReading(this.compareObject.assetId).then((function(readingFields){self.readingFields=readingFields;var defaultReadingName=self.reading?self.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).field:[];energyDelta.readingType=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).readingType:-1,energyDelta?((0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=energyDelta.id),self.compareObject.fullList=self.$helpers.cloneObject(readingFields)):(0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"space"===self.compareObject.type&&self.compareObject.spaceId&&self.$util.loadLatestReading(self.compareObject.spaceId).then((function(readingFields){self.readingFields="enpi"!==self.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.field.dataTypeEnum})),
// if (self.editdata && self.editdata.editmode) {
//   self.save()
// }
!self.compareObject.readingFieldId&&self.readingFields.length&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadAssetReadingFields(this.compareObject.assetId).then((function(readingFields){if(_this5.readingFields=readingFields,!_this5.compareObject.readingFieldId){var defaultReadingName=_this5.reading?_this5.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=_this5.readingFields.find((function(r){return r.columnName===defaultReadingName}));_this5.compareObject.readingFieldId=energyDelta?energyDelta.id:_this5.readingFields[0].id}})):"space"===this.compareObject.type&&this.compareObject.spaceId&&this.$util.loadSpaceReadingFields(this.compareObject.spaceId).then((function(readingFields){_this5.readingFields="enpi"!==_this5.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.typeEnum._name})),!_this5.compareObject.readingFieldId&&_this5.readingFields.length&&(_this5.compareObject.readingFieldId=_this5.readingFields[0].id)}))},selectBuilding:function(){"meter"===this.type?(this.compareObject.type="asset",this.loadSubMeters()):"enpi"===this.type&&(this.compareObject.type="space",this.compareObject.spaceId=parseInt(this.compareObject.buildingId),this.loadReadingFields())},loadSubMeters:function(){var self=this,url="/dashboard/getSubMeters?buildingId="+this.compareObject.buildingId;self.$http.get(url).then((function(response){var energyAssets=response.data.energyMeters,subMeterList=[];if(energyAssets&&self.assetList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(energyAssets);try{var _loop=function(){var ea=_step.value,asset=self.assetList.find((function(aa){return aa.id===ea.id}));asset&&subMeterList.push(ea)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}else subMeterList=energyAssets;self.subMeters=subMeterList,self.compareObject.assetId&&self.loadReadingFields()}))}}},components_FAddDataPointvue_type_script_lang_js=FAddDataPointvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAddDataPointvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAddDataPoint=component.exports},
/***/250620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"03daa5e7a5fe4964f41cd5e0c6dbcdb3.svg";
/***/},
/***/667527:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"00e2f8b54392f5c9d15bf4a60fcf5285.svg";
/***/},
/***/215748:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"5345996a3e23b269740d087ef40865a0.svg";
/***/},
/***/66421:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"c910db575c48d0fe41acc805914ae6e3.svg";
/***/},
/***/234092:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6c58db075133753719556d2c028b3866.svg";
/***/},
/***/364509:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"fd8f739b92b6676daf0753f33e720f38.svg";
/***/},
/***/94610:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6c58db075133753719556d2c028b3866.svg";
/***/},
/***/257672:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"925255607fdfd98037a9cc8be57c1e71.svg";
/***/},
/***/287369:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2bd79920c70a2619bc1d9551cf37a2b0.svg";
/***/},
/***/272759:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f9aeac3fc903db6c763e477ac546bff5.svg";
/***/},
/***/128896:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"5c4cf3da9f70a3d372ae4686ada3c226.svg";
/***/},
/***/124194:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2fa47e7609ae6a73c67cabc69ea00952.svg";
/***/},
/***/244082:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"b196366833e6e15e7a59ecf42576bb76.svg";
/***/},
/***/709821:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"7c868005e47ecc42f52d9af1306a58b5.svg";
/***/},
/***/769122:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"fcab5b6cfb2ae0abdbd984859f71b8fd.svg";
/***/},
/***/311990:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"535afa9871880d5e44a1a8aea3072984.svg";
/***/},
/***/56219:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6f2354d7298b2cff7e222dfbea1b071c.svg";
/***/},
/***/199104:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6f2354d7298b2cff7e222dfbea1b071c.svg";
/***/},
/***/526917:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"e0622e5af13586ad6b4b158987cddb04.svg";
/***/},
/***/452147:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f27e80189b145bb18fb57d6091e517ca.svg";
/***/},
/***/607343:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d97e85f56171b8ff89245e8cc4cd947a.svg";
/***/},
/***/895167:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"603dd3d6a1f4ae4163e10276a3f4bd3d.svg";
/***/},
/***/58899:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4c9a7c64012a2f01dc16cbd43e74c9b3.svg";
/***/},
/***/516615:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f5ac1ecd58898bcca9f15043de765de0.svg";
/***/},
/***/621578:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"bbe79a59c4abec579644cd36c47628f3.svg";
/***/},
/***/99469:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"c02b6a98da05ac72d94483a93776b086.svg";
/***/},
/***/545066:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"177dbc6500d9588d4968134386320a73.svg";
/***/},
/***/967430:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"55fd2b546d153e8c72fa1b7c44f5e140.svg";
/***/},
/***/498943:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0494946fb54bcf6de7d2ad91e84f098c.svg";
/***/},
/***/987978:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0494946fb54bcf6de7d2ad91e84f098c.svg";
/***/},
/***/632253:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6a223e1e4d441bc1de4577da999130c8.svg";
/***/},
/***/698897:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"54c10d8a804763c2bce6f07d20b2582c.svg";
/***/},
/***/248463:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aeb80f13765fbe8492af49c8d7f583f7.svg";
/***/},
/***/705476:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"49247e70a9554a695adbeb5aa616f318.svg";
/***/},
/***/650566:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./reading-card-graph.jpg":511533,"./reading-card1.jpg":245250,"./reading-card2.jpg":868962,"./reading-card4.jpg":954208,"./reading-card5.jpg":435740,"./target-meter-6.jpg":792803,"./target-meter1.jpg":639598,"./target-meter2.jpg":40510,"./target-meter3.jpg":795045,"./target-meter4.jpg":957135,"./target-meter5.jpg":3871,"./target-meter6.jpg":661998,"./target-meter7.jpg":835400};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=650566},
/***/945239:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./AHU.png":321917,"./AHUMaincard1.png":223245,"./AHUMaincard2.png":69039,"./AHUMaincard3.jpg":61927,"./Auto_icon.svg":66421,"./Drop_icon.svg":234092,"./Drop_icon_off.svg":364509,"./Drop_icon_on.svg":94610,"./ExhanustFanicon_off.svg":257672,"./ExhanustFanicon_on.svg":287369,"./Group-4.svg":272759,"./Group.svg":128896,"./HVAC10.png":595188,"./HVAC4.png":396926,"./HVAC5.png":568039,"./HVAC6.png":798898,"./HVAC7.png":325038,"./HVAC8.png":362146,"./HVAC9.png":778456,"./HeatWheelicon_off.svg":124194,"./HeatWheelicon_on.svg":244082,"./Level-btn.png":516332,"./Light-layout.png":715614,"./Manual_icon.svg":709821,"./SupplyFanicon_off.svg":769122,"./SupplyFanicon_on.svg":311990,"./Water-tank.png":117686,"./Wave_circle_icon_off.svg":56219,"./Wave_circle_icon_on.svg":199104,"./active_clock.svg":526917,"./bell-dot-icon.svg":452147,"./box_icon_off.svg":607343,"./box_icon_on.svg":895167,"./clock.svg":58899,"./colorpicker.svg":516615,"./fast.svg":621578,"./formula.svg":99469,"./group1.png":611203,"./group2.png":151826,"./light-bulb-off.svg":545066,"./light-bulb-on.svg":967430,"./off-on-icon.1.svg":498943,"./off-on-icon.svg":987978,"./pump.png":376416,"./shape_icon.svg":632253,"./thermometer.svg":698897,"./volve-icon.svg":248463,"./wave_icon.svg":705476};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=945239},
/***/511533:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card-graph.78b5c414.jpg"},
/***/245250:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card1.2c81304e.jpg"},
/***/868962:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card2.1b3e95c0.jpg"},
/***/954208:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card4.a00183bd.jpg"},
/***/435740:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/reading-card5.6f1d39bd.jpg"},
/***/792803:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter-6.d7dfff56.jpg"},
/***/639598:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter1.3f8d830b.jpg"},
/***/40510:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter2.a1a248b0.jpg"},
/***/795045:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter3.792dde74.jpg"},
/***/957135:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter4.eaab9195.jpg"},
/***/3871:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter5.7e6b63d6.jpg"},
/***/661998:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter6.5f5e7a7f.jpg"},
/***/835400:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/target-meter7.d4b89373.jpg"},
/***/665600:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/readingGauge.67aa9156.png"},
/***/723815:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/readingGraph.7d43cb56.png"},
/***/321917:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/AHU.49bfb78b.png"},
/***/223245:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/AHUMaincard1.507bd3bc.png"},
/***/69039:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/61927:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/AHUMaincard3.95ae0457.jpg"},
/***/595188:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/HVAC10.68bb571d.png"},
/***/396926:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/HVAC4.9447df9a.png"},
/***/568039:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/HVAC5.aab9d853.png"},
/***/798898:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/HVAC6.58576df4.png"},
/***/325038:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/HVAC7.1b9f4f1e.png"},
/***/362146:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/HVAC8.ac2b7327.png"},
/***/778456:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/HVAC9.a6112c0d.png"},
/***/516332:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/715614:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/117686:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/Water-tank.f7efa30c.png"},
/***/611203:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/group1.9bc0d8ec.png"},
/***/151826:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/group2.a93f2dc2.png"},
/***/376416:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/83023.js.map