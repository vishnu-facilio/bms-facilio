"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[91132],{
/***/986895:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */C3:function(){/* binding */return OutlineModel}
/* harmony export */});
/* unused harmony exports TreeElement, OutlineElement, OutlineGroup */
/* harmony import */var _base_common_arrays_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(609488),_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(471050),_base_common_errors_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(817301),_base_common_iterator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(353725),_base_common_map_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(843702),_common_core_range_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(624314),_common_modes_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(860303),_common_modes_languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(305405);
/* harmony import */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class TreeElement{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(candidate,container){
// complex id-computation which contains the origin/extension,
// the parent path, and some dedupe logic when names collide
let candidateId;"string"===typeof candidate?candidateId=`${container.id}/${candidate}`:(candidateId=`${container.id}/${candidate.name}`,void 0!==container.children.get(candidateId)&&(candidateId=`${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`));let id=candidateId;for(let i=0;void 0!==container.children.get(id);i++)id=`${candidateId}_${i}`;return id}static empty(element){return 0===element.children.size}}class OutlineElement extends TreeElement{constructor(id,parent,symbol){super(),this.id=id,this.parent=parent,this.symbol=symbol,this.children=new Map}}class OutlineGroup extends TreeElement{constructor(id,parent,label,order){super(),this.id=id,this.parent=parent,this.label=label,this.order=order,this.children=new Map}}class OutlineModel extends TreeElement{constructor(uri){super(),this.uri=uri,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(textModel,token){let key=this._keys.for(textModel,!0),data=OutlineModel._requests.get(key);if(!data){let source=new _base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__/* .CancellationTokenSource */.A;data={promiseCnt:0,source:source,promise:OutlineModel._create(textModel,source.token),model:void 0},OutlineModel._requests.set(key,data);
// keep moving average of request durations
const now=Date.now();data.promise.then((()=>{this._requestDurations.update(textModel,Date.now()-now)}))}return data.model?Promise.resolve(data.model):(
// increase usage counter
data.promiseCnt+=1,token.onCancellationRequested((()=>{
// last -> cancel provider request, remove cached promise
0===--data.promiseCnt&&(data.source.cancel(),OutlineModel._requests.delete(key))})),new Promise(((resolve,reject)=>{data.promise.then((model=>{data.model=model,resolve(model)}),(err=>{OutlineModel._requests.delete(key),reject(err)}))})))}static _create(textModel,token){const cts=new _base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__/* .CancellationTokenSource */.A(token),result=new OutlineModel(textModel.uri),provider=_common_modes_js__WEBPACK_IMPORTED_MODULE_4__/* .DocumentSymbolProviderRegistry */.vJ.ordered(textModel),promises=provider.map(((provider,index)=>{var _a;let id=TreeElement.findId(`provider_${index}`,result),group=new OutlineGroup(id,result,null!==(_a=provider.displayName)&&void 0!==_a?_a:"Unknown Outline Provider",index);return Promise.resolve(provider.provideDocumentSymbols(textModel,cts.token)).then((result=>{for(const info of result||[])OutlineModel._makeOutlineElement(info,group);return group}),(err=>((0,_base_common_errors_js__WEBPACK_IMPORTED_MODULE_1__/* .onUnexpectedExternalError */.Cp)(err),group))).then((group=>{TreeElement.empty(group)?group.remove():result._groups.set(id,group)}))})),listener=_common_modes_js__WEBPACK_IMPORTED_MODULE_4__/* .DocumentSymbolProviderRegistry */.vJ.onDidChange((()=>{const newProvider=_common_modes_js__WEBPACK_IMPORTED_MODULE_4__/* .DocumentSymbolProviderRegistry */.vJ.ordered(textModel);(0,_base_common_arrays_js__WEBPACK_IMPORTED_MODULE_6__/* .equals */.fS)(newProvider,provider)||cts.cancel()}));return Promise.all(promises).then((()=>cts.token.isCancellationRequested&&!token.isCancellationRequested?OutlineModel._create(textModel,token):result._compact())).finally((()=>{listener.dispose()}))}static _makeOutlineElement(info,container){let id=TreeElement.findId(info,container),res=new OutlineElement(id,container,info);if(info.children)for(const childInfo of info.children)OutlineModel._makeOutlineElement(childInfo,res);container.children.set(res.id,res)}_compact(){let count=0;for(const[key,group]of this._groups)0===group.children.size?// empty
this._groups.delete(key):count+=1;if(1!==count)
this.children=this._groups;else{
// adopt all elements of the first group
let group=_base_common_iterator_js__WEBPACK_IMPORTED_MODULE_2__/* .Iterable */.$.first(this._groups.values());for(let[,child]of group.children)child.parent=this,this.children.set(child.id,child)}return this}getTopLevelSymbols(){const roots=[];for(const child of this.children.values())child instanceof OutlineElement?roots.push(child.symbol):roots.push(..._base_common_iterator_js__WEBPACK_IMPORTED_MODULE_2__/* .Iterable */.$.map(child.children.values(),(child=>child.symbol)));return roots.sort(((a,b)=>_common_core_range_js__WEBPACK_IMPORTED_MODULE_7__/* .Range */.e.compareRangesUsingStarts(a.range,b.range)))}asListOfDocumentSymbols(){const roots=this.getTopLevelSymbols(),bucket=[];return OutlineModel._flattenDocumentSymbols(bucket,roots,""),bucket.sort(((a,b)=>_common_core_range_js__WEBPACK_IMPORTED_MODULE_7__/* .Range */.e.compareRangesUsingStarts(a.range,b.range)))}static _flattenDocumentSymbols(bucket,entries,overrideContainerLabel){for(const entry of entries)bucket.push({kind:entry.kind,tags:entry.tags,name:entry.name,detail:entry.detail,containerName:entry.containerName||overrideContainerLabel,range:entry.range,selectionRange:entry.selectionRange,children:void 0}),
// Recurse over children
entry.children&&OutlineModel._flattenDocumentSymbols(bucket,entry.children,entry.name)}}OutlineModel._requestDurations=new _common_modes_languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_5__/* .LanguageFeatureRequestDelays */.Y(_common_modes_js__WEBPACK_IMPORTED_MODULE_4__/* .DocumentSymbolProviderRegistry */.vJ,350),OutlineModel._requests=new _base_common_map_js__WEBPACK_IMPORTED_MODULE_3__/* .LRUCache */.z6(9,.75),OutlineModel._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(textModel,version){return`${textModel.id}/${version?textModel.getVersionId():""}/${this._hash(_common_modes_js__WEBPACK_IMPORTED_MODULE_4__/* .DocumentSymbolProviderRegistry */.vJ.all(textModel))}`}_hash(providers){let result="";for(const provider of providers){let n=this._data.get(provider);"undefined"===typeof n&&(n=this._counter++,this._data.set(provider,n)),result+=n}return result}}},
/***/744325:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Qq:function(){/* binding */return formatDocumentWithSelectedProvider},
/* harmony export */Qs:function(){/* binding */return getOnTypeFormattingEdits},
/* harmony export */Zg:function(){/* binding */return alertFormattingEdits},
/* harmony export */x$:function(){/* binding */return formatDocumentRangesWithSelectedProvider},
/* harmony export */xC:function(){/* binding */return FormattingConflicts}
/* harmony export */});
/* unused harmony exports getRealAndSyntheticDocumentFormattersOrdered, formatDocumentRangesWithProvider, formatDocumentWithProvider, getDocumentRangeFormattingEditsUntilResult, getDocumentFormattingEditsUntilResult */
/* harmony import */var _base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(585152),_base_common_arrays_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(609488),_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(471050),_base_common_errors_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(817301),_base_common_iterator_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(353725),_base_common_linkedList_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(791741),_base_common_types_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(998401),_base_common_uri_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70666),_browser_core_editorState_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(355812),_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(65520),_common_core_position_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(50187),_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(624314),_common_core_selection_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(203860),_common_modes_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(860303),_common_services_editorWorkerService_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(590469),_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(288216),_formattingEdit_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(469939),_nls_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(663580),_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(820942),_platform_extensions_common_extensions_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(390553),_platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(472065),__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
/* harmony import */function alertFormattingEdits(edits){if(edits=edits.filter((edit=>edit.range)),!edits.length)return;let{range:range}=edits[0];for(let i=1;i<edits.length;i++)range=_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.plusRange(range,edits[i].range);const{startLineNumber:startLineNumber,endLineNumber:endLineNumber}=range;startLineNumber===endLineNumber?1===edits.length?(0,_base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__/* .alert */.Z9)(_nls_js__WEBPACK_IMPORTED_MODULE_14__/* .localize */.N("hint11","Made 1 formatting edit on line {0}",startLineNumber)):(0,_base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__/* .alert */.Z9)(_nls_js__WEBPACK_IMPORTED_MODULE_14__/* .localize */.N("hintn1","Made {0} formatting edits on line {1}",edits.length,startLineNumber)):1===edits.length?(0,_base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__/* .alert */.Z9)(_nls_js__WEBPACK_IMPORTED_MODULE_14__/* .localize */.N("hint1n","Made 1 formatting edit between lines {0} and {1}",startLineNumber,endLineNumber)):(0,_base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__/* .alert */.Z9)(_nls_js__WEBPACK_IMPORTED_MODULE_14__/* .localize */.N("hintnn","Made {0} formatting edits between lines {1} and {2}",edits.length,startLineNumber,endLineNumber))}function getRealAndSyntheticDocumentFormattersOrdered(model){const result=[],seen=new Set,docFormatter=_common_modes_js__WEBPACK_IMPORTED_MODULE_8__/* .DocumentFormattingEditProviderRegistry */.Az.ordered(model);for(const formatter of docFormatter)result.push(formatter),formatter.extensionId&&seen.add(_platform_extensions_common_extensions_js__WEBPACK_IMPORTED_MODULE_15__/* .ExtensionIdentifier */.k.toKey(formatter.extensionId));
// (2) add all range formatter as document formatter (unless the same extension already did that)
const rangeFormatter=_common_modes_js__WEBPACK_IMPORTED_MODULE_8__/* .DocumentRangeFormattingEditProviderRegistry */.vN.ordered(model);for(const formatter of rangeFormatter){if(formatter.extensionId){if(seen.has(_platform_extensions_common_extensions_js__WEBPACK_IMPORTED_MODULE_15__/* .ExtensionIdentifier */.k.toKey(formatter.extensionId)))continue;seen.add(_platform_extensions_common_extensions_js__WEBPACK_IMPORTED_MODULE_15__/* .ExtensionIdentifier */.k.toKey(formatter.extensionId))}result.push({displayName:formatter.displayName,extensionId:formatter.extensionId,provideDocumentFormattingEdits(model,options,token){return formatter.provideDocumentRangeFormattingEdits(model,model.getFullModelRange(),options,token)}})}return result}class FormattingConflicts{static setFormatterSelector(selector){const remove=FormattingConflicts._selectors.unshift(selector);return{dispose:remove}}static select(formatter,document,mode){return __awaiter(this,void 0,void 0,(function*(){if(0===formatter.length)return;const selector=_base_common_iterator_js__WEBPACK_IMPORTED_MODULE_3__/* .Iterable */.$.first(FormattingConflicts._selectors);return selector?yield selector(formatter,document,mode):void 0}))}}function formatDocumentRangesWithSelectedProvider(accessor,editorOrModel,rangeOrRanges,mode,progress,token){return __awaiter(this,void 0,void 0,(function*(){const instaService=accessor.get(_platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_12__/* .IInstantiationService */.TG),model=(0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_7__/* .isCodeEditor */.CL)(editorOrModel)?editorOrModel.getModel():editorOrModel,provider=_common_modes_js__WEBPACK_IMPORTED_MODULE_8__/* .DocumentRangeFormattingEditProviderRegistry */.vN.ordered(model),selected=yield FormattingConflicts.select(provider,model,mode);selected&&(progress.report(selected),yield instaService.invokeFunction(formatDocumentRangesWithProvider,selected,editorOrModel,rangeOrRanges,token))}))}function formatDocumentRangesWithProvider(accessor,provider,editorOrModel,rangeOrRanges,token){return __awaiter(this,void 0,void 0,(function*(){const workerService=accessor.get(_common_services_editorWorkerService_js__WEBPACK_IMPORTED_MODULE_9__/* .IEditorWorkerService */.p);let model,cts;(0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_7__/* .isCodeEditor */.CL)(editorOrModel)?(model=editorOrModel.getModel(),cts=new _browser_core_editorState_js__WEBPACK_IMPORTED_MODULE_6__/* .EditorStateCancellationTokenSource */.Dl(editorOrModel,5/* Position */,void 0,token)):(model=editorOrModel,cts=new _browser_core_editorState_js__WEBPACK_IMPORTED_MODULE_6__/* .TextModelCancellationTokenSource */.YQ(editorOrModel,token));
// make sure that ranges don't overlap nor touch each other
let ranges=[],len=0;for(let range of(0,_base_common_arrays_js__WEBPACK_IMPORTED_MODULE_16__/* .asArray */._2)(rangeOrRanges).sort(_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.compareRangesUsingStarts))len>0&&_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.areIntersectingOrTouching(ranges[len-1],range)?ranges[len-1]=_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.fromPositions(ranges[len-1].getStartPosition(),range.getEndPosition()):len=ranges.push(range);const computeEdits=range=>__awaiter(this,void 0,void 0,(function*(){return(yield provider.provideDocumentRangeFormattingEdits(model,range,model.getFormattingOptions(),cts.token))||[]})),hasIntersectingEdit=(a,b)=>{if(!a.length||!b.length)return!1;
// quick exit if the list of ranges are completely unrelated [O(n)]
const mergedA=a.reduce(((acc,val)=>_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.plusRange(acc,val.range)),a[0].range);if(!b.some((x=>_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.intersectRanges(mergedA,x.range))))return!1;
// fallback to a complete check [O(n^2)]
for(let edit of a)for(let otherEdit of b)if(_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.intersectRanges(edit.range,otherEdit.range))return!0;return!1},allEdits=[],rawEditsList=[];try{for(let range of ranges){if(cts.token.isCancellationRequested)return!0;rawEditsList.push(yield computeEdits(range))}for(let i=0;i<ranges.length;++i)for(let j=i+1;j<ranges.length;++j){if(cts.token.isCancellationRequested)return!0;if(hasIntersectingEdit(rawEditsList[i],rawEditsList[j])){
// Merge ranges i and j into a single range, recompute the associated edits
const mergedRange=_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.plusRange(ranges[i],ranges[j]),edits=yield computeEdits(mergedRange);ranges.splice(j,1),ranges.splice(i,1),ranges.push(mergedRange),rawEditsList.splice(j,1),rawEditsList.splice(i,1),rawEditsList.push(edits),
// Restart scanning
i=0,j=0}}for(let rawEdits of rawEditsList){if(cts.token.isCancellationRequested)return!0;const minimalEdits=yield workerService.computeMoreMinimalEdits(model.uri,rawEdits);minimalEdits&&allEdits.push(...minimalEdits)}}finally{cts.dispose()}if(0===allEdits.length)return!1;if((0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_7__/* .isCodeEditor */.CL)(editorOrModel))
// use editor to apply edits
_formattingEdit_js__WEBPACK_IMPORTED_MODULE_17__/* .FormattingEdit */.V.execute(editorOrModel,allEdits,!0),alertFormattingEdits(allEdits),editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(),1/* Immediate */);else{
// use model to apply edits
const[{range:range}]=allEdits,initialSelection=new _common_core_selection_js__WEBPACK_IMPORTED_MODULE_18__/* .Selection */.Y(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn);model.pushEditOperations([initialSelection],allEdits.map((edit=>({text:edit.text,range:_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.lift(edit.range),forceMoveMarkers:!0}))),(undoEdits=>{for(const{range:range}of undoEdits)if(_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.areIntersectingOrTouching(range,initialSelection))return[new _common_core_selection_js__WEBPACK_IMPORTED_MODULE_18__/* .Selection */.Y(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn)];return null}))}return!0}))}function formatDocumentWithSelectedProvider(accessor,editorOrModel,mode,progress,token){return __awaiter(this,void 0,void 0,(function*(){const instaService=accessor.get(_platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_12__/* .IInstantiationService */.TG),model=(0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_7__/* .isCodeEditor */.CL)(editorOrModel)?editorOrModel.getModel():editorOrModel,provider=getRealAndSyntheticDocumentFormattersOrdered(model),selected=yield FormattingConflicts.select(provider,model,mode);selected&&(progress.report(selected),yield instaService.invokeFunction(formatDocumentWithProvider,selected,editorOrModel,mode,token))}))}function formatDocumentWithProvider(accessor,provider,editorOrModel,mode,token){return __awaiter(this,void 0,void 0,(function*(){const workerService=accessor.get(_common_services_editorWorkerService_js__WEBPACK_IMPORTED_MODULE_9__/* .IEditorWorkerService */.p);let model,cts,edits;(0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_7__/* .isCodeEditor */.CL)(editorOrModel)?(model=editorOrModel.getModel(),cts=new _browser_core_editorState_js__WEBPACK_IMPORTED_MODULE_6__/* .EditorStateCancellationTokenSource */.Dl(editorOrModel,5/* Position */,void 0,token)):(model=editorOrModel,cts=new _browser_core_editorState_js__WEBPACK_IMPORTED_MODULE_6__/* .TextModelCancellationTokenSource */.YQ(editorOrModel,token));try{const rawEdits=yield provider.provideDocumentFormattingEdits(model,model.getFormattingOptions(),cts.token);if(edits=yield workerService.computeMoreMinimalEdits(model.uri,rawEdits),cts.token.isCancellationRequested)return!0}finally{cts.dispose()}if(!edits||0===edits.length)return!1;if((0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_7__/* .isCodeEditor */.CL)(editorOrModel))
// use editor to apply edits
_formattingEdit_js__WEBPACK_IMPORTED_MODULE_17__/* .FormattingEdit */.V.execute(editorOrModel,edits,2/* Silent */!==mode),2/* Silent */!==mode&&(alertFormattingEdits(edits),editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(),1/* Immediate */));else{
// use model to apply edits
const[{range:range}]=edits,initialSelection=new _common_core_selection_js__WEBPACK_IMPORTED_MODULE_18__/* .Selection */.Y(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn);model.pushEditOperations([initialSelection],edits.map((edit=>({text:edit.text,range:_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.lift(edit.range),forceMoveMarkers:!0}))),(undoEdits=>{for(const{range:range}of undoEdits)if(_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.areIntersectingOrTouching(range,initialSelection))return[new _common_core_selection_js__WEBPACK_IMPORTED_MODULE_18__/* .Selection */.Y(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn)];return null}))}return!0}))}function getDocumentRangeFormattingEditsUntilResult(workerService,model,range,options,token){return __awaiter(this,void 0,void 0,(function*(){const providers=_common_modes_js__WEBPACK_IMPORTED_MODULE_8__/* .DocumentRangeFormattingEditProviderRegistry */.vN.ordered(model);for(const provider of providers){let rawEdits=yield Promise.resolve(provider.provideDocumentRangeFormattingEdits(model,range,options,token)).catch(_base_common_errors_js__WEBPACK_IMPORTED_MODULE_2__/* .onUnexpectedExternalError */.Cp);if((0,_base_common_arrays_js__WEBPACK_IMPORTED_MODULE_16__/* .isNonEmptyArray */.Of)(rawEdits))return yield workerService.computeMoreMinimalEdits(model.uri,rawEdits)}}))}function getDocumentFormattingEditsUntilResult(workerService,model,options,token){return __awaiter(this,void 0,void 0,(function*(){const providers=getRealAndSyntheticDocumentFormattersOrdered(model);for(const provider of providers){let rawEdits=yield Promise.resolve(provider.provideDocumentFormattingEdits(model,options,token)).catch(_base_common_errors_js__WEBPACK_IMPORTED_MODULE_2__/* .onUnexpectedExternalError */.Cp);if((0,_base_common_arrays_js__WEBPACK_IMPORTED_MODULE_16__/* .isNonEmptyArray */.Of)(rawEdits))return yield workerService.computeMoreMinimalEdits(model.uri,rawEdits)}}))}function getOnTypeFormattingEdits(workerService,model,position,ch,options){const providers=_common_modes_js__WEBPACK_IMPORTED_MODULE_8__/* .OnTypeFormattingEditProviderRegistry */.ln.ordered(model);return 0===providers.length||providers[0].autoFormatTriggerCharacters.indexOf(ch)<0?Promise.resolve(void 0):Promise.resolve(providers[0].provideOnTypeFormattingEdits(model,position,ch,options,_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_1__/* .CancellationToken */.T.None)).catch(_base_common_errors_js__WEBPACK_IMPORTED_MODULE_2__/* .onUnexpectedExternalError */.Cp).then((edits=>workerService.computeMoreMinimalEdits(model.uri,edits)))}FormattingConflicts._selectors=new _base_common_linkedList_js__WEBPACK_IMPORTED_MODULE_4__/* .LinkedList */.S,_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_11__/* .CommandsRegistry */.P.registerCommand("_executeFormatRangeProvider",(function(accessor,...args){return __awaiter(this,void 0,void 0,(function*(){const[resource,range,options]=args;(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_19__/* .assertType */.p_)(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_5__/* .URI */.o.isUri(resource)),(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_19__/* .assertType */.p_)(_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.isIRange(range));const resolverService=accessor.get(_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_10__/* .ITextModelService */.S),workerService=accessor.get(_common_services_editorWorkerService_js__WEBPACK_IMPORTED_MODULE_9__/* .IEditorWorkerService */.p),reference=yield resolverService.createModelReference(resource);try{return getDocumentRangeFormattingEditsUntilResult(workerService,reference.object.textEditorModel,_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.lift(range),options,_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_1__/* .CancellationToken */.T.None)}finally{reference.dispose()}}))})),_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_11__/* .CommandsRegistry */.P.registerCommand("_executeFormatDocumentProvider",(function(accessor,...args){return __awaiter(this,void 0,void 0,(function*(){const[resource,options]=args;(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_19__/* .assertType */.p_)(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_5__/* .URI */.o.isUri(resource));const resolverService=accessor.get(_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_10__/* .ITextModelService */.S),workerService=accessor.get(_common_services_editorWorkerService_js__WEBPACK_IMPORTED_MODULE_9__/* .IEditorWorkerService */.p),reference=yield resolverService.createModelReference(resource);try{return getDocumentFormattingEditsUntilResult(workerService,reference.object.textEditorModel,options,_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_1__/* .CancellationToken */.T.None)}finally{reference.dispose()}}))})),_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_11__/* .CommandsRegistry */.P.registerCommand("_executeFormatOnTypeProvider",(function(accessor,...args){return __awaiter(this,void 0,void 0,(function*(){const[resource,position,ch,options]=args;(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_19__/* .assertType */.p_)(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_5__/* .URI */.o.isUri(resource)),(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_19__/* .assertType */.p_)(_common_core_position_js__WEBPACK_IMPORTED_MODULE_20__/* .Position */.L.isIPosition(position)),(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_19__/* .assertType */.p_)("string"===typeof ch);const resolverService=accessor.get(_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_10__/* .ITextModelService */.S),workerService=accessor.get(_common_services_editorWorkerService_js__WEBPACK_IMPORTED_MODULE_9__/* .IEditorWorkerService */.p),reference=yield resolverService.createModelReference(resource);try{return getOnTypeFormattingEdits(workerService,reference.object.textEditorModel,_common_core_position_js__WEBPACK_IMPORTED_MODULE_20__/* .Position */.L.lift(position),ch,options)}finally{reference.dispose()}}))}))},
/***/469939:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */V:function(){/* binding */return FormattingEdit}
/* harmony export */});
/* harmony import */var _common_core_editOperation_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(969386),_common_core_range_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(624314);
/* harmony import */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class FormattingEdit{static _handleEolEdits(editor,edits){let newEol,singleEdits=[];for(let edit of edits)"number"===typeof edit.eol&&(newEol=edit.eol),edit.range&&"string"===typeof edit.text&&singleEdits.push(edit);return"number"===typeof newEol&&editor.hasModel()&&editor.getModel().pushEOL(newEol),singleEdits}static _isFullModelReplaceEdit(editor,edit){if(!editor.hasModel())return!1;const model=editor.getModel(),editRange=model.validateRange(edit.range),fullModelRange=model.getFullModelRange();return fullModelRange.equalsRange(editRange)}static execute(editor,_edits,addUndoStops){addUndoStops&&editor.pushUndoStop();const edits=FormattingEdit._handleEolEdits(editor,_edits);1===edits.length&&FormattingEdit._isFullModelReplaceEdit(editor,edits[0])?
// We use replace semantics and hope that markers stay put...
editor.executeEdits("formatEditsCommand",edits.map((edit=>_common_core_editOperation_js__WEBPACK_IMPORTED_MODULE_0__/* .EditOperation */.h.replace(_common_core_range_js__WEBPACK_IMPORTED_MODULE_1__/* .Range */.e.lift(edit.range),edit.text)))):editor.executeEdits("formatEditsCommand",edits.map((edit=>_common_core_editOperation_js__WEBPACK_IMPORTED_MODULE_0__/* .EditOperation */.h.replaceMove(_common_core_range_js__WEBPACK_IMPORTED_MODULE_1__/* .Range */.e.lift(edit.range),edit.text)))),addUndoStops&&editor.pushUndoStop()}}
/***/},
/***/560829:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{J:function(){/* binding */return ReferencesController}});
// UNUSED EXPORTS: ctxReferenceSearchVisible
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/async.js
var common_async=__webpack_require__(715393),errors=__webpack_require__(817301),keyCodes=__webpack_require__(22258),lifecycle=__webpack_require__(905976),codeEditorService=__webpack_require__(611640),position=__webpack_require__(50187),core_range=__webpack_require__(624314),peekView=__webpack_require__(759774),nls=__webpack_require__(663580),commands=__webpack_require__(820942),configuration=__webpack_require__(133108),contextkey=__webpack_require__(938819),instantiation=__webpack_require__(472065),keybindingsRegistry=__webpack_require__(49989),browser_listService=__webpack_require__(932414),notification=__webpack_require__(759422),storage=__webpack_require__(752365),referencesModel=__webpack_require__(171455),dom=__webpack_require__(965321),splitview=__webpack_require__(23937),color=__webpack_require__(41264),common_event=__webpack_require__(104669),network=__webpack_require__(566663),resources=__webpack_require__(195935),embeddedCodeEditorWidget=__webpack_require__(284527),textModel=__webpack_require__(724979),languageConfigurationRegistry=__webpack_require__(594660),modeService=__webpack_require__(771531),resolverService=__webpack_require__(288216),countBadge=__webpack_require__(467488),highlightedLabel=__webpack_require__(734650),iconLabel=__webpack_require__(10489),filters=__webpack_require__(75392),labels=__webpack_require__(968843),keybinding=__webpack_require__(891847),label=__webpack_require__(544349),styler=__webpack_require__(788810),themeService=__webpack_require__(897781),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/errors.js
let DataSource=class{constructor(_resolverService){this._resolverService=_resolverService}hasChildren(element){return element instanceof referencesModel/* ReferencesModel */.oQ||element instanceof referencesModel/* FileReferences */.F2}getChildren(element){if(element instanceof referencesModel/* ReferencesModel */.oQ)return element.groups;if(element instanceof referencesModel/* FileReferences */.F2)return element.resolve(this._resolverService).then((val=>val.children));throw new Error("bad tree")}};DataSource=__decorate([__param(0,resolverService/* ITextModelService */.S)],DataSource);
//#endregion
class Delegate{getHeight(){return 23}getTemplateId(element){return element instanceof referencesModel/* FileReferences */.F2?FileReferencesRenderer.id:OneReferenceRenderer.id}}let StringRepresentationProvider=class{constructor(_keybindingService){this._keybindingService=_keybindingService}getKeyboardNavigationLabel(element){var _a;if(element instanceof referencesModel/* OneReference */.WX){const parts=null===(_a=element.parent.getPreview(element))||void 0===_a?void 0:_a.preview(element.range);if(parts)return parts.value}
// FileReferences or unresolved OneReference
return(0,resources/* basename */.EZ)(element.uri)}};StringRepresentationProvider=__decorate([__param(0,keybinding/* IKeybindingService */.d)],StringRepresentationProvider);class IdentityProvider{getId(element){return element instanceof referencesModel/* OneReference */.WX?element.id:element.uri}}
//#region render: File
let FileReferencesTemplate=class extends lifecycle/* Disposable */.JT{constructor(container,_uriLabel,themeService){super(),this._uriLabel=_uriLabel;const parent=document.createElement("div");parent.classList.add("reference-file"),this.file=this._register(new iconLabel/* IconLabel */.g(parent,{supportHighlights:!0})),this.badge=new countBadge/* CountBadge */.Z(dom/* append */.R3(parent,dom.$(".count"))),this._register((0,styler/* attachBadgeStyler */.WZ)(this.badge,themeService)),container.appendChild(parent)}set(element,matches){let parent=(0,resources/* dirname */.XX)(element.uri);this.file.setLabel((0,labels/* getBaseLabel */.p)(element.uri),this._uriLabel.getUriLabel(parent,{relative:!0}),{title:this._uriLabel.getUriLabel(element.uri),matches:matches});const len=element.children.length;this.badge.setCount(len),len>1?this.badge.setTitleFormat((0,nls/* localize */.N)("referencesCount","{0} references",len)):this.badge.setTitleFormat((0,nls/* localize */.N)("referenceCount","{0} reference",len))}};FileReferencesTemplate=__decorate([__param(1,label/* ILabelService */.e),__param(2,themeService/* IThemeService */.XE)],FileReferencesTemplate);let FileReferencesRenderer=class FileReferencesRenderer{constructor(_instantiationService){this._instantiationService=_instantiationService,this.templateId=FileReferencesRenderer.id}renderTemplate(container){return this._instantiationService.createInstance(FileReferencesTemplate,container)}renderElement(node,index,template){template.set(node.element,(0,filters/* createMatches */.mB)(node.filterData))}disposeTemplate(templateData){templateData.dispose()}};FileReferencesRenderer.id="FileReferencesRenderer",FileReferencesRenderer=__decorate([__param(0,instantiation/* IInstantiationService */.TG)],FileReferencesRenderer);
//#endregion
//#region render: Reference
class OneReferenceTemplate{constructor(container){this.label=new highlightedLabel/* HighlightedLabel */.q(container,!1)}set(element,score){var _a;const preview=null===(_a=element.parent.getPreview(element))||void 0===_a?void 0:_a.preview(element.range);if(preview&&preview.value){
// render search match as highlight unless
// we have score, then render the score
const{value:value,highlight:highlight}=preview;score&&!filters/* FuzzyScore */.CL.isDefault(score)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(value,(0,filters/* createMatches */.mB)(score))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(value,[highlight]))}else
// this means we FAILED to resolve the document or the value is the empty string
this.label.set(`${(0,resources/* basename */.EZ)(element.uri)}:${element.range.startLineNumber+1}:${element.range.startColumn+1}`)}}class OneReferenceRenderer{constructor(){this.templateId=OneReferenceRenderer.id}renderTemplate(container){return new OneReferenceTemplate(container)}renderElement(node,index,templateData){templateData.set(node.element,node.filterData)}disposeTemplate(){}}OneReferenceRenderer.id="OneReferenceRenderer";
//#endregion
class AccessibilityProvider{getWidgetAriaLabel(){return(0,nls/* localize */.N)("treeAriaLabel","References")}getAriaLabel(element){return element.ariaMessage}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/theme/common/colorRegistry.js
var colorRegistry=__webpack_require__(173910),undoRedo=__webpack_require__(364862),referencesWidget_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},referencesWidget_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/undoRedo/common/undoRedo.js
class DecorationsManager{constructor(_editor,_model){this._editor=_editor,this._model=_model,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new lifecycle/* DisposableStore */.SL,this._callOnModelChange=new lifecycle/* DisposableStore */.SL,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const model=this._editor.getModel();if(model)for(let ref of this._model.references)if(ref.uri.toString()===model.uri.toString())return void this._addDecorations(ref.parent)}_addDecorations(reference){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const newDecorations=[],newDecorationsActualIndex=[];for(let i=0,len=reference.children.length;i<len;i++){let oneReference=reference.children[i];this._decorationIgnoreSet.has(oneReference.id)||oneReference.uri.toString()===this._editor.getModel().uri.toString()&&(newDecorations.push({range:oneReference.range,options:DecorationsManager.DecorationOptions}),newDecorationsActualIndex.push(i))}const decorations=this._editor.deltaDecorations([],newDecorations);for(let i=0;i<decorations.length;i++)this._decorations.set(decorations[i],reference.children[newDecorationsActualIndex[i]])}_onDecorationChanged(){const toRemove=[],model=this._editor.getModel();if(model){for(let[decorationId,reference]of this._decorations){const newRange=model.getDecorationRange(decorationId);if(!newRange)continue;let ignore=!1;if(!core_range/* Range */.e.equalsRange(newRange,reference.range)){if(core_range/* Range */.e.spansMultipleLines(newRange))ignore=!0;else{const lineLength=reference.range.endColumn-reference.range.startColumn,newLineLength=newRange.endColumn-newRange.startColumn;lineLength!==newLineLength&&(ignore=!0)}ignore?(this._decorationIgnoreSet.add(reference.id),toRemove.push(decorationId)):reference.range=newRange}}for(let i=0,len=toRemove.length;i<len;i++)this._decorations.delete(toRemove[i]);this._editor.deltaDecorations(toRemove,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}DecorationsManager.DecorationOptions=textModel/* ModelDecorationOptions */.qx.register({description:"reference-decoration",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"reference-decoration"});class LayoutData{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(raw){let ratio,heightInLines;try{const data=JSON.parse(raw);ratio=data.ratio,heightInLines=data.heightInLines}catch(_a){

}return{ratio:ratio||.7,heightInLines:heightInLines||18}}}class ReferencesTree extends browser_listService/* WorkbenchAsyncDataTree */.ls{}
/**
 * ZoneWidget that is shown inside the editor
 */let ReferenceWidget=class extends peekView/* PeekViewWidget */.vk{constructor(editor,_defaultTreeKeyboardSupport,layoutData,themeService,_textModelResolverService,_instantiationService,_peekViewService,_uriLabel,_undoRedoService,_keybindingService,_modeService,_languageConfigurationService){super(editor,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},_instantiationService),this._defaultTreeKeyboardSupport=_defaultTreeKeyboardSupport,this.layoutData=layoutData,this._textModelResolverService=_textModelResolverService,this._instantiationService=_instantiationService,this._peekViewService=_peekViewService,this._uriLabel=_uriLabel,this._undoRedoService=_undoRedoService,this._keybindingService=_keybindingService,this._modeService=_modeService,this._languageConfigurationService=_languageConfigurationService,this._disposeOnNewModel=new lifecycle/* DisposableStore */.SL,this._callOnDispose=new lifecycle/* DisposableStore */.SL,this._onDidSelectReference=new common_event/* Emitter */.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new dom/* Dimension */.Ro(0,0),this._applyTheme(themeService.getColorTheme()),this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(editor,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,lifecycle/* dispose */.B9)(this._preview),(0,lifecycle/* dispose */.B9)(this._previewNotAvailableMessage),(0,lifecycle/* dispose */.B9)(this._tree),(0,lifecycle/* dispose */.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(theme){const borderColor=theme.getColor(peekView/* peekViewBorder */.SC)||color/* Color */.Il.transparent;this.style({arrowColor:borderColor,frameColor:borderColor,headerBackgroundColor:theme.getColor(peekView/* peekViewTitleBackground */.KY)||color/* Color */.Il.transparent,primaryHeadingColor:theme.getColor(peekView/* peekViewTitleForeground */.IH),secondaryHeadingColor:theme.getColor(peekView/* peekViewTitleInfoForeground */.R7)})}show(where){this.editor.revealRangeInCenterIfOutsideViewport(where,0/* Smooth */),super.show(where,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(containerElement){this.setCssClass("reference-zone-widget"),
// message pane
this._messageContainer=dom/* append */.R3(containerElement,dom.$("div.messages")),dom/* hide */.Cp(this._messageContainer),this._splitView=new splitview/* SplitView */.z(containerElement,{orientation:1/* HORIZONTAL */}),
// editor
this._previewContainer=dom/* append */.R3(containerElement,dom.$("div.preview.inline"));let options={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(embeddedCodeEditorWidget/* EmbeddedCodeEditorWidget */.H,this._previewContainer,options,this.editor),dom/* hide */.Cp(this._previewContainer),this._previewNotAvailableMessage=new textModel/* TextModel */.yO(nls/* localize */.N("missingPreviewMessage","no preview available"),textModel/* TextModel */.yO.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),
// tree
this._treeContainer=dom/* append */.R3(containerElement,dom.$("div.ref-tree.inline"));const treeOptions={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new AccessibilityProvider,keyboardNavigationLabelProvider:this._instantiationService.createInstance(StringRepresentationProvider),identityProvider:new IdentityProvider,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:peekView/* peekViewResultsBackground */.M8}};this._defaultTreeKeyboardSupport&&
// the tree will consume `Escape` and prevent the widget from closing
this._callOnDispose.add(dom/* addStandardDisposableListener */.mu(this._treeContainer,"keydown",(e=>{e.equals(9/* Escape */)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(ReferencesTree,"ReferencesWidget",this._treeContainer,new Delegate,[this._instantiationService.createInstance(FileReferencesRenderer),this._instantiationService.createInstance(OneReferenceRenderer)],this._instantiationService.createInstance(DataSource),treeOptions),
// split stuff
this._splitView.addView({onDidChange:common_event/* Event */.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:width=>{this._preview.layout({height:this._dim.height,width:width})}},splitview/* Sizing */.M.Distribute),this._splitView.addView({onDidChange:common_event/* Event */.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:width=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${width}px`,this._tree.layout(this._dim.height,width)}},splitview/* Sizing */.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));
// listen on selection and focus
let onEvent=(element,kind)=>{element instanceof referencesModel/* OneReference */.WX&&("show"===kind&&this._revealReference(element,!1),this._onDidSelectReference.fire({element:element,kind:kind,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?onEvent(e.element,"side"):e.editorOptions.pinned?onEvent(e.element,"goto"):onEvent(e.element,"show")})),dom/* hide */.Cp(this._treeContainer)}_onWidth(width){this._dim&&this._doLayoutBody(this._dim.height,width)}_doLayoutBody(heightInPixel,widthInPixel){super._doLayoutBody(heightInPixel,widthInPixel),this._dim=new dom/* Dimension */.Ro(widthInPixel,heightInPixel),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(widthInPixel),this._splitView.resizeView(0,widthInPixel*this.layoutData.ratio)}setSelection(selection){return this._revealReference(selection,!0).then((()=>{this._model&&(
// show in tree
this._tree.setSelection([selection]),this._tree.setFocus([selection]))}))}setModel(newModel){
// clean up
return this._disposeOnNewModel.clear(),this._model=newModel,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=nls/* localize */.N("noResults","No results"),dom/* show */.$Z(this._messageContainer),Promise.resolve(void 0)):(dom/* hide */.Cp(this._messageContainer),this._decorationsManager=new DecorationsManager(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),
// listen on model changes
this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((reference=>this._tree.rerender(reference)))),
// listen on editor
this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:event,target:target}=e;if(2!==event.detail)return;const element=this._getFocusedReference();element&&this._onDidSelectReference.fire({element:{uri:element.uri,range:target.range},kind:event.ctrlKey||event.metaKey||event.altKey?"side":"open",source:"editor"})}))),
// make sure things are rendered
this.container.classList.add("results-loaded"),dom/* show */.$Z(this._treeContainer),dom/* show */.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[element]=this._tree.getFocus();return element instanceof referencesModel/* OneReference */.WX?element:element instanceof referencesModel/* FileReferences */.F2&&element.children.length>0?element.children[0]:void 0}revealReference(reference){return __awaiter(this,void 0,void 0,(function*(){yield this._revealReference(reference,!1),this._onDidSelectReference.fire({element:reference,kind:"goto",source:"tree"})}))}_revealReference(reference,revealParent){return __awaiter(this,void 0,void 0,(function*(){
// check if there is anything to do...
if(this._revealedReference===reference)return;this._revealedReference=reference,
// Update widget header
reference.uri.scheme!==network/* Schemas */.lg.inMemory?this.setTitle((0,resources/* basenameOrAuthority */.Hx)(reference.uri),this._uriLabel.getUriLabel((0,resources/* dirname */.XX)(reference.uri))):this.setTitle(nls/* localize */.N("peekView.alternateTitle","References"));const promise=this._textModelResolverService.createModelReference(reference.uri);this._tree.getInput()===reference.parent||(revealParent&&this._tree.reveal(reference.parent),yield this._tree.expand(reference.parent)),this._tree.reveal(reference);const ref=yield promise;if(!this._model)
// disposed
return void ref.dispose();(0,lifecycle/* dispose */.B9)(this._previewModelReference);
// show in editor
const model=ref.object;if(model){const scrollType=this._preview.getModel()===model.textEditorModel?0/* Smooth */:1/* Immediate */,sel=core_range/* Range */.e.lift(reference.range).collapseToStart();this._previewModelReference=ref,this._preview.setModel(model.textEditorModel),this._preview.setSelection(sel),this._preview.revealRangeInCenter(sel,scrollType)}else this._preview.setModel(this._previewNotAvailableMessage),ref.dispose()}))}};ReferenceWidget=referencesWidget_decorate([referencesWidget_param(3,themeService/* IThemeService */.XE),referencesWidget_param(4,resolverService/* ITextModelService */.S),referencesWidget_param(5,instantiation/* IInstantiationService */.TG),referencesWidget_param(6,peekView/* IPeekViewService */.Fw),referencesWidget_param(7,label/* ILabelService */.e),referencesWidget_param(8,undoRedo/* IUndoRedoService */.tJ),referencesWidget_param(9,keybinding/* IKeybindingService */.d),referencesWidget_param(10,modeService/* IModeService */.h),referencesWidget_param(11,languageConfigurationRegistry/* ILanguageConfigurationService */.c_)],ReferenceWidget),
// theming
(0,themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const findMatchHighlightColor=theme.getColor(peekView/* peekViewResultsMatchHighlight */.F8);findMatchHighlightColor&&collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${findMatchHighlightColor}; }`);const referenceHighlightColor=theme.getColor(peekView/* peekViewEditorMatchHighlight */.WL);referenceHighlightColor&&collector.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${referenceHighlightColor}; }`);const referenceHighlightBorder=theme.getColor(peekView/* peekViewEditorMatchHighlightBorder */.xH);referenceHighlightBorder&&collector.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${referenceHighlightBorder}; box-sizing: border-box; }`);const hcOutline=theme.getColor(colorRegistry/* activeContrastBorder */.xL);hcOutline&&collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${hcOutline}; box-sizing: border-box; }`);const resultsBackground=theme.getColor(peekView/* peekViewResultsBackground */.M8);resultsBackground&&collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${resultsBackground}; }`);const resultsMatchForeground=theme.getColor(peekView/* peekViewResultsMatchForeground */.xk);resultsMatchForeground&&collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${resultsMatchForeground}; }`);const resultsFileForeground=theme.getColor(peekView/* peekViewResultsFileForeground */.a7);resultsFileForeground&&collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${resultsFileForeground}; }`);const resultsSelectedBackground=theme.getColor(peekView/* peekViewResultsSelectionBackground */.Zj);resultsSelectedBackground&&collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${resultsSelectedBackground}; }`);const resultsSelectedForeground=theme.getColor(peekView/* peekViewResultsSelectionForeground */.IY);resultsSelectedForeground&&collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${resultsSelectedForeground} !important; }`);const editorBackground=theme.getColor(peekView/* peekViewEditorBackground */.RX);editorBackground&&collector.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: ${editorBackground};}`);const editorGutterBackground=theme.getColor(peekView/* peekViewEditorGutterBackground */.sH);editorGutterBackground&&collector.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: ${editorGutterBackground};}`)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var referencesController_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},referencesController_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},referencesController_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const ctxReferenceSearchVisible=new contextkey/* RawContextKey */.uy("referenceSearchVisible",!1,nls/* localize */.N("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let ReferencesController=class ReferencesController{constructor(_defaultTreeKeyboardSupport,_editor,contextKeyService,_editorService,_notificationService,_instantiationService,_storageService,_configurationService){this._defaultTreeKeyboardSupport=_defaultTreeKeyboardSupport,this._editor=_editor,this._editorService=_editorService,this._notificationService=_notificationService,this._instantiationService=_instantiationService,this._storageService=_storageService,this._configurationService=_configurationService,this._disposables=new lifecycle/* DisposableStore */.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=ctxReferenceSearchVisible.bindTo(contextKeyService)}static get(editor){return editor.getContribution(ReferencesController.ID)}dispose(){var _a,_b;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(_a=this._widget)||void 0===_a||_a.dispose(),null===(_b=this._model)||void 0===_b||_b.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(range,modelPromise,peekMode){
// close current widget and return early is position didn't change
let widgetPosition;if(this._widget&&(widgetPosition=this._widget.position),this.closeWidget(),widgetPosition&&range.containsPosition(widgetPosition))return;this._peekMode=peekMode,this._referenceSearchVisible.set(!0),
// close the widget on model/mode changes
this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const storageKey="peekViewLayout",data=LayoutData.fromJSON(this._storageService.get(storageKey,0/* GLOBAL */,"{}"));this._widget=this._instantiationService.createInstance(ReferenceWidget,this._editor,this._defaultTreeKeyboardSupport,data),this._widget.setTitle(nls/* localize */.N("labelLoading","Loading...")),this._widget.show(range),this._disposables.add(this._widget.onDidClose((()=>{modelPromise.cancel(),this._widget&&(this._storageService.store(storageKey,JSON.stringify(this._widget.layoutData),0/* GLOBAL */,1/* MACHINE */),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((event=>{let{element:element,kind:kind}=event;if(element)switch(kind){case"open":"editor"===event.source&&this._configurationService.getValue("editor.stablePeek")||
// when stable peek is configured we don't close
// the peek window on selecting the editor
this.openReference(element,!1,!1);break;case"side":this.openReference(element,!0,!1);break;case"goto":peekMode?this._gotoReference(element):this.openReference(element,!1,!0);break}})));const requestId=++this._requestIdPool;modelPromise.then((model=>{var _a;
// still current request? widget still open?
if(requestId===this._requestIdPool&&this._widget)
// show widget
return null===(_a=this._model)||void 0===_a||_a.dispose(),this._model=model,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){// might have been closed
// set title
this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(nls/* localize */.N("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));
// set 'best' selection
let uri=this._editor.getModel().uri,pos=new position/* Position */.L(range.startLineNumber,range.startColumn),selection=this._model.nearestReference(uri,pos);if(selection)return this._widget.setSelection(selection).then((()=>{this._widget&&"editor"===this._editor.getOption(76/* peekWidgetDefaultFocus */)&&this._widget.focusOnPreviewEditor()}))}}));model.dispose()}),(error=>{this._notificationService.error(error)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(fwd){return referencesController_awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)
// can be called while still resolving...
return;const currentPosition=this._widget.position;if(!currentPosition)return;const source=this._model.nearestReference(this._editor.getModel().uri,currentPosition);if(!source)return;const target=this._model.nextOrPreviousReference(source,fwd),editorFocus=this._editor.hasTextFocus(),previewEditorFocus=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(target),yield this._gotoReference(target),editorFocus?this._editor.focus():this._widget&&previewEditorFocus&&this._widget.focusOnPreviewEditor()}))}revealReference(reference){return referencesController_awaiter(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(reference))}))}closeWidget(focusEditor=!0){var _a,_b;null===(_a=this._widget)||void 0===_a||_a.dispose(),null===(_b=this._model)||void 0===_b||_b.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,focusEditor&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(ref){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const range=core_range/* Range */.e.lift(ref.range).collapseToStart();return this._editorService.openCodeEditor({resource:ref.uri,options:{selection:range}},this._editor).then((openedEditor=>{var _a;if(this._ignoreModelChangeEvent=!1,openedEditor&&this._widget)if(this._editor===openedEditor)
this._widget.show(range),this._widget.focusOnReferenceTree();else{
// we opened a different editor instance which means a different controller instance.
// therefore we stop with this controller and continue with the other
const other=ReferencesController.get(openedEditor),model=this._model.clone();this.closeWidget(),openedEditor.focus(),other.toggleWidget(range,(0,common_async/* createCancelablePromise */.PG)((_=>Promise.resolve(model))),null!==(_a=this._peekMode)&&void 0!==_a&&_a)}else
// something went wrong...
this.closeWidget()}),(err=>{this._ignoreModelChangeEvent=!1,(0,errors/* onUnexpectedError */.dL)(err)}))}openReference(ref,sideBySide,pinned){
// clear stage
sideBySide||this.closeWidget();const{uri:uri,range:range}=ref;this._editorService.openCodeEditor({resource:uri,options:{selection:range,pinned:pinned}},this._editor,sideBySide)}};function withController(accessor,fn){const outerEditor=(0,peekView/* getOuterEditor */.rc)(accessor);if(!outerEditor)return;let controller=ReferencesController.get(outerEditor);controller&&fn(controller)}ReferencesController.ID="editor.contrib.referencesController",ReferencesController=referencesController_decorate([referencesController_param(2,contextkey/* IContextKeyService */.i6),referencesController_param(3,codeEditorService/* ICodeEditorService */.$),referencesController_param(4,notification/* INotificationService */.lT),referencesController_param(5,instantiation/* IInstantiationService */.TG),referencesController_param(6,storage/* IStorageService */.Uy),referencesController_param(7,configuration/* IConfigurationService */.Ui)],ReferencesController),keybindingsRegistry/* KeybindingsRegistry */.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100/* EditorContrib */,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,60/* F2 */),when:contextkey/* ContextKeyExpr */.Ao.or(ctxReferenceSearchVisible,peekView/* PeekContext */.Jy.inPeekEditor),handler(accessor){withController(accessor,(controller=>{controller.changeFocusBetweenPreviewAndReferences()}))}}),keybindingsRegistry/* KeybindingsRegistry */.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62/* F4 */,secondary:[70/* F12 */],when:contextkey/* ContextKeyExpr */.Ao.or(ctxReferenceSearchVisible,peekView/* PeekContext */.Jy.inPeekEditor),handler(accessor){withController(accessor,(controller=>{controller.goToNextOrPreviousReference(!0)}))}}),keybindingsRegistry/* KeybindingsRegistry */.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086/* F4 */,secondary:[1094/* F12 */],when:contextkey/* ContextKeyExpr */.Ao.or(ctxReferenceSearchVisible,peekView/* PeekContext */.Jy.inPeekEditor),handler(accessor){withController(accessor,(controller=>{controller.goToNextOrPreviousReference(!1)}))}}),
// commands that aren't needed anymore because there is now ContextKeyExpr.OR
commands/* CommandsRegistry */.P.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),commands/* CommandsRegistry */.P.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),
// close
commands/* CommandsRegistry */.P.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),commands/* CommandsRegistry */.P.registerCommand("closeReferenceSearch",(accessor=>withController(accessor,(controller=>controller.closeWidget())))),keybindingsRegistry/* KeybindingsRegistry */.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9/* Escape */,secondary:[1033/* Escape */],when:contextkey/* ContextKeyExpr */.Ao.and(peekView/* PeekContext */.Jy.inPeekEditor,contextkey/* ContextKeyExpr */.Ao.not("config.editor.stablePeek"))}),keybindingsRegistry/* KeybindingsRegistry */.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9/* Escape */,secondary:[1033/* Escape */],when:contextkey/* ContextKeyExpr */.Ao.and(ctxReferenceSearchVisible,contextkey/* ContextKeyExpr */.Ao.not("config.editor.stablePeek"))}),keybindingsRegistry/* KeybindingsRegistry */.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200/* WorkbenchContrib */,primary:3/* Enter */,mac:{primary:3/* Enter */,secondary:[2066/* DownArrow */]},when:contextkey/* ContextKeyExpr */.Ao.and(ctxReferenceSearchVisible,browser_listService/* WorkbenchListFocusContextKey */.CQ),handler(accessor){var _a;const listService=accessor.get(browser_listService/* IListService */.Lw),focus=null===(_a=listService.lastFocusedList)||void 0===_a?void 0:_a.getFocus();Array.isArray(focus)&&focus[0]instanceof referencesModel/* OneReference */.WX&&withController(accessor,(controller=>controller.revealReference(focus[0])))}}),keybindingsRegistry/* KeybindingsRegistry */.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100/* EditorContrib */,primary:2051/* Enter */,mac:{primary:259/* Enter */},when:contextkey/* ContextKeyExpr */.Ao.and(ctxReferenceSearchVisible,browser_listService/* WorkbenchListFocusContextKey */.CQ),handler(accessor){var _a;const listService=accessor.get(browser_listService/* IListService */.Lw),focus=null===(_a=listService.lastFocusedList)||void 0===_a?void 0:_a.getFocus();Array.isArray(focus)&&focus[0]instanceof referencesModel/* OneReference */.WX&&withController(accessor,(controller=>controller.openReference(focus[0],!0,!0)))}}),commands/* CommandsRegistry */.P.registerCommand("openReference",(accessor=>{var _a;const listService=accessor.get(browser_listService/* IListService */.Lw),focus=null===(_a=listService.lastFocusedList)||void 0===_a?void 0:_a.getFocus();Array.isArray(focus)&&focus[0]instanceof referencesModel/* OneReference */.WX&&withController(accessor,(controller=>controller.openReference(focus[0],!1,!0)))}))},
/***/171455:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */F2:function(){/* binding */return FileReferences},
/* harmony export */WX:function(){/* binding */return OneReference},
/* harmony export */oQ:function(){/* binding */return ReferencesModel}
/* harmony export */});
/* unused harmony export FilePreview */
/* harmony import */var _base_common_errors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(817301),_base_common_event_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(104669),_base_common_idGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(844742),_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(905976),_base_common_map_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(843702),_base_common_resources_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(195935),_base_common_strings_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(697295),_common_core_range_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(624314),_nls_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(663580),__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
/* harmony import */class OneReference{constructor(isProviderFirst,parent,link,_rangeCallback){this.isProviderFirst=isProviderFirst,this.parent=parent,this.link=link,this._rangeCallback=_rangeCallback,this.id=_base_common_idGenerator_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultGenerator */.a.nextId()}get uri(){return this.link.uri}get range(){var _a,_b;return null!==(_b=null!==(_a=this._range)&&void 0!==_a?_a:this.link.targetSelectionRange)&&void 0!==_b?_b:this.link.range}set range(value){this._range=value,this._rangeCallback(this)}get ariaMessage(){var _a;const preview=null===(_a=this.parent.getPreview(this))||void 0===_a?void 0:_a.preview(this.range);return preview?(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,_base_common_resources_js__WEBPACK_IMPORTED_MODULE_5__/* .basename */.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,preview.value):(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,_base_common_resources_js__WEBPACK_IMPORTED_MODULE_5__/* .basename */.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class FilePreview{constructor(_modelReference){this._modelReference=_modelReference}dispose(){this._modelReference.dispose()}preview(range,n=8){const model=this._modelReference.object.textEditorModel;if(!model)return;const{startLineNumber:startLineNumber,startColumn:startColumn,endLineNumber:endLineNumber,endColumn:endColumn}=range,word=model.getWordUntilPosition({lineNumber:startLineNumber,column:startColumn-n}),beforeRange=new _common_core_range_js__WEBPACK_IMPORTED_MODULE_8__/* .Range */.e(startLineNumber,word.startColumn,startLineNumber,startColumn),afterRange=new _common_core_range_js__WEBPACK_IMPORTED_MODULE_8__/* .Range */.e(endLineNumber,endColumn,endLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */),before=model.getValueInRange(beforeRange).replace(/^\s+/,""),inside=model.getValueInRange(range),after=model.getValueInRange(afterRange).replace(/\s+$/,"");return{value:before+inside+after,highlight:{start:before.length,end:before.length+inside.length}}}}class FileReferences{constructor(parent,uri){this.parent=parent,this.uri=uri,this.children=[],this._previews=new _base_common_map_js__WEBPACK_IMPORTED_MODULE_4__/* .ResourceMap */.Y9}dispose(){(0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .dispose */.B9)(this._previews.values()),this._previews.clear()}getPreview(child){return this._previews.get(child.uri)}get ariaMessage(){const len=this.children.length;return 1===len?(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,_base_common_resources_js__WEBPACK_IMPORTED_MODULE_5__/* .basename */.EZ)(this.uri),this.uri.fsPath):(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",len,(0,_base_common_resources_js__WEBPACK_IMPORTED_MODULE_5__/* .basename */.EZ)(this.uri),this.uri.fsPath)}resolve(textModelResolverService){return __awaiter(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let child of this.children)if(!this._previews.has(child.uri))try{const ref=yield textModelResolverService.createModelReference(child.uri);this._previews.set(child.uri,new FilePreview(ref))}catch(err){(0,_base_common_errors_js__WEBPACK_IMPORTED_MODULE_0__/* .onUnexpectedError */.dL)(err)}return this}))}}class ReferencesModel{constructor(links,title){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new _base_common_event_js__WEBPACK_IMPORTED_MODULE_1__/* .Emitter */.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=links,this._title=title;
// grouping and sorting
const[providersFirst]=links;let current;links.sort(ReferencesModel._compareReferences);for(let link of links)
// append, check for equality first!
if(current&&_base_common_resources_js__WEBPACK_IMPORTED_MODULE_5__/* .extUri */.SF.isEqual(current.uri,link.uri,!0)||(
// new group
current=new FileReferences(this,link.uri),this.groups.push(current)),0===current.children.length||0!==ReferencesModel._compareReferences(link,current.children[current.children.length-1])){const oneRef=new OneReference(providersFirst===link,current,link,(ref=>this._onDidChangeReferenceRange.fire(ref)));this.references.push(oneRef),current.children.push(oneRef)}}dispose(){(0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .dispose */.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new ReferencesModel(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)("aria.result.0","No results found"):1===this.references.length?(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,_nls_js__WEBPACK_IMPORTED_MODULE_7__/* .localize */.N)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(reference,next){let{parent:parent}=reference,idx=parent.children.indexOf(reference),childCount=parent.children.length,groupCount=parent.parent.groups.length;return 1===groupCount||next&&idx+1<childCount||!next&&idx>0?(
// cycling within one file
idx=next?(idx+1)%childCount:(idx+childCount-1)%childCount,parent.children[idx]):(idx=parent.parent.groups.indexOf(parent),next?(idx=(idx+1)%groupCount,parent.parent.groups[idx].children[0]):(idx=(idx+groupCount-1)%groupCount,parent.parent.groups[idx].children[parent.parent.groups[idx].children.length-1]))}nearestReference(resource,position){const nearest=this.references.map(((ref,idx)=>({idx:idx,prefixLen:_base_common_strings_js__WEBPACK_IMPORTED_MODULE_6__/* .commonPrefixLength */.Mh(ref.uri.toString(),resource.toString()),offsetDist:100*Math.abs(ref.range.startLineNumber-position.lineNumber)+Math.abs(ref.range.startColumn-position.column)}))).sort(((a,b)=>a.prefixLen>b.prefixLen?-1:a.prefixLen<b.prefixLen?1:a.offsetDist<b.offsetDist?-1:a.offsetDist>b.offsetDist?1:0))[0];if(nearest)return this.references[nearest.idx]}referenceAt(resource,position){for(const ref of this.references)if(ref.uri.toString()===resource.toString()&&_common_core_range_js__WEBPACK_IMPORTED_MODULE_8__/* .Range */.e.containsPosition(ref.range,position))return ref}firstReference(){for(const ref of this.references)if(ref.isProviderFirst)return ref;return this.references[0]}static _compareReferences(a,b){return _base_common_resources_js__WEBPACK_IMPORTED_MODULE_5__/* .extUri */.SF.compare(a.uri,b.uri)||_common_core_range_js__WEBPACK_IMPORTED_MODULE_8__/* .Range */.e.compareRangesUsingStarts(a.range,b.range)}}
/***/},
/***/759774:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Fw:function(){/* binding */return IPeekViewService},Jy:function(){/* binding */return PeekContext},vk:function(){/* binding */return PeekViewWidget},rc:function(){/* binding */return getOuterEditor},SC:function(){/* binding */return peekViewBorder},RX:function(){/* binding */return peekViewEditorBackground},sH:function(){/* binding */return peekViewEditorGutterBackground},WL:function(){/* binding */return peekViewEditorMatchHighlight},xH:function(){/* binding */return peekViewEditorMatchHighlightBorder},M8:function(){/* binding */return peekViewResultsBackground},a7:function(){/* binding */return peekViewResultsFileForeground},xk:function(){/* binding */return peekViewResultsMatchForeground},F8:function(){/* binding */return peekViewResultsMatchHighlight},Zj:function(){/* binding */return peekViewResultsSelectionBackground},IY:function(){/* binding */return peekViewResultsSelectionForeground},KY:function(){/* binding */return peekViewTitleBackground},IH:function(){/* binding */return peekViewTitleForeground},R7:function(){/* binding */return peekViewTitleInfoForeground}});
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/dom.js
var dom=__webpack_require__(965321),actionbar=__webpack_require__(790317),actions=__webpack_require__(74741),codicons=__webpack_require__(773046),color=__webpack_require__(41264),common_event=__webpack_require__(104669),objects=__webpack_require__(936248),editorExtensions=__webpack_require__(616830),codeEditorService=__webpack_require__(611640),embeddedCodeEditorWidget=__webpack_require__(284527),sash=__webpack_require__(173098),idGenerator=__webpack_require__(844742),lifecycle=__webpack_require__(905976),core_range=__webpack_require__(624314),textModel=__webpack_require__(724979);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/zoneWidget.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const defaultColor=new color/* Color */.Il(new color/* RGBA */.VS(0,122,204)),defaultOptions={showArrow:!0,showFrame:!0,className:"",frameColor:defaultColor,arrowColor:defaultColor,keepEditorSelection:!1},WIDGET_ID="vs.editor.contrib.zoneWidget";class ViewZoneDelegate{constructor(domNode,afterLineNumber,afterColumn,heightInLines,onDomNodeTop,onComputedHeight){this.id="",// A valid zone id should be greater than 0
this.domNode=domNode,this.afterLineNumber=afterLineNumber,this.afterColumn=afterColumn,this.heightInLines=heightInLines,this._onDomNodeTop=onDomNodeTop,this._onComputedHeight=onComputedHeight}onDomNodeTop(top){this._onDomNodeTop(top)}onComputedHeight(height){this._onComputedHeight(height)}}class OverlayWidgetDelegate{constructor(id,domNode){this._id=id,this._domNode=domNode}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class Arrow{constructor(_editor){this._editor=_editor,this._ruleName=Arrow._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),dom/* removeCSSRulesContainingSelector */.uN(this._ruleName)}set color(value){this._color!==value&&(this._color=value,this._updateStyle())}set height(value){this._height!==value&&(this._height=value,this._updateStyle())}_updateStyle(){dom/* removeCSSRulesContainingSelector */.uN(this._ruleName),dom/* createCSSRule */.fk(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(where){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:core_range/* Range */.e.fromPositions(where),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1/* NeverGrowsWhenTypingAtEdges */}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}Arrow._IdGenerator=new idGenerator/* IdGenerator */.R(".arrow-decoration-");class ZoneWidget{constructor(editor,options={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new lifecycle/* DisposableStore */.SL,this.container=null,this._isShowing=!1,this.editor=editor,this.options=objects/* deepClone */.I8(options),objects/* mixin */.jB(this.options,defaultOptions,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange((info=>{const width=this._getWidth(info);this.domNode.style.width=width+"px",this.domNode.style.left=this._getLeft(info)+"px",this._onWidth(width)})))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones((accessor=>{this._viewZone&&accessor.removeZone(this._viewZone.id),this._viewZone=null})),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Arrow(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(styles){styles.frameColor&&(this.options.frameColor=styles.frameColor),styles.arrowColor&&(this.options.arrowColor=styles.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let frameColor=this.options.frameColor.toString();this.container.style.borderTopColor=frameColor,this.container.style.borderBottomColor=frameColor}if(this._arrow&&this.options.arrowColor){let arrowColor=this.options.arrowColor.toString();this._arrow.color=arrowColor}}_getWidth(info){return info.width-info.minimap.minimapWidth-info.verticalScrollbarWidth}_getLeft(info){
// If minimap is to the left, we move beyond it
return info.minimap.minimapWidth>0&&0===info.minimap.minimapLeft?info.minimap.minimapWidth:0}_onViewZoneTop(top){this.domNode.style.top=top+"px"}_onViewZoneHeight(height){if(this.domNode.style.height=`${height}px`,this.container){let containerHeight=height-this._decoratingElementsHeight();this.container.style.height=`${containerHeight}px`;const layoutInfo=this.editor.getLayoutInfo();this._doLayout(containerHeight,this._getWidth(layoutInfo))}this._resizeSash&&this._resizeSash.layout()}get position(){const[id]=this._positionMarkerId;if(!id)return;const model=this.editor.getModel();if(!model)return;const range=model.getDecorationRange(id);return range?range.getStartPosition():void 0}show(rangeOrPos,heightInLines){const range=core_range/* Range */.e.isIRange(rangeOrPos)?core_range/* Range */.e.lift(rangeOrPos):core_range/* Range */.e.fromPositions(rangeOrPos);this._isShowing=!0,this._showImpl(range,heightInLines),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:range,options:textModel/* ModelDecorationOptions */.qx.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones((accessor=>{this._viewZone&&accessor.removeZone(this._viewZone.id)})),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let lineHeight=this.editor.getOption(58/* lineHeight */),result=0;if(this.options.showArrow){let arrowHeight=Math.round(lineHeight/3);result+=2*arrowHeight}if(this.options.showFrame){let frameThickness=Math.round(lineHeight/9);result+=2*frameThickness}return result}_showImpl(where,heightInLines){const position=where.getStartPosition(),layoutInfo=this.editor.getLayoutInfo(),width=this._getWidth(layoutInfo);this.domNode.style.width=`${width}px`,this.domNode.style.left=this._getLeft(layoutInfo)+"px";
// Render the widget as zone (rendering) and widget (lifecycle)
const viewZoneDomNode=document.createElement("div");viewZoneDomNode.style.overflow="hidden";const lineHeight=this.editor.getOption(58/* lineHeight */),maxHeightInLines=Math.max(12,this.editor.getLayoutInfo().height/lineHeight*.8);
// adjust heightInLines to viewport
heightInLines=Math.min(heightInLines,maxHeightInLines);let arrowHeight=0,frameThickness=0;if(
// Render the arrow one 1/3 of an editor line height
this._arrow&&this.options.showArrow&&(arrowHeight=Math.round(lineHeight/3),this._arrow.height=arrowHeight,this._arrow.show(position)),
// Render the frame as 1/9 of an editor line height
this.options.showFrame&&(frameThickness=Math.round(lineHeight/9)),
// insert zone widget
this.editor.changeViewZones((accessor=>{this._viewZone&&accessor.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new ViewZoneDelegate(viewZoneDomNode,position.lineNumber,position.column,heightInLines,(top=>this._onViewZoneTop(top)),(height=>this._onViewZoneHeight(height))),this._viewZone.id=accessor.addZone(this._viewZone),this._overlayWidget=new OverlayWidgetDelegate(WIDGET_ID+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)})),this.container&&this.options.showFrame){const width=this.options.frameWidth?this.options.frameWidth:frameThickness;this.container.style.borderTopWidth=width+"px",this.container.style.borderBottomWidth=width+"px"}let containerHeight=heightInLines*lineHeight-this._decoratingElementsHeight();this.container&&(this.container.style.top=arrowHeight+"px",this.container.style.height=containerHeight+"px",this.container.style.overflow="hidden"),this._doLayout(containerHeight,width),this.options.keepEditorSelection||this.editor.setSelection(where);const model=this.editor.getModel();if(model){const revealLine=where.endLineNumber+1;revealLine<=model.getLineCount()?
// reveal line below the zone widget
this.revealLine(revealLine,!1):
// reveal last line atop
this.revealLine(model.getLineCount(),!0)}}revealLine(lineNumber,isLastLine){isLastLine?this.editor.revealLineInCenter(lineNumber,0/* Smooth */):this.editor.revealLine(lineNumber,0/* Smooth */)}setCssClass(className,classToReplace){this.container&&(classToReplace&&this.container.classList.remove(classToReplace),this.container.classList.add(className))}_onWidth(widthInPixel){
// implement in subclass
}_doLayout(heightInPixel,widthInPixel){
// implement in subclass
}_relayout(newHeightInLines){this._viewZone&&this._viewZone.heightInLines!==newHeightInLines&&this.editor.changeViewZones((accessor=>{this._viewZone&&(this._viewZone.heightInLines=newHeightInLines,accessor.layoutZone(this._viewZone.id))}))}
// --- sash
_initSash(){if(this._resizeSash)return;let data;this._resizeSash=this._disposables.add(new sash/* Sash */.g(this.domNode,this,{orientation:1/* HORIZONTAL */})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0/* Disabled */),this._disposables.add(this._resizeSash.onDidStart((e=>{this._viewZone&&(data={startY:e.startY,heightInLines:this._viewZone.heightInLines})}))),this._disposables.add(this._resizeSash.onDidEnd((()=>{data=void 0}))),this._disposables.add(this._resizeSash.onDidChange((evt=>{if(data){let lineDelta=(evt.currentY-data.startY)/this.editor.getOption(58/* lineHeight */),roundedLineDelta=lineDelta<0?Math.ceil(lineDelta):Math.floor(lineDelta),newHeightInLines=data.heightInLines+roundedLineDelta;newHeightInLines>5&&newHeightInLines<35&&this._relayout(newHeightInLines)}})))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(null===this.domNode.style.height?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const layoutInfo=this.editor.getLayoutInfo();return layoutInfo.width-layoutInfo.minimap.minimapWidth}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/nls.js
var nls=__webpack_require__(663580),menuEntryActionViewItem=__webpack_require__(127628),contextkey=__webpack_require__(938819),extensions=__webpack_require__(65026),instantiation=__webpack_require__(472065),colorRegistry=__webpack_require__(173910),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js
const IPeekViewService=(0,instantiation/* createDecorator */.yh)("IPeekViewService");var PeekContext;(0,extensions/* registerSingleton */.z)(IPeekViewService,class{constructor(){this._widgets=new Map}addExclusiveWidget(editor,widget){const existing=this._widgets.get(editor);existing&&(existing.listener.dispose(),existing.widget.dispose());const remove=()=>{const data=this._widgets.get(editor);data&&data.widget===widget&&(data.listener.dispose(),this._widgets.delete(editor))};this._widgets.set(editor,{widget:widget,listener:widget.onDidClose(remove)})}}),function(PeekContext){PeekContext.inPeekEditor=new contextkey/* RawContextKey */.uy("inReferenceSearchEditor",!0,nls/* localize */.N("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),PeekContext.notInPeekEditor=PeekContext.inPeekEditor.toNegated()}(PeekContext||(PeekContext={}));let PeekContextController=class{constructor(editor,contextKeyService){editor instanceof embeddedCodeEditorWidget/* EmbeddedCodeEditorWidget */.H&&PeekContext.inPeekEditor.bindTo(contextKeyService)}dispose(){}};function getOuterEditor(accessor){let editor=accessor.get(codeEditorService/* ICodeEditorService */.$).getFocusedCodeEditor();return editor instanceof embeddedCodeEditorWidget/* EmbeddedCodeEditorWidget */.H?editor.getParentEditor():editor}PeekContextController.ID="editor.contrib.referenceController",PeekContextController=__decorate([__param(1,contextkey/* IContextKeyService */.i6)],PeekContextController),(0,editorExtensions/* registerEditorContribution */._K)(PeekContextController.ID,PeekContextController);const peekView_defaultOptions={headerBackgroundColor:color/* Color */.Il.white,primaryHeadingColor:color/* Color */.Il.fromHex("#333333"),secondaryHeadingColor:color/* Color */.Il.fromHex("#6c6c6cb3")};let PeekViewWidget=class extends ZoneWidget{constructor(editor,options,instantiationService){super(editor,options),this.instantiationService=instantiationService,this._onDidClose=new common_event/* Emitter */.Q5,this.onDidClose=this._onDidClose.event,objects/* mixin */.jB(this.options,peekView_defaultOptions,!1)}dispose(){this.disposed||(this.disposed=!0,// prevent consumers who dispose on onDidClose from looping
super.dispose(),this._onDidClose.fire(this))}style(styles){let options=this.options;styles.headerBackgroundColor&&(options.headerBackgroundColor=styles.headerBackgroundColor),styles.primaryHeadingColor&&(options.primaryHeadingColor=styles.primaryHeadingColor),styles.secondaryHeadingColor&&(options.secondaryHeadingColor=styles.secondaryHeadingColor),super.style(styles)}_applyStyles(){super._applyStyles();let options=this.options;this._headElement&&options.headerBackgroundColor&&(this._headElement.style.backgroundColor=options.headerBackgroundColor.toString()),this._primaryHeading&&options.primaryHeadingColor&&(this._primaryHeading.style.color=options.primaryHeadingColor.toString()),this._secondaryHeading&&options.secondaryHeadingColor&&(this._secondaryHeading.style.color=options.secondaryHeadingColor.toString()),this._bodyElement&&options.frameColor&&(this._bodyElement.style.borderColor=options.frameColor.toString())}_fillContainer(container){this.setCssClass("peekview-widget"),this._headElement=dom.$(".head"),this._bodyElement=dom.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),container.appendChild(this._headElement),container.appendChild(this._bodyElement)}_fillHead(container,noCloseAction){const titleElement=dom.$(".peekview-title");this.options.supportOnTitleClick&&(titleElement.classList.add("clickable"),dom/* addStandardDisposableListener */.mu(titleElement,"click",(event=>this._onTitleClick(event)))),dom/* append */.R3(this._headElement,titleElement),this._fillTitleIcon(titleElement),this._primaryHeading=dom.$("span.filename"),this._secondaryHeading=dom.$("span.dirname"),this._metaHeading=dom.$("span.meta"),dom/* append */.R3(titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const actionsContainer=dom.$(".peekview-actions");dom/* append */.R3(this._headElement,actionsContainer);const actionBarOptions=this._getActionBarOptions();this._actionbarWidget=new actionbar/* ActionBar */.o(actionsContainer,actionBarOptions),this._disposables.add(this._actionbarWidget),noCloseAction||this._actionbarWidget.push(new actions/* Action */.aU("peekview.close",nls/* localize */.N("label.close","Close"),codicons/* Codicon */.lA.close.classNames,!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(container){}_getActionBarOptions(){return{actionViewItemProvider:menuEntryActionViewItem/* createActionViewItem */.Id.bind(void 0,this.instantiationService),orientation:0/* HORIZONTAL */}}_onTitleClick(event){
// implement me if supportOnTitleClick option is set
}setTitle(primaryHeading,secondaryHeading){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=primaryHeading,this._primaryHeading.setAttribute("title",primaryHeading),secondaryHeading?this._secondaryHeading.innerText=secondaryHeading:dom/* clearNode */.PO(this._secondaryHeading))}setMetaTitle(value){this._metaHeading&&(value?(this._metaHeading.innerText=value,dom/* show */.$Z(this._metaHeading)):dom/* hide */.Cp(this._metaHeading))}_doLayout(heightInPixel,widthInPixel){if(!this._isShowing&&heightInPixel<0)
// Looks like the view zone got folded away!
return void this.dispose();const headHeight=Math.ceil(1.2*this.editor.getOption(58/* lineHeight */)),bodyHeight=Math.round(heightInPixel-(headHeight+2/* the border-top/bottom width*/));this._doLayoutHead(headHeight,widthInPixel),this._doLayoutBody(bodyHeight,widthInPixel)}_doLayoutHead(heightInPixel,widthInPixel){this._headElement&&(this._headElement.style.height=`${heightInPixel}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(heightInPixel,widthInPixel){this._bodyElement&&(this._bodyElement.style.height=`${heightInPixel}px`)}};PeekViewWidget=__decorate([__param(2,instantiation/* IInstantiationService */.TG)],PeekViewWidget);const peekViewTitleBackground=(0,colorRegistry/* registerColor */.P6)("peekViewTitle.background",{dark:(0,colorRegistry/* transparent */.Zn)(colorRegistry/* editorInfoForeground */.c6,.1),light:(0,colorRegistry/* transparent */.Zn)(colorRegistry/* editorInfoForeground */.c6,.1),hc:null},nls/* localize */.N("peekViewTitleBackground","Background color of the peek view title area.")),peekViewTitleForeground=(0,colorRegistry/* registerColor */.P6)("peekViewTitleLabel.foreground",{dark:color/* Color */.Il.white,light:color/* Color */.Il.black,hc:color/* Color */.Il.white},nls/* localize */.N("peekViewTitleForeground","Color of the peek view title.")),peekViewTitleInfoForeground=(0,colorRegistry/* registerColor */.P6)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},nls/* localize */.N("peekViewTitleInfoForeground","Color of the peek view title info.")),peekViewBorder=(0,colorRegistry/* registerColor */.P6)("peekView.border",{dark:colorRegistry/* editorInfoForeground */.c6,light:colorRegistry/* editorInfoForeground */.c6,hc:colorRegistry/* contrastBorder */.lR},nls/* localize */.N("peekViewBorder","Color of the peek view borders and arrow.")),peekViewResultsBackground=(0,colorRegistry/* registerColor */.P6)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:color/* Color */.Il.black},nls/* localize */.N("peekViewResultsBackground","Background color of the peek view result list.")),peekViewResultsMatchForeground=(0,colorRegistry/* registerColor */.P6)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:color/* Color */.Il.white},nls/* localize */.N("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),peekViewResultsFileForeground=(0,colorRegistry/* registerColor */.P6)("peekViewResult.fileForeground",{dark:color/* Color */.Il.white,light:"#1E1E1E",hc:color/* Color */.Il.white},nls/* localize */.N("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),peekViewResultsSelectionBackground=(0,colorRegistry/* registerColor */.P6)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},nls/* localize */.N("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),peekViewResultsSelectionForeground=(0,colorRegistry/* registerColor */.P6)("peekViewResult.selectionForeground",{dark:color/* Color */.Il.white,light:"#6C6C6C",hc:color/* Color */.Il.white},nls/* localize */.N("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),peekViewEditorBackground=(0,colorRegistry/* registerColor */.P6)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:color/* Color */.Il.black},nls/* localize */.N("peekViewEditorBackground","Background color of the peek view editor.")),peekViewEditorGutterBackground=(0,colorRegistry/* registerColor */.P6)("peekViewEditorGutter.background",{dark:peekViewEditorBackground,light:peekViewEditorBackground,hc:peekViewEditorBackground},nls/* localize */.N("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),peekViewResultsMatchHighlight=(0,colorRegistry/* registerColor */.P6)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},nls/* localize */.N("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),peekViewEditorMatchHighlight=(0,colorRegistry/* registerColor */.P6)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},nls/* localize */.N("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),peekViewEditorMatchHighlightBorder=(0,colorRegistry/* registerColor */.P6)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:colorRegistry/* activeContrastBorder */.xL},nls/* localize */.N("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},
/***/271081:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */T:function(){/* binding */return AbstractEditorCommandsQuickAccessProvider}
/* harmony export */});
/* harmony import */var _base_common_iconLabels_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(721212),_platform_quickinput_browser_commandsQuickAccess_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(579505);
/* harmony import */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class AbstractEditorCommandsQuickAccessProvider extends _platform_quickinput_browser_commandsQuickAccess_js__WEBPACK_IMPORTED_MODULE_1__/* .AbstractCommandsQuickAccessProvider */.Z{constructor(options,instantiationService,keybindingService,commandService,telemetryService,dialogService){super(options,instantiationService,keybindingService,commandService,telemetryService,dialogService)}getCodeEditorCommandPicks(){const activeTextEditorControl=this.activeTextEditorControl;if(!activeTextEditorControl)return[];const editorCommandPicks=[];for(const editorAction of activeTextEditorControl.getSupportedActions())editorCommandPicks.push({commandId:editorAction.id,commandAlias:editorAction.alias,label:(0,_base_common_iconLabels_js__WEBPACK_IMPORTED_MODULE_0__/* .stripIcons */.x$)(editorAction.label)||editorAction.id});return editorCommandPicks}}
/***/},
/***/98275:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */X:function(){/* binding */return AbstractEditorNavigationQuickAccessProvider}
/* harmony export */});
/* harmony import */var _base_common_functional_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(888289),_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(905976),_base_common_types_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(998401),_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65520),_common_model_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(984973),_common_view_editorColorRegistry_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(627869),_platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(897781);
/* harmony import */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
/**
 * A reusable quick access provider for the editor with support
 * for adding decorations for navigating in the currently active file
 * (for example "Go to line", "Go to symbol").
 */
class AbstractEditorNavigationQuickAccessProvider{constructor(options){this.options=options,
//#endregion
//#region Decorations Utils
this.rangeHighlightDecorationId=void 0}
//#region Provider methods
provide(picker,token){var _a;const disposables=new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .DisposableStore */.SL;
// Apply options if any
picker.canAcceptInBackground=!!(null===(_a=this.options)||void 0===_a?void 0:_a.canAcceptInBackground),
// Disable filtering & sorting, we control the results
picker.matchOnLabel=picker.matchOnDescription=picker.matchOnDetail=picker.sortByLabel=!1;
// Provide based on current active editor
const pickerDisposable=disposables.add(new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .MutableDisposable */.XK);return pickerDisposable.value=this.doProvide(picker,token),
// Re-create whenever the active editor changes
disposables.add(this.onDidActiveTextEditorControlChange((()=>{
// Clear old
pickerDisposable.value=void 0,
// Add new
pickerDisposable.value=this.doProvide(picker,token)}))),disposables}doProvide(picker,token){const disposables=new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .DisposableStore */.SL,editor=this.activeTextEditorControl;
// With text control
if(editor&&this.canProvideWithTextEditor(editor)){const context={editor:editor},codeEditor=(0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_1__/* .getCodeEditor */.Pi)(editor);
// Restore any view state if this picker was closed
// without actually going to a line
if(codeEditor){
// Remember view state and update it when the cursor position
// changes even later because it could be that the user has
// configured quick access to remain open when focus is lost and
// we always want to restore the current location.
let lastKnownEditorViewState=(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_5__/* .withNullAsUndefined */.f6)(editor.saveViewState());disposables.add(codeEditor.onDidChangeCursorPosition((()=>{lastKnownEditorViewState=(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_5__/* .withNullAsUndefined */.f6)(editor.saveViewState())}))),context.restoreViewState=()=>{lastKnownEditorViewState&&editor===this.activeTextEditorControl&&editor.restoreViewState(lastKnownEditorViewState)},disposables.add((0,_base_common_functional_js__WEBPACK_IMPORTED_MODULE_6__/* .once */.I)(token.onCancellationRequested)((()=>{var _a;return null===(_a=context.restoreViewState)||void 0===_a?void 0:_a.call(context)})))}
// Clean up decorations on dispose
disposables.add((0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .toDisposable */.OF)((()=>this.clearDecorations(editor)))),
// Ask subclass for entries
disposables.add(this.provideWithTextEditor(context,picker,token))}
// Without text control
else disposables.add(this.provideWithoutTextEditor(picker,token));return disposables}
/**
     * Subclasses to implement if they can operate on the text editor.
     */canProvideWithTextEditor(editor){return!0}gotoLocation({editor:editor},options){editor.setSelection(options.range),editor.revealRangeInCenter(options.range,0/* Smooth */),options.preserveFocus||editor.focus()}getModel(editor){var _a;return(0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_1__/* .isDiffEditor */.QI)(editor)?null===(_a=editor.getModel())||void 0===_a?void 0:_a.modified:editor.getModel()}addDecorations(editor,range){editor.changeDecorations((changeAccessor=>{
// Reset old decorations if any
const deleteDecorations=[];this.rangeHighlightDecorationId&&(deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);
// Add new decorations for the range
const newDecorations=[
// highlight the entire line on the range
{range:range,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},
// also add overview ruler highlight
{range:range,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,_platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_4__/* .themeColorFromId */.EN)(_common_view_editorColorRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .overviewRulerRangeHighlight */.m9),position:_common_model_js__WEBPACK_IMPORTED_MODULE_2__/* .OverviewRulerLane */.sh.Full}}}],[rangeHighlightId,overviewRulerDecorationId]=changeAccessor.deltaDecorations(deleteDecorations,newDecorations);this.rangeHighlightDecorationId={rangeHighlightId:rangeHighlightId,overviewRulerDecorationId:overviewRulerDecorationId}}))}clearDecorations(editor){const rangeHighlightDecorationId=this.rangeHighlightDecorationId;rangeHighlightDecorationId&&(editor.changeDecorations((changeAccessor=>{changeAccessor.deltaDecorations([rangeHighlightDecorationId.overviewRulerDecorationId,rangeHighlightDecorationId.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}
/***/},
/***/204859:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */q:function(){/* binding */return AbstractGotoLineQuickAccessProvider}
/* harmony export */});
/* harmony import */var _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(905976),_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65520),_editorNavigationQuickAccess_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(98275),_nls_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(663580);
/* harmony import */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class AbstractGotoLineQuickAccessProvider extends _editorNavigationQuickAccess_js__WEBPACK_IMPORTED_MODULE_2__/* .AbstractEditorNavigationQuickAccessProvider */.X{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(picker){const label=(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("cannotRunGotoLine","Open a text editor first to go to a line.");return picker.items=[{label:label}],picker.ariaLabel=label,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .Disposable */.JT.None}provideWithTextEditor(context,picker,token){const editor=context.editor,disposables=new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .DisposableStore */.SL;
// Goto line once picked
disposables.add(picker.onDidAccept((event=>{const[item]=picker.selectedItems;if(item){if(!this.isValidLineNumber(editor,item.lineNumber))return;this.gotoLocation(context,{range:this.toRange(item.lineNumber,item.column),keyMods:picker.keyMods,preserveFocus:event.inBackground}),event.inBackground||picker.hide()}})));
// React to picker changes
const updatePickerAndEditor=()=>{const position=this.parsePosition(editor,picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length)),label=this.getPickLabel(editor,position.lineNumber,position.column);
// Clear decorations for invalid range
if(
// Picker
picker.items=[{lineNumber:position.lineNumber,column:position.column,label:label}],
// ARIA Label
picker.ariaLabel=label,!this.isValidLineNumber(editor,position.lineNumber))return void this.clearDecorations(editor);
// Reveal
const range=this.toRange(position.lineNumber,position.column);editor.revealRangeInCenter(range,0/* Smooth */),
// Decorate
this.addDecorations(editor,range)};updatePickerAndEditor(),disposables.add(picker.onDidChangeValue((()=>updatePickerAndEditor())));
// Adjust line number visibility as needed
const codeEditor=(0,_browser_editorBrowser_js__WEBPACK_IMPORTED_MODULE_1__/* .getCodeEditor */.Pi)(editor);if(codeEditor){const options=codeEditor.getOptions(),lineNumbers=options.get(59/* lineNumbers */);2/* Relative */===lineNumbers.renderType&&(codeEditor.updateOptions({lineNumbers:"on"}),disposables.add((0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .toDisposable */.OF)((()=>codeEditor.updateOptions({lineNumbers:"relative"})))))}return disposables}toRange(lineNumber=1,column=1){return{startLineNumber:lineNumber,startColumn:column,endLineNumber:lineNumber,endColumn:column}}parsePosition(editor,value){
// Support line-col formats of `line,col`, `line:col`, `line#col`
const numbers=value.split(/,|:|#/).map((part=>parseInt(part,10))).filter((part=>!isNaN(part))),endLine=this.lineCount(editor)+1;return{lineNumber:numbers[0]>0?numbers[0]:endLine+numbers[0],column:numbers[1]}}getPickLabel(editor,lineNumber,column){
// Location valid: indicate this as picker label
if(this.isValidLineNumber(editor,lineNumber))return this.isValidColumn(editor,lineNumber,column)?(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("gotoLineColumnLabel","Go to line {0} and character {1}.",lineNumber,column):(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("gotoLineLabel","Go to line {0}.",lineNumber);
// Location invalid: show generic label
const position=editor.getPosition()||{lineNumber:1,column:1},lineCount=this.lineCount(editor);return lineCount>1?(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",position.lineNumber,position.column,lineCount):(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",position.lineNumber,position.column)}isValidLineNumber(editor,lineNumber){return!(!lineNumber||"number"!==typeof lineNumber)&&(lineNumber>0&&lineNumber<=this.lineCount(editor))}isValidColumn(editor,lineNumber,column){if(!column||"number"!==typeof column)return!1;const model=this.getModel(editor);if(!model)return!1;const positionCandidate={lineNumber:lineNumber,column:column};return model.validatePosition(positionCandidate).equals(positionCandidate)}lineCount(editor){var _a,_b;return null!==(_b=null===(_a=this.getModel(editor))||void 0===_a?void 0:_a.getLineCount())&&void 0!==_b?_b:0}}AbstractGotoLineQuickAccessProvider.PREFIX=":"},
/***/167350:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */S:function(){/* binding */return AbstractGotoSymbolQuickAccessProvider}
/* harmony export */});
/* harmony import */var _base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(471050),_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(773046),_base_common_fuzzyScorer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(753192),_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(905976),_base_common_strings_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(697295),_common_core_range_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(624314),_common_modes_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(860303),_documentSymbols_outlineModel_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(986895),_editorNavigationQuickAccess_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(98275),_nls_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(663580),__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
/* harmony import */class AbstractGotoSymbolQuickAccessProvider extends _editorNavigationQuickAccess_js__WEBPACK_IMPORTED_MODULE_7__/* .AbstractEditorNavigationQuickAccessProvider */.X{constructor(options=Object.create(null)){super(options),this.options=options,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(picker){return this.provideLabelPick(picker,(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .Disposable */.JT.None}provideWithTextEditor(context,picker,token){const editor=context.editor,model=this.getModel(editor);return model?
// Provide symbols from model if available in registry
_common_modes_js__WEBPACK_IMPORTED_MODULE_5__/* .DocumentSymbolProviderRegistry */.vJ.has(model)?this.doProvideWithEditorSymbols(context,model,picker,token):this.doProvideWithoutEditorSymbols(context,model,picker,token):_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .Disposable */.JT.None}doProvideWithoutEditorSymbols(context,model,picker,token){const disposables=new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .DisposableStore */.SL;
// Generic pick for not having any symbol information
return this.provideLabelPick(picker,(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),
// Wait for changes to the registry and see if eventually
// we do get symbols. This can happen if the picker is opened
// very early after the model has loaded but before the
// language registry is ready.
// https://github.com/microsoft/vscode/issues/70607
(()=>{__awaiter(this,void 0,void 0,(function*(){const result=yield this.waitForLanguageSymbolRegistry(model,disposables);result&&!token.isCancellationRequested&&disposables.add(this.doProvideWithEditorSymbols(context,model,picker,token))}))})(),disposables}provideLabelPick(picker,label){picker.items=[{label:label,index:0,kind:14/* String */}],picker.ariaLabel=label}waitForLanguageSymbolRegistry(model,disposables){return __awaiter(this,void 0,void 0,(function*(){if(_common_modes_js__WEBPACK_IMPORTED_MODULE_5__/* .DocumentSymbolProviderRegistry */.vJ.has(model))return!0;let symbolProviderRegistryPromiseResolve;const symbolProviderRegistryPromise=new Promise((resolve=>symbolProviderRegistryPromiseResolve=resolve)),symbolProviderListener=disposables.add(_common_modes_js__WEBPACK_IMPORTED_MODULE_5__/* .DocumentSymbolProviderRegistry */.vJ.onDidChange((()=>{_common_modes_js__WEBPACK_IMPORTED_MODULE_5__/* .DocumentSymbolProviderRegistry */.vJ.has(model)&&(symbolProviderListener.dispose(),symbolProviderRegistryPromiseResolve(!0))})));
// Resolve promise when registry knows model
// Resolve promise when we get disposed too
return disposables.add((0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .toDisposable */.OF)((()=>symbolProviderRegistryPromiseResolve(!1)))),symbolProviderRegistryPromise}))}doProvideWithEditorSymbols(context,model,picker,token){const editor=context.editor,disposables=new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .DisposableStore */.SL;
// Goto symbol once picked
disposables.add(picker.onDidAccept((event=>{const[item]=picker.selectedItems;item&&item.range&&(this.gotoLocation(context,{range:item.range.selection,keyMods:picker.keyMods,preserveFocus:event.inBackground}),event.inBackground||picker.hide())}))),
// Goto symbol side by side if enabled
disposables.add(picker.onDidTriggerItemButton((({item:item})=>{item&&item.range&&(this.gotoLocation(context,{range:item.range.selection,keyMods:picker.keyMods,forceSideBySide:!0}),picker.hide())})));
// Resolve symbols from document once and reuse this
// request for all filtering and typing then on
const symbolsPromise=this.getDocumentSymbols(model,token);
// Set initial picks and update on type
let picksCts;const updatePickerItems=()=>__awaiter(this,void 0,void 0,(function*(){
// Cancel any previous ask for picks and busy
null===picksCts||void 0===picksCts||picksCts.dispose(!0),picker.busy=!1,
// Create new cancellation source for this run
picksCts=new _base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__/* .CancellationTokenSource */.A(token),
// Collect symbol picks
picker.busy=!0;try{const query=(0,_base_common_fuzzyScorer_js__WEBPACK_IMPORTED_MODULE_2__/* .prepareQuery */.AO)(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim()),items=yield this.doGetSymbolPicks(symbolsPromise,query,void 0,picksCts.token);if(token.isCancellationRequested)return;items.length>0?picker.items=items:query.original.length>0?this.provideLabelPick(picker,(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(picker,(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("noSymbolResults","No editor symbols"))}finally{token.isCancellationRequested||(picker.busy=!1)}}));disposables.add(picker.onDidChangeValue((()=>updatePickerItems()))),updatePickerItems();
// Reveal and decorate when active item changes
// However, ignore the very first event so that
// opening the picker is not immediately revealing
// and decorating the first entry.
let ignoreFirstActiveEvent=!0;return disposables.add(picker.onDidChangeActive((()=>{const[item]=picker.activeItems;if(item&&item.range){if(ignoreFirstActiveEvent)return void(ignoreFirstActiveEvent=!1);
// Reveal
editor.revealRangeInCenter(item.range.selection,0/* Smooth */),
// Decorate
this.addDecorations(editor,item.range.decoration)}}))),disposables}doGetSymbolPicks(symbolsPromise,query,options,token){return __awaiter(this,void 0,void 0,(function*(){const symbols=yield symbolsPromise;if(token.isCancellationRequested)return[];const filterBySymbolKind=0===query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX),filterPos=filterBySymbolKind?1:0;
// Split between symbol and container query
let symbolQuery,containerQuery;query.values&&query.values.length>1?(symbolQuery=(0,_base_common_fuzzyScorer_js__WEBPACK_IMPORTED_MODULE_2__/* .pieceToQuery */.Ic)(query.values[0]),// symbol: only match on first part
containerQuery=(0,_base_common_fuzzyScorer_js__WEBPACK_IMPORTED_MODULE_2__/* .pieceToQuery */.Ic)(query.values.slice(1))):symbolQuery=query;
// Convert to symbol picks and apply filtering
const filteredSymbolPicks=[];for(let index=0;index<symbols.length;index++){const symbol=symbols[index],symbolLabel=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_4__/* .trim */.fy)(symbol.name),symbolLabelWithIcon=`$(symbol-${_common_modes_js__WEBPACK_IMPORTED_MODULE_5__/* .SymbolKinds */.uZ.toString(symbol.kind)||"property"}) ${symbolLabel}`,symbolLabelIconOffset=symbolLabelWithIcon.length-symbolLabel.length;let symbolScore,symbolMatches,containerScore,containerMatches,containerLabel=symbol.containerName;if((null===options||void 0===options?void 0:options.extraContainerLabel)&&(containerLabel=containerLabel?`${options.extraContainerLabel}  ${containerLabel}`:options.extraContainerLabel),query.original.length>filterPos){
// First: try to score on the entire query, it is possible that
// the symbol matches perfectly (e.g. searching for "change log"
// can be a match on a markdown symbol "change log"). In that
// case we want to skip the container query altogether.
let skipContainerQuery=!1;
// Otherwise: score on the symbol query and match on the container later
if(symbolQuery!==query&&([symbolScore,symbolMatches]=(0,_base_common_fuzzyScorer_js__WEBPACK_IMPORTED_MODULE_2__/* .scoreFuzzy2 */.mt)(symbolLabelWithIcon,Object.assign(Object.assign({},query),{values:void 0/* disable multi-query support */}),filterPos,symbolLabelIconOffset),"number"===typeof symbolScore&&(skipContainerQuery=!0)),"number"!==typeof symbolScore&&([symbolScore,symbolMatches]=(0,_base_common_fuzzyScorer_js__WEBPACK_IMPORTED_MODULE_2__/* .scoreFuzzy2 */.mt)(symbolLabelWithIcon,symbolQuery,filterPos,symbolLabelIconOffset),"number"!==typeof symbolScore))continue;
// Score by container if specified
if(!skipContainerQuery&&containerQuery){if(containerLabel&&containerQuery.original.length>0&&([containerScore,containerMatches]=(0,_base_common_fuzzyScorer_js__WEBPACK_IMPORTED_MODULE_2__/* .scoreFuzzy2 */.mt)(containerLabel,containerQuery)),"number"!==typeof containerScore)continue;"number"===typeof symbolScore&&(symbolScore+=containerScore)}}const deprecated=symbol.tags&&symbol.tags.indexOf(1/* Deprecated */)>=0;filteredSymbolPicks.push({index:index,kind:symbol.kind,score:symbolScore,label:symbolLabelWithIcon,ariaLabel:symbolLabel,description:containerLabel,highlights:deprecated?void 0:{label:symbolMatches,description:containerMatches},range:{selection:_common_core_range_js__WEBPACK_IMPORTED_MODULE_9__/* .Range */.e.collapseToStart(symbol.selectionRange),decoration:symbol.range},strikethrough:deprecated,buttons:(()=>{var _a,_b;const openSideBySideDirection=(null===(_a=this.options)||void 0===_a?void 0:_a.openSideBySideDirection)?null===(_b=this.options)||void 0===_b?void 0:_b.openSideBySideDirection():void 0;if(openSideBySideDirection)return[{iconClass:"right"===openSideBySideDirection?_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_1__/* .Codicon */.lA.splitHorizontal.classNames:_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_1__/* .Codicon */.lA.splitVertical.classNames,tooltip:"right"===openSideBySideDirection?(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("openToSide","Open to the Side"):(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("openToBottom","Open to the Bottom")}]})()})}
// Sort by score
const sortedFilteredSymbolPicks=filteredSymbolPicks.sort(((symbolA,symbolB)=>filterBySymbolKind?this.compareByKindAndScore(symbolA,symbolB):this.compareByScore(symbolA,symbolB)));
// Add separator for types
// - @  only total number of symbols
// - @: grouped by symbol kind
let symbolPicks=[];if(filterBySymbolKind){let lastSymbolKind,lastSeparator,lastSymbolKindCounter=0;function updateLastSeparatorLabel(){lastSeparator&&"number"===typeof lastSymbolKind&&lastSymbolKindCounter>0&&(lastSeparator.label=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_4__/* .format */.WU)(NLS_SYMBOL_KIND_CACHE[lastSymbolKind]||FALLBACK_NLS_SYMBOL_KIND,lastSymbolKindCounter))}for(const symbolPick of sortedFilteredSymbolPicks)
// Found new kind
lastSymbolKind!==symbolPick.kind?(
// Update last separator with number of symbols we found for kind
updateLastSeparatorLabel(),lastSymbolKind=symbolPick.kind,lastSymbolKindCounter=1,
// Add new separator for new kind
lastSeparator={type:"separator"},symbolPicks.push(lastSeparator)):lastSymbolKindCounter++,
// Add to final result
symbolPicks.push(symbolPick);
// Update last separator with number of symbols we found for kind
updateLastSeparatorLabel()}else sortedFilteredSymbolPicks.length>0&&(symbolPicks=[{label:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("symbols","symbols ({0})",filteredSymbolPicks.length),type:"separator"},...sortedFilteredSymbolPicks]);return symbolPicks}))}compareByScore(symbolA,symbolB){if("number"!==typeof symbolA.score&&"number"===typeof symbolB.score)return 1;if("number"===typeof symbolA.score&&"number"!==typeof symbolB.score)return-1;if("number"===typeof symbolA.score&&"number"===typeof symbolB.score){if(symbolA.score>symbolB.score)return-1;if(symbolA.score<symbolB.score)return 1}return symbolA.index<symbolB.index?-1:symbolA.index>symbolB.index?1:0}compareByKindAndScore(symbolA,symbolB){const kindA=NLS_SYMBOL_KIND_CACHE[symbolA.kind]||FALLBACK_NLS_SYMBOL_KIND,kindB=NLS_SYMBOL_KIND_CACHE[symbolB.kind]||FALLBACK_NLS_SYMBOL_KIND,result=kindA.localeCompare(kindB);return 0===result?this.compareByScore(symbolA,symbolB):result}getDocumentSymbols(document,token){return __awaiter(this,void 0,void 0,(function*(){const model=yield _documentSymbols_outlineModel_js__WEBPACK_IMPORTED_MODULE_6__/* .OutlineModel */.C3.create(document,token);return token.isCancellationRequested?[]:model.asListOfDocumentSymbols()}))}}AbstractGotoSymbolQuickAccessProvider.PREFIX="@",AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX=":",AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY=`${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;
// #region NLS Helpers
const FALLBACK_NLS_SYMBOL_KIND=(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("property","properties ({0})"),NLS_SYMBOL_KIND_CACHE={[5/* Method */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("method","methods ({0})"),[11/* Function */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("function","functions ({0})"),[8/* Constructor */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("_constructor","constructors ({0})"),[12/* Variable */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("variable","variables ({0})"),[4/* Class */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("class","classes ({0})"),[22/* Struct */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("struct","structs ({0})"),[23/* Event */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("event","events ({0})"),[24/* Operator */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("operator","operators ({0})"),[10/* Interface */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("interface","interfaces ({0})"),[2/* Namespace */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("namespace","namespaces ({0})"),[3/* Package */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("package","packages ({0})"),[25/* TypeParameter */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("typeParameter","type parameters ({0})"),[1/* Module */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("modules","modules ({0})"),[6/* Property */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("property","properties ({0})"),[9/* Enum */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("enum","enumerations ({0})"),[21/* EnumMember */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("enumMember","enumeration members ({0})"),[14/* String */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("string","strings ({0})"),[0/* File */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("file","files ({0})"),[17/* Array */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("array","arrays ({0})"),[15/* Number */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("number","numbers ({0})"),[16/* Boolean */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("boolean","booleans ({0})"),[18/* Object */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("object","objects ({0})"),[19/* Key */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("key","keys ({0})"),[7/* Field */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("field","fields ({0})"),[13/* Constant */]:(0,_nls_js__WEBPACK_IMPORTED_MODULE_8__/* .localize */.N)("constant","constants ({0})")}},
/***/563472:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */Lv:function(){/* binding */return Choice},
/* harmony export */Vm:function(){/* binding */return Placeholder},
/* harmony export */Yj:function(){/* binding */return SnippetParser},
/* harmony export */xv:function(){/* binding */return Text}
/* harmony export */});
/* unused harmony exports Scanner, Marker, TransformableMarker, Transform, FormatString, Variable, TextmateSnippet */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class Scanner{constructor(){this.value="",this.pos=0}static isDigitCharacter(ch){return ch>=48/* Digit0 */&&ch<=57/* Digit9 */}static isVariableCharacter(ch){return 95/* Underline */===ch||ch>=97/* a */&&ch<=122/* z */||ch>=65/* A */&&ch<=90/* Z */}text(value){this.value=value,this.pos=0}tokenText(token){return this.value.substr(token.pos,token.len)}next(){if(this.pos>=this.value.length)return{type:14/* EOF */,pos:this.pos,len:0};let type,pos=this.pos,len=0,ch=this.value.charCodeAt(pos);if(
// static types
type=Scanner._table[ch],"number"===typeof type)return this.pos+=1,{type:type,pos:pos,len:1};
// number
if(Scanner.isDigitCharacter(ch)){type=8/* Int */;do{len+=1,ch=this.value.charCodeAt(pos+len)}while(Scanner.isDigitCharacter(ch));return this.pos+=len,{type:type,pos:pos,len:len}}
// variable name
if(Scanner.isVariableCharacter(ch)){type=9/* VariableName */;do{ch=this.value.charCodeAt(pos+ ++len)}while(Scanner.isVariableCharacter(ch)||Scanner.isDigitCharacter(ch));return this.pos+=len,{type:type,pos:pos,len:len}}
// format
type=10/* Format */;do{len+=1,ch=this.value.charCodeAt(pos+len)}while(!isNaN(ch)&&"undefined"===typeof Scanner._table[ch]&&!Scanner.isDigitCharacter(ch)&&!Scanner.isVariableCharacter(ch));return this.pos+=len,{type:type,pos:pos,len:len}}}Scanner._table={[36/* DollarSign */]:0/* Dollar */,[58/* Colon */]:1/* Colon */,[44/* Comma */]:2/* Comma */,[123/* OpenCurlyBrace */]:3/* CurlyOpen */,[125/* CloseCurlyBrace */]:4/* CurlyClose */,[92/* Backslash */]:5/* Backslash */,[47/* Slash */]:6/* Forwardslash */,[124/* Pipe */]:7/* Pipe */,[43/* Plus */]:11/* Plus */,[45/* Dash */]:12/* Dash */,[63/* QuestionMark */]:13/* QuestionMark */};class Marker{constructor(){this._children=[]}appendChild(child){return child instanceof Text&&this._children[this._children.length-1]instanceof Text?
// this and previous child are text -> merge them
this._children[this._children.length-1].value+=child.value:(
// normal adoption of child
child.parent=this,this._children.push(child)),this}replace(child,others){const{parent:parent}=child,idx=parent.children.indexOf(child),newChildren=parent.children.slice(0);newChildren.splice(idx,1,...others),parent._children=newChildren,function _fixParent(children,parent){for(const child of children)child.parent=parent,_fixParent(child.children,child)}(others,parent)}get children(){return this._children}get snippet(){let candidate=this;while(1){if(!candidate)return;if(candidate instanceof TextmateSnippet)return candidate;candidate=candidate.parent}}toString(){return this.children.reduce(((prev,cur)=>prev+cur.toString()),"")}len(){return 0}}class Text extends Marker{constructor(value){super(),this.value=value}toString(){return this.value}len(){return this.value.length}clone(){return new Text(this.value)}}class TransformableMarker extends Marker{}class Placeholder extends TransformableMarker{constructor(index){super(),this.index=index}static compareByIndex(a,b){return a.index===b.index?0:a.isFinalTabstop?1:b.isFinalTabstop||a.index<b.index?-1:a.index>b.index?1:0}get isFinalTabstop(){return 0===this.index}get choice(){return 1===this._children.length&&this._children[0]instanceof Choice?this._children[0]:void 0}clone(){let ret=new Placeholder(this.index);return this.transform&&(ret.transform=this.transform.clone()),ret._children=this.children.map((child=>child.clone())),ret}}class Choice extends Marker{constructor(){super(...arguments),this.options=[]}appendChild(marker){return marker instanceof Text&&(marker.parent=this,this.options.push(marker)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let ret=new Choice;return this.options.forEach(ret.appendChild,ret),ret}}class Transform extends Marker{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(value){const _this=this;let didMatch=!1,ret=value.replace(this.regexp,(function(){return didMatch=!0,_this._replace(Array.prototype.slice.call(arguments,0,-2))}));
// when the regex didn't match and when the transform has
// else branches, then run those
return!didMatch&&this._children.some((child=>child instanceof FormatString&&Boolean(child.elseValue)))&&(ret=this._replace([])),ret}_replace(groups){let ret="";for(const marker of this._children)if(marker instanceof FormatString){let value=groups[marker.index]||"";value=marker.resolve(value),ret+=value}else ret+=marker.toString();return ret}toString(){return""}clone(){let ret=new Transform;return ret.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),ret._children=this.children.map((child=>child.clone())),ret}}class FormatString extends Marker{constructor(index,shorthandName,ifValue,elseValue){super(),this.index=index,this.shorthandName=shorthandName,this.ifValue=ifValue,this.elseValue=elseValue}resolve(value){return"upcase"===this.shorthandName?value?value.toLocaleUpperCase():"":"downcase"===this.shorthandName?value?value.toLocaleLowerCase():"":"capitalize"===this.shorthandName?value?value[0].toLocaleUpperCase()+value.substr(1):"":"pascalcase"===this.shorthandName?value?this._toPascalCase(value):"":"camelcase"===this.shorthandName?value?this._toCamelCase(value):"":Boolean(value)&&"string"===typeof this.ifValue?this.ifValue:Boolean(value)||"string"!==typeof this.elseValue?value||"":this.elseValue}_toPascalCase(value){const match=value.match(/[a-z0-9]+/gi);return match?match.map((word=>word.charAt(0).toUpperCase()+word.substr(1).toLowerCase())).join(""):value}_toCamelCase(value){const match=value.match(/[a-z0-9]+/gi);return match?match.map(((word,index)=>0===index?word.toLowerCase():word.charAt(0).toUpperCase()+word.substr(1).toLowerCase())).join(""):value}clone(){let ret=new FormatString(this.index,this.shorthandName,this.ifValue,this.elseValue);return ret}}class Variable extends TransformableMarker{constructor(name){super(),this.name=name}resolve(resolver){let value=resolver.resolve(this);return this.transform&&(value=this.transform.resolve(value||"")),void 0!==value&&(this._children=[new Text(value)],!0)}clone(){const ret=new Variable(this.name);return this.transform&&(ret.transform=this.transform.clone()),ret._children=this.children.map((child=>child.clone())),ret}}function walk(marker,visitor){const stack=[...marker];while(stack.length>0){const marker=stack.shift(),recurse=visitor(marker);if(!recurse)break;stack.unshift(...marker.children)}}class TextmateSnippet extends Marker{get placeholderInfo(){if(!this._placeholders){
// fill in placeholders
let last,all=[];this.walk((function(candidate){return candidate instanceof Placeholder&&(all.push(candidate),last=!last||last.index<candidate.index?candidate:last),!0})),this._placeholders={all:all,last:last}}return this._placeholders}get placeholders(){const{all:all}=this.placeholderInfo;return all}offset(marker){let pos=0,found=!1;return this.walk((candidate=>candidate===marker?(found=!0,!1):(pos+=candidate.len(),!0))),found?pos:-1}fullLen(marker){let ret=0;return walk([marker],(marker=>(ret+=marker.len(),!0))),ret}enclosingPlaceholders(placeholder){let ret=[],{parent:parent}=placeholder;while(parent)parent instanceof Placeholder&&ret.push(parent),parent=parent.parent;return ret}resolveVariables(resolver){return this.walk((candidate=>(candidate instanceof Variable&&candidate.resolve(resolver)&&(this._placeholders=void 0),!0))),this}appendChild(child){return this._placeholders=void 0,super.appendChild(child)}replace(child,others){return this._placeholders=void 0,super.replace(child,others)}clone(){let ret=new TextmateSnippet;return this._children=this.children.map((child=>child.clone())),ret}walk(visitor){walk(this.children,visitor)}}class SnippetParser{constructor(){this._scanner=new Scanner,this._token={type:14/* EOF */,pos:0,len:0}}static escape(value){return value.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(template){return/\${?CLIPBOARD/.test(template)}parse(value,insertFinalTabstop,enforceFinalTabstop){this._scanner.text(value),this._token=this._scanner.next();const snippet=new TextmateSnippet;while(this._parse(snippet));
// fill in values for placeholders. the first placeholder of an index
// that has a value defines the value for all placeholders with that index
const placeholderDefaultValues=new Map,incompletePlaceholders=[];let placeholderCount=0;snippet.walk((marker=>(marker instanceof Placeholder&&(placeholderCount+=1,marker.isFinalTabstop?placeholderDefaultValues.set(0,void 0):!placeholderDefaultValues.has(marker.index)&&marker.children.length>0?placeholderDefaultValues.set(marker.index,marker.children):incompletePlaceholders.push(marker)),!0)));for(const placeholder of incompletePlaceholders){const defaultValues=placeholderDefaultValues.get(placeholder.index);if(defaultValues){const clone=new Placeholder(placeholder.index);clone.transform=placeholder.transform;for(const child of defaultValues)clone.appendChild(child.clone());snippet.replace(placeholder,[clone])}}return enforceFinalTabstop||(enforceFinalTabstop=placeholderCount>0&&insertFinalTabstop),!placeholderDefaultValues.has(0)&&enforceFinalTabstop&&
// the snippet uses placeholders but has no
// final tabstop defined -> insert at the end
snippet.appendChild(new Placeholder(0)),snippet}_accept(type,value){if(void 0===type||this._token.type===type){let ret=!value||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),ret}return!1}_backTo(token){return this._scanner.pos=token.pos+token.len,this._token=token,!1}_until(type){const start=this._token;while(this._token.type!==type){if(14/* EOF */===this._token.type)return!1;if(5/* Backslash */===this._token.type){const nextToken=this._scanner.next();if(0/* Dollar */!==nextToken.type&&4/* CurlyClose */!==nextToken.type&&5/* Backslash */!==nextToken.type)return!1}this._token=this._scanner.next()}const value=this._scanner.value.substring(start.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),value}_parse(marker){return this._parseEscaped(marker)||this._parseTabstopOrVariableName(marker)||this._parseComplexPlaceholder(marker)||this._parseComplexVariable(marker)||this._parseAnything(marker)}
// \$, \\, \} -> just text
_parseEscaped(marker){let value;return!!(value=this._accept(5/* Backslash */,!0))&&(
// saw a backslash, append escaped token or that backslash
value=this._accept(0/* Dollar */,!0)||this._accept(4/* CurlyClose */,!0)||this._accept(5/* Backslash */,!0)||value,marker.appendChild(new Text(value)),!0)}
// $foo -> variable, $1 -> tabstop
_parseTabstopOrVariableName(parent){let value;const token=this._token,match=this._accept(0/* Dollar */)&&(value=this._accept(9/* VariableName */,!0)||this._accept(8/* Int */,!0));return match?(parent.appendChild(/^\d+$/.test(value)?new Placeholder(Number(value)):new Variable(value)),!0):this._backTo(token)}
// ${1:<children>}, ${1} -> placeholder
_parseComplexPlaceholder(parent){let index;const token=this._token,match=this._accept(0/* Dollar */)&&this._accept(3/* CurlyOpen */)&&(index=this._accept(8/* Int */,!0));if(!match)return this._backTo(token);const placeholder=new Placeholder(Number(index));if(this._accept(1/* Colon */))
// ${1:<children>}
while(1){
// ...} -> done
if(this._accept(4/* CurlyClose */))return parent.appendChild(placeholder),!0;if(!this._parse(placeholder))
// fallback
return parent.appendChild(new Text("${"+index+":")),placeholder.children.forEach(parent.appendChild,parent),!0}else{if(!(placeholder.index>0&&this._accept(7/* Pipe */)))return this._accept(6/* Forwardslash */)?
// ${1/<regex>/<format>/<options>}
this._parseTransform(placeholder)?(parent.appendChild(placeholder),!0):(this._backTo(token),!1):this._accept(4/* CurlyClose */)?(
// ${1}
parent.appendChild(placeholder),!0):this._backTo(token);{
// ${1|one,two,three|}
const choice=new Choice;while(1){if(this._parseChoiceElement(choice)){if(this._accept(2/* Comma */))
// opt, -> more
continue;if(this._accept(7/* Pipe */)&&(placeholder.appendChild(choice),this._accept(4/* CurlyClose */)))
// ..|} -> done
return parent.appendChild(placeholder),!0}return this._backTo(token),!1}}}}_parseChoiceElement(parent){const token=this._token,values=[];while(1){if(2/* Comma */===this._token.type||7/* Pipe */===this._token.type)break;let value;if(
// \, \|, or \\
value=(value=this._accept(5/* Backslash */,!0))?this._accept(2/* Comma */,!0)||this._accept(7/* Pipe */,!0)||this._accept(5/* Backslash */,!0)||value:this._accept(void 0,!0),!value)
// EOF
return this._backTo(token),!1;values.push(value)}return 0===values.length?(this._backTo(token),!1):(parent.appendChild(new Text(values.join(""))),!0)}
// ${foo:<children>}, ${foo} -> variable
_parseComplexVariable(parent){let name;const token=this._token,match=this._accept(0/* Dollar */)&&this._accept(3/* CurlyOpen */)&&(name=this._accept(9/* VariableName */,!0));if(!match)return this._backTo(token);const variable=new Variable(name);if(!this._accept(1/* Colon */))return this._accept(6/* Forwardslash */)?
// ${foo/<regex>/<format>/<options>}
this._parseTransform(variable)?(parent.appendChild(variable),!0):(this._backTo(token),!1):this._accept(4/* CurlyClose */)?(
// ${foo}
parent.appendChild(variable),!0):this._backTo(token);
// ${foo:<children>}
while(1){
// ...} -> done
if(this._accept(4/* CurlyClose */))return parent.appendChild(variable),!0;if(!this._parse(variable))
// fallback
return parent.appendChild(new Text("${"+name+":")),variable.children.forEach(parent.appendChild,parent),!0}}_parseTransform(parent){
// ...<regex>/<format>/<options>}
let transform=new Transform,regexValue="",regexOptions="";
// (1) /regex
while(1){if(this._accept(6/* Forwardslash */))break;let escaped;if(escaped=this._accept(5/* Backslash */,!0))escaped=this._accept(6/* Forwardslash */,!0)||escaped,regexValue+=escaped;else{if(14/* EOF */===this._token.type)return!1;regexValue+=this._accept(void 0,!0)}}
// (2) /format
while(1){if(this._accept(6/* Forwardslash */))break;let escaped;if(escaped=this._accept(5/* Backslash */,!0))escaped=this._accept(5/* Backslash */,!0)||this._accept(6/* Forwardslash */,!0)||escaped,transform.appendChild(new Text(escaped));else if(!this._parseFormatString(transform)&&!this._parseAnything(transform))return!1}
// (3) /option
while(1){if(this._accept(4/* CurlyClose */))break;if(14/* EOF */===this._token.type)return!1;regexOptions+=this._accept(void 0,!0)}try{transform.regexp=new RegExp(regexValue,regexOptions)}catch(e){
// invalid regexp
return!1}return parent.transform=transform,!0}_parseFormatString(parent){const token=this._token;if(!this._accept(0/* Dollar */))return!1;let complex=!1;this._accept(3/* CurlyOpen */)&&(complex=!0);let index=this._accept(8/* Int */,!0);if(!index)return this._backTo(token),!1;if(!complex)
// $1
return parent.appendChild(new FormatString(Number(index))),!0;if(this._accept(4/* CurlyClose */))
// ${1}
return parent.appendChild(new FormatString(Number(index))),!0;if(!this._accept(1/* Colon */))return this._backTo(token),!1;if(this._accept(6/* Forwardslash */)){
// ${1:/upcase}
let shorthand=this._accept(9/* VariableName */,!0);return shorthand&&this._accept(4/* CurlyClose */)?(parent.appendChild(new FormatString(Number(index),shorthand)),!0):(this._backTo(token),!1)}if(this._accept(11/* Plus */)){
// ${1:+<if>}
let ifValue=this._until(4/* CurlyClose */);if(ifValue)return parent.appendChild(new FormatString(Number(index),void 0,ifValue,void 0)),!0}else if(this._accept(12/* Dash */)){
// ${2:-<else>}
let elseValue=this._until(4/* CurlyClose */);if(elseValue)return parent.appendChild(new FormatString(Number(index),void 0,void 0,elseValue)),!0}else if(this._accept(13/* QuestionMark */)){
// ${2:?<if>:<else>}
let ifValue=this._until(1/* Colon */);if(ifValue){let elseValue=this._until(4/* CurlyClose */);if(elseValue)return parent.appendChild(new FormatString(Number(index),void 0,ifValue,elseValue)),!0}}else{
// ${1:<else>}
let elseValue=this._until(4/* CurlyClose */);if(elseValue)return parent.appendChild(new FormatString(Number(index),void 0,void 0,elseValue)),!0}return this._backTo(token),!1}_parseAnything(marker){return 14/* EOF */!==this._token.type&&(marker.appendChild(new Text(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}
/***/},
/***/379599:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */A9:function(){/* binding */return CompletionOptions},
/* harmony export */GI:function(){/* binding */return suggestWidgetStatusbarMenu},
/* harmony export */ZJ:function(){/* binding */return getSnippetSuggestSupport},
/* harmony export */_y:function(){/* binding */return Context},
/* harmony export */i5:function(){/* binding */return showSimpleSuggestions},
/* harmony export */kL:function(){/* binding */return provideSuggestionItems},
/* harmony export */wg:function(){/* binding */return getSuggestionComparator}
/* harmony export */});
/* unused harmony exports CompletionItem, CompletionItemModel */
/* harmony import */var _base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(471050),_base_common_errors_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(817301),_base_common_filters_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(75392),_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(905976),_base_common_stopwatch_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84013),_base_common_types_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(998401),_base_common_uri_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70666),_common_core_position_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(50187),_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(624314),_common_modes_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(860303),_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(288216),_snippet_snippetParser_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(563472),_nls_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(663580),_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(784144),_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(820942),_platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(938819),__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
/* harmony import */const Context={Visible:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("suggestWidgetVisible",!1,(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("suggestWidgetDetailsVisible",!1,(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("suggestWidgetMultipleSuggestions",!1,(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("suggestionMakesTextEdit",!0,(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("acceptSuggestionOnEnter",!0,(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("suggestionHasInsertAndReplaceRange",!1,(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("suggestionInsertMode",void 0,{type:"string",description:(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_11__/* .RawContextKey */.uy("suggestionCanResolve",!1,(0,_nls_js__WEBPACK_IMPORTED_MODULE_12__/* .localize */.N)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},suggestWidgetStatusbarMenu=new _platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_9__/* .MenuId */.eH("suggestWidgetStatusBar");class CompletionItem{constructor(position,completion,container,provider){this.position=position,this.completion=completion,this.container=container,this.provider=provider,
// validation
this.isInvalid=!1,
// sorting, filtering
this.score=_base_common_filters_js__WEBPACK_IMPORTED_MODULE_2__/* .FuzzyScore */.CL.Default,this.distance=0,this.textLabel="string"===typeof completion.label?completion.label:completion.label.label,
// ensure lower-variants (perf)
this.labelLow=this.textLabel.toLowerCase(),
// validate label
this.isInvalid=!this.textLabel,this.sortTextLow=completion.sortText&&completion.sortText.toLowerCase(),this.filterTextLow=completion.filterText&&completion.filterText.toLowerCase(),
// normalize ranges
_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.isIRange(completion.range)?(this.editStart=new _common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L(completion.range.startLineNumber,completion.range.startColumn),this.editInsertEnd=new _common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L(completion.range.endLineNumber,completion.range.endColumn),this.editReplaceEnd=new _common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L(completion.range.endLineNumber,completion.range.endColumn),
// validate range
this.isInvalid=this.isInvalid||_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.spansMultipleLines(completion.range)||completion.range.startLineNumber!==position.lineNumber):(this.editStart=new _common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L(completion.range.insert.startLineNumber,completion.range.insert.startColumn),this.editInsertEnd=new _common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L(completion.range.insert.endLineNumber,completion.range.insert.endColumn),this.editReplaceEnd=new _common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L(completion.range.replace.endLineNumber,completion.range.replace.endColumn),
// validate ranges
this.isInvalid=this.isInvalid||_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.spansMultipleLines(completion.range.insert)||_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.spansMultipleLines(completion.range.replace)||completion.range.insert.startLineNumber!==position.lineNumber||completion.range.replace.startLineNumber!==position.lineNumber||completion.range.insert.startColumn!==completion.range.replace.startColumn),
// create the suggestion resolver
"function"!==typeof provider.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}
// ---- resolving
get isResolved(){return!!this._isResolved}resolve(token){return __awaiter(this,void 0,void 0,(function*(){if(!this._resolveCache){const sub=token.onCancellationRequested((()=>{this._resolveCache=void 0,this._isResolved=!1}));this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,token)).then((value=>{Object.assign(this.completion,value),this._isResolved=!0,sub.dispose()}),(err=>{(0,_base_common_errors_js__WEBPACK_IMPORTED_MODULE_1__/* .isPromiseCanceledError */.VV)(err)&&(
// the IPC queue will reject the request with the
// cancellation error -> reset cached
this._resolveCache=void 0,this._isResolved=!1)}))}return this._resolveCache}))}}class CompletionOptions{constructor(snippetSortOrder=2/* Bottom */,kindFilter=new Set,providerFilter=new Set,showDeprecated=!0){this.snippetSortOrder=snippetSortOrder,this.kindFilter=kindFilter,this.providerFilter=providerFilter,this.showDeprecated=showDeprecated}}let _snippetSuggestSupport;function getSnippetSuggestSupport(){return _snippetSuggestSupport}CompletionOptions.default=new CompletionOptions;class CompletionItemModel{constructor(items,needsClipboard,durations,disposable){this.items=items,this.needsClipboard=needsClipboard,this.durations=durations,this.disposable=disposable}}function provideSuggestionItems(model,position,options=CompletionOptions.default,context={triggerKind:0/* Invoke */},token=_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__/* .CancellationToken */.T.None){return __awaiter(this,void 0,void 0,(function*(){const sw=new _base_common_stopwatch_js__WEBPACK_IMPORTED_MODULE_4__/* .StopWatch */.G(!0);position=position.clone();const word=model.getWordAtPosition(position),defaultReplaceRange=word?new _common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e(position.lineNumber,word.startColumn,position.lineNumber,word.endColumn):_common_core_range_js__WEBPACK_IMPORTED_MODULE_13__/* .Range */.e.fromPositions(position),defaultRange={replace:defaultReplaceRange,insert:defaultReplaceRange.setEndPosition(position.lineNumber,position.column)},result=[],disposables=new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .DisposableStore */.SL,durations=[];let needsClipboard=!1;const onCompletionList=(provider,container,sw)=>{var _a,_b,_c;if(container){for(let suggestion of container.suggestions)if(!options.kindFilter.has(suggestion.kind)){
// skip if not showing deprecated suggestions
if(!options.showDeprecated&&(null===(_a=null===suggestion||void 0===suggestion?void 0:suggestion.tags)||void 0===_a?void 0:_a.includes(1/* Deprecated */)))continue;
// fill in default range when missing
suggestion.range||(suggestion.range=defaultRange),
// fill in default sortText when missing
suggestion.sortText||(suggestion.sortText="string"===typeof suggestion.label?suggestion.label:suggestion.label.label),!needsClipboard&&suggestion.insertTextRules&&4/* InsertAsSnippet */&suggestion.insertTextRules&&(needsClipboard=_snippet_snippetParser_js__WEBPACK_IMPORTED_MODULE_8__/* .SnippetParser */.Yj.guessNeedsClipboard(suggestion.insertText)),result.push(new CompletionItem(position,suggestion,container,provider))}(0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__/* .isDisposable */.Wf)(container)&&disposables.add(container),durations.push({providerName:null!==(_b=provider._debugDisplayName)&&void 0!==_b?_b:"unkown_provider",elapsedProvider:null!==(_c=container.duration)&&void 0!==_c?_c:-1,elapsedOverall:sw.elapsed()})}},snippetCompletions=(()=>__awaiter(this,void 0,void 0,(function*(){if(!_snippetSuggestSupport||options.kindFilter.has(27/* Snippet */))return;if(options.providerFilter.size>0&&!options.providerFilter.has(_snippetSuggestSupport))return;const sw=new _base_common_stopwatch_js__WEBPACK_IMPORTED_MODULE_4__/* .StopWatch */.G(!0),list=yield _snippetSuggestSupport.provideCompletionItems(model,position,context,token);onCompletionList(_snippetSuggestSupport,list,sw)})))();
// ask for snippets in parallel to asking "real" providers. Only do something if configured to
// do so - no snippet filter, no special-providers-only request
// add suggestions from contributed providers - providers are ordered in groups of
// equal score and once a group produces a result the process stops
// get provider groups, always add snippet suggestion provider
for(let providerGroup of _common_modes_js__WEBPACK_IMPORTED_MODULE_6__/* .CompletionProviderRegistry */.KZ.orderedGroups(model)){
// for each support in the group ask for suggestions
let lenBefore=result.length;if(yield Promise.all(providerGroup.map((provider=>__awaiter(this,void 0,void 0,(function*(){if(!(options.providerFilter.size>0)||options.providerFilter.has(provider))try{const sw=new _base_common_stopwatch_js__WEBPACK_IMPORTED_MODULE_4__/* .StopWatch */.G(!0),list=yield provider.provideCompletionItems(model,position,context,token);onCompletionList(provider,list,sw)}catch(err){(0,_base_common_errors_js__WEBPACK_IMPORTED_MODULE_1__/* .onUnexpectedExternalError */.Cp)(err)}}))))),lenBefore!==result.length||token.isCancellationRequested)break}return yield snippetCompletions,token.isCancellationRequested?(disposables.dispose(),Promise.reject((0,_base_common_errors_js__WEBPACK_IMPORTED_MODULE_1__/* .canceled */.F0)())):new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)),needsClipboard,{entries:durations,elapsed:sw.elapsed()},disposables)}))}function defaultComparator(a,b){
// check with 'sortText'
if(a.sortTextLow&&b.sortTextLow){if(a.sortTextLow<b.sortTextLow)return-1;if(a.sortTextLow>b.sortTextLow)return 1}
// check with 'label'
return a.completion.label<b.completion.label?-1:a.completion.label>b.completion.label?1:a.completion.kind-b.completion.kind;
// check with 'type'
}function snippetUpComparator(a,b){if(a.completion.kind!==b.completion.kind){if(27/* Snippet */===a.completion.kind)return-1;if(27/* Snippet */===b.completion.kind)return 1}return defaultComparator(a,b)}function snippetDownComparator(a,b){if(a.completion.kind!==b.completion.kind){if(27/* Snippet */===a.completion.kind)return 1;if(27/* Snippet */===b.completion.kind)return-1}return defaultComparator(a,b)}const _snippetComparators=new Map;function getSuggestionComparator(snippetConfig){return _snippetComparators.get(snippetConfig)}_snippetComparators.set(0/* Top */,snippetUpComparator),_snippetComparators.set(2/* Bottom */,snippetDownComparator),_snippetComparators.set(1/* Inline */,defaultComparator),_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_10__/* .CommandsRegistry */.P.registerCommand("_executeCompletionItemProvider",((accessor,...args)=>__awaiter(void 0,void 0,void 0,(function*(){const[uri,position,triggerCharacter,maxItemsToResolve]=args;(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_15__/* .assertType */.p_)(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_5__/* .URI */.o.isUri(uri)),(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_15__/* .assertType */.p_)(_common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L.isIPosition(position)),(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_15__/* .assertType */.p_)("string"===typeof triggerCharacter||!triggerCharacter),(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_15__/* .assertType */.p_)("number"===typeof maxItemsToResolve||!maxItemsToResolve);const ref=yield accessor.get(_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_7__/* .ITextModelService */.S).createModelReference(uri);try{const result={incomplete:!1,suggestions:[]},resolving=[],completions=yield provideSuggestionItems(ref.object.textEditorModel,_common_core_position_js__WEBPACK_IMPORTED_MODULE_14__/* .Position */.L.lift(position),void 0,{triggerCharacter:triggerCharacter,triggerKind:triggerCharacter?1/* TriggerCharacter */:0/* Invoke */});for(const item of completions.items)resolving.length<(null!==maxItemsToResolve&&void 0!==maxItemsToResolve?maxItemsToResolve:0)&&resolving.push(item.resolve(_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_0__/* .CancellationToken */.T.None)),result.incomplete=result.incomplete||item.container.incomplete,result.suggestions.push(item.completion);try{return yield Promise.all(resolving),result}finally{setTimeout((()=>completions.disposable.dispose()),100)}}finally{ref.dispose()}}))));const _provider=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let suggestions=this.onlyOnceSuggestions.slice(0),result={suggestions:suggestions};return this.onlyOnceSuggestions.length=0,result}};function showSimpleSuggestions(editor,suggestions){setTimeout((()=>{_provider.onlyOnceSuggestions.push(...suggestions),editor.getContribution("editor.contrib.suggestController").triggerSuggest((new Set).add(_provider))}),0)}
/***/_common_modes_js__WEBPACK_IMPORTED_MODULE_6__/* .CompletionProviderRegistry */.KZ.register("*",_provider)},
/***/324954:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* unused harmony exports SYMBOL_ICON_ARRAY_FOREGROUND, SYMBOL_ICON_BOOLEAN_FOREGROUND, SYMBOL_ICON_CLASS_FOREGROUND, SYMBOL_ICON_COLOR_FOREGROUND, SYMBOL_ICON_CONSTANT_FOREGROUND, SYMBOL_ICON_CONSTRUCTOR_FOREGROUND, SYMBOL_ICON_ENUMERATOR_FOREGROUND, SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND, SYMBOL_ICON_EVENT_FOREGROUND, SYMBOL_ICON_FIELD_FOREGROUND, SYMBOL_ICON_FILE_FOREGROUND, SYMBOL_ICON_FOLDER_FOREGROUND, SYMBOL_ICON_FUNCTION_FOREGROUND, SYMBOL_ICON_INTERFACE_FOREGROUND, SYMBOL_ICON_KEY_FOREGROUND, SYMBOL_ICON_KEYWORD_FOREGROUND, SYMBOL_ICON_METHOD_FOREGROUND, SYMBOL_ICON_MODULE_FOREGROUND, SYMBOL_ICON_NAMESPACE_FOREGROUND, SYMBOL_ICON_NULL_FOREGROUND, SYMBOL_ICON_NUMBER_FOREGROUND, SYMBOL_ICON_OBJECT_FOREGROUND, SYMBOL_ICON_OPERATOR_FOREGROUND, SYMBOL_ICON_PACKAGE_FOREGROUND, SYMBOL_ICON_PROPERTY_FOREGROUND, SYMBOL_ICON_REFERENCE_FOREGROUND, SYMBOL_ICON_SNIPPET_FOREGROUND, SYMBOL_ICON_STRING_FOREGROUND, SYMBOL_ICON_STRUCT_FOREGROUND, SYMBOL_ICON_TEXT_FOREGROUND, SYMBOL_ICON_TYPEPARAMETER_FOREGROUND, SYMBOL_ICON_UNIT_FOREGROUND, SYMBOL_ICON_VARIABLE_FOREGROUND */
/* harmony import */var _base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(773046),_nls_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(663580),_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(173910),_platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(897781);
/* harmony import */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const SYMBOL_ICON_ARRAY_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.arrayForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_BOOLEAN_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.booleanForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_CLASS_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_COLOR_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.colorForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_CONSTANT_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.constantForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_CONSTRUCTOR_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_ENUMERATOR_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_EVENT_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_FIELD_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_FILE_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.fileForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_FOLDER_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.folderForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_FUNCTION_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_INTERFACE_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_KEY_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.keyForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_KEYWORD_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.keywordForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_METHOD_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_MODULE_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.moduleForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_NAMESPACE_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.namespaceForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_NULL_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.nullForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_NUMBER_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.numberForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_OBJECT_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.objectForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_OPERATOR_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.operatorForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_PACKAGE_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.packageForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_PROPERTY_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.propertyForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_REFERENCE_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.referenceForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_SNIPPET_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.snippetForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_STRING_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.stringForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_STRUCT_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.structForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_TEXT_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.textForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_TYPEPARAMETER_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.typeParameterForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_UNIT_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.unitForeground",{dark:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,light:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR,hc:_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .foreground */.dR},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SYMBOL_ICON_VARIABLE_FOREGROUND=(0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .registerColor */.P6)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));(0,_platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_2__/* .registerThemingParticipant */.Ic)(((theme,collector)=>{const symbolIconArrayColor=theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);symbolIconArrayColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);const symbolIconBooleanColor=theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);symbolIconBooleanColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);const symbolIconClassColor=theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);symbolIconClassColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);const symbolIconMethodColor=theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);symbolIconMethodColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);const symbolIconColorColor=theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);symbolIconColorColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);const symbolIconConstantColor=theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);symbolIconConstantColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);const symbolIconConstructorColor=theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);symbolIconConstructorColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);const symbolIconEnumeratorColor=theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);symbolIconEnumeratorColor&&collector.addRule(`\n\t\t\t${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolValue.cssSelector},${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);const symbolIconEnumeratorMemberColor=theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);symbolIconEnumeratorMemberColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);const symbolIconEventColor=theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);symbolIconEventColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);const symbolIconFieldColor=theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);symbolIconFieldColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);const symbolIconFileColor=theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);symbolIconFileColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);const symbolIconFolderColor=theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);symbolIconFolderColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);const symbolIconFunctionColor=theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);symbolIconFunctionColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);const symbolIconInterfaceColor=theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);symbolIconInterfaceColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);const symbolIconKeyColor=theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);symbolIconKeyColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);const symbolIconKeywordColor=theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);symbolIconKeywordColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);const symbolIconModuleColor=theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);symbolIconModuleColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);const outlineNamespaceColor=theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);outlineNamespaceColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);const symbolIconNullColor=theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);symbolIconNullColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);const symbolIconNumberColor=theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);symbolIconNumberColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);const symbolIconObjectColor=theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);symbolIconObjectColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);const symbolIconOperatorColor=theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);symbolIconOperatorColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);const symbolIconPackageColor=theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);symbolIconPackageColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);const symbolIconPropertyColor=theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);symbolIconPropertyColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);const symbolIconReferenceColor=theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);symbolIconReferenceColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);const symbolIconSnippetColor=theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);symbolIconSnippetColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);const symbolIconStringColor=theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);symbolIconStringColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);const symbolIconStructColor=theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);symbolIconStructColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);const symbolIconTextColor=theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);symbolIconTextColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);const symbolIconTypeParameterColor=theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);symbolIconTypeParameterColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);const symbolIconUnitColor=theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);symbolIconUnitColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);const symbolIconVariableColor=theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);symbolIconVariableColor&&collector.addRule(`${_base_common_codicons_js__WEBPACK_IMPORTED_MODULE_0__/* .Codicon */.lA.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`)}))},
/***/419720:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */R:function(){/* binding */return ToggleTabFocusModeAction}
/* harmony export */});
/* harmony import */var _base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(585152),_browser_editorExtensions_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(616830),_common_config_commonEditorConfig_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(156345),_nls_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(663580);
/* harmony import */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class ToggleTabFocusModeAction extends _browser_editorExtensions_js__WEBPACK_IMPORTED_MODULE_1__/* .EditorAction */.R6{constructor(){super({id:ToggleTabFocusModeAction.ID,label:_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091/* KeyM */,mac:{primary:1323/* KeyM */},weight:100/* EditorContrib */}})}run(accessor,editor){const oldValue=_common_config_commonEditorConfig_js__WEBPACK_IMPORTED_MODULE_2__/* .TabFocus */.nG.getTabFocusMode(),newValue=!oldValue;_common_config_commonEditorConfig_js__WEBPACK_IMPORTED_MODULE_2__/* .TabFocus */.nG.setTabFocusMode(newValue),newValue?(0,_base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__/* .alert */.Z9)(_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,_base_browser_ui_aria_aria_js__WEBPACK_IMPORTED_MODULE_0__/* .alert */.Z9)(_nls_js__WEBPACK_IMPORTED_MODULE_3__/* .localize */.N("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}ToggleTabFocusModeAction.ID="editor.action.toggleTabFocusMode",(0,_browser_editorExtensions_js__WEBPACK_IMPORTED_MODULE_1__/* .registerEditorAction */.Qr)(ToggleTabFocusModeAction)},
/***/506586:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */CancellationTokenSource:function(){/* binding */return CancellationTokenSource},
/* harmony export */Emitter:function(){/* binding */return Emitter},
/* harmony export */KeyCode:function(){/* binding */return KeyCode},
/* harmony export */KeyMod:function(){/* binding */return KeyMod},
/* harmony export */MarkerSeverity:function(){/* binding */return MarkerSeverity},
/* harmony export */MarkerTag:function(){/* binding */return MarkerTag},
/* harmony export */Position:function(){/* binding */return Position},
/* harmony export */Range:function(){/* binding */return Range},
/* harmony export */Selection:function(){/* binding */return Selection},
/* harmony export */SelectionDirection:function(){/* binding */return SelectionDirection},
/* harmony export */Token:function(){/* binding */return Token},
/* harmony export */Uri:function(){/* binding */return Uri},
/* harmony export */editor:function(){/* binding */return editor},
/* harmony export */languages:function(){/* binding */return languages}
/* harmony export */});
/* harmony import */var _a,_common_config_editorOptions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(364141),_common_standalone_standaloneBase_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(861762),_standalone_browser_standaloneEditor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(560462),_standalone_browser_standaloneLanguages_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(338312),_base_common_platform_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(901432),_contrib_format_format_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(744325);
/* harmony import */
// Set defaults for standalone editor
_common_config_editorOptions_js__WEBPACK_IMPORTED_MODULE_0__/* .EditorOptions */.BH.wrappingIndent.defaultValue=0/* None */,_common_config_editorOptions_js__WEBPACK_IMPORTED_MODULE_0__/* .EditorOptions */.BH.glyphMargin.defaultValue=!1,_common_config_editorOptions_js__WEBPACK_IMPORTED_MODULE_0__/* .EditorOptions */.BH.autoIndent.defaultValue=3/* Advanced */,_common_config_editorOptions_js__WEBPACK_IMPORTED_MODULE_0__/* .EditorOptions */.BH.overviewRulerLanes.defaultValue=2,
// We need to register a formatter selector which simply picks the first available formatter.
// See https://github.com/microsoft/monaco-editor/issues/2327
_contrib_format_format_js__WEBPACK_IMPORTED_MODULE_5__/* .FormattingConflicts */.xC.setFormatterSelector(((formatter,document,mode)=>Promise.resolve(formatter[0])));const api=(0,_common_standalone_standaloneBase_js__WEBPACK_IMPORTED_MODULE_1__/* .createMonacoBaseAPI */.O)();api.editor=(0,_standalone_browser_standaloneEditor_js__WEBPACK_IMPORTED_MODULE_2__/* .createMonacoEditorAPI */.yU)(),api.languages=(0,_standalone_browser_standaloneLanguages_js__WEBPACK_IMPORTED_MODULE_3__/* .createMonacoLanguagesAPI */.DT)();const CancellationTokenSource=api.CancellationTokenSource,Emitter=api.Emitter,KeyCode=api.KeyCode,KeyMod=api.KeyMod,Position=api.Position,Range=api.Range,Selection=api.Selection,SelectionDirection=api.SelectionDirection,MarkerSeverity=api.MarkerSeverity,MarkerTag=api.MarkerTag,Uri=api.Uri,Token=api.Token,editor=api.editor,languages=api.languages;((null===(_a=_base_common_platform_js__WEBPACK_IMPORTED_MODULE_4__/* .globals */.li.MonacoEnvironment)||void 0===_a?void 0:_a.globalAPI)||"function"===typeof define&&__webpack_require__.amdO)&&(self.monaco=api),"undefined"!==typeof self.require&&"function"===typeof self.require.config&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})
/***/},
/***/525449:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Mj:function(){/* reexport */return editor_api.languages}});
// UNUSED EXPORTS: CancellationTokenSource, Emitter, KeyCode, KeyMod, MarkerSeverity, MarkerTag, Position, Range, Selection, SelectionDirection, Token, Uri, editor
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/language/typescript/monaco.contribution.js + 1 modules
__webpack_require__(515422),__webpack_require__(740605),__webpack_require__(572323),__webpack_require__(468423),__webpack_require__(690780);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/language/css/monaco.contribution.js
var coreCommands=__webpack_require__(971513),aria=(__webpack_require__(8702),__webpack_require__(414869),__webpack_require__(475623),__webpack_require__(585152)),htmlContent=__webpack_require__(459365),keyCodes=__webpack_require__(22258),editorExtensions=__webpack_require__(616830),core_selection=__webpack_require__(203860),editorContextKeys=__webpack_require__(29102),nls=__webpack_require__(663580),contextkey=__webpack_require__(938819),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const SelectionAnchorSet=new contextkey/* RawContextKey */.uy("selectionAnchorSet",!1);let SelectionAnchorController=class SelectionAnchorController{constructor(editor,contextKeyService){this.editor=editor,this.selectionAnchorSetContextKey=SelectionAnchorSet.bindTo(contextKeyService),this.modelChangeListener=editor.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}static get(editor){return editor.getContribution(SelectionAnchorController.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const position=this.editor.getPosition(),previousDecorations=this.decorationId?[this.decorationId]:[],newDecorationId=this.editor.deltaDecorations(previousDecorations,[{range:core_selection/* Selection */.Y.fromPositions(position,position),options:{description:"selection-anchor",stickiness:1/* NeverGrowsWhenTypingAtEdges */,hoverMessage:(new htmlContent/* MarkdownString */.W5).appendText((0,nls/* localize */.N)("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=newDecorationId[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,aria/* alert */.Z9)((0,nls/* localize */.N)("anchorSet","Anchor set at {0}:{1}",position.lineNumber,position.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const anchorPosition=this.editor.getModel().getDecorationRange(this.decorationId);anchorPosition&&this.editor.setPosition(anchorPosition.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const start=this.editor.getModel().getDecorationRange(this.decorationId);if(start){const end=this.editor.getPosition();this.editor.setSelection(core_selection/* Selection */.Y.fromPositions(start.getStartPosition(),end)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};SelectionAnchorController.ID="editor.contrib.selectionAnchorController",SelectionAnchorController=__decorate([__param(1,contextkey/* IContextKeyService */.i6)],SelectionAnchorController);class SetSelectionAnchor extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,nls/* localize */.N)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2080/* KeyB */),weight:100/* EditorContrib */}})}run(_accessor,editor){return __awaiter(this,void 0,void 0,(function*(){const controller=SelectionAnchorController.get(editor);controller.setSelectionAnchor()}))}}class GoToSelectionAnchor extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,nls/* localize */.N)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:SelectionAnchorSet})}run(_accessor,editor){return __awaiter(this,void 0,void 0,(function*(){const controller=SelectionAnchorController.get(editor);controller.goToSelectionAnchor()}))}}class SelectFromAnchorToCursor extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,nls/* localize */.N)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:SelectionAnchorSet,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2089/* KeyK */),weight:100/* EditorContrib */}})}run(_accessor,editor){return __awaiter(this,void 0,void 0,(function*(){const controller=SelectionAnchorController.get(editor);controller.selectFromAnchorToCursor()}))}}class CancelSelectionAnchor extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,nls/* localize */.N)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:SelectionAnchorSet,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:9/* Escape */,weight:100/* EditorContrib */}})}run(_accessor,editor){return __awaiter(this,void 0,void 0,(function*(){const controller=SelectionAnchorController.get(editor);controller.cancelSelectionAnchor()}))}}(0,editorExtensions/* registerEditorContribution */._K)(SelectionAnchorController.ID,SelectionAnchorController),(0,editorExtensions/* registerEditorAction */.Qr)(SetSelectionAnchor),(0,editorExtensions/* registerEditorAction */.Qr)(GoToSelectionAnchor),(0,editorExtensions/* registerEditorAction */.Qr)(SelectFromAnchorToCursor),(0,editorExtensions/* registerEditorAction */.Qr)(CancelSelectionAnchor);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/async.js
var common_async=__webpack_require__(715393),lifecycle=__webpack_require__(905976),core_position=__webpack_require__(50187),core_range=__webpack_require__(624314),model=__webpack_require__(984973),textModel=__webpack_require__(724979),editorColorRegistry=__webpack_require__(627869),common_actions=__webpack_require__(784144),colorRegistry=__webpack_require__(173910),common_themeService=__webpack_require__(897781);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/lifecycle.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/bracketMatching.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const overviewRulerBracketMatchForeground=(0,colorRegistry/* registerColor */.P6)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},nls/* localize */.N("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class JumpToBracketAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.jumpToBracket",label:nls/* localize */.N("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3160/* Backslash */,weight:100/* EditorContrib */}})}run(accessor,editor){let controller=BracketMatchingController.get(editor);controller&&controller.jumpToBracket()}}class SelectToBracketAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.selectToBracket",label:nls/* localize */.N("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(accessor,editor,args){const controller=BracketMatchingController.get(editor);if(!controller)return;let selectBrackets=!0;args&&!1===args.selectBrackets&&(selectBrackets=!1),controller.selectToBracket(selectBrackets)}}class BracketsData{constructor(position,brackets,options){this.position=position,this.brackets=brackets,this.options=options}}class BracketMatchingController extends lifecycle/* Disposable */.JT{constructor(editor){super(),this._editor=editor,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new common_async/* RunOnceScheduler */.pY((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(63/* matchBrackets */),this._updateBracketsSoon.schedule(),this._register(editor.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(editor.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(editor.onDidChangeModel((e=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()}))),this._register(editor.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(editor.onDidChangeConfiguration((e=>{e.hasChanged(63/* matchBrackets */)&&(this._matchBrackets=this._editor.getOption(63/* matchBrackets */),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(editor.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(editor.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}static get(editor){return editor.getContribution(BracketMatchingController.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const model=this._editor.getModel(),newSelections=this._editor.getSelections().map((selection=>{const position=selection.getStartPosition(),brackets=model.matchBracket(position);
// find matching brackets if position is on a bracket
let newCursorPosition=null;if(brackets)brackets[0].containsPosition(position)?newCursorPosition=brackets[1].getStartPosition():brackets[1].containsPosition(position)&&(newCursorPosition=brackets[0].getStartPosition());else{
// find the enclosing brackets if the position isn't on a matching bracket
const enclosingBrackets=model.findEnclosingBrackets(position);if(enclosingBrackets)newCursorPosition=enclosingBrackets[0].getStartPosition();else{
// no enclosing brackets, try the very first next bracket
const nextBracket=model.findNextBracket(position);nextBracket&&nextBracket.range&&(newCursorPosition=nextBracket.range.getStartPosition())}}return newCursorPosition?new core_selection/* Selection */.Y(newCursorPosition.lineNumber,newCursorPosition.column,newCursorPosition.lineNumber,newCursorPosition.column):new core_selection/* Selection */.Y(position.lineNumber,position.column,position.lineNumber,position.column)}));this._editor.setSelections(newSelections),this._editor.revealRange(newSelections[0])}selectToBracket(selectBrackets){if(!this._editor.hasModel())return;const model=this._editor.getModel(),newSelections=[];this._editor.getSelections().forEach((selection=>{const position=selection.getStartPosition();let brackets=model.matchBracket(position);if(!brackets&&(brackets=model.findEnclosingBrackets(position),!brackets)){const nextBracket=model.findNextBracket(position);nextBracket&&nextBracket.range&&(brackets=model.matchBracket(nextBracket.range.getStartPosition()))}let selectFrom=null,selectTo=null;if(brackets){brackets.sort(core_range/* Range */.e.compareRangesUsingStarts);const[open,close]=brackets;if(selectFrom=selectBrackets?open.getStartPosition():open.getEndPosition(),selectTo=selectBrackets?close.getEndPosition():close.getStartPosition(),close.containsPosition(position)){
// select backwards if the cursor was on the closing bracket
const tmp=selectFrom;selectFrom=selectTo,selectTo=tmp}}selectFrom&&selectTo&&newSelections.push(new core_selection/* Selection */.Y(selectFrom.lineNumber,selectFrom.column,selectTo.lineNumber,selectTo.column))})),newSelections.length>0&&(this._editor.setSelections(newSelections),this._editor.revealRange(newSelections[0]))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();let newDecorations=[],newDecorationsLen=0;for(const bracketData of this._lastBracketsData){let brackets=bracketData.brackets;brackets&&(newDecorations[newDecorationsLen++]={range:brackets[0],options:bracketData.options},newDecorations[newDecorationsLen++]={range:brackets[1],options:bracketData.options})}this._decorations=this._editor.deltaDecorations(this._decorations,newDecorations)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())
// no model or no focus => no brackets!
return this._lastBracketsData=[],void(this._lastVersionId=0);const selections=this._editor.getSelections();if(selections.length>100)
// no bracket matching for high numbers of selections
return this._lastBracketsData=[],void(this._lastVersionId=0);const model=this._editor.getModel(),versionId=model.getVersionId();let previousData=[];this._lastVersionId===versionId&&(
// use the previous data only if the model is at the same version id
previousData=this._lastBracketsData);let positions=[],positionsLen=0;for(let i=0,len=selections.length;i<len;i++){let selection=selections[i];selection.isEmpty()&&(
// will bracket match a cursor only if the selection is collapsed
positions[positionsLen++]=selection.getStartPosition())}
// sort positions for `previousData` cache hits
positions.length>1&&positions.sort(core_position/* Position */.L.compare);let newData=[],newDataLen=0,previousIndex=0,previousLen=previousData.length;for(let i=0,len=positions.length;i<len;i++){let position=positions[i];while(previousIndex<previousLen&&previousData[previousIndex].position.isBefore(position))previousIndex++;if(previousIndex<previousLen&&previousData[previousIndex].position.equals(position))newData[newDataLen++]=previousData[previousIndex];else{let brackets=model.matchBracket(position),options=BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;brackets||"always"!==this._matchBrackets||(brackets=model.findEnclosingBrackets(position,20/* give at most 20ms to compute */),options=BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),newData[newDataLen++]=new BracketsData(position,brackets,options)}}this._lastBracketsData=newData,this._lastVersionId=versionId}}BracketMatchingController.ID="editor.contrib.bracketMatchingController",BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=textModel/* ModelDecorationOptions */.qx.register({description:"bracket-match-overview",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"bracket-match",overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(overviewRulerBracketMatchForeground),position:model/* OverviewRulerLane */.sh.Center}}),BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=textModel/* ModelDecorationOptions */.qx.register({description:"bracket-match-no-overview",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"bracket-match"}),(0,editorExtensions/* registerEditorContribution */._K)(BracketMatchingController.ID,BracketMatchingController),(0,editorExtensions/* registerEditorAction */.Qr)(SelectToBracketAction),(0,editorExtensions/* registerEditorAction */.Qr)(JumpToBracketAction),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const bracketMatchBackground=theme.getColor(editorColorRegistry/* editorBracketMatchBackground */.TC);bracketMatchBackground&&collector.addRule(`.monaco-editor .bracket-match { background-color: ${bracketMatchBackground}; }`);const bracketMatchBorder=theme.getColor(editorColorRegistry/* editorBracketMatchBorder */.Dl);bracketMatchBorder&&collector.addRule(`.monaco-editor .bracket-match { border: 1px solid ${bracketMatchBorder}; }`)})),
// Go to menu
common_actions/* MenuRegistry */.BH.appendMenuItem(common_actions/* MenuId */.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:nls/* localize */.N({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/moveCaretCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class MoveCaretCommand{constructor(selection,isMovingLeft){this._selection=selection,this._isMovingLeft=isMovingLeft}getEditOperations(model,builder){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const lineNumber=this._selection.startLineNumber,startColumn=this._selection.startColumn,endColumn=this._selection.endColumn;if((!this._isMovingLeft||1!==startColumn)&&(this._isMovingLeft||endColumn!==model.getLineMaxColumn(lineNumber)))if(this._isMovingLeft){const rangeBefore=new core_range/* Range */.e(lineNumber,startColumn-1,lineNumber,startColumn),charBefore=model.getValueInRange(rangeBefore);builder.addEditOperation(rangeBefore,null),builder.addEditOperation(new core_range/* Range */.e(lineNumber,endColumn,lineNumber,endColumn),charBefore)}else{const rangeAfter=new core_range/* Range */.e(lineNumber,endColumn,lineNumber,endColumn+1),charAfter=model.getValueInRange(rangeAfter);builder.addEditOperation(rangeAfter,null),builder.addEditOperation(new core_range/* Range */.e(lineNumber,startColumn,lineNumber,startColumn),charAfter)}}computeCursorState(model,helper){return this._isMovingLeft?new core_selection/* Selection */.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new core_selection/* Selection */.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/caretOperations.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class MoveCaretAction extends editorExtensions/* EditorAction */.R6{constructor(left,opts){super(opts),this.left=left}run(accessor,editor){if(!editor.hasModel())return;let commands=[],selections=editor.getSelections();for(const selection of selections)commands.push(new MoveCaretCommand(selection,this.left));editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}class MoveCaretLeftAction extends MoveCaretAction{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:nls/* localize */.N("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}class MoveCaretRightAction extends MoveCaretAction{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:nls/* localize */.N("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}(0,editorExtensions/* registerEditorAction */.Qr)(MoveCaretLeftAction),(0,editorExtensions/* registerEditorAction */.Qr)(MoveCaretRightAction);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/commands/replaceCommand.js
var replaceCommand=__webpack_require__(361329),cursorMoveOperations=__webpack_require__(388784);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/controller/cursorMoveOperations.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/transpose.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class TransposeLettersAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.transposeLetters",label:nls/* localize */.N("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:306/* KeyT */},weight:100/* EditorContrib */}})}run(accessor,editor){if(!editor.hasModel())return;let model=editor.getModel(),commands=[],selections=editor.getSelections();for(let selection of selections){if(!selection.isEmpty())continue;let lineNumber=selection.startLineNumber,column=selection.startColumn,lastColumn=model.getLineMaxColumn(lineNumber);if(1===lineNumber&&(1===column||2===column&&2===lastColumn))
// at beginning of file, nothing to do
continue;
// handle special case: when at end of line, transpose left two chars
// otherwise, transpose left and right chars
let endPosition=column===lastColumn?selection.getPosition():cursorMoveOperations/* MoveOperations */.o.rightPosition(model,selection.getPosition().lineNumber,selection.getPosition().column),middlePosition=cursorMoveOperations/* MoveOperations */.o.leftPosition(model,endPosition),beginPosition=cursorMoveOperations/* MoveOperations */.o.leftPosition(model,middlePosition),leftChar=model.getValueInRange(core_range/* Range */.e.fromPositions(beginPosition,middlePosition)),rightChar=model.getValueInRange(core_range/* Range */.e.fromPositions(middlePosition,endPosition)),replaceRange=core_range/* Range */.e.fromPositions(beginPosition,endPosition);commands.push(new replaceCommand/* ReplaceCommand */.T4(replaceRange,rightChar+leftChar))}commands.length>0&&(editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop())}}(0,editorExtensions/* registerEditorAction */.Qr)(TransposeLettersAction);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/browser.js
var browser=__webpack_require__(730747),platform=__webpack_require__(901432),textAreaInput=__webpack_require__(35715),services_codeEditorService=__webpack_require__(611640),common_clipboardService=__webpack_require__(184972),clipboard_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/platform.js
const CLIPBOARD_CONTEXT_MENU_GROUP="9_cutcopypaste",supportsCut=platform/* isNative */.tY||document.queryCommandSupported("cut"),supportsCopy=platform/* isNative */.tY||document.queryCommandSupported("copy"),supportsPaste="undefined"!==typeof navigator.clipboard&&!browser/* isFirefox */.vU||document.queryCommandSupported("paste");function registerCommand(command){return command.register(),command}const CutAction=supportsCut?registerCommand(new editorExtensions/* MultiCommand */.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:
// Do not bind cut keybindings in the browser,
// since browsers do that for us and it avoids security prompts
platform/* isNative */.tY?{primary:2102/* KeyX */,win:{primary:2102/* KeyX */,secondary:[1044/* Delete */]},weight:100/* EditorContrib */}:void 0,menuOpts:[{menuId:common_actions/* MenuId */.eH.MenubarEditMenu,group:"2_ccp",title:nls/* localize */.N({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:common_actions/* MenuId */.eH.EditorContext,group:CLIPBOARD_CONTEXT_MENU_GROUP,title:nls/* localize */.N("actions.clipboard.cutLabel","Cut"),when:editorContextKeys/* EditorContextKeys */.u.writable,order:1},{menuId:common_actions/* MenuId */.eH.CommandPalette,group:"",title:nls/* localize */.N("actions.clipboard.cutLabel","Cut"),order:1},{menuId:common_actions/* MenuId */.eH.SimpleEditorContext,group:CLIPBOARD_CONTEXT_MENU_GROUP,title:nls/* localize */.N("actions.clipboard.cutLabel","Cut"),when:editorContextKeys/* EditorContextKeys */.u.writable,order:1}]})):void 0,CopyAction=supportsCopy?registerCommand(new editorExtensions/* MultiCommand */.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:
// Do not bind copy keybindings in the browser,
// since browsers do that for us and it avoids security prompts
platform/* isNative */.tY?{primary:2081/* KeyC */,win:{primary:2081/* KeyC */,secondary:[2067/* Insert */]},weight:100/* EditorContrib */}:void 0,menuOpts:[{menuId:common_actions/* MenuId */.eH.MenubarEditMenu,group:"2_ccp",title:nls/* localize */.N({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:common_actions/* MenuId */.eH.EditorContext,group:CLIPBOARD_CONTEXT_MENU_GROUP,title:nls/* localize */.N("actions.clipboard.copyLabel","Copy"),order:2},{menuId:common_actions/* MenuId */.eH.CommandPalette,group:"",title:nls/* localize */.N("actions.clipboard.copyLabel","Copy"),order:1},{menuId:common_actions/* MenuId */.eH.SimpleEditorContext,group:CLIPBOARD_CONTEXT_MENU_GROUP,title:nls/* localize */.N("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;common_actions/* MenuRegistry */.BH.appendMenuItem(common_actions/* MenuId */.eH.MenubarEditMenu,{submenu:common_actions/* MenuId */.eH.MenubarCopy,title:{value:nls/* localize */.N("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),common_actions/* MenuRegistry */.BH.appendMenuItem(common_actions/* MenuId */.eH.EditorContext,{submenu:common_actions/* MenuId */.eH.EditorContextCopy,title:{value:nls/* localize */.N("copy as","Copy As"),original:"Copy As"},group:CLIPBOARD_CONTEXT_MENU_GROUP,order:3});const PasteAction=supportsPaste?registerCommand(new editorExtensions/* MultiCommand */.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:
// Do not bind paste keybindings in the browser,
// since browsers do that for us and it avoids security prompts
platform/* isNative */.tY?{primary:2100/* KeyV */,win:{primary:2100/* KeyV */,secondary:[1043/* Insert */]},linux:{primary:2100/* KeyV */,secondary:[1043/* Insert */]},weight:100/* EditorContrib */}:void 0,menuOpts:[{menuId:common_actions/* MenuId */.eH.MenubarEditMenu,group:"2_ccp",title:nls/* localize */.N({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:common_actions/* MenuId */.eH.EditorContext,group:CLIPBOARD_CONTEXT_MENU_GROUP,title:nls/* localize */.N("actions.clipboard.pasteLabel","Paste"),when:editorContextKeys/* EditorContextKeys */.u.writable,order:4},{menuId:common_actions/* MenuId */.eH.CommandPalette,group:"",title:nls/* localize */.N("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:common_actions/* MenuId */.eH.SimpleEditorContext,group:CLIPBOARD_CONTEXT_MENU_GROUP,title:nls/* localize */.N("actions.clipboard.pasteLabel","Paste"),when:editorContextKeys/* EditorContextKeys */.u.writable,order:4}]})):void 0;class ExecCommandCopyWithSyntaxHighlightingAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:nls/* localize */.N("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,weight:100/* EditorContrib */}})}run(accessor,editor){if(!editor.hasModel())return;const emptySelectionClipboard=editor.getOption(32/* emptySelectionClipboard */);!emptySelectionClipboard&&editor.getSelection().isEmpty()||(textAreaInput/* CopyOptions */.RA.forceCopyWithSyntaxHighlighting=!0,editor.focus(),document.execCommand("copy"),textAreaInput/* CopyOptions */.RA.forceCopyWithSyntaxHighlighting=!1)}}function registerExecCommandImpl(target,browserCommand){target&&(
// 1. handle case when focus is in editor.
target.addImplementation(1e4,"code-editor",((accessor,args)=>{
// Only if editor text focus (i.e. not if editor has widget focus).
const focusedEditor=accessor.get(services_codeEditorService/* ICodeEditorService */.$).getFocusedCodeEditor();if(focusedEditor&&focusedEditor.hasTextFocus()){
// Do not execute if there is no selection and empty selection clipboard is off
const emptySelectionClipboard=focusedEditor.getOption(32/* emptySelectionClipboard */),selection=focusedEditor.getSelection();return selection&&selection.isEmpty()&&!emptySelectionClipboard||document.execCommand(browserCommand),!0}return!1})),
// 2. (default) handle case when focus is somewhere else.
target.addImplementation(0,"generic-dom",((accessor,args)=>(document.execCommand(browserCommand),!0))))}registerExecCommandImpl(CutAction,"cut"),registerExecCommandImpl(CopyAction,"copy"),PasteAction&&(
// 1. Paste: handle case when focus is in editor.
PasteAction.addImplementation(1e4,"code-editor",((accessor,args)=>{const codeEditorService=accessor.get(services_codeEditorService/* ICodeEditorService */.$),clipboardService=accessor.get(common_clipboardService/* IClipboardService */.p),focusedEditor=codeEditorService.getFocusedCodeEditor();if(focusedEditor&&focusedEditor.hasTextFocus()){const result=document.execCommand("paste");
// Use the clipboard service if document.execCommand('paste') was not successful
return!(!result&&platform/* isWeb */.$L)||(()=>clipboard_awaiter(void 0,void 0,void 0,(function*(){const clipboardText=yield clipboardService.readText();if(""!==clipboardText){const metadata=textAreaInput/* InMemoryClipboardMetadataManager */.Nl.INSTANCE.get(clipboardText);let pasteOnNewLine=!1,multicursorText=null,mode=null;metadata&&(pasteOnNewLine=focusedEditor.getOption(32/* emptySelectionClipboard */)&&!!metadata.isFromEmptySelection,multicursorText="undefined"!==typeof metadata.multicursorText?metadata.multicursorText:null,mode=metadata.mode),focusedEditor.trigger("keyboard","paste"/* Paste */,{text:clipboardText,pasteOnNewLine:pasteOnNewLine,multicursorText:multicursorText,mode:mode})}})))()}return!1})),
// 2. Paste: (default) handle case when focus is somewhere else.
PasteAction.addImplementation(0,"generic-dom",((accessor,args)=>(document.execCommand("paste"),!0)))),supportsCopy&&(0,editorExtensions/* registerEditorAction */.Qr)(ExecCommandCopyWithSyntaxHighlightingAction);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/cancellation.js
var cancellation=__webpack_require__(471050),lazy=__webpack_require__(879579),strings=__webpack_require__(697295),services_bulkEditService=__webpack_require__(966007),arrays=__webpack_require__(609488),errors=__webpack_require__(817301),common_uri=__webpack_require__(70666),editorState=__webpack_require__(355812),modes=__webpack_require__(860303),services_modelService=__webpack_require__(151200),commands=__webpack_require__(820942),progress=__webpack_require__(190535);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/lazy.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/types.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class CodeActionKind{constructor(value){this.value=value}equals(other){return this.value===other.value}contains(other){return this.equals(other)||""===this.value||other.value.startsWith(this.value+CodeActionKind.sep)}intersects(other){return this.contains(other)||other.contains(this)}append(part){return new CodeActionKind(this.value+CodeActionKind.sep+part)}}function mayIncludeActionsOfKind(filter,providedKind){
// A provided kind may be a subset or superset of our filtered kind.
return!(filter.include&&!filter.include.intersects(providedKind))&&((!filter.excludes||!filter.excludes.some((exclude=>excludesAction(providedKind,exclude,filter.include))))&&!(!filter.includeSourceActions&&CodeActionKind.Source.contains(providedKind)))}function filtersAction(filter,action){const actionKind=action.kind?new CodeActionKind(action.kind):void 0;
// Filter out actions by kind
return!!(!filter.include||actionKind&&filter.include.contains(actionKind))&&(!(filter.excludes&&actionKind&&filter.excludes.some((exclude=>excludesAction(actionKind,exclude,filter.include))))&&(
// Don't return source actions unless they are explicitly requested
!(!filter.includeSourceActions&&actionKind&&CodeActionKind.Source.contains(actionKind))&&!(filter.onlyIncludePreferredActions&&!action.isPreferred)))}function excludesAction(providedKind,exclude,include){return!!exclude.contains(providedKind)&&(!include||!exclude.contains(include))}CodeActionKind.sep=".",CodeActionKind.None=new CodeActionKind("@@none@@"),// Special code action that contains nothing
CodeActionKind.Empty=new CodeActionKind(""),CodeActionKind.QuickFix=new CodeActionKind("quickfix"),CodeActionKind.Refactor=new CodeActionKind("refactor"),CodeActionKind.Source=new CodeActionKind("source"),CodeActionKind.SourceOrganizeImports=CodeActionKind.Source.append("organizeImports"),CodeActionKind.SourceFixAll=CodeActionKind.Source.append("fixAll");class CodeActionCommandArgs{constructor(kind,apply,preferred){this.kind=kind,this.apply=apply,this.preferred=preferred}static fromUser(arg,defaults){return arg&&"object"===typeof arg?new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg,defaults.kind),CodeActionCommandArgs.getApplyFromUser(arg,defaults.apply),CodeActionCommandArgs.getPreferredUser(arg)):new CodeActionCommandArgs(defaults.kind,defaults.apply,!1)}static getApplyFromUser(arg,defaultAutoApply){switch("string"===typeof arg.apply?arg.apply.toLowerCase():""){case"first":return"first"/* First */;case"never":return"never"/* Never */;case"ifsingle":return"ifSingle"/* IfSingle */;default:return defaultAutoApply}}static getKindFromUser(arg,defaultKind){return"string"===typeof arg.kind?new CodeActionKind(arg.kind):defaultKind}static getPreferredUser(arg){return"boolean"===typeof arg.preferred&&arg.preferred}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeAction.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var codeAction_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const codeActionCommandId="editor.action.codeAction",refactorCommandId="editor.action.refactor",sourceActionCommandId="editor.action.sourceAction",organizeImportsCommandId="editor.action.organizeImports",fixAllCommandId="editor.action.fixAll";class CodeActionItem{constructor(action,provider){this.action=action,this.provider=provider}resolve(token){var _a;return codeAction_awaiter(this,void 0,void 0,(function*(){if((null===(_a=this.provider)||void 0===_a?void 0:_a.resolveCodeAction)&&!this.action.edit){let action;try{action=yield this.provider.resolveCodeAction(this.action,token)}catch(err){(0,errors/* onUnexpectedExternalError */.Cp)(err)}action&&(this.action.edit=action.edit)}return this}))}}class ManagedCodeActionSet extends lifecycle/* Disposable */.JT{constructor(actions,documentation,disposables){super(),this.documentation=documentation,this._register(disposables),this.allActions=[...actions].sort(ManagedCodeActionSet.codeActionsComparator),this.validActions=this.allActions.filter((({action:action})=>!action.disabled))}static codeActionsComparator({action:a},{action:b}){return a.isPreferred&&!b.isPreferred?-1:!a.isPreferred&&b.isPreferred?1:(0,arrays/* isNonEmptyArray */.Of)(a.diagnostics)?(0,arrays/* isNonEmptyArray */.Of)(b.diagnostics)?a.diagnostics[0].message.localeCompare(b.diagnostics[0].message):-1:(0,arrays/* isNonEmptyArray */.Of)(b.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some((({action:fix})=>!!fix.kind&&CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind))&&!!fix.isPreferred))}}const emptyCodeActionsResponse={actions:[],documentation:void 0};function getCodeActions(model,rangeOrSelection,trigger,progress,token){var _a;const filter=trigger.filter||{},codeActionContext={only:null===(_a=filter.include)||void 0===_a?void 0:_a.value,trigger:trigger.type},cts=new editorState/* TextModelCancellationTokenSource */.YQ(model,token),providers=getCodeActionProviders(model,filter),disposables=new lifecycle/* DisposableStore */.SL,promises=providers.map((provider=>codeAction_awaiter(this,void 0,void 0,(function*(){try{progress.report(provider);const providedCodeActions=yield provider.provideCodeActions(model,rangeOrSelection,codeActionContext,cts.token);if(providedCodeActions&&disposables.add(providedCodeActions),cts.token.isCancellationRequested)return emptyCodeActionsResponse;const filteredActions=((null===providedCodeActions||void 0===providedCodeActions?void 0:providedCodeActions.actions)||[]).filter((action=>action&&filtersAction(filter,action))),documentation=getDocumentation(provider,filteredActions,filter.include);return{actions:filteredActions.map((action=>new CodeActionItem(action,provider))),documentation:documentation}}catch(err){if((0,errors/* isPromiseCanceledError */.VV)(err))throw err;return(0,errors/* onUnexpectedExternalError */.Cp)(err),emptyCodeActionsResponse}})))),listener=modes/* CodeActionProviderRegistry */.H9.onDidChange((()=>{const newProviders=modes/* CodeActionProviderRegistry */.H9.all(model);(0,arrays/* equals */.fS)(newProviders,providers)||cts.cancel()}));return Promise.all(promises).then((actions=>{const allActions=(0,arrays/* flatten */.xH)(actions.map((x=>x.actions))),allDocumentation=(0,arrays/* coalesce */.kX)(actions.map((x=>x.documentation)));return new ManagedCodeActionSet(allActions,allDocumentation,disposables)})).finally((()=>{listener.dispose(),cts.dispose()}))}function getCodeActionProviders(model,filter){return modes/* CodeActionProviderRegistry */.H9.all(model).filter((provider=>!provider.providedCodeActionKinds||provider.providedCodeActionKinds.some((kind=>mayIncludeActionsOfKind(filter,new CodeActionKind(kind))))))}function getDocumentation(provider,providedCodeActions,only){if(!provider.documentation)return;const documentation=provider.documentation.map((entry=>({kind:new CodeActionKind(entry.kind),command:entry.command})));if(only){let currentBest;for(const entry of documentation)entry.kind.contains(only)&&(currentBest?
// Take best match
currentBest.kind.contains(entry.kind)&&(currentBest=entry):currentBest=entry);if(currentBest)return null===currentBest||void 0===currentBest?void 0:currentBest.command}
// Otherwise, check to see if any of the provided actions match.
for(const action of providedCodeActions)if(action.kind)for(const entry of documentation)if(entry.kind.contains(new CodeActionKind(action.kind)))return entry.command}commands/* CommandsRegistry */.P.registerCommand("_executeCodeActionProvider",(function(accessor,resource,rangeOrSelection,kind,itemResolveCount){return codeAction_awaiter(this,void 0,void 0,(function*(){if(!(resource instanceof common_uri/* URI */.o))throw(0,errors/* illegalArgument */.b1)();const model=accessor.get(services_modelService/* IModelService */.q).getModel(resource);if(!model)throw(0,errors/* illegalArgument */.b1)();const validatedRangeOrSelection=core_selection/* Selection */.Y.isISelection(rangeOrSelection)?core_selection/* Selection */.Y.liftSelection(rangeOrSelection):core_range/* Range */.e.isIRange(rangeOrSelection)?model.validateRange(rangeOrSelection):void 0;if(!validatedRangeOrSelection)throw(0,errors/* illegalArgument */.b1)();const include="string"===typeof kind?new CodeActionKind(kind):void 0,codeActionSet=yield getCodeActions(model,validatedRangeOrSelection,{type:1/* Invoke */,filter:{includeSourceActions:!0,include:include}},progress/* Progress */.E.None,cancellation/* CancellationToken */.T.None),resolving=[],resolveCount=Math.min(codeActionSet.validActions.length,"number"===typeof itemResolveCount?itemResolveCount:0);for(let i=0;i<resolveCount;i++)resolving.push(codeActionSet.validActions[i].resolve(cancellation/* CancellationToken */.T.None));try{return yield Promise.all(resolving),codeActionSet.validActions.map((item=>item.action))}finally{setTimeout((()=>codeActionSet.dispose()),100)}}))}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/theme/common/theme.js
var common_theme=__webpack_require__(792321),messageController_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},messageController_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let MessageController=class MessageController{constructor(editor,contextKeyService){this._messageWidget=new lifecycle/* MutableDisposable */.XK,this._messageListeners=new lifecycle/* DisposableStore */.SL,this._editor=editor,this._visible=MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService),this._editorListener=this._editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit()))}static get(editor){return editor.getContribution(MessageController.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(message,position){
// close on mouse move
let bounds;(0,aria/* alert */.Z9)(message),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new MessageWidget(this._editor,position,message),
// close on blur, cursor, model change, dispose
this._messageListeners.add(this._editor.onDidBlurEditorText((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),
// 3sec
this._messageListeners.add(new common_async/* TimeoutTimer */._F((()=>this.closeMessage()),3e3)),this._messageListeners.add(this._editor.onMouseMove((e=>{
// outside the text area
e.target.position&&(bounds?bounds.containsPosition(e.target.position)||
// check if position is still in bounds
this.closeMessage():
// define bounding box around position and first mouse occurance
bounds=new core_range/* Range */.e(position.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(nls/* localize */.N("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};MessageController.ID="editor.contrib.messageController",MessageController.MESSAGE_VISIBLE=new contextkey/* RawContextKey */.uy("messageVisible",!1,nls/* localize */.N("messageVisible","Whether the editor is currently showing an inline message")),MessageController=messageController_decorate([messageController_param(1,contextkey/* IContextKeyService */.i6)],MessageController);const MessageCommand=editorExtensions/* EditorCommand */._l.bindToContribution(MessageController.get);(0,editorExtensions/* registerEditorCommand */.fK)(new MessageCommand({id:"leaveEditorMessage",precondition:MessageController.MESSAGE_VISIBLE,handler:c=>c.closeMessage(),kbOpts:{weight:130,primary:9/* Escape */}}));class MessageWidget{constructor(editor,{lineNumber:lineNumber,column:column},text){
// Editor.IContentWidget.allowEditorOverflow
this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=editor,this._editor.revealLinesInCenterIfOutsideViewport(lineNumber,lineNumber,0/* Smooth */),this._position={lineNumber:lineNumber,column:column-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const anchorTop=document.createElement("div");anchorTop.classList.add("anchor","top"),this._domNode.appendChild(anchorTop);const message=document.createElement("div");message.classList.add("message"),message.textContent=text,this._domNode.appendChild(message);const anchorBottom=document.createElement("div");anchorBottom.classList.add("anchor","below"),this._domNode.appendChild(anchorBottom),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(messageWidget){let handle;const dispose=()=>{messageWidget.dispose(),clearTimeout(handle),messageWidget.getDomNode().removeEventListener("animationend",dispose)};return handle=setTimeout(dispose,110),messageWidget.getDomNode().addEventListener("animationend",dispose),messageWidget.getDomNode().classList.add("fadeOut"),{dispose:dispose}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1/* ABOVE */,2/* BELOW */]}}afterRender(position){this._domNode.classList.toggle("below",2/* BELOW */===position)}}(0,editorExtensions/* registerEditorContribution */._K)(MessageController.ID,MessageController),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const border=theme.getColor(colorRegistry/* inputValidationInfoBorder */.EP);if(border){let borderWidth=theme.type===common_theme/* ColorScheme */.e.HIGH_CONTRAST?2:1;collector.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${border}; }`),collector.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${border}; }`),collector.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${borderWidth}px solid ${border}; }`)}const background=theme.getColor(colorRegistry/* inputValidationInfoBackground */._l);background&&collector.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${background}; }`);const foreground=theme.getColor(colorRegistry/* inputValidationInfoForeground */.YI);foreground&&collector.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${foreground}; }`)}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js
var instantiation=__webpack_require__(472065),dom=__webpack_require__(965321),base_common_actions=__webpack_require__(74741),contextView=__webpack_require__(705606),keybinding=__webpack_require__(891847),codeActionMenu_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},codeActionMenu_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},codeActionMenu_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/dom.js
class CodeActionAction extends base_common_actions/* Action */.aU{constructor(action,callback){super(action.command?action.command.id:action.title,stripNewlines(action.title),void 0,!action.disabled,callback),this.action=action}}function stripNewlines(str){return str.replace(/\r\n|\r|\n/g," ")}let CodeActionMenu=class extends lifecycle/* Disposable */.JT{constructor(_editor,_delegate,_contextMenuService,keybindingService){super(),this._editor=_editor,this._delegate=_delegate,this._contextMenuService=_contextMenuService,this._visible=!1,this._showingActions=this._register(new lifecycle/* MutableDisposable */.XK),this._keybindingResolver=new CodeActionKeybindingResolver({getKeybindings:()=>keybindingService.getKeybindings()})}get isVisible(){return this._visible}show(trigger,codeActions,at,options){return codeActionMenu_awaiter(this,void 0,void 0,(function*(){const actionsToShow=options.includeDisabledActions?codeActions.allActions:codeActions.validActions;if(!actionsToShow.length)return void(this._visible=!1);if(!this._editor.getDomNode())
// cancel when editor went off-dom
throw this._visible=!1,(0,errors/* canceled */.F0)();this._visible=!0,this._showingActions.value=codeActions;const menuActions=this.getMenuActions(trigger,actionsToShow,codeActions.documentation),anchor=core_position/* Position */.L.isIPosition(at)?this._toCoords(at):at||{x:0,y:0},resolver=this._keybindingResolver.getResolver(),useShadowDOM=this._editor.getOption(113/* useShadowDOM */);this._contextMenuService.showContextMenu({domForShadowRoot:useShadowDOM?this._editor.getDomNode():void 0,getAnchor:()=>anchor,getActions:()=>menuActions,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:action=>action instanceof CodeActionAction?resolver(action.action):void 0})}))}getMenuActions(trigger,actionsToShow,documentation){var _a,_b;const toCodeActionAction=item=>new CodeActionAction(item.action,(()=>this._delegate.onSelectCodeAction(item))),result=actionsToShow.map(toCodeActionAction),allDocumentation=[...documentation],model=this._editor.getModel();if(model&&result.length)for(const provider of modes/* CodeActionProviderRegistry */.H9.all(model))provider._getAdditionalMenuItems&&allDocumentation.push(...provider._getAdditionalMenuItems({trigger:trigger.type,only:null===(_b=null===(_a=trigger.filter)||void 0===_a?void 0:_a.include)||void 0===_b?void 0:_b.value},actionsToShow.map((item=>item.action))));return allDocumentation.length&&result.push(new base_common_actions/* Separator */.Z0,...allDocumentation.map((command=>toCodeActionAction(new CodeActionItem({title:command.title,command:command},void 0))))),result}_toCoords(position){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(position,1/* Immediate */),this._editor.render();
// Translate to absolute editor position
const cursorCoords=this._editor.getScrolledVisiblePosition(position),editorCoords=(0,dom/* getDomNodePagePosition */.i)(this._editor.getDomNode()),x=editorCoords.left+cursorCoords.left,y=editorCoords.top+cursorCoords.top+cursorCoords.height;return{x:x,y:y}}};CodeActionMenu=codeActionMenu_decorate([codeActionMenu_param(2,contextView/* IContextMenuService */.i),codeActionMenu_param(3,keybinding/* IKeybindingService */.d)],CodeActionMenu);class CodeActionKeybindingResolver{constructor(_keybindingProvider){this._keybindingProvider=_keybindingProvider}getResolver(){
// Lazy since we may not actually ever read the value
const allCodeActionBindings=new lazy/* Lazy */.o((()=>this._keybindingProvider.getKeybindings().filter((item=>CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command)>=0)).filter((item=>item.resolvedKeybinding)).map((item=>{
// Special case these commands since they come built-in with VS Code and don't use 'commandArgs'
let commandArgs=item.commandArgs;return item.command===organizeImportsCommandId?commandArgs={kind:CodeActionKind.SourceOrganizeImports.value}:item.command===fixAllCommandId&&(commandArgs={kind:CodeActionKind.SourceFixAll.value}),Object.assign({resolvedKeybinding:item.resolvedKeybinding},CodeActionCommandArgs.fromUser(commandArgs,{kind:CodeActionKind.None,apply:"never"/* Never */}))}))));return action=>{if(action.kind){const binding=this.bestKeybindingForCodeAction(action,allCodeActionBindings.getValue());return null===binding||void 0===binding?void 0:binding.resolvedKeybinding}}}bestKeybindingForCodeAction(action,candidates){if(!action.kind)return;const kind=new CodeActionKind(action.kind);return candidates.filter((candidate=>candidate.kind.contains(kind))).filter((candidate=>!candidate.preferred||action.isPreferred)).reduceRight(((currentBest,candidate)=>currentBest?currentBest.kind.contains(candidate.kind)?candidate:currentBest:candidate),void 0)}}CodeActionKeybindingResolver.codeActionCommands=[refactorCommandId,codeActionCommandId,sourceActionCommandId,organizeImportsCommandId,fixAllCommandId];
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/globalMouseMoveMonitor.js
var LightBulbState,globalMouseMoveMonitor=__webpack_require__(457974),touch=__webpack_require__(10553),codicons=__webpack_require__(773046),common_event=__webpack_require__(104669),lightBulbWidget_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},lightBulbWidget_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/touch.js
(function(LightBulbState){LightBulbState.Hidden={type:0/* Hidden */};class Showing{constructor(actions,trigger,editorPosition,widgetPosition){this.actions=actions,this.trigger=trigger,this.editorPosition=editorPosition,this.widgetPosition=widgetPosition,this.type=1/* Showing */}}LightBulbState.Showing=Showing})(LightBulbState||(LightBulbState={}));let LightBulbWidget=class LightBulbWidget extends lifecycle/* Disposable */.JT{constructor(_editor,_quickFixActionId,_preferredFixActionId,_keybindingService){super(),this._editor=_editor,this._quickFixActionId=_quickFixActionId,this._preferredFixActionId=_preferredFixActionId,this._keybindingService=_keybindingService,this._onClick=this._register(new common_event/* Emitter */.Q5),this.onClick=this._onClick.event,this._state=LightBulbState.Hidden,this._domNode=document.createElement("div"),this._domNode.className=codicons/* Codicon */.lA.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((_=>{
// cancel when the line in question has been removed
const editorModel=this._editor.getModel();(1/* Showing */!==this.state.type||!editorModel||this.state.editorPosition.lineNumber>=editorModel.getLineCount())&&this.hide()}))),touch/* Gesture */.o.ignoreTarget(this._domNode),this._register(dom/* addStandardDisposableGenericMouseDownListner */.Gw(this._domNode,(e=>{if(1/* Showing */!==this.state.type)return;
// Make sure that focus / cursor location is not lost when clicking widget icon
this._editor.focus(),e.preventDefault();
// a bit of extra work to make sure the menu
// doesn't cover the line-text
const{top:top,height:height}=dom/* getDomNodePagePosition */.i(this._domNode),lineHeight=this._editor.getOption(58/* lineHeight */);let pad=Math.floor(lineHeight/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(pad+=lineHeight),this._onClick.fire({x:e.posx,y:top+height+pad,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(dom/* addDisposableListener */.nm(this._domNode,"mouseenter",(e=>{if(1!==(1&e.buttons))return;
// mouse enters lightbulb while the primary/left button
// is being pressed -> hide the lightbulb and block future
// showings until mouse is released
this.hide();const monitor=new globalMouseMoveMonitor/* GlobalMouseMoveMonitor */.Z;monitor.startMonitoring(e.target,e.buttons,globalMouseMoveMonitor/* standardMouseMoveMerger */.e,(()=>{}),(()=>{monitor.dispose()}))}))),this._register(this._editor.onDidChangeConfiguration((e=>{
// hide when told to do so
e.hasChanged(56/* lightbulb */)&&!this._editor.getOption(56/* lightbulb */).enabled&&this.hide()}))),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1/* Showing */===this._state.type?this._state.widgetPosition:null}update(actions,trigger,atPosition){if(actions.validActions.length<=0)return this.hide();const options=this._editor.getOptions();if(!options.get(56/* lightbulb */).enabled)return this.hide();const model=this._editor.getModel();if(!model)return this.hide();const{lineNumber:lineNumber,column:column}=model.validatePosition(atPosition),tabSize=model.getOptions().tabSize,fontInfo=options.get(43/* fontInfo */),lineContent=model.getLineContent(lineNumber),indent=textModel/* TextModel */.yO.computeIndentLevel(lineContent,tabSize),lineHasSpace=fontInfo.spaceWidth*indent>22,isFolded=lineNumber=>lineNumber>2&&this._editor.getTopForLineNumber(lineNumber)===this._editor.getTopForLineNumber(lineNumber-1);let effectiveLineNumber=lineNumber;if(!lineHasSpace)if(lineNumber>1&&!isFolded(lineNumber-1))effectiveLineNumber-=1;else if(isFolded(lineNumber+1)){if(column*fontInfo.spaceWidth<22)
// cannot show lightbulb above/below and showing
// it inline would overlay the cursor...
return this.hide()}else effectiveLineNumber+=1;this.state=new LightBulbState.Showing(actions,trigger,atPosition,{position:{lineNumber:effectiveLineNumber,column:1},preference:LightBulbWidget._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=LightBulbState.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(value){this._state=value,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(1/* Showing */===this.state.type&&this.state.actions.hasAutoFix){
// update icon
this._domNode.classList.remove(...codicons/* Codicon */.lA.lightBulb.classNamesArray),this._domNode.classList.add(...codicons/* Codicon */.lA.lightbulbAutofix.classNamesArray);const preferredKb=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(preferredKb)return void(this.title=nls/* localize */.N("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",preferredKb.getLabel()))}
// update icon
this._domNode.classList.remove(...codicons/* Codicon */.lA.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...codicons/* Codicon */.lA.lightBulb.classNamesArray);const kb=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=kb?nls/* localize */.N("codeActionWithKb","Show Code Actions ({0})",kb.getLabel()):nls/* localize */.N("codeAction","Show Code Actions")}set title(value){this._domNode.title=value}};LightBulbWidget._posPref=[0/* EXACT */],LightBulbWidget=lightBulbWidget_decorate([lightBulbWidget_param(3,keybinding/* IKeybindingService */.d)],LightBulbWidget),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{var _a;const editorBackgroundColor=null===(_a=theme.getColor(colorRegistry/* editorBackground */.cv))||void 0===_a?void 0:_a.transparent(.7),editorLightBulbForegroundColor=theme.getColor(colorRegistry/* editorLightBulbForeground */.Fu);
// Lightbulb Icon
editorLightBulbForegroundColor&&collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${codicons/* Codicon */.lA.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);
// Lightbulb Auto Fix Icon
const editorLightBulbAutoFixForegroundColor=theme.getColor(colorRegistry/* editorLightBulbAutoFixForeground */.sK);editorLightBulbAutoFixForegroundColor&&collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${codicons/* Codicon */.lA.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionUi.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var _CodeActionUi_disposed,codeActionUi_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},codeActionUi_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},codeActionUi_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__classPrivateFieldSet=function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};let CodeActionUi=class extends lifecycle/* Disposable */.JT{constructor(_editor,quickFixActionId,preferredFixActionId,delegate,instantiationService){super(),this._editor=_editor,this.delegate=delegate,this._activeCodeActions=this._register(new lifecycle/* MutableDisposable */.XK),_CodeActionUi_disposed.set(this,!1),this._codeActionWidget=new lazy/* Lazy */.o((()=>this._register(instantiationService.createInstance(CodeActionMenu,this._editor,{onSelectCodeAction:action=>codeActionUi_awaiter(this,void 0,void 0,(function*(){this.delegate.applyCodeAction(action,/* retrigger */!0)}))})))),this._lightBulbWidget=new lazy/* Lazy */.o((()=>{const widget=this._register(instantiationService.createInstance(LightBulbWidget,this._editor,quickFixActionId,preferredFixActionId));return this._register(widget.onClick((e=>this.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1})))),widget}))}dispose(){__classPrivateFieldSet(this,_CodeActionUi_disposed,!0,"f"),super.dispose()}update(newState){var _a,_b,_c;return codeActionUi_awaiter(this,void 0,void 0,(function*(){if(1/* Triggered */!==newState.type)return void(null===(_a=this._lightBulbWidget.rawValue)||void 0===_a||_a.hide());let actions;try{actions=yield newState.actions}catch(e){return void(0,errors/* onUnexpectedError */.dL)(e)}if(!__classPrivateFieldGet(this,_CodeActionUi_disposed,"f"))if(this._lightBulbWidget.getValue().update(actions,newState.trigger,newState.position),1/* Invoke */===newState.trigger.type){if(null===(_b=newState.trigger.filter)||void 0===_b?void 0:_b.include){// Triggered for specific scope
// Check to see if we want to auto apply.
const validActionToApply=this.tryGetValidActionToApply(newState.trigger,actions);if(validActionToApply){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(validActionToApply,!1)}finally{actions.dispose()}return}
// Check to see if there is an action that we would have applied were it not invalid
if(newState.trigger.context){const invalidAction=this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger,actions);if(invalidAction&&invalidAction.action.disabled)return MessageController.get(this._editor).showMessage(invalidAction.action.disabled,newState.trigger.context.position),void actions.dispose()}}const includeDisabledActions=!!(null===(_c=newState.trigger.filter)||void 0===_c?void 0:_c.include);if(newState.trigger.context&&(!actions.allActions.length||!includeDisabledActions&&!actions.validActions.length))return MessageController.get(this._editor).showMessage(newState.trigger.context.notAvailableMessage,newState.trigger.context.position),this._activeCodeActions.value=actions,void actions.dispose();this._activeCodeActions.value=actions,this._codeActionWidget.getValue().show(newState.trigger,actions,newState.position,{includeDisabledActions:includeDisabledActions})}else
// auto magically triggered
this._codeActionWidget.getValue().isVisible?
// TODO: Figure out if we should update the showing menu?
actions.dispose():this._activeCodeActions.value=actions}))}getInvalidActionThatWouldHaveBeenApplied(trigger,actions){if(actions.allActions.length)return"first"/* First */===trigger.autoApply&&0===actions.validActions.length||"ifSingle"/* IfSingle */===trigger.autoApply&&1===actions.allActions.length?actions.allActions.find((({action:action})=>action.disabled)):void 0}tryGetValidActionToApply(trigger,actions){if(actions.validActions.length)return"first"/* First */===trigger.autoApply&&actions.validActions.length>0||"ifSingle"/* IfSingle */===trigger.autoApply&&1===actions.validActions.length?actions.validActions[0]:void 0}showCodeActionList(trigger,actions,at,options){return codeActionUi_awaiter(this,void 0,void 0,(function*(){this._codeActionWidget.getValue().show(trigger,actions,at,options)}))}};_CodeActionUi_disposed=new WeakMap,CodeActionUi=codeActionUi_decorate([codeActionUi_param(4,instantiation/* IInstantiationService */.TG)],CodeActionUi);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/markers/common/markers.js
var _CodeActionModel_isDisposed,markers=__webpack_require__(998674),notification=__webpack_require__(759422),telemetry=__webpack_require__(10829),common_resources=__webpack_require__(195935),codeActionModel_classPrivateFieldGet=function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)},codeActionModel_classPrivateFieldSet=function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/notification/common/notification.js
const SUPPORTED_CODE_ACTIONS=new contextkey/* RawContextKey */.uy("supportedCodeAction","");class CodeActionOracle extends lifecycle/* Disposable */.JT{constructor(_editor,_markerService,_signalChange,_delay=250){super(),this._editor=_editor,this._markerService=_markerService,this._signalChange=_signalChange,this._delay=_delay,this._autoTriggerTimer=this._register(new common_async/* TimeoutTimer */._F),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._onCursorChange())))}trigger(trigger){const selection=this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);return this._createEventAndSignalChange(trigger,selection)}_onMarkerChanges(resources){const model=this._editor.getModel();model&&resources.some((resource=>(0,common_resources/* isEqual */.Xy)(resource,model.uri)))&&this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2/* Auto */})}),this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2/* Auto */})}),this._delay)}_getRangeOfMarker(selection){const model=this._editor.getModel();if(model)for(const marker of this._markerService.read({resource:model.uri})){const markerRange=model.validateRange(marker);if(core_range/* Range */.e.intersectRanges(markerRange,selection))return core_range/* Range */.e.lift(markerRange)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(trigger){if(!this._editor.hasModel())return;const model=this._editor.getModel(),selection=this._editor.getSelection();if(selection.isEmpty()&&2/* Auto */===trigger.type){const{lineNumber:lineNumber,column:column}=selection.getPosition(),line=model.getLineContent(lineNumber);if(0===line.length)
// empty line
return;if(1===column){
// look only right
if(/\s/.test(line[0]))return}else if(column===model.getLineMaxColumn(lineNumber)){
// look only left
if(/\s/.test(line[line.length-1]))return}else
// look left and right
if(/\s/.test(line[column-2])&&/\s/.test(line[column-1]))return}return selection}_createEventAndSignalChange(trigger,selection){const model=this._editor.getModel();if(!selection||!model)
// cancel
return void this._signalChange(void 0);const markerRange=this._getRangeOfMarker(selection),position=markerRange?markerRange.getStartPosition():selection.getStartPosition(),e={trigger:trigger,selection:selection,position:position};return this._signalChange(e),e}}var CodeActionsState;(function(CodeActionsState){CodeActionsState.Empty={type:0/* Empty */};class Triggered{constructor(trigger,rangeOrSelection,position,_cancellablePromise){this.trigger=trigger,this.rangeOrSelection=rangeOrSelection,this.position=position,this._cancellablePromise=_cancellablePromise,this.type=1/* Triggered */,this.actions=_cancellablePromise.catch((e=>{if((0,errors/* isPromiseCanceledError */.VV)(e))return emptyCodeActionSet;throw e}))}cancel(){this._cancellablePromise.cancel()}}CodeActionsState.Triggered=Triggered})(CodeActionsState||(CodeActionsState={}));const emptyCodeActionSet={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class CodeActionModel extends lifecycle/* Disposable */.JT{constructor(_editor,_markerService,contextKeyService,_progressService){super(),this._editor=_editor,this._markerService=_markerService,this._progressService=_progressService,this._codeActionOracle=this._register(new lifecycle/* MutableDisposable */.XK),this._state=CodeActionsState.Empty,this._onDidChangeState=this._register(new common_event/* Emitter */.Q5),this.onDidChangeState=this._onDidChangeState.event,_CodeActionModel_isDisposed.set(this,!1),this._supportedCodeActions=SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(modes/* CodeActionProviderRegistry */.H9.onDidChange((()=>this._update()))),this._update()}dispose(){codeActionModel_classPrivateFieldGet(this,_CodeActionModel_isDisposed,"f")||(codeActionModel_classPrivateFieldSet(this,_CodeActionModel_isDisposed,!0,"f"),super.dispose(),this.setState(CodeActionsState.Empty,!0))}_update(){if(codeActionModel_classPrivateFieldGet(this,_CodeActionModel_isDisposed,"f"))return;this._codeActionOracle.value=void 0,this.setState(CodeActionsState.Empty);const model=this._editor.getModel();if(model&&modes/* CodeActionProviderRegistry */.H9.has(model)&&!this._editor.getOption(80/* readOnly */)){const supportedActions=[];for(const provider of modes/* CodeActionProviderRegistry */.H9.all(model))Array.isArray(provider.providedCodeActionKinds)&&supportedActions.push(...provider.providedCodeActionKinds);this._supportedCodeActions.set(supportedActions.join(" ")),this._codeActionOracle.value=new CodeActionOracle(this._editor,this._markerService,(trigger=>{var _a;if(!trigger)return void this.setState(CodeActionsState.Empty);const actions=(0,common_async/* createCancelablePromise */.PG)((token=>getCodeActions(model,trigger.selection,trigger.trigger,progress/* Progress */.E.None,token)));1/* Invoke */===trigger.trigger.type&&(null===(_a=this._progressService)||void 0===_a||_a.showWhile(actions,250)),this.setState(new CodeActionsState.Triggered(trigger.trigger,trigger.selection,trigger.position,actions))}),void 0),this._codeActionOracle.value.trigger({type:2/* Auto */})}else this._supportedCodeActions.reset()}trigger(trigger){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(trigger)}setState(newState,skipNotify){newState!==this._state&&(
// Cancel old request
1/* Triggered */===this._state.type&&this._state.cancel(),this._state=newState,skipNotify||codeActionModel_classPrivateFieldGet(this,_CodeActionModel_isDisposed,"f")||this._onDidChangeState.fire(newState))}}_CodeActionModel_isDisposed=new WeakMap;// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionCommands.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var codeActionCommands_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},codeActionCommands_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},codeActionCommands_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function contextKeyForSupportedActions(kind){return contextkey/* ContextKeyExpr */.Ao.regex(SUPPORTED_CODE_ACTIONS.keys()[0],new RegExp("(\\s|^)"+(0,strings/* escapeRegExpCharacters */.ec)(kind.value)+"\\b"))}const argsSchema={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:nls/* localize */.N("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:nls/* localize */.N("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle"/* IfSingle */,enum:["first"/* First */,"ifSingle"/* IfSingle */,"never"/* Never */],enumDescriptions:[nls/* localize */.N("args.schema.apply.first","Always apply the first returned code action."),nls/* localize */.N("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),nls/* localize */.N("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:nls/* localize */.N("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let QuickFixController=class QuickFixController extends lifecycle/* Disposable */.JT{constructor(editor,markerService,contextKeyService,progressService,_instantiationService){super(),this._instantiationService=_instantiationService,this._editor=editor,this._model=this._register(new CodeActionModel(this._editor,markerService,contextKeyService,progressService)),this._register(this._model.onDidChangeState((newState=>this.update(newState)))),this._ui=new lazy/* Lazy */.o((()=>this._register(new CodeActionUi(editor,QuickFixAction.Id,AutoFixAction.Id,{applyCodeAction:(action,retrigger)=>codeActionCommands_awaiter(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(action)}finally{retrigger&&this._trigger({type:2/* Auto */,filter:{}})}}))},this._instantiationService))))}static get(editor){return editor.getContribution(QuickFixController.ID)}update(newState){this._ui.getValue().update(newState)}showCodeActions(trigger,actions,at){return this._ui.getValue().showCodeActionList(trigger,actions,at,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(notAvailableMessage,filter,autoApply){if(!this._editor.hasModel())return;MessageController.get(this._editor).closeMessage();const triggerPosition=this._editor.getPosition();this._trigger({type:1/* Invoke */,filter:filter,autoApply:autoApply,context:{notAvailableMessage:notAvailableMessage,position:triggerPosition}})}_trigger(trigger){return this._model.trigger(trigger)}_applyCodeAction(action){return this._instantiationService.invokeFunction(applyCodeAction,action,this._editor)}};function applyCodeAction(accessor,item,editor){return codeActionCommands_awaiter(this,void 0,void 0,(function*(){const bulkEditService=accessor.get(services_bulkEditService/* IBulkEditService */.vu),commandService=accessor.get(commands/* ICommandService */.H),telemetryService=accessor.get(telemetry/* ITelemetryService */.b),notificationService=accessor.get(notification/* INotificationService */.lT);if(telemetryService.publicLog2("codeAction.applyCodeAction",{codeActionTitle:item.action.title,codeActionKind:item.action.kind,codeActionIsPreferred:!!item.action.isPreferred}),yield item.resolve(cancellation/* CancellationToken */.T.None),item.action.edit&&(yield bulkEditService.apply(services_bulkEditService/* ResourceEdit */.fo.convert(item.action.edit),{editor:editor,label:item.action.title})),item.action.command)try{yield commandService.executeCommand(item.action.command.id,...item.action.command.arguments||[])}catch(err){const message=asMessage(err);notificationService.error("string"===typeof message?message:nls/* localize */.N("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}))}function asMessage(err){return"string"===typeof err?err:err instanceof Error&&"string"===typeof err.message?err.message:void 0}function triggerCodeActionsForEditorSelection(editor,notAvailableMessage,filter,autoApply){if(editor.hasModel()){const controller=QuickFixController.get(editor);controller&&controller.manualTriggerAtCurrentPosition(notAvailableMessage,filter,autoApply)}}QuickFixController.ID="editor.contrib.quickFixController",QuickFixController=codeActionCommands_decorate([codeActionCommands_param(1,markers/* IMarkerService */.lT),codeActionCommands_param(2,contextkey/* IContextKeyService */.i6),codeActionCommands_param(3,progress/* IEditorProgressService */.e),codeActionCommands_param(4,instantiation/* IInstantiationService */.TG)],QuickFixController);class QuickFixAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:QuickFixAction.Id,label:nls/* localize */.N("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasCodeActionsProvider),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2132/* Period */,weight:100/* EditorContrib */}})}run(_accessor,editor){return triggerCodeActionsForEditorSelection(editor,nls/* localize */.N("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}QuickFixAction.Id="editor.action.quickFix";class CodeActionCommand extends editorExtensions/* EditorCommand */._l{constructor(){super({id:codeActionCommandId,precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:argsSchema}]}})}runEditorCommand(_accessor,editor,userArgs){const args=CodeActionCommandArgs.fromUser(userArgs,{kind:CodeActionKind.Empty,apply:"ifSingle"/* IfSingle */});return triggerCodeActionsForEditorSelection(editor,"string"===typeof(null===userArgs||void 0===userArgs?void 0:userArgs.kind)?args.preferred?nls/* localize */.N("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",userArgs.kind):nls/* localize */.N("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",userArgs.kind):args.preferred?nls/* localize */.N("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):nls/* localize */.N("editor.action.codeAction.noneMessage","No code actions available"),{include:args.kind,includeSourceActions:!0,onlyIncludePreferredActions:args.preferred},args.apply)}}class RefactorAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:refactorCommandId,label:nls/* localize */.N("refactor.label","Refactor..."),alias:"Refactor...",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasCodeActionsProvider),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3120/* KeyR */,mac:{primary:1328/* KeyR */},weight:100/* EditorContrib */},contextMenuOpts:{group:"1_modification",order:2,when:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,contextKeyForSupportedActions(CodeActionKind.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:argsSchema}]}})}run(_accessor,editor,userArgs){const args=CodeActionCommandArgs.fromUser(userArgs,{kind:CodeActionKind.Refactor,apply:"never"/* Never */});return triggerCodeActionsForEditorSelection(editor,"string"===typeof(null===userArgs||void 0===userArgs?void 0:userArgs.kind)?args.preferred?nls/* localize */.N("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",userArgs.kind):nls/* localize */.N("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",userArgs.kind):args.preferred?nls/* localize */.N("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):nls/* localize */.N("editor.action.refactor.noneMessage","No refactorings available"),{include:CodeActionKind.Refactor.contains(args.kind)?args.kind:CodeActionKind.None,onlyIncludePreferredActions:args.preferred},args.apply)}}class SourceAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:sourceActionCommandId,label:nls/* localize */.N("source.label","Source Action..."),alias:"Source Action...",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,contextKeyForSupportedActions(CodeActionKind.Source))},description:{description:"Source Action...",args:[{name:"args",schema:argsSchema}]}})}run(_accessor,editor,userArgs){const args=CodeActionCommandArgs.fromUser(userArgs,{kind:CodeActionKind.Source,apply:"never"/* Never */});return triggerCodeActionsForEditorSelection(editor,"string"===typeof(null===userArgs||void 0===userArgs?void 0:userArgs.kind)?args.preferred?nls/* localize */.N("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",userArgs.kind):nls/* localize */.N("editor.action.source.noneMessage.kind","No source actions for '{0}' available",userArgs.kind):args.preferred?nls/* localize */.N("editor.action.source.noneMessage.preferred","No preferred source actions available"):nls/* localize */.N("editor.action.source.noneMessage","No source actions available"),{include:CodeActionKind.Source.contains(args.kind)?args.kind:CodeActionKind.None,includeSourceActions:!0,onlyIncludePreferredActions:args.preferred},args.apply)}}class OrganizeImportsAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:organizeImportsCommandId,label:nls/* localize */.N("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1581/* KeyO */,weight:100/* EditorContrib */}})}run(_accessor,editor){return triggerCodeActionsForEditorSelection(editor,nls/* localize */.N("editor.action.organize.noneMessage","No organize imports action available"),{include:CodeActionKind.SourceOrganizeImports,includeSourceActions:!0},"ifSingle"/* IfSingle */)}}class FixAllAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:fixAllCommandId,label:nls/* localize */.N("fixAll.label","Fix All"),alias:"Fix All",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,contextKeyForSupportedActions(CodeActionKind.SourceFixAll))})}run(_accessor,editor){return triggerCodeActionsForEditorSelection(editor,nls/* localize */.N("fixAll.noneMessage","No fix all action available"),{include:CodeActionKind.SourceFixAll,includeSourceActions:!0},"ifSingle"/* IfSingle */)}}class AutoFixAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:AutoFixAction.Id,label:nls/* localize */.N("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,contextKeyForSupportedActions(CodeActionKind.QuickFix)),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1620/* Period */,mac:{primary:2644/* Period */},weight:100/* EditorContrib */}})}run(_accessor,editor){return triggerCodeActionsForEditorSelection(editor,nls/* localize */.N("editor.action.autoFix.noneMessage","No auto fixes available"),{include:CodeActionKind.QuickFix,onlyIncludePreferredActions:!0},"ifSingle"/* IfSingle */)}}AutoFixAction.Id="editor.action.autoFix",// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionContributions.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
(0,editorExtensions/* registerEditorContribution */._K)(QuickFixController.ID,QuickFixController),(0,editorExtensions/* registerEditorAction */.Qr)(QuickFixAction),(0,editorExtensions/* registerEditorAction */.Qr)(RefactorAction),(0,editorExtensions/* registerEditorAction */.Qr)(SourceAction),(0,editorExtensions/* registerEditorAction */.Qr)(OrganizeImportsAction),(0,editorExtensions/* registerEditorAction */.Qr)(AutoFixAction),(0,editorExtensions/* registerEditorAction */.Qr)(FixAllAction),(0,editorExtensions/* registerEditorCommand */.fK)(new CodeActionCommand);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/hash.js
var hash=__webpack_require__(89954),editorOptions=__webpack_require__(364141),languageFeatureRegistry=__webpack_require__(305405),types=__webpack_require__(998401),codelens_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/config/editorOptions.js
class CodeLensModel{constructor(){this.lenses=[],this._disposables=new lifecycle/* DisposableStore */.SL}dispose(){this._disposables.dispose()}add(list,provider){this._disposables.add(list);for(const symbol of list.lenses)this.lenses.push({symbol:symbol,provider:provider})}}function getCodeLensModel(model,token){return codelens_awaiter(this,void 0,void 0,(function*(){const provider=modes/* CodeLensProviderRegistry */.He.ordered(model),providerRanks=new Map,result=new CodeLensModel,promises=provider.map(((provider,i)=>codelens_awaiter(this,void 0,void 0,(function*(){providerRanks.set(provider,i);try{const list=yield Promise.resolve(provider.provideCodeLenses(model,token));list&&result.add(list,provider)}catch(err){(0,errors/* onUnexpectedExternalError */.Cp)(err)}}))));return yield Promise.all(promises),result.lenses=result.lenses.sort(((a,b)=>
// sort by lineNumber, provider-rank, and column
a.symbol.range.startLineNumber<b.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>b.symbol.range.startLineNumber?1:providerRanks.get(a.provider)<providerRanks.get(b.provider)?-1:providerRanks.get(a.provider)>providerRanks.get(b.provider)?1:a.symbol.range.startColumn<b.symbol.range.startColumn?-1:a.symbol.range.startColumn>b.symbol.range.startColumn?1:0)),result}))}commands/* CommandsRegistry */.P.registerCommand("_executeCodeLensProvider",(function(accessor,...args){let[uri,itemResolveCount]=args;(0,types/* assertType */.p_)(common_uri/* URI */.o.isUri(uri)),(0,types/* assertType */.p_)("number"===typeof itemResolveCount||!itemResolveCount);const model=accessor.get(services_modelService/* IModelService */.q).getModel(uri);if(!model)throw(0,errors/* illegalArgument */.b1)();const result=[],disposables=new lifecycle/* DisposableStore */.SL;return getCodeLensModel(model,cancellation/* CancellationToken */.T.None).then((value=>{disposables.add(value);let resolve=[];for(const item of value.lenses)void 0===itemResolveCount||null===itemResolveCount||Boolean(item.symbol.command)?result.push(item.symbol):itemResolveCount-- >0&&item.provider.resolveCodeLens&&resolve.push(Promise.resolve(item.provider.resolveCodeLens(model,item.symbol,cancellation/* CancellationToken */.T.None)).then((symbol=>result.push(symbol||item.symbol))));return Promise.all(resolve)})).then((()=>result)).finally((()=>{
// make sure to return results, then (on next tick)
// dispose the results
setTimeout((()=>disposables.dispose()),100)}))}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/functional.js
var functional=__webpack_require__(888289),map=__webpack_require__(843702),extensions=__webpack_require__(65026),storage=__webpack_require__(752365),codeLensCache_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},codeLensCache_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/map.js
const ICodeLensCache=(0,instantiation/* createDecorator */.yh)("ICodeLensCache");class CacheItem{constructor(lineCount,data){this.lineCount=lineCount,this.data=data}}let CodeLensCache=class{constructor(storageService){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new map/* LRUCache */.z6(20,.75);
// remove old data
const oldkey="codelens/cache";(0,common_async/* runWhenIdle */.To)((()=>storageService.remove(oldkey,1/* WORKSPACE */)));
// restore lens data on start
const key="codelens/cache2",raw=storageService.get(key,1/* WORKSPACE */,"{}");this._deserialize(raw),
// store lens data on shutdown
(0,functional/* once */.I)(storageService.onWillSaveState)((e=>{e.reason===storage/* WillSaveStateReason */.fk.SHUTDOWN&&storageService.store(key,this._serialize(),1/* WORKSPACE */,1/* MACHINE */)}))}put(model,data){
// create a copy of the model that is without command-ids
// but with comand-labels
const copyItems=data.lenses.map((item=>{var _a;return{range:item.symbol.range,command:item.symbol.command&&{id:"",title:null===(_a=item.symbol.command)||void 0===_a?void 0:_a.title}}})),copyModel=new CodeLensModel;copyModel.add({lenses:copyItems,dispose:()=>{}},this._fakeProvider);const item=new CacheItem(model.getLineCount(),copyModel);this._cache.set(model.uri.toString(),item)}get(model){const item=this._cache.get(model.uri.toString());return item&&item.lineCount===model.getLineCount()?item.data:void 0}delete(model){this._cache.delete(model.uri.toString())}
// --- persistence
_serialize(){const data=Object.create(null);for(const[key,value]of this._cache){const lines=new Set;for(const d of value.data.lenses)lines.add(d.symbol.range.startLineNumber);data[key]={lineCount:value.lineCount,lines:[...lines.values()]}}return JSON.stringify(data)}_deserialize(raw){try{const data=JSON.parse(raw);for(const key in data){const element=data[key],lenses=[];for(const line of element.lines)lenses.push({range:new core_range/* Range */.e(line,1,line,11)});const model=new CodeLensModel;model.add({lenses:lenses,dispose(){}},this._fakeProvider),this._cache.set(key,new CacheItem(element.lineCount,model))}}catch(_a){
// ignore...
}}};CodeLensCache=codeLensCache_decorate([codeLensCache_param(0,storage/* IStorageService */.Uy)],CodeLensCache),(0,extensions/* registerSingleton */.z)(ICodeLensCache,CodeLensCache);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabels.js
var iconLabels=__webpack_require__(156811);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensWidget.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class CodeLensViewZone{constructor(afterLineNumber,heightInPx,onHeight){this.afterLineNumber=afterLineNumber,this.heightInPx=heightInPx,this._onHeight=onHeight,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(height){void 0===this._lastHeight?this._lastHeight=height:this._lastHeight!==height&&(this._lastHeight=height,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class CodeLensContentWidget{constructor(editor,className,line){
// Editor.IContentWidget.allowEditorOverflow
this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=editor,this._id="codelens.widget-"+CodeLensContentWidget._idPool++,this.updatePosition(line),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${className}`}withCommands(lenses,animate){this._commands.clear();let children=[],hasSymbol=!1;for(let i=0;i<lenses.length;i++){const lens=lenses[i];if(lens&&(hasSymbol=!0,lens.command)){const title=(0,iconLabels/* renderLabelWithIcons */.T)(lens.command.title.trim());lens.command.id?(children.push(dom.$("a",{id:String(i),title:lens.command.tooltip},...title)),this._commands.set(String(i),lens.command)):children.push(dom.$("span",{title:lens.command.tooltip},...title)),i+1<lenses.length&&children.push(dom.$("span",void 0,"|"))}}hasSymbol?(
// symbols and commands
dom/* reset */.mc(this._domNode,...children),this._isEmpty&&animate&&this._domNode.classList.add("fadein"),this._isEmpty=!1):
// symbols but no commands
dom/* reset */.mc(this._domNode,dom.$("span",void 0,"no commands"))}getCommand(link){return link.parentElement===this._domNode?this._commands.get(link.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(line){const column=this._editor.getModel().getLineFirstNonWhitespaceColumn(line);this._widgetPosition={position:{lineNumber:line,column:column},preference:[1/* ABOVE */]}}getPosition(){return this._widgetPosition||null}}CodeLensContentWidget._idPool=0;class CodeLensHelper{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(decoration,callback){this._addDecorations.push(decoration),this._addDecorationsCallbacks.push(callback)}removeDecoration(decorationId){this._removeDecorations.push(decorationId)}commit(changeAccessor){let resultingDecorations=changeAccessor.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,len=resultingDecorations.length;i<len;i++)this._addDecorationsCallbacks[i](resultingDecorations[i])}}class CodeLensWidget{constructor(data,editor,className,helper,viewZoneChangeAccessor,heightInPx,updateCallback){let range;this._isDisposed=!1,this._editor=editor,this._className=className,this._data=data,
// create combined range, track all ranges with decorations,
// check if there is already something to render
this._decorationIds=[];let lenses=[];this._data.forEach(((codeLensData,i)=>{codeLensData.symbol.command&&lenses.push(codeLensData.symbol),helper.addDecoration({range:codeLensData.symbol.range,options:textModel/* ModelDecorationOptions */.qx.EMPTY},(id=>this._decorationIds[i]=id)),
// the range contains all lenses on this line
range=range?core_range/* Range */.e.plusRange(range,codeLensData.symbol.range):core_range/* Range */.e.lift(codeLensData.symbol.range)})),this._viewZone=new CodeLensViewZone(range.startLineNumber-1,heightInPx,updateCallback),this._viewZoneId=viewZoneChangeAccessor.addZone(this._viewZone),lenses.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(lenses,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new CodeLensContentWidget(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(helper,viewZoneChangeAccessor){this._decorationIds.forEach(helper.removeDecoration,helper),this._decorationIds=[],viewZoneChangeAccessor&&viewZoneChangeAccessor.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((id,i)=>{const range=this._editor.getModel().getDecorationRange(id),symbol=this._data[i].symbol;return!(!range||core_range/* Range */.e.isEmpty(symbol.range)!==range.isEmpty())}))}updateCodeLensSymbols(data,helper){this._decorationIds.forEach(helper.removeDecoration,helper),this._decorationIds=[],this._data=data,this._data.forEach(((codeLensData,i)=>{helper.addDecoration({range:codeLensData.symbol.range,options:textModel/* ModelDecorationOptions */.qx.EMPTY},(id=>this._decorationIds[i]=id))}))}updateHeight(height,viewZoneChangeAccessor){this._viewZone.heightInPx=height,viewZoneChangeAccessor.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(model){if(!this._viewZone.isVisible())return null;
// Read editor current state
for(let i=0;i<this._decorationIds.length;i++){const range=model.getDecorationRange(this._decorationIds[i]);range&&(this._data[i].symbol.range=range)}return this._data}updateCommands(symbols){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(symbols,!0);for(let i=0;i<this._data.length;i++){const resolved=symbols[i];if(resolved){const{symbol:symbol}=this._data[i];symbol.command=resolved.command||symbol.command}}}getCommand(link){var _a;return null===(_a=this._contentWidget)||void 0===_a?void 0:_a.getCommand(link)}getLineNumber(){const range=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return range?range.startLineNumber:-1}update(viewZoneChangeAccessor){if(this.isValid()){const range=this._editor.getModel().getDecorationRange(this._decorationIds[0]);range&&(this._viewZone.afterLineNumber=range.startLineNumber-1,viewZoneChangeAccessor.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(range.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const codeLensForeground=theme.getColor(editorColorRegistry/* editorCodeLensForeground */.Yp);codeLensForeground&&(collector.addRule(`.monaco-editor .codelens-decoration { color: ${codeLensForeground}; }`),collector.addRule(`.monaco-editor .codelens-decoration .codicon { color: ${codeLensForeground}; }`));const activeLinkForeground=theme.getColor(colorRegistry/* editorActiveLinkForeground */._Y);activeLinkForeground&&(collector.addRule(`.monaco-editor .codelens-decoration > a:hover { color: ${activeLinkForeground} !important; }`),collector.addRule(`.monaco-editor .codelens-decoration > a:hover .codicon { color: ${activeLinkForeground} !important; }`))}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/quickinput/common/quickInput.js
var quickInput=__webpack_require__(641157),codelensController_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},codelensController_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},codelensController_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let CodeLensContribution=class{constructor(_editor,_commandService,_notificationService,_codeLensCache){this._editor=_editor,this._commandService=_commandService,this._notificationService=_notificationService,this._codeLensCache=_codeLensCache,this._disposables=new lifecycle/* DisposableStore */.SL,this._localToDispose=new lifecycle/* DisposableStore */.SL,this._lenses=[],this._getCodeLensModelDelays=new languageFeatureRegistry/* LanguageFeatureRequestDelays */.Y(modes/* CodeLensProviderRegistry */.He,250,2500),this._oldCodeLensModels=new lifecycle/* DisposableStore */.SL,this._resolveCodeLensesDelays=new languageFeatureRegistry/* LanguageFeatureRequestDelays */.Y(modes/* CodeLensProviderRegistry */.He,250,2500),this._resolveCodeLensesScheduler=new common_async/* RunOnceScheduler */.pY((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(43/* fontInfo */)||e.hasChanged(16/* codeLensFontSize */)||e.hasChanged(15/* codeLensFontFamily */))&&this._updateLensStyle(),e.hasChanged(14/* codeLens */)&&this._onModelChange()}))),this._disposables.add(modes/* CodeLensProviderRegistry */.He.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,hash/* hash */.vp)(this._editor.getId()).toString(16),this._styleElement=dom/* createStyleSheet */.dS(dom/* isInShadowDOM */.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var _a;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(_a=this._currentCodeLensModel)||void 0===_a||_a.dispose(),this._styleElement.remove()}_getLayoutInfo(){let codeLensHeight,fontSize=this._editor.getOption(16/* codeLensFontSize */);return!fontSize||fontSize<5?(fontSize=.9*this._editor.getOption(45/* fontSize */)|0,codeLensHeight=this._editor.getOption(58/* lineHeight */)):codeLensHeight=fontSize*Math.max(1.3,this._editor.getOption(58/* lineHeight */)/this._editor.getOption(45/* fontSize */))|0,{codeLensHeight:codeLensHeight,fontSize:fontSize}}_updateLensStyle(){const{codeLensHeight:codeLensHeight,fontSize:fontSize}=this._getLayoutInfo(),fontFamily=this._editor.getOption(15/* codeLensFontFamily */),editorFontInfo=this._editor.getOption(43/* fontInfo */),fontFamilyVar=`--codelens-font-family${this._styleClassName}`,fontFeaturesVar=`--codelens-font-features${this._styleClassName}`;let newStyle=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(.5*fontSize)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;fontFamily&&(newStyle+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${fontFamilyVar}), ${editorOptions/* EDITOR_FONT_DEFAULTS */.hL.fontFamily}}`),this._styleElement.textContent=newStyle,this._editor.getContainerDomNode().style.setProperty(fontFamilyVar,null!==fontFamily&&void 0!==fontFamily?fontFamily:"inherit"),this._editor.getContainerDomNode().style.setProperty(fontFeaturesVar,editorFontInfo.fontFeatureSettings),
this._editor.changeViewZones((accessor=>{for(let lens of this._lenses)lens.updateHeight(codeLensHeight,accessor)}))}_localDispose(){var _a,_b,_c;null===(_a=this._getCodeLensModelPromise)||void 0===_a||_a.cancel(),this._getCodeLensModelPromise=void 0,null===(_b=this._resolveCodeLensesPromise)||void 0===_b||_b.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(_c=this._currentCodeLensModel)||void 0===_c||_c.dispose()}_onModelChange(){this._localDispose();const model=this._editor.getModel();if(!model)return;if(!this._editor.getOption(14/* codeLens */))return;const cachedLenses=this._codeLensCache.get(model);if(cachedLenses&&this._renderCodeLensSymbols(cachedLenses),!modes/* CodeLensProviderRegistry */.He.has(model))
// no provider -> return but check with
// cached lenses. they expire after 30 seconds
return void(cachedLenses&&this._localToDispose.add((0,common_async/* disposableTimeout */.Vg)((()=>{const cachedLensesNow=this._codeLensCache.get(model);cachedLenses===cachedLensesNow&&(this._codeLensCache.delete(model),this._onModelChange())}),3e4)));for(const provider of modes/* CodeLensProviderRegistry */.He.all(model))if("function"===typeof provider.onDidChange){let registration=provider.onDidChange((()=>scheduler.schedule()));this._localToDispose.add(registration)}const scheduler=new common_async/* RunOnceScheduler */.pY((()=>{var _a;const t1=Date.now();null===(_a=this._getCodeLensModelPromise)||void 0===_a||_a.cancel(),this._getCodeLensModelPromise=(0,common_async/* createCancelablePromise */.PG)((token=>getCodeLensModel(model,token))),this._getCodeLensModelPromise.then((result=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=result,
// cache model to reduce flicker
this._codeLensCache.put(model,result);
// update moving average
const newDelay=this._getCodeLensModelDelays.update(model,Date.now()-t1);scheduler.delay=newDelay,
// render lenses
this._renderCodeLensSymbols(result),
// dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());
this._resolveCodeLensesInViewportSoon()}),errors/* onUnexpectedError */.dL)}),this._getCodeLensModelDelays.get(model));this._localToDispose.add(scheduler),this._localToDispose.add((0,lifecycle/* toDisposable */.OF)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._editor.changeDecorations((decorationsAccessor=>{this._editor.changeViewZones((viewZonesAccessor=>{let toDispose=[],lastLensLineNumber=-1;this._lenses.forEach((lens=>{lens.isValid()&&lastLensLineNumber!==lens.getLineNumber()?(lens.update(viewZonesAccessor),lastLensLineNumber=lens.getLineNumber()):
// invalid -> lens collapsed, attach range doesn't exist anymore
// line_number -> lenses should never be on the same line
toDispose.push(lens)}));let helper=new CodeLensHelper;toDispose.forEach((l=>{l.dispose(helper,viewZonesAccessor),this._lenses.splice(this._lenses.indexOf(l),1)})),helper.commit(decorationsAccessor)}))})),
// Ask for all references again
scheduler.schedule()}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{scheduler.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,lifecycle/* toDisposable */.OF)((()=>{if(this._editor.getModel()){const scrollState=editorState/* StableEditorScrollState */.ZF.capture(this._editor);this._editor.changeDecorations((decorationsAccessor=>{this._editor.changeViewZones((viewZonesAccessor=>{this._disposeAllLenses(decorationsAccessor,viewZonesAccessor)}))})),scrollState.restore(this._editor)}else
// No accessors available
this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9/* CONTENT_WIDGET */!==e.target.type)return;let target=e.target.element;if("SPAN"===(null===target||void 0===target?void 0:target.tagName)&&(target=target.parentElement),"A"===(null===target||void 0===target?void 0:target.tagName))for(const lens of this._lenses){let command=lens.getCommand(target);if(command){this._commandService.executeCommand(command.id,...command.arguments||[]).catch((err=>this._notificationService.error(err)));break}}}))),scheduler.schedule()}_disposeAllLenses(decChangeAccessor,viewZoneChangeAccessor){const helper=new CodeLensHelper;for(const lens of this._lenses)lens.dispose(helper,viewZoneChangeAccessor);decChangeAccessor&&helper.commit(decChangeAccessor),this._lenses.length=0}_renderCodeLensSymbols(symbols){if(!this._editor.hasModel())return;let lastGroup,maxLineNumber=this._editor.getModel().getLineCount(),groups=[];for(let symbol of symbols.lenses){let line=symbol.symbol.range.startLineNumber;line<1||line>maxLineNumber||(lastGroup&&lastGroup[lastGroup.length-1].symbol.range.startLineNumber===line?
// on same line as previous
lastGroup.push(symbol):(
// on later line as previous
lastGroup=[symbol],groups.push(lastGroup)))}const scrollState=editorState/* StableEditorScrollState */.ZF.capture(this._editor),layoutInfo=this._getLayoutInfo();this._editor.changeDecorations((decorationsAccessor=>{this._editor.changeViewZones((viewZoneAccessor=>{const helper=new CodeLensHelper;let codeLensIndex=0,groupsIndex=0;while(groupsIndex<groups.length&&codeLensIndex<this._lenses.length){let symbolsLineNumber=groups[groupsIndex][0].symbol.range.startLineNumber,codeLensLineNumber=this._lenses[codeLensIndex].getLineNumber();codeLensLineNumber<symbolsLineNumber?(this._lenses[codeLensIndex].dispose(helper,viewZoneAccessor),this._lenses.splice(codeLensIndex,1)):codeLensLineNumber===symbolsLineNumber?(this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex],helper),groupsIndex++,codeLensIndex++):(this._lenses.splice(codeLensIndex,0,new CodeLensWidget(groups[groupsIndex],this._editor,this._styleClassName,helper,viewZoneAccessor,layoutInfo.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),codeLensIndex++,groupsIndex++)}
// Delete extra code lenses
while(codeLensIndex<this._lenses.length)this._lenses[codeLensIndex].dispose(helper,viewZoneAccessor),this._lenses.splice(codeLensIndex,1);
// Create extra symbols
while(groupsIndex<groups.length)this._lenses.push(new CodeLensWidget(groups[groupsIndex],this._editor,this._styleClassName,helper,viewZoneAccessor,layoutInfo.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),groupsIndex++;helper.commit(decorationsAccessor)}))})),scrollState.restore(this._editor)}_resolveCodeLensesInViewportSoon(){const model=this._editor.getModel();model&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var _a;null===(_a=this._resolveCodeLensesPromise)||void 0===_a||_a.cancel(),this._resolveCodeLensesPromise=void 0;const model=this._editor.getModel();if(!model)return;const toResolve=[],lenses=[];if(this._lenses.forEach((lens=>{const request=lens.computeIfNecessary(model);request&&(toResolve.push(request),lenses.push(lens))})),0===toResolve.length)return;const t1=Date.now(),resolvePromise=(0,common_async/* createCancelablePromise */.PG)((token=>{const promises=toResolve.map(((request,i)=>{const resolvedSymbols=new Array(request.length),promises=request.map(((request,i)=>request.symbol.command||"function"!==typeof request.provider.resolveCodeLens?(resolvedSymbols[i]=request.symbol,Promise.resolve(void 0)):Promise.resolve(request.provider.resolveCodeLens(model,request.symbol,token)).then((symbol=>{resolvedSymbols[i]=symbol}),errors/* onUnexpectedExternalError */.Cp)));return Promise.all(promises).then((()=>{token.isCancellationRequested||lenses[i].isDisposed()||lenses[i].updateCommands(resolvedSymbols)}))}));return Promise.all(promises)}));this._resolveCodeLensesPromise=resolvePromise,this._resolveCodeLensesPromise.then((()=>{
// update moving average
const newDelay=this._resolveCodeLensesDelays.update(model,Date.now()-t1);this._resolveCodeLensesScheduler.delay=newDelay,this._currentCodeLensModel&&// update the cached state with new resolved items
this._codeLensCache.put(model,this._currentCodeLensModel),this._oldCodeLensModels.clear(),// dispose old models once we have updated the UI with the current model
resolvePromise===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(err=>{(0,errors/* onUnexpectedError */.dL)(err),// can also be cancellation!
resolvePromise===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getLenses(){return this._lenses}};CodeLensContribution.ID="css.editor.codeLens",CodeLensContribution=codelensController_decorate([codelensController_param(1,commands/* ICommandService */.H),codelensController_param(2,notification/* INotificationService */.lT),codelensController_param(3,ICodeLensCache)],CodeLensContribution),(0,editorExtensions/* registerEditorContribution */._K)(CodeLensContribution.ID,CodeLensContribution),(0,editorExtensions/* registerEditorAction */.Qr)(class extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:editorContextKeys/* EditorContextKeys */.u.hasCodeLensProvider,label:(0,nls/* localize */.N)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(accessor,editor){return codelensController_awaiter(this,void 0,void 0,(function*(){if(!editor.hasModel())return;const quickInputService=accessor.get(quickInput/* IQuickInputService */.eJ),commandService=accessor.get(commands/* ICommandService */.H),notificationService=accessor.get(notification/* INotificationService */.lT),lineNumber=editor.getSelection().positionLineNumber,codelensController=editor.getContribution(CodeLensContribution.ID),items=[];for(let lens of codelensController.getLenses())if(lens.getLineNumber()===lineNumber)for(let item of lens.getItems()){const{command:command}=item.symbol;command&&items.push({label:command.title,command:command})}if(0===items.length)
// We dont want an empty picker
return;const item=yield quickInputService.pick(items,{canPickMany:!1});if(item)try{yield commandService.executeCommand(item.command.id,...item.command.arguments||[])}catch(err){notificationService.error(err)}}))}});
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/color.js
var common_color=__webpack_require__(41264);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/color.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function getColors(model,token){const colors=[],providers=modes/* ColorProviderRegistry */.OH.ordered(model).reverse(),promises=providers.map((provider=>Promise.resolve(provider.provideDocumentColors(model,token)).then((result=>{if(Array.isArray(result))for(let colorInfo of result)colors.push({colorInfo:colorInfo,provider:provider})}))));return Promise.all(promises).then((()=>colors))}function getColorPresentations(model,colorInfo,provider,token){return Promise.resolve(provider.provideColorPresentations(model,colorInfo,token))}commands/* CommandsRegistry */.P.registerCommand("_executeDocumentColorProvider",(function(accessor,...args){const[resource]=args;if(!(resource instanceof common_uri/* URI */.o))throw(0,errors/* illegalArgument */.b1)();const model=accessor.get(services_modelService/* IModelService */.q).getModel(resource);if(!model)throw(0,errors/* illegalArgument */.b1)();const rawCIs=[],providers=modes/* ColorProviderRegistry */.OH.ordered(model).reverse(),promises=providers.map((provider=>Promise.resolve(provider.provideDocumentColors(model,cancellation/* CancellationToken */.T.None)).then((result=>{if(Array.isArray(result))for(let ci of result)rawCIs.push({range:ci.range,color:[ci.color.red,ci.color.green,ci.color.blue,ci.color.alpha]})}))));return Promise.all(promises).then((()=>rawCIs))})),commands/* CommandsRegistry */.P.registerCommand("_executeColorPresentationProvider",(function(accessor,...args){const[color,context]=args,{uri:uri,range:range}=context;if(!(uri instanceof common_uri/* URI */.o)||!Array.isArray(color)||4!==color.length||!core_range/* Range */.e.isIRange(range))throw(0,errors/* illegalArgument */.b1)();const[red,green,blue,alpha]=color,model=accessor.get(services_modelService/* IModelService */.q).getModel(uri);if(!model)throw(0,errors/* illegalArgument */.b1)();const colorInfo={range:range,color:{red:red,green:green,blue:blue,alpha:alpha}},presentations=[],providers=modes/* ColorProviderRegistry */.OH.ordered(model).reverse(),promises=providers.map((provider=>Promise.resolve(provider.provideColorPresentations(model,colorInfo,cancellation/* CancellationToken */.T.None)).then((result=>{Array.isArray(result)&&presentations.push(...result)}))));return Promise.all(promises).then((()=>presentations))}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/configuration/common/configuration.js
var configuration=__webpack_require__(133108),colorDetector_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},colorDetector_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};const MAX_DECORATORS=500;let ColorDetector=class ColorDetector extends lifecycle/* Disposable */.JT{constructor(_editor,_codeEditorService,_configurationService){super(),this._editor=_editor,this._codeEditorService=_codeEditorService,this._configurationService=_configurationService,this._localToDispose=this._register(new lifecycle/* DisposableStore */.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(_editor.onDidChangeModel((()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()}))),this._register(_editor.onDidChangeModelLanguage((()=>this.onModelChanged()))),this._register(modes/* ColorProviderRegistry */.OH.onDidChange((()=>this.onModelChanged()))),this._register(_editor.onDidChangeConfiguration((()=>{let prevIsEnabled=this._isEnabled;this._isEnabled=this.isEnabled(),prevIsEnabled!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const model=this._editor.getModel();if(!model)return!1;const languageId=model.getLanguageId(),deprecatedConfig=this._configurationService.getValue(languageId);
// handle deprecated settings. [languageId].colorDecorators.enable
if(deprecatedConfig&&"object"===typeof deprecatedConfig){const colorDecorators=deprecatedConfig["colorDecorators"];// deprecatedConfig.valueOf('.colorDecorators.enable');
if(colorDecorators&&void 0!==colorDecorators["enable"]&&!colorDecorators["enable"])return colorDecorators["enable"]}return this._editor.getOption(17/* colorDecorators */)}static get(editor){return editor.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const model=this._editor.getModel();model&&modes/* ColorProviderRegistry */.OH.has(model)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new common_async/* TimeoutTimer */._F,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),ColorDetector.RECOMPUTE_TIME))}))),this.beginCompute())}beginCompute(){this._computePromise=(0,common_async/* createCancelablePromise */.PG)((token=>{const model=this._editor.getModel();return model?getColors(model,token):Promise.resolve([])})),this._computePromise.then((colorInfos=>{this.updateDecorations(colorInfos),this.updateColorDecorators(colorInfos),this._computePromise=null}),errors/* onUnexpectedError */.dL)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(colorDatas){const decorations=colorDatas.map((c=>({range:{startLineNumber:c.colorInfo.range.startLineNumber,startColumn:c.colorInfo.range.startColumn,endLineNumber:c.colorInfo.range.endLineNumber,endColumn:c.colorInfo.range.endColumn},options:textModel/* ModelDecorationOptions */.qx.EMPTY})));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,decorations),this._colorDatas=new Map,this._decorationsIds.forEach(((id,i)=>this._colorDatas.set(id,colorDatas[i])))}updateColorDecorators(colorData){let decorations=[],newDecorationsTypes={};for(let i=0;i<colorData.length&&decorations.length<MAX_DECORATORS;i++){const{red:red,green:green,blue:blue,alpha:alpha}=colorData[i].colorInfo.color,rgba=new common_color/* RGBA */.VS(Math.round(255*red),Math.round(255*green),Math.round(255*blue),alpha);let subKey=(0,hash/* hash */.vp)(`rgba(${rgba.r},${rgba.g},${rgba.b},${rgba.a})`).toString(16),color=`rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`,key="colorBox-"+subKey;this._decorationsTypes.has(key)||newDecorationsTypes[key]||this._codeEditorService.registerDecorationType("color-detector-color",key,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:color},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),newDecorationsTypes[key]=!0,decorations.push({range:{startLineNumber:colorData[i].colorInfo.range.startLineNumber,startColumn:colorData[i].colorInfo.range.startColumn,endLineNumber:colorData[i].colorInfo.range.endLineNumber,endColumn:colorData[i].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(key,!0)})}this._decorationsTypes.forEach((subType=>{newDecorationsTypes[subType]||this._codeEditorService.removeDecorationType(subType)})),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,decorations)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach((subType=>{this._codeEditorService.removeDecorationType(subType)}))}getColorData(position){const model=this._editor.getModel();if(!model)return null;const decorations=model.getDecorationsInRange(core_range/* Range */.e.fromPositions(position,position)).filter((d=>this._colorDatas.has(d.id)));return 0===decorations.length?null:this._colorDatas.get(decorations[0].id)}};ColorDetector.ID="editor.contrib.colorDetector",ColorDetector.RECOMPUTE_TIME=1e3,// ms
ColorDetector=colorDetector_decorate([colorDetector_param(1,services_codeEditorService/* ICodeEditorService */.$),colorDetector_param(2,configuration/* IConfigurationService */.Ui)],ColorDetector),(0,editorExtensions/* registerEditorContribution */._K)(ColorDetector.ID,ColorDetector);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/modeService.js
var modeService=__webpack_require__(771531),resolverService=__webpack_require__(288216);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/clickLinkGesture.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function hasModifier(e,modifier){return!!e[modifier]}
/**
 * An event that encapsulates the various trigger modifiers logic needed for go to definition.
 */class ClickLinkMouseEvent{constructor(source,opts){this.target=source.target,this.hasTriggerModifier=hasModifier(source.event,opts.triggerModifier),this.hasSideBySideModifier=hasModifier(source.event,opts.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=source.event.detail<=1}}
/**
 * An event that encapsulates the various trigger modifiers logic needed for go to definition.
 */class ClickLinkKeyboardEvent{constructor(source,opts){this.keyCodeIsTriggerKey=source.keyCode===opts.triggerKey,this.keyCodeIsSideBySideKey=source.keyCode===opts.triggerSideBySideKey,this.hasTriggerModifier=hasModifier(source,opts.triggerModifier)}}class ClickLinkOptions{constructor(triggerKey,triggerModifier,triggerSideBySideKey,triggerSideBySideModifier){this.triggerKey=triggerKey,this.triggerModifier=triggerModifier,this.triggerSideBySideKey=triggerSideBySideKey,this.triggerSideBySideModifier=triggerSideBySideModifier}equals(other){return this.triggerKey===other.triggerKey&&this.triggerModifier===other.triggerModifier&&this.triggerSideBySideKey===other.triggerSideBySideKey&&this.triggerSideBySideModifier===other.triggerSideBySideModifier}}function createOptions(multiCursorModifier){return"altKey"===multiCursorModifier?platform/* isMacintosh */.dz?new ClickLinkOptions(57/* Meta */,"metaKey",6/* Alt */,"altKey"):new ClickLinkOptions(5/* Ctrl */,"ctrlKey",6/* Alt */,"altKey"):platform/* isMacintosh */.dz?new ClickLinkOptions(6/* Alt */,"altKey",57/* Meta */,"metaKey"):new ClickLinkOptions(6/* Alt */,"altKey",5/* Ctrl */,"ctrlKey")}class ClickLinkGesture extends lifecycle/* Disposable */.JT{constructor(editor){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new common_event/* Emitter */.Q5),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new common_event/* Emitter */.Q5),this.onExecute=this._onExecute.event,this._onCancel=this._register(new common_event/* Emitter */.Q5),this.onCancel=this._onCancel.event,this._editor=editor,this._opts=createOptions(this._editor.getOption(69/* multiCursorModifier */)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((e=>{if(e.hasChanged(69/* multiCursorModifier */)){const newOpts=createOptions(this._editor.getOption(69/* multiCursorModifier */));if(this._opts.equals(newOpts))return;this._opts=newOpts,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((e=>this._onEditorMouseMove(new ClickLinkMouseEvent(e,this._opts))))),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(new ClickLinkMouseEvent(e,this._opts))))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(new ClickLinkMouseEvent(e,this._opts))))),this._register(this._editor.onKeyDown((e=>this._onEditorKeyDown(new ClickLinkKeyboardEvent(e,this._opts))))),this._register(this._editor.onKeyUp((e=>this._onEditorKeyUp(new ClickLinkKeyboardEvent(e,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((e=>this._onDidChangeCursorSelection(e)))),this._register(this._editor.onDidChangeModel((e=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()})))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(mouseEvent){this._lastMouseMoveEvent=mouseEvent,this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent,null])}_onEditorMouseDown(mouseEvent){
// We need to record if we had the trigger key on mouse down because someone might select something in the editor
// holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then
// release the mouse button without wanting to do the navigation.
// With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.
this._hasTriggerKeyOnMouseDown=mouseEvent.hasTriggerModifier,this._lineNumberOnMouseDown=mouseEvent.target.position?mouseEvent.target.position.lineNumber:0}_onEditorMouseUp(mouseEvent){const currentLineNumber=mouseEvent.target.position?mouseEvent.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===currentLineNumber&&this._onExecute.fire(mouseEvent)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/peekView/peekView.js + 1 modules
var peekView=__webpack_require__(759774),editorBrowser=__webpack_require__(65520),embeddedCodeEditorWidget=__webpack_require__(284527),referencesController=__webpack_require__(560829),referencesModel=__webpack_require__(171455),keybindingsRegistry=__webpack_require__(49989),symbolNavigation_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},symbolNavigation_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js
const ctxHasSymbols=new contextkey/* RawContextKey */.uy("hasSymbols",!1,(0,nls/* localize */.N)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),ISymbolNavigationService=(0,instantiation/* createDecorator */.yh)("ISymbolNavigationService");let SymbolNavigationService=class{constructor(contextKeyService,_editorService,_notificationService,_keybindingService){this._editorService=_editorService,this._notificationService=_notificationService,this._keybindingService=_keybindingService,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=ctxHasSymbols.bindTo(contextKeyService)}reset(){var _a,_b;this._ctxHasSymbols.reset(),null===(_a=this._currentState)||void 0===_a||_a.dispose(),null===(_b=this._currentMessage)||void 0===_b||_b.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(anchor){const refModel=anchor.parent.parent;if(refModel.references.length<=1)return void this.reset();this._currentModel=refModel,this._currentIdx=refModel.references.indexOf(anchor),this._ctxHasSymbols.set(!0),this._showMessage();const editorState=new EditorState(this._editorService),listener=editorState.onDidChange((_=>{if(this._ignoreEditorChange)return;const editor=this._editorService.getActiveCodeEditor();if(!editor)return;const model=editor.getModel(),position=editor.getPosition();if(!model||!position)return;let seenUri=!1,seenPosition=!1;for(const reference of refModel.references)if((0,common_resources/* isEqual */.Xy)(reference.uri,model.uri))seenUri=!0,seenPosition=seenPosition||core_range/* Range */.e.containsPosition(reference.range,position);else if(seenUri)break;seenUri&&seenPosition||this.reset()}));this._currentState=(0,lifecycle/* combinedDisposable */.F8)(editorState,listener)}revealNext(source){if(!this._currentModel)return Promise.resolve();
// get next result and advance
this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const reference=this._currentModel.references[this._currentIdx];
// status
return this._showMessage(),
// open editor, ignore events while that happens
this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:reference.uri,options:{selection:core_range/* Range */.e.collapseToStart(reference.range),selectionRevealType:3/* NearTopIfOutsideViewport */}},source).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var _a;null===(_a=this._currentMessage)||void 0===_a||_a.dispose();const kb=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),message=kb?(0,nls/* localize */.N)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,kb.getLabel()):(0,nls/* localize */.N)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(message)}};SymbolNavigationService=symbolNavigation_decorate([symbolNavigation_param(0,contextkey/* IContextKeyService */.i6),symbolNavigation_param(1,services_codeEditorService/* ICodeEditorService */.$),symbolNavigation_param(2,notification/* INotificationService */.lT),symbolNavigation_param(3,keybinding/* IKeybindingService */.d)],SymbolNavigationService),(0,extensions/* registerSingleton */.z)(ISymbolNavigationService,SymbolNavigationService,!0),(0,editorExtensions/* registerEditorCommand */.fK)(new class extends editorExtensions/* EditorCommand */._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:ctxHasSymbols,kbOpts:{weight:100/* EditorContrib */,primary:70/* F12 */}})}runEditorCommand(accessor,editor){return accessor.get(ISymbolNavigationService).revealNext(editor)}}),keybindingsRegistry/* KeybindingsRegistry */.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100/* EditorContrib */,when:ctxHasSymbols,primary:9/* Escape */,handler(accessor){accessor.get(ISymbolNavigationService).reset()}});
let EditorState=class{constructor(editorService){this._listener=new Map,this._disposables=new lifecycle/* DisposableStore */.SL,this._onDidChange=new common_event/* Emitter */.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor,this)),editorService.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,lifecycle/* dispose */.B9)(this._listener.values())}_onDidAddEditor(editor){this._listener.set(editor,(0,lifecycle/* combinedDisposable */.F8)(editor.onDidChangeCursorPosition((_=>this._onDidChange.fire({editor:editor}))),editor.onDidChangeModelContent((_=>this._onDidChange.fire({editor:editor})))))}_onDidRemoveEditor(editor){var _a;null===(_a=this._listener.get(editor))||void 0===_a||_a.dispose(),this._listener.delete(editor)}};EditorState=symbolNavigation_decorate([symbolNavigation_param(0,services_codeEditorService/* ICodeEditorService */.$)],EditorState);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/goToSymbol.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var goToSymbol_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function getLocationLinks(model,position,registry,provide){const provider=registry.ordered(model),promises=provider.map((provider=>Promise.resolve(provide(provider,model,position)).then(void 0,(err=>{(0,errors/* onUnexpectedExternalError */.Cp)(err)}))));
// get results
return Promise.all(promises).then((values=>{const result=[];for(let value of values)Array.isArray(value)?result.push(...value):value&&result.push(value);return result}))}function getDefinitionsAtPosition(model,position,token){return getLocationLinks(model,position,modes/* DefinitionProviderRegistry */.Ct,((provider,model,position)=>provider.provideDefinition(model,position,token)))}function getDeclarationsAtPosition(model,position,token){return getLocationLinks(model,position,modes/* DeclarationProviderRegistry */.RN,((provider,model,position)=>provider.provideDeclaration(model,position,token)))}function getImplementationsAtPosition(model,position,token){return getLocationLinks(model,position,modes/* ImplementationProviderRegistry */.vI,((provider,model,position)=>provider.provideImplementation(model,position,token)))}function getTypeDefinitionsAtPosition(model,position,token){return getLocationLinks(model,position,modes/* TypeDefinitionProviderRegistry */.tA,((provider,model,position)=>provider.provideTypeDefinition(model,position,token)))}function getReferencesAtPosition(model,position,compact,token){return getLocationLinks(model,position,modes/* ReferenceProviderRegistry */.FL,((provider,model,position)=>goToSymbol_awaiter(this,void 0,void 0,(function*(){const result=yield provider.provideReferences(model,position,{includeDeclaration:!0},token);if(!compact||!result||2!==result.length)return result;const resultWithoutDeclaration=yield provider.provideReferences(model,position,{includeDeclaration:!1},token);return resultWithoutDeclaration&&1===resultWithoutDeclaration.length?resultWithoutDeclaration:result}))))}
// -- API commands ----
function _sortedAndDeduped(callback){return goToSymbol_awaiter(this,void 0,void 0,(function*(){const rawLinks=yield callback(),model=new referencesModel/* ReferencesModel */.oQ(rawLinks,""),modelLinks=model.references.map((ref=>ref.link));return model.dispose(),modelLinks}))}(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeDefinitionProvider",((model,position)=>_sortedAndDeduped((()=>getDefinitionsAtPosition(model,position,cancellation/* CancellationToken */.T.None))))),(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeDeclarationProvider",((model,position)=>_sortedAndDeduped((()=>getDeclarationsAtPosition(model,position,cancellation/* CancellationToken */.T.None))))),(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeImplementationProvider",((model,position)=>_sortedAndDeduped((()=>getImplementationsAtPosition(model,position,cancellation/* CancellationToken */.T.None))))),(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeTypeDefinitionProvider",((model,position)=>_sortedAndDeduped((()=>getTypeDefinitionsAtPosition(model,position,cancellation/* CancellationToken */.T.None))))),(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeReferenceProvider",((model,position)=>_sortedAndDeduped((()=>getReferencesAtPosition(model,position,!1,cancellation/* CancellationToken */.T.None)))));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/goToCommands.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var _a,_b,_c,_d,_e,_f,_g,_h,goToCommands_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};common_actions/* MenuRegistry */.BH.appendMenuItem(common_actions/* MenuId */.eH.EditorContext,{submenu:common_actions/* MenuId */.eH.EditorContextPeek,title:nls/* localize */.N("peek.submenu","Peek"),group:"navigation",order:100});const _goToActionIds=new Set;function registerGoToAction(ctor){const result=new ctor;return(0,editorExtensions/* registerInstantiatedEditorAction */.QG)(result),_goToActionIds.add(result.id),result}class SymbolNavigationAction extends editorExtensions/* EditorAction */.R6{constructor(configuration,opts){super(opts),this._configuration=configuration}run(accessor,editor){if(!editor.hasModel())return Promise.resolve(void 0);const notificationService=accessor.get(notification/* INotificationService */.lT),editorService=accessor.get(services_codeEditorService/* ICodeEditorService */.$),progressService=accessor.get(progress/* IEditorProgressService */.e),symbolNavService=accessor.get(ISymbolNavigationService),model=editor.getModel(),pos=editor.getPosition(),cts=new editorState/* EditorStateCancellationTokenSource */.Dl(editor,5/* Position */),promise=(0,common_async/* raceCancellation */.eP)(this._getLocationModel(model,pos,cts.token),cts.token).then((references=>goToCommands_awaiter(this,void 0,void 0,(function*(){if(!references||cts.token.isCancellationRequested)return;let altAction;if((0,aria/* alert */.Z9)(references.ariaMessage),references.referenceAt(model.uri,pos)){const altActionId=this._getAlternativeCommand(editor);altActionId!==this.id&&_goToActionIds.has(altActionId)&&(altAction=editor.getAction(altActionId))}const referenceCount=references.references.length;if(0===referenceCount){
// no result -> show message
if(!this._configuration.muteMessage){const info=model.getWordAtPosition(pos);MessageController.get(editor).showMessage(this._getNoResultFoundMessage(info),pos)}}else{if(1!==referenceCount||!altAction)
// normal results handling
return this._onResult(editorService,symbolNavService,editor,references);
// already at the only result, run alternative
altAction.run()}}))),(err=>{
// report an error
notificationService.error(err)})).finally((()=>{cts.dispose()}));return progressService.showWhile(promise,250),promise}_onResult(editorService,symbolNavService,editor,model){return goToCommands_awaiter(this,void 0,void 0,(function*(){const gotoLocation=this._getGoToPreference(editor);if(editor instanceof embeddedCodeEditorWidget/* EmbeddedCodeEditorWidget */.H||!(this._configuration.openInPeek||"peek"===gotoLocation&&model.references.length>1)){const next=model.firstReference(),peek=model.references.length>1&&"gotoAndPeek"===gotoLocation,targetEditor=yield this._openReference(editor,editorService,next,this._configuration.openToSide,!peek);peek&&targetEditor?this._openInPeek(targetEditor,model):model.dispose(),
// keep remaining locations around when using
// 'goto'-mode
"goto"===gotoLocation&&symbolNavService.put(next)}else this._openInPeek(editor,model)}))}_openReference(editor,editorService,reference,sideBySide,highlight){return goToCommands_awaiter(this,void 0,void 0,(function*(){
// range is the target-selection-range when we have one
// and the fallback is the 'full' range
let range;if((0,modes/* isLocationLink */.vx)(reference)&&(range=reference.targetSelectionRange),range||(range=reference.range),!range)return;const targetEditor=yield editorService.openCodeEditor({resource:reference.uri,options:{selection:core_range/* Range */.e.collapseToStart(range),selectionRevealType:3/* NearTopIfOutsideViewport */}},editor,sideBySide);if(targetEditor){if(highlight){const modelNow=targetEditor.getModel(),ids=targetEditor.deltaDecorations([],[{range:range,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{targetEditor.getModel()===modelNow&&targetEditor.deltaDecorations(ids,[])}),350)}return targetEditor}}))}_openInPeek(target,model){let controller=referencesController/* ReferencesController */.J.get(target);controller&&target.hasModel()?controller.toggleWidget(target.getSelection(),(0,common_async/* createCancelablePromise */.PG)((_=>Promise.resolve(model))),this._configuration.openInPeek):model.dispose()}}
//#region --- DEFINITION
class DefinitionAction extends SymbolNavigationAction{_getLocationModel(model,position,token){return goToCommands_awaiter(this,void 0,void 0,(function*(){return new referencesModel/* ReferencesModel */.oQ(yield getDefinitionsAtPosition(model,position,token),nls/* localize */.N("def.title","Definitions"))}))}_getNoResultFoundMessage(info){return info&&info.word?nls/* localize */.N("noResultWord","No definition found for '{0}'",info.word):nls/* localize */.N("generic.noResults","No definition found")}_getAlternativeCommand(editor){return editor.getOption(50/* gotoLocation */).alternativeDefinitionCommand}_getGoToPreference(editor){return editor.getOption(50/* gotoLocation */).multipleDefinitions}}const goToDefinitionKb=platform/* isWeb */.$L&&!browser/* isStandalone */.$W?2118/* F12 */:70/* F12 */;registerGoToAction((_a=class GoToDefinitionAction extends DefinitionAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToDefinitionAction.id,label:nls/* localize */.N("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasDefinitionProvider,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:goToDefinitionKb,weight:100/* EditorContrib */},contextMenuOpts:{group:"navigation",order:1.1}}),commands/* CommandsRegistry */.P.registerCommandAlias("editor.action.goToDeclaration",GoToDefinitionAction.id)}},_a.id="editor.action.revealDefinition",_a)),registerGoToAction((_b=class OpenDefinitionToSideAction extends DefinitionAction{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:OpenDefinitionToSideAction.id,label:nls/* localize */.N("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasDefinitionProvider,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,goToDefinitionKb),weight:100/* EditorContrib */}}),commands/* CommandsRegistry */.P.registerCommandAlias("editor.action.openDeclarationToTheSide",OpenDefinitionToSideAction.id)}},_b.id="editor.action.revealDefinitionAside",_b)),registerGoToAction((_c=class PeekDefinitionAction extends DefinitionAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:PeekDefinitionAction.id,label:nls/* localize */.N("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasDefinitionProvider,peekView/* PeekContext */.Jy.notInPeekEditor,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:582/* F12 */,linux:{primary:3140/* F10 */},weight:100/* EditorContrib */},contextMenuOpts:{menuId:common_actions/* MenuId */.eH.EditorContextPeek,group:"peek",order:2}}),commands/* CommandsRegistry */.P.registerCommandAlias("editor.action.previewDeclaration",PeekDefinitionAction.id)}},_c.id="editor.action.peekDefinition",_c));
//#endregion
//#region --- DECLARATION
class DeclarationAction extends SymbolNavigationAction{_getLocationModel(model,position,token){return goToCommands_awaiter(this,void 0,void 0,(function*(){return new referencesModel/* ReferencesModel */.oQ(yield getDeclarationsAtPosition(model,position,token),nls/* localize */.N("decl.title","Declarations"))}))}_getNoResultFoundMessage(info){return info&&info.word?nls/* localize */.N("decl.noResultWord","No declaration found for '{0}'",info.word):nls/* localize */.N("decl.generic.noResults","No declaration found")}_getAlternativeCommand(editor){return editor.getOption(50/* gotoLocation */).alternativeDeclarationCommand}_getGoToPreference(editor){return editor.getOption(50/* gotoLocation */).multipleDeclarations}}registerGoToAction((_d=class GoToDeclarationAction extends DeclarationAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToDeclarationAction.id,label:nls/* localize */.N("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasDeclarationProvider,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(info){return info&&info.word?nls/* localize */.N("decl.noResultWord","No declaration found for '{0}'",info.word):nls/* localize */.N("decl.generic.noResults","No declaration found")}},_d.id="editor.action.revealDeclaration",_d)),registerGoToAction(class extends DeclarationAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:nls/* localize */.N("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasDeclarationProvider,peekView/* PeekContext */.Jy.notInPeekEditor,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:common_actions/* MenuId */.eH.EditorContextPeek,group:"peek",order:3}})}});
//#endregion
//#region --- TYPE DEFINITION
class TypeDefinitionAction extends SymbolNavigationAction{_getLocationModel(model,position,token){return goToCommands_awaiter(this,void 0,void 0,(function*(){return new referencesModel/* ReferencesModel */.oQ(yield getTypeDefinitionsAtPosition(model,position,token),nls/* localize */.N("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(info){return info&&info.word?nls/* localize */.N("goToTypeDefinition.noResultWord","No type definition found for '{0}'",info.word):nls/* localize */.N("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(editor){return editor.getOption(50/* gotoLocation */).alternativeTypeDefinitionCommand}_getGoToPreference(editor){return editor.getOption(50/* gotoLocation */).multipleTypeDefinitions}}registerGoToAction((_e=class GoToTypeDefinitionAction extends TypeDefinitionAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToTypeDefinitionAction.ID,label:nls/* localize */.N("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasTypeDefinitionProvider,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:0,weight:100/* EditorContrib */},contextMenuOpts:{group:"navigation",order:1.4}})}},_e.ID="editor.action.goToTypeDefinition",_e)),registerGoToAction((_f=class PeekTypeDefinitionAction extends TypeDefinitionAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:PeekTypeDefinitionAction.ID,label:nls/* localize */.N("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasTypeDefinitionProvider,peekView/* PeekContext */.Jy.notInPeekEditor,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:common_actions/* MenuId */.eH.EditorContextPeek,group:"peek",order:4}})}},_f.ID="editor.action.peekTypeDefinition",_f));
//#endregion
//#region --- IMPLEMENTATION
class ImplementationAction extends SymbolNavigationAction{_getLocationModel(model,position,token){return goToCommands_awaiter(this,void 0,void 0,(function*(){return new referencesModel/* ReferencesModel */.oQ(yield getImplementationsAtPosition(model,position,token),nls/* localize */.N("impl.title","Implementations"))}))}_getNoResultFoundMessage(info){return info&&info.word?nls/* localize */.N("goToImplementation.noResultWord","No implementation found for '{0}'",info.word):nls/* localize */.N("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(editor){return editor.getOption(50/* gotoLocation */).alternativeImplementationCommand}_getGoToPreference(editor){return editor.getOption(50/* gotoLocation */).multipleImplementations}}registerGoToAction((_g=class GoToImplementationAction extends ImplementationAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToImplementationAction.ID,label:nls/* localize */.N("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasImplementationProvider,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2118/* F12 */,weight:100/* EditorContrib */},contextMenuOpts:{group:"navigation",order:1.45}})}},_g.ID="editor.action.goToImplementation",_g)),registerGoToAction((_h=class PeekImplementationAction extends ImplementationAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:PeekImplementationAction.ID,label:nls/* localize */.N("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasImplementationProvider,peekView/* PeekContext */.Jy.notInPeekEditor,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3142/* F12 */,weight:100/* EditorContrib */},contextMenuOpts:{menuId:common_actions/* MenuId */.eH.EditorContextPeek,group:"peek",order:5}})}},_h.ID="editor.action.peekImplementation",_h));
//#endregion
//#region --- REFERENCES
class ReferencesAction extends SymbolNavigationAction{_getNoResultFoundMessage(info){return info?nls/* localize */.N("references.no","No references found for '{0}'",info.word):nls/* localize */.N("references.noGeneric","No references found")}_getAlternativeCommand(editor){return editor.getOption(50/* gotoLocation */).alternativeReferenceCommand}_getGoToPreference(editor){return editor.getOption(50/* gotoLocation */).multipleReferences}}registerGoToAction(class extends ReferencesAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:nls/* localize */.N("goToReferences.label","Go to References"),alias:"Go to References",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasReferenceProvider,peekView/* PeekContext */.Jy.notInPeekEditor,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1094/* F12 */,weight:100/* EditorContrib */},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(model,position,token){return goToCommands_awaiter(this,void 0,void 0,(function*(){return new referencesModel/* ReferencesModel */.oQ(yield getReferencesAtPosition(model,position,!0,token),nls/* localize */.N("ref.title","References"))}))}}),registerGoToAction(class extends ReferencesAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:nls/* localize */.N("references.action.label","Peek References"),alias:"Peek References",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.hasReferenceProvider,peekView/* PeekContext */.Jy.notInPeekEditor,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:common_actions/* MenuId */.eH.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(model,position,token){return goToCommands_awaiter(this,void 0,void 0,(function*(){return new referencesModel/* ReferencesModel */.oQ(yield getReferencesAtPosition(model,position,!1,token),nls/* localize */.N("ref.title","References"))}))}});
//#endregion
//#region --- GENERIC goto symbols command
class GenericGoToLocationAction extends SymbolNavigationAction{constructor(config,_references,_gotoMultipleBehaviour){super(config,{id:"editor.action.goToLocation",label:nls/* localize */.N("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:contextkey/* ContextKeyExpr */.Ao.and(peekView/* PeekContext */.Jy.notInPeekEditor,editorContextKeys/* EditorContextKeys */.u.isInWalkThroughSnippet.toNegated())}),this._references=_references,this._gotoMultipleBehaviour=_gotoMultipleBehaviour}_getLocationModel(_model,_position,_token){return goToCommands_awaiter(this,void 0,void 0,(function*(){return new referencesModel/* ReferencesModel */.oQ(this._references,nls/* localize */.N("generic.title","Locations"))}))}_getNoResultFoundMessage(info){return info&&nls/* localize */.N("generic.noResult","No results for '{0}'",info.word)||""}_getGoToPreference(editor){var _a;return null!==(_a=this._gotoMultipleBehaviour)&&void 0!==_a?_a:editor.getOption(50/* gotoLocation */).multipleReferences}_getAlternativeCommand(){return""}}commands/* CommandsRegistry */.P.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:common_uri/* URI */.o},{name:"position",description:"The position at which to start",constraint:core_position/* Position */.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(accessor,resource,position,references,multiple,noResultsMessage,openInPeek)=>goToCommands_awaiter(void 0,void 0,void 0,(function*(){(0,types/* assertType */.p_)(common_uri/* URI */.o.isUri(resource)),(0,types/* assertType */.p_)(core_position/* Position */.L.isIPosition(position)),(0,types/* assertType */.p_)(Array.isArray(references)),(0,types/* assertType */.p_)("undefined"===typeof multiple||"string"===typeof multiple),(0,types/* assertType */.p_)("undefined"===typeof openInPeek||"boolean"===typeof openInPeek);const editorService=accessor.get(services_codeEditorService/* ICodeEditorService */.$),editor=yield editorService.openCodeEditor({resource:resource},editorService.getFocusedCodeEditor());if((0,editorBrowser/* isCodeEditor */.CL)(editor))return editor.setPosition(position),editor.revealPositionInCenterIfOutsideViewport(position,0/* Smooth */),editor.invokeWithinContext((accessor=>{const command=new class extends GenericGoToLocationAction{_getNoResultFoundMessage(info){return noResultsMessage||super._getNoResultFoundMessage(info)}}({muteMessage:!Boolean(noResultsMessage),openInPeek:Boolean(openInPeek),openToSide:!1},references,multiple);accessor.get(instantiation/* IInstantiationService */.TG).invokeFunction(command.run.bind(command),editor)}))}))}),commands/* CommandsRegistry */.P.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:common_uri/* URI */.o},{name:"position",description:"The position at which to start",constraint:core_position/* Position */.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(accessor,resource,position,references,multiple)=>goToCommands_awaiter(void 0,void 0,void 0,(function*(){accessor.get(commands/* ICommandService */.H).executeCommand("editor.action.goToLocations",resource,position,references,multiple,void 0,!0)}))}),
//#endregion
//#region --- REFERENCE search special commands
commands/* CommandsRegistry */.P.registerCommand({id:"editor.action.findReferences",handler:(accessor,resource,position)=>{(0,types/* assertType */.p_)(common_uri/* URI */.o.isUri(resource)),(0,types/* assertType */.p_)(core_position/* Position */.L.isIPosition(position));const codeEditorService=accessor.get(services_codeEditorService/* ICodeEditorService */.$);return codeEditorService.openCodeEditor({resource:resource},codeEditorService.getFocusedCodeEditor()).then((control=>{if(!(0,editorBrowser/* isCodeEditor */.CL)(control)||!control.hasModel())return;const controller=referencesController/* ReferencesController */.J.get(control);if(!controller)return;const references=(0,common_async/* createCancelablePromise */.PG)((token=>getReferencesAtPosition(control.getModel(),core_position/* Position */.L.lift(position),!1,token).then((references=>new referencesModel/* ReferencesModel */.oQ(references,nls/* localize */.N("ref.title","References")))))),range=new core_range/* Range */.e(position.lineNumber,position.column,position.lineNumber,position.column);return Promise.resolve(controller.toggleWidget(range,references,!1))}))}}),
// use NEW command
commands/* CommandsRegistry */.P.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),
//#endregion
// -- unconditionally register goto-action
common_actions/* MenuRegistry */.BH.appendMenuItems([{id:common_actions/* MenuId */.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:nls/* localize */.N({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:common_actions/* MenuId */.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:nls/* localize */.N({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:common_actions/* MenuId */.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:nls/* localize */.N({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:common_actions/* MenuId */.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:nls/* localize */.N({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:common_actions/* MenuId */.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:nls/* localize */.N({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var goToDefinitionAtPosition_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},goToDefinitionAtPosition_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let GotoDefinitionAtPositionEditorContribution=class GotoDefinitionAtPositionEditorContribution{constructor(editor,textModelResolverService,modeService){this.textModelResolverService=textModelResolverService,this.modeService=modeService,this.toUnhook=new lifecycle/* DisposableStore */.SL,this.toUnhookForKeyboard=new lifecycle/* DisposableStore */.SL,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=editor;let linkGesture=new ClickLinkGesture(editor);this.toUnhook.add(linkGesture),this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown((([mouseEvent,keyboardEvent])=>{this.startFindDefinitionFromMouse(mouseEvent,(0,types/* withNullAsUndefined */.f6)(keyboardEvent))}))),this.toUnhook.add(linkGesture.onExecute((mouseEvent=>{this.isEnabled(mouseEvent)&&this.gotoDefinition(mouseEvent.target.position,mouseEvent.hasSideBySideModifier).then((()=>{this.removeLinkDecorations()}),(error=>{this.removeLinkDecorations(),(0,errors/* onUnexpectedError */.dL)(error)}))}))),this.toUnhook.add(linkGesture.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}static get(editor){return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID)}startFindDefinitionFromCursor(position){
// For issue: https://github.com/microsoft/vscode/issues/46257
// equivalent to mouse move with meta/ctrl key
// First find the definition and add decorations
// to the editor to be shown with the content hover widget
return this.startFindDefinition(position).then((()=>{
// Add listeners for editor cursor move and key down events
// Dismiss the "extended" editor decorations when the user hides
// the hover widget. There is no event for the widget itself so these
// serve as a best effort. After removing the link decorations, the hover
// widget is clean and will only show declarations per next request.
this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}))}startFindDefinitionFromMouse(mouseEvent,withKey){
// check if we are active and on a content widget
if(9/* CONTENT_WIDGET */===mouseEvent.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(mouseEvent,withKey))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const position=mouseEvent.target.position;this.startFindDefinition(position)}startFindDefinition(position){var _a;
// Dispose listeners for updating decorations when using keyboard to show definition hover
this.toUnhookForKeyboard.clear();
// Find word at mouse position
const word=position?null===(_a=this.editor.getModel())||void 0===_a?void 0:_a.getWordAtPosition(position):null;if(!word)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);
// Return early if word at position is still the same
if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===word.startColumn&&this.currentWordAtPosition.endColumn===word.endColumn&&this.currentWordAtPosition.word===word.word)return Promise.resolve(0);this.currentWordAtPosition=word;
// Find definition and decorate word if found
let state=new editorState/* EditorState */.yy(this.editor,15/* Scroll */);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,common_async/* createCancelablePromise */.PG)((token=>this.findDefinition(position,token))),this.previousPromise.then((results=>{if(results&&results.length&&state.validate(this.editor))
// Multiple results
if(results.length>1)this.addDecoration(new core_range/* Range */.e(position.lineNumber,word.startColumn,position.lineNumber,word.endColumn),(new htmlContent/* MarkdownString */.W5).appendText(nls/* localize */.N("multipleResults","Click to show {0} definitions.",results.length)));else{let result=results[0];if(!result.uri)return;this.textModelResolverService.createModelReference(result.uri).then((ref=>{if(!ref.object||!ref.object.textEditorModel)return void ref.dispose();const{object:{textEditorModel:textEditorModel}}=ref,{startLineNumber:startLineNumber}=result.range;if(startLineNumber<1||startLineNumber>textEditorModel.getLineCount())
// invalid range
return void ref.dispose();const previewValue=this.getPreviewValue(textEditorModel,startLineNumber,result);let wordRange;wordRange=result.originSelectionRange?core_range/* Range */.e.lift(result.originSelectionRange):new core_range/* Range */.e(position.lineNumber,word.startColumn,position.lineNumber,word.endColumn);const languageId=this.modeService.getModeIdByFilepathOrFirstLine(textEditorModel.uri);this.addDecoration(wordRange,(new htmlContent/* MarkdownString */.W5).appendCodeblock(languageId||"",previewValue)),ref.dispose()}))}else this.removeLinkDecorations()})).then(void 0,errors/* onUnexpectedError */.dL)}getPreviewValue(textEditorModel,startLineNumber,result){let rangeToUse=result.targetSelectionRange?result.range:this.getPreviewRangeBasedOnBrackets(textEditorModel,startLineNumber);const numberOfLinesInRange=rangeToUse.endLineNumber-rangeToUse.startLineNumber;numberOfLinesInRange>=GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES&&(rangeToUse=this.getPreviewRangeBasedOnIndentation(textEditorModel,startLineNumber));const previewValue=this.stripIndentationFromPreviewRange(textEditorModel,startLineNumber,rangeToUse);return previewValue}stripIndentationFromPreviewRange(textEditorModel,startLineNumber,previewRange){const startIndent=textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);let minIndent=startIndent;for(let endLineNumber=startLineNumber+1;endLineNumber<previewRange.endLineNumber;endLineNumber++){const endIndent=textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);minIndent=Math.min(minIndent,endIndent)}const previewValue=textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\s{${minIndent-1}}`,"gm"),"").trim();return previewValue}getPreviewRangeBasedOnIndentation(textEditorModel,startLineNumber){const startIndent=textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber),maxLineNumber=Math.min(textEditorModel.getLineCount(),startLineNumber+GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);let endLineNumber=startLineNumber+1;for(;endLineNumber<maxLineNumber;endLineNumber++){let endIndent=textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);if(startIndent===endIndent)break}return new core_range/* Range */.e(startLineNumber,1,endLineNumber+1,1)}getPreviewRangeBasedOnBrackets(textEditorModel,startLineNumber){const maxLineNumber=Math.min(textEditorModel.getLineCount(),startLineNumber+GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES),brackets=[];let ignoreFirstEmpty=!0,currentBracket=textEditorModel.findNextBracket(new core_position/* Position */.L(startLineNumber,1));while(null!==currentBracket){if(0===brackets.length)brackets.push(currentBracket);else{const lastBracket=brackets[brackets.length-1];if(lastBracket.open[0]===currentBracket.open[0]&&lastBracket.isOpen&&!currentBracket.isOpen?brackets.pop():brackets.push(currentBracket),0===brackets.length){if(!ignoreFirstEmpty)return new core_range/* Range */.e(startLineNumber,1,currentBracket.range.endLineNumber+1,1);ignoreFirstEmpty=!1}}const maxColumn=textEditorModel.getLineMaxColumn(startLineNumber);let nextLineNumber=currentBracket.range.endLineNumber,nextColumn=currentBracket.range.endColumn;if(maxColumn===currentBracket.range.endColumn&&(nextLineNumber++,nextColumn=1),nextLineNumber>maxLineNumber)return new core_range/* Range */.e(startLineNumber,1,maxLineNumber+1,1);currentBracket=textEditorModel.findNextBracket(new core_position/* Position */.L(nextLineNumber,nextColumn))}return new core_range/* Range */.e(startLineNumber,1,maxLineNumber+1,1)}addDecoration(range,hoverMessage){const newDecorations={range:range,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:hoverMessage}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[newDecorations])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(mouseEvent,withKey){return this.editor.hasModel()&&mouseEvent.isNoneOrSingleMouseDown&&6/* CONTENT_TEXT */===mouseEvent.target.type&&(mouseEvent.hasTriggerModifier||!!withKey&&withKey.keyCodeIsTriggerKey)&&modes/* DefinitionProviderRegistry */.Ct.has(this.editor.getModel())}findDefinition(position,token){const model=this.editor.getModel();return model?getDefinitionsAtPosition(model,position,token):Promise.resolve(null)}gotoDefinition(position,openToSide){return this.editor.setPosition(position),this.editor.invokeWithinContext((accessor=>{const canPeek=!openToSide&&this.editor.getOption(77/* definitionLinkOpensInPeek */)&&!this.isInPeekEditor(accessor),action=new DefinitionAction({openToSide:openToSide,openInPeek:canPeek,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0});return action.run(accessor,this.editor)}))}isInPeekEditor(accessor){const contextKeyService=accessor.get(contextkey/* IContextKeyService */.i6);return peekView/* PeekContext */.Jy.inPeekEditor.getValue(contextKeyService)}dispose(){this.toUnhook.dispose()}};GotoDefinitionAtPositionEditorContribution.ID="editor.contrib.gotodefinitionatposition",GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES=8,GotoDefinitionAtPositionEditorContribution=goToDefinitionAtPosition_decorate([goToDefinitionAtPosition_param(1,resolverService/* ITextModelService */.S),goToDefinitionAtPosition_param(2,modeService/* IModeService */.h)],GotoDefinitionAtPositionEditorContribution),(0,editorExtensions/* registerEditorContribution */._K)(GotoDefinitionAtPositionEditorContribution.ID,GotoDefinitionAtPositionEditorContribution),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const activeLinkForeground=theme.getColor(colorRegistry/* editorActiveLinkForeground */._Y);activeLinkForeground&&collector.addRule(`.monaco-editor .goto-definition-link { color: ${activeLinkForeground} !important; }`)}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js
var hoverWidget=__webpack_require__(130986),widget=__webpack_require__(993794);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/widget.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorPickerModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class ColorPickerModel{constructor(color,availableColorPresentations,presentationIndex){this.presentationIndex=presentationIndex,this._onColorFlushed=new common_event/* Emitter */.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new common_event/* Emitter */.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new common_event/* Emitter */.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=color,this._color=color,this._colorPresentations=availableColorPresentations}get color(){return this._color}set color(color){this._color.equals(color)||(this._color=color,this._onDidChangeColor.fire(color))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(colorPresentations){this._colorPresentations=colorPresentations,this.presentationIndex>colorPresentations.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(color,originalText){for(let i=0;i<this.colorPresentations.length;i++)if(originalText.toLowerCase()===this.colorPresentations[i].label){this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorPickerWidget.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const $=dom.$;class ColorPickerHeader extends lifecycle/* Disposable */.JT{constructor(container,model,themeService){super(),this.model=model,this.domNode=$(".colorpicker-header"),dom/* append */.R3(container,this.domNode),this.pickedColorNode=dom/* append */.R3(this.domNode,$(".picked-color"));const tooltip=(0,nls/* localize */.N)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",tooltip);const colorBox=dom/* append */.R3(this.domNode,$(".original-color"));colorBox.style.backgroundColor=common_color/* Color */.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=themeService.getColorTheme().getColor(colorRegistry/* editorHoverBackground */.yJ)||common_color/* Color */.Il.white,this._register((0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{this.backgroundColor=theme.getColor(colorRegistry/* editorHoverBackground */.yJ)||common_color/* Color */.Il.white}))),this._register(dom/* addDisposableListener */.nm(this.pickedColorNode,dom/* EventType */.tw.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(dom/* addDisposableListener */.nm(colorBox,dom/* EventType */.tw.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(model.onDidChangeColor(this.onDidChangeColor,this)),this._register(model.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=common_color/* Color */.Il.Format.CSS.format(model.color)||"",this.pickedColorNode.classList.toggle("light",model.color.rgba.a<.5?this.backgroundColor.isLighter():model.color.isLighter())}onDidChangeColor(color){this.pickedColorNode.style.backgroundColor=common_color/* Color */.Il.Format.CSS.format(color)||"",this.pickedColorNode.classList.toggle("light",color.rgba.a<.5?this.backgroundColor.isLighter():color.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend($(".codicon.codicon-color-mode"))}}class ColorPickerBody extends lifecycle/* Disposable */.JT{constructor(container,model,pixelRatio){super(),this.model=model,this.pixelRatio=pixelRatio,this.domNode=$(".colorpicker-body"),dom/* append */.R3(container,this.domNode),this.saturationBox=new SaturationBox(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new OpacityStrip(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new HueStrip(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:s,v:v}){const hsva=this.model.color.hsva;this.model.color=new common_color/* Color */.Il(new common_color/* HSVA */.tx(hsva.h,s,v,hsva.a))}onDidOpacityChange(a){const hsva=this.model.color.hsva;this.model.color=new common_color/* Color */.Il(new common_color/* HSVA */.tx(hsva.h,hsva.s,hsva.v,a))}onDidHueChange(value){const hsva=this.model.color.hsva,h=360*(1-value);this.model.color=new common_color/* Color */.Il(new common_color/* HSVA */.tx(360===h?0:h,hsva.s,hsva.v,hsva.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class SaturationBox extends lifecycle/* Disposable */.JT{constructor(container,model,pixelRatio){super(),this.model=model,this.pixelRatio=pixelRatio,this._onDidChange=new common_event/* Emitter */.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new common_event/* Emitter */.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=$(".saturation-wrap"),dom/* append */.R3(container,this.domNode),
// Create canvas, draw selected color
this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",dom/* append */.R3(this.domNode,this.canvas),
// Add selection circle
this.selection=$(".saturation-selection"),dom/* append */.R3(this.domNode,this.selection),this.layout(),this._register(dom/* addDisposableGenericMouseDownListner */.Lo(this.domNode,(e=>this.onMouseDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new globalMouseMoveMonitor/* GlobalMouseMoveMonitor */.Z);const origin=dom/* getDomNodePagePosition */.i(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,globalMouseMoveMonitor/* standardMouseMoveMerger */.e,(event=>this.onDidChangePosition(event.posx-origin.left,event.posy-origin.top)),(()=>null));const mouseUpListener=dom/* addDisposableGenericMouseUpListner */.qV(document,(()=>{this._onColorFlushed.fire(),mouseUpListener.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(left,top){const s=Math.max(0,Math.min(1,left/this.width)),v=Math.max(0,Math.min(1,1-top/this.height));this.paintSelection(s,v),this._onDidChange.fire({s:s,v:v})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const hsva=this.model.color.hsva;this.paintSelection(hsva.s,hsva.v)}paint(){const hsva=this.model.color.hsva,saturatedColor=new common_color/* Color */.Il(new common_color/* HSVA */.tx(hsva.h,1,1,1)),ctx=this.canvas.getContext("2d"),whiteGradient=ctx.createLinearGradient(0,0,this.canvas.width,0);whiteGradient.addColorStop(0,"rgba(255, 255, 255, 1)"),whiteGradient.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),whiteGradient.addColorStop(1,"rgba(255, 255, 255, 0)");const blackGradient=ctx.createLinearGradient(0,0,0,this.canvas.height);blackGradient.addColorStop(0,"rgba(0, 0, 0, 0)"),blackGradient.addColorStop(1,"rgba(0, 0, 0, 1)"),ctx.rect(0,0,this.canvas.width,this.canvas.height),ctx.fillStyle=common_color/* Color */.Il.Format.CSS.format(saturatedColor),ctx.fill(),ctx.fillStyle=whiteGradient,ctx.fill(),ctx.fillStyle=blackGradient,ctx.fill()}paintSelection(s,v){this.selection.style.left=s*this.width+"px",this.selection.style.top=this.height-v*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class Strip extends lifecycle/* Disposable */.JT{constructor(container,model){super(),this.model=model,this._onDidChange=new common_event/* Emitter */.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new common_event/* Emitter */.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=dom/* append */.R3(container,$(".strip")),this.overlay=dom/* append */.R3(this.domNode,$(".overlay")),this.slider=dom/* append */.R3(this.domNode,$(".slider")),this.slider.style.top="0px",this._register(dom/* addDisposableGenericMouseDownListner */.Lo(this.domNode,(e=>this.onMouseDown(e)))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const value=this.getValue(this.model.color);this.updateSliderPosition(value)}onMouseDown(e){const monitor=this._register(new globalMouseMoveMonitor/* GlobalMouseMoveMonitor */.Z),origin=dom/* getDomNodePagePosition */.i(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),monitor.startMonitoring(e.target,e.buttons,globalMouseMoveMonitor/* standardMouseMoveMerger */.e,(event=>this.onDidChangeTop(event.posy-origin.top)),(()=>null));const mouseUpListener=dom/* addDisposableGenericMouseUpListner */.qV(document,(()=>{this._onColorFlushed.fire(),mouseUpListener.dispose(),monitor.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(top){const value=Math.max(0,Math.min(1,1-top/this.height));this.updateSliderPosition(value),this._onDidChange.fire(value)}updateSliderPosition(value){this.slider.style.top=(1-value)*this.height+"px"}}class OpacityStrip extends Strip{constructor(container,model){super(container,model),this.domNode.classList.add("opacity-strip"),this._register(model.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(color){const{r:r,g:g,b:b}=color.rgba,opaque=new common_color/* Color */.Il(new common_color/* RGBA */.VS(r,g,b,1)),transparent=new common_color/* Color */.Il(new common_color/* RGBA */.VS(r,g,b,0));this.overlay.style.background=`linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`}getValue(color){return color.hsva.a}}class HueStrip extends Strip{constructor(container,model){super(container,model),this.domNode.classList.add("hue-strip")}getValue(color){return 1-color.hsva.h/360}}class ColorPickerWidget extends widget/* Widget */.${constructor(container,model,pixelRatio,themeService){super(),this.model=model,this.pixelRatio=pixelRatio,this._register((0,browser/* onDidChangeZoomLevel */.fX)((()=>this.layout())));const element=$(".colorpicker-widget");container.appendChild(element);const header=new ColorPickerHeader(element,this.model,themeService);this.body=new ColorPickerBody(element,this.model,this.pixelRatio),this._register(header),this._register(this.body)}layout(){this.body.layout()}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/colorHoverParticipant.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var colorHoverParticipant_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},colorHoverParticipant_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},colorHoverParticipant_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class ColorHover{constructor(owner,range,model,provider){this.owner=owner,this.range=range,this.model=model,this.provider=provider,
/**
         * Force the hover to always be rendered at this specific range,
         * even in the case of multiple hover parts.
         */
this.forceShowAtRange=!0}isValidForHoverAnchor(anchor){return 1/* Range */===anchor.type&&this.range.startColumn<=anchor.range.startColumn&&this.range.endColumn>=anchor.range.endColumn}}let ColorHoverParticipant=class{constructor(_editor,_hover,_themeService){this._editor=_editor,this._hover=_hover,this._themeService=_themeService}computeSync(anchor,lineDecorations){return[]}computeAsync(anchor,lineDecorations,token){return colorHoverParticipant_awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const colorDetector=ColorDetector.get(this._editor);for(const d of lineDecorations){if("color-detector-color"!==d.options.description)continue;const colorData=colorDetector.getColorData(d.range.getStartPosition());if(colorData){const colorHover=yield this._createColorHover(this._editor.getModel(),colorData.colorInfo,colorData.provider);return[colorHover]}}return[]}))}_createColorHover(editorModel,colorInfo,provider){return colorHoverParticipant_awaiter(this,void 0,void 0,(function*(){const originalText=editorModel.getValueInRange(colorInfo.range),{red:red,green:green,blue:blue,alpha:alpha}=colorInfo.color,rgba=new common_color/* RGBA */.VS(Math.round(255*red),Math.round(255*green),Math.round(255*blue),alpha),color=new common_color/* Color */.Il(rgba),colorPresentations=yield getColorPresentations(editorModel,colorInfo,provider,cancellation/* CancellationToken */.T.None),model=new ColorPickerModel(color,[],0);return model.colorPresentations=colorPresentations||[],model.guessColorPresentation(color,originalText),new ColorHover(this,core_range/* Range */.e.lift(colorInfo.range),model,provider)}))}renderHoverParts(hoverParts,fragment,statusBar){if(0===hoverParts.length||!this._editor.hasModel())return lifecycle/* Disposable */.JT.None;const disposables=new lifecycle/* DisposableStore */.SL,colorHover=hoverParts[0],editorModel=this._editor.getModel(),model=colorHover.model,widget=disposables.add(new ColorPickerWidget(fragment,model,this._editor.getOption(127/* pixelRatio */),this._themeService));let range=new core_range/* Range */.e(colorHover.range.startLineNumber,colorHover.range.startColumn,colorHover.range.endLineNumber,colorHover.range.endColumn);const updateEditorModel=()=>{let textEdits,newRange;if(model.presentation.textEdit){textEdits=[model.presentation.textEdit],newRange=new core_range/* Range */.e(model.presentation.textEdit.range.startLineNumber,model.presentation.textEdit.range.startColumn,model.presentation.textEdit.range.endLineNumber,model.presentation.textEdit.range.endColumn);const trackedRange=this._editor.getModel()._setTrackedRange(null,newRange,3/* GrowsOnlyWhenTypingAfter */);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",textEdits),newRange=this._editor.getModel()._getTrackedRange(trackedRange)||newRange}else textEdits=[{identifier:null,range:range,text:model.presentation.label,forceMoveMarkers:!1}],newRange=range.setEndPosition(range.endLineNumber,range.startColumn+model.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",textEdits);model.presentation.additionalTextEdits&&(textEdits=[...model.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",textEdits),this._hover.hide()),this._editor.pushUndoStop(),range=newRange},updateColorPresentations=color=>getColorPresentations(editorModel,{range:range,color:{red:color.rgba.r/255,green:color.rgba.g/255,blue:color.rgba.b/255,alpha:color.rgba.a}},colorHover.provider,cancellation/* CancellationToken */.T.None).then((colorPresentations=>{model.colorPresentations=colorPresentations||[]}));return disposables.add(model.onColorFlushed((color=>{updateColorPresentations(color).then(updateEditorModel)}))),disposables.add(model.onDidChangeColor(updateColorPresentations)),this._hover.setColorPicker(widget),disposables}};ColorHoverParticipant=colorHoverParticipant_decorate([colorHoverParticipant_param(2,common_themeService/* IThemeService */.XE)],ColorHoverParticipant);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverOperation.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class HoverOperation{constructor(computer,success,error,progress,hoverTime){this._computer=computer,this._state=0/* IDLE */,this._hoverTime=hoverTime,this._firstWaitScheduler=new common_async/* RunOnceScheduler */.pY((()=>this._triggerAsyncComputation()),0),this._secondWaitScheduler=new common_async/* RunOnceScheduler */.pY((()=>this._triggerSyncComputation()),0),this._loadingMessageScheduler=new common_async/* RunOnceScheduler */.pY((()=>this._showLoadingMessage()),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=success,this._errorCallback=error,this._progressCallback=progress}setHoverTime(hoverTime){this._hoverTime=hoverTime}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2/* SECOND_WAIT */,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=(0,common_async/* createCancelablePromise */.PG)((token=>this._computer.computeAsync(token))),this._asyncComputationPromise.then((asyncResult=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(asyncResult)}),(e=>this._onError(e)))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0/* IDLE */,this._onComplete(this._computer.getResult())):(this._state=3/* WAITING_FOR_ASYNC_COMPUTATION */,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){3/* WAITING_FOR_ASYNC_COMPUTATION */===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(asyncResult){asyncResult&&this._computer.onResult(asyncResult,!1),3/* WAITING_FOR_ASYNC_COMPUTATION */===this._state&&(this._state=0/* IDLE */,this._onComplete(this._computer.getResult()))}_onComplete(value){this._completeCallback(value)}_onError(error){this._errorCallback?this._errorCallback(error):(0,errors/* onUnexpectedError */.dL)(error)}_onProgress(value){this._progressCallback(value)}start(mode){if(0/* Delayed */===mode)0/* IDLE */===this._state&&(this._state=1/* FIRST_WAIT */,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0/* IDLE */:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2/* SECOND_WAIT */:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),1/* FIRST_WAIT */===this._state&&this._firstWaitScheduler.cancel(),2/* SECOND_WAIT */===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3/* WAITING_FOR_ASYNC_COMPUTATION */===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0/* IDLE */}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverTypes.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class HoverRangeAnchor{constructor(priority,range){this.priority=priority,this.range=range,this.type=1/* Range */}equals(other){return 1/* Range */===other.type&&this.range.equalsRange(other.range)}canAdoptVisibleHover(lastAnchor,showAtPosition){return 1/* Range */===lastAnchor.type&&showAtPosition.lineNumber===this.range.startLineNumber}}class HoverForeignElementAnchor{constructor(priority,owner,range){this.priority=priority,this.owner=owner,this.range=range,this.type=2/* ForeignElement */}equals(other){return 2/* ForeignElement */===other.type&&this.owner===other.owner}canAdoptVisibleHover(lastAnchor,showAtPosition){return 2/* ForeignElement */===lastAnchor.type&&this.owner===lastAnchor.owner}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/browser/core/markdownRenderer.js
var markdownRenderer=__webpack_require__(888527);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/getHover.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function getHover(model,position,token){const supports=modes/* HoverProviderRegistry */.xp.ordered(model),promises=supports.map((support=>Promise.resolve(support.provideHover(model,position,token)).then((hover=>hover&&isValid(hover)?hover:void 0),(err=>{(0,errors/* onUnexpectedExternalError */.Cp)(err)}))));return Promise.all(promises).then(arrays/* coalesce */.kX)}function isValid(result){const hasRange="undefined"!==typeof result.range,hasHtmlContent="undefined"!==typeof result.contents&&result.contents&&result.contents.length>0;return hasRange&&hasHtmlContent}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/opener/common/opener.js
(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeHoverProvider",((model,position)=>getHover(model,position,cancellation/* CancellationToken */.T.None)));var common_opener=__webpack_require__(150988),markdownHoverParticipant_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},markdownHoverParticipant_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},markdownHoverParticipant_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const markdownHoverParticipant_$=dom.$;class MarkdownHover{constructor(owner,range,contents){this.owner=owner,this.range=range,this.contents=contents}isValidForHoverAnchor(anchor){return 1/* Range */===anchor.type&&this.range.startColumn<=anchor.range.startColumn&&this.range.endColumn>=anchor.range.endColumn}}let MarkdownHoverParticipant=class{constructor(_editor,_hover,_modeService,_openerService,_configurationService){this._editor=_editor,this._hover=_hover,this._modeService=_modeService,this._openerService=_openerService,this._configurationService=_configurationService}createLoadingMessage(anchor){return new MarkdownHover(this,anchor.range,[(new htmlContent/* MarkdownString */.W5).appendText(nls/* localize */.N("modesContentHover.loading","Loading..."))])}computeSync(anchor,lineDecorations){if(!this._editor.hasModel()||1/* Range */!==anchor.type)return[];const model=this._editor.getModel(),lineNumber=anchor.range.startLineNumber,maxColumn=model.getLineMaxColumn(lineNumber),result=[];for(const d of lineDecorations){const startColumn=d.range.startLineNumber===lineNumber?d.range.startColumn:1,endColumn=d.range.endLineNumber===lineNumber?d.range.endColumn:maxColumn,hoverMessage=d.options.hoverMessage;if(!hoverMessage||(0,htmlContent/* isEmptyMarkdownString */.CP)(hoverMessage))continue;const range=new core_range/* Range */.e(anchor.range.startLineNumber,startColumn,anchor.range.startLineNumber,endColumn);result.push(new MarkdownHover(this,range,(0,arrays/* asArray */._2)(hoverMessage)))}const lineLength=model.getLineLength(lineNumber),languageId=model.getLanguageIdAtPosition(anchor.range.startLineNumber,anchor.range.startColumn),maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:languageId});return"number"===typeof maxTokenizationLineLength&&lineLength>=maxTokenizationLineLength&&result.push(new MarkdownHover(this,anchor.range,[{value:nls/* localize */.N("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),result}computeAsync(anchor,lineDecorations,token){return markdownHoverParticipant_awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||1/* Range */!==anchor.type)return Promise.resolve([]);const model=this._editor.getModel();if(!modes/* HoverProviderRegistry */.xp.has(model))return Promise.resolve([]);const hovers=yield getHover(model,new core_position/* Position */.L(anchor.range.startLineNumber,anchor.range.startColumn),token),result=[];for(const hover of hovers){if((0,htmlContent/* isEmptyMarkdownString */.CP)(hover.contents))continue;const rng=hover.range?core_range/* Range */.e.lift(hover.range):anchor.range;result.push(new MarkdownHover(this,rng,hover.contents))}return result}))}renderHoverParts(hoverParts,fragment,statusBar){const disposables=new lifecycle/* DisposableStore */.SL;for(const hoverPart of hoverParts)for(const contents of hoverPart.contents){if((0,htmlContent/* isEmptyMarkdownString */.CP)(contents))continue;const markdownHoverElement=markdownHoverParticipant_$("div.hover-row.markdown-hover"),hoverContentsElement=dom/* append */.R3(markdownHoverElement,markdownHoverParticipant_$("div.hover-contents")),renderer=disposables.add(new markdownRenderer/* MarkdownRenderer */.$({editor:this._editor},this._modeService,this._openerService));disposables.add(renderer.onDidRenderAsync((()=>{hoverContentsElement.className="hover-contents code-hover-contents",this._hover.onContentsChanged()})));const renderedContents=disposables.add(renderer.render(contents));hoverContentsElement.appendChild(renderedContents.element),fragment.appendChild(markdownHoverElement)}return disposables}};MarkdownHoverParticipant=markdownHoverParticipant_decorate([markdownHoverParticipant_param(2,modeService/* IModeService */.h),markdownHoverParticipant_param(3,common_opener/* IOpenerService */.v4),markdownHoverParticipant_param(4,configuration/* IConfigurationService */.Ui)],MarkdownHoverParticipant);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/markersDecorationService.js
var markersDecorationService=__webpack_require__(826479),linkedList=__webpack_require__(791741),markerNavigationService_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},markerNavigationService_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/linkedList.js
class MarkerCoordinate{constructor(marker,index,total){this.marker=marker,this.index=index,this.total=total}}let MarkerList=class MarkerList{constructor(resourceFilter,_markerService){this._markerService=_markerService,this._onDidChange=new common_event/* Emitter */.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new lifecycle/* DisposableStore */.SL,this._markers=[],this._nextIdx=-1,common_uri/* URI */.o.isUri(resourceFilter)?this._resourceFilter=uri=>uri.toString()===resourceFilter.toString():resourceFilter&&(this._resourceFilter=resourceFilter);const updateMarker=()=>{this._markers=this._markerService.read({resource:common_uri/* URI */.o.isUri(resourceFilter)?resourceFilter:void 0,severities:markers/* MarkerSeverity */.ZL.Error|markers/* MarkerSeverity */.ZL.Warning|markers/* MarkerSeverity */.ZL.Info}),"function"===typeof resourceFilter&&(this._markers=this._markers.filter((m=>this._resourceFilter(m.resource)))),this._markers.sort(MarkerList._compareMarker)};updateMarker(),this._dispoables.add(_markerService.onMarkerChanged((uris=>{this._resourceFilter&&!uris.some((uri=>this._resourceFilter(uri)))||(updateMarker(),this._nextIdx=-1,this._onDidChange.fire())})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(uri){return!this._resourceFilter&&!uri||!(!this._resourceFilter||!uri)&&this._resourceFilter(uri)}get selected(){const marker=this._markers[this._nextIdx];return marker&&new MarkerCoordinate(marker,this._nextIdx+1,this._markers.length)}_initIdx(model,position,fwd){let found=!1,idx=this._markers.findIndex((marker=>marker.resource.toString()===model.uri.toString()));idx<0&&(idx=(0,arrays/* binarySearch */.ry)(this._markers,{resource:model.uri},((a,b)=>(0,strings/* compare */.qu)(a.resource.toString(),b.resource.toString()))),idx<0&&(idx=~idx));for(let i=idx;i<this._markers.length;i++){let range=core_range/* Range */.e.lift(this._markers[i]);if(range.isEmpty()){const word=model.getWordAtPosition(range.getStartPosition());word&&(range=new core_range/* Range */.e(range.startLineNumber,word.startColumn,range.startLineNumber,word.endColumn))}if(position&&(range.containsPosition(position)||position.isBeforeOrEqual(range.getStartPosition()))){this._nextIdx=i,found=!0;break}if(this._markers[i].resource.toString()!==model.uri.toString())break}found||(
// after the last change
this._nextIdx=fwd?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(fwd,model,position){if(0===this._markers.length)return!1;let oldIdx=this._nextIdx;return-1===this._nextIdx?this._initIdx(model,position,fwd):fwd?this._nextIdx=(this._nextIdx+1)%this._markers.length:fwd||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),oldIdx!==this._nextIdx}find(uri,position){let idx=this._markers.findIndex((marker=>marker.resource.toString()===uri.toString()));if(!(idx<0))for(;idx<this._markers.length;idx++)if(core_range/* Range */.e.containsPosition(this._markers[idx],position))return new MarkerCoordinate(this._markers[idx],idx+1,this._markers.length)}static _compareMarker(a,b){let res=(0,strings/* compare */.qu)(a.resource.toString(),b.resource.toString());return 0===res&&(res=markers/* MarkerSeverity */.ZL.compare(a.severity,b.severity)),0===res&&(res=core_range/* Range */.e.compareRangesUsingStarts(a,b)),res}};MarkerList=markerNavigationService_decorate([markerNavigationService_param(1,markers/* IMarkerService */.lT)],MarkerList);const IMarkerNavigationService=(0,instantiation/* createDecorator */.yh)("IMarkerNavigationService");let MarkerNavigationService=class{constructor(_markerService){this._markerService=_markerService,this._provider=new linkedList/* LinkedList */.S}getMarkerList(resource){for(let provider of this._provider){const result=provider.getMarkerList(resource);if(result)return result}
// default
return new MarkerList(resource,this._markerService)}};MarkerNavigationService=markerNavigationService_decorate([markerNavigationService_param(0,markers/* IMarkerService */.lT)],MarkerNavigationService),(0,extensions/* registerSingleton */.z)(IMarkerNavigationService,MarkerNavigationService,!0);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/theme/common/iconRegistry.js
var iconRegistry=__webpack_require__(759554),scrollableElement=__webpack_require__(263161),labels=__webpack_require__(968843),menuEntryActionViewItem=__webpack_require__(127628),label=__webpack_require__(544349),severityIcon=__webpack_require__(441967),gotoErrorWidget_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},gotoErrorWidget_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js + 6 modules
class gotoErrorWidget_MessageWidget{constructor(parent,editor,onRelatedInformation,_openerService,_labelService){this._openerService=_openerService,this._labelService=_labelService,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new lifecycle/* DisposableStore */.SL,this._editor=editor;const domNode=document.createElement("div");domNode.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),domNode.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),domNode.appendChild(this._relatedBlock),this._disposables.add(dom/* addStandardDisposableListener */.mu(this._relatedBlock,"click",(event=>{event.preventDefault();const related=this._relatedDiagnostics.get(event.target);related&&onRelatedInformation(related)}))),this._scrollable=new scrollableElement/* ScrollableElement */.NB(domNode,{horizontal:1/* Auto */,vertical:1/* Auto */,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),parent.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((e=>{domNode.style.left=`-${e.scrollLeft}px`,domNode.style.top=`-${e.scrollTop}px`}))),this._disposables.add(this._scrollable)}dispose(){(0,lifecycle/* dispose */.B9)(this._disposables)}update(marker){const{source:source,message:message,relatedInformation:relatedInformation,code:code}=marker;let sourceAndCodeLength=((null===source||void 0===source?void 0:source.length)||0)+2;code&&(sourceAndCodeLength+="string"===typeof code?code.length:code.value.length);const lines=(0,strings/* splitLines */.uq)(message);this._lines=lines.length,this._longestLineLength=0;for(const line of lines)this._longestLineLength=Math.max(line.length+sourceAndCodeLength,this._longestLineLength);dom/* clearNode */.PO(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(marker)),this._editor.applyFontInfo(this._messageBlock);let lastLineElement=this._messageBlock;for(const line of lines)lastLineElement=document.createElement("div"),lastLineElement.innerText=line,""===line&&(lastLineElement.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(lastLineElement);if(source||code){const detailsElement=document.createElement("span");if(detailsElement.classList.add("details"),lastLineElement.appendChild(detailsElement),source){const sourceElement=document.createElement("span");sourceElement.innerText=source,sourceElement.classList.add("source"),detailsElement.appendChild(sourceElement)}if(code)if("string"===typeof code){const codeElement=document.createElement("span");codeElement.innerText=`(${code})`,codeElement.classList.add("code"),detailsElement.appendChild(codeElement)}else{this._codeLink=dom.$("a.code-link"),this._codeLink.setAttribute("href",`${code.target.toString()}`),this._codeLink.onclick=e=>{this._openerService.open(code.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};const codeElement=dom/* append */.R3(this._codeLink,dom.$("span"));codeElement.innerText=code.value,detailsElement.appendChild(this._codeLink)}}if(dom/* clearNode */.PO(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,arrays/* isNonEmptyArray */.Of)(relatedInformation)){const relatedInformationNode=this._relatedBlock.appendChild(document.createElement("div"));relatedInformationNode.style.paddingTop=`${Math.floor(.66*this._editor.getOption(58/* lineHeight */))}px`,this._lines+=1;for(const related of relatedInformation){let container=document.createElement("div"),relatedResource=document.createElement("a");relatedResource.classList.add("filename"),relatedResource.innerText=`${(0,labels/* getBaseLabel */.p)(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `,relatedResource.title=this._labelService.getUriLabel(related.resource),this._relatedDiagnostics.set(relatedResource,related);let relatedMessage=document.createElement("span");relatedMessage.innerText=related.message,container.appendChild(relatedResource),container.appendChild(relatedMessage),this._lines+=1,relatedInformationNode.appendChild(container)}}const fontInfo=this._editor.getOption(43/* fontInfo */),scrollWidth=Math.ceil(fontInfo.typicalFullwidthCharacterWidth*this._longestLineLength*.75),scrollHeight=fontInfo.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:scrollWidth,scrollHeight:scrollHeight})}layout(height,width){this._scrollable.getDomNode().style.height=`${height}px`,this._scrollable.getDomNode().style.width=`${width}px`,this._scrollable.setScrollDimensions({width:width,height:height})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(marker){let severityLabel="";switch(marker.severity){case markers/* MarkerSeverity */.ZL.Error:severityLabel=nls/* localize */.N("Error","Error");break;case markers/* MarkerSeverity */.ZL.Warning:severityLabel=nls/* localize */.N("Warning","Warning");break;case markers/* MarkerSeverity */.ZL.Info:severityLabel=nls/* localize */.N("Info","Info");break;case markers/* MarkerSeverity */.ZL.Hint:severityLabel=nls/* localize */.N("Hint","Hint");break}let ariaLabel=nls/* localize */.N("marker aria","{0} at {1}. ",severityLabel,marker.startLineNumber+":"+marker.startColumn);const model=this._editor.getModel();if(model&&marker.startLineNumber<=model.getLineCount()&&marker.startLineNumber>=1){const lineContent=model.getLineContent(marker.startLineNumber);ariaLabel=`${lineContent}, ${ariaLabel}`}return ariaLabel}}let MarkerNavigationWidget=class MarkerNavigationWidget extends peekView/* PeekViewWidget */.vk{constructor(editor,_themeService,_openerService,_menuService,instantiationService,_contextKeyService,_labelService){super(editor,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},instantiationService),this._themeService=_themeService,this._openerService=_openerService,this._menuService=_menuService,this._contextKeyService=_contextKeyService,this._labelService=_labelService,this._callOnDispose=new lifecycle/* DisposableStore */.SL,this._onDidSelectRelatedInformation=new common_event/* Emitter */.Q5,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=markers/* MarkerSeverity */.ZL.Warning,this._backgroundColor=common_color/* Color */.Il.white,this._applyTheme(_themeService.getColorTheme()),this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(theme){this._backgroundColor=theme.getColor(editorMarkerNavigationBackground);let colorId=editorMarkerNavigationError,headerBackground=editorMarkerNavigationErrorHeader;this._severity===markers/* MarkerSeverity */.ZL.Warning?(colorId=editorMarkerNavigationWarning,headerBackground=editorMarkerNavigationWarningHeader):this._severity===markers/* MarkerSeverity */.ZL.Info&&(colorId=editorMarkerNavigationInfo,headerBackground=editorMarkerNavigationInfoHeader);const frameColor=theme.getColor(colorId),headerBg=theme.getColor(headerBackground);this.style({arrowColor:frameColor,frameColor:frameColor,headerBackgroundColor:headerBg,primaryHeadingColor:theme.getColor(peekView/* peekViewTitleForeground */.IH),secondaryHeadingColor:theme.getColor(peekView/* peekViewTitleInfoForeground */.R7)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(container){super._fillHead(container),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun((e=>this.editor.focus())));const actions=[],menu=this._menuService.createMenu(MarkerNavigationWidget.TitleMenu,this._contextKeyService);(0,menuEntryActionViewItem/* createAndFillInActionBarActions */.vr)(menu,void 0,actions),this._actionbarWidget.push(actions,{label:!1,icon:!0,index:0}),menu.dispose()}_fillTitleIcon(container){this._icon=dom/* append */.R3(container,dom.$(""))}_fillBody(container){this._parentContainer=container,container.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),container.appendChild(this._container),this._message=new gotoErrorWidget_MessageWidget(this._container,this.editor,(related=>this._onDidSelectRelatedInformation.fire(related)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(marker,markerIdx,markerCount){
// update:
// * title
// * message
this._container.classList.remove("stale"),this._message.update(marker),
// update frame color (only applied on 'show')
this._severity=marker.severity,this._applyTheme(this._themeService.getColorTheme());
// show
let range=core_range/* Range */.e.lift(marker);const editorPosition=this.editor.getPosition();let position=editorPosition&&range.containsPosition(editorPosition)?editorPosition:range.getStartPosition();super.show(position,this.computeRequiredHeight());const model=this.editor.getModel();if(model){const detail=markerCount>1?nls/* localize */.N("problems","{0} of {1} problems",markerIdx,markerCount):nls/* localize */.N("change","{0} of {1} problem",markerIdx,markerCount);this.setTitle((0,common_resources/* basename */.EZ)(model.uri),detail)}this._icon.className=`codicon ${severityIcon/* SeverityIcon */.j.className(markers/* MarkerSeverity */.ZL.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(position,0/* Smooth */),this.editor.focus()}updateMarker(marker){this._container.classList.remove("stale"),this._message.update(marker)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(heightInPixel,widthInPixel){super._doLayoutBody(heightInPixel,widthInPixel),this._heightInPixel=heightInPixel,this._message.layout(heightInPixel,widthInPixel),this._container.style.height=`${heightInPixel}px`}_onWidth(widthInPixel){this._message.layout(this._heightInPixel,widthInPixel)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};MarkerNavigationWidget.TitleMenu=new common_actions/* MenuId */.eH("gotoErrorTitleMenu"),MarkerNavigationWidget=gotoErrorWidget_decorate([gotoErrorWidget_param(1,common_themeService/* IThemeService */.XE),gotoErrorWidget_param(2,common_opener/* IOpenerService */.v4),gotoErrorWidget_param(3,common_actions/* IMenuService */.co),gotoErrorWidget_param(4,instantiation/* IInstantiationService */.TG),gotoErrorWidget_param(5,contextkey/* IContextKeyService */.i6),gotoErrorWidget_param(6,label/* ILabelService */.e)],MarkerNavigationWidget);
// theming
let errorDefault=(0,colorRegistry/* oneOf */.kw)(colorRegistry/* editorErrorForeground */.lX,colorRegistry/* editorErrorBorder */.b6),warningDefault=(0,colorRegistry/* oneOf */.kw)(colorRegistry/* editorWarningForeground */.uo,colorRegistry/* editorWarningBorder */.pW),infoDefault=(0,colorRegistry/* oneOf */.kw)(colorRegistry/* editorInfoForeground */.c6,colorRegistry/* editorInfoBorder */.T8);const editorMarkerNavigationError=(0,colorRegistry/* registerColor */.P6)("editorMarkerNavigationError.background",{dark:errorDefault,light:errorDefault,hc:colorRegistry/* contrastBorder */.lR},nls/* localize */.N("editorMarkerNavigationError","Editor marker navigation widget error color.")),editorMarkerNavigationErrorHeader=(0,colorRegistry/* registerColor */.P6)("editorMarkerNavigationError.headerBackground",{dark:(0,colorRegistry/* transparent */.Zn)(editorMarkerNavigationError,.1),light:(0,colorRegistry/* transparent */.Zn)(editorMarkerNavigationError,.1),hc:null},nls/* localize */.N("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),editorMarkerNavigationWarning=(0,colorRegistry/* registerColor */.P6)("editorMarkerNavigationWarning.background",{dark:warningDefault,light:warningDefault,hc:colorRegistry/* contrastBorder */.lR},nls/* localize */.N("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),editorMarkerNavigationWarningHeader=(0,colorRegistry/* registerColor */.P6)("editorMarkerNavigationWarning.headerBackground",{dark:(0,colorRegistry/* transparent */.Zn)(editorMarkerNavigationWarning,.1),light:(0,colorRegistry/* transparent */.Zn)(editorMarkerNavigationWarning,.1),hc:"#0C141F"},nls/* localize */.N("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),editorMarkerNavigationInfo=(0,colorRegistry/* registerColor */.P6)("editorMarkerNavigationInfo.background",{dark:infoDefault,light:infoDefault,hc:colorRegistry/* contrastBorder */.lR},nls/* localize */.N("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),editorMarkerNavigationInfoHeader=(0,colorRegistry/* registerColor */.P6)("editorMarkerNavigationInfo.headerBackground",{dark:(0,colorRegistry/* transparent */.Zn)(editorMarkerNavigationInfo,.1),light:(0,colorRegistry/* transparent */.Zn)(editorMarkerNavigationInfo,.1),hc:null},nls/* localize */.N("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),editorMarkerNavigationBackground=(0,colorRegistry/* registerColor */.P6)("editorMarkerNavigation.background",{dark:colorRegistry/* editorBackground */.cv,light:colorRegistry/* editorBackground */.cv,hc:colorRegistry/* editorBackground */.cv},nls/* localize */.N("editorMarkerNavigationBackground","Editor marker navigation widget background."));(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const linkFg=theme.getColor(colorRegistry/* textLinkForeground */.ur);linkFg&&collector.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${linkFg}; }`);const activeLinkFg=theme.getColor(colorRegistry/* textLinkActiveForeground */.sg);activeLinkFg&&collector.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${activeLinkFg}; }`)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/gotoError.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var gotoError_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},gotoError_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},gotoError_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let MarkerController=class MarkerController{constructor(editor,_markerNavigationService,_contextKeyService,_editorService,_instantiationService){this._markerNavigationService=_markerNavigationService,this._contextKeyService=_contextKeyService,this._editorService=_editorService,this._instantiationService=_instantiationService,this._sessionDispoables=new lifecycle/* DisposableStore */.SL,this._editor=editor,this._widgetVisible=CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService)}static get(editor){return editor.getContribution(MarkerController.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(uri){if(this._model&&this._model.matches(uri))return this._model;let reusePosition=!1;return this._model&&(reusePosition=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(uri),reusePosition&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(MarkerNavigationWidget,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),
// follow cursor
this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((e=>{var _a,_b,_c;(null===(_a=this._model)||void 0===_a?void 0:_a.selected)&&core_range/* Range */.e.containsPosition(null===(_b=this._model)||void 0===_b?void 0:_b.selected.marker,e.position)||null===(_c=this._model)||void 0===_c||_c.resetIndex()}))),
// update markers
this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const info=this._model.find(this._editor.getModel().uri,this._widget.position);info?this._widget.updateMarker(info.marker):this._widget.showStale()}))),
// open related
this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((related=>{this._editorService.openCodeEditor({resource:related.resource,options:{pinned:!0,revealIfOpened:!0,selection:core_range/* Range */.e.lift(related).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(focusEditor=!0){this._cleanUp(),focusEditor&&this._editor.focus()}showAtMarker(marker){if(this._editor.hasModel()){const model=this._getOrCreateModel(this._editor.getModel().uri);model.resetIndex(),model.move(!0,this._editor.getModel(),new core_position/* Position */.L(marker.startLineNumber,marker.startColumn)),model.selected&&this._widget.showAtMarker(model.selected.marker,model.selected.index,model.selected.total)}}nagivate(next,multiFile){return gotoError_awaiter(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const model=this._getOrCreateModel(multiFile?void 0:this._editor.getModel().uri);if(model.move(next,this._editor.getModel(),this._editor.getPosition()),!model.selected)return;if(model.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){
// show in different editor
this._cleanUp();const otherEditor=yield this._editorService.openCodeEditor({resource:model.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2/* NearTop */,selection:model.selected.marker}},this._editor);otherEditor&&(MarkerController.get(otherEditor).close(),MarkerController.get(otherEditor).nagivate(next,multiFile))}else
// show in this editor
this._widget.showAtMarker(model.selected.marker,model.selected.index,model.selected.total)}}))}};MarkerController.ID="editor.contrib.markerController",MarkerController=gotoError_decorate([gotoError_param(1,IMarkerNavigationService),gotoError_param(2,contextkey/* IContextKeyService */.i6),gotoError_param(3,services_codeEditorService/* ICodeEditorService */.$),gotoError_param(4,instantiation/* IInstantiationService */.TG)],MarkerController);class MarkerNavigationAction extends editorExtensions/* EditorAction */.R6{constructor(_next,_multiFile,opts){super(opts),this._next=_next,this._multiFile=_multiFile}run(_accessor,editor){return gotoError_awaiter(this,void 0,void 0,(function*(){editor.hasModel()&&MarkerController.get(editor).nagivate(this._next,this._multiFile)}))}}class NextMarkerAction extends MarkerNavigationAction{constructor(){super(!0,!1,{id:NextMarkerAction.ID,label:NextMarkerAction.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:578/* F8 */,weight:100/* EditorContrib */},menuOpts:{menuId:MarkerNavigationWidget.TitleMenu,title:NextMarkerAction.LABEL,icon:(0,iconRegistry/* registerIcon */.q5)("marker-navigation-next",codicons/* Codicon */.lA.arrowDown,nls/* localize */.N("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}NextMarkerAction.ID="editor.action.marker.next",NextMarkerAction.LABEL=nls/* localize */.N("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class PrevMarkerAction extends MarkerNavigationAction{constructor(){super(!1,!1,{id:PrevMarkerAction.ID,label:PrevMarkerAction.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:1602/* F8 */,weight:100/* EditorContrib */},menuOpts:{menuId:MarkerNavigationWidget.TitleMenu,title:NextMarkerAction.LABEL,icon:(0,iconRegistry/* registerIcon */.q5)("marker-navigation-previous",codicons/* Codicon */.lA.arrowUp,nls/* localize */.N("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}PrevMarkerAction.ID="editor.action.marker.prev",PrevMarkerAction.LABEL=nls/* localize */.N("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class NextMarkerInFilesAction extends MarkerNavigationAction{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:nls/* localize */.N("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:66/* F8 */,weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarGoMenu,title:nls/* localize */.N({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class PrevMarkerInFilesAction extends MarkerNavigationAction{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:nls/* localize */.N("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:1090/* F8 */,weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarGoMenu,title:nls/* localize */.N({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}(0,editorExtensions/* registerEditorContribution */._K)(MarkerController.ID,MarkerController),(0,editorExtensions/* registerEditorAction */.Qr)(NextMarkerAction),(0,editorExtensions/* registerEditorAction */.Qr)(PrevMarkerAction),(0,editorExtensions/* registerEditorAction */.Qr)(NextMarkerInFilesAction),(0,editorExtensions/* registerEditorAction */.Qr)(PrevMarkerInFilesAction);const CONTEXT_MARKERS_NAVIGATION_VISIBLE=new contextkey/* RawContextKey */.uy("markersNavigationVisible",!1),MarkerCommand=editorExtensions/* EditorCommand */._l.bindToContribution(MarkerController.get);(0,editorExtensions/* registerEditorCommand */.fK)(new MarkerCommand({id:"closeMarkersNavigation",precondition:CONTEXT_MARKERS_NAVIGATION_VISIBLE,handler:x=>x.close(),kbOpts:{weight:150,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:9/* Escape */,secondary:[1033/* Escape */]}}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/markerHoverParticipant.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var markerHoverParticipant_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},markerHoverParticipant_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};const markerHoverParticipant_$=dom.$;class MarkerHover{constructor(owner,range,marker){this.owner=owner,this.range=range,this.marker=marker}isValidForHoverAnchor(anchor){return 1/* Range */===anchor.type&&this.range.startColumn<=anchor.range.startColumn&&this.range.endColumn>=anchor.range.endColumn}}const markerCodeActionTrigger={type:1/* Invoke */,filter:{include:CodeActionKind.QuickFix}};let MarkerHoverParticipant=class{constructor(_editor,_hover,_markerDecorationsService,_openerService){this._editor=_editor,this._hover=_hover,this._markerDecorationsService=_markerDecorationsService,this._openerService=_openerService,this.recentMarkerCodeActionsInfo=void 0}computeSync(anchor,lineDecorations){if(!this._editor.hasModel()||1/* Range */!==anchor.type)return[];const model=this._editor.getModel(),lineNumber=anchor.range.startLineNumber,maxColumn=model.getLineMaxColumn(lineNumber),result=[];for(const d of lineDecorations){const startColumn=d.range.startLineNumber===lineNumber?d.range.startColumn:1,endColumn=d.range.endLineNumber===lineNumber?d.range.endColumn:maxColumn,marker=this._markerDecorationsService.getMarker(model.uri,d);if(!marker)continue;const range=new core_range/* Range */.e(anchor.range.startLineNumber,startColumn,anchor.range.startLineNumber,endColumn);result.push(new MarkerHover(this,range,marker))}return result}renderHoverParts(hoverParts,fragment,statusBar){if(!hoverParts.length)return lifecycle/* Disposable */.JT.None;const disposables=new lifecycle/* DisposableStore */.SL;hoverParts.forEach((msg=>fragment.appendChild(this.renderMarkerHover(msg,disposables))));const markerHoverForStatusbar=1===hoverParts.length?hoverParts[0]:hoverParts.sort(((a,b)=>markers/* MarkerSeverity */.ZL.compare(a.marker.severity,b.marker.severity)))[0];return this.renderMarkerStatusbar(markerHoverForStatusbar,statusBar,disposables),disposables}renderMarkerHover(markerHover,disposables){const hoverElement=markerHoverParticipant_$("div.hover-row"),markerElement=dom/* append */.R3(hoverElement,markerHoverParticipant_$("div.marker.hover-contents")),{source:source,message:message,code:code,relatedInformation:relatedInformation}=markerHover.marker;this._editor.applyFontInfo(markerElement);const messageElement=dom/* append */.R3(markerElement,markerHoverParticipant_$("span"));if(messageElement.style.whiteSpace="pre-wrap",messageElement.innerText=message,source||code)
// Code has link
if(code&&"string"!==typeof code){const sourceAndCodeElement=markerHoverParticipant_$("span");if(source){const sourceElement=dom/* append */.R3(sourceAndCodeElement,markerHoverParticipant_$("span"));sourceElement.innerText=source}const codeLink=dom/* append */.R3(sourceAndCodeElement,markerHoverParticipant_$("a.code-link"));codeLink.setAttribute("href",code.target.toString()),disposables.add(dom/* addDisposableListener */.nm(codeLink,"click",(e=>{this._openerService.open(code.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));const codeElement=dom/* append */.R3(codeLink,markerHoverParticipant_$("span"));codeElement.innerText=code.value;const detailsElement=dom/* append */.R3(markerElement,sourceAndCodeElement);detailsElement.style.opacity="0.6",detailsElement.style.paddingLeft="6px"}else{const detailsElement=dom/* append */.R3(markerElement,markerHoverParticipant_$("span"));detailsElement.style.opacity="0.6",detailsElement.style.paddingLeft="6px",detailsElement.innerText=source&&code?`${source}(${code})`:source||`(${code})`}if((0,arrays/* isNonEmptyArray */.Of)(relatedInformation))for(const{message:message,resource:resource,startLineNumber:startLineNumber,startColumn:startColumn}of relatedInformation){const relatedInfoContainer=dom/* append */.R3(markerElement,markerHoverParticipant_$("div"));relatedInfoContainer.style.marginTop="8px";const a=dom/* append */.R3(relatedInfoContainer,markerHoverParticipant_$("a"));a.innerText=`${(0,common_resources/* basename */.EZ)(resource)}(${startLineNumber}, ${startColumn}): `,a.style.cursor="pointer",disposables.add(dom/* addDisposableListener */.nm(a,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(resource,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:startLineNumber,startColumn:startColumn}}}).catch(errors/* onUnexpectedError */.dL)})));const messageElement=dom/* append */.R3(relatedInfoContainer,markerHoverParticipant_$("span"));messageElement.innerText=message,this._editor.applyFontInfo(messageElement)}return hoverElement}renderMarkerStatusbar(markerHover,statusBar,disposables){if(markerHover.marker.severity!==markers/* MarkerSeverity */.ZL.Error&&markerHover.marker.severity!==markers/* MarkerSeverity */.ZL.Warning&&markerHover.marker.severity!==markers/* MarkerSeverity */.ZL.Info||statusBar.addAction({label:nls/* localize */.N("view problem","View Problem"),commandId:NextMarkerAction.ID,run:()=>{this._hover.hide(),MarkerController.get(this._editor).showAtMarker(markerHover.marker),this._editor.focus()}}),!this._editor.getOption(80/* readOnly */)){const quickfixPlaceholderElement=statusBar.append(markerHoverParticipant_$("div"));this.recentMarkerCodeActionsInfo&&(markers/* IMarkerData */.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===markers/* IMarkerData */.H0.makeKey(markerHover.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(quickfixPlaceholderElement.textContent=nls/* localize */.N("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const updatePlaceholderDisposable=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?lifecycle/* Disposable */.JT.None:disposables.add((0,common_async/* disposableTimeout */.Vg)((()=>quickfixPlaceholderElement.textContent=nls/* localize */.N("checkingForQuickFixes","Checking for quick fixes...")),200));quickfixPlaceholderElement.textContent||(
// Have some content in here to avoid flickering
quickfixPlaceholderElement.textContent=String.fromCharCode(160));const codeActionsPromise=this.getCodeActions(markerHover.marker);disposables.add((0,lifecycle/* toDisposable */.OF)((()=>codeActionsPromise.cancel()))),codeActionsPromise.then((actions=>{if(updatePlaceholderDisposable.dispose(),this.recentMarkerCodeActionsInfo={marker:markerHover.marker,hasCodeActions:actions.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return actions.dispose(),void(quickfixPlaceholderElement.textContent=nls/* localize */.N("noQuickFixes","No quick fixes available"));quickfixPlaceholderElement.style.display="none";let showing=!1;disposables.add((0,lifecycle/* toDisposable */.OF)((()=>{showing||actions.dispose()}))),statusBar.addAction({label:nls/* localize */.N("quick fixes","Quick Fix..."),commandId:QuickFixAction.Id,run:target=>{showing=!0;const controller=QuickFixController.get(this._editor),elementPosition=dom/* getDomNodePagePosition */.i(target);
// Hide the hover pre-emptively, otherwise the editor can close the code actions
// context menu as well when using keyboard navigation
this._hover.hide(),controller.showCodeActions(markerCodeActionTrigger,actions,{x:elementPosition.left+6,y:elementPosition.top+elementPosition.height+6})}})}),errors/* onUnexpectedError */.dL)}}getCodeActions(marker){return(0,common_async/* createCancelablePromise */.PG)((cancellationToken=>getCodeActions(this._editor.getModel(),new core_range/* Range */.e(marker.startLineNumber,marker.startColumn,marker.endLineNumber,marker.endColumn),markerCodeActionTrigger,progress/* Progress */.E.None,cancellationToken)))}};MarkerHoverParticipant=markerHoverParticipant_decorate([markerHoverParticipant_param(2,markersDecorationService/* IMarkerDecorationsService */.i),markerHoverParticipant_param(3,common_opener/* IOpenerService */.v4)],MarkerHoverParticipant),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const linkFg=theme.getColor(colorRegistry/* textLinkForeground */.ur);linkFg&&collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);const activeLinkFg=theme.getColor(colorRegistry/* textLinkActiveForeground */.sg);activeLinkFg&&collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`)}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/controller/cursorColumns.js
var cursorColumns=__webpack_require__(547707);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/consts.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const inlineSuggestCommitId="editor.action.inlineSuggest.commit";
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/core/editOperation.js
var editOperation=__webpack_require__(969386);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/ghostText.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class GhostText{constructor(lineNumber,parts,additionalReservedLineCount=0){this.lineNumber=lineNumber,this.parts=parts,this.additionalReservedLineCount=additionalReservedLineCount}renderForScreenReader(lineText){if(0===this.parts.length)return"";const lastPart=this.parts[this.parts.length-1],cappedLineText=lineText.substr(0,lastPart.column-1),text=applyEdits(cappedLineText,this.parts.map((p=>({range:{startLineNumber:1,endLineNumber:1,startColumn:p.column,endColumn:p.column},text:p.lines.join("\n")}))));return text.substring(this.parts[0].column-1)}}class PositionOffsetTransformer{constructor(text){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let i=0;i<text.length;i++)"\n"===text.charAt(i)&&this.lineStartOffsetByLineIdx.push(i+1)}getOffset(position){return this.lineStartOffsetByLineIdx[position.lineNumber-1]+position.column-1}}function applyEdits(text,edits){const transformer=new PositionOffsetTransformer(text),offsetEdits=edits.map((e=>{const range=core_range/* Range */.e.lift(e.range);return{startOffset:transformer.getOffset(range.getStartPosition()),endOffset:transformer.getOffset(range.getEndPosition()),text:e.text}}));offsetEdits.sort(((a,b)=>b.startOffset-a.startOffset));for(const edit of offsetEdits)text=text.substring(0,edit.startOffset)+edit.text+text.substring(edit.endOffset);return text}class GhostTextPart{constructor(column,lines,
/**
     * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.
    */
preview){this.column=column,this.lines=lines,this.preview=preview}}class BaseGhostTextWidgetModel extends lifecycle/* Disposable */.JT{constructor(editor){super(),this.editor=editor,this._expanded=void 0,this.onDidChangeEmitter=new common_event/* Emitter */.Q5,this.onDidChange=this.onDidChangeEmitter.event,this._register(editor.onDidChangeConfiguration((e=>{e.hasChanged(105/* suggest */)&&void 0===this._expanded&&this.onDidChangeEmitter.fire()})))}setExpanded(expanded){this._expanded=!0,this.onDidChangeEmitter.fire()}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/diff/diff.js + 1 modules
var diff=__webpack_require__(722571);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/inlineCompletionToGhostText.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function normalizedInlineCompletionsEquals(a,b){return a===b||!(!a||!b)&&(a.range.equalsRange(b.range)&&a.text===b.text&&a.command===b.command)}
/**
 * @param previewSuffixLength Sets where to split `inlineCompletion.text`.
 * 	If the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.
*/function inlineCompletionToGhostText(inlineCompletion,textModel,mode,cursorPosition,previewSuffixLength=0){if(inlineCompletion.range.startLineNumber!==inlineCompletion.range.endLineNumber)
// Only single line replacements are supported.
return;const sourceLine=textModel.getLineContent(inlineCompletion.range.startLineNumber),sourceIndentationLength=strings/* getLeadingWhitespace */.V8(sourceLine).length,suggestionTouchesIndentation=inlineCompletion.range.startColumn-1<=sourceIndentationLength;if(suggestionTouchesIndentation){
// source:      [abc]
//                         ^^^^^^^^^ inlineCompletion.range
//              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength
//                         ^^^^^^ replacedIndentation.length
//                               ^^^ rangeThatDoesNotReplaceIndentation
// inlineCompletion.text: 'foo'
//                         ^^ suggestionAddedIndentationLength
const suggestionAddedIndentationLength=strings/* getLeadingWhitespace */.V8(inlineCompletion.text).length,replacedIndentation=sourceLine.substring(inlineCompletion.range.startColumn-1,sourceIndentationLength),rangeThatDoesNotReplaceIndentation=core_range/* Range */.e.fromPositions(inlineCompletion.range.getStartPosition().delta(0,replacedIndentation.length),inlineCompletion.range.getEndPosition()),suggestionWithoutIndentationChange=inlineCompletion.text.startsWith(replacedIndentation)?inlineCompletion.text.substring(replacedIndentation.length):inlineCompletion.text.substring(suggestionAddedIndentationLength);inlineCompletion={range:rangeThatDoesNotReplaceIndentation,text:suggestionWithoutIndentationChange,command:inlineCompletion.command}}
// This is a single line string
const valueToBeReplaced=textModel.getValueInRange(inlineCompletion.range),changes=cachingDiff(valueToBeReplaced,inlineCompletion.text);if(!changes)
// No ghost text in case the diff would be too slow to compute
return;const lineNumber=inlineCompletion.range.startLineNumber,parts=new Array;if("prefix"===mode){const filteredChanges=changes.filter((c=>0===c.originalLength));if(filteredChanges.length>1||1===filteredChanges.length&&filteredChanges[0].originalStart!==valueToBeReplaced.length)
// Prefixes only have a single change.
return}const previewStartInCompletionText=inlineCompletion.text.length-previewSuffixLength;for(const c of changes){const insertColumn=inlineCompletion.range.startColumn+c.originalStart+c.originalLength;if("subwordSmart"===mode&&cursorPosition&&cursorPosition.lineNumber===inlineCompletion.range.startLineNumber&&insertColumn<cursorPosition.column)
// No ghost text before cursor
return;if(c.originalLength>0)return;if(0===c.modifiedLength)continue;const modifiedEnd=c.modifiedStart+c.modifiedLength,nonPreviewTextEnd=Math.max(c.modifiedStart,Math.min(modifiedEnd,previewStartInCompletionText)),nonPreviewText=inlineCompletion.text.substring(c.modifiedStart,nonPreviewTextEnd),italicText=inlineCompletion.text.substring(nonPreviewTextEnd,Math.max(c.modifiedStart,modifiedEnd));if(nonPreviewText.length>0){const lines=strings/* splitLines */.uq(nonPreviewText);parts.push(new GhostTextPart(insertColumn,lines,!1))}if(italicText.length>0){const lines=strings/* splitLines */.uq(italicText);parts.push(new GhostTextPart(insertColumn,lines,!0))}}return new GhostText(lineNumber,parts,0)}let lastRequest;function cachingDiff(originalValue,newValue){if((null===lastRequest||void 0===lastRequest?void 0:lastRequest.originalValue)===originalValue&&(null===lastRequest||void 0===lastRequest?void 0:lastRequest.newValue)===newValue)return null===lastRequest||void 0===lastRequest?void 0:lastRequest.changes;{const changes=smartDiff(originalValue,newValue);return lastRequest={originalValue:originalValue,newValue:newValue,changes:changes},changes}}
/**
 * When matching `if ()` with `if (f() = 1) { g(); }`,
 * align it like this:        `if (       )`
 * Not like this:			  `if (  )`
 * Also not like this:		  `if (             )`.
 *
 * The parenthesis are preprocessed to ensure that they match correctly.
 */function smartDiff(originalValue,newValue){if(originalValue.length>5e3||newValue.length>5e3)
// We don't want to work on strings that are too big
return;function getMaxCharCode(val){let maxCharCode=0;for(let i=0,len=val.length;i<len;i++){const charCode=val.charCodeAt(i);charCode>maxCharCode&&(maxCharCode=charCode)}return maxCharCode}const maxCharCode=Math.max(getMaxCharCode(originalValue),getMaxCharCode(newValue));function getUniqueCharCode(id){if(id<0)throw new Error("unexpected");return maxCharCode+id+1}function getElements(source){let level=0,group=0;const characters=new Int32Array(source.length);for(let i=0,len=source.length;i<len;i++){const id=100*group+level;
// TODO support more brackets
"("===source[i]?(characters[i]=getUniqueCharCode(2*id),level++):")"===source[i]?(characters[i]=getUniqueCharCode(2*id+1),1===level&&group++,level=Math.max(level-1,0)):characters[i]=source.charCodeAt(i)}return characters}const elements1=getElements(originalValue),elements2=getElements(newValue);return new diff/* LcsDiff */.Hs({getElements:()=>elements1},{getElements:()=>elements2}).ComputeDiff(!1).changes}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/inlineCompletionsModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var inlineCompletionsModel_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},inlineCompletionsModel_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},inlineCompletionsModel_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let InlineCompletionsModel=class extends lifecycle/* Disposable */.JT{constructor(editor,cache,commandService){super(),this.editor=editor,this.cache=cache,this.commandService=commandService,this.onDidChangeEmitter=new common_event/* Emitter */.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new lifecycle/* MutableDisposable */.XK),this.active=!1,this.disposed=!1,this._register(commandService.onDidExecuteCommand((e=>{
// These commands don't trigger onDidType.
const commands=new Set([editorExtensions/* UndoCommand */.n_.id,editorExtensions/* RedoCommand */.kz.id,coreCommands/* CoreEditingCommands */.wk.Tab.id,coreCommands/* CoreEditingCommands */.wk.DeleteLeft.id,coreCommands/* CoreEditingCommands */.wk.DeleteRight.id,inlineSuggestCommitId,"acceptSelectedSuggestion"]);commands.has(e.commandId)&&editor.hasTextFocus()&&this.handleUserInput()}))),this._register(this.editor.onDidType((e=>{this.handleUserInput()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.session&&!this.session.isValid&&this.hide()}))),this._register((0,lifecycle/* toDisposable */.OF)((()=>{this.disposed=!0}))),this._register(this.editor.onDidBlurEditorWidget((()=>{this.hide()})))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout((()=>{this.disposed||
// Wait for the cursor update that happens in the same iteration loop iteration
this.startSessionIfTriggered()}),0)}get session(){return this.completionSession.value}get ghostText(){var _a;return null===(_a=this.session)||void 0===_a?void 0:_a.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(expanded){var _a;null===(_a=this.session)||void 0===_a||_a.setExpanded(expanded)}setActive(active){var _a;this.active=active,active&&(null===(_a=this.session)||void 0===_a||_a.scheduleAutomaticUpdate())}startSessionIfTriggered(){const suggestOptions=this.editor.getOption(54/* inlineSuggest */);suggestOptions.enabled&&(this.session&&this.session.isValid||this.trigger(modes/* InlineCompletionTriggerKind */.bw.Automatic))}trigger(triggerKind){this.completionSession.value?triggerKind===modes/* InlineCompletionTriggerKind */.bw.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext():(this.completionSession.value=new InlineCompletionsSession(this.editor,this.editor.getPosition(),(()=>this.active),this.commandService,this.cache,triggerKind),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange((()=>{this.onDidChangeEmitter.fire()}))))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var _a;
// Don't dispose the session, so that after committing, more suggestions are shown.
null===(_a=this.session)||void 0===_a||_a.commitCurrentCompletion()}showNext(){var _a;null===(_a=this.session)||void 0===_a||_a.showNextInlineCompletion()}showPrevious(){var _a;null===(_a=this.session)||void 0===_a||_a.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var _a;return inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){const result=yield null===(_a=this.session)||void 0===_a?void 0:_a.hasMultipleInlineCompletions();return void 0!==result&&result}))}};InlineCompletionsModel=inlineCompletionsModel_decorate([inlineCompletionsModel_param(2,commands/* ICommandService */.H)],InlineCompletionsModel);class InlineCompletionsSession extends BaseGhostTextWidgetModel{constructor(editor,triggerPosition,shouldUpdate,commandService,cache,initialTriggerKind){let lastCompletionItem;super(editor),this.triggerPosition=triggerPosition,this.shouldUpdate=shouldUpdate,this.commandService=commandService,this.cache=cache,this.initialTriggerKind=initialTriggerKind,this.minReservedLineCount=0,this.updateOperation=this._register(new lifecycle/* MutableDisposable */.XK),this.updateSoon=this._register(new common_async/* RunOnceScheduler */.pY((()=>{let triggerKind=this.initialTriggerKind;
// All subsequent triggers are automatic.
return this.initialTriggerKind=modes/* InlineCompletionTriggerKind */.bw.Automatic,this.update(triggerKind)}),50)),
//#region Selection
// We use a semantic id to track the selection even if the cache changes.
this.currentlySelectedCompletionId=void 0,this._register(this.onDidChange((()=>{const currentCompletion=this.currentCompletion;if(currentCompletion&&currentCompletion.sourceInlineCompletion!==lastCompletionItem){lastCompletionItem=currentCompletion.sourceInlineCompletion;const provider=currentCompletion.sourceProvider;provider.handleItemDidShow&&provider.handleItemDidShow(currentCompletion.sourceInlineCompletions,lastCompletionItem)}}))),this._register((0,lifecycle/* toDisposable */.OF)((()=>{this.cache.clear()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.cache.value&&this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeModelContent((e=>{this.scheduleAutomaticUpdate()}))),this._register(modes/* InlineCompletionsProviderRegistry */.zu.onDidChange((()=>{this.updateSoon.schedule()}))),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)
// don't reset the selection in this case
return 0;const idx=this.cache.value.completions.findIndex((v=>v.semanticId===this.currentlySelectedCompletionId));return-1===idx?(
// Reset the selection so that the selection does not jump back when it appears again
this.currentlySelectedCompletionId=void 0,0):idx}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var _a;return inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const completions=(null===(_a=this.cache.value)||void 0===_a?void 0:_a.completions)||[];if(completions.length>0){const newIdx=(this.fixAndGetIndexOfCurrentSelection()+1)%completions.length;this.currentlySelectedCompletionId=completions[newIdx].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}showPreviousInlineCompletion(){var _a;return inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const completions=(null===(_a=this.cache.value)||void 0===_a?void 0:_a.completions)||[];if(completions.length>0){const newIdx=(this.fixAndGetIndexOfCurrentSelection()+completions.length-1)%completions.length;this.currentlySelectedCompletionId=completions[newIdx].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}ensureUpdateWithExplicitContext(){var _a;return inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){this.updateOperation.value?
// Restart or wait for current update operation
this.updateOperation.value.triggerKind===modes/* InlineCompletionTriggerKind */.bw.Explicit?yield this.updateOperation.value.promise:yield this.update(modes/* InlineCompletionTriggerKind */.bw.Explicit):(null===(_a=this.cache.value)||void 0===_a?void 0:_a.triggerKind)!==modes/* InlineCompletionTriggerKind */.bw.Explicit&&(yield this.update(modes/* InlineCompletionTriggerKind */.bw.Explicit))}))}hasMultipleInlineCompletions(){var _a;return inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){return yield this.ensureUpdateWithExplicitContext(),((null===(_a=this.cache.value)||void 0===_a?void 0:_a.completions.length)||0)>1}))}
//#endregion
get ghostText(){const currentCompletion=this.currentCompletion,mode=this.editor.getOptions().get(54/* inlineSuggest */).mode;return currentCompletion?inlineCompletionToGhostText(currentCompletion,this.editor.getModel(),mode,this.editor.getPosition()):void 0}get currentCompletion(){const completion=this.currentCachedCompletion;if(completion)return completion.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){
// Since updateSoon debounces, starvation can happen.
// To prevent stale cache, we clear the current update operation.
this.updateOperation.clear(),this.updateSoon.schedule()}update(triggerKind){return inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){if(!this.shouldUpdate())return;const position=this.editor.getPosition(),promise=(0,common_async/* createCancelablePromise */.PG)((token=>inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){let result;try{result=yield provideInlineCompletions(position,this.editor.getModel(),{triggerKind:triggerKind,selectedSuggestionInfo:void 0},token)}catch(e){return void(0,errors/* onUnexpectedError */.dL)(e)}token.isCancellationRequested||(this.cache.setValue(this.editor,result,triggerKind),this.onDidChangeEmitter.fire())})))),operation=new UpdateOperation(promise,triggerKind);this.updateOperation.value=operation,yield promise,this.updateOperation.value===operation&&this.updateOperation.clear()}))}takeOwnership(disposable){this._register(disposable)}commitCurrentCompletion(){if(!this.ghostText)
// No ghost text was shown for this completion.
// Thus, we don't want to commit anything.
return;const completion=this.currentCompletion;completion&&this.commit(completion)}commit(completion){
// Mark the cache as stale, but don't dispose it yet,
// otherwise command args might get disposed.
const cache=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[editOperation/* EditOperation */.h.replaceMove(completion.range,completion.text)]),completion.command?this.commandService.executeCommand(completion.command.id,...completion.command.arguments||[]).finally((()=>{null===cache||void 0===cache||cache.dispose()})).then(void 0,errors/* onUnexpectedExternalError */.Cp):null===cache||void 0===cache||cache.dispose(),this.onDidChangeEmitter.fire()}}class UpdateOperation{constructor(promise,triggerKind){this.promise=promise,this.triggerKind=triggerKind}dispose(){this.promise.cancel()}}
/**
 * The cache keeps itself in sync with the editor.
 * It also owns the completions result and disposes it when the cache is diposed.
*/class SynchronizedInlineCompletionsCache extends lifecycle/* Disposable */.JT{constructor(editor,completionsSource,onChange,triggerKind){super(),this.triggerKind=triggerKind;const decorationIds=editor.deltaDecorations([],completionsSource.items.map((i=>({range:i.range,options:{description:"inline-completion-tracking-range"}}))));this._register((0,lifecycle/* toDisposable */.OF)((()=>{editor.deltaDecorations(decorationIds,[])}))),this.completions=completionsSource.items.map(((c,idx)=>new CachedInlineCompletion(c,decorationIds[idx]))),this._register(editor.onDidChangeModelContent((()=>{let hasChanged=!1;const model=editor.getModel();for(const c of this.completions){const newRange=model.getDecorationRange(c.decorationId);newRange?c.synchronizedRange.equalsRange(newRange)||(hasChanged=!0,c.synchronizedRange=newRange):(0,errors/* onUnexpectedError */.dL)(new Error("Decoration has no range"))}hasChanged&&onChange()}))),this._register(completionsSource)}}class CachedInlineCompletion{constructor(inlineCompletion,decorationId){this.inlineCompletion=inlineCompletion,this.decorationId=decorationId,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=inlineCompletion.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function getDefaultRange(position,model){const word=model.getWordAtPosition(position),maxColumn=model.getLineMaxColumn(position.lineNumber);
// By default, always replace up until the end of the current line.
// This default might be subject to change!
return word?new core_range/* Range */.e(position.lineNumber,word.startColumn,position.lineNumber,maxColumn):core_range/* Range */.e.fromPositions(position,position.with(void 0,maxColumn))}function provideInlineCompletions(position,model,context,token=cancellation/* CancellationToken */.T.None){return inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){const defaultReplaceRange=getDefaultRange(position,model),providers=modes/* InlineCompletionsProviderRegistry */.zu.all(model),results=yield Promise.all(providers.map((provider=>inlineCompletionsModel_awaiter(this,void 0,void 0,(function*(){const completions=yield provider.provideInlineCompletions(model,position,context,token);return{completions:completions,provider:provider,dispose:()=>{completions&&provider.freeInlineCompletions(completions)}}}))))),itemsByHash=new Map;for(const result of results){const completions=result.completions;if(completions)for(const item of completions.items.map((item=>({text:item.text,range:item.range?core_range/* Range */.e.lift(item.range):defaultReplaceRange,command:item.command,sourceProvider:result.provider,sourceInlineCompletions:completions,sourceInlineCompletion:item}))))item.range.startLineNumber===item.range.endLineNumber&&itemsByHash.set(JSON.stringify({text:item.text,range:item.range}),item)}return{items:[...itemsByHash.values()],dispose:()=>{for(const result of results)result.dispose()}}}))}function minimizeInlineCompletion(model,inlineCompletion){if(!inlineCompletion)return inlineCompletion;const valueToReplace=model.getValueInRange(inlineCompletion.range),commonPrefixLen=(0,strings/* commonPrefixLength */.Mh)(valueToReplace,inlineCompletion.text),startOffset=model.getOffsetAt(inlineCompletion.range.getStartPosition())+commonPrefixLen,start=model.getPositionAt(startOffset),remainingValueToReplace=valueToReplace.substr(commonPrefixLen),commonSuffixLen=(0,strings/* commonSuffixLength */.P1)(remainingValueToReplace,inlineCompletion.text),end=model.getPositionAt(Math.max(startOffset,model.getOffsetAt(inlineCompletion.range.getEndPosition())-commonSuffixLen));return{range:core_range/* Range */.e.fromPositions(start,end),text:inlineCompletion.text.substr(commonPrefixLen,inlineCompletion.text.length-commonPrefixLen-commonSuffixLen)}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetParser.js
var snippetParser=__webpack_require__(563472),workspace=__webpack_require__(340382),path=__webpack_require__(555336),uuid=__webpack_require__(98e3),languageConfigurationRegistry=__webpack_require__(594660),workspaces=__webpack_require__(268344);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/workspace/common/workspace.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetVariables.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class CompositeSnippetVariableResolver{constructor(_delegates){this._delegates=_delegates;

}resolve(variable){for(const delegate of this._delegates){let value=delegate.resolve(variable);if(void 0!==value)return value}}}class SelectionBasedVariableResolver{constructor(_model,_selection,_selectionIdx,_overtypingCapturer){this._model=_model,this._selection=_selection,this._selectionIdx=_selectionIdx,this._overtypingCapturer=_overtypingCapturer}resolve(variable){const{name:name}=variable;if("SELECTION"===name||"TM_SELECTED_TEXT"===name){let value=this._model.getValueInRange(this._selection)||void 0,isMultiline=this._selection.startLineNumber!==this._selection.endLineNumber;
// If there was no selected text, try to get last overtyped text
if(!value&&this._overtypingCapturer){const info=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);info&&(value=info.value,isMultiline=info.multiline)}if(value&&isMultiline&&variable.snippet){
// Selection is a multiline string which we indentation we now
// need to adjust. We compare the indentation of this variable
// with the indentation at the editor position and add potential
// extra indentation to the value
const line=this._model.getLineContent(this._selection.startLineNumber),lineLeadingWhitespace=(0,strings/* getLeadingWhitespace */.V8)(line,0,this._selection.startColumn-1);let varLeadingWhitespace=lineLeadingWhitespace;variable.snippet.walk((marker=>marker!==variable&&(marker instanceof snippetParser/* Text */.xv&&(varLeadingWhitespace=(0,strings/* getLeadingWhitespace */.V8)((0,strings/* splitLines */.uq)(marker.value).pop())),!0)));const whitespaceCommonLength=(0,strings/* commonPrefixLength */.Mh)(varLeadingWhitespace,lineLeadingWhitespace);value=value.replace(/(\r\n|\r|\n)(.*)/g,((m,newline,rest)=>`${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`))}return value}if("TM_CURRENT_LINE"===name)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===name){const info=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return info&&info.word||void 0}return"TM_LINE_INDEX"===name?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===name?String(this._selection.positionLineNumber):void 0}}class ModelBasedVariableResolver{constructor(_labelService,_model){this._labelService=_labelService,this._model=_model}resolve(variable){const{name:name}=variable;if("TM_FILENAME"===name)return path/* basename */.EZ(this._model.uri.fsPath);if("TM_FILENAME_BASE"===name){const name=path/* basename */.EZ(this._model.uri.fsPath),idx=name.lastIndexOf(".");return idx<=0?name:name.slice(0,idx)}return"TM_DIRECTORY"===name?"."===path/* dirname */.XX(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,common_resources/* dirname */.XX)(this._model.uri)):"TM_FILEPATH"===name?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===name?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}class ClipboardBasedVariableResolver{constructor(_readClipboardText,_selectionIdx,_selectionCount,_spread){this._readClipboardText=_readClipboardText,this._selectionIdx=_selectionIdx,this._selectionCount=_selectionCount,this._spread=_spread}resolve(variable){if("CLIPBOARD"!==variable.name)return;const clipboardText=this._readClipboardText();if(clipboardText){
// `spread` is assigning each cursor a line of the clipboard
// text whenever there the line count equals the cursor count
// and when enabled
if(this._spread){const lines=clipboardText.split(/\r\n|\n|\r/).filter((s=>!(0,strings/* isFalsyOrWhitespace */.m5)(s)));if(lines.length===this._selectionCount)return lines[this._selectionIdx]}return clipboardText}}}class CommentBasedVariableResolver{constructor(_model,_selection){this._model=_model,this._selection=_selection}resolve(variable){const{name:name}=variable,langId=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),config=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getComments(langId);if(config)return"LINE_COMMENT"===name?config.lineCommentToken||void 0:"BLOCK_COMMENT_START"===name?config.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===name&&config.blockCommentEndToken||void 0}}class TimeBasedVariableResolver{constructor(){this._date=new Date}resolve(variable){const{name:name}=variable;return"CURRENT_YEAR"===name?String(this._date.getFullYear()):"CURRENT_YEAR_SHORT"===name?String(this._date.getFullYear()).slice(-2):"CURRENT_MONTH"===name?String(this._date.getMonth().valueOf()+1).padStart(2,"0"):"CURRENT_DATE"===name?String(this._date.getDate().valueOf()).padStart(2,"0"):"CURRENT_HOUR"===name?String(this._date.getHours().valueOf()).padStart(2,"0"):"CURRENT_MINUTE"===name?String(this._date.getMinutes().valueOf()).padStart(2,"0"):"CURRENT_SECOND"===name?String(this._date.getSeconds().valueOf()).padStart(2,"0"):"CURRENT_DAY_NAME"===name?TimeBasedVariableResolver.dayNames[this._date.getDay()]:"CURRENT_DAY_NAME_SHORT"===name?TimeBasedVariableResolver.dayNamesShort[this._date.getDay()]:"CURRENT_MONTH_NAME"===name?TimeBasedVariableResolver.monthNames[this._date.getMonth()]:"CURRENT_MONTH_NAME_SHORT"===name?TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()]:"CURRENT_SECONDS_UNIX"===name?String(Math.floor(this._date.getTime()/1e3)):void 0}}TimeBasedVariableResolver.dayNames=[nls/* localize */.N("Sunday","Sunday"),nls/* localize */.N("Monday","Monday"),nls/* localize */.N("Tuesday","Tuesday"),nls/* localize */.N("Wednesday","Wednesday"),nls/* localize */.N("Thursday","Thursday"),nls/* localize */.N("Friday","Friday"),nls/* localize */.N("Saturday","Saturday")],TimeBasedVariableResolver.dayNamesShort=[nls/* localize */.N("SundayShort","Sun"),nls/* localize */.N("MondayShort","Mon"),nls/* localize */.N("TuesdayShort","Tue"),nls/* localize */.N("WednesdayShort","Wed"),nls/* localize */.N("ThursdayShort","Thu"),nls/* localize */.N("FridayShort","Fri"),nls/* localize */.N("SaturdayShort","Sat")],TimeBasedVariableResolver.monthNames=[nls/* localize */.N("January","January"),nls/* localize */.N("February","February"),nls/* localize */.N("March","March"),nls/* localize */.N("April","April"),nls/* localize */.N("May","May"),nls/* localize */.N("June","June"),nls/* localize */.N("July","July"),nls/* localize */.N("August","August"),nls/* localize */.N("September","September"),nls/* localize */.N("October","October"),nls/* localize */.N("November","November"),nls/* localize */.N("December","December")],TimeBasedVariableResolver.monthNamesShort=[nls/* localize */.N("JanuaryShort","Jan"),nls/* localize */.N("FebruaryShort","Feb"),nls/* localize */.N("MarchShort","Mar"),nls/* localize */.N("AprilShort","Apr"),nls/* localize */.N("MayShort","May"),nls/* localize */.N("JuneShort","Jun"),nls/* localize */.N("JulyShort","Jul"),nls/* localize */.N("AugustShort","Aug"),nls/* localize */.N("SeptemberShort","Sep"),nls/* localize */.N("OctoberShort","Oct"),nls/* localize */.N("NovemberShort","Nov"),nls/* localize */.N("DecemberShort","Dec")];class WorkspaceBasedVariableResolver{constructor(_workspaceService){this._workspaceService=_workspaceService;

}resolve(variable){if(!this._workspaceService)return;const workspaceIdentifier=(0,workspaces/* toWorkspaceIdentifier */.uT)(this._workspaceService.getWorkspace());return workspaceIdentifier?"WORKSPACE_NAME"===variable.name?this._resolveWorkspaceName(workspaceIdentifier):"WORKSPACE_FOLDER"===variable.name?this._resoveWorkspacePath(workspaceIdentifier):void 0:void 0}_resolveWorkspaceName(workspaceIdentifier){if((0,workspaces/* isSingleFolderWorkspaceIdentifier */.eb)(workspaceIdentifier))return path/* basename */.EZ(workspaceIdentifier.uri.path);let filename=path/* basename */.EZ(workspaceIdentifier.configPath.path);return filename.endsWith(workspaces/* WORKSPACE_EXTENSION */.A6)&&(filename=filename.substr(0,filename.length-workspaces/* WORKSPACE_EXTENSION */.A6.length-1)),filename}_resoveWorkspacePath(workspaceIdentifier){if((0,workspaces/* isSingleFolderWorkspaceIdentifier */.eb)(workspaceIdentifier))return(0,labels/* normalizeDriveLetter */.D)(workspaceIdentifier.uri.fsPath);let filename=path/* basename */.EZ(workspaceIdentifier.configPath.path),folderpath=workspaceIdentifier.configPath.fsPath;return folderpath.endsWith(filename)&&(folderpath=folderpath.substr(0,folderpath.length-filename.length-1)),folderpath?(0,labels/* normalizeDriveLetter */.D)(folderpath):"/"}}class RandomBasedVariableResolver{resolve(variable){const{name:name}=variable;return"RANDOM"===name?Math.random().toString().slice(-6):"RANDOM_HEX"===name?Math.random().toString(16).slice(-6):"UUID"===name?(0,uuid/* generateUuid */.R)():void 0}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetSession.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{function getColorGraceful(name){const color=theme.getColor(name);return color?color.toString():"transparent"}collector.addRule(`.monaco-editor .snippet-placeholder { background-color: ${getColorGraceful(colorRegistry/* snippetTabstopHighlightBackground */.u2)}; outline-color: ${getColorGraceful(colorRegistry/* snippetTabstopHighlightBorder */.Pk)}; }`),collector.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${getColorGraceful(colorRegistry/* snippetFinalTabstopHighlightBackground */.I1)}; outline-color: ${getColorGraceful(colorRegistry/* snippetFinalTabstopHighlightBorder */.U6)}; }`)}));class OneSnippet{constructor(_editor,_snippet,_offset,_snippetLineLeadingWhitespace){this._editor=_editor,this._snippet=_snippet,this._offset=_offset,this._snippetLineLeadingWhitespace=_snippetLineLeadingWhitespace,this._nestingLevel=1,this._placeholderGroups=(0,arrays/* groupBy */.vM)(_snippet.placeholders,snippetParser/* Placeholder */.Vm.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)
// already initialized
return;this._placeholderDecorations=new Map;const model=this._editor.getModel();this._editor.changeDecorations((accessor=>{
// create a decoration for each placeholder
for(const placeholder of this._snippet.placeholders){const placeholderOffset=this._snippet.offset(placeholder),placeholderLen=this._snippet.fullLen(placeholder),range=core_range/* Range */.e.fromPositions(model.getPositionAt(this._offset+placeholderOffset),model.getPositionAt(this._offset+placeholderOffset+placeholderLen)),options=placeholder.isFinalTabstop?OneSnippet._decor.inactiveFinal:OneSnippet._decor.inactive,handle=accessor.addDecoration(range,options);this._placeholderDecorations.set(placeholder,handle)}}))}move(fwd){if(!this._editor.hasModel())return[];
// Transform placeholder text if necessary
if(this._initDecorations(),this._placeholderGroupsIdx>=0){let operations=[];for(const placeholder of this._placeholderGroups[this._placeholderGroupsIdx])
// Check if the placeholder has a transformation
if(placeholder.transform){const id=this._placeholderDecorations.get(placeholder),range=this._editor.getModel().getDecorationRange(id),currentValue=this._editor.getModel().getValueInRange(range),transformedValueLines=placeholder.transform.resolve(currentValue).split(/\r\n|\r|\n/);
// fix indentation for transformed lines
for(let i=1;i<transformedValueLines.length;i++)transformedValueLines[i]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+transformedValueLines[i]);operations.push(editOperation/* EditOperation */.h.replace(range,transformedValueLines.join(this._editor.getModel().getEOL())))}operations.length>0&&this._editor.executeEdits("snippet.placeholderTransform",operations)}let couldSkipThisPlaceholder=!1;!0===fwd&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,couldSkipThisPlaceholder=!0):!1===fwd&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,couldSkipThisPlaceholder=!0);const newSelections=this._editor.getModel().changeDecorations((accessor=>{const activePlaceholders=new Set,selections=[];
// change stickiness to always grow when typing at its edges
// because these decorations represent the currently active
// tabstop.
// Special case #1: reaching the final tabstop
// Special case #2: placeholders enclosing active placeholders
for(const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]){const id=this._placeholderDecorations.get(placeholder),range=this._editor.getModel().getDecorationRange(id);selections.push(new core_selection/* Selection */.Y(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn)),
// consider to skip this placeholder index when the decoration
// range is empty but when the placeholder wasn't. that's a strong
// hint that the placeholder has been deleted. (all placeholder must match this)
couldSkipThisPlaceholder=couldSkipThisPlaceholder&&this._hasPlaceholderBeenCollapsed(placeholder),accessor.changeDecorationOptions(id,placeholder.isFinalTabstop?OneSnippet._decor.activeFinal:OneSnippet._decor.active),activePlaceholders.add(placeholder);for(const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)){const id=this._placeholderDecorations.get(enclosingPlaceholder);accessor.changeDecorationOptions(id,enclosingPlaceholder.isFinalTabstop?OneSnippet._decor.activeFinal:OneSnippet._decor.active),activePlaceholders.add(enclosingPlaceholder)}}
// change stickness to never grow when typing at its edges
// so that in-active tabstops never grow
for(const[placeholder,id]of this._placeholderDecorations)activePlaceholders.has(placeholder)||accessor.changeDecorationOptions(id,placeholder.isFinalTabstop?OneSnippet._decor.inactiveFinal:OneSnippet._decor.inactive);return selections}));return couldSkipThisPlaceholder?this.move(fwd):null!==newSelections&&void 0!==newSelections?newSelections:[]}_hasPlaceholderBeenCollapsed(placeholder){
// A placeholder is empty when it wasn't empty when authored but
// when its tracking decoration is empty. This also applies to all
// potential parent placeholders
let marker=placeholder;while(marker){if(marker instanceof snippetParser/* Placeholder */.Vm){const id=this._placeholderDecorations.get(marker),range=this._editor.getModel().getDecorationRange(id);if(range.isEmpty()&&marker.toString().length>0)return!0}marker=marker.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const result=new Map;for(const placeholdersWithEqualIndex of this._placeholderGroups){let ranges;for(const placeholder of placeholdersWithEqualIndex){if(placeholder.isFinalTabstop)
// ignore those
break;ranges||(ranges=[],result.set(placeholder.index,ranges));const id=this._placeholderDecorations.get(placeholder),range=this._editor.getModel().getDecorationRange(id);if(!range){
// one of the placeholder lost its decoration and
// therefore we bail out and pretend the placeholder
// (with its mirrors) doesn't exist anymore.
result.delete(placeholder.index);break}ranges.push(range)}}return result}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(others){const model=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((accessor=>{
// For each active placeholder take one snippet and merge it
// in that the placeholder (can be many for `$1foo$1foo`). Because
// everything is sorted by editor selection we can simply remove
// elements from the beginning of the array
for(const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]){const nested=others.shift(),indexLastPlaceholder=nested._snippet.placeholderInfo.last.index;for(const nestedPlaceholder of nested._snippet.placeholderInfo.all)nestedPlaceholder.isFinalTabstop?nestedPlaceholder.index=placeholder.index+(indexLastPlaceholder+1)/this._nestingLevel:nestedPlaceholder.index=placeholder.index+nestedPlaceholder.index/this._nestingLevel;this._snippet.replace(placeholder,nested._snippet.children);
// Remove the placeholder at which position are inserting
// the snippet and also remove its decoration.
const id=this._placeholderDecorations.get(placeholder);accessor.removeDecoration(id),this._placeholderDecorations.delete(placeholder);
// For each *new* placeholder we create decoration to monitor
// how and if it grows/shrinks.
for(const placeholder of nested._snippet.placeholders){const placeholderOffset=nested._snippet.offset(placeholder),placeholderLen=nested._snippet.fullLen(placeholder),range=core_range/* Range */.e.fromPositions(model.getPositionAt(nested._offset+placeholderOffset),model.getPositionAt(nested._offset+placeholderOffset+placeholderLen)),handle=accessor.addDecoration(range,OneSnippet._decor.inactive);this._placeholderDecorations.set(placeholder,handle)}}
// Last, re-create the placeholder groups by sorting placeholders by their index.
this._placeholderGroups=(0,arrays/* groupBy */.vM)(this._snippet.placeholders,snippetParser/* Placeholder */.Vm.compareByIndex)}))}}OneSnippet._decor={active:textModel/* ModelDecorationOptions */.qx.register({description:"snippet-placeholder-1",stickiness:0/* AlwaysGrowsWhenTypingAtEdges */,className:"snippet-placeholder"}),inactive:textModel/* ModelDecorationOptions */.qx.register({description:"snippet-placeholder-2",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"snippet-placeholder"}),activeFinal:textModel/* ModelDecorationOptions */.qx.register({description:"snippet-placeholder-3",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"finish-snippet-placeholder"}),inactiveFinal:textModel/* ModelDecorationOptions */.qx.register({description:"snippet-placeholder-4",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"finish-snippet-placeholder"})};const _defaultOptions={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class SnippetSession{constructor(editor,template,options=_defaultOptions){this._templateMerges=[],this._snippets=[],this._editor=editor,this._template=template,this._options=options}static adjustWhitespace(model,position,snippet,adjustIndentation,adjustNewlines){const line=model.getLineContent(position.lineNumber),lineLeadingWhitespace=(0,strings/* getLeadingWhitespace */.V8)(line,0,position.column-1);
// the snippet as inserted
let snippetTextString;return snippet.walk((marker=>{
// all text elements that are not inside choice
if(!(marker instanceof snippetParser/* Text */.xv)||marker.parent instanceof snippetParser/* Choice */.Lv)return!0;const lines=marker.value.split(/\r\n|\r|\n/);if(adjustIndentation){
// adjust indentation of snippet test
// -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized
// -all N+1 lines get extra-indented and normalized
// -the text start get extra-indented and normalized when following a linebreak
const offset=snippet.offset(marker);if(0===offset)
// snippet start
lines[0]=model.normalizeIndentation(lines[0]);else{
// check if text start is after a linebreak
snippetTextString=null!==snippetTextString&&void 0!==snippetTextString?snippetTextString:snippet.toString();let prevChar=snippetTextString.charCodeAt(offset-1);10/* LineFeed */!==prevChar&&13/* CarriageReturn */!==prevChar||(lines[0]=model.normalizeIndentation(lineLeadingWhitespace+lines[0]))}for(let i=1;i<lines.length;i++)lines[i]=model.normalizeIndentation(lineLeadingWhitespace+lines[i])}const newValue=lines.join(model.getEOL());return newValue!==marker.value&&(marker.parent.replace(marker,[new snippetParser/* Text */.xv(newValue)]),snippetTextString=void 0),!0})),lineLeadingWhitespace}static adjustSelection(model,selection,overwriteBefore,overwriteAfter){if(0!==overwriteBefore||0!==overwriteAfter){
// overwrite[Before|After] is compute using the position, not the whole
// selection. therefore we adjust the selection around that position
const{positionLineNumber:positionLineNumber,positionColumn:positionColumn}=selection,positionColumnBefore=positionColumn-overwriteBefore,positionColumnAfter=positionColumn+overwriteAfter,range=model.validateRange({startLineNumber:positionLineNumber,startColumn:positionColumnBefore,endLineNumber:positionLineNumber,endColumn:positionColumnAfter});selection=core_selection/* Selection */.Y.createWithDirection(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn,selection.getDirection())}return selection}static createEditsAndSnippets(editor,template,overwriteBefore,overwriteAfter,enforceFinalTabstop,adjustWhitespace,clipboardText,overtypingCapturer){const edits=[],snippets=[];if(!editor.hasModel())return{edits:edits,snippets:snippets};const model=editor.getModel(),workspaceService=editor.invokeWithinContext((accessor=>accessor.get(workspace/* IWorkspaceContextService */.ec))),modelBasedVariableResolver=editor.invokeWithinContext((accessor=>new ModelBasedVariableResolver(accessor.get(label/* ILabelService */.e),model))),readClipboardText=()=>clipboardText;let delta=0,firstBeforeText=model.getValueInRange(SnippetSession.adjustSelection(model,editor.getSelection(),overwriteBefore,0)),firstAfterText=model.getValueInRange(SnippetSession.adjustSelection(model,editor.getSelection(),0,overwriteAfter)),firstLineFirstNonWhitespace=model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);
// know what text the overwrite[Before|After] extensions
// of the primary curser have selected because only when
// secondary selections extend to the same text we can grow them
// sort selections by their start position but remeber
// the original index. that allows you to create correct
// offset-based selection logic without changing the
// primary selection
const indexedSelections=editor.getSelections().map(((selection,idx)=>({selection:selection,idx:idx}))).sort(((a,b)=>core_range/* Range */.e.compareRangesUsingStarts(a.selection,b.selection)));for(const{selection:selection,idx:idx}of indexedSelections){
// extend selection with the `overwriteBefore` and `overwriteAfter` and then
// compare if this matches the extensions of the primary selection
let extensionBefore=SnippetSession.adjustSelection(model,selection,overwriteBefore,0),extensionAfter=SnippetSession.adjustSelection(model,selection,0,overwriteAfter);firstBeforeText!==model.getValueInRange(extensionBefore)&&(extensionBefore=selection),firstAfterText!==model.getValueInRange(extensionAfter)&&(extensionAfter=selection);
// merge the before and after selection into one
const snippetSelection=selection.setStartPosition(extensionBefore.startLineNumber,extensionBefore.startColumn).setEndPosition(extensionAfter.endLineNumber,extensionAfter.endColumn),snippet=(new snippetParser/* SnippetParser */.Yj).parse(template,!0,enforceFinalTabstop),start=snippetSelection.getStartPosition(),snippetLineLeadingWhitespace=SnippetSession.adjustWhitespace(model,start,snippet,adjustWhitespace||idx>0&&firstLineFirstNonWhitespace!==model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber),!0);snippet.resolveVariables(new CompositeSnippetVariableResolver([modelBasedVariableResolver,new ClipboardBasedVariableResolver(readClipboardText,idx,indexedSelections.length,"spread"===editor.getOption(70/* multiCursorPaste */)),new SelectionBasedVariableResolver(model,selection,idx,overtypingCapturer),new CommentBasedVariableResolver(model,selection),new TimeBasedVariableResolver,new WorkspaceBasedVariableResolver(workspaceService),new RandomBasedVariableResolver]));const offset=model.getOffsetAt(start)+delta;delta+=snippet.toString().length-model.getValueLengthInRange(snippetSelection),
// store snippets with the index of their originating selection.
// that ensures the primiary cursor stays primary despite not being
// the one with lowest start position
edits[idx]=editOperation/* EditOperation */.h.replace(snippetSelection,snippet.toString()),edits[idx].identifier={major:idx,minor:0},// mark the edit so only our undo edits will be used to generate end cursors
snippets[idx]=new OneSnippet(editor,snippet,offset,snippetLineLeadingWhitespace)}return{edits:edits,snippets:snippets}}dispose(){(0,lifecycle/* dispose */.B9)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;
// make insert edit and start with first selections
const{edits:edits,snippets:snippets}=SnippetSession.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=snippets,this._editor.executeEdits("snippet",edits,(undoEdits=>this._snippets[0].hasPlaceholder?this._move(!0):undoEdits.filter((edit=>!!edit.identifier// only use our undo edits
)).map((edit=>core_selection/* Selection */.Y.fromPositions(edit.range.getEndPosition()))))),this._editor.revealRange(this._editor.getSelections()[0])}merge(template,options=_defaultOptions){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,template]);const{edits:edits,snippets:snippets}=SnippetSession.createEditsAndSnippets(this._editor,template,options.overwriteBefore,options.overwriteAfter,!0,options.adjustWhitespace,options.clipboardText,options.overtypingCapturer);this._editor.executeEdits("snippet",edits,(undoEdits=>{for(const snippet of this._snippets)snippet.merge(snippets);return this._snippets[0].hasPlaceholder?this._move(void 0):undoEdits.filter((edit=>!!edit.identifier// only use our undo edits
)).map((edit=>core_selection/* Selection */.Y.fromPositions(edit.range.getEndPosition())))}))}next(){const newSelections=this._move(!0);this._editor.setSelections(newSelections),this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition())}prev(){const newSelections=this._move(!1);this._editor.setSelections(newSelections),this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition())}_move(fwd){const selections=[];for(const snippet of this._snippets){const oneSelection=snippet.move(fwd);selections.push(...oneSelection)}return selections}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const selections=this._editor.getSelections();if(selections.length<this._snippets.length)
// this means we started snippet mode with N
// selections and have M (N > M) selections.
// So one snippet is without selection -> cancel
return!1;let allPossibleSelections=new Map;for(const snippet of this._snippets){const possibleSelections=snippet.computePossibleSelections();
// for the first snippet find the placeholder (and its ranges)
// that contain at least one selection. for all remaining snippets
// the same placeholder (and their ranges) must be used.
if(0===allPossibleSelections.size)for(const[index,ranges]of possibleSelections){ranges.sort(core_range/* Range */.e.compareRangesUsingStarts);for(const selection of selections)if(ranges[0].containsRange(selection)){allPossibleSelections.set(index,[]);break}}if(0===allPossibleSelections.size)
// return false if we couldn't associate a selection to
// this (the first) snippet
return!1;
// add selections from 'this' snippet so that we know all
// selections for this placeholder
allPossibleSelections.forEach(((array,index)=>{array.push(...possibleSelections.get(index))}))}
// sort selections (and later placeholder-ranges). then walk both
// arrays and make sure the placeholder-ranges contain the corresponding
// selection
selections.sort(core_range/* Range */.e.compareRangesUsingStarts);for(let[index,ranges]of allPossibleSelections)if(ranges.length===selections.length){ranges.sort(core_range/* Range */.e.compareRangesUsingStarts);for(let i=0;i<ranges.length;i++)ranges[i].containsRange(selections[i])||allPossibleSelections.delete(index)}else allPossibleSelections.delete(index);
// from all possible selections we have deleted those
// that don't match with the current selection. if we don't
// have any left, we don't have a selection anymore
return allPossibleSelections.size>0}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/keybindings.js
var keybindings=__webpack_require__(408313),stopwatch=__webpack_require__(84013),suggest=__webpack_require__(379599),log=__webpack_require__(43557),snippetController2_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},snippetController2_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/stopwatch.js
const snippetController2_defaultOptions={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let SnippetController2=class SnippetController2{constructor(_editor,_logService,contextKeyService){this._editor=_editor,this._logService=_logService,this._snippetListener=new lifecycle/* DisposableStore */.SL,this._modelVersionId=-1,this._inSnippet=SnippetController2.InSnippetMode.bindTo(contextKeyService),this._hasNextTabstop=SnippetController2.HasNextTabstop.bindTo(contextKeyService),this._hasPrevTabstop=SnippetController2.HasPrevTabstop.bindTo(contextKeyService)}static get(editor){return editor.getContribution(SnippetController2.ID)}dispose(){var _a;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(_a=this._session)||void 0===_a||_a.dispose(),this._snippetListener.dispose()}insert(template,opts){
// this is here to find out more about the yet-not-understood
// error that sometimes happens when we fail to inserted a nested
// snippet
try{this._doInsert(template,"undefined"===typeof opts?snippetController2_defaultOptions:Object.assign(Object.assign({},snippetController2_defaultOptions),opts))}catch(e){this.cancel(),this._logService.error(e),this._logService.error("snippet_error"),this._logService.error("insert_template=",template),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(template,opts){this._editor.hasModel()&&(
// don't listen while inserting the snippet
// as that is the inflight state causing cancelation
this._snippetListener.clear(),opts.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(template,opts):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new SnippetSession(this._editor,template,opts),this._session.insert()),opts.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((e=>e.isFlush&&this.cancel()))),this._snippetListener.add(this._editor.onDidChangeModel((()=>this.cancel()))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((()=>this._updateState()))))}_updateState(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())
// undo until the 'before' state happened
// and makes use cancel snippet mode
return this.cancel();if(!this._session.hasPlaceholder)
// don't listen for selection changes and don't
// update context keys when the snippet is plain text
return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);const{choice:choice}=this._session;if(choice){if(this._currentChoice!==choice){this._currentChoice=choice,this._editor.setSelections(this._editor.getSelections().map((s=>core_selection/* Selection */.Y.fromPositions(s.getStartPosition()))));const[first]=choice.options;(0,suggest/* showSimpleSuggestions */.i5)(this._editor,choice.options.map(((option,i)=>({kind:13/* Value */,label:option.value,insertText:option.value,
// insertText: `\${1|${after.concat(before).join(',')}|}$0`,
// snippetType: 'textmate',
sortText:"a".repeat(i+1),range:core_range/* Range */.e.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,first.value.length))}))))}}else this._currentChoice=void 0}finish(){while(this._inSnippet.get())this.next()}cancel(resetSelection=!1){var _a;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),null===(_a=this._session)||void 0===_a||_a.dispose(),this._session=void 0,this._modelVersionId=-1,resetSelection&&
// reset selection to the primary cursor when being asked
// for. this happens when explicitly cancelling snippet mode,
// e.g. when pressing ESC
this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};SnippetController2.ID="snippetController2",SnippetController2.InSnippetMode=new contextkey/* RawContextKey */.uy("inSnippetMode",!1,(0,nls/* localize */.N)("inSnippetMode","Whether the editor in current in snippet mode")),SnippetController2.HasNextTabstop=new contextkey/* RawContextKey */.uy("hasNextTabstop",!1,(0,nls/* localize */.N)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),SnippetController2.HasPrevTabstop=new contextkey/* RawContextKey */.uy("hasPrevTabstop",!1,(0,nls/* localize */.N)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),SnippetController2=snippetController2_decorate([snippetController2_param(1,log/* ILogService */.VZ),snippetController2_param(2,contextkey/* IContextKeyService */.i6)],SnippetController2),(0,editorExtensions/* registerEditorContribution */._K)(SnippetController2.ID,SnippetController2);const CommandCtor=editorExtensions/* EditorCommand */._l.bindToContribution(SnippetController2.get);(0,editorExtensions/* registerEditorCommand */.fK)(new CommandCtor({id:"jumpToNextSnippetPlaceholder",precondition:contextkey/* ContextKeyExpr */.Ao.and(SnippetController2.InSnippetMode,SnippetController2.HasNextTabstop),handler:ctrl=>ctrl.next(),kbOpts:{weight:130,kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2/* Tab */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new CommandCtor({id:"jumpToPrevSnippetPlaceholder",precondition:contextkey/* ContextKeyExpr */.Ao.and(SnippetController2.InSnippetMode,SnippetController2.HasPrevTabstop),handler:ctrl=>ctrl.prev(),kbOpts:{weight:130,kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1026/* Tab */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new CommandCtor({id:"leaveSnippet",precondition:SnippetController2.InSnippetMode,handler:ctrl=>ctrl.cancel(!0),kbOpts:{weight:130,kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:9/* Escape */,secondary:[1033/* Escape */]}})),(0,editorExtensions/* registerEditorCommand */.fK)(new CommandCtor({id:"acceptSnippet",precondition:SnippetController2.InSnippetMode,handler:ctrl=>ctrl.finish()
// kbOpts: {
// 	weight: KeybindingWeight.EditorContrib + 30,
// 	kbExpr: EditorContextKeys.textFocus,
// 	primary: KeyCode.Enter,
// }
}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestMemory.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var suggestMemory_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestMemory_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};class Memory{constructor(name){this.name=name}select(model,pos,items){if(0===items.length)return 0;let topScore=items[0].score[0];for(let i=0;i<items.length;i++){const{score:score,completion:suggestion}=items[i];if(score[0]!==topScore)
// stop when leaving the group of top matches
break;if(suggestion.preselect)
// stop when seeing an auto-select-item
return i}return 0}}class NoMemory extends Memory{constructor(){super("first")}memorize(model,pos,item){
// no-op
}toJSON(){}fromJSON(){

}}class LRUMemory extends Memory{constructor(){super("recentlyUsed"),this._cache=new map/* LRUCache */.z6(300,.66),this._seq=0}memorize(model,pos,item){const key=`${model.getLanguageId()}/${item.textLabel}`;this._cache.set(key,{touch:this._seq++,type:item.completion.kind,insertText:item.completion.insertText})}select(model,pos,items){if(0===items.length)return 0;const lineSuffix=model.getLineContent(pos.lineNumber).substr(pos.column-10,pos.column-1);if(/\s$/.test(lineSuffix))return super.select(model,pos,items);let topScore=items[0].score[0],indexPreselect=-1,indexRecency=-1,seq=-1;for(let i=0;i<items.length;i++){if(items[i].score[0]!==topScore)
// consider only top items
break;const key=`${model.getLanguageId()}/${items[i].textLabel}`,item=this._cache.peek(key);if(item&&item.touch>seq&&item.type===items[i].completion.kind&&item.insertText===items[i].completion.insertText&&(seq=item.touch,indexRecency=i),items[i].completion.preselect&&-1===indexPreselect)
// stop when seeing an auto-select-item
return i}return-1!==indexRecency?indexRecency:-1!==indexPreselect?indexPreselect:0}toJSON(){return this._cache.toJSON()}fromJSON(data){this._cache.clear();let seq=0;for(const[key,value]of data)value.touch=seq,value.type="number"===typeof value.type?value.type:(0,modes/* completionKindFromString */.jr)(value.type),this._cache.set(key,value);this._seq=this._cache.size}}class PrefixMemory extends Memory{constructor(){super("recentlyUsedByPrefix"),this._trie=map/* TernarySearchTree */.Id.forStrings(),this._seq=0}memorize(model,pos,item){const{word:word}=model.getWordUntilPosition(pos),key=`${model.getLanguageId()}/${word}`;this._trie.set(key,{type:item.completion.kind,insertText:item.completion.insertText,touch:this._seq++})}select(model,pos,items){let{word:word}=model.getWordUntilPosition(pos);if(!word)return super.select(model,pos,items);let key=`${model.getLanguageId()}/${word}`,item=this._trie.get(key);if(item||(item=this._trie.findSubstr(key)),item)for(let i=0;i<items.length;i++){let{kind:kind,insertText:insertText}=items[i].completion;if(kind===item.type&&insertText===item.insertText)return i}return super.select(model,pos,items)}toJSON(){let entries=[];return this._trie.forEach(((value,key)=>entries.push([key,value]))),
// sort by last recently used (touch), then
// take the top 200 item and normalize their
// touch
entries.sort(((a,b)=>-(a[1].touch-b[1].touch))).forEach(((value,i)=>value[1].touch=i)),entries.slice(0,200)}fromJSON(data){if(this._trie.clear(),data.length>0){this._seq=data[0][1].touch+1;for(const[key,value]of data)value.type="number"===typeof value.type?value.type:(0,modes/* completionKindFromString */.jr)(value.type),this._trie.set(key,value)}}}let SuggestMemoryService=class SuggestMemoryService{constructor(_storageService,_configService){this._storageService=_storageService,this._configService=_configService,this._disposables=new lifecycle/* DisposableStore */.SL,this._persistSoon=new common_async/* RunOnceScheduler */.pY((()=>this._saveState()),500),this._disposables.add(_storageService.onWillSaveState((e=>{e.reason===storage/* WillSaveStateReason */.fk.SHUTDOWN&&this._saveState()})))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(model,pos,item){this._withStrategy(model,pos).memorize(model,pos,item),this._persistSoon.schedule()}select(model,pos,items){return this._withStrategy(model,pos).select(model,pos,items)}_withStrategy(model,pos){var _a;const mode=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:model.getLanguageIdAtPosition(pos.lineNumber,pos.column),resource:model.uri});if((null===(_a=this._strategy)||void 0===_a?void 0:_a.name)!==mode){this._saveState();const ctor=SuggestMemoryService._strategyCtors.get(mode)||NoMemory;this._strategy=new ctor;try{const share=this._configService.getValue("editor.suggest.shareSuggestSelections"),scope=share?0/* GLOBAL */:1/* WORKSPACE */,raw=this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`,scope);raw&&this._strategy.fromJSON(JSON.parse(raw))}catch(e){
// things can go wrong with JSON...
}}return this._strategy}_saveState(){if(this._strategy){const share=this._configService.getValue("editor.suggest.shareSuggestSelections"),scope=share?0/* GLOBAL */:1/* WORKSPACE */,raw=JSON.stringify(this._strategy);this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`,raw,scope,1/* MACHINE */)}}};SuggestMemoryService._strategyCtors=new Map([["recentlyUsedByPrefix",PrefixMemory],["recentlyUsed",LRUMemory],["first",NoMemory]]),SuggestMemoryService._storagePrefix="suggest/memories",SuggestMemoryService=suggestMemory_decorate([suggestMemory_param(0,storage/* IStorageService */.Uy),suggestMemory_param(1,configuration/* IConfigurationService */.Ui)],SuggestMemoryService);const ISuggestMemoryService=(0,instantiation/* createDecorator */.yh)("ISuggestMemories");(0,extensions/* registerSingleton */.z)(ISuggestMemoryService,SuggestMemoryService,!0);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/wordContextKey.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var wordContextKey_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},wordContextKey_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let WordContextKey=class WordContextKey{constructor(_editor,contextKeyService){this._editor=_editor,this._enabled=!1,this._ckAtEnd=WordContextKey.AtEnd.bindTo(contextKeyService),this._configListener=this._editor.onDidChangeConfiguration((e=>e.hasChanged(110/* tabCompletion */)&&this._update())),this._update()}dispose(){var _a;this._configListener.dispose(),null===(_a=this._selectionListener)||void 0===_a||_a.dispose(),this._ckAtEnd.reset()}_update(){
// only update this when tab completions are enabled
const enabled="on"===this._editor.getOption(110/* tabCompletion */);if(this._enabled!==enabled)if(this._enabled=enabled,this._enabled){const checkForWordEnd=()=>{if(!this._editor.hasModel())return void this._ckAtEnd.set(!1);const model=this._editor.getModel(),selection=this._editor.getSelection(),word=model.getWordAtPosition(selection.getStartPosition());word?this._ckAtEnd.set(word.endColumn===selection.getStartPosition().column):this._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(checkForWordEnd),checkForWordEnd()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};WordContextKey.AtEnd=new contextkey/* RawContextKey */.uy("atEndOfWord",!1),WordContextKey=wordContextKey_decorate([wordContextKey_param(1,contextkey/* IContextKeyService */.i6)],WordContextKey);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestAlternatives.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var suggestAlternatives_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestAlternatives_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let SuggestAlternatives=class SuggestAlternatives{constructor(_editor,contextKeyService){this._editor=_editor,this._index=0,this._ckOtherSuggestions=SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService)}dispose(){this.reset()}reset(){var _a;this._ckOtherSuggestions.reset(),null===(_a=this._listener)||void 0===_a||_a.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:model,index:index},acceptNext){
// no suggestions -> nothing to do
if(0===model.items.length)return void this.reset();
// no alternative suggestions -> nothing to do
let nextIndex=SuggestAlternatives._moveIndex(!0,model,index);nextIndex!==index?(this._acceptNext=acceptNext,this._model=model,this._index=index,this._listener=this._editor.onDidChangeCursorPosition((()=>{this._ignore||this.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(fwd,model,index){let newIndex=index;while(1){if(newIndex=(newIndex+model.items.length+(fwd?1:-1))%model.items.length,newIndex===index)break;if(!model.items[newIndex].completion.additionalTextEdits)break}return newIndex}next(){this._move(!0)}prev(){this._move(!1)}_move(fwd){if(this._model)try{this._ignore=!0,this._index=SuggestAlternatives._moveIndex(fwd,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};SuggestAlternatives.OtherSuggestions=new contextkey/* RawContextKey */.uy("hasOtherSuggestions",!1),SuggestAlternatives=suggestAlternatives_decorate([suggestAlternatives_param(1,contextkey/* IContextKeyService */.i6)],SuggestAlternatives);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/core/characterClassifier.js
var characterClassifier=__webpack_require__(744906);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestCommitCharacters.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class CommitCharacterController{constructor(editor,widget,accept){this._disposables=new lifecycle/* DisposableStore */.SL,this._disposables.add(widget.onDidShow((()=>this._onItem(widget.getFocusedItem())))),this._disposables.add(widget.onDidFocus(this._onItem,this)),this._disposables.add(widget.onDidHide(this.reset,this)),this._disposables.add(editor.onWillType((text=>{if(this._active&&!widget.isFrozen()){const ch=text.charCodeAt(text.length-1);this._active.acceptCharacters.has(ch)&&editor.getOption(0/* acceptSuggestionOnCommitCharacter */)&&accept(this._active.item)}})))}_onItem(selected){if(!selected||!(0,arrays/* isNonEmptyArray */.Of)(selected.item.completion.commitCharacters))
// no item or no commit characters
return void this.reset();if(this._active&&this._active.item.item===selected.item)
// still the same item
return;
// keep item and its commit characters
const acceptCharacters=new characterClassifier/* CharacterSet */.q;for(const ch of selected.item.completion.commitCharacters)ch.length>0&&acceptCharacters.add(ch.charCodeAt(0));this._active={acceptCharacters:acceptCharacters,item:selected}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerService.js
var editorWorkerService=__webpack_require__(590469),bracketSelections_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class BracketSelectionRangeProvider{provideSelectionRanges(model,positions){return bracketSelections_awaiter(this,void 0,void 0,(function*(){const result=[];for(const position of positions){const bucket=[];result.push(bucket);const ranges=new Map;yield new Promise((resolve=>BracketSelectionRangeProvider._bracketsRightYield(resolve,0,model,position,ranges))),yield new Promise((resolve=>BracketSelectionRangeProvider._bracketsLeftYield(resolve,0,model,position,ranges,bucket)))}return result}))}static _bracketsRightYield(resolve,round,model,pos,ranges){const counts=new Map,t1=Date.now();while(1){if(round>=BracketSelectionRangeProvider._maxRounds){resolve();break}if(!pos){resolve();break}let bracket=model.findNextBracket(pos);if(!bracket){resolve();break}let d=Date.now()-t1;if(d>BracketSelectionRangeProvider._maxDuration){setTimeout((()=>BracketSelectionRangeProvider._bracketsRightYield(resolve,round+1,model,pos,ranges)));break}const key=bracket.close[0];if(bracket.isOpen){
// wait for closing
let val=counts.has(key)?counts.get(key):0;counts.set(key,val+1)}else{
// process closing
let val=counts.has(key)?counts.get(key):0;if(val-=1,counts.set(key,Math.max(0,val)),val<0){let list=ranges.get(key);list||(list=new linkedList/* LinkedList */.S,ranges.set(key,list)),list.push(bracket.range)}}pos=bracket.range.getEndPosition()}}static _bracketsLeftYield(resolve,round,model,pos,ranges,bucket){const counts=new Map,t1=Date.now();while(1){if(round>=BracketSelectionRangeProvider._maxRounds&&0===ranges.size){resolve();break}if(!pos){resolve();break}let bracket=model.findPrevBracket(pos);if(!bracket){resolve();break}let d=Date.now()-t1;if(d>BracketSelectionRangeProvider._maxDuration){setTimeout((()=>BracketSelectionRangeProvider._bracketsLeftYield(resolve,round+1,model,pos,ranges,bucket)));break}const key=bracket.close[0];if(bracket.isOpen){
// opening
let val=counts.has(key)?counts.get(key):0;if(val-=1,counts.set(key,Math.max(0,val)),val<0){let list=ranges.get(key);if(list){let closing=list.shift();0===list.size&&ranges.delete(key);const innerBracket=core_range/* Range */.e.fromPositions(bracket.range.getEndPosition(),closing.getStartPosition()),outerBracket=core_range/* Range */.e.fromPositions(bracket.range.getStartPosition(),closing.getEndPosition());bucket.push({range:innerBracket}),bucket.push({range:outerBracket}),BracketSelectionRangeProvider._addBracketLeading(model,outerBracket,bucket)}}}else{
// wait for opening
let val=counts.has(key)?counts.get(key):0;counts.set(key,val+1)}pos=bracket.range.getStartPosition()}}static _addBracketLeading(model,bracket,bucket){if(bracket.startLineNumber===bracket.endLineNumber)return;
// xxxxxxxx {

// }
const startLine=bracket.startLineNumber,column=model.getLineFirstNonWhitespaceColumn(startLine);0!==column&&column!==bracket.startColumn&&(bucket.push({range:core_range/* Range */.e.fromPositions(new core_position/* Position */.L(startLine,column),bracket.getEndPosition())}),bucket.push({range:core_range/* Range */.e.fromPositions(new core_position/* Position */.L(startLine,1),bracket.getEndPosition())}));
// xxxxxxxx
// {

// }
const aboveLine=startLine-1;if(aboveLine>0){const column=model.getLineFirstNonWhitespaceColumn(aboveLine);column===bracket.startColumn&&column!==model.getLineLastNonWhitespaceColumn(aboveLine)&&(bucket.push({range:core_range/* Range */.e.fromPositions(new core_position/* Position */.L(aboveLine,column),bracket.getEndPosition())}),bucket.push({range:core_range/* Range */.e.fromPositions(new core_position/* Position */.L(aboveLine,1),bracket.getEndPosition())}))}}}BracketSelectionRangeProvider._maxDuration=30,BracketSelectionRangeProvider._maxRounds=2;// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/wordDistance.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var wordDistance_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class WordDistance{static create(service,editor){return wordDistance_awaiter(this,void 0,void 0,(function*(){if(!editor.getOption(105/* suggest */).localityBonus)return WordDistance.None;if(!editor.hasModel())return WordDistance.None;const model=editor.getModel(),position=editor.getPosition();if(!service.canComputeWordRanges(model.uri))return WordDistance.None;const[ranges]=yield(new BracketSelectionRangeProvider).provideSelectionRanges(model,[position]);if(0===ranges.length)return WordDistance.None;const wordRanges=yield service.computeWordRanges(model.uri,ranges[0].range);if(!wordRanges)return WordDistance.None;
// remove current word
const wordUntilPos=model.getWordUntilPosition(position);return delete wordRanges[wordUntilPos.word],new class extends WordDistance{distance(anchor,item){if(!position.equals(editor.getPosition()))return 0;if(17/* Keyword */===item.kind)return 2<<20;let word="string"===typeof item.label?item.label:item.label.label,wordLines=wordRanges[word];if((0,arrays/* isFalsyOrEmpty */.XY)(wordLines))return 2<<20;let idx=(0,arrays/* binarySearch */.ry)(wordLines,core_range/* Range */.e.fromPositions(anchor),core_range/* Range */.e.compareRangesUsingStarts),bestWordRange=idx>=0?wordLines[idx]:wordLines[Math.max(0,~idx-1)],blockDistance=ranges.length;for(const range of ranges){if(!core_range/* Range */.e.containsRange(range.range,bestWordRange))break;blockDistance-=1}return blockDistance}}}))}}WordDistance.None=new class extends WordDistance{distance(){return 0}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/filters.js
var filters=__webpack_require__(75392);
/**
 * Sorted, filtered completion view model
 * */
class CompletionModel{constructor(items,column,lineContext,wordDistance,options,snippetSuggestions,clipboardText){this.clipboardText=clipboardText,this._snippetCompareFn=CompletionModel._compareCompletionItems,this._items=items,this._column=column,this._wordDistance=wordDistance,this._options=options,this._refilterKind=1/* All */,this._lineContext=lineContext,"top"===snippetSuggestions?this._snippetCompareFn=CompletionModel._compareCompletionItemsSnippetsUp:"bottom"===snippetSuggestions&&(this._snippetCompareFn=CompletionModel._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(value){this._lineContext.leadingLineContent===value.leadingLineContent&&this._lineContext.characterCountDelta===value.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<value.characterCountDelta&&this._filteredItems?2/* Incr */:1/* All */,this._lineContext=value)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const result=new Set;for(let[provider,incomplete]of this._providerInfo)incomplete&&result.add(provider);return result}adopt(except){let res=[];for(let i=0;i<this._items.length;)except.has(this._items[i].provider)?
// continue with next item
i++:(res.push(this._items[i]),
// unordered removed
this._items[i]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1/* All */,res}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){0/* Nothing */!==this._refilterKind&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const labelLengths=[],{leadingLineContent:leadingLineContent,characterCountDelta:characterCountDelta}=this._lineContext;let word="",wordLow="";
// incrementally filter less
const source=1/* All */===this._refilterKind?this._items:this._filteredItems,target=[],scoreFn=!this._options.filterGraceful||source.length>2e3?filters/* fuzzyScore */.EW:filters/* fuzzyScoreGracefulAggressive */.l7;for(let i=0;i<source.length;i++){const item=source[i];if(item.isInvalid)continue;// SKIP invalid items
// collect all support, know if their result is incomplete
this._providerInfo.set(item.provider,Boolean(item.container.incomplete));
// 'word' is that remainder of the current line that we
// filter and score against. In theory each suggestion uses a
// different word, but in practice not - that's why we cache
const overwriteBefore=item.position.column-item.editStart.column,wordLen=overwriteBefore+characterCountDelta-(item.position.column-this._column);if(word.length!==wordLen&&(word=0===wordLen?"":leadingLineContent.slice(-wordLen),wordLow=word.toLowerCase()),
// remember the word against which this item was
// scored
item.word=word,0===wordLen)
// when there is nothing to score against, don't
// event try to do. Use a const rank and rely on
// the fallback-sort using the initial sort order.
// use a score of `-100` because that is out of the
// bound of values `fuzzyScore` will return
item.score=filters/* FuzzyScore */.CL.Default;else{
// skip word characters that are whitespace until
// we have hit the replace range (overwriteBefore)
let wordPos=0;while(wordPos<overwriteBefore){const ch=word.charCodeAt(wordPos);if(32/* Space */!==ch&&9/* Tab */!==ch)break;wordPos+=1}if(wordPos>=wordLen)
// the wordPos at which scoring starts is the whole word
// and therefore the same rules as not having a word apply
item.score=filters/* FuzzyScore */.CL.Default;else if("string"===typeof item.completion.filterText){
// when there is a `filterText` it must match the `word`.
// if it matches we check with the label to compute highlights
// and if that doesn't yield a result we have no highlights,
// despite having the match
let match=scoreFn(word,wordLow,wordPos,item.completion.filterText,item.filterTextLow,0,!1);if(!match)continue;// NO match
0===(0,strings/* compareIgnoreCase */.zY)(item.completion.filterText,item.textLabel)?
// filterText and label are actually the same -> use good highlights
item.score=match:(
// re-run the scorer on the label in the hope of a result BUT use the rank
// of the filterText-match
item.score=(0,filters/* anyScore */.jB)(word,wordLow,wordPos,item.textLabel,item.labelLow,0),item.score[0]=match[0])}else{
// by default match `word` against the `label`
let match=scoreFn(word,wordLow,wordPos,item.textLabel,item.labelLow,0,!1);if(!match)continue;// NO match
item.score=match}}item.idx=i,item.distance=this._wordDistance.distance(item.position,item.completion),target.push(item),
// update stats
labelLengths.push(item.textLabel.length)}this._filteredItems=target.sort(this._snippetCompareFn),this._refilterKind=0/* Nothing */,this._stats={pLabelLen:labelLengths.length?(0,arrays/* quickSelect */.HW)(labelLengths.length-.85,labelLengths,((a,b)=>a-b)):0}}static _compareCompletionItems(a,b){return a.score[0]>b.score[0]?-1:a.score[0]<b.score[0]?1:a.distance<b.distance?-1:a.distance>b.distance?1:a.idx<b.idx?-1:a.idx>b.idx?1:0}static _compareCompletionItemsSnippetsDown(a,b){if(a.completion.kind!==b.completion.kind){if(27/* Snippet */===a.completion.kind)return 1;if(27/* Snippet */===b.completion.kind)return-1}return CompletionModel._compareCompletionItems(a,b)}static _compareCompletionItemsSnippetsUp(a,b){if(a.completion.kind!==b.completion.kind){if(27/* Snippet */===a.completion.kind)return-1;if(27/* Snippet */===b.completion.kind)return 1}return CompletionModel._compareCompletionItems(a,b)}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var suggestModel_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestModel_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},suggestModel_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class suggestModel_LineContext{constructor(model,position,auto,shy){this.leadingLineContent=model.getLineContent(position.lineNumber).substr(0,position.column-1),this.leadingWord=model.getWordUntilPosition(position),this.lineNumber=position.lineNumber,this.column=position.column,this.auto=auto,this.shy=shy}static shouldAutoTrigger(editor){if(!editor.hasModel())return!1;const model=editor.getModel(),pos=editor.getPosition();model.tokenizeIfCheap(pos.lineNumber);const word=model.getWordAtPosition(pos);return!!word&&(word.endColumn===pos.column&&!!isNaN(Number(word.word)))}}function canShowQuickSuggest(editor,contextKeyService,configurationService){if(!Boolean(contextKeyService.getContextKeyValue("inlineSuggestionVisible")))
// Allow if there is no inline suggestion.
return!0;const allowQuickSuggestions=configurationService.getValue("editor.inlineSuggest.allowQuickSuggestions");return void 0!==allowQuickSuggestions&&Boolean(allowQuickSuggestions);
// Don't allow if inline suggestions are visible and no suggest preview is configured.
// TODO disabled for copilot
}function canShowSuggestOnTriggerCharacters(editor,contextKeyService,configurationService){if(!Boolean(contextKeyService.getContextKeyValue("inlineSuggestionVisible")))
// Allow if there is no inline suggestion.
return!0;const allowQuickSuggestions=configurationService.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return void 0!==allowQuickSuggestions&&Boolean(allowQuickSuggestions);
// Don't allow if inline suggestions are visible and no suggest preview is configured.
// TODO disabled for copilot
}let SuggestModel=class SuggestModel{constructor(_editor,_editorWorkerService,_clipboardService,_telemetryService,_logService,_contextKeyService,_configurationService){this._editor=_editor,this._editorWorkerService=_editorWorkerService,this._clipboardService=_clipboardService,this._telemetryService=_telemetryService,this._logService=_logService,this._contextKeyService=_contextKeyService,this._configurationService=_configurationService,this._toDispose=new lifecycle/* DisposableStore */.SL,this._quickSuggestDelay=10,this._triggerCharacterListener=new lifecycle/* DisposableStore */.SL,this._triggerQuickSuggest=new common_async/* TimeoutTimer */._F,this._state=0/* Idle */,this._completionDisposables=new lifecycle/* DisposableStore */.SL,this._onDidCancel=new common_event/* Emitter */.Q5,this._onDidTrigger=new common_event/* Emitter */.Q5,this._onDidSuggest=new common_event/* Emitter */.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new core_selection/* Selection */.Y(1,1,1,1),
// wire up various listeners
this._toDispose.add(this._editor.onDidChangeModel((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()}))),this._toDispose.add(modes/* CompletionProviderRegistry */.KZ.onDidChange((()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._onCursorChange(e)})));let editorIsComposing=!1;this._toDispose.add(this._editor.onDidCompositionStart((()=>{editorIsComposing=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((()=>{editorIsComposing=!1,this._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeModelContent((()=>{
// only filter completions when the editor isn't
// composing a character, e.g.  + u makes  but just
//  cannot be used for filtering
editorIsComposing||this._refilterCompletionItems()}))),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){(0,lifecycle/* dispose */.B9)(this._triggerCharacterListener),(0,lifecycle/* dispose */.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}
// --- handle configuration & precondition changes
_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79/* quickSuggestionsDelay */),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&0!==this._quickSuggestDelay||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80/* readOnly */)||!this._editor.hasModel()||!this._editor.getOption(108/* suggestOnTriggerCharacters */))return;const supportsByTriggerCharacter=new Map;for(const support of modes/* CompletionProviderRegistry */.KZ.all(this._editor.getModel()))for(const ch of support.triggerCharacters||[]){let set=supportsByTriggerCharacter.get(ch);set||(set=new Set,set.add((0,suggest/* getSnippetSuggestSupport */.ZJ)()),supportsByTriggerCharacter.set(ch,set)),set.add(support)}const checkTriggerCharacter=text=>{if(!canShowSuggestOnTriggerCharacters(this._editor,this._contextKeyService,this._configurationService))return;if(suggestModel_LineContext.shouldAutoTrigger(this._editor))
// don't trigger by trigger characters when this is a case for quick suggest
return;if(!text){
// came here from the compositionEnd-event
const position=this._editor.getPosition(),model=this._editor.getModel();text=model.getLineContent(position.lineNumber).substr(0,position.column-1)}let lastChar="";(0,strings/* isLowSurrogate */.YK)(text.charCodeAt(text.length-1))?(0,strings/* isHighSurrogate */.ZG)(text.charCodeAt(text.length-2))&&(lastChar=text.substr(text.length-2)):lastChar=text.charAt(text.length-1);const supports=supportsByTriggerCharacter.get(lastChar);if(supports){
// keep existing items that where not computed by the
// supports/providers that want to trigger now
const existing=this._completionModel?{items:this._completionModel.adopt(supports),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:lastChar},Boolean(this._completionModel),supports,existing)}};this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(checkTriggerCharacter))}
// --- trigger/retrigger/cancel suggest
get state(){return this._state}cancel(retrigger=!1){var _a;0/* Idle */!==this._state&&(this._triggerQuickSuggest.cancel(),null===(_a=this._requestToken)||void 0===_a||_a.cancel(),this._requestToken=void 0,this._state=0/* Idle */,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:retrigger}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){0/* Idle */!==this._state&&(this._editor.hasModel()&&modes/* CompletionProviderRegistry */.KZ.has(this._editor.getModel())?this.trigger({auto:2/* Auto */===this._state,shy:!1},!0):this.cancel())}_onCursorChange(e){if(!this._editor.hasModel())return;const prevSelection=this._currentSelection;this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0/* NotSet */!==e.reason&&3/* Explicit */!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source?
// Early exit if nothing needs to be done!
// Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)
this.cancel():0/* Idle */===this._state&&0/* NotSet */===e.reason?(prevSelection.containsRange(this._currentSelection)||prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&
// cursor did move RIGHT due to typing -> trigger quick suggest
this._doTriggerQuickSuggest():0/* Idle */!==this._state&&3/* Explicit */===e.reason&&
// suggest is active and something like cursor keys are used to move
// the cursor. this means we can refilter at the new position
this._refilterCompletionItems()}_onCompositionEnd(){
// trigger or refilter when composition ends
0/* Idle */===this._state?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){!1!==this._editor.getOption(78/* quickSuggestions */)&&(this._editor.getOption(105/* suggest */).snippetsPreventQuickSuggestions&&SnippetController2.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((()=>{if(0/* Idle */!==this._state)return;if(!suggestModel_LineContext.shouldAutoTrigger(this._editor))return;if(!this._editor.hasModel())return;const model=this._editor.getModel(),pos=this._editor.getPosition(),quickSuggestions=this._editor.getOption(78/* quickSuggestions */);if(!1!==quickSuggestions){if(!0===quickSuggestions);else{
// Check the type of the token that triggered this
model.tokenizeIfCheap(pos.lineNumber);const lineTokens=model.getLineTokens(pos.lineNumber),tokenType=lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column-1-1,0))),inValidScope=quickSuggestions.other&&0/* Other */===tokenType||quickSuggestions.comments&&1/* Comment */===tokenType||quickSuggestions.strings&&2/* String */===tokenType;if(!inValidScope)return}canShowQuickSuggest(this._editor,this._contextKeyService,this._configurationService)&&modes/* CompletionProviderRegistry */.KZ.has(model)&&
// we made it till here -> trigger now
this.trigger({auto:!0,shy:!1})}}),this._quickSuggestDelay)))}_refilterCompletionItems(){
// Re-filter suggestions. This MUST run async because filtering/scoring
// uses the model content AND the cursor position. The latter is NOT
// updated when the document has changed (the event which drives this method)
// and therefore a little pause (next mirco task) is needed. See:
// https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985
Promise.resolve().then((()=>{if(0/* Idle */===this._state)return;if(!this._editor.hasModel())return;const model=this._editor.getModel(),position=this._editor.getPosition(),ctx=new suggestModel_LineContext(model,position,2/* Auto */===this._state,!1);this._onNewContext(ctx)}))}trigger(context,retrigger=!1,onlyFrom,existing){var _a;if(!this._editor.hasModel())return;const model=this._editor.getModel(),auto=context.auto,ctx=new suggestModel_LineContext(model,this._editor.getPosition(),auto,context.shy);
// Cancel previous requests, change state & update UI
this.cancel(retrigger),this._state=auto?2/* Auto */:1/* Manual */,this._onDidTrigger.fire({auto:auto,shy:context.shy,position:this._editor.getPosition()}),
// Capture context when request was sent
this._context=ctx;
// Build context for request
let suggestCtx={triggerKind:null!==(_a=context.triggerKind)&&void 0!==_a?_a:0/* Invoke */};context.triggerCharacter&&(suggestCtx={triggerKind:1/* TriggerCharacter */,triggerCharacter:context.triggerCharacter}),this._requestToken=new cancellation/* CancellationTokenSource */.A;
// kind filter and snippet sort rules
const snippetSuggestions=this._editor.getOption(100/* snippetSuggestions */);let snippetSortOrder=1/* Inline */;switch(snippetSuggestions){case"top":snippetSortOrder=0/* Top */;break;
// 	 that's the default anyways...
// case 'inline':
// 	snippetSortOrder = SnippetSortOrder.Inline;
// 	break;
case"bottom":snippetSortOrder=2/* Bottom */;break}const{itemKind:itemKindFilter,showDeprecated:showDeprecated}=SuggestModel._createSuggestFilter(this._editor),wordDistance=WordDistance.create(this._editorWorkerService,this._editor),completions=(0,suggest/* provideSuggestionItems */.kL)(model,this._editor.getPosition(),new suggest/* CompletionOptions */.A9(snippetSortOrder,itemKindFilter,onlyFrom,showDeprecated),suggestCtx,this._requestToken.token);Promise.all([completions,wordDistance]).then((([completions,wordDistance])=>suggestModel_awaiter(this,void 0,void 0,(function*(){var _b;if(null===(_b=this._requestToken)||void 0===_b||_b.dispose(),!this._editor.hasModel())return;let clipboardText=null===existing||void 0===existing?void 0:existing.clipboardText;if(!clipboardText&&completions.needsClipboard&&(clipboardText=yield this._clipboardService.readText()),0/* Idle */===this._state)return;const model=this._editor.getModel();let items=completions.items;if(existing){const cmpFn=(0,suggest/* getSuggestionComparator */.wg)(snippetSortOrder);items=items.concat(existing.items).sort(cmpFn)}const ctx=new suggestModel_LineContext(model,this._editor.getPosition(),auto,context.shy);this._completionModel=new CompletionModel(items,this._context.column,{leadingLineContent:ctx.leadingLineContent,characterCountDelta:ctx.column-this._context.column},wordDistance,this._editor.getOption(105/* suggest */),this._editor.getOption(100/* snippetSuggestions */),clipboardText),
// store containers so that they can be disposed later
this._completionDisposables.add(completions.disposable),this._onNewContext(ctx),
// finally report telemetry about durations
this._reportDurationsTelemetry(completions.durations)})))).catch(errors/* onUnexpectedError */.dL)}_reportDurationsTelemetry(durations){this._telemetryGate++%230===0&&setTimeout((()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(durations)}),this._logService.debug("suggest.durations.json",durations)}))}static _createSuggestFilter(editor){
// kind filter and snippet sort rules
const result=new Set,snippetSuggestions=editor.getOption(100/* snippetSuggestions */);
// snippet setting
"none"===snippetSuggestions&&result.add(27/* Snippet */);
// type setting
const suggestOptions=editor.getOption(105/* suggest */);return suggestOptions.showMethods||result.add(0/* Method */),suggestOptions.showFunctions||result.add(1/* Function */),suggestOptions.showConstructors||result.add(2/* Constructor */),suggestOptions.showFields||result.add(3/* Field */),suggestOptions.showVariables||result.add(4/* Variable */),suggestOptions.showClasses||result.add(5/* Class */),suggestOptions.showStructs||result.add(6/* Struct */),suggestOptions.showInterfaces||result.add(7/* Interface */),suggestOptions.showModules||result.add(8/* Module */),suggestOptions.showProperties||result.add(9/* Property */),suggestOptions.showEvents||result.add(10/* Event */),suggestOptions.showOperators||result.add(11/* Operator */),suggestOptions.showUnits||result.add(12/* Unit */),suggestOptions.showValues||result.add(13/* Value */),suggestOptions.showConstants||result.add(14/* Constant */),suggestOptions.showEnums||result.add(15/* Enum */),suggestOptions.showEnumMembers||result.add(16/* EnumMember */),suggestOptions.showKeywords||result.add(17/* Keyword */),suggestOptions.showWords||result.add(18/* Text */),suggestOptions.showColors||result.add(19/* Color */),suggestOptions.showFiles||result.add(20/* File */),suggestOptions.showReferences||result.add(21/* Reference */),suggestOptions.showColors||result.add(22/* Customcolor */),suggestOptions.showFolders||result.add(23/* Folder */),suggestOptions.showTypeParameters||result.add(24/* TypeParameter */),suggestOptions.showSnippets||result.add(27/* Snippet */),suggestOptions.showUsers||result.add(25/* User */),suggestOptions.showIssues||result.add(26/* Issue */),{itemKind:result,showDeprecated:suggestOptions.showDeprecated}}_onNewContext(ctx){if(this._context)if(ctx.lineNumber===this._context.lineNumber)if((0,strings/* getLeadingWhitespace */.V8)(ctx.leadingLineContent)===(0,strings/* getLeadingWhitespace */.V8)(this._context.leadingLineContent)){if(ctx.column<this._context.column)
// typed -> moved cursor LEFT -> retrigger if still on a word
ctx.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();else if(this._completionModel)if(0!==ctx.leadingWord.word.length&&ctx.leadingWord.startColumn>this._context.leadingWord.startColumn){
// started a new word while IntelliSense shows -> retrigger
// Select those providers have not contributed to this completion model and re-trigger completions for
// them. Also adopt the existing items and merge them into the new completion model
const inactiveProvider=new Set(modes/* CompletionProviderRegistry */.KZ.all(this._editor.getModel()));for(let provider of this._completionModel.allProvider)inactiveProvider.delete(provider);const items=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,inactiveProvider,{items:items,clipboardText:this._completionModel.clipboardText})}else if(ctx.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==ctx.leadingWord.word.length){
// typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger
const{incomplete:incomplete}=this._completionModel,items=this._completionModel.adopt(incomplete);this.trigger({auto:2/* Auto */===this._state,shy:!1,triggerKind:2/* TriggerForIncompleteCompletions */},!0,incomplete,{items:items,clipboardText:this._completionModel.clipboardText})}else{
// typed -> moved cursor RIGHT -> update UI
let oldLineContext=this._completionModel.lineContext,isFrozen=!1;if(this._completionModel.lineContext={leadingLineContent:ctx.leadingLineContent,characterCountDelta:ctx.column-this._context.column},0===this._completionModel.items.length){if(suggestModel_LineContext.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<ctx.leadingWord.startColumn)
// retrigger when heading into a new word
return void this.trigger({auto:this._context.auto,shy:!1},!0);if(this._context.auto)
// nothing left
return void this.cancel();if(
// freeze when IntelliSense was manually requested
this._completionModel.lineContext=oldLineContext,isFrozen=this._completionModel.items.length>0,isFrozen&&0===ctx.leadingWord.word.length)
// there were results before but now there aren't
// and also we are not on a word anymore -> cancel
return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:isFrozen})}}else
// cancel IntelliSense when line start changes
// happens when the current word gets outdented
this.cancel();else
// e.g. happens when pressing Enter while IntelliSense is computed
this.cancel()}};SuggestModel=suggestModel_decorate([suggestModel_param(1,editorWorkerService/* IEditorWorkerService */.p),suggestModel_param(2,common_clipboardService/* IClipboardService */.p),suggestModel_param(3,telemetry/* ITelemetryService */.b),suggestModel_param(4,log/* ILogService */.VZ),suggestModel_param(5,contextkey/* IContextKeyService */.i6),suggestModel_param(6,configuration/* IConfigurationService */.Ui)],SuggestModel);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestOvertypingCapturer.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class OvertypingCapturer{constructor(editor,suggestModel){this._disposables=new lifecycle/* DisposableStore */.SL,this._lastOvertyped=[],this._empty=!0,this._disposables.add(editor.onWillType((()=>{if(!this._empty)return;if(!editor.hasModel())return;const selections=editor.getSelections(),selectionsLength=selections.length;
// Check if it will overtype any selections
let willOvertype=!1;for(let i=0;i<selectionsLength;i++)if(!selections[i].isEmpty()){willOvertype=!0;break}if(!willOvertype)return;this._lastOvertyped=[];const model=editor.getModel();for(let i=0;i<selectionsLength;i++){const selection=selections[i];
// Check for overtyping capturer restrictions
if(model.getValueLengthInRange(selection)>OvertypingCapturer._maxSelectionLength)return;this._lastOvertyped[i]={value:model.getValueInRange(selection),multiline:selection.startLineNumber!==selection.endLineNumber}}this._empty=!1}))),this._disposables.add(suggestModel.onDidCancel((e=>{this._empty||e.retrigger||(this._empty=!0)})))}getLastOvertypedInfo(idx){if(!this._empty&&idx>=0&&idx<this._lastOvertyped.length)return this._lastOvertyped[idx]}dispose(){this._disposables.dispose()}}OvertypingCapturer._maxSelectionLength=51200;
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/codicons/codiconStyles.js
__webpack_require__(628609);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js + 2 modules
var listWidget=__webpack_require__(569047),numbers=__webpack_require__(159870),actionbar=__webpack_require__(790317),suggestWidgetStatus_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestWidgetStatus_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};class StatusBarViewItem extends menuEntryActionViewItem/* MenuEntryActionViewItem */.Mm{updateLabel(){const kb=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!kb)return super.updateLabel();this.label&&(this.label.textContent=(0,nls/* localize */.N)("ddd","{0} ({1})",this._action.label,StatusBarViewItem.symbolPrintEnter(kb)))}static symbolPrintEnter(kb){var _a;return null===(_a=kb.getLabel())||void 0===_a?void 0:_a.replace(/\benter\b/gi,"")}}let SuggestWidgetStatus=class{constructor(container,instantiationService,_menuService,_contextKeyService){this._menuService=_menuService,this._contextKeyService=_contextKeyService,this._menuDisposables=new lifecycle/* DisposableStore */.SL,this.element=dom/* append */.R3(container,dom.$(".suggest-status-bar"));const actionViewItemProvider=action=>action instanceof common_actions/* MenuItemAction */.U8?instantiationService.createInstance(StatusBarViewItem,action,void 0):void 0;this._leftActions=new actionbar/* ActionBar */.o(this.element,{actionViewItemProvider:actionViewItemProvider}),this._rightActions=new actionbar/* ActionBar */.o(this.element,{actionViewItemProvider:actionViewItemProvider}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const menu=this._menuService.createMenu(suggest/* suggestWidgetStatusbarMenu */.GI,this._contextKeyService),renderMenu=()=>{const left=[],right=[];for(let[group,actions]of menu.getActions())"left"===group?left.push(...actions):right.push(...actions);this._leftActions.clear(),this._leftActions.push(left),this._rightActions.clear(),this._rightActions.push(right)};this._menuDisposables.add(menu.onDidChange((()=>renderMenu()))),this._menuDisposables.add(menu)}hide(){this._menuDisposables.clear()}};SuggestWidgetStatus=suggestWidgetStatus_decorate([suggestWidgetStatus_param(1,instantiation/* IInstantiationService */.TG),suggestWidgetStatus_param(2,common_actions/* IMenuService */.co),suggestWidgetStatus_param(3,contextkey/* IContextKeyService */.i6)],SuggestWidgetStatus);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/symbolIcons.js
__webpack_require__(324954);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/theme/common/styler.js
var styler=__webpack_require__(788810),sash=__webpack_require__(173098);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/resizable.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class ResizableHTMLElement{constructor(){let currentSize;this._onDidWillResize=new common_event/* Emitter */.Q5,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new common_event/* Emitter */.Q5,this.onDidResize=this._onDidResize.event,this._sashListener=new lifecycle/* DisposableStore */.SL,this._size=new dom/* Dimension */.Ro(0,0),this._minSize=new dom/* Dimension */.Ro(0,0),this._maxSize=new dom/* Dimension */.Ro(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new sash/* Sash */.g(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0/* VERTICAL */}),this._westSash=new sash/* Sash */.g(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0/* VERTICAL */}),this._northSash=new sash/* Sash */.g(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1/* HORIZONTAL */,orthogonalEdge:sash/* OrthogonalEdge */.l.North}),this._southSash=new sash/* Sash */.g(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1/* HORIZONTAL */,orthogonalEdge:sash/* OrthogonalEdge */.l.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let deltaY=0,deltaX=0;this._sashListener.add(common_event/* Event */.ju.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((()=>{void 0===currentSize&&(this._onDidWillResize.fire(),currentSize=this._size,deltaY=0,deltaX=0)}))),this._sashListener.add(common_event/* Event */.ju.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((()=>{void 0!==currentSize&&(currentSize=void 0,deltaY=0,deltaX=0,this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((e=>{currentSize&&(deltaX=e.currentX-e.startX,this.layout(currentSize.height+deltaY,currentSize.width+deltaX),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((e=>{currentSize&&(deltaX=-(e.currentX-e.startX),this.layout(currentSize.height+deltaY,currentSize.width+deltaX),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((e=>{currentSize&&(deltaY=-(e.currentY-e.startY),this.layout(currentSize.height+deltaY,currentSize.width+deltaX),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((e=>{currentSize&&(deltaY=e.currentY-e.startY,this.layout(currentSize.height+deltaY,currentSize.width+deltaX),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))}))),this._sashListener.add(common_event/* Event */.ju.any(this._eastSash.onDidReset,this._westSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(common_event/* Event */.ju.any(this._northSash.onDidReset,this._southSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))})))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(north,east,south,west){this._northSash.state=north?3/* Enabled */:0/* Disabled */,this._eastSash.state=east?3/* Enabled */:0/* Disabled */,this._southSash.state=south?3/* Enabled */:0/* Disabled */,this._westSash.state=west?3/* Enabled */:0/* Disabled */}layout(height=this.size.height,width=this.size.width){const{height:minHeight,width:minWidth}=this._minSize,{height:maxHeight,width:maxWidth}=this._maxSize;height=Math.max(minHeight,Math.min(maxHeight,height)),width=Math.max(minWidth,Math.min(maxWidth,width));const newSize=new dom/* Dimension */.Ro(width,height);dom/* Dimension */.Ro.equals(newSize,this._size)||(this.domNode.style.height=height+"px",this.domNode.style.width=width+"px",this._size=newSize,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(value){this._maxSize=value}get maxSize(){return this._maxSize}set minSize(value){this._minSize=value}get minSize(){return this._minSize}set preferredSize(value){this._preferredSize=value}get preferredSize(){return this._preferredSize}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestWidgetDetails.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var suggestWidgetDetails_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestWidgetDetails_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};function canExpandCompletionItem(item){return!!item&&Boolean(item.completion.documentation||item.completion.detail&&item.completion.detail!==item.completion.label)}let SuggestDetailsWidget=class{constructor(_editor,instaService){this._editor=_editor,this._onDidClose=new common_event/* Emitter */.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new common_event/* Emitter */.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new lifecycle/* DisposableStore */.SL,this._renderDisposeable=new lifecycle/* DisposableStore */.SL,this._borderWidth=1,this._size=new dom/* Dimension */.Ro(330,0),this.domNode=dom.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=instaService.createInstance(markdownRenderer/* MarkdownRenderer */.$,{editor:_editor}),this._body=dom.$(".body"),this._scrollbar=new scrollableElement/* DomScrollableElement */.s$(this._body,{}),dom/* append */.R3(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=dom/* append */.R3(this._body,dom.$(".header")),this._close=dom/* append */.R3(this._header,dom.$("span"+codicons/* Codicon */.lA.close.cssSelector)),this._close.title=nls/* localize */.N("details.close","Close"),this._type=dom/* append */.R3(this._header,dom.$("p.type")),this._docs=dom/* append */.R3(this._body,dom.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(43/* fontInfo */)&&this._configureFont()})))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const options=this._editor.getOptions(),fontInfo=options.get(43/* fontInfo */),fontFamily=fontInfo.getMassagedFontFamily(browser/* isSafari */.G6?editorOptions/* EDITOR_FONT_DEFAULTS */.hL.fontFamily:null),fontSize=options.get(106/* suggestFontSize */)||fontInfo.fontSize,lineHeight=options.get(107/* suggestLineHeight */)||fontInfo.lineHeight,fontWeight=fontInfo.fontWeight,fontSizePx=`${fontSize}px`,lineHeightPx=`${lineHeight}px`;this.domNode.style.fontSize=fontSizePx,this.domNode.style.lineHeight=""+lineHeight/fontSize,this.domNode.style.fontWeight=fontWeight,this.domNode.style.fontFeatureSettings=fontInfo.fontFeatureSettings,this._type.style.fontFamily=fontFamily,this._close.style.height=lineHeightPx,this._close.style.width=lineHeightPx}getLayoutInfo(){const lineHeight=this._editor.getOption(107/* suggestLineHeight */)||this._editor.getOption(43/* fontInfo */).lineHeight,borderWidth=this._borderWidth,borderHeight=2*borderWidth;return{lineHeight:lineHeight,borderWidth:borderWidth,borderHeight:borderHeight,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=nls/* localize */.N("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(item,explainMode){var _a,_b;this._renderDisposeable.clear();let{detail:detail,documentation:documentation}=item.completion;if(explainMode){let md="";md+=`score: ${item.score[0]}\n`,md+=`prefix: ${null!==(_a=item.word)&&void 0!==_a?_a:"(no prefix)"}\n`,md+=`word: ${item.completion.filterText?item.completion.filterText+" (filterText)":item.textLabel}\n`,md+=`distance: ${item.distance} (localityBonus-setting)\n`,md+=`index: ${item.idx}, based on ${item.completion.sortText&&`sortText: "${item.completion.sortText}"`||"label"}\n`,md+=`commit_chars: ${null===(_b=item.completion.commitCharacters)||void 0===_b?void 0:_b.join("")}\n`,documentation=(new htmlContent/* MarkdownString */.W5).appendCodeblock("empty",md),detail=`Provider: ${item.provider._debugDisplayName}`}if(explainMode||canExpandCompletionItem(item)){
// --- details
if(this.domNode.classList.remove("no-docs","no-type"),detail){const cappedDetail=detail.length>1e5?`${detail.substr(0,1e5)}`:detail;this._type.textContent=cappedDetail,this._type.title=cappedDetail,dom/* show */.$Z(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(cappedDetail))}else dom/* clearNode */.PO(this._type),this._type.title="",dom/* hide */.Cp(this._type),this.domNode.classList.add("no-type");
// --- documentation
if(dom/* clearNode */.PO(this._docs),"string"===typeof documentation)this._docs.classList.remove("markdown-docs"),this._docs.textContent=documentation;else if(documentation){this._docs.classList.add("markdown-docs"),dom/* clearNode */.PO(this._docs);const renderedContents=this._markdownRenderer.render(documentation);this._docs.appendChild(renderedContents.element),this._renderDisposeable.add(renderedContents),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=e=>{e.preventDefault(),e.stopPropagation()},this._close.onclick=e=>{e.preventDefault(),e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(width,height){const newSize=new dom/* Dimension */.Ro(width,height);dom/* Dimension */.Ro.equals(newSize,this._size)||(this._size=newSize,dom/* size */.dp(this.domNode,width,height)),this._scrollbar.scanDomNode()}scrollDown(much=8){this._body.scrollTop+=much}scrollUp(much=8){this._body.scrollTop-=much}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(width){this._borderWidth=width}get borderWidth(){return this._borderWidth}};SuggestDetailsWidget=suggestWidgetDetails_decorate([suggestWidgetDetails_param(1,instantiation/* IInstantiationService */.TG)],SuggestDetailsWidget);class SuggestDetailsOverlay{constructor(widget,_editor){let topLeftNow,sizeNow;this.widget=widget,this._editor=_editor,this._disposables=new lifecycle/* DisposableStore */.SL,this._added=!1,this._resizable=new ResizableHTMLElement,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(widget.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let deltaTop=0,deltaLeft=0;this._disposables.add(this._resizable.onDidWillResize((()=>{topLeftNow=this._topLeft,sizeNow=this._resizable.size}))),this._disposables.add(this._resizable.onDidResize((e=>{if(topLeftNow&&sizeNow){this.widget.layout(e.dimension.width,e.dimension.height);let updateTopLeft=!1;e.west&&(deltaLeft=sizeNow.width-e.dimension.width,updateTopLeft=!0),e.north&&(deltaTop=sizeNow.height-e.dimension.height,updateTopLeft=!0),updateTopLeft&&this._applyTopLeft({top:topLeftNow.top+deltaTop,left:topLeftNow.left+deltaLeft})}e.done&&(topLeftNow=void 0,sizeNow=void 0,deltaTop=0,deltaLeft=0,this._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((()=>{var _a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,null!==(_a=this._userSize)&&void 0!==_a?_a:this.widget.size)})))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(sessionEnded=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),sessionEnded&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(anchor){var _a;const anchorBox=dom/* getDomNodePagePosition */.i(anchor);this._anchorBox=anchorBox,this._placeAtAnchor(this._anchorBox,null!==(_a=this._userSize)&&void 0!==_a?_a:this.widget.size)}_placeAtAnchor(anchorBox,size){var _a;const bodyBox=dom/* getClientArea */.D6(document.body),info=this.widget.getLayoutInfo(),defaultMinSize=new dom/* Dimension */.Ro(220,2*info.lineHeight),defaultTop=anchorBox.top,eastPlacement=function(){const width=bodyBox.width-(anchorBox.left+anchorBox.width+info.borderWidth+info.horizontalPadding),left=-info.borderWidth+anchorBox.left+anchorBox.width,maxSizeTop=new dom/* Dimension */.Ro(width,bodyBox.height-anchorBox.top-info.borderHeight-info.verticalPadding),maxSizeBottom=maxSizeTop.with(void 0,anchorBox.top+anchorBox.height-info.borderHeight-info.verticalPadding);return{top:defaultTop,left:left,fit:width-size.width,maxSizeTop:maxSizeTop,maxSizeBottom:maxSizeBottom,minSize:defaultMinSize.with(Math.min(width,defaultMinSize.width))}}(),westPlacement=function(){const width=anchorBox.left-info.borderWidth-info.horizontalPadding,left=Math.max(info.horizontalPadding,anchorBox.left-size.width-info.borderWidth),maxSizeTop=new dom/* Dimension */.Ro(width,bodyBox.height-anchorBox.top-info.borderHeight-info.verticalPadding),maxSizeBottom=maxSizeTop.with(void 0,anchorBox.top+anchorBox.height-info.borderHeight-info.verticalPadding);return{top:defaultTop,left:left,fit:width-size.width,maxSizeTop:maxSizeTop,maxSizeBottom:maxSizeBottom,minSize:defaultMinSize.with(Math.min(width,defaultMinSize.width))}}(),southPacement=function(){const left=anchorBox.left,top=-info.borderWidth+anchorBox.top+anchorBox.height,maxSizeBottom=new dom/* Dimension */.Ro(anchorBox.width-info.borderHeight,bodyBox.height-anchorBox.top-anchorBox.height-info.verticalPadding);return{top:top,left:left,fit:maxSizeBottom.height-size.height,maxSizeBottom:maxSizeBottom,maxSizeTop:maxSizeBottom,minSize:defaultMinSize.with(maxSizeBottom.width)}}(),placements=[eastPlacement,westPlacement,southPacement],placement=null!==(_a=placements.find((p=>p.fit>=0)))&&void 0!==_a?_a:placements.sort(((a,b)=>b.fit-a.fit))[0],bottom=anchorBox.top+anchorBox.height-info.borderHeight;let alignAtTop,height=size.height;const maxHeight=Math.max(placement.maxSizeTop.height,placement.maxSizeBottom.height);let maxSize;height>maxHeight&&(height=maxHeight),height<=placement.maxSizeTop.height?(alignAtTop=!0,maxSize=placement.maxSizeTop):(alignAtTop=!1,maxSize=placement.maxSizeBottom),this._applyTopLeft({left:placement.left,top:alignAtTop?placement.top:bottom-height}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!alignAtTop,placement===eastPlacement,alignAtTop,placement!==eastPlacement),this._resizable.minSize=placement.minSize,this._resizable.maxSize=maxSize,this._resizable.layout(height,Math.min(maxSize.width,size.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(topLeft){this._topLeft=topLeft,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js + 1 modules
var suggestWidgetRenderer_a,iconLabel=__webpack_require__(10489),getIconClasses=__webpack_require__(422016),files=__webpack_require__(475761),suggestWidgetRenderer_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestWidgetRenderer_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js
function getAriaId(index){return`suggest-aria-id:${index}`}const suggestMoreInfoIcon=(0,iconRegistry/* registerIcon */.q5)("suggest-more-info",codicons/* Codicon */.lA.chevronRight,nls/* localize */.N("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),_completionItemColor=new(suggestWidgetRenderer_a=class ColorExtractor{extract(item,out){if(item.textLabel.match(ColorExtractor._regexStrict))return out[0]=item.textLabel,!0;if(item.completion.detail&&item.completion.detail.match(ColorExtractor._regexStrict))return out[0]=item.completion.detail,!0;if("string"===typeof item.completion.documentation){const match=ColorExtractor._regexRelaxed.exec(item.completion.documentation);if(match&&(0===match.index||match.index+match[0].length===item.completion.documentation.length))return out[0]=match[0],!0}return!1}},suggestWidgetRenderer_a._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,suggestWidgetRenderer_a._regexStrict=new RegExp(`^${suggestWidgetRenderer_a._regexRelaxed.source}$`,"i"),suggestWidgetRenderer_a);let ItemRenderer=class{constructor(_editor,_modelService,_modeService,_themeService){this._editor=_editor,this._modelService=_modelService,this._modeService=_modeService,this._themeService=_themeService,this._onDidToggleDetails=new common_event/* Emitter */.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(container){const data=Object.create(null);data.disposables=new lifecycle/* DisposableStore */.SL,data.root=container,data.root.classList.add("show-file-icons"),data.icon=(0,dom/* append */.R3)(container,(0,dom.$)(".icon")),data.colorspan=(0,dom/* append */.R3)(data.icon,(0,dom.$)("span.colorspan"));const text=(0,dom/* append */.R3)(container,(0,dom.$)(".contents")),main=(0,dom/* append */.R3)(text,(0,dom.$)(".main"));data.iconContainer=(0,dom/* append */.R3)(main,(0,dom.$)(".icon-label.codicon")),data.left=(0,dom/* append */.R3)(main,(0,dom.$)("span.left")),data.right=(0,dom/* append */.R3)(main,(0,dom.$)("span.right")),data.iconLabel=new iconLabel/* IconLabel */.g(data.left,{supportHighlights:!0,supportIcons:!0}),data.disposables.add(data.iconLabel),data.parametersLabel=(0,dom/* append */.R3)(data.left,(0,dom.$)("span.signature-label")),data.qualifierLabel=(0,dom/* append */.R3)(data.left,(0,dom.$)("span.qualifier-label")),data.detailsLabel=(0,dom/* append */.R3)(data.right,(0,dom.$)("span.details-label")),data.readMore=(0,dom/* append */.R3)(data.right,(0,dom.$)("span.readMore"+common_themeService/* ThemeIcon */.kS.asCSSSelector(suggestMoreInfoIcon))),data.readMore.title=nls/* localize */.N("readMore","Read More");const configureFont=()=>{const options=this._editor.getOptions(),fontInfo=options.get(43/* fontInfo */),fontFamily=fontInfo.getMassagedFontFamily(browser/* isSafari */.G6?editorOptions/* EDITOR_FONT_DEFAULTS */.hL.fontFamily:null),fontFeatureSettings=fontInfo.fontFeatureSettings,fontSize=options.get(106/* suggestFontSize */)||fontInfo.fontSize,lineHeight=options.get(107/* suggestLineHeight */)||fontInfo.lineHeight,fontWeight=fontInfo.fontWeight,fontSizePx=`${fontSize}px`,lineHeightPx=`${lineHeight}px`;data.root.style.fontSize=fontSizePx,data.root.style.fontWeight=fontWeight,main.style.fontFamily=fontFamily,main.style.fontFeatureSettings=fontFeatureSettings,main.style.lineHeight=lineHeightPx,data.icon.style.height=lineHeightPx,data.icon.style.width=lineHeightPx,data.readMore.style.height=lineHeightPx,data.readMore.style.width=lineHeightPx};return configureFont(),data.disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(43/* fontInfo */)||e.hasChanged(106/* suggestFontSize */)||e.hasChanged(107/* suggestLineHeight */))&&configureFont()}))),data}renderElement(element,index,data){const{completion:completion}=element;data.root.id=getAriaId(index),data.colorspan.style.backgroundColor="";const labelOptions={labelEscapeNewLines:!0,matches:(0,filters/* createMatches */.mB)(element.score)};let color=[];if(19/* Color */===completion.kind&&_completionItemColor.extract(element,color))
// special logic for 'color' completion items
data.icon.className="icon customcolor",data.iconContainer.className="icon hide",data.colorspan.style.backgroundColor=color[0];else if(20/* File */===completion.kind&&this._themeService.getFileIconTheme().hasFileIcons){
// special logic for 'file' completion items
data.icon.className="icon hide",data.iconContainer.className="icon hide";const labelClasses=(0,getIconClasses/* getIconClasses */.r)(this._modelService,this._modeService,common_uri/* URI */.o.from({scheme:"fake",path:element.textLabel}),files/* FileKind */.R.FILE),detailClasses=(0,getIconClasses/* getIconClasses */.r)(this._modelService,this._modeService,common_uri/* URI */.o.from({scheme:"fake",path:completion.detail}),files/* FileKind */.R.FILE);labelOptions.extraClasses=labelClasses.length>detailClasses.length?labelClasses:detailClasses}else 23/* Folder */===completion.kind&&this._themeService.getFileIconTheme().hasFolderIcons?(
// special logic for 'folder' completion items
data.icon.className="icon hide",data.iconContainer.className="icon hide",labelOptions.extraClasses=(0,arrays/* flatten */.xH)([(0,getIconClasses/* getIconClasses */.r)(this._modelService,this._modeService,common_uri/* URI */.o.from({scheme:"fake",path:element.textLabel}),files/* FileKind */.R.FOLDER),(0,getIconClasses/* getIconClasses */.r)(this._modelService,this._modeService,common_uri/* URI */.o.from({scheme:"fake",path:completion.detail}),files/* FileKind */.R.FOLDER)])):(
// normal icon
data.icon.className="icon hide",data.iconContainer.className="",data.iconContainer.classList.add("suggest-icon",...(0,modes/* completionKindToCssClass */.Sy)(completion.kind).split(" ")));completion.tags&&completion.tags.indexOf(1/* Deprecated */)>=0&&(labelOptions.extraClasses=(labelOptions.extraClasses||[]).concat(["deprecated"]),labelOptions.matches=[]),data.iconLabel.setLabel(element.textLabel,void 0,labelOptions),"string"===typeof completion.label?(data.parametersLabel.textContent="",data.detailsLabel.textContent=stripNewLines(completion.detail||""),data.root.classList.add("string-label")):(data.parametersLabel.textContent=stripNewLines(completion.label.detail||""),data.detailsLabel.textContent=stripNewLines(completion.label.description||""),data.root.classList.remove("string-label")),this._editor.getOption(105/* suggest */).showInlineDetails?(0,dom/* show */.$Z)(data.detailsLabel):(0,dom/* hide */.Cp)(data.detailsLabel),canExpandCompletionItem(element)?(data.right.classList.add("can-expand-details"),(0,dom/* show */.$Z)(data.readMore),data.readMore.onmousedown=e=>{e.stopPropagation(),e.preventDefault()},data.readMore.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._onDidToggleDetails.fire()}):(data.right.classList.remove("can-expand-details"),(0,dom/* hide */.Cp)(data.readMore),data.readMore.onmousedown=null,data.readMore.onclick=null)}disposeTemplate(templateData){templateData.disposables.dispose()}};function stripNewLines(str){return str.replace(/\r\n|\r|\n/g,"")}ItemRenderer=suggestWidgetRenderer_decorate([suggestWidgetRenderer_param(1,services_modelService/* IModelService */.q),suggestWidgetRenderer_param(2,modeService/* IModeService */.h),suggestWidgetRenderer_param(3,common_themeService/* IThemeService */.XE)],ItemRenderer);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestWidget.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var suggestWidget_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestWidget_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},suggestWidget_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
// The codicon symbol styles are defined here and must be loaded
// The codicon symbol colors are defined here and must be loaded to get colors
/**
 * Suggest widget colors
 */
const editorSuggestWidgetBackground=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.background",{dark:colorRegistry/* editorWidgetBackground */.D0,light:colorRegistry/* editorWidgetBackground */.D0,hc:colorRegistry/* editorWidgetBackground */.D0},nls/* localize */.N("editorSuggestWidgetBackground","Background color of the suggest widget.")),editorSuggestWidgetBorder=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.border",{dark:colorRegistry/* editorWidgetBorder */.D1,light:colorRegistry/* editorWidgetBorder */.D1,hc:colorRegistry/* editorWidgetBorder */.D1},nls/* localize */.N("editorSuggestWidgetBorder","Border color of the suggest widget.")),editorSuggestWidgetForeground=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.foreground",{dark:colorRegistry/* editorForeground */.NO,light:colorRegistry/* editorForeground */.NO,hc:colorRegistry/* editorForeground */.NO},nls/* localize */.N("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),editorSuggestWidgetSelectedForeground=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.selectedForeground",{dark:colorRegistry/* quickInputListFocusForeground */.NP,light:colorRegistry/* quickInputListFocusForeground */.NP,hc:colorRegistry/* quickInputListFocusForeground */.NP},nls/* localize */.N("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),editorSuggestWidgetSelectedIconForeground=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.selectedIconForeground",{dark:colorRegistry/* quickInputListFocusIconForeground */.cb,light:colorRegistry/* quickInputListFocusIconForeground */.cb,hc:colorRegistry/* quickInputListFocusIconForeground */.cb},nls/* localize */.N("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),editorSuggestWidgetSelectedBackground=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.selectedBackground",{dark:colorRegistry/* quickInputListFocusBackground */.Vq,light:colorRegistry/* quickInputListFocusBackground */.Vq,hc:colorRegistry/* quickInputListFocusBackground */.Vq},nls/* localize */.N("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),editorSuggestWidgetHighlightForeground=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.highlightForeground",{dark:colorRegistry/* listHighlightForeground */.Gw,light:colorRegistry/* listHighlightForeground */.Gw,hc:colorRegistry/* listHighlightForeground */.Gw},nls/* localize */.N("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),editorSuggestWidgetHighlightFocusForeground=(0,colorRegistry/* registerColor */.P6)("editorSuggestWidget.focusHighlightForeground",{dark:colorRegistry/* listFocusHighlightForeground */.PX,light:colorRegistry/* listFocusHighlightForeground */.PX,hc:colorRegistry/* listFocusHighlightForeground */.PX},nls/* localize */.N("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));class PersistedWidgetSize{constructor(_service,editor){this._service=_service,this._key=`suggestWidget.size/${editor.getEditorType()}/${editor instanceof embeddedCodeEditorWidget/* EmbeddedCodeEditorWidget */.H}`}restore(){var _a;const raw=null!==(_a=this._service.get(this._key,0/* GLOBAL */))&&void 0!==_a?_a:"";try{const obj=JSON.parse(raw);if(dom/* Dimension */.Ro.is(obj))return dom/* Dimension */.Ro.lift(obj)}catch(_b){
// ignore
}}store(size){this._service.store(this._key,JSON.stringify(size),0/* GLOBAL */,1/* MACHINE */)}reset(){this._service.remove(this._key,0/* GLOBAL */)}}let SuggestWidget=class SuggestWidget{constructor(editor,_storageService,_contextKeyService,_themeService,instantiationService){this.editor=editor,this._storageService=_storageService,this._state=0/* Hidden */,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new common_async/* TimeoutTimer */._F,this._disposables=new lifecycle/* DisposableStore */.SL,this._onDidSelect=new common_event/* Emitter */.Q5,this._onDidFocus=new common_event/* Emitter */.Q5,this._onDidHide=new common_event/* Emitter */.Q5,this._onDidShow=new common_event/* Emitter */.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new common_event/* Emitter */.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new ResizableHTMLElement,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new SuggestContentWidget(this,editor),this._persistedSize=new PersistedWidgetSize(_storageService,editor);class ResizeState{constructor(persistedSize,currentSize,persistHeight=!1,persistWidth=!1){this.persistedSize=persistedSize,this.currentSize=currentSize,this.persistHeight=persistHeight,this.persistWidth=persistWidth}}let state;this._disposables.add(this.element.onDidWillResize((()=>{this._contentWidget.lockPreference(),state=new ResizeState(this._persistedSize.restore(),this.element.size)}))),this._disposables.add(this.element.onDidResize((e=>{var _a,_b,_c,_d;if(this._resize(e.dimension.width,e.dimension.height),state&&(state.persistHeight=state.persistHeight||!!e.north||!!e.south,state.persistWidth=state.persistWidth||!!e.east||!!e.west),e.done){if(state){
// only store width or height value that have changed and also
// only store changes that are above a certain threshold
const{itemHeight:itemHeight,defaultSize:defaultSize}=this.getLayoutInfo(),threshold=Math.round(itemHeight/2);let{width:width,height:height}=this.element.size;(!state.persistHeight||Math.abs(state.currentSize.height-height)<=threshold)&&(height=null!==(_b=null===(_a=state.persistedSize)||void 0===_a?void 0:_a.height)&&void 0!==_b?_b:defaultSize.height),(!state.persistWidth||Math.abs(state.currentSize.width-width)<=threshold)&&(width=null!==(_d=null===(_c=state.persistedSize)||void 0===_c?void 0:_c.width)&&void 0!==_d?_d:defaultSize.width),this._persistedSize.store(new dom/* Dimension */.Ro(width,height))}
// reset working state
this._contentWidget.unlockPreference(),state=void 0}}))),this._messageElement=dom/* append */.R3(this.element.domNode,dom.$(".message")),this._listElement=dom/* append */.R3(this.element.domNode,dom.$(".tree"));const details=instantiationService.createInstance(SuggestDetailsWidget,this.editor);details.onDidClose(this.toggleDetails,this,this._disposables),this._details=new SuggestDetailsOverlay(details,this.editor);const applyIconStyle=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105/* suggest */).showIcons);applyIconStyle();const renderer=instantiationService.createInstance(ItemRenderer,this.editor);this._disposables.add(renderer),this._disposables.add(renderer.onDidToggleDetails((()=>this.toggleDetails()))),this._list=new listWidget/* List */.aV("SuggestWidget",this._listElement,{getHeight:_element=>this.getLayoutInfo().itemHeight,getTemplateId:_element=>"suggestion"},[renderer],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:item=>{if(item.isResolved&&this._isDetailsVisible()){const{documentation:documentation,detail:detail}=item.completion,docs=strings/* format */.WU("{0}{1}",detail||"",documentation?"string"===typeof documentation?documentation:documentation.value:"");return nls/* localize */.N("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",item.textLabel,docs)}return item.textLabel},getWidgetAriaLabel:()=>nls/* localize */.N("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=instantiationService.createInstance(SuggestWidgetStatus,this.element.domNode);const applyStatusBarStyle=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105/* suggest */).showStatusBar);applyStatusBarStyle(),this._disposables.add((0,styler/* attachListStyler */.Jl)(this._list,_themeService,{listInactiveFocusBackground:editorSuggestWidgetSelectedBackground,listInactiveFocusOutline:colorRegistry/* activeContrastBorder */.xL})),this._disposables.add(_themeService.onDidColorThemeChange((t=>this._onThemeChange(t)))),this._onThemeChange(_themeService.getColorTheme()),this._disposables.add(this._list.onMouseDown((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onTap((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onDidChangeSelection((e=>this._onListSelection(e)))),this._disposables.add(this._list.onDidChangeFocus((e=>this._onListFocus(e)))),this._disposables.add(this.editor.onDidChangeCursorSelection((()=>this._onCursorSelectionChanged()))),this._disposables.add(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(105/* suggest */)&&(applyStatusBarStyle(),applyIconStyle())}))),this._ctxSuggestWidgetVisible=suggest/* Context */._y.Visible.bindTo(_contextKeyService),this._ctxSuggestWidgetDetailsVisible=suggest/* Context */._y.DetailsVisible.bindTo(_contextKeyService),this._ctxSuggestWidgetMultipleSuggestions=suggest/* Context */._y.MultipleSuggestions.bindTo(_contextKeyService),this._disposables.add(dom/* addStandardDisposableListener */.mu(this._details.widget.domNode,"keydown",(e=>{this._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((e=>this._onEditorMouseDown(e))))}dispose(){var _a;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(_a=this._loadingTimeout)||void 0===_a||_a.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(mouseEvent){this._details.widget.domNode.contains(mouseEvent.target.element)?
// Clicking inside details
this._details.widget.domNode.focus():
// Clicking outside details and inside suggest
this.element.domNode.contains(mouseEvent.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){0/* Hidden */!==this._state&&this._contentWidget.layout()}_onListMouseDownOrTap(e){"undefined"!==typeof e.element&&"undefined"!==typeof e.index&&(
// prevent stealing browser focus from the editor
e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(item,index){const completionModel=this._completionModel;completionModel&&(this._onDidSelect.fire({item:item,index:index,model:completionModel}),this.editor.focus())}_onThemeChange(theme){const backgroundColor=theme.getColor(editorSuggestWidgetBackground);backgroundColor&&(this.element.domNode.style.backgroundColor=backgroundColor.toString(),this._messageElement.style.backgroundColor=backgroundColor.toString(),this._details.widget.domNode.style.backgroundColor=backgroundColor.toString());const borderColor=theme.getColor(editorSuggestWidgetBorder);borderColor&&(this.element.domNode.style.borderColor=borderColor.toString(),this._messageElement.style.borderColor=borderColor.toString(),this._status.element.style.borderTopColor=borderColor.toString(),this._details.widget.domNode.style.borderColor=borderColor.toString(),this._detailsBorderColor=borderColor.toString());const focusBorderColor=theme.getColor(colorRegistry/* focusBorder */.R8);focusBorderColor&&(this._detailsFocusBorderColor=focusBorderColor.toString()),this._details.widget.borderWidth="hc"===theme.type?2:1}_onListFocus(e){var _a;if(this._ignoreFocusEvents)return;if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),void this.editor.setAriaOptions({activeDescendant:void 0});if(!this._completionModel)return;const item=e.elements[0],index=e.indexes[0];item!==this._focusedItem&&(null===(_a=this._currentSuggestionDetails)||void 0===_a||_a.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=item,this._list.reveal(index),this._currentSuggestionDetails=(0,common_async/* createCancelablePromise */.PG)((token=>suggestWidget_awaiter(this,void 0,void 0,(function*(){const loading=(0,common_async/* disposableTimeout */.Vg)((()=>{this._isDetailsVisible()&&this.showDetails(!0)}),250);token.onCancellationRequested((()=>loading.dispose()));const result=yield item.resolve(token);return loading.dispose(),result})))),this._currentSuggestionDetails.then((()=>{index>=this._list.length||item!==this._list.element(index)||(
// item can have extra information, so re-render
this._ignoreFocusEvents=!0,this._list.splice(index,1,[item]),this._list.setFocus([index]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:getAriaId(index)}))})).catch(errors/* onUnexpectedError */.dL)),
// emit an event
this._onDidFocus.fire({item:item,index:index,model:this._completionModel})}_setState(state){if(this._state!==state)switch(this._state=state,this.element.domNode.classList.toggle("frozen",4/* Frozen */===state),this.element.domNode.classList.remove("message"),state){case 0/* Hidden */:dom/* hide */.Cp(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1/* Loading */:this.element.domNode.classList.add("message"),this._messageElement.textContent=SuggestWidget.LOADING_MESSAGE,dom/* hide */.Cp(this._listElement,this._status.element),dom/* show */.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2/* Empty */:this.element.domNode.classList.add("message"),this._messageElement.textContent=SuggestWidget.NO_SUGGESTIONS_MESSAGE,dom/* hide */.Cp(this._listElement,this._status.element),dom/* show */.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3/* Open */:dom/* hide */.Cp(this._messageElement),dom/* show */.$Z(this._listElement,this._status.element),this._show();break;case 4/* Frozen */:dom/* hide */.Cp(this._messageElement),dom/* show */.$Z(this._listElement,this._status.element),this._show();break;case 5/* Details */:dom/* hide */.Cp(this._messageElement),dom/* show */.$Z(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)}),100)}showTriggered(auto,delay){0/* Hidden */===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!auto,this._isAuto||(this._loadingTimeout=(0,common_async/* disposableTimeout */.Vg)((()=>this._setState(1/* Loading */)),delay)))}showSuggestions(completionModel,selectionIndex,isFrozen,isAuto){var _a,_b;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(_a=this._loadingTimeout)||void 0===_a||_a.dispose(),null===(_b=this._currentSuggestionDetails)||void 0===_b||_b.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==completionModel&&(this._completionModel=completionModel),isFrozen&&2/* Empty */!==this._state&&0/* Hidden */!==this._state)return void this._setState(4/* Frozen */);const visibleCount=this._completionModel.items.length,isEmpty=0===visibleCount;if(this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount>1),isEmpty)return this._setState(isAuto?0/* Hidden */:2/* Empty */),void(this._completionModel=void 0);this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(isFrozen?4/* Frozen */:3/* Open */),this._list.reveal(selectionIndex,0),this._list.setFocus([selectionIndex]),this._layout(this.element.size),
// Reset focus border
this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0/* Hidden */:return!1;case 5/* Details */:return this._details.widget.pageDown(),!0;case 1/* Loading */:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0/* Hidden */:return!1;case 1/* Loading */:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0/* Hidden */:return!1;case 5/* Details */:return this._details.widget.scrollBottom(),!0;case 1/* Loading */:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0/* Hidden */:return!1;case 5/* Details */:return this._details.widget.pageUp(),!0;case 1/* Loading */:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0/* Hidden */:return!1;case 1/* Loading */:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0/* Hidden */:return!1;case 5/* Details */:return this._details.widget.scrollTop(),!0;case 1/* Loading */:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(0/* Hidden */!==this._state&&2/* Empty */!==this._state&&1/* Loading */!==this._state&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){5/* Details */===this._state?(this._setState(3/* Open */),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):3/* Open */===this._state&&this._isDetailsVisible()&&(this._setState(5/* Details */),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(
// hide details widget
this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!canExpandCompletionItem(this._list.getFocusedElements()[0])&&!this._explainMode||3/* Open */!==this._state&&5/* Details */!==this._state&&4/* Frozen */!==this._state||(
// show details widget (iff possible)
this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(loading){this._details.show(),loading?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var _a;null===(_a=this._loadingTimeout)||void 0===_a||_a.dispose(),this._setState(0/* Hidden */),this._onDidHide.fire(this),this.element.clearSashHoverState();
// ensure that a reasonable widget height is persisted so that
// accidential "resize-to-single-items" cases aren't happening
const dim=this._persistedSize.restore(),minPersistedHeight=Math.ceil(4.3*this.getLayoutInfo().itemHeight);dim&&dim.height<minPersistedHeight&&this._persistedSize.store(dim.with(void 0,minPersistedHeight))}isFrozen(){return 4/* Frozen */===this._state}_afterRender(position){null!==position?2/* Empty */!==this._state&&1/* Loading */!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(size){var _a,_b,_c;if(!this.editor.hasModel())return;if(!this.editor.getDomNode())
// happens when running tests
return;const bodyBox=dom/* getClientArea */.D6(document.body),info=this.getLayoutInfo();size||(size=info.defaultSize);let height=size.height,width=size.width;if(
// status bar
this._status.element.style.lineHeight=`${info.itemHeight}px`,2/* Empty */===this._state||1/* Loading */===this._state)
// showing a message only
height=info.itemHeight+info.borderHeight,width=info.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new dom/* Dimension */.Ro(width,height),this._contentWidget.setPreference(2/* BELOW */);else{
// showing items
// width math
const maxWidth=bodyBox.width-info.borderHeight-2*info.horizontalPadding;width>maxWidth&&(width=maxWidth);const preferredWidth=this._completionModel?this._completionModel.stats.pLabelLen*info.typicalHalfwidthCharacterWidth:width,fullHeight=info.statusBarHeight+this._list.contentHeight+info.borderHeight,minHeight=info.itemHeight+info.statusBarHeight,editorBox=dom/* getDomNodePagePosition */.i(this.editor.getDomNode()),cursorBox=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),cursorBottom=editorBox.top+cursorBox.top+cursorBox.height,maxHeightBelow=Math.min(bodyBox.height-cursorBottom-info.verticalPadding,fullHeight),availableSpaceAbove=editorBox.top+cursorBox.top-info.verticalPadding,maxHeightAbove=Math.min(availableSpaceAbove,fullHeight);
// height math
let maxHeight=Math.min(Math.max(maxHeightAbove,maxHeightBelow)+info.borderHeight,fullHeight);height===(null===(_a=this._cappedHeight)||void 0===_a?void 0:_a.capped)&&(
// Restore the old (wanted) height when the current
// height is capped to fit
height=this._cappedHeight.wanted),height<minHeight&&(height=minHeight),height>maxHeight&&(height=maxHeight);const forceRenderingAboveRequiredSpace=150;height>maxHeightBelow||this._forceRenderingAbove&&availableSpaceAbove>forceRenderingAboveRequiredSpace?(this._contentWidget.setPreference(1/* ABOVE */),this.element.enableSashes(!0,!0,!1,!1),maxHeight=maxHeightAbove):(this._contentWidget.setPreference(2/* BELOW */),this.element.enableSashes(!1,!0,!0,!1),maxHeight=maxHeightBelow),this.element.preferredSize=new dom/* Dimension */.Ro(preferredWidth,info.defaultSize.height),this.element.maxSize=new dom/* Dimension */.Ro(maxWidth,maxHeight),this.element.minSize=new dom/* Dimension */.Ro(220,minHeight),
// Know when the height was capped to fit and remember
// the wanted height for later. This is required when going
// left to widen suggestions.
this._cappedHeight=height===fullHeight?{wanted:null!==(_c=null===(_b=this._cappedHeight)||void 0===_b?void 0:_b.wanted)&&void 0!==_c?_c:size.height,capped:height}:void 0}this._resize(width,height)}_resize(width,height){const{width:maxWidth,height:maxHeight}=this.element.maxSize;width=Math.min(maxWidth,width),height=Math.min(maxHeight,height);const{statusBarHeight:statusBarHeight}=this.getLayoutInfo();this._list.layout(height-statusBarHeight,width),this._listElement.style.height=height-statusBarHeight+"px",this.element.layout(height,width),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){const fontInfo=this.editor.getOption(43/* fontInfo */),itemHeight=(0,numbers/* clamp */.u)(this.editor.getOption(107/* suggestLineHeight */)||fontInfo.lineHeight,8,1e3),statusBarHeight=this.editor.getOption(105/* suggest */).showStatusBar&&2/* Empty */!==this._state&&1/* Loading */!==this._state?itemHeight:0,borderWidth=this._details.widget.borderWidth,borderHeight=2*borderWidth;return{itemHeight:itemHeight,statusBarHeight:statusBarHeight,borderWidth:borderWidth,borderHeight:borderHeight,typicalHalfwidthCharacterWidth:fontInfo.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new dom/* Dimension */.Ro(430,statusBarHeight+12*itemHeight+borderHeight)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0/* GLOBAL */,!1)}_setDetailsVisible(value){this._storageService.store("expandSuggestionDocs",value,0/* GLOBAL */,0/* USER */)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};SuggestWidget.LOADING_MESSAGE=nls/* localize */.N("suggestWidget.loading","Loading..."),SuggestWidget.NO_SUGGESTIONS_MESSAGE=nls/* localize */.N("suggestWidget.noSuggestions","No suggestions."),SuggestWidget=suggestWidget_decorate([suggestWidget_param(1,storage/* IStorageService */.Uy),suggestWidget_param(2,contextkey/* IContextKeyService */.i6),suggestWidget_param(3,common_themeService/* IThemeService */.XE),suggestWidget_param(4,instantiation/* IInstantiationService */.TG)],SuggestWidget);class SuggestContentWidget{constructor(_widget,_editor){this._widget=_widget,this._editor=_editor,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){const{height:height,width:width}=this._widget.element.size,{borderWidth:borderWidth,horizontalPadding:horizontalPadding}=this._widget.getLayoutInfo();return new dom/* Dimension */.Ro(width+2*borderWidth+horizontalPadding,height+2*borderWidth)}afterRender(position){this._widget._afterRender(position)}setPreference(preference){this._preferenceLocked||(this._preference=preference)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(position){this._position=position}}(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const matchHighlight=theme.getColor(editorSuggestWidgetHighlightForeground);matchHighlight&&collector.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${matchHighlight}; }`);const matchHighlightFocus=theme.getColor(editorSuggestWidgetHighlightFocusForeground);matchHighlight&&collector.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${matchHighlightFocus}; }`);const foreground=theme.getColor(editorSuggestWidgetForeground);foreground&&collector.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${foreground}; }`);const selectedForeground=theme.getColor(editorSuggestWidgetSelectedForeground);selectedForeground&&collector.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${selectedForeground}; }`);const selectedIconForeground=theme.getColor(editorSuggestWidgetSelectedIconForeground);selectedIconForeground&&collector.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ${selectedIconForeground}; }`);const link=theme.getColor(colorRegistry/* textLinkForeground */.ur);link&&collector.addRule(`.monaco-editor .suggest-details a { color: ${link}; }`);const linkHover=theme.getColor(colorRegistry/* textLinkActiveForeground */.sg);linkHover&&collector.addRule(`.monaco-editor .suggest-details a:hover { color: ${linkHover}; }`);const codeBackground=theme.getColor(colorRegistry/* textCodeBlockBackground */.Sw);codeBackground&&collector.addRule(`.monaco-editor .suggest-details code { background-color: ${codeBackground}; }`)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestController.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var suggestController_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},suggestController_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// sticky suggest widget which doesn't disappear on focus out and such
let _sticky=!1;
// _sticky = Boolean("true"); // done "weirdly" so that a lint warning prevents you from pushing this
class LineSuffix{constructor(_model,_position){this._model=_model,this._position=_position;
// spy on what's happening right of the cursor. two cases:
// 1. end of line -> check that it's still end of line
// 2. mid of line -> add a marker and compute the delta
const maxColumn=_model.getLineMaxColumn(_position.lineNumber);if(maxColumn!==_position.column){const offset=_model.getOffsetAt(_position),end=_model.getPositionAt(offset+1);this._marker=_model.deltaDecorations([],[{range:core_range/* Range */.e.fromPositions(_position,end),options:{description:"suggest-line-suffix",stickiness:1/* NeverGrowsWhenTypingAtEdges */}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(position){if(this._model.isDisposed()||this._position.lineNumber!==position.lineNumber)
// bail out early if things seems fishy
return 0;
// read the marker (in case suggest was triggered at line end) or compare
// the cursor to the line end.
if(this._marker){const range=this._model.getDecorationRange(this._marker[0]),end=this._model.getOffsetAt(range.getStartPosition());return end-this._model.getOffsetAt(position)}return this._model.getLineMaxColumn(position.lineNumber)-position.column}}let SuggestController=class SuggestController{constructor(editor,_memoryService,_commandService,_contextKeyService,_instantiationService,_logService){this._memoryService=_memoryService,this._commandService=_commandService,this._contextKeyService=_contextKeyService,this._instantiationService=_instantiationService,this._logService=_logService,this._lineSuffix=new lifecycle/* MutableDisposable */.XK,this._toDispose=new lifecycle/* DisposableStore */.SL,this._selectors=new PriorityRegistry((s=>s.priority)),this.editor=editor,this.model=_instantiationService.createInstance(SuggestModel,this.editor);
// context key: update insert/replace mode
const ctxInsertMode=suggest/* Context */._y.InsertMode.bindTo(_contextKeyService);ctxInsertMode.set(editor.getOption(105/* suggest */).insertMode),this.model.onDidTrigger((()=>ctxInsertMode.set(editor.getOption(105/* suggest */).insertMode))),this.widget=this._toDispose.add(new common_async/* IdleValue */.Ue((()=>{const widget=this._instantiationService.createInstance(SuggestWidget,this.editor);this._toDispose.add(widget),this._toDispose.add(widget.onDidSelect((item=>this._insertSuggestion(item,0)),this));
// Wire up logic to accept a suggestion on certain characters
const commitCharacterController=new CommitCharacterController(this.editor,widget,(item=>this._insertSuggestion(item,2/* NoAfterUndoStop */)));this._toDispose.add(commitCharacterController),this._toDispose.add(this.model.onDidSuggest((e=>{0===e.completionModel.items.length&&commitCharacterController.reset()})));
// Wire up makes text edit context key
const ctxMakesTextEdit=suggest/* Context */._y.MakesTextEdit.bindTo(this._contextKeyService),ctxHasInsertAndReplace=suggest/* Context */._y.HasInsertAndReplaceRange.bindTo(this._contextKeyService),ctxCanResolve=suggest/* Context */._y.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,lifecycle/* toDisposable */.OF)((()=>{ctxMakesTextEdit.reset(),ctxHasInsertAndReplace.reset(),ctxCanResolve.reset()}))),this._toDispose.add(widget.onDidFocus((({item:item})=>{
// (ctx: makesTextEdit)
const position=this.editor.getPosition(),startColumn=item.editStart.column,endColumn=position.column;let value=!0;if("smart"===this.editor.getOption(1/* acceptSuggestionOnEnter */)&&2/* Auto */===this.model.state&&!item.completion.additionalTextEdits&&!(4/* InsertAsSnippet */&item.completion.insertTextRules)&&endColumn-startColumn===item.completion.insertText.length){const oldText=this.editor.getModel().getValueInRange({startLineNumber:position.lineNumber,startColumn:startColumn,endLineNumber:position.lineNumber,endColumn:endColumn});value=oldText!==item.completion.insertText}ctxMakesTextEdit.set(value),
// (ctx: hasInsertAndReplaceRange)
ctxHasInsertAndReplace.set(!core_position/* Position */.L.equals(item.editInsertEnd,item.editReplaceEnd)),
// (ctx: canResolve)
ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem)||Boolean(item.completion.documentation)||item.completion.detail!==item.completion.label)}))),this._toDispose.add(widget.onDetailsKeyDown((e=>{
// cmd + c on macOS, ctrl + c on Win / Linux
e.toKeybinding().equals(new keybindings/* SimpleKeybinding */.QC(!0,!1,!1,!1,33/* KeyC */))||platform/* isMacintosh */.dz&&e.toKeybinding().equals(new keybindings/* SimpleKeybinding */.QC(!1,!1,!1,!0,33/* KeyC */))?e.stopPropagation():e.toKeybinding().isModifierKey()||this.editor.focus()}))),widget}))),
// Wire up text overtyping capture
this._overtypingCapturer=this._toDispose.add(new common_async/* IdleValue */.Ue((()=>this._toDispose.add(new OvertypingCapturer(this.editor,this.model))))),this._alternatives=this._toDispose.add(new common_async/* IdleValue */.Ue((()=>this._toDispose.add(new SuggestAlternatives(this.editor,this._contextKeyService))))),this._toDispose.add(_instantiationService.createInstance(WordContextKey,editor)),this._toDispose.add(this.model.onDidTrigger((e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new LineSuffix(this.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((e=>{if(!e.shy){let index=-1;for(const selector of this._selectors.itemsOrderedByPriorityDesc)if(index=selector.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items),-1!==index)break;-1===index&&(index=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items)),this.widget.value.showSuggestions(e.completionModel,index,e.isFrozen,e.auto)}}))),this._toDispose.add(this.model.onDidCancel((e=>{e.retrigger||this.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((()=>{_sticky||(this.model.cancel(),this.model.clear())})));
// Manage the acceptSuggestionsOnEnter context key
let acceptSuggestionsOnEnter=suggest/* Context */._y.AcceptSuggestionsOnEnter.bindTo(_contextKeyService),updateFromConfig=()=>{const acceptSuggestionOnEnter=this.editor.getOption(1/* acceptSuggestionOnEnter */);acceptSuggestionsOnEnter.set("on"===acceptSuggestionOnEnter||"smart"===acceptSuggestionOnEnter)};this._toDispose.add(this.editor.onDidChangeConfiguration((()=>updateFromConfig()))),updateFromConfig()}static get(editor){return editor.getContribution(SuggestController.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(event,flags){if(!event||!event.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const model=this.editor.getModel(),modelVersionNow=model.getAlternativeVersionId(),{item:item}=event,tasks=[],cts=new cancellation/* CancellationTokenSource */.A;
// pushing undo stops *before* additional text edits and
// *after* the main edit
1/* NoBeforeUndoStop */&flags||this.editor.pushUndoStop();
// compute overwrite[Before|After] deltas BEFORE applying extra edits
const info=this.getOverwriteInfo(item,Boolean(8/* AlternativeOverwriteConfig */&flags));
// keep item in memory
if(this._memoryService.memorize(model,this.editor.getPosition(),item),Array.isArray(item.completion.additionalTextEdits)){
// sync additional edits
const scrollState=editorState/* StableEditorScrollState */.ZF.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",item.completion.additionalTextEdits.map((edit=>editOperation/* EditOperation */.h.replace(core_range/* Range */.e.lift(edit.range),edit.text)))),scrollState.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!item.isResolved){
// async additional edits
const sw=new stopwatch/* StopWatch */.G(!0);let position;const docListener=model.onDidChangeContent((e=>{if(e.isFlush)return cts.cancel(),void docListener.dispose();for(let change of e.changes){const thisPosition=core_range/* Range */.e.getEndPosition(change.range);position&&!core_position/* Position */.L.isBefore(thisPosition,position)||(position=thisPosition)}}));let oldFlags=flags;flags|=2/* NoAfterUndoStop */;let didType=!1,typeListener=this.editor.onWillType((()=>{typeListener.dispose(),didType=!0,2/* NoAfterUndoStop */&oldFlags||this.editor.pushUndoStop()}));tasks.push(item.resolve(cts.token).then((()=>{if(!item.completion.additionalTextEdits||cts.token.isCancellationRequested)return!1;if(position&&item.completion.additionalTextEdits.some((edit=>core_position/* Position */.L.isBefore(position,core_range/* Range */.e.getStartPosition(edit.range)))))return!1;didType&&this.editor.pushUndoStop();const scrollState=editorState/* StableEditorScrollState */.ZF.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",item.completion.additionalTextEdits.map((edit=>editOperation/* EditOperation */.h.replace(core_range/* Range */.e.lift(edit.range),edit.text)))),scrollState.restoreRelativeVerticalPositionOfCursor(this.editor),!didType&&2/* NoAfterUndoStop */&oldFlags||this.editor.pushUndoStop(),!0})).then((applied=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",sw.elapsed(),applied),docListener.dispose(),typeListener.dispose()})))}let{insertText:insertText}=item.completion;4/* InsertAsSnippet */&item.completion.insertTextRules||(insertText=snippetParser/* SnippetParser */.Yj.escape(insertText)),SnippetController2.get(this.editor).insert(insertText,{overwriteBefore:info.overwriteBefore,overwriteAfter:info.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1/* KeepWhitespace */&item.completion.insertTextRules),clipboardText:event.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2/* NoAfterUndoStop */&flags||this.editor.pushUndoStop(),item.completion.command?item.completion.command.id===TriggerSuggestAction.id?
// retigger
this.model.trigger({auto:!0,shy:!1},!0):(
// exec command, done
tasks.push(this._commandService.executeCommand(item.completion.command.id,...item.completion.command.arguments?[...item.completion.command.arguments]:[]).catch(errors/* onUnexpectedError */.dL)),this.model.cancel()):
// done
this.model.cancel(),4/* KeepAlternativeSuggestions */&flags&&this._alternatives.value.set(event,(next=>{
// cancel resolving of additional edits
cts.cancel();
// this is not so pretty. when inserting the 'next'
// suggestion we undo until we are at the state at
// which we were before inserting the previous suggestion...
while(model.canUndo()){modelVersionNow!==model.getAlternativeVersionId()&&model.undo(),this._insertSuggestion(next,3/* NoAfterUndoStop */|(8/* AlternativeOverwriteConfig */&flags?8/* AlternativeOverwriteConfig */:0));break}})),this._alertCompletionItem(item),
// clear only now - after all tasks are done
Promise.all(tasks).finally((()=>{this.model.clear(),cts.dispose()}))}getOverwriteInfo(item,toggleMode){(0,types/* assertType */.p_)(this.editor.hasModel());let replace="replace"===this.editor.getOption(105/* suggest */).insertMode;toggleMode&&(replace=!replace);const overwriteBefore=item.position.column-item.editStart.column,overwriteAfter=(replace?item.editReplaceEnd.column:item.editInsertEnd.column)-item.position.column,columnDelta=this.editor.getPosition().column-item.position.column,suffixDelta=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:overwriteBefore+columnDelta,overwriteAfter:overwriteAfter+suffixDelta}}_alertCompletionItem(item){if((0,arrays/* isNonEmptyArray */.Of)(item.completion.additionalTextEdits)){let msg=nls/* localize */.N("aria.alert.snippet","Accepting '{0}' made {1} additional edits",item.textLabel,item.completion.additionalTextEdits.length);(0,aria/* alert */.Z9)(msg)}}triggerSuggest(onlyFrom){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,onlyFrom),this.editor.revealPosition(this.editor.getPosition(),0/* Smooth */),this.editor.focus())}triggerSuggestAndAcceptBest(arg){if(!this.editor.hasModel())return;const positionNow=this.editor.getPosition(),fallback=()=>{positionNow.equals(this.editor.getPosition())&&this._commandService.executeCommand(arg.fallback)},makesTextEdit=item=>{if(4/* InsertAsSnippet */&item.completion.insertTextRules||item.completion.additionalTextEdits)
// snippet, other editor -> makes edit
return!0;const position=this.editor.getPosition(),startColumn=item.editStart.column,endColumn=position.column;if(endColumn-startColumn!==item.completion.insertText.length)
// unequal lengths -> makes edit
return!0;const textNow=this.editor.getModel().getValueInRange({startLineNumber:position.lineNumber,startColumn:startColumn,endLineNumber:position.lineNumber,endColumn:endColumn});
// unequal text -> makes edit
return textNow!==item.completion.insertText};common_event/* Event */.ju.once(this.model.onDidTrigger)((_=>{
// wait for trigger because only then the cancel-event is trustworthy
let listener=[];common_event/* Event */.ju.any(this.model.onDidTrigger,this.model.onDidCancel)((()=>{
// retrigger or cancel -> try to type default text
(0,lifecycle/* dispose */.B9)(listener),fallback()}),void 0,listener),this.model.onDidSuggest((({completionModel:completionModel})=>{if((0,lifecycle/* dispose */.B9)(listener),0===completionModel.items.length)return void fallback();const index=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),completionModel.items),item=completionModel.items[index];makesTextEdit(item)?(this.editor.pushUndoStop(),this._insertSuggestion({index:index,item:item,model:completionModel},7/* NoAfterUndoStop */)):fallback()}),void 0,listener)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(positionNow,0/* Smooth */),this.editor.focus()}acceptSelectedSuggestion(keepAlternativeSuggestions,alternativeOverwriteConfig){const item=this.widget.value.getFocusedItem();let flags=0;keepAlternativeSuggestions&&(flags|=4/* KeepAlternativeSuggestions */),alternativeOverwriteConfig&&(flags|=8/* AlternativeOverwriteConfig */),this._insertSuggestion(item,flags)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(selector){return this._selectors.register(selector)}};SuggestController.ID="editor.contrib.suggestController",SuggestController=suggestController_decorate([suggestController_param(1,ISuggestMemoryService),suggestController_param(2,commands/* ICommandService */.H),suggestController_param(3,contextkey/* IContextKeyService */.i6),suggestController_param(4,instantiation/* IInstantiationService */.TG),suggestController_param(5,log/* ILogService */.VZ)],SuggestController);class PriorityRegistry{constructor(prioritySelector){this.prioritySelector=prioritySelector,this._items=new Array}register(value){if(-1!==this._items.indexOf(value))throw new Error("Value is already registered");return this._items.push(value),this._items.sort(((s1,s2)=>this.prioritySelector(s2)-this.prioritySelector(s1))),{dispose:()=>{const idx=this._items.indexOf(value);idx>=0&&this._items.splice(idx,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class TriggerSuggestAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:TriggerSuggestAction.id,label:nls/* localize */.N("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasCompletionItemProvider),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:2058/* Space */,secondary:[2087/* KeyI */],mac:{primary:266/* Space */,secondary:[521/* Escape */,2087/* KeyI */]},weight:100/* EditorContrib */}})}run(accessor,editor){const controller=SuggestController.get(editor);controller&&controller.triggerSuggest()}}TriggerSuggestAction.id="editor.action.triggerSuggest",(0,editorExtensions/* registerEditorContribution */._K)(SuggestController.ID,SuggestController),(0,editorExtensions/* registerEditorAction */.Qr)(TriggerSuggestAction);const weight=190,SuggestCommand=editorExtensions/* EditorCommand */._l.bindToContribution(SuggestController.get);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/utils.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function createDisposableRef(object,disposable){return{object:object,dispose:()=>null===disposable||void 0===disposable?void 0:disposable.dispose()}}function compareBy(selector,comparator){return(a,b)=>comparator(selector(a),selector(b))}function compareByNumber(){return(a,b)=>a-b}function findMaxBy(items,comparator){let min;for(const item of items)(void 0===min||comparator(item,min)>0)&&(min=item);return min}(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"acceptSelectedSuggestion",precondition:suggest/* Context */._y.Visible,handler(x){x.acceptSelectedSuggestion(!0,!1)}})),
// normal tab
keybindingsRegistry/* KeybindingsRegistry */.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,editorContextKeys/* EditorContextKeys */.u.textInputFocus),primary:2/* Tab */,weight:weight}),
// accept on enter has special rules
keybindingsRegistry/* KeybindingsRegistry */.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,editorContextKeys/* EditorContextKeys */.u.textInputFocus,suggest/* Context */._y.AcceptSuggestionsOnEnter,suggest/* Context */._y.MakesTextEdit),primary:3/* Enter */,weight:weight}),common_actions/* MenuRegistry */.BH.appendMenuItem(suggest/* suggestWidgetStatusbarMenu */.GI,{command:{id:"acceptSelectedSuggestion",title:nls/* localize */.N("accept.insert","Insert")},group:"left",order:1,when:suggest/* Context */._y.HasInsertAndReplaceRange.toNegated()}),common_actions/* MenuRegistry */.BH.appendMenuItem(suggest/* suggestWidgetStatusbarMenu */.GI,{command:{id:"acceptSelectedSuggestion",title:nls/* localize */.N("accept.insert","Insert")},group:"left",order:1,when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.HasInsertAndReplaceRange,suggest/* Context */._y.InsertMode.isEqualTo("insert"))}),common_actions/* MenuRegistry */.BH.appendMenuItem(suggest/* suggestWidgetStatusbarMenu */.GI,{command:{id:"acceptSelectedSuggestion",title:nls/* localize */.N("accept.replace","Replace")},group:"left",order:1,when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.HasInsertAndReplaceRange,suggest/* Context */._y.InsertMode.isEqualTo("replace"))}),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"acceptAlternativeSelectedSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,editorContextKeys/* EditorContextKeys */.u.textInputFocus),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:1027/* Enter */,secondary:[1026/* Tab */]},handler(x){x.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:suggest/* suggestWidgetStatusbarMenu */.GI,group:"left",order:2,when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.HasInsertAndReplaceRange,suggest/* Context */._y.InsertMode.isEqualTo("insert")),title:nls/* localize */.N("accept.replace","Replace")},{menuId:suggest/* suggestWidgetStatusbarMenu */.GI,group:"left",order:2,when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.HasInsertAndReplaceRange,suggest/* Context */._y.InsertMode.isEqualTo("replace")),title:nls/* localize */.N("accept.insert","Insert")}]})),
// continue to support the old command
commands/* CommandsRegistry */.P.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"hideSuggestWidget",precondition:suggest/* Context */._y.Visible,handler:x=>x.cancelSuggestWidget(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:9/* Escape */,secondary:[1033/* Escape */]}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"selectNextSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,suggest/* Context */._y.MultipleSuggestions),handler:c=>c.selectNextSuggestion(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:18/* DownArrow */,secondary:[2066/* DownArrow */],mac:{primary:18/* DownArrow */,secondary:[2066/* DownArrow */,300/* KeyN */]}}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"selectNextPageSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,suggest/* Context */._y.MultipleSuggestions),handler:c=>c.selectNextPageSuggestion(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:12/* PageDown */,secondary:[2060/* PageDown */]}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"selectLastSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,suggest/* Context */._y.MultipleSuggestions),handler:c=>c.selectLastSuggestion()})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"selectPrevSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,suggest/* Context */._y.MultipleSuggestions),handler:c=>c.selectPrevSuggestion(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:16/* UpArrow */,secondary:[2064/* UpArrow */],mac:{primary:16/* UpArrow */,secondary:[2064/* UpArrow */,302/* KeyP */]}}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"selectPrevPageSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,suggest/* Context */._y.MultipleSuggestions),handler:c=>c.selectPrevPageSuggestion(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:11/* PageUp */,secondary:[2059/* PageUp */]}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"selectFirstSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.Visible,suggest/* Context */._y.MultipleSuggestions),handler:c=>c.selectFirstSuggestion()})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"toggleSuggestionDetails",precondition:suggest/* Context */._y.Visible,handler:x=>x.toggleSuggestionDetails(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:2058/* Space */,secondary:[2087/* KeyI */],mac:{primary:266/* Space */,secondary:[2087/* KeyI */]}},menuOpts:[{menuId:suggest/* suggestWidgetStatusbarMenu */.GI,group:"right",order:1,when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.DetailsVisible,suggest/* Context */._y.CanResolve),title:nls/* localize */.N("detail.more","show less")},{menuId:suggest/* suggestWidgetStatusbarMenu */.GI,group:"right",order:1,when:contextkey/* ContextKeyExpr */.Ao.and(suggest/* Context */._y.DetailsVisible.toNegated(),suggest/* Context */._y.CanResolve),title:nls/* localize */.N("detail.less","show more")}]})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"toggleExplainMode",precondition:suggest/* Context */._y.Visible,handler:x=>x.toggleExplainMode(),kbOpts:{weight:100/* EditorContrib */,primary:2133/* Slash */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"toggleSuggestionFocus",precondition:suggest/* Context */._y.Visible,handler:x=>x.toggleSuggestionFocus(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:2570/* Space */,mac:{primary:778/* Space */}}})),
//#region tab completions
(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"insertBestCompletion",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.textInputFocus,contextkey/* ContextKeyExpr */.Ao.equals("config.editor.tabCompletion","on"),WordContextKey.AtEnd,suggest/* Context */._y.Visible.toNegated(),SuggestAlternatives.OtherSuggestions.toNegated(),SnippetController2.InSnippetMode.toNegated()),handler:(x,arg)=>{x.triggerSuggestAndAcceptBest((0,types/* isObject */.Kn)(arg)?Object.assign({fallback:"tab"},arg):{fallback:"tab"})},kbOpts:{weight:weight,primary:2/* Tab */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"insertNextSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.textInputFocus,contextkey/* ContextKeyExpr */.Ao.equals("config.editor.tabCompletion","on"),SuggestAlternatives.OtherSuggestions,suggest/* Context */._y.Visible.toNegated(),SnippetController2.InSnippetMode.toNegated()),handler:x=>x.acceptNextSuggestion(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:2/* Tab */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new SuggestCommand({id:"insertPrevSuggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.textInputFocus,contextkey/* ContextKeyExpr */.Ao.equals("config.editor.tabCompletion","on"),SuggestAlternatives.OtherSuggestions,suggest/* Context */._y.Visible.toNegated(),SnippetController2.InSnippetMode.toNegated()),handler:x=>x.acceptPrevSuggestion(),kbOpts:{weight:weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:1026/* Tab */}})),(0,editorExtensions/* registerEditorAction */.Qr)(class extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:nls/* localize */.N("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(_accessor,editor){SuggestController.get(editor).resetWidgetSize()}});// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/suggestWidgetInlineCompletionProvider.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class SuggestWidgetInlineCompletionProvider extends lifecycle/* Disposable */.JT{constructor(editor,suggestControllerPreselector){super(),this.editor=editor,this.suggestControllerPreselector=suggestControllerPreselector,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new common_event/* Emitter */.Q5,this.onDidChange=this.onDidChangeEmitter.event,
// This delay fixes a suggest widget issue when typing "." immediately restarts the suggestion session.
this.setInactiveDelayed=this._register(new common_async/* RunOnceScheduler */.pY((()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())}),100)),
// See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab
this._register(editor.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(editor.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const suggestController=SuggestController.get(this.editor);if(suggestController){this._register(suggestController.registerSelector({priority:100,select:(model,pos,suggestItems)=>{const textModel=this.editor.getModel(),normalizedItemToPreselect=minimizeInlineCompletion(textModel,this.suggestControllerPreselector());if(!normalizedItemToPreselect)return-1;const position=core_position/* Position */.L.lift(pos),candidates=suggestItems.map(((suggestItem,index)=>{const inlineSuggestItem=suggestionToInlineCompletion(suggestController,position,suggestItem,this.isShiftKeyPressed),normalizedSuggestItem=minimizeInlineCompletion(textModel,inlineSuggestItem);if(!normalizedSuggestItem)return;const valid=rangeStartsWith(normalizedItemToPreselect.range,normalizedSuggestItem.range)&&normalizedItemToPreselect.text.startsWith(normalizedSuggestItem.text);return{index:index,valid:valid,prefixLength:normalizedSuggestItem.text.length,suggestItem:suggestItem}})).filter((item=>item&&item.valid)),result=findMaxBy(candidates,compareBy((s=>s.prefixLength),compareByNumber()));return result?result.index:-1}}));let isBoundToSuggestWidget=!1;const bindToSuggestWidget=()=>{isBoundToSuggestWidget||(isBoundToSuggestWidget=!0,this._register(suggestController.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(suggestController.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)}))),this._register(suggestController.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(common_event/* Event */.ju.once(suggestController.model.onDidTrigger)((e=>{bindToSuggestWidget()})))}this.update(this._isActive)}
/**
     * Returns undefined if the suggest widget is not active.
    */get state(){if(this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(newActive){const newInlineCompletion=this.getInlineCompletion();let shouldFire=!1;normalizedInlineCompletionsEquals(this._currentInlineCompletion,newInlineCompletion)||(this._currentInlineCompletion=newInlineCompletion,shouldFire=!0),this._isActive!==newActive&&(this._isActive=newActive,shouldFire=!0),shouldFire&&this.onDidChangeEmitter.fire()}getInlineCompletion(){const suggestController=SuggestController.get(this.editor);if(!suggestController)return;if(!this.isSuggestWidgetVisible)return;const focusedItem=suggestController.widget.value.getFocusedItem();return focusedItem?suggestionToInlineCompletion(suggestController,this.editor.getPosition(),focusedItem.item,this.isShiftKeyPressed):void 0;
// TODO: item.isResolved
}stopForceRenderingAbove(){const suggestController=SuggestController.get(this.editor);suggestController&&suggestController.stopForceRenderingAbove()}forceRenderingAbove(){const suggestController=SuggestController.get(this.editor);suggestController&&suggestController.forceRenderingAbove()}}function rangeStartsWith(rangeToTest,prefix){return rangeToTest.startLineNumber===prefix.startLineNumber&&rangeToTest.startColumn===prefix.startColumn&&(rangeToTest.endLineNumber<prefix.endLineNumber||rangeToTest.endLineNumber===prefix.endLineNumber&&rangeToTest.endColumn<=prefix.endColumn)}function suggestionToInlineCompletion(suggestController,position,item,toggleMode){
// additionalTextEdits might not be resolved here, this could be problematic.
if(Array.isArray(item.completion.additionalTextEdits)&&item.completion.additionalTextEdits.length>0)
// cannot represent additional text edits
return{text:"",range:core_range/* Range */.e.fromPositions(position,position)};let{insertText:insertText}=item.completion;if(4/* InsertAsSnippet */&item.completion.insertTextRules){const snippet=(new snippetParser/* SnippetParser */.Yj).parse(insertText),model=suggestController.editor.getModel();
// Ignore snippets that are too large.
// Adjust whitespace is expensive for them.
if(snippet.children.length>100)return;SnippetSession.adjustWhitespace(model,position,snippet,!0,!0),insertText=snippet.toString()}const info=suggestController.getOverwriteInfo(item,toggleMode);return{text:insertText,range:core_range/* Range */.e.fromPositions(position.delta(0,-info.overwriteBefore),position.delta(0,Math.max(info.overwriteAfter,0)))}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/suggestWidgetPreviewModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var suggestWidgetPreviewModel_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class SuggestWidgetPreviewModel extends BaseGhostTextWidgetModel{constructor(editor,cache){super(editor),this.cache=cache,this.suggestionInlineCompletionSource=this._register(new SuggestWidgetInlineCompletionProvider(this.editor,(
// Use the first cache item (if any) as preselection.
()=>{var _a,_b;return null===(_b=null===(_a=this.cache.value)||void 0===_a?void 0:_a.completions[0])||void 0===_b?void 0:_b.toLiveInlineCompletion()}))),this.updateOperation=this._register(new lifecycle/* MutableDisposable */.XK),this.updateCacheSoon=this._register(new common_async/* RunOnceScheduler */.pY((()=>this.updateCache()),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange((()=>{this.updateCacheSoon.schedule();const suggestWidgetState=this.suggestionInlineCompletionSource.state;suggestWidgetState||(this.minReservedLineCount=0);const newGhostText=this.ghostText;newGhostText&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,sum(newGhostText.parts.map((p=>p.lines.length-1))))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()}))),this._register(this.cache.onDidChange((()=>{this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())}))),this._register((0,lifecycle/* toDisposable */.OF)((()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove())))}get isActive(){return void 0!==this.suggestionInlineCompletionSource.state}isSuggestionPreviewEnabled(){const suggestOptions=this.editor.getOption(105/* suggest */);return suggestOptions.preview}updateCache(){return suggestWidgetPreviewModel_awaiter(this,void 0,void 0,(function*(){const state=this.suggestionInlineCompletionSource.state;if(!state||!state.selectedItemAsInlineCompletion)return;const info={text:state.selectedItemAsInlineCompletion.text,range:state.selectedItemAsInlineCompletion.range},position=this.editor.getPosition(),promise=(0,common_async/* createCancelablePromise */.PG)((token=>suggestWidgetPreviewModel_awaiter(this,void 0,void 0,(function*(){let result;try{result=yield provideInlineCompletions(position,this.editor.getModel(),{triggerKind:modes/* InlineCompletionTriggerKind */.bw.Automatic,selectedSuggestionInfo:info},token)}catch(e){return void(0,errors/* onUnexpectedError */.dL)(e)}token.isCancellationRequested||(this.cache.setValue(this.editor,result,modes/* InlineCompletionTriggerKind */.bw.Automatic),this.onDidChangeEmitter.fire())})))),operation=new UpdateOperation(promise,modes/* InlineCompletionTriggerKind */.bw.Automatic);this.updateOperation.value=operation,yield promise,this.updateOperation.value===operation&&this.updateOperation.clear()}))}get ghostText(){var _a,_b;if(!this.isSuggestionPreviewEnabled())return;const suggestWidgetState=this.suggestionInlineCompletionSource.state,originalInlineCompletion=minimizeInlineCompletion(this.editor.getModel(),null===suggestWidgetState||void 0===suggestWidgetState?void 0:suggestWidgetState.selectedItemAsInlineCompletion),augmentedCompletion=minimizeInlineCompletion(this.editor.getModel(),null===(_b=null===(_a=this.cache.value)||void 0===_a?void 0:_a.completions[0])||void 0===_b?void 0:_b.toLiveInlineCompletion()),finalCompletion=augmentedCompletion&&originalInlineCompletion&&augmentedCompletion.text.startsWith(originalInlineCompletion.text)&&augmentedCompletion.range.equalsRange(originalInlineCompletion.range)?augmentedCompletion:originalInlineCompletion||augmentedCompletion,inlineCompletionPreviewLength=originalInlineCompletion?((null===finalCompletion||void 0===finalCompletion?void 0:finalCompletion.text.length)||0)-originalInlineCompletion.text.length:0,toGhostText=completion=>{const mode=this.editor.getOptions().get(105/* suggest */).previewMode;return completion?inlineCompletionToGhostText(completion,this.editor.getModel(),mode,this.editor.getPosition(),inlineCompletionPreviewLength)||
// Show an invisible ghost text to reserve space
new GhostText(completion.range.endLineNumber,[],this.minReservedLineCount):void 0},newGhostText=toGhostText(finalCompletion);return newGhostText}}function sum(arr){return arr.reduce(((a,b)=>a+b),0)}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/ghostTextModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var ghostTextModel_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ghostTextModel_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},ghostTextModel_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class DelegatingModel extends lifecycle/* Disposable */.JT{constructor(){super(...arguments),this.onDidChangeEmitter=new common_event/* Emitter */.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new lifecycle/* MutableDisposable */.XK)}get targetModel(){var _a;return null===(_a=this.currentModelRef.value)||void 0===_a?void 0:_a.object}setTargetModel(model){var _a;(null===(_a=this.currentModelRef.value)||void 0===_a?void 0:_a.object)!==model&&(this.currentModelRef.clear(),this.currentModelRef.value=model?createDisposableRef(model,model.onDidChange((()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()}))):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var _a,_b;return this.hasCachedGhostText||(this.cachedGhostText=null===(_b=null===(_a=this.currentModelRef.value)||void 0===_a?void 0:_a.object)||void 0===_b?void 0:_b.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(expanded){var _a;null===(_a=this.targetModel)||void 0===_a||_a.setExpanded(expanded)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}
/**
 * A ghost text model that is both driven by inline completions and the suggest widget.
*/let GhostTextModel=class extends DelegatingModel{constructor(editor,commandService){super(),this.editor=editor,this.commandService=commandService,this.sharedCache=this._register(new SharedInlineCompletionCache),this.suggestWidgetAdapterModel=this._register(new SuggestWidgetPreviewModel(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new InlineCompletionsModel(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange((()=>{this.updateModel()}))),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(hoverRange){var _a;const ghostText=null===(_a=this.activeInlineCompletionsModel)||void 0===_a?void 0:_a.ghostText;return!!ghostText&&ghostText.parts.some((p=>hoverRange.containsPosition(new core_position/* Position */.L(ghostText.lineNumber,p.column))))}triggerInlineCompletion(){var _a;null===(_a=this.activeInlineCompletionsModel)||void 0===_a||_a.trigger(modes/* InlineCompletionTriggerKind */.bw.Explicit)}commitInlineCompletion(){var _a;null===(_a=this.activeInlineCompletionsModel)||void 0===_a||_a.commitCurrentSuggestion()}hideInlineCompletion(){var _a;null===(_a=this.activeInlineCompletionsModel)||void 0===_a||_a.hide()}showNextInlineCompletion(){var _a;null===(_a=this.activeInlineCompletionsModel)||void 0===_a||_a.showNext()}showPreviousInlineCompletion(){var _a;null===(_a=this.activeInlineCompletionsModel)||void 0===_a||_a.showPrevious()}hasMultipleInlineCompletions(){var _a;return ghostTextModel_awaiter(this,void 0,void 0,(function*(){const result=yield null===(_a=this.activeInlineCompletionsModel)||void 0===_a?void 0:_a.hasMultipleInlineCompletions();return void 0!==result&&result}))}};GhostTextModel=ghostTextModel_decorate([ghostTextModel_param(1,commands/* ICommandService */.H)],GhostTextModel);class SharedInlineCompletionCache extends lifecycle/* Disposable */.JT{constructor(){super(...arguments),this.onDidChangeEmitter=new common_event/* Emitter */.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new lifecycle/* MutableDisposable */.XK)}get value(){return this.cache.value}setValue(editor,completionsSource,triggerKind){this.cache.value=new SynchronizedInlineCompletionsCache(editor,completionsSource,(()=>this.onDidChangeEmitter.fire()),triggerKind)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/browser/config/configuration.js + 1 modules
var ghostTextWidget_a,config_configuration=__webpack_require__(887917),cursorCommon=__webpack_require__(533181),core_lineTokens=__webpack_require__(878411),stringBuilder=__webpack_require__(150072),lineDecorations=__webpack_require__(92550),viewLineRenderer=__webpack_require__(777736),ghostTextWidget_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ghostTextWidget_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/controller/cursorCommon.js
const ttPolicy=null===(ghostTextWidget_a=window.trustedTypes)||void 0===ghostTextWidget_a?void 0:ghostTextWidget_a.createPolicy("editorGhostText",{createHTML:value=>value});let GhostTextWidget=class extends lifecycle/* Disposable */.JT{constructor(editor,model,instantiationService,modeService){super(),this.editor=editor,this.model=model,this.instantiationService=instantiationService,this.modeService=modeService,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(DecorationsWidget,this.editor)),this.additionalLinesWidget=this._register(new AdditionalLinesWidget(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(29/* disableMonospaceOptimizations */)||e.hasChanged(104/* stopRenderingLineAfter */)||e.hasChanged(87/* renderWhitespace */)||e.hasChanged(82/* renderControlCharacters */)||e.hasChanged(44/* fontLigatures */)||e.hasChanged(43/* fontInfo */)||e.hasChanged(58/* lineHeight */))&&this.update()}))),this._register((0,lifecycle/* toDisposable */.OF)((()=>{var _a;this.disposed=!0,this.update(),null===(_a=this.viewMoreContentWidget)||void 0===_a||_a.dispose(),this.viewMoreContentWidget=void 0}))),this._register(model.onDidChange((()=>{this.update()}))),this.update()}shouldShowHoverAtViewZone(viewZoneId){return this.additionalLinesWidget.viewZoneId===viewZoneId}update(){var _a;const ghostText=this.model.ghostText;if(!this.editor.hasModel()||!ghostText||this.disposed)return this.partsWidget.clear(),void this.additionalLinesWidget.clear();const inlineTexts=new Array,additionalLines=new Array;function addToAdditionalLines(lines,className){if(additionalLines.length>0){const lastLine=additionalLines[additionalLines.length-1];className&&lastLine.decorations.push(new lineDecorations/* LineDecoration */.Kp(lastLine.content.length+1,lastLine.content.length+1+lines[0].length,className,0/* Regular */)),lastLine.content+=lines[0],lines=lines.slice(1)}for(const line of lines)additionalLines.push({content:line,decorations:className?[new lineDecorations/* LineDecoration */.Kp(1,line.length+1,className,0/* Regular */)]:[]})}const textBufferLine=this.editor.getModel().getLineContent(ghostText.lineNumber);let hiddenTextStartColumn;this.editor.getModel().getLineTokens(ghostText.lineNumber);let lastIdx=0;for(const part of ghostText.parts){let lines=part.lines;void 0===hiddenTextStartColumn?(inlineTexts.push({column:part.column,text:lines[0],preview:part.preview}),lines=lines.slice(1)):addToAdditionalLines([textBufferLine.substring(lastIdx,part.column-1)],void 0),lines.length>0&&(addToAdditionalLines(lines,"ghost-text"),void 0===hiddenTextStartColumn&&part.column<=textBufferLine.length&&(hiddenTextStartColumn=part.column)),lastIdx=part.column-1}void 0!==hiddenTextStartColumn&&addToAdditionalLines([textBufferLine.substring(lastIdx)],void 0),this.partsWidget.setParts(ghostText.lineNumber,inlineTexts,void 0!==hiddenTextStartColumn?{column:hiddenTextStartColumn,length:textBufferLine.length+1-hiddenTextStartColumn}:void 0),this.additionalLinesWidget.updateLines(ghostText.lineNumber,additionalLines,ghostText.additionalReservedLineCount),ghostText.parts.some((p=>p.lines.length<0))?
// Not supported at the moment, condition is always false.
this.viewMoreContentWidget=this.renderViewMoreLines(new core_position/* Position */.L(ghostText.lineNumber,this.editor.getModel().getLineMaxColumn(ghostText.lineNumber)),"",0):(null===(_a=this.viewMoreContentWidget)||void 0===_a||_a.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(position,firstLineText,remainingLinesLength){const fontInfo=this.editor.getOption(43/* fontInfo */),domNode=document.createElement("div");domNode.className="suggest-preview-additional-widget",config_configuration/* Configuration */.V.applyFontInfoSlow(domNode,fontInfo);const spacer=document.createElement("span");spacer.className="content-spacer",spacer.append(firstLineText),domNode.append(spacer);const newline=document.createElement("span");newline.className="content-newline suggest-preview-text",newline.append("  "),domNode.append(newline);const disposableStore=new lifecycle/* DisposableStore */.SL,button=document.createElement("div");return button.className="button suggest-preview-text",button.append(`+${remainingLinesLength} lines`),disposableStore.add(dom/* addStandardDisposableListener */.mu(button,"mousedown",(e=>{var _a;null===(_a=this.model)||void 0===_a||_a.setExpanded(!0),e.preventDefault(),this.editor.focus()}))),domNode.append(button),new ViewMoreLinesContentWidget(this.editor,position,domNode,disposableStore)}};GhostTextWidget=ghostTextWidget_decorate([ghostTextWidget_param(2,instantiation/* IInstantiationService */.TG),ghostTextWidget_param(3,modeService/* IModeService */.h)],GhostTextWidget);let DecorationsWidget=class{constructor(editor,codeEditorService,themeService,contextKeyService){this.editor=editor,this.codeEditorService=codeEditorService,this.themeService=themeService,this.contextKeyService=contextKeyService,this.decorationIds=[],this.disposableStore=new lifecycle/* DisposableStore */.SL}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(lineNumber,parts,hiddenText){this.disposableStore.clear();const colorTheme=this.themeService.getColorTheme(),foreground=colorTheme.getColor(editorColorRegistry/* ghostTextForeground */.N5);let opacity,color;foreground&&(opacity=String(foreground.rgba.a),color=common_color/* Color */.Il.Format.CSS.format(opaque(foreground)));const borderColor=colorTheme.getColor(editorColorRegistry/* ghostTextBorder */.x3);let border;borderColor&&(border=`2px dashed ${borderColor}`);const textModel=this.editor.getModel();if(!textModel)return;const{tabSize:tabSize}=textModel.getOptions(),line=textModel.getLineContent(lineNumber)||"";let lastIndex=0,currentLinePrefix="";const hiddenTextDecorations=new Array;hiddenText&&hiddenTextDecorations.push({range:core_range/* Range */.e.fromPositions(new core_position/* Position */.L(lineNumber,hiddenText.column),new core_position/* Position */.L(lineNumber,hiddenText.column+hiddenText.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const key=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),shouldUseInjectedText=void 0===key||!!key;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,parts.map((p=>{currentLinePrefix+=line.substring(lastIndex,p.column-1),lastIndex=p.column-1;
// To avoid visual confusion, we don't want to render visible whitespace
const contentText=shouldUseInjectedText?p.text:this.renderSingleLineText(p.text,currentLinePrefix,tabSize,!1),decorationType=this.disposableStore.add(registerDecorationType(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{
// TODO: escape?
contentText:contentText,opacity:opacity,color:color,border:border,fontWeight:p.preview?"bold":"normal"}}));return{range:core_range/* Range */.e.fromPositions(new core_position/* Position */.L(lineNumber,p.column)),options:shouldUseInjectedText?{description:"ghost-text",after:{content:contentText,inlineClassName:p.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}:Object.assign({},decorationType.resolve())}})).concat(hiddenTextDecorations))}renderSingleLineText(text,lineStart,tabSize,renderWhitespace){const newLine=lineStart+text,visibleColumnsByColumns=cursorCommon/* CursorColumns */.io.visibleColumnsByColumns(newLine,tabSize);let contentText="",curCol=lineStart.length+1;for(const c of text){if("\t"===c){const width=visibleColumnsByColumns[curCol+1]-visibleColumnsByColumns[curCol];if(renderWhitespace){contentText+="";for(let i=1;i<width;i++)contentText+=""}else for(let i=0;i<width;i++)contentText+=""}else contentText+=" "===c?renderWhitespace?"":"":c;curCol+=1}return contentText}};function opaque(color){const{r:r,b:b,g:g}=color.rgba;return new common_color/* Color */.Il(new common_color/* RGBA */.VS(r,g,b,255))}DecorationsWidget=ghostTextWidget_decorate([ghostTextWidget_param(1,services_codeEditorService/* ICodeEditorService */.$),ghostTextWidget_param(2,common_themeService/* IThemeService */.XE),ghostTextWidget_param(3,contextkey/* IContextKeyService */.i6)],DecorationsWidget);class AdditionalLinesWidget{constructor(editor,languageIdCodec){this.editor=editor,this.languageIdCodec=languageIdCodec,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones((changeAccessor=>{this._viewZoneId&&(changeAccessor.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(lineNumber,additionalLines,minReservedLineCount){const textModel=this.editor.getModel();if(!textModel)return;const{tabSize:tabSize}=textModel.getOptions();this.editor.changeViewZones((changeAccessor=>{this._viewZoneId&&(changeAccessor.removeZone(this._viewZoneId),this._viewZoneId=void 0);const heightInLines=Math.max(additionalLines.length,minReservedLineCount);if(heightInLines>0){const domNode=document.createElement("div");renderLines(domNode,tabSize,additionalLines,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=changeAccessor.addZone({afterLineNumber:lineNumber,heightInLines:heightInLines,domNode:domNode})}}))}}function renderLines(domNode,tabSize,lines,opts,languageIdCodec){const disableMonospaceOptimizations=opts.get(29/* disableMonospaceOptimizations */),stopRenderingLineAfter=opts.get(104/* stopRenderingLineAfter */),renderWhitespace="none",renderControlCharacters=opts.get(82/* renderControlCharacters */),fontLigatures=opts.get(44/* fontLigatures */),fontInfo=opts.get(43/* fontInfo */),lineHeight=opts.get(58/* lineHeight */),sb=(0,stringBuilder/* createStringBuilder */.l$)(1e4);sb.appendASCIIString('<div class="suggest-preview-text">');for(let i=0,len=lines.length;i<len;i++){const lineData=lines[i],line=lineData.content;sb.appendASCIIString('<div class="view-line'),sb.appendASCIIString('" style="top:'),sb.appendASCIIString(String(i*lineHeight)),sb.appendASCIIString('px;width:1000000px;">');const isBasicASCII=strings/* isBasicASCII */.$i(line),containsRTL=strings/* containsRTL */.Ut(line),lineTokens=core_lineTokens/* LineTokens */.A.createEmpty(line,languageIdCodec);(0,viewLineRenderer/* renderViewLine */.d1)(new viewLineRenderer/* RenderLineInput */.IJ(fontInfo.isMonospace&&!disableMonospaceOptimizations,fontInfo.canUseHalfwidthRightwardsArrow,line,!1,isBasicASCII,containsRTL,0,lineTokens,lineData.decorations,tabSize,0,fontInfo.spaceWidth,fontInfo.middotWidth,fontInfo.wsmiddotWidth,stopRenderingLineAfter,renderWhitespace,renderControlCharacters,fontLigatures!==editorOptions/* EditorFontLigatures */.n0.OFF,null),sb),sb.appendASCIIString("</div>")}sb.appendASCIIString("</div>"),config_configuration/* Configuration */.V.applyFontInfoSlow(domNode,fontInfo);const html=sb.build(),trustedhtml=ttPolicy?ttPolicy.createHTML(html):html;domNode.innerHTML=trustedhtml}let keyCounter=0;function registerDecorationType(service,description,keyPrefix,options){const key=keyPrefix+keyCounter++;return service.registerDecorationType(description,key,options),{dispose(){service.removeDecorationType(key)},resolve(){return service.resolveDecorationOptions(key,!0)}}}class ViewMoreLinesContentWidget extends lifecycle/* Disposable */.JT{constructor(editor,position,domNode,disposableStore){super(),this.editor=editor,this.position=position,this.domNode=domNode,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(disposableStore),this._register((0,lifecycle/* toDisposable */.OF)((()=>{this.editor.removeContentWidget(this)}))),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0/* EXACT */]}}}(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const foreground=theme.getColor(editorColorRegistry/* ghostTextForeground */.N5);if(foreground){const opacity=String(foreground.rgba.a),color=common_color/* Color */.Il.Format.CSS.format(opaque(foreground));
// `!important` ensures that other decorations don't cause a style conflict (#132017).
collector.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${opacity} !important; color: ${color} !important; }`),collector.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${foreground.toString()} !important; }`),collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${opacity} !important; color: ${color} !important; }`)}const border=theme.getColor(editorColorRegistry/* ghostTextBorder */.x3);border&&(collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${border}; }`),collector.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${border}; }`),collector.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${border}; }`))}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/ghostTextController.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var ghostTextController_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ghostTextController_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},ghostTextController_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let GhostTextController=class GhostTextController extends lifecycle/* Disposable */.JT{constructor(editor,instantiationService){super(),this.editor=editor,this.instantiationService=instantiationService,this.triggeredExplicitly=!1,this.activeController=this._register(new lifecycle/* MutableDisposable */.XK),this._register(this.editor.onDidChangeModel((()=>{this.updateModelController()}))),this._register(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(105/* suggest */)&&this.updateModelController(),e.hasChanged(54/* inlineSuggest */)&&this.updateModelController()}))),this.updateModelController()}static get(editor){return editor.getContribution(GhostTextController.ID)}get activeModel(){var _a;return null===(_a=this.activeController.value)||void 0===_a?void 0:_a.model}
// Don't call this method when not neccessary. It will recreate the activeController.
updateModelController(){const suggestOptions=this.editor.getOption(105/* suggest */),inlineSuggestOptions=this.editor.getOption(54/* inlineSuggest */);this.activeController.value=void 0,
// ActiveGhostTextController is only created if one of those settings is set or if the inline completions are triggered explicitly.
this.activeController.value=this.editor.hasModel()&&(suggestOptions.preview||inlineSuggestOptions.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(ActiveGhostTextController,this.editor):void 0}shouldShowHoverAt(hoverRange){var _a;return(null===(_a=this.activeModel)||void 0===_a?void 0:_a.shouldShowHoverAt(hoverRange))||!1}shouldShowHoverAtViewZone(viewZoneId){var _a,_b;return(null===(_b=null===(_a=this.activeController.value)||void 0===_a?void 0:_a.widget)||void 0===_b?void 0:_b.shouldShowHoverAtViewZone(viewZoneId))||!1}trigger(){var _a;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(_a=this.activeModel)||void 0===_a||_a.triggerInlineCompletion()}commit(){var _a;null===(_a=this.activeModel)||void 0===_a||_a.commitInlineCompletion()}hide(){var _a;null===(_a=this.activeModel)||void 0===_a||_a.hideInlineCompletion()}showNextInlineCompletion(){var _a;null===(_a=this.activeModel)||void 0===_a||_a.showNextInlineCompletion()}showPreviousInlineCompletion(){var _a;null===(_a=this.activeModel)||void 0===_a||_a.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var _a;return ghostTextController_awaiter(this,void 0,void 0,(function*(){const result=yield null===(_a=this.activeModel)||void 0===_a?void 0:_a.hasMultipleInlineCompletions();return void 0!==result&&result}))}};GhostTextController.inlineSuggestionVisible=new contextkey/* RawContextKey */.uy("inlineSuggestionVisible",!1,nls/* localize */.N("inlineSuggestionVisible","Whether an inline suggestion is visible")),GhostTextController.inlineSuggestionHasIndentation=new contextkey/* RawContextKey */.uy("inlineSuggestionHasIndentation",!1,nls/* localize */.N("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),GhostTextController.inlineSuggestionHasIndentationLessThanTabSize=new contextkey/* RawContextKey */.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,nls/* localize */.N("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),GhostTextController.ID="editor.contrib.ghostTextController",GhostTextController=ghostTextController_decorate([ghostTextController_param(1,instantiation/* IInstantiationService */.TG)],GhostTextController);class GhostTextContextKeys{constructor(contextKeyService){this.contextKeyService=contextKeyService,this.inlineCompletionVisible=GhostTextController.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=GhostTextController.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=GhostTextController.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}
/**
 * The controller for a text editor with an initialized text model.
 * Must be disposed as soon as the model detaches from the editor.
*/let ActiveGhostTextController=class extends lifecycle/* Disposable */.JT{constructor(editor,instantiationService,contextKeyService){super(),this.editor=editor,this.instantiationService=instantiationService,this.contextKeyService=contextKeyService,this.contextKeys=new GhostTextContextKeys(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(GhostTextModel,this.editor)),this.widget=this._register(this.instantiationService.createInstance(GhostTextWidget,this.editor,this.model)),this._register((0,lifecycle/* toDisposable */.OF)((()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)}))),this._register(this.model.onDidChange((()=>{this.updateContextKeys()}))),this.updateContextKeys()}updateContextKeys(){var _a;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(_a=this.model.activeInlineCompletionsModel)||void 0===_a?void 0:_a.ghostText));let startsWithIndentation=!1,startsWithIndentationLessThanTabSize=!0;const ghostText=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&ghostText&&ghostText.parts.length>0){const{column:column,lines:lines}=ghostText.parts[0],firstLine=lines[0],indentationEndColumn=this.editor.getModel().getLineIndentColumn(ghostText.lineNumber),inIndentation=column<=indentationEndColumn;if(inIndentation){let firstNonWsIdx=(0,strings/* firstNonWhitespaceIndex */.LC)(firstLine);-1===firstNonWsIdx&&(firstNonWsIdx=firstLine.length-1),startsWithIndentation=firstNonWsIdx>0;const tabSize=this.editor.getModel().getOptions().tabSize,visibleColumnIndentation=cursorColumns/* CursorColumns */.i.visibleColumnFromColumn(firstLine,firstNonWsIdx+1,tabSize);startsWithIndentationLessThanTabSize=visibleColumnIndentation<tabSize}}this.contextKeys.inlineCompletionSuggestsIndentation.set(startsWithIndentation),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize)}};ActiveGhostTextController=ghostTextController_decorate([ghostTextController_param(1,instantiation/* IInstantiationService */.TG),ghostTextController_param(2,contextkey/* IContextKeyService */.i6)],ActiveGhostTextController);const GhostTextCommand=editorExtensions/* EditorCommand */._l.bindToContribution(GhostTextController.get),commitInlineSuggestionAction=new GhostTextCommand({id:inlineSuggestCommitId,precondition:GhostTextController.inlineSuggestionVisible,handler(x){x.commit(),x.editor.focus()}});(0,editorExtensions/* registerEditorCommand */.fK)(commitInlineSuggestionAction),keybindingsRegistry/* KeybindingsRegistry */.W.registerKeybindingRule({primary:2/* Tab */,weight:200,id:commitInlineSuggestionAction.id,when:contextkey/* ContextKeyExpr */.Ao.and(commitInlineSuggestionAction.precondition,editorContextKeys/* EditorContextKeys */.u.tabMovesFocus.toNegated(),GhostTextController.inlineSuggestionHasIndentationLessThanTabSize)}),(0,editorExtensions/* registerEditorCommand */.fK)(new GhostTextCommand({id:"editor.action.inlineSuggest.hide",precondition:GhostTextController.inlineSuggestionVisible,kbOpts:{weight:100,primary:9/* Escape */},handler(x){x.hide()}}));class ShowNextInlineSuggestionAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:ShowNextInlineSuggestionAction.ID,label:nls/* localize */.N("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,GhostTextController.inlineSuggestionVisible),kbOpts:{weight:100,primary:601/* BracketRight */}})}run(accessor,editor){return ghostTextController_awaiter(this,void 0,void 0,(function*(){const controller=GhostTextController.get(editor);controller&&(controller.showNextInlineCompletion(),editor.focus())}))}}ShowNextInlineSuggestionAction.ID="editor.action.inlineSuggest.showNext";class ShowPreviousInlineSuggestionAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:ShowPreviousInlineSuggestionAction.ID,label:nls/* localize */.N("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,GhostTextController.inlineSuggestionVisible),kbOpts:{weight:100,primary:599/* BracketLeft */}})}run(accessor,editor){return ghostTextController_awaiter(this,void 0,void 0,(function*(){const controller=GhostTextController.get(editor);controller&&(controller.showPreviousInlineCompletion(),editor.focus())}))}}ShowPreviousInlineSuggestionAction.ID="editor.action.inlineSuggest.showPrevious";class TriggerInlineSuggestionAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:nls/* localize */.N("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}run(accessor,editor){return ghostTextController_awaiter(this,void 0,void 0,(function*(){const controller=GhostTextController.get(editor);controller&&controller.trigger()}))}}(0,editorExtensions/* registerEditorContribution */._K)(GhostTextController.ID,GhostTextController),(0,editorExtensions/* registerEditorAction */.Qr)(TriggerInlineSuggestionAction),(0,editorExtensions/* registerEditorAction */.Qr)(ShowNextInlineSuggestionAction),(0,editorExtensions/* registerEditorAction */.Qr)(ShowPreviousInlineSuggestionAction);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/accessibility/common/accessibility.js
var accessibility=__webpack_require__(331106),inlineCompletionsHoverParticipant_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},inlineCompletionsHoverParticipant_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};class InlineCompletionsHover{constructor(owner,range,controller){this.owner=owner,this.range=range,this.controller=controller}isValidForHoverAnchor(anchor){return 1/* Range */===anchor.type&&this.range.startColumn<=anchor.range.startColumn&&this.range.endColumn>=anchor.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let InlineCompletionsHoverParticipant=class{constructor(_editor,_hover,_commandService,_menuService,_contextKeyService,_modeService,_openerService,accessibilityService){this._editor=_editor,this._hover=_hover,this._commandService=_commandService,this._menuService=_menuService,this._contextKeyService=_contextKeyService,this._modeService=_modeService,this._openerService=_openerService,this.accessibilityService=accessibilityService}suggestHoverAnchor(mouseEvent){const controller=GhostTextController.get(this._editor);if(!controller)return null;if(8/* CONTENT_VIEW_ZONE */===mouseEvent.target.type){
// handle the case where the mouse is over the view zone
const viewZoneData=mouseEvent.target.detail;if(controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId))return new HoverForeignElementAnchor(1e3,this,core_range/* Range */.e.fromPositions(viewZoneData.positionBefore||viewZoneData.position,viewZoneData.positionBefore||viewZoneData.position))}if(7/* CONTENT_EMPTY */===mouseEvent.target.type&&mouseEvent.target.range&&controller.shouldShowHoverAt(mouseEvent.target.range))return new HoverForeignElementAnchor(1e3,this,mouseEvent.target.range);if(6/* CONTENT_TEXT */===mouseEvent.target.type&&mouseEvent.target.range&&mouseEvent.target.detail){
// handle the case where the mouse is directly over ghost text
const mightBeForeignElement=mouseEvent.target.detail.mightBeForeignElement;if(mightBeForeignElement&&controller.shouldShowHoverAt(mouseEvent.target.range))return new HoverForeignElementAnchor(1e3,this,mouseEvent.target.range)}return null}computeSync(anchor,lineDecorations){const controller=GhostTextController.get(this._editor);return controller&&controller.shouldShowHoverAt(anchor.range)?[new InlineCompletionsHover(this,anchor.range,controller)]:[]}renderHoverParts(hoverParts,fragment,statusBar){const disposableStore=new lifecycle/* DisposableStore */.SL,part=hoverParts[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(part,fragment,disposableStore);const menu=disposableStore.add(this._menuService.createMenu(common_actions/* MenuId */.eH.InlineCompletionsActions,this._contextKeyService)),previousAction=statusBar.addAction({label:nls/* localize */.N("showNextInlineSuggestion","Next"),commandId:ShowNextInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand(ShowNextInlineSuggestionAction.ID)}),nextAction=statusBar.addAction({label:nls/* localize */.N("showPreviousInlineSuggestion","Previous"),commandId:ShowPreviousInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand(ShowPreviousInlineSuggestionAction.ID)});statusBar.addAction({label:nls/* localize */.N("acceptInlineSuggestion","Accept"),commandId:commitInlineSuggestionAction.id,run:()=>this._commandService.executeCommand(commitInlineSuggestionAction.id)});const actions=[previousAction,nextAction];for(const action of actions)action.setEnabled(!1);part.hasMultipleSuggestions().then((hasMore=>{for(const action of actions)action.setEnabled(hasMore)}));for(const[_,group]of menu.getActions())for(const action of group)action instanceof common_actions/* MenuItemAction */.U8&&statusBar.addAction({label:action.label,commandId:action.item.id,run:()=>this._commandService.executeCommand(action.item.id)});return disposableStore}renderScreenReaderText(part,fragment,disposableStore){var _a,_b;const $=dom.$,markdownHoverElement=$("div.hover-row.markdown-hover"),hoverContentsElement=dom/* append */.R3(markdownHoverElement,$("div.hover-contents")),renderer=disposableStore.add(new markdownRenderer/* MarkdownRenderer */.$({editor:this._editor},this._modeService,this._openerService)),render=code=>{disposableStore.add(renderer.onDidRenderAsync((()=>{hoverContentsElement.className="hover-contents code-hover-contents",this._hover.onContentsChanged()})));const inlineSuggestionAvailable=nls/* localize */.N("inlineSuggestionFollows","Suggestion:"),renderedContents=disposableStore.add(renderer.render((new htmlContent/* MarkdownString */.W5).appendText(inlineSuggestionAvailable).appendCodeblock("text",code)));hoverContentsElement.replaceChildren(renderedContents.element)},ghostText=null===(_b=null===(_a=part.controller.activeModel)||void 0===_a?void 0:_a.inlineCompletionsModel)||void 0===_b?void 0:_b.ghostText;if(ghostText){const lineText=this._editor.getModel().getLineContent(ghostText.lineNumber);render(ghostText.renderForScreenReader(lineText))}fragment.appendChild(markdownHoverElement)}};InlineCompletionsHoverParticipant=inlineCompletionsHoverParticipant_decorate([inlineCompletionsHoverParticipant_param(2,commands/* ICommandService */.H),inlineCompletionsHoverParticipant_param(3,common_actions/* IMenuService */.co),inlineCompletionsHoverParticipant_param(4,contextkey/* IContextKeyService */.i6),inlineCompletionsHoverParticipant_param(5,modeService/* IModeService */.h),inlineCompletionsHoverParticipant_param(6,common_opener/* IOpenerService */.v4),inlineCompletionsHoverParticipant_param(7,accessibility/* IAccessibilityService */.F)],InlineCompletionsHoverParticipant);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesContentHover.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var modesContentHover_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},modesContentHover_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},modesContentHover_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const modesContentHover_$=dom.$;let EditorHoverStatusBar=class extends lifecycle/* Disposable */.JT{constructor(_keybindingService){super(),this._keybindingService=_keybindingService,this._hasContent=!1,this.hoverElement=modesContentHover_$("div.hover-row.status-bar"),this.actionsElement=dom/* append */.R3(this.hoverElement,modesContentHover_$("div.actions"))}get hasContent(){return this._hasContent}addAction(actionOptions){const keybinding=this._keybindingService.lookupKeybinding(actionOptions.commandId),keybindingLabel=keybinding?keybinding.getLabel():null;return this._hasContent=!0,this._register(hoverWidget/* HoverAction */.S.render(this.actionsElement,actionOptions,keybindingLabel))}append(element){const result=dom/* append */.R3(this.actionsElement,element);return this._hasContent=!0,result}};EditorHoverStatusBar=modesContentHover_decorate([modesContentHover_param(0,keybinding/* IKeybindingService */.d)],EditorHoverStatusBar);class ModesContentComputer{constructor(editor,_participants){this._participants=_participants,this._editor=editor,this._result=[],this._anchor=null}setAnchor(anchor){this._anchor=anchor,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(editor,anchor){if(1/* Range */!==anchor.type)return[];const model=editor.getModel(),lineNumber=anchor.range.startLineNumber,maxColumn=model.getLineMaxColumn(lineNumber);return editor.getLineDecorations(lineNumber).filter((d=>{if(d.options.isWholeLine)return!0;const startColumn=d.range.startLineNumber===lineNumber?d.range.startColumn:1,endColumn=d.range.endLineNumber===lineNumber?d.range.endColumn:maxColumn;return!(startColumn>anchor.range.startColumn||anchor.range.endColumn>endColumn)}))}computeAsync(token){return modesContentHover_awaiter(this,void 0,void 0,(function*(){const anchor=this._anchor;if(!this._editor.hasModel()||!anchor)return Promise.resolve([]);const lineDecorations=ModesContentComputer._getLineDecorations(this._editor,anchor),allResults=yield Promise.all(this._participants.map((p=>this._computeAsync(p,lineDecorations,anchor,token))));return(0,arrays/* flatten */.xH)(allResults)}))}_computeAsync(participant,lineDecorations,anchor,token){return modesContentHover_awaiter(this,void 0,void 0,(function*(){return participant.computeAsync?participant.computeAsync(anchor,lineDecorations,token):[]}))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const lineDecorations=ModesContentComputer._getLineDecorations(this._editor,this._anchor);let result=[];for(const participant of this._participants)result=result.concat(participant.computeSync(this._anchor,lineDecorations));return(0,arrays/* coalesce */.kX)(result)}onResult(result,isFromSynchronousComputation){
// Always put synchronous messages before asynchronous ones
this._result=isFromSynchronousComputation?result.concat(this._result):this._result.concat(result)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor)for(const participant of this._participants)if(participant.createLoadingMessage){const loadingMessage=participant.createLoadingMessage(this._anchor);if(loadingMessage)return this._result.slice(0).concat([loadingMessage])}return this._result.slice(0)}}let ModesContentHoverWidget=class ModesContentHoverWidget extends widget/* Widget */.${constructor(editor,_hoverVisibleKey,instantiationService,_keybindingService,_contextKeyService){super(),this._hoverVisibleKey=_hoverVisibleKey,this._keybindingService=_keybindingService,this._contextKeyService=_contextKeyService,
// IContentWidget.allowEditorOverflow
this.allowEditorOverflow=!0,this._participants=[instantiationService.createInstance(ColorHoverParticipant,editor,this),instantiationService.createInstance(MarkdownHoverParticipant,editor,this),instantiationService.createInstance(InlineCompletionsHoverParticipant,editor,this),instantiationService.createInstance(MarkerHoverParticipant,editor,this)],this._editor=editor,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new hoverWidget/* HoverWidget */.c),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9/* Escape */)&&this.hide()})),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(43/* fontInfo */)&&this._updateFont()}))),this._editor.onDidLayoutChange((()=>this.layout())),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new ModesContentComputer(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52/* hover */).above,this._hoverOperation=new HoverOperation(this._computer,(result=>this._withResult(result,!0)),null,(result=>this._withResult(result,!1)),this._editor.getOption(52/* hover */).delay),this._register(dom/* addStandardDisposableListener */.mu(this.getDomNode(),dom/* EventType */.tw.FOCUS,(()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")}))),this._register(dom/* addStandardDisposableListener */.mu(this.getDomNode(),dom/* EventType */.tw.BLUR,(()=>{this.getDomNode().classList.remove("colorpicker-hover")}))),this._register(editor.onDidChangeConfiguration((()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52/* hover */).delay),this._preferAbove=this._editor.getOption(52/* hover */).above}))),this._register(modes/* TokenizationRegistry */.RW.onDidChange((()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))})))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return ModesContentHoverWidget.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(mouseEvent){const targetType=mouseEvent.target.type;if(6/* CONTENT_TEXT */===targetType)return!0;if(7/* CONTENT_EMPTY */===targetType){const epsilon=this._editor.getOption(43/* fontInfo */).typicalHalfwidthCharacterWidth/2,data=mouseEvent.target.detail;if(data&&!data.isAfterLines&&"number"===typeof data.horizontalDistanceToText&&data.horizontalDistanceToText<epsilon)
// Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough
return!0}return!1}maybeShowAt(mouseEvent){var _a;const anchorCandidates=[];for(const participant of this._participants)if("function"===typeof participant.suggestHoverAnchor){const anchor=participant.suggestHoverAnchor(mouseEvent);anchor&&anchorCandidates.push(anchor)}if(this._shouldShowAt(mouseEvent)&&mouseEvent.target.range){
// TODO@rebornix. This should be removed if we move Color Picker out of Hover component.
// Check if mouse is hovering on color decorator
const hoverOnColorDecorator=[...(null===(_a=mouseEvent.target.element)||void 0===_a?void 0:_a.classList.values())||[]].find((className=>className.startsWith("ced-colorBox")))&&mouseEvent.target.range.endColumn-mouseEvent.target.range.startColumn===1,showAtRange=hoverOnColorDecorator?new core_range/* Range */.e(mouseEvent.target.range.startLineNumber,mouseEvent.target.range.startColumn+1,mouseEvent.target.range.endLineNumber,mouseEvent.target.range.endColumn+1):mouseEvent.target.range;anchorCandidates.push(new HoverRangeAnchor(0,showAtRange))}return 0!==anchorCandidates.length&&(anchorCandidates.sort(((a,b)=>b.priority-a.priority)),this._startShowingAt(anchorCandidates[0],0/* Delayed */,!1),!0)}_showAt(position,range,focus){
// Position has changed
this._showAtPosition=position,this._showAtRange=range,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),
// Simply force a synchronous render on the editor
// such that the widget does not really render with left = '0px'
this._editor.render(),this._stoleFocus=focus,focus&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let preferAbove=this._preferAbove;return!preferAbove&&this._contextKeyService.getContextKeyValue(suggest/* Context */._y.Visible.key)&&(
// Prefer rendering above if the suggest widget is visible
preferAbove=!0),{position:this._showAtPosition,range:this._showAtRange,preference:preferAbove?[1/* ABOVE */,2/* BELOW */]:[2/* BELOW */,1/* ABOVE */]}}return null}_updateFont(){const codeClasses=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));codeClasses.forEach((node=>this._editor.applyFontInfo(node)))}_updateContents(node){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(node),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const height=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:fontSize,lineHeight:lineHeight}=this._editor.getOption(43/* fontInfo */);this._hover.contentsDomNode.style.fontSize=`${fontSize}px`,this._hover.contentsDomNode.style.lineHeight=""+lineHeight/fontSize,this._hover.contentsDomNode.style.maxHeight=`${height}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(.66*this._editor.getLayoutInfo().width,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(
// The decorations have changed and the hover is visible,
// we need to recompute the displayed text
this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||// TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place
this._hoverOperation.start(0/* Delayed */))}startShowingAtRange(range,mode,focus){this._startShowingAt(new HoverRangeAnchor(0,range),mode,focus)}_startShowingAt(anchor,mode,focus){if(!this._lastAnchor||!this._lastAnchor.equals(anchor)){if(this._hoverOperation.cancel(),this._isVisible)
// The range might have changed, but the hover is visible
// Instead of hiding it completely, filter out messages that are still in the new range and
// kick off a new computation
if(this._showAtPosition&&this._lastAnchor&&anchor.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){const filteredMessages=this._messages.filter((m=>m.isValidForHoverAnchor(anchor)));if(0===filteredMessages.length)this.hide();else{if(filteredMessages.length===this._messages.length)
// no change
return;this._renderMessages(anchor,filteredMessages)}}else this.hide();this._lastAnchor=anchor,this._computer.setAnchor(anchor),this._shouldFocus=focus,this._hoverOperation.start(mode)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout((()=>{
// Give commands a chance to see the key
this._isVisible||this._hoverVisibleKey.set(!1)}),0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(widget){this._colorPicker=widget}onContentsChanged(){this._hover.onContentsChanged()}_withResult(result,complete){this._messages=result,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):complete&&this.hide()}_renderMessages(anchor,messages){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;// TODO: TypeScript thinks this is always null
// update column from which to show
let renderColumn=1073741824/* MAX_SAFE_SMALL_INTEGER */,highlightRange=messages[0].range,forceShowAtRange=null,fragment=document.createDocumentFragment();const disposables=new lifecycle/* DisposableStore */.SL,hoverParts=new Map;for(const msg of messages){renderColumn=Math.min(renderColumn,msg.range.startColumn),highlightRange=core_range/* Range */.e.plusRange(highlightRange,msg.range),msg.forceShowAtRange&&(forceShowAtRange=msg.range),hoverParts.has(msg.owner)||hoverParts.set(msg.owner,[]);const dest=hoverParts.get(msg.owner);dest.push(msg)}const statusBar=disposables.add(new EditorHoverStatusBar(this._keybindingService));for(const[participant,participantHoverParts]of hoverParts)disposables.add(participant.renderHoverParts(participantHoverParts,fragment,statusBar));statusBar.hasContent&&fragment.appendChild(statusBar.hoverElement),this._renderDisposable=disposables,
// show
fragment.hasChildNodes()&&(forceShowAtRange?this._showAt(forceShowAtRange.getStartPosition(),forceShowAtRange,this._shouldFocus):this._showAt(new core_position/* Position */.L(anchor.range.startLineNumber,renderColumn),highlightRange,this._shouldFocus),this._updateContents(fragment)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,highlightRange?[{range:highlightRange,options:ModesContentHoverWidget._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};ModesContentHoverWidget.ID="editor.contrib.modesContentHoverWidget",ModesContentHoverWidget._DECORATION_OPTIONS=textModel/* ModelDecorationOptions */.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),ModesContentHoverWidget=modesContentHover_decorate([modesContentHover_param(2,instantiation/* IInstantiationService */.TG),modesContentHover_param(3,keybinding/* IKeybindingService */.d),modesContentHover_param(4,contextkey/* IContextKeyService */.i6)],ModesContentHoverWidget);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesGlyphHover.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const modesGlyphHover_$=dom.$;class MarginComputer{constructor(editor){this._editor=editor,this._lineNumber=-1,this._result=[]}setLineNumber(lineNumber){this._lineNumber=lineNumber,this._result=[]}clearResult(){this._result=[]}computeSync(){const toHoverMessage=contents=>({value:contents}),lineDecorations=this._editor.getLineDecorations(this._lineNumber),result=[];if(!lineDecorations)return result;for(const d of lineDecorations){if(!d.options.glyphMarginClassName)continue;const hoverMessage=d.options.glyphMarginHoverMessage;hoverMessage&&!(0,htmlContent/* isEmptyMarkdownString */.CP)(hoverMessage)&&result.push(...(0,arrays/* asArray */._2)(hoverMessage).map(toHoverMessage))}return result}onResult(result,isFromSynchronousComputation){this._result=this._result.concat(result)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class ModesGlyphHoverWidget extends widget/* Widget */.${constructor(editor,modeService,openerService=common_opener/* NullOpenerService */.SW){super(),this._renderDisposeables=this._register(new lifecycle/* DisposableStore */.SL),this._editor=editor,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new hoverWidget/* HoverWidget */.c),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new markdownRenderer/* MarkdownRenderer */.$({editor:this._editor},modeService,openerService)),this._computer=new MarginComputer(this._editor),this._hoverOperation=new HoverOperation(this._computer,(result=>this._withResult(result)),void 0,(result=>this._withResult(result)),300),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(43/* fontInfo */)&&this._updateFont()}))),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return ModesGlyphHoverWidget.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(lineNumber){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const editorLayout=this._editor.getLayoutInfo(),topForLineNumber=this._editor.getTopForLineNumber(lineNumber),editorScrollTop=this._editor.getScrollTop(),lineHeight=this._editor.getOption(58/* lineHeight */),nodeHeight=this._hover.containerDomNode.clientHeight,top=topForLineNumber-editorScrollTop-(nodeHeight-lineHeight)/2;this._hover.containerDomNode.style.left=`${editorLayout.glyphMarginLeft+editorLayout.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(top),0)}px`}_updateFont(){const codeClasses=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));codeClasses.forEach((node=>this._editor.applyFontInfo(node)))}_updateContents(node){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(node),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(
// The decorations have changed and the hover is visible,
// we need to recompute the displayed text
this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0/* Delayed */))}startShowingAt(lineNumber){this._lastLineNumber!==lineNumber&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=lineNumber,this._computer.setLineNumber(lineNumber),this._hoverOperation.start(0/* Delayed */))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(result){this._messages=result,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(lineNumber,messages){this._renderDisposeables.clear();const fragment=document.createDocumentFragment();for(const msg of messages){const markdownHoverElement=modesGlyphHover_$("div.hover-row.markdown-hover"),hoverContentsElement=dom/* append */.R3(markdownHoverElement,modesGlyphHover_$("div.hover-contents")),renderedContents=this._renderDisposeables.add(this._markdownRenderer.render(msg.value));hoverContentsElement.appendChild(renderedContents.element),fragment.appendChild(markdownHoverElement)}this._updateContents(fragment),this._showAt(lineNumber)}}ModesGlyphHoverWidget.ID="editor.contrib.modesGlyphHoverWidget";// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hover.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var hover_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},hover_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let ModesHoverController=class ModesHoverController{constructor(_editor,_instantiationService,_openerService,_modeService,_contextKeyService){this._editor=_editor,this._instantiationService=_instantiationService,this._openerService=_openerService,this._modeService=_modeService,this._toUnhook=new lifecycle/* DisposableStore */.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((e=>{e.hasChanged(52/* hover */)&&(this._unhookEvents(),this._hookEvents())})),this._hoverVisibleKey=editorContextKeys/* EditorContextKeys */.u.hoverVisible.bindTo(_contextKeyService)}static get(editor){return editor.getContribution(ModesHoverController.ID)}_hookEvents(){const hideWidgetsEventHandler=()=>this._hideWidgets(),hoverOpts=this._editor.getOption(52/* hover */);this._isHoverEnabled=hoverOpts.enabled,this._isHoverSticky=hoverOpts.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._toUnhook.add(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e)))),this._toUnhook.add(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged())))):(this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler)),this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler)),this._toUnhook.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var _a,_b;null===(_a=this._contentWidget)||void 0===_a||_a.onModelDecorationsChanged(),null===(_b=this._glyphWidget)||void 0===_b||_b.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(mouseEvent){this._isMouseDown=!0;const targetType=mouseEvent.target.type;9/* CONTENT_WIDGET */!==targetType||mouseEvent.target.detail!==ModesContentHoverWidget.ID?12/* OVERLAY_WIDGET */===targetType&&mouseEvent.target.detail===ModesGlyphHoverWidget.ID||(12/* OVERLAY_WIDGET */!==targetType&&mouseEvent.target.detail!==ModesGlyphHoverWidget.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(mouseEvent){this._isMouseDown=!1}_onEditorMouseMove(mouseEvent){var _a,_b,_c,_d,_e;let targetType=mouseEvent.target.type;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9/* CONTENT_WIDGET */===targetType&&mouseEvent.target.detail===ModesContentHoverWidget.ID)
// mouse moved on top of content hover widget
return;if(this._isHoverSticky&&!(null===(_b=null===(_a=mouseEvent.event.browserEvent.view)||void 0===_a?void 0:_a.getSelection())||void 0===_b?void 0:_b.isCollapsed))
// selected text within content hover widget
return;if(!this._isHoverSticky&&9/* CONTENT_WIDGET */===targetType&&mouseEvent.target.detail===ModesContentHoverWidget.ID&&(null===(_c=this._contentWidget)||void 0===_c?void 0:_c.isColorPickerVisible()))
// though the hover is not sticky, the color picker needs to.
return;if(this._isHoverSticky&&12/* OVERLAY_WIDGET */===targetType&&mouseEvent.target.detail===ModesGlyphHoverWidget.ID)
// mouse moved on top of overlay hover widget
return;if(!this._isHoverEnabled)return void this._hideWidgets();const contentWidget=this._getOrCreateContentWidget();if(!contentWidget.maybeShowAt(mouseEvent))return 2/* GUTTER_GLYPH_MARGIN */===targetType&&mouseEvent.target.position?(null===(_e=this._contentWidget)||void 0===_e||_e.hide(),this._glyphWidget||(this._glyphWidget=new ModesGlyphHoverWidget(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(mouseEvent.target.position.lineNumber)):void this._hideWidgets();null===(_d=this._glyphWidget)||void 0===_d||_d.hide()}_onKeyDown(e){5/* Ctrl */!==e.keyCode&&6/* Alt */!==e.keyCode&&57/* Meta */!==e.keyCode&&4/* Shift */!==e.keyCode&&
// Do not hide hover when a modifier key is pressed
this._hideWidgets()}_hideWidgets(){var _a,_b,_c;this._isMouseDown&&this._hoverClicked&&(null===(_a=this._contentWidget)||void 0===_a?void 0:_a.isColorPickerVisible())||(this._hoverClicked=!1,null===(_b=this._glyphWidget)||void 0===_b||_b.hide(),null===(_c=this._contentWidget)||void 0===_c||_c.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(ModesContentHoverWidget,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var _a;return(null===(_a=this._contentWidget)||void 0===_a?void 0:_a.isColorPickerVisible())||!1}showContentHover(range,mode,focus){this._getOrCreateContentWidget().startShowingAtRange(range,mode,focus)}dispose(){var _a,_b;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(_a=this._glyphWidget)||void 0===_a||_a.dispose(),null===(_b=this._contentWidget)||void 0===_b||_b.dispose()}};ModesHoverController.ID="editor.contrib.hover",ModesHoverController=hover_decorate([hover_param(1,instantiation/* IInstantiationService */.TG),hover_param(2,common_opener/* IOpenerService */.v4),hover_param(3,modeService/* IModeService */.h),hover_param(4,contextkey/* IContextKeyService */.i6)],ModesHoverController);class ShowHoverAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.showHover",label:nls/* localize */.N({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2087/* KeyI */),weight:100/* EditorContrib */}})}run(accessor,editor){if(!editor.hasModel())return;let controller=ModesHoverController.get(editor);if(!controller)return;const position=editor.getPosition(),range=new core_range/* Range */.e(position.lineNumber,position.column,position.lineNumber,position.column),focus=2/* Enabled */===editor.getOption(2/* accessibilitySupport */);controller.showContentHover(range,1/* Immediate */,focus)}}class ShowDefinitionPreviewHoverAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:nls/* localize */.N({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(accessor,editor){let controller=ModesHoverController.get(editor);if(!controller)return;const position=editor.getPosition();if(!position)return;const range=new core_range/* Range */.e(position.lineNumber,position.column,position.lineNumber,position.column),goto=GotoDefinitionAtPositionEditorContribution.get(editor),promise=goto.startFindDefinitionFromCursor(position);promise.then((()=>{controller.showContentHover(range,1/* Immediate */,!0)}))}}(0,editorExtensions/* registerEditorContribution */._K)(ModesHoverController.ID,ModesHoverController),(0,editorExtensions/* registerEditorAction */.Qr)(ShowHoverAction),(0,editorExtensions/* registerEditorAction */.Qr)(ShowDefinitionPreviewHoverAction),
// theming
(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const editorHoverHighlightColor=theme.getColor(colorRegistry/* editorHoverHighlight */.pt);editorHoverHighlightColor&&collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);const hoverBackground=theme.getColor(colorRegistry/* editorHoverBackground */.yJ);hoverBackground&&collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);const hoverBorder=theme.getColor(colorRegistry/* editorHoverBorder */.CN);hoverBorder&&(collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`),collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(.5)}; }`),collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(.5)}; }`),collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(.5)}; }`));const link=theme.getColor(colorRegistry/* textLinkForeground */.ur);link&&collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);const linkHover=theme.getColor(colorRegistry/* textLinkActiveForeground */.sg);linkHover&&collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);const hoverForeground=theme.getColor(colorRegistry/* editorHoverForeground */.Sb);hoverForeground&&collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);const actionsBackground=theme.getColor(colorRegistry/* editorHoverStatusBarBackground */.Lo);actionsBackground&&collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);const codeBackground=theme.getColor(colorRegistry/* textCodeBlockBackground */.Sw);codeBackground&&collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorContributions.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
// import color detector contribution
class ColorContribution extends lifecycle/* Disposable */.JT{constructor(_editor){super(),this._editor=_editor,this._register(_editor.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(mouseEvent){var _a;const targetType=mouseEvent.target.type;if(6/* CONTENT_TEXT */!==targetType)return;const hoverOnColorDecorator=[...(null===(_a=mouseEvent.target.element)||void 0===_a?void 0:_a.classList.values())||[]].find((className=>className.startsWith("ced-colorBox")));if(!hoverOnColorDecorator)return;if(!mouseEvent.target.range)return;const hoverController=this._editor.getContribution(ModesHoverController.ID);if(!hoverController.isColorPickerVisible()){const range=new core_range/* Range */.e(mouseEvent.target.range.startLineNumber,mouseEvent.target.range.startColumn+1,mouseEvent.target.range.endLineNumber,mouseEvent.target.range.endColumn+1);hoverController.showContentHover(range,0/* Delayed */,!1)}}}ColorContribution.ID="editor.contrib.colorContribution",// ms
(0,editorExtensions/* registerEditorContribution */._K)(ColorContribution.ID,ColorContribution);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/comment/blockCommentCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class BlockCommentCommand{constructor(selection,insertSpace){this._selection=selection,this._insertSpace=insertSpace,this._usedEndToken=null}static _haystackHasNeedleAtOffset(haystack,needle,offset){if(offset<0)return!1;const needleLength=needle.length,haystackLength=haystack.length;if(offset+needleLength>haystackLength)return!1;for(let i=0;i<needleLength;i++){const codeA=haystack.charCodeAt(offset+i),codeB=needle.charCodeAt(i);if(codeA!==codeB&&(!(codeA>=65/* A */&&codeA<=90/* Z */&&codeA+32===codeB)&&!(codeB>=65/* A */&&codeB<=90/* Z */&&codeB+32===codeA)))return!1}return!0}_createOperationsForBlockComment(selection,startToken,endToken,insertSpace,model,builder){const startLineNumber=selection.startLineNumber,startColumn=selection.startColumn,endLineNumber=selection.endLineNumber,endColumn=selection.endColumn,startLineText=model.getLineContent(startLineNumber),endLineText=model.getLineContent(endLineNumber);let ops,startTokenIndex=startLineText.lastIndexOf(startToken,startColumn-1+startToken.length),endTokenIndex=endLineText.indexOf(endToken,endColumn-1-endToken.length);if(-1!==startTokenIndex&&-1!==endTokenIndex)if(startLineNumber===endLineNumber){const lineBetweenTokens=startLineText.substring(startTokenIndex+startToken.length,endTokenIndex);lineBetweenTokens.indexOf(endToken)>=0&&(
// force to add a block comment
startTokenIndex=-1,endTokenIndex=-1)}else{const startLineAfterStartToken=startLineText.substring(startTokenIndex+startToken.length),endLineBeforeEndToken=endLineText.substring(0,endTokenIndex);(startLineAfterStartToken.indexOf(endToken)>=0||endLineBeforeEndToken.indexOf(endToken)>=0)&&(
// force to add a block comment
startTokenIndex=-1,endTokenIndex=-1)}-1!==startTokenIndex&&-1!==endTokenIndex?(
// Consider spaces as part of the comment tokens
insertSpace&&startTokenIndex+startToken.length<startLineText.length&&32/* Space */===startLineText.charCodeAt(startTokenIndex+startToken.length)&&(
// Pretend the start token contains a trailing space
startToken+=" "),insertSpace&&endTokenIndex>0&&32/* Space */===endLineText.charCodeAt(endTokenIndex-1)&&(
// Pretend the end token contains a leading space
endToken=" "+endToken,endTokenIndex-=1),ops=BlockCommentCommand._createRemoveBlockCommentOperations(new core_range/* Range */.e(startLineNumber,startTokenIndex+startToken.length+1,endLineNumber,endTokenIndex+1),startToken,endToken)):(ops=BlockCommentCommand._createAddBlockCommentOperations(selection,startToken,endToken,this._insertSpace),this._usedEndToken=1===ops.length?endToken:null);for(const op of ops)builder.addTrackedEditOperation(op.range,op.text)}static _createRemoveBlockCommentOperations(r,startToken,endToken){let res=[];return core_range/* Range */.e.isEmpty(r)?
// Remove both continuously
res.push(editOperation/* EditOperation */.h.delete(new core_range/* Range */.e(r.startLineNumber,r.startColumn-startToken.length,r.endLineNumber,r.endColumn+endToken.length))):(
// Remove block comment start
res.push(editOperation/* EditOperation */.h.delete(new core_range/* Range */.e(r.startLineNumber,r.startColumn-startToken.length,r.startLineNumber,r.startColumn))),
// Remove block comment end
res.push(editOperation/* EditOperation */.h.delete(new core_range/* Range */.e(r.endLineNumber,r.endColumn,r.endLineNumber,r.endColumn+endToken.length)))),res}static _createAddBlockCommentOperations(r,startToken,endToken,insertSpace){let res=[];return core_range/* Range */.e.isEmpty(r)?
// Insert both continuously
res.push(editOperation/* EditOperation */.h.replace(new core_range/* Range */.e(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn),startToken+"  "+endToken)):(
// Insert block comment start
res.push(editOperation/* EditOperation */.h.insert(new core_position/* Position */.L(r.startLineNumber,r.startColumn),startToken+(insertSpace?" ":""))),
// Insert block comment end
res.push(editOperation/* EditOperation */.h.insert(new core_position/* Position */.L(r.endLineNumber,r.endColumn),(insertSpace?" ":"")+endToken))),res}getEditOperations(model,builder){const startLineNumber=this._selection.startLineNumber,startColumn=this._selection.startColumn;model.tokenizeIfCheap(startLineNumber);const languageId=model.getLanguageIdAtPosition(startLineNumber,startColumn),config=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getComments(languageId);config&&config.blockCommentStartToken&&config.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,config.blockCommentStartToken,config.blockCommentEndToken,this._insertSpace,model,builder)}computeCursorState(model,helper){const inverseEditOperations=helper.getInverseEditOperations();if(2===inverseEditOperations.length){const startTokenEditOperation=inverseEditOperations[0],endTokenEditOperation=inverseEditOperations[1];return new core_selection/* Selection */.Y(startTokenEditOperation.range.endLineNumber,startTokenEditOperation.range.endColumn,endTokenEditOperation.range.startLineNumber,endTokenEditOperation.range.startColumn)}{const srcRange=inverseEditOperations[0].range,deltaColumn=this._usedEndToken?-this._usedEndToken.length-1:0;// minus 1 space before endToken
return new core_selection/* Selection */.Y(srcRange.endLineNumber,srcRange.endColumn+deltaColumn,srcRange.endLineNumber,srcRange.endColumn+deltaColumn)}}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/comment/lineCommentCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class LineCommentCommand{constructor(selection,tabSize,type,insertSpace,ignoreEmptyLines,ignoreFirstLine){this._selection=selection,this._tabSize=tabSize,this._type=type,this._insertSpace=insertSpace,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=ignoreEmptyLines,this._ignoreFirstLine=ignoreFirstLine||!1}
/**
     * Do an initial pass over the lines and gather info about the line comment string.
     * Returns null if any of the lines doesn't support a line comment string.
     */static _gatherPreflightCommentStrings(model,startLineNumber,endLineNumber){model.tokenizeIfCheap(startLineNumber);const languageId=model.getLanguageIdAtPosition(startLineNumber,1),config=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getComments(languageId),commentStr=config?config.lineCommentToken:null;if(!commentStr)
// Mode does not support line comments
return null;let lines=[];for(let i=0,lineCount=endLineNumber-startLineNumber+1;i<lineCount;i++)lines[i]={ignore:!1,commentStr:commentStr,commentStrOffset:0,commentStrLength:commentStr.length};return lines}
/**
     * Analyze lines and decide which lines are relevant and what the toggle should do.
     * Also, build up several offsets and lengths useful in the generation of editor operations.
     */static _analyzeLines(type,insertSpace,model,lines,startLineNumber,ignoreEmptyLines,ignoreFirstLine){let shouldRemoveComments,onlyWhitespaceLines=!0;shouldRemoveComments=0/* Toggle */===type||1/* ForceAdd */!==type;for(let i=0,lineCount=lines.length;i<lineCount;i++){const lineData=lines[i],lineNumber=startLineNumber+i;if(lineNumber===startLineNumber&&ignoreFirstLine){
// first line ignored
lineData.ignore=!0;continue}const lineContent=model.getLineContent(lineNumber),lineContentStartOffset=strings/* firstNonWhitespaceIndex */.LC(lineContent);if(-1!==lineContentStartOffset){if(onlyWhitespaceLines=!1,lineData.ignore=!1,lineData.commentStrOffset=lineContentStartOffset,shouldRemoveComments&&!BlockCommentCommand._haystackHasNeedleAtOffset(lineContent,lineData.commentStr,lineContentStartOffset)&&(0/* Toggle */===type?
// Every line so far has been a line comment, but this one is not
shouldRemoveComments=!1:1/* ForceAdd */===type||(lineData.ignore=!0)),shouldRemoveComments&&insertSpace){
// Remove a following space if present
const commentStrEndOffset=lineContentStartOffset+lineData.commentStrLength;commentStrEndOffset<lineContent.length&&32/* Space */===lineContent.charCodeAt(commentStrEndOffset)&&(lineData.commentStrLength+=1)}}else
// Empty or whitespace only line
lineData.ignore=ignoreEmptyLines,lineData.commentStrOffset=lineContent.length}if(0/* Toggle */===type&&onlyWhitespaceLines){
// For only whitespace lines, we insert comments
shouldRemoveComments=!1;
// Also, no longer ignore them
for(let i=0,lineCount=lines.length;i<lineCount;i++)lines[i].ignore=!1}return{supported:!0,shouldRemoveComments:shouldRemoveComments,lines:lines}}
/**
     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments
     */static _gatherPreflightData(type,insertSpace,model,startLineNumber,endLineNumber,ignoreEmptyLines,ignoreFirstLine){const lines=LineCommentCommand._gatherPreflightCommentStrings(model,startLineNumber,endLineNumber);return null===lines?{supported:!1}:LineCommentCommand._analyzeLines(type,insertSpace,model,lines,startLineNumber,ignoreEmptyLines,ignoreFirstLine)}
/**
     * Given a successful analysis, execute either insert line comments, either remove line comments
     */_executeLineComments(model,builder,data,s){let ops;data.shouldRemoveComments?ops=LineCommentCommand._createRemoveLineCommentsOperations(data.lines,s.startLineNumber):(LineCommentCommand._normalizeInsertionPoint(model,data.lines,s.startLineNumber,this._tabSize),ops=this._createAddLineCommentsOperations(data.lines,s.startLineNumber));const cursorPosition=new core_position/* Position */.L(s.positionLineNumber,s.positionColumn);for(let i=0,len=ops.length;i<len;i++)if(builder.addEditOperation(ops[i].range,ops[i].text),core_range/* Range */.e.isEmpty(ops[i].range)&&core_range/* Range */.e.getStartPosition(ops[i].range).equals(cursorPosition)){const lineContent=model.getLineContent(cursorPosition.lineNumber);lineContent.length+1===cursorPosition.column&&(this._deltaColumn=(ops[i].text||"").length)}this._selectionId=builder.trackSelection(s)}_attemptRemoveBlockComment(model,s,startToken,endToken){let startLineNumber=s.startLineNumber,endLineNumber=s.endLineNumber,startTokenAllowedBeforeColumn=endToken.length+Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber),s.startColumn),startTokenIndex=model.getLineContent(startLineNumber).lastIndexOf(startToken,startTokenAllowedBeforeColumn-1),endTokenIndex=model.getLineContent(endLineNumber).indexOf(endToken,s.endColumn-1-startToken.length);return-1!==startTokenIndex&&-1===endTokenIndex&&(endTokenIndex=model.getLineContent(startLineNumber).indexOf(endToken,startTokenIndex+startToken.length),endLineNumber=startLineNumber),-1===startTokenIndex&&-1!==endTokenIndex&&(startTokenIndex=model.getLineContent(endLineNumber).lastIndexOf(startToken,endTokenIndex),startLineNumber=endLineNumber),!s.isEmpty()||-1!==startTokenIndex&&-1!==endTokenIndex||(startTokenIndex=model.getLineContent(startLineNumber).indexOf(startToken),-1!==startTokenIndex&&(endTokenIndex=model.getLineContent(startLineNumber).indexOf(endToken,startTokenIndex+startToken.length))),
// We have to adjust to possible inner white space.
// For Space after startToken, add Space to startToken - range math will work out.
-1!==startTokenIndex&&32/* Space */===model.getLineContent(startLineNumber).charCodeAt(startTokenIndex+startToken.length)&&(startToken+=" "),
// For Space before endToken, add Space before endToken and shift index one left.
-1!==endTokenIndex&&32/* Space */===model.getLineContent(endLineNumber).charCodeAt(endTokenIndex-1)&&(endToken=" "+endToken,endTokenIndex-=1),-1!==startTokenIndex&&-1!==endTokenIndex?BlockCommentCommand._createRemoveBlockCommentOperations(new core_range/* Range */.e(startLineNumber,startTokenIndex+startToken.length+1,endLineNumber,endTokenIndex+1),startToken,endToken):null}
/**
     * Given an unsuccessful analysis, delegate to the block comment command
     */_executeBlockComment(model,builder,s){model.tokenizeIfCheap(s.startLineNumber);let languageId=model.getLanguageIdAtPosition(s.startLineNumber,1),config=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getComments(languageId);if(!config||!config.blockCommentStartToken||!config.blockCommentEndToken)
// Mode does not support block comments
return;const startToken=config.blockCommentStartToken,endToken=config.blockCommentEndToken;let ops=this._attemptRemoveBlockComment(model,s,startToken,endToken);if(!ops){if(s.isEmpty()){const lineContent=model.getLineContent(s.startLineNumber);let firstNonWhitespaceIndex=strings/* firstNonWhitespaceIndex */.LC(lineContent);-1===firstNonWhitespaceIndex&&(
// Line is empty or contains only whitespace
firstNonWhitespaceIndex=lineContent.length),ops=BlockCommentCommand._createAddBlockCommentOperations(new core_range/* Range */.e(s.startLineNumber,firstNonWhitespaceIndex+1,s.startLineNumber,lineContent.length+1),startToken,endToken,this._insertSpace)}else ops=BlockCommentCommand._createAddBlockCommentOperations(new core_range/* Range */.e(s.startLineNumber,model.getLineFirstNonWhitespaceColumn(s.startLineNumber),s.endLineNumber,model.getLineMaxColumn(s.endLineNumber)),startToken,endToken,this._insertSpace);1===ops.length&&(
// Leave cursor after token and Space
this._deltaColumn=startToken.length+1)}this._selectionId=builder.trackSelection(s);for(const op of ops)builder.addEditOperation(op.range,op.text)}getEditOperations(model,builder){let s=this._selection;if(this._moveEndPositionDown=!1,s.startLineNumber===s.endLineNumber&&this._ignoreFirstLine)return builder.addEditOperation(new core_range/* Range */.e(s.startLineNumber,model.getLineMaxColumn(s.startLineNumber),s.startLineNumber+1,1),s.startLineNumber===model.getLineCount()?"":"\n"),void(this._selectionId=builder.trackSelection(s));s.startLineNumber<s.endLineNumber&&1===s.endColumn&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,model.getLineMaxColumn(s.endLineNumber-1)));const data=LineCommentCommand._gatherPreflightData(this._type,this._insertSpace,model,s.startLineNumber,s.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return data.supported?this._executeLineComments(model,builder,data,s):this._executeBlockComment(model,builder,s)}computeCursorState(model,helper){let result=helper.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(result=result.setEndPosition(result.endLineNumber+1,1)),new core_selection/* Selection */.Y(result.selectionStartLineNumber,result.selectionStartColumn+this._deltaColumn,result.positionLineNumber,result.positionColumn+this._deltaColumn)}
/**
     * Generate edit operations in the remove line comment case
     */static _createRemoveLineCommentsOperations(lines,startLineNumber){let res=[];for(let i=0,len=lines.length;i<len;i++){const lineData=lines[i];lineData.ignore||res.push(editOperation/* EditOperation */.h.delete(new core_range/* Range */.e(startLineNumber+i,lineData.commentStrOffset+1,startLineNumber+i,lineData.commentStrOffset+lineData.commentStrLength+1)))}return res}
/**
     * Generate edit operations in the add line comment case
     */_createAddLineCommentsOperations(lines,startLineNumber){let res=[];const afterCommentStr=this._insertSpace?" ":"";for(let i=0,len=lines.length;i<len;i++){const lineData=lines[i];lineData.ignore||res.push(editOperation/* EditOperation */.h.insert(new core_position/* Position */.L(startLineNumber+i,lineData.commentStrOffset+1),lineData.commentStr+afterCommentStr))}return res}static nextVisibleColumn(currentVisibleColumn,tabSize,isTab,columnSize){return isTab?currentVisibleColumn+(tabSize-currentVisibleColumn%tabSize):currentVisibleColumn+columnSize}
/**
     * Adjust insertion points to have them vertically aligned in the add line comment case
     */static _normalizeInsertionPoint(model,lines,startLineNumber,tabSize){let j,lenJ,minVisibleColumn=1073741824/* MAX_SAFE_SMALL_INTEGER */;for(let i=0,len=lines.length;i<len;i++){if(lines[i].ignore)continue;const lineContent=model.getLineContent(startLineNumber+i);let currentVisibleColumn=0;for(let j=0,lenJ=lines[i].commentStrOffset;currentVisibleColumn<minVisibleColumn&&j<lenJ;j++)currentVisibleColumn=LineCommentCommand.nextVisibleColumn(currentVisibleColumn,tabSize,9/* Tab */===lineContent.charCodeAt(j),1);currentVisibleColumn<minVisibleColumn&&(minVisibleColumn=currentVisibleColumn)}minVisibleColumn=Math.floor(minVisibleColumn/tabSize)*tabSize;for(let i=0,len=lines.length;i<len;i++){if(lines[i].ignore)continue;const lineContent=model.getLineContent(startLineNumber+i);let currentVisibleColumn=0;for(j=0,lenJ=lines[i].commentStrOffset;currentVisibleColumn<minVisibleColumn&&j<lenJ;j++)currentVisibleColumn=LineCommentCommand.nextVisibleColumn(currentVisibleColumn,tabSize,9/* Tab */===lineContent.charCodeAt(j),1);lines[i].commentStrOffset=currentVisibleColumn>minVisibleColumn?j-1:j}}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/comment/comment.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class CommentLineAction extends editorExtensions/* EditorAction */.R6{constructor(type,opts){super(opts),this._type=type}run(accessor,editor){if(!editor.hasModel())return;const model=editor.getModel(),commands=[],modelOptions=model.getOptions(),commentsOptions=editor.getOption(19/* comments */),selections=editor.getSelections().map(((selection,index)=>({selection:selection,index:index,ignoreFirstLine:!1})));selections.sort(((a,b)=>core_range/* Range */.e.compareRangesUsingStarts(a.selection,b.selection)));
// Remove selections that would result in copying the same line
let prev=selections[0];for(let i=1;i<selections.length;i++){const curr=selections[i];prev.selection.endLineNumber===curr.selection.startLineNumber&&(
// these two selections would copy the same line
prev.index<curr.index?
// prev wins
curr.ignoreFirstLine=!0:(
// curr wins
prev.ignoreFirstLine=!0,prev=curr))}for(const selection of selections)commands.push(new LineCommentCommand(selection.selection,modelOptions.tabSize,this._type,commentsOptions.insertSpace,commentsOptions.ignoreEmptyLines,selection.ignoreFirstLine));editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}class ToggleCommentLineAction extends CommentLineAction{constructor(){super(0/* Toggle */,{id:"editor.action.commentLine",label:nls/* localize */.N("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2133/* Slash */,weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarEditMenu,group:"5_insert",title:nls/* localize */.N({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class AddLineCommentAction extends CommentLineAction{constructor(){super(1/* ForceAdd */,{id:"editor.action.addCommentLine",label:nls/* localize */.N("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2081/* KeyC */),weight:100/* EditorContrib */}})}}class RemoveLineCommentAction extends CommentLineAction{constructor(){super(2/* ForceRemove */,{id:"editor.action.removeCommentLine",label:nls/* localize */.N("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2099/* KeyU */),weight:100/* EditorContrib */}})}}class BlockCommentAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.blockComment",label:nls/* localize */.N("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1567/* KeyA */,linux:{primary:3103/* KeyA */},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarEditMenu,group:"5_insert",title:nls/* localize */.N({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(accessor,editor){if(!editor.hasModel())return;const commentsOptions=editor.getOption(19/* comments */),commands=[],selections=editor.getSelections();for(const selection of selections)commands.push(new BlockCommentCommand(selection,commentsOptions.insertSpace));editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}(0,editorExtensions/* registerEditorAction */.Qr)(ToggleCommentLineAction),(0,editorExtensions/* registerEditorAction */.Qr)(AddLineCommentAction),(0,editorExtensions/* registerEditorAction */.Qr)(RemoveLineCommentAction),(0,editorExtensions/* registerEditorAction */.Qr)(BlockCommentAction);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js
var actionViewItems=__webpack_require__(76033),contextmenu_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},contextmenu_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let ContextMenuController=class ContextMenuController{constructor(editor,_contextMenuService,_contextViewService,_contextKeyService,_keybindingService,_menuService){this._contextMenuService=_contextMenuService,this._contextViewService=_contextViewService,this._contextKeyService=_contextKeyService,this._keybindingService=_keybindingService,this._menuService=_menuService,this._toDispose=new lifecycle/* DisposableStore */.SL,this._contextMenuIsBeingShownCount=0,this._editor=editor,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const view=this._contextViewService.getContextViewElement(),target=e.srcElement;
// Event triggers on shadow root host first
// Check if the context view is under this host before hiding it #103169
target.shadowRoot&&dom/* getShadowRoot */.Ay(view)===target.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{58/* ContextMenu */===e.keyCode&&(
// Chrome is funny like that
e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}static get(editor){return editor.getContribution(ContextMenuController.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20/* contextmenu */))return this._editor.focus(),void(
// Ensure the cursor is at the position of the mouse click
e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));// Context menu is turned off through configuration
if(12/* OVERLAY_WIDGET */===e.target.type)return;// allow native menu on widgets to support right click on input field for example in find
if(e.event.preventDefault(),e.event.stopPropagation(),6/* CONTENT_TEXT */!==e.target.type&&7/* CONTENT_EMPTY */!==e.target.type&&1/* TEXTAREA */!==e.target.type)return;// only support mouse click into text or native context menu key for now
// Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions
// Ensure the cursor is at the position of the mouse click
if(this._editor.focus(),e.target.position){let hasSelectionAtPosition=!1;for(const selection of this._editor.getSelections())if(selection.containsPosition(e.target.position)){hasSelectionAtPosition=!0;break}hasSelectionAtPosition||this._editor.setPosition(e.target.position)}
// Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position
let anchor=null;1/* TEXTAREA */!==e.target.type&&(anchor={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),
// Show the context menu
this.showContextMenu(anchor)}showContextMenu(anchor){if(!this._editor.getOption(20/* contextmenu */))return;// Context menu is turned off through configuration
if(!this._editor.hasModel())return;if(!this._contextMenuService)return void this._editor.focus();// We need the context menu service to function
// Find actions available for menu
const menuActions=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?common_actions/* MenuId */.eH.SimpleEditorContext:common_actions/* MenuId */.eH.EditorContext);
// Show menu if we have actions to show
menuActions.length>0&&this._doShowContextMenu(menuActions,anchor)}_getMenuActions(model,menuId){const result=[],menu=this._menuService.createMenu(menuId,this._contextKeyService),groups=menu.getActions({arg:model.uri});
// get menu groups
menu.dispose();
// translate them into other actions
for(let group of groups){const[,actions]=group;let addedItems=0;for(const action of actions)if(action instanceof common_actions/* SubmenuItemAction */.NZ){const subActions=this._getMenuActions(model,action.item.submenu);subActions.length>0&&(result.push(new base_common_actions/* SubmenuAction */.wY(action.id,action.label,subActions)),addedItems++)}else result.push(action),addedItems++;addedItems&&result.push(new base_common_actions/* Separator */.Z0)}return result.length&&result.pop(),result}_doShowContextMenu(actions,anchor=null){if(!this._editor.hasModel())return;
// Disable hover
const oldHoverSetting=this._editor.getOption(52/* hover */);if(this._editor.updateOptions({hover:{enabled:!1}}),!anchor){
// Ensure selection is visible
this._editor.revealPosition(this._editor.getPosition(),1/* Immediate */),this._editor.render();const cursorCoords=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),editorCoords=dom/* getDomNodePagePosition */.i(this._editor.getDomNode()),posx=editorCoords.left+cursorCoords.left,posy=editorCoords.top+cursorCoords.top+cursorCoords.height;
// Translate to absolute editor position
anchor={x:posx,y:posy}}const useShadowDOM=this._editor.getOption(113/* useShadowDOM */)&&!platform/* isIOS */.gn;// Do not use shadow dom on IOS #122035
// Show menu
this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:useShadowDOM?this._editor.getDomNode():void 0,getAnchor:()=>anchor,getActions:()=>actions,getActionViewItem:action=>{const keybinding=this._keybindingFor(action);if(keybinding)return new actionViewItems/* ActionViewItem */.g(action,action,{label:!0,keybinding:keybinding.getLabel(),isMenu:!0});const customActionViewItem=action;return"function"===typeof customActionViewItem.getActionViewItem?customActionViewItem.getActionViewItem():new actionViewItems/* ActionViewItem */.g(action,action,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:action=>this._keybindingFor(action),onHide:wasCancelled=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:oldHoverSetting})}})}_keybindingFor(action){return this._keybindingService.lookupKeybinding(action.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};ContextMenuController.ID="editor.contrib.contextmenu",ContextMenuController=contextmenu_decorate([contextmenu_param(1,contextView/* IContextMenuService */.i),contextmenu_param(2,contextView/* IContextViewService */.u),contextmenu_param(3,contextkey/* IContextKeyService */.i6),contextmenu_param(4,keybinding/* IKeybindingService */.d),contextmenu_param(5,common_actions/* IMenuService */.co)],ContextMenuController);class ShowContextMenu extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.showContextMenu",label:nls/* localize */.N("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:1092/* F10 */,weight:100/* EditorContrib */}})}run(accessor,editor){let contribution=ContextMenuController.get(editor);contribution.showContextMenu()}}(0,editorExtensions/* registerEditorContribution */._K)(ContextMenuController.ID,ContextMenuController),(0,editorExtensions/* registerEditorAction */.Qr)(ShowContextMenu);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/cursorUndo.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class CursorState{constructor(selections){this.selections=selections}equals(other){const thisLen=this.selections.length,otherLen=other.selections.length;if(thisLen!==otherLen)return!1;for(let i=0;i<thisLen;i++)if(!this.selections[i].equalsSelection(other.selections[i]))return!1;return!0}}class StackElement{constructor(cursorState,scrollTop,scrollLeft){this.cursorState=cursorState,this.scrollTop=scrollTop,this.scrollLeft=scrollLeft}}class CursorUndoRedoController extends lifecycle/* Disposable */.JT{constructor(editor){super(),this._editor=editor,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(editor.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(editor.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(editor.onDidChangeCursorSelection((e=>{if(this._isCursorUndoRedo)return;if(!e.oldSelections)return;if(e.oldModelVersionId!==e.modelVersionId)return;const prevState=new CursorState(e.oldSelections),isEqualToLastUndoStack=this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(prevState);isEqualToLastUndoStack||(this._undoStack.push(new StackElement(prevState,editor.getScrollTop(),editor.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&
// keep the cursor undo stack bounded
this._undoStack.shift())})))}static get(editor){return editor.getContribution(CursorUndoRedoController.ID)}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(stackElement){this._isCursorUndoRedo=!0,this._editor.setSelections(stackElement.cursorState.selections),this._editor.setScrollPosition({scrollTop:stackElement.scrollTop,scrollLeft:stackElement.scrollLeft}),this._isCursorUndoRedo=!1}}CursorUndoRedoController.ID="editor.contrib.cursorUndoRedoController";class CursorUndo extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"cursorUndo",label:nls/* localize */.N("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:2099/* KeyU */,weight:100/* EditorContrib */}})}run(accessor,editor,args){CursorUndoRedoController.get(editor).cursorUndo()}}class CursorRedo extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"cursorRedo",label:nls/* localize */.N("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(accessor,editor,args){CursorUndoRedoController.get(editor).cursorRedo()}}(0,editorExtensions/* registerEditorContribution */._K)(CursorUndoRedoController.ID,CursorUndoRedoController),(0,editorExtensions/* registerEditorAction */.Qr)(CursorUndo),(0,editorExtensions/* registerEditorAction */.Qr)(CursorRedo);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/dnd/dragAndDropCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class DragAndDropCommand{constructor(selection,targetPosition,copy){this.selection=selection,this.targetPosition=targetPosition,this.copy=copy,this.targetSelection=null}getEditOperations(model,builder){let text=model.getValueInRange(this.selection);this.copy||builder.addEditOperation(this.selection,null),builder.addEditOperation(new core_range/* Range */.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),text),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new core_selection/* Selection */.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?
// Drag the selection downwards
this.targetSelection=new core_selection/* Selection */.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?
// Drag the selection upwards
this.targetSelection=new core_selection/* Selection */.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):
// The target position is at the same line as the selection's end position.
this.selection.endColumn<=this.targetPosition.column?
// The target position is after the selection's end position
this.targetSelection=new core_selection/* Selection */.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):
// The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.
this.targetSelection=new core_selection/* Selection */.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(model,helper){return this.targetSelection}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/dnd/dnd.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function hasTriggerModifier(e){return platform/* isMacintosh */.dz?e.altKey:e.ctrlKey}class DragAndDropController extends lifecycle/* Disposable */.JT{constructor(editor){super(),this._editor=editor,this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._register(this._editor.onMouseDrag((e=>this._onEditorMouseDrag(e)))),this._register(this._editor.onMouseDrop((e=>this._onEditorMouseDrop(e)))),this._register(this._editor.onMouseDropCanceled((()=>this._onEditorMouseDropCanceled()))),this._register(this._editor.onKeyDown((e=>this.onEditorKeyDown(e)))),this._register(this._editor.onKeyUp((e=>this.onEditorKeyUp(e)))),this._register(this._editor.onDidBlurEditorWidget((()=>this.onEditorBlur()))),this._register(this._editor.onDidBlurEditorText((()=>this.onEditorBlur()))),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(31/* dragAndDrop */)&&!this._editor.getOption(18/* columnSelection */)&&(hasTriggerModifier(e)&&(this._modifierPressed=!0),this._mouseDown&&hasTriggerModifier(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(31/* dragAndDrop */)&&!this._editor.getOption(18/* columnSelection */)&&(hasTriggerModifier(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===DragAndDropController.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(mouseEvent){this._mouseDown=!0}_onEditorMouseUp(mouseEvent){this._mouseDown=!1,
// Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.
this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(mouseEvent){let target=mouseEvent.target;if(null===this._dragSelection){const selections=this._editor.getSelections()||[];let possibleSelections=selections.filter((selection=>target.position&&selection.containsPosition(target.position)));if(1!==possibleSelections.length)return;this._dragSelection=possibleSelections[0]}hasTriggerModifier(mouseEvent.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),target.position&&(this._dragSelection.containsPosition(target.position)?this._removeDecoration():this.showAt(target.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(mouseEvent){if(mouseEvent.target&&(this._hitContent(mouseEvent.target)||this._hitMargin(mouseEvent.target))&&mouseEvent.target.position){let newCursorPosition=new core_position/* Position */.L(mouseEvent.target.position.lineNumber,mouseEvent.target.position.column);if(null===this._dragSelection){let newSelections=null;if(mouseEvent.event.shiftKey){let primarySelection=this._editor.getSelection();if(primarySelection){const{selectionStartLineNumber:selectionStartLineNumber,selectionStartColumn:selectionStartColumn}=primarySelection;newSelections=[new core_selection/* Selection */.Y(selectionStartLineNumber,selectionStartColumn,newCursorPosition.lineNumber,newCursorPosition.column)]}}else newSelections=(this._editor.getSelections()||[]).map((selection=>selection.containsPosition(newCursorPosition)?new core_selection/* Selection */.Y(newCursorPosition.lineNumber,newCursorPosition.column,newCursorPosition.lineNumber,newCursorPosition.column):selection));
// Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).
this._editor.setSelections(newSelections||[],"mouse",3/* Explicit */)}else(!this._dragSelection.containsPosition(newCursorPosition)||(hasTriggerModifier(mouseEvent.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(newCursorPosition)||this._dragSelection.getStartPosition().equals(newCursorPosition)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(DragAndDropController.ID,new DragAndDropCommand(this._dragSelection,newCursorPosition,hasTriggerModifier(mouseEvent.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(position){let newDecorations=[{range:new core_range/* Range */.e(position.lineNumber,position.column,position.lineNumber,position.column),options:DragAndDropController._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,newDecorations),this._editor.revealPosition(position,1/* Immediate */)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(target){return 6/* CONTENT_TEXT */===target.type||7/* CONTENT_EMPTY */===target.type}_hitMargin(target){return 2/* GUTTER_GLYPH_MARGIN */===target.type||3/* GUTTER_LINE_NUMBERS */===target.type||4/* GUTTER_LINE_DECORATIONS */===target.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}DragAndDropController.ID="editor.contrib.dragAndDrop",DragAndDropController.TRIGGER_KEY_VALUE=platform/* isMacintosh */.dz?6/* Alt */:5/* Ctrl */,DragAndDropController._DECORATION_OPTIONS=textModel/* ModelDecorationOptions */.qx.register({description:"dnd-target",className:"dnd-target"}),(0,editorExtensions/* registerEditorContribution */._K)(DragAndDropController.ID,DragAndDropController);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/model/textModelSearch.js
var textModelSearch=__webpack_require__(177277);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/find/findDecorations.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class FindDecorations{constructor(editor){this._editor=editor,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}
/** @deprecated use getFindScopes to support multiple selections */getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const scopes=this._findScopeDecorationIds.map((findScopeDecorationId=>this._editor.getModel().getDecorationRange(findScopeDecorationId))).filter((element=>!!element));if(scopes.length)return scopes}return null}getStartPosition(){return this._startPosition}setStartPosition(newStartPosition){this._startPosition=newStartPosition,this.setCurrentFindMatch(null)}_getDecorationIndex(decorationId){const index=this._decorations.indexOf(decorationId);return index>=0?index+1:1}getCurrentMatchesPosition(desiredRange){let candidates=this._editor.getModel().getDecorationsInRange(desiredRange);for(const candidate of candidates){const candidateOpts=candidate.options;if(candidateOpts===FindDecorations._FIND_MATCH_DECORATION||candidateOpts===FindDecorations._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(candidate.id)}
// We don't know the current match position, so returns zero to show '?' in find widget
return 0}setCurrentFindMatch(nextMatch){let newCurrentDecorationId=null,matchPosition=0;if(nextMatch)for(let i=0,len=this._decorations.length;i<len;i++){let range=this._editor.getModel().getDecorationRange(this._decorations[i]);if(nextMatch.equalsRange(range)){newCurrentDecorationId=this._decorations[i],matchPosition=i+1;break}}return null===this._highlightedDecorationId&&null===newCurrentDecorationId||this._editor.changeDecorations((changeAccessor=>{if(null!==this._highlightedDecorationId&&(changeAccessor.changeDecorationOptions(this._highlightedDecorationId,FindDecorations._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==newCurrentDecorationId&&(this._highlightedDecorationId=newCurrentDecorationId,changeAccessor.changeDecorationOptions(this._highlightedDecorationId,FindDecorations._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(changeAccessor.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==newCurrentDecorationId){let rng=this._editor.getModel().getDecorationRange(newCurrentDecorationId);if(rng.startLineNumber!==rng.endLineNumber&&1===rng.endColumn){let lineBeforeEnd=rng.endLineNumber-1,lineBeforeEndMaxColumn=this._editor.getModel().getLineMaxColumn(lineBeforeEnd);rng=new core_range/* Range */.e(rng.startLineNumber,rng.startColumn,lineBeforeEnd,lineBeforeEndMaxColumn)}this._rangeHighlightDecorationId=changeAccessor.addDecoration(rng,FindDecorations._RANGE_HIGHLIGHT_DECORATION)}})),matchPosition}set(findMatches,findScopes){this._editor.changeDecorations((accessor=>{let findMatchesOptions=FindDecorations._FIND_MATCH_DECORATION,newOverviewRulerApproximateDecorations=[];if(findMatches.length>1e3){
// we go into a mode where the overview ruler gets "approximate" decorations
// the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes
findMatchesOptions=FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;
// approximate a distance in lines where matches should be merged
const lineCount=this._editor.getModel().getLineCount(),height=this._editor.getLayoutInfo().height,approxPixelsPerLine=height/lineCount,mergeLinesDelta=Math.max(2,Math.ceil(3/approxPixelsPerLine));
// merge decorations as much as possible
let prevStartLineNumber=findMatches[0].range.startLineNumber,prevEndLineNumber=findMatches[0].range.endLineNumber;for(let i=1,len=findMatches.length;i<len;i++){const range=findMatches[i].range;prevEndLineNumber+mergeLinesDelta>=range.startLineNumber?range.endLineNumber>prevEndLineNumber&&(prevEndLineNumber=range.endLineNumber):(newOverviewRulerApproximateDecorations.push({range:new core_range/* Range */.e(prevStartLineNumber,1,prevEndLineNumber,1),options:FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),prevStartLineNumber=range.startLineNumber,prevEndLineNumber=range.endLineNumber)}newOverviewRulerApproximateDecorations.push({range:new core_range/* Range */.e(prevStartLineNumber,1,prevEndLineNumber,1),options:FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}
// Find matches
let newFindMatchesDecorations=new Array(findMatches.length);for(let i=0,len=findMatches.length;i<len;i++)newFindMatchesDecorations[i]={range:findMatches[i].range,options:findMatchesOptions};this._decorations=accessor.deltaDecorations(this._decorations,newFindMatchesDecorations),
// Overview ruler approximate decorations
this._overviewRulerApproximateDecorations=accessor.deltaDecorations(this._overviewRulerApproximateDecorations,newOverviewRulerApproximateDecorations),
// Range highlight
this._rangeHighlightDecorationId&&(accessor.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),
// Find scope
this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach((findScopeDecorationId=>accessor.removeDecoration(findScopeDecorationId))),this._findScopeDecorationIds=[]),(null===findScopes||void 0===findScopes?void 0:findScopes.length)&&(this._findScopeDecorationIds=findScopes.map((findScope=>accessor.addDecoration(findScope,FindDecorations._FIND_SCOPE_DECORATION))))}))}matchBeforePosition(position){if(0===this._decorations.length)return null;for(let i=this._decorations.length-1;i>=0;i--){let decorationId=this._decorations[i],r=this._editor.getModel().getDecorationRange(decorationId);if(r&&!(r.endLineNumber>position.lineNumber)){if(r.endLineNumber<position.lineNumber)return r;if(!(r.endColumn>position.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(position){if(0===this._decorations.length)return null;for(let i=0,len=this._decorations.length;i<len;i++){let decorationId=this._decorations[i],r=this._editor.getModel().getDecorationRange(decorationId);if(r&&!(r.startLineNumber<position.lineNumber)){if(r.startLineNumber>position.lineNumber)return r;if(!(r.startColumn<position.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let result=[];return result=result.concat(this._decorations),result=result.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&result.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&result.push(this._rangeHighlightDecorationId),result}}FindDecorations._CURRENT_FIND_MATCH_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"current-find-match",stickiness:1/* NeverGrowsWhenTypingAtEdges */,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* overviewRulerFindMatchForeground */.Fm),position:model/* OverviewRulerLane */.sh.Center},minimap:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* minimapFindMatch */.KT),position:model/* MinimapPosition */.F5.Inline}}),FindDecorations._FIND_MATCH_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"find-match",stickiness:1/* NeverGrowsWhenTypingAtEdges */,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* overviewRulerFindMatchForeground */.Fm),position:model/* OverviewRulerLane */.sh.Center},minimap:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* minimapFindMatch */.KT),position:model/* MinimapPosition */.F5.Inline}}),FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"find-match-no-overview",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"findMatch",showIfCollapsed:!0}),FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"find-match-only-overview",stickiness:1/* NeverGrowsWhenTypingAtEdges */,overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* overviewRulerFindMatchForeground */.Fm),position:model/* OverviewRulerLane */.sh.Center}}),FindDecorations._RANGE_HIGHLIGHT_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"find-range-highlight",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"rangeHighlight",isWholeLine:!0}),FindDecorations._FIND_SCOPE_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/find/replaceAllCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class ReplaceAllCommand{constructor(editorSelection,ranges,replaceStrings){this._editorSelection=editorSelection,this._ranges=ranges,this._replaceStrings=replaceStrings,this._trackedEditorSelectionId=null}getEditOperations(model,builder){if(this._ranges.length>0){
// Collect all edit operations
let ops=[];for(let i=0;i<this._ranges.length;i++)ops.push({range:this._ranges[i],text:this._replaceStrings[i]});
// Sort them in ascending order by range starts
ops.sort(((o1,o2)=>core_range/* Range */.e.compareRangesUsingStarts(o1.range,o2.range)));
// Merge operations that touch each other
let resultOps=[],previousOp=ops[0];for(let i=1;i<ops.length;i++)previousOp.range.endLineNumber===ops[i].range.startLineNumber&&previousOp.range.endColumn===ops[i].range.startColumn?(
// These operations are one after another and can be merged
previousOp.range=previousOp.range.plusRange(ops[i].range),previousOp.text=previousOp.text+ops[i].text):(resultOps.push(previousOp),previousOp=ops[i]);resultOps.push(previousOp);for(const op of resultOps)builder.addEditOperation(op.range,op.text)}this._trackedEditorSelectionId=builder.trackSelection(this._editorSelection)}computeCursorState(model,helper){return helper.getTrackedSelection(this._trackedEditorSelectionId)}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/search.js
var search=__webpack_require__(529415);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/find/replacePattern.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
/**
 * Assigned when the replace pattern is entirely static.
 */
class StaticValueReplacePattern{constructor(staticValue){this.staticValue=staticValue,this.kind=0/* StaticValue */}}
/**
 * Assigned when the replace pattern has replacement patterns.
 */class DynamicPiecesReplacePattern{constructor(pieces){this.pieces=pieces,this.kind=1/* DynamicPieces */}}class ReplacePattern{constructor(pieces){pieces&&0!==pieces.length?1===pieces.length&&null!==pieces[0].staticValue?this._state=new StaticValueReplacePattern(pieces[0].staticValue):this._state=new DynamicPiecesReplacePattern(pieces):this._state=new StaticValueReplacePattern("")}static fromStaticValue(value){return new ReplacePattern([ReplacePiece.staticValue(value)])}get hasReplacementPatterns(){return 1/* DynamicPieces */===this._state.kind}buildReplaceString(matches,preserveCase){if(0/* StaticValue */===this._state.kind)return preserveCase?(0,search/* buildReplaceStringWithCasePreserved */.o)(matches,this._state.staticValue):this._state.staticValue;let result="";for(let i=0,len=this._state.pieces.length;i<len;i++){let piece=this._state.pieces[i];if(null!==piece.staticValue){
// static value ReplacePiece
result+=piece.staticValue;continue}
// match index ReplacePiece
let match=ReplacePattern._substitute(piece.matchIndex,matches);if(null!==piece.caseOps&&piece.caseOps.length>0){let repl=[],lenOps=piece.caseOps.length,opIdx=0;for(let idx=0,len=match.length;idx<len;idx++){if(opIdx>=lenOps){repl.push(match.slice(idx));break}switch(piece.caseOps[opIdx]){case"U":repl.push(match[idx].toUpperCase());break;case"u":repl.push(match[idx].toUpperCase()),opIdx++;break;case"L":repl.push(match[idx].toLowerCase());break;case"l":repl.push(match[idx].toLowerCase()),opIdx++;break;default:repl.push(match[idx])}}match=repl.join("")}result+=match}return result}static _substitute(matchIndex,matches){if(null===matches)return"";if(0===matchIndex)return matches[0];let remainder="";while(matchIndex>0){if(matchIndex<matches.length){
// A match can be undefined
let match=matches[matchIndex]||"";return match+remainder}remainder=String(matchIndex%10)+remainder,matchIndex=Math.floor(matchIndex/10)}return"$"+remainder}}
/**
 * A replace piece can either be a static string or an index to a specific match.
 */class ReplacePiece{constructor(staticValue,matchIndex,caseOps){this.staticValue=staticValue,this.matchIndex=matchIndex,caseOps&&0!==caseOps.length?this.caseOps=caseOps.slice(0):this.caseOps=null}static staticValue(value){return new ReplacePiece(value,-1,null)}static caseOps(index,caseOps){return new ReplacePiece(null,index,caseOps)}}class ReplacePieceBuilder{constructor(source){this._source=source,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(toCharIndex){this._emitStatic(this._source.substring(this._lastCharIndex,toCharIndex)),this._lastCharIndex=toCharIndex}emitStatic(value,toCharIndex){this._emitStatic(value),this._lastCharIndex=toCharIndex}_emitStatic(value){0!==value.length&&(this._currentStaticPiece+=value)}emitMatchIndex(index,toCharIndex,caseOps){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=ReplacePiece.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=ReplacePiece.caseOps(index,caseOps),this._lastCharIndex=toCharIndex}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=ReplacePiece.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new ReplacePattern(this._result)}}
/**
 * \n			=> inserts a LF
 * \t			=> inserts a TAB
 * \\			=> inserts a "\".
 * \u			=> upper-cases one character in a match.
 * \U			=> upper-cases ALL remaining characters in a match.
 * \l			=> lower-cases one character in a match.
 * \L			=> lower-cases ALL remaining characters in a match.
 * $$			=> inserts a "$".
 * $& and $0	=> inserts the matched substring.
 * $n			=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string
 * everything else stays untouched
 *
 * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter
 */function parseReplaceString(replaceString){if(!replaceString||0===replaceString.length)return new ReplacePattern(null);let caseOps=[],result=new ReplacePieceBuilder(replaceString);for(let i=0,len=replaceString.length;i<len;i++){let chCode=replaceString.charCodeAt(i);if(92/* Backslash */!==chCode){if(36/* DollarSign */===chCode){if(
// move to next char
i++,i>=len)
// string ends with a $
break;let nextChCode=replaceString.charCodeAt(i);if(36/* DollarSign */===nextChCode){
// $$ => inserts a "$"
result.emitUnchanged(i-1),result.emitStatic("$",i+1);continue}if(48/* Digit0 */===nextChCode||38/* Ampersand */===nextChCode){
// $& and $0 => inserts the matched substring.
result.emitUnchanged(i-1),result.emitMatchIndex(0,i+1,caseOps),caseOps.length=0;continue}if(49/* Digit1 */<=nextChCode&&nextChCode<=57/* Digit9 */){
// $n
let matchIndex=nextChCode-48/* Digit0 */;
// peek next char to probe for $nn
if(i+1<len){let nextNextChCode=replaceString.charCodeAt(i+1);if(48/* Digit0 */<=nextNextChCode&&nextNextChCode<=57/* Digit9 */){
// $nn
// move to next char
i++,matchIndex=10*matchIndex+(nextNextChCode-48/* Digit0 */),result.emitUnchanged(i-2),result.emitMatchIndex(matchIndex,i+1,caseOps),caseOps.length=0;continue}}result.emitUnchanged(i-1),result.emitMatchIndex(matchIndex,i+1,caseOps),caseOps.length=0;continue}}}else{if(
// move to next char
i++,i>=len)
// string ends with a \
break;let nextChCode=replaceString.charCodeAt(i);
// let replaceWithCharacter: string | null = null;
switch(nextChCode){case 92/* Backslash */:
// \\ => inserts a "\"
result.emitUnchanged(i-1),result.emitStatic("\\",i+1);break;case 110/* n */:
// \n => inserts a LF
result.emitUnchanged(i-1),result.emitStatic("\n",i+1);break;case 116/* t */:
// \t => inserts a TAB
result.emitUnchanged(i-1),result.emitStatic("\t",i+1);break;
// Case modification of string replacements, patterned after Boost, but only applied
// to the replacement text, not subsequent content.
case 117/* u */:
// \u => upper-cases one character.
case 85/* U */:
// \U => upper-cases ALL following characters.
case 108/* l */:
// \l => lower-cases one character.
case 76/* L */:
// \L => lower-cases ALL following characters.
result.emitUnchanged(i-1),result.emitStatic("",i+1),caseOps.push(String.fromCharCode(nextChCode));break}}}return result.finalize()}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/find/findModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const CONTEXT_FIND_WIDGET_VISIBLE=new contextkey/* RawContextKey */.uy("findWidgetVisible",!1),CONTEXT_FIND_INPUT_FOCUSED=new contextkey/* RawContextKey */.uy("findInputFocussed",!1),CONTEXT_REPLACE_INPUT_FOCUSED=new contextkey/* RawContextKey */.uy("replaceInputFocussed",!1),ToggleCaseSensitiveKeybinding={primary:545/* KeyC */,mac:{primary:2593/* KeyC */}},ToggleWholeWordKeybinding={primary:565/* KeyW */,mac:{primary:2613/* KeyW */}},ToggleRegexKeybinding={primary:560/* KeyR */,mac:{primary:2608/* KeyR */}},ToggleSearchScopeKeybinding={primary:554/* KeyL */,mac:{primary:2602/* KeyL */}},TogglePreserveCaseKeybinding={primary:558/* KeyP */,mac:{primary:2606/* KeyP */}},FIND_IDS={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},MATCHES_LIMIT=19999,RESEARCH_DELAY=240;
// Keep ContextKey use of 'Focussed' to not break when clauses
class FindModelBoundToEditorModel{constructor(editor,state){this._toDispose=new lifecycle/* DisposableStore */.SL,this._editor=editor,this._state=state,this._isDisposed=!1,this._startSearchingTimer=new common_async/* TimeoutTimer */._F,this._decorations=new FindDecorations(editor),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new common_async/* RunOnceScheduler */.pY((()=>this.research(!1)),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((e=>{3/* Explicit */!==e.reason&&5/* Undo */!==e.reason&&6/* Redo */!==e.reason||this._decorations.setStartPosition(this._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((e=>{this._ignoreModelContentChanged||(e.isFlush&&
// a model.setValue() was called
this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,lifecycle/* dispose */.B9)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){let model=this._editor.getModel();model.isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}),RESEARCH_DELAY)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(model,findScope){
// If we have set now or before a find scope, use it for computing the search range
return findScope||model.getFullModelRange()}research(moveCursor,newFindScope){let findScopes=null;"undefined"!==typeof newFindScope?null!==newFindScope&&(findScopes=Array.isArray(newFindScope)?newFindScope:[newFindScope]):findScopes=this._decorations.getFindScopes(),null!==findScopes&&(findScopes=findScopes.map((findScope=>{if(findScope.startLineNumber!==findScope.endLineNumber){let endLineNumber=findScope.endLineNumber;return 1===findScope.endColumn&&(endLineNumber-=1),new core_range/* Range */.e(findScope.startLineNumber,1,endLineNumber,this._editor.getModel().getLineMaxColumn(endLineNumber))}return findScope})));let findMatches=this._findMatches(findScopes,!1,MATCHES_LIMIT);this._decorations.set(findMatches,findScopes);const editorSelection=this._editor.getSelection();let currentMatchesPosition=this._decorations.getCurrentMatchesPosition(editorSelection);if(0===currentMatchesPosition&&findMatches.length>0){
// current selection is not on top of a match
// try to find its nearest result from the top of the document
const matchAfterSelection=(0,arrays/* findFirstInSorted */.lG)(findMatches.map((match=>match.range)),(range=>core_range/* Range */.e.compareRangesUsingStarts(range,editorSelection)>=0));currentMatchesPosition=matchAfterSelection>0?matchAfterSelection-1+1/** match position is one based */:currentMatchesPosition}this._state.changeMatchInfo(currentMatchesPosition,this._decorations.getCount(),void 0),moveCursor&&this._editor.getOption(35/* find */).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let findScope=this._decorations.getFindScope();return findScope&&
// Reveal the selection so user is reminded that 'selection find' is on.
this._editor.revealRangeInCenterIfOutsideViewport(findScope,0/* Smooth */),!0}return!1}_setCurrentFindMatch(match){let matchesPosition=this._decorations.setCurrentFindMatch(match);this._state.changeMatchInfo(matchesPosition,this._decorations.getCount(),match),this._editor.setSelection(match),this._editor.revealRangeInCenterIfOutsideViewport(match,0/* Smooth */)}_prevSearchPosition(before){let isUsingLineStops=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:lineNumber,column:column}=before,model=this._editor.getModel();return isUsingLineStops||1===column?(1===lineNumber?lineNumber=model.getLineCount():lineNumber--,column=model.getLineMaxColumn(lineNumber)):column--,new core_position/* Position */.L(lineNumber,column)}_moveToPrevMatch(before,isRecursed=!1){if(!this._state.canNavigateBack()){
// we are beyond the first matched find result
// instead of doing nothing, we should refocus the first item
const nextMatchRange=this._decorations.matchAfterPosition(before);return void(nextMatchRange&&this._setCurrentFindMatch(nextMatchRange))}if(this._decorations.getCount()<MATCHES_LIMIT){let prevMatchRange=this._decorations.matchBeforePosition(before);return prevMatchRange&&prevMatchRange.isEmpty()&&prevMatchRange.getStartPosition().equals(before)&&(before=this._prevSearchPosition(before),prevMatchRange=this._decorations.matchBeforePosition(before)),void(prevMatchRange&&this._setCurrentFindMatch(prevMatchRange))}if(this._cannotFind())return;let findScope=this._decorations.getFindScope(),searchRange=FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),findScope);
// ...(----)...|...
searchRange.getEndPosition().isBefore(before)&&(before=searchRange.getEndPosition()),
// ...|...(----)...
before.isBefore(searchRange.getStartPosition())&&(before=searchRange.getEndPosition());let{lineNumber:lineNumber,column:column}=before,model=this._editor.getModel(),position=new core_position/* Position */.L(lineNumber,column),prevMatch=model.findPreviousMatch(this._state.searchString,position,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115/* wordSeparators */):null,!1);return prevMatch&&prevMatch.range.isEmpty()&&prevMatch.range.getStartPosition().equals(position)&&(
// Looks like we're stuck at this position, unacceptable!
position=this._prevSearchPosition(position),prevMatch=model.findPreviousMatch(this._state.searchString,position,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115/* wordSeparators */):null,!1)),prevMatch?isRecursed||searchRange.containsRange(prevMatch.range)?void this._setCurrentFindMatch(prevMatch.range):this._moveToPrevMatch(prevMatch.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(after){let isUsingLineStops=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:lineNumber,column:column}=after,model=this._editor.getModel();return isUsingLineStops||column===model.getLineMaxColumn(lineNumber)?(lineNumber===model.getLineCount()?lineNumber=1:lineNumber++,column=1):column++,new core_position/* Position */.L(lineNumber,column)}_moveToNextMatch(after){if(!this._state.canNavigateForward()){
// we are beyond the last matched find result
// instead of doing nothing, we should refocus the last item
const prevMatchRange=this._decorations.matchBeforePosition(after);return void(prevMatchRange&&this._setCurrentFindMatch(prevMatchRange))}if(this._decorations.getCount()<MATCHES_LIMIT){let nextMatchRange=this._decorations.matchAfterPosition(after);return nextMatchRange&&nextMatchRange.isEmpty()&&nextMatchRange.getStartPosition().equals(after)&&(
// Looks like we're stuck at this position, unacceptable!
after=this._nextSearchPosition(after),nextMatchRange=this._decorations.matchAfterPosition(after)),void(nextMatchRange&&this._setCurrentFindMatch(nextMatchRange))}let nextMatch=this._getNextMatch(after,!1,!0);nextMatch&&this._setCurrentFindMatch(nextMatch.range)}_getNextMatch(after,captureMatches,forceMove,isRecursed=!1){if(this._cannotFind())return null;let findScope=this._decorations.getFindScope(),searchRange=FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),findScope);
// ...(----)...|...
searchRange.getEndPosition().isBefore(after)&&(after=searchRange.getStartPosition()),
// ...|...(----)...
after.isBefore(searchRange.getStartPosition())&&(after=searchRange.getStartPosition());let{lineNumber:lineNumber,column:column}=after,model=this._editor.getModel(),position=new core_position/* Position */.L(lineNumber,column),nextMatch=model.findNextMatch(this._state.searchString,position,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115/* wordSeparators */):null,captureMatches);return forceMove&&nextMatch&&nextMatch.range.isEmpty()&&nextMatch.range.getStartPosition().equals(position)&&(
// Looks like we're stuck at this position, unacceptable!
position=this._nextSearchPosition(position),nextMatch=model.findNextMatch(this._state.searchString,position,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115/* wordSeparators */):null,captureMatches)),nextMatch?isRecursed||searchRange.containsRange(nextMatch.range)?nextMatch:this._getNextMatch(nextMatch.range.getEndPosition(),captureMatches,forceMove,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?parseReplaceString(this._state.replaceString):ReplacePattern.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let replacePattern=this._getReplacePattern(),selection=this._editor.getSelection(),nextMatch=this._getNextMatch(selection.getStartPosition(),!0,!1);if(nextMatch)if(selection.equalsRange(nextMatch.range)){
// selection sits on a find match => replace it!
let replaceString=replacePattern.buildReplaceString(nextMatch.matches,this._state.preserveCase),command=new replaceCommand/* ReplaceCommand */.T4(selection,replaceString);this._executeEditorCommand("replace",command),this._decorations.setStartPosition(new core_position/* Position */.L(selection.startLineNumber,selection.startColumn+replaceString.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(nextMatch.range)}_findMatches(findScopes,captureMatches,limitResultCount){const searchRanges=(findScopes||[null]).map((scope=>FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),scope)));return this._editor.getModel().findMatches(this._state.searchString,searchRanges,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115/* wordSeparators */):null,captureMatches,limitResultCount)}replaceAll(){if(!this._hasMatches())return;const findScopes=this._decorations.getFindScopes();null===findScopes&&this._state.matchesCount>=MATCHES_LIMIT?
// Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches
this._largeReplaceAll():this._regularReplaceAll(findScopes),this.research(!1)}_largeReplaceAll(){const searchParams=new textModelSearch/* SearchParams */.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115/* wordSeparators */):null),searchData=searchParams.parseSearchRequest();if(!searchData)return;let searchRegex=searchData.regex;if(!searchRegex.multiline){let mod="mu";searchRegex.ignoreCase&&(mod+="i"),searchRegex.global&&(mod+="g"),searchRegex=new RegExp(searchRegex.source,mod)}const model=this._editor.getModel(),modelText=model.getValue(1/* LF */),fullModelRange=model.getFullModelRange(),replacePattern=this._getReplacePattern();let resultText;const preserveCase=this._state.preserveCase;resultText=replacePattern.hasReplacementPatterns||preserveCase?modelText.replace(searchRegex,(function(){return replacePattern.buildReplaceString(arguments,preserveCase)})):modelText.replace(searchRegex,replacePattern.buildReplaceString(null,preserveCase));let command=new replaceCommand/* ReplaceCommandThatPreservesSelection */.hP(fullModelRange,resultText,this._editor.getSelection());this._executeEditorCommand("replaceAll",command)}_regularReplaceAll(findScopes){const replacePattern=this._getReplacePattern();
// Get all the ranges (even more than the highlighted ones)
let matches=this._findMatches(findScopes,replacePattern.hasReplacementPatterns||this._state.preserveCase,1073741824/* MAX_SAFE_SMALL_INTEGER */),replaceStrings=[];for(let i=0,len=matches.length;i<len;i++)replaceStrings[i]=replacePattern.buildReplaceString(matches[i].matches,this._state.preserveCase);let command=new ReplaceAllCommand(this._editor.getSelection(),matches.map((m=>m.range)),replaceStrings);this._executeEditorCommand("replaceAll",command)}selectAllMatches(){if(!this._hasMatches())return;let findScopes=this._decorations.getFindScopes(),matches=this._findMatches(findScopes,!1,1073741824/* MAX_SAFE_SMALL_INTEGER */),selections=matches.map((m=>new core_selection/* Selection */.Y(m.range.startLineNumber,m.range.startColumn,m.range.endLineNumber,m.range.endColumn))),editorSelection=this._editor.getSelection();
// Get all the ranges (even more than the highlighted ones)
for(let i=0,len=selections.length;i<len;i++){let sel=selections[i];if(sel.equalsRange(editorSelection)){selections=[editorSelection].concat(selections.slice(0,i)).concat(selections.slice(i+1));break}}this._editor.setSelections(selections)}_executeEditorCommand(source,command){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(source,command),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInputCheckboxes.js
var findInputCheckboxes=__webpack_require__(903331);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/find/findOptionsWidget.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class FindOptionsWidget extends widget/* Widget */.${constructor(editor,state,keybindingService,themeService){super(),this._hideSoon=this._register(new common_async/* RunOnceScheduler */.pY((()=>this._hide()),2e3)),this._isVisible=!1,this._editor=editor,this._state=state,this._keybindingService=keybindingService,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const inputActiveOptionBorderColor=themeService.getColorTheme().getColor(colorRegistry/* inputActiveOptionBorder */.PR),inputActiveOptionForegroundColor=themeService.getColorTheme().getColor(colorRegistry/* inputActiveOptionForeground */.Pv),inputActiveOptionBackgroundColor=themeService.getColorTheme().getColor(colorRegistry/* inputActiveOptionBackground */.XE);this.caseSensitive=this._register(new findInputCheckboxes/* CaseSensitiveCheckbox */.vk({appendTitle:this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:inputActiveOptionBorderColor,inputActiveOptionForeground:inputActiveOptionForegroundColor,inputActiveOptionBackground:inputActiveOptionBackgroundColor})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange((()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)}))),this.wholeWords=this._register(new findInputCheckboxes/* WholeWordsCheckbox */.n3({appendTitle:this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:inputActiveOptionBorderColor,inputActiveOptionForeground:inputActiveOptionForegroundColor,inputActiveOptionBackground:inputActiveOptionBackgroundColor})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange((()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)}))),this.regex=this._register(new findInputCheckboxes/* RegexCheckbox */.am({appendTitle:this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:inputActiveOptionBorderColor,inputActiveOptionForeground:inputActiveOptionForegroundColor,inputActiveOptionBackground:inputActiveOptionBackgroundColor})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange((()=>{this._state.change({isRegex:this.regex.checked},!1)}))),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange((e=>{let somethingChanged=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,somethingChanged=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,somethingChanged=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,somethingChanged=!0),!this._state.isRevealed&&somethingChanged&&this._revealTemporarily()}))),this._register(dom/* addDisposableNonBubblingMouseOutListener */.j_(this._domNode,(e=>this._onMouseOut()))),this._register(dom/* addDisposableListener */.nm(this._domNode,"mouseover",(e=>this._onMouseOver()))),this._applyTheme(themeService.getColorTheme()),this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(actionId){let kb=this._keybindingService.lookupKeybinding(actionId);return kb?` (${kb.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}
// ----- IOverlayWidget API
getId(){return FindOptionsWidget.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0/* TOP_RIGHT_CORNER */}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(theme){let inputStyles={inputActiveOptionBorder:theme.getColor(colorRegistry/* inputActiveOptionBorder */.PR),inputActiveOptionForeground:theme.getColor(colorRegistry/* inputActiveOptionForeground */.Pv),inputActiveOptionBackground:theme.getColor(colorRegistry/* inputActiveOptionBackground */.XE)};this.caseSensitive.style(inputStyles),this.wholeWords.style(inputStyles),this.regex.style(inputStyles)}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/find/findState.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function effectiveOptionValue(override,value){return 1/* True */===override||2/* False */!==override&&value}FindOptionsWidget.ID="editor.contrib.findOptionsWidget",(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const widgetBackground=theme.getColor(colorRegistry/* editorWidgetBackground */.D0);widgetBackground&&collector.addRule(`.monaco-editor .findOptionsWidget { background-color: ${widgetBackground}; }`);const widgetForeground=theme.getColor(colorRegistry/* editorWidgetForeground */.Hf);widgetForeground&&collector.addRule(`.monaco-editor .findOptionsWidget { color: ${widgetForeground}; }`);const widgetShadowColor=theme.getColor(colorRegistry/* widgetShadow */.rh);widgetShadowColor&&collector.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);const hcBorder=theme.getColor(colorRegistry/* contrastBorder */.lR);hcBorder&&collector.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${hcBorder}; }`)}));class FindReplaceState extends lifecycle/* Disposable */.JT{constructor(){super(),this._onFindReplaceStateChange=this._register(new common_event/* Emitter */.Q5),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0/* NotSet */,this._wholeWord=!1,this._wholeWordOverride=0/* NotSet */,this._matchCase=!1,this._matchCaseOverride=0/* NotSet */,this._preserveCase=!1,this._preserveCaseOverride=0/* NotSet */,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return effectiveOptionValue(this._isRegexOverride,this._isRegex)}get wholeWord(){return effectiveOptionValue(this._wholeWordOverride,this._wholeWord)}get matchCase(){return effectiveOptionValue(this._matchCaseOverride,this._matchCase)}get preserveCase(){return effectiveOptionValue(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(matchesPosition,matchesCount,currentMatch){let changeEvent={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},somethingChanged=!1;0===matchesCount&&(matchesPosition=0),matchesPosition>matchesCount&&(matchesPosition=matchesCount),this._matchesPosition!==matchesPosition&&(this._matchesPosition=matchesPosition,changeEvent.matchesPosition=!0,somethingChanged=!0),this._matchesCount!==matchesCount&&(this._matchesCount=matchesCount,changeEvent.matchesCount=!0,somethingChanged=!0),"undefined"!==typeof currentMatch&&(core_range/* Range */.e.equalsRange(this._currentMatch,currentMatch)||(this._currentMatch=currentMatch,changeEvent.currentMatch=!0,somethingChanged=!0)),somethingChanged&&this._onFindReplaceStateChange.fire(changeEvent)}change(newState,moveCursor,updateHistory=!0){var _a;let changeEvent={moveCursor:moveCursor,updateHistory:updateHistory,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},somethingChanged=!1;const oldEffectiveIsRegex=this.isRegex,oldEffectiveWholeWords=this.wholeWord,oldEffectiveMatchCase=this.matchCase,oldEffectivePreserveCase=this.preserveCase;"undefined"!==typeof newState.searchString&&this._searchString!==newState.searchString&&(this._searchString=newState.searchString,changeEvent.searchString=!0,somethingChanged=!0),"undefined"!==typeof newState.replaceString&&this._replaceString!==newState.replaceString&&(this._replaceString=newState.replaceString,changeEvent.replaceString=!0,somethingChanged=!0),"undefined"!==typeof newState.isRevealed&&this._isRevealed!==newState.isRevealed&&(this._isRevealed=newState.isRevealed,changeEvent.isRevealed=!0,somethingChanged=!0),"undefined"!==typeof newState.isReplaceRevealed&&this._isReplaceRevealed!==newState.isReplaceRevealed&&(this._isReplaceRevealed=newState.isReplaceRevealed,changeEvent.isReplaceRevealed=!0,somethingChanged=!0),"undefined"!==typeof newState.isRegex&&(this._isRegex=newState.isRegex),"undefined"!==typeof newState.wholeWord&&(this._wholeWord=newState.wholeWord),"undefined"!==typeof newState.matchCase&&(this._matchCase=newState.matchCase),"undefined"!==typeof newState.preserveCase&&(this._preserveCase=newState.preserveCase),"undefined"!==typeof newState.searchScope&&((null===(_a=newState.searchScope)||void 0===_a?void 0:_a.every((newSearchScope=>{var _a;return null===(_a=this._searchScope)||void 0===_a?void 0:_a.some((existingSearchScope=>!core_range/* Range */.e.equalsRange(existingSearchScope,newSearchScope)))})))||(this._searchScope=newState.searchScope,changeEvent.searchScope=!0,somethingChanged=!0)),"undefined"!==typeof newState.loop&&this._loop!==newState.loop&&(this._loop=newState.loop,changeEvent.loop=!0,somethingChanged=!0),
// Overrides get set when they explicitly come in and get reset anytime something else changes
this._isRegexOverride="undefined"!==typeof newState.isRegexOverride?newState.isRegexOverride:0/* NotSet */,this._wholeWordOverride="undefined"!==typeof newState.wholeWordOverride?newState.wholeWordOverride:0/* NotSet */,this._matchCaseOverride="undefined"!==typeof newState.matchCaseOverride?newState.matchCaseOverride:0/* NotSet */,this._preserveCaseOverride="undefined"!==typeof newState.preserveCaseOverride?newState.preserveCaseOverride:0/* NotSet */,oldEffectiveIsRegex!==this.isRegex&&(somethingChanged=!0,changeEvent.isRegex=!0),oldEffectiveWholeWords!==this.wholeWord&&(somethingChanged=!0,changeEvent.wholeWord=!0),oldEffectiveMatchCase!==this.matchCase&&(somethingChanged=!0,changeEvent.matchCase=!0),oldEffectivePreserveCase!==this.preserveCase&&(somethingChanged=!0,changeEvent.preserveCase=!0),somethingChanged&&this._onFindReplaceStateChange.fire(changeEvent)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=MATCHES_LIMIT}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/browser/ui/checkbox/checkbox.js
var checkbox_checkbox=__webpack_require__(616229),contextScopedHistoryWidget=__webpack_require__(846765),historyWidgetKeybindingHint=__webpack_require__(146581),findWidget_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/browser/contextScopedHistoryWidget.js
const findSelectionIcon=(0,iconRegistry/* registerIcon */.q5)("find-selection",codicons/* Codicon */.lA.selection,nls/* localize */.N("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),findCollapsedIcon=(0,iconRegistry/* registerIcon */.q5)("find-collapsed",codicons/* Codicon */.lA.chevronRight,nls/* localize */.N("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),findExpandedIcon=(0,iconRegistry/* registerIcon */.q5)("find-expanded",codicons/* Codicon */.lA.chevronDown,nls/* localize */.N("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),findReplaceIcon=(0,iconRegistry/* registerIcon */.q5)("find-replace",codicons/* Codicon */.lA.replace,nls/* localize */.N("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),findReplaceAllIcon=(0,iconRegistry/* registerIcon */.q5)("find-replace-all",codicons/* Codicon */.lA.replaceAll,nls/* localize */.N("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),findPreviousMatchIcon=(0,iconRegistry/* registerIcon */.q5)("find-previous-match",codicons/* Codicon */.lA.arrowUp,nls/* localize */.N("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),findNextMatchIcon=(0,iconRegistry/* registerIcon */.q5)("find-next-match",codicons/* Codicon */.lA.arrowDown,nls/* localize */.N("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),NLS_FIND_INPUT_LABEL=nls/* localize */.N("label.find","Find"),NLS_FIND_INPUT_PLACEHOLDER=nls/* localize */.N("placeholder.find","Find"),NLS_PREVIOUS_MATCH_BTN_LABEL=nls/* localize */.N("label.previousMatchButton","Previous Match"),NLS_NEXT_MATCH_BTN_LABEL=nls/* localize */.N("label.nextMatchButton","Next Match"),NLS_TOGGLE_SELECTION_FIND_TITLE=nls/* localize */.N("label.toggleSelectionFind","Find in Selection"),NLS_CLOSE_BTN_LABEL=nls/* localize */.N("label.closeButton","Close"),NLS_REPLACE_INPUT_LABEL=nls/* localize */.N("label.replace","Replace"),NLS_REPLACE_INPUT_PLACEHOLDER=nls/* localize */.N("placeholder.replace","Replace"),NLS_REPLACE_BTN_LABEL=nls/* localize */.N("label.replaceButton","Replace"),NLS_REPLACE_ALL_BTN_LABEL=nls/* localize */.N("label.replaceAllButton","Replace All"),NLS_TOGGLE_REPLACE_MODE_BTN_LABEL=nls/* localize */.N("label.toggleReplaceButton","Toggle Replace"),NLS_MATCHES_COUNT_LIMIT_TITLE=nls/* localize */.N("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",MATCHES_LIMIT),NLS_MATCHES_LOCATION=nls/* localize */.N("label.matchesLocation","{0} of {1}"),NLS_NO_RESULTS=nls/* localize */.N("label.noResults","No results"),FIND_WIDGET_INITIAL_WIDTH=419,PART_WIDTH=275,FIND_INPUT_AREA_WIDTH=PART_WIDTH-54;let MAX_MATCHES_COUNT_WIDTH=69;
// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;
const FIND_INPUT_AREA_HEIGHT=33,ctrlEnterReplaceAllWarningPromptedKey="ctrlEnterReplaceAll.windows.donotask",ctrlKeyMod=platform/* isMacintosh */.dz?256/* WinCtrl */:2048/* CtrlCmd */;// The height of Find Widget when Replace Input is not visible.
class FindWidgetViewZone{constructor(afterLineNumber){this.afterLineNumber=afterLineNumber,this.heightInPx=FIND_INPUT_AREA_HEIGHT,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function stopPropagationForMultiLineUpwards(event,value,textarea){const isMultiline=!!value.match(/\n/);textarea&&isMultiline&&textarea.selectionStart>0&&event.stopPropagation()}function stopPropagationForMultiLineDownwards(event,value,textarea){const isMultiline=!!value.match(/\n/);textarea&&isMultiline&&textarea.selectionEnd<textarea.value.length&&event.stopPropagation()}class FindWidget extends widget/* Widget */.${constructor(codeEditor,controller,state,contextViewProvider,keybindingService,contextKeyService,themeService,storageService,notificationService){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=codeEditor,this._controller=controller,this._state=state,this._contextViewProvider=contextViewProvider,this._keybindingService=keybindingService,this._contextKeyService=contextKeyService,this._storageService=storageService,this._notificationService=notificationService,this._ctrlEnterReplaceAllWarningPrompted=!!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey,0/* GLOBAL */),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new common_async/* Delayer */.vp(500),this._register((0,lifecycle/* toDisposable */.OF)((()=>this._updateHistoryDelayer.cancel()))),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration((e=>{if(e.hasChanged(80/* readOnly */)&&(this._codeEditor.getOption(80/* readOnly */)&&
// Hide replace part if editor becomes read only
this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(129/* layoutInfo */)&&this._tryUpdateWidgetWidth(),e.hasChanged(2/* accessibilitySupport */)&&this.updateAccessibilitySupport(),e.hasChanged(35/* find */)){const addExtraSpaceOnTop=this._codeEditor.getOption(35/* find */).addExtraSpaceOnTop;addExtraSpaceOnTop&&!this._viewZone&&(this._viewZone=new FindWidgetViewZone(0),this._showViewZone()),!addExtraSpaceOnTop&&this._viewZone&&this._removeViewZone()}}))),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection((()=>{this._isVisible&&this._updateToggleSelectionFindButton()}))),this._register(this._codeEditor.onDidFocusEditorWidget((()=>findWidget_awaiter(this,void 0,void 0,(function*(){if(this._isVisible){let globalBufferTerm=yield this._controller.getGlobalBufferTerm();globalBufferTerm&&globalBufferTerm!==this._state.searchString&&(this._state.change({searchString:globalBufferTerm},!1),this._findInput.select())}}))))),this._findInputFocused=CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService),this._findFocusTracker=this._register(dom/* trackFocus */.go(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus((()=>{this._findInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._findFocusTracker.onDidBlur((()=>{this._findInputFocused.set(!1)}))),this._replaceInputFocused=CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService),this._replaceFocusTracker=this._register(dom/* trackFocus */.go(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus((()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._replaceFocusTracker.onDidBlur((()=>{this._replaceInputFocused.set(!1)}))),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35/* find */).addExtraSpaceOnTop&&(this._viewZone=new FindWidgetViewZone(0)),this._applyTheme(themeService.getColorTheme()),this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel((()=>{this._isVisible&&(this._viewZoneId=void 0)}))),this._register(this._codeEditor.onDidScrollChange((e=>{e.scrollTopChanged?this._layoutViewZone():
// for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.
setTimeout((()=>{this._layoutViewZone()}),0)})))}
// ----- IOverlayWidget API
getId(){return FindWidget.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0/* TOP_RIGHT_CORNER */}:null}
// ----- React to state changes
_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(80/* readOnly */)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=dom/* getTotalWidth */.w(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let showRedOutline=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",showRedOutline),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,errors/* onUnexpectedError */.dL)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let label;if(this._matchesCount.style.minWidth=MAX_MATCHES_COUNT_WIDTH+"px",this._state.matchesCount>=MATCHES_LIMIT?this._matchesCount.title=NLS_MATCHES_COUNT_LIMIT_TITLE:this._matchesCount.title="",
// remove previous content
this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let matchesCount=String(this._state.matchesCount);this._state.matchesCount>=MATCHES_LIMIT&&(matchesCount+="+");let matchesPosition=String(this._state.matchesPosition);"0"===matchesPosition&&(matchesPosition="?"),label=strings/* format */.WU(NLS_MATCHES_LOCATION,matchesPosition,matchesCount)}else label=NLS_NO_RESULTS;this._matchesCount.appendChild(document.createTextNode(label)),(0,aria/* alert */.Z9)(this._getAriaLabel(label,this._state.currentMatch,this._state.searchString)),MAX_MATCHES_COUNT_WIDTH=Math.max(MAX_MATCHES_COUNT_WIDTH,this._matchesCount.clientWidth)}
// ----- actions
_getAriaLabel(label,currentMatch,searchString){if(label===NLS_NO_RESULTS)return""===searchString?nls/* localize */.N("ariaSearchNoResultEmpty","{0} found",label):nls/* localize */.N("ariaSearchNoResult","{0} found for '{1}'",label,searchString);if(currentMatch){const ariaLabel=nls/* localize */.N("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",label,searchString,currentMatch.startLineNumber+":"+currentMatch.startColumn),model=this._codeEditor.getModel();if(model&&currentMatch.startLineNumber<=model.getLineCount()&&currentMatch.startLineNumber>=1){const lineContent=model.getLineContent(currentMatch.startLineNumber);return`${lineContent}, ${ariaLabel}`}return ariaLabel}return nls/* localize */.N("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",label,searchString)}
/**
     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').
     * If 'selection find' is OFF we enable the button only if there is a selection.
     */_updateToggleSelectionFindButton(){let selection=this._codeEditor.getSelection(),isSelection=!!selection&&(selection.startLineNumber!==selection.endLineNumber||selection.startColumn!==selection.endColumn),isChecked=this._toggleSelectionFind.checked;this._isVisible&&(isChecked||isSelection)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let findInputIsNonEmpty=this._state.searchString.length>0,matchesCount=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&findInputIsNonEmpty&&matchesCount&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&findInputIsNonEmpty&&matchesCount&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&findInputIsNonEmpty),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&findInputIsNonEmpty),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let canReplace=!this._codeEditor.getOption(80/* readOnly */);this._toggleReplaceBtn.setEnabled(this._isVisible&&canReplace)}_reveal(){if(this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const selection=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35/* find */).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const isSelectionMultipleLine=!!selection&&selection.startLineNumber!==selection.endLineNumber;this._toggleSelectionFind.checked=isSelectionMultipleLine;break;default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")}),0)),
// validate query again as it's being dismissed when we hide the find widget.
this._revealTimeouts.push(setTimeout((()=>{this._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);let adjustEditorScrollTop=!0;if(this._codeEditor.getOption(35/* find */).seedSearchStringFromSelection&&selection){const domNode=this._codeEditor.getDomNode();if(domNode){const editorCoords=dom/* getDomNodePagePosition */.i(domNode),startCoords=this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition()),startLeft=editorCoords.left+(startCoords?startCoords.left:0),startTop=startCoords?startCoords.top:0;if(this._viewZone&&startTop<this._viewZone.heightInPx){selection.endLineNumber>selection.startLineNumber&&(adjustEditorScrollTop=!1);const leftOfFindWidget=dom/* getTopLeftOffset */.xQ(this._domNode).left;startLeft>leftOfFindWidget&&(adjustEditorScrollTop=!1);const endCoords=this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition()),endLeft=editorCoords.left+(endCoords?endCoords.left:0);endLeft>leftOfFindWidget&&(adjustEditorScrollTop=!1)}}}this._showViewZone(adjustEditorScrollTop)}}_hide(focusTheEditor){this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),focusTheEditor&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(targetScrollTop){const addExtraSpaceOnTop=this._codeEditor.getOption(35/* find */).addExtraSpaceOnTop;if(!addExtraSpaceOnTop)return void this._removeViewZone();if(!this._isVisible)return;const viewZone=this._viewZone;void 0===this._viewZoneId&&viewZone&&this._codeEditor.changeViewZones((accessor=>{viewZone.heightInPx=this._getHeight(),this._viewZoneId=accessor.addZone(viewZone),
// scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.
this._codeEditor.setScrollTop(targetScrollTop||this._codeEditor.getScrollTop()+viewZone.heightInPx)}))}_showViewZone(adjustScroll=!0){if(!this._isVisible)return;const addExtraSpaceOnTop=this._codeEditor.getOption(35/* find */).addExtraSpaceOnTop;if(!addExtraSpaceOnTop)return;void 0===this._viewZone&&(this._viewZone=new FindWidgetViewZone(0));const viewZone=this._viewZone;this._codeEditor.changeViewZones((accessor=>{if(void 0!==this._viewZoneId){
// the view zone already exists, we need to update the height
const newHeight=this._getHeight();if(newHeight===viewZone.heightInPx)return;let scrollAdjustment=newHeight-viewZone.heightInPx;return viewZone.heightInPx=newHeight,accessor.layoutZone(this._viewZoneId),void(adjustScroll&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+scrollAdjustment))}{let scrollAdjustment=this._getHeight();
// if the editor has top padding, factor that into the zone height
if(scrollAdjustment-=this._codeEditor.getOption(74/* padding */).top,scrollAdjustment<=0)return;viewZone.heightInPx=scrollAdjustment,this._viewZoneId=accessor.addZone(viewZone),adjustScroll&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+scrollAdjustment)}}))}_removeViewZone(){this._codeEditor.changeViewZones((accessor=>{void 0!==this._viewZoneId&&(accessor.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))}))}_applyTheme(theme){let inputStyles={inputActiveOptionBorder:theme.getColor(colorRegistry/* inputActiveOptionBorder */.PR),inputActiveOptionBackground:theme.getColor(colorRegistry/* inputActiveOptionBackground */.XE),inputActiveOptionForeground:theme.getColor(colorRegistry/* inputActiveOptionForeground */.Pv),inputBackground:theme.getColor(colorRegistry/* inputBackground */.sE),inputForeground:theme.getColor(colorRegistry/* inputForeground */.zJ),inputBorder:theme.getColor(colorRegistry/* inputBorder */.dt),inputValidationInfoBackground:theme.getColor(colorRegistry/* inputValidationInfoBackground */._l),inputValidationInfoForeground:theme.getColor(colorRegistry/* inputValidationInfoForeground */.YI),inputValidationInfoBorder:theme.getColor(colorRegistry/* inputValidationInfoBorder */.EP),inputValidationWarningBackground:theme.getColor(colorRegistry/* inputValidationWarningBackground */.RV),inputValidationWarningForeground:theme.getColor(colorRegistry/* inputValidationWarningForeground */.SU),inputValidationWarningBorder:theme.getColor(colorRegistry/* inputValidationWarningBorder */.C3),inputValidationErrorBackground:theme.getColor(colorRegistry/* inputValidationErrorBackground */.p),inputValidationErrorForeground:theme.getColor(colorRegistry/* inputValidationErrorForeground */._t),inputValidationErrorBorder:theme.getColor(colorRegistry/* inputValidationErrorBorder */.OZ)};this._findInput.style(inputStyles),this._replaceInput.style(inputStyles),this._toggleSelectionFind.style(inputStyles)}_tryUpdateWidgetWidth(){if(!this._isVisible)return;if(!dom/* isInDOM */.Uw(this._domNode))
// the widget is not in the DOM
return;const layoutInfo=this._codeEditor.getLayoutInfo(),editorContentWidth=layoutInfo.contentWidth;if(editorContentWidth<=0)
// for example, diff view original editor
return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const editorWidth=layoutInfo.width,minimapWidth=layoutInfo.minimap.minimapWidth;let collapsedFindWidget=!1,reducedFindWidget=!1,narrowFindWidget=!1;if(this._resized){let widgetWidth=dom/* getTotalWidth */.w(this._domNode);if(widgetWidth>FIND_WIDGET_INITIAL_WIDTH)
// as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.
return this._domNode.style.maxWidth=editorWidth-28-minimapWidth-15+"px",void(this._replaceInput.width=dom/* getTotalWidth */.w(this._findInput.domNode))}if(FIND_WIDGET_INITIAL_WIDTH+28+minimapWidth>=editorWidth&&(reducedFindWidget=!0),FIND_WIDGET_INITIAL_WIDTH+28+minimapWidth-MAX_MATCHES_COUNT_WIDTH>=editorWidth&&(narrowFindWidget=!0),FIND_WIDGET_INITIAL_WIDTH+28+minimapWidth-MAX_MATCHES_COUNT_WIDTH>=editorWidth+50&&(collapsedFindWidget=!0),this._domNode.classList.toggle("collapsed-find-widget",collapsedFindWidget),this._domNode.classList.toggle("narrow-find-widget",narrowFindWidget),this._domNode.classList.toggle("reduced-find-widget",reducedFindWidget),narrowFindWidget||collapsedFindWidget||(
// the minimal left offset of findwidget is 15px.
this._domNode.style.maxWidth=editorWidth-28-minimapWidth-15+"px"),this._resized){this._findInput.inputBox.layout();let findInputWidth=this._findInput.inputBox.element.clientWidth;findInputWidth>0&&(this._replaceInput.width=findInputWidth)}else this._isReplaceVisible&&(this._replaceInput.width=dom/* getTotalWidth */.w(this._findInput.domNode))}_getHeight(){let totalheight=0;
// find input margin top
return totalheight+=4,
// find input height
totalheight+=this._findInput.inputBox.height+2/** input box border */,this._isReplaceVisible&&(
// replace input margin
totalheight+=4,totalheight+=this._replaceInput.inputBox.height+2/** input box border */),
// margin bottom
totalheight+=4,totalheight}_tryUpdateHeight(){const totalHeight=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==totalHeight)&&(this._cachedHeight=totalHeight,this._domNode.style.height=`${totalHeight}px`,!0)}
// ----- Public
focusFindInput(){this._findInput.select(),
// Edge browser requires focus() in addition to select()
this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),
// Edge browser requires focus() in addition to select()
this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let selections=this._codeEditor.getSelections();selections.map((selection=>{1===selection.endColumn&&selection.endLineNumber>selection.startLineNumber&&(selection=selection.setEndPosition(selection.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber-1)));const currentMatch=this._state.currentMatch;return selection.startLineNumber===selection.endLineNumber||core_range/* Range */.e.equalsRange(selection,currentMatch)?null:selection})).filter((element=>!!element)),selections.length&&this._state.change({searchScope:selections},!0)}}_onFindInputMouseDown(e){
// on linux, middle key does pasting.
e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){return e.equals(3/* Enter */|ctrlKeyMod)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2/* Tab */)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066/* DownArrow */)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16/* UpArrow */)?stopPropagationForMultiLineUpwards(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18/* DownArrow */)?stopPropagationForMultiLineDownwards(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){return e.equals(3/* Enter */|ctrlKeyMod)?(this._keybindingService.dispatchEvent(e,e.target)||(platform/* isWindows */.ED&&platform/* isNative */.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(
// this is the first time when users press Ctrl + Enter to replace all
this._notificationService.info(nls/* localize */.N("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey,!0,0/* GLOBAL */,0/* USER */)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2/* Tab */)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026/* Tab */)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066/* DownArrow */)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16/* UpArrow */)?stopPropagationForMultiLineUpwards(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18/* DownArrow */)?stopPropagationForMultiLineDownwards(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}
// ----- sash
getVerticalSashLeft(_sash){return 0}
// ----- initialization
_keybindingLabelFor(actionId){let kb=this._keybindingService.lookupKeybinding(actionId);return kb?` (${kb.getLabel()})`:""}_buildDomNode(){const flexibleHeight=!0,flexibleWidth=!0;
// Find input
this._findInput=this._register(new contextScopedHistoryWidget/* ContextScopedFindInput */.Yb(null,this._contextViewProvider,{width:FIND_INPUT_AREA_WIDTH,label:NLS_FIND_INPUT_LABEL,placeholder:NLS_FIND_INPUT_PLACEHOLDER,appendCaseSensitiveLabel:this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),validation:value=>{if(0===value.length||!this._findInput.getRegex())return null;try{
// use `g` and `u` which are also used by the TextModel search
return new RegExp(value,"gu"),null}catch(e){return{content:e.message}}},flexibleHeight:flexibleHeight,flexibleWidth:flexibleWidth,flexibleMaxHeight:118,showHistoryHint:()=>(0,historyWidgetKeybindingHint/* showHistoryKeybindingHint */.u)(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((e=>this._onFindInputKeyDown(e)))),this._register(this._findInput.inputBox.onDidChange((()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((e=>{e.equals(1026/* Tab */)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((e=>{e.equals(2/* Tab */)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((e=>{this._tryUpdateHeight()&&this._showViewZone()}))),platform/* isLinux */.IJ&&this._register(this._findInput.onMouseDown((e=>this._onFindInputMouseDown(e)))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),
// Previous button
this._prevBtn=this._register(new SimpleButton({label:NLS_PREVIOUS_MATCH_BTN_LABEL+this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),icon:findPreviousMatchIcon,onTrigger:()=>{this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(void 0,errors/* onUnexpectedError */.dL)}})),
// Next button
this._nextBtn=this._register(new SimpleButton({label:NLS_NEXT_MATCH_BTN_LABEL+this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),icon:findNextMatchIcon,onTrigger:()=>{this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(void 0,errors/* onUnexpectedError */.dL)}}));let findPart=document.createElement("div");findPart.className="find-part",findPart.appendChild(this._findInput.domNode);const actionsContainer=document.createElement("div");actionsContainer.className="find-actions",findPart.appendChild(actionsContainer),actionsContainer.appendChild(this._matchesCount),actionsContainer.appendChild(this._prevBtn.domNode),actionsContainer.appendChild(this._nextBtn.domNode),
// Toggle selection button
this._toggleSelectionFind=this._register(new checkbox_checkbox/* Checkbox */.X({icon:findSelectionIcon,title:NLS_TOGGLE_SELECTION_FIND_TITLE+this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange((()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let selections=this._codeEditor.getSelections();selections.map((selection=>(1===selection.endColumn&&selection.endLineNumber>selection.startLineNumber&&(selection=selection.setEndPosition(selection.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber-1))),selection.isEmpty()?null:selection))).filter((element=>!!element)),selections.length&&this._state.change({searchScope:selections},!0)}}else this._state.change({searchScope:null},!0)}))),actionsContainer.appendChild(this._toggleSelectionFind.domNode),
// Close button
this._closeBtn=this._register(new SimpleButton({label:NLS_CLOSE_BTN_LABEL+this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),icon:iconRegistry/* widgetClose */.s_,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2/* Tab */)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),actionsContainer.appendChild(this._closeBtn.domNode),
// Replace input
this._replaceInput=this._register(new contextScopedHistoryWidget/* ContextScopedReplaceInput */.Nq(null,void 0,{label:NLS_REPLACE_INPUT_LABEL,placeholder:NLS_REPLACE_INPUT_PLACEHOLDER,appendPreserveCaseLabel:this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),history:[],flexibleHeight:flexibleHeight,flexibleWidth:flexibleWidth,flexibleMaxHeight:118,showHistoryHint:()=>(0,historyWidgetKeybindingHint/* showHistoryKeybindingHint */.u)(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((e=>this._onReplaceInputKeyDown(e)))),this._register(this._replaceInput.inputBox.onDidChange((()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((e=>{e.equals(2/* Tab */)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())}))),
// Replace one button
this._replaceBtn=this._register(new SimpleButton({label:NLS_REPLACE_BTN_LABEL+this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),icon:findReplaceIcon,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026/* Tab */)&&(this._closeBtn.focus(),e.preventDefault())}})),
// Replace all button
this._replaceAllBtn=this._register(new SimpleButton({label:NLS_REPLACE_ALL_BTN_LABEL+this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),icon:findReplaceAllIcon,onTrigger:()=>{this._controller.replaceAll()}}));let replacePart=document.createElement("div");replacePart.className="replace-part",replacePart.appendChild(this._replaceInput.domNode);const replaceActionsContainer=document.createElement("div");replaceActionsContainer.className="replace-actions",replacePart.appendChild(replaceActionsContainer),replaceActionsContainer.appendChild(this._replaceBtn.domNode),replaceActionsContainer.appendChild(this._replaceAllBtn.domNode),
// Toggle replace button
this._toggleReplaceBtn=this._register(new SimpleButton({label:NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=dom/* getTotalWidth */.w(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),
// Widget
this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),
// We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.
this._domNode.style.width=`${FIND_WIDGET_INITIAL_WIDTH}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(findPart),this._domNode.appendChild(replacePart),this._resizeSash=new sash/* Sash */.g(this._domNode,this,{orientation:0/* VERTICAL */,size:2}),this._resized=!1;let originalWidth=FIND_WIDGET_INITIAL_WIDTH;this._register(this._resizeSash.onDidStart((()=>{originalWidth=dom/* getTotalWidth */.w(this._domNode)}))),this._register(this._resizeSash.onDidChange((evt=>{this._resized=!0;let width=originalWidth+evt.startX-evt.currentX;if(width<FIND_WIDGET_INITIAL_WIDTH)
// narrow down the find widget should be handled by CSS.
return;const maxWidth=parseFloat(dom/* getComputedStyle */.Dx(this._domNode).maxWidth)||0;width>maxWidth||(this._domNode.style.width=`${width}px`,this._isReplaceVisible&&(this._replaceInput.width=dom/* getTotalWidth */.w(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())}))),this._register(this._resizeSash.onDidReset((()=>{
// users double click on the sash
const currentWidth=dom/* getTotalWidth */.w(this._domNode);if(currentWidth<FIND_WIDGET_INITIAL_WIDTH)
// The editor is narrow and the width of the find widget is controlled fully by CSS.
return;let width=FIND_WIDGET_INITIAL_WIDTH;if(!this._resized||currentWidth===FIND_WIDGET_INITIAL_WIDTH){
// 1. never resized before, double click should maximizes it
// 2. users resized it already but its width is the same as default
const layoutInfo=this._codeEditor.getLayoutInfo();width=layoutInfo.width-28-layoutInfo.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${width}px`,this._isReplaceVisible&&(this._replaceInput.width=dom/* getTotalWidth */.w(this._findInput.domNode)),this._findInput.inputBox.layout()})))}updateAccessibilitySupport(){const value=this._codeEditor.getOption(2/* accessibilitySupport */);this._findInput.setFocusInputOnOptionClick(2/* Enabled */!==value)}}FindWidget.ID="editor.contrib.findWidget";class SimpleButton extends widget/* Widget */.${constructor(opts){super(),this._opts=opts;let className="button";this._opts.className&&(className=className+" "+this._opts.className),this._opts.icon&&(className=className+" "+common_themeService/* ThemeIcon */.kS.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=className,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,(e=>{this._opts.onTrigger(),e.preventDefault()})),this.onkeydown(this._domNode,(e=>{if(e.equals(10/* Space */)||e.equals(3/* Enter */))return this._opts.onTrigger(),void e.preventDefault();this._opts.onKeyDown&&this._opts.onKeyDown(e)}))}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(enabled){this._domNode.classList.toggle("disabled",!enabled),this._domNode.setAttribute("aria-disabled",String(!enabled)),this._domNode.tabIndex=enabled?0:-1}setExpanded(expanded){this._domNode.setAttribute("aria-expanded",String(!!expanded)),expanded?(this._domNode.classList.remove(...common_themeService/* ThemeIcon */.kS.asClassNameArray(findCollapsedIcon)),this._domNode.classList.add(...common_themeService/* ThemeIcon */.kS.asClassNameArray(findExpandedIcon))):(this._domNode.classList.remove(...common_themeService/* ThemeIcon */.kS.asClassNameArray(findExpandedIcon)),this._domNode.classList.add(...common_themeService/* ThemeIcon */.kS.asClassNameArray(findCollapsedIcon)))}}
// theming
(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const addBackgroundColorRule=(selector,color)=>{color&&collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`)};addBackgroundColorRule(".findMatch",theme.getColor(colorRegistry/* editorFindMatchHighlight */.MU)),addBackgroundColorRule(".currentFindMatch",theme.getColor(colorRegistry/* editorFindMatch */.ny)),addBackgroundColorRule(".findScope",theme.getColor(colorRegistry/* editorFindRangeHighlight */.jU));const widgetBackground=theme.getColor(colorRegistry/* editorWidgetBackground */.D0);addBackgroundColorRule(".find-widget",widgetBackground);const widgetShadowColor=theme.getColor(colorRegistry/* widgetShadow */.rh);widgetShadowColor&&collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);const findMatchHighlightBorder=theme.getColor(colorRegistry/* editorFindMatchHighlightBorder */.Ei);findMatchHighlightBorder&&collector.addRule(`.monaco-editor .findMatch { border: 1px ${"hc"===theme.type?"dotted":"solid"} ${findMatchHighlightBorder}; box-sizing: border-box; }`);const findMatchBorder=theme.getColor(colorRegistry/* editorFindMatchBorder */.pn);findMatchBorder&&collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);const findRangeHighlightBorder=theme.getColor(colorRegistry/* editorFindRangeHighlightBorder */.gk);findRangeHighlightBorder&&collector.addRule(`.monaco-editor .findScope { border: 1px ${"hc"===theme.type?"dashed":"solid"} ${findRangeHighlightBorder}; }`);const hcBorder=theme.getColor(colorRegistry/* contrastBorder */.lR);hcBorder&&collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);const foreground=theme.getColor(colorRegistry/* editorWidgetForeground */.Hf);foreground&&collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);const error=theme.getColor(colorRegistry/* errorForeground */.Id);error&&collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);const resizeBorderBackground=theme.getColor(colorRegistry/* editorWidgetResizeBorder */.Ng);if(resizeBorderBackground)collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);else{const border=theme.getColor(colorRegistry/* editorWidgetBorder */.D1);border&&collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`)}
// Action bars
const toolbarHoverBackgroundColor=theme.getColor(colorRegistry/* toolbarHoverBackground */.lU);toolbarHoverBackgroundColor&&collector.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\n\t\t}\n\t`);
// This rule is used to override the outline color for synthetic-focus find input.
const focusOutline=theme.getColor(colorRegistry/* focusBorder */.R8);focusOutline&&collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/find/findController.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var findController_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},findController_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},findController_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const SEARCH_STRING_MAX_LENGTH=524288;function getSelectionSearchString(editor,seedSearchStringFromSelection="single",seedSearchStringFromNonEmptySelection=!1){if(!editor.hasModel())return null;const selection=editor.getSelection();
// if selection spans multiple lines, default search string to empty
if("single"===seedSearchStringFromSelection&&selection.startLineNumber===selection.endLineNumber||"multiple"===seedSearchStringFromSelection)if(selection.isEmpty()){const wordAtPosition=editor.getConfiguredWordAtPosition(selection.getStartPosition());if(wordAtPosition&&!1===seedSearchStringFromNonEmptySelection)return wordAtPosition.word}else if(editor.getModel().getValueLengthInRange(selection)<SEARCH_STRING_MAX_LENGTH)return editor.getModel().getValueInRange(selection);return null}let CommonFindController=class CommonFindController extends lifecycle/* Disposable */.JT{constructor(editor,contextKeyService,storageService,clipboardService){super(),this._editor=editor,this._findWidgetVisible=CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService),this._contextKeyService=contextKeyService,this._storageService=storageService,this._clipboardService=clipboardService,this._updateHistoryDelayer=new common_async/* Delayer */.vp(500),this._state=this._register(new FindReplaceState),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._model=null,this._register(this._editor.onDidChangeModel((()=>{let shouldRestartFind=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1/* WORKSPACE */,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1/* WORKSPACE */,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1/* WORKSPACE */,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1/* WORKSPACE */,!1)},!1),shouldRestartFind&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0/* NoFocusChange */,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35/* find */).loop})})))}get editor(){return this._editor}static get(editor){return editor.getContribution(CommonFindController.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1/* WORKSPACE */,0/* USER */),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1/* WORKSPACE */,0/* USER */),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1/* WORKSPACE */,0/* USER */),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1/* WORKSPACE */,0/* USER */)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1/* WORKSPACE */,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1/* WORKSPACE */,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1/* WORKSPACE */,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1/* WORKSPACE */,this._state.preserveCase)},!1)}isFindInputFocused(){return!!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let selections=this._editor.getSelections();selections.map((selection=>(1===selection.endColumn&&selection.endLineNumber>selection.startLineNumber&&(selection=selection.setEndPosition(selection.endLineNumber-1,this._editor.getModel().getLineMaxColumn(selection.endLineNumber-1))),selection.isEmpty()?null:selection))).filter((element=>!!element)),selections.length&&this._state.change({searchScope:selections},!0)}}setSearchString(searchString){this._state.isRegex&&(searchString=strings/* escapeRegExpCharacters */.ec(searchString)),this._state.change({searchString:searchString},!1)}highlightFindOptions(ignoreWhenVisible=!1){
// overwritten in subclass
}_start(opts){return findController_awaiter(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())
// cannot do anything with an editor that doesn't have a model...
return;let stateChanges={isRevealed:!0};if("single"===opts.seedSearchStringFromSelection){let selectionSearchString=getSelectionSearchString(this._editor,opts.seedSearchStringFromSelection,opts.seedSearchStringFromNonEmptySelection);selectionSearchString&&(this._state.isRegex?stateChanges.searchString=strings/* escapeRegExpCharacters */.ec(selectionSearchString):stateChanges.searchString=selectionSearchString)}else if("multiple"===opts.seedSearchStringFromSelection&&!opts.updateSearchScope){let selectionSearchString=getSelectionSearchString(this._editor,opts.seedSearchStringFromSelection);selectionSearchString&&(stateChanges.searchString=selectionSearchString)}if(!stateChanges.searchString&&opts.seedSearchStringFromGlobalClipboard){let selectionSearchString=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())
// the editor has lost its model in the meantime
return;selectionSearchString&&(stateChanges.searchString=selectionSearchString)}
// Overwrite isReplaceRevealed
if(opts.forceRevealReplace?stateChanges.isReplaceRevealed=!0:this._findWidgetVisible.get()||(stateChanges.isReplaceRevealed=!1),opts.updateSearchScope){let currentSelections=this._editor.getSelections();currentSelections.some((selection=>!selection.isEmpty()))&&(stateChanges.searchScope=currentSelections)}stateChanges.loop=opts.loop,this._state.change(stateChanges,!1),this._model||(this._model=new FindModelBoundToEditorModel(this._editor,this._state))}))}start(opts){return this._start(opts)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return findController_awaiter(this,void 0,void 0,(function*(){return this._editor.getOption(35/* find */).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(text){this._editor.getOption(35/* find */).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&
// intentionally not awaited
this._clipboardService.writeFindText(text)}};CommonFindController.ID="editor.contrib.findController",CommonFindController=findController_decorate([findController_param(1,contextkey/* IContextKeyService */.i6),findController_param(2,storage/* IStorageService */.Uy),findController_param(3,common_clipboardService/* IClipboardService */.p)],CommonFindController);let FindController=class extends CommonFindController{constructor(editor,_contextViewService,_contextKeyService,_keybindingService,_themeService,_notificationService,_storageService,clipboardService){super(editor,_contextKeyService,_storageService,clipboardService),this._contextViewService=_contextViewService,this._keybindingService=_keybindingService,this._themeService=_themeService,this._notificationService=_notificationService,this._widget=null,this._findOptionsWidget=null}_start(opts){const _super=Object.create(null,{_start:{get:()=>super._start}});return findController_awaiter(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const selection=this._editor.getSelection();let updateSearchScope=!1;switch(this._editor.getOption(35/* find */).autoFindInSelection){case"always":updateSearchScope=!0;break;case"never":updateSearchScope=!1;break;case"multiline":const isSelectionMultipleLine=!!selection&&selection.startLineNumber!==selection.endLineNumber;updateSearchScope=isSelectionMultipleLine;break;default:break}opts.updateSearchScope=updateSearchScope,yield _super._start.call(this,opts),this._widget&&(2/* FocusReplaceInput */===opts.shouldFocus?this._widget.focusReplaceInput():1/* FocusFindInput */===opts.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(ignoreWhenVisible=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!ignoreWhenVisible?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new FindWidget(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new FindOptionsWidget(this._editor,this._state,this._keybindingService,this._themeService))}};FindController=findController_decorate([findController_param(1,contextView/* IContextViewService */.u),findController_param(2,contextkey/* IContextKeyService */.i6),findController_param(3,keybinding/* IKeybindingService */.d),findController_param(4,common_themeService/* IThemeService */.XE),findController_param(5,notification/* INotificationService */.lT),findController_param(6,storage/* IStorageService */.Uy),findController_param(7,common_clipboardService/* IClipboardService */.p)],FindController);const StartFindAction=(0,editorExtensions/* registerMultiEditorAction */.rn)(new editorExtensions/* MultiEditorAction */.jY({id:FIND_IDS.StartFindAction,label:nls/* localize */.N("startFindAction","Find"),alias:"Find",precondition:contextkey/* ContextKeyExpr */.Ao.or(editorContextKeys/* EditorContextKeys */.u.focus,contextkey/* ContextKeyExpr */.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084/* KeyF */,weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarEditMenu,group:"3_find",title:nls/* localize */.N({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));StartFindAction.addImplementation(0,((accessor,editor,args)=>{const controller=CommonFindController.get(editor);return!!controller&&controller.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==editor.getOption(35/* find */).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===editor.getOption(35/* find */).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:editor.getOption(35/* find */).globalFindClipboard,shouldFocus:1/* FocusFindInput */,shouldAnimate:!0,updateSearchScope:!1,loop:editor.getOption(35/* find */).loop})}));class StartFindWithSelectionAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:FIND_IDS.StartFindWithSelection,label:nls/* localize */.N("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083/* KeyE */},weight:100/* EditorContrib */}})}run(accessor,editor){return findController_awaiter(this,void 0,void 0,(function*(){let controller=CommonFindController.get(editor);controller&&(yield controller.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0/* NoFocusChange */,shouldAnimate:!0,updateSearchScope:!1,loop:editor.getOption(35/* find */).loop}),controller.setGlobalBufferTerm(controller.getState().searchString))}))}}class MatchFindAction extends editorExtensions/* EditorAction */.R6{run(accessor,editor){return findController_awaiter(this,void 0,void 0,(function*(){let controller=CommonFindController.get(editor);controller&&!this._run(controller)&&(yield controller.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===controller.getState().searchString.length&&"never"!==editor.getOption(35/* find */).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===editor.getOption(35/* find */).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0/* NoFocusChange */,shouldAnimate:!0,updateSearchScope:!1,loop:editor.getOption(35/* find */).loop}),this._run(controller))}))}}class NextMatchFindAction extends MatchFindAction{constructor(){super({id:FIND_IDS.NextMatchFindAction,label:nls/* localize */.N("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:61/* F3 */,mac:{primary:2085/* KeyG */,secondary:[61/* F3 */]},weight:100/* EditorContrib */},{kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.focus,CONTEXT_FIND_INPUT_FOCUSED),primary:3/* Enter */,weight:100/* EditorContrib */}]})}_run(controller){const result=controller.moveToNextMatch();return!!result&&(controller.editor.pushUndoStop(),!0)}}class PreviousMatchFindAction extends MatchFindAction{constructor(){super({id:FIND_IDS.PreviousMatchFindAction,label:nls/* localize */.N("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:1085/* F3 */,mac:{primary:3109/* KeyG */,secondary:[1085/* F3 */]},weight:100/* EditorContrib */},{kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.focus,CONTEXT_FIND_INPUT_FOCUSED),primary:1027/* Enter */,weight:100/* EditorContrib */}]})}_run(controller){return controller.moveToPrevMatch()}}class SelectionMatchFindAction extends editorExtensions/* EditorAction */.R6{run(accessor,editor){return findController_awaiter(this,void 0,void 0,(function*(){let controller=CommonFindController.get(editor);if(!controller)return;const seedSearchStringFromNonEmptySelection="selection"===editor.getOption(35/* find */).seedSearchStringFromSelection;let selectionSearchString=null;"never"!==editor.getOption(35/* find */).seedSearchStringFromSelection&&(selectionSearchString=getSelectionSearchString(editor,"single",seedSearchStringFromNonEmptySelection)),selectionSearchString&&controller.setSearchString(selectionSearchString),this._run(controller)||(yield controller.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==editor.getOption(35/* find */).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:seedSearchStringFromNonEmptySelection,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0/* NoFocusChange */,shouldAnimate:!0,updateSearchScope:!1,loop:editor.getOption(35/* find */).loop}),this._run(controller))}))}}class NextSelectionMatchFindAction extends SelectionMatchFindAction{constructor(){super({id:FIND_IDS.NextSelectionMatchFindAction,label:nls/* localize */.N("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:2109/* F3 */,weight:100/* EditorContrib */}})}_run(controller){return controller.moveToNextMatch()}}class PreviousSelectionMatchFindAction extends SelectionMatchFindAction{constructor(){super({id:FIND_IDS.PreviousSelectionMatchFindAction,label:nls/* localize */.N("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:3133/* F3 */,weight:100/* EditorContrib */}})}_run(controller){return controller.moveToPrevMatch()}}const StartFindReplaceAction=(0,editorExtensions/* registerMultiEditorAction */.rn)(new editorExtensions/* MultiEditorAction */.jY({id:FIND_IDS.StartFindReplaceAction,label:nls/* localize */.N("startReplace","Replace"),alias:"Replace",precondition:contextkey/* ContextKeyExpr */.Ao.or(editorContextKeys/* EditorContextKeys */.u.focus,contextkey/* ContextKeyExpr */.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086/* KeyH */,mac:{primary:2596/* KeyF */},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarEditMenu,group:"3_find",title:nls/* localize */.N({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));StartFindReplaceAction.addImplementation(0,((accessor,editor,args)=>{if(!editor.hasModel()||editor.getOption(80/* readOnly */))return!1;const controller=CommonFindController.get(editor);if(!controller)return!1;const currentSelection=editor.getSelection(),findInputFocused=controller.isFindInputFocused(),seedSearchStringFromSelection=!currentSelection.isEmpty()&&currentSelection.startLineNumber===currentSelection.endLineNumber&&"never"!==editor.getOption(35/* find */).seedSearchStringFromSelection&&!findInputFocused,shouldFocus=findInputFocused||seedSearchStringFromSelection?2/* FocusReplaceInput */:1/* FocusFindInput */;return controller.start({forceRevealReplace:!0,seedSearchStringFromSelection:seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===editor.getOption(35/* find */).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==editor.getOption(35/* find */).seedSearchStringFromSelection,shouldFocus:shouldFocus,shouldAnimate:!0,updateSearchScope:!1,loop:editor.getOption(35/* find */).loop})})),(0,editorExtensions/* registerEditorContribution */._K)(CommonFindController.ID,FindController),(0,editorExtensions/* registerEditorAction */.Qr)(StartFindWithSelectionAction),(0,editorExtensions/* registerEditorAction */.Qr)(NextMatchFindAction),(0,editorExtensions/* registerEditorAction */.Qr)(PreviousMatchFindAction),(0,editorExtensions/* registerEditorAction */.Qr)(NextSelectionMatchFindAction),(0,editorExtensions/* registerEditorAction */.Qr)(PreviousSelectionMatchFindAction);const FindCommand=editorExtensions/* EditorCommand */._l.bindToContribution(CommonFindController.get);(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.CloseFindWidgetCommand,precondition:CONTEXT_FIND_WIDGET_VISIBLE,handler:x=>x.closeFindWidget(),kbOpts:{weight:105,kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.focus,contextkey/* ContextKeyExpr */.Ao.not("isComposing")),primary:9/* Escape */,secondary:[1033/* Escape */]}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ToggleCaseSensitiveCommand,precondition:void 0,handler:x=>x.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:ToggleCaseSensitiveKeybinding.primary,mac:ToggleCaseSensitiveKeybinding.mac,win:ToggleCaseSensitiveKeybinding.win,linux:ToggleCaseSensitiveKeybinding.linux}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ToggleWholeWordCommand,precondition:void 0,handler:x=>x.toggleWholeWords(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:ToggleWholeWordKeybinding.primary,mac:ToggleWholeWordKeybinding.mac,win:ToggleWholeWordKeybinding.win,linux:ToggleWholeWordKeybinding.linux}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ToggleRegexCommand,precondition:void 0,handler:x=>x.toggleRegex(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:ToggleRegexKeybinding.primary,mac:ToggleRegexKeybinding.mac,win:ToggleRegexKeybinding.win,linux:ToggleRegexKeybinding.linux}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ToggleSearchScopeCommand,precondition:void 0,handler:x=>x.toggleSearchScope(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:ToggleSearchScopeKeybinding.primary,mac:ToggleSearchScopeKeybinding.mac,win:ToggleSearchScopeKeybinding.win,linux:ToggleSearchScopeKeybinding.linux}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.TogglePreserveCaseCommand,precondition:void 0,handler:x=>x.togglePreserveCase(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:TogglePreserveCaseKeybinding.primary,mac:TogglePreserveCaseKeybinding.mac,win:TogglePreserveCaseKeybinding.win,linux:TogglePreserveCaseKeybinding.linux}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ReplaceOneAction,precondition:CONTEXT_FIND_WIDGET_VISIBLE,handler:x=>x.replace(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:3094/* Digit1 */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ReplaceOneAction,precondition:CONTEXT_FIND_WIDGET_VISIBLE,handler:x=>x.replace(),kbOpts:{weight:105,kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.focus,CONTEXT_REPLACE_INPUT_FOCUSED),primary:3/* Enter */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ReplaceAllAction,precondition:CONTEXT_FIND_WIDGET_VISIBLE,handler:x=>x.replaceAll(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:2563/* Enter */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.ReplaceAllAction,precondition:CONTEXT_FIND_WIDGET_VISIBLE,handler:x=>x.replaceAll(),kbOpts:{weight:105,kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.focus,CONTEXT_REPLACE_INPUT_FOCUSED),primary:void 0,mac:{primary:2051/* Enter */}}})),(0,editorExtensions/* registerEditorCommand */.fK)(new FindCommand({id:FIND_IDS.SelectAllMatchesAction,precondition:CONTEXT_FIND_WIDGET_VISIBLE,handler:x=>x.selectAllMatches(),kbOpts:{weight:105,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:515/* Enter */}}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/foldingRanges.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const MAX_FOLDING_REGIONS=65535,MAX_LINE_NUMBER=16777215,MASK_INDENT=4278190080;class FoldingRegions{constructor(startIndexes,endIndexes,types){if(startIndexes.length!==endIndexes.length||startIndexes.length>MAX_FOLDING_REGIONS)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=startIndexes,this._endIndexes=endIndexes,this._collapseStates=new Uint32Array(Math.ceil(startIndexes.length/32)),this._types=types,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let parentIndexes=[],isInsideLast=(startLineNumber,endLineNumber)=>{let index=parentIndexes[parentIndexes.length-1];return this.getStartLineNumber(index)<=startLineNumber&&this.getEndLineNumber(index)>=endLineNumber};for(let i=0,len=this._startIndexes.length;i<len;i++){let startLineNumber=this._startIndexes[i],endLineNumber=this._endIndexes[i];if(startLineNumber>MAX_LINE_NUMBER||endLineNumber>MAX_LINE_NUMBER)throw new Error("startLineNumber or endLineNumber must not exceed "+MAX_LINE_NUMBER);while(parentIndexes.length>0&&!isInsideLast(startLineNumber,endLineNumber))parentIndexes.pop();let parentIndex=parentIndexes.length>0?parentIndexes[parentIndexes.length-1]:-1;parentIndexes.push(i),this._startIndexes[i]=startLineNumber+((255&parentIndex)<<24),this._endIndexes[i]=endLineNumber+((65280&parentIndex)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(index){return this._startIndexes[index]&MAX_LINE_NUMBER}getEndLineNumber(index){return this._endIndexes[index]&MAX_LINE_NUMBER}getType(index){return this._types?this._types[index]:void 0}hasTypes(){return!!this._types}isCollapsed(index){let arrayIndex=index/32|0,bit=index%32;return 0!==(this._collapseStates[arrayIndex]&1<<bit)}setCollapsed(index,newState){let arrayIndex=index/32|0,bit=index%32,value=this._collapseStates[arrayIndex];this._collapseStates[arrayIndex]=newState?value|1<<bit:value&~(1<<bit)}setCollapsedAllOfType(type,newState){let hasChanged=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===type&&(this.setCollapsed(i,newState),hasChanged=!0);return hasChanged}toRegion(index){return new FoldingRegion(this,index)}getParentIndex(index){this.ensureParentIndices();let parent=((this._startIndexes[index]&MASK_INDENT)>>>24)+((this._endIndexes[index]&MASK_INDENT)>>>16);return parent===MAX_FOLDING_REGIONS?-1:parent}contains(index,line){return this.getStartLineNumber(index)<=line&&this.getEndLineNumber(index)>=line}findIndex(line){let low=0,high=this._startIndexes.length;if(0===high)return-1;// no children
while(low<high){let mid=Math.floor((low+high)/2);line<this.getStartLineNumber(mid)?high=mid:low=mid+1}return low-1}findRange(line){let index=this.findIndex(line);if(index>=0){let endLineNumber=this.getEndLineNumber(index);if(endLineNumber>=line)return index;index=this.getParentIndex(index);while(-1!==index){if(this.contains(index,line))return index;index=this.getParentIndex(index)}}return-1}toString(){let res=[];for(let i=0;i<this.length;i++)res[i]=`[${this.isCollapsed(i)?"+":"-"}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;return res.join(", ")}}class FoldingRegion{constructor(ranges,index){this.ranges=ranges,this.index=index}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(range){return range.startLineNumber<=this.startLineNumber&&range.endLineNumber>=this.endLineNumber}containsLine(lineNumber){return this.startLineNumber<=lineNumber&&lineNumber<=this.endLineNumber}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/foldingModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class FoldingModel{constructor(textModel,decorationProvider){this._updateEventEmitter=new common_event/* Emitter */.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=textModel,this._decorationProvider=decorationProvider,this._regions=new FoldingRegions(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(toggledRegions){if(!toggledRegions.length)return;toggledRegions=toggledRegions.sort(((r1,r2)=>r1.regionIndex-r2.regionIndex));const processed={};this._decorationProvider.changeDecorations((accessor=>{let k=0,dirtyRegionEndLine=-1,lastHiddenLine=-1;// index from [0 ... this.regions.length]
// the end of the last hidden lines
const updateDecorationsUntil=index=>{while(k<index){const endLineNumber=this._regions.getEndLineNumber(k),isCollapsed=this._regions.isCollapsed(k);endLineNumber<=dirtyRegionEndLine&&accessor.changeDecorationOptions(this._editorDecorationIds[k],this._decorationProvider.getDecorationOption(isCollapsed,endLineNumber<=lastHiddenLine)),isCollapsed&&endLineNumber>lastHiddenLine&&(lastHiddenLine=endLineNumber),k++}};for(let region of toggledRegions){let index=region.regionIndex,editorDecorationId=this._editorDecorationIds[index];if(editorDecorationId&&!processed[editorDecorationId]){processed[editorDecorationId]=!0,updateDecorationsUntil(index);// update all decorations up to current index using the old dirtyRegionEndLine
let newCollapseState=!this._regions.isCollapsed(index);this._regions.setCollapsed(index,newCollapseState),dirtyRegionEndLine=Math.max(dirtyRegionEndLine,this._regions.getEndLineNumber(index))}}updateDecorationsUntil(this._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:toggledRegions})}update(newRegions,blockedLineNumers=[]){let newEditorDecorations=[],isBlocked=(startLineNumber,endLineNumber)=>{for(let blockedLineNumber of blockedLineNumers)if(startLineNumber<blockedLineNumber&&blockedLineNumber<=endLineNumber)// first line is visible
return!0;return!1},lastHiddenLine=-1,initRange=(index,isCollapsed)=>{const startLineNumber=newRegions.getStartLineNumber(index),endLineNumber=newRegions.getEndLineNumber(index);isCollapsed||(isCollapsed=newRegions.isCollapsed(index)),isCollapsed&&isBlocked(startLineNumber,endLineNumber)&&(isCollapsed=!1),newRegions.setCollapsed(index,isCollapsed);const maxColumn=this._textModel.getLineMaxColumn(startLineNumber),decorationRange={startLineNumber:startLineNumber,startColumn:Math.max(maxColumn-1,1),endLineNumber:startLineNumber,endColumn:maxColumn};newEditorDecorations.push({range:decorationRange,options:this._decorationProvider.getDecorationOption(isCollapsed,endLineNumber<=lastHiddenLine)}),isCollapsed&&endLineNumber>lastHiddenLine&&(lastHiddenLine=endLineNumber)},i=0,nextCollapsed=()=>{while(i<this._regions.length){let isCollapsed=this._regions.isCollapsed(i);if(i++,isCollapsed)return i-1}return-1},k=0,collapsedIndex=nextCollapsed();while(-1!==collapsedIndex&&k<newRegions.length){
// get the latest range
let decRange=this._textModel.getDecorationRange(this._editorDecorationIds[collapsedIndex]);if(decRange){let collapsedStartLineNumber=decRange.startLineNumber;if(decRange.startColumn===Math.max(decRange.endColumn-1,1)&&this._textModel.getLineMaxColumn(collapsedStartLineNumber)===decRange.endColumn)// test that the decoration is still covering the full line else it got deleted
while(k<newRegions.length){let startLineNumber=newRegions.getStartLineNumber(k);if(!(collapsedStartLineNumber>=startLineNumber))break;initRange(k,collapsedStartLineNumber===startLineNumber),k++}}collapsedIndex=nextCollapsed()}while(k<newRegions.length)initRange(k,!1),k++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,newEditorDecorations),this._regions=newRegions,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}
/**
     * Collapse state memento, for persistence only
     */getMemento(){let collapsedRanges=[];for(let i=0;i<this._regions.length;i++)if(this._regions.isCollapsed(i)){let range=this._textModel.getDecorationRange(this._editorDecorationIds[i]);if(range){let startLineNumber=range.startLineNumber,endLineNumber=range.endLineNumber+this._regions.getEndLineNumber(i)-this._regions.getStartLineNumber(i);collapsedRanges.push({startLineNumber:startLineNumber,endLineNumber:endLineNumber})}}if(collapsedRanges.length>0)return collapsedRanges}
/**
     * Apply persisted state, for persistence only
     */applyMemento(state){if(!Array.isArray(state))return;let toToogle=[];for(let range of state){let region=this.getRegionAtLine(range.startLineNumber);region&&!region.isCollapsed&&toToogle.push(region)}this.toggleCollapseState(toToogle)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(lineNumber,filter){let result=[];if(this._regions){let index=this._regions.findRange(lineNumber),level=1;while(index>=0){let current=this._regions.toRegion(index);filter&&!filter(current,level)||result.push(current),level++,index=current.parentIndex}}return result}getRegionAtLine(lineNumber){if(this._regions){let index=this._regions.findRange(lineNumber);if(index>=0)return this._regions.toRegion(index)}return null}getRegionsInside(region,filter){let result=[],index=region?region.regionIndex+1:0,endLineNumber=region?region.endLineNumber:Number.MAX_VALUE;if(filter&&2===filter.length){const levelStack=[];for(let i=index,len=this._regions.length;i<len;i++){let current=this._regions.toRegion(i);if(!(this._regions.getStartLineNumber(i)<endLineNumber))break;while(levelStack.length>0&&!current.containedBy(levelStack[levelStack.length-1]))levelStack.pop();levelStack.push(current),filter(current,levelStack.length)&&result.push(current)}}else for(let i=index,len=this._regions.length;i<len;i++){let current=this._regions.toRegion(i);if(!(this._regions.getStartLineNumber(i)<endLineNumber))break;filter&&!filter(current)||result.push(current)}return result}}
/**
 * Collapse or expand the regions at the given locations
 * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.
 * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.
 */function toggleCollapseState(foldingModel,levels,lineNumbers){let toToggle=[];for(let lineNumber of lineNumbers){let region=foldingModel.getRegionAtLine(lineNumber);if(region){const doCollapse=!region.isCollapsed;if(toToggle.push(region),levels>1){let regionsInside=foldingModel.getRegionsInside(region,((r,level)=>r.isCollapsed!==doCollapse&&level<levels));toToggle.push(...regionsInside)}}}foldingModel.toggleCollapseState(toToggle)}
/**
 * Collapse or expand the regions at the given locations including all children.
 * @param doCollapse Whether to collapse or expand
 * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.
 * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.
 */function setCollapseStateLevelsDown(foldingModel,doCollapse,levels=Number.MAX_VALUE,lineNumbers){let toToggle=[];if(lineNumbers&&lineNumbers.length>0)for(let lineNumber of lineNumbers){let region=foldingModel.getRegionAtLine(lineNumber);if(region&&(region.isCollapsed!==doCollapse&&toToggle.push(region),levels>1)){let regionsInside=foldingModel.getRegionsInside(region,((r,level)=>r.isCollapsed!==doCollapse&&level<levels));toToggle.push(...regionsInside)}}else{let regionsInside=foldingModel.getRegionsInside(null,((r,level)=>r.isCollapsed!==doCollapse&&level<levels));toToggle.push(...regionsInside)}foldingModel.toggleCollapseState(toToggle)}
/**
 * Collapse or expand the regions at the given locations including all parents.
 * @param doCollapse Whether to collapse or expand
 * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.
 * @param lineNumbers the location of the regions to collapse or expand.
 */function setCollapseStateLevelsUp(foldingModel,doCollapse,levels,lineNumbers){let toToggle=[];for(let lineNumber of lineNumbers){let regions=foldingModel.getAllRegionsAtLine(lineNumber,((region,level)=>region.isCollapsed!==doCollapse&&level<=levels));toToggle.push(...regions)}foldingModel.toggleCollapseState(toToggle)}
/**
 * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.
 * @param doCollapse Whether to collapse or expand
 * @param lineNumbers the location of the regions to collapse or expand.
 */function setCollapseStateUp(foldingModel,doCollapse,lineNumbers){let toToggle=[];for(let lineNumber of lineNumbers){let regions=foldingModel.getAllRegionsAtLine(lineNumber,(region=>region.isCollapsed!==doCollapse));regions.length>0&&toToggle.push(regions[0])}foldingModel.toggleCollapseState(toToggle)}
/**
 * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.
 * @param foldLevel level. Level == 1 is the top level
 * @param doCollapse Whether to collapse or expand
*/function setCollapseStateAtLevel(foldingModel,foldLevel,doCollapse,blockedLineNumbers){let filter=(region,level)=>level===foldLevel&&region.isCollapsed!==doCollapse&&!blockedLineNumbers.some((line=>region.containsLine(line))),toToggle=foldingModel.getRegionsInside(null,filter);foldingModel.toggleCollapseState(toToggle)}
/**
 * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.
 * @param doCollapse Whether to collapse or expand
 * @param blockedLineNumbers the location of regions to not collapse or expand
 */function setCollapseStateForRest(foldingModel,doCollapse,blockedLineNumbers){let filteredRegions=[];for(let lineNumber of blockedLineNumbers)filteredRegions.push(foldingModel.getAllRegionsAtLine(lineNumber,void 0)[0]);let filter=region=>filteredRegions.every((filteredRegion=>!filteredRegion.containedBy(region)&&!region.containedBy(filteredRegion)))&&region.isCollapsed!==doCollapse,toToggle=foldingModel.getRegionsInside(null,filter);foldingModel.toggleCollapseState(toToggle)}
/**
 * Folds all regions for which the lines start with a given regex
 * @param foldingModel the folding model
 */function setCollapseStateForMatchingLines(foldingModel,regExp,doCollapse){let editorModel=foldingModel.textModel,regions=foldingModel.regions,toToggle=[];for(let i=regions.length-1;i>=0;i--)if(doCollapse!==regions.isCollapsed(i)){let startLineNumber=regions.getStartLineNumber(i);regExp.test(editorModel.getLineContent(startLineNumber))&&toToggle.push(regions.toRegion(i))}foldingModel.toggleCollapseState(toToggle)}
/**
 * Folds all regions of the given type
 * @param foldingModel the folding model
 */function setCollapseStateForType(foldingModel,type,doCollapse){let regions=foldingModel.regions,toToggle=[];for(let i=regions.length-1;i>=0;i--)doCollapse!==regions.isCollapsed(i)&&type===regions.getType(i)&&toToggle.push(regions.toRegion(i));foldingModel.toggleCollapseState(toToggle)}
/**
 * Get line to go to for parent fold of current line
 * @param lineNumber the current line number
 * @param foldingModel the folding model
 *
 * @return Parent fold start line
 */function getParentFoldLine(lineNumber,foldingModel){let startLineNumber=null,foldingRegion=foldingModel.getRegionAtLine(lineNumber);if(null!==foldingRegion&&(startLineNumber=foldingRegion.startLineNumber,lineNumber===startLineNumber)){let parentFoldingIdx=foldingRegion.parentIndex;startLineNumber=-1!==parentFoldingIdx?foldingModel.regions.getStartLineNumber(parentFoldingIdx):null}return startLineNumber}
/**
 * Get line to go to for previous fold at the same level of current line
 * @param lineNumber the current line number
 * @param foldingModel the folding model
 *
 * @return Previous fold start line
 */function getPreviousFoldLine(lineNumber,foldingModel){let foldingRegion=foldingModel.getRegionAtLine(lineNumber);
// If on the folding range start line, go to previous sibling.
if(null!==foldingRegion&&foldingRegion.startLineNumber===lineNumber){
// If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.
if(lineNumber!==foldingRegion.startLineNumber)return foldingRegion.startLineNumber;{
// Find min line number to stay within parent.
let expectedParentIndex=foldingRegion.parentIndex,minLineNumber=0;-1!==expectedParentIndex&&(minLineNumber=foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex));
// Find fold at same level.
while(null!==foldingRegion){if(!(foldingRegion.regionIndex>0))return null;
// Keep at same level.
if(foldingRegion=foldingModel.regions.toRegion(foldingRegion.regionIndex-1),foldingRegion.startLineNumber<=minLineNumber)return null;if(foldingRegion.parentIndex===expectedParentIndex)return foldingRegion.startLineNumber}}}else
// Go to last fold that's before the current line.
if(foldingModel.regions.length>0){foldingRegion=foldingModel.regions.toRegion(foldingModel.regions.length-1);while(null!==foldingRegion){
// Found fold before current line.
if(foldingRegion.startLineNumber<lineNumber)return foldingRegion.startLineNumber;foldingRegion=foldingRegion.regionIndex>0?foldingModel.regions.toRegion(foldingRegion.regionIndex-1):null}}return null}
/**
 * Get line to go to next fold at the same level of current line
 * @param lineNumber the current line number
 * @param foldingModel the folding model
 *
 * @return Next fold start line
 */function getNextFoldLine(lineNumber,foldingModel){let foldingRegion=foldingModel.getRegionAtLine(lineNumber);
// If on the folding range start line, go to next sibling.
if(null!==foldingRegion&&foldingRegion.startLineNumber===lineNumber){
// Find max line number to stay within parent.
let expectedParentIndex=foldingRegion.parentIndex,maxLineNumber=0;if(-1!==expectedParentIndex)maxLineNumber=foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);else{if(0===foldingModel.regions.length)return null;
// Find fold at same level.
maxLineNumber=foldingModel.regions.getEndLineNumber(foldingModel.regions.length-1)}while(null!==foldingRegion){if(!(foldingRegion.regionIndex<foldingModel.regions.length))return null;
// Keep at same level.
if(foldingRegion=foldingModel.regions.toRegion(foldingRegion.regionIndex+1),foldingRegion.startLineNumber>=maxLineNumber)return null;if(foldingRegion.parentIndex===expectedParentIndex)return foldingRegion.startLineNumber}}else
// Go to first fold that's after the current line.
if(foldingModel.regions.length>0){foldingRegion=foldingModel.regions.toRegion(0);while(null!==foldingRegion){
// Found fold after current line.
if(foldingRegion.startLineNumber>lineNumber)return foldingRegion.startLineNumber;foldingRegion=foldingRegion.regionIndex<foldingModel.regions.length?foldingModel.regions.toRegion(foldingRegion.regionIndex+1):null}}return null}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/hiddenRangeModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class HiddenRangeModel{constructor(model){this._updateEventEmitter=new common_event/* Emitter */.Q5,this._foldingModel=model,this._foldingModelListener=model.onDidChange((_=>this.updateHiddenRanges())),this._hiddenRanges=[],model.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let updateHiddenAreas=!1,newHiddenAreas=[],i=0,k=0,lastCollapsedStart=Number.MAX_VALUE,lastCollapsedEnd=-1,ranges=this._foldingModel.regions;for(;i<ranges.length;i++){if(!ranges.isCollapsed(i))continue;let startLineNumber=ranges.getStartLineNumber(i)+1,endLineNumber=ranges.getEndLineNumber(i);// the first line is not hidden
lastCollapsedStart<=startLineNumber&&endLineNumber<=lastCollapsedEnd||(!updateHiddenAreas&&k<this._hiddenRanges.length&&this._hiddenRanges[k].startLineNumber===startLineNumber&&this._hiddenRanges[k].endLineNumber===endLineNumber?(
// reuse the old ranges
newHiddenAreas.push(this._hiddenRanges[k]),k++):(updateHiddenAreas=!0,newHiddenAreas.push(new core_range/* Range */.e(startLineNumber,1,endLineNumber,1))),lastCollapsedStart=startLineNumber,lastCollapsedEnd=endLineNumber)}(updateHiddenAreas||k<this._hiddenRanges.length)&&this.applyHiddenRanges(newHiddenAreas)}applyMemento(state){if(!Array.isArray(state)||0===state.length)return!1;let hiddenRanges=[];for(let r of state){if(!r.startLineNumber||!r.endLineNumber)return!1;hiddenRanges.push(new core_range/* Range */.e(r.startLineNumber+1,1,r.endLineNumber,1))}return this.applyHiddenRanges(hiddenRanges),!0}
/**
     * Collapse state memento, for persistence only, only used if folding model is not yet initialized
     */getMemento(){return this._hiddenRanges.map((r=>({startLineNumber:r.startLineNumber-1,endLineNumber:r.endLineNumber})))}applyHiddenRanges(newHiddenAreas){this._hiddenRanges=newHiddenAreas,this._updateEventEmitter.fire(newHiddenAreas)}hasRanges(){return this._hiddenRanges.length>0}isHidden(line){return null!==findRange(this._hiddenRanges,line)}adjustSelections(selections){let hasChanges=!1,editorModel=this._foldingModel.textModel,lastRange=null,adjustLine=line=>(lastRange&&isInside(line,lastRange)||(lastRange=findRange(this._hiddenRanges,line)),lastRange?lastRange.startLineNumber-1:null);for(let i=0,len=selections.length;i<len;i++){let selection=selections[i],adjustedStartLine=adjustLine(selection.startLineNumber);adjustedStartLine&&(selection=selection.setStartPosition(adjustedStartLine,editorModel.getLineMaxColumn(adjustedStartLine)),hasChanges=!0);let adjustedEndLine=adjustLine(selection.endLineNumber);adjustedEndLine&&(selection=selection.setEndPosition(adjustedEndLine,editorModel.getLineMaxColumn(adjustedEndLine)),hasChanges=!0),selections[i]=selection}return hasChanges}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function isInside(line,range){return line>=range.startLineNumber&&line<=range.endLineNumber}function findRange(ranges,line){let i=(0,arrays/* findFirstInSorted */.lG)(ranges,(r=>line<r.startLineNumber))-1;return i>=0&&ranges[i].endLineNumber>=line?ranges[i]:null}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/indentRangeProvider.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const MAX_FOLDING_REGIONS_FOR_INDENT_LIMIT=5e3,ID_INDENT_PROVIDER="indent";class IndentRangeProvider{constructor(editorModel){this.editorModel=editorModel,this.id=ID_INDENT_PROVIDER}dispose(){}compute(cancelationToken){let foldingRules=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getFoldingRules(this.editorModel.getLanguageId()),offSide=foldingRules&&!!foldingRules.offSide,markers=foldingRules&&foldingRules.markers;return Promise.resolve(computeRanges(this.editorModel,offSide,markers))}}
// public only for testing
class RangesCollector{constructor(foldingRangesLimit){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=foldingRangesLimit}insertFirst(startLineNumber,endLineNumber,indent){if(startLineNumber>MAX_LINE_NUMBER||endLineNumber>MAX_LINE_NUMBER)return;let index=this._length;this._startIndexes[index]=startLineNumber,this._endIndexes[index]=endLineNumber,this._length++,indent<1e3&&(this._indentOccurrences[indent]=(this._indentOccurrences[indent]||0)+1)}toIndentRanges(model){if(this._length<=this._foldingRangesLimit){
// reverse and create arrays of the exact length
let startIndexes=new Uint32Array(this._length),endIndexes=new Uint32Array(this._length);for(let i=this._length-1,k=0;i>=0;i--,k++)startIndexes[k]=this._startIndexes[i],endIndexes[k]=this._endIndexes[i];return new FoldingRegions(startIndexes,endIndexes)}{let entries=0,maxIndent=this._indentOccurrences.length;for(let i=0;i<this._indentOccurrences.length;i++){let n=this._indentOccurrences[i];if(n){if(n+entries>this._foldingRangesLimit){maxIndent=i;break}entries+=n}}const tabSize=model.getOptions().tabSize;
// reverse and create arrays of the exact length
let startIndexes=new Uint32Array(this._foldingRangesLimit),endIndexes=new Uint32Array(this._foldingRangesLimit);for(let i=this._length-1,k=0;i>=0;i--){let startIndex=this._startIndexes[i],lineContent=model.getLineContent(startIndex),indent=textModel/* TextModel */.yO.computeIndentLevel(lineContent,tabSize);(indent<maxIndent||indent===maxIndent&&entries++<this._foldingRangesLimit)&&(startIndexes[k]=startIndex,endIndexes[k]=this._endIndexes[i],k++)}return new FoldingRegions(startIndexes,endIndexes)}}}function computeRanges(model,offSide,markers,foldingRangesLimit=MAX_FOLDING_REGIONS_FOR_INDENT_LIMIT){const tabSize=model.getOptions().tabSize;let pattern,result=new RangesCollector(foldingRangesLimit);markers&&(pattern=new RegExp(`(${markers.start.source})|(?:${markers.end.source})`));let previousRegions=[],line=model.getLineCount()+1;previousRegions.push({indent:-1,endAbove:line,line:line});// sentinel, to make sure there's at least one entry
for(let line=model.getLineCount();line>0;line--){let m,lineContent=model.getLineContent(line),indent=textModel/* TextModel */.yO.computeIndentLevel(lineContent,tabSize),previous=previousRegions[previousRegions.length-1];if(-1!==indent){if(pattern&&(m=lineContent.match(pattern))){
// folding pattern match
if(!m[1]){// end pattern match
previousRegions.push({indent:-2,endAbove:line,line:line});continue}{// start pattern match
// discard all regions until the folding pattern
let i=previousRegions.length-1;while(i>0&&-2!==previousRegions[i].indent)i--;if(i>0){previousRegions.length=i+1,previous=previousRegions[i],
// new folding range from pattern, includes the end line
result.insertFirst(line,previous.line,indent),previous.line=line,previous.indent=indent,previous.endAbove=line;continue}}}if(previous.indent>indent){
// discard all regions with larger indent
do{previousRegions.pop(),previous=previousRegions[previousRegions.length-1]}while(previous.indent>indent);
// new folding range
let endLineNumber=previous.endAbove-1;endLineNumber-line>=1&&// needs at east size 1
result.insertFirst(line,endLineNumber,indent)}previous.indent===indent?previous.endAbove=line:// previous.indent < indent
// new region with a bigger indent
previousRegions.push({indent:indent,endAbove:line,line:line})}else offSide&&(
// for offSide languages, empty lines are associated to the previous block
// note: the next block is already written to the results, so this only
// impacts the end position of the block before
previous.endAbove=line)}return result.toIndentRanges(model)}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/syntaxRangeProvider.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const syntaxRangeProvider_MAX_FOLDING_REGIONS=5e3,foldingContext={},ID_SYNTAX_PROVIDER="syntax";class SyntaxRangeProvider{constructor(editorModel,providers,handleFoldingRangesChange,limit=syntaxRangeProvider_MAX_FOLDING_REGIONS){this.editorModel=editorModel,this.providers=providers,this.limit=limit,this.id=ID_SYNTAX_PROVIDER;for(const provider of providers)"function"===typeof provider.onDidChange&&(this.disposables||(this.disposables=new lifecycle/* DisposableStore */.SL),this.disposables.add(provider.onDidChange(handleFoldingRangesChange)))}compute(cancellationToken){return collectSyntaxRanges(this.providers,this.editorModel,cancellationToken).then((ranges=>{if(ranges){let res=sanitizeRanges(ranges,this.limit);return res}return null}))}dispose(){var _a;null===(_a=this.disposables)||void 0===_a||_a.dispose()}}function collectSyntaxRanges(providers,model,cancellationToken){let rangeData=null,promises=providers.map(((provider,i)=>Promise.resolve(provider.provideFoldingRanges(model,foldingContext,cancellationToken)).then((ranges=>{if(!cancellationToken.isCancellationRequested&&Array.isArray(ranges)){Array.isArray(rangeData)||(rangeData=[]);let nLines=model.getLineCount();for(let r of ranges)r.start>0&&r.end>r.start&&r.end<=nLines&&rangeData.push({start:r.start,end:r.end,rank:i,kind:r.kind})}}),errors/* onUnexpectedExternalError */.Cp)));return Promise.all(promises).then((_=>rangeData))}class syntaxRangeProvider_RangesCollector{constructor(foldingRangesLimit){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=foldingRangesLimit}add(startLineNumber,endLineNumber,type,nestingLevel){if(startLineNumber>MAX_LINE_NUMBER||endLineNumber>MAX_LINE_NUMBER)return;let index=this._length;this._startIndexes[index]=startLineNumber,this._endIndexes[index]=endLineNumber,this._nestingLevels[index]=nestingLevel,this._types[index]=type,this._length++,nestingLevel<30&&(this._nestingLevelCounts[nestingLevel]=(this._nestingLevelCounts[nestingLevel]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let startIndexes=new Uint32Array(this._length),endIndexes=new Uint32Array(this._length);for(let i=0;i<this._length;i++)startIndexes[i]=this._startIndexes[i],endIndexes[i]=this._endIndexes[i];return new FoldingRegions(startIndexes,endIndexes,this._types)}{let entries=0,maxLevel=this._nestingLevelCounts.length;for(let i=0;i<this._nestingLevelCounts.length;i++){let n=this._nestingLevelCounts[i];if(n){if(n+entries>this._foldingRangesLimit){maxLevel=i;break}entries+=n}}let startIndexes=new Uint32Array(this._foldingRangesLimit),endIndexes=new Uint32Array(this._foldingRangesLimit),types=[];for(let i=0,k=0;i<this._length;i++){let level=this._nestingLevels[i];(level<maxLevel||level===maxLevel&&entries++<this._foldingRangesLimit)&&(startIndexes[k]=this._startIndexes[i],endIndexes[k]=this._endIndexes[i],types[k]=this._types[i],k++)}return new FoldingRegions(startIndexes,endIndexes,types)}}}function sanitizeRanges(rangeData,limit){let top,sorted=rangeData.sort(((d1,d2)=>{let diff=d1.start-d2.start;return 0===diff&&(diff=d1.rank-d2.rank),diff})),collector=new syntaxRangeProvider_RangesCollector(limit),previous=[];for(let entry of sorted)if(top){if(entry.start>top.start)if(entry.end<=top.end)previous.push(top),top=entry,collector.add(entry.start,entry.end,entry.kind&&entry.kind.value,previous.length);else{if(entry.start>top.end){do{top=previous.pop()}while(top&&entry.start>top.end);top&&previous.push(top),top=entry}collector.add(entry.start,entry.end,entry.kind&&entry.kind.value,previous.length)}}else top=entry,collector.add(entry.start,entry.end,entry.kind&&entry.kind.value,previous.length);return collector.toIndentRanges()}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/intializingRangeProvider.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const ID_INIT_PROVIDER="init";class InitializingRangeProvider{constructor(editorModel,initialRanges,onTimeout,timeoutTime){if(this.editorModel=editorModel,this.id=ID_INIT_PROVIDER,initialRanges.length){let toDecorationRange=range=>({range:{startLineNumber:range.startLineNumber,startColumn:0,endLineNumber:range.endLineNumber,endColumn:editorModel.getLineLength(range.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1/* NeverGrowsWhenTypingAtEdges */}});this.decorationIds=editorModel.deltaDecorations([],initialRanges.map(toDecorationRange)),this.timeout=setTimeout(onTimeout,timeoutTime)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"===typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(cancelationToken){let foldingRangeData=[];if(this.decorationIds)for(let id of this.decorationIds){let range=this.editorModel.getDecorationRange(id);range&&foldingRangeData.push({start:range.startLineNumber,end:range.endLineNumber,rank:1})}return Promise.resolve(sanitizeRanges(foldingRangeData,Number.MAX_VALUE))}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/foldingDecorations.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const foldingExpandedIcon=(0,iconRegistry/* registerIcon */.q5)("folding-expanded",codicons/* Codicon */.lA.chevronDown,(0,nls/* localize */.N)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),foldingCollapsedIcon=(0,iconRegistry/* registerIcon */.q5)("folding-collapsed",codicons/* Codicon */.lA.chevronRight,(0,nls/* localize */.N)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class FoldingDecorationProvider{constructor(editor){this.editor=editor,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(isCollapsed,isHidden){return isHidden?FoldingDecorationProvider.HIDDEN_RANGE_DECORATION:isCollapsed?this.showFoldingHighlights?FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION}deltaDecorations(oldDecorations,newDecorations){return this.editor.deltaDecorations(oldDecorations,newDecorations)}changeDecorations(callback){return this.editor.changeDecorations(callback)}}FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"folding-collapsed-visual-decoration",stickiness:1/* NeverGrowsWhenTypingAtEdges */,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:common_themeService/* ThemeIcon */.kS.asClassName(foldingCollapsedIcon)}),FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1/* NeverGrowsWhenTypingAtEdges */,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:common_themeService/* ThemeIcon */.kS.asClassName(foldingCollapsedIcon)}),FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1/* NeverGrowsWhenTypingAtEdges */,isWholeLine:!0,firstLineDecorationClassName:common_themeService/* ThemeIcon */.kS.asClassName(foldingExpandedIcon)}),FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"folding-expanded-visual-decoration",stickiness:1/* NeverGrowsWhenTypingAtEdges */,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+common_themeService/* ThemeIcon */.kS.asClassName(foldingExpandedIcon)}),FoldingDecorationProvider.HIDDEN_RANGE_DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"folding-hidden-range-decoration",stickiness:1/* NeverGrowsWhenTypingAtEdges */});// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/folding/folding.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var folding_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},folding_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};const CONTEXT_FOLDING_ENABLED=new contextkey/* RawContextKey */.uy("foldingEnabled",!1);let FoldingController=class FoldingController extends lifecycle/* Disposable */.JT{constructor(editor,contextKeyService){super(),this.contextKeyService=contextKeyService,this.localToDispose=this._register(new lifecycle/* DisposableStore */.SL),this.editor=editor;const options=this.editor.getOptions();this._isEnabled=options.get(37/* folding */),this._useFoldingProviders="indentation"!==options.get(38/* foldingStrategy */),this._unfoldOnClickAfterEndOfLine=options.get(41/* unfoldOnClickAfterEndOfLine */),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=options.get(40/* foldingImportsByDefault */),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new FoldingDecorationProvider(editor),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===options.get(98/* showFoldingControls */),this.foldingDecorationProvider.showFoldingHighlights=options.get(39/* foldingHighlight */),this.foldingEnabled=CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel((()=>this.onModelChanged()))),this._register(this.editor.onDidChangeConfiguration((e=>{if(e.hasChanged(37/* folding */)&&(this._isEnabled=this.editor.getOptions().get(37/* folding */),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(98/* showFoldingControls */)||e.hasChanged(39/* foldingHighlight */)){const options=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===options.get(98/* showFoldingControls */),this.foldingDecorationProvider.showFoldingHighlights=options.get(39/* foldingHighlight */),this.onModelContentChanged()}e.hasChanged(38/* foldingStrategy */)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(38/* foldingStrategy */),this.onFoldingStrategyChanged()),e.hasChanged(41/* unfoldOnClickAfterEndOfLine */)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41/* unfoldOnClickAfterEndOfLine */)),e.hasChanged(40/* foldingImportsByDefault */)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40/* foldingImportsByDefault */))}))),this.onModelChanged()}static get(editor){return editor.getContribution(FoldingController.ID)}
/**
     * Store view state.
     */saveViewState(){let model=this.editor.getModel();if(!model||!this._isEnabled||model.isTooLargeForTokenization())return{};if(this.foldingModel){// disposed ?
let collapsedRegions=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),provider=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:collapsedRegions,lineCount:model.getLineCount(),provider:provider,foldedImports:this._currentModelHasFoldedImports}}}
/**
     * Restore view state.
     */restoreViewState(state){let model=this.editor.getModel();if(!model||!this._isEnabled||model.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!state||state.lineCount!==model.getLineCount())return;if(this._currentModelHasFoldedImports=!!state.foldedImports,!state.collapsedRegions)return;state.provider!==ID_SYNTAX_PROVIDER&&state.provider!==ID_INIT_PROVIDER||(this.foldingStateMemento=state);const collapsedRegions=state.collapsedRegions;
// set the hidden ranges right away, before waiting for the folding model.
if(this.hiddenRangeModel.applyMemento(collapsedRegions)){const foldingModel=this.getFoldingModel();foldingModel&&foldingModel.then((foldingModel=>{if(foldingModel){this._restoringViewState=!0;try{foldingModel.applyMemento(collapsedRegions)}finally{this._restoringViewState=!1}}})).then(void 0,errors/* onUnexpectedError */.dL)}}onModelChanged(){this.localToDispose.clear();let model=this.editor.getModel();this._isEnabled&&model&&!model.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new FoldingModel(model,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new HiddenRangeModel(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((hr=>this.onHiddenRangesChanges(hr)))),this.updateScheduler=new common_async/* Delayer */.vp(200),this.cursorChangedScheduler=new common_async/* RunOnceScheduler */.pY((()=>this.revealCursor()),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(modes/* FoldingRangeProviderRegistry */.aC.onDidChange((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((()=>this.onFoldingStrategyChanged()))),// covers model language changes as well
this.localToDispose.add(this.editor.onDidChangeModelContent((()=>this.onModelContentChanged()))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((()=>this.onCursorPositionChanged()))),this.localToDispose.add(this.editor.onMouseDown((e=>this.onEditorMouseDown(e)))),this.localToDispose.add(this.editor.onMouseUp((e=>this.onEditorMouseUp(e)))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(editorModel){if(this.rangeProvider)return this.rangeProvider;// fallback
if(this.rangeProvider=new IndentRangeProvider(editorModel),this._useFoldingProviders&&this.foldingModel){let foldingProviders=modes/* FoldingRangeProviderRegistry */.aC.ordered(this.foldingModel.textModel);if(0===foldingProviders.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){const rangeProvider=this.rangeProvider=new InitializingRangeProvider(editorModel,this.foldingStateMemento.collapsedRegions,(()=>{
// if after 30 the InitializingRangeProvider is still not replaced, force a refresh
this.foldingStateMemento=null,this.onFoldingStrategyChanged()}),3e4);return rangeProvider;// keep memento in case there are still no foldingProviders on the next request.
}foldingProviders.length>0&&(this.rangeProvider=new SyntaxRangeProvider(editorModel,foldingProviders,(()=>this.onModelContentChanged())))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((()=>{const foldingModel=this.foldingModel;if(!foldingModel)// null if editor has been disposed, or folding turned off
return null;const provider=this.getRangeProvider(foldingModel.textModel);let foldingRegionPromise=this.foldingRegionPromise=(0,common_async/* createCancelablePromise */.PG)((token=>provider.compute(token)));return foldingRegionPromise.then((foldingRanges=>{if(foldingRanges&&foldingRegionPromise===this.foldingRegionPromise){// new request or cancelled in the meantime?
let scrollState;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const hasChanges=foldingRanges.setCollapsedAllOfType(modes/* FoldingRangeKind */.AD.Imports.value,!0);hasChanges&&(scrollState=editorState/* StableEditorScrollState */.ZF.capture(this.editor),this._currentModelHasFoldedImports=hasChanges)}
// some cursors might have moved into hidden regions, make sure they are in expanded regions
let selections=this.editor.getSelections(),selectionLineNumbers=selections?selections.map((s=>s.startLineNumber)):[];foldingModel.update(foldingRanges,selectionLineNumbers),scrollState&&scrollState.restore(this.editor)}return foldingModel}))})).then(void 0,(err=>((0,errors/* onUnexpectedError */.dL)(err),null))))}onHiddenRangesChanges(hiddenRanges){if(this.hiddenRangeModel&&hiddenRanges.length&&!this._restoringViewState){let selections=this.editor.getSelections();selections&&this.hiddenRangeModel.adjustSelections(selections)&&this.editor.setSelections(selections)}this.editor.setHiddenAreas(hiddenRanges)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const foldingModel=this.getFoldingModel();foldingModel&&foldingModel.then((foldingModel=>{if(foldingModel){let selections=this.editor.getSelections();if(selections&&selections.length>0){let toToggle=[];for(let selection of selections){let lineNumber=selection.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(lineNumber)&&toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber,(r=>r.isCollapsed&&lineNumber>r.startLineNumber)))}toToggle.length&&(foldingModel.toggleCollapseState(toToggle),this.reveal(selections[0].getPosition()))}}})).then(void 0,errors/* onUnexpectedError */.dL)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const range=e.target.range;let iconClicked=!1;switch(e.target.type){case 4/* GUTTER_LINE_DECORATIONS */:const data=e.target.detail,offsetLeftInGutter=e.target.element.offsetLeft,gutterOffsetX=data.offsetX-offsetLeftInGutter;
// const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;
// TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff
if(gutterOffsetX<5)// the whitespace between the border and the real folding icon border is 5px
return;iconClicked=!0;break;case 7/* CONTENT_EMPTY */:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){const data=e.target.detail;if(!data.isAfterLines)break}return;case 6/* CONTENT_TEXT */:if(this.hiddenRangeModel.hasRanges()){let model=this.editor.getModel();if(model&&range.startColumn===model.getLineMaxColumn(range.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:range.startLineNumber,iconClicked:iconClicked}}onEditorMouseUp(e){const foldingModel=this.getFoldingModel();if(!foldingModel||!this.mouseDownInfo||!e.target)return;let lineNumber=this.mouseDownInfo.lineNumber,iconClicked=this.mouseDownInfo.iconClicked,range=e.target.range;if(range&&range.startLineNumber===lineNumber){if(iconClicked){if(4/* GUTTER_LINE_DECORATIONS */!==e.target.type)return}else{let model=this.editor.getModel();if(!model||range.startColumn!==model.getLineMaxColumn(lineNumber))return}foldingModel.then((foldingModel=>{if(foldingModel){let region=foldingModel.getRegionAtLine(lineNumber);if(region&&region.startLineNumber===lineNumber){let isCollapsed=region.isCollapsed;if(iconClicked||isCollapsed){let surrounding=e.event.altKey,toToggle=[];if(surrounding){let filter=otherRegion=>!otherRegion.containedBy(region)&&!region.containedBy(otherRegion),toMaybeToggle=foldingModel.getRegionsInside(null,filter);for(const r of toMaybeToggle)r.isCollapsed&&toToggle.push(r);
// if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding
0===toToggle.length&&(toToggle=toMaybeToggle)}else{let recursive=e.event.middleButton||e.event.shiftKey;if(recursive)for(const r of foldingModel.getRegionsInside(region))r.isCollapsed===isCollapsed&&toToggle.push(r);
// when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.
!isCollapsed&&recursive&&0!==toToggle.length||toToggle.push(region)}foldingModel.toggleCollapseState(toToggle),this.reveal({lineNumber:lineNumber,column:1})}}}})).then(void 0,errors/* onUnexpectedError */.dL)}}reveal(position){this.editor.revealPositionInCenterIfOutsideViewport(position,0/* Smooth */)}};FoldingController.ID="editor.contrib.folding",FoldingController=folding_decorate([folding_param(1,contextkey/* IContextKeyService */.i6)],FoldingController);class FoldingAction extends editorExtensions/* EditorAction */.R6{runEditorCommand(accessor,editor,args){let foldingController=FoldingController.get(editor);if(!foldingController)return;let foldingModelPromise=foldingController.getFoldingModel();return foldingModelPromise?(this.reportTelemetry(accessor,editor),foldingModelPromise.then((foldingModel=>{if(foldingModel){this.invoke(foldingController,foldingModel,editor,args);const selection=editor.getSelection();selection&&foldingController.reveal(selection.getStartPosition())}}))):void 0}getSelectedLines(editor){let selections=editor.getSelections();return selections?selections.map((s=>s.startLineNumber)):[]}getLineNumbers(args,editor){return args&&args.selectionLines?args.selectionLines.map((l=>l+1)):this.getSelectedLines(editor)}run(_accessor,_editor){}}function foldingArgumentsConstraint(args){if(!types/* isUndefined */.o8(args)){if(!types/* isObject */.Kn(args))return!1;const foldingArgs=args;if(!types/* isUndefined */.o8(foldingArgs.levels)&&!types/* isNumber */.hj(foldingArgs.levels))return!1;if(!types/* isUndefined */.o8(foldingArgs.direction)&&!types/* isString */.HD(foldingArgs.direction))return!1;if(!types/* isUndefined */.o8(foldingArgs.selectionLines)&&(!types/* isArray */.kJ(foldingArgs.selectionLines)||!foldingArgs.selectionLines.every(types/* isNumber */.hj)))return!1}return!0}class UnfoldAction extends FoldingAction{constructor(){super({id:"editor.unfold",label:nls/* localize */.N("unfoldAction.label","Unfold"),alias:"Unfold",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3161/* BracketRight */,mac:{primary:2649/* BracketRight */},weight:100/* EditorContrib */},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:foldingArgumentsConstraint,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(_foldingController,foldingModel,editor,args){let levels=args&&args.levels||1,lineNumbers=this.getLineNumbers(args,editor);args&&"up"===args.direction?setCollapseStateLevelsUp(foldingModel,!1,levels,lineNumbers):setCollapseStateLevelsDown(foldingModel,!1,levels,lineNumbers)}}class UnFoldRecursivelyAction extends FoldingAction{constructor(){super({id:"editor.unfoldRecursively",label:nls/* localize */.N("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2137/* BracketRight */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor,_args){setCollapseStateLevelsDown(foldingModel,!1,Number.MAX_VALUE,this.getSelectedLines(editor))}}class FoldAction extends FoldingAction{constructor(){super({id:"editor.fold",label:nls/* localize */.N("foldAction.label","Fold"),alias:"Fold",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3159/* BracketLeft */,mac:{primary:2647/* BracketLeft */},weight:100/* EditorContrib */},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:foldingArgumentsConstraint,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(_foldingController,foldingModel,editor,args){let lineNumbers=this.getLineNumbers(args,editor);const levels=args&&args.levels,direction=args&&args.direction;"number"!==typeof levels&&"string"!==typeof direction?
// fold the region at the location or if already collapsed, the first uncollapsed parent instead.
setCollapseStateUp(foldingModel,!0,lineNumbers):"up"===direction?setCollapseStateLevelsUp(foldingModel,!0,levels||1,lineNumbers):setCollapseStateLevelsDown(foldingModel,!0,levels||1,lineNumbers)}}class ToggleFoldAction extends FoldingAction{constructor(){super({id:"editor.toggleFold",label:nls/* localize */.N("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2090/* KeyL */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){let selectedLines=this.getSelectedLines(editor);toggleCollapseState(foldingModel,1,selectedLines)}}class FoldRecursivelyAction extends FoldingAction{constructor(){super({id:"editor.foldRecursively",label:nls/* localize */.N("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2135/* BracketLeft */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){let selectedLines=this.getSelectedLines(editor);setCollapseStateLevelsDown(foldingModel,!0,Number.MAX_VALUE,selectedLines)}}class FoldAllBlockCommentsAction extends FoldingAction{constructor(){super({id:"editor.foldAllBlockComments",label:nls/* localize */.N("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2133/* Slash */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){if(foldingModel.regions.hasTypes())setCollapseStateForType(foldingModel,modes/* FoldingRangeKind */.AD.Comment.value,!0);else{const editorModel=editor.getModel();if(!editorModel)return;const comments=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getComments(editorModel.getLanguageId());if(comments&&comments.blockCommentStartToken){let regExp=new RegExp("^\\s*"+(0,strings/* escapeRegExpCharacters */.ec)(comments.blockCommentStartToken));setCollapseStateForMatchingLines(foldingModel,regExp,!0)}}}}class FoldAllRegionsAction extends FoldingAction{constructor(){super({id:"editor.foldAllMarkerRegions",label:nls/* localize */.N("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2077/* Digit8 */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){if(foldingModel.regions.hasTypes())setCollapseStateForType(foldingModel,modes/* FoldingRangeKind */.AD.Region.value,!0);else{const editorModel=editor.getModel();if(!editorModel)return;const foldingRules=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getFoldingRules(editorModel.getLanguageId());if(foldingRules&&foldingRules.markers&&foldingRules.markers.start){let regExp=new RegExp(foldingRules.markers.start);setCollapseStateForMatchingLines(foldingModel,regExp,!0)}}}}class UnfoldAllRegionsAction extends FoldingAction{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:nls/* localize */.N("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2078/* Digit9 */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){if(foldingModel.regions.hasTypes())setCollapseStateForType(foldingModel,modes/* FoldingRangeKind */.AD.Region.value,!1);else{const editorModel=editor.getModel();if(!editorModel)return;const foldingRules=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getFoldingRules(editorModel.getLanguageId());if(foldingRules&&foldingRules.markers&&foldingRules.markers.start){let regExp=new RegExp(foldingRules.markers.start);setCollapseStateForMatchingLines(foldingModel,regExp,!1)}}}}class FoldAllRegionsExceptAction extends FoldingAction{constructor(){super({id:"editor.foldAllExcept",label:nls/* localize */.N("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2131/* Minus */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){let selectedLines=this.getSelectedLines(editor);setCollapseStateForRest(foldingModel,!0,selectedLines)}}class UnfoldAllRegionsExceptAction extends FoldingAction{constructor(){super({id:"editor.unfoldAllExcept",label:nls/* localize */.N("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2129/* Equal */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){let selectedLines=this.getSelectedLines(editor);setCollapseStateForRest(foldingModel,!1,selectedLines)}}class FoldAllAction extends FoldingAction{constructor(){super({id:"editor.foldAll",label:nls/* localize */.N("foldAllAction.label","Fold All"),alias:"Fold All",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2069/* Digit0 */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,_editor){setCollapseStateLevelsDown(foldingModel,!0)}}class UnfoldAllAction extends FoldingAction{constructor(){super({id:"editor.unfoldAll",label:nls/* localize */.N("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2088/* KeyJ */),weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,_editor){setCollapseStateLevelsDown(foldingModel,!1)}}class FoldLevelAction extends FoldingAction{getFoldingLevel(){return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length))}invoke(_foldingController,foldingModel,editor){setCollapseStateAtLevel(foldingModel,this.getFoldingLevel(),!0,this.getSelectedLines(editor))}}FoldLevelAction.ID_PREFIX="editor.foldLevel",FoldLevelAction.ID=level=>FoldLevelAction.ID_PREFIX+level
/** Action to go to the parent fold of current line */;class GotoParentFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoParentFold",label:nls/* localize */.N("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){let selectedLines=this.getSelectedLines(editor);if(selectedLines.length>0){let startLineNumber=getParentFoldLine(selectedLines[0],foldingModel);null!==startLineNumber&&editor.setSelection({startLineNumber:startLineNumber,startColumn:1,endLineNumber:startLineNumber,endColumn:1})}}}
/** Action to go to the previous fold of current line */class GotoPreviousFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoPreviousFold",label:nls/* localize */.N("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){let selectedLines=this.getSelectedLines(editor);if(selectedLines.length>0){let startLineNumber=getPreviousFoldLine(selectedLines[0],foldingModel);null!==startLineNumber&&editor.setSelection({startLineNumber:startLineNumber,startColumn:1,endLineNumber:startLineNumber,endColumn:1})}}}
/** Action to go to the next fold of current line */class GotoNextFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoNextFold",label:nls/* localize */.N("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,weight:100/* EditorContrib */}})}invoke(_foldingController,foldingModel,editor){let selectedLines=this.getSelectedLines(editor);if(selectedLines.length>0){let startLineNumber=getNextFoldLine(selectedLines[0],foldingModel);null!==startLineNumber&&editor.setSelection({startLineNumber:startLineNumber,startColumn:1,endLineNumber:startLineNumber,endColumn:1})}}}(0,editorExtensions/* registerEditorContribution */._K)(FoldingController.ID,FoldingController),(0,editorExtensions/* registerEditorAction */.Qr)(UnfoldAction),(0,editorExtensions/* registerEditorAction */.Qr)(UnFoldRecursivelyAction),(0,editorExtensions/* registerEditorAction */.Qr)(FoldAction),(0,editorExtensions/* registerEditorAction */.Qr)(FoldRecursivelyAction),(0,editorExtensions/* registerEditorAction */.Qr)(FoldAllAction),(0,editorExtensions/* registerEditorAction */.Qr)(UnfoldAllAction),(0,editorExtensions/* registerEditorAction */.Qr)(FoldAllBlockCommentsAction),(0,editorExtensions/* registerEditorAction */.Qr)(FoldAllRegionsAction),(0,editorExtensions/* registerEditorAction */.Qr)(UnfoldAllRegionsAction),(0,editorExtensions/* registerEditorAction */.Qr)(FoldAllRegionsExceptAction),(0,editorExtensions/* registerEditorAction */.Qr)(UnfoldAllRegionsExceptAction),(0,editorExtensions/* registerEditorAction */.Qr)(ToggleFoldAction),(0,editorExtensions/* registerEditorAction */.Qr)(GotoParentFoldAction),(0,editorExtensions/* registerEditorAction */.Qr)(GotoPreviousFoldAction),(0,editorExtensions/* registerEditorAction */.Qr)(GotoNextFoldAction);for(let i=1;i<=7;i++)(0,editorExtensions/* registerInstantiatedEditorAction */.QG)(new FoldLevelAction({id:FoldLevelAction.ID(i),label:nls/* localize */.N("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:CONTEXT_FOLDING_ENABLED,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2048/* CtrlCmd */|21/* Digit0 */+i),weight:100/* EditorContrib */}}));const foldBackgroundBackground=(0,colorRegistry/* registerColor */.P6)("editor.foldBackground",{light:(0,colorRegistry/* transparent */.Zn)(colorRegistry/* editorSelectionBackground */.hE,.3),dark:(0,colorRegistry/* transparent */.Zn)(colorRegistry/* editorSelectionBackground */.hE,.3),hc:null},nls/* localize */.N("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),editorFoldForeground=(0,colorRegistry/* registerColor */.P6)("editorGutter.foldingControlForeground",{dark:colorRegistry/* iconForeground */.XZ,light:colorRegistry/* iconForeground */.XZ,hc:colorRegistry/* iconForeground */.XZ},nls/* localize */.N("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const foldBackground=theme.getColor(foldBackgroundBackground);foldBackground&&collector.addRule(`.monaco-editor .folded-background { background-color: ${foldBackground}; }`);const editorFoldColor=theme.getColor(editorFoldForeground);editorFoldColor&&collector.addRule(`\n\t\t.monaco-editor .cldr${common_themeService/* ThemeIcon */.kS.asCSSSelector(foldingExpandedIcon)},\n\t\t.monaco-editor .cldr${common_themeService/* ThemeIcon */.kS.asCSSSelector(foldingCollapsedIcon)} {\n\t\t\tcolor: ${editorFoldColor} !important;\n\t\t}\n\t\t`)}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/config/editorZoom.js
var editorZoom=__webpack_require__(182334);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/fontZoom.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class EditorFontZoomIn extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.fontZoomIn",label:nls/* localize */.N("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(accessor,editor){editorZoom/* EditorZoom */.C.setZoomLevel(editorZoom/* EditorZoom */.C.getZoomLevel()+1)}}class EditorFontZoomOut extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.fontZoomOut",label:nls/* localize */.N("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(accessor,editor){editorZoom/* EditorZoom */.C.setZoomLevel(editorZoom/* EditorZoom */.C.getZoomLevel()-1)}}class EditorFontZoomReset extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.fontZoomReset",label:nls/* localize */.N("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(accessor,editor){editorZoom/* EditorZoom */.C.setZoomLevel(0)}}(0,editorExtensions/* registerEditorAction */.Qr)(EditorFontZoomIn),(0,editorExtensions/* registerEditorAction */.Qr)(EditorFontZoomOut),(0,editorExtensions/* registerEditorAction */.Qr)(EditorFontZoomReset);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/format/format.js
var format=__webpack_require__(744325),formattingEdit=__webpack_require__(469939),formatActions_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},formatActions_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},formatActions_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/format/formattingEdit.js
let FormatOnType=class{constructor(editor,_workerService){this._workerService=_workerService,this._callOnDispose=new lifecycle/* DisposableStore */.SL,this._callOnModel=new lifecycle/* DisposableStore */.SL,this._editor=editor,this._callOnDispose.add(editor.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(editor.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(editor.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(modes/* OnTypeFormattingEditProviderRegistry */.ln.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){
// we are disabled
if(
// clean up
this._callOnModel.clear(),!this._editor.getOption(48/* formatOnType */))return;
// no model
if(!this._editor.hasModel())return;const model=this._editor.getModel(),[support]=modes/* OnTypeFormattingEditProviderRegistry */.ln.ordered(model);
// no support
if(!support||!support.autoFormatTriggerCharacters)return;
// register typing listeners that will trigger the format
let triggerChars=new characterClassifier/* CharacterSet */.q;for(let ch of support.autoFormatTriggerCharacters)triggerChars.add(ch.charCodeAt(0));this._callOnModel.add(this._editor.onDidType((text=>{let lastCharCode=text.charCodeAt(text.length-1);triggerChars.has(lastCharCode)&&this._trigger(String.fromCharCode(lastCharCode))})))}_trigger(ch){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const model=this._editor.getModel(),position=this._editor.getPosition();let canceled=!1;
// install a listener that checks if edits happens before the
// position on which we format right now. If so, we won't
// apply the format edits
const unbind=this._editor.onDidChangeModelContent((e=>{if(e.isFlush)
// a model.setValue() was called
// cancel only once
return canceled=!0,void unbind.dispose();for(let i=0,len=e.changes.length;i<len;i++){const change=e.changes[i];if(change.range.endLineNumber<=position.lineNumber)
// cancel only once
return canceled=!0,void unbind.dispose()}}));(0,format/* getOnTypeFormattingEdits */.Qs)(this._workerService,model,position,ch,model.getFormattingOptions()).then((edits=>{unbind.dispose(),canceled||(0,arrays/* isNonEmptyArray */.Of)(edits)&&(formattingEdit/* FormattingEdit */.V.execute(this._editor,edits,!0),(0,format/* alertFormattingEdits */.Zg)(edits))}),(err=>{throw unbind.dispose(),err}))}};FormatOnType.ID="editor.contrib.autoFormat",FormatOnType=formatActions_decorate([formatActions_param(1,editorWorkerService/* IEditorWorkerService */.p)],FormatOnType);let FormatOnPaste=class{constructor(editor,_instantiationService){this.editor=editor,this._instantiationService=_instantiationService,this._callOnDispose=new lifecycle/* DisposableStore */.SL,this._callOnModel=new lifecycle/* DisposableStore */.SL,this._callOnDispose.add(editor.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(editor.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(editor.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(modes/* DocumentRangeFormattingEditProviderRegistry */.vN.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){
// clean up
this._callOnModel.clear(),
// we are disabled
this.editor.getOption(47/* formatOnPaste */)&&this.editor.hasModel()&&modes/* DocumentRangeFormattingEditProviderRegistry */.vN.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((({range:range})=>this._trigger(range))))}_trigger(range){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(format/* formatDocumentRangesWithSelectedProvider */.x$,this.editor,range,2/* Silent */,progress/* Progress */.E.None,cancellation/* CancellationToken */.T.None).catch(errors/* onUnexpectedError */.dL))}};FormatOnPaste.ID="editor.contrib.formatOnPaste",FormatOnPaste=formatActions_decorate([formatActions_param(1,instantiation/* IInstantiationService */.TG)],FormatOnPaste);class FormatDocumentAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.formatDocument",label:nls/* localize */.N("formatDocument.label","Format Document"),alias:"Format Document",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.notInCompositeEditor,editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1572/* KeyF */,linux:{primary:3111/* KeyI */},weight:100/* EditorContrib */},contextMenuOpts:{group:"1_modification",order:1.3}})}run(accessor,editor){return formatActions_awaiter(this,void 0,void 0,(function*(){if(editor.hasModel()){const instaService=accessor.get(instantiation/* IInstantiationService */.TG),progressService=accessor.get(progress/* IEditorProgressService */.e);yield progressService.showWhile(instaService.invokeFunction(format/* formatDocumentWithSelectedProvider */.Qq,editor,1/* Explicit */,progress/* Progress */.E.None,cancellation/* CancellationToken */.T.None),250)}}))}}class FormatSelectionAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.formatSelection",label:nls/* localize */.N("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2084/* KeyF */),weight:100/* EditorContrib */},contextMenuOpts:{when:editorContextKeys/* EditorContextKeys */.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(accessor,editor){return formatActions_awaiter(this,void 0,void 0,(function*(){if(!editor.hasModel())return;const instaService=accessor.get(instantiation/* IInstantiationService */.TG),model=editor.getModel(),ranges=editor.getSelections().map((range=>range.isEmpty()?new core_range/* Range */.e(range.startLineNumber,1,range.startLineNumber,model.getLineMaxColumn(range.startLineNumber)):range)),progressService=accessor.get(progress/* IEditorProgressService */.e);yield progressService.showWhile(instaService.invokeFunction(format/* formatDocumentRangesWithSelectedProvider */.x$,editor,ranges,1/* Explicit */,progress/* Progress */.E.None,cancellation/* CancellationToken */.T.None),250)}))}}(0,editorExtensions/* registerEditorContribution */._K)(FormatOnType.ID,FormatOnType),(0,editorExtensions/* registerEditorContribution */._K)(FormatOnPaste.ID,FormatOnPaste),(0,editorExtensions/* registerEditorAction */.Qr)(FormatDocumentAction),(0,editorExtensions/* registerEditorAction */.Qr)(FormatSelectionAction),
// this is the old format action that does both (format document OR format selection)
// and we keep it here such that existing keybinding configurations etc will still work
commands/* CommandsRegistry */.P.registerCommand("editor.action.format",(accessor=>formatActions_awaiter(void 0,void 0,void 0,(function*(){const editor=accessor.get(services_codeEditorService/* ICodeEditorService */.$).getFocusedCodeEditor();if(!editor||!editor.hasModel())return;const commandService=accessor.get(commands/* ICommandService */.H);editor.getSelection().isEmpty()?yield commandService.executeCommand("editor.action.formatDocument"):yield commandService.executeCommand("editor.action.formatSelection")}))));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/outlineModel.js
var outlineModel=__webpack_require__(986895),documentSymbols_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function getDocumentSymbols(document,flat,token){return documentSymbols_awaiter(this,void 0,void 0,(function*(){const model=yield outlineModel/* OutlineModel */.C3.create(document,token);return flat?model.asListOfDocumentSymbols():model.getTopLevelSymbols()}))}commands/* CommandsRegistry */.P.registerCommand("_executeDocumentSymbolProvider",(function(accessor,...args){return documentSymbols_awaiter(this,void 0,void 0,(function*(){const[resource]=args;(0,types/* assertType */.p_)(common_uri/* URI */.o.isUri(resource));const model=accessor.get(services_modelService/* IModelService */.q).getModel(resource);if(model)return getDocumentSymbols(model,!1,cancellation/* CancellationToken */.T.None);const reference=yield accessor.get(resolverService/* ITextModelService */.S).createModelReference(resource);try{return yield getDocumentSymbols(reference.object.textEditorModel,!1,cancellation/* CancellationToken */.T.None)}finally{reference.dispose()}}))}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/commands/shiftCommand.js
var shiftCommand=__webpack_require__(210291);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/indentation/indentUtils.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function getSpaceCnt(str,tabSize){let spacesCnt=0;for(let i=0;i<str.length;i++)"\t"===str.charAt(i)?spacesCnt+=tabSize:spacesCnt++;return spacesCnt}function generateIndent(spacesCnt,tabSize,insertSpaces){spacesCnt=spacesCnt<0?0:spacesCnt;let result="";if(!insertSpaces){let tabsCnt=Math.floor(spacesCnt/tabSize);spacesCnt%=tabSize;for(let i=0;i<tabsCnt;i++)result+="\t"}for(let i=0;i<spacesCnt;i++)result+=" ";return result}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/indentation/indentation.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function getReindentEditOperations(model,startLineNumber,endLineNumber,inheritedIndent){if(1===model.getLineCount()&&1===model.getLineMaxColumn(1))
// Model is empty
return[];const indentationRules=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getIndentationRules(model.getLanguageId());if(!indentationRules)return[];endLineNumber=Math.min(endLineNumber,model.getLineCount());
// Skip `unIndentedLinePattern` lines
while(startLineNumber<=endLineNumber){if(!indentationRules.unIndentedLinePattern)break;let text=model.getLineContent(startLineNumber);if(!indentationRules.unIndentedLinePattern.test(text))break;startLineNumber++}if(startLineNumber>endLineNumber-1)return[];const{tabSize:tabSize,indentSize:indentSize,insertSpaces:insertSpaces}=model.getOptions(),shiftIndent=(indentation,count)=>(count=count||1,shiftCommand/* ShiftCommand */.U.shiftIndent(indentation,indentation.length+count,tabSize,indentSize,insertSpaces)),unshiftIndent=(indentation,count)=>(count=count||1,shiftCommand/* ShiftCommand */.U.unshiftIndent(indentation,indentation.length+count,tabSize,indentSize,insertSpaces));let globalIndent,indentEdits=[],currentLineText=model.getLineContent(startLineNumber),adjustedLineContent=currentLineText;
// indentation being passed to lines below
if(void 0!==inheritedIndent&&null!==inheritedIndent){globalIndent=inheritedIndent;let oldIndentation=strings/* getLeadingWhitespace */.V8(currentLineText);adjustedLineContent=globalIndent+currentLineText.substring(oldIndentation.length),indentationRules.decreaseIndentPattern&&indentationRules.decreaseIndentPattern.test(adjustedLineContent)&&(globalIndent=unshiftIndent(globalIndent),adjustedLineContent=globalIndent+currentLineText.substring(oldIndentation.length)),currentLineText!==adjustedLineContent&&indentEdits.push(editOperation/* EditOperation */.h.replaceMove(new core_selection/* Selection */.Y(startLineNumber,1,startLineNumber,oldIndentation.length+1),textModel/* TextModel */.yO.normalizeIndentation(globalIndent,indentSize,insertSpaces)))}else globalIndent=strings/* getLeadingWhitespace */.V8(currentLineText);
// idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.
let idealIndentForNextLine=globalIndent;indentationRules.increaseIndentPattern&&indentationRules.increaseIndentPattern.test(adjustedLineContent)?(idealIndentForNextLine=shiftIndent(idealIndentForNextLine),globalIndent=shiftIndent(globalIndent)):indentationRules.indentNextLinePattern&&indentationRules.indentNextLinePattern.test(adjustedLineContent)&&(idealIndentForNextLine=shiftIndent(idealIndentForNextLine)),startLineNumber++;
// Calculate indentation adjustment for all following lines
for(let lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){let text=model.getLineContent(lineNumber),oldIndentation=strings/* getLeadingWhitespace */.V8(text),adjustedLineContent=idealIndentForNextLine+text.substring(oldIndentation.length);indentationRules.decreaseIndentPattern&&indentationRules.decreaseIndentPattern.test(adjustedLineContent)&&(idealIndentForNextLine=unshiftIndent(idealIndentForNextLine),globalIndent=unshiftIndent(globalIndent)),oldIndentation!==idealIndentForNextLine&&indentEdits.push(editOperation/* EditOperation */.h.replaceMove(new core_selection/* Selection */.Y(lineNumber,1,lineNumber,oldIndentation.length+1),textModel/* TextModel */.yO.normalizeIndentation(idealIndentForNextLine,indentSize,insertSpaces))),
// calculate idealIndentForNextLine
indentationRules.unIndentedLinePattern&&indentationRules.unIndentedLinePattern.test(text)||(indentationRules.increaseIndentPattern&&indentationRules.increaseIndentPattern.test(adjustedLineContent)?(globalIndent=shiftIndent(globalIndent),idealIndentForNextLine=globalIndent):idealIndentForNextLine=indentationRules.indentNextLinePattern&&indentationRules.indentNextLinePattern.test(adjustedLineContent)?shiftIndent(idealIndentForNextLine):globalIndent)}return indentEdits}class IndentationToSpacesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:IndentationToSpacesAction.ID,label:nls/* localize */.N("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}run(accessor,editor){let model=editor.getModel();if(!model)return;let modelOpts=model.getOptions(),selection=editor.getSelection();if(!selection)return;const command=new IndentationToSpacesCommand(selection,modelOpts.tabSize);editor.pushUndoStop(),editor.executeCommands(this.id,[command]),editor.pushUndoStop(),model.updateOptions({insertSpaces:!0})}}IndentationToSpacesAction.ID="editor.action.indentationToSpaces";class IndentationToTabsAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:IndentationToTabsAction.ID,label:nls/* localize */.N("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}run(accessor,editor){let model=editor.getModel();if(!model)return;let modelOpts=model.getOptions(),selection=editor.getSelection();if(!selection)return;const command=new IndentationToTabsCommand(selection,modelOpts.tabSize);editor.pushUndoStop(),editor.executeCommands(this.id,[command]),editor.pushUndoStop(),model.updateOptions({insertSpaces:!1})}}IndentationToTabsAction.ID="editor.action.indentationToTabs";class ChangeIndentationSizeAction extends editorExtensions/* EditorAction */.R6{constructor(insertSpaces,opts){super(opts),this.insertSpaces=insertSpaces}run(accessor,editor){const quickInputService=accessor.get(quickInput/* IQuickInputService */.eJ),modelService=accessor.get(services_modelService/* IModelService */.q);let model=editor.getModel();if(!model)return;const creationOpts=modelService.getCreationOptions(model.getLanguageId(),model.uri,model.isForSimpleWidget),picks=[1,2,3,4,5,6,7,8].map((n=>({id:n.toString(),label:n.toString(),
// add description for tabSize value set in the configuration
description:n===creationOpts.tabSize?nls/* localize */.N("configuredTabSize","Configured Tab Size"):void 0}))),autoFocusIndex=Math.min(model.getOptions().tabSize-1,7);setTimeout((()=>{quickInputService.pick(picks,{placeHolder:nls/* localize */.N({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:picks[autoFocusIndex]}).then((pick=>{pick&&model&&!model.isDisposed()&&model.updateOptions({tabSize:parseInt(pick.label,10),insertSpaces:this.insertSpaces})}))}),50/* quick input is sensitive to being opened so soon after another */)}}class IndentUsingTabs extends ChangeIndentationSizeAction{constructor(){super(!1,{id:IndentUsingTabs.ID,label:nls/* localize */.N("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}IndentUsingTabs.ID="editor.action.indentUsingTabs";class IndentUsingSpaces extends ChangeIndentationSizeAction{constructor(){super(!0,{id:IndentUsingSpaces.ID,label:nls/* localize */.N("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}IndentUsingSpaces.ID="editor.action.indentUsingSpaces";class DetectIndentation extends editorExtensions/* EditorAction */.R6{constructor(){super({id:DetectIndentation.ID,label:nls/* localize */.N("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(accessor,editor){const modelService=accessor.get(services_modelService/* IModelService */.q);let model=editor.getModel();if(!model)return;const creationOpts=modelService.getCreationOptions(model.getLanguageId(),model.uri,model.isForSimpleWidget);model.detectIndentation(creationOpts.insertSpaces,creationOpts.tabSize)}}DetectIndentation.ID="editor.action.detectIndentation";class ReindentLinesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.reindentlines",label:nls/* localize */.N("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}run(accessor,editor){let model=editor.getModel();if(!model)return;let edits=getReindentEditOperations(model,1,model.getLineCount());edits.length>0&&(editor.pushUndoStop(),editor.executeEdits(this.id,edits),editor.pushUndoStop())}}class ReindentSelectedLinesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:nls/* localize */.N("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}run(accessor,editor){let model=editor.getModel();if(!model)return;let selections=editor.getSelections();if(null===selections)return;let edits=[];for(let selection of selections){let startLineNumber=selection.startLineNumber,endLineNumber=selection.endLineNumber;if(startLineNumber!==endLineNumber&&1===selection.endColumn&&endLineNumber--,1===startLineNumber){if(startLineNumber===endLineNumber)continue}else startLineNumber--;let editOperations=getReindentEditOperations(model,startLineNumber,endLineNumber);edits.push(...editOperations)}edits.length>0&&(editor.pushUndoStop(),editor.executeEdits(this.id,edits),editor.pushUndoStop())}}class AutoIndentOnPasteCommand{constructor(edits,initialSelection){this._initialSelection=initialSelection,this._edits=[],this._selectionId=null;for(let edit of edits)edit.range&&"string"===typeof edit.text&&this._edits.push(edit)}getEditOperations(model,builder){for(let edit of this._edits)builder.addEditOperation(core_range/* Range */.e.lift(edit.range),edit.text);let selectionIsSet=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(selectionIsSet=!0,this._selectionId=builder.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(selectionIsSet=!0,this._selectionId=builder.trackSelection(this._initialSelection,!1))),selectionIsSet||(this._selectionId=builder.trackSelection(this._initialSelection))}computeCursorState(model,helper){return helper.getTrackedSelection(this._selectionId)}}class AutoIndentOnPaste{constructor(editor){this.callOnDispose=new lifecycle/* DisposableStore */.SL,this.callOnModel=new lifecycle/* DisposableStore */.SL,this.editor=editor,this.callOnDispose.add(editor.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(editor.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(editor.onDidChangeModelLanguage((()=>this.update())))}update(){
// clean up
this.callOnModel.clear(),
// we are disabled
this.editor.getOption(9/* autoIndent */)<4/* Full */||this.editor.getOption(47/* formatOnPaste */)||
// no model
this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((({range:range})=>{this.trigger(range)})))}trigger(range){let selections=this.editor.getSelections();if(null===selections||selections.length>1)return;const model=this.editor.getModel();if(!model)return;if(!model.isCheapToTokenize(range.getStartPosition().lineNumber))return;const autoIndent=this.editor.getOption(9/* autoIndent */),{tabSize:tabSize,indentSize:indentSize,insertSpaces:insertSpaces}=model.getOptions();let textEdits=[],indentConverter={shiftIndent:indentation=>shiftCommand/* ShiftCommand */.U.shiftIndent(indentation,indentation.length+1,tabSize,indentSize,insertSpaces),unshiftIndent:indentation=>shiftCommand/* ShiftCommand */.U.unshiftIndent(indentation,indentation.length+1,tabSize,indentSize,insertSpaces)},startLineNumber=range.startLineNumber;while(startLineNumber<=range.endLineNumber){if(!this.shouldIgnoreLine(model,startLineNumber))break;startLineNumber++}if(startLineNumber>range.endLineNumber)return;let firstLineText=model.getLineContent(startLineNumber);if(!/\S/.test(firstLineText.substring(0,range.startColumn-1))){const indentOfFirstLine=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getGoodIndentForLine(autoIndent,model,model.getLanguageId(),startLineNumber,indentConverter);if(null!==indentOfFirstLine){let oldIndentation=strings/* getLeadingWhitespace */.V8(firstLineText),newSpaceCnt=getSpaceCnt(indentOfFirstLine,tabSize),oldSpaceCnt=getSpaceCnt(oldIndentation,tabSize);if(newSpaceCnt!==oldSpaceCnt){let newIndent=generateIndent(newSpaceCnt,tabSize,insertSpaces);textEdits.push({range:new core_range/* Range */.e(startLineNumber,1,startLineNumber,oldIndentation.length+1),text:newIndent}),firstLineText=newIndent+firstLineText.substr(oldIndentation.length)}else{let indentMetadata=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getIndentMetadata(model,startLineNumber);if(0===indentMetadata||8/* UNINDENT_MASK */===indentMetadata)
// we paste content into a line where only contains whitespaces
// after pasting, the indentation of the first line is already correct
// the first line doesn't match any indentation rule
// then no-op.
return}}}const firstLineNumber=startLineNumber;
// ignore empty or ignored lines
while(startLineNumber<range.endLineNumber){if(/\S/.test(model.getLineContent(startLineNumber+1)))break;startLineNumber++}if(startLineNumber!==range.endLineNumber){let virtualModel={getLineTokens:lineNumber=>model.getLineTokens(lineNumber),getLanguageId:()=>model.getLanguageId(),getLanguageIdAtPosition:(lineNumber,column)=>model.getLanguageIdAtPosition(lineNumber,column),getLineContent:lineNumber=>lineNumber===firstLineNumber?firstLineText:model.getLineContent(lineNumber)},indentOfSecondLine=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getGoodIndentForLine(autoIndent,virtualModel,model.getLanguageId(),startLineNumber+1,indentConverter);if(null!==indentOfSecondLine){let newSpaceCntOfSecondLine=getSpaceCnt(indentOfSecondLine,tabSize),oldSpaceCntOfSecondLine=getSpaceCnt(strings/* getLeadingWhitespace */.V8(model.getLineContent(startLineNumber+1)),tabSize);if(newSpaceCntOfSecondLine!==oldSpaceCntOfSecondLine){let spaceCntOffset=newSpaceCntOfSecondLine-oldSpaceCntOfSecondLine;for(let i=startLineNumber+1;i<=range.endLineNumber;i++){let lineContent=model.getLineContent(i),originalIndent=strings/* getLeadingWhitespace */.V8(lineContent),originalSpacesCnt=getSpaceCnt(originalIndent,tabSize),newSpacesCnt=originalSpacesCnt+spaceCntOffset,newIndent=generateIndent(newSpacesCnt,tabSize,insertSpaces);newIndent!==originalIndent&&textEdits.push({range:new core_range/* Range */.e(i,1,i,originalIndent.length+1),text:newIndent})}}}}if(textEdits.length>0){this.editor.pushUndoStop();let cmd=new AutoIndentOnPasteCommand(textEdits,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",cmd),this.editor.pushUndoStop()}}shouldIgnoreLine(model,lineNumber){model.forceTokenization(lineNumber);let nonWhitespaceColumn=model.getLineFirstNonWhitespaceColumn(lineNumber);if(0===nonWhitespaceColumn)return!0;let tokens=model.getLineTokens(lineNumber);if(tokens.getCount()>0){let firstNonWhitespaceTokenIndex=tokens.findTokenIndexAtOffset(nonWhitespaceColumn);if(firstNonWhitespaceTokenIndex>=0&&1/* Comment */===tokens.getStandardTokenType(firstNonWhitespaceTokenIndex))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}function getIndentationEditOperations(model,builder,tabSize,tabsToSpaces){if(1===model.getLineCount()&&1===model.getLineMaxColumn(1))
// Model is empty
return;let spaces="";for(let i=0;i<tabSize;i++)spaces+=" ";let spacesRegExp=new RegExp(spaces,"gi");for(let lineNumber=1,lineCount=model.getLineCount();lineNumber<=lineCount;lineNumber++){let lastIndentationColumn=model.getLineFirstNonWhitespaceColumn(lineNumber);if(0===lastIndentationColumn&&(lastIndentationColumn=model.getLineMaxColumn(lineNumber)),1===lastIndentationColumn)continue;const originalIndentationRange=new core_range/* Range */.e(lineNumber,1,lineNumber,lastIndentationColumn),originalIndentation=model.getValueInRange(originalIndentationRange),newIndentation=tabsToSpaces?originalIndentation.replace(/\t/gi,spaces):originalIndentation.replace(spacesRegExp,"\t");builder.addEditOperation(originalIndentationRange,newIndentation)}}AutoIndentOnPaste.ID="editor.contrib.autoIndentOnPaste";class IndentationToSpacesCommand{constructor(selection,tabSize){this.selection=selection,this.tabSize=tabSize,this.selectionId=null}getEditOperations(model,builder){this.selectionId=builder.trackSelection(this.selection),getIndentationEditOperations(model,builder,this.tabSize,!0)}computeCursorState(model,helper){return helper.getTrackedSelection(this.selectionId)}}class IndentationToTabsCommand{constructor(selection,tabSize){this.selection=selection,this.tabSize=tabSize,this.selectionId=null}getEditOperations(model,builder){this.selectionId=builder.trackSelection(this.selection),getIndentationEditOperations(model,builder,this.tabSize,!1)}computeCursorState(model,helper){return helper.getTrackedSelection(this.selectionId)}}(0,editorExtensions/* registerEditorContribution */._K)(AutoIndentOnPaste.ID,AutoIndentOnPaste),(0,editorExtensions/* registerEditorAction */.Qr)(IndentationToSpacesAction),(0,editorExtensions/* registerEditorAction */.Qr)(IndentationToTabsAction),(0,editorExtensions/* registerEditorAction */.Qr)(IndentUsingTabs),(0,editorExtensions/* registerEditorAction */.Qr)(IndentUsingSpaces),(0,editorExtensions/* registerEditorAction */.Qr)(DetectIndentation),(0,editorExtensions/* registerEditorAction */.Qr)(ReindentLinesAction),(0,editorExtensions/* registerEditorAction */.Qr)(ReindentSelectedLinesAction);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/inlayHintsController.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var inlayHintsController_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},inlayHintsController_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},inlayHintsController_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const inlayHintsController_MAX_DECORATORS=1500;class RequestMap{constructor(){this._data=new map/* ResourceMap */.Y9}push(model,provider){const value=this._data.get(model.uri);void 0===value?this._data.set(model.uri,new Set([provider])):value.add(provider)}pop(model,provider){const value=this._data.get(model.uri);value&&(value.delete(provider),0===value.size&&this._data.delete(model.uri))}has(model,provider){var _a;return Boolean(null===(_a=this._data.get(model.uri))||void 0===_a?void 0:_a.has(provider))}}function getInlayHints(model,ranges,requests,token){return inlayHintsController_awaiter(this,void 0,void 0,(function*(){const all=[],providers=modes/* InlayHintsProviderRegistry */.mX.ordered(model).reverse(),promises=providers.map((provider=>ranges.map((range=>inlayHintsController_awaiter(this,void 0,void 0,(function*(){try{requests.push(model,provider);const result=yield provider.provideInlayHints(model,range,token);(null===result||void 0===result?void 0:result.length)&&all.push(result.filter((hint=>range.containsPosition(hint.position))))}catch(err){(0,errors/* onUnexpectedExternalError */.Cp)(err)}finally{requests.pop(model,provider)}}))))));return yield Promise.all(promises.flat()),all.flat().sort(((a,b)=>core_position/* Position */.L.compare(a.position,b.position)))}))}class InlayHintsCache{constructor(){this._entries=new map/* LRUCache */.z6(50)}get(model){const key=InlayHintsCache._key(model);return this._entries.get(key)}set(model,value){const key=InlayHintsCache._key(model);this._entries.set(key,value)}static _key(model){return`${model.uri.toString()}/${model.getVersionId()}`}}let InlayHintsController=class InlayHintsController{constructor(_editor,_codeEditorService){this._editor=_editor,this._codeEditorService=_codeEditorService,this._decorationOwnerId=++InlayHintsController._decorationOwnerIdPool,this._disposables=new lifecycle/* DisposableStore */.SL,this._sessionDisposables=new lifecycle/* DisposableStore */.SL,this._getInlayHintsDelays=new languageFeatureRegistry/* LanguageFeatureRequestDelays */.Y(modes/* InlayHintsProviderRegistry */.mX,25,500),this._cache=new InlayHintsCache,this._decorations=new Map,this._disposables.add(modes/* InlayHintsProviderRegistry */.mX.onDidChange((()=>this._update()))),this._disposables.add(_editor.onDidChangeModel((()=>this._update()))),this._disposables.add(_editor.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(_editor.onDidChangeConfiguration((e=>{e.hasChanged(125/* inlayHints */)&&this._update()}))),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(125/* inlayHints */).enabled)return;const model=this._editor.getModel();if(!model||!modes/* InlayHintsProviderRegistry */.mX.has(model))return;
// iff possible, quickly update from cache
const cached=this._cache.get(model);cached&&this._updateHintsDecorators([model.getFullModelRange()],cached);const requests=new RequestMap,scheduler=new common_async/* RunOnceScheduler */.pY((()=>inlayHintsController_awaiter(this,void 0,void 0,(function*(){const t1=Date.now(),cts=new cancellation/* CancellationTokenSource */.A;this._sessionDisposables.add((0,lifecycle/* toDisposable */.OF)((()=>cts.dispose(!0))));const ranges=this._getHintsRanges(),result=yield getInlayHints(model,ranges,requests,cts.token);scheduler.delay=this._getInlayHintsDelays.update(model,Date.now()-t1),cts.token.isCancellationRequested||(this._updateHintsDecorators(ranges,result),this._cache.set(model,Array.from(this._decorations.values()).map((obj=>obj.hint))))}))),this._getInlayHintsDelays.get(model));this._sessionDisposables.add(scheduler),
// update inline hints when content or scroll position changes
this._sessionDisposables.add(this._editor.onDidChangeModelContent((()=>scheduler.schedule()))),this._disposables.add(this._editor.onDidScrollChange((()=>scheduler.schedule()))),scheduler.schedule();
// update inline hints when any any provider fires an event
const providerListener=new lifecycle/* DisposableStore */.SL;this._sessionDisposables.add(providerListener);for(const provider of modes/* InlayHintsProviderRegistry */.mX.all(model))"function"===typeof provider.onDidChangeInlayHints&&providerListener.add(provider.onDidChangeInlayHints((()=>{requests.has(model,provider)||scheduler.schedule()})))}_getHintsRanges(){const extra=30,model=this._editor.getModel(),visibleRanges=this._editor.getVisibleRangesPlusViewportAboveBelow(),result=[];for(const range of visibleRanges.sort(core_range/* Range */.e.compareRangesUsingStarts)){const extendedRange=model.validateRange(new core_range/* Range */.e(range.startLineNumber-extra,range.startColumn,range.endLineNumber+extra,range.endColumn));0!==result.length&&core_range/* Range */.e.areIntersectingOrTouching(result[result.length-1],extendedRange)?result[result.length-1]=core_range/* Range */.e.plusRange(result[result.length-1],extendedRange):result.push(extendedRange)}return result}_updateHintsDecorators(ranges,hints){const{fontSize:fontSize,fontFamily:fontFamily}=this._getLayoutInfo(),model=this._editor.getModel(),newDecorationsTypeIds=[],newDecorationsData=[],fontFamilyVar="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(fontFamilyVar,fontFamily);for(const hint of hints){const{text:text,position:position,whitespaceBefore:whitespaceBefore,whitespaceAfter:whitespaceAfter}=hint,marginBefore=whitespaceBefore?fontSize/3|0:0,marginAfter=whitespaceAfter?fontSize/3|0:0,contentOptions={contentText:fixSpace(text),fontSize:`${fontSize}px`,margin:`0px ${marginAfter}px 0px ${marginBefore}px`,fontFamily:`var(${fontFamilyVar}), ${editorOptions/* EDITOR_FONT_DEFAULTS */.hL.fontFamily}`,padding:`1px ${0|Math.max(1,fontSize/4)}px`,borderRadius:(fontSize/4|0)+"px",verticalAlign:"middle",backgroundColor:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* editorInlayHintBackground */.Pp),color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* editorInlayHintForeground */.VV)};hint.kind===modes/* InlayHintKind */.gl.Parameter?(contentOptions.backgroundColor=(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* editorInlayHintParameterBackground */.ph),contentOptions.color=(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* editorInlayHintParameterForeground */.HC)):hint.kind===modes/* InlayHintKind */.gl.Type&&(contentOptions.backgroundColor=(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* editorInlayHintTypeBackground */.bK),contentOptions.color=(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* editorInlayHintTypeForeground */.hX));let renderOptions={beforeInjectedText:Object.assign(Object.assign({},contentOptions),{affectsLetterSpacing:!0})},range=core_range/* Range */.e.fromPositions(position),word=model.getWordAtPosition(position),usesWordRange=!1;word&&(word.endColumn===position.column?(
// change decoration to after
renderOptions.afterInjectedText=renderOptions.beforeInjectedText,renderOptions.beforeInjectedText=void 0,usesWordRange=!0,range=wordToRange(word,position.lineNumber)):word.startColumn===position.column&&(usesWordRange=!0,range=wordToRange(word,position.lineNumber)));const key="inlayHints-"+(0,hash/* hash */.vp)(renderOptions).toString(16);this._codeEditorService.registerDecorationType("inlay-hints-controller",key,renderOptions,void 0,this._editor),
// decoration types are ref-counted which means we only need to
// call register und remove equally often
newDecorationsTypeIds.push(key);const newLen=newDecorationsData.push({range:range,options:Object.assign(Object.assign({},this._codeEditorService.resolveDecorationOptions(key,!0)),{showIfCollapsed:!usesWordRange,stickiness:0/* AlwaysGrowsWhenTypingAtEdges */})});if(newLen>inlayHintsController_MAX_DECORATORS)break}
// collect all decoration ids that are affected by the ranges
// and only update those decorations
const decorationIdsToUpdate=[];for(const range of ranges)for(const{id:id}of model.getDecorationsInRange(range,this._decorationOwnerId,!0)){const obj=this._decorations.get(id);obj&&(decorationIdsToUpdate.push(id),this._codeEditorService.removeDecorationType(obj.decorationTypeId),this._decorations.delete(id))}const newDecorationIds=model.deltaDecorations(decorationIdsToUpdate,newDecorationsData,this._decorationOwnerId);for(let i=0;i<newDecorationIds.length;i++)this._decorations.set(newDecorationIds[i],{hint:hints[i],decorationTypeId:newDecorationsTypeIds[i]})}_getLayoutInfo(){const options=this._editor.getOption(125/* inlayHints */),editorFontSize=this._editor.getOption(45/* fontSize */);let fontSize=options.fontSize;(!fontSize||fontSize<5||fontSize>editorFontSize)&&(fontSize=.9*editorFontSize|0);const fontFamily=options.fontFamily||this._editor.getOption(42/* fontFamily */);return{fontSize:fontSize,fontFamily:fontFamily}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorations.keys()),[]);for(let obj of this._decorations.values())this._codeEditorService.removeDecorationType(obj.decorationTypeId);this._decorations.clear()}};function wordToRange(word,lineNumber){return new core_range/* Range */.e(lineNumber,word.startColumn,lineNumber,word.endColumn)}function fixSpace(str){const noBreakWhitespace="";return str.replace(/[ \t]/g,noBreakWhitespace)}InlayHintsController.ID="editor.contrib.InlayHints",InlayHintsController._decorationOwnerIdPool=0,InlayHintsController=inlayHintsController_decorate([inlayHintsController_param(1,services_codeEditorService/* ICodeEditorService */.$)],InlayHintsController),(0,editorExtensions/* registerEditorContribution */._K)(InlayHintsController.ID,InlayHintsController),commands/* CommandsRegistry */.P.registerCommand("_executeInlayHintProvider",((accessor,...args)=>inlayHintsController_awaiter(void 0,void 0,void 0,(function*(){const[uri,range]=args;(0,types/* assertType */.p_)(common_uri/* URI */.o.isUri(uri)),(0,types/* assertType */.p_)(core_range/* Range */.e.isIRange(range));const ref=yield accessor.get(resolverService/* ITextModelService */.S).createModelReference(uri);try{const data=yield getInlayHints(ref.object.textEditorModel,[core_range/* Range */.e.lift(range)],new RequestMap,cancellation/* CancellationToken */.T.None);return data}finally{ref.dispose()}}))));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/inPlaceReplaceCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class InPlaceReplaceCommand{constructor(editRange,originalSelection,text){this._editRange=editRange,this._originalSelection=originalSelection,this._text=text}getEditOperations(model,builder){builder.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(model,helper){const inverseEditOperations=helper.getInverseEditOperations(),srcRange=inverseEditOperations[0].range;return this._originalSelection.isEmpty()?new core_selection/* Selection */.Y(srcRange.endLineNumber,Math.min(this._originalSelection.positionColumn,srcRange.endColumn),srcRange.endLineNumber,Math.min(this._originalSelection.positionColumn,srcRange.endColumn)):new core_selection/* Selection */.Y(srcRange.endLineNumber,srcRange.endColumn-this._text.length,srcRange.endLineNumber,srcRange.endColumn)}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/inPlaceReplace.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var inPlaceReplace_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},inPlaceReplace_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let InPlaceReplaceController=class InPlaceReplaceController{constructor(editor,editorWorkerService){this.decorationIds=[],this.editor=editor,this.editorWorkerService=editorWorkerService}static get(editor){return editor.getContribution(InPlaceReplaceController.ID)}dispose(){}run(source,up){
// cancel any pending request
this.currentRequest&&this.currentRequest.cancel();const editorSelection=this.editor.getSelection(),model=this.editor.getModel();if(!model||!editorSelection)return;let selection=editorSelection;if(selection.startLineNumber!==selection.endLineNumber)
// Can't accept multiline selection
return;const state=new editorState/* EditorState */.yy(this.editor,5/* Position */),modelURI=model.uri;return this.editorWorkerService.canNavigateValueSet(modelURI)?(this.currentRequest=(0,common_async/* createCancelablePromise */.PG)((token=>this.editorWorkerService.navigateValueSet(modelURI,selection,up))),this.currentRequest.then((result=>{if(!result||!result.range||!result.value)
// No proper result
return;if(!state.validate(this.editor))
// state has changed
return;
// Selection
let editRange=core_range/* Range */.e.lift(result.range),highlightRange=result.range,diff=result.value.length-(selection.endColumn-selection.startColumn);
// highlight
highlightRange={startLineNumber:highlightRange.startLineNumber,startColumn:highlightRange.startColumn,endLineNumber:highlightRange.endLineNumber,endColumn:highlightRange.startColumn+result.value.length},diff>1&&(selection=new core_selection/* Selection */.Y(selection.startLineNumber,selection.startColumn,selection.endLineNumber,selection.endColumn+diff-1));
// Insert new text
const command=new InPlaceReplaceCommand(editRange,selection,result.value);this.editor.pushUndoStop(),this.editor.executeCommand(source,command),this.editor.pushUndoStop(),
// add decoration
this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:highlightRange,options:InPlaceReplaceController.DECORATION}]),
// remove decoration after delay
this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=(0,common_async/* timeout */.Vs)(350),this.decorationRemover.then((()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[]))).catch(errors/* onUnexpectedError */.dL)})).catch(errors/* onUnexpectedError */.dL)):Promise.resolve(void 0)}};InPlaceReplaceController.ID="editor.contrib.inPlaceReplaceController",InPlaceReplaceController.DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),InPlaceReplaceController=inPlaceReplace_decorate([inPlaceReplace_param(1,editorWorkerService/* IEditorWorkerService */.p)],InPlaceReplaceController);class InPlaceReplaceUp extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:nls/* localize */.N("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3154/* Comma */,weight:100/* EditorContrib */}})}run(accessor,editor){const controller=InPlaceReplaceController.get(editor);return controller?controller.run(this.id,!0):Promise.resolve(void 0)}}class InPlaceReplaceDown extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:nls/* localize */.N("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3156/* Period */,weight:100/* EditorContrib */}})}run(accessor,editor){const controller=InPlaceReplaceController.get(editor);return controller?controller.run(this.id,!1):Promise.resolve(void 0)}}(0,editorExtensions/* registerEditorContribution */._K)(InPlaceReplaceController.ID,InPlaceReplaceController),(0,editorExtensions/* registerEditorAction */.Qr)(InPlaceReplaceUp),(0,editorExtensions/* registerEditorAction */.Qr)(InPlaceReplaceDown),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const border=theme.getColor(editorColorRegistry/* editorBracketMatchBorder */.Dl);border&&collector.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${border}; }`)}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js
var trimTrailingWhitespaceCommand=__webpack_require__(760631),cursorTypeOperations=__webpack_require__(840419);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/controller/cursorTypeOperations.js + 1 modules
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/copyLinesCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class CopyLinesCommand{constructor(selection,isCopyingDown,noop){this._selection=selection,this._isCopyingDown=isCopyingDown,this._noop=noop||!1,this._selectionDirection=0/* LTR */,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(model,builder){let s=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,s.startLineNumber<s.endLineNumber&&1===s.endColumn&&(this._endLineNumberDelta=1,s=s.setEndPosition(s.endLineNumber-1,model.getLineMaxColumn(s.endLineNumber-1)));let sourceLines=[];for(let i=s.startLineNumber;i<=s.endLineNumber;i++)sourceLines.push(model.getLineContent(i));const sourceText=sourceLines.join("\n");""===sourceText&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?builder.addEditOperation(new core_range/* Range */.e(s.endLineNumber,model.getLineMaxColumn(s.endLineNumber),s.endLineNumber+1,1),s.endLineNumber===model.getLineCount()?"":"\n"):this._isCopyingDown?builder.addEditOperation(new core_range/* Range */.e(s.startLineNumber,1,s.startLineNumber,1),sourceText+"\n"):builder.addEditOperation(new core_range/* Range */.e(s.endLineNumber,model.getLineMaxColumn(s.endLineNumber),s.endLineNumber,model.getLineMaxColumn(s.endLineNumber)),"\n"+sourceText),this._selectionId=builder.trackSelection(s),this._selectionDirection=this._selection.getDirection()}computeCursorState(model,helper){let result=helper.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let startLineNumber=result.startLineNumber,startColumn=result.startColumn,endLineNumber=result.endLineNumber,endColumn=result.endColumn;0!==this._startLineNumberDelta&&(startLineNumber+=this._startLineNumberDelta,startColumn=1),0!==this._endLineNumberDelta&&(endLineNumber+=this._endLineNumberDelta,endColumn=1),result=core_selection/* Selection */.Y.createWithDirection(startLineNumber,startColumn,endLineNumber,endColumn,this._selectionDirection)}return result}}
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/modes/languageConfiguration.js
var languageConfiguration=__webpack_require__(397354);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class MoveLinesCommand{constructor(selection,isMovingDown,autoIndent){this._selection=selection,this._isMovingDown=isMovingDown,this._autoIndent=autoIndent,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(model,builder){let modelLineCount=model.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===modelLineCount)return void(this._selectionId=builder.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=builder.trackSelection(this._selection));this._moveEndPositionDown=!1;let s=this._selection;s.startLineNumber<s.endLineNumber&&1===s.endColumn&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,model.getLineMaxColumn(s.endLineNumber-1)));const{tabSize:tabSize,indentSize:indentSize,insertSpaces:insertSpaces}=model.getOptions();let indentConverter=this.buildIndentConverter(tabSize,indentSize,insertSpaces),virtualModel={getLineTokens:lineNumber=>model.getLineTokens(lineNumber),getLanguageId:()=>model.getLanguageId(),getLanguageIdAtPosition:(lineNumber,column)=>model.getLanguageIdAtPosition(lineNumber,column),getLineContent:null};if(s.startLineNumber===s.endLineNumber&&1===model.getLineMaxColumn(s.startLineNumber)){
// Current line is empty
let lineNumber=s.startLineNumber,otherLineNumber=this._isMovingDown?lineNumber+1:lineNumber-1;1===model.getLineMaxColumn(otherLineNumber)?
// Other line number is empty too, so no editing is needed
// Add a no-op to force running by the model
builder.addEditOperation(new core_range/* Range */.e(1,1,1,1),null):(
// Type content from other line number on line number
builder.addEditOperation(new core_range/* Range */.e(lineNumber,1,lineNumber,1),model.getLineContent(otherLineNumber)),
// Remove content from other line number
builder.addEditOperation(new core_range/* Range */.e(otherLineNumber,1,otherLineNumber,model.getLineMaxColumn(otherLineNumber)),null)),
// Track selection at the other line number
s=new core_selection/* Selection */.Y(otherLineNumber,1,otherLineNumber,1)}else{let movingLineNumber,movingLineText;if(this._isMovingDown){movingLineNumber=s.endLineNumber+1,movingLineText=model.getLineContent(movingLineNumber),
// Delete line that needs to be moved
builder.addEditOperation(new core_range/* Range */.e(movingLineNumber-1,model.getLineMaxColumn(movingLineNumber-1),movingLineNumber,model.getLineMaxColumn(movingLineNumber)),null);let insertingText=movingLineText;if(this.shouldAutoIndent(model,s)){let movingLineMatchResult=this.matchEnterRule(model,indentConverter,tabSize,movingLineNumber,s.startLineNumber-1);
// if s.startLineNumber - 1 matches onEnter rule, we still honor that.
if(null!==movingLineMatchResult){let oldIndentation=strings/* getLeadingWhitespace */.V8(model.getLineContent(movingLineNumber)),newSpaceCnt=movingLineMatchResult+getSpaceCnt(oldIndentation,tabSize),newIndentation=generateIndent(newSpaceCnt,tabSize,insertSpaces);insertingText=newIndentation+this.trimLeft(movingLineText)}else{
// no enter rule matches, let's check indentatin rules then.
virtualModel.getLineContent=lineNumber=>lineNumber===s.startLineNumber?model.getLineContent(movingLineNumber):model.getLineContent(lineNumber);let indentOfMovingLine=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getGoodIndentForLine(this._autoIndent,virtualModel,model.getLanguageIdAtPosition(movingLineNumber,1),s.startLineNumber,indentConverter);if(null!==indentOfMovingLine){let oldIndentation=strings/* getLeadingWhitespace */.V8(model.getLineContent(movingLineNumber)),newSpaceCnt=getSpaceCnt(indentOfMovingLine,tabSize),oldSpaceCnt=getSpaceCnt(oldIndentation,tabSize);if(newSpaceCnt!==oldSpaceCnt){let newIndentation=generateIndent(newSpaceCnt,tabSize,insertSpaces);insertingText=newIndentation+this.trimLeft(movingLineText)}}}
// add edit operations for moving line first to make sure it's executed after we make indentation change
// to s.startLineNumber
builder.addEditOperation(new core_range/* Range */.e(s.startLineNumber,1,s.startLineNumber,1),insertingText+"\n");let ret=this.matchEnterRuleMovingDown(model,indentConverter,tabSize,s.startLineNumber,movingLineNumber,insertingText);
// check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.
if(null!==ret)0!==ret&&this.getIndentEditsOfMovingBlock(model,builder,s,tabSize,insertSpaces,ret);else{
// it doesn't match onEnter rules, let's check indentation rules then.
virtualModel.getLineContent=lineNumber=>lineNumber===s.startLineNumber?insertingText:lineNumber>=s.startLineNumber+1&&lineNumber<=s.endLineNumber+1?model.getLineContent(lineNumber-1):model.getLineContent(lineNumber);let newIndentatOfMovingBlock=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getGoodIndentForLine(this._autoIndent,virtualModel,model.getLanguageIdAtPosition(movingLineNumber,1),s.startLineNumber+1,indentConverter);if(null!==newIndentatOfMovingBlock){const oldIndentation=strings/* getLeadingWhitespace */.V8(model.getLineContent(s.startLineNumber)),newSpaceCnt=getSpaceCnt(newIndentatOfMovingBlock,tabSize),oldSpaceCnt=getSpaceCnt(oldIndentation,tabSize);if(newSpaceCnt!==oldSpaceCnt){const spaceCntOffset=newSpaceCnt-oldSpaceCnt;this.getIndentEditsOfMovingBlock(model,builder,s,tabSize,insertSpaces,spaceCntOffset)}}}}else
// Insert line that needs to be moved before
builder.addEditOperation(new core_range/* Range */.e(s.startLineNumber,1,s.startLineNumber,1),insertingText+"\n")}else if(movingLineNumber=s.startLineNumber-1,movingLineText=model.getLineContent(movingLineNumber),
// Delete line that needs to be moved
builder.addEditOperation(new core_range/* Range */.e(movingLineNumber,1,movingLineNumber+1,1),null),
// Insert line that needs to be moved after
builder.addEditOperation(new core_range/* Range */.e(s.endLineNumber,model.getLineMaxColumn(s.endLineNumber),s.endLineNumber,model.getLineMaxColumn(s.endLineNumber)),"\n"+movingLineText),this.shouldAutoIndent(model,s)){virtualModel.getLineContent=lineNumber=>lineNumber===movingLineNumber?model.getLineContent(s.startLineNumber):model.getLineContent(lineNumber);let ret=this.matchEnterRule(model,indentConverter,tabSize,s.startLineNumber,s.startLineNumber-2);
// check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.
if(null!==ret)0!==ret&&this.getIndentEditsOfMovingBlock(model,builder,s,tabSize,insertSpaces,ret);else{
// it doesn't match any onEnter rule, let's check indentation rules then.
let indentOfFirstLine=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getGoodIndentForLine(this._autoIndent,virtualModel,model.getLanguageIdAtPosition(s.startLineNumber,1),movingLineNumber,indentConverter);if(null!==indentOfFirstLine){
// adjust the indentation of the moving block
let oldIndent=strings/* getLeadingWhitespace */.V8(model.getLineContent(s.startLineNumber)),newSpaceCnt=getSpaceCnt(indentOfFirstLine,tabSize),oldSpaceCnt=getSpaceCnt(oldIndent,tabSize);if(newSpaceCnt!==oldSpaceCnt){let spaceCntOffset=newSpaceCnt-oldSpaceCnt;this.getIndentEditsOfMovingBlock(model,builder,s,tabSize,insertSpaces,spaceCntOffset)}}}}}this._selectionId=builder.trackSelection(s)}buildIndentConverter(tabSize,indentSize,insertSpaces){return{shiftIndent:indentation=>shiftCommand/* ShiftCommand */.U.shiftIndent(indentation,indentation.length+1,tabSize,indentSize,insertSpaces),unshiftIndent:indentation=>shiftCommand/* ShiftCommand */.U.unshiftIndent(indentation,indentation.length+1,tabSize,indentSize,insertSpaces)}}parseEnterResult(model,indentConverter,tabSize,line,enter){if(enter){let enterPrefix=enter.indentation;enter.indentAction===languageConfiguration/* IndentAction */.wU.None||enter.indentAction===languageConfiguration/* IndentAction */.wU.Indent?enterPrefix=enter.indentation+enter.appendText:enter.indentAction===languageConfiguration/* IndentAction */.wU.IndentOutdent?enterPrefix=enter.indentation:enter.indentAction===languageConfiguration/* IndentAction */.wU.Outdent&&(enterPrefix=indentConverter.unshiftIndent(enter.indentation)+enter.appendText);let movingLineText=model.getLineContent(line);if(this.trimLeft(movingLineText).indexOf(this.trimLeft(enterPrefix))>=0){let oldIndentation=strings/* getLeadingWhitespace */.V8(model.getLineContent(line)),newIndentation=strings/* getLeadingWhitespace */.V8(enterPrefix),indentMetadataOfMovelingLine=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getIndentMetadata(model,line);null!==indentMetadataOfMovelingLine&&2/* DECREASE_MASK */&indentMetadataOfMovelingLine&&(newIndentation=indentConverter.unshiftIndent(newIndentation));let newSpaceCnt=getSpaceCnt(newIndentation,tabSize),oldSpaceCnt=getSpaceCnt(oldIndentation,tabSize);return newSpaceCnt-oldSpaceCnt}}return null}
/**
     *
     * @param model
     * @param indentConverter
     * @param tabSize
     * @param line the line moving down
     * @param futureAboveLineNumber the line which will be at the `line` position
     * @param futureAboveLineText
     */matchEnterRuleMovingDown(model,indentConverter,tabSize,line,futureAboveLineNumber,futureAboveLineText){if(strings/* lastNonWhitespaceIndex */.ow(futureAboveLineText)>=0){
// break
let maxColumn=model.getLineMaxColumn(futureAboveLineNumber),enter=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getEnterAction(this._autoIndent,model,new core_range/* Range */.e(futureAboveLineNumber,maxColumn,futureAboveLineNumber,maxColumn));return this.parseEnterResult(model,indentConverter,tabSize,line,enter)}{
// go upwards, starting from `line - 1`
let validPrecedingLine=line-1;while(validPrecedingLine>=1){let lineContent=model.getLineContent(validPrecedingLine),nonWhitespaceIdx=strings/* lastNonWhitespaceIndex */.ow(lineContent);if(nonWhitespaceIdx>=0)break;validPrecedingLine--}if(validPrecedingLine<1||line>model.getLineCount())return null;let maxColumn=model.getLineMaxColumn(validPrecedingLine),enter=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getEnterAction(this._autoIndent,model,new core_range/* Range */.e(validPrecedingLine,maxColumn,validPrecedingLine,maxColumn));return this.parseEnterResult(model,indentConverter,tabSize,line,enter)}}matchEnterRule(model,indentConverter,tabSize,line,oneLineAbove,previousLineText){let validPrecedingLine=oneLineAbove;while(validPrecedingLine>=1){
// ship empty lines as empty lines just inherit indentation
let lineContent;lineContent=validPrecedingLine===oneLineAbove&&void 0!==previousLineText?previousLineText:model.getLineContent(validPrecedingLine);let nonWhitespaceIdx=strings/* lastNonWhitespaceIndex */.ow(lineContent);if(nonWhitespaceIdx>=0)break;validPrecedingLine--}if(validPrecedingLine<1||line>model.getLineCount())return null;let maxColumn=model.getLineMaxColumn(validPrecedingLine),enter=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getEnterAction(this._autoIndent,model,new core_range/* Range */.e(validPrecedingLine,maxColumn,validPrecedingLine,maxColumn));return this.parseEnterResult(model,indentConverter,tabSize,line,enter)}trimLeft(str){return str.replace(/^\s+/,"")}shouldAutoIndent(model,selection){if(this._autoIndent<4/* Full */)return!1;
// if it's not easy to tokenize, we stop auto indent.
if(!model.isCheapToTokenize(selection.startLineNumber))return!1;let languageAtSelectionStart=model.getLanguageIdAtPosition(selection.startLineNumber,1),languageAtSelectionEnd=model.getLanguageIdAtPosition(selection.endLineNumber,1);return languageAtSelectionStart===languageAtSelectionEnd&&null!==languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getIndentRulesSupport(languageAtSelectionStart)}getIndentEditsOfMovingBlock(model,builder,s,tabSize,insertSpaces,offset){for(let i=s.startLineNumber;i<=s.endLineNumber;i++){let lineContent=model.getLineContent(i),originalIndent=strings/* getLeadingWhitespace */.V8(lineContent),originalSpacesCnt=getSpaceCnt(originalIndent,tabSize),newSpacesCnt=originalSpacesCnt+offset,newIndent=generateIndent(newSpacesCnt,tabSize,insertSpaces);newIndent!==originalIndent&&(builder.addEditOperation(new core_range/* Range */.e(i,1,i,originalIndent.length+1),newIndent),i===s.endLineNumber&&s.endColumn<=originalIndent.length+1&&""===newIndent&&(
// as users select part of the original indent white spaces
// when we adjust the indentation of endLine, we should adjust the cursor position as well.
this._moveEndLineSelectionShrink=!0))}}computeCursorState(model,helper){let result=helper.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(result=result.setEndPosition(result.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&result.startLineNumber<result.endLineNumber&&(result=result.setEndPosition(result.endLineNumber,2)),result}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/sortLinesCommand.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class SortLinesCommand{constructor(selection,descending){this.selection=selection,this.descending=descending,this.selectionId=null}static getCollator(){return SortLinesCommand._COLLATOR||(SortLinesCommand._COLLATOR=new Intl.Collator),SortLinesCommand._COLLATOR}getEditOperations(model,builder){let op=sortLines(model,this.selection,this.descending);op&&builder.addEditOperation(op.range,op.text),this.selectionId=builder.trackSelection(this.selection)}computeCursorState(model,helper){return helper.getTrackedSelection(this.selectionId)}static canRun(model,selection,descending){if(null===model)return!1;let data=getSortData(model,selection,descending);if(!data)return!1;for(let i=0,len=data.before.length;i<len;i++)if(data.before[i]!==data.after[i])return!0;return!1}}function getSortData(model,selection,descending){let startLineNumber=selection.startLineNumber,endLineNumber=selection.endLineNumber;
// Nothing to sort if user didn't select anything.
if(1===selection.endColumn&&endLineNumber--,startLineNumber>=endLineNumber)return null;let linesToSort=[];
// Get the contents of the selection to be sorted.
for(let lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++)linesToSort.push(model.getLineContent(lineNumber));let sorted=linesToSort.slice(0);return sorted.sort(SortLinesCommand.getCollator().compare),
// If descending, reverse the order.
!0===descending&&(sorted=sorted.reverse()),{startLineNumber:startLineNumber,endLineNumber:endLineNumber,before:linesToSort,after:sorted}}
/**
 * Generate commands for sorting lines on a model.
 */function sortLines(model,selection,descending){let data=getSortData(model,selection,descending);return data?editOperation/* EditOperation */.h.replace(new core_range/* Range */.e(data.startLineNumber,1,data.endLineNumber,model.getLineMaxColumn(data.endLineNumber)),data.after.join("\n")):null}SortLinesCommand._COLLATOR=null;// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/linesOperations.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
// copy lines
class AbstractCopyLinesAction extends editorExtensions/* EditorAction */.R6{constructor(down,opts){super(opts),this.down=down}run(_accessor,editor){if(!editor.hasModel())return;const selections=editor.getSelections().map(((selection,index)=>({selection:selection,index:index,ignore:!1})));selections.sort(((a,b)=>core_range/* Range */.e.compareRangesUsingStarts(a.selection,b.selection)));
// Remove selections that would result in copying the same line
let prev=selections[0];for(let i=1;i<selections.length;i++){const curr=selections[i];prev.selection.endLineNumber===curr.selection.startLineNumber&&(
// these two selections would copy the same line
prev.index<curr.index?
// prev wins
curr.ignore=!0:(
// curr wins
prev.ignore=!0,prev=curr))}const commands=[];for(const selection of selections)commands.push(new CopyLinesCommand(selection.selection,this.down,selection.ignore));editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}class CopyLinesUpAction extends AbstractCopyLinesAction{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:nls/* localize */.N("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1552/* UpArrow */,linux:{primary:3600/* UpArrow */},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"2_line",title:nls/* localize */.N({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class CopyLinesDownAction extends AbstractCopyLinesAction{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:nls/* localize */.N("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1554/* DownArrow */,linux:{primary:3602/* DownArrow */},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"2_line",title:nls/* localize */.N({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class DuplicateSelectionAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.duplicateSelection",label:nls/* localize */.N("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:editorContextKeys/* EditorContextKeys */.u.writable,menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"2_line",title:nls/* localize */.N({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(accessor,editor,args){if(!editor.hasModel())return;const commands=[],selections=editor.getSelections(),model=editor.getModel();for(const selection of selections)if(selection.isEmpty())commands.push(new CopyLinesCommand(selection,!0));else{const insertSelection=new core_selection/* Selection */.Y(selection.endLineNumber,selection.endColumn,selection.endLineNumber,selection.endColumn);commands.push(new replaceCommand/* ReplaceCommandThatSelectsText */.OY(insertSelection,model.getValueInRange(selection)))}editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}
// move lines
class AbstractMoveLinesAction extends editorExtensions/* EditorAction */.R6{constructor(down,opts){super(opts),this.down=down}run(_accessor,editor){let commands=[],selections=editor.getSelections()||[];const autoIndent=editor.getOption(9/* autoIndent */);for(const selection of selections)commands.push(new MoveLinesCommand(selection,this.down,autoIndent));editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}class MoveLinesUpAction extends AbstractMoveLinesAction{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:nls/* localize */.N("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:528/* UpArrow */,linux:{primary:528/* UpArrow */},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"2_line",title:nls/* localize */.N({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class MoveLinesDownAction extends AbstractMoveLinesAction{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:nls/* localize */.N("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:530/* DownArrow */,linux:{primary:530/* DownArrow */},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"2_line",title:nls/* localize */.N({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class AbstractSortLinesAction extends editorExtensions/* EditorAction */.R6{constructor(descending,opts){super(opts),this.descending=descending}run(_accessor,editor){const selections=editor.getSelections()||[];for(const selection of selections)if(!SortLinesCommand.canRun(editor.getModel(),selection,this.descending))return;let commands=[];for(let i=0,len=selections.length;i<len;i++)commands[i]=new SortLinesCommand(selections[i],this.descending);editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}class SortLinesAscendingAction extends AbstractSortLinesAction{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:nls/* localize */.N("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}class SortLinesDescendingAction extends AbstractSortLinesAction{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:nls/* localize */.N("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}class DeleteDuplicateLinesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:nls/* localize */.N("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}run(_accessor,editor){if(!editor.hasModel())return;let model=editor.getModel();if(1===model.getLineCount()&&1===model.getLineMaxColumn(1))return;let edits=[],endCursorState=[],linesDeleted=0;for(let selection of editor.getSelections()){let uniqueLines=new Set,lines=[];for(let i=selection.startLineNumber;i<=selection.endLineNumber;i++){let line=model.getLineContent(i);uniqueLines.has(line)||(lines.push(line),uniqueLines.add(line))}let selectionToReplace=new core_selection/* Selection */.Y(selection.startLineNumber,1,selection.endLineNumber,model.getLineMaxColumn(selection.endLineNumber)),adjustedSelectionStart=selection.startLineNumber-linesDeleted,finalSelection=new core_selection/* Selection */.Y(adjustedSelectionStart,1,adjustedSelectionStart+lines.length-1,lines[lines.length-1].length);edits.push(editOperation/* EditOperation */.h.replace(selectionToReplace,lines.join("\n"))),endCursorState.push(finalSelection),linesDeleted+=selection.endLineNumber-selection.startLineNumber+1-lines.length}editor.pushUndoStop(),editor.executeEdits(this.id,edits,endCursorState),editor.pushUndoStop()}}class TrimTrailingWhitespaceAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:TrimTrailingWhitespaceAction.ID,label:nls/* localize */.N("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2102/* KeyX */),weight:100/* EditorContrib */}})}run(_accessor,editor,args){let cursors=[];"auto-save"===args.reason&&(
// See https://github.com/editorconfig/editorconfig-vscode/issues/47
// It is very convenient for the editor config extension to invoke this action.
// So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.
cursors=(editor.getSelections()||[]).map((s=>new core_position/* Position */.L(s.positionLineNumber,s.positionColumn))));let selection=editor.getSelection();if(null===selection)return;let command=new trimTrailingWhitespaceCommand/* TrimTrailingWhitespaceCommand */.V(selection,cursors);editor.pushUndoStop(),editor.executeCommands(this.id,[command]),editor.pushUndoStop()}}TrimTrailingWhitespaceAction.ID="editor.action.trimTrailingWhitespace";class DeleteLinesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.deleteLines",label:nls/* localize */.N("lines.delete","Delete Line"),alias:"Delete Line",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:3113/* KeyK */,weight:100/* EditorContrib */}})}run(_accessor,editor){if(!editor.hasModel())return;let ops=this._getLinesToRemove(editor),model=editor.getModel();if(1===model.getLineCount()&&1===model.getLineMaxColumn(1))
// Model is empty
return;let linesDeleted=0,edits=[],cursorState=[];for(let i=0,len=ops.length;i<len;i++){const op=ops[i];let startLineNumber=op.startLineNumber,endLineNumber=op.endLineNumber,startColumn=1,endColumn=model.getLineMaxColumn(endLineNumber);endLineNumber<model.getLineCount()?(endLineNumber+=1,endColumn=1):startLineNumber>1&&(startLineNumber-=1,startColumn=model.getLineMaxColumn(startLineNumber)),edits.push(editOperation/* EditOperation */.h.replace(new core_selection/* Selection */.Y(startLineNumber,startColumn,endLineNumber,endColumn),"")),cursorState.push(new core_selection/* Selection */.Y(startLineNumber-linesDeleted,op.positionColumn,startLineNumber-linesDeleted,op.positionColumn)),linesDeleted+=op.endLineNumber-op.startLineNumber+1}editor.pushUndoStop(),editor.executeEdits(this.id,edits,cursorState),editor.pushUndoStop()}_getLinesToRemove(editor){
// Construct delete operations
let operations=editor.getSelections().map((s=>{let endLineNumber=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&1===s.endColumn&&(endLineNumber-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:endLineNumber,positionColumn:s.positionColumn}}));
// Sort delete operations
operations.sort(((a,b)=>a.startLineNumber===b.startLineNumber?a.endLineNumber-b.endLineNumber:a.startLineNumber-b.startLineNumber));
// Merge delete operations which are adjacent or overlapping
let mergedOperations=[],previousOperation=operations[0];for(let i=1;i<operations.length;i++)previousOperation.endLineNumber+1>=operations[i].startLineNumber?
// Merge current operations into the previous one
previousOperation.endLineNumber=operations[i].endLineNumber:(
// Push previous operation
mergedOperations.push(previousOperation),previousOperation=operations[i]);
// Push the last operation
return mergedOperations.push(previousOperation),mergedOperations}}class IndentLinesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.indentLines",label:nls/* localize */.N("lines.indent","Indent Line"),alias:"Indent Line",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2137/* BracketRight */,weight:100/* EditorContrib */}})}run(_accessor,editor){const viewModel=editor._getViewModel();viewModel&&(editor.pushUndoStop(),editor.executeCommands(this.id,cursorTypeOperations/* TypeOperations */.u.indent(viewModel.cursorConfig,editor.getModel(),editor.getSelections())),editor.pushUndoStop())}}class OutdentLinesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.outdentLines",label:nls/* localize */.N("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2135/* BracketLeft */,weight:100/* EditorContrib */}})}run(_accessor,editor){coreCommands/* CoreEditingCommands */.wk.Outdent.runEditorCommand(_accessor,editor,null)}}class InsertLineBeforeAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.insertLineBefore",label:nls/* localize */.N("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3075/* Enter */,weight:100/* EditorContrib */}})}run(_accessor,editor){const viewModel=editor._getViewModel();viewModel&&(editor.pushUndoStop(),editor.executeCommands(this.id,cursorTypeOperations/* TypeOperations */.u.lineInsertBefore(viewModel.cursorConfig,editor.getModel(),editor.getSelections())))}}class InsertLineAfterAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.insertLineAfter",label:nls/* localize */.N("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2051/* Enter */,weight:100/* EditorContrib */}})}run(_accessor,editor){const viewModel=editor._getViewModel();viewModel&&(editor.pushUndoStop(),editor.executeCommands(this.id,cursorTypeOperations/* TypeOperations */.u.lineInsertAfter(viewModel.cursorConfig,editor.getModel(),editor.getSelections())))}}class AbstractDeleteAllToBoundaryAction extends editorExtensions/* EditorAction */.R6{run(_accessor,editor){if(!editor.hasModel())return;const primaryCursor=editor.getSelection();let rangesToDelete=this._getRangesToDelete(editor),effectiveRanges=[];
// merge overlapping selections
for(let i=0,count=rangesToDelete.length-1;i<count;i++){let range=rangesToDelete[i],nextRange=rangesToDelete[i+1];null===core_range/* Range */.e.intersectRanges(range,nextRange)?effectiveRanges.push(range):rangesToDelete[i+1]=core_range/* Range */.e.plusRange(range,nextRange)}effectiveRanges.push(rangesToDelete[rangesToDelete.length-1]);let endCursorState=this._getEndCursorState(primaryCursor,effectiveRanges),edits=effectiveRanges.map((range=>editOperation/* EditOperation */.h.replace(range,"")));editor.pushUndoStop(),editor.executeEdits(this.id,edits,endCursorState),editor.pushUndoStop()}}class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction{constructor(){super({id:"deleteAllLeft",label:nls/* localize */.N("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:2049/* Backspace */},weight:100/* EditorContrib */}})}_getEndCursorState(primaryCursor,rangesToDelete){let endPrimaryCursor=null,endCursorState=[],deletedLines=0;return rangesToDelete.forEach((range=>{let endCursor;if(1===range.endColumn&&deletedLines>0){let newStartLine=range.startLineNumber-deletedLines;endCursor=new core_selection/* Selection */.Y(newStartLine,range.startColumn,newStartLine,range.startColumn)}else endCursor=new core_selection/* Selection */.Y(range.startLineNumber,range.startColumn,range.startLineNumber,range.startColumn);deletedLines+=range.endLineNumber-range.startLineNumber,range.intersectRanges(primaryCursor)?endPrimaryCursor=endCursor:endCursorState.push(endCursor)})),endPrimaryCursor&&endCursorState.unshift(endPrimaryCursor),endCursorState}_getRangesToDelete(editor){let selections=editor.getSelections();if(null===selections)return[];let rangesToDelete=selections,model=editor.getModel();return null===model?[]:(rangesToDelete.sort(core_range/* Range */.e.compareRangesUsingStarts),rangesToDelete=rangesToDelete.map((selection=>{if(selection.isEmpty()){if(1===selection.startColumn){let deleteFromLine=Math.max(1,selection.startLineNumber-1),deleteFromColumn=1===selection.startLineNumber?1:model.getLineContent(deleteFromLine).length+1;return new core_range/* Range */.e(deleteFromLine,deleteFromColumn,selection.startLineNumber,1)}return new core_range/* Range */.e(selection.startLineNumber,1,selection.startLineNumber,selection.startColumn)}return new core_range/* Range */.e(selection.startLineNumber,1,selection.endLineNumber,selection.endColumn)})),rangesToDelete)}}class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction{constructor(){super({id:"deleteAllRight",label:nls/* localize */.N("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:297/* KeyK */,secondary:[2068/* Delete */]},weight:100/* EditorContrib */}})}_getEndCursorState(primaryCursor,rangesToDelete){let endPrimaryCursor=null,endCursorState=[];for(let i=0,len=rangesToDelete.length,offset=0;i<len;i++){let range=rangesToDelete[i],endCursor=new core_selection/* Selection */.Y(range.startLineNumber-offset,range.startColumn,range.startLineNumber-offset,range.startColumn);range.intersectRanges(primaryCursor)?endPrimaryCursor=endCursor:endCursorState.push(endCursor)}return endPrimaryCursor&&endCursorState.unshift(endPrimaryCursor),endCursorState}_getRangesToDelete(editor){let model=editor.getModel();if(null===model)return[];let selections=editor.getSelections();if(null===selections)return[];let rangesToDelete=selections.map((sel=>{if(sel.isEmpty()){const maxColumn=model.getLineMaxColumn(sel.startLineNumber);return sel.startColumn===maxColumn?new core_range/* Range */.e(sel.startLineNumber,sel.startColumn,sel.startLineNumber+1,1):new core_range/* Range */.e(sel.startLineNumber,sel.startColumn,sel.startLineNumber,maxColumn)}return sel}));return rangesToDelete.sort(core_range/* Range */.e.compareRangesUsingStarts),rangesToDelete}}class JoinLinesAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.joinLines",label:nls/* localize */.N("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:0,mac:{primary:296/* KeyJ */},weight:100/* EditorContrib */}})}run(_accessor,editor){let selections=editor.getSelections();if(null===selections)return;let primaryCursor=editor.getSelection();if(null===primaryCursor)return;selections.sort(core_range/* Range */.e.compareRangesUsingStarts);let reducedSelections=[],lastSelection=selections.reduce(((previousValue,currentValue)=>previousValue.isEmpty()?previousValue.endLineNumber===currentValue.startLineNumber?(primaryCursor.equalsSelection(previousValue)&&(primaryCursor=currentValue),currentValue):currentValue.startLineNumber>previousValue.endLineNumber+1?(reducedSelections.push(previousValue),currentValue):new core_selection/* Selection */.Y(previousValue.startLineNumber,previousValue.startColumn,currentValue.endLineNumber,currentValue.endColumn):currentValue.startLineNumber>previousValue.endLineNumber?(reducedSelections.push(previousValue),currentValue):new core_selection/* Selection */.Y(previousValue.startLineNumber,previousValue.startColumn,currentValue.endLineNumber,currentValue.endColumn)));reducedSelections.push(lastSelection);let model=editor.getModel();if(null===model)return;let edits=[],endCursorState=[],endPrimaryCursor=primaryCursor,lineOffset=0;for(let i=0,len=reducedSelections.length;i<len;i++){let endLineNumber,endColumn,selection=reducedSelections[i],startLineNumber=selection.startLineNumber,startColumn=1,columnDeltaOffset=0,selectionEndPositionOffset=model.getLineContent(selection.endLineNumber).length-selection.endColumn;if(selection.isEmpty()||selection.startLineNumber===selection.endLineNumber){let position=selection.getStartPosition();position.lineNumber<model.getLineCount()?(endLineNumber=startLineNumber+1,endColumn=model.getLineMaxColumn(endLineNumber)):(endLineNumber=position.lineNumber,endColumn=model.getLineMaxColumn(position.lineNumber))}else endLineNumber=selection.endLineNumber,endColumn=model.getLineMaxColumn(endLineNumber);let trimmedLinesContent=model.getLineContent(startLineNumber);for(let i=startLineNumber+1;i<=endLineNumber;i++){let lineText=model.getLineContent(i),firstNonWhitespaceIdx=model.getLineFirstNonWhitespaceColumn(i);if(firstNonWhitespaceIdx>=1){let insertSpace=!0;""===trimmedLinesContent&&(insertSpace=!1),!insertSpace||" "!==trimmedLinesContent.charAt(trimmedLinesContent.length-1)&&"\t"!==trimmedLinesContent.charAt(trimmedLinesContent.length-1)||(insertSpace=!1,trimmedLinesContent=trimmedLinesContent.replace(/[\s\uFEFF\xA0]+$/g," "));let lineTextWithoutIndent=lineText.substr(firstNonWhitespaceIdx-1);trimmedLinesContent+=(insertSpace?" ":"")+lineTextWithoutIndent,columnDeltaOffset=insertSpace?lineTextWithoutIndent.length+1:lineTextWithoutIndent.length}else columnDeltaOffset=0}let deleteSelection=new core_range/* Range */.e(startLineNumber,startColumn,endLineNumber,endColumn);if(!deleteSelection.isEmpty()){let resultSelection;selection.isEmpty()?(edits.push(editOperation/* EditOperation */.h.replace(deleteSelection,trimmedLinesContent)),resultSelection=new core_selection/* Selection */.Y(deleteSelection.startLineNumber-lineOffset,trimmedLinesContent.length-columnDeltaOffset+1,startLineNumber-lineOffset,trimmedLinesContent.length-columnDeltaOffset+1)):selection.startLineNumber===selection.endLineNumber?(edits.push(editOperation/* EditOperation */.h.replace(deleteSelection,trimmedLinesContent)),resultSelection=new core_selection/* Selection */.Y(selection.startLineNumber-lineOffset,selection.startColumn,selection.endLineNumber-lineOffset,selection.endColumn)):(edits.push(editOperation/* EditOperation */.h.replace(deleteSelection,trimmedLinesContent)),resultSelection=new core_selection/* Selection */.Y(selection.startLineNumber-lineOffset,selection.startColumn,selection.startLineNumber-lineOffset,trimmedLinesContent.length-selectionEndPositionOffset)),null!==core_range/* Range */.e.intersectRanges(deleteSelection,primaryCursor)?endPrimaryCursor=resultSelection:endCursorState.push(resultSelection)}lineOffset+=deleteSelection.endLineNumber-deleteSelection.startLineNumber}endCursorState.unshift(endPrimaryCursor),editor.pushUndoStop(),editor.executeEdits(this.id,edits,endCursorState),editor.pushUndoStop()}}class TransposeAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.transpose",label:nls/* localize */.N("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}run(_accessor,editor){let selections=editor.getSelections();if(null===selections)return;let model=editor.getModel();if(null===model)return;let commands=[];for(let i=0,len=selections.length;i<len;i++){let selection=selections[i];if(!selection.isEmpty())continue;let cursor=selection.getStartPosition(),maxColumn=model.getLineMaxColumn(cursor.lineNumber);if(cursor.column>=maxColumn){if(cursor.lineNumber===model.getLineCount())continue;
// The cursor is at the end of current line and current line is not empty
// then we transpose the character before the cursor and the line break if there is any following line.
let deleteSelection=new core_range/* Range */.e(cursor.lineNumber,Math.max(1,cursor.column-1),cursor.lineNumber+1,1),chars=model.getValueInRange(deleteSelection).split("").reverse().join("");commands.push(new replaceCommand/* ReplaceCommand */.T4(new core_selection/* Selection */.Y(cursor.lineNumber,Math.max(1,cursor.column-1),cursor.lineNumber+1,1),chars))}else{let deleteSelection=new core_range/* Range */.e(cursor.lineNumber,Math.max(1,cursor.column-1),cursor.lineNumber,cursor.column+1),chars=model.getValueInRange(deleteSelection).split("").reverse().join("");commands.push(new replaceCommand/* ReplaceCommandThatPreservesSelection */.hP(deleteSelection,chars,new core_selection/* Selection */.Y(cursor.lineNumber,cursor.column+1,cursor.lineNumber,cursor.column+1)))}}editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}class AbstractCaseAction extends editorExtensions/* EditorAction */.R6{run(_accessor,editor){const selections=editor.getSelections();if(null===selections)return;const model=editor.getModel();if(null===model)return;const wordSeparators=editor.getOption(115/* wordSeparators */),textEdits=[];for(const selection of selections)if(selection.isEmpty()){const cursor=selection.getStartPosition(),word=editor.getConfiguredWordAtPosition(cursor);if(!word)continue;const wordRange=new core_range/* Range */.e(cursor.lineNumber,word.startColumn,cursor.lineNumber,word.endColumn),text=model.getValueInRange(wordRange);textEdits.push(editOperation/* EditOperation */.h.replace(wordRange,this._modifyText(text,wordSeparators)))}else{const text=model.getValueInRange(selection);textEdits.push(editOperation/* EditOperation */.h.replace(selection,this._modifyText(text,wordSeparators)))}editor.pushUndoStop(),editor.executeEdits(this.id,textEdits),editor.pushUndoStop()}}class UpperCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToUppercase",label:nls/* localize */.N("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}_modifyText(text,wordSeparators){return text.toLocaleUpperCase()}}class LowerCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToLowercase",label:nls/* localize */.N("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}_modifyText(text,wordSeparators){return text.toLocaleLowerCase()}}class BackwardsCompatibleRegExp{constructor(_pattern,_flags){this._pattern=_pattern,this._flags=_flags,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(err){
// this browser does not support this regular expression
}}return this._actual}isSupported(){return null!==this.get()}}class TitleCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToTitlecase",label:nls/* localize */.N("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}_modifyText(text,wordSeparators){const titleBoundary=TitleCaseAction.titleBoundary.get();return titleBoundary?text.toLocaleLowerCase().replace(titleBoundary,(b=>b.toLocaleUpperCase())):text}}TitleCaseAction.titleBoundary=new BackwardsCompatibleRegExp("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class SnakeCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToSnakecase",label:nls/* localize */.N("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}_modifyText(text,wordSeparators){const caseBoundary=SnakeCaseAction.caseBoundary.get(),singleLetters=SnakeCaseAction.singleLetters.get();return caseBoundary&&singleLetters?text.replace(caseBoundary,"$1_$2").replace(singleLetters,"$1_$2$3").toLocaleLowerCase():text}}SnakeCaseAction.caseBoundary=new BackwardsCompatibleRegExp("(\\p{Ll})(\\p{Lu})","gmu"),SnakeCaseAction.singleLetters=new BackwardsCompatibleRegExp("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu"),(0,editorExtensions/* registerEditorAction */.Qr)(CopyLinesUpAction),(0,editorExtensions/* registerEditorAction */.Qr)(CopyLinesDownAction),(0,editorExtensions/* registerEditorAction */.Qr)(DuplicateSelectionAction),(0,editorExtensions/* registerEditorAction */.Qr)(MoveLinesUpAction),(0,editorExtensions/* registerEditorAction */.Qr)(MoveLinesDownAction),(0,editorExtensions/* registerEditorAction */.Qr)(SortLinesAscendingAction),(0,editorExtensions/* registerEditorAction */.Qr)(SortLinesDescendingAction),(0,editorExtensions/* registerEditorAction */.Qr)(DeleteDuplicateLinesAction),(0,editorExtensions/* registerEditorAction */.Qr)(TrimTrailingWhitespaceAction),(0,editorExtensions/* registerEditorAction */.Qr)(DeleteLinesAction),(0,editorExtensions/* registerEditorAction */.Qr)(IndentLinesAction),(0,editorExtensions/* registerEditorAction */.Qr)(OutdentLinesAction),(0,editorExtensions/* registerEditorAction */.Qr)(InsertLineBeforeAction),(0,editorExtensions/* registerEditorAction */.Qr)(InsertLineAfterAction),(0,editorExtensions/* registerEditorAction */.Qr)(DeleteAllLeftAction),(0,editorExtensions/* registerEditorAction */.Qr)(DeleteAllRightAction),(0,editorExtensions/* registerEditorAction */.Qr)(JoinLinesAction),(0,editorExtensions/* registerEditorAction */.Qr)(TransposeAction),(0,editorExtensions/* registerEditorAction */.Qr)(UpperCaseAction),(0,editorExtensions/* registerEditorAction */.Qr)(LowerCaseAction),SnakeCaseAction.caseBoundary.isSupported()&&SnakeCaseAction.singleLetters.isSupported()&&(0,editorExtensions/* registerEditorAction */.Qr)(SnakeCaseAction),TitleCaseAction.titleBoundary.isSupported()&&(0,editorExtensions/* registerEditorAction */.Qr)(TitleCaseAction);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/linkedEditing/linkedEditing.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var linkedEditing_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},linkedEditing_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},linkedEditing_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE=new contextkey/* RawContextKey */.uy("LinkedEditingInputVisible",!1),DECORATION_CLASS_NAME="linked-editing-decoration";let LinkedEditingContribution=class LinkedEditingContribution extends lifecycle/* Disposable */.JT{constructor(editor,contextKeyService){super(),this._debounceDuration=200,this._localToDispose=this._register(new lifecycle/* DisposableStore */.SL),this._editor=editor,this._enabled=!1,this._visibleContextKey=CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new lifecycle/* DisposableStore */.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(61/* linkedEditing */)||e.hasChanged(81/* renameOnType */))&&this.reinitialize(!1)}))),this._register(modes/* LinkedEditingRangeProviderRegistry */.id.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}static get(editor){return editor.getContribution(LinkedEditingContribution.ID)}reinitialize(forceRefresh){const model=this._editor.getModel(),isEnabled=null!==model&&(this._editor.getOption(61/* linkedEditing */)||this._editor.getOption(81/* renameOnType */))&&modes/* LinkedEditingRangeProviderRegistry */.id.has(model);if(isEnabled===this._enabled&&!forceRefresh)return;if(this._enabled=isEnabled,this.clearRanges(),this._localToDispose.clear(),!isEnabled||null===model)return;this._languageWordPattern=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getWordDefinition(model.getLanguageId()),this._localToDispose.add(model.onDidChangeLanguageConfiguration((()=>{this._languageWordPattern=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getWordDefinition(model.getLanguageId())})));const rangeUpdateScheduler=new common_async/* Delayer */.vp(this._debounceDuration),triggerRangeUpdate=()=>{this._rangeUpdateTriggerPromise=rangeUpdateScheduler.trigger((()=>this.updateRanges()),this._debounceDuration)},rangeSyncScheduler=new common_async/* Delayer */.vp(0),triggerRangeSync=decorations=>{this._rangeSyncTriggerPromise=rangeSyncScheduler.trigger((()=>this._syncRanges(decorations)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{triggerRangeUpdate()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const referenceRange=model.getDecorationRange(this._currentDecorations[0]);if(referenceRange&&e.changes.every((c=>referenceRange.intersectRanges(c.range))))return void triggerRangeSync(this._currentDecorations)}triggerRangeUpdate()}))),this._localToDispose.add({dispose:()=>{rangeUpdateScheduler.cancel(),rangeSyncScheduler.cancel()}}),this.updateRanges()}_syncRanges(decorations){
// dalayed invocation, make sure we're still on
if(!this._editor.hasModel()||decorations!==this._currentDecorations||0===decorations.length)
// nothing to do
return;const model=this._editor.getModel(),referenceRange=model.getDecorationRange(decorations[0]);if(!referenceRange||referenceRange.startLineNumber!==referenceRange.endLineNumber)return this.clearRanges();const referenceValue=model.getValueInRange(referenceRange);if(this._currentWordPattern){const match=referenceValue.match(this._currentWordPattern),matchLength=match?match[0].length:0;if(matchLength!==referenceValue.length)return this.clearRanges()}let edits=[];for(let i=1,len=decorations.length;i<len;i++){const mirrorRange=model.getDecorationRange(decorations[i]);if(mirrorRange)if(mirrorRange.startLineNumber!==mirrorRange.endLineNumber)edits.push({range:mirrorRange,text:referenceValue});else{let oldValue=model.getValueInRange(mirrorRange),newValue=referenceValue,rangeStartColumn=mirrorRange.startColumn,rangeEndColumn=mirrorRange.endColumn;const commonPrefixLength=strings/* commonPrefixLength */.Mh(oldValue,newValue);rangeStartColumn+=commonPrefixLength,oldValue=oldValue.substr(commonPrefixLength),newValue=newValue.substr(commonPrefixLength);const commonSuffixLength=strings/* commonSuffixLength */.P1(oldValue,newValue);rangeEndColumn-=commonSuffixLength,oldValue=oldValue.substr(0,oldValue.length-commonSuffixLength),newValue=newValue.substr(0,newValue.length-commonSuffixLength),rangeStartColumn===rangeEndColumn&&0===newValue.length||edits.push({range:new core_range/* Range */.e(mirrorRange.startLineNumber,rangeStartColumn,mirrorRange.endLineNumber,rangeEndColumn),text:newValue})}}if(0!==edits.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const prevEditOperationType=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",edits),this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(force=!1){return linkedEditing_awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const position=this._editor.getPosition();if(!this._enabled&&!force||this._editor.getSelections().length>1)
// disabled or multicursor
return void this.clearRanges();const model=this._editor.getModel(),modelVersionId=model.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===modelVersionId){if(position.equals(this._currentRequestPosition))return;// same position
if(this._currentDecorations&&this._currentDecorations.length>0){const range=model.getDecorationRange(this._currentDecorations[0]);if(range&&range.containsPosition(position))return;// just moving inside the existing primary range
}}this._currentRequestPosition=position,this._currentRequestModelVersion=modelVersionId;const request=(0,common_async/* createCancelablePromise */.PG)((token=>linkedEditing_awaiter(this,void 0,void 0,(function*(){try{const response=yield getLinkedEditingRanges(model,position,token);if(request!==this._currentRequest)return;if(this._currentRequest=null,modelVersionId!==model.getVersionId())return;let ranges=[];(null===response||void 0===response?void 0:response.ranges)&&(ranges=response.ranges),this._currentWordPattern=(null===response||void 0===response?void 0:response.wordPattern)||this._languageWordPattern;let foundReferenceRange=!1;for(let i=0,len=ranges.length;i<len;i++)if(core_range/* Range */.e.containsPosition(ranges[i],position)){if(foundReferenceRange=!0,0!==i){const referenceRange=ranges[i];ranges.splice(i,1),ranges.unshift(referenceRange)}break}if(!foundReferenceRange)
// Cannot do linked editing if the ranges are not where the cursor is...
return void this.clearRanges();const decorations=ranges.map((range=>({range:range,options:LinkedEditingContribution.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,decorations)}catch(err){(0,errors/* isPromiseCanceledError */.VV)(err)||(0,errors/* onUnexpectedError */.dL)(err),this._currentRequest!==request&&this._currentRequest||
// stop if we are still the latest request
this.clearRanges()}}))));return this._currentRequest=request,request}))}};LinkedEditingContribution.ID="editor.contrib.linkedEditing",LinkedEditingContribution.DECORATION=textModel/* ModelDecorationOptions */.qx.register({description:"linked-editing",stickiness:0/* AlwaysGrowsWhenTypingAtEdges */,className:DECORATION_CLASS_NAME}),LinkedEditingContribution=linkedEditing_decorate([linkedEditing_param(1,contextkey/* IContextKeyService */.i6)],LinkedEditingContribution);class LinkedEditingAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.linkedEditing",label:nls/* localize */.N("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasRenameProvider),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3132/* F2 */,weight:100/* EditorContrib */}})}runCommand(accessor,args){const editorService=accessor.get(services_codeEditorService/* ICodeEditorService */.$),[uri,pos]=Array.isArray(args)&&args||[void 0,void 0];return common_uri/* URI */.o.isUri(uri)&&core_position/* Position */.L.isIPosition(pos)?editorService.openCodeEditor({resource:uri},editorService.getActiveCodeEditor()).then((editor=>{editor&&(editor.setPosition(pos),editor.invokeWithinContext((accessor=>(this.reportTelemetry(accessor,editor),this.run(accessor,editor)))))}),errors/* onUnexpectedError */.dL):super.runCommand(accessor,args)}run(_accessor,editor){const controller=LinkedEditingContribution.get(editor);return controller?Promise.resolve(controller.updateRanges(!0)):Promise.resolve()}}const LinkedEditingCommand=editorExtensions/* EditorCommand */._l.bindToContribution(LinkedEditingContribution.get);function getLinkedEditingRanges(model,position,token){const orderedByScore=modes/* LinkedEditingRangeProviderRegistry */.id.ordered(model);
// in order of score ask the linked editing range provider
// until someone response with a good result
// (good = not null)
return(0,common_async/* first */.Ps)(orderedByScore.map((provider=>()=>linkedEditing_awaiter(this,void 0,void 0,(function*(){try{return yield provider.provideLinkedEditingRanges(model,position,token)}catch(e){return void(0,errors/* onUnexpectedExternalError */.Cp)(e)}})))),(result=>!!result&&arrays/* isNonEmptyArray */.Of(null===result||void 0===result?void 0:result.ranges)))}(0,editorExtensions/* registerEditorCommand */.fK)(new LinkedEditingCommand({id:"cancelLinkedEditingInput",precondition:CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,handler:x=>x.clearRanges(),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,weight:199,primary:9/* Escape */,secondary:[1033/* Escape */]}}));const editorLinkedEditingBackground=(0,colorRegistry/* registerColor */.P6)("editor.linkedEditingBackground",{dark:common_color/* Color */.Il.fromHex("#f00").transparent(.3),light:common_color/* Color */.Il.fromHex("#f00").transparent(.3),hc:common_color/* Color */.Il.fromHex("#f00").transparent(.3)},nls/* localize */.N("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const editorLinkedEditingBackgroundColor=theme.getColor(editorLinkedEditingBackground);editorLinkedEditingBackgroundColor&&collector.addRule(`.monaco-editor .${DECORATION_CLASS_NAME} { background: ${editorLinkedEditingBackgroundColor}; border-left-color: ${editorLinkedEditingBackgroundColor}; }`)})),(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeLinkedEditingProvider",((model,position)=>getLinkedEditingRanges(model,position,cancellation/* CancellationToken */.T.None))),(0,editorExtensions/* registerEditorContribution */._K)(LinkedEditingContribution.ID,LinkedEditingContribution),(0,editorExtensions/* registerEditorAction */.Qr)(LinkedEditingAction);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/base/common/network.js
var network=__webpack_require__(566663),getLinks_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class Link{constructor(link,provider){this._link=link,this._provider=provider}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(token){return getLinks_awaiter(this,void 0,void 0,(function*(){return this._link.url?this._link.url:"function"===typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,token)).then((value=>(this._link=value||this._link,this._link.url?this.resolve(token):Promise.reject(new Error("missing"))))):Promise.reject(new Error("missing"))}))}}class LinksList{constructor(tuples){this._disposables=new lifecycle/* DisposableStore */.SL;let links=[];for(const[list,provider]of tuples){
// merge all links
const newLinks=list.links.map((link=>new Link(link,provider)));links=LinksList._union(links,newLinks),
// register disposables
(0,lifecycle/* isDisposable */.Wf)(list)&&this._disposables.add(list)}this.links=links}dispose(){this._disposables.dispose(),this.links.length=0}static _union(oldLinks,newLinks){
// reunite oldLinks with newLinks and remove duplicates
let oldIndex,oldLen,newIndex,newLen,result=[];for(oldIndex=0,newIndex=0,oldLen=oldLinks.length,newLen=newLinks.length;oldIndex<oldLen&&newIndex<newLen;){const oldLink=oldLinks[oldIndex],newLink=newLinks[newIndex];if(core_range/* Range */.e.areIntersectingOrTouching(oldLink.range,newLink.range)){
// Remove the oldLink
oldIndex++;continue}const comparisonResult=core_range/* Range */.e.compareRangesUsingStarts(oldLink.range,newLink.range);comparisonResult<0?(
// oldLink is before
result.push(oldLink),oldIndex++):(
// newLink is before
result.push(newLink),newIndex++)}for(;oldIndex<oldLen;oldIndex++)result.push(oldLinks[oldIndex]);for(;newIndex<newLen;newIndex++)result.push(newLinks[newIndex]);return result}}function getLinks(model,token){const lists=[],promises=modes/* LinkProviderRegistry */.pM.ordered(model).reverse().map(((provider,i)=>Promise.resolve(provider.provideLinks(model,token)).then((result=>{result&&(lists[i]=[result,provider])}),errors/* onUnexpectedExternalError */.Cp)));
// ask all providers for links in parallel
return Promise.all(promises).then((()=>{const result=new LinksList((0,arrays/* coalesce */.kX)(lists));return token.isCancellationRequested?(result.dispose(),new LinksList([])):result}))}commands/* CommandsRegistry */.P.registerCommand("_executeLinkProvider",((accessor,...args)=>getLinks_awaiter(void 0,void 0,void 0,(function*(){let[uri,resolveCount]=args;(0,types/* assertType */.p_)(uri instanceof common_uri/* URI */.o),"number"!==typeof resolveCount&&(resolveCount=0);const model=accessor.get(services_modelService/* IModelService */.q).getModel(uri);if(!model)return[];const list=yield getLinks(model,cancellation/* CancellationToken */.T.None);if(!list)return[];
// resolve links
for(let i=0;i<Math.min(resolveCount,list.links.length);i++)yield list.links[i].resolve(cancellation/* CancellationToken */.T.None);const result=list.links.slice(0);return list.dispose(),result}))));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/links/links.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var links_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},links_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},links_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function getHoverMessage(link,useMetaKey){const executeCmd=link.url&&/^command:/i.test(link.url.toString()),label=link.tooltip?link.tooltip:executeCmd?nls/* localize */.N("links.navigate.executeCmd","Execute command"):nls/* localize */.N("links.navigate.follow","Follow link"),kb=useMetaKey?platform/* isMacintosh */.dz?nls/* localize */.N("links.navigate.kb.meta.mac","cmd + click"):nls/* localize */.N("links.navigate.kb.meta","ctrl + click"):platform/* isMacintosh */.dz?nls/* localize */.N("links.navigate.kb.alt.mac","option + click"):nls/* localize */.N("links.navigate.kb.alt","alt + click");if(link.url){let nativeLabel="";if(/^command:/i.test(link.url.toString())){
// Don't show complete command arguments in the native tooltip
const match=link.url.toString().match(/^command:([^?#]+)/);if(match){const commandId=match[1],nativeLabelText=nls/* localize */.N("tooltip.explanation","Execute command {0}",commandId);nativeLabel=` "${nativeLabelText}"`}}const hoverMessage=new htmlContent/* MarkdownString */.W5("",!0).appendMarkdown(`[${label}](${link.url.toString(!0).replace(/ /g,"%20")}${nativeLabel}) (${kb})`);return hoverMessage}return(new htmlContent/* MarkdownString */.W5).appendText(`${label} (${kb})`)}const decoration={general:textModel/* ModelDecorationOptions */.qx.register({description:"detected-link",stickiness:1/* NeverGrowsWhenTypingAtEdges */,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:textModel/* ModelDecorationOptions */.qx.register({description:"detected-link-active",stickiness:1/* NeverGrowsWhenTypingAtEdges */,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class LinkOccurrence{constructor(link,decorationId){this.link=link,this.decorationId=decorationId}static decoration(link,useMetaKey){return{range:link.range,options:LinkOccurrence._getOptions(link,useMetaKey,!1)}}static _getOptions(link,useMetaKey,isActive){const options=Object.assign({},isActive?decoration.active:decoration.general);return options.hoverMessage=getHoverMessage(link,useMetaKey),options}activate(changeAccessor,useMetaKey){changeAccessor.changeDecorationOptions(this.decorationId,LinkOccurrence._getOptions(this.link,useMetaKey,!0))}deactivate(changeAccessor,useMetaKey){changeAccessor.changeDecorationOptions(this.decorationId,LinkOccurrence._getOptions(this.link,useMetaKey,!1))}}let LinkDetector=class LinkDetector{constructor(editor,openerService,notificationService){this.listenersToRemove=new lifecycle/* DisposableStore */.SL,this.editor=editor,this.openerService=openerService,this.notificationService=notificationService;let clickLinkGesture=new ClickLinkGesture(editor);this.listenersToRemove.add(clickLinkGesture),this.listenersToRemove.add(clickLinkGesture.onMouseMoveOrRelevantKeyDown((([mouseEvent,keyboardEvent])=>{this._onEditorMouseMove(mouseEvent,keyboardEvent)}))),this.listenersToRemove.add(clickLinkGesture.onExecute((e=>{this.onEditorMouseUp(e)}))),this.listenersToRemove.add(clickLinkGesture.onCancel((e=>{this.cleanUpActiveLinkDecoration()}))),this.enabled=editor.getOption(62/* links */),this.listenersToRemove.add(editor.onDidChangeConfiguration((e=>{const enabled=editor.getOption(62/* links */);this.enabled!==enabled&&(this.enabled=enabled,
// Remove any links (for the getting disabled case)
this.updateDecorations([]),
// Stop any computation (for the getting disabled case)
this.stop(),
// Start computing (for the getting enabled case)
this.beginCompute())}))),this.listenersToRemove.add(editor.onDidChangeModelContent((e=>this.onChange()))),this.listenersToRemove.add(editor.onDidChangeModel((e=>this.onModelChanged()))),this.listenersToRemove.add(editor.onDidChangeModelLanguage((e=>this.onModelModeChanged()))),this.listenersToRemove.add(modes/* LinkProviderRegistry */.pM.onDidChange((e=>this.onModelModeChanged()))),this.timeout=new common_async/* TimeoutTimer */._F,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(editor){return editor.getContribution(LinkDetector.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet((()=>this.beginCompute()),LinkDetector.RECOMPUTE_TIME)}beginCompute(){return links_awaiter(this,void 0,void 0,(function*(){if(!this.editor.hasModel()||!this.enabled)return;const model=this.editor.getModel();if(modes/* LinkProviderRegistry */.pM.has(model)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=common_async/* createCancelablePromise */.PG((token=>getLinks(model,token)));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(err){(0,errors/* onUnexpectedError */.dL)(err)}finally{this.computePromise=null}}}))}updateDecorations(links){const useMetaKey="altKey"===this.editor.getOption(69/* multiCursorModifier */);let oldDecorations=[],keys=Object.keys(this.currentOccurrences);for(let i=0,len=keys.length;i<len;i++){let decorationId=keys[i],occurance=this.currentOccurrences[decorationId];oldDecorations.push(occurance.decorationId)}let newDecorations=[];if(links)
// Not sure why this is sometimes null
for(const link of links)newDecorations.push(LinkOccurrence.decoration(link,useMetaKey));let decorations=this.editor.deltaDecorations(oldDecorations,newDecorations);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let i=0,len=decorations.length;i<len;i++){let occurance=new LinkOccurrence(links[i],decorations[i]);this.currentOccurrences[occurance.decorationId]=occurance}}_onEditorMouseMove(mouseEvent,withKey){const useMetaKey="altKey"===this.editor.getOption(69/* multiCursorModifier */);if(this.isEnabled(mouseEvent,withKey)){this.cleanUpActiveLinkDecoration();// always remove previous link decoration as their can only be one
const occurrence=this.getLinkOccurrence(mouseEvent.target.position);occurrence&&this.editor.changeDecorations((changeAccessor=>{occurrence.activate(changeAccessor,useMetaKey),this.activeLinkDecorationId=occurrence.decorationId}))}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const useMetaKey="altKey"===this.editor.getOption(69/* multiCursorModifier */);if(this.activeLinkDecorationId){const occurrence=this.currentOccurrences[this.activeLinkDecorationId];occurrence&&this.editor.changeDecorations((changeAccessor=>{occurrence.deactivate(changeAccessor,useMetaKey)})),this.activeLinkDecorationId=null}}onEditorMouseUp(mouseEvent){if(!this.isEnabled(mouseEvent))return;const occurrence=this.getLinkOccurrence(mouseEvent.target.position);occurrence&&this.openLinkOccurrence(occurrence,mouseEvent.hasSideBySideModifier,!0/* from user gesture */)}openLinkOccurrence(occurrence,openToSide,fromUserGesture=!1){if(!this.openerService)return;const{link:link}=occurrence;link.resolve(cancellation/* CancellationToken */.T.None).then((uri=>{
// Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt
if("string"===typeof uri&&this.editor.hasModel()){const modelUri=this.editor.getModel().uri;if(modelUri.scheme===network/* Schemas */.lg.file&&uri.startsWith(`${network/* Schemas */.lg.file}:`)){const parsedUri=common_uri/* URI */.o.parse(uri);if(parsedUri.scheme===network/* Schemas */.lg.file){const fsPath=common_resources/* originalFSPath */.z_(parsedUri);let relativePath=null;fsPath.startsWith("/./")?relativePath=`.${fsPath.substr(1)}`:fsPath.startsWith("//./")&&(relativePath=`.${fsPath.substr(2)}`),relativePath&&(uri=common_resources/* joinPath */.Vo(modelUri,relativePath))}}}return this.openerService.open(uri,{openToSide:openToSide,fromUserGesture:fromUserGesture,allowContributedOpeners:!0,allowCommands:!0})}),(err=>{const messageOrError=err instanceof Error?err.message:err;
// different error cases
"invalid"===messageOrError?this.notificationService.warn(nls/* localize */.N("invalid.url","Failed to open this link because it is not well-formed: {0}",link.url.toString())):"missing"===messageOrError?this.notificationService.warn(nls/* localize */.N("missing.url","Failed to open this link because its target is missing.")):(0,errors/* onUnexpectedError */.dL)(err)}))}getLinkOccurrence(position){if(!this.editor.hasModel()||!position)return null;const decorations=this.editor.getModel().getDecorationsInRange({startLineNumber:position.lineNumber,startColumn:position.column,endLineNumber:position.lineNumber,endColumn:position.column},0,!0);for(const decoration of decorations){const currentOccurrence=this.currentOccurrences[decoration.id];if(currentOccurrence)return currentOccurrence}return null}isEnabled(mouseEvent,withKey){return Boolean(6/* CONTENT_TEXT */===mouseEvent.target.type&&(mouseEvent.hasTriggerModifier||withKey&&withKey.keyCodeIsTriggerKey))}stop(){var _a;this.timeout.cancel(),this.activeLinksList&&(null===(_a=this.activeLinksList)||void 0===_a||_a.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};LinkDetector.ID="editor.linkDetector",LinkDetector.RECOMPUTE_TIME=1e3,// ms
LinkDetector=links_decorate([links_param(1,common_opener/* IOpenerService */.v4),links_param(2,notification/* INotificationService */.lT)],LinkDetector);class OpenLinkAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.openLink",label:nls/* localize */.N("label","Open Link"),alias:"Open Link",precondition:void 0})}run(accessor,editor){let linkDetector=LinkDetector.get(editor);if(!linkDetector)return;if(!editor.hasModel())return;let selections=editor.getSelections();for(let sel of selections){let link=linkDetector.getLinkOccurrence(sel.getEndPosition());link&&linkDetector.openLinkOccurrence(link,!1)}}}(0,editorExtensions/* registerEditorContribution */._K)(LinkDetector.ID,LinkDetector),(0,editorExtensions/* registerEditorAction */.Qr)(OpenLinkAction),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const activeLinkForeground=theme.getColor(colorRegistry/* editorActiveLinkForeground */._Y);activeLinkForeground&&collector.addRule(`.monaco-editor .detected-link-active { color: ${activeLinkForeground} !important; }`)}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/controller/cursorMoveCommands.js
var cursorMoveCommands=__webpack_require__(183814);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/multicursor.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
function announceCursorChange(previousCursorState,cursorState){const cursorDiff=cursorState.filter((cs=>!previousCursorState.find((pcs=>pcs.equals(cs)))));if(cursorDiff.length>=1){const cursorPositions=cursorDiff.map((cs=>`line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`)).join(", "),msg=1===cursorDiff.length?nls/* localize */.N("cursorAdded","Cursor added: {0}",cursorPositions):nls/* localize */.N("cursorsAdded","Cursors added: {0}",cursorPositions);(0,aria/* status */.i7)(msg)}}class InsertCursorAbove extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:nls/* localize */.N("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2576/* UpArrow */,linux:{primary:1552/* UpArrow */,secondary:[3088/* UpArrow */]},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"3_multi",title:nls/* localize */.N({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(accessor,editor,args){if(!editor.hasModel())return;let useLogicalLine=!0;args&&!1===args.logicalLine&&(useLogicalLine=!1);const viewModel=editor._getViewModel();if(viewModel.cursorConfig.readOnly)return;viewModel.pushStackElement();const previousCursorState=viewModel.getCursorStates();viewModel.setCursorStates(args.source,3/* Explicit */,cursorMoveCommands/* CursorMoveCommands */.P.addCursorUp(viewModel,previousCursorState,useLogicalLine)),viewModel.revealTopMostCursor(args.source),announceCursorChange(previousCursorState,viewModel.getCursorStates())}}class InsertCursorBelow extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:nls/* localize */.N("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2578/* DownArrow */,linux:{primary:1554/* DownArrow */,secondary:[3090/* DownArrow */]},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"3_multi",title:nls/* localize */.N({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(accessor,editor,args){if(!editor.hasModel())return;let useLogicalLine=!0;args&&!1===args.logicalLine&&(useLogicalLine=!1);const viewModel=editor._getViewModel();if(viewModel.cursorConfig.readOnly)return;viewModel.pushStackElement();const previousCursorState=viewModel.getCursorStates();viewModel.setCursorStates(args.source,3/* Explicit */,cursorMoveCommands/* CursorMoveCommands */.P.addCursorDown(viewModel,previousCursorState,useLogicalLine)),viewModel.revealBottomMostCursor(args.source),announceCursorChange(previousCursorState,viewModel.getCursorStates())}}class InsertCursorAtEndOfEachLineSelected extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:nls/* localize */.N("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1575/* KeyI */,weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"3_multi",title:nls/* localize */.N({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(selection,model,result){if(!selection.isEmpty()){for(let i=selection.startLineNumber;i<selection.endLineNumber;i++){let currentLineMaxColumn=model.getLineMaxColumn(i);result.push(new core_selection/* Selection */.Y(i,currentLineMaxColumn,i,currentLineMaxColumn))}selection.endColumn>1&&result.push(new core_selection/* Selection */.Y(selection.endLineNumber,selection.endColumn,selection.endLineNumber,selection.endColumn))}}run(accessor,editor){if(!editor.hasModel())return;const model=editor.getModel(),selections=editor.getSelections(),viewModel=editor._getViewModel(),previousCursorState=viewModel.getCursorStates();let newSelections=[];selections.forEach((sel=>this.getCursorsForSelection(sel,model,newSelections))),newSelections.length>0&&editor.setSelections(newSelections),announceCursorChange(previousCursorState,viewModel.getCursorStates())}}class InsertCursorAtEndOfLineSelected extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:nls/* localize */.N("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(accessor,editor){if(!editor.hasModel())return;const selections=editor.getSelections(),lineCount=editor.getModel().getLineCount();let newSelections=[];for(let i=selections[0].startLineNumber;i<=lineCount;i++)newSelections.push(new core_selection/* Selection */.Y(i,selections[0].startColumn,i,selections[0].endColumn));const viewModel=editor._getViewModel(),previousCursorState=viewModel.getCursorStates();newSelections.length>0&&editor.setSelections(newSelections),announceCursorChange(previousCursorState,viewModel.getCursorStates())}}class InsertCursorAtTopOfLineSelected extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:nls/* localize */.N("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(accessor,editor){if(!editor.hasModel())return;const selections=editor.getSelections();let newSelections=[];for(let i=selections[0].startLineNumber;i>=1;i--)newSelections.push(new core_selection/* Selection */.Y(i,selections[0].startColumn,i,selections[0].endColumn));const viewModel=editor._getViewModel(),previousCursorState=viewModel.getCursorStates();newSelections.length>0&&editor.setSelections(newSelections),announceCursorChange(previousCursorState,viewModel.getCursorStates())}}class MultiCursorSessionResult{constructor(selections,revealRange,revealScrollType){this.selections=selections,this.revealRange=revealRange,this.revealScrollType=revealScrollType}}class MultiCursorSession{constructor(_editor,findController,isDisconnectedFromFindController,searchText,wholeWord,matchCase,currentMatch){this._editor=_editor,this.findController=findController,this.isDisconnectedFromFindController=isDisconnectedFromFindController,this.searchText=searchText,this.wholeWord=wholeWord,this.matchCase=matchCase,this.currentMatch=currentMatch}static create(editor,findController){if(!editor.hasModel())return null;const findState=findController.getState();
// Find widget owns entirely what we search for if:
//  - focus is not in the editor (i.e. it is in the find widget)
//  - and the search widget is visible
//  - and the search string is non-empty
if(!editor.hasTextFocus()&&findState.isRevealed&&findState.searchString.length>0)
// Find widget owns what is searched for
return new MultiCursorSession(editor,findController,!1,findState.searchString,findState.wholeWord,findState.matchCase,null);
// Otherwise, the selection gives the search text, and the find widget gives the search settings
// The exception is the find state disassociation case: when beginning with a single, collapsed selection
let wholeWord,matchCase,isDisconnectedFromFindController=!1;const selections=editor.getSelections();1===selections.length&&selections[0].isEmpty()?(isDisconnectedFromFindController=!0,wholeWord=!0,matchCase=!0):(wholeWord=findState.wholeWord,matchCase=findState.matchCase);
// Selection owns what is searched for
const s=editor.getSelection();let searchText,currentMatch=null;if(s.isEmpty()){
// selection is empty => expand to current word
const word=editor.getConfiguredWordAtPosition(s.getStartPosition());if(!word)return null;searchText=word.word,currentMatch=new core_selection/* Selection */.Y(s.startLineNumber,word.startColumn,s.startLineNumber,word.endColumn)}else searchText=editor.getModel().getValueInRange(s).replace(/\r\n/g,"\n");return new MultiCursorSession(editor,findController,isDisconnectedFromFindController,searchText,wholeWord,matchCase,currentMatch)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const nextMatch=this._getNextMatch();if(!nextMatch)return null;const allSelections=this._editor.getSelections();return new MultiCursorSessionResult(allSelections.concat(nextMatch),nextMatch,0/* Smooth */)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const nextMatch=this._getNextMatch();if(!nextMatch)return null;const allSelections=this._editor.getSelections();return new MultiCursorSessionResult(allSelections.slice(0,allSelections.length-1).concat(nextMatch),nextMatch,0/* Smooth */)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const result=this.currentMatch;return this.currentMatch=null,result}this.findController.highlightFindOptions();const allSelections=this._editor.getSelections(),lastAddedSelection=allSelections[allSelections.length-1],nextMatch=this._editor.getModel().findNextMatch(this.searchText,lastAddedSelection.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115/* wordSeparators */):null,!1);return nextMatch?new core_selection/* Selection */.Y(nextMatch.range.startLineNumber,nextMatch.range.startColumn,nextMatch.range.endLineNumber,nextMatch.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const previousMatch=this._getPreviousMatch();if(!previousMatch)return null;const allSelections=this._editor.getSelections();return new MultiCursorSessionResult(allSelections.concat(previousMatch),previousMatch,0/* Smooth */)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const previousMatch=this._getPreviousMatch();if(!previousMatch)return null;const allSelections=this._editor.getSelections();return new MultiCursorSessionResult(allSelections.slice(0,allSelections.length-1).concat(previousMatch),previousMatch,0/* Smooth */)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const result=this.currentMatch;return this.currentMatch=null,result}this.findController.highlightFindOptions();const allSelections=this._editor.getSelections(),lastAddedSelection=allSelections[allSelections.length-1],previousMatch=this._editor.getModel().findPreviousMatch(this.searchText,lastAddedSelection.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115/* wordSeparators */):null,!1);return previousMatch?new core_selection/* Selection */.Y(previousMatch.range.startLineNumber,previousMatch.range.startColumn,previousMatch.range.endLineNumber,previousMatch.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(115/* wordSeparators */):null,!1,1073741824/* MAX_SAFE_SMALL_INTEGER */)):[]}}class MultiCursorSelectionController extends lifecycle/* Disposable */.JT{constructor(editor){super(),this._sessionDispose=this._register(new lifecycle/* DisposableStore */.SL),this._editor=editor,this._ignoreSelectionChange=!1,this._session=null}static get(editor){return editor.getContribution(MultiCursorSelectionController.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(findController){if(!this._session){
// Create a new session
const session=MultiCursorSession.create(this._editor,findController);if(!session)return;this._session=session;const newState={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(newState.wholeWordOverride=1/* True */,newState.matchCaseOverride=1/* True */,newState.isRegexOverride=2/* False */),findController.getState().change(newState,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const newState={wholeWordOverride:0/* NotSet */,matchCaseOverride:0/* NotSet */,isRegexOverride:0/* NotSet */};this._session.findController.getState().change(newState,!1)}this._session=null}_setSelections(selections){this._ignoreSelectionChange=!0,this._editor.setSelections(selections),this._ignoreSelectionChange=!1}_expandEmptyToWord(model,selection){if(!selection.isEmpty())return selection;const word=this._editor.getConfiguredWordAtPosition(selection.getStartPosition());return word?new core_selection/* Selection */.Y(selection.startLineNumber,word.startColumn,selection.startLineNumber,word.endColumn):selection}_applySessionResult(result){result&&(this._setSelections(result.selections),result.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange,result.revealScrollType))}getSession(findController){return this._session}addSelectionToNextFindMatch(findController){if(this._editor.hasModel()){if(!this._session){
// If there are multiple cursors, handle the case where they do not all select the same text.
const allSelections=this._editor.getSelections();if(allSelections.length>1){const findState=findController.getState(),matchCase=findState.matchCase,selectionsContainSameText=modelRangesContainSameText(this._editor.getModel(),allSelections,matchCase);if(!selectionsContainSameText){const model=this._editor.getModel();let resultingSelections=[];for(let i=0,len=allSelections.length;i<len;i++)resultingSelections[i]=this._expandEmptyToWord(model,allSelections[i]);return void this._editor.setSelections(resultingSelections)}}}this._beginSessionIfNeeded(findController),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(findController){this._beginSessionIfNeeded(findController),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(findController){this._beginSessionIfNeeded(findController),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(findController){this._beginSessionIfNeeded(findController),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(findController){if(!this._editor.hasModel())return;let matches=null;const findState=findController.getState();
// Special case: find widget owns entirely what we search for if:
// - focus is not in the editor (i.e. it is in the find widget)
// - and the search widget is visible
// - and the search string is non-empty
// - and we're searching for a regex
if(findState.isRevealed&&findState.searchString.length>0&&findState.isRegex)matches=this._editor.getModel().findMatches(findState.searchString,!0,findState.isRegex,findState.matchCase,findState.wholeWord?this._editor.getOption(115/* wordSeparators */):null,!1,1073741824/* MAX_SAFE_SMALL_INTEGER */);else{if(this._beginSessionIfNeeded(findController),!this._session)return;matches=this._session.selectAll()}if(findState.searchScope){const states=findState.searchScope;let inSelection=[];matches.forEach((match=>{states.forEach((state=>{match.range.endLineNumber<=state.endLineNumber&&match.range.startLineNumber>=state.startLineNumber&&inSelection.push(match)}))})),matches=inSelection}if(matches.length>0){const editorSelection=this._editor.getSelection();
// Have the primary cursor remain the one where the action was invoked
for(let i=0,len=matches.length;i<len;i++){const match=matches[i],intersection=match.range.intersectRanges(editorSelection);if(intersection){
// bingo!
matches[i]=matches[0],matches[0]=match;break}}this._setSelections(matches.map((m=>new core_selection/* Selection */.Y(m.range.startLineNumber,m.range.startColumn,m.range.endLineNumber,m.range.endColumn))))}}}MultiCursorSelectionController.ID="editor.contrib.multiCursorController";class MultiCursorSelectionControllerAction extends editorExtensions/* EditorAction */.R6{run(accessor,editor){const multiCursorController=MultiCursorSelectionController.get(editor);if(!multiCursorController)return;const findController=CommonFindController.get(editor);if(!findController)return;const viewModel=editor._getViewModel();if(viewModel){const previousCursorState=viewModel.getCursorStates();this._run(multiCursorController,findController),announceCursorChange(previousCursorState,viewModel.getCursorStates())}}}class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:nls/* localize */.N("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:2082/* KeyD */,weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"3_multi",title:nls/* localize */.N({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(multiCursorController,findController){multiCursorController.addSelectionToNextFindMatch(findController)}}class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:nls/* localize */.N("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"3_multi",title:nls/* localize */.N({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(multiCursorController,findController){multiCursorController.addSelectionToPreviousFindMatch(findController)}}class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:nls/* localize */.N("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:(0,keyCodes/* KeyChord */.gx)(2089/* KeyK */,2082/* KeyD */),weight:100/* EditorContrib */}})}_run(multiCursorController,findController){multiCursorController.moveSelectionToNextFindMatch(findController)}}class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:nls/* localize */.N("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(multiCursorController,findController){multiCursorController.moveSelectionToPreviousFindMatch(findController)}}class SelectHighlightsAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.selectHighlights",label:nls/* localize */.N("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:3114/* KeyL */,weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"3_multi",title:nls/* localize */.N({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(multiCursorController,findController){multiCursorController.selectAll(findController)}}class CompatChangeAll extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.changeAll",label:nls/* localize */.N("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.editorTextFocus),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:2108/* F2 */,weight:100/* EditorContrib */},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(multiCursorController,findController){multiCursorController.selectAll(findController)}}class SelectionHighlighterState{constructor(searchText,matchCase,wordSeparators,modelVersionId){this.searchText=searchText,this.matchCase=matchCase,this.wordSeparators=wordSeparators,this.modelVersionId=modelVersionId}
/**
     * Everything equals except for `lastWordUnderCursor`
     */static softEquals(a,b){return!a&&!b||!(!a||!b)&&(a.searchText===b.searchText&&a.matchCase===b.matchCase&&a.wordSeparators===b.wordSeparators&&a.modelVersionId===b.modelVersionId)}}class SelectionHighlighter extends lifecycle/* Disposable */.JT{constructor(editor){super(),this.editor=editor,this._isEnabled=editor.getOption(96/* selectionHighlight */),this.decorations=[],this.updateSoon=this._register(new common_async/* RunOnceScheduler */.pY((()=>this._update()),300)),this.state=null,this._register(editor.onDidChangeConfiguration((e=>{this._isEnabled=editor.getOption(96/* selectionHighlight */)}))),this._register(editor.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3/* Explicit */===e.reason?(this.state&&
// no longer valid
this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(editor.onDidChangeModel((e=>{this._setState(null)}))),this._register(editor.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()}))),this._register(CommonFindController.get(editor).getState().onFindReplaceStateChange((e=>{this._update()})))}_update(){this._setState(SelectionHighlighter._createState(this._isEnabled,this.editor))}static _createState(isEnabled,editor){if(!isEnabled)return null;if(!editor.hasModel())return null;const s=editor.getSelection();if(s.startLineNumber!==s.endLineNumber)
// multiline forbidden for perf reasons
return null;const multiCursorController=MultiCursorSelectionController.get(editor);if(!multiCursorController)return null;const findController=CommonFindController.get(editor);if(!findController)return null;let r=multiCursorController.getSession(findController);if(!r){const allSelections=editor.getSelections();if(allSelections.length>1){const findState=findController.getState(),matchCase=findState.matchCase,selectionsContainSameText=modelRangesContainSameText(editor.getModel(),allSelections,matchCase);if(!selectionsContainSameText)return null}r=MultiCursorSession.create(editor,findController)}if(!r)return null;if(r.currentMatch)
// This is an empty selection
// Do not interfere with semantic word highlighting in the no selection case
return null;if(/^[ \t]+$/.test(r.searchText))
// whitespace only selection
return null;if(r.searchText.length>200)
// very long selection
return null;
// TODO: better handling of this case
const findState=findController.getState(),caseSensitive=findState.matchCase;
// Return early if the find widget shows the exact same matches
if(findState.isRevealed){let findStateSearchString=findState.searchString;caseSensitive||(findStateSearchString=findStateSearchString.toLowerCase());let mySearchString=r.searchText;if(caseSensitive||(mySearchString=mySearchString.toLowerCase()),findStateSearchString===mySearchString&&r.matchCase===findState.matchCase&&r.wholeWord===findState.wholeWord&&!findState.isRegex)return null}return new SelectionHighlighterState(r.searchText,r.matchCase,r.wholeWord?editor.getOption(115/* wordSeparators */):null,editor.getModel().getVersionId())}_setState(state){if(SelectionHighlighterState.softEquals(this.state,state))return void(this.state=state);if(this.state=state,!this.state)return void(this.decorations=this.editor.deltaDecorations(this.decorations,[]));if(!this.editor.hasModel())return;const model=this.editor.getModel();if(model.isTooLargeForTokenization())
// the file is too large, so searching word under cursor in the whole document takes is blocking the UI.
return;const hasFindOccurrences=modes/* DocumentHighlightProviderRegistry */.vH.has(model)&&this.editor.getOption(71/* occurrencesHighlight */);let allMatches=model.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map((m=>m.range));allMatches.sort(core_range/* Range */.e.compareRangesUsingStarts);let selections=this.editor.getSelections();selections.sort(core_range/* Range */.e.compareRangesUsingStarts);
// do not overlap with selection (issue #64 and #512)
let matches=[];for(let i=0,j=0,len=allMatches.length,lenJ=selections.length;i<len;){const match=allMatches[i];if(j>=lenJ)
// finished all editor selections
matches.push(match),i++;else{const cmp=core_range/* Range */.e.compareRangesUsingStarts(match,selections[j]);cmp<0?(
// match is before sel
!selections[j].isEmpty()&&core_range/* Range */.e.areIntersecting(match,selections[j])||matches.push(match),i++):(cmp>0||
// sel is equal to match
i++,
// sel is before match
j++)}}const decorations=matches.map((r=>({range:r,
// Show in overviewRuler only if model has no semantic highlighting
options:hasFindOccurrences?SelectionHighlighter._SELECTION_HIGHLIGHT:SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW})));this.decorations=this.editor.deltaDecorations(this.decorations,decorations)}dispose(){this._setState(null),super.dispose()}}function modelRangesContainSameText(model,ranges,matchCase){const selectedText=getValueInRange(model,ranges[0],!matchCase);for(let i=1,len=ranges.length;i<len;i++){const range=ranges[i];if(range.isEmpty())return!1;const thisSelectedText=getValueInRange(model,range,!matchCase);if(selectedText!==thisSelectedText)return!1}return!0}function getValueInRange(model,range,toLowerCase){const text=model.getValueInRange(range);return toLowerCase?text.toLowerCase():text}SelectionHighlighter.ID="editor.contrib.selectionHighlighter",SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW=textModel/* ModelDecorationOptions */.qx.register({description:"selection-highlight-overview",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"selectionHighlight",minimap:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* minimapSelectionOccurrenceHighlight */.IY),position:model/* MinimapPosition */.F5.Inline},overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* overviewRulerSelectionHighlightForeground */.SP),position:model/* OverviewRulerLane */.sh.Center}}),SelectionHighlighter._SELECTION_HIGHLIGHT=textModel/* ModelDecorationOptions */.qx.register({description:"selection-highlight",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"selectionHighlight"}),(0,editorExtensions/* registerEditorContribution */._K)(MultiCursorSelectionController.ID,MultiCursorSelectionController),(0,editorExtensions/* registerEditorContribution */._K)(SelectionHighlighter.ID,SelectionHighlighter),(0,editorExtensions/* registerEditorAction */.Qr)(InsertCursorAbove),(0,editorExtensions/* registerEditorAction */.Qr)(InsertCursorBelow),(0,editorExtensions/* registerEditorAction */.Qr)(InsertCursorAtEndOfEachLineSelected),(0,editorExtensions/* registerEditorAction */.Qr)(AddSelectionToNextFindMatchAction),(0,editorExtensions/* registerEditorAction */.Qr)(AddSelectionToPreviousFindMatchAction),(0,editorExtensions/* registerEditorAction */.Qr)(MoveSelectionToNextFindMatchAction),(0,editorExtensions/* registerEditorAction */.Qr)(MoveSelectionToPreviousFindMatchAction),(0,editorExtensions/* registerEditorAction */.Qr)(SelectHighlightsAction),(0,editorExtensions/* registerEditorAction */.Qr)(CompatChangeAll),(0,editorExtensions/* registerEditorAction */.Qr)(InsertCursorAtEndOfLineSelected),(0,editorExtensions/* registerEditorAction */.Qr)(InsertCursorAtTopOfLineSelected);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/provideSignatureHelp.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var provideSignatureHelp_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const Context={Visible:new contextkey/* RawContextKey */.uy("parameterHintsVisible",!1),MultipleSignatures:new contextkey/* RawContextKey */.uy("parameterHintsMultipleSignatures",!1)};function provideSignatureHelp(model,position,context,token){return provideSignatureHelp_awaiter(this,void 0,void 0,(function*(){const supports=modes/* SignatureHelpProviderRegistry */.nD.ordered(model);for(const support of supports)try{const result=yield support.provideSignatureHelp(model,position,token,context);if(result)return result}catch(err){(0,errors/* onUnexpectedExternalError */.Cp)(err)}}))}commands/* CommandsRegistry */.P.registerCommand("_executeSignatureHelpProvider",((accessor,...args)=>provideSignatureHelp_awaiter(void 0,void 0,void 0,(function*(){const[uri,position,triggerCharacter]=args;(0,types/* assertType */.p_)(common_uri/* URI */.o.isUri(uri)),(0,types/* assertType */.p_)(core_position/* Position */.L.isIPosition(position)),(0,types/* assertType */.p_)("string"===typeof triggerCharacter||!triggerCharacter);const ref=yield accessor.get(resolverService/* ITextModelService */.S).createModelReference(uri);try{const result=yield provideSignatureHelp(ref.object.textEditorModel,core_position/* Position */.L.lift(position),{triggerKind:modes/* SignatureHelpTriggerKind */.WW.Invoke,isRetrigger:!1,triggerCharacter:triggerCharacter},cancellation/* CancellationToken */.T.None);if(!result)return;return setTimeout((()=>result.dispose()),0),result.value}finally{ref.dispose()}}))));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsModel.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var ParameterHintState,parameterHintsModel_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};(function(ParameterHintState){ParameterHintState.Default={type:0/* Default */};class Pending{constructor(request,previouslyActiveHints){this.request=request,this.previouslyActiveHints=previouslyActiveHints,this.type=2/* Pending */}}ParameterHintState.Pending=Pending;class Active{constructor(hints){this.hints=hints,this.type=1/* Active */}}ParameterHintState.Active=Active})(ParameterHintState||(ParameterHintState={}));class ParameterHintsModel extends lifecycle/* Disposable */.JT{constructor(editor,delay=ParameterHintsModel.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new common_event/* Emitter */.Q5),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=ParameterHintState.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new lifecycle/* MutableDisposable */.XK),this.triggerChars=new characterClassifier/* CharacterSet */.q,this.retriggerChars=new characterClassifier/* CharacterSet */.q,this.triggerId=0,this.editor=editor,this.throttledDelayer=new common_async/* Delayer */.vp(delay),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((_=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((e=>this.onCursorChange(e)))),this._register(this.editor.onDidChangeModelContent((e=>this.onModelContentChange()))),this._register(modes/* SignatureHelpProviderRegistry */.nD.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((text=>this.onDidType(text)))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(value){2/* Pending */===this._state.type&&this._state.request.cancel(),this._state=value}cancel(silent=!1){this.state=ParameterHintState.Default,this.throttledDelayer.cancel(),silent||this._onChangedHints.fire(void 0)}trigger(context,delay){const model=this.editor.getModel();if(!model||!modes/* SignatureHelpProviderRegistry */.nD.has(model))return;const triggerId=++this.triggerId;this._pendingTriggers.push(context),this.throttledDelayer.trigger((()=>this.doTrigger(triggerId)),delay).catch(errors/* onUnexpectedError */.dL)}next(){if(1/* Active */!==this.state.type)return;const length=this.state.hints.signatures.length,activeSignature=this.state.hints.activeSignature,last=activeSignature%length===length-1,cycle=this.editor.getOption(75/* parameterHints */).cycle;
// If there is only one signature, or we're on last signature of list
!(length<2||last)||cycle?this.updateActiveSignature(last&&cycle?0:activeSignature+1):this.cancel()}previous(){if(1/* Active */!==this.state.type)return;const length=this.state.hints.signatures.length,activeSignature=this.state.hints.activeSignature,first=0===activeSignature,cycle=this.editor.getOption(75/* parameterHints */).cycle;
// If there is only one signature, or we're on first signature of list
!(length<2||first)||cycle?this.updateActiveSignature(first&&cycle?length-1:activeSignature-1):this.cancel()}updateActiveSignature(activeSignature){1/* Active */===this.state.type&&(this.state=new ParameterHintState.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:activeSignature})),this._onChangedHints.fire(this.state.hints))}doTrigger(triggerId){return parameterHintsModel_awaiter(this,void 0,void 0,(function*(){const isRetrigger=1/* Active */===this.state.type||2/* Pending */===this.state.type,activeSignatureHelp=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;const context=this._pendingTriggers.reduce(mergeTriggerContexts);this._pendingTriggers=[];const triggerContext={triggerKind:context.triggerKind,triggerCharacter:context.triggerCharacter,isRetrigger:isRetrigger,activeSignatureHelp:activeSignatureHelp};if(!this.editor.hasModel())return!1;const model=this.editor.getModel(),position=this.editor.getPosition();this.state=new ParameterHintState.Pending((0,common_async/* createCancelablePromise */.PG)((token=>provideSignatureHelp(model,position,triggerContext,token))),activeSignatureHelp);try{const result=yield this.state.request;
// Check that we are still resolving the correct signature help
return triggerId!==this.triggerId?(null===result||void 0===result||result.dispose(),!1):result&&result.value.signatures&&0!==result.value.signatures.length?(this.state=new ParameterHintState.Active(result.value),this._lastSignatureHelpResult.value=result,this._onChangedHints.fire(this.state.hints),!0):(null===result||void 0===result||result.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(error){return triggerId===this.triggerId&&(this.state=ParameterHintState.Default),(0,errors/* onUnexpectedError */.dL)(error),!1}}))}getLastActiveHints(){switch(this.state.type){case 1/* Active */:return this.state.hints;case 2/* Pending */:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1/* Active */===this.state.type||2/* Pending */===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),
// Update trigger characters
this.triggerChars=new characterClassifier/* CharacterSet */.q,this.retriggerChars=new characterClassifier/* CharacterSet */.q;const model=this.editor.getModel();if(model)for(const support of modes/* SignatureHelpProviderRegistry */.nD.ordered(model)){for(const ch of support.signatureHelpTriggerCharacters||[])this.triggerChars.add(ch.charCodeAt(0)),
// All trigger characters are also considered retrigger characters
this.retriggerChars.add(ch.charCodeAt(0));for(const ch of support.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(ch.charCodeAt(0))}}onDidType(text){if(!this.triggerOnType)return;const lastCharIndex=text.length-1,triggerCharCode=text.charCodeAt(lastCharIndex);(this.triggerChars.has(triggerCharCode)||this.isTriggered&&this.retriggerChars.has(triggerCharCode))&&this.trigger({triggerKind:modes/* SignatureHelpTriggerKind */.WW.TriggerCharacter,triggerCharacter:text.charAt(lastCharIndex)})}onCursorChange(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:modes/* SignatureHelpTriggerKind */.WW.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:modes/* SignatureHelpTriggerKind */.WW.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75/* parameterHints */).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}// ms
function mergeTriggerContexts(previous,current){switch(current.triggerKind){case modes/* SignatureHelpTriggerKind */.WW.Invoke:
// Invoke overrides previous triggers.
return current;case modes/* SignatureHelpTriggerKind */.WW.ContentChange:
// Ignore content changes triggers
return previous;case modes/* SignatureHelpTriggerKind */.WW.TriggerCharacter:default:return current}}ParameterHintsModel.DEFAULT_DELAY=120;// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsWidget.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var parameterHintsWidget_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},parameterHintsWidget_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};const parameterHintsWidget_$=dom.$,parameterHintsNextIcon=(0,iconRegistry/* registerIcon */.q5)("parameter-hints-next",codicons/* Codicon */.lA.chevronDown,nls/* localize */.N("parameterHintsNextIcon","Icon for show next parameter hint.")),parameterHintsPreviousIcon=(0,iconRegistry/* registerIcon */.q5)("parameter-hints-previous",codicons/* Codicon */.lA.chevronUp,nls/* localize */.N("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let ParameterHintsWidget=class ParameterHintsWidget extends lifecycle/* Disposable */.JT{constructor(editor,contextKeyService,openerService,modeService){super(),this.editor=editor,this.renderDisposeables=this._register(new lifecycle/* DisposableStore */.SL),this.visible=!1,this.announcedLabel=null,
// Editor.IContentWidget.allowEditorOverflow
this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new markdownRenderer/* MarkdownRenderer */.$({editor:editor},modeService,openerService)),this.model=this._register(new ParameterHintsModel(editor)),this.keyVisible=Context.Visible.bindTo(contextKeyService),this.keyMultipleSignatures=Context.MultipleSignatures.bindTo(contextKeyService),this._register(this.model.onChangedHints((newParameterHints=>{newParameterHints?(this.show(),this.render(newParameterHints)):this.hide()})))}createParameterHintDOMNodes(){const element=parameterHintsWidget_$(".editor-widget.parameter-hints-widget"),wrapper=dom/* append */.R3(element,parameterHintsWidget_$(".phwrapper"));wrapper.tabIndex=-1;const controls=dom/* append */.R3(wrapper,parameterHintsWidget_$(".controls")),previous=dom/* append */.R3(controls,parameterHintsWidget_$(".button"+common_themeService/* ThemeIcon */.kS.asCSSSelector(parameterHintsPreviousIcon))),overloads=dom/* append */.R3(controls,parameterHintsWidget_$(".overloads")),next=dom/* append */.R3(controls,parameterHintsWidget_$(".button"+common_themeService/* ThemeIcon */.kS.asCSSSelector(parameterHintsNextIcon)));this._register(dom/* addDisposableListener */.nm(previous,"click",(e=>{dom/* EventHelper */.zB.stop(e),this.previous()}))),this._register(dom/* addDisposableListener */.nm(next,"click",(e=>{dom/* EventHelper */.zB.stop(e),this.next()})));const body=parameterHintsWidget_$(".body"),scrollbar=new scrollableElement/* DomScrollableElement */.s$(body,{});this._register(scrollbar),wrapper.appendChild(scrollbar.getDomNode());const signature=dom/* append */.R3(body,parameterHintsWidget_$(".signature")),docs=dom/* append */.R3(body,parameterHintsWidget_$(".docs"));element.style.userSelect="text",this.domNodes={element:element,signature:signature,overloads:overloads,docs:docs,scrollbar:scrollbar},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((e=>{this.visible&&this.editor.layoutContentWidget(this)})));const updateFont=()=>{if(!this.domNodes)return;const fontInfo=this.editor.getOption(43/* fontInfo */);this.domNodes.element.style.fontSize=`${fontInfo.fontSize}px`,this.domNodes.element.style.lineHeight=""+fontInfo.lineHeight/fontInfo.fontSize};updateFont(),this._register(common_event/* Event */.ju.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter((e=>e.hasChanged(43/* fontInfo */))).on(updateFont,null)),this._register(this.editor.onDidLayoutChange((e=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{this.domNodes&&this.domNodes.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1/* ABOVE */,2/* BELOW */]}:null}render(hints){var _a;if(this.renderDisposeables.clear(),!this.domNodes)return;const multiple=hints.signatures.length>1;this.domNodes.element.classList.toggle("multiple",multiple),this.keyMultipleSignatures.set(multiple),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const signature=hints.signatures[hints.activeSignature];if(!signature)return;const code=dom/* append */.R3(this.domNodes.signature,parameterHintsWidget_$(".code")),fontInfo=this.editor.getOption(43/* fontInfo */);code.style.fontSize=`${fontInfo.fontSize}px`,code.style.fontFamily=fontInfo.fontFamily;const hasParameters=signature.parameters.length>0,activeParameterIndex=null!==(_a=signature.activeParameter)&&void 0!==_a?_a:hints.activeParameter;if(hasParameters)this.renderParameters(code,signature,activeParameterIndex);else{const label=dom/* append */.R3(code,parameterHintsWidget_$("span"));label.textContent=signature.label}const activeParameter=signature.parameters[activeParameterIndex];if(null===activeParameter||void 0===activeParameter?void 0:activeParameter.documentation){const documentation=parameterHintsWidget_$("span.documentation");if("string"===typeof activeParameter.documentation)documentation.textContent=activeParameter.documentation;else{const renderedContents=this.renderMarkdownDocs(activeParameter.documentation);documentation.appendChild(renderedContents.element)}dom/* append */.R3(this.domNodes.docs,parameterHintsWidget_$("p",{},documentation))}if(void 0===signature.documentation);else if("string"===typeof signature.documentation)dom/* append */.R3(this.domNodes.docs,parameterHintsWidget_$("p",{},signature.documentation));else{const renderedContents=this.renderMarkdownDocs(signature.documentation);dom/* append */.R3(this.domNodes.docs,renderedContents.element)}const hasDocs=this.hasDocs(signature,activeParameter);if(this.domNodes.signature.classList.toggle("has-docs",hasDocs),this.domNodes.docs.classList.toggle("empty",!hasDocs),this.domNodes.overloads.textContent=String(hints.activeSignature+1).padStart(hints.signatures.length.toString().length,"0")+"/"+hints.signatures.length,activeParameter){let labelToAnnounce="";const param=signature.parameters[activeParameterIndex];labelToAnnounce=Array.isArray(param.label)?signature.label.substring(param.label[0],param.label[1]):param.label,param.documentation&&(labelToAnnounce+="string"===typeof param.documentation?`, ${param.documentation}`:`, ${param.documentation.value}`),signature.documentation&&(labelToAnnounce+="string"===typeof signature.documentation?`, ${signature.documentation}`:`, ${signature.documentation.value}`),
// Select method gets called on every user type while parameter hints are visible.
// We do not want to spam the user with same announcements, so we only announce if the current parameter changed.
this.announcedLabel!==labelToAnnounce&&(aria/* alert */.Z9(nls/* localize */.N("hint","{0}, hint",labelToAnnounce)),this.announcedLabel=labelToAnnounce)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(markdown){const renderedContents=this.renderDisposeables.add(this.markdownRenderer.render(markdown,{asyncRenderCallback:()=>{var _a;null===(_a=this.domNodes)||void 0===_a||_a.scrollbar.scanDomNode()}}));return renderedContents.element.classList.add("markdown-docs"),renderedContents}hasDocs(signature,activeParameter){return!!(activeParameter&&"string"===typeof activeParameter.documentation&&(0,types/* assertIsDefined */.cW)(activeParameter.documentation).length>0)||(!!(activeParameter&&"object"===typeof activeParameter.documentation&&(0,types/* assertIsDefined */.cW)(activeParameter.documentation).value.length>0)||(!!(signature.documentation&&"string"===typeof signature.documentation&&(0,types/* assertIsDefined */.cW)(signature.documentation).length>0)||!!(signature.documentation&&"object"===typeof signature.documentation&&(0,types/* assertIsDefined */.cW)(signature.documentation.value).length>0)))}renderParameters(parent,signature,activeParameterIndex){const[start,end]=this.getParameterLabelOffsets(signature,activeParameterIndex),beforeSpan=document.createElement("span");beforeSpan.textContent=signature.label.substring(0,start);const paramSpan=document.createElement("span");paramSpan.textContent=signature.label.substring(start,end),paramSpan.className="parameter active";const afterSpan=document.createElement("span");afterSpan.textContent=signature.label.substring(end),dom/* append */.R3(parent,beforeSpan,paramSpan,afterSpan)}getParameterLabelOffsets(signature,paramIdx){const param=signature.parameters[paramIdx];if(param){if(Array.isArray(param.label))return param.label;if(param.label.length){const regex=new RegExp(`(\\W|^)${(0,strings/* escapeRegExpCharacters */.ec)(param.label)}(?=\\W|$)`,"g");regex.test(signature.label);const idx=regex.lastIndex-param.label.length;return idx>=0?[idx,regex.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return ParameterHintsWidget.ID}trigger(context){this.model.trigger(context,0)}updateMaxHeight(){if(!this.domNodes)return;const height=Math.max(this.editor.getLayoutInfo().height/4,250),maxHeight=`${height}px`;this.domNodes.element.style.maxHeight=maxHeight;const wrapper=this.domNodes.element.getElementsByClassName("phwrapper");wrapper.length&&(wrapper[0].style.maxHeight=maxHeight)}};ParameterHintsWidget.ID="editor.widget.parameterHintsWidget",ParameterHintsWidget=parameterHintsWidget_decorate([parameterHintsWidget_param(1,contextkey/* IContextKeyService */.i6),parameterHintsWidget_param(2,common_opener/* IOpenerService */.v4),parameterHintsWidget_param(3,modeService/* IModeService */.h)],ParameterHintsWidget);const editorHoverWidgetHighlightForeground=(0,colorRegistry/* registerColor */.P6)("editorHoverWidget.highlightForeground",{dark:colorRegistry/* listHighlightForeground */.Gw,light:colorRegistry/* listHighlightForeground */.Gw,hc:colorRegistry/* listHighlightForeground */.Gw},nls/* localize */.N("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const border=theme.getColor(colorRegistry/* editorHoverBorder */.CN);if(border){const borderWidth=theme.type===common_theme/* ColorScheme */.e.HIGH_CONTRAST?2:1;collector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`),collector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(.5)}; }`),collector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(.5)}; }`)}const background=theme.getColor(colorRegistry/* editorHoverBackground */.yJ);background&&collector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);const link=theme.getColor(colorRegistry/* textLinkForeground */.ur);link&&collector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);const linkHover=theme.getColor(colorRegistry/* textLinkActiveForeground */.sg);linkHover&&collector.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${linkHover}; }`);const foreground=theme.getColor(colorRegistry/* editorHoverForeground */.Sb);foreground&&collector.addRule(`.monaco-editor .parameter-hints-widget { color: ${foreground}; }`);const codeBackground=theme.getColor(colorRegistry/* textCodeBlockBackground */.Sw);codeBackground&&collector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);const parameterHighlightColor=theme.getColor(editorHoverWidgetHighlightForeground);parameterHighlightColor&&collector.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${parameterHighlightColor}}`)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHints.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var parameterHints_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},parameterHints_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let ParameterHintsController=class ParameterHintsController extends lifecycle/* Disposable */.JT{constructor(editor,instantiationService){super(),this.editor=editor,this.widget=this._register(instantiationService.createInstance(ParameterHintsWidget,this.editor))}static get(editor){return editor.getContribution(ParameterHintsController.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(context){this.widget.trigger(context)}};ParameterHintsController.ID="editor.controller.parameterHints",ParameterHintsController=parameterHints_decorate([parameterHints_param(1,instantiation/* IInstantiationService */.TG)],ParameterHintsController);class TriggerParameterHintsAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.triggerParameterHints",label:nls/* localize */.N("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:editorContextKeys/* EditorContextKeys */.u.hasSignatureHelpProvider,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:3082/* Space */,weight:100/* EditorContrib */}})}run(accessor,editor){const controller=ParameterHintsController.get(editor);controller&&controller.trigger({triggerKind:modes/* SignatureHelpTriggerKind */.WW.Invoke})}}(0,editorExtensions/* registerEditorContribution */._K)(ParameterHintsController.ID,ParameterHintsController),(0,editorExtensions/* registerEditorAction */.Qr)(TriggerParameterHintsAction);const parameterHints_weight=175,ParameterHintsCommand=editorExtensions/* EditorCommand */._l.bindToContribution(ParameterHintsController.get);(0,editorExtensions/* registerEditorCommand */.fK)(new ParameterHintsCommand({id:"closeParameterHints",precondition:Context.Visible,handler:x=>x.cancel(),kbOpts:{weight:parameterHints_weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:9/* Escape */,secondary:[1033/* Escape */]}})),(0,editorExtensions/* registerEditorCommand */.fK)(new ParameterHintsCommand({id:"showPrevParameterHint",precondition:contextkey/* ContextKeyExpr */.Ao.and(Context.Visible,Context.MultipleSignatures),handler:x=>x.previous(),kbOpts:{weight:parameterHints_weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:16/* UpArrow */,secondary:[528/* UpArrow */],mac:{primary:16/* UpArrow */,secondary:[528/* UpArrow */,302/* KeyP */]}}})),(0,editorExtensions/* registerEditorCommand */.fK)(new ParameterHintsCommand({id:"showNextParameterHint",precondition:contextkey/* ContextKeyExpr */.Ao.and(Context.Visible,Context.MultipleSignatures),handler:x=>x.next(),kbOpts:{weight:parameterHints_weight,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:18/* DownArrow */,secondary:[530/* DownArrow */],mac:{primary:18/* DownArrow */,secondary:[530/* DownArrow */,300/* KeyN */]}}}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/textResourceConfigurationService.js
var textResourceConfigurationService=__webpack_require__(333187),configurationRegistry=__webpack_require__(423193),common_platform=__webpack_require__(789872),renameInputField_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},renameInputField_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/configuration/common/configurationRegistry.js
const CONTEXT_RENAME_INPUT_VISIBLE=new contextkey/* RawContextKey */.uy("renameInputVisible",!1,(0,nls/* localize */.N)("renameInputVisible","Whether the rename input widget is visible"));let RenameInputField=class{constructor(_editor,_acceptKeybindings,_themeService,_keybindingService,contextKeyService){this._editor=_editor,this._acceptKeybindings=_acceptKeybindings,this._themeService=_themeService,this._keybindingService=_keybindingService,this._disposables=new lifecycle/* DisposableStore */.SL,this.allowEditorOverflow=!0,this._visibleContextKey=CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(43/* fontInfo */)&&this._updateFont()}))),this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,nls/* localize */.N)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const updateLabel=()=>{var _a,_b;const[accept,preview]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(accept),this._label.innerText=(0,nls/* localize */.N)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(_a=this._keybindingService.lookupKeybinding(accept))||void 0===_a?void 0:_a.getLabel(),null===(_b=this._keybindingService.lookupKeybinding(preview))||void 0===_b?void 0:_b.getLabel())};updateLabel(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(theme){var _a,_b,_c,_d;if(!this._input||!this._domNode)return;const widgetShadowColor=theme.getColor(colorRegistry/* widgetShadow */.rh);this._domNode.style.backgroundColor=String(null!==(_a=theme.getColor(colorRegistry/* editorWidgetBackground */.D0))&&void 0!==_a?_a:""),this._domNode.style.boxShadow=widgetShadowColor?` 0 0 8px 2px ${widgetShadowColor}`:"",this._domNode.style.color=String(null!==(_b=theme.getColor(colorRegistry/* inputForeground */.zJ))&&void 0!==_b?_b:""),this._input.style.backgroundColor=String(null!==(_c=theme.getColor(colorRegistry/* inputBackground */.sE))&&void 0!==_c?_c:"");
// this._input.style.color = String(theme.getColor(inputForeground) ?? '');
const border=theme.getColor(colorRegistry/* inputBorder */.dt);this._input.style.borderWidth=border?"1px":"0px",this._input.style.borderStyle=border?"solid":"none",this._input.style.borderColor=null!==(_d=null===border||void 0===border?void 0:border.toString())&&void 0!==_d?_d:"none"}_updateFont(){if(!this._input||!this._label)return;const fontInfo=this._editor.getOption(43/* fontInfo */);this._input.style.fontFamily=fontInfo.fontFamily,this._input.style.fontWeight=fontInfo.fontWeight,this._input.style.fontSize=`${fontInfo.fontSize}px`,this._label.style.fontSize=.8*fontInfo.fontSize+"px"}getPosition(){return this._visible?{position:this._position,preference:[2/* BELOW */,1/* ABOVE */]}:null}afterRender(position){position||
// cancel rename when input widget isn't rendered anymore
this.cancelInput(!0)}acceptInput(wantsPreview){this._currentAcceptInput&&this._currentAcceptInput(wantsPreview)}cancelInput(focusEditor){this._currentCancelInput&&this._currentCancelInput(focusEditor)}getInput(where,value,selectionStart,selectionEnd,supportPreview,token){this._domNode.classList.toggle("preview",supportPreview),this._position=new core_position/* Position */.L(where.startLineNumber,where.startColumn),this._input.value=value,this._input.setAttribute("selectionStart",selectionStart.toString()),this._input.setAttribute("selectionEnd",selectionEnd.toString()),this._input.size=Math.max(1.1*(where.endColumn-where.startColumn),20);const disposeOnDone=new lifecycle/* DisposableStore */.SL;return new Promise((resolve=>{this._currentCancelInput=focusEditor=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,resolve(focusEditor),!0),this._currentAcceptInput=wantsPreview=>{0!==this._input.value.trim().length&&this._input.value!==value?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,resolve({newName:this._input.value,wantsPreview:supportPreview&&wantsPreview})):
// empty or whitespace only or not changed
this.cancelInput(!0)},token.onCancellationRequested((()=>this.cancelInput(!0))),disposeOnDone.add(this._editor.onDidBlurEditorWidget((()=>this.cancelInput(!1)))),this._show()})).finally((()=>{disposeOnDone.dispose(),this._hide()}))}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0/* Smooth */),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))}),100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};RenameInputField=renameInputField_decorate([renameInputField_param(2,common_themeService/* IThemeService */.XE),renameInputField_param(3,keybinding/* IKeybindingService */.d),renameInputField_param(4,contextkey/* IContextKeyService */.i6)],RenameInputField);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/rename/rename.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var rename_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},rename_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},rename_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class RenameSkeleton{constructor(model,position){this.model=model,this.position=position,this._providerRenameIdx=0,this._providers=modes/* RenameProviderRegistry */.G0.ordered(model)}hasProvider(){return this._providers.length>0}resolveRenameLocation(token){return rename_awaiter(this,void 0,void 0,(function*(){const rejects=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const provider=this._providers[this._providerRenameIdx];if(!provider.resolveRenameLocation)break;let res=yield provider.resolveRenameLocation(this.model,this.position,token);if(res){if(!res.rejectReason)return res;rejects.push(res.rejectReason)}}const word=this.model.getWordAtPosition(this.position);return word?{range:new core_range/* Range */.e(this.position.lineNumber,word.startColumn,this.position.lineNumber,word.endColumn),text:word.word,rejectReason:rejects.length>0?rejects.join("\n"):void 0}:{range:core_range/* Range */.e.fromPositions(this.position),text:"",rejectReason:rejects.length>0?rejects.join("\n"):void 0}}))}provideRenameEdits(newName,token){return rename_awaiter(this,void 0,void 0,(function*(){return this._provideRenameEdits(newName,this._providerRenameIdx,[],token)}))}_provideRenameEdits(newName,i,rejects,token){return rename_awaiter(this,void 0,void 0,(function*(){const provider=this._providers[i];if(!provider)return{edits:[],rejectReason:rejects.join("\n")};const result=yield provider.provideRenameEdits(this.model,this.position,newName,token);return result?result.rejectReason?this._provideRenameEdits(newName,i+1,rejects.concat(result.rejectReason),token):result:this._provideRenameEdits(newName,i+1,rejects.concat(nls/* localize */.N("no result","No result.")),token)}))}}function rename(model,position,newName){return rename_awaiter(this,void 0,void 0,(function*(){const skeleton=new RenameSkeleton(model,position),loc=yield skeleton.resolveRenameLocation(cancellation/* CancellationToken */.T.None);return(null===loc||void 0===loc?void 0:loc.rejectReason)?{edits:[],rejectReason:loc.rejectReason}:skeleton.provideRenameEdits(newName,cancellation/* CancellationToken */.T.None)}))}
// ---  register actions and commands
let RenameController=class RenameController{constructor(editor,_instaService,_notificationService,_bulkEditService,_progressService,_logService,_configService){this.editor=editor,this._instaService=_instaService,this._notificationService=_notificationService,this._bulkEditService=_bulkEditService,this._progressService=_progressService,this._logService=_logService,this._configService=_configService,this._dispoableStore=new lifecycle/* DisposableStore */.SL,this._cts=new cancellation/* CancellationTokenSource */.A,this._renameInputField=this._dispoableStore.add(new common_async/* IdleValue */.Ue((()=>this._dispoableStore.add(this._instaService.createInstance(RenameInputField,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"])))))}static get(editor){return editor.getContribution(RenameController.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return rename_awaiter(this,void 0,void 0,(function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const position=this.editor.getPosition(),skeleton=new RenameSkeleton(this.editor.getModel(),position);if(!skeleton.hasProvider())return;
// resolve rename location
let loc;this._cts=new editorState/* EditorStateCancellationTokenSource */.Dl(this.editor,5/* Value */);try{const resolveLocationOperation=skeleton.resolveRenameLocation(this._cts.token);this._progressService.showWhile(resolveLocationOperation,250),loc=yield resolveLocationOperation}catch(e){return void MessageController.get(this.editor).showMessage(e||nls/* localize */.N("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),position)}if(!loc)return;if(loc.rejectReason)return void MessageController.get(this.editor).showMessage(loc.rejectReason,position);if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new editorState/* EditorStateCancellationTokenSource */.Dl(this.editor,5/* Value */,loc.range);
// do rename at location
let selection=this.editor.getSelection(),selectionStart=0,selectionEnd=loc.text.length;core_range/* Range */.e.isEmpty(selection)||core_range/* Range */.e.spansMultipleLines(selection)||!core_range/* Range */.e.containsRange(loc.range,selection)||(selectionStart=Math.max(0,selection.startColumn-loc.range.startColumn),selectionEnd=Math.min(loc.range.endColumn,selection.endColumn)-loc.range.startColumn);const supportPreview=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),inputFieldResult=yield this._renameInputField.value.getInput(loc.range,loc.text,selectionStart,selectionEnd,supportPreview,this._cts.token);
// no result, only hint to focus the editor or not
if("boolean"===typeof inputFieldResult)return void(inputFieldResult&&this.editor.focus());this.editor.focus();const renameOperation=(0,common_async/* raceCancellation */.eP)(skeleton.provideRenameEdits(inputFieldResult.newName,this._cts.token),this._cts.token).then((renameResult=>rename_awaiter(this,void 0,void 0,(function*(){renameResult&&this.editor.hasModel()&&(renameResult.rejectReason?this._notificationService.info(renameResult.rejectReason):(
// collapse selection to active end
this.editor.setSelection(core_range/* Range */.e.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(services_bulkEditService/* ResourceEdit */.fo.convert(renameResult),{editor:this.editor,showPreview:inputFieldResult.wantsPreview,label:nls/* localize */.N("label","Renaming '{0}'",null===loc||void 0===loc?void 0:loc.text),quotableLabel:nls/* localize */.N("quotableLabel","Renaming {0}",null===loc||void 0===loc?void 0:loc.text)}).then((result=>{result.ariaSummary&&(0,aria/* alert */.Z9)(nls/* localize */.N("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",loc.text,inputFieldResult.newName,result.ariaSummary))})).catch((err=>{this._notificationService.error(nls/* localize */.N("rename.failedApply","Rename failed to apply edits")),this._logService.error(err)}))))}))),(err=>{this._notificationService.error(nls/* localize */.N("rename.failed","Rename failed to compute edits")),this._logService.error(err)}));return this._progressService.showWhile(renameOperation,250),renameOperation}))}acceptRenameInput(wantsPreview){this._renameInputField.value.acceptInput(wantsPreview)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};RenameController.ID="editor.contrib.renameController",RenameController=rename_decorate([rename_param(1,instantiation/* IInstantiationService */.TG),rename_param(2,notification/* INotificationService */.lT),rename_param(3,services_bulkEditService/* IBulkEditService */.vu),rename_param(4,progress/* IEditorProgressService */.e),rename_param(5,log/* ILogService */.VZ),rename_param(6,textResourceConfigurationService/* ITextResourceConfigurationService */.V)],RenameController);
// ---- action implementation
class RenameAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.rename",label:nls/* localize */.N("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.writable,editorContextKeys/* EditorContextKeys */.u.hasRenameProvider),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:60/* F2 */,weight:100/* EditorContrib */},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(accessor,args){const editorService=accessor.get(services_codeEditorService/* ICodeEditorService */.$),[uri,pos]=Array.isArray(args)&&args||[void 0,void 0];return common_uri/* URI */.o.isUri(uri)&&core_position/* Position */.L.isIPosition(pos)?editorService.openCodeEditor({resource:uri},editorService.getActiveCodeEditor()).then((editor=>{editor&&(editor.setPosition(pos),editor.invokeWithinContext((accessor=>(this.reportTelemetry(accessor,editor),this.run(accessor,editor)))))}),errors/* onUnexpectedError */.dL):super.runCommand(accessor,args)}run(accessor,editor){const controller=RenameController.get(editor);return controller?controller.run():Promise.resolve()}}(0,editorExtensions/* registerEditorContribution */._K)(RenameController.ID,RenameController),(0,editorExtensions/* registerEditorAction */.Qr)(RenameAction);const RenameCommand=editorExtensions/* EditorCommand */._l.bindToContribution(RenameController.get);(0,editorExtensions/* registerEditorCommand */.fK)(new RenameCommand({id:"acceptRenameInput",precondition:CONTEXT_RENAME_INPUT_VISIBLE,handler:x=>x.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:3/* Enter */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new RenameCommand({id:"acceptRenameInputWithPreview",precondition:contextkey/* ContextKeyExpr */.Ao.and(CONTEXT_RENAME_INPUT_VISIBLE,contextkey/* ContextKeyExpr */.Ao.has("config.editor.rename.enablePreview")),handler:x=>x.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:1027/* Enter */}})),(0,editorExtensions/* registerEditorCommand */.fK)(new RenameCommand({id:"cancelRenameInput",precondition:CONTEXT_RENAME_INPUT_VISIBLE,handler:x=>x.cancelRenameInput(),kbOpts:{weight:199,kbExpr:editorContextKeys/* EditorContextKeys */.u.focus,primary:9/* Escape */,secondary:[1033/* Escape */]}})),
// ---- api bridge command
(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeDocumentRenameProvider",(function(model,position,...args){const[newName]=args;return(0,types/* assertType */.p_)("string"===typeof newName),rename(model,position,newName)})),(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executePrepareRename",(function(model,position){return rename_awaiter(this,void 0,void 0,(function*(){const skeleton=new RenameSkeleton(model,position),loc=yield skeleton.resolveRenameLocation(cancellation/* CancellationToken */.T.None);if(null===loc||void 0===loc?void 0:loc.rejectReason)throw new Error(loc.rejectReason);return loc}))})),
//todo@jrieken use editor options world
common_platform/* Registry */.B.as(configurationRegistry/* Extensions */.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5/* LANGUAGE_OVERRIDABLE */,description:nls/* localize */.N("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/wordSelections.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class WordSelectionRangeProvider{provideSelectionRanges(model,positions){const result=[];for(const position of positions){const bucket=[];result.push(bucket),this._addInWordRanges(bucket,model,position),this._addWordRanges(bucket,model,position),this._addWhitespaceLine(bucket,model,position),bucket.push({range:model.getFullModelRange()})}return result}_addInWordRanges(bucket,model,pos){const obj=model.getWordAtPosition(pos);if(!obj)return;let{word:word,startColumn:startColumn}=obj,offset=pos.column-startColumn,start=offset,end=offset,lastCh=0;
// LEFT anchor (start)
for(;start>=0;start--){let ch=word.charCodeAt(start);if(start!==offset&&(95/* Underline */===ch||45/* Dash */===ch))
// foo-bar OR foo_bar
break;if((0,strings/* isLowerAsciiLetter */.mK)(ch)&&(0,strings/* isUpperAsciiLetter */.df)(lastCh))
// fooBar
break;lastCh=ch}
// RIGHT anchor (end)
for(start+=1;end<word.length;end++){let ch=word.charCodeAt(end);if((0,strings/* isUpperAsciiLetter */.df)(ch)&&(0,strings/* isLowerAsciiLetter */.mK)(lastCh))
// fooBar
break;if(95/* Underline */===ch||45/* Dash */===ch)
// foo-bar OR foo_bar
break;lastCh=ch}start<end&&bucket.push({range:new core_range/* Range */.e(pos.lineNumber,startColumn+start,pos.lineNumber,startColumn+end)})}_addWordRanges(bucket,model,pos){const word=model.getWordAtPosition(pos);word&&bucket.push({range:new core_range/* Range */.e(pos.lineNumber,word.startColumn,pos.lineNumber,word.endColumn)})}_addWhitespaceLine(bucket,model,pos){model.getLineLength(pos.lineNumber)>0&&0===model.getLineFirstNonWhitespaceColumn(pos.lineNumber)&&0===model.getLineLastNonWhitespaceColumn(pos.lineNumber)&&bucket.push({range:new core_range/* Range */.e(pos.lineNumber,1,pos.lineNumber,model.getLineMaxColumn(pos.lineNumber))})}}// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/smartSelect.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var smartSelect_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class SelectionRanges{constructor(index,ranges){this.index=index,this.ranges=ranges}mov(fwd){let index=this.index+(fwd?1:-1);if(index<0||index>=this.ranges.length)return this;const res=new SelectionRanges(index,this.ranges);return res.ranges[index].equalsRange(this.ranges[this.index])?res.mov(fwd):res}}class SmartSelectController{constructor(_editor){this._editor=_editor,this._ignoreSelection=!1}static get(editor){return editor.getContribution(SmartSelectController.ID)}dispose(){var _a;null===(_a=this._selectionListener)||void 0===_a||_a.dispose()}run(forward){return smartSelect_awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const selections=this._editor.getSelections(),model=this._editor.getModel();if(!modes/* SelectionRangeRegistry */.AC.has(model))return;if(this._state||(yield provideSelectionRanges(model,selections.map((s=>s.getPosition())),this._editor.getOption(101/* smartSelect */),cancellation/* CancellationToken */.T.None).then((ranges=>{var _a;if(arrays/* isNonEmptyArray */.Of(ranges)&&ranges.length===selections.length&&this._editor.hasModel()&&arrays/* equals */.fS(this._editor.getSelections(),selections,((a,b)=>a.equalsSelection(b)))){for(let i=0;i<ranges.length;i++)ranges[i]=ranges[i].filter((range=>range.containsPosition(selections[i].getStartPosition())&&range.containsPosition(selections[i].getEndPosition()))),
// prepend current selection
ranges[i].unshift(selections[i]);this._state=ranges.map((ranges=>new SelectionRanges(0,ranges))),
// listen to caret move and forget about state
null===(_a=this._selectionListener)||void 0===_a||_a.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition((()=>{var _a;this._ignoreSelection||(null===(_a=this._selectionListener)||void 0===_a||_a.dispose(),this._state=void 0)}))}}))),!this._state)
// no state
return;this._state=this._state.map((state=>state.mov(forward)));const newSelections=this._state.map((state=>core_selection/* Selection */.Y.fromPositions(state.ranges[state.index].getStartPosition(),state.ranges[state.index].getEndPosition())));this._ignoreSelection=!0;try{this._editor.setSelections(newSelections)}finally{this._ignoreSelection=!1}}))}}SmartSelectController.ID="editor.contrib.smartSelectController";class AbstractSmartSelect extends editorExtensions/* EditorAction */.R6{constructor(forward,opts){super(opts),this._forward=forward}run(_accessor,editor){return smartSelect_awaiter(this,void 0,void 0,(function*(){let controller=SmartSelectController.get(editor);controller&&(yield controller.run(this._forward))}))}}class GrowSelectionAction extends AbstractSmartSelect{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:nls/* localize */.N("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1553/* RightArrow */,mac:{primary:3345/* RightArrow */,secondary:[1297/* RightArrow */]},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"1_basic",title:nls/* localize */.N({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}
// renamed command id
commands/* CommandsRegistry */.P.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class ShrinkSelectionAction extends AbstractSmartSelect{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:nls/* localize */.N("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1551/* LeftArrow */,mac:{primary:3343/* LeftArrow */,secondary:[1295/* LeftArrow */]},weight:100/* EditorContrib */},menuOpts:{menuId:common_actions/* MenuId */.eH.MenubarSelectionMenu,group:"1_basic",title:nls/* localize */.N({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}function provideSelectionRanges(model,positions,options,token){return smartSelect_awaiter(this,void 0,void 0,(function*(){const providers=modes/* SelectionRangeRegistry */.AC.all(model);1===providers.length&&
// add word selection and bracket selection when no provider exists
providers.unshift(new BracketSelectionRangeProvider);let work=[],allRawRanges=[];for(const provider of providers)work.push(Promise.resolve(provider.provideSelectionRanges(model,positions,token)).then((allProviderRanges=>{if(arrays/* isNonEmptyArray */.Of(allProviderRanges)&&allProviderRanges.length===positions.length)for(let i=0;i<positions.length;i++){allRawRanges[i]||(allRawRanges[i]=[]);for(const oneProviderRanges of allProviderRanges[i])core_range/* Range */.e.isIRange(oneProviderRanges.range)&&core_range/* Range */.e.containsPosition(oneProviderRanges.range,positions[i])&&allRawRanges[i].push(core_range/* Range */.e.lift(oneProviderRanges.range))}}),errors/* onUnexpectedExternalError */.Cp));return yield Promise.all(work),allRawRanges.map((oneRawRanges=>{if(0===oneRawRanges.length)return[];
// sort all by start/end position
oneRawRanges.sort(((a,b)=>core_position/* Position */.L.isBefore(a.getStartPosition(),b.getStartPosition())?1:core_position/* Position */.L.isBefore(b.getStartPosition(),a.getStartPosition())||core_position/* Position */.L.isBefore(a.getEndPosition(),b.getEndPosition())?-1:core_position/* Position */.L.isBefore(b.getEndPosition(),a.getEndPosition())?1:0));
// remove ranges that don't contain the former range or that are equal to the
// former range
let last,oneRanges=[];for(const range of oneRawRanges)(!last||core_range/* Range */.e.containsRange(range,last)&&!core_range/* Range */.e.equalsRange(range,last))&&(oneRanges.push(range),last=range);if(!options.selectLeadingAndTrailingWhitespace)return oneRanges;
// add ranges that expand trivia at line starts and ends whenever a range
// wraps onto the a new line
let oneRangesWithTrivia=[oneRanges[0]];for(let i=1;i<oneRanges.length;i++){const prev=oneRanges[i-1],cur=oneRanges[i];if(cur.startLineNumber!==prev.startLineNumber||cur.endLineNumber!==prev.endLineNumber){
// add line/block range without leading/failing whitespace
const rangeNoWhitespace=new core_range/* Range */.e(prev.startLineNumber,model.getLineFirstNonWhitespaceColumn(prev.startLineNumber),prev.endLineNumber,model.getLineLastNonWhitespaceColumn(prev.endLineNumber));rangeNoWhitespace.containsRange(prev)&&!rangeNoWhitespace.equalsRange(prev)&&cur.containsRange(rangeNoWhitespace)&&!cur.equalsRange(rangeNoWhitespace)&&oneRangesWithTrivia.push(rangeNoWhitespace);
// add line/block range
const rangeFull=new core_range/* Range */.e(prev.startLineNumber,1,prev.endLineNumber,model.getLineMaxColumn(prev.endLineNumber));rangeFull.containsRange(prev)&&!rangeFull.equalsRange(rangeNoWhitespace)&&cur.containsRange(rangeFull)&&!cur.equalsRange(rangeFull)&&oneRangesWithTrivia.push(rangeFull)}oneRangesWithTrivia.push(cur)}return oneRangesWithTrivia}))}))}(0,editorExtensions/* registerEditorContribution */._K)(SmartSelectController.ID,SmartSelectController),(0,editorExtensions/* registerEditorAction */.Qr)(GrowSelectionAction),(0,editorExtensions/* registerEditorAction */.Qr)(ShrinkSelectionAction),
// word selection
modes/* SelectionRangeRegistry */.AC.register("*",new WordSelectionRangeProvider),(0,editorExtensions/* registerModelCommand */.f)("_executeSelectionRangeProvider",(function(model,...args){const[positions]=args;return provideSelectionRanges(model,positions,{selectLeadingAndTrailingWhitespace:!0},cancellation/* CancellationToken */.T.None)}));// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/tokenization.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class ForceRetokenizeAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.forceRetokenize",label:nls/* localize */.N("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(accessor,editor){if(!editor.hasModel())return;const model=editor.getModel();model.resetTokenization();const sw=new stopwatch/* StopWatch */.G(!0);model.forceTokenization(model.getLineCount()),sw.stop()}}(0,editorExtensions/* registerEditorAction */.Qr)(ForceRetokenizeAction);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/toggleTabFocusMode.js
__webpack_require__(419720);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/platform/dialogs/common/dialogs.js
var dialogs=__webpack_require__(128820),unusualLineTerminators_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},unusualLineTerminators_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},unusualLineTerminators_awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const ignoreUnusualLineTerminators="ignoreUnusualLineTerminators";function writeIgnoreState(codeEditorService,model,state){codeEditorService.setModelProperty(model.uri,ignoreUnusualLineTerminators,state)}function readIgnoreState(codeEditorService,model){return codeEditorService.getModelProperty(model.uri,ignoreUnusualLineTerminators)}let UnusualLineTerminatorsDetector=class extends lifecycle/* Disposable */.JT{constructor(_editor,_dialogService,_codeEditorService){super(),this._editor=_editor,this._dialogService=_dialogService,this._codeEditorService=_codeEditorService,this._config=this._editor.getOption(112/* unusualLineTerminators */),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(112/* unusualLineTerminators */)&&(this._config=this._editor.getOption(112/* unusualLineTerminators */),this._checkForUnusualLineTerminators())}))),this._register(this._editor.onDidChangeModel((()=>{this._checkForUnusualLineTerminators()}))),this._register(this._editor.onDidChangeModelContent((e=>{e.isUndoing||this._checkForUnusualLineTerminators()})))}_checkForUnusualLineTerminators(){return unusualLineTerminators_awaiter(this,void 0,void 0,(function*(){if("off"===this._config)return;if(!this._editor.hasModel())return;const model=this._editor.getModel();if(!model.mightContainUnusualLineTerminators())return;const ignoreState=readIgnoreState(this._codeEditorService,model);if(!0===ignoreState)
// this model should be ignored
return;if(this._editor.getOption(80/* readOnly */))
// read only editor => sorry!
return;if("auto"===this._config)
// just do it!
return void model.removeUnusualLineTerminators(this._editor.getSelections());const result=yield this._dialogService.confirm({title:nls/* localize */.N("unusualLineTerminators.title","Unusual Line Terminators"),message:nls/* localize */.N("unusualLineTerminators.message","Detected unusual line terminators"),detail:nls/* localize */.N("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,common_resources/* basename */.EZ)(model.uri)),primaryButton:nls/* localize */.N("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:nls/* localize */.N("unusualLineTerminators.ignore","Ignore")});result.confirmed?model.removeUnusualLineTerminators(this._editor.getSelections()):
// this model should be ignored
writeIgnoreState(this._codeEditorService,model,!0)}))}};UnusualLineTerminatorsDetector.ID="editor.contrib.unusualLineTerminatorsDetector",UnusualLineTerminatorsDetector=unusualLineTerminators_decorate([unusualLineTerminators_param(1,dialogs/* IDialogService */.S),unusualLineTerminators_param(2,services_codeEditorService/* ICodeEditorService */.$)],UnusualLineTerminatorsDetector),(0,editorExtensions/* registerEditorContribution */._K)(UnusualLineTerminatorsDetector.ID,UnusualLineTerminatorsDetector);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/getSemanticTokens.js + 1 modules
var getSemanticTokens=__webpack_require__(632670),modelServiceImpl=__webpack_require__(32334),semanticTokensProviderStyling=__webpack_require__(665072),viewportSemanticTokens_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},viewportSemanticTokens_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js
let ViewportSemanticTokensContribution=class extends lifecycle/* Disposable */.JT{constructor(editor,_modelService,_themeService,_configurationService){super(),this._modelService=_modelService,this._themeService=_themeService,this._configurationService=_configurationService,this._editor=editor,this._tokenizeViewport=new common_async/* RunOnceScheduler */.pY((()=>this._tokenizeViewportNow()),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange((()=>{this._tokenizeViewport.schedule()}))),this._register(this._editor.onDidChangeModel((()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))),this._register(this._editor.onDidChangeModelContent((e=>{this._cancelAll(),this._tokenizeViewport.schedule()}))),this._register(modes/* DocumentRangeSemanticTokensProviderRegistry */.K7.onDidChange((()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(modelServiceImpl/* SEMANTIC_HIGHLIGHTING_SETTING_ID */.e3)&&(this._cancelAll(),this._tokenizeViewport.schedule())}))),this._register(this._themeService.onDidColorThemeChange((()=>{this._cancelAll(),this._tokenizeViewport.schedule()})))}_cancelAll(){for(const request of this._outstandingRequests)request.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(req){for(let i=0,len=this._outstandingRequests.length;i<len;i++)if(this._outstandingRequests[i]===req)return void this._outstandingRequests.splice(i,1)}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const model=this._editor.getModel();if(model.hasCompleteSemanticTokens())return;if(!(0,modelServiceImpl/* isSemanticColoringEnabled */.tw)(model,this._themeService,this._configurationService))return void(model.hasSomeSemanticTokens()&&model.setSemanticTokens(null,!1));if(!(0,getSemanticTokens/* hasDocumentRangeSemanticTokensProvider */.KO)(model))return void(model.hasSomeSemanticTokens()&&model.setSemanticTokens(null,!1));const visibleRanges=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(visibleRanges.map((range=>this._requestRange(model,range))))}_requestRange(model,range){const requestVersionId=model.getVersionId(),request=(0,common_async/* createCancelablePromise */.PG)((token=>Promise.resolve((0,getSemanticTokens/* getDocumentRangeSemanticTokens */.OG)(model,range,token))));return request.then((r=>{if(!r||!r.tokens||model.isDisposed()||model.getVersionId()!==requestVersionId)return;const{provider:provider,tokens:result}=r,styling=this._modelService.getSemanticTokensProviderStyling(provider);model.setPartialSemanticTokens(range,(0,semanticTokensProviderStyling/* toMultilineTokens2 */.h)(result,styling,model.getLanguageId()))})).then((()=>this._removeOutstandingRequest(request)),(()=>this._removeOutstandingRequest(request))),request}};ViewportSemanticTokensContribution.ID="editor.contrib.viewportSemanticTokens",ViewportSemanticTokensContribution=viewportSemanticTokens_decorate([viewportSemanticTokens_param(1,services_modelService/* IModelService */.q),viewportSemanticTokens_param(2,common_themeService/* IThemeService */.XE),viewportSemanticTokens_param(3,configuration/* IConfigurationService */.Ui)],ViewportSemanticTokensContribution),(0,editorExtensions/* registerEditorContribution */._K)(ViewportSemanticTokensContribution.ID,ViewportSemanticTokensContribution);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/wordHighlighter.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var wordHighlighter_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},wordHighlighter_param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};const editorWordHighlight=(0,colorRegistry/* registerColor */.P6)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},nls/* localize */.N("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),editorWordHighlightStrong=(0,colorRegistry/* registerColor */.P6)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},nls/* localize */.N("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),editorWordHighlightBorder=(0,colorRegistry/* registerColor */.P6)("editor.wordHighlightBorder",{light:null,dark:null,hc:colorRegistry/* activeContrastBorder */.xL},nls/* localize */.N("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),editorWordHighlightStrongBorder=(0,colorRegistry/* registerColor */.P6)("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:colorRegistry/* activeContrastBorder */.xL},nls/* localize */.N("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),overviewRulerWordHighlightForeground=(0,colorRegistry/* registerColor */.P6)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},nls/* localize */.N("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),overviewRulerWordHighlightStrongForeground=(0,colorRegistry/* registerColor */.P6)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},nls/* localize */.N("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ctxHasWordHighlights=new contextkey/* RawContextKey */.uy("hasWordHighlights",!1);function getOccurrencesAtPosition(model,position,token){const orderedByScore=modes/* DocumentHighlightProviderRegistry */.vH.ordered(model);
// in order of score ask the occurrences provider
// until someone response with a good result
// (good = none empty array)
return(0,common_async/* first */.Ps)(orderedByScore.map((provider=>()=>Promise.resolve(provider.provideDocumentHighlights(model,position,token)).then(void 0,errors/* onUnexpectedExternalError */.Cp))),arrays/* isNonEmptyArray */.Of)}class OccurenceAtPositionRequest{constructor(model,selection,wordSeparators){this._wordRange=this._getCurrentWordRange(model,selection),this.result=(0,common_async/* createCancelablePromise */.PG)((token=>this._compute(model,selection,wordSeparators,token)))}_getCurrentWordRange(model,selection){const word=model.getWordAtPosition(selection.getPosition());return word?new core_range/* Range */.e(selection.startLineNumber,word.startColumn,selection.startLineNumber,word.endColumn):null}isValid(model,selection,decorationIds){const lineNumber=selection.startLineNumber,startColumn=selection.startColumn,endColumn=selection.endColumn,currentWordRange=this._getCurrentWordRange(model,selection);let requestIsValid=Boolean(this._wordRange&&this._wordRange.equalsRange(currentWordRange));
// Even if we are on a different word, if that word is in the decorations ranges, the request is still valid
// (Same symbol)
for(let i=0,len=decorationIds.length;!requestIsValid&&i<len;i++){let range=model.getDecorationRange(decorationIds[i]);range&&range.startLineNumber===lineNumber&&range.startColumn<=startColumn&&range.endColumn>=endColumn&&(requestIsValid=!0)}return requestIsValid}cancel(){this.result.cancel()}}class SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest{_compute(model,selection,wordSeparators,token){return getOccurrencesAtPosition(model,selection.getPosition(),token).then((value=>value||[]))}}class TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest{constructor(model,selection,wordSeparators){super(model,selection,wordSeparators),this._selectionIsEmpty=selection.isEmpty()}_compute(model,selection,wordSeparators,token){return(0,common_async/* timeout */.Vs)(250,token).then((()=>{if(!selection.isEmpty())return[];const word=model.getWordAtPosition(selection.getPosition());if(!word||word.word.length>1e3)return[];const matches=model.findMatches(word.word,!0,!1,!0,wordSeparators,!1);return matches.map((m=>({range:m.range,kind:modes/* DocumentHighlightKind */.MY.Text})))}))}isValid(model,selection,decorationIds){const currentSelectionIsEmpty=selection.isEmpty();return this._selectionIsEmpty===currentSelectionIsEmpty&&super.isValid(model,selection,decorationIds)}}function computeOccurencesAtPosition(model,selection,wordSeparators){return modes/* DocumentHighlightProviderRegistry */.vH.has(model)?new SemanticOccurenceAtPositionRequest(model,selection,wordSeparators):new TextualOccurenceAtPositionRequest(model,selection,wordSeparators)}(0,editorExtensions/* registerModelAndPositionCommand */.sb)("_executeDocumentHighlights",((model,position)=>getOccurrencesAtPosition(model,position,cancellation/* CancellationToken */.T.None)));class WordHighlighter{constructor(editor,contextKeyService){this.toUnhook=new lifecycle/* DisposableStore */.SL,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=editor,this._hasWordHighlights=ctxHasWordHighlights.bindTo(contextKeyService),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71/* occurrencesHighlight */),this.model=this.editor.getModel(),this.toUnhook.add(editor.onDidChangeCursorPosition((e=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(e)}))),this.toUnhook.add(editor.onDidChangeModelContent((e=>{this._stopAll()}))),this.toUnhook.add(editor.onDidChangeConfiguration((e=>{let newValue=this.editor.getOption(71/* occurrencesHighlight */);this.occurrencesHighlight!==newValue&&(this.occurrencesHighlight=newValue,this._stopAll())}))),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return arrays/* coalesce */.kX(this._decorationIds.map((id=>this.model.getDecorationRange(id))).sort(core_range/* Range */.e.compareRangesUsingStarts))}moveNext(){let highlights=this._getSortedHighlights(),index=highlights.findIndex((range=>range.containsPosition(this.editor.getPosition()))),newIndex=(index+1)%highlights.length,dest=highlights[newIndex];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(dest.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(dest);const word=this._getWord();if(word){const lineContent=this.editor.getModel().getLineContent(dest.startLineNumber);(0,aria/* alert */.Z9)(`${lineContent}, ${newIndex+1} of ${highlights.length} for '${word.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let highlights=this._getSortedHighlights(),index=highlights.findIndex((range=>range.containsPosition(this.editor.getPosition()))),newIndex=(index-1+highlights.length)%highlights.length,dest=highlights[newIndex];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(dest.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(dest);const word=this._getWord();if(word){const lineContent=this.editor.getModel().getLineContent(dest.startLineNumber);(0,aria/* alert */.Z9)(`${lineContent}, ${newIndex+1} of ${highlights.length} for '${word.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(
// remove decorations
this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){
// Remove any existing decorations
this._removeDecorations(),
// Cancel any renderDecorationsTimer
-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),
// Cancel any worker request
null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),
// Invalidate any worker request callback
this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){
// disabled
this.occurrencesHighlight&&3/* Explicit */===e.reason?this._run():this._stopAll();
// ignore typing & other
}_getWord(){let editorSelection=this.editor.getSelection(),lineNumber=editorSelection.startLineNumber,startColumn=editorSelection.startColumn;return this.model.getWordAtPosition({lineNumber:lineNumber,column:startColumn})}_run(){let editorSelection=this.editor.getSelection();
// ignore multiline selection
if(editorSelection.startLineNumber!==editorSelection.endLineNumber)return void this._stopAll();let startColumn=editorSelection.startColumn,endColumn=editorSelection.endColumn;const word=this._getWord();
// The selection must be inside a word or surround one word at most
if(!word||word.startColumn>startColumn||word.endColumn<endColumn)return void this._stopAll();
// All the effort below is trying to achieve this:
// - when cursor is moved to a word, trigger immediately a findOccurrences request
// - 250ms later after the last cursor move event, render the occurrences
// - no flickering!
const workerRequestIsValid=this.workerRequest&&this.workerRequest.isValid(this.model,editorSelection,this._decorationIds);
// There are 4 cases:
// a) old workerRequest is valid & completed, renderDecorationsTimer fired
// b) old workerRequest is valid & completed, renderDecorationsTimer not fired
// c) old workerRequest is valid, but not completed
// d) old workerRequest is not valid
// For a) no action is needed
// For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed
if(this.lastCursorPositionChangeTime=(new Date).getTime(),workerRequestIsValid)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(
// case b)
// Delay the firing of renderDecorationsTimer by an extra 250 ms
clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{
// case d)
// Stop all previous actions and start fresh
this._stopAll();let myRequestId=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=computeOccurencesAtPosition(this.model,this.editor.getSelection(),this.editor.getOption(115/* wordSeparators */)),this.workerRequest.result.then((data=>{myRequestId===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=data||[],this._beginRenderDecorations())}),errors/* onUnexpectedError */.dL)}}_beginRenderDecorations(){let currentTime=(new Date).getTime(),minimumRenderTime=this.lastCursorPositionChangeTime+250;currentTime>=minimumRenderTime?(
// Synchronous
this.renderDecorationsTimer=-1,this.renderDecorations()):
// Asynchronous
this.renderDecorationsTimer=setTimeout((()=>{this.renderDecorations()}),minimumRenderTime-currentTime)}renderDecorations(){this.renderDecorationsTimer=-1;let decorations=[];for(const info of this.workerRequestValue)info.range&&decorations.push({range:info.range,options:WordHighlighter._getDecorationOptions(info.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,decorations),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(kind){return kind===modes/* DocumentHighlightKind */.MY.Write?this._WRITE_OPTIONS:kind===modes/* DocumentHighlightKind */.MY.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}WordHighlighter._WRITE_OPTIONS=textModel/* ModelDecorationOptions */.qx.register({description:"word-highlight-strong",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"wordHighlightStrong",overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(overviewRulerWordHighlightStrongForeground),position:model/* OverviewRulerLane */.sh.Center},minimap:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* minimapSelectionOccurrenceHighlight */.IY),position:model/* MinimapPosition */.F5.Inline}}),WordHighlighter._TEXT_OPTIONS=textModel/* ModelDecorationOptions */.qx.register({description:"selection-highlight",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"selectionHighlight",overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* overviewRulerSelectionHighlightForeground */.SP),position:model/* OverviewRulerLane */.sh.Center},minimap:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* minimapSelectionOccurrenceHighlight */.IY),position:model/* MinimapPosition */.F5.Inline}}),WordHighlighter._REGULAR_OPTIONS=textModel/* ModelDecorationOptions */.qx.register({description:"word-highlight",stickiness:1/* NeverGrowsWhenTypingAtEdges */,className:"wordHighlight",overviewRuler:{color:(0,common_themeService/* themeColorFromId */.EN)(overviewRulerWordHighlightForeground),position:model/* OverviewRulerLane */.sh.Center},minimap:{color:(0,common_themeService/* themeColorFromId */.EN)(colorRegistry/* minimapSelectionOccurrenceHighlight */.IY),position:model/* MinimapPosition */.F5.Inline}});let WordHighlighterContribution=class WordHighlighterContribution extends lifecycle/* Disposable */.JT{constructor(editor,contextKeyService){super(),this.wordHighlighter=null;const createWordHighlighterIfPossible=()=>{editor.hasModel()&&(this.wordHighlighter=new WordHighlighter(editor,contextKeyService))};this._register(editor.onDidChangeModel((e=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),createWordHighlighterIfPossible()}))),createWordHighlighterIfPossible()}static get(editor){return editor.getContribution(WordHighlighterContribution.ID)}saveViewState(){return!(!this.wordHighlighter||!this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(state){this.wordHighlighter&&state&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};WordHighlighterContribution.ID="editor.contrib.wordHighlighter",WordHighlighterContribution=wordHighlighter_decorate([wordHighlighter_param(1,contextkey/* IContextKeyService */.i6)],WordHighlighterContribution);class WordHighlightNavigationAction extends editorExtensions/* EditorAction */.R6{constructor(next,opts){super(opts),this._isNext=next}run(accessor,editor){const controller=WordHighlighterContribution.get(editor);controller&&(this._isNext?controller.moveNext():controller.moveBack())}}class NextWordHighlightAction extends WordHighlightNavigationAction{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:nls/* localize */.N("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:ctxHasWordHighlights,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:65/* F7 */,weight:100/* EditorContrib */}})}}class PrevWordHighlightAction extends WordHighlightNavigationAction{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:nls/* localize */.N("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:ctxHasWordHighlights,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:1089/* F7 */,weight:100/* EditorContrib */}})}}class TriggerWordHighlightAction extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"editor.action.wordHighlight.trigger",label:nls/* localize */.N("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:ctxHasWordHighlights.toNegated(),kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.editorTextFocus,primary:0,weight:100/* EditorContrib */}})}run(accessor,editor,args){const controller=WordHighlighterContribution.get(editor);controller&&controller.restoreViewState(!0)}}(0,editorExtensions/* registerEditorContribution */._K)(WordHighlighterContribution.ID,WordHighlighterContribution),(0,editorExtensions/* registerEditorAction */.Qr)(NextWordHighlightAction),(0,editorExtensions/* registerEditorAction */.Qr)(PrevWordHighlightAction),(0,editorExtensions/* registerEditorAction */.Qr)(TriggerWordHighlightAction),(0,common_themeService/* registerThemingParticipant */.Ic)(((theme,collector)=>{const selectionHighlight=theme.getColor(colorRegistry/* editorSelectionHighlight */.Rz);selectionHighlight&&(collector.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${selectionHighlight}; }`),collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(.5)}; }`));const wordHighlight=theme.getColor(editorWordHighlight);wordHighlight&&collector.addRule(`.monaco-editor .wordHighlight { background-color: ${wordHighlight}; }`);const wordHighlightStrong=theme.getColor(editorWordHighlightStrong);wordHighlightStrong&&collector.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${wordHighlightStrong}; }`);const selectionHighlightBorder=theme.getColor(colorRegistry/* editorSelectionHighlightBorder */.g_);selectionHighlightBorder&&collector.addRule(`.monaco-editor .selectionHighlight { border: 1px ${"hc"===theme.type?"dotted":"solid"} ${selectionHighlightBorder}; box-sizing: border-box; }`);const wordHighlightBorder=theme.getColor(editorWordHighlightBorder);wordHighlightBorder&&collector.addRule(`.monaco-editor .wordHighlight { border: 1px ${"hc"===theme.type?"dashed":"solid"} ${wordHighlightBorder}; box-sizing: border-box; }`);const wordHighlightStrongBorder=theme.getColor(editorWordHighlightStrongBorder);wordHighlightStrongBorder&&collector.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${"hc"===theme.type?"dashed":"solid"} ${wordHighlightStrongBorder}; box-sizing: border-box; }`)}));
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/controller/cursorWordOperations.js
var cursorWordOperations=__webpack_require__(5795),wordCharacterClassifier=__webpack_require__(759410),contextkeys=__webpack_require__(439282);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/controller/wordCharacterClassifier.js
// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/wordOperations/wordOperations.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class MoveWordCommand extends editorExtensions/* EditorCommand */._l{constructor(opts){super(opts),this._inSelectionMode=opts.inSelectionMode,this._wordNavigationType=opts.wordNavigationType}runEditorCommand(accessor,editor,args){if(!editor.hasModel())return;const wordSeparators=(0,wordCharacterClassifier/* getMapForWordSeparators */.u)(editor.getOption(115/* wordSeparators */)),model=editor.getModel(),selections=editor.getSelections(),result=selections.map((sel=>{const inPosition=new core_position/* Position */.L(sel.positionLineNumber,sel.positionColumn),outPosition=this._move(wordSeparators,model,inPosition,this._wordNavigationType);return this._moveTo(sel,outPosition,this._inSelectionMode)}));if(model.pushStackElement(),editor._getViewModel().setCursorStates("moveWordCommand",3/* Explicit */,result.map((r=>cursorCommon/* CursorState */.Vi.fromModelSelection(r)))),1===result.length){const pos=new core_position/* Position */.L(result[0].positionLineNumber,result[0].positionColumn);editor.revealPosition(pos,0/* Smooth */)}}_moveTo(from,to,inSelectionMode){return inSelectionMode?new core_selection/* Selection */.Y(from.selectionStartLineNumber,from.selectionStartColumn,to.lineNumber,to.column):new core_selection/* Selection */.Y(to.lineNumber,to.column,to.lineNumber,to.column)}}class WordLeftCommand extends MoveWordCommand{_move(wordSeparators,model,position,wordNavigationType){return cursorWordOperations/* WordOperations */.w.moveWordLeft(wordSeparators,model,position,wordNavigationType)}}class WordRightCommand extends MoveWordCommand{_move(wordSeparators,model,position,wordNavigationType){return cursorWordOperations/* WordOperations */.w.moveWordRight(wordSeparators,model,position,wordNavigationType)}}class CursorWordStartLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0/* WordStart */,id:"cursorWordStartLeft",precondition:void 0})}}class CursorWordEndLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2/* WordEnd */,id:"cursorWordEndLeft",precondition:void 0})}}class CursorWordLeft extends WordLeftCommand{constructor(){var _a;super({inSelectionMode:!1,wordNavigationType:1/* WordStartFast */,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.textInputFocus,null===(_a=contextkey/* ContextKeyExpr */.Ao.and(accessibility/* CONTEXT_ACCESSIBILITY_MODE_ENABLED */.U,contextkeys/* IsWindowsContext */.c))||void 0===_a?void 0:_a.negate()),primary:2063/* LeftArrow */,mac:{primary:527/* LeftArrow */},weight:100/* EditorContrib */}})}}class CursorWordStartLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0/* WordStart */,id:"cursorWordStartLeftSelect",precondition:void 0})}}class CursorWordEndLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2/* WordEnd */,id:"cursorWordEndLeftSelect",precondition:void 0})}}class CursorWordLeftSelect extends WordLeftCommand{constructor(){var _a;super({inSelectionMode:!0,wordNavigationType:1/* WordStartFast */,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.textInputFocus,null===(_a=contextkey/* ContextKeyExpr */.Ao.and(accessibility/* CONTEXT_ACCESSIBILITY_MODE_ENABLED */.U,contextkeys/* IsWindowsContext */.c))||void 0===_a?void 0:_a.negate()),primary:3087/* LeftArrow */,mac:{primary:1551/* LeftArrow */},weight:100/* EditorContrib */}})}}
// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects
class CursorWordAccessibilityLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:3/* WordAccessibility */,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(_,model,position,wordNavigationType){return super._move((0,wordCharacterClassifier/* getMapForWordSeparators */.u)(editorOptions/* EditorOptions */.BH.wordSeparators.defaultValue),model,position,wordNavigationType)}}class CursorWordAccessibilityLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:3/* WordAccessibility */,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(_,model,position,wordNavigationType){return super._move((0,wordCharacterClassifier/* getMapForWordSeparators */.u)(editorOptions/* EditorOptions */.BH.wordSeparators.defaultValue),model,position,wordNavigationType)}}class CursorWordStartRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0/* WordStart */,id:"cursorWordStartRight",precondition:void 0})}}class CursorWordEndRight extends WordRightCommand{constructor(){var _a;super({inSelectionMode:!1,wordNavigationType:2/* WordEnd */,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.textInputFocus,null===(_a=contextkey/* ContextKeyExpr */.Ao.and(accessibility/* CONTEXT_ACCESSIBILITY_MODE_ENABLED */.U,contextkeys/* IsWindowsContext */.c))||void 0===_a?void 0:_a.negate()),primary:2065/* RightArrow */,mac:{primary:529/* RightArrow */},weight:100/* EditorContrib */}})}}class CursorWordRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2/* WordEnd */,id:"cursorWordRight",precondition:void 0})}}class CursorWordStartRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0/* WordStart */,id:"cursorWordStartRightSelect",precondition:void 0})}}class CursorWordEndRightSelect extends WordRightCommand{constructor(){var _a;super({inSelectionMode:!0,wordNavigationType:2/* WordEnd */,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:contextkey/* ContextKeyExpr */.Ao.and(editorContextKeys/* EditorContextKeys */.u.textInputFocus,null===(_a=contextkey/* ContextKeyExpr */.Ao.and(accessibility/* CONTEXT_ACCESSIBILITY_MODE_ENABLED */.U,contextkeys/* IsWindowsContext */.c))||void 0===_a?void 0:_a.negate()),primary:3089/* RightArrow */,mac:{primary:1553/* RightArrow */},weight:100/* EditorContrib */}})}}class CursorWordRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2/* WordEnd */,id:"cursorWordRightSelect",precondition:void 0})}}class CursorWordAccessibilityRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:3/* WordAccessibility */,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(_,model,position,wordNavigationType){return super._move((0,wordCharacterClassifier/* getMapForWordSeparators */.u)(editorOptions/* EditorOptions */.BH.wordSeparators.defaultValue),model,position,wordNavigationType)}}class CursorWordAccessibilityRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:3/* WordAccessibility */,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(_,model,position,wordNavigationType){return super._move((0,wordCharacterClassifier/* getMapForWordSeparators */.u)(editorOptions/* EditorOptions */.BH.wordSeparators.defaultValue),model,position,wordNavigationType)}}class DeleteWordCommand extends editorExtensions/* EditorCommand */._l{constructor(opts){super(opts),this._whitespaceHeuristics=opts.whitespaceHeuristics,this._wordNavigationType=opts.wordNavigationType}runEditorCommand(accessor,editor,args){if(!editor.hasModel())return;const wordSeparators=(0,wordCharacterClassifier/* getMapForWordSeparators */.u)(editor.getOption(115/* wordSeparators */)),model=editor.getModel(),selections=editor.getSelections(),autoClosingBrackets=editor.getOption(5/* autoClosingBrackets */),autoClosingQuotes=editor.getOption(8/* autoClosingQuotes */),autoClosingPairs=languageConfigurationRegistry/* LanguageConfigurationRegistry */.zu.getAutoClosingPairs(model.getLanguageId()),viewModel=editor._getViewModel(),commands=selections.map((sel=>{const deleteRange=this._delete({wordSeparators:wordSeparators,model:model,selection:sel,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:editor.getOption(6/* autoClosingDelete */),autoClosingBrackets:autoClosingBrackets,autoClosingQuotes:autoClosingQuotes,autoClosingPairs:autoClosingPairs,autoClosedCharacters:viewModel.getCursorAutoClosedCharacters()},this._wordNavigationType);return new replaceCommand/* ReplaceCommand */.T4(deleteRange,"")}));editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}class DeleteWordLeftCommand extends DeleteWordCommand{_delete(ctx,wordNavigationType){let r=cursorWordOperations/* WordOperations */.w.deleteWordLeft(ctx,wordNavigationType);return r||new core_range/* Range */.e(1,1,1,1)}}class DeleteWordRightCommand extends DeleteWordCommand{_delete(ctx,wordNavigationType){let r=cursorWordOperations/* WordOperations */.w.deleteWordRight(ctx,wordNavigationType);if(r)return r;const lineCount=ctx.model.getLineCount(),maxColumn=ctx.model.getLineMaxColumn(lineCount);return new core_range/* Range */.e(lineCount,maxColumn,lineCount,maxColumn)}}class DeleteWordStartLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0/* WordStart */,id:"deleteWordStartLeft",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}class DeleteWordEndLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2/* WordEnd */,id:"deleteWordEndLeft",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}class DeleteWordLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0/* WordStart */,id:"deleteWordLeft",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:2049/* Backspace */,mac:{primary:513/* Backspace */},weight:100/* EditorContrib */}})}}class DeleteWordStartRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0/* WordStart */,id:"deleteWordStartRight",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}class DeleteWordEndRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2/* WordEnd */,id:"deleteWordEndRight",precondition:editorContextKeys/* EditorContextKeys */.u.writable})}}class DeleteWordRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2/* WordEnd */,id:"deleteWordRight",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:2068/* Delete */,mac:{primary:532/* Delete */},weight:100/* EditorContrib */}})}}class DeleteInsideWord extends editorExtensions/* EditorAction */.R6{constructor(){super({id:"deleteInsideWord",precondition:editorContextKeys/* EditorContextKeys */.u.writable,label:nls/* localize */.N("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(accessor,editor,args){if(!editor.hasModel())return;const wordSeparators=(0,wordCharacterClassifier/* getMapForWordSeparators */.u)(editor.getOption(115/* wordSeparators */)),model=editor.getModel(),selections=editor.getSelections(),commands=selections.map((sel=>{const deleteRange=cursorWordOperations/* WordOperations */.w.deleteInsideWord(wordSeparators,model,sel);return new replaceCommand/* ReplaceCommand */.T4(deleteRange,"")}));editor.pushUndoStop(),editor.executeCommands(this.id,commands),editor.pushUndoStop()}}(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordStartLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordEndLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordStartLeftSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordEndLeftSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordLeftSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordStartRight),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordEndRight),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordRight),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordStartRightSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordEndRightSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordRightSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordAccessibilityLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordAccessibilityLeftSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordAccessibilityRight),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordAccessibilityRightSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordStartLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordEndLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordStartRight),(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordEndRight),(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordRight),(0,editorExtensions/* registerEditorAction */.Qr)(DeleteInsideWord);// CONCATENATED MODULE: ./node_modules/monaco-editor/esm/vs/editor/contrib/wordPartOperations/wordPartOperations.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
class DeleteWordPartLeft extends DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0/* WordStart */,id:"deleteWordPartLeft",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:769/* Backspace */},weight:100/* EditorContrib */}})}_delete(ctx,wordNavigationType){let r=cursorWordOperations/* WordPartOperations */.L.deleteWordPartLeft(ctx);return r||new core_range/* Range */.e(1,1,1,1)}}class DeleteWordPartRight extends DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2/* WordEnd */,id:"deleteWordPartRight",precondition:editorContextKeys/* EditorContextKeys */.u.writable,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:788/* Delete */},weight:100/* EditorContrib */}})}_delete(ctx,wordNavigationType){let r=cursorWordOperations/* WordPartOperations */.L.deleteWordPartRight(ctx);if(r)return r;const lineCount=ctx.model.getLineCount(),maxColumn=ctx.model.getLineMaxColumn(lineCount);return new core_range/* Range */.e(lineCount,maxColumn,lineCount,maxColumn)}}class WordPartLeftCommand extends MoveWordCommand{_move(wordSeparators,model,position,wordNavigationType){return cursorWordOperations/* WordPartOperations */.L.moveWordPartLeft(wordSeparators,model,position)}}class CursorWordPartLeft extends WordPartLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0/* WordStart */,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:783/* LeftArrow */},weight:100/* EditorContrib */}})}}
// Register previous id for compatibility purposes
commands/* CommandsRegistry */.P.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class CursorWordPartLeftSelect extends WordPartLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0/* WordStart */,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:1807/* LeftArrow */},weight:100/* EditorContrib */}})}}
// Register previous id for compatibility purposes
commands/* CommandsRegistry */.P.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class WordPartRightCommand extends MoveWordCommand{_move(wordSeparators,model,position,wordNavigationType){return cursorWordOperations/* WordPartOperations */.L.moveWordPartRight(wordSeparators,model,position)}}class CursorWordPartRight extends WordPartRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2/* WordEnd */,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:785/* RightArrow */},weight:100/* EditorContrib */}})}}class CursorWordPartRightSelect extends WordPartRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2/* WordEnd */,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:editorContextKeys/* EditorContextKeys */.u.textInputFocus,primary:0,mac:{primary:1809/* RightArrow */},weight:100/* EditorContrib */}})}}(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordPartLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new DeleteWordPartRight),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordPartLeft),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordPartLeftSelect),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordPartRight),(0,editorExtensions/* registerEditorCommand */.fK)(new CursorWordPartRightSelect);
// EXTERNAL MODULE: ./node_modules/monaco-editor/esm/vs/editor/common/standaloneStrings.js
__webpack_require__(820913),__webpack_require__(829477),__webpack_require__(219646),__webpack_require__(397830),__webpack_require__(931954),__webpack_require__(775245),__webpack_require__(204992),__webpack_require__(559149),__webpack_require__(645048),__webpack_require__(15662);var editor_api=__webpack_require__(506586)}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/chunk-common-42a7b4cf.js.map