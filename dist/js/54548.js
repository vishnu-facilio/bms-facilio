"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[54548],{
/***/835051:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return view_layout_FolderCreation}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FolderCreation=(__webpack_require__(434284),__webpack_require__(903610)),validation=__webpack_require__(990260),FolderCreationvue_type_script_lang_js={extends:FolderCreation/* default */.Z,methods:{saveFolderInfo:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var validate,groupDetail,folderObj,moduleName,appId,_ref,id,name,moduleId,sequenceNumber,params,_yield$_this$addFolde,error,data,_params,_yield$_this$updateFo,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$refs["folderCreationForm"].validate();case 2:if(validate=_context.sent,validate){_context.next=5;break}return _context.abrupt("return");case 5:if(groupDetail=_this.groupDetail,folderObj=_this.folderObj,moduleName=_this.moduleName,appId=_this.appId,_ref=groupDetail||{},id=_ref.id,name=_ref.name,moduleId=_ref.moduleId,sequenceNumber=_ref.sequenceNumber,!(0,validation/* isEmpty */.xb)(groupDetail)){_context.next=18;break}return params={viewGroup:{displayName:folderObj.name,appId:appId,groupType:2},moduleName:moduleName},_this.saving=!0,_context.next=12,_this.addFolder(params);case 12:_yield$_this$addFolde=_context.sent,error=_yield$_this$addFolde.error,data=_yield$_this$addFolde.data,error?_this.$message.error(error.message||_this.$t("viewsmanager.folder.error_creation")):(_this.$message.success(_this.$t("viewsmanager.folder.success_creation")),_this.$emit("onSave",data.viewGroup),_this.closeDialog(),_this.canShowDialog=!1),_context.next=25;break;case 18:return _params={viewGroup:{displayName:folderObj.name,id:id,name:name,moduleId:moduleId,sequenceNumber:sequenceNumber,appId:appId}},_this.saving=!0,_context.next=22,_this.updateFolder(_params);case 22:_yield$_this$updateFo=_context.sent,_error=_yield$_this$updateFo.error,_error?_this.$message.error(_error.message||_this.$t("viewsmanager.folder.error_creation")):(_this.canShowDialog=!1,(0,validation/* isEmpty */.xb)(groupDetail)&&!(0,validation/* isEmpty */.xb)(appId)?_this.$emit("onSave",appId):_this.$emit("onSave"),_this.$message.success(_this.$t("viewsmanager.folder.edit_creation")),_this.closeDialog());case 25:_this.saving=!1;case 26:case"end":return _context.stop()}}),_callee)})))()}}},view_layout_FolderCreationvue_type_script_lang_js=FolderCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(view_layout_FolderCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,view_layout_FolderCreation=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/891839:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ViewCreationForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/timeline-view/view-layout/ViewCreationForm.vue?vue&type=template&id=d4b21b8e
var NamingDetails_render,NamingDetails_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("FormLayout",{staticClass:"form-layout",attrs:{isLoading:_vm.isLoading,subHeadings:_vm.subHeadings,breadcrumbHeadings:_vm.breadcrumb,title:_vm.title,saveAction:_vm.save,isSaving:_vm.isSaving},on:{onCancel:_vm.goBack},scopedSlots:_vm._u([{key:"spinner-section",fn:function(){return[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})]},proxy:!0},{key:"naming-section",fn:function(){return[_c("NamingDetails",{ref:"details-section",attrs:{viewDetail:_vm.viewDetails,moduleName:_vm.moduleName,saveAsNew:_vm.saveAsNew,appId:_vm.appId,isLoading:_vm.viewGrpLoading}})]},proxy:!0},{key:"criteria-section",fn:function(){return[_c("div",{staticClass:"fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("setup.scheduler.specify_criteria_for_records"))+" ")]),_c("el-form",[_c("el-form-item",{staticClass:"mB0"},[_c("CriteriaBuilder",{ref:"criteria-builder",attrs:{moduleName:_vm.moduleName,isOneLevelEnabled:!0},model:{value:_vm.criteria,callback:function($$v){_vm.criteria=$$v},expression:"criteria"}})],1)],1)]},proxy:!0},{key:"filter-section",fn:function(){return[_c("div",{staticClass:"view-tags"},[_c("div",{staticClass:"wo-save-subH text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.filters"))+" ")]),_vm.$validation.isEmpty(_vm.filters)?_vm._e():[_c("div",{staticClass:"fc-grey-text-input-label mB10"},[_vm._v(" "+_vm._s(_vm.$t("filters.views.existing_filters"))+" ")]),_c("FTags",{key:"ftags-existing-"+_vm.moduleName,staticClass:"mB10  timeline-ftag-border-less ",attrs:{showOnlyExisting:!0,hideActionBtn:!0,hideClose:!0}})],_vm.$validation.isEmpty(_vm.appliedFilters)?_vm._e():[_c("div",{staticClass:"fc-grey-text-input-label mB10"},[_vm._v(" "+_vm._s(_vm.$t("filters.views.new_filters"))+" ")]),_c("FTags",{key:"ftags-new-"+_vm.moduleName,staticClass:"timeline-ftag-border-less ",attrs:{moduleName:_vm.moduleName,hideActionBtn:!0,hideClose:!0}})]],2)]},proxy:!0},{key:"grouping-section",fn:function(){return[_c("GroupingDetails",{ref:"grouping-section",staticClass:"mB10",attrs:{viewDetails:_vm.viewDetails,isNew:_vm.isNew,moduleId:_vm.moduleId,saveAsNew:_vm.saveAsNew,moduleFields:_vm.moduleFields}})]},proxy:!0},{key:"calender-section",fn:function(){return[_c("CalenderDetails",{ref:"calender-section",staticClass:"mB10",attrs:{viewDetails:_vm.viewDetails,isNew:_vm.isNew,saveAsNew:_vm.saveAsNew,moduleFields:_vm.moduleFields,weekendsList:_vm.weekendsList,updateWeekEnd:_vm.updateWeekEnd}})]},proxy:!0},{key:"events-section",fn:function(){return[_c("ActionEventsConfig",{ref:"events-section",staticClass:"mB10",attrs:{viewDetails:_vm.viewDetails,isNew:_vm.isNew,saveAsNew:_vm.saveAsNew}})]},proxy:!0},{key:"popup-section",fn:function(){return[_c("PopupConfig",{ref:"popup-section",staticClass:"mB10",attrs:{viewDetails:_vm.viewDetails,isNew:_vm.isNew,saveAsNew:_vm.saveAsNew,moduleFields:_vm.moduleFields}})]},proxy:!0},{key:"color-section",fn:function(){return[_c("ColorCustomization",{ref:"color-section",attrs:{viewDetails:_vm.viewDetails,isNew:_vm.isNew,moduleName:_vm.moduleName,saveAsNew:_vm.saveAsNew,moduleFields:_vm.moduleFields,moduleId:_vm.moduleId}})]},proxy:!0},{key:"share-section",fn:function(){return[_c("ShareWith",{ref:"sharing-section",attrs:{isNewView:_vm.isNew,saveAsNew:_vm.saveAsNew,viewDetail:_vm.viewDetails,appId:_vm.appId}})]},proxy:!0}])},[_c("div",{staticClass:"mT50"})])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(990260)),api=__webpack_require__(32284),vuex_esm=__webpack_require__(420629),router=__webpack_require__(329435),setup=__webpack_require__(572552),dist=__webpack_require__(191853),Naming=__webpack_require__(899158),FolderCreation=__webpack_require__(835051),NamingDetailsvue_type_script_lang_js={extends:Naming/* default */.Z,components:{FolderCreation:FolderCreation/* default */.Z}},view_creation_NamingDetailsvue_type_script_lang_js=NamingDetailsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(view_creation_NamingDetailsvue_type_script_lang_js,NamingDetails_render,NamingDetails_staticRenderFns,!1,null,null,null)
/* harmony default export */,NamingDetails=component.exports,GroupingDetails=__webpack_require__(547065),CalenderDetails=__webpack_require__(148516),ActionEventsConfig=__webpack_require__(913233),PopupConfig=__webpack_require__(334858),ColorCustomization=__webpack_require__(302297),ShareWith=__webpack_require__(622306),ViewCreationFormvue_type_script_lang_js={name:"TimelineViewForm",props:["moduleName"],components:{NamingDetails:NamingDetails,GroupingDetails:GroupingDetails/* default */.Z,CalenderDetails:CalenderDetails/* default */.Z,ActionEventsConfig:ActionEventsConfig/* default */.Z,PopupConfig:PopupConfig/* default */.Z,ColorCustomization:ColorCustomization/* default */.Z,FormLayout:setup/* FormLayout */.l,CriteriaBuilder:dist/* CriteriaBuilder */.IP,FTags:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(75676),__webpack_require__.e(45544)]).then(__webpack_require__.bind(__webpack_require__,30955))},ShareWith:ShareWith/* default */.Z},data:function(){return{moduleId:null,isLoading:!0,moduleFields:[],weekendsList:[],criteria:null,filters:null,isSaving:!1,viewDetails:null,viewGrpLoading:!1,breadcrumb:[],subHeadings:[{displayName:"Naming",id:"naming"},{displayName:"Grouping",id:"grouping"},{displayName:"Calender",id:"calender"},{displayName:this.$t("common.header.events"),id:"events"},{displayName:"Popup",id:"popup"},{displayName:"Color",id:"color"},{displayName:this.$t("viewsmanager.sharing_permission.heading_name"),id:"share"}]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.generatePath(),_this.loadGroupViewsList(),_context.next=4,_this.fetchCurrentView();case 4:return _context.next=6,_this.fetchMetaFields();case 6:return _context.next=8,_this.loadWeekendList();case 8:_this.deserializeCriteria(),_this.isLoading=!1;case 10:case"end":return _context.stop()}}),_callee)})))()},computed:{viewname:function(){var _this$$attrs,_this$$route;return(null===(_this$$attrs=this.$attrs)||void 0===_this$$attrs?void 0:_this$$attrs.viewname)||(null===(_this$$route=this.$route)||void 0===_this$$route?void 0:_this$$route.query.viewname)||null},viewCloneAppId:function(){return this.$getProperty(this.$route,"query.viewCloneAppId")||null},isViewClone:function(){var viewCloneAppId=this.viewCloneAppId,viewname=this.viewname;return viewCloneAppId&&viewname},appliedFilters:function(){var query=this.$route.query,_ref=query||{},search=_ref.search;return(0,validation/* isEmpty */.xb)(search)?null:JSON.parse(search)},isNew:function(){var viewname=this.viewname,_this$saveAsNew=this.saveAsNew,saveAsNew=void 0!==_this$saveAsNew&&_this$saveAsNew;return(0,validation/* isEmpty */.xb)(viewname)||saveAsNew},appId:function(){var viewCloneAppId=this.viewCloneAppId,currentAppId=this.currentAppId;return viewCloneAppId||currentAppId},currentAppId:function(){var currentAppId=this.$getProperty(this.$route,"query.appId",null);return currentAppId},saveAsNew:function(){var query=this.$route.query,_ref2=query||{},saveAsNew=_ref2.saveAsNew;return saveAsNew},title:function(){return this.isNew?this.$t("setup.scheduler.new_timeline_view"):this.isViewClone?this.$t("viewsmanager.list.clone_view"):this.$t("setup.scheduler.edit_timeline_view")}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({saveNewView:"view/saveNewView",editView:"view/editView"})),{},{loadGroupViewsList:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,appId,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return moduleName=_this2.moduleName,appId=_this2.appId,data={moduleName:moduleName,appId:appId,restrictPermissions:!0,groupType:2,viewType:2},_this2.viewGrpLoading=!0,_context2.next=5,_this2.$store.dispatch("view/loadGroupViews",data);case 5:_this2.viewGrpLoading=!1;case 6:case"end":return _context2.stop()}}),_callee2)})))()},fetchCurrentView:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var viewname,moduleName,appId,isViewClone,url,params,_yield$API$get,data,error,_ref3,viewDetail;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return viewname=_this3.viewname,moduleName=_this3.moduleName,appId=_this3.currentAppId,isViewClone=_this3.isViewClone,url="/v2/views/".concat(viewname),params={moduleName:moduleName,appId:appId},_context3.next=5,api/* API */.bl.get(url,params);case 5:_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this3.$message.error(error.message||"Error Occured"):(_ref3=data||{},viewDetail=_ref3.viewDetail,_this3.viewDetails=viewDetail,isViewClone&&!(0,validation/* isEmpty */.xb)(viewDetail)&&(_this3.viewDetails=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this3.viewDetails),{},{groupId:null,name:null,id:-1})));case 9:case"end":return _context3.stop()}}),_callee3)})))()},fetchMetaFields:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleName,_yield$API$get2,data,error,fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(moduleName=_this4.moduleName,(0,validation/* isEmpty */.xb)(moduleName)){_context4.next=8;break}return _context4.next=4,api/* API */.bl.get("/module/metafields",{moduleName:moduleName});case 4:_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?_this4.$message.error(error.message||"Error Occured"):(fields=_this4.$getProperty(data,"meta.fields",[])||[],_this4.moduleId=_this4.$getProperty(data,"meta.module.moduleId",null),_this4.moduleFields=fields.filter((function(field){return"TASKS"!==field.displayTypeEnum}))||[]);case 8:case"end":return _context4.stop()}}),_callee4)})))()},loadWeekendList:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _yield$API$get3,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,api/* API */.bl.get("v2/weekends/list");case 2:_yield$API$get3=_context5.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,error?_this5.$message.error(error.message||_this5.$t("setup.scheduler.failed_to_fetch_weekends_list")):_this5.weekendsList=(null===data||void 0===data?void 0:data.weekends)||[];case 6:case"end":return _context5.stop()}}),_callee5)})))()},updateWeekEnd:function(weekendObj,canDelete){var _ref4=weekendObj||{},id=_ref4.id,name=_ref4.name,value=_ref4.value,index=this.weekendsList.findIndex((function(w){return w.id===id}));(0,validation/* isEmpty */.xb)(index)?this.weekendsList.push({id:id,name:name,value:value}):canDelete?this.weekendsList.splice(index,1):this.weekendsList.splice(index,1,weekendObj)},validate:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var _this6$$refs$criteria,detailsValidate,groupValidate,calenderValidate,criteriaValidate;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,_this6.$refs["details-section"].validate();case 2:return detailsValidate=_context6.sent,_context6.next=5,_this6.$refs["grouping-section"].validate();case 5:return groupValidate=_context6.sent,_context6.next=8,_this6.$refs["calender-section"].validate();case 8:return calenderValidate=_context6.sent,criteriaValidate=!!(0,validation/* isEmpty */.xb)(_this6.$refs["criteria-builder"])||(null===(_this6$$refs$criteria=_this6.$refs["criteria-builder"])||void 0===_this6$$refs$criteria?void 0:_this6$$refs$criteria.validate()),_context6.abrupt("return",detailsValidate&&groupValidate&&calenderValidate&&criteriaValidate);case 11:case"end":return _context6.stop()}}),_callee6)})))()},getViewManagerRoute:function(){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.TIMELINE_VIEW_MANAGER,{moduleName:moduleName}),manageViewName=_findRouteForTab.name;return(0,validation/* isEmpty */.xb)(manageViewName)?{}:{name:manageViewName}}return{name:"resource-scheduler-viewmanager"}},generatePath:function(){var moduleName=this.moduleName,saveAsNew=this.saveAsNew,resourceSchedulerPath={};if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.TIMELINE_LIST,{moduleName:moduleName}),name=_findRouteForTab2.name;resourceSchedulerPath=(0,validation/* isEmpty */.xb)(name)?{}:{name:name}}else resourceSchedulerPath={path:"/app/wo/timeline"};this.breadcrumb=[{name:"Resource Scheduler",route:resourceSchedulerPath},{name:this.title}];var manageViewBC={name:"Manage views",route:this.getViewManagerRoute()},criteriaHeading={displayName:"Criteria",id:"criteria"},filterHeading={displayName:"Filter",id:"filter"};saveAsNew?this.subHeadings.splice(1,0,filterHeading):(this.subHeadings.splice(1,0,criteriaHeading),this.breadcrumb.splice(1,0,manageViewBC))},save:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var isValid,isNew,saveAsNew,moduleName,criteria,appId,isViewClone,filterObj,sharingData,viewSharing,isLocked,params,_yield$_this7$saveNew,viewname,_ref5,routeName,_ref6,message,errorMsg;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,_this7.validate();case 2:if(isValid=_context7.sent,isValid){_context7.next=5;break}return _context7.abrupt("return");case 5:if(_this7.isSaving=!0,isNew=_this7.isNew,saveAsNew=_this7.saveAsNew,moduleName=_this7.moduleName,criteria=_this7.criteria,appId=_this7.appId,isViewClone=_this7.isViewClone,filterObj={},_this7.saveAsNew&&(filterObj={filtersJson:JSON.stringify(_this7.appliedFilters||{})}),sharingData=_this7.$refs["sharing-section"].serializeData(),viewSharing=sharingData.viewSharing,isLocked=sharingData.isLocked,params={moduleName:moduleName,view:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this7.$refs["details-section"].serializeData()),_this7.$refs["grouping-section"].serialize()),_this7.$refs["calender-section"].serialize()),_this7.$refs["events-section"].serialize()),_this7.$refs["popup-section"].serialize()),_this7.$refs["color-section"].serialize()),filterObj),_this7.saveAsNew?{}:{criteria:criteria}),{},{isLocked:isLocked,viewSharing:viewSharing,type:2,appId:appId})},!isNew&&!isViewClone){_context7.next=32;break}return _context7.prev=13,_context7.next=16,_this7.saveNewView(params);case 16:_yield$_this7$saveNew=_context7.sent,viewname=_yield$_this7$saveNew.name,_this7.$message.success(_this7.$t("common.wo_report.view_created_successfully")),saveAsNew?(0,router/* isWebTabsEnabled */.tj)()?(_ref5=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.TIMELINE_LIST,{moduleName:moduleName})||{},routeName=_ref5.name,routeName&&_this7.$router.push({name:routeName,params:{viewname:viewname}})):_this7.$router.push({path:"/app/wo/timeline/".concat(viewname)}):_this7.goBack(),_context7.next=27;break;case 22:_context7.prev=22,_context7.t0=_context7["catch"](13),_ref6=_context7.t0||{},message=_ref6.message,errorMsg="Name already taken"===message?_this7.$t("setup.scheduler.name_already_taken"):_this7.$t("common.wo_report.view_creation_failed"),_this7.$message.error(errorMsg);case 27:return _context7.prev=27,_this7.isSaving=!1,_context7.finish(27);case 30:_context7.next=45;break;case 32:return _context7.prev=32,_context7.next=35,_this7.editView(params);case 35:_this7.$message.success(_this7.$t("filters.views.edit_success")),_this7.goBack(),_context7.next=42;break;case 39:_context7.prev=39,_context7.t1=_context7["catch"](32),_this7.$message.error(_this7.$t("common.wo_report.view_edited_failed"));case 42:return _context7.prev=42,_this7.isSaving=!1,_context7.finish(42);case 45:case"end":return _context7.stop()}}),_callee7,null,[[13,22,27,30],[32,39,42,45]])})))()},goBack:function(){var appId=this.appId,moduleName=this.moduleName,route=this.getViewManagerRoute();route&&this.$router.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},route),{},{params:{moduleName:moduleName},query:{appId:appId}}))},deserializeCriteria:function(){var viewDetails=this.viewDetails;if(!this.isNew||this.saveAsNew){var _ref7=viewDetails||{},criteria=_ref7.criteria,filters=_ref7.filters;this.criteria=criteria,this.filters=filters}}})},view_layout_ViewCreationFormvue_type_script_lang_js=ViewCreationFormvue_type_script_lang_js,ViewCreationForm_component=(0,componentNormalizer/* default */.Z)(view_layout_ViewCreationFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewCreationForm=ViewCreationForm_component.exports},
/***/903610:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FolderCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/FolderCreation.vue?vue&type=template&id=79d49609
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container views-manager-container-v2",attrs:{title:_vm.title,visible:!0,width:"35%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height200"},[_c("el-form",{ref:"folderCreationForm",attrs:{rules:_vm.rules,model:_vm.folderObj}},[_c("el-form-item",{attrs:{label:"Folder Name",prop:"name",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common.dashboard.enter_the_folder_name")},model:{value:_vm.folderObj.name,callback:function($$v){_vm.$set(_vm.folderObj,"name",$$v)},expression:"folderObj.name"}})],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.saveFolderInfo}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(434284),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),FolderCreationvue_type_script_lang_js={props:["groupDetail","moduleName","appId"],data:function(){return{folderObj:{name:null},saving:!1,rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"}}}},created:function(){this.init()},computed:{title:function(){var groupDetail=this.groupDetail;return(0,validation/* isEmpty */.xb)(groupDetail)?this.$t("viewsmanager.folder.add_new_folder"):this.$t("viewsmanager.folder.edit_folder")}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({addFolder:"view/addFolder",updateFolder:"view/updateFolder"})),{},{init:function(){var groupDetail=this.groupDetail;if(!(0,validation/* isEmpty */.xb)(groupDetail)){var displayName=groupDetail.displayName;this.folderObj.name=displayName}},closeDialog:function(){this.$emit("onClose")},saveFolderInfo:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var validate,groupDetail,folderObj,moduleName,appId,_ref,id,name,moduleId,sequenceNumber,params,_yield$_this$addFolde,error,data,_params,_yield$_this$updateFo,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$refs["folderCreationForm"].validate();case 2:if(validate=_context.sent,validate){_context.next=5;break}return _context.abrupt("return");case 5:if(groupDetail=_this.groupDetail,folderObj=_this.folderObj,moduleName=_this.moduleName,appId=_this.appId,_ref=groupDetail||{},id=_ref.id,name=_ref.name,moduleId=_ref.moduleId,sequenceNumber=_ref.sequenceNumber,!(0,validation/* isEmpty */.xb)(groupDetail)){_context.next=19;break}return params={viewGroup:{displayName:folderObj.name,appId:appId},moduleName:moduleName},_this.saving=!0,_context.next=12,_this.addFolder(params);case 12:_yield$_this$addFolde=_context.sent,error=_yield$_this$addFolde.error,data=_yield$_this$addFolde.data,error?_this.$message.error(error.message||_this.$t("viewsmanager.folder.error_creation")):(_this.$message.success(_this.$t("viewsmanager.folder.success_creation")),_this.$emit("onSave",data.viewGroup),_this.closeDialog()),_this.saving=!1,_context.next=28;break;case 19:return _params={viewGroup:{displayName:folderObj.name,id:id,name:name,moduleId:moduleId,sequenceNumber:sequenceNumber,appId:appId}},_this.saving=!0,_context.next=23,_this.updateFolder(_params);case 23:_yield$_this$updateFo=_context.sent,_error=_yield$_this$updateFo.error,_error?_this.$message.error(_error.message||_this.$t("viewsmanager.folder.error_creation")):((0,validation/* isEmpty */.xb)(groupDetail)&&!(0,validation/* isEmpty */.xb)(appId)?_this.$emit("onSave",appId):_this.$emit("onSave"),_this.$message.success(_this.$t("viewsmanager.folder.edit_creation"))),_this.closeDialog(),_this.saving=!1;case 28:case"end":return _context.stop()}}),_callee)})))()}})},viewmanager_FolderCreationvue_type_script_lang_js=FolderCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(viewmanager_FolderCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FolderCreation=component.exports},
/***/899158:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Naming}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/components/Naming.vue?vue&type=template&id=282ab9a8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-form",{ref:"naming-form",attrs:{rules:_vm.rules,model:_vm.viewNamingSection}},[_c("el-form-item",{attrs:{label:_vm.$t("viewsmanager.naming.display_name"),prop:"displayName"}},[_c("TextInput",{attrs:{placeholder:_vm.placeholder},model:{value:_vm.viewNamingSection.displayName,callback:function($$v){_vm.$set(_vm.viewNamingSection,"displayName",$$v)},expression:"viewNamingSection.displayName"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("viewsmanager.naming.folder_name"),prop:"groupId"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select Folder",filterable:"",loading:_vm.isLoading,"popper-class":"view-creation-folder-selection-popper view-creation-form-v2"},scopedSlots:_vm._u([{key:"empty",fn:function(){return[_c("el-button",{staticClass:"pL20 width100 text-left addFolder-btn",on:{click:function($event){_vm.showFolderCreationDialog=!0}}},[_vm._v(" + "+_vm._s(_vm.$t("viewsmanager.list.add_folder"))+" ")])]},proxy:!0}]),model:{value:_vm.viewNamingSection.groupId,callback:function($$v){_vm.$set(_vm.viewNamingSection,"groupId",$$v)},expression:"viewNamingSection.groupId"}},[_vm._l(_vm.groupViews,(function(group,index){return _c("el-option",{key:index,attrs:{label:group.displayName||group.name,value:group.id}})})),_c("div",{staticClass:"search-select-filter-btn"},[_c("el-button",{staticClass:"pL20 width100 text-left addFolder-btn",on:{click:function($event){_vm.showFolderCreationDialog=!0}}},[_vm._v(" + "+_vm._s(_vm.$t("viewsmanager.list.add_folder"))+" ")])],1)],2)],1)],1),_vm.showFolderCreationDialog?_c("FolderCreation",{attrs:{moduleName:_vm.moduleName,appId:_vm.appId},on:{onClose:function($event){_vm.showFolderCreationDialog=!1},onSave:_vm.onUpdateGroupId}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),FolderCreation=(__webpack_require__(821057),__webpack_require__(434284),__webpack_require__(903610)),vuex_esm=__webpack_require__(420629),ui_forms=__webpack_require__(141323),validation=__webpack_require__(990260),Namingvue_type_script_lang_js={props:["viewDetail","appId","saveAsNew","moduleName","isLoading"],components:{FolderCreation:FolderCreation/* default */.Z,TextInput:ui_forms/* TextInput */.oi},data:function(){return{placeholder:"Enter View Name",showFolderCreationDialog:!1,viewNamingSection:{displayName:null,groupId:null},rules:{displayName:{validator:function(rule,value,callback){(0,validation/* isEmpty */.xb)(value)?callback(new Error(this.$t("common._common.please_enter_a_name"))):callback()}.bind(this),required:!0,trigger:"blur"},groupId:{validator:function(rule,value,callback){(0,validation/* isEmpty */.xb)(value)?callback(new Error("Please select view group folder")):callback()}.bind(this),required:!0,trigger:"change"}}}},created:function(){this.initData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("view",{groupViews:function(state){return state.groupViews}})),{},{isNewView:function(){var viewDetail=this.viewDetail,saveAsNew=this.saveAsNew;return(0,validation/* isEmpty */.xb)(viewDetail)||!!saveAsNew}}),methods:{initData:function(){var viewDetail=this.viewDetail,isNewView=this.isNewView;if(!(0,validation/* isEmpty */.xb)(viewDetail)){var _ref=viewDetail||{},displayName=_ref.displayName,groupId=_ref.groupId,id=_ref.id,name=_ref.name;isNewView||(this.viewNamingSection={displayName:displayName,id:id,name:name}),this.$set(this.viewNamingSection,"groupId",groupId||null)}},onUpdateGroupId:function(val){this.viewNamingSection.groupId=val.id},validate:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,_this.$refs["naming-form"].validate();case 3:return _context.abrupt("return",_context.sent);case 6:return _context.prev=6,_context.t0=_context["catch"](0),_context.abrupt("return",!1);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},serializeData:function(){return this.viewNamingSection}}},components_Namingvue_type_script_lang_js=Namingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Namingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Naming=component.exports},
/***/622306:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ShareWith}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/components/ShareWith.vue?vue&type=template&id=506aa156
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"view-creation-form-share-with-container"},[_c("el-radio-group",{staticClass:"sharing-radio-icon",model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},_vm._l(_vm.shareWithTypes,(function(displayLabel,value){return _c("el-radio",{key:value,staticClass:"fc-radio-btn",attrs:{label:parseInt(value)},on:{change:_vm.onChangeSharingTo}},[_vm._v(" "+_vm._s(displayLabel)+" ")])})),1),_vm.isSpecific?_c("div",[_c("div",{staticClass:"specific_user-header"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.select_user"))+" ")]),_c("div",{staticClass:"specific_user-descrp"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.add_columns_desc"))+" ")]),_c("div",{staticClass:"user-selection-container"},[_c("div",{staticClass:"user-selection-container-block avaiable-user-container"},[_c("div",{staticClass:"header-section"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.available_user"))+" ")]),_c("div",{staticClass:"user-selection-filter-container"},[_c("el-select",{staticClass:"width100 border-right2",on:{change:function($event){_vm.searchText=null}},model:{value:_vm.shareWithSelected,callback:function($$v){_vm.shareWithSelected=$$v},expression:"shareWithSelected"}},_vm._l(_vm.specificUser,(function(option,index){return _c("el-option",{key:index,attrs:{label:option,value:parseInt(index)}})})),1),_c("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"Search",clearable:""},on:{input:_vm.searchContent,clear:_vm.searchContent},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1),_c("div",{staticClass:"list-container"},[_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(6,(function(i){return _c("div",{key:"available_list-"+i,staticClass:"lines loading-shimmer"})})),0):_vm._l(_vm.filteredList,(function(element,index){return _c("div",{key:"filteredList-"+index,staticClass:"block-card"},[_c("span",{staticClass:"block-text"},[_vm._v(_vm._s(element.name))]),_c("i",{staticClass:"el-icon-plus addition-plus-icon",on:{click:function($event){return _vm.addcolumn(element)}}})])}))],2)]),_c("div",{staticClass:"user-selection-container-block selected-user-container"},[_c("div",{staticClass:"header-section"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.selected_user"))+" ")]),_c("div",{staticClass:"list-container"},[_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(3,(function(i){return _c("div",{key:"selected_list-"+i,staticClass:"lines loading-shimmer"})})),0):_vm.$validation.isEmpty(_vm.selectedUsers)?_c("div",{staticClass:"empty-state"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.add_here"))+" ")]):_c("draggable",{staticClass:"dragArea",attrs:{group:"people",handle:".rearrange-icon"},model:{value:_vm.selectedUsers,callback:function($$v){_vm.selectedUsers=$$v},expression:"selectedUsers"}},_vm._l(_vm.selectedUsers,(function(element,index){return _c("div",{key:"selected-user-"+index,staticClass:"block-card"},[_c("div",{staticClass:"flex-middle"},[_c("el-tooltip",{staticStyle:{height:"16px"},attrs:{effect:"dark",content:_vm.$t("viewsmanager.sharing_permission.reorder"),placement:"top"}},[_c("inline-svg",{staticClass:"rearrange-icon cursor-move",attrs:{src:"svgs/ic-drag-handle",iconClass:"icon icon-sm-md"}})],1),_c("div",{staticClass:"block-text2 mL5"},[_vm._v(_vm._s(element.name))])],1),_c("i",{staticClass:"el-icon-close addition-plus-icon",on:{click:function($event){return _vm.removeColumn(index)}}})])})),0)],1)])])]):_vm._e(),_vm.isOnlyMe?_vm._e():_c("div",{staticClass:"mT40"},[_c("el-checkbox",{model:{value:_vm.hasEditPermission,callback:function($$v){_vm.hasEditPermission=$$v},expression:"hasEditPermission"}},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.permission_desc"))+" ")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),slicedToArray=__webpack_require__(554621),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),picklist=__webpack_require__(961358),shareWithTypeValue={ONLY_ME:1,EVERYONE:2,SELECT_USER:3},specificUserValue={USER:1,ROLE:2,GROUP:3},ShareWithvue_type_script_lang_js={props:["viewDetail","saveAsNew","isNewView","appId"],components:{draggable:vuedraggable_umd_default()},data:function(){return{shareWithTypeValue:shareWithTypeValue,specificUserValue:specificUserValue,viewSharingDetails:{},hasEditPermission:!1,sharingDetails:null,isLoading:!1,shareTo:shareWithTypeValue.ONLY_ME,roleList:[],selectedUsers:[],userList:[],searchText:null,shareWithSelected:specificUserValue.USER,shareWithTypes:{1:"Only Me",2:"Everyone",3:"Select User"},specificUser:{1:"User",2:"Role",3:"Team"}}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.deserializedSharingDetails();case 1:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groupList:function(state){return state.groups}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{currentUserId:function(){var _ref=this.getCurrentUser()||{},id=_ref.id;return id||null},isSpecific:function(){var shareTo=this.shareTo;return shareTo===shareWithTypeValue.SELECT_USER},isOnlyMe:function(){var shareTo=this.shareTo;return shareTo===this.shareWithTypeValue.ONLY_ME},filteredList:function(){var _this2=this,shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP,currentList=shareWithSelected===USER?this.userList:shareWithSelected===ROLE?this.roleList:shareWithSelected===GROUP?this.groupList:[],currentUserList=currentList.filter((function(filt){return!_this2.selectedUsers.find((function(element){return element.name===filt.name}))}));return this.searchText&&shareWithSelected!=USER?currentUserList.filter((function(user){var _ref2=user||{},name=_ref2.name;return name.toLowerCase().includes(_this2.searchText.toLowerCase())})):currentUserList}}),methods:{onChangeSharingTo:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this3.shareTo===shareWithTypeValue.ONLY_ME&&(_this3.hasEditPermission=!1),_this3.shareTo===shareWithTypeValue.SELECT_USER&&_this3.getUserManagementList(),_this3.shareWithSelected=specificUserValue.USER,_this3.selectedUsers=[];case 4:case"end":return _context2.stop()}}),_callee2)})))()},deserializedSharingDetails:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var sharingDetails,viewDetail,isNewView,USER,ROLE,GROUP,_ref3,_ref3$isLocked,isLocked,sharedList,_sharedList,sharedData,_userId,type,userId,roleId,groupId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(sharingDetails=_this4.sharingDetails,viewDetail=_this4.viewDetail,isNewView=_this4.isNewView,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP,_ref3=viewDetail||{},_ref3$isLocked=_ref3.isLocked,isLocked=void 0!==_ref3$isLocked&&_ref3$isLocked,(0,validation/* isEmpty */.xb)(null===viewDetail||void 0===viewDetail?void 0:viewDetail.viewSharing)||(sharingDetails=viewDetail.viewSharing),_this4.hasEditPermission=isLocked,!isNewView&&!_this4.saveAsNew){_context3.next=9;break}_this4.shareTo=shareWithTypeValue.ONLY_ME,_context3.next=23;break;case 9:if((0,validation/* isEmpty */.xb)(sharingDetails)){_context3.next=22;break}return sharedList=sharingDetails.filter((function(viewSharingContext){return"APP"!=viewSharingContext.typeEnum})),(0,validation/* isEmpty */.xb)(sharedList)?_this4.shareTo=shareWithTypeValue.EVERYONE:(_this4.shareTo=shareWithTypeValue.SELECT_USER,1===sharedList.length&&(_sharedList=(0,slicedToArray/* default */.Z)(sharedList,1),sharedData=_sharedList[0],_userId=sharedData.userId,type=sharedData.type,1===type&&_this4.currentUserId===_userId&&(_this4.shareTo=shareWithTypeValue.ONLY_ME))),userId=sharingDetails.filter((function(user){return user.type===USER})).map((function(user){return user.userId})),roleId=sharingDetails.filter((function(user){return user.type===ROLE})).map((function(user){return user.roleId})),groupId=sharingDetails.filter((function(user){return user.type===GROUP})).map((function(user){return user.groupId})),_context3.next=17,_this4.getUserManagementList(userId);case 17:_this4.loadUserIds(userId),_this4.loadRoleIds(roleId),_this4.loadGroupIds(groupId),_context3.next=23;break;case 22:_this4.shareTo=shareWithTypeValue.EVERYONE;case 23:case"end":return _context3.stop()}}),_callee3)})))()},getUserManagementList:function(){var _arguments=arguments,_this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var userIds;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return userIds=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:null,_this5.isLoading=!0,_context4.next=4,_this5.loadUsersList(userIds);case 4:return _context4.next=6,_this5.loadRoleList();case 6:return _context4.next=8,_this5.$store.dispatch("loadGroups");case 8:_this5.isLoading=!1;case 9:case"end":return _context4.stop()}}),_callee4)})))()},loadUsersList:function(){var _arguments2=arguments,_this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var userIds,appId,searchText,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return userIds=_arguments2.length>0&&void 0!==_arguments2[0]?_arguments2[0]:null,appId=_this6.appId,searchText=_this6.searchText,_context5.next=4,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"users",filters:{applicationId:{value:[appId]}}},searchText:searchText,defaultIds:userIds});case 4:_yield$getFieldOption=_context5.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this6.$message.error(error.message||"Error Occured"):_this6.userList=options.map((function(user){return{name:user.label,id:user.value}}));case 8:case"end":return _context5.stop()}}),_callee5)})))()},loadRoleList:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var appId,params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(appId=_this7.appId,!(0,validation/* isEmpty */.xb)(appId)){_context6.next=3;break}return _context6.abrupt("return");case 3:return params={search:_this7.searchText,appId:appId},_context6.next=6,api/* API */.bl.get("/setup/roles",params);case 6:_yield$API$get=_context6.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this7.$message.error(error.message||"Error Occured"):_this7.roleList=data.roles||[];case 10:case"end":return _context6.stop()}}),_callee6)})))()},searchContent:debounce_default()((function(){var shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER;shareWithSelected===USER&&this.loadUsersList()}),500),loadUserIds:function(usersId){var userList=this.userList,userDetails=(userList||[]).filter((function(user){return(usersId||[]).includes(user.id)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{userId:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(userDetails))},loadRoleIds:function(roleId){var roleList=this.roleList,roleDetails=(roleList||[]).filter((function(user){return(roleId||[]).includes(user.roleId)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{roleIdKey:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(roleDetails))},loadGroupIds:function(groupId){var groupList=this.groupList,groupDetails=(groupList||[]).filter((function(user){return(groupId||[]).includes(user.groupId)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{groupId:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(groupDetails))},addcolumn:function(element){var shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP;shareWithSelected===USER?this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{userId:element.id})):shareWithSelected===ROLE?this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{roleIdKey:element.id})):shareWithSelected===GROUP&&this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{groupId:element.id}))},removeColumn:function(index){this.selectedUsers.splice(index,1)},serializeData:function(){var currentUserId=this.currentUserId,selectedUsers=this.selectedUsers,sharedUserIds=selectedUsers.filter((function(user){return user.userId})).map((function(user){return user.userId})),sharedRoleIds=selectedUsers.filter((function(user){return user.roleIdKey})).map((function(user){return user.roleIdKey})),sharedGroupIds=selectedUsers.filter((function(user){return user.groupId})).map((function(user){return user.groupId})),sharedUserDetails=[],sharedRoleDetails=[],sharedGroupDetails=[];this.shareTo===shareWithTypeValue.ONLY_ME?sharedUserDetails.push({type:1,userId:currentUserId}):this.shareTo===shareWithTypeValue.SELECT_USER&&((0,validation/* isEmpty */.xb)(sharedUserIds)||(sharedUserDetails=sharedUserIds.map((function(userId){return userId!==currentUserId?{type:1,userId:userId}:{type:1,userId:currentUserId}}))),(0,validation/* isEmpty */.xb)(sharedRoleIds)||(sharedRoleDetails=sharedRoleIds.map((function(roleId){return{type:2,roleId:roleId}}))),(0,validation/* isEmpty */.xb)(sharedGroupIds)||(sharedGroupDetails=sharedGroupIds.map((function(groupId){return{type:3,groupId:groupId}}))));var sharingDetails=[].concat((0,toConsumableArray/* default */.Z)(sharedUserDetails),(0,toConsumableArray/* default */.Z)(sharedRoleDetails),(0,toConsumableArray/* default */.Z)(sharedGroupDetails));return{viewSharing:sharingDetails,isLocked:this.hasEditPermission}}}},components_ShareWithvue_type_script_lang_js=ShareWithvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ShareWithvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ShareWith=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/54548.js.map