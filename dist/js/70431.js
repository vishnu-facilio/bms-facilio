(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[70431],{
/***/670431:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewsCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/news/components/NewsCard.vue?vue&type=template&id=49b51c88&scoped=true
var ImageGrid_render,ImageGrid_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"container news-card flex-col"},[_c("div",{staticClass:"d-flex flex-col pT30 pB10 pL25 pR25"},[_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"mR10"},[_vm.recordObj.sysCreatedBy?_c("UserAvatar",{attrs:{size:"lg",user:_vm.recordObj.sysCreatedBy,name:!1}}):_vm._e()],1),_c("div",{staticClass:"d-flex flex-col"},[_c("div",[_c("span",{staticClass:"bold f15"},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.recordObj,"sysCreatedBy.name"))+" ")]),_vm._v(" "+_vm._s(_vm.publishInfo)+" ")]),_c("div",{staticClass:"mT5 f12 text-fc-grey"},[_vm._v(" "+_vm._s(_vm.recordObj.sysCreatedTime)+" ")])])]),_c("div",{staticClass:"d-flex flex-col mT20"},[_c("div",{staticClass:"bold textoverflow-ellipsis"},[_vm._v(" "+_vm._s(_vm.recordObj.title)+" ")]),_c("div",{staticClass:"mT5 description richtext-preview"},[_vm.recordObj.description?_c("div",{domProps:{innerHTML:_vm._s(_vm.recordObj.description)}}):_c("div",[_vm._v("---")])])])]),_c("ImageGrid",{attrs:{images:_vm.imageAttachments}}),_vm.recordObj.commentsAllowed?_c("Comments",{attrs:{record:_vm.record,comments:_vm.comments,moduleName:_vm.moduleName,notesModuleName:_vm.notesModuleName,canShowAllComments:_vm.canShowAllComments},on:{onShowAllComments:_vm.onShowAllComments,onCommentAdded:_vm.onCommentAdded}}):_vm._e()],1)},staticRenderFns=[],validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(634338),__webpack_require__(990260)),User=__webpack_require__(426803),objectSpread2=__webpack_require__(595082),toArray=__webpack_require__(955167),slicedToArray=__webpack_require__(554621),PreviewFile=(__webpack_require__(689730),__webpack_require__(720096)),ImageGridvue_type_script_lang_js={props:{images:{type:Array,required:!0}},data:function(){return{previewFile:null,canShowPreview:!1}},computed:{showOne:function(){var images=this.images;return[1,4].includes(images.length)},showTwo:function(){var images=this.images;return images.length>=2&&![3,4].includes(images.length)},showThree:function(){var images=this.images;return images.length>=3}},render:function(){var h=arguments[0];return!(0,validation/* isEmpty */.xb)(this.images)&&h("div",{class:"grid"},[this.showOne&&this.renderOne(),this.showTwo&&this.renderTwo(),this.showThree&&this.renderThree(),this.canShowPreview&&this.renderPreview()])},methods:{togglePreview:function(val){this.canShowPreview=val},openPreview:function(file){this.previewFile=file,this.togglePreview(!0)},renderOne:function(){var h=this.$createElement,images=this.images,imageCard=this.imageCard,_images=(0,slicedToArray/* default */.Z)(images,1),file=_images[0];return h("div",{class:"row"},[h("div",{class:"col"},[imageCard(file)])])},renderTwo:function(){var h=this.$createElement,images=this.images,imageCard=this.imageCard,_images2=(0,slicedToArray/* default */.Z)(images,3),file1=_images2[0],file2=_images2[1],file3=_images2[2],wasFirstRendered=this.showOne,excessCount=wasFirstRendered?images.length-3:images.length-2,showOverlay=excessCount>0&&!this.showThree;return h("div",{class:"row"},[h("div",{class:"col"},[imageCard(wasFirstRendered?file2:file1)]),h("div",{class:"col"},[imageCard(wasFirstRendered?file3:file2,{showOverlay:showOverlay,count:excessCount})])])},renderThree:function(){var h=this.$createElement,images=this.images,imageCard=this.imageCard,wasFirstRendered=this.showOne,wasSecondRendered=this.showTwo,filteredFiles=[];if(wasSecondRendered){
// eslint-disable-next-line no-unused-vars
var _images3=(0,toArray/* default */.Z)(images),rest=(_images3[0],_images3[1],_images3.slice(2));filteredFiles=rest}else if(wasFirstRendered){
// eslint-disable-next-line no-unused-vars
var _images4=(0,toArray/* default */.Z)(images),_rest=(_images4[0],_images4.slice(1));filteredFiles=_rest}else filteredFiles=images;var excessCount=filteredFiles.length-3,showOverlay=excessCount>0;return h("div",{class:"row"},[h("div",{class:"col"},[imageCard(filteredFiles[0])]),h("div",{class:"col"},[imageCard(filteredFiles[1])]),h("div",{class:"col"},[imageCard(filteredFiles[2],{showOverlay:showOverlay,count:excessCount})])])},renderPreview:function(){var h=this.$createElement,canShowPreview=this.canShowPreview,previewFile=this.previewFile,images=this.images;return h("el-dialog",{attrs:{visible:canShowPreview,"append-to-body":!0},class:"f-list-attachment-dialog"},[h(PreviewFile/* default */.Z,{attrs:{visibility:canShowPreview,previewFile:previewFile,files:images},on:(0,objectSpread2/* default */.Z)({},{"update:visibility":this.togglePreview})})])},imageCard:function(file){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$showOverlay=_ref.showOverlay,showOverlay=void 0!==_ref$showOverlay&&_ref$showOverlay,_ref$count=_ref.count,count=void 0===_ref$count?null:_ref$count,h=this.$createElement,openPreview=this.openPreview,$prependBaseUrl=this.$prependBaseUrl,url=$prependBaseUrl(file.previewUrl),style={"background-image":"url(".concat(url,")")};return h("div",{style:style,attrs:{fit:"fill"},class:"image-card",on:{click:function(){return openPreview(file)}}},[showOverlay&&h("div",{class:"overlay",on:{click:function(){return openPreview(file)}}},[h("span",{class:"overlay-count"},["+",count+1])])])}}},components_ImageGridvue_type_script_lang_js=ImageGridvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ImageGridvue_type_script_lang_js,ImageGrid_render,ImageGrid_staticRenderFns,!1,null,"29754bd4",null)
/* harmony default export */,ImageGrid=component.exports,orderBy=__webpack_require__(875472),orderBy_default=__webpack_require__.n(orderBy),filters=__webpack_require__(273861),sanitize=__webpack_require__(678042),Commentsvue_type_template_id_63110146_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex flex-col news-comment-container"},[_vm.hasComments?_c("div",{staticClass:"pT10 pB10 pL25 pR25 border-top7 f13 comment-count",on:{click:function($event){_vm.showComments=!0}}},[_c("span",{staticClass:"cursor-pointer"},[_vm._v(" "+_vm._s(_vm.comments.length)+"Â  "+_vm._s(_vm.comments.length>1?"comments":"comment")+" ")])]):_vm._e(),_c("div",{staticClass:"pT20 pB15 pL25 pR25 border-top7 d-flex flex-row"},[_c("UserAvatar",{staticClass:"mR15 self-center",attrs:{size:"md",user:_vm.$portaluser,name:!1}}),_c("div",{ref:"comment-input",staticClass:"comment-input",attrs:{contenteditable:"","data-placeholder":"Write a comment"},on:{input:_vm.onInput,paste:function($event){return $event.preventDefault(),_vm.onPaste.apply(null,arguments)},keypress:_vm.onKeypress}})],1),_vm.showComments?_c("div",{staticClass:"d-flex flex-col border-top7"},[_vm._l(_vm.filteredComments,(function(comment){return _c("div",{key:comment.id,staticClass:"d-flex flex-row mR25 mL25 pT20 pB20 border-bottom7"},[_c("div",{staticClass:"mR10"},[_c("UserAvatar",{staticClass:"mR15 self-center",attrs:{size:"md",user:comment.createdBy,name:!1}})],1),_c("div",{staticClass:"d-flex flex-col"},[_c("div",{staticClass:"bold"},[_vm._v(" "+_vm._s(comment.createdBy.name||"Unknown")+" ")]),_c("div",{staticClass:"mT5 line-height20"},[_vm._v(" "+_vm._s(comment.body)+" ")]),_c("div",{staticClass:"mT10 f12 text-fc-grey"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(comment.createdTime))+" ")])])])})),_vm.filteredComments.length<_vm.comments.length?_c("div",{staticClass:"m15 text-center text-fc-grey f13 cursor-pointer",on:{click:_vm.showAllComments}},[_vm._v(" View all comments ")]):_vm._e()],2):_vm._e()])},Commentsvue_type_template_id_63110146_scoped_true_staticRenderFns=[],api=__webpack_require__(32284),Commentsvue_type_script_lang_js={props:["record","comments","moduleName","notesModuleName","canShowAllComments"],components:{UserAvatar:User/* default */.Z},data:function(){return{comment:{parentModuleLinkName:this.moduleName,parentId:this.record.id,body:null,notifyRequester:!1},showComments:!(0,validation/* isEmpty */.xb)(this.comments)}},computed:{value:{get:function(){return this.comment.body},set:function(value){this.comment.body=value;
// Update div with value if it is diff from current value
// TODO fix cursor position change
var ref=this.$refs["comment-input"];ref&&ref.innerText!==value&&(ref.innerText=value)}},hasComments:function(){return!(0,validation/* isEmpty */.xb)(this.comments)},filteredComments:function(){return this.canShowAllComments?this.comments:this.comments.slice(0,2)}},methods:{onInput:function(e){var innerText=e.target.innerText;this.value=(0,validation/* isEmpty */.xb)(innerText)?"":innerText},onKeypress:function(e){"Enter"!=e.key||e.shiftKey||(e.preventDefault(),this.saveComment())},onPaste:function(e){var text=(e.originalEvent||e).clipboardData.getData("text/plain");window.document.execCommand("insertText",!1,text)},saveComment:function(){var _this=this,comment=this.comment,notesModuleName=this.notesModuleName,moduleName=this.moduleName;if(!(0,validation/* isEmpty */.xb)(comment.body)){var data={note:comment,module:notesModuleName,parentModuleName:moduleName};api/* API */.bl.post("/note/add",data).then((function(_ref){var data=_ref.data,error=_ref.error;error||(0,validation/* isEmpty */.xb)(data.note)?_this.$message.error(error.message||"Error while adding comment"):(_this.value="",_this.$emit("onCommentAdded",data.note),_this.$nextTick((function(){return _this.showComments=!0})))}))}},showAllComments:function(){this.$emit("onShowAllComments")}}},components_Commentsvue_type_script_lang_js=Commentsvue_type_script_lang_js,Comments_component=(0,componentNormalizer/* default */.Z)(components_Commentsvue_type_script_lang_js,Commentsvue_type_template_id_63110146_scoped_true_render,Commentsvue_type_template_id_63110146_scoped_true_staticRenderFns,!1,null,"63110146",null)
/* harmony default export */,Comments=Comments_component.exports,sharingTypes={1:"tenant unit",2:"role",3:"people",4:"building"},NewsCardvue_type_script_lang_js={props:["record","moduleName","notesModuleName","attachmentsModuleName","canShowAllComments","commentsList","attachmentList"],components:{UserAvatar:User/* default */.Z,ImageGrid:ImageGrid,Comments:Comments},computed:{comments:function(){var record=this.record,notesModuleName=this.notesModuleName,canShowAllComments=this.canShowAllComments,commentsList=this.commentsList,$getProperty=this.$getProperty,comments=canShowAllComments?commentsList:$getProperty(record,notesModuleName,[]);return orderBy_default()(comments,["createdTime"],["desc"])},attachments:function(){var record=this.record,attachmentsModuleName=this.attachmentsModuleName,attachmentList=this.attachmentList,$getProperty=this.$getProperty;return(0,validation/* isEmpty */.xb)(attachmentList)?$getProperty(record,attachmentsModuleName,[]):attachmentList},imageAttachments:function(){var _this$attachments=this.attachments,attachments=void 0===_this$attachments?[]:_this$attachments;return attachments.filter((function(a){return(0,validation/* isObject */.Kn)(a)})).filter((function(a){return a.contentType.includes("image")}))},publishInfo:function(){var record=this.record,$getProperty=this.$getProperty,publishedTo=$getProperty(record,"newsandinformationsharing")||[],sharingType=$getProperty(publishedTo,"0.sharingType"),sharingInfo="shared a post with ";return"people"===sharingTypes[sharingType]?sharingInfo+="you":sharingInfo=sharingInfo+"your "+sharingTypes[sharingType],sharingInfo},recordObj:function(){var record=this.record,sysCreatedBy=record.sysCreatedBy,sysCreatedTime=record.sysCreatedTime,description=record.description,title=record.title,_record$commentsAllow=record.commentsAllowed,commentsAllowed=void 0!==_record$commentsAllow&&_record$commentsAllow;return{title:title,description:(0,sanitize/* sanitize */.N)(description),sysCreatedBy:sysCreatedBy,sysCreatedTime:(0,filters.formatDate)(sysCreatedTime),commentsAllowed:commentsAllowed}}},methods:{onCommentAdded:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.$emit.apply(this,["onCommentAdded"].concat(args))},onShowAllComments:function(){this.$emit("onShowAllComments")}}},components_NewsCardvue_type_script_lang_js=NewsCardvue_type_script_lang_js,NewsCard_component=(0,componentNormalizer/* default */.Z)(components_NewsCardvue_type_script_lang_js,render,staticRenderFns,!1,null,"49b51c88",null)
/* harmony default export */,NewsCard=NewsCard_component.exports},
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/70431.js.map