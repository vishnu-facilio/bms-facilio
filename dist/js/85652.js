"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[85652],{
/***/855048:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FLookupField.vue?vue&type=template&id=473d4b8e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isFieldLoading}}):_c("div",{staticClass:"f-lookup-chooser f-lookup-chooser-container"},[_c("el-select",{ref:"selectBox",class:["fc-input-full-border-select2 width100",(!_vm.canHideLookupIcon||_vm.canShowQuickCreateIcon)&&"resource-search",_vm.isMultiple&&"fc-tag",_vm.hideDropDown&&!_vm.disabled&&"skip-disable"],attrs:{"collapse-tags":"",remote:_vm.isRemote,filterable:"",clearable:_vm.canHideLookupIcon,multiple:_vm.isMultiple,popperAppendToBody:_vm.popperAppendToBody,"remote-method":function(searchText){return _vm.remoteMethod(searchText)},loading:_vm.field.isDataLoading,"loading-text":_vm.$t("common._common.searching"),disabled:_vm.disabled||_vm.hideDropDown,placeholder:_vm.field.placeHolderText||"Select"},on:{change:_vm.recordSelected},model:{value:_vm.modelObj,callback:function($$v){_vm.modelObj=$$v},expression:"modelObj"}},[_c("div",{staticClass:"flRight d-flex",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},slot:"prefix"},[_vm.canShowSystemClear?_c("div",{staticClass:"flookup-remove-icon-alignment flookup-remove-icon",on:{click:_vm.clearData}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e(),_vm.canHideLookupIcon?_vm._e():_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openLookupFieldWizard(_vm.field)}}},[_c("inline-svg",{attrs:{src:"lookup",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1),_vm.canShowQuickCreateIcon?_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openQuickCreate()}}},[_c("el-tooltip",{attrs:{effect:"dark",content:"Add\n          "+_vm.moduleDisplayName,placement:"top"}},[_c("inline-svg",{attrs:{src:"add-pink",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1)],1):_vm._e()]),_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:option.value+" "+index,staticClass:"fc-input-full-border-select2 width100",attrs:{label:option.label,value:option.value}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.$validation.isEmpty(option.secondaryLabel)?_vm._e():_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.secondaryLabel))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13 pL10",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])}))],2),_vm.showQuickCreateData?_c("QuickCreateData",{attrs:{canShowDialog:_vm.showQuickCreateData,quickCreateField:_vm.field,setAddedRecord:_vm.setAddedRecord},on:{"update:canShowDialog":function($event){_vm.showQuickCreateData=$event},"update:can-show-dialog":function($event){_vm.showQuickCreateData=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(634338),__webpack_require__(990260)),constant=__webpack_require__(354754),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),FieldLoader=__webpack_require__(62979),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),LOOKUP_FIELD_PLACEHOLDER_MAP={people:{value:"${LOGGED_PEOPLE}",label:"Current User"},users:{value:"${LOGGED_USER}",label:"Current User"}},FLookupFieldvue_type_script_lang_js={name:"f-lookup-field",props:{model:{},field:{type:Object},disabled:{type:Boolean},siteId:{type:[Number,String]},categoryId:{type:Number},hideLookupIcon:{type:Boolean,default:!1},popperAppendToBody:{required:!1,type:Boolean,default:!0},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},preHookFilterConstruction:{type:Function,default:function(field){return field.filters}},hideDropDown:{type:Boolean,default:!1},skipLoading:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},userfilmoduleEnum:{type:String},parentModuleId:{type:Number},selectedOptions:{type:Array}},components:{FieldLoader:FieldLoader/* default */.Z,QuickCreateData:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(99813)]).then(__webpack_require__.bind(__webpack_require__,676433))}},data:function(){return{localSearch:!1,isLoadedOnce:!1,currentModelValue:!1,showQuickCreateData:!1}},computed:{customOptions:function(){var _ref=this||{},field=_ref.field,_ref2=field||{},lookupModule=_ref2.lookupModule;if((0,validation/* isEmpty */.xb)(lookupModule))return[];var _ref3=lookupModule||{},name=_ref3.name;return(0,validation/* isEmpty */.xb)(LOOKUP_FIELD_PLACEHOLDER_MAP[name])?[]:[LOOKUP_FIELD_PLACEHOLDER_MAP[name]]},modelObj:{get:function(){return this.model},set:function(value){this.currentModelValue=value,this.$emit("update:model",value)}},moduleDisplayName:function(){var field=this.field,_ref4=field.field||{},lookupModule=_ref4.lookupModule,_ref5=lookupModule||{},displayName=_ref5.displayName;return displayName},isFieldLoading:function(){var field=this.field,defaultIds=this.defaultIds,skipLoading=this.skipLoading,isLoadedOnce=this.isLoadedOnce;return!skipLoading&&!isLoadedOnce&&!(0,validation/* isEmpty */.xb)(defaultIds)&&field.isDataLoading},isPickListTypeModule:function(){var field=this.field,fieldObj=field.field,_ref6=fieldObj||field,lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},type=_ref7.type;
// type 1 is for base entity modules
return!!type&&1!==type},isRemote:function(){var localSearch=this.localSearch;return!localSearch},canHideLookupIcon:function(){var hideLookupIcon=this.hideLookupIcon,isPickListTypeModule=this.isPickListTypeModule,hideDropDown=this.hideDropDown,field=this.field,userfilmoduleEnum=this.userfilmoduleEnum,_ref8=field||{},config=_ref8.config,canHide=!1;if(!(0,validation/* isEmpty */.xb)(config)){var canShowLookupWizard=this.$getProperty(config,"canShowLookupWizard",null);(0,validation/* isNull */.Ft)(canShowLookupWizard)||(canHide=!canShowLookupWizard)}return!hideDropDown&&("PICK_LIST"===userfilmoduleEnum||(canHide||hideLookupIcon||isPickListTypeModule))},canShowQuickCreateIcon:function(){var disabled=this.disabled,field=this.field,_ref9=field||{},config=_ref9.config,canShow=!1;return(0,validation/* isEmpty */.xb)(config)||(canShow=this.$getProperty(config,"canShowQuickCreate")),disabled&&(canShow=!1),canShow},isSiteEnabled:function(){var siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;return!(0,validation/* isEmpty */.xb)(currentSiteId)},isMultiple:function(){var field=this.field;return!!field.multiple},resourceModuleName:function(){var field=this.field,config=field.config,lookupModuleName=field.lookupModuleName,_ref10=config||{},isFiltersEnabled=_ref10.isFiltersEnabled,filterValue=_ref10.filterValue;if(isFiltersEnabled&&constant/* default */.Z.LOOKUP_FILTER_ENABLED_FIELDS.includes(lookupModuleName)){var moduleName=constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue];return moduleName}return null},isResourceField:function(){var field=this.field,name=field.name,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field)||"resource"===name;return isResourceField},
// To prefill the existing values, we have to send default ids in picklist api
defaultIds:function(){var modelObj=this.modelObj,selectedOptions=this.selectedOptions,isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(modelObj)||!1,defaultIds=[],selectedOptionsArr=(selectedOptions||[]).map((function(option){return parseInt(option)}));return(0,validation/* isEmpty */.xb)(selectedOptions)?(0,validation/* isEmpty */.xb)(modelObj)||isPlaceHoldersEnabled||(defaultIds=(0,validation/* isArray */.kJ)(modelObj)?(0,toConsumableArray/* default */.Z)(modelObj):[modelObj]):defaultIds=(0,toConsumableArray/* default */.Z)(selectedOptionsArr),defaultIds=defaultIds.filter((function(val){return!constant/* default */.Z.FIELD_PLACEHOLDERS.includes(val)})),defaultIds},operatorLookupModule:function(){var field=this.field,_ref11=field||{},operatorLookupModule=_ref11.operatorLookupModule;return operatorLookupModule||{}},skipSiteFilter:function(){var field=this.field,_ref12=field||{},config=_ref12.config,_ref13=config||{},_ref13$skipSiteFilter=_ref13.skipSiteFilter,skipSiteFilter=void 0!==_ref13$skipSiteFilter&&_ref13$skipSiteFilter;return skipSiteFilter},canShowSystemClear:function(){var canHideLookupIcon=this.canHideLookupIcon,isClearable=this.isClearable,modelObj=this.modelObj,disabled=this.disabled;return!canHideLookupIcon&&!disabled&&(isClearable&&!(0,validation/* isEmpty */.xb)(modelObj))}},watch:{model:function(newVal){var _this=this,currentModelValue=this.currentModelValue,isRemote=this.isRemote;isEqual_default()(newVal,currentModelValue)||(isRemote&&this.getOptions({initialFetch:!0}).then((function(options){_this.$set(_this.field,"options",options)})),this.$set(this,"modelObj",newVal))},siteId:{handler:function(newVal,oldVal){var _this2=this,isSiteEnabled=this.isSiteEnabled,skipSiteFilter=this.skipSiteFilter;skipSiteFilter||isSiteEnabled||newVal===oldVal||this.getOptions({initialFetch:!0}).then((function(options){_this2.$set(_this2.field,"options",options)}))}},parentModuleId:{handler:function(newVal,oldVal){var _this3=this;newVal!==oldVal&&this.getOptions({initialFetch:!0}).then((function(options){_this3.$set(_this3.field,"options",options)}))}},operatorLookupModule:{handler:function(newVal,oldVal){var _this4=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this4.$set(_this4.field,"options",options)}))}},"field.clientCriteria":{handler:function(newVal,oldVal){var _this5=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this5.$set(_this5.field,"options",options)}))}},categoryId:{handler:function(newVal,oldVal){var _this6=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this6.$set(_this6.field,"options",options)}))}},"field.options":{handler:function(value){var modelObj=this.modelObj;if(!(0,validation/* isEmpty */.xb)(value))if((0,validation/* isEmpty */.xb)(modelObj))this.field.selectedItems=[];else if((0,validation/* isArray */.kJ)(modelObj)){var selectedItems=value.filter((function(option){return modelObj.includes(option.value)}));this.field.selectedItems=selectedItems}else{var selectedItem=value.find((function(option){return option.value===modelObj}));this.field.selectedItems=[selectedItem]}},immediate:!0},isLoadedOnce:{handler:function(value){value&&this.$emit("optionsLoadedOnce")}}},created:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var fetchOptionsOnLoad,field,modelObj,customOptions,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:
// Have to skip fetching options initially, when module is 'resource' and filters is not enabled
if(fetchOptionsOnLoad=_this7.fetchOptionsOnLoad,field=_this7.field,modelObj=_this7.modelObj,customOptions=_this7.customOptions,_this7.currentModelValue=modelObj,_this7.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx,!fetchOptionsOnLoad){_context2.next=12;break}return _context2.next=6,_this7.getOptions({initialFetch:!0});case 6:if(_context2.t0=_context2.sent,_context2.t0){_context2.next=9;break}_context2.t0=[];case 9:options=_context2.t0,_this7.$set(_this7.field,"options",[].concat((0,toConsumableArray/* default */.Z)(customOptions),(0,toConsumableArray/* default */.Z)(options))),_this7.$set(_this7,"isLoadedOnce",!0);case 12:_this7.remoteMethod=_this7.$helpers.debounce(function(){var _ref14=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(searchText){var isDataLoading,_options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isDataLoading=field.isDataLoading,isDataLoading){_context.next=6;break}return _context.next=4,_this7.getOptions({searchText:searchText});case 4:_options=_context.sent,_this7.$set(_this7.field,"options",_options);case 6:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref14.apply(this,arguments)}}(),1e3);case 13:case"end":return _context2.stop()}}),_callee2)})))()},methods:{focus:function(){(0,validation/* isEmpty */.xb)(this.$refs["selectBox"])||this.$refs["selectBox"].focus()},getOptions:function(params){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var searchText,initialFetch,fetchOptionsMethod,field,siteId,categoryId,isRemote,defaultIds,resourceModuleName,isResourceField,skipSiteFilter,selectedOptions,_field$filters,fieldFilters,options,filters,props,perPageCount,_yield$_this8$fetchOp,_yield$_this8$fetchOp2,optionsArr,error,_ref15,message,_yield$getFieldOption,_yield$getFieldOption2,_optionsArr,_error,meta,_ref16,_message,_meta$localSearch,localSearch;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
/*
                Have to return empty options if field is of resourcetype, if filters havent be enabled
                and if no values selected already
              */
if(searchText=params.searchText,initialFetch=params.initialFetch,fetchOptionsMethod=_this8.fetchOptionsMethod,field=_this8.field,siteId=_this8.siteId,categoryId=_this8.categoryId,isRemote=_this8.isRemote,defaultIds=_this8.defaultIds,resourceModuleName=_this8.resourceModuleName,isResourceField=_this8.isResourceField,skipSiteFilter=_this8.skipSiteFilter,selectedOptions=_this8.selectedOptions,_field$filters=field.filters,fieldFilters=void 0===_field$filters?{}:_field$filters,options=[],(0,validation/* isEmpty */.xb)(resourceModuleName)||(field.resourceLookupModuleName=resourceModuleName),filters=_this8.preHookFilterConstruction(field),(0,validation/* isEmpty */.xb)(filters)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fieldFilters),filters)),(0,validation/* isEmpty */.xb)(categoryId)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field.filters),{},{category:{operator:"is",value:["".concat(categoryId)]}})),props={field:field,searchText:searchText},skipSiteFilter||(props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{siteId:siteId})),!(isResourceField&&(0,validation/* isEmpty */.xb)(resourceModuleName)&&(0,validation/* isEmpty */.xb)(defaultIds))){_context3.next=12;break}return _context3.abrupt("return",options);case 12:if(initialFetch&&isRemote&&(perPageCount=defaultIds.length>50?defaultIds.length:50,props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{page:1,perPage:perPageCount,defaultIds:defaultIds}),((0,validation/* isEmpty */.xb)(resourceModuleName)&&isResourceField||!(0,validation/* isEmpty */.xb)(selectedOptions))&&(
// Have to fetch only selected values, which is same as the number of defaultids
props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{perPage:defaultIds.length}))),_this8.$set(field,"isDataLoading",!0),(0,validation/* isEmpty */.xb)(fetchOptionsMethod)){_context3.next=25;break}return _context3.next=17,_this8.fetchOptionsMethod(props);case 17:_yield$_this8$fetchOp=_context3.sent,_yield$_this8$fetchOp2=_yield$_this8$fetchOp.options,optionsArr=void 0===_yield$_this8$fetchOp2?[]:_yield$_this8$fetchOp2,error=_yield$_this8$fetchOp.error,error&&(_ref15=error||{},message=_ref15.message,_this8.$message.error(message||"Error Occured")),options=optionsArr,_context3.next=35;break;case 25:return _context3.next=27,(0,picklist/* getFieldOptions */._K)(props);case 27:_yield$getFieldOption=_context3.sent,_yield$getFieldOption2=_yield$getFieldOption.options,_optionsArr=void 0===_yield$getFieldOption2?[]:_yield$getFieldOption2,_error=_yield$getFieldOption.error,meta=_yield$getFieldOption.meta,_error&&(_ref16=_error||{},_message=_ref16.message,_this8.$message.error(_message||"Error Occured")),meta&&(0,validation/* isEmpty */.xb)(searchText)&&(_meta$localSearch=meta.localSearch,localSearch=void 0!==_meta$localSearch&&_meta$localSearch,_this8.$set(_this8,"localSearch",localSearch)),options=_optionsArr;case 35:return _this8.$set(field,"isDataLoading",!1),_context3.abrupt("return",options);case 37:case"end":return _context3.stop()}}),_callee3)})))()},clearData:function(){this.$emit("update:model",""),this.recordSelected("")},recordSelected:function(value){var field=this.field,_this$field$options=this.field.options,options=void 0===_this$field$options?[]:_this$field$options,isMultiple=this.isMultiple,selectedValues=null;isMultiple?(selectedValues=options.filter((function(e){return(value||[]).includes(e.value)})),field.selectedItems=selectedValues):(selectedValues=options.find((function(e){return e.value==value}))||{},field.selectedItems=[],(0,validation/* isEmpty */.xb)(selectedValues)||(field.selectedItems=[selectedValues])),this.$emit("recordSelected",selectedValues,field)},openLookupFieldWizard:function(field){var disabled=this.disabled;disabled||this.$emit("showLookupWizard",field,!0)},openQuickCreate:function(){var disabled=this.disabled;disabled||(this.showQuickCreateData=!0)},setAddedRecord:function(props){var record=props.record,_ref17=record||{},id=_ref17.id,name=record.displayName||record.name||record.subject,field=this.field;field.selectedItems=[{value:id,label:name}],this.$emit("setLookupFieldValue",{field:(0,objectSpread2/* default */.Z)({},field)})}}},forms_FLookupFieldvue_type_script_lang_js=FLookupFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FLookupFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupField=component.exports},
/***/62979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FieldLoader.vue?vue&type=template&id=7252e23e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"field-loading loading-shimmer"}):_vm._e()},staticRenderFns=[],FieldLoadervue_type_script_lang_js={props:{isLoading:{type:Boolean,required:!0}}},forms_FieldLoadervue_type_script_lang_js=FieldLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FieldLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldLoader=component.exports},
/***/885652:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PublishedSites}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/community/components/PublishedSites.vue?vue&type=template&id=f039f808&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pL30 pR30 d-flex flex-direction-column"},[_c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title mL0 flex-middle justify-between"},[_vm._v(" "+_vm._s(_vm.$t("common._common.published_to",{sharingType:_vm.sharingType}))+" ")]),_vm.spaces.length>_vm.threshold?_c("div",{staticClass:"pointer underline",on:{click:_vm.showMoreDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view-all"))+" ")]):_vm._e()]),_c("div",{ref:"publishTo-container",staticClass:"d-flex mT10 mB30 flex-direction-row flex-wrap"},[_vm._l(_vm.limitedItems,(function(space,index){return _c("div",{key:"space-"+space.id+"-"+index,staticClass:"tag"},[_vm._v(" "+_vm._s(space.name)+" ")])})),_vm.spaces.length>_vm.threshold?_c("div",{staticClass:"more flex-middle height20 text-fc-grey"},[_c("i",{staticClass:"el-icon-more"})]):_vm._e(),_vm.showMore?_c("ItemsList",{key:_vm.details.name,attrs:{details:_vm.details,sharingModuleName:_vm.sharingModuleName,showDialog:_vm.showMore}}):_vm._e()],2),_vm.hasRoleFilter?[_c("div",[_c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title mL0 flex-middle justify-between"},[_vm._v(" "+_vm._s(_vm.$t("common._common.filter_by_roles"))+" ")])]),_c("div",{ref:"publishTo-container",staticClass:"d-flex mT10 mB30 flex-direction-row flex-wrap"},_vm._l(_vm.getAppliedRolesForFilter,(function(role,index){return _c("div",{key:"space-"+role.id+"-"+index,staticClass:"tag"},[_vm._v(" "+_vm._s(role.name)+" ")])})),0)])]:_vm._e()],2)},staticRenderFns=[],validation=(__webpack_require__(689730),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(990260)),PublishedItemsListvue_type_template_id_8b7dcfbc_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container f-lookup-wizard scale-up-center fc-wizard-table-width100",attrs:{visible:_vm.showDialogBox,width:"70%","append-to-body":!0,"show-close":!1,"before-close":_vm.handleClose},on:{"update:visible":function($event){_vm.showDialogBox=$event}}},[_c("template",{slot:"title"},[_c("div",{staticClass:"header d-flex justify-between"},[_c("div",{staticClass:"el-dialog__title self-center"},[_vm._v(" "+_vm._s(_vm.sharingTypeName+" List")+" ")]),_c("div",{staticClass:"width50"},[_c("el-dropdown",{staticClass:"fL",on:{command:function(action){return _vm.handlecommand(action)}}},[_c("el-button",{staticClass:"height40px filter-key width100px fc-bordrer-btn-grey flex-middle justify-between"},[_vm._v(" "+_vm._s(_vm.capitalizeFirstLetter(_vm.filterFieldValue))+" ")]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.fieldList,(function(key,index){return _c("el-dropdown-item",{key:index,attrs:{command:key}},[_vm._v(_vm._s(_vm.capitalizeFirstLetter(key)))])})),1)],1),_c("div",{staticClass:"width70 fL"},["name"==_vm.filterFieldValue?_c("el-input",{staticClass:"el-input-textbox-full-border width100 name-input",attrs:{type:"text",clearable:"",min:5},on:{clear:function($event){_vm.searchQuery=null}},model:{value:_vm.searchQuery,callback:function($$v){_vm.searchQuery=$$v},expression:"searchQuery"}}):_vm._e(),_vm._l(_vm.filterList,(function(key,index){return[_vm.filterFieldValue==key?_c("FLookupField",{key:index,attrs:{hideLookupIcon:!0,model:_vm.space,fetchOptionsOnLoad:!0,field:_vm.fields[key]},on:{"update:model":function($event){_vm.space=$event}}}):_vm._e()]}))],2),_c("div",{staticClass:"mT10"},[_c("span",{staticClass:"separator self-center"},[_vm._v("|")]),_c("span",{staticClass:"close-btn self-center cursor-pointer",on:{click:_vm.handleClose}},[_c("i",{staticClass:"el-dialog__close el-icon el-icon-close"})])])],1)])]),_c("el-table",{staticClass:"fc-table-widget-scroll",attrs:{data:_vm.showSearchItems,fit:!0,height:"500"}},[_c("template",{slot:"empty"},[_c("div",{staticClass:"width100 justify-center"},[_c("img",{staticClass:"mT100",attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10 label-txt-black f14"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_units_available"))+" ")])])]),_vm._l(_vm.listItems,(function(key,index){return[_c("el-table-column","id"==key?{key:key,attrs:{label:key},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"mL30 height30px fc-id"},[_vm._v(" "+_vm._s("#"+item.row.id)+" ")])]}}],null,!0)}:{key:index,attrs:{label:key},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"pointer mL30 height30px"},"area"==key?[_vm._v(" "+_vm._s(_vm._f("positive")(item.row.space.area))+" "+_vm._s(_vm.$t("common.header.sqft"))+" ")]:"peopleType"===key?[_vm._v(" "+_vm._s(item.row.peopleTypeEnum)+" ")]:"site"===key||"building"==key||"floor"==key?[_vm._v(" "+_vm._s(_vm.getLookUpValue(item.row,key)||"---")+" ")]:[_vm._v(" "+_vm._s(item.row[key]||"---")+" ")])]}}],null,!0)})]}))],2)],2)},PublishedItemsListvue_type_template_id_8b7dcfbc_scoped_true_staticRenderFns=[],SpaceMixin=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(87171)),eventBus=__webpack_require__(398011),FLookupField=__webpack_require__(855048),fields={building:{isDataLoading:!1,options:[],lookupModuleName:"building",field:{lookupModule:{name:"building",displayName:"Buildings"}},forceFetchAlways:!0,filters:{},multiple:!1,isDisabled:!1},site:{isDataLoading:!1,options:[],lookupModuleName:"site",field:{lookupModule:{name:"site",displayName:"Sites"}},forceFetchAlways:!0,filters:{},multiple:!1,isDisabled:!1},floor:{isDataLoading:!1,options:[],lookupModuleName:"floor",field:{lookupModule:{name:"floor",displayName:"Floors"}},forceFetchAlways:!0,filters:{},multiple:!1,isDisabled:!1}},sharingTypes={TENANT_UNIT:1,ROLE:2,PEOPLE:3,BUILDING:4},PublishedItemsListvue_type_script_lang_js={props:["details","sharingModuleName","showDialog"],mixins:[SpaceMixin/* default */.Z],components:{FLookupField:FLookupField/* default */.Z},data:function(){return{items:[],fields:fields,showDialogBox:!1,sharingTypeName:"---",sharingType:null,listItems:[],searchQuery:null,space:null,fieldList:[],filterFieldValue:"name"}},created:function(){this.initial(),this.showDialogBox=this.showDialog},computed:{filterList:function(){return["site","building","floor"]},showSearchItems:function(){var searchQuery=this.searchQuery,items=this.items,space=this.space,filterFieldValue=this.filterFieldValue;return searchQuery?(items||[]).filter((function(item){var _ref=item||{},name=_ref.name,searchQueryUpperCase=searchQuery.toUpperCase();return(name||"").toUpperCase().includes(searchQueryUpperCase)})):space?(items||[]).filter((function(item){var _ref2=(item||{})[filterFieldValue]||{},id=_ref2.id;return id==space})):items||[]}},methods:{handlecommand:function(action){this.space=null,this.searchQuery=null,this.filterFieldValue=action},initial:function(){var _this=this,details=this.details,$getProperty=this.$getProperty,sharingModuleName=this.sharingModuleName,publishedTo=$getProperty(details,"".concat(sharingModuleName))||[];(0,validation/* isEmpty */.xb)(publishedTo)||publishedTo.forEach((function(item){item.sharingType==sharingTypes.TENANT_UNIT?(_this.items.push(item["sharedToSpace"]),_this.sharingTypeName="Tenant Unit",_this.listItems=["id","name","site","building","floor"],_this.sharingType=sharingTypes.TENANT_UNIT):item.sharingType==sharingTypes.ROLE?(_this.items.push(item["sharedToRole"]),_this.sharingTypeName="Role",_this.listItems=["name","description"],_this.sharingType=sharingTypes.ROLE):item.sharingType==sharingTypes.PEOPLE?(_this.items.push(item["sharedToPeople"]),_this.sharingTypeName="People",_this.listItems=["id","name","peopleType","email","phone"],_this.sharingType=sharingTypes.PEOPLE):item.sharingType==sharingTypes.BUILDING&&(_this.items.push(item["sharedToSpace"]),_this.sharingTypeName="Building",_this.listItems=["id","name","site"],_this.sharingType=sharingTypes.BUILDING)})),this.setFieldList()},setFieldList:function(){var sharingType=this.sharingType;switch(sharingType){case sharingTypes.TENANT_UNIT:this.fieldList=["name","site","building","floor"];break;case sharingTypes.ROLE:this.fieldList=["name"];break;case sharingTypes.PEOPLE:this.fieldList=["name"];break;case sharingTypes.BUILDING:this.fieldList=["name","site"];break}},handleClose:function(){this.showDialogBox=!1,eventBus/* eventBus */.Y.$emit("listDialogClose")},getLookUpValue:function(value,key){return(0,validation/* isEmpty */.xb)(value)||(0,validation/* isEmpty */.xb)(value[key])?"---":value[key].name},capitalizeFirstLetter:function(string){return string.charAt(0).toUpperCase()+string.slice(1)}}},components_PublishedItemsListvue_type_script_lang_js=PublishedItemsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PublishedItemsListvue_type_script_lang_js,PublishedItemsListvue_type_template_id_8b7dcfbc_scoped_true_render,PublishedItemsListvue_type_template_id_8b7dcfbc_scoped_true_staticRenderFns,!1,null,"8b7dcfbc",null)
/* harmony default export */,PublishedItemsList=component.exports,PublishedSitesvue_type_script_lang_js_sharingTypes={TENANT_UNIT:1,ROLE:2,PEOPLE:3,BUILDING:4},PublishedSitesvue_type_script_lang_js={props:["details","widget"],components:{ItemsList:PublishedItemsList},data:function(){return{showMore:!1,threshold:10}},mounted:function(){eventBus/* eventBus */.Y.$on("listDialogClose",this.closeDialog)},computed:{sharingModuleName:function(){return this.$getProperty(this.widget,"widgetParams.sharingInfoModuleName")},limitedItems:function(){var threshold=this.threshold;return this.spaces.slice(0,threshold)},hasRoleFilter:function(){var sharingModuleName=this.sharingModuleName,details=this.details;if("audienceSharing"!=sharingModuleName){var _ref=details||{},audience=_ref.audience,_ref2=audience||{},filterSharingType=_ref2.filterSharingType;return filterSharingType}var _ref3=details||{},_filterSharingType=_ref3.filterSharingType;return _filterSharingType},getAppliedRolesForFilter:function(){var details=this.details,$getProperty=this.$getProperty,sharingModuleName=this.sharingModuleName,publishedTo=$getProperty(details,"".concat(sharingModuleName))||[];if(!(0,validation/* isEmpty */.xb)(publishedTo)&&this.hasRoleFilter){var rolesFilter=((publishedTo||[]).map((function(_ref4){var sharedToRole=_ref4.sharedToRole;if(!(0,validation/* isEmpty */.xb)(sharedToRole)){var _ref5=sharedToRole||{},name=_ref5.name,id=_ref5.id;return{id:id,name:name}}}))||[]).filter((function(info){return!(0,validation/* isEmpty */.xb)((info||{}).name)}));return rolesFilter}return[]},spaces:function(){var _this=this,details=this.details,$getProperty=this.$getProperty,sharingModuleName=this.sharingModuleName,publishedTo=$getProperty(details,"".concat(sharingModuleName))||[];if(!(0,validation/* isEmpty */.xb)(publishedTo)){var publishedItem=publishedTo[0],_ref6=publishedItem||{},sharedToSpace=_ref6.sharedToSpace,sharedToRole=_ref6.sharedToRole,sharedToPeople=_ref6.sharedToPeople;if(!((0,validation/* isEmpty */.xb)(sharedToSpace)&&(0,validation/* isEmpty */.xb)(sharedToRole)&&(0,validation/* isEmpty */.xb)(sharedToPeople))){var spaces=((publishedTo||[]).map((function(_ref7){var sharedToSpace=_ref7.sharedToSpace,sharedToRole=_ref7.sharedToRole,sharedToPeople=_ref7.sharedToPeople;if(!(0,validation/* isEmpty */.xb)(sharedToSpace)){var _ref8=sharedToSpace||{},name=_ref8.name,id=_ref8.id;return{id:id,name:name}}if(!(0,validation/* isEmpty */.xb)(sharedToRole)&&!_this.hasRoleFilter){var _ref9=sharedToRole||{},_name=_ref9.name,_id=_ref9.id;return{id:_id,name:_name}}if(!(0,validation/* isEmpty */.xb)(sharedToPeople)){var _ref10=sharedToPeople||{},_name2=_ref10.name,_id2=_ref10.id;return{id:_id2,name:_name2}}}))||[]).filter((function(info){return!(0,validation/* isEmpty */.xb)((info||{}).name)}));return spaces}var sharingType=this.getSharingTypeWithAppliedFilter;switch(sharingType){case PublishedSitesvue_type_script_lang_js_sharingTypes.TENANT_UNIT:return[{id:-1,name:"All Tenant Units"}];case PublishedSitesvue_type_script_lang_js_sharingTypes.ROLE:return[{id:-1,name:"All Roles"}];case PublishedSitesvue_type_script_lang_js_sharingTypes.PEOPLE:return[{id:-1,name:"All People"}];case PublishedSitesvue_type_script_lang_js_sharingTypes.BUILDING:return[{id:-1,name:"All Building"}];default:return[{id:-1,name:"---"}]}}return[]},getSharingTypeWithAppliedFilter:function(){var details=this.details,$getProperty=this.$getProperty,sharingModuleName=this.sharingModuleName,publishedTo=$getProperty(details,"".concat(sharingModuleName))||[],hasRoleFilter=this.hasRoleFilter;if(hasRoleFilter){var publishToInfo=publishedTo.filter((function(publishInfo){return publishInfo.sharingType!=PublishedSitesvue_type_script_lang_js_sharingTypes.ROLE}));return this.$getProperty(publishToInfo,"0.sharingType")}return this.$getProperty(publishedTo,"0.sharingType")},sharingType:function(){var details=this.details,$getProperty=this.$getProperty,sharingModuleName=this.sharingModuleName,publishedTo=$getProperty(details,"".concat(sharingModuleName))||[],sharingTypeId=this.getSharingTypeWithAppliedFilter;if(!(0,validation/* isEmpty */.xb)(publishedTo)){var publishedItem=publishedTo[0],sharedToSpace=publishedItem.sharedToSpace,sharedToRole=publishedItem.sharedToRole,sharedToPeople=publishedItem.sharedToPeople,sharingPrefix=(0,validation/* isEmpty */.xb)(sharedToSpace)&&(0,validation/* isEmpty */.xb)(sharedToRole)&&(0,validation/* isEmpty */.xb)(sharedToPeople)?"All":"Selected";switch(sharingTypeId){case PublishedSitesvue_type_script_lang_js_sharingTypes.TENANT_UNIT:return sharingPrefix+" Tenant Units";case PublishedSitesvue_type_script_lang_js_sharingTypes.ROLE:return sharingPrefix+" Roles";case PublishedSitesvue_type_script_lang_js_sharingTypes.PEOPLE:return sharingPrefix+" Peoples";case PublishedSitesvue_type_script_lang_js_sharingTypes.BUILDING:return sharingPrefix+" Buildings";default:return"---"}}return"---"}},methods:{showMoreDialog:function(){this.showMore=!0},closeDialog:function(){this.showMore=!1}}},components_PublishedSitesvue_type_script_lang_js=PublishedSitesvue_type_script_lang_js,PublishedSites_component=(0,componentNormalizer/* default */.Z)(components_PublishedSitesvue_type_script_lang_js,render,staticRenderFns,!1,null,"f039f808",null)
/* harmony default export */,PublishedSites=PublishedSites_component.exports},
/***/15482:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/noData-light.3b5d6592.png";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/85652.js.map