"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[60931],{
/***/664328:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return EnergyCost}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/static/EnergyCost.vue?vue&type=template&id=68eba6b7
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("shimmer-loading",{attrs:{config:{type:"form"}}}):_c("div",{staticClass:"dragabale-card energy-cost h100"},[_c("div",{staticClass:"engery-contanier-first1 db-container1 h100"},[_c("div",{staticClass:"f14 fw6 h100 uppercase f16 mobile-energy-card-H",staticStyle:{padding:"8% 20% 10px","letter-spacing":"1.5px","font-size":"1vw"}},[_c("center",[_vm._v(_vm._s(_vm.$t("panel.card.cst")))])],1),_c("div",{staticClass:"gauge-container"},[_c("div",{staticClass:"gauge-a"}),_c("div",{staticClass:"gauge-b"}),_c("div",{staticClass:"gauge-bg"}),_c("div",{staticClass:"gauge-c",style:"transform:rotate("+_vm.data.currentMonthPercent+"deg);"},[_c("div",{staticClass:"c-radius"})]),_c("div",{staticClass:"gauge-cg"}),_c("div",{staticClass:"gauge-d",style:"transform:rotate("+_vm.data.lastMonthPercent+"deg);"},[_c("div",{staticClass:"d-radius"})]),_c("div",{staticClass:"gauge-dg"}),_c("div",{staticClass:"gauge-datag"}),_c("div",{staticClass:"gauge-data"},[_c("div",{staticClass:"inner-unit mobile-inner-unit"},[_c("span",{staticClass:"value mobile-energy-value"},[_vm._v(_vm._s(_vm.data.currentMonth))]),_c("span",{staticClass:"unit mobile-energy-unit"},[_vm._v(" "+_vm._s(_vm.$currency))])]),_c("div",{staticClass:"thisMonth uppercase mobile-energy-thismonth"},[_vm._v(" "+_vm._s(_vm.$t("panel.card.this_month"))+" ")]),_c("div",{staticClass:"date mobile-energy-date"},[_vm._v(_vm._s(_vm.data.thismonth))])])]),_c("center",{staticClass:"energy-cost-divider"},[_c("div",{staticClass:"divider",staticStyle:{width:"30%",opacity:"0.1","border-bottom":"solid 1px #ffffff",height:"1px"}})]),_c("center",{staticClass:"cost-lastmonth"},[_c("div",{staticClass:"cost-lastmonth-span"},[_vm.buildingDetails.data.previousVal.cost?_c("span",{staticClass:"lastmonth-value mobile-lastmonth-value"},[_vm._v(_vm._s(_vm.data.lastMonth)),_c("span",{staticClass:"prev-val mobile-energy-prev-val"},[_vm._v(" "+_vm._s(_vm.$currency))])]):_c("span",{staticClass:"lastmonth-value"},[_vm._v("0")])]),_c("div",{staticClass:"secondarytext-color lastmonth mobile-energy-lastmonth"},[_vm._v(" "+_vm._s(_vm.$t("panel.card.last_month"))+" ")]),_c("div",{staticClass:"date mobile-energy-date"},[_vm._v(_vm._s(_vm.data.lastMonthThisDate))])])],1)])},staticRenderFns=[],moment_timezone=(__webpack_require__(897389),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),ShimmerLoading=__webpack_require__(516400),EnergyCostvue_type_script_lang_js={props:["widget","currentDashboard"],data:function(){return{buildingDetails:{loading:!1,data:[]},data:[],loading:!0,guagestyle:{width:"200",height:"100"},configGuage:{color:["#b671bc","#f17791"],height:150,data:[{text:"$3456 M",subText:"November 2017",fillTicks:13,majorTicks:30,unit:this.$currency}]}}},components:{shimmerLoading:ShimmerLoading/* default */.Z},computed:{buildingId:function(){return this.currentDashboard?"dsoem1dailyconsumption"===this.currentDashboard.linkName?616227:this.currentDashboard.buildingId:"dsoem1dailyconsumption"===this.$route.params.dashboardlink?616227:this.$route.params.buildingid?parseInt(this.$route.params.buildingid):void 0}},mounted:function(){this.loadBuildingDetails()},methods:{loadBuildingDetails:function(){var self=this;self.buildingDetails.loading=!0,self.loading=!0;var formData=new FormData;formData.append("buildingId",self.buildingId),self.$http.post("/report/energy/building/getBuildingDetails",formData).then((function(response){self.demoData(response.data.reportData.currentVal,response.data.reportData.previousVal),self.loadcardData();var reportData=response.data.reportData,daycount=moment_timezone_default()().endOf("month").format("DD")-1,todaydate=moment_timezone_default()(new Date).format("DD"),guagedata=[{text:Math.round(reportData.currentVal.cost)?Math.round(reportData.currentVal.cost):0+reportData.currentVal.currency,subText:self.$helpers.weekly("month"),fillTicks:todaydate,majorTicks:daycount,costUnit:"$",valueUnit:""}];self.configGuage.data=guagedata,guagedata.costUnit=response.data.reportData.currentVal.currency,guagedata.valueUnit=response.data.reportData.currentVal.costUnits,self.buildingDetails.data=reportData,self.buildingDetails.arrow=self.$helpers.arrowHandleClass(reportData.variance),self.purpose=reportData.purpose,self.loading=!1})).catch((function(error){
// self.energyConsumption.loading = false
self.loading=!1})),self.buildingDetails.loading=!1},loadcardData:function(){var self=this;self.loading=!0;var params={widgetId:self.widget.id,reportSpaceFilterContext:{buildingId:self.buildingId}};self.$http.post("dashboard/getCardData",params).then((function(response){self.data=self.prepareData(response.data.cardResult),self.loading=!1})).catch((function(error){})),self.loading=!1},demoData:function(current,last){var d={};" K"===current.costUnits?d.currentMonth=1e3*parseInt(current.cost):d.currentMonth=parseInt(current.cost)," K"===last.costUnits?d.lastMonth=1e3*parseInt(last.cost):d.lastMonth=parseInt(last.cost),this.data=this.prepareData(d)},prepareData:function(data){var d={};data.currentMonth>1e3?d.currentMonth=(data.currentMonth/1e3).toFixed(1)+"k":d.currentMonth=data.currentMonth.toFixed(1),data.lastMonth>1e3?d.lastMonth=(data.lastMonth/1e3).toFixed(1)+"k":d.lastMonth=data.lastMonth.toFixed(1),data.currentMonth>data.lastMonth?d.maxrange=data.currentMonth:d.maxrange=data.lastMonth;var lastMonthmills=data.lastMonthDate?data.lastMonthDate:moment_timezone_default()().tz(this.$timezone).add(-1,"month").valueOf();data.lastMonthThisDate?data.lastMonthThisDate>1e3?d.lastMonthThisDate=(data.lastMonthThisDate/1e3).toFixed(1)+" k as on "+moment_timezone_default()(lastMonthmills).tz(this.$timezone).format("Do MMM"):d.lastMonthThisDate=data.lastMonthThisDate+" as on "+moment_timezone_default()(lastMonthmills).tz(this.$timezone).format("Do MMM"):d.lastMonthThisDate="",d.currentMonthPercent=this.degToPer(d.maxrange,data.currentMonth),d.lastMonthPercent=this.degToPer(d.maxrange,data.lastMonthThisDate),d.thismonth="as on "+moment_timezone_default()().tz(this.$timezone).format("Do MMM");var currentDay=moment_timezone_default()().tz(this.$timezone).format("D"),LastMonthDay=moment_timezone_default()().tz(this.$timezone).subtract(1,"month").endOf("month").format("D");return parseInt(currentDay)>parseInt(LastMonthDay)&&(d.lastMonthThisDate="",d.lastMonthPercent=this.degToPer(d.maxrange,data.lastMonth)),d},degToPer:function(range,value){return 178/range*value}}},static_EnergyCostvue_type_script_lang_js=EnergyCostvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(static_EnergyCostvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EnergyCost=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/60931.js.map