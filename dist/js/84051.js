(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[84051,17047,48728,87492],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/479374:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return type1_Config}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/card-builder/cards/kpi/type1/Config.vue?vue&type=template&id=cc3b4082
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"p30"},[_c("div",{staticClass:"header"},[_c("span",{staticClass:"pointer",on:{click:_vm.onGoBack}},[_c("inline-svg",{staticClass:"vertical-top rotate-90 mR20",attrs:{src:"svgs/arrow",iconClass:"icon"}})],1),_vm._v(" "+_vm._s(_vm.cardMeta&&_vm.cardMeta.name||"KPI Layout")+" "),_c("span",{staticClass:"pointer",on:{click:_vm.onClose}},[_c("inline-svg",{staticClass:"vertical-middle fR",attrs:{src:"svgs/close",iconClass:"icon icon-sm"}})],1)]),_c("div",{staticClass:"container mT20"},[_c("div",{staticClass:"section config-panel panel-scroll"},[_c("el-form",{ref:this.cardLayout+"_form",attrs:{model:_vm.cardDataObj,rules:_vm.validationRules,"label-position":"top"}},[_c("el-tabs",{staticClass:"card-tab-fixed",model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_c("el-tab-pane",{attrs:{label:"Config",name:"config"}},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"title"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.header.builder_title"))+" ")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:_vm.isNew},on:{change:function($event){_vm.cardStateObj.expression.name=_vm.cardDataObj.title}},model:{value:_vm.cardDataObj.title,callback:function($$v){_vm.$set(_vm.cardDataObj,"title",$$v)},expression:"cardDataObj.title"}})],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"reading"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:_vm.$t("common.header.please_select_period")},on:{change:function($event){_vm.setDateRange,_vm.typeChange=!0}},model:{value:_vm.cardDataObj.kpiType,callback:function($$v){_vm.$set(_vm.cardDataObj,"kpiType",$$v)},expression:"cardDataObj.kpiType"}},[_vm._l(_vm.kpiTypes,(function(value,key){return[_c("el-option",{key:key,attrs:{label:key,value:value}})]}))],2)],1)],1)],1),"reading"===_vm.cardDataObj.kpiType?[_c("ReadingKpiPicker",{attrs:{initialReading:_vm.cardDataObj.kpi,clearData:_vm.typeChange},on:{onReadingSelect:function(reading){return _vm.setReading("kpi",reading)}}}),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"dateRange"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.period"))+" ")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:_vm.$t("common.header.please_select_period")},model:{value:_vm.cardDataObj.dateRange,callback:function($$v){_vm.$set(_vm.cardDataObj,"dateRange",$$v)},expression:"cardDataObj.dateRange"}},[_vm._l(_vm.dateOperators,(function(dateRange,index){return[_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})]}))],2)],1)],1)],1)]:[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10"},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.products.choose_module"))+" ")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{filterable:"",placeholder:_vm.$t("common.header.please_select_a_module")},on:{change:_vm.onModuleChange},model:{value:_vm.cardDataObj.moduleName,callback:function($$v){_vm.$set(_vm.cardDataObj,"moduleName",$$v)},expression:"cardDataObj.moduleName"}},[_vm._l(_vm.Moduleobj,(function(mod,index){return[_c("el-option",{key:index,attrs:{label:mod.displayName,value:mod.name}})]}))],2)],1)],1),_c("el-col",{attrs:{span:24}},[_c("ReadingKpiPicker",{attrs:{type:"moduleKPI",initialReading:_vm.cardDataObj.kpi,moduleId:_vm.kpiModuleId,clearData:_vm.typeChange},on:{onModuleKpiSelect:function(moduleKpi){return _vm.handleModuleKpi(moduleKpi)},onReadingSelect:function(reading){return _vm.setReading("kpi",reading)}}})],1),_vm.cardDataObj.dateRange?_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"dateRange"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.period"))+" ")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:_vm.$t("common.header.please_select_period")},model:{value:_vm.cardDataObj.dateRange,callback:function($$v){_vm.$set(_vm.cardDataObj,"dateRange",$$v)},expression:"cardDataObj.dateRange"}},[_vm._l(_vm.dateOperators,(function(dateRange,index){return[_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})]}))],2)],1)],1):_vm._e(),_c("el-col",{attrs:{span:22}},[_c("el-form-item",{staticClass:"mB10"},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.sub_text"))+" ")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:_vm.isNew,clearable:""},model:{value:_vm.cardDataObj.subText,callback:function($$v){_vm.$set(_vm.cardDataObj,"subText",$$v)},expression:"cardDataObj.subText"}})],1)],1),_c("el-col",{attrs:{span:2}},[_c("el-form-item",{staticClass:"mB10 mT25"},[_c("p",{staticClass:"fc-input-label-txt pB5"}),_c("el-popover",{attrs:{placement:"right",width:"250",trigger:"click","popper-class":"f-popover"},model:{value:_vm.showInsertVariablePopover,callback:function($$v){_vm.showInsertVariablePopover=$$v},expression:"showInsertVariablePopover"}},[_c("div",{staticClass:"graphics-insert-variable-container"},[_c("div",{staticClass:"graphics-insert-variable-title"},[_vm._v(" "+_vm._s(_vm.$t("common.products.insert_variable"))+" ")]),_c("div",{staticClass:"graphics-insert-variable-filter"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("common._common.filter_variables")},model:{value:_vm.filterVariablesInput,callback:function($$v){_vm.filterVariablesInput=$$v},expression:"filterVariablesInput"}})],1),_vm.previewData.value.fields?_c("div",{staticClass:"graphics-insert-variable-list"},[_c("ul",_vm._l(_vm.previewData.value.fields.filter((function(v){return!_vm.filterVariablesInput||v.name.toLowerCase().indexOf(_vm.filterVariablesInput.toLowerCase())>=0})),(function(v,index){return _c("li",{key:index,on:{click:function($event){_vm.cardDataObj.subText=_vm.cardDataObj.subText+" ${"+v.name+"}",_vm.showInsertVariablePopover=!1}}},[_vm._v(" "+_vm._s(v.displayName)+" ")])})),0)]):_vm._e()]),_c("el-tooltip",{staticClass:"item",attrs:{slot:"reference",effect:"dark",content:_vm.$t("common.products.insert_variable"),placement:"top"},slot:"reference"},[_c("el-button",{staticStyle:{padding:"2px 8px","font-size":"24px"},attrs:{icon:"el-icon-s-order",type:"text"}})],1)],1)],1)],1)],1)]],2),_c("el-tab-pane",{attrs:{label:_vm.$t("common.products.styles"),name:"styles"}},[_c("el-row",{staticClass:"mB10 mT20"},[_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"primaryColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.header.primary_text"))+" ")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"primaryColor"+_vm.cardStateObj.styles.primaryColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.primaryColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"primaryColor",$$v)},expression:"cardStateObj.styles.primaryColor"}})],1)])],1),_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"secondaryColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.header.secondary_text"))+" ")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"secondaryColor"+_vm.cardStateObj.styles.secondaryColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.secondaryColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"secondaryColor",$$v)},expression:"cardStateObj.styles.secondaryColor"}})],1)])],1),_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"backgroundColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.products.background_color"))+" ")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"backgroundColor"+_vm.cardStateObj.styles.backgroundColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.backgroundColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"backgroundColor",$$v)},expression:"cardStateObj.styles.backgroundColor"}})],1)])],1)],1),_c("el-row",{staticClass:"mB10 mT20"},[_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"backgroundColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.products.decimal_place"))+" ")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:_vm.$t("common.header.please_select_decimal_place")},model:{value:_vm.cardStateObj.styles.decimalPlace,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"decimalPlace",$$v)},expression:"cardStateObj.styles.decimalPlace"}},[_vm._l(_vm.decimalPlaces,(function(value,key){return[_c("el-option",{key:key,attrs:{label:key,value:value}})]}))],2)],1)],1),_c("el-col",{attrs:{span:16}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"backgroundColor"}},[_c("unit-picker",{staticClass:"pL10",attrs:{unitConfig:_vm.cardStateObj.styles.unitConfig}})],1)],1)],1)],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common.products.actions"),name:"actions"}},[_vm.cardActionsMount?_c("ActionPicker",{ref:"action-picker",attrs:{definedActionTypes:_vm.definedActionTypes,variables:_vm.variables,moduleName:_vm.cardDataObj.moduleName,elements:[{name:"default",displayName:"None"}]},model:{value:_vm.cardActions,callback:function($$v){_vm.cardActions=$$v},expression:"cardActions"}},[_c("template",{slot:"element-title"},[_c("div",{staticClass:"pT15"})])],2):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common.wo_report.formatting"),name:"conditionalformatting"}},[_c("div",{staticClass:"card-builder-criteria-block"},[_c("ConditionalFormating",{ref:"conditional-formatting",attrs:{variables:_vm.conditionalVariables,cardData:_vm.previewData,cardStyles:_vm.cardStateObj.styles},model:{value:_vm.conditionalFormatting,callback:function($$v){_vm.conditionalFormatting=$$v},expression:"conditionalFormatting"}})],1)]),_vm.nameSpaces.length?_c("el-tab-pane",{attrs:{label:"CUSTOM SCRIPT"}},[_c("div",{staticClass:"p10"},[_c("el-checkbox",{on:{change:function($event){return _vm.changescriptModeInt()}},model:{value:_vm.enableBoxchecked,callback:function($$v){_vm.enableBoxchecked=$$v},expression:"enableBoxchecked"}},[_vm._v("Enable Custom Script")]),1==_vm.enableBoxchecked?_c("div",{staticClass:"mT30"},[_vm.nameSpaces.length?_c("div",[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Select Function ")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:"Please Select a Script"},model:{value:_vm.customScriptId,callback:function($$v){_vm.customScriptId=$$v},expression:"customScriptId"}},_vm._l(_vm.nameSpaces,(function(nameSpace,index){return _c("el-option-group",{key:index,attrs:{label:nameSpace.name}},_vm._l(nameSpace.functions,(function(func,index){return _c("el-option",{key:index,attrs:{label:func.name,value:func.id}})})),1)})),1)],1):_c("div",{staticClass:"fc-input-label-txt mT30"},[_vm._v(" No functions available. Kindly add some functions and check. ")])]):_vm._e()],1)]):_vm._e()],1)],1)],1),_c("div",{staticClass:"preview-panel section"},[_c("div",{staticClass:"card-wrapper"},[_c("Card",{attrs:{cardData:_vm.previewData,cardState:_vm.previewState,isLoading:_vm.isPreviewLoading,cardParams:_vm.cardDataObj}})],1)])]),_c("div",{staticClass:"d-flex mT-auto form-action-btn"},[_c("el-button",{staticClass:"form-btn f13 bold secondary text-center text-uppercase",on:{click:function($event){return _vm.onGoBack()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"form-btn f13 bold primary m0 text-center text-uppercase",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v(_vm._s(_vm.$t("common._common._save")))])],1)])},staticRenderFns=[],defineProperty=__webpack_require__(482482),createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),toConsumableArray=__webpack_require__(488478),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(634338),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(947522),__webpack_require__(186466),__webpack_require__(670560),__webpack_require__(420629)),NewDateHelper=__webpack_require__(105534),Config=__webpack_require__(760184),Card=__webpack_require__(710612),card_constants=__webpack_require__(806186),KpiReadingPicker=__webpack_require__(636783),api=__webpack_require__(32284),validation=__webpack_require__(990260),isString=__webpack_require__(747037),isString_default=__webpack_require__.n(isString),Configvue_type_script_lang_js={name:"KpiCard1",extends:Config/* default */.Z,components:{Card:Card/* default */.Z,ReadingKpiPicker:KpiReadingPicker/* default */.Z},data:function(){return{typeChange:!1,Moduleobj:[],cardLayout:"kpicard_layout_1",kpiTypes:card_constants/* kpiTypes */.Gy,showInsertVariablePopover:!1,filterVariablesInput:"",cardActionsMount:!0,moduleKpi:[],resourceProps:["title","kpiType","kpi",{prop:"kpi",resourceProps:["kpiId","yAggr"]},"dateRange","subText","moduleName"],readingTypes:{Asset:"asset",Space:"space"},modules:[{label:"Maintenance",moduleName:"workorder",license:"MAINTENANCE"},{label:"FDD",moduleName:this.$helpers.isLicenseEnabled("NEW_ALARMS")?"newreadingalarm":"alarm",license:"ALARMS"},{label:"Building performance",moduleName:"energydata",license:"ENERGY"},{label:"Asset",moduleName:"asset",license:"SPACE_ASSET"},{label:"Inventory Request",moduleName:"inventoryrequest",list:[],expand:!1,license:"INVENTORY"},{label:"Item",moduleName:"item",list:[],expand:!1,license:"INVENTORY"},{label:"Contracts",moduleName:"contracts",list:[],expand:!1,license:"CONTRACT"},{label:"Purchaseorder",moduleName:"purchaseorder",list:[],expand:!1,license:"PURCHASE"},{label:"Purchaserequest",moduleName:"purchaserequest",list:[],expand:!1,license:"PURCHASE"},{label:"Visit",moduleName:"visitorlog",list:[],expand:!1,license:"VISITOR"},{label:"contact",moduleName:"contact",list:[],expand:!1,license:"VISITOR"},{label:"Watchlist",moduleName:"watchlist",list:[],expand:!1,license:"VISITOR"},{label:"Visitor",moduleName:"visitor",list:[],expand:!1,license:"VISITOR"}],metrics:[],kpiList:[],cardStateObj:{canResize:!0,styles:{primaryColor:"#110d24",secondaryColor:"#969caf",backgroundColor:"#FFF",decimalPlace:-1,unitConfig:{unit:null,position:2}},modulekpi:{moduleName:null,kpiId:null},expression:{name:"test",aggr:3,metricId:-1,moduleName:"workorder",siteId:null,dateOperator:22,dateValue:"".concat(NewDateHelper/* default */.Z.getDatePickerObject(22).value[0],",").concat(NewDateHelper/* default */.Z.getDatePickerObject(22).value[1]," "),dateFieldId:null,criteria:{pattern:"(1)",conditions:{1:{fieldName:"__vue_devtool_undefined__",value:"__vue_devtool_undefined__",columnName:"__vue_devtool_undefined__",operatorId:-1}},resourceOperator:!1}}},cardActions:{default:{actionType:"none"}},cardDataObj:{title:"",kpiType:"reading",reading:{parentType:"asset",assetCategory:null,kpiId:null},kpi:null,moduleName:null,moduleId:null,dateRange:"Today",aggr:"avg",subText:""},kpiModule:{moduleName:null,expression:{},aggregateString:"count"},toggleMetricAggregation:!1,timeFields:[],aggregateFunctions:card_constants/* aggregateFunctions */.rD,dateOperators:card_constants/* dateOperators */._M}},created:function(){this.$store.dispatch("loadAssetCategory"),this.loadModules()},mounted:function(){this.validationCheck(),this.getKpiList(),this.loadModuleFields()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory},sites:function(state){return state.sites}})),{},{kpiModuleId:function(){var _this=this;if(this.Moduleobj&&this.Moduleobj.length){var kpiModule=this.Moduleobj.find((function(rt){return rt.name===_this.cardDataObj.moduleName}));if(null!==kpiModule&&void 0!==kpiModule&&kpiModule.moduleId)return kpiModule.moduleId}return null},definedActionTypes:function(){var type=this.cardDataObj.kpiType;return"reading"===type?["hyperLink","controlAction","none","showTrend","showReport"]:["hyperLink","controlAction","none","showListView","showReport"]},AssetFilteredKpiList:function(){var _this2=this;return"asset"===this.cardDataObj.reading.parentType?this.kpiList.filter((function(rt){return rt.assetCategoryId===_this2.cardDataObj.reading.assetCategory})):this.kpiList},metric:function(){var _this3=this;return this.data&&this.cardStateObj.expression.aggr?this.metrics.find((function(rt){return rt.id===_this3.cardStateObj.expression.metricId})):this.metrics.length?this.metrics[0]:null},variables:function(){var variables=this.previewData.variables;return variables||[]}}),methods:{validationCheck:function(){var operatorId=this.$getProperty(this,"cardStateObj.expression.criteria.conditions.1.operatorId",null);"__vue_devtool_undefined__"===operatorId&&(this.cardStateObj.expression.criteria.conditions[1].operatorId=-1);var decimalPlace=this.$getProperty(this,"cardStateObj.styles.decimalPlace",null);"Auto"===decimalPlace&&(this.cardStateObj.styles.decimalPlace=-1)},loadModules:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url,_yield$API$get,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return url="/v3/modules/list/all",_context.next=3,api/* API */.bl.get(url);case 3:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?(message=error.message,_this4.$message.error(message)):Object.values(data).forEach((function(value){var _this4$Moduleobj;(_this4$Moduleobj=_this4.Moduleobj).push.apply(_this4$Moduleobj,(0,toConsumableArray/* default */.Z)(value))}));case 7:case"end":return _context.stop()}}),_callee)})))()},getCardActions:function(){},setDateRange:function(){var _this$cardDataObj,_this5=this,type=this.cardDataObj.kpiType;"reading"===type?(this.cardDataObj.dateRange=null!==this&&void 0!==this&&null!==(_this$cardDataObj=this.cardDataObj)&&void 0!==_this$cardDataObj&&_this$cardDataObj.dateRange?this.cardDataObj.dateRange:"Today",this.cardActions={default:{actionType:"showTrend"}}):this.cardActions={default:{actionType:"showListView",data:{target:"popup"}}};this.cardActionsMount=!1,setTimeout((function(){_this5.cardActionsMount=!0}),500)},serializeProperty:function(prop,data){if("kpi"===prop)return data.kpi},customValidation:function(){var _cardDataObj$kpi,cardDataObj=this.cardDataObj;return!!(null!==cardDataObj&&void 0!==cardDataObj&&null!==(_cardDataObj$kpi=cardDataObj.kpi)&&void 0!==_cardDataObj$kpi&&_cardDataObj$kpi.kpiId||cardDataObj.kpis.length>0)||(this.$message.error("Please select kpi"),!1)},validateProperty:function(){return{kpi:function(data){var kpi=data.kpi;return!(void 0!==kpi&&!(0,validation/* isEmpty */.xb)(kpi))},dateRange:function(){return!1},subText:function(){return!1},moduleName:function(){return!1}}},onModuleChange:function(){var _this6=this;if(this.cardDataObj.moduleName){var moduleRecord=this.Moduleobj.find((function(m){return m.name==_this6.cardDataObj.moduleName}));moduleRecord&&(this.cardDataObj.moduleId=moduleRecord.moduleId)}},handleModuleKpi:function(moduleKpiObj){moduleKpiObj&&moduleKpiObj.id&&moduleKpiObj.dateOperator&&moduleKpiObj.dateOperator>0&&(this.cardDataObj.dateRange=this.dateOperators.find((function(rl){return rl.enumValue===moduleKpiObj.dateOperator})).value)},addKpi:function(){var _this7=this;this.$http.post("/v2/kpi/module/addOrUpdate",{kpi:this.cardStateObj.expression}).then((function(response){_this7.setKpiResult(response.data.result)}))},setKpiResult:function(result){if(result.kpi){var kpi=result.kpi,obj={kpiId:kpi.id,yAggr:this.aggregateFunctions.find((function(rt){return rt.enumValue===kpi.aggr})).value};this.$set(this.cardDataObj,"kpi",obj),this.getData()}},setDateValue:function(){this.cardStateObj.expression.dateValue="".concat(NewDateHelper/* default */.Z.getDatePickerObject(this.cardStateObj.expression.dateOperator).value[0],",").concat(NewDateHelper/* default */.Z.getDatePickerObject(this.cardStateObj.expression.dateOperator).value[1]," ")},setMetricAggregation:function(agg){this.cardStateObj.expression.aggr=agg.enumValue,this.toggleMetricAggregation=!1},getModuleObject:function(moduleMetaObject){this.moduleMetaObject=moduleMetaObject},getCriteria:function(criteria){this.cardStateObj.expression.criteria=criteria},showMetricAggregation:function(metric){return!metric||!metric.defaultMetric||(this.toggleMetricAggregation=!1,!1)},loadModuleFields:function(){var _this8=this;this.loading=!0,this.$http.post("/v2/report/getReportFields",{moduleName:this.cardStateObj.expression.moduleName}).then((function(response){_this8.prepareMetrics(response.data.result),_this8.getTimeFields(response.data.result),_this8.loading=!1}))},getTimeFields:function(result){result.meta&&result.meta.dimension&&result.meta.dimension.time&&(this.timeFields=result.meta.dimension.time)},prepareMetrics:function(result){var _this9=this;if(this.metrics=[],result&&result.meta&&result.meta.metrics){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(result.meta.metrics);try{for(_iterator.s();!(_step=_iterator.n()).done;){var metric=_step.value;"actualWorkDuration"===metric.name&&(metric.displayName="Work Duration"),this.metrics.push(metric)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var defaultMetric={};defaultMetric["displayName"]="Number of "+this.modules.find((function(rt){return rt.moduleName===_this9.cardStateObj.expression.moduleName})).label+"s",defaultMetric["defaultMetric"]=!0,defaultMetric["fieldId"]=-1,defaultMetric["name"]="count",defaultMetric["id"]=-1,this.metrics.push(defaultMetric)}},getKpiList:function(){var _this10=this,url="/v2/kpi/list?type=1&";this.$http.get(url).then((function(_ref){var data=_ref.data;0===data.responseCode&&(_this10.kpiList=data.result.formulaList)}))},setReading:function(prop,reading){var cardDataObj=this.cardDataObj,kpiId=reading.kpiId;if("reading"===(null===cardDataObj||void 0===cardDataObj?void 0:cardDataObj.kpiType)){var readingNew=this.$helpers.cloneObject(reading),_kpiId=readingNew.kpiId;isString_default()(_kpiId)&&(readingNew.kpiId=parseInt(_kpiId.split("_")[0])),this.$set(this,"cardDataObj",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},cardDataObj),{},(0,defineProperty/* default */.Z)({},prop,readingNew)))}else this.$set(this,"cardDataObj",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},cardDataObj),{},(0,defineProperty/* default */.Z)({},prop,reading)));this.$set(reading,"kpiId",kpiId),this.setConditionalVariables(reading)}}},type1_Configvue_type_script_lang_js=Configvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(type1_Configvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,type1_Config=component.exports},
/***/667527:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"00e2f8b54392f5c9d15bf4a60fcf5285.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/84051.js.map