(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[10189],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/494177:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return EventDialogHelper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/EventDialogHelper.vue?vue&type=template&id=b889d4a4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("send-notification",{ref:"notificationpage",staticClass:"ruleDialog",attrs:{visibility:_vm.actionEdit,mode:_vm.actionMode,option:_vm.actionData,rule:_vm.rule,module:_vm.module},on:{"update:visibility":function($event){_vm.actionEdit=$event},"update:mode":function($event){_vm.actionMode=$event},onsave:_vm.actionSave}}),_vm.showMobileConfig?_c("push-notification",{ref:"push-notification",attrs:{actionObj:_vm.mobileContent,moduleName:_vm.module,metaFields:_vm.fields},on:{onClose:_vm.closeNotifiDialog,onSave:_vm.actionSave}}):_vm._e(),_c("el-row",[_c("el-col",{staticClass:"utility-block",attrs:{span:20}},[_c("p",{staticClass:"subHeading-pink-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.action"))+" ")]),_c("p",{staticClass:"small-description-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.set_corresponding_rule"))+" ")])])],1),_vm.actions.includes("email")?_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v(_vm._s(_vm.$t("setup.setupLabel.send_email")))]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.send_email_desc"))+" "),_c("br"),_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.send_email_desc_continue"))+" ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isEmailConfi?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){!_vm.isEmailConfi&&_vm.addAction("mail")}}},[_vm._v(_vm._s(_vm.isEmailConfi?"Configured":"Configure"))]),_vm.isEmailConfi?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Mail"},on:{click:function($event){return _vm.editAction(_vm.emailContext)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("mail")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),_vm.workPermitActionPhone?_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Make a Call")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will make a "),_c("br"),_vm._v(" call based on the criteria ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isPhoneCallConfi?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){!_vm.isPhoneCallConfi&&_vm.addAction("phonecall")}}},[_vm._v(_vm._s(_vm.isPhoneCallConfi?"Configured":"Configure"))]),_vm.isPhoneCallConfi?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Phone Call"},on:{click:function($event){return _vm.editAction(_vm.phoneCallContext)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("phonecall")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),_vm.actions.includes("sms")&&_vm.$helpers.isLicenseEnabled("SMS")?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Send SMS")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will send an "),_c("br"),_vm._v(" sms based on the criteria ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isSmsConfi?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){!_vm.isSmsConfi&&_vm.addAction("sms")}}},[_vm._v(_vm._s(_vm.isSmsConfi?"Configured":"Configure"))]),_vm.isSmsConfi?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Sms"},on:{click:function($event){return _vm.editAction(_vm.smsContent)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("sms")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),(_vm.workPermitActionWhatsapp,_vm._e()),("alarm"!==_vm.module||[1,1024,1025].includes(parseInt(_vm.rule.rule.event.activityType)))&&_vm.actions.includes("mobile")&&"agentAlarm"!=_vm.module?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Send In-app Notification")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will send "),_c("br"),_vm._v(" notification based on the criteria ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isMobileConfig?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){!_vm.isMobileConfig&&_vm.addAction("mobile")}}},[_vm._v(_vm._s(_vm.isMobileConfig?"Configured":"Configure"))]),_vm.isMobileConfig?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Mobile"},on:{click:function($event){return _vm.editAction(_vm.mobileContent)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("mobile")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),2048!==parseInt(_vm.rule.rule.event.activityType)&&_vm.actions.includes("createwo")?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Create Workorder")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will "),_c("br"),_vm._v(" create workorder based on the criteria ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isWOConfi?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){_vm.isWOConfi||_vm.addAction("workorder"),_vm.createworkorderDialog=!0}}},[_vm._v(_vm._s(_vm.isWOConfi?"Configured":"Configure"))]),_vm.isWOConfi?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit WorkOrder"},on:{click:function($event){return _vm.editAction(_vm.alarmWo)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("wo")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm.actions.includes("closewo")?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Close Workorder")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will close the workorder ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isWoCloseConfig?"success-green-btn":"small-border-btn",style:"min-width:78px;",attrs:{type:"button"},on:{click:function($event){!_vm.isWoCloseConfig&&_vm.actionSave(_vm.closeWo)}}},[_vm._v(_vm._s(_vm.isWoCloseConfig?"Enabled":"Enable"))]),_vm.isWoCloseConfig?_c("span",{staticClass:"mL10"},[_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("woClose")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),_vm.actions.includes("fieldUpdate")?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Field Update")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will update "),_c("br"),_vm._v(" field value based on the criteria ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isFieldConfi?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){_vm.isFieldConfi||_vm.addAction("fieldChange"),_vm.fieldUpdateValue=!0}}},[_vm._v(_vm._s(_vm.isFieldConfi?"Configured":"Configure"))]),_vm.isFieldConfi?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Field"},on:{click:function($event){return _vm.editAction(_vm.fieldContext)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("fieldChange")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),_vm.actions.includes("script")?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Execute Script")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will execute "),_c("br"),_vm._v(" script based on the criteria ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isScriptConfigured?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){_vm.isScriptConfigured||_vm.addAction("script"),_vm.showScriptDialog=!0}}},[_vm._v(_vm._s(_vm.isScriptConfigured?"Configured":"Configure"))]),_vm.isScriptConfigured?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Script"},on:{click:function($event){return _vm.editAction(_vm.scriptData)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("script")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),_vm.actions.includes("changeStatus")?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Change Status")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" The system will change "),_c("br"),_vm._v(" status based on the criteria ")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isStatusConfigured?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){_vm.isStatusConfigured||_vm.addAction("changeStatus"),_vm.openStatusDialog=!0}}},[_vm._v(_vm._s(_vm.isStatusConfigured?"Configured":"Configure"))]),_vm.isStatusConfigured?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Status"},on:{click:function($event){return _vm.editAction(_vm.changeStatus)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("changeStatus")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),_vm.$helpers.isLicenseEnabled("CONTROL_ACTIONS")&&_vm.actions.includes("controls")?_c("el-row",{staticClass:"mT20 border-top-grey pT20"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v("Control")]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(" Control actions "),_c("br")])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:_vm.isControlConfi?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){_vm.isControlConfi||_vm.addAction("controls"),_vm.controlsAction=!0}}},[_vm._v(_vm._s(_vm.isControlConfi?"Configured":"Configure"))]),_vm.isControlConfi?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Field"},on:{click:function($event){return _vm.editAction(_vm.controlData)}}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:function($event){return _vm.reset("controls")}}},[_vm._v("Reset")])]):_vm._e()],1)],1):_vm._e(),_c("el-dialog",{staticClass:"creteawo-Dialog",attrs:{visible:_vm.createworkorderDialog,width:"28%","append-to-body":!0},on:{"update:visible":function($event){_vm.createworkorderDialog=$event}}},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" Create a Workorder ")]),"workorder"===_vm.actionMode?_c("div",{staticStyle:{"margin-top":"25px"}},[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"workorder-select fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:_vm.alarmWo.templateJson.category.id,callback:function($$v){_vm.$set(_vm.alarmWo.templateJson.category,"id",$$v)},expression:"alarmWo.templateJson.category.id"}},_vm._l(_vm.ticketcategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:parseInt(category.id)}})})),1)],1)],1),_c("el-row",{staticClass:"mT24"},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Team/Staff")]),_c("div",{staticClass:"fc-border-input-div2"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.alarmWo.templateJson)))]),_c("span",{staticStyle:{float:"right"}},[_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{position:"relative",top:"-4px",right:"3px",color:"#c0c4cc"}})]),_c("f-assignment",{attrs:{model:_vm.alarmWo.templateJson,viewtype:"form"}})],1)])],1),_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Priority")]),_c("el-select",{staticClass:"workorder-select fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:_vm.alarmWo.templateJson.priority.id,callback:function($$v){_vm.$set(_vm.alarmWo.templateJson.priority,"id",$$v)},expression:"alarmWo.templateJson.priority.id"}},_vm._l(_vm.ticketpriority,(function(priority){return _c("el-option",{key:priority.priority,attrs:{label:priority.displayName,value:parseInt(priority.id)}})})),1)],1)],1)],1):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.createworkorderDialog=!1}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.actionSave(_vm.alarmWo)}}},[_vm._v("Save")])],1)]),_vm.fieldUpdateValue?_c("field-update-dialog",{attrs:{statusFieldName:_vm.statusFieldName,fieldChange:_vm.fieldChange,moduleFields:_vm.moduleFields,module:_vm.module,picklistOptions:_vm.picklistOptions,addRow:_vm.addRow,actionSave:_vm.actionSave,fieldUpdateValue:_vm.fieldUpdateValue,durationConfig:{minInterval:1}},on:{"update:fieldUpdateValue":function($event){_vm.fieldUpdateValue=$event},"update:field-update-value":function($event){_vm.fieldUpdateValue=$event}}}):_vm._e(),_vm.openStatusDialog?_c("ChangeStatusDialog",{attrs:{actionObj:_vm.changeStatus,moduleName:_vm.module,moduleId:_vm.moduleId},on:{onSave:_vm.actionSave,onClose:function($event){_vm.openStatusDialog=!1}}}):_vm._e(),_vm.showEmailActions?_c("email-action",{ref:"email-notification",attrs:{moduleName:_vm.module,actionObj:_vm.emailContext,rule:_vm.rule.rule},on:{onClose:_vm.closeEmailActions,onSave:_vm.actionSave}}):_vm._e(),_c("el-dialog",{staticClass:"fieldchange-Dialog pB15",attrs:{visible:_vm.controlsAction,width:"40%","append-to-body":!0},on:{"update:visible":function($event){_vm.controlsAction=$event}}},[_c("div",{staticClass:"height400 overflow-y-scroll pB50"},[_c("div",{staticClass:"setup-modal-title mB20"},[_vm._v("Control Action")]),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"workorder-select fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{clearable:""},on:{change:function($event){return _vm.loadCategoryMetric(_vm.controlData.templateJson.assetCategory)}},model:{value:_vm.controlData.templateJson.assetCategory,callback:function($$v){_vm.$set(_vm.controlData.templateJson,"assetCategory",$$v)},expression:"controlData.templateJson.assetCategory"}},_vm._l(_vm.assetCategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:parseInt(category.id)}})})),1)],1)],1),_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Metric")]),_c("el-select",{staticClass:"workorder-select fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:_vm.controlData.templateJson.metric,callback:function($$v){_vm.$set(_vm.controlData.templateJson,"metric",$$v)},expression:"controlData.templateJson.metric"}},_vm._l(_vm.categoryMetric,(function(metric){return _c("el-option",{key:metric.id,attrs:{label:metric.displayName,value:String(metric.id)}})})),1)],1)],1),_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Asset")]),_c("el-select",{staticClass:"workorder-select fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:_vm.controlData.templateJson.resource,callback:function($$v){_vm.$set(_vm.controlData.templateJson,"resource",$$v)},expression:"controlData.templateJson.resource"}},_vm._l(_vm.assets,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.name,value:String(category.id)}})})),1)],1)],1),_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Value")]),_c("f-formula-builder",{staticClass:"rule-condition-formula",staticStyle:{"padding-top":"20px"},attrs:{title:"",module:"workorder",assetCategory:_vm.controlData.templateJson.category,setResultAsExpr:!0},model:{value:_vm.controlData.templateJson.workflow,callback:function($$v){_vm.$set(_vm.controlData.templateJson,"workflow",$$v)},expression:"controlData.templateJson.workflow"}})],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.controlsAction=!1}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.actionSave(_vm.controlData)}}},[_vm._v("Save")])],1)]),_vm.showScriptDialog?_c("ScriptDialog",{attrs:{actionObj:_vm.scriptData,moduleName:_vm.module},on:{onSave:_vm.actionSave,onClose:function($event){_vm.showScriptDialog=!1}}}):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(903650),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(648324),__webpack_require__(420629)),api=__webpack_require__(32284),FAssignment=__webpack_require__(383274),SendNotification=__webpack_require__(617650),FFormulaBuilder=__webpack_require__(902294),NotificationHelper=__webpack_require__(683038),FieldUpdateDialog=__webpack_require__(634559),StatusUpdate=__webpack_require__(292974),picklist=__webpack_require__(961358),ScriptEditor=__webpack_require__(134077),PushNotificationvue_type_template_id_4f945a62_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:!0,fullscreen:!0,title:_vm.title,"append-to-body":!0,"show-close":!1,"custom-class":"pushNotifiDialog","close-on-click-modal":!1}},[_vm.loadingForm?_c("div",{staticClass:"mT10"},_vm._l([1,2,3],(function(index){return _c("el-row",{key:index,staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"lines loading-shimmer width40 mB10"}),_c("div",{staticClass:"lines loading-shimmer width90 mB15 line-h40"})])],1)})),1):_c("el-form",{ref:"push-notification",attrs:{rules:_vm.rules,model:_vm.pushNotification.templateJson}},[_c("el-form-item",{attrs:{label:_vm.$t("common.header.application"),prop:"application"}},[_c("el-select",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{filterable:"",loading:_vm.loadingApps},on:{change:_vm.appSwitch},model:{value:_vm.pushNotification.templateJson.application,callback:function($$v){_vm.$set(_vm.pushNotification.templateJson,"application",$$v)},expression:"pushNotification.templateJson.application"}},_vm._l(_vm.appList,(function(app){return _c("el-option",{key:app.id,attrs:{label:app.name,value:app.id}})})),1)],1),_c("el-form-item",{attrs:{label:_vm.$t("common.products.to"),prop:"to"}},[_c("el-select",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{placeholder:"   "+_vm.$t("common._common.select"),multiple:"",filterable:"","allow-create":!0,loading:_vm.loadingUsers,remote:"","collapse-tags":"","remote-method":_vm.loadToValues},on:{change:function($event){return _vm.changeOnToFields()}},model:{value:_vm.pushNotification.templateJson.to,callback:function($$v){_vm.$set(_vm.pushNotification.templateJson,"to",$$v)},expression:"pushNotification.templateJson.to"}},_vm._l(_vm.userOptionFilteredList,(function(userGrpOptions,userGrpLabel,index){return _c("el-option-group",{key:userGrpLabel+"-"+index,attrs:{label:userGrpLabel}},_vm._l(userGrpOptions,(function(option,optIdx){return _c("el-option",{key:userGrpLabel+"-"+option.value+"-"+optIdx,staticClass:"subject",attrs:{label:option.label,value:option.value}},[_vm._v(" "+_vm._s(option.label)+" ")])})),1)})),1)],1),_c("el-form-item",[_c("div",[_c("div",{staticClass:"fc-green4-label14 pointer",on:{click:function($event){return _vm.openPlaceholderEditor()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.emailTemplates.advanced_merge_fields"))+" ")])])]),_c("el-form-item",{attrs:{label:_vm.$t("common._common.subject"),prop:"subject"}},[_c("el-input",{staticClass:"subject fc-input-full-border2",attrs:{placeholder:_vm.$t("common.placeholders.please_enter_subject"),type:"input"},model:{value:_vm.pushNotification.templateJson.subject,callback:function($$v){_vm.$set(_vm.pushNotification.templateJson,"subject",$$v)},expression:"pushNotification.templateJson.subject"}})],1),_c("el-form-item",{staticClass:"mB0",attrs:{label:_vm.$t("common._common.message"),prop:"message"}},[_c("el-input",{staticClass:"subject fc-input-full-border-select2 notification-txt-area ",attrs:{type:"textarea",placeholder:_vm.$t("common.placeholders.type_your_message"),autosize:{minRows:6,maxRows:6}},model:{value:_vm.pushNotification.templateJson.message,callback:function($$v){_vm.$set(_vm.pushNotification.templateJson,"message",$$v)},expression:"pushNotification.templateJson.message"}})],1),_vm.showCheckIsPush?_c("el-form-item",{staticClass:"flex-middle pB10 mB40"},[_c("el-checkbox",{staticClass:"mT20",model:{value:_vm.pushNotification.templateJson.isPushNotification,callback:function($$v){_vm.$set(_vm.pushNotification.templateJson,"isPushNotification",$$v)},expression:"pushNotification.templateJson.isPushNotification"}},[_vm._v(_vm._s(_vm.$t("setup.notification.send_push_notifications")))])],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",attrs:{type:"button"},on:{click:_vm.cancelDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"button",disabled:_vm.loadingForm},on:{click:_vm.save}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1),_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container fc-dialog-center-body-p0",attrs:{visible:_vm.showPlaceholderEditor,width:"60%",title:_vm.$t("common.products.script"),"append-to-body":!0,"before-close":_vm.closePlaceholder,"close-on-click-modal":!1}},[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("CodeMirror",{attrs:{codeeditor:!0},model:{value:_vm.placeholderString,callback:function($$v){_vm.placeholderString=$$v},expression:"placeholderString"}})],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closePlaceholder}},[_vm._v(_vm._s(_vm.$t("common._common.cancel").toUpperCase()))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.savePlaceholder}},[_vm._v(" "+_vm._s(_vm.$t("common._common.save").toUpperCase())+" ")])],1)])],1)},PushNotificationvue_type_template_id_4f945a62_scoped_true_staticRenderFns=[],slicedToArray=__webpack_require__(554621),router=(__webpack_require__(425728),__webpack_require__(336585),__webpack_require__(564043),__webpack_require__(322462),__webpack_require__(329435)),validation=__webpack_require__(990260),NotificationModel=__webpack_require__(510109),CodeMirror=__webpack_require__(919324),PushNotificationvue_type_script_lang_js={props:["moduleName","actionObj"],components:{CodeMirror:CodeMirror/* default */.Z},data:function(){return{pushNotification:{},placeholderString:"",showPlaceholderEditor:!1,appList:[],loadingApps:!1,searchText:"",loadingUsers:!1,loadingForm:!1,canShowScriptEditor:!1,userFields:[],fields:{},userOptionList:{Users:[],Fields:[],PlaceHolders:[]},rules:{message:{required:!0,message:"".concat(this.$t("common._common.content_should_not_be_empty")),trigger:"change"},to:{required:!0,message:"".concat(this.$t("common._common.add_receiving_address")),trigger:"blur"}}}},created:function(){this.init()},computed:{title:function(){return this.$t("setup.notification.send_notification")},showCheckIsPush:function(){var templateJson=this.pushNotification.templateJson,appId=templateJson.application,_ref=(this.appList||[]).find((function(app){return app.id===appId}))||{},linkName=_ref.linkName,canShowIsPushNotif=["newapp","maintenance","service","tenant","vendor"].includes(linkName);return canShowIsPushNotif},userOptionFilteredList:function(){var arrayedList=Object.entries(this.userOptionList||{}),filteredList=arrayedList.reduce((function(prev,_ref2){var _ref3=(0,slicedToArray/* default */.Z)(_ref2,2),key=_ref3[0],arr=_ref3[1];return(0,validation/* isEmpty */.xb)(arr)||(prev[key]=arr),prev}),{});return filteredList}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$pushNotificatio,_this$actionObj,actionObj,moduleName,appId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loadingForm=!0,_this$actionObj=_this.actionObj,actionObj=void 0===_this$actionObj?{}:_this$actionObj,moduleName=_this.moduleName,_this.pushNotification=new NotificationModel/* NotificationModel */.w((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},actionObj),{},{moduleName:moduleName})),_this.placeholderString=_this.$getProperty(_this.pushNotification,"templateJson.userWorkflow.workflowV2String",""),_context.next=6,_this.loadAvailableApps();case 6:return appId=null===(_this$pushNotificatio=_this.pushNotification)||void 0===_this$pushNotificatio||null===(_this$pushNotificatio=_this$pushNotificatio.templateJson)||void 0===_this$pushNotificatio?void 0:_this$pushNotificatio.application,(0,validation/* isEmpty */.xb)(appId)&&_this.setApplicationId(),_context.next=10,_this.loadUsers();case 10:return _context.next=12,_this.pushNotification.fetchFieldList();case 12:_this.userOptionList.Fields=_context.sent,_this.changeOnToFields(_this.userOptionList),_this.loadingForm=!1;case 15:case"end":return _context.stop()}}),_callee)})))()},openScriptDialog:function(){this.canShowScriptEditor=!0},loadAvailableApps:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loadingApps=!0,_context2.prev=1,_context2.next=4,_this2.pushNotification.fetchAppList();case 4:_this2.appList=_context2.sent,_context2.next=10;break;case 7:_context2.prev=7,_context2.t0=_context2["catch"](1),_this2.$message.error(_context2.t0.message);case 10:_this2.loadingApps=!1;case 11:case"end":return _context2.stop()}}),_callee2,null,[[1,7]])})))()},changeOnToFields:function(alternateList){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var receiverList,fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(receiverList=alternateList||{},!(0,validation/* isEmpty */.xb)(alternateList)){_context3.next=7;break}return receiverList={Users:_this3.userOptionList.Users},_context3.next=5,_this3.pushNotification.fetchFieldList();case 5:fields=_context3.sent,receiverList.Fields=fields;case 7:_this3.userOptionList=_this3.pushNotification.handleAddrChange("to",receiverList);case 8:case"end":return _context3.stop()}}),_callee3)})))()},setApplicationId:function(){var currentAppId=((0,router/* getApp */.wx)()||{}).id,_ref4=this.appList||[],_ref5=(0,slicedToArray/* default */.Z)(_ref4,1),_ref5$=_ref5[0],_ref5$2=void 0===_ref5$?{}:_ref5$,firstAppId=_ref5$2.id;this.pushNotification.templateJson.application=currentAppId||firstAppId},appSwitch:function(){this.$set(this.pushNotification.templateJson,"to",[]),this.loadUsers()},savePlaceholder:function(){this.$set(this.pushNotification.templateJson.userWorkflow,"workflowV2String",this.placeholderString),this.closePlaceholder(!0)},closePlaceholder:function(isSaving){isSaving&&(this.placeholderString=this.$getProperty(this.pushNotification,"templateJson.userWorkflow.workflowV2String","")),this.showPlaceholderEditor=!1},openPlaceholderEditor:function(){this.showPlaceholderEditor=!0},loadToValues:function(search){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _this4$userOptionList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this4.loadUsers(search),_context4.next=3,_this4.pushNotification.fetchFieldList(search);case 3:_this4.userOptionList.Fields=_context4.sent,(0,validation/* isEmpty */.xb)(search)?_this4.userOptionList=_this4.pushNotification.handleAddrChange("to",_this4.userOptionList):(0,validation/* isEmpty */.xb)(null===(_this4$userOptionList=_this4.userOptionList)||void 0===_this4$userOptionList?void 0:_this4$userOptionList.PlaceHolders)||(_this4.userOptionList.PlaceHolders=_this4.searchForValues(search,_this4.userOptionList.PlaceHolders));case 5:case"end":return _context4.stop()}}),_callee4)})))()},searchForValues:function(){var searchTerm=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",searchableList=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],filteredData=searchableList.filter((function(item){var lcLabel=(item.label||"").toLowerCase(),lcSearchTerm=searchTerm.toLowerCase();return lcLabel.match(lcSearchTerm)}));return filteredData},loadUsers:function(){var _arguments=arguments,_this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var search,_yield$_this5$pushNot,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return search=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:"",_this5.loadingUsers=!0,_context5.next=4,_this5.pushNotification.getReceivingUsers(search);case 4:_yield$_this5$pushNot=_context5.sent,data=_yield$_this5$pushNot.data,error=_yield$_this5$pushNot.error,error?_this5.$message.error(error.message||_this5.$t("common._common.error_occured")):_this5.userOptionList.Users=data,_this5.loadingUsers=!1;case 9:case"end":return _context5.stop()}}),_callee5)})))()},cancelDialog:function(){this.closeDialog()},closeDialog:function(){this.$emit("onClose")},save:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var isValid;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return isValid=!1,_context6.prev=1,_context6.next=4,_this6.$refs["push-notification"].validate();case 4:isValid=_context6.sent,_context6.next=10;break;case 7:_context6.prev=7,_context6.t0=_context6["catch"](1),isValid=!1;case 10:if(isValid){_context6.next=12;break}return _context6.abrupt("return");case 12:_this6.saved=!0,_this6.$emit("onSave",_this6.serializeData()),_this6.closeDialog();case 15:case"end":return _context6.stop()}}),_callee6,null,[[1,7]])})))()},serializeData:function(){return this.pushNotification.serialize()}}},components_PushNotificationvue_type_script_lang_js=PushNotificationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PushNotificationvue_type_script_lang_js,PushNotificationvue_type_template_id_4f945a62_scoped_true_render,PushNotificationvue_type_template_id_4f945a62_scoped_true_staticRenderFns,!1,null,"4f945a62",null)
/* harmony default export */,PushNotification=component.exports,EmailActionvue_type_template_id_6d3d41f5_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"ea-container",attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"close-on-click-modal":!1,"show-close":!1},scopedSlots:_vm._u([{key:"title",fn:function(){return[_c("span",[_vm._v(_vm._s(_vm.title))]),_vm.showNewTemplate?_vm._e():_c("div",{staticClass:"fc-pdf-blue-txt-13 pointer pL10 bold fc-underline-hover",on:{click:function($event){return _vm.switchToNewTemplate()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.emailTemplates.switch_to_new_template"))+" ")])]},proxy:!0}])},[_vm.loadingForm?_c("div",{staticClass:"mT10"},_vm._l([1,2,3],(function(index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"lines loading-shimmer width40 mB10"}),_c("div",{staticClass:"lines loading-shimmer width90 mB15 line-h40"})])],1)],1)})),0):_c("el-form",{ref:"email-notifcation",attrs:{rules:_vm.rules,model:this.emailNotification.templateJson}},[_c("el-form-item",{attrs:{label:_vm.$t("asset.performance.from")}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.emailNotification.templateJson.fromAddr,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"fromAddr",$$v)},expression:"emailNotification.templateJson.fromAddr"}},_vm._l(_vm.senderAddr,(function(addr){return _c("el-option",{key:addr.id,staticClass:"subject",attrs:{label:addr.email,value:addr.id}})})),1)],1),_c("el-form-item",{staticClass:"reciever-form-container",attrs:{prop:"to"},scopedSlots:_vm._u([{key:"label",fn:function(){return[_c("div",{staticClass:"grey-text2 pB10"},[_vm._v(_vm._s(_vm.$t("asset.performance.to")))]),_c("div",{staticClass:"flex-middle"},[_vm.showEmailCC?_vm._e():_c("div",{staticClass:"fc-black2-label14 fc-text-underline pointer z-index1",on:{click:function($event){return _vm.openCCField()}}},[_vm._v(" "+_vm._s(_vm.$t("asset.performance.cc"))+" ")]),_vm.showEmailBCC?_vm._e():_c("div",{staticClass:"fc-black2-label14 fc-text-underline pL10 pointer z-index1",on:{click:function($event){return _vm.openBCCField()}}},[_vm._v(" "+_vm._s(_vm.$t("asset.performance.bcc"))+" ")])])]},proxy:!0}])},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 ",attrs:{multiple:"",filterable:"","collapse-tags":"",remote:"",loading:_vm.loadingToReceiver,"remote-method":function(search){return _vm.setReceiverOptions("to",search)},"allow-create":!0,disabled:_vm.emailNotification.isUserNonEditable},on:{change:function($event){return _vm.handleReceiverAddrChange("to")}},model:{value:_vm.emailNotification.templateJson.to,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"to",$$v)},expression:"emailNotification.templateJson.to"}},_vm._l(_vm.toList,(function(user,label,index){return _c("el-option-group",{key:user.label+"-"+index,attrs:{label:label}},_vm._l(user,(function(item){return _c("el-option",{key:item.value,staticClass:"subject",attrs:{label:item.displayLabel||item.label,value:item.value}},[_vm._v(" "+_vm._s(item.displayLabel||item.label)+" ")])})),1)})),1)],1),_vm.showEmailCC?_c("el-form-item",{attrs:{label:_vm.$t("asset.performance.cc")}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{multiple:"",filterable:"","collapse-tags":"",remote:"",loading:_vm.loadingCcReceiver,"remote-method":function(search){return _vm.setReceiverOptions("cc",search)},"allow-create":!0,disabled:_vm.emailNotification.isUserNonEditable},on:{change:function($event){return _vm.handleReceiverAddrChange("cc")}},model:{value:_vm.emailNotification.templateJson.cc,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"cc",$$v)},expression:"emailNotification.templateJson.cc"}},_vm._l(_vm.ccList,(function(user,label,index){return _c("el-option-group",{key:user.label+"-"+index,attrs:{label:label}},_vm._l(user,(function(item){return _c("el-option",{key:item.value,staticClass:"subject",attrs:{label:item.displayLabel||item.label,value:item.value}},[_vm._v(" "+_vm._s(item.displayLabel||item.label)+" ")])})),1)})),1)],1):_vm._e(),_vm.showEmailBCC?_c("el-form-item",{attrs:{label:_vm.$t("asset.performance.bcc")}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{multiple:"",filterable:"","collapse-tags":"",remote:"",loading:_vm.loadingBccReceiver,"remote-method":function(search){return _vm.setReceiverOptions("bcc",search)},"allow-create":!0,disabled:_vm.emailNotification.isUserNonEditable},on:{change:function($event){return _vm.handleReceiverAddrChange("bcc")}},model:{value:_vm.emailNotification.templateJson.bcc,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"bcc",$$v)},expression:"emailNotification.templateJson.bcc"}},_vm._l(_vm.bccList,(function(user,label,index){return _c("el-option-group",{key:user.label+"-"+index,attrs:{label:label}},_vm._l(user,(function(item){return _c("el-option",{key:item.value,staticClass:"subject",attrs:{label:item.displayLabel||item.label,value:item.value}})})),1)})),1)],1):_vm._e(),_c("el-form-item",[_c("div",{staticClass:"flex-center-row-space border-bottom24 pB20"},[_c("el-checkbox",{attrs:{disabled:_vm.disableSeperateMail},model:{value:_vm.emailNotification.templateJson.sendAsSeparateMail,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"sendAsSeparateMail",$$v)},expression:"emailNotification.templateJson.sendAsSeparateMail"}},[_vm._v(_vm._s(_vm.$t("setup.notification.send_as_separate_mail")))]),_vm.emailNotification.isNewTemplate?_c("div",{staticClass:"fc-green4-label14 pointer",on:{click:function($event){return _vm.openPlaceholderDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.emailTemplates.advanced_merge_fields"))+" ")]):_vm._e()],1)]),_vm.emailNotification.isNewTemplate?_vm._e():[_c("el-form-item",{attrs:{prop:"subject",label:_vm.$t("common._common.subject")}},[_c("el-input",{staticClass:"subject fc-input-full-border2",attrs:{placeholder:"Please Enter the subject",type:"input"},model:{value:_vm.emailNotification.templateJson.subject,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"subject",$$v)},expression:"emailNotification.templateJson.subject"}})],1),_c("div",{staticClass:"flex-middle justify-content-space mB10"},[_c("p",{staticClass:"grey-text2 "},[_vm._v(_vm._s(_vm.$t("common._common.message")))]),_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"fc-pdf-blue-txt-13 pointer pL10 bold fc-underline-hover  z-index1",on:{click:function($event){return _vm.openPlaceholderDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.notification.configure_script"))+" ")]),_c("div",{staticClass:"fc-separator-lg mL10 mR10 self-center"}),_c("div",{staticClass:"fc-pdf-blue-txt-13 pointer pL10 bold fc-underline-hover  z-index1",on:{click:function($event){_vm.showFileAttachDialog=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.notification.attach_files"))+" ")]),_c("div",{staticClass:"fc-separator-lg mL10 mR10 self-center"}),_vm.emailNotification.templateJson.html?_c("div",{staticClass:"fc-pdf-blue-txt-13 fc-underline-hover pointer bold  z-index1",on:{click:function($event){return _vm.showPlain()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.notification.plain_text"))+" ")]):_c("div",{staticClass:"fc-pdf-blue-txt-13 pointer pL10 bold fc-underline-hover  ",on:{click:function($event){return _vm.showRichEditor()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.notification.rich_text_editor"))+" ")])])]),_vm.emailNotification.templateJson.html?_c("div",{staticClass:"notification-editor-block"},[_c("div",{staticClass:"pointer fc-link-blue14 bold insert-html-pos",on:{click:function($event){_vm.codeEditorVisible=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.notification.insert_html"))+" ")]),_c("f-editor",{ref:"templateEditor",staticClass:"height350",attrs:{editorModules:_vm.quillEditorConfig},model:{value:_vm.emailNotification.templateJson.message,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"message",$$v)},expression:"emailNotification.templateJson.message"}})],1):_c("el-input",{staticClass:"subject fc-input-full-border-select2 notification-txt-area ",attrs:{type:"textarea",placeholder:_vm.$t("common.placeholders.type_your_message"),autosize:{minRows:6,maxRows:6}},model:{value:_vm.emailNotification.templateJson.message,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"message",$$v)},expression:"emailNotification.templateJson.message"}})],_vm.emailNotification.isNewTemplate?_c("el-form-item",{scopedSlots:_vm._u([{key:"label",fn:function(){return[_c("div",{staticClass:"grey-text2"},[_vm._v(" "+_vm._s(_vm.$t("setup.emailTemplates.email_templates"))+" ")]),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"pointer position-relative z-index1",attrs:{content:"Refresh"},on:{click:_vm.setEmailTemplateList}},[_c("i",{staticClass:"el-icon-refresh fc-black2-14 fwBold f16"})])]},proxy:!0}],null,!1,418383464)},[_c("el-select",{staticClass:"fc-input-full-border2 mT10 width100",attrs:{required:"",filterable:"",loading:_vm.emailTemplateLoading,"popper-class":"template-popover"},scopedSlots:_vm._u([{key:"empty",fn:function(){return[_vm.$validation.isEmpty(_vm.emailTemplateList)?_c("div",[_c("div",{staticClass:"fc-black2-14 text-center fc-no-data-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_data_available"))+" ")]),_c("el-button",{staticClass:"btn-green-full filter-footer-btn fc-btn-position-absolute fw-bold send-notification-template-btn",on:{click:function($event){return _vm.gotoEmailTemplateCreation()}}},[_vm._v(_vm._s(_vm.$t("common.header.add_new")))])],1):_vm._e()]},proxy:!0}],null,!1,4121748489),model:{value:_vm.emailNotification.templateJson.emailStructureId,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"emailStructureId",$$v)},expression:"emailNotification.templateJson.emailStructureId"}},[_vm._l(_vm.emailTemplateList,(function(template,keyTemplate){return _c("el-option",{key:keyTemplate,attrs:{label:template.name,value:template.id}})})),_c("el-button",{staticClass:"btn-green-full filter-footer-btn fc-btn-position-absolute fw-bold send-notification-template-btn",on:{click:function($event){return _vm.gotoEmailTemplateCreation()}}},[_vm._v(_vm._s(_vm.$t("common.header.add_new")))])],2)],1):_vm._e()],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",attrs:{type:"button"},on:{click:_vm.close}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"button",disabled:_vm.loadingForm},on:{click:_vm.save}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1),_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container fc-dialog-center-body-p0",attrs:{visible:_vm.showScriptDialog,width:"60%",title:_vm.$t("common.products.script"),"append-to-body":!0,"show-close":!1,"close-on-click-modal":!1}},[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("CodeMirror",{attrs:{codeeditor:!0},model:{value:_vm.placeholderString,callback:function($$v){_vm.placeholderString=$$v},expression:"placeholderString"}})],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closePlaceholder}},[_vm._v(_vm._s(_vm.$t("common._common.cancel").toUpperCase()))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.savePlaceholder}},[_vm._v(" "+_vm._s(_vm.$t("common._common.save").toUpperCase())+" ")])],1)]),_vm.showFileAttachDialog?_c("FilesAttachment",{attrs:{visibility:_vm.showFileAttachDialog,templateId:_vm.emailNotification.templateId,urlStringList:_vm.emailNotification.templateJson.templateUrlStrings,fileIdsList:_vm.emailNotification.templateJson.templateFileIds,fileFieldIdsList:_vm.emailNotification.templateJson.templateFileFileIds,attachmentsList:_vm.emailNotification.templateJson.attachmentList},on:{"update:visibility":function($event){_vm.showFileAttachDialog=$event},onSave:_vm.onSaveAttachments}}):_vm._e(),_vm.codeEditorVisible?_c("code-editor",{attrs:{visibility:_vm.codeEditorVisible,options:{mode:"text/html"}},on:{"update:visibility":function($event){_vm.codeEditorVisible=$event}},model:{value:_vm.emailNotification.templateJson.message,callback:function($$v){_vm.$set(_vm.emailNotification.templateJson,"message",$$v)},expression:"emailNotification.templateJson.message"}}):_vm._e()],1)},EmailActionvue_type_template_id_6d3d41f5_staticRenderFns=[],EmailModel=(__webpack_require__(821057),__webpack_require__(300268),__webpack_require__(634338),__webpack_require__(228436),__webpack_require__(857267),__webpack_require__(878833)),lodash=__webpack_require__(496486),FilesAttachment=__webpack_require__(406609),utils=__webpack_require__(848841),EmailCodeEditor=__webpack_require__(9915),FEditor=__webpack_require__(628539),EmailActionvue_type_script_lang_js={props:["moduleName","actionObj","rule","configName"],components:{CodeMirror:CodeMirror/* default */.Z,FilesAttachment:FilesAttachment/* default */.Z,CodeEditor:EmailCodeEditor/* default */.Z,FEditor:FEditor/* default */.Z},data:function(){return{showEmailCC:!1,showEmailBCC:!1,notificationMailAddresses:null,quillEditorConfig:utils/* quillEditorConfig */.g8,loadingForm:null,emailNotification:null,showScriptDialog:!1,placeholderString:"",toList:{},ccList:{},bccList:{},loadingToReceiver:!1,loadingCcReceiver:!1,loadingBccReceiver:!1,senderAddr:null,receivingUsers:[],receivingFields:[],emailTemplateList:[],emailTemplateLoading:!1,showFileAttachDialog:!1,codeEditorVisible:!1,rules:{to:{validator:function(rule,value,callback){(0,validation/* isEmpty */.xb)(value)?callback(new Error(this.$t("common._common.please_enter_a_name"))):callback()}.bind(this),trigger:"blur",message:"TO field cannot be empty"}}}},created:function(){this.init()},computed:{title:function(){return this.$t("setup.emailSettings.send_email_action")},disableSeperateMail:function(){var _ref=this.emailNotification||{},templateJson=_ref.templateJson,_ref2=templateJson||{},to=_ref2.to;return!to||(to||[]).length<2},appId:function(){return((0,router/* getApp */.wx)()||{}).id},appLinkName:function(){return((0,router/* getApp */.wx)()||{}).linkName},showNewTemplate:function(){var _this$emailNotificati,val=null===(_this$emailNotificati=this.emailNotification)||void 0===_this$emailNotificati?void 0:_this$emailNotificati.isNewTemplate;return!!(0,validation/* isNullOrUndefined */.le)(val)||val}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$moduleName,moduleName,_this$actionObj,actionObj,_this$rule,rule,_this$configName,configName,emailObj,isAttachmentAdded,_this$emailNotificati2,cc,bcc;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.quillEditorConfig=utils/* quillEditorConfig */.g8,_this.loadingForm=!0,_this$moduleName=_this.moduleName,moduleName=void 0===_this$moduleName?null:_this$moduleName,_this$actionObj=_this.actionObj,actionObj=void 0===_this$actionObj?{}:_this$actionObj,_this$rule=_this.rule,rule=void 0===_this$rule?{}:_this$rule,_this$configName=_this.configName,configName=void 0===_this$configName?null:_this$configName,emailObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},actionObj),{},{moduleName:moduleName,rule:rule,configName:configName}),_this.emailNotification=new EmailModel/* EmailModel */.E(emailObj),isAttachmentAdded=_this.emailNotification.templateJson.isAttachmentAdded,isAttachmentAdded&&_this.emailNotification.addAttachmentList(),_this.placeholderString=_this.$getProperty(_this.emailNotification,"templateJson.userWorkflow.workflowV2String",""),_this$emailNotificati2=_this.emailNotification.templateJson,cc=_this$emailNotificati2.cc,bcc=_this$emailNotificati2.bcc,!(0,validation/* isEmpty */.xb)(cc)&&_this.openCCField(),!(0,validation/* isEmpty */.xb)(bcc)&&_this.openBCCField(),_this.setEmailTemplateList(),_context.next=14,_this.setInitialReceiverDropDowns();case 14:_this.loadingForm=!1;case 15:case"end":return _context.stop()}}),_callee)})))()},setInitialReceiverDropDowns:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var receivingUsers,receivingFields,typeList,_yield$_this2$emailNo,data,error,receiverCategoricalList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return receivingUsers=[],receivingFields=[],_context2.next=3,EmailModel/* EmailModel */.E.getSenderList();case 3:return _this2.senderAddr=_context2.sent,typeList=["to","cc","bcc"],_context2.next=7,_this2.emailNotification.getReceivingUsers(null,_this2.appId,typeList);case 7:return _yield$_this2$emailNo=_context2.sent,data=_yield$_this2$emailNo.data,error=_yield$_this2$emailNo.error,error?_this2.$message.error(error.message||_this2.$t("common._common.error_occured")):receivingUsers=data,_context2.next=13,_this2.emailNotification.getReceivingFields();case 13:receivingFields=_context2.sent,receiverCategoricalList=Object.assign({Users:receivingUsers},receivingFields),_this2.toList=(0,lodash.cloneDeep)(receiverCategoricalList),_this2.ccList=(0,lodash.cloneDeep)(_this2.toList),_this2.bccList=(0,lodash.cloneDeep)(_this2.toList),typeList.forEach((function(type){var fieldList=_this2.$getProperty(_this2,"".concat(type,"List"));_this2.handleReceiverAddrChange(type,fieldList)})),!(0,validation/* isEmpty */.xb)(_this2.senderAddr)&&_this2.emailNotification.isNew&&(_this2.emailNotification.templateJson.fromAddr=_this2.senderAddr.filter((function(em){return em.email.startsWith("noreply@")}))[0].id);case 20:case"end":return _context2.stop()}}),_callee2)})))()},setEmailTemplateList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$_this3$emailNo,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.emailTemplateLoading=!0,_context3.next=3,_this3.emailNotification.getEmailTemplateList();case 3:_yield$_this3$emailNo=_context3.sent,data=_yield$_this3$emailNo.data,error=_yield$_this3$emailNo.error,error?_this3.$message.error(error.message||_this3.$t("common._common.error_occured")):_this3.emailTemplateList=data,_this3.emailTemplateLoading=!1;case 8:case"end":return _context3.stop()}}),_callee3)})))()},onSaveAttachments:function(urlArray,fileIds,attachments,fileFieldIds){this.emailNotification.onSaveAttachments(urlArray,fileIds,attachments,fileFieldIds)},handleReceiverAddrChange:function(receiverType,alternateList){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var receiverList,otherFields,list;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(receiverList=alternateList||{},!(0,validation/* isEmpty */.xb)(alternateList)){_context4.next=7;break}return receiverList={Users:(_this4.$getProperty(_this4,"".concat(receiverType,"List"))||{}).Users},_context4.next=5,_this4.emailNotification.getReceivingFields();case 5:otherFields=_context4.sent,receiverList=Object.assign(receiverList,otherFields);case 7:list=_this4.emailNotification.handleAddrChange(receiverType,receiverList),_this4.setListValues(receiverType,list);case 9:case"end":return _context4.stop()}}),_callee4)})))()},setListValues:function(receiverType,list){var filteredList=this.removeEmptyGroup(list);"to"===receiverType&&(this.toList=filteredList),"cc"===receiverType&&(this.ccList=filteredList),"bcc"===receiverType&&(this.bccList=filteredList)},setReceiverOptions:function(receiverType,search){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var receivingFields,_yield$_this5$emailNo,data,error,theList,listObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _this5.toggleReceiverLoading(receiverType,!0),receivingFields=[],_context5.next=4,_this5.emailNotification.getReceivingUsers(search,_this5.appId,[receiverType]);case 4:return _yield$_this5$emailNo=_context5.sent,data=_yield$_this5$emailNo.data,error=_yield$_this5$emailNo.error,error&&_this5.$message.error(error.message||_this5.$t("common._common.error_occured")),theList=_this5.$getProperty(_this5,"".concat(receiverType,"List"),{}),_context5.next=11,_this5.emailNotification.getReceivingFields(search);case 11:receivingFields=_context5.sent,receivingFields=Object.assign({Users:data},receivingFields),(0,validation/* isEmpty */.xb)(search)?receivingFields=_this5.emailNotification.handleAddrChange(receiverType,receivingFields):((0,validation/* isEmpty */.xb)(null===theList||void 0===theList?void 0:theList.PlaceHolders)||(receivingFields.PlaceHolders=_this5.searchForValues(search,theList.PlaceHolders)),(0,validation/* isEmpty */.xb)(null===theList||void 0===theList?void 0:theList.EmailIds)||(receivingFields.EmailIds=_this5.searchForValues(search,theList.EmailIds))),listObj=Object.assign({Users:data},receivingFields),_this5.setListValues(receiverType,listObj),_this5.toggleReceiverLoading(receiverType,!1);case 17:case"end":return _context5.stop()}}),_callee5)})))()},toggleReceiverLoading:function(receiverType,loadingState){"to"===receiverType?this.loadingToReceiver=loadingState:"cc"===receiverType?this.loadingCcReceiver=loadingState:"bcc"===receiverType&&(this.loadingBccReceiver=loadingState)},searchForValues:function(){var searchTerm=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",searchableList=arguments.length>1?arguments[1]:void 0,filteredData=(searchableList||[]).filter((function(item){var lcLabel=(item.label||"").toLowerCase(),lcSearchTerm=searchTerm.toLowerCase();return lcLabel.match(lcSearchTerm)}));return filteredData},gotoEmailTemplateCreation:function(){var routeData=this.$router.resolve({path:"/".concat(this.appLinkName,"/setup/customization/emailtemplates/").concat(this.moduleName,"/new")});return window.open(routeData.href,"_blank")},removeEmptyGroup:function(listObj){var arrayedList=Object.entries(listObj||{}),filteredList=arrayedList.reduce((function(prev,_ref3){var _ref4=(0,slicedToArray/* default */.Z)(_ref3,2),key=_ref4[0],arr=_ref4[1];return(0,validation/* isEmpty */.xb)(arr)||(prev[key]=arr),prev}),{});return filteredList||{}},savePlaceholder:function(){this.$set(this.emailNotification.templateJson.userWorkflow,"workflowV2String",this.placeholderString),this.closePlaceholder()},closePlaceholder:function(){this.placeholderString=this.$getProperty(this.emailNotification,"templateJson.userWorkflow.workflowV2String",""),this.showScriptDialog=!1},openPlaceholderDialog:function(){this.showScriptDialog=!0},openCCField:function(){this.showEmailCC=!0},openBCCField:function(){this.showEmailBCC=!0},save:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var isValid;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return isValid=!1,_context6.prev=1,_context6.next=4,_this6.$refs["email-notifcation"].validate();case 4:isValid=_context6.sent,_context6.next=10;break;case 7:_context6.prev=7,_context6.t0=_context6["catch"](1),isValid=!1;case 10:if(isValid){_context6.next=12;break}return _context6.abrupt("return");case 12:_this6.$emit("onSave",_this6.serializeData());case 13:case"end":return _context6.stop()}}),_callee6,null,[[1,7]])})))()},serializeData:function(){return this.emailNotification.serialize()},close:function(){this.$emit("onClose")},switchToNewTemplate:function(){this.emailNotification.isNewTemplate=!0},showPlain:function(){var _this7=this;this.$confirm("Some formatting will be lost when converting to plain text.\n\n Are you sure want to continue?","Change to plain text",{confirmButtonText:"Change Format",cancelButtonText:"Cancel",cancelButtonClass:"msg-cancel-btn",confirmButtonClass:"msg-confirm-btn",customClass:"fc-el-msgBox",type:"warning"}).then((function(){_this7.$refs["templateEditor"].removeFormat(),_this7.emailNotification.templateJson.message=_this7.emailNotification.templateJson.message.replace(/<div([^>]*)>/gi,"").replace(/<br>/gi,"\n").replace(/<\/div>/gi,"").trim(),_this7.emailNotification.templateJson.html=!1})).catch((function(){}))},showRichEditor:function(){this.emailNotification.templateJson.html=!0,this.emailNotification.prependDivInMessage()}}},components_EmailActionvue_type_script_lang_js=EmailActionvue_type_script_lang_js,EmailAction_component=(0,componentNormalizer/* default */.Z)(components_EmailActionvue_type_script_lang_js,EmailActionvue_type_template_id_6d3d41f5_render,EmailActionvue_type_template_id_6d3d41f5_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailAction=EmailAction_component.exports,TeamStaffMixin=__webpack_require__(462599),notificationLists=["whatsapp","phonecall"],EventDialogHelpervue_type_script_lang_js={mixins:[NotificationHelper/* default */.Z,TeamStaffMixin/* default */.Z],created:function(){this.fetchMetaFields(),this.$store.dispatch("loadTicketStatus",this.module),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},assetCategory:function(state){return state.assetCategory},ticketpriority:function(state){return state.ticketPriority}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusPickList"])),{},{isWorkPermitLicenseEnabled:function(){var $helpers=this.$helpers,_ref=$helpers||{},isLicenseEnabled=_ref.isLicenseEnabled;return isLicenseEnabled("WORK_PERMIT")},workPermitActionPhone:function(){var workPermitAction=this.workPermitAction;return workPermitAction("phonecall")},workPermitActionWhatsapp:function(){var workPermitAction=this.workPermitAction;return workPermitAction("whatsapp")}}),data:function(){return{assets:null,categoryMetric:null,isEmailConfi:!1,isPhoneCallConfi:!1,isWhatsappConfi:!1,isFieldConfi:!1,isControlConfi:!1,isScriptConfigured:!1,isStatusConfigured:!1,emailContext:{},showEmailActions:!1,phoneCallContext:"",whatsappContext:"",smsContent:"",fieldContext:"",controlContext:"",mobileContent:{},showMobileConfig:!1,woContext:"",isSmsConfi:!1,isWOConfi:!1,isMobileConfig:!1,isWoCloseConfig:!1,actionMode:"mail",actionEdit:!1,picklistOptions:{},
//  idOldActionEdit: false,
actionIndex:null,createworkorderDialog:!1,fieldUpdateValue:!1,openStatusDialog:!1,controlsAction:!1,actionData:null,fields:[],showScriptDialog:!1,showDiff:!1,controlData:{actionType:18,templateJson:{}},closeWo:{actionType:12},alarmWo:{actionType:11,templateJson:{category:{id:""},assignedTo:{id:""},assignmentGroup:{id:""},priority:{id:""}}},fieldChange:{actionType:13,templateJson:{fieldMatcher:[]}},changeStatus:{actionType:19,templateJson:{new_state:null}},scriptData:null}},components:{pushNotification:PushNotification,SendNotification:SendNotification/* default */.Z,FFormulaBuilder:FFormulaBuilder/* default */.Z,FAssignment:FAssignment/* default */.Z,FieldUpdateDialog:FieldUpdateDialog/* default */.Z,ChangeStatusDialog:StatusUpdate/* default */.Z,ScriptDialog:ScriptEditor/* default */.Z,EmailAction:EmailAction},props:["ruleType","rule","module","moduleFields","isUpdate","actions","moduleId"],watch:{rule:function(newVal,oldVal){newVal!==oldVal&&this.initData(newVal)}},mounted:function(){this.rule&&this.initData(this.rule),0===this.rule.actions.length&&this.addRow()},methods:{statusFieldName:function(selectedField,index){var field=this.moduleFields.filter((function(field){return field.name===selectedField.field}));if(this.fieldChange.templateJson.fieldMatcher[index].fieldObj=field,this.fieldChange.templateJson.fieldMatcher[index].isSpacePicker=!1,field.length>0){if(this.fieldChange.templateJson.fieldMatcher[index].columnName=field[0].completeColumnName,"ENUM"===field[0].dataTypeEnum._name&&this.$set(this.picklistOptions,field[0].name,field[0].enumMap),"LOOKUP"===field[0].dataTypeEnum._name&&field[0].specialType)this.loadSpecialTypePickList(field[0].specialType,field[0].name);else if("LOOKUP"===field[0].dataTypeEnum._name&&field[0].lookupModule)if("ticketstatus"===field[0].lookupModule.name)this.$set(this.picklistOptions,field[0].name,this.getTicketStatusPickList(this.module));else if("ticketpriority"===field[0].lookupModule.name){
// handling  key value pair to match existing flow   pattern
var priority={};this.ticketpriority.forEach((function(d){priority[d.id]=d.displayName})),this.$set(this.picklistOptions,field[0].name,priority)}else this.loadPickList(field[0].lookupModule.name,field[0].name);this.$forceUpdate()}},fetchMetaFields:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleName=_this.module,_context.next=3,api/* API */.bl.get("/module/metafields",{moduleName:moduleName});case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,_this.fields=_this.$getProperty(data,"meta.fields",[]);case 6:case"end":return _context.stop()}}),_callee)})))()},loadCategoryMetric:function(id){var _this2=this;this.$util.loadAssetReadingFields(-1,id).then((function(fields){_this2.categoryMetric=fields})),this.$util.loadAsset({withReadings:!0,categoryId:id}).then((function(response){var _this2$assets;_this2.assets=[],_this2.assets.push({id:"${workorder.resource.id}",name:"Current Asset"}),(_this2$assets=_this2.assets).push.apply(_this2$assets,(0,toConsumableArray/* default */.Z)(response.assets))}))},updateAction:function(actions){var _this3=this,newlist=[];
// Removing web notifications for now
return actions.filter((function(action){return 5!==action.actionType})).map((function(action,i){var template;if(3===action.actionType){if((0,validation/* isEmpty */.xb)(_this3.emailContext.templateJson)){var emailObj=new EmailModel/* EmailModel */.E((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this3.emailContext||{}),{},{moduleName:_this3.module}));_this3.emailContext=emailObj.serialize()}template=_this3.emailContext}else if(4===action.actionType)template=_this3.$refs.notificationpage.getDataToSave(_this3.smsContent,"sms");else if(7===action.actionType){if((0,validation/* isEmpty */.xb)(_this3.mobileContent.templateJson)){var pushObj=new NotificationModel/* NotificationModel */.w((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this3.mobileContent||{}),{},{moduleName:_this3.module}));_this3.mobileContent=pushObj.serialize()}template=_this3.mobileContent}else 13===action.actionType?template=_this3.fieldChange:19===action.actionType?template=_this3.changeStatus:18===action.actionType?(template={},template.actionType=_this3.controlData.actionType,template.templateJson=_this3.controlData.templateJson):21===action.actionType?template={actionType:_this3.scriptData.actionType,templateJson:_this3.scriptData.templateJson}:11===action.actionType?(template=_this3.$helpers.cloneObject(_this3.alarmWo),template.templateJson.category=template.templateJson.category.id>0?template.templateJson.category:{id:-1},template.templateJson.priority=template.templateJson.priority.id>0?template.templateJson.priority:{id:-1},template.templateJson.assignmentGroup=template.templateJson.assignmentGroup.id>0?template.templateJson.assignmentGroup:{id:-1},template.templateJson.assignedTo=template.templateJson.assignedTo.id>0?template.templateJson.assignedTo:{id:-1}):26===action.actionType?template=_this3.$refs.notificationpage.getDataToSave(_this3.whatsappContext,"whatsapp"):27===action.actionType&&(template=_this3.$refs.notificationpage.getDataToSave(_this3.phoneCallContext,"phonecall"));_this3.addModuleParam(template),newlist.push(template||action)})),this.$emit("update:actions",newlist),newlist},loadSpecialTypePickList:function(specialType,fieldName){var self=this,pickOption={};if("users"===specialType){var userList=self.$store.state.users;pickOption["${LOGGED_USER}"]="Current User";var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(userList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var user=_step.value;pickOption[user.id]=user.name}}catch(err){_iterator.e(err)}finally{_iterator.f()}self.$set(self.picklistOptions,fieldName,pickOption)}else if("groups"===specialType){var _step2,groupList=self.$store.state.groups,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(groupList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var group=_step2.value;pickOption[group.groupId]=group.name}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}self.$set(self.picklistOptions,fieldName,pickOption)}else if("basespace"===specialType){var _step3,spaceList=self.$store.state.spaces,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(spaceList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var space=_step3.value;pickOption[space.id]=space.name}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}self.$set(self.picklistOptions,fieldName,pickOption)}else"alarmType"===specialType?self.$set(self.picklistOptions,fieldName,this.$constants.AlarmCategory):"sourceType"===specialType&&self.$set(self.picklistOptions,fieldName,this.$constants.SourceType)},loadPickList:function(moduleName,fieldName){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 2:_yield$getFieldOption=_context2.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this4.$message.error(error.message||"Error Occured"):_this4.$set(_this4.picklistOptions,fieldName,options);case 6:case"end":return _context2.stop()}}),_callee2)})))()},initData:function(rule){var _this5=this;rule.actions.forEach((function(d){if(3===parseInt(d.actionType))_this5.isEmailConfi=!0,_this5.emailContext=d;else if(4===parseInt(d.actionType))_this5.isSmsConfi=!0,_this5.smsContent=d;else if(7===parseInt(d.actionType))_this5.isMobileConfig=!0,_this5.mobileContent=d;else if(11===parseInt(d.actionType))_this5.isWOConfi=!0,null!==d.template&&(_this5.alarmWo.templateJson.category.id=-1!==d.template.categoryId?d.template.categoryId:"",_this5.alarmWo.templateJson.assignedTo.id=-1!==d.template.assignedToId?d.template.assignedToId:"",_this5.alarmWo.templateJson.assignmentGroup.id=-1!==d.template.assignmentGroupId?d.template.assignmentGroupId:"",_this5.alarmWo.templateJson.priority.id=-1!==d.template.priorityId?d.template.priorityId:""),//  this.actionMode = 'workorder'
_this5.woContext=d;else if(12===parseInt(d.actionType))_this5.isWoCloseConfig=!0;else if(18===parseInt(d.actionType))_this5.isControlConfi=!0,_this5.loadCategoryMetric(d.template.assetCategory),d.templateJson=d.template.originalTemplate,d.templateJson.assetCategory=d.template.assetCategory,d.templateJson.workflow=d.template.workflow,
// d.templateJson.metric = parseInt(d.template.metric)
_this5.controlData.templateJson=d.templateJson;else if(21===parseInt(d.actionType)){_this5.isScriptConfigured=!0;var templateJson={resultWorkflowContext:d.template.originalTemplate.workflowContext};_this5.scriptData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},d),{},{templateJson:templateJson})}else if(13===parseInt(d.actionType)){_this5.isFieldConfi=!0;var i=0;if(null!==d.template){var _loop=function(key){if(_this5.addRow(),d.template.originalTemplate.hasOwnProperty(key)&&(_this5.fieldChange.templateJson.fieldMatcher[i].field=key,_this5.fieldChange.templateJson.fieldMatcher[i].value=d.template.originalTemplate[key],i++,self.moduleFields)){var field=self.moduleFields.filter((function(field){return field.name===key}));_this5.fieldChange.templateJson.fieldMatcher[i].fieldObj=field,"LOOKUP"===field[0].dataTypeEnum._name?(_this5.fieldChange.templateJson.fieldMatcher[i].value=d.template.originalTemplate[key],_this5.fieldChange.templateJson.fieldMatcher[i].valueArray=d.template.originalTemplate[key]):"DATE_TIME"!==field[0].dataTypeEnum._name&&"DATE"!==field[0].dataTypeEnum._name||d.template.originalTemplate[key]&&(_this5.fieldChange.templateJson.fieldMatcher[i].dateObject=_this5.$helpers.secTodaysHoursMinu(_this5.rule.interval/1e3)),_this5.statusFieldName(_this5.fieldChange.templateJson.fieldMatcher[i],i)}};for(var key in d.template.originalTemplate)_loop(key);_this5.fieldContext=d}}else if(26===parseInt(d.actionType))_this5.isWhatsappConfi=!0,_this5.whatsappContext=d;else if(27===parseInt(d.actionType))_this5.isPhoneCallConfi=!0,_this5.phoneCallContext=d;else if(19===parseInt(d.actionType)){_this5.isStatusConfigured=!0;var new_state=_this5.$getProperty(d,"template.originalTemplate.new_state"),changeStatus=_this5.changeStatus,_templateJson={new_state:new_state};_this5.changeStatus=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},changeStatus),{},{templateJson:_templateJson})}}))},addRow:function(){this.fieldChange.templateJson.fieldMatcher.push({field:"",isSpacePicker:!1,value:null,parseLabel:null,valueArray:null,dateObject:{},fieldObj:null})},closeNotifiDialog:function(){this.showMobileConfig=!1},actionSave:function(datas){var data=this.$helpers.cloneObject(datas),idx=(this.rule.actions||[]).findIndex((function(d){return d.actionType===data.actionType}));if(-1!==idx&&this.rule.actions.splice(idx,1),3===data.actionType)this.closeEmailActions(),this.isEmailConfi=!0,this.emailContext=data;else if(4===data.actionType)this.isSmsConfi=!0,this.smsContent=data;else if(7===data.actionType)this.isMobileConfig=!0,this.closeNotifiDialog(),this.mobileContent=data;else if(11===data.actionType){this.createworkorderDialog=!1,this.isWOConfi=!0,this.woContext=data;var template=this.alarmWo.templateJson;Object.keys(data).forEach((function(key){return["actionType","templateJson"].includes(key)||delete data[key]})),template&&(data.template=null,data.templateJson.category=template.category.id>0?template.category:{id:-1},data.templateJson.priority=template.priority.id>0?template.priority:{id:-1},data.templateJson.assignmentGroup=template.assignmentGroup.id>0?template.assignmentGroup:{id:-1},data.templateJson.assignedTo=template.assignedTo.id>0?template.assignedTo:{id:-1})}else if(12===data.actionType)this.isWoCloseConfig=!0;
// this.woContext = data
else if(13===data.actionType)this.fieldUpdateValue=!1,this.fieldContext=data,this.isFieldConfi=!0;else if(19===data.actionType)this.openStatusDialog=!1,this.changeStatus=data,this.isStatusConfigured=!0;else if(18===data.actionType){if(this.controlsAction=!1,data.templateJson.val="${resultExpr}","${workorder.resource.id}"===data.templateJson.resource&&data.templateJson.workflow.expressions){var expName="workorder.resource.id";data.templateJson.workflow.expressions.push({name:expName,constant:"${"+expName+"}"}),data.templateJson.workflow.parameters.push({name:expName,typeString:"String"})}this.controlContext=data,this.isControlConfi=!0}else 21===data.actionType?(this.showScriptDialog=!1,this.isScriptConfigured=!0,this.scriptData=data||{}):26===data.actionType?(this.isWhatsappConfi=!0,this.whatsappContext=data):27===data.actionType&&(this.isPhoneCallConfi=!0,this.phoneCallContext=data);this.addModuleParam(data),this.rule.actions.push(data),this.actionEdit=!1,this.$emit("actions",this.rule.actions)},addModuleParam:function(template){var _this6=this;template&&template.templateJson&&template.templateJson.ftl&&template.templateJson.workflow&&!template.templateJson.workflow.parameters.some((function(param){return param.name===_this6.module}))&&template.templateJson.workflow.parameters.push({name:this.module,typeString:"String"})},deleteAction:function(idx){this.rule.actions.splice(idx,1)},closeEmailActions:function(){this.showEmailActions=!1},editAction:function(action,idx){var _this7=this;if(3===action.actionType)this.showEmailActions=!0,this.actionData=action,this.isEmailConfi=!0;else if(4===action.actionType)this.actionData=action,this.actionMode="sms",this.actionEdit=!0,this.isSmsConfi=!0;else if(7===action.actionType)this.mobileContent=action,this.isMobileConfig=!0,this.showMobileConfig=!0;else if(11===action.actionType)this.createworkorderDialog=!0,this.actionMode="workorder",this.isWOConfi=!0;else if(13===action.actionType){this.isFieldConfi=!0,this.fieldUpdateValue=!0,this.actionMode="fieldChange";var _self=this,i=0,_loop2=function(key){if(action.template.originalTemplate.hasOwnProperty(key)){_this7.fieldChange.templateJson.fieldMatcher[i].field=key,_this7.fieldChange.templateJson.fieldMatcher[i].value=action.template.originalTemplate[key];var field=_self.moduleFields.filter((function(field){return field.name===key}));"LOOKUP"===field[0].dataTypeEnum._name?(_this7.fieldChange.templateJson.fieldMatcher[i].valueArray=action.template.originalTemplate[key].id,_this7.fieldChange.templateJson.fieldMatcher[i].value.id=action.template.originalTemplate[key].id):"DATE_TIME"!==field[0].dataTypeEnum._name&&"DATE"!==field[0].dataTypeEnum._name||(_this7.fieldChange.templateJson.fieldMatcher[i].dateObject=_this7.$helpers.secTodaysHoursMinu(action.template.originalTemplate[key]/1e3)),_this7.fieldChange.templateJson.fieldMatcher[i].fieldObj=field,_this7.statusFieldName(_this7.fieldChange.templateJson.fieldMatcher[i],i),field[0].lookupModule&&"resource"===field[0].lookupModule.name&&(_this7.fieldChange.templateJson.fieldMatcher[i].isSpacePicker=!0),i++}};for(var key in action.template.originalTemplate)_loop2(key);this.$forceUpdate()}else 18===action.actionType?(this.actionMode="controls",this.controlsAction=!0,this.isControlConfi=!0):21===action.actionType?(this.actionMode="script",this.showScriptDialog=!0,this.isScriptConfigured=!0):19===action.actionType?(this.actionMode="changeStatus",this.openStatusDialog=!0,this.isStatusConfigured=!0):26===action.actionType?(this.actionData=action,this.actionMode="whatsapp",this.actionEdit=!0,this.isWhatsappConfi=!0):27===action.actionType&&(this.actionData=action,this.actionMode="phonecall",this.actionEdit=!0,this.isPhoneCallConfi=!0)},addAction:function(cmd){"mobile"!==cmd?"mail"!==cmd?(this.actionMode=cmd,this.actionData=null,"script"===cmd?this.showScriptDialog=!0:"workorder"!==cmd&&"fieldChange"!==cmd&&"changeStatus"!==cmd&&"controls"!==cmd&&"script"!==cmd?this.actionEdit=!0:"fieldChange"===cmd&&this.fieldChange.templateJson.fieldMatcher.length<=0?this.addRow():"changeStatus"===cmd&&(this.openStatusDialog=!0)):this.showEmailActions=!0:this.showMobileConfig=!0},reset:function(action,idx){if("sms"===action){var _idx=this.rule.actions.findIndex((function(d){return 4===d.actionType}));this.rule.actions.splice(_idx,1),this.smsContent="",this.isSmsConfi=!1}else if("mail"===action){var _idx2=this.rule.actions.findIndex((function(d){return 3===d.actionType}));this.rule.actions.splice(_idx2,1),this.emailContext={},this.isEmailConfi=!1}else if("mobile"===action){var _idx3=this.rule.actions.findIndex((function(d){return 7===d.actionType}));this.rule.actions.splice(_idx3,1),this.mobileContent={},this.isMobileConfig=!1}if("whatsapp"===action){var _idx4=this.rule.actions.findIndex((function(d){return 26===d.actionType}));this.rule.actions.splice(_idx4,1),this.whatsappContext="",this.isWhatsappConfi=!1}if("phonecall"===action){var _idx5=this.rule.actions.findIndex((function(d){return 27===d.actionType}));this.rule.actions.splice(_idx5,1),this.phoneCallContext="",this.isPhoneCallConfi=!1}else if("wo"===action){var _idx6=this.rule.actions.findIndex((function(d){return 11===d.actionType}));this.rule.actions.splice(_idx6,1),this.woContext=null,this.isWOConfi=!1}else if("woClose"===action){var _idx7=this.rule.actions.findIndex((function(d){return 12===d.actionType}));this.rule.actions.splice(_idx7,1),this.isWoCloseConfig=!1}else if("fieldChange"===action){var _idx8=this.rule.actions.findIndex((function(d){return 13===d.actionType}));this.rule.actions.splice(_idx8,1),this.isFieldConfi=!1}else if("controls"===action){var _idx9=this.rule.actions.findIndex((function(d){return 18===d.actionType}));this.rule.actions.splice(_idx9,1),this.isControlConfi=!1,this.controlData.templateJson={}}else if("script"===action){var _idx10=this.rule.actions.findIndex((function(d){return 21===d.actionType}));this.rule.actions.splice(_idx10,1),this.isScriptConfigured=!1,this.scriptData=null}else if("changeStatus"===action){var _idx11=this.rule.actions.findIndex((function(d){return 19===d.actionType}));this.rule.actions.splice(_idx11,1),this.isStatusConfigured=!1,this.changeStatus=null}this.$forceUpdate()},
// Temporary...TODO need to handle in server
formatMobileData:function(data){var summaryPage=this.module.toUpperCase()+"_SUMMARY",message={content_available:!0,summary_id:"${"+this.module+".id}",sound:"default",module_name:this.module,priority:"high",text:data.message,click_action:summaryPage,title:data.subject};data.body=JSON.stringify({name:this.module.toUpperCase()+"_PUSH_NOTIFICATION",notification:message,data:message,id:data.id}),data.to=data.id,this.$common.setExpressionFromPlaceHolder(data.workflow,"${"+this.module+".id}")},closeDialog:function(){this.openStatusDialog=!1},workPermitAction:function(actions){var isWorkPermitLicenseEnabled=this.isWorkPermitLicenseEnabled;if(notificationLists.includes(actions))return isWorkPermitLicenseEnabled}}},components_EventDialogHelpervue_type_script_lang_js=EventDialogHelpervue_type_script_lang_js,EventDialogHelper_component=(0,componentNormalizer/* default */.Z)(components_EventDialogHelpervue_type_script_lang_js,render,staticRenderFns,!1,null,"b889d4a4",null)
/* harmony default export */,EventDialogHelper=EventDialogHelper_component.exports},
/***/383274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAssignment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FAssignment.vue?vue&type=template&id=3fd62ade
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showRecommendedUsers&&"view"===_vm.viewtype?_c("el-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",attrs:{"popper-class":"fc-popover-p02 fc-assignment-popover-height",placement:"bottom",width:"320",trigger:"click"},on:{show:function($event){return _vm.loadrecommendedUsers()}}},[_c("div",{staticClass:"row popover-active-block",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"10px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel pointer"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",{staticClass:"fc-search-sticky"},["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"}},[_vm.recommendedUsersList.length&&"workorder"===_vm.moduleName?_c("div",[_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended_users"))+" ")]),_vm._l(_vm.recommendedUsersList,(function(recommendedUser,reusridx){return _c("div",{key:reusridx,on:{click:function($event){return _vm.assignViewWorkOrder(recommendedUser)}}},[_c("div",{staticClass:"group-item-label pointer"},[_vm._v(" "+_vm._s(recommendedUser.name)+" ( "+_vm._s(_vm.userVsTicketCountObj[recommendedUser.id])+" Tickets) ")])])}))],2):_vm._e(),"workorder"===_vm.moduleName&&_vm.recommendedUsersList.length?_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.others"))+" ")]):_vm._e(),_vm._l(_vm.userList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])}))],2):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px","padding-left":"10px"}},_vm._l(_vm.memberList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])})),0):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("div",{key:grpidx,on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticClass:"pL5",staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])]):_vm._e()})),0):_vm._e(),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("showFAssignmentPopover")],2)]):"form"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment"},[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignWorkOrder(group,grpidx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()],1):"view"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",on:{open:function($event){_vm.isPopverVisible=!0},close:function($event){_vm.isPopverVisible=!1}}},[_vm.isPopverVisible?[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()]:_vm._e()],2):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),quasar_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(641358)),vuex_esm=__webpack_require__(420629),FSearch=__webpack_require__(947748),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),FAssignmentvue_type_script_lang_js={props:{model:{},viewtype:{},record:{},form:{},siteId:{default:null},recordId:{},moduleName:{},showRecommendedUsers:{}},data:function(){return{showQuickSearch:!1,loading:!1,quickSearchQuery:null,assignmentValue:"assignmentGroup",selectedName:"",selectedGroup:"",selctedGroupMember:"",userVsTicketCountObj:{},memberList:[],typeVal:this.viewtype,workorder:null,actions:{assign:{loading:!1}},userList:[],recommendedUsersList:[],groupList:[],filtereduserList:[],filteredgroupList:[],filteredmemberList:[],isPopverVisible:!1}},components:{QPopover:quasar_esm/* QPopover */.oe,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QList:quasar_esm/* QList */.tu,FSearch:FSearch/* default */.Z},watch:{record:function(){this.loadWorkorders()},siteId:{handler:function(newVal,oldVal){var getCurrentSiteId=this.getCurrentSiteId,viewtype=this.viewtype;isEqual_default()(newVal,oldVal)||isEqual_default()(newVal,getCurrentSiteId)||isEqual_default()(viewtype,"view")||this.scopeTeamUser()},immediate:!0},isPopverVisible:function(){this.isPopverVisible&&"view"===this.viewtype&&(0,validation/* isEmpty */.xb)(this.userList)&&(0,validation/* isEmpty */.xb)(this.groupList)&&this.scopeTeamUser()},model:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var assignedTo=newVal.assignedTo,assignmentGroup=newVal.assignmentGroup,_ref=assignedTo||{},assignedToId=_ref.id,_ref2=assignmentGroup||{},assignmentGroupId=_ref2.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(this.selectedName=null),(0,validation/* isEmpty */.xb)(assignmentGroupId)&&(this.selectedGroup=null)}}}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusByLabel","getCurrentSiteId","getUser","getGroup"])),created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","workorder").then((function(){_this.loadWorkorders()}))},methods:{memberCount:function(group){var _ref3=group||{},members=_ref3.members;return(members||[]).length},loadrecommendedUsers:function(){var _this2=this;this.loading=!0,this.userVsTicketCountObj={},this.recommendedUsersList=[];var url="v2/recommended/workorder?woId=".concat(this.record.id);this.$http.get(url).then((function(response){0===response.data.responseCode&&response.data.result&&response.data.result.recommendedUsers&&response.data.result.recommendedUsers.forEach((function(element){_this2.recommendedUsersList.push(element.user),_this2.userVsTicketCountObj[element.user.id]=element.reason.no_of_tickets;for(var i=0;i<_this2.userList.length;i++)_this2.userList[i].id===element.user.id&&_this2.userList.splice(i,1)})),_this2.loading=!1})).catch((function(){
// TODO handle errors
}))},loadWorkorders:function(){var objKey="model";"view"===this.viewtype&&(objKey="record");var parent=this[objKey],_ref4=parent||{},assignedTo=_ref4.assignedTo,assignmentGroup=_ref4.assignmentGroup,_ref5=assignedTo||{},assignedToId=_ref5.id,assignedToName=_ref5.name,_ref6=assignmentGroup||{},assignmentGroupId=_ref6.id,assignmentGroupName=_ref6.name;(0,validation/* isEmpty */.xb)(assignedToName)?this.selectedName=(0,validation/* isEmpty */.xb)(assignedToId)?null:this.getUserNameFromList(assignedToId):this.selectedName=assignedToName,(0,validation/* isEmpty */.xb)(assignmentGroupName)?this.assignmentGroupName=(0,validation/* isEmpty */.xb)(assignmentGroupId)?null:this.getGroupNameFromList(assignmentGroupId):this.selectedGroup=assignmentGroupName},assignment:function(value){this.assignmentValue=value},assignWorkOrder:function(assignedObj,index,value){var isValueChanged=!1,model=this.model,$refs=this.$refs,_ref7=model||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup,_ref8=assignedObj||{},id=_ref8.id,name=_ref8.name;if("assignmentGroup"===value){var _ref9=assignmentGroup||{},assignmentGroupId=_ref9.id;(0,validation/* isEmpty */.xb)(name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(id)?null:this.getGroupNameFromList(id):this.selectedGroup=name,(0,validation/* isEmpty */.xb)(assignmentGroup)||(isValueChanged=assignmentGroupId!==id,this.$set(this.model.assignmentGroup,"id",id),this.$set(this.model.assignmentGroup,"name",name)),this.$emit("input",id),this.$emit("value",model),this.groupmemberList(index),isValueChanged&&this.$emit("onChange")}if("assignedTo"===value||"assignedToGroupMember"===value){
// get the assignedTo user and update using 'updateAssignedTo' emit.
var _ref10=assignedTo||{},assignedToId=_ref10.id;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,(0,validation/* isEmpty */.xb)(assignedTo)||(isValueChanged=assignedToId!==id,this.$set(this.model.assignedTo,"id",id),this.$set(this.model.assignedTo,"name",name)),this.$emit("input",id),this.$emit("value",model),$refs["assignedtopopover"]&&$refs["assignedtopopover"].close(),isValueChanged&&this.$emit("onChange",assignedObj)}},groupmemberList:function(groupIndex){this.assignmentValue="assignedToGroupMember",this.memberList=this.groupList[groupIndex].members,this.selectedName=null},assignViewWorkOrder:function(assignedTo,assignmentGroup,index){var _this3=this,$refs=this.$refs,record=this.record,assignObj={},moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref11=moduleState||{},statusId=_ref11.id,_ref12=record||{},recordId=_ref12.id;if(assignObj.id=[recordId],assignedTo){assignObj.assignedTo=assignedTo;var _ref13=assignedTo||{},id=_ref13.id,name=_ref13.name;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,$refs["assignedtopopover"]&&$refs["assignedtopopover"].close()}if(assignmentGroup){assignObj.assignmentGroup=assignmentGroup;var _ref14=assignmentGroup||{},_id=_ref14.id,_name=_ref14.name;(0,validation/* isEmpty */.xb)(_name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(_id)?null:this.getGroupNameFromList(_id):this.selectedGroup=_name,this.groupmemberList(index)}assignObj.status={id:statusId,status:"Assigned"},this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this3.$emit("assignactivity",assignObj),_this3.$dialog.notify(_this3.$t("common.products.workorder_assigned_successfully"))}))},scopeTeamUser:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,siteId,_yield$API$post,data,error,_ref15,groups,users;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={},siteId=_this4.siteId,siteId&&(params.siteId=siteId),_context.next=5,api/* API */.bl.post("v3/group/scopeBySite",params);case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref15=data||{},groups=_ref15.groups,users=_ref15.users,_this4.userList=users||[],_this4.groupList=groups||[]);case 9:case"end":return _context.stop()}}),_callee)})))()},removeTeamWO:function(assignValue){var _assignObj,_this5=this,record=this.record,_ref16=record||{},recordId=_ref16.id,moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref17=moduleState||{},statusId=_ref17.id,assignObj=(_assignObj={id:[recordId]},(0,defineProperty/* default */.Z)(_assignObj,assignValue,{id:-1}),(0,defineProperty/* default */.Z)(_assignObj,"status",{id:statusId,status:"Assigned"}),_assignObj);this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this5.$emit("assignactivity",assignObj),_this5.$dialog.notify(_this5.$t("common.products.workorder_assigned_successfully"))}))},reassign:function(assignValue){var model=this.model,_ref18=model||{},assignmentGroup=_ref18.assignmentGroup,assignedTo=_ref18.assignedTo;"assignmentGroup"===assignValue&&(this.selectedGroup=null,(0,validation/* isEmpty */.xb)(assignmentGroup)||(this.$set(this.model.assignmentGroup,"id",null),this.$set(this.model.assignmentGroup,"name",null))),"assignedTo"===assignValue&&(this.selectedName=null,(0,validation/* isEmpty */.xb)(assignedTo)||(this.$set(this.model.assignedTo,"id",null),this.$set(this.model.assignedTo,"name",null)))},reassignWO:function(assignValue){"assignmentGroup"===assignValue&&(this.selectedGroup=null),"assignedTo"===assignValue&&(this.selectedName=null),this.removeTeamWO(assignValue)},getUserNameFromList:function(id){var userList=this.userList;if((0,validation/* isEmpty */.xb)(userList))return this.getUser(id).name;var user=userList.find((function(user){return user.id===id}));return(0,validation/* isEmpty */.xb)(user)?void 0:this.$getProperty(user,"name",null)},getGroupNameFromList:function(id){var _this6=this,groupList=this.groupList;if((0,validation/* isEmpty */.xb)(groupList))this.$store.dispatch("loadGroups").then((function(){return(_this6.getGroup(id)||{}).name}));else{var group=groupList.find((function(group){return group.id===id}));if(!(0,validation/* isEmpty */.xb)(group))return this.$getProperty(group,"name",null)}}}},components_FAssignmentvue_type_script_lang_js=FAssignmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAssignmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAssignment=component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/634559:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldUpdateDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/fields/FieldUpdateDialog.vue?vue&type=template&id=3a6c8a46
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"Field Change","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},_vm._l(_vm.fieldChange.templateJson.fieldMatcher,(function(fieldMatcher,index){return _c("div",{key:index},[_c("el-row",{staticClass:"visibility-visible-actions fc-row-hover pT10 pB10 pL10 pointer"},[_c("el-col",{attrs:{span:1}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(_vm._s(index+1))])])]),_c("el-col",{staticClass:"pL10",attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:""},on:{change:function($event){return _vm.statusFieldName(fieldMatcher,index)}},model:{value:fieldMatcher.field,callback:function($$v){_vm.$set(fieldMatcher,"field",$$v)},expression:"fieldMatcher.field"}},_vm._l(_vm.updateFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.name}})})),1)],1),_c("el-col",{attrs:{span:9}},[_c("div",{},[fieldMatcher.fieldObj?fieldMatcher.isSpacePicker?_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",attrs:{disabled:""},model:{value:_vm.field.parseLabel,callback:function($$v){_vm.$set(_vm.field,"parseLabel",$$v)},expression:"field.parseLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},slot:"suffix"})])],1):_c("div",{staticClass:"flex-middle"},["NUMBER"===fieldMatcher.fieldObj[0].dataType||"DECIMAL"===fieldMatcher.fieldObj[0].dataType?_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",attrs:{type:"number"},model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}}):"BOOLEAN"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 mL20 width100pxss",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}},[_c("el-option",{attrs:{label:fieldMatcher.fieldObj[0].trueVal?fieldMatcher.fieldObj[0].trueVal:"Yes",value:"true"}}),_c("el-option",{attrs:{label:fieldMatcher.fieldObj[0].falseVal?fieldMatcher.fieldObj[0].falseVal:"No",value:"false"}})],1):"ENUM"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL20",attrs:{filterable:"","collapse-tags":""},model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}},_vm._l(_vm.picklistOptions[fieldMatcher.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):"DATE"===fieldMatcher.fieldObj[0].dataTypeEnum._name||"DATE_TIME"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-row",{staticClass:"mL20"},[_c("el-col",{attrs:{span:7}},[_c("el-input",{staticClass:"fc-input-full-border-select2 width75px",attrs:{type:"number"},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.days,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"days",$$v)},expression:"fieldMatcher.dateObject.days"}}),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Days ")])],1),_c("el-col",{staticClass:"pL30",attrs:{span:7}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width75px",attrs:{clearable:"",filterable:"",placeholder:"Num"},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.hours,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"hours",$$v)},expression:"fieldMatcher.dateObject.hours"}},_vm._l(_vm.$constants.HOURS,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Hours ")])],1),_c("el-col",{staticClass:"pL60",attrs:{span:7}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width75px",attrs:{placeholder:"Num",filterable:""},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.minute,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"minute",$$v)},expression:"fieldMatcher.dateObject.minute"}},_vm._l(_vm.minDuration,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Mins ")])],1)],1):"LOOKUP"===fieldMatcher.fieldObj[0].dataTypeEnum._name&&"LOOKUP_SIMPLE"===fieldMatcher.fieldObj[0].displayType._name||"LOOKUP"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL20",attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.valueArray,callback:function($$v){_vm.$set(fieldMatcher,"valueArray",$$v)},expression:"fieldMatcher.valueArray"}},_vm._l(_vm.picklistOptions[fieldMatcher.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width130px",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}})],1):_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}})],1)])]),_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"visibility-hide-actions pT10 mR20 text-right pointer"},[_c("img",{staticClass:"pointer",attrs:{src:__webpack_require__(353654)},on:{click:_vm.addRow}}),_vm.fieldChange.templateJson.fieldMatcher.length>1&&1!==_vm.fieldChange.templateJson.fieldMatcher.length?_c("img",{staticClass:"pointer mL5",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(index)}}}):_vm._e()])])],1)],1)})),0),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.actionSave(_vm.fieldChange)}}},[_vm._v("Save")])],1)])],1)},staticRenderFns=[],validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(434284),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(990260)),FieldUpdateDialogvue_type_script_lang_js={props:["statusFieldName","fieldChange","moduleFields","module","picklistOptions","addRow","actionSave","fieldUpdateValue","durationConfig"],data:function(){return{moduleObj:{},excludeFields:["stateFlowId","siteId","photo","moduleState"],updateFieldName:{alarm:["severity"],newreadingalarm:["severity"],workorder:["assignedTo","assignmentGroup","category","dueDate","priority","type"],asset:["type","model","manufacturer","purchasedDate","retireDate","unitPrice","warrantyExpiryDate","department"],dealsandoffers:["active"]}}},computed:{updateFields:function(){var _this=this,fields=[],_this$moduleObj=this.moduleObj,moduleObj=void 0===_this$moduleObj?{}:_this$moduleObj,excludeFields=this.excludeFields,moduleFields=this.moduleFields,$getProperty=this.$getProperty,decommissionFields=["decommission","decommissionedBy","viewRecommissionedBtn","commissionedTime"];return(0,validation/* isEmpty */.xb)(moduleFields)?"CUSTOM"===$getProperty(moduleObj.typeEnum,"_name","")&&(fields=moduleFields.filter((function(field){return!excludeFields.includes(field.name)}))):(moduleFields=moduleFields.filter((function(field){return!decommissionFields.includes(field.name)})),fields=this.updateFieldName[this.module]?moduleFields.filter((function(field){return!field.default||_this.updateFieldName[_this.module]&&_this.updateFieldName[_this.module].includes(field.name)})):moduleFields),fields},minDuration:function(){var durationConfig=this.durationConfig;if(this.$getProperty(durationConfig,"minInterval")){for(var minutes=[],minInterval=durationConfig.minInterval,i=0;i<60;i+=minInterval)minutes.push(i);return minutes}return this.$constants.MINUTES}},mounted:function(){this.getMetaFields()},methods:{getMetaFields:function(){var _this2=this,module=this.module;if(module){var url="/module/meta?moduleName=".concat(module);this.$http.get(url).then((function(response){_this2.moduleObj=response.data.meta.module}))}},changeDataType:function(criteria){if("DATE_TIME"===criteria.fieldObj[0].dataTypeEnum._name||"DATE"===criteria.fieldObj[0].dataTypeEnum._name){if(criteria.dateObject){var interval=this.$helpers.daysHoursMinuToSec(criteria.dateObject);criteria.value=1e3*interval}}else criteria.valueArray&&(
// let values = criteria.valueArray.join()
criteria.value={id:criteria.valueArray});this.$forceUpdate()},deleteRow:function(index){this.fieldChange.templateJson.fieldMatcher.splice(index,1)},close:function(){this.$emit("update:fieldUpdateValue",!1)}}},fields_FieldUpdateDialogvue_type_script_lang_js=FieldUpdateDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(fields_FieldUpdateDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldUpdateDialog=component.exports},
/***/134077:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScriptEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/setupActions/components/ScriptEditor.vue?vue&type=template&id=3fe27b0f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container fc-dialog-center-body-p0",attrs:{visible:!0,width:"60%",title:_vm.$t("common.products.script"),"append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("CodeMirror",{attrs:{codeeditor:!0},model:{value:_vm.scriptData.workflowContext.workflowV2String,callback:function($$v){_vm.$set(_vm.scriptData.workflowContext,"workflowV2String",$$v)},expression:"scriptData.workflowContext.workflowV2String"}})],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.actionSave}},[_vm._v(" Save ")])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),CodeMirror=__webpack_require__(919324),ScriptModel=__webpack_require__(721486),ScriptEditorvue_type_script_lang_js={props:["actionObj","moduleName"],components:{CodeMirror:CodeMirror/* default */.Z},data:function(){return{scriptData:null}},created:function(){var actionObj=this.actionObj,moduleName=this.moduleName,scriptObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},actionObj||{}),{},{moduleName:moduleName});this.scriptData=new ScriptModel/* ScriptModel */.q(scriptObj)},methods:{closeDialog:function(){this.$emit("onClose")},actionSave:function(){var isValid=this.scriptData.validate();isValid?(this.$emit("onSave",this.scriptData.serialize()),this.closeDialog()):this.$message.error("Script is Empty")}}},components_ScriptEditorvue_type_script_lang_js=ScriptEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ScriptEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScriptEditor=component.exports},
/***/292974:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return StatusUpdate}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/setupActions/components/StatusUpdate.vue?vue&type=template&id=5163edd4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"40%",title:_vm.$t("setup.setup.change_status"),"custom-class":"dialog-header-padding","append-to-body":!0,"close-on-click-modal":!1,"show-close":!1}},[_vm.isLoading?_c("div",{staticClass:"height120"},[_c("span",{staticClass:"rectangle loading-shimmer"})]):_c("div",{staticClass:"height120 overflow-y-scroll"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mT5",attrs:{filterable:""},model:{value:_vm.statusUpdateObj.new_state,callback:function($$v){_vm.$set(_vm.statusUpdateObj,"new_state",$$v)},expression:"statusUpdateObj.new_state"}},_vm._l(_vm.statusList,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.actionSave}},[_vm._v(" "+_vm._s(_vm.$t("common._common.save")))])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),ChangeStatusModel=__webpack_require__(367389),validation=__webpack_require__(990260),StatusUpdatevue_type_script_lang_js={props:["actionObj","moduleName","moduleId"],data:function(){return{statusUpdateObj:{},statusList:{},isLoading:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var metaModuleId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.isLoading=!0,_this.statusUpdateObj=new ChangeStatusModel/* ChangeStatusModel */.M(_this.actionObj||{}),metaModuleId=null,!(0,validation/* isEmpty */.xb)(_this.moduleId)){_context.next=7;break}return _context.next=6,_this.fetchModuleId();case 6:metaModuleId=_context.sent;case 7:return _context.prev=7,_context.next=10,ChangeStatusModel/* ChangeStatusModel */.M.getTicketStatus(_this.moduleId||metaModuleId);case 10:_this.statusList=_context.sent,_context.next=16;break;case 13:_context.prev=13,_context.t0=_context["catch"](7),_this.$message.error(_context.t0.message);case 16:_this.isLoading=!1;case 17:case"end":return _context.stop()}}),_callee,null,[[7,13]])})))()},methods:{fetchModuleId:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,ChangeStatusModel/* ChangeStatusModel */.M.fetchMetaModuleId(_this2.moduleName);case 3:return _context2.abrupt("return",_context2.sent);case 6:_context2.prev=6,_context2.t0=_context2["catch"](0),_this2.$message.error(_context2.t0.message);case 9:case"end":return _context2.stop()}}),_callee2,null,[[0,6]])})))()},closeDialog:function(){this.$emit("onClose")},actionSave:function(){this.$emit("onSave",this.statusUpdateObj.serialize()),this.closeDialog()}}},components_StatusUpdatevue_type_script_lang_js=StatusUpdatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_StatusUpdatevue_type_script_lang_js,render,staticRenderFns,!1,null,"5163edd4",null)
/* harmony default export */,StatusUpdate=component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/583972:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3aed7174c314bbc14fee9c5cd51e20fa.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/},
/***/581121:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"88cd7135ef1417b08c9498c51d2cda59.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/10189.js.map