(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[1318],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/501318:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CommandsWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/readings/CommandsWidget.vue?vue&type=template&id=c2d3425c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"label-txt-black pT15 pB15 fw-bold  pL30 pR30 header-bottom"},[_vm._v(" "+_vm._s(_vm.$t("asset.assets.commands"))+" ")]),_c("el-tabs",{model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},_vm._l(_vm.tabs,(function(tab){return _c("el-tab-pane",{key:tab.name,attrs:{name:tab.name,label:tab.displayName}},["readings"===_vm.activeTab?_c("Readings",{key:tab.name,attrs:{isActive:tab.isActive,assetId:_vm.details.id,details:_vm.details,portalName:_vm.widget.key+"-topbar",moduleName:_vm.moduleName}}):_vm._e(),"logs"===_vm.activeTab?_c("logs",{key:tab.name,attrs:{isActive:tab.isActive,assetId:_vm.details.id,details:_vm.details,portalName:_vm.widget.key+"-topbar",moduleName:_vm.moduleName}}):_vm._e()],1)})),1),_c("div",{staticClass:"widget-topbar-actions widget-topbar-actions-change"},[_c("portal-target",{attrs:{name:_vm.widget.key+"-topbar"}})],1)],1)},staticRenderFns=[],WritableReadingsvue_type_template_id_1a8239ac_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"scrollable"},[_vm.isActive?[_c("portal",{key:_vm.portalName+"-portalwrap",attrs:{to:_vm.portalName,slim:""}},[_vm.isActive?_c("f-search",{key:_vm.portalName+"-search",staticClass:"mR6",attrs:{searchKey:"name"},model:{value:_vm.list,callback:function($$v){_vm.list=$$v},expression:"list"}}):_vm._e(),_vm.isActive?_c("span",{staticClass:"separator"},[_vm._v("| ")]):_vm._e(),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],attrs:{content:_vm.$t("common._common.refresh")},on:{click:_vm.listRefresh}},[_c("i",{staticClass:"el-icon-refresh fwBold f16"})])],1)]:_vm._e(),_vm.loading?_c("div",{staticClass:"height100 hv-center "},[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm.$validation.isEmpty(_vm.list)?_c("div",{staticClass:"height100 hv-center"},[_c("div",[_c("div",[_c("InlineSvg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-130 emptystate-icon-size"}})],1),_c("div",{staticClass:"fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("asset.readings.no_readings_available"))+" ")])])]):_c("div",[_vm.$validation.isEmpty(_vm.list)?_vm._e():_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.list,fit:!0,"header-cell-style":_vm.headerCellStyle,height:"330px","cell-style":{fontSize:"14px"}}},[_c("el-table-column",{attrs:{label:"Name",width:"400"},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("span",{staticClass:"align-name-field"},[_vm._v(" "+_vm._s(_vm.$getProperty(reading,"row.field.displayName","---"))+" ")])]}}],null,!1,3401992526)}),_c("el-table-column",{attrs:{label:"Value",width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("span",{staticClass:"pL30"},[_vm._v(_vm._s(_vm.getReadingValue(reading)))])]}}],null,!1,3506686011)}),_c("el-table-column",{attrs:{label:"Last Recorded",width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("span",{staticClass:"pL30"},[_vm._v(_vm._s(_vm.getTimeFromNow(reading)))])]}}],null,!1,3471949015)}),_c("el-table-column",{scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("a",{staticClass:"pL30",on:{click:function($event){return _vm.showSetReadingDialog(reading)}}},[_vm._v(" "+_vm._s(_vm.$t("asset.readings.set"))+" ")])]}}],null,!1,3534209858)})],1),_vm.showSetDialog?_c("SetReadingPopup",{key:_vm.newReading.field.id,attrs:{reading:_vm.newReading,saveAction:_vm.closePopup,closeAction:_vm.closePopup,recordId:_vm.details.id,recordName:_vm.details.name}}):_vm._e()],1)],2)},WritableReadingsvue_type_template_id_1a8239ac_scoped_true_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),FSearch=(__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(947748)),validation=__webpack_require__(990260),filters=__webpack_require__(273861),WidgetPagination=__webpack_require__(806339),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),SetReadingValue=__webpack_require__(681121),api=__webpack_require__(32284),WritableReadingsvue_type_script_lang_js={components:{FSearch:FSearch/* default */.Z,Pagination:WidgetPagination/* default */.Z,SetReadingPopup:SetReadingValue/* default */.Z},props:["isActive","portalName","assetId","resize","reset","details","moduleName"],mounted:function(){this.loadData()},data:function(){return{loading:!1,list:null,showSetDialog:!1,newReading:{field:null,value:null},readingType:"writable"}},computed:{setValue:function(){var data=this.$store.state.publishdata.setValue[this.details.id];return data?data[this.reading.field.id]:null}},watch:{widget:{immediate:!0,handler:"loadData"},setValue:{handler:"setFieldValue"}},methods:{loadData:function(force){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url,params,_yield$API$get,error,data,list;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,url="/v2/reading/latestdata/".concat(_this.assetId),params={readingType:_this.readingType},_context.next=5,api/* API */.bl.get(url,params,{force:force});case 5:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?(_this.$message.error(error.message||"Error Occured"),_this.loading=!1):(list=(data.readingValues||[]).map((function(reading){return(0,objectSpread2/* default */.Z)({name:reading.field.displayName},reading)})),_this.list=list,_this.loading=!1);case 9:case"end":return _context.stop()}}),_callee)})))()},getReadingValue:function(readingRow){var reading=this.$getProperty(readingRow,"row");if(!(0,validation/* isEmpty */.xb)(reading)){var actualValue=reading.actualValue,unit=this.$getProperty(reading,"field.unit","");return(0,validation/* isEmpty */.xb)(actualValue)?"---":"".concat(actualValue," ").concat((0,validation/* isEmpty */.xb)(unit)?"":unit)}return"---"},getTimeFromNow:function(readingRow){var reading=this.$getProperty(readingRow,"row");if(!(0,validation/* isEmpty */.xb)(reading)){var actualValue=reading.actualValue,ttime=reading.ttime;return(0,validation/* isEmpty */.xb)(actualValue)?"---":(0,filters.fromNow)(ttime)}return"---"},showSetReadingDialog:function(readingRow){var reading=this.$getProperty(readingRow,"row"),newReading=this.newReading;newReading.field=reading.field,newReading.value=reading.value,this.showSetDialog=!0},closePopup:function(){this.showSetDialog=!1,this.resetEditObj()},resetEditObj:function(){this.newReading={field:null,value:null}},headerCellStyle:function(){return{"padding-left":"30px","background-color":"#f7faff"}},listRefresh:function(){this.loadData(!0)},setFieldValue:function(){this.setValue&&(this.reading.value=this.setValue)}}},list_WritableReadingsvue_type_script_lang_js=WritableReadingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_WritableReadingsvue_type_script_lang_js,WritableReadingsvue_type_template_id_1a8239ac_scoped_true_render,WritableReadingsvue_type_template_id_1a8239ac_scoped_true_staticRenderFns,!1,null,"1a8239ac",null)
/* harmony default export */,WritableReadings=component.exports,CommandLogsvue_type_template_id_edbccc0e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"scrollable"},[[_c("portal",{key:_vm.portalName+"-portalwrap",attrs:{to:_vm.portalName,slim:""}},[!_vm.$validation.isEmpty(_vm.list)&&_vm.showRedirectButton?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"pR10",staticStyle:{"padding-top":"2px"},attrs:{content:"Redirect to command logs"}},[_c("router-link",{attrs:{to:_vm.resolvePath()}},[_c("fc-icon",{attrs:{group:"navigation",name:"open-window",size:"16"}})],1)],1):_vm._e(),!_vm.$validation.isEmpty(_vm.list)&&_vm.showRedirectButton?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("pagination",{attrs:{currentPage:_vm.page,total:_vm.totalCount,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}),_vm.$validation.isEmpty(_vm.list)?_vm._e():_c("span",{staticClass:"separator"},[_vm._v("|")]),_vm.$validation.isEmpty(_vm.list)?_vm._e():_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticStyle:{"padding-top":"2px"},attrs:{content:_vm.$t("common._common.refresh")},on:{click:_vm.listRefresh}},[_c("i",{staticClass:"el-icon-refresh fwBold f16"})])],1)],_vm.loading?_c("div",{staticClass:"hv-center height100"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm.$validation.isEmpty(_vm.list)?_c("div",{staticClass:"height100 hv-center"},[_c("div",[_c("div",[_c("InlineSvg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-130 emptystate-icon-size"}})],1),_c("div",{staticClass:"fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("asset.readings.no_readings_available"))+" ")])])]):_c("div",[_vm.$validation.isEmpty(_vm.list)?_vm._e():_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.list,height:"330px","header-cell-style":_vm.headerCellStyle,"cell-style":{fontSize:"14px"}}},[_c("el-table-column",{attrs:{label:"Name",width:"300px"},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("span",{staticStyle:{"padding-left":"30px",display:"inline-block"}},[_vm._v(_vm._s(reading.row.field.displayName))])]}}],null,!1,2130980185)}),_c("el-table-column",{attrs:{label:_vm.$t("common._common.set_value")},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"pL30"},[null==scope.row.value?[_vm._v(" null ")]:_vm.isDecimalField(scope.row.field)?[_vm._v(" "+_vm._s(Number(scope.row.value).toFixed(1))+_vm._s(scope.row.field.unit)+" ")]:_vm.isBooleanField(scope.row.field)?[_vm._v(" "+_vm._s(_vm.$fieldUtils.getDisplayValue(scope.row.field,"true"===scope.row.value||"1"===scope.row.value))+" ")]:[_vm._v(" "+_vm._s(_vm.$fieldUtils.getDisplayValue(_vm.addEnumMapField(scope.row.field),scope.row.value))+" ")]],2)]}}],null,!1,232554953)}),_c("el-table-column",{attrs:{label:_vm.$t("common._common.executed_time")},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"pL30"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(scope.row.executedTime))+" ")])]}}],null,!1,3764649096)}),_c("el-table-column",{attrs:{label:_vm.$t("common._common.executed_by"),prop:"id"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"pL30"},[1===scope.row.executedMode||2===scope.row.executedMode||6===scope.row.executedMode?_c("div",[_c("user-avatar",{staticClass:"pm-list-avatar",attrs:{size:"md",user:scope.row.executedBy,showPopover:!1,showLabel:!1}})],1):3===scope.row.executedMode||4===scope.row.executedMode||5===scope.row.executedMode?_c("div",[_c("div",[_vm._v(_vm._s(_vm.$t("common.header.automatic")))])]):_c("div",[_c("div",[_vm._v("---")])])])]}}],null,!1,3509042010)}),_c("el-table-column",{attrs:{label:_vm.$t("common.products.status"),prop:"id"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"pL30"},[1===scope.row.status?_c("div",[_c("div",{staticClass:"fc-green-status bold f13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.success"))+" ")])]):2===scope.row.status?_c("div",[_c("div",{staticClass:"fc-orange-status text-left"},[_vm._v(" "+_vm._s(_vm.$t("controls.data_command_status.sent"))+" ")])]):3===scope.row.status?_c("div",[_c("div",{staticClass:"fc-red-status f13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.error"))+" ")])]):4===scope.row.status?_c("div",[_c("div",{staticClass:"fc-black-13 f13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("controls.data_command_status.sheduled"))+" ")])]):5===scope.row.status?_c("div",[_c("div",{staticClass:"fc-black-13 f13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.without_permission"))+" ")])]):6===scope.row.status?_c("div",[_c("div",{staticClass:"fc-darkRed-status f13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("controls.data_command_status.failed"))+" ")])]):7===scope.row.status?_c("div",[_c("div",{staticClass:"fc-darkOrange-status f13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("controls.data_command_status.retrying"))+" ")])]):_vm._e()])]}}],null,!1,2760079462)})],1)],1)],2)},CommandLogsvue_type_template_id_edbccc0e_scoped_true_staticRenderFns=[],field=(__webpack_require__(648324),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(76265),__webpack_require__(815872)),User=__webpack_require__(426803),_facilio_router=__webpack_require__(329435),CommandLogsvue_type_script_lang_js={components:{UserAvatar:User/* default */.Z,Pagination:WidgetPagination/* default */.Z,FSearch:FSearch/* default */.Z},props:["isActive","portalName","assetId","resize","reset","details","moduleName"],data:function(){return{loading:!1,list:null,totalCount:null,page:1,perPage:50,router:null}},watch:{page:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.loadControlPoints()}},mounted:function(){this.loadControlPoints()},created:function(){this.isBooleanField=field/* isBooleanField */.Mw,this.isDecimalField=field/* isDecimalField */.No},computed:{showRedirectButton:function(){if((0,_facilio_router/* isWebTabsEnabled */.tj)()){var router=(0,_facilio_router/* findRouteForTab */.OD)(_facilio_router/* tabTypes */.VF.CUSTOM,{config:{type:"commands"}});return!(0,validation/* isEmpty */.xb)(router)&&(this.router=router,!0)}return!0}},methods:{loadControlPoints:function(force){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,url,_yield$API$get,error,data,meta,pagination,totalCount;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,params={moduleName:"controlActionCommand",page:_this.page,perPage:_this.perPage,withCount:!0},params.filters=JSON.stringify({resource:{operatorId:36,value:[_this.assetId.toString()]}}),url="/v3/modules/data/list",_context.next=6,api/* API */.bl.get(url,params,{force:force});case 6:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,meta=_yield$API$get.meta,error?error.message||_this.$t("common._common.error_occured"):(_this.list=data["controlActionCommand"],pagination=meta.pagination,totalCount=pagination.totalCount,_this.totalCount=totalCount),_this.loading=!1;case 12:case"end":return _context.stop()}}),_callee)})))()},addEnumMapField:function(fields){var enumMap=fields.values.reduce((function(acc,object){return acc[object.index.toString()]=object.value,acc}),{});return fields.enumMap=enumMap,fields},headerCellStyle:function(){return{"padding-left":"30px","background-color":"#f7faff"}},listRefresh:function(){this.page=1,this.totalCount=0,this.list=null,this.loadControlPoints(!0)},resolvePath:function(){var filters={resource:{operatorId:36,value:["".concat(this.assetId)]}},actualPath="/app/co/cc/commands";if(!(0,validation/* isEmpty */.xb)(this.router)){var _getApp,path=this.router.path;actualPath="/".concat(null===(_getApp=(0,_facilio_router/* getApp */.wx)())||void 0===_getApp?void 0:_getApp.linkName,"/").concat(path,"/commands/all")}return{path:"".concat(actualPath,"?search=").concat(encodeURIComponent(JSON.stringify(filters)))}}}},list_CommandLogsvue_type_script_lang_js=CommandLogsvue_type_script_lang_js,CommandLogs_component=(0,componentNormalizer/* default */.Z)(list_CommandLogsvue_type_script_lang_js,CommandLogsvue_type_template_id_edbccc0e_scoped_true_render,CommandLogsvue_type_template_id_edbccc0e_scoped_true_staticRenderFns,!1,null,"edbccc0e",null)
/* harmony default export */,CommandLogs=CommandLogs_component.exports,CommandsWidgetvue_type_script_lang_js={props:["details","layoutParams","hideTitleSection","sectionKey","widget","resizeWidget","moduleName"],data:function(){return{activeTab:"readings",defaultWidgetHeight:this.layoutParams.h}},components:{Readings:WritableReadings,logs:CommandLogs},computed:{tabs:function(){var activeTab=this.activeTab;return[{name:"readings",displayName:"Readings",isActive:"readings"===activeTab},{name:"logs",displayName:this.$t("common.tabs.logs"),isActive:"logs"===activeTab}]}}},readings_CommandsWidgetvue_type_script_lang_js=CommandsWidgetvue_type_script_lang_js,CommandsWidget_component=(0,componentNormalizer/* default */.Z)(readings_CommandsWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,"c2d3425c",null)
/* harmony default export */,CommandsWidget=CommandsWidget_component.exports},
/***/806339:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/utils/WidgetPagination.vue?vue&type=template&id=6b10cd5b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-widget-pagination"},[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},staticRenderFns=[],WidgetPaginationvue_type_script_lang_js={props:["currentPage","perPage","total","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{total:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.updateCurrentPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.updateCurrentPage()},updateCurrentPage:function(){
// Update currentPage value
this.$emit("update:currentPage",this.page),this.$emit("onChange")}}},utils_WidgetPaginationvue_type_script_lang_js=WidgetPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(utils_WidgetPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetPagination=component.exports},
/***/681121:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetReadingValue}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/readings/SetReadingValue.vue?vue&type=template&id=f05d1da2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-dialog",{attrs:{title:_vm.getTitle,visible:!0,loading:_vm.isSaving,stayOnSave:!0,record:_vm.record,width:_vm.$mobile?"90%":"30%"},on:{save:_vm.saveReading,close:_vm.closeDialog}},[_vm.readingObj?_c("div",{staticClass:"pB30 mT10",attrs:{slot:"content"},slot:"content"},[_c("div",{staticClass:"mb5"},[_vm._v(_vm._s(_vm.getSubTitle))]),_c("div",{staticStyle:{display:"flex"}},[_vm.isBooleanField(_vm.readingObj.field)?_c("div",{staticClass:"pT10 width60"},[_vm._v(" "+_vm._s(_vm.readingObj.field.falseVal||"False")+" "),_c("el-switch",{staticClass:"pL10 pR10",attrs:{disabled:_vm.isNullValueSelected},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}}),_vm._v(" "+_vm._s(_vm.readingObj.field.trueVal||"True")+" ")],1):_vm.isEnumField(_vm.readingObj.field)?_c("div",{staticClass:"width80"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width90",attrs:{disabled:_vm.isNullValueSelected,filterable:"","collapse-tags":""},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}},_vm._l(_vm.fieldOptions,(function(item,index){return _c("el-option",{key:index,attrs:{label:item.label,value:item.value}})})),1)],1):_c("div",{staticClass:"width80"},[_c("el-input",{staticClass:"fc-input-full-border2 control-action-reading-field",staticStyle:{width:"90%","text-align":"left"},attrs:{disabled:_vm.isNullValueSelected,"controls-position":"right",type:_vm.fieldType},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}},[_vm.readingObj.field.unit?_c("template",{slot:"append"},[_vm._v(_vm._s(_vm.readingObj.field.unit)+" ")]):_vm._e()],2)],1),_c("div",{staticStyle:{"padding-top":"10px"}},[_c("el-checkbox",{on:{change:function($event){return _vm.changeValue()}},model:{value:_vm.isNullValueSelected,callback:function($$v){_vm.isNullValueSelected=$$v},expression:"isNullValueSelected"}},[_vm._v("null")])],1)])]):_c("div",{staticClass:"pB40 mT10"},[_vm._v("Loading....")])])},staticRenderFns=[],FDialogNew=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(212826),__webpack_require__(436756)),validation=__webpack_require__(990260),utility_methods=__webpack_require__(555005),utils_field=__webpack_require__(815872),SetReadingValuevue_type_script_lang_js={props:["reading","saveAction","closeAction","recordId","recordName","fieldId","groupId","pointId"],components:{FDialog:FDialogNew/* default */.Z},data:function(){return{readingObj:null,isSaving:!1,record:null,recordLoading:!1,isNullValueSelected:!1}},created:function(){var _this=this;this.isBooleanField=utils_field/* isBooleanField */.Mw,this.isEnumField=utils_field/* isEnumField */.Ri,this.reading?this.readingObj=this.reading:this.groupId?this.$http.get("/v2/controlAction/getControlGroupMeta?controlGroupId="+this.groupId).then((function(response){response.data.result&&response.data.result.controlActionGroup&&(_this.readingObj=response.data.result.controlActionGroup)})):this.pointId?this.$http.get("/v2/controlAction/getControllablePoints").then((function(response){response.data.result&&response.data.result.controllablePoints&&response.data.result.controllablePoints.length&&(_this.readingObj=response.data.result.controllablePoints.find((function(rt){return rt.id===_this.pointId})))})):this.$util.loadLatestReading(this.recordId,!1,!1,null,this.fieldId).then((function(fields){fields&&fields.length&&(_this.readingObj=fields[0])}))},mounted:function(){var _this2=this;this.recordId&&(this.recordLoading=!0,this.$util.getAssetById(this.recordId).then((function(assetObj){_this2.record=assetObj,_this2.recordLoading=!1})))},computed:{fieldOptions:function(){return this.readingObj?(0,utility_methods/* constructFieldOptions */.aE)(this.readingObj.field.enumMap||[]):[]},fieldType:function(){var readingObj=this.readingObj,_ref=readingObj||{},field=_ref.field;return(0,validation/* isEmpty */.xb)(field)||!(0,utils_field/* isNumberField */.Z2)(field)&&!(0,utils_field/* isDecimalField */.No)(field)?"text":"number"},getTitle:function(){return this.readingObj?this.recordLoading?"Loading...":this.recordId&&this.record?this.record.name:this.readingObj.field.displayName:"Loading..."},getSubTitle:function(){return this.readingObj?this.recordLoading?"Loading...":this.recordId&&this.record?this.readingObj.field.displayName:"Set Reading":"Loading..."}},methods:{validate:function(){return(0,validation/* isEmpty */.xb)(this.readingObj.value)?(this.error=!0,this.errorMessage="Please enter a value for the reading"):(this.error=!1,this.errorMessage=""),!this.error},saveReading:function(){var _this$$util,_this3=this;if(this.isNullValueSelected||this.validate()){var newValue;this.isSaving=!0,newValue=null==this.readingObj.value?null:this.readingObj.value.toString();var data=[this.recordId,this.readingObj.field.fieldId,
// this.readingObj.value.toString(),
newValue,this.recordName,this.readingObj.field.displayName,this.groupId];(_this$$util=this.$util).setReadingValue.apply(_this$$util,data).then((function(){_this3.saveAction(_this3.readingObj),_this3.isSaving=!1})).catch((function(){_this3.isSaving=!1}))}},closeDialog:function(){this.closeAction(this.readingObj)},changeValue:function(){this.readingObj.value=null}}},readings_SetReadingValuevue_type_script_lang_js=SetReadingValuevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(readings_SetReadingValuevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetReadingValue=component.exports},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/1318.js.map