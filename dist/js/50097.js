(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[50097],{
/***/348433:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NewDashboardManger}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/NewDashboardManger.vue?vue&type=template&id=6172c831
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isPortalApp()||_vm.$hasPermission("dashboard:CREATE,UPDATE,DELETE")?_c("div",{staticClass:"views-manager-container"},[_c("div",{staticClass:"header-container"},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("div",{staticClass:"d-flex pointer",on:{click:_vm.goBack}},[_c("InlineSvg",{attrs:{src:"arrow-pointing-to-left2",iconClass:"icon icon-xs self-center mR5"}}),_c("div",{staticClass:"text-fc-blue f11 letter-spacing0_5"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.back"))+" ")])],1),_c("div",{staticClass:"heading-black22 pT10"},[_vm._v(" "+_vm._s("Dashboard Manager")+" ")])]),"dashboard"===_vm.activeName?_c("div",{staticClass:"mL-auto"},[_c("div",{staticClass:"btn-container"},[_c("el-select",{staticClass:"fc-input-full-border2 width200px pR15",attrs:{placeholder:"Select App",filterable:""},on:{change:function($event){return _vm.loadDashboardAndSetAppsType(!0,_vm.appId)}},model:{value:_vm.appId,callback:function($$v){_vm.appId=$$v},expression:"appId"}},_vm._l(_vm.apps,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1),_vm.hasCreatePermission?_c("el-button",{staticClass:"manager-primary-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.addFolder()}}},[_c("span",{staticClass:"btn-label"},[_vm._v(_vm._s(_vm.$t("viewsmanager.list.add_folder")))])]):_vm._e(),_vm.hasCreatePermission?_c("el-button",{staticClass:"manager-secondary-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.redirectToDashboardCreation()}}},[_c("span",{staticClass:"btn-label"},[_vm._v(_vm._s("Add dashboard"))])]):_vm._e()],1)]):_vm._e(),"screens"===_vm.activeName?_c("div",{staticClass:"mL-auto"},[_c("portal-target",{attrs:{name:"screens"}})],1):_vm._e(),"remote-screens"===_vm.activeName?_c("div",{staticClass:"mL-auto"},[_c("portal-target",{attrs:{name:"remote-screens"}})],1):_vm._e()]),_c("el-tabs",{staticClass:"manager-tabs-container",model:{value:_vm.activeName,callback:function($$v){_vm.activeName=$$v},expression:"activeName"}},[_c("el-tab-pane",{attrs:{label:"Dashboard",name:"dashboard"}},[_c("div",{staticClass:"height100 overflow-y-scroll pB50",staticStyle:{height:"calc(100vh - 200px)"}},[_vm.loading?_c("div",_vm._l(3,(function(index){return _c("div",{key:index,staticClass:"fc__white__bg__asset d-flex width100 height50 mB10"},[_c("div",{staticClass:"fL width85 self-center"},[_c("div",{staticClass:"fc-animated-background p10 width140px"})]),_c("div",{staticClass:"fR self-center"},[_c("div",{staticClass:"fc-animated-background p10 width140px"})])])})),0):_c("draggable",_vm._b({attrs:{group:"viewGroups"},on:{change:_vm.onFolderChange},model:{value:_vm.headerList,callback:function($$v){_vm.headerList=$$v},expression:"headerList"}},"draggable",_vm.dashboardFolderDragOptions,!1),_vm._l(_vm.headerList,(function(dashboard,index){return _c("div",{key:index,staticClass:"mB10"},[_c("el-collapse",{staticClass:"folder-collapse",model:{value:_vm.activeScreen,callback:function($$v){_vm.activeScreen=$$v},expression:"activeScreen"}},[_c("el-collapse-item",{staticClass:"manager-views-item visibility-visible-actions",attrs:{name:dashboard.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"d-flex width100"},[_c("inline-svg",{staticClass:"d-flex self-center mR30 cursor-drag",attrs:{src:"svgs/drag-and-drop",iconClass:"icon fill-lite-grey pointer"}}),_c("div",{staticClass:"d-flex self-center"},[_c("div",{staticClass:"pR5 f18 bold"},[_c("i",{staticClass:"el-icon-folder icon-close"}),_c("i",{staticClass:"el-icon-folder-opened icon-open"})]),_c("div",{staticClass:"text-uppercase"},[_vm._v(" "+_vm._s(dashboard.label)+" ")])]),_c("div",{staticClass:"d-flex visibility-hide-actions mL-auto"},[_c("inline-svg",{staticClass:"d-flex mR15 self-center",attrs:{src:"svgs/edit-pencil",iconClass:"icon icon-xs fill-grey pointer"},nativeOn:{click:function($event){return $event.stopPropagation(),_vm.updateFolderName(dashboard)}}}),dashboard.childrens&&0===dashboard.childrens.length?_c("inline-svg",{staticClass:"d-flex mR15 self-center fill-grey pointer",attrs:{src:"svgs/delete",iconClass:"icon icon-sm default icon-remove"},nativeOn:{click:function($event){return $event.preventDefault(),_vm.deletedashboardFolder(dashboard,index)}}}):_vm._e()],1)],1)]),_c("draggable",_vm._b({on:{change:_vm.onDashBoardChange},model:{value:dashboard.childrens,callback:function($$v){_vm.$set(dashboard,"childrens",$$v)},expression:"dashboard.childrens"}},"draggable",_vm.dashboardDragOptions,!1),[_vm._l(dashboard.childrens,(function(d,idx){return[d.childrens&&d.childrens.length?_c("el-collapse",{key:idx,staticClass:"dashboardmanager-collapse-two-header",model:{value:_vm.activeScreen1,callback:function($$v){_vm.activeScreen1=$$v},expression:"activeScreen1"}},[_c("el-collapse-item",{staticClass:"dashboardmanager-collapse-two-open",attrs:{title:"inner collapse",name:d.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"dashboardmanager-collapse-two"},[dashboard.childrens&&dashboard.childrens.length?_c("el-row",{key:idx,staticClass:"pointer visibility-visible-actions dashboardmanager-collapse-tw0-header views-item"},[_c("el-col",{staticClass:"flex-middle f12 bold letter-spacing1 self-center",attrs:{span:15}},[_c("img",{staticClass:"mR30 cursor-drag",attrs:{src:__webpack_require__(498410)}}),_c("img",{staticClass:"mR10",attrs:{src:__webpack_require__(327665)}}),_c("div",{staticClass:"fc-black-13 fw4"},[_vm._v(" "+_vm._s(d.label)+" ")])]),_c("el-col",{staticClass:"self-center",attrs:{span:3}},[_c("div",{staticClass:"fc-black-12 text-left"},[d.rawdata.dashboardSharingContext&&"Specific"===_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).shareTo?_c("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"}},[_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("USERS")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.users,(function(user,index){return _c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_c("ol",[user&&user.name?_c("li",[_vm._v(" "+_vm._s(user.name)+" ")]):_vm._e()])])}))],2),_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("ROLES")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.roles,(function(role,index){return _c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_c("ol",[role&&role.name?_c("li",[_vm._v(" "+_vm._s(role.name)+" ")]):_vm._e()])])}))],2),_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("GROUPS")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.groups,(function(group,index){return _c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_c("ol",[group&&group.name?_c("li",[_vm._v(" "+_vm._s(group.name)+" ")]):_vm._e()])])}))],2),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("inline-svg",{staticClass:"mR14 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm pT3"}}),_vm._v("Specific ")],1)]):_c("span",{staticClass:"fw4 line-height-normal"},[_c("inline-svg",{staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm pT3"}}),_vm._v(" "+_vm._s(d.rawdata.dashboardSharingContext?_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).shareTo:"")+" ")],1)],1)]),d.rawdata&&d.rawdata.mobileEnabled?_c("el-col",{staticClass:"flex-middle",attrs:{span:2}},[_c("img",{staticClass:"mR15",attrs:{src:__webpack_require__(796077)}}),_c("div",{staticClass:"fc-black-12 fw4"},[_vm._v(" Enabled ")])]):_c("el-col",{staticClass:"flex-middle pointer",attrs:{span:2}},[_c("inline-svg",{staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/mobile-grey",iconClass:"icon icon-sm"}}),_c("div",{staticClass:"fc-black-12 pointer fw4"},[_vm._v(" Disabled ")])],1),_c("el-col",{staticClass:"flex-middle justify-content-end text-right position-relative",attrs:{span:4}},[_c("el-dropdown",[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{staticClass:"mR10",attrs:{src:__webpack_require__(935010),width:"12",height:"12"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.hasCreatePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.openClonePopup(d)}}},[_vm._v(" "+_vm._s(_vm.$t("common.header.clone_dashboard"))+" ")])]):_vm._e(),_vm.isShowCloneToAnotherApp&&_vm.hasCreatePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.openClonePopup(d,!0)}}},[_vm._v(" "+_vm._s(_vm.$t("common.dashboard.clone_to_another_app"))+" ")])]):_vm._e(),_vm.hasCreatePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.openMoveToPopup(d)}}},[_vm._v(" "+_vm._s(_vm.$t("common.dashboard.move_to_another_app"))+" ")])]):_vm._e(),_vm.hasDashboardEditPermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.redirectToDashboardEdit(d)}}},[_vm._v(" Edit ")])]):_vm._e(),d.id>-1&&_vm.hasDeletePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.deletedashboard(d,index,idx)}}},[_vm._v(" Delete ")])]):_vm._e(),_vm.hasDashboardEditPermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.EnableMobileDashboardInManager(d,_vm.querryModule)}}},[_vm._v(" "+_vm._s(d.rawdata.mobileEnabled?_vm.$t("home.dashboard.disable_mobile_dashboard"):_vm.$t("home.dashboard.enable_mobile_dashboard"))+" ")])]):_vm._e()],1)],1),_c("div",{staticClass:"visibility-hide-actions dashboard-manager-collapse-actions pB10 pT0"},[_vm.hasSharePermission?_c("inline-svg",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm default share-icon",title:"Share","data-position":"top","data-arrow":"true"},on:{click:function($event){return _vm.sharedDashboard(d)}}}):_vm._e(),_c("inline-svg",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"self-center vertical-text-top fill-grey default",attrs:{src:"svgs/link",iconClass:"icon icon-sm-md default",title:"Link","data-position":"top","data-arrow":"true"},on:{click:function($event){return _vm.openDashboard(d)}}})],1)],1)],1):_vm._e()],1)]),_c("draggable",_vm._b({staticClass:"drag-folder",on:{change:_vm.onDashboardchildrenChange},model:{value:d.childrens,callback:function($$v){_vm.$set(d,"childrens",$$v)},expression:"d.childrens"}},"draggable",_vm.dashboardChildrenOptions,!1),[_vm._l(d.childrens,(function(child,icx){return[_c("el-row",{key:icx,staticClass:"pointer visibility-visible-actions dashboardmanager-collapse-two-bg views-item"},[_c("el-col",{staticClass:"flex-middle mL40",attrs:{span:15}},[_c("img",{staticClass:"mR30 cursor-drag",attrs:{src:__webpack_require__(498410)}}),_c("img",{staticClass:"mR10",attrs:{src:__webpack_require__(327665)}}),_c("div",{staticClass:"fc-black-13"},[_vm._v(" "+_vm._s(child.label)+" ")])]),_c("el-col",{staticClass:"self-center",attrs:{span:3}},[_c("div",{staticClass:"fc-black-12 text-left"},[d.rawdata.dashboardSharingContext&&"Specific"===_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).shareTo?_c("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"}},[_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("USERS")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.users,(function(user,index){return[user&&user.name?_c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(user.name)+" ")]):_vm._e()]}))],2),_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("ROLES")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.roles,(function(role,index){return[role&&role.name?_c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(role.name)+" ")]):_vm._e()]}))],2),_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("GROUPS")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.groups,(function(group,index){return[group&&group.name?_c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(group.name)+" ")]):_vm._e()]}))],2),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("inline-svg",{staticClass:"mR14 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm pT3"}}),_vm._v("Specific ")],1)]):_c("span",[_c("inline-svg",{staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm pT3"}}),_vm._v(" "+_vm._s(d.rawdata.dashboardSharingContext?_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).shareTo:"")+" ")],1)],1)]),child.rawdata&&child.rawdata.mobileEnabled?_c("el-col",{staticClass:"flex-middle",attrs:{span:2}},[_c("img",{staticClass:"mR15",attrs:{src:__webpack_require__(796077)}}),_c("div",{staticClass:"fc-black-12 fw4"},[_vm._v(" Enabled ")])]):_c("el-col",{staticClass:"flex-middle pointer",attrs:{span:2}},[_c("inline-svg",{staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/mobile-grey",iconClass:"icon icon-sm"}}),_c("div",{staticClass:"fc-black-12 pointer"},[_vm._v(" Disabled ")])],1),_c("el-col",{staticClass:"flex-middle justify-content-end text-right position-relative",attrs:{span:4}})],1)]}))],2)],2)],1):_c("el-row",{key:idx,staticClass:"pointer visibility-visible-actions views-item"},[_c("el-col",{staticClass:"flex-middle f12 bold letter-spacing1 self-center",attrs:{span:15}},[_c("img",{staticClass:"mR30 cursor-drag",attrs:{src:__webpack_require__(498410)}}),_c("img",{staticClass:"mR10",attrs:{src:__webpack_require__(327665)}}),_c("div",{staticClass:"fc-black-13"},[_vm._v(" "+_vm._s(d.label)+" "+_vm._s(d.childrens&&d.childrens.length?"["+(d.childrens.length-1)+"]":"")+" ")])]),_c("el-col",{staticClass:"self-center",attrs:{span:3}},[_c("div",{staticClass:"fc-black-12 text-left"},[d.rawdata.dashboardSharingContext&&"Specific"===_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).shareTo?_c("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"}},[_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("USERS")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.users,(function(user,index){return[user&&user.name?_c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(user.name)+" ")]):_vm._e()]}))],2),_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("ROLES")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.roles,(function(role,index){return[role&&role.name?_c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(role.name)+" ")]):_vm._e()]}))],2),_c("div",{staticClass:"popover-content p10"},[_c("div",{staticClass:"header"},[_vm._v("GROUPS")]),_vm._l(_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).data.groups,(function(group,index){return[group&&group.name?_c("div",{key:index,staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(group.name)+" ")]):_vm._e()]}))],2),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("inline-svg",{staticClass:"mR14 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm pT3"}}),_vm._v("Specific ")],1)]):_c("span",[_c("inline-svg",{staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm pT3"}}),_vm._v(" "+_vm._s(d.rawdata.dashboardSharingContext?_vm.getDashboardSharedInfo(d.rawdata.dashboardSharingContext).shareTo:"")+" ")],1)],1)]),d.rawdata&&d.rawdata.mobileEnabled?_c("el-col",{staticClass:"flex-middle",attrs:{span:2}},[_c("img",{staticClass:"mR15",attrs:{src:__webpack_require__(796077)}}),_c("div",{staticClass:"fc-black-12 fw4"},[_vm._v("Enabled")])]):_c("el-col",{staticClass:"flex-middle pointer",attrs:{span:2}},[_c("inline-svg",{staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/mobile-grey",iconClass:"icon icon-sm"}}),_c("div",{staticClass:"fc-black-12 pointer"},[_vm._v(" Disabled ")])],1),_c("el-col",{staticClass:"flex-middle justify-content-end text-right position-relative",attrs:{span:4}},[_c("el-dropdown",[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{staticStyle:{"margin-right":"28px"},attrs:{src:__webpack_require__(935010),width:"12",height:"12"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.hasCreatePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.openClonePopup(d)}}},[_vm._v(" "+_vm._s(_vm.$t("common.header.clone_dashboard"))+" ")])]):_vm._e(),_vm.isShowCloneToAnotherApp&&_vm.hasCreatePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.openClonePopup(d,!0)}}},[_vm._v(" "+_vm._s(_vm.$t("common.dashboard.clone_to_another_app"))+" ")])]):_vm._e(),_vm.hasCreatePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.openMoveToPopup(d)}}},[_vm._v(" "+_vm._s(_vm.$t("common.dashboard.move_to_another_app"))+" ")])]):_vm._e(),_vm.hasDashboardEditPermission&&_vm.hasEditPermission(d)?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.redirectToDashboardEdit(d)}}},[_vm._v(" Edit ")])]):_vm._e(),d.id>-1&&_vm.hasDeletePermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.deletedashboard(d,index,idx)}}},[_vm._v(" Delete ")])]):_vm._e(),_vm.hasDashboardEditPermission?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.EnableMobileDashboardInManager(d,_vm.querryModule)}}},[_vm._v(" "+_vm._s(d.rawdata.mobileEnabled?_vm.$t("home.dashboard.disable_mobile_dashboard"):_vm.$t("home.dashboard.enable_mobile_dashboard"))+" ")])]):_vm._e()],1)],1),_c("div",{staticClass:"visibility-hide-actions dashboard-manager-collapse-actions"},[_vm.hasSharePermission?_c("div",{attrs:{id:"share"},on:{click:function($event){return _vm.sharedDashboard(d)}}},[_c("inline-svg",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mR10 self-center vertical-text-top fill-grey",attrs:{src:"svgs/share",iconClass:"icon icon-sm default share-icon",title:"Share","data-position":"top","data-arrow":"true"}})],1):_vm._e(),_c("div",{attrs:{id:"open"},on:{click:function($event){return _vm.openDashboard(d)}}},[_c("inline-svg",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"self-center vertical-text-top fill-grey default",attrs:{src:"svgs/link",iconClass:"icon icon-sm-md default",title:"Link","data-position":"top","data-arrow":"true"}})],1)])],1)],1)]}))],2)],2)],1)],1)})),0)],1)]),_c("el-tab-pane",{attrs:{label:"Screens",name:"screens"}},[_c("div",{staticClass:"pm-summary-inner-container"},[_c("div",{},[_c("div",[_c("dashboard-screens",{attrs:{module:_vm.module?_vm.module.module:"workorder",activeName:_vm.activeName}})],1)])])]),_c("el-tab-pane",{attrs:{label:"Remote Screens",name:"remote-screens"}},[_c("div",{staticClass:"pm-summary-inner-container"},[_c("div",{},[_c("div",{},[_c("dashboard-remote-screens",{attrs:{activeName:_vm.activeName}})],1)])])])],1),_c("div"),_vm.sharedialogVisible&&_vm.selectedDashboard?_c("ShareWith",{ref:"dashboard-sharing-section",attrs:{appId:_vm.appId,dashboard:_vm.selectedDashboard,dialogVisible:_vm.sharedialogVisible},on:{"update:dialogVisible":function($event){_vm.sharedialogVisible=$event},"update:dialog-visible":function($event){_vm.sharedialogVisible=$event}}}):_vm._e(),_c("el-dialog",{attrs:{title:(_vm.updateFolder?"Update":"Add")+" Dashboard Folder",visible:_vm.showAddDashboardfolder,width:"30%","before-close":_vm.closeAddDashboard},on:{"update:visible":function($event){_vm.showAddDashboardfolder=$event}}},[_c("div",{staticClass:"height150"},[_c("el-input",{staticClass:"create-dashboard-input-title fc-input-full-border2",attrs:{autofocus:!0,placeholder:"Enter the Folder Name"},model:{value:_vm.dashboardfolderName,callback:function($$v){_vm.dashboardfolderName=$$v},expression:"dashboardfolderName"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeAddDashboard()}}},[_vm._v("Cancel")]),_vm.updateFolder?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.updateDashboardFolder()}}},[_vm._v("Update")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addDashbopardFolder()}}},[_vm._v("Save")])],1)]),_vm.isClone?_c("div",{staticClass:"dashboard-share dialog-box"},[_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Clone Dashboard",visible:_vm.isClone,width:"35%","append-to-body":!0},on:{"update:visible":function($event){_vm.isClone=$event}}},[_c("div",[_c("div",{staticClass:"clonePopup"},[_c("el-form",{ref:"cloneDashboardForm",staticClass:"fL",attrs:{rules:_vm.rules,model:_vm.dashboardCloneObj}},[_c("el-form-item",{staticClass:"mB10",attrs:{label:"Dashboard Name",prop:"name",required:!0}},[_c("el-input",{staticClass:"width300px fc-input-full-border2 pR15",model:{value:_vm.dashboardCloneObj.name,callback:function($$v){_vm.$set(_vm.dashboardCloneObj,"name",$$v)},expression:"dashboardCloneObj.name"}})],1),_vm.isCloneToAnotherApp?_c("el-form-item",{staticClass:"mB10",attrs:{label:"Target Application",prop:"name"}},[_c("el-select",{staticClass:"fc-input-full-border2 width300px pR15",attrs:{filterable:""},on:{change:function($event){return _vm.loadDashboardFolders(_vm.dashboardCloneObj.selectedAppId)}},model:{value:_vm.dashboardCloneObj.selectedAppId,callback:function($$v){_vm.$set(_vm.dashboardCloneObj,"selectedAppId",$$v)},expression:"dashboardCloneObj.selectedAppId"}},_vm._l(_vm.apps,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1)],1):_vm._e(),_vm.isCloneToAnotherApp?_c("el-form-item",{staticClass:"mB10",attrs:{label:"Target Folder",prop:"folder",required:!0}},[_c("el-select",{staticClass:"fc-input-full-border2 width300px pR15",attrs:{filterable:"",required:!0},model:{value:_vm.dashboardCloneObj.folder,callback:function($$v){_vm.$set(_vm.dashboardCloneObj,"folder",$$v)},expression:"dashboardCloneObj.folder"}},_vm._l(_vm.dashboardFoldersList,(function(dashboardFolder){return _c("el-option",{key:dashboardFolder.id,attrs:{label:dashboardFolder.name,value:dashboardFolder.id}})})),1)],1):_vm._e()],1)],1)]),_c("span",{staticClass:"dialog-footer row"},[_c("el-button",{staticClass:"col-6 shareoverbtn shrbtn1",on:{click:function($event){_vm.isClone=!1}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.dashboardSaving},on:{click:function($event){return _vm.cloneDashboardToPortal(_vm.isCloneToAnotherApp)}}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)])],1):_vm._e(),_vm.isMoveTo?_c("div",{staticClass:"dashboard-share dialog-box"},[_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Move Dashboard",visible:_vm.isMoveTo,width:"35%","append-to-body":!0},on:{"update:visible":function($event){_vm.isMoveTo=$event}}},[_c("div",[_c("div",{staticClass:"clonePopup"},[_c("el-form",{ref:"moveToDashboardForm",staticClass:"fL",attrs:{rules:_vm.rules,model:_vm.moveDashboardObj}},[_c("el-form-item",{staticClass:"mB10",attrs:{label:"Target Application"}},[_c("el-select",{staticClass:"fc-input-full-border2 width300px pR15",attrs:{filterable:""},on:{change:function($event){return _vm.loadDashboardFolders(_vm.moveDashboardObj.selectedAppId)}},model:{value:_vm.moveDashboardObj.selectedAppId,callback:function($$v){_vm.$set(_vm.moveDashboardObj,"selectedAppId",$$v)},expression:"moveDashboardObj.selectedAppId"}},_vm._l(_vm.apps,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1)],1),_c("el-form-item",{staticClass:"mB10",attrs:{label:"Target Folder",prop:"folder",required:!0}},[_c("el-select",{staticClass:"fc-input-full-border2 width300px pR15",attrs:{filterable:"",required:!0},model:{value:_vm.moveDashboardObj.folder,callback:function($$v){_vm.$set(_vm.moveDashboardObj,"folder",$$v)},expression:"moveDashboardObj.folder"}},_vm._l(_vm.dashboardFoldersList,(function(dashboardFolder){return _c("el-option",{key:dashboardFolder.id,attrs:{label:dashboardFolder.name,value:dashboardFolder.id}})})),1)],1)],1)],1)]),_c("span",{staticClass:"dialog-footer row"},[_c("el-button",{staticClass:"col-6 shareoverbtn shrbtn1",on:{click:function($event){_vm.isMoveTo=!1}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.dashboardSaving},on:{click:function($event){return _vm.moveDashboardToPortal()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)])],1):_vm._e()],1):_c("div",{staticStyle:{"text-align":"center","margin-top":"20%","font-size":"20px"}},[_c("span",[_vm._v(" You don't have dashboard manager access")])])])},staticRenderFns=[],DashboardScreens=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(339772),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(947522),__webpack_require__(486423)),DashboardRemoteScreens=__webpack_require__(220201),newDashboardlayoutHelper=__webpack_require__(915552),ShareDashboard=__webpack_require__(840225),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),router=__webpack_require__(329435),api=__webpack_require__(32284),validation=__webpack_require__(990260),DashboardlayoutHelper=__webpack_require__(579924),DashboardPermissions=__webpack_require__(463491),NewDashboardMangervue_type_script_lang_js={props:["module"],mixins:[newDashboardlayoutHelper/* default */.Z,DashboardlayoutHelper/* default */.Z,DashboardPermissions/* default */.Z],components:{DashboardScreens:DashboardScreens/* default */.Z,DashboardRemoteScreens:DashboardRemoteScreens/* default */.Z,draggable:vuedraggable_umd_default(),ShareWith:ShareDashboard/* default */.Z},data:function(){return{dashboardfolderName:null,appId:null,apps:[],updateFolder:!1,updateFolderData:null,showAddDashboardfolder:!1,tabs:[{label:"Screens",value:"screens"},{label:"Remote Screens",value:"remote_screens"}],selectedTab:null,activeScreen1:[],activeName:"dashboard",sharedialogVisible:!1,selectedDashboard:null,publishdialogVisible:!1,dashboardlist:{workorder:{dashboards:[],displayName:"Maintenance",key:"workorder",buildings:[],license:"MAINTENANCE",createLink:"/app/home/editdashboard/new?create=new"},alarm:{dashboards:[],displayName:"Fault detection and diagnostics",key:"alarm",buildings:[],license:"ALARMS",createLink:"/app/home/editdashboard/new?create=new"},energydata:{dashboards:[],displayName:"Building performance",key:"energydata",buildings:[],license:"ENERGY",createLink:"/app/home/editdashboard/new?create=new"}},isClone:!1,isMoveTo:!1,dashboardCloneObj:{folder:null,selectedAppId:null,dashboard:null,name:null},moveDashboardObj:{folder:null,selectedAppId:null,dashboard:null},dashboardFoldersList:[],dashboardSaving:!1,isCloneToAnotherApp:!1,isShowCloneToAnotherApp:!1,rules:{folder:{required:!0,message:this.$t("common.placeholders.enter_folder_name")},name:{required:!0,message:this.$t("common.placeholders.enter_dashboard_name"),trigger:"change"}},isPortalAppSelected:null}},created:function(){this.$store.dispatch("loadRoles")},mounted:function(){this.availableApps()},computed:{querryModule:function(){return this.$route.query.module?this.$route.query.module:"workorder"},getLicenseEnabledModules:function(){var _this=this;return this.dashboardlist.filter((function(module){return!0===_this.$helpers.isLicenseEnabled(module.license)}))},dashboardChildrenOptions:function(){return{group:"dashboardChildren",disabled:!0}},dashboardDragOptions:function(){return{group:"dashboard"}},dashboardFolderDragOptions:function(){return{group:"dashboardFolder"}}},methods:{availableApps:function(){var _this2=this;api/* API */.bl.get("v2/application/list").then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this2.$message.error(error.message||"Error Occured");else{var _this2$apps;if(_this2.apps=data.application,(null===_this2||void 0===_this2||null===(_this2$apps=_this2.apps)||void 0===_this2$apps?void 0:_this2$apps.length)>1&&(_this2.isShowCloneToAnotherApp=!0),_this2.appId=((0,router/* getApp */.wx)()||{}).id,(0,validation/* isEmpty */.xb)(_this2.appId)){var defaultApp=_this2.apps.find((function(app){return"newapp"===app.linkName}))||_this2.apps[0];_this2.appId=defaultApp.id,_this2.dashboardCloneObj.selectedAppId=_this2.appId}_this2.dashboardCloneObj.selectedAppId=_this2.appId,_this2.loadDashboards(!0,_this2.appId)}}))},loadDashboardAndSetAppsType:function(redirect,appId){var _this3=this;if(this.loadDashboards(redirect,appId),!(0,validation/* isEmpty */.xb)(this.apps)){var PORTALS=this.$constants.appCategory.PORTALS,isPoralApp=this.apps.filter((function(app){return app.id==_this3.appId&&app.appCategory==PORTALS}));this.isPortalAppSelected=!(0,validation/* isEmpty */.xb)(isPoralApp)}},openClonePopup:function(d,isCloneToAnotherApp){this.isClone=!0,this.dashboardCloneObj.dashboard=d,this.dashboardCloneObj.name=d.label,this.isCloneToAnotherApp=isCloneToAnotherApp||!1},openMoveToPopup:function(d){this.isMoveTo=!0,this.moveDashboardObj.dashboard=d},updateFolderName:function(folder){this.updateFolder=!0,this.dashboardfolderName=folder.label,this.updateFolderData=folder.rawdata,this.showAddDashboardfolder=!0},updateDashboardFolder:function(){var _this4=this,dashboardfolderName=this.dashboardfolderName,updateFolderData=this.updateFolderData;this.closeAddDashboard();var reportFolderObj={name:dashboardfolderName,id:updateFolderData.id};this.$http.post("dashboard/updateDashboardFolder?moduleName=workorder",{dashboardFolderContext:reportFolderObj}).then((function(){_this4.updateFolderDataName(),_this4.$message({message:"Dashboard Folder updated",type:"success"})})).catch((function(){_this4.$message({message:"Dashboard Folder not saved",type:"error"})}))},updateFolderDataName:function(){var _this5=this,findIndex=this.headerList.findIndex((function(rt){return rt.id===_this5.updateFolderData.id}));this.headerList[findIndex].label=this.dashboardfolderName,this.updateFolder=!1,this.dashboardfolderName=null},addDashbopardFolder:function(){var _this6=this,dashboardfolderName=this.dashboardfolderName,appId=this.appId;this.closeAddDashboard();var reportFolderObj={name:dashboardfolderName};(0,validation/* isEmpty */.xb)(appId)||(reportFolderObj.appId=appId),this.$http.post("dashboard/addDashboardFolder?moduleName=workorder",{dashboardFolderContext:reportFolderObj}).then((function(response){var dashboardFolderContext=response.data.dashboardFolderContext;_this6.pushDashboardFolder(dashboardFolderContext),_this6.dashboardfolderName=null,_this6.$message({message:"Dashboard Folder added",type:"success"})})).catch((function(){_this6.$message({message:"Dashboard Folder not saved",type:"error"})}))},pushDashboardFolder:function(folder){var data={childrens:[],id:folder.id,label:folder.name,path:{},rawdata:folder};data.rawdata.displayOrder=this.headerList.length+1,this.headerList.push(data)},closeAddDashboard:function(){this.showAddDashboardfolder=!1},addFolder:function(){this.showAddDashboardfolder=!0},publishDashboard:function(d){this.sharedialogVisible=!1,this.selectedDashboard=d,this.publishdialogVisible=!0},sharedDashboard:function(d){this.sharedialogVisible=!0,this.selectedDashboard=d,this.publishdialogVisible=!1},redirectToDashboardCreation:function(){var appId=this.appId;if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.DASHBOARD_CREATION)||{},name=_ref2.name;name&&this.$router.push({name:name,query:{create:"new",appId:appId}})}else{var dashboardlist=this.dashboardlist,querryModule=this.querryModule,link=dashboardlist[querryModule].createLink;appId>0&&(link+="&appId=".concat(appId)),this.$router.push(link)}},redirectToDashboardEdit:function(dashboardObj){var path=dashboardObj.path,linkName=dashboardObj.linkName,appId=this.appId;if((0,router/* isWebTabsEnabled */.tj)()){var _ref3=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.DASHBOARD_EDITOR)||{},name=_ref3.name;name&&this.$router.push({name:name,params:{dashboardlink:linkName},query:{create:"edit",appId:appId}})}else{var link=path.editPath;appId>0&&(link+="&appId=".concat(appId)),this.$router.push({path:link})}},openDashboard:function(dashboardObj){var path=dashboardObj.path,linkName=dashboardObj.linkName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.DASHBOARD_VIEWER)||{},name=_ref4.name;name&&this.$router.push({name:name,params:{dashboardlink:linkName}})}else this.$router.push({path:path.path})},switchdashboard:function(command){this.loadDashboardsList(),this.$router.replace({query:{module:command}})},loadDashboardsList:function(){if("energydata"===this.querryModule){this.loadAll=!0;var self=this;self.managerloading=!0;var self2=self;Promise.all([this.loadBuildings({module:"energydata"}),this.loadSite()]).then((function(){self.loadDashboardList(!0),self2.dashboardlist[self2.querryModule].dashboards.length&&(self2.activeScreen=[self2.dashboardlist[self2.querryModule].dashboards[0].id])})).catch((function(){}))}else if("alarm"===this.querryModule){this.loadAll=!0;var _self=this;_self.managerloading=!0;var _self2=_self;Promise.all([this.loadBuildings({module:"alarm"}),this.loadSite()]).then((function(){_self.loadDashboardList(!0),_self2.dashboardlist[_self2.querryModule].dashboards.length&&(_self2.activeScreen=[_self2.dashboardlist[_self2.querryModule].dashboards[0].id])})).catch((function(){}))}else{this.loadAll=!0;var _self3=this,_self4=_self3;_self3.managerloading=!0,Promise.all([this.loadBuildings({module:"alarm"}),this.loadSite()]).then((function(){_self3.loadDashboardList(!0),_self4.dashboardlist[_self4.querryModule].dashboards.length&&(_self4.activeScreen=[_self4.dashboardlist[_self4.querryModule].dashboards[0].id])})).catch((function(){}))}},onDashboardchildrenChange:function(){},addDashboardfolder:function(){},updateDashboards:function(dashboards){var self=this;this.$http.post("dashboard/updateDashboard",{dashboards:dashboards}).then((function(){self.$message.success("Dashboard list updated")})).catch((function(){}))},updateDashboardFoler:function(dashboards){var self=this;this.$http.post("dashboard/updateDashboardFolder",{dashboardFolders:dashboards}).then((function(){self.$message.success("Dashboard folder updated")})).catch((function(){}))},onFolderChange:function(data){if(data["moved"]&&data["moved"].element){var i=1;this.headerList.forEach((function(dashboard){dashboard.displayOrder=i,i++})),this.updateDashboardFoler(this.headerList)}},onDashBoardChange:function(data){var _this7=this,dashboardList=this.headerList;if(data["moved"]&&data["moved"].element)for(var _loop=function(){var list=dashboardList[i];if(list.childrens.find((function(rl){return rl.id===data["moved"].element.id}))){var listdata=[],j=1;list.childrens.forEach((function(dashboard){listdata.push({id:dashboard.id,displayOrder:j,dashboardFolderId:list.id}),j++})),_this7.updateDashboards(listdata)}},i=0;i<dashboardList.length;i++)_loop();else if(data["added"]&&data["added"].element)for(var _loop2=function(){var list=dashboardList[_i];if(list.childrens.find((function(rl){return rl.id===data["added"].element.id}))){var listdata=[],j=0;list.childrens.forEach((function(dashboard){listdata.push({id:dashboard.id,displayOrder:j,dashboardFolderId:list.id}),j++})),_this7.updateDashboards(listdata)}},_i=0;_i<dashboardList.length;_i++)_loop2()}}},pages_NewDashboardMangervue_type_script_lang_js=NewDashboardMangervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(pages_NewDashboardMangervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewDashboardManger=component.exports},
/***/595118:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DashboardShare}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/components/DashboardShare.vue?vue&type=template&id=81a2e1e6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-popover",{ref:"popover5",attrs:{placement:"bottom",width:"350",height:"400","popper-class":"sharepopover"},model:{value:_vm.sharingDialogVisible,callback:function($$v){_vm.sharingDialogVisible=$$v},expression:"sharingDialogVisible"}},[_c("div",{staticClass:"share-container"},[_c("el-row",{staticClass:"share-header",attrs:{align:"middle ",guttr:20}},[_c("el-col",{staticStyle:{"padding-right":"35px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"add"},[_c("el-radio",{attrs:{label:1},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.me")))]),_c("el-radio",{attrs:{label:2},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.share.everyone")))]),_c("el-radio",{attrs:{label:3},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.share.specific")))])],1)])],1),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.users")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.sharedUsers,callback:function($$v){_vm.sharedUsers=$$v},expression:"sharedUsers"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.roles")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_roles")},model:{value:_vm.sharedRoles,callback:function($$v){_vm.sharedRoles=$$v},expression:"sharedRoles"}},_vm._l(_vm.roles,(function(role){return _c("el-option",{key:role.id,attrs:{label:role.name,value:role.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.teams")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_teams")},model:{value:_vm.sharedGroups,callback:function($$v){_vm.sharedGroups=$$v},expression:"sharedGroups"}},_vm._l(_vm.groups,(function(group){return _c("el-option",{key:group.id,attrs:{label:group.name,value:group.id}})})),1)],1)])],1):_vm._e(),4===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.portal")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.portalusers,callback:function($$v){_vm.portalusers=$$v},expression:"portalusers"}},_vm._l(_vm.portalusers,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1):_vm._e()],1),_c("div",{staticClass:"dialog-footer row"},[_c("div",{staticClass:"col-6 shareoverbtn shrbtn1",on:{click:function($event){_vm.sharingDialogVisible=!1}}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.cancel"))+" ")]),_c("div",{staticClass:"col-6 shareoverbtn shrbtn2",on:{click:_vm.applySharing}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.confirm"))+" ")])])]),_c("div",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}]},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-share default dashboard-edit share-icon",attrs:{title:"Share","data-position":"top","data-arrow":"true"}})])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ReportHelper=(__webpack_require__(670560),__webpack_require__(507815)),vuex_esm=__webpack_require__(420629),DashboardSharevue_type_script_lang_js={mixins:[ReportHelper/* default */.Z],props:["id","dashboard"],data:function(){return{shareTo:2,sharedUsers:[],sharedRoles:[],portalusers:[],sharedGroups:[],sharingDialogVisible:!1}},watch:{dashboard:{handler:function(newData,oldData){newData!==oldData&&this.loadSharing()},deep:!0}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groups:function(state){return state.groups},users:function(state){return state.users},roles:function(state){return state.roles}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{dashboardLink:function(){return this.$route.params.dashboardlink}}),created:function(){this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadUsers")},mounted:function(){this.loadSharing(),this.loadPortalUsers()},methods:{loadPortalUsers:function(){var self=this;self.$http.get("/setup/portalusers").then((function(response){self.portalusers=response.data.users}))},loadSharing:function(){var self=this;null!==self.dashboard&&self.$http.get("/dashboardsharing/"+self.dashboard.id).then((function(response){if(response.data.dashboardSharing)if(0===response.data.dashboardSharing.length)self.shareTo=2;else{self.sharedUsers=[],self.sharedRoles=[],self.sharedGroups=[];for(var i=0;i<response.data.dashboardSharing.length;i++){var dashboardSharing=response.data.dashboardSharing[i];1===dashboardSharing.sharingType?self.sharedUsers.push(dashboardSharing.orgUserId):2===dashboardSharing.sharingType?self.sharedRoles.push(dashboardSharing.roleId):3===dashboardSharing.sharingType?self.sharedGroups.push(dashboardSharing.groupId):4===dashboardSharing.sharingType&&self.sharedUsers.push(dashboardSharing.orgUserId)}1===response.data.dashboardSharing.length&&1===self.sharedUsers.length&&self.sharedUsers[0]===self.getCurrentUser().ouid?self.shareTo=1:self.shareTo=3}}))},applySharing:function(){var self=this;self.sharingDialogVisible=!1;var dashboardSharing=[];if(1===self.shareTo)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});else if(3===self.shareTo){if(self.sharedUsers.length>0){dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});for(var i=0;i<self.sharedUsers.length;i++)self.sharedUsers[i]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[i]})}if(self.sharedRoles.length>0)for(var _i=0;_i<self.sharedRoles.length;_i++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:2,roleId:self.sharedRoles[_i]});if(self.sharedGroups.length>0)for(var _i2=0;_i2<self.sharedGroups.length;_i2++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:3,groupId:self.sharedGroups[_i2]})}else if(4===self.shareTo&&self.sharedUsers.length>0)for(var _i3=0;_i3<self.sharedUsers.length;_i3++)self.sharedUsers[_i3]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[_i3]});self.$http.post("/dashboardsharing/apply",{dashboardId:self.dashboard.id,dashboardSharing:dashboardSharing}).then((function(response){self.$message({message:"Sharing applied successfully!",type:"success"})}))}}},components_DashboardSharevue_type_script_lang_js=DashboardSharevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_DashboardSharevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardShare=component.exports},
/***/840225:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ShareDashboard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/components/ShareDashboard.vue?vue&type=template&id=344179d1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:"Share the Dashboard",visible:_vm.dialogVisible,width:"51%","custom-class":"dashboardShare-dialog","before-close":_vm.handleClose},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_vm.isSelectedUserLoading?_c("div",{staticClass:"dashboard-share-form-with-container pB51"},_vm._l(2,(function(i){return _c("div",{key:"option_available_list-"+i,staticClass:"lines loading-shimmer"})})),0):_c("div",{staticClass:"dashboard-share-form-with-container pB51"},[_c("el-radio-group",{staticClass:"sharing-radio-icon",model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},_vm._l(_vm.shareWithTypes,(function(displayLabel,value){return _c("el-radio",{key:value,staticClass:"fc-radio-btn",attrs:{label:parseInt(value)},on:{change:_vm.onChangeSharingTo}},[_vm._v(" "+_vm._s(displayLabel)+" ")])})),1),_vm.isSpecific?_c("div",{staticClass:"specific-pb"},[_c("div",{staticClass:"specific_user-header"},[_vm._v(" "+_vm._s(_vm.$t("common.sharing_permission.select_user"))+" ")]),_c("div",{staticClass:"specific_user-descrp"},[_vm._v(" "+_vm._s(_vm.$t("common.dashboard.dashboard_sharing_desc"))+" ")]),_c("div",{staticClass:"user-selection-container"},[_c("div",{staticClass:"user-selection-container-block avaiable-user-container"},[_c("div",{staticClass:"header-section"},[_vm._v(" "+_vm._s(_vm.$t("common.sharing_permission.available_user"))+" ")]),_c("div",{staticClass:"user-selection-filter-container"},[_c("el-select",{staticClass:"width100 border-right2",on:{change:function($event){_vm.searchText=null}},model:{value:_vm.shareWithSelected,callback:function($$v){_vm.shareWithSelected=$$v},expression:"shareWithSelected"}},_vm._l(_vm.specificUser,(function(option,index){return _c("el-option",{key:index,attrs:{label:option,value:parseInt(index)}})})),1),_c("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"Search",clearable:""},on:{input:_vm.searchContent,clear:_vm.searchContent},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1),_c("div",{staticClass:"list-container"},[_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(6,(function(i){return _c("div",{key:"available_list-"+i,staticClass:"lines loading-shimmer"})})),0):_vm._l(_vm.filteredList,(function(element,index){return _c("div",{key:"filteredList-"+index,staticClass:"block-card"},[_c("span",{staticClass:"block-text"},[_vm._v(_vm._s(element.name))]),_c("i",{staticClass:"el-icon-plus addition-plus-icon",on:{click:function($event){return _vm.addcolumn(element)}}})])}))],2)]),_c("div",{staticClass:"user-selection-container-block selected-user-container"},[_c("div",{staticClass:"header-section"},[_vm._v(" "+_vm._s(_vm.$t("common.sharing_permission.selected_user"))+" ")]),_c("div",{staticClass:"list-container"},[_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(3,(function(i){return _c("div",{key:"selected_list-"+i,staticClass:"lines loading-shimmer"})})),0):_vm.$validation.isEmpty(_vm.selectedUsers)?_c("div",{staticClass:"empty-state"},[_vm._v(" "+_vm._s(_vm.$t("common.sharing_permission.add_here"))+" ")]):_c("draggable",{staticClass:"dragArea",attrs:{group:"people",handle:".rearrange-icon"},model:{value:_vm.selectedUsers,callback:function($$v){_vm.selectedUsers=$$v},expression:"selectedUsers"}},_vm._l(_vm.selectedUsers,(function(element,index){return _c("div",{key:"selected-user-"+index,staticClass:"block-card"},[_c("div",{staticClass:"flex-middle"},[_c("el-tooltip",{staticStyle:{height:"16px"},attrs:{effect:"dark",content:_vm.$t("common.sharing_permission.reorder"),placement:"top"}},[_c("inline-svg",{staticClass:"rearrange-icon cursor-move",attrs:{src:"svgs/ic-drag-handle",iconClass:"icon icon-sm-md"}})],1),_c("div",{staticClass:"block-text2 mL5"},[_vm._v(_vm._s(element.name))])],1),_c("i",{staticClass:"el-icon-close addition-plus-icon",on:{click:function($event){return _vm.removeColumn(index)}}})])})),0)],1)])])]):_vm._e(),_vm.isOnlyMe?_vm._e():_c("div",{staticClass:"mT30"},[_c("el-checkbox",{model:{value:_vm.hasEditPermission,callback:function($$v){_vm.hasEditPermission=$$v},expression:"hasEditPermission"}},[_vm._v(" "+_vm._s(_vm.$t("common.sharing_permission.permission_desc"))+" ")])],1)],1),_c("span",{staticClass:"dialog-footer row"},[_c("div",{staticClass:"col-6 shareoverbtn shrbtn1",on:{click:_vm.handleClose}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.cancel"))+" ")]),_c("div",{staticClass:"col-6 shareoverbtn shrbtn2",on:{click:_vm.applySharing}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.save"))+" ")])])])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),slicedToArray=__webpack_require__(554621),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),picklist=__webpack_require__(961358),shareWithTypeValue={ONLY_ME:1,EVERYONE:2,SELECT_USER:3},specificUserValue={USER:1,ROLE:2,GROUP:3},ShareDashboardvue_type_script_lang_js={props:["dashboard","dialogVisible","appId"],components:{draggable:vuedraggable_umd_default()},data:function(){return{shareWithTypeValue:shareWithTypeValue,specificUserValue:specificUserValue,viewSharingDetails:{},hasEditPermission:!1,sharingDetails:null,isLoading:!1,shareTo:shareWithTypeValue.EVERYONE,roleList:[],selectedUsers:[],userList:[],searchText:null,shareWithSelected:specificUserValue.USER,shareWithTypes:{1:"Only Me",2:"Everyone",3:"Select User"},specificUser:{1:"User",2:"Role",3:"Team"},isSelectedUserLoading:!1}},watch:{dashboard:{handler:function(newData,oldData){newData!==oldData&&this.loadSharing()},deep:!0}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadSharing();case 2:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groupList:function(state){return state.groups}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{currentUserId:function(){var _ref=this.getCurrentUser()||{},id=_ref.id;return id||null},isSpecific:function(){var shareTo=this.shareTo;return shareTo===shareWithTypeValue.SELECT_USER},isOnlyMe:function(){var shareTo=this.shareTo;return shareTo===this.shareWithTypeValue.ONLY_ME},filteredList:function(){var _this2=this,shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP,currentList=shareWithSelected===USER?this.userList:shareWithSelected===ROLE?this.roleList:shareWithSelected===GROUP?this.groupList:[],currentUserList=currentList.filter((function(filt){return!_this2.selectedUsers.find((function(element){return element.name===filt.name}))}));return this.searchText&&shareWithSelected!=USER?currentUserList.filter((function(user){var _ref2=user||{},name=_ref2.name;return name.toLowerCase().includes(_this2.searchText.toLowerCase())})):currentUserList}}),methods:{deserializedDashboardSharingDetails:function(dashboardSharing){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var USER,ROLE,GROUP,_dashboardSharing,sharedData,orgUserId,sharingType,userId,roleId,groupId,linkName,_yield$API$get,data,error,_this3$dashboard;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if((0,validation/* isEmpty */.xb)(dashboardSharing)){_context2.next=14;break}return USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP,(0,validation/* isEmpty */.xb)(dashboardSharing)?_this3.shareTo=shareWithTypeValue.EVERYONE:(_this3.shareTo=shareWithTypeValue.SELECT_USER,1===dashboardSharing.length&&(_dashboardSharing=(0,slicedToArray/* default */.Z)(dashboardSharing,1),sharedData=_dashboardSharing[0],orgUserId=sharedData.orgUserId,sharingType=sharedData.sharingType,1===sharingType&&_this3.currentUserId===orgUserId&&(_this3.shareTo=shareWithTypeValue.ONLY_ME))),userId=dashboardSharing.filter((function(user){return user.sharingType===USER})).map((function(user){return user.orgUserId})),roleId=dashboardSharing.filter((function(user){return user.sharingType===ROLE})).map((function(user){return user.roleId})),groupId=dashboardSharing.filter((function(user){return user.sharingType===GROUP})).map((function(user){return user.groupId})),_context2.next=8,_this3.getUserManagementList(userId);case 8:_this3.loadUserIds(userId),_this3.loadRoleIds(roleId),_this3.loadGroupIds(groupId),_this3.isSelectedUserLoading=!1,_context2.next=16;break;case 14:_this3.shareTo=shareWithTypeValue.EVERYONE,_this3.isSelectedUserLoading=!1;case 16:if(linkName=_this3.$getProperty(_this3,"dashboard.linkName",null),(0,validation/* isEmpty */.xb)(linkName)){_context2.next=24;break}return _context2.next=20,api/* API */.bl.get("v3/dashboard/".concat(linkName));case 20:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this3.hasEditPermission=_this3.$getProperty(data,"dashboardJson.0.locked",null===(_this3$dashboard=_this3.dashboard)||void 0===_this3$dashboard?void 0:_this3$dashboard.locked));case 24:case"end":return _context2.stop()}}),_callee2)})))()},loadSharing:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var self,_yield$API$get2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(self=_this4,null!==_this4.dashboard){_context3.next=3;break}return _context3.abrupt("return");case 3:return _this4.isSelectedUserLoading=!0,_this4.shareTo=null,self.isLoading=!0,_context3.next=8,api/* API */.bl.get("/dashboardsharing/"+self.dashboard.id);case 8:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?self.isSelectedUserLoading=!1:data.dashboardSharing?_this4.deserializedDashboardSharingDetails(data.dashboardSharing):self.isSelectedUserLoading=!1,self.isLoading=!1;case 13:case"end":return _context3.stop()}}),_callee3)})))()},applySharing:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var self,sharingData,dashboardSharing,params,_API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:self=_this5,sharingData=_this5.serializeData(),dashboardSharing=sharingData.dashboardSharing,params={dashboard:{locked:self.hasEditPermission,id:self.dashboard.id,dashboardSharingContext:(0,toConsumableArray/* default */.Z)(dashboardSharing)}},_API$post=api/* API */.bl.post("/dashboard/updateDashboard",params),_API$post.data,error=_API$post.error,error||self.$message({message:"Sharing applied successfully!",type:"success"}),_this5.handleClose();case 7:case"end":return _context4.stop()}}),_callee4)})))()},handleClose:function(){this.$emit("update:dialogVisible",!1)},onChangeSharingTo:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_this6.shareTo===shareWithTypeValue.ONLY_ME&&(_this6.hasEditPermission=!1),_this6.shareTo===shareWithTypeValue.SELECT_USER&&_this6.getUserManagementList(),_this6.shareWithSelected=specificUserValue.USER,_this6.selectedUsers=[];case 4:case"end":return _context5.stop()}}),_callee5)})))()},getUserManagementList:function(){var _arguments=arguments,_this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var userIds;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return userIds=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:null,_this7.isLoading=!0,_context6.next=4,_this7.loadUsersList(userIds);case 4:return _context6.next=6,_this7.loadRoleList();case 6:return _context6.next=8,_this7.$store.dispatch("loadGroups");case 8:_this7.isLoading=!1;case 9:case"end":return _context6.stop()}}),_callee6)})))()},loadUsersList:function(){var _arguments2=arguments,_this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var userIds,appId,searchText,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return userIds=_arguments2.length>0&&void 0!==_arguments2[0]?_arguments2[0]:null,appId=_this8.appId,searchText=_this8.searchText,_context7.next=4,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"users",filters:{applicationId:{value:[appId]}}},searchText:searchText,defaultIds:userIds});case 4:_yield$getFieldOption=_context7.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this8.$message.error(error.message||"Error Occured"):_this8.userList=options.map((function(user){return{name:user.label,id:user.value}}));case 8:case"end":return _context7.stop()}}),_callee7)})))()},loadRoleList:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var appId,params,_yield$API$get3,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:if(appId=_this9.appId,!(0,validation/* isEmpty */.xb)(appId)){_context8.next=3;break}return _context8.abrupt("return");case 3:return params={search:_this9.searchText,appId:appId},_context8.next=6,api/* API */.bl.get("/setup/roles",params);case 6:_yield$API$get3=_context8.sent,data=_yield$API$get3.data,error=_yield$API$get3.error,error?_this9.$message.error(error.message||"Error Occured"):_this9.roleList=data.roles||[];case 10:case"end":return _context8.stop()}}),_callee8)})))()},searchContent:debounce_default()((function(){var shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER;shareWithSelected===USER&&this.loadUsersList()}),500),loadUserIds:function(usersId){var userList=this.userList,userDetails=(userList||[]).filter((function(user){return(usersId||[]).includes(user.id)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{userId:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(userDetails))},loadRoleIds:function(roleId){var roleList=this.roleList,roleDetails=(roleList||[]).filter((function(user){return(roleId||[]).includes(user.roleId)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{roleIdKey:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(roleDetails))},loadGroupIds:function(groupId){var groupList=this.groupList,groupDetails=(groupList||[]).filter((function(user){return(groupId||[]).includes(user.groupId)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{groupId:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(groupDetails))},addcolumn:function(element){var shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP;shareWithSelected===USER?this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{userId:element.id})):shareWithSelected===ROLE?this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{roleIdKey:element.id})):shareWithSelected===GROUP&&this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{groupId:element.id}))},removeColumn:function(index){this.selectedUsers.splice(index,1)},serializeData:function(){var _this10=this,currentUserId=this.currentUserId,selectedUsers=this.selectedUsers,sharedUserIds=selectedUsers.filter((function(user){return user.userId})).map((function(user){return user.userId})),sharedRoleIds=selectedUsers.filter((function(user){return user.roleIdKey})).map((function(user){return user.roleIdKey})),sharedGroupIds=selectedUsers.filter((function(user){return user.groupId})).map((function(user){return user.groupId})),sharedUserDetails=[],sharedRoleDetails=[],sharedGroupDetails=[];this.shareTo===shareWithTypeValue.ONLY_ME?sharedUserDetails.push({sharingType:1,orgUserId:currentUserId,dashboardId:this.dashboard.id}):this.shareTo===shareWithTypeValue.SELECT_USER&&((0,validation/* isEmpty */.xb)(sharedUserIds)||(sharedUserDetails=sharedUserIds.map((function(userId){return userId!==currentUserId?{sharingType:1,orgUserId:userId,dashboardId:_this10.dashboard.id}:{sharingType:1,orgUserId:currentUserId,dashboardId:_this10.dashboard.id}}))),(0,validation/* isEmpty */.xb)(sharedRoleIds)||(sharedRoleDetails=sharedRoleIds.map((function(roleId){return{sharingType:2,roleId:roleId,dashboardId:_this10.dashboard.id}}))),(0,validation/* isEmpty */.xb)(sharedGroupIds)||(sharedGroupDetails=sharedGroupIds.map((function(groupId){return{sharingType:3,groupId:groupId,dashboardId:_this10.dashboard.id}}))));var sharingDetails=[].concat((0,toConsumableArray/* default */.Z)(sharedUserDetails),(0,toConsumableArray/* default */.Z)(sharedRoleDetails),(0,toConsumableArray/* default */.Z)(sharedGroupDetails));return{dashboardSharing:sharingDetails}}}},components_ShareDashboardvue_type_script_lang_js=ShareDashboardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ShareDashboardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ShareDashboard=component.exports},
/***/171140:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewDashboard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/forms/NewDashboard.vue?vue&type=template&id=32f74c7c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-form",{ref:"newDashboardForm",attrs:{type:"dialog50",title:"New Dashboard",model:_vm.model},on:{save:_vm.save},scopedSlots:_vm._u([{key:"form",fn:function(fscope){return[_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-input",{staticClass:"form-item",attrs:{"float-label":"Name"},model:{value:fscope.formModel.dashboardName,callback:function($$v){_vm.$set(fscope.formModel,"dashboardName",$$v)},expression:"fscope.formModel.dashboardName"}})],1)],1),_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-input",{staticClass:"form-item",attrs:{"float-label":"Description",type:"textarea"},model:{value:fscope.formModel.dashboardDesc,callback:function($$v){_vm.$set(fscope.formModel,"dashboardDesc",$$v)},expression:"fscope.formModel.dashboardDesc"}})],1)],1),_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-select",{staticClass:"form-item",attrs:{"float-label":"Module",options:_vm._f("options")(_vm.supportedModules,"displayName","moduleId")},model:{value:fscope.formModel.moduleId,callback:function($$v){_vm.$set(fscope.formModel,"moduleId",$$v)},expression:"fscope.formModel.moduleId"}})],1)],1)]}}])})},staticRenderFns=[],quasar_esm=__webpack_require__(641358),FForm=__webpack_require__(570992),NewDashboardvue_type_script_lang_js={components:{QInput:quasar_esm/* QInput */.Ke,QSelect:quasar_esm/* QSelect */.zO,FForm:FForm/* default */.Z},data:function(){return{model:{dashboardName:null,dashboardDesc:null,moduleId:null},supportedModules:[]}},
// watch: {
//   visibility: function (newVal) {
//     this.visibilityState = newVal
//     if (this.visibilityState) {
//       this.$refs.newDashboardForm.open()
//     }
//     else {
//       this.$refs.newDashboardForm.close()
//     }
//   }
// },
mounted:function(){this.loadSupportedModules()},methods:{loadSupportedModules:function(){var self=this,url="/dashboard/supportedmodules";this.$http.get(url).then((function(response){response.data.modules&&(self.supportedModules=response.data.modules)}))},open:function(){this.$refs.newDashboardForm.open()},close:function(){this.$refs.newDashboardForm.close()},save:function(){var self=this,formModel=self.$refs.newDashboardForm.getFormModel(),formdata={dashboard:{dashboardName:formModel.dashboardName,moduleId:formModel.moduleId}};self.$http.post("/dashboard/add",formdata).then((function(response){self.$message({message:"Dashboard created successfully!",type:"success"}),self.close()}))}}},forms_NewDashboardvue_type_script_lang_js=NewDashboardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_NewDashboardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewDashboard=component.exports},
/***/733569:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DashboardShare}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/dashboard/DashboardShare.vue?vue&type=template&id=f6fc7b0a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-popover",{ref:"popover5",attrs:{placement:"bottom",width:"350",height:"400","popper-class":"sharepopover"},model:{value:_vm.sharingDialogVisible,callback:function($$v){_vm.sharingDialogVisible=$$v},expression:"sharingDialogVisible"}},[_c("div",{staticClass:"share-container"},[_c("el-row",{staticClass:"share-header",attrs:{align:"middle ",guttr:20}},[_c("el-col",{staticStyle:{"padding-right":"35px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"add"},[_c("el-radio",{attrs:{label:1},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.me")))]),_c("el-radio",{attrs:{label:2},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.share.everyone")))]),_c("el-radio",{attrs:{label:3},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.share.specific")))])],1)])],1),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.users")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.sharedUsers,callback:function($$v){_vm.sharedUsers=$$v},expression:"sharedUsers"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.roles")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_roles")},model:{value:_vm.sharedRoles,callback:function($$v){_vm.sharedRoles=$$v},expression:"sharedRoles"}},_vm._l(_vm.roles,(function(role){return _c("el-option",{key:role.id,attrs:{label:role.name,value:role.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.teams")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_teams")},model:{value:_vm.sharedGroups,callback:function($$v){_vm.sharedGroups=$$v},expression:"sharedGroups"}},_vm._l(_vm.groups,(function(group){return _c("el-option",{key:group.id,attrs:{label:group.name,value:group.id}})})),1)],1)])],1):_vm._e(),4===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.portal")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.portalusers,callback:function($$v){_vm.portalusers=$$v},expression:"portalusers"}},_vm._l(_vm.portalusers,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1):_vm._e()],1),_c("div",{staticClass:"dialog-footer row"},[_c("div",{staticClass:"col-6 shareoverbtn shrbtn1",on:{click:function($event){_vm.sharingDialogVisible=!1}}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.cancel"))+" ")]),_c("div",{staticClass:"col-6 shareoverbtn shrbtn2",on:{click:_vm.applySharing}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.confirm"))+" ")])])]),_c("div",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}]},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-share default dashboard-edit share-icon",attrs:{title:"Share","data-position":"top","data-arrow":"true"}})])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ReportHelper=(__webpack_require__(670560),__webpack_require__(507815)),vuex_esm=__webpack_require__(420629),DashboardSharevue_type_script_lang_js={mixins:[ReportHelper/* default */.Z],props:["id","dashboard"],data:function(){return{shareTo:2,sharedUsers:[],sharedRoles:[],portalusers:[],sharedGroups:[],sharingDialogVisible:!1}},watch:{dashboard:{handler:function(newData,oldData){newData!==oldData&&this.loadSharing()},deep:!0}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groups:function(state){return state.groups},users:function(state){return state.users},roles:function(state){return state.roles}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{dashboardLink:function(){return this.$route.params.dashboardlink}}),created:function(){this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadUsers")},mounted:function(){this.loadSharing(),this.loadPortalUsers()},methods:{loadPortalUsers:function(){var self=this;self.$http.get("/setup/portalusers").then((function(response){self.portalusers=response.data.users}))},loadSharing:function(){var self=this;null!==self.dashboard&&self.$http.get("/dashboardsharing/"+self.dashboard.id).then((function(response){if(response.data.dashboardSharing)if(0===response.data.dashboardSharing.length)self.shareTo=2;else{self.sharedUsers=[],self.sharedRoles=[],self.sharedGroups=[];for(var i=0;i<response.data.dashboardSharing.length;i++){var dashboardSharing=response.data.dashboardSharing[i];1===dashboardSharing.sharingType?self.sharedUsers.push(dashboardSharing.orgUserId):2===dashboardSharing.sharingType?self.sharedRoles.push(dashboardSharing.roleId):3===dashboardSharing.sharingType?self.sharedGroups.push(dashboardSharing.groupId):4===dashboardSharing.sharingType&&self.sharedUsers.push(dashboardSharing.orgUserId)}1===response.data.dashboardSharing.length&&1===self.sharedUsers.length&&self.sharedUsers[0]===self.getCurrentUser().ouid?self.shareTo=1:self.shareTo=3}}))},applySharing:function(){var self=this;self.sharingDialogVisible=!1;var dashboardSharing=[];if(1===self.shareTo)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});else if(3===self.shareTo){if(self.sharedUsers.length>0){dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});for(var i=0;i<self.sharedUsers.length;i++)self.sharedUsers[i]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[i]})}if(self.sharedRoles.length>0)for(var _i=0;_i<self.sharedRoles.length;_i++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:2,roleId:self.sharedRoles[_i]});if(self.sharedGroups.length>0)for(var _i2=0;_i2<self.sharedGroups.length;_i2++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:3,groupId:self.sharedGroups[_i2]})}else if(4===self.shareTo&&self.sharedUsers.length>0)for(var _i3=0;_i3<self.sharedUsers.length;_i3++)self.sharedUsers[_i3]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[_i3]});self.$http.post("/dashboardsharing/apply",{dashboardId:self.dashboard.id,dashboardSharing:dashboardSharing}).then((function(response){self.$message({message:"Sharing applied successfully!",type:"success"})}))}}},dashboard_DashboardSharevue_type_script_lang_js=DashboardSharevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardSharevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardShare=component.exports},
/***/186267:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewDashboard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/dashboard/NewDashboard.vue?vue&type=template&id=9438a20a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-form",{ref:"newDashboardForm",attrs:{type:"dialog50",title:"New Dashboard",model:_vm.model},on:{save:_vm.save},scopedSlots:_vm._u([{key:"form",fn:function(fscope){return[_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-input",{staticClass:"form-item",attrs:{"float-label":"Name"},model:{value:fscope.formModel.dashboardName,callback:function($$v){_vm.$set(fscope.formModel,"dashboardName",$$v)},expression:"fscope.formModel.dashboardName"}})],1)],1),_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-input",{staticClass:"form-item",attrs:{"float-label":"Description",type:"textarea"},model:{value:fscope.formModel.dashboardDesc,callback:function($$v){_vm.$set(fscope.formModel,"dashboardDesc",$$v)},expression:"fscope.formModel.dashboardDesc"}})],1)],1),_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-select",{staticClass:"form-item",attrs:{"float-label":"Module",options:_vm._f("options")(_vm.supportedModules,"displayName","moduleId")},model:{value:fscope.formModel.moduleId,callback:function($$v){_vm.$set(fscope.formModel,"moduleId",$$v)},expression:"fscope.formModel.moduleId"}})],1)],1)]}}])})},staticRenderFns=[],quasar_esm=__webpack_require__(641358),FForm=__webpack_require__(570992),NewDashboardvue_type_script_lang_js={components:{QInput:quasar_esm/* QInput */.Ke,QSelect:quasar_esm/* QSelect */.zO,FForm:FForm/* default */.Z},data:function(){return{model:{dashboardName:null,dashboardDesc:null,moduleId:null},supportedModules:[]}},
// watch: {
//   visibility: function (newVal) {
//     this.visibilityState = newVal
//     if (this.visibilityState) {
//       this.$refs.newDashboardForm.open()
//     }
//     else {
//       this.$refs.newDashboardForm.close()
//     }
//   }
// },
mounted:function(){this.loadSupportedModules()},methods:{loadSupportedModules:function(){var self=this,url="/dashboard/supportedmodules";this.$http.get(url).then((function(response){response.data.modules&&(self.supportedModules=response.data.modules)}))},open:function(){this.$refs.newDashboardForm.open()},close:function(){this.$refs.newDashboardForm.close()},save:function(){var self=this,formModel=self.$refs.newDashboardForm.getFormModel(),formdata={dashboard:{dashboardName:formModel.dashboardName,moduleId:formModel.moduleId}};self.$http.post("/dashboard/add",formdata).then((function(response){self.$message({message:"Dashboard created successfully!",type:"success"}),self.close()}))}}},dashboard_NewDashboardvue_type_script_lang_js=NewDashboardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_NewDashboardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewDashboard=component.exports},
/***/327665:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"1962b5af0de18b28ea1d5e5e9c2cc531.svg";
/***/},
/***/498410:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d2a8255ccd544514a61fb225394c1736.svg";
/***/},
/***/935010:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/},
/***/796077:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6f42fe6d5d7b0f0d5c297a21248aa41f.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/50097.js.map