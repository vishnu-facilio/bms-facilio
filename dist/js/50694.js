"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[50694],{
/***/950694:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ClosedWoTrend}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/static/ClosedWoTrend.vue?vue&type=template&id=a3abcb0c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.countSummary.loading?_vm._e():_c("div",{staticClass:"row db-test-2 mobile-db-test-2-container"},[_c("div",{staticClass:"col-md-6 col-lg-6 db-test-2-l mobile-db-test-2-l-close-fL",staticStyle:{"text-align":"center",padding:"10px"}},[_c("div",{staticClass:"q-item-main q-item-section",on:{click:function($event){return _vm.navigateTo("duetoday")}}},[_c("div",{staticClass:"q-item-label",staticStyle:{"font-size":"42px","letter-spacing":"0.2px",color:"#e4ba2d","text-align":"center"}},[_vm._v(" "+_vm._s(_vm.countSummary.data.dueToday)+" ")]),_c("div",{staticClass:"count-header"},[_vm._v(_vm._s(_vm.$t("panel.card.due_today")))])])]),_c("div",{staticClass:"col-md-6 col-lg-6 db-test-2-r mobile-db-test-2-l-close-fR",staticStyle:{"text-align":"center",padding:"10px"}},[_c("div",{staticClass:"q-item-main q-item-section",on:{click:function($event){return _vm.navigateTo("overdue")}}},[_c("div",{staticClass:"q-item-label",staticStyle:{"font-size":"42px","letter-spacing":"0.2px",color:"#e07575","text-align":"center"}},[_vm._v(" "+_vm._s(_vm.countSummary.data.overdueOpen)+" ")]),_c("div",{staticClass:"count-header"},[_vm._v(_vm._s(_vm.$t("panel.card.overdue")))])])])]),_c("div",{staticClass:"en-divider"}),_c("div",{staticClass:"row p10 fc-widget-header close-fc-widget-header"},[_c("div",{staticClass:"col-6 pull-left"},[_c("div",{staticClass:"fc-widget-sublabel"},[_vm._v(_vm._s(_vm.countSummary.weekly))])]),_c("div",{staticClass:"col-6 text-right"},[_c("div",{staticClass:"pull-right"},[_c("div",{staticClass:"row fc-widget-option"},[_c("div",{staticClass:"filterButton",class:{active:"Last Week"===_vm.countSummary.period},on:{click:function($event){_vm.countSummary.period="Last Week"}}},[_vm._v(" "+_vm._s(_vm.$t("panel.card.last"))+" ")]),_c("div",{staticClass:"filterButton",class:{active:"Current Week"===_vm.countSummary.period},on:{click:function($event){_vm.countSummary.period="Current Week"}}},[_vm._v(" "+_vm._s(_vm.$t("panel.card.current"))+" ")])])])])]),_c("div",{staticClass:"sp-div-row"}),_c("div",{staticClass:"sp-div-row"}),_c("div",{staticClass:"sp-div-row"}),_vm.countSummary.closed.loading?_vm._e():_c("div",{staticClass:"db-prog-container close-db-prog-container"},[_c("div",{staticClass:"row db-prog-row close-db-prog-row"},[_c("div",{staticClass:"col-4 db-prog-l close-db-prog-l"},[_vm._v(" "+_vm._s(_vm.$t("panel.card.ontime"))+" ")]),_c("div",{staticClass:"col-5 db-prog-c"},[_c("div",{staticClass:"q-progress db-progress-1 ontime-prog close-ontime-prog",staticStyle:{"margin-left":"5px"}},[_c("div",{staticClass:"q-progress-track db-progress-track",staticStyle:{width:"100%"}},[_vm._v("   ")]),_c("div",{staticClass:"q-progress-model",staticStyle:{"border-radius":"10px"},style:{width:_vm.percent(_vm.countSummary.data.workorders,_vm.countSummary.data.Ontime)+"%"}},[_vm._v("   ")])])]),_c("div",{staticClass:"col-3 db-prog-l clickable close-db-prog-l",staticStyle:{"padding-right":"10px"}},[_vm._v(" "+_vm._s(_vm.countSummary.data.Ontime)+" ")])]),_c("div",{staticClass:"row db-prog-row close-db-prog-row"},[_c("div",{staticClass:"col-4 db-prog-l close-db-prog-l"},[_vm._v(" "+_vm._s(_vm.$t("panel.card.overdue"))+" ")]),_c("div",{staticClass:"col-5 db-prog-c"},[_c("div",{staticClass:"q-progress db-progress-1 overdue-prog close-ontime-prog",staticStyle:{"margin-left":"5px"}},[_c("div",{staticClass:"q-progress-track db-progress-track",staticStyle:{width:"100%"}},[_vm._v("   ")]),_c("div",{staticClass:"q-progress-model",staticStyle:{"border-radius":"10px"},style:{width:_vm.percent(_vm.countSummary.data.workorders,_vm.countSummary.data.Overdue)+"%"}},[_vm._v("   ")])])]),_c("div",{staticClass:"col-3 db-prog-l clickable close-db-prog-l",staticStyle:{"padding-right":"10px"}},[_vm._v(" "+_vm._s(_vm.countSummary.data.Overdue)+" ")])])])])},staticRenderFns=[],moment=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(730381)),moment_default=__webpack_require__.n(moment),router=__webpack_require__(329435),ClosedWoTrendvue_type_script_lang_js={data:function(){return{countSummary:{loading:!0,closed:{loading:!0},isdemodata:!1,period:"Current Week",weekly:"",data:{workorders:0,Ontime:0,Overdue:0,dueToday:0,overdueOpen:0}}}},mounted:function(){this.initdata(),this.loadCountSummary()},computed:{today:function(){return this.$options.filters.formatDate(new Date,!0,!1)}},watch:{"countSummary.period":function(newVal){this.initdata()}},methods:{initdata:function(){var self=this;self.countSummary.closed.loading=!0,self.countSummary.weekly=self.weekly(self.countSummary.period),self.$http.get("/report/workorder/preventiveMaintenance?type=closed&period="+self.countSummary.period).then((function(response){var reportData=response.data.reportData,Ontime=reportData.find((function(rt){return rt.Ontime}))?reportData.find((function(rt){return rt.Ontime})).Ontime:0,Overdue=reportData.find((function(rt){return rt.Overdue}))?reportData.find((function(rt){return rt.Overdue})).Overdue:0,countData={Ontime:Ontime||0,Overdue:Overdue||0};self.countSummary.data.Ontime=countData.Ontime,self.countSummary.data.Overdue=countData.Overdue,self.countSummary.isdemodata=!1,self.countSummary.closed.loading=!1})).catch((function(error){self.countSummary.closed.loading=!1}))},loadCountSummary:function(){var self=this;self.countSummary.loading=!0,self.countSummary.weekly=self.weekly(self.countSummary.period),self.$http.get("/report/workorder/preventiveMaintenance?type=countSummary").then((function(response){var reportData=response.data.reportData,dueToday=reportData.find((function(row){return"dueToday"===row.label})),overdue=reportData.find((function(row){return"Overdue"===row.label})),countData={dueToday:dueToday?dueToday.value:0,overdueOpen:overdue?overdue.value:0};self.countSummary.data.dueToday=countData.dueToday,self.countSummary.data.overdueOpen=countData.overdueOpen,self.countSummary.isdemodata=!1,self.countSummary.loading=!1})).catch((function(error){self.countSummary.loading=!1}))},weekly:function(period){switch(period){case"Current Week":var firstDay=moment_default()().startOf("week"),endDay=moment_default()().endOf("week");return moment_default()(firstDay).format("DD")+" - "+this.$options.filters.formatDate(endDay,!0,!1);case"Last Week":var lastWeekStart=moment_default()().subtract(1,"weeks").startOf("week"),lastWeekEnd=moment_default()().subtract(1,"weeks").endOf("week");return moment_default()(lastWeekStart).format("DD")+" - "+this.$options.filters.formatDate(lastWeekEnd,!0,!1);case"Today":return this.$options.filters.formatDate(new Date,!0,!1)}},getDemoData:function(thisObject,period){return"Current Week"===period?thisObject.thisWeek:"Last Week"===period?thisObject.lastWeek:void 0},percent:function(total,value){var percentage=value/total*100;return isNaN(percentage)?0:percentage},navigateTo:function(count){if(!this.$mobile){if(this.countSummary.isdemodata)return void alert("This is a demo data, so you can't drill down the results.");var filterJson={sourceType:this.preventiveCondition},filterPath={path:"/app/wo/orders/"+count,query:{search:JSON.stringify(filterJson)}};if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("workorder",router/* pageTypes */.As.LIST)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:count},query:{search:JSON.stringify(filterJson)}})}else this.$router.push(filterPath)}}}},static_ClosedWoTrendvue_type_script_lang_js=ClosedWoTrendvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(static_ClosedWoTrendvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ClosedWoTrend=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/50694.js.map