"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[64006],{
/***/864006:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FcuList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/cards/FcuList.vue?vue&type=template&id=f2df733e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"dragabale-card height100",class:{"fcu-mobile-list-view":_vm.$mobile,"fcu-list-view":!_vm.$mobile}},[_c("div",{staticClass:"fcu-table-header row"},[_c("div",{staticClass:"fcu-table-name col-10"},[_vm._v(" "+_vm._s(_vm.$t("panel.tyre.FCU"))+" "+_vm._s(_vm.lists.find((function(rt){return rt.value===_vm.listLevel})).label)+" ")]),_c("div",{staticClass:"fcu-select-level col-2"},[_c("el-select",{attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.selectlevel()}},model:{value:_vm.listLevel,callback:function($$v){_vm.listLevel=$$v},expression:"listLevel"}},_vm._l(_vm.lists,(function(list,index){return _c("el-option",{key:index,attrs:{label:list.label,value:list.value}})})),1)],1)]),_vm.loading?_c("div",{staticClass:"shimmer-frame"},[_c("div",{staticClass:"assetcard-shimmer shine"})]):_c("div",{class:{"fcu-mobile-table-body":_vm.$mobile}},[_c("div",{staticClass:"fcu-list-container"},[_c("table",[_c("tr",{staticClass:"fcu-list-header",staticStyle:{background:"#fff","border-bottom":"solid 1px #e6ecf3"}},[_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.sno")))])]),_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.id")))])]),_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.name")))])]),_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.location")))])]),_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.fan")))])]),_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.temp_return")))])]),_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.valve")))])]),_c("th",[_c("div",[_vm._v(_vm._s(_vm.$t("panel.tyre.set")))])])]),_c("tbody",_vm._l(_vm.data,(function(list,index){return _c("tr",{key:index},[_c("td",{staticClass:"fcu-td"},[_c("div",{staticClass:"fcu-sno"},[_vm._v(" "+_vm._s(index+1)+" ")])]),_c("td",{staticClass:"fcu-td"},[_c("div",{staticClass:"fc-id fcu-id pointer",on:{click:function($event){return _vm.redirectToAsset(list.id)}}},[list.id?_c("div",{staticClass:"fc-id fcu-id"},[_vm._v("#"+_vm._s(list.id))]):_vm._e()])]),_c("td",{staticClass:"fcu-td pointer",on:{click:function($event){return _vm.redirectToAsset(list.id)}}},[list.name?_c("div",{staticClass:"fcu-name"},[_vm._v(" "+_vm._s(list.name)+" ")]):_vm._e()]),_c("td",{staticClass:"fcu-td pointer"},[list.spaceName?_c("div",{staticClass:"fcu-spacename pointer",on:{click:function($event){return _vm.openInSpace(list.spaceId)}}},[_vm._v(" "+_vm._s(list.spaceName)+" ")]):_vm._e()]),_c("td",{staticClass:"fcu-td"},[null!==list.fanStatus?_c("div",{staticClass:"fcu-runstatus pointer",on:{click:function($event){return _vm.openInAnalytics(list.id,"runStatusField")}}},[1===list.fanStatus?_c("span",{staticClass:"low-value"},[_vm._v("LOW")]):2===list.fanStatus?_c("span",{staticClass:"medium-value"},[_vm._v(_vm._s(_vm.$t("panel.tyre.medium")))]):3===list.fanStatus?_c("span",{staticClass:"high-value"},[_vm._v(_vm._s(_vm.$t("panel.tyre.high")))]):list.fanStatus<1?_c("span",{staticClass:"off-value"},[_vm._v(_vm._s(_vm.$t("panel.tyre.off")))]):_vm._e()]):_vm._e()]),_c("td",{staticClass:"fcu-td"},[list.returnTemp?_c("div",{staticClass:"fcu-Rt pointer",on:{click:function($event){return _vm.openInAnalytics(list.id,"returnTempField")}}},[_vm._v(" "+_vm._s(list.returnTemp.toFixed(2))),_c("span",{domProps:{innerHTML:_vm._s("&degC")}})]):_vm._e()]),_c("td",{staticClass:"fcu-td"},[list.valveFeedback>-1?_c("div",{staticClass:"fcu-vf pointer",on:{click:function($event){return _vm.openInAnalytics(list.id,"valveFeedbackField")}}},[_vm._v(" "+_vm._s(list.valveFeedback.toFixed(2))),_c("span",{domProps:{innerHTML:_vm._s("%")}})]):_vm._e()]),_c("td",{staticClass:"fcu-td"},[list.setPointTemp?_c("div",{staticClass:"fcu-vf pointer",on:{click:function($event){return _vm.openInAnalytics(list.id,"setPointTempField")}}},[_vm._v(" "+_vm._s(list.setPointTemp.toFixed(2))),_c("span",{domProps:{innerHTML:_vm._s("&degC")}})]):_vm._e()])])})),0)])])])])},staticRenderFns=[],JumpToHelper=(__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(921466)),NewDateHelper=__webpack_require__(105534),router=__webpack_require__(329435),FcuListvue_type_script_lang_js={props:["widget","config"],mixins:[JumpToHelper/* default */.Z],data:function(){return{data:[],cardData:null,loading:!1,buildingList:[],fields:{},selectedBuilding:null,listLevel:"Level 1",lists:[{label:"Level 1",value:"Level 1"},{label:"Level 2",value:"Level 2"},{label:"Level 3",value:"Level 3"}]}},created:function(){this.$store.dispatch("loadBuildings")},mounted:function(){this.loadCardData(),this.updateMeta(),this.loadBuilding()},computed:{staticKey:function(){if(this.widget.dataOptions.cardData){var data=this.widget.dataOptions.cardData;if(data&&data.level)return"emrilllevel"+data.level+"List"}},level:function(){if(this.cardData&&this.cardData.level)return"level "+this.cardData.level},levelKey:function(){if(this.widget.dataOptions&&this.widget.dataOptions.cardData&&this.widget.dataOptions.cardData.level)return"Level "+this.widget.dataOptions.cardData.level},buildingId:function(){if(this.widget.dataOptions&&this.widget.dataOptions.cardData&&this.widget.dataOptions.cardData.selectedBuilding)return parseInt(this.widget.dataOptions.cardData.selectedBuilding)}},methods:{selectlevel:function(){this.loadCardData(this.listLevel)},updateMeta:function(){this.widget.dataOptions.cardData?(this.widget.dataOptions.metaJson=JSON.stringify(this.widget.dataOptions.cardData),this.cardData=this.widget.dataOptions.cardData):this.widget.id>-1&&this.widget.dataOptions.metaJson&&(this.cardData=JSON.parse(this.widget.dataOptions.metaJson))},openInAnalytics:function(id){if(id&&!this.$mobile){var datePicker={operatorId:22,value:null},dataPoint={},dataPoints=[],self=this;Object.keys(this.fields).forEach((function(field){dataPoint={parentId:id,yAxis:{fieldId:self.fields[field].id,aggr:3}},dataPoints.push(dataPoint)}));var analyticsConfig={analyticsType:2,mode:1,period:0,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(datePicker.operatorId,datePicker.value),dataPoints:dataPoints};if(!this.$mobile)if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.ANALYTIC_BUILDING)||{},name=_ref.name;name&&this.$router.push({name:name,query:{filters:JSON.stringify(analyticsConfig)}})}else this.$router.push({path:"/app/em/analytics/building",query:{filters:JSON.stringify(analyticsConfig)}})}},openInSpace:function(id){id&&!this.$mobile&&this.jumpToSpace(this.$store.getters.getSpace(id))},loadCardData:function(key){var self=this,params=null;if(key)params={paramsJson:{level:this.listLevel,buildingId:this.selectedBuilding},staticKey:"emrillFcuList"};else if(this.widget.id>-1){var meta=JSON.parse(this.widget.dataOptions.metaJson);this.selectedBuilding=meta.selectedBuilding,params={paramsJson:{level:"Level "+meta.level,buildingId:meta.selectedBuilding},staticKey:"emrillFcuList"}}else params={paramsJson:{level:this.levelKey,buildingId:this.buildingId},staticKey:"emrillFcuList"};this.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){self.getCardData(response.data),self.updateMeta(response.data),self.loading=!1})).catch((function(error){self.loading=!1}))},getCardData:function(data){data&&data.cardResult&&(this.data=data.cardResult&&data.cardResult.resultList?data.cardResult.resultList:[],this.fields["returnTempField"]=data.cardResult&&data.cardResult.returnTempField?data.cardResult.returnTempField:null,this.fields["runStatusField"]=data.cardResult&&data.cardResult.runStatusField?data.cardResult.runStatusField:null,this.fields["valveFeedbackField"]=data.cardResult&&data.cardResult.valveFeedbackField?data.cardResult.valveFeedbackField:null,this.fields["setPointTempField"]=data.cardResult&&data.cardResult.setPointTempField?data.cardResult.setPointTempField:null)},redirectToAsset:function(id){if(id&&!this.$mobile)if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.OVERVIEW,{moduleName:"asset"})||{},name=_ref2.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else this.$router.push({path:"/app/at/assets/all/"+id+"/overview"})},loadBuilding:function(){var self=this,formData=new FormData,url="/report/alarms/getAllBuildings";self.$http.post(url,formData).then((function(response){self.buildingList=response.data}))}}},cards_FcuListvue_type_script_lang_js=FcuListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(cards_FcuListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FcuList=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/64006.js.map