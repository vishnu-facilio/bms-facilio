"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[1560],{
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/434579:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ListAttachmentPreview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/ListAttachmentPreview.vue?vue&type=template&id=4dc204e5
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-image",{class:["fc-image-list-preview fc-avatar-square",_vm.customClass?_vm.customClass:null],attrs:{src:_vm.imageAttachment?_vm.$prependBaseUrl(_vm.imageAttachment.previewUrl):"",fit:"cover"},on:{click:function($event){return $event.target!==$event.currentTarget?null:($event.preventDefault(),_vm.openAttachmentsPreview(!0,_vm.imageAttachment))}}},[_c("div",{attrs:{slot:"error"},slot:"error"},[_c("div",{on:{click:function($event){return $event.preventDefault(),_vm.openAttachmentsPreview(!1)}}},[_vm.attachments.length>0?_vm._t("no-image",(function(){return[_c("InlineSvg",{attrs:{src:"clip",iconClass:"icon fill-grey icon-xxlll op5 vertical-middle object-contain"}})]})):_vm._t("no-data",(function(){return[_c("InlineSvg",{attrs:{src:"svgs/photo",iconClass:"icon fill-grey icon-xxlll op5 vertical-middle object-contain"}})]}))],2)])]),_vm.visibility?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.previewFile,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),PreviewFile=(__webpack_require__(670560),__webpack_require__(720096)),api=__webpack_require__(32284),ListAttachmentPreviewvue_type_script_lang_js={components:{PreviewFile:PreviewFile/* default */.Z},props:["module","record","customClass","id"],data:function(){return{loading:!1,attachments:[],visibility:!1,imageAttachment:null,previewFile:null,imageAttachments:[]}},created:function(){this.loadAttachments()},computed:{recordId:function(){return this.id?this.id:this.record.id}},methods:{openAttachmentsPreview:function(fileAttached,image){this.attachments.length>0&&(this.visibility=!0,this.previewFile=fileAttached?image:this.attachments[0])},setImageUrl:function(){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.attachments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attachment=_step.value;-1!==attachment.contentType.indexOf("image")&&(this.imageAttachment||(this.imageAttachment=attachment),this.imageAttachments.push(attachment))}}catch(err){_iterator.e(err)}finally{_iterator.f()}},loadAttachments:function(){var _this=this;return this.loading=!0,api/* API */.bl.get("/attachment",{module:this.module,recordId:this.recordId}).then((function(_ref){var error=_ref.error,data=_ref.data;error?_this.attachments=[]:(_this.attachments=data.attachments?data.attachments:[],_this.setImageUrl()),_this.loading=!1}))}}},relatedlist_ListAttachmentPreviewvue_type_script_lang_js=ListAttachmentPreviewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_ListAttachmentPreviewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ListAttachmentPreview=component.exports},
/***/1560:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NeighbourhoodDeals}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/community/neighbourhood/NeighbourhoodDeals.vue?vue&type=template&id=7fd1c4db
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pL30 pR30 d-flex flex-direction-column"},[_vm._m(0),_c("div",{staticClass:"mB30"},[_vm.loading?_c("div",{staticClass:"flex-middle justify-content-center"},[_c("spinner",{attrs:{show:!0,size:"50"}})],1):_vm.$validation.isEmpty(_vm.recordsList)?_c("div",{staticClass:"flex-middle justify-content-center flex-col"},[_c("inline-svg",{attrs:{src:"svgs/community-empty-state/deals",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"label-txt-black bold"},[_vm._v(" "+_vm._s(_vm.$t("tenant.dealsandoffers.no_data"))+" ")])],1):_c("div",{staticClass:"d-flex flex-row flex-wrap"},_vm._l(_vm.recordsList,(function(deal,index){return _c("div",{key:index,staticClass:"neigh-deals-container cursor-pointer",on:{click:function($event){return _vm.openDealSummary(deal.id)}}},[_c("div",{staticClass:"d-flex flex-col"},[_c("ListAttachments",{attrs:{record:deal,module:"dealsandoffersattachments",customClass:"deals-image"}}),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"deals-text",attrs:{content:deal.title}},[_vm._v(" "+_vm._s(deal.title)+" ")])],1)])})),0)])])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title mL0"},[_vm._v("Deals and Offers")])])}],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(32284)),validation=__webpack_require__(990260),ListAttachmentPreview=__webpack_require__(434579),router=__webpack_require__(329435),NeighbourhoodDealsvue_type_script_lang_js={props:["details"],components:{ListAttachments:ListAttachmentPreview/* default */.Z},data:function(){return{recordsList:[],loading:!0}},mounted:function(){this.loadNeighbourhoodDeals()},methods:{loadNeighbourhoodDeals:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filters,params,_yield$API$fetchAll,_yield$API$fetchAll$l,list,error,_error$message,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return filters={neighbourhood:{operatorId:36,value:[String((_this.details||{}).id)]},active:{operatorId:15,value:[String(!0)]}},params={filters:JSON.stringify(filters),withCount:!1},_context.next=4,api/* API */.bl.fetchAll("dealsandoffers",params);case 4:_yield$API$fetchAll=_context.sent,_yield$API$fetchAll$l=_yield$API$fetchAll.list,list=void 0===_yield$API$fetchAll$l?[]:_yield$API$fetchAll$l,error=_yield$API$fetchAll.error,_this.loading=!0,error?(_error$message=error.message,message=void 0===_error$message?"Error Occurred while fetching Neighbourhood deals":_error$message,_this.$message.error(message)):(0,validation/* isEmpty */.xb)(list)||(_this.recordsList=list),_this.loading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},openDealSummary:function(id){var moduleName="dealsandoffers",viewname="all";if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:viewname,id:id}})}else this.$router.push({name:"dealsandoffersSummary",params:{viewname:viewname,id:id}})}}},neighbourhood_NeighbourhoodDealsvue_type_script_lang_js=NeighbourhoodDealsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(neighbourhood_NeighbourhoodDealsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NeighbourhoodDeals=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/1560.js.map