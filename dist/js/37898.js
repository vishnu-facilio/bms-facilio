"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[37898],{
/***/447010:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ControlCommandMiniv2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/cards/v2/ControlCommandMiniv2.vue?vue&type=template&id=14758d77
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("shimmer-loading",{staticClass:"card-shimmer"}):_c("div",{staticClass:"dragabale-card h200 energy-mini"},[_c("div",{staticClass:"h200"},[_vm.resource&&_vm.resource.length&&_vm.result.result?_c("div",{staticClass:"h2500"},[_c("div",{staticClass:"command-card"},[_c("div",{staticClass:"energy-card-H"},[_vm._v(_vm._s(_vm.resource[0].name))]),_c("div",{staticClass:"f14 bold"},[_vm._v(_vm._s(_vm.result.result.fieldObj.displayName))]),_c("div",{staticClass:"mT30 bold f18"},[_c("div",{domProps:{innerHTML:_vm._s(_vm.$fieldUtils.getDisplayValue(_vm.result.result.fieldObj,_vm.result.result.currentVal))}})]),_c("el-button",{staticClass:"text-uppercase fc__border__btn mT35 mB0 pR30 pL30",staticStyle:{"max-width":"90px"},attrs:{size:"small"},on:{click:function($event){return _vm.showSetReadingDialog(_vm.result.result.fieldObj,_vm.result.result.currentVal)}}},[_vm._v("Set")]),_vm.showSetDialog?_c("SetReadingPopup",{key:_vm.newReading.field.id,attrs:{reading:_vm.newReading,saveAction:_vm.closePopup,closeAction:_vm.closePopup,recordId:_vm.resource[0].id,recordName:_vm.resource[0].name}}):_vm._e()],1)]):_c("div",[_vm._v(" no data ")])])])},staticRenderFns=[],DateHelper=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(281230)),colors=__webpack_require__(519898),ShimmerLoading=__webpack_require__(516400),SetReadingValue=__webpack_require__(681121),d3=__webpack_require__(348727),ControlCommandMiniv2vue_type_script_lang_js={props:["widget","config"],mixins:[DateHelper/* default */.Z],data:function(){return{newReading:{value:null,ttime:null},resource:null,showSetDialog:!1,data:{style:{color:"red",bgcolor:"pink"},unitString:"",workflowV2String:""},style:{bgcolor:"#fff",color:"#000"},result:null,domRerender:!0,predefineColors:colors/* default */.Z.readingcardColors,loading:!1}},components:{shimmerLoading:ShimmerLoading/* default */.Z,SetReadingPopup:SetReadingValue/* default */.Z},mounted:function(){this.loadCardData()},computed:{mode:function(){return!(!this.$route.query||!this.$route.query.create||"edit"!==this.$route.query.create)||!(!this.$route.query||!this.$route.query.create||"new"!==this.$route.query.create)},getScale:function(){return this.$style.responsiveScale(200,200,1,this.currentWidth,this.currentHeight)},currentWidth:function(){return this.$el&&this.$el.clientWidth?this.$el.clientWidth:200},currentHeight:function(){return this.$el&&this.$el.clientHeight?this.$el.clientHeight:200},getStyle:function(){return"background:"+this.style.bgcolor+";color:"+this.style.color}},methods:{formatValue:function(value){return d3.format(",")(value)},showSetReadingDialog:function(field,value){this.newReading.field=field,this.newReading.value=value,this.showSetDialog=!0},getPeriod:function(){var _this=this;return this.getdateOperators().find((function(rt){return rt.value===_this.data.operatorId})).label},refresh:function(){this.updateCard()},closePopup:function(){this.updateCommadData(),this.showSetDialog=!1},updateCommadData:function(){
// console.log(JSON.stringify(this.newReading))
},loadCardData:function(){var self=this;this.getParams();var params=null;params=this.widget&&this.widget.id>-1?{widgetId:self.widget.id}:{workflow:{isV2Script:!0,workflowV2String:this.data.workflowV2String},staticKey:"kpiCard"},this.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){self.getData(response.data.cardResult),self.$util.loadResource([response.data.cardResult.result.parentId]).then((function(fields){self.resource=fields,self.loading=!1}))})).catch((function(error){self.loading=!1}))},updateCard:function(){var self=this,params=null;self.getParams(),params={workflow:{isV2Script:!0,workflowV2String:this.data.workflowV2String},staticKey:"kpiCard"},this.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){self.getData(response.data.cardResult),self.$util.loadResource([response.data.cardResult.result.parentId]).then((function(fields){self.resource=fields,self.loading=!1})),self.loading=!1})).catch((function(error){self.loading=!1}))},setColor:function(mode,color){"bg"===mode?this.style.bgcolor=color:"color"===mode&&(this.style.color=color),this.domRerender=!1,this.domRerender=!0,this.setParams()},getParams:function(){this.widget.dataOptions.data?(this.widget.dataOptions.metaJson=JSON.stringify(this.widget.dataOptions.data),this.data=this.widget.dataOptions.data,this.setParams()):this.widget.id>-1&&this.widget.dataOptions.metaJson&&(this.data=JSON.parse(this.widget.dataOptions.metaJson),this.setParams())},setParams:function(){this.data&&!this.data.style?this.data.style={color:this.color,bgcolor:this.bgcolor}:this.style=this.data.style,this.widget.dataOptions.metaJson=JSON.stringify(this.data)},getData:function(data){data.hasOwnProperty("result")&&(this.result=data)},getFontcolor:function(title){if(title){var font=2;return title.length<7?font=2.4:title.length<8?font=2.2:title.length<12?font=2:title.length>12&&(font=1.8),"font-size:"+font+"rem"}}}},v2_ControlCommandMiniv2vue_type_script_lang_js=ControlCommandMiniv2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v2_ControlCommandMiniv2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ControlCommandMiniv2=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/37898.js.map