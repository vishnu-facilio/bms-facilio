"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[67773],{
/***/965797:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldPicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/fields/FieldPicker.vue?vue&type=template&id=45d1fb12
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"field-dialog",attrs:{visible:!0,width:"50%","append-to-body":!0,"show-close":!1,"before-close":_vm.handleclose}},[_c("div",{staticStyle:{height:"610px"}},[_c("el-row",[_c("el-col",{staticClass:"dialog_header"},[_vm._v(" "+_vm._s(_vm.title?_vm.title:"FIELDS")+" ")])],1),_c("el-row",[_c("el-col",{staticClass:"border-right overflow-y-scroll height500",attrs:{span:8}},[_c("div",{staticClass:"d-flex pT5 pB5 pL30 pR5",staticStyle:{"border-bottom":"1px solid #e5e4e4"}},[_c("i",{staticClass:"el-icon-search pT7 pR10",staticStyle:{color:"#25243e"}}),_c("el-input",{attrs:{placeholder:"Search Fields",autofocus:!0,clearable:""},on:{change:function($event){return _vm.filterSearchQuery(!0)}},model:{value:_vm.filterValue,callback:function($$v){_vm.filterValue=$$v},expression:"filterValue"}})],1),_c("div",{staticClass:"pL30 pR15"},[_c("el-checkbox-group",{staticClass:"overflow-y-scroll",model:{value:_vm.fieldList,callback:function($$v){_vm.fieldList=$$v},expression:"fieldList"}},_vm._l(_vm.filteredList,(function(field,index){return _c("el-checkbox",{key:index,staticClass:"checkbox",attrs:{label:field.name}},[_vm._v(" "+_vm._s(field.displayName)+" ")])})),1)],1)]),_c("el-col",{staticClass:"overflow-y-scroll height500",attrs:{span:16}},[_c("div",{staticClass:"selected_header"},[_vm._v("Selected Fields")]),_c("draggable",_vm._b({staticClass:"pL20 pR20",attrs:{list:_vm.list,group:"list"}},"draggable",_vm.fieldSectionDragOptions,!1),_vm._l(_vm.list,(function(field,index){return _c("div",{key:index,staticClass:"mB10 mT15"},[field.hasOwnProperty("fieldId")?_c("div",{staticClass:"field-row d-flex"},[_vm.isInFormConfig?_c("div",{staticClass:"task-handle mR10"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]):_vm._e(),_c("div",{staticClass:"mT-auto mB-auto fd-name"},[_vm._v(" "+_vm._s(field.displayName||"")+" ")]),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_vm.isInFormConfig?_c("div",{staticClass:"mR10 pR10 inline mandatory-checkbox field-checkbox"},[_c("el-checkbox",{model:{value:field.required,callback:function($$v){_vm.$set(field,"required",$$v)},expression:"field.required"}},[_vm._v(" Is Mandatory ")])],1):_vm._e(),_c("div",{staticClass:"mR10 inline",on:{click:function($event){return _vm.remove(field)}}},[_c("i",{staticClass:"el-icon-delete pointer trash-icon"})])])]):_vm._e()])})),0)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.handleclose()}}},[_vm._v(" CANCEL ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v(" Save ")])],1)],1)])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(990260)),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),FieldPickervue_type_script_lang_js={props:["title","availableFields","isInFormConfig","selectedList"],components:{draggable:vuedraggable_umd_default()},data:function(){return{list:[],filterValue:"",filteredList:[],fieldSectionDragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0}}},created:function(){this.list=(0,toConsumableArray/* default */.Z)(this.selectedList),this.filterSearchQuery()},computed:{fieldList:{get:function(){var list=this.list;return(0,validation/* isEmpty */.xb)(list)?[]:list.filter((function(field){return field.hasOwnProperty("fieldId")})).map((function(field){return field.name}))},set:function(value){var availableFields=this.availableFields,selectedFields=value.map((function(fieldName){var field=availableFields.find((function(field){return field.name===fieldName}));return(0,validation/* isEmpty */.xb)(field)?null:field})).filter((function(f){return!(0,validation/* isEmpty */.xb)(f)}));this.list=(0,toConsumableArray/* default */.Z)(selectedFields)}}},methods:{handleclose:function(){this.$emit("close")},save:function(){this.$emit("save",this.list),this.handleclose()},remove:function(field){var index=this.list.findIndex((function(fld){return fld.name===field.name}));this.list.splice(index,1)},filterSearchQuery:function(errorMessage){var _this=this,filterObj=this.availableFields.filter((function(field){var name=field.displayName.toLowerCase();return name.includes(_this.filterValue.toLowerCase())}));(0,validation/* isEmpty */.xb)(filterObj)?(errorMessage&&this.$message.error("Cannot find filtered field"),this.filteredList=this.availableFields):this.filteredList=filterObj}}},fields_FieldPickervue_type_script_lang_js=FieldPickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(fields_FieldPickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldPicker=component.exports},
/***/634559:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldUpdateDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/fields/FieldUpdateDialog.vue?vue&type=template&id=3a6c8a46
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"Field Change","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},_vm._l(_vm.fieldChange.templateJson.fieldMatcher,(function(fieldMatcher,index){return _c("div",{key:index},[_c("el-row",{staticClass:"visibility-visible-actions fc-row-hover pT10 pB10 pL10 pointer"},[_c("el-col",{attrs:{span:1}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(_vm._s(index+1))])])]),_c("el-col",{staticClass:"pL10",attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:""},on:{change:function($event){return _vm.statusFieldName(fieldMatcher,index)}},model:{value:fieldMatcher.field,callback:function($$v){_vm.$set(fieldMatcher,"field",$$v)},expression:"fieldMatcher.field"}},_vm._l(_vm.updateFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.name}})})),1)],1),_c("el-col",{attrs:{span:9}},[_c("div",{},[fieldMatcher.fieldObj?fieldMatcher.isSpacePicker?_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",attrs:{disabled:""},model:{value:_vm.field.parseLabel,callback:function($$v){_vm.$set(_vm.field,"parseLabel",$$v)},expression:"field.parseLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},slot:"suffix"})])],1):_c("div",{staticClass:"flex-middle"},["NUMBER"===fieldMatcher.fieldObj[0].dataType||"DECIMAL"===fieldMatcher.fieldObj[0].dataType?_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",attrs:{type:"number"},model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}}):"BOOLEAN"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 mL20 width100pxss",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}},[_c("el-option",{attrs:{label:fieldMatcher.fieldObj[0].trueVal?fieldMatcher.fieldObj[0].trueVal:"Yes",value:"true"}}),_c("el-option",{attrs:{label:fieldMatcher.fieldObj[0].falseVal?fieldMatcher.fieldObj[0].falseVal:"No",value:"false"}})],1):"ENUM"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL20",attrs:{filterable:"","collapse-tags":""},model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}},_vm._l(_vm.picklistOptions[fieldMatcher.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):"DATE"===fieldMatcher.fieldObj[0].dataTypeEnum._name||"DATE_TIME"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-row",{staticClass:"mL20"},[_c("el-col",{attrs:{span:7}},[_c("el-input",{staticClass:"fc-input-full-border-select2 width75px",attrs:{type:"number"},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.days,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"days",$$v)},expression:"fieldMatcher.dateObject.days"}}),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Days ")])],1),_c("el-col",{staticClass:"pL30",attrs:{span:7}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width75px",attrs:{clearable:"",filterable:"",placeholder:"Num"},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.hours,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"hours",$$v)},expression:"fieldMatcher.dateObject.hours"}},_vm._l(_vm.$constants.HOURS,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Hours ")])],1),_c("el-col",{staticClass:"pL60",attrs:{span:7}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width75px",attrs:{placeholder:"Num",filterable:""},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.dateObject.minute,callback:function($$v){_vm.$set(fieldMatcher.dateObject,"minute",$$v)},expression:"fieldMatcher.dateObject.minute"}},_vm._l(_vm.minDuration,(function(index){return _c("el-option",{key:index+1,attrs:{label:index,value:index}})})),1),_c("div",{staticClass:"f12 fc-darkgrey text-left pT10 nowrap"},[_vm._v(" Mins ")])],1)],1):"LOOKUP"===fieldMatcher.fieldObj[0].dataTypeEnum._name&&"LOOKUP_SIMPLE"===fieldMatcher.fieldObj[0].displayType._name||"LOOKUP"===fieldMatcher.fieldObj[0].dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mL20",attrs:{filterable:"","collapse-tags":""},on:{change:function($event){return _vm.changeDataType(fieldMatcher)}},model:{value:fieldMatcher.valueArray,callback:function($$v){_vm.$set(fieldMatcher,"valueArray",$$v)},expression:"fieldMatcher.valueArray"}},_vm._l(_vm.picklistOptions[fieldMatcher.field],(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width130px",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}})],1):_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 mL20 width100",model:{value:fieldMatcher.value,callback:function($$v){_vm.$set(fieldMatcher,"value",$$v)},expression:"fieldMatcher.value"}})],1)])]),_c("el-col",{attrs:{span:5}},[_c("div",{staticClass:"visibility-hide-actions pT10 mR20 text-right pointer"},[_c("img",{staticClass:"pointer",attrs:{src:__webpack_require__(353654)},on:{click:_vm.addRow}}),_vm.fieldChange.templateJson.fieldMatcher.length>1&&1!==_vm.fieldChange.templateJson.fieldMatcher.length?_c("img",{staticClass:"pointer mL5",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(index)}}}):_vm._e()])])],1)],1)})),0),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.actionSave(_vm.fieldChange)}}},[_vm._v("Save")])],1)])],1)},staticRenderFns=[],validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(434284),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(990260)),FieldUpdateDialogvue_type_script_lang_js={props:["statusFieldName","fieldChange","moduleFields","module","picklistOptions","addRow","actionSave","fieldUpdateValue","durationConfig"],data:function(){return{moduleObj:{},excludeFields:["stateFlowId","siteId","photo","moduleState"],updateFieldName:{alarm:["severity"],newreadingalarm:["severity"],workorder:["assignedTo","assignmentGroup","category","dueDate","priority","type"],asset:["type","model","manufacturer","purchasedDate","retireDate","unitPrice","warrantyExpiryDate","department"],dealsandoffers:["active"]}}},computed:{updateFields:function(){var _this=this,fields=[],_this$moduleObj=this.moduleObj,moduleObj=void 0===_this$moduleObj?{}:_this$moduleObj,excludeFields=this.excludeFields,moduleFields=this.moduleFields,$getProperty=this.$getProperty,decommissionFields=["decommission","decommissionedBy","viewRecommissionedBtn","commissionedTime"];return(0,validation/* isEmpty */.xb)(moduleFields)?"CUSTOM"===$getProperty(moduleObj.typeEnum,"_name","")&&(fields=moduleFields.filter((function(field){return!excludeFields.includes(field.name)}))):(moduleFields=moduleFields.filter((function(field){return!decommissionFields.includes(field.name)})),fields=this.updateFieldName[this.module]?moduleFields.filter((function(field){return!field.default||_this.updateFieldName[_this.module]&&_this.updateFieldName[_this.module].includes(field.name)})):moduleFields),fields},minDuration:function(){var durationConfig=this.durationConfig;if(this.$getProperty(durationConfig,"minInterval")){for(var minutes=[],minInterval=durationConfig.minInterval,i=0;i<60;i+=minInterval)minutes.push(i);return minutes}return this.$constants.MINUTES}},mounted:function(){this.getMetaFields()},methods:{getMetaFields:function(){var _this2=this,module=this.module;if(module){var url="/module/meta?moduleName=".concat(module);this.$http.get(url).then((function(response){_this2.moduleObj=response.data.meta.module}))}},changeDataType:function(criteria){if("DATE_TIME"===criteria.fieldObj[0].dataTypeEnum._name||"DATE"===criteria.fieldObj[0].dataTypeEnum._name){if(criteria.dateObject){var interval=this.$helpers.daysHoursMinuToSec(criteria.dateObject);criteria.value=1e3*interval}}else criteria.valueArray&&(
// let values = criteria.valueArray.join()
criteria.value={id:criteria.valueArray});this.$forceUpdate()},deleteRow:function(index){this.fieldChange.templateJson.fieldMatcher.splice(index,1)},close:function(){this.$emit("update:fieldUpdateValue",!1)}}},fields_FieldUpdateDialogvue_type_script_lang_js=FieldUpdateDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(fields_FieldUpdateDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldUpdateDialog=component.exports},
/***/572689:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PlaceholderPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/placeholder/PlaceholderPopover.vue?vue&type=template&id=4b0a2072&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"p0"},[_c("el-scrollbar",{staticClass:"fc-placeholder-picker"},_vm._l(_vm.optionsList,(function(option,index){return _c("div",{key:option.name+"-"+index,class:["el-dropdown-menu__item fc-field-item",_vm.selectedIndex===index&&"selected-list-item"],on:{click:function($event){return _vm.emitOptions(option,_vm.options)},mouseover:function($event){return _vm.openPopover(option,_vm.options,index)}}},[_c("div",{staticClass:"font-normal"},[_vm._v(_vm._s(option.displayName))]),option.children?_c("div",[_c("i",{staticClass:"el-icon-arrow-right"})]):_vm._e()])})),0)],1)},staticRenderFns=[],validation=__webpack_require__(990260),PlaceholderPopovervue_type_script_lang_js={props:["options"],data:function(){return{selectedIndex:null}},computed:{optionsList:function(){var children=this.options.children;return children||this.options}},methods:{emitOptions:function(option,options){var children=option.children;(0,validation/* isEmpty */.xb)(children)&&this.$emit("itemClick",{option:option,options:options})},openPopover:function(option,options,index){var children=option.children;(0,validation/* isEmpty */.xb)(children)?this.selectedIndex=null:this.selectedIndex=index,this.$emit("openPopover",{option:option,options:options})}}},placeholder_PlaceholderPopovervue_type_script_lang_js=PlaceholderPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(placeholder_PlaceholderPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,"4b0a2072",null)
/* harmony default export */,PlaceholderPopover=component.exports},
/***/24187:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return components_FieldPicker}});
// EXTERNAL MODULE: ./node_modules/@facilio/utils/validation.js
var render,staticRenderFns,validation=__webpack_require__(990260),FieldPicker=__webpack_require__(965797),FieldPickervue_type_script_lang_js={extends:FieldPicker/* default */.Z,methods:{save:function(){this.$emit("save",this.list),(0,validation/* isEmpty */.xb)(this.list)||this.handleclose()}}},components_FieldPickervue_type_script_lang_js=FieldPickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FieldPickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,components_FieldPicker=component.exports;
// EXTERNAL MODULE: ./src/components/fields/FieldPicker.vue + 6 modules
},
/***/134077:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScriptEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/setupActions/components/ScriptEditor.vue?vue&type=template&id=3fe27b0f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container fc-dialog-center-body-p0",attrs:{visible:!0,width:"60%",title:_vm.$t("common.products.script"),"append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("CodeMirror",{attrs:{codeeditor:!0},model:{value:_vm.scriptData.workflowContext.workflowV2String,callback:function($$v){_vm.$set(_vm.scriptData.workflowContext,"workflowV2String",$$v)},expression:"scriptData.workflowContext.workflowV2String"}})],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.actionSave}},[_vm._v(" Save ")])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),CodeMirror=__webpack_require__(919324),ScriptModel=__webpack_require__(721486),ScriptEditorvue_type_script_lang_js={props:["actionObj","moduleName"],components:{CodeMirror:CodeMirror/* default */.Z},data:function(){return{scriptData:null}},created:function(){var actionObj=this.actionObj,moduleName=this.moduleName,scriptObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},actionObj||{}),{},{moduleName:moduleName});this.scriptData=new ScriptModel/* ScriptModel */.q(scriptObj)},methods:{closeDialog:function(){this.$emit("onClose")},actionSave:function(){var isValid=this.scriptData.validate();isValid?(this.$emit("onSave",this.scriptData.serialize()),this.closeDialog()):this.$message.error("Script is Empty")}}},components_ScriptEditorvue_type_script_lang_js=ScriptEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ScriptEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScriptEditor=component.exports},
/***/292974:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return StatusUpdate}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/setupActions/components/StatusUpdate.vue?vue&type=template&id=5163edd4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"40%",title:_vm.$t("setup.setup.change_status"),"custom-class":"dialog-header-padding","append-to-body":!0,"close-on-click-modal":!1,"show-close":!1}},[_vm.isLoading?_c("div",{staticClass:"height120"},[_c("span",{staticClass:"rectangle loading-shimmer"})]):_c("div",{staticClass:"height120 overflow-y-scroll"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mT5",attrs:{filterable:""},model:{value:_vm.statusUpdateObj.new_state,callback:function($$v){_vm.$set(_vm.statusUpdateObj,"new_state",$$v)},expression:"statusUpdateObj.new_state"}},_vm._l(_vm.statusList,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.actionSave}},[_vm._v(" "+_vm._s(_vm.$t("common._common.save")))])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),ChangeStatusModel=__webpack_require__(367389),validation=__webpack_require__(990260),StatusUpdatevue_type_script_lang_js={props:["actionObj","moduleName","moduleId"],data:function(){return{statusUpdateObj:{},statusList:{},isLoading:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var metaModuleId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.isLoading=!0,_this.statusUpdateObj=new ChangeStatusModel/* ChangeStatusModel */.M(_this.actionObj||{}),metaModuleId=null,!(0,validation/* isEmpty */.xb)(_this.moduleId)){_context.next=7;break}return _context.next=6,_this.fetchModuleId();case 6:metaModuleId=_context.sent;case 7:return _context.prev=7,_context.next=10,ChangeStatusModel/* ChangeStatusModel */.M.getTicketStatus(_this.moduleId||metaModuleId);case 10:_this.statusList=_context.sent,_context.next=16;break;case 13:_context.prev=13,_context.t0=_context["catch"](7),_this.$message.error(_context.t0.message);case 16:_this.isLoading=!1;case 17:case"end":return _context.stop()}}),_callee,null,[[7,13]])})))()},methods:{fetchModuleId:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,ChangeStatusModel/* ChangeStatusModel */.M.fetchMetaModuleId(_this2.moduleName);case 3:return _context2.abrupt("return",_context2.sent);case 6:_context2.prev=6,_context2.t0=_context2["catch"](0),_this2.$message.error(_context2.t0.message);case 9:case"end":return _context2.stop()}}),_callee2,null,[[0,6]])})))()},closeDialog:function(){this.$emit("onClose")},actionSave:function(){this.$emit("onSave",this.statusUpdateObj.serialize()),this.closeDialog()}}},components_StatusUpdatevue_type_script_lang_js=StatusUpdatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_StatusUpdatevue_type_script_lang_js,render,staticRenderFns,!1,null,"5163edd4",null)
/* harmony default export */,StatusUpdate=component.exports},
/***/950782:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CustomButtonList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/custombutton/CustomButtonList.vue?vue&type=template&id=452a148b&scoped=true
var PlaceholderPicker_render,PlaceholderPicker_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custombtn-setup-container"},[_c("portal",{attrs:{to:"module-summary-actions",slim:""}},[_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){_vm.showNewCustomButtonDialog=!0,_vm.isNew=!0,_vm.selectedCustomButton={}}}},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.header_add"))+" ")])],1)]),_c("div",{staticClass:"container-scroll mT30 pB30"},[_c("div",{staticClass:"setting-Rlayout setting-list-view-table"},[_c("el-row",{staticClass:"header-row"},[_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.name"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:5}},[_vm._v(" Position ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:4}},[_vm._v(" Behaviour ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:4}},[_vm._v(" Status ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:2}},[_c("div",{staticClass:"hide-v"},[_vm._v("Edit")])])],1),_vm.loading?_c("el-row",[_c("el-col",{staticClass:"text-center",attrs:{span:24}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)],1):_vm.$validation.isEmpty(_vm.customButtons)?_c("el-row",[_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:24}},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.empty_custom_buttons"))+" ")])],1):_c("draggable",_vm._b({attrs:{draggable:".is-draggable",handle:".task-handle"},on:{change:function($event){return _vm.reorder()}},model:{value:_vm.customButtons,callback:function($$v){_vm.customButtons=$$v},expression:"customButtons"}},"draggable",_vm.dragOptions,!1),_vm._l(_vm.customButtons,(function(button){return _c("el-row",{key:button.id,staticClass:"body-row is-draggable"},[_c("el-col",{staticClass:"body-row-cell d-flex",attrs:{span:5}},[_c("div",{staticClass:"vertical-middle task-handle inline pR10"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_vm._v(" "+_vm._s(button.name)+" ")]),_c("el-col",{staticClass:"body-row-cell",attrs:{span:4}},[_vm._v(" "+_vm._s(button.description?button.description:"---")+" ")]),_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.getButtonPosition(button))+" ")]),_c("el-col",{staticClass:"body-row-cell",attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.getActionTypes(button))+" ")]),_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:4}},[_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeStatus(button)}},model:{value:button.status,callback:function($$v){_vm.$set(button,"status",$$v)},expression:"button.status"}})],1),_c("el-col",{staticClass:"body-row-cell",attrs:{span:2}},[button.locked?_vm._e():_c("div",{staticClass:"text-left actions mT0 mR15 text-center"},[_c("i",{staticClass:"el-icon-edit pointer pR10",on:{click:function($event){return _vm.editButton(button)}}}),_c("i",{staticClass:"el-icon-delete pointer",on:{click:function($event){return _vm.deleteButton(button)}}})])])],1)})),1)],1),_vm.showNewCustomButtonDialog?_c("NewCustomButton",{attrs:{selectedCustomButton:_vm.selectedCustomButton,isNew:_vm.isNew,closeDialog:_vm.closeDialog,module:_vm.moduleName}}):_vm._e()],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(186466),__webpack_require__(450886),__webpack_require__(32284)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),CustomButtonUtil=__webpack_require__(746095),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),NewCustomButtonvue_type_template_id_891827a0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"new-custom-button"},[_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"before-close":function(){return _vm.closeDialog()},"custom-class":"fc-dialog-form fc-dialog-right custom-rule-dialog setup-dialog50 setup-dialog"}},[_c("el-form",{ref:"ruleForm",attrs:{model:_vm.customButtonObj,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container mR30 pL30 new-header-modal new-header-text"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?_vm.$t("setup.customButton.header_new"):_vm.$t("setup.customButton.header_edit"))+" ")])]),_c("div",{staticClass:"new-body-modal pL30 pR30"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.name"))+" ")]),_c("el-input",{staticClass:"width100 pR20",attrs:{autofocus:!0,placeholder:_vm.$t("setup.customButton.name_placeholder")},model:{value:_vm.customButtonObj.name,callback:function($$v){_vm.$set(_vm.customButtonObj,"name",$$v)},expression:"customButtonObj.name"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"position"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.button_position"))+" ")]),_c("el-select",{staticClass:"width100 pR20",attrs:{clearable:"",placeholder:_vm.$t("setup.customButton.button_position_placeholder")},on:{change:_vm.clearSelectedActions},model:{value:_vm.position,callback:function($$v){_vm.position=$$v},expression:"position"}},_vm._l(_vm.positionTypeHash,(function(option){return _c("el-option",{key:option,attrs:{value:option,label:_vm.positionLabel[option]}})})),1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.description"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{"min-rows":1,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:_vm.$t("setup.customButton.desc_placeholder"),resize:"none"},model:{value:_vm.customButtonObj.description,callback:function($$v){_vm.$set(_vm.customButtonObj,"description",$$v)},expression:"customButtonObj.description"}})],1)],1)],1),[_c("CustomButtonPermissions",{attrs:{module:_vm.module,customButtonObj:_vm.customButtonObj},on:{setProperties:_vm.setProperties}}),_c("div",{staticClass:"fc-input-label-txt f12 letter-spacing1 bold pB0  text-uppercase display-flex-between-space pT15"},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.criteria"))+" "),_c("el-switch",{attrs:{disabled:_vm.position===_vm.positionTypeHash.LIST_TOP},on:{change:_vm.handleCriteria},model:{value:_vm.canShowCriteria,callback:function($$v){_vm.canShowCriteria=$$v},expression:"canShowCriteria"}})],1),_c("p",{staticClass:"fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.criteria_subtext"))+" ")]),_vm.canShowCriteria?_c("el-form-item",{attrs:{prop:"criteria"}},[_c("CriteriaBuilder",{attrs:{moduleName:_vm.module},model:{value:_vm.customButtonObj.criteria,callback:function($$v){_vm.$set(_vm.customButtonObj,"criteria",$$v)},expression:"customButtonObj.criteria"}})],1):_vm._e(),_c("hr",{staticClass:"separator-line"}),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"actionType"}},[_c("p",{staticClass:"subHeading-pink-txt text-fc-pink"},[_vm._v(" Behaviour ")]),_c("p",{staticClass:"fc-sub-title-desc"},[_vm._v(" Specify a behaviour for this custom button ")]),_c("el-select",{staticClass:"width100 pR20",attrs:{clearable:"",placeholder:_vm.$t("setup.customButton.action_type_placeholder")},on:{change:_vm.clearCustomBtnAction},model:{value:_vm.selectedActionType,callback:function($$v){_vm.selectedActionType=$$v},expression:"selectedActionType"}},_vm._l(_vm.availableActions,(function(option){return _c("el-option",{key:option,attrs:{value:option}})})),1)],1)],1)],1),_vm.selectedActionType===_vm.ACTIONS.CREATE_RECORD?_c("CreateRecordBehaviour",{attrs:{module:_vm.module,customButtonObject:_vm.customButtonObj},on:{setProperties:_vm.setProperties}}):_vm._e(),_vm.selectedActionType===_vm.ACTIONS.UPDATE_RECORD?_c("UpdateRecordBehaviour",{attrs:{formData:_vm.customButtonObj.selectedFields,module:_vm.module,formId:_vm.customButtonObj.formId},on:{setProperties:_vm.setProperties}}):_vm._e(),_vm.selectedActionType===_vm.ACTIONS.REDIRECT_URL?_c("RedirectUrlBehaviour",{attrs:{module:_vm.module,customButtonObject:_vm.customButtonObj,positionType:_vm.position},on:{setProperties:_vm.setProperties}}):_vm._e(),_vm.selectedActionType===_vm.ACTIONS.OPEN_FORM||_vm.selectedActionType===_vm.ACTIONS.OPEN_SUMMARY?_c("InternalRedirectBehaviour",{attrs:{selectedAction:_vm.selectedActionType,customButtonObject:_vm.customButtonObj,currentModuleName:_vm.module},on:{setProperties:_vm.setProperties}}):_vm._e(),_vm.selectedActionType===_vm.ACTIONS.CONNECTED_APPS?_c("ConnectedAppWidgetBehaviour",{attrs:{customButtonObject:_vm.customButtonObj},on:{setProperties:_vm.setProperties}}):_vm._e(),_vm.canShowSubAction?_c("CustomButtonActions",{ref:"customButtonActions",attrs:{module:_vm.module,existingAction:_vm.customButtonObj.actions},on:{onAddAction:_vm.handleActionAdd,"update:existingAction":function($event){return _vm.$set(_vm.customButtonObj,"actions",$event)},"update:existing-action":function($event){return _vm.$set(_vm.customButtonObj,"actions",$event)}}}):_vm._e()]],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.save}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1)],1)])],1)],1)},NewCustomButtonvue_type_template_id_891827a0_staticRenderFns=[],dist=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(169358),__webpack_require__(947522),__webpack_require__(821057),__webpack_require__(191853)),CustomButtonActionsvue_type_template_id_6763c9dc_render=function(){var this$1=this,_vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-input-label-txt pT5 bold display-flex-between-space"},[_vm._v(" Actions "),_c("el-dropdown",{attrs:{trigger:"click"},on:{command:_vm.handleAddActionClick}},[_c("div",{staticClass:"flex flex-direction-row pointer"},[_c("img",{staticClass:"delete-icon",staticStyle:{height:"14px",width:"14px"},attrs:{src:__webpack_require__(353654)}}),_c("div",{staticClass:"pL5 configured-green f12 "},[_vm._v("Add Actions")])]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.actionHashKeys,(function(action,index){return _c("el-dropdown-item",{key:index,attrs:{command:_vm.actionHash[action].name}},[_vm._v(_vm._s(_vm.actionHash[action].label))])})),1)],1)],1),_c("hr",{staticClass:"separator-line"}),_c("ChangeStatusAction",{attrs:{showChangeStatusDialog:_vm.showChangeStatusDialog,existingAction:_vm.actions,moduleFields:_vm.moduleFields,moduleId:_vm.moduleId,actionType:_vm.actionType,module:_vm.module},on:{"update:showChangeStatusDialog":function($event){_vm.showChangeStatusDialog=$event},"update:show-change-status-dialog":function($event){_vm.showChangeStatusDialog=$event},resetAction:_vm.resetAction,"update:actionType":function($event){_vm.actionType=$event},"update:action-type":function($event){_vm.actionType=$event},setProperties:_vm.setProperties}}),_c("FieldUpdateAction",{attrs:{moduleFields:_vm.moduleFields,module:_vm.module,showFieldUpdateDialog:_vm.showFieldUpdateDialog,existingAction:_vm.actions,actionType:_vm.actionType},on:{"update:showFieldUpdateDialog":function($event){_vm.showFieldUpdateDialog=$event},"update:show-field-update-dialog":function($event){_vm.showFieldUpdateDialog=$event},setProperties:_vm.setProperties,resetAction:_vm.resetAction,"update:actionType":function($event){_vm.actionType=$event},"update:action-type":function($event){_vm.actionType=$event}}}),_c("SendNotification",{attrs:{module:_vm.module,sendNotificationVisible:_vm.sendNotificationVisible,existingAction:_vm.actions,actionType:_vm.actionType},on:{"update:sendNotificationVisible":function($event){_vm.sendNotificationVisible=$event},"update:send-notification-visible":function($event){_vm.sendNotificationVisible=$event},setProperties:_vm.setProperties,resetAction:_vm.resetAction,"update:actionType":function($event){_vm.actionType=$event},"update:action-type":function($event){_vm.actionType=$event},serializeNotificationData:function(value){this$1.notificationSerialize=value}}}),_c("ScriptAction",{attrs:{module:_vm.module,showScriptCodeDialog:_vm.showScriptDialog,actionType:_vm.actionType,existingAction:_vm.actions},on:{"update:showScriptCodeDialog":function($event){_vm.showScriptDialog=$event},"update:show-script-code-dialog":function($event){_vm.showScriptDialog=$event},"update:actionType":function($event){_vm.actionType=$event},"update:action-type":function($event){_vm.actionType=$event},setProperties:_vm.setProperties,resetAction:_vm.resetAction}})],1)},CustomButtonActionsvue_type_template_id_6763c9dc_staticRenderFns=[],actionsHash=(__webpack_require__(434284),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(648324),{EMAIL:{name:"mail",value:3,label:"Send Email"},SMS:{name:"sms",value:4,label:"Send SMS"},MOBILE:{name:"mobile",value:7,label:"Send Mobile Notification"},SCRIPT:{name:"script",value:21,label:"Execute Script"},FIELD_UPDATE:{name:"fieldUpdate",value:13,label:"Field Update"},CHANGE_STATUS:{name:"changeStatus",value:19,label:"Change Status"}}),FieldUpdateActionvue_type_template_id_8dea88b0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("ActionConfiguredHelper",{attrs:{isActionConfigured:_vm.isUpdateFieldsConfigured,helperText:"Update Fields after button execution"},on:{edit:function($event){return _vm.editAction()},reset:function($event){return _vm.reset(_vm.fieldContext)}}}),_vm.showFieldDialog?_c("field-update-dialog",{attrs:{statusFieldName:_vm.statusFieldName,fieldChange:_vm.fieldChange,moduleFields:_vm.moduleFields,module:_vm.module,picklistOptions:_vm.picklistOptions,addRow:_vm.addRow,actionSave:_vm.actionSave,fieldUpdateValue:_vm.showFieldDialog},on:{"update:fieldUpdateValue":function($event){_vm.showFieldDialog=$event},"update:field-update-value":function($event){_vm.showFieldDialog=$event}}}):_vm._e()],1)},FieldUpdateActionvue_type_template_id_8dea88b0_staticRenderFns=[],FieldUpdateDialog=__webpack_require__(634559),ActionConfiguredHelpervue_type_template_id_7d2af02e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isActionConfigured?_c("div",[_c("el-row",{staticClass:"pT10 pB10"},[_c("el-col",[_c("div",{staticClass:" display-flex-between-space"},[_c("div",[_vm._v(_vm._s(_vm.helperText))]),_c("div",{staticClass:"fc__layout__has__columns"},[_c("div",{staticClass:"pR10 configured-green f12 pT2 border-right2"},[_vm._v(" Configured ")]),_c("div",{staticClass:"pointer pL10",on:{click:_vm.edit}},[_c("i",{staticClass:"el-icon-edit"})]),_c("div",{staticClass:"pL12 pointer",on:{click:_vm.reset}},[_vm._v(" Reset ")])])])])],1),_c("hr",{staticClass:"separator-line"})],1):_vm._e()},ActionConfiguredHelpervue_type_template_id_7d2af02e_staticRenderFns=[],ActionConfiguredHelpervue_type_script_lang_js={props:["isActionConfigured","helperText"],methods:{edit:function(){this.$emit("edit")},reset:function(){this.$emit("reset")}}},actions_ActionConfiguredHelpervue_type_script_lang_js=ActionConfiguredHelpervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(actions_ActionConfiguredHelpervue_type_script_lang_js,ActionConfiguredHelpervue_type_template_id_7d2af02e_render,ActionConfiguredHelpervue_type_template_id_7d2af02e_staticRenderFns,!1,null,null,null)
/* harmony default export */,ActionConfiguredHelper=component.exports,picklist=__webpack_require__(961358),log_map_state=__webpack_require__(766331),FieldUpdateActionvue_type_script_lang_js={props:["moduleFields","module","showFieldUpdateDialog","existingAction","actionType"],components:{FieldUpdateDialog:FieldUpdateDialog/* default */.Z,ActionConfiguredHelper:ActionConfiguredHelper},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadTicketStatus",this.module),this.$store.dispatch("loadApprovalStatus")},data:function(){return{isUpdateFieldsConfigured:!1,actionHash:actionsHash,fieldContext:"",picklistOptions:{},fieldChange:{actionType:13,templateJson:{fieldMatcher:[]}},showFieldDialog:this.showFieldUpdateDialog}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},assetCategory:function(state){return state.assetCategory},ticketpriority:function(state){return state.ticketPriority}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusPickList"])),watch:{showFieldUpdateDialog:{handler:function(newVal){this.showFieldDialog=newVal}},showFieldDialog:function(){this.showFieldDialog||this.$emit("update:showFieldUpdateDialog",!1)},moduleFields:function(){this.existingAction&&this.deserialize()},actionType:function(newVal){newVal===actionsHash.FIELD_UPDATE.name&&this.addRow()}},methods:{deserialize:function(){var _this=this,actions=this.existingAction;(0,validation/* isEmpty */.xb)(actions)||actions.forEach((function(action){if(13===parseInt(action.actionType)){_this.isUpdateFieldsConfigured=!0;var index=0;if(!(0,validation/* isEmpty */.xb)(action.template)){var originalTemplate=action.template.originalTemplate,_loop=function(key){if(_this.addRow(),originalTemplate.hasOwnProperty(key)&&!(0,validation/* isEmpty */.xb)(key)){var fieldMatcher=_this.fieldChange.templateJson.fieldMatcher[index],field=_this.moduleFields.filter((function(field){return field.name===key}));!(0,validation/* isEmpty */.xb)(field)&&_this.setFieldMatcher(fieldMatcher,field,key,originalTemplate),_this.$emit("setProperties",_this.fieldChange),_this.statusFieldName(fieldMatcher,index),index++}};for(var key in originalTemplate)_loop(key);_this.fieldContext=action}}}))},setFieldMatcher:function(fieldMatcher,field,key,originalTemplate){fieldMatcher.field=key,fieldMatcher.value=originalTemplate[key],"LOOKUP"===field[0].dataTypeEnum._name?(0,validation/* isEmpty */.xb)(originalTemplate[key].id)?(fieldMatcher.valueArray=originalTemplate[key],fieldMatcher.value=originalTemplate[key]):(fieldMatcher.valueArray=originalTemplate[key].id,fieldMatcher.value.id=originalTemplate[key].id):"DATE_TIME"!==field[0].dataTypeEnum._name&&"DATE"!==field[0].dataTypeEnum._name||(fieldMatcher.dateObject=this.$helpers.secTodaysHoursMinu(originalTemplate[key]/1e3)),fieldMatcher.fieldObj=field},addRow:function(){this.$getProperty(this.fieldChange,"templateJson.fieldMatcher",[]).push({field:"",isSpacePicker:!1,value:null,parseLabel:null,valueArray:null,dateObject:{},fieldObj:null})},loadPickList:function(moduleName,fieldName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this2.$message.error(error.message||"Error Occured"):_this2.$set(_this2.picklistOptions,fieldName,options);case 6:case"end":return _context.stop()}}),_callee)})))()},loadSpecialTypePickList:function(specialType,fieldName){var pickOption={};if("users"===specialType){var _ref=this||{},userList=_ref.users;pickOption["${LOGGED_USER}"]="Current User",userList.forEach((function(user){var _ref2=user||{},id=_ref2.id,name=_ref2.name;pickOption[id]=name})),this.$set(this.picklistOptions,fieldName,pickOption)}else if("groups"===specialType){var _ref3=this||{},groupList=_ref3.groups;groupList.forEach((function(group){var _ref4=group||{},groupId=_ref4.groupId,name=_ref4.name;pickOption[groupId]=name})),this.$set(this.picklistOptions,fieldName,pickOption)}else if("basespace"===specialType){var spaceList=this.spaces;spaceList.forEach((function(space){var _ref5=space||{},id=_ref5.id,name=_ref5.name;pickOption[id]=name})),this.$set(this.picklistOptions,fieldName,pickOption)}else"alarmType"===specialType?this.$set(this.picklistOptions,fieldName,this.$constants.AlarmCategory):"sourceType"===specialType&&this.$set(this.picklistOptions,fieldName,this.$constants.SourceType)},statusFieldName:function(selectedField,index){var field=this.moduleFields.filter((function(field){return field.name===selectedField.field})),fieldMatcher=this.fieldChange.templateJson.fieldMatcher[index];if(fieldMatcher.fieldObj=field,fieldMatcher.isSpacePicker=!1,!(0,validation/* isEmpty */.xb)(field))if(fieldMatcher.columnName=field[0].completeColumnName,"ENUM"===field[0].dataTypeEnum._name&&this.$set(this.picklistOptions,field[0].name,field[0].enumMap),"LOOKUP"===field[0].dataTypeEnum._name&&field[0].specialType)this.loadSpecialTypePickList(field[0].specialType,field[0].name);else if("LOOKUP"===field[0].dataTypeEnum._name&&field[0].lookupModule)if("ticketstatus"===field[0].lookupModule.name)this.$set(this.picklistOptions,field[0].name,this.getTicketStatusPickList(this.module));else if("ticketpriority"===field[0].lookupModule.name){
// handling key value pair to match existing flow pattern
var priority={};this.ticketpriority.forEach((function(d){priority[d.id]=d.displayName})),this.$set(this.picklistOptions,field[0].name,priority)}else this.loadPickList(field[0].lookupModule.name,field[0].name)},actionSave:function(data){data=this.formatFieldUpdateValue(data),this.$emit("update:actionType",actionsHash.FIELD_UPDATE.name),this.isUpdateFieldsConfigured=!0,this.showFieldDialog=!1,this.fieldContext=data,this.$emit("setProperties",data)},editAction:function(){this.isUpdateFieldsConfigured=!0,this.showFieldDialog=!0,this.$forceUpdate()},reset:function(action){this.isUpdateFieldsConfigured=!1,this.$emit("resetAction",action)},formatFieldUpdateValue:function(data){var fieldMatcher=this.$getProperty(data,"templateJson.fieldMatcher");if(!(0,validation/* isEmpty */.xb)(fieldMatcher)){var removeEmptyFields=fieldMatcher.filter((function(fieldItem){return!(0,validation/* isEmpty */.xb)(fieldItem.field)&&!(0,validation/* isEmpty */.xb)(fieldItem.value)}));data.templateJson.fieldMatcher=removeEmptyFields}return data}}},actions_FieldUpdateActionvue_type_script_lang_js=FieldUpdateActionvue_type_script_lang_js,FieldUpdateAction_component=(0,componentNormalizer/* default */.Z)(actions_FieldUpdateActionvue_type_script_lang_js,FieldUpdateActionvue_type_template_id_8dea88b0_render,FieldUpdateActionvue_type_template_id_8dea88b0_staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldUpdateAction=FieldUpdateAction_component.exports,SendNotificationsvue_type_template_id_3d9ac296_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("ActionConfiguredHelper",{attrs:{isActionConfigured:_vm.isEmailConfigured,helperText:"Send Email after button execution"},on:{edit:function($event){return _vm.editAction(_vm.emailContext)},reset:function($event){return _vm.reset(_vm.emailContext)}}}),_c("ActionConfiguredHelper",{attrs:{isActionConfigured:_vm.isSMSConfigured,helperText:"Send SMS after button execution"},on:{edit:function($event){return _vm.editAction(_vm.smsContent)},reset:function($event){return _vm.reset(_vm.smsContent)}}}),_c("ActionConfiguredHelper",{attrs:{isActionConfigured:_vm.isMobileConfigured,helperText:"Send Mobile Notification after button execution"},on:{edit:function($event){return _vm.editAction(_vm.mobileContent)},reset:function($event){return _vm.reset(_vm.mobileContent)}}}),_c("send-notification",{ref:"notificationpage",staticClass:"ruleDialog",attrs:{visibility:_vm.showNotificationDialog,mode:_vm.actionType,option:_vm.actionData,module:_vm.module},on:{"update:visibility":[function(){return _vm.showNotificationDialog=!1},function($event){_vm.showNotificationDialog=$event}],onsave:_vm.actionSave,"update:mode":function($event){_vm.actionType=$event},"update:option":function($event){_vm.actionData=$event}}})],1)},SendNotificationsvue_type_template_id_3d9ac296_staticRenderFns=[],SendNotification=__webpack_require__(617650),SendNotificationsvue_type_script_lang_js={components:{SendNotification:SendNotification/* default */.Z,ActionConfiguredHelper:ActionConfiguredHelper},props:["module","sendNotificationVisible","existingAction","actionType"],data:function(){return{isEmailConfigured:!1,emailContext:"",isMobileConfigured:!1,mobileContent:"",isSMSConfigured:!1,smsContent:"",actionData:null,showNotificationDialog:this.sendNotificationVisible,actions:[]}},watch:{sendNotificationVisible:{handler:function(newVal){this.showNotificationDialog=newVal}},showNotificationDialog:function(){this.showNotificationDialog||this.$emit("update:sendNotificationVisible",!1)}},created:function(){this.existingAction&&this.deserialize()},mounted:function(){this.$emit("serializeNotificationData",this.notificationSerialize())},methods:{deserialize:function(){var _this=this,actions=this.existingAction;this.actions=this.existingAction,actions&&0!==actions.length&&actions.forEach((function(action){3===parseInt(action.actionType)?(_this.isEmailConfigured=!0,_this.emailContext=action):4===parseInt(action.actionType)?(_this.isSMSConfigured=!0,_this.smsContent=action):7===parseInt(action.actionType)&&(_this.isMobileConfigured=!0,_this.mobileContent=action)}))},actionSave:function(data){this.showNotificationDialog=!1,data.actionType===actionsHash.EMAIL.value?(this.isEmailConfigured=!0,this.emailContext=data):data.actionType===actionsHash.SMS.value?(this.isSMSConfigured=!0,this.smsContent=data):data.actionType===actionsHash.MOBILE.value&&(this.isMobileConfigured=!0,this.formatMobileData(data.templateJson),this.mobileContent=data),this.$emit("setProperties",data)},editAction:function(action){this.actionData=action,action.actionType===actionsHash.EMAIL.value?(this.$emit("update:actionType",actionsHash.EMAIL.name),this.isEmailConfigured=!0):action.actionType===actionsHash.SMS.value?(this.$emit("update:actionType",actionsHash.SMS.name),this.isSMSConfigured=!0):action.actionType===actionsHash.MOBILE.value&&(this.$emit("update:actionType",actionsHash.MOBILE.name),this.isMobileConfigured=!0),this.showNotificationDialog=!0},reset:function(action){action.actionType===actionsHash.EMAIL.value?(this.isEmailConfigured=!1,this.emailContext=""):action.actionType===actionsHash.SMS.value?(this.isSMSConfigured=!1,this.smsContent=""):action.actionType===actionsHash.MOBILE.value&&(this.isMobileConfigured=!1,this.mobileContent="");var index=this.actions.findIndex((function(actionItem){return action.actionType===actionItem.actionType}));(0,validation/* isEmpty */.xb)(index)||this.actions.splice(index,1,action),this.$emit("resetAction",action)},formatMobileData:function(data){var summaryPage=this.module.toUpperCase()+"_SUMMARY",message={content_available:!0,summary_id:"${"+this.module+".id}",sound:"default",module_name:this.module,priority:"high",text:data.message,click_action:summaryPage,title:data.subject};data.body=JSON.stringify({name:this.module.toUpperCase()+"_PUSH_NOTIFICATION",notification:message,data:message,id:data.id}),data.to=data.id,this.$common.setExpressionFromPlaceHolder(data.workflow,"${"+this.module+".id}")},notificationSerialize:function(){return this.$refs.notificationpage}}},actions_SendNotificationsvue_type_script_lang_js=SendNotificationsvue_type_script_lang_js,SendNotifications_component=(0,componentNormalizer/* default */.Z)(actions_SendNotificationsvue_type_script_lang_js,SendNotificationsvue_type_template_id_3d9ac296_render,SendNotificationsvue_type_template_id_3d9ac296_staticRenderFns,!1,null,null,null)
/* harmony default export */,SendNotifications=SendNotifications_component.exports,ScriptActionvue_type_template_id_6b27616c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("ActionConfiguredHelper",{attrs:{isActionConfigured:_vm.isExecuteScriptConfigured,helperText:"Execute Script after button execution"},on:{edit:function($event){return _vm.editAction()},reset:function($event){return _vm.reset(_vm.scriptData)}}}),_vm.showScriptDialog?_c("ScriptDialog",{attrs:{actionObj:_vm.scriptData,moduleName:_vm.module},on:{onSave:_vm.actionSave,onClose:function($event){_vm.showScriptDialog=!1}}}):_vm._e()],1)},ScriptActionvue_type_template_id_6b27616c_staticRenderFns=[],ScriptEditor=__webpack_require__(134077),ScriptActionvue_type_script_lang_js={props:["module","showScriptCodeDialog","actionType","existingAction"],components:{ScriptDialog:ScriptEditor/* default */.Z,ActionConfiguredHelper:ActionConfiguredHelper},data:function(){return{isExecuteScriptConfigured:!1,showScriptDialog:this.showScriptCodeDialog,scriptData:null}},created:function(){this.existingAction&&this.deserialize()},watch:{showScriptCodeDialog:{handler:function(newVal){this.actionType===actionsHash.SCRIPT.name&&(this.showScriptDialog=newVal)}},showScriptDialog:function(){this.showScriptDialog||this.$emit("update:showScriptCodeDialog",!1)}},methods:{deserialize:function(){var _this=this,actions=this.existingAction;actions&&0!==actions.length&&actions.forEach((function(action){if(21===parseInt(action.actionType)){_this.isExecuteScriptConfigured=!0,_this.scriptData=action;var templateJson={resultWorkflowContext:action.template.originalTemplate.workflowContext};_this.scriptData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this.scriptData),{},{templateJson:templateJson}),_this.$emit("setProperties",_this.scriptData)}}))},actionSave:function(data){this.$emit("update:actionType",actionsHash.SCRIPT.name),this.showScriptDialog=!1,this.isExecuteScriptConfigured=!0,this.scriptData=data||{},this.$emit("setProperties",data)},editAction:function(){this.showScriptDialog=!0,this.isExecuteScriptConfigured=!0},reset:function(action){this.isExecuteScriptConfigured=!1,this.scriptData=null,this.$emit("resetAction",action)}}},actions_ScriptActionvue_type_script_lang_js=ScriptActionvue_type_script_lang_js,ScriptAction_component=(0,componentNormalizer/* default */.Z)(actions_ScriptActionvue_type_script_lang_js,ScriptActionvue_type_template_id_6b27616c_render,ScriptActionvue_type_template_id_6b27616c_staticRenderFns,!1,null,null,null)
/* harmony default export */,ScriptAction=ScriptAction_component.exports,ChangeStatusActionvue_type_template_id_64117fed_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("ActionConfiguredHelper",{attrs:{isActionConfigured:_vm.isChangeStatusConfigured,helperText:"Update Status after button execution"},on:{edit:function($event){return _vm.editAction()},reset:function($event){return _vm.reset(_vm.changeStatus)}}}),_vm.showStatusDialog?_c("ChangeStatusDialog",{attrs:{actionObj:_vm.changeStatus,moduleName:_vm.module,moduleId:_vm.moduleId},on:{onSave:_vm.actionSave,onClose:function($event){_vm.showStatusDialog=!1}}}):_vm._e()],1)},ChangeStatusActionvue_type_template_id_64117fed_staticRenderFns=[],StatusUpdate=__webpack_require__(292974),ChangeStatusActionvue_type_script_lang_js={name:"ChangeStatusAction",props:["showChangeStatusDialog","existingAction","actionType","module","moduleFields","moduleId"],components:{ChangeStatusDialog:StatusUpdate/* default */.Z,ActionConfiguredHelper:ActionConfiguredHelper},data:function(){return{isChangeStatusConfigured:!1,actionHash:actionsHash,picklistOptions:{},changeStatus:{actionType:19,templateJson:{new_state:null}},showStatusDialog:this.showChangeStatusDialog}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.existingAction&&_this.deserialize();case 1:case"end":return _context.stop()}}),_callee)})))()},watch:{showChangeStatusDialog:{handler:function(newVal){this.showStatusDialog=newVal}},showStatusDialog:function(){this.showStatusDialog||this.$emit("update:showChangeStatusDialog",!1)}},methods:{deserialize:function(){var _this2=this,actions=this.existingAction;actions&&0!==actions.length&&actions.forEach((function(action){if(19===parseInt(action.actionType)){_this2.isChangeStatusConfigured=!0;var new_state=_this2.$getProperty(action,"template.originalTemplate.new_state",null),templateJson={new_state:new_state};_this2.changeStatus=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this2.changeStatus),{},{templateJson:templateJson})}}))},closeDialog:function(){this.showStatusDialog=!1},actionSave:function(data){this.$emit("update:actionType",actionsHash.CHANGE_STATUS.name),this.isChangeStatusConfigured=!0,this.showStatusDialog=!1,this.changeStatus=data,this.$emit("setProperties",data)},editAction:function(){this.isChangeStatusConfigured=!0,this.showStatusDialog=!0},reset:function(action){this.isChangeStatusConfigured=!1,this.$emit("resetAction",action)}}},actions_ChangeStatusActionvue_type_script_lang_js=ChangeStatusActionvue_type_script_lang_js,ChangeStatusAction_component=(0,componentNormalizer/* default */.Z)(actions_ChangeStatusActionvue_type_script_lang_js,ChangeStatusActionvue_type_template_id_64117fed_render,ChangeStatusActionvue_type_template_id_64117fed_staticRenderFns,!1,null,null,null)
/* harmony default export */,ChangeStatusAction=ChangeStatusAction_component.exports,CustomButtonActionsvue_type_script_lang_js={name:"CustomButtonActions",props:["module","existingAction"],components:{FieldUpdateAction:FieldUpdateAction,SendNotification:SendNotifications,ScriptAction:ScriptAction,ChangeStatusAction:ChangeStatusAction},data:function(){return{actionHash:actionsHash,showFieldUpdateDialog:!1,showChangeStatusDialog:!1,actionType:"",refs:null,sendNotificationVisible:!1,showScriptDialog:!1,notificationSerialize:null,actions:[],currentActionType:null,actionHashKeys:Object.keys(actionsHash),moduleFieldsMeta:[]}},created:function(){this.getModuleFields(),this.existingAction&&(this.actions=this.existingAction)},computed:{moduleFields:function(){var _this$moduleFieldsMet;return(null===(_this$moduleFieldsMet=this.moduleFieldsMeta)||void 0===_this$moduleFieldsMet?void 0:_this$moduleFieldsMet.fields)||null},moduleId:function(){var _this$moduleFieldsMet2;return(null===(_this$moduleFieldsMet2=this.moduleFieldsMeta)||void 0===_this$moduleFieldsMet2||null===(_this$moduleFieldsMet2=_this$moduleFieldsMet2.module)||void 0===_this$moduleFieldsMet2?void 0:_this$moduleFieldsMet2.moduleId)||null}},methods:{getModuleFields:function(){var _this=this;api/* API */.bl.get("/module/metafields?moduleName=".concat(this.module)).then((function(response){_this.moduleFieldsMeta=response.data.meta})).catch((function(){}))},handleAddActionClick:function(actionType){this.actionData=null,actionType===actionsHash.EMAIL.name?(this.actionType=actionsHash.EMAIL.name,this.sendNotificationVisible=!0):actionType===actionsHash.SMS.name?(this.actionType=actionsHash.SMS.name,this.sendNotificationVisible=!0):actionType===actionsHash.MOBILE.name?(this.actionType=actionsHash.MOBILE.name,this.sendNotificationVisible=!0):actionType===actionsHash.SCRIPT.name?(this.actionType=actionsHash.SCRIPT.name,this.showScriptDialog=!0):actionType===actionsHash.FIELD_UPDATE.name?(this.actionType=actionsHash.FIELD_UPDATE.name,this.showFieldUpdateDialog=!0):actionType===actionsHash.CHANGE_STATUS.name&&(this.actionType=actionsHash.CHANGE_STATUS.name,this.showChangeStatusDialog=!0)},setProperties:function(data){var actions=this.actions,index=actions.findIndex((function(action){return action.actionType===data.actionType}));(0,validation/* isEmpty */.xb)(index)?actions.push(data):actions.splice(index,1,data),this.$emit("onAddAction",this.updateAction(actions,this.notificationSerialize))},resetAction:function(data){var actions=this.actions,index=this.actions.findIndex((function(action){return action.actionType===data.actionType}));actions.splice(index,1)},updateAction:function(actions,notificationSerialize){var _this2=this,newlist=[];return actions.filter((function(action){return 5!==action.actionType})).map((function(action){var template;if(3!==action.actionType||(0,validation/* isEmpty */.xb)(notificationSerialize))if(4!==action.actionType||(0,validation/* isEmpty */.xb)(notificationSerialize))if(7!==action.actionType||(0,validation/* isEmpty */.xb)(notificationSerialize)){if(13===action.actionType)template=action;else if(21===action.actionType)template={actionType:action.actionType,templateJson:action.templateJson};else if(19===action.actionType){var _action$templateJson,new_state=(null===(_action$templateJson=action.templateJson)||void 0===_action$templateJson?void 0:_action$templateJson.new_state)||_this2.$getProperty(action,"template.originalTemplate.new_state",null),templateJson={new_state:new_state};template={actionType:action.actionType,templateJson:templateJson}}}else{var data=notificationSerialize.getDataToSave(action,"mobile");_this2.formatMobileData(data.templateJson),template=data}else template=notificationSerialize.getDataToSave(action,"sms");else template=notificationSerialize.getDataToSave(action,"mail");_this2.addModuleParam(template),newlist.push(template||action)})),newlist},addModuleParam:function(template){var _this3=this,workflowParameters=this.$getProperty(template,"templateJson.workflow.parameters"),ftl=this.$getProperty(template,"templateJson.ftl");ftl&&workflowParameters&&!workflowParameters.some((function(param){return param.name===_this3.module}))&&(template.templateJson.workflow=template.templateJson.workflow||{},template.templateJson.workflow.parameters.push({name:this.module,typeString:"String"}))},formatMobileData:function(data){var summaryPage=this.module.toUpperCase()+"_SUMMARY",message={content_available:!0,summary_id:"${"+this.module+".id}",sound:"default",module_name:this.module,priority:"high",text:data.message,click_action:summaryPage,title:data.subject};data.body=JSON.stringify({name:this.module.toUpperCase()+"_PUSH_NOTIFICATION",notification:message,data:message,id:data.id}),data.to=data.id,this.$common.setExpressionFromPlaceHolder(data.workflow,"${"+this.module+".id}")},serializeActions:function(){var actions=this.actions||[];return this.updateAction(actions,this.notificationSerialize)}}},components_CustomButtonActionsvue_type_script_lang_js=CustomButtonActionsvue_type_script_lang_js,CustomButtonActions_component=(0,componentNormalizer/* default */.Z)(components_CustomButtonActionsvue_type_script_lang_js,CustomButtonActionsvue_type_template_id_6763c9dc_render,CustomButtonActionsvue_type_template_id_6763c9dc_staticRenderFns,!1,null,null,null)
/* harmony default export */,CustomButtonActions=CustomButtonActions_component.exports,CreateRecordBehaviourvue_type_template_id_51519e4d_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-form-item",[_c("div",{staticClass:"pB15"},[_c("p",{staticClass:"details-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.module_name"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.module_name_desc"))+" ")])]),_c("el-select",{staticClass:"width100 pR20",attrs:{clearable:"",placeholder:_vm.$t("setup.customButton.module_form_placeholder")},model:{value:_vm.formModuleName,callback:function($$v){_vm.formModuleName=$$v},expression:"formModuleName"}},_vm._l(_vm.modulesList,(function(option){return _c("el-option",{key:option.moduleId,attrs:{value:option.name,label:option.displayName}})})),1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"formTemplateCreateRecord"}},[_c("div",{staticClass:"pB20"},[_c("p",{staticClass:"details-Heading pB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.module_form"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.module_form_desc"))+" ")])]),_c("el-select",{staticClass:"width100 pR20",attrs:{loading:_vm.isFormTemplateLoading,clearable:"",placeholder:_vm.$t("setup.customButton.module_form_placeholder")},model:{value:_vm.formId,callback:function($$v){_vm.formId=$$v},expression:"formId"}},_vm._l(_vm.formTemplates,(function(option){return _c("el-option",{key:option.id,attrs:{value:option.id,label:option.displayName}})})),1),_vm.hasSubModuleLookup?_c("p",{staticClass:"f12",staticStyle:{color:"#fd6e6e"}},[_vm._v(" "+_vm._s("Please select a form with "+_vm.module+" lookup")+" ")]):_vm._e()],1)],1)],1)],1)},CreateRecordBehaviourvue_type_template_id_51519e4d_staticRenderFns=[],CreateRecordBehaviourvue_type_script_lang_js={name:"CreateRecordCustomBtn",props:["module","customButtonObject"],data:function(){return{isFormTemplateLoading:!1,formModuleName:null,formTemplates:null,lookupFieldId:null,hasSubModuleLookup:!1,formId:null}},created:function(){this.deserialize()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)("automationSetup",["getAutomationModulesList"])),{},{modulesList:function(){return this.getAutomationModulesList()},subModuleName:function(){return this.formModuleName},formTemplatesList:function(){return this.formId}}),watch:{subModuleName:{handler:"getFormTemplates",immediate:!0},formTemplatesList:"getLookupFieldId"},methods:{deserialize:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var subModuleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:subModuleName=_this.$getProperty(_this,"customButtonObject.formModuleName"),_this.formModuleName=subModuleName;case 2:case"end":return _context.stop()}}),_callee)})))()},getFormTemplates:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.isFormTemplateLoading=!0,_context2.next=3,api/* API */.bl.get("/v2/forms",{moduleName:_this2.formModuleName,skipTemplatePermission:!0});case 3:_yield$API$get=_context2.sent,data=_yield$API$get.data,_this2.isFormTemplateLoading=!1,_this2.formTemplates=_this2.$getProperty(data,"forms"),_this2.formId||(_this2.formId=_this2.$getProperty(_this2,"customButtonObject.formId"));case 8:case"end":return _context2.stop()}}),_callee2)})))()},getLookupFieldId:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get2,data,fields,lookupfield;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,api/* API */.bl.get("/v2/forms/".concat(_this3.formModuleName),{formId:_this3.formId});case 2:if(_yield$API$get2=_context3.sent,data=_yield$API$get2.data,fields=_this3.$getProperty(data,"form.fields"),(0,validation/* isEmpty */.xb)(fields)){_context3.next=13;break}return fields.forEach((function(field){10===field.displayType&&"LOOKUP_SIMPLE"===field.displayTypeEnum&&field.lookupModuleName===_this3.module&&(lookupfield=field.fieldId)})),_this3.lookupFieldId=lookupfield,(0,validation/* isEmpty */.xb)(lookupfield)?_this3.hasSubModuleLookup=!0:_this3.hasSubModuleLookup=!1,_this3.$emit("setProperties",{formModuleName:_this3.formModuleName,formId:_this3.formId,lookupFieldId:lookupfield}),_context3.abrupt("return",lookupfield);case 13:return _this3.hasSubModuleLookup=!0,_this3.$emit("setProperties",{formModuleName:_this3.formModuleName,formId:_this3.formId,lookupFieldId:null}),_context3.abrupt("return",null);case 16:case"end":return _context3.stop()}}),_callee3)})))()}}},components_CreateRecordBehaviourvue_type_script_lang_js=CreateRecordBehaviourvue_type_script_lang_js,CreateRecordBehaviour_component=(0,componentNormalizer/* default */.Z)(components_CreateRecordBehaviourvue_type_script_lang_js,CreateRecordBehaviourvue_type_template_id_51519e4d_render,CreateRecordBehaviourvue_type_template_id_51519e4d_staticRenderFns,!1,null,null,null)
/* harmony default export */,CreateRecordBehaviour=CreateRecordBehaviour_component.exports,CustomButtonPermissionsvue_type_template_id_345cdb72_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-form",[_c("p",{staticClass:"subHeading-pink-txt bold pB0 text-fc-pink text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.permissions"))+" ")]),_c("p",{staticClass:"fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.permissions_subtext"))+" ")]),_vm._l(_vm.activeApprovers,(function(approver,key){return _c("el-row",{key:key,staticClass:"criteria-condition-block pT5 pB8 pL0"},[_c("el-col",{attrs:{span:8}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select",filterable:""},on:{change:function($event){approver.approverId=null}},model:{value:approver.type,callback:function($$v){_vm.$set(approver,"type",$$v)},expression:"approver.type"}},_vm._l(_vm.approverTypes,(function(field,index){return _c("el-option",{key:field.id+"_"+index,attrs:{label:field.name,value:field.id}})})),1)],1),_c("el-col",{staticClass:"pL10",attrs:{span:18}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select",filterable:""},on:{change:_vm.serialize},model:{value:approver.approverId,callback:function($$v){_vm.$set(approver,"approverId",$$v)},expression:"approver.approverId"}},_vm._l(_vm.approverOptionMap[approver.type],(function(option,index){return _c("el-option",{key:option.id+"_"+index,attrs:{label:option.displayName||option.name,value:option.id}})})),1)],1),_c("el-col",{staticClass:"mT5 mL5 border-left action",attrs:{span:3}},[key+1===_vm.activeApprovers.length?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addApprover}}):_vm._e(),_vm.isEmptyApprover(key)?_c("img",{staticClass:"delete-icon mL5",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteApprovers(key)}}}):_vm._e()])],1)}))],2)},CustomButtonPermissionsvue_type_template_id_345cdb72_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),approverUtils=(__webpack_require__(634338),__webpack_require__(12637)),CustomButtonPermissionsvue_type_script_lang_js={name:"CustomButtonPermissions",props:["module","customButtonObj"],data:function(){return{approverTypes:approverUtils/* approverTypes */.xy,approverOptionMap:[],moduleFieldsMeta:[],activeApprovers:[]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref,approvers;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.getModuleFields();case 2:_ref=_this.customButtonObj||{},approvers=_ref.approvers,(0,validation/* isEmpty */.xb)(approvers)?_this.addApprover():_this.activeApprovers=approvers.map((function(approver){return(0,approverUtils/* deserializeApprover */.Hb)(approver)}));case 4:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)("automationSetup",["getAutomationModulesList"])),(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},teams:function(state){return state.groups},roles:function(state){return state.roles}})),{},{approverTypeOptions:function(){return{users:[].concat((0,toConsumableArray/* default */.Z)(this.users),[{name:"Requester",id:"requester"}]),roles:this.roles,teams:this.teams,fields:this.moduleFields}},moduleFields:function(){return this.moduleFieldsMeta||null}}),watch:{approverTypeOptions:{handler:function(){var _handler=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(approverOptions){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,approverUtils/* getApproverOptions */.p9)(approverOptions);case 2:this.approverOptionMap=_context2.sent;case 3:case"end":return _context2.stop()}}),_callee2,this)})));function handler(_x){return _handler.apply(this,arguments)}return handler}(),immediate:!0}},methods:{serialize:function(){var activeApprovers=this.activeApprovers,moduleFields=this.moduleFields;if(!(0,validation/* isEmpty */.xb)(activeApprovers)){var approvers=activeApprovers.map((function(approver){return(0,approverUtils/* serializeApprover */.c_)(approver,{fields:moduleFields})})).filter((function(approver){return!(0,validation/* isEmpty */.xb)(approver)}));this.$emit("setProperties",{approvers:approvers})}},getModuleFields:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,api/* API */.bl.get("/module/metafields?moduleName=".concat(_this2.module));case 2:_yield$API$get=_context3.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_this2.moduleFieldsMeta=data.meta.fields);case 6:case"end":return _context3.stop()}}),_callee3)})))()},addApprover:function(){this.activeApprovers.push({type:null,approverId:null})},deleteApprovers:function(key){var approver=this.activeApprovers[key];1!==this.activeApprovers.length||(0,validation/* isEmpty */.xb)(approver.approverId)&&(0,validation/* isEmpty */.xb)(approver.type)||this.addApprover(),this.activeApprovers.splice(key,1),this.serialize()},isEmptyApprover:function(index){var approver=this.activeApprovers[index];return!(0,validation/* isEmpty */.xb)(approver.type)||!(0,validation/* isEmpty */.xb)(approver.approverId)||this.activeApprovers.length>1}}},components_CustomButtonPermissionsvue_type_script_lang_js=CustomButtonPermissionsvue_type_script_lang_js,CustomButtonPermissions_component=(0,componentNormalizer/* default */.Z)(components_CustomButtonPermissionsvue_type_script_lang_js,CustomButtonPermissionsvue_type_template_id_345cdb72_render,CustomButtonPermissionsvue_type_template_id_345cdb72_staticRenderFns,!1,null,null,null)
/* harmony default export */,CustomButtonPermissions=CustomButtonPermissions_component.exports,UpdateRecordBehaviourvue_type_template_id_032f8908_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"display-flex-between-space pB40 pT30"},[_c("div",[_vm._v("Update Fields for this record")]),_c("div",{staticClass:"fc__layout__has__columns"},[_vm.isConfigured?[_c("div",{staticClass:"pR10  border-right2 configured-green"},[_vm._v(" "+_vm._s(_vm.$t("common._common.configured"))+" ")]),_c("div",{staticClass:"pL10 pointer",on:{click:function($event){return _vm.editForm()}}},[_c("i",{staticClass:"el-icon-edit"})]),_c("div",[_c("a",{staticClass:"mL20 cursor-pointer reset-txt",on:{click:function($event){return _vm.removeForm()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.reset"))+" ")])])]:[_c("div",{staticClass:"pR10  border-right2 pointer configure-blue",on:{click:function(){return _vm.showFieldPickerDialog=!0}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.configure"))+" ")])]],2)]),_vm.showFieldPickerDialog?_c("FieldPicker",{attrs:{availableFields:_vm.formFields,selectedList:_vm.selectedFields,isInFormConfig:!0},on:{save:_vm.handleFieldPickerSave,close:function(){return _vm.showFieldPickerDialog=!1}}}):_vm._e(),_vm.canShowFormBuilder?_c("FormsEdit",{staticClass:"formbuilder-container",attrs:{moduleName:_vm.module,id:_vm.activeFormId,onSave:_vm.closeForm,showDeleteForField:function(ref){ref.name;return!0},isUpdateForm:!0}}):_vm._e()],1)],1)],1)},UpdateRecordBehaviourvue_type_template_id_032f8908_staticRenderFns=[],FieldPicker=__webpack_require__(24187),router=__webpack_require__(329435),uuid=__webpack_require__(455877),FormsEdit=__webpack_require__(185759),UpdateRecordBehaviourvue_type_script_lang_js={name:"UpdateRecordBehaviour",props:["module","isNew","formData","formId"],components:{FieldPicker:FieldPicker/* default */.Z,FormsEdit:FormsEdit["default"]},data:function(){return{isConfigured:!1,showFieldPickerDialog:!1,formFields:[],selectedFields:[],canShowFormBuilder:!1}},created:function(){this.fetchFormFields(),(0,validation/* isEmpty */.xb)(this.formData)||(this.selectedFields=this.formData[0].fields,this.isConfigured=!0)},methods:{fetchFormFields:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",api/* API */.bl.get("/v2/forms/fields",{moduleName:_this.module}).then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this.$message.error(error.message||"Error Occured");else{var fields=_this.$getProperty(data,"fields")||[];_this.formFields=fields.filter((function(field){return"TASKS"!==field.displayTypeEnum}))||[]}})));case 1:case"end":return _context.stop()}}),_callee)})))()},handleFieldPickerSave:function(fields){(0,validation/* isEmpty */.xb)(fields)?this.$message.error(this.$t("common.header.please_select_one_field")):(this.isConfigured=!0,this.selectedFields=fields,this.createForm())},createForm:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,selectedFields,_getApp,appLinkName,appId,url,params,_yield$API$post,error,data,form;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return moduleName=_this2.module,selectedFields=_this2.selectedFields,_getApp=(0,router/* getApp */.wx)(),appLinkName=_getApp.linkName,appId=_getApp.id,url="v2/forms/add",params={appLinkName:appLinkName,moduleName:moduleName,form:{name:"custom_button_form_".concat((0,uuid.v4)()),displayName:"Enter details",appLinkName:appLinkName,appId:appId,labelPosition:1,showInMobile:!0,hideInList:!0,siteIds:[],sections:[{fields:selectedFields}],stateFlowId:-99}},_context2.next=6,api/* API */.bl.post(url,params);case 6:_yield$API$post=_context2.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this2.$message.error(error.message||"Error Occured"):(form=data.form,_this2.$emit("setProperties",{form:form,formId:form.id,selectedFields:_this2.selectedFields}),_this2.editForm(form.id));case 10:case"end":return _context2.stop()}}),_callee2)})))()},editForm:function(id){var formId=this.formId;this.activeFormId=id||formId,this.canShowFormBuilder=!0},closeForm:function(){this.activeFormId=null,this.canShowFormBuilder=!1},removeForm:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_this3.$emit("setProperties",{form:null,formId:-99,selectedFields:[]}),_this3.selectedFields=[],_this3.isConfigured=!1;case 3:case"end":return _context3.stop()}}),_callee3)})))()}}},components_UpdateRecordBehaviourvue_type_script_lang_js=UpdateRecordBehaviourvue_type_script_lang_js,UpdateRecordBehaviour_component=(0,componentNormalizer/* default */.Z)(components_UpdateRecordBehaviourvue_type_script_lang_js,UpdateRecordBehaviourvue_type_template_id_032f8908_render,UpdateRecordBehaviourvue_type_template_id_032f8908_staticRenderFns,!1,null,null,null)
/* harmony default export */,UpdateRecordBehaviour=UpdateRecordBehaviour_component.exports,RedirectUrlBehaviourvue_type_template_id_2edf929e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",{staticClass:"custombtn-redirect"},[_c("el-col",[_c("el-form",[_c("el-form-item",[_c("div",{staticClass:"display-flex-between-space pB10 pT10"},[_c("p",{staticClass:"details-Heading pB3"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.redirect_url_label"))+" ")]),_vm.positionType!==_vm.POSITION.LIST_TOP?_c("PlaceholderPicker",{staticClass:"mR20 redirect-placeholder-text",attrs:{placement:"left",title:_vm.$t("common.header.placeholders"),module:_vm.module},on:{change:_vm.addPlaceholderToUrl}}):_vm._e()],1),_c("el-input",{staticClass:"mT3",attrs:{"min-rows":2,type:"textarea",autosize:{minRows:3,maxRows:4},placeholder:_vm.$t("setup.customButton.redirect_url_placeholder")},nativeOn:{input:function($event){return _vm.emitUrl.apply(null,arguments)}},model:{value:_vm.url,callback:function($$v){_vm.url=$$v},expression:"url"}}),_c("p",{staticClass:"fc-sub-title-desc pT5"},[_vm._v(" "+_vm._s(_vm.positionType===_vm.POSITION.LIST_TOP?"Eg: https://www.google.com":"Eg: https://www.google.com/search?q=${workorder.id:-}")+" ")])],1)],1)],1)],1)},RedirectUrlBehaviourvue_type_template_id_2edf929e_scoped_true_staticRenderFns=[],PlaceholderPopover=__webpack_require__(572689),PlaceholderPickervue_type_script_lang_js={props:["placement","trigger","title","module","filter"],components:{PlaceholderPopover:PlaceholderPopover/* default */.Z},data:function(){return{childrenPopovers:[],showPopover:!1,placeholder:null,options:[],loading:!1}},created:function(){this.loadPlaceholders()},render:function(){var _this=this,h=arguments[0];return h("el-popover",{attrs:{placement:this.placement,trigger:"click","popper-class":"p0"},model:{value:_this.showPopover,callback:function($$v){_this.showPopover=$$v}}},[h("span",{slot:"reference",class:"el-dropdown-link details-Heading text-fc-green",style:this.loading?"cursor: not-allowed":"cursor: pointer"},[this.title]),h("div",{class:"flex flex-row"},[h(PlaceholderPopover/* default */.Z,{on:(0,objectSpread2/* default */.Z)({},{itemClick:this.emitOptions,openPopover:this.openPopover}),attrs:{options:this.options}}),this.childrenPopovers])])},methods:{loadPlaceholders:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url,_yield$API$get,data,_data$placeholders,fields,moduleFields,filter;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if((0,validation/* isEmpty */.xb)(_this2.module)){_context.next=13;break}return _this2.loading=!0,url="v3/placeholders/".concat(_this2.module),_context.next=5,api/* API */.bl.get(url);case 5:_yield$API$get=_context.sent,data=_yield$API$get.data,_data$placeholders=data.placeholders,fields=_data$placeholders.fields,moduleFields=_data$placeholders.moduleFields,_this2.options=fields,_this2.options.forEach((function(field,index){var module=field.module;if(!(0,validation/* isEmpty */.xb)(module)){var children=moduleFields[module];_this2.options[index]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{children:children})}})),filter=_this2.filter,(0,validation/* isFunction */.mf)(filter)&&(_this2.options=_this2.options.filter(filter)),_this2.loading=!1;case 13:case"end":return _context.stop()}}),_callee)})))()},emitOptions:function(_ref){var childOption=_ref.option,parentOption=_ref.options,primaryField=childOption.primaryField;if((0,validation/* isEmpty */.xb)(childOption.children)){var placeholderString;this.showPopover=!1,(0,validation/* isEmpty */.xb)(parentOption.name)?(placeholderString=(0,validation/* isEmpty */.xb)(primaryField)?"".concat(childOption.name):"".concat(childOption.name,".").concat(primaryField),this.placeholder=[childOption.name,primaryField]):(placeholderString="".concat(parentOption.name,".").concat(childOption.name),this.placeholder=[parentOption.name,childOption.name]);var module=this.module;placeholderString="${".concat(module,".").concat(placeholderString,":-}"),this.$emit("change",{placeholderString:placeholderString,placeholder:this.placeholder}),this.childrenPopovers=[]}},openPopover:function(_ref2){var childOption=_ref2.option,parentOption=_ref2.options;if((0,validation/* isEmpty */.xb)(childOption.children))this.childrenPopovers.pop();else{var visited=this.$getProperty(parentOption,"visited");visited?this.childrenPopovers.pop():parentOption.visited=!0,this.childrenPopovers.push(this.addChildPopover(childOption))}},addChildPopover:function(options){var h=this.$createElement;return h(PlaceholderPopover/* default */.Z,{class:"popover-border-left",on:(0,objectSpread2/* default */.Z)({},{itemClick:this.emitOptions}),attrs:{options:options}})}}},placeholder_PlaceholderPickervue_type_script_lang_js=PlaceholderPickervue_type_script_lang_js,PlaceholderPicker_component=(0,componentNormalizer/* default */.Z)(placeholder_PlaceholderPickervue_type_script_lang_js,PlaceholderPicker_render,PlaceholderPicker_staticRenderFns,!1,null,null,null)
/* harmony default export */,PlaceholderPicker=PlaceholderPicker_component.exports,RedirectUrlBehaviourvue_type_script_lang_js={name:"RedirectUrlBehaiour",props:["module","customButtonObject","positionType"],components:{PlaceholderPicker:PlaceholderPicker},data:function(){return{url:"",POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz}},created:function(){this.deserialize()},methods:{emitUrl:function(){var params={actionType:CustomButtonUtil/* ACTION_TYPES */.aI.REDIRECT_URL,url:this.url};this.$emit("setProperties",{config:params})},deserialize:function(){var _this$customButtonObj=this.customButtonObject.config,config=void 0===_this$customButtonObj?{}:_this$customButtonObj,_ref=config||{},actionType=_ref.actionType,url=_ref.url;actionType&&url&&(this.url=this.$getProperty(this,"customButtonObject.config.url"))},addPlaceholderToUrl:function(_ref2){var placeholderString=_ref2.placeholderString;this.url="".concat(this.url).concat(placeholderString),this.emitUrl()}}},components_RedirectUrlBehaviourvue_type_script_lang_js=RedirectUrlBehaviourvue_type_script_lang_js,RedirectUrlBehaviour_component=(0,componentNormalizer/* default */.Z)(components_RedirectUrlBehaviourvue_type_script_lang_js,RedirectUrlBehaviourvue_type_template_id_2edf929e_scoped_true_render,RedirectUrlBehaviourvue_type_template_id_2edf929e_scoped_true_staticRenderFns,!1,null,"2edf929e",null)
/* harmony default export */,RedirectUrlBehaviour=RedirectUrlBehaviour_component.exports,ConnectedAppWidgetBehaviourvue_type_template_id_5a8c9108_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",[_c("el-col",[_c("el-form",[_c("el-form-item",[_c("div",[_c("p",{staticClass:"details-Heading pB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.connected_app_name"))+" ")])]),_c("el-select",{staticClass:"width100 pR20",attrs:{loading:_vm.appListLoader,clearable:"",placeholder:_vm.$t("setup.customButton.connected_app_name_placeholder")},model:{value:_vm.selectedApp,callback:function($$v){_vm.selectedApp=$$v},expression:"selectedApp"}},_vm._l(_vm.connectedAppList,(function(apps){return _c("el-option",{key:apps.id,attrs:{value:apps.id,label:apps.name}})})),1)],1)],1)],1),_c("el-col",[_c("el-form",[_c("el-form-item",[_c("div",[_c("p",{staticClass:"details-Heading pB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.connected_app_widget"))+" ")])]),_c("el-select",{staticClass:"width100 pR20",attrs:{clearable:"",placeholder:_vm.$t("setup.customButton.connected_app_widget_placeholder")},model:{value:_vm.selectedWidget,callback:function($$v){_vm.selectedWidget=$$v},expression:"selectedWidget"}},_vm._l(_vm.widgetList,(function(widget){return _c("el-option",{key:widget.id,attrs:{value:widget.id,label:widget.widgetName}})})),1),_vm.hasCustomButtonWidget?_vm._e():_c("p",{staticClass:"f12",staticStyle:{color:"#fd6e6e"}},[_vm._v(" "+_vm._s("Please select a form with Custom button widget")+" ")])],1)],1)],1)],1)},ConnectedAppWidgetBehaviourvue_type_template_id_5a8c9108_staticRenderFns=[],ConnectedAppWidgetBehaviourvue_type_script_lang_js={name:"ConnectedAppWidgetBehaviour",props:["customButtonObject"],data:function(){return{connectedAppList:[],selectedApp:null,appListLoader:!1,widgetList:[],selectedWidget:null,hasCustomButtonWidget:!0}},created:function(){var _this=this;this.loadConnectedApps().then((function(){_this.deserialize()}))},methods:{deserialize:function(){var _this$customButtonObj=this.customButtonObject.config,config=void 0===_this$customButtonObj?{}:_this$customButtonObj,_ref=config||{},appId=_ref.appId,actionType=_ref.actionType,widgetId=_ref.widgetId;if(actionType&&actionType===CustomButtonUtil/* ACTION_TYPES */.aI.CONNECTED_APPS&&widgetId&&appId){var currApp=this.connectedAppList.find((function(item){return item.id===appId}));this.selectedApp=currApp.id;var currWidget=currApp.connectedAppWidgetsList.find((function(item){return item.id===widgetId}));this.selectedWidget=currWidget.id}},loadConnectedApps:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this2.appListLoader=!0,_context.next=3,api/* API */.bl.get("v2/connectedApps/all");case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,_this2.connectedAppList=data.connectedApps,_this2.appListLoader=!1;case 7:case"end":return _context.stop()}}),_callee)})))()},setSelectedAppWidgets:function(){var connectedAppList=this.connectedAppList,selectedApp=this.selectedApp,currSelectedApp=connectedAppList.find((function(app){return app.id===selectedApp})),allWidgets=currSelectedApp.connectedAppWidgetsList;(0,validation/* isEmpty */.xb)(allWidgets)||(this.widgetList=allWidgets.filter((function(widget){return"CUSTOM_BUTTON"===widget.entityTypeEnum}))),(0,validation/* isEmpty */.xb)(this.widgetList)&&(this.hasCustomButtonWidget=!1)},serializeData:function(){var params={actionType:CustomButtonUtil/* ACTION_TYPES */.aI.CONNECTED_APPS,appId:this.selectedApp,widgetId:this.selectedWidget};this.$emit("setProperties",{config:params})}},watch:{selectedApp:"setSelectedAppWidgets",selectedWidget:"serializeData"}},components_ConnectedAppWidgetBehaviourvue_type_script_lang_js=ConnectedAppWidgetBehaviourvue_type_script_lang_js,ConnectedAppWidgetBehaviour_component=(0,componentNormalizer/* default */.Z)(components_ConnectedAppWidgetBehaviourvue_type_script_lang_js,ConnectedAppWidgetBehaviourvue_type_template_id_5a8c9108_render,ConnectedAppWidgetBehaviourvue_type_template_id_5a8c9108_staticRenderFns,!1,null,null,null)
/* harmony default export */,ConnectedAppWidgetBehaviour=ConnectedAppWidgetBehaviour_component.exports,InternalRedirectBehaviourvue_type_template_id_44ad6a52_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-form-item",[_c("div",{staticClass:"pB15"},[_c("p",{staticClass:"details-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.module_name"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.customButton.module_name_desc"))+" ")])]),_c("el-select",{staticClass:"width100 pR20",attrs:{clearable:"",filterable:"",placeholder:_vm.$t("common.products.select_module_name")},on:{change:function($event){return _vm.emitAction()}},model:{value:_vm.targetModuleName,callback:function($$v){_vm.targetModuleName=$$v},expression:"targetModuleName"}},_vm._l(_vm.modulesList,(function(option){return _c("el-option",{key:option.moduleId,attrs:{value:option.name,label:option.displayName}})})),1)],1)],1)],1),"Open Form"===_vm.selectedAction?_c("el-row",[_c("el-col",[_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("common._common.please_enter_fieldJson"))+" ")]),_c("PlaceholderPicker",{staticClass:"mR20 float-right mB10 placeholder-text",attrs:{placement:"left",title:_vm.$t("common.header.placeholders"),module:_vm.currentModuleName},on:{change:_vm.addPlaceholder}}),_c("el-input",{ref:"formDataInput",staticClass:"mT3 whitespace-pre-wrap",attrs:{"min-rows":2,type:"textarea",autosize:{minRows:3,maxRows:4}},nativeOn:{input:function($event){return _vm.emitAction.apply(null,arguments)}},model:{value:_vm.formDataJson,callback:function($$v){_vm.formDataJson=$$v},expression:"formDataJson"}}),_c("p",{staticClass:"fc-sub-title-desc pT5"},[_vm._v(" "+_vm._s('Eg: { "name": "value/placeholderValue", "lookup": 113, } in JSON Format ')+" ")])],1)],1):_c("el-row",[_c("el-col",[_c("p",{staticClass:"details-Heading pB10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.summary_record"))+" ")]),_c("el-col",[_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("common._common.please_enter_id"))+" ")]),_c("PlaceholderPicker",{key:"id-placeholder",staticClass:"mR20 mL15 float-right mB10 placeholder-text",attrs:{placement:"right",title:_vm.$t("common.header.placeholders"),module:_vm.currentModuleName},on:{change:_vm.addPlaceholder}})],1),_c("div",{staticClass:"mT10"},[_c("el-input",{staticClass:"fc-input-full-border-select2 mL3 width100 mT10",attrs:{clearable:""},on:{input:function($event){return _vm.emitAction()}},model:{value:_vm.overviewRecordId,callback:function($$v){_vm.overviewRecordId=$$v},expression:"overviewRecordId"}})],1)],1)],1)],1)},InternalRedirectBehaviourvue_type_template_id_44ad6a52_staticRenderFns=[],isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),navigationOptions={"Redirect URL":"URL","Open Form":"Form","Open Summary":"Summary"},InternalRedirectBehaviourvue_type_script_lang_js={name:"InternalRedirectBehaviour",props:["selectedAction","customButtonObject","currentModuleName"],components:{PlaceholderPicker:PlaceholderPicker},data:function(){return{targetModuleName:"",overviewRecordId:"",formDataJson:"",placeHolderValue:{name:"${bags.name:-}",lookup:113}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)("automationSetup",["getAutomationModulesList"])),{},{modulesList:function(){return this.getAutomationModulesList()}}),watch:{selectedAction:{handler:function(newVal,oldVal){(0,validation/* isEmpty */.xb)(newVal)||isEqual_default()(newVal,oldVal)||this.resetFields()},immediate:!0}},created:function(){this.deserialize()},methods:{emitAction:function(){var selectedAction=this.selectedAction,targetModuleName=this.targetModuleName,params={navigateTo:navigationOptions[selectedAction],moduleName:targetModuleName};params="Summary"===navigationOptions[selectedAction]?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},params),{},{recordId:this.overviewRecordId}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},params),{},{formDataJson:this.formDataJson}),this.$emit("setProperties",{config:params})},deserialize:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$customButtonObj,config,_ref,navigateTo,targetModuleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this$customButtonObj=_this.customButtonObject.config,config=void 0===_this$customButtonObj?{}:_this$customButtonObj,_ref=config||{},navigateTo=_ref.navigateTo,navigateTo&&(_this.targetModuleName=_this.$getProperty(_this,"customButtonObject.config.moduleName"),"Form"===navigateTo?(targetModuleName=_this.targetModuleName,(0,validation/* isEmpty */.xb)(targetModuleName)||(_this.formDataJson=_this.$getProperty(_this,"customButtonObject.config.formDataJson"))):_this.overviewRecordId=config.recordId);case 3:case"end":return _context.stop()}}),_callee)})))()},addPlaceholder:function(_ref2){var placeholderString=_ref2.placeholderString,selectedAction=this.selectedAction;if("Form"===navigationOptions[selectedAction]){var formDataElement=this.$refs["formDataInput"],$refs=formDataElement.$refs,cursorInitialPosition=this.$getProperty($refs,"textarea.selectionStart",""),endPosition=this.$getProperty($refs,"textarea.selectionEnd","");if((0,validation/* isEmpty */.xb)(cursorInitialPosition)||(0,validation/* isEmpty */.xb)(endPosition))this.formDataJson+=placeholderString;else{var preCursorText=formDataElement.value.substring(0,cursorInitialPosition),postCursorText=formDataElement.value.substring(endPosition,formDataElement.value.length);this.formDataJson="".concat(preCursorText).concat(placeholderString).concat(postCursorText)}}else this.overviewRecordId="",this.overviewRecordId+=placeholderString,this.emitAction()},resetFields:function(){this.targetModuleName="",this.overviewRecordId="",this.formDataJson=""}}},components_InternalRedirectBehaviourvue_type_script_lang_js=InternalRedirectBehaviourvue_type_script_lang_js,InternalRedirectBehaviour_component=(0,componentNormalizer/* default */.Z)(components_InternalRedirectBehaviourvue_type_script_lang_js,InternalRedirectBehaviourvue_type_template_id_44ad6a52_render,InternalRedirectBehaviourvue_type_template_id_44ad6a52_staticRenderFns,!1,null,null,null)
/* harmony default export */,InternalRedirectBehaviour=InternalRedirectBehaviour_component.exports,NewCustomButtonvue_type_script_lang_js={name:"NewCustomButton",props:["isNew","selectedCustomButton","closeDialog","module"],components:{CriteriaBuilder:dist/* CriteriaBuilder */.IP,CustomButtonPermissions:CustomButtonPermissions,CustomButtonActions:CustomButtonActions,CreateRecordBehaviour:CreateRecordBehaviour,UpdateRecordBehaviour:UpdateRecordBehaviour,RedirectUrlBehaviour:RedirectUrlBehaviour,ConnectedAppWidgetBehaviour:ConnectedAppWidgetBehaviour,InternalRedirectBehaviour:InternalRedirectBehaviour},data:function(){return{customButtonObj:{actions:null,name:null,description:null,criteria:null,positionType:null,formModuleName:null,formId:null,lookupFieldId:null,buttonType:1,approvers:null,selectedFields:[]},position:null,selectedActionType:null,ACTIONS:CustomButtonUtil/* ACTION_TYPES */.aI,rules:{name:[{required:!0,message:"Please enter a name",trigger:"blur"}],position:[{validator:this.formValidate,trigger:"change"}],criteria:[{validator:this.formValidate,trigger:"change"}],formTemplateUpdateRecord:[{validator:this.formValidate,trigger:"change"}]},saving:!1,criteriaRendered:!1,canShowCriteria:!1,positionTypeHash:CustomButtonUtil/* POSITION_TYPE */.Rz,positionLabel:CustomButtonUtil/* POSITION_LABELS */.Qv}},created:function(){this.deserialize(),this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)("automationSetup",["getAutomationModulesList"])),(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},teams:function(state){return state.groups},roles:function(state){return state.roles}})),{},{canShowSubAction:function(){var actionType=this.$getProperty(this,"selectedActionType");return[CustomButtonUtil/* ACTION_TYPES */.aI.CREATE_RECORD,CustomButtonUtil/* ACTION_TYPES */.aI.UPDATE_RECORD,CustomButtonUtil/* ACTION_TYPES */.aI.OTHER_ACTIONS].includes(actionType)},buttonPositionOptions:function(){return Object.keys(CustomButtonUtil/* POSITION_TYPE */.Rz)},availableActions:function(){return this.position===CustomButtonUtil/* POSITION_TYPE */.Rz.LIST_TOP?{REDIRECT_URL:CustomButtonUtil/* ACTION_TYPES */.aI.REDIRECT_URL,CONNECTED_APPS:CustomButtonUtil/* ACTION_TYPES */.aI.CONNECTED_APPS}:this.position===CustomButtonUtil/* POSITION_TYPE */.Rz.LIST_BAR?{OTHER_ACTIONS:CustomButtonUtil/* ACTION_TYPES */.aI.OTHER_ACTIONS,UPDATE_RECORD:CustomButtonUtil/* ACTION_TYPES */.aI.UPDATE_RECORD}:CustomButtonUtil/* ACTION_TYPES */.aI}}),watch:{selectedActionType:function(newValue,oldValue){newValue!==oldValue&&([CustomButtonUtil/* ACTION_TYPES */.aI.REDIRECT_URL,CustomButtonUtil/* ACTION_TYPES */.aI.CONNECTED_APPS,CustomButtonUtil/* ACTION_TYPES */.aI.OPEN_FORM,CustomButtonUtil/* ACTION_TYPES */.aI.OPEN_SUMMARY].includes(newValue)?(this.customButtonObj.buttonType=2,this.customButtonObj.actions=null):this.customButtonObj.buttonType=1)}},methods:{clearSelectedActions:function(){this.selectedActionType=null,this.customButtonObj.actions=null},serialize:function(){var customButtonObj=this.customButtonObj;Object.keys(customButtonObj).forEach((function(property){(0,validation/* isEmpty */.xb)(customButtonObj[property])&&delete customButtonObj[property]})),this.isNew||this.selectedActionType!==CustomButtonUtil/* ACTION_TYPES */.aI.UPDATE_RECORD||(customButtonObj.formModuleName=null),!this.canShowCriteria&&customButtonObj.criteria&&delete customButtonObj.criteria;var actionsTab=this.$refs["customButtonActions"];return customButtonObj.actions=actionsTab&&actionsTab.serializeActions()||[],customButtonObj.positionType=this.position,delete customButtonObj["form"],customButtonObj["shouldFormInterfaceApply"]=!1,customButtonObj},deserialize:function(){if(this.customButtonObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.customButtonObj),this.selectedCustomButton),!this.isNew){var customButtonObj=this.customButtonObj;(0,validation/* isEmpty */.xb)(customButtonObj.criteria)||(this.canShowCriteria=!0),this.selectedActionType=(0,CustomButtonUtil/* getActionType */.Pw)(customButtonObj);var fields=this.$getProperty(customButtonObj,"form.sections");fields&&(this.customButtonObj.selectedFields=fields),this.position=customButtonObj.positionType}},setProperties:function(mutatedObj){this.customButtonObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.customButtonObj),mutatedObj)},save:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var rule,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return rule=_this.serialize(_this.customButtonObj),params={moduleName:_this.module,rule:rule},_context2.next=4,_this.$refs["ruleForm"].validate(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(valid){var _yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!valid){_context.next=8;break}return _this.saving=!0,_context.next=4,api/* API */.bl.post("v2/custombutton/addOrUpdate",params);case 4:_yield$API$post=_context.sent,error=_yield$API$post.error,error?_this.$message.error(error.message||"Error Occured"):_this.closeDialog(!0),_this.saving=!1;case 8:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());case 4:case"end":return _context2.stop()}}),_callee2)})))()},formValidate:function(rule,value,callback){var fieldName=this.$getProperty(rule,"field");"position"===fieldName&&((0,validation/* isEmpty */.xb)(this.position)?callback(new Error("Please select a button position")):callback()),callback()},serializeCriteria:function(criteria){return Object.keys(criteria.conditions).forEach((function(condition){1===parseInt(condition)&&(criteria.conditions[1].fieldName||(criteria=null))})),criteria&&criteria.conditions&&0===Object.keys(criteria.conditions).length?null:criteria},handleActionAdd:function(actions){this.customButtonObj.actions=actions},clearCustomBtnAction:function(){var _this2=this,deletableProps=["formModuleName","formId","lookupFieldId","config","actions","form","selectedFields"];deletableProps.forEach((function(prop){return _this2.customButtonObj[prop]=null}))},handleCriteria:function(canShowCriteria){canShowCriteria||(this.$set(this.customButtonObj,"criteria",null),this.$set(this.customButtonObj,"criteriaId",null))}}},custombutton_NewCustomButtonvue_type_script_lang_js=NewCustomButtonvue_type_script_lang_js,NewCustomButton_component=(0,componentNormalizer/* default */.Z)(custombutton_NewCustomButtonvue_type_script_lang_js,NewCustomButtonvue_type_template_id_891827a0_render,NewCustomButtonvue_type_template_id_891827a0_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewCustomButton=NewCustomButton_component.exports,CustomButtonListvue_type_script_lang_js={name:"CustomButtonList",props:["moduleName"],components:{draggable:vuedraggable_umd_default(),NewCustomButton:NewCustomButton},title:function(){return"Custom Buttons"},data:function(){return{customButtons:[],loading:!1,showNewCustomButtonDialog:!1,isNew:!1,selectedCustomButton:null,dragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)("automationSetup",["getAutomationModulesList"])),{},{modulesList:function(){return this.getAutomationModulesList()}}),watch:{moduleName:{handler:"getCustomButtonList",immediate:!0}},methods:{getCustomButtonList:function(){var _this=this;return this.loading=!0,api/* API */.bl.post("/v2/custombutton/list",{moduleName:this.moduleName}).then((function(_ref){var data=_ref.data,error=_ref.error;(0,validation/* isEmpty */.xb)(error)?_this.customButtons=data.workflowRuleList:_this.$message.error(error.message||"Error Occured !")})).finally((function(){return _this.loading=!1}))},getActionTypes:function(button){return(0,CustomButtonUtil/* getActionType */.Pw)(button,!0)},changeStatus:function(button){var _this2=this,status=this.$getProperty(button,"status"),url=status?"setup/turnonrule":"setup/turnoffrule";return api/* API */.bl.post(url,{workflowId:button.id}).then((function(_ref2){var error=_ref2.error;error&&(_this2.$message.error(error.message||"Error occured"),button.status=!button.status)}))},getButtonPosition:function(button){var positionType=this.$getProperty(button,"positionType"),position=Object.values(CustomButtonUtil/* POSITION_TYPE */.Rz).find((function(type){return type===positionType}));return CustomButtonUtil/* POSITION_LABELS */.Qv[position]},closeDialog:function(){var needsReload=arguments.length>0&&void 0!==arguments[0]&&arguments[0];needsReload&&(this.getCustomButtonList(),this.isNew?this.$message.success("Button Created Succecfully"):this.$message.success("Button Updated Succecfully")),this.showNewCustomButtonDialog=!1,this.isNew=!1,this.selectedCustomButton={}},deleteButton:function(button){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var value,id,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this3.$dialog.confirm({title:_this3.$t("setup.customButton.header_delete"),message:_this3.$t("setup.customButton.delete_confirmation"),rbDanger:!0,rbLabel:_this3.$t("common._common.delete")});case 2:if(value=_context.sent,!value){_context.next=10;break}return id=_this3.$getProperty(button,"id"),_context.next=7,api/* API */.bl.post("/v2/custombutton/delete",{ruleId:id});case 7:_yield$API$post=_context.sent,error=_yield$API$post.error,error?_this3.$message.error(error.message||"Error Occured"):(_this3.$message.success("Button deleted successfully"),_this3.getCustomButtonList());case 10:case"end":return _context.stop()}}),_callee)})))()},editButton:function(button){this.selectedCustomButton=cloneDeep_default()(button),this.selectedCustomButton.selecetdActionType=this.getActionTypes(button),(0,validation/* isEmpty */.xb)(this.selectedCustomButton.formId)&&(this.selectedCustomButton.formId=null),this.isNew=!1,this.showNewCustomButtonDialog=!0},reorder:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$post2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.post("/v2/custombutton/reorder",{moduleName:_this4.moduleName,ids:_this4.customButtons.map((function(policy){return policy.id}))});case 2:_yield$API$post2=_context2.sent,error=_yield$API$post2.error,error?_this4.$message.error(error.message||"Error Occurred"):_this4.$message.success("Reorder Successful");case 5:case"end":return _context2.stop()}}),_callee2)})))()}}},custombutton_CustomButtonListvue_type_script_lang_js=CustomButtonListvue_type_script_lang_js,CustomButtonList_component=(0,componentNormalizer/* default */.Z)(custombutton_CustomButtonListvue_type_script_lang_js,render,staticRenderFns,!1,null,"452a148b",null)
/* harmony default export */,CustomButtonList=CustomButtonList_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/67773.js.map