(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[22004],{
/***/706512:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSafeLimit}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSafeLimit.vue?vue&type=template&id=62fb55f3
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"mT20 pB20"},[_c("div",{staticClass:"fc-text-pink2 mT20"},[_vm._v("SAFE LIMIT")]),_c("p",{staticClass:"grey-text2 pT5"},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.specify_rules_for_reading"))+" ")]),_c("el-row",{staticClass:"mT20"},[_c("el-col",{staticClass:"mT10",attrs:{span:6}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"none"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.none"))+" ")])],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"mT10",attrs:{span:7}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"greater"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v("Greater Than")])],1),"greater"===_vm.field.safeLimitPattern?_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.greaterThan,callback:function($$v){_vm.$set(_vm.field,"greaterThan",$$v)},expression:"field.greaterThan"}})],1):_vm._e()],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"mT10",attrs:{span:7}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"lesser"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v("Lesser Than")])],1),"lesser"===_vm.field.safeLimitPattern?_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.lesserThan,callback:function($$v){_vm.$set(_vm.field,"lesserThan",$$v)},expression:"field.lesserThan"}})],1):_vm._e()],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"mT10",attrs:{span:6}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"between"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v("Between")])],1),"between"===_vm.field.safeLimitPattern?_c("div",[_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.betweenFrom,callback:function($$v){_vm.$set(_vm.field,"betweenFrom",$$v)},expression:"field.betweenFrom"}})],1),_c("el-col",{staticStyle:{"margin-top":"18px","text-align":"center"},attrs:{span:2}},[_c("span",{staticClass:"label-txt-black"},[_vm._v("to")])]),_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.betweenTo,callback:function($$v){_vm.$set(_vm.field,"betweenTo",$$v)},expression:"field.betweenTo"}})],1)],1):_vm._e()],1),_c("div",{staticClass:"mT30"},[_c("el-row",[_c("el-col",{staticClass:"el-checkbox-container mT10",attrs:{span:7}},[_c("el-checkbox",{model:{value:_vm.field.raiseSafeLimitAlarm,callback:function($$v){_vm.$set(_vm.field,"raiseSafeLimitAlarm",$$v)},expression:"field.raiseSafeLimitAlarm"}},[_vm._v("Raise Alarm")])],1),_c("el-col",{staticClass:"mT10",attrs:{span:7}},[_c("div",{staticClass:"label-txt2"},[_vm._v("Alarm Severity")])]),_c("el-col",{attrs:{span:6}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Select"},model:{value:_vm.field.safeLimitSeverity,callback:function($$v){_vm.$set(_vm.field,"safeLimitSeverity",$$v)},expression:"field.safeLimitSeverity"}},_vm._l(_vm.alarmSeverity,(function(item){return _c("el-option",{key:item,attrs:{label:item,value:item}})})),1)],1)],1)],1)],1)},staticRenderFns=[],FSafeLimitvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(425728),__webpack_require__(434284),{props:["value","edit"],data:function(){return{field:{safeLimitId:-1,raiseSafeLimitAlarm:!1,displayName:"",dataType:1,lesserThan:null,greaterThan:null,betweenTo:null,betweenFrom:null,safeLimitPattern:"none",safeLimitSeverity:"Minor"},alarmSeverity:["Critical","Major","Minor"]}},mounted:function(){this.$helpers.extend(this.field,this.value),this.edit&&this.editReadingRules(this.value)},created:function(){this.$store.dispatch("loadAlarmSeverity")},watch:{field:{handler:function(val){this.$emit("input",this.field)},deep:!0}},methods:{editReadingRules:function(fields){var _this=this;this.field.raiseSafeLimitAlarm=!1,this.field.safeLimitSeverity="Minor",this.field.lesserThan=null,this.field.greaterThan=null,this.field.betweenTo=null,this.field.betweenFrom=null,this.field.safeLimitPattern="none",fields.readingRules&&fields.readingRules.forEach((function(rule){if("(b!=-1&&a<b)||(c!=-1&&a>c)"===rule.workflow.resultEvaluator){var min=rule.workflow.expressions.find((function(e){return"b"===e.name})).constant,max=rule.workflow.expressions.find((function(e){return"c"===e.name})).constant;"-1"===min&&"-1"===max?_this.field.safeLimitPattern="none":"-1"===min?(_this.field.safeLimitPattern="lesser",_this.field.lesserThan=max):"-1"===max?(_this.field.safeLimitPattern="greater",_this.field.greaterThan=min):(_this.field.safeLimitPattern="between",_this.field.betweenTo=max,_this.field.betweenFrom=min),_this.field.safeLimitId=rule.id||-1,rule.actions&&(_this.field.safeLimitSeverity=rule.actions[0].template.originalTemplate.severity,_this.field.raiseSafeLimitAlarm=!0)}}))},clearData:function(safeLimitPattern){"none"===safeLimitPattern?(this.field.lesserThan=null,this.field.greaterThan=null,this.field.betweenFrom=null,this.field.betweenTo=null):"lesser"===safeLimitPattern?(this.field.greaterThan=null,this.field.betweenFrom=null,this.field.betweenTo=null):"greater"===safeLimitPattern?(this.field.lesserThan=null,this.field.betweenFrom=null,this.field.betweenTo=null):"between"===safeLimitPattern&&(this.field.lesserThan=null,this.field.greaterThan=null)}}}),components_FSafeLimitvue_type_script_lang_js=FSafeLimitvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSafeLimitvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSafeLimit=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/18903:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return EditAssetReadingDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/new/v1/EditAssetReadingDialog.vue?vue&type=template&id=80252d46
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog50 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_vm.loading?_c("div",{staticClass:"lex-middle fc-empty-white m10 fc-agent-empty-state height-calc200"},[_c("spinner",{staticStyle:{"margin-top":"360px"},attrs:{show:_vm.loading}})],1):_c("el-form",{ref:"newAssetReadingForm",attrs:{model:_vm.module,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v("Edit Reading")])]),_c("div",{staticClass:"new-body-modal pB100 pR20",staticStyle:{height:"calc(100vh - 100px)","overflow-y":"scroll"}},[_c("div",{},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Field Name")]),_c("el-input",{staticClass:"input-background-remove fc-input-full-border2 width100 pT10",model:{value:_vm.module.fields[0].displayName,callback:function($$v){_vm.$set(_vm.module.fields[0],"displayName",$$v)},expression:"module.fields[0].displayName"}})],1),_vm.categoryName?_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Category")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(_vm._s(_vm.categoryName))])]):_vm._e(),_vm.isFormulaField?_vm._e():_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Type")]),_c("div",{staticClass:"pT20 label-txt-black"},[_vm._v(" "+_vm._s(_vm.module.fields[0].counterField?"Counter":_vm.$constants.dataType[_vm.module.fields[0].dataType])+" ")])])],1),2===_vm.module.fields[0].dataType||3===_vm.module.fields[0].dataType?_c("el-row",{staticClass:"pT20 pB10",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Metric")]),_c("el-select",{staticClass:"fc-radio-btn fc-radio-btn2 fc-input-full-border2 pT10 width100",on:{change:function($event){return _vm.loadUnit(_vm.module.fields[0])}},model:{value:_vm.metric,callback:function($$v){_vm.metric=$$v},expression:"metric"}},_vm._l(_vm.metricsUnits.metrics,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.name,value:dtype.metricId}})})),1)],1),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Unit")]),_c("el-select",{staticClass:"fc-radio-btn fc-radio-btn2 fc-input-full-border2 pT10 width100",model:{value:_vm.unitId,callback:function($$v){_vm.unitId=$$v},expression:"unitId"}},_vm._l(_vm.unitsForMetric,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.displayName+" ("+dtype.symbol+")",value:dtype.unitId}})})),1)],1)],1):_vm._e(),4===_vm.module.fields[0].dataType?_c("el-row",{staticClass:"pT20 pB10"},[_c("div",{staticClass:"label-txt-black"},[_vm._v("Boolean Values")]),_c("div",{staticClass:"row pT10"},[_c("div",{staticClass:"flex-middle"},[_c("el-input",{staticClass:"input-background-remove fc-input-full-border2",staticStyle:{width:"285px"},model:{value:_vm.module.fields[0].trueVal,callback:function($$v){_vm.$set(_vm.module.fields[0],"trueVal",$$v)},expression:"module.fields[0].trueVal"}}),_c("div",{staticClass:"pL5"},[_vm._v("(+ve)")])],1)]),_c("div",{staticClass:"row pT10"},[_c("div",{staticClass:"flex-middle"},[_c("el-input",{staticClass:"input-background-remove fc-input-full-border2",staticStyle:{width:"285px"},model:{value:_vm.module.fields[0].falseVal,callback:function($$v){_vm.$set(_vm.module.fields[0],"falseVal",$$v)},expression:"module.fields[0].falseVal"}}),_c("div",{staticClass:"pL5"},[_vm._v("(-ve)")])],1)])]):8===_vm.module.fields[0].dataType?_c("el-row",{staticClass:"pT10 pB10"},[_c("div",{staticClass:"label-txt-black pT10 pB10"},[_vm._v("Pick List Options")]),_vm._l(_vm.module.fields[0].values,(function(value,index){return _c("div",{key:index,staticClass:"pB10"},[value.visible?_c("div",{staticClass:"row"},[_c("div",[_c("el-input",{staticClass:"input-background-remove fc-input-full-border2 width100",attrs:{type:"text",placeholder:""},model:{value:value.value,callback:function($$v){_vm.$set(value,"value",$$v)},expression:"value.value"}})],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.module.fields[0].values.length>2,expression:"module.fields[0].values.length > 2"}],staticClass:"pL10 optionremoveicon pointer",staticStyle:{"align-self":"center"},on:{click:function($event){return _vm.removeOption(value,index)}}},[_c("img",{attrs:{src:__webpack_require__(385769)}})]),_c("div",{directives:[{name:"show",rawName:"v-show",value:index+1===_vm.module.fields[0].values.length,expression:"index + 1 === module.fields[0].values.length"}],staticClass:"pL10 pointer",staticStyle:{"align-self":"center"},on:{click:function($event){return _vm.addOptionsFields(_vm.module.fields[0].values,index)}}},[_c("img",{attrs:{src:__webpack_require__(353654)}})]),_c("div",{staticClass:"clearboth"})]):_vm._e()])}))],2):_vm._e()],1),_vm.showSensorDetection()?_c("div",{staticClass:"mT20 pB20"},[_c("div",{staticClass:"fc-text-pink2 mT20"},[_vm._v(" "+_vm._s(_vm.$t("setup.reading.faulty_sensor_detection"))+" ")]),_c("p",{staticClass:"grey-text2 pT5"},[_vm._v(" "+_vm._s(_vm.$t("setup.reading.specify_rules_to_detect_faulty_sensor"))+" ")]),_c("el-checkbox-group",{staticClass:"flex flex-direction-column",model:{value:_vm.selectedValues,callback:function($$v){_vm.selectedValues=$$v},expression:"selectedValues"}},_vm._l(_vm.sensorRules,(function(sensorRule){return _c("el-checkbox",{key:sensorRule.sensorRuleType,staticClass:"newradio pT20 f-checkbox fc-sensor-checkbox",attrs:{color:"secondary",label:sensorRule.sensorRuleType}},_vm._l(sensorRule.textArr,(function(obj,index){return _c("div",{key:index,staticClass:"flex-middle"},[_c("div",[_vm._v(_vm._s(obj.text))]),_vm.$validation.isEmpty(obj.modelKey)?_vm._e():_c("el-input",{staticClass:"width70px mL10 mR10 fc-input-full-border-h35 fc-input-full-border-bold",on:{change:function($event){return _vm.validation(sensorRule,sensorRule.rulePropInfo[obj.modelKey])}},model:{value:sensorRule.rulePropInfo[obj.modelKey],callback:function($$v){_vm.$set(sensorRule.rulePropInfo,obj.modelKey,$$v)},expression:"sensorRule.rulePropInfo[obj.modelKey]"}})],1)})),0)})),1)],1):_vm._e(),"asset"!==_vm.resourceType||2!==_vm.module.fields[0].dataType&&3!==_vm.module.fields[0].dataType?_vm._e():_c("f-safe-limit",{ref:"safelimit",attrs:{edit:!0},model:{value:_vm.module.fields[0],callback:function($$v){_vm.$set(_vm.module.fields,0,$$v)},expression:"module.fields[0]"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("Save")])],1)])],1):_vm._e()},staticRenderFns=[],esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),FSafeLimit=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(564043),__webpack_require__(322462),__webpack_require__(709873),__webpack_require__(162506),__webpack_require__(76265),__webpack_require__(706512)),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),Spinner=__webpack_require__(604947),utils_validation=__webpack_require__(990260),EditAssetReadingDialogvue_type_script_lang_js={props:["visibility","model","unitDetails","resourceType","categoryId"],data:function(){return{sensorRules:[],selectedValues:[],selectedValuesFromDb:[],loading:!1,metricsUnits:this.unitDetails,numberFields:null,unitsForMetric:null,unitId:null,metric:null,module:{categoryId:null,includeValidations:!1,fields:[{safeLimitId:-1,raiseSafeLimitAlarm:!1,displayName:"",dataType:1,lesserThan:null,greaterThan:null,betweenTo:null,betweenFrom:null,safeLimitPattern:"none",safeLimitSeverity:"Minor"}]},isFormulaField:!1,formula:{name:"",workflow:null,includedResources:[]},formulaFieldUnit:"",alarmSeverity:["Critical","Major","Minor"]}},components:{FSafeLimit:FSafeLimit/* default */.Z,Spinner:Spinner/* default */.Z},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity")},mounted:function(){var _this=this;if(this.loading=!0,this.loadFormulaField(),this.model){if(this.unitId=this.model.fields[0].unitId>0?parseInt(this.model.fields[0].unitId):null,this.model.fields[0].unitId=this.model.fields[0].unitId>0?parseInt(this.model.fields[0].unitId):null,this.model.fields[0].metric=this.model.fields[0].metric>0?parseInt(this.model.fields[0].metric):null,this.metric=this.model.fields[0].metric,this.model.fields[0].metric>0&&this.metricsUnits.metrics){var metric=this.metricsUnits.metrics.filter((function(d){if(d.metricId===_this.model.fields[0].metric)return d}));this.unitsForMetric=this.metricsUnits.metricWithUnits[metric[0]._name]}4===this.model.fields[0].dataType&&(this.model.fields[0].trueVal||(this.model.fields[0].trueVal="True"),this.model.fields[0].falseVal||(this.model.fields[0].falseVal="False")),Object.assign(this.module,this.$helpers.cloneObject(this.model))}this.formulaFieldUnit=this.model.fields[0].unit,this.fetchSensorRules()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{categoryName:function(){var _this2=this;if(this.module.categoryId){var category=this.assetCategory.find((function(category){return category.id===_this2.module.categoryId}));if(category)return category.displayName}return""}}),methods:{validation:function(sensorRule,value){var sensorRuleType=sensorRule.sensorRuleType;this.selectedValues.includes(sensorRuleType)||(0,utils_validation/* isEmpty */.xb)(value)?(0,utils_validation/* isEmpty */.xb)(value)&&(this.selectedValues=this.selectedValues.filter((function(val){return val!==sensorRuleType}))):this.selectedValues.push(sensorRule.sensorRuleType)},fetchSensorRules:function(){var _this3=this,categoryId=this.categoryId,model=this.model,fieldObj=model.fields[0],id=fieldObj.id,params={categoryId:categoryId,readingFieldId:id};api/* API */.bl.get("/v2/alarm/fetchSensorRules",params).then((function(_ref){var error=_ref.error,data=_ref.data;if(error)_this3.$message.error(error.message||"Error Occured"),_this3.loading=!1;else{var _ref2=data||[],sensorRuleTypes=_ref2.sensorRuleTypes;_this3.sensorRules=sensorRuleTypes,_this3.constructPlaceHolders()}}))},constructPlaceHolders:function(){var _this4=this;this.sensorRules.forEach((function(sensorRule){sensorRule.id>0&&sensorRule.status&&(_this4.selectedValues.push(sensorRule.sensorRuleType),_this4.selectedValuesFromDb.push(sensorRule));var placeHolder=sensorRule.subject.match(/[^{\}]+(?=})/g),reg=/\{.*?\}/g,textArr=[],text=sensorRule.subject.split(reg),last="",gaps=[];text.forEach((function(part,i){var obj={text:part||"",modelKey:(0,utils_validation/* isEmpty */.xb)(placeHolder)||(0,utils_validation/* isEmpty */.xb)(placeHolder[i])?"":placeHolder[i]};textArr.push(obj),gaps.push(i+1)})),last=text.pop(),_this4.$set(sensorRule,"textArr",textArr),_this4.$set(sensorRule,"gaps",gaps),_this4.$set(sensorRule,"last",last)})),this.loading=!1},update:function(){var _this5=this,categoryId=this.categoryId,model=this.model,sensorRules=this.sensorRules,selectedValues=this.selectedValues,assetCategory=this.assetCategory,selectedValuesFromDb=this.selectedValuesFromDb,fieldObj=model.fields[0],category=assetCategory.find((function(category){return category.id===categoryId})),id=fieldObj.id,sensorRulesList=sensorRules.filter((function(sensorRule){return selectedValues.includes(sensorRule.sensorRuleType)})),typesToInactive=[];selectedValuesFromDb.forEach((function(val){selectedValues.includes(val.sensorRuleType)||typesToInactive.push(val)}));var params={categoryId:categoryId,typesToInactive:typesToInactive,readingFieldId:id,sensorRules:sensorRulesList},resourceType=this.resourceType;if("asset"===resourceType)params=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},params),{},{moduleId:category.assetModuleID});else{var moduleId=fieldObj.moduleId;params=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},params),{},{moduleId:moduleId})}api/* API */.bl.post("/v2/alarm/updateSensorRules",params).then((function(_ref3){var error=_ref3.error;error&&_this5.$message.error(error.message||"Error Occured")}))},showSensorDetection:function(){if(this.$helpers.isLicenseEnabled("NEW_READING_RULE"))return!1;var dataTypeEnumList=["DECIMAL","NUMBER","COUNTER"],model=this.model,_ref4=model||{},fields=_ref4.fields,fieldObj=fields[0]||{},_ref5=fieldObj||{},dataTypeEnum=_ref5.dataTypeEnum,dataTypeEnumName=dataTypeEnum._name;return dataTypeEnumList.includes(dataTypeEnumName)},removeOption:function(value,idx){
// if (value.id > 0) {
//   value.visible = false
// }
// else {
//   this.module.fields[0].values.splice(idx, 1)
// }
this.module.fields[0].values.splice(idx,1)},addOptionsFields:function(values,index){values.splice(index+1,0,{value:"",visible:!0})},loadUnit:function(field){var _this6=this;if(this.metric>0){var metric=this.metricsUnits.metrics.filter((function(d){if(d.metricId===_this6.metric)return d}));"PERCENTAGE"===metric[0]._name&&this.metricsUnits.metricWithUnits[metric[0]._name].splice(1,1),this.unitsForMetric=this.metricsUnits.metricWithUnits[metric[0]._name]}this.module.fields[0].unitId=null,this.unitId=null},cancel:function(){this.$emit("canceled")},loadFormulaField:function(){var _this7=this;8===this.model.fields[0].moduleType&&(
// LIVE_FORMULA
this.isFormulaField=!0,this.$http.get("/v2/reading/formula/field/"+this.model.fields[0].id).then((function(response){0===response.data.responseCode?Object.assign(_this7.formula,response.data.result.formulaField):_this7.$message.error(response.data.message)})))},save:function(){var _this8=this;if(this.update(),this.module.fields){var url,params,fieldReadingRules=[];fieldReadingRules.push(this.$common.getSafeLimitRules(this.module.fields[0],this.module.categoryId));var delReadingRulesIds=[];"none"===this.module.fields[0].safeLimitPattern&&this.module.fields[0].safeLimitId&&-1!==this.module.fields[0].safeLimitId&&delReadingRulesIds.push(this.module.fields[0].safeLimitId);var moduleField=this.module.fields[0],field={displayName:moduleField.displayName,dataType:moduleField.dataType,id:moduleField.id};8===moduleField.dataType?field.values=moduleField.values:4===moduleField.dataType&&(field.trueVal=moduleField.trueVal,field.falseVal=moduleField.falseVal),this.unitId>0&&(field.unitId=this.unitId),this.metric>0&&(field.metric=this.metric),url="/reading/updatesetupreading",params={fieldJson:field,moduleId:this.module.fields[0].moduleId,delReadingRulesIds:delReadingRulesIds,fieldReadingRules:fieldReadingRules},this.$http.post(url,params).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(_this8.$message.success("Reading Updated successfully."),_this8.$emit("saved"),_this8.closeDialog()):_this8.$message.error("Reading updation failed.")}))}},closeDialog:function(){this.$emit("update:visibility",!1)},forceUpdate:function(){this.$forceUpdate()}}},v1_EditAssetReadingDialogvue_type_script_lang_js=EditAssetReadingDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_EditAssetReadingDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EditAssetReadingDialog=component.exports},
/***/28651:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewFmoduleBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/new/v1/NewFmoduleBuilder.vue?vue&type=template&id=438ed708
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-form",{attrs:{inline:!0,model:_vm.value,"label-position":"top"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20"},[_c("div",{staticClass:"fc-text-pink2"},[_vm._v(_vm._s(_vm.$t("common.tabs.reading")))])]),_vm._l(_vm.value.fields,(function(field,index){return _c("div",{key:index,staticClass:"mT20 fc-field-values-block"},[_c("el-row",{staticClass:"flex-middle"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.$t("common.header.reading_name"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.wo_report.field_name")},model:{value:field.displayName,callback:function($$v){_vm.$set(field,"displayName",$$v)},expression:"field.displayName"}})],1)],1),_c("el-row",{staticClass:"pT20 flex-middle"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.$t("common._common.reading_type"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:_vm.value.disableUneditable},on:{change:function($event){return _vm.showVisible(field,index)}},model:{value:field.dataTypeTemp,callback:function($$v){_vm.$set(field,"dataTypeTemp",$$v)},expression:"field.dataTypeTemp"}},_vm._l(_vm.dataTypes,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.label,value:dtype.value}})})),1)],1),3===field.dataType&&_vm.value.includeValidations?_c("el-col",{staticClass:"text-left pL10",attrs:{span:2}},[_c("img",{staticStyle:{height:"18px"},attrs:{src:__webpack_require__(652396)},on:{click:function($event){_vm.dialogVisible=!0}}})]):_vm._e()],1),3===field.dataType||"3_1"===field.dataType?_c("el-row",{staticClass:"pT20 flex-middle"},[_c("el-col",{attrs:{span:6}}),_c("el-col",{attrs:{span:14}},[_c("el-col",{attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:_vm.value.disableUneditable},on:{change:function($event){return _vm.loadUnit(field)}},model:{value:field.metric,callback:function($$v){_vm.$set(field,"metric",$$v)},expression:"field.metric"}},_vm._l(_vm.metricsUnits.metrics,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.name,value:dtype.metricId}})})),1)],1),_c("el-col",{staticClass:"pL10",attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:_vm.value.disableUneditable},model:{value:field.unitId,callback:function($$v){_vm.$set(field,"unitId",$$v)},expression:"field.unitId"}},_vm._l(_vm.metricsUnits.metricWithUnits[field.metricName],(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.displayName+" ("+dtype.symbol+")",value:dtype.unitId}})})),1)],1)],1)],1):4===field.dataType?_c("el-row",{staticClass:"pT20 flex-middle"},[_c("el-col",{attrs:{span:6}}),_c("el-col",{attrs:{span:14}},[_c("el-col",{attrs:{span:12}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common._common.+ve_value")},model:{value:field.trueVal,callback:function($$v){_vm.$set(field,"trueVal",$$v)},expression:"field.trueVal"}})],1),_c("el-col",{staticClass:"pL10",attrs:{span:12}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common._common.-ve_value")},model:{value:field.falseVal,callback:function($$v){_vm.$set(field,"falseVal",$$v)},expression:"field.falseVal"}})],1)],1)],1):8===field.dataType?_c("el-row",{staticClass:"pT20 flex-middle"},[_c("el-col",{attrs:{span:6}}),_c("el-col",{staticClass:"position-relative",attrs:{span:14}},_vm._l(field.values,(function(value,index){return _c("div",{key:index},[_c("div",{staticClass:"flex-middle"},[_c("div",[_c("el-input",{staticClass:"mB10 width280px",attrs:{type:"text",placeholder:""},model:{value:value.value,callback:function($$v){_vm.$set(value,"value",$$v)},expression:"value.value"}})],1),_c("div",{staticClass:"creteria-delete-icon inline-flex fmodulevalue-Edit mL10"},[_c("img",{directives:[{name:"show",rawName:"v-show",value:field.values.length>2,expression:"field.values.length > 2"}],staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.removeOption(field.values,index)}}}),_c("img",{directives:[{name:"show",rawName:"v-show",value:index+1===field.values.length,expression:"index + 1 === field.values.length"}],staticClass:"mL10",staticStyle:{height:"18px",width:"18px"},attrs:{src:__webpack_require__(353654)},on:{click:function($event){return _vm.addOptionsFields(field.values,index)}}})])])])})),0)],1):_c("el-row"),_c("el-row",{staticClass:"pT20 flex-middle"},[_c("el-col",{attrs:{span:6}}),_c("el-col",{attrs:{span:12}},[_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:_vm.dialogVisible,width:"35%","append-to-body":!0,title:_vm.$t("common.products.add_safe_limit")},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[2===field.dataType||3===field.dataType?_c("f-safe-limit",{staticClass:"module-safe-limit-dialog",attrs:{categoryId:_vm.value.categoryId},model:{value:_vm.value.fields[index],callback:function($$v){_vm.$set(_vm.value.fields,index,$$v)},expression:"value.fields[index]"}}):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.dialogVisible=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){_vm.dialogVisible=!1}}},[_vm._v(_vm._s(_vm.$t("common._common._save")))])],1)],1)],1)],1),_vm.value.fields.length>1?_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-remove-icon pointer",attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.deleteRow(index)}}},[_c("img",{staticStyle:{height:"16px",width:"16px"},attrs:{src:__webpack_require__(385769)}})]):_vm._e()],1)})),_c("el-button",{staticClass:"fc-add-border-green-btn mT20",on:{click:_vm.addRow}},[_c("i",{staticClass:"el-icon-plus fwBold"}),_vm._v(" "+_vm._s(_vm.$t("common._common.add_reading"))+" ")])],2)},staticRenderFns=[],FSafeLimit=(__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(538077),__webpack_require__(947522),__webpack_require__(706512)),NewFmoduleBuildervue_type_script_lang_js={props:["value"],data:function(){return{metricsUnits:{},isNumberFields:!1,selectedMetric:null,alarmSeverity:["Critical","Major","Minor"],dataTypes:[{label:this.$t("common._common.text"),value:1},
// {
//   label: 'Number',
//   value: 2,
// },
{label:this.$t("common.products.decimal"),value:3},{label:this.$t("common.products.boolean"),value:4},{label:this.$t("common.products.pick_list"),value:8},{label:this.$t("common.products.counter"),value:"3_1"}],dialogVisible:!1}},components:{FSafeLimit:FSafeLimit/* default */.Z},created:function(){this.$store.dispatch("loadAlarmSeverity")},mounted:function(){this.loadDefaultMetricUnits()},methods:{removeOption:function(values,index){values.splice(index,1);
// this.$forceUpdate()
},addOptionsFields:function(values,index){values.splice(index+1,0,{value:""});
// this.$forceUpdate()
},showVisible:function(field,index){0===index&&(this.isNumberFields=!1),"3_1"===field.dataTypeTemp?(field.dataType=3,field.counterField=!0):field.dataType=field.dataTypeTemp,2===field.dataType||3===field.dataType?this.isNumberFields=!0:8===field.dataType&&(this.$set(field,"values",[]),field.values.push({value:"Option 1",visible:!0},{value:"Option 2",visible:!0})),1===field.dataType?(field.displayType="TEXTBOX",field.displayTypeInt=1):2===field.dataType?(field.displayType="NUMBER",field.displayTypeInt=9):3===field.dataType?(field.displayType="DECIMAL",field.displayTypeInt=13):4===field.dataType?(field.displayType="DECISION_BOX",field.displayTypeInt=5):8===field.dataType&&(field.displayType="SELECTBOX",field.displayTypeInt=3)},loadUnit:function(field){if(field.metric>0){var metric=this.metricsUnits.metrics.filter((function(d){if(d.metricId===field.metric)return d}));field.metricName=metric[0]._name,"PERCENTAGE"===field.metricName&&this.metricsUnits.metricWithUnits[metric[0]._name].splice(1,1),this.$set(field,"unitId",this.setOrgUnit(field.metric))}},setOrgUnit:function(metricId){if(this.metricsUnits.orgUnitsList){var unitId=null;return this.metricsUnits.orgUnitsList.forEach((function(d){d.metric===metricId&&(unitId=d.unit)})),unitId>0?unitId:null}},addRow:function(){this.value.fields.push({safeLimitPattern:"none",raiseSafeLimitAlarm:!1,displayName:"",dataType:3,safeLimitSeverity:"Minor",lesserThan:null,greaterThan:null,betweenTo:null,betweenFrom:null})},loadDefaultMetricUnits:function(){var self=this;self.$http.get("/units/getDefaultMetricUnits").then((function(response){self.metricsUnits=response.data}))},deleteRow:function(index){this.value.fields.splice(index,1)}}},v1_NewFmoduleBuildervue_type_script_lang_js=NewFmoduleBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_NewFmoduleBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewFmoduleBuilder=component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/},
/***/652396:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"66f5c51eb21209326513911e42e6a634.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/22004.js.map