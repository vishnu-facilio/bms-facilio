"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[3476,83999],{
/***/646716:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FetchViewsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),FetchViewsMixinvue_type_script_lang_js={methods:{fetchView:function(moduleName){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,data,error,_ref,groupViews;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,params={moduleName:moduleName,groupType:1,viewType:1},_context.next=4,api/* API */.bl.get("/v2/views/viewList",params);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error){_context.next=10;break}return _ref=data||{},groupViews=_ref.groupViews,_context.abrupt("return",_this.getFirstView(groupViews));case 10:_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context["catch"](0),_context.abrupt("return","all");case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])})))()},getFirstView:function(groupViews){var _ref2=(groupViews||[]).find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref2.views,_this$$getProperty=this.$getProperty(views,"0",{}),name=_this$$getProperty.name;return name||"all"}}},base_FetchViewsMixinvue_type_script_lang_js=FetchViewsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_FetchViewsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FetchViewsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/724460:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SignatureColumn}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/SignatureColumn.vue?vue&type=template&id=00c0fd35&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasSignature({field:_vm.field,record:_vm.record})?_c("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"hover","close-delay":100}},[_c("div",{staticClass:"signature-field-container"},[_c("img",{attrs:{src:_vm.getSignatureUrl({field:_vm.field,record:_vm.record})}})]),_c("a",{attrs:{slot:"reference"},slot:"reference"},[_vm._v("Signed")])]):_c("div",[_vm._v("Not Signed")])],1)},staticRenderFns=[],validation=(__webpack_require__(434284),__webpack_require__(990260)),baseUrl=__webpack_require__(420499),SignatureColumnvue_type_script_lang_js={props:["field","record"],methods:{hasSignature:function(props){var field=props.field,record=props.record,_ref=field||{},name=_ref.name,isDefaultField=this.$getProperty(field||{},"default");if(isDefaultField)return!(0,validation/* isEmpty */.xb)(record["".concat(name,"Id")]);var recordData=this.$getProperty(record,"data.".concat(name,"Id"));return!(0,validation/* isEmpty */.xb)(recordData)||!(0,validation/* isEmpty */.xb)(record["".concat(name,"Id")])},getSignatureUrl:function(props){
// TODO move this handling to some util
var field=props.field,record=props.record,_ref2=field||{},name=_ref2.name;if(!(0,validation/* isEmpty */.xb)(field)){var url="".concat((0,baseUrl/* getBaseURL */.BS)()),previewUrl=null,_field$default=field.default,isDefault=void 0!==_field$default&&_field$default;return previewUrl=isDefault?this.$getProperty(record,"".concat(name,"Url")):this.$getProperty(record.data,"".concat(name,"Url"))||this.$getProperty(record,"".concat(name,"Url")),(0,validation/* isEmpty */.xb)(previewUrl)?void 0:url+"".concat(previewUrl.split("/api")[1])}}}},list_SignatureColumnvue_type_script_lang_js=SignatureColumnvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_SignatureColumnvue_type_script_lang_js,render,staticRenderFns,!1,null,"00c0fd35",null)
/* harmony default export */,SignatureColumn=component.exports},
/***/213657:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return GlimpseCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/GlimpseCard.vue?vue&type=template&id=3cadb0c7
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"quick-summary-card-container"},[_c("div",{staticClass:"p8"},[_c("div",{staticClass:"d-flex pB10 align-center height20 justify-content-space"},[_c("div",[_c("span",{staticClass:"f14 id-color"},[_vm._v("#"+_vm._s(_vm.config.id)+" ")]),_vm.$validation.isEmpty(_vm.config.moduleState)?_vm._e():_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15 status-content "},[_vm._v(" "+_vm._s(_vm.config.moduleState)+" ")])]),_vm.config.canShowRedirect?_c("div",{staticClass:"open-summary",on:{click:_vm.redirectToSummary}},[_c("inline-svg",{attrs:{src:"svgs/external-link2",iconClass:"icon icon-xs"}})],1):_vm._e()]),_c("div",{staticClass:"d-flex align-center"},[_vm.config.canShowImage?_c("img",{staticClass:"image-circle mR10",attrs:{src:_vm.config.imageUrl}}):_vm._e(),_c("div",{staticClass:"f16 bold elipsis-txt fld-dis-name"},[_vm._v(" "+_vm._s(_vm.config.displayName)+" ")])])]),_vm._t("fields")],2)},staticRenderFns=[],GlimpseCardvue_type_script_lang_js={props:["config"],methods:{redirectToSummary:function(){this.$emit("redirectToSummary")}}},components_GlimpseCardvue_type_script_lang_js=GlimpseCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_GlimpseCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,GlimpseCard=component.exports},
/***/705219:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return GlimpseLookupWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/GlimpseLookupWrapper.vue?vue&type=template&id=74c602b4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{trigger:"hover","visible-arrow":!1,"open-delay":800,disabled:!_vm.showWigetFields},on:{hide:_vm.onHidePopover,show:function($event){_vm.onShowpopover=!0}}},[_c("div",{staticClass:"width-fit  quick-summary-card-header pointer",attrs:{slot:"reference"},on:{mouseenter:_vm.onHoverFields,mouseover:function($event){_vm.showEyeIcon=!0}},slot:"reference"},[_vm.canShowLink?_c("div",{staticClass:"bluetxt f13",class:[_vm.canShowEyeIcon?"qs-field":"bluetxt"],on:{click:function($event){return _vm.redirectToLookUpFieldSummary(_vm.field,_vm.record)}}},[_vm._v(" "+_vm._s(_vm.displayValue)+" ")]):_c("div",[_vm._v(_vm._s(_vm.displayValue))]),_c("div",{class:[_vm.canShowEyeIcon?"qs-selection-bar":"selection-bar"]})]),_vm.showWigetFields?_c("GlimpseCardWrapper",_vm._b({attrs:{field:_vm.field,details:_vm.details,displayValue:_vm.displayValue,lookupModuleName:_vm.lookupModuleName,canShowRedirect:_vm.canShowLink,moduleName:_vm.moduleName,recordId:_vm.recordId,siteList:_vm.siteList}},"GlimpseCardWrapper",_vm.$attrs,!1)):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),GlimpseCardWrappervue_type_template_id_7a4f427f_render=(__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(670560),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isLoading?_c("div",_vm._l(2,(function(i){return _c("div",{key:i,staticClass:"fields-glimpse"},[_c("div",{staticClass:"loading-shimmer line"}),_c("div",{staticClass:"loading-shimmer line1 mB10"})])})),0):_vm.canShowGlimpse?_c("glimpse-card",{key:"event-"+_vm.details.id,attrs:{config:_vm.glimpseConfig},on:{redirectToSummary:function($event){return _vm.redirectToLookUpFieldSummary(_vm.field)}},scopedSlots:_vm._u([{key:"fields",fn:function(){return[_c("div",{staticClass:"fd-field-details-card width100"},[_c("field-details",{attrs:{columns:_vm.columns,detailsLayout:_vm.detailsLayout,config:_vm.fieldConfig}})],1)]},proxy:!0}])}):_vm.$validation.isEmpty(_vm.deletedRecord)?_vm._e():_c("div",{staticClass:"deleted-glimpse-text"},[_c("fc-icon",{attrs:{group:"action",name:"info",size:"15"}}),_vm._v(" "+_vm._s(_vm.deletedRecord)+" ")],1)],1)}),GlimpseCardWrappervue_type_template_id_7a4f427f_staticRenderFns=[],app=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(865137),__webpack_require__(654564),__webpack_require__(90385),__webpack_require__(782080)),baseUrl=__webpack_require__(420499),vuex_esm=__webpack_require__(420629),FetchViewsMixin=__webpack_require__(646716),routeUtil=__webpack_require__(405759),validation=__webpack_require__(990260),router=__webpack_require__(329435),GlimpseCard=__webpack_require__(213657),calendarSupportUtil=__webpack_require__(852452),picklist=__webpack_require__(961358),GlimpseCardWrappervue_type_script_lang_js={mixins:[FetchViewsMixin/* default */.Z],components:{FieldDetails:app/* NewFieldDetails */.f3,GlimpseCard:GlimpseCard/* default */.Z},props:["details","field","lookupModuleName","displayValue","canShowRedirect","siteList","recordId","moduleName","updateSite"],data:function(){return{isLoading:!1,canShowGlimpse:!1,deletedRecord:"",detailsLayout:[],glimpseData:[],columns:2}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.isLoading=!0,_context.next=3,_this.fetchSites();case 3:return _context.next=5,_this.fetchSummaryDetails();case 5:return _this.deserialize(),_context.next=8,_this.$store.dispatch("getActiveCurrencyList");case 8:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("glimpse",{glimpseDetails:function(state){return state.glimpseDetails},glimpseFields:function(state){return state.glimpseFields},deletedGlimpse:function(state){return state.deletedGlimpse}})),(0,vuex_esm/* mapState */.rn)({currencyList:function(state){return state.activeCurrencies},account:function(state){return state.account}})),(0,vuex_esm/* mapGetters */.Se)("glimpse",["getGlimpseFieldId"])),{},{glimpseModuleState:function(){var displayName=this.$getProperty(this.glimpseData,"moduleState.displayName",null)||null;return displayName},multiCurrency:function(){var _ref=this.$getProperty(this.account,"data.currencyInfo")||{},displaySymbol=_ref.displaySymbol,currencyCode=_ref.currencyCode,multiCurrencyEnabled=_ref.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}},canShowImage:function(){var _this$details;return!(0,validation/* isEmpty */.xb)(null===(_this$details=this.details)||void 0===_this$details?void 0:_this$details.photoFileName)},lookupFieldName:function(){var _ref2=this.field||{},name=_ref2.name;return name},imageUrl:function(){var getImage=this.getImage,details=this.details;return getImage(null===details||void 0===details?void 0:details.photoId)||""},fieldConfig:function(){var multiCurrency=this.multiCurrency,currencyList=this.currencyList;return{dateformat:this.$dateformat,timezone:this.$timezone,timeformat:this.$timeformat,showDivider:!1,org:this.$account.org,multiCurrency:multiCurrency,currencies:currencyList}},glimpseId:function(){var _ref3=this.details||{},id=_ref3.id,localId=_ref3.localId;return calendarSupportUtil/* moduleByLocalId */.X.includes(this.lookupModuleName)&&localId||id},glimpseConfig:function(){var glimpseId=this.glimpseId,canShowImage=this.canShowImage,imageUrl=this.imageUrl,glimpseModuleState=this.glimpseModuleState,canShowRedirect=this.canShowRedirect,displayValue=this.displayValue,config={id:glimpseId,moduleState:glimpseModuleState,displayName:displayValue,canShowRedirect:canShowRedirect,canShowImage:canShowImage,imageUrl:imageUrl};return config}}),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)("glimpse",["loadGlimpse"])),{},{getImage:function(photoId){return"".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(photoId)},fetchSites:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var details,siteId,siteObj,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(details=_this2.details,siteId=details.siteId||null,siteObj=_this2.getSiteDisplayName(siteId),!(0,validation/* isEmpty */.xb)(siteObj)||(0,validation/* isEmpty */.xb)(siteId)){_context2.next=10;break}return _context2.next=6,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"site"},defaultIds:[siteId],perPage:1});case 6:_yield$getFieldOption=_context2.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error||(0,validation/* isEmpty */.xb)(options)||(_this2.updateSite(options),_this2.$emit("updateSite",options));case 10:case"end":return _context2.stop()}}),_callee2)})))()},fetchSummaryDetails:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var details,moduleName,lookupModuleName,glimpseFields,lookupFieldName,deletedGlimpse,recordId,isDeletedRecord,hasFieldDetails;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(details=_this3.details,moduleName=_this3.moduleName,lookupModuleName=_this3.lookupModuleName,glimpseFields=_this3.glimpseFields,lookupFieldName=_this3.lookupFieldName,deletedGlimpse=_this3.deletedGlimpse,recordId=_this3.recordId,isDeletedRecord=deletedGlimpse[lookupModuleName],!(0,validation/* isEmpty */.xb)(isDeletedRecord)){_context3.next=7;break}if(hasFieldDetails=glimpseFields[details.id]||null,!(0,validation/* isEmpty */.xb)(hasFieldDetails)){_context3.next=7;break}return _context3.next=7,_this3.loadGlimpse({moduleName:moduleName,lookupModuleName:lookupModuleName,id:recordId,lookupFieldName:lookupFieldName,recordId:null===details||void 0===details?void 0:details.id});case 7:case"end":return _context3.stop()}}),_callee3)})))()},deserialize:function(){var _this$details2,_this4=this,data=this.glimpseDetails[this.lookupModuleName]||{};if(this.deletedRecord=this.deletedGlimpse[null===(_this$details2=this.details)||void 0===_this$details2?void 0:_this$details2.id]||{},(0,validation/* isEmpty */.xb)(this.deletedRecord)){this.canShowGlimpse=!0;var fields=(data.configurationFields||[]).map((function(flt){var _ref4=flt||{},facilioField=_ref4.facilioField,sequenceNumber=_ref4.sequenceNumber,_ref5=facilioField||{},displayName=_ref5.displayName,name=_ref5.name,dataTypeEnum=_ref5.dataTypeEnum,_ref5$enumMap=_ref5.enumMap,enumMap=void 0===_ref5$enumMap?{}:_ref5$enumMap,trueVal=_ref5.trueVal,falseVal=_ref5.falseVal,displayType=_ref5.displayType,options=(0,objectSpread2/* default */.Z)({},enumMap)||{};return"BOOLEAN"===dataTypeEnum&&(options={trueVal:trueVal,falseVal:falseVal}),{displayName:displayName,name:name,sequenceNumber:sequenceNumber,dataTypeEnum:dataTypeEnum,options:options,displayType:displayType}})),details=this.glimpseFields[this.details.id],_ref6=details||{},currencyCode=_ref6.currencyCode,exchangeRate=_ref6.exchangeRate;this.glimpseData=details;var result=(fields||[]).flatMap((function(fld){var value=(0,validation/* isEmpty */.xb)(details[null===fld||void 0===fld?void 0:fld.name])?null:details[null===fld||void 0===fld?void 0:fld.name];if(["siteId","site"].includes(null===fld||void 0===fld?void 0:fld.name)){var name=_this4.getSiteDisplayName(details[fld.name]);value="siteId"===(null===fld||void 0===fld?void 0:fld.name)?name:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},details[fld.name]),{},{name:name})}var res=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fld),{},{value:value});return"MULTI_CURRENCY_FIELD"===fld.dataTypeEnum&&(res=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},res),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})),res})).sort((function(s1,s2){return s1.sequenceNumber-s2.sequenceNumber}));this.columns=1===result.length?1:2,this.detailsLayout=[{fields:result}]}this.isLoading=!1},getSiteDisplayName:function(siteValue){var siteObj=(this.siteList||[]).find((function(site){return site.value===(null===siteValue||void 0===siteValue?void 0:siteValue.id)||siteValue})),_ref7=siteObj||{},label=_ref7.label;return label},redirectToLookUpFieldSummary:function(lookUpField){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _ref8,lookupModuleName,field,_ref9,lookupModule,_ref10,name,custom,id,moduleName,viewname,_ref11,routeName,currentModuleName,routeObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _ref8=lookUpField||{},lookupModuleName=_ref8.lookupModuleName,field=_ref8.field,_ref9=field||{},lookupModule=_ref9.lookupModule,_ref10=lookupModule||{},name=_ref10.name,custom=_ref10.custom,id=_this5.details.id,moduleName=lookupModuleName||name,_context4.next=7,_this5.fetchView(moduleName);case 7:if(viewname=_context4.sent,!(0,validation/* isEmpty */.xb)(id)){_context4.next=10;break}return _context4.abrupt("return");case 10:(0,router/* isWebTabsEnabled */.tj)()?(_ref11=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},routeName=_ref11.name,routeName&&_this5.$router.push({name:routeName,params:{viewname:viewname,id:id}})):(currentModuleName=custom?"custom":moduleName,routeObj=(0,routeUtil/* findRouterForModuleInApp */.E)(currentModuleName,router/* pageTypes */.As.OVERVIEW)||{},(0,validation/* isEmpty */.xb)(routeObj)||_this5.$router.push(routeObj(id,viewname,moduleName)));case 11:case"end":return _context4.stop()}}),_callee4)})))()}})},components_GlimpseCardWrappervue_type_script_lang_js=GlimpseCardWrappervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_GlimpseCardWrappervue_type_script_lang_js,GlimpseCardWrappervue_type_template_id_7a4f427f_render,GlimpseCardWrappervue_type_template_id_7a4f427f_staticRenderFns,!1,null,null,null)
/* harmony default export */,GlimpseCardWrapper=component.exports,GlimpseLookupWrappervue_type_script_lang_js={mixins:[FetchViewsMixin/* default */.Z],props:["field","record","siteList","hideGlimpse","recordModuleName"],components:{GlimpseCardWrapper:GlimpseCardWrapper},data:function(){return{showWigetFields:!1,showEyeIcon:!1,onShowpopover:!1}},mounted:function(){var _this=this,channel=new BroadcastChannel("glimpse");channel.addEventListener("message",(function(event){var message=event.data;"resetDetails"===message&&_this.resetGlimpseDetails()}))},beforeDestroy:function(){this.resetGlimpse()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("glimpse",{glimpseDetails:function(state){return state.glimpseDetails},deletedGlimpse:function(state){return state.deletedGlimpse}})),{},{canShowEyeIcon:function(){return this.showWigetFields&&this.showEyeIcon},recordId:function(){var _ref=this.record||{},id=_ref.id;return id},moduleName:function(){var _ref2=this||{},recordModuleName=_ref2.recordModuleName,record=_ref2.record,field=_ref2.field,$route=_ref2.$route,_ref3=record||{},moduleName=_ref3.moduleName,name=this.$getProperty(field.field,"module.name")||"",_ref4=(null===$route||void 0===$route?void 0:$route.meta)||{},recordMetaModuleName=_ref4.moduleName;return recordModuleName||moduleName||name||recordMetaModuleName},details:function(){var _ref5=this.field||{},name=_ref5.name,recordValue=this.record[name];if("siteId"===name){var siteObj=(this.siteList||[]).find((function(site){return site.value===recordValue})),_ref6=siteObj||{},displayName=_ref6.label,value=_ref6.value;return{displayName:displayName,id:value}}return recordValue||{}},webTabRouteName:function(){var lookupModuleName=this.lookupModuleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref7=(0,router/* findRouteForModule */.Jp)(lookupModuleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name;return name}return null},lookupModuleName:function(){var _this$field;if("siteId"===(null===(_this$field=this.field)||void 0===_this$field?void 0:_this$field.name))return"site";var _ref8=this.field||{},lookupModuleName=_ref8.lookupModuleName,_ref8$field=_ref8.field,_ref8$field2=void 0===_ref8$field?{}:_ref8$field,_ref8$field2$lookupMo=_ref8$field2.lookupModule,_ref8$field2$lookupMo2=void 0===_ref8$field2$lookupMo?{}:_ref8$field2$lookupMo,name=_ref8$field2$lookupMo2.name;return lookupModuleName||name||null},displayValue:function(){var _ref9=this.details||{},primaryValue=_ref9.primaryValue,name=_ref9.name,displayName=_ref9.displayName,subject=_ref9.subject,_ref10=this.field||{},displayValue=_ref10.displayValue,value=displayName||name||subject||displayValue||"---";return(0,validation/* isEmpty */.xb)(primaryValue)?value:primaryValue},canShowLink:function(){var isLookUpRedirectApplicable=this.isLookUpRedirectApplicable,field=this.field,displayValue=this.displayValue,hideGlimpse=this.hideGlimpse;return isLookUpRedirectApplicable(field)&&"---"!=displayValue&&!hideGlimpse}}),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)("glimpse",["loadGlimpseMetaFields","resetGlimpse","resetGlimpseDetails"])),{},{onHidePopover:function(){this.showEyeIcon=!1,this.onShowpopover=!1,this.showWigetFields=!1},onHoverFields:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _glimpseDetails$looku,lookupModuleName,glimpseDetails,hideGlimpse,currentModuleMeta;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(lookupModuleName=_this2.lookupModuleName,glimpseDetails=_this2.glimpseDetails,hideGlimpse=_this2.hideGlimpse,!hideGlimpse){_context.next=3;break}return _context.abrupt("return");case 3:if(currentModuleMeta=glimpseDetails[lookupModuleName]||null,!(0,validation/* isEmpty */.xb)(currentModuleMeta)){_context.next=6;break}return _context.abrupt("return");case 6:return _context.next=8,_this2.loadGlimpseMetaFields({moduleName:lookupModuleName});case 8:_this2.showWigetFields=(null===(_glimpseDetails$looku=glimpseDetails[lookupModuleName])||void 0===_glimpseDetails$looku?void 0:_glimpseDetails$looku.active)&&"---"!=_this2.displayValue;case 9:case"end":return _context.stop()}}),_callee)})))()},redirectToLookUpFieldSummary:function(lookUpField,details){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this3$details,_ref11,lookupModuleName,field,_ref12,lookupModule,fieldName,_ref13,name,custom,id,moduleName,siteObj,_ref14,value,_details$fieldName,viewname,currentModuleName,routeObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if((0,validation/* isEmpty */.xb)(_this3.deletedGlimpse[null===(_this3$details=_this3.details)||void 0===_this3$details?void 0:_this3$details.id])){_context2.next=2;break}return _context2.abrupt("return");case 2:return _ref11=lookUpField||{},lookupModuleName=_ref11.lookupModuleName,field=_ref11.field,_ref12=field||{},lookupModule=_ref12.lookupModule,fieldName=_ref12.name,_ref13=lookupModule||{},name=_ref13.name,custom=_ref13.custom,id=null,moduleName=null,"siteId"===fieldName?(siteObj=(_this3.siteList||[]).find((function(site){return site.value===details[fieldName]})),_ref14=siteObj||{},value=_ref14.value,id=value,moduleName="site"):(id=(null===(_details$fieldName=details[fieldName])||void 0===_details$fieldName?void 0:_details$fieldName.id)||null,moduleName=lookupModuleName||name),_context2.next=9,_this3.fetchView(moduleName);case 9:if(viewname=_context2.sent,!(0,validation/* isEmpty */.xb)(id)){_context2.next=12;break}return _context2.abrupt("return");case 12:(0,router/* isWebTabsEnabled */.tj)()?(0,validation/* isEmpty */.xb)(_this3.webTabRouteName)||_this3.$router.push({name:_this3.webTabRouteName,params:{viewname:viewname,id:id}}):(currentModuleName=custom?"custom":moduleName,routeObj=(0,routeUtil/* findRouterForModuleInApp */.E)(currentModuleName,router/* pageTypes */.As.OVERVIEW)||{},(0,validation/* isEmpty */.xb)(routeObj)||_this3.$router.push(routeObj(id,viewname,moduleName)));case 13:case"end":return _context2.stop()}}),_callee2)})))()},isLookUpRedirectApplicable:function(field){var webTabRouteName=this.webTabRouteName,_ref15=field||{},lookupModuleName=_ref15.lookupModuleName,fieldObj=_ref15.field,_ref16=fieldObj||{},lookupModule=_ref16.lookupModule,_ref17=lookupModule||{},custom=_ref17.custom,typeEnum=_ref17.typeEnum,name=_ref17.name,lookupName=lookupModuleName||name||null,routeObj={};custom||(routeObj=(0,routeUtil/* findRouterForModuleInApp */.E)(lookupName,router/* pageTypes */.As.OVERVIEW));var hasMainAppRoute=!(0,router/* isWebTabsEnabled */.tj)()&&(!(0,validation/* isEmpty */.xb)(routeObj)||custom),hasWebTabRoute=(0,router/* isWebTabsEnabled */.tj)()&&!(0,validation/* isEmpty */.xb)(webTabRouteName),hasRoute=hasMainAppRoute||hasWebTabRoute;return lookupName&&"BASE_ENTITY"===typeEnum&&hasRoute}})},components_GlimpseLookupWrappervue_type_script_lang_js=GlimpseLookupWrappervue_type_script_lang_js,GlimpseLookupWrapper_component=(0,componentNormalizer/* default */.Z)(components_GlimpseLookupWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,"74c602b4",null)
/* harmony default export */,GlimpseLookupWrapper=GlimpseLookupWrapper_component.exports},
/***/344751:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return InspectionFieldDetails}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/inspection/inspection-template/InspectionFieldDetails.vue?vue&type=template&id=7a14ac5c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:["inspection-details-widget",_vm.title&&"pT0"]},[_vm.title?[_c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title mL0"},[_vm._v(_vm._s(_vm.title))])])]:_vm._e(),_vm.loading?_c("div",{class:["container",_vm.title&&"pL0"]},_vm._l([1,2,3],(function(index){return _c("div",{key:index,staticClass:"field"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("span",{class:["lines loading-shimmer",_vm.title&&"m0"]})]),_c("el-col",{attrs:{span:12}},[_c("span",{class:["lines loading-shimmer",_vm.title&&"m0"]})])],1)],1)})),0):_vm.emptyState?_c("div",{staticClass:"mT20",staticStyle:{color:"#8ca1ad"}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("inline-svg",{staticClass:"vertical-middle self-center",attrs:{src:"svgs/emptystate/notes",iconClass:"icon icon-xxxlg mR5"}}),_c("div",{staticClass:"f14 pL10 self-center"},[_vm._v(" "+_vm._s(_vm.$t("qanda.template.no_fields"))+" ")])],1)]):_c("div",{ref:"content-container",class:["container",_vm.widget.title&&"pL0"]},[_vm._l(_vm.fieldsList,(function(field,index){return[["TEXTAREA","RICH_TEXT"].includes(field.displayTypeEnum)?_c("el-row",{key:field.name+index,staticClass:"field field-text-area"},[_c("el-col",{staticClass:"field-label",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.getFormattedDisplayName(field))+" ")]),"TEXTAREA"===field.displayTypeEnum?_c("el-col",{staticClass:"field-value line-height22",attrs:{span:16}},[_vm._v(" "+_vm._s(field.displayValue)+" ")]):_vm._e(),"RICH_TEXT"===field.displayTypeEnum?_c("el-col",{staticClass:"field-value line-height22",attrs:{span:16}},[_vm.$validation.isEmpty(field.displayValue)?_c("span",[_vm._v("---")]):_c("div",{staticClass:"rich-text-preview-details",domProps:{innerHTML:_vm._s(_vm.sanitize(field.displayValue))}})]):_vm._e()],1):_c("el-row",{key:field.name+"-"+index,staticClass:"field"},[_c("el-col",{key:field.displayName,staticClass:"field-label",attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.getFormattedDisplayName(field))+" ")]),_c("el-col",{key:field.displayName+"value",staticClass:"field-value",attrs:{span:12}},["moveApprovalNeeded"===field.name?_c("div",[_vm._v(" "+_vm._s(!0===field.displayValue?"Yes":"No")+" ")]):_vm.isLookupSimple(field)?_c("div",[_c("GlimpseLookupWrapper",{attrs:{field:field,record:_vm.details,siteList:_vm.siteList,recordModuleName:_vm.moduleName}})],1):_vm.systemFields.includes(field.name)?_c("div",[_vm._v(" "+_vm._s(_vm.getSysFieldValue(field))+" ")]):_vm.isFileField(field)?_c("div",[_c("el-row",[_c("el-col",{key:index+1+"asset",staticClass:"attachment-label pointer",attrs:{span:12}},[_vm.exportDownloadUrl[field.name]?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl[field.name]}}):_vm._e(),_c("a",{on:{click:function($event){return _vm.downloadAttachment(field)}}},[_vm._v(" "+_vm._s(_vm.getFileName(field))+" ")])])],1)],1):"SIGNATURE"===_vm.$getProperty(field,"field.displayType")?_c("div",[_c("SignatureField",{attrs:{field:(field||{}).field,record:_vm.details}})],1):"URL_FIELD"===_vm.$getProperty(field,"displayTypeEnum")?[_vm.$validation.isEmpty(field.displayValue)||"---"===field.displayValue?_c("span",[_vm._v("---")]):_c("a",{staticClass:"url-field-display",attrs:{rel:"nofollow",href:_vm.$getProperty(field,"displayValue.href",""),target:_vm.$getProperty(field,"displayValue.target",""),referrerpolicy:"no-referrer"}},[_vm._v(_vm._s(_vm.getUrlDisplayName(field)))])]:_c("span",[_vm._v(_vm._s(field.displayValue))])],2)],1)]})),_vm.additionalField?_c("div",{staticClass:"field"},[_c("el-row",[_c("el-col",{staticClass:"field-label",attrs:{span:12}}),_c("el-col",{staticClass:"field-value",attrs:{span:12}})],1)],1):_vm._e()],2),_vm.needsShowMore?_c("div",{staticClass:"text-center pT10 pB15 mR20",staticStyle:{"background-color":"#fff"}},[_c("a",{staticClass:"fc-link fc-link-animation text-capitalize letter-spacing0_3 f13",on:{click:function($event){return _vm.toggleVisibility()}}},[_vm._v(_vm._s(_vm.showMoreLinkText))])]):_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),HorizontalFieldDetails=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(719795)),validation=__webpack_require__(990260),sanitize=__webpack_require__(678042),InspectionFieldDetailsvue_type_script_lang_js={extends:HorizontalFieldDetails/* default */.Z,props:["widget","moduleName"],name:"InspectionFieldDetails",created:function(){this.sanitize=sanitize/* sanitize */.N},computed:{title:function(){var moduleName=this.moduleName,isConfigurationWidget=this.$getProperty(this,"widget.widgetParams.isConfigurationWidget");return moduleName.includes("inspection")?isConfigurationWidget?"Configuration Details":"Field Details":""},requiredFields:function(){var fields=this.$getProperty(this,"widget.widgetParams.fields");return fields}},methods:{deserialize:function(data){var _this=this,sites=this.sites,promises=[],skipFields=[].concat((0,toConsumableArray/* default */.Z)(this.filterfields),(0,toConsumableArray/* default */.Z)(this.primaryFields)),fieldsArray=this.$getProperty(data,"fields",[]),fields=[];fieldsArray.forEach((function(field){var dataObj=!_this.isV3Api&&field.field&&!0!==field.field.default?_this.details.data:_this.details;if(!skipFields.includes(_this.$getProperty(field,"field.name"))){var promise=_this.getFormattedValue(field,dataObj,sites).then((function(value){_this.$set(field,"displayValue",value)}));promises.push(promise),fields.push(field)}}));var requiredFields=this.requiredFields;if((0,validation/* isEmpty */.xb)(requiredFields))this.fieldsList=fields.filter((function(field){return!field.hideField}));else{var _requiredFields=this.requiredFields;this.fieldsList=fields.filter((function(field){return _requiredFields.includes(field.name)}))}var fieldCount=this.fieldsList.length-this.fieldsList.filter((function(field){return"TEXTAREA"===field.displayTypeEnum})).length;this.details.geoLocationEnabled&&(fieldCount+=5),fieldCount%2!==0&&(this.additionalField=!0),Promise.all(promises).then((function(){_this.loading=!1,_this.autoResize()}))}}},inspection_template_InspectionFieldDetailsvue_type_script_lang_js=InspectionFieldDetailsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(inspection_template_InspectionFieldDetailsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,InspectionFieldDetails=component.exports},
/***/706881:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CurrencyPopOver}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/organizationSetting/currency/CurrencyPopOver.vue?vue&type=template&id=434b446a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showCurrencyField?_c("div",{staticClass:"d-flex"},[_vm.showInfo?_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))]):_vm._e(),_vm.showMultiCurrencyInfo?_c("el-popover",{attrs:{placement:"right",title:_vm.$t("setup.currency.rate"),width:"230",trigger:"hover",content:_vm.currencyContent,"open-delay":5,disabled:_vm.isEmpty(_vm.baseValue)}},[_vm.showInfo?_vm._e():_c("div",{class:[_vm.baseValue&&"pointer"],attrs:{slot:"reference"},slot:"reference"},[_c("div",[_vm._v(_vm._s(""+_vm.getMultiCurrencyFieldValue))]),_c("div",{staticClass:"f12"},[_vm._v(_vm._s(_vm.baseValue))])]),_vm.isBaseCode||!_vm.showInfo||_vm.hideInfoBtn?_vm._e():_c("fc-icon",{staticClass:"pointer info-position mL2",attrs:{slot:"reference",group:"dsm",name:"info",size:"13"},slot:"reference"})],1):_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))])],1):_c("span",[_vm._v("---")])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(990260)),CurrencyUtil=__webpack_require__(15426),vuex_esm=__webpack_require__(420629),CurrencyPopOvervue_type_script_lang_js={props:["field","details","showInfo","hideInfoBtn"],data:function(){return{baseValue:"",isEmpty:validation/* isEmpty */.xb}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencyList:function(state){return state.activeCurrencies}})),{},{showMultiCurrencyInfo:function(){var _ref=this.multiCurrency||{},multiCurrencyEnabled=_ref.multiCurrencyEnabled;return multiCurrencyEnabled},isBaseCode:function(){var _ref2=this.multiCurrency||{},baseCode=_ref2.currencyCode,_ref3=this.details||{},currencyCode=_ref3.currencyCode;return baseCode===currencyCode},showCurrencyField:function(){var currencyValue=this.currencyValue;return!(0,validation/* isEmpty */.xb)(currencyValue)&&"---"!=currencyValue},multiCurrency:function(){var _ref4=this.$getProperty(this.account,"data.currencyInfo")||{},displaySymbol=_ref4.displaySymbol,currencyCode=_ref4.currencyCode,multiCurrencyEnabled=_ref4.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}},currencyContent:function(){var details=this.details,currencyValue=this.currencyValue,baseSymbol=this.multiCurrency.displaySymbol;if(!(0,validation/* isEmpty */.xb)(currencyValue)){var _ref5=details||{},exchangeRate=_ref5.exchangeRate,currencyCode=_ref5.currencyCode,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)||currency.displaySymbol===baseSymbol)return null;var _ref6=currency||{},displaySymbol=_ref6.displaySymbol,content="".concat(baseSymbol," 1 = ").concat(displaySymbol," ").concat(exchangeRate);return content}return"---"},currencyValue:function(){var details=this.details,field=this.field,_ref7=details||{},data=_ref7.data;return field.displayValue||details[field.name]||(null===data||void 0===data?void 0:data[field.name])},getMultiCurrencyFieldValue:function(){var currencyValue=this.currencyValue,showInfo=this.showInfo,_this$multiCurrency=this.multiCurrency,baseSymbol=_this$multiCurrency.displaySymbol,baseCode=_this$multiCurrency.currencyCode,multiCurrencyEnabled=_this$multiCurrency.multiCurrencyEnabled,_ref8=this.details||{},currencyCode=_ref8.currencyCode,exchangeRate=_ref8.exchangeRate,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode})),baseCurrency=(this.currencyList||[]).find((function(currency){return baseCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)&&!(0,validation/* isEmpty */.xb)(currencyValue))return"".concat(baseSymbol," ").concat(currencyValue);var _ref9=currency||{},displaySymbol=_ref9.displaySymbol;displaySymbol=(0,validation/* isEmpty */.xb)(displaySymbol)?baseSymbol:displaySymbol;var baseValue="";if(multiCurrencyEnabled&&baseCode!==currencyCode){var value=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue/exchangeRate,baseCurrency);baseValue="( ".concat(baseSymbol," ").concat(value," )")}return currencyValue=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue,currency),this.setBaseValue(baseValue),showInfo?"".concat(displaySymbol," ").concat(currencyValue," ").concat(baseValue):"".concat(displaySymbol," ").concat(currencyValue)}}),created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$store.dispatch("getActiveCurrencyList");case 2:case"end":return _context.stop()}}),_callee)})))()},methods:{setBaseValue:function(value){this.baseValue=value}}},currency_CurrencyPopOvervue_type_script_lang_js=CurrencyPopOvervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(currency_CurrencyPopOvervue_type_script_lang_js,render,staticRenderFns,!1,null,"434b446a",null)
/* harmony default export */,CurrencyPopOver=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/3476.js.map