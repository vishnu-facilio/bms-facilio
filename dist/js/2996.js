(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[2996],{
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/747579:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewOperatingHour}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/NewOperatingHour.vue?vue&type=template&id=437b8bc5
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{attrs:{id:"newworkordercategory"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?_vm.$t("common.wo_report.new_operating_hour"):_vm.$t("common.wo_report.edit_operating_hour"))+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_the_name")},model:{value:_vm.name,callback:function($$v){_vm.name=$$v},expression:"name"}})],1)],1),_c("el-row",{staticClass:"mT20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.operating_hour_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("common._common.choose_operating_hour_type")},model:{value:_vm.businessHourType,callback:function($$v){_vm.businessHourType=$$v},expression:"businessHourType"}},[_c("el-option",{attrs:{label:_vm.$t("common.date_picker.24_hours_7_days"),value:"DAYS_24_7"}}),_c("el-option",{attrs:{label:_vm.$t("common.date_picker.24_hours_5_days"),value:"DAYS_24_5"}}),_c("el-option",{attrs:{label:_vm.$t("common._common.custom_hours"),value:"CUSTOM"}})],1)],1)],1),"DAYS_24_7"!==_vm.businessHourType?_c("div",["CUSTOM"===_vm.businessHourType?_c("div",[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"setup-input-block mT20"},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.custom_hour_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("common._common.choose_custom_hour_type")},model:{value:_vm.customHourType,callback:function($$v){_vm.customHourType=$$v},expression:"customHourType"}},[_c("el-option",{attrs:{label:_vm.$t("common._common.same_timing_all_day"),value:"SAME_TIMING_ALLDAY"}}),_c("el-option",{attrs:{label:_vm.$t("common._common.different_timing_all_day"),value:"DIFFERENT_TIMING_ALLDAY"}})],1)],1)]),_c("el-col",{attrs:{span:12}},["SAME_TIMING_ALLDAY"===_vm.customHourType?_c("div",[_c("div",{staticClass:"setup-input-block mT20"},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.timing"))+" ")]),_c("el-row",{staticClass:"operating-hours-checkbox"},[_c("el-col",{attrs:{span:12}},[_c("el-time-select",{staticClass:"width110px",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.same_starttime,callback:function($$v){_vm.same_starttime=$$v},expression:"same_starttime"}})],1),_c("el-col",{staticClass:"pL10",attrs:{span:12}},[_c("el-time-select",{staticClass:"width110px",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.products.to")},model:{value:_vm.same_endtime,callback:function($$v){_vm.same_endtime=$$v},expression:"same_endtime"}})],1)],1)],1)]):_vm._e()])],1)],1):_vm._e(),_c("div",{staticClass:"setup-input-block mT30"},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.operating_days"))+" ")]),_c("el-checkbox-group",{staticClass:"mT10 operating-hours-checkbox",attrs:{min:1,max:7},model:{value:_vm.operatingDaysList,callback:function($$v){_vm.operatingDaysList=$$v},expression:"operatingDaysList"}},[_c("el-checkbox",{staticClass:"mB20",attrs:{label:"1"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"width75px"},[_vm._v(_vm._s(_vm.$t("common._common.monday")))]),"CUSTOM"===_vm.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===_vm.customHourType?_c("div",{staticClass:"mL20"},[_c("el-time-select",{staticClass:"fc-input-full-border-h35 mR10 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.mon_starttime,callback:function($$v){_vm.mon_starttime=$$v},expression:"mon_starttime"}}),_c("el-time-select",{staticClass:"fc-input-full-border-h35 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.wo_report.to")},model:{value:_vm.mon_endtime,callback:function($$v){_vm.mon_endtime=$$v},expression:"mon_endtime"}})],1):_vm._e()])]),_c("br"),_c("el-checkbox",{staticClass:"mB20",attrs:{label:"2"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"width75px"},[_vm._v(" "+_vm._s(_vm.$t("common._common.tuesday"))+" ")]),"CUSTOM"===_vm.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===_vm.customHourType?_c("div",{staticClass:"mL20"},[_c("el-time-select",{staticClass:"fc-input-full-border-h35 mR10 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.tue_starttime,callback:function($$v){_vm.tue_starttime=$$v},expression:"tue_starttime"}}),_c("el-time-select",{staticClass:"fc-input-full-border-h35 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.wo_report.to")},model:{value:_vm.tue_endtime,callback:function($$v){_vm.tue_endtime=$$v},expression:"tue_endtime"}})],1):_vm._e()])]),_c("br"),_c("el-checkbox",{staticClass:"mB20",attrs:{label:"3"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"width75px"},[_vm._v(" "+_vm._s(_vm.$t("common._common.wednesday"))+" ")]),"CUSTOM"===_vm.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===_vm.customHourType?_c("div",{staticClass:"mL20"},[_c("el-time-select",{staticClass:"fc-input-full-border-h35 mR10 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.wed_starttime,callback:function($$v){_vm.wed_starttime=$$v},expression:"wed_starttime"}}),_c("el-time-select",{staticClass:"fc-input-full-border-h35 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.wo_report.to")},model:{value:_vm.wed_endtime,callback:function($$v){_vm.wed_endtime=$$v},expression:"wed_endtime"}})],1):_vm._e()])]),_c("br"),_c("el-checkbox",{staticClass:"mB20",attrs:{label:"4"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"width75px"},[_vm._v(" "+_vm._s(_vm.$t("common._common.thursday"))+" ")]),"CUSTOM"===_vm.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===_vm.customHourType?_c("div",{staticClass:"mL20"},[_c("el-time-select",{staticClass:"fc-input-full-border-h35 mR10 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.thu_starttime,callback:function($$v){_vm.thu_starttime=$$v},expression:"thu_starttime"}}),_c("el-time-select",{staticClass:"fc-input-full-border-h35 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.wo_report.to")},model:{value:_vm.thu_endtime,callback:function($$v){_vm.thu_endtime=$$v},expression:"thu_endtime"}})],1):_vm._e()])]),_c("br"),_c("el-checkbox",{staticClass:"mB20",attrs:{label:"5"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"width75px"},[_vm._v(_vm._s(_vm.$t("common._common.friday")))]),"CUSTOM"===_vm.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===_vm.customHourType?_c("div",{staticClass:"mL20"},[_c("el-time-select",{staticClass:"fc-input-full-border-h35 mR10 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.fri_starttime,callback:function($$v){_vm.fri_starttime=$$v},expression:"fri_starttime"}}),_c("el-time-select",{staticClass:"fc-input-full-border-h35 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.wo_report.to")},model:{value:_vm.fri_endtime,callback:function($$v){_vm.fri_endtime=$$v},expression:"fri_endtime"}})],1):_vm._e()])]),_c("br"),_c("el-checkbox",{staticClass:"mB20",attrs:{label:"6"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"width75px"},[_vm._v(" "+_vm._s(_vm.$t("common._common.saturday"))+" ")]),"CUSTOM"===_vm.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===_vm.customHourType?_c("div",{staticClass:"mL20"},[_c("el-time-select",{staticClass:"fc-input-full-border-h35 mR10 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.sat_starttime,callback:function($$v){_vm.sat_starttime=$$v},expression:"sat_starttime"}}),_c("el-time-select",{staticClass:"fc-input-full-border-h35 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.wo_report.to")},model:{value:_vm.sat_endtime,callback:function($$v){_vm.sat_endtime=$$v},expression:"sat_endtime"}})],1):_vm._e()])]),_c("br"),_c("el-checkbox",{staticClass:"mB20",attrs:{label:"7"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"width75px"},[_vm._v(_vm._s(_vm.$t("common._common.sunday")))]),"CUSTOM"===_vm.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===_vm.customHourType?_c("div",{staticClass:"mL20"},[_c("el-time-select",{staticClass:"fc-input-full-border-h35 mR10 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common._common.from")},model:{value:_vm.sun_starttime,callback:function($$v){_vm.sun_starttime=$$v},expression:"sun_starttime"}}),_c("el-time-select",{staticClass:"fc-input-full-border-h35 ",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45"},placeholder:_vm.$t("common.wo_report.to")},model:{value:_vm.sun_endtime,callback:function($$v){_vm.sun_endtime=$$v},expression:"sun_endtime"}})],1):_vm._e()])]),_c("br")],1)],1)]):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.operatingHourValueSaving},on:{click:_vm.saveOperatingHour}},[_vm._v(_vm._s(_vm.operatingHourValueSaving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])],1)},staticRenderFns=[],ErrorBanner=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(670560),__webpack_require__(297157)),NewOperatingHourvue_type_script_lang_js={props:["businessHour","isNew","visibility","resourceid"],components:{ErrorBanner:ErrorBanner/* default */.Z},data:function(){return{name:"",businessHourType:"",customHourType:"",same_starttime:"",same_endtime:"",mon_starttime:"",mon_endtime:"",tue_starttime:"",tue_endtime:"",wed_starttime:"",wed_endtime:"",thu_starttime:"",thu_endtime:"",fri_starttime:"",fri_endtime:"",sat_starttime:"",sat_endtime:"",sun_starttime:"",sun_endtime:"",operatingDaysList:[],singleDaybusinessHoursList:[],error:!1,errorText:"",operatingHourValueSaving:!1}},mounted:function(){this.initOperatingHour()},methods:{initOperatingHour:function(){if(this.isNew)this.name="",this.businessHourType="DAYS_24_7",this.customHourType="SAME_TIMING_ALLDAY",this.same_starttime="",this.same_endtime="",this.mon_starttime="",this.mon_endtime="",this.tue_starttime="",this.tue_endtime="",this.wed_starttime="",this.wed_endtime="",this.thu_starttime="",this.thu_endtime="",this.fri_starttime="",this.fri_endtime="",this.sat_starttime="",this.sat_endtime="",this.sun_starttime="",this.sun_endtime="",this.operatingDaysList=["1","2","3","4","5"],this.singleDaybusinessHoursList=[];else{for(var i in this.name=this.businessHour.value.name,this.businessHourType=this.businessHour.value.businessHourTypeVal,this.customHourType=this.businessHour.value.customHourTypeVal,null===this.customHourType&&(this.customHourType="SAME_TIMING_ALLDAY"),this.singleDaybusinessHoursList=this.businessHour.value.singleDaybusinessHoursList,"DAYS_24_7"===this.businessHourType&&(this.operatingDaysList=["1","2","3","4","5"]),this.singleDaybusinessHoursList)this.singleDaybusinessHoursList[i].dayOfWeek=this.singleDaybusinessHoursList[i].dayOfWeek.toString(),this.operatingDaysList.push(this.singleDaybusinessHoursList[i].dayOfWeek),"1"===this.singleDaybusinessHoursList[i].dayOfWeek?(this.mon_starttime=this.singleDaybusinessHoursList[i].startTime,this.mon_endtime=this.singleDaybusinessHoursList[i].endTime):"2"===this.singleDaybusinessHoursList[i].dayOfWeek?(this.tue_starttime=this.singleDaybusinessHoursList[i].startTime,this.tue_endtime=this.singleDaybusinessHoursList[i].endTime):"3"===this.singleDaybusinessHoursList[i].dayOfWeek?(this.wed_starttime=this.singleDaybusinessHoursList[i].startTime,this.wed_endtime=this.singleDaybusinessHoursList[i].endTime):"4"===this.singleDaybusinessHoursList[i].dayOfWeek?(this.thu_starttime=this.singleDaybusinessHoursList[i].startTime,this.thu_endtime=this.singleDaybusinessHoursList[i].endTime):"5"===this.singleDaybusinessHoursList[i].dayOfWeek?(this.fri_starttime=this.singleDaybusinessHoursList[i].startTime,this.fri_endtime=this.singleDaybusinessHoursList[i].endTime):"6"===this.singleDaybusinessHoursList[i].dayOfWeek?(this.sat_starttime=this.singleDaybusinessHoursList[i].startTime,this.sat_endtime=this.singleDaybusinessHoursList[i].endTime):"7"===this.singleDaybusinessHoursList[i].dayOfWeek&&(this.sun_starttime=this.singleDaybusinessHoursList[i].startTime,this.sun_endtime=this.singleDaybusinessHoursList[i].endTime);"CUSTOM"===this.businessHourType&&"SAME_TIMING_ALLDAY"===this.customHourType&&this.singleDaybusinessHoursList.length>0&&(this.same_starttime=this.singleDaybusinessHoursList[0].startTime,this.same_endtime=this.singleDaybusinessHoursList[0].endTime)}},validation:function(){return this.error=!1,this.errorText="",null===this.name||""===this.name?(this.errorText=this.$t("common.header.please_enter_name"),this.error=!0,!1):"DAYS_24_5"===this.businessHourType&&5!=this.operatingDaysList.length?(this.errorText=this.$t("common._common.please_choose_five_operating_days"),this.error=!0,!1):"CUSTOM"!==this.businessHourType||"SAME_TIMING_ALLDAY"!==this.customHourType||null!==this.same_starttime&&""!==this.same_starttime&&null!==this.same_endtime&&""!==this.same_endtime?"CUSTOM"===this.businessHourType&&"DIFFERENT_TIMING_ALLDAY"===this.customHourType&&(this.operatingDaysList.indexOf("1")>-1&&(null===this.mon_starttime||""===this.mon_starttime||null===this.mon_endtime||""===this.mon_endtime)||this.operatingDaysList.indexOf("2")>-1&&(null===this.tue_starttime||""===this.tue_starttime||null===this.tue_endtime||""===this.tue_endtime)||this.operatingDaysList.indexOf("3")>-1&&(null===this.wed_starttime||""===this.wed_starttime||null===this.wed_endtime||""===this.wed_endtime)||this.operatingDaysList.indexOf("4")>-1&&(null===this.thu_starttime||""===this.thu_starttime||null===this.thu_endtime||""===this.thu_endtime)||this.operatingDaysList.indexOf("5")>-1&&(null===this.fri_starttime||""===this.fri_starttime||null===this.fri_endtime||""===this.fri_endtime)||this.operatingDaysList.indexOf("6")>-1&&(null===this.sat_starttime||""===this.sat_starttime||null===this.sat_endtime||""===this.sat_endtime)||this.operatingDaysList.indexOf("7")>-1&&(null===this.sun_starttime||""===this.sun_starttime||null===this.sun_endtime||""===this.sun_endtime))?(this.errorText=this.$t("common._common.please_choose_timing_selected_operating_days"),this.error=!0,!1):(this.errorText="",void(this.error=!1)):(this.errorText=this.$t("common._common.please_choose_timing"),this.error=!0,!1)},addOperatingHour:function(){var _this=this;if(this.validation(),!this.error){this.preparingDatasToSave();var resourceid=this.resourceid,businessHour={name:this.name,businessHourType:this.businessHourType,customHourType:this.customHourType,singleDaybusinessHoursList:this.singleDaybusinessHoursList};this.$http.post("/v2/businesshours/add",{businessHour:businessHour,resourceid:resourceid}).then((function(response){
// this.$account.data.operatingHour.push(response.data.result.businessHour);
_this.$message.success(_this.$t("common.wo_report.operating_hour_saved_success")),businessHour.businessHourTypeVal=businessHour.businessHourType,businessHour.customHourTypeVal=businessHour.customHourType,businessHour.id=response.data.result.businessHour.id,void 0!==resourceid?_this.$emit("businessHourChange",businessHour):_this.$emit("add",businessHour),_this.$emit("update:visibility",!1)})).catch((function(){_this.$message.error(_this.$t("common._common.failed_to_save_operating_hour")),_this.$emit("update:visibility",!1)}))}},editOperatingHour:function(){var _this2=this;if(this.validation(),!this.error){this.preparingDatasToSave();var businessHour=Object.assign({},this.businessHour.value);businessHour.name=this.name,businessHour.businessHourType=this.businessHourType,businessHour.customHourType=this.customHourType,businessHour.businessHourTypeVal=businessHour.businessHourType,businessHour.customHourTypeVal=businessHour.customHourType,businessHour.singleDaybusinessHoursList=this.singleDaybusinessHoursList,this.$http.post("/v2/businesshours/edit",{businessHour:businessHour}).then((function(){_this2.$emit("edit",businessHour),_this2.$message.success(_this2.$t("common._common.operating_hour_updated_success")),_this2.$emit("update:visibility",!1)})).catch((function(){_this2.$message.success(_this2.$t("common._common.failed_to_update_operating_hour")),_this2.$emit("update:visibility",!1)}))}},saveOperatingHour:function(){this.isNew?this.addOperatingHour():this.editOperatingHour()},closeDialog:function(){this.$emit("close"),this.$emit("update:visibility",!1)},clearDifferentTimingValues:function(){this.mon_starttime=null,this.mon_endtime=null,this.tue_starttime=null,this.tue_endtime=null,this.wed_starttime=null,this.wed_endtime=null,this.thu_starttime=null,this.thu_endtime=null,this.fri_starttime=null,this.fri_endtime=null,this.sat_starttime=null,this.sat_endtime=null,this.sun_starttime=null,this.sun_endtime=null},preparingDatasToSave:function(){if("DAYS_24_7"===this.businessHourType)this.customHourType=null,this.same_starttime=null,this.same_endtime=null,this.operatingDaysList=null,this.clearDifferentTimingValues(),this.singleDaybusinessHoursList=null;else if("DAYS_24_5"===this.businessHourType)for(var i in this.customHourType=null,this.same_starttime=null,this.same_endtime=null,this.clearDifferentTimingValues(),this.singleDaybusinessHoursList=[],this.operatingDaysList){var singleDayBusinessHour={dayOfWeek:"",startTime:"",endTime:""};singleDayBusinessHour.dayOfWeek=this.operatingDaysList[i],this.singleDaybusinessHoursList.push(singleDayBusinessHour)}else if("CUSTOM"===this.businessHourType)for(var j in"SAME_TIMING_ALLDAY"===this.customHourType?(this.mon_starttime=this.same_starttime,this.mon_endtime=this.same_endtime,this.tue_starttime=this.same_starttime,this.tue_endtime=this.same_endtime,this.wed_starttime=this.same_starttime,this.wed_endtime=this.same_endtime,this.thu_starttime=this.same_starttime,this.thu_endtime=this.same_endtime,this.fri_starttime=this.same_starttime,this.fri_endtime=this.same_endtime,this.sat_starttime=this.same_starttime,this.sat_endtime=this.same_endtime,this.sun_starttime=this.same_starttime,this.sun_endtime=this.same_endtime):(this.same_starttime=null,this.same_endtime=null),this.singleDaybusinessHoursList=[],this.operatingDaysList){var singleDayBusinessHours={dayOfWeek:"",startTime:"",endTime:""};singleDayBusinessHours.dayOfWeek=this.operatingDaysList[j],singleDayBusinessHours.startTime=this.getTimeByDayOfWeek("start",singleDayBusinessHours.dayOfWeek),singleDayBusinessHours.endTime=this.getTimeByDayOfWeek("end",singleDayBusinessHours.dayOfWeek),this.singleDaybusinessHoursList.push(singleDayBusinessHours)}},getTimeByDayOfWeek:function(type,dayofweek){if("start"===type){if("1"===dayofweek)return this.mon_starttime;if("2"===dayofweek)return this.tue_starttime;if("3"===dayofweek)return this.wed_starttime;if("4"===dayofweek)return this.thu_starttime;if("5"===dayofweek)return this.fri_starttime;if("6"===dayofweek)return this.sat_starttime;if("7"===dayofweek)return this.sun_starttime}else if("end"===type){if("1"===dayofweek)return this.mon_endtime;if("2"===dayofweek)return this.tue_endtime;if("3"===dayofweek)return this.wed_endtime;if("4"===dayofweek)return this.thu_endtime;if("5"===dayofweek)return this.fri_endtime;if("6"===dayofweek)return this.sat_endtime;if("7"===dayofweek)return this.sun_endtime}}}},components_NewOperatingHourvue_type_script_lang_js=NewOperatingHourvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_NewOperatingHourvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewOperatingHour=component.exports},
/***/604625:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return OperatingHoursView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/widget/OperatingHoursView.vue?vue&type=template&id=bba13fc8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.model&&_vm.model.id?"DAYS_24_7"===_vm.model.businessHourTypeVal?_c("div",[_vm._v(" "+_vm._s(_vm.$t("space.sites.mon_sun"))+": 24 "+_vm._s(_vm.$t("space.sites.hours"))+" ")]):"DAYS_24_5"===_vm.model.businessHourTypeVal?_c("div",_vm._l(_vm.model.singleDaybusinessHoursList,(function(operatingDays,index){return _c("div",{key:index},[_c("div",{staticClass:"pB10 text-left"},[_vm._v(" "+_vm._s(_vm.dayOfWeekMap.get(operatingDays.dayOfWeek.toString()))+": 24 "+_vm._s(_vm.$t("space.sites.hours"))+" ")])])})),0):"CUSTOM"===_vm.model.businessHourTypeVal?_c("div",_vm._l(_vm.model.singleDaybusinessHoursList,(function(operatingDays,index){return _c("div",{key:index},[_c("div",{staticClass:"pB10 text-left"},[_vm._v(" "+_vm._s(_vm.dayOfWeekMap.get(operatingDays.dayOfWeek.toString()))+": "+_vm._s(operatingDays.startTime)+" - "+_vm._s(operatingDays.endTime)+" ")])])})),0):_vm._e():_c("div",{staticClass:"no-operating-hours"},[_vm._v(" "+_vm._s(_vm.$t("asset.assets.no_operating_hours"))+" ")]),!_vm.hideChangeBtn&&(!_vm.isAssetBh&&_vm.$hasPermission("setup:GENERAL")||_vm.isAssetBh&&_vm.$hasPermission("asset:UPDATE"))?_c("div",{staticClass:"op-hrs-change pointer pT10",on:{click:function($event){_vm.showOperatingHoursDialog=!0}}},[_vm.model?_c("div",{staticClass:"fc-dark-blue4-12"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.change_opertaing_hours"))+" ")]):_c("div",{staticClass:"fc-dark-blue4-12"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.assign_opertaing_hours"))+" ")])]):_vm._e(),_vm.showOperatingHoursDialog?_c("operating-hour-chooser",{attrs:{showOperatingHourDialog:_vm.showOperatingHoursDialog,resourceid:_vm.resourceId,businessHour:_vm.model,isAssetBh:_vm.isAssetBh},on:{"update:showOperatingHourDialog":function($event){_vm.showOperatingHoursDialog=$event},"update:show-operating-hour-dialog":function($event){_vm.showOperatingHoursDialog=$event},businessHourChangeInChooser:_vm.onBHChange,"update:businessHour":function($event){_vm.model=$event},"update:business-hour":function($event){_vm.model=$event},closeOperatingHourChooser:function($event){_vm.showOperatingHoursDialog=!1}}}):_vm._e()],1)},staticRenderFns=[],OperatingHourChooservue_type_template_id_3bd88a3a_render=(__webpack_require__(456646),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showDialog?_c("new-operating-hour",{attrs:{isNew:!0,resourceid:_vm.resourceid,visibility:_vm.showDialog},on:{businessHourChange:_vm.changeBH,"update:visibility":function($event){_vm.showDialog=$event},close:_vm.handleclose}}):_vm._e(),_vm.showOperatingHourDialog?_c("el-dialog",{attrs:{visible:_vm.showOperatingHourDialog,title:_vm.$t("asset.operating_hours.operating_hours"),fullscreen:!1,open:"top","custom-class":"fc-dialog-center-container fc-dialog-center-body-p0 operating-hours-dialog","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.showOperatingHourDialog=$event}}},[_vm.showScheduleNotification?_c("div",{staticClass:"fc-alert-msg-info"},[_c("i",{staticClass:"fa fa-exclamation-triangle pR10",attrs:{"aria-hidden":"true"}}),_vm._v(" Out of Schedule alarm will be re-calculated with this operational hour for last one year. ")]):_vm._e(),_c("div",{attrs:{id:"operatinghourchooser"}},[_vm.resourceid?_c("div",{staticClass:"fc-dark-blue4-12 position-absolute pointer",staticStyle:{right:"70px",top:"22px"},on:{click:_vm.newOperatingHour}},[_vm._v(" "+_vm._s(_vm.$t("space.sites.add_operating_hour"))+" ")]):_vm._e(),_c("div",{staticClass:"clearboth operating-hour-dialog-scroll"},[_c("div",[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table width100 setting-table-p0"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text width200"},[_vm._v(" "+_vm._s(_vm.$t("common._common.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("asset.operating_hours.op_type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("asset.operating_hours.custom_type"))+" ")])])]),0===_vm.businessHoursList.length?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v(" "+_vm._s(_vm.$t("asset.operating_hours.no_data"))+" ")])])]):_c("tbody",_vm._l(_vm.businessHoursList,(function(operatingHour,index){return _c("tr",{key:index,staticClass:"tablerow",class:{selectedrow:operatingHour.selected},on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(operatingHour)}}},[_c("td",{staticClass:"width200"},[_vm._v(" "+_vm._s(operatingHour.name)+" ")]),_c("td",[_vm._v(" "+_vm._s(_vm.businessHourtypeMap.get(operatingHour.businessHourTypeVal))+" ")]),_c("td",[_vm._v(" "+_vm._s(_vm.customHourtypeMap.get(operatingHour.customHourTypeVal))+" ")])])})),0)])])])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.handleclose()}}},[_vm._v(_vm._s(_vm.$t("space.sites.site_cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.operatingHourValueSaving},on:{click:_vm.updateOperatingHour}},[_vm._v(_vm._s(_vm.operatingHourValueSaving?_vm.$t("common._common._saving"):_vm.resourceid?_vm.$t("common._common._save"):_vm.$t("common._common.select")))])],1)])]):_vm._e()],1)}),OperatingHourChooservue_type_template_id_3bd88a3a_staticRenderFns=[],NewOperatingHour=(__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(747579)),OperatingHourChooservue_type_script_lang_js={props:["resourceid","businessHour","showOperatingHourDialog","isAssetBh"],components:{NewOperatingHour:NewOperatingHour/* default */.Z},data:function(){var businessHourtypeMap=new Map;businessHourtypeMap.set("DAYS_24_7","24 Hours 7 Days"),businessHourtypeMap.set("DAYS_24_5","24 Hours 5 Days"),businessHourtypeMap.set("CUSTOM","Custom Hours");var customHourtypeMap=new Map;return customHourtypeMap.set("SAME_TIMING_ALLDAY","Same timing all day"),customHourtypeMap.set("DIFFERENT_TIMING_ALLDAY","Different timing all day"),{businessHoursList:[],showDialog:!1,selectedList:[],operatingHourValueSaving:!1,businessHourtypeMap:businessHourtypeMap,customHourtypeMap:customHourtypeMap,showScheduleNotification:!1}},created:function(){this.checkRunStatus()},mounted:function(){this.getOperatingHour(),this.initOperatingHour()},methods:{getOperatingHour:function(){var self=this;self.$http.get("/v2/businesshours/list").then((function(response){self.businessHoursList=response.data.result.list,self.initOperatingHour()}))},changeBH:function(businesshour){this.$emit("businessHourChangeInChooser",businesshour)},initOperatingHour:function(){for(var i in this.selectedList=[],this.businessHoursList)null!=this.businessHour&&(this.businessHour.id===this.businessHoursList[i].id?this.businessHoursList[i].selected=!0:this.businessHoursList[i].selected=!1)},handleclose:function(){this.showOperatingHourDialog=!1,this.$emit("update:showOperatingHourDialog",!1),this.$emit("closeOperatingHourChooser")},checkRunStatus:function(){var _this=this;this.isAssetBh&&this.$helpers.isLicenseEnabled("OPERATIONAL_ALARM")&&this.$http.get("/v2/assets/checkrunstatus?assetId=".concat(this.resourceid)).then((function(response){_this.showScheduleNotification=response.data.result.runStatusAvailable}))},updateOperatingHour:function(){var _this2=this;if(this.selectedList.length>0){var id=this.selectedList[0].id;this.operatingHourValueSaving=!0;var resourceid=this.resourceid;if(resourceid>0)return this.$http.post("/v2/businesshours/updateresource",{id:id,resourceid:resourceid}).then((function(response){_this2.operatingHourValueSaving=!1,_this2.$message.success("Operating Hour Saved Successfully."),_this2.onSelect()})).catch((function(){_this2.operatingHourValueSaving=!1,_this2.$message.error("Failed to save Operating Hour.")}));this.onSelect()}},onSelect:function(){this.changeBH(this.selectedList[0]),this.$emit("update:showOperatingHourDialog",!1)},newOperatingHour:function(){this.showDialog=!0,this.showOperatingHourDialog=!1},toggleSelect:function(resource,alreadyChanged){for(var i in this.selectedList=[],this.businessHoursList)this.businessHoursList[i].selected=!1;alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource)},setSelectedResource:function(resource){if(resource.selected){this.selectedList.push(this.$helpers.cloneObject(resource));var idx=this.businessHoursList.findIndex((function(bh){return bh.id===resource.id}));this.businessHoursList[idx].selected=!0,this.businessHoursList.splice(idx,0,resource),this.businessHoursList.splice(idx+1,1)}else{var _idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==_idx&&this.selectedList.splice(_idx,1)}}}},components_OperatingHourChooservue_type_script_lang_js=OperatingHourChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_OperatingHourChooservue_type_script_lang_js,OperatingHourChooservue_type_template_id_3bd88a3a_render,OperatingHourChooservue_type_template_id_3bd88a3a_staticRenderFns,!1,null,null,null)
/* harmony default export */,OperatingHourChooser=component.exports,OperatingHoursViewvue_type_script_lang_js={props:["model","resourceId","changeBH","hideChangeBtn","isAssetBh"],components:{OperatingHourChooser:OperatingHourChooser},data:function(){var businessHourtypeMap=new Map;businessHourtypeMap.set("DAYS_24_7","24 Hours 7 Days"),businessHourtypeMap.set("DAYS_24_5","24 Hours 5 Days"),businessHourtypeMap.set("CUSTOM","Custom Hours");var customHourtypeMap=new Map;customHourtypeMap.set("SAME_TIMING_ALLDAY","Same timing all day"),customHourtypeMap.set("DIFFERENT_TIMING_ALLDAY","Different timing all day");var dayOfWeekMap=new Map;return dayOfWeekMap.set("1","Monday"),dayOfWeekMap.set("2","Tuesday"),dayOfWeekMap.set("3","Wednesday"),dayOfWeekMap.set("4","Thursday"),dayOfWeekMap.set("5","Friday"),dayOfWeekMap.set("6","Saturday"),dayOfWeekMap.set("7","Sunday"),{businessHourtypeMap:businessHourtypeMap,customHourtypeMap:customHourtypeMap,dayOfWeekMap:dayOfWeekMap,showOperatingHoursDialog:!1}},methods:{onBHChange:function(businessHour){this.changeBH(businessHour),this.showOperatingHoursDialog=!1}}},widget_OperatingHoursViewvue_type_script_lang_js=OperatingHoursViewvue_type_script_lang_js,OperatingHoursView_component=(0,componentNormalizer/* default */.Z)(widget_OperatingHoursViewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,OperatingHoursView=OperatingHoursView_component.exports},
/***/202996:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CompanyProfile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/CompanyProfile.vue?vue&type=template&id=4c86bcda
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"layout-padding"},[_c("div",{staticClass:"fc-form"},[_c("div",{staticClass:"fc-form-title setting-form-title"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.company_profile"))+" ")]),_vm._v(" "+_vm._s(_vm.uploadurl)+" "),_c("form",{on:{submit:function($event){return $event.preventDefault(),_vm.saveOrgSettings.apply(null,arguments)}}},[_c("div",{staticClass:"profile-container"},[_c("div",{staticClass:"profile-left"},[_c("div",{staticClass:"logo-upload"},[_c("span",{staticClass:"input-upload fc-input-full-border-select2",class:{customlogo:_vm.orgsettings.logoUrl}},[_c("input",{ref:"orgLogo",staticClass:"upload ",staticStyle:{width:"200px",height:"100px"},attrs:{type:"file"},on:{change:function($event){return _vm.getimage($event.target.files[0])}}}),_c("span",{staticClass:"upload-icon-block"},[_vm.logoImageUrl?_c("img",{staticClass:"upload-img2",attrs:{src:_vm.logoImageUrl}}):_vm.orgsettings.logoUrl?_c("img",{staticClass:"upload-img2",attrs:{src:_vm.orgsettings.logoUrl}}):_vm.orgsettings&&_vm.orgsettings.logoUrl?_vm._e():_c("img",{staticClass:"upload-img",attrs:{src:__webpack_require__(41339)}})]),_c("span",{staticClass:"upload-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.choose_photo"))+" ")])])])]),_c("div",{staticClass:"profile-right"},[_c("p",{staticClass:"ruletitle"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.general_settings"))+" ")]),_c("el-input",{attrs:{placeholder:_vm.$t("setup.setup_profile.enter_the_name")},model:{value:_vm.orgsettings.name,callback:function($$v){_vm.$set(_vm.orgsettings,"name",$$v)},expression:"orgsettings.name"}}),_c("div",{staticClass:"profile-input-container mT10"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.select_language"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup.select_language"),disabled:!_vm.canEditLanguage},model:{value:_vm.orgsettings.language,callback:function($$v){_vm.$set(_vm.orgsettings,"language",$$v)},expression:"orgsettings.language"}},_vm._l(_vm.languageList,(function(language,index){return _c("el-option",{key:index,attrs:{label:language.label,value:language.value}})})),1)],1),_c("div",{staticClass:"profile-input-group mL30"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.select_date_format"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common.wo_report.select_date_format")},model:{value:_vm.orgsettings.dateFormat,callback:function($$v){_vm.$set(_vm.orgsettings,"dateFormat",$$v)},expression:"orgsettings.dateFormat"}},_vm._l(_vm.dateformatList,(function(dateformat,index){return _c("el-option",{key:index,attrs:{label:dateformat.label,value:dateformat.value}})})),1)],1)]),_c("div",{staticClass:"profile-input-container mT10"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.select_time_format"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common.wo_report.select_time_format")},model:{value:_vm.orgsettings.timeFormat,callback:function($$v){_vm.$set(_vm.orgsettings,"timeFormat",$$v)},expression:"orgsettings.timeFormat"}},_vm._l(_vm.timestateList,(function(timestate,index){return _c("el-option",{key:index,attrs:{label:timestate.label,value:timestate.value}})})),1)],1)]),_c("div",{staticClass:"profile-input-container mT10"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.time_zone"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.ente_time_zone")},model:{value:_vm.orgsettings.timezone,callback:function($$v){_vm.$set(_vm.orgsettings,"timezone",$$v)},expression:"orgsettings.timezone"}},_vm._l(_vm.timezoneList,(function(timezone,index){return _c("el-option",{key:index,attrs:{label:timezone.label,value:timezone.value}})})),1)],1),_c("div",{staticClass:"profile-input-group mL30"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.currency"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_currency")},model:{value:_vm.orgsettings.currency,callback:function($$v){_vm.$set(_vm.orgsettings,"currency",$$v)},expression:"orgsettings.currency"}},_vm._l(_vm.currencyList,(function(currency){return _c("el-option",{key:currency.value,attrs:{label:currency.label,value:currency.value}})})),1)],1)]),_c("div",{staticClass:"profile-input-container mT10"},[_c("div",{staticClass:"profile-input-group"},[_c("div",{staticClass:"d-flex align-center"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.user_specific_timezone"))+" ")]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                    arrow: true,\n                    arrowType: 'round',\n                    animation: 'fade',\n                  }"}],staticClass:"el-icon-info timezone-info-icon mL5",attrs:{content:_vm.$t("setup.setup_profile.user_specific_timezone_info")}})]),_c("el-checkbox",{model:{value:_vm.orgsettings.allowUserTimeZone,callback:function($$v){_vm.$set(_vm.orgsettings,"allowUserTimeZone",$$v)},expression:"orgsettings.allowUserTimeZone"}})],1)]),_c("p",{staticClass:"ruletitle mT15"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.adderss_info"))+" ")]),_c("div",{staticClass:"profile-input-container"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.street"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_street")},model:{value:_vm.orgsettings.street,callback:function($$v){_vm.$set(_vm.orgsettings,"street",$$v)},expression:"orgsettings.street"}})],1),_c("div",{staticClass:"profile-input-group mL30"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.city"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.entre_city")},model:{value:_vm.orgsettings.city,callback:function($$v){_vm.$set(_vm.orgsettings,"city",$$v)},expression:"orgsettings.city"}})],1)]),_c("div",{staticClass:"profile-input-container"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.state"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_state")},model:{value:_vm.orgsettings.state,callback:function($$v){_vm.$set(_vm.orgsettings,"state",$$v)},expression:"orgsettings.state"}})],1),_c("div",{staticClass:"profile-input-group mL30"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.zipcode"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_zipcode")},model:{value:_vm.orgsettings.zip,callback:function($$v){_vm.$set(_vm.orgsettings,"zip",$$v)},expression:"orgsettings.zip"}})],1)]),_c("div",{staticClass:"profile-input-container"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.country"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_country")},model:{value:_vm.orgsettings.country,callback:function($$v){_vm.$set(_vm.orgsettings,"country",$$v)},expression:"orgsettings.country"}},_vm._l(_vm.countryList,(function(country){return _c("el-option",{key:country.value,attrs:{label:country.label,value:country.value}})})),1)],1)]),"true"===_vm.$account.data.orgInfo.isPlanRequest||!0===_vm.$account.data.orgInfo.isPlanRequest?_c("div",{staticClass:"profile-input-container"},[_c("div",{staticClass:"profile-input-group form-section ruletitle"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.plans_buildings"))+" ")]),_c("table",{staticClass:"payment-table mT20"},[_c("thead",[_c("tr",[_c("th",{staticClass:"table-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.current_plan"))+" ")]),_c("th",{staticClass:"table-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.payment_info"))+" ")]),_c("th",{staticClass:"table-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.customer_id"))+" ")]),_c("th",{staticClass:"table-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.billing_cycle"))+" ")]),_c("th",{staticClass:"table-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.next_billing"))+": ")]),_c("th",{staticClass:"table-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.no_of_users"))+" ")]),_c("th",{staticClass:"table-Heading"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.no_of_buildings"))+" ")])])]),_c("tbody",[_c("tr",[_c("td",{staticClass:"table-td"},[_vm._v(" "+_vm._s(_vm.subscription.subscription.plan_id)+" ")]),_c("td",{staticClass:"table-td"},[_vm._v(" "+_vm._s(_vm.subscription.card.masked_number)+" "),_c("div",{staticClass:"link-text pointer",attrs:{type:"text"},on:{click:function($event){_vm.dialogVisible=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.update_card"))+" ")]),_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.dialogVisible,fullscreen:!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-modal"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.update_card_details"))+" ")])])])]),_c("div",{staticClass:"new-body-modal",staticStyle:{"margin-top":"0"}},[_c("div",{staticClass:"updatedialog-body"},[_c("div",{staticClass:"mT20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.first_name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Please input",autofocus:!0},model:{value:_vm.card.firstName,callback:function($$v){_vm.$set(_vm.card,"firstName",$$v)},expression:"card.firstName"}})],1),_c("div",{staticClass:"mT20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.last_name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Please input"},model:{value:_vm.card.lastName,callback:function($$v){_vm.$set(_vm.card,"lastName",$$v)},expression:"card.lastName"}})],1),_c("div",{staticClass:"mT20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.no"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Please input"},model:{value:_vm.card.cardNumber,callback:function($$v){_vm.$set(_vm.card,"cardNumber",$$v)},expression:"card.cardNumber"}})],1),_c("div",{staticClass:"mT20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.expiry_month"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Please input"},model:{value:_vm.card.expiryMonth,callback:function($$v){_vm.$set(_vm.card,"expiryMonth",$$v)},expression:"card.expiryMonth"}})],1),_c("div",{staticClass:"mT20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.expiry_year"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Please input"},model:{value:_vm.card.expiryYear,callback:function($$v){_vm.$set(_vm.card,"expiryYear",$$v)},expression:"card.expiryYear"}})],1),_c("div",{staticClass:"mT20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.cvv"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Please input"},model:{value:_vm.card.cvv,callback:function($$v){_vm.$set(_vm.card,"cvv",$$v)},expression:"card.cvv"}})],1)])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.updateCard()}}},[_vm._v(_vm._s(_vm.$t("common._common.update")))])],1)])],1),_c("td",{staticClass:"table-td"},[_vm._v(" "+_vm._s(_vm.subscription.card.customer_id)+" ")]),_c("td",{staticClass:"table-td"},[_vm._v(" "+_vm._s(_vm.subscription.subscription.billing_period_unit)+" ")]),_c("td",{staticClass:"table-td"},[_vm._v(" "+_vm._s(_vm.subscription.nextBillingTime)+" ")]),_c("td",{staticClass:"table-td"},[_vm._v(" "+_vm._s(_vm.subscription.subscription.addons[0].quantity)+" ")]),_c("td",{staticClass:"table-td"},[_vm._v(" "+_vm._s(_vm.subscription.subscription.addons[1].quantity)+" ")])])])])])]):_vm._e(),_c("p",{staticClass:"ruletitle mT20"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.contact_info"))+" ")]),_c("div",{staticClass:"profile-input-container"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.phone"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_phone")},model:{value:_vm.orgsettings.phone,callback:function($$v){_vm.$set(_vm.orgsettings,"phone",$$v)},expression:"orgsettings.phone"}})],1),_c("div",{staticClass:"profile-input-group mL30"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.mobile"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_mobile")},model:{value:_vm.orgsettings.mobile,callback:function($$v){_vm.$set(_vm.orgsettings,"mobile",$$v)},expression:"orgsettings.mobile"}})],1)]),_c("div",{staticClass:"profile-input-container"},[_c("div",{staticClass:"profile-input-group"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.fax"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_fax")},model:{value:_vm.orgsettings.fax,callback:function($$v){_vm.$set(_vm.orgsettings,"fax",$$v)},expression:"orgsettings.fax"}})],1)]),_c("p",{staticClass:"ruletitle mT20"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.operating_hour"))+" ")]),_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"flex-middle"},[_c("el-select",{attrs:{placeholder:_vm.$t("common.wo_report.select_operating_hour")},model:{value:_vm.businessHourId,callback:function($$v){_vm.businessHourId=$$v},expression:"businessHourId"}},_vm._l(_vm.operatingHoursData,(function(value,index){return _c("el-option",{key:index,attrs:{label:value.name,value:value.id}})})),1),_c("div",{staticClass:"pointer pL10 bold",on:{click:_vm.showOphoursChooser}},[_c("inline-svg",{attrs:{src:"lookup",iconClass:"icon icon-sm-md mT5 fc-lookup-icon"}})],1)],1)]),_c("operating-hours",{ref:"operating-hours-view",staticClass:"f14 operatinghours-comp",attrs:{changeBH:_vm.onchangeBH,selectOnly:_vm.selectOnly,hideChangeBtn:!0}}),_c("el-button",{staticClass:"setup-el-btn mT20",staticStyle:{width:"120px"},attrs:{loader:"",type:"primary"},on:{click:_vm.saveOrgSettings},model:{value:_vm.submit,callback:function($$v){_vm.submit=$$v},expression:"submit"}},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.profile_save"))+" "),_c("span",{attrs:{slot:"loading"},slot:"loading"},[_vm._v(_vm._s(_vm.$t("common._common._saving")))])])],1)])])])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),moment_timezone=(__webpack_require__(450886),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(903650),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),OperatingHoursView=__webpack_require__(604625),date_formats=__webpack_require__(496962),timezones=__webpack_require__(887315),countries=__webpack_require__(587207),currency=__webpack_require__(176358),constant=__webpack_require__(354754),api=__webpack_require__(32284),validation=__webpack_require__(990260),CompanyProfilevue_type_script_lang_js={props:["selectOnly"],components:{OperatingHours:OperatingHoursView/* default */.Z},title:function(){return"Company Settings"},data:function(){return{languageList:constant/* default */.Z.languages,dateformatList:date_formats/* default */.Z,submit:!1,businessHourId:null,uploadurl:"",logoImageUrl:null,timezoneList:timezones/* default */.Z,timestateList:[{label:"12 hour "+(new Date).toLocaleTimeString("en-US",{hour12:2}),value:2},{label:"24 hour "+(new Date).toLocaleTimeString("en-GB",{hour12:!1}),value:1}],dialogVisible:!1,countryList:countries/* default */.Z,subscription:{nextBillingTime:moment_timezone_default()().format("DD-MMM-YYYY")},card:{firstName:"",lastName:"",cardNumber:"",expiryMonth:"",expiryYear:"",cvv:""},operatingHoursData:[],orgsettings:{name:null,currency:null,timezone:null,street:null,city:null,state:null,zip:null,country:null,phone:null,mobile:null,fax:null,businessHour:null,language:null,timeFormat:null,dateFormat:null,allowUserTimeZone:null}}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.$store.dispatch("loadBuildings"),_this.getOrgSettings(),_this.getSubscription(),_this.getOperatingHours();case 4:case"end":return _context.stop()}}),_callee)})))()},computed:{currencyList:function(){var _this2=this;return currency/* default */.Z.map((function(cur){return{label:_this2.$t(cur.label),value:cur.value}}))},canEditLanguage:function(){var isDevMode=!1,query=this.$route.query;return"true"===query.editLang||isDevMode}},watch:{orgsettings:{handler:function(val){val.businessHour>0&&(this.businessHourId=val.businessHour)},immediate:!0}},methods:{getOrgSettings:function(){var _this3=this;return api/* API */.bl.get("/settings/company").then((function(_ref){var data=_ref.data,error=_ref.error;!error&&data.org&&(_this3.orgsettings=_this3.formatdata(data.org))}))},formatdata:function(data){var _this4=this,d={};return Object.keys(data).forEach((function(key){var val=data[key];-1===val&&(val=null),_this4.$set(d,key,val)})),d},getSubscription:function(){var _this5=this;return api/* API */.bl.get("/setup/subscription").then((function(_ref2){var data=_ref2.data,error=_ref2.error;error||(_this5.subscription=data.subscription),_this5.subscription&&(_this5.subscription.nextBillingTime=_this5.prepareTime(data.subscription))}))},getOperatingHours:function(){var _this6=this;return api/* API */.bl.get("/v2/businesshours/list").then((function(_ref3){var data=_ref3.data,error=_ref3.error;_this6.operatingHoursData=error?[]:data.list}))},updateCard:function(){var _this7=this;return api/* API */.bl.post("/setup/updatecard",{card:self.card}).then((function(_ref4){var error=_ref4.error;error||_this7.$message({message:self.$t("setup.setup_profile.card_update_success"),type:"success"}),_this7.$emit("close",!0)}))},saveOrgSettings:function(){var _this8=this,files=this.$refs.orgLogo.files;this.businessHourId&&(this.orgsettings.businessHour=this.businessHourId);for(var formdata=new FormData,keys=Object.keys(this.orgsettings),_i=0,_keys=keys;_i<_keys.length;_i++){var key=_keys[_i];(0,validation/* isEmpty */.xb)(this.orgsettings[key])||formdata.append("org."+key,this.orgsettings[key])}return files.length&&formdata.append("org.logo",files[0]),api/* API */.bl.post("/settings/updateCompanySettings",formdata).then(function(){var _ref6=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(_ref5){var error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(error=_ref5.error,error){_context2.next=6;break}return _this8.logoImageUrl=null,_this8.$message({message:_this8.$t("setup.setup_profile.company_profile_details"),type:"success"}),_context2.next=6,_this8.$store.dispatch("getCurrentAccount");case 6:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref6.apply(this,arguments)}}())},closeDialog:function(){this.dialogVisible=!1},openUpdateDialog:function(){this.openUpdateDialog=!0},prepareTime:function(data){if(data&&data.subscription.next_billing_at){var mills=data.subscription.next_billing_at+"",time=mills.length>10?data.subscription.next_billing_at:1e3*data.subscription.next_billing_at,t=this.$options.filters.formatDate(time,!0,!1);return t}},getimage:function(file){var self=this,picReader=new FileReader;picReader.addEventListener("load",(function(event){self.logoImageUrl=event.target.result})),picReader.readAsDataURL(file)},showOphoursChooser:function(){this.$refs["operating-hours-view"].showOperatingHoursDialog=!0},onchangeBH:function(businessHour){this.businessHourId=businessHour.id}}},setup_CompanyProfilevue_type_script_lang_js=CompanyProfilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_CompanyProfilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CompanyProfile=component.exports},
/***/41339:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"53c771c85272f2af597e213554042ed2.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/2996.js.map