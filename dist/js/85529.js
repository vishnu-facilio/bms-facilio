"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[85529],{
/***/872648:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SiteReadings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/v1/SiteReadings.vue?vue&type=template&id=4852ab4c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 user-layout setup-readings"},[_c("div",{staticClass:"fc-setup-header",staticStyle:{height:"183px"}},[_vm._m(0),_c("div",{staticClass:"action-btn setting-page-btn fR"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){_vm.showNewReading=!0}}},[_vm._v("New Site Reading")]),_vm.showNewReading?_c("new-asset-reading",{attrs:{resourceType:"site",isNew:_vm.isNew,visibility:_vm.showNewReading},on:{saved:_vm.aftersave,"update:visibility":function($event){_vm.showNewReading=$event}}}):_vm._e()],1),_c("div",{staticClass:"clearboth flex-middle pT20 justify-content-space width100"},[_c("div",[_c("el-select",{staticClass:"fc-input-full-border2 space-reading-link",attrs:{placeholder:"Select Readings"},on:{change:_vm.readingSpaceAssetChoosing},model:{value:_vm.readinglist,callback:function($$v){_vm.readinglist=$$v},expression:"readinglist"}},[_c("el-option",{attrs:{label:"Asset Readings",value:"assetreadings"}},[_vm._v(" Asset Readings ")]),_c("el-option",{attrs:{label:"Space Readings",value:"spacereadings"}},[_vm._v(" Space Readings ")]),_c("el-option",{attrs:{label:"Weather Readings",value:"weatherreadings"}},[_vm._v(" Weather Readings ")])],1),_c("el-select",{staticClass:"fc-input-full-border2 space-reading-link mL20",attrs:{placeholder:"Select Readings"},on:{change:_vm.assetReadingChooser},model:{value:_vm.readingFilter,callback:function($$v){_vm.readingFilter=$$v},expression:"readingFilter"}},[_c("el-option",{attrs:{label:"Site",value:"site"}},[_vm._v(" Site ")]),_c("el-option",{attrs:{label:"Building",value:"building"}},[_vm._v(" Building ")]),_c("el-option",{attrs:{label:"Floor",value:"floor"}},[_vm._v(" Floor ")]),_c("el-option",{attrs:{label:"Space",value:"space"}},[_vm._v(" Space ")])],1)],1),_c("div",[_c("f-search",{staticClass:"reading-search",model:{value:_vm.assetReadingFields,callback:function($$v){_vm.assetReadingFields=$$v},expression:"assetReadingFields"}})],1)]),_c("div",{staticClass:"flex-middle clearboth mT15"},[_c("el-tabs",{staticClass:"width100 setup-reading-tab",on:{"tab-click":_vm.readingsTabChange},model:{value:_vm.selectedtab,callback:function($$v){_vm.selectedtab=$$v},expression:"selectedtab"}},_vm._l(_vm.tabs,(function(tab){return _c("el-tab-pane",{key:tab.key,attrs:{label:tab.label,name:tab.key}},[_c("div",{staticClass:"container-scroll"},[_c("div",{},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table width100"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" Reading NAME ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.link_name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" SITE NAME ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" Reading TYPE ")]),_c("th")])]),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):0===_vm.assetReadingFields.length?_c("tbody",[_c("tr",[_c("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"100%"}},[_vm._v(" NO DATA ")])])]):_c("tbody",_vm._l(_vm.assetReadingFields,(function(field,index){return _c("tr",{key:index,staticClass:"tablerow"},[_c("td",[_vm._v(" "+_vm._s(field.displayName)+" ")]),_c("td",[_vm._v(" "+_vm._s(field.name)+" ")]),_c("td",[_vm._v(" "+_vm._s(field.spaceId)+" ")]),_c("td",[_vm._v(" "+_vm._s(field.counterField?"Counter":_vm.$constants.dataType[field.dataType])+" ")]),_c("td",{staticStyle:{width:"30%"}},[_c("div",{staticClass:"text-left actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center"}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Reading"},on:{click:function($event){return _vm.editReadingField(field)}}})])])])})),0)])])])])])})),1)],1)]),_vm.editshowDialog?_c("edit-reading",{attrs:{model:_vm.model,visibility:_vm.editshowDialog,unitDetails:_vm.metricsUnits,resourceType:"site"},on:{"update:visibility":function($event){_vm.editshowDialog=$event},saved:_vm.aftersave}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"setting-title-block fL"},[_c("div",{staticClass:"setting-form-title"},[_vm._v("Site Readings")]),_c("div",{staticClass:"heading-description"},[_vm._v("List of all site readings")])])}],NewAssetReading=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(625516)),EditAssetReadingDialog=__webpack_require__(18903),FSearch=__webpack_require__(947748),ReadingsHelper=__webpack_require__(414577),SiteReadingsvue_type_script_lang_js={title:function(){return"Asset Reading"},mixins:[ReadingsHelper/* default */.Z],components:{NewAssetReading:NewAssetReading/* default */.Z,EditReading:EditAssetReadingDialog/* default */.Z,FSearch:FSearch/* default */.Z},data:function(){return{metricsUnits:null,isNew:!0,loading:!0,assetCategories:[],assetReadingFields:[],loadForm:!1,model:{},newAssetReadingDialog:!1,showNewReading:!1,editshowDialog:!1,readinglist:"spacereadings",readingFilter:"site",selectedtab:"connected",tabs:[{key:"connected",label:"Connected"},{key:"formula",label:"Formula"},{key:"available",label:"Available"}]}},mounted:function(){this.loadDefaultMetricUnits(),this.getAllSpaceTypeReadings()},methods:{aftersave:function(){this.assetReadingFields=[],this.getAllSpaceTypeReadings()},showNewReadings:function(){this.$refs.AssetReadingDialog.open(),this.loadForm=!0},getAllSpaceTypeReadings:function(){var self=this,type="Sites";this.loading=!0,self.assetReadingFields=[],self.$http.post("/reading/getallspacetypereadings",{spaceType:type,readingType:this.selectedtab}).then((function(response){for(var categoryId in self.assetCategories=response.data.moduleMap,response.data.moduleMap){var moduleJson=response.data.moduleMap[categoryId];for(var moduleIndex in moduleJson){var module=moduleJson[moduleIndex];if(!self.$constants.weatherModules.includes(module.name)){var readingFields=module.fields;for(var fieldIndex in readingFields){var field=readingFields[fieldIndex];field["spaceId"]="-1"===categoryId?"All Sites":response.data.spaces[categoryId].name,field.module={name:module.name,displayName:module.displayName},field.moduleType=module.type,self.assetReadingFields.push(field)}}}}self.loading=!1}))},AssetReadingDialog:function(){this.isNew=!0,this.$refs.newAssetReading.open()},editReadingField:function(field){this.model.fields=[field],this.editshowDialog=!0},readingsTabChange:function(){this.getAllSpaceTypeReadings()},loadDefaultMetricUnits:function(){var self=this;self.$http.get("/units/getDefaultMetricUnits").then((function(response){self.metricsUnits=response.data}))}}},v1_SiteReadingsvue_type_script_lang_js=SiteReadingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_SiteReadingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SiteReadings=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/85529.js.map