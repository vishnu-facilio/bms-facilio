"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[17202],{
/***/317202:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CarbonSaving}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/static/CarbonSaving.vue?vue&type=template&id=19384636
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.wloading?_c("shimmer-loading"):_c("div",[_vm.loading?_c("div",{staticClass:"dragabale-card h100 row",class:_vm.weatherEnumMap[_vm.data.weatherBg]}):_c("div",{staticClass:"dragabale-card h100 row"},[_c("div",{staticClass:"col-12 h50 weather text-left",class:_vm.weatherEnumMap[_vm.data.weatherBg]},[_c("div",{staticClass:"pL20 weather-layou1"},[_c("span",[2===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(224466)}}):1===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(268140)}}):3===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(49251)}}):4===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(345605)}}):5===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(956010)}}):6===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(249665)}}):7===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(98227)}}):8===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(212465)}}):9===_vm.data.icon||10===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(272888)}}):2===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(224466)}}):11===_vm.data.icon?_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(243501)}}):_c("img",{staticClass:"svg-icon sun-icon",attrs:{src:__webpack_require__(268140)}}),_c("span",{staticClass:"degree"},[_vm._v(_vm._s(_vm.data.temperature)),_c("span",[_vm._v("ยบ")]),_c("span",{staticStyle:{"font-weight":"400","font-size":"20px"}},[_vm._v(_vm._s(_vm.data.unit))]),_c("span",{staticClass:"sub-text"},[_vm._v("ย"+_vm._s(_vm.summaryBuild(_vm.data.icon)))])])]),_c("div",{staticClass:"month"},[_vm._v(_vm._s(_vm.getTime(_vm.time)))]),_c("div",{staticClass:"area pT5 uppercase"},[_vm._v(_vm._s(_vm.buildingDetails.data.city))])])]),_c("div",{staticClass:"col-12 h50 carbon-weather text-left",staticStyle:{height:"52%"}},[_c("div",{staticClass:"pL20 weather-layout",staticStyle:{"padding-top":"15px"}},[_c("div",[_c("img",{staticClass:"svg-icon sun-icon carbon-icon",attrs:{src:__webpack_require__(735337)}}),_c("span",{staticClass:"degree"},[_vm._v(_vm._s(_vm.data.carbon.value)),_c("span",{staticClass:"sub-text"},[_vm._v(_vm._s(_vm.data.carbon.unit))])])]),_c("div",{staticClass:"month"},[_vm._v(_vm._s(_vm.data.month))]),_c("div",{staticClass:"area uppercase"},[_vm._v(" "+_vm._s(_vm.$t("panel.card.carbon_savings"))+" ")])])])])])},staticRenderFns=[],moment=(__webpack_require__(897389),__webpack_require__(506203),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(730381)),moment_default=__webpack_require__.n(moment),ShimmerLoading=__webpack_require__(516400),CarbonSavingvue_type_script_lang_js={props:["widget","currentDashboard"],data:function(){return{loading:!1,data:{},weatherBg:2,time:0,demoMode:!1,weatherEnumMap:{1:"clear-day",2:"clear-night",3:"rain",4:"snow",5:"sleet",6:"wind",7:"fog",8:"cloudy",9:"partly-cloudy-day",10:"partly-cloudy-night",11:"hail",12:"thunderstorm",13:"tornado"},buildingDetails:{loading:!0,data:[]},wloading:!0}},components:{shimmerLoading:ShimmerLoading/* default */.Z},mounted:function(){this.initData(),this.loadBuildingDetails()},computed:{today:function(){return this.$options.filters.formatDate(new Date,!0,!1)},buildingId:function(){return this.currentDashboard?this.currentDashboard.buildingId:this.$route.params.buildingid?parseInt(this.$route.params.buildingid):void 0}},methods:{weekly:function(period){return this.$helpers.weekly(period)},initData:function(){var self=this;self.loading=!0,self.wloading=!0;var params={widgetId:self.widget.id,reportSpaceFilterContext:{buildingId:self.buildingId}};self.prepareDemoData(),self.$http.post("dashboard/getCardData",params).then((function(response){response.data.cardResult.weather&&(self.time=response.data.cardResult.weather.actualTtime,self.data=self.prepareData(response.data.cardResult.weather)),self.data.carbon=self.prepareEmission(response.data.cardResult.carbonSaving),self.loading=!1,self.demoMode=!1,self.wloading=!1})).catch((function(error){self.wloading=!1})),self.loading=!1},getTime:function(time){return time?this.$options.filters.formatDate(time,!1,!1):""},prepareDemoData:function(){var self=this;self.data.date=moment_default()().tz(this.$timezone).format("dddd, DD MMMM YYYY hh:mm"),self.data.month="This Month",self.weatherBg=1,self.data.icon=1,self.data.temperature="32",self.data.summary="clear day",self.data.carbon={value:9.68,unit:""},self.demoMode=!0},prepareData:function(data){var time=data?data.ttime:moment_default()().tz(this.$timezone).valueOf();data.date=moment_default()(time).tz(this.$timezone).format("dddd, DD MMMM YYYY hh:mm");var month=moment_default()(time).tz(this.$timezone).format("MMMM"),localmonth=moment_default()().tz(this.$timezone).format("MMMM"),lastmonth=moment_default()().tz(this.$timezone).add(-1,"month").format("MMMM");return data.month=month===localmonth?"This Month":month===lastmonth?"Last Month":month,this.weatherBg=data.icon?data.icon:1,data.weatherBg=data.icon?data.icon:1,data.location=this.$store.getters["space/getSiteById"](data.parentId),data.unit=data.unit?data.unit:"C",data},prepareEmission:function(data){if(data>1e3){var d={};return d.value=(data/1e3).toFixed(2),d.unit="Tons",d}var _d={};return _d.value=data.toFixed(2),_d.unit="Kg",_d},loadBuildingDetails:function(){var self=this;self.buildingDetails.loading=!0,self.wloading=!0;var formData=new FormData;formData.append("buildingId",self.buildingId),self.buildingId&&self.$http.post("/report/energy/building/getBuildingDetails",formData).then((function(response){var reportData=response.data.reportData;self.buildingDetails.data=reportData,self.buildingDetails.arrow=self.$helpers.arrowHandleClass(reportData.variance),self.purpose=reportData.purpose,self.buildingDetails.loading=!1,self.wloading=!1})).catch((function(error){self.buildingDetails.loading=!1,self.wloading=!1}))},summaryBuild:function(data){return data&&this.weatherEnumMap[data]?(data=this.weatherEnumMap[data].split("-").join(" "),data=data.replace(/(^|\s)[a-z]/g,(function(f){return f.toUpperCase()})),data):"clear-day"}}},static_CarbonSavingvue_type_script_lang_js=CarbonSavingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(static_CarbonSavingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CarbonSaving=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/17202.js.map