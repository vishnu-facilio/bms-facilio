"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[17653],{
/***/855048:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FLookupField.vue?vue&type=template&id=473d4b8e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isFieldLoading}}):_c("div",{staticClass:"f-lookup-chooser f-lookup-chooser-container"},[_c("el-select",{ref:"selectBox",class:["fc-input-full-border-select2 width100",(!_vm.canHideLookupIcon||_vm.canShowQuickCreateIcon)&&"resource-search",_vm.isMultiple&&"fc-tag",_vm.hideDropDown&&!_vm.disabled&&"skip-disable"],attrs:{"collapse-tags":"",remote:_vm.isRemote,filterable:"",clearable:_vm.canHideLookupIcon,multiple:_vm.isMultiple,popperAppendToBody:_vm.popperAppendToBody,"remote-method":function(searchText){return _vm.remoteMethod(searchText)},loading:_vm.field.isDataLoading,"loading-text":_vm.$t("common._common.searching"),disabled:_vm.disabled||_vm.hideDropDown,placeholder:_vm.field.placeHolderText||"Select"},on:{change:_vm.recordSelected},model:{value:_vm.modelObj,callback:function($$v){_vm.modelObj=$$v},expression:"modelObj"}},[_c("div",{staticClass:"flRight d-flex",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},slot:"prefix"},[_vm.canShowSystemClear?_c("div",{staticClass:"flookup-remove-icon-alignment flookup-remove-icon",on:{click:_vm.clearData}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e(),_vm.canHideLookupIcon?_vm._e():_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openLookupFieldWizard(_vm.field)}}},[_c("inline-svg",{attrs:{src:"lookup",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1),_vm.canShowQuickCreateIcon?_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openQuickCreate()}}},[_c("el-tooltip",{attrs:{effect:"dark",content:"Add\n          "+_vm.moduleDisplayName,placement:"top"}},[_c("inline-svg",{attrs:{src:"add-pink",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1)],1):_vm._e()]),_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:option.value+" "+index,staticClass:"fc-input-full-border-select2 width100",attrs:{label:option.label,value:option.value}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.$validation.isEmpty(option.secondaryLabel)?_vm._e():_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.secondaryLabel))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13 pL10",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])}))],2),_vm.showQuickCreateData?_c("QuickCreateData",{attrs:{canShowDialog:_vm.showQuickCreateData,quickCreateField:_vm.field,setAddedRecord:_vm.setAddedRecord},on:{"update:canShowDialog":function($event){_vm.showQuickCreateData=$event},"update:can-show-dialog":function($event){_vm.showQuickCreateData=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(634338),__webpack_require__(990260)),constant=__webpack_require__(354754),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),FieldLoader=__webpack_require__(62979),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),LOOKUP_FIELD_PLACEHOLDER_MAP={people:{value:"${LOGGED_PEOPLE}",label:"Current User"},users:{value:"${LOGGED_USER}",label:"Current User"}},FLookupFieldvue_type_script_lang_js={name:"f-lookup-field",props:{model:{},field:{type:Object},disabled:{type:Boolean},siteId:{type:[Number,String]},categoryId:{type:Number},hideLookupIcon:{type:Boolean,default:!1},popperAppendToBody:{required:!1,type:Boolean,default:!0},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},preHookFilterConstruction:{type:Function,default:function(field){return field.filters}},hideDropDown:{type:Boolean,default:!1},skipLoading:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},userfilmoduleEnum:{type:String},parentModuleId:{type:Number},selectedOptions:{type:Array}},components:{FieldLoader:FieldLoader/* default */.Z,QuickCreateData:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(99813)]).then(__webpack_require__.bind(__webpack_require__,676433))}},data:function(){return{localSearch:!1,isLoadedOnce:!1,currentModelValue:!1,showQuickCreateData:!1}},computed:{customOptions:function(){var _ref=this||{},field=_ref.field,_ref2=field||{},lookupModule=_ref2.lookupModule;if((0,validation/* isEmpty */.xb)(lookupModule))return[];var _ref3=lookupModule||{},name=_ref3.name;return(0,validation/* isEmpty */.xb)(LOOKUP_FIELD_PLACEHOLDER_MAP[name])?[]:[LOOKUP_FIELD_PLACEHOLDER_MAP[name]]},modelObj:{get:function(){return this.model},set:function(value){this.currentModelValue=value,this.$emit("update:model",value)}},moduleDisplayName:function(){var field=this.field,_ref4=field.field||{},lookupModule=_ref4.lookupModule,_ref5=lookupModule||{},displayName=_ref5.displayName;return displayName},isFieldLoading:function(){var field=this.field,defaultIds=this.defaultIds,skipLoading=this.skipLoading,isLoadedOnce=this.isLoadedOnce;return!skipLoading&&!isLoadedOnce&&!(0,validation/* isEmpty */.xb)(defaultIds)&&field.isDataLoading},isPickListTypeModule:function(){var field=this.field,fieldObj=field.field,_ref6=fieldObj||field,lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},type=_ref7.type;
// type 1 is for base entity modules
return!!type&&1!==type},isRemote:function(){var localSearch=this.localSearch;return!localSearch},canHideLookupIcon:function(){var hideLookupIcon=this.hideLookupIcon,isPickListTypeModule=this.isPickListTypeModule,hideDropDown=this.hideDropDown,field=this.field,userfilmoduleEnum=this.userfilmoduleEnum,_ref8=field||{},config=_ref8.config,canHide=!1;if(!(0,validation/* isEmpty */.xb)(config)){var canShowLookupWizard=this.$getProperty(config,"canShowLookupWizard",null);(0,validation/* isNull */.Ft)(canShowLookupWizard)||(canHide=!canShowLookupWizard)}return!hideDropDown&&("PICK_LIST"===userfilmoduleEnum||(canHide||hideLookupIcon||isPickListTypeModule))},canShowQuickCreateIcon:function(){var disabled=this.disabled,field=this.field,_ref9=field||{},config=_ref9.config,canShow=!1;return(0,validation/* isEmpty */.xb)(config)||(canShow=this.$getProperty(config,"canShowQuickCreate")),disabled&&(canShow=!1),canShow},isSiteEnabled:function(){var siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;return!(0,validation/* isEmpty */.xb)(currentSiteId)},isMultiple:function(){var field=this.field;return!!field.multiple},resourceModuleName:function(){var field=this.field,config=field.config,lookupModuleName=field.lookupModuleName,_ref10=config||{},isFiltersEnabled=_ref10.isFiltersEnabled,filterValue=_ref10.filterValue;if(isFiltersEnabled&&constant/* default */.Z.LOOKUP_FILTER_ENABLED_FIELDS.includes(lookupModuleName)){var moduleName=constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue];return moduleName}return null},isResourceField:function(){var field=this.field,name=field.name,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field)||"resource"===name;return isResourceField},
// To prefill the existing values, we have to send default ids in picklist api
defaultIds:function(){var modelObj=this.modelObj,selectedOptions=this.selectedOptions,isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(modelObj)||!1,defaultIds=[],selectedOptionsArr=(selectedOptions||[]).map((function(option){return parseInt(option)}));return(0,validation/* isEmpty */.xb)(selectedOptions)?(0,validation/* isEmpty */.xb)(modelObj)||isPlaceHoldersEnabled||(defaultIds=(0,validation/* isArray */.kJ)(modelObj)?(0,toConsumableArray/* default */.Z)(modelObj):[modelObj]):defaultIds=(0,toConsumableArray/* default */.Z)(selectedOptionsArr),defaultIds=defaultIds.filter((function(val){return!constant/* default */.Z.FIELD_PLACEHOLDERS.includes(val)})),defaultIds},operatorLookupModule:function(){var field=this.field,_ref11=field||{},operatorLookupModule=_ref11.operatorLookupModule;return operatorLookupModule||{}},skipSiteFilter:function(){var field=this.field,_ref12=field||{},config=_ref12.config,_ref13=config||{},_ref13$skipSiteFilter=_ref13.skipSiteFilter,skipSiteFilter=void 0!==_ref13$skipSiteFilter&&_ref13$skipSiteFilter;return skipSiteFilter},canShowSystemClear:function(){var canHideLookupIcon=this.canHideLookupIcon,isClearable=this.isClearable,modelObj=this.modelObj,disabled=this.disabled;return!canHideLookupIcon&&!disabled&&(isClearable&&!(0,validation/* isEmpty */.xb)(modelObj))}},watch:{model:function(newVal){var _this=this,currentModelValue=this.currentModelValue,isRemote=this.isRemote;isEqual_default()(newVal,currentModelValue)||(isRemote&&this.getOptions({initialFetch:!0}).then((function(options){_this.$set(_this.field,"options",options)})),this.$set(this,"modelObj",newVal))},siteId:{handler:function(newVal,oldVal){var _this2=this,isSiteEnabled=this.isSiteEnabled,skipSiteFilter=this.skipSiteFilter;skipSiteFilter||isSiteEnabled||newVal===oldVal||this.getOptions({initialFetch:!0}).then((function(options){_this2.$set(_this2.field,"options",options)}))}},parentModuleId:{handler:function(newVal,oldVal){var _this3=this;newVal!==oldVal&&this.getOptions({initialFetch:!0}).then((function(options){_this3.$set(_this3.field,"options",options)}))}},operatorLookupModule:{handler:function(newVal,oldVal){var _this4=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this4.$set(_this4.field,"options",options)}))}},"field.clientCriteria":{handler:function(newVal,oldVal){var _this5=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this5.$set(_this5.field,"options",options)}))}},categoryId:{handler:function(newVal,oldVal){var _this6=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this6.$set(_this6.field,"options",options)}))}},"field.options":{handler:function(value){var modelObj=this.modelObj;if(!(0,validation/* isEmpty */.xb)(value))if((0,validation/* isEmpty */.xb)(modelObj))this.field.selectedItems=[];else if((0,validation/* isArray */.kJ)(modelObj)){var selectedItems=value.filter((function(option){return modelObj.includes(option.value)}));this.field.selectedItems=selectedItems}else{var selectedItem=value.find((function(option){return option.value===modelObj}));this.field.selectedItems=[selectedItem]}},immediate:!0},isLoadedOnce:{handler:function(value){value&&this.$emit("optionsLoadedOnce")}}},created:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var fetchOptionsOnLoad,field,modelObj,customOptions,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:
// Have to skip fetching options initially, when module is 'resource' and filters is not enabled
if(fetchOptionsOnLoad=_this7.fetchOptionsOnLoad,field=_this7.field,modelObj=_this7.modelObj,customOptions=_this7.customOptions,_this7.currentModelValue=modelObj,_this7.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx,!fetchOptionsOnLoad){_context2.next=12;break}return _context2.next=6,_this7.getOptions({initialFetch:!0});case 6:if(_context2.t0=_context2.sent,_context2.t0){_context2.next=9;break}_context2.t0=[];case 9:options=_context2.t0,_this7.$set(_this7.field,"options",[].concat((0,toConsumableArray/* default */.Z)(customOptions),(0,toConsumableArray/* default */.Z)(options))),_this7.$set(_this7,"isLoadedOnce",!0);case 12:_this7.remoteMethod=_this7.$helpers.debounce(function(){var _ref14=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(searchText){var isDataLoading,_options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isDataLoading=field.isDataLoading,isDataLoading){_context.next=6;break}return _context.next=4,_this7.getOptions({searchText:searchText});case 4:_options=_context.sent,_this7.$set(_this7.field,"options",_options);case 6:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref14.apply(this,arguments)}}(),1e3);case 13:case"end":return _context2.stop()}}),_callee2)})))()},methods:{focus:function(){(0,validation/* isEmpty */.xb)(this.$refs["selectBox"])||this.$refs["selectBox"].focus()},getOptions:function(params){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var searchText,initialFetch,fetchOptionsMethod,field,siteId,categoryId,isRemote,defaultIds,resourceModuleName,isResourceField,skipSiteFilter,selectedOptions,_field$filters,fieldFilters,options,filters,props,perPageCount,_yield$_this8$fetchOp,_yield$_this8$fetchOp2,optionsArr,error,_ref15,message,_yield$getFieldOption,_yield$getFieldOption2,_optionsArr,_error,meta,_ref16,_message,_meta$localSearch,localSearch;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
/*
                Have to return empty options if field is of resourcetype, if filters havent be enabled
                and if no values selected already
              */
if(searchText=params.searchText,initialFetch=params.initialFetch,fetchOptionsMethod=_this8.fetchOptionsMethod,field=_this8.field,siteId=_this8.siteId,categoryId=_this8.categoryId,isRemote=_this8.isRemote,defaultIds=_this8.defaultIds,resourceModuleName=_this8.resourceModuleName,isResourceField=_this8.isResourceField,skipSiteFilter=_this8.skipSiteFilter,selectedOptions=_this8.selectedOptions,_field$filters=field.filters,fieldFilters=void 0===_field$filters?{}:_field$filters,options=[],(0,validation/* isEmpty */.xb)(resourceModuleName)||(field.resourceLookupModuleName=resourceModuleName),filters=_this8.preHookFilterConstruction(field),(0,validation/* isEmpty */.xb)(filters)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fieldFilters),filters)),(0,validation/* isEmpty */.xb)(categoryId)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field.filters),{},{category:{operator:"is",value:["".concat(categoryId)]}})),props={field:field,searchText:searchText},skipSiteFilter||(props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{siteId:siteId})),!(isResourceField&&(0,validation/* isEmpty */.xb)(resourceModuleName)&&(0,validation/* isEmpty */.xb)(defaultIds))){_context3.next=12;break}return _context3.abrupt("return",options);case 12:if(initialFetch&&isRemote&&(perPageCount=defaultIds.length>50?defaultIds.length:50,props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{page:1,perPage:perPageCount,defaultIds:defaultIds}),((0,validation/* isEmpty */.xb)(resourceModuleName)&&isResourceField||!(0,validation/* isEmpty */.xb)(selectedOptions))&&(
// Have to fetch only selected values, which is same as the number of defaultids
props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{perPage:defaultIds.length}))),_this8.$set(field,"isDataLoading",!0),(0,validation/* isEmpty */.xb)(fetchOptionsMethod)){_context3.next=25;break}return _context3.next=17,_this8.fetchOptionsMethod(props);case 17:_yield$_this8$fetchOp=_context3.sent,_yield$_this8$fetchOp2=_yield$_this8$fetchOp.options,optionsArr=void 0===_yield$_this8$fetchOp2?[]:_yield$_this8$fetchOp2,error=_yield$_this8$fetchOp.error,error&&(_ref15=error||{},message=_ref15.message,_this8.$message.error(message||"Error Occured")),options=optionsArr,_context3.next=35;break;case 25:return _context3.next=27,(0,picklist/* getFieldOptions */._K)(props);case 27:_yield$getFieldOption=_context3.sent,_yield$getFieldOption2=_yield$getFieldOption.options,_optionsArr=void 0===_yield$getFieldOption2?[]:_yield$getFieldOption2,_error=_yield$getFieldOption.error,meta=_yield$getFieldOption.meta,_error&&(_ref16=_error||{},_message=_ref16.message,_this8.$message.error(_message||"Error Occured")),meta&&(0,validation/* isEmpty */.xb)(searchText)&&(_meta$localSearch=meta.localSearch,localSearch=void 0!==_meta$localSearch&&_meta$localSearch,_this8.$set(_this8,"localSearch",localSearch)),options=_optionsArr;case 35:return _this8.$set(field,"isDataLoading",!1),_context3.abrupt("return",options);case 37:case"end":return _context3.stop()}}),_callee3)})))()},clearData:function(){this.$emit("update:model",""),this.recordSelected("")},recordSelected:function(value){var field=this.field,_this$field$options=this.field.options,options=void 0===_this$field$options?[]:_this$field$options,isMultiple=this.isMultiple,selectedValues=null;isMultiple?(selectedValues=options.filter((function(e){return(value||[]).includes(e.value)})),field.selectedItems=selectedValues):(selectedValues=options.find((function(e){return e.value==value}))||{},field.selectedItems=[],(0,validation/* isEmpty */.xb)(selectedValues)||(field.selectedItems=[selectedValues])),this.$emit("recordSelected",selectedValues,field)},openLookupFieldWizard:function(field){var disabled=this.disabled;disabled||this.$emit("showLookupWizard",field,!0)},openQuickCreate:function(){var disabled=this.disabled;disabled||(this.showQuickCreateData=!0)},setAddedRecord:function(props){var record=props.record,_ref17=record||{},id=_ref17.id,name=record.displayName||record.name||record.subject,field=this.field;field.selectedItems=[{value:id,label:name}],this.$emit("setLookupFieldValue",{field:(0,objectSpread2/* default */.Z)({},field)})}}},forms_FLookupFieldvue_type_script_lang_js=FLookupFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FLookupFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupField=component.exports},
/***/62979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FieldLoader.vue?vue&type=template&id=7252e23e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"field-loading loading-shimmer"}):_vm._e()},staticRenderFns=[],FieldLoadervue_type_script_lang_js={props:{isLoading:{type:Boolean,required:!0}}},forms_FieldLoadervue_type_script_lang_js=FieldLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FieldLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldLoader=component.exports},
/***/806339:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/utils/WidgetPagination.vue?vue&type=template&id=6b10cd5b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-widget-pagination"},[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},staticRenderFns=[],WidgetPaginationvue_type_script_lang_js={props:["currentPage","perPage","total","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{total:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.updateCurrentPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.updateCurrentPage()},updateCurrentPage:function(){
// Update currentPage value
this.$emit("update:currentPage",this.page),this.$emit("onChange")}}},utils_WidgetPaginationvue_type_script_lang_js=WidgetPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(utils_WidgetPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetPagination=component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/429551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AttendanceList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/peopleV2/attendance/AttendanceList.vue?vue&type=template&id=c9f1aaa2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.selectedEmployeeIsSet?_c("AttendanceTopBar",{attrs:{selectedEmployee:_vm.selectedEmployee,showTransitionButtons:_vm.myAttendance},on:{timelineRangeUpdate:_vm.updateTimelineRange,viewModeUpdate:_vm.updateViewMode}}):_vm._e(),_c("EmployeeSnippetView",{attrs:{myAttendance:_vm.myAttendance},on:{setEmployee:_vm.setEmployee}},[_vm.isCalendarViewSelected?_c("CalendarView",{attrs:{timelineRange:_vm.timelineRange,selectedEmployee:_vm.selectedEmployee,myAttendance:_vm.myAttendance}}):_c("ListView",{attrs:{timelineRange:_vm.timelineRange,selectedEmployee:_vm.selectedEmployee,myAttendance:_vm.myAttendance}})],1)],1)},staticRenderFns=[],AttendanceTopBarvue_type_template_id_69dcdc42_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex attendance-top-bar"},[_c("div",{staticClass:"d-flex attendance-top-bar-left-child"},[_c("el-radio-group",{attrs:{size:"small"},on:{change:_vm.updateViewMode},model:{value:_vm.viewMode,callback:function($$v){_vm.viewMode=$$v},expression:"viewMode"}},[_c("el-radio-button",{attrs:{label:"Calendar View"}}),_c("el-radio-button",{attrs:{label:"List View"}})],1),_c("new-date-picker",{staticClass:"picker",attrs:{zone:_vm.$timezone,dateObj:_vm.dateFilter,tabs:_vm.dateRange.enabledTabs},on:{date:_vm.setDateFilter}})],1),_vm.showTransitionButtons?_c("TransitionButtons",{staticStyle:{"margin-top":"-8px"},attrs:{employeeID:_vm.employeeID,allowDateTimeSelector:!1}}):_vm._e()],1)},AttendanceTopBarvue_type_template_id_69dcdc42_scoped_true_staticRenderFns=[],NewDateHelper=__webpack_require__(105534),NewDatePicker=__webpack_require__(900773),TransitionButtonsvue_type_template_id_c80cb3a0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"transition-buttons"},[_vm.transition.isLoading?_c("el-skeleton",{attrs:{rows:1,animated:""}}):_c("div",[_vm._l(_vm.transition.buttons,(function(button,index){return _c("el-button",{key:index,attrs:{size:"small"},on:{click:function($event){return _vm.processTransition(button)}}},[_vm._v(" "+_vm._s(_vm.getDisplayNameForTransition(button))+" ")])})),_vm.transition.showTransitionDialogue?_c("el-dialog",{attrs:{title:_vm.transition.title,visible:_vm.transition.showTransitionDialogue,"append-to-body":!0,width:"30%","custom-class":[_vm.allowDateTimeSelector?"for-attendance":"for-my-attendance"]},on:{"update:visible":function($event){return _vm.$set(_vm.transition,"showTransitionDialogue",$event)}}},[_c("div",{staticClass:"d-flex justify-content-space"},[_vm.allowDateTimeSelector?_c("div",{staticStyle:{width:"100%"}},[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.date"))+" ")]),_c("div",{staticClass:"mT10"},[_c("FDatePicker",{staticClass:"fc-input-full-border2 form-date-picker",staticStyle:{width:"100%"},attrs:{type:"datetime"},model:{value:_vm.transition.selectedDate,callback:function($$v){_vm.$set(_vm.transition,"selectedDate",$$v)},expression:"transition.selectedDate"}})],1)]):_vm._e(),_vm.showBreakPicker()?_c("div",{class:_vm.allowDateTimeSelector?"mL10":"",staticStyle:{width:"100%"}},[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.break"))+" ")]),_c("div",{staticClass:"mT10"},[_c("FLookupField",{staticStyle:{width:"100%"},attrs:{model:_vm.transition.selectedBreak,field:_vm.breakFieldWithFilter,hideLookupIcon:!0},on:{"update:model":function($event){return _vm.$set(_vm.transition,"selectedBreak",$event)}}})],1)]):_vm._e()]),_c("div",{class:_vm.allowDateTimeSelector?"mT20":""},[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.notes"))+" ")]),_c("div",{staticClass:"mT10"},[_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},resize:"none",placeholder:"Add notes for "+_vm.transition.title},model:{value:_vm.transition.notes,callback:function($$v){_vm.$set(_vm.transition,"notes",$$v)},expression:"transition.notes"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.toggleShowTransitionDialogue}},[_vm._v(_vm._s(_vm.$t("common.shift_planner.cancel")))]),_vm.updatingTransaction?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.transition.updatingState,disabled:_vm.disableUpdateButton()},on:{click:_vm.updateTransaction}},[_vm._v(_vm._s(_vm.$t("common.shift_planner.update")))]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.transition.updatingState,disabled:_vm.disableUpdateButton()},on:{click:_vm.addTransaction}},[_vm._v(_vm._s(_vm.$t("common.shift_planner.update")))])],1)]):_vm._e()],2)],1)},TransitionButtonsvue_type_template_id_c80cb3a0_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FDatePicker=(__webpack_require__(879288),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(358551)),api=__webpack_require__(32284),peopleMixin=__webpack_require__(849561),FLookupField=__webpack_require__(855048),TransitionButtonsvue_type_script_lang_js={name:"TransitionButtons",props:{employeeID:{required:!0,type:Number},allowDateTimeSelector:{required:!0,type:Boolean},showAllButtons:{required:!1,type:Boolean}},components:{FLookupField:FLookupField/* default */.Z,FDatePicker:FDatePicker/* default */.Z},mixins:[peopleMixin/* default */.Z],data:function(){return{employeeShift:null,breakField:{isDataLoading:!1,lookupModuleName:"break",field:{lookupModule:{name:"break",displayName:"Break"}},filters:{}},updatingTransaction:!1,transition:{id:null,title:null,name:null,isLoading:!0,buttons:null,showTransitionDialogue:!1,selectedDate:null,selectedBreak:null,notes:null,updatingState:!1}}},created:function(){var _this=this;this.fetchAttendanceTransitionButtons(this.employeeID),this.fetchEmployeeShift(),this.$root.$on("edit-attendance-transaction",(function(tx){_this.setDataForTransactionUpdate(tx)}))},computed:{breakFieldWithFilter:function(){var _this$employeeShift,shiftField={isDataLoading:!1,lookupModuleName:"break",field:{lookupModule:{name:"break",displayName:"Break"}},filters:{}},shiftId=null===(_this$employeeShift=this.employeeShift)||void 0===_this$employeeShift?void 0:_this$employeeShift.shiftId;return shiftId&&(shiftField["filters"]={shifts:{operatorId:90,value:[shiftId+""]}}),shiftField}},methods:{updateTransaction:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref,transition,transactionTime,transactionType,id,transaction;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref=_this2||{},transition=_ref.transition,transactionTime=transition.selectedDate.valueOf()||null,transactionType=transition.name||null,id=transition.id||null,transaction={transactionTime:transactionTime,transactionType:transactionType},transition.selectedBreak&&(transaction.shiftBreak={id:transition.selectedBreak}),transition.notes&&(transaction.notes=transition.notes),_context.next=9,api/* API */.bl.updateRecord("attendanceTransaction",{id:id,data:transaction});case 9:_this2.clearTransitionDialogue(),_this2.toggleShowTransitionDialogue(),_this2.$root.$emit("refresh-attendance");case 12:case"end":return _context.stop()}}),_callee)})))()},setDataForTransactionUpdate:function(tx){this.updatingTransaction=!0,this.transition.showTransitionDialogue=!0;var transitionDisplayName=this.getDisplayNameForTransition(tx.transactionType);this.transition.name=tx.transactionType,this.transition.title="Update ".concat(transitionDisplayName),this.transition.selectedDate=tx.transactionTime,this.transition.id=tx.id,this.transition.notes=tx.notes},fetchEmployeeShift:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var today,from,to;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return today=(new Date).setHours(0,0,0,0).valueOf(),from=today,to=today,_context2.next=5,_this3.fetchShift(from,to,_this3.employeeID);case 5:case"end":return _context2.stop()}}),_callee2)})))()},fetchShift:function(rangeFrom,rangeTo,employeeID){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var route,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(rangeFrom||rangeTo||employeeID){_context3.next=3;break}return _context3.abrupt("return");case 3:return _this4.transition.isLoading=!0,route="/v3/shiftplanner/view?rangeFrom=".concat(rangeFrom,"&rangeTo=").concat(rangeTo,"&employeeID=").concat(employeeID),_context3.next=7,api/* API */.bl.get(route);case 7:_yield$API$get=_context3.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?error.message||_this4.$t("common._common.error_occured"):_this4.employeeShift=data.shifts[0],_this4.transition.isLoading=!1;case 12:case"end":return _context3.stop()}}),_callee3)})))()},showBreakPicker:function(){return!this.updatingTransaction&&"BREAK"===this.transition.name},disableUpdateButton:function(){return!(!this.showBreakPicker()||null!==this.transition.selectedBreak)},fetchAttendanceTransitionButtons:function(peopleID){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var route,_yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!_this5.showAllButtons){_context4.next=3;break}return _this5.transition.buttons=["CHECK_IN","BREAK","RESUME_WORK","CHECK_OUT"],_context4.abrupt("return");case 3:return _this5.transition.isLoading=!0,route="/v3/attendance/transition?peopleID=".concat(peopleID),_context4.next=7,api/* API */.bl.get(route);case 7:_yield$API$get2=_context4.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?error.message||_this5.$t("common._common.error_occured"):_this5.transition.buttons=data.attendanceTransitions,_this5.transition.isLoading=!1;case 12:case"end":return _context4.stop()}}),_callee4)})))()},processTransition:function(name){this.transition.name=name,this.transition.title=this.getDisplayNameForTransition(name),this.transition.selectedDate=Date.now(),this.toggleShowTransitionDialogue()},toggleShowTransitionDialogue:function(){this.transition.showTransitionDialogue=!this.transition.showTransitionDialogue},clearTransitionDialogue:function(){this.transition.selectedDate=null,this.transition.selectedBreak=null,this.transition.notes=null},addTransaction:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _this6$transition,_this6$transition2,_this6$transition3,_this6$transition4,people,transactionTime,transactionType,sourceType,transaction,_yield$API$createReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(people=_this6.employeeID,transactionTime=(null===(_this6$transition=_this6.transition)||void 0===_this6$transition?void 0:_this6$transition.selectedDate.valueOf())||null,transactionType=(null===(_this6$transition2=_this6.transition)||void 0===_this6$transition2?void 0:_this6$transition2.name)||null,sourceType="WEB",transactionTime&&transactionType&&sourceType&&people){_context5.next=7;break}return _context5.abrupt("return");case 7:return transaction={transactionTime:transactionTime,transactionType:transactionType,sourceType:sourceType,people:{id:people}},null!==(_this6$transition3=_this6.transition)&&void 0!==_this6$transition3&&_this6$transition3.selectedBreak&&(transaction.shiftBreak={id:_this6.transition.selectedBreak}),null!==(_this6$transition4=_this6.transition)&&void 0!==_this6$transition4&&_this6$transition4.notes&&(transaction.notes=_this6.transition.notes),_this6.transition.updatingState=!0,_context5.next=13,api/* API */.bl.createRecord("attendanceTransaction",{data:transaction});case 13:return _yield$API$createReco=_context5.sent,error=_yield$API$createReco.error,error&&_this6.$message.error(error.message||"Error Occured"),_this6.clearTransitionDialogue(),_this6.toggleShowTransitionDialogue(),_context5.next=20,_this6.fetchAttendanceTransitionButtons(_this6.employeeID);case 20:_this6.transition.updatingState=!1,"CHECK_OUT"!==transactionType&&"CHECK_IN"!==transactionType||_this6.$root.$emit("refresh-attendance");case 22:case"end":return _context5.stop()}}),_callee5)})))()}}},attendance_TransitionButtonsvue_type_script_lang_js=TransitionButtonsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(attendance_TransitionButtonsvue_type_script_lang_js,TransitionButtonsvue_type_template_id_c80cb3a0_render,TransitionButtonsvue_type_template_id_c80cb3a0_staticRenderFns,!1,null,null,null)
/* harmony default export */,TransitionButtons=component.exports;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/peopleV2/attendance/AttendanceTopBar.vue?vue&type=script&lang=js
function computeDefaultRange(){var date=new Date,firstDay=new Date(date.getFullYear(),date.getMonth(),1),lastDay=new Date(date.getFullYear(),date.getMonth()+1,0);return[firstDay,lastDay]}
/* harmony default export */var AttendanceView_render,AttendanceView_staticRenderFns,AttendanceTopBarvue_type_script_lang_js={props:{selectedEmployee:{required:!0,type:Object},showTransitionButtons:{type:Boolean,default:!1}},components:{NewDatePicker:NewDatePicker/* default */.Z,TransitionButtons:TransitionButtons},data:function(){return{dateRange:{enabledTabs:{enabledTabs:["M"]}},dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(64,
// month
computeDefaultRange()),timelineRange:null,viewMode:"Calendar View"}},computed:{employeeID:function(){var _ref=this.selectedEmployee||-1,id=_ref.id;return id}},methods:{updateViewMode:function(){this.$emit("viewModeUpdate",this.viewMode)},setTimelineRange:function(from,to){this.timelineRange={from:from,to:to},this.$emit("timelineRangeUpdate",this.timelineRange)},setDateFilter:function(data){var range=null===data||void 0===data?void 0:data.value;if(range){var from=range[0],to=range[1];this.setTimelineRange(from,to),this.dateFilter=data}}}},attendance_AttendanceTopBarvue_type_script_lang_js=AttendanceTopBarvue_type_script_lang_js,AttendanceTopBar_component=(0,componentNormalizer/* default */.Z)(attendance_AttendanceTopBarvue_type_script_lang_js,AttendanceTopBarvue_type_template_id_69dcdc42_scoped_true_render,AttendanceTopBarvue_type_template_id_69dcdc42_scoped_true_staticRenderFns,!1,null,"69dcdc42",null)
/* harmony default export */,AttendanceTopBar=AttendanceTopBar_component.exports,ListViewvue_type_template_id_51ecf883_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.attendance.isLoading?_c("spinner",{attrs:{show:_vm.attendance.isLoading,size:"100"}}):_c("div",{staticClass:"attendance-list-container"},[_c("div",{staticClass:"attendance-list-head"},[_c("div",[_vm._v(" "+_vm._s(_vm.currentEmployeeName)+" ")]),_c("div",[_vm.showTransitionButtons?_c("TransitionButtons",{attrs:{employeeID:_vm.employeeID,allowDateTimeSelector:_vm.allowDateTimeSelector,showAllButtons:!0}}):_vm._e()],1)]),_c("div",{staticClass:"attendance-list-body"},[_c("el-table",{attrs:{id:"attendance-list-table",data:_vm.attendance.list,"max-height":"500","cell-style":{padding:"10px"},"header-cell-style":{padding:"10px"}},on:{"row-click":_vm.toggleAttendanceSummary}},[_c("el-table-column",{attrs:{label:"Date"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(_vm._s(_vm.formatDateWithoutTime(data.row.day)))])]}}])}),_c("el-table-column",{attrs:{label:"Check-In"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(_vm._s(_vm.formatDateWithOnlyTime(data.row.checkInTime)))])]}}])}),_c("el-table-column",{attrs:{label:"Check-Out"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(_vm._s(_vm.formatDateWithOnlyTime(data.row.checkOutTime)))])]}}])}),_c("el-table-column",{attrs:{label:"Working Hours"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(_vm._s(_vm.msToHoursAndMinutes(data.row.workingHours)))])]}}])}),_c("el-table-column",{attrs:{label:"Status"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(_vm._s(_vm.getDisplayNameForStatus(data.row.status)))])]}}])}),_c("el-table-column",{attrs:{label:"Shift"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(_vm._s(_vm.prettifyEmpty(_vm.$getProperty(data.row.shift,"name"))))])]}}])}),_c("el-table-column",{attrs:{label:"Paid Break"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(" "+_vm._s(_vm.msToHoursAndMinutes(data.row.totalPaidBreakHrs))+" ")])]}}])}),_c("el-table-column",{attrs:{label:"Unpaid Break"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(" "+_vm._s(_vm.msToHoursAndMinutes(data.row.totalUnpaidBreakHrs))+" ")])]}}])})],1)],1),_vm.showAttendanceSummary?_c("AttendanceSummary",{attrs:{visibility:_vm.showAttendanceSummary,attendance:_vm.selectedAttendance,peopleID:_vm.selectedEmployee.id,myAttendance:_vm.myAttendance},on:{"update:visibility":function($event){_vm.showAttendanceSummary=$event},"close-attendance-summary":function($event){return _vm.toggleAttendanceSummary(null)}}}):_vm._e()],1)},ListViewvue_type_template_id_51ecf883_scoped_true_staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),AttendanceSummaryvue_type_template_id_e489b960_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"comment-dialog attendance-summary",staticStyle:{top:"50px",position:"fixed"},attrs:{visibility:_vm.visibility}},[_c("div",{staticClass:"comment-dialog-header"},[_c("h3",{staticClass:"comment-dialog-heading",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.formatDateWithoutTime(_vm.attendance.day))+" ")]),_c("div",{staticClass:"comment-close"},[_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Close",placement:"bottom"}},[_c("i",{staticClass:"el-icon-close",attrs:{"aria-hidden":"true"},on:{click:function($event){return _vm.closeSummary()}}})])],1)]),_c("div",{staticClass:"summary-dialog-body"},[_c("div",{staticClass:"section-heading"},[_vm._v(_vm._s(_vm.$t("common.products.summary")))]),_c("table",{staticClass:"summary-table"},[_c("tr",[_c("td",[_c("div",{staticClass:"label"},[_vm._v(_vm._s(_vm.$t("common.products.date")))]),_c("div",[_vm._v(_vm._s(_vm.formatDateWithoutTime(_vm.attendance.day)))])]),_c("td",[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.attendanceStatus"))+" ")]),_c("div",[_vm._v(_vm._s(_vm.getDisplayNameForStatus(_vm.attendance.status)))])])]),_c("tr",[_c("td",[_c("div",{staticClass:"label"},[_vm._v(_vm._s(_vm.$t("common.products.shift")))]),_c("div",[_vm._v(" "+_vm._s(_vm.prettifyEmpty(_vm.$getProperty(_vm.attendance,"shift.name")))+" ")])]),_c("td",[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.workingHours"))+" ")]),_c("div",[_vm._v(_vm._s(_vm.msToHoursAndMinutes(_vm.attendance.workingHours)))])])]),_c("tr",[_c("td",[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.paidBreakHours"))+" ")]),_c("div",[_vm._v(_vm._s(_vm.msToHoursAndMinutes(_vm.attendance.totalPaidBreakHrs)))])]),_c("td",[_c("div",{staticClass:"label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.unPaidBreakHours"))+" ")]),_c("div",[_vm._v(_vm._s(_vm.msToHoursAndMinutes(_vm.attendance.totalUnpaidBreakHrs)))])])])]),_c("div",{staticClass:"section-heading"},[_vm._v(" "+_vm._s(_vm.$t("common.products.transactions"))+" ")]),_vm.transactions.isLoading?_c("el-skeleton",{staticClass:"mT30",attrs:{animated:""}}):_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.transactions.list,"max-height":"300","cell-style":{padding:"10px"},"header-cell-style":{padding:"10px"},"row-style":{padding:"0px"}}},[_c("el-table-column",{attrs:{label:"Type"},scopedSlots:_vm._u([{key:"default",fn:function(props){return[_c("div",[_vm._v(" "+_vm._s(_vm.getDisplayNameForTransition(props.row.transactionType))+" ")])]}}])}),_c("el-table-column",{attrs:{label:"Time"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",[_vm._v(_vm._s(_vm.formatDateWithOnlyTime(data.row.transactionTime)))])]}}])}),_c("el-table-column",{attrs:{label:"Method",prop:"sourceType"}}),_vm.hasUpdatePermission?_c("el-table-column",{scopedSlots:_vm._u([{key:"default",fn:function(props){return[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editAttendnce(props.row)}}})]}}],null,!1,3744676900)}):_vm._e(),_c("el-table-column",{attrs:{type:"expand","class-name":"tx_col"},scopedSlots:_vm._u([{key:"default",fn:function(props){return[_c("div",{staticClass:"notes"},[_vm._v(_vm._s(_vm.prettifyEmpty(props.row.notes)))])]}}])})],1)],1)])},AttendanceSummaryvue_type_template_id_e489b960_scoped_true_staticRenderFns=[],AttendanceSummaryvue_type_script_lang_js={name:"AttendanceSummary",props:["visibility","attendance","peopleID","myAttendance"],mixins:[peopleMixin/* default */.Z],created:function(){this.fetchAttendanceTransactionsForCurrentPeople()},data:function(){return{transactions:{list:[],isLoading:!0}}},computed:{hasUpdatePermission:function(){return!this.myAttendance}},methods:{editAttendnce:function(tx){this.$emit("close-attendance-summary"),this.$root.$emit("edit-attendance-transaction",tx)},closeSummary:function(){this.$emit("close-attendance-summary")},fetchAttendanceTransactionsForCurrentPeople:function(){this.fetchAttendanceTransactions(this.attendance.day,this.peopleID)},fetchAttendanceTransactions:function(date,peopleID){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var route,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(date||peopleID){_context.next=3;break}return _context.abrupt("return");case 3:return _this.transactions.isLoading=!0,route="/v3/attendancetransaction/view?peopleID=".concat(peopleID,"&date=").concat(date),_context.next=7,api/* API */.bl.get(route);case 7:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?error.message||_this.$t("common._common.error_occured"):_this.transactions.list=data.attendanceTransaction,_this.transactions.isLoading=!1;case 12:case"end":return _context.stop()}}),_callee)})))()}}},attendance_AttendanceSummaryvue_type_script_lang_js=AttendanceSummaryvue_type_script_lang_js,AttendanceSummary_component=(0,componentNormalizer/* default */.Z)(attendance_AttendanceSummaryvue_type_script_lang_js,AttendanceSummaryvue_type_template_id_e489b960_scoped_true_render,AttendanceSummaryvue_type_template_id_e489b960_scoped_true_staticRenderFns,!1,null,"e489b960",null)
/* harmony default export */,AttendanceSummary=AttendanceSummary_component.exports,AttendanceViewvue_type_script_lang_js={name:"AttendanceView",mixins:[peopleMixin/* default */.Z],components:{AttendanceSummary:AttendanceSummary,TransitionButtons:TransitionButtons},props:{selectedEmployee:{required:!0,datatype:Object},timelineRange:{required:!0,datatype:Object},myAttendance:{datatype:Boolean,default:!1}},created:function(){var _this=this;this.fetchCurrentEmployeeAttendance(),this.$root.$on("refresh-attendance",(function(){_this.fetchCurrentEmployeeAttendance()}))},watch:{timelineRange:{handler:function(){this.fetchCurrentEmployeeAttendance()},deep:!0},selectedEmployee:{handler:function(){this.fetchCurrentEmployeeAttendance()},deep:!0}},data:function(){return{attendance:{list:[],isLoading:!0},shifts:null}},computed:{allowDateTimeSelector:function(){return!this.myAttendance},showTransitionButtons:function(){return Boolean(this.selectedEmployee&&!this.myAttendance)},employeeID:function(){return this.selectedEmployee.id},currentEmployeeName:function(){var _this$selectedEmploye;return null!==(_this$selectedEmploye=this.selectedEmployee)&&void 0!==_this$selectedEmploye&&_this$selectedEmploye.name?this.selectedEmployee.name:"---"}},methods:{fetchAttendance:function(rangeFrom,rangeTo,peopleID){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var route,_yield$API$get,error,data,_iterator,_step,_attendance$shift,attendance,shiftID,_attendance$shift2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(peopleID){_context.next=2;break}return _context.abrupt("return");case 2:return _this2.attendance.isLoading=!0,route="/v3/attendance/view?peopleID=".concat(peopleID,"&rangeFrom=").concat(rangeFrom,"&rangeTo=").concat(rangeTo),_context.next=6,api/* API */.bl.get(route);case 6:if(_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error)error.message||_this2.$t("common._common.error_occured");else{_this2.shifts=data.shifts,_this2.attendance.list=data.attendance,_iterator=(0,createForOfIteratorHelper/* default */.Z)(_this2.attendance.list);try{for(_iterator.s();!(_step=_iterator.n()).done;)attendance=_step.value,shiftID=null===attendance||void 0===attendance||null===(_attendance$shift=attendance.shift)||void 0===_attendance$shift?void 0:_attendance$shift.id,shiftID&&(attendance.shift=data.shifts[null===attendance||void 0===attendance||null===(_attendance$shift2=attendance.shift)||void 0===_attendance$shift2?void 0:_attendance$shift2.id])}catch(err){_iterator.e(err)}finally{_iterator.f()}}_this2.attendance.isLoading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},fetchCurrentEmployeeAttendance:function(){var _this$selectedEmploye2,employeeID=null===(_this$selectedEmploye2=this.selectedEmployee)||void 0===_this$selectedEmploye2?void 0:_this$selectedEmploye2.id;this.fetchAttendance(this.timelineRange.from,this.timelineRange.to,employeeID)}}},attendance_AttendanceViewvue_type_script_lang_js=AttendanceViewvue_type_script_lang_js,AttendanceView_component=(0,componentNormalizer/* default */.Z)(attendance_AttendanceViewvue_type_script_lang_js,AttendanceView_render,AttendanceView_staticRenderFns,!1,null,null,null)
/* harmony default export */,AttendanceView=AttendanceView_component.exports,ListViewvue_type_script_lang_js={name:"ListView",extends:AttendanceView,data:function(){return{showAttendanceSummary:!1}},methods:{toggleAttendanceSummary:function(obj){this.selectedAttendance=obj,this.showAttendanceSummary=!this.showAttendanceSummary}}},attendance_ListViewvue_type_script_lang_js=ListViewvue_type_script_lang_js,ListView_component=(0,componentNormalizer/* default */.Z)(attendance_ListViewvue_type_script_lang_js,ListViewvue_type_template_id_51ecf883_scoped_true_render,ListViewvue_type_template_id_51ecf883_scoped_true_staticRenderFns,!1,null,"51ecf883",null)
/* harmony default export */,ListView=ListView_component.exports,CalendarViewvue_type_template_id_4eac54ac_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"attendance-list-container"},[_c("div",{staticClass:"attendance-list-head"},[_c("div",[_vm._v(" "+_vm._s(_vm.currentEmployeeName)+" ")]),_c("div",[_vm.showTransitionButtons?_c("TransitionButtons",{attrs:{employeeID:_vm.employeeID,allowDateTimeSelector:_vm.allowDateTimeSelector,showAllButtons:!0}}):_vm._e()],1)]),_c("div",{staticClass:"attendance-list-body"},[_c("vue-cal",{ref:"vue-cal-component",attrs:{activeView:"month","disable-views":["week","year","years","day"],hideViewSelector:!0,hideTitleBar:!0,minDate:new Date(this.timelineRange.from),maxDate:new Date(this.timelineRange.to),startWeekOnSunday:!0,small:!0,"events-on-month-view":"short",events:_vm.getAttendanceforCal()},scopedSlots:_vm._u([{key:"event",fn:function(ref){var event=ref.event;return[_c("div",{staticClass:"vuecal__event-title",style:{"background-color":event.background}},[_c("div",[_vm._v(_vm._s(event.title))]),_c("div",[_c("fc-icon",{attrs:{group:"dsm",name:"clock",size:"8",color:"#324056"}}),_c("span",{staticStyle:{"font-size":"0.8em","margin-left":"3px"}},[_vm._v(_vm._s(event.workingHours))])],1)])]}}])})],1)])},CalendarViewvue_type_template_id_4eac54ac_scoped_true_staticRenderFns=[],vue_cal_es=(__webpack_require__(450886),__webpack_require__(689730),__webpack_require__(676894)),CalendarViewvue_type_script_lang_js={name:"CalendarView",extends:AttendanceView,components:{VueCal:vue_cal_es/* default */.Z},data:function(){return{}},watch:{timelineRange:{handler:function(){this.fetchCurrentEmployeeAttendance(),this.$refs["vue-cal-component"].switchView("day",new Date(this.timelineRange.from))},deep:!0}},methods:{getAttendanceforCal:function(){var _this=this;return this.attendance.list.map((function(a){return{title:_this.getDisplayNameForStatus(a.status),start:_this.formatDate(a.day),end:_this.formatDate(a.day),background:a.shift.colorCode,workingHours:_this.msToHoursAndMinutes(a.workingHours),class:"cal-entry-pill"}}))},formatDate:function(epoch){var date=new Date(epoch),datestring=date.getFullYear()+"-"+("0"+(date.getMonth()+1)).slice(-2)+"-"+("0"+date.getDate()).slice(-2)+" 12:00";return datestring}}},attendance_CalendarViewvue_type_script_lang_js=CalendarViewvue_type_script_lang_js,CalendarView_component=(0,componentNormalizer/* default */.Z)(attendance_CalendarViewvue_type_script_lang_js,CalendarViewvue_type_template_id_4eac54ac_scoped_true_render,CalendarViewvue_type_template_id_4eac54ac_scoped_true_staticRenderFns,!1,null,"4eac54ac",null)
/* harmony default export */,CalendarView=CalendarView_component.exports,EmployeeSnippetViewvue_type_template_id_59331f0a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showSnippetViewLoader?_c("spinner",{attrs:{show:_vm.showSnippetViewLoader,size:"100"}}):_c("div",{staticClass:"list-view-container"},[_vm.showEmployeeColumn?_c("div",{staticClass:"employee-list-container"},[_vm.showSearchBar?_c("div",{staticClass:"p5",staticStyle:{"margin-top":"3px","min-height":"58px"}},[_c("FLookupField",{attrs:{model:_vm.employeesToFilter,field:_vm.employeeField,hideLookupIcon:!0},on:{"update:model":[function($event){_vm.employeesToFilter=$event},_vm.updateEmployeeFilter]}})],1):_c("div",{staticClass:"employee-list-head"},[_c("div",[_vm._v(_vm._s(_vm.$t("common.shift_planner.employees")))]),_c("div",[_c("fc-icon",{staticClass:"search-icon",attrs:{group:"default",name:"search"},on:{click:_vm.toggleSearchBar}}),_c("fc-icon",{staticClass:"sort-icon",attrs:{group:"default",name:"sort"},on:{click:_vm.toggleSortOrderAndFetchEmployees}})],1)]),_c("div",{staticClass:"employee-list-body"},_vm._l(_vm.employee.list,(function(p){return _c("div",{key:p.id,staticClass:"employee-list-item",class:{active:_vm.isEmployeeSelected(p)},on:{click:function($event){return _vm.setCurrentEmployee(p)}}},[_vm._v(" "+_vm._s(p.name)+" ")])})),0),_c("div",{staticClass:"employee-list-foot"},[_c("Pagination",{attrs:{currentPage:_vm.pagination.current,total:_vm.employee.count,perPage:_vm.pagination.perPage},on:{"update:currentPage":[function($event){return _vm.$set(_vm.pagination,"current",$event)},_vm.handleCurrentPageChange],"update:current-page":function($event){return _vm.$set(_vm.pagination,"current",$event)}}})],1)]):_vm._e(),_c("div",{staticClass:"slot-list-container"},[_vm._t("default")],2)])],1)},EmployeeSnippetViewvue_type_template_id_59331f0a_scoped_true_staticRenderFns=[],objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(648324),__webpack_require__(990260)),WidgetPagination=__webpack_require__(806339),vuex_esm=__webpack_require__(420629),EmployeeSnippetViewvue_type_script_lang_js={name:"EmployeeSnippetView",components:{Pagination:WidgetPagination/* default */.Z,FLookupField:FLookupField/* default */.Z},props:{myAttendance:{datatype:Boolean,default:!1}},created:function(){this.loadEmployee()},watch:{myAttendance:{handler:function(){this.loadEmployee()}}},data:function(){return{pagination:{current:1,perPage:10},showSnippetViewLoader:!1,showSearchBar:!1,employeesToFilter:[],employeeField:{isDataLoading:!1,lookupModuleName:"employee",field:{lookupModule:{name:"employee",displayName:"Employee"}},filters:{},multiple:!0},employee:{current:null,list:[],sortType:"asc",count:0}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{showEmployeeColumn:function(){return!this.myAttendance}}),methods:{loadEmployee:function(){this.myAttendance?this.fetchCurrentUser():this.fetchCurrentPageEmployee()},isEmployeeSelected:function(p){var _this$employee,selectedEmployeeID=null===(_this$employee=this.employee)||void 0===_this$employee||null===(_this$employee=_this$employee.current)||void 0===_this$employee?void 0:_this$employee.id;return selectedEmployeeID&&p.id===selectedEmployeeID},toggleSearchBar:function(){this.showSearchBar=!this.showSearchBar},toggleSortOrderAndFetchEmployees:function(){this.toggleSortOrder(),this.fetchCurrentPageEmployee()},toggleSortOrder:function(){"asc"===this.employee.sortType?this.employee.sortType="desc":this.employee.sortType="asc"},fetchCurrentPageEmployee:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.fetchEmployees(_this.pagination.current,_this.pagination.perPage,_this.employee.sortType);case 2:_this.employee.list.length>0&&_this.setCurrentEmployee(_this.employee.list[0]);case 3:case"end":return _context.stop()}}),_callee)})))()},fetchCurrentUser:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this2$getCurrentUser,peopleId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2$getCurrentUser=_this2.getCurrentUser(),peopleId=_this2$getCurrentUser.peopleId,_context2.next=3,_this2.fetchEmployee(peopleId);case 3:_this2.employee.list.length>0&&_this2.setCurrentEmployee(_this2.employee.list[0]);case 4:case"end":return _context2.stop()}}),_callee2)})))()},fetchEmployee:function(employeeID){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var route,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.showSnippetViewLoader=!0,route="/v3/modules/employee/".concat(employeeID),_context3.next=4,api/* API */.bl.get(route);case 4:_yield$API$get=_context3.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?error.message||_this3.$t("common._common.error_occured"):_this3.employee.list=[data.employee],_this3.showSnippetViewLoader=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},fetchEmployees:function(currentPage,perPage,sortType){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var route,filter,_yield$API$get2,error,data,meta,_meta$pagination;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(currentPage&&perPage&&sortType){_context4.next=2;break}return _context4.abrupt("return");case 2:return _this4.showSnippetViewLoader=!0,route="/v3/modules/data/list?moduleName=employee&withCount=true&orderBy=name&orderType=".concat(sortType,"&page=").concat(currentPage,"&perPage=").concat(perPage),(0,validation/* isEmpty */.xb)(_this4.employeesToFilter)?_this4.showSearchBar=!1:(filter={id:{operatorId:36,value:_this4.employeesToFilter.map((function(e){return String(e)}))}},route+="&filters=".concat(encodeURIComponent(JSON.stringify(filter)))),_context4.next=7,api/* API */.bl.get(route);case 7:_yield$API$get2=_context4.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,meta=_yield$API$get2.meta,error?error.message||_this4.$t("common._common.error_occured"):(_this4.employee.list=data.employee,_this4.employee.count=(null===meta||void 0===meta||null===(_meta$pagination=meta.pagination)||void 0===_meta$pagination?void 0:_meta$pagination.totalCount)||0),_this4.showSnippetViewLoader=!1;case 13:case"end":return _context4.stop()}}),_callee4)})))()},handleCurrentPageChange:function(){this.fetchCurrentPageEmployee()},setCurrentEmployee:function(employee){this.employee.current=employee,this.$emit("setEmployee",employee)},updateEmployeeFilter:function(employees){this.employeesToFilter=employees,this.fetchCurrentPageEmployee()}}},attendance_EmployeeSnippetViewvue_type_script_lang_js=EmployeeSnippetViewvue_type_script_lang_js,EmployeeSnippetView_component=(0,componentNormalizer/* default */.Z)(attendance_EmployeeSnippetViewvue_type_script_lang_js,EmployeeSnippetViewvue_type_template_id_59331f0a_scoped_true_render,EmployeeSnippetViewvue_type_template_id_59331f0a_scoped_true_staticRenderFns,!1,null,"59331f0a",null)
/* harmony default export */,EmployeeSnippetView=EmployeeSnippetView_component.exports,AttendanceListvue_type_script_lang_js={name:"AttendanceList",props:{myAttendance:{type:Boolean,default:!1}},components:{AttendanceTopBar:AttendanceTopBar,ListView:ListView,CalendarView:CalendarView,EmployeeSnippetView:EmployeeSnippetView},created:function(){this.initDefaults()},data:function(){return{timelineRange:null,viewMode:null,selectedEmployee:null}},computed:{isCalendarViewSelected:function(){return Boolean(this.viewMode&&"Calendar View"===this.viewMode)},selectedEmployeeIsSet:function(){return Boolean(null!=this.selectedEmployee)}},watch:{myAttendance:{handler:function(){this.selectedEmployee=null}}},methods:{initDefaults:function(){this.viewMode="Calendar View";var date=new Date,from=new Date(date.getFullYear(),date.getMonth(),1).valueOf(),to=new Date(date.getFullYear(),date.getMonth()+1,0).valueOf();this.timelineRange={from:from,to:to}},updateTimelineRange:function(value){this.timelineRange=value},updateViewMode:function(value){this.viewMode=value},setEmployee:function(value){this.selectedEmployee=value}}},attendance_AttendanceListvue_type_script_lang_js=AttendanceListvue_type_script_lang_js,AttendanceList_component=(0,componentNormalizer/* default */.Z)(attendance_AttendanceListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AttendanceList=AttendanceList_component.exports},
/***/849561:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return peopleMixin}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.pad-start.js
__webpack_require__(108472),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(634338);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var render,staticRenderFns,moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),peopleMixinvue_type_script_lang_js={methods:{getTodayDate:function(){return(new Date).setHours(0,0,0,0).valueOf()},computeSlotEndDay:function(epoch,span){return moment_timezone_default()(epoch).add(span-1,"days").valueOf()},readableTime:function(secondsOfDay){secondsOfDay||(secondsOfDay=0);var millisecondsOfDay=1e3*secondsOfDay;return this.formatDateWithOnlyTime((new Date).setHours(0,0,0,0)+millisecondsOfDay)},prettifyEmpty:function(value){return value||"---"},formatTime:function(t){return t.toString().padStart(2,"0")},secondsToHoursAndMinutes:function(seconds){if(!seconds)return"---";var h=Math.floor(seconds/3600),m=Math.floor(seconds%3600/60);return"".concat(h,"h : ").concat(m,"m")},msToHoursAndMinutes:function(ms){return ms?this.secondsToHoursAndMinutes(ms/1e3):"---"},formatDate:function(date,exclTime,onlyTime){return date?this.$options.filters.formatDate(date,exclTime,onlyTime):"---"},formatDateWithoutTime:function(date){return this.formatDate(date,!0,!1)},formatDateWithOnlyTime:function(date){return this.formatDate(date,!1,!0)},getDisplayNameForTransition:function(name){switch(name){case"CHECK_IN":return"Check-In";case"CHECK_OUT":return"Check-Out";case"RESUME_WORK":return"Resume Work";case"BREAK":return"Break";default:return"---"}},getDisplayNameForStatus:function(name){switch(name){case"ABSENT":return"Absent";case"PRESENT":return"Present";case"WEEKLY_OFF":return"Weekly Off";case"LEAVE":return"Leave";default:return"---"}}}},peopleV2_peopleMixinvue_type_script_lang_js=peopleMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(peopleV2_peopleMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,peopleMixin=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/17653.js.map