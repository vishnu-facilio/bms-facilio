(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[13803],{
/***/826127:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Space}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Space.vue?vue&type=template&id=5d05009e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.space?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_vm.showSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{attrs:{trigger:"click",height:"120px",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.photos,(function(photo,index){return photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:photo.url}})]):_vm._e()})),1)],1):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.space.name))])])]):_vm._e(),_vm.showUpload?_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{list:_vm.photos,module:"basespacephotos",record:_vm.space}})],1):_vm._e()])]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(350367)),Spacevue_type_script_lang_js={props:["size","space","name","hovercard"],data:function(){return{avatarUrl:this.getDefaultAvatar(),sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.space.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["xxxlg","shuge","huge","xhuge"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl(),this.space.avatarUrl&&(this.avatarUrl=this.space.avatarUrl)},computed:{showSlide:function(){if(this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},watch:{space:function(){this.avatarUrl=this.getDefaultAvatar(),this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){if(this.sliderEnabledSize.indexOf(this.size)>=0){var self=this;self.photos=[],this.space.id>0&&(self.photosLoading=!0,self.$http.get("/photos/get?module=basespacephotos&parentId="+this.space.id).then((function(response){if(self.photos=response.data.photos||[],self.photosLoading=!1,self.photos.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.photos);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var photo=_step2.value;if(photo.url){self.avatarUrl=photo.url;break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}})))}this.space.avatarUrl?this.avatarUrl=this.space.avatarUrl:(this.avatarUrl=this.getDefaultAvatar(),this.space.avatarUrl=this.avatarUrl)},getDefaultAvatar:function(space){var avatarUrl="";if("Campus"===this.space.type||"SITE"===this.space.spaceTypeEnum)avatarUrl=__webpack_require__(555751);else if("Building"===this.space.type||"BUILDING"===this.space.spaceTypeEnum)avatarUrl=__webpack_require__(188742);else if("Space"===this.space.type||"SPACE"===this.space.spaceTypeEnum){var subCategory="";avatarUrl=__webpack_require__("Cafeteria"===subCategory?73209:"Toilet"===subCategory?924353:"Dining"===subCategory?351129:398596)}else avatarUrl=__webpack_require__(188742);return avatarUrl},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Spacevue_type_script_lang_js=Spacevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Spacevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Space=component.exports},
/***/681121:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetReadingValue}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/readings/SetReadingValue.vue?vue&type=template&id=f05d1da2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-dialog",{attrs:{title:_vm.getTitle,visible:!0,loading:_vm.isSaving,stayOnSave:!0,record:_vm.record,width:_vm.$mobile?"90%":"30%"},on:{save:_vm.saveReading,close:_vm.closeDialog}},[_vm.readingObj?_c("div",{staticClass:"pB30 mT10",attrs:{slot:"content"},slot:"content"},[_c("div",{staticClass:"mb5"},[_vm._v(_vm._s(_vm.getSubTitle))]),_c("div",{staticStyle:{display:"flex"}},[_vm.isBooleanField(_vm.readingObj.field)?_c("div",{staticClass:"pT10 width60"},[_vm._v(" "+_vm._s(_vm.readingObj.field.falseVal||"False")+" "),_c("el-switch",{staticClass:"pL10 pR10",attrs:{disabled:_vm.isNullValueSelected},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}}),_vm._v(" "+_vm._s(_vm.readingObj.field.trueVal||"True")+" ")],1):_vm.isEnumField(_vm.readingObj.field)?_c("div",{staticClass:"width80"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width90",attrs:{disabled:_vm.isNullValueSelected,filterable:"","collapse-tags":""},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}},_vm._l(_vm.fieldOptions,(function(item,index){return _c("el-option",{key:index,attrs:{label:item.label,value:item.value}})})),1)],1):_c("div",{staticClass:"width80"},[_c("el-input",{staticClass:"fc-input-full-border2 control-action-reading-field",staticStyle:{width:"90%","text-align":"left"},attrs:{disabled:_vm.isNullValueSelected,"controls-position":"right",type:_vm.fieldType},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}},[_vm.readingObj.field.unit?_c("template",{slot:"append"},[_vm._v(_vm._s(_vm.readingObj.field.unit)+" ")]):_vm._e()],2)],1),_c("div",{staticStyle:{"padding-top":"10px"}},[_c("el-checkbox",{on:{change:function($event){return _vm.changeValue()}},model:{value:_vm.isNullValueSelected,callback:function($$v){_vm.isNullValueSelected=$$v},expression:"isNullValueSelected"}},[_vm._v("null")])],1)])]):_c("div",{staticClass:"pB40 mT10"},[_vm._v("Loading....")])])},staticRenderFns=[],FDialogNew=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(212826),__webpack_require__(436756)),validation=__webpack_require__(990260),utility_methods=__webpack_require__(555005),utils_field=__webpack_require__(815872),SetReadingValuevue_type_script_lang_js={props:["reading","saveAction","closeAction","recordId","recordName","fieldId","groupId","pointId"],components:{FDialog:FDialogNew/* default */.Z},data:function(){return{readingObj:null,isSaving:!1,record:null,recordLoading:!1,isNullValueSelected:!1}},created:function(){var _this=this;this.isBooleanField=utils_field/* isBooleanField */.Mw,this.isEnumField=utils_field/* isEnumField */.Ri,this.reading?this.readingObj=this.reading:this.groupId?this.$http.get("/v2/controlAction/getControlGroupMeta?controlGroupId="+this.groupId).then((function(response){response.data.result&&response.data.result.controlActionGroup&&(_this.readingObj=response.data.result.controlActionGroup)})):this.pointId?this.$http.get("/v2/controlAction/getControllablePoints").then((function(response){response.data.result&&response.data.result.controllablePoints&&response.data.result.controllablePoints.length&&(_this.readingObj=response.data.result.controllablePoints.find((function(rt){return rt.id===_this.pointId})))})):this.$util.loadLatestReading(this.recordId,!1,!1,null,this.fieldId).then((function(fields){fields&&fields.length&&(_this.readingObj=fields[0])}))},mounted:function(){var _this2=this;this.recordId&&(this.recordLoading=!0,this.$util.getAssetById(this.recordId).then((function(assetObj){_this2.record=assetObj,_this2.recordLoading=!1})))},computed:{fieldOptions:function(){return this.readingObj?(0,utility_methods/* constructFieldOptions */.aE)(this.readingObj.field.enumMap||[]):[]},fieldType:function(){var readingObj=this.readingObj,_ref=readingObj||{},field=_ref.field;return(0,validation/* isEmpty */.xb)(field)||!(0,utils_field/* isNumberField */.Z2)(field)&&!(0,utils_field/* isDecimalField */.No)(field)?"text":"number"},getTitle:function(){return this.readingObj?this.recordLoading?"Loading...":this.recordId&&this.record?this.record.name:this.readingObj.field.displayName:"Loading..."},getSubTitle:function(){return this.readingObj?this.recordLoading?"Loading...":this.recordId&&this.record?this.readingObj.field.displayName:"Set Reading":"Loading..."}},methods:{validate:function(){return(0,validation/* isEmpty */.xb)(this.readingObj.value)?(this.error=!0,this.errorMessage="Please enter a value for the reading"):(this.error=!1,this.errorMessage=""),!this.error},saveReading:function(){var _this$$util,_this3=this;if(this.isNullValueSelected||this.validate()){var newValue;this.isSaving=!0,newValue=null==this.readingObj.value?null:this.readingObj.value.toString();var data=[this.recordId,this.readingObj.field.fieldId,
// this.readingObj.value.toString(),
newValue,this.recordName,this.readingObj.field.displayName,this.groupId];(_this$$util=this.$util).setReadingValue.apply(_this$$util,data).then((function(){_this3.saveAction(_this3.readingObj),_this3.isSaving=!1})).catch((function(){_this3.isSaving=!1}))}},closeDialog:function(){this.closeAction(this.readingObj)},changeValue:function(){this.readingObj.value=null}}},readings_SetReadingValuevue_type_script_lang_js=SetReadingValuevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(readings_SetReadingValuevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetReadingValue=component.exports},
/***/258022:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanLeagend}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/floorPlan/components/FloorPlanLeagend.vue?vue&type=template&id=3c3ee7a2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fp-leagend-container"},[_c("div",{staticClass:"fp-leagend-body"},_vm._l(_vm.leagends,(function(leagend,index){return _c("div",{key:index,staticClass:"row p10 pointer fp-leagend-row",class:{inactive:!leagend.active,active:leagend.active},on:{mouseover:function($event){return _vm.action(leagend)},mouseout:function($event){return _vm.action("CLEAR")},click:function($event){return _vm.setActive(leagend)}}},[_c("div",{staticClass:"col-2"},[_c("div",{staticClass:"fc-leagend-icon",style:{background:leagend.color}})]),_c("div",{staticClass:"col-10"},[_vm._v(_vm._s(leagend.name))])])})),0)])},staticRenderFns=[],FloorPlanLeagendvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(186466),__webpack_require__(425728),{props:["floorPlan","mappedSpaceId","controlCategoryList","leagend"],data:function(){return{spaceControllableCategoriesMap:null,controlTypes:[],leagends:[],options:[{value:"CONTROL",label:"Control Types"},{value:"SPACE",label:"Space Types"},{value:"NONE",label:"None"}],value:""}},watch:{leagend:{handler:function(newVal,oldVal){this.handleLeagnd()},deep:!0}},methods:{action:function(data){this.$emit("action",data)},type:function(){this.$emit("type",this.value)},setActive:function(data){data.active=!data.active,this.$emit("active",data)},getColor:function(){return"#"+Math.random().toString(16).substr(2,6)},setLeagend:function(){var _this=this;this.leagends=[],this.controlTypes.forEach((function(rt){var leagend={name:rt,color:_this.getColor(),active:!0,type:"CONTROL"};_this.leagends.push(leagend)}))},handleLeagnd:function(){this.leagends=[],"CONTROL"===this.leagend.active&&this.getFloorControlCategory(),this.type()},getFloorControlCategory:function(){var _this2=this,id=this.floorPlan.id,params={floorId:id,spaceIncludeIds:this.mappedSpaceId};return this.$http.post("/v2/controlAction/getControllableCategories",params).then((function(_ref){var data=_ref.data;0===data.responseCode&&(_this2.spaceControllableCategoriesMap=data.result.spaceControllableCategoriesMap,_this2.findControlTypes())}))},findControlTypes:function(){var _this3=this;this.controlTypes=[];var self=this,name=null;Object.values(this.spaceControllableCategoriesMap).forEach((function(rt){Object.values(rt).forEach((function(rx){name=_this3.controlCategoryList.find((function(rl){return rl.categoryId===rx.controlType}))._name,-1===self.controlTypes.indexOf(name)&&self.controlTypes.push(name)}))})),this.setLeagend()}}}),components_FloorPlanLeagendvue_type_script_lang_js=FloorPlanLeagendvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanLeagendvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanLeagend=component.exports},
/***/425578:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanPointerDetailPopup}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/floorPlan/components/FloorPlanPointerDetailPopup.vue?vue&type=template&id=0643e40e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,title:"SELECT THE FLOOR","custom-class":"fc-dialog-form setup-dialog-right setup-dialog25 setup-dialog show-right-dialog","before-close":_vm.closeDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_vm.employee&&_vm.data?_c("div",[_c("div",{staticClass:"emp-header"},[_c("img",{staticClass:"fc-custom-logo",attrs:{src:__webpack_require__(620156)}}),_c("div",{staticStyle:{"padding-top":"10px","font-size":"15px","padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.data.singleline_1)+" ")]),_c("div",{staticClass:"emp-close pull-right f16 pointer",on:{click:_vm.closeDialog}},[_c("i",{staticClass:"el-icon-close f20",staticStyle:{"font-weight":"600"}})])])]):_vm._e(),_c("div",{staticClass:"emp-content"},[_c("div",{staticClass:"fc-input-label-txt header"},[_vm._v("Details")]),_c("div",{staticClass:"mb5"},[_vm._v(_vm._s(_vm.employee.name))]),_c("div",[_vm._v(_vm._s(_vm.data.singleline))])]),_c("div",{staticClass:"emp-content"},[_c("div",{staticClass:"fc-input-label-txt header"},[_vm._v("Department")]),_c("div",{staticClass:"mb5"},[_vm._v(_vm._s(_vm.getFieldData("picklist")))])]),_c("div",{staticClass:"emp-content"},[_c("div",{staticClass:"fc-input-label-txt header"},[_vm._v("Space")]),_c("div",{staticClass:"mb5"},[_vm._v(" "+_vm._s(_vm.data.space&&_vm.data.space.name?_vm.data.space.name:"---")+" ")])])])},staticRenderFns=[],FloorPlanPointerDetailPopupvue_type_script_lang_js=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(212826),__webpack_require__(32284),{props:["visibility","element","floorPlan","mappedSpaceId"],data:function(){return{employee:null,fields:[]}},computed:{employeeId:function(){var element=this.element,target=element.target;return target&&target.floorplan&&target.floorplan.employeeId?target.floorplan.employeeId:null},data:function(){var data=this.employee.data;return data||null}},created:function(){this.getFields()},mounted:function(){this.getEmployeeDetails()},methods:{getFields:function(){var _this=this,moduleName="custom_deskmanager",url="/v2/filter/advanced/fields/".concat(moduleName);this.$http.get(url).then((function(response){response.data&&response.data.result&&response.data.result.fields&&(_this.fields=response.data.result.fields)}))},getFieldData:function(fieldName){var _this2=this;if(fieldName){var fieldobj=this.fields.find((function(rt){return rt.name===fieldName}));if("picklist"===fieldName){var options=fieldobj.options,object=options.find((function(rt){return rt.value===_this2.data["picklist"].toString()}));return object.label}}},getEmployeeDetails:function(){var _this3=this,url="v2/module/data/".concat(this.employeeId,"?moduleName=custom_deskmanager");this.$http.get(url).then((function(response){response.data&&response.data.result&&response.data.result.moduleData&&(_this3.employee=response.data.result.moduleData)}))},closeDialog:function(){this.$emit("update:visibility",!1),this.$emit("close",!1)}}}),components_FloorPlanPointerDetailPopupvue_type_script_lang_js=FloorPlanPointerDetailPopupvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanPointerDetailPopupvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanPointerDetailPopup=component.exports},
/***/63706:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanViewerSettings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/floorPlan/components/FloorPlanViewerSettings.vue?vue&type=template&id=bbd79dec
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fp-viwer-settings"},[_vm.refresh?_c("el-button",{staticClass:"p12",attrs:{icon:"el-icon-refresh",size:"small",plain:""},on:{click:function($event){return _vm.action("resetPanAndZoom")}}}):_vm._e(),_c("el-popover",{attrs:{placement:"bottom",title:"Views",width:"200",trigger:"click"},model:{value:_vm.popovervisible,callback:function($$v){_vm.popovervisible=$$v},expression:"popovervisible"}},[_c("div",{staticClass:"fp-leagend-header-settings"},[_c("el-select",{staticClass:"fc-input-select fc-input-full-border2 width100",attrs:{placeholder:"Select"},on:{change:function($event){return _vm.action("viewMode",_vm.view)}},model:{value:_vm.view,callback:function($$v){_vm.view=$$v},expression:"view"}},[_vm._l(_vm.viewModes,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),343===_vm.$account.org.id||1===_vm.$account.org.id?_c("el-option",{key:213,attrs:{label:"VAV readings",value:"vavreadings"}}):_vm._e(),410===_vm.$account.org.id?_c("el-option",{key:213,attrs:{label:"Custom script",value:"customscript"}}):_vm._e()],2)],1),"readings"===_vm.view?_c("div",{staticClass:"fp-leagend-header-settings"},[_c("p",{staticClass:"fc-input-label-txt pB5 pT5"},[_vm._v("Asset Category")]),_c("el-select",{staticClass:"fc-input-select fc-input-full-border2 width100",attrs:{filterable:"",placeholder:"Select"},on:{change:function($event){return _vm.loadAssetFields()}},model:{value:_vm.heatmapData.assetCategoryId,callback:function($$v){_vm.$set(_vm.heatmapData,"assetCategoryId",$$v)},expression:"heatmapData.assetCategoryId"}},_vm._l(_vm.assetCategory,(function(category,index){return _c("el-option",{key:index,attrs:{label:category.name,value:category.id}})})),1)],1):_vm._e(),"readings"===_vm.view?_c("div",{staticClass:"fp-leagend-header-settings"},[_c("p",{staticClass:"fc-input-label-txt pB5 pT5"},[_vm._v("Asset Field Name")]),_c("el-select",{staticClass:"fc-input-select fc-input-full-border2 width100",attrs:{filterable:"",placeholder:"Select"},on:{change:function($event){return _vm.setReadingFieldModuleName()}},model:{value:_vm.heatmapData.readingFieldName,callback:function($$v){_vm.$set(_vm.heatmapData,"readingFieldName",$$v)},expression:"heatmapData.readingFieldName"}},_vm._l(_vm.assetFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.name}})})),1)],1):_vm._e(),_vm.$mobile||!_vm.viewMode||_vm.hideSettings?_vm._e():_c("el-button",{staticClass:"p12",attrs:{slot:"reference",icon:"el-icon-setting",size:"small",plain:""},slot:"reference"})],1),_c("el-button-group",{staticClass:"fb-settings-block"},[_c("el-button",{attrs:{icon:"el-icon-plus",size:"small",plain:""},on:{click:function($event){return _vm.action("zoomIn")}}}),_c("el-button",{attrs:{icon:"el-icon-minus",size:"small",plain:""},on:{click:function($event){return _vm.action("zoomOut")}}})],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(420629)),FloorPlanViewerSettingsvue_type_script_lang_js={props:["refresh","viewMode","viewParams","hideSettings"],data:function(){return{popovervisible:!1,heatmapData:{assetCategoryId:null,readingFieldName:null,readingModule:null},assetFields:[],view:"default",viewModes:[{label:"Default",value:"default"},{label:"Maintenance",value:"maintenance"},{label:"Control points",value:"control_points"},{label:"Readings",value:"readings"}]}},created:function(){this.$store.dispatch("loadAssetCategory")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),watch:{viewMode:{handler:function(newVal,oldVal){newVal!==oldVal&&(this.view=this.viewMode)}}},mounted:function(){this.viewMode&&(this.view=this.viewMode),this.viewParams&&this.viewParams.assetCategoryId&&(this.heatmapData=this.viewParams,this.loadAssetFields(!0))},methods:{refreshPopover:function(){var _this=this;this.heatmapData={assetCategoryId:null,readingFieldName:null,readingModule:null},this.popovervisible=!1,setTimeout((function(){_this.popovervisible=!0}),100)},openpopover:function(){this.popovervisible=!this.popovervisible},action:function(_action,data){"viewMode"===_action&&"readings"!==data?this.$emit("action",_action,data):"viewMode"===_action?this.refreshPopover():this.$emit("action",_action)},setReadingFieldModuleName:function(){if(this.heatmapData.readingFieldName){var fieldname=this.heatmapData.readingFieldName,fieldobj=this.assetFields.find((function(rt){return rt.name===fieldname}));this.heatmapData.readingModule=fieldobj.module.name,this.$emit("action","viewMode","readings",this.heatmapData)}},loadAssetFields:function(edit){var _this2=this;edit||(this.heatmapData.readingFieldName=null),this.$util.loadAssetReadingFields(-1,this.heatmapData.assetCategoryId).then((function(fields){_this2.assetFields=fields}))}}},components_FloorPlanViewerSettingsvue_type_script_lang_js=FloorPlanViewerSettingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanViewerSettingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanViewerSettings=component.exports},
/***/450894:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanViwerTools}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/floorPlan/components/FloorPlanViwerTools.vue?vue&type=template&id=3901d27e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floorplan-builder-toolbar"},[_vm._m(0),_vm.flooplans&&_vm.flooplans.length&&_vm.flooplans.length>1?_c("div",{staticClass:"fR"},[_c("el-select",{staticClass:"fc-input-select fc-input-full-border2 fc-input-full-border0",attrs:{placeholder:"Select"},on:{change:function($event){return _vm.loadFloorPlan()}},model:{value:_vm.selectedFloorplanId,callback:function($$v){_vm.selectedFloorplanId=$$v},expression:"selectedFloorplanId"}},_vm._l(_vm.flooplans,(function(floorplan){return _c("el-option",{key:floorplan.id,attrs:{label:floorplan.name,value:floorplan.id}})})),1)],1):_vm._e()])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fL"},[_c("div",{staticClass:"floorplan-viewtools-header"},[_vm._v("Floor Plan")])])}],FloorPlanViwerToolsvue_type_script_lang_js={props:["leagend","flooplans","floorPlan","floorPlanId"],data:function(){return{selectedFloorplanId:null,options:[{value:"CONTROL",label:"Control Types"},{value:"SPACE",label:"Space Types"},{value:"NONE",label:"None"}]}},watch:{floorPlanId:{handler:function(newVal,oldVal){this.selectedFloorplanId=this.floorPlanId}}},mounted:function(){this.floorPlanId&&(this.selectedFloorplanId=this.floorPlanId)},methods:{selectLayer:function(action){},loadFloorPlan:function(){this.$emit("OnchangeFloorPlan",this.selectedFloorplanId)}}},components_FloorPlanViwerToolsvue_type_script_lang_js=FloorPlanViwerToolsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanViwerToolsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanViwerTools=component.exports},
/***/475750:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceDetailsPopup}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/floorPlan/components/SpaceDetailsPopup.vue?vue&type=template&id=08e924a2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.selectedSpaceInfo&&_vm.selectedSpaceInfo.space?_c("div",{staticClass:"fplan-space-info-card",style:{top:_vm.selectedSpaceInfo.top+"px",left:_vm.selectedSpaceInfo.left+"px"}},[_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"space-popver-colse-container",on:{click:function($event){return _vm.close()}}},[_c("i",{staticClass:"el-icon-close pointer"})]),_c("el-row",[_c("el-col",{staticClass:"mT20",attrs:{span:24}},[_c("space-avatar",{attrs:{space:_vm.selectedSpaceInfo.space,name:"false",size:"xxxlg",hovercard:!1}})],1),[_c("el-col",{staticClass:"space-title",attrs:{span:24}},[_vm._v(_vm._s(_vm.selectedSpaceInfo.name))]),_vm.selectedSpaceInfo.space.maxOccupancy?_c("el-col",{staticClass:"space-subtitle",attrs:{span:24}},[_vm._v("holds "+_vm._s(_vm.selectedSpaceInfo.space.maxOccupancy>1?_vm.selectedSpaceInfo.space.maxOccupancy:0)+" people")]):_vm._e(),_c("el-col",{staticClass:"mT30",attrs:{span:24}},[[_c("button",{staticClass:"footer-btn footer-btn-secondary el-col el-col-24",attrs:{type:"button"},on:{click:function($event){return _vm.openSpace(_vm.selectedSpaceInfo.space)}}},[_c("span",[_vm._v("View Details")])])]],2)]],2)],1)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Space=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(826127)),router=__webpack_require__(329435),validation=__webpack_require__(990260),SpaceDetailsPopupvue_type_script_lang_js={props:["spaceList","visibility","element","floorPlan","area","canvasMeta"],components:{SpaceAvatar:Space/* default */.Z},data:function(){return{selectedSpaceInfo:null}},mounted:function(){this.initData()},watch:{"element.target":{handler:function(newVal,oldVal){newVal!==oldVal&&this.initData()},deep:!0}},methods:{initData:function(){if(this.element&&this.element.target&&this.element.target.floorplan&&this.element.target.floorplan.spaceId){this.element.target;var event=this.element.e,floorplan=this.element.target.floorplan,spaceId=floorplan.spaceId,spaceObj=this.spaceList.find((function(rt){return rt.id===spaceId})),metaObj=this.getMetaObj(event,this.canvasMeta);this.selectedSpaceInfo=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},spaceObj),metaObj)}else this.selectedSpaceInfo=null},getMetaObj:function(event,canvasMeta){var popupHeight=240,popupWidth=250,height=canvasMeta.height,width=canvasMeta.width,calY=event.offsetY+popupHeight,calX=event.offsetX+popupWidth;if(calY>height&&calX>width){var x=event.offsetX-popupWidth,y=event.offsetY-popupHeight;return y<1&&(y=10),{top:y,left:x}}if(calY>height&&calX<width){var _x=event.offsetX-popupWidth,_y=event.offsetY-popupHeight;return _y<1&&(_y=10),_x<1&&(_x=10),{top:_y,left:_x}}return{top:event.offsetY,left:event.offsetX-150}},close:function(){this.$emit("close")},findRoute:function(){if((0,router/* isWebTabsEnabled */.tj)()){var tabType=router/* tabTypes */.VF.CUSTOM,config={type:"portfolio"},route=(0,router/* findRouteForTab */.OD)(tabType,{config:config})||{};return(0,validation/* isEmpty */.xb)(route)?null:this.$router.resolve({name:route.name}).href}return"/app/home/portfolio"},openSpace:function(space){var parentPath=this.findRoute();parentPath&&this.$router.push({path:"".concat(parentPath,"/site/").concat(this.floorPlan.siteId,"/space/").concat(space.id)}),this.selectedSpaceInfo=null}}},components_SpaceDetailsPopupvue_type_script_lang_js=SpaceDetailsPopupvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceDetailsPopupvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceDetailsPopup=component.exports},
/***/494183:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanLeagendActions}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js
__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(232777);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var render,staticRenderFns,Common=__webpack_require__(54278),OMITTED_OBJECTS=["space_zone_group","floor_plan_image"],FloorPlanLeagendActionsvue_type_script_lang_js={methods:{handleLeagend:function(data){"CONTROL"===data.type?this.showControlType(data.name):"CLEAR"===data&&this.clearType()},handleLeagendActive:function(data){"CONTROL"===data.type?this.visibleMarkerTypes(data):"CLEAR"===data&&this.clearFilter()},handleleagendType:function(type){"CONTROL"===type?this.showControlMarkers():"NONE"===type?this.clearFilter():"SPACE_TYPE"===type&&this.showSpaceTypes()},clearFilter:function(){this.canvas.getObjects().forEach((function(obj){(0,Common/* getElement */.sb)(obj)&&-1===OMITTED_OBJECTS.indexOf(obj.floorplan.type)&&(obj.opacity=1,obj.visible=1)})),this.canvas.renderAll()},showSpaceTypes:function(){this.canvas.getObjects().forEach((function(obj){if((0,Common/* getElement */.sb)(obj)&&(0,Common/* isElement */.kK)(obj,"space_zone_group"))obj.floorplan})),this.canvas.renderAll()},visibleMarkerTypes:function(data){var name=data.name,active=data.active;this.canvas.getObjects().forEach((function(obj){if((0,Common/* getElement */.sb)(obj)){var floorplan=obj.floorplan;floorplan.markerType&&floorplan.markerType===name&&!floorplan.disable&&(obj.visible=active)}})),this.canvas.renderAll()},showControlType:function(name){this.canvas.getObjects().forEach((function(obj){if((0,Common/* getElement */.sb)(obj)){var floorplan=obj.floorplan;floorplan.markerType&&floorplan.markerType===name?obj.opacity=1:-1===OMITTED_OBJECTS.indexOf(floorplan.type)&&(obj.opacity=.2)}})),this.canvas.renderAll()},showControlMarkers:function(){this.canvas.getObjects().forEach((function(obj){if((0,Common/* getElement */.sb)(obj)){var floorplan=obj.floorplan;floorplan.markerType&&null!==floorplan.markerType&&!floorplan.disable?obj.visible=1:-1!==OMITTED_OBJECTS.indexOf(floorplan.type)||floorplan.disable||(obj.visible=0)}})),this.canvas.renderAll()},clearType:function(){this.canvas.getObjects().forEach((function(obj){(0,Common/* getElement */.sb)(obj)&&-1===OMITTED_OBJECTS.indexOf(obj.floorplan.type)&&(obj.opacity=1)})),this.canvas.renderAll()}}},mixins_FloorPlanLeagendActionsvue_type_script_lang_js=FloorPlanLeagendActionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_FloorPlanLeagendActionsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanLeagendActions=component.exports},
/***/620156:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"b41194222818d08ae9a47a10cb1f53ae.svg";
/***/},
/***/862620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"99feee13c865562d98860641f93e90d9.svg";
/***/},
/***/73209:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"feab5de01574d25fa144b4289c5c1d69.svg";
/***/},
/***/555751:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"299b4c1da32a42a00cf63d01aaeb8c83.svg";
/***/},
/***/351129:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"34313c056b103abf1cd337cccc6f8896.svg";
/***/},
/***/398596:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"a4d2fa3a3df16df5c45be4f9a34439f4.svg";
/***/},
/***/924353:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0d57a0742a44e20a09bf2796286c373d.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/13803.js.map