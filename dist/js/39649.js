"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[39649],{
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/139649:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return IndividualDelegate}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/personalsettings/IndividualDelegate.vue?vue&type=template&id=4822203a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("SetupLoader",{scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})]},proxy:!0}],null,!1,3199698086)}):_c("div",[_c("div",{staticClass:"fc-black-15 fwBold pL20 pT20"},[_vm._v("Delegates")]),_c("div",{staticClass:"fc-setup-actions-con pT0 pL0"},[_c("div",{staticClass:"flex-middle"},[_c("el-select",{staticClass:"fc-input-full-border2 mT20 mL20 mB10",attrs:{placeholder:"Select"},on:{change:_vm.delegateListLoad},model:{value:_vm.delegateViewList,callback:function($$v){_vm.delegateViewList=$$v},expression:"delegateViewList"}},_vm._l(_vm.delegateListShow,(function(delegateList){return _c("el-option",{key:delegateList.value,attrs:{label:delegateList.label,value:delegateList.value}})})),1),"custom"===_vm.delegateActive?_c("el-date-picker",{staticClass:"mL20",attrs:{type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date","value-format":"timestamp"},on:{change:function($event){return _vm.delegateListLoad()}},model:{value:_vm.delegateTimePicker,callback:function($$v){_vm.delegateTimePicker=$$v},expression:"delegateTimePicker"}}):_vm._e()],1),_c("div",{staticClass:"flex-middle"},[_vm.delegationList.length>0?_c("f-search",{staticClass:"mL20",model:{value:_vm.delegationList,callback:function($$v){_vm.delegationList=$$v},expression:"delegationList"}}):_vm._e()],1)]),_c("el-table",{staticClass:"fc-setup-table fc-setup-table-p0 fc-setup-table-th-borderTop",staticStyle:{width:"100%"},attrs:{data:_vm.delegationList,height:"calc(100vh - 320px)",fit:!0}},[_c("template",{slot:"empty"},[_c("div",{staticClass:"height57vh fc-align-center-column"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"label-txt-black f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("setup.empty.empty_delegate"))+" ")])],1)]),_c("el-table-column",{attrs:{prop:"name",label:"Name"},scopedSlots:_vm._u([{key:"default",fn:function(delegate){return[_vm._v(" "+_vm._s(delegate.row.name)+" ")]}}])}),"delegated"===_vm.delegateViewList?_c("el-table-column",{attrs:{prop:"delegate",label:"Delegated To"},scopedSlots:_vm._u([{key:"default",fn:function(delegate){return[_vm._v(" "+_vm._s(delegate.row&&delegate.row.delegateUser&&delegate.row.delegateUser.name)+" ")]}}],null,!1,2786814810)}):_vm._e(),"delegateAssign"===_vm.delegateViewList?_c("el-table-column",{attrs:{prop:"delegate",label:"Delegated From"},scopedSlots:_vm._u([{key:"default",fn:function(delegate){return[_vm._v(" "+_vm._s(delegate.row&&delegate.row.user&&delegate.row.user.name)+" ")]}}],null,!1,3330750394)}):_vm._e(),_c("el-table-column",{attrs:{prop:"features",label:"Responsibilities"},scopedSlots:_vm._u([{key:"default",fn:function(delegate){return[_vm.$validation.isEmpty(_vm.getDelegateType(delegate.row))?_c("div",[_vm._v(" --- ")]):_vm._e(),_vm._l(_vm.getDelegateType(delegate.row),(function(delegated){return _c("div",{key:delegated},[_c("div",{staticClass:"fc-delegate-tag"},[_vm._v(" "+_vm._s(delegated)+" ")])])}))]}}])}),_c("el-table-column",{attrs:{prop:"time",label:"start and end Time",width:"250"},scopedSlots:_vm._u([{key:"default",fn:function(delegate){return[_vm._v(" "+_vm._s(_vm._f("formatDate")(delegate.row.fromTime,!0))+" - "+_vm._s(_vm._f("formatDate")(delegate.row.toTime,!0))+" ")]}}])})],2)],1),_vm.showAddDelegate?_c("delegateForm",{attrs:{delegateData:_vm.selectedDelegate,isNew:_vm.isNew},on:{onSave:_vm.delegateListLoad,onClose:function($event){_vm.showAddDelegate=!1}}}):_vm._e()],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(648324),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(336585),__webpack_require__(32284)),FSearch=__webpack_require__(947748),DelegateForm=__webpack_require__(742834),SetupLoader=__webpack_require__(233432),IndividualDelegatevue_type_script_lang_js={params:["userInformation"],data:function(){return{delegationList:[],loading:!0,totalCount:null,perPage:50,showAddDelegate:!1,selectedDelegate:null,isNew:!1,delegateTimePicker:null,delegateActive:null,delegateView:[{label:"Active & Upcoming",value:"Active"},{label:"Custom",value:"custom"}],delegateListShow:[{label:"My Delegates",value:"delegated"},{label:"Delegated to me",value:"delegateAssign"}],delegateViewList:"delegated"}},components:{FSearch:FSearch/* default */.Z,DelegateForm:DelegateForm/* default */.Z,SetupLoader:SetupLoader/* default */.Z},created:function(){this.delegateListLoad()},methods:{delegateListLoad:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,params={},"delegated"===_this.delegateViewList?params.filters=JSON.stringify({userId:{operatorId:9,value:[_this.$account.user.id.toString()]}}):"delegateAssign"===_this.delegateViewList&&(params.filters=JSON.stringify({delegateUserId:{operatorId:9,value:[_this.$account.user.id.toString()]}})),_this.delegateTimePicker&&(params.filters=JSON.stringify({datetime:{operatorId:20,value:_this.delegateTimePicker.map((function(a){return a.toString()}))}})),_context.next=6,api/* API */.bl.get("v2/userDelegation/list",params);case 6:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this.$message.error(error.message||_this.$t("common._common.error_occured")):_this.delegationList=data.delegationList||[],_this.loading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},addDelegate:function(){this.showAddDelegate=!0,this.isNew=!0,this.selectedDelegate=null},editDelegate:function(delegate){this.showAddDelegate=!0,this.isNew=!1,this.selectedDelegate=delegate},deleteDelegate:function(delegate){var _this2=this;this.$dialog.confirm({title:this.$t("common.header.delete_delegate"),message:this.$t("common.header.are_you_sure_you_want_to_delete_this_delegate"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(value){var _yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(value){_context2.next=2;break}return _context2.abrupt("return");case 2:return _context2.next=4,api/* API */.bl.post("v2/userDelegation/delete",{id:delegate.id});case 4:_yield$API$post=_context2.sent,error=_yield$API$post.error,error?_this2.$message.error(error.message||_this2.$t("setup.delete.delete_delegate_failed")):(_this2.$message.success(_this2.$t("setup.delete.delete_delegate")),_this2.delegateListLoad());case 7:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref.apply(this,arguments)}}())},getDelegateType:function(_ref2){var delegationType=_ref2.delegationType,delegationTypeObj={1:this.$t("setup.users_management.receive_notifications"),2:this.$t("setup.users_management.state_transitions"),4:this.$t("setup.users_management.approval_actions"),8:this.$t("common.header.custom_buttons"),16:this.$t("common.header.dashboards"),32:this.$t("common._common.views"),64:this.$t("setup.users_management.data_scoping")};return Object.entries(delegationTypeObj).filter((function(_ref3){var _ref4=(0,slicedToArray/* default */.Z)(_ref3,1),key=_ref4[0];return delegationType&parseInt(key)})).map((function(_ref5){var _ref6=(0,slicedToArray/* default */.Z)(_ref5,2),value=_ref6[1];return value}))}}},personalsettings_IndividualDelegatevue_type_script_lang_js=IndividualDelegatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(personalsettings_IndividualDelegatevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,IndividualDelegate=component.exports},
/***/233432:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupLoader.vue?vue&type=template&id=367e612c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-loader"},[_vm._t("setupLoading")],2)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupLoader=component.exports},
/***/742834:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DelegateForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/users/delegate/DelegateForm.vue?vue&type=template&id=c1dacfe4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:_vm.isNew?_vm.$t("setup.create.add_delegate"):_vm.$t("setup.create.edit_delegate"),visible:!0,width:"45%","custom-class":"fc-setup-dialog-form fc-setup-dialog-form fc-setup-rightSide-dialog-scroll","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("el-form",{ref:"delegateForm",attrs:{model:_vm.delegate,"label-position":"top",rules:_vm.rules}},[_c("el-form-item",{attrs:{label:_vm.$t("setup.approvalprocess.name"),prop:"name"}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:!0,type:"text",placeholder:_vm.$t("setup.placeholder.enter_bundle_name")},model:{value:_vm.delegate.name,callback:function($$v){_vm.$set(_vm.delegate,"name",$$v)},expression:"delegate.name"}})],1),_c("el-form-item",{attrs:{prop:"description",label:"description"}},[_c("el-input",{staticClass:"fc-input-full-border-textarea text-capitalize",attrs:{type:"textarea",resize:"none",autosize:{minRows:3,maxRows:3},placeholder:_vm.$t("maintenance._workorder.description")},model:{value:_vm.delegate.description,callback:function($$v){_vm.$set(_vm.delegate,"description",$$v)},expression:"delegate.description"}})],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{label:"Start date",prop:"fromTime"}},[_c("el-date-picker",{staticClass:"width100 fc-input-full-border2",attrs:{type:"date",placeholder:"Select start date and time","value-format":"timestamp"},model:{value:_vm.delegate.fromTime,callback:function($$v){_vm.$set(_vm.delegate,"fromTime",$$v)},expression:"delegate.fromTime"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{label:"End date",prop:"endTime"}},[_c("el-date-picker",{staticClass:"width100 fc-input-full-border2",attrs:{type:"date",placeholder:"Select end date and time","value-format":"timestamp"},model:{value:_vm.delegate.toTime,callback:function($$v){_vm.$set(_vm.delegate,"toTime",$$v)},expression:"delegate.toTime"}})],1)],1)],1),_c("el-form-item",{attrs:{prop:"user",label:"Delegated To"}},[_c("el-select",{staticClass:"width100 fc-input-full-border2",attrs:{placeholder:"Select",filterable:""},model:{value:_vm.delegate.delegateUserId,callback:function($$v){_vm.$set(_vm.delegate,"delegateUserId",$$v)},expression:"delegate.delegateUserId"}},_vm._l(_vm.userlist,(function(users,i){return _c("el-option",{key:i,attrs:{label:users.name,value:users.id}})})),1)],1),_c("el-form-item",{attrs:{prop:"features",label:"Responsibilities"}},[_c("el-checkbox-group",{staticClass:"d-flex flex-direction-column",model:{value:_vm.delegate.delegationType,callback:function($$v){_vm.$set(_vm.delegate,"delegationType",$$v)},expression:"delegate.delegationType"}},[_c("el-checkbox",{staticClass:"mB15",attrs:{label:"4"}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.approval_actions"))+" ")]),_c("el-checkbox",{staticClass:"mB15",attrs:{label:"1"}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.receive_notifications"))+" ")]),_c("el-checkbox",{staticClass:"mB15",attrs:{label:"2"}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.state_transitions"))+" ")]),_c("el-checkbox",{staticClass:"mB15",attrs:{label:"8"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.custom_buttons"))+" ")]),_c("el-checkbox",{staticClass:"mB15",attrs:{label:"16"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.dashboards"))+" ")]),_c("el-checkbox",{staticClass:"mB15",attrs:{label:"32"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.views"))+" ")]),_c("el-checkbox",{staticClass:"mB15",attrs:{label:"64"}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.data_scoping"))+" ")])],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.saveDelegate()}}},[_vm._v(" "+_vm._s(_vm.$t("panel.dashboard.confirm"))+" ")])],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(169358),__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(32284)),DelegateFormvue_type_script_lang_js={props:["isNew","delegateData"],data:function(){return{delegate:{name:"",description:"",delegationType:[],fromTime:"",toTime:"",delegateUserId:null},rules:{name:[{required:!0,trigger:"blur",message:this.$t("setup.users_management.please_enter_name")}],delegateUserId:[{required:!0,trigger:"blur",message:this.$t("setup.users_management.selct_one_delegate")}]},saving:!1,userlist:[]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$delegateData,toTime,delegationType,delegationTypeObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadusers();case 2:_this.isNew||(_this$delegateData=_this.delegateData,toTime=_this$delegateData.toTime,delegationType=_this$delegateData.delegationType,delegationTypeObj={4:_this.$t("setup.users_management.approval_actions"),1:_this.$t("setup.users_management.receive_notifications"),2:_this.$t("setup.users_management.state_transitions"),8:_this.$t("common.header.custom_buttons"),16:_this.$t("common.header.dashboards"),32:_this.$t("common._common.views"),64:_this.$t("setup.users_management.data_scoping")},_this.delegate=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this.delegateData),{},{toTime:toTime-864e5+1,delegationType:Object.keys(delegationTypeObj).filter((function(key){return 0!==(delegationType&parseInt(key))}))}));case 3:case"end":return _context.stop()}}),_callee)})))()},computed:{summaryId:function(){return this.$route.params.id?parseInt(this.$route.params.id):-1}},methods:{closeDialog:function(){this.$emit("onClose")},saveDelegate:function(){var _this2=this;this.$refs["delegateForm"].validate(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(valid){var url,delegationType,params,_yield$API$post,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(valid){_context2.next=2;break}return _context2.abrupt("return",!1);case 2:return _this2.saving=!0,url="v2/userDelegation/addOrUpdate",delegationType=_this2.delegate.delegationType.reduce((function(totalValue,currentValue){return totalValue+=parseInt(currentValue),totalValue}),0),params={delegation:{name:_this2.delegate.name,description:_this2.delegate.description,fromTime:_this2.$helpers.getTimeInOrg(_this2.delegate.fromTime),toTime:_this2.$helpers.getTimeInOrg(_this2.delegate.toTime+864e5-1),userId:_this2.summaryId,delegateUserId:_this2.delegate.delegateUserId,delegationType:delegationType,id:_this2.isNew?null:_this2.delegateData.id}},_context2.next=8,api/* API */.bl.post(url,params);case 8:_yield$API$post=_context2.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this2.$message.error(error.message||_this2.$t("common._common.error_occured")):(_this2.$message.success(_this2.$t("common._common.delegate_saved_successfully")),_this2.$emit("onSave",data.delegateContext),_this2.closeDialog()),_this2.saving=!1,_this2.$forceUpdate();case 14:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref.apply(this,arguments)}}())},loadusers:function(){var _this3=this;this.loading=!0;var appId=this.appId;return appId=this.$account.user.applicationId,api/* API */.bl.get("/v2/application/users/list",{appId:appId}).then((function(_ref2){var data=_ref2.data,error=_ref2.error;error?_this3.$message.error(error.message||"Error Occured"):_this3.userlist=data.users||[],_this3.loading=!1}))}}},delegate_DelegateFormvue_type_script_lang_js=DelegateFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(delegate_DelegateFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DelegateForm=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/39649.js.map