(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[3803],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/21864:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return OutsideClick}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/OutsideClick.vue?vue&type=template&id=6761c108
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.onOutsideClick,expression:"onOutsideClick"}]},[_vm._t("default")],2):_vm._e()},staticRenderFns=[],OutsideClickvue_type_script_lang_js={props:["visibility"],methods:{onOutsideClick:function(){this.$emit("onOutsideClick"),this.$emit("update:visibility",!1)}}},components_OutsideClickvue_type_script_lang_js=OutsideClickvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_OutsideClickvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,OutsideClick=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/73605:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Layout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/Layout.vue?vue&type=template&id=033d83af&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{key:_vm.currentModuleName,staticClass:"height-100 report-layout-pivot flex-middle"},[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_c("el-dialog",{attrs:{visible:_vm.loading,"show-close":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"0"}},[_c("img",{attrs:{src:__webpack_require__(918562)}})]),!_vm.leftPaneVisibility&&_vm.folderView?_c("div",{class:"hamburger-menu reports",on:{click:_vm.handleBackButton}},[_c("i",{staticClass:"el-icon-back"})]):_vm._e(),_c("div",{staticClass:"row reports-layout"},[_c("div",{staticClass:"col-3",attrs:{id:"sideBar"}},[_c("report-sidebar",{directives:[{name:"show",rawName:"v-show",value:_vm.leftPaneVisibility,expression:"leftPaneVisibility"}],ref:"reportSidebar",staticClass:"report-summary",attrs:{selectedFolderObj:_vm.selectedFolderObj,moduleName:_vm.$attrs.moduleName,appId:_vm.appId,newReportTree:_vm.newReportTree,tabId:_vm.$attrs.tabId,perPage:_vm.perPage},on:{foldermanager:_vm.foldermanager,folderchanged:_vm.loadfolder,reportsList:_vm.reportsList,paginationDetails:_vm.paginationDetails}})],1)]),_vm.leftPaneVisibility&&_vm.newReportTree.length?_c("div",{staticClass:"header-bar"},[_vm.isFolderClicked||_vm.isReportPrevied?_c("div",{staticClass:"report-header-and-summary header-bar-background",style:_vm.leftPaneVisibility?"":"border-left:none"},[_vm.isFolderClicked?_c("div",{staticClass:"report-name-section",class:_vm.leftPaneVisibility?_vm.isReportPrevied||!_vm.leftPaneVisibility?"breadcrumb-view":"":"breadcrumb-view",style:_vm.leftPaneVisibility?"":"padding-left:50px;"},[_c("el-breadcrumb",{attrs:{separator:""}},[_vm.isFolderClicked?_c("inline-svg",{style:_vm.leftPaneVisibility?"margin-right:10px;paddinng-left:25px;":"margin-right:10px;",attrs:{src:"svgs/pivot/folder"}}):_vm._e(),_vm.isReportPrevied||_vm.isFolderClicked?_c("el-breadcrumb-item",{staticClass:"pivot-crumb",staticStyle:{"font-weight":"500 !important"},model:{value:_vm.selectedFolderObj,callback:function($$v){_vm.selectedFolderObj=$$v},expression:"selectedFolderObj"}},[_c("div",{staticClass:"breadcrumb-text-folder",style:"color:black;"},[_vm._v(" "+_vm._s(_vm.selectedFolderObj.name)+" ")])]):_vm._e()],1)],1):_vm._e(),_c("div",{staticClass:"flex-center-row-space fc-black-small-txt-12",class:["energydata"===_vm.currentModuleName?"noicon":""]},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.search_report"),placement:"left"}},[_vm.showSearchIcon?_c("div",{on:{click:function($event){$event.stopPropagation(),_vm.showSearchIcon=!1}}},[_vm._t("icon",(function(){return[_c("InlineSvg",{staticClass:"d-flex mT3 cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm self-center mR5"}})]}))],2):_c("OutsideClick",{attrs:{visibility:!0},on:{onOutsideClick:function($event){_vm.showSearchIcon=!0}}},[_c("div",{staticClass:"search-container-header pL33"},[_c("el-input",{staticClass:"fc-input-full-border2 pL5",attrs:{placeholder:"Search Report",type:"search","prefix-icon":"el-icon-search"},on:{input:function($event){return _vm.searchTriggered(_vm.searchText)}},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1)])],1),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("div",{staticClass:"p8",class:["button-hover pointer"],attrs:{slot:"reference"},slot:"reference"},[_c("div",{staticClass:"flex-middle justify-between lp-page"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_c("span",{staticClass:"d-flex"},[_c("span",[_vm._v(_vm._s(" of "))]),_vm.shimmerLoading?_c("span",{staticClass:"count-shimmer-line loading-shimmer mT1 "}):_c("span",[_vm._v(_vm._s(_vm.total))])])])])]),_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow f16 pointer p5 fw-bold",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow  f16 pointer p5 fw-bold",class:{disable:!_vm.canGoNextPage},on:{click:function($event){_vm.canGoNextPage&&_vm.next()}}})]),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),placement:"right"}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click","popper-class":"portal-sort-container","visible-arrow":!0},model:{value:_vm.visible,callback:function($$v){_vm.visible=$$v},expression:"visible"}},[_c("InlineSvg",{staticClass:"d-flex pointer user-select-none pR0",attrs:{slot:"reference",src:"new-sortby",iconClass:"icon self-center mR5"},slot:"reference"}),_c("div",{staticClass:"sort-list-container"},_vm._l(_vm.orderTypeList,(function(type,name){return _c("div",{key:name,staticClass:"list-item",class:["list-item",_vm.orderType===name&&"active"],on:{click:function($event){return _vm.updateOrder(name)}}},[_vm._v(" "+_vm._s(type)+" ")])})),0)],1)],1),_c("span",{staticClass:"separator"},[_vm._v("|")])],1),_vm.currentModuleName&&"energydata"!=_vm.currentModuleName&&!_vm.$helpers.isPortalUser()&&_vm.hasCreateEditPermission?_c("div",{staticClass:"new-pivot-btn header-btn",style:_vm.isReportPrevied?"display:none":"",on:{click:_vm.createNewReport}},[_c("i",{staticClass:"el-icon-plus pR5 fwBold",staticStyle:{transform:"scale(0.9)"}}),_vm._v(_vm._s(_vm.$t("common.wo_report.new_report"))+" ")]):_vm._e()]):_vm._e(),_vm.leftPaneVisibility?_c("div",{staticClass:"report-view-table"},[_c("el-table",{attrs:{data:_vm.reportlist,"cell-style":{margin:"4px 0"},"row-class-name":"report-row no-hover"},on:{"row-click":_vm.loadReport}},[_c("el-table-column",{attrs:{prop:"name",label:"Name",width:"35%","class-name":"pivot-table-name"}}),_c("el-table-column",{attrs:{prop:"description",label:"Description",width:"25%"}}),_c("el-table-column",{attrs:{prop:"moduleName",label:"Module",width:"20%"}}),_c("el-table-column",{attrs:{prop:"created_by",label:"Created by",width:"20%"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return["--"!==scope.row.createdBy?_c("div",{staticClass:"pL25"},[_c("user-avatar",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{size:"sm",user:_vm.$store.getters.getUser(scope.row.createdBy),name:!1,title:_vm.$store.getters.getUser(scope.row.createdBy).name}})],1):_c("div",{staticClass:"pL25"},[_c("span",{staticStyle:{"padding-left":"6px"}},[_vm._v(" "+_vm._s(scope.row.createdBy))])])]}}],null,!1,3311834525)}),_c("el-table-column",{attrs:{prop:"modified_time",label:"Modified on",width:"20%"}}),_c("el-table-column",{attrs:{prop:"modified_by",label:"Modified by",width:"20%"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return["--"!==scope.row.modified_by?_c("div",{staticClass:"pL25"},[_c("user-avatar",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{size:"sm",user:_vm.$store.getters.getUser(scope.row.modified_by),name:!1,title:_vm.$store.getters.getUser(scope.row.modified_by).name}})],1):_c("div",{staticClass:"pL25"},[_c("span",{staticStyle:{"padding-left":"6px"}},[_vm._v(_vm._s(scope.row.modified_by))])])]}}],null,!1,574441750)}),_c("el-table-column",{attrs:{align:"right",width:"20%"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"table-btn-container",staticStyle:{height:"100%",width:"100%"}},[_vm.hasCreateEditPermission?_c("el-button",{staticClass:"edit-btn",staticStyle:{"margin-right":"10px"},attrs:{size:"medium"},on:{click:function($event){return $event.stopPropagation(),_vm.editReport(scope.row.id,scope.row)}}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/edit",iconClass:"icon-sm flex icon"}})],1):_vm._e(),_c("el-dropdown",{staticClass:"more-dropdown",attrs:{trigger:"click","hide-on-click":!1},on:{command:function(command){return _vm.handleCommand(command,_vm.isCloneToAnotherApp,scope.row)}}},[_c("el-button",{staticClass:"more-btn",attrs:{icon:"el-icon-more",size:"medium"},on:{click:function($event){$event.stopPropagation()}}}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.hasDeletePermission?_c("el-dropdown-item",{attrs:{command:"delete"}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/delete-icon",iconClass:"icon-sm flex icon"}}),_vm._v(_vm._s(_vm.$t("common.wo_report.delete_report_option")))],1):_vm._e(),3!=scope.row.type&&1!=scope.row.type&&_vm.hasCreateEditPermission?_c("el-dropdown-item",{attrs:{command:"duplicate"}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/duplicate",iconClass:"icon-sm flex icon"}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.duplicate_report_option")))],1):_vm._e(),_vm.hasCreateEditPermission?_c("el-dropdown-item",{attrs:{command:"move"}},[_c("el-popover",{attrs:{placement:"left",width:"185",title:"Folders",trigger:"hover"}},[_vm._l(_vm.newReportTree.filter((function(folders){return folders.id!=_vm.selectedFolderObj.id})),(function(folder){return _c("div",{key:folder.id,staticClass:"pivot-folder-option",on:{click:function($event){return _vm.moveReport(_vm.selectedFolderObj,folder,scope.row)}}},[_vm._v(" "+_vm._s(folder.name)+" ")])})),_c("button",{staticClass:"move-btn",attrs:{slot:"reference"},slot:"reference"},[_c("InlineSvg",{attrs:{src:"svgs/pivot/Move",iconClass:"icon-sm flex icon"}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.move_report_option"))+" ")],1)],2)],1):_vm._e(),3!=scope.row.type&&_vm.hasExportPermission?_c("el-dropdown-item",{attrs:{command:"export"}},[_c("el-popover",{attrs:{placement:"left",width:"185",trigger:"hover"}},[_c("div",{staticClass:"pivot-folder-option",on:{click:function($event){return _vm.triggerExport(1,scope.row)}}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.export_csv_report_option"))+" ")]),_c("div",{staticClass:"pivot-folder-option",on:{click:function($event){return _vm.triggerExport(2,scope.row)}}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.export_excel_report_option"))+" ")]),_c("div",{staticClass:"pivot-folder-option",on:{click:function($event){return _vm.triggerExport(3,scope.row)}}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.export_pdf_report_option"))+" ")]),_c("div",{staticClass:"pivot-folder-option",on:{click:function($event){return _vm.triggerExport(4,scope.row)}}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.export_image_report_option"))+" ")]),_c("button",{staticClass:"move-btn",attrs:{slot:"reference"},slot:"reference"},[_c("InlineSvg",{attrs:{src:"svgs/pivot/Export",iconClass:"icon-sm flex icon"}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.export_report_option"))+" ")],1)])],1):_vm._e(),3!=scope.row.type&&_vm.hasSchedulePermission?_c("el-dropdown-item",{attrs:{command:"Schedule"}},[_c("img",{staticClass:"report-icon flex icon",staticStyle:{height:"14px",width:"14px","margin-left":"2px","margin-right":"8px"},attrs:{src:__webpack_require__(598685)}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.schedule_report_option"))+" ")]):_vm._e(),3!=scope.row.type?_c("el-dropdown-item",{attrs:{command:"Mail"}},[_c("img",{staticClass:"report icon flex icon",staticStyle:{height:"14px",width:"14px","margin-left":"2px","margin-right":"8px"},attrs:{src:__webpack_require__(2175)}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.sendmail_report_option"))+" ")]):_vm._e(),3!=scope.row.type&&_vm.hasCreateEditPermission?_c("el-dropdown-item",{attrs:{command:"CloneReport"}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],class:["fa fa-clone"],staticStyle:{"margin-left":"2px","margin-right":"8px"},attrs:{"data-position":"top","data-arrow":"true",title:_vm.$t("home.dashboard.duplicate_report")}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.clone_report_option"))+" ")]):_vm._e()],1)],1)],1),_vm.showColumnSelectionDialog&&_vm.showDialogId===scope.row.id?_c("column-selection-dialog",{attrs:{moduleName:_vm.moduleName,fields:_vm.reportObject?_vm.reportObject.underlyingFields:null,visibility:_vm.showColumnSelectionDialog},on:{"update:visibility":function($event){_vm.showColumnSelectionDialog=$event},save:_vm.onColumnSelection}}):_vm._e(),_vm.isClone?_c("div",{staticClass:"dashboard-share dialog-box"},[_c("el-dialog",{staticClass:"fc-dialog-center-container report-clone-dialog",attrs:{title:"Clone Report",visible:_vm.isClone,width:"35%","append-to-body":!0},on:{"update:visible":function($event){_vm.isClone=$event}}},[_c("div",[_c("div",[_c("div",{staticClass:"clonePopup"},[_c("el-form",{ref:"cloneDashboardForm",staticClass:"clone_dialog",attrs:{rules:_vm.rules,model:_vm.reportCloneObj}},[_c("el-form-item",{staticClass:"mB10",attrs:{label:"Report Name",prop:"name",required:!0}},[_c("el-input",{staticClass:"width300px fc-input-full-border2 pR15",model:{value:_vm.reportCloneObj.name,callback:function($$v){_vm.$set(_vm.reportCloneObj,"name",$$v)},expression:"reportCloneObj.name"}})],1),_vm.isCloneToAnotherApp?_c("el-form-item",{staticClass:"mB10",attrs:{label:"Target Application",prop:"name"}},[_c("el-select",{staticClass:"fc-input-full-border2 width300px pR15",attrs:{filterable:""},model:{value:_vm.reportCloneObj.selectedAppId,callback:function($$v){_vm.$set(_vm.reportCloneObj,"selectedAppId",$$v)},expression:"reportCloneObj.selectedAppId"}},_vm._l(_vm.apps,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1)],1):_vm._e()],1)],1)]),_c("span",{staticClass:"dialog-footer row"},[_c("el-button",{staticClass:"col-6 shareoverbtn shrbtn1",on:{click:function($event){_vm.isClone=!1}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.Saving},on:{click:function($event){return _vm.cloneReporttoAnotherApp(_vm.isCloneToAnotherApp)}}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)])])],1):_vm._e(),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:_vm.$t("common._common.export"),visible:_vm.exportDialog,width:"30%","append-to-body":!0},on:{"update:visible":function($event){_vm.exportDialog=$event}}},[_c("div",{staticClass:"height100px"},[_c("el-radio-group",{model:{value:_vm.exportOption,callback:function($$v){_vm.exportOption=$$v},expression:"exportOption"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:1}},[_vm._v(_vm._s(_vm.$t("common._common.tabular_report")))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:2}},[_vm._v(_vm._s(_vm.$t("common._common.underlying_data")))])],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.exportDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.newExportData}},[_vm._v(_vm._s(_vm.$t("common._common.export")))])],1)])]}}],null,!1,2059047563)})],1)],1):_vm._e()]):_vm._e(),_vm.newReportTree.length||_vm.changeComponent||!_vm.reportNumber?_vm._e():_c("div",{staticClass:"default-view-page"},[_c("div",{staticClass:"default-image-container"},[_c("img",{staticClass:"default-image",attrs:{src:__webpack_require__(467886)}}),_c("a",[_vm._v(_vm._s(_vm.$t("common.wo_report.learn_more_about_reports")))])]),_vm.currentModuleName&&"energydata"!=_vm.currentModuleName&&!_vm.$helpers.isPortalUser()&&_vm.hasCreateEditPermission?_c("div",{staticClass:"new-pivot-btn",on:{click:_vm.createNewReport}},[_c("i",{staticClass:"el-icon-plus pR5 fwBold",staticStyle:{transform:"scale(0.9)"}}),_vm._v(_vm._s(_vm.$t("common.wo_report.new_report"))+" ")]):_vm._e()]),_vm.showImageOptionsDialog?_c("f-dialog",{staticClass:"print-image-options",attrs:{title:_vm.$constants.FILE_FORMAT[_vm.exportType]+" Settings",visible:_vm.showImageOptionsDialog,width:"30%",confirmTitle:"Export"},on:{save:function($event){_vm.showImageOptionsDialog=!1,_vm.exportData(_vm.exportType)},close:_vm.closeImageOptionsDialog}},[_c("div",{staticClass:"mB20 mT20"},[_c("div",[_c("el-checkbox",{model:{value:_vm.showHeader,callback:function($$v){_vm.showHeader=$$v},expression:"showHeader"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.include_title")))])],1),_c("div",{staticClass:"mT10"},[_c("el-checkbox",{model:{value:_vm.showPrintDetails,callback:function($$v){_vm.showPrintDetails=$$v},expression:"showPrintDetails"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.include_description")))])],1)])]):_vm._e(),_vm.visibility.showEmailDialog?_c("email-report",{attrs:{moduleName:_vm.moduleName,visibility:_vm.visibility.showEmailDialog,params:_vm.params,mailParams:_vm.mailParams,url:_vm.url,report:_vm.report?_vm.report:{}},on:{"update:visibility":function($event){return _vm.$set(_vm.visibility,"showEmailDialog",$event)}}}):_vm._e(),_vm.visibility.showScheduleDialog?_c("schedule-report",{attrs:{moduleName:_vm.moduleName,visibility:_vm.visibility.showScheduleDialog,report:_vm.report?_vm.report:{},reportsList:_vm.list,webtabId:_vm.$attrs.tabId,appId:_vm.appId},on:{"update:visibility":function($event){return _vm.$set(_vm.visibility,"showScheduleDialog",$event)}}}):_vm._e(),_vm.changeComponent?_c("router-view",{on:{goBack:_vm.goBack}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),esm_typeof=__webpack_require__(103336),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),element_ui_common=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(169358),__webpack_require__(506203),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(648324),__webpack_require__(228436),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(364720)),ReportSidebarNewvue_type_template_id_71d27668_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"reports-sidebar"},[_c("div",{staticClass:"reports-sidebar-header"},[_c("div",{staticClass:"report-title flex-middle"},[_c("div",{staticClass:"pivot-summary-all-pivots"},[_c("el-popover",{attrs:{placement:"bottom-start",width:"185",trigger:"click",disabled:_vm.$helpers.isPortalUser()}},[_c("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"10px"}},[_c("img",{staticClass:"report-icon flex icon",staticStyle:{height:"14px",width:"14px","margin-left":"2px","margin-right":"8px"},attrs:{src:__webpack_require__(598685)}}),_c("span",{staticStyle:{cursor:"pointer"},on:{click:function($event){return _vm.openScheduledReports()}}},[_vm._v(_vm._s(_vm.$t("common.wo_report.scheduled_reports")))])]),_c("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"10px"}},[_c("InlineSvg",{staticStyle:{"margin-top":"4px","margin-right":"5px"},attrs:{src:"svgs/pivot/Manage",iconClass:"icon icon-sm"}}),_c("span",{staticStyle:{cursor:"pointer"},on:{click:function($event){return _vm.openmanagefolders()}}},[_vm._v(_vm._s(_vm.$t("common.wo_report.manage_folders")))])],1),_c("span",{staticStyle:{"letter-spacing":"0.5px",cursor:"pointer","font-weight":"500"},attrs:{slot:"reference"},on:{click:function($event){_vm.visible=!_vm.visible}},slot:"reference"},[_vm._v(_vm._s(_vm.$t("common.wo_report.folders"))),_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{"font-size":"13px","font-weight":"1000","margin-left":"4px",cursor:"pointer","text-transform":"capitalize"}})])])],1)])]),_c("div",{staticClass:"search-container mT15 mB25 pR10 pL10"},[_c("el-input",{staticClass:"fc-input-full-border2 pL5",attrs:{placeholder:"Search Folder",type:"search","prefix-icon":"el-icon-search"},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1),_c("div",{staticClass:"rtree"},[_c("div",{staticClass:"report-sidebar-scroll"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading}}):_c("div",[_vm.newReportTree.length||_vm.reportTree.length?_vm._e():_c("div",{staticClass:"p15 flex-middle height80vh justify-content-center flex-direction-column"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg"}})],1),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.no_reports"))+" ")])]),_vm.newReportTree?_c("div",{staticClass:"pB100 folder-list-container"},_vm._l(_vm.reportFolders,(function(folder,index2){return _c("div",{key:"new_"+index2,staticClass:"folder-container",attrs:{id:""+folder.id}},[_c("el-collapse",{attrs:{accordion:""},model:{value:_vm.expandFolder,callback:function($$v){_vm.expandFolder=$$v},expression:"expandFolder"}},[_c("el-collapse-item",{attrs:{name:folder.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"folder-title-section",on:{click:function($event){return _vm.expand(folder)}}},[_c("div",{staticClass:"report-folder-icon-section"},[_c("img",{attrs:{src:__webpack_require__(995637)}})]),_c("div",{staticClass:"r-folder-name"},[_vm._v(" "+_vm._s(folder.name)+" ")])])])],2)],1)],1)})),0):_vm._e()])],1)])]),_c("router-view",{key:_vm.$route.fullPath})],1)},ReportSidebarNewvue_type_template_id_71d27668_staticRenderFns=[],ReportHelper=(__webpack_require__(538077),__webpack_require__(507815)),ModularAnalyticmixin=__webpack_require__(795e3),validation=__webpack_require__(990260),router=__webpack_require__(329435),api=__webpack_require__(32284),ReportSidebarNewvue_type_script_lang_js={props:["selectedFolderObj","appId","tabId","newReportTree","perPage"],mixins:[ReportHelper/* default */.Z,ModularAnalyticmixin/* default */.Z],data:function(){return{loading:!1,reportTree:[],searchText:"",editFolderId:null,visible:!1,expandFolder:[],count:null}},watch:{newReportTree:{handler:function(){this.init()},immediate:!0}},computed:{reportId:function(){var reportId=this.$attrs.reportid||this.$route.params.reportid;return parseInt(reportId)},reportFolders:function(){var _this=this,list=this.newReportTree;
// let activeFolder=document.getElementById(`${this.newReportTree[0].id}`)
// activeFolder.classList.add('selected-folder')
if((0,validation/* isEmpty */.xb)(this.searchText))return list;var filteredReports=list.filter((function(report){return report.name.toLowerCase().includes(_this.searchText.toLowerCase())}));return(0,validation/* isEmpty */.xb)(filteredReports)?[]:filteredReports}},methods:{init:function(){this.selectedFolderObj&&this.expandFolder.push(this.selectedFolderObj.id)},toggleEditFolder:function(folder){var _this2=this;this.editFolderId=folder.id,this.$nextTick((function(){Array.isArray(_this2.$refs["FolderName"])?_this2.$refs["FolderName"][0].focus():_this2.$refs["FolderName"].focus()}))},openmanagefolders:function(){if((0,router/* isWebTabsEnabled */.tj)()){var path,routeObj;this.moduleName=this.$attrs.moduleName,routeObj=this.moduleName?"energydata"===this.moduleName?(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_SCHEDULED,{moduleName:this.moduleName}):(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_SCHEDULED,{moduleName:this.moduleName}):(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_SCHEDULED);var _ref=routeObj||{},name=_ref.name;name&&(path=this.$router.resolve({name:name}).href+"?activeTab=folderViews"),path&&this.$router.push({path:path})}else"custom"===this.$route.meta.module?this.$router.push("reports/foldermanager?activeTab=folderViews"):this.$router.push("".concat(this.getCurrentModule(!0).rootPath,"/foldermanager?activeTab=folderViews"));this.$emit("foldermanager")},collapseControl:function(id){-1!==this.expandFolder.indexOf(id)||isNaN(id)?isNaN(id)||this.expandFolder.splice(this.expandFolder.indexOf(id),1):this.expandFolder.push(parseInt(id))},expand:function(folder,page,searchText){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this3$$route$query,activeFolder;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return null!==(_this3$$route$query=_this3.$route.query)&&void 0!==_this3$$route$query&&_this3$$route$query.folderId&&(_this3.$parent.loading=!0),_this3.expandFolder=[],_this3.toggleIsActive(),_context.next=5,_this3.countCall(folder,searchText);case 5:return _context.next=7,_this3.listCall(folder,page,searchText);case 7:folder&&(activeFolder=document.getElementById("".concat(null===folder||void 0===folder?void 0:folder.id)),activeFolder.classList.add("selected-folder"),_this3.$emit("folderchanged",folder)),_this3.$parent.loading=!1,_this3.$parent.showSearchIcon=!0,_this3.getPaginationDetails();case 11:case"end":return _context.stop()}}),_callee)})))()},countCall:function(folder,searchText){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var apiUrl,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return apiUrl="v3/report/reportListView",params=_this4.paginationParams(folder,!0,1),null!=searchText&&(params["searchText"]=searchText),params["orderType"]="desc",_context2.next=6,api/* API */.bl.get(apiUrl,params).then((function(response){response.error||(_this4.count=response.data.count)}));case 6:case"end":return _context2.stop()}}),_callee2)})))()},listCall:function(folder,page,searchText,orderType){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var self,apiUrl,pageno,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return self=_this5,apiUrl="v3/report/reportListView",pageno=page||1,params=_this5.paginationParams(folder,!1,pageno),null!=searchText&&(params["searchText"]=searchText),params["orderType"]=orderType||"desc",_context3.next=8,api/* API */.bl.get(apiUrl,params).then((function(response){response.error||(self.reportsList=response.data.reportsList)}));case 8:_this5.$emit("reportsList",self.reportsList);case 9:case"end":return _context3.stop()}}),_callee3)})))()},getPaginationDetails:function(){var count=this.count,from=count>0?1:0,to=null;to=count>this.perPage?this.reportsList.length:count,this.$emit("paginationDetails",from,to,count)},paginationParams:function(folder,count,page){var params={folderId:null===folder||void 0===folder?void 0:folder.id,appId:this.appId,moduleId:null===folder||void 0===folder?void 0:folder.moduleId,page:page,perPage:this.perPage,withCount:count,isPivot:!1};return params},toggleIsActive:function(){var headers=document.querySelectorAll("div.is-active")&&document.querySelectorAll("i.is-active");headers.forEach((function(h){return h.classList.remove("is-active")}));var prevActiveFolders=document.querySelectorAll(".selected-folder");prevActiveFolders.forEach((function(af){var _af$classList;return null===af||void 0===af||null===(_af$classList=af.classList)||void 0===_af$classList?void 0:_af$classList.remove("selected-folder")}))},openScheduledReports:function(){var path;if((0,router/* isWebTabsEnabled */.tj)()){var routeObj;this.moduleName=this.$attrs.moduleName,routeObj=this.moduleName?"energydata"===this.moduleName?(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_SCHEDULED,{moduleName:this.moduleName}):(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_SCHEDULED,{moduleName:this.moduleName}):(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_SCHEDULED);var _ref2=routeObj||{},name=_ref2.name;name&&(path=this.$router.resolve({name:name}).href+"?activeTab=ScheduleViews")}else path="".concat(this.getCurrentModule(!0).rootPath,"/foldermanager?activeTab=ScheduleViews");path&&this.$router.push({path:path}),this.$emit("foldermanager")}}},report_ReportSidebarNewvue_type_script_lang_js=ReportSidebarNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(report_ReportSidebarNewvue_type_script_lang_js,ReportSidebarNewvue_type_template_id_71d27668_render,ReportSidebarNewvue_type_template_id_71d27668_staticRenderFns,!1,null,null,null)
/* harmony default export */,ReportSidebarNew=component.exports,ReportUtil=__webpack_require__(86254),User=__webpack_require__(426803),NewDateHelper=__webpack_require__(105534),ScheduleReportNew=__webpack_require__(91699),EmailReportNew=__webpack_require__(853017),NewDataFormatHelper=__webpack_require__(804911),ModuleColumnSelection=__webpack_require__(207018),OutsideClick=__webpack_require__(21864),FDialogNew=__webpack_require__(436756),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),ReportTabPermissions=__webpack_require__(902040),Layoutvue_type_script_lang_js={mixins:[ReportHelper/* default */.Z,ModularAnalyticmixin/* default */.Z,ReportUtil/* default */.Z,NewDataFormatHelper/* default */.Z,NewDateHelper/* default */.Z,ReportTabPermissions/* default */.Z],data:function(){return{visible:!1,isFolderClicked:!0,isReportPrevied:!1,isCloneToAnotherApp:!1,visibility:{showEmailDialog:!1,showScheduleDialog:!1},selectedFolderObj:null,leftPaneVisibility:!0,duplicateReportToggle:!1,isClone:!1,mailParams:null,apps:null,appId:null,Saving:!1,list:null,reportNumber:!1,folderView:!0,exportOption:1,folderState:{},searchText:null,newReportTree:[],reportCloneObj:{folder:null,selectedAppId:null,name:null},params:null,url:null,showSearchIcon:!0,from:null,to:null,page:1,perPage:15,total:null,shimmerLoading:!1,showColumnSelectionDialog:!1,showDialogId:null,showImageOptionsDialog:!1,exportDialog:!1,exportType:null,scheduledReportId:null,reportObject:null,loading:!0,moduleName:null,showHeader:!0,showPrintDetails:!0,reportObj:null,moduleId:null,reportName:null,report:null,changeComponent:!1,exportDownloadUrl:null,orderTypeName:"desc",orderTypeList:{asc:"Ascending",desc:"Descending"}}},title:function(){return"Reports"},components:{ReportSidebar:ReportSidebarNew,UserAvatar:User/* default */.Z,ScheduleReport:ScheduleReportNew/* default */.Z,EmailReport:EmailReportNew/* default */.Z,ColumnSelectionDialog:ModuleColumnSelection/* default */.Z,OutsideClick:OutsideClick/* default */.Z,FDialog:FDialogNew/* default */.Z},created:function(){var _this$$route$params;(this.$route.path.includes("newview")&&null!==(_this$$route$params=this.$route.params)&&void 0!==_this$$route$params&&_this$$route$params.reportid||this.$route.path.includes("foldermanager"))&&(this.loading=!1,this.changeComponent=!0,this.leftPaneVisibility=!1,this.$route.path.includes("foldermanager")&&(this.folderView=!1))},watch:{currentModuleName:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.init();case 2:case"end":return _context.stop()}}),_callee)})))()},orderTypeName:{handler:function(){this.$refs["reportSidebar"].listCall(this.selectedFolderObj,this.page,null,this.orderType)}}},mounted:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this2.init();case 2:case"end":return _context2.stop()}}),_callee2)})))()},computed:{currentModuleName:function(){var moduleName,$attrs=this.$attrs;return moduleName=(0,router/* isWebTabsEnabled */.tj)()?$attrs.moduleName:this.getCurrentModule().module,moduleName},reportlist:function(){var list=this.list;return list&&list.length>0&&list.map((function(report){return report.description||(report.description="--"),report.created_by=report.createdBy?report.createdBy:"--",report.modified_time=isNaN(report.modifiedTime)?"--":Date(report.modifiedTime),report.modified_by=report.modifiedBy?report.modifiedBy:"--",report})),list},disablePopup:function(){return!(this.total/this.perPage>1)},canGoNextPage:function(){return this.total>this.to},orderType:function(){return this.orderTypeName?this.orderTypeName:"desc"},analyParams:function(){var params={};if(this.reportObject&&this.reportObject.report){var type=(0,esm_typeof/* default */.Z)(this.reportObject.report.chartState),chartState="string"===type?JSON.parse(this.reportObject.report.chartState):this.reportObject.report.chartState;params["reportId"]=this.reportObject.report.id,params["startTime"]=this.reportObject.report.dateRange["startTime"],params["endTime"]=this.reportObject.report.dateRange["endTime"],params["dateOperator"]=this.reportObject.report.dateOperator,params["dateOperatorValue"]=20===this.reportObject.dateRange.operatorId?this.reportObject.dateRange.value.join(","):this.reportObject.dateRange.offset,params["fileFormat"]=this.exportType,params["mode"]=chartState.common.mode,params["newFormat"]=!0,params["chartType"]=chartState.type,params["url"]=null!==this&&void 0!==this&&this.url?this.url:""}return params}},methods:{init:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.loading=!_this3.changeComponent,_context3.next=3,_this3.availableApps();case 3:return _context3.next=5,_this3.loadNewReportTree();case 5:case"end":return _context3.stop()}}),_callee3)})))()},searchTriggered:debounce_default()((function(searchText){null!=searchText&&this.$refs["reportSidebar"].expand(this.selectedFolderObj,1,searchText)}),1e3),next:function(){var searchText=""!=this.searchText&&null!=this.searchText?this.searchText:null;if(this.from=this.to+1,!(0,validation/* isEmpty */.xb)(this.total)){var to=this.from+this.perPage-1;to>this.total&&(to=this.total),this.to=to}this.page++,this.orderTypeName="desc",this.$refs["reportSidebar"].listCall(this.selectedFolderObj,this.page,searchText)},prev:function(){var searchText=""!=this.searchText&&null!=this.searchText?this.searchText:null;this.to=this.from-1,this.from-=this.perPage,this.from<=1?(this.from=1,this.page=1):this.page--,this.orderTypeName="desc",this.$refs["reportSidebar"].listCall(this.selectedFolderObj,this.page,searchText)},updateOrder:function(name){this.orderTypeName=name},paginationDetails:function(from,to,count){this.from=from,this.to=to,this.total=count},openFirstFolder:function(folder){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!_this4.$refs["reportSidebar"]){_context4.next=4;break}return _context4.next=3,_this4.$refs["reportSidebar"].expand(folder);case 3:_this4.$refs["reportSidebar"].getPaginationDetails();case 4:case"end":return _context4.stop()}}),_callee4)})))()},reportsList:function(_reportsList){this.list=_reportsList,this.loading=!1},loadfolder:function(folder){(0,router/* isWebTabsEnabled */.tj)()||(this.moduleName=this.getCurrentModule().module),this.selectedFolderObj=folder;var url=null;if("custom"===this.$route.meta.module?url="/app/ca/reports?folderId="+this.selectedFolderObj.id:(url=this.getModularReportURL(this.moduleName),url+="?folderId="+this.selectedFolderObj.id),(0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab=(0,router/* findRouteForTab */.OD)(this.$attrs.tabId,router/* pageTypes */.As.REPORT_VIEW),name=_findRouteForTab.name;url=this.$router.resolve({name:name,query:{folderId:this.selectedFolderObj.id}}).href}this.leftPaneVisibility&&(this.$router.replace({path:url}),history.replaceState({},"",window.location.origin+url))},goBack:function(){this.leftPaneVisibility=!0,this.changeComponent=!1},sendmail:function(id,name,report){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this5.getReportDetails(id);case 2:_this5.getRoute(id),"energydata"===_this5.reportObject.module.name&&_this5.analyParams&&(_this5.mailParams=_this5.analyParams),_this5.visibility.showEmailDialog=!0,_this5.scheduledReportId=id,_this5.moduleName=name,_this5.reportName=report.name,_this5.report=report;case 9:case"end":return _context5.stop()}}),_callee5)})))()},Schedulereport:function(id,name,report){this.visibility.showScheduleDialog=!0,this.scheduledReportId=id,this.moduleName=name,this.reportName=report.name,this.report=report},duplicateReport:function(reportId,report){this.duplicateReportToggle=!0,this.editReport(reportId,report)},availableApps:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,api/* API */.bl.get("v2/application/list").then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this6.$message.error(error.message||"Error Occured");else{if(_this6.apps=data.application,_this6.appId=((0,router/* getApp */.wx)()||{}).id,(0,validation/* isEmpty */.xb)(_this6.appId)){var defaultApp=_this6.apps.find((function(app){return"newapp"===app.linkName}))||_this6.apps[0];_this6.appId=defaultApp.id,_this6.reportCloneObj.selectedAppId=_this6.appId}_this6.reportCloneObj.selectedAppId=_this6.appId}}));case 2:case"end":return _context6.stop()}}),_callee6)})))()},newExportData:function(){var _this7=this;if(this.exportDialog=!1,1===this.exportOption)this.exportData(this.exportType);else{var _this$reportObject;
// export underlying data
this.$message({message:"Exporting as "+this.$constants.FILE_FORMAT[this.exportType],showClose:!0});var url="/exportModule?type="+this.exportType+"&moduleName="+this.moduleName+"&viewName=all",params=null;null!==(_this$reportObject=this.reportObject)&&void 0!==_this$reportObject&&null!==(_this$reportObject=_this$reportObject.filters)&&void 0!==_this$reportObject&&_this$reportObject.underlyingDataFilters&&0!==Object.keys(this.reportObject.filters.underlyingDataFilters).length&&(params="&filters="+JSON.stringify(this.reportObject.filters.underlyingDataFilters)),this.$http.post(url,params).then((function(response){_this7.$message.close(),_this7.exportDownloadUrl=response.data.fileUrl})).catch((function(){_this7.$error.message(_this7.$t("common.wo_report.export_failed"))}))}},cloneReporttoAnotherApp:function(isCloneToAnotherPortal){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var reportObj,params,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(reportObj=_this8.reportCloneObj,params=null,null!==reportObj&&void 0!==reportObj&&reportObj.name&&""!==(null===reportObj||void 0===reportObj?void 0:reportObj.name.trim())&&(null===reportObj||void 0===reportObj?void 0:reportObj.selectedAppId)>0&&(params={cloned_report_name:reportObj.name,target_app_id:reportObj.selectedAppId,cloned_app_id:_this8.appId,report_id:_this8.report_id}),!params){_context7.next=12;break}return _this8.Saving=!0,_context7.next=7,api/* API */.bl.post("v3/report/clone",{data:params});case 7:_yield$API$post=_context7.sent,data=_yield$API$post.data,error=_yield$API$post.error,_this8.isClone=!1,!error&&null!==data&&void 0!==data&&data.cloned_report_name?_this8.$message.success("Report Cloned Successfully"):_this8.$message.error("Error while cloning report");case 12:_this8.Saving=!1;case 13:case"end":return _context7.stop()}}),_callee7)})))()},moveReport:function(currentFolder,newFolder,report){var reportIndex,_this9=this;
// this.$set(this.folderState[currentFolder.id], 'setting', false)
for(var key in this.newReportTree)this.newReportTree[key].id===currentFolder.id&&this.list.forEach((function(reportt,index){reportt.id===report.id&&(reportIndex=index)}));api/* API */.bl.put("/v3/report/moveto",{reportId:report.id,folderId:newFolder.id}).then((function(response){_this9.list.splice(reportIndex,1)})).catch((function(){_this9.$message({message:_this9.$t("common.wo_report.cannot_move_report"),type:"error"})}))},createNewReport:function(){this.newModularReport()},newModularReport:function(){var moduleName=this.$attrs.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_FORM,{moduleName:moduleName})||{},name=_ref2.name;name&&this.$router.push({name:name})}else if(moduleName=this.getCurrentModule().module,this.$helpers.isEtisalat())this.$router.push({path:"/app/em/modulereports/new"});else switch(moduleName){case"workorder":case"plannedmaintenance":this.$router.push({path:"/app/wo/reports/new"});break;case"asset":this.$router.push({path:"/app/at/reports/new"});break;case"inspectionTemplate":this.$router.push({path:"/app/inspection/reports/new"});break;case"alarm":this.$router.push({path:"/app/fa/reports/new"});break;case"custom":this.$router.push({path:"/app/ca/reports/new"});break;case"tenant":this.$router.push({path:"/app/tm/reports/new"});break;case"contracts":this.$router.push({path:"/app/ct/reports/new"});break;case"visitorlog":this.$router.push({path:"/app/vi/reports/new"});break;case"serviceRequest":this.$router.push({path:"/app/sr/reports/new"});break;case"purchaseorder":this.$router.push({path:"/app/purchase/reports/new"});break;case"budget":case"budgetamount":this.$router.push({path:"/app/ac/reports/new"});break;case"item":case"tool":case"itemTransactions":case"tootTransactions":case"itemTypes":case"toolTypes":case"storeRoom":case"shipment":case"transferrequest":case"transferrequestshipmentreceivables":case"transferrequestpurchaseditems":this.$router.push({path:"/app/inventory/reports/new"});break;default:this.$router.push({path:"/app/at/reports/new"});break}},loadReport:function(row){var reportId=row.id;this.moduleName=this.$attrs.moduleName;var reportlink=this.getNewReportLink(reportId);this.$router.push({path:reportlink}),this.leftPaneVisibility=!1,this.changeComponent=!0,this.loading=!1},getNewReportLink:function(reportId){if((0,router/* isWebTabsEnabled */.tj)()){var routeObj;routeObj=this.moduleName?"energydata"===this.moduleName?(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:this.moduleName}):(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:this.moduleName}):(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW);var path,_ref3=routeObj||{},name=_ref3.name;return name&&(path=this.$router.resolve({name:name,params:{reportid:reportId}}).href),path}var completeUrl=null;if(this.$helpers.isEtisalat()&&"energydata"!==this.getCurrentModule().module)return completeUrl="/app/em/modulereports/newview/"+reportId,this.$route.query.module&&(completeUrl=completeUrl+"?module="+this.$route.query.module),completeUrl;switch(this.getCurrentModule().module){case"workorder":completeUrl="/app/wo/reports/newview/"+reportId;break;default:completeUrl=this.getCurrentModule(!0).rootPath+"/newview/"+reportId,this.$route.query.module&&(completeUrl=completeUrl+"?module="+this.$route.query.module);break}return completeUrl},editReport:function(id,report){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var moduleName,path,resultObj,routePath,ANALYTIC_PORTFOLIO,ANALYTIC_BUILDING,HEAT_MAP,ANALYTIC_SITE,TREE_MAP,REGRESSION,SCATTER,url,_yield$API$get,error,data,_ref4,name,query,_path,_ref5,_name,_query,parentModule,_ref6,_name2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:if(moduleName=null,moduleName=(0,router/* isWebTabsEnabled */.tj)()?"":_this10.getCurrentModule().module,path=_this10.getModularReportEditURL(moduleName),"custom"===moduleName&&(moduleName=report.module.name),!("energydata"===moduleName||(0,router/* isWebTabsEnabled */.tj)()&&"energydata"===_this10.$attrs.moduleName)){_context8.next=31;break}return ANALYTIC_PORTFOLIO=router/* pageTypes */.As.ANALYTIC_PORTFOLIO,ANALYTIC_BUILDING=router/* pageTypes */.As.ANALYTIC_BUILDING,HEAT_MAP=router/* pageTypes */.As.HEAT_MAP,ANALYTIC_SITE=router/* pageTypes */.As.ANALYTIC_SITE,TREE_MAP=router/* pageTypes */.As.TREE_MAP,REGRESSION=router/* pageTypes */.As.REGRESSION,SCATTER=router/* pageTypes */.As.SCATTER,url="/v3/report/reading/view?reportId="+id,_context8.next=9,api/* API */.bl.get(url);case 9:_yield$API$get=_context8.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(resultObj=data),_context8.t0=resultObj.report.analyticsType,_context8.next=1===_context8.t0?16:3===_context8.t0?18:6===_context8.t0?20:7===_context8.t0?22:8===_context8.t0?24:26;break;case 16:return routePath=resultObj.filters&&resultObj.filters.xCriteriaMode?{path:"portfolio",pageType:ANALYTIC_PORTFOLIO}:{path:"building",pageType:ANALYTIC_BUILDING},_context8.abrupt("break",27);case 18:return routePath={path:"heatmap",pageType:HEAT_MAP},_context8.abrupt("break",27);case 20:return routePath={path:"site",pageType:ANALYTIC_SITE},_context8.abrupt("break",27);case 22:return routePath={path:"treemap",pageType:TREE_MAP},_context8.abrupt("break",27);case 24:return routePath={path:"scatter",pageType:SCATTER},_context8.abrupt("break",27);case 26:routePath={path:"building",pageType:ANALYTIC_BUILDING};case 27:_this10.isRegressionReport&&(routePath={path:"regression",pageType:REGRESSION}),(0,router/* isWebTabsEnabled */.tj)()?(_ref4=(0,router/* findRouteForTab */.OD)(routePath.pageType)||{},name=_ref4.name,query={reportId:id},!0===_this10.duplicateReportToggle&&(query.duplicate=!0),name&&_this10.$router.push({name:name,query:query})):(_path="/app/em/analytics/"+routePath.path,!0===_this10.duplicateReportToggle?_this10.$router.push({path:_path,query:{reportId:id,duplicate:!0}}):_this10.$router.push({path:_path,query:{reportId:id}})),_context8.next=33;break;case 31:_this10.$helpers.isEtisalat()?path="/app/em/modulereports/new":_this10.isCustomModule&&(path="/app/ca/reports/new"),(0,router/* isWebTabsEnabled */.tj)()?(moduleName=_this10.$attrs.moduleName,"inspectionResponse"===moduleName&&(moduleName="inspectionTemplate"),_ref5=(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_FORM,{moduleName:moduleName})||{},_name=_ref5.name,_query={reportId:id,module:moduleName||null},!0===_this10.duplicateReportToggle&&(_query.duplicate=!0),_name?_this10.$router.push({name:_name,query:_query}):(0,validation/* isEmpty */.xb)(_name)&&(parentModule=ReportHelper/* default */.Z.findModuleFromSubmodule(_this10.moduleName),_ref6=(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_FORM,{moduleName:parentModule})||{},_name2=_ref6.name,_name2&&_this10.$router.push({name:_name2,query:_query}))):_this10.duplicateReportToggle?_this10.$router.push({path:path,query:{reportId:id,duplicate:!0,module:moduleName||null}}):_this10.$router.push({path:path,query:{reportId:id,module:moduleName||null}});case 33:case"end":return _context8.stop()}}),_callee8)})))()},handleCommand:function(command,isCloneToAnotherApp,row){var report=row||this.report;"delete"==command?this.deleteReport(row.id):"move"==command?this.showMovePopOver=!0:"duplicate"==command?this.duplicateReport(row.id,row):"Mail"==command?this.sendmail(report.id,report.module.name,report):"CloneReport"==command?this.openClonePopup(report.id,report.name,isCloneToAnotherApp):"Schedule"==command&&this.Schedulereport(row.id,row.module.name,row)},openClonePopup:function(id,name,isCloneToAnotherApp){this.isClone=!0,this.report_id=id,this.reportCloneObj.name=name,this.isCloneToAnotherApp=isCloneToAnotherApp||!1,this.isCloneToAnotherApp=!0},foldermanager:function(){this.leftPaneVisibility=!1,this.changeComponent=!0,this.folderView=!1},loadNewReportTree:function(){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){var self,moduleName,params,url;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:self=_this11,self.loading=!_this11.changeComponent,moduleName=null,params={appId:_this11.appId},(0,router/* isWebTabsEnabled */.tj)()?(moduleName=_this11.$attrs.moduleName,moduleName+="&webTabId="+_this11.$attrs.tabId):moduleName=_this11.getCurrentModule().module,_this11.$route.query.module&&(moduleName=_this11.$route.query.module),"energy"===moduleName&&(moduleName="energyData"),url="/v3/report/foldersNew?moduleName="+moduleName,"custom"===moduleName&&(url="/v3/report/foldersNew?moduleName=custommodule"),!(0,router/* isWebTabsEnabled */.tj)()||"newreadingalarm"!=_this11.$attrs.moduleName&&"bmsalarm"!=_this11.$attrs.moduleName||(url="/v3/report/foldersNew?moduleName=alarm&webTabId="+_this11.$attrs.tabId),api/* API */.bl.get(url,params).then((function(resp){if(resp.error)self.loading=!1;else{var data=resp.data.reportFolders,treeData=data.map((function(d){if(d.expand=!1,self.reportId){var report=d.reports.find((function(rt){return rt.id===self.reportId}));report&&(d.expand=!0)}return d}));if(self.newReportTree=treeData,_this11.$route.query.folderId){
// this.expandFolder.push(parseInt(this.$route.query.folderId))
var folder=_this11.newReportTree.find((function(f){return f.id==parseInt(_this11.$route.query.folderId)}));_this11.selectedFolderObj=folder}else self.newReportTree.length>0&&(_this11.selectedFolderObj=treeData[0],_this11.leftPaneVisibility&&_this11.$router.push({path:"?folderId="+_this11.selectedFolderObj.id}));for(var key in self.selectedFolderObj?_this11.openFirstFolder(self.selectedFolderObj):self.loading=!1,self.newReportTree.length>0?_this11.reportNumber=!1:_this11.reportNumber=!0,self.newReportTree){var _folder=self.newReportTree[key],folderState={};folderState["name"]=_folder.name,folderState["newName"]=_folder.name,folderState["setting"]=!1,folderState["editFolder"]=!1}}}));case 11:case"end":return _context9.stop()}}),_callee9)})))()},triggerExport:function(type,row){var _this12=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee10(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context10){while(1)switch(_context10.prev=_context10.next){case 0:return _this12.exportType=type,_context10.next=3,_this12.getReportDetails(row.id);case 3:4===type?(_this12.getRoute(row.id),_this12.showImageOptionsDialog=!0):_this12.reportObject&&_this12.reportObject.report&&2===_this12.reportObject.report.type?3===type?(_this12.getRoute(row.id),_this12.showDialogId=row.id,_this12.showColumnSelectionDialog=!0):_this12.exportDialog=!0:(_this12.getRoute(row.id),_this12.exportData(type));case 4:case"end":return _context10.stop()}}),_callee10)})))()},getReportDetails:function(id){var _this13=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee11(){var params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context11){while(1)switch(_context11.prev=_context11.next){case 0:return params={},params["reportId"]=id,_context11.next=4,api/* API */.bl.put("/v3/report/execute",params).then((function(_ref7){var data=_ref7.data,error=_ref7.error;if(error)_this13.loading=!1,_this13.failed=!0;else{data.criteriaData&&(_this13.criteriaObj=data.criteriaData);var result=data;_this13.reportObject=data,result=_this13.specialHandler(result),_this13.moduleName=result.module.name,_this13.moduleId=result.module.moduleId;var self=_this13;if(0===result.reportData.data.length){if(self.loading=!1,-1!==result.report.dateOperator){var datePickerObject=NewDateHelper/* default */.Z.getDatePickerObject(result.report.dateOperator,result.report.dateValue);result["dateRange"]=datePickerObject,self.dateFilter=datePickerObject}result.xAggr=result.report.xAggr,self.resultObj=result}else{if(-1!==result.report.dateOperator){var _datePickerObject=NewDateHelper/* default */.Z.getDatePickerObject(result.report.dateOperator,result.report.dateValue);result["dateRange"]=_datePickerObject,self.dateFilter=_datePickerObject}else result["dateRange"]=self.dateFilter;result.xAggr=result.report.xAggr,self.reportObj=_this13.prepareReport(result),self.reportObj["report"]=result.report,
//self.resultObj is old result state here , from previous report load
self.resultObj=result,
// self.$emit('reportLoaded', self.reportObj, self.resultObj)
self.loading=!1}}}));case 4:case"end":return _context11.stop()}}),_callee11)})))()},onColumnSelection:function(fields){this.exportParams||(this.exportParams={}),fields&&fields.length&&(this.exportParams.fields=fields.join(",")),this.exportParams.pageLimit="all",this.showColumnSelectionDialog=!1,this.exportData(this.exportType)},exportData:function(type){var _this14=this,params=this.params;if(params&&(params.fileFormat=type,
/* params.exportInfo = {
        fileFormat: type
        } */
params.newFormat=!0),3!==type&&4!==type||(null==this.exportParams&&(this.exportParams={}),this.exportParams.showHeader=this.showHeader,this.exportParams.showPrintDetails=this.showPrintDetails),this.$message({message:"Exporting as "+this.$constants.FILE_FORMAT[type],showClose:!0,duration:0}),"energydata"!==this.moduleName){var _this$reportObject2,_this$reportObject3,moduleReportExportParams={};null!==(_this$reportObject2=this.reportObject)&&void 0!==_this$reportObject2&&null!==(_this$reportObject2=_this$reportObject2.report)&&void 0!==_this$reportObject2&&_this$reportObject2.id?(moduleReportExportParams["reportId"]=this.reportObject.report.id?this.reportObject.report.id:this.$route.params.reportid,this.reportObject&&this.reportObject.dateRange&&(moduleReportExportParams["startTime"]=this.reportObject.dateRange.value[0],moduleReportExportParams["endTime"]=this.reportObject.dateRange.value[1])):(moduleReportExportParams=(0,objectSpread2/* default */.Z)({},this.computedConfig),moduleReportExportParams["moduleName"]=this.moduleName),moduleReportExportParams["fileFormat"]=type,this.exportParams&&(moduleReportExportParams.exportParams=this.exportParams),3!==type&&4!==type||!this.url||(moduleReportExportParams.url=this.url),null!==this&&void 0!==this&&null!==(_this$reportObject3=this.reportObject)&&void 0!==_this$reportObject3&&null!==(_this$reportObject3=_this$reportObject3.filters)&&void 0!==_this$reportObject3&&_this$reportObject3.underlyingDataFilters&&0!==Object.keys(this.reportObject.filters.underlyingDataFilters).length&&(moduleReportExportParams["filters"]=JSON.stringify(this.reportObject.filters.underlyingDataFilters));var self=this;this.$http.post("/v2/report/exportModuleReport",moduleReportExportParams).then((function(response){element_ui_common.Message.closeAll(),response.data&&0===response.data.responseCode&&(self.exportDownloadUrl=response.data.result.fileUrl)}))}else{var url="/v2/report/export";this.reportObject&&this.reportObject.report&&4===this.reportObject.report.type&&this.reportObject.report.currentTemplate&&(url=url+"?templateString="+encodeURIComponent(JSON.stringify(this.reportObject.report.currentTemplate))),params||(params={}),this.analyParams&&(params=this.analyParams),3!==type&&4!==type||(params.exportParams=this.exportParams),this.$http.post(url,params).then((function(response){element_ui_common.Message.closeAll(),response.data&&0===response.data.responseCode&&(_this14.exportDownloadUrl=response.data.result.fileUrl)}))}},closeImageOptionsDialog:function(){this.showImageOptionsDialog=!1},handleReportDelete:function(obj){this.$refs["reportSidebar"]&&this.$refs["reportSidebar"].removeReport(obj)},getRoute:function(id){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var routeObj;routeObj=moduleName?"energydata"===moduleName?(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:moduleName}):(0,router/* findRouteForReport */.Mq)("module_reports",router/* pageTypes */.As.REPORT_VIEW,{moduleName:moduleName}):(0,router/* findRouteForReport */.Mq)("analytics_reports",router/* pageTypes */.As.REPORT_VIEW);var _ref8=routeObj||{},name=_ref8.name,url=this.$router.resolve({name:name}).href+"/"+id;this.url=url}},handleBackButton:function(){this.$route.params.reportid=null;var module=null;this.leftPaneVisibility||(this.isFolderClicked=!0,this.isReportPrevied=!1);var route_url=null;if(this.selectedFolderObj?(this.leftPaneVisibility=!this.leftPaneVisibility,(0,router/* isWebTabsEnabled */.tj)()||("custommodulenewreport"===this.$route.name?route_url="/app/ca/reports?folderId="+this.selectedFolderObj.id:(module=this.getCurrentModule().module,route_url=this.getModularReportURL(module)+"?folderId="+this.selectedFolderObj.id))):(this.leftPaneVisibility=!0,(0,router/* isWebTabsEnabled */.tj)()||(module=this.getCurrentModule().module,route_url=this.getModularReportURL(module))),(0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab2=(0,router/* findRouteForTab */.OD)(this.$attrs.tabId,router/* pageTypes */.As.REPORT_VIEW),name=_findRouteForTab2.name;route_url=this.$router.resolve({name:name,query:{folderId:this.selectedFolderObj.id}}).href}this.$router.replace({path:route_url}),history.replaceState({},"",window.location.origin+route_url),this.changeComponent=!1}}},report_Layoutvue_type_script_lang_js=Layoutvue_type_script_lang_js,Layout_component=(0,componentNormalizer/* default */.Z)(report_Layoutvue_type_script_lang_js,render,staticRenderFns,!1,null,"033d83af",null)
/* harmony default export */,Layout=Layout_component.exports},
/***/207018:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ModuleColumnSelection}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/components/ModuleColumnSelection.vue?vue&type=template&id=3c832206&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.visibility?_c("f-dialog",{attrs:{visible:_vm.visibility,width:"30%",maxHeight:"350px",title:"Select Columns",confirmTitle:"OK"},on:{save:_vm.onSave,close:_vm.close}},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):_c("el-checkbox-group",{attrs:{max:_vm.MAX_COLUMNS},model:{value:_vm.selectedNames,callback:function($$v){_vm.selectedNames=$$v},expression:"selectedNames"}},_vm._l(_vm.selectableFields,(function(field,index){return _c("div",{key:index},[_c("el-checkbox",{staticClass:"pT10 pB10",attrs:{label:field.name}},[_vm._v(_vm._s(field.displayName||field.name))])],1)})),0)],1):_vm._e()],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),FDialogNew=(__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(162506),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(436756)),ModuleColumnSelectionvue_type_script_lang_js={props:["moduleName","visibility","fields"],components:{FDialog:FDialogNew/* default */.Z},data:function(){return{loading:!1,metaFields:[],selectableFields:[],selectedNames:[],MAX_COLUMNS:12}},mounted:function(){this.fields&&(this.selectableFields=[{name:"id",displayName:"ID"}].concat((0,toConsumableArray/* default */.Z)(this.fields)),this.selectedNames=this.selectableFields.map((function(field){return field.name})),this.selectedNames.length>7&&this.selectedNames.splice(7,this.selectedNames.length)),this.loadMetaFields()},methods:{loadMetaFields:function(){var _this=this;this.loading=!0,this.$http.get("/module/metafields?moduleName=".concat(this.moduleName)).then((function(response){_this.metaFields=response.data.meta.fields||[];for(var i=0,j=_this.selectedNames.length;i<_this.metaFields.length;i++){var field=_this.metaFields[i];_this.selectedNames.includes(field.name)||(_this.selectableFields.push(field),j<7&&(_this.selectedNames.push(field.name),j++))}_this.loading=!1}))},onSave:function(){this.$emit("save",this.selectedNames)},close:function(){this.$emit("update:visibility",!1)}}},components_ModuleColumnSelectionvue_type_script_lang_js=ModuleColumnSelectionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ModuleColumnSelectionvue_type_script_lang_js,render,staticRenderFns,!1,null,"3c832206",null)
/* harmony default export */,ModuleColumnSelection=component.exports},
/***/995637:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"28819f73626316ae9c1527b9dd5cba58.svg";
/***/},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/},
/***/918562:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"67c59d9754464d20a038b48dbd7228fb.svg";
/***/},
/***/598685:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"274712e4f5ec9e2930d39e8197292de9.svg";
/***/},
/***/2175:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"7e35747b18170acc69a34bfa74280639.svg";
/***/},
/***/467886:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/default-img.d0e17bde.png"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/3803.js.map