"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[9523],{
/***/9523:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FieldMigration}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/FieldMigration.vue?vue&type=template&id=14011d42&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_vm._m(0),_c("div",{staticClass:"new-body-modal pB20 pR20",staticStyle:{height:"calc(100vh - 220px)"}},[_c("el-row",[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"label-txt2 pb10"},[_vm._v("Select Category")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"80%"},attrs:{filterable:"",placeholder:"Select Category"},on:{change:function($event){return _vm.loadReadingFields()}},model:{value:_vm.categoryId,callback:function($$v){_vm.categoryId=$$v},expression:"categoryId"}},_vm._l(_vm.assetCategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:category.id}})})),1)],1)])],1),_c("el-row",[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"label-txt2 pb10"},[_vm._v("Select Custom Fields")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"80%"},attrs:{filterable:"",placeholder:"Select Custom Field"},on:{change:function($event){return _vm.logMigration(_vm.customFieldId)}},model:{value:_vm.customFieldId,callback:function($$v){_vm.customFieldId=$$v},expression:"customFieldId"}},_vm._l(_vm.customField,(function(custom){return _c("el-option",{key:custom.id,attrs:{label:custom.displayName,value:custom.id}})})),1)],1)]),_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"label-txt2 pb10"},[_vm._v("Select Default Fields")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"80%"},attrs:{filterable:"",placeholder:"Select Default Field"},model:{value:_vm.defaultFieldId,callback:function($$v){_vm.defaultFieldId=$$v},expression:"defaultFieldId"}},_vm._l(_vm.defaultFields,(function(defaultField){return _c("el-option",{key:defaultField.id,attrs:{label:defaultField.displayName,value:defaultField.id}})})),1)],1)])],1),_c("el-row",{staticClass:"pT30"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"label-txt2 pb10"},[_vm._v("Select Assets")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"80%"},attrs:{placeholder:"Select Asset",filterable:"",multiple:""},model:{value:_vm.selectList,callback:function($$v){_vm.selectList=$$v},expression:"selectList"}},_vm._l(_vm.resourceList,(function(resource){return _c("el-option",{key:resource.resourceId,attrs:{label:resource.resourceId,value:resource.resourceId}})})),1)],1)]),_c("el-col",[_c("el-button",{on:{click:_vm.migrate}},[_vm._v(" Migrate")])],1)],1)],1)])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v("Reading Fields Migration")])])])}],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),FieldMigrationvue_type_script_lang_js={title:function(){return"Space Category"},data:function(){return{categoryId:null,defaultFields:null,customField:null,selectList:[],defaultFieldId:null,customFieldId:null,resourceList:null}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),mounted:function(){this.$store.dispatch("loadAssetCategory")},created:function(){this.$store.dispatch("loadAssetCategory")},methods:{loadReadingFields:function(){var _this=this;(0,validation/* isEmpty */.xb)(this.categoryId)||this.$util.loadAssetReadingCustomNDefaultFields(this.categoryId).then((function(response){_this.customField=response[1],_this.defaultFields=response[0]}))},migrate:function(){var _this2=this;if(this.customFieldId&&this.defaultFieldId){var params={};params.toField=this.customFieldId,params.fromField=this.defaultFieldId,params.assetsId=this.selectList,this.$http.post("v2/fieldMigrate/migrate",params).then((function(response){0===response.data.responseCode?_this2.$message.success(" Migrated Successfully."):1===response.data.responseCode&&_this2.$message.console.error("Error Occurred ")}))}},logMigration:function(fieldIds){var _this3=this,params={};
// if (this.customFieldId && this.defaultFieldId) {
params.toField=fieldIds,params.categoryId=this.categoryId,
// params.fromField = this.defaultFieldId
this.$http.post("v2/fieldMigrate/fieldDependency",params).then((function(response){0===response.data.responseCode&&(_this3.resourceList=response.data.result.resourceList)}))}// }
}},setup_FieldMigrationvue_type_script_lang_js=FieldMigrationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_FieldMigrationvue_type_script_lang_js,render,staticRenderFns,!1,null,"14011d42",null)
/* harmony default export */,FieldMigration=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/9523.js.map