"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[13247],{
/***/263869:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SurveyListPage}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/survey/SurveyListPage.vue?vue&type=template&id=134f96ac&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isSummaryOpen?_c("div",{staticClass:"height100"},[_vm.showLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("Spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm._e()]):_c("CommonListLayout",{key:_vm.moduleName+"-list-layout",staticClass:"custom-module-list-layout survey-list-page",attrs:{moduleName:_vm.moduleName,showViewRearrange:!0,showViewEdit:!0,visibleViewCount:3,getPageTitle:function(){return _vm.moduleDisplayName},hideSubHeader:_vm.canHideSubHeader,recordCount:_vm.recordCount,recordLoading:_vm.showLoading},scopedSlots:_vm._u([{key:"header",fn:function(){return[_vm.isEmpty(_vm.viewname)?_vm._e():[_vm.canHideFilter?_vm._e():_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName}}),_vm.canShowVisualSwitch?[_c("visual-type",{on:{onSwitchVisualize:function(val){return _vm.canShowListView=val}}})]:_vm._e()]]},proxy:!0},{key:"sub-header-actions",fn:function(){return[!_vm.isEmpty(_vm.records)&&_vm.showListView?[_c("pagination",{staticClass:"fc-black-small-txt-12 pagination-fix-content",attrs:{total:_vm.recordCount,currentPageCount:_vm.currentPageCount,perPage:_vm.perPage,skipTotalCount:!0}})]:_vm._e()]},proxy:!0},{key:"content",fn:function(){return[_vm.showLoading?_c("Spinner",{staticClass:"mT40",attrs:{show:_vm.showLoading}}):_vm.isEmpty(_vm.viewname)?_c("div",{staticClass:"cm-view-empty-state-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"mB20 label-txt-black f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.no_view_config"))+" ")]),_c("el-button",{staticClass:"add-view-btn",attrs:{type:"primary"},on:{click:_vm.openViewCreation}},[_c("span",{staticClass:"btn-label"},[_vm._v(_vm._s(_vm.$t("viewsmanager.list.add_view")))])])],1):_vm.isEmpty(_vm.records)?_c("div",{staticClass:"cm-empty-state-container"},[_c("InlineSvg",{staticClass:"self-center",attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxxlg emptystate-icon-size "}}),_c("div",{staticClass:"fc-black-dark f18 bold pL50 mT10 line-height10 self-center"},[_vm._v(" "+_vm._s(_vm.$t("survey.empty_state"))+" ")])],1):[_c("div",{staticClass:"cm-list-container"},[_c("CommonList",{key:"viewname-"+_vm.viewname,attrs:{viewDetail:_vm.viewDetail,records:_vm.records,moduleName:_vm.moduleName,redirectToOverview:_vm.redirectToOverview,hideListSelect:!0,slotList:_vm.slotList,refreshList:_vm.onCustomButtonSuccess},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex ellipse-style id-style"},[_c("div",[_vm._v(" "+_vm._s("#"+record[_vm.slotList[0].name])+" ")])])]}},{key:_vm.slotList[1].criteria,fn:function(ref){var record=ref.record;return[_c("el-tooltip",{attrs:{effect:"dark",content:record.name||"---",placement:"top-start","open-delay":600}},[_c("div",{staticClass:"self-center width200px pointer label-txt-black ellipsis main-field-column inline-style",on:{click:function($event){return _vm.sidePanelForIndividualSurvey(record.id)}}},[_c("span",{staticClass:"list-main-field"},[_vm._v(_vm._s(record.name||"---"))])])])]}},{key:_vm.slotList[3].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[_c("div",[_vm._v(_vm._s(_vm.calculateScoreDetails(record)))])])]}}],null,!0)})],1)]]},proxy:!0}])},[_c("portal",{attrs:{to:"view-manager-link"}}),_c("IndividualSurveyResult",{ref:"user-response",attrs:{showResultDialog:_vm.showIndividualResponse,details:_vm.details,surveyLoading:_vm.surveyLoading},on:{"update:showResultDialog":function($event){_vm.showIndividualResponse=$event},"update:show-result-dialog":function($event){_vm.showIndividualResponse=$event},"update:surveyLoading":function($event){_vm.surveyLoading=$event},"update:survey-loading":function($event){_vm.surveyLoading=$event}}})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),defineProperty=__webpack_require__(482482),CommonModuleList=(__webpack_require__(648324),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(347446)),IndividualSurveyResult=__webpack_require__(640879),validation=__webpack_require__(990260),SurveyUtil=__webpack_require__(575369),router=__webpack_require__(329435),SurveyListPagevue_type_script_lang_js={extends:CommonModuleList["default"],data:function(){return{showIndividualResponse:!1,recordName:"",details:{},surveyLoading:!1}},components:{IndividualSurveyResult:IndividualSurveyResult/* default */.Z},computed:{slotList:function(){return[{name:"id",isHardcodedColumn:!0,columnAttrs:{"min-width":110,label:"ID",fixed:"left"}},{criteria:JSON.stringify({name:"name"})},{name:"editDelete",isActionColumn:!0,columnAttrs:{width:130,class:"visibility-visible-actions",fixed:"right"}},{name:"score",isHardcodedColumn:!0,columnAttrs:{"min-width":110,label:"SCORE",fixed:"right"}}]},filters:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},search=_ref2.search,searchdata=(0,validation/* isEmpty */.xb)(search)?null:JSON.parse(search),viewname=this.viewname,moduleFilter=null;"workorder"===viewname?moduleFilter="workOrderId":"serviceRequest"===viewname&&(moduleFilter="serviceRequestId");var filter=null;(0,validation/* isEmpty */.xb)(moduleFilter)||(filter=(0,defineProperty/* default */.Z)({},moduleFilter,{operatorId:2,value:null}));var filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},searchdata),filter);return filters}},methods:{sidePanelForIndividualSurvey:function(surveyId){this.showIndividualResponse=!0,this.loadSurveyDetail(surveyId)},loadSurveyDetail:function(selectedSurveyId){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var selectedSurvey;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.surveyLoading=!0,selectedSurvey={},selectedSurvey.id=selectedSurveyId,_context.next=5,(0,SurveyUtil/* getSurveyDetails */["if"])(selectedSurvey);case 5:_this.details=_context.sent,_this.recordName=_this.$getProperty(_this,"details.name","---"),_this.surveyLoading=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},calculateScoreDetails:function(record){var fullScore=this.$getProperty(record,"fullScore","");if((0,validation/* isEmpty */.xb)(fullScore))return"N/A";var totalScore=this.$getProperty(record,"totalScore","");return(0,validation/* isEmpty */.xb)(totalScore)?void 0:"".concat(totalScore,"/").concat(fullScore)},openList:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _ref3=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.LIST)||{},name=_ref3.name;name&&this.$router.push({name:name,query:this.$route.query})}else this.$router.push({name:"survey-list",query:this.$route.query})}}},survey_SurveyListPagevue_type_script_lang_js=SurveyListPagevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(survey_SurveyListPagevue_type_script_lang_js,render,staticRenderFns,!1,null,"134f96ac",null)
/* harmony default export */,SurveyListPage=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/13247.js.map