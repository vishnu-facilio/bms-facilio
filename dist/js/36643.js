"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[36643,10321,32686,80865,53021],{
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports},
/***/848277:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CustomModuleSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/custom-module/CustomModuleSummary.vue?vue&type=template&id=2c44e6b2&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom-module-overview",class:_vm.customClass},[_vm.isLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.record)?_vm._e():[_c("div",{staticClass:"header p20"},[_c("div",{staticClass:"custom-module-details"},[_c("div",{staticClass:"d-flex flex-middle align-center"},[_vm.showPhotoField?_c("div",{staticClass:"mR5"},[_vm.record[_vm.photoFieldName]?_c("div",[_vm.$helpers.isLicenseEnabled("THROW_403_WEBTAB")?_c("img",{staticClass:"img-container",attrs:{src:_vm.record.getImageUrl("photoUrl")}}):_c("img",{staticClass:"img-container",attrs:{src:_vm.record.getImage(_vm.photoFieldName)}})]):_vm.showAvatar?_c("div",[_c("avatar",{attrs:{size:"lg",user:{name:_vm.record.name}}})],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"mL5"},[_c("div",{staticClass:"custom-module-id"},[_vm.$account.portalInfo?_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{animateFill:!1,animation:"shift-toward"},expression:"{ animateFill: false, animation: 'shift-toward' }"}],staticClass:"el-icon-back fc-grey3-text14 fw6 pR10 pointer",attrs:{content:"back",arrow:""},on:{click:_vm.back}}):_vm._e(),_vm._v(" #"+_vm._s(_vm.record&&_vm.record.id)+" ")]),_c("div",{staticClass:"custom-module-name "},[_c("div",{staticClass:"d-flex max-width300px"},[_c("el-tooltip",{attrs:{placement:"bottom",effect:"dark",content:_vm.record[_vm.mainFieldKey]}},[_c("span",{staticClass:"whitespace-pre-wrap custom-header"},[_vm._v(_vm._s(_vm.record[_vm.mainFieldKey]))])])],1),_vm.record.isStateFlowEnabled()&&_vm.record.currentModuleState()?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.record.currentModuleState())+" ")]):_vm._e()])])])]),_c("div",{staticClass:"marginL-auto flex-middle"},[_c("CustomButton",{staticClass:"pR10",attrs:{record:_vm.record,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.refreshData()},onError:function(){}}}),_vm.record.isStateFlowEnabled()?[_c("TransitionButtons",{key:_vm.record.id+"transitions",staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.record,disabled:_vm.record.isApprovalEnabled(),buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.refreshData()},transitionFailure:function(){}}})]:_vm._e(),_vm.record.isApprovalEnabled()?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.record.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.record,hideApprovers:_vm.shouldHideApprovers},on:{onSuccess:function($event){return _vm.refreshData()},onFailure:function(){}}})],1):_vm._e(),_vm.showEdit?_c("el-button",{staticClass:"fc-wo-border-btn pL15 pR15 self-center",attrs:{type:"button"},on:{click:_vm.editRecord}},[_c("i",{staticClass:"el-icon-edit"})]):_vm._e()],2)]),_c("Page",{key:_vm.record.id,attrs:{module:_vm.moduleName,id:_vm.record.id,details:_vm.record,primaryFields:_vm.primaryFields,notesModuleName:_vm.notesModuleName,isV3Api:!0,attachmentsModuleName:_vm.attachmentsModuleName}})]],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),PageBuilder=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(760218)),api=__webpack_require__(32284),router=__webpack_require__(329435),CustomButton=__webpack_require__(623857),CustomButtonUtil=__webpack_require__(746095),TransitionButtons=__webpack_require__(987612),ApprovalBar=__webpack_require__(42525),constant=__webpack_require__(354754),CustomModuleData=__webpack_require__(689565),eventBus=__webpack_require__(398011),CustomModuleSummaryvue_type_script_lang_js={name:"CustomModuleSummary",components:{Page:PageBuilder/* default */.Z,CustomButton:CustomButton/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,ApprovalBar:ApprovalBar/* default */.Z},data:function(){return{isLoading:!1,record:null,primaryFields:[],notesModuleName:"cmdnotes",attachmentsModuleName:"cmdattachments",formFields:null,POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,customClass:""}},created:function(){this.$store.dispatch("loadApprovalStatus")},mounted:function(){eventBus/* eventBus */.Y.$on("refresh-overview",this.refreshData)},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("refresh-overview",this.refreshData)},computed:{moduleName:function(){return this.$route.params.moduleName?this.$route.params.moduleName:this.$attrs.moduleName||""},id:function(){var paramId=this.$attrs.id||this.$route.params.id;return paramId&&"null"!==paramId?parseInt(this.$route.params.id):""},showEdit:function(){var $org=this.$org,$hasPermission=this.$hasPermission,record=this.record,orgIdsToCheck=constant/* default */.Z.isCustomModulePermissionsEnabled,canShowEdit=!orgIdsToCheck($org.id)&&!(0,router/* isWebTabsEnabled */.tj)()||$hasPermission("".concat(this.moduleName,":UPDATE"));return canShowEdit&&record.canEdit()},mainFieldKey:function(){return"name"},photoFieldName:function(){return"photoId"},showPhotoField:function(){var formFields=this.formFields;if(formFields){var photoField=formFields.find((function(field){return"photo"===field.name}));return!!photoField&&!photoField.hideField}return!1},showAvatar:function(){return!1},shouldHideApprovers:function(){return!1},modelDataClass:function(){return CustomModuleData/* CustomModuleData */.u}},watch:{id:{handler:function(){this.loadRecord(!0)},immediate:!0},moduleName:function(){this.loadRecord(!0)}},methods:{refreshData:function(){this.loadRecord(!0)},loadRecord:function(){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,moduleName,id;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_context.prev=1,moduleName=_this.moduleName,id=_this.id,_this.isLoading=!0,_context.next=6,_this.modelDataClass.fetch({moduleName:moduleName,id:id,force:force});case 6:return _this.record=_context.sent,_context.next=9,_this.getFormMeta();case 9:_context.next=14;break;case 11:_context.prev=11,_context.t0=_context["catch"](1),_this.$message.error((null===_context.t0||void 0===_context.t0?void 0:_context.t0.message)||_this.$t("custommodules.summary.record_summary_error"));case 14:_this.isLoading=!1;case 15:case"end":return _context.stop()}}),_callee,null,[[1,11]])})))()},editRecord:function(){var moduleName=this.moduleName,id=this.id;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref.name;name&&this.$router.push({name:name,params:{id:id}})}else{var creationName="custommodules-edit";this.$router.push({name:creationName,params:{moduleName:moduleName,id:id}})}},getFormMeta:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this2$record,_this2$record2,formId,moduleName,url,_yield$API$get,data,error,formFields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2$record=_this2.record,_this2$record2=void 0===_this2$record?{}:_this2$record,formId=_this2$record2.formId,moduleName=_this2.moduleName,url="/v2/forms/".concat(moduleName),_context2.next=4,api/* API */.bl.get(url,{formId:formId||-1});case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(formFields=(data.form||{}).fields,_this2.formFields=formFields);case 8:case"end":return _context2.stop()}}),_callee2)})))()},back:function(){this.$router.go(-1)}}},custom_module_CustomModuleSummaryvue_type_script_lang_js=CustomModuleSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(custom_module_CustomModuleSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"2c44e6b2",null)
/* harmony default export */,CustomModuleSummary=component.exports},
/***/472646:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return poMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(538077),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(990260)),api=__webpack_require__(32284),poMixinvue_type_script_lang_js={props:["details","resizeWidget"],data:function(){return{uomEnumMap:{},fieldsMap:{},isLoading:!0}},computed:{isSummary:function(){return"poSummary"===this.$route.name},canShowBillToShowAddress:function(){return!(0,validation/* isEmpty */.xb)(this.details.vendor)||this.isAddressFieldNotEmpty(this.details.billToAddress)},canShowShipToShowAddress:function(){return!(0,validation/* isEmpty */.xb)(this.details.storeRoom)||this.isAddressFieldNotEmpty(this.details.shipToAddress)}},mounted:function(){var _this=this;this.isLoading=!0,Promise.all([this.loadPurchaseOrderModuleMeta(),this.loadLineItemsModuleMeta()]).then((function(){_this.isLoading=!1})).then((function(){_this.autoResize()}))},methods:{autoResize:function(){var _this2=this;this.$nextTick((function(){if(!(0,validation/* isEmpty */.xb)(_this2.$refs["preview-container"])){var height=_this2.$refs["preview-container"].scrollHeight+80,width=_this2.$refs["preview-container"].scrollWidth;_this2.resizeWidget&&_this2.resizeWidget({height:height,width:width})}}))},isAddressFieldNotEmpty:function(value){return value&&(value.city||value.state||value.street||value.country||value.zip)},loadLineItemsModuleMeta:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,data,error,message,fields,uomField;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,api/* API */.bl.get("/v2/modules/meta/purchaseorderlineitems");case 2:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(message=error.message,_this3.$messsage.error(message||_this3.$t("common._common.error_occured_while_fetching_purchase_order_line_items_module_meta"))):(fields=_this3.$getProperty(data,"meta.fields",[]),uomField=fields.filter((function(field){return"unitOfMeasure"===field.name})),(0,validation/* isEmpty */.xb)(uomField)||(_this3.uomEnumMap=_this3.$getProperty(uomField,[0,"enumMap"],{})));case 6:case"end":return _context.stop()}}),_callee)})))()},loadPurchaseOrderModuleMeta:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get2,data,error,message,fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/v2/modules/meta/purchaseorder");case 2:_yield$API$get2=_context2.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?(message=error.message,_this4.$messsage.error(message||_this4.$t("common._common.error_occured_while_fetching_purchase_request_module_meta"))):(fields=_this4.$getProperty(data,"meta.fields",[]),fields.forEach((function(field){_this4.$setProperty(_this4.fieldsMap,"".concat(field.name),field)})));case 6:case"end":return _context2.stop()}}),_callee2)})))()},routeToWOSummary:function(id){this.isSummary&&this.$router.push({path:"/app/wo/orders/summary/".concat(id)})}}},mixin_poMixinvue_type_script_lang_js=poMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixin_poMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,poMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/627426:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return RequestForQuotationSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/purchase/rfq/RequestForQuotationSummary.vue?vue&type=template&id=3dee815c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom-module-overview",class:_vm.$validation.isEmpty(_vm.customClass)?"":_vm.customClass},[_vm.isLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.record)?_vm._e():[_c("div",{staticClass:"header p20"},[_c("div",{staticClass:"custom-module-details"},[_c("div",{staticClass:"d-flex flex-middle align-center"},[_c("div",{staticClass:"mL5"},[_c("div",{staticClass:"custom-module-id"},[_vm.$account.portalInfo?_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{animateFill:!1,animation:"shift-toward"},expression:"{ animateFill: false, animation: 'shift-toward' }"}],staticClass:"el-icon-back fc-grey3-text14 fw6 pR10 pointer",attrs:{content:"back",arrow:""},on:{click:_vm.back}}):_vm._e(),_vm._v(" #"+_vm._s(_vm.record&&_vm.record.id)+" ")]),_c("div",{staticClass:"custom-module-name d-flex mT4"},[_vm.record.isRecordLocked()?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fa fa-lock locked-wo",attrs:{"data-arrow":"true",title:_vm.$t("common._common.locked_state")}}):_vm._e(),_c("div",{staticClass:"d-flex max-width300px"},[_c("el-tooltip",{attrs:{placement:"bottom",effect:"dark",content:_vm.record[_vm.mainFieldKey]}},[_c("span",{staticClass:"whitespace-pre-wrap custom-header"},[_vm._v(_vm._s(_vm.record[_vm.mainFieldKey]))])])],1),_vm.record.isStateFlowEnabled()&&_vm.record.currentModuleState()?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.record.currentModuleState())+" ")]):_vm._e()])])])]),_c("div",{staticClass:"marginL-auto flex-middle"},[_c("CustomButton",{staticClass:"pR10",attrs:{record:_vm.record,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.refreshData()},onError:function(){}}}),_vm.record.isDiscarded?_vm._e():_c("div",{staticClass:"marginL-auto flex-middle"},[_vm.downloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.downloadUrl}}):_vm._e(),_vm.record.isStateFlowEnabled()?[_c("TransitionButtons",{key:_vm.record.id+"transitions",staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.record,disabled:_vm.record.isApprovalEnabled(),buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.refreshData()},transitionFailure:function(){}}})]:_vm._e(),_vm.record.isApprovalEnabled()?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.record.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.record,hideApprovers:_vm.shouldHideApprovers},on:{onSuccess:function($event){return _vm.refreshData()},onFailure:function(){}}})],1):_vm._e(),_vm.record.isRfqFinalized||_vm.record.isApprovalEnabled()?_vm._e():_c("el-button",{staticClass:"fc__add__btn mR15",attrs:{loading:_vm.isButtonLoading},on:{click:function($event){return _vm.clickAction("publish_rfq")}}},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.publish_rfq"))+" ")]),_vm.showQuotesReceived?_c("el-button",{staticClass:"fc__add__btn mR15",attrs:{loading:_vm.isButtonLoading},on:{click:function($event){return _vm.clickAction("receive_quote")}}},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.close_submission"))+" ")]):_vm._e(),_vm.checkIsQuoteNotAwarded?_c("el-button",{staticClass:"fc__add__btn mR15",attrs:{loading:_vm.isButtonLoading},on:{click:function($event){return _vm.clickAction("award_vendors")}}},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.assess_and_award"))+" ")]):_vm._e(),_vm.checkIsQuoteAwarded?_c("el-button",{staticClass:"fc__add__btn mR15",attrs:{loading:_vm.isButtonLoading},on:{click:function($event){return _vm.clickAction("award_vendors")}}},[_vm._v(_vm._s(_vm.$t("common.inventory.summary")))]):_vm._e(),_c("el-button-group",{staticClass:"fc-group-btn2 flex-middle"},[_c("el-button",{attrs:{type:"primary"},on:{click:_vm.downloadPdf}},[_c("inline-svg",{attrs:{src:"svgs/download2",iconClass:"icon vertical-middle icon-sm fill-grey2"}})],1),_c("el-button",{attrs:{type:"primary"},on:{click:_vm.openPrintPreview}},[_c("inline-svg",{attrs:{src:"svgs/print2",iconClass:"icon vertical-middle icon-sm fill-grey2"}})],1)],1),_vm.showDropDown?_c("el-dropdown",{staticClass:"mL10 self-center fc-btn-ico-lg pT3 pB3 pL8 pR8 pointer",attrs:{trigger:"click"},on:{command:function(action){return _vm.summaryDropDownAction(action)}}},[_c("span",{staticClass:"el-dropdown-link"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"svgs/menu",iconClass:"icon icon-md"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.showEdit?_c("el-dropdown-item",{key:1,attrs:{command:"edit_rfq"}},[_vm._v(_vm._s(_vm.$t("common.header.edit_rfq")))]):_vm._e(),_c("el-dropdown-item",{key:2,attrs:{command:"discard_rfq"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.discard_rfq"))+" ")])],1)],1):_vm._e()],2)],1)]),_c("Page",{key:_vm.record.id,attrs:{module:_vm.moduleName,id:_vm.record.id,details:_vm.record,primaryFields:_vm.primaryFields,notesModuleName:_vm.notesModuleName,isV3Api:!0,attachmentsModuleName:_vm.attachmentsModuleName}})],_vm.showAwardVendorsDialog?_c("AwardVendors",{attrs:{record:_vm.record,moduleName:_vm.moduleName,onClose:function(){return _vm.showAwardVendorsDialog=!1}},on:{saved:function($event){return _vm.loadRecord(!0)}}}):_vm._e(),_vm.$getProperty(_vm.record,"isDiscarded",!1)?_c("portal",{attrs:{to:"pagebuilder-fixed-top"}},[_c("div",{staticClass:"vendorquote-banner-msg-container vendorquote-discarded-banner z-10"},[_c("fc-icon",{staticClass:"vq-warning-icon",attrs:{group:"dsm",name:"warning",color:"#324056"}}),_c("span",{staticClass:"vendor-quotes-banner-msg"},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.rfq_discarded")))])],1)]):_vm._e(),_vm.showClosedBidBanner?_c("portal",{attrs:{to:"pagebuilder-fixed-top"}},[_c("div",{staticClass:"vendorquote-banner-msg-container vendorquote-closed-bid-banner z-10"},[_c("fc-icon",{staticClass:"vq-warning-icon",attrs:{group:"dsm",name:"warning",color:"#324056"}}),_c("span",{staticClass:"vendor-quotes-banner-msg"},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.vendor_quote_closed_bid")))])],1)]):_vm._e()],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),CustomModuleSummary=(__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(670560),__webpack_require__(848277)),api=__webpack_require__(32284),AwardVendorsvue_type_template_id_724f5220_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:!0,"before-close":_vm.onClose,title:_vm.$t("common.header.vendor_comparision"),width:"90%","custom-class":"vendorComparisonDialog fc-web-form-dialog","append-to-body":!0}},[_c("div",{staticClass:"fixed-header-vendor"},[_vm.lineItemsCheckedCount?_c("div",{staticClass:"height30 fwBold awarded-Items"},[_c("div",{staticClass:"text-center pT5"},[_vm._v(" "+_vm._s(_vm.awardedInTotal)+" ")])]):_vm._e(),_c("div",{staticClass:"search-vendors flex justify-content-space"},[_vm.vendorViewVisibility?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2 mT10",attrs:{type:"text",placeholder:_vm.$t("common._common.search_vendor")},on:{change:_vm.filterVendorQuotes},model:{value:_vm.searchVendor,callback:function($$v){_vm.searchVendor=$$v},expression:"searchVendor"}})],1):_vm._e(),_vm.lineItemViewVisibility?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2 mT10",attrs:{type:"text",placeholder:_vm.$t("common._common.search_lineitem")},on:{change:_vm.filterRfqLineItem},model:{value:_vm.searchLineItem,callback:function($$v){_vm.searchLineItem=$$v},expression:"searchLineItem"}})],1):_vm._e(),_c("div",{staticClass:"flex"},[_c("fc-icon",{staticClass:"fc-icon-award-vendors",attrs:{group:"default",size:"12",name:"eye-open"}}),_c("div",{staticClass:"mT20 mL5 mR5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_as"))+" ")]),_c("div",{staticClass:"dialog-button-wrap"},[_c("div",{staticClass:"button-wrap"},[_c("el-button",{class:{active:!_vm.vendorViewVisibility},attrs:{size:"mini"},on:{click:_vm.openVendorViewDialog}},[_c("div",{staticClass:"flex"},[_c("fc-icon",{attrs:{size:"12",group:"webtabs",name:"vendor"}}),_c("div",{staticClass:"mL5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.vendor"))+" ")])],1)]),_c("el-button",{class:{active:!_vm.lineItemViewVisibility},attrs:{size:"mini"},on:{click:_vm.openLineItemViewDialog}},[_c("fc-icon",{staticClass:"lineitem-icon-rfq",attrs:{group:"dsm",name:"line-item",size:"10"}}),_vm._v(" "+_vm._s(_vm.$t("common._common.line_item"))+" ")],1)],1)])],1)])]),_vm.vendorViewVisibility?[_vm.$validation.isEmpty(_vm.filteredVendorQuotes)?_c("div",[_c("div",{staticClass:"flex-middle justify-content-center wo-flex-col flex-direction-column",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"pT10 fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_matching_data"))+" ")])],1)]):_vm._l(_vm.filteredVendorQuotes,(function(vendorQuote){return _c("div",{key:vendorQuote.id},[_c("RfqComparisonVendorView",{attrs:{isAwarded:_vm.isAwarded,vendorQuote:vendorQuote,vendorQuotes:_vm.vendorQuotes,lineItemTotalCount:_vm.lineItemTotalCount,lineItemsCheckedCount:_vm.lineItemsCheckedCount,lineItemsChecked:_vm.lineItemsChecked,taxDetails:_vm.allTaxes},on:{setLineItemsChecked:_vm.setLineItemsChecked,setlineItemsCheckedCount:_vm.setlineItemsCheckedCount}})],1)}))]:_vm._e(),_vm.lineItemViewVisibility?[_vm.$validation.isEmpty(_vm.filteredRfqLineItems)?_c("div",[_c("div",{staticClass:"flex-middle justify-content-center wo-flex-col flex-direction-column",staticStyle:{"margin-top":"10%"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"pT10 fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_matching_data"))+" ")])],1)]):_vm._l(_vm.filteredRfqLineItems,(function(rfqLineItem,index){return _c("div",{key:rfqLineItem.id},[_c("RfqComparisonLineItemView",{attrs:{isAwarded:_vm.isAwarded,rfqLineItem:rfqLineItem,filteredRfqLineItems:_vm.filteredRfqLineItems,index:index,taxDetails:_vm.allTaxes,vendorQuotesLineItems:_vm.vendorQuotesLineItems,lineItemsChecked:_vm.lineItemsChecked},on:{setLineItemsChecked:_vm.setLineItemsChecked,setlineItemsCheckedCount:_vm.setlineItemsCheckedCount}})],1)}))]:_vm._e(),_vm.isAwarded?_vm._e():_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",class:{active:_vm.awardButtonClass},attrs:{loading:_vm.isButtonLoading,type:"primary"},on:{click:_vm.saveRecord}},[_vm._v(_vm._s(_vm.$t("common.header.award")))])],1)],2)},AwardVendorsvue_type_template_id_724f5220_scoped_true_staticRenderFns=[],objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(648324),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(990260)),RfqComparisonVendorViewvue_type_template_id_6fbd2f5c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"disable-actions",class:{active:_vm.canDisableClickActions}},[_c("div",{staticClass:"empty-space-between"}),_c("div",{staticClass:"disabled-row",class:{active:_vm.canDisableMarkAll(_vm.vendorQuote)}},[_c("div",{staticClass:"flex justify-content-space"},[_c("div",{staticClass:"vendor-name"},[_c("div",{staticClass:"mR10"},[_c("el-checkbox",{attrs:{disabled:_vm.canDisableMarkAll(_vm.vendorQuote)},on:{change:function($event){return _vm.markAll(_vm.vendorQuote,_vm.checked)}},model:{value:_vm.checked,callback:function($$v){_vm.checked=$$v},expression:"checked"}})],1),_c("div",{staticClass:"flex"},[_c("fc-icon",{staticClass:"fc-icon-vendor",attrs:{size:"12",group:"webtabs",name:"vendor"}}),_vm._v(" "+_vm._s(_vm.getVendorName(_vm.vendorQuote))+" ")],1)]),_vm.lineItemsCheckedCount?_c("div",{staticClass:"width15 awarded-Items"},[_c("div",{staticClass:"mT15 mL15"},[_vm._v(" "+_vm._s(_vm.$t("common._common.awarded"))+" "),_c("div",{staticClass:"fwBold"},[_vm._v(" "+_vm._s(_vm.showAwardedInVendor(_vm.vendorQuote))+" ")])])]):_vm._e()]),_c("div",{staticClass:"vendor-quotes-lineitems-table"},[_c("el-table",{attrs:{data:_vm.getVendorQuotesLineItems(_vm.vendorQuote),"row-class-name":_vm.getDisabledRowClassName,border:""}},[_c("el-table-column",{staticClass:"mL5",attrs:{label:_vm.$t("common.header.award"),width:"100","class-name":"award-column"},scopedSlots:_vm._u([{key:"default",fn:function(vendorQuoteLineItem){return[_c("el-checkbox",{attrs:{disabled:_vm.checkIsDisabled(vendorQuoteLineItem.row)},on:{change:function($event){return _vm.setMarkedLineItems(vendorQuoteLineItem.row.checked)}},model:{value:vendorQuoteLineItem.row.checked,callback:function($$v){_vm.$set(vendorQuoteLineItem.row,"checked",$$v)},expression:"vendorQuoteLineItem.row.checked"}})]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("common.header.item_description"),"min-width":"192","class-name":"item-name-vq"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"flex flex-no-wrap"},[_c("fc-icon",{staticClass:"mT5 mR5",attrs:{group:"dsm",name:"line-item",size:"12"}}),_c("div",{staticClass:"flex flex-direction-column"},[_c("span",{staticClass:"fwBold"},[_vm._v(_vm._s(_vm.getItemName(scope.row)))]),_vm._v(" "+_vm._s(_vm.getItemDescription(scope.row))+" ")])],1)]}}])}),_c("el-table-column",{attrs:{formatter:_vm.uom,label:_vm.$t("quotation.common.uom"),"min-width":"76"}}),_c("el-table-column",{attrs:{prop:"quantity",label:_vm.$t("common._common.quantity"),"class-name":"right-align-elements","min-width":"128"}}),_c("el-table-column",{attrs:{prop:"counterPrice",formatter:_vm.getCounterPrice,label:_vm.$t("common.inventory.quoted_unit_price")+" ("+_vm.$currency+")","class-name":"custom-class-price right-align-elements","min-width":"192"}}),_c("el-table-column",{attrs:{formatter:_vm.getTaxPercentage,label:_vm.$t("common.inventory.tax_percentage")+" (%)","min-width":"164"}}),_c("el-table-column",{attrs:{formatter:_vm.getTaxAmount,label:_vm.$t("common.inventory.tax_amount")+" ("+_vm.$currency+")","min-width":"148"}}),_c("el-table-column",{attrs:{prop:"amount",formatter:_vm.getAmount,label:_vm.$t("common.inventory.quoted_amount")+" ("+_vm.$currency+")","class-name":"right-align-elements ","min-width":"164"}}),_c("el-table-column",{attrs:{prop:"remarks",formatter:_vm.getRemarks,label:_vm.$t("common.wo_report._remarks"),"min-width":"128"}})],1)],1),_c("div",{staticClass:"height50 total-amount "},[_c("div",{staticClass:"pT15 pR50 text-right"},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.total_quoted_amount")+" ("+_vm.$currency+")")+" ")]),_c("div",{staticClass:"pT15"},[_vm._v(" "+_vm._s(_vm.getTotalAmount(_vm.vendorQuote))+" ")])])])])},RfqComparisonVendorViewvue_type_template_id_6fbd2f5c_scoped_true_staticRenderFns=[],RfqMixin=__webpack_require__(308486),LineItemsMixin=__webpack_require__(364122),RfqComparisonVendorViewvue_type_script_lang_js={props:["isAwarded","vendorQuote","lineItemsCheckedCount","vendorQuotes","lineItemTotalCount","lineItemsChecked","taxDetails"],mixins:[RfqMixin/* default */.Z,LineItemsMixin/* default */.Z],data:function(){return{checked:!1}},created:function(){this.setTaxes(),this.setMarkedLineItems()},watch:{lineItemsCheckedCount:function(newVal,oldVal){oldVal!=newVal&&this.setMarkAll()},taxDetails:function(val){this.$setProperty(this,"allTaxes",val)}},computed:{canDisableClickActions:function(){var _ref=this||{},isAwarded=_ref.isAwarded;return isAwarded}},methods:{setTaxes:function(){var _ref2=this||{},taxDetails=_ref2.taxDetails;this.allTaxes=taxDetails},getVendorName:function(val){return this.$getProperty(val,"vendor.name","---")},getVendorQuotesLineItems:function(val){return this.$getProperty(val,"vendorQuotesLineItems")},showAwardedInVendor:function(vendorQuote){var count,checkedLineItems={},_ref3=vendorQuote||{},vendorQuotesLineItems=_ref3.vendorQuotesLineItems;checkedLineItems=vendorQuotesLineItems.filter((function(vendorQuoteLineItem){return null===vendorQuoteLineItem||void 0===vendorQuoteLineItem?void 0:vendorQuoteLineItem.checked})),count=this.getLength(checkedLineItems);var _ref4=this||{},lineItemTotalCount=_ref4.lineItemTotalCount;return"".concat(count," of ").concat(lineItemTotalCount," Items")},canDisableMarkAll:function(vendorQuote){var _this=this,_ref5=vendorQuote||{},vendorQuotesLineItems=_ref5.vendorQuotesLineItems,isNotCheckedAndDisabled=vendorQuotesLineItems.every((function(vendorQuoteLineItem){return!(null!==vendorQuoteLineItem&&void 0!==vendorQuoteLineItem&&vendorQuoteLineItem.checked)&&_this.checkIsDisabled(vendorQuoteLineItem)})),_ref6=this||{},lineItemsChecked=_ref6.lineItemsChecked;return isNotCheckedAndDisabled&&!(0,validation/* isEmpty */.xb)(lineItemsChecked)},checkIsDisabled:function(val){var rfqIds={},_ref7=this||{},lineItemsChecked=_ref7.lineItemsChecked;(0,validation/* isEmpty */.xb)(lineItemsChecked)||(rfqIds=lineItemsChecked.map((function(checkedLineItem){var _ref8=checkedLineItem||{},requestForQuotationLineItem=_ref8.requestForQuotationLineItem,_ref9=requestForQuotationLineItem||{},id=_ref9.id;return id})));var rfqId=this.$getProperty(val,"requestForQuotationLineItem.id");return!(0,validation/* isEmpty */.xb)(val)&&0==val.checked&&!(0,validation/* isEmpty */.xb)(rfqIds)&&rfqIds.includes(rfqId)},getDisabledRowClassName:function(_ref10){var row=_ref10.row;return this.checkIsDisabled(row)?"disabled-row":""},setMarkedLineItems:function(){var _ref11=this||{},vendorQuotes=_ref11.vendorQuotes,checkedLineItems=[];vendorQuotes.forEach((function(vendorQuote){var _ref12=vendorQuote||{},vendorQuotesLineItems=_ref12.vendorQuotesLineItems,vendor=_ref12.vendor;vendorQuotesLineItems.forEach((function(vendorQuotesLineItem){vendorQuotesLineItem.checked&&(vendorQuotesLineItem.vendor=vendor,checkedLineItems.push(vendorQuotesLineItem))}))})),this.$emit("setLineItemsChecked",checkedLineItems),this.$emit("setlineItemsCheckedCount",this.getLength(checkedLineItems)),this.setMarkAll()},setMarkAll:function(){var _this2=this,_ref13=this||{},vendorQuote=_ref13.vendorQuote,vendorQuotesLineItems=this.getVendorQuotesLineItems(vendorQuote),isAnyLineItmeChecked=vendorQuotesLineItems.some((function(element){return null===element||void 0===element?void 0:element.checked}));if(isAnyLineItmeChecked){var lineItemsChecked=vendorQuotesLineItems.filter((function(element){return null===element||void 0===element?void 0:element.checked})),lineItemsCheckedCount=this.getLength(lineItemsChecked),lineItemsDisabled=vendorQuotesLineItems.filter((function(element){return _this2.checkIsDisabled(element)})),lineItemsDisabledCount=this.getLength(lineItemsDisabled),total=lineItemsCheckedCount+lineItemsDisabledCount;total===this.lineItemTotalCount?this.checked=!0:this.checked=!1}else this.checked=!1},getLength:function(val){var lengthProp=Object.keys(val),length=lengthProp.length;return length},markAll:function(vendorQuote,check){var _this3=this,_ref14=vendorQuote||{},vendorQuotesLineItems=_ref14.vendorQuotesLineItems;vendorQuotesLineItems.forEach((function(vendorQuotesLineItem){_this3.checkIsDisabled(vendorQuotesLineItem)||(vendorQuotesLineItem.checked=check)})),this.setMarkedLineItems(check)}}},components_RfqComparisonVendorViewvue_type_script_lang_js=RfqComparisonVendorViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_RfqComparisonVendorViewvue_type_script_lang_js,RfqComparisonVendorViewvue_type_template_id_6fbd2f5c_scoped_true_render,RfqComparisonVendorViewvue_type_template_id_6fbd2f5c_scoped_true_staticRenderFns,!1,null,"6fbd2f5c",null)
/* harmony default export */,RfqComparisonVendorView=component.exports,RfqComparisonLineItemViewvue_type_template_id_dd5cddc0_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"disable-actions  vendor-quotes-lineitems-table",class:{active:_vm.canDisableClickActions}},[_c("div",{staticClass:"empty-space-between"}),_c("div",{staticClass:"rfq-line-item-view-wrap"},[_c("div",{staticClass:"rfq-line-item-view-header flex width72"},[_c("div",{staticClass:"vendor-name width39"},[_c("fc-icon",{staticClass:"lineitem-icon-rfq",attrs:{group:"dsm",name:"line-item",size:"12"}}),_c("div",[_c("div",[_vm._v(" "+_vm._s(_vm.getItemName(_vm.rfqLineItem))+" ")]),_c("div",{staticClass:"item-description"},[_vm._v(" "+_vm._s(_vm.getItemDescription(_vm.rfqLineItem))+" ")])])],1),_c("div",{staticClass:"rfqlineitem-header pR30 width10"},[_c("div",{staticClass:"fwBold pB4"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uom"))+" ")]),_vm._v(" "+_vm._s(_vm.getUOM(_vm.rfqLineItem))+" ")]),_c("div",{staticClass:"rfqlineitem-header pR8 width17"},[_c("div",{staticClass:"pB4 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.required_quantity"))+" ")]),_vm._v(" "+_vm._s(_vm.getQuantity(_vm.rfqLineItem))+" ")])]),_vm.canShowAwardedInLineItem?_c("div",{staticClass:"width15 awarded-Items"},[_c("div",{staticClass:"awarded-Items-content"},[_c("div",{staticClass:"mR5"},[_vm._v(_vm._s(_vm.$t("common.products.awarded_to")))]),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.showAwardedInLineItem(_vm.rfqLineItem),placement:"top"}},[_c("div",{staticClass:"fwBold"},[_vm._v(" "+_vm._s(_vm.showAwardedInLineItem(_vm.rfqLineItem))+" ")])])],1)]):_vm._e()]),_c("div",{staticClass:"vendor-quotes-lineitems-table"},[_c("el-table",{attrs:{data:_vm.getVendorQuotesLineItems(_vm.rfqLineItem),border:""}},[_c("el-table-column",{staticClass:"mL5",attrs:{label:_vm.$t("common.header.award"),width:"100","class-name":"award-column"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:scope.row.id},on:{change:function($event){return _vm.setCheckedLineItem(_vm.rfqLineItem,scope.row.id)}},model:{value:_vm.radioStatusArr[_vm.index],callback:function($$v){_vm.$set(_vm.radioStatusArr,_vm.index,$$v)},expression:"radioStatusArr[index]"}},[_vm._v("   ")])]}}])}),_c("el-table-column",{attrs:{label:""+_vm.$t("common.header.vendor_name"),width:"256","class-name":"item-name-rfq-lineitem_view"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"flex flex-no-wrap"},[_c("fc-icon",{staticClass:"fc-icon-vendor",attrs:{size:"12",group:"webtabs",name:"vendor"}}),_c("div",{staticClass:"flex flex-direction-column"},[_c("span",{staticClass:"fwBold mL10"},[_vm._v(_vm._s(_vm.getVendorName(scope.row)))]),_c("span",{staticClass:"mL8"},[_vm._v(" "+_vm._s(_vm.getVendorLocation(scope.row))+" ")])])],1)]}}])}),_c("el-table-column",{attrs:{formatter:_vm.getTaxPercentage,label:_vm.$t("common.inventory.tax_percentage")+" (%)","class-name":" right-align-elements","min-width":"164"}}),_c("el-table-column",{attrs:{formatter:_vm.getTaxAmount,label:_vm.$t("common.inventory.tax_amount")+" ("+_vm.$currency+")","class-name":" right-align-elements","min-width":"148"}}),_c("el-table-column",{attrs:{prop:"counterPrice",formatter:_vm.getCounterPrice,label:_vm.$t("common.inventory.quoted_unit_price")+" ("+_vm.$currency+")","class-name":"custom-class-price right-align-elements",width:"200"}}),_c("el-table-column",{attrs:{prop:"amount",formatter:_vm.getAmount,label:_vm.$t("common.inventory.quoted_amount")+" ("+_vm.$currency+")","class-name":"right-align-elements",width:"164"}}),_c("el-table-column",{attrs:{prop:"remarks",formatter:_vm.getRemarks,label:_vm.$t("common.wo_report._remarks"),"min-width":"150"}})],1)],1)])},RfqComparisonLineItemViewvue_type_template_id_dd5cddc0_scoped_true_staticRenderFns=[],poMixin=(__webpack_require__(425728),__webpack_require__(472646)),RfqComparisonLineItemViewvue_type_script_lang_js={props:["isAwarded","rfqLineItem","vendorQuotesLineItems","index","lineItemsChecked","filteredRfqLineItems","taxDetails"],mixins:[poMixin/* default */.Z,RfqMixin/* default */.Z,LineItemsMixin/* default */.Z],components:{},data:function(){return{radioStatusArr:[]}},watch:{filteredRfqLineItems:function(newVal,oldVal){oldVal!=newVal&&this.setRadioStatusArr()}},created:function(){this.setTaxes(),this.setRadioStatusArr()},computed:{canDisableClickActions:function(){var _ref=this||{},isAwarded=_ref.isAwarded;return isAwarded},canShowAwardedInLineItem:function(){var _ref2=this||{},radioStatusArr=_ref2.radioStatusArr,showAwardedInLineItem=radioStatusArr.some((function(element){return!(0,validation/* isEmpty */.xb)(element)}));return showAwardedInLineItem}},methods:{setTaxes:function(){var _ref3=this||{},taxDetails=_ref3.taxDetails;this.allTaxes=taxDetails},setRadioStatusArr:function(){for(var radioStatusArr=[],_ref4=this||{},index=_ref4.index,filteredRfqLineItems=_ref4.filteredRfqLineItems,rfqLineItem=_ref4.rfqLineItem,requestForQuotationLineItems=filteredRfqLineItems,rfqLineItemsLength=this.getLength(requestForQuotationLineItems),i=0;i<rfqLineItemsLength;i++)if(i==index){var vendorQuoteLineItemForRfqLineItem=this.getVendorQuotesLineItems(rfqLineItem),checkedLineItem=vendorQuoteLineItemForRfqLineItem.find((function(element){return null===element||void 0===element?void 0:element.checked}));(0,validation/* isEmpty */.xb)(checkedLineItem)?radioStatusArr.push(null):radioStatusArr.push(checkedLineItem.id)}else radioStatusArr.push(null);this.radioStatusArr=radioStatusArr},setCheckedLineItem:function(val,id){var rfqLineItemId=id,vendorQuoteLineItems=this.getVendorQuotesLineItems(val);vendorQuoteLineItems.forEach((function(element){var _ref5=element||{},id=_ref5.id;element.checked=rfqLineItemId==id}));var _ref6=this||{},vendorQuotesLineItems=_ref6.vendorQuotesLineItems,checkedLineItems=vendorQuotesLineItems.filter((function(vendorQuoteLineItem){return vendorQuoteLineItem.checked}));this.$emit("setLineItemsChecked",checkedLineItems),this.$emit("setlineItemsCheckedCount",this.getLength(checkedLineItems))},showAwardedInLineItem:function(val){var _ref7=this||{},lineItemsChecked=_ref7.lineItemsChecked,rfqId=val.id||{},lineItemForRfq={};(0,validation/* isEmpty */.xb)(lineItemsChecked)||lineItemsChecked.forEach((function(lineItemChecked){var _ref8=lineItemChecked||{},requestForQuotationLineItem=_ref8.requestForQuotationLineItem;(null===requestForQuotationLineItem||void 0===requestForQuotationLineItem?void 0:requestForQuotationLineItem.id)===rfqId&&(lineItemForRfq=lineItemChecked)}));var vendorName=this.$getProperty(lineItemForRfq,"vendor.name","---");return(0,validation/* isEmpty */.xb)(lineItemForRfq)?"NONE":vendorName},getVendorLocation:function(val){var address=this.$getProperty(val,"vendor.address"),_ref9=address||{},empty=_ref9.empty;return empty?"":address.name},getUOM:function(val){var _ref10=val||{},unitOfMeasure=_ref10.unitOfMeasure;return this.uomEnumMap[unitOfMeasure]},getQuantity:function(val){var _ref11=val||{},quantity=_ref11.quantity;return quantity||"---"},getVendorName:function(val){var vendorName=this.$getProperty(val,"vendor.name","---");return vendorName},getVendorQuotesLineItems:function(val){var rfqId=this.$getProperty(val,"id"),_ref12=this||{},vendorQuotesLineItems=_ref12.vendorQuotesLineItems,vendorQuotesLineItemsForRfq=vendorQuotesLineItems.filter((function(vendorQuoteLineItem){var _ref13=vendorQuoteLineItem||{},requestForQuotationLineItem=_ref13.requestForQuotationLineItem,id=requestForQuotationLineItem.id;return rfqId===id}));return vendorQuotesLineItemsForRfq},getLength:function(val){var lengthProp=Object.keys(val),length=lengthProp.length;return length}}},components_RfqComparisonLineItemViewvue_type_script_lang_js=RfqComparisonLineItemViewvue_type_script_lang_js,RfqComparisonLineItemView_component=(0,componentNormalizer/* default */.Z)(components_RfqComparisonLineItemViewvue_type_script_lang_js,RfqComparisonLineItemViewvue_type_template_id_dd5cddc0_scoped_true_render,RfqComparisonLineItemViewvue_type_template_id_dd5cddc0_scoped_true_staticRenderFns,!1,null,"dd5cddc0",null)
/* harmony default export */,RfqComparisonLineItemView=RfqComparisonLineItemView_component.exports,AwardVendorsvue_type_script_lang_js={props:["onClose","moduleName","record"],mixins:[RfqMixin/* default */.Z,LineItemsMixin/* default */.Z],components:{RfqComparisonVendorView:RfqComparisonVendorView,RfqComparisonLineItemView:RfqComparisonLineItemView},data:function(){return{requestForQuotationLineItems:null,vendorViewVisibility:!0,vendorQuotes:null,lineItemTotalCount:"",lineItemsChecked:null,lineItemsCheckedCount:"",lineItemViewVisibility:!1,vendorQuotesLineItems:null,searchVendor:"",searchLineItem:"",filteredVendorQuotes:null,filteredRfqLineItems:null,isButtonLoading:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadVendorQuotes();case 2:_this.loadTaxes(_this.vendorQuotes);case 3:case"end":return _context.stop()}}),_callee)})))()},computed:{isAwarded:function(){var _ref=this||{},record=_ref.record,_ref2=record||{},isAwarded=_ref2.isAwarded;return isAwarded},awardButtonClass:function(){var _ref3=this||{},record=_ref3.record,lineItemTotalCount=_ref3.lineItemTotalCount,lineItemsCheckedCount=_ref3.lineItemsCheckedCount,_ref4=record||{},isAwarded=_ref4.isAwarded,isAllChecked=lineItemTotalCount===lineItemsCheckedCount;return!isAllChecked||isAwarded},awardedInTotal:function(){var _ref5=this||{},lineItemsCheckedCount=_ref5.lineItemsCheckedCount,lineItemTotalCount=_ref5.lineItemTotalCount,lineItemsChecked=_ref5.lineItemsChecked,totalAmountOfLineItemsChecked=this.$d3.sum(lineItemsChecked.map((function(lineItem){return lineItem.amount||0})));return"Awarded ".concat(lineItemsCheckedCount," of ").concat(lineItemTotalCount," items in total for ").concat(this.$currency," ").concat(totalAmountOfLineItemsChecked)},checkAwardedToOneVendor:function(){var _ref6=this||{},lineItemsChecked=_ref6.lineItemsChecked,lineItemTotalCount=_ref6.lineItemTotalCount,lineItemsCheckedCount=_ref6.lineItemsCheckedCount;if(!(0,validation/* isEmpty */.xb)(lineItemsChecked)){var isAllChecked=lineItemTotalCount===lineItemsCheckedCount,pickOneVendor=lineItemsChecked[0].vendor||{},pickOneVendorName=pickOneVendor.name||{},isAwardedToOneVendor=lineItemsChecked.every((function(element){var _ref7=element||{},vendor=_ref7.vendor,_ref8=vendor||{},name=_ref8.name;return name===pickOneVendorName}));if(isAwardedToOneVendor&&isAllChecked)return!0}return!1}},methods:{filterRfqLineItem:function(){var _this2=this,_ref9=this||{},searchLineItem=_ref9.searchLineItem,requestForQuotationLineItems=_ref9.requestForQuotationLineItems,searchKey=searchLineItem.toLowerCase()||{},filteredRfqLineItems=requestForQuotationLineItems.filter((function(rfqLineItem){var itemName=_this2.getItemName(rfqLineItem).toLowerCase();return itemName.includes(searchKey)}));this.filteredRfqLineItems=filteredRfqLineItems,(0,validation/* isEmpty */.xb)(searchKey)&&(this.filteredRfqLineItems=requestForQuotationLineItems)},filterVendorQuotes:function(){var _this3=this,_ref10=this||{},searchVendor=_ref10.searchVendor,vendorQuotes=_ref10.vendorQuotes,searchKey=searchVendor.toLowerCase()||{},filteredVendorQuotes=vendorQuotes.filter((function(vendorQuote){var vendorName=_this3.$getProperty(vendorQuote,"vendor.name").toLowerCase();return vendorName.includes(searchKey)}));this.filteredVendorQuotes=filteredVendorQuotes,(0,validation/* isEmpty */.xb)(searchKey)&&(this.filteredVendorQuotes=vendorQuotes)},setlineItemsCheckedCount:function(count){this.lineItemsCheckedCount=count},setLineItemsChecked:function(val){this.lineItemsChecked=val},openVendorViewDialog:function(){this.vendorViewVisibility=!0,this.lineItemViewVisibility=!1},openLineItemViewDialog:function(){this.lineItemViewVisibility=!0,this.vendorViewVisibility=!1},loadVendorQuotes:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var vendorQuotesLineItemsList,reqForQuotId,params,_yield$API$fetchAll,list,error,rfqLineItems;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return vendorQuotesLineItemsList=[],reqForQuotId=_this4.$getProperty(_this4,"record.id"),params={filters:JSON.stringify({requestForQuotation:{operatorId:36,value:["".concat(reqForQuotId)]}}),getWithLineItems:!0},_context2.next=5,api/* API */.bl.fetchAll("vendorQuotes",params);case 5:_yield$API$fetchAll=_context2.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error?_this4.$message.error(error||_this4.$t("common._common.error_loading_vendor_quotes")):(list=list.filter((function(vendorQuote){var _ref11=vendorQuote||{},isFinalized=_ref11.isFinalized,negotiation=_ref11.negotiation;return isFinalized&&!negotiation})),list.forEach((function(vendorQuote){var _ref12=vendorQuote||{},vendorQuotesLineItems=_ref12.vendorQuotesLineItems,vendor=_ref12.vendor;vendorQuotesLineItems.forEach((function(vendorQuotesLineItem){vendorQuotesLineItem.checked=!1,vendorQuotesLineItem.vendor=vendor,vendorQuotesLineItem.amount=0,vendorQuotesLineItemsList.push(vendorQuotesLineItem)})),_this4.lineItemTotalCount=_this4.getLength(vendorQuotesLineItems)})),_this4.vendorQuotesLineItems=vendorQuotesLineItemsList,_this4.vendorQuotes=list||[],_this4.filteredVendorQuotes=list||[]),rfqLineItems=_this4.getRfqLineItems(),_this4.requestForQuotationLineItems=rfqLineItems,_this4.auotSetCheckedLineItemsIfAwarded();case 12:case"end":return _context2.stop()}}),_callee2)})))()},getRfqLineItems:function(){var _ref13=this.record||{},requestForQuotationLineItems=_ref13.requestForQuotationLineItems;return this.filteredRfqLineItems=requestForQuotationLineItems,requestForQuotationLineItems},auotSetCheckedLineItemsIfAwarded:function(){var _ref14=this.record||{},isAwarded=_ref14.isAwarded,lineItemsChecked=[];if(isAwarded){var _ref15=this||{},requestForQuotationLineItems=_ref15.requestForQuotationLineItems,vendorQuotesLineItems=_ref15.vendorQuotesLineItems;requestForQuotationLineItems.forEach((function(element){var _ref16=element||{},awardedTo=_ref16.awardedTo,id=_ref16.id,rfqVendorName=awardedTo.name||{},checkedLineItems=vendorQuotesLineItems.filter((function(element){var _ref17=element||{},requestForQuotationLineItem=_ref17.requestForQuotationLineItem,vendor=_ref17.vendor,rfqId=requestForQuotationLineItem.id||{},vendQuotVendorName=vendor.name||{};return rfqId===id&&vendQuotVendorName===rfqVendorName})).map((function(element){return element.checked=!0,element}));(0,validation/* isEmpty */.xb)(checkedLineItems)||lineItemsChecked.push(checkedLineItems)})),this.lineItemsChecked=lineItemsChecked,this.lineItemsCheckedCount=this.getLength(lineItemsChecked)}},getLength:function(val){var lengthProp=Object.keys(val),length=lengthProp.length;return length},closeDialog:function(){this.onClose()},saveRecord:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref18,lineItemsChecked,checkAwardedToOneVendor,message,value,rfqLineItems,data,_yield$API$updateReco,error,successMsg;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this5.isButtonLoading=!0,_ref18=_this5||{},lineItemsChecked=_ref18.lineItemsChecked,checkAwardedToOneVendor=_ref18.checkAwardedToOneVendor,message=checkAwardedToOneVendor?_this5.$t("common._common.award_all_to_one_vendor_confirmation"):_this5.$t("common._common.award_vendor_comparison_confirmation"),(0,validation/* isEmpty */.xb)(lineItemsChecked)){_context3.next=15;break}return _context3.next=6,_this5.$dialog.confirm({title:_this5.$t("common.inventory.confirm_vendor_selection"),message:message,lbLabel:_this5.$t("common._common.cancel"),rbDanger:!0,rbLabel:_this5.$t("common._common.confirm")});case 6:if(value=_context3.sent,!value){_context3.next=15;break}return rfqLineItems=lineItemsChecked.map((function(lineItem){var _ref19=lineItem||{},requestForQuotationLineItem=_ref19.requestForQuotationLineItem,_ref20=lineItem||{},awardedPrice=_ref20.counterPrice,awardedTo=_ref20.vendor,quantity=_ref20.quantity,tax=_ref20.tax;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},requestForQuotationLineItem),{},{awardedPrice:awardedPrice,awardedTo:awardedTo,quantity:quantity,tax:tax})})),data={id:_this5.record.id,data:{requestForQuotationLineItems:rfqLineItems},params:{awardQuotes:!0}},_context3.next=12,api/* API */.bl.updateRecord(_this5.moduleName,data);case 12:_yield$API$updateReco=_context3.sent,error=_yield$API$updateReco.error,error?_this5.$message.error(error.message||_this5.$t("common._common.error_awarding_vendors")):(successMsg=_this5.$t("common._common.awarded_vendors_success"),_this5.$message.success(successMsg),_this5.onClose(),_this5.$emit("saved"));case 15:_this5.isButtonLoading=!1;case 16:case"end":return _context3.stop()}}),_callee3)})))()}}},components_AwardVendorsvue_type_script_lang_js=AwardVendorsvue_type_script_lang_js,AwardVendors_component=(0,componentNormalizer/* default */.Z)(components_AwardVendorsvue_type_script_lang_js,AwardVendorsvue_type_template_id_724f5220_scoped_true_render,AwardVendorsvue_type_template_id_724f5220_scoped_true_staticRenderFns,!1,null,"724f5220",null)
/* harmony default export */,AwardVendors=AwardVendors_component.exports,router=__webpack_require__(329435),RequestForQuotationSummaryvue_type_script_lang_js={extends:CustomModuleSummary["default"],props:["viewname"],components:{AwardVendors:AwardVendors},data:function(){return{notesModuleName:"requestForQuotationNotes",attachmentsModuleName:"requestForQuotationAttachment",primaryFields:["localId","approvalFlowId","approvalStatus","moduleState","stateFlowId","billToAddress","shipToAddress","description","requiredDate"],showAwardVendorsDialog:!1,vendorMultiLookupData:{displayName:this.$t("common.header.vendors"),name:"vendors",lookupModule:{displayName:this.$t("common.header.vendors"),name:"vendors"},multiple:!0,selectedItems:[]},downloadUrl:null,selectedVendors:[],isButtonLoading:!1}},computed:{pdfUrl:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForModule=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.MODULE_CUSTOM),name=_findRouteForModule.name;if(name){var resolvedPath=this.$router.resolve({name:name}).href||"";return this.$router.resolve({path:"".concat(resolvedPath,"/rfqpdf"),query:{rfqId:this.id}}).href}return null}return"".concat(window.location.protocol,"//").concat(window.location.host,"/app/pdf/rfqpdf?rfqId=").concat(this.id)},moduleName:function(){return"requestForQuotation"},mainFieldKey:function(){return"name"},showClosedBidBanner:function(){var _ref=this||{},record=_ref.record,isClosedBid=_ref.isClosedBid;if((0,validation/* isEmpty */.xb)(record))return!1;var _ref2=record||{},isQuoteReceived=_ref2.isQuoteReceived,isDiscarded=_ref2.isDiscarded,isRfqFinalized=_ref2.isRfqFinalized;return!isQuoteReceived&&isClosedBid&&!isDiscarded&&isRfqFinalized},isClosedBid:function(){var _ref3=this||{},record=_ref3.record,_ref4=record||{},rfqType=_ref4.rfqType,RFQ_TYPE=this.$constants.RFQ_TYPE;return!(0,validation/* isEmpty */.xb)(rfqType)&&rfqType===RFQ_TYPE.CLOSED_BID},showEdit:function(){var canShowEdit=this.$hasPermission("requestForQuotation:UPDATE");return canShowEdit&&!this.record.isRfqFinalized},showQuotesReceived:function(){return this.record.isRfqFinalized&&!this.record.isQuoteReceived&&!this.record.isApprovalEnabled()},showDropDown:function(){var record=this.record,isDiscarded=record.isDiscarded,isAwarded=record.isAwarded;return!record.isApprovalEnabled()&&!isDiscarded&&!isAwarded},checkIsQuoteNotAwarded:function(){var record=this.record,_ref5=record||{},isAwarded=_ref5.isAwarded,isQuoteReceived=_ref5.isQuoteReceived;return!isAwarded&&isQuoteReceived},checkIsQuoteAwarded:function(){var record=this.record,_ref6=record||{},isAwarded=_ref6.isAwarded;return isAwarded}},title:function(){this.$t("common.products.rfq")},watch:{record:{handler:function(oldVal,newVal){oldVal!==newVal&&(this.downloadUrl=null)}}},methods:{closeSubmissionWarningDialog:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var value;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$dialog.confirm({title:_this.$t("common.inventory.confirm_close_submission"),message:_this.$t("common.inventory.close_submission_warning_msg"),lbLabel:_this.$t("common._common.cancel"),rbDanger:!0,rbLabel:_this.$t("common._common.confirm")});case 2:return value=_context.sent,_context.abrupt("return",value);case 4:case"end":return _context.stop()}}),_callee)})))()},clickAction:function(action){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var data,value,_yield$API$updateReco,error,errorMessage,successMsg;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(data={},_this2.isButtonLoading=!0,"publish_rfq"!==action){_context2.next=7;break}return _this2.publishRfq(),_context2.abrupt("return");case 7:if("receive_quote"!=action){_context2.next=19;break}return _context2.next=10,_this2.closeSubmissionWarningDialog();case 10:if(value=_context2.sent,!value){_context2.next=15;break}data={id:_this2.$getProperty(_this2,"record.id"),params:{receiveQuote:!0}},_context2.next=17;break;case 15:return _this2.isButtonLoading=!1,_context2.abrupt("return");case 17:_context2.next=27;break;case 19:if("discard_quote"!=action){_context2.next=23;break}data={id:_this2.$getProperty(_this2,"record.id"),params:{discardQuote:!0}},_context2.next=27;break;case 23:if("award_vendors"!==action){_context2.next=27;break}return _this2.showAwardVendorsDialog=!0,_this2.isButtonLoading=!1,_context2.abrupt("return");case 27:return _context2.next=29,api/* API */.bl.updateRecord(_this2.moduleName,data);case 29:_yield$API$updateReco=_context2.sent,error=_yield$API$updateReco.error,error?(errorMessage="receive_quote"==action?_this2.$t("common._common.error_while_reciving_quotes"):_this2.$t("common._common.error_while_discarding_rfq"),_this2.$message.error(error.message||errorMessage)):(successMsg="receive_quote"==action?_this2.$t("common._common.received_quotes"):_this2.$t("common._common.discarded_rfq"),_this2.$message.success(successMsg),_this2.loadRecord(!0)),_this2.isButtonLoading=!1;case 33:case"end":return _context2.stop()}}),_callee2)})))()},publishRfq:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var selectedVendors,data,_yield$API$updateReco2,error,successMsg;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this3.setSelectedVendors(),selectedVendors=_this3.selectedVendors.map((function(vendor){return{id:vendor}})),!(0,validation/* isEmpty */.xb)(selectedVendors)){_context3.next=7;break}return _context3.next=5,_this3.$dialog.confirm({title:_this3.$t("common._common.vendors_not_selected"),message:_this3.$t("common._common.cannot_finalize_rfq_with_no_vendors"),lbHide:!0});case 5:_context3.next=13;break;case 7:return data={id:_this3.$getProperty(_this3.record,"id"),data:{vendor:selectedVendors},params:{rfqFinalized:!0}},_context3.next=10,api/* API */.bl.updateRecord(_this3.moduleName,data);case 10:_yield$API$updateReco2=_context3.sent,error=_yield$API$updateReco2.error,error?_this3.$message.error(error.message||_this3.$t("common._common.error_while_finalizing_rfq")):(successMsg=_this3.$t("common._common.finalized_rfq_successfully"),_this3.$message.success(successMsg),_this3.loadRecord(!0));case 13:_this3.isButtonLoading=!1;case 14:case"end":return _context3.stop()}}),_callee3)})))()},editRecord:function(){var id=this.id;if((0,router/* isWebTabsEnabled */.tj)()){var _ref7=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref7.name;name&&this.$router.push({name:name,params:{id:id}})}else id&&this.$router.push({name:"edit-requestForQuotation",params:{id:id}})},summaryDropDownAction:function(action){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:"edit_rfq"===action&&_this4.editRecord(),"discard_rfq"===action&&_this4.clickAction("discard_quote");case 2:case"end":return _context4.stop()}}),_callee4)})))()},openPrintPreview:function(){this.pdfUrl&&window.open(this.pdfUrl)},downloadPdf:function(){var _this5=this;this.downloadUrl=null;var appName=(0,router/* getApp */.wx)().linkName,url="".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(appName,"/pdf/rfqpdf?rfqId=").concat(this.id);this.$message({message:this.$t("common._common.downloading"),showClose:!0,duration:0});var additionalInfo={showFooter:!1,footerStyle:"p {font-size:12px; margin-left:500px}",footerHtml:'<p>Page  <span class="pageNumber"></span> / <span class="totalPages"></span></p>'};api/* API */.bl.post("/v2/integ/pdf/create",{url:url,additionalInfo:additionalInfo}).then((function(_ref8){var data=_ref8.data,error=_ref8.error;if(_this5.$message.closeAll(),error){var _error$message=error.message,message=void 0===_error$message?_this5.$t("common.wo_report.unable_to_fetch_rfq_download_link"):_error$message;_this5.$message.error(message)}else{var _ref9=data||{},fileUrl=_ref9.fileUrl;_this5.downloadUrl=fileUrl||null}}))},setSelectedVendors:function(){(0,validation/* isEmpty */.xb)(this.record.vendor)||(this.selectedVendors=this.record.vendor.map((function(vendor){return vendor.id})))}}},rfq_RequestForQuotationSummaryvue_type_script_lang_js=RequestForQuotationSummaryvue_type_script_lang_js,RequestForQuotationSummary_component=(0,componentNormalizer/* default */.Z)(rfq_RequestForQuotationSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RequestForQuotationSummary=RequestForQuotationSummary_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/36643.js.map