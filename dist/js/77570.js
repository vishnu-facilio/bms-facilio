"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[77570],{
/***/377570:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WeatherCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/site/WeatherCard.vue?vue&type=template&id=325070f3
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("div",[_c("spinner",{attrs:{show:!0}})],1):_vm.$validation.isEmpty(_vm.weatherCardData)?_c("div",{staticClass:"d-flex flex-direction-column justify-content-even site-weather-card p30"},[_c("div",{staticClass:"d-flex flex-direction-column align-center"},[_c("div",[_c("inline-svg",{staticClass:"vertical-middle'",attrs:{src:"svgs/cardNodata",iconClass:"icon icon-80"}})],1),_c("div",{staticClass:"fc-black3-16 self-center bold"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.no_weather_data"))+" ")])])]):_c("div",{staticClass:"d-flex flex-direction-column justify-content-even site-weather-card p30"},[_c("div",{staticClass:"d-flex flex-direction-row"},[_c("div",{},[_c("inline-svg",{staticClass:"vertical-middle'",attrs:{src:_vm.currentWeather.icon,iconClass:"icon icon-xxlg"}})],1),_c("div",{staticClass:"temperature-text pL20"},[_vm._v(_vm._s(_vm.temperature)+"ยบ"+_vm._s(_vm.unit))]),_c("div",{staticClass:"weather-text self-center pL10"},[_vm._v(" "+_vm._s(_vm.currentWeather.label)+" ")])]),_c("div",{staticClass:"d-flex flex-direction-row"},[_c("div",[_vm._v(_vm._s(_vm.$options.filters.toDateFormat(_vm.time,"h:mm a")))]),_c("div",{staticClass:"mL10 mR10 border-right"}),_c("div",[_vm._v(" "+_vm._s(_vm.$options.filters.toDateFormat(_vm.time,"dddd, DD MMMM YYYY"))+" ")])])])},staticRenderFns=[],weatherData=(__webpack_require__(425728),__webpack_require__(260228),{default:{class:"partly-cloudy-day",label:"Clear Day",icon:"svgs/cloudy"},1:{class:"clear-day",label:"Clear Day",icon:"svgs/spacemanagement/weathericons/sunny-day"},2:{class:"clear-night",label:"Clear Night",icon:"svgs/spacemanagement/weathericons/clear-night"},3:{class:"rain",label:"Rain",icon:"svgs/spacemanagement/weathericons/rainy-day"},4:{class:"snow",label:"Snow",icon:"svgs/spacemanagement/weathericons/snow-cloud"},5:{class:"sleet",label:"Sleet",icon:"svgs/spacemanagement/weathericons/sleet"},6:{class:"wind",label:"Wind",icon:"svgs/spacemanagement/weathericons/windy-day"},7:{class:"fog",label:"Fog",icon:"svgs/spacemanagement/weathericons/foggy"},8:{class:"cloudy",label:"Cloudy",icon:"svgs/spacemanagement/weathericons/cloudy-day"},9:{class:"partly-cloudy-day",label:"Partly Cloudy Day",icon:"svgs/spacemanagement/weathericons/cloudy-day"},10:{class:"partly-cloudy-night",label:"Partly Cloudy Night",icon:"svgs/spacemanagement/weathericons/cloudy-day"},11:{class:"hail",label:"Hail",icon:"svgs/spacemanagement/weathericons/hail"},12:{class:"thunderstorm",label:"Thunderstorms",icon:"svgs/spacemanagement/weathericons/hail"},13:{class:"tornado",label:"Tornado",icon:"svgs/spacemanagement/weathericons/hail"}}),WeatherCardvue_type_script_lang_js={props:["details"],data:function(){return{readingUnit:null,temperature:null,time:null,weatherCardData:{},loading:!1}},created:function(){this.loadWeatherData()},computed:{unit:function(){return this.readingUnit||this.orgUnit},orgUnit:function(){var _this$$getProperty=this.$getProperty(this,"$account.appProps"),orgUnitsList=_this$$getProperty.orgUnitsList;if(orgUnitsList&&orgUnitsList.length){var tempObj=orgUnitsList.find((function(rt){return"TEMPERATURE"===rt.metricEnum}));return tempObj&&5===tempObj.unit?"F":"C"}return"C"},currentWeather:function(){var _this$weatherCardData=this.weatherCardData,weatherCardData=void 0===_this$weatherCardData?{}:_this$weatherCardData,_ref=weatherCardData||{},icon=_ref.icon;return weatherData[icon||"default"]}},methods:{loadWeatherData:function(){var _this=this,_this$details=this.details,details=void 0===_this$details?{}:_this$details,id=details.id,params={staticKey:"weathermini",baseSpaceId:id};this.loading=!0,this.$http.post("/dashboard/getCardData",params).then((function(_ref2){var _ref2$data$cardResult=_ref2.data.cardResult,cardResult=void 0===_ref2$data$cardResult?{}:_ref2$data$cardResult,status=_ref2.status;if(200===status){var _cardResult$weather=cardResult.weather,weather=void 0===_cardResult$weather?{}:_cardResult$weather,actualTtime=weather.actualTtime,temperature=weather.temperature,unit=weather.unit;_this.$set(_this,"weatherCardData",weather),_this.$set(_this,"time",actualTtime),_this.$set(_this,"temperature",Math.round(temperature)),_this.$set(_this,"readingUnit",unit)}_this.loading=!1})).catch((function(_ref3){var _ref3$message=_ref3.message,message=void 0===_ref3$message?"Error Occurred while fetching weather card data":_ref3$message;_this.$message.error(message),_this.loading=!1}))}}},site_WeatherCardvue_type_script_lang_js=WeatherCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(site_WeatherCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WeatherCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/77570.js.map