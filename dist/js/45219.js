"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[45219],{
/***/469895:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return type1_Config}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/card-builder/cards/energy/type1/Config.vue?vue&type=template&id=0ebf7d84&scoped=true
var Config_render,Config_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"p30"},[_c("div",{staticClass:"header"},[_c("span",{staticClass:"pointer",on:{click:_vm.onGoBack}},[_c("inline-svg",{staticClass:"vertical-top rotate-90 mR20",attrs:{src:"svgs/arrow",iconClass:"icon"}})],1),_vm._v(" "+_vm._s(_vm.cardMeta&&_vm.cardMeta.name||"Energy Card")+" "),_c("span",{staticClass:"pointer",on:{click:_vm.onClose}},[_c("inline-svg",{staticClass:"vertical-middle fR",attrs:{src:"svgs/close",iconClass:"icon icon-sm"}})],1)]),_c("div",{staticClass:"container mT20"},[_c("div",{staticClass:"section"},[_c("el-form",{ref:this.cardLayout+"_form",attrs:{model:_vm.cardDataObj,rules:_vm.validationRules,"label-position":"top"}},[_c("el-tabs",{staticClass:"card-tab-fixed",model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_c("el-tab-pane",{attrs:{label:"Config",name:"config"}},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"title"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Title")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:_vm.isNew},model:{value:_vm.cardDataObj.title,callback:function($$v){_vm.$set(_vm.cardDataObj,"title",$$v)},expression:"cardDataObj.title"}})],1)],1)],1),_c("el-row",{},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"imageSpaceId"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Image Field")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:"Select a site or building"},model:{value:_vm.cardDataObj.imageSpaceId,callback:function($$v){_vm.$set(_vm.cardDataObj,"imageSpaceId",$$v)},expression:"cardDataObj.imageSpaceId"}},[_c("el-option-group",{attrs:{label:"Sites"}},_vm._l(_vm.sites,(function(site){return _c("el-option",{key:site.id,attrs:{label:site.name,value:site.id}})})),1),_c("el-option-group",{attrs:{label:"Buildings"}},_vm._l(_vm.buildings,(function(building){return _c("el-option",{key:building.id,attrs:{label:building.name,value:building.id}})})),1)],1)],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"reading"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Reading")]),_c("ReadingPicker",{attrs:{options:_vm.readingPickerOptions,initialReading:_vm.cardDataObj.reading},on:{onReadingSelect:function(reading){return _vm.setReading("reading",reading)}}})],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"dateRange"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Period")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:"Please select a period"},model:{value:_vm.cardDataObj.dateRange,callback:function($$v){_vm.$set(_vm.cardDataObj,"dateRange",$$v)},expression:"cardDataObj.dateRange"}},[_vm._l(_vm.dateOperators,(function(dateRange,index){return[_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})]}))],2)],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"baseline"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Baseline (Optional)")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:"Please select a period"},model:{value:_vm.cardDataObj.baseline,callback:function($$v){_vm.$set(_vm.cardDataObj,"baseline",$$v)},expression:"cardDataObj.baseline"}},[_vm._l(_vm.baselines,(function(dateRange,index){return[_c("el-option",{key:index,attrs:{label:dateRange.name,value:dateRange.name}})]}))],2)],1)],1)],1)],1),_c("el-tab-pane",{attrs:{label:"Styles",name:"styles"}},[_c("el-form",{attrs:{model:_vm.cardStateObj,"label-position":"top"}},[_c("el-row",{staticClass:"mB10 mT20"},[_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"arrowUpColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Arrow up")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"arrowUpColor"+_vm.cardStateObj.styles.arrowUpColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.arrowUpColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"arrowUpColor",$$v)},expression:"cardStateObj.styles.arrowUpColor"}})],1)])],1),_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"arrowDownColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Arrow down")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"arrowDownColor"+_vm.cardStateObj.styles.arrowDownColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.arrowDownColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"arrowDownColor",$$v)},expression:"cardStateObj.styles.arrowDownColor"}})],1)])],1)],1)],1)],1),_c("el-tab-pane",{attrs:{label:"Actions",name:"actions"}},[_c("ActionPicker",{ref:"action-picker",attrs:{variables:_vm.variables,elements:[{name:"default",displayName:"Default"}]},model:{value:_vm.cardActions,callback:function($$v){_vm.cardActions=$$v},expression:"cardActions"}},[_c("template",{slot:"element-title"},[_c("div",{staticClass:"pT15"})])],2)],1)],1)],1)],1),_c("div",{staticClass:"preview-panel section"},[_c("div",{staticClass:"card-wrapper"},[_c("Card",{attrs:{cardData:_vm.previewData,cardState:_vm.previewState,loading:_vm.isPreviewLoading}})],1)]),_c("div",{staticClass:"d-flex mT-auto form-action-btn"},[_c("el-button",{staticClass:"form-btn f13 bold secondary text-center text-uppercase",on:{click:function($event){return _vm.onGoBack()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"form-btn f13 bold primary m0 text-center text-uppercase",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)])])},staticRenderFns=[],defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),BaseConfig=(__webpack_require__(648324),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(641384)),Configvue_type_script_lang_js={extends:BaseConfig/* default */.Z},base_Configvue_type_script_lang_js=Configvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_Configvue_type_script_lang_js,Config_render,Config_staticRenderFns,!1,null,null,null)
/* harmony default export */,Config=component.exports,Card=__webpack_require__(940945),validation=__webpack_require__(990260),ReadingPicker=__webpack_require__(700697),card_constants=__webpack_require__(806186),ActionPicker=__webpack_require__(624817),type1_Configvue_type_script_lang_js={name:"EnergyCard1",extends:Config,props:["isNew","cardType","onClose","onGoBack","onCardSave","onCardUpdate","closePopup"],components:{Card:Card/* default */.Z,ReadingPicker:ReadingPicker/* default */.Z,ActionPicker:ActionPicker/* default */.Z},created:function(){this.loadSpaces(),this.loadBaselines()},data:function(){return{cardLayout:"energycard_layout_1",isPreviewLoading:!1,activeTab:"config",resourceProps:["title",{prop:"reading",resourceProps:["moduleName","parentId","fieldName","yAggr","fieldId","dataType"]},"baseline","imageSpaceId","dateRange"],cardDataObj:{title:null,reading:{yAggr:"sum"},baseline:"Previous Month",dateRange:"Current Month",imageSpaceId:null},cardState:{canResize:!1,styles:{}},layout:{w:24,h:12},cardStateObj:{styles:{arrowUpColor:"#008000",arrowDownColor:"#ff0100"}},conditionalVariables:[{name:"title",dataType:"STRING",displayName:"Title"},{name:"value",dataType:"NUMBER",displayName:"Value"}],readingPickerOptions:{pickerModule:"",parentId:{type:"single"},fieldName:{type:"single"},fieldId:{type:"single"},dataType:{type:"single"},moduleName:{type:"single"},parentName:{type:"single"},parentType:{type:"single"},yAggr:{type:"single"},selectedFieldId:{type:"single"},kpiType:{type:"single"}},cardActions:{default:{actionType:"showTrend"}},sites:[],buildings:[],baselines:[],result:null,validationRules:{},dateOperators:card_constants/* dateOperators */._M,aggregateFunctions:card_constants/* aggregateFunctions */.rD,predefinedColors:card_constants/* predefinedColors */.UH}},computed:{previewData:function(){return(0,validation/* isEmpty */.xb)(this.result)?{title:"Building 1",image:null,period:"Last Month",baselineValue:{value:500},value:{unit:"kWh",value:422.5}}:this.result.data}},methods:{loadSpaces:function(){var _this=this,filters={spaceType:{operator:"=",value:["1","2"]},photoId:{operator:"is not empty"}},url="/basespace?orderBy=spaceType&orderType=asc";return url+="&filters="+encodeURIComponent(JSON.stringify(filters)),this.$http.get(url).then((function(response){response.data&&response.data.basespaces&&(_this.sites=response.data.basespaces.filter((function(_ref){var spaceType=_ref.spaceType;return 1===spaceType})),_this.buildings=response.data.basespaces.filter((function(_ref2){var spaceType=_ref2.spaceType;return 2===spaceType})))})).catch((function(){}))},loadBaselines:function(){var _this2=this;return this.$http.get("/baseline/all").then((function(response){200===response.status&&(_this2.baselines=response.data)})).catch((function(){}))},serializeProperty:function(prop,data){if("reading"===prop)return(0,objectSpread2/* default */.Z)({yAggr:data.yAggr},data.reading)},validateProperty:function(){return{baseline:function(){return!1},imageSpaceId:function(){return!1},reading:function(data){var readingProp=this.resourceProps.find((function(prop){return(0,validation/* isObject */.Kn)(prop)?"reading"===prop.prop:"reading"===prop}));if((0,validation/* isObject */.Kn)(readingProp)){var resourceProps=readingProp.resourceProps,nullableFields=["fieldId","dataType"],hasEmptyField=!1;return resourceProps.forEach((function(prop){!nullableFields.includes(prop)&&(0,validation/* isEmpty */.xb)(data["reading"][prop])&&(hasEmptyField=!0)})),hasEmptyField}return(0,validation/* isEmpty */.xb)(data["reading"])}.bind(this)}},validateField:function(){var validator=function(rule,value,callback){callback()};return{baseline:{trigger:"change",validator:validator},imageSpaceId:{trigger:"change",validator:validator}}},setReading:function(prop,reading){if(reading){var cardDataObj=this.cardDataObj;this.$set(this,"cardDataObj",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},cardDataObj),{},(0,defineProperty/* default */.Z)({},prop,reading))),this.setConditionalVariables(reading)}}}},energy_type1_Configvue_type_script_lang_js=type1_Configvue_type_script_lang_js,Config_component=(0,componentNormalizer/* default */.Z)(energy_type1_Configvue_type_script_lang_js,render,staticRenderFns,!1,null,"0ebf7d84",null)
/* harmony default export */,type1_Config=Config_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/45219.js.map