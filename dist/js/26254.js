(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[26254],{
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/726254:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ReadingsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/readings/ReadingsList.vue?vue&type=template&id=0c561c95&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"label-txt-black pT15 pB15 fw-bold  pL30 pR30 header-bottom"},[_vm._v(" "+_vm._s(_vm.$t("common.tabs.readings"))+" ")]),_c("el-tabs",{attrs:{"before-leave":_vm.resetWidgetSize},model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},_vm._l(_vm.tabs,(function(tab,index){return _c("el-tab-pane",{key:tab.name,attrs:{name:tab.name,label:tab.displayName,lazy:""}},[tab.isActive?_c("list",{key:""+tab.name+index,attrs:{type:tab.type,url:tab.url,isActive:tab.isActive,assetId:_vm.details.id,details:_vm.details,portalName:_vm.widget.key+"-topbar",resize:_vm.resizeWidgetSize,reset:_vm.resetWidgetSize,moduleName:_vm.moduleName}}):_vm._e()],1)})),1),_c("div",{staticClass:"widget-topbar-actions"},[_c("portal-target",{attrs:{name:_vm.widget.key+"-topbar"}})],1)],1)},staticRenderFns=[],Readings=(__webpack_require__(260228),__webpack_require__(294699)),ReadingsListvue_type_script_lang_js={props:["details","layoutParams","hideTitleSection","sectionKey","widget","resizeWidget","moduleName"],data:function(){return{activeTab:"connected",defaultWidgetHeight:this.layoutParams.h}},components:{List:Readings/* default */.Z},computed:{tabs:function(){var activeTab=this.activeTab;return[{type:"connected",name:"connected",displayName:this.$t("asset.readings.connected"),isActive:"connected"===activeTab},{type:"logged",name:"logged",displayName:this.$t("asset.readings.logged"),isActive:"logged"===activeTab},{type:"formula",name:"formula",displayName:this.$t("asset.readings.kpis"),isActive:"formula"===activeTab},{type:"available",name:"available",displayName:this.$t("asset.readings.available"),isActive:"available"===activeTab}]}},methods:{resizeWidgetSize:function(){var _this=this;return new Promise((function(resolve){_this.resizeWidget({h:14}),_this.$nextTick(resolve)}))},resetWidgetSize:function(){var _this2=this;return new Promise((function(resolve){_this2.resizeWidget({h:_this2.defaultWidgetHeight}),_this2.$nextTick(resolve)}))}}},readings_ReadingsListvue_type_script_lang_js=ReadingsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(readings_ReadingsListvue_type_script_lang_js,render,staticRenderFns,!1,null,"0c561c95",null)
/* harmony default export */,ReadingsList=component.exports},
/***/294699:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Readings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/readings/list/Readings.vue?vue&type=template&id=54be2753&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex flex-direction-column asset-sum-empty-block",class:[_vm.newSiteSummary?"site-readings-list":""],staticStyle:{height:"100%","overflow-y":"scroll"}},[_vm.isActive?[_c("portal",{key:_vm.portalName+"-portalwrap",attrs:{to:_vm.portalName,slim:""}},[_vm.isActive?_c("f-search",{key:_vm.portalName+_vm.type+"-search",staticClass:"mR6",attrs:{searchKey:"name"},model:{value:_vm.list,callback:function($$v){_vm.list=$$v},expression:"list"}}):_vm._e(),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],attrs:{content:"Refresh"},on:{click:_vm.listRefresh}},[_c("i",{staticClass:"el-icon-refresh fwBold f16"})])],1)]:_vm._e(),_vm.loading?_c("div",{staticClass:"height100 hv-center "},[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm.$validation.isEmpty(_vm.list)?_c("div",{staticClass:"height100 hv-center "},[_c("div",[_c("InlineSvg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-130 emptystate-icon-size"}}),_c("div",{staticClass:"fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("asset.readings.no_readings_available"))+" ")])],1)]):_c("div",[_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.list,fit:!0,"header-cell-style":_vm.headerCellStyle,height:"330px","cell-style":{fontSize:"14px"}}},[_vm._v(" > "),_c("el-table-column",{attrs:{label:_vm.$t("asset.readings.name"),width:"350"},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("div",{staticClass:"align-name-field"},[_vm._v(" "+_vm._s(reading.row.field.displayName)+" ")])]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("asset.readings.value")},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("div",{staticClass:"pL30",domProps:{innerHTML:_vm._s(_vm.displayReadings(reading.row.field,reading.row.value,reading.row.actualValue))}})]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("asset.readings.last_recorded")},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[reading.row.ttime>0&&!_vm.isValueEmpty(reading.row.field,reading.row.value,reading.row.actualValue)?_c("div",{staticClass:"pL30"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(reading.row.ttime))+" ")]):_c("div",{staticClass:"pL30"},[_vm._v(_vm._s("---"))])]}}])}),_vm.$helpers.isLicenseEnabled("ENERGY")&&_vm.$hasPermission("energy:CREATE_EDIT_REPORTS,VIEW_REPORTS,CREATE_EDIT_DASHBOARD,EXPORT_REPORTS")?_c("el-table-column",{attrs:{label:_vm.$t("asset.readings.analytics")},scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_c("div",{staticClass:"pL30"},[_c("a",{staticClass:"f13 flex align-center",on:{click:function($event){return _vm.goToAnalytics(_vm.assetId,reading.row.field.id,{operatorId:63,value:reading.row.ttime?reading.row.ttime+"":null},reading.row)}}},[_vm._v(_vm._s(_vm.$t("asset.readings.go_to_analytics"))+" "),_c("InlineSvg",{staticClass:"pointer flex mL5",attrs:{src:"svgs/black-arrow-right",iconClass:"icon icon-xs"}})],1)])]}}],null,!1,3840417114)}):_vm._e(),_c("el-table-column",{scopedSlots:_vm._u([{key:"default",fn:function(reading){return[_vm.canShowAddReading(reading.row)?_c("div",[_c("a",{staticClass:"f13 pL30",on:{click:function($event){return _vm.showAddReadingDialog(reading.row.field.module.name,reading.row.field)}}},[_vm._v("+ "+_vm._s(_vm.$t("asset.readings.add")))])]):_vm._e(),reading.row.controllable?_c("div",{staticClass:"visibility-hide-actions"},[_c("el-dropdown",{staticClass:"mL50",staticStyle:{"padding-top":"5px","padding-bottom":"5px",position:"relative",top:"5px"},attrs:{trigger:"click"}},[_c("img",{staticClass:"vertical-text-super",attrs:{src:__webpack_require__(81323),width:"14",height:"14"}}),_c("el-dropdown-menu",{staticClass:"p10",attrs:{slot:"dropdown",trigger:"click"},slot:"dropdown"},[_c("div",{staticClass:"pT5 pB5 fc-label-hover label-txt-black f14 pL10 pR10 pointer",on:{click:function($event){return _vm.updateAction(reading.row)}}},[_vm._v(" "+_vm._s(reading.row.isControllable?"Disable Control Command":"Enable Control Command")+" ")])])],1)],1):_vm._e()]}}])})],1)],1),_vm.showReadingDialog?_c("AddReadingPopup",{attrs:{reading:_vm.editObj,saveAction:_vm.updateReadings,closeAction:_vm.closePopup,recordId:_vm.assetId}}):_vm._e()],2)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),FSearch=(__webpack_require__(865137),__webpack_require__(689730),__webpack_require__(976801),__webpack_require__(450886),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(634338),__webpack_require__(879288),__webpack_require__(897389),__webpack_require__(228436),__webpack_require__(947748)),JumpToHelper=__webpack_require__(921466),ControlCommandMixin=__webpack_require__(257321),AddReadingValuevue_type_template_id_a25fef88_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-dialog",{staticClass:"reading-dialog",attrs:{visible:!0,title:_vm.readingObj.field.displayName,loading:_vm.isSaving,stayOnSave:!0,width:"40%"},on:{save:_vm.addReadingValue,close:_vm.closeDialog}},[_c("div",[_c("div",{staticClass:"pT20"},[_vm._v(" "+_vm._s("Enter Reading "+(_vm.readingObj.field.unit?"(in "+_vm.readingObj.field.unit+")":""))+" ")]),_vm.isDateOrDateTimeField?_c("div",[_c("f-date-picker",{attrs:{"value-format":"timestamp",format:"dd-MM-yyyy",type:"datetime"},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}})],1):_vm._e(),_vm.isBooleanField(_vm.readingObj.field)?_c("div",{staticClass:"pT15"},[_c("el-radio-group",{model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!0}},[_vm._v(" "+_vm._s(_vm.readingObj.field.trueVal||"True")+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v(" "+_vm._s(_vm.readingObj.field.falseVal||"False")+" ")])],1)],1):_vm.isEnumField(_vm.readingObj.field)?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width500px mT15",attrs:{filterable:"","collapse-tags":""},model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}},_vm._l(_vm.fieldOptions,(function(item){return _c("el-option",{key:item.id,attrs:{label:item.label,value:item.value}})})),1)],1):_c("div",[_c("el-input",{model:{value:_vm.readingObj.value,callback:function($$v){_vm.$set(_vm.readingObj,"value",$$v)},expression:"readingObj.value"}})],1)]),_c("div",{staticClass:"pT20 pB30"},[_c("div",[_vm._v("Time")]),_c("f-date-picker",{ref:"datepick",attrs:{type:"datetime"},on:{change:_vm.updateDuration},model:{value:_vm.readingObj.ttime,callback:function($$v){_vm.$set(_vm.readingObj,"ttime",$$v)},expression:"readingObj.ttime"}})],1)])},AddReadingValuevue_type_template_id_a25fef88_staticRenderFns=[],defineProperty=__webpack_require__(482482),FDatePicker=(__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(358551)),FDialogNew=__webpack_require__(436756),utils_field=__webpack_require__(815872),validation=__webpack_require__(990260),AddReadingValuevue_type_script_lang_js={props:["reading","saveAction","closeAction","recordId","recordName"],components:{FDatePicker:FDatePicker/* default */.Z,FDialog:FDialogNew/* default */.Z},data:function(){return{isSaving:!1,readingObj:{}}},created:function(){this.readingObj=this.reading,this.isBooleanField=utils_field/* isBooleanField */.Mw,this.isEnumField=utils_field/* isEnumField */.Ri},computed:{fieldOptions:function(){var options=[];return this.readingObj.field&&this.readingObj.field.values.forEach((function(obj){obj.visible&&options.push({id:obj.id,label:obj.value,value:Number(obj.index)})})),options},isDateOrDateTimeField:function(){var _ref=this.readingObj||{},field=_ref.field;return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isDateField */.y2)(field)||(0,utils_field/* isDateTimeField */.K)(field))}},methods:{updateDuration:function(){var _this=this;this.readingObj.ttime||this.$nextTick((function(){_this.$refs.datepick.focus()}))},addReadingValue:function(){var _this2=this;if(null!==this.readingObj.value){var readingVal={parentId:this.recordId,ttime:this.readingObj.ttime>this.$options.filters.now()?this.$options.filters.now():this.readingObj.ttime,readings:(0,defineProperty/* default */.Z)({},this.readingObj.field.name,this.readingObj.value)},data={readingName:this.readingObj.readingName,readingValues:[readingVal]};this.isSaving=!0,this.$http.post("/v2/readings/asset/add",data).then((function(response){0===response.data.responseCode?(_this2.$message({message:_this2.$t("asset.assets.reading_added_success"),type:"success"}),_this2.saveAction(_this2.readingObj)):_this2.$message({message:_this2.$t("asset.assets.readings_added_failed"),type:"error"}),_this2.isSaving=!1,_this2.closeDialog()})).catch((function(){_this2.$message({message:_this2.$t("asset.assets.readings_added_failed"),type:"error"}),_this2.isSaving=!1}))}},closeDialog:function(){this.closeAction()}}},readings_AddReadingValuevue_type_script_lang_js=AddReadingValuevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(readings_AddReadingValuevue_type_script_lang_js,AddReadingValuevue_type_template_id_a25fef88_render,AddReadingValuevue_type_template_id_a25fef88_staticRenderFns,!1,null,null,null)
/* harmony default export */,AddReadingValue=component.exports,SpaceHelper=__webpack_require__(436289),Readingsvue_type_script_lang_js={mixins:[JumpToHelper/* default */.Z,ControlCommandMixin/* default */.Z,SpaceHelper/* default */.Z],components:{FSearch:FSearch/* default */.Z,AddReadingPopup:AddReadingValue},props:["type","url","isActive","portalName","assetId","resize","reset","details","moduleName"],mounted:function(){this.loadData(),this.loadCount()},data:function(){return{loading:!1,list:null,totalCount:null,canShowAllReadings:!0,defaultListSize:6,editObj:{},showReadingDialog:!1}},computed:{filteredList:function(){var sortedList=(0,toConsumableArray/* default */.Z)(this.list).sort((function(a,b){return a.field.displayName.toLowerCase()>b.field.displayName.toLowerCase()?1:b.field.displayName.toLowerCase()>a.field.displayName.toLowerCase()?-1:0}));return this.canShowAllReadings?sortedList:sortedList.slice(0,this.defaultListSize)},canShowViewMore:function(){return this.list&&this.list.length>0&&this.list.length>this.defaultListSize},showMoreLinkText:function(){return this.canShowAllReadings?"View Less":"View More"},setValue:function(){return this.$store.state.publishdata.setValue[this.assetId]},hasModuleAddReadingPermission:function(){return!["site","building","space"].includes(this.moduleName)||!!this.$hasPermission("space:ADD_READING")}},methods:{toggleVisibility:function(){var _this=this;this.canShowAllReadings=!this.canShowAllReadings,this.$nextTick((function(){_this.canShowAllReadings?_this.resize():_this.reset()}))},updateAction:function(field){field.isControllable=!field.isControllable,this.controlActionChangeStatus(field,this.assetId,field.isControllable)},loadData:function(){var _this2=this;this.loading=!0;var promise=this.$http.post("/v2/reading/latestdata/".concat(this.assetId),{readingType:this.type}).then((function(response){if(0===response.data.responseCode){var list=(response.data.result.readingValues||[]).map((function(reading){return(0,objectSpread2/* default */.Z)({name:reading.field.displayName},reading)}));_this2.list=list}else _this2.list=[]})).catch((function(){return _this2.list=null}));Promise.all([promise]).finally((function(){return _this2.loading=!1}))},loadCount:function(){var _this3=this;this.loading=!0,this.$http.get("v2/reading/latestdata/".concat(this.assetId,"?readingType=").concat(this.type,"&fetchCount=true")).then((function(response){0===response.data.responseCode?_this3.totalCount=response.data.result.count:_this3.totalCount=null})).catch((function(){return _this3.totalCount=null}))},isValueEmpty:function(field,value,actualValue){return(0,utils_field/* isBooleanField */.Mw)(field)?null===value||void 0===value||(0,validation/* isNullOrUndefined */.le)(actualValue):-1===Number(value)||(0,validation/* isEmpty */.xb)(value)},displayReadings:function(field,value,actualValue){if(-1===Number(value))return"--";if((0,utils_field/* isDecimalField */.No)(field)){var unit=field.unit?field.unit:"";return value.toFixed(2)+" "+unit}return(0,utils_field/* isDateTimeField */.K)(field)?this.$options.filters.formatDate(value):(0,utils_field/* isDateField */.y2)(field)?this.$options.filters.formatDate(value,!0):(0,utils_field/* isBooleanField */.Mw)(field)?(0,validation/* isNullOrUndefined */.le)(value)||-1===value||(0,validation/* isNullOrUndefined */.le)(actualValue)?"--":value?field.trueVal||"True":field.falseVal||"False":(0,utils_field/* isEnumField */.Ri)(field)?field.enumMap[parseInt(value)]:value},showAddReadingDialog:function(readingName,field){this.editObj.readingName=readingName,this.editObj.field=field,this.showReadingDialog=!0},closePopup:function(){this.showReadingDialog=!1,this.resetReadingObj()},resetReadingObj:function(){this.editObj={ttime:null,value:null}},updateReadings:function(){this.loadData(),this.loadCount(),this.closePopup()},goToAnalytics:function(assetId,fieldId,dateFilter,reading){var buildingId=this.details.space?this.details.space.buildingId:null,aggr=reading.field&&reading.field.unit&&["currency","kwh","co2","kg","mwh"].includes(reading.field.unit.trim().toLowerCase())?3:2;this.jumpReadingToAnalytics(assetId,fieldId,dateFilter,null,aggr,buildingId)},canShowAddReading:function(reading){return 1===Number(reading.inputType)&&this.hasModuleAddReadingPermission},listRefresh:function(){this.loadData(),this.loadCount()},headerCellStyle:function(){return{"padding-left":"30px","background-color":"#f7faff"}}},watch:{setValue:{handler:"updateReadings",deep:!0}}},list_Readingsvue_type_script_lang_js=Readingsvue_type_script_lang_js,Readings_component=(0,componentNormalizer/* default */.Z)(list_Readingsvue_type_script_lang_js,render,staticRenderFns,!1,null,"54be2753",null)
/* harmony default export */,Readings=Readings_component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/436289:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceHelper}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var render,staticRenderFns,SpaceHelpervue_type_script_lang_js={computed:{getFormattedFile:function(){var _this=this,photos=this.photos,filePreviewList=[];return(photos||[]).forEach((function(photo){filePreviewList.push({contentType:"image",previewUrl:photo.originalUrl,downloadUrl:_this.$helpers.getFileDownloadUrl(photo.photoId)})})),filePreviewList},newSiteSummary:function(){var $helpers=this.$helpers,_ref=$helpers||{},isLicenseEnabled=_ref.isLicenseEnabled;return isLicenseEnabled("NEW_SITE_SUMMARY")&&isLicenseEnabled("WEATHER_INTEGRATION")}}},helpers_SpaceHelpervue_type_script_lang_js=SpaceHelpervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(helpers_SpaceHelpervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceHelper=component.exports},
/***/81323:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/26254.js.map