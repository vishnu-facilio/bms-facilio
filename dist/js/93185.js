"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[93185],{
/***/666952:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ColumnMapping}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ColumnMapping.vue?vue&type=template&id=c979ccb6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("form",{on:{submit:function($event){return $event.preventDefault(),_vm.sendMapping.apply(null,arguments)}}},[_vm._l(_vm.importProcessContext.columnHeadings,(function(field,index){return _c("div",{key:index,staticClass:"row oddEven"},[_c("div",{staticClass:"Cell col-md-5"},[_c("span",[_vm._v(_vm._s(field))])]),_vm._m(0,!0),_c("div",{staticClass:"Cell col-md-5"},[_c("el-select",{attrs:{filterable:"",clearable:""},on:{change:_vm.test},model:{value:_vm.mappedValues[field],callback:function($$v){_vm.$set(_vm.mappedValues,field,$$v)},expression:"mappedValues[field]"}},_vm._l(_vm.importProcessContext.fields,(function(value,index2){return _c("el-option",{key:index2,attrs:{label:_vm.importProcessContext.facilioFieldMapping[value]?_vm.importProcessContext.facilioFieldMapping[value].displayName:value,value:value}})})),1)],1)])})),_c("div",{staticClass:"col-lg-6 col-md-6 fc-form-footer"},[_c("q-btn",{attrs:{loader:"",color:"primary"}},[_vm._v("Submit ")])],1)],2)])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"Cell col-md-2"},[_c("span",[_vm._v(" : ")])])}],quasar_esm=(__webpack_require__(648324),__webpack_require__(641358)),ColumnMappingvue_type_script_lang_js={props:["importProcessContext","asset"],data:function(){return{show:!0,mappedValues:{}}},components:{QBtn:quasar_esm/* QBtn */.OV},created:function(){if(this.importProcessContext.fieldMapping)for(var key in this.importProcessContext.fieldMapping)this.importProcessContext.fieldMapping[key]&&this.$set(this.mappedValues,this.importProcessContext.fieldMapping[key],key)},methods:{sendMapping:function(){for(var key in this.importProcessContext.fieldMapping={},this.mappedValues)this.mappedValues[key]&&(this.importProcessContext.fieldMapping[this.mappedValues[key]]=key);this.importProcessContext.fieldMappingString=JSON.stringify(this.importProcessContext.fieldMapping);var self=this;""===this.asset&&(this.asset=null),this.$http.post("/import/processImport",{importProcessContext:this.importProcessContext,assetId:this.asset}).then((function(response){self.$emit("mappingResponse",response.data)})).catch((function(error){var alert2=Alert.create({html:" Data import failed! [ "+error+"]",color:"negative",position:"top-center"});setTimeout((function(){alert2.dismiss()}),1500)}))},test:function(){this.$forceUpdate()}}},components_ColumnMappingvue_type_script_lang_js=ColumnMappingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ColumnMappingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ColumnMapping=component.exports},
/***/32877:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return UploadData}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/UploadData.vue?vue&type=template&id=4433e065
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-attachments"},[_vm._l(_vm.attachments,(function(attachment,index){return _c("div",{key:index,staticClass:"fc-attachment-row mB100"},[_c("div",{staticClass:"attachment-label"},[_vm._v(_vm._s(attachment.fileName))]),_c("div",{staticClass:"attachment-sublabel"},[_c("span",[_vm._v(_vm._s(_vm._f("prettyBytes")(attachment.fileSize)))]),1===attachment.status?_c("span",{staticClass:"attachment-sublabel"},[_vm._v(", Uploading...")]):2===attachment.status?_c("span",{staticClass:"attachment-sublabel"},[_vm._v(", Success")]):_c("span",{staticClass:"attachment-sublabel"},[_vm._v(" "+_vm._s(attachment.error))])]),_c("div",{staticClass:"remove pull-right"},[_c("a",{on:{click:function($event){return _vm.deleteAttachment()}}},[_vm._v("Remove")])])])})),_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""},on:{submit:function($event){return $event.preventDefault(),_vm.addAttachment.apply(null,arguments)}}},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"dropbox2"},[_c("input",{staticClass:"input-file",attrs:{type:"file",accept:".xls,.xlsx"},on:{change:function($event){return _vm.filesChange($event.target.files[0])}}}),_c("p",[_vm._v("Drag and drop file(s) here")]),_c("el-button",{staticClass:"btn-upload",attrs:{type:"primary"},on:{change:function($event){return _vm.filesChange($event.target.files[0])}}},[_vm._v("BROWSE")])],1),_vm.buttonToggle?_c("div",{staticClass:"col-lg-6 col-md-6 modal-dialog-footer",staticStyle:{"padding-top":"20px"}},[_c("el-button",{staticClass:"modal-btn-cancel",attrs:{loader:"",type:"primary"},on:{click:_vm.deleteAttachment},model:{value:_vm.loading,callback:function($$v){_vm.loading=$$v},expression:"loading"}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.saving,type:"primary"},on:{click:_vm.addAttachment},model:{value:_vm.loading,callback:function($$v){_vm.loading=$$v},expression:"loading"}},[_vm._v(" Next "),_c("span",{attrs:{slot:"loading"},slot:"loading"},[_vm._v("Uploading")])])],1):_vm._e()])],2)},staticRenderFns=[],filters=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(638203)),UploadDatavue_type_script_lang_js={props:["module","customupload","category","importMode"],data:function(){return{saving:!1,loading:!1,show:!0,status:{UPLOADING:1,SUCCESS:2,FAILED:3},attachments:this.list?this.list:[],uploadFile:null,formFieldName:"attachment",buttonToggle:!1}},created:function(){this.$store.dispatch("loadAssetCategory")},methods:{filesChange:function(selectedFile){if(selectedFile){this.show=!1,this.uploadFile=selectedFile;var fileEntry={attachmentId:-1,fileName:selectedFile.name,fileSize:selectedFile.size,prettyFileSize:(0,filters/* prettyBytes */.Hi)(selectedFile.size),contentType:selectedFile.type,status:null,error:null};this.attachments.push(fileEntry),this.$emit("fileName",selectedFile.name),this.buttonToggle=!0}else this.show=!0},addAttachment:function(){if(this.customupload)this.$emit("onupload",this.uploadFile);else{var self=this,formData=new FormData;"asset"===self.module&&formData.append("assetCategory",self.category),formData.append("moduleName",self.module),formData.append("fileUpload",self.uploadFile),formData.append("importMode",self.importMode),this.saving=!0,self.$http.post("/v2/import/upload",formData).then((function(response){if(response.data)if(self.saving=!1,0!==response.data.responseCode)self.$message.error(response.data.message);else{var importProcessContext=response.data.result.importProcessContext;self.$emit("uploadResponse",importProcessContext)}})).catch((function(error){self.saving=!1,self.$message.error(error)}))}},reset:function(){this.loading=!1,this.attachments=[],this.show=!0},deleteAttachment:function(){this.attachments.splice(0,1),this.show=!0,this.buttonToggle=!1}}},components_UploadDatavue_type_script_lang_js=UploadDatavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_UploadDatavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,UploadData=component.exports},
/***/693185:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ExcelUpload}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/ExcelUpload.vue?vue&type=template&id=cd93ec82
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"layout-padding"},[_vm.upload?_c("div",[_c("div",{staticClass:"fc-form-title"},[_vm._v("Upload Excel Template")]),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-4"},[_c("q-input",{staticClass:"form-item",attrs:{"float-label":"Template Name"},model:{value:_vm.templateName,callback:function($$v){_vm.templateName=$$v},expression:"templateName"}})],1)]),_c("div",{staticClass:"row"},[_c("attachments",{ref:"uploadData",staticClass:"col-md-4",attrs:{customupload:!0,module:_vm.moduleName},on:{onupload:_vm.uploadExcel,uploadResponse:_vm.processMetainfo}})],1)]):_vm._e(),_vm.mapping?_c("div",[_c("div",{staticClass:"fc-form-title"},[_vm._v("Column Mapping")]),_c("mapping",{attrs:{asset:_vm.assetName,metainfo:_vm.metainfo},on:{mappingResponse:_vm.processResult}})],1):_vm._e()])},staticRenderFns=[],quasar_esm=__webpack_require__(641358),UploadData=__webpack_require__(32877),ColumnMapping=__webpack_require__(666952),ExcelUploadvue_type_script_lang_js={data:function(){return{upload:!0,mapping:!1,moduleName:"Energy",mapperName:"Sami",uploadProgress:!1,assetName:"0",templateName:"",metainfo:[],modulesList:[{label:"Energy Data",value:"energydata"},{label:"Building",value:"building"}],assetList:[]}},title:function(){return"Upload Excel Template"},components:{Attachments:UploadData/* default */.Z,Mapping:ColumnMapping/* default */.Z,QInput:quasar_esm/* QInput */.Ke},created:function(){this.loadAssetsList()},methods:{uploadExcel:function(file){var self=this,formData=new FormData;formData.append("templateName",this.templateName),formData.append("excelFile",file),self.$http.post("/tenantbilling/upload",formData).then((function(response){self.templateName=null,self.$refs["uploadData"].reset(),self.$message({message:"File successfully imported...",type:"success"})}))},processMetainfo:function(metainfo){this.metainfo=metainfo,this.upload=!1,this.mapping=!0},processResult:function(data){this.upload=!0,this.mapping=!1;var alert1=Alert.create({html:"Data imported successfully!",color:"positive",position:"top-center"});setTimeout((function(){alert1.dismiss()}),1500)}}},setup_ExcelUploadvue_type_script_lang_js=ExcelUploadvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_ExcelUploadvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ExcelUpload=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/93185.js.map