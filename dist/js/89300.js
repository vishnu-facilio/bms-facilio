"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[89300,12440],{
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/599885:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return type1_Config}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/card-builder/cards/controlCard/type1/Config.vue?vue&type=template&id=8f629158&scoped=true
var Config_render,Config_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"p30"},[_c("div",{staticClass:"header"},[_c("span",{staticClass:"pointer",on:{click:_vm.onGoBack}},[_c("inline-svg",{staticClass:"vertical-top rotate-90 mR20",attrs:{src:"svgs/arrow",iconClass:"icon"}})],1),_vm._v(" "+_vm._s(_vm.cardMeta&&_vm.cardMeta.name||"Control Card Layout")+" "),_c("span",{staticClass:"pointer",on:{click:_vm.onClose}},[_c("inline-svg",{staticClass:"vertical-middle fR",attrs:{src:"svgs/close",iconClass:"icon icon-sm"}})],1)]),_c("div",{staticClass:"container mT20"},[_c("div",{staticClass:"section config-panel"},[_c("el-tabs",{staticClass:"card-tab-fixed",model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_c("el-tab-pane",{attrs:{label:"Config",name:"config"}},[_c("el-form",{ref:this.cardLayout+"_form",attrs:{model:_vm.cardDataObj,rules:_vm.validationRules,"label-position":"top"}},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"title"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Title")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:_vm.isNew},model:{value:_vm.cardDataObj.title,callback:function($$v){_vm.$set(_vm.cardDataObj,"title",$$v)},expression:"cardDataObj.title"}})],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"reading"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Readings")]),_c("ReadingPicker",{attrs:{options:_vm.readingPickerOptions,initialReading:_vm.cardDataObj.reading},on:{onReadingSelect:function(reading){return _vm.setReading("reading",reading)}}})],1)],1)],1),_c("ActionPicker",{ref:"action-picker",attrs:{variables:_vm.variables,elements:[{name:"set-reading-button",displayName:"Button"}]},model:{value:_vm.cardActions,callback:function($$v){_vm.cardActions=$$v},expression:"cardActions"}},[_c("template",{slot:"element-title"},[_c("div")]),_c("template",{slot:"action-type"},[_c("div")])],2),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"dateRange"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Period")]),_c("el-select",{staticClass:"width100 el-input-textbox-full-border",attrs:{placeholder:"Please select a period"},model:{value:_vm.cardDataObj.dateRange,callback:function($$v){_vm.$set(_vm.cardDataObj,"dateRange",$$v)},expression:"cardDataObj.dateRange"}},[_vm._l(_vm.dateOperators,(function(dateRange,index){return[_c("el-option",{key:index,attrs:{label:dateRange.label,value:dateRange.value}})]})),_c("el-option",{attrs:{label:"None",value:"none"}})],2)],1)],1)],1)],1)],1),_c("el-tab-pane",{attrs:{label:"Styles",name:"styles"}},[_c("el-form",{attrs:{model:_vm.cardStateObj,"label-position":"top"}},[_c("el-row",{staticClass:"mB10 mT20"},[_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"primaryColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Primary Text")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"primaryColor"+_vm.cardStateObj.styles.primaryColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.primaryColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"primaryColor",$$v)},expression:"cardStateObj.styles.primaryColor"}})],1)])],1),_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"secondaryColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Button Color")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"secondaryColor"+_vm.cardStateObj.styles.secondaryColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.secondaryColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"secondaryColor",$$v)},expression:"cardStateObj.styles.secondaryColor"}})],1)])],1),_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"backgroundColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Background Color")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"backgroundColor"+_vm.cardStateObj.styles.backgroundColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.backgroundColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"backgroundColor",$$v)},expression:"cardStateObj.styles.backgroundColor"}})],1)])],1),_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"backgroundColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Show Secondary label")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-checkbox",{model:{value:_vm.cardStateObj.styles.showSecondaryText,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"showSecondaryText",$$v)},expression:"cardStateObj.styles.showSecondaryText"}})],1)])],1),_vm.cardStateObj.styles.showSecondaryText?_c("el-col",{attrs:{span:8}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"backgroundColor"}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Secondary label color")]),_c("div",{staticClass:"d-flex mT5 card-color-container fc-color-picker"},[_c("el-color-picker",{key:"backgroundColor"+_vm.cardStateObj.styles.secondaryTextColor,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},model:{value:_vm.cardStateObj.styles.secondaryTextColor,callback:function($$v){_vm.$set(_vm.cardStateObj.styles,"secondaryTextColor",$$v)},expression:"cardStateObj.styles.secondaryTextColor"}})],1)])],1):_vm._e()],1)],1)],1),_c("el-tab-pane",{attrs:{label:"FORMATTING",name:"conditionalformatting"}},[_c("div",{staticClass:"card-builder-criteria-block"},[_c("ConditionalFormating",{ref:"conditional-formatting",attrs:{variables:_vm.conditionalVariables,cardData:_vm.previewData,cardStyles:_vm.cardStateObj.styles},model:{value:_vm.conditionalFormatting,callback:function($$v){_vm.conditionalFormatting=$$v},expression:"conditionalFormatting"}})],1)])],1)],1),_c("div",{staticClass:"preview-panel section"},[_c("div",{staticClass:"card-wrapper"},[_c("Card",{attrs:{componentKey:_vm.componentKey,cardData:_vm.previewData,cardState:_vm.previewState,cardDrilldown:_vm.cardActions,isLoading:_vm.isPreviewLoading}})],1)])]),_c("div",{staticClass:"d-flex mT-auto form-action-btn"},[_c("el-button",{staticClass:"form-btn f13 bold secondary text-center text-uppercase",on:{click:function($event){return _vm.onGoBack()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"form-btn f13 bold primary m0 text-center text-uppercase",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)])},staticRenderFns=[],defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),BaseConfig=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(641384)),validation=__webpack_require__(990260),Configvue_type_script_lang_js={extends:BaseConfig/* default */.Z,methods:{setReading:function(prop,reading){if(reading){var cardDataObj=this.cardDataObj;this.$set(this,"cardDataObj",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},cardDataObj),{},(0,defineProperty/* default */.Z)({},prop,reading))),this.setConditionalVariables(reading)}},setTitleFromReading:function(reading){var cardDataObj=this.cardDataObj,cardName=this.cardDataObj.title;cardDataObj.title=(0,validation/* isEmpty */.xb)(cardName)?reading.readingName:cardName}}},base_Configvue_type_script_lang_js=Configvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_Configvue_type_script_lang_js,Config_render,Config_staticRenderFns,!1,null,null,null)
/* harmony default export */,Config=component.exports,Card=__webpack_require__(535230),DateHelper=__webpack_require__(281230),card_constants=__webpack_require__(806186),ReadingPicker=__webpack_require__(700697),ActionPicker=__webpack_require__(624817),CardConditionalFormating=__webpack_require__(962424),type1_Configvue_type_script_lang_js={name:"controlCard1",extends:Config,props:["isNew","cardType","onClose","onGoBack","onCardSave","onCardUpdate","closePopup"],mixins:[DateHelper/* default */.Z],components:{Card:Card/* default */.Z,ReadingPicker:ReadingPicker/* default */.Z,ActionPicker:ActionPicker/* default */.Z,ConditionalFormating:CardConditionalFormating/* default */.Z},data:function(){return{cardLayout:"controlcard_layout_1",activeTab:"config",isPreviewLoading:!1,conditionalVariables:[{name:"title",dataType:"STRING",displayName:"Title"},{name:"value",dataType:"NUMBER",displayName:"Value"}],resourceProps:["title",{prop:"reading",resourceProps:["moduleName","parentId","fieldName","fieldId","dataType","yAggr","parentType","parentName"]},"dateRange"],cardDataObj:{title:"",operatorId:null,reading:{yAggr:"avg"},dateRange:"Today"},cardActions:{"set-reading-button":{actionType:"controlAction",data:{buttonLabel:"Set",controlType:"point",controlPointId:null,controlGroupId:null}}},cardStateObj:{canResize:!1,styles:{showSecondaryText:!1,primaryColor:"#110d24",secondaryColor:"#1F95DA",secondaryTextColor:"#abb0be",backgroundColor:"#FFF"}},layout:{w:16,h:12},result:null,validationRules:{},readingPickerOptions:{parentId:{type:"single"},fieldName:{type:"single"},fieldId:{type:"single"},dataType:{type:"single"},moduleName:{type:"single"},parentName:{type:"single"},parentType:{type:"single"},yAggr:{type:"single"}},predefinedColors:card_constants/* predefinedColors */.UH,dateOperators:card_constants/* dateOperators */._M,aggregateFunctions:card_constants/* aggregateFunctions */.rD,controlPoints:[],controlGroups:[]}},computed:{previewData:function(){return(0,validation/* isEmpty */.xb)(this.result)?{title:null,value:{},unit:null}:this.result.data}},mounted:function(){if(!this.isNew){var control=this.cardDataObj.control;(0,validation/* isEmpty */.xb)(control)||(this.cardActions["set-reading-button"].data=control,delete this.cardDataObj.control,this.$refs["action-picker"].init())}},methods:{setReading:function(prop,reading){if(reading){var cardDataObj=this.cardDataObj;this.$set(this,"cardDataObj",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},cardDataObj),{},(0,defineProperty/* default */.Z)({},prop,reading))),this.setConditionalVariables(reading)}},validateProperty:function(){return{reading:function(data){var readingProp=this.resourceProps.find((function(prop){return(0,validation/* isObject */.Kn)(prop)?"reading"===prop.prop:"reading"===prop}));if((0,validation/* isObject */.Kn)(readingProp)){var resourceProps=readingProp.resourceProps,nullableFields=["fieldId","dataType"],hasEmptyField=!1;return resourceProps.forEach((function(prop){!nullableFields.includes(prop)&&(0,validation/* isEmpty */.xb)(data["reading"][prop])&&(hasEmptyField=!0)})),hasEmptyField}return(0,validation/* isEmpty */.xb)(data["reading"])}.bind(this),dateRange:function(){return!1}}}}},controlCard_type1_Configvue_type_script_lang_js=type1_Configvue_type_script_lang_js,Config_component=(0,componentNormalizer/* default */.Z)(controlCard_type1_Configvue_type_script_lang_js,render,staticRenderFns,!1,null,"8f629158",null)
/* harmony default export */,type1_Config=Config_component.exports},
/***/962424:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CardConditionalFormating}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/card-builder/components/CardConditionalFormating.vue?vue&type=template&id=1088c554
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_vm._e():_c("div",{staticClass:"conditional-formatting p10"},[_c("el-collapse",{staticClass:"new-rule-collapse position-relative controllogic-collapse",attrs:{accordion:!0},model:{value:_vm.activeNames,callback:function($$v){_vm.activeNames=$$v},expression:"activeNames"}},_vm._l(_vm.conditionalFormatting,(function(conditional,index){return _c("el-collapse-item",{key:index,staticClass:"rule-border-blue mT20 position-relative",staticStyle:{"border-left":"1px solid rgb(228, 235, 241)"},attrs:{name:index}},[_c("template",{slot:"title"},[_vm._v(" Conditional Rule "+_vm._s(index+1)+" ")]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"conditional-formatting"},[_c("new-criteria-builder",{staticClass:"graphics-criteria-builder",attrs:{title:"Specify conditions",exrule:conditional.criteria,index:index,showSiteField:!0,module:"cardbuilder",variables:_vm.filteredVariables},on:{condition:_vm.getCriteria}}),_c("div",{staticClass:"style-container pB20"},[_c("el-row",[_c("label",{staticClass:"fc-modal-sub-title",attrs:{for:"name"}},[_vm._v("Formatting")]),_c("div",{staticClass:"fc-sub-title-desc"},[_vm._v(" Specify styles for the conditions ")])]),_c("el-row",{staticClass:"mT10",attrs:{gutter:10}},[conditional.styles.hasOwnProperty("primaryColor")?_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("Primary")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},on:{change:_vm.emitData},model:{value:conditional.styles.primaryColor,callback:function($$v){_vm.$set(conditional.styles,"primaryColor",$$v)},expression:"conditional.styles.primaryColor"}})],1)]):_vm._e(),conditional.styles.hasOwnProperty("secondaryColor")?_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("Secondary")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},on:{change:_vm.emitData},model:{value:conditional.styles.secondaryColor,callback:function($$v){_vm.$set(conditional.styles,"secondaryColor",$$v)},expression:"conditional.styles.secondaryColor"}})],1)]):_vm._e(),conditional.styles.hasOwnProperty("arrowUpColor")?_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("Arrow Up color")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},on:{change:_vm.emitData},model:{value:conditional.styles.arrowUpColor,callback:function($$v){_vm.$set(conditional.styles,"arrowUpColor",$$v)},expression:"conditional.styles.arrowUpColor"}})],1)]):_vm._e(),conditional.styles.hasOwnProperty("arrowDownColor")?_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("Arrow Down color")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},on:{change:_vm.emitData},model:{value:conditional.styles.arrowDownColor,callback:function($$v){_vm.$set(conditional.styles,"arrowDownColor",$$v)},expression:"conditional.styles.arrowDownColor"}})],1)]):_vm._e(),conditional.styles.hasOwnProperty("backgroundColor")?_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("BG")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},on:{change:_vm.emitData},model:{value:conditional.styles.backgroundColor,callback:function($$v){_vm.$set(conditional.styles,"backgroundColor",$$v)},expression:"conditional.styles.backgroundColor"}})],1)]):_vm._e(),conditional.styles.hasOwnProperty("colors")&&["gauge_layout_1","gauge_layout_3"].includes(_vm.cardLayout)?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Gauge Colors")]),_c("div",{staticClass:"mT5 card-color-container"},_vm._l(conditional.styles.colors,(function(color,index){return _c("div",{key:index,staticClass:"mR10 fc-color-picker card-color-container"},[_c("el-color-picker",{key:""+color.id+color.hex,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},on:{change:_vm.emitData},model:{value:color.hex,callback:function($$v){_vm.$set(color,"hex",$$v)},expression:"color.hex"}})],1)})),0)]):_vm._e(),conditional.styles.hasOwnProperty("color")&&["gauge_layout_2","gauge_layout_4"].includes(_vm.cardLayout)?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Gauge Color")]),_c("div",{staticClass:"mT5"},[_c("div",{staticClass:"mR10 fc-color-picker card-color-container"},[_c("el-color-picker",{key:""+conditional.styles.color.id+conditional.styles.color.hex,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},on:{change:_vm.emitData},model:{value:conditional.styles.color.hex,callback:function($$v){_vm.$set(conditional.styles.color,"hex",$$v)},expression:"conditional.styles.color.hex"}})],1)])]):_vm._e(),conditional.styles.hasOwnProperty("tickColor")&&["gauge_layout_3","gauge_layout_4"].includes(_vm.cardLayout)?_c("el-col",{staticClass:"mB50",attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Tick Color")]),_c("div",{staticClass:"mT5 card-color-container"},[_c("div",{staticClass:"mR10 fc-color-picker card-color-container"},[_c("el-color-picker",{key:""+conditional.styles.tickColor.id+conditional.styles.tickColor.hex,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},on:{change:_vm.emitData},model:{value:conditional.styles.tickColor.hex,callback:function($$v){_vm.$set(conditional.styles.tickColor,"hex",$$v)},expression:"conditional.styles.tickColor.hex"}})],1)])]):_vm._e(),conditional.styles.hasOwnProperty("colorBarProgress")?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Bar start Color")]),_c("div",{staticClass:"d-flex mT5 card-color-container"},[_c("div",{staticClass:"mR10 fc-color-picker card-color-container"},[_c("el-color-picker",{key:""+conditional.styles.colorBarProgress,attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},on:{change:_vm.emitData},model:{value:conditional.styles.colorBarProgress,callback:function($$v){_vm.$set(conditional.styles,"colorBarProgress",$$v)},expression:"conditional.styles.colorBarProgress"}})],1)])]):_vm._e(),conditional.styles.hasOwnProperty("colorBarProgressEnd")?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Bar end color")]),_c("div",{staticClass:"d-flex mT5 card-color-container"},[_c("div",{staticClass:"mR10 fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.predefinedColors,size:"small","popper-class":"chart-custom-color-picker"},on:{change:_vm.emitData},model:{value:conditional.styles.colorBarProgressEnd,callback:function($$v){_vm.$set(conditional.styles,"colorBarProgressEnd",$$v)},expression:"conditional.styles.colorBarProgressEnd"}})],1)])]):_vm._e(),conditional.styles.hasOwnProperty("blink")?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"mT40"},[_c("el-checkbox",{on:{change:_vm.emitData},model:{value:conditional.styles.blink,callback:function($$v){_vm.$set(conditional.styles,"blink",$$v)},expression:"conditional.styles.blink"}},[_vm._v("Blink")])],1)]):_vm._e(),conditional.styles.hasOwnProperty("displayValue")?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v("Display value")]),_c("div",[_c("el-input",{staticClass:"fc-border-select",model:{value:conditional.styles.displayValue,callback:function($$v){_vm.$set(conditional.styles,"displayValue",$$v)},expression:"conditional.styles.displayValue"}})],1)]):_vm._e()],1)],1)],1),_vm.conditionalFormatting.length>1?_c("img",{staticClass:"delete-icon pointer",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRule(index)}}}):_vm._e()])],2)})),1),_c("el-button",{staticClass:"fc-btn-green-medium-fill mT20 f14 fwBold",attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:_vm.addRule}})],1)},staticRenderFns=[],NewCriteriaBuilder=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(859850)),colors=__webpack_require__(519898),card_constants=__webpack_require__(806186),validation=__webpack_require__(990260),CardConditionalFormatingvue_type_script_lang_js={props:["value","cardStyles","variables","cardLayout"],components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z},data:function(){return{loading:!1,predefinedColors:card_constants/* predefinedColors */.UH,activeNames:["0"],conditionalFormatting:[],styles:{primaryColor:"#110d24",secondaryColor:"#969caf",backgroundColor:"#FFF",tickColor:{id:0,hex:"#969aa2"},color:{id:0,hex:"#FF728E"},colors:[{id:0,hex:"#ff7878"},{id:1,hex:"#7d49ff"},{id:2,hex:"#514dff"},{id:3,hex:"#1eb9b7"}],backgroundColors:[{id:0,hex:"#fff"},{id:0,hex:"#fff"}],colorBarProgress:"#3adaad",colorBarProgressEnd:"#0232ab",arrowUpColor:"#008000",arrowDownColor:"#ff0100",blink:!1,displayValue:null}}},mounted:function(){this.initConditionalFormatting()},watch:{currentObject:function(){this.initConditionalFormatting()}},computed:{filteredVariables:function(){return this.variables.filter((function(rt){return"title"!==rt.name}))}},methods:{rerender:function(){var _this=this;this.loading=!0,setTimeout((function(){_this.loading=!1,_this.cleardata()}),500)},cleardata:function(){this.conditionalFormatting=[],this.addRule(),this.emitData()},initConditionalFormatting:function(){if((0,validation/* isEmpty */.xb)(this.$getProperty(this,"value.conditionalFormatting",null)))this.conditionalFormatting=[],this.addRule();else{var value=this.value;this.conditionalFormatting=this.getExtraStyles(value.conditionalFormatting)}},getExtraStyles:function(conditionalFormatting){var _this2=this;return conditionalFormatting.forEach((function(rt){var styles=rt.styles;styles.hasOwnProperty("displayValue")||_this2.$set(styles,"displayValue",null),styles.hasOwnProperty("blink")||_this2.$set(styles,"blink",!1)})),conditionalFormatting},getCriteria:function(criteria,index){this.conditionalFormatting[index].criteria=criteria},getPredefinedColors:function(){return colors/* default */.Z.readingcardColors},deleteRule:function(key){this.conditionalFormatting.splice(key,1)},getEmptyCFObject:function(){var _this3=this,cf={criteria:{pattern:""},styles:{}};return Object.keys(this.cardStyles).forEach((function(rt){_this3.$set(cf.styles,rt,_this3.styles[rt])})),cf.styles=this.setAdditionalStats(cf.styles),cf},setAdditionalStats:function(styles){return this.$set(styles,"blink",!1),this.$set(styles,"displayValue",null),styles},addRule:function(){this.conditionalFormatting.push(this.getEmptyCFObject())},emitData:function(){var conditionalFormatting={conditionalFormatting:this.conditionalFormatting};this.$emit("input",conditionalFormatting)}}},components_CardConditionalFormatingvue_type_script_lang_js=CardConditionalFormatingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CardConditionalFormatingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CardConditionalFormating=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/89300.js.map