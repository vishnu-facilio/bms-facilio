"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[2258,10321,32686,80865,53021],{
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/646716:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FetchViewsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),FetchViewsMixinvue_type_script_lang_js={methods:{fetchView:function(moduleName){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,data,error,_ref,groupViews;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,params={moduleName:moduleName,groupType:1,viewType:1},_context.next=4,api/* API */.bl.get("/v2/views/viewList",params);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error){_context.next=10;break}return _ref=data||{},groupViews=_ref.groupViews,_context.abrupt("return",_this.getFirstView(groupViews));case 10:_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context["catch"](0),_context.abrupt("return","all");case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])})))()},getFirstView:function(groupViews){var _ref2=(groupViews||[]).find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref2.views,_this$$getProperty=this.$getProperty(views,"0",{}),name=_this$$getProperty.name;return name||"all"}}},base_FetchViewsMixinvue_type_script_lang_js=FetchViewsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_FetchViewsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FetchViewsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"Â  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports},
/***/848277:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CustomModuleSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/custom-module/CustomModuleSummary.vue?vue&type=template&id=2c44e6b2&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom-module-overview",class:_vm.customClass},[_vm.isLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.record)?_vm._e():[_c("div",{staticClass:"header p20"},[_c("div",{staticClass:"custom-module-details"},[_c("div",{staticClass:"d-flex flex-middle align-center"},[_vm.showPhotoField?_c("div",{staticClass:"mR5"},[_vm.record[_vm.photoFieldName]?_c("div",[_vm.$helpers.isLicenseEnabled("THROW_403_WEBTAB")?_c("img",{staticClass:"img-container",attrs:{src:_vm.record.getImageUrl("photoUrl")}}):_c("img",{staticClass:"img-container",attrs:{src:_vm.record.getImage(_vm.photoFieldName)}})]):_vm.showAvatar?_c("div",[_c("avatar",{attrs:{size:"lg",user:{name:_vm.record.name}}})],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"mL5"},[_c("div",{staticClass:"custom-module-id"},[_vm.$account.portalInfo?_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{animateFill:!1,animation:"shift-toward"},expression:"{ animateFill: false, animation: 'shift-toward' }"}],staticClass:"el-icon-back fc-grey3-text14 fw6 pR10 pointer",attrs:{content:"back",arrow:""},on:{click:_vm.back}}):_vm._e(),_vm._v(" #"+_vm._s(_vm.record&&_vm.record.id)+" ")]),_c("div",{staticClass:"custom-module-name "},[_c("div",{staticClass:"d-flex max-width300px"},[_c("el-tooltip",{attrs:{placement:"bottom",effect:"dark",content:_vm.record[_vm.mainFieldKey]}},[_c("span",{staticClass:"whitespace-pre-wrap custom-header"},[_vm._v(_vm._s(_vm.record[_vm.mainFieldKey]))])])],1),_vm.record.isStateFlowEnabled()&&_vm.record.currentModuleState()?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.record.currentModuleState())+" ")]):_vm._e()])])])]),_c("div",{staticClass:"marginL-auto flex-middle"},[_c("CustomButton",{staticClass:"pR10",attrs:{record:_vm.record,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.refreshData()},onError:function(){}}}),_vm.record.isStateFlowEnabled()?[_c("TransitionButtons",{key:_vm.record.id+"transitions",staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.record,disabled:_vm.record.isApprovalEnabled(),buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.refreshData()},transitionFailure:function(){}}})]:_vm._e(),_vm.record.isApprovalEnabled()?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.record.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.record,hideApprovers:_vm.shouldHideApprovers},on:{onSuccess:function($event){return _vm.refreshData()},onFailure:function(){}}})],1):_vm._e(),_vm.showEdit?_c("el-button",{staticClass:"fc-wo-border-btn pL15 pR15 self-center",attrs:{type:"button"},on:{click:_vm.editRecord}},[_c("i",{staticClass:"el-icon-edit"})]):_vm._e()],2)]),_c("Page",{key:_vm.record.id,attrs:{module:_vm.moduleName,id:_vm.record.id,details:_vm.record,primaryFields:_vm.primaryFields,notesModuleName:_vm.notesModuleName,isV3Api:!0,attachmentsModuleName:_vm.attachmentsModuleName}})]],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),PageBuilder=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(760218)),api=__webpack_require__(32284),router=__webpack_require__(329435),CustomButton=__webpack_require__(623857),CustomButtonUtil=__webpack_require__(746095),TransitionButtons=__webpack_require__(987612),ApprovalBar=__webpack_require__(42525),constant=__webpack_require__(354754),CustomModuleData=__webpack_require__(689565),eventBus=__webpack_require__(398011),CustomModuleSummaryvue_type_script_lang_js={name:"CustomModuleSummary",components:{Page:PageBuilder/* default */.Z,CustomButton:CustomButton/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,ApprovalBar:ApprovalBar/* default */.Z},data:function(){return{isLoading:!1,record:null,primaryFields:[],notesModuleName:"cmdnotes",attachmentsModuleName:"cmdattachments",formFields:null,POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,customClass:""}},created:function(){this.$store.dispatch("loadApprovalStatus")},mounted:function(){eventBus/* eventBus */.Y.$on("refresh-overview",this.refreshData)},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("refresh-overview",this.refreshData)},computed:{moduleName:function(){return this.$route.params.moduleName?this.$route.params.moduleName:this.$attrs.moduleName||""},id:function(){var paramId=this.$attrs.id||this.$route.params.id;return paramId&&"null"!==paramId?parseInt(this.$route.params.id):""},showEdit:function(){var $org=this.$org,$hasPermission=this.$hasPermission,record=this.record,orgIdsToCheck=constant/* default */.Z.isCustomModulePermissionsEnabled,canShowEdit=!orgIdsToCheck($org.id)&&!(0,router/* isWebTabsEnabled */.tj)()||$hasPermission("".concat(this.moduleName,":UPDATE"));return canShowEdit&&record.canEdit()},mainFieldKey:function(){return"name"},photoFieldName:function(){return"photoId"},showPhotoField:function(){var formFields=this.formFields;if(formFields){var photoField=formFields.find((function(field){return"photo"===field.name}));return!!photoField&&!photoField.hideField}return!1},showAvatar:function(){return!1},shouldHideApprovers:function(){return!1},modelDataClass:function(){return CustomModuleData/* CustomModuleData */.u}},watch:{id:{handler:function(){this.loadRecord(!0)},immediate:!0},moduleName:function(){this.loadRecord(!0)}},methods:{refreshData:function(){this.loadRecord(!0)},loadRecord:function(){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,moduleName,id;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_context.prev=1,moduleName=_this.moduleName,id=_this.id,_this.isLoading=!0,_context.next=6,_this.modelDataClass.fetch({moduleName:moduleName,id:id,force:force});case 6:return _this.record=_context.sent,_context.next=9,_this.getFormMeta();case 9:_context.next=14;break;case 11:_context.prev=11,_context.t0=_context["catch"](1),_this.$message.error((null===_context.t0||void 0===_context.t0?void 0:_context.t0.message)||_this.$t("custommodules.summary.record_summary_error"));case 14:_this.isLoading=!1;case 15:case"end":return _context.stop()}}),_callee,null,[[1,11]])})))()},editRecord:function(){var moduleName=this.moduleName,id=this.id;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref.name;name&&this.$router.push({name:name,params:{id:id}})}else{var creationName="custommodules-edit";this.$router.push({name:creationName,params:{moduleName:moduleName,id:id}})}},getFormMeta:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this2$record,_this2$record2,formId,moduleName,url,_yield$API$get,data,error,formFields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2$record=_this2.record,_this2$record2=void 0===_this2$record?{}:_this2$record,formId=_this2$record2.formId,moduleName=_this2.moduleName,url="/v2/forms/".concat(moduleName),_context2.next=4,api/* API */.bl.get(url,{formId:formId||-1});case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(formFields=(data.form||{}).fields,_this2.formFields=formFields);case 8:case"end":return _context2.stop()}}),_callee2)})))()},back:function(){this.$router.go(-1)}}},custom_module_CustomModuleSummaryvue_type_script_lang_js=CustomModuleSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(custom_module_CustomModuleSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"2c44e6b2",null)
/* harmony default export */,CustomModuleSummary=component.exports},
/***/383943:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CustomModulesCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/custom-module/CustomModulesCreation.vue?vue&type=template&id=7325388c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:[_vm.isCreateEditWidgetConfigured?"form-widget-container":"form-data-creation",_vm.isEmpty(_vm.widgetsArr)?"":"form-creation-widgets",_vm.customClassForContainer]},[_vm.showEmptyState?_c("div",{staticClass:"form-empty-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"mB10 mT10 no-template-text f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("forms.live_form.no_forms"))+" ")]),_c("div",{staticClass:"contact-admin-text f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("forms.live_form.contact_admin"))+" ")])],1):_c("div",{staticClass:"height-100",class:[_vm.$validation.isEmpty(_vm.widgetsArr)?"":"form-left-container"]},[_vm.isCreateEditWidgetConfigured?_vm._e():_c("div",{staticClass:"header mT20 mB10 d-flex"},[_c("div",{staticClass:"title mT10"},[_vm._v(_vm._s(_vm.title))]),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return _c("el-option",{key:index,attrs:{value:form,label:form.displayName}})})),1):_vm._e()],1),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_vm.isCreateEditWidgetConfigured?_c("ConnectedAppViewWidget",{attrs:{widgetId:_vm.widgetId,recordId:_vm.moduleDataId,context:_vm.moduleData}}):_c("f-webform",{ref:"f-webform",attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isEdit:_vm.isEdit,isV3Api:_vm.isV3Api,moduleData:_vm.moduleData,moduleDataId:_vm.moduleDataId,isWidgetsSupported:_vm.isWidgetsSupported,subFormRecords:_vm.subFormRecords,modifyFieldPropsHook:_vm.modifyFieldPropsHook},on:{"update:form":function($event){_vm.formObj=$event},onBlur:_vm.onBlurHook,onWidgetChange:_vm.onWidgetChange,save:_vm.saveRecord,cancel:_vm.redirectToList}})],1),_c("portal-target",{staticClass:"widgets-container",attrs:{name:"side-bar-widgets"}})],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(990260)),FormCreation=__webpack_require__(373729),ConnectedAppViewWidget=__webpack_require__(767004),FetchViewsMixin=__webpack_require__(646716),router=__webpack_require__(329435),CustomModuleData=__webpack_require__(689565),CustomModulesCreationvue_type_script_lang_js={extends:FormCreation/* default */.Z,props:["dataObj","selectedFormDetails"],components:{ConnectedAppViewWidget:ConnectedAppViewWidget["default"]},mixins:[FetchViewsMixin/* default */.Z],data:function(){return{widgetId:null,isEmpty:validation/* isEmpty */.xb}},computed:{showEmptyState:function(){var _ref=this||{},forms=_ref.forms;return!this.isLoading&&(0,validation/* isEmpty */.xb)(forms)&&!this.isCreateEditWidgetConfigured},moduleName:function(){var moduleName=this.$route.params.moduleName;// TODO: make this a prop and use directly
return moduleName||(moduleName=this.$attrs.moduleName),(0,validation/* isEmpty */.xb)(moduleName)?null:moduleName},moduleDisplayName:function(){return this.formObj&&this.formObj.module?this.formObj.module.displayName:""},isWidgetsSupported:function(){return!0},isCreateEditWidgetConfigured:function(){var widgetId=this.widgetId;return!(0,validation/* isEmpty */.xb)(widgetId)},isV3Api:function(){return!0},modelDataClass:function(){return CustomModuleData/* CustomModuleData */.u},customProps:function(){return{}},loadDataManually:function(){return!1}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleDataId,moduleName,loadDataManually,widgetId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(moduleDataId=_this.moduleDataId,moduleName=_this.moduleName,loadDataManually=_this.loadDataManually,_this.isLoading=!0,(0,validation/* isEmpty */.xb)(moduleDataId)&&!loadDataManually){_context.next=7;break}return _context.next=5,_this.loadModuleData({moduleName:moduleName,moduleDataId:moduleDataId});case 5:_context.next=8;break;case 7:_this.moduleData=new _this.modelDataClass((0,objectSpread2/* default */.Z)({moduleName:moduleName},_this.dataObj||{}));case 8:if((0,validation/* isEmpty */.xb)(_this.selectedFormDetails)){_context.next=13;break}return _context.next=11,_this.loadFormData(null,_this.selectedFormDetails||null);case 11:return _this.selectedForm=_context.sent,_context.abrupt("return");case 13:return _context.next=15,_this.getCreateEditRecordWidgetId();case 15:if(widgetId=_context.sent,(0,validation/* isEmpty */.xb)(widgetId)){_context.next=21;break}_this.widgetId=widgetId,_this.isLoading=!1,_context.next=24;break;case 21:return _context.next=23,_this.loadFormsList(moduleName);case 23:_this.setInitialForm();case 24:_this.isLoading=!1;case 25:case"end":return _context.stop()}}),_callee)})))()},getCreateEditRecordWidgetId:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var isEdit,operatorValue,filters,_yield$_this2$modelDa,connectedAppWidgets,_ref2,_ref3,selectedWidget,_ref4,widgetId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return isEdit=_this2.isEdit,operatorValue=isEdit?7:6,filters={entityType:{operatorId:9,value:["".concat(operatorValue)]}},_this2.isLoading=!0,_context2.prev=4,_context2.next=7,_this2.modelDataClass.loadWidgets(filters);case 7:return _yield$_this2$modelDa=_context2.sent,connectedAppWidgets=_yield$_this2$modelDa.connectedAppWidgets,_ref2=connectedAppWidgets||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,1),selectedWidget=_ref3[0],_ref4=selectedWidget||{},widgetId=_ref4.id,_context2.abrupt("return",widgetId);case 14:_context2.prev=14,_context2.t0=_context2["catch"](4),_this2.showErrorToastMessage(_context2.t0,_this2.$t("custommodules.form.widget_error"));case 17:case"end":return _context2.stop()}}),_callee2,null,[[4,14]])})))()},loadFormsList:function(moduleName){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,_this3.modelDataClass.loadFormsList(moduleName);case 3:_this3.forms=_context3.sent,_context3.next=9;break;case 6:_context3.prev=6,_context3.t0=_context3["catch"](0),_this3.showErrorToastMessage(_context3.t0,_this3.$t("custommodules.form.form_template_error"));case 9:case"end":return _context3.stop()}}),_callee3,null,[[0,6]])})))()},loadModuleData:function(_ref5){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleDataId,moduleName,_ref6,customProps;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return moduleDataId=_ref5.moduleDataId,moduleName=_ref5.moduleName,_context4.prev=1,_ref6=_this4||{},customProps=_ref6.customProps,_context4.next=5,_this4.modelDataClass.fetch((0,objectSpread2/* default */.Z)({moduleName:moduleName,id:moduleDataId},customProps));case 5:_this4.moduleData=_context4.sent,_context4.next=11;break;case 8:_context4.prev=8,_context4.t0=_context4["catch"](1),_this4.showErrorToastMessage(_context4.t0,_this4.$t("custommodules.summary.record_summary_error"));case 11:case"end":return _context4.stop()}}),_callee4,null,[[1,8]])})))()},loadFormData:function(formId,selectedFormDetails){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var selectedForm,moduleName,moduleDataId,moduleData,loadDataManually,dataObj,formObj,form;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return selectedForm=_this5.selectedForm,moduleName=_this5.moduleName,moduleDataId=_this5.moduleDataId,moduleData=_this5.moduleData,loadDataManually=_this5.loadDataManually,dataObj=_this5.dataObj,formObj={},_context5.prev=2,_context5.next=5,_this5.modelDataClass.loadFormData({formId:formId,moduleName:moduleName,selectedForm:selectedFormDetails||selectedForm});case 5:form=_context5.sent,(0,validation/* isEmpty */.xb)(form)||(formObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},form),{},{secondaryBtnLabel:_this5.$t("common._common.cancel"),primaryBtnLabel:_this5.$t("common._common._save")}),((0,validation/* isEmpty */.xb)(moduleDataId)||(0,validation/* isEmpty */.xb)(null===moduleData||void 0===moduleData?void 0:moduleData.id))&&!loadDataManually&&(0,validation/* isEmpty */.xb)(dataObj)||(formObj=_this5.moduleData.deserialize(formObj)),_this5.formObj=formObj),_context5.next=12;break;case 9:_context5.prev=9,_context5.t0=_context5["catch"](2),_this5.showErrorToastMessage(_context5.t0,_this5.$t("custommodules.form.form_details_error"));case 12:return _context5.abrupt("return",formObj);case 13:case"end":return _context5.stop()}}),_callee5,null,[[2,9]])})))()},saveRecord:function(formModel){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var formObj,afterSaveHook,afterSerializeHook,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return formObj=_this6.formObj,afterSaveHook=_this6.afterSaveHook,afterSerializeHook=_this6.afterSerializeHook,_this6.isSaving=!0,
//same params as serialize method
_context6.next=4,_this6.moduleData.save(formObj,formModel,afterSerializeHook);case 4:response=_context6.sent,_this6.isSaving=!1,
// Hook to handle notification after crud operation
_this6.notificationHandler(response),
// Hook to handle response after crud operation
!(0,validation/* isEmpty */.xb)(afterSaveHook)&&(0,validation/* isFunction */.mf)(afterSaveHook)&&_this6.afterSaveHook(response);case 8:case"end":return _context6.stop()}}),_callee6)})))()},afterSaveHook:function(response){var moduleName=this.moduleName,data=response[moduleName],id=data.id;this.redirectToSummary(id)},redirectToSummary:function(id){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var moduleName,viewname,_ref7,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _this7.isSaving=!0,moduleName=_this7.moduleName,_context7.next=4,_this7.fetchView(moduleName);case 4:viewname=_context7.sent,_this7.isSaving=!1,(0,router/* isWebTabsEnabled */.tj)()?(_ref7=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name,name&&_this7.$router.push({name:name,params:{viewname:viewname,id:id}})):_this7.$router.push({name:"custommodules-summary",params:{id:id,viewname:viewname}}).catch((function(){}));case 7:case"end":return _context7.stop()}}),_callee7)})))()},redirectToList:function(){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref8=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref8.name;name&&this.$router.push({name:name})}else this.$router.push({name:"custommodules-list",params:{moduleName:moduleName}}).catch((function(){}))},showErrorToastMessage:function(error,customMsg){var message=(null===error||void 0===error?void 0:error.message)||customMsg;this.$message.error(message)}}},custom_module_CustomModulesCreationvue_type_script_lang_js=CustomModulesCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(custom_module_CustomModulesCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CustomModulesCreation=component.exports},
/***/571165:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewShift}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/peopleV2/shift/NewShift.vue?vue&type=template&id=57e38d1c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",[_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{fullscreen:!0,"append-to-body":!0,visible:_vm.visibility,title:_vm.$t("common.header.shift"),"custom-class":"fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog f-webform-right-dialog"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.title)+" ")])])]),_c("div",{staticClass:"mT20 new-shift"},[_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{ref:"f-webform",attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isEdit:_vm.isEdit,isV3Api:_vm.isV3Api,moduleData:_vm.moduleData,moduleDataId:_vm.moduleDataId,isWidgetsSupported:_vm.isWidgetsSupported,subFormRecords:_vm.subFormRecords,modifyFieldPropsHook:_vm.modifyFieldPropsHook},on:{"update:form":function($event){_vm.formObj=$event},onBlur:_vm.onBlurHook,onWidgetChange:_vm.onWidgetChange,save:_vm.saveRecord,cancel:_vm.redirectToList}})],1)])],1):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),CustomModulesCreation=(__webpack_require__(689730),__webpack_require__(108472),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(383943)),validation=__webpack_require__(990260),NewShiftvue_type_script_lang_js={extends:CustomModulesCreation["default"],props:["id","viewName","visibility"],computed:{moduleDataId:function(){return this.id},moduleName:function(){return"shift"},moduleDisplayName:function(){return"Shift"},isEdit:function(){return!!this.id}},methods:{afterSerializeHook:function(_ref){var data=_ref.data;return null!==data&&void 0!==data&&data.isDefault||(data.isDefault=!1),null!==data&&void 0!==data&&data.isActive||(data.isActive=!0),data},loadModuleData:function(_ref2){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleDataId,moduleName,_ref3,customProps;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleDataId=_ref2.moduleDataId,moduleName=_ref2.moduleName,_context.prev=1,_ref3=_this||{},customProps=_ref3.customProps,_context.next=5,_this.modelDataClass.fetch((0,objectSpread2/* default */.Z)({moduleName:moduleName,id:moduleDataId},customProps));case 5:_this.moduleData=_context.sent,_context.next=11;break;case 8:_context.prev=8,_context.t0=_context["catch"](1),_this.$message.error(_context.t0);case 11:case"end":return _context.stop()}}),_callee,null,[[1,8]])})))()},saveRecord:function(formModel){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var formObj,afterSaveHook,afterSerializeHook,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return formObj=_this2.formObj,afterSaveHook=_this2.afterSaveHook,afterSerializeHook=_this2.afterSerializeHook,_this2.isSaving=!0,_context2.next=4,_this2.moduleData.save(formObj,formModel,afterSerializeHook);case 4:response=_context2.sent,_this2.isSaving=!1,_this2.notificationHandler(response),
// Hook to handle response after crud operation
!(0,validation/* isEmpty */.xb)(afterSaveHook)&&(0,validation/* isFunction */.mf)(afterSaveHook)&&_this2.afterSaveHook(response),_this2.$emit("saved");case 9:case"end":return _context2.stop()}}),_callee2)})))()},afterSaveHook:function(response){var _ref4=response||{},error=_ref4.error;(0,validation/* isEmpty */.xb)(error)&&this.redirectToList()},redirectToList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_this3.$emit("update:visibility",!1);case 1:case"end":return _context3.stop()}}),_callee3)})))()},hoursToSeconds:function(time){var SECONDS_IN_HOUR=3600,SECONDS=60,hours=parseInt(time.slice(0,2)),minutes=parseInt(time.slice(3,5)),timeInSeconds=hours*SECONDS_IN_HOUR+minutes*SECONDS;return timeInSeconds},timeToSeconds:function(formModel){if(formModel)return formModel.startTime&&(formModel.startTime=this.hoursToSeconds(formModel.startTime)),formModel.endTime&&(formModel.endTime=this.hoursToSeconds(formModel.endTime)),formModel},formatTime:function(t){return t.toString().padStart(2,"0")},secondsToHours:function(seconds){if(!seconds)return"00:00";var HOUR_IN_SECONDS=3600,MINUTE_IN_SECONDS=60,minutes=seconds%HOUR_IN_SECONDS/MINUTE_IN_SECONDS,hours=Math.floor(seconds/HOUR_IN_SECONDS);return this.formatTime(hours)+":"+this.formatTime(minutes)},toHumanReadableTime:function(){this.moduleData&&(this.moduleData["startTime"]=this.secondsToHours(this.moduleData["startTime"]),this.moduleData["endTime"]=this.secondsToHours(this.moduleData["endTime"]))}}},shift_NewShiftvue_type_script_lang_js=NewShiftvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(shift_NewShiftvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewShift=component.exports},
/***/182757:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ShiftSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/peopleV2/shift/ShiftSummary.vue?vue&type=template&id=40953a47
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom-module-overview",class:_vm.customClass},[_vm.isLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.record)?_vm._e():[_c("div",{staticClass:"header pT20 pL20 pR20"},[_c("div",{staticClass:"custom-module-details"},[_c("div",{staticClass:"d-flex flex-middle align-center"},[_vm.showPhotoField?_c("div",{staticClass:"mR5"},[_vm.record[_vm.photoFieldName]?_c("div",[_c("img",{staticClass:"img-container",attrs:{src:_vm.record.getImage(_vm.photoFieldName)}})]):_vm.showAvatar?_c("div",[_c("avatar",{attrs:{size:"lg",user:{name:_vm.record.name}}})],1):_vm._e()]):_vm._e(),_c("div",[_c("div",{staticClass:"custom-module-id"},[_vm.$account.portalInfo?_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{animateFill:!1,animation:"shift-toward"},expression:"{ animateFill: false, animation: 'shift-toward' }"}],staticClass:"el-icon-back fc-grey3-text14 fw6 pR10 pointer",attrs:{content:"back",arrow:""},on:{click:_vm.back}}):_vm._e(),_vm._v(" #"+_vm._s(_vm.record&&_vm.record.id)+" ")]),_c("div",{staticClass:"mT5 custom-module-name"},[_c("div",{staticClass:"d-flex max-width300px"},[_c("el-tooltip",{attrs:{placement:"bottom",effect:"dark",content:_vm.record[_vm.mainFieldKey]}},[_c("span",{staticClass:"whitespace-pre-wrap custom-header"},[_vm._v(_vm._s(_vm.record[_vm.mainFieldKey]))])])],1),_vm.record.isStateFlowEnabled()&&_vm.record.currentModuleState()?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.record.currentModuleState())+" ")]):_vm._e()])])])]),_c("div",{staticClass:"marginL-auto flex-middle"},[_c("CustomButton",{staticClass:"pR10",attrs:{record:_vm.record,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.refreshData()},onError:function(){}}}),_vm.record.isStateFlowEnabled()?[_c("TransitionButtons",{key:_vm.record.id+"transitions",staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.record,disabled:_vm.record.isApprovalEnabled(),buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.refreshData()},transitionFailure:function(){}}})]:_vm._e(),_vm.record.isApprovalEnabled()?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.record.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.record,hideApprovers:_vm.shouldHideApprovers},on:{onSuccess:function($event){return _vm.refreshData()},onFailure:function(){}}})],1):_vm._e(),_vm.showDropdown?_c("el-dropdown",{staticClass:"fc-btn-ico-lg mL15 fc-btn-ico-lg pT5 pB5 pL8 pR8 pointer height40 mT4",attrs:{trigger:"click"}},[_c("div",{staticClass:"flex-middle"},[_c("i",{staticClass:"el-icon-more pointer overview-icon-more-btn"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",[_vm.hasUpdatePermission?_c("div",{on:{click:_vm.toggleShowNewShift}},[_vm._v(" "+_vm._s(_vm.$t("common._common.edit"))+" ")]):_vm._e()]),_c("el-dropdown-item",[_vm.deleteableShift(_vm.record)?_c("div",{on:{click:function($event){return _vm.deleteShift(_vm.record.id)}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")]):_vm._e()])],1)],1):_vm._e()],2)]),_vm.showNewShift?_c("NewShift",{attrs:{visibility:_vm.showNewShift,id:_vm.record.id,viewName:_vm.viewname},on:{"update:visibility":function($event){_vm.showNewShift=$event},saved:_vm.toggleNewShiftWindowAndReload}}):_vm._e(),_c("Page",{key:_vm.record.id,attrs:{module:_vm.moduleName,id:_vm.record.id,details:_vm.record,primaryFields:_vm.primaryFields,isV3Api:!0}})]],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),CustomModuleSummary=__webpack_require__(848277),NewShift=__webpack_require__(571165),api=__webpack_require__(32284),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ShiftSummaryvue_type_script_lang_js={name:"ShiftSummary",extends:CustomModuleSummary["default"],components:{NewShift:NewShift/* default */.Z},props:["viewname"],data:function(){return{showNewShift:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({currentTab:function(state){return state.webtabs.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{showDropdown:function(){return this.hasUpdatePermission||this.hasDeletePermission},hasUpdatePermission:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("UPDATE",currentTab)},hasDeletePermission:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("DELETE",currentTab)},title:function(){return"Shift"},moduleName:function(){return"shift"}}),methods:{deleteableShift:function(shift){return!shift.defaultShift&&this.hasDeletePermission},toggleNewShiftWindowAndReload:function(){this.showNewShift=!1,this.$root.$emit("reload-shift-list")},toggleShowNewShift:function(){this.showNewShift=!this.showNewShift},deleteShift:function(shiftID){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$deleteReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(0,validation/* isEmpty */.xb)(shiftID)){_context.next=2;break}return _context.abrupt("return");case 2:return _context.next=4,api/* API */.bl.deleteRecord(_this.moduleName,[shiftID]);case 4:_yield$API$deleteReco=_context.sent,error=_yield$API$deleteReco.error,error?_this.$message.error(error.message||"Error Occured"):_this.$message.success("Shift".concat(" ",_this.$t("custommodules.list.delete_success")));case 7:case"end":return _context.stop()}}),_callee)})))()}}},shift_ShiftSummaryvue_type_script_lang_js=ShiftSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(shift_ShiftSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ShiftSummary=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/2258.js.map