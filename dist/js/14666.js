"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[14666],{
/***/350367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUploadPhotos}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FUploadPhotos.vue?vue&type=template&id=5a0f9682
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"upload-photos-dialog fc-dialog-center-container",attrs:{title:"Upload Photos",visible:_vm.showDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event},"before-close":_vm.closeDialog}},[_vm.showDialog?_c("el-upload",{attrs:{multiple:"","list-type":"picture-card","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-error":_vm.onError,"on-remove":_vm.onRemove}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e(),_c("span",{staticClass:"dialog-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.done}},[_vm._v("Done")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),eventBus=__webpack_require__(398011),FUploadPhotosvue_type_script_lang_js={props:["module","record","list"],data:function(){return{photos:[],showDialog:!1,isChanged:!1}},methods:{open:function(){this.photos=(0,validation/* isEmpty */.xb)(this.list)?[]:this.list,this.showDialog=!0},onUpload:function(_ref){var file=_ref.file,data=(_ref.onError,{parentId:this.record.id,module:this.module}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.list.push(result.photos[0]),this.isChanged=!0)},onError:function(){this.$message.error(this.$t("setup.users_management.Invalid_image"))},onRemove:function(file){var _this=this;this.$http.post("/v2/photos/delete",{id:file.id,photoId:file.photoId,module:this.module,parentId:this.record.id}).then((function(response){if(0===response.data.responseCode){var list=(0,toConsumableArray/* default */.Z)(_this.list),index=list.findIndex((function(f){return f.id===file.id}));list.splice(index,1),_this.$emit("updatePhotos",list),_this.isChanged=!0}})).catch((function(){}))},done:function(){this.showDialog=!1,this.photos=[],this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1)},closeDialog:function(){this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1),this.showDialog=!1}}},components_FUploadPhotosvue_type_script_lang_js=FUploadPhotosvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUploadPhotosvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUploadPhotos=component.exports},
/***/664281:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Storeroom}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Storeroom.vue?vue&type=template&id=1587f6ed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.storeRoom?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[!_vm.showSlide||"undefined"!==typeof _vm.disableSlide&&!1!==_vm.disableSlide?_vm.isSummary?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{attrs:{trigger:"click",height:"180px",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.photos,(function(photo,index){return photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()})),1)],1),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.storeRoom.name))])])]):_vm._e(),!_vm.showUpload||"undefined"!==typeof _vm.disableUpload&&!1!==_vm.disableUpload?_vm._e():_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{list:_vm.photos,module:"storeroomphotos",record:_vm.storeRoom}})],1)])]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(350367)),Storeroomvue_type_script_lang_js={props:["size","storeRoom","name","hovercard","disableUpload","disableSlide","isSummary"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.storeRoom.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge","mxhuge"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl()},computed:{showSlide:function(){if(this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},watch:{storeRoom:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){var self=this;this.storeRoom.id>0&&(self.photosLoading=!0,self.$http.get("/photos/get?module=storeroomphotos&parentId="+this.storeRoom.id).then((function(response){if(self.photos=response.data.photos?response.data.photos:[],self.photosLoading=!1,self.photos.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.photos);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var photo=_step2.value;if(photo.url){self.avatarUrl=photo.url;break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}))),this.storeRoom.avatarUrl?this.avatarUrl=this.storeRoom.avatarUrl:(this.avatarUrl=this.getDefaultAvatar(),this.storeRoom.avatarUrl=this.avatarUrl)},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.storeRoom)return __webpack_require__(494194)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Storeroomvue_type_script_lang_js=Storeroomvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Storeroomvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Storeroom=component.exports},
/***/114666:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return StoreroomTable}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/Inventory/ItemTypes/components/StoreroomTable.vue?vue&type=template&id=18a17878
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"p30"},[_c("div",{staticClass:"fc-black-13 fwBold text-uppercase text-left mL0 mB10"},[_vm._v(" "+_vm._s(_vm.$t("common.header._storerooms"))+" ")]),"itemStoreroom"===_vm.storeroom?_c("item-store-room",{key:_vm.details.id,attrs:{itemTypeId:_vm.details.id,itemType:_vm.details}}):_vm._e(),"toolStoreroom"===_vm.storeroom?_c("tool-store-room",{key:_vm.details.id,attrs:{toolTypeId:_vm.details.id,toolType:_vm.details}}):_vm._e()],1)},staticRenderFns=[],ItemStoreRoomvue_type_template_id_1644f203_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"item-summary-table"},[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],staticClass:"width100 inventory-inner-table",attrs:{data:_vm.items,"empty-text":_vm.$t("common.products.this_item_is_not_available_in_storeroom"),"default-sort":{prop:"storeRoom.name",order:"descending"},sortable:!1,height:"250px"},on:{"cell-click":_vm.openStoreRoomOverview}},[_c("el-table-column",{attrs:{prop:"storeRoom.name",sortable:"",label:_vm.$t("common.products.storeroom_name"),"min-width":"160"},scopedSlots:_vm._u([{key:"default",fn:function(storeRoomAvatar){return[_c("store-room-avatar",{attrs:{name:"true",size:"lg",storeRoom:storeRoomAvatar.row.storeRoom}})]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("common.wo_report._description"),"min-width":"160"},scopedSlots:_vm._u([{key:"default",fn:function(desc){return[_c("div",{staticClass:"textoverflow-ellipsis width240px"},[_vm._v(" "+_vm._s(_vm.getDescription(desc))+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"quantity",sortable:"",label:_vm.$t("common.header.current_balance"),formatter:_vm.tableQuantityFormatter,"min-width":"100","class-name":"right-align-items"}}),_vm.itemType.isRotating?_vm._e():_c("el-table-column",{attrs:{prop:"costTypeEnum",label:_vm.$t("common._common.cost_type"),"min-width":"200","class-name":"cost-type"}})],1),_c("el-dialog",{attrs:{visible:_vm.purchasedItemDialogMeta.visibility,title:_vm.$t("common.products.purchased_items"),fullscreen:!1,open:"top","custom-class":"assetaddvaluedialog fc-dialog-center-container inventory-store-dialog fc-web-form-dialog","append-to-body":!0},on:{"update:visible":function($event){return _vm.$set(_vm.purchasedItemDialogMeta,"visibility",$event)}}},[_c("div",[_vm.itemType.isRotaing?_c("div",[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.purLoading,expression:"purLoading"}],staticClass:"inventory-inner-table widht100",staticStyle:{width:"100%"},attrs:{data:_vm.purchasedItemList,"empty-text":_vm.$t("common.products.no_purchased_items_available"),"default-sort":{prop:"costDate",order:"descending"}}},[_c("el-table-column",{attrs:{prop:"serialNumber",sortable:"",label:_vm.$t("common._common._serial_number")}}),_c("el-table-column",{attrs:{sortable:"",prop:"unitcost",label:_vm.$t("common.header._price"),width:"110"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("currency",{attrs:{value:scope.row.unitcost>0?scope.row.unitcost:0}})]}}],null,!1,2955209566)}),_c("el-table-column",{attrs:{prop:"used",formatter:_vm.isUsedHandle,label:_vm.$t("common._common.is_used"),width:"100"}}),_c("el-table-column",{attrs:{sortable:"",prop:"costDate",formatter:_vm.getDateTime,label:_vm.$t("common.header.purchased_date_")}}),_c("el-table-column",{attrs:{width:"60"},scopedSlots:_vm._u([{key:"default",fn:function(purItemIndTrack){return[purItemIndTrack.row.isUsed?_vm._e():_c("div",{staticClass:"actions visibility-hide-actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center"}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color",attrs:{title:_vm.$t("common.header.edit_purchased_item"),"data-arrow":"true"},on:{click:function($event){return _vm.editPurchasedItem(purItemIndTrack.row)}}})])]}}],null,!1,1605179789)})],1)],1):_vm._e(),_vm.itemType.isRotaing?_vm._e():_c("div",[_c("el-table",{staticClass:"width100",attrs:{data:_vm.purchasedItemList,"empty-text":_vm.$t("common.products.no_purchased_items_available"),"default-sort":{prop:"costDate",order:"descending"}}},[_c("el-table-column",{attrs:{prop:"quantity",sortable:"",label:_vm.$t("common.header.purchased_quantity"),width:"200"}}),_c("el-table-column",{attrs:{prop:"currentQuantity",sortable:"",label:_vm.$t("common.header.current_balance")}}),_c("el-table-column",{attrs:{prop:"unitcost",sortable:"",label:_vm.$t("common.header._unit_price")},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("currency",{attrs:{value:scope.row.unitcost>0?scope.row.unitcost:0}})]}}],null,!1,2955209566)}),_c("el-table-column",{attrs:{prop:"costDate",sortable:"",formatter:_vm.getDateTime,label:_vm.$t("common.header.purchased_date_")}})],1)],1)]),_c("div",{staticClass:"modal-dialog-footer-parts-dialog"})]),_vm.editPurchasedItemDialog?_c("div",{key:_vm.editPurchaseItemObj.id},[_c("el-dialog",{attrs:{visible:_vm.editPurchasedItemDialog,"before-close":_vm.closeEditPurchaseItemDialog,title:_vm.$t("common.header.edit_purchased_item"),fullscreen:!1,width:"25%","custom-class":"assetaddvaluedialog fc-dialog-center-container inventory-store-dialog fc-web-form-dialog purchase-item-edit-dialog","append-to-body":!0},on:{"update:visible":function($event){_vm.editPurchasedItemDialog=$event}}},[_c("div",{},[_c("el-form",[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.serial_number"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("common._common.serial_number")},model:{value:_vm.editPurchaseItemObj.serialNumber,callback:function($$v){_vm.$set(_vm.editPurchaseItemObj,"serialNumber",$$v)},expression:"editPurchaseItemObj.serialNumber"}})],1),_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unit_price"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("common.header.price"),type:"number"},model:{value:_vm.editPurchaseItemObj.unitcost,callback:function($$v){_vm.$set(_vm.editPurchaseItemObj,"unitcost",$$v)},expression:"editPurchaseItemObj.unitcost"}})],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-save width100",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.savePurchasedItem()}}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common.submitting"):_vm.$t("common._common._save")))])],1)])],1):_vm._e()],1)},ItemStoreRoomvue_type_template_id_1644f203_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),Storeroom=(__webpack_require__(879288),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(664281)),InventoryUtil=__webpack_require__(976195),validation=__webpack_require__(990260),router=__webpack_require__(329435),ItemStoreRoomvue_type_script_lang_js={components:{StoreRoomAvatar:Storeroom/* default */.Z},props:{itemTypeId:{type:Number},refreshList:{type:Boolean},itemType:{}},data:function(){return{loading:!0,fetchingMore:!1,purchasedItemDialogMeta:{visibility:!1},purchasedItemList:null,purLoading:!0,editPurchasedItemDialog:!1,editPurchaseItemObj:null,saving:!1,items:[]}},mounted:function(){this.loadItemStoreRoom()},watch:{refreshList:function(){this.loadItemStoreRoom(),this.$emit("update:refreshList",!1)}},methods:{getDescription:function(desc){return this.$getProperty(desc,"row.storeRoom.description","---")},loadItemStoreRoom:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(filters={itemType:{operatorId:36,value:[_this.itemTypeId+""]}},_this.loading=!0,!_this.itemType.id){_context.next=8;break}return _context.next=5,(0,InventoryUtil/* getFilteredItemList */.Oh)(filters);case 5:_this.items=_context.sent,_this.loading=!1,_this.fetchingMore=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},openPurchasedItemsDialog:function(item){this.purchasedItemDialogMeta={visibility:!0},this.loadPurchasedItemList(item)},cancelPurchaseItemsDialog:function(){this.purchasedItemDialogMeta.visibility=!1},loadPurchasedItemList:function(item){var self=this;self.purLoading=!0,self.$http.get("v2/purchasedItemsList/item/"+item.id).then((function(response){self.loading=!1,0===response.data.responseCode&&(self.purchasedItemList=response.data.result.purchasedItem,self.purLoading=!1)}))},getDateTime:function(val){var value=val.costDate;return value&&-1!==value?this.$options.filters.formatDate(value,!0):""},openStoreRoomOverview:function(row,col){if("STOREROOM NAME"===col.label)if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("item",router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:"all",id:row.id}})}else this.$router.push({path:"/app/inventory/item/all/"+row.id+"/summary"})},isUsedHandle:function(val){return val.used?"Yes":"No"},editPurchasedItem:function(purItem){this.editPurchasedItemDialog=!0,this.editPurchaseItemObj={id:purItem.id,serialNumber:purItem.serialNumber,unitcost:purItem.unitcost,item:{id:purItem.item.id}}},closeEditPurchaseItemDialog:function(){this.editPurchasedItemDialog=!1},savePurchasedItem:function(){var _this2=this,self=this,param={itemId:this.editPurchaseItemObj.item.id,purchasedItems:[{id:this.editPurchaseItemObj.id,serialNumber:this.editPurchaseItemObj.serialNumber,unitcost:this.editPurchaseItemObj.unitcost}]};self.$http.post("v2/purchasedItem/update",param).then((function(response){0===response.data.responseCode?(self.$message.success(_this2.$t("common.header.purchased_item_edit_successfully")),self.editPurchasedItemDialog=!1,self.loadPurchasedItemList(self.editPurchaseItemObj.item)):self.$message.error(response.data.message)})).catch((function(){self.$message.error(_this2.$t("common.wo_report.unable_to_edit"))}))},tableQuantityFormatter:function(val,prop){return(0,validation/* isEmpty */.xb)(val[prop.property])?0:val[prop.property]}}},Inventory_ItemStoreRoomvue_type_script_lang_js=ItemStoreRoomvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Inventory_ItemStoreRoomvue_type_script_lang_js,ItemStoreRoomvue_type_template_id_1644f203_render,ItemStoreRoomvue_type_template_id_1644f203_staticRenderFns,!1,null,null,null)
/* harmony default export */,ItemStoreRoom=component.exports,ToolStoreRoomvue_type_template_id_1dc028a8_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"item-summary-table"},[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],staticClass:"width100 inventory-inner-table",attrs:{data:_vm.tools,"empty-text":"This tool is not available in any storeroom.","default-sort":{prop:"storeRoom.name",order:"descending"},height:"250px"},on:{"cell-click":_vm.openStoreRoomOverview}},[_c("el-table-column",{attrs:{prop:"storeRoom.name",sortable:"",label:_vm.$t("common.products.storeroom_name"),width:"300"},scopedSlots:_vm._u([{key:"default",fn:function(storeRoomAvatar){return[_c("store-room-avatar",{attrs:{name:"true",size:"lg",storeRoom:storeRoomAvatar.row.storeRoom}})]}}])}),_c("el-table-column",{attrs:{label:"DESCRIPTION",width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(desc){return[_c("div",{staticClass:"textoverflow-ellipsis width240px"},[_vm._v(" "+_vm._s(_vm.getDescription(desc))+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"currentQuantity",sortable:"",label:"CURRENT BALANCE",formatter:_vm.tableQuantityFormatter,width:"250","class-name":"right-align-items"}}),_vm.toolType.isRotating?_vm._e():_c("el-table-column",{attrs:{prop:"rate",sortable:"",label:"RATE/HR",width:"200","class-name":"right-align-items"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm.checkForMultiCurrency("rate",_vm.metaFieldTypeMap)?_c("CurrencyPopOver",{staticClass:"d-flex flex-row-reverse",attrs:{field:{name:"rate",displayValue:scope.row.rate>0?scope.row.rate:0},details:scope.row}}):_c("currency",{attrs:{value:scope.row.rate>0?scope.row.rate:0}})]}}],null,!1,3539137650)})],1)],1),_c("el-dialog",{attrs:{visible:_vm.purchasedToolDialog,fullscreen:!1,title:"Purchased Tools",open:"top","custom-class":"assetaddvaluedialog fc-dialog-center-container inventory-store-dialog fc-web-form-dialog","append-to-body":!0},on:{"update:visible":function($event){_vm.purchasedToolDialog=$event}}},[_c("div",[_vm.toolType.isRotating?_c("div",[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.purLoading,expression:"purLoading"}],staticClass:"width100 inventory-inner-table",attrs:{data:_vm.purchasedToolList,"empty-text":"No purchased tools available.","default-sort":{prop:"costDate",order:"descending"}}},[_c("el-table-column",{attrs:{prop:"serialNumber",sortable:"",label:"SERIAL NUMBER",width:"170"}}),_c("el-table-column",{attrs:{prop:"rate",sortable:"",label:"RATE/HR",width:"120"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm.checkForMultiCurrency("rate",_vm.metaFieldTypeMap)?_c("CurrencyPopOver",{staticClass:"d-flex flex-row-reverse",attrs:{field:{name:"rate",displayValue:scope.row.rate>0?scope.row.rate:0},details:scope.row}}):_c("currency",{attrs:{value:scope.row.rate>0?scope.row.rate:0}})]}}],null,!1,2196859250)}),_c("el-table-column",{attrs:{prop:"isUsed",formatter:_vm.isUsedHandle,label:"IS USED"}}),_c("el-table-column",{attrs:{prop:"costDate",sortable:"",formatter:_vm.getDateTime,label:"PURCHASED DATE",width:"180"}}),_c("el-table-column",{attrs:{width:"60"},scopedSlots:_vm._u([{key:"default",fn:function(purToolIndTrack){return[purToolIndTrack.row.isUsed?_vm._e():_c("div",{staticClass:"actions visibility-hide-actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center"}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color",attrs:{title:"Edit Purchased Tool","data-arrow":"true"},on:{click:function($event){return _vm.editPurchasedTool(purToolIndTrack.row)}}})])]}}],null,!1,804689667)})],1)],1):_vm._e()])]),_vm.editPurchasedToolDialog?_c("div",{key:_vm.editPurchaseToolObj.id},[_c("el-dialog",{attrs:{visible:_vm.editPurchasedToolDialog,"before-close":_vm.closeEditPurchaseToolDialog,title:"Edit Purchased Tools",fullscreen:!1,width:"25%","custom-class":"assetaddvaluedialog fc-dialog-center-container inventory-store-dialog fc-web-form-dialog purchase-item-edit-dialog","append-to-body":!0},on:{"update:visible":function($event){_vm.editPurchasedToolDialog=$event}}},[_c("div",[_c("el-form",[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" Serial Number ")]),_c("el-form-item",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Serial Number"},model:{value:_vm.editPurchaseToolObj.serialNumber,callback:function($$v){_vm.$set(_vm.editPurchaseToolObj,"serialNumber",$$v)},expression:"editPurchaseToolObj.serialNumber"}})],1),_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" Rate/Hour ")]),_c("el-form-item",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Price",type:"number"},model:{value:_vm.editPurchaseToolObj.rate,callback:function($$v){_vm.$set(_vm.editPurchaseToolObj,"rate",$$v)},expression:"editPurchaseToolObj.rate"}})],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-save width100",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.savePurchasedTool()}}},[_vm._v(_vm._s(_vm.saving?"Submitting...":"SAVE"))])],1)])],1):_vm._e()],1)},ToolStoreRoomvue_type_template_id_1dc028a8_staticRenderFns=[],CurrencyPopOver=__webpack_require__(706881),CurrencyUtil=__webpack_require__(15426),ToolStoreRoomvue_type_script_lang_js={components:{StoreRoomAvatar:Storeroom/* default */.Z,CurrencyPopOver:CurrencyPopOver/* default */.Z},props:{toolTypeId:{type:Number},refreshList:{type:Boolean},toolType:{}},data:function(){return{loading:!0,fetchingMore:!1,purchasedToolDialog:!1,purchasedToolList:null,purLoading:!0,editPurchasedToolDialog:!1,editPurchaseToolObj:null,saving:!1,tools:[],metaFieldTypeMap:{},checkForMultiCurrency:CurrencyUtil/* checkForMultiCurrency */.eu}},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loadToolStoreRoom(),_context.next=3,(0,CurrencyUtil/* getMetaFieldMapForModules */.en)("tool");case 3:_this.metaFieldTypeMap=_context.sent;case 4:case"end":return _context.stop()}}),_callee)})))()},watch:{refreshList:function(){this.loadToolStoreRoom(),this.$emit("update:refreshList",!1)}},methods:{getDescription:function(desc){return this.$getProperty(desc,"row.storeRoom.description","---")},loadToolStoreRoom:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var filters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(filters={toolType:{operatorId:36,value:[_this2.toolTypeId+""]}},_this2.toolTypeId){_context2.next=3;break}return _context2.abrupt("return");case 3:return _this2.loading=!0,_context2.next=6,(0,InventoryUtil/* getFilteredToolList */.FI)(filters);case 6:_this2.tools=_context2.sent,_this2.loading=!1,_this2.fetchingMore=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},openPurchasedToolsDialog:function(tool){this.purchasedToolDialog=!0,this.loadPurchasedToolList(tool)},cancelPurchaseToolsDialog:function(){this.purchasedToolDialog=!1},loadPurchasedToolList:function(tool){var self=this;self.purLoading=!0,self.$http.get("v2/purchasedToolsList/tool/"+tool.id).then((function(response){self.purLoading=!1,0===response.data.responseCode&&(self.purchasedToolList=response.data.result.purchasedTool,self.purLoading=!1)})).catch((function(){}))},getDateTime:function(val){var value=val.costDate;return value&&-1!==value?this.$options.filters.formatDate(value,!0):""},openStoreRoomOverview:function(row,col){if("STOREROOM NAME"===col.label)if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("tool",router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:"all",id:row.id}})}else this.$router.push({path:"/app/inventory/tool/all/"+row.id+"/summary"})},isUsedHandle:function(val){return val.isUsed?"Yes":"No"},editPurchasedTool:function(purTool){this.editPurchasedToolDialog=!0,this.editPurchaseToolObj={id:purTool.id,serialNumber:purTool.serialNumber,rate:purTool.rate,tool:{id:purTool.tool.id}}},closeEditPurchaseToolDialog:function(){this.editPurchasedToolDialog=!1},savePurchasedTool:function(){var self=this,param={toolId:this.editPurchaseToolObj.tool.id,purchasedTools:[{id:this.editPurchaseToolObj.id,serialNumber:this.editPurchaseToolObj.serialNumber,rate:this.editPurchaseToolObj.rate}]};self.$http.post("v2/purchasedTool/update",param).then((function(response){0===response.data.responseCode?(self.$message.success("Purchased Tool Edit Successfully"),self.editPurchasedToolDialog=!1,self.loadPurchasedToolList(self.editPurchaseToolObj.tool)):self.$message.error(response.data.message)})).catch((function(){self.$message.error("Unable to Edit")}))},tableQuantityFormatter:function(val,prop){return(0,validation/* isEmpty */.xb)(val[prop.property])?0:val[prop.property]}}},Tooltypes_ToolStoreRoomvue_type_script_lang_js=ToolStoreRoomvue_type_script_lang_js,ToolStoreRoom_component=(0,componentNormalizer/* default */.Z)(Tooltypes_ToolStoreRoomvue_type_script_lang_js,ToolStoreRoomvue_type_template_id_1dc028a8_render,ToolStoreRoomvue_type_template_id_1dc028a8_staticRenderFns,!1,null,null,null)
/* harmony default export */,ToolStoreRoom=ToolStoreRoom_component.exports,StoreroomTablevue_type_script_lang_js={props:["details","widget"],components:{ItemStoreRoom:ItemStoreRoom,ToolStoreRoom:ToolStoreRoom},computed:{storeroom:function(){return this.$getProperty(this,"widget.widgetParams.storeroom")}}},components_StoreroomTablevue_type_script_lang_js=StoreroomTablevue_type_script_lang_js,StoreroomTable_component=(0,componentNormalizer/* default */.Z)(components_StoreroomTablevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,StoreroomTable=StoreroomTable_component.exports},
/***/706881:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CurrencyPopOver}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/organizationSetting/currency/CurrencyPopOver.vue?vue&type=template&id=434b446a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showCurrencyField?_c("div",{staticClass:"d-flex"},[_vm.showInfo?_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))]):_vm._e(),_vm.showMultiCurrencyInfo?_c("el-popover",{attrs:{placement:"right",title:_vm.$t("setup.currency.rate"),width:"230",trigger:"hover",content:_vm.currencyContent,"open-delay":5,disabled:_vm.isEmpty(_vm.baseValue)}},[_vm.showInfo?_vm._e():_c("div",{class:[_vm.baseValue&&"pointer"],attrs:{slot:"reference"},slot:"reference"},[_c("div",[_vm._v(_vm._s(""+_vm.getMultiCurrencyFieldValue))]),_c("div",{staticClass:"f12"},[_vm._v(_vm._s(_vm.baseValue))])]),_vm.isBaseCode||!_vm.showInfo||_vm.hideInfoBtn?_vm._e():_c("fc-icon",{staticClass:"pointer info-position mL2",attrs:{slot:"reference",group:"dsm",name:"info",size:"13"},slot:"reference"})],1):_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))])],1):_c("span",[_vm._v("---")])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(990260)),CurrencyUtil=__webpack_require__(15426),vuex_esm=__webpack_require__(420629),CurrencyPopOvervue_type_script_lang_js={props:["field","details","showInfo","hideInfoBtn"],data:function(){return{baseValue:"",isEmpty:validation/* isEmpty */.xb}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencyList:function(state){return state.activeCurrencies}})),{},{showMultiCurrencyInfo:function(){var _ref=this.multiCurrency||{},multiCurrencyEnabled=_ref.multiCurrencyEnabled;return multiCurrencyEnabled},isBaseCode:function(){var _ref2=this.multiCurrency||{},baseCode=_ref2.currencyCode,_ref3=this.details||{},currencyCode=_ref3.currencyCode;return baseCode===currencyCode},showCurrencyField:function(){var currencyValue=this.currencyValue;return!(0,validation/* isEmpty */.xb)(currencyValue)&&"---"!=currencyValue},multiCurrency:function(){var _ref4=this.$getProperty(this.account,"data.currencyInfo")||{},displaySymbol=_ref4.displaySymbol,currencyCode=_ref4.currencyCode,multiCurrencyEnabled=_ref4.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}},currencyContent:function(){var details=this.details,currencyValue=this.currencyValue,baseSymbol=this.multiCurrency.displaySymbol;if(!(0,validation/* isEmpty */.xb)(currencyValue)){var _ref5=details||{},exchangeRate=_ref5.exchangeRate,currencyCode=_ref5.currencyCode,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)||currency.displaySymbol===baseSymbol)return null;var _ref6=currency||{},displaySymbol=_ref6.displaySymbol,content="".concat(baseSymbol," 1 = ").concat(displaySymbol," ").concat(exchangeRate);return content}return"---"},currencyValue:function(){var details=this.details,field=this.field,_ref7=details||{},data=_ref7.data;return field.displayValue||details[field.name]||(null===data||void 0===data?void 0:data[field.name])},getMultiCurrencyFieldValue:function(){var currencyValue=this.currencyValue,showInfo=this.showInfo,_this$multiCurrency=this.multiCurrency,baseSymbol=_this$multiCurrency.displaySymbol,baseCode=_this$multiCurrency.currencyCode,multiCurrencyEnabled=_this$multiCurrency.multiCurrencyEnabled,_ref8=this.details||{},currencyCode=_ref8.currencyCode,exchangeRate=_ref8.exchangeRate,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode})),baseCurrency=(this.currencyList||[]).find((function(currency){return baseCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)&&!(0,validation/* isEmpty */.xb)(currencyValue))return"".concat(baseSymbol," ").concat(currencyValue);var _ref9=currency||{},displaySymbol=_ref9.displaySymbol;displaySymbol=(0,validation/* isEmpty */.xb)(displaySymbol)?baseSymbol:displaySymbol;var baseValue="";if(multiCurrencyEnabled&&baseCode!==currencyCode){var value=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue/exchangeRate,baseCurrency);baseValue="( ".concat(baseSymbol," ").concat(value," )")}return currencyValue=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue,currency),this.setBaseValue(baseValue),showInfo?"".concat(displaySymbol," ").concat(currencyValue," ").concat(baseValue):"".concat(displaySymbol," ").concat(currencyValue)}}),created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$store.dispatch("getActiveCurrencyList");case 2:case"end":return _context.stop()}}),_callee)})))()},methods:{setBaseValue:function(value){this.baseValue=value}}},currency_CurrencyPopOvervue_type_script_lang_js=CurrencyPopOvervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(currency_CurrencyPopOvervue_type_script_lang_js,render,staticRenderFns,!1,null,"434b446a",null)
/* harmony default export */,CurrencyPopOver=component.exports},
/***/494194:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/store-img.8acd997f.jpg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/14666.js.map