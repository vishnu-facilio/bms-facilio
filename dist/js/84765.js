"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[84765],{
/***/615632:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AdvancedSearchUI}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/search/AdvancedSearchUI.vue?vue&type=template&id=55bf6bc8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"advance-search-ui"},[_c("fc-icon",{staticClass:"d-flex cursor-pointer",attrs:{group:"default",name:"filter-outline",size:"14"},on:{click:function($event){_vm.showAdvWizard=!0}}}),_vm.isEmpty(_vm.filterList)?_vm._e():_c("div",{staticClass:"dot-active-pink"}),_c("el-dialog",{staticClass:"advance-search-ui-dialog",attrs:{visible:_vm.showAdvWizard,"append-to-body":!0,"show-close":!0,title:"Filter "+_vm.moduleDisplayName+" by","custom-class":"advance-search-dialog"},on:{"update:visible":function($event){_vm.showAdvWizard=$event}}},[_vm.showAdvWizard?[_c("AdvancedSearch",{key:"filter-"+_vm.moduleName,ref:"advancedSearch",attrs:{moduleName:_vm.moduleName,hideQuery:_vm.hideQuery,filterList:_vm.filterList,showAdvWizard:_vm.showAdvWizard},on:{applyFilters:_vm.applyFilters,closeDialog:function($event){_vm.showAdvWizard=!1}}})]:_vm._e()],2)],1)},staticRenderFns=[],dist=__webpack_require__(191853),validation=__webpack_require__(990260),AdvancedSearchUIvue_type_script_lang_js={props:["filterList","moduleName","moduleDisplayName","hideQuery"],components:{AdvancedSearch:dist/* AdvancedSearch */.ZJ},data:function(){return{showAdvWizard:!1,isEmpty:validation/* isEmpty */.xb}},methods:{applyFilters:function(filters){this.showAdvWizard=!1,this.$emit("applyFilters",filters)}}},search_AdvancedSearchUIvue_type_script_lang_js=AdvancedSearchUIvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(search_AdvancedSearchUIvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AdvancedSearchUI=component.exports},
/***/109465:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PmTimelineView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/pm/summary/timeline-view/PmTimelineView.vue?vue&type=template&id=9b89c0c6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pm-tl-view"},[_c("PMTimeLineLayout",{scopedSlots:_vm._u([{key:"planner-selector",fn:function(){return[_c("el-select",{staticClass:"fc-input-full-border-select2 width200 mT10 mR15 pm-planner-selector",attrs:{filterable:"","default-first-option":"",size:"mini"},on:{change:function($event){return _vm.fetchPlannerContext()}},model:{value:_vm.activePlanner,callback:function($$v){_vm.activePlanner=$$v},expression:"activePlanner"}},_vm._l(_vm.plannerList,(function(planner,index){return _c("el-option",{key:index,attrs:{label:planner.name,value:planner.id}})})),1)]},proxy:!0},{key:"pm-assignment",fn:function(){return[_vm.$validation.isEmpty(_vm.viewOptions)?_vm._e():_c("div",{staticClass:"p10 pm-timeline-radio-group"},[_c("el-radio-group",{attrs:{size:"small"},on:{change:function($event){return _vm.loadCurrentView()}},model:{value:_vm.groupBy,callback:function($$v){_vm.groupBy=$$v},expression:"groupBy"}},_vm._l(_vm.viewOptions,(function(view,index){return _c("el-radio-button",{key:"view - "+index,attrs:{label:view.value,border:""}},[_vm._v(_vm._s(view.label))])})),1)],1)]},proxy:!0},{key:"calendar-actions",fn:function(){return[_c("portal-target",{attrs:{name:"scheduler-today"}}),_vm.showPicker?_c("DatePicker",{staticClass:"facilio-resource-date-picker scheduler",attrs:{dateObj:_vm.datePickerObj,zone:_vm.$timezone,tabs:_vm.datePickerTabs},on:{date:function(dateObj){return _vm.timeStamp=dateObj}}}):_vm._e(),_c("portal-target",{attrs:{name:"calendar-view"}})]},proxy:!0},{key:"search-customization",fn:function(){return[_c("portal-target",{attrs:{name:"event-save"}}),_c("AdvancedSearch",{key:_vm.moduleName+"-search",attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideQuery:!0,filterList:_vm.appliedFilter},on:{applyFilters:_vm.setAppliedfilter}})]},proxy:!0},{key:"schedular",fn:function(){return[_vm.loading?_c("div",{staticClass:"height-100 d-flex"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("SchedulerComponent",{attrs:{moduleName:_vm.moduleName,viewname:_vm.groupBy,viewDetails:_vm.currentViewDetail,timezone:_vm.$timezone,dateformat:_vm.$dateformat,timeformat:_vm.$timeformat,timeStamp:_vm.timeStamp,metaInfo:_vm.metaInfo,isStatusLocked:_vm.isStatusLocked,getApprovalStatus:_vm.getApprovalStatus,getTicketStatus:_vm.getTicketStatus,getSiteName:_vm.getSiteName,createPermission:_vm.$hasPermission(_vm.moduleName+":CREATE"),updatePermission:_vm.$hasPermission(_vm.moduleName+":UPDATE"),dialogPrompt:_vm.$dialog,filterObj:_vm.appliedFilter},on:{viewChanged:_vm.setPickerObj,openSummary:_vm.openSummary},scopedSlots:_vm._u([{key:"spinner",fn:function(){return[_c("spinner",{attrs:{show:!0,size:"80"}})]},proxy:!0},{key:"ftags",fn:function(){return[_c("FTags",{key:"ftags-list-"+_vm.moduleName,attrs:{moduleName:_vm.moduleName,filters:_vm.appliedFilter,hideQuery:!0,hideSaveAs:!0},on:{updateFilters:_vm.setAppliedfilter,clearFilters:function($event){return _vm.setAppliedfilter({})}}})]},proxy:!0}])})]},proxy:!0}])})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),PmTimeLineLayoutvue_type_template_id_1c6fc7e8_scoped_true_render=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(843843),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex height100 flex-direction-column"},[_c("div",{staticClass:"d-flex pm-timeline-header-container"},[_c("div",{staticClass:"pm-planner-section d-flex"},[_vm._t("planner-selector"),_vm._t("pm-assignment")],2),_c("div",{staticClass:"schedular-calendar-actions"},[_vm._t("calendar-actions")],2),_c("div",{staticClass:"search-actions"},[_vm._t("search-customization")],2)]),_c("div",{staticClass:"scheduler-content"},[_vm._t("schedular")],2)])}),PmTimeLineLayoutvue_type_template_id_1c6fc7e8_scoped_true_staticRenderFns=[],PmTimeLineLayoutvue_type_script_lang_js={name:"pmTimeLineLayout"},timeline_view_PmTimeLineLayoutvue_type_script_lang_js=PmTimeLineLayoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(timeline_view_PmTimeLineLayoutvue_type_script_lang_js,PmTimeLineLayoutvue_type_template_id_1c6fc7e8_scoped_true_render,PmTimeLineLayoutvue_type_template_id_1c6fc7e8_scoped_true_staticRenderFns,!1,null,"1c6fc7e8",null)
/* harmony default export */,PmTimeLineLayout=component.exports,AdvancedSearchUI=__webpack_require__(615632),api=__webpack_require__(32284),validation=__webpack_require__(990260),dist=__webpack_require__(455766),NewDatePicker=__webpack_require__(900773),NewDateHelper=__webpack_require__(105534),criteria_dist=__webpack_require__(191853),vuex_esm=__webpack_require__(420629),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),router=__webpack_require__(329435),relatedFieldUtil=__webpack_require__(850558),datePickerTabs={enableByOperationOnId:!0,disableDefaultLabels:!0,enabledTabs:["D","W","M","Y"],loadAdditional:{year:{period:"start",label:"year",operation:"add",value:4}}},viewVsOperatorId={DAY:62,WEEK:63,MONTH:64,YEAR:65},PmTimelineViewvue_type_script_lang_js={name:"PmTimeLineView",components:{PMTimeLineLayout:PmTimeLineLayout,AdvancedSearch:AdvancedSearchUI/* default */.Z,SchedulerComponent:dist/* SchedulerComponent */.j,FTags:criteria_dist/* FTags */.KW,DatePicker:NewDatePicker/* default */.Z},data:function(){return{plannerList:[],activePlanner:null,activePlannerContext:null,groupBy:null,viewOptions:[],loading:!1,showPicker:!1,timeStamp:null,datePickerObj:null,datePickerTabs:datePickerTabs,currentViewDetail:{},appliedFilter:{}}},created:function(){this.initTimeLine()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),(0,vuex_esm/* mapGetters */.Se)(["isStatusLocked","getApprovalStatus","getTicketStatus","getSite"])),{},{moduleName:function(){return"workorder"},moduleDisplayName:function(){return"WorkOrder"},pmId:function(){var $attrs=this.$attrs,_ref=$attrs||{},details=_ref.details,_ref2=details||{},_ref2$id=_ref2.id,pmId=void 0===_ref2$id?null:_ref2$id;return pmId}}),watch:{groupBy:function(){this.loading=!0},activePlannerContext:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.loadCurrentView()},currentViewDetail:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||(this.loading=!1)}},methods:{initTimeLine:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleName=_this.moduleName,_context.next=3,_this.loadPlanners();case 3:return _context.next=5,_this.loadCurrentView();case 5:_this.$store.dispatch("view/loadModuleMeta",moduleName),_this.$store.dispatch("loadTicketStatus",moduleName),_this.$store.dispatch("loadApprovalStatus"),_this.$store.dispatch("loadSite");case 9:case"end":return _context.stop()}}),_callee)})))()},loadPlanners:function(){var _arguments=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force,id,relatedFieldName,relatedConfig,_yield$API$fetchAllRe,error,list,initialPlanner,_ref3,_ref3$id,initialPlannerId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_this2.loading=!0,id=_this2.pmId,relatedFieldName=(0,relatedFieldUtil/* getRelatedFieldName */.C9)("plannedmaintenance","pmPlanner"),relatedConfig={moduleName:"plannedmaintenance",id:id,relatedModuleName:"pmPlanner",relatedFieldName:relatedFieldName},_context2.next=7,api/* API */.bl.fetchAllRelatedList(relatedConfig,{},{force:force});case 7:if(_yield$API$fetchAllRe=_context2.sent,error=_yield$API$fetchAllRe.error,list=_yield$API$fetchAllRe.list,(0,validation/* isEmpty */.xb)(error)){_context2.next=14;break}_this2.$message.error(error.message||"Error Occured"),_context2.next=21;break;case 14:if(_this2.$set(_this2,"plannerList",list),(0,validation/* isEmpty */.xb)(list)){_context2.next=21;break}return initialPlanner=list[0]||{},_ref3=initialPlanner||{},_ref3$id=_ref3.id,initialPlannerId=void 0===_ref3$id?null:_ref3$id,_this2.$set(_this2,"activePlanner",initialPlannerId),_context2.next=21,_this2.fetchPlannerContext();case 21:_this2.loading=!1;case 22:case"end":return _context2.stop()}}),_callee2)})))()},fetchPlannerContext:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var activePlanner,_yield$getUnRelatedMo,pmPlanner,_ref4,resourceTimelineView,staffTimelineView,_ref5,assetViewDisplayName,assetViewName,_ref6,staffViewDisplayName,staffViewName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.viewOptions=[],activePlanner=_this3.activePlanner,_context3.next=4,(0,relatedFieldUtil/* getUnRelatedModuleSummary */.$B)("plannedmaintenance","pmPlanner",activePlanner);case 4:_yield$getUnRelatedMo=_context3.sent,pmPlanner=_yield$getUnRelatedMo.pmPlanner,_ref4=pmPlanner||{},resourceTimelineView=_ref4.resourceTimelineView,staffTimelineView=_ref4.staffTimelineView,_ref5=resourceTimelineView||{},assetViewDisplayName=_ref5.displayName,assetViewName=_ref5.name,_ref6=staffTimelineView||{},staffViewDisplayName=_ref6.displayName,staffViewName=_ref6.name,(0,validation/* isEmpty */.xb)(assetViewName)||(0,validation/* isEmpty */.xb)(staffViewName)||(_this3.viewOptions.push({label:assetViewDisplayName,value:assetViewName},{label:staffViewDisplayName,value:staffViewName}),_this3.groupBy=assetViewName),_this3.$set(_this3,"activePlannerContext",pmPlanner);case 11:case"end":return _context3.stop()}}),_callee3)})))()},loadCurrentView:function(){this.loading=!0;var groupBy=this.groupBy,activePlannerContext=this.activePlannerContext,_ref7=activePlannerContext||{},_ref7$resourceTimelin=_ref7.resourceTimelineView,resourceTimelineView=void 0===_ref7$resourceTimelin?{}:_ref7$resourceTimelin,_ref7$staffTimelineVi=_ref7.staffTimelineView,staffTimelineView=void 0===_ref7$staffTimelineVi?{}:_ref7$staffTimelineVi;(0,validation/* isEmpty */.xb)(groupBy)?this.currentViewDetail=null:groupBy.includes("resource")?this.currentViewDetail=resourceTimelineView:this.currentViewDetail=staffTimelineView,this.loading=!1},setPickerObj:function(_ref8){var _this4=this,view=_ref8.view,startTime=_ref8.startTime;this.showPicker=!1,this.datePickerObj=NewDateHelper/* default */.Z.getDatePickerObject(viewVsOperatorId[view],"".concat(startTime)),this.$nextTick((function(){_this4.showPicker=!0}))},getSiteName:function(field,record){var site=this.getSite(record[field.name]),value=site&&site.name?site.name:"---";return value},getRouteUrl:function(id){var moduleName=this.moduleName,routerHref=null;if((0,router/* isWebTabsEnabled */.tj)()){var _ref9=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref9.name;if(name){var _this$$router$resolve=this.$router.resolve({name:name,params:{viewname:"all",id:id}}),href=_this$$router$resolve.href;routerHref=href}}else{var _this$$router$resolve2=this.$router.resolve({name:"wosummarynew",params:{id:id}}),_href=_this$$router$resolve2.href;routerHref=_href}return routerHref},openSummary:function(_ref10){var id=_ref10.id;window.open(this.getRouteUrl(id),"_blank")},setAppliedfilter:function(filterObj){this.appliedFilter=filterObj}}},timeline_view_PmTimelineViewvue_type_script_lang_js=PmTimelineViewvue_type_script_lang_js,PmTimelineView_component=(0,componentNormalizer/* default */.Z)(timeline_view_PmTimelineViewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PmTimelineView=PmTimelineView_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/84765.js.map