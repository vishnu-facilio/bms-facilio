"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[645],{
/***/300645:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AgentAlarmList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/agent/Alarm/AgentAlarmList.vue?vue&type=template&id=37cf722c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"page-width-cal"},[-1===_vm.openAlarmId?_c("el-header",{staticClass:"fc-agent-main-header",attrs:{height:"80"}},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"fc-agent-black-26"},[_vm._v(_vm._s(_vm.$t("agent.agent.alarm")))]),_c("div",{staticClass:"flex-middle flex-row"},[_vm.recordCount?_c("div",{staticClass:"agent-alarm-search flex-middle"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.search"),placement:"left"}},[_c("AdvancedSearch",{key:"alarm-search",attrs:{moduleName:"agentAlarm",moduleDisplayName:"Alarm"}})],1),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("pagination",{ref:"f-page",attrs:{total:_vm.recordCount,perPage:_vm.perPage}})],1):_vm._e()])])]):_vm._e(),_c("div",[-1===_vm.openAlarmId?_c("FTags",{key:_vm.moduleName,attrs:{moduleName:_vm.moduleName}}):_vm._e()],1),_c("div",{staticClass:"fc-agent-table"},[_c("div",{staticClass:"height100 alarm-list-page"},[-1==_vm.openAlarmId?_c("div",{staticClass:"white-bg mL20 mR20 mT10"},[_c("el-tabs",{staticClass:"agent-tabs",on:{"tab-click":_vm.tabSwitch},model:{value:_vm.selectedView,callback:function($$v){_vm.selectedView=$$v},expression:"selectedView"}},_vm._l(_vm.tabs,(function(tab){return _c("el-tab-pane",{key:tab.key,attrs:{label:tab.label,name:tab.key}},[_vm.isLoading?_c("div",{staticClass:"spinner alarm-list"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.records)&&!_vm.isLoading?_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column alarm-list"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/alarmEmpty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.no_alarms_found"))+" ")])],1):_vm._e(),_vm.$validation.isEmpty(_vm.records)||_vm.isLoading?_vm._e():_c("div",[_c("CommonList",{class:_vm.filtersApplyed,attrs:{viewDetail:_vm.viewDetail,records:_vm.records,moduleName:_vm.moduleName,columnConfig:_vm.columnConfig,slotList:_vm.slotList,hideListSelect:"true"},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"center f10 secondary-color mW90"},[_c("div",{staticClass:"q-item-label uppercase severityTag",style:{"background-color":_vm.getAlarmColor(record)}},[_vm._v(" "+_vm._s(_vm.getAlarmDisplayName(record))+" ")])])]}},{key:_vm.slotList[1].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"mL15"},[_c("div",{staticClass:"q-item-sublabel ellipsis mW90 mT5 f20"},[_c("div",[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(record.id))]),_c("span",{staticClass:"fc-badge mL8 inline middle nowrap"},[_vm._v(_vm._s(_vm.$constants.AlarmTypes[record.agentAlarmTypeEnum]))])])]),_c("div",[_c("div",{staticClass:"d-flex fw5 label-txt-black  main-field-column",on:{click:function($event){return _vm.opensummary(record.id)}}},[_c("div",{staticClass:"self-center"},[_c("span",[_vm._v(_vm._s(record.subject||"---"))])])])]),_c("div",{staticClass:"ellipsis f12 suva-grey mT5"},[_c("span",[_vm._v(_vm._s(_vm._f("fromNow")(record.lastOccurredTime)))])])])]}},{key:_vm.slotList[2].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"self-center f10 secondary-color mW90 mL15"},[_c("span",{staticClass:"list-main-field f12"},[_vm._v(" "+_vm._s(record.agent.displayName)+" ")])])]}},{key:_vm.slotList[3].criteria,fn:function(ref){var record=ref.record;return[record.lastCreatedTime>-1?_c("div",{staticClass:"self-center f12 letter-spacing0_5 fc-grey5"},[_c("span",{staticClass:"pL20 f12"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(record.lastCreatedTime))+" ")])]):_vm._e()]}},{key:_vm.slotList[4].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"max-width50 mL10"},[_c("div",{staticClass:"flLeft"},[_c("inline-svg",{staticClass:"flLeft w15",attrs:{src:"event"}})],1),_c("span",{staticClass:"q-item-label pL5 f13 letter-spacing0_4"},[_vm._v(" "+_vm._s(_vm.getNoOfOccurrences(record))+" ")])])]}}],null,!0)})],1)])})),1)],1):_c("div",{staticClass:"fc-column-view height100 border-border-none"},[_c("div",{staticClass:"row fc-column-view-title height100"},[_c("div",{staticClass:"col-4 fc-column-view-left height100",staticStyle:{"max-width":"26.3333%",flex:"0 0 26.3333%"}},[_c("div",{staticClass:"fc-agent-txt14 pointer bold p20 f15 capitalize",on:{click:_vm.back}},[_c("i",{staticClass:"el-icon-back bold"}),_vm._v(" "+_vm._s(_vm.currentViewDetail)+" ")]),_c("v-infinite-scroll",{staticClass:"height100vh pB150 overflow-y-scroll",attrs:{offset:20}},[_c("table",{staticClass:"fc-list-view-table overflow-y-scroll height100vh-100px pB60 display-block"},[_vm.records.length?_c("tbody",[_vm._l(_vm.records,(function(alarm,index){return[_c("tr",{key:index,staticClass:"tablerow",class:{active:_vm.openAlarmId===alarm.id},on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("td",{staticClass:"text-left width100 pL5"},[_c("div",{staticClass:"q-item-main q-item-section pL10"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fw5 workRequest-heading f14 textoverflow-height-ellipsis",attrs:{title:alarm.Subject}},[_vm._v(" "+_vm._s(alarm.subject)+" ")]),_c("div",{staticClass:"flex-middle pT5"},[_c("div",{staticClass:"uppercase fc-id"},[_vm._v("#"+_vm._s(alarm.id))]),_c("div",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"fc-grey2-text12"},[_vm._v(" "+_vm._s(alarm.agent?alarm.agent.displayName:"---")+" ")])])])]),alarm.severity?_c("td",{staticClass:"text-left clearboth"},[_c("span",{staticClass:"ellipsis pT5"},[_c("span",{staticClass:"q-item-label"},[_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getAlarmColor(alarm)},attrs:{"aria-hidden":"true"}})]),_c("span",{staticClass:"q-item-label uppercase secondary-color f10 letter-spacing0_7 hex-grey"},[_vm._v(" "+_vm._s(_vm.getAlarmDisplayName(alarm))+" ")])])]):_vm._e()])]}))],2):_vm._e()])])],1),_c("div",{staticClass:"col-8 fc-column-alarm-right new-alarm-summ-bg",staticStyle:{"max-width":"73.6667%",flex:"0 0 73.6667%"}},[_c("div",[_c("router-view")],1)])])])])])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),CommonModuleList=(__webpack_require__(648324),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(347446)),AdvancedSearch=__webpack_require__(784823),FPagination=__webpack_require__(929593),FTags=__webpack_require__(775676),router=__webpack_require__(329435),validation=__webpack_require__(990260),NewAlarmMixin=(__webpack_require__(273861),__webpack_require__(230255)),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),Spinner=__webpack_require__(604947),AgentAlarmListvue_type_script_lang_js={title:function(){return"Agent Alarms"},extends:CommonModuleList["default"],name:"AgentAlarmList",mixins:[NewAlarmMixin/* default */.Z],components:{Pagination:FPagination/* default */.Z,AdvancedSearch:AdvancedSearch/* default */.Z,VInfiniteScroll:v_infinite_scroll_default(),FTags:FTags["default"],Spinner:Spinner/* default */.Z},directives:{infiniteScroll:vue_infinite_scroll_default()},data:function(){return{perPage:50,tabs:[],columnConfig:{fixedSelectableColumns:["severity","subject"]},selectedView:null}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadViews();case 2:case"end":return _context.stop()}}),_callee)})))()},computed:{
// ...mapState({
//   groupViews: state => {
//     return !isEmpty(state.view.groupViews) ? state.view.groupViews : []
//   },
// }),
filtersApplyed:function(){var filters=this.filters;return(0,validation/* isNull */.Ft)(filters)?"alarm-list":"alarm-list-filter-applied"},page:function(){return this.$route.query.page||1},slotList:function(){return[{name:"severity",isHardcodedColumn:!0,columnAttrs:{"min-width":120,fixed:"left"}},{name:"subject",isHardcodedColumn:!0,columnAttrs:{width:400,label:"MESSAGE",fixed:"left"}},{criteria:JSON.stringify({name:"agent"})},{criteria:JSON.stringify({name:"lastOccurredTime"})},{criteria:JSON.stringify({name:"noOfOccurrences"})}]},openAlarmId:function(){return this.$route.params.id?(this.$emit("showTag",!1),parseInt(this.$route.params.id)):(this.$emit("showTag",!0),-1)}},methods:{loadViews:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this2.$store.dispatch("view/loadGroupViews",{moduleName:_this2.moduleName}).then((0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this2.initViews();case 2:_this2.constructTabs();case 3:case"end":return _context2.stop()}}),_callee2)}))));case 2:case"end":return _context3.stop()}}),_callee3)})))()},initViews:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _ref2,views;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(_ref2=_this3.groupViews.find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref2.views,(0,validation/* isEmpty */.xb)(views)){_context4.next=4;break}return _context4.next=4,_this3.goToView(views[0]);case 4:case"end":return _context4.stop()}}),_callee4)})))()},goToView:function(view){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var viewname;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(viewname=_this4.$route.params.viewname,_this4.selectedView=(0,validation/* isNullOrUndefined */.le)(viewname)?view.name:viewname,!(0,validation/* isNullOrUndefined */.le)(viewname)){_context5.next=5;break}return _context5.next=5,_this4.$router.push({params:{viewname:view.name}});case 5:case"end":return _context5.stop()}}),_callee5)})))()},constructTabs:function(){var _ref3=this.groupViews.find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref3.views;if(!(0,validation/* isEmpty */.xb)(views)){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(views);try{for(_iterator.s();!(_step=_iterator.n()).done;){var view=_step.value;this.tabs.push({label:view.displayName,key:view.name})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},opensummary:function(id){var _ref4=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref4.name;name&&this.$router.push({name:name,params:{id:id,viewname:this.viewname},query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{page:this.page})})},tabSwitch:function(){var query=this.$route.query;this.$router.push({params:{viewname:this.selectedView},query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},query),{},{page:1})})},back:function(){var selectedView=this.selectedView;this.$router.push({path:"/iot/agent/alarm/".concat(selectedView),query:(0,objectSpread2/* default */.Z)({},this.$route.query)})}}},Alarm_AgentAlarmListvue_type_script_lang_js=AgentAlarmListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Alarm_AgentAlarmListvue_type_script_lang_js,render,staticRenderFns,!1,null,"37cf722c",null)
/* harmony default export */,AgentAlarmList=component.exports},
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/645.js.map