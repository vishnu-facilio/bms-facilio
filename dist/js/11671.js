(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[11671],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/613071:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSchedule2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSchedule2.vue?vue&type=template&id=a6cf229e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",{attrs:{gutter:80,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.simple?"Frequency":"Repetition")+" ")]),_c("el-select",{staticStyle:{width:"100%"},model:{value:_vm.schedule.frequencyType,callback:function($$v){_vm.$set(_vm.schedule,"frequencyType",$$v)},expression:"schedule.frequencyType"}},_vm._l(_vm.frequencyTypes,(function(ftype,index){return _c("el-option",{key:index,attrs:{label:ftype.label,value:ftype.value}})})),1)],1),-1===_vm.schedule.frequencyType?_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt mT8"},[_vm._v("Frequency")]),_c("el-cascader",{staticClass:"fcascader mT10",staticStyle:{width:"100%"},attrs:{options:_vm.generateFrequencyList()},model:{value:_vm.schedule.frequency,callback:function($$v){_vm.$set(_vm.schedule,"frequency",$$v)},expression:"schedule.frequency"}}),"day"!==_vm.schedule.frequency[0]?_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Choose reminder time ")]):_vm._e(),"week"===_vm.schedule.frequency[0]?_c("div",[_c("el-select",{attrs:{multiple:""},model:{value:_vm.schedule.executeOnDays,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDays",$$v)},expression:"schedule.executeOnDays"}},_vm._l(_vm.days,(function(day){return _c("el-option",{key:day,attrs:{label:day,value:day}})})),1)],1):_vm._e(),"month"===_vm.schedule.frequency[0]?_c("div",[_c("el-select",{model:{value:_vm.schedule.executeOnType,callback:function($$v){_vm.$set(_vm.schedule,"executeOnType",$$v)},expression:"schedule.executeOnType"}},[_c("el-option",{attrs:{label:"Day",value:"day"}}),_c("el-option",{attrs:{label:"Week",value:"week"}})],1),"day"===_vm.schedule.executeOnType?_c("el-select",{attrs:{multiple:""},model:{value:_vm.schedule.executeOnDates,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDates",$$v)},expression:"schedule.executeOnDates"}},_vm._l(_vm.getNumberRange(31),(function(date){return _c("el-option",{key:date.value,attrs:{label:date.label,value:date.value}})})),1):_vm._e(),"week"===_vm.schedule.executeOnType?_c("el-cascader",{attrs:{options:_vm.getWeekList()},model:{value:_vm.schedule.executeOnWeek,callback:function($$v){_vm.$set(_vm.schedule,"executeOnWeek",$$v)},expression:"schedule.executeOnWeek"}},[_vm._v(" > ")]):_vm._e()],1):"year"===_vm.schedule.frequency[0]?_c("div",[_c("el-select",{attrs:{multiple:""},model:{value:_vm.schedule.executeOnMonth,callback:function($$v){_vm.$set(_vm.schedule,"executeOnMonth",$$v)},expression:"schedule.executeOnMonth"}},_vm._l(_vm.months,(function(month){return _c("el-option",{key:month,attrs:{label:month,value:month}})})),1)],1):_vm._e()],1):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),moment=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(76265),__webpack_require__(730381)),moment_default=__webpack_require__.n(moment),FSchedule2vue_type_script_lang_js={props:["from","value","initialSchedule","simple"],data:function(){return{frequencyTypes:[],scheduleInfo:{times:["23:59"],frequencyType:3,values:[13]},schedule:{frequencyType:0,frequency:["day",1],executeOnDays:[],executeOnType:"day",executeOnDates:[],executeOnWeek:[],executeOnMonth:[]},days:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weeks:["First","Second","Third","Fourth","Last"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{startTime:function(){return this.from?this.from:new Date}},mounted:function(){var self=this;this.loadScheduleInfo(),this.setInitialValue(),this.$watch("schedule",(function(newVal){var _this=this;self.$emit("input",this.constructScheduleObj(this.schedule)),self.$emit("input2",this.frequencyTypes.find((function(rt){return rt.value===_this.schedule.frequencyType})))}),{deep:!0})},methods:{getDayIndex:function(dayName){if(!dayName){var date=moment_default()(this.startTime);dayName=date.format("ddd")}var dayIndex=this.days.indexOf(dayName);return dayIndex+1},getMonthIndex:function(monthName){if(!monthName){var date=moment_default()(this.startTime);monthName=date.format("MMM")}var monthIndex=this.months.indexOf(monthName);return monthIndex+1},getWeekName:function(weekIndex){if(!weekIndex){var date=moment_default()(this.startTime);weekIndex=Math.ceil(date.date()/7)}var weekName=this.weeks[weekIndex-1];return weekName||(weekName=this.weeks[this.weeks.length-1]),weekName},getWeekIndex:function(weekName){if(!weekName){var date=moment_default()(this.startTime);return Math.ceil(date.date()/7)}var weekIndex=this.weeks.indexOf(weekName);return weekIndex+1},loadScheduleInfo:function(){var date=moment_default()(this.startTime);this.frequencyTypes=[],this.simple?this.schedule.frequencyType=1:this.frequencyTypes.push({label:"Do not repeat",value:0}),this.frequencyTypes.push({label:"Daily",value:1});var dayName=date.format("dddd");this.frequencyTypes.push({label:"Weekly (every "+dayName+")",value:2}),this.frequencyTypes.push({label:"Monthly (on day "+date.format("DD")+")",value:3});var dayShortName=date.format("ddd"),weekOfMonthStr=this.getWeekName();this.simple||this.frequencyTypes.push({label:"Monthly (every "+weekOfMonthStr+" "+dayShortName+")",value:4}),this.frequencyTypes.push({label:"Yearly (on "+date.format("DD MMMM")+")",value:5}),this.simple||this.frequencyTypes.push({label:"Custom",value:-1}),this.schedule.executeOnDays.length||this.schedule.executeOnDays.push(dayShortName),this.schedule.executeOnDates.length||this.schedule.executeOnDates.push(parseInt(date.format("DD"))),this.schedule.executeOnWeek.length||(this.schedule.executeOnWeek.push(weekOfMonthStr),this.schedule.executeOnWeek.push("Whole_Week")),this.schedule.executeOnMonth.length||this.schedule.executeOnMonth.push(date.format("MMM"))},constructScheduleObj:function(scheduleObj){var date=moment_default()(this.startTime),newSchedule={frequencyType:0,frequency:1,values:[],times:[]};if(newSchedule.times.push(date.format("HH:mm")),scheduleObj.frequencyType>=0){if(newSchedule.frequencyType=scheduleObj.frequencyType,2===newSchedule.frequencyType){var dayIndex=this.getDayIndex();newSchedule.values.push(dayIndex)}else if(3===newSchedule.frequencyType){var dateNo=date.format("DD");newSchedule.values.push(parseInt(dateNo))}else if(4===newSchedule.frequencyType){var weekOfMonth=Math.ceil(date.date()/7);newSchedule.weekFrequency=weekOfMonth;var _dayIndex=this.getDayIndex();newSchedule.values.push(_dayIndex)}else if(5===newSchedule.frequencyType){var monthIndex=this.getMonthIndex();newSchedule.values.push(monthIndex)}}else{
// custom scheduling
if("day"===scheduleObj.frequency[0])newSchedule.frequencyType=1;else if("week"===scheduleObj.frequency[0]){newSchedule.frequencyType=2,newSchedule.values=[];var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(scheduleObj.executeOnDays);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dayName=_step.value;newSchedule.values.push(this.getDayIndex(dayName))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else if("month"===scheduleObj.frequency[0])if("day"===scheduleObj.executeOnType)newSchedule.frequencyType=3,newSchedule.values=scheduleObj.executeOnDates;else{newSchedule.frequencyType=4,newSchedule.weekFrequency=this.getWeekIndex(scheduleObj.executeOnWeek[0]),newSchedule.values=[];var weekValue=scheduleObj.executeOnWeek[1];if("Whole_Week"===weekValue)newSchedule.values=[1,2,3,4,5,6,7];else if("Mon_Fri"===weekValue)newSchedule.values=[1,2,3,4,5];else if("Weekend"===weekValue)newSchedule.values=[6,7];else{var _dayIndex2=this.getDayIndex(weekValue);_dayIndex2>0&&(newSchedule.values=[_dayIndex2])}}else if("year"===scheduleObj.frequency[0]){newSchedule.frequencyType=5,newSchedule.values=[];var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(scheduleObj.executeOnMonth);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var monthName=_step2.value;newSchedule.values.push(this.getMonthIndex(monthName))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}newSchedule.frequency=scheduleObj.frequency[1]}return newSchedule},generateFrequencyList:function(){var newObj=[{value:"day",label:"Day",children:this.generateFrequencyTimes("day",50)},{value:"week",label:"Week",children:this.generateFrequencyTimes("week",50)},{value:"month",label:"Month",children:this.generateFrequencyTimes("month",50)},{value:"year",label:"Year",children:this.generateFrequencyTimes("year",50)}];return newObj},generateFrequencyTimes:function(type,no){for(var list=[],i=0;i<no;i++)0===i?list.push({label:"Every "+type,value:1}):list.push({label:"Every "+(i+1)+" "+type+"s",value:i+1});return list},getWeekList:function(){var options=[{label:"First",value:"First",children:this.getWeekDays()},{label:"Second",value:"Second",children:this.getWeekDays()},{label:"Third",value:"Third",children:this.getWeekDays()},{label:"Fourth",value:"Fourth",children:this.getWeekDays()},{label:"Last",value:"Last",children:this.getWeekDays()}];return options},getNumberRange:function(no){for(var list=[],i=1;i<=no;i++)list.push({label:i+"",value:i});return list},getWeekDays:function(){var list=[{label:"Whole week",value:"Whole_Week"},{label:"Mon",value:"Mon"},{label:"Tue",value:"Tue"},{label:"Wed",value:"Wed"},{label:"Thu",value:"Thu"},{label:"Fri",value:"Fri"},{label:"Sat",value:"Sat"},{label:"Sun",value:"Sun"},{label:"Mon - Fri",value:"Mon_Fri"},{label:"Weekend",value:"Weekend"}];return list},setInitialValue:function(){var _this2=this;if(this.initialSchedule)if(this.initialSchedule.frequency>1){var val="day";if(2===this.initialSchedule.frequencyType)val="week",this.schedule.executeOnDays=this.initialSchedule.values.map((function(day){return _this2.days[day-1]}));else if(3===this.initialSchedule.frequencyType)this.schedule.executeOnType="day",this.schedule.executeOnDates=this.initialSchedule.values,val="month";else if(4===this.initialSchedule.frequencyType){var value;this.schedule.executeOnType="week",this.schedule.executeOnWeek[0]=this.getWeekName(this.initialSchedule.weekFrequency);var length=this.initialSchedule.values.length;value=7===length?"Whole_Week":5===length?"Mon_Fri":2===length?"Weekend":this.days[this.initialSchedule.values[0]-1],this.schedule.executeOnWeek[1]=value,val="month"}else 5===this.initialSchedule.frequencyType&&(this.schedule.executeOnMonth=this.initialSchedule.values.map((function(month){return _this2.months[month-1]})),val="year");this.schedule.frequency=[val,this.initialSchedule.frequency],this.schedule.frequencyType=-1}else this.schedule.frequencyType=this.initialSchedule.frequencyType;else this.$emit("input",this.constructScheduleObj(this.schedule)),this.$emit("input2",this.frequencyTypes.find((function(rt){return rt.value===_this2.schedule.frequencyType})))}},watch:{startTime:function(){var _this3=this;this.loadScheduleInfo(),this.$emit("input",this.constructScheduleObj(this.schedule)),this.$emit("input2",this.frequencyTypes.find((function(rt){return rt.value===_this3.schedule.frequencyType})))},initialSchedule:function(){this.setInitialValue()}}},components_FSchedule2vue_type_script_lang_js=FSchedule2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSchedule2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSchedule2=component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/903610:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FolderCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/FolderCreation.vue?vue&type=template&id=79d49609
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container views-manager-container-v2",attrs:{title:_vm.title,visible:!0,width:"35%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height200"},[_c("el-form",{ref:"folderCreationForm",attrs:{rules:_vm.rules,model:_vm.folderObj}},[_c("el-form-item",{attrs:{label:"Folder Name",prop:"name",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common.dashboard.enter_the_folder_name")},model:{value:_vm.folderObj.name,callback:function($$v){_vm.$set(_vm.folderObj,"name",$$v)},expression:"folderObj.name"}})],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.saveFolderInfo}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(434284),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),FolderCreationvue_type_script_lang_js={props:["groupDetail","moduleName","appId"],data:function(){return{folderObj:{name:null},saving:!1,rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"}}}},created:function(){this.init()},computed:{title:function(){var groupDetail=this.groupDetail;return(0,validation/* isEmpty */.xb)(groupDetail)?this.$t("viewsmanager.folder.add_new_folder"):this.$t("viewsmanager.folder.edit_folder")}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({addFolder:"view/addFolder",updateFolder:"view/updateFolder"})),{},{init:function(){var groupDetail=this.groupDetail;if(!(0,validation/* isEmpty */.xb)(groupDetail)){var displayName=groupDetail.displayName;this.folderObj.name=displayName}},closeDialog:function(){this.$emit("onClose")},saveFolderInfo:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var validate,groupDetail,folderObj,moduleName,appId,_ref,id,name,moduleId,sequenceNumber,params,_yield$_this$addFolde,error,data,_params,_yield$_this$updateFo,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$refs["folderCreationForm"].validate();case 2:if(validate=_context.sent,validate){_context.next=5;break}return _context.abrupt("return");case 5:if(groupDetail=_this.groupDetail,folderObj=_this.folderObj,moduleName=_this.moduleName,appId=_this.appId,_ref=groupDetail||{},id=_ref.id,name=_ref.name,moduleId=_ref.moduleId,sequenceNumber=_ref.sequenceNumber,!(0,validation/* isEmpty */.xb)(groupDetail)){_context.next=19;break}return params={viewGroup:{displayName:folderObj.name,appId:appId},moduleName:moduleName},_this.saving=!0,_context.next=12,_this.addFolder(params);case 12:_yield$_this$addFolde=_context.sent,error=_yield$_this$addFolde.error,data=_yield$_this$addFolde.data,error?_this.$message.error(error.message||_this.$t("viewsmanager.folder.error_creation")):(_this.$message.success(_this.$t("viewsmanager.folder.success_creation")),_this.$emit("onSave",data.viewGroup),_this.closeDialog()),_this.saving=!1,_context.next=28;break;case 19:return _params={viewGroup:{displayName:folderObj.name,id:id,name:name,moduleId:moduleId,sequenceNumber:sequenceNumber,appId:appId}},_this.saving=!0,_context.next=23,_this.updateFolder(_params);case 23:_yield$_this$updateFo=_context.sent,_error=_yield$_this$updateFo.error,_error?_this.$message.error(_error.message||_this.$t("viewsmanager.folder.error_creation")):((0,validation/* isEmpty */.xb)(groupDetail)&&!(0,validation/* isEmpty */.xb)(appId)?_this.$emit("onSave",appId):_this.$emit("onSave"),_this.$message.success(_this.$t("viewsmanager.folder.edit_creation"))),_this.closeDialog(),_this.saving=!1;case 28:case"end":return _context.stop()}}),_callee)})))()}})},viewmanager_FolderCreationvue_type_script_lang_js=FolderCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(viewmanager_FolderCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FolderCreation=component.exports},
/***/244573:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ModuleListView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/ModuleListView.vue?vue&type=template&id=34820b56&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"overflow-y-scroll pB50",staticStyle:{height:"calc(100vh - 200px)"}},[_vm.isLoading?_c("div",_vm._l(3,(function(index){return _c("div",{key:index,staticClass:"fc__white__bg__asset d-flex width100 height50 mB10"},[_vm._m(0,!0),_vm._m(1,!0)])})),0):_vm.$validation.isEmpty(_vm.foldersList)?_c("div",{staticClass:"vm-empty-state-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.no_view_config"))+" ")])],1):_c("draggable",{attrs:{group:"viewGroups"},on:{change:function($event){return _vm.onGroupChange()}},model:{value:_vm.foldersList,callback:function($$v){_vm.foldersList=$$v},expression:"foldersList"}},_vm._l(_vm.foldersList,(function(group,index){return _c("div",{key:index,staticClass:"mB10"},[_c("el-collapse",{staticClass:"folder-collapse",model:{value:_vm.expandedFolders,callback:function($$v){_vm.expandedFolders=$$v},expression:"expandedFolders"}},[_c("el-collapse-item",{staticClass:"manager-views-item visibility-visible-actions",attrs:{name:group.name}},[_c("template",{slot:"title"},[_c("div",{staticClass:"d-flex width100"},[_c("inline-svg",{staticClass:"d-flex self-center mR30 cursor-drag",attrs:{src:"svgs/drag-and-drop",iconClass:"icon fill-lite-grey pointer"}}),_c("div",{staticClass:"d-flex self-center"},[_c("inline-svg",{staticClass:"d-flex mR10 self-center fill-grey",attrs:{src:"svgs/folder",iconClass:"icon pointer"}}),_c("div",{staticClass:"text-uppercase"},[_vm._v(" "+_vm._s(group.displayName||group.name)+" ")])],1),_c("div",{staticClass:"view-group-actions mL-auto",on:{click:function($event){$event.stopPropagation()}}},[_c("el-tooltip",{attrs:{"open-delay":700,effect:"dark",content:_vm.$t("common._common.edit"),placement:"top"}},[_c("fc-icon",{staticClass:"pointer",attrs:{group:"edit",name:"edit-line",size:"18",color:"#324056"},on:{click:function($event){return _vm.openFolderCreationDialog(group)}}})],1),_c("div",{staticClass:"view-group-actions-dropdown"},[_c("el-tooltip",{attrs:{"open-delay":700,effect:"dark",content:_vm.$t("common._common.more"),placement:"top"}},[_vm.$validation.isEmpty(group.views)?_c("el-dropdown",{attrs:{trigger:"click"},on:{command:function(action){return _vm.handleGroupCommand(action,group,index)}}},[_c("span",{staticClass:"el-dropdown-link pointer"},[_c("fc-icon",{attrs:{group:"action",name:"options-vertical",size:"18",color:"#324056"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])],1)],1):_vm._e()],1)],1)],1)],1)]),_c("draggable",_vm._b({on:{change:function($event){var i=arguments.length,argsArray=Array(i);while(i--)argsArray[i]=arguments[i];return _vm.onViewsChange.apply(void 0,[group].concat(argsArray))}},model:{value:group.views,callback:function($$v){_vm.$set(group,"views",$$v)},expression:"group.views"}},"draggable",_vm.viewsDragOptions,!1),_vm._l(group.views,(function(view,viewIndex){return _c("div",{key:viewIndex,staticClass:"views-item"},[_c("inline-svg",{staticClass:"d-flex self-center mR30 cursor-drag",attrs:{src:"svgs/drag-and-drop",iconClass:"icon fill-lite-grey"}}),_c("inline-svg",{staticClass:"d-flex self-center mR20 cursor-drag",attrs:{src:"svgs/views-list",iconClass:"icon icon-sm views-list"}}),_c("div",{staticClass:"f12 bold letter-spacing1 text-uppercase self-center"},[_vm._v(" "+_vm._s(view.displayName)+" ")]),_c("div",{staticClass:"d-flex self-center align-center mL-auto mR33"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.status"),placement:"top","open-delay":700}},[_c("el-switch",{attrs:{"active-color":"#3ab2c2",width:36},on:{change:function($event){return _vm.changeViewStatus(view)}},model:{value:view.status,callback:function($$v){_vm.$set(view,"status",$$v)},expression:"view.status"}})],1),_c("div",{staticClass:"view-actions"},[view.isEditable?_c("el-tooltip",{attrs:{"open-delay":700,effect:"dark",content:_vm.$t("common._common.edit"),placement:"top"}},[_c("fc-icon",{staticClass:"pointer",attrs:{group:"edit",name:"edit-line",size:"18",color:"#324056"},on:{click:function($event){return _vm.openViewCreation(view.name)}}})],1):_vm._e(),_c("div",{staticClass:"view-actions-dropdown"},[_vm.isDefaultView(view)?_vm._e():_c("el-tooltip",{attrs:{"open-delay":700,effect:"dark",content:_vm.$t("common._common.more"),placement:"top"}},[_c("el-dropdown",{attrs:{trigger:"click"},on:{command:function(action){return _vm.handleCommand(action,view,index,viewIndex)}}},[_c("span",{staticClass:"el-dropdown-link pointer"},[_c("fc-icon",{attrs:{group:"action",name:"options-vertical",size:"18",color:"#324056"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"clone"}},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.view_clone.clone"))+" ")]),view.isEditable?_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")]):_vm._e()],1)],1)],1)],1)],1)],1)],1)})),0)],2)],1)],1)})),0),_vm.showCloneAppDialog?_c("SelectAppViewClone",{attrs:{apps:_vm.apps,currentAppId:_vm.appId},on:{save:_vm.cloneViewForApp,close:function($event){_vm.showCloneAppDialog=!1}}}):_vm._e(),_vm.showFolderCreationDialog?_c("FolderCreation",{attrs:{moduleName:_vm.moduleName,groupDetail:_vm.selectedGroup,appId:_vm.appId},on:{onClose:function($event){_vm.showFolderCreationDialog=!1},onSave:_vm.loadGroupViewsList}}):_vm._e(),_c("portal",{attrs:{to:"view-manager-actions"}},[_c("div",{staticClass:"btn-container"},[_c("el-select",{staticClass:"fc-input-full-border2 width200px pR15",attrs:{placeholder:"Select App",filterable:""},on:{change:_vm.loadGroupViewsList},model:{value:_vm.appId,callback:function($$v){_vm.appId=$$v},expression:"appId"}},_vm._l(_vm.apps,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1),_c("el-button",{staticClass:"manager-secondary-btn ml-add-btn-label",attrs:{type:"primary"},on:{click:function($event){return _vm.openViewCreation()}}},[_c("span",{staticClass:"btn-label"},[_vm._v(_vm._s(_vm.$t("viewsmanager.list.add_view")))])])],1)])],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fL width85 self-center"},[_c("div",{staticClass:"fc-animated-background p10 width140px"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fR self-center"},[_c("div",{staticClass:"fc-animated-background p10 width140px"})])}],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),vuedraggable_umd=(__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(339772),__webpack_require__(909980)),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),router=__webpack_require__(329435),validation=__webpack_require__(990260),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),vuex_esm=__webpack_require__(420629),FolderCreation=__webpack_require__(903610),SelectAppViewClonevue_type_template_id_1a201db4_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container clone_view-choose_app-dialog views-manager-container-v2",attrs:{title:_vm.$t("common._common.clone"),visible:!0,"show-close":!1,"append-to-body":!0,top:"30vh",width:"30%"}},[_c("el-form",{ref:"selectAppForm",attrs:{rules:_vm.rules,model:_vm.selectAppFormObj}},[_c("el-form-item",{attrs:{label:_vm.$t("common.header.application"),prop:"cloneAppId"}},[_c("el-select",{staticClass:"fc-input-full-border2 min_width100 pR15",attrs:{placeholder:_vm.$t("common.placeholders.select_app"),filterable:""},model:{value:_vm.selectAppFormObj.cloneAppId,callback:function($$v){_vm.$set(_vm.selectAppFormObj,"cloneAppId",$$v)},expression:"selectAppFormObj.cloneAppId"}},_vm._l(_vm.apps,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1)],1)],1),_c("span",{attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"cancel-btn",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("common.roles.cancel")))]),_c("el-button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.$t("common._common._save")))])],1)],1)},SelectAppViewClonevue_type_template_id_1a201db4_staticRenderFns=[],SelectAppViewClonevue_type_script_lang_js={props:["apps","currentAppId"],data:function(){return{selectAppFormObj:{cloneAppId:null},rules:{cloneAppId:{required:!0,message:this.$t("viewsmanager.view_clone.select_app_to_clone_view"),trigger:"change"}}}},created:function(){var currentAppId=this.currentAppId;this.selectAppFormObj.cloneAppId=currentAppId},methods:{closeDialog:function(){this.$emit("close")},save:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var validate,cloneAppId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$refs["selectAppForm"].validate();case 2:if(validate=_context.sent,validate){_context.next=5;break}return _context.abrupt("return");case 5:cloneAppId=_this.selectAppFormObj.cloneAppId,_this.$emit("save",cloneAppId);case 7:case"end":return _context.stop()}}),_callee)})))()}}},viewmanager_SelectAppViewClonevue_type_script_lang_js=SelectAppViewClonevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(viewmanager_SelectAppViewClonevue_type_script_lang_js,SelectAppViewClonevue_type_template_id_1a201db4_render,SelectAppViewClonevue_type_template_id_1a201db4_staticRenderFns,!1,null,null,null)
/* harmony default export */,SelectAppViewClone=component.exports,routeUtil=__webpack_require__(405759),ModuleListViewvue_type_script_lang_js={props:["moduleName"],components:{draggable:vuedraggable_umd_default(),FolderCreation:FolderCreation/* default */.Z,SelectAppViewClone:SelectAppViewClone},data:function(){return{cloningViewName:null,showCloneAppDialog:!1,viewCloneAppId:null,isLoading:!1,appId:null,apps:[],selectedGroup:null,showFolderCreationDialog:!1,foldersList:[],expandedFolders:[],viewsDragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"viewItem",sort:!0}}},created:function(){this.appId=this.currentSelectedApp,this.availableApps()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)("view",["getViewsFolderList"])),{},{groupViewsList:function(){return cloneDeep_default()(this.getViewsFolderList())},currentSelectedApp:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},appId=_ref2.appId;return(0,validation/* isEmpty */.xb)(appId)?((0,router/* getApp */.wx)()||{}).id:parseInt(appId)}}),watch:{moduleName:{handler:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.loadGroupViewsList()},immediate:!0},groupViewsList:{handler:function(newVal){newVal&&(this.foldersList=newVal,this.expandedFolders=[].concat((0,toConsumableArray/* default */.Z)(this.expandedFolders),(0,toConsumableArray/* default */.Z)(newVal.filter((function(grp){return(0,validation/* isEmpty */.xb)(grp.views)})).map((function(grp){return grp.name})))))},immediate:!0},appId:function(newVal){this.currentSelectedApp!==newVal&&this.updateAppChange(newVal)}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({customizeFolders:"view/customizeFolders",customizeViewsList:"view/customizeViews",deleteFolder:"view/deleteFolder",viewDelete:"view/deleteView"})),{},{cloneViewForApp:function(cloneAppId){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var cloningViewName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.isLoading=!0,cloningViewName=_this.cloningViewName,_this.viewCloneAppId=cloneAppId,_context.next=5,_this.openViewCreation(cloningViewName);case 5:_this.isLoading=!1;case 6:case"end":return _context.stop()}}),_callee)})))()},handleCommand:function(action,view,index,viewIndex){if("clone"===action)this.cloningViewName=view.name,this.showCloneAppDialog=!0;else if("delete"===action){var id=view.id;this.deleteView(id,index,viewIndex)}},isDefaultView:function(view){var _ref3=view||{},name=_ref3.name,checkViewIsDefault=!(0,validation/* isEmpty */.xb)(name)&&name.includes("maintenance_");// temporary handling - to be removed
return view.default||checkViewIsDefault},changeViewStatus:function(_ref4){var id=_ref4.id,status=_ref4.status,params={id:id,status:status},url="v2/views/editStatus",_API$post=api/* API */.bl.post(url,params),error=_API$post.error;error?this.$message.error(this.$t("viewsmanager.view_status.error_while_editing_view_status")):this.$message.success(status?this.$t("viewsmanager.view_status.view_enabled_successfully"):this.$t("viewsmanager.view_status.view_disabled_successfully"))},availableApps:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,_yield$API$get,data,error,defaultApp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return moduleName=_this2.moduleName,_context2.next=3,api/* API */.bl.get("v2/application/fetchList",{moduleName:moduleName});case 3:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this2.$message.error(error.message||"Error Occured"):(_this2.apps=data.application||[],(0,validation/* isEmpty */.xb)(_this2.appId)&&(defaultApp=_this2.apps.find((function(app){return"newapp"===app.linkName}))||_this2.apps[0],_this2.appId=defaultApp.id));case 7:case"end":return _context2.stop()}}),_callee2)})))()},loadGroupViewsList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var moduleName,appId,currentSelectedApp,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return moduleName=_this3.moduleName,appId=_this3.appId,currentSelectedApp=_this3.currentSelectedApp,data={moduleName:moduleName,appId:appId||currentSelectedApp,restrictPermissions:!0,fromBuilder:!0},_this3.isLoading=!0,_context3.next=5,_this3.$store.dispatch("view/loadGroupViews",data);case 5:_this3.isLoading=!1;case 6:case"end":return _context3.stop()}}),_callee3)})))()},openFolderCreationDialog:function(){var group=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.selectedGroup=group,this.showFolderCreationDialog=!0},updateAppChange:function(appId){this.expandedFolders=[],this.$router.push({query:{appId:appId}})},openViewCreation:function(){var viewname=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,moduleName=this.moduleName,appId=this.appId,viewCloneAppId=this.viewCloneAppId,findRouteMethod=(0,router/* isWebTabsEnabled */.tj)()?router/* findRouteForModule */.Jp:routeUtil/* findRouterForModuleInApp */.E,_ref5=findRouteMethod(moduleName,router/* pageTypes */.As.VIEW_CREATION)||{},name=_ref5.name;name&&(viewname&&viewCloneAppId?this.$router.push({name:name,params:{moduleName:moduleName},query:{appId:appId,viewCloneAppId:viewCloneAppId,viewname:viewname}}):viewname?this.$router.push({name:name,params:{moduleName:moduleName,viewname:viewname},query:{appId:appId}}):this.$router.push({name:name,params:{moduleName:moduleName},query:{appId:appId}}))},onGroupChange:function(groupViewsList){(0,validation/* isEmpty */.xb)(groupViewsList)&&(groupViewsList=cloneDeep_default()(this.foldersList)),groupViewsList.forEach((function(group,index){group.sequenceNumber=++index})),this.customizeGroups(groupViewsList)},customizeGroups:function(groupViewsList){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleName,appId,params,_yield$_this4$customi,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return moduleName=_this4.moduleName,appId=_this4.appId,params={viewGroupsList:groupViewsList,moduleName:moduleName,appId:appId},_context4.next=4,_this4.customizeFolders(params);case 4:_yield$_this4$customi=_context4.sent,error=_yield$_this4$customi.error,error?_this4.$message.error(error.message||_this4.$t("viewsmanager.customize.error")):_this4.$message.success(_this4.$t("viewsmanager.customize.updated"));case 7:case"end":return _context4.stop()}}),_callee4)})))()},handleGroupCommand:function(action,group,index){"delete"===action&&this.deleteGroup(group,index)},deleteGroup:function(group,index){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var value,_ref6,id,params,_yield$_this5$deleteF,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this5.$dialog.confirm({title:_this5.$t("viewsmanager.views.delete_group"),message:_this5.$t("viewsmanager.views.delete_group_confirmation"),rbDanger:!0,rbLabel:_this5.$t("viewsmanager.views.delete")});case 2:if(value=_context5.sent,value){_context5.next=5;break}return _context5.abrupt("return");case 5:return _ref6=group||{},id=_ref6.id,params={viewGroupData:{viewGroup:{id:id}},index:index},_context5.next=9,_this5.deleteFolder(params);case 9:_yield$_this5$deleteF=_context5.sent,data=_yield$_this5$deleteF.data,error=_yield$_this5$deleteF.error,error?_this5.$message.error(data.message||_this5.$t("viewsmanager.views.delete_group_error")):_this5.$message.success(_this5.$t("viewsmanager.views.delete_group_sucess"));case 13:case"end":return _context5.stop()}}),_callee5)})))()},onViewsChange:function(group,props){var added=props.added,moved=props.moved;if((0,validation/* isEmpty */.xb)(added)){if(!(0,validation/* isEmpty */.xb)(moved)){var views=group.views.map((function(view,index){var _ref7=view||{},name=_ref7.name,id=_ref7.id,type=_ref7.type;return{id:id,sequenceNumber:index+1,name:name,type:type}}));this.customizeViews(views)}}else{
// to handle the swap across folders
var foldersList=this.foldersList,clonedFoldersList=cloneDeep_default()(foldersList),currentGroupIndex=clonedFoldersList.findIndex((function(folder){return folder.id===group.id})),serializedGroupViews=group.views.map((function(view,index){return view.sequenceNumber=index+1,view}));clonedFoldersList[currentGroupIndex].views=serializedGroupViews,this.onGroupChange(clonedFoldersList)}},customizeViews:function(views){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var moduleName,appId,_ref8,type,params,_yield$_this6$customi,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return moduleName=_this6.moduleName,appId=_this6.appId,_ref8=views[0]||{},type=_ref8.type,params={views:views,moduleName:moduleName,groupStatus:!0,appId:appId,groupType:type,viewType:type,fromBuilder:!0},_context6.next=5,_this6.customizeViewsList(params);case 5:_yield$_this6$customi=_context6.sent,error=_yield$_this6$customi.error,error?_this6.$message.error(error.message||_this6.$t("viewsmanager.customize.error")):_this6.$message.success(_this6.$t("viewsmanager.customize.updated"));case 8:case"end":return _context6.stop()}}),_callee6)})))()},deleteView:function(id,index,viewIndex){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var value,params,_yield$_this7$viewDel,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,_this7.$dialog.confirm({title:_this7.$t("viewsmanager.views.delete_view"),message:_this7.$t("viewsmanager.views.delete_view_confirmation"),rbDanger:!0,rbLabel:_this7.$t("viewsmanager.views.delete")});case 2:if(value=_context7.sent,value){_context7.next=5;break}return _context7.abrupt("return");case 5:return params={viewData:{id:id},index:index,viewIndex:viewIndex},_context7.next=8,_this7.viewDelete(params);case 8:_yield$_this7$viewDel=_context7.sent,error=_yield$_this7$viewDel.error,error?_this7.$message.error(error.message||_this7.$t("viewsmanager.views.delete_view_error")):_this7.$message.success(_this7.$t("viewsmanager.views.delete_view_sucess"));case 11:case"end":return _context7.stop()}}),_callee7)})))()}})},viewmanager_ModuleListViewvue_type_script_lang_js=ModuleListViewvue_type_script_lang_js,ModuleListView_component=(0,componentNormalizer/* default */.Z)(viewmanager_ModuleListViewvue_type_script_lang_js,render,staticRenderFns,!1,null,"34820b56",null)
/* harmony default export */,ModuleListView=ModuleListView_component.exports},
/***/611671:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ViewManagerLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/ViewManagerLayout.vue?vue&type=template&id=a76bf8e8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"views-manager-container views-manager-container-v2"},[_c("div",{staticClass:"header-container"},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("div",{staticClass:"d-flex pointer",on:{click:_vm.goBack}},[_c("InlineSvg",{attrs:{src:"arrow-pointing-to-left2",iconClass:"icon icon-xs self-center mR5"}}),_c("div",{staticClass:"text-fc-blue f11 letter-spacing0_5"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.back"))+" ")])],1),_c("div",{staticClass:"heading-black22 pT10"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.views_manager"))+" ")])]),_c("portal-target",{staticClass:"mL-auto",attrs:{name:"view-manager-actions"}})],1),_c("el-tabs",{staticClass:"manager-tabs-container",model:{value:_vm.activeTabName,callback:function($$v){_vm.activeTabName=$$v},expression:"activeTabName"}},[_c("el-tab-pane",{attrs:{label:"List Views",name:"listViews"}},["listViews"===_vm.activeTabName?_c("ModuleListView",{attrs:{moduleName:_vm.moduleName}}):_vm._e()],1),_c("el-tab-pane",{attrs:{label:"Scheduled Views",name:"scheduledViews"}},["scheduledViews"===_vm.activeTabName?_c("ViewScheduledList",{attrs:{moduleName:_vm.moduleName}}):_vm._e()],1)],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ViewScheduledListvue_type_template_id_4faf2e7c_scoped_true_render=(__webpack_require__(434284),__webpack_require__(670560),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"position-relative"},[_vm.loading?_c("div",{staticClass:"flex-middle scheduled-view-empty-white asset-empty-data-con m10"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",[_vm.$validation.isEmpty(_vm.scheduledReports)?_c("div",{staticClass:"scheduled-view-empty-white flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/scheduled-views",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.schedules.no_view_schedules_available"))+" ")])],1):_c("div",{staticClass:"height100 user-layout"},[_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_vm._m(0),_c("tbody",_vm._l(_vm.scheduledReports,(function(scheduledReport){return _c("tr",{key:scheduledReport.id,staticClass:"tablerow"},[_c("td",[_vm._v(_vm._s(_vm.getViewName(scheduledReport)))]),_c("td",[_vm._v(" "+_vm._s(_vm.fileFormat[scheduledReport.fileFormat])+" ")]),_c("td",[_vm._v(" "+_vm._s(_vm.$validation.isEmpty(scheduledReport.job)||_vm.$validation.isEmpty(scheduledReport.job.schedule)?"---":_vm.frequencyType[scheduledReport.job.schedule.frequencyType])+" ")]),_c("td",[_vm._v(" "+_vm._s(_vm.checkForActiveJob(scheduledReport))+" ")]),_c("td",[_vm.$validation.isEmpty(scheduledReport.userIds)?_vm._e():_vm._l(scheduledReport.userIds,(function(id,index){return _c("span",{key:index},[_c("user-avatar",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{size:"sm",user:_vm.$store.getters.getUser(id),name:!1,title:_vm.$store.getters.getUser(id).name}})],1)}))],2),_c("td",[_c("div",{staticClass:"text-left actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center"}},[_c("i",{staticClass:"el-icon-edit pointer",on:{click:function($event){return _vm.editScheduledReport(scheduledReport)}}}),_c("i",{staticClass:"el-icon-delete pointer pL5",on:{click:function($event){return _vm.deleteScheduledReport(scheduledReport)}}})])])])})),0)])])])])])]),_c("portal",{attrs:{to:"view-manager-actions"}},[_c("div",{staticClass:"btn-container"},[_c("el-button",{staticClass:"manager-secondary-btn ml-add-btn-label",attrs:{type:"primary"},on:{click:function($event){return _vm.createView()}}},[_c("span",{staticClass:"btn-label"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.schedules.schedule_views"))+" ")])])],1)]),_vm.showScheduleViewCreation?_c("NewScheduleReport",{attrs:{moduleName:_vm.moduleName,isEdit:!_vm.$validation.isEmpty(_vm.selectedReport),showViews:_vm.$validation.isEmpty(_vm.selectedReport),model:_vm.selectedReport,viewName:(_vm.selectedReport||{}).viewName,viewDisplayName:(_vm.selectedReport||{}).viewDisplayName},on:{save:_vm.initData,close:function($event){_vm.showScheduleViewCreation=!1}}}):_vm._e()],1)}),ViewScheduledListvue_type_template_id_4faf2e7c_scoped_true_staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text width250px"},[_vm._v(" VIEW NAME ")]),_c("th",{staticClass:"setting-table-th setting-th-text width250px"},[_vm._v(" FILE FORMAT ")]),_c("th",{staticClass:"setting-table-th setting-th-text width250px"},[_vm._v(" FREQUENCY ")]),_c("th",{staticClass:"setting-table-th setting-th-text width250px"},[_vm._v(" NEXT EXECUTION ")]),_c("th",{staticClass:"setting-table-th setting-th-text width200px"}),_c("th",{staticClass:"setting-table-th setting-th-text width200px"})])])}],Spinner=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(425728),__webpack_require__(538077),__webpack_require__(604947)),api=__webpack_require__(32284),validation=__webpack_require__(990260),NewScheduleView=__webpack_require__(343089),User=__webpack_require__(426803),utility_methods=__webpack_require__(773258),constant=__webpack_require__(354754),frequency=(0,objectSpread2/* default */.Z)({0:"Once"},constant/* default */.Z.FACILIO_FREQUENCY),ViewScheduledListvue_type_script_lang_js={components:{Spinner:Spinner/* default */.Z,NewScheduleReport:NewScheduleView/* default */.Z,UserAvatar:User/* default */.Z},props:["moduleName"],data:function(){return{loading:!1,scheduledReports:[],selectedReport:null,showScheduleViewCreation:!1,views:[]}},computed:{users:function(){return this.$store.state.users},frequencyType:function(){var types=(0,utility_methods/* deepCloneObject */.kh)(frequency);return types},fileFormat:function(){var formats=(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.FILE_FORMAT);return formats}},mounted:function(){this.initData(),this.loadViews()},methods:{createView:function(){this.selectedReport=null,this.showScheduleViewCreation=!0},checkForActiveJob:function(report){var job=report.job;if(!(0,validation/* isEmpty */.xb)(job)){var active=job.active,executionTime=job.executionTime;if(active&&executionTime>-1)return this.$options.filters.formatDate(1e3*executionTime,"DD-MM-YYYY")}return"---"},initData:function(){var _this=this;this.loading=!0,this.scheduledReports=[];var moduleName=this.moduleName,data={moduleName:moduleName},url="/view/woScheduleViewList";api/* API */.bl.post(url,data).then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this.$message.error(error.message||"Error occured");else{var _ref2=data||[],scheduledReports=_ref2.scheduledReports;_this.scheduledReports=_this.deserializeReportsInfo(scheduledReports)}_this.loading=!1}))},deserializeReportsInfo:function(scheduledReports){var _this2=this,reports=scheduledReports;return(0,validation/* isEmpty */.xb)(reports)||reports.forEach((function(report){var _ref3=report||{},emailTemplate=_ref3.emailTemplate,_ref4=emailTemplate||{},workflow=_ref4.workflow,_ref5=workflow||{},expressions=_ref5.expressions,userIds=[];if((0,validation/* isEmpty */.xb)(expressions)){var userMails=emailTemplate.originalTemplate.to.split();userMails.forEach((function(mail){var user=_this2.users.find((function(user){return user.email===mail}));(0,validation/* isEmpty */.xb)(user)||userIds.push(parseInt(user.id))}))}else for(var i=0;i<expressions.length;i++){var expression=expressions[i],_ref6=expression||{},criteria=_ref6.criteria;if(!(0,validation/* isEmpty */.xb)(criteria)){var userId=expression.criteria.conditions[1].value;userIds.push(parseInt(userId))}}_this2.$set(report,"userIds",userIds)})),reports},loadViews:function(){var _this3=this,moduleName=this.moduleName,url="/view?moduleName=".concat(moduleName);api/* API */.bl.get(url).then((function(_ref7){var data=_ref7.data,error=_ref7.error;if(error)_this3.$message.error(error.message||"Error occured");else if(!(0,validation/* isEmpty */.xb)(data)){var _ref8=data||{},views=_ref8.views;_this3.views=views}}))},getViewName:function(report){var _ref9=report||{},reportContext=_ref9.reportContext,_ref10=reportContext||{},data=_ref10.data,views=this.views;if(!(0,validation/* isEmpty */.xb)(data)){var viewArr=views.filter((function(view){return view.id===data.viewId}));if(!(0,validation/* isEmpty */.xb)(viewArr)){var viewName=viewArr[0].displayName||viewArr[0].name;return viewName}}return"---"},editScheduledReport:function(scheduledReport){var views=this.views;this.selectedReport={};var scheduledReportInfo=this.$helpers.cloneObject(scheduledReport),reportContext=scheduledReportInfo.reportContext,job=scheduledReportInfo.job,id=scheduledReportInfo.id,fileFormat=scheduledReportInfo.fileFormat,emailTemplate=scheduledReportInfo.emailTemplate,userIds=scheduledReportInfo.userIds,data=reportContext.data,viewId=data.viewId,viewObj=views.filter((function(view){return view.id===viewId}));emailTemplate.originalTemplate.to=userIds;var startTime=job.executionTime>0?1e3*job.executionTime:"";this.selectedReport={scheduleForm:{startTime:startTime||new Date,schedule:job.schedule},format:fileFormat,viewName:viewObj[0].name,viewDisplayName:viewObj[0].displayName||viewObj[0].name,mailJson:emailTemplate.originalTemplate,to:emailTemplate.originalTemplate.to,endTime:job.endExecutionTime>0?1e3*job.endExecutionTime:"",maxCount:job.maxExecution>0?job.maxExecution:"",id:id},this.showScheduleViewCreation=!0},deleteScheduledReport:function(scheduledReport){var _this4=this;this.$dialog.confirm({title:"Delete Schedule",message:"Are you sure you want to delete this schedule?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){if(value){var url="/view/deleteScheduledView",dataObj={id:scheduledReport.id};api/* API */.bl.post(url,dataObj).then((function(_ref11){_ref11.data;var error=_ref11.error;error?_this4.$message.error(error.message||_this4.$t("viewsmanager.schedules.schedule_deletion_failed")):(_this4.$message.success(_this4.$t("viewsmanager.schedules.schedule_deletion_succesfully")),_this4.initData())}))}}))}}},viewmanager_ViewScheduledListvue_type_script_lang_js=ViewScheduledListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(viewmanager_ViewScheduledListvue_type_script_lang_js,ViewScheduledListvue_type_template_id_4faf2e7c_scoped_true_render,ViewScheduledListvue_type_template_id_4faf2e7c_scoped_true_staticRenderFns,!1,null,"4faf2e7c",null)
/* harmony default export */,ViewScheduledList=component.exports,ModuleListView=__webpack_require__(244573),router=__webpack_require__(329435),routeUtil=__webpack_require__(405759),ViewManagerLayoutvue_type_script_lang_js={name:"ViewManagerLayout",props:["moduleName"],components:{ViewScheduledList:ViewScheduledList,ModuleListView:ModuleListView/* default */.Z},data:function(){return{activeTabName:"listViews"}},methods:{goBack:function(){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref.name;name&&this.$router.push({name:name})}else{var route=(0,routeUtil/* findRouterForModuleInApp */.E)(moduleName,router/* pageTypes */.As.LIST)||{};route&&this.$router.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},route),{},{params:{moduleName:moduleName}}))}}}},viewmanager_ViewManagerLayoutvue_type_script_lang_js=ViewManagerLayoutvue_type_script_lang_js,ViewManagerLayout_component=(0,componentNormalizer/* default */.Z)(viewmanager_ViewManagerLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewManagerLayout=ViewManagerLayout_component.exports},
/***/343089:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewScheduleView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/forms/NewScheduleView.vue?vue&type=template&id=ef17ce48
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{id:"schedule-form",visible:!0,fullscreen:!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog scheduled-view-container views-manager-container-v2",width:"40%","append-to-body":!0},on:{close:_vm.close}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isEdit?"Edit Schedule View":"Schedule This View")+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_vm.showViews?_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.schedules.view"))+" ")]):_vm._e(),_c("el-form",{ref:"view-form",attrs:{rules:_vm.viewRules,model:_vm.selectedView}},[_c("el-form-item",{attrs:{prop:"id"}},[_vm.showViews?_c("el-select",{staticClass:"filter-form fc-tag pT15",staticStyle:{width:"280px",overflow:"scroll"},attrs:{filterable:"","default-first-option":"",loading:_vm.viewLoading},on:{change:_vm.setSelectedView},model:{value:_vm.selectedView.id,callback:function($$v){_vm.$set(_vm.selectedView,"id",$$v)},expression:"selectedView.id"}},_vm._l(_vm.views,(function(view){return _c("el-option",{key:view.id,attrs:{label:view.displayName,value:view.id}})})),1):_vm._e()],1)],1),_c("div",{staticClass:"fc-modal-sub-title pT15"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.schedule"))+" ")]),_c("el-date-picker",{staticClass:"form-item pT15 fc-input-full-border2 fc-date-picker-icon-align",staticStyle:{width:"56%"},attrs:{"popper-class":"views-manager-container-v2","float-label":"Start Date",type:"datetime"},model:{value:_vm.scheduleForm.startTime,callback:function($$v){_vm.$set(_vm.scheduleForm,"startTime",$$v)},expression:"scheduleForm.startTime"}}),_c("f-schedule",{staticClass:"pT15",staticStyle:{width:"71%","margin-bottom":"20px"},attrs:{from:_vm.scheduleForm.startTime,initialSchedule:_vm.initialSchedule,simple:"true"},on:{input2:_vm.getfreq},model:{value:_vm.scheduleForm.schedule,callback:function($$v){_vm.$set(_vm.scheduleForm,"schedule",$$v)},expression:"scheduleForm.schedule"}}),_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(_vm._s(_vm.$t("common.wo_report.ends")))]),_c("div",[_c("div",[_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"never"},model:{value:_vm.endType,callback:function($$v){_vm.endType=$$v},expression:"endType"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.never")))])],1),_c("div",{staticClass:"row"},[_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"after"},model:{value:_vm.endType,callback:function($$v){_vm.endType=$$v},expression:"endType"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.after")))]),_c("div",{directives:[{name:"show",rawName:"v-show",value:"after"===_vm.endType,expression:"endType === 'after'"}]},[_c("el-input",{staticStyle:{width:"180px","margin-left":"20px"},attrs:{placeholder:"",type:"number",min:"1"},model:{value:_vm.maxCount,callback:function($$v){_vm.maxCount=$$v},expression:"maxCount"}}),_c("span",{staticStyle:{"margin-left":"10px"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.times")))])],1)],1),_c("div",{staticClass:"row"},[_c("el-radio",{staticClass:"fc-radio-btn pT15 ",attrs:{color:"secondary",label:"on"},model:{value:_vm.endType,callback:function($$v){_vm.endType=$$v},expression:"endType"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.on")))]),_c("div",{directives:[{name:"show",rawName:"v-show",value:"on"===_vm.endType,expression:"endType === 'on'"}],staticClass:"row"},[_c("el-date-picker",{staticStyle:{width:"180px","margin-left":"30px","vertical-align":"text-bottom"},attrs:{type:"datetime",placeholder:"dd/mm/yy"},model:{value:_vm.endTime,callback:function($$v){_vm.endTime=$$v},expression:"endTime"}})],1)],1)]),_c("div",{staticClass:"pT20 fc-modal-sub-title",staticStyle:{"padding-bottom":"15px"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.email_this_view"))+" ")]),_c("el-form",{ref:"schedule-form",attrs:{rules:_vm.mailJsonRule,model:_vm.mailJson}},[_c("el-form-item",{attrs:{label:_vm.$t("common.wo_report.to"),prop:"to"}},[_c("el-select",{staticClass:"filter-form fc-input-full-border-select2 width100 fc-tag widht100",staticStyle:{overflow:"scroll"},attrs:{multiple:"",filterable:"","default-first-option":"","popper-class":"views-manager-container-v2"},model:{value:_vm.mailJson.to,callback:function($$v){_vm.$set(_vm.mailJson,"to",$$v)},expression:"mailJson.to"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:parseInt(user.id)}},[_vm._v(_vm._s(user.name+" ("+user.email+")"))])})),1)],1),_c("el-form-item",{attrs:{label:_vm.$t("common.wo_report.report_subject"),prop:"subject"}},[[_c("el-input",{attrs:{type:"text"},on:{change:function($event){_vm.messageChanged=!0}},model:{value:_vm.mailJson.subject,callback:function($$v){_vm.$set(_vm.mailJson,"subject",$$v)},expression:"mailJson.subject"}})]],2),_c("el-form-item",{attrs:{label:_vm.$t("common.wo_report.report_description")}},[[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{type:"textarea",autosize:{minRows:6,maxRows:6},resize:"none"},on:{change:function($event){_vm.messageChanged=!0}},model:{value:_vm.mailJson.message,callback:function($$v){_vm.$set(_vm.mailJson,"message",$$v)},expression:"mailJson.message"}})]],2)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("button",{staticClass:"modal-btn-cancel",attrs:{type:"button"},on:{click:_vm.close}},[_c("span",[_vm._v(_vm._s(_vm.$t("common._common.cancel")))])]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"button",disabled:_vm.disableSave,loading:_vm.disableSave},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.$t("common.wo_report.schedule")))])])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FSchedule2=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(613071)),api=__webpack_require__(32284),validation=__webpack_require__(990260),NewScheduleViewvue_type_script_lang_js={props:["viewName","viewId","report","isEdit","model","visibility","viewDisplayName","moduleName","showViews","exportFromView"],data:function(){return{users:[],scheduleForm:{startTime:new Date,schedule:null},initialSchedule:null,format:2,frequencyObj:null,mailJson:{to:[],subject:"",message:""},endType:"never",endTime:null,maxCount:null,messageChanged:!1,viewIds:"",viewLoading:!1,views:[],selectedView:{name:"",displayName:"",id:null},disableSave:!1,mailJsonRule:{to:[{required:!0,message:this.$t("viewsmanager.schedules.select_user"),trigger:"change"}],subject:[{required:!0,message:this.$t("viewsmanager.schedules.subject_empty"),trigger:"blur"}]},viewRules:{id:[{required:!0,message:this.$t("viewsmanager.schedules.select_view"),trigger:"change"}]}}},components:{FSchedule:FSchedule2/* default */.Z},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadUsers();case 2:(_this.isEdit||_this.exportFromView)&&(_this.selectedView={name:_this.viewName,displayName:_this.viewDisplayName,id:_this.viewId});case 3:case"end":return _context.stop()}}),_callee)})))()},mounted:function(){var showViews=this.showViews;!(0,validation/* isEmpty */.xb)(showViews)&&showViews?this.loadViews():(this.init(),this.checkList())},computed:{currentModuleName:function(){var moduleName=this.moduleName;return(0,validation/* isEmpty */.xb)(moduleName)?this.route.meta.module:moduleName}},watch:{viewId:function(val){this.viewIds=val}},methods:{loadUsers:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/users");case 2:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this2.users=(null===data||void 0===data?void 0:data.users)||[]);case 6:case"end":return _context2.stop()}}),_callee2)})))()},setSelectedView:function(viewId){var views=this.views,viewObj=views.find((function(view){return view.id===viewId}));(0,validation/* isEmpty */.xb)(viewObj)||(this.selectedView=(0,objectSpread2/* default */.Z)({},viewObj),this.setInitialMessage(this.frequencyObj,!0))},loadViews:function(){var _this3=this;this.viewLoading=!0;var currentModuleName=this.currentModuleName;api/* API */.bl.get("/view?moduleName="+currentModuleName).then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this3.$message.error(error.message||"Error occured");else if(!(0,validation/* isEmpty */.xb)(data)){var _ref2=data||{},views=_ref2.views;_this3.views=views,_this3.init(),_this3.checkList()}})).finally((function(){_this3.viewLoading=!1}))},init:function(){this.isEdit&&this.model?(this.model.scheduleForm.schedule.timeObjects=null,this.scheduleForm.startTime=this.model.scheduleForm.startTime,this.scheduleForm.schedule=this.model.scheduleForm.schedule,this.initialSchedule=this.model.scheduleForm.schedule,this.format=this.model.format,this.mailJson=this.model.mailJson,this.mailJson.to=this.model.mailJson.to,this.model.endTime&&(this.endTime=this.model.endTime),this.model.maxCount&&(this.maxCount=this.model.maxCount),this.model.viewName&&(this.selectedView.name=this.model.viewName),this.maxCount>0?this.endType="after":this.endType=this.endTime>0?"on":"never"):(this.scheduleForm.startTime=new Date,this.setInitialMessage(this.frequencyObj,!1))},checkList:function(){var url,currentModuleName=this.currentModuleName;url="/view/woScheduleViewList",this.$http.post(url,{moduleName:currentModuleName})},setInitialMessage:function(data,messageChange){var _ref3=this||[],selectedView=_ref3.selectedView,_ref4=selectedView||{},displayName=_ref4.displayName;(!this.messageChanged&&this.report||messageChange)&&(this.mailJson.message="Here are the "+displayName+("workorder"===this.currentModuleName?" tasks and work orders scheduled for the day by ":"assets scheduled for the day by ")+this.$account.user.name+"\nView name : "+displayName+"\nFrequency: "+(data?data.label:"")+"\n\nYou could view the details here \n"+window.location.href+"\n\nRegards, \nTeam "+this.$getProperty(window.brandConfig,"name","Facilio"),this.mailJson.subject=displayName+this.$t("common.wo_report.view_schedule_at")+" "+this.$options.filters.formatDate(this.$helpers.getTimeInOrg(this.scheduleForm.startTime)))},getfreq:function(data){var _ref5=this||[],selectedView=_ref5.selectedView,_ref6=selectedView||{},displayName=_ref6.displayName,name=_ref6.name;return this.frequencyObj=data,this.mailJson.message="Here are the "+name+("workorder"===this.currentModuleName?" tasks and work orders scheduled for the day by ":" assets scheduled for the day by ")+this.$account.user.name+"\nView name : "+displayName+"\nFrequency: "+(data?data.label:"")+"\nYou could view the details here \n"+window.location.href+"\nRegards, \nTeam "+this.$getProperty(window.brandConfig,"name","Facilio"),this.mailJson.subject=displayName+this.$t("common.wo_report.view_schedule_at")+this.scheduleForm.startTime,data},validate:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var showViews,viewValidation,scheduleValidation;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return showViews=_this4.showViews,viewValidation=!0,scheduleValidation=!0,_context3.prev=2,_context3.next=5,_this4.$refs["schedule-form"].validate();case 5:scheduleValidation=_context3.sent,_context3.next=11;break;case 8:_context3.prev=8,_context3.t0=_context3["catch"](2),scheduleValidation=!1;case 11:if(_context3.prev=11,(0,validation/* isEmpty */.xb)(showViews)||!showViews){_context3.next=16;break}return _context3.next=15,_this4.$refs["view-form"].validate();case 15:viewValidation=_context3.sent;case 16:_context3.next=21;break;case 18:_context3.prev=18,_context3.t1=_context3["catch"](11),viewValidation=!1;case 21:return _context3.abrupt("return",scheduleValidation&&viewValidation);case 22:case"end":return _context3.stop()}}),_callee3,null,[[2,8],[11,18]])})))()},save:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var valid,selectedView,mailTemplate,data,url;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_this5.validate();case 2:if(valid=_context4.sent,valid){_context4.next=5;break}return _context4.abrupt("return");case 5:if(_this5.disableSave=!0,selectedView=_this5.selectedView,mailTemplate=_this5.$helpers.cloneObject(_this5.mailJson),_this5.$common.setUserMailWorkflow(_this5.mailJson.to,mailTemplate),data={type:_this5.format,viewName:selectedView.name,moduleName:_this5.currentModuleName,viewId:selectedView.id,id:_this5.isEdit?_this5.model.id:-1,emailTemplate:mailTemplate,scheduleInfo:_this5.scheduleForm.schedule,startTime:_this5.$helpers.getTimeInOrg(_this5.scheduleForm.startTime)},"after"!==_this5.endType){_context4.next=18;break}if(!(_this5.maxCount>0)){_context4.next=15;break}data.maxCount=_this5.maxCount,_context4.next=16;break;case 15:return _context4.abrupt("return");case 16:_context4.next=27;break;case 18:if("on"!==_this5.endType){_context4.next=27;break}if(!_this5.endTime){_context4.next=26;break}if(data.endTime=_this5.$helpers.getTimeInOrg(_this5.endTime),!(data.endTime<data.startTime)){_context4.next=24;break}return _this5.$message({message:_this5.$t("common.wo_report.end_time_schedule"),type:"error"}),_context4.abrupt("return");case 24:_context4.next=27;break;case 26:return _context4.abrupt("return");case 27:_this5.isEdit?(url="/view/editWoScheduledView",data.id=_this5.model.id,data.moduleName=_this5.currentModuleName):url="/view/woScheduleView",api/* API */.bl.post(url,data).then((function(_ref7){var error=_ref7.error;error?_this5.$message.error(error.message||_this5.$t("common.wo_report.view_schedule_failed")):(_this5.$message({message:_this5.$t("common.wo_report.view_schedule_success"),type:"success"}),_this5.$emit("save")),_this5.close()})).finally((function(){_this5.disableSave=!1}));case 29:case"end":return _context4.stop()}}),_callee4)})))()},reset:function(){this.mailJson.to=[],this.mailJson.subject="",this.mailJson.message="",this.endTime=null,this.maxCount=null,this.endType="never"},close:function(){this.$emit("close")}}},forms_NewScheduleViewvue_type_script_lang_js=NewScheduleViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_NewScheduleViewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewScheduleView=component.exports},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/11671.js.map