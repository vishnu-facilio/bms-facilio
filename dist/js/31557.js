(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[31557],{
/***/703117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlarmModel}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlarmModel.vue?vue&type=template&id=5b251d32
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{background:"#fff",width:"400px",height:"420px !important"}},[_vm._m(0),_c("div",{staticClass:"model-container",staticStyle:{background:"#fff"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.category,callback:function($$v){_vm.$set(_vm.alarmRequest,"category",$$v)},expression:"alarmRequest.category"}},_vm._l(_vm.ticketcategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:category.id}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Team/Staff")]),_c("div",{staticStyle:{border:"1px solid #d8dce5",display:"inline-block",position:"relative",width:"100%",height:"40px","line-height":"40px","padding-left":"10px","padding-right":"10px","border-radius":"3px"}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.alarmRequest)))]),_vm._m(1),_c("f-assignment",{attrs:{model:_vm.alarmRequest,viewtype:"form"}})],1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Priority")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.priority,callback:function($$v){_vm.$set(_vm.alarmRequest,"priority",$$v)},expression:"alarmRequest.priority"}},_vm._l(_vm.ticketpriority,(function(priority){return _c("el-option",{key:priority.priority,attrs:{label:priority.displayName,value:parseInt(priority.id)}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Site")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",clearable:"","collapse-tags":"",placeholder:"Sites"},model:{value:_vm.alarmRequest.siteId,callback:function($$v){_vm.$set(_vm.alarmRequest,"siteId",$$v)},expression:"alarmRequest.siteId"}},_vm._l(_vm.sites,(function(site,index){return _c("el-option",{key:index,attrs:{label:site.name,value:site.id}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{background:"#fff"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",on:{click:function($event){return _vm.createWO()}}},[_vm._v("CREATE")])],1)])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{padding:"20px 20px 10px 20px"},attrs:{label:"Create Workorder"}},[_c("div",{staticClass:"setup-modal-title"},[_vm._v("Create workorder")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",{staticStyle:{float:"right"}},[_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{position:"relative",top:"-4px",right:"3px",color:"#c0c4cc"}})])}],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),FAssignment=__webpack_require__(383274),TeamStaffMixin=__webpack_require__(462599),AlarmModelvue_type_script_lang_js={props:["id"],components:{FAssignment:FAssignment/* default */.Z},mixins:[TeamStaffMixin/* default */.Z],data:function(){return{alarmRequest:{category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},siteId:null,priority:null}}},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},sites:function(state){return state.sites},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority}})),methods:{createWO:function(event){this.$emit("submit",this.alarmRequest)},closeDialog:function(){this.reset(),this.$emit("closed")},reset:function(){this.alarmRequest={category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},priority:null}}}},components_AlarmModelvue_type_script_lang_js=AlarmModelvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmModelvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmModel=component.exports},
/***/383274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAssignment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FAssignment.vue?vue&type=template&id=3fd62ade
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showRecommendedUsers&&"view"===_vm.viewtype?_c("el-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",attrs:{"popper-class":"fc-popover-p02 fc-assignment-popover-height",placement:"bottom",width:"320",trigger:"click"},on:{show:function($event){return _vm.loadrecommendedUsers()}}},[_c("div",{staticClass:"row popover-active-block",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"10px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel pointer"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",{staticClass:"fc-search-sticky"},["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"}},[_vm.recommendedUsersList.length&&"workorder"===_vm.moduleName?_c("div",[_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended_users"))+" ")]),_vm._l(_vm.recommendedUsersList,(function(recommendedUser,reusridx){return _c("div",{key:reusridx,on:{click:function($event){return _vm.assignViewWorkOrder(recommendedUser)}}},[_c("div",{staticClass:"group-item-label pointer"},[_vm._v(" "+_vm._s(recommendedUser.name)+" ( "+_vm._s(_vm.userVsTicketCountObj[recommendedUser.id])+" Tickets) ")])])}))],2):_vm._e(),"workorder"===_vm.moduleName&&_vm.recommendedUsersList.length?_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.others"))+" ")]):_vm._e(),_vm._l(_vm.userList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])}))],2):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px","padding-left":"10px"}},_vm._l(_vm.memberList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])})),0):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("div",{key:grpidx,on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticClass:"pL5",staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])]):_vm._e()})),0):_vm._e(),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("showFAssignmentPopover")],2)]):"form"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment"},[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignWorkOrder(group,grpidx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()],1):"view"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",on:{open:function($event){_vm.isPopverVisible=!0},close:function($event){_vm.isPopverVisible=!1}}},[_vm.isPopverVisible?[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()]:_vm._e()],2):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),quasar_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(641358)),vuex_esm=__webpack_require__(420629),FSearch=__webpack_require__(947748),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),FAssignmentvue_type_script_lang_js={props:{model:{},viewtype:{},record:{},form:{},siteId:{default:null},recordId:{},moduleName:{},showRecommendedUsers:{}},data:function(){return{showQuickSearch:!1,loading:!1,quickSearchQuery:null,assignmentValue:"assignmentGroup",selectedName:"",selectedGroup:"",selctedGroupMember:"",userVsTicketCountObj:{},memberList:[],typeVal:this.viewtype,workorder:null,actions:{assign:{loading:!1}},userList:[],recommendedUsersList:[],groupList:[],filtereduserList:[],filteredgroupList:[],filteredmemberList:[],isPopverVisible:!1}},components:{QPopover:quasar_esm/* QPopover */.oe,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QList:quasar_esm/* QList */.tu,FSearch:FSearch/* default */.Z},watch:{record:function(){this.loadWorkorders()},siteId:{handler:function(newVal,oldVal){var getCurrentSiteId=this.getCurrentSiteId,viewtype=this.viewtype;isEqual_default()(newVal,oldVal)||isEqual_default()(newVal,getCurrentSiteId)||isEqual_default()(viewtype,"view")||this.scopeTeamUser()},immediate:!0},isPopverVisible:function(){this.isPopverVisible&&"view"===this.viewtype&&(0,validation/* isEmpty */.xb)(this.userList)&&(0,validation/* isEmpty */.xb)(this.groupList)&&this.scopeTeamUser()},model:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var assignedTo=newVal.assignedTo,assignmentGroup=newVal.assignmentGroup,_ref=assignedTo||{},assignedToId=_ref.id,_ref2=assignmentGroup||{},assignmentGroupId=_ref2.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(this.selectedName=null),(0,validation/* isEmpty */.xb)(assignmentGroupId)&&(this.selectedGroup=null)}}}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusByLabel","getCurrentSiteId","getUser","getGroup"])),created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","workorder").then((function(){_this.loadWorkorders()}))},methods:{memberCount:function(group){var _ref3=group||{},members=_ref3.members;return(members||[]).length},loadrecommendedUsers:function(){var _this2=this;this.loading=!0,this.userVsTicketCountObj={},this.recommendedUsersList=[];var url="v2/recommended/workorder?woId=".concat(this.record.id);this.$http.get(url).then((function(response){0===response.data.responseCode&&response.data.result&&response.data.result.recommendedUsers&&response.data.result.recommendedUsers.forEach((function(element){_this2.recommendedUsersList.push(element.user),_this2.userVsTicketCountObj[element.user.id]=element.reason.no_of_tickets;for(var i=0;i<_this2.userList.length;i++)_this2.userList[i].id===element.user.id&&_this2.userList.splice(i,1)})),_this2.loading=!1})).catch((function(){
// TODO handle errors
}))},loadWorkorders:function(){var objKey="model";"view"===this.viewtype&&(objKey="record");var parent=this[objKey],_ref4=parent||{},assignedTo=_ref4.assignedTo,assignmentGroup=_ref4.assignmentGroup,_ref5=assignedTo||{},assignedToId=_ref5.id,assignedToName=_ref5.name,_ref6=assignmentGroup||{},assignmentGroupId=_ref6.id,assignmentGroupName=_ref6.name;(0,validation/* isEmpty */.xb)(assignedToName)?this.selectedName=(0,validation/* isEmpty */.xb)(assignedToId)?null:this.getUserNameFromList(assignedToId):this.selectedName=assignedToName,(0,validation/* isEmpty */.xb)(assignmentGroupName)?this.assignmentGroupName=(0,validation/* isEmpty */.xb)(assignmentGroupId)?null:this.getGroupNameFromList(assignmentGroupId):this.selectedGroup=assignmentGroupName},assignment:function(value){this.assignmentValue=value},assignWorkOrder:function(assignedObj,index,value){var isValueChanged=!1,model=this.model,$refs=this.$refs,_ref7=model||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup,_ref8=assignedObj||{},id=_ref8.id,name=_ref8.name;if("assignmentGroup"===value){var _ref9=assignmentGroup||{},assignmentGroupId=_ref9.id;(0,validation/* isEmpty */.xb)(name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(id)?null:this.getGroupNameFromList(id):this.selectedGroup=name,(0,validation/* isEmpty */.xb)(assignmentGroup)||(isValueChanged=assignmentGroupId!==id,this.$set(this.model.assignmentGroup,"id",id),this.$set(this.model.assignmentGroup,"name",name)),this.$emit("input",id),this.$emit("value",model),this.groupmemberList(index),isValueChanged&&this.$emit("onChange")}if("assignedTo"===value||"assignedToGroupMember"===value){
// get the assignedTo user and update using 'updateAssignedTo' emit.
var _ref10=assignedTo||{},assignedToId=_ref10.id;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,(0,validation/* isEmpty */.xb)(assignedTo)||(isValueChanged=assignedToId!==id,this.$set(this.model.assignedTo,"id",id),this.$set(this.model.assignedTo,"name",name)),this.$emit("input",id),this.$emit("value",model),$refs["assignedtopopover"]&&$refs["assignedtopopover"].close(),isValueChanged&&this.$emit("onChange",assignedObj)}},groupmemberList:function(groupIndex){this.assignmentValue="assignedToGroupMember",this.memberList=this.groupList[groupIndex].members,this.selectedName=null},assignViewWorkOrder:function(assignedTo,assignmentGroup,index){var _this3=this,$refs=this.$refs,record=this.record,assignObj={},moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref11=moduleState||{},statusId=_ref11.id,_ref12=record||{},recordId=_ref12.id;if(assignObj.id=[recordId],assignedTo){assignObj.assignedTo=assignedTo;var _ref13=assignedTo||{},id=_ref13.id,name=_ref13.name;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,$refs["assignedtopopover"]&&$refs["assignedtopopover"].close()}if(assignmentGroup){assignObj.assignmentGroup=assignmentGroup;var _ref14=assignmentGroup||{},_id=_ref14.id,_name=_ref14.name;(0,validation/* isEmpty */.xb)(_name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(_id)?null:this.getGroupNameFromList(_id):this.selectedGroup=_name,this.groupmemberList(index)}assignObj.status={id:statusId,status:"Assigned"},this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this3.$emit("assignactivity",assignObj),_this3.$dialog.notify(_this3.$t("common.products.workorder_assigned_successfully"))}))},scopeTeamUser:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,siteId,_yield$API$post,data,error,_ref15,groups,users;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={},siteId=_this4.siteId,siteId&&(params.siteId=siteId),_context.next=5,api/* API */.bl.post("v3/group/scopeBySite",params);case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref15=data||{},groups=_ref15.groups,users=_ref15.users,_this4.userList=users||[],_this4.groupList=groups||[]);case 9:case"end":return _context.stop()}}),_callee)})))()},removeTeamWO:function(assignValue){var _assignObj,_this5=this,record=this.record,_ref16=record||{},recordId=_ref16.id,moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref17=moduleState||{},statusId=_ref17.id,assignObj=(_assignObj={id:[recordId]},(0,defineProperty/* default */.Z)(_assignObj,assignValue,{id:-1}),(0,defineProperty/* default */.Z)(_assignObj,"status",{id:statusId,status:"Assigned"}),_assignObj);this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this5.$emit("assignactivity",assignObj),_this5.$dialog.notify(_this5.$t("common.products.workorder_assigned_successfully"))}))},reassign:function(assignValue){var model=this.model,_ref18=model||{},assignmentGroup=_ref18.assignmentGroup,assignedTo=_ref18.assignedTo;"assignmentGroup"===assignValue&&(this.selectedGroup=null,(0,validation/* isEmpty */.xb)(assignmentGroup)||(this.$set(this.model.assignmentGroup,"id",null),this.$set(this.model.assignmentGroup,"name",null))),"assignedTo"===assignValue&&(this.selectedName=null,(0,validation/* isEmpty */.xb)(assignedTo)||(this.$set(this.model.assignedTo,"id",null),this.$set(this.model.assignedTo,"name",null)))},reassignWO:function(assignValue){"assignmentGroup"===assignValue&&(this.selectedGroup=null),"assignedTo"===assignValue&&(this.selectedName=null),this.removeTeamWO(assignValue)},getUserNameFromList:function(id){var userList=this.userList;if((0,validation/* isEmpty */.xb)(userList))return this.getUser(id).name;var user=userList.find((function(user){return user.id===id}));return(0,validation/* isEmpty */.xb)(user)?void 0:this.$getProperty(user,"name",null)},getGroupNameFromList:function(id){var _this6=this,groupList=this.groupList;if((0,validation/* isEmpty */.xb)(groupList))this.$store.dispatch("loadGroups").then((function(){return(_this6.getGroup(id)||{}).name}));else{var group=groupList.find((function(group){return group.id===id}));if(!(0,validation/* isEmpty */.xb)(group))return this.$getProperty(group,"name",null)}}}},components_FAssignmentvue_type_script_lang_js=FAssignmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAssignmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAssignment=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/114857:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Timer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Timer.vue?vue&type=template&id=79408276
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-timer"},[_c("div",{staticClass:"inline_flex"},[_vm.days>0?_c("div",{staticClass:"t-days"},[_vm.days<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.days)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.days))]),_vm.days<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.day"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.days"))+" ")])]):_vm._e(),_vm.days>0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_c("div",{staticClass:"t-hours"},[_vm.hours<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.hours)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.hours))]),_vm.hours<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hour"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hours"))+" ")])]),_c("div",{staticClass:"t-separate"},[_vm._v(":")]),_c("div",{staticClass:"t-mins"},[_vm.mins<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.mins)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.mins))]),_vm.mins<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.min"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.mins"))+" ")])]),_vm.days<=0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_vm.days<=0?_c("div",{staticClass:"t-secs"},[_vm.secs<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.secs)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.secs))]),_vm.secs<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.sec"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.secs"))+" ")])]):_vm._e()])])},staticRenderFns=[],Timervue_type_script_lang_js={props:["time","color","twoDigits","staticTime","static","duration"],data:function(){return{days:"",hours:"",mins:"",secs:"",bgColor:"color: "+this.color+";",intervalObj:null}},watch:{time:function(){this.initCounter()},staticTime:{handler:function(newValue,oldValue){newValue!==oldValue&&this.staticTime&&this.initCounter()}}},mounted:function(){this.initCounter()},methods:{initCounter:function(){var date,dateObj=new Date(this.time),currentTime=Date.now();if(this.staticTime){this.days="",this.hours="",this.mins="",this.secs="",this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null),date=dateObj/1e3,date<0&&date>-2&&(date=0);var d=Math.floor(date/86400),h=Math.floor(date%86400/3600),m=Math.floor(date%3600/60),s=Math.floor(date%3600%60);this.days=d>=0?d:0,this.hours=h>=0?h:0,this.mins=m>=0?m:0,this.secs=s>=0?s:0}else if(this.static){this.days="",this.hours="",this.mins="",this.secs="",date=this.duration,date<0&&date>-2&&(date=0);var _d=Math.floor(date/86400),_h=Math.floor(date%86400/3600),_m=Math.floor(date%3600/60),_s=Math.floor(date%3600%60);this.days=_d>=0?_d:0,this.hours=_h>=0?_h:0,this.mins=_m>=0?_m:0,this.secs=_s>=0?_s:0}else{date=(currentTime-dateObj)/1e3,date<0&&date>-2&&(date=0);var _d2=Math.floor(date/86400),_h2=Math.floor(date%86400/3600),_m2=Math.floor(date%3600/60),_s2=Math.floor(date%3600%60);this.days=_d2>=0?_d2:0,this.hours=_h2>=0?_h2:0,this.mins=_m2>=0?_m2:0,this.secs=_s2>=0?_s2:0,this.startCounter()}},startCounter:function(){this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null);var self=this;this.intervalObj=setInterval((function(){self.secs++,self.secs>=60&&(self.secs=0,self.mins++),self.mins>=60&&(self.mins=0,self.hours++),self.hours>=24&&(self.hours=0,self.days++)}),1e3)}}},components_Timervue_type_script_lang_js=Timervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Timervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Timer=component.exports},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/731557:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return OperationalSummaryOverview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/operational/OperationalSummaryOverview.vue?vue&type=template&id=a9f7ebf2&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-v1-alarm-overview",staticStyle:{height:"auto","overflow-y":"scroll"}},[_vm.alarmOverviewLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.alarmOverviewLoading,size:"80"}})],1):_vm.alarm&&_vm.occurrence?_c("div",{staticClass:"fc__layout__align fc__asset__main__header pT20 pB20 pL20 pR20 position-relative",staticStyle:{width:"auto","align-items":"center !important","border-bottom":"none"}},[_vm.alarm?_c("div",[_c("div",{staticClass:"wos-id",attrs:{title:"Back"}},[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.alarm.id))])]),_c("div",{staticClass:"fc-black-22 fw3 flex-middle"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n            placement: 'top',\n            animation: 'shift-away',\n            arrow: true,\n          }"}],staticClass:"max-width550px fw4 flex-middle",attrs:{title:_vm.alarm.subject}},[_vm._v(" "+_vm._s(_vm.alarm.subject)+" "),_vm.alarm.severity?_c("div",{staticClass:"flex-middle mT10 pL10"},[_c("div",{staticClass:"uppercase secondary-color summaryseverityTag f11",style:{"background-color":_vm.getAlarmSeverity(_vm.alarm.severity.id).color}},[_vm._v(" "+_vm._s(_vm.alarm.severity.id?_vm.getAlarmSeverity(_vm.alarm.severity.id).displayName:"---")+" ")])]):_vm._e()])])]):_vm._e(),_c("div",{staticClass:"display-flex mR10"},[!_vm.occurrence.acknowledged&&_vm.isActiveAlarm(_vm.alarm)&&_vm.$hasPermission("alarm:ACKNOWLEDGE_ALARM")?_c("el-button",{staticClass:"fc-btn-green-lg-fill",on:{click:function($event){return _vm.acknowledgeAlarms()}}},[_vm._v("Acknowledge")]):_vm.isActiveAlarm(_vm.alarm)||_vm.occurrence.acknowledged?_vm._e():_c("div",{staticClass:"q-item-label fc-summary-ack status-btn1 pR10 pointer"},[_vm._v(" Unacknowledged ")]),_c("div",{staticClass:"flRight fc-el-button mL10"},[_vm.isActiveAlarm(_vm.alarm)&&_vm.$hasPermission("alarm:CLEAR_ALARM")?_c("el-button",{staticClass:"fc-btn-green-lg-border",on:{click:function($event){return _vm.updateAlarmsStatus()}}},[_vm._v("CLEAR")]):_vm._e()],1),_vm.alarmOverviewLoading?_vm._e():_c("div",{staticClass:"flex-middle z-10 alarm-timer"},[_c("div",{staticClass:"fc-black-12"},[_vm._v("Duration:")]),_vm.occurrence&&_vm.occurrence.createdTime&&-1===_vm.occurrence.clearedTime?_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+_vm.alarm.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n            html: '#timer_popover_' + alarm.id,\n            distance: 0,\n            interactive: true,\n            theme: 'light',\n            animation: 'scale',\n            arrow: true,\n          }"}],staticClass:"fc-red-new bold f14 p10 alarm-timer-duration",attrs:{time:_vm.occurrence.createdTime,twoDigits:!0,title:_vm._f("formatDate")(_vm.occurrence.createdTime)}}):_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+_vm.alarm.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n            html: '#timer_popover_' + alarm.id,\n            distance: 0,\n            interactive: true,\n            theme: 'light',\n            animation: 'scale',\n            arrow: true,\n          }"}],staticClass:"fc-red-new bold f14 p10 alarm-cleared-duration",attrs:{time:_vm.occurrence.clearedTime-_vm.occurrence.createdTime,staticTime:!0,twoDigits:!0,title:_vm._f("formatDate")(_vm.occurrence.clearedTime-_vm.occurrence.createdTime)}})],1)],1)]):_vm._e(),_vm.alarm?_c("page",{key:_vm.alarm.id,attrs:{module:_vm.currentModuleName,notesModuleName:_vm.notesModuleName,id:_vm.alarm.id,details:{alarm:_vm.alarm,occurrence:_vm.occurrence,id:_vm.alarm.id},primaryFields:_vm.primaryFields}}):_vm._e(),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.showCreateWo?_c("el-dialog",{staticClass:"dialog-header-remove export-dialog",attrs:{width:"30%",visible:_vm.showCreateWo,"content-css":{padding:"0px",background:"#f7f8fa",Width:"10vw",Height:"30vh"}},on:{"update:visible":function($event){_vm.showCreateWo=$event}}},[_c("alarm-model",{ref:"confirmWoModel",on:{submit:_vm.createWO,closed:_vm.closeWoDialog}})],1):_vm._e(),_vm.showAssetExport?_c("el-dialog",{staticClass:"dialog-header-remove export-dialog",attrs:{visible:_vm.showAssetExport,width:"30%"},on:{"update:visible":function($event){_vm.showAssetExport=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v("Export Alarm summary")])])]),_c("div",{staticClass:"export-body-dailog"},[_c("div",[_c("el-checkbox",{staticStyle:{"padding-bottom":"10px","padding-left":"40px","padding-top":"10px"},attrs:{checked:"",disabled:""}},[_vm._v("All Events")])],1),_c("el-checkbox-group",{staticClass:"check-padding-remove",model:{value:_vm.selectedFields,callback:function($$v){_vm.selectedFields=$$v},expression:"selectedFields"}},[_c("div",{staticClass:"row"},_vm._l(_vm.assetFields,(function(field){return _c("el-checkbox",{key:field.id,staticClass:"check-width",attrs:{label:field.id}},[_vm._v(_vm._s(field?field.displayName:""))])})),1)])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showAssetExport=!1}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.exportEvent()}}},[_vm._v("EXPORT DATA")])],1)]):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),PageBuilder=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(760218)),AlarmMixin=__webpack_require__(952274),Timer=__webpack_require__(114857),AlarmModel=__webpack_require__(703117),NewReportHelper=__webpack_require__(562023),vuex_esm=__webpack_require__(420629),OperationalSummaryOverviewvue_type_script_lang_js={components:{Page:PageBuilder/* default */.Z,Timer:Timer/* default */.Z,AlarmModel:AlarmModel/* default */.Z},mixins:[AlarmMixin/* default */.Z,NewReportHelper/* default */.Z],mounted:function(){var _this=this;this.$store.dispatch("newAlarm/fetchAlarm",{id:this.alarmId}).then((function(d){_this.alarmOverviewLoading=!1}))},props:["moduleName"],data:function(){return{notesModuleName:"basealarmnotes",showHistoryDialog:!1,thresholddialog:!1,showCreateWo:!1,alarmOverviewLoading:!0,isEditLoading:!1,selectedRules:null,selectedRule:null,showAssetExport:!1,assetFields:[],exportDownloadUrl:null,isLoading:!1,currentModuleName:"operationalarm",
// currentModuleName: this.moduleName ? this.moduleName :'newreadingalarm',
primaryFields:[],selectedFields:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({severityStatus:function(state){return state.alarmSeverity}})),(0,vuex_esm/* mapGetters */.Se)(["getAlarmSeverity"])),{},{alarm:function(){return this.$store.state.newAlarm.currentAlarm}// currentModuleName() {
//   return this.moduleName
// },
}),watch:{alarmId:function(){this.$store.dispatch("newAlarm/fetchAlarm",{id:this.alarmId})}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({acknowledgeAlarm:"newAlarm/acknowledgeAlarm"})),{},{updateAlarmsStatus:function(){this.updateAlarmStatus({occurrence:this.occurrence,alarm:this.alarm,clearedTime:Date.now(),severity:this.severityStatus.find((function(status){return"Clear"===status.severity}))}),this.alarm.clearedBy=this.$account.user},goBack:function(){window.history.go(-1)},closeWoDialog:function(){this.showCreateWo=!1},isActiveAlarm:function(alarm){return"Clear"!==this.getAlarmSeverity(alarm.severity.id).severity},loadAssetDetails:function(){this.loadAlarmFields();
// this.loadRCAReport()
},loadAlarmFields:function(){var _this2=this;this.$util.loadFields("operationAlarm",!1).then((function(fields){_this2.alarmFields=fields}))}})},operational_OperationalSummaryOverviewvue_type_script_lang_js=OperationalSummaryOverviewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(operational_OperationalSummaryOverviewvue_type_script_lang_js,render,staticRenderFns,!1,null,"a9f7ebf2",null)
/* harmony default export */,OperationalSummaryOverview=component.exports},
/***/583972:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3aed7174c314bbc14fee9c5cd51e20fa.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/31557.js.map