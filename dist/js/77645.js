(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[77645],{
/***/490966:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ColumnCustomization}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ColumnCustomization.vue?vue&type=template&id=3753cf18
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.showDialog,fullscreen:!0,"custom-class":"cc-dialog",title:_vm.$t("common._common.column_settings"),"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"scrollable",staticStyle:{padding:"20px 0","max-height":"85vh"}},[_vm.fixedFields&&_vm.fixedFields.length?_c("div",{staticClass:"fixed-column"},[_c("el-checkbox-group",{model:{value:_vm.selectedFixedColumns,callback:function($$v){_vm.selectedFixedColumns=$$v},expression:"selectedFixedColumns"}},_vm._l(_vm.fixedFields,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",staticStyle:{border:"none"},attrs:{disabled:field.disabled,label:field.fieldId}},[_vm._v(_vm._s(_vm.getDisplayName(field)))])})),1)],1):_vm._e(),_c("el-divider",{staticClass:"mT0 mB20"}),_c("el-checkbox-group",{staticClass:"fc-column-checkbox pL20 pR20 pT0 pB0",model:{value:_vm.selectedColumns,callback:function($$v){_vm.selectedColumns=$$v},expression:"selectedColumns"}},[_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.sortedFields,"data-parent":"default"}},_vm._l(_vm.sortedFields,(function(field){return _c("el-checkbox",{key:field.name,staticClass:"column-item",class:{checkboxSelected:!0===field.edit},attrs:{label:field.name,value:field.name}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("inline-svg",{staticClass:"vertical-middle cursor-drag icon-right column-drag-icon",staticStyle:{cursor:"-webkit-grabbing"},attrs:{src:"drag-drop",iconClass:"icon icon-sm-md"}})],1),_c("el-col",{attrs:{span:22}},[field.edit?_c("el-input",{ref:"columnRenameInp",refInFor:!0,staticClass:"fc-input-border-remove width90 column-name-change-input",attrs:{placeholder:"Change your column name",autofocus:!0},on:{blur:function($event){field.edit=!1,_vm.$emit("update")},keyup:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter"))return null;field.edit=!1,_vm.$emit("update")}},model:{value:field.columnDisplayName,callback:function($$v){_vm.$set(field,"columnDisplayName",$$v)},expression:"field.columnDisplayName"}}):_c("div",{},[_vm._v(" "+_vm._s(field.columnDisplayName)+" "),field.field&&field.field.displayName!==field.columnDisplayName?_c("span",{staticClass:"fc-grey-text12 pL5"},[_vm._v(_vm._s(field.field.displayName))]):_vm._e()])],1),_c("el-col",{staticClass:"visibility-hide-actions text-right",attrs:{span:1}},[_c("i",{staticClass:"el-icon-edit pR10 fc-grey3-text14 pL25 column-edit-icon",on:{click:function($event){return $event.stopPropagation(),$event.preventDefault(),_vm.showRenameColumn(field)}}})])],1)],1)})),1),_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.selectedlookupColumns,"data-parent":_vm.selectedLookup}},_vm._l(_vm.selectedlookupColumns,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",attrs:{label:field.fieldId,"data-field-id":field.fieldId},on:{change:function($event){return _vm.onLookupSelected(field)}}},[_vm._v(" "+_vm._s(field.columnDisplayName)+" ")])})),1)],1)],1),_c("div",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving,disabled:_vm.isSaving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.isSaving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),vuex_esm=(__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(339772),__webpack_require__(947522),__webpack_require__(420629)),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),validation=__webpack_require__(990260),jquery=__webpack_require__(619755),jquery_default=__webpack_require__.n(jquery),columnConfigUtil=__webpack_require__(486613),ColumnCustomizationvue_type_script_lang_js={props:["visible","moduleName","viewName","relatedViewDetail","relatedMetaInfo","refreshRelatedList","excludeMainField"],data:function(){return{selectedColumns:[],selectedFixedColumns:[],showDialog:this.visible,sortedFields:this.allFields,nonSelectableColumns:["localId","photoId"],lookupMetaColumns:{},selectedLookup:"",dragOptions:{handle:".icon-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},columnNameShow:!1,isSaving:!1,editedColumn:null}},components:{draggable:vuedraggable_umd_default()},created:function(){var _this$nonSelectableCo,nonSelectableColumns=this.$getProperty(this.columnConfig,"nonSelectableColumns");(0,validation/* isEmpty */.xb)(nonSelectableColumns)||(_this$nonSelectableCo=this.nonSelectableColumns).push.apply(_this$nonSelectableCo,(0,toConsumableArray/* default */.Z)(nonSelectableColumns));this.sortedFields=this.allFields},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({stateMetaInfo:function(state){return state.view.metaInfo},stateViewDetail:function(state){return state.view.currentViewDetail}})),{},{metaInfo:function(){var stateMetaInfo=this.stateMetaInfo,relatedMetaInfo=this.relatedMetaInfo;return(0,validation/* isEmpty */.xb)(relatedMetaInfo)?stateMetaInfo:relatedMetaInfo},viewDetail:function(){var stateViewDetail=this.stateViewDetail,relatedViewDetail=this.relatedViewDetail;return(0,validation/* isEmpty */.xb)(relatedViewDetail)?stateViewDetail:relatedViewDetail},currentView:function(){return this.viewName?this.viewName:this.$route.params.viewname?this.$route.params.viewname:"all"},columnConfig:function(){var _ref=this.$attrs||{},columnConfig=_ref.columnConfig;return(0,validation/* isEmpty */.xb)(columnConfig)?(0,columnConfigUtil/* getColumnConfig */.U)(this.moduleName):columnConfig},fixedColumns:function(){
// Will be disabled. User wont be able to select
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedColumns=columnConfig.fixedColumns;return fixedColumns}return[]},fixedSelectableColumns:function(){
// Cannot change the order
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedSelectableColumns=columnConfig.fixedSelectableColumns;return fixedSelectableColumns}return[]},availableColumns:function(){var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var availableColumns=columnConfig.availableColumns;return availableColumns}return[]},metaColumns:function(){var _this=this,columns=[];return this.metaInfo&&this.metaInfo.fields&&this.viewDetail&&(columns=this.metaInfo.fields.map((function(field){return field.columnDisplayName=_this.viewDetail.defaultModuleFields&&_this.viewDetail.defaultModuleFields[field.name]?_this.viewDetail.defaultModuleFields[field.name].columnDisplayName:field.displayName,field}))),columns},allFields:function(){var _this2=this,viewFields=this.viewFields.filter((function(field){return 17!==_this2.$getProperty(field,"field.dataType")})),metaColumns=this.metaColumns.filter((function(field){return!_this2.viewFields.find((function(val){return val.name===field.name}))&&!(_this2.nonSelectableColumns||[]).includes(field.name)&&(!(_this2.availableColumns||{}).length||-1!==_this2.availableColumns.indexOf(field.name)||!field.default)&&17!==field.dataType})),columns=[].concat((0,toConsumableArray/* default */.Z)(viewFields),(0,toConsumableArray/* default */.Z)(metaColumns)).filter((function(field){return!(_this2.allFixedColumns||[]).includes(field.name)}));return columns},viewFields:function(){var _this3=this,columns=[];return this.viewDetail&&this.viewDetail.fields&&(columns=this.viewDetail.fields.map((function(vf){vf.name=(vf.field||{}).name||vf.fieldName,vf.fieldId=(vf.field||{}).fieldId;var defaultColumnName=_this3.viewDetail.defaultModuleFields&&_this3.viewDetail.defaultModuleFields[vf.name]?_this3.viewDetail.defaultModuleFields[vf.name].columnDisplayName:null;return vf.columnDisplayName=vf.columnDisplayName||defaultColumnName||vf.field.displayName,vf}))),columns},fixedFields:function(){var _this4=this;return this.metaColumns.filter((function(field){return(_this4.allFixedColumns||[]).includes(field.name)})).map((function(field){return field.disabled=(_this4.fixedColumns||[]).includes(field.name),field}))},allFixedColumns:function(){return(0,validation/* isEmpty */.xb)(this.fixedSelectableColumns)?this.fixedColumns:this.fixedColumns.concat(this.fixedSelectableColumns)},lookupList:function(){var _this5=this,fields=[];return(this.columnConfig||{}).lookupToShow&&this.metaColumns&&(fields=this.metaColumns.filter((function(field){return field.lookupModule&&(!_this5.columnConfig.lookupToShow.length||(_this5.columnConfig.lookupToShow||[]).includes(field.name))}))),fields},selectedlookupColumns:function(){var _this6=this;return this.lookupMetaColumns[this.selectedLookup]?this.lookupMetaColumns[this.selectedLookup].filter((function(field){return-1===_this6.sortedFields.findIndex((function(vf){return vf.fieldId===field.fieldId}))})).map((function(field){return field.columnDisplayName=field.displayName,field.parentFieldId=_this6.selectedLookupObj.fieldId,field})):[]},selectedLookupObj:function(){var _this7=this;return this.lookupList.find((function(field){return field.name===_this7.selectedLookup}))},mainField:function(){return this.metaColumns.find((function(field){return field.mainField}))}}),watch:{visible:function(val,oldVal){val&&this.reInit(),this.showDialog=val},showDialog:function(val,oldVal){this.$emit("update:visible",val)},allFields:function(val){this.sortedFields=val}},methods:{showRenameColumn:function(field){var _this8=this;this.$set(field,"edit",!0),this.$nextTick((function(){_this8.$refs["columnRenameInp"][0].focus()}))},save:function(){var _this9=this;this.isSaving=!0;var excludeMainField=this.excludeMainField,fields=[];fields=(0,validation/* isEmpty */.xb)(excludeMainField)?[{fieldId:this.mainField.id}].concat((0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}})))):(0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}}))),fields=[].concat((0,toConsumableArray/* default */.Z)(fields),(0,toConsumableArray/* default */.Z)(this.selectedFixedColumns.map((function(id){return{fieldId:id}}))));var self=this;this.$store.dispatch("view/customizeColumns",{moduleName:this.moduleName,viewName:this.currentView,fields:fields}).then((function(){self.isSaving=!1,self.showDialog=!1,self.$emit("refreshRelatedList"),self.$message.success(self.$t("common._common.view_updated_successfully"))})).catch((function(error){_this9.$message.error(error.message||_this9.$t("common._common.error_occured"))}))},editColumn:function(){this.editedColumn=this.field},reInit:function(){var _this10=this;this.selectedLookup="",this.selectedColumns=[],this.selectedFixedColumns=[],this.viewFields.forEach((function(vf){(_this10.allFixedColumns||[]).includes(vf.name)&&-1===vf.parentFieldId?(_this10.fixedSelectableColumns||[]).includes(vf.name)&&_this10.selectedFixedColumns.push(vf.fieldId):_this10.selectedColumns.push(vf.name)}))},loadModuleMeta:function(){var _this11=this;this.selectedLookup&&!this.lookupMetaColumns[this.selectedLookup]&&this.$http.get("/module/meta?moduleName="+this.selectedLookupObj.lookupModule.name).then((function(response){_this11.$set(_this11.lookupMetaColumns,_this11.selectedLookup,response.data.meta.fields)}))},getDisplayName:function(field){var displayName=field.columnDisplayName;if(this.viewDetail&&this.viewDetail.fields){var vf=this.viewDetail.fields.find((function(vf){return vf.name===field.name}));vf&&(displayName=vf.columnDisplayName||displayName)}return displayName},onLookupSelected:function(field){this.animate(field.fieldId,(function(){this.selectedlookupColumns=this.selectedlookupColumns.filter((function(lf){return lf.fieldId!==field.fieldId})),field.columnDisplayName+=" ("+this.selectedLookupObj.displayName+")",this.sortedFields.push(field)}))},animate:function(fieldId,cbk){var $selectedElement=jquery_default()('[data-field-id="'+fieldId+'"]'),oldOffset=$selectedElement.offset();$selectedElement.appendTo(jquery_default()("[data-parent='default']"));var newOffset=$selectedElement.offset(),temp=$selectedElement.clone().appendTo("body");temp.css({position:"absolute",left:oldOffset.left,top:oldOffset.top,zIndex:3e3,width:$selectedElement[0].offsetWidth}),$selectedElement.css("visibility","hidden");var self=this;temp.animate({top:newOffset.top,left:newOffset.left},350,(function(){
// $selectedElement.css('visibility', 'visible')
$selectedElement.remove(),temp.remove(),cbk.call(self)}))}}},components_ColumnCustomizationvue_type_script_lang_js=ColumnCustomizationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ColumnCustomizationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ColumnCustomization=component.exports},
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/579814:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FilePreviewColumn}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FilePreviewColumn.vue?vue&type=template&id=423924f8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.canShowFileDisplay?_c("div",{staticClass:"d-flex file-column",on:{click:function($event){return _vm.openAttachment()}}},[_c("a",{staticClass:"truncate-text"},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue)+" ")])]):_c("div",[_vm._v("---")]),_vm.showPreview&&_vm.selectedFile?_c("preview-file",{attrs:{visibility:_vm.showPreview,previewFile:_vm.selectedFile,files:[_vm.selectedFile]},on:{"update:visibility":function($event){_vm.showPreview=$event}}}):_vm._e()],1)},staticRenderFns=[],validation=(__webpack_require__(434284),__webpack_require__(990260)),PreviewFile=__webpack_require__(720096),FilePreviewColumnvue_type_script_lang_js={props:["field","record","isV2"],components:{PreviewFile:PreviewFile/* default */.Z},data:function(){return{selectedFile:null,showPreview:!1}},computed:{getColumnDisplayValue:function(){var fileName,field=this.field,record=this.record,isV2=this.isV2,data=this.getRecordData(field,record);return fileName=isV2?data["".concat(field.name,"FileName")]:record["".concat(field.name,"FileName")],(0,validation/* isEmpty */.xb)(fileName)?"---":fileName},canShowFileDisplay:function(){var field=this.field,record=this.record,isV2=this.isV2,data=this.getRecordData(field,record);return isV2?!(0,validation/* isEmpty */.xb)(data["".concat(field.name,"FileName")]):!(0,validation/* isEmpty */.xb)(record["".concat(field.name,"FileName")])}},methods:{openAttachment:function(){var field=this.field,record=this.record,isV2=this.isV2,data=this.getRecordData(field,record);isV2?(this.selectedFile={contentType:data["".concat(field.name,"ContentType")],fileName:data["".concat(field.name,"FileName")],downloadUrl:data["".concat(field.name,"DownloadUrl")],previewUrl:data["".concat(field.name,"Url")]},this.showPreview=!0):(this.selectedFile={contentType:record["".concat(field.name,"ContentType")],fileName:record["".concat(field.name,"FileName")],downloadUrl:record["".concat(field.name,"DownloadUrl")],previewUrl:record["".concat(field.name,"Url")]},this.showPreview=!0)},getRecordData:function(field,record){var data;return data=field.default||(0,validation/* isEmpty */.xb)(record.data)?record:record.data,data}}},list_FilePreviewColumnvue_type_script_lang_js=FilePreviewColumnvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FilePreviewColumnvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FilePreviewColumn=component.exports},
/***/831607:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return InsuranceSpecialFieldsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/InsuranceSpecialFieldsList.vue?vue&type=template&id=d063024a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["insurance"===_vm.field.name?_c("div",[_vm.moduleData.insuranceFileName?_c("div",[_c("span",{staticClass:"insurance-link",on:{click:function($event){return _vm.downloadAttachment(_vm.moduleData.insuranceUrl)}}},[_vm._v(_vm._s(_vm.moduleData.insuranceFileName))])]):_c("div",[_vm._v("---")])]):_vm._e()])},staticRenderFns=[],InsuranceSpecialFieldsListvue_type_script_lang_js={props:["field","moduleData"],methods:{downloadAttachment:function(url){window.open(url)}}},list_InsuranceSpecialFieldsListvue_type_script_lang_js=InsuranceSpecialFieldsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_InsuranceSpecialFieldsListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,InsuranceSpecialFieldsList=component.exports},
/***/478878:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return TermsSpecialFieldsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/TermsSpecialFieldsList.vue?vue&type=template&id=77d5f27f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-s-order pointer edit-icon-color",attrs:{"data-arrow":"true",title:"Long Description"},on:{click:function($event){return _vm.openLongDesc()}}})]),_vm.longDescVisibility?_c("LongDescriptionEditor",{attrs:{content:_vm.$getProperty(_vm.terms,"longDesc"),disabled:!_vm.$hasPermission("termsandconditions:UPDATE")},on:{onSave:_vm.updateLongDescriptionData,onClose:function($event){_vm.longDescVisibility=!1}}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),RichTextAreaEditor=__webpack_require__(974514),api=__webpack_require__(32284),eventBus=__webpack_require__(398011),TermsSpecialFieldsListvue_type_script_lang_js={props:["terms"],components:{LongDescriptionEditor:RichTextAreaEditor/* default */.Z},data:function(){return{longDescVisibility:!1}},mounted:function(){},methods:{openLongDesc:function(){this.longDescVisibility=!0},updateLongDescriptionData:function(longDesc){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$updateReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={id:_this.$getProperty(_this,"terms.id"),data:{longDesc:longDesc}},_context.next=3,api/* API */.bl.updateRecord("termsandconditions",params);case 3:_yield$API$updateReco=_context.sent,error=_yield$API$updateReco.error,error?_this.$message.error(error.message||"Error Occured"):(_this.$message.success(_this.$t("common.products.long_description_edited_successfully")),_this.longDescVisibility=!1,eventBus/* eventBus */.Y.$emit("refesh-parent"));case 6:case"end":return _context.stop()}}),_callee)})))()}}},list_TermsSpecialFieldsListvue_type_script_lang_js=TermsSpecialFieldsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_TermsSpecialFieldsListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TermsSpecialFieldsList=component.exports},
/***/800926:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return VendorDocumentSpecialFieldsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/VendorDocumentSpecialFieldsList.vue?vue&type=template&id=788989ee
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["document"===_vm.field.name?_c("div",[_vm.moduleData.documentFileName?_c("div",[_c("span",{staticClass:"insurance-link",on:{click:function($event){return _vm.previewAttachment(_vm.moduleData.documentUrl)}}},[_vm._v(_vm._s(_vm.moduleData.documentFileName))])]):_c("div",[_vm._v("---")])]):_vm._e(),_c("el-dialog",{staticClass:"f-list-attachment-dialog",attrs:{visible:_vm.visibility,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_vm.visibility?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.getFormattedFile,files:[_vm.getFormattedFile]},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)],1)},staticRenderFns=[],PreviewFile=__webpack_require__(720096),VendorDocumentSpecialFieldsListvue_type_script_lang_js={props:["field","moduleData"],components:{PreviewFile:PreviewFile/* default */.Z},data:function(){return{visibility:!1}},mounted:function(){},computed:{getFormattedFile:function(){return{contentType:this.moduleData.documentContentType||"",fileName:this.moduleData.documentName,previewUrl:this.moduleData.documentUrl,downloadUrl:this.moduleData.documentDownloadUrl}}},methods:{previewAttachment:function(fileUrl){fileUrl&&(this.visibility=!0)}}},list_VendorDocumentSpecialFieldsListvue_type_script_lang_js=VendorDocumentSpecialFieldsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_VendorDocumentSpecialFieldsListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,VendorDocumentSpecialFieldsList=component.exports},
/***/77645:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RelatedListWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/RelatedListWidget.vue?vue&type=template&id=0300c1c6&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"relatedListContainer",staticClass:"related-list-container"},[_c("div",{staticClass:"related-list-header"},[_c("div",{staticClass:"header justify-content-space"},[_c("div",{staticClass:"widget-title d-flex flex-direction-column justify-center"},[_vm._v(" "+_vm._s(_vm.relatedRecordDisplayName)+" ")]),_vm.$validation.isEmpty(_vm.modulesList)?_vm._e():[_vm.showMainFieldSearch?_c("el-input",{ref:"mainFieldSearchInput",staticClass:"fc-input-full-border2 width-auto mL-auto",attrs:{"suffix-icon":"el-icon-search"},on:{blur:_vm.hideMainFieldSearch},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}}):_c("span",{staticClass:"self-center mL-auto",on:{click:_vm.openMainFieldSearch}},[_vm.widgetParams.hideSearchField&&_vm.hideSearchFieldList.includes(_vm.moduleName)?_vm._e():_c("inline-svg",{staticClass:"vertical-middle cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm mT5 mR5 search-icon"}})],1),_vm.$validation.isEmpty(_vm.totalCount)||_vm.$validation.isEmpty(_vm.modulesList)||_vm.hideSearchFieldList.includes(_vm.moduleName)?_vm._e():_c("span",{staticClass:"separator self-center"},[_vm._v("|")]),_c("pagination",{staticClass:"self-center",attrs:{currentPage:_vm.page,total:_vm.totalCount,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],_vm.canShowCreate?[_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-button bR3 f12 fc-sites-btn el-button--text sh-button sh-button-add button-add sp-sh-btn-sm",attrs:{icon:"el-icon-plus",type:"text","data-size":"small"},on:{click:function($event){return _vm.openFormCreation()}}})]:_vm.canShowQuickCreate?_c("span",{staticClass:"self-center"},[_c("el-button",{staticClass:"fc-create-btn mR10",on:{click:_vm.quickAddRecordToggle}},[_c("i",{staticClass:"el-icon-plus"})])],1):_vm._e()],2)]),_c("div",{staticClass:"position-relative"},[_vm.isLoading?_c("div",{staticClass:"loading-container d-flex justify-content-center"},[_c("spinner",{attrs:{show:_vm.isLoading}})],1):_vm.$validation.isEmpty(_vm.modulesList)?_c("div",{staticClass:"flex-middle justify-content-center wo-flex-col flex-direction-column",staticStyle:{"margin-top":"4%"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"pT10 fc-black-dark f18 bold pB50"},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_mod_available"))+" "+_vm._s(_vm.moduleDisplayName?_vm.moduleDisplayName:_vm.moduleName)+" "+_vm._s(_vm.$t("common._common.available"))+" ")])],1):_c("div",{staticClass:"fc-list-view fc-table-td-height"},[_vm.canShowColumnIcon?_c("div",{staticClass:"view-column-chooser",on:{click:_vm.showColumnCustomization}},[_c("img",{staticClass:"column-customization-icon",attrs:{src:__webpack_require__(266707)}})]):_vm._e(),_c("el-table",{staticClass:"related-list-widget-table",staticStyle:{width:"100%"},attrs:{data:_vm.modulesList,fit:!0,height:_vm.tableHeight}},[_vm.$validation.isEmpty(_vm.mainFieldColumn)?_vm._e():_c("el-table-column",{attrs:{label:_vm.getColumnHeaderLabel(_vm.mainFieldColumn),prop:_vm.mainFieldColumn.name,fixed:"","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"table-subheading",on:{click:function($event){return _vm.redirectToOverview(item.row)}}},[_c("div",{staticClass:"d-flex"},[item.row.photoId?_c("div",[item.row.photoId>0?_c("img",{staticClass:"img-container mR10",attrs:{src:_vm.getImage(item.row.photoId)}}):_c(_vm.avatarMap[_vm.moduleName]?_vm.avatarMap[_vm.moduleName]:"Avatar",{tag:"component",staticClass:"mR10",attrs:{size:"lg",name:item.row.name,asset:item.row,color:"#4273e9"}})],1):_vm._e(),_c("div",{staticClass:"self-center name bold"},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(_vm.mainFieldColumn,item.row)||"---")+" ")])])])]}}],null,!1,1190894761)}),_vm._l(_vm.filteredViewColumns,(function(field,index){return _c("el-table-column",{key:index,attrs:{prop:field.name,label:_vm.getColumnHeaderLabel(field),align:"DECIMAL"===(field.field||{}).dataTypeEnum?"right":"left","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm.isSpecialHandlingField(field)?_c("keep-alive",[_c((_vm.listComponentsMap[_vm.moduleName]||{}).componentName,{tag:"component",attrs:{field:field,moduleData:scope.row},on:{refreshList:_vm.refreshRelatedList}})],1):_vm.isFileTypeField((field||{}).field)?_c("div",[_c("FilePreviewColumn",{attrs:{field:field,record:scope.row,isV2:!0}})],1):_vm.isMultiCurrencyField((field||{}).field)?_c("div",[_c("CurrencyPopOver",{attrs:{field:field,details:scope.row,showInfo:!1}})],1):_c("div",{staticClass:"table-subheading",class:{"text-right":"DECIMAL"===(field.field||{}).dataTypeEnum}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(field,scope.row)||"---")+" ")])]}}],null,!0)})})),["vendorDocuments"].includes(_vm.moduleName)||155===_vm.$org.id&&"workorder"===_vm.moduleName?_c("el-table-column",{attrs:{width:"210"},scopedSlots:_vm._u([{key:"default",fn:function(record){return[_c("div",{staticClass:"text-center"},[_c("el-button",{staticClass:"fc-wo-border-btn visibility-hide-actions mR20",on:{click:function($event){return _vm.openStateTransitionComponent(record.row)}}},[_vm._v(_vm._s(_vm.$t("common.profile.change_status")))])],1)]}}],null,!1,903805172)}):_vm._e(),_vm.canShowDelete||_vm.canShowEdit?_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{prop:"",label:"",width:"130"},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"text-center"},[_vm.canShowEdit?_c("span",{on:{click:function($event){return _vm.editItem(item.row.id)}}},[_c("inline-svg",{staticClass:"edit-icon-color visibility-hide-actions",attrs:{src:"svgs/edit",iconClass:"icon icon-sm mR5 icon-edit"}})],1):_vm._e(),_vm.canShowDelete?_c("span",{on:{click:function($event){return _vm.invokeDeleteDialog(item.row)}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color visibility-hide-actions mL10",attrs:{src:"svgs/delete",iconClass:"icon icon-sm icon-remove"}})],1):_vm._e()])]}}],null,!1,3131827706)}):_vm._e()],2)],1)]),_vm.quickAddDialogVisibility?_c("QuickCreateRecord",{attrs:{dialogVisibility:_vm.quickAddDialogVisibility,moduleName:_vm.moduleName,parentId:_vm.getParentId},on:{"update:dialogVisibility":function($event){_vm.quickAddDialogVisibility=$event},"update:dialog-visibility":function($event){_vm.quickAddDialogVisibility=$event},saved:_vm.refreshRelatedList}}):_vm._e(),_vm.selectedRecord&&_vm.showStateTransitionComponent?_c("StateTransitionComponent",{attrs:{moduleName:_vm.moduleName,record:_vm.selectedRecord,updateUrl:_vm.$getProperty(_vm.$constants,"moduleStateUpdateMap."+_vm.moduleName+".updateUrl","v2/module/data/update"),transformFn:_vm.transformFormData},on:{currentState:function(){},transitionSuccess:function(){_vm.showStateTransitionComponent=!1,_vm.refreshRelatedList()},transitionFailure:function(){},onClose:function($event){_vm.showStateTransitionComponent=!1}}}):_vm._e(),_c("ColumnCustomization",{attrs:{visible:_vm.canShowColumnCustomization,moduleName:_vm.moduleName,relatedViewDetail:_vm.viewDetail,relatedMetaInfo:_vm.currentMetaInfo,viewName:"hidden-all"},on:{"update:visible":function($event){_vm.canShowColumnCustomization=$event},refreshRelatedList:_vm.refreshRelatedList}})],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),defineProperty=__webpack_require__(482482),WidgetPagination=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(538077),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(162506),__webpack_require__(806339)),ViewMixin=__webpack_require__(453877),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),WorkOrderSpecialFieldsList=__webpack_require__(786113),InsuranceSpecialFieldsList=__webpack_require__(831607),VendorDocumentSpecialFieldsList=__webpack_require__(800926),TermsSpecialFieldsList=__webpack_require__(478878),eventBus=__webpack_require__(398011),validation=__webpack_require__(990260),router=__webpack_require__(329435),baseUrl=__webpack_require__(420499),constant=__webpack_require__(354754),api=__webpack_require__(32284),ColumnCustomization=__webpack_require__(490966),FilePreviewColumn=__webpack_require__(579814),field=__webpack_require__(815872),CurrencyPopOver=__webpack_require__(706881),skipSiteIdModules=["vendors","safetyPlan","people","vendorcontact","service","client"],columnConfigMap={workorder:{fixedColumns:["subject"],fixedSelectableColumns:["noOfNotes","noOfTasks","noOfAttachments"]}},deleteUrlMap={hazardPrecaution:{url:"v2/hazardPrecaution/delete",key:"hazardPrecautionIds",successMsg:"Associated Preacaution Deleted Successfully"},workorderHazard:{url:"v2/workorderHazard/delete",key:"workOrderHazardIds",successMsg:"Hazard Deleted Successfully"},assetHazard:{url:"v2/assetHazard/delete",key:"assetHazardIds",successMsg:"Hazard Deleted Successfully"},quoteterms:{url:"v2/quotation/disassociateTerms",key:"recordIds",successMsg:"Terms Disassociated Successfully"},poterms:{url:"v2/purchaseorder/disassociateTerms",key:"recordIds",successMsg:"Terms Disassociated Successfully"},prterms:{url:"v2/purchaserequest/disassociateTerms",key:"recordIds",successMsg:"Terms Disassociated Successfully"}},customModulesColumnConfig={fixedColumns:["name"],fixedSelectableColumns:["photo"]},RelatedListWidgetvue_type_script_lang_js={name:"RelatedListWidget",props:["widget","details","staticWidgetHeight"],mixins:[ViewMixin/* default */.Z],components:{Pagination:WidgetPagination/* default */.Z,
// eslint-disable-next-line vue/no-unused-components
Avatar:function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,574752))},QuickCreateRecord:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(31715)]).then(__webpack_require__.bind(__webpack_require__,842548))},StateTransitionComponent:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(57544),__webpack_require__.e(60962)]).then(__webpack_require__.bind(__webpack_require__,534878))},FilePreviewColumn:FilePreviewColumn/* default */.Z,ColumnCustomization:ColumnCustomization/* default */.Z,CurrencyPopOver:CurrencyPopOver/* default */.Z},data:function(){return{relatedList:[],deleteItem:{},quickSearchQueries:null,quickAddDialogVisibility:!1,showColumnSettings:!1,defaultHideColumns:["photo","stateFlowId"],columnConfig:{fixedColumns:["name"],fixedSelectableColumns:["photo"]},listComponentsMap:{workorder:{componentName:WorkOrderSpecialFieldsList/* default */.Z,specialHandlingFields:["resource","assignedTo","noOfNotes","noOfTasks","noOfAttachments"]},insurance:{componentName:InsuranceSpecialFieldsList/* default */.Z,specialHandlingFields:["insurance"]},vendorDocuments:{componentName:VendorDocumentSpecialFieldsList/* default */.Z,specialHandlingFields:["document"]},quoteterms:{componentName:function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,478878))},specialHandlingFields:["longDesc"]},poterms:{componentName:TermsSpecialFieldsList["default"],specialHandlingFields:["longDesc"]},prterms:{componentName:TermsSpecialFieldsList["default"],specialHandlingFields:["longDesc"]}},hideEditModulesList:["purchaseorder","purchaserequest","contracts","vendorDocuments","insurance","contact","workorder","safetyPlanHazard","hazardPrecaution","workorderHazard","assetHazard","workpermit","tenantcontact","vendorcontact","clientcontact","tenantspaces","site","quoteterms","poterms","prterms"],hideDeleteModulesList:["purchaseorder","purchaserequest","contracts","vendorDocuments","insurance","contact","workorder","workpermit","tenantcontact","vendorcontact","tenantspaces","clientcontact","site"],showDeleteInPortalModules:["workorderHazard","hazardPrecaution"],hideSearchFieldList:["safetyPlanHazard","hazardPrecaution","workorderHazard","assetHazard","quoteterms"],hideColumnCustomizationList:["purchaserequest","safetyPlanHazard","workorderHazardPrecaution","hazardPrecaution","workorderHazard","assetHazard","quoteterms","workpermit"],showStateTransitionComponent:!1,selectedRecord:null,avatarMap:{asset:function(){return __webpack_require__.e(/* import() */51201).then(__webpack_require__.bind(__webpack_require__,751201))}},page:1,perPage:10,totalCount:null,showMainFieldSearch:!1,isSearchDataLoading:!1,debounceDelay:2e3,viewDetailsExcludedModules:["users","building","space","basespace"],searchText:null,viewDetail:null,isLoading:!1,modulesList:[],canShowColumnCustomization:!1,currentMetaInfo:null}},created:function(){this.init(),this.isFileTypeField=field/* isFileTypeField */.Lg;var moduleName=this.moduleName;this.$store.dispatch("loadTicketStatus",moduleName),["vendorDocuments"].includes(moduleName)&&this.defaultHideColumns.push("parentId")},mounted:function(){var _this=this;eventBus/* eventBus */.Y.$on("refresh-related-list",(function(){_this.refreshRelatedList()})),eventBus/* eventBus */.Y.$on("delete-record",(function(){_this.deleteItemFromList()})),eventBus/* eventBus */.Y.$on("dissociate",(function(){_this.dissociateItem()}))},watch:{filters:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||(this.$set(this,"isSearchDataLoading",!0),this.debounceMainFieldSearch())},page:function(newVal,oldVal){var _this2=this;if(!isEqual_default()(newVal,oldVal)){var isSearchDataLoading=this.isSearchDataLoading,promise=[];isSearchDataLoading||(promise.push(this.fetchModulesData(!0)),promise.push(this.loadDataCount(!0)),this.isLoading=!0,Promise.all(promise).finally((function(){_this2.isLoading=!1})))}}},computed:{relatedRecordDisplayName:function(){var moduleDisplayName=this.moduleDisplayName,widget=this.widget,_ref=widget||{},relatedList=_ref.relatedList,_ref2=relatedList||{},_ref2$field=_ref2.field,field=void 0===_ref2$field?{}:_ref2$field,_ref3=field||{},relatedListDisplayName=_ref3.relatedListDisplayName;return relatedListDisplayName||moduleDisplayName||"---"},moduleName:function(){var widget=this.widget,_ref4=widget||{},relatedList=_ref4.relatedList,_ref5=relatedList||{},module=_ref5.module,_ref6=module||{},name=_ref6.name;return name||""},mainField:function(){var viewDetail=this.viewDetail,mainField=null;if((0,validation/* isEmpty */.xb)(viewDetail))mainField={name:"name",displayName:"Name",field:{name:"name",dataTypeEnum:"STRING"}};else{var fields=viewDetail.fields;mainField=(fields||[]).find((function(field){var fieldObj=field.field;return(fieldObj||{}).mainField}))}return mainField},filters:function(){var mainField=this.mainField,searchText=this.searchText,details=this.details,widget=this.widget,siteId=this.siteId,moduleName=this.moduleName,id=details.id,_ref7=widget||{},relatedList=_ref7.relatedList,_ref8=relatedList||{},field=_ref8.field,fieldName=(field||{}).name,filterObj={};if(!(0,validation/* isEmpty */.xb)(fieldName)&&id&&(filterObj[fieldName]={operatorId:36,value:["".concat(id)]}),(0,validation/* isEmpty */.xb)(siteId)||skipSiteIdModules.includes(moduleName)||(filterObj.siteId={operatorId:36,value:["".concat(siteId)]}),!(0,validation/* isEmpty */.xb)(mainField)&&!(0,validation/* isEmpty */.xb)(searchText)&&searchText.length>0){var name=mainField.name,_field=mainField.field,dataTypeEnum=_field.dataTypeEnum,value=[searchText],operatorId=constant/* default */.Z.FILTER_OPERATORID_HASH[dataTypeEnum];filterObj[name]={operatorId:operatorId,value:value}}return filterObj},filteredViewColumns:function(){var viewColumns=this.viewColumns,hideColumns=this.hideColumns;return(0,validation/* isEmpty */.xb)(viewColumns)?[]:viewColumns.filter((function(column){return!hideColumns.includes(column.name)}))},routeName:function(){var $route=this.$route,_ref9=$route||{},name=_ref9.name;return name||""},getParentId:function(){var _ref10=this.details||{},id=_ref10.id;return id},isCustomModule:function(){var widget=this.widget,_ref11=widget||{},relatedList=_ref11.relatedList,_ref12=relatedList||{},module=_ref12.module,_ref13=module||{},custom=_ref13.custom;return custom},moduleDetails:function(){var widget=this.widget,_ref14=widget||{},relatedList=_ref14.relatedList,_ref15=relatedList||{},module=_ref15.module;return module},canShowEdit:function(){var moduleName=this.moduleName,$account=this.$account,hideEditModulesList=this.hideEditModulesList,moduleDetails=this.moduleDetails,user=$account.user,_ref16=user||{},appType=_ref16.appType,_ref17=moduleDetails||{},moduleType=_ref17.type,moduleTypeCheck=[1,26,27].includes(moduleType)&&this.$helpers.isLicenseEnabled("NEW_V3API"),hasPermission=!moduleTypeCheck&&this.$hasPermission("".concat(moduleName,": UPDATE")),hardCodedCheck=!(appType&&appType>0||hideEditModulesList.includes(moduleName));return((0,router/* isWebTabsEnabled */.tj)()||hasPermission)&&hardCodedCheck},canShowDelete:function(){var moduleName=this.moduleName,$account=this.$account,hideDeleteModulesList=this.hideDeleteModulesList,showDeleteInPortalModules=this.showDeleteInPortalModules,moduleDetails=this.moduleDetails,user=$account.user,_ref18=user||{},appType=_ref18.appType,tAndCEabledModulesHash={quoteterms:"quote",prterms:"purchaserequest",poterms:"purchaseorder"},canShowTAndCDelete=!!(0,validation/* isEmpty */.xb)(tAndCEabledModulesHash[moduleName])||this.$hasPermission("".concat(tAndCEabledModulesHash[moduleName],": UPDATE")),_ref19=moduleDetails||{},moduleType=_ref19.type,moduleTypeCheck=[1,26,27].includes(moduleType)&&this.$helpers.isLicenseEnabled("NEW_V3API"),hasPermission=!moduleTypeCheck&&this.$hasPermission("".concat(moduleName,": DELETE")),hardCodedCheck=canShowTAndCDelete&&!(appType&&appType>0&&!showDeleteInPortalModules.includes(moduleName)||hideDeleteModulesList.includes(moduleName));return((0,router/* isWebTabsEnabled */.tj)()||hasPermission)&&hardCodedCheck},canShowColumnIcon:function(){return!this.widgetParams.hideColumnCustomization||!this.hideColumnCustomizationList.includes(this.moduleName)},moduleDisplayName:function(){var widget=this.widget,_ref20=widget||{},relatedList=_ref20.relatedList,_ref21=relatedList||{},_ref21$module=_ref21.module,module=void 0===_ref21$module?{}:_ref21$module,_ref22=module||{},displayName=_ref22.displayName;return displayName||""},tableHeight:function(){var $refs=this.$refs,staticWidgetHeight=this.staticWidgetHeight,height="250px",relatedListContainer=$refs["relatedListContainer"];if(!(0,validation/* isEmpty */.xb)(relatedListContainer)){var containerHeight=(relatedListContainer||{}).scrollHeight-90;height="".concat(containerHeight,"px")}
// temp handling
return staticWidgetHeight||height},mainFieldColumn:function(){var viewColumns=this.viewColumns,mainField=this.mainField,mainFieldName=this.$getProperty(mainField,"field.name","")||"name";return(0,validation/* isEmpty */.xb)(viewColumns)?{}:viewColumns.find((function(column){return column.name===mainFieldName}))},hideColumns:function(){var _this$defaultHideColu=this.defaultHideColumns,defaultHideColumns=void 0===_this$defaultHideColu?[]:_this$defaultHideColu,mainField=this.mainField,mainFieldName=this.$getProperty(mainField,"field.name","")||"name";return defaultHideColumns.concat(mainFieldName)},hidePaginationSearch:function(){var moduleName=this.moduleName;return["users","site"].includes(moduleName)},isUserLookupModule:function(){var moduleName=this.moduleName;return"users"===moduleName},columnCustomizationConfig:function(){var moduleName=this.moduleName;return columnConfigMap[moduleName]||customModulesColumnConfig},widgetParams:function(){var widget=this.widget,_ref23=widget||{},widgetParams=_ref23.widgetParams;return widgetParams||{}},pageModuleName:function(){return this.$attrs.moduleName},canShowCreate:function(){var moduleName=this.moduleName,pageModuleName=this.pageModuleName,widgetParams=this.widgetParams,_ref24=widgetParams||{},showCreate=_ref24.showCreate,isWorkorderTenant="workorder"===moduleName&&["tenant","tenantunit"].includes(pageModuleName),isWorkpermit="workpermit"===moduleName&&"workorder"===pageModuleName;return isWorkorderTenant||isWorkpermit||showCreate},canShowQuickCreate:function(){var moduleName=this.moduleName,widgetParams=this.widgetParams,_ref25=widgetParams||{},showQuickCreate=_ref25.showQuickCreate;return["vendorDocuments","vendorcontact","clientcontact","custom_tenantutility"].includes(moduleName)||showQuickCreate},routeToFormHash:function(){return{workorder:this.getTenantWorkorderRoute,workpermit:this.getWorkPermitRoute}},getTenantWorkorderRoute:function(){var details=this.details,$getProperty=this.$getProperty,pageModuleName=this.pageModuleName,query={};return"tenant"===pageModuleName?query={tenant:details.id,tenantLabel:details.name}:"tenantunit"===pageModuleName&&(query={siteId:details.siteId},details.tenant&&(this.$setProperty(query,"tenant",$getProperty(details,"tenant.id")),this.$setProperty(query,"tenantLabel",$getProperty(details,"tenant.name"))),320===this.$org.id&&(this.$setProperty(query,"resource",$getProperty(details,"buildingId")),this.$setProperty(query,"resourceLabel",$getProperty(details,"building.name")),this.$setProperty(query,"unit",details.id),this.$setProperty(query,"unitLabel",details.name))),{path:"/app/wo/create",query:query}},getWorkPermitRoute:function(){var _this$details=this.details,details=void 0===_this$details?{}:_this$details,query={ticket:details.id,ticketLabel:details.subject};return(0,validation/* isEmpty */.xb)(details.vendor)||(this.$setProperty(query,"vendor",details.vendor.id),this.$setProperty(query,"vendorLabel",details.vendor.name)),(0,validation/* isEmpty */.xb)(details.siteId)||this.$setProperty(query,"siteId",details.siteId),(0,validation/* isEmpty */.xb)(details.subject)||this.$setProperty(query,"name",details.subject),(0,validation/* isEmpty */.xb)(details.resource)||(
// 1 => Space 2 => Asset
1===details.resource.resourceType?(this.$setProperty(query,"space",details.resource.id),this.$setProperty(query,"spaceLabel",details.resource.name)):2===details.resource.resourceType&&(this.$setProperty(query,"space",this.$getProperty(details,"resource.space.id")),this.$setProperty(query,"spaceLabel",this.$getProperty(details,"resource.space.name")))),{path:"/app/wo/workpermit/new",query:query}}},methods:{init:function(){var _this3=this;this.debounceMainFieldSearch=this.$helpers.debounce((function(){_this3.fetchModulesData().finally((function(){_this3.onDataLoad&&_this3.onDataLoad()})),_this3.loadDataCount()}),this.debounceDelay),this.loadData(),this.loadDataCount()},loadData:function(){var _this4=this,promise=[];this.moduleName&&(promise.push(this.fetchViewDetail()),promise.push(this.fetchModulesData()),this.isLoading=!0,Promise.all(promise).finally((function(){_this4.isLoading=!1,_this4.onDataLoad&&_this4.onDataLoad()})))},fetchViewDetail:function(){var _this5=this,moduleName=this.moduleName,viewDetailsExcludedModules=this.viewDetailsExcludedModules,viewDetailUrl="v2/views/hidden-all?moduleName=".concat(moduleName);return api/* API */.bl.get(viewDetailUrl).then((function(_ref26){var data=_ref26.data,error=_ref26.error;if(error)_this5.$message.error(error.message||"Error Occured");else if(!(0,validation/* isEmpty */.xb)(data)&&!viewDetailsExcludedModules.includes(moduleName)){var viewDetail=data.viewDetail;(0,validation/* isEmpty */.xb)(viewDetail)||_this5.$set(_this5,"viewDetail",viewDetail)}}))},fetchModulesData:function(){var modulesListDataUrl,_this6=this,skipResetPage=arguments.length>0&&void 0!==arguments[0]&&arguments[0],moduleName=this.moduleName,filters=this.filters,perPage=this.perPage,viewDetailsExcludedModules=this.viewDetailsExcludedModules,hidePaginationSearch=this.hidePaginationSearch,searchText=this.searchText;if(modulesListDataUrl="v2/module/data/list?moduleName=".concat(moduleName),
// Reset page to 1 on search
(0,validation/* isEmpty */.xb)(searchText)||skipResetPage||this.$set(this,"page",1),modulesListDataUrl.includes("?")?modulesListDataUrl+="&":modulesListDataUrl+="?",hidePaginationSearch||(modulesListDataUrl+="page=".concat(this.page,"&perPage=").concat(perPage)),viewDetailsExcludedModules.includes(moduleName)||(modulesListDataUrl+="&viewName=hidden-all"),!(0,validation/* isEmpty */.xb)(filters)){var encodedFilters=encodeURIComponent(JSON.stringify(filters));modulesListDataUrl="".concat(modulesListDataUrl,"&filters=").concat(encodedFilters)}return api/* API */.bl.get(modulesListDataUrl).then((function(_ref27){var data=_ref27.data,error=_ref27.error;if(error)_this6.$message.error(error.message);else if(!(0,validation/* isEmpty */.xb)(data)){var moduleDatas=data.moduleDatas;(0,validation/* isNullOrUndefined */.le)(moduleDatas)||_this6.$set(_this6,"modulesList",moduleDatas)}})).catch((function(_ref28){var message=_ref28.message;_this6.$message.error(message)})).finally((function(){_this6.isSearchDataLoading=!1}))},loadDataCount:function(){var _this7=this,moduleName=this.moduleName,filters=this.filters,hidePaginationSearch=this.hidePaginationSearch;if(!hidePaginationSearch&&moduleName){var url="v2/module/data/list?moduleName=".concat(moduleName,"&fetchCount=true");if(!(0,validation/* isEmpty */.xb)(filters)){var encodedFilters=encodeURIComponent(JSON.stringify(filters));url="".concat(url,"&filters=").concat(encodedFilters)}return api/* API */.bl.get(url).then((function(_ref29){var data=_ref29.data,error=_ref29.error;if(error)_this7.$message.error(error.message||"Error Occured");else{var count=data.count;_this7.$set(_this7,"totalCount",count)}}))}},isSpecialHandlingField:function(field){var name=field.name,moduleName=this.moduleName,_this$listComponentsM=this.listComponentsMap,listComponentsMap=void 0===_this$listComponentsM?{}:_this$listComponentsM,specialFields=(listComponentsMap[moduleName]||{}).specialHandlingFields;return(specialFields||[]).includes(name)},hideMainFieldSearch:function(){var searchText=this.searchText;(0,validation/* isEmpty */.xb)(searchText)&&this.$set(this,"showMainFieldSearch",!1)},openMainFieldSearch:function(){var _this8=this;this.$set(this,"showMainFieldSearch",!0),this.$nextTick((function(){var mainFieldSearchInput=_this8.$refs["mainFieldSearchInput"];(0,validation/* isEmpty */.xb)(mainFieldSearchInput)||mainFieldSearchInput.focus()}))},refreshRelatedList:function(){this.loadData(),this.loadDataCount()},quickAddRecordToggle:function(){this.$set(this,"quickAddDialogVisibility",!this.quickAddDialogVisibility)},openFormCreation:function(){var _this$routeToFormHash=this.routeToFormHash[this.moduleName],path=_this$routeToFormHash.path,query=_this$routeToFormHash.query;if((0,router/* isWebTabsEnabled */.tj)()){var _ref30=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.CREATE)||{},name=_ref30.name;name&&this.$router.push({name:name,query:query})}else this.$router.push({path:path,query:query})},editItem:function(id){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var pageType,params={id:id};"workorder"===moduleName?(pageType=router/* pageTypes */.As.OVERVIEW,params.viewname="all"):pageType=router/* pageTypes */.As.EDIT;var _ref31=(0,router/* findRouteForModule */.Jp)(moduleName,pageType)||{},name=_ref31.name;name&&this.$router.push({name:name,params:params})}else"workorder"===moduleName?this.$router.push({name:"wosummarynew",params:{id:id}}):this.$router.push({name:"custommodules-edit",params:{moduleName:moduleName,id:id}})},deleteItemFromList:function(){var _this9=this,deleteItem=this.deleteItem,widget=this.widget,_ref32=widget||{},relatedList=_ref32.relatedList,_ref33=relatedList||{},module=_ref33.module,_ref34=module||{},name=_ref34.name,url="/v2/module/data/delete",item=this.modulesList.find((function(listItem){return listItem.id===deleteItem.id})),data={moduleName:name,ids:[deleteItem.id]};api/* API */.bl.post(url,data).then((function(_ref35){var error=_ref35.error;if(error)_this9.$message.error(error.message||"Error Occured");else{var idx=_this9.modulesList.indexOf(item);_this9.modulesList.splice(idx,1),eventBus/* eventBus */.Y.$emit("show-delete-dialog",{showDeleteDialog:!1}),_this9.$message.success("Deleted Successfully")}})).catch((function(_ref36){var message=_ref36.message;_this9.$message.error(message)}))},dissociateItem:function(){var _this10=this,deleteItem=this.deleteItem,widget=this.widget,_ref37=widget||{},relatedList=_ref37.relatedList,_ref38=relatedList||{},field=_ref38.field,module=_ref38.module,fieldName=field.name,_ref39=module||{},name=_ref39.name,formData="",_ref40=deleteItem||{},data=_ref40.data;delete data[fieldName];var finalData={data:(0,defineProperty/* default */.Z)({},fieldName,{id:-99}),id:deleteItem.id};formData={moduleName:name,withLocalId:!1,moduleData:finalData};var url="/v2/module/data/update",item=this.modulesList.find((function(listItem){return listItem.id===deleteItem.id}));api/* API */.bl.post(url,formData).then((function(_ref41){var error=_ref41.error;if(error)_this10.$message.error(error.message||"Error Occured");else{var idx=_this10.modulesList.indexOf(item);_this10.modulesList.splice(idx,1),eventBus/* eventBus */.Y.$emit("show-delete-dialog",{showDeleteDialog:!1}),_this10.$message.success("Dissociated Successfully")}}))},redirectToListView:function(){var moduleName=this.moduleName,lookupFilter={lookup:[{operatorId:36,value:[this.getParentId?this.getParentId:""],selectedLabel:this.$attrs.moduleName?this.$attrs.moduleName:""}]},query={search:JSON.stringify(lookupFilter),includeParentFilter:!0};if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForModule=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST),name=_findRouteForModule.name;name&&this.$router.push({name:name,params:{viewname:"all"},query:query})}else this.$router.push({path:"/app/ca/modules/".concat(moduleName,"/all"),query:query})},redirectToOverview:function(row){var route,moduleName=this.moduleName,isCustomModule=this.isCustomModule;if((0,router/* isWebTabsEnabled */.tj)()){var _ref42=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref42.name;name&&(route=this.$router.resolve({name:name,params:{viewname:"all",id:row.id}}).href)}else{var hasPermission=this.$hasPermission("".concat(moduleName,": READ"));if(!hasPermission)return;var routerMap={workorder:{name:"wosummarynew",params:{id:row.id}},workpermit:{name:"workPermitSummary",params:{id:row.id,viewname:"all"}},purchaserequest:{name:"prSummary",params:{id:row.id,viewname:"all"}},purchaseorder:{name:"poSummary",params:{id:row.id,viewname:"all"}},tenantcontact:{name:"tenantcontact",params:{id:row.id,viewname:"all"}},tenantunit:{name:"tenantUnitSummary",params:{id:row.id,viewname:"all"}},vendors:{name:"vendorsSummary",params:{id:row.id,viewname:"all"}},asset:{name:"assetsummary",params:{assetid:row.id,viewname:"all"}},tenantspaces:{name:"tenant",params:{id:(row.tenant||{}).id,viewname:"all"}},serviceRequest:{name:"serviceRequestSummary",params:{id:row.id,viewname:"all"}},client:{name:"clientSummary",params:{id:row.id,viewname:"all"}},vendorcontact:{name:"vendorContactsSummary",params:{id:row.id,viewname:"all"}},insurance:{name:"insurancesSummary",params:{id:row.id,viewname:"all"}},quote:{path:"/app/tm/quotation/all/".concat(row.id,"/overview")},item:{path:"/app/inventory/item/all/".concat(row.id,"/summary")},tool:{path:"/app/inventory/tool/all/".concat(row.id,"/summary")},inspectionResponse:{path:"/app/inspection/individual/all/summary/".concat(row.id)}};route=isCustomModule?this.$router.resolve({path:"/app/ca/modules/".concat(moduleName,"/all/").concat(row.id,"/summary")}).href:this.$router.resolve(routerMap[moduleName]).href}route&&window.open(route,"_blank")},invokeDeleteDialog:function(item){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,$attrs,moduleDisplayName,_ref43,isV3Api,url,successMsg,param,value,_yield$API$deleteReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this11.deleteItem=item,moduleName=_this11.moduleName,$attrs=_this11.$attrs,moduleDisplayName=_this11.moduleDisplayName,_ref43=$attrs||{},isV3Api=_ref43.isV3Api,!deleteUrlMap[moduleName]){_context.next=10;break}url=(deleteUrlMap[moduleName]||{}).url,successMsg=(deleteUrlMap[moduleName]||{}).successMsg,param=(0,defineProperty/* default */.Z)({},(deleteUrlMap[moduleName]||{}).key,[String(item.id)]),api/* API */.bl.post(url,param).then((function(_ref44){var error=_ref44.error;error?_this11.$message.error(error.message||"Error Occured"):(_this11.$message.success(successMsg),_this11.refreshRelatedList(),eventBus/* eventBus */.Y.$emit("refesh-parent"))})).catch((function(_ref45){var message=_ref45.message;_this11.$message.error(message)})),_context.next=23;break;case 10:if(!isV3Api){_context.next=22;break}return _context.next=13,_this11.$dialog.confirm({title:_this11.$t("common.header.delete_record"),message:_this11.$t("common._common.are_you_sure_want_to_delete_this_record"),rbDanger:!0,rbLabel:_this11.$t("common._common.delete")});case 13:if(value=_context.sent,!value){_context.next=20;break}return _context.next=17,api/* API */.bl.deleteRecord(_this11.moduleName,[item.id]);case 17:_yield$API$deleteReco=_context.sent,error=_yield$API$deleteReco.error,error?_this11.$message.error(error.message||"Error Occured"):(_this11.$message.success("".concat(moduleDisplayName," deleted successfully")),_this11.refreshRelatedList(),eventBus/* eventBus */.Y.$emit("refesh-parent"));case 20:_context.next=23;break;case 22:eventBus/* eventBus */.Y.$emit("show-delete-dialog",{showDeleteDialog:!0});case 23:case"end":return _context.stop()}}),_callee)})))()},showColumnCustomization:function(){var _this12=this,moduleName=this.moduleName,url="/module/meta?moduleName=".concat(moduleName);api/* API */.bl.get(url).then((function(_ref46){var data=_ref46.data,error=_ref46.error;if(error)_this12.$message.error(error.message||"Error occured");else if(!(0,validation/* isEmpty */.xb)(data)){var metaInfo=data.meta;_this12.currentMetaInfo=metaInfo,_this12.canShowColumnCustomization=!0}})).catch((function(errMsg){_this12.$message.error(errMsg)}))},getImage:function(photoId){return"".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(photoId)},openStateTransitionComponent:function(record){this.selectedRecord=record,this.showStateTransitionComponent=!0},transformFormData:function(returnObj,formData){var moduleName=this.moduleName,paramKey=this.$getProperty(this,"$constants.moduleStateUpdateMap.".concat(moduleName,".key"),"moduleData");return returnObj["".concat(paramKey)]={id:returnObj.id},formData&&(formData.comment&&(returnObj.comment=formData.comment,delete formData.comment),returnObj["".concat(paramKey)]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},returnObj["".concat(paramKey)]),formData)),"vendorDocuments"===moduleName&&(returnObj["".concat(paramKey)]=[returnObj["".concat(paramKey)]],returnObj["parentAttachmentModuleName"]=moduleName),returnObj}}},common_RelatedListWidgetvue_type_script_lang_js=RelatedListWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(common_RelatedListWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,"0300c1c6",null)
/* harmony default export */,RelatedListWidget=component.exports},
/***/974514:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RichTextAreaEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/purchase/tandc/RichTextAreaEditor.vue?vue&type=template&id=b994cd6e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:_vm.$t("common.products.long_description"),visible:!0,width:"50%","append-to-body":!0,"before-close":_vm.cancel}},[_c("div",{staticClass:"pB70"},[_c("RichTextArea",{attrs:{disabled:_vm.disabled,isEdit:!0},model:{value:_vm.description,callback:function($$v){_vm.description=$$v},expression:"description"}})],1),_vm.disabled?_vm._e():_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.cancel}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.$t("common.roles.save"))+" ")])],1)])},staticRenderFns=[],RichTextArea=(__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(874249)),RichTextAreaEditorvue_type_script_lang_js={props:["content","disabled"],components:{RichTextArea:RichTextArea/* default */.Z},data:function(){return{description:null}},created:function(){this.content&&(this.description=this.content)},methods:{cancel:function(){this.$emit("onClose")},save:function(){this.$emit("onSave",this.description)}}},tandc_RichTextAreaEditorvue_type_script_lang_js=RichTextAreaEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tandc_RichTextAreaEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RichTextAreaEditor=component.exports},
/***/266707:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8bf7d214fbcc77945abad62903a613.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/77645.js.map