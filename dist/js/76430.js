"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[76430],{
/***/876430:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AccountSSO}});
// EXTERNAL MODULE: ./src/pages/setup/sso.vue + 9 modules
var render,staticRenderFns,sso=__webpack_require__(197614),AccountSSOvue_type_script_lang_js={extends:sso/* default */.Z,methods:{getSSOType:function(){return"sso"},getUpdateUrl:function(){return"/v2/setup/sso/update"},handleCommand:function(command){var _this=this;"edit"==command?this.configureSSO():"delete"==command&&this.$dialog.confirm({title:"Delete Single Sign-On Settings",message:"This will permanently delete your Single Sign-On Settings. Continue?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){if(value&&null!=_this.ssoData.id){var ssoObj={sso:{id:_this.ssoData.id}};_this.$http.post("/v2/setup/sso/delete",ssoObj).then((function(response){200==response.status&&(_this.showContent=!1,_this.$emit("Your SSO configs are deleted"))}))}}))},changeSSO:function(){var _this2=this;this.disabled=!0;var ssoData={sso:{isActive:this.isEnabled}};this.$http.post("/v2/setup/sso/update",ssoData).then((function(response){var status=response.status,errorMessage=response.data.errorMessage;errorMessage?_this2.$message.error(errorMessage):200===status&&_this2.isEnabled?_this2.$message({type:"success",message:"SSO enabled successfully"}):200!==status||_this2.isEnabled||_this2.$message({type:"success",message:"SSO disabled successfully"}),_this2.disabled=!1}))},downloadMetaUrl:function(){return"/api/v2/setup/sso/downloadMetadata"},getSSOStatus:function(state){var _this3=this;this.ssoStatusLoading=!0,this.loading=!0,this.$http.get("/v2/setup/sso/get").then((function(response){200==response.status&&null!=response.data&&null==response.data.sso?_this3.ssoStatusLoading=!1:200==response.status&&null!=response.data&&null!=response.data.sso&&(_this3.isEnabled=response.data.sso.isActive,_this3.ssoData.spAcsURL=response.data.spAcsURL,_this3.ssoData.spEntityId=response.data.spEntityId,_this3.ssoData.spMetadataURL=response.data.spMetadataURL,response.data.sso.SSOConfig&&(_this3.ssoData.certificate=response.data.sso.SSOConfig.certificate,_this3.ssoData.entityId=response.data.sso.SSOConfig.entityId,_this3.ssoData.loginUrl=response.data.sso.SSOConfig.loginUrl,_this3.ssoData.logoutUrl=response.data.sso.SSOConfig.logoutUrl),_this3.ssoData.id=response.data.sso.id,_this3.loading=!1,_this3.ssoStatusLoading=!1,_this3.ssoData.loginUrl&&(_this3.showContent=!0),"onedit"==state&&(_this3.showDialog=!0))})).catch((function(err){_this3.loading=!1}))}}},setup_AccountSSOvue_type_script_lang_js=AccountSSOvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_AccountSSOvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AccountSSO=component.exports},
/***/197614:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return sso}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/sso.vue?vue&type=template&id=4d9dd103
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 d-flex flex-direction-column overflow-hidden"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"fc-black2-18 text-left bold pB0"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.sso_short"))+" ")]),_vm.showHeader?_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.sso_sign_in"))+" ")]):_vm._e()])]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout overflow-y fc-sso-portal-con pL10 pR10"},[_c("el-card",{staticClass:"box-card width100",staticStyle:{"box-shadow":"0 4px 15px 0 rgba(14, 15, 43, 0.03)"},attrs:{shadow:"never"}},[_vm.showContent?_c("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[_c("div",{staticClass:"d-flex justify-content-space"},[_vm.showContent?_c("div",[_c("span",{staticClass:"f15 setting-form-title line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common._common.enable_sso"))+" ")]),_c("el-switch",{staticClass:"Notification-toggle p20",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeSSO()}},model:{value:_vm.isEnabled,callback:function($$v){_vm.isEnabled=$$v},expression:"isEnabled"}}),_c("el-dropdown",{staticClass:"sso-more-options",attrs:{trigger:"click"},on:{command:_vm.handleCommand}},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more f18 pointer"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{icon:"el-icon-edit mR3",command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]),_c("el-dropdown-item",{attrs:{icon:"el-icon-download mR3",command:"download"}},[_c("a",{staticClass:"label-txt-black",attrs:{href:""+_vm.ssoData.spMetadataURL}},[_vm._v(_vm._s(_vm.$t("common._common.download_metadata")))])]),_c("el-dropdown-item",{attrs:{icon:"el-icon-delete mR3",command:"delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete")))])],1)],1)],1):_vm._e()])]):_vm._e(),_vm.ssoStatusLoading?[_c("div",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],staticClass:"mB20 flex-center-vH",staticStyle:{height:"calc(100vh - 245px)"}})]:_vm.showContent&&!_vm.ssoStatusLoading?[_c("div",{staticClass:"mB20"},["domainSSO"===_vm.ssoType?_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"grid-content"},[_c("div",[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.create_user_if_not_present"))+" ")]),_c("el-switch",{staticClass:"Notification-toggle p20",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.updateCreateUserStatus()}},model:{value:_vm.isCreateUserEnabled,callback:function($$v){_vm.isCreateUserEnabled=$$v},expression:"isCreateUserEnabled"}})],1)])])],1):_vm._e(),_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"grid-content"},[_c("div",[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.products.service_provider_sp"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.spEntityId)+" ")])]),_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.identity_provider_idp"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.loginUrl)+" ")])])])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"grid-content"},[_c("div",[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.assertion_cnsumer_service"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.spAcsURL)+" ")])]),_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"text-fc-grey f13 line-height20"},[_vm._v(" "+_vm._s(_vm.$t("common.header.identity_provider_idp_logout"))+" ")]),_c("div",{staticClass:"label-txt-black bold line-height25"},[_vm._v(" "+_vm._s(_vm.ssoData.logoutUrl?_vm.ssoData.logoutUrl:"--")+" ")])])])])],1)],1)]:[_c("div",{staticClass:"saml-container"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"m15 mT0 fc-black2-18 f14 line-height22"},[_vm._v(" "+_vm._s(_vm.$t("common.header.single_sso_feature"))+" ")]),_c("el-button",{staticClass:"el-button setup-el-btn uppercase el-button--default pL30 pR30 pT15 pB15",on:{click:function($event){return _vm.setUpSSO()}}},[_vm._v(" "+_vm._s(_vm.$t("common.header.setup_now"))+" ")]),_c("div",{staticClass:"m15 label-txt-black f14 line-height22"},[_c("a",{attrs:{download:"",href:_vm.downloadMetaUrl}},[_c("i",{staticClass:"el-icon-download mR3"}),_vm._v("Download Metadata")])])],1)]],2)],1)]),_vm.showDialog?_c("ssoForm",{attrs:{entityId:_vm.ssoData.entityId,loginUrl:_vm.ssoData.loginUrl,logoutUrl:_vm.ssoData.logoutUrl,certificate:_vm.ssoData.certificate,visibility:_vm.showDialog,getSSOStatus:_vm.getSSOStatus,updateUrl:_vm.updateUrl,ssoType:_vm.ssoType,showSSOLink:_vm.ssoData.showSSOLink},on:{"update:visibility":function($event){_vm.showDialog=$event}}}):_vm._e()],1)},staticRenderFns=[],ssoFormvue_type_template_id_5b84018a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("el-form",{ref:"ssoForm",attrs:{model:_vm.sso,"label-position":"top",rules:_vm.rules}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.configure_saml"))+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-form-item",{attrs:{label:_vm.$t("setup.setup_profile.login_url"),prop:"loginUrl"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",placeholder:_vm.$t("setup.setup_profile.enter_idp")},model:{value:_vm.sso.loginUrl,callback:function($$v){_vm.$set(_vm.sso,"loginUrl",$$v)},expression:"sso.loginUrl"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("setup.setup_profile.saml_certificate"),prop:"certificate"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:_vm.$t("setup.setup_profile.saml_security_certificate")},model:{value:_vm.sso.certificate,callback:function($$v){_vm.$set(_vm.sso,"certificate",$$v)},expression:"sso.certificate"}})],1),"domainSSO"===_vm.ssoType?_c("el-form-item",{attrs:{label:_vm.$t("setup.setup_profile.show_sso_link")}},[_c("el-switch",{model:{value:_vm.sso.showSSOLink,callback:function($$v){_vm.$set(_vm.sso,"showSSOLink",$$v)},expression:"sso.showSSOLink"}})],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm("ssoForm")}}},[_vm._v(" "+_vm._s(_vm.saving?"Saving...":_vm.$t("common._common._save")))])],1)])],1)],1)},ssoFormvue_type_template_id_5b84018a_scoped_true_staticRenderFns=[],ssoFormvue_type_script_lang_js={props:["entityId","loginUrl","logoutUrl","certificate","visibility","getSSOStatus","ssoType","updateUrl","showSSOLink"],data:function(){return{saving:!1,sso:{entityId:this.entityId,loginUrl:this.loginUrl,logoutUrl:this.logoutUrl,certificate:this.certificate,showSSOLink:this.showSSOLink},rules:{loginUrl:[{required:!0,message:"Please input IdP Login URL",trigger:"blur"}],certificate:[{required:!0,message:"Please input SAML Certificate",trigger:"blur"}]}}},mounted:function(){},methods:{closeDialog:function(){this.$emit("update:visibility",!1)},cancel:function(){this.$emit("canceled")},submitForm:function(ssoForm){var _this=this;this.$refs[ssoForm].validate((function(valid){if(valid){_this.saving=!0;var _this$sso=_this.sso,certificate=_this$sso.certificate,entityId=_this$sso.entityId,loginUrl=_this$sso.loginUrl,logoutUrl=_this$sso.logoutUrl,showSSOLink=_this$sso.showSSOLink,ssoData={};ssoData[_this.ssoType]={name:"SAML",ssoTypeEnum:"SAML",config:{entityId:entityId,loginUrl:loginUrl,certificate:certificate,logoutUrl:logoutUrl},showSSOLink:showSSOLink,isActive:!0},_this.$http.post(_this.updateUrl,ssoData).then((function(response){var status=response.status,errorMessage=response.data.errorMessage;errorMessage?(_this.$message.error(errorMessage),_this.saving=!1):200!==status||errorMessage||(_this.getSSOStatus("refresh"),_this.$message({type:"success",message:"SAML Configuration saved successfully!"}),_this.saving=!1,_this.resetForm(),_this.$emit("SSO configs saved"),_this.$emit("update:visibility",!1))}))}}))},resetForm:function(){this.$refs["ssoForm"].resetFields()}}},setup_ssoFormvue_type_script_lang_js=ssoFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_ssoFormvue_type_script_lang_js,ssoFormvue_type_template_id_5b84018a_scoped_true_render,ssoFormvue_type_template_id_5b84018a_scoped_true_staticRenderFns,!1,null,"5b84018a",null)
/* harmony default export */,ssoForm=component.exports,ssovue_type_script_lang_js={props:["showHeader"],data:function(){return{loading:!1,disabled:!1,showContent:!1,ssoStatusLoading:!1,isEnabled:!1,isCreateUserEnabled:!1,isNew:!1,showDialog:!1,ssoData:{spAcsURL:null,spEntityId:null,spMetadataURL:null,certificate:null,entityId:null,loginUrl:null,logoutUrl:null,id:null},ssoType:"",updateUrl:""}},computed:{},created:function(){this.getSSOStatus("oncreate"),this.ssoType=this.getSSOType(),this.updateUrl=this.getUpdateUrl(),this.downloadMetaUrl=this.downloadMetaUrl()},mounted:function(){},components:{ssoForm:ssoForm},methods:{setUpSSO:function(){this.ssoData.certificate=null,this.ssoData.entityId=null,this.ssoData.loginUrl=null,this.ssoData.logoutUrl=null,this.ssoData.showSSOLink=!1,this.showDialog=!0},configureSSO:function(){this.getSSOStatus("onedit")}}},setup_ssovue_type_script_lang_js=ssovue_type_script_lang_js,sso_component=(0,componentNormalizer/* default */.Z)(setup_ssovue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,sso=sso_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/76430.js.map