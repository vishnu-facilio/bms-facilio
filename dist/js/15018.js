"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[15018,32686,80865,53021,5928],{
/***/532023:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return InviteFormRedirect}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/visitors/invites/InviteFormRedirect.vue?vue&type=template&id=72b916e5
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isOldGroupInvite?_c("OldInviteGroupForm"):_c("InviteGroupForm")},staticRenderFns=[],InviteGroupForm=__webpack_require__(263292),OldInviteGroupForm=__webpack_require__(518851),InviteFormRedirectvue_type_script_lang_js={components:{InviteGroupForm:InviteGroupForm["default"],OldInviteGroupForm:OldInviteGroupForm["default"]},data:function(){return{isOldGroupInvite:!0}},mounted:function(){this.IsOldGroupInvite()},methods:{IsOldGroupInvite:function(){this.$helpers.isLicenseEnabled("GROUP_INVITES")?this.isOldGroupInvite=!1:this.isOldGroupInvite=!0}}},invites_InviteFormRedirectvue_type_script_lang_js=InviteFormRedirectvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(invites_InviteFormRedirectvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,InviteFormRedirect=component.exports},
/***/518851:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return OldInviteGroupForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/visitors/invites/OldInviteGroupForm.vue?vue&type=template&id=38cf8294
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-bulk-form-page"},[_c("div",{staticClass:"bulk-form-data-creation"},[_c("el-header",{staticClass:"bulk-form-header",attrs:{height:"80"}},[_c("div",{staticClass:"header d-flex justify-content-space"},[_c("el-input",{staticClass:"width300px",attrs:{placeholder:"Group Invite Name",autofocus:!0},model:{value:_vm.groupName,callback:function($$v){_vm.groupName=$$v},expression:"groupName"}}),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return _c("el-option",{key:index,attrs:{value:form,label:form.displayName}})})),1):_vm._e(),_c("div",{staticClass:"flex-middle width15"},[_c("el-button",{staticClass:"small-border-btn width50 bR3 pB13 pT13 f12 text-uppercase",on:{click:_vm.redirectToList}},[_vm._v(" Cancel ")]),_c("el-button",{staticClass:"small-border-btn-save width50 bR3 pB13 pT13 f12 text-uppercase",attrs:{loading:_vm.isSaving},on:{click:_vm.bulkSubmit}},[_vm._v(" Save ")])],1)],1)]),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("bulk-form",{ref:"bulkform",attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!1,canShowSecondaryBtn:!1,isEdit:_vm.isEdit,customClass:_vm.customClass},on:{"update:form":function($event){_vm.formObj=$event}}})],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FormCreation=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(373729)),validation=__webpack_require__(990260),api=__webpack_require__(32284),router=__webpack_require__(329435),constant=__webpack_require__(354754),FORM_SOURCE=constant/* default */.Z.FORM_SOURCE,OldInviteGroupFormvue_type_script_lang_js={extends:FormCreation/* default */.Z,props:{beforeSaveHook:{type:Function}},data:function(){return{groupName:null}},computed:{isV3Api:function(){return!0},bulkMode:function(){return!0},moduleName:function(){return"groupinvite"},moduleDisplayName:function(){var _ref=this.formObj||{},formModule=_ref.module,_ref2=formModule||{},displayName=_ref2.displayName;return displayName||""},formId:function(){var query=this.$route.query,_ref3=query||{},formId=_ref3.formId;return formId},visitorTypeId:function(){var query=this.$route.query,_ref4=query||{},visitorTypeId=_ref4.visitorTypeId;return visitorTypeId},isWidgetsSupported:function(){return!0}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleDataId,moduleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(moduleDataId=_this.moduleDataId,moduleName=_this.moduleName,(0,validation/* isEmpty */.xb)(moduleDataId)){_context.next=4;break}return _context.next=4,_this.loadModuleData({moduleName:moduleName,moduleDataId:moduleDataId});case 4:return _context.next=6,_this.loadform();case 6:case"end":return _context.stop()}}),_callee)})))()},triggerBulkSubmit:function(){var _this2=this;this.isSaving=!0,this.$refs["bulkform"].triggerSubmit().then((function(data){_this2.saveRecord(data)})).catch((function(error){_this2.$message(error),_this2.isSaving=!1})),this.isSaving=!1},loadFormForType:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var visitorTypeId,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.isLoading=!0,visitorTypeId=_this3.visitorTypeId,_context2.next=4,api/* API */.bl.post("v2/visitorSettings/get",{visitorType:{id:visitorTypeId}});case 4:_yield$API$post=_context2.sent,data=_yield$API$post.data,error=_yield$API$post.error,error?_this3.$message.error(error.message||"Error Occurred"):_this3.selectedForm=_this3.$getProperty(data,"visitorSettings.visitorInviteForm",{}),_this3.isLoading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},loadform:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return params={fetchFormRuleFields:!0,formId:_this4.formId},_this4.isLoading=!0,_context3.next=4,api/* API */.bl.get("/v2/forms/invitevisitor",params);case 4:_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this4.$message.error(error.message||"Error Occured"):_this4.selectedForm=data.form,_this4.isLoading=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},loadFormData:function(formId){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var formObj,selectedForm,moduleName,moduleData,id,name,module,_ref5,formModuleName,params,_yield$API$get2,data,error,message,form;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return formObj={},selectedForm=_this5.selectedForm,moduleName=_this5.moduleName,moduleData=_this5.moduleData,id=selectedForm.id,name=selectedForm.name,module=selectedForm.module,_ref5=module||{},formModuleName=_ref5.name,moduleName=(0,validation/* isEmpty */.xb)(formModuleName)?moduleName:formModuleName,params=-1===id?{formName:name}:{formId:formId||id},params["formSourceType"]=FORM_SOURCE.BULK_FORM,_this5.isLoading=!0,_context4.next=10,api/* API */.bl.get("/v2/forms/".concat(moduleName),params);case 10:return _yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?(message=error.message,_this5.$message.error(message)):(form=data.form,(0,validation/* isEmpty */.xb)(form)||(formObj=form,formObj.secondaryBtnLabel="CANCEL",formObj.primaryBtnLabel="SAVE",_this5.$set(_this5,"formObj",formObj),(0,validation/* isEmpty */.xb)(moduleData)||_this5.deserializeData(moduleData))),_this5.isLoading=!1,_context4.abrupt("return",formObj);case 16:case"end":return _context4.stop()}}),_callee4)})))()},bulkSubmit:function(){(0,validation/* isEmpty */.xb)(this.groupName)?this.$message.error("Group name cannot be empty"):this.triggerBulkSubmit()},saveRecord:function(formModel){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var formObj,moduleName,moduleDataId,groupName,visitorTypeId,afterSerializeHook,_ref6,formId,response,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(formObj=_this6.formObj,moduleName=_this6.moduleName,moduleDataId=_this6.moduleDataId,groupName=_this6.groupName,visitorTypeId=_this6.visitorTypeId,afterSerializeHook=_this6.afterSerializeHook,_ref6=formObj||{},formId=_ref6.id,response={},data={name:groupName,invitevisitor:[]},(0,validation/* isEmpty */.xb)(formId)||(data.formId=formId),formModel.forEach((function(inviteData){var grpInvite=_this6.serializedData(formObj,inviteData);grpInvite=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},grpInvite),{},{visitorType:{id:visitorTypeId},formId:formId}),data.invitevisitor.push(grpInvite)})),(0,validation/* isEmpty */.xb)(moduleDataId)||(data.id=moduleDataId),!(0,validation/* isEmpty */.xb)(afterSerializeHook)&&(0,validation/* isFunction */.mf)(afterSerializeHook)&&(data=_this6.afterSerializeHook({data:data,formModel:formModel,formObj:formObj})),_this6.isSaving=!0,!(0,validation/* isEmpty */.xb)(moduleDataId)){_context5.next=15;break}return _context5.next=12,api/* API */.bl.createRecord(moduleName,{data:data});case 12:response=_context5.sent,_context5.next=18;break;case 15:return _context5.next=17,api/* API */.bl.updateRecord(moduleName,{id:moduleDataId,data:data});case 17:response=_context5.sent;case 18:_this6.isSaving=!1,_this6.notificationHandler(response),_this6.afterSaveHook(response);case 21:case"end":return _context5.stop()}}),_callee5)})))()},afterSaveHook:function(_ref7){var error=_ref7.error;error||(this.beforeSaveHook(),this.redirectToList())},redirectToList:function(){var moduleName="invitevisitor";if((0,router/* isWebTabsEnabled */.tj)()){var _ref8=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref8.name;name&&this.$router.push({name:name})}else this.$router.push({name:"invites-list"})}}},invites_OldInviteGroupFormvue_type_script_lang_js=OldInviteGroupFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(invites_OldInviteGroupFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,OldInviteGroupForm=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/15018.js.map