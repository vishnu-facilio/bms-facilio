"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[49080,32686,80865,53021],{
/***/706604:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return EmployeeOverviewPage}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),Overview=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(821057),__webpack_require__(422273)),eventBus=__webpack_require__(398011),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),router=__webpack_require__(329435),EmployeeOverviewPagevue_type_script_lang_js={extends:Overview/* default */.Z,data:function(){return{updateUrl:"/v2/employee/update",notesModuleName:"peoplenotes",showChangeStatusDialog:!1,selectedStatus:1,attachmentsModuleName:"peopleattachments",saving:!1,allowedPortals:["service","employee"],employee:null}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({isV3Api:function(){return!0}},(0,vuex_esm/* mapState */.rn)({roles:function(state){return state.roles}})),{},{moduleName:function(){return"employee"},moduleStoreName:function(){return"employee"},customModuleData:function(){return this.employee},showEdit:function(){var canShowEdit=this.$hasPermission("employee:UPDATE"),isNotLocked=!this.isStateFlowEnabled||!this.isRecordLocked&&!this.isRequestedState;return canShowEdit&&isNotLocked},showPhotoField:function(){return!1},showAvatar:function(){return!1},photoFieldName:function(){return"avatarId"},userRoles:function(){return this.roles?this.roles:[]}}),created:function(){this.$store.dispatch("loadRoles")},mounted:function(){var _this=this;eventBus/* eventBus */.Y.$on("refesh-parent-details",(function(){_this.loadCustomModuleData(!0)}))},methods:{transformFormData:function(returnObj,data){if(returnObj["employee"]={id:this.customModuleData.id},data){var comment=data.comment;(0,validation/* isEmpty */.xb)(comment)||(data.comment=comment,delete data.comment)}return returnObj["employee"]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},returnObj["employee"]),data),returnObj},editCustomModuleData:function(){var moduleName=this.moduleName,id=this.id;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref.name;id&&name&&this.$router.push({name:name})}else this.$router.push({name:"employee-edit",params:{moduleName:moduleName,id:id}})},saveUserAccess:function(userObj){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var email,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(email=userObj.email,params=userObj.params,!(0,validation/* isEmpty */.xb)(email)){_context.next=4;break}return _this2.$message.error(_this2.$t("Please enter a valid email for enabling application access")),_context.abrupt("return");case 4:return _context.next=6,api/* API */.bl.post("/v2/employee/update",params);case 6:if(_yield$API$post=_context.sent,error=_yield$API$post.error,!error){_context.next=13;break}throw _this2.$message.error(error.message||"Error Occurred"),new Error;case 13:_this2.$message.success(_this2.$t("people.employee.update_success")),_this2.loadCustomModuleData(!0);case 15:case"end":return _context.stop()}}),_callee)})))()},savePortalUser:function(userObj){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref2,id,email,isOccupantPortalAccess,employeePortalAccess,rolesMap,scopingId,permissionSets,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref2=userObj||{},id=_ref2.id,email=_ref2.email,isOccupantPortalAccess=_ref2.isOccupantPortalAccess,employeePortalAccess=_ref2.employeePortalAccess,rolesMap=_ref2.rolesMap,scopingId=_ref2.scopingId,permissionSets=_ref2.permissionSets,params={employees:[{id:id,isOccupantPortalAccess:isOccupantPortalAccess,employeePortalAccess:employeePortalAccess,rolesMap:rolesMap,scopingId:scopingId,permissionSets:permissionSets}]},_context2.next=4,_this3.saveUserAccess({email:email,params:params});case 4:case"end":return _context2.stop()}}),_callee2)})))()},saveAppAccess:function(userData){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref3,email,id,isAppAccess,rolesMap,scopingId,permissionSets,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref3=userData||{},email=_ref3.email,id=_ref3.id,isAppAccess=_ref3.isAppAccess,rolesMap=_ref3.rolesMap,scopingId=_ref3.scopingId,permissionSets=_ref3.permissionSets,params={employees:[{id:id,isAppAccess:isAppAccess,rolesMap:rolesMap,scopingId:scopingId,permissionSets:permissionSets}]},_context3.next=4,_this4.saveUserAccess({email:email,params:params});case 4:case"end":return _context3.stop()}}),_callee3)})))()},loadCustomModuleData:function(){var _arguments=arguments,_this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var force,id,moduleName,_yield$API$fetchRecor,error,employee;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_this5.isLoading=!0,id=_this5.id,moduleName=_this5.moduleName,_context4.next=5,api/* API */.bl.fetchRecord(moduleName,{id:id},{force:force});case 5:_yield$API$fetchRecor=_context4.sent,error=_yield$API$fetchRecor.error,employee=_yield$API$fetchRecor.employee,error?_this5.$message.error(error.message||"Error Occurred"):_this5.employee=employee,_this5.isLoading=!1;case 10:case"end":return _context4.stop()}}),_callee4)})))()},showEmployeeactionDialog:function(){((0,validation/* isEmpty */.xb)(this.customModuleData.roleId)||this.customModuleData.roleId<=0)&&(this.customModuleData.roleId=null),this.showEmployeeActionDialog=!0}}},employees_EmployeeOverviewPagevue_type_script_lang_js=EmployeeOverviewPagevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(employees_EmployeeOverviewPagevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EmployeeOverviewPage=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/49080.js.map