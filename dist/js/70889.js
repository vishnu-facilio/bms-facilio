"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[70889],{
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/725704:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TemplateSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/rules/TemplateSummary.vue?vue&type=template&id=57d06b68
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"template-summary-dialog",staticStyle:{"z-index":"999999"},attrs:{visible:_vm.showDialog,width:"57%",height:"80%","append-to-body":!0,"before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_vm.ruleTemplate?_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"p20 template-summary-height"},[_c("div",{staticClass:"fc-black-24"},[_vm._v(_vm._s(_vm.ruleTemplate.name))]),_c("div",{staticClass:"fc-grey2-text14 pT10"},[_vm._v(_vm._s(_vm.ruleTemplate.description))]),_c("el-row",{staticClass:"pT30 pB30"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-input-label-txt f11 bold"},[_vm._v("ALARM TYPE")]),_c("div",{staticClass:"label-txt-black"},[_vm._v("Assets")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-input-label-txt f11 bold"},[_vm._v("ASSET CATEGORY")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(_vm._s(_vm.ruleTemplate.category))])]),_c("el-col",{staticClass:"visibility-visible-actions pointer",attrs:{span:6}},[_c("div",{staticClass:"fc-input-label-txt f11 bold"},[_vm._v("ASSETS")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.resourceLabel)+" "),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit edit-icon-color visibility-hide-actions",attrs:{title:"Edit Asset","data-arrow":"true"},on:{click:function($event){_vm.chooserVisibility=!0}}})])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-input-label-txt f11 bold"},[_vm._v("THRESHOLD METRIC")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName(_vm.ruleTemplate.threshold_metric).displayName)+" ")])])],1),_c("div",{staticClass:"fc-modal-sub-title"},[_vm._v("RULE CONDITION")]),_c("div",{staticClass:"label-txt-black"},[_c("div",{staticClass:"fc-dark-blue-txt2 pT10 pB10"},[_vm._v("PREREQUISITE")]),_vm._v(" "+_vm._s(_vm.ruleTemplate.preRequsite.condition_statement)+" "),_c("div",{staticClass:"fc-dark-blue-txt2 pT20 pB10 text-uppercase"},[_vm._v(" Alarm Condition ")]),_vm._v(" "+_vm._s(_vm.ruleTemplate.alarmCondition.condition_statement)+" "),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-input-label-txt flex-middle"},[_vm._v(" Severity "),_c("div",{staticClass:"fc-badge-critical mL20",style:{"background-color":_vm.getAlarmSeverityByName(_vm.ruleTemplate.severity).color}},[_vm._v(" "+_vm._s(_vm.getAlarmSeverityByName(_vm.ruleTemplate.severity).displayName)+" ")])])]),_c("div",{staticClass:"fc-dark-blue-txt2 pT10 pB10"},[_vm._v("ALARM CLEAR WHEN")]),_vm._v(" Autoclear (Default) ")]),_c("div",{staticClass:"fc-modal-sub-title pT20 pB10"},[_vm._v("ALARM DETAILS")]),_c("div",{staticClass:"fc-input-label-txt pT10 text-uppercase f11 bold"},[_vm._v(" ALARM MESSAGE ")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(_vm._s(_vm.ruleTemplate.name))]),_c("div",{staticClass:"fc-input-label-txt pT20 text-uppercase f11 bold"},[_vm._v(" PROBLEMS ")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(_vm._s(_vm.ruleTemplate.problem))]),_c("div",{staticClass:"fc-input-label-txt pT20 text-uppercase f11 bold"},[_vm._v(" Possible Causes ")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(_vm._s(_vm.ruleTemplate.possible_causes))]),_c("div",{staticClass:"fc-input-label-txt pT20 text-uppercase f11 bold"},[_vm._v(" Possible Solution ")]),_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.ruleTemplate.possible_solution)+" ")])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){_vm.placeHolderVisibility=!0}}},[_vm._v("USE TEMPLATE")])],1)]):_vm._e()]),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:_vm.placeHolderVisibility,title:"Template","append-to-body":!0,width:"30%",height:"40%"},on:{"update:visible":function($event){_vm.placeHolderVisibility=$event}}},[_c("div",{staticClass:"height300 overflow-y-scroll pB50"},_vm._l(_vm.groupedPlaceHolder,(function(templates,category){return _c("div",{key:category},[_c("div",{staticClass:"fc-modal-sub-title text-uppercase line-height18"},[_vm._v(" "+_vm._s(category)+" ")]),_vm._l(templates,(function(fields,index){return _c("el-row",{directives:[{name:"show",rawName:"v-show",value:fields.selection_criteria,expression:"fields.selection_criteria"}],key:index,staticClass:"pT10 pB10 flex-middle"},[_c("el-col",{attrs:{span:24}},["Field"===fields.selection_criteria.displayType?_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Field "+_vm._s(fields.label)+" ")]):_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(_vm._s(fields.label))]),"ASSETCHOOSER"===fields.selection_criteria.displayType?_c("div",[_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{disabled:""},model:{value:_vm.resourceLabel,callback:function($$v){_vm.resourceLabel=$$v},expression:"resourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0}},slot:"suffix"})])],1):"DURATION"===fields.selection_criteria.displayType?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Interval"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_c("el-option",{key:1,attrs:{label:"Last 1 Hour",value:3600}}),_c("el-option",{key:3,attrs:{label:"Last 3 Hour",value:10800}}),_c("el-option",{key:6,attrs:{label:"Last 6 Hour",value:21600}}),_c("el-option",{key:12,attrs:{label:"Last 12 Hour",value:43200}})],1)],1):"field"===fields.selection_criteria.displayType?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},_vm._l(_vm.thresholdFields,(function(field){return _c("el-option",{key:field.name+field.id,attrs:{label:field.displayName,value:field.name}})})),1)],1):"NUMBER"===fields.selection_criteria.displayType?_c("div",[_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{type:"number"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}})],1):"Radio"===fields.selection_criteria.displayType?_c("div",[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"true"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_vm._v(_vm._s(fields.selection_criteria.trueVal))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"false"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_vm._v(_vm._s(fields.selection_criteria.falseVal))])],1):_c("el-",{attrs:{span:12}},[_c("div",{staticClass:"fc-black-12 text-left bold"},[_vm._v(" "+_vm._s(fields.default_value)+" ")])]),_c("el-col",{staticClass:"mT10 pL20",attrs:{span:12}})],1)],1)}))],2)})),0),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.placeHolderVisibility=!1}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.createRules()}}},[_vm._v("Create Rule")])],1)]),_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,query:_vm.resourceQuery,showAsset:!0,disable:!0},on:{associate:function(data){return _vm.associateResource(data,"assets")},"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1)},staticRenderFns=[],esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),SpaceAssetMultiChooser=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(673362)),vuex_esm=__webpack_require__(420629),templateHepler=__webpack_require__(663356),TemplateSummaryvue_type_script_lang_js={mixins:[templateHepler/* default */.Z],props:["visibility","template"],components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity")},watch:{template:{handler:function(){this.groupedPlaceHolder=this.$helpers.cloneObject(this.placeHolderGroupFields())}}},data:function(){return{templates:[],chooserVisibility:!1,selectedResourceList:[],resourceQuery:null,selectedMetricFields:null,groupedPlaceHolder:[],thresholdFields:null,placeHolderVisibility:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),(0,vuex_esm/* mapGetters */.Se)(["getAlarmSeverityByName"])),{},{showDialog:function(){return this.visibility},ruleTemplate:function(){return this.template},selectedCategory:function(){var _this=this;if(this.ruleTemplate&&this.ruleTemplate.category){var category=this.assetCategory.filter((function(d){return d.name===_this.ruleTemplate.category}));return category}return null},resourceData:function(){return{assetCategory:this.selectedCategory?this.selectedCategory[0].id:null,isIncludeResource:this.isIncludeResource,selectedResources:Array.isArray(this.selectedResourceList)?this.selectedResourceList.map((function(resource){return{id:resource&&"object"===(0,esm_typeof/* default */.Z)(resource)?resource.id:resource}})):this.selectedResourceList.id}},resourceLabel:function(){if(this.ruleTemplate.category){var message,category=this.selectedCategory,selectedCount=this.selectedResourceList.length;if(selectedCount){var includeMsg=this.isIncludeResource?"included":"excluded";if(1===selectedCount)return this.selectedResourceList[0].name;message=selectedCount+" "+category[0].name+(selectedCount>1?"s":"")+" "+includeMsg}else message="All "+category[0].name+"s";return message}return this.selectedResourceList.id>0?this.selectedResourceList.name:null}}),mounted:function(){this.ruleTemplate&&(this.groupedPlaceHolder=this.placeHolderGroupFields())},methods:{createRules:function(){var _this2=this,placeHolder={},index=0;Object.keys(this.groupedPlaceHolder).forEach((function(key){_this2.groupedPlaceHolder[key].forEach((function(d,i){if("ASSETCHOOSER"===d.selection_criteria.displayType&&_this2.selectedResourceList.length>0){var fieldName=_this2.isIncludeResource?"includeResource":"excludeResource";d.uniqueId=fieldName,_this2.selectedResourceList.length>0?d.default_value=_this2.selectedResourceList.map((function(resource){return resource.id})):d.default_value=null}placeHolder[index]=d,index++}))}));var params={id:this.ruleTemplate.id,placeHolder:placeHolder},url="/v2/rules/template/createRule";this.$http.post(url,params).then((function(response){0===response.data.responseCode&&response.data.result&&(_this2.$message.success("Rule created successfully"),_this2.$router.push({path:"active"}))})).catch((function(error){_this2.$message.success("Something went wrong")}))},loadThresholdFields:function(id){var _this3=this;this.thresholdFields=[],this.$store.dispatch("formulabuilder/loadAssetReadings",{assetCategoryId:id}).then((function(){_this3.thresholdFields=_this3.$store.getters["formulabuilder/getAssetReadings"](id,!0)}))},getFieldDisplayName:function(name){var fieldObj;return this.thresholdFields.filter((function(d){d.name===name&&(fieldObj=d)})),fieldObj},checkFields:function(){this.loadThresholdFields(this.selectedCategory[0].id)},closeDialog:function(){this.$emit("update:visibility",!1)},placeHolderGroupFields:function(){var _this4=this;return this.checkFields(),Object.keys(this.ruleTemplate.placeHolder).forEach((function(key){_this4.templates.push(_this4.ruleTemplate.placeHolder[key])})),this.groupByField(this.templates,"type")},associateResource:function(selectedObj,type){"assets"===type?selectedObj.resourceList&&selectedObj.resourceList.length&&(this.selectedResourceList=selectedObj.resourceList,this.isIncludeResource=selectedObj.isInclude):this.selectedResourceList=selectedObj,this.chooserVisibility=!1,this.resourceQuery=null}}},rules_TemplateSummaryvue_type_script_lang_js=TemplateSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(rules_TemplateSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TemplateSummary=component.exports},
/***/270889:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AlarmRulesTemplateSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/rules/v1/AlarmRulesTemplateSummary.vue?vue&type=template&id=1c244e19
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-v1-rules-Cbig"},[_c("div",{staticClass:"fc-v1-rules-Cbig-sidebar"},[_c("el-header",{staticClass:"p20 pB0 fc-v1-rules-sidebar-header",attrs:{height:"60"}},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black-10 text-uppercase bold summary-back",on:{click:function($event){return _vm.$router.push({path:"all"})}}},[_c("i",{staticClass:"el-icon-back mR10"}),_vm._v(" "+_vm._s(_vm.$t("common._common.back_list"))+" ")]),_c("div",{staticClass:"rules-search-ico pointer",staticStyle:{visibility:"hidden"}},[_c("i",{staticClass:"el-icon-search"})])])]),_c("div",{staticClass:"fc-v1-rules-Cbig-sidebar-scroll"},[_c("div",{staticClass:"pT20 pB10 fc-text-pink12 bold pL30 text-uppercase text-left"},[_vm._v(" "+_vm._s(_vm.$t("servicecatalog.setup.category"))+" ")]),_c("div",{staticClass:"fc-v1-rules-sidelist-block"},[_c("div",{staticClass:"fc-v1-rules-sidelist-item",class:{listActive:null==_vm.active_el_all},on:{click:function($event){_vm.filterTemplates(null,2),_vm.activate(null,2),_vm.selectedTree=1}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.all"))+" ")]),_vm._l(_vm.assetCategories,(function(value){return _c("div",{key:value,staticClass:"fc-v1-rules-sidelist-item",class:{listActive:_vm.active_el_all==value},on:{click:function($event){_vm.filterTemplates(value,2),_vm.activate(value,2),_vm.selectedTree=2}}},[_vm._v(" "+_vm._s(value)+" ")])}))],2),_c("div",{staticClass:"fc-text-pink12 text-uppercase bold pL30 pT20 p20 pB10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended"))+" ")]),_c("div",{staticClass:"fc-v1-rules-sidelist-block"},[_c("div",{staticClass:"fc-v1-rules-sidelist-item",class:{listActive:null==_vm.active_el},on:{click:function($event){_vm.filterTemplates(null,1),_vm.activate(null,1),_vm.selectedTree=1}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.all"))+" ")]),_vm._l(_vm.categoryTemplatesList,(function(templates,value){return _c("div",{key:value,staticClass:"fc-v1-rules-sidelist-item",class:{listActive:_vm.active_el==value},on:{click:function($event){_vm.filterTemplates(value,1),_vm.activate(value,1),_vm.selectedTree=1}}},[_vm._v(" "+_vm._s(value)+" ")])}))],2)])],1),_c("div",{staticClass:"fc-v1-rules-Cbig-main"},[_c("el-header",{staticClass:"pL0 pR0",attrs:{height:"80"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticStyle:{width:"79.6% !important"}},[_c("el-input",{staticClass:"fc-rules-temp-search fc-input-full-border",attrs:{autofocus:"",placeholder:_vm.$t("common._common.search_custom_rules")},on:{keyup:_vm.quickSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}})],1),_c("div",{staticClass:"width10 pL20"},[_c("el-button",{staticClass:"fc-border-btn-green",on:{click:_vm.quickSearch}},[_vm._v(_vm._s(_vm.$t("common._common.search")))])],1)])]),_c("div",{staticClass:"fc-v1-rules-Cbig-main-scroll"},[Object.keys(_vm.filterRules).length<1?_c("div",{staticClass:"height80vh flex-middle justify-content-center flex-direction-column"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/alarmEmpty",iconClass:"icon text-center icon-xxxxlg emptystate-icon-size"}}),_c("div",{staticClass:"fc-black-dark f18 bold"},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_rule_template_available"))+" ")])],1):_c("div",{staticClass:"alarm-template-body"},[_c("div",_vm._l(_vm.filterRules,(function(templates,category){return _c("div",{key:category,staticClass:"fc-black-16 mB20"},[_c("div",{staticClass:"alarm-template-grid-sec"},_vm._l(templates,(function(item){return _c("div",{key:item.name,staticClass:"alarm-template-grid scale-up-center"},[_c("div",{staticClass:"alarm-template-inner-body pointer",on:{click:function($event){return _vm.Retrieve(item,"Summary")}}},[_c("div",{staticClass:"fc-black2-16 textoverflow-height-ellipsis4"},[_vm._v(" "+_vm._s(item.name)+" ")]),_c("div",{staticClass:"fc-black-com f13 line-height20 mT10 fw4 textoverflow-height-ellipsis3"},[_vm._v(" "+_vm._s(item.description)+" ")])]),_c("div",{staticClass:"alarm-template-grid-footer flex-middle"},[_c("el-button",{staticClass:"fc-btn-grey-lg-border2 width100 border-left-right-bottom-none f11 bold",on:{click:function($event){_vm.Retrieve(item,"apply"),_vm.selectedTemplate=item,_vm.checked=!0}}},[_vm._v(_vm._s(_vm.$t("common.dashboard.apply_template")))])],1)])})),0)])})),0)])])],1)]),_c("el-dialog",{staticClass:"fc-tempdialog-center-container fc-dialog-center-container",attrs:{visible:_vm.dialogVisible,title:_vm.$t("common.header.template_warning"),width:"40%"},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("div",{staticClass:"height150"},[_c("el-row",[_c("el-col",{attrs:{span:2}},[_c("div",["Error"===_vm.title?_c("i",{staticClass:"el-icon-error label-txt-red f40"}):_vm._e(),"Warning"===_vm.title?_c("i",{staticClass:"el-icon-warning-outline warnig-icon f40"}):_vm._e()])]),_c("el-col",{staticClass:"pL10",attrs:{span:21}},[_c("div",[_vm.msg[0]?_c("div",{staticClass:"label-txt-black bold f16"},[_vm._v(" "+_vm._s(_vm.msg[0])+" ")]):_vm._e(),_vm.msg[1]?_c("div",{staticClass:"label-txt-black pT5"},[_vm._v(_vm._s(_vm.msg[1]))]):_vm._e(),_vm.msg[2]?_c("div",{staticClass:"label-txt-black"},[_vm._v(_vm._s(_vm.msg[2]))]):_vm._e()])])],1),3==_vm.dialogViewer?_c("div",{staticClass:"pT20"},[_c("el-checkbox",{attrs:{disabled:"true"},model:{value:_vm.checked,callback:function($$v){_vm.checked=$$v},expression:"checked"}}),_vm._v(_vm._s(_vm.$t("common.dialog.skip_unavailable_assets"))+" ")],1):_vm._e(),_c("div",{staticClass:"label-txt-black"})],1),_c("div",{staticClass:"dialpg-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==_vm.dialogViewer?_c("el-button",{staticClass:"btn-grey-fill width100",attrs:{type:"primary"},on:{click:function($event){_vm.dialogVisible=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.canel")))]):_c("div",[_c("el-button",{staticClass:"modal-btn-cancel",attrs:{type:"primary"},on:{click:function($event){_vm.dialogVisible=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.placeholdervisible()}}},[_vm._v(_vm._s(_vm.$t("common.header.proceed")))])],1)],1)]),_c("el-dialog",{staticClass:"fc-dialog-header-hide fc-dialog-approval-reject new-rule-template-dialog fc-dialog-center-body-p0",attrs:{visible:_vm.showPlaceholder,width:"35%","append-to-body":!0},on:{"update:visible":function($event){_vm.showPlaceholder=$event},childToParent:_vm.onChildClick}},[_c("place-holder",{attrs:{ruleTemplate:_vm.selectedTemplate,appliedDetail:_vm.ruleAppliedDetail,checkedApply:_vm.checked},on:{childToParent:_vm.onChildClick}}),_c("template-summary",{directives:[{name:"show",rawName:"v-show",value:_vm.templateSummary,expression:"templateSummary"}],attrs:{visibility:_vm.templateSummary,template:_vm.selectedTemplate},on:{"update:visibility":function($event){_vm.templateSummary=$event}}})],1)],1)},staticRenderFns=[],TemplateSummary=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(725704)),PlaceHolder=__webpack_require__(221803),templateHepler=__webpack_require__(663356),AlarmRulesTemplateSummaryvue_type_script_lang_js={data:function(){return{input:"",showPlaceholder:!1,templates:[],alltemplates:[],categoryTemplates:null,categoryTemplatesList:null,allcategoryTemplates:null,allcategoryTemplatesList:null,selectedCategory:null,selectedTemplate:null,value:"",usedTemplate:{},customRuleDialog:!1,templateSummary:!1,active_el:-1,active_el_all:null,filterRules:[],quickSearchQuery:"",ruleAppliedDetail:null,checked:!0,alreadyUsed:!1,dialogVisible:!1,allAppliedCaseDialog:!1,itemused:null,viewPartialAssets:!1,viewPartialAssetsChild:!1,dialogViewer:0,msg:[],title:"",assetCategories:["AHU","FAHU","FCU"]}},created:function(){this.$store.dispatch("loadAssetCategory")},components:{TemplateSummary:TemplateSummary/* default */.Z,PlaceHolder:PlaceHolder/* default */.Z},mixins:[templateHepler/* default */.Z],mounted:function(){
// this.loadTemplates()
this.loadActiveTemplates()},methods:{onChildClick:function(value){this.showPlaceholder=!1},dialogMessage:function(selectedItem){this.msg=[],1==this.dialogViewer?("apply"===selectedItem&&(this.dialogVisible=!0),this.title="Error",this.msg[0]="Rule cannot be applied since no readings for assets are available",this.msg[1]="Tip: Commission asset readings to apply rule"):2==this.dialogViewer?this.placeholdervisible():3==this.dialogViewer?("apply"===selectedItem&&(this.dialogVisible=!0),this.title="Warning",this.msg[0]="Few assets have missing readings",this.msg[1]="Asigned assets: Rule will be applied to "+this.ruleAppliedDetail.available+" assets",this.msg[2]="Unassigned assets: Rule will be skipped for "+this.ruleAppliedDetail.unavailable+" assets"):4==this.dialogViewer?("apply"===selectedItem&&(this.dialogVisible=!0),this.title="Warning",this.msg[0]="Rule template in use",this.msg[1]="Do you want to create a duplicate of the rule?"):5==this.dialogViewer&&("apply"===selectedItem&&(this.dialogVisible=!0),this.msg[0]="Rule template cannot be applied since the required readings for assets are not available",this.msg[1]="Do you want to create duplicate of the rule")},createrule:function(){this.createRule(this.itemused)},activate:function(el,val){1===val&&(this.active_el=el,this.active_el_all=-1),2===val&&(this.active_el_all=el,this.active_el=-1)},placeholdervisible:function(){1==this.checked?(this.showPlaceholder=!0,this.dialogVisible=!1):(this.$message.error(this.$t("common._common.rule_cannot_be_applied_without_skipping")),this.dialogVisible=!0)},Retrieve:function(para,selectedItem){var _this=this,params={category:para.category,Fields:para.field_metric},url="/v2/ruleTemplate/getAssetAvailabilityCount";this.$http.post(url,{params:params}).then((function(response){_this.alreadyUsed=!1,_this.ruleAppliedDetail=response.data.result.availability,_this.assetsIds=response.data.result.assets,_this.usedTemplate[para.id]?(_this.alreadyUsed=!0,_this.dialogViewer=4,_this.ruleAppliedDetail.available==_this.ruleAppliedDetail.totalAssets&&(_this.dialogViewer=5)):_this.ruleAppliedDetail.unavailable==_this.ruleAppliedDetail.totalAssets?_this.dialogViewer=1:_this.ruleAppliedDetail.available==_this.ruleAppliedDetail.totalAssets?(_this.itemused=para,_this.dialogViewer=2):
//this.showPlaceholder = true
_this.dialogViewer=3,"apply"===selectedItem&&_this.dialogMessage(selectedItem),"Summary"===selectedItem&&(_this.dialogMessage(selectedItem),_this.openTemplateSummary(para))})).catch((function(_ref){var message=_ref.message;_this.$message.error(message)}))},quickSearch:function(){var _this2=this,string=this.quickSearchQuery;string?Object.keys(this.filterRules).forEach((function(key){_this2.filterRules[key]=_this2.filterRules[key].filter((function(cust){return cust.name.toLowerCase().indexOf(string.toLowerCase())>=0}))})):1===this.selectedTree?this.filterRules=this.$helpers.cloneObject(this.categoryTemplates):this.filterRules=this.$helpers.cloneObject(this.allcategoryTemplates)},openTemplateSummary:function(item){item.dialogViewer=this.dialogViewer,item.message=this.msg,item.message.title=this.title,item.ruleId=this.usedTemplate[item.id],
// this.$store.setter.ruleTemplate.setSelectedTemplate(item)
this.$store.dispatch("ruleTemplate/setSelectedTemplate",item),this.$store.dispatch("ruleTemplate/setSelectedTemplateNew",this.ruleAppliedDetail),this.$router.push({path:"templates/"+item.id+"/summary"})},loadTemplates:function(){var _this3=this,url="/v2/ruleTemplate/recommendedList";this.$http.get(url).then((function(response){response.data&&(_this3.templates=[],_this3.allTemplates=[],response.data.result.templates.recommended.forEach((function(d){d.json.fdd_rule.id=d.id,_this3.templates.push(d.json.fdd_rule)})),response.data.result.templates.all.forEach((function(d){d.json.fdd_rule.id=d.id,_this3.allTemplates.push(d.json.fdd_rule)})),_this3.alltemplates=_this3.$helpers.cloneObject(_this3.allTemplates),_this3.categoryTemplatesList=_this3.groupByField(_this3.templates,"category"),_this3.allcategoryTemplatesList=_this3.groupByField(_this3.allTemplates,"category"),_this3.categoryTemplates=_this3.$helpers.cloneObject(_this3.categoryTemplatesList),_this3.allcategoryTemplates=_this3.$helpers.cloneObject(_this3.allcategoryTemplatesList),_this3.filterRules=_this3.$helpers.cloneObject(_this3.categoryTemplatesList))}))},loadActiveTemplates:function(){var _this4=this,url="/v2/rules/template/fetchActiveTemplates";this.$http.get(url).then((function(response){response.data&&(
// this.usedTemplate = response.data.result.ruleTemplateRel
response.data.result.ruleTemplateRel.forEach((function(d){_this4.usedTemplate[d.defaultTemplateId]=d.ruleId})),_this4.loadTemplates())}))},createRule:function(item){var _this5=this;item.placeHolder&&Object.keys(item.placeHolder).forEach((function(key){"ASSETCHOOSER"===item.placeHolder[key].displayType&&(item.placeHolder[key].default_value=null)}));var params={id:item.id,placeHolder:item.placeHolder},url="/v2/rules/template/createRule";this.$http.post(url,params).then((function(response){0===response.data.responseCode&&response.data.result&&(_this5.$message.success(_this5.$t("common._common.rule_created_successfully")),_this5.$router.push({path:"active"}))})).catch((function(error){_this5.$message.success(_this5.$t("common.dialog.something_went_wrong"))}))},filterTemplates:function(selectedCategoryParameter,val){var _this6=this;this.selectedCategory=selectedCategoryParameter,this.categoryTemplates=this.$helpers.cloneObject(this.categoryTemplatesList),this.allcategoryTemplates=this.$helpers.cloneObject(this.allcategoryTemplatesList),1===val&&(this.selectedCategory?(Object.keys(this.categoryTemplatesList).filter((function(key){return key!==_this6.selectedCategory})).forEach((function(key){return delete _this6.categoryTemplates[key]})),this.filterRules=this.$helpers.cloneObject(this.categoryTemplates)):this.filterRules=this.$helpers.cloneObject(this.categoryTemplates)),2===val&&(this.selectedCategory?(Object.keys(this.allcategoryTemplatesList).filter((function(key){return key!==_this6.selectedCategory})).forEach((function(key){return delete _this6.allcategoryTemplates[key]})),this.filterRules=this.$helpers.cloneObject(this.allcategoryTemplates)):this.filterRules=this.$helpers.cloneObject(this.allcategoryTemplates))}}},v1_AlarmRulesTemplateSummaryvue_type_script_lang_js=AlarmRulesTemplateSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_AlarmRulesTemplateSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmRulesTemplateSummary=component.exports},
/***/221803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PlaceHolder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/rules/v1/PlaceHolder.vue?vue&type=template&id=118c22d6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.ruleId?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_vm._m(0)]):_vm._e(),_vm._m(1),_c("div",{staticClass:"pL30 pR30 pT20 height100 overflow-y-scroll pB100"},_vm._l(_vm.groupedPlaceHolder,(function(templates,category){return _c("div",{key:category},_vm._l(templates,(function(fields,index){return _c("el-row",{directives:[{name:"show",rawName:"v-show",value:fields.selection_criteria,expression:"fields.selection_criteria"}],key:index,staticClass:"pT10 pB10 flex-middle"},[_c("el-col",{attrs:{span:24}},["Field"===fields.selection_criteria.displayType?_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Field "+_vm._s(fields.label)+" ")]):_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(_vm._s(fields.label))]),"ASSETCHOOSER"===fields.selection_criteria.displayType?_c("div",[_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{disabled:""},model:{value:_vm.resourceLabel,callback:function($$v){_vm.resourceLabel=$$v},expression:"resourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0}},slot:"suffix"})])],1):"DURATION"===fields.selection_criteria.displayType?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Interval"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_c("el-option",{key:1,attrs:{label:"Last 1 Hour",value:3600}}),_c("el-option",{key:3,attrs:{label:"Last 3 Hour",value:10800}}),_c("el-option",{key:6,attrs:{label:"Last 6 Hour",value:21600}}),_c("el-option",{key:12,attrs:{label:"Last 12 Hour",value:43200}})],1)],1):"field"===fields.selection_criteria.displayType?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},_vm._l(_vm.thresholdFields,(function(field){return _c("el-option",{key:field.name+field.id,attrs:{label:field.displayName,value:field.name}})})),1)],1):"NUMBER"===fields.selection_criteria.displayType?_c("div",[_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{type:"number"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}})],1):"Radio"===fields.selection_criteria.displayType?_c("div",[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"true"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_vm._v(_vm._s(fields.selection_criteria.trueVal))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"false"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_vm._v(_vm._s(fields.selection_criteria.falseVal))])],1):_c("el-",{attrs:{span:12}},[_c("div",{staticClass:"fc-black-12 text-left bold"},[_vm._v(" "+_vm._s(fields.default_value)+" ")])]),_c("el-col",{staticClass:"mT10 pL20",attrs:{span:12}})],1)],1)})),1)})),0),2===_vm.dialogViewer?_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{attrs:{disabled:_vm.ruleId,type:"button fc-full-btn-fill-green"},on:{click:function($event){return _vm.createRules()}}},[_vm._v("Create rule")])],1):_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.backtomessage()}}},[_vm._v(" Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.createRules()}}},[_vm._v("Create rule")])],1),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Message",visible:_vm.showDialog,"append-to-body":!0,width:"30%"},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"height150"},[_vm.appliedDetail.available==_vm.appliedDetail.totalAssets?_c("div",{staticClass:"label-txt-black"},[_vm._v(" Rule successfully applied to all assets ("+_vm._s(_vm.appliedDetail.available)+" assets) ")]):_c("div",{staticClass:"label-txt-black"},[_vm._v(" Rule successfully applied to "+_vm._s(_vm.appliedDetail.available)+" assets ")]),_c("div",[_vm._v("Category: "+_vm._s(_vm.ruleTemplate.category))]),_c("div",[_vm._v("Message: "+_vm._s(_vm.ruleTemplate.name))])]),_c("div",{staticClass:"dialpg-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"btn-grey-fill width100",attrs:{type:"primary"},on:{click:function($event){return _vm.pushPage()}}},[_vm._v("Close")])],1)]),_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,query:_vm.resourceQuery,showAsset:!0,disable:!0},on:{associate:function(data){return _vm.associateResource(data,"assets")},"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" This template is already been used. ")])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"rules-sum-header"},[_c("div",{staticClass:"fc-black-14 fwBold text-left text-uppercase"},[_vm._v(" Template Summary ")])])}],objectSpread2=__webpack_require__(595082),SpaceAssetMultiChooser=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(673362)),templateHepler=__webpack_require__(663356),vuex_esm=__webpack_require__(420629),PlaceHoldervue_type_script_lang_js={mixins:[templateHepler/* default */.Z],props:["ruleTemplate","templateId","ruleId","appliedDetail","dialogViewer"],components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z},data:function(){return{templates:[],groupedPlaceHolder:[],chooserVisibility:!1,selectedResourceList:[],resourceQuery:null,showDialog:!1,childDialogClose:!1}},mounted:function(){this.ruleTemplate&&(this.groupedPlaceHolder=this.placeHolderGroupFields())},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{selectedCategory:function(){var _this=this;if(this.ruleTemplate&&this.ruleTemplate.category){var category=this.assetCategory.filter((function(d){return d.name===_this.ruleTemplate.category}));return category}return null},resourceData:function(){return{assetCategory:this.selectedCategory[0].id}},resourceLabel:function(){if(this.selectedCategory){var message,category=this.selectedCategory,selectedCount=this.selectedResourceList.length;if(selectedCount){var includeMsg=this.isIncludeResource?"included":"excluded";if(1===selectedCount)return this.selectedResourceList[0].name;message=selectedCount+" "+category[0].name+(selectedCount>1?"s":"")+" "+includeMsg}else message="All "+category[0].name+"s";return message}return this.selectedResourceList.id>0?this.selectedResourceList.name:null}}),methods:{backtomessage:function(){this.$emit("childToParent",!0)},placeHolderGroupFields:function(){var _this2=this;
// this.checkFields()
return Object.keys(this.ruleTemplate.placeHolder).forEach((function(key){_this2.templates.push(_this2.ruleTemplate.placeHolder[key])})),this.groupByField(this.templates,"type")},checkFields:function(){this.loadThresholdFields(this.selectedCategory[0].id)},associateResource:function(selectedObj,type){"assets"===type?selectedObj.resourceList&&selectedObj.resourceList.length&&(this.selectedResourceList=selectedObj.resourceList,this.isIncludeResource=selectedObj.isInclude):this.selectedResourceList=selectedObj,this.chooserVisibility=!1,this.resourceQuery=null},pushPage:function(){this.showDialog=!1,this.childDialogClose=!0,this.$emit("childToParent",this.childDialogClose);var url="/app/fa/rules/newtemplates";this.$router.push({path:url})},createRules:function(){var _this3=this,placeHolder={},index=0;Object.keys(this.groupedPlaceHolder).forEach((function(key){_this3.groupedPlaceHolder[key].forEach((function(d,i){if("ASSETCHOOSER"===d.selection_criteria.displayType&&_this3.selectedResourceList.length>0){var fieldName=_this3.isIncludeResource?"includeResource":"excludeResource";d.uniqueId=fieldName,_this3.selectedResourceList.length>0?d.default_value=_this3.selectedResourceList.map((function(resource){return resource.id})):d.default_value=null}placeHolder[index]=d,index++}))}));var params={id:this.ruleTemplate.id,placeHolder:placeHolder},url="/v2/rules/template/createRule";this.$http.post(url,params).then((function(response){0===response.data.responseCode&&response.data.result&&_this3.$message.success("Rule created successfully")})).catch((function(error){_this3.$message.success("Something went wrong")})),this.showDialog=!0}}},v1_PlaceHoldervue_type_script_lang_js=PlaceHoldervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_PlaceHoldervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PlaceHolder=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/70889.js.map