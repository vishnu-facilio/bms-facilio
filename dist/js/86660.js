"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[86660],{
/***/686660:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return DepreciationSchedule}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/cost/DepreciationSchedule.vue?vue&type=template&id=20202dce
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex"},[_c("portal",{attrs:{to:_vm.widget.key+"-title-section"}},[_c("div",{staticClass:"widget-header d-flex mB15 mT5 width100"},[_c("div",{staticClass:"width100"},[_c("div",{staticClass:"widget-header-name"},[_vm._v("DEPRECIATION SCHEDULE")])])])]),_c("depreciation-schedule",{attrs:{asset:_vm.details,showMethod:!0}})],1)},staticRenderFns=[],ScheduleList=__webpack_require__(849621),DepreciationSchedulevue_type_script_lang_js={props:["details","widget"],components:{DepreciationSchedule:ScheduleList/* default */.Z}},cost_DepreciationSchedulevue_type_script_lang_js=DepreciationSchedulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(cost_DepreciationSchedulevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DepreciationSchedule=component.exports},
/***/849621:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScheduleList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/depreciation/ScheduleList.vue?vue&type=template&id=7cc11731
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"depreciation-list"},[_vm.canShowMethod?_c("div",{staticClass:"flex-middle justify-content-space p20 width100 "},[_vm.loading?_c("span",{staticClass:"loading-shimmer width250px",staticStyle:{height:"16px","border-radius":"5px"}}):_c("div",{staticClass:"label-txt-black bold"},[_vm._v(" Depreciation Method - "),_c("span",{staticClass:"fw4"},[_vm._v(_vm._s(_vm.depreciationMethod)+" ")])])]):_vm._e(),_c("div",[_vm.loading?_c("div",{staticClass:"mT8"},_vm._l([1,2,3,4],(function(index){return _c("div",{key:index,staticClass:"d-flex"},_vm._l([0,1],(function(idx){return _c("div",{key:idx,class:["d-flex",0!==idx?"width100":"mL-20"]},[_c("span",{class:["lines loading-shimmer",0===idx?"width210px":"width100"]})])})),0)})),0):_vm.$validation.isEmpty(_vm.depreciationTable)?_c("div",{staticClass:"text-center d-flex flex-direction-column mT30",staticStyle:{color:"#324056"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" No depreciation schedule applied ")])],1):_c("div",{staticClass:"mT8"},[_c("el-table",{ref:"depreciationSchedule",staticClass:"mL15",staticStyle:{width:"98%"},attrs:{data:_vm.depreciationTable,height:"auto",fit:!0,"cell-style":{padding:"10px 20px"},"header-row-class-name":"hide","row-class-name":_vm.rowStyle,"cell-class-name":_vm.cellStyle}},[_c("el-table-column",{attrs:{fixed:"","min-width":"250",prop:"displayName"}}),_vm._l(_vm.depreciationSchedule.length,(function(data,index){return _c("el-table-column",{key:index,attrs:{"min-width":"150",align:"right",prop:"col"+index}})}))],2)],1)])])},staticRenderFns=[],api=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(843843),__webpack_require__(212826),__webpack_require__(169358),__webpack_require__(32284)),validation=__webpack_require__(990260),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),DepreciationConstant=__webpack_require__(793428),ScheduleListvue_type_script_lang_js={props:["asset","selectedDepreciationId","showMethod"],data:function(){return{depreciationSchedule:null,depreciation:null,loading:!1}},created:function(){(0,validation/* isEmpty */.xb)(this.selectedDepreciationId)?this.getDepreciation():this.fetchDepreciation()},computed:{depreciationTable:function(){var _this=this,tableData=[],depreciationSchedule=this.depreciationSchedule,depreciation=this.depreciation,$currency=this.$currency;if(!(0,validation/* isEmpty */.xb)(depreciationSchedule)&&!(0,validation/* isEmpty */.xb)(depreciation)){var listObjKeys=["calculatedDate","openPrice","depreciatedAmount","currentPrice"];listObjKeys.forEach((function(key){var columnData={};"calculatedDate"===key?depreciationSchedule.forEach((function(listData,index){columnData["col".concat(index)]=moment_timezone_default()(listData[key]).tz(_this.$timezone).format("MMM YYYY").toUpperCase()})):"openPrice"===key?(columnData["col0"]=["$","₹"].includes($currency)?"".concat($currency).concat(_this.asset.unitPrice):"".concat(_this.asset.unitPrice).concat($currency),depreciationSchedule.forEach((function(listData,idx){var index=idx+1;index!==depreciationSchedule.length&&(["$","₹"].includes($currency)?columnData["col".concat(index)]="".concat($currency).concat(listData["currentPrice"]):columnData["col".concat(index)]="".concat(listData["currentPrice"]).concat($currency))}))):depreciationSchedule.forEach((function(listData,index){["$","₹"].includes($currency)?columnData["col".concat(index)]="".concat($currency).concat(listData[key]):columnData["col".concat(index)]="".concat(listData[key]).concat($currency)})),tableData.push(columnData)}));var data=["Opening Book Value","Depreciation","Ending Book Value"],_ref=depreciation||{},frequencyTypeEnum=_ref.frequencyTypeEnum;data.splice(0,0,frequencyTypeEnum),data.forEach((function(data,index){tableData[index].displayName=data}))}return tableData},currentDepreciationDate:function(){var depreciation=this.depreciation,frequencyTypes=this.frequencyTypes,today=moment_timezone_default()(new Date),dateToCompare=[];if(!(0,validation/* isEmpty */.xb)(depreciation)){var frequencyType=depreciation.frequencyType;if(frequencyType===frequencyTypes.MONTHLY)dateToCompare.push(today.month());else if([frequencyTypes.QUARTERLY,frequencyTypes.HALFYEARLY].includes(frequencyType)){var quarterDate=today.quarter();frequencyType===frequencyTypes.HALFYEARLY&&(DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.FIRSTHALFYEAR.includes(quarterDate)?quarterDate=1:DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.SECONDHALFYEAR.includes(quarterDate)&&(quarterDate=2)),dateToCompare.push(quarterDate)}dateToCompare.push(today.year())}return dateToCompare},currentDepreciationCol:function(){var currentDepreciationDate=this.currentDepreciationDate,depreciation=this.depreciation,depreciationSchedule=this.depreciationSchedule,frequencyTypes=this.frequencyTypes,currentCol=null;return(0,validation/* isEmpty */.xb)(currentDepreciationDate)||depreciationSchedule.forEach((function(listData,index){var dateRange=moment_timezone_default()(listData["date"]),frequencyType=depreciation.frequencyType,currentDateValue=[];if(frequencyType===frequencyTypes.MONTHLY)currentDateValue.push(dateRange.month());else if([frequencyTypes.QUARTERLY,frequencyTypes.HALFYEARLY].includes(frequencyType)){var quarterDate=dateRange.quarter();frequencyType===frequencyTypes.HALFYEARLY&&(DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.FIRSTHALFYEAR.includes(quarterDate)?quarterDate=1:DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.SECONDHALFYEAR.includes(quarterDate)&&(quarterDate=2)),currentDateValue.push(quarterDate)}currentDateValue.push(dateRange.year()),currentDepreciationDate.toString()===currentDateValue.toString()&&(currentCol=index+1)})),currentCol},frequencyTypes:function(){return Object.keys(DepreciationConstant/* FREQUENCY_TYPES */.ze).reduce((function(res,freq){return res[freq]=DepreciationConstant/* FREQUENCY_TYPES */.ze[freq].id,res}),{})},canShowMethod:function(){var depreciation=this.depreciation,depreciationTable=this.depreciationTable,showMethod=this.showMethod;return!(0,validation/* isEmpty */.xb)(depreciation)&&!(0,validation/* isEmpty */.xb)(depreciationTable)&&showMethod},depreciationMethod:function(){var _this$depreciation$de=this.depreciation.depreciationType,depreciationType=void 0===_this$depreciation$de?1:_this$depreciation$de;return DepreciationConstant/* DEPRECIATION_TYPES */.ik[depreciationType.toString()]}},watch:{selectedDepreciationId:{handler:function(newValue,oldValue){newValue&&newValue!==oldValue&&this.fetchDepreciation()},immediate:!0}},methods:{getDepreciation:function(){var _this2=this,url="v2/asset/depreciation/getForAsset",param={assetId:this.asset.id};this.loading=!0,api/* API */.bl.post(url,param).then((function(_ref2){var data=_ref2.data,error=_ref2.error;if(error)_this2.$message.error(error.messsage||"Error Occured");else if(_this2.depreciation=data.assetdepreciation,(0,validation/* isEmpty */.xb)(_this2.depreciation))_this2.loading=!1;else{var depreciation=_this2.depreciation,_ref3=depreciation||{},_ref3$assetDepreciati=_ref3.assetDepreciationRelList,assetDepreciationRelList=void 0===_ref3$assetDepreciati?[]:_ref3$assetDepreciati;_this2.$emit("appliedDepreciationId",depreciation.id),_this2.$emit("depreciationRel",assetDepreciationRelList[0]),_this2.fetchTableList()}}))},fetchTableList:function(){var _this3=this,url="v2/asset/depreciation/chart",id=this.depreciation.id,params={id:id,assetId:this.asset.id};api/* API */.bl.post(url,params).then((function(_ref4){var data=_ref4.data,error=_ref4.error;error?(_this3.$emit("error",error.message),_this3.canShowMethod&&_this3.$message.error(error.message||"Error Occured"),_this3.depreciationSchedule=null):_this3.depreciationSchedule=data.depreciationList||[],_this3.loading=!1}))},fetchDepreciation:function(){var _this4=this,param={id:this.selectedDepreciationId};this.loading=!0,api/* API */.bl.fetchRecord("assetdepreciation",param).then((function(_ref5){var assetdepreciation=_ref5.assetdepreciation,error=_ref5.error;error?(_this4.$message.error(error.messsage||"Error Occured"),_this4.depreciation=null,_this4.loading=!1):(_this4.depreciation=assetdepreciation,_this4.fetchTableList())}))},rowStyle:function(rowObject){var rowIndex=rowObject.rowIndex;return 0===rowIndex?"bold-row":2===rowIndex?"border-top":void 0},cellStyle:function(cellObject){var rowIndex=cellObject.rowIndex,columnIndex=cellObject.columnIndex,currentDepreciationCol=this.currentDepreciationCol,cellClass="";return columnIndex===currentDepreciationCol&&(cellClass="high-light-background current-border-left-and-right",0===rowIndex?cellClass+=" current-border-top":3===rowIndex&&(cellClass+=" current-border-bottom")),cellClass}}},depreciation_ScheduleListvue_type_script_lang_js=ScheduleListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(depreciation_ScheduleListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScheduleList=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/86660.js.map