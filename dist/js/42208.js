"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[42208],{
/***/242208:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FMobileChart}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FMobileChart.vue?vue&type=template&id=79f0883a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.chartContext&&!1!==_vm.options.settings.chart?_c("div",{staticStyle:{"text-align":"center"}},[_c("div",[_vm.showAlarms&&_vm.showAlarmTitle?_c("div",{staticClass:"fc-alarms-chart-title"},[_vm._v(" Alarms ")]):_vm._e(),_c("div",{ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"})]),_vm.c3.chart&&_vm.chartContext.options.legend.show&&"workorder"===_vm.modulename?_c("f-mobile-wo-chart-legends",{ref:"mobilechartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,chartContext:_vm.chartContext,resultObj:_vm.resultObj,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap},on:{mobiledrilldown:_vm.mobiledrilldown}}):_vm.c3.chart&&_vm.chartContext.options.legend.show?_c("f-mobile-chart-legends",{ref:"mobilechartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,chartContext:_vm.chartContext,resultObj:_vm.resultObj,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap},on:{mobiledrilldown:_vm.mobiledrilldown}}):_vm._e(),_c("div",{staticClass:"fc-newchart-container"},[_c("div",{ref:"newChartEle",staticClass:"fc-new-chart pdf-chart",class:{"hide-y2-axis":_vm.options&&_vm.options.axis&&!1===_vm.options.axis.showy2axis}})])],1):_vm._e()])},staticRenderFns=[],billboard=(__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(879288),__webpack_require__(169358),__webpack_require__(872695)),basechart=__webpack_require__(503162),c3_helper=__webpack_require__(167021),FMobileChartLegends=__webpack_require__(38067),FMobileWoChartLegendsvue_type_template_id_6e949828_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"mobile-chart-legend"},[_vm.legends&&_vm.legends.length&&_vm.legends.length>1&&!(_vm.dataPoints&&_vm.dataPoints.length>1)||_vm.legends&&_vm.legends.length&&1===_vm.legends.length&&_vm.legends[0].children&&_vm.legends[0].children.length?_c("div",[_vm.legends&&_vm.legends.length&&_vm.time&&_vm.tooltipMap&&Object.keys(_vm.tooltipMap).length>1?_c("div",{staticClass:"mobile-legend-time"},[_vm._v(" "+_vm._s(_vm.time)+" ")]):_vm._e(),_vm.time?_vm._e():_c("div",{staticClass:"empty-time"})]):_vm._e(),_vm.xDataMap&&_vm.xValueMode?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right mobile-legend single-leagend active"},[_vm._l(_vm.xDataMap,(function(legend,key){return[_c("div",{key:key,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew text-left active",attrs:{title:legend.label}},[_c("el-color-picker",{staticStyle:{padding:"10px"},attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:_vm.xDataMap[key],callback:function($$v){_vm.$set(_vm.xDataMap,key,$$v)},expression:"xDataMap[key]"}}),_c("div",{staticClass:"textoverflow-ellipsis text-left newwo-leagend width100",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(legend)}}},[_c("div",{staticClass:"mobile-label",staticStyle:{width:"50%"}},[_vm._v(_vm._s(key))]),_vm.toolTipEnumValue&&_vm.toolTipEnumValue.id===key?_c("div",{staticClass:"mobile-tootltip-value f20"},[_vm._v(" "+_vm._s(_vm.toolTipEnumValue.value)+" ")]):_vm._e()]),_vm.toolTipEnumValue&&_vm.toolTipEnumValue.id===key&&_vm.dataPoints?_c("span",{staticClass:"drill-down-arrow",on:{click:function($event){return _vm.handleDrillDown(key)}}},[_c("i",{staticClass:"el-icon-right"})]):_vm._e()],1)]}))],2):_vm.legends&&_vm.legends.length?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right mobile-legend single-leagend"},[_vm._l(_vm.legends,(function(legend,index){return["datapoint"===legend.type?_c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==legend.visible,expression:"legend.visible !== false"}],key:index,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew text-left",class:{active:-1===_vm.hideLegend.indexOf(legend.key)},attrs:{title:legend.label},on:{mouseover:function($event){return _vm.focusLegend(legend.key)},mouseout:function($event){return _vm.unfocusLegend(legend.key)}}},[_c("el-color-picker",{staticStyle:{padding:"10px"},attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:legend.color,callback:function($$v){_vm.$set(legend,"color",$$v)},expression:"legend.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(legend.key)}}},[_c("div",{staticClass:"mobile-label"},[_vm._v(_vm._s(legend.label))]),_c("span",{staticClass:"mobile-tootltip-date"},[_vm._v(_vm._s(_vm.tooltipMapSingle&&_vm.tooltipMapSingle[legend.key]?_vm.tooltipMapSingle[legend.key]:_vm.getDefaultData(legend).label))]),_c("div",{staticClass:"mobile-tootltip-value f20"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[legend.key]?_vm.tooltipMap[legend.key]:_vm.getDefaultData(legend).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[legend.key]?_vm.tMapUnit[legend.key]:_vm.getDefaultData(legend).unit)}})])]),_vm.dataPoints?_c("span",{staticClass:"drill-down-arrow",on:{click:function($event){return _vm.handleDrillDown(legend.key)}}},[_c("i",{staticClass:"el-icon-right"})]):_vm._e()],1):legend.children&&legend.children.length?_vm._l(legend.children,(function(child,cidx){return _c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==child.visible,expression:"child.visible !== false"}],key:cidx,staticClass:"f-legendnew legendBoxNew legendBoxNew-fchart",class:{active:-1===_vm.hideLegend.indexOf(child.key)},attrs:{title:child.label},on:{mouseover:function($event){return _vm.focusLegend(child.key)},mouseout:function($event){return _vm.unfocusLegend(child.key)}}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:child.color,callback:function($$v){_vm.$set(child,"color",$$v)},expression:"child.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left mb-section",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(child.key)}}},[_c("span",{staticClass:"mobile-label"},[_vm._v(_vm._s(child.label))]),_c("span",{staticClass:"mobile-tootltip-value f20"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[child.key]?_vm.tooltipMap[child.key]:_vm.getDefaultData(child).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)}})])]),_vm.dataPoints?_c("span",{staticClass:"drill-down-arrow",on:{click:function($event){return _vm.handleDrillDown(child.key)}}},[_c("i",{staticClass:"el-icon-right"})]):_vm._e()],1)})):_vm._e()]}))],2):_vm._e()])},FMobileWoChartLegendsvue_type_template_id_6e949828_staticRenderFns=[],moment_timezone=(__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),FMobileWoChartLegendsvue_type_script_lang_js={props:["options","chart","multichart","reportVarianceData","chartContext","resultObj","xLabelMap","xValueMode"],data:function(){return{showLegendColorPicker:!1,hideLegend:[],tooltipMap:null,dataPoints:null,date:null,time:null,tMapUnit:null,showAgg:!0,tooltipMapSingle:null,toolTipEnumName:null,toolTipEnumValue:null,aggregateFunctions:[{label:"TOTAL",value:3,name:"sum"},{label:"AVG",value:2,name:"avg"},{label:"MIN",value:4,name:"min"},{label:"MAX",value:5,name:"max"},{label:"CURRENT VALUE",value:6,name:"lastValue"}]}},computed:{legends:function(){if(this.options){if(this.multichart){var mtype=this.multichart.split("_")[0],mkey=this.multichart.substring(this.multichart.indexOf("_")+1);return"group"===mtype?this.options.dataPoints.filter((function(dp){return dp.label===mkey})):this.options.dataPoints.filter((function(dp){return dp.key===mkey}))}return this.options.dataPoints}return null},xDataMap:function(){return!(!this.options||!this.options.xColorMap)&&this.options.xColorMap},showDefaultAgg:function(){return!this.resultObj||(!this.resultObj||0!==this.resultObj.xAggr)}},methods:{handleDrillDown:function(key){var d=this.dataPoints.find((function(rt){return rt.id===key}));this.$emit("mobiledrilldown",d)},focusLegend:function(key){this.chart.focus(key)},unfocusLegend:function(){this.chart.revert()},showTooltip:function(d,config,title){this.date=null,this.tooltipMap=null,this.tooltipMapSingle=null,this.tMapUnit=null,this.time=null,this.dataPoints=d;var tMap={},tMap2={},tdate={},tMapUnit={},time=null;if(this.xDataMap&&this.xValueMode)this.toolTipEnumValue=d[0]||null;else{for(var _loop=function(i){tMap[d[i].id]=null!==d[i].value?d[i].value:"No data",tMapUnit[d[i].id]=config.dataPoint.find((function(rt){return rt.key===d[i].id}))&&config.dataPoint.find((function(rt){return rt.key===d[i].id})).unitStr&&null!==d[i].value?config.dataPoint.find((function(rt){return rt.key===d[i].id})).unitStr:"",config.dataPoint&&config.dataPoint.length&&config.dataPoint[0].type&&"group"===config.dataPoint[0].type&&config.dataPoint[0].children&&config.dataPoint[0].children.length?(tMapUnit={},tMap={},tdate[d[i].id]=3===config.dataPoint.find((function(row){if(row.children){var data=row.children.find((function(rt){return rt.key===d[i].id}));if(data)return data}})).aggr?"TOTAL":"AVG",config.data&&config.data.length&&config.data.find((function(row){row.children&&row.children.find((function(rt){tMap[rt.key]=null!==rt.rawValue?rt.rawValue:"No data",tMapUnit[rt.key]=rt.rawunit&&null!==rt.rawValue?rt.rawunit:""}))})),tMap2[d[i].id]=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"),time=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a")):config.dataPoint&&config.dataPoint.length?"undefined"!==typeof config.dataPoint.find((function(rt){return rt.key===d[i].id}))&&config.dataPoint.find((function(rt){return rt.key===d[i].id})).aggr?(tdate[d[i].id]=3===config.dataPoint.find((function(rt){return rt.key===d[i].id})).aggr?"TOTAL":"AVG",time=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"),tMap2[d[i].id]=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a")):(tdate[d[i].id]=d[i].value,tMap2[d[i].id]=d[i].name):(tdate[d[i].id]=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"),time=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"),tMap2[d[i].id]=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"))},i=0;i<d.length;i++)_loop(i);this.tooltipMapSingle=tMap2,this.time=time,this.tooltipMap=tMap,this.tMapUnit=tMapUnit,this.date=tdate}this.showDefaultAgg||(this.showAgg=!1)},hideTooltip:function(){this.tooltipMap=null,this.date=null,this.time=null,this.tMapUnit=null,this.tooltipMapSingle=null,this.showAgg=!0,this.dataPoints=null},toggleLegend:function(key){var idx=this.hideLegend.indexOf(key);-1===idx?this.hideLegend.push(key):this.hideLegend.splice(idx,1),this.chart.toggle(key)},getDefaultData:function(legend){return{label:"",value:"",unit:""}}}},components_FMobileWoChartLegendsvue_type_script_lang_js=FMobileWoChartLegendsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FMobileWoChartLegendsvue_type_script_lang_js,FMobileWoChartLegendsvue_type_template_id_6e949828_render,FMobileWoChartLegendsvue_type_template_id_6e949828_staticRenderFns,!1,null,null,null)
/* harmony default export */,FMobileWoChartLegends=component.exports,JumpToHelper=__webpack_require__(921466),tooltip=__webpack_require__(460895),color_helper=__webpack_require__(794211),FMobileChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z],props:["resultObj","config","moduleName","reportType"],components:{FMobileChartLegends:FMobileChartLegends/* default */.Z,FMobileWoChartLegends:FMobileWoChartLegends},data:function(){return{showAlarms:!1,chartContext:null,chartId:Math.random().toString(36).substr(2,9),c3:{params:null,chart:null},mobile:{data:null}}},mounted:function(){this.render()},beforeDestroy:function(){tooltip/* default */.Z.hideTooltip(),this.c3&&this.c3.chart&&this.c3.chart.destroy(),this.chartContext=null,this.c3.params=null,this.c3.chart=null},computed:{modulename:function(){if(this.reportType&&2===this.reportType)return"workorder";if(this.reportType&&1===this.reportType)return"energydata";if(this.chartContext&&this.chartContext.options&&this.chartContext.options.dataPoints&&this.chartContext.options.dataPoints.length&&this.chartContext.options.dataPoints[0]){var modulename=this.chartContext.options.dataPoints[0].moduleName;return modulename&&"energydata"!==modulename?"workorder":"energydata"}return"energydata"},showAlarmTitle:function(){return!this.chartContext||!this.chartContext.options||!this.chartContext.options.hideAlarmTitle}},methods:{mobiledrilldown:function(data){this.$emit("mobiledrilldown",data)},render:function(){var _this=this;this.data&&(this.chartContext=null,this.$nextTick((function(){_this.chartContext={},_this.chartContext.options=_this.getOptions(),_this.chartContext.options.axis.x.culling={max:4},_this.chartContext.options.isMobile=!0,_this.chartContext.dateRange=_this.dateRange,_this.chartContext.data=_this.data,_this.chartContext.xValueMode=_this.isXValueMode(_this.chartContext.options,_this.data),_this.chartContext.unitMap=_this.getUnitMap(_this.options.dataPoints),_this.chartContext.enumMap=_this.getEnumMap(_this.options.dataPoints),_this.showAlarms=1===_this.chartContext.options.common.mode&&_this.chartContext.options.settings.alarm,_this.showAlarms&&(_this.chartContext.alarms=_this.alarms,_this.chartContext.options.size.height=_this.chartContext.options.size.height-100),_this.chartContext.tooltipCallback=function(d,config,title){_this.$refs["mobilechartLegend"]&&_this.$refs["mobilechartLegend"].showTooltip(d,config,title)},_this.chartContext.tooltipHideCallback=function(){_this.$refs["mobilechartLegend"]&&_this.$refs["mobilechartLegend"].hideTooltip()};var c3Params=c3_helper/* default */.Z.prepare(_this.chartContext);_this.$route.meta.source&&"analytics"===_this.$route.meta.source&&document.getElementsByClassName("newanalytics-generater")[0]&&(c3Params.size.height=c3Params.data&&c3Params.data.booleanChart?.1*document.getElementsByClassName("newanalytics-generater")[0].offsetHeight:.6*document.getElementsByClassName("newanalytics-generater")[0].offsetHeight),_this.$route.query&&_this.$route.query.reportId&&document.getElementById("q-app")&&(c3Params.size.width=document.getElementById("q-app").offsetWidth-30,c3Params.size.height=c3Params.data&&c3Params.data.booleanChart?document.getElementById("q-app").offsetHeight*(_this.$route.query&&_this.$route.query&&_this.$route.query.chartHeight?Number(_this.$route.query.chartHeight)/100:.1):document.getElementById("q-app").offsetHeight*(_this.$route.query&&_this.$route.query&&_this.$route.query.chartHeight?Number(_this.$route.query.chartHeight)/100:.5)),c3Params=c3_helper/* default */.Z.prepareMobile(c3Params),c3Params&&(c3Params.data.onclick=function(d){_this.$emit("mobiledrilldown",d)});var self=_this;_this.$nextTick((function(){if(self.showAlarms){var alarmsParams=_this.showBooleanAlarms?c3_helper/* default */.Z.prepareBooleanAlarmChart(_this.chartContext,c3Params.data.json.x,_this.alarms):c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,_this.alarms);self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],_this.$route.query&&document.getElementById("q-app")&&(alarmsParams.padding={top:10,left:30,right:15,bottom:-30},alarmsParams.size={width:document.getElementById("q-app").offsetWidth-20,height:47}),billboard.bb.generate(alarmsParams))}})),self.$refs["newChartEle"]?(c3Params.bindto=self.$refs["newChartEle"],self.c3.params=c3Params,c3Params.axis.x.tick.count=4,self.c3.chart=billboard.bb.generate(c3Params)):_this.$nextTick((function(){c3Params.bindto=self.$refs["newChartEle"],self.c3.params=c3Params,c3Params.axis.x.tick.count=4,self.c3.chart=billboard.bb.generate(c3Params)}))})))},isXValueMode:function(options,data){if("pie"===options.type||"donut"===options.type){if(options.xColorMap)return!0;if(data&&data.x&&2===Object.keys(data).length&&data.x.length<=15){for(var colors=color_helper/* default */.Z.newColorPicker(data.x.length),xColorMap={},i=0;i<data.x.length;i++){var xVal=data.x[i];xColorMap[xVal]=options.xColorMap&&options.xColorMap[xVal]?options.xColorMap[xVal]:colors[i]}return options.xColorMap=xColorMap,!0}}return!1},resize:function(){this.render(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.render()}}},components_FMobileChartvue_type_script_lang_js=FMobileChartvue_type_script_lang_js,FMobileChart_component=(0,componentNormalizer/* default */.Z)(components_FMobileChartvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FMobileChart=FMobileChart_component.exports},
/***/38067:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FMobileChartLegends}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FMobileChartLegends.vue?vue&type=template&id=5c77c80d
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"mobile-chart-legend"},[_vm.legends&&_vm.legends.length&&_vm.legends.length>1?_c("div",[_vm.legends&&_vm.legends.length&&_vm.time&&_vm.tooltipMap&&Object.keys(_vm.tooltipMap).length>1?_c("div",{staticClass:"mobile-legend-time"},[_vm._v(" "+_vm._s(_vm.time)+" ")]):_vm._e()]):_vm.legends&&_vm.legends.length&&1===_vm.legends.length&&_vm.legends[0].children&&_vm.legends[0].children.length?_c("div",[_vm.legends&&_vm.legends.length&&_vm.time&&_vm.tooltipMap&&Object.keys(_vm.tooltipMap).length>1?_c("div",{staticClass:"mobile-legend-time"},[_vm._v(" "+_vm._s(_vm.time)+" ")]):_vm._e(),_vm.time?_vm._e():_c("div",{staticClass:"empty-time 2"})]):_vm._e(),_vm.legends&&_vm.legends.length&&1===_vm.legends.length&"group"!==_vm.legends[0].type?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right mobile-legend single-leagend"},[_vm._l(_vm.legends,(function(legend,index){return["datapoint"===legend.type?_c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==legend.visible,expression:"legend.visible !== false"}],key:index,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew text-left",class:{active:-1===_vm.hideLegend.indexOf(legend.key)},attrs:{title:legend.label},on:{mouseover:function($event){return _vm.focusLegend(legend.key)},mouseout:function($event){return _vm.unfocusLegend(legend.key)}}},[_c("el-color-picker",{staticStyle:{padding:"10px"},attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:legend.color,callback:function($$v){_vm.$set(legend,"color",$$v)},expression:"legend.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(legend.key)}}},[_c("div",{staticClass:"mobile-label"},[_vm._v(_vm._s(legend.label))]),_c("span",{staticClass:"mobile-tootltip-date"},[_vm._v(_vm._s(_vm.tooltipMapSingle&&_vm.tooltipMapSingle[legend.key]?_vm.tooltipMapSingle[legend.key]:_vm.getDefaultData(legend).label))]),"$"===(_vm.tMapUnit&&null!==_vm.tMapUnit[legend.key]?_vm.tMapUnit[legend.key]:_vm.getDefaultData(legend).unit)?_c("div",{staticClass:"mobile-tootltip-value f20"},[_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[legend.key]?_vm.tMapUnit[legend.key]:_vm.getDefaultData(legend).unit)}}),_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[legend.key]?_vm.tooltipMap[legend.key]:_vm.getDefaultData(legend).value)+" ")]):_c("div",{staticClass:"mobile-tootltip-value f20"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[legend.key]?_vm.tooltipMap[legend.key]:_vm.getDefaultData(legend).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[legend.key]?_vm.tMapUnit[legend.key]:_vm.getDefaultData(legend).unit)}})])])],1):legend.children&&legend.children.length&&1===legend.children.length?_vm._l(legend.children,(function(child,cidx){return _c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==child.visible,expression:"child.visible !== false"}],key:cidx,staticClass:"f-legendnew legendBoxNew legendBoxNew-fchart",class:{active:-1===_vm.hideLegend.indexOf(child.key)},attrs:{title:child.label},on:{mouseover:function($event){return _vm.focusLegend(child.key)},mouseout:function($event){return _vm.unfocusLegend(child.key)}}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:child.color,callback:function($$v){_vm.$set(child,"color",$$v)},expression:"child.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(child.key)}}},[_c("div",{staticClass:"mobile-label"},[_vm._v(_vm._s(child.label))]),_c("span",{staticClass:"mobile-tootltip-date"},[_vm._v(_vm._s(_vm.tooltipMapSingle&&_vm.tooltipMapSingle[child.key]?_vm.tooltipMapSingle[child.key]:_vm.getDefaultData(child).label))]),(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit,_c("div",{staticClass:"mobile-tootltip-value f20"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[child.key]?_vm.tooltipMap[child.key]:_vm.getDefaultData(child).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)}})]))])],1)})):legend.children&&legend.children.length?_vm._l(legend.children,(function(child,cidx){return _c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==child.visible,expression:"child.visible !== false"}],key:cidx,staticClass:"f-legendnew legendBoxNew legendBoxNew-fchart",class:{active:-1===_vm.hideLegend.indexOf(child.key)},attrs:{title:child.label},on:{mouseover:function($event){return _vm.focusLegend(child.key)},mouseout:function($event){return _vm.unfocusLegend(child.key)}}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:child.color,callback:function($$v){_vm.$set(child,"color",$$v)},expression:"child.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left mb-section",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(child.key)}}},[_c("span",{staticClass:"mobile-label"},[_vm._v(_vm._s(child.label))]),_c("span",{staticClass:"mobile-tootltip-date"},[_vm._v(_vm._s(_vm.date&&_vm.date[child.key]?_vm.date[child.key]:_vm.getDefaultData(child).label))]),(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit,_c("span",{staticClass:"mobile-tootltip-value f20"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[child.key]?_vm.tooltipMap[child.key]:_vm.getDefaultData(child).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)}})]))])],1)})):_vm._e()]}))],2):_vm.legends&&_vm.legends.length?_c("div",{staticClass:"fLegendContainer fLegendContainer-new fLegendContainer-right mobile-legend muiltileagend"},[_vm._l(_vm.legends,(function(legend,index){return["datapoint"===legend.type?_c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==legend.visible,expression:"legend.visible !== false"}],key:index,staticClass:"legendBoxNew legendBoxNew-fchart f-legendnew text-left",class:{active:-1===_vm.hideLegend.indexOf(legend.key)},attrs:{title:legend.label},on:{mouseover:function($event){return _vm.focusLegend(legend.key)},mouseout:function($event){return _vm.unfocusLegend(legend.key)}}},[_c("el-color-picker",{staticStyle:{padding:"10px"},attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:legend.color,callback:function($$v){_vm.$set(legend,"color",$$v)},expression:"legend.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left mb-section",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(legend.key)}}},[_c("span",{staticClass:"mobile-label"},[_vm._v(_vm._s(legend.label))]),_vm.showAgg?_c("span",{staticClass:"mobile-tootltip-date"},[_vm._v(_vm._s(_vm.date&&_vm.date[legend.key]?_vm.date[legend.key]:_vm.getDefaultData(legend).label))]):_vm._e(),"$"===(_vm.tMapUnit&&null!==_vm.tMapUnit[legend.key]?_vm.tMapUnit[legend.key]:_vm.getDefaultData(legend).unit)?_c("span",{staticClass:"mobile-tootltip-value"},[_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[legend.key]?_vm.tMapUnit[legend.key]:_vm.getDefaultData(legend).unit)}}),_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[legend.key]?_vm.tooltipMap[legend.key]:_vm.getDefaultData(legend).value)+" ")]):_c("span",{staticClass:"mobile-tootltip-value"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[legend.key]?_vm.tooltipMap[legend.key]:_vm.getDefaultData(legend).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[legend.key]?_vm.tMapUnit[legend.key]:_vm.getDefaultData(legend).unit)}})])])],1):legend.children&&legend.children.length&&1===legend.children.length?_vm._l(legend.children,(function(child,cidx){return _c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==child.visible,expression:"child.visible !== false"}],key:cidx,staticClass:"f-legendnew legendBoxNew legendBoxNew-fchart",class:{active:-1===_vm.hideLegend.indexOf(child.key)},attrs:{title:child.label},on:{mouseover:function($event){return _vm.focusLegend(child.key)},mouseout:function($event){return _vm.unfocusLegend(child.key)}}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:child.color,callback:function($$v){_vm.$set(child,"color",$$v)},expression:"child.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(child.key)}}},[_c("div",{staticClass:"mobile-label"},[_vm._v(_vm._s(child.label))]),_vm.showAgg?_c("span",{staticClass:"mobile-tootltip-date"},[_vm._v(_vm._s(_vm.date&&_vm.tooltipMapSingle[child.key]?_vm.tooltipMapSingle[child.key]:_vm.getDefaultData(child).label))]):_vm._e(),"$"===(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)?_c("div",{staticClass:"mobile-tootltip-value f20"},[_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)}}),_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMapSingle[child.key]?_vm.tooltipMapSingle[child.key]:_vm.getDefaultData(child).value)+" ")]):_c("div",{staticClass:"mobile-tootltip-value f20"},[_c("div",{staticClass:"max100 width100 mobile-label f14"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMapSingle[child.key]?_vm.tooltipMapSingle[child.key]:_vm.getDefaultData(child).value)+" ")]),_c("div",{staticClass:"pT10"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[child.key]?_vm.tooltipMap[child.key]:_vm.getDefaultData(child).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)}})])])])],1)})):legend.children&&legend.children.length&&legend.children.length?_vm._l(legend.children,(function(child,cidx){return _c("div",{directives:[{name:"show",rawName:"v-show",value:!1!==child.visible,expression:"child.visible !== false"}],key:cidx,staticClass:"f-legendnew legendBoxNew legendBoxNew-fchart",class:{active:-1===_vm.hideLegend.indexOf(child.key)},attrs:{title:child.label},on:{mouseover:function($event){return _vm.focusLegend(child.key)},mouseout:function($event){return _vm.unfocusLegend(child.key)}}},[_c("el-color-picker",{staticClass:"mL5 mR5",attrs:{size:"mini","popper-class":"chart-custom-color-picker"},model:{value:child.color,callback:function($$v){_vm.$set(child,"color",$$v)},expression:"child.color"}}),_c("span",{staticClass:"textoverflow-ellipsis text-left mb-section",staticStyle:{"padding-left":"6px"},on:{click:function($event){return _vm.toggleLegend(child.key)}}},[_c("span",{staticClass:"mobile-label"},[_vm._v(_vm._s(child.label))]),_vm.showAgg?_c("span",{staticClass:"mobile-tootltip-date"},[_vm._v(_vm._s(_vm.date&&_vm.date[child.key]?_vm.date[child.key]:_vm.getDefaultData(child).label))]):_vm._e(),"$"===(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)?_c("span",{staticClass:"mobile-tootltip-value f20"},[_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)}}),_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[child.key]?_vm.tooltipMap[child.key]:_vm.getDefaultData(child).value)+" ")]):_c("span",{staticClass:"mobile-tootltip-value f20"},[_vm._v(" "+_vm._s(_vm.tooltipMap&&null!==_vm.tooltipMap[child.key]?_vm.tooltipMap[child.key]:_vm.getDefaultData(child).value)+" "),_c("span",{staticClass:"mobile-legend-unit",domProps:{innerHTML:_vm._s(_vm.tMapUnit&&null!==_vm.tMapUnit[child.key]?_vm.tMapUnit[child.key]:_vm.getDefaultData(child).unit)}})])])],1)})):_vm._e()]}))],2):_vm._e()])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),moment_timezone=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(976801),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),FMobileChartLegendsvue_type_script_lang_js={props:["options","chart","multichart","reportVarianceData","chartContext","resultObj"],data:function(){return{showLegendColorPicker:!1,hideLegend:[],tooltipMap:null,dataPoints:null,date:null,time:null,tMapUnit:null,showAgg:!0,tooltipMapSingle:null,aggregateFunctions:[{label:"TOTAL",value:3,name:"sum"},{label:"AVG",value:2,name:"avg"},{label:"MIN",value:4,name:"min"},{label:"MAX",value:5,name:"max"},{label:"CURRENT VALUE",value:6,name:"lastValue"}]}},computed:{legends:function(){if(this.options){if(this.multichart){var mtype=this.multichart.split("_")[0],mkey=this.multichart.substring(this.multichart.indexOf("_")+1);return"group"===mtype?this.options.dataPoints.filter((function(dp){return dp.label===mkey})):this.options.dataPoints.filter((function(dp){return dp.key===mkey}))}return this.options.dataPoints}return null},showDefaultAgg:function(){return!this.resultObj||(!this.resultObj||0!==this.resultObj.xAggr)}},methods:{handleDrillDown:function(leagend,child){if(!child){var d=this.dataPoints.find((function(rt){return rt.id===leagend.key}));this.$emit("mobiledrilldown",d)}},focusLegend:function(key){this.chart.focus(key)},unfocusLegend:function(){this.chart.revert()},showTooltip:function(dPoints,config,title){var d=[];if(this.dataPoints=dPoints,dPoints.forEach((function(dp){"group"===dp.type?d.push.apply(d,(0,toConsumableArray/* default */.Z)(dp.children)):d.push(dp)})),!d[0]||d[0].id){this.date=null,this.tooltipMap=null,this.tooltipMapSingle=null,this.tMapUnit=null,this.time=null;var tMap={},tMap2={},tdate={},tMapUnit={},time=null,points=[];config.dataPoint.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)}));for(var _loop=function(i){if(tMap[d[i].id]=null!==d[i].value?d[i].value:"No data",tMapUnit[d[i].id]=points.find((function(rt){return rt.key===d[i].id}))&&points.find((function(rt){return rt.key===d[i].id})).unitStr&&null!==d[i].value?points.find((function(rt){return rt.key===d[i].id})).unitStr:"",points.length){var agg=points.find((function(rt){return rt.key===d[i].id})).aggr;tdate[d[i].id]=agg?3===agg?"TOTAL":"AVG":"TOTAL",time=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"),tMap2[d[i].id]=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a")}else tdate[d[i].id]=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"),time=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a"),tMap2[d[i].id]=title||moment_timezone_default()(d[i].x).format("DD MMM hh:MM a")},i=0;i<d.length;i++)_loop(i);this.tooltipMapSingle=tMap2,this.time=time,this.tooltipMap=tMap,this.tMapUnit=tMapUnit,this.date=tdate,this.showDefaultAgg||(this.showAgg=!1)}},hideTooltip:function(){this.tooltipMap=null,this.date=null,this.time=null,this.tMapUnit=null,this.tooltipMapSingle=null,this.showAgg=!0,this.dataPoints=null},toggleLegend:function(key){var idx=this.hideLegend.indexOf(key);-1===idx?this.hideLegend.push(key):this.hideLegend.splice(idx,1),this.chart.toggle(key)},getDefaultData:function(legend){if(legend&&this.reportVarianceData){var returnData={label:"",value:"",unit:""},sumMetricFields=["ENERGY","LENGTH","MASS","CURRENCY"],aggrMetric=legend.isBaseLine?"aggr":"metric";return sumMetricFields.find((function(rt){return rt===legend[aggrMetric]}))?(returnData.value=this.reportVarianceData[legend.key+".sum"],returnData.value=returnData.value?Math.round(100*returnData.value)/100:""):(returnData.value=this.reportVarianceData[legend.key+".avg"],returnData.value=returnData.value?Math.round(100*returnData.value)/100:0),returnData.value=legend.dataType&&[4,8].includes(legend.dataTypeId)&&null!==legend.enumMap&&legend.enumMap[returnData.value]?legend.enumMap[returnData.value]:returnData.value,returnData.label=this.showDefaultAgg?legend.aggr&&this.aggregateFunctions.find((function(rt){return rt.value===legend.aggr}))?this.aggregateFunctions.find((function(rt){return rt.value===legend.aggr})).label:"TOTAL":"LATEST",returnData.unit=legend.unitStr||"",null===returnData.value&&(returnData.value="No Data"),returnData}return{label:"",value:"",unit:""}}}},components_FMobileChartLegendsvue_type_script_lang_js=FMobileChartLegendsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FMobileChartLegendsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FMobileChartLegends=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/42208.js.map