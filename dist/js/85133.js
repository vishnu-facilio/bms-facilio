"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[85133,71569],{
/***/149902:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Agents}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/agent/Agents.vue?vue&type=template&id=38d75304
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"width100"},[_vm.id?_c("router-view"):_c("div",{staticClass:"page-width-cal"},[_c("el-header",{staticClass:"fc-agent-main-header",attrs:{height:"80"}},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",[_c("div",{staticClass:"fc-agent-black-26"},[_vm._v(_vm._s(_vm.$t("agent.agent.agents")))])]),_vm.total?_c("div",{staticClass:"fc-red-new bold pL10 fc-text-blink text-center"},[_vm._v(" "+_vm._s(_vm.total)+" "+_vm._s(_vm.$t("agent.agent.agent_offline"))+" ")]):_vm._e(),_c("div",{staticClass:"flex-middle"},[_c("el-button",{staticClass:"fc-agent-add-btn",on:{click:function($event){return _vm.showAddAgent()}}},[_c("i",{staticClass:"el-icon-plus pR5 fwBold"}),_vm._v(" "+_vm._s(_vm.$t("agent.agent.add_agent"))+" ")])],1)])]),_c("div",{staticClass:"agent-list-scroll scrollbar-style"},[_c("div",{staticClass:"flex-middle mL15 mT20 justify-content-space"},[_c("div",[_vm.disableAgentButton?_c("el-button",{staticClass:"fc-white-btn",attrs:{disabled:!_vm.isConnectionSame,type:"button"},on:{click:_vm.toggleJob}},[_vm._v(_vm._s(_vm.toggleJobButton)+" ")]):_vm._e(),_vm.disableControllerButton?_c("el-button",{staticClass:"fc-white-btn mR10",attrs:{disabled:_vm.disableDiscoverController,type:"button"},on:{click:_vm.discoverControllerDialog}},[_vm._v(_vm._s("Discover Controller"))]):_vm._e()],1),_c("div",{staticClass:"flex-middle"},[_c("AdvancedSearch",{key:"agent-search",attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName}}),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("pagination",{attrs:{total:_vm.totalCount,perPage:_vm.perPage}}),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"pointer fwBold pR10 f16",attrs:{content:"Refresh"},on:{click:_vm.listRefresh}},[_c("i",{staticClass:"el-icon-refresh fwBold f16"})])],1)]),_c("FTags",{key:_vm.moduleName}),_vm.loading?_c("div",{staticClass:"flex-middle fc-empty-white m10 fc-agent-empty-state"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.agents)&&!_vm.loading?_c("div",{staticClass:"height100vh fc-empty-white flex-middle justify-content-center flex-direction-column m10 fc-agent-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"q-item-label nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.no_agents"))+" ")])],1):_vm._e(),_c("div",{staticClass:"agent-list-container"},[_vm.loading||_vm.$validation.isEmpty(_vm.agents)?_vm._e():_c("div",{staticClass:"fc-agent-table p10 fc-agents-list-table fc-list-table-container",class:_vm.agentTableHeight()},[_c("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:_vm.agents,fit:!0,height:"auto"},on:{"selection-change":_vm.selectAgent}},[_c("el-table-column",{staticClass:"pR0",attrs:{type:"selection",width:"60",fixed:"left",selectable:_vm.agentSelectCheck},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}}),_c("el-table-column",{staticClass:"pL0",attrs:{label:"agent",width:"350",fixed:"left",sortable:"",prop:"agent"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("div",{staticClass:"agent-active-section",on:{click:function($event){return _vm.agentSummary(agent.row)}}},[_c("div",{staticClass:"flex-middle"},[_c("AgentActivityDot",{key:agent.row.name,attrs:{status:agent.row.connected}}),_c("div",{staticClass:"mL10"},[_c("div",{staticClass:"label-txt3-14 flex-middle"},[_c("div",{staticClass:"main-field-column bold"},[_vm._v(" "+_vm._s(agent.row.displayName?agent.row.displayName:agent.row.name)+" ")]),_c("div",{staticClass:"fc-badge mL10 inline middle nowrap"},[_vm._v(" "+_vm._s(_vm.$constants.AgentTypes[agent.row.agentType])+" ")])])])],1)])]}}],null,!1,929129032)}),_c("el-table-column",{attrs:{label:"Link Name",width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("div",{staticClass:"label-txt3-14"},[_vm._v(_vm._s(agent.row.name))])]}}],null,!1,91776440)}),_c("el-table-column",{attrs:{label:"Controllers",width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("div",{staticClass:"label-txt3-14"},[_vm._v(_vm._s(agent.row.controllers))])]}}],null,!1,2043223248)}),_c("el-table-column",{attrs:{label:"Location",width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("div",{staticClass:"label-txt3-14"},[_vm._v(" "+_vm._s(agent.row.siteId>0?_vm.siteList[agent.row.siteId]:"---")+" ")])]}}],null,!1,3004410789)}),_c("el-table-column",{attrs:{label:"DATA RECEIVED",width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[agent.row.lastDataReceivedTime?_c("div",{staticClass:"label-txt3-14"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(agent.row.lastDataReceivedTime))+" ")]):_c("div",[_vm._v(" --- ")])]}}],null,!1,491034488)}),_c("el-table-column",{attrs:{label:"INTERVAL",width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("div",{staticClass:"label-txt3-14"},[_vm._v(" "+_vm._s(agent.row.interval>-1?agent.row.interval+" mins":"---")+" ")])]}}],null,!1,2362418324)}),_c("el-table-column",{attrs:{label:"WRITABLE",width:"130"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.toggleWritable(agent.row,agent.row.writable)}},model:{value:agent.row.writable,callback:function($$v){_vm.$set(agent.row,"writable",$$v)},expression:"agent.row.writable"}})]}}],null,!1,105915011)}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{width:"100"},scopedSlots:_vm._u([{key:"default",fn:function(agent){return[_c("div",{staticClass:"visibility-hide-actions text-right mR30"},[_c("el-dropdown",{on:{command:function($event){return _vm.onOptionsSelect($event,agent.row)}}},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more controller-more"})]),_c("el-dropdown-menu",{staticClass:"controller-dropdown-item",attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("agent.agent.edit")))]),_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(_vm._s(_vm.$t("agent.agent.delete")))]),[1,2].includes(agent.row.agentType)?_vm._e():_c("el-dropdown-item",{attrs:{command:"configure"}},[_vm._v(_vm._s(_vm.$t("agent.agent.configure")))])],1)],1)],1)]}}],null,!1,2054191433)})],1)],1)])],1),_vm.showDialog?_c("new-agent",{attrs:{isNew:_vm.isNew,model:_vm.agent,visibility:_vm.showDialog},on:{"update:visibility":function($event){_vm.showDialog=$event},saved:_vm.onAgentCreated}}):_vm._e(),_vm.showConfigureAgent?_c("rest-agent-configure",{attrs:{agent:_vm.agent,visibility:_vm.showConfigureAgent},on:{"update:visibility":function($event){_vm.showConfigureAgent=$event},save:_vm.loadAgents}}):_vm._e(),_c("router-view",{on:{syncCount:_vm.setCount}}),_c("div",{staticClass:"help-icon-position pointer",on:{click:function($event){return _vm.helpDialogOpen()}}},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"svgs/question",iconClass:"icon icon-xxlll"}})],1),_vm.helpDialogVisible?_c("agent-help",{attrs:{helpDialogVisible:_vm.helpDialogVisible},on:{"update:helpDialogVisible":function($event){_vm.helpDialogVisible=$event},"update:help-dialog-visible":function($event){_vm.helpDialogVisible=$event}}}):_vm._e(),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Discover Controller",visible:_vm.discoverDialogVisible,width:"30%","before-close":_vm.handleClose,"append-to-body":!0},on:{"update:visible":function($event){_vm.discoverDialogVisible=$event}}},[_c("div",{class:_vm.discoverControllersDialogHeight},[_c("el-form",{ref:"agentForm",attrs:{"label-position":"top"}},[_c("el-form-item",{staticClass:"mB20",attrs:{label:"Agent"}},[_vm.discoverDialogVisible?_c("div",[_c("SelectAgent",{staticClass:"select-agent-width",attrs:{discoverableAgents:"true",hideLabel:"true",filterActiveAgents:"true"},on:{onAgentFilter:_vm.updateAgentId}})],1):_vm._e()]),null!=this.selectedAgent&&9!=this.selectedAgent.agentType&&6!=this.selectedAgent.agentType?_c("el-form-item",{staticClass:"mB20",attrs:{required:!0,label:"Protocol"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select Type"},model:{value:_vm.selectedType,callback:function($$v){_vm.selectedType=$$v},expression:"selectedType"}},[null!=this.selectedAgent&&2==this.selectedAgent.agentType?_c("div",_vm._l(_vm.niagaraOptions,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),1):null!=this.selectedAgent&&1==this.selectedAgent.agentType?_c("div",_vm._l(_vm.options,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),1):null!=this.selectedAgent&&9==this.selectedAgent.agentType?_c("div",_vm._l(_vm.e2Options,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),1):null!=this.selectedAgent&&6==this.selectedAgent.agentType?_c("div",_vm._l(_vm.rdmOptions,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),1):_vm._e()])],1):_vm._e(),14==_vm.selectedType?_c("el-form-item",{attrs:{required:!0,label:"IP Address"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"text",placeholder:"Enter IP Address"},model:{value:_vm.controllerIpAddress,callback:function($$v){_vm.controllerIpAddress=$$v},expression:"controllerIpAddress"}})],1):_vm._e(),14==_vm.selectedType?_c("el-form-item",{attrs:{required:!0,label:"Port"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"text",placeholder:"Enter Port"},model:{value:_vm.controllerPort,callback:function($$v){_vm.controllerPort=$$v},expression:"controllerPort"}})],1):_vm._e(),1==_vm.selectedType&&1==this.selectedAgent.agentType?_c("div",{staticClass:"pB10"},[_vm._v(" Advanced Options "),_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},model:{value:_vm.isAdvancedDiscoveryEnabled,callback:function($$v){_vm.isAdvancedDiscoveryEnabled=$$v},expression:"isAdvancedDiscoveryEnabled"}}),_vm.isAdvancedDiscoveryEnabled?_c("div",{staticClass:"pT10"},[_c("el-form-item",{attrs:{required:!0,label:"UDP Port"}},[_c("el-select",{staticClass:"fc-input-full-border-select2  width100",model:{value:_vm.bacnetPort,callback:function($$v){_vm.bacnetPort=$$v},expression:"bacnetPort"}},_vm._l(_vm.bacnetPorts,(function(item){return _c("el-option",{key:item,attrs:{label:item,value:item}})})),1)],1),_c("el-form-item",{attrs:{required:!1,label:"Timeout (Mins)"}},[_c("el-select",{staticClass:"fc-input-full-border-select2  width100",model:{value:_vm.timeout_sec,callback:function($$v){_vm.timeout_sec=$$v},expression:"timeout_sec"}},_vm._l(_vm.discoverControllersTimeout,(function(item){return _c("el-option",{key:item,attrs:{label:item,value:item}})})),1)],1),_c("el-form-item",{staticStyle:{width:"100%"},attrs:{required:!1,label:"Instance Number Range"}},[_c("el-radio",{attrs:{label:"all"},model:{value:_vm.IsfullRange,callback:function($$v){_vm.IsfullRange=$$v},expression:"IsfullRange"}},[_c("span",{staticClass:"radio-button-padding"},[_vm._v("All the devices")])]),_c("br"),_c("el-radio",{staticClass:"radio-lable",attrs:{lable:"btwrange"},model:{value:_vm.IsfullRange,callback:function($$v){_vm.IsfullRange=$$v},expression:"IsfullRange"}},[_c("div",{staticClass:"d-flex width100"},[_c("span",{staticClass:"instance-radio-lable"},[_vm._v("From")]),_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"number"},model:{value:_vm.instanceNumberFrom,callback:function($$v){_vm.instanceNumberFrom=$$v},expression:"instanceNumberFrom"}}),_c("span",{staticClass:"instance-radio-lable"},[_vm._v("To")]),_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"number"},model:{value:_vm.instanceNumberTo,callback:function($$v){_vm.instanceNumberTo=$$v},expression:"instanceNumberTo"}})],1)])],1)],1):_vm._e()],1):_vm._e()],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.handleClose()}}},[_vm._v(_vm._s(_vm.$t("agent.agent.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",disabled:_vm.handleDisable},on:{click:function($event){return _vm.discoverDevices()}}},[_vm._v(_vm._s(_vm.$t("agent.agent.discover")))])],1)])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),AgentAddForm=(__webpack_require__(450886),__webpack_require__(260228),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(865137),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(298755)),RestAgentConfigurevue_type_template_id_61a6120c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" Configure Scripts ")])])]),_vm.agent?_c("div",{staticClass:"new-body-modal"},[_vm._l(_vm.actions,(function(action,idx){return[action.showIf(_vm.agent)?_c("el-row",{key:idx,staticClass:"mT20",attrs:{gutter:10}},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v(_vm._s(action.title))]),_c("p",{staticClass:"small-description-txt2"},[_vm._v(_vm._s(action.description))])]),_c("el-col",{staticClass:"mT20",attrs:{span:8}},[_c("el-button",{class:action.workflow?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){!action.workflow&&_vm.configure(action)}}},[_vm._v(_vm._s(action.workflow?"Configured":"Configure"))]),action.workflow?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit Script"},on:{click:function($event){return _vm.configure(action)}}})]):_vm._e()],1)],1):_vm._e()]}))],2):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.saving?"Saving...":"SAVE"))])],1)]),_vm.showBuilder?_c("f-dialog",{staticClass:"script-dialog",attrs:{visible:_vm.showBuilder,width:"60%",maxHeight:"350px",title:"Configure "+_vm.selectedAction.title,confirmTitle:"Confirm"},on:{"update:visible":function($event){_vm.showBuilder=$event},save:_vm.changeWorkflow}},[_c("div",{staticClass:"dialog-switch"},[_c("el-switch",{attrs:{"active-text":"Diff"},model:{value:_vm.showDiff,callback:function($$v){_vm.showDiff=$$v},expression:"showDiff"}})],1),_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("script-editor",{attrs:{scriptClass:"left-con p0  border-11 height100",diff:_vm.showDiff&&{type:"side_by_side"}},model:{value:_vm.currentWorkflow,callback:function($$v){_vm.currentWorkflow=$$v},expression:"currentWorkflow"}})],1)]):_vm._e()],1)},RestAgentConfigurevue_type_template_id_61a6120c_staticRenderFns=[],CodeMirror=(__webpack_require__(976801),__webpack_require__(689730),__webpack_require__(857267),__webpack_require__(919324)),FDialogNew=__webpack_require__(436756),api=__webpack_require__(32284),setup=__webpack_require__(572552),payloadHeader="List getPayload(Number fromTime, Number toTime, Map agent) {\n",transformHeader="List getPayload(Map payload, Map agent) {\n",commandHeader="Map getPayload(Map payload, Map agent, String command) {\n",RestAgentConfigurevue_type_script_lang_js={props:["visibility","agent"],components:{CodeMirror:CodeMirror/* default */.Z,FDialog:FDialogNew/* default */.Z,ScriptEditor:setup/* ScriptEditor */.Y},data:function(){return{showBuilder:!1,currentWorkflow:"",selectedAction:null,currentAgent:null,actions:[{title:"Data Payload Script",description:"Configure the payload script to fetch data from cloud agent",workflow:"",header:payloadHeader,comments:"// `fromTime` and `toTime` params will be passed to the script\n//return the payload as list\n\n",key:"workflow",showIf:function(agent){
// if (this.agent) {
//   console.log('-----ttt----', this.agent.agentType)
// }
return[3,7].includes(null===agent||void 0===agent?void 0:agent.agentType)}},{title:"Transform Payload Script",description:"Transform the payload message recevied from agent",workflow:"",header:transformHeader,comments:"// `payload` and `agent` params will be passed to the script\n//return the payload as list\n\n",key:"transformWorkflow",showIf:function(agent){return![1,2].includes(null===agent||void 0===agent?void 0:agent.agentType)}},{title:"Command Payload Script",description:"The script to transform command payload",workflow:"",header:commandHeader,comments:"// `payload`, `agent`, `command` params will be passed to the script\n//return the payload as map\n\n",key:"commandWorkflow",showIf:function(agent){return![1,2].includes(null===agent||void 0===agent?void 0:agent.agentType)}}],saving:!1,showDiff:!1}},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return url="/v3/agent/"+_this.agent.id,_context.next=3,api/* API */.bl.get(url);case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,_yield$API$get.error,_this.currentAgent=data.agent,_this.init();case 8:case"end":return _context.stop()}}),_callee)})))()},methods:{init:function(){var _this2=this;this.actions.forEach((function(action){var workflow=_this2.$getProperty(_this2,"currentAgent.".concat(action.key,".workflowV2String"));workflow&&(action.workflow=workflow.replace(action.header,"").slice(0,-1))}))},configure:function(action){this.currentWorkflow="",action.workflow?this.currentWorkflow=this.$helpers.cloneObject(action.workflow):this.currentWorkflow=action.comments,this.selectedAction=action,this.showBuilder=!0},changeWorkflow:function(){this.selectedAction.workflow=this.currentWorkflow},save:function(){var _this3=this,editAgent={agentId:this.agent.id,toUpdate:{}};this.actions.forEach((function(action){action.workflow&&(editAgent.toUpdate[action.key]={isV2Script:!0,workflowV2String:action.header+action.workflow+"\n}"})})),this.saving=!0,this.$http.post("/v2/agent/edit",editAgent).then((function(response){500!==response.data.responseCode?(_this3.$message("Script configured successfully"),_this3.$emit("save"),_this3.closeDialog()):_this3.$message.error(response.data.result.exception),_this3.saving=!1}))},reset:function(){this.action.workflow=null},closeDialog:function(){this.$emit("update:visibility",!1)}}},components_RestAgentConfigurevue_type_script_lang_js=RestAgentConfigurevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_RestAgentConfigurevue_type_script_lang_js,RestAgentConfigurevue_type_template_id_61a6120c_render,RestAgentConfigurevue_type_template_id_61a6120c_staticRenderFns,!1,null,null,null)
/* harmony default export */,RestAgentConfigure=component.exports,AgentActivityvue_type_template_id_c29b0fec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:["dot-10 mT3",_vm.activityClass]})},AgentActivityvue_type_template_id_c29b0fec_staticRenderFns=[],AgentActivityvue_type_script_lang_js={props:["status"],computed:{activityClass:function(){return{"color-active":this.status,"color-inactive":!this.status}}}},components_AgentActivityvue_type_script_lang_js=AgentActivityvue_type_script_lang_js,AgentActivity_component=(0,componentNormalizer/* default */.Z)(components_AgentActivityvue_type_script_lang_js,AgentActivityvue_type_template_id_c29b0fec_render,AgentActivityvue_type_template_id_c29b0fec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AgentActivity=AgentActivity_component.exports,AgentHelpvue_type_template_id_d1ef5016_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{title:"Agent Helper",visible:_vm.helpDialogVisible,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right width30 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.helpDialogVisible=$event}}},[_c("div",{},[_c("div",{staticClass:"new-header-container pL20"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_helper"))+" ")])])]),_c("div",{staticClass:"new-body-modal pT0 pL0 pR0 mT0"},[_c("el-collapse",{staticClass:"fc-agent-collapse fc-pushing-data-collapse",attrs:{accordion:""},model:{value:_vm.activeNames,callback:function($$v){_vm.activeNames=$$v},expression:"activeNames"}},[_c("el-collapse-item",{attrs:{title:"Add Agent",name:"1"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc1"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Reboot",name:"2"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc2"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Shutdown",name:"3"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc3"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Upgrade",name:"4"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc4"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Agent",name:"5"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc5"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Controllers",name:"6"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc6"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Location",name:"7"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc7"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Data Received",name:"8"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc8"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Interval",name:"9"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc9"))+" ")])]),_c("el-collapse-item",{attrs:{title:"Writable",name:"10"}},[_c("div",{staticClass:"fc-black-14 text-left line-height25 break-word"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent_helper.agent_desc10"))+" ")])])],1)],1)])])],1)},AgentHelpvue_type_template_id_d1ef5016_scoped_true_staticRenderFns=[],AgentHelpvue_type_script_lang_js={props:["helpDialogVisible"],data:function(){return{activeNames:["1"]}},methods:{closeDialog:function(){this.$emit("update:helpDialogVisible",!1)}}},AgentHelperDocs_AgentHelpvue_type_script_lang_js=AgentHelpvue_type_script_lang_js,AgentHelp_component=(0,componentNormalizer/* default */.Z)(AgentHelperDocs_AgentHelpvue_type_script_lang_js,AgentHelpvue_type_template_id_d1ef5016_scoped_true_render,AgentHelpvue_type_template_id_d1ef5016_scoped_true_staticRenderFns,!1,null,"d1ef5016",null)
/* harmony default export */,AgentHelp=AgentHelp_component.exports,validation=__webpack_require__(990260),router=__webpack_require__(329435),FPagination=__webpack_require__(929593),picklist=__webpack_require__(961358),AdvancedSearch=__webpack_require__(784823),FTags=__webpack_require__(775676),SelectAgent=__webpack_require__(505572),AGENT_TYPE={Facilio:1,Niagara:2,Cloud:3,RDM:6,CloudService:7,E2:9},Agentsvue_type_script_lang_js={title:function(){return"Agent List"},props:["id"],components:{NewAgent:AgentAddForm/* default */.Z,AgentActivityDot:AgentActivity,AgentHelp:AgentHelp,RestAgentConfigure:RestAgentConfigure,Pagination:FPagination/* default */.Z,AdvancedSearch:AdvancedSearch/* default */.Z,FTags:FTags["default"],SelectAgent:SelectAgent/* default */.Z},data:function(){return{isAdvancedDiscoveryEnabled:!1,IsfullRange:"all",isConnectionSame:null,isNew:!0,loading:!1,agents:[],showDialog:!1,buildings:{},agent:null,selectedType:null,showConfigureAgent:!1,listCount:"",totalCount:null,selectall:!1,helpDialogVisible:!1,selectedAgent:[],total:null,direction:"rtl",drawer:!1,selectedAgents:[],selectedAgentId:null,discoverDialogVisible:!1,siteList:{},controllerIpAddress:null,controllerPort:null,instanceNumberFrom:0,instanceNumberTo:4194302,bacnetPort:47808,timeout_sec:1,wholeRange:null,bacnetPorts:[47808,47809,47810,47811,47812,47813,47814,47815,47816,47817],discoverControllersTimeout:[1,2,3,5,8,10,15],options:[{value:1,label:"BACnet Ip"},{value:12,label:"System"}],e2Options:[{value:14,label:"E2"}],rdmOptions:[{value:13,label:"RDM"}],value:-1,niagaraOptions:[{value:0,label:"Misc"},{value:1,label:"BACnet Ip"},{value:3,label:"Fox"},{value:5,label:"Modbus_Rtu"},{value:8,label:"Lon Works"}],perPage:50,moduleName:"agent",moduleDisplayName:"Agent",disableDiscoverController:!1}},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadAgents();case 2:case"end":return _context.stop()}}),_callee)})))()},computed:{discoverControllersDialogHeight:function(){return null==this.selectedAgent||9!=this.selectedAgent.agentType&&6!=this.selectedAgent.agentType?this.isAdvancedDiscoveryEnabled&&1==this.selectedType?"height635":"height300":"height200"},handleDisable:function(){return(null==this.selectedAgent||9!=this.selectedAgent.agentType&&6!=this.selectedAgent.agentType)&&!(null!=this.selectedAgentId&&null!=this.selectedType)},selectedAgentShutdown:function(){var selectedAgents=this.selectedAgents;return selectedAgents.map((function(value){return value.id}))},toggleJobButton:function(){if(this.isConnectionSame){var _ref=this||{},selectedAgents=_ref.selectedAgents,initSelectedAgents=selectedAgents[0];return initSelectedAgents.connected?this.$t("agent.agent.disableAgent"):this.$t("agent.agent.enableAgent")}return this.$t("agent.agent.enableAgent")},disableControllerButton:function(){var _ref2=this||{},agents=_ref2.agents;return agents.some((function(item){return item.agentType==AGENT_TYPE["Facilio"]||item.agentType==AGENT_TYPE["Niagara"]||item.agentType==AGENT_TYPE["RDM"]||item.agentType==AGENT_TYPE["E2"]}))},disableAgentButton:function(){var _ref3=this||{},agents=_ref3.agents;return agents.some((function(item){return item.agentType==AGENT_TYPE["Cloud"]||item.agentType==AGENT_TYPE["CloudService"]}))},page:function(){return this.$route.query.page||1},
// isDisabled() {
//   return !this.selectall
// },
filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null}},watch:{
// selectAll: function(val) {
//   let self = this
//   if (val) {
//     this.selectedAgent = []
//     this.agents.filter(function(agent) {
//       self.selectedAgent.push(agent.id)
//     })
//   } else {
//     if (this.selectedAgent.length === this.agents.length) {
//       this.selectedAgent = []
//     }
//   }
//   this.loadCount()
// },
page:function(){this.loadAgents()},filters:{handler:function(newVal,oldVal){newVal!==oldVal&&this.loadAgents()}}},methods:{updateAgentId:function(selectedAgent){this.selectedAgent=selectedAgent,this.selectedAgentId=this.selectedAgent.id},loadSites:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var siteIds,defaultIds,perPage,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(siteIds=(_this2.agents||[]).map((function(agent){return agent.siteId})).filter((function(siteId){return void 0!==siteId&&null!==siteId})),defaultIds=(0,toConsumableArray/* default */.Z)(new Set(siteIds)),perPage=defaultIds.length,0!==perPage){_context2.next=5;break}return _context2.abrupt("return");case 5:return _context2.next=7,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"site",skipDeserialize:!0},defaultIds:defaultIds,perPage:perPage});case 7:_yield$getFieldOption=_context2.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this2.$message.error(error.message||"Error Occured"):_this2.siteList=options;case 11:case"end":return _context2.stop()}}),_callee2)})))()},loadAgents:function(){var _this3=this,filters=this.filters;this.loading=!0;var url="/v2/agent/list?page=".concat(this.page,"&perPage=").concat(this.perPage);return null==filters||(0,validation/* isEmpty */.xb)(filters)||(url+="&filters=".concat(encodeURIComponent(JSON.stringify(filters)))),this.$http.get(url).then((function(response){_this3.loading=!1,_this3.total=response.data.result.total-response.data.result.active,_this3.agents=response.data.result&&response.data.result.data?response.data.result.data:[],_this3.agents.sort(),_this3.loadSites(),_this3.agentCount()})).catch((function(){_this3.agents=[],_this3.loading=!1}))},listRefresh:function(){this.loadAgents()},selectAgent:function(currentSelections){var _this4=this,prevConnection=null;(0,validation/* isEmpty */.xb)(currentSelections)?(this.isConnectionSame=!1,this.disableDiscoverController=!1):(this.isConnectionSame=!0,this.disableDiscoverController=!0),this.selectedAgents=currentSelections,currentSelections.forEach((function(item){null==prevConnection?prevConnection=item.connected:prevConnection!=item.connected&&(_this4.isConnectionSame=!1)}))},agentShutdown:function(){var _this5=this;this.loading=!0;var shutdown={recordIds:this.selectedAgentShutdown};this.$http.post("/v2/agent/shutdown",shutdown).then((function(response){200===response.data.responseCode?(_this5.$message.success("Shutdown updated successfully."),_this5.loading=!1):(_this5.$message.error(response.data.message),_this5.loading=!1)}))},agentSelectCheck:function(row){return row.agentType==AGENT_TYPE["Cloud"]||row.agentType==AGENT_TYPE["CloudService"]},toggleJob:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref4,agentIds,_ref5,selectedAgents,initSelectedAgents,isActiveUpdateValue,payload,json,url,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref4=_this6||{},agentIds=_ref4.selectedAgentShutdown,_ref5=_this6||{},selectedAgents=_ref5.selectedAgents,initSelectedAgents=selectedAgents[0],(0,validation/* isEmpty */.xb)(initSelectedAgents)||(isActiveUpdateValue=!initSelectedAgents.connected),payload={agentIds:agentIds,isActiveUpdateValue:isActiveUpdateValue},json={data:payload},url="v3/agent/toggleJob",_context3.next=9,api/* API */.bl.post(url,json);case 9:_yield$API$post=_context3.sent,_yield$API$post.data,error=_yield$API$post.error,error?_this6.$message.error(error.message||"Error occured"):_this6.$message.success("Job updated successfully");case 13:case"end":return _context3.stop()}}),_callee3)})))()},showAddAgent:function(){this.showDialog=!0,this.isNew=!0},setCount:function(listCount){this.listCount=listCount},onAgentCreated:function(){this.loadAgents()},editAgent:function(agent){this.isNew=!1,this.agent=this.$helpers.cloneObject(agent),this.showDialog=!0,this.model=agent},configureAgent:function(agent){this.agent=this.$helpers.cloneObject(agent),this.showConfigureAgent=!0},onOptionsSelect:function(command,agent,index){"edit"===command?this.editAgent(agent):"delete"===command?this.deleteAgent(agent,index):"configure"===command&&this.configureAgent(agent)},toggleWritable:function(agent,writable,index){var _this7=this;this.$http.post("/v2/agent/edit",{agentId:agent.id,toUpdate:{writable:writable}}).then((function(response){200!==response.responseCode&&201!==response.responseCode||_this7.$message("Agent Updated")})).catch((function(){_this7.$message("Could not update settings"),_this7.agents[index].writable=!writable}))},loadCount:function(){var _this8=this;return this.$http.get("/v2/agent/list").then((function(response){_this8.totalCount=response.data.result.data||null})).catch((function(){_this8.loading=!1}))},agentCount:function(){var _this9=this,filters=this.filters,url="/v2/agent/count";return null==filters||(0,validation/* isEmpty */.xb)(filters)||(url+="?filters=".concat(encodeURIComponent(JSON.stringify(filters)))),this.$http.get(url).then((function(response){_this9.totalCount=response.data.result.data||null})).catch((function(){_this9.loading=!1}))},deleteAgent:function(agent,index){var _this10=this,params={recordIds:[agent.id]},url="/v2/agent/delete";this.$dialog.confirm({title:"Delete Agent",htmlMessage:"Are you sure you want to delete "+agent.displayName+"?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&_this10.$http.post(url,params).then((function(response){500!=response.data.responseCode?(_this10.$message.success("Agent deleted successfully"),_this10.loading=!1,_this10.loadAgents()):(_this10.$message.error(response.data.message),_this10.loading=!1)}))}))},handleClose:function(){this.discoverDialogVisible=!1,this.selectedAgentId=null,this.selectedAgent=null,this.selectedAgentShutdown=[],this.selectedType="",this.controllerIpAddress=null,this.controllerPort=null,this.IsfullRange="all",this.instanceNumberFrom=0,this.instanceNumberTo=4194302,this.timeout_sec=1,this.bacnetPort=47808,this.isAdvancedDiscoveryEnabled=!1},helpDialogOpen:function(){this.helpDialogVisible=!0},discoverDevices:function(){var _this11=this,discoverControllersData={agentId:this.selectedAgentId,controllerType:this.selectedType};if(14===this.selectedType&&(discoverControllersData.ipAddress=this.controllerIpAddress,discoverControllersData.port=this.controllerPort),6==this.selectedAgent.agentType&&(discoverControllersData.controllerType=13),9==this.selectedAgent.agentType&&(discoverControllersData.controllerType=14),1===this.selectedType&&1==this.selectedAgent.agentType){if("all"!=this.IsfullRange){var range={};range.low=parseInt(this.instanceNumberFrom),range.high=parseInt(this.instanceNumberTo),discoverControllersData.range=range}discoverControllersData.bacnetPort=this.bacnetPort,discoverControllersData.timeout_sec=60*this.timeout_sec}this.loading=!0,this.$http.post("/v2/controller/discover ",discoverControllersData).then((function(response){200===response.data.responseCode?(_this11.loading=!1,_this11.handleClose(),_this11.$message.info("Controllers will be discovered in a while.")):(_this11.loading=!1,_this11.handleClose(),_this11.$message.error(response.data.message))}))},discoverControllerDialog:function(){this.discoverDialogVisible=!0},agentSummary:function(agent){var appName=(0,router/* getApp */.wx)().linkName,_findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* tabTypes */.VF.CUSTOM,{config:{type:"agents"}}),path=_findRouteForTab.path;this.$router.push({path:"/".concat(appName,"/").concat(path,"/all/").concat(agent.id,"/overview/")})},agentTableHeight:function(){var filters=this.filters;return(0,validation/* isNull */.Ft)(filters)?"fc-list-table-container ":"filter-applied"}}},agent_Agentsvue_type_script_lang_js=Agentsvue_type_script_lang_js,Agents_component=(0,componentNormalizer/* default */.Z)(agent_Agentsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Agents=Agents_component.exports},
/***/298755:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AgentAddForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/agent/components/AgentAddForm.vue?vue&type=template&id=004e12f4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog connection-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",[_vm.loading?_vm._e():_c("el-form",{ref:"agentForm",staticClass:"fc-form",attrs:{model:_vm.newAgent,rules:_vm.rules,"label-position":"top","label-width":"120px"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?"New":"Edit")+" Agent ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical pT0"},[_vm._v(" Agent Type ")]),_c("el-form-item",{attrs:{prop:"type"}},[_c("el-select",{staticClass:"width100",attrs:{disabled:!_vm.isNew},model:{value:_vm.newAgent.agentType,callback:function($$v){_vm.$set(_vm.newAgent,"agentType",$$v)},expression:"newAgent.agentType"}},_vm._l(_vm.agentTypes,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1)],1)],1),2===_vm.newAgent.agentType?_c("div",{staticClass:"setup-input-block pT20"},[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" Host Id ")]),_c("el-form-item",{attrs:{prop:"name"}},[_c("el-input",{staticClass:"fc-input-txt width100",attrs:{disabled:!_vm.isNew,placeholder:"Enter host id"},model:{value:_vm.newAgent.agent,callback:function($$v){_vm.$set(_vm.newAgent,"agent",$$v)},expression:"newAgent.agent"}})],1)],1)],1)],1):_vm._e(),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" Name ")]),_c("el-form-item",{attrs:{prop:"name"}},[_c("el-input",{staticClass:"fc-input-txt width100",attrs:{disabled:_vm.$validation.isEmpty(_vm.newAgent.agentType),placeholder:"Enter Name"},model:{value:_vm.newAgent.displayName,callback:function($$v){_vm.$set(_vm.newAgent,"displayName",$$v)},expression:"newAgent.displayName"}})],1)],1)])],1),_c("div",[_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_vm.showInterval?_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" Interval ")]),_c("el-form-item",{attrs:{prop:"interval"}},[_c("el-select",{staticClass:"fc-input-select width100",attrs:{disabled:_vm.$validation.isEmpty(_vm.newAgent.agentType),placeholder:"Enter Interval"},model:{value:_vm.newAgent.interval,callback:function($$v){_vm.$set(_vm.newAgent,"interval",$$v)},expression:"newAgent.interval"}},_vm._l(_vm.intervals,(function(interval){return _c("el-option",{key:interval.key,attrs:{label:interval.label,value:interval.key}})})),1)],1)],1):_vm._e(),_c("el-col",{attrs:{span:_vm.showInterval?12:24}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v("Site")]),_c("el-form-item",{attrs:{prop:"siteId"}},[_c("FLookupFieldWrapper",{attrs:{field:{lookupModule:{name:"site"},multiple:!1},disabled:_vm.$validation.isEmpty(_vm.newAgent.agentType)||_vm.disableSiteId,hideLookupIcon:!1},model:{value:_vm.newAgent.siteId,callback:function($$v){_vm.$set(_vm.newAgent,"siteId",$$v)},expression:"newAgent.siteId"}})],1)],1)],1),_vm.$validation.isEmpty(_vm.newAgent.agentType)||4!==_vm.newAgent.agentType?_vm._e():_c("el-col",{staticClass:"width100 pT10",attrs:{span:24}},[_c("el-form-item",{staticClass:"flex",attrs:{label:"Allow Auto Mapping"}},[_c("el-switch",{staticClass:"mL10",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},model:{value:_vm.newAgent.allowAutoMapping,callback:function($$v){_vm.$set(_vm.newAgent,"allowAutoMapping",$$v)},expression:"newAgent.allowAutoMapping"}})],1)],1),_vm.newAgent.allowAutoMapping?_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v("Parent Mapping Field")]),_c("el-form-item",{attrs:{prop:"autoMappingParentFieldId"}},[_c("el-select",{staticClass:"width100",attrs:{filterable:"",clearable:""},model:{value:_vm.newAgent.autoMappingParentFieldId,callback:function($$v){_vm.$set(_vm.newAgent,"autoMappingParentFieldId",$$v)},expression:"newAgent.autoMappingParentFieldId"}},_vm._l(_vm.fields,(function(item){return _c("el-option",{key:item.key,attrs:{label:item.label,value:item.key}})})),1)],1)],1):_vm._e(),_vm.isMqttType?_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("el-col",[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.connection"))+" ")]),_c("div",{staticClass:"d-flex align-center width100"},[_c("el-select",{staticClass:"fc-input-select connection-select width100",attrs:{disabled:!_vm.isNew||_vm.$validation.isEmpty(_vm.newAgent.agentType)},model:{value:_vm.newAgent.messageSourceId,callback:function($$v){_vm.$set(_vm.newAgent,"messageSourceId",$$v)},expression:"newAgent.messageSourceId"}},_vm._l(_vm.sources,(function(source){return _c("el-option",{key:source.id,attrs:{label:source.name,value:source.id}})})),1),_vm.isNew?_c("div",{staticClass:"d-flex align-center connection-icon",on:{click:function($event){return _vm.showConnectionFORM()}}},[_c("inline-svg",{attrs:{src:"add-pink",iconClass:"icon icon-sm-md fc-lookup-icon mL15 mR15 mB10 mT9"}})],1):_vm._e()],1)])],1):_vm._e(),_vm.isMqttType?_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("el-col",[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.subscribeTopic"))+" ")]),_c("el-form-item",{attrs:{prop:"SubscribeTopic"}},[_c("el-input",{staticClass:"fc-input-txt width100",attrs:{disabled:!_vm.isNew||_vm.$validation.isEmpty(_vm.newAgent.agentType),placeholder:"Enter Subscribe Topic"},model:{value:_vm.newAgent.subscribeTopics,callback:function($$v){_vm.$set(_vm.newAgent,"subscribeTopics",$$v)},expression:"newAgent.subscribeTopics"}})],1)],1)],1):_vm._e()],1),6===_vm.newAgent.agentType&&_vm.isNew?_c("div",{staticClass:"rdm-sec"},[_c("div",{staticClass:"setup-input-block"},[_c("p",{staticClass:"fc-input-label-txt pT10"},[_vm._v("URL")]),_c("el-form-item",{attrs:{prop:"controllerUrl"}},[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{type:"text",placeholder:"Enter the URL"},model:{value:_vm.newAgent.url,callback:function($$v){_vm.$set(_vm.newAgent,"url",$$v)},expression:"newAgent.url"}})],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pT10"},[_vm._v("User Name")]),_c("el-form-item",{attrs:{prop:"userName"}},[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{type:"text",placeholder:"Enter the Username"},model:{value:_vm.newAgent.userName,callback:function($$v){_vm.$set(_vm.newAgent,"userName",$$v)},expression:"newAgent.userName"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Password")]),_c("el-form-item",{attrs:{prop:"password"}},[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{type:"text",placeholder:"Enter the password"},model:{value:_vm.newAgent.password,callback:function($$v){_vm.$set(_vm.newAgent,"password",$$v)},expression:"newAgent.password"}})],1)],1)],1)],1):_vm._e(),9===_vm.newAgent.agentType&&_vm.isNew?_c("div",{staticClass:"e2-sec"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"e2AgentIpAddress",required:"",label:"IP Address"}},[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{type:"text",placeholder:"Enter the IP Adress"},model:{value:_vm.newAgent.e2AgentIpAddress,callback:function($$v){_vm.$set(_vm.newAgent,"e2AgentIpAddress",$$v)},expression:"newAgent.e2AgentIpAddress"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"e2AgentPort",required:"",label:"Port"}},[_c("el-input",{staticClass:"fc-input-txt fc-desc-input",attrs:{type:"text",placeholder:"Enter the Port"},model:{value:_vm.newAgent.e2AgentPort,callback:function($$v){_vm.$set(_vm.newAgent,"e2AgentPort",$$v)},expression:"newAgent.e2AgentPort"}})],1)],1)],1)],1):_vm._e(),_c("div",{staticClass:"setup-input-block"})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm("agentForm")}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"SAVE"))])],1)])],1),_vm.showConnectionForm?_c("ConnectionForm",{attrs:{onClose:function(){return _vm.showConnectionForm=!1}},on:{save:_vm.fetchSources}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(450886),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(420629)),api=__webpack_require__(32284),ConnectionFormvue_type_template_id_ae8cf86e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,"append-to-body":!0,"custom-class":"setup-dialog40 connection-form-dialog","before-close":_vm.onClose,title:"Add Connection"}},[_c("el-form",{ref:"connectionForm",staticClass:"fc-form",attrs:{model:_vm.messageSource,rules:_vm.rules,"label-position":"top","label-width":"120px"}},[_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Name"},model:{value:_vm.messageSource.source.name,callback:function($$v){_vm.$set(_vm.messageSource.source,"name",$$v)},expression:"messageSource.source.name"}})],1)],1),_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.host"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Host Name"},model:{value:_vm.messageSource.configs.endPoint,callback:function($$v){_vm.$set(_vm.messageSource.configs,"endPoint",$$v)},expression:"messageSource.configs.endPoint"}})],1)],1),_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.authMode"))+" ")]),_c("el-form-item",[_c("el-select",{staticClass:"fc-input-full-border-select2 width50",attrs:{placeholder:"Enter Authentication Mode"},model:{value:_vm.messageSource.configs.authModeInt,callback:function($$v){_vm.$set(_vm.messageSource.configs,"authModeInt",$$v)},expression:"messageSource.configs.authModeInt"}},[_c("el-option",{attrs:{label:"Basic",value:1}}),_c("el-option",{attrs:{label:"Client Certificate",value:2}})],1)],1)],1),1===_vm.messageSource.configs.authModeInt?[_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.userName"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width50",attrs:{placeholder:"Enter Username"},model:{value:_vm.messageSource.configs.userName,callback:function($$v){_vm.$set(_vm.messageSource.configs,"userName",$$v)},expression:"messageSource.configs.userName"}})],1),_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.password"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width50",attrs:{placeholder:"Enter Password"},model:{value:_vm.messageSource.configs.password,callback:function($$v){_vm.$set(_vm.messageSource.configs,"password",$$v)},expression:"messageSource.configs.password"}})],1)]:_vm._e(),2===_vm.messageSource.configs.authModeInt?[_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.certificate"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Client Certificate File",type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:_vm.messageSource.configs.certificate,callback:function($$v){_vm.$set(_vm.messageSource.configs,"certificate",$$v)},expression:"messageSource.configs.certificate"}})],1),_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.rootCa"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Client CA File",type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:_vm.messageSource.configs.rootCa,callback:function($$v){_vm.$set(_vm.messageSource.configs,"rootCa",$$v)},expression:"messageSource.configs.rootCa"}})],1),_c("el-row",{staticClass:"mR20",attrs:{gutter:20}},[_c("p",{staticClass:"fc-input-label-txt fc-input-space-vertical"},[_vm._v(" "+_vm._s(_vm.$t("agent.agent.privateKey"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Client Key File",type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:_vm.messageSource.configs.privateKey,callback:function($$v){_vm.$set(_vm.messageSource.configs,"privateKey",$$v)},expression:"messageSource.configs.privateKey"}})],1)]:_vm._e()],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.submitForm}},[_vm._v(_vm._s(_vm.saving?"Saving...":"SAVE"))])],1)],1)},ConnectionFormvue_type_template_id_ae8cf86e_staticRenderFns=[],ConnectionFormvue_type_script_lang_js={name:"ConnectionForm",props:["onClose"],data:function(){return{messageSource:{source:{name:null,type:"mqtt"},configs:{endPoint:null,port:8083,authModeInt:null,userName:null,password:null,certificate:null,rootCa:null,privateKey:null}},id:null,saving:!1}},methods:{closeDialog:function(){this.onClose()},submitForm:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref,messageSource,_ref2,configs,msgsrc,json,url,_yield$API$post,data,error,_ref3,id;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref=_this||{},messageSource=_ref.messageSource,_ref2=messageSource||{},configs=_ref2.configs,configs=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},configs),{},{port:parseInt(configs.port),authModeInt:parseInt(configs.authModeInt)}),messageSource=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},messageSource),{},{configs:configs}),msgsrc={messageSource:messageSource},json={data:msgsrc},url="v3/agent/addConnection",_context.next=9,api/* API */.bl.post(url,json);case 9:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error?_this.$message.error(error.message||"Error occured"):(_this.$message.success("Connection created"),_this.onClose(),_ref3=data||{},id=_ref3.id,_this.$emit("save",id));case 13:case"end":return _context.stop()}}),_callee)})))()}}},components_ConnectionFormvue_type_script_lang_js=ConnectionFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ConnectionFormvue_type_script_lang_js,ConnectionFormvue_type_template_id_ae8cf86e_render,ConnectionFormvue_type_template_id_ae8cf86e_staticRenderFns,!1,null,null,null)
/* harmony default export */,ConnectionForm=component.exports,validation=__webpack_require__(990260),FLookupFieldWrapper=__webpack_require__(201117),AgentAddFormvue_type_script_lang_js={props:["visibility","isNew","model"],components:{ConnectionForm:ConnectionForm,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z},data:function(){return{saving:!1,sources:null,fields:[],loading:!1,showConnectionForm:!1,newAgent:{id:0,agent:"",siteId:null,autoMappingParentFieldId:null,allowAutoMapping:!1,type:null,interval:null,writable:!0,state:0,displayName:"",agentType:null,messageSourceId:null,subscribeTopics:null,url:null,userName:null,password:null,e2AgentIpAddress:null,e2AgentPort:null},rules:{agent:[{required:!0,message:"Please enter a name",trigger:"blur"}],agentType:[{required:this.isNew,message:"Please enter a type",trigger:"blur"}],siteId:[{required:!0,message:"Site is mandatory",trigger:"blur"}]},buildings:[],agentServiceTypes:[6,7,8,9],disableSiteId:null}},created:function(){this.$store.dispatch("loadSite")},mounted:function(){var _this=this;if(this.isNew)this.newAgent.interval=15;else{this.fetchAgentDetails();var nullableFields=["siteId","interval","agentType"];nullableFields.forEach((function(fieldName){-1===_this.newAgent[fieldName]&&(_this.newAgent[fieldName]=null)}))}},watch:{isMqttType:function(val){val&&this.fetchSources()},isAllowAutoMapping:function(val){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!val){_context.next=5;break}return _context.next=3,_this2.getAssetFields();case 3:_context.next=7;break;case 5:_this2.newAgent.autoMappingParentFieldId=null,_this2.fields=[];case 7:case"end":return _context.stop()}}),_callee)})))()}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.site}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{agentTypes:function(){var types=this.$constants.AgentTypes;return this.$helpers.isLicenseEnabled("CLOUD_AGENT_SERVICE")||this.agentServiceTypes.forEach((function(type){return delete types[type]})),types},isAllowAutoMapping:function(){var _ref=this||{},newAgent=_ref.newAgent,_ref2=newAgent||{},allowAutoMapping=_ref2.allowAutoMapping;return allowAutoMapping},isMqttType:function(){var _ref3=this||{},newAgent=_ref3.newAgent,_ref4=newAgent||{},agentType=_ref4.agentType;return 8==agentType},intervals:function(){var mins=[1,2,3,4,5,6,10,12,15,20,30];return mins=mins.map((function(min){return{key:min,label:min+" min"+(1===min?"":"s")}})),mins.push({key:60,label:"1 hour"}),([3,7].includes(this.newAgent.agentType)||this.model&&1440===this.model.interval)&&mins.push({key:1440,label:"1 day"}),mins},showInterval:function(){return!(0,validation/* isEmpty */.xb)(this.newAgent.agentType)&&(!this.isNew||1!==this.newAgent.agentType&&2!==this.newAgent.agentType)}}),methods:{getAssetFields:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var response,_ref5,data,_ref6,meta,_ref7,fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/module/meta?moduleName=asset");case 2:response=_context2.sent,_ref5=response||{},data=_ref5.data,_ref6=data||{},meta=_ref6.meta,_ref7=meta||{},fields=_ref7.fields,_this3.fields=fields,_this3.fields=_this3.fields.filter((function(field){return(1===field.dataType||2===field.dataType||3===field.dataType)&&-1!=field.fieldId})).map((function(field){return{key:field.fieldId,label:field.displayName}}));case 8:case"end":return _context2.stop()}}),_callee2)})))()},fetchSources:function(id){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url,_yield$API$get,data,error,_ref8,messageSources;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return url="/v3/agent/connections",_context3.next=3,api/* API */.bl.get(url);case 3:_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this4.$message.error(error.message||"Error occured"):(_ref8=data||{},messageSources=_ref8.messageSources,_this4.sources=messageSources,(0,validation/* isEmpty */.xb)(id)||(_this4.newAgent.messageSourceId=id));case 7:case"end":return _context3.stop()}}),_callee3)})))()},fetchAgentDetails:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var model,id,url,_yield$API$get2,data,error,currentAgent,_ref9,_id,name,siteId,type,interval,writable,state,displayName,agentType,params,autoMappingParentFieldId,allowAutoMapping,_ref10,subscribeTopics,messageSourceId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this5.loading=!0,model=_this5.model,id=model.id,url="/v3/agent/"+id,_context4.next=6,api/* API */.bl.get(url);case 6:if(_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,!error){_context4.next=13;break}_this5.$message.error(error.message||"Error occured"),_context4.next=22;break;case 13:if(currentAgent=data.agent,_ref9=currentAgent||{},_id=_ref9.id,name=_ref9.name,siteId=_ref9.siteId,type=_ref9.type,interval=_ref9.interval,writable=_ref9.writable,state=_ref9.state,displayName=_ref9.displayName,agentType=_ref9.agentType,params=_ref9.params,autoMappingParentFieldId=_ref9.autoMappingParentFieldId,allowAutoMapping=_ref9.allowAutoMapping,_ref10=params||{},subscribeTopics=_ref10.subscribeTopics,messageSourceId=_ref10.messageSourceId,_this5.disableSiteId=!_this5.isNew&&0!=siteId,_this5.newAgent={id:_id,agent:name,siteId:siteId||null,type:type,interval:interval,writable:writable,state:state,displayName:displayName,agentType:agentType,messageSourceId:messageSourceId,subscribeTopics:subscribeTopics,autoMappingParentFieldId:autoMappingParentFieldId||null,allowAutoMapping:allowAutoMapping},_this5.isNew){_context4.next=22;break}if(!allowAutoMapping){_context4.next=22;break}return _context4.next=22,_this5.getAssetFields();case 22:_this5.loading=!1;case 23:case"end":return _context4.stop()}}),_callee4)})))()},showConnectionFORM:function(){this.showConnectionForm=!this.showConnectionForm},submitForm:function(agentForm){var _this6=this;this.$refs[agentForm].validate((function(valid){if(valid){_this6.saving=!0;var data={agentContext:_this6.$helpers.cloneObject(_this6.newAgent)};data.agentContext.interval||(data.agentContext.interval=15);var agentData={agentName:_this6.newAgent.agent,dataInterval:_this6.newAgent.interval,siteId:_this6.newAgent.siteId,agentType:_this6.newAgent.agentType,displayName:_this6.newAgent.displayName,orgUserId:_this6.getCurrentUser().ouid,messageSourceId:_this6.newAgent.messageSourceId,subscribeTopics:_this6.newAgent.subscribeTopics,userName:_this6.newAgent.userName,password:_this6.newAgent.password,url:_this6.newAgent.url,port:_this6.newAgent.e2AgentPort,ipAddress:_this6.newAgent.e2AgentIpAddress,allowAutoMapping:_this6.newAgent.allowAutoMapping};_this6.newAgent.allowAutoMapping&&(agentData.autoMappingParentFieldId=_this6.newAgent.autoMappingParentFieldId);var editAgent={agentId:_this6.newAgent.id,toUpdate:{interval:_this6.newAgent.interval,siteId:_this6.newAgent.siteId,writable:_this6.newAgent.writable,displayName:_this6.newAgent.displayName,autoMappingParentFieldId:_this6.newAgent.autoMappingParentFieldId,allowAutoMapping:_this6.newAgent.allowAutoMapping}};_this6.newAgent.allowAutoMapping||(editAgent.toUpdate.autoMappingParentFieldId=-99),_this6.isNew?_this6.$http.post("/v2/agent/create",agentData).then((function(response){_this6.onSubmit(response,"New Agent created.")})):_this6.$http.post("/v2/agent/edit",editAgent).then((function(response){_this6.onSubmit(response,"Agent Settings updated.")}))}}))},onSubmit:function(response,successMsg){500!==response.data.responseCode?(this.$message.success(successMsg),this.resetForm(),this.closeDialog(),this.$emit("saved"),this.saving=!1):(this.$message.error(response.data.result.exception),this.saving=!1)},resetForm:function(){this.$refs["agentForm"].resetFields()},closeDialog:function(){this.$emit("update:visibility",!1)},cancel:function(){this.$emit("canceled")}}},components_AgentAddFormvue_type_script_lang_js=AgentAddFormvue_type_script_lang_js,AgentAddForm_component=(0,componentNormalizer/* default */.Z)(components_AgentAddFormvue_type_script_lang_js,render,staticRenderFns,!1,null,"004e12f4",null)
/* harmony default export */,AgentAddForm=AgentAddForm_component.exports},
/***/505572:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SelectAgent}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/agent/components/SelectAgent.vue?vue&type=template&id=3f191645
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hideLabel?_vm._e():_c("div",{staticClass:"fc-pink f12 pB5 bold"},[_vm._v("Agent")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{disabled:!_vm.disableSelect&&_vm.$validation.isEmpty(_vm.agentSearch),remote:"",filterable:"","default-first-option":"",placeholder:"Select Agent",loading:_vm.isAgentLoading,"loading-text":"Searching","remote-method":function(query){return _vm.searchAgent({searchText:query})}},on:{change:function($event){return _vm.getControllers()}},model:{value:_vm.selectedAgentId,callback:function($$v){_vm.selectedAgentId=$$v},expression:"selectedAgentId"}},_vm._l(_vm.agents,(function(agent){return _c("el-option",{key:agent.id,attrs:{label:agent.displayName||agent.name,value:agent.id,"no-data-text":"No Agent available",clearable:""}})})),1)],1)},staticRenderFns=[],validation=(__webpack_require__(634338),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(990260)),debounce=(__webpack_require__(32284),__webpack_require__(23279)),debounce_default=__webpack_require__.n(debounce),SelectAgentvue_type_script_lang_js={data:function(){return{isAgentLoading:!1,agents:null,selectedAgentId:null,defaultIds:[],selectedAgent:null,agentSearch:"",disableSelect:!1}},props:["discoverableAgents","hideLabel","filterActiveAgents","defaultAgent"],mounted:function(){this.getAgents()},methods:{getAgents:function(){var _this=this;this.defaultIds=this.$route.query.agentId;var url="/v2/agent/list?page=1&perPage=50";(0,validation/* isEmpty */.xb)(this.defaultIds)||(url="".concat(url,"&defaultIds=").concat(this.defaultIds)),(0,validation/* isEmpty */.xb)(this.agentSearch)||(url="".concat(url,"&querySearch=").concat(this.agentSearch)),this.$set(this,"isAgentLoading",!0),this.$http.get(url).then((function(response){_this.$set(_this,"isAgentLoading",!1),_this.agents=response.data.result&&response.data.result.data?response.data.result.data:[],_this.disableSelect=!0,_this.discoverableAgents&&(_this.agents=_this.agents.filter((function(agent){return 1===agent.agentType||2===agent.agentType||9===agent.agentType||6===agent.agentType}))),_this.filterActiveAgents&&(_this.agents=_this.agents.filter((function(agent){return 1==agent.connected}))),_this.agents.length&&(0,validation/* isEmpty */.xb)(_this.agentSearch)&&(null!=_this.defaultAgent?_this.selectedAgentId=_this.defaultAgent:_this.selectedAgentId=parseInt(_this.$route.query.agentId)||_this.agents[0].id,_this.getSelectedAgent(),null!=_this.selectedAgent&&_this.$emit("onAgentFilter",_this.selectedAgent)),_this.disableSelect=!(0,validation/* isEmpty */.xb)(_this.agents)})).catch((function(){_this.agents=[],_this.$set(_this,"isAgentLoading",!1)}))},getControllers:function(){this.getSelectedAgent(),null!=this.selectedAgent&&this.$emit("onAgentFilter",this.selectedAgent)},getSelectedAgent:function(){var _this2=this;this.selectedAgent=this.agents.find((function(agent){return agent.id===_this2.selectedAgentId}))},searchAgent:debounce_default()((function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},searchText=props.searchText;this.agentSearch=searchText,this.getAgents()}),1e3)}},components_SelectAgentvue_type_script_lang_js=SelectAgentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SelectAgentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SelectAgent=component.exports},
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/201117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupFieldWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FLookupFieldWrapper.vue?vue&type=template&id=0b196d62
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"lookup-wrapper"},[_vm.fieldObj.field?_c("FLookupField",{class:{"handle-wizard-icon":_vm.handleWizardIcon},attrs:{model:_vm.modelObj,field:_vm.fieldObj,disabled:_vm.disabled,siteId:_vm.siteId,hideLookupIcon:_vm.hideWizard,hideDropDown:_vm.hideDropDown,preHookFilterConstruction:_vm.filterConstruction,fetchOptionsOnLoad:_vm.fetchOptionsOnLoad,fetchOptionsMethod:_vm.fetchOptionsMethod},on:{"update:model":function($event){_vm.modelObj=$event},showLookupWizard:_vm.showLookupWizard,recordSelected:_vm.onRecordSelected}}):_c("el-input"),!_vm.hideWizard&&_vm.canShowLookupWizard?_c("div",[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.fieldObj,siteId:_vm.siteId,withReadings:_vm.withReadings},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue,showMainFieldSearch:function($event){return _vm.onWizardShow(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),FLookupField=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(891719),__webpack_require__(855048)),validation=__webpack_require__(990260),FLookupFieldWrappervue_type_script_lang_js={name:"f-lookup-field-wrapper",props:{value:[Number,String,Array],label:String,
// Label of selected value if any
formField:Object,field:Object,
// Pass field object if form field not available and field avaialble
moduleName:String,
// Pass module name and field name if field object not avaialble
fieldName:String,disabled:{type:Boolean,default:!1},siteId:Number,hideWizard:{type:Boolean,default:!1},hideDropDown:{type:Boolean,default:!1},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},withReadings:Boolean,handleWizardIcon:{
// To handle wizard icon css
type:Boolean,default:!0},filterConstruction:{type:Function,default:function(field){return field.filters}}},components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(42054)]).then(__webpack_require__.bind(__webpack_require__,499751))}},data:function(){return{fieldObj:{isDataLoading:!1,options:[],lookupModuleName:"",field:null,filters:{},isDisabled:!1},canShowLookupWizard:!1}},computed:{modelObj:{get:function(){return(0,validation/* isEmpty */.xb)(this.value)?this.value:(0,validation/* isArray */.kJ)(this.value)?this.value.map((function(val){return parseInt(val)})):parseInt(this.value)},set:function(value){this.$emit("input",value)}}},created:function(){this.handleDefaultOption()},mounted:function(){var formField=this.formField,field=this.field;(0,validation/* isEmpty */.xb)(formField)?(0,validation/* isEmpty */.xb)(field)?this.fetchField():this.setField(field):this.fieldObj=formField},watch:{canShowLookupWizard:function(value){value||this.onWizardShow(value)}},methods:{showLookupWizard:function(field,canShow){this.fieldObj=field,this.canShowLookupWizard=canShow,this.onWizardShow(!0)},setLookupFieldValue:function(props){var _this=this,field=props.field,_ref=field||{},multiple=_ref.multiple,selectedItems=_ref.selectedItems;if(multiple){var valueArr=[];selectedItems.forEach((function(item){var value=item.value,label=item.label;_this.addOption(value,label),valueArr.push(value)})),this.modelObj=valueArr,this.onRecordSelected(selectedItems,valueArr)}else{var _ref2=selectedItems||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,1),selectedItem=_ref3[0],value=selectedItem.value,label=selectedItem.label;this.addOption(value,label),this.modelObj=value,this.onRecordSelected(selectedItem)}this.onWizardShow(!1)},onWizardShow:function(show){this.$emit("showingLookupWizard",show)},fetchField:function(){var _this2=this,moduleName=this.moduleName,fieldName=this.fieldName;this.$util.loadModuleMeta(moduleName).then((function(meta){var field=meta.fields.find((function(field){return field.name===fieldName}));_this2.setField(field)}))},onRecordSelected:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.$emit.apply(this,["recordSelected"].concat(args))},handleDefaultOption:function(){var label=this.label,value=this.value;(0,validation/* isEmpty */.xb)(label)||(0,validation/* isEmpty */.xb)(value)||this.addOption(value,label)},setField:function(field){var fieldObj=this.fieldObj;fieldObj.field=field,fieldObj.multiple=field.multiple,fieldObj.lookupModuleName=field.lookupModule.name,(0,validation/* isArray */.kJ)(this.modelObj)?fieldObj.selectedItems=this.modelObj.map((function(id){return{value:id}})):fieldObj.selectedItems={value:this.modelObj}},addOption:function(id,label){var fieldObj=this.fieldObj,options=fieldObj.options,newOptionObj={label:label,value:id};(0,validation/* isEmpty */.xb)(options)?options.push(newOptionObj):options.some((function(option){return option.value===id}))||options.unshift(newOptionObj),this.$set(this.fieldObj,"options",options)}}},components_FLookupFieldWrappervue_type_script_lang_js=FLookupFieldWrappervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FLookupFieldWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupFieldWrapper=component.exports},
/***/855048:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FLookupField.vue?vue&type=template&id=473d4b8e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isFieldLoading}}):_c("div",{staticClass:"f-lookup-chooser f-lookup-chooser-container"},[_c("el-select",{ref:"selectBox",class:["fc-input-full-border-select2 width100",(!_vm.canHideLookupIcon||_vm.canShowQuickCreateIcon)&&"resource-search",_vm.isMultiple&&"fc-tag",_vm.hideDropDown&&!_vm.disabled&&"skip-disable"],attrs:{"collapse-tags":"",remote:_vm.isRemote,filterable:"",clearable:_vm.canHideLookupIcon,multiple:_vm.isMultiple,popperAppendToBody:_vm.popperAppendToBody,"remote-method":function(searchText){return _vm.remoteMethod(searchText)},loading:_vm.field.isDataLoading,"loading-text":_vm.$t("common._common.searching"),disabled:_vm.disabled||_vm.hideDropDown,placeholder:_vm.field.placeHolderText||"Select"},on:{change:_vm.recordSelected},model:{value:_vm.modelObj,callback:function($$v){_vm.modelObj=$$v},expression:"modelObj"}},[_c("div",{staticClass:"flRight d-flex",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},slot:"prefix"},[_vm.canShowSystemClear?_c("div",{staticClass:"flookup-remove-icon-alignment flookup-remove-icon",on:{click:_vm.clearData}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e(),_vm.canHideLookupIcon?_vm._e():_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openLookupFieldWizard(_vm.field)}}},[_c("inline-svg",{attrs:{src:"lookup",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1),_vm.canShowQuickCreateIcon?_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openQuickCreate()}}},[_c("el-tooltip",{attrs:{effect:"dark",content:"Add\n          "+_vm.moduleDisplayName,placement:"top"}},[_c("inline-svg",{attrs:{src:"add-pink",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1)],1):_vm._e()]),_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:option.value+" "+index,staticClass:"fc-input-full-border-select2 width100",attrs:{label:option.label,value:option.value}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.$validation.isEmpty(option.secondaryLabel)?_vm._e():_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.secondaryLabel))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13 pL10",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])}))],2),_vm.showQuickCreateData?_c("QuickCreateData",{attrs:{canShowDialog:_vm.showQuickCreateData,quickCreateField:_vm.field,setAddedRecord:_vm.setAddedRecord},on:{"update:canShowDialog":function($event){_vm.showQuickCreateData=$event},"update:can-show-dialog":function($event){_vm.showQuickCreateData=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(634338),__webpack_require__(990260)),constant=__webpack_require__(354754),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),FieldLoader=__webpack_require__(62979),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),LOOKUP_FIELD_PLACEHOLDER_MAP={people:{value:"${LOGGED_PEOPLE}",label:"Current User"},users:{value:"${LOGGED_USER}",label:"Current User"}},FLookupFieldvue_type_script_lang_js={name:"f-lookup-field",props:{model:{},field:{type:Object},disabled:{type:Boolean},siteId:{type:[Number,String]},categoryId:{type:Number},hideLookupIcon:{type:Boolean,default:!1},popperAppendToBody:{required:!1,type:Boolean,default:!0},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},preHookFilterConstruction:{type:Function,default:function(field){return field.filters}},hideDropDown:{type:Boolean,default:!1},skipLoading:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},userfilmoduleEnum:{type:String},parentModuleId:{type:Number},selectedOptions:{type:Array}},components:{FieldLoader:FieldLoader/* default */.Z,QuickCreateData:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(99813)]).then(__webpack_require__.bind(__webpack_require__,676433))}},data:function(){return{localSearch:!1,isLoadedOnce:!1,currentModelValue:!1,showQuickCreateData:!1}},computed:{customOptions:function(){var _ref=this||{},field=_ref.field,_ref2=field||{},lookupModule=_ref2.lookupModule;if((0,validation/* isEmpty */.xb)(lookupModule))return[];var _ref3=lookupModule||{},name=_ref3.name;return(0,validation/* isEmpty */.xb)(LOOKUP_FIELD_PLACEHOLDER_MAP[name])?[]:[LOOKUP_FIELD_PLACEHOLDER_MAP[name]]},modelObj:{get:function(){return this.model},set:function(value){this.currentModelValue=value,this.$emit("update:model",value)}},moduleDisplayName:function(){var field=this.field,_ref4=field.field||{},lookupModule=_ref4.lookupModule,_ref5=lookupModule||{},displayName=_ref5.displayName;return displayName},isFieldLoading:function(){var field=this.field,defaultIds=this.defaultIds,skipLoading=this.skipLoading,isLoadedOnce=this.isLoadedOnce;return!skipLoading&&!isLoadedOnce&&!(0,validation/* isEmpty */.xb)(defaultIds)&&field.isDataLoading},isPickListTypeModule:function(){var field=this.field,fieldObj=field.field,_ref6=fieldObj||field,lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},type=_ref7.type;
// type 1 is for base entity modules
return!!type&&1!==type},isRemote:function(){var localSearch=this.localSearch;return!localSearch},canHideLookupIcon:function(){var hideLookupIcon=this.hideLookupIcon,isPickListTypeModule=this.isPickListTypeModule,hideDropDown=this.hideDropDown,field=this.field,userfilmoduleEnum=this.userfilmoduleEnum,_ref8=field||{},config=_ref8.config,canHide=!1;if(!(0,validation/* isEmpty */.xb)(config)){var canShowLookupWizard=this.$getProperty(config,"canShowLookupWizard",null);(0,validation/* isNull */.Ft)(canShowLookupWizard)||(canHide=!canShowLookupWizard)}return!hideDropDown&&("PICK_LIST"===userfilmoduleEnum||(canHide||hideLookupIcon||isPickListTypeModule))},canShowQuickCreateIcon:function(){var disabled=this.disabled,field=this.field,_ref9=field||{},config=_ref9.config,canShow=!1;return(0,validation/* isEmpty */.xb)(config)||(canShow=this.$getProperty(config,"canShowQuickCreate")),disabled&&(canShow=!1),canShow},isSiteEnabled:function(){var siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;return!(0,validation/* isEmpty */.xb)(currentSiteId)},isMultiple:function(){var field=this.field;return!!field.multiple},resourceModuleName:function(){var field=this.field,config=field.config,lookupModuleName=field.lookupModuleName,_ref10=config||{},isFiltersEnabled=_ref10.isFiltersEnabled,filterValue=_ref10.filterValue;if(isFiltersEnabled&&constant/* default */.Z.LOOKUP_FILTER_ENABLED_FIELDS.includes(lookupModuleName)){var moduleName=constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue];return moduleName}return null},isResourceField:function(){var field=this.field,name=field.name,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field)||"resource"===name;return isResourceField},
// To prefill the existing values, we have to send default ids in picklist api
defaultIds:function(){var modelObj=this.modelObj,selectedOptions=this.selectedOptions,isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(modelObj)||!1,defaultIds=[],selectedOptionsArr=(selectedOptions||[]).map((function(option){return parseInt(option)}));return(0,validation/* isEmpty */.xb)(selectedOptions)?(0,validation/* isEmpty */.xb)(modelObj)||isPlaceHoldersEnabled||(defaultIds=(0,validation/* isArray */.kJ)(modelObj)?(0,toConsumableArray/* default */.Z)(modelObj):[modelObj]):defaultIds=(0,toConsumableArray/* default */.Z)(selectedOptionsArr),defaultIds=defaultIds.filter((function(val){return!constant/* default */.Z.FIELD_PLACEHOLDERS.includes(val)})),defaultIds},operatorLookupModule:function(){var field=this.field,_ref11=field||{},operatorLookupModule=_ref11.operatorLookupModule;return operatorLookupModule||{}},skipSiteFilter:function(){var field=this.field,_ref12=field||{},config=_ref12.config,_ref13=config||{},_ref13$skipSiteFilter=_ref13.skipSiteFilter,skipSiteFilter=void 0!==_ref13$skipSiteFilter&&_ref13$skipSiteFilter;return skipSiteFilter},canShowSystemClear:function(){var canHideLookupIcon=this.canHideLookupIcon,isClearable=this.isClearable,modelObj=this.modelObj,disabled=this.disabled;return!canHideLookupIcon&&!disabled&&(isClearable&&!(0,validation/* isEmpty */.xb)(modelObj))}},watch:{model:function(newVal){var _this=this,currentModelValue=this.currentModelValue,isRemote=this.isRemote;isEqual_default()(newVal,currentModelValue)||(isRemote&&this.getOptions({initialFetch:!0}).then((function(options){_this.$set(_this.field,"options",options)})),this.$set(this,"modelObj",newVal))},siteId:{handler:function(newVal,oldVal){var _this2=this,isSiteEnabled=this.isSiteEnabled,skipSiteFilter=this.skipSiteFilter;skipSiteFilter||isSiteEnabled||newVal===oldVal||this.getOptions({initialFetch:!0}).then((function(options){_this2.$set(_this2.field,"options",options)}))}},parentModuleId:{handler:function(newVal,oldVal){var _this3=this;newVal!==oldVal&&this.getOptions({initialFetch:!0}).then((function(options){_this3.$set(_this3.field,"options",options)}))}},operatorLookupModule:{handler:function(newVal,oldVal){var _this4=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this4.$set(_this4.field,"options",options)}))}},"field.clientCriteria":{handler:function(newVal,oldVal){var _this5=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this5.$set(_this5.field,"options",options)}))}},categoryId:{handler:function(newVal,oldVal){var _this6=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this6.$set(_this6.field,"options",options)}))}},"field.options":{handler:function(value){var modelObj=this.modelObj;if(!(0,validation/* isEmpty */.xb)(value))if((0,validation/* isEmpty */.xb)(modelObj))this.field.selectedItems=[];else if((0,validation/* isArray */.kJ)(modelObj)){var selectedItems=value.filter((function(option){return modelObj.includes(option.value)}));this.field.selectedItems=selectedItems}else{var selectedItem=value.find((function(option){return option.value===modelObj}));this.field.selectedItems=[selectedItem]}},immediate:!0},isLoadedOnce:{handler:function(value){value&&this.$emit("optionsLoadedOnce")}}},created:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var fetchOptionsOnLoad,field,modelObj,customOptions,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:
// Have to skip fetching options initially, when module is 'resource' and filters is not enabled
if(fetchOptionsOnLoad=_this7.fetchOptionsOnLoad,field=_this7.field,modelObj=_this7.modelObj,customOptions=_this7.customOptions,_this7.currentModelValue=modelObj,_this7.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx,!fetchOptionsOnLoad){_context2.next=12;break}return _context2.next=6,_this7.getOptions({initialFetch:!0});case 6:if(_context2.t0=_context2.sent,_context2.t0){_context2.next=9;break}_context2.t0=[];case 9:options=_context2.t0,_this7.$set(_this7.field,"options",[].concat((0,toConsumableArray/* default */.Z)(customOptions),(0,toConsumableArray/* default */.Z)(options))),_this7.$set(_this7,"isLoadedOnce",!0);case 12:_this7.remoteMethod=_this7.$helpers.debounce(function(){var _ref14=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(searchText){var isDataLoading,_options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isDataLoading=field.isDataLoading,isDataLoading){_context.next=6;break}return _context.next=4,_this7.getOptions({searchText:searchText});case 4:_options=_context.sent,_this7.$set(_this7.field,"options",_options);case 6:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref14.apply(this,arguments)}}(),1e3);case 13:case"end":return _context2.stop()}}),_callee2)})))()},methods:{focus:function(){(0,validation/* isEmpty */.xb)(this.$refs["selectBox"])||this.$refs["selectBox"].focus()},getOptions:function(params){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var searchText,initialFetch,fetchOptionsMethod,field,siteId,categoryId,isRemote,defaultIds,resourceModuleName,isResourceField,skipSiteFilter,selectedOptions,_field$filters,fieldFilters,options,filters,props,perPageCount,_yield$_this8$fetchOp,_yield$_this8$fetchOp2,optionsArr,error,_ref15,message,_yield$getFieldOption,_yield$getFieldOption2,_optionsArr,_error,meta,_ref16,_message,_meta$localSearch,localSearch;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
/*
                Have to return empty options if field is of resourcetype, if filters havent be enabled
                and if no values selected already
              */
if(searchText=params.searchText,initialFetch=params.initialFetch,fetchOptionsMethod=_this8.fetchOptionsMethod,field=_this8.field,siteId=_this8.siteId,categoryId=_this8.categoryId,isRemote=_this8.isRemote,defaultIds=_this8.defaultIds,resourceModuleName=_this8.resourceModuleName,isResourceField=_this8.isResourceField,skipSiteFilter=_this8.skipSiteFilter,selectedOptions=_this8.selectedOptions,_field$filters=field.filters,fieldFilters=void 0===_field$filters?{}:_field$filters,options=[],(0,validation/* isEmpty */.xb)(resourceModuleName)||(field.resourceLookupModuleName=resourceModuleName),filters=_this8.preHookFilterConstruction(field),(0,validation/* isEmpty */.xb)(filters)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fieldFilters),filters)),(0,validation/* isEmpty */.xb)(categoryId)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field.filters),{},{category:{operator:"is",value:["".concat(categoryId)]}})),props={field:field,searchText:searchText},skipSiteFilter||(props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{siteId:siteId})),!(isResourceField&&(0,validation/* isEmpty */.xb)(resourceModuleName)&&(0,validation/* isEmpty */.xb)(defaultIds))){_context3.next=12;break}return _context3.abrupt("return",options);case 12:if(initialFetch&&isRemote&&(perPageCount=defaultIds.length>50?defaultIds.length:50,props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{page:1,perPage:perPageCount,defaultIds:defaultIds}),((0,validation/* isEmpty */.xb)(resourceModuleName)&&isResourceField||!(0,validation/* isEmpty */.xb)(selectedOptions))&&(
// Have to fetch only selected values, which is same as the number of defaultids
props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{perPage:defaultIds.length}))),_this8.$set(field,"isDataLoading",!0),(0,validation/* isEmpty */.xb)(fetchOptionsMethod)){_context3.next=25;break}return _context3.next=17,_this8.fetchOptionsMethod(props);case 17:_yield$_this8$fetchOp=_context3.sent,_yield$_this8$fetchOp2=_yield$_this8$fetchOp.options,optionsArr=void 0===_yield$_this8$fetchOp2?[]:_yield$_this8$fetchOp2,error=_yield$_this8$fetchOp.error,error&&(_ref15=error||{},message=_ref15.message,_this8.$message.error(message||"Error Occured")),options=optionsArr,_context3.next=35;break;case 25:return _context3.next=27,(0,picklist/* getFieldOptions */._K)(props);case 27:_yield$getFieldOption=_context3.sent,_yield$getFieldOption2=_yield$getFieldOption.options,_optionsArr=void 0===_yield$getFieldOption2?[]:_yield$getFieldOption2,_error=_yield$getFieldOption.error,meta=_yield$getFieldOption.meta,_error&&(_ref16=_error||{},_message=_ref16.message,_this8.$message.error(_message||"Error Occured")),meta&&(0,validation/* isEmpty */.xb)(searchText)&&(_meta$localSearch=meta.localSearch,localSearch=void 0!==_meta$localSearch&&_meta$localSearch,_this8.$set(_this8,"localSearch",localSearch)),options=_optionsArr;case 35:return _this8.$set(field,"isDataLoading",!1),_context3.abrupt("return",options);case 37:case"end":return _context3.stop()}}),_callee3)})))()},clearData:function(){this.$emit("update:model",""),this.recordSelected("")},recordSelected:function(value){var field=this.field,_this$field$options=this.field.options,options=void 0===_this$field$options?[]:_this$field$options,isMultiple=this.isMultiple,selectedValues=null;isMultiple?(selectedValues=options.filter((function(e){return(value||[]).includes(e.value)})),field.selectedItems=selectedValues):(selectedValues=options.find((function(e){return e.value==value}))||{},field.selectedItems=[],(0,validation/* isEmpty */.xb)(selectedValues)||(field.selectedItems=[selectedValues])),this.$emit("recordSelected",selectedValues,field)},openLookupFieldWizard:function(field){var disabled=this.disabled;disabled||this.$emit("showLookupWizard",field,!0)},openQuickCreate:function(){var disabled=this.disabled;disabled||(this.showQuickCreateData=!0)},setAddedRecord:function(props){var record=props.record,_ref17=record||{},id=_ref17.id,name=record.displayName||record.name||record.subject,field=this.field;field.selectedItems=[{value:id,label:name}],this.$emit("setLookupFieldValue",{field:(0,objectSpread2/* default */.Z)({},field)})}}},forms_FLookupFieldvue_type_script_lang_js=FLookupFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FLookupFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupField=component.exports},
/***/62979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FieldLoader.vue?vue&type=template&id=7252e23e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"field-loading loading-shimmer"}):_vm._e()},staticRenderFns=[],FieldLoadervue_type_script_lang_js={props:{isLoading:{type:Boolean,required:!0}}},forms_FieldLoadervue_type_script_lang_js=FieldLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FieldLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldLoader=component.exports},
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports},
/***/784823:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AdvancedSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/search/AdvancedSearch.vue?vue&type=template&id=66305202
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"d-flex align-center",on:{click:function($event){return _vm.openCloseSearch(!0)}}},[_vm._t("icon",(function(){return[_c("InlineSvg",{staticClass:"d-flex mT3 cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm self-center mR5"}})]}))],2),_vm.canShowSearchWiz?_c("el-dialog",{attrs:{title:_vm.title,visible:_vm.canShowSearchWiz,fullscreen:!0,"append-to-body":!0,"custom-class":"advance-search-container"},on:{"update:visible":function($event){_vm.canShowSearchWiz=$event}}},[_c("AdvancedSearch",{attrs:{moduleName:_vm.moduleName,searchParam:_vm.searchParam,hideQuery:_vm.hideQuery,filterList:_vm.filterList},on:{applyFilters:_vm.applyFilters,closeDialog:function(){return _vm.openCloseSearch(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),router=(__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(329435)),dist=__webpack_require__(191853),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),AdvancedSearchvue_type_script_lang_js={props:["moduleName","moduleDisplayName","filterList","hideQuery","onSave"],components:{AdvancedSearch:dist/* AdvancedSearch */.ZJ},data:function(){return{searchText:"",canShowSearchWiz:!1,isSaving:!1,searchableFields:[],isOpenWizPressed:!1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler))},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler))},computed:{title:function(){var moduleDisplayName=this.moduleDisplayName,title="".concat(this.$t("commissioning.sheet.filter")," ").concat(moduleDisplayName," ").concat(this.$t("filters.search.by"));return title},searchParam:function(){var $route=this.$route,_ref=$route||{},query=_ref.query,_ref2=query||{},search=_ref2.search;return(0,validation/* isEmpty */.xb)(search)?"":search}},mounted:function(){this.fetchSearchableFields({moduleName:this.moduleName})},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({fetchSearchableFields:"search/fetchSearchableFields"})),{},{openCloseSearch:function(canShow){this.searchText="",this.canShowSearchWiz=canShow},applyFilters:function(filters){var hideQuery=this.hideQuery;hideQuery?this.onSave({filters:filters}):this.$store.dispatch("search/applyFilters",filters),this.openCloseSearch(!1)},keyDownHandler:function(e){if(e.shiftKey&&"Slash"===e.code)this.isOpenWizPressed=!0;else{var _navigator=navigator,userAgentData=_navigator.userAgentData,platform=_navigator.platform,_ref3=userAgentData||{},userPlatform=_ref3.platform,currentOS=userPlatform||platform,isMac=currentOS.toUpperCase().indexOf("MAC")>=0;(isMac&&e.metaKey||!isMac&&e.ctrlKey)&&"Enter"===e.key&&this.applyFilter()}},keyUpHandler:function(){this.isOpenWizPressed&&(this.openCloseSearch(!0),this.isOpenWizPressed=!1)}})},search_AdvancedSearchvue_type_script_lang_js=AdvancedSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(search_AdvancedSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AdvancedSearch=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/85133.js.map