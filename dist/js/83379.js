(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[83379,92663],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/748125:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MVBaselineVsActual}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/mv/MVBaselineVsActual.vue?vue&type=template&id=6ce8db85
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"cost-trend-graph mv-baselineVsActual new-chart-css"},[_c("div",{staticClass:"width100 widget-header-2 row"},[_c("div",{staticClass:"col-8 text-left"},[_vm._v(" Adjusted Baseline Energy vs Actual Energy ")]),_c("div",{staticClass:"col-4 text-right f12 font-normal mv-chart-date-picker"},[_vm._v(" "+_vm._s(_vm.startTime)+" - "+_vm._s(_vm.endTime)+" ")])]),_c("spinner",{attrs:{show:_vm.chartloading,size:"80"}}),_vm.loading?_vm._e():_c("f-new-analytic-report",{directives:[{name:"show",rawName:"v-show",value:!_vm.chartloading,expression:"!chartloading"}],ref:"newAnalyticReport",attrs:{config:_vm.analyticsConfig,baseLines:_vm.baseLineList},on:{"update:config":function($event){_vm.analyticsConfig=$event},reportLoaded:_vm.onReportLoaded}})],1)},staticRenderFns=[],moment_timezone=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(186466),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),FNewAnalyticsReportV1=__webpack_require__(937376),NewDateHelper=__webpack_require__(105534),AnalyticsMixin=__webpack_require__(244936),MVBaselineVsActualvue_type_script_lang_js={props:["details"],mixins:[AnalyticsMixin/* default */.Z],components:{FNewAnalyticReport:FNewAnalyticsReportV1/* default */.Z},data:function(){return{loading:!0,chartloading:!0,baseLineList:null,fields:null,analyticsConfig:{name:"Building Analysis",key:"BUILDING_ANALYSIS",analyticsType:this.isSiteAnalysis?6:2,hidedatepicker:!0,hidechartoptions:!0,hideDataPoints:["B"],colors:{A:"#00a2f5",B:"#39c2b0",C:"#39c2b0"},dataPointsRange:{A:{range:[]}},point:{show:!0},axis:{y:{label:"ENERGY USE"}},hidetabular:!0,zoom:{enabled:!1},axes:{A:"y",B:"y2",c:"y"},
// point: {
//   show: true
// },
hidecharttypechanger:!0,showWidgetLegends:!1,disbaleNiceTickMarks:!0,type:"reading",period:12,mode:4,baseLine:null,dateFilter:{},chartViewOption:0,dataPoints:[],chartType:"line",xFormat:"MM-DD-YYYY",predictionTimings:[],transformWorkflow:null,regionConfig:[],diffChartConfig:{from:{point:"A",color:"red",disable:!0},to:{point:"C"},context:{id:"mvbaselinevsactual",class:"baselinevsActual"}}}}},mounted:function(){this.loadPickList()},computed:{startTime:function(){return this.details.baselines&&this.details.baselines.length?this.$options.filters.formatDate(this.details.baselines[0].startTime,!0,!1):null},endTime:function(){return this.details.mvProject&&this.details.mvProject.endTime?this.$options.filters.formatDate(this.details.mvProject.reportingPeriodEndTime,!0,!1):null}},methods:{loadPickList:function(moduleName,fieldName){var self=this;this.loading=!0,self.$http.get("/asset/getreadings").then((function(response){response.data&&(self.fields=Object.values(response.data.fields).find((function(rt){return"totalEnergyConsumptionDelta"===rt.name})),self.perepareConfig())}))},perepareConfig:function(){var actualValueStartTime=this.details.mvProject.reportingPeriodStartTime;this.details.baselines&&this.details.baselines.length&&(this.analyticsConfig.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(64,[this.details.baselines[0].startTime,this.details.baselines[0].endTime]),this.analyticsConfig.dateFilter["value"]=[this.details.baselines[0].startTime,this.details.mvProject.reportingPeriodEndTime]);var startTime=moment_timezone_default()(this.details.baselines[0].startTime),endTime=moment_timezone_default()(this.details.mvProject.reportingPeriodEndTime),start=moment_timezone_default()(startTime),end=moment_timezone_default()(endTime),days=end.diff(start,"days");if(days>90&&(this.analyticsConfig.period=10,this.analyticsConfig.xFormat="MM-YYYY"),10===this.analyticsConfig.period){var time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();actualValueStartTime=moment_timezone_default()(actualValueStartTime).tz(this.$timezone).startOf("month").valueOf(),this.analyticsConfig.dateFilter["value"]=[this.details.baselines[0].startTime,moment_timezone_default()(time).tz(this.$timezone).endOf("month").valueOf()]}else if(12===this.analyticsConfig.period){var _time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();this.analyticsConfig.dateFilter["value"]=[this.details.baselines[0].startTime,moment_timezone_default()(_time).tz(this.$timezone).endOf("day").valueOf()]}this.analyticsConfig.transformWorkflow={workflowString:'<workflow><parameter name="data" type=""/><parameter name="aggr" type=""/><iterator var="index,value:data"><expression name="time"><function>map.get(value, \'X\')</function></expression><expression name="paramC"><function>map.get(value, \'B\')</function></expression><conditions><if criteria="time &gt;='+actualValueStartTime+'"><expression name="put"><function>map.put(value, \'C\', paramC)</function></expression></if></conditions></iterator></workflow>'},this.analyticsConfig.regionConfig={axis:"x",start:this.details.mvProject&&this.details.mvProject.startTime?this.details.mvProject.startTime:null,end:this.details.mvProject&&this.details.mvProject.endTime?this.details.mvProject.endTime:null,reportingPeriodStartTime:this.details.mvProject&&this.details.mvProject.reportingPeriodStartTime?this.details.mvProject.reportingPeriodStartTime:null,class:"mvregion"},this.analyticsConfig.dataPointsRange["A"]={range:[this.details.mvProject&&this.details.mvProject.startTime?this.details.mvProject.startTime:null,this.details.mvProject&&this.details.mvProject.endTime?this.details.mvProject.endTime:null]},this.analyticsConfig.dataPoints=[];var baselinedata={parentId:this.details.mvProject.id,name:this.details.mvProject.meter&&this.details.mvProject.meter.name?this.details.mvProject.meter.name+" (Adjusted Baseline)":"Adjusted Baseline",reportModuleName:"mvproject",yAxis:{fieldId:this.details.submodules.mvbaselinewithadjustmentreading.fields.find((function(field){return"adjustedBaseline"===field.name})).fieldId,aggr:3,label:this.details.mvProject.meter&&this.details.mvProject.meter.name?this.details.mvProject.meter.name+" (Adjusted Baseline)":"Adjusted Baseline"},aliases:{actual:"A"}},actualdata={parentId:this.details.mvProject&&this.details.mvProject.meter?this.details.mvProject.meter.id:null,name:this.details.mvProject.meter&&this.details.mvProject.meter.name?this.details.mvProject.meter.name+" (Actual)":"Actual",yAxis:{fieldId:this.fields.id,aggr:3,label:this.details.mvProject.meter&&this.details.mvProject.meter.name?this.details.mvProject.meter.name+" (Actual)":"Actual"},aliases:{actual:"B"}},cummulative={parentId:null,name:this.details.mvProject.meter&&this.details.mvProject.meter.name?this.details.mvProject.meter.name+" (Actual)":"Actual",metaData:{},yAxis:{dataType:3,label:this.details.mvProject.meter&&this.details.mvProject.meter.name?this.details.mvProject.meter.name+" (Actual)":"Actual",unitStr:""},aliases:{actual:"C"},type:2};this.analyticsConfig.dataPoints.push(baselinedata),this.analyticsConfig.dataPoints.push(actualdata),this.analyticsConfig.dataPoints.push(cummulative),this.loading=!1},onReportLoaded:function(){this.$emit("reportLoaded"),this.chartloading=!1}}},mv_MVBaselineVsActualvue_type_script_lang_js=MVBaselineVsActualvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mv_MVBaselineVsActualvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MVBaselineVsActual=component.exports},
/***/682239:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MVCostTrend}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/mv/MVCostTrend.vue?vue&type=template&id=ccbb91b0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"cost-trend-graph new-chart-css"},[_c("div",{staticClass:"width100 widget-header-2 row"},[_c("div",{staticClass:"col-8 text-left"},[_vm._v("Saving Trend")]),_c("div",{staticClass:"col-4 text-right f12 font-normal mv-chart-date-picker"},[_vm._v(" "+_vm._s(_vm.startTime)+" - "+_vm._s(_vm.endTime)+" ")])]),_c("spinner",{attrs:{show:_vm.chartloading,size:"80"}}),_vm.loading?_vm._e():_c("f-new-analytic-report",{directives:[{name:"show",rawName:"v-show",value:!_vm.chartloading,expression:"!chartloading"}],ref:"newAnalyticReport",staticClass:"pT10",attrs:{config:_vm.analyticsConfig,baseLines:_vm.baseLineList},on:{"update:config":function($event){_vm.analyticsConfig=$event},reportLoaded:_vm.onReportLoaded}})],1)},staticRenderFns=[],FNewAnalyticsReportV1=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(937376)),NewDateHelper=__webpack_require__(105534),AnalyticsMixin=__webpack_require__(244936),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),MVCostTrendvue_type_script_lang_js={props:["details"],mixins:[AnalyticsMixin/* default */.Z],components:{FNewAnalyticReport:FNewAnalyticsReportV1/* default */.Z},data:function(){return{loading:!0,chartloading:!0,baseLineList:null,fields:null,analyticsConfig:{name:"Building Analysis",key:"BUILDING_ANALYSIS",analyticsType:this.isSiteAnalysis?6:2,hidedatepicker:!0,hidechartoptions:!0,point:{show:!0},colors:{C:"#00a2f5",D:"#39c2b0"},zoom:{enabled:!1},hidetabular:!0,hidecharttypechanger:!0,showWidgetLegends:!1,hideDataPoints:["A","B"],axis:{y:{label:"SAVINGS"}},axes:{C:"y",D:"y",A:"y2",B:"y2"},type:"reading",period:12,mode:4,baseLine:null,dateFilter:{},chartViewOption:0,dataPoints:[],chartType:"bar",xFormat:"MM-DD-YYYY",predictionTimings:[],transformWorkflow:{parameters:[{name:"data",typeString:"list"},{name:"aggr",typeString:"map"}],expressions:[]}}}},computed:{startTime:function(){return this.details.baselines&&this.details.baselines.length?this.$options.filters.formatDate(this.details.mvProject.reportingPeriodStartTime,!0,!1):null},endTime:function(){return this.details.mvProject&&this.details.mvProject.reportingPeriodEndTime?this.$options.filters.formatDate(this.details.mvProject.reportingPeriodEndTime,!0,!1):null},targetSavingFieldId:function(){return this.details.submodules.mvtargetsaving.fields.find((function(field){return"targetsaving"===field.name})).fieldId},actualSavingFieldId:function(){return this.details.submodules.mvactualsaving.fields.find((function(field){return"actualsaving"===field.name})).fieldId}},mounted:function(){this.perepareConfig()},methods:{perepareConfig:function(){var parentId=this.details.mvProject.id;this.details.baselines&&this.details.baselines.length&&(this.analyticsConfig.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(64,[this.details.mvProject.reportingPeriodStartTime,this.details.baselines[0].endTime]),this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,this.details.mvProject.reportingPeriodEndTime]);var startTime=moment_timezone_default()(this.details.mvProject.reportingPeriodStartTime),endTime=moment_timezone_default()(this.details.mvProject.reportingPeriodEndTime),start=moment_timezone_default()(startTime),end=moment_timezone_default()(endTime),days=end.diff(start,"days");if(days>90&&(this.analyticsConfig.period=10,this.analyticsConfig.xFormat="MM-YYYY"),10===this.analyticsConfig.period){var time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,moment_timezone_default()(time).tz(this.$timezone).endOf("month").valueOf()]}else if(12===this.analyticsConfig.period){var _time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,moment_timezone_default()(_time).tz(this.$timezone).endOf("day").valueOf()]}var expressions=[],paramACriteria1={name:"paramA",defaultFunctionContext:{nameSpace:"map",functionName:"get",params:"value, 'A'"}},paramACriteria2={name:"result",expr:"paramA * 0.44"},paramACriteria3={name:"put",defaultFunctionContext:{nameSpace:"map",functionName:"put",params:"value, 'C', result"}},paramBCriteria1={name:"paramB",defaultFunctionContext:{nameSpace:"map",functionName:"get",params:"value, 'B'"}},paramBCriteria2={name:"result",expr:"paramB * 0.44"},paramBCriteria3={name:"put",defaultFunctionContext:{nameSpace:"map",functionName:"put",params:"value, 'D', result"}};expressions=[paramACriteria1,paramBCriteria1,paramACriteria2,paramACriteria3,paramBCriteria2,paramBCriteria3],this.analyticsConfig.dataPoints=[],this.analyticsConfig.transformWorkflow={parameters:[{name:"data",typeString:"list"},{name:"aggr",typeString:"map"}],expressions:[{workflowExpressionType:2,iteratableVariable:"data",loopVariableIndexName:"index",loopVariableValueName:"value",expressions:expressions}]};var targetSavings={visible:!1,parentId:parentId,name:"Target Savings",reportModuleName:"mvproject",aliases:{actual:"A"},yAxis:{fieldId:this.targetSavingFieldId,aggr:3}},actualSavings={visible:!1,parentId:parentId,name:"Actual Savings",reportModuleName:"mvproject",aliases:{actual:"B"},yAxis:{fieldId:this.actualSavingFieldId,aggr:3}},targetCost={parentId:null,name:"Targeted Saving",metaData:{},yAxis:{dataType:3,label:"Targeted Saving",unitStr:this.$currency},aliases:{actual:"C"},type:2},savedCost={parentId:null,name:"Actual Saving",metaData:{},yAxis:{dataType:3,label:"Actual Saving",unitStr:this.$currency},aliases:{actual:"D"},type:2};this.analyticsConfig.dataPoints=[targetSavings,actualSavings,targetCost,savedCost],this.loading=!1},onReportLoaded:function(){this.$emit("reportLoaded"),this.chartloading=!1}}},mv_MVCostTrendvue_type_script_lang_js=MVCostTrendvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mv_MVCostTrendvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MVCostTrend=component.exports},
/***/952832:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MVCumulativeSavings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/mv/MVCumulativeSavings.vue?vue&type=template&id=46d0fc56
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"cost-trend-graph  new-chart-css"},[_c("div",{staticClass:"width100 widget-header-2 row"},[_c("div",{staticClass:"col-8 text-left"},[_vm._v("Cummulative Savings")]),_c("div",{staticClass:"col-4 text-right f12 font-normal mv-chart-date-picker"},[_vm._v(" "+_vm._s(_vm.startTime)+" - "+_vm._s(_vm.endTime)+" ")])]),_c("spinner",{attrs:{show:_vm.chartloading,size:"80"}}),_vm.loading?_vm._e():_c("f-new-analytic-report",{directives:[{name:"show",rawName:"v-show",value:!_vm.chartloading,expression:"!chartloading"}],ref:"newAnalyticReport",attrs:{config:_vm.analyticsConfig,baseLines:_vm.baseLineList},on:{"update:config":function($event){_vm.analyticsConfig=$event},reportLoaded:_vm.onReportLoaded}})],1)},staticRenderFns=[],FNewAnalyticsReportV1=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(937376)),NewDateHelper=__webpack_require__(105534),AnalyticsMixin=__webpack_require__(244936),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),MVCumulativeSavingsvue_type_script_lang_js={props:["details"],mixins:[AnalyticsMixin/* default */.Z],components:{FNewAnalyticReport:FNewAnalyticsReportV1/* default */.Z},data:function(){return{loading:!0,chartloading:!0,baseLineList:null,fields:null,analyticsConfig:{name:"Building Analysis",key:"BUILDING_ANALYSIS",analyticsType:this.isSiteAnalysis?6:2,hidedatepicker:!0,hideDataPoints:["A"],xFormat:"MM-DD-YYYY",hidechartoptions:!0,point:{show:!0},hidetabular:!0,hidecharttypechanger:!0,showWidgetLegends:!1,axis:{y:{label:"CUMMULATIVE ".concat(this.$currency," SAVINGS")}},axes:{A:"y2",B:"y"},colors:{B:"#C06A36"},type:"reading",period:12,mode:4,baseLine:null,dateFilter:{},chartViewOption:0,dataPoints:[],chartType:"area",predictionTimings:[]}}},computed:{startTime:function(){return this.details.baselines&&this.details.baselines.length?this.$options.filters.formatDate(this.details.mvProject.reportingPeriodStartTime,!0,!1):null},endTime:function(){return this.details.mvProject&&this.details.mvProject.reportingPeriodEndTime?this.$options.filters.formatDate(this.details.mvProject.reportingPeriodEndTime,!0,!1):null},field:function(){return this.details.submodules.mvcumulativesaving.fields.find((function(field){return"cumulativesaving"===field.name}))}},mounted:function(){this.perepareConfig()},methods:{perepareConfig:function(){this.details.baselines&&this.details.baselines.length&&(this.analyticsConfig.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(64,[this.details.mvProject.reportingPeriodStartTime,this.details.baselines[0].endTime]),this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,this.details.mvProject.reportingPeriodEndTime]);var startTime=moment_timezone_default()(this.details.mvProject.reportingPeriodStartTime),endTime=moment_timezone_default()(this.details.mvProject.reportingPeriodEndTime),start=moment_timezone_default()(startTime),end=moment_timezone_default()(endTime),days=end.diff(start,"days");if(days>90&&(this.analyticsConfig.period=10,this.analyticsConfig.xFormat="MM-YYYY"),10===this.analyticsConfig.period){var time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,moment_timezone_default()(time).tz(this.$timezone).endOf("month").valueOf()]}else if(12===this.analyticsConfig.period){var _time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,moment_timezone_default()(_time).tz(this.$timezone).endOf("day").valueOf()]}this.analyticsConfig.transformWorkflow={workflowString:'<workflow> <parameter name="data" type="" /> <parameter name="aggr" type="" /> <iterator var="index,value:data"> <expression name="paramA"> <function>map.get(value, \'A\')</function> </expression> <expression name="result"> <expr>paramA * 0.44</expr> </expression> <expression name="put"> <function>map.put(value, \'B\', result)</function> </expression> </iterator> </workflow>'},this.analyticsConfig.dataPoints=[];var actualdata={visible:!1,name:this.field.name,reportModuleName:"mvproject",parentId:this.details.mvProject.id,aliases:{actual:"A"},yAxis:{fieldId:this.field.fieldId,aggr:5}},cummulative={parentId:null,name:"Cumulative Savings",metaData:{},yAxis:{dataType:3,label:"Cumulative Savings",unitStr:this.$currency},aliases:{actual:"B"},type:2};this.analyticsConfig.dataPoints=[actualdata,cummulative],this.loading=!1},onReportLoaded:function(){this.$emit("reportLoaded"),this.chartloading=!1}}},mv_MVCumulativeSavingsvue_type_script_lang_js=MVCumulativeSavingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mv_MVCumulativeSavingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MVCumulativeSavings=component.exports},
/***/563458:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MVPercentageSavings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/mv/MVPercentageSavings.vue?vue&type=template&id=70d2f0ed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"cost-trend-graph new-chart-css"},[_c("div",{staticClass:"width100 widget-header-2 row"},[_c("div",{staticClass:"col-8 text-left"},[_vm._v("Saving Percentage")]),_c("div",{staticClass:"col-4 text-right f12 font-normal mv-chart-date-picker"},[_vm._v(" "+_vm._s(_vm.startTime)+" - "+_vm._s(_vm.endTime)+" ")])]),_c("spinner",{attrs:{show:_vm.chartloading,size:"80"}}),_vm.loading?_vm._e():_c("f-new-analytic-report",{directives:[{name:"show",rawName:"v-show",value:!_vm.chartloading,expression:"!chartloading"}],ref:"newAnalyticReport",attrs:{config:_vm.analyticsConfig,baseLines:_vm.baseLineList},on:{"update:config":function($event){_vm.analyticsConfig=$event},reportLoaded:_vm.onReportLoaded}})],1)},staticRenderFns=[],moment_timezone=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),FNewAnalyticsReportV1=__webpack_require__(937376),NewDateHelper=__webpack_require__(105534),AnalyticsMixin=__webpack_require__(244936),MVPercentageSavingsvue_type_script_lang_js={props:["details"],mixins:[AnalyticsMixin/* default */.Z],components:{FNewAnalyticReport:FNewAnalyticsReportV1/* default */.Z},data:function(){return{loading:!0,chartloading:!0,baseLineList:null,fields:null,analyticsConfig:{name:"Building Analysis",key:"BUILDING_ANALYSIS",analyticsType:this.isSiteAnalysis?6:2,hidedatepicker:!0,hidechartoptions:!0,colors:{A:"#6BC04D"},point:{show:!0},axis:{y:{label:"SAVING (%)",min:0,max:100}},hidetabular:!0,zoom:{enabled:!1},hidecharttypechanger:!0,showWidgetLegends:!1,type:"reading",period:12,mode:4,baseLine:null,dateFilter:{},chartViewOption:0,dataPoints:[],chartType:"bar",xFormat:"MM-DD-YYYY",predictionTimings:[],regionConfig:[]}}},mounted:function(){this.perepareConfig()},computed:{startTime:function(){return this.details.baselines&&this.details.baselines.length?this.$options.filters.formatDate(this.details.mvProject.reportingPeriodStartTime,!0,!1):null},endTime:function(){return this.details.mvProject&&this.details.mvProject.reportingPeriodEndTime?this.$options.filters.formatDate(this.details.mvProject.reportingPeriodEndTime,!0,!1):null},fieldId:function(){return this.details.submodules.mvsavingpercentage.fields.find((function(field){return"savingpercentage"===field.name})).fieldId}},methods:{perepareConfig:function(){this.details.baselines&&this.details.baselines.length&&(this.analyticsConfig.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(64,[this.details.baselines[0].startTime,this.details.baselines[0].endTime]),this.analyticsConfig.dateFilter["value"]=[this.details.baselines[0].startTime,this.details.mvProject.reportingPeriodEndTime]);var startTime=this.details.baselines&&this.details.baselines.length?moment_timezone_default()(this.details.baselines[0].startTime):moment_timezone_default()(this.details.mvProject.reportingPeriodStartTime),endTime=moment_timezone_default()(this.details.mvProject.reportingPeriodEndTime),start=moment_timezone_default()(startTime),end=moment_timezone_default()(endTime),days=end.diff(start,"days");if(days>90&&(this.analyticsConfig.period=10,this.analyticsConfig.xFormat="MM-YYYY"),10===this.analyticsConfig.period){var time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,moment_timezone_default()(time).tz(this.$timezone).endOf("month").valueOf()]}else if(12===this.analyticsConfig.period){var _time=(new Date).valueOf()>this.details.mvProject.reportingPeriodEndTime?this.details.mvProject.reportingPeriodEndTime:(new Date).valueOf();this.analyticsConfig.dateFilter["value"]=[this.details.mvProject.reportingPeriodStartTime,moment_timezone_default()(_time).tz(this.$timezone).endOf("day").valueOf()]}this.analyticsConfig.dataPoints=[{parentId:this.details.mvProject.id,name:"Saving Percentage",reportModuleName:"mvproject",yAxis:{fieldId:this.fieldId,aggr:3},aliases:{actual:"A"}}],this.loading=!1},onReportLoaded:function(){this.$emit("reportLoaded"),this.chartloading=!1}}},mv_MVPercentageSavingsvue_type_script_lang_js=MVPercentageSavingsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mv_MVPercentageSavingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MVPercentageSavings=component.exports},
/***/320294:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MVSummaryPdf}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/pdf/MVSummaryPdf.vue?vue&type=template&id=3a7a72a9
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 scrollable mv-summary-pdf-page"},[_vm.isLoading?_vm._e():_c("div",{staticClass:"mv-summary-page"},[_c("div",{staticClass:"mv-pdf-container"},[_c("div",{},[_c("div",{staticClass:"mv-content-con"},[_c("div",{staticClass:"mv-header"},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.$org.logoUrl,expression:"$org.logoUrl"}]},[_c("img",{staticStyle:{width:"100px"},attrs:{src:_vm.$org.logoUrl}})]),_c("div",{staticClass:"fc-black2-18 text-center bold"},[_vm._v(" "+_vm._s(_vm.projectName)+" ")]),_vm._m(0)]),_vm.mvProject?_c("div",{staticClass:"mv-body-container"},[_c("div",{staticClass:"mv-sum-desc"},[_vm._v(" "+_vm._s(_vm.mvProject.description)+" ")]),_c("div",{staticClass:"mT30"},[_c("el-row",[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v("Site")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.getSiteName(_vm.mvProject.siteId))+" ")])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v(" ECM Option Measurement ")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.getECMOptionLabel(_vm.mvProject.emcOptions))+" ")])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v("Reporting Period")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_c("div",{staticClass:"flex-middle pT5"},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.mvProject.reportingPeriodStartTime,!0))+" "),_c("span",{staticClass:"mL15 mR15"},[_vm._v("-")])]),_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.mvProject.reportingPeriodEndTime,!0))+" ")])])])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.baselineperiod"))+" ")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_c("div",{staticClass:"flex-middle pT5"},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.mvBaseLine.startTime,!0))+" "),_c("span",{staticClass:"mL15 mR15"},[_vm._v("-")])]),_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.mvBaseLine.endTime,!0))+" ")])])])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v("ECM period")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"flex-middle pT5"},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.mvProject.startTime,!0))+" "),_c("span",{staticClass:"mL15 mR15"},[_vm._v("-")])]),_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.mvProject.endTime,!0))+" ")])])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v("Asset Name")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s((_vm.mvProject.meter||{}).name)+" ")])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v("Frequency")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(this.$constants.FACILIO_FREQUENCY[_vm.mvProject.frequency])+" ")])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v("Target Savings")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(_vm._s(_vm.mvProject.saveGoal)+"%")])])],1),_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9 bold"},[_vm._v("Project owner")])]),_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.getUserName(_vm.mvProject.owner))+" ")])])],1),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"black-pdf-txt10 fwBold text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.baseline_equation"))+" "),_c("span",{staticClass:"mL15 mR15"},[_vm._v("-")]),_vm.$validation.isEmpty(_vm.mvBaseLine)?_vm._e():_c("span",{staticClass:"f11 formula-expression letter-spacing1"},[_vm._v(_vm._s(_vm.mvBaseLine.formulaField.workflow.resultEvaluator))])]),_c("div",{},[_c("f-formula-builder",{attrs:{module:"formulaField",title:"",renderInLeft:!0,showOnlyVarible:!0},model:{value:_vm.mvBaseLine.formulaField.workflow,callback:function($$v){_vm.$set(_vm.mvBaseLine.formulaField,"workflow",$$v)},expression:"mvBaseLine.formulaField.workflow"}})],1)]),_vm.adjustment?_c("div",{staticClass:"pT30"},[_c("div",[_c("el-row",{staticClass:"pB20"},[_c("el-col",{attrs:{span:12}},[_c("el-row",{staticClass:"flex-middle"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"black-pdf-txt10 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.name"))+" ")])]),_c("el-col",{attrs:{span:1}},[_c("span",{staticClass:"f9 bold letter-spacing1 energy"},[_vm._v("-")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.adjustment.name)+" ")])])],1),_c("el-row",{staticClass:"pT10 flex-middle"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"black-pdf-txt10 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.adjustments_equation"))+" ")])]),_c("el-col",{attrs:{span:1}},[_c("span",{staticClass:"f9 bold letter-spacing1 energy"},[_vm._v("-")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.adjustment.formulaField.workflow.resultEvaluator)+" ")])])],1),_vm.$validation.isEmpty(_vm.adjustment)?_vm._e():_c("div",{staticClass:"pT10 pB10"},[_c("f-formula-builder",{attrs:{module:"formulaField",title:"",renderInLeft:!0,showOnlyVarible:!0},model:{value:_vm.adjustment.formulaField.workflow,callback:function($$v){_vm.$set(_vm.adjustment.formulaField,"workflow",$$v)},expression:"adjustment.formulaField.workflow"}})],1),_c("el-row",{staticClass:"pT10 flex-middle"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"black-pdf-txt10 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.date_range"))+" ")])]),_c("el-col",{attrs:{span:1}},[_c("span",{staticClass:"f9 bold letter-spacing1 energy"},[_vm._v("-")])]),_c("el-col",{attrs:{span:14}},[_c("span",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.adjustment.startTime,!0))+" "),_c("span",{staticClass:"mL15 mR15"},[_vm._v("-")]),_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.adjustment.endTime,!0))+" ")])])],1)],1),_c("el-col",{staticClass:"pL20",attrs:{span:12}},[_c("el-row",{staticClass:"flex-middle"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"black-pdf-txt10 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.adjustments_constant"))+" ")])]),_c("el-col",{attrs:{span:1}},[_c("span",{staticClass:"f9 bold letter-spacing1 energy"},[_vm._v("-")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.adjustment.constant)+" ")])])],1),_c("el-row",{staticClass:"pT10 flex-middle"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"black-pdf-txt10 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.name"))+" ")])]),_c("el-col",{attrs:{span:1}},[_c("span",{staticClass:"f9 bold letter-spacing1 energy"},[_vm._v("-")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.adjustment.name)+" ")])])],1),_c("el-row",{staticClass:"pT10 flex-middle"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"black-pdf-txt10 fwBold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.date_range"))+" ")])]),_c("el-col",{attrs:{span:1}},[_c("span",{staticClass:"f9 bold letter-spacing1 energy"},[_vm._v("-")])]),_c("el-col",{attrs:{span:14}},[_c("span",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.adjustment.startTime,!0))+" "),_c("span",{staticClass:"mL15 mR15"},[_vm._v("-")]),_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.adjustment.endTime,!0))+" ")])])],1)],1)],1)],1)]):_vm._e(),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"black-pdf-txt10 fwBold text-uppercase"},[_vm._v(" Metrics (Reporting period) ")]),_c("div",{staticClass:"mT10"},[_c("el-row",{staticClass:"border-bottom4 border-top1 pT10 pB10"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt8 bold"},[_vm._v("Actual Energy")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.mvProjectObj.returnValue.thisMonthActualConsumption)+" ")])]),_c("el-col",{staticClass:"border-leftpdf",attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt8 bold"},[_vm._v("Savings")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.mvProjectObj.returnValue.costSaved)+" ")])])],1),_c("el-row",{staticClass:"border-bottom4 pT10 pB10"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt8 bold"},[_vm._v(" "+_vm._s(_vm.$t("mv.summary.baseline_energy"))+" ")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.mvProjectObj.returnValue.thisMonthBaselineConsumption)+" ")])]),_c("el-col",{staticClass:"border-leftpdf",attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt8 bold"},[_vm._v("Target Savings")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.mvProjectObj.returnValue.targetCost)+" ")])])],1),_c("el-row",{staticClass:"border-bottom4 pT10 pB10"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt8 bold"},[_vm._v("Carbon Savings")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9"},[_vm._v(" "+_vm._s(_vm.mvProjectObj.returnValue.carbonEmissionSaved)+" Tons ")])]),_c("el-col",{staticClass:"border-leftpdf",attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt8 bold"})]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"black-pdf-txt9"})])],1)],1)])],1)]):_vm._e()])])]),_c("div",{staticClass:"mv-pdf-container"},[_c("div",{},[_c("div",{staticClass:"mv-content-con"},[_c("div",{staticClass:"mv-body-container",staticStyle:{"padding-top":"0"}},[_c("MVBaselineVsActual",{staticClass:"graph-border chart-container baseline-chart-container",attrs:{details:_vm.mvProjectObj},on:{reportLoaded:function($event){return _vm.reportLoaded.push(!0)}}}),_c("MVCumulativeSavings",{staticClass:"graph-border chart-container cumulativecard",attrs:{details:_vm.mvProjectObj},on:{reportLoaded:function($event){return _vm.reportLoaded.push(!0)}}}),_c("MVCostTrend",{staticClass:"graph-border chart-container saving-trend",attrs:{details:_vm.mvProjectObj},on:{reportLoaded:function($event){return _vm.reportLoaded.push(!0)}}}),_c("MVPercentageSavings",{staticClass:"graph-border chart-container percentage-savings",attrs:{details:_vm.mvProjectObj},on:{reportLoaded:function($event){return _vm.reportLoaded.push(!0)}}})],1)])])]),_c("div",{staticClass:"mv-pdf-container baseline-table"},[_c("div",[_c("div",{staticClass:"mv-content-con"},[_c("div",{staticClass:"mv-body-container",staticStyle:{"padding-top":"0"}},[_c("MVBaselineEquation",{staticClass:"mv-summary-baseline",attrs:{details:_vm.mvProjectObj,hideFilter:!0},on:{reportLoaded:function($event){return _vm.reportLoaded.push(!0)}}})],1)])])])])])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"wo-download-fac-logo"},[_c("img",{attrs:{src:__webpack_require__(181242)}})])}],slicedToArray=__webpack_require__(554621),MVBaselineVsActual=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(821057),__webpack_require__(947522),__webpack_require__(425728),__webpack_require__(748125)),MVCumulativeSavings=__webpack_require__(952832),MVCostTrend=__webpack_require__(682239),MVPercentageSavings=__webpack_require__(563458),MVBaselineEquation=__webpack_require__(512219),FFormulaBuilder=__webpack_require__(902294),http=__webpack_require__(218430),AnalyticsMixin=__webpack_require__(244936),validation=__webpack_require__(990260),constant=__webpack_require__(354754),frequencyHash={1:"Till yesterday",3:"Till last month"},MVSummaryPdfvue_type_script_lang_js={props:["details","widget"],mixins:[AnalyticsMixin/* default */.Z],data:function(){return{loading:!0,fields:null,moduleName:"mvproject",mvId:this.$route.params.id,isLoading:!1,mvProjectObj:{},baseLineList:null,analyticsConfig:{name:"Building Analysis",key:"BUILDING_ANALYSIS",analyticsType:this.isSiteAnalysis?6:2,hidedatepicker:!0,hidechartoptions:!0,point:{show:!0},hidetabular:!1,hidechart:!0,hidecharttypechanger:!0,showWidgetLegends:!1,axis:{y:{label:"SAVINGS"}},type:"reading",period:12,mode:4,baseLine:null,dateFilter:{},chartViewOption:0,dataPoints:[],chartType:"line",predictionTimings:[],tableConfig:{hideIndex:!0,removeNegativeValue:!0},transformWorkflow:{parameters:[{name:"data",typeString:"list"},{name:"aggr",typeString:"map"}],expressions:[{workflowExpressionType:2,iteratableVariable:"data",loopVariableIndexName:"index",loopVariableValueName:"value",expressions:[]}]}},reportLoaded:[],detailsLoaded:!1}},components:{
// Page
// Spinner
FFormulaBuilder:FFormulaBuilder/* default */.Z,MVBaselineEquation:MVBaselineEquation["default"],MVBaselineVsActual:MVBaselineVsActual["default"],MVCumulativeSavings:MVCumulativeSavings["default"],MVCostTrend:MVCostTrend["default"],MVPercentageSavings:MVPercentageSavings["default"]},watch:{reportLoaded:function(){this.checkAndPrint()},detailsLoaded:function(){this.checkAndPrint()}},computed:{projectName:function(){var mvProjectObj=this.mvProjectObj,_mvProjectObj$mvProje=mvProjectObj.mvProject,mvProject=void 0===_mvProjectObj$mvProje?{}:_mvProjectObj$mvProje;return(0,validation/* isEmpty */.xb)(mvProject)?"":mvProject.name},mvProject:function(){return this.mvProjectObj.mvProject},mvBaseLine:function(){return this.mvProjectObj.baselines[0]},workFlow:function(){
// let { baseline } = this
// let { formulaField = {} } = baseline
// return (formulaField || {}).workflow || {}
return this.mvProjectObj.adjustments.workFlow},adjustment:function(){return this.mvProjectObj.adjustments[0]}},created:function(){var _this=this;this.$store.dispatch("loadSite");var promises=[],mvId=this.mvId,fetchMVDetailsUrl="/v2/mv/getMVProject?mvProjectId=".concat(mvId),fetchMVCardDetailsUrl="/v2/workflow/getDefaultWorkflowResult",fetchMVSubmoduleDetailsUrl="/v2/readings/getSubModuleRel?moduleName=mvproject",params={defaultWorkflowId:3,paramList:[mvId]};this.isLoading=!0,promises.push(http/* default */.ZP.get(fetchMVDetailsUrl)),promises.push(http/* default */.ZP.post(fetchMVCardDetailsUrl,params)),promises.push(http/* default */.ZP.get(fetchMVSubmoduleDetailsUrl)),Promise.all(promises).then((function(_ref){var _ref2=(0,slicedToArray/* default */.Z)(_ref,3),mvData=_ref2[0],mvCardData=_ref2[1],mvSubmodules=_ref2[2],_mvData$data=mvData.data,mvDataMessage=_mvData$data.message,mvDataResponseCode=_mvData$data.responseCode,mvDataResult=_mvData$data.result,_mvCardData$data=mvCardData.data,mvCardDataMessage=_mvCardData$data.message,mvCardDataResponseCode=_mvCardData$data.responseCode,mvCardDataResult=_mvCardData$data.result,_mvSubmodules$data=mvSubmodules.data,mvSubmodulesMessage=_mvSubmodules$data.message,mvSubmodulesResponseCode=_mvSubmodules$data.responseCode,mvSubmodulesResult=_mvSubmodules$data.result;if(0!==mvDataResponseCode)throw new Error(mvDataMessage);var _mvDataResult$mvProje=mvDataResult.mvProjectWrapper,mvProjectWrapper=void 0===_mvDataResult$mvProje?{}:_mvDataResult$mvProje,frequency=mvProjectWrapper.mvProject.frequency;if(_this.mvProjectObj=mvProjectWrapper,_this.mvProjectObj.frequencyLabel=frequencyHash[frequency],0!==mvCardDataResponseCode)throw new Error(mvCardDataMessage);var _mvCardDataResult$wor=mvCardDataResult.workflow,workflow=void 0===_mvCardDataResult$wor?{}:_mvCardDataResult$wor,_workflow$returnValue=workflow.returnValue,returnValue=void 0===_workflow$returnValue?{}:_workflow$returnValue;_this.mvProjectObj.returnValue=returnValue;var unit=" kWh";if(returnValue.thisMonthActualConsumption>1e4&&(returnValue.thisMonthActualConsumption=returnValue.thisMonthActualConsumption/1e3,unit=" MWh"),returnValue.thisMonthActualConsumption=_this.$d3.format(",.2f")(Math.round(returnValue.thisMonthActualConsumption)),returnValue.thisMonthActualConsumption+=unit,unit=" kWh",returnValue.thisMonthBaselineConsumption>1e4&&(returnValue.thisMonthBaselineConsumption=returnValue.thisMonthBaselineConsumption/1e3,unit=" MWh"),returnValue.thisMonthBaselineConsumption=_this.$d3.format(",.2f")(Math.round(returnValue.thisMonthBaselineConsumption)),returnValue.thisMonthBaselineConsumption+=unit,returnValue.costSaved=_this.$d3.format(",.2f")(Math.round(returnValue.costSaved)),"$"===_this.$currency?returnValue.costSaved="$ "+returnValue.costSaved:returnValue.costSaved+=" "+_this.$currency,returnValue.targetCost=_this.$d3.format(",.2f")(Math.round(returnValue.targetCost)),"$"===_this.$currency?returnValue.targetCost="$ "+returnValue.targetCost:returnValue.targetCost+=" "+_this.$currency,returnValue.carbonEmissionSaved=_this.$d3.format(",.2f")(Math.round(returnValue.carbonEmissionSaved)/1e3),_this.detailsLoaded=!0,0!==mvSubmodulesResponseCode)throw new Error(mvSubmodulesMessage);_this.mvProjectObj.submodules={},mvSubmodulesResult.submodules.forEach((function(submodule){_this.mvProjectObj.submodules[submodule.name]=submodule}))})).catch((function(_ref3){var message=_ref3.message;_this.$message.error(message)})).finally((function(){return _this.isLoading=!1}))},methods:{getECMOptionLabel:function(value){var ecmMeasurementOptions=constant/* default */.Z.ECM_MEASUREMENT_OPTIONS;return ecmMeasurementOptions.find((function(option){return option.value===value})).label},getUserName:function(userObj){if(!(0,validation/* isEmpty */.xb)(userObj)){var id=userObj.id,currentUser=this.$store.getters.getUser(id);return"Unknown"===currentUser.name?"---":currentUser.name}return"---"},getSiteName:function(siteId){var site=this.$store.getters.getSite(siteId);return site.name?site.name:"---"},print:function(){var _this2=this;this.$route.query.download||setTimeout((function(){_this2.$nextTick((function(){window.print()}))}),1e3)},checkAndPrint:function(){this.reportLoaded.length>4&&this.detailsLoaded&&this.print()}}},pdf_MVSummaryPdfvue_type_script_lang_js=MVSummaryPdfvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(pdf_MVSummaryPdfvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MVSummaryPdf=component.exports},
/***/181242:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"da85ccff86897ff2fe48e5fab3a86d03.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/83379.js.map