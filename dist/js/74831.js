"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[74831],{
/***/303514:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AsyncButton}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AsyncButton.vue?vue&type=template&id=16ca9ad1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-button",_vm._b({class:_vm.buttonClass,attrs:{loading:_vm.showLoading,type:_vm.buttonType,size:_vm.size,disabled:_vm.disabled},on:{click:function($event){return _vm.save()}}},"el-button",_vm.$attrs,!1),[_vm._t("default")],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),AsyncButtonvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),{props:["clickAction","actionParams","buttonType","buttonClass","size","disabled","loading"],data:function(){return{isLoading:!1}},computed:{showLoading:function(){return this.loading||this.isLoading}},methods:{save:function(){var _this=this;if(this.clickAction&&"function"===typeof this.clickAction){this.isLoading=!0;var returnPromise=this.actionParams?this.clickAction.apply(this,(0,toConsumableArray/* default */.Z)(this.actionParams)):this.clickAction(),minimumTimeout=this.$helpers.delay(1e3);returnPromise?Promise.all([returnPromise,minimumTimeout]).finally((function(){_this.isLoading=!1})):this.$helpers.delay(1e3).then((function(){return _this.isLoading=!1}))}}}}),components_AsyncButtonvue_type_script_lang_js=AsyncButtonvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AsyncButtonvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AsyncButton=component.exports},
/***/674831:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ControlGroupSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/controls/controlgroups/ControlGroupSummary.vue?vue&type=template&id=f25feb32&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"control-group-summary"},[_c("div",{staticClass:"summaryHeader fc-pm-summary-header fc-new-pm-summary-header d-flex"},[_c("div",{staticClass:"d-flex flex-row justify-between width100"},[_c("div",{staticClass:"primary-field summary-header-heading pT5"},[_c("div",[_vm.$validation.isEmpty(_vm.record)?_vm._e():[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.record.id))]),_c("div",{staticClass:"heading-black18 f16 max-width500px textoverflow-ellipsis"},[_vm._v(" "+_vm._s(_vm.record.name)+" ")])]],2)]),_c("div",{staticClass:"display-flex mB30"},[_vm.isTenantGroup?_c("el-button",{staticClass:"reset-btn stateflow-btn-wrapper el-button el-button--primary letter-spacing0_6",attrs:{loading:_vm.resetLoading},on:{click:_vm.resetChanges}},[_vm._v(" "+_vm._s(_vm.$t("common._common.reset_changes"))+" ")]):_vm._e(),_vm.isTenantGroup?_c("el-button",{staticClass:"fc-wo-border-btn letter-spacing-normal",attrs:{type:"button"},on:{click:function($event){_vm.showChangeSchedule=!0}}},[_vm._v(" "+_vm._s(_vm.$t("common.profile.change_schedule"))+" ")]):_vm._e(),_vm.isTenantGroup?_vm._e():_c("button",{staticClass:"d-flex el-button fc-wo-border-btn pL15 pR15 self-center el-button--button",attrs:{type:"button"},on:{click:_vm.editRecord}},[_vm._m(0)])],1)])]),_c("div",{staticClass:"clearboth fc-pm-summary-tab wo-summary-container"},[_c("el-tabs",{model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.schedule"),name:"schedule"}},[_c("ScheduleTab",{attrs:{moduleName:_vm.moduleName,group:_vm.record,isLoading:_vm.loading},on:{deleteException:_vm.deleteException,editException:_vm.editException}})],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.group_types"),name:"groupType",lazy:""}},[_c("GroupTypesTab",{attrs:{group:_vm.record,groupSections:_vm.groupTypes,isLoading:_vm.loading,moduleName:_vm.moduleName}})],1),_vm.isTenantGroup?_vm._e():_c("el-tab-pane",{attrs:{label:_vm.$t("common._common.tenants_override"),name:"tenantOverride",lazy:""}},[_c("TenantsOverride",{attrs:{group:_vm.record,moduleName:_vm.moduleName}})],1),_vm.isTenantGroup?_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.schedule_changes"),name:"scheduleChanges",lazy:""}},["scheduleChanges"===_vm.activeTab?_c("ExceptionList",{staticStyle:{height:"calc(100vh - 195px)"},attrs:{group:_vm.record,isLoading:_vm.loading,tenantId:_vm.tenantId,moduleName:_vm.isTenantGroup?"controlScheduleExceptionTenant":"controlScheduleException"},on:{onDelete:_vm.scheduleChange,editRecord:_vm.editException}}):_vm._e()],1):_vm._e(),_vm.isTenantGroup?_vm._e():_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.Commands"),name:"commands",lazy:""}},["commands"===_vm.activeTab?_c("CommandsList",{staticStyle:{height:"calc(100vh - 195px)"},attrs:{group:_vm.record,isLoading:_vm.loading,moduleName:_vm.moduleName}}):_vm._e()],1)],1)],1),_vm.showChangeSchedule?_c("ChangeSchedule",{attrs:{closeDialog:_vm.closeDialog,group:_vm.record,record:_vm.editDeleteSlot,isTenantGroup:_vm.isTenantGroup,tenantId:_vm.tenantId,moduleName:_vm.isTenantGroup?"controlScheduleExceptionTenant":"controlScheduleException"},on:{onSave:_vm.scheduleChange}}):_vm._e(),_vm.showDeleteDialog?_c("DeleteSchedule",{attrs:{closeDialog:_vm.closeDialog,recordId:_vm.exceptionId,slotData:_vm.editDeleteSlot,moduleName:"controlScheduleExceptionTenant"}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",[_c("i",{staticClass:"el-icon-edit",attrs:{tabindex:"0"}})])}],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(32284)),ScheduleTabvue_type_template_id_ff222010_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isLoading?_c("div",{staticClass:"mL10 mT70"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.currBusinessHour?_c("div",[_c("div",{staticClass:"d-flex justify-center flex-col"},[_c("div",{staticClass:"d-flex justify-between legend-box-schedule"},[_vm.scheduleLoading?_c("div",{staticClass:"mL10"},[_c("spinner",{attrs:{show:_vm.scheduleLoading,size:"40"}})],1):_c("div",{staticClass:"font-medium mL10"},[_vm._v(_vm._s(_vm.currentWeek))]),_c("div",{staticClass:"text-fc-pink font-medium f16"},[_c("new-date-picker",{staticClass:"filter-field date-filter-comp",attrs:{zone:_vm.$timezone,dateObj:_vm.dateObj,hidePopover:!0,isDateFixed:!1},on:{"update:dateObj":function($event){_vm.dateObj=$event},"update:date-obj":function($event){_vm.dateObj=$event},date:_vm.changeDateFilter}})],1)]),_vm.$validation.isEmpty(_vm.currBusinessHour)?_vm._e():_c("ScheduleVisualizer",{attrs:{schedule:_vm.currBusinessHour,isSameTimingForAll:!1},on:{deleteException:_vm.deleteException,editException:_vm.editException}}),_c("div",{staticClass:"legend-box-schedule pT20 pB20 d-flex"},[_c("div",{staticClass:"green-dot legend-dot"}),_vm._v(" "+_vm._s(_vm.$t("common.operational_analytics.scheduled_hours"))+" "),_vm.showHourExtension?[_c("div",{staticClass:"schedule-extension-dot legend-dot"}),_vm._v(" "+_vm._s(_vm.$t("common._common.hours_extension"))+" ")]:_vm._e(),_vm.showHourReduction?[_c("div",{staticClass:"schedule-reduction-dot legend-dot"}),_vm._v(" "+_vm._s(_vm.$t("common._common.hours_reduction"))+" ")]:_vm._e()],2)],1)]):_vm._e()])},ScheduleTabvue_type_template_id_ff222010_scoped_true_staticRenderFns=[],NewDatePicker=(__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(900773)),ScheduleVisualizer=__webpack_require__(803582),NewDateHelper=__webpack_require__(105534),clone=__webpack_require__(766678),clone_default=__webpack_require__.n(clone),validation=__webpack_require__(990260),helpers=__webpack_require__(778390),moment=helpers/* default */.ZP.getOrgMoment,ScheduleTabvue_type_script_lang_js={components:{ScheduleVisualizer:ScheduleVisualizer/* default */.Z,NewDatePicker:NewDatePicker/* default */.Z},props:["group","isLoading","moduleName"],data:function(){return{schedule:null,currBusinessHour:null,dateObj:clone_default()(NewDateHelper/* default */.Z.getDatePickerObject(31,null)),startWeek:null,endWeek:null,showHourReduction:!1,showHourExtension:!1,scheduleLoading:!1}},computed:{currentWeek:function(){var startWeek=this.startWeek,endWeek=this.endWeek;if(startWeek&&endWeek){var start=moment(startWeek).format("DD, MMM-YYYY"),end=moment(endWeek).format("DD, MMM-YYYY");return"".concat(start," - ").concat(end)}var currentDate=moment(),_start=currentDate.clone().startOf("isoWeek"),weekEnd=moment(_start).add(5,"days").format("DD, MMM-YYYY"),weekStart=moment(_start).format("DD, MMM-YYYY");return"".concat(weekStart," - ").concat(weekEnd)}},watch:{group:{handler:function(){this.init()},immediate:!0}},methods:{init:function(){this.loadData();var value=this.dateObj.value,group=this.group;(0,validation/* isEmpty */.xb)(group)||this.loadSlots(value)},loadData:function(){if(!(0,validation/* isEmpty */.xb)(this.group)){var controlSchedule=this.group.controlSchedule;this.schedule=controlSchedule}},changeDateFilter:function(dateFilter){var value=dateFilter.value;this.startWeek=value[0],this.endWeek=value[1],this.loadSlots(value),this.dateObj=dateFilter},loadSlots:function(value){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var endTime,id,param,_yield$API$post,data,error,slots,schedule;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.scheduleLoading=!0,endTime=moment(value[1]).format("x"),id=_this.group.id,param={group:{id:id},startTime:value[0],endTime:parseInt(endTime),moduleName:_this.moduleName},_context.next=6,api/* API */.bl.post("/v3/control/getSlot",param);case 6:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(slots=data.slots,schedule=slots.map((function(currSlot){var startTime=currSlot.startTime,endTime=currSlot.endTime,exception=currSlot.exception,offSchedule=currSlot.offSchedule;(0,validation/* isEmpty */.xb)(exception)||(offSchedule?_this.showHourReduction=!0:_this.showHourExtension=!0);var start=_this.getHour(startTime),end=_this.getHour(endTime),dayOfWeekEnum=moment(startTime).format("dddd"),startTimeMilli=startTime;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currSlot),{},{startTime:start,endTime:end,dayOfWeekEnum:dayOfWeekEnum.toUpperCase(),startTimeMilli:startTimeMilli})})),_this.currBusinessHour=schedule,_this.scheduleLoading=!1);case 10:case"end":return _context.stop()}}),_callee)})))()},getHour:function(time){return moment(time).format("HH:mm")},editException:function(slot){this.$emit("editException",slot)},deleteException:function(dataObj){this.$emit("deleteException",dataObj)}}},components_ScheduleTabvue_type_script_lang_js=ScheduleTabvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ScheduleTabvue_type_script_lang_js,ScheduleTabvue_type_template_id_ff222010_scoped_true_render,ScheduleTabvue_type_template_id_ff222010_scoped_true_staticRenderFns,!1,null,"ff222010",null)
/* harmony default export */,ScheduleTab=component.exports,GroupTypesTabvue_type_template_id_00445ed4_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isLoading?_c("div",{staticClass:"mL10 mT70"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.sections?_c("div",{staticClass:"group-type-container"},_vm._l(_vm.sections,(function(section,index){return _c("div",{key:index,staticClass:"group-section-container"},[_c("div",{staticClass:"d-flex justify-between pB10"},[_c("div",[_c("div",{staticClass:"bold f16"},[_vm._v(_vm._s(section.name))]),_c("div",{staticClass:"pT5 pB5 f12"},[_vm._v(_vm._s(_vm.typeMap[section.type-1]))])])]),_c("el-collapse-transition",[_c("div",[_vm._l(section.categories,(function(category,index){return[_c("CategoryTable",{key:index,staticClass:"pB20",attrs:{category:category,group:_vm.group,isSummary:!0}})]}))],2)])],1)})),0):_vm._e()])},GroupTypesTabvue_type_template_id_00445ed4_scoped_true_staticRenderFns=[],CategoryTable=__webpack_require__(632482),GroupTypesTabvue_type_script_lang_js={props:["group","groupSections","isLoading"],components:{CategoryTable:CategoryTable/* default */.Z},data:function(){return{typeMap:["HVAC","Lightning","Elevator"],controlPointsList:null}},computed:{sections:function(){var groupSections=this.groupSections;return groupSections.map((function(section){var currCategories=section.categories.map((function(category){var assetCategory=category.assetCategory,controlAssets=category.controlAssets,controlFields=controlAssets[0].controlFields;return{assetList:controlAssets,type:assetCategory,controlPoints:controlFields}}));return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{isCollapsed:!0,categories:currCategories})}))}}},components_GroupTypesTabvue_type_script_lang_js=GroupTypesTabvue_type_script_lang_js,GroupTypesTab_component=(0,componentNormalizer/* default */.Z)(components_GroupTypesTabvue_type_script_lang_js,GroupTypesTabvue_type_template_id_00445ed4_scoped_true_render,GroupTypesTabvue_type_template_id_00445ed4_scoped_true_staticRenderFns,!1,null,"00445ed4",null)
/* harmony default export */,GroupTypesTab=GroupTypesTab_component.exports,TenantsOverridevue_type_template_id_17d9eb65_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"tenant-container"},[_vm.loading?_c("div",{staticClass:"text-center width100 pT50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.tenants)?_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/tenant",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Tenant Available ")])],1):[_c("el-table",{attrs:{data:_vm.tenants,height:"calc(100vh - 195px)"}},[_c("el-table-column",{attrs:{label:"ID","header-align":"center",align:"center","min-width":"30px"},scopedSlots:_vm._u([{key:"default",fn:function(tenant){return[_c("div",{staticClass:"fc-id"},[_vm._v(" "+_vm._s("#"+tenant.row.id)+" ")])]}}])}),_c("el-table-column",{attrs:{label:"NAME","header-align":"center",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(tenant){return[_vm._v(" "+_vm._s(tenant.row.name)+" ")]}}])}),_c("el-table-column",{attrs:{label:"PUBLISHED","header-align":"center",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(tenant){return[_vm.isTenantPublished(tenant.row)?_c("AsyncButton",{staticClass:"publish-btn",attrs:{clickAction:_vm.publishTenant,actionParams:[tenant.row],size:"mini"}},[_vm._v("PUBLISH")]):_c("AsyncButton",{staticClass:"unpublish-btn",attrs:{clickAction:_vm.publishTenant,actionParams:[tenant.row],size:"mini"}},[_vm._v("UNPUBLISH")])]}}])}),_c("el-table-column",{attrs:{label:"SUMMARY","header-align":"center",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(tenant){return[_c("a",{class:_vm.isTenantPublished(tenant.row)?"disabled-view-summary":"",on:{click:function($event){return _vm.openTenantSummary(tenant.row)}}},[_vm._v("View Summary "),_c("InlineSvg",{attrs:{src:"svgs/new-tab",iconClass:"icon vertical-middle icon-xs mL3"}})],1)]}}])})],1)]],2)},TenantsOverridevue_type_template_id_17d9eb65_scoped_true_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),AsyncButton=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(303514)),TenantsOverridevue_type_script_lang_js={components:{AsyncButton:AsyncButton/* default */.Z},props:["group"],data:function(){return{loading:!1,tenants:[],publishedTenants:[],selectedTenantIds:[],isPublishLoading:!1}},watch:{group:{handler:function(value){(0,validation/* isEmpty */.xb)(value)||this.loadRecords()},immediate:!0}},methods:{loadRecords:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$group,id,space,url,params,_yield$API$post,data,error,tenants,alreadySharedTenantList,publishedTenants;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this$group=_this.group,id=_this$group.id,space=_this$group.space,(0,validation/* isEmpty */.xb)(space)){_context.next=14;break}return url="/v3/control/getTenantsToBePublished",params={group:{id:id}},_this.loading=!0,_context.next=7,api/* API */.bl.post(url,params);case 7:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,(0,validation/* isEmpty */.xb)(error)?(tenants=data.tenants,alreadySharedTenantList=data.alreadySharedTenantList,publishedTenants=[],(0,validation/* isEmpty */.xb)(alreadySharedTenantList)||(publishedTenants=alreadySharedTenantList.map((function(group){var id=group.id,tenant=group.tenant;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},tenant),{},{groupId:id})}))),_this.tenants=[].concat((0,toConsumableArray/* default */.Z)(tenants),(0,toConsumableArray/* default */.Z)(publishedTenants)),_this.publishedTenants=publishedTenants):(_this.tenants=[],_this.$message.error(error.message||"Error occured")),_this.loading=!1,_context.next=15;break;case 14:_this.tenants=[];case 15:case"end":return _context.stop()}}),_callee)})))()},changeTenantsSelection:function(tenants){(0,validation/* isEmpty */.xb)(tenants)?this.showTenantOverride=!1:(this.selectedTenantIds=tenants.map((function(currTenant){return currTenant.id})),this.showTenantOverride=!0)},allowOverride:function(){this.isOverrideLoading=!0,this.isOverrideLoading=!1},isTenantPublished:function(tenant){var id=tenant.id,publishedTenant=this.publishedTenants.find((function(currTenant){return currTenant.id===id}));return(0,validation/* isEmpty */.xb)(publishedTenant)},publishTenant:function(tenant){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var id,tenantId,url,params,_yield$API$post2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.isPublishLoading=!0,id=_this2.group.id,tenantId=tenant.id,url="/v3/control/".concat(_this2.isTenantPublished(tenant)?"publishToTenant":"unPublishToTenant"),params={group:{id:id},tenant:{id:tenantId}},_context2.next=7,api/* API */.bl.post(url,params);case 7:_yield$API$post2=_context2.sent,error=_yield$API$post2.error,error?_this2.$message.error(error.message||"Error Occured"):(_this2.$message.success("Tenant Group ".concat(_this2.isTenantPublished(tenant)?"Published":"Unpublished"," successfully")),_this2.loadRecords()),_this2.isPublishLoading=!1;case 11:case"end":return _context2.stop()}}),_callee2)})))()},openTenantSummary:function(tenant){var groupId=tenant.groupId;if(!this.isTenantPublished(tenant)){var route={name:"tenant-group-summary",params:{id:groupId},query:(0,objectSpread2/* default */.Z)({},this.$route.query)},_this$$router$resolve=this.$router.resolve(route),href=_this$$router$resolve.href;window.open(href,"_blank","noopener,noreferrer")}}}},components_TenantsOverridevue_type_script_lang_js=TenantsOverridevue_type_script_lang_js,TenantsOverride_component=(0,componentNormalizer/* default */.Z)(components_TenantsOverridevue_type_script_lang_js,TenantsOverridevue_type_template_id_17d9eb65_scoped_true_render,TenantsOverridevue_type_template_id_17d9eb65_scoped_true_staticRenderFns,!1,null,"17d9eb65",null)
/* harmony default export */,TenantsOverride=TenantsOverride_component.exports,CommandsListvue_type_template_id_7f3b59c7_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"command-list"},[_c("el-tabs",{model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},_vm._l(_vm.tabs,(function(tab){return _c("el-tab-pane",{key:tab.name,attrs:{name:tab.name,label:tab.displayName,lazy:""}},[_c("div",{staticClass:"command-tab-content"},[_vm.showLoading?_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.commands)?_c("div",{staticClass:"no-commands-data"},[_c("img",{attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10 label-txt-black f14 op6"},[_vm._v(" No "+_vm._s(tab.displayName)+" Available. ")])]):_c("el-table",{attrs:{data:_vm.commands,"max-height":_vm.maxHeight}},[_c("el-table-column",{attrs:{label:"ID","header-align":"center",align:"center",width:"100px"},scopedSlots:_vm._u([{key:"default",fn:function(command){return[_c("div",{staticClass:"fc-id"},[_vm._v(" "+_vm._s("#"+command.row.id)+" ")])]}}],null,!0)}),_c("el-table-column",{attrs:{label:"EXECUTED TIME","header-align":"center",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(command){return[_vm._v(" "+_vm._s(_vm._f("formatDate")(command.row.executedTime))+" ")]}}],null,!0)}),_c("el-table-column",{attrs:{label:"ASSET","header-align":"center",align:"center","min-width":"100px"},scopedSlots:_vm._u([{key:"default",fn:function(command){return[_vm._v(" "+_vm._s(command.row.resource.name)+" ")]}}],null,!0)}),_c("el-table-column",{attrs:{label:"READING","header-align":"center",align:"center","min-width":"100px"},scopedSlots:_vm._u([{key:"default",fn:function(command){return[_vm._v(" "+_vm._s(command.row.field.displayName)+" ")]}}],null,!0)}),_c("el-table-column",{attrs:{label:"SET VALUE","header-align":"center",align:"center","min-width":"100px"},scopedSlots:_vm._u([{key:"default",fn:function(command){return[_vm._v(" "+_vm._s(_vm.getSetValue(command.row))+" ")]}}],null,!0)}),_c("el-table-column",{attrs:{label:"EXECUTED BY","header-align":"center",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(command){return[_vm._v(" "+_vm._s(command.row.executedBy.name)+" ")]}}],null,!0)})],1)],1)])})),1),_c("div",{staticClass:"widget-topbar-actions"},[_vm.listCount?_c("pagination",{attrs:{total:_vm.listCount,perPage:_vm.perPage,currentPage:_vm.page},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}):_vm._e()],1)],1)},CommandsListvue_type_template_id_7f3b59c7_scoped_true_staticRenderFns=[],WidgetPagination=(__webpack_require__(538077),__webpack_require__(648324),__webpack_require__(806339)),utils_field=__webpack_require__(815872),CommandsListvue_type_script_lang_js={components:{Pagination:WidgetPagination/* default */.Z},props:["group","isLoading","offset"],data:function(){return{commands:[],loading:!1,activeTab:"upcomingCommands",moduleName:"controlActionCommand",tabs:[{name:"upcomingCommands",displayName:"Upcoming Commands",viewName:"upcoming",filter:{status:{operatorId:9,value:["4","5"]}}},{name:"commandHistory",displayName:"Commands History",viewName:"history",filter:{status:{operatorId:9,value:["1","2","3"]}}}],perPage:30,listCount:null,page:1,maxHeight:null}},created:function(){this.loadRecords()},mounted:function(){this.maxHeight=this.$el.offsetHeight-55;// height of this component - height of el-tabs header
},computed:{showLoading:function(){return this.isLoading||this.loading}},watch:{group:{handler:function(value){(0,validation/* isEmpty */.xb)(value)||this.loadRecords()},immediate:!0},page:"loadRecords",activeTab:{handler:function(){this.page=1,this.loadRecords()}}},methods:{loadRecords:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var id,currTab,filter,viewName,params,moduleName,_yield$API$fetchAll,list,error,meta,totalCount;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,id=_this.group.id,currTab=_this.tabs.find((function(tab){return tab.name===_this.activeTab})),filter=currTab.filter,viewName=currTab.viewName,filter=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filter),{},{group:{operatorId:36,value:[id+""]}}),params={page:_this.page||1,perPage:_this.perPage,withCount:!0,filters:JSON.stringify(filter),viewName:viewName},moduleName=_this.moduleName,_context.next=9,api/* API */.bl.fetchAll(moduleName,params);case 9:_yield$API$fetchAll=_context.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,meta=_yield$API$fetchAll.meta,(0,validation/* isEmpty */.xb)(error)?(totalCount=meta.pagination.totalCount,_this.listCount=totalCount,_this.commands=list):(_this.$message.error(error.message||"Error Occured"),_this.commands=[]),_this.loading=!1;case 15:case"end":return _context.stop()}}),_callee)})))()},getSetValue:function(command){var field=command.field,value=command.value;if(!(0,utils_field/* isBooleanField */.Mw)(field)){var unit=field.unit;return"".concat(value," ").concat(unit)}var trueVal=field.trueVal;field.falseVal;if(value)return trueVal}}},components_CommandsListvue_type_script_lang_js=CommandsListvue_type_script_lang_js,CommandsList_component=(0,componentNormalizer/* default */.Z)(components_CommandsListvue_type_script_lang_js,CommandsListvue_type_template_id_7f3b59c7_scoped_true_render,CommandsListvue_type_template_id_7f3b59c7_scoped_true_staticRenderFns,!1,null,"7f3b59c7",null)
/* harmony default export */,CommandsList=CommandsList_component.exports,ExceptionListvue_type_template_id_afd4662c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"exception-list"},[_c("div",{staticClass:"pT15 pB15 white-background flex justify-between",staticStyle:{"border-bottom":"1px solid #f7f8f9"}},[_c("div",{staticClass:"widget-title"},[_vm._v("Schedule Changes")]),_c("div",[_vm.listCount?_c("pagination",{attrs:{total:_vm.listCount,perPage:_vm.perPage,currentPage:_vm.page},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}):_vm._e()],1)]),_c("div",[_vm.showLoading?_c("div",{staticClass:"text-center width100 pT50"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.exceptionList)?_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column mT200"},[_c("img",{attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10 label-txt-black f14 op6"},[_vm._v(" No Schedule Changes Available. ")])]):_c("el-table",{attrs:{data:_vm.exceptionList,"max-height":_vm.maxHeight}},[_c("el-table-column",{attrs:{label:"ID","header-align":"center",align:"center","min-width":"100px",fixed:""},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_c("div",{staticClass:"fc-id"},[_vm._v(" "+_vm._s("#"+exception.row.id)+" ")])]}}])}),_c("el-table-column",{attrs:{label:"SUBJECT",fixed:"","header-align":"center",align:"center","min-width":"200px"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(exception.row.name)+" ")]}}])}),_c("el-table-column",{attrs:{label:"Extend/Reduce","header-align":"center",align:"center","min-width":"200px"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(exception.row.offSchedule?"Reduced Hours":"Extended Hours")+" ")]}}])}),_c("el-table-column",{attrs:{label:"Frequency","header-align":"center",align:"center","min-width":"200px"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(exception.row.isDay?"Weekly":"Specific Date")+" ")]}}])}),_c("el-table-column",{attrs:{label:"Requested By","header-align":"center",align:"center","min-width":"200px"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(exception.row.sysCreatedBy?exception.row.sysCreatedBy.name:"---")+" ")]}}])}),_c("el-table-column",{attrs:{label:"From","header-align":"center",align:"center","min-width":"150px"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(_vm.getHour(exception.row.startTime,exception.row.isDay))+" ")]}}])}),_c("el-table-column",{attrs:{label:"To","header-align":"center",align:"center","min-width":"150px"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(_vm.getHour(exception.row.endTime,exception.row.isDay))+" ")]}}])}),_c("el-table-column",{attrs:{label:"Created Time","header-align":"center",align:"center","min-width":"200px"},scopedSlots:_vm._u([{key:"default",fn:function(exception){return[_vm._v(" "+_vm._s(_vm.getTime(exception.row.sysCreatedTime))+" ")]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{prop:"",label:"",width:"130",fixed:"right"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"text-center"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editRecord(data.row)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecord(data.row.id)}}})])]}}])})],1)],1),_vm.showChangeSchedule?_c("ChangeSchedule",{attrs:{closeDialog:_vm.closeDialog,isTenantGroup:!0,tenantId:_vm.tenantId,group:_vm.group,record:_vm.formattedSlotData,moduleName:"controlScheduleExceptionTenant",isEditTypeDisabled:!0},on:{onSave:_vm.scheduleChange}}):_vm._e(),_vm.showDeleteDialog?_c("DeleteSchedule",{attrs:{closeDialog:_vm.closeDialog,recordId:_vm.deleteRecordId,moduleName:_vm.moduleName}}):_vm._e()],1)},ExceptionListvue_type_template_id_afd4662c_staticRenderFns=[],DeleteSchedule=(__webpack_require__(169358),__webpack_require__(131187)),ChangeSchedule=__webpack_require__(650871),ExceptionListvue_type_script_lang_js_moment=helpers/* default */.ZP.getOrgMoment,ExceptionListvue_type_script_lang_js={components:{Pagination:WidgetPagination/* default */.Z,DeleteSchedule:DeleteSchedule/* default */.Z,ChangeSchedule:ChangeSchedule/* default */.Z},props:["group","isLoading","moduleName","tenantId"],data:function(){return{loading:!1,exceptions:[],perPage:30,listCount:null,page:1,maxHeight:null,showDeleteDialog:!1,deleteRecordId:null,showChangeSchedule:!1,formattedSlotData:null}},mounted:function(){this.maxHeight=this.$el.offsetHeight-55;// height of this component - height of el-tabs header
},watch:{group:{handler:function(){this.loadRecords()},immediate:!0},page:"loadRecords"},computed:{exceptionList:function(){var exceptions=this.exceptions;return exceptions.map((function(exception){var startSchedule=exception.startSchedule,endSchedule=exception.endSchedule;if((0,validation/* isEmpty */.xb)(startSchedule)||(0,validation/* isEmpty */.xb)(endSchedule)){var startTime=exception.startTime,endTime=exception.endTime;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},exception),{},{startTime:startTime,endTime:endTime,isDay:!1})}startSchedule=JSON.parse(startSchedule),endSchedule=JSON.parse(endSchedule);var _startSchedule=startSchedule,startTimes=_startSchedule.times,_endSchedule=endSchedule,endTimes=_endSchedule.times;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},exception),{},{startTime:startTimes[0],endTime:endTimes[0],isDay:!0})}))},showLoading:function(){return this.loading||this.isLoading}},methods:{loadRecords:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var parentGroup,_ref,groupId,filters,params,_yield$API$fetchAll,list,error,meta,totalCount;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,parentGroup=_this.group.parentGroup,_ref=parentGroup||{},groupId=_ref.id,filters={tenant:{operatorId:36,value:[_this.tenantId+""]},parentGroup:{operatorId:36,value:[groupId+""]}},params={page:_this.page||1,perPage:_this.perPage,withCount:!0,filters:JSON.stringify(filters)},_context.next=7,api/* API */.bl.fetchAll(_this.moduleName,params);case 7:_yield$API$fetchAll=_context.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,meta=_yield$API$fetchAll.meta,(0,validation/* isEmpty */.xb)(error)?(totalCount=meta.pagination.totalCount,_this.listCount=totalCount,_this.exceptions=list):_this.$message.error(error.message||"Error Occured"),_this.loading=!1;case 13:case"end":return _context.stop()}}),_callee)})))()},getTime:function(miliseconds){return this.$options.filters.fromNow(miliseconds)},getHour:function(time,isDay){return isDay?new ExceptionListvue_type_script_lang_js_moment(time,"HH:mm").format("hh:mm A"):new ExceptionListvue_type_script_lang_js_moment(time,"x").format("hh:mm A")},getDate:function(time){return new ExceptionListvue_type_script_lang_js_moment(time,"hh:mm A").format("DD/MM")},closeDialog:function(isActionExecuted){this.showDeleteDialog=!1,this.showChangeSchedule=!1,isActionExecuted&&this.$emit("onDelete")},deleteRecord:function(id){this.showDeleteDialog=!0,this.deleteRecordId=id},editRecord:function(exception){var formattedSlotData,startTime=exception.startTime,endTime=exception.endTime,isDay=exception.isDay;formattedSlotData=isDay?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},exception),{},{exception:exception,startTimeMilli:startTime}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},exception),{},{exception:exception,startTime:new ExceptionListvue_type_script_lang_js_moment(startTime,"x").format("HH:mm"),endTime:new ExceptionListvue_type_script_lang_js_moment(endTime,"x").format("HH:mm"),startTimeMilli:startTime}),this.formattedSlotData=formattedSlotData,this.showChangeSchedule=!0},scheduleChange:function(){this.showChangeSchedule=!1}}},components_ExceptionListvue_type_script_lang_js=ExceptionListvue_type_script_lang_js,ExceptionList_component=(0,componentNormalizer/* default */.Z)(components_ExceptionListvue_type_script_lang_js,ExceptionListvue_type_template_id_afd4662c_render,ExceptionListvue_type_template_id_afd4662c_staticRenderFns,!1,null,null,null)
/* harmony default export */,ExceptionList=ExceptionList_component.exports,router=__webpack_require__(329435),ControlGroupSummaryvue_type_script_lang_js={props:["moduleName","id"],components:{ScheduleTab:ScheduleTab,GroupTypesTab:GroupTypesTab,TenantsOverride:TenantsOverride,CommandsList:CommandsList,ChangeSchedule:ChangeSchedule/* default */.Z,ExceptionList:ExceptionList,DeleteSchedule:DeleteSchedule/* default */.Z},data:function(){return{record:[],activeTab:"schedule",loading:!0,showChangeSchedule:!1,resetLoading:!1,showDeleteDialog:!1,editDeleteSlot:null}},computed:{recordId:function(){var id=this.id;return id},tenantId:function(){var id=this.record.tenant.id;return id},groupTypes:function(){var sections=this.record.sections;return(0,validation/* isEmpty */.xb)(sections)?[]:sections},isTenantGroup:function(){var moduleName=this.moduleName;return"controlGroupv2TenantSharing"===moduleName}},watch:{recordId:{handler:function(){this.loadRecord(),this.activeTab="schedule"},immediate:!0}},methods:{loadRecord:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var id,moduleName,_yield$API$fetchRecor,record,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,id=_this.$route.params.id,moduleName=_this.moduleName,_context.next=5,api/* API */.bl.fetchRecord(moduleName,{id:id});case 5:_yield$API$fetchRecor=_context.sent,record=_yield$API$fetchRecor[moduleName],error=_yield$API$fetchRecor.error,(0,validation/* isEmpty */.xb)(error)?_this.record=record:_this.$message.error(error.message||"Error Occured"),_this.loading=!1;case 10:case"end":return _context.stop()}}),_callee)})))()},editRecord:function(){var moduleName=this.moduleName,id=this.$getProperty(this.$route,"params.id","");if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref.name,route={name:name,params:{id:id}};this.$router.push(route)}else this.$router.push({name:"group-edit",params:{id:id,moduleName:moduleName},query:(0,objectSpread2/* default */.Z)({},this.$route.query)}).catch((function(){}))},closeDialog:function(isSaved){this.showChangeSchedule=!1,this.showDeleteDialog=!1,this.editDeleteSlot=null,isSaved&&this.loadRecord()},resetChanges:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var url,id,tenantId,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.resetLoading=!0,url="/v3/control/resetTenantChanges",id=_this2.id,tenantId=_this2.tenantId,params={group:{id:parseInt(id)},tenant:{id:parseInt(tenantId)}},_context2.next=6,api/* API */.bl.post(url,params);case 6:_yield$API$post=_context2.sent,error=_yield$API$post.error,(0,validation/* isEmpty */.xb)(error)?_this2.$message.success(_this2.$t("common.dialog.changes_are_reset")):_this2.$message.error(error.message||"Error Occured"),_this2.resetLoading=!1,_this2.loadRecord();case 11:case"end":return _context2.stop()}}),_callee2)})))()},scheduleChange:function(){this.showChangeSchedule=!1,this.loadRecord()},editException:function(slot){this.showChangeSchedule=!0,this.editDeleteSlot=slot},deleteException:function(_ref2){var id=_ref2.id,slot=_ref2.slot;this.exceptionId=id,this.editDeleteSlot=slot,this.showDeleteDialog=!0}}},controlgroups_ControlGroupSummaryvue_type_script_lang_js=ControlGroupSummaryvue_type_script_lang_js,ControlGroupSummary_component=(0,componentNormalizer/* default */.Z)(controlgroups_ControlGroupSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"f25feb32",null)
/* harmony default export */,ControlGroupSummary=ControlGroupSummary_component.exports},
/***/650871:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ChangeSchedule}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/controls/controlgroups/components/ChangeSchedule.vue?vue&type=template&id=5310a446&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"agents-dialog fc-dialog-center-container change-schedule-container",staticStyle:{"z-index":"9999999999"},attrs:{title:"Schedule Change",visible:!0,width:"618px","append-to-body":!0,"before-close":function(){return _vm.closeDialog()},"show-close":!1}},[_vm.isEdit&&_vm.showLoading?_c("div",{staticClass:"p20"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_c("el-form",{ref:"form",staticClass:"pR30 pL30 pB30",attrs:{model:_vm.schedule,rules:_vm.rules,"label-width":"120px","label-position":"left"}},[_vm.isGroupEmpty?_c("el-form-item",{attrs:{label:"Group",prop:"selectedGroup"}},[_c("FLookupField",{staticClass:"flookup-field-groups width100",attrs:{model:(_vm.schedule.selectedGroup||{}).label,hideDropDown:!0,fetchOptionsOnLoad:!0,canShowLookupWizard:_vm.showLookupFieldWizard,field:_vm.fieldObj},on:{"update:model":function($event){_vm.$set(_vm.schedule.selectedGroup||{},"label",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue}})],1):_vm._e(),_vm.isEdit?_vm._e():_c("el-form-item",{attrs:{label:"Name",prop:"name"}},[_c("el-input",{staticClass:"el-input-textbox-full-border",attrs:{placeholder:"Enter a name for schedule"},model:{value:_vm.schedule.name,callback:function($$v){_vm.$set(_vm.schedule,"name",$$v)},expression:"schedule.name"}})],1),_vm.isEdit?_vm._e():_c("el-form-item",{attrs:{label:"Frequency"}},[_c("el-radio-group",{on:{change:_vm.clearValidation},model:{value:_vm.schedule.isDay,callback:function($$v){_vm.$set(_vm.schedule,"isDay",$$v)},expression:"schedule.isDay"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!0}},[_vm._v("Daily")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v("Specific Date")])],1)],1),_vm.isEdit?_c("el-form-item",{attrs:{label:"Apply For"}},[_c("el-radio-group",{attrs:{disabled:_vm.schedule.isEdited||!_vm.schedule.isDay||_vm.isEditTypeDisabled},model:{value:_vm.schedule.isThisEvent,callback:function($$v){_vm.$set(_vm.schedule,"isThisEvent",$$v)},expression:"schedule.isThisEvent"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!0}},[_vm._v("This Event")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v("Recurring Event")])],1)],1):_vm._e(),(_vm.isEdit?!_vm.schedule.isThisEvent:_vm.schedule.isDay)?[_c("el-form-item",{attrs:{label:"Select Days",prop:"selectedDays"}},[_c("el-checkbox",{attrs:{label:"All days"},on:{change:_vm.checkAllDay},model:{value:_vm.allDays,callback:function($$v){_vm.allDays=$$v},expression:"allDays"}}),_c("el-checkbox-group",{model:{value:_vm.schedule.selectedDays,callback:function($$v){_vm.$set(_vm.schedule,"selectedDays",$$v)},expression:"schedule.selectedDays"}},_vm._l(_vm.daysInWeek,(function(day,index){return _c("el-checkbox",{key:index,attrs:{label:day}})})),1)],1)]:_vm._e(),_vm.schedule.isDay?_vm._e():_c("el-form-item",{attrs:{label:"Date",prop:"date"}},[_c("FDatePicker",{staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"date",placeholder:"Select Date",pickerOptions:_vm.pickerOptions},model:{value:_vm.schedule.date,callback:function($$v){_vm.$set(_vm.schedule,"date",$$v)},expression:"schedule.date"}})],1),_c("div",{staticClass:"flex flex-row"},[_c("el-form-item",{attrs:{label:"Time",prop:"startTime"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 mR10",attrs:{placeholder:"From time"},model:{value:_vm.schedule.startTime,callback:function($$v){_vm.$set(_vm.schedule,"startTime",$$v)},expression:"schedule.startTime"}},_vm._l(_vm.getTimeInterval(_vm.startHour,_vm.endHour),(function(interval){return _c("el-option",{key:interval,attrs:{value:interval,label:interval}})})),1)],1),_c("span",{staticClass:"mT10"},[_vm._v("-")]),_c("el-form-item",{attrs:{prop:"endTime","label-width":"0px"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 mL10",attrs:{placeholder:"To time"},model:{value:_vm.schedule.endTime,callback:function($$v){_vm.$set(_vm.schedule,"endTime",$$v)},expression:"schedule.endTime"}},_vm._l(_vm.getTimeInterval(_vm.startHour,_vm.endHour),(function(interval){return _c("el-option",{key:interval,attrs:{value:interval,label:interval,disabled:_vm.isOptionsDisabled(interval)}})})),1)],1)],1),_c("el-form-item",{attrs:{label:"Select Type"}},[_c("el-radio-group",{model:{value:_vm.schedule.isScheduleExtension,callback:function($$v){_vm.$set(_vm.schedule,"isScheduleExtension",$$v)},expression:"schedule.isScheduleExtension"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!1}},[_vm._v("Extend Hours")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!0}},[_vm._v("Reduce Hours")])],1)],1)],2),_c("div",{staticClass:"schedule-btn-footer"},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:function(){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save mL0",attrs:{loading:_vm.saving},on:{click:_vm.save}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1),_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.showLookupFieldWizard,selectedLookupField:_vm.fieldObj,withReadings:!0},on:{"update:canShowLookupWizard":function($event){_vm.showLookupFieldWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.showLookupFieldWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FDatePicker=(__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(339772),__webpack_require__(865137),__webpack_require__(358551)),api=__webpack_require__(32284),validation=__webpack_require__(990260),helpers=__webpack_require__(778390),ControlScheduleUtil=__webpack_require__(294323),FLookupFieldWizard=__webpack_require__(499751),FLookupField=__webpack_require__(855048),moment=helpers/* default */.ZP.getOrgMoment,ChangeSchedulevue_type_script_lang_js={props:["closeDialog","group","moduleName","tenantId","isTenantGroup","record","isEditTypeDisabled"],components:{FDatePicker:FDatePicker/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"],FLookupField:FLookupField/* default */.Z},data:function(){return{startHour:0,endHour:23,daysInWeek:["Mon","Tue","Wed","Thurs","Fri","Sat","Sun"],showLoading:!1,allDays:!1,saving:!1,currentGroup:null,showLookupFieldWizard:!1,fieldObj:{isDataLoading:!1,options:[],lookupModuleName:"controlGroupv2TenantSharing",field:{lookupModule:{name:"controlGroupv2TenantSharing",displayName:"Control Group"}},forceFetchAlways:!0,filters:{},placeHolderText:"Select Group",isDisabled:!1},schedule:{selectedGroup:null,isDay:!0,isScheduleExtension:!0,selectedDays:[],startTime:"",endTime:"",date:null,name:"",isThisEvent:!0,isEdited:!1},rules:{selectedGroup:[{required:!0,message:"Please select a group",trigger:"change"}],name:[{required:!0,message:"Please enter a name for the schedule change",trigger:"blur"}],selectedDays:[{required:!0,message:"Please select days for which you want the schedule changes to be applied",trigger:"change"}],date:[{required:!0,message:"Please select date",trigger:"change"}],startTime:[{required:!0,message:"Please select a start Time",trigger:"change"}],endTime:[{required:!0,message:"Please select a end Time",trigger:"change"}]}}},computed:{isEdit:function(){return!(0,validation/* isEmpty */.xb)(this.record)},pickerOptions:function(){var todayDate=moment().startOf("date").valueOf();return{disabledDate:function(time){return time.getTime()<todayDate}}},isGroupEmpty:function(){var group=this.group;return(0,validation/* isEmpty */.xb)(group)},getModuleDetails:function(){var record=this.record,isThisEvent=this.schedule.isThisEvent,moduleName=this.moduleName,_ref=record||{},edited=_ref.edited,id=_ref.id,exception=_ref.exception,_ref2=exception||{},startSchedule=_ref2.startSchedule,recordId=_ref2.id,moduleDetails={};return moduleDetails=edited?{moduleName:"controlScheduleSlots",id:id}:(0,validation/* isEmpty */.xb)(startSchedule)||!isThisEvent?{moduleName:moduleName,id:recordId}:{moduleName:"controlScheduleSlots",id:id},moduleDetails}},created:function(){this.deserialize()},methods:{showLookupWizard:function(field,canShow){this.selectedLookupField=field,this.showLookupFieldWizard=canShow},setLookupFieldValue:function(value){var field=value.field,selectedItems=field.selectedItems;this.schedule.selectedGroup=selectedItems[0],this.showLookupFieldWizard=!1,this.fetchGroupDetails()},fetchGroupDetails:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var selectedGroup,_ref3,value,groupModuleName,_yield$API$fetchRecor,record;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(selectedGroup=_this.schedule.selectedGroup,_ref3=selectedGroup||{},value=_ref3.value,groupModuleName="controlGroupv2TenantSharing",!value){_context.next=9;break}return _context.next=6,api/* API */.bl.fetchRecord(groupModuleName,{id:value});case 6:_yield$API$fetchRecor=_context.sent,record=_yield$API$fetchRecor[groupModuleName],_this.currentGroup=record;case 9:case"end":return _context.stop()}}),_callee)})))()},deserialize:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this2$record,exception,startTime,endTime,startTimeMilli,edited,startSchedule,typeEnum,_startSchedule,offSchedule,name,_JSON$parse,values,days,_this2$record2,_startTime,_endTime,_offSchedule,_name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2.currentGroup=_this2.group,(0,validation/* isEmpty */.xb)(_this2.record)||(_this2$record=_this2.record,exception=_this2$record.exception,startTime=_this2$record.startTime,endTime=_this2$record.endTime,startTimeMilli=_this2$record.startTimeMilli,edited=_this2$record.edited,startSchedule=exception.startSchedule,typeEnum=exception.typeEnum,edited||"RECURING"!==typeEnum||(_this2.schedule.isThisEvent=!1),(0,validation/* isEmpty */.xb)(startSchedule)?(_this2$record2=_this2.record,_startTime=_this2$record2.startTime,_endTime=_this2$record2.endTime,_offSchedule=_this2$record2.offSchedule,_name=_this2$record2.exception.name,_this2.schedule=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this2.schedule),{},{isDay:!1,startTime:moment(_startTime,"HH:mm").format("hh:mm A"),endTime:moment(_endTime,"HH:mm").format("hh:mm A"),date:startTimeMilli,name:_name,isScheduleExtension:_offSchedule||!1,isEdited:edited||!1})):(_startSchedule=exception.startSchedule,offSchedule=exception.offSchedule,name=exception.name,_JSON$parse=JSON.parse(_startSchedule),values=_JSON$parse.values,values&&(days=_this2.daysInWeek.filter((function(day,index){return values.includes(index+1)})),7===values.length&&(_this2.allDays=!0)),_this2.schedule=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this2.schedule),{},{selectedDays:days,isDay:!0,startTime:moment(startTime,"HH:mm").format("hh:mm A"),endTime:moment(endTime,"HH:mm").format("hh:mm A"),name:name,date:startTimeMilli,isScheduleExtension:offSchedule||!1,isEdited:edited||!1})));case 2:case"end":return _context2.stop()}}),_callee2)})))()},checkAllDay:function(selectedVal){this.schedule.selectedDays=selectedVal?this.daysInWeek:[]},getTimeInterval:function(startHour,endHour){var startTime=moment(startHour,"HH:mm"),endTime=moment(endHour,"HH:mm");endTime.isBefore(startTime)&&endTime.add(1,"day");var timeStops=[];while(startTime<=endTime)timeStops.push(new moment(startTime).format("hh:mm A")),startTime.add(1,"hours");return timeStops},save:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_this3.$refs["form"].validate(function(){var _ref4=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(valid){var data,promise,_this3$getModuleDetai,moduleName,id,_yield$promise,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!valid){_context3.next=10;break}return _this3.saving=!0,data=_this3.serialize(),_this3.isEdit?(_this3$getModuleDetai=_this3.getModuleDetails,moduleName=_this3$getModuleDetai.moduleName,id=_this3$getModuleDetai.id,promise=api/* API */.bl.updateRecord(moduleName,{data:data,id:id})):promise=api/* API */.bl.createRecord(_this3.moduleName,{data:data}),_context3.next=6,promise;case 6:_yield$promise=_context3.sent,error=_yield$promise.error,error?_this3.$message.error(error.message||"Error Occured"):(_this3.$message.success("Exception ".concat(_this3.isEdit?"Edited":"Created"," successfully")),_this3.closeDialog(!0)),_this3.saving=!1;case 10:case"end":return _context3.stop()}}),_callee3)})));return function(_x){return _ref4.apply(this,arguments)}}());case 1:case"end":return _context4.stop()}}),_callee4)})))()},serialize:function(){var schedule=this.schedule,daysInWeek=this.daysInWeek,name=schedule.name,startTime=schedule.startTime,endTime=schedule.endTime,isScheduleExtension=schedule.isScheduleExtension,isDay=schedule.isDay,selectedDays=schedule.selectedDays,date=schedule.date,isThisEvent=schedule.isThisEvent;if(this.isEdit&&isThisEvent){var _this$group=this.group,scheduleId=_this$group.controlSchedule.id,groupId=_this$group.id,_this$record=this.record,id=_this$record.id,exceptionId=_this$record.exception.id,startTimeMilli=_this$record.startTimeMilli,_date=moment(startTimeMilli).format("DD MM"),actualDate=moment(_date,"DD MM").format("x"),data={controlGroupModuleName:"controlGroupv2TenantSharing",startTime:this.getDateWithTime(actualDate,startTime),endTime:this.getDateWithTime(actualDate,endTime),exception:{id:exceptionId},group:{id:groupId},schedule:{id:scheduleId},id:id,offSchedule:isScheduleExtension};return data}var _this$currentGroup=this.currentGroup,_scheduleId=_this$currentGroup.controlSchedule.id,parentGroupId=_this$currentGroup.parentGroup.id,_data={name:name,type:isDay?1:2,offSchedule:isScheduleExtension,schedule:{id:_scheduleId}};if(isDay){var scheduleParam={frequency:1,frequencyType:1,values:[],times:[(0,ControlScheduleUtil/* getHour */.ex)(startTime,"HH:mm")],custom:!0},values=scheduleParam.values;selectedDays.forEach((function(currDay){var index=daysInWeek.findIndex((function(day){return day===currDay}));values.push(index+1),values.sort()})),_data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_data),{},{startScheduleJson:scheduleParam,endScheduleTime:(0,ControlScheduleUtil/* getHour */.ex)(endTime,"HH:mm")})}else _data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_data),{},{startTime:this.getDateWithTime(date,startTime),endTime:this.getDateWithTime(date,endTime)});if(this.isTenantGroup){var tenantSpecificData={tenant:{id:parseInt(this.tenantId)},parentGroup:{id:parentGroupId}};_data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_data),tenantSpecificData)}return _data},getDateWithTime:function(date,time){var milli=moment(date,"x").add((0,ControlScheduleUtil/* getHour */.ex)(time,"HH:mm"),"hours").format("x");return parseInt(milli)},isOptionsDisabled:function(currTimeInterval){var startTime=this.schedule.startTime;if((0,validation/* isEmpty */.xb)(startTime))return!0;var formattedStartTime=(0,ControlScheduleUtil/* getHour */.ex)(startTime,"H"),formattedInterval=(0,ControlScheduleUtil/* getHour */.ex)(currTimeInterval,"H");return!(formattedInterval>formattedStartTime)},clearValidation:function(){this.$refs["form"].clearValidate()}}},components_ChangeSchedulevue_type_script_lang_js=ChangeSchedulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ChangeSchedulevue_type_script_lang_js,render,staticRenderFns,!1,null,"5310a446",null)
/* harmony default export */,ChangeSchedule=component.exports},
/***/131187:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DeleteSchedule}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/controls/controlgroups/components/DeleteSchedule.vue?vue&type=template&id=4152d249&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"agents-dialog fc-dialog-center-container mT10rem",staticStyle:{"z-index":"9999999999"},attrs:{title:_vm.$t("common.header.delete_schedule"),visible:!0,width:_vm.isSlotDeletion?"540px":"618px","append-to-body":!0,"before-close":function(){return _vm.closeDialog()},"show-close":!1}},[_vm.isSlotDeletion?_c("div",{staticClass:"pR30 pL30 pB30"},[_c("div",{staticClass:"delete-slot-content"},[_vm._v(" "+_vm._s(_vm.$t("common.header.are_you_sure_you_want_to_delete_this_slot"))+" ")])]):_c("div",{staticClass:"d-flex flex-row pR30 pL30 pB30"},[_c("div",{staticClass:"pR20 mT3 "},[_vm._v(_vm._s(_vm.$t("common._common.delete")))]),_c("el-radio-group",{attrs:{disabled:_vm.$validation.isEmpty(_vm.slotData)},model:{value:_vm.isThisEvent,callback:function($$v){_vm.isThisEvent=$$v},expression:"isThisEvent"}},[_c("el-radio",{staticClass:"fc-radio-btn mR10",attrs:{label:!0}},[_vm._v(_vm._s(_vm.$t("common.events.this_event")))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("common.wo_report.recurring")))])],1)],1),_c("div",{staticClass:"schedule-btn-footer"},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:function(){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save delete-dialog mL0",attrs:{loading:_vm.deleting},on:{click:_vm.deleteRecord}},[_vm._v(" "+_vm._s(_vm.deleting?_vm.$t("common._common.deleting"):_vm.$t("common._common.delete"))+" ")])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=__webpack_require__(32284),validation=__webpack_require__(990260),DeleteSchedulevue_type_script_lang_js={props:["closeDialog","recordId","moduleName","slotData"],data:function(){return{isThisEvent:!0,deleting:!1}},created:function(){var slotData=this.slotData;(0,validation/* isEmpty */.xb)(slotData)&&(this.isThisEvent=!1)},computed:{getModuleDetails:function(){var slotData=this.slotData,isThisEvent=this.isThisEvent,recordId=this.recordId,moduleName=this.moduleName,_ref=slotData||{},edited=_ref.edited,id=_ref.id,exception=_ref.exception,_ref2=exception||{},startSchedule=_ref2.startSchedule,moduleDetails={};return moduleDetails=edited?{moduleName:"controlScheduleSlots",id:id}:(0,validation/* isEmpty */.xb)(startSchedule)||!isThisEvent?{moduleName:moduleName,id:recordId}:{moduleName:"controlScheduleSlots",id:id},moduleDetails},isSlotDeletion:function(){var slotData=this.slotData;if((0,validation/* isEmpty */.xb)(slotData))return!0;var _ref3=slotData||{},edited=_ref3.edited,exception=_ref3.exception,_ref4=exception||{},startSchedule=_ref4.startSchedule;return edited||(0,validation/* isEmpty */.xb)(startSchedule)}},methods:{deleteRecord:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$getModuleDetail,moduleName,id,_yield$API$deleteReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.deleting=!0,_this$getModuleDetail=_this.getModuleDetails,moduleName=_this$getModuleDetail.moduleName,id=_this$getModuleDetail.id,_context.next=4,api/* API */.bl.deleteRecord(moduleName,id);case 4:_yield$API$deleteReco=_context.sent,error=_yield$API$deleteReco.error,error?(_this.$message.error(error.message||"Error Occured"),_this.closeDialog()):(_this.$message.success(_this.$t("common.products.exception_deleted_successfully")),_this.closeDialog(!0)),_this.deleting=!1;case 8:case"end":return _context.stop()}}),_callee)})))()}}},components_DeleteSchedulevue_type_script_lang_js=DeleteSchedulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_DeleteSchedulevue_type_script_lang_js,render,staticRenderFns,!1,null,"4152d249",null)
/* harmony default export */,DeleteSchedule=component.exports},
/***/803582:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScheduleVisualizer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/controls/controlschedule/components/ScheduleVisualizer.vue?vue&type=template&id=dbecb28c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"schedule-visualizer-container"},_vm._l(_vm.getTimeInterval,(function(hours,indexHours){return _c("div",{key:indexHours,class:["flex flex-row",0===indexHours&&"position-sticky bg-white zindex999"]},_vm._l(_vm.xAxis,(function(days,indexDays){return _c("div",{key:indexDays,class:[_vm.getCellClass(indexDays,indexHours)],style:_vm.cellDimension},[0===indexHours||0===indexDays?_c("div",[_vm._v(" "+_vm._s(_vm.getLabel(indexDays,indexHours))+" ")]):[_vm._l(_vm.getFifteenMinSplit(hours),(function(fifteenMinTime,index){return[_vm.getException(fifteenMinTime,days)?_c("el-popover",{key:index,staticClass:"fifteenMinCell",attrs:{placement:"right",title:_vm.getSchedule(fifteenMinTime,days).date,width:"200",trigger:"hover","open-delay":500,"close-delay":500}},[_c("div",{staticClass:"f13"},[_c("div",[_vm._v(" "+_vm._s(_vm.getException(fifteenMinTime,days).offSchedule?"Reduced Hours":"Extended Hours")+", ")]),_c("div",{staticClass:"font-bold"},[_vm._v(" "+_vm._s(_vm.getSchedule(fifteenMinTime,days).startTime)+" - "+_vm._s(_vm.getSchedule(fifteenMinTime,days).endTime)+" ")]),_c("div",{staticClass:"d-flex flex-column pT8"},[_c("div",{staticClass:"fc-link fc-link-animation f14 pointer mT3",on:{click:function($event){return _vm.editException(fifteenMinTime,days)}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.edit"))+" ")]),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"fc-link fc-link-animation f14 pointer mT3",on:{click:function($event){_vm.deleteException(_vm.getException(fifteenMinTime,days).id,fifteenMinTime,days)}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])])]),_c("template",{slot:"reference"},[_c("div",{class:["fifteenMinCell pointer",_vm.getScheduleClass(fifteenMinTime,days)]})])],2):_c("div",{key:index,class:["fifteenMinCell",_vm.getScheduleClass(fifteenMinTime,days)]})]}))]],2)})),0)})),0)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),helpers=(__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(425728),__webpack_require__(778390)),validation=__webpack_require__(990260),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),ControlScheduleUtil=__webpack_require__(294323),moment=helpers/* default */.ZP.getOrgMoment,DAYS_IN_WEEK_FORMATTED=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DAYS={SUNDAY:{value:7},MONDAY:{value:1},TUESDAY:{value:2},WEDNESDAY:{value:3},THURSDAY:{value:4},FRIDAY:{value:5},SATURDAY:{value:6}},SCHEDULE_TYPE_ENUM={SCHEDULE:"actualSchedule",EXTENDED_HOURS:"extendedHours",REDUCED_HOURS:"reducedHours"},ScheduleVisualizervue_type_script_lang_js={props:["scheduleDays","isSameTimingForAll","schedule","cellHeight"],data:function(){return{startHour:0,endHour:23,scheduleLookup:{SUNDAY:{value:7},MONDAY:{value:1},TUESDAY:{value:2},WEDNESDAY:{value:3},THURSDAY:{value:4},FRIDAY:{value:5},SATURDAY:{value:6}}}},computed:{getTimeInterval:function(){var startTime=moment(this.startHour,"HH:mm"),endTime=moment(this.endHour,"HH:mm");endTime.isBefore(startTime)&&endTime.add(1,"day");var timeStops=[];timeStops.push(null);while(startTime<=endTime)timeStops.push(new moment(startTime).format("hh:mm A")),startTime.add(1,"hours");return timeStops},cellDimension:function(){return"height: ".concat(this.cellHeight||"40px")},xAxis:function(){return[""].concat((0,toConsumableArray/* default */.Z)(Object.keys(this.scheduleLookup)))}},watch:{schedule:{handler:function(newVal){(0,validation/* isEmpty */.xb)(newVal)?this.scheduleLookup=cloneDeep_default()(DAYS):this.serializeSchedule()},deep:!0,immediate:!0}},methods:{getFifteenMinSplit:function(hours){return(0,ControlScheduleUtil/* getFifteenMinSplit */.FV)(hours)},serializeSchedule:function(){var _this=this,schedule=this.schedule;this.scheduleLookup=cloneDeep_default()(DAYS),schedule.forEach((function(currSchedule){var dayOfWeekEnum=currSchedule.dayOfWeekEnum,startTime=currSchedule.startTime,endTime=currSchedule.endTime,exception=currSchedule.exception,offSchedule=currSchedule.offSchedule,startTimeMilli=currSchedule.startTimeMilli,currDay=Object.keys(_this.scheduleLookup).find((function(week){return week===dayOfWeekEnum}));(0,ControlScheduleUtil/* get15SplitFor24Hour */.Tc)((0,ControlScheduleUtil/* getHour */.ex)(startTime,"HH:mm"),(0,ControlScheduleUtil/* getHour */.ex)(endTime,"HH:mm"),!0).forEach((function(hour){_this.scheduleLookup[currDay][hour]=(0,objectSpread2/* default */.Z)({offSchedule:!(0,validation/* isEmpty */.xb)(exception)&&offSchedule,dayOfWeekEnum:dayOfWeekEnum,scheduleType:_this.getScheduleType(exception,offSchedule),isException:!(0,validation/* isEmpty */.xb)(exception),exception:exception,date:_this.getDate(startTimeMilli),startTime:(0,ControlScheduleUtil/* getHour */.ex)(startTime,"hh:mm a"),endTime:(0,ControlScheduleUtil/* getHour */.ex)(endTime,"hh:mm a"),startTimeMilli:startTimeMilli},currSchedule)}))})),this.$forceUpdate()},getLabel:function(indexDays,indexHours){return 0===indexDays&&0===indexHours?"GMT".concat(moment().format("Z")):0===indexDays?"12:00 AM"===this.getTimeInterval[indexHours]?"":this.getTimeInterval[indexHours]:0===indexHours?DAYS_IN_WEEK_FORMATTED[indexDays-1]:""},getScheduleType:function(exception,offSchedule){return(0,validation/* isEmpty */.xb)(exception)?SCHEDULE_TYPE_ENUM["SCHEDULE"]:offSchedule?SCHEDULE_TYPE_ENUM["REDUCED_HOURS"]:SCHEDULE_TYPE_ENUM["EXTENDED_HOURS"]},getScheduleClass:function(time,days){if((0,validation/* isEmpty */.xb)(this.scheduleLookup)||(0,validation/* isEmpty */.xb)(this.scheduleLookup[days][time]))return"noSchedule";var scheduleType=this.scheduleLookup[days][time].scheduleType;return"".concat(scheduleType," ").concat(time)},getException:function(time,days){var scheduleObj=this.getSchedule(time,days);if(!(0,validation/* isEmpty */.xb)(scheduleObj)){var exception=scheduleObj.exception;return exception}},getSchedule:function(time,days){if(!(0,validation/* isEmpty */.xb)(this.scheduleLookup)&&!(0,validation/* isEmpty */.xb)(this.scheduleLookup[days][time]))return this.scheduleLookup[days][time]},getCellClass:function(day,hour){return 0===day&&0==hour?"schedule-container hour-header-cell":0===day?"hour-axis-cell":"schedule-container cell"},getDate:function(time){return moment(time).format("ddd - DD MMM")},deleteException:function(id,hour,day){this.$emit("deleteException",{id:id,slot:this.scheduleLookup[day][hour]})},editException:function(hour,day){this.$emit("editException",this.scheduleLookup[day][hour])}}},components_ScheduleVisualizervue_type_script_lang_js=ScheduleVisualizervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ScheduleVisualizervue_type_script_lang_js,render,staticRenderFns,!1,null,"dbecb28c",null)
/* harmony default export */,ScheduleVisualizer=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/74831.js.map