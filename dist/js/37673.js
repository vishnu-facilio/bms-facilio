(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[37673],{
/***/856778:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FColorPalettes}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FColorPalettes.vue?vue&type=template&id=253b7996
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm._m(0),_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"colorPalette-main",on:{click:_vm.openDialog}},_vm._l(_vm.Colors[_vm.chosenColors],(function(color,idx){return _c("div",{key:idx,staticClass:"colorBlock",style:{background:color}})})),0),_c("div",{staticClass:"flex-middle mL30 pB10 pointer",on:{click:_vm.openDialog}},[_c("div",{staticClass:"fc-link2 f11"},[_vm._v("Change")]),_c("InlineSvg",{staticClass:"vertical-middle pointer color-pallete",staticStyle:{top:"2px"},attrs:{src:"svgs/painter-palette",iconClass:"icon icon-xs mL5"}})],1)]),_c("el-dialog",{staticClass:"fc-dialog-center-container color-pallete-lock",attrs:{title:"Colour palettes",width:"35%",visible:_vm.showColorPalette,"append-to-body":!0,"lock-scroll":!0},on:{"update:visible":function($event){_vm.showColorPalette=$event}}},[_c("div",{staticStyle:{height:"580px"}},[_c("el-row",{attrs:{gutter:20}},_vm._l(_vm.Colors,(function(colors,index){return _c("el-col",{key:index,staticClass:"dialogcolorpalette mB10",attrs:{span:12}},[_vm.loading?_c("div",{staticClass:"color-palette-loading-con mB10"},[_c("div",{staticClass:"fc-animated-background width100px height20"}),_c("div",{staticClass:"width100 height20 mT10 fc-animated-background"})]):_c("div",[_c("div",{staticClass:"fc-input-label-txt f13 flex-middle position-relative"},[_vm._v(" "+_vm._s(_vm.formaterIndex(index))+" "),_vm.chosenColors===index?_c("div",{staticClass:"selected-icon-color position-absolute"},[_c("InlineSvg",{staticClass:"vertical-middle",attrs:{src:"svgs/check-icon",iconClass:"icon icon-xs mL10"}})],1):_vm._e()]),_c("div",{staticClass:"colorPalette position-relative",on:{click:function($event){return _vm.changeColor(index)}}},_vm._l(colors,(function(color,idx){return _c("div",{key:idx,staticClass:"colorBlock",style:{background:color}})})),0)])])})),1)],1)])],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flex-middle"},[_c("p",{staticClass:"label-txt-black pT20 line-height20 mB10"},[_vm._v("Color Palette")])])}],InlineSvg=__webpack_require__(586166),FColorPalettesvue_type_script_lang_js={props:["colorIndex"],data:function(){return{Colors:{1:["#1d7f01","#6cb302","#e9f501","#fda504","#fb5905"],2:["#93d5ed","#45a5f5","#4285f4","#2f5ec4","#073a93"],3:["#04b9bd","#007e80","#004852","#f63700","#fb6900"],4:["#ffaf00","#ff7300","#ff0057","#500083","#0b0411"],5:["#b0f400","#74c700","#00696d","#002e5b","#2e004d"],6:["#00fff1","#00c0d0","#4c60a6","#4d177c","#4a0052"],7:["#00effc","#00b9e7","#357ac9","#793fad","#980084"],8:["#c5ff00","#fef800","#00daff","#0050ff","#1700ff"],9:["#39678a","#27916e","#becd70","#d7e1b2","#9db4a4"],10:["#eeebff","#c0b8dd","#9184ba","#635198","#341e75"],11:["#e1f6de","#a9d0b2","#71a986","#38835a","#005c2e"],12:["#ffed95","#f0b277","#e0775a","#d13b3c","#c1001e"],13:["#eaf9a8","#b1c5a0","#779299","#3d5e91","#042a89"],14:["#ffc300","#eead09","#de9812","#cd821b","#bc6c24"],15:["#c5dcfb","#6fe8f2","#ecf365","#f89c3e","#f82422"]},chosenColors:1,showColorPalette:!1,loading:!0,updateTimeout:null}},mounted:function(){this.Colors[this.colorIndex]&&(this.chosenColors=this.colorIndex)},watch:{colorIndex:{handler:function(){this.chosenColors!==this.colorIndex&&(this.chosenColors=this.colorIndex,this.$emit("colorSelected",this.chosenColors,this.Colors[this.chosenColors]))}}},components:{InlineSvg:InlineSvg/* default */.Z},methods:{openDialog:function(){var _this=this;this.showColorPalette=!0,this.loading=!0,this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){_this.loading=!1}),500)},changeColor:function(index){this.chosenColors=index,this.showColorPalette=!1,this.$emit("colorSelected",this.chosenColors,this.Colors[this.chosenColors])},formaterIndex:function(index){return"1"===index?"Default":"Palette "+index}}},components_FColorPalettesvue_type_script_lang_js=FColorPalettesvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FColorPalettesvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FColorPalettes=component.exports},
/***/248138:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScatterChartOptions}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/scatterAnalytics/ScatterChartOptions.vue?vue&type=template&id=eadb8a38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0",attrs:{title:"CHART OPTIONS",visible:_vm.visibility,width:"40%","append-to-body":!0,"show-close":!1,"before-close":_vm.close,"close-on-click-modal":!1},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"height380 overflow-y-scroll pB80"},[_c("div",{staticClass:"customize-input-block pR20 pL20 pT20"},[_c("el-row",[_c("el-col",{attrs:{span:16}},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v("Shape")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select"},on:{change:function($event){return _vm.OnShapeChange()}},model:{value:_vm.report.options.scatter.shape,callback:function($$v){_vm.$set(_vm.report.options.scatter,"shape",$$v)},expression:"report.options.scatter.shape"}},[_c("el-option",{attrs:{label:"Circle",value:"circle"}}),_c("el-option",{attrs:{label:"Rectangle",value:"rectangle"}}),_c("el-option",{attrs:{label:"Triangle",value:"triangle"}}),_c("el-option",{attrs:{label:"Diamond",value:"diamond"}}),_c("el-option",{attrs:{label:"Varies based on asset",value:"predefined"}})],1)],1)],1)],1),_c("el-row",{staticClass:"pR20 pL20 pT20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"customize-input-block"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" Color ")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select"},model:{value:_vm.report.options.scatter.color.mode,callback:function($$v){_vm.$set(_vm.report.options.scatter.color,"mode",$$v)},expression:"report.options.scatter.color.mode"}},[_c("el-option",{attrs:{label:"None",value:null}}),_c("el-option",{attrs:{label:"Monochrome",value:"monochrome"}}),_vm.metricPoints.length<2?_c("el-option",{attrs:{label:"Color palette",value:"palette"}}):_vm._e()],1)],1)],1)],1)]),_vm.report.options.scatter.color.mode?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"customize-input-block"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" Color based on ")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select",filterable:"",loading:_vm.loading,remote:"","remote-method":_vm.remoteMethod},on:{change:function($event){return _vm.constructDataPoint("color")}},model:{value:_vm.colorBasedOn,callback:function($$v){_vm.colorBasedOn=$$v},expression:"colorBasedOn"}},_vm._l(_vm.readings,(function(reading,idx){return _c("el-option",{key:idx,attrs:{label:reading.displayName,value:reading.fieldId}})})),1)],1)],1)],1)]):_vm._e()],1),_c("el-row",{staticClass:"pR20 pL20 pT20"},["palette"===_vm.report.options.scatter.color.mode?_c("el-col",{attrs:{span:24}},[_c("f-color-palettes",{attrs:{colorIndex:_vm.report.options.scatter.color.pallete},on:{colorSelected:_vm.onColorChange}})],1):_vm._e()],1),_vm.sizeEnabled?_c("el-row",{staticClass:"pR20 pL20 pT20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"customize-input-block"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" Size ")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select"},model:{value:_vm.report.options.scatter.size.mode,callback:function($$v){_vm.$set(_vm.report.options.scatter.size,"mode",$$v)},expression:"report.options.scatter.size.mode"}},[_c("el-option",{attrs:{label:"None",value:null}}),_c("el-option",{attrs:{label:"Varies based on Readings",value:"reading"}})],1)],1)],1)],1)]),_vm.report.options.scatter.size.mode?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"customize-input-block"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" Size based on ")]),_c("el-row",[_c("el-col",{attrs:{span:20}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select",filterable:"",loading:_vm.loading,remote:"","remote-method":_vm.remoteMethod},on:{change:function($event){return _vm.constructDataPoint("size")}},model:{value:_vm.sizeBasedOn,callback:function($$v){_vm.sizeBasedOn=$$v},expression:"sizeBasedOn"}},_vm._l(_vm.readings,(function(reading,idx){return _c("el-option",{key:idx,attrs:{label:reading.displayName,value:reading.fieldId}})})),1)],1)],1)],1)]):_vm._e()],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.save}},[_vm._v("DONE")])],1)])},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),toConsumableArray=__webpack_require__(488478),FColorPalettes=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(186466),__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(689730),__webpack_require__(425728),__webpack_require__(339772),__webpack_require__(634338),__webpack_require__(856778)),AnalyticsMixin=__webpack_require__(244936),api=__webpack_require__(32284),validation=__webpack_require__(990260),ScatterChartOptionsvue_type_script_lang_js={components:{FColorPalettes:FColorPalettes/* default */.Z},props:["visibility","report","config"],mixins:[AnalyticsMixin/* default */.Z],data:function(){return{activeScatterChartItem:null,colorBasedOn:null,sizeBasedOn:null,readings:[],loading:!1,sizeEnabled:!0}},computed:{dataPointObject:function(){return this.report?this.$helpers.getDataPoints(this.report.options.dataPoints,[1,2,4],!0):[]},allPoints:function(){var points=[];return this.dataPointObject&&this.dataPointObject.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)})),points.filter((function(dp){return"x"!==dp.axes&&!dp.isBaseLine&&dp.pointCustomization}))},metricPoints:function(){var points=[];return this.dataPointObject&&this.dataPointObject.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)})),points.filter((function(dp){return"x"!==dp.axes&&!dp.isBaseLine&&dp.pointCustomization&&dp.visible}))},xDataPoints:function(){var points=[];return this.dataPointObject&&this.dataPointObject.forEach((function(dp){"group"===dp.type?points.push.apply(points,(0,toConsumableArray/* default */.Z)(dp.children)):points.push(dp)})),points.filter((function(dp){return"x"===dp.axes}))}},mounted:function(){var _this=this;this.report&&(this.report.options.scatter.color.reading&&(this.colorBasedOn=this.report.options.scatter.color.reading),this.report.options.scatter.size.reading&&(this.sizeBasedOn=this.report.options.scatter.size.reading)),this.loading=!0;var url="asset/getAssetsWithReadings",params={fetchOnlyReadings:!0,page:1,perPage:50};this.config&&this.config.selectedAssetCategory&&(params.categoryIds=[this.config.selectedAssetCategory]),api/* API */.bl.post(url,params).then((function(_ref){var data=_ref.data,error=_ref.error;error||(_this.readings=Object.values(data.fields||{}),_this.loading=!1)}))},methods:{save:function(){this.close()},close:function(){this.$emit("update:visibility",!1)},prefix:function(point){if(point.duplicateDataPoint&&(0!==this.report.params.xAggr||this.report&&![1,4,"reading"].includes(this.report.options.common.mode)))switch(point.aggr){case 2:return"Avg of ";case 3:return"Sum of ";case 4:return"Min of ";case 5:return"Max of ";default:return""}return""},onColorChange:function(idx,colorArr){this.report&&this.report.options.scatter.color&&(this.report.options.scatter.color.pallete=idx,this.report.options.scatter.color.colors=colorArr)},OnShapeChange:function(){if(this.report&&this.report.options.scatter.shape){var val=this.report.options.scatter.shape;if("circle"!==val&&(this.sizeEnabled=!1,this.report.options.scatter.size.mode=null),"predefined"!==val)this.allPoints.forEach((function(dp){return dp.pointCustomization.shape=val}));else{var shapeArr=["circle","rectangle","triangle","diamond"];this.allPoints.forEach((function(dp,idx){return dp.pointCustomization.shape=shapeArr[idx%4]}))}}},remoteMethod:function(query){var _this2=this;if(""!=query){this.loading=!0;var url="asset/getAssetsWithReadings",params={fetchOnlyReadings:!0,page:1,perPage:50};this.config&&this.config.selectedAssetCategory&&(params.categoryIds=[this.config.selectedAssetCategory]),(0,validation/* isEmpty */.xb)(query)||(params.search=query),api/* API */.bl.post(url,params).then((function(_ref2){var data=_ref2.data,error=_ref2.error;error||(_this2.readings=Object.values(data.fields||{}),_this2.loading=!1)}))}},constructDataPoint:function(mode){var _step,_this3=this,colorBasedOn=this.colorBasedOn,sizeBasedOn=this.sizeBasedOn,allPoints=this.allPoints,xDataPoints=this.xDataPoints,changePoint=!1,changedDataPoints=this.config.dataPoints.slice().filter((function(dp){return 6!==dp.type})),_iterator=(0,createForOfIteratorHelper/* default */.Z)(allPoints);try{var _loop=function(){var dp=_step.value;if("color"===mode)if(_this3.report.options.scatter.color.reading=colorBasedOn,parseInt(dp.fieldId)===parseInt(colorBasedOn))dp.pointCustomization.color.basedOn="".concat(dp.key);else{var match=allPoints.find((function(dataPoint){return parseInt(dp.parentId)===parseInt(dataPoint.parentId)&&parseInt(dp.fieldId)===parseInt(colorBasedOn)}));if(match)dp.pointCustomization.color.basedOn="".concat(match.key);else{var _match=xDataPoints.find((function(dataPoint){return parseInt(dp.parentId)===parseInt(dataPoint.parentId)&&parseInt(dataPoint.fieldId)===parseInt(colorBasedOn)}));if(_match)dp.pointCustomization.color.basedOn="".concat(_match.key);else{var aliases={actual:"".concat(dp.key,"_colorscatter")},point={parentId:dp.parentId,prediction:!1,aliases:aliases,yAxis:{fieldId:colorBasedOn,aggr:3},type:6};dp.pointCustomization.color.basedOn="".concat(dp.key,"_colorscatter"),changedDataPoints=changedDataPoints.filter((function(point){return point.aliases.actual!=="".concat(dp.key,"_colorscatter")})),changedDataPoints.push(point),changePoint=!0}}}else if("size"===mode)if(_this3.report.options.scatter.size.reading=sizeBasedOn,parseInt(dp.fieldId)===parseInt(sizeBasedOn))dp.pointCustomization.size.basedOn="".concat(dp.key);else{var _match2=allPoints.find((function(dataPoint){return parseInt(dp.parentId)===parseInt(dataPoint.parentId)&&parseInt(dp.fieldId)===parseInt(sizeBasedOn)}));if(_match2)dp.pointCustomization.size.basedOn="".concat(_match2.key);else{var _match3=xDataPoints.find((function(dataPoint){return parseInt(dp.parentId)===parseInt(dataPoint.parentId)&&parseInt(dataPoint.fieldId)===parseInt(sizeBasedOn)}));if(_match3)dp.pointCustomization.size.basedOn="".concat(_match3.key);else{var _aliases={actual:"".concat(dp.key,"_sizescatter")},_point={parentId:dp.parentId,prediction:!1,aliases:_aliases,yAxis:{fieldId:sizeBasedOn,aggr:3},type:6};dp.pointCustomization.size.basedOn="".concat(dp.key,"_sizescatter"),changedDataPoints=changedDataPoints.filter((function(point){return point.aliases.actual!=="".concat(dp.key,"_sizescatter")})),changedDataPoints.push(_point),changePoint=!0}}}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}changePoint&&this.updateDataPoints(changedDataPoints)},updateDataPoints:function(changedDataPoints){var _this4=this;if(this.config.dataPoints.length){var configIndexes=[],alreadyAddedIndexes=[],pointsToRemove=[];this.enableReadingSelection=changedDataPoints.length>1;var isValid=this.allPoints.filter((function(dp){return 2!==dp.pointType&&!dp.duplicateDataPoint})).every((function(dp){var idx=changedDataPoints.findIndex((function(cdp){return parseInt(cdp.parentId)===parseInt(dp.parentId)&&parseInt(cdp.yAxis.fieldId)===parseInt(dp.fieldId)}));if(-1===idx&&pointsToRemove.push(dp.alias),-1!==idx){var configIdx=_this4.getConfigDataPointFromOptionDP(_this4.config,dp,!0);configIndexes.push(configIdx),alreadyAddedIndexes.push(idx)}return!0}));isValid&&(pointsToRemove.length&&this.removeOptionPoints(this.report.options,pointsToRemove),this.config.dataPoints=[].concat((0,toConsumableArray/* default */.Z)(this.config.dataPoints.filter((function(dp,idx){return 2===dp.type||dp.duplicateDataPoint||configIndexes.includes(idx)}))),(0,toConsumableArray/* default */.Z)(changedDataPoints.filter((function(cdp,idx){return!alreadyAddedIndexes.includes(idx)})))))}else this.config.dataPoints=changedDataPoints}}},scatterAnalytics_ScatterChartOptionsvue_type_script_lang_js=ScatterChartOptionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(scatterAnalytics_ScatterChartOptionsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScatterChartOptions=component.exports},
/***/599801:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return scatterAnalytics}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/scatterAnalytics/scatterAnalytics.vue?vue&type=template&id=56ef5638
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"overflow-scroll-flex min-width0 min-height0"},[_c("el-row",[_c("el-col",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideSideBar&&!_vm.showChartCustomization,expression:"!hideSideBar && !showChartCustomization"}],attrs:{span:_vm.hideSideBar||_vm.showChartCustomization?0:6}},[_c("ScatterLeftSide",{ref:"leftpanel",attrs:{config:_vm.analyticsConfig},on:{updatecategoryDataPoints:_vm.updatecategoryDataPoints,flushChartState:_vm.flushChartState,"update:config":function($event){_vm.analyticsConfig=$event},updateMultiModeDataPoints:_vm.updateMultiModeDataPoints},scopedSlots:_vm._u([{key:"sideBarHide",fn:function(){return[_c("div",{staticClass:"fc-scatter-left-show-hide",on:{click:function($event){return _vm.toggleSideBar()}}},[_c("i",{staticClass:"el-icon-back"})])]},proxy:!0}])})],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.hideSideBar&&!_vm.showChartCustomization,expression:"hideSideBar && !showChartCustomization"}],staticClass:"fc-scatter-left-toggle",on:{click:function($event){return _vm.toggleSideBar()}}},[_c("i",{staticClass:"el-icon-back"})]),_c("el-col",{attrs:{span:_vm.hideSideBar&&!_vm.showChartCustomization?24:18}},[_vm.analyticsConfig.dataPoints.length?_c("ScatterMain",{ref:"newAnalyticReport",attrs:{config:_vm.analyticsConfig,noChartState:_vm.noChartState,scatterType:_vm.scatterType},on:{"update:config":function($event){_vm.analyticsConfig=$event},"update:scatterType":function($event){_vm.scatterType=$event},"update:scatter-type":function($event){_vm.scatterType=$event},reportLoaded:_vm.reportLoaded},scopedSlots:_vm._u([{key:"chartCustomization",fn:function(){return[_c("div",{on:{click:_vm.toggleCustomization}},[_c("InlineSvg",{staticClass:"vertical-middle fc-icon-border mL10 mR10 pointer",class:{"customization-btn-active":_vm.showChartCustomization},attrs:{src:"svgs/chart-customisation",iconClass:"icon icon-md"}})],1)]},proxy:!0},{key:"Algorithm",fn:function(){return[_c("el-dropdown",{on:{command:_vm.switchAlgorithm}},[_c("el-button",{staticClass:"fc-btn-grey-border mR10 f12 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.products.algorithm"))+" "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"1"}},[_c("InlineSvg",{staticClass:"mR10 pointer",attrs:{src:"svgs/chart/linear",iconClass:"icon icon-md vertical-sub "}}),_vm._v(" "+_vm._s(_vm.$t("common.header.linear")))],1),_c("el-dropdown-item",{attrs:{command:"2"}},[_c("InlineSvg",{staticClass:"mR10 pointer",attrs:{src:"svgs/chart/polynomial",iconClass:"icon icon-md vertical-sub "}}),_vm._v(" "+_vm._s(_vm.$t("common.header.polynomial")))],1)],1)],1)]},proxy:!0}])}):_c("div",{staticClass:"text-center"},[(_vm.reportId||_vm.alarmId||_vm.cardId)&&_vm.spinnerToggle?_c("div",{staticClass:"p15"},[_c("spinner",{attrs:{show:_vm.spinnerToggle}})],1):_c("div",{staticClass:"p15 flex-middle height80vh justify-content-center flex-direction-column"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg"}})],1),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.please_select_data_points_analyze"))+" ")])])])],1),_c("el-col",{directives:[{name:"show",rawName:"v-show",value:_vm.showChartCustomization,expression:"showChartCustomization"}],attrs:{span:_vm.showChartCustomization?6:0}},[_vm.reportObject?_c("ScatterRightSide",{attrs:{scatterType:_vm.scatterType,report:_vm.reportObject}}):_vm._e()],1)],1)],1),_vm.showTrendLine?_c("trend-line",{attrs:{visibility:_vm.showTrendLine,report:_vm.reportObject,algorithmType:_vm.algorithmType},on:{"update:visibility":function($event){_vm.showTrendLine=$event},onTrendLineChange:_vm.onTrendLineChange}}):_vm._e(),_c("f-report-options",{staticClass:"analytics-page-options-building-analysis save-button",attrs:{isActionsDisabled:_vm.isActionsDisabled,optionClass:"analytics-page-options",optionsToEnable:[5,1,2],reportObject:_vm.reportObject,resultObject:_vm.resultObject,params:_vm.reportObject?_vm.reportObject.params:null,savedReport:_vm.analyticsConfig.savedReport,pdf:!1},on:{"update:savedReport":function($event){return _vm.$set(_vm.analyticsConfig,"savedReport",$event)},"update:saved-report":function($event){return _vm.$set(_vm.analyticsConfig,"savedReport",$event)}}})],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),toConsumableArray=__webpack_require__(488478),AnalyticsMixin=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(339772),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(244936)),ScatterLeftSidevue_type_template_id_1b89767e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"overflow-scroll-flex min-width0 min-height0 fc-scatter-left"},[_c("div",{staticClass:"width100 fc-analytics-left-sidebar fc-overflow-y pB200"},[_vm._t("sideBarHide"),_c("div",{staticClass:"mT10"},[_c("div",{staticClass:"fc-text-pink fw6"},[_vm._v(" "+_vm._s(_vm.$t("home.dashboard.generate_chart"))+" ")]),_c("div",{directives:[{name:"show",rawName:"v-show",value:1===_vm.scatterType,expression:"scatterType === 1"}]},[_c("div",{staticClass:"pT10"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.Category"))+" ")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select",loading:_vm.categoriesLoading},on:{change:function($event){return _vm.OnCategoryChange()}},model:{value:_vm.selectedAssetCategory,callback:function($$v){_vm.selectedAssetCategory=$$v},expression:"selectedAssetCategory"}},_vm._l(_vm.assetCategoryList,(function(category,idx){return _c("el-option",{key:idx,attrs:{label:category.displayName,value:category.id}})})),1)],1)]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.xaxis"))+" ")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select",loading:_vm.readingsLoading},on:{change:function($event){return _vm.populateDataPoints()}},model:{value:_vm.selectedxField,callback:function($$v){_vm.selectedxField=$$v},expression:"selectedxField"}},_vm._l(_vm.readings,(function(reading,idx){return _c("el-option",{key:idx,attrs:{label:reading.displayName,value:reading.fieldId}})})),1)],1)]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.yaxis"))+" ")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select",loading:_vm.readingsLoading},on:{change:function($event){return _vm.populateDataPoints()}},model:{value:_vm.selectedyField,callback:function($$v){_vm.selectedyField=$$v},expression:"selectedyField"}},_vm._l(_vm.readings,(function(reading,idx){return _c("el-option",{key:idx,attrs:{label:reading.displayName,value:reading.fieldId}})})),1)],1)]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.assets"))+" ")])]),_c("div",[_c("el-select",{staticClass:"fc-select-multiple-tag width100 fc-tag",attrs:{disabled:!(_vm.selectedxField&&_vm.selectedyField),placeholder:"Select Assets",multiple:"",filterable:"",loading:_vm.assetsLoading,remote:"","remote-method":_vm.remoteMethod},on:{change:function($event){return _vm.populateDataPoints()}},model:{value:_vm.selectedAsset,callback:function($$v){_vm.selectedAsset=$$v},expression:"selectedAsset"}},_vm._l(_vm.allAssets,(function(asset,idx){return _c("el-option",{key:idx,attrs:{label:asset.name,value:asset.id}})})),1)],1)])]),_c("div",{directives:[{name:"show",rawName:"v-show",value:2===_vm.scatterType,expression:"scatterType === 2"}]}),_c("div",{directives:[{name:"show",rawName:"v-show",value:3===_vm.scatterType,expression:"scatterType === 3"}]},[3===_vm.scatterType?_c("f-scatter-point-selector",{attrs:{visibility:!0,enableFloatimngIcon:!0,analyticsConfig:_vm.config},on:{updateDataPoints:_vm.updateMultiModeDataPoints,"update:analyticsConfig":function($event){_vm.config=$event},"update:analytics-config":function($event){_vm.config=$event}}}):_vm._e()],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:1===_vm.scatterType,expression:"scatterType === 1"}],staticClass:"mT20"},[_c("f-scatter-graph-points",{on:{baseLineDataChanged:_vm.baseLineDataChanged}})],1)])],2)])])},ScatterLeftSidevue_type_template_id_1b89767e_staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(450886),__webpack_require__(564043),__webpack_require__(425728),__webpack_require__(420629)),api=__webpack_require__(32284),validation=__webpack_require__(990260),FScatterPointSelector=__webpack_require__(608998),FScatterGraphPointsvue_type_template_id_2719c159_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.custom_baseline"))+" ")])]),_c("el-select",{staticClass:"fc-select-multiple-tag width100 fc-tag",attrs:{multiple:"",placeholder:"Select"},on:{change:_vm.buildLineGraphPoints},model:{value:_vm.selectedGraphPointIds,callback:function($$v){_vm.selectedGraphPointIds=$$v},expression:"selectedGraphPointIds"}},_vm._l(_vm.options,(function(val){return _c("el-option",{key:val.id,attrs:{label:val.label,value:val.id}})})),1),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("el-button",{staticClass:"mT5",attrs:{type:"text"},on:{click:function($event){_vm.addPointsDialog=!0}}},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.add_point"))+" ")]),_c("el-button",{staticClass:"mT5",attrs:{type:"text"},on:{click:function($event){_vm.modifyPointsDialog=!0}}},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.modify_point"))+" ")])],1),_c("el-dialog",{staticClass:"add-data-dialog",staticStyle:{"z-index":"9999999999"},attrs:{title:_vm.$t("analytics.custom_baseline.add_baline_point"),visible:_vm.addPointsDialog,"append-to-body":!0,width:"50%","show-close":!1},on:{"update:visible":function($event){_vm.addPointsDialog=$event}}},[_c("div",{staticClass:"body p20"},[_c("el-input",{staticClass:"fc-input-full-border2 mT20 mB20",attrs:{placeholder:"Name"},model:{value:_vm.name,callback:function($$v){_vm.name=$$v},expression:"name"}}),_c("div",{staticClass:"flex-middle justify-content-space"}),_c("table",{attrs:{id:"table-data"}},[_c("tr",[_c("th",[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.x_value"))+" ")]),_c("th",[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.y_value"))+" ")])]),_vm._l(_vm.tableData,(function(val){return _c("tr",{key:val.id},[_c("td",[_c("input",{attrs:{type:"text"},domProps:{value:val.x},on:{change:function(e){return _vm.updateTableValues(e.target.value,val.id,"x")},focus:function(e){return _vm.updateTableValues(e.target.value,val.id,"x")}}})]),_c("td",[_c("input",{attrs:{type:"text"},domProps:{value:val.y},on:{change:function(e){return _vm.updateTableValues(e.target.value,val.id,"y")},focus:function(e){return _vm.updateTableValues(e.target.value,val.id,"y")}}})])])}))],2)],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save mL0",attrs:{type:"primary"},on:{click:_vm.addPoints}},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.done"))+" ")])],1)]),_c("el-dialog",{staticClass:"add-data-dialog",staticStyle:{"z-index":"9999999999"},attrs:{title:_vm.$t("analytics.custom_baseline.modify_baline_point"),visible:_vm.modifyPointsDialog,"append-to-body":!0,width:"50%","show-close":!1},on:{"update:visible":function($event){_vm.modifyPointsDialog=$event}}},[_c("div",[_c("div",{staticClass:"body p20"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{placeholder:"Select"},on:{change:_vm.populateGraphPoints},model:{value:_vm.modifyPointId,callback:function($$v){_vm.modifyPointId=$$v},expression:"modifyPointId"}},_vm._l(_vm.options,(function(val){return _c("el-option",{key:val.id,attrs:{label:val.label,value:val.id}})})),1),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("el-input",{staticClass:"fc-input-full-border2 mT20 mB20",attrs:{placeholder:"Name"},model:{value:_vm.name,callback:function($$v){_vm.name=$$v},expression:"name"}}),_c("el-button",{staticClass:"mL20",attrs:{type:"danger"},on:{click:_vm.deleteDataPoint}},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.delete"))+" ")])],1),_c("div",{staticClass:"flex-middle justify-content-space"}),_c("table",{attrs:{id:"table-data"}},[_c("tr",[_c("th",[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.x_value"))+" ")]),_c("th",[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.y_value"))+" ")])]),_vm._l(_vm.tableData,(function(val){return _c("tr",{key:val.id},[_c("td",[_c("input",{attrs:{type:"text"},domProps:{value:val.x},on:{change:function(e){return _vm.updateTableValues(e.target.value,val.id,"x")},focus:function(e){return _vm.updateTableValues(e.target.value,val.id,"x")}}})]),_c("td",[_c("input",{attrs:{type:"text"},domProps:{value:val.y},on:{change:function(e){return _vm.updateTableValues(e.target.value,val.id,"y")},focus:function(e){return _vm.updateTableValues(e.target.value,val.id,"y")}}})])])}))],2)],1),_c("div",{staticClass:"dialog-save-cancel"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save mL0",attrs:{type:"primary"},on:{click:_vm.updatePoints}},[_vm._v(" "+_vm._s(_vm.$t("analytics.custom_baseline.done"))+" ")])],1)])])],1)},FScatterGraphPointsvue_type_template_id_2719c159_staticRenderFns=[],uuid=(__webpack_require__(162506),__webpack_require__(455877)),color_helper=__webpack_require__(794211),FScatterGraphPointsvue_type_script_lang_js={name:"FScatterGraphPoints",props:["graphPoints"],methods:{addNewPoint:function(){this.tableData.push({x:this.xValue,y:this.yValue,id:(0,uuid.v4)()}),this.xValue=null,this.yValue=null},buildLineGraphPoints:function(){this.selectedGraphPoints={type:"line",catorgy:"baseline",data:this.selectedGraphPointIds,colors:color_helper/* default */.Z.newColorPicker(this.selectedGraphPointIds.length)},this.$emit("baseLineDataChanged",this.selectedGraphPoints)},populateGraphPoints:function(){var _this=this,self=this;api/* API */.bl.get("/v3/report/reading/scatter_line_graph",{scatterGraphId:parseInt(self.modifyPointId),scatterGraphAction:"GET_BY_ID"},{force:!0}).then((function(res){res.error?_this.$message.error("Error while fetching scatter line graph data"):null!=res.data&&(self.modifyPoint=JSON.stringify({id:parseInt(self.modifyPointId),value:res.data.result.graphValue,label:res.data.result.label}))})).then((function(){if(self.modifyPoint){var name=self.options.find((function(op){return op.id===JSON.parse(self.modifyPoint).id}));self.name=name.label,self.tableData=JSON.parse(JSON.parse(self.modifyPoint).value)}})).catch((function(){_this.$message.error("Error occured")}))},validateTableData:function(){var _this2=this,validation=!0,validationData=(0,toConsumableArray/* default */.Z)(this.tableData);validationData.splice(validationData.length-1,1),validationData.forEach((function(td){""!==td.x&&""!==td.y||(validation=!1)})),validationData.forEach((function(td,idx){""===td.x&&""===td.y&&(_this2.tableData.splice(idx,1),validationData.splice(idx,1))}));var lastDataPoinstValidation=""===this.tableData[this.tableData.length-1].x&&""===this.tableData[this.tableData.length-1].y||""!==this.tableData[this.tableData.length-1].x||""!==this.tableData[this.tableData.length-1].y;return!(!validation||!lastDataPoinstValidation||""===this.name&&null===this.name)||(this.$message.error("Name or data point is missing"),!1)},updatePoints:function(){var _this3=this,index=this.options.findIndex((function(op){return op.id===JSON.parse(_this3.modifyPoint).id}));if(-1!==index){this.modifyPointsDialog=!1;var scatter={scatterGraphAction:"MODIFY",scatterGraphId:JSON.parse(this.modifyPoint).id,scatterGraphLabel:this.name,scatterGraphValue:JSON.stringify(this.tableData)};api/* API */.bl.put("/v3/report/reading/scatter_line_graph",scatter).then((function(response){response.error?_this3.$$message.error("Error occured"):(_this3.$message.success("Baseline updated"),_this3.tableData=[],_this3.name="",_this3.tableData.push({x:"",y:"",id:(0,uuid.v4)()}),_this3.modifyPointId=null)})).catch((function(){_this3.$message.error("Error occured")}))}},closeDialogBox:function(){this.modifyPointsDialog=!1,this.addPointsDialog=!1,this.tableData=[],this.name="",this.modifyPointId=null,this.tableData.push({x:"",y:"",id:(0,uuid.v4)()})},addPoints:function(){var _this4=this;this.validateTableData()&&(this.addPointsDialog=!1,api/* API */.bl.post("/v3/report/reading/scatter_line_graph",{scatterGraphAction:"ADD",scatterGraphLabel:this.name,scatterGraphValue:JSON.stringify(this.tableData)}).then((function(json){if(_this4.$message.success("Baseline added"),null!=json.data){var scatter={id:json.data.id,label:_this4.name,value:json.data.id};_this4.options.push(scatter),_this4.tableData=[],_this4.name="",_this4.modifyPointId=null,_this4.tableData.push({x:"",y:"",id:(0,uuid.v4)()})}})).catch((function(){_this4.$message.error("Error occured")})))},deleteDataPoint:function(){var _this5=this;if(this.modifyPoint){var index=this.options.findIndex((function(op){return op.id===JSON.parse(_this5.modifyPoint).id})),selected_point_index=this.selectedGraphPointIds.findIndex((function(op){return op===JSON.parse(_this5.modifyPoint).id}));-1!==index&&api/* API */.bl.delete("/v3/report/reading/scatter_line_graph",{scatterGraphId:this.options[index].id,scatterGraphAction:"DELETE"}).then((function(){_this5.options.splice(index,1),-1!=selected_point_index&&_this5.selectedGraphPointIds.splice(selected_point_index,1),_this5.tableData=[],_this5.name="",_this5.tableData.push({x:"",y:"",id:(0,uuid.v4)()}),_this5.modifyPointId=null,_this5.$message.success("Baseline is deleted")})),this.modifyPointsDialog=!1}},updateTableValues:function(value,id,axis){var _this6=this,validationData=(0,toConsumableArray/* default */.Z)(this.tableData);validationData.splice(validationData.length-1,1),validationData.forEach((function(td,idx){""===td.x&&""===td.y&&(_this6.tableData.splice(idx,1),validationData.splice(idx,1))}));var index=this.tableData.findIndex((function(td){return td.id===id}));-1!==index&&("x"===axis?this.tableData[index].x=value:"y"===axis&&(this.tableData[index].y=value)),""!==this.tableData[this.tableData.length-1].x&&""!==this.tableData[this.tableData.length-1].y&&this.tableData.push({x:"",y:"",id:(0,uuid.v4)()})}},data:function(){return{options:[],selectedGraphPoints:[],selectedGraphPointIds:[],modifyPoint:null,modifyPointId:null,addPointsDialog:!1,modifyPointsDialog:!1,tableData:[],name:null,xValue:null,yValue:null}},created:function(){this.tableData.push({x:"",y:"",id:(0,uuid.v4)()})},mounted:function(){var _this7=this;api/* API */.bl.get("/v3/report/reading/scatter_line_graph").then((function(json){null!=json.data&&json.data.result.forEach((function(dt){_this7.options.push({id:dt.id,label:dt.label,value:dt.id})}))})),this.$route.query.reportId&&api/* API */.bl.get("/v3/report/reading/view?reportId=".concat(this.$route.query.reportId)).then((function(_ref){var data=_ref.data,error=_ref.error;error?_this7.$$message.error("Error occured"):data.baselineData&&data.baselineData.forEach((function(op){_this7.selectedGraphPointIds.push(op.id)}))}))}},components_FScatterGraphPointsvue_type_script_lang_js=FScatterGraphPointsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FScatterGraphPointsvue_type_script_lang_js,FScatterGraphPointsvue_type_template_id_2719c159_render,FScatterGraphPointsvue_type_template_id_2719c159_staticRenderFns,!1,null,null,null)
/* harmony default export */,FScatterGraphPoints=component.exports,ScatterLeftSidevue_type_script_lang_js={props:["config"],components:{FScatterPointSelector:FScatterPointSelector/* default */.Z,FScatterGraphPoints:FScatterGraphPoints},data:function(){return{mode:[{label:"Category",value:1},{label:"Single",value:2},{label:"Multiple",value:3}],scatterType:1,selectedAssetCategory:null,selectedxField:null,selectedyField:null,allAssets:[],selectedAsset:[],readings:null,dataPoints:[],assetCategoryList:[],categoriesLoading:!1,assetsLoading:!1,readingsLoading:!1,baselineData:null}},created:function(){var _this=this;this.$store.dispatch("loadAssetCategory").then((function(){return _this.loadAssetCategories()}))},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),methods:{loadFromReport:function(){this.config.scatter&&(this.selectedAssetCategory=this.config.scatter.selectedAssetCategory?this.config.scatter.selectedAssetCategory:null,this.selectedAsset=this.config.scatter.selectedAsset?this.config.scatter.selectedAsset:[],this.selectedxField=this.config.scatter.selectedxField?this.config.scatter.selectedxField:null,this.selectedyField=this.config.scatter.selectedyField?this.config.scatter.selectedyField:null,this.loadReadings())},baseLineDataChanged:function(data){this.baselineData=data,this.populateDataPoints()},loadAssetCategories:function(){var _this2=this;this.categoriesLoading=!0,api/* API */.bl.get("/asset/getAssetCategoryWithReadings").then((function(_ref){var error=_ref.error,data=_ref.data;if(error){var message=error.message;_this2.$message.error(message),_this2.categoriesLoading=!1}else{var categoryIds=data?Object.keys(data):[-1];_this2.assetCategoryList=_this2.assetCategory.filter((function(ele){for(var index=0;index<categoryIds.length;index++){var element=categoryIds[index];if(parseInt(element)===ele.id)return ele.toggle=!1,ele}})),_this2.categoriesLoading=!1}}))},loadReadings:function(){var _this3=this;this.readingsLoading=!0,this.config.selectedAssetCategory=this.selectedAssetCategory,this.$util.loadAssetReadingFields(null,this.selectedAssetCategory).then((function(response){_this3.readings=response,_this3.readingsLoading=!1})),this.loadAssets()},loadAssets:function(){var _this4=this;this.assetsLoading=!0;var url="asset/getAssetsWithReadings",params={fetchOnlyAssets:!0,page:1,perPage:50};this.selectedAssetCategory&&(params.categoryIds=[this.selectedAssetCategory]),api/* API */.bl.post(url,params).then((function(_ref2){var data=_ref2.data,error=_ref2.error;error?_this4.$message.error("Error in loading Assets"):(_this4.allAssets=Object.keys(data.assets||{}).map((function(assetId){return{name:data.assets[assetId],id:assetId}})),_this4.assetsLoading=!1)}))},remoteMethod:function(query){var _this5=this;if(""!=query){this.assetsLoading=!0;var url="asset/getAssetsWithReadings",params={fetchOnlyAssets:!0,page:1,perPage:50};(0,validation/* isEmpty */.xb)(query)||(params.search=query),this.selectedAssetCategory&&(params.categoryIds=[this.selectedAssetCategory]),api/* API */.bl.post(url,params).then((function(_ref3){var data=_ref3.data,error=_ref3.error;error?_this5.$message.error("Error in loading Assets"):(_this5.allAssets=Object.keys(data.assets||{}).map((function(assetId){return{name:data.assets[assetId],id:assetId}})),_this5.assetsLoading=!1)}))}},OnCategoryChange:function(){this.selectedxField=null,this.selectedyField=null,this.selectedAsset=[],this.readings=null,this.assetsLoading=!1,this.readingsLoading=!1,this.loadReadings(),this.$emit("updatecategoryDataPoints",[],[],{type:1,selectedAssetCategory:this.selectedAssetCategory,selectedAsset:this.selectedAsset,selectedxField:this.selectedxField,selectedyField:this.selectedyField,baselineData:this.baselineData})},onTypeChange:function(){this.selectedxField=null,this.selectedyField=null,this.selectedAssetCategory=null,this.selectedAsset=[],this.readings=null,this.assetsLoading=!1,this.readingsLoading=!1,this.$emit("flushChartState",!0)},populateDataPoints:function(){var _this6=this;switch(this.scatterType){case 1:if(this.selectedAsset.length&&this.selectedxField&&this.selectedyField){var _step,changedDataPoints=[],tempConfig=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.selectedAsset);try{var _loop=function(){var assetId=_step.value,yPoint=(_this6.allAssets.find((function(asset){return assetId===asset.id})),{parentId:assetId,assetCategoryId:_this6.selectedAssetCategory,prediction:!1,aliases:{},yAxis:{fieldId:_this6.selectedyField,aggr:3}});changedDataPoints.push(yPoint);var xPoint={parentId:assetId,assetCategoryId:_this6.selectedAssetCategory,prediction:!1,aliases:{},yAxis:{fieldId:_this6.selectedxField,aggr:3},xDataPoint:!0};changedDataPoints.push(xPoint),tempConfig.push({xAxis:[yPoint],yAxis:xPoint})};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}this.$emit("updatecategoryDataPoints",changedDataPoints,tempConfig,{type:1,selectedAssetCategory:this.selectedAssetCategory,selectedAsset:this.selectedAsset,selectedxField:this.selectedxField,selectedyField:this.selectedyField,baselineData:this.baselineData})}break}},updateMultiModeDataPoints:function(scatterconfig){this.$emit("updateMultiModeDataPoints",scatterconfig)}}},scatterAnalytics_ScatterLeftSidevue_type_script_lang_js=ScatterLeftSidevue_type_script_lang_js,ScatterLeftSide_component=(0,componentNormalizer/* default */.Z)(scatterAnalytics_ScatterLeftSidevue_type_script_lang_js,ScatterLeftSidevue_type_template_id_1b89767e_render,ScatterLeftSidevue_type_template_id_1b89767e_staticRenderFns,!1,null,null,null)
/* harmony default export */,ScatterLeftSide=ScatterLeftSide_component.exports,ScatterRightSidevue_type_template_id_5d379366_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"overflow-scroll-flex min-width0 min-height0"},[_c("div",{staticClass:"width100 fc-analytics-right-sidebar fc-overflow-y pB200"},[_c("div",{staticClass:"min-width100"},[1===_vm.scatterType?_c("el-tabs",{staticClass:"fc-scatter-analytics-tab-child fc-tab-heading-left20",model:{value:_vm.childTab,callback:function($$v){_vm.childTab=$$v},expression:"childTab"}},[_c("el-tab-pane",{attrs:{label:"Axis",name:"axis"}},[_c("div",{staticClass:"p20 pT0"},[_c("div",{},[_c("div",{staticClass:"fc-pink bold f13 line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.xaxis"))+" ")]),_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"X Label"},model:{value:_vm.report.options.axis.x.label.text,callback:function($$v){_vm.$set(_vm.report.options.axis.x.label,"text",$$v)},expression:"report.options.axis.x.label.text"}})],1)]),_c("div",{staticClass:"pT20"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.xmin"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"auto"},model:{value:_vm.report.options.axis.x.range.min,callback:function($$v){_vm.$set(_vm.report.options.axis.x.range,"min",$$v)},expression:"report.options.axis.x.range.min"}})],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.xmax"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"auto"},model:{value:_vm.report.options.axis.x.range.max,callback:function($$v){_vm.$set(_vm.report.options.axis.x.range,"max",$$v)},expression:"report.options.axis.x.range.max"}})],1)],1)],1),_c("div",{staticClass:"pT20"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.ticks_count"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"auto"},model:{value:_vm.report.options.axis.x.ticks.count,callback:function($$v){_vm.$set(_vm.report.options.axis.x.ticks,"count",_vm._n($$v))},expression:"report.options.axis.x.ticks.count"}})],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.decimals"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.report.options.axis.x.format.decimals,callback:function($$v){_vm.$set(_vm.report.options.axis.x.format,"decimals",_vm._n($$v))},expression:"report.options.axis.x.format.decimals"}})],1)],1)],1)]),_c("div",{staticClass:"y-axis-container fc-y-axis-container mT0"},[_c("div",{staticClass:"yaxis-tab-block clearboth pT20 fc-yaxis-tab-block "},[_c("el-tabs",{attrs:{type:"card"}},[_c("el-tab-pane",{attrs:{label:"Y1 Axis"}},[_c("div",{staticClass:"p20 pT0"},[_c("div",{staticClass:"customize-input-block pR20",staticStyle:{"margin-top":"20px"}},[_c("p",{staticClass:"customize-label"},[_vm._v("Show")]),_c("el-row",[_c("el-col",{attrs:{span:18}},[_c("el-checkbox",{model:{value:_vm.report.options.axis.y.show,callback:function($$v){_vm.$set(_vm.report.options.axis.y,"show",$$v)},expression:"report.options.axis.y.show"}})],1)],1)],1),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"fc-pink bold f13 line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.y1axis_label"))+" ")]),_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{type:"text",placeholder:"Y1 Label"},model:{value:_vm.report.options.axis.y.label.text,callback:function($$v){_vm.$set(_vm.report.options.axis.y.label,"text",$$v)},expression:"report.options.axis.y.label.text"}})],1)]),_c("div",{staticClass:"pT20"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.ymin"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"auto"},model:{value:_vm.report.options.axis.y.range.min,callback:function($$v){_vm.$set(_vm.report.options.axis.y.range,"min",_vm._n($$v))},expression:"report.options.axis.y.range.min"}})],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.ymax"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"auto"},model:{value:_vm.report.options.axis.y.range.max,callback:function($$v){_vm.$set(_vm.report.options.axis.y.range,"max",_vm._n($$v))},expression:"report.options.axis.y.range.max"}})],1)],1)],1),_c("div",{staticClass:"pT20"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.ticks_count"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.report.options.axis.y.ticks.count,callback:function($$v){_vm.$set(_vm.report.options.axis.y.ticks,"count",_vm._n($$v))},expression:"\n                                report.options.axis.y.ticks.count\n                              "}})],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.decimals"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.report.options.axis.y.format.decimals,callback:function($$v){_vm.$set(_vm.report.options.axis.y.format,"decimals",_vm._n($$v))},expression:"\n                                report.options.axis.y.format.decimals\n                              "}})],1)],1)],1)])]),_c("el-tab-pane",{attrs:{label:"Y2 Axis"}},[_c("div",{staticClass:"p20 pT0"},[_c("div",{staticClass:"customize-input-block pR20",staticStyle:{"margin-top":"20px"}},[_c("p",{staticClass:"customize-label"},[_vm._v("Show")]),_c("el-row",[_c("el-col",{attrs:{span:18}},[_c("el-checkbox",{model:{value:_vm.report.options.axis.y2.show,callback:function($$v){_vm.$set(_vm.report.options.axis.y2,"show",$$v)},expression:"report.options.axis.y2.show"}})],1)],1)],1),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"fc-pink bold f13 line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.y2axis_label"))+" ")]),_c("div",[_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{type:"text",placeholder:"Y2 Label"},model:{value:_vm.report.options.axis.y2.label.text,callback:function($$v){_vm.$set(_vm.report.options.axis.y2.label,"text",$$v)},expression:"report.options.axis.y2.label.text"}})],1)]),_c("div",{staticClass:"pT20"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.ymin"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"auto"},model:{value:_vm.report.options.axis.y2.range.min,callback:function($$v){_vm.$set(_vm.report.options.axis.y2.range,"min",_vm._n($$v))},expression:"\n                                report.options.axis.y2.range.min\n                              "}})],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.ymax"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"auto"},model:{value:_vm.report.options.axis.y2.range.max,callback:function($$v){_vm.$set(_vm.report.options.axis.y2.range,"max",_vm._n($$v))},expression:"\n                                report.options.axis.y2.range.max\n                              "}})],1)],1)],1),_c("div",{staticClass:"pT20"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.ticks_count"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.report.options.axis.y2.ticks.count,callback:function($$v){_vm.$set(_vm.report.options.axis.y2.ticks,"count",_vm._n($$v))},expression:"\n                                report.options.axis.y2.ticks.count\n                              "}})],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-grey7-12 f13 text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("analytics.analytics.decimals"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.report.options.axis.y2.format.decimals,callback:function($$v){_vm.$set(_vm.report.options.axis.y2.format,"decimals",_vm._n($$v))},expression:"\n                                report.options.axis.y2.format.decimals\n                              "}})],1)],1)],1)])])],1)],1)])]),_c("el-tab-pane",{attrs:{label:"Style",name:"style"}},[_c("div",{staticClass:"customize-tab-body-axis pT0"},[_c("div",{staticClass:"customize-scroll-hidden"},[_c("div",{staticClass:"customize-scroll pR5"},[_c("div",{staticClass:"label-txt-black pR20 pL20"},[_vm._v("General")]),_c("div",{staticClass:"customize-input-block pR20 pL20 pT20"},[_c("el-row",[_c("el-col",{staticClass:"pT10",attrs:{span:24}},[_c("el-checkbox",{staticClass:"mR10",model:{value:_vm.report.options.general.labels,callback:function($$v){_vm.$set(_vm.report.options.general,"labels",$$v)},expression:"report.options.general.labels"}}),_c("span",{staticClass:"customize-label"},[_vm._v("Data Labels")])],1)],1)],1),_c("div",{staticClass:"customize-input-block pR20 pL20 pT20"},[_c("p",{staticClass:"label-txt-black"},[_vm._v("Grid Line")]),_c("el-row",{staticClass:"mT10"},[_c("el-col",{attrs:{span:12}},[_c("el-checkbox",{staticClass:"customize-label",model:{value:_vm.report.options.general.grid.x,callback:function($$v){_vm.$set(_vm.report.options.general.grid,"x",$$v)},expression:"report.options.general.grid.x"}}),_c("span",{staticClass:"customize-label pL10"},[_vm._v("X Grid")])],1),_c("el-col",{attrs:{span:12}},[_c("el-checkbox",{staticClass:"customize-label",model:{value:_vm.report.options.general.grid.y,callback:function($$v){_vm.$set(_vm.report.options.general.grid,"y",$$v)},expression:"report.options.general.grid.y"}}),_c("span",{staticClass:"customize-label pL10"},[_vm._v("Y Grid")])],1)],1)],1)])])])])],1):_vm._e()],1)])])])},ScatterRightSidevue_type_template_id_5d379366_scoped_true_staticRenderFns=[],ScatterRightSidevue_type_script_lang_js={props:["report","scatterType"],data:function(){return{parentTab:"first",childTab:"axis"}},methods:{}},scatterAnalytics_ScatterRightSidevue_type_script_lang_js=ScatterRightSidevue_type_script_lang_js,ScatterRightSide_component=(0,componentNormalizer/* default */.Z)(scatterAnalytics_ScatterRightSidevue_type_script_lang_js,ScatterRightSidevue_type_template_id_5d379366_scoped_true_render,ScatterRightSidevue_type_template_id_5d379366_scoped_true_staticRenderFns,!1,null,"5d379366",null)
/* harmony default export */,ScatterRightSide=ScatterRightSide_component.exports,ScatterMainvue_type_template_id_0418c6ff_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"overflow-scroll-flex min-width0 min-height0 scatter-main-con"},[_c("div",{staticClass:"overflow-scroll-flex min-width0 min-height0"},[_c("div",{staticClass:"fc-overflow-y p10 fc-main-scatter-scroll"},[_c("div",{staticClass:"white-bg-block mB10 height550 width100"},[_c("div",{staticClass:"fc-report-widget-header"},[_c("div",{staticClass:"new-analytics-filter-section flex-middle"},[_vm.config.hidedatepicker?_vm._e():_c("div",{staticClass:"dashboard-timeline-filter"},[_c("new-date-picker",{key:_vm.componentkey,ref:"newDatePicker",staticClass:"filter-field date-filter-comp inline",style:_vm.config&&2===_vm.config.analyticsType?"left:0;float:left;":"",attrs:{zone:_vm.$timezone,dateObj:_vm.config.dateFilter,isDateFixed:_vm.config.applyReportDate},on:{"update:dateObj":function($event){return _vm.$set(_vm.config,"dateFilter",$event)},"update:date-obj":function($event){return _vm.$set(_vm.config,"dateFilter",$event)},date:_vm.setDateFilter}})],1),_c("div",{staticClass:"chart-icon pointer el-popover__reference fc-select-height35"},[_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"period-select fc-input-full-border2 ",attrs:{placeholder:"Period",title:"Time period","data-arrow":"true"},on:{change:_vm.onPeriodChange},model:{value:_vm.config.period,callback:function($$v){_vm.$set(_vm.config,"period",$$v)},expression:"config.period"}},_vm._l(_vm.getAvailablePeriods,(function(period,index){return _c("el-option",{key:index,attrs:{label:period.name,value:period.value,disabled:!period.enable}})})),1)],1),_vm.resultObj&&_vm.resultObj.report&&0!==_vm.resultObj.report.dataPoints.length?_c("span"):_vm._e()]),_c("div",{staticClass:"flex-middle"},[_c("div",[_vm._t("Algorithm")],2),_vm.config&&0===_vm.config.period?_c("div",{on:{click:_vm.openReportFilterDialog}},[_c("InlineSvg",{staticClass:"vertical-middle fc-icon-border pointer",attrs:{src:"svgs/filter",iconClass:"icon icon-sm-md"}})],1):_vm._e(),_c("div",{on:{click:_vm.openChartOptions}},[_c("InlineSvg",{staticClass:"vertical-middle fc-icon-border mL10 pointer",attrs:{src:"svgs/chart-options",iconClass:"icon icon-sm-md"}})],1),_c("div",[_vm._t("chartCustomization")],2)])]),_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(_vm._s(_vm.$t("home.dashboard.data_loading_failed")))])]):_vm.reportObj.data?_c("div",[_vm.config.hidechart?_vm._e():_c("div",[_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout&&"multi"===_vm.reportObj.options.settings.chartMode?_c("f-mobile-multi-chart",{ref:"multiChart",attrs:{isWidget:!!_vm.config,width:_vm.config&&_vm.config.width?_vm.config.width:null,resultObj:_vm.resultObj,height:_vm.config&&_vm.config.height?_vm.config.height:null,data:_vm.reportObj.data,options:_vm.reportObj.options,alarms:_vm.reportObj.alarms,dateRange:_vm.reportObj.dateRange,hidecharttypechanger:_vm.config&&_vm.config.widget,booleanData:_vm.reportObj.booleanData}}):_c("div",[_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout?_c("f-mobile-chart",{ref:"newChart",staticClass:"mobile-chart",attrs:{data:_vm.reportObj.data,options:_vm.reportObj.options,dateRange:_vm.reportObj.dateRange,resultObj:_vm.resultObj}}):_vm._e()],1),3!==_vm.scatterType||_vm.$route.meta&&_vm.$route.meta.layout&&"mobile"===_vm.$route.meta.layout?_vm._e():_c("f-grid-chart",{ref:"gridChart",attrs:{reportObj:_vm.reportObj,data:_vm.reportObj.data,options:_vm.reportObj?_vm.reportObj.options:null,alarms:_vm.reportObj.alarms,booleanData:_vm.reportObj.booleanData,dateRange:_vm.reportObj.dateRange,resultObj:_vm.resultObj,hidecharttypechanger:_vm.config.hidecharttypechanger,config:_vm.config}}),3!==_vm.scatterType?_c("f-new-chart",{ref:"newChart",attrs:{hidecharttypechanger:_vm.config.hidecharttypechanger,resultObj:_vm.resultObj,reportObj:_vm.reportObj,options:_vm.reportObj?_vm.reportObj.options:null,fixedChartHeight:_vm.config.fixedChartHeight,config:_vm.config},on:{chartgenerate:_vm.chartgenerate}}):_vm._e()],1)]):_c("div",{staticStyle:{"margin-top":"30px","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.resultObj&&_vm.resultObj.dateRange?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1)],1),_c("div",{staticClass:"white-bg-block mB10 width100"},[_c("div",{staticClass:"analytics-section mT20 fc-scatter-collapse"},[_c("el-collapse",{staticClass:"fc-pushing-data-collapse fc-collapse-arrow-bg fc-analytics-collapse fc-scatter-collapse",on:{change:function($event){return _vm.renderTrendChart()}},model:{value:_vm.activeTrend,callback:function($$v){_vm.activeTrend=$$v},expression:"activeTrend"}},[_c("el-collapse-item",{attrs:{title:"Reading Trends",name:"1"}},[_vm.activeTrend.includes("1")?_c("div",[_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(_vm._s(_vm.$t("home.dashboard.data_loading_failed")))])]):_vm.reportObj.data?_c("div",[_vm.config.hidechart?_vm._e():_c("div",[_vm.trendreportObj&&_vm.config.scatterConfig?_c("f-multi-chart",{ref:"trendChart",attrs:{ismulti:_vm.config.scatterConfig,reportObj:_vm.trendreportObj,data:_vm.trendreportObj.data,options:_vm.trendreportObj?_vm.trendreportObj.options:null,alarms:_vm.trendreportObj.alarms,booleanData:_vm.trendreportObj.booleanData,dateRange:_vm.trendreportObj.dateRange,resultObj:_vm.trendresultObj,config:_vm.config,hidecharttypechanger:_vm.config.hidecharttypechanger}}):_vm._e()],1)]):_c("div",{staticStyle:{"margin-top":"30px","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.resultObj&&_vm.resultObj.dateRange?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1)],1):_vm._e()])],1)],1)]),_vm.config.hidetabular?_vm._e():_c("div",{staticClass:"white-bg-block mB10 width100"},[_c("div",{staticClass:"analytics-section mT20 fc-scatter-collapse"},[_c("el-collapse",{staticClass:"fc-pushing-data-collapse fc-collapse-arrow-bg fc-analytics-collapse fc-scatter-collapse",model:{value:_vm.activeTable,callback:function($$v){_vm.activeTable=$$v},expression:"activeTable"}},[_c("el-collapse-item",{attrs:{title:"Undelying Data",name:"1"}},[_vm.activeTable.includes("1")?_c("div",[_vm.loading?_c("spinner",{staticClass:"analytics-spinner",attrs:{show:_vm.loading,size:"80"}}):_vm.failed?_c("div",{staticStyle:{"margin-top":"30px",opacity:"0.7","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("div",[_vm._v(_vm._s(_vm.$t("home.dashboard.data_loading_failed")))])]):_vm.reportObj.data?_vm.config.hidetabular?_vm._e():_c("f-tabular-report",{ref:"newTable",staticClass:"new-analytics-table fc-scatter-con-tabular",attrs:{reportObject:_vm.trendresultObj,reportConfig:_vm.trendreportObj,widget:!0,showWidgetTable:!0}}):_c("div",{staticStyle:{"margin-top":"30px","font-size":"13px",padding:"50px","line-height":"25px","text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.empty_data"))+" "),_vm.resultObj&&_vm.resultObj.dateRange?_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm._f("formatPeriod")(_vm.resultObj.dateRange.value,"MMM DD, YYYY")))]):_vm._e()])],1)],1):_vm._e()])],1)],1)])]),_vm.showReportFilter?_c("report-filter",{attrs:{visibility:_vm.showReportFilter,config:_vm.config.reportFilter,existingOptions:_vm.existingOptions},on:{"update:visibility":function($event){_vm.showReportFilter=$event},reportFilter:_vm.setReportFilter}}):_vm._e(),_vm.showScatterChartOptions?_c("scatter-chart-options",{attrs:{visibility:_vm.showScatterChartOptions,report:_vm.reportObj,config:_vm.config},on:{"update:visibility":function($event){_vm.showScatterChartOptions=$event},"update:report":function($event){_vm.reportObj=$event},"update:config":function($event){_vm.config=$event}}}):_vm._e()],1)])},ScatterMainvue_type_template_id_0418c6ff_staticRenderFns=[],NewDatePicker=(__webpack_require__(241830),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(506203),__webpack_require__(689730),__webpack_require__(900773)),FNewChartOptimize=__webpack_require__(678873),FMobileChart=__webpack_require__(242208),FMultiChart=__webpack_require__(649206),FGridChartvue_type_template_id_6e304f96_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_vm.c3ParamsList&&!1!==_vm.options.settings.chart?_c("div",{staticClass:"f-gridchart"},[_vm.showAlarms?_c("div",{staticClass:"fc-alarms-chart-title"},[_vm._v("Alarms")]):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showAlarms,expression:"showAlarms"}],ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"}),_c("div",{staticClass:"grid-gap5",class:{"fc-grid-2-column":_vm.c3ParamsList.length>2,"fc-grid-auto-fit":_vm.c3ParamsList.length<=2}},_vm._l(_vm.c3ParamsList,(function(c3Param,index){return _c("div",{key:index,staticClass:"fc-scatter-report-grid"},[_vm.hidecharttypechanger||c3Param.data.booleanChart||c3Param.data.enumChart?_vm._e():_c("f-chart-type",{staticClass:"pT10",attrs:{options:_vm.options,multichartkey:c3Param.key}}),_vm.chartContext?_c("div",{staticStyle:{"text-align":"center"}},[_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart&&!_vm.options.legend.show?_c("div",{staticClass:"boolean-chart-title",style:{color:"#000"}},[_vm._v(" "+_vm._s(c3Param.label)+" ")]):_vm._e(),_vm.options.legend.show?_c("f-chart-legends",{ref:"chartLegend",refInFor:!0,class:{"boolean-chart":c3Param.data.booleanChart||c3Param.data.enumChart},attrs:{chart:_vm.chartList&&_vm.chartList[index]&&_vm.chartList[index].chart?_vm.chartList[index].chart:null,options:_vm.options,multichart:c3Param.key,config:_vm.config,resultObj:_vm.resultObj}}):_vm._e(),_c("div",{staticClass:"fc-newchart-container"},[_c("div",{ref:"newChartEle",refInFor:!0,staticClass:"fc-new-chart",class:{"fc-boolean-chart":c3Param.data.booleanChart||c3Param.data.enumChart,"hide-y2-axis":_vm.options&&_vm.options.multichart&&_vm.options.multichart[c3Param.key]&&_vm.options.multichart[c3Param.key].axis&&!1===_vm.options.multichart[c3Param.key].axis.showy2axis,"scatter-full-opacity":_vm.resultObj&_vm.resultObj.scatterConfig&&_vm.c3.params&&_vm.c3.params.data&&_vm.c3.params.data.types&&!Object.values(_vm.c3.params.data.types).includes("bubble")}})])],1):_vm._e()],1)})),0),_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends",attrs:{reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,data:_vm.data,options:_vm.options}})],1):_vm._e()])},FGridChartvue_type_template_id_6e304f96_staticRenderFns=[],billboard=(__webpack_require__(212826),__webpack_require__(872695)),basechart=__webpack_require__(503162),c3_helper=__webpack_require__(167021),FChartLegends=__webpack_require__(906575),FWidgetLegends=__webpack_require__(547301),JumpToHelper=__webpack_require__(921466),FChartType=__webpack_require__(294309),tooltip=__webpack_require__(460895),FGridChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z],props:["resultObj","isWidget","booleanData","booleanAlarmsData","config"],components:{FChartLegends:FChartLegends/* default */.Z,FWidgetLegends:FWidgetLegends/* default */.Z,FChartType:FChartType/* default */.Z},data:function(){return{chartContext:null,c3:{params:null,chart:null},c3ParamsList:null,chartList:[],showAlarms:!1,showBooleanAlarms:!1,updateTimeout:null}},mounted:function(){this.render()},beforeDestroy:function(){if(tooltip/* default */.Z.hideTooltip(),this.updateTimeout&&clearTimeout(this.updateTimeout),this.chartList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.chartList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var chart=_step.value;chart.chart&&chart.chart.destroy()}}catch(err){_iterator.e(err)}finally{_iterator.f()}}this.chartContext=null,this.c3ParamsList=null,this.chartList=null},methods:{render:function(){var _this=this;if(this.data){var chartContext={};chartContext.multichartUniqueKey=Math.random().toString(36).substr(2,9),chartContext.options=this.getOptions(),chartContext.dateRange=this.dateRange,chartContext.data=Object.freeze(this.data),this.resultObj&&this.resultObj.Readingdp&&(chartContext.Readingdp=this.resultObj.Readingdp),this.resultObj&&this.resultObj.scatterConfig&&(chartContext.scatterConfig=this.resultObj.scatterConfig,chartContext.xMap=this.resultObj.xMap),chartContext.openAlarm=function(alarmList){if(alarmList){var _step2,alarmId=[],_iterator2=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var a=_step2.value;alarmId.push(a.id)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}_this.$mobile||_this.jumpToAlarmsNew(alarmId)}},chartContext.booleanData=Object.freeze(this.booleanData),chartContext.unitMap=this.getUnitMap(this.options.dataPoints),chartContext.enumMap=this.getEnumMap(this.options.dataPoints),this.showAlarms=1===chartContext.options.common.mode&&chartContext.options.settings.alarm,this.showAlarms&&(chartContext.alarms=this.alarms,chartContext.options.size.height=chartContext.options.size.height-100),this.showBooleanAlarms=this.booleanAlarmsData&&this.booleanAlarmsData.regions&&this.booleanAlarmsData.regions.length&&1===chartContext.options.common.mode&&chartContext.options.settings.booleanAlarms,this.showBooleanAlarms&&(chartContext.booleanAlarmsData=this.booleanAlarmsData,chartContext.options.size.height=chartContext.options.size.height-100),this.isWidget&&(chartContext.options.legend.show?chartContext.options.size.height=chartContext.options.size.height-50:chartContext.options.size.height=chartContext.options.size.height-20,this.options.widgetLegend.show&&(chartContext.options.size.height=chartContext.options.size.height-100)),this.c3ParamsList=c3_helper/* default */.Z.prepareMultichart(chartContext),this.resultObj&&(this.resultObj.Readingdp||this.resultObj.scatterConfig)&&(this.c3ParamsList=this.c3ParamsList.filter((function(params){return!(0,validation/* isEmpty */.xb)(params.data.axes)}))),this.chartList=[],this.chartContext=chartContext;var self=this;this.$nextTick((function(){if(self.showAlarms){var alarmsParams=this.showBooleanAlarms?c3_helper/* default */.Z.prepareBooleanAlarmChart(chartContext,self.c3ParamsList[0].data.json.x,this.alarms):c3_helper/* default */.Z.prepareBooleanChart(chartContext,self.c3ParamsList[0].data.json.x,this.alarms);self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(Object.freeze(alarmsParams)))}self.$nextTick((function(){for(var j=0,i=0;i<self.c3ParamsList.length;i++){var c3Param=self.c3ParamsList[i];self.$refs["newChartEle"]&&self.$refs["newChartEle"][i]&&(c3Param.bindto=self.$refs["newChartEle"][i],!c3Param.data.booleanChart&&!c3Param.data.enumChart&&self.$refs["chartLegend"]&&self.$refs["chartLegend"][j]&&(c3Param.size.height=c3Param.size.height-self.$refs["chartLegend"][j++].$el.clientHeight,self.isWidget&&self.options&&self.options.widgetLegend.show&&(c3Param.size.height=c3Param.size.height+20)),self.chartList.push({params:c3Param,chart:billboard.bb.generate(Object.freeze(c3Param))}))}}))}))}},getIndividualChartHeight:function(){var height=100;if(this.size.height){var calcHeight=this.size.height/this.chartList.length;calcHeight>=100&&(height=calcHeight)}return height},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),1e3)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},components_FGridChartvue_type_script_lang_js=FGridChartvue_type_script_lang_js,FGridChart_component=(0,componentNormalizer/* default */.Z)(components_FGridChartvue_type_script_lang_js,FGridChartvue_type_template_id_6e304f96_render,FGridChartvue_type_template_id_6e304f96_staticRenderFns,!1,null,null,null)
/* harmony default export */,FGridChart=FGridChart_component.exports,NewDataFormatHelper=__webpack_require__(804911),FTabularReportNew=__webpack_require__(979),FMobileMultiChart=__webpack_require__(696593),NewDateHelper=__webpack_require__(105534),NewReportSummaryHelper=__webpack_require__(601458),ReportFilter=__webpack_require__(587365),deepmerge=__webpack_require__(708634),ScatterChartOptions=__webpack_require__(248138),ScatterMainvue_type_script_lang_js={props:["config","noChartState","scatterType"],mixins:[NewDataFormatHelper/* default */.Z,AnalyticsMixin/* default */.Z,NewDateHelper/* default */.Z,NewReportSummaryHelper/* default */.Z],components:{NewDatePicker:NewDatePicker/* default */.Z,FNewChart:FNewChartOptimize/* default */.Z,FMultiChart:FMultiChart/* default */.Z,FTabularReport:FTabularReportNew/* default */.Z,FMobileChart:FMobileChart/* default */.Z,FMobileMultiChart:FMobileMultiChart/* default */.Z,ReportFilter:ReportFilter/* default */.Z,ScatterChartOptions:ScatterChartOptions/* default */.Z,FGridChart:FGridChart},data:function(){return{loading:!0,failed:!1,reportObj:null,resultObj:null,chartgenerated:!1,showTemplateFilter:!1,componentkey:0,FirstDateFromPicker:!1,appliedDateFilter:null,trendLineDataPoints:null,showReportFilter:!1,hasReportFilter:!1,existingOptions:[],trendresultObj:null,trendreportObj:null,showScatterChartOptions:!1,activeTable:[],activeTrend:[]}},mounted:function(){this.init()},watch:{config:{handler:function(newData,oldData){this.config.applyReportDate||this.init()},deep:!0}},computed:{getAvailablePeriods:function(){var operationOnId=this.config.dateFilter.operationOnId,avail=[];return avail.push({name:"High-res",value:0,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Hourly",value:20,enable:6===operationOnId||4!==operationOnId}),avail.push({name:"Daily",value:12,enable:!0}),avail.push({name:"Weekly",value:11,enable:!0}),avail.push({name:"Monthly",value:10,enable:!0}),avail.push({name:"Quarterly",value:25,enable:4===operationOnId||5===operationOnId}),avail.push({name:"Yearly",value:8,enable:4===operationOnId}),avail.push({name:"Hour of day",
// 12, 1, 2, 3
value:19,enable:!0}),avail.push({name:"Day of week",
// sun, mon
value:17,enable:!0}),avail.push({name:"Day of month",
// 1,2,3
value:18,enable:!0}),avail}},methods:{init:function(){this.$store.dispatch("loadAlarmSeverity"),this.config.dataPoints.length>0&&this.initChart()},initChart:function(){var _this=this;this.loading=!0,this.failed=!1;var Config=Object.freeze(Object.assign({},this.config)),apiURL=Config.api?Config.api:"/v2/report/readingReport",params=null;this.chartgenerated=!1,Config.alarmId&&(apiURL="/v2/report/fetchReadingsFromAlarm",params={alarmId:Config.alarmId,mode:1,xAggr:0,startTime:Config.dateFilter.value[0],endTime:Config.dateFilter.value[1],showAlarms:!0}),params||(params=this.getReportParams()),Config.analyticsType?params.analyticsType=Config.analyticsType:params.analyticsType=-1,Config.scatterConfig&&(params.scatterConfig=JSON.stringify({properties:Config.scatter,datapoints:Config.scatterConfig})),params.newFormat=!0,this.reportObj&&this.reportObj.options&&this.reportObj.options.trendLine.enable&&this.reportObj.options.trendLine.selectedPoints.length&&(params.trendLine=JSON.stringify(this.reportObj.options.trendLine)),api/* API */.bl.post(apiURL,params).then((function(_ref){var error=_ref.error,data=_ref.data;error&&(_this.loading=!1,_this.failed=!0);var result=data,reportObj=JSON.parse(JSON.stringify(_this.reportObj));
// To remove object observer from reportObj
result.xAggr=params.xAggr?params.xAggr:null,result.mode=params.mode,Config.analyticsType&&(result.report.analyticsType=Config.analyticsType),Config.filters&&(result.filters=Config.filters),Config.sorting&&(result.sorting=Config.sorting),Config.applyReportDate?(Config.dateFilter=result.dateRange=NewDateHelper/* default */.Z.getDatePickerObject(Config.dateFilter.operatorId,result.report.dateValue),_this.$nextTick((function(){_this.$refs.newDatePicker.loadFromObject()}))):result.dateRange=Config.dateFilter,_this.trendresultObj=deepmerge/* default */.Z.objectAssignDeep({},result),reportObj&&!Config.alarmId?("undefined"!==typeof _this.noChartState?!1===_this.noChartState&&(result.report.chartState=reportObj.options):result.report.chartState=reportObj.options,result.report.tabularState=reportObj.params.tabularState):Config.savedReport&&("undefined"!==typeof _this.noChartState?!1===_this.noChartState&&(result.report.chartState=Config.savedReport.chartState):result.report.chartState=Config.savedReport.chartState,result.report.tabularState=Config.savedReport.tabularState),_this.existingOptions=[];var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(result.report.dataPoints);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dp=_step.value;if(5!=dp.type&&2==Config.analyticsType){var existingOptionIds=_this.existingOptions.map((function(option){return option.value})),assetId=dp.metaData&&dp.metaData.parentIds?dp.metaData.parentIds[0]:null;null==assetId||existingOptionIds.includes(assetId)||_this.existingOptions.push({value:assetId,label:_this.$parent.filterToggle?"Current Asset":dp.name.split(" (")[0]})}if(!0===dp.xDataPoint){result["Readingdp"]=dp;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(result.report.trendLineDataPoints&&(_this.getTrendLineEquation(result),result.report.dataPoints=result.report.dataPoints.concat(result.report.trendLineDataPoints)),11===params.mode){var x=result.report.dataPoints[0].yAxis,y=result.report.dataPoints[0].xAxis;result.report.dataPoints[0].yAxis=y,result.report.dataPoints[0].xAxis=x}if(Config.scatterConfig&&(result.scatterConfig=Config.scatterConfig,_this.trendresultObj.report.chartState=null,_this.prepareTrendReportObj(_this.trendresultObj,params)),3===_this.scatterType&&(result.scatterType="multi"),reportObj=_this.prepareReport(result),Config.customizeC3&&reportObj.options&&(reportObj.options["customizeC3"]=Config.customizeC3),Config.customPadding&&reportObj.options&&(reportObj.options["customPadding"]=Config.customPadding),Config.customizeChartOptions&&reportObj.options&&(reportObj.options=deepmerge/* default */.Z.objectAssignDeep(reportObj.options,Config.customizeChartOptions)),1===Config.mode&&0===Config.period&&(_this.hasReportFilter=Object.keys(_this.config.reportFilter.timeFilter.conditions).length>0,_this.hasReportFilter=Object.keys(_this.config.reportFilter.dataFilter.conditions).length>0||_this.hasReportFilter),Config.scatterConfig&&reportObj&&reportObj.options&&(reportObj.options.settings.timeperiod=!0),Config.template){var currentTemplate=JSON.parse(JSON.stringify(Config.template)),filters=_this.getFiltersFromCriteria(currentTemplate);_this.loadReportTemplateValues(currentTemplate,filters).then((function(){currentTemplate.parentId=null===currentTemplate.parentId?currentTemplate.defaultValue:currentTemplate.parentId,_this.$set(_this.resultObj.report,"currentTemplate",currentTemplate),_this.showTemplateFilter=!0}))}(Config.isFromAlarmSummary||_this.$route.query&&_this.$route.query.isFromAlarmSummary&&!_this.resultObj)&&reportObj.booleanData&&(reportObj.options.dataPoints=_this.groupNonBooleanPoints(reportObj.options.dataPoints)),(_this.$route.query&&_this.$route.query.alarmId||Config.alarmId)&&(reportObj.options.settings.alarm=!0),_this.resultObj=result,reportObj.params=params,reportObj.alarms=_this.prepareBooleanReport(result.reportData.aggr),(Config.alarmId||_this.alarmId)&&(reportObj.alarms.barSize="medium"),Config.regionConfig&&(reportObj.options.regionConfig=Config.regionConfig),Config.hideDataPoints&&(reportObj.options.hideDataPoints=Config.hideDataPoints),Config.chartType&&(reportObj.options.chartType=Config.chartType),Config.diffChartConfig&&(reportObj.options.diffChartConfig=Config.diffChartConfig),Config.point&&(reportObj.options.point=Config.point),Config.zoom&&(reportObj.options.zoom=Config.zoom),Config.axes&&(reportObj.options.axes=Config.axes),reportObj.options.xFormat="MM-DD-YYYY",Config.xFormat&&(reportObj.options.xFormat=Config.xFormat),Config.axis&&Object.keys(Config.axis).forEach((function(rt){reportObj.options.axis[rt].label&&(reportObj.options.axis[rt].label.text=Config.axis[rt].label)})),reportObj.options.predictionTimings=Config.predictionTimings,3===_this.scatterType||_this.$route.meta&&_this.$route.meta.layout&&"mobile"===_this.$route.meta.layout||_this.$nextTick((function(){_this.$refs["newChart"]&&_this.$refs["newChart"].render(reportObj)})),_this.reportObj=reportObj,_this.$emit("reportLoaded",reportObj,result),_this.loading=!1}))},getReportParams:function(){var baselines,baselineNames,_this2=this;if(this.config.baseLine&&Array.isArray(this.config.baseLine)&&this.config.baseLine.length){if(this.config.baseLine[0]>0){var bl={};bl.baseLineId=this.config.baseLine[0],this.config.baseLine.length>1&&(bl.adjustType=this.config.baseLine[1]);var blList=[];blList.push(bl),baselines=blList}}else this.config.baseLine&&this.config.baseLine>0&&(baselines=[{baseLineId:this.config.baseLine}]);baselines&&this.baseLines&&(baselineNames=[],baselines.forEach((function(baseline){var baseLineName=_this2.baseLines.find((function(bl){return bl.id===baseline.baseLineId})).name;baselineNames.push(baseLineName)})));var fields=[];if(3===this.config.mode){var _step2,parentId=[],fieldId=null,yAggr=3,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dp=_step2.value;parentId.push(dp.parentId),fieldId=dp.yAxis.fieldId,yAggr=this.getYAggr(dp)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}fields.push({parentId:parentId,yAxis:{fieldId:fieldId,aggr:0!==this.config.period&&0===yAggr?3:yAggr},type:1,aliases:{actual:"A"}}),this.setAlias(fields,baselineNames)}else{this.setAlias(this.config.dataPoints,baselineNames);var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _dp=_step3.value,metaData={};_dp.categoryId&&(metaData.categoryId=_dp.categoryId),_dp.yAxis.aggr=this.getYAggr(_dp);var _params={};if(_params=this.config.template?{parentId:_dp.parentId?Array.isArray(_dp.parentId)?_dp.parentId:[_dp.parentId]:null,buildingId:_dp.buildingId?_dp.buildingId:-1,moduleName:_dp.moduleName,metaData:metaData,yAxis:{fieldId:_dp.yAxis.fieldId,aggr:_dp.yAxis.aggr},aliases:_dp.aliases,type:_dp.type>0?_dp.type:1,predictedTime:_dp.predictedTime,duplicateDataPoint:_dp.duplicateDataPoint}:{parentId:_dp.parentId?Array.isArray(_dp.parentId)?_dp.parentId:[_dp.parentId]:null,name:_dp.name,buildingId:_dp.buildingId?_dp.buildingId:-1,moduleName:_dp.moduleName,metaData:metaData,yAxis:_dp.yAxis,aliases:_dp.aliases,type:_dp.type>0?_dp.type:1,predictedTime:_dp.predictedTime,duplicateDataPoint:_dp.duplicateDataPoint},null!==this.config.dimensionDataPoint&&11!==this.config.mode){var xdp=this.config.dataPoints[this.config.dimensionDataPoint];xdp&&xdp.yAxis.fieldId&&xdp.parentId?_dp.yAxis.fieldId===xdp.yAxis.fieldId&&xdp.parentId===_dp.parentId&&xdp.aliases.actual===_dp.aliases.actual&&(_params["xDataPoint"]=!0):xdp&&2===xdp.type&&xdp.aliases.actual===_dp.aliases.actual&&(_params["xDataPoint"]=!0)}_dp.xDataPoint&&(_params["xDataPoint"]=!0),fields.push(_params)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}if(this.config.sorting&&[6,7,8,9,10,"mv"].includes(this.config.mode)&&(this.config.sorting.orderByFunc||this.config.sorting.limit)){var sortByField=this.config.sorting.sortByField;if(sortByField){var _field=fields.find((function(f){return f.yAxis.fieldId===sortByField}));_field||(sortByField=null)}sortByField||(sortByField=fields[0].yAxis.fieldId,this.config.sorting.sortByField=fields[0].yAxis.fieldId);var field=null;sortByField?field=fields.find((function(f){return f.yAxis.fieldId===sortByField})):this.config.dataPoints.length<=1&&(field=fields[0]),field&&(field.defaultSortPoint=!0,this.config.sorting.orderByFunc&&(field.orderByFunc=this.config.sorting.orderByFunc),this.config.sorting.limit&&(field.limit=this.config.sorting.limit))}var trendLine=null;this.config.savedReport&&this.config.savedReport.chartState&&(trendLine=JSON.stringify(JSON.parse(this.config.savedReport.chartState).trendLine));var params={mode:"reading"===this.config.mode?1:["mv"].includes(this.config.mode)?8:this.config.mode,startTime:this.config.dateFilter.value[0],endTime:this.config.dateFilter.value[1],groupByTimeAggr:this.config.groupByTimeAggr,fields:JSON.stringify(fields),transformWorkflow:this.config.transformWorkflow,trendLine:trendLine};if(1==this.config.mode&&0==this.config.period&&("undefined"!==typeof this.config.reportFilter&&this.config.reportFilter.hasOwnProperty("timeFilter")&&(params.timeFilter=JSON.stringify(this.config.reportFilter.timeFilter)),"undefined"!==typeof this.config.reportFilter&&this.config.reportFilter.hasOwnProperty("dataFilter"))){var dConfig=this.config.reportFilter.dataFilter;for(var key in dConfig.conditions){var condition=dConfig.conditions[key];condition.currentAsset=this.$parent.filterToggle&&condition.parentId==this.config.dataPoints[0]["parentId"]}params.dataFilter=JSON.stringify(this.config.reportFilter.dataFilter)}if([6,7,9,10].includes(this.config.mode)||(params.xAggr=1===this.config.mode||3===this.config.mode||4===this.config.mode||5===this.config.mode?this.config.period:0),this.reportObj&&this.reportObj.options&&this.reportObj.options.settings?(params.showAlarms=this.reportObj.options.settings.alarm,params.showSafeLimit=this.reportObj.options.settings.safelimit):this.config.savedReport?(params.showAlarms=this.config.savedReport.showAlarms,params.showSafeLimit=this.config.savedReport.showSafeLimit):params.showSafeLimit=!0,baselines&&(params.baseLines=JSON.stringify(baselines)),this.config.filters&&![1,11,"reading"].includes(this.config.mode))if(this.config.filters.xCriteriaMode&&(["mv"].includes(this.config.mode)||this.config.mvPoints&&this.config.mvPoints.length>0))params.xCriteriaMode=5;else if(this.config.filters.xCriteriaMode)if(params.xCriteriaMode=this.config.filters.xCriteriaMode,this.config.filters.parentId&&this.config.filters.parentId.length)params.parentId=this.config.filters.parentId;else{var categoryId=this.config.filters.assetCategory;if(!categoryId||!categoryId.length){categoryId=[];var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(this.config.dataPoints);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _dp2=_step4.value;-1===categoryId.indexOf(_dp2.categoryId)&&null!==_dp2.categoryId&&categoryId.push(_dp2.categoryId)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}categoryId.length&&(params.assetCategory=categoryId),this.config.filters.spaceId&&this.config.filters.spaceId.length&&(params.spaceId=this.config.filters.spaceId)}return this.$route.query&&this.$route.query.alarmId&&(params.alarmId=parseInt(this.$route.query.alarmId),params.showAlarms=!0),params},getYAggr:function(dp){return dp.yAxis&&dp.yAxis.aggr&&[2,3,4,5].includes(dp.yAxis.aggr)?6===dp.yAxis.aggr?3:dp.yAxis.aggr:dp.yAxis&&dp.yAxis.unitStr&&["currency","kwh","co2","kg","mwh"].includes(dp.yAxis.unitStr.trim().toLowerCase())?3:2},prepareTrendReportObj:function(result,params){var _this3=this,Config=JSON.parse(JSON.stringify(this.config));1===Config.mode&&0===Config.period&&(this.hasReportFilter=Object.keys(this.config.reportFilter.timeFilter.conditions).length>0,this.hasReportFilter=Object.keys(this.config.reportFilter.dataFilter.conditions).length>0||this.hasReportFilter),result.showReportFilter=this.hasReportFilter;var reportObj=this.prepareReport(result);if(Config.template){var currentTemplate=JSON.parse(JSON.stringify(Config.template)),filters=this.getFiltersFromCriteria(currentTemplate);this.loadReportTemplateValues(currentTemplate,filters).then((function(){currentTemplate.parentId=null===currentTemplate.parentId?currentTemplate.defaultValue:currentTemplate.parentId,_this3.$set(_this3.trendresultObj.report,"currentTemplate",currentTemplate),_this3.showTemplateFilter=!0}))}(Config.isFromAlarmSummary||this.$route.query&&this.$route.query.isFromAlarmSummary&&!this.trendresultObj)&&reportObj.booleanData&&(reportObj.options.dataPoints=this.groupNonBooleanPoints(reportObj.options.dataPoints)),(this.$route.query&&this.$route.query.alarmId||Config.alarmId)&&(reportObj.options.settings.alarm=!0),reportObj.params=params,reportObj.alarms=this.prepareBooleanReport(result.reportData.aggr),(Config.alarmId||this.alarmId)&&(reportObj.alarms.barSize="medium"),Config.regionConfig&&(reportObj.options.regionConfig=Config.regionConfig),Config.hideDataPoints&&(reportObj.options.hideDataPoints=Config.hideDataPoints),Config.chartType&&(reportObj.options.chartType=Config.chartType),Config.diffChartConfig&&(reportObj.options.diffChartConfig=Config.diffChartConfig),Config.point&&(reportObj.options.point=Config.point),Config.zoom&&(reportObj.options.zoom=Config.zoom),Config.axes&&(reportObj.options.axes=Config.axes),reportObj.options.xFormat="MM-DD-YYYY",Config.xFormat&&(reportObj.options.xFormat=Config.xFormat),Config.axis&&Object.keys(Config.axis).forEach((function(rt){reportObj.options.axis[rt].label&&(reportObj.options.axis[rt].label.text=Config.axis[rt].label)})),reportObj.options.predictionTimings=Config.predictionTimings,this.trendreportObj=reportObj,Config.customizeC3&&this.trendreportObj.options&&(this.trendreportObj.options["customizeC3"]=Config.customizeC3),Config.customizeChartOptions&&this.trendreportObj.options&&(this.trendreportObj.options=deepmerge/* default */.Z.objectAssignDeep(this.trendreportObj.options,Config.customizeChartOptions))},onPeriodChange:function(){if(!this.config.dataPoints.length){var filter="D";20===this.config.period?filter="W":12===this.config.period?filter="M":10===this.config.period&&(filter="Y"),this.config.dateFilter=this.getDefaultDateFilter(filter)}},setReportFilter:function(reportFilter){this.hasReportFilter=Object.keys(reportFilter.timeFilter.conditions).length>0,this.hasReportFilter=Object.keys(reportFilter.dataFilter.conditions).length>0||this.hasReportFilter,this.trendreportObj.options.settings.filterBar=this.hasReportFilter,this.$set(this.config,"reportFilter",reportFilter)},getTrendLineEquation:function(result){var self=this,trendLineProp=result.reportData.trendLineProp,trendLineObj={};trendLineObj=this.config.savedReport&&this.config.savedReport.chartState?JSON.parse(this.config.savedReport.chartState).trendLine:self.reportObj.options.trendLine;var decimalCount=trendLineObj.decimal,_loop=function(alias){var coef=trendLineProp[alias].coef;coef.forEach((function(data,index){coef[index]=self.showDecimal(data,decimalCount)+(0!==index?"x^"+index:"")})),coef.reverse(),coef=coef.join(" + ");var dataPoint=result.report.trendLineDataPoints.filter((function(dataPoint){return dataPoint.aliases.actual===alias}));dataPoint[0].name=coef,trendLineObj.showr2&&(dataPoint[0].name="R^2 = "+self.showDecimal(trendLineProp[dataPoint[0].aliases.actual].rSquare,decimalCount)+"; "+dataPoint[0].name)};for(var alias in trendLineProp)_loop(alias)},showDecimal:function(data,decimalCount){var splitData=data.split(".");return splitData[1]?splitData[0]+"."+splitData[1].slice(0,decimalCount):data},openReportFilterDialog:function(){this.showReportFilter=!0},openChartOptions:function(){this.showScatterChartOptions=!0},forceRerender:function(){this.$refs["newDatePicker"]&&!this.FirstDateFromPicker?this.componentkey=this.componentkey+1:this.setDateFilter(this.appliedDateFilter)},chartgenerate:function(value){var _this4=this;setTimeout((function(){return _this4.chartgenerated=value}),10)},setDateFilter:function(dateFilter){this.FirstDateFromPicker=!0,this.appliedDateFilter=dateFilter,this.$set(this.config,"dateFilter",dateFilter)},resize:function(){this.$refs["newChart"]&&3!==this.scatterType&&this.$refs["newChart"].resize(),this.$refs["multiChart"]&&this.$refs["multiChart"].resize(),this.$refs["gridChart"]&&this.$refs["gridChart"].resize(),this.$refs["heatmap"]&&this.$refs["heatmap"].resize(),this.$refs["treemap"]&&this.$refs["treemap"].resize(),this.$refs["newTable"]&&this.$refs["newTable"].resize(),this.$refs["trendChart"]&&this.$refs["trendChart"].resize()},renderTrendChart:function(){this.$refs["trendChart"]&&this.$refs["trendChart"].resize()}}},scatterAnalytics_ScatterMainvue_type_script_lang_js=ScatterMainvue_type_script_lang_js,ScatterMain_component=(0,componentNormalizer/* default */.Z)(scatterAnalytics_ScatterMainvue_type_script_lang_js,ScatterMainvue_type_template_id_0418c6ff_render,ScatterMainvue_type_template_id_0418c6ff_staticRenderFns,!1,null,null,null)
/* harmony default export */,ScatterMain=ScatterMain_component.exports,TrendLine=__webpack_require__(839662),FReportOptions=__webpack_require__(791514),scatterAnalyticsvue_type_script_lang_js={data:function(){return{scatterType:1,analyticsConfig:{name:"Scatter Analysis",key:"SCATTER_ANALYSIS",analyticsType:8,type:"reading",period:0,mode:1,baseLine:null,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(22),chartViewOption:0,dataPoints:[],dimensionDataPoint:null,defaultDate:!1,predictionTimings:[],transformWorkflow:null,trendLineChange:0,sorting:{sortByField:null,orderByFunc:3,limit:10},reportFilter:{timeFilter:{conditions:{}},dataFilter:{conditions:{}}},hidecharttypechanger:!0,customizeChartOptions:{widgetLegend:{show:!1}},customPadding:{top:20,right:20,bottom:20,left:50},scatter:null},spinnerToggle:!0,reportObject:null,resultObject:null,showChartCustomization:!1,showTrendLine:!1,hideSideBar:!1,noChartState:!1,algorithmType:null}},components:{ScatterLeftSide:ScatterLeftSide,ScatterRightSide:ScatterRightSide,ScatterMain:ScatterMain,TrendLine:TrendLine/* default */.Z,FReportOptions:FReportOptions/* default */.Z},watch:{reportId:function(){this.reportId&&this.loadReport()}},mixins:[AnalyticsMixin/* default */.Z,NewReportSummaryHelper/* default */.Z],mounted:function(){(this.reportId||this.alarmId||this.cardId)&&(this.$mobile?this.loadReport(this.mobileConfig):this.loadReport())},methods:{updateDataPoints:function(changedDataPoints){var _this=this;if(this.analyticsConfig.dataPoints.length){var configIndexes=[],alreadyAddedIndexes=[],pointsToRemove=[];this.enableReadingSelection=changedDataPoints.length>1;var optionPoints=[];this.reportObject&&this.reportObject.options.dataPoints.forEach((function(dp){"group"===dp.type?optionPoints.push.apply(optionPoints,(0,toConsumableArray/* default */.Z)(dp.children)):optionPoints.push(dp)}));var isValid=optionPoints.filter((function(dp){return 2!==dp.pointType&&!dp.duplicateDataPoint})).every((function(dp){var idx=changedDataPoints.findIndex((function(cdp){return parseInt(cdp.parentId)===parseInt(dp.parentId)&&parseInt(cdp.yAxis.fieldId)===parseInt(dp.fieldId)}));if(-1===idx&&pointsToRemove.push(dp.alias),-1!==idx){var configIdx=_this.getConfigDataPointFromOptionDP(_this.analyticsConfig,dp,!0);configIndexes.push(configIdx),alreadyAddedIndexes.push(idx)}return!0}));isValid&&(pointsToRemove.length&&this.removeOptionPoints(this.reportObject.options,pointsToRemove),this.analyticsConfig.dataPoints=[].concat((0,toConsumableArray/* default */.Z)(this.analyticsConfig.dataPoints.filter((function(dp,idx){return 2===dp.type||dp.duplicateDataPoint||configIndexes.includes(idx)}))),(0,toConsumableArray/* default */.Z)(changedDataPoints.filter((function(cdp,idx){return!alreadyAddedIndexes.includes(idx)})))))}else this.analyticsConfig.dataPoints=changedDataPoints;this.addPredictionFields(this.analyticsConfig)},reportLoaded:function(report,result){this.noChartState=!1,this.reportObject=report,this.resultObject=result},switchAlgorithm:function(command){this.algorithmType=command,this.enableTrendline()},enableTrendline:function(){this.reportObject&&(this.reportObject.options.trendLine.enable=!0),this.openTrendLineDialog()},openTrendLineDialog:function(){this.reportObject.options.trendLine.enable?this.showTrendLine=!0:this.analyticsConfig.trendLineChange++},onTrendLineChange:function(trendLineObj){this.reportObject.options.trendLine=trendLineObj,this.analyticsConfig.trendLineChange++},toggleSideBar:function(){this.hideSideBar=!this.hideSideBar,this.$refs["newAnalyticReport"]&&this.$refs["newAnalyticReport"].resize()},flushChartState:function(){this.noChartState=!0,this.analyticsConfig.dataPoints=[],this.analyticsConfig.scatterConfig=[]},updatecategoryDataPoints:function(changedDataPoints,scatterConfig,properties){this.scatterType=1,this.updateDataPoints(changedDataPoints),this.analyticsConfig.scatterConfig=scatterConfig,this.analyticsConfig.scatter=properties},updateMultiModeDataPoints:function(dataPoints){if(this.scatterType=3,this.checkPointStructure(dataPoints)){var scatterPoints=dataPoints.scatterPoints,config=JSON.parse(JSON.stringify(this.analyticsConfig));dataPoints.result.meta&&(this.selectedBuildings=dataPoints.result.meta.selectedBuildingIds,this.selectedBuildingTitle=dataPoints.result.meta.selectedBuildingTitle),0===dataPoints.scatterPoints.length?(this.reportObject=null,this.resultObject=null,this.analyticsConfig.scatterConfig=[],this.analyticsConfig.dataPoints=[]):(config["dataPoints"]=this.prepareOptionDataPoints(scatterPoints),config["scatterConfig"]=dataPoints.scatterPoints,
// config['hidechartoptions'] = true
config["hidecharttypechanger"]=!0,this.analyticsConfig=config)}},checkPointStructure:function(dataPoints){var _step,scatterPoints=dataPoints.scatterPoints,_iterator=(0,createForOfIteratorHelper/* default */.Z)(scatterPoints);try{for(_iterator.s();!(_step=_iterator.n()).done;){var rPoint=_step.value;if(!rPoint.xAxis||!rPoint.yAxis)return!1}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!0},prepareOptionDataPoints:function(rConfig){var dataPoints=[];if(0!==rConfig.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(rConfig);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var point=_step2.value,yAxis=!1;for(var key in point)if("yAxis"===key&&!1===yAxis||"xAxis"===key)if("yAxis"===key&&(yAxis=!0),"xAxis"===key){var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(point[key]);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dp=_step3.value,temp={};temp["parentId"]="string"===typeof dp.parentId?parseInt(dp.parentId):dp.parentId,temp["prediction"]=!1,temp["aliases"]=dp.aliases,temp["yAxis"]={},dp.name&&(temp["name"]=dp.name),temp.yAxis["fieldId"]=dp.readingId,temp.yAxis["aggr"]=dp.aggr,dataPoints.push(temp)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}else{var _temp={};_temp["parentId"]="string"===typeof point[key].parentId?parseInt(point[key].parentId):point[key].parentId,_temp["prediction"]=!1,_temp["aliases"]=point[key].aliases,_temp["yAxis"]={},point[key].name&&(_temp["name"]=point[key].name),_temp.yAxis["fieldId"]=point[key].readingId,_temp.yAxis["aggr"]=point[key].aggr,_temp["xDataPoint"]=!0,dataPoints.push(_temp)}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}return dataPoints},toggleCustomization:function(){1===this.scatterType&&(this.showChartCustomization=!this.showChartCustomization)}}},scatterAnalytics_scatterAnalyticsvue_type_script_lang_js=scatterAnalyticsvue_type_script_lang_js,scatterAnalytics_component=(0,componentNormalizer/* default */.Z)(scatterAnalytics_scatterAnalyticsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,scatterAnalytics=scatterAnalytics_component.exports},
/***/587758:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"5ee9b0f49c6e73cc51f35d51be8bad36.svg";
/***/},
/***/667527:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"00e2f8b54392f5c9d15bf4a60fcf5285.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/37673.js.map