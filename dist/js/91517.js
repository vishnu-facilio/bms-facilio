(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[91517],{
/***/703117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlarmModel}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlarmModel.vue?vue&type=template&id=5b251d32
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{background:"#fff",width:"400px",height:"420px !important"}},[_vm._m(0),_c("div",{staticClass:"model-container",staticStyle:{background:"#fff"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.category,callback:function($$v){_vm.$set(_vm.alarmRequest,"category",$$v)},expression:"alarmRequest.category"}},_vm._l(_vm.ticketcategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:category.id}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Team/Staff")]),_c("div",{staticStyle:{border:"1px solid #d8dce5",display:"inline-block",position:"relative",width:"100%",height:"40px","line-height":"40px","padding-left":"10px","padding-right":"10px","border-radius":"3px"}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.alarmRequest)))]),_vm._m(1),_c("f-assignment",{attrs:{model:_vm.alarmRequest,viewtype:"form"}})],1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Priority")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.priority,callback:function($$v){_vm.$set(_vm.alarmRequest,"priority",$$v)},expression:"alarmRequest.priority"}},_vm._l(_vm.ticketpriority,(function(priority){return _c("el-option",{key:priority.priority,attrs:{label:priority.displayName,value:parseInt(priority.id)}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Site")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",clearable:"","collapse-tags":"",placeholder:"Sites"},model:{value:_vm.alarmRequest.siteId,callback:function($$v){_vm.$set(_vm.alarmRequest,"siteId",$$v)},expression:"alarmRequest.siteId"}},_vm._l(_vm.sites,(function(site,index){return _c("el-option",{key:index,attrs:{label:site.name,value:site.id}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{background:"#fff"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",on:{click:function($event){return _vm.createWO()}}},[_vm._v("CREATE")])],1)])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{padding:"20px 20px 10px 20px"},attrs:{label:"Create Workorder"}},[_c("div",{staticClass:"setup-modal-title"},[_vm._v("Create workorder")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",{staticStyle:{float:"right"}},[_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{position:"relative",top:"-4px",right:"3px",color:"#c0c4cc"}})])}],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),FAssignment=__webpack_require__(383274),TeamStaffMixin=__webpack_require__(462599),AlarmModelvue_type_script_lang_js={props:["id"],components:{FAssignment:FAssignment/* default */.Z},mixins:[TeamStaffMixin/* default */.Z],data:function(){return{alarmRequest:{category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},siteId:null,priority:null}}},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},sites:function(state){return state.sites},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority}})),methods:{createWO:function(event){this.$emit("submit",this.alarmRequest)},closeDialog:function(){this.reset(),this.$emit("closed")},reset:function(){this.alarmRequest={category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},priority:null}}}},components_AlarmModelvue_type_script_lang_js=AlarmModelvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmModelvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmModel=component.exports},
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/490966:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ColumnCustomization}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ColumnCustomization.vue?vue&type=template&id=3753cf18
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.showDialog,fullscreen:!0,"custom-class":"cc-dialog",title:_vm.$t("common._common.column_settings"),"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"scrollable",staticStyle:{padding:"20px 0","max-height":"85vh"}},[_vm.fixedFields&&_vm.fixedFields.length?_c("div",{staticClass:"fixed-column"},[_c("el-checkbox-group",{model:{value:_vm.selectedFixedColumns,callback:function($$v){_vm.selectedFixedColumns=$$v},expression:"selectedFixedColumns"}},_vm._l(_vm.fixedFields,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",staticStyle:{border:"none"},attrs:{disabled:field.disabled,label:field.fieldId}},[_vm._v(_vm._s(_vm.getDisplayName(field)))])})),1)],1):_vm._e(),_c("el-divider",{staticClass:"mT0 mB20"}),_c("el-checkbox-group",{staticClass:"fc-column-checkbox pL20 pR20 pT0 pB0",model:{value:_vm.selectedColumns,callback:function($$v){_vm.selectedColumns=$$v},expression:"selectedColumns"}},[_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.sortedFields,"data-parent":"default"}},_vm._l(_vm.sortedFields,(function(field){return _c("el-checkbox",{key:field.name,staticClass:"column-item",class:{checkboxSelected:!0===field.edit},attrs:{label:field.name,value:field.name}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("inline-svg",{staticClass:"vertical-middle cursor-drag icon-right column-drag-icon",staticStyle:{cursor:"-webkit-grabbing"},attrs:{src:"drag-drop",iconClass:"icon icon-sm-md"}})],1),_c("el-col",{attrs:{span:22}},[field.edit?_c("el-input",{ref:"columnRenameInp",refInFor:!0,staticClass:"fc-input-border-remove width90 column-name-change-input",attrs:{placeholder:"Change your column name",autofocus:!0},on:{blur:function($event){field.edit=!1,_vm.$emit("update")},keyup:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter"))return null;field.edit=!1,_vm.$emit("update")}},model:{value:field.columnDisplayName,callback:function($$v){_vm.$set(field,"columnDisplayName",$$v)},expression:"field.columnDisplayName"}}):_c("div",{},[_vm._v(" "+_vm._s(field.columnDisplayName)+" "),field.field&&field.field.displayName!==field.columnDisplayName?_c("span",{staticClass:"fc-grey-text12 pL5"},[_vm._v(_vm._s(field.field.displayName))]):_vm._e()])],1),_c("el-col",{staticClass:"visibility-hide-actions text-right",attrs:{span:1}},[_c("i",{staticClass:"el-icon-edit pR10 fc-grey3-text14 pL25 column-edit-icon",on:{click:function($event){return $event.stopPropagation(),$event.preventDefault(),_vm.showRenameColumn(field)}}})])],1)],1)})),1),_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.selectedlookupColumns,"data-parent":_vm.selectedLookup}},_vm._l(_vm.selectedlookupColumns,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",attrs:{label:field.fieldId,"data-field-id":field.fieldId},on:{change:function($event){return _vm.onLookupSelected(field)}}},[_vm._v(" "+_vm._s(field.columnDisplayName)+" ")])})),1)],1)],1),_c("div",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving,disabled:_vm.isSaving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.isSaving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),vuex_esm=(__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(339772),__webpack_require__(947522),__webpack_require__(420629)),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),validation=__webpack_require__(990260),jquery=__webpack_require__(619755),jquery_default=__webpack_require__.n(jquery),columnConfigUtil=__webpack_require__(486613),ColumnCustomizationvue_type_script_lang_js={props:["visible","moduleName","viewName","relatedViewDetail","relatedMetaInfo","refreshRelatedList","excludeMainField"],data:function(){return{selectedColumns:[],selectedFixedColumns:[],showDialog:this.visible,sortedFields:this.allFields,nonSelectableColumns:["localId","photoId"],lookupMetaColumns:{},selectedLookup:"",dragOptions:{handle:".icon-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},columnNameShow:!1,isSaving:!1,editedColumn:null}},components:{draggable:vuedraggable_umd_default()},created:function(){var _this$nonSelectableCo,nonSelectableColumns=this.$getProperty(this.columnConfig,"nonSelectableColumns");(0,validation/* isEmpty */.xb)(nonSelectableColumns)||(_this$nonSelectableCo=this.nonSelectableColumns).push.apply(_this$nonSelectableCo,(0,toConsumableArray/* default */.Z)(nonSelectableColumns));this.sortedFields=this.allFields},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({stateMetaInfo:function(state){return state.view.metaInfo},stateViewDetail:function(state){return state.view.currentViewDetail}})),{},{metaInfo:function(){var stateMetaInfo=this.stateMetaInfo,relatedMetaInfo=this.relatedMetaInfo;return(0,validation/* isEmpty */.xb)(relatedMetaInfo)?stateMetaInfo:relatedMetaInfo},viewDetail:function(){var stateViewDetail=this.stateViewDetail,relatedViewDetail=this.relatedViewDetail;return(0,validation/* isEmpty */.xb)(relatedViewDetail)?stateViewDetail:relatedViewDetail},currentView:function(){return this.viewName?this.viewName:this.$route.params.viewname?this.$route.params.viewname:"all"},columnConfig:function(){var _ref=this.$attrs||{},columnConfig=_ref.columnConfig;return(0,validation/* isEmpty */.xb)(columnConfig)?(0,columnConfigUtil/* getColumnConfig */.U)(this.moduleName):columnConfig},fixedColumns:function(){
// Will be disabled. User wont be able to select
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedColumns=columnConfig.fixedColumns;return fixedColumns}return[]},fixedSelectableColumns:function(){
// Cannot change the order
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedSelectableColumns=columnConfig.fixedSelectableColumns;return fixedSelectableColumns}return[]},availableColumns:function(){var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var availableColumns=columnConfig.availableColumns;return availableColumns}return[]},metaColumns:function(){var _this=this,columns=[];return this.metaInfo&&this.metaInfo.fields&&this.viewDetail&&(columns=this.metaInfo.fields.map((function(field){return field.columnDisplayName=_this.viewDetail.defaultModuleFields&&_this.viewDetail.defaultModuleFields[field.name]?_this.viewDetail.defaultModuleFields[field.name].columnDisplayName:field.displayName,field}))),columns},allFields:function(){var _this2=this,viewFields=this.viewFields.filter((function(field){return 17!==_this2.$getProperty(field,"field.dataType")})),metaColumns=this.metaColumns.filter((function(field){return!_this2.viewFields.find((function(val){return val.name===field.name}))&&!(_this2.nonSelectableColumns||[]).includes(field.name)&&(!(_this2.availableColumns||{}).length||-1!==_this2.availableColumns.indexOf(field.name)||!field.default)&&17!==field.dataType})),columns=[].concat((0,toConsumableArray/* default */.Z)(viewFields),(0,toConsumableArray/* default */.Z)(metaColumns)).filter((function(field){return!(_this2.allFixedColumns||[]).includes(field.name)}));return columns},viewFields:function(){var _this3=this,columns=[];return this.viewDetail&&this.viewDetail.fields&&(columns=this.viewDetail.fields.map((function(vf){vf.name=(vf.field||{}).name||vf.fieldName,vf.fieldId=(vf.field||{}).fieldId;var defaultColumnName=_this3.viewDetail.defaultModuleFields&&_this3.viewDetail.defaultModuleFields[vf.name]?_this3.viewDetail.defaultModuleFields[vf.name].columnDisplayName:null;return vf.columnDisplayName=vf.columnDisplayName||defaultColumnName||vf.field.displayName,vf}))),columns},fixedFields:function(){var _this4=this;return this.metaColumns.filter((function(field){return(_this4.allFixedColumns||[]).includes(field.name)})).map((function(field){return field.disabled=(_this4.fixedColumns||[]).includes(field.name),field}))},allFixedColumns:function(){return(0,validation/* isEmpty */.xb)(this.fixedSelectableColumns)?this.fixedColumns:this.fixedColumns.concat(this.fixedSelectableColumns)},lookupList:function(){var _this5=this,fields=[];return(this.columnConfig||{}).lookupToShow&&this.metaColumns&&(fields=this.metaColumns.filter((function(field){return field.lookupModule&&(!_this5.columnConfig.lookupToShow.length||(_this5.columnConfig.lookupToShow||[]).includes(field.name))}))),fields},selectedlookupColumns:function(){var _this6=this;return this.lookupMetaColumns[this.selectedLookup]?this.lookupMetaColumns[this.selectedLookup].filter((function(field){return-1===_this6.sortedFields.findIndex((function(vf){return vf.fieldId===field.fieldId}))})).map((function(field){return field.columnDisplayName=field.displayName,field.parentFieldId=_this6.selectedLookupObj.fieldId,field})):[]},selectedLookupObj:function(){var _this7=this;return this.lookupList.find((function(field){return field.name===_this7.selectedLookup}))},mainField:function(){return this.metaColumns.find((function(field){return field.mainField}))}}),watch:{visible:function(val,oldVal){val&&this.reInit(),this.showDialog=val},showDialog:function(val,oldVal){this.$emit("update:visible",val)},allFields:function(val){this.sortedFields=val}},methods:{showRenameColumn:function(field){var _this8=this;this.$set(field,"edit",!0),this.$nextTick((function(){_this8.$refs["columnRenameInp"][0].focus()}))},save:function(){var _this9=this;this.isSaving=!0;var excludeMainField=this.excludeMainField,fields=[];fields=(0,validation/* isEmpty */.xb)(excludeMainField)?[{fieldId:this.mainField.id}].concat((0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}})))):(0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}}))),fields=[].concat((0,toConsumableArray/* default */.Z)(fields),(0,toConsumableArray/* default */.Z)(this.selectedFixedColumns.map((function(id){return{fieldId:id}}))));var self=this;this.$store.dispatch("view/customizeColumns",{moduleName:this.moduleName,viewName:this.currentView,fields:fields}).then((function(){self.isSaving=!1,self.showDialog=!1,self.$emit("refreshRelatedList"),self.$message.success(self.$t("common._common.view_updated_successfully"))})).catch((function(error){_this9.$message.error(error.message||_this9.$t("common._common.error_occured"))}))},editColumn:function(){this.editedColumn=this.field},reInit:function(){var _this10=this;this.selectedLookup="",this.selectedColumns=[],this.selectedFixedColumns=[],this.viewFields.forEach((function(vf){(_this10.allFixedColumns||[]).includes(vf.name)&&-1===vf.parentFieldId?(_this10.fixedSelectableColumns||[]).includes(vf.name)&&_this10.selectedFixedColumns.push(vf.fieldId):_this10.selectedColumns.push(vf.name)}))},loadModuleMeta:function(){var _this11=this;this.selectedLookup&&!this.lookupMetaColumns[this.selectedLookup]&&this.$http.get("/module/meta?moduleName="+this.selectedLookupObj.lookupModule.name).then((function(response){_this11.$set(_this11.lookupMetaColumns,_this11.selectedLookup,response.data.meta.fields)}))},getDisplayName:function(field){var displayName=field.columnDisplayName;if(this.viewDetail&&this.viewDetail.fields){var vf=this.viewDetail.fields.find((function(vf){return vf.name===field.name}));vf&&(displayName=vf.columnDisplayName||displayName)}return displayName},onLookupSelected:function(field){this.animate(field.fieldId,(function(){this.selectedlookupColumns=this.selectedlookupColumns.filter((function(lf){return lf.fieldId!==field.fieldId})),field.columnDisplayName+=" ("+this.selectedLookupObj.displayName+")",this.sortedFields.push(field)}))},animate:function(fieldId,cbk){var $selectedElement=jquery_default()('[data-field-id="'+fieldId+'"]'),oldOffset=$selectedElement.offset();$selectedElement.appendTo(jquery_default()("[data-parent='default']"));var newOffset=$selectedElement.offset(),temp=$selectedElement.clone().appendTo("body");temp.css({position:"absolute",left:oldOffset.left,top:oldOffset.top,zIndex:3e3,width:$selectedElement[0].offsetWidth}),$selectedElement.css("visibility","hidden");var self=this;temp.animate({top:newOffset.top,left:newOffset.left},350,(function(){
// $selectedElement.css('visibility', 'visible')
$selectedElement.remove(),temp.remove(),cbk.call(self)}))}}},components_ColumnCustomizationvue_type_script_lang_js=ColumnCustomizationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ColumnCustomizationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ColumnCustomization=component.exports},
/***/383274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAssignment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FAssignment.vue?vue&type=template&id=3fd62ade
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showRecommendedUsers&&"view"===_vm.viewtype?_c("el-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",attrs:{"popper-class":"fc-popover-p02 fc-assignment-popover-height",placement:"bottom",width:"320",trigger:"click"},on:{show:function($event){return _vm.loadrecommendedUsers()}}},[_c("div",{staticClass:"row popover-active-block",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"10px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel pointer"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",{staticClass:"fc-search-sticky"},["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"}},[_vm.recommendedUsersList.length&&"workorder"===_vm.moduleName?_c("div",[_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended_users"))+" ")]),_vm._l(_vm.recommendedUsersList,(function(recommendedUser,reusridx){return _c("div",{key:reusridx,on:{click:function($event){return _vm.assignViewWorkOrder(recommendedUser)}}},[_c("div",{staticClass:"group-item-label pointer"},[_vm._v(" "+_vm._s(recommendedUser.name)+" ( "+_vm._s(_vm.userVsTicketCountObj[recommendedUser.id])+" Tickets) ")])])}))],2):_vm._e(),"workorder"===_vm.moduleName&&_vm.recommendedUsersList.length?_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.others"))+" ")]):_vm._e(),_vm._l(_vm.userList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])}))],2):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px","padding-left":"10px"}},_vm._l(_vm.memberList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])})),0):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("div",{key:grpidx,on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticClass:"pL5",staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])]):_vm._e()})),0):_vm._e(),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("showFAssignmentPopover")],2)]):"form"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment"},[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignWorkOrder(group,grpidx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()],1):"view"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",on:{open:function($event){_vm.isPopverVisible=!0},close:function($event){_vm.isPopverVisible=!1}}},[_vm.isPopverVisible?[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()]:_vm._e()],2):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),quasar_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(641358)),vuex_esm=__webpack_require__(420629),FSearch=__webpack_require__(947748),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),FAssignmentvue_type_script_lang_js={props:{model:{},viewtype:{},record:{},form:{},siteId:{default:null},recordId:{},moduleName:{},showRecommendedUsers:{}},data:function(){return{showQuickSearch:!1,loading:!1,quickSearchQuery:null,assignmentValue:"assignmentGroup",selectedName:"",selectedGroup:"",selctedGroupMember:"",userVsTicketCountObj:{},memberList:[],typeVal:this.viewtype,workorder:null,actions:{assign:{loading:!1}},userList:[],recommendedUsersList:[],groupList:[],filtereduserList:[],filteredgroupList:[],filteredmemberList:[],isPopverVisible:!1}},components:{QPopover:quasar_esm/* QPopover */.oe,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QList:quasar_esm/* QList */.tu,FSearch:FSearch/* default */.Z},watch:{record:function(){this.loadWorkorders()},siteId:{handler:function(newVal,oldVal){var getCurrentSiteId=this.getCurrentSiteId,viewtype=this.viewtype;isEqual_default()(newVal,oldVal)||isEqual_default()(newVal,getCurrentSiteId)||isEqual_default()(viewtype,"view")||this.scopeTeamUser()},immediate:!0},isPopverVisible:function(){this.isPopverVisible&&"view"===this.viewtype&&(0,validation/* isEmpty */.xb)(this.userList)&&(0,validation/* isEmpty */.xb)(this.groupList)&&this.scopeTeamUser()},model:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var assignedTo=newVal.assignedTo,assignmentGroup=newVal.assignmentGroup,_ref=assignedTo||{},assignedToId=_ref.id,_ref2=assignmentGroup||{},assignmentGroupId=_ref2.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(this.selectedName=null),(0,validation/* isEmpty */.xb)(assignmentGroupId)&&(this.selectedGroup=null)}}}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusByLabel","getCurrentSiteId","getUser","getGroup"])),created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","workorder").then((function(){_this.loadWorkorders()}))},methods:{memberCount:function(group){var _ref3=group||{},members=_ref3.members;return(members||[]).length},loadrecommendedUsers:function(){var _this2=this;this.loading=!0,this.userVsTicketCountObj={},this.recommendedUsersList=[];var url="v2/recommended/workorder?woId=".concat(this.record.id);this.$http.get(url).then((function(response){0===response.data.responseCode&&response.data.result&&response.data.result.recommendedUsers&&response.data.result.recommendedUsers.forEach((function(element){_this2.recommendedUsersList.push(element.user),_this2.userVsTicketCountObj[element.user.id]=element.reason.no_of_tickets;for(var i=0;i<_this2.userList.length;i++)_this2.userList[i].id===element.user.id&&_this2.userList.splice(i,1)})),_this2.loading=!1})).catch((function(){
// TODO handle errors
}))},loadWorkorders:function(){var objKey="model";"view"===this.viewtype&&(objKey="record");var parent=this[objKey],_ref4=parent||{},assignedTo=_ref4.assignedTo,assignmentGroup=_ref4.assignmentGroup,_ref5=assignedTo||{},assignedToId=_ref5.id,assignedToName=_ref5.name,_ref6=assignmentGroup||{},assignmentGroupId=_ref6.id,assignmentGroupName=_ref6.name;(0,validation/* isEmpty */.xb)(assignedToName)?this.selectedName=(0,validation/* isEmpty */.xb)(assignedToId)?null:this.getUserNameFromList(assignedToId):this.selectedName=assignedToName,(0,validation/* isEmpty */.xb)(assignmentGroupName)?this.assignmentGroupName=(0,validation/* isEmpty */.xb)(assignmentGroupId)?null:this.getGroupNameFromList(assignmentGroupId):this.selectedGroup=assignmentGroupName},assignment:function(value){this.assignmentValue=value},assignWorkOrder:function(assignedObj,index,value){var isValueChanged=!1,model=this.model,$refs=this.$refs,_ref7=model||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup,_ref8=assignedObj||{},id=_ref8.id,name=_ref8.name;if("assignmentGroup"===value){var _ref9=assignmentGroup||{},assignmentGroupId=_ref9.id;(0,validation/* isEmpty */.xb)(name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(id)?null:this.getGroupNameFromList(id):this.selectedGroup=name,(0,validation/* isEmpty */.xb)(assignmentGroup)||(isValueChanged=assignmentGroupId!==id,this.$set(this.model.assignmentGroup,"id",id),this.$set(this.model.assignmentGroup,"name",name)),this.$emit("input",id),this.$emit("value",model),this.groupmemberList(index),isValueChanged&&this.$emit("onChange")}if("assignedTo"===value||"assignedToGroupMember"===value){
// get the assignedTo user and update using 'updateAssignedTo' emit.
var _ref10=assignedTo||{},assignedToId=_ref10.id;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,(0,validation/* isEmpty */.xb)(assignedTo)||(isValueChanged=assignedToId!==id,this.$set(this.model.assignedTo,"id",id),this.$set(this.model.assignedTo,"name",name)),this.$emit("input",id),this.$emit("value",model),$refs["assignedtopopover"]&&$refs["assignedtopopover"].close(),isValueChanged&&this.$emit("onChange",assignedObj)}},groupmemberList:function(groupIndex){this.assignmentValue="assignedToGroupMember",this.memberList=this.groupList[groupIndex].members,this.selectedName=null},assignViewWorkOrder:function(assignedTo,assignmentGroup,index){var _this3=this,$refs=this.$refs,record=this.record,assignObj={},moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref11=moduleState||{},statusId=_ref11.id,_ref12=record||{},recordId=_ref12.id;if(assignObj.id=[recordId],assignedTo){assignObj.assignedTo=assignedTo;var _ref13=assignedTo||{},id=_ref13.id,name=_ref13.name;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,$refs["assignedtopopover"]&&$refs["assignedtopopover"].close()}if(assignmentGroup){assignObj.assignmentGroup=assignmentGroup;var _ref14=assignmentGroup||{},_id=_ref14.id,_name=_ref14.name;(0,validation/* isEmpty */.xb)(_name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(_id)?null:this.getGroupNameFromList(_id):this.selectedGroup=_name,this.groupmemberList(index)}assignObj.status={id:statusId,status:"Assigned"},this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this3.$emit("assignactivity",assignObj),_this3.$dialog.notify(_this3.$t("common.products.workorder_assigned_successfully"))}))},scopeTeamUser:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,siteId,_yield$API$post,data,error,_ref15,groups,users;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={},siteId=_this4.siteId,siteId&&(params.siteId=siteId),_context.next=5,api/* API */.bl.post("v3/group/scopeBySite",params);case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref15=data||{},groups=_ref15.groups,users=_ref15.users,_this4.userList=users||[],_this4.groupList=groups||[]);case 9:case"end":return _context.stop()}}),_callee)})))()},removeTeamWO:function(assignValue){var _assignObj,_this5=this,record=this.record,_ref16=record||{},recordId=_ref16.id,moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref17=moduleState||{},statusId=_ref17.id,assignObj=(_assignObj={id:[recordId]},(0,defineProperty/* default */.Z)(_assignObj,assignValue,{id:-1}),(0,defineProperty/* default */.Z)(_assignObj,"status",{id:statusId,status:"Assigned"}),_assignObj);this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this5.$emit("assignactivity",assignObj),_this5.$dialog.notify(_this5.$t("common.products.workorder_assigned_successfully"))}))},reassign:function(assignValue){var model=this.model,_ref18=model||{},assignmentGroup=_ref18.assignmentGroup,assignedTo=_ref18.assignedTo;"assignmentGroup"===assignValue&&(this.selectedGroup=null,(0,validation/* isEmpty */.xb)(assignmentGroup)||(this.$set(this.model.assignmentGroup,"id",null),this.$set(this.model.assignmentGroup,"name",null))),"assignedTo"===assignValue&&(this.selectedName=null,(0,validation/* isEmpty */.xb)(assignedTo)||(this.$set(this.model.assignedTo,"id",null),this.$set(this.model.assignedTo,"name",null)))},reassignWO:function(assignValue){"assignmentGroup"===assignValue&&(this.selectedGroup=null),"assignedTo"===assignValue&&(this.selectedName=null),this.removeTeamWO(assignValue)},getUserNameFromList:function(id){var userList=this.userList;if((0,validation/* isEmpty */.xb)(userList))return this.getUser(id).name;var user=userList.find((function(user){return user.id===id}));return(0,validation/* isEmpty */.xb)(user)?void 0:this.$getProperty(user,"name",null)},getGroupNameFromList:function(id){var _this6=this,groupList=this.groupList;if((0,validation/* isEmpty */.xb)(groupList))this.$store.dispatch("loadGroups").then((function(){return(_this6.getGroup(id)||{}).name}));else{var group=groupList.find((function(group){return group.id===id}));if(!(0,validation/* isEmpty */.xb)(group))return this.$getProperty(group,"name",null)}}}},components_FAssignmentvue_type_script_lang_js=FAssignmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAssignmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAssignment=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/114857:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Timer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Timer.vue?vue&type=template&id=79408276
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-timer"},[_c("div",{staticClass:"inline_flex"},[_vm.days>0?_c("div",{staticClass:"t-days"},[_vm.days<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.days)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.days))]),_vm.days<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.day"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.days"))+" ")])]):_vm._e(),_vm.days>0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_c("div",{staticClass:"t-hours"},[_vm.hours<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.hours)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.hours))]),_vm.hours<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hour"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hours"))+" ")])]),_c("div",{staticClass:"t-separate"},[_vm._v(":")]),_c("div",{staticClass:"t-mins"},[_vm.mins<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.mins)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.mins))]),_vm.mins<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.min"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.mins"))+" ")])]),_vm.days<=0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_vm.days<=0?_c("div",{staticClass:"t-secs"},[_vm.secs<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.secs)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.secs))]),_vm.secs<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.sec"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.secs"))+" ")])]):_vm._e()])])},staticRenderFns=[],Timervue_type_script_lang_js={props:["time","color","twoDigits","staticTime","static","duration"],data:function(){return{days:"",hours:"",mins:"",secs:"",bgColor:"color: "+this.color+";",intervalObj:null}},watch:{time:function(){this.initCounter()},staticTime:{handler:function(newValue,oldValue){newValue!==oldValue&&this.staticTime&&this.initCounter()}}},mounted:function(){this.initCounter()},methods:{initCounter:function(){var date,dateObj=new Date(this.time),currentTime=Date.now();if(this.staticTime){this.days="",this.hours="",this.mins="",this.secs="",this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null),date=dateObj/1e3,date<0&&date>-2&&(date=0);var d=Math.floor(date/86400),h=Math.floor(date%86400/3600),m=Math.floor(date%3600/60),s=Math.floor(date%3600%60);this.days=d>=0?d:0,this.hours=h>=0?h:0,this.mins=m>=0?m:0,this.secs=s>=0?s:0}else if(this.static){this.days="",this.hours="",this.mins="",this.secs="",date=this.duration,date<0&&date>-2&&(date=0);var _d=Math.floor(date/86400),_h=Math.floor(date%86400/3600),_m=Math.floor(date%3600/60),_s=Math.floor(date%3600%60);this.days=_d>=0?_d:0,this.hours=_h>=0?_h:0,this.mins=_m>=0?_m:0,this.secs=_s>=0?_s:0}else{date=(currentTime-dateObj)/1e3,date<0&&date>-2&&(date=0);var _d2=Math.floor(date/86400),_h2=Math.floor(date%86400/3600),_m2=Math.floor(date%3600/60),_s2=Math.floor(date%3600%60);this.days=_d2>=0?_d2:0,this.hours=_h2>=0?_h2:0,this.mins=_m2>=0?_m2:0,this.secs=_s2>=0?_s2:0,this.startCounter()}},startCounter:function(){this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null);var self=this;this.intervalObj=setInterval((function(){self.secs++,self.secs>=60&&(self.secs=0,self.mins++),self.mins>=60&&(self.mins=0,self.hours++),self.hours>=24&&(self.hours=0,self.days++)}),1e3)}}},components_Timervue_type_script_lang_js=Timervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Timervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Timer=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/430797:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewAlarm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/NewAlarm.vue?vue&type=template&id=493ef7ef
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-formlayout"},[_c("div",[_c("q-toolbar",{attrs:{inverted:""}},[_c("q-toolbar-title",[_vm._v("New Alarm")])],1),_c("form",{staticStyle:{padding:"0 25px"},on:{submit:function($event){return $event.preventDefault(),_vm.submit.apply(null,arguments)}}},[_c("div",{staticClass:"row md-gutter"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("div",[_c("el-input",{attrs:{"float-label":"Subject"},model:{value:_vm.alarm.subject,callback:function($$v){_vm.$set(_vm.alarm,"subject",$$v)},expression:"alarm.subject"}}),_c("el-select",{attrs:{"float-label":"Type",options:_vm.alarmtype},model:{value:_vm.alarm.type,callback:function($$v){_vm.$set(_vm.alarm,"type",$$v)},expression:"alarm.type"}}),_c("el-select",{attrs:{"float-label":"Sensor",options:_vm._f("options")(_vm.devices)},model:{value:_vm.alarm.asset.id,callback:function($$v){_vm.$set(_vm.alarm.asset,"id",$$v)},expression:"alarm.asset.id"}})],1)]),_c("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12",attrs:{align:"right"}},[_c("q-btn",{attrs:{flat:"",type:"button",cancel:""},on:{click:_vm.close}},[_vm._v("Cancel")]),_c("q-btn",{attrs:{loader:"",color:"primary"},model:{value:_vm.submitBtn,callback:function($$v){_vm.submitBtn=$$v},expression:"submitBtn"}},[_vm._v(" Save "),_c("span",{attrs:{slot:"loading"},slot:"loading"},[_vm._v("Saving...")])])],1)])])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),quasar_esm=__webpack_require__(641358),NewAlarmvue_type_script_lang_js={data:function(){return{alarm:{subject:null,description:"alarms",type:1,asset:{id:null},alarmStatus:1,statusVal:"Active"},submitBtn:!1,alarmtype:[{label:"Maintenance",value:1},{label:"Critical",value:2},{label:"Life Safety",value:3},{label:"Energy",value:5}]}},mounted:function(){},components:{QBtn:quasar_esm/* QBtn */.OV,QToolbar:quasar_esm/* QToolbar */.UX,QToolbarTitle:quasar_esm/* QToolbarTitle */.OU},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({addAlarmApi:"alarm/addAlarm"})),{},{close:function(){this.alarm={subject:null,description:"alarms",type:1,asset:{id:null},alarmStatus:1,statusVal:"Active"},this.submitBtn=!1,this.$emit("closed")},submit:function(){var newAlarm=this.alarm;this.addAlarmApi(newAlarm),this.close()}}),computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({devices:function(state){return state.assets}}))},alarms_NewAlarmvue_type_script_lang_js=NewAlarmvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(alarms_NewAlarmvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewAlarm=component.exports},
/***/491517:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NewAlarmList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/alarms/v1/NewAlarmList.vue?vue&type=template&id=05eb6c69
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[-1===_vm.openAlarmId?_c("div",{staticClass:"fc-list-view p10 pT0 mT10 fc-list-table-container height100vh fc-table-td-height fc-table-viewchooser pB100",class:_vm.$route.query.search?"fc-list-table-search-scroll":""},[_vm.loading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_c("div",[_c("div",{staticClass:"view-column-chooser",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("img",{staticStyle:{"text-align":"center",position:"absolute",top:"35%",right:"29%"},attrs:{src:__webpack_require__(266707)}})])]),_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.alarms,height:"100%",index:_vm.indexMethod}},[_c("template",{slot:"empty"},[_c("img",{attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10 label-txt-black f14"},[_vm._v("No Alarms Available")])]),_c("el-table-column",{staticClass:"pR0",attrs:{fixed:"",width:"130",label:" "},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_vm.canShowColumn("severity")?_c("div",[alarm.row.severity?_c("div",{staticClass:"q-item-label self-center f10 secondary-color",staticStyle:{"min-width":"90px"}},[_c("div",{staticClass:"q-item-label uppercase severityTag",style:{"background-color":_vm.getAlarmSeverity(alarm.row.severity.id).color}},[_vm._v(" "+_vm._s(alarm.row.severity?_vm.getAlarmSeverity(alarm.row.severity.id).displayName:"---")+" ")])]):_vm._e()]):_vm._e()]}}],null,!1,680175338)}),_c("el-table-column",{attrs:{width:"100",label:"ID",fixed:""},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+alarm.row.serialNumber))])]}}],null,!1,1377771673)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"300",prop:"name",label:"message",fixed:""},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_c("div",{staticClass:"fw5"},[_vm._v(" "+_vm._s(alarm.row.subject)+" ")]),_c("div",{staticClass:"ellipsis",staticStyle:{"font-size":"12px",color:"#8a8a8a"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.row.modifiedTime))+" ")])]}}],null,!1,1693396969)}),_vm._l(_vm.viewColumns,(function(field,index){return _vm.isFixedColumn(field.name)?_vm._e():_c("el-table-column",{key:index,attrs:{prop:field.name,label:field.displayName,"min-width":"220"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return["alarmType"===field.name?_c("div",[_c("span",{staticClass:"q-item-label",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(_vm._s(alarm.row.alarmTypeVal?alarm.row.alarmTypeVal:"---"))])]):"modifiedTime"===field.name?_c("div",{staticStyle:{"min-width":"150px"},on:{click:function($event){return _vm.opensummary(alarm.row.id)}}},[_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+alarm.row.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n                html: '#timer_popover_' + alarm.row.id,\n                distance: 0,\n                interactive: true,\n                theme: 'light',\n                animation: 'scale',\n                arrow: true,\n              }"}],staticClass:"alarm-timer",attrs:{time:alarm.row.modifiedTime,title:_vm._f("formatDate")(alarm.row.modifiedTime)}}),_c("div",{staticClass:"hide",attrs:{id:"timer_popover_"+alarm.row.id}},[_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.5px",color:"#666666"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(alarm.row.modifiedTime))+" ")])])],1):"previousSeverity"===field.name&&alarm.row.previousSeverity?_c("div",{staticClass:"q-item-label self-center f10 secondary-color"},[_c("div",{staticClass:"q-item-label uppercase",class:alarm.row.previousSeverity?{severityTag:!0}:"",style:{"background-color":_vm.getAlarmSeverity(alarm.row.previousSeverity.id).color}},[_vm._v(" "+_vm._s(alarm.row.previousSeverity?_vm.getAlarmSeverity(alarm.row.previousSeverity.id).displayName:"---")+" ")])]):_c("div",[_c("span",{staticClass:"q-item-label",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(_vm._s(_vm.getColumnDisplayValue(field,alarm.row)))]),"resource"===field.field.name&&alarm.row.resource&&alarm.row.resource.space&&alarm.row.resource.space.id>0?_c("div",{staticClass:"flex-middle",staticStyle:{"padding-top":"5px"}},[_c("img",{staticClass:"flLeft",staticStyle:{height:"11px",width:"12px","margin-right":"3px"},attrs:{src:__webpack_require__(572902)}}),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flLeft q-item-label ellipsis",staticStyle:{"max-width":"85%","font-size":"10px"},attrs:{small:"","data-position":"bottom",title:alarm.row.resource.space.name}},[_vm._v(_vm._s(alarm.row.resource.space.name))])]):_vm._e()])]}}],null,!0)})})),_c("el-table-column",{attrs:{width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_vm.canShowColumn("noOfEvents")?_c("div",[alarm.row.noOfEvents>0?_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"flLeft"},[_c("img",{staticClass:"flLeft",staticStyle:{width:"15px"},attrs:{src:__webpack_require__(912146)}})]),_c("span",{staticClass:"flLeft pL5"},[_vm._v(_vm._s(alarm.row.noOfEvents))]),_c("div",{staticStyle:{clear:"both"}})]):_vm._e()]):_vm._e()]}}],null,!1,4263896854)}),_c("el-table-column",{attrs:{width:"160"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_vm.canShowColumn("acknowledgedBy")?_c("div",[_vm.$hasPermission("alarm:ACKNOWLEDGE_ALARM")?_c("div",{staticClass:"pull-left",staticStyle:{"font-size":"13px",color:"#383434","white-space":"nowrap"}},[!alarm.row.isAcknowledged&&_vm.isActiveAlarm(alarm.row)?_c("q-btn",{staticClass:"uppercase fia-alert-btn",attrs:{color:"secondary",small:"",outline:""},on:{click:function($event){return _vm.acknowledgeAlarm({alarm:alarm,isAcknowledged:!0,acknowledgedBy:_vm.$account.user})}}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledge")))]):_vm.isActiveAlarm(alarm.row)?_c("span",{staticClass:"q-item-label f11"},[_c("div",{staticClass:"hide ackhover",attrs:{id:"contentpopup2_"+alarm.row.id}},[_c("div",[_c("div",{staticClass:"ackhover-row"},[_c("div",{staticClass:"hover-row"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.acknowledge_by"))+" ")]),_c("div",{staticClass:"hover-row"},[_c("span",[_c("user-avatar",{attrs:{size:"sm",user:_vm.getUserName(alarm.row.acknowledgedBy.id)}})],1)]),_c("div",{staticClass:"hover-row"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.row.acknowledgedTime>0?alarm.row.acknowledgedTime:new Date))+" ")])])])]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"contentpopup2_"+alarm.row.id,interactive:!0,reactive:!0,distance:15,theme:"light",animation:"scale"},expression:"{\n                    html: 'contentpopup2_' + alarm.row.id,\n                    interactive: true,\n                    reactive: true,\n                    distance: 15,\n                    theme: 'light',\n                    animation: 'scale',\n                  }"}],staticClass:"f11",staticStyle:{"font-size":"14px","letter-spacing":"0.3px",color:"#333333"}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledged")))]),_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.4px","text-align":"left",color:"#8a8a8a","padding-top":"5px"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.row.acknowledgedTime>0?alarm.row.acknowledgedTime:new Date))+" ")])]):_c("span",{staticClass:"q-item-label"})],1):_vm._e()]):_vm._e()]}}],null,!1,199667470)}),_c("el-table-column",{attrs:{width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_c("q-icon",{staticStyle:{float:"right","font-size":"20px",color:"#d8d8d8"},attrs:{slot:"right",name:"more_vert"},slot:"right"},[_c("q-popover",{ref:"moreactionspopover"},[_vm.isActiveAlarm(alarm.row)?_c("q-list",{staticClass:"no-border",attrs:{link:""}},[_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.clear")},on:{click:function($event){_vm.updateAlarmStatus({alarm:alarm.row,severity:_vm.severityStatus.find((function(status){return"Clear"===status.severity}))}),_vm.$refs.moreactionspopover[_vm.index].close()}}})],1),_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common._common.delete")},on:{click:function($event){_vm.deleteAlarm([alarm.row.id]),_vm.$refs.moreactionspopover[_vm.index].close()}}})],1),alarm.woId>0?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.view_workorder")},on:{click:function($event){_vm.viewAlarm(alarm.row.woId),_vm.$refs.moreactionspopover[_vm.index].close()}}})],1):_vm.$hasPermission("alarm:CREATE_WO")?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.create_workorder")},on:{click:function($event){_vm.createWoDialog([alarm.row.id]),_vm.$refs.moreactionspopover[_vm.index].close()}}})],1):_vm._e()],1):_c("q-list",{staticClass:"no-border",attrs:{link:""}},[_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common._common.delete")},on:{click:function($event){_vm.deleteAlarm([alarm.row.id]),_vm.$refs.moreactionspopover[_vm.index].close()}}})],1)],1)],1)],1)]}}],null,!1,3874829790)})],2)],1):_c("div",{staticClass:"fc-column-view height100 border-border-none"},[_c("div",{staticClass:"row fc-column-view-title height100"},[_c("div",{staticClass:"col-4 fc-column-view-left height100",staticStyle:{"max-width":"26.3333%",flex:"0 0 26.3333%"}},[_c("div",{staticClass:"row container col-header pL20"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"pull-left"},[_c("el-dropdown",{staticClass:"alarm-dp",on:{command:_vm.openChild}},[_c("span",{staticClass:"el-dropdown-link pointer"},[_vm._v(" "+_vm._s(_vm.currentViewDetail.displayName)),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{staticClass:"wo-dropdownmenu",attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.views,(function(view,idx){return view.name!==_vm.currentViewDetail.name?_c("el-dropdown-item",{key:idx,attrs:{command:view.name}},[_vm._v(" "+_vm._s(view.displayName)+" ")]):_vm._e()})),1)],1)],1)])]),_vm.loading?_c("div",{staticClass:"row fia-tabel-nocontent"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row fc-column-view-records height100",staticStyle:{background:"#fff"}},[_c("table",{staticClass:"fc-list-view-table",staticStyle:{height:"calc(100vh - 100px)","overflow-y":"scroll",display:"block","padding-bottom":"60px"}},[_vm.alarms.length?_c("tbody",_vm._l(_vm.alarms,(function(alarm,index){return _c("tr",{key:index,staticClass:"tablerow",class:{active:_vm.openAlarmId===alarm.id},on:{click:function($event){return _vm.opensummary(alarm.row.id)}}},[_c("td",{staticClass:"text-left width100 pL5"},[_c("div",{staticClass:"q-item-main q-item-section pL10"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fw5 workRequest-heading f14 textoverflow-height-ellipsis",attrs:{title:alarm.Subject}},[_vm._v(" "+_vm._s(alarm.subject)+" ")]),_c("div",{staticClass:"flex-middle pT5"},[_c("div",{staticClass:"uppercase fc-id"},[_vm._v(" #"+_vm._s(alarm.serialNumber)+" ")]),_c("div",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"fc-grey2-text12"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.modifiedTime))+" ")])])])]),alarm.severity?_c("td",{staticClass:"text-left"},[_c("span",{staticClass:"ellipsis pT5"},[_c("span",{staticClass:"q-item-label"},[_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getAlarmSeverity(alarm.severity.id).color},attrs:{"aria-hidden":"true"}})]),_c("span",{staticClass:"q-item-label uppercase secondary-color",staticStyle:{"font-size":"10px","letter-spacing":"0.7px",color:"#333333"}},[_vm._v(_vm._s(_vm.getAlarmSeverity(alarm.severity.id).displayName))])])]):_vm._e()])})),0):_vm._e()])])])]),_c("div",{staticClass:"col-8 fc-column-alarm-right new-alarm-summ-bg",staticStyle:{"max-width":"73.6667%",flex:"0 0 73.6667%"}},[_c("div",{attrs:{slot:"right"},slot:"right"},[_c("router-view",{attrs:{name:"summary"}})],1)])])]),_c("q-modal",{ref:"createNewAlarmModel",attrs:{position:"right","content-classes":"fc-create-record"},on:{close:_vm.closeDialog}},[_c("q-btn",{attrs:{flat:""},on:{click:function($event){return _vm.$refs.createNewAlarmModel.close()}}},[_c("q-icon",{attrs:{name:"close"}})],1),_c("new-alarm",{on:{closed:_vm.closeDialog}})],1),_c("q-modal",{ref:"createWOModel",attrs:{noBackdropDismiss:"","content-classes":"fc-model","content-css":{padding:"0px",background:"#f7f8fa",Width:"10vw",Height:"30vh"}}},[_c("alarm-model",{ref:"confirmWoModel",on:{submit:_vm.createWO,closed:_vm.closeWoDialog}})],1),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:"alarm",columnConfig:_vm.columnConfig,viewName:_vm.currentView},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}})],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),User=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(426803)),Timer=__webpack_require__(114857),NewAlarm=__webpack_require__(430797),vuex_esm=__webpack_require__(420629),AlarmModel=__webpack_require__(703117),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ColumnCustomization=__webpack_require__(490966),ViewMixin=__webpack_require__(453877),quasar_esm=__webpack_require__(641358),log_map_state=__webpack_require__(766331),NewAlarmListvue_type_script_lang_js={mixins:[ViewMixin/* default */.Z],data:function(){return{createWoIds:[],loading:!0,fetchingMore:!1,sortConfig:{orderBy:{label:this.$t("alarm.alarm.date_modified"),value:"modifiedTime"},orderType:"desc",list:[{label:this.$t("maintenance.wr_list.created_on"),value:"createdTime"},{label:this.$t("maintenance.wr_list.due_by_time"),value:"dueDate"},{label:this.$t("maintenance.wr_list.subject"),value:"subject"}]},showColumnSettings:!1,columnConfig:{fixedColumns:["subject"],fixedSelectableColumns:["severity","acknowledgedBy","noOfEvents"],availableColumns:["alarmClass","alarmType","previousSeverity","condition","modifiedTime","createdTime","clearedTime","source","resource"],showLookupColumns:!1,lookupToShow:["asset","space"]}}},components:{QList:quasar_esm/* QList */.tu,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QIcon:quasar_esm/* QIcon */.oF,QPopover:quasar_esm/* QPopover */.oe,QModal:quasar_esm/* QModal */.hc,NewAlarm:NewAlarm/* default */.Z,Timer:Timer/* default */.Z,UserAvatar:User/* default */.Z,QBtn:quasar_esm/* QBtn */.OV,AlarmModel:AlarmModel/* default */.Z,ColumnCustomization:ColumnCustomization/* default */.Z},directives:{infiniteScroll:vue_infinite_scroll_default()},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadGroups"),this.loadAlarms()},mounted:function(){this.loadAlarmCount()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},views:function(state){return state.view.views},severityStatus:function(state){return state.alarmSeverity},currentViewDetail:function(state){return state.view.currentViewDetail}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketPriority","getTicketCategory","getAlarmSeverity"])),{},{alarms:function(){return this.$store.state.alarm.alarms.filter((function(n){return n}))},openAlarmId:function(){return this.$route.params.id?(this.$emit("showTag",!1),parseInt(this.$route.params.id)):(this.$emit("showTag",!0),-1)},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:"all"},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},sorting:function(){return this.$store.state.alarm.sorting},searchQuery:function(){return this.$store.state.alarm.quickSearchQuery},scrollDisabled:function(){return this.loading||!this.canLoadMore||this.fetchingMore},page:function(){return this.$route.query.page||1}}),watch:{currentView:function(newVal,oldVal){oldVal!==newVal&&(this.loadAlarms(),this.loadAlarmCount())},filters:function(newVal){this.loadAlarms(),this.loadAlarmCount()},sorting:function(newVal){this.sortConfig.orderBy=this.sorting.orderBy,this.sortConfig.orderType=this.sorting.orderType,this.loadAlarms(),this.loadAlarmCount()},page:function(newVal,oldVal){oldVal===newVal||this.loading||this.loadAlarms()},searchQuery:function(newVal){this.quickSearchQuery=this.searchQuery,this.loadAlarms(),this.loadAlarmCount()}},filters:{viewName:function(name){return"active"===name?"Active Alarms":"unacknowledged"===name?"Unacknowledged Alarms":"critical"===name?"Critical Alarms":"major"===name?"Major Alarms":"minor"===name?"Minor Alarms":"fire"===name?"Fire Alarms":"energy"===name?"Energy Alarms":"hvac"===name?"HVAC Alarms":"cleared"===name?"Cleared Alarms":"anomalies"===name?"Anomalies":"fire"===name?"Fire Alarms":"Alarms"}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({assignAlarmApi:"alarm/assignAlarm",updateAlarmStatus:"alarm/updateAlarmStatus",notifyAlarm:"alarm/notifyAlarm",acknowledgeAlarm:"alarm/acknowledgeAlarm",createWoFromAlarm:"alarm/createWoFromAlarm",getRelatedWorkorderId:"alarm/getRelatedWorkorderId",deleteAlarm:"alarm/deleteAlarm"})),{},{openChild:function(viewNames){var self=this,queryObj={viewname:viewNames,page:this.page,filters:this.filters,orderBy:this.sortConfig.orderBy.value,orderType:this.sortConfig.orderType,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,isNew:!0};this.$store.dispatch("alarm/fetchAlarms",queryObj).then((function(response){if(self.$store.state.alarm.alarms.length>0)self.$router.push({path:"/app/fa/faults/"+viewNames+"/newsummary/"+self.$store.state.alarm.alarms[0].id,query:self.$route.query});else{var newPath=self.$route.path.substring(0,self.$route.path.indexOf("/alarms/"));newPath+="/alarms/"+viewNames,self.$router.push({path:newPath,query:self.$route.query})}}))},createWO:function(data){var self=this,fields={};data.category&&(fields.category={id:data.category,name:this.getTicketCategory(data.category).name}),data.priority&&(fields.priority={id:data.priority,name:this.getTicketPriority(data.priority)}),data.assignedTo&&(fields.assignedTo=data.assignedTo),data.assignmentGroup&&(fields.assignmentGroup=data.assignmentGroup),self.$store.dispatch("alarm/createWoFromAlarm",{id:self.createWoIds,fields:fields}).then((function(){self.$dialog.notify(self.$t("alarm.alarm.wo_created_success")),self.$refs["createWOModel"].close()}))},createWoDialog:function(idList){this.createWoIds=idList,this.$refs["createWOModel"].open(),this.$refs.confirmWoModel.reset()},closeWoDialog:function(){this.$refs["createWOModel"].close()},loadAlarms:function(){var self=this,queryObj={viewname:this.currentView,page:this.page,filters:this.filters,orderBy:this.sortConfig.orderBy.value,orderType:this.sortConfig.orderType,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,isNew:!0};self.$store.dispatch("alarm/fetchAlarms",queryObj).then((function(response){self.loading=!1,self.fetchingMore=!1})).catch((function(error){error&&(self.loading=!1,self.fetchingMore=!1)})),self.setTitle(self.$options.filters.viewName(self.currentView))},loadAlarmCount:function(){var params,self=this,queryObj={viewname:this.currentView,filters:this.filters,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,count:!0},url="/v2/alarms/alarmCount?viewName="+queryObj.viewname;params="isCount="+queryObj.count,queryObj.filters&&(params=params+"&filters="+encodeURIComponent(JSON.stringify(queryObj.filters))),queryObj.search&&(params=params+"&search="+queryObj.search),queryObj.criteriaIds&&(params=params+"&criteriaIds="+queryObj.criteriaIds),queryObj.includeParentFilter&&(params=params+"&includeParentFilter="+queryObj.includeParentFilter),url=url+"&"+params,self.$http.get(url).then((function(response){self.listcount=response.data.count,self.$emit("syncCount",response.data.result.count)})).catch((function(error){}))},isActiveAlarm:function(alarm){return"Clear"!==this.getAlarmSeverity(alarm.severity.id).severity},getUserName:function(id){return-1!==id&&id?this.$store.getters.getUser(id).name:"Unkown"},opensummary:function(id){this.$router.push({path:"/app/fa/faults/"+this.$route.params.viewname+"/newsummary/"+id,query:this.$route.query})},assignAlarm:function(alarm,userId,userName){var data={id:[alarm.id],alarm:{assignedTo:{id:userId,name:userName}}};this.assignAlarmApi({data:data,alarm:alarm})},indexMethod:function(index){return 2*index},viewAlarm:function(ticketId){var self=this;self.$router.push({path:"/app/wo/orders/summary/"+ticketId})},closeDialog:function(){},loadMore:function(){this.fetchingMore=!0,this.loadAlarms(!0)}})},v1_NewAlarmListvue_type_script_lang_js=NewAlarmListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_NewAlarmListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewAlarmList=component.exports},
/***/583972:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3aed7174c314bbc14fee9c5cd51e20fa.svg";
/***/},
/***/266707:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8bf7d214fbcc77945abad62903a613.svg";
/***/},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/},
/***/912146:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"08f3bc22d8be8b23fd43d8a724856b19.svg";
/***/},
/***/572902:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"db5324b7cf9058a0aa45899e55bf6444.svg";
/***/},
/***/15482:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/noData-light.3b5d6592.png"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/91517.js.map