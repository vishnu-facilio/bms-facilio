"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[25338],{
/***/825338:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AssetDepreciation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/depreciation/AssetDepreciation.vue?vue&type=template&id=38a5d87c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 overflow-hidden"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title text-capitalize"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.asset_depreciation"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("common._common.list_of_depreciation_schedule"))+" ")])]),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.openAddOrUpdateForm()}}},[_vm._v(" "+_vm._s(_vm.$t("common.products.add_depreciation_schedule"))+" ")])],1)]),_c("div",{staticClass:"container-scroll mT15",staticStyle:{height:"calc(100vh - 250px)"}},[_c("div",{staticClass:"setting-Rlayout setting-list-view-table"},[_c("el-row",{staticClass:"header-row"},[_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("common.products.period_type"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.$t("common.products.status"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:4}},[_vm._v(" Â  ")])],1),_vm.isLoading?_c("el-row",[_c("el-col",{staticClass:"text-center",attrs:{span:24}},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1)],1):_vm.$validation.isEmpty(_vm.depreciationList)?_c("el-row",[_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:24}},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_depreciation_schedule_found"))+" ")])],1):_vm._l(_vm.depreciationList,(function(depreciation){return _c("el-row",{key:depreciation.id,staticClass:"body-row tablerow"},[_c("el-col",{staticClass:"body-row-cell d-flex",attrs:{span:6}},[_c("div",{staticClass:"pointer",on:{click:function($event){return _vm.openAddOrUpdateForm(depreciation)}}},[_vm._v(" "+_vm._s(depreciation.name)+" ")])]),_c("el-col",{staticClass:"body-row-cell",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.frequencyTypes[""+depreciation.frequencyType])+" ")]),_c("el-col",{staticClass:"body-row-cell text-center text-capitalize",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.depreciationTypes[""+depreciation.depreciationType])+" ")]),_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:4}},[_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeStatus(depreciation)}},model:{value:depreciation.active,callback:function($$v){_vm.$set(depreciation,"active",$$v)},expression:"depreciation.active"}})],1),_c("el-col",{staticClass:"body-row-cell",attrs:{span:4}},[_c("div",{staticClass:"text-left actions mT0 text-center d-flex"},[_c("div",{staticClass:"mR15",on:{click:function($event){return _vm.openAddOrUpdateForm(depreciation)}}},[_c("i",{staticClass:"el-icon-edit pointer"})]),_vm.canShowDelete?_c("div",{on:{click:function($event){return _vm.deleteDepreciation(depreciation)}}},[_c("inline-svg",{staticClass:"f-delete pointer",attrs:{src:"svgs/delete",iconClass:"icon icon-sm icon-remove"}})],1):_vm._e()])])],1)}))],2)]),_vm.showAddOrUpdateForm?_c("new-asset-depreciation",{attrs:{id:_vm.depreciationId},on:{onRecordSaved:function($event){return _vm.loadDepreciation()},onClose:function($event){_vm.showAddOrUpdateForm=!1}}}):_vm._e()],1)},staticRenderFns=[],NewAssetDepreciation=(__webpack_require__(260228),__webpack_require__(186466),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(468495)),api=__webpack_require__(32284),DepreciationConstant=__webpack_require__(793428),AssetDepreciationvue_type_script_lang_js={data:function(){return{depreciationList:[],isLoading:!1,showAddOrUpdateForm:!1,depreciationId:null}},components:{NewAssetDepreciation:NewAssetDepreciation/* default */.Z},created:function(){this.loadDepreciation(),this.depreciationTypes=DepreciationConstant/* DEPRECIATION_TYPES */.ik},computed:{canShowDelete:function(){return!1},frequencyTypes:function(){return Object.values(DepreciationConstant/* FREQUENCY_TYPES */.ze).reduce((function(res,freq){return res[freq.id]=freq.label,res}),{})}},methods:{loadDepreciation:function(){var _this=this,data={page:1,perPage:50};this.isLoading=!0,api/* API */.bl.fetchAll("assetdepreciation",data).then((function(_ref){var list=_ref.list,error=_ref.error;error?_this.$message.error(error.messsage||"Error Occured"):_this.depreciationList=list,_this.isLoading=!1,_this.depreciationId=null}))},changeStatus:function(depreciation){var _this2=this,id=depreciation.id,active=depreciation.active,param={id:id,data:{active:active}};api/* API */.bl.updateRecord("assetdepreciation",param).then((function(_ref2){var assetdepreciation=_ref2.assetdepreciation,error=_ref2.error;if(error)_this2.$message.error(error.messsage||"Error Occured"),_this2.$set(depreciation,"active",!1);else{var message=active?"Depreciation Schedule marked as active":"Depreciation Schedule marked as inactive";_this2.$message.success(message);var index=_this2.depreciationList.findIndex((function(depreciation){return depreciation.id===assetdepreciation.id}));_this2.depreciationList.splice(index,1,assetdepreciation)}}))},openAddOrUpdateForm:function(){var depreciation=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.depreciationId=depreciation.id,this.showAddOrUpdateForm=!0},deleteDepreciation:function(_ref3){var _this3=this,id=_ref3.id,param={id:id};api/* API */.bl.deleteRecord("assetdepreciation",param).then((function(_ref4){var error=_ref4.error;error?_this3.$message.error(error.messsage||"Error Occured"):_this3.loadDepreciation()}))}}},depreciation_AssetDepreciationvue_type_script_lang_js=AssetDepreciationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(depreciation_AssetDepreciationvue_type_script_lang_js,render,staticRenderFns,!1,null,"38a5d87c",null)
/* harmony default export */,AssetDepreciation=component.exports},
/***/468495:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewAssetDepreciation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/depreciation/NewAssetDepreciation.vue?vue&type=template&id=b2639826&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog}},[_c("div",{staticClass:"depreciation-form"},[_c("el-form",{ref:"depreciationForm",staticClass:"fc-form",attrs:{model:_vm.depreciation,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.id?_vm.$t("common.header.edit_depreciation_schedule"):_vm.$t("common.products.new_depreciation_schedule"))+" ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("div",{staticClass:"body-scroll"},[_vm.loading?_c("div",[_vm._l([1,2],(function(index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("span",{staticClass:"lines loading-shimmer width50 mB10"}),_c("span",{staticClass:"lines loading-shimmer width100 mB10 height40"})])],1)],1)})),_vm._l([3,4],(function(index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB10 d-flex"},[_c("el-col",{staticClass:"mR10",attrs:{span:12}},[_c("span",{staticClass:"lines loading-shimmer width50"}),_c("span",{staticClass:"lines loading-shimmer width100 mT13 mB10 height40"})]),4!==index?_c("el-col",{staticClass:"mL10",attrs:{span:12}},[_c("span",{staticClass:"lines loading-shimmer width50"}),_c("span",{staticClass:"lines loading-shimmer width100 mT13 mB10 height40"})]):_vm._e()],1)],1)}))],2):_c("div",[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common.placeholders.enter_depreciation_name")},model:{value:_vm.depreciation.name,callback:function($$v){_vm.$set(_vm.depreciation,"name",$$v)},expression:"depreciation.name"}})],1)],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"depreciationType"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.depreciation_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.placeholders.select_depreciation_type")},model:{value:_vm.depreciation.depreciationType,callback:function($$v){_vm.$set(_vm.depreciation,"depreciationType",$$v)},expression:"depreciation.depreciationType"}},_vm._l(_vm.depreciationTypes,(function(displayName,key){return _c("el-option",{key:key,attrs:{label:displayName,value:Number(key)}})})),1)],1)],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"pR10",attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.period_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{filterable:""},model:{value:_vm.depreciation.frequencyType,callback:function($$v){_vm.$set(_vm.depreciation,"frequencyType",$$v)},expression:"depreciation.frequencyType"}},_vm._l(_vm.frequencyTypes,(function(displayName,key){return _c("el-option",{key:key,attrs:{label:displayName,value:Number(key)}})})),1)],1),_c("el-col",{staticClass:"pL10",attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"frequency"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.period"))+" ")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"number",placeholder:_vm.$t("common._common.enter_period")},model:{value:_vm.depreciation.frequency,callback:function($$v){_vm.$set(_vm.depreciation,"frequency",$$v)},expression:"depreciation.frequency"}})],1)],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"pR10",attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"startDateFieldId"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.start_date_field"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",placeholder:_vm.$t("common._common.select_start_date")},model:{value:_vm.depreciation.startDateFieldId,callback:function($$v){_vm.$set(_vm.depreciation,"startDateFieldId",$$v)},expression:"depreciation.startDateFieldId"}},_vm._l(_vm.dateFields,(function(dateField,dateFldIdx){return _c("el-option",{key:dateField.id+"-"+dateFldIdx,attrs:{label:dateField.displayName,value:dateField.id}})})),1)],1)],1)],1)],1)])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm()}}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),api=(__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(186466),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(32284)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),utils_field=__webpack_require__(815872),DepreciationConstant=__webpack_require__(793428),NewAssetDepreciationvue_type_script_lang_js={props:["id"],data:function(){return{depreciation:{name:"",depreciationType:1,frequency:null,frequencyType:1,totalPriceFieldId:null,salvagePriceFieldId:null,currentPriceFieldId:null,startDateFieldId:null},loading:!1,saving:!1,dateFields:{},rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"},frequency:{required:!0,message:this.$t("common.header.please_select_period"),trigger:"change"},startDateFieldId:{required:!0,message:this.$t("common._common.please_select_a_start_date"),trigger:"change"}}}},created:function(){var _this=this,promises=[];promises.push(this.$store.dispatch("view/loadModuleMeta","asset")),this.id&&promises.push(this.init()),Promise.all(promises).then((function(){_this.filterOptions(),_this.loading=!1})),this.depreciationTypes=DepreciationConstant/* DEPRECIATION_TYPES */.ik},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{frequencyTypes:function(){return Object.values(DepreciationConstant/* FREQUENCY_TYPES */.ze).reduce((function(res,freq){return res[freq.id]=freq.label,res}),{})}}),methods:{init:function(){var _this2=this;this.loading=!0;var param={id:this.id};return api/* API */.bl.fetchRecord("assetdepreciation",param).then((function(_ref){var assetdepreciation=_ref.assetdepreciation,error=_ref.error;error?_this2.$message.error(error.messsage||"Error Occured"):_this2.depreciation=assetdepreciation}))},filterOptions:function(){var fields=this.$getProperty(this.metaInfo,"fields",null);(0,validation/* isEmpty */.xb)(fields)||(this.dateFields=fields.filter((function(field){return(0,utils_field/* isDateTypeField */.S6)(field)})),this.id||(this.depreciation.totalPriceFieldId=(fields.find((function(field){return"unitPrice"===field.name}))||{}).id,this.depreciation.currentPriceFieldId=(fields.find((function(field){return"currentPrice"===field.name}))||{}).id,this.depreciation.salvagePriceFieldId=(fields.find((function(field){return"salvageAmount"===field.name}))||{}).id,this.depreciation.startDateFieldId=(fields.find((function(field){return"purchasedDate"===field.name}))||{}).id))},submitForm:function(){var _this3=this;this.$refs["depreciationForm"].validate((function(valid){if(!valid)return!1;_this3.id?_this3.updateDepreciation():_this3.createDepreciation()}))},createDepreciation:function(){var _this4=this,param={data:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.depreciation),{},{active:!0})};this.saving=!0,api/* API */.bl.createRecord("assetdepreciation",param).then((function(_ref2){var assetdepreciation=_ref2.assetdepreciation,error=_ref2.error;error?_this4.$message.error(error.messsage||"Error Occured"):(_this4.$emit("onRecordSaved",assetdepreciation),_this4.$message.success(_this4.$t("common.products.depreciation_schedule_created"))),_this4.saving=!1,_this4.closeDialog()}))},updateDepreciation:function(){var _this5=this,param={id:this.id,data:this.depreciation};this.saving=!0,api/* API */.bl.updateRecord("assetdepreciation",param).then((function(_ref3){var error=_ref3.error;error?_this5.$message.error(error.messsage||"Error Occured"):(_this5.$emit("onRecordSaved"),_this5.$message.success(_this5.$t("common.products.depreciation_schedule_updated"))),_this5.saving=!1,_this5.closeDialog()}))},closeDialog:function(){this.$emit("onClose")}}},depreciation_NewAssetDepreciationvue_type_script_lang_js=NewAssetDepreciationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(depreciation_NewAssetDepreciationvue_type_script_lang_js,render,staticRenderFns,!1,null,"b2639826",null)
/* harmony default export */,NewAssetDepreciation=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/25338.js.map