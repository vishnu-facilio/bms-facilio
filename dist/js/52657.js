(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[52657],{
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/794948:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FFileUpload}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FFileUpload.vue?vue&type=template&id=e533b9a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-img-container"},[_vm.imgUrl&&!_vm.isFileType?_c("div",{staticClass:"photo-container"},[_c("img",{staticClass:"f-img",attrs:{src:_vm.imgUrl}}),_vm.isDisabled||_vm.isUploading?_vm._e():_c("div",{staticClass:"f-img-delete",on:{click:function($event){return _vm.removeFile(_vm.field)}}},[_c("inline-svg",{staticClass:"f-delete",attrs:{src:"svgs/delete",iconClass:"icon icon-sm"}})],1)]):_vm.isFileType&&_vm.fileObject?_c("div",{staticClass:"fc-attachments"},[_c("div",{staticClass:"fc-attachment-row d-flex"},[_c("div",{staticClass:"attached-files"},[_c("div",{staticClass:"mB10"},[_vm._v(_vm._s(_vm.fileObject.name))]),_vm.$validation.isEmpty(_vm.fileObject.size)||_vm.preview?_vm._e():_c("div",{staticClass:"attached-file-size"},[_vm._v(" "+_vm._s(_vm._f("prettyBytes")(_vm.fileObject.size))+" ")])]),_c("div",{staticClass:"d-flex mL-auto"},[_vm.isUploading?_c("spinner",{attrs:{show:_vm.isUploading,size:"30"}}):_vm._e(),_vm.isDisabled||_vm.isUploading?_vm._e():_c("i",{staticClass:"el-icon-delete pointer attachment-delete",on:{click:function($event){return _vm.removeFile(_vm.field)}}})],1)])]):_c("div",{staticClass:"f-img-empty"},[_vm.showWebCamPhoto&&!_vm.isFileType?_c("div",{staticClass:"f-add-photo",on:{click:_vm.openPhoto}},[_c("inline-svg",{staticClass:"camera-icon self-center",attrs:{src:"svgs/camera",iconClass:"icon icon-xxl"}}),_c("div",{staticClass:"self-center"},[_c("p",{staticClass:"help-text"},[_vm._v(_vm._s(_vm.$t("common.attachment_form.add_photo")))])])],1):_vm._e(),_vm.showWebCamPhoto&&!_vm.isFileType?_c("div",{staticClass:"f-img-separator justify-center d-flex"},[_c("span",{staticClass:"self-center"},[_vm._v(_vm._s(_vm.$t("common.text.or")))])]):_vm._e(),_c("el-upload",{staticClass:"f-img-upload",attrs:{action:"","show-file-list":!1,"http-request":function(event){return _vm.uploadFile(_vm.field,event)},"on-remove":_vm.removeFile,"before-upload":_vm.beforeUpload,disabled:_vm.isDisabled,drag:""}},[_vm.isPlaceHolderAvailable?_vm._t("placeHolderSlot"):_c("div",{staticClass:"d-flex flex-direction-column"},[_c("inline-svg",{staticClass:"folder-icon self-center",attrs:{src:"svgs/folder",iconClass:"icon icon-xxl"}}),_c("div",{staticClass:"self-center"},[_c("p",{staticClass:"help-text"},[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_drop_text"))+" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])],1)],2)],1),_vm.isUploading&&!_vm.isFileType?_c("div",{staticClass:"mT10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uploading"))+" ")]):_vm._e(),_vm.showPhotoContainer?_c("div",[_c("el-dialog",{staticClass:"f-img-webcam",attrs:{visible:_vm.showPhotoContainer,width:"650px","append-to-body":!0,"show-close":!1,"before-close":_vm.closeDialogBox},on:{"update:visible":function($event){_vm.showPhotoContainer=$event}}},[_c("div",{staticClass:"height400"},[_c("video",{ref:"player",attrs:{autoplay:""}}),_c("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{width:"320",height:"240"}})]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.captureImg()}}},[_vm._v("Save Photo")])],1)])],1):_vm._e()])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(169358),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),Spinner=__webpack_require__(604947),uuid=__webpack_require__(455877),FFileUploadvue_type_script_lang_js={name:"FFileUpload",components:{Spinner:Spinner/* default */.Z},props:["field","showWebCamPhoto","isDisabled","imgContentUrl","isFileType","fileObj","additionalFileFormat","isV3Api","isSaveBtnDisabled","addImgFile","preview"],data:function(){return{showPhotoContainer:!1,authorizeImageFormats:["image/jpeg","image/png","image/jpg"],isUploading:!1,skipDefault:!1}},computed:{imgUrl:{get:function(){return this.imgContentUrl},set:function(value){this.$emit("update:imgContentUrl",value)}},fileObject:{get:function(){var fileObj=this.fileObj,defaultFileObject=this.defaultFileObject,skipDefault=this.skipDefault;return(0,validation/* isEmpty */.xb)(defaultFileObject)||skipDefault?fileObj:defaultFileObject},set:function(value){this.$emit("update:fileObj",value)}},defaultFileObject:function(){var field=this.field,_ref=field||{},value=_ref.value;if(!(0,validation/* isEmpty */.xb)(value)){if(!(0,validation/* isArray */.kJ)(value))try{value=JSON.parse(value)}catch(e){this.$message.warning(this.$t("common._common.error_parsing_value"))}var defaultFileObj=value[0]||{},_ref2=defaultFileObj||{},name=_ref2.fileName;return(0,validation/* isEmpty */.xb)(name)?null:{name:name}}return null},isPlaceHolderAvailable:function(){var $slots=this.$slots;return!(0,validation/* isEmpty */.xb)($slots.placeHolderSlot)}},methods:{beforeUpload:function(file){var authorizeImageFormats=this.authorizeImageFormats,isFileType=this.isFileType,additionalFileFormat=this.additionalFileFormat;if(!isFileType){(0,validation/* isEmpty */.xb)(additionalFileFormat)||(authorizeImageFormats=authorizeImageFormats.concat(additionalFileFormat));var isFileTypeAccessible=authorizeImageFormats.includes(file.type);return isFileTypeAccessible||this.$message.error("Picture must be under any of these (jpeg/png/jpg) format!"),isFileTypeAccessible}return!0},openPhoto:function(){var _this=this;if(this.hasGetUserMedia())this.showPhotoContainer=!0,this.$nextTick((function(){var player=_this.$refs.player,constraints={video:{width:{exact:600},height:{exact:350}}};navigator.mediaDevices.getUserMedia(constraints).then((function(stream){player.srcObject=stream}))}));else{var errMsg=this.$t("common.errorMsg.no_browser_support");this.$message.error(errMsg)}this.$set(this,"showPhotoContainer",!0)},hasGetUserMedia:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)},removeFile:function(field){var _ref3=field||{},value=_ref3.value;this.imgUrl=null,this.fileObject=null,(0,validation/* isEmpty */.xb)(value)||(this.skipDefault=!0),this.$emit("removeImgFile",field)},uploadFile:function(field,event){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var file,isFileType,fileReader,fileOrId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return file=event.file,isFileType=_this2.isFileType,fileReader=new FileReader,isFileType?_this2.fileObject=file:fileReader.addEventListener("load",(function(event){_this2.imgUrl=event.target.result})),fileReader.readAsDataURL(file),_context.next=7,_this2.getFileId(file);case 7:fileOrId=_context.sent,_this2.addImgFile(fileOrId,field);case 9:case"end":return _context.stop()}}),_callee)})))()},closeDialogBox:function(){var player=this.$refs.player;player.srcObject&&player.srcObject.getVideoTracks().forEach((function(track){return track.stop()})),this.showPhotoContainer=!1},captureImg:function(){var _this3=this,field=this.field,canvasElement=this.$refs.canvas,player=this.$refs.player,canvasContext=canvasElement.getContext("2d");canvasContext.drawImage(player,0,0,canvasElement.width,canvasElement.height),this.$nextTick((function(){var dataUrl=canvasElement.toDataURL("image/png");_this3.imgUrl=dataUrl,fetch(dataUrl).then((function(res){return res.blob()})).then(function(){var _ref4=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(blob){var fileOrId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return blob.name=blob.name||"file ".concat((0,uuid.v4)()),_context2.next=3,_this3.getFileId(blob);case 3:fileOrId=_context2.sent,_this3.addImgFile(fileOrId,field);case 5:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref4.apply(this,arguments)}}()),player.srcObject.getVideoTracks().forEach((function(track){return track.stop()})),_this3.showPhotoContainer=!1}))},getFileId:function(file){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var fileId,_yield$API$uploadFile,ids,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.$emit("update:isSaveBtnDisabled",!0),_this4.isUploading=!0,_context3.next=4,api/* API */.bl.uploadFiles([file]);case 4:return _yield$API$uploadFile=_context3.sent,ids=_yield$API$uploadFile.ids,error=_yield$API$uploadFile.error,error?_this4.$message.error(error.message||"Error Occured"):fileId=(0,validation/* isEmpty */.xb)(ids)?null:ids[0],_this4.isUploading=!1,_this4.$emit("update:isSaveBtnDisabled",!1),_context3.abrupt("return",fileId);case 11:case"end":return _context3.stop()}}),_callee3)})))()}}},components_FFileUploadvue_type_script_lang_js=FFileUploadvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FFileUploadvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FFileUpload=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/890006:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSiteField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSiteField.vue?vue&type=template&id=aef7e964
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}}):_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:!_vm.$validation.isEmpty(_vm.isClearable)&&_vm.isClearable,"remote-method":_vm.remoteMethod,loading:_vm.loading,placeholder:"Select",disabled:_vm.disableSiteField,remote:!0},on:{change:function($event){return _vm.onSiteChange()}},model:{value:_vm.modelVal,callback:function($$v){_vm.modelVal=$$v},expression:"modelVal"}},_vm._l(_vm.sitesList,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value,"data-test-selector":""+option.label}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10 pR10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])})),1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),slicedToArray=__webpack_require__(554621),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(990260)),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),vuex_esm=__webpack_require__(420629),picklist=__webpack_require__(961358),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),FieldLoader=__webpack_require__(62979),FSiteFieldvue_type_script_lang_js={name:"FSiteField",components:{FieldLoader:FieldLoader/* default */.Z},props:["model","canDisable","isEdit","resetFields","filter","isClearable","isBuilder","field"],data:function(){return{sites:null,loading:!1,selectText:null,isLoading:!1}},computed:{modelVal:{get:function(){return this.model},set:function(value){value=(0,validation/* isEmpty */.xb)(value)?null:value,this.$emit("update:model",value),
// Have to filter the options in space asset chooser, if site is already selected.
this.$emit("update:filter",{site:Number(value)})}},currentSiteId:function(){var sitesList=this.sitesList,isBuilder=this.isBuilder,selectText=this.selectText,siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;if((0,validation/* isEmpty */.xb)(currentSiteId)&&1===sitesList.length&&!isBuilder&&(0,validation/* isEmpty */.xb)(selectText)){var _ref=sitesList||[],_ref2=(0,slicedToArray/* default */.Z)(_ref,1),site=_ref2[0],_ref3=site||{},value=_ref3.value;return value||null}return currentSiteId},isCurrentSiteSelected:function(){var currentSiteId=this.currentSiteId;return!(0,validation/* isEmpty */.xb)(currentSiteId)},disableSiteField:function(){var isCurrentSiteSelected=this.isCurrentSiteSelected,canDisable=this.canDisable,isEdit=this.isEdit;return isCurrentSiteSelected||canDisable||isEdit},sitesList:function(){var _this$sites=this.sites,sites=void 0===_this$sites?{}:_this$sites;return sites||[]}},created:function(){this.loadSites(),this.setSite(),this.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx},watch:{currentSiteId:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.setSite()},field:{handler:function(){this.loadSites()},deep:!0},modelVal:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref4,sitesList,hasValue;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_ref4=_this||{},sitesList=_ref4.sitesList,hasValue=(sitesList||[]).some((function(site){return site.value===newVal})),hasValue){_context.next=7;break}return _this.isLoading=!0,_context.next=6,_this.loadSites();case 6:_this.isLoading=!1;case 7:case"end":return _context.stop()}}),_callee)})))()}}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)(["loadSite"])),{},{loadSites:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref5,field,modelVal,params,_yield$getFieldOption,options,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref5=_this2||{},field=_ref5.field,modelVal=_ref5.modelVal,params={field:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{lookupModuleName:"site",skipDeserialize:!1})},(0,validation/* isEmpty */.xb)(modelVal)||(params["defaultIds"]=[modelVal]),_context2.next=5,(0,picklist/* getFieldOptions */._K)(params);case 5:_yield$getFieldOption=_context2.sent,options=_yield$getFieldOption.options,error=_yield$getFieldOption.error,(0,validation/* isEmpty */.xb)(error)&&(_this2.sites=options);case 9:case"end":return _context2.stop()}}),_callee2)})))()},remoteMethod:debounce_default()(function(){var _ref6=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(query){var _ref7,field,_yield$getFieldOption2,options,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return this.loading=!0,_ref7=this||{},field=_ref7.field,(0,validation/* isEmpty */.xb)(query)?this.selectText=null:this.selectText=query,_context3.next=5,(0,picklist/* getFieldOptions */._K)({field:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{lookupModuleName:"site",skipDeserialize:!1}),searchText:query});case 5:_yield$getFieldOption2=_context3.sent,options=_yield$getFieldOption2.options,error=_yield$getFieldOption2.error,(0,validation/* isEmpty */.xb)(error)&&(this.sites=options),this.loading=!1;case 10:case"end":return _context3.stop()}}),_callee3,this)})));return function(_x){return _ref6.apply(this,arguments)}}(),1e3),setSite:function(){var modelVal=this.modelVal,currentSiteId=this.currentSiteId,isEdit=this.isEdit;
// Skip setting site id for edit case
isEdit||(0,validation/* isEmpty */.xb)(currentSiteId)||Number(modelVal)===currentSiteId||(this.$set(this,"modelVal",currentSiteId),this.$emit("handleChange"))},onSiteChange:function(){
// Here model returns the previous site id
var resetFields=this.resetFields,model=this.model,siteId=(0,validation/* isEmpty */.xb)(model)?null:model;resetFields&&this.$emit("handleSiteSwitch",siteId),this.$emit("handleChange")}})},components_FSiteFieldvue_type_script_lang_js=FSiteFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSiteFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSiteField=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/62979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FieldLoader.vue?vue&type=template&id=7252e23e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"field-loading loading-shimmer"}):_vm._e()},staticRenderFns=[],FieldLoadervue_type_script_lang_js={props:{isLoading:{type:Boolean,required:!0}}},forms_FieldLoadervue_type_script_lang_js=FieldLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FieldLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldLoader=component.exports},
/***/415338:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ConnectDevice}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/ConnectDevice.vue?vue&type=template&id=20c5fa2e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:_vm.visibility,"append-to-body":!0,title:_vm.title?_vm.title:"Connect Device","custom-class":"dialog-header-padding","before-close":_vm.closeNewDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticStyle:{height:"250px"}},[_c("div",{staticClass:"code-info-badge"},[_vm._t("default",(function(){return[_vm._v(" Access "),_c("b",[_vm._v("app.facilio.com/device")]),_vm._v(" on your device and copy paste the passcode here: ")]}))],2),_c("el-form",{attrs:{model:_vm.addCode,"label-position":"top"},nativeOn:{submit:function($event){return $event.preventDefault(),_vm.connectDevice.apply(null,arguments)}}},[_c("el-form-item",{attrs:{prop:"code"}},[_c("p",{staticClass:"grey-text2"},[_vm._v("Passcode")]),_c("el-input",{ref:"codeInput",staticClass:"fc-input-full-border2",staticStyle:{width:"250px"},attrs:{autofocus:!0,placeholder:"Enter passcode (6 digit code)"},model:{value:_vm.addCode.code,callback:function($$v){_vm.$set(_vm.addCode,"code",$$v)},expression:"addCode.code"}})],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeNewDialog()}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.connecting},on:{click:function($event){return _vm.connectDevice()}}},[_vm._v(_vm._s(_vm.connecting?"Connecting...":"Connect"))])],1)]):_vm._e()},staticRenderFns=[],ConnectDevicevue_type_script_lang_js=(__webpack_require__(228436),{props:["device","visibility","title"],components:{},data:function(){return{connecting:!1,addCode:{code:null}}},methods:{connectDevice:function(){var _this=this;if(this.connecting=!1,this.addCode.code&&6===this.addCode.code.trim().length){var data={code:this.addCode.code,device:{id:this.device.id}};this.connecting=!0,this.$http.post("/v2/devices/connect",data).then((function(response){_this.connecting=!1,response.data.result.rowsUpdated?(
//reload list
_this.$message({message:" Device connected successfully!",type:"success"}),_this.$emit("connected"),_this.closeNewDialog()):alert("Invalid code!")})).catch((function(error){_this.connecting=!1,alert("Invalid code!")}))}else alert("Invalid code!")},closeNewDialog:function(){this.addCode.code=null,this.$emit("update:visibility",!1)}}}),setup_ConnectDevicevue_type_script_lang_js=ConnectDevicevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_ConnectDevicevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ConnectDevice=component.exports},
/***/852657:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FeedbackSettings}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/FeedbackSettings.vue?vue&type=template&id=6b9544f6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 width100"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v(" "+_vm._s(_vm.$t("common._common.feedback_settings"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("common._common.customize_feedback_settings"))+" ")])]),_c("div",{staticClass:"action-btn setting-page-btn controller-right-actions"},[_c("el-button",{directives:[{name:"show",rawName:"v-show",value:"feedbackTypes"===_vm.activeName,expression:"activeName === 'feedbackTypes'"}],staticClass:"el-button setup-el-btn el-button--primary scale-up-left",attrs:{type:"primary"},on:{click:function($event){return _vm.$refs["feedbackTypeTab"].openAddFeedbackDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.add_feedback_type")))]),_c("el-button",{directives:[{name:"show",rawName:"v-show",value:"devices"===_vm.activeName,expression:"activeName === 'devices'"}],staticClass:"el-button setup-el-btn el-button--primary scale-up-left",attrs:{type:"primary"},on:{click:function($event){return _vm.$refs["deviceTab"].openAddDeviceDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.add_feedback_kiosk")))])],1)]),_c("div",{staticClass:"container-scroll overflow-y"},[_c("div",{staticClass:"row setting-Rlayout overflow-y"},[_c("el-tabs",{staticClass:"width100",model:{value:_vm.activeName,callback:function($$v){_vm.activeName=$$v},expression:"activeName"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("common._common.feedback_types"),name:"feedbackTypes"}},["feedbackTypes"===_vm.activeName?_c("feedback-type-list",{ref:"feedbackTypeTab"}):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common._common.devices"),name:"devices"}},["devices"==_vm.activeName?_c("feedback-device",{ref:"deviceTab"}):_vm._e()],1)],1)],1)])])},staticRenderFns=[],FeedbackTypeListvue_type_template_id_b683ab1e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"feedback-type-list"},[_vm.loading?_c("div",{},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):0===_vm.feedbackTypes.length?_c("div",{staticClass:"text-center fc-empty-white flex-middle justify-center flex-col"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/approval",iconClass:"icon icon-xxxlg vertical-middle mR10"}}),_c("div",{staticClass:"q-item-label nowo-label"},[_vm._v("No Feedback types created yet.")])],1):_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-feedback-type-container"},[_c("div",{staticClass:"fc-feedback-type-sidebar"},[_c("el-header",{staticClass:"pT20 pB20 pL30 pR30 border-bottom6",attrs:{height:"60"}},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"label-txt-black fwBold text-uppercase"},[_vm._v("Type List")]),_c("div",{staticClass:"pointer feedback-search"},[_c("f-search",{staticClass:"mL20",model:{value:_vm.feedbackTypes,callback:function($$v){_vm.feedbackTypes=$$v},expression:"feedbackTypes"}})],1)])]),_c("div",{staticClass:"fc-feedback-type-sidebar-scroll"},_vm._l(_vm.feedbackTypes,(function(feedbackType){return _c("div",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],key:feedbackType.id,staticClass:"label-txt-black pT15 pB15 pL30 pR30 feedback-type-list visibility-visible-actions",class:{feedbacktypeActive:_vm.selectedFeedbackType.id==feedbackType.id},on:{click:function($event){_vm.selectedFeedbackType=feedbackType}}},[_vm._v(" "+_vm._s(feedbackType.name)+" "),_c("i",{staticClass:"el-icon-edit feedbacktype-edit visibility-hide-actions",on:{click:_vm.showRenameFeedbackType}})])})),0)],1),_c("div",{staticClass:"fc-feedback-type-main"},[_c("div",{staticClass:"feedback-card-layout"},[_vm.$validation.isEmpty(_vm.selectedFeedbackType.catalogs)?_c("div",{staticClass:"flex-middle justify-content-center height400 flex-direction-column"},[_c("img",{attrs:{src:__webpack_require__(835823),alt:"",width:"120",height:"120"}}),_c("el-button",{staticClass:"fc-create-btn mT10",staticStyle:{padding:"15px 30px"},on:{click:_vm.addCatalogForm}},[_vm._v(" "+_vm._s(_vm.$t("setup.feedback.add_catalog")))])],1):_vm.$validation.isEmpty(_vm.selectedFeedbackType.catalogs)?_vm._e():_c("div",{staticClass:"flex-middle justify-between pL30 pR70 pT20 pB10"},[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.$t("setup.feedback.catalogs"))+" ")]),_c("div",{staticClass:"green-txt-13 pointer flex-middle",on:{click:_vm.addCatalogForm}},[_c("img",{staticClass:"mR10",attrs:{src:__webpack_require__(353654)}}),_vm._v(" "+_vm._s(_vm.$t("setup.feedback.add_catalog"))+" ")])]),_c("el-row",{staticClass:"mL30 mR30 mT20"},[_c("draggable",{on:{change:_vm.updateFeedbackType},model:{value:_vm.selectedFeedbackType.catalogs,callback:function($$v){_vm.$set(_vm.selectedFeedbackType,"catalogs",$$v)},expression:"selectedFeedbackType.catalogs"}},_vm._l(_vm.selectedFeedbackType.catalogs,(function(catalog,index){return _c("el-col",{key:index,staticClass:"feedback-card visibility-visible-actions scale-up-left",attrs:{span:11}},[_c("el-row",{staticClass:"flex-middle"},[_c("el-col",{attrs:{span:1}},[_c("img",{staticClass:"mR10 mT8",attrs:{src:__webpack_require__(498410)}})]),_c("el-col",{staticClass:"pL10",attrs:{span:3}},[catalog.photoUrl?_c("div",{staticClass:"catalog-border-img"},[_c("img",{attrs:{src:catalog.photoUrl,width:"30",height:"30"}})]):_c("div",{staticClass:"catalog-border-img"},[_c("img",{attrs:{src:__webpack_require__(158357),width:"30",height:"30"}})])]),_c("el-col",{staticClass:"pL40",attrs:{span:20}},[_c("div",{staticClass:"label-txt3-14 bold"},[_vm._v(_vm._s(catalog.name))]),_c("div",{staticClass:"label-txt3-13 pT5"},[_vm._v(" "+_vm._s(catalog.description)+" ")])])],1),_c("i",{staticClass:"el-icon-edit visibility-hide-actions feedback-card-actions edit",on:{click:function($event){return _vm.editCatalog(catalog)}}}),_c("i",{staticClass:"el-icon-delete visibility-hide-actions feedback-card-actions delete",on:{click:function($event){return _vm.feedbackDelete(index,catalog.id)}}})],1)})),1)],1)],1)])])]),_vm.showForm?_c("feedback-type-form",{attrs:{isEdit:_vm.isEdit,kioskContext:_vm.selectedFeedbackType,drawerVisibility:_vm.showForm},on:{"update:drawerVisibility":function($event){_vm.showForm=$event},"update:drawer-visibility":function($event){_vm.showForm=$event},save:_vm.handleFormSubmit}}):_vm._e(),_vm.showCatalogDialog?_c("el-dialog",{staticClass:"fc-dialog-center-container service-categories",attrs:{"show-close":!1,title:"Service Categories",visible:_vm.showCatalogDialog,width:"50%","append-to-body":!1},on:{"update:visible":function($event){_vm.showCatalogDialog=$event}}},[_c("div",{staticClass:"height450 overflow-auto"},[_c("div",{staticClass:"container-scroll catalog-setup-container"},[_c("div",{staticClass:"row setting-Rlayout"},[_c("div",{staticClass:"col-lg-12 col-md-12 overflow-x"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"25%"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.report_description"))+" ")])])]),_c("tbody",_vm._l(_vm.catalogList,(function(catalog,index){return _c("tr",{key:index,staticClass:"tablerow visibility-visible-actions"},[_c("td",[_c("div",[_c("div",{staticClass:"mL10"},[_c("div",{staticClass:"label-txt3-14"},[_vm._v(_vm._s(catalog.name))])])])]),_c("td",[_c("div",{staticClass:"label-txt3-14"},[_vm._v(_vm._s(catalog.description))])])])})),0)])])])])])]):_vm._e(),_vm.selectedFeedbackType?_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Feedback Type",visible:_vm.feedbackTypeRename,width:"30%"},on:{"update:visible":function($event){_vm.feedbackTypeRename=$event}}},[_c("div",{staticClass:"height150"},[_c("el-form",{ref:"editNameForm",attrs:{model:_vm.renameForm},nativeOn:{submit:function($event){return $event.preventDefault(),_vm.typeRenamed.apply(null,arguments)}}},[_c("el-form-item",{attrs:{required:!0,prop:"feedbackTypeName"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Please input name",autofocus:!0},model:{value:_vm.renameForm.feedbackTypeName,callback:function($$v){_vm.$set(_vm.renameForm,"feedbackTypeName",$$v)},expression:"renameForm.feedbackTypeName"}})],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.feedbackTypeRename=!1}}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.typeRenamed}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1)]):_vm._e(),_vm.canAddCatalogItem?_c("CatalogItemCreation",{attrs:{isEdit:_vm.isEdit,serviceCatalogItem:_vm.serviceCatalogItem,canAddCatalogItem:_vm.canAddCatalogItem,catalogGroups:_vm.catalogGroups,cataLogModulesList:_vm.cataLogModulesList},on:{"update:canAddCatalogItem":function($event){_vm.canAddCatalogItem=$event},"update:can-add-catalog-item":function($event){_vm.canAddCatalogItem=$event},"update:cataLogModulesList":function($event){_vm.cataLogModulesList=$event},"update:cata-log-modules-list":function($event){_vm.cataLogModulesList=$event},setActiveCatalog:_vm.setActiveCatalog}}):_vm._e()],1)},FeedbackTypeListvue_type_template_id_b683ab1e_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FeedbackTypeFormvue_type_template_id_72ecdba9_render=(__webpack_require__(821057),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(425728),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(670560),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container scale-up-center",attrs:{title:_vm.$t("common._common.feedback_types"),"append-to-body":!1,visible:_vm.drawerVisibility,"destroy-on-close":!0,width:_vm.isEdit?"40%":"30%"},on:{"update:visible":function($event){_vm.drawerVisibility=$event},close:function($event){return _vm.$emit("update:drawerVisibility",!1)}}},[_c("div",{staticClass:"pB100 max-height500"},[_c("el-form",{ref:"feedbackkioskForm",attrs:{"label-position":_vm.labelPosition,rules:_vm.rules,model:_vm.formModel},nativeOn:{submit:function($event){return $event.preventDefault(),_vm.saveRecord.apply(null,arguments)}}},[_c("el-form-item",{staticClass:"mb15",attrs:{prop:"name",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{label:"Name",placeholder:_vm.$t("common._common.enter_name")},model:{value:_vm.formModel.name,callback:function($$v){_vm.$set(_vm.formModel,"name",$$v)},expression:"formModel.name"}})],1),_vm.isEdit?_c("el-form-item",{staticClass:"mB10",attrs:{label:"",prop:"catalogs"}},[_vm.isServiceCatalogsLoading?_c("div",{staticClass:"flex-middle height400 m10 fc-agent-empty-state"},[_c("spinner",{attrs:{show:_vm.isServiceCatalogsLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.serviceCatalogs)&&!_vm.isServiceCatalogsLoading?_c("div",{staticClass:"flex-middle height400 justify-content-center flex-direction-column m10 fc-agent-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"q-item-label nowo-label"},[_vm._v("No Catalogs available")])],1):_c("div",[_vm.loading||_vm.$validation.isEmpty(_vm.serviceCatalogs)?_vm._e():_c("el-table",{ref:"elTable",staticClass:"feedbacktype-form-table",attrs:{data:_vm.serviceCatalogs,height:"350",fit:!0},on:{"selection-change":_vm.selectCatalogs}},[_c("el-table-column",{attrs:{type:"selection",width:"60"}}),_c("el-table-column",{attrs:{label:"Name"},scopedSlots:_vm._u([{key:"default",fn:function(catalog){return[_c("div",{staticClass:"flex-middle"},[catalog.row.photoUrl?_c("div",{staticClass:"pR10"},[_c("img",{staticClass:"feedback-form-category-img",attrs:{src:catalog.row.photoUrl,width:"30",height:"30"}})]):_c("div",{staticClass:"pR10"},[_c("img",{staticClass:"feedback-form-category-img",attrs:{src:__webpack_require__(158357),width:"30",height:"30"}})]),_vm._v(" "+_vm._s(catalog.row.name)+" ")])]}}],null,!1,814164256)}),_c("el-table-column",{attrs:{prop:"category",label:"category",width:"180"},scopedSlots:_vm._u([{key:"default",fn:function(catalog){return[_vm._v(" "+_vm._s(catalog.row.group.name)+" ")]}}],null,!1,1837256267)})],1)],1)]):_vm._e()],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.$emit("update:drawerVisibility",!1)}}},[_vm._v(_vm._s(_vm.$t("common.roles.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.isSaving,type:"primary"},on:{click:_vm.saveRecord}},[_vm._v(_vm._s(_vm.$t("common._common.confirm")))])],1)])}),FeedbackTypeFormvue_type_template_id_72ecdba9_staticRenderFns=[],utility_methods=(__webpack_require__(947522),__webpack_require__(773258)),FeedbackTypeFormvue_type_script_lang_js={props:["drawerVisibility","isEdit","kioskContext"],components:{},data:function(){return{serviceCatalogs:[],loading:!1,catalog:null,formModel:{name:""},labelPosition:"left",isServiceCatalogsLoading:!0,isSaving:!1,rules:{name:[{required:!0,trigger:"blur"}]},selectedCatlogs:[],selectedCatalogList:[],selectAll:!1}},mounted:function(){var _this=this;this.loadSericeCatalogs().then((function(){_this.isEdit&&_this.setFormModel(_this.kioskContext)}))},computed:{},methods:{setFormModel:function(kioskContext){var _this2=this;
//edit mode , initilize values
this.formModel.name=kioskContext.name,kioskContext.catalogs.forEach((function(catalog){
//need to preset selection with service catalog object
_this2.$refs["elTable"].toggleRowSelection(_this2.serviceCatalogs.find((function(e){return e.id==catalog.id})),!0)}))},selectCatalogs:function(selectedCa){this.formModel.catalogs=selectedCa},saveRecord:function(){var _this3=this;this.$refs["feedbackkioskForm"].validate((function(valid){if(valid){_this3.isSaving=!0;var formObj=(0,utility_methods/* deepCloneObject */.kh)(_this3.formModel);_this3.$emit("save",formObj)}}))},loadSericeCatalogs:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var resp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this4.$http.get("v2/servicecatalog/list");case 2:resp=_context.sent,_this4.serviceCatalogs=resp.data.result.serviceCatalogs,_this4.isServiceCatalogsLoading=!1;case 5:case"end":return _context.stop()}}),_callee)})))()}}},setup_FeedbackTypeFormvue_type_script_lang_js=FeedbackTypeFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_FeedbackTypeFormvue_type_script_lang_js,FeedbackTypeFormvue_type_template_id_72ecdba9_render,FeedbackTypeFormvue_type_template_id_72ecdba9_staticRenderFns,!1,null,null,null)
/* harmony default export */,FeedbackTypeForm=component.exports,FSearch=__webpack_require__(947748),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),CatalogItemCreation=__webpack_require__(544843),FeedbackTypeListvue_type_script_lang_js={title:function(){return"Feedback Types"},components:{feedbackTypeForm:FeedbackTypeForm,FSearch:FSearch/* default */.Z,draggable:vuedraggable_umd_default(),CatalogItemCreation:CatalogItemCreation/* default */.Z},data:function(){return{renameForm:{feedbackTypeName:null},nameValidation:{name:[{required:!0,message:"Name cannot be empty",trigger:"blur"}]},isEdit:!1,
//form mode , edit or new
loading:!0,feedbackTypes:[],showForm:!1,feedbackType:null,showCatalogDialog:!1,catalogList:[],input:"",selectedFeedbackType:null,EditselectedType:!1,selectedTypename:!0,feedbackTypeRename:!1,saving:!1,canAddCatalogItem:!1,serviceCatalogItem:null,catalogGroups:[{id:-1,name:"Complaint"}],cataLogModulesList:[]}},created:function(){var _this=this;this.loadFeedbackTypeList().then((function(){_this.selectedFeedbackType=_this.feedbackTypes[0];//first time  ,select first item
}))},methods:{loadCatalogModulesList:function(){var _this2=this,url="v2/servicecatalog/modules";this.$set(this,"isModulesLoading",!0);var promise=this.$http.get(url).then((function(_ref){var _ref$data=_ref.data,message=_ref$data.message,responseCode=_ref$data.responseCode,result=_ref$data.result;if(0!==responseCode)throw new Error(message);var modules=result.modules;_this2.modulesList=modules})).catch((function(_ref2){var message=_ref2.message;_this2.$message.error(message)}));return Promise.all([promise]).finally((function(){return _this2.$set(_this2,"isModulesLoading",!1)}))},openCatalogDialog:function(feedbackType){this.catalogList=feedbackType.catalogs,this.showCatalogDialog=!0},loadFeedbackTypeList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var resp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this3.$http.get("v2/feedbackType/list",{fillCatalogForm:!0});case 2:resp=_context.sent,_this3.feedbackTypes=resp.data.result.feedbackTypes,_this3.loading=!1;
// this.selectedFeedbackType=this.feedbackTypes.find(e=>e.id==this.selectedFeedbackType.id)
//mainting selection if catalogs edited in a type
case 5:case"end":return _context.stop()}}),_callee)})))()},openAddFeedbackDialog:function(){this.isEdit=!1,this.showForm=!0},handleFormSubmit:function(formModel){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var resp,newType;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!_this4.isEdit){_context2.next=5;break}formModel.id=_this4.selectedFeedbackType.id,_this4.$http.post("v2/feedbackType/update",{feedbackType:formModel}).then((function(){_this4.showForm=!1,
//maintain current feedback type selection but refresh catalog list
_this4.refetchCurrentType()})),_context2.next=11;break;case 5:return _context2.next=7,_this4.$http.post("v2/feedbackType/add",{feedbackType:formModel});case 7:resp=_context2.sent,
//go to newly added type after selecting
newType=resp.data.result.feedbackType,_this4.showForm=!1,_this4.loadFeedbackTypeList().then((function(){_this4.selectedFeedbackType=_this4.feedbackTypes.find((function(e){return e.id==newType.id}))}));case 11:case"end":return _context2.stop()}}),_callee2)})))()},refetchCurrentType:function(){var _this5=this,currentlySelectedTypeId=this.selectedFeedbackType.id;this.loadFeedbackTypeList().then((function(){_this5.selectedFeedbackType=_this5.feedbackTypes.find((function(e){return e.id==currentlySelectedTypeId}))}))},updateFeedbackType:function(){this.$http.post("v2/feedbackType/update",{feedbackType:this.selectedFeedbackType})},feedbackDelete:function(index,id){var _this6=this,url="v2/servicecatalog/delete",data={id:id};this.$http.post(url,data).then((function(_ref3){var _ref3$data=_ref3.data,message=_ref3$data.message,responseCode=_ref3$data.responseCode;if(0!==responseCode)throw new Error(message);_this6.selectedFeedbackType.catalogs.splice(index,1)})).catch((function(_ref4){var message=_ref4.message;_this6.$message.error(message)}))},onOptionsSelect:function(command,feedbackType,index){"edit"===command&&(this.isEdit=!0,this.feedbackType=feedbackType,this.showForm=!0)},editCatalog:function(item){this.serviceCatalogItem=this.$helpers.cloneObject(item),this.serviceCatalogItem.complaintType=!0,this.serviceCatalogItem.groupId=-1,this.isEdit=!0,this.canAddCatalogItem=!0},showRenameFeedbackType:function(){this.feedbackTypeRename=!0,this.renameForm.feedbackTypeName=this.selectedFeedbackType.name},typeRenamed:function(){var _this7=this;this.$refs["editNameForm"].validate((function(valid){valid&&(_this7.updateFeedbackType(),_this7.selectedFeedbackType.name=_this7.renameForm.feedbackTypeName,_this7.feedbackTypeRename=!1)}))},addCatalogForm:function(){this.initCatalog(),this.canAddCatalogItem=!0,this.isEdit=!1},initCatalog:function(){this.serviceCatalogItem={name:null,description:null,complaintType:!0,groupId:-1}},setActiveCatalog:function(serviceCatalog){this.isEdit?this.refetchCurrentType():(this.selectedFeedbackType.catalogs||(this.selectedFeedbackType.catalogs=[]),this.selectedFeedbackType.catalogs.push(serviceCatalog),this.handleFormSubmit(this.selectedFeedbackType))}}},setup_FeedbackTypeListvue_type_script_lang_js=FeedbackTypeListvue_type_script_lang_js,FeedbackTypeList_component=(0,componentNormalizer/* default */.Z)(setup_FeedbackTypeListvue_type_script_lang_js,FeedbackTypeListvue_type_template_id_b683ab1e_render,FeedbackTypeListvue_type_template_id_b683ab1e_staticRenderFns,!1,null,null,null)
/* harmony default export */,FeedbackTypeList=FeedbackTypeList_component.exports,FeedbackDevicevue_type_template_id_1a1f1119_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{},[_vm.loading?_c("div",{staticClass:"visitor-hor-card scale-up-left"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):0===_vm.devices.length?_c("div",{staticClass:"text-center fc-empty-white flex-middle justify-center flex-col"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/approval",iconClass:"icon icon-xxxlg vertical-middle mR10"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_empty_state.feedbackEmpty"))+" ")])],1):_c("div",{staticClass:"mT20 feedback-device-table"},[_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.devices,height:"auto"}},[_c("el-table-column",{attrs:{label:_vm.$t("common.wo_report.device_name"),width:"230"},scopedSlots:_vm._u([{key:"default",fn:function(device){return[_c("div",{staticClass:"agent-active-section flex-middle",staticStyle:{"align-items":"flex-start"}},[_c("AgentActivityDot",{key:device.row.name,attrs:{state:device.row.isDeviceConnected,status:device.row.isDeviceConnected}}),_c("div",{staticClass:"mL10"},[_c("div",{staticClass:"label-txt3-14"},[_vm._v(" "+_vm._s(device.row.name)+" ")]),_c("div",{staticClass:"label-txt3-13 flex-middle"},[_c("span",{staticClass:"fc-grey2 f13 pR5"},[_vm._v(_vm._s(_vm.$t("setup.users_management.status"))+": ")]),_vm._v(" "+_vm._s(device.row.isDeviceConnected?"Connected":"Disconnected")+" ")])])],1)]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("common._common.feedback_types"),width:"170"},scopedSlots:_vm._u([{key:"default",fn:function(device){return[_vm._v(" "+_vm._s(device.row.feedbackType.name)+" ")]}}])}),_c("el-table-column",{attrs:{label:_vm.$t("common.header.associated_types"),width:"160"},scopedSlots:_vm._u([{key:"default",fn:function(device){return[_c("div",{staticClass:"label-txt3-14"},[_c("img",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                placement: 'top',\n                animation: 'shift-away',\n                arrow: true,\n              }"}],staticStyle:{height:"11px",width:"12px","margin-right":"3px"},attrs:{src:__webpack_require__(572902),title:"Device Location"}}),_vm._v(" "+_vm._s(device.row.associatedResource?device.row.associatedResource.name:"---")+" ")])]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{width:"250"},scopedSlots:_vm._u([{key:"default",fn:function(device){return[_c("div",{staticClass:"flex-middle"},[device.row.isDeviceConnected?[_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none visibility-hide-actions f11",attrs:{type:"primary"},on:{click:function($event){return _vm.onOptionsSelect("disconnect",device.row)}}},[_vm._v(_vm._s(_vm.$t("setup.devices.disconnect")))])]:[_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none visibility-hide-actions f11",attrs:{type:"primary"},on:{click:function($event){return _vm.onOptionsSelect("connect",device.row)}}},[_vm._v(_vm._s(_vm.$t("common.header.connect")))])]],2)]}}])}),_c("el-table-column",{attrs:{width:"100",fixed:"right"},scopedSlots:_vm._u([{key:"default",fn:function(device){return[_c("div",{on:{click:function($event){$event.stopPropagation()}}},[_c("el-dropdown",{attrs:{slot:"reference",trigger:"click"},on:{command:function($event){return _vm.onOptionsSelect($event,device.row)}},slot:"reference"},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more controller-more"})]),_c("el-dropdown-menu",{staticClass:"controller-dropdown-item",attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]),_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])],1)],1)],1)]}}])})],1)],1),_vm.showForm?_c("feedback-kiosk-form",{attrs:{isEdit:_vm.isEdit,kioskContext:_vm.device,drawerVisibility:_vm.showForm},on:{"update:drawerVisibility":function($event){_vm.showForm=$event},"update:drawer-visibility":function($event){_vm.showForm=$event},save:_vm.handleFormSubmit}}):_vm._e(),_c("connect-device",{attrs:{title:_vm.showConnectDialogTitle,visibility:_vm.showConnectPopover,device:_vm.device},on:{connected:_vm.loadDevices,"update:visibility":function($event){_vm.showConnectPopover=$event}}},[_vm._v(" Access "),_c("b",[_vm._v("Facilio Feedback")]),_vm._v(" app on your tablet/phone to obtain the 6 digit passcode ")])],1)},FeedbackDevicevue_type_template_id_1a1f1119_staticRenderFns=[],ConnectDevice=__webpack_require__(415338),AgentActivityDot=__webpack_require__(599561),FeedbackKioskFormvue_type_template_id_6b46affd_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-drawer",{staticClass:"fc-drawer-hide-header",attrs:{"append-to-body":!1,visible:_vm.drawerVisibility,direction:"rtl",size:"40%","destroy-on-close":!0},on:{"update:visible":function($event){_vm.drawerVisibility=$event},close:function($event){return _vm.$emit("update:drawerVisibility",!1)}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("common._common.feedback_kiosk"))+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-form",{ref:"feedbackkioskForm",attrs:{rules:_vm.rules,model:_vm.formModel}},[_c("el-form-item",{staticClass:"mb15",attrs:{label:_vm.$t("common._common.name"),prop:"name",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},model:{value:_vm.formModel.name,callback:function($$v){_vm.$set(_vm.formModel,"name",$$v)},expression:"formModel.name"}})],1),_c("el-form-item",{staticClass:"mb15",attrs:{label:_vm.$t("common.roles.description"),prop:"description"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_desc")},model:{value:_vm.formModel.description,callback:function($$v){_vm.$set(_vm.formModel,"description",$$v)},expression:"formModel.description"}})],1),_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("common._common.feedback_types"),prop:"feedbackTypeId",required:!0}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("common.wo_report.select_feedback_types")},model:{value:_vm.formModel.feedbackTypeId,callback:function($$v){_vm.$set(_vm.formModel,"feedbackTypeId",$$v)},expression:"formModel.feedbackTypeId"}},_vm._l(_vm.feedbackTypes,(function(feedbackType){return _c("el-option",{key:feedbackType.id,attrs:{label:feedbackType.name,value:feedbackType.id}})})),1)],1),_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("setup.users_management.site"),prop:"siteId",required:!0}},[_c("Lookup",{attrs:{field:_vm.fields.site,hideLookupIcon:!0},on:{recordSelected:_vm.setSelectedValue,showLookupWizard:_vm.showLookupWizardSite},model:{value:_vm.formModel.siteId,callback:function($$v){_vm.$set(_vm.formModel,"siteId",$$v)},expression:"formModel.siteId"}})],1),_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("common.header.associated_space"),prop:"associatedResource",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.spaceDisplayName,_vm.chooserVisibility=!0}},model:{value:_vm.spaceDisplayName,callback:function($$v){_vm.spaceDisplayName=$$v},expression:"spaceDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0}},slot:"suffix"})]),_c("WoSpaceAssetChooser",{attrs:{visibility:_vm.chooserVisibility,query:_vm.quickSearchQuery,appendToBody:!1,filter:_vm.filter,picktype:"space"},on:{associate:_vm.setSpace,"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.$emit("update:drawerVisibility",!1)}}},[_vm._v(_vm._s(_vm.$t("common.roles.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.isSaving,type:"primary"},on:{click:_vm.saveRecord}},[_vm._v(_vm._s(_vm.$t("common._common.confirm")))])],1)])},FeedbackKioskFormvue_type_template_id_6b46affd_staticRenderFns=[],FSiteField=(__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(890006)),validation=__webpack_require__(990260),SpaceAssetChooser=__webpack_require__(372587),ui_forms=__webpack_require__(141323),fields={site:{isDataLoading:!1,options:[],lookupModuleName:"site",field:{lookupModule:{name:"site",displayName:"Sites"}},multiple:!1,additionalParams:{orderBy:"spaceType",orderType:"asc"}}},FeedbackKioskFormvue_type_script_lang_js={props:["drawerVisibility","isEdit","kioskContext"],components:{Lookup:ui_forms/* Lookup */.tY,FSiteField:FSiteField/* default */.Z,WoSpaceAssetChooser:SpaceAssetChooser/* default */.Z},data:function(){var _this=this;return{fields:fields,formModel:{name:"",description:"",feedbackTypeId:null,siteId:null,associatedResource:{id:null}},chooserVisibility:!1,spaceDisplayName:"",quickSearchQuery:"",filter:{site:null},feedbackTypes:[],isFeedbackTypeLoading:!0,isSaving:!1,rules:{name:[{required:!0,message:this.$t("common._common.please_input_kiosk_name"),trigger:"blur"}],feedbackTypeId:[{required:!0,message:this.$t("common._common.please_choose_feedback_type"),trigger:"change"}],siteId:[{required:!0,message:this.$t("common._common.please_choose_site"),trigger:"change"}],associatedResource:[{validator:function(rule,value,callback){(0,validation/* areValuesEmpty */.sD)(value)?callback(new Error(_this.$t("common._common.please_choose_space"))):callback()},
// required: true,
message:this.$t("common._common.please_choose_space"),trigger:"change"}]}}},created:function(){this.loadFeedbackTypes(),this.isEdit&&this.setFormModel(this.kioskContext),this.$store.dispatch("loadSite")},methods:{setFormModel:function(kioskContext){var _this2=this;Object.keys(this.formModel).forEach((function(key){(0,validation/* isEmpty */.xb)(kioskContext[key])||_this2.$set(_this2.formModel,key,kioskContext[key])})),this.formModel.associatedResource.id&&(this.spaceDisplayName=this.formModel.associatedResource.name),this.filter.site=this.formModel.siteId},showLookupWizardSite:function(field,canShow){canShow=!1,this.$set(this,"selectedLookupField",field),this.$set(this,"canShowLookupWizardSite",canShow)},setSelectedValue:function(selectedValues,field){},setSpace:function(space){this.chooserVisibility=!1,this.formModel.associatedResource.id=space.id,this.spaceDisplayName=space.name},siteSwitched:function(){this.formModel.associatedResource.id=null,this.quickSearchQuery="",this.spaceDisplayName=""},saveRecord:function(){var _this3=this;this.$refs["feedbackkioskForm"].validate((function(valid){valid&&(_this3.isSaving=!0,_this3.$emit("save",{formModel:_this3.formModel}))}))},loadFeedbackTypes:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var resp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this4.$http.get("v2/feedbackType/list");case 2:resp=_context.sent,_this4.feedbackTypes=resp.data.result.feedbackTypes,_this4.isFeedbackTypeLoading=!1;case 5:case"end":return _context.stop()}}),_callee)})))()}}},setup_FeedbackKioskFormvue_type_script_lang_js=FeedbackKioskFormvue_type_script_lang_js,FeedbackKioskForm_component=(0,componentNormalizer/* default */.Z)(setup_FeedbackKioskFormvue_type_script_lang_js,FeedbackKioskFormvue_type_template_id_6b46affd_render,FeedbackKioskFormvue_type_template_id_6b46affd_staticRenderFns,!1,null,null,null)
/* harmony default export */,FeedbackKioskForm=FeedbackKioskForm_component.exports,FeedbackDevicevue_type_script_lang_js={title:function(){return this.$t("common._common.devices")},components:{AgentActivityDot:AgentActivityDot/* default */.Z,feedbackKioskForm:FeedbackKioskForm,connectDevice:ConnectDevice/* default */.Z},data:function(){return{isEdit:!1,loading:!0,devices:[],showForm:!1,buildings:{},device:null,metaInfo:null,showConnectPopover:!1,showConnectDialogTitle:null}},created:function(){var _this=this;this.$util.loadModuleMeta("devices").then((function(meta){_this.metaInfo=meta,_this.loadDevices()}))},mounted:function(){},methods:{openAddDeviceDialog:function(){this.isEdit=!1,this.showForm=!0},handleFormSubmit:function(e){var _this2=this;if(this.isEdit){var kiosk=e.formModel;kiosk.id=this.device.id,this.$http.post("v2/feedbackKiosk/update",{feedbackKiosk:kiosk}).then((function(){_this2.showForm=!1,_this2.loadDevices()}))}else this.$http.post("v2/feedbackKiosk/add",{feedbackKiosk:e.formModel}).then((function(){_this2.showForm=!1,_this2.loadDevices()}))},loadDevices:function(){var _this3=this;this.loading=!0,this.$http.get("/v2/feedbackKiosk/list").then((function(response){_this3.loading=!1,_this3.devices=response.data.result.feedbackKiosks?response.data.result.feedbackKiosks:[]})).catch((function(){_this3.devices=[],_this3.loading=!1}))},onOptionsSelect:function(command,device){var _this4=this;"edit"===command?(this.device=device,this.isEdit=!0,this.showForm=!0):"delete"===command?this.$dialog.confirm({title:this.$t("common.wo_report.delete_device_title"),message:this.$t("common.wo_report.delete_device_message"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then((function(value){value&&_this4.deleteDevice(device.id)})):"connect"===command?(this.showConnectPopover=!0,this.showConnectDialogTitle="Connect Device",this.device=device):"reconnect"===command?(this.showConnectPopover=!0,this.showConnectDialogTitle="Reconnect Device",this.device=device):"disconnect"==command&&this.$dialog.confirm({title:this.$t("common.wo_report.disconnect_device_title"),message:this.$t("common.wo_report.disconnect_device_message"),rbDanger:!0,rbLabel:this.$t("setup.devices.disconnect")}).then((function(value){value&&_this4.disconnectDevice(device.id)}))},disconnectDevice:function(deviceId){var _this5=this;this.$http.post("v2/devices/disconnect",{device:{id:deviceId}}).then((function(){_this5.loadDevices()})).catch()},deleteDevice:function(deviceId){var _this6=this;this.$http.post("v2/devices/delete",{device:{id:deviceId}}).then((function(){_this6.loadDevices()})).catch()}}},setup_FeedbackDevicevue_type_script_lang_js=FeedbackDevicevue_type_script_lang_js,FeedbackDevice_component=(0,componentNormalizer/* default */.Z)(setup_FeedbackDevicevue_type_script_lang_js,FeedbackDevicevue_type_template_id_1a1f1119_render,FeedbackDevicevue_type_template_id_1a1f1119_staticRenderFns,!1,null,null,null)
/* harmony default export */,FeedbackDevice=FeedbackDevice_component.exports,FeedbackSettingsvue_type_script_lang_js={created:function(){},data:function(){return{activeName:"devices"}},components:{feedbackTypeList:FeedbackTypeList,feedbackDevice:FeedbackDevice},methods:{}},setup_FeedbackSettingsvue_type_script_lang_js=FeedbackSettingsvue_type_script_lang_js,FeedbackSettings_component=(0,componentNormalizer/* default */.Z)(setup_FeedbackSettingsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FeedbackSettings=FeedbackSettings_component.exports},
/***/599561:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AgentActivityDot}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/agent/AgentActivityDot.vue?vue&type=template&id=4a6535d4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:["dot-10 mT3",_vm.activityClass]})},staticRenderFns=[],AgentActivityDotvue_type_script_lang_js={props:["state","status"],computed:{activityClass:function(){return{"color-active":!!this.state&&this.status,"color-warning":!!this.state&&!this.status,"color-inactive":!this.state}}}},agent_AgentActivityDotvue_type_script_lang_js=AgentActivityDotvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(agent_AgentActivityDotvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AgentActivityDot=component.exports},
/***/544843:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CatalogItemCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/catalogs/CatalogItemCreation.vue?vue&type=template&id=a2e12598
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{title:_vm.title,visible:_vm.canShowDialog,fullscreen:!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog50 setup-dialog catalog-item-creation","append-to-body":!0,"before-close":_vm.beforeClose},on:{"update:visible":function($event){_vm.canShowDialog=$event}}},[_c("ErrorBanner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorMessage=$event},"update:error-message":function($event){_vm.errorMessage=$event}}}),_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.title)+" ")])])]),_c("div",{staticClass:"f-webform-container catalog-creation pL40 pR40 pT10"},[_c("el-form",{ref:"newServiceCatalogItem",attrs:{rules:_vm.rules,model:_vm.serviceCatalogItem}},[_c("div",{staticClass:"d-flex"},[_c("FFileUpload",{attrs:{imgContentUrl:_vm.serviceCatalogItem.photoUrl,isFileType:!1,showWebCamPhoto:!1,additionalFileFormat:["image/svg+xml"],addImgFile:_vm.addImgFile},on:{"update:imgContentUrl":function($event){return _vm.$set(_vm.serviceCatalogItem,"photoUrl",$event)},"update:img-content-url":function($event){return _vm.$set(_vm.serviceCatalogItem,"photoUrl",$event)},removeImgFile:_vm.removeImgFile}},[_c("div",{staticClass:"d-flex flex-direction-column",attrs:{slot:"placeHolderSlot"},slot:"placeHolderSlot"},[_c("inline-svg",{staticClass:"folder-icon self-center",attrs:{src:"svgs/photo",iconClass:"icon icon-xxl"}}),_c("div",{staticClass:"self-center"},[_c("p",{staticClass:"upload-img-text"},[_vm._v(" "+_vm._s(_vm.$t("common._common.upload_logo"))+" ")])])],1)]),_c("div",{staticClass:"name-section"},[_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("common._common.name"),prop:"name",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},model:{value:_vm.serviceCatalogItem.name,callback:function($$v){_vm.$set(_vm.serviceCatalogItem,"name",$$v)},expression:"serviceCatalogItem.name"}})],1),_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("servicecatalog.setup.category"),prop:"groupId",required:!_vm.serviceCatalogItem.complaintType}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("servicecatalog.setup.select_category"),disabled:-1===_vm.serviceCatalogItem.groupId},model:{value:_vm.serviceCatalogItem.groupId,callback:function($$v){_vm.$set(_vm.serviceCatalogItem,"groupId",$$v)},expression:"serviceCatalogItem.groupId"}},_vm._l(_vm.catalogGroups,(function(group){return _c("el-option",{key:group.id,attrs:{label:group.name,value:group.id}})})),1)],1)],1)],1),_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("common.wo_report.report_description"),prop:"description"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},placeholder:_vm.$t("common._common.enter_desc")},model:{value:_vm.serviceCatalogItem.description,callback:function($$v){_vm.$set(_vm.serviceCatalogItem,"description",$$v)},expression:"serviceCatalogItem.description"}})],1),_c("el-form-item",{staticClass:"mB10 d-flex flex-direction-column catalog-type",attrs:{label:_vm.$t("asset.assets.asset_type"),prop:"type"}},[_c("el-radio-group",{model:{value:_vm.serviceCatalogItem.type,callback:function($$v){_vm.$set(_vm.serviceCatalogItem,"type",$$v)},expression:"serviceCatalogItem.type"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:1}},[_vm._v(_vm._s(_vm.$t("common._common.form")))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:2}},[_vm._v(_vm._s(_vm.$t("servicecatalog.setup.external_url")))])],1)],1),_vm.canShowUrlBox?_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("servicecatalog.setup.external_url"),prop:"externalURL",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("servicecatalog.setup.enter_external_url")},model:{value:_vm.serviceCatalogItem.externalURL,callback:function($$v){_vm.$set(_vm.serviceCatalogItem,"externalURL",$$v)},expression:"serviceCatalogItem.externalURL"}})],1):_vm._e(),_c("div",{staticClass:"sub-header"},[_vm._v(" "+_vm._s(_vm.$t("servicecatalog.setup.moduledetails"))+" ")]),_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("servicecatalog.setup.module_name"),prop:"moduleId"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("servicecatalog.setup.selectmodules"),loading:_vm.isModulesLoading},model:{value:_vm.serviceCatalogItem.moduleId,callback:function($$v){_vm.$set(_vm.serviceCatalogItem,"moduleId",$$v)},expression:"serviceCatalogItem.moduleId"}},_vm._l(_vm.modulesList,(function(module,index){return _c("el-option",{key:index,attrs:{label:module.displayName,value:module.moduleId}})})),1)],1),_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("servicecatalog.setup.forms"),prop:"formName"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("servicecatalog.setup.selectforms"),loading:_vm.isFormsLoading},model:{value:_vm.serviceCatalogItem.formName,callback:function($$v){_vm.$set(_vm.serviceCatalogItem,"formName",$$v)},expression:"serviceCatalogItem.formName"}},_vm._l(_vm.formsList,(function(form,index){return _c("el-option",{key:index,attrs:{label:form.displayName,value:form.name}})})),1)],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.isSaving,type:"primary"},on:{click:_vm.saveRecord}},[_vm._v(_vm._s(_vm.$t("common._common.confirm")))])],1)],1)},staticRenderFns=[],ErrorBanner=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(821057),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(297157)),FFileUpload=__webpack_require__(794948),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),utility_methods=__webpack_require__(555005),constant=__webpack_require__(354754),CatalogItemCreationvue_type_script_lang_js={props:["canAddCatalogItem","isEdit","serviceCatalogItem","catalogGroups","cataLogModulesList","appId"],components:{ErrorBanner:ErrorBanner/* default */.Z,FFileUpload:FFileUpload/* default */.Z},data:function(){return{catalogLogo:null,formsList:[],rules:{name:[{required:!0,message:"Please enter name",trigger:"blur"}],groupId:[{required:!0,message:"Please select a category",trigger:"change"}],description:[{required:!0,message:"Please enter description",trigger:"blur"}],moduleId:[{required:!0,message:"Please select a module",trigger:"change"}],formName:[{required:!0,message:"Please select a form",trigger:"change"}],externalURL:[{required:!0,message:"Please enter the external url",trigger:"blur"}]},error:"",errorMessage:"",isSaving:!1,isModulesLoading:!1,isFormsLoading:!1}},computed:{canShowDialog:{get:function(){return this.canAddCatalogItem},set:function(value){this.$emit("update:canAddCatalogItem",value)}},modulesList:{get:function(){return this.cataLogModulesList},set:function(value){this.$emit("update:cataLogModulesList",value)}},title:function(){var isEdit=this.isEdit,title=this.$t("servicecatalog.setup.item");return isEdit?"Edit ".concat(title):"New ".concat(title)},canShowUrlBox:function(){var serviceCatalogItem=this.serviceCatalogItem,_ref=serviceCatalogItem||{},type=_ref.type;return 2===type}},watch:{"serviceCatalogItem.moduleId":{handler:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.loadFormsList()}},"serviceCatalogItem.type":{handler:function(newVal){1===newVal&&this.$set(this.serviceCatalogItem,"externalURL","")}}},created:function(){var _this=this,modulesList=this.modulesList,isEdit=this.isEdit;(0,validation/* isEmpty */.xb)(modulesList)?this.loadCatalogModulesList().then((function(){isEdit&&_this.setCatalogFormData()})):isEdit&&this.setCatalogFormData(),isEdit||this.$set(this.serviceCatalogItem,"type",1)},methods:{setFormValid:function(){this.error=!1,this.errorMessage=""},setFormInvalid:function(msg){this.error=!0,this.errorMessage=msg},closeDialogBox:function(){this.canShowDialog=!1},beforeClose:function(done){this.$set(this,"errMsgVal",null),this.$set(this,"errVal",!1),done()},addImgFile:function(file){this.$set(this,"catalogLogo",file)},removeImgFile:function(){this.$set(this,"catalogLogo",null),this.$set(this.serviceCatalogItem,"photoId",null)},loadCatalogModulesList:function(){var _this2=this,url="v2/servicecatalog/modules";this.$set(this,"isModulesLoading",!0);var promise=this.$http.get(url).then((function(_ref2){var _ref2$data=_ref2.data,message=_ref2$data.message,responseCode=_ref2$data.responseCode,result=_ref2$data.result;if(0!==responseCode)throw new Error(message);var modules=result.modules,filteredModules=modules.filter((function(module){return!(0,validation/* isEmpty */.xb)(module)}));_this2.$set(_this2,"modulesList",filteredModules)})).catch((function(_ref3){var message=_ref3.message;_this2.$message.error(message)}));return Promise.all([promise]).finally((function(){return _this2.$set(_this2,"isModulesLoading",!1)}))},loadFormsList:function(){var _this3=this,serviceCatalogItem=this.serviceCatalogItem,appId=this.appId,moduleId=serviceCatalogItem.moduleId,selectedModuleName=this.getSelectedModuleName(moduleId);if(!(0,validation/* isEmpty */.xb)(selectedModuleName)){var url="v2/forms?moduleName=".concat(selectedModuleName);(0,validation/* isEmpty */.xb)(appId)||(url+="&appId=".concat(appId)),this.$set(this,"isFormsLoading",!0);var promise=this.$http.get(url).then((function(_ref4){var _ref4$data=_ref4.data,message=_ref4$data.message,responseCode=_ref4$data.responseCode,result=_ref4$data.result;if(0!==responseCode)throw new Error(message);var forms=result.forms;_this3.$set(_this3,"formsList",forms)})).catch((function(_ref5){var message=_ref5.message;_this3.$message.error(message)}));return Promise.all([promise]).finally((function(){return _this3.$set(_this3,"isFormsLoading",!1)}))}},getSelectedModuleName:function(moduleId){var modulesList=this.modulesList;return(modulesList.find((function(module){return module.moduleId===moduleId}))||{}).name},getSelectedForm:function(propValue,key){var formsList=this.formsList;return formsList.find((function(form){return form[key]===propValue}))||{}},setCatalogFormData:function(){var _this4=this,serviceCatalogItem=this.serviceCatalogItem,formId=serviceCatalogItem.formId;this.loadFormsList().then((function(){var selectedForm=_this4.getSelectedForm(formId,"id")||{};_this4.$set(_this4.serviceCatalogItem,"formName",selectedForm.name)}))},saveRecord:function(){var _this5=this;this.$refs["newServiceCatalogItem"].validate((function(valid){if(valid){var serviceCatalogItem=_this5.serviceCatalogItem,formName=serviceCatalogItem.formName,selectedForm=_this5.getSelectedForm(formName,"name");if(!(0,validation/* isEmpty */.xb)(selectedForm)){var id=selectedForm.id;(0,validation/* isEmpty */.xb)(id)?_this5.addNewForm(serviceCatalogItem,selectedForm):(_this5.$set(serviceCatalogItem,"formId",id),_this5.saveCatalogItemRecord(serviceCatalogItem))}}}))},addNewForm:function(serviceCatalogItem,selectedForm){var _this6=this,moduleId=serviceCatalogItem.moduleId,description=selectedForm.description,displayName=selectedForm.displayName,appLinkName=selectedForm.appLinkName,name=selectedForm.name,url="v2/forms/add",data={moduleName:this.getSelectedModuleName(moduleId),form:{description:description,displayName:displayName,appLinkName:appLinkName,name:name}};this.$http.post(url,data).then((function(_ref6){var _ref6$data=_ref6.data,message=_ref6$data.message,responseCode=_ref6$data.responseCode,result=_ref6$data.result;if(0!==responseCode)throw new Error(message);var _ref7=result||{},id=_ref7.form.id;_this6.$set(serviceCatalogItem,"formId",id),_this6.saveCatalogItemRecord(serviceCatalogItem)})).catch((function(_ref8){var message=_ref8.message;_this6.$message.error(message)}))},saveCatalogItemRecord:function(serviceCatalogItem){var _this7=this,catalogLogo=this.catalogLogo,moduleId=serviceCatalogItem.moduleId,_clonedCatalogItem=cloneDeep_default()(serviceCatalogItem);(0,validation/* isEmpty */.xb)(_clonedCatalogItem.formName)||delete _clonedCatalogItem.formName,_clonedCatalogItem=(0,utility_methods/* serializeProps */._$)(_clonedCatalogItem,constant/* default */.Z.CATALOG_RESOURCE_PROPS),_clonedCatalogItem.photoId=catalogLogo||serviceCatalogItem.photoId;var data={moduleName:this.getSelectedModuleName(moduleId),serviceCatalog:_clonedCatalogItem},url="v2/servicecatalog/addOrUpdate";this.$set(this,"isSaving",!0);var promise=this.$http.post(url,data).then((function(_ref9){var _ref9$data=_ref9.data,message=_ref9$data.message,responseCode=_ref9$data.responseCode,result=_ref9$data.result;if(0!==responseCode)throw new Error(message);_this7.$message.success(_this7.$t("common.products.service_item_created_successfully")),_this7.$emit("setActiveCatalog",result.serviceCatalog),_this7.closeDialogBox()})).catch((function(_ref10){var message=_ref10.message;_this7.$message.error(message)}));Promise.all([promise]).finally((function(){return _this7.$set(_this7,"isSaving",!1)}))}}},catalogs_CatalogItemCreationvue_type_script_lang_js=CatalogItemCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(catalogs_CatalogItemCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CatalogItemCreation=component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/158357:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"7b6f74bf7963b5ff5025e3a85e719276.svg";
/***/},
/***/498410:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d2a8255ccd544514a61fb225394c1736.svg";
/***/},
/***/835823:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3160591189f3dfcdfe7d9b004598279b.svg";
/***/},
/***/572902:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"db5324b7cf9058a0aa45899e55bf6444.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/52657.js.map