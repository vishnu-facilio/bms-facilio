(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[73482],{
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/350367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUploadPhotos}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FUploadPhotos.vue?vue&type=template&id=5a0f9682
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"upload-photos-dialog fc-dialog-center-container",attrs:{title:"Upload Photos",visible:_vm.showDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event},"before-close":_vm.closeDialog}},[_vm.showDialog?_c("el-upload",{attrs:{multiple:"","list-type":"picture-card","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-error":_vm.onError,"on-remove":_vm.onRemove}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e(),_c("span",{staticClass:"dialog-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.done}},[_vm._v("Done")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),eventBus=__webpack_require__(398011),FUploadPhotosvue_type_script_lang_js={props:["module","record","list"],data:function(){return{photos:[],showDialog:!1,isChanged:!1}},methods:{open:function(){this.photos=(0,validation/* isEmpty */.xb)(this.list)?[]:this.list,this.showDialog=!0},onUpload:function(_ref){var file=_ref.file,data=(_ref.onError,{parentId:this.record.id,module:this.module}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.list.push(result.photos[0]),this.isChanged=!0)},onError:function(){this.$message.error(this.$t("setup.users_management.Invalid_image"))},onRemove:function(file){var _this=this;this.$http.post("/v2/photos/delete",{id:file.id,photoId:file.photoId,module:this.module,parentId:this.record.id}).then((function(response){if(0===response.data.responseCode){var list=(0,toConsumableArray/* default */.Z)(_this.list),index=list.findIndex((function(f){return f.id===file.id}));list.splice(index,1),_this.$emit("updatePhotos",list),_this.isChanged=!0}})).catch((function(){}))},done:function(){this.showDialog=!1,this.photos=[],this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1)},closeDialog:function(){this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1),this.showDialog=!1}}},components_FUploadPhotosvue_type_script_lang_js=FUploadPhotosvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUploadPhotosvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUploadPhotos=component.exports},
/***/826127:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Space}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Space.vue?vue&type=template&id=5d05009e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.space?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_vm.showSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{attrs:{trigger:"click",height:"120px",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.photos,(function(photo,index){return photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:photo.url}})]):_vm._e()})),1)],1):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.space.name))])])]):_vm._e(),_vm.showUpload?_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{list:_vm.photos,module:"basespacephotos",record:_vm.space}})],1):_vm._e()])]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(350367)),Spacevue_type_script_lang_js={props:["size","space","name","hovercard"],data:function(){return{avatarUrl:this.getDefaultAvatar(),sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.space.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["xxxlg","shuge","huge","xhuge"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl(),this.space.avatarUrl&&(this.avatarUrl=this.space.avatarUrl)},computed:{showSlide:function(){if(this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},watch:{space:function(){this.avatarUrl=this.getDefaultAvatar(),this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){if(this.sliderEnabledSize.indexOf(this.size)>=0){var self=this;self.photos=[],this.space.id>0&&(self.photosLoading=!0,self.$http.get("/photos/get?module=basespacephotos&parentId="+this.space.id).then((function(response){if(self.photos=response.data.photos||[],self.photosLoading=!1,self.photos.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.photos);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var photo=_step2.value;if(photo.url){self.avatarUrl=photo.url;break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}})))}this.space.avatarUrl?this.avatarUrl=this.space.avatarUrl:(this.avatarUrl=this.getDefaultAvatar(),this.space.avatarUrl=this.avatarUrl)},getDefaultAvatar:function(space){var avatarUrl="";if("Campus"===this.space.type||"SITE"===this.space.spaceTypeEnum)avatarUrl=__webpack_require__(555751);else if("Building"===this.space.type||"BUILDING"===this.space.spaceTypeEnum)avatarUrl=__webpack_require__(188742);else if("Space"===this.space.type||"SPACE"===this.space.spaceTypeEnum){var subCategory="";avatarUrl=__webpack_require__("Cafeteria"===subCategory?73209:"Toilet"===subCategory?924353:"Dining"===subCategory?351129:398596)}else avatarUrl=__webpack_require__(188742);return avatarUrl},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Spacevue_type_script_lang_js=Spacevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Spacevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Space=component.exports},
/***/571363:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Zones}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/spacemanagement/Zones.vue?vue&type=template&id=952bb06a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"scrollable"},[_c("div",{staticClass:"fc-space-layout p25 "},[_c("div",{staticClass:"sp-div-row"}),_c("space-nav",{on:{new:_vm.openCreateDialog}}),_c("div",{staticClass:"fc-space-list"},[_c("div",{staticClass:"sp-div-row"}),_c("div",{staticClass:"fc-space-header row"},[_c("div",{staticClass:"col-12 col-sm-12 col-lg-12 pull-left self-center f18 fw5"},[_vm._v(" All Zones "),_c("span",{staticClass:"fc-identify-color-2"},[_vm._v("("+_vm._s(_vm.zones.length)+")")])])]),_c("div",{staticClass:"sp-div-row"}),_c("div",{staticClass:"sp-div-row"}),_vm.zones.length?_c("div",{staticClass:"fc-space-content-header row uppercase f11 secondary-color",staticStyle:{"border-top":"1px solid #f3eeee",height:"73px"}},[_vm._m(0),_vm._m(1),_vm._m(2),_vm._m(3),_c("div",{staticClass:"col-2 p20"},[_c("div",{staticClass:"sp-h"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.max_occup"))+" ")])]),_c("div",{staticClass:"col-2 p20"})]):_vm._e(),_vm.loading?_c("div",{staticClass:"fc-space-conetnt row bg-color-1 fc-border-radius"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_vm.zones.length?_vm._l(_vm.zones,(function(zone,index){return _c("div",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],key:index,staticClass:"fc-space-conetnt row bg-color-1 fc-border-radius fc-site-row"},[_c("div",{staticClass:"col-1"},[_c("div",{staticClass:"sp-c text-center"},[_c("space-avatar",{attrs:{size:"xxlg",name:!1,space:zone}})],1)]),_c("div",{staticClass:"col-3 p20 pointer",on:{click:function($event){return _vm.openZoneOverview(zone.id,zone.siteId)}}},[_c("div",{staticClass:"sp-c"},[_c("div",{staticClass:"fw5 ellipsis"},[_vm._v(_vm._s(zone.name))]),_c("div",{staticClass:"fc-identify-color-1 f12 sp-div-row-2"},[_vm._v(" #"+_vm._s(zone.id)+" ")])])]),_c("div",{staticClass:"col-3 p20 self-center"},[_c("div",{staticClass:"sp-c zone-color"},[_c("div",{staticClass:"ellipsis"},[_vm._v(" "+_vm._s(zone.baseSpaceContext?zone.baseSpaceContext.name:"--")+" ")])])]),_c("div",{staticClass:"col-2 p20 self-center"},[_c("div",{staticClass:"sp-c"},[_c("div",{staticClass:"ellipsis"},[_vm._v(_vm._s(zone.area>-1?zone.area:0))])])]),_c("div",{staticClass:"col-2 p20 self-center"},[_c("div",{staticClass:"sp-c"},[_c("div",{staticClass:"ellipsis"},[_vm._v(" "+_vm._s(zone.maxOccupancy>-1?zone.maxOccupancy:"---")+" ")])])]),_c("div",{staticClass:"col-1 p20 self-center hover-action-zone"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit edit-icon-color",attrs:{title:"Edit Space","data-arrow":"true"},on:{click:function($event){return _vm.editZone(zone)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color",staticStyle:{"padding-left":"18px"},attrs:{"data-arrow":"true",title:"Delete Space"},on:{click:function($event){return _vm.deleteZone(zone)}}})])])})):_c("div",{staticClass:"fc-space-conetnt row bg-color-1 fc-border-radius p30 center justify-center"},[_vm._v(" No zones available. ")])],2)]),_c("div",{staticClass:"sp-div-row"}),_c("div",{staticClass:"sp-div-row"}),_c("div",{staticClass:"sp-div-row"}),_c("div",{staticClass:"sp-div-row"})],1),_c("q-modal",{ref:"createNewZoneModel",attrs:{position:"right","content-classes":"fc-create-record"}},[_c("q-btn",{staticClass:"fc-model-close",attrs:{flat:""},on:{click:_vm.closeCreateDialog}},[_c("q-icon",{attrs:{name:"close"}})],1),_c("form-layout",{attrs:{layout:_vm.formlayout},on:{onsave:_vm.saveZone,cancel:_vm.closeCreateDialog}},[_c("el-col",{attrs:{md:24,lg:24}},[_c("div",{staticClass:"bold pT15 pB15"},[_vm._v("Attach Spaces")]),_c("el-select",{attrs:{filterable:"",multiple:""},model:{value:_vm.attachedSpaces,callback:function($$v){_vm.attachedSpaces=$$v},expression:"attachedSpaces"}},_vm._l(_vm.spaces,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:space.id}})})),1)],1)],1)],1),_vm.showCreateDialog?_c("new-zone",{attrs:{showNewZone:_vm.showCreateDialog,zoneobj:_vm.zoneobj,isnew:_vm.isNew},on:{"update:showNewZone":function($event){_vm.showCreateDialog=$event},"update:show-new-zone":function($event){_vm.showCreateDialog=$event},refreshlist:_vm.updateList}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"col-1 p20"},[_c("div",{staticClass:"sp-h"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"col-3 p20"},[_c("div",{staticClass:"sp-h"},[_vm._v("zone name")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"col-3 p20"},[_c("div",{staticClass:"sp-h"},[_vm._v("zone location")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"col-2 p20"},[_c("div",{staticClass:"sp-h"},[_vm._v("Area")])])}],esm_typeof=__webpack_require__(103336),newzonevue_type_template_id_1b55e9e0_render=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.showNewZone,fullscreen:!0,"custom-class":"fc-dialog-form setup-dialog-right setup-dialog45 setup-dialog show-right-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.showNewZone=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}),_c("el-form",{ref:"ruleForm",attrs:{model:_vm.zone,"label-position":"top"}},[_c("div",{staticClass:"form-header"},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isnew?"NEW ZONE":"EDIT ZONE")+" ")])])]),_c("div",{staticClass:"new-body-modal"},[_c("div",{staticStyle:{width:"100%",display:"inline-block"},attrs:{id:"container"}},[_c("el-row",{attrs:{align:"middle",gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Name")]),_c("div",{staticClass:"form-input"},[_c("el-form-item",{attrs:{prop:"name"}},[_c("el-input",{staticClass:"required header",attrs:{autofocus:!0,type:"text",autoComplete:"off",placeholder:"Enter Zone Name"},model:{value:_vm.zone.name,callback:function($$v){_vm.$set(_vm.zone,"name",$$v)},expression:"zone.name"}})],1)],1)])],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Description")]),_c("div",{staticClass:"form-input"},[_c("el-input",{staticClass:"fc-input-txt",attrs:{placeholder:_vm.$t("common._common.enter_desc"),type:"textarea",autosize:{minRows:4,maxRows:4},resize:"none"},model:{value:_vm.zone.description,callback:function($$v){_vm.$set(_vm.zone,"description",$$v)},expression:"zone.description"}})],1)])],1),_c("el-row",{staticStyle:{margin:"0px","padding-top":"30px"},attrs:{align:"middle",gutter:50}},[_c("el-col",{staticStyle:{"padding-left":"0px"},attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Zone Location")]),_c("div",{staticClass:"form-input"},[_c("el-input",{staticClass:"fc-input-border-remove",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.spaceAssetDisplayName,_vm.showSpaceAssetChooser()}},model:{value:_vm.spaceAssetDisplayName,callback:function($$v){_vm.spaceAssetDisplayName=$$v},expression:"spaceAssetDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.visibility=!0}},slot:"suffix"})])],1)]),_c("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0"},attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Spaces")]),_c("div",{staticClass:"form-input"},[_c("el-input",{staticClass:"fc-border-select",attrs:{disabled:""},model:{value:_vm.selectedResourceLabel,callback:function($$v){_vm.selectedResourceLabel=$$v},expression:"selectedResourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0}},slot:"suffix"})])],1)])],1),_c("el-row",{staticStyle:{margin:"0px","padding-top":"30px"},attrs:{align:"middle",gutter:50}},[_c("el-col",{staticStyle:{"padding-left":"0px"},attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Max Occupant Count")]),_c("div",{staticClass:"form-input"},[_c("el-input",{staticClass:"text required header",attrs:{type:"text",autoComplete:"off",placeholder:"Enter Max Occupant Count"},model:{value:_vm.zone.maxOccupancy,callback:function($$v){_vm.$set(_vm.zone,"maxOccupancy",$$v)},expression:"zone.maxOccupancy"}})],1)]),_c("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0"},attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Area")]),_c("div",{staticClass:"form-input"},[_c("el-input",{staticClass:"text required header",attrs:{type:"text",autoComplete:"off",placeholder:"Enter Zone Area"},model:{value:_vm.zone.area,callback:function($$v){_vm.$set(_vm.zone,"area",$$v)},expression:"zone.area"}})],1)])],1)],1)])]),_c("space-asset-chooser",{attrs:{visibility:_vm.visibility,query:_vm.quickSearchQuery,showAsset:!1,appendToBody:!1},on:{associate:_vm.associate,"update:visibility":function($event){_vm.visibility=$event}}}),_vm.chooserVisibility?_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,resourceType:"2, 3, 4",showAsset:!1,hideBanner:!0,selectedResource:_vm.selectedeResourceObj,filter:_vm.filter},on:{associate:_vm.associateResource,"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitZone()}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"Save")+" ")]),_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" CANCEL")])],1)],1)],1)}),newzonevue_type_template_id_1b55e9e0_staticRenderFns=[],ErrorBanner=(__webpack_require__(879288),__webpack_require__(538077),__webpack_require__(947522),__webpack_require__(450886),__webpack_require__(564043),__webpack_require__(907409),__webpack_require__(297157)),SpaceAssetChooser=__webpack_require__(372587),SpaceAssetMultiChooser=__webpack_require__(673362),newzonevue_type_script_lang_js={props:["showNewZone","isnew","building","zoneobj"],data:function(){return{selectedeResourceObj:[],errorMessage:"",error:!1,spaces:{},saving:!1,initialFloorValue:{},spaceId:[],children:[],zone:{name:"",area:null,description:"",site:{id:null,name:null},maxOccupancy:null,building:{id:null,name:""},id:-1},selectedResourceLabel:null,chooserVisibility:!1,woSpaceAssetvisibility:{},mandatoryFields:{},visibility:!1,quickSearchQuery:"",spaceAssetDisplayName:""}},computed:{filter:function(){var filter={};return this.zone.site&&this.zone.site.id&&(filter.siteId=Number(this.zone.site.id)),filter}},components:{SpaceAssetChooser:SpaceAssetChooser/* default */.Z,SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,ErrorBanner:ErrorBanner/* default */.Z},mounted:function(){
// if (!this.isnew) {
//   this.init()
// }
// else {
this.loadBuilding(),this.isnew||(this.zone=this.zoneobj,this.zone.area=this.zone.area>-1?this.zone.area:0,this.zone.maxOccupancy=this.zone.maxOccupancy>-1?this.zone.maxOccupancy:"",this.spaceAssetDisplayName=this.zone.baseSpaceContext?this.zone.baseSpaceContext.name:"--",this.loadChildren(this.zone.id))},methods:{loadBuilding:function(){var self=this;self.$util.loadSpace().then((function(response){response.basespaces&&(self.spaces=response.basespaces.filter((function(space){return"ZONE"!==space.spaceTypeEnum})))}))},associateResource:function(selectedObj){var _this=this;selectedObj.resourceList&&selectedObj.resourceList.length&&(selectedObj.resourceList.forEach((function(element){_this.spaceId.push(element.id)})),this.selectedResourceLabel=this.resourceLabel(this.spaceId)),this.chooserVisibility=!1},resourceLabel:function(selectedResourceObject){if(selectedResourceObject){var message,selectedCount=selectedResourceObject.length,categoryName="Space";return selectedCount&&(message=selectedCount+" "+(selectedCount>1?categoryName+"s":categoryName)),message}},associate:function(selectedObj){this.spaceAssetDisplayName=selectedObj.name,this.zone.site={id:selectedObj.id},this.visibility=!1},loadChildren:function(id){var self=this;self.childrenLoading=!0;var url="/zone/children?zoneId="+id;self.$http.get(url).then((function(response){self.childrenLoading=!1,self.children=response.data.children?response.data.children:[],self.children&&(self.selectedeResourceObj=self.children,self.resourceData={isIncludeResource:!0,selectedResources:self.children.map((function(resource){return{id:resource&&"object"===(0,esm_typeof/* default */.Z)(resource)?parseInt(resource.id):parseInt(resource)}}))},self.children.forEach((function(d){self.spaceId.push(d.id)})),self.selectedResourceLabel=self.resourceLabel(self.spaceId))}))},cancel:function(){this.$emit("canceled")},validateForm:function(zoneObj){this.errorMessage="",this.error=!1;var intRegx=/^[0-9]+$/,errorMsg="";if(!zoneObj.name)return errorMsg+="Zone name is required",errorMsg;if(this.spaceId.length<=0)return errorMsg+="Please select a space to add zone",errorMsg;if(zoneObj.area){if(!1===intRegx.test(zoneObj.area))return errorMsg+="Please give a valid area",errorMsg}else zoneObj.area=null;if(zoneObj.maxOccupancy){if(!1===intRegx.test(zoneObj.maxOccupancy))return errorMsg+="Please give a valid number of occupancy",errorMsg}else zoneObj.maxOccupancy=null},submitZone:function(){var self=this,validate=this.validateForm(this.zone);if(validate)return this.error=!0,this.errorMessage=validate,!1;null===this.zone.building.id&&(this.zone.building.id=-1),null===this.zone.site.id&&(this.zone.site.id=-1);var url="";url=this.isnew?"/zone/add":"/zone/update",self.$http.post(url,{zone:this.zone,spaceId:this.spaceId}).then((function(response){response.data.zoneId?(self.$message.success("Zone Added Successfully"),self.$emit("refreshlist"),self.closeDialog()):self.$message.error("Failed to add zone ")}))},closeDialog:function(){this.showCreateDialog=!1,this.$emit("update:showNewZone",!1)}}},spacemanagement_newzonevue_type_script_lang_js=newzonevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(spacemanagement_newzonevue_type_script_lang_js,newzonevue_type_template_id_1b55e9e0_render,newzonevue_type_template_id_1b55e9e0_staticRenderFns,!1,null,null,null)
/* harmony default export */,newzone=component.exports,Space=__webpack_require__(826127),SpaceNavvue_type_template_id_6bfaae7a_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-space-header row"},[_c("div",{staticClass:"col-3 col-sm-3 col-lg-3 pull-left self-center f18 fw5"},[_vm._v(" "+_vm._s(_vm.$t("common.header.spacemanagement"))+" ")]),_c("div",{staticClass:"col-6 col-sm-6 col-lg-6"},[_c("div",{staticClass:"row text-center item-center"},[_c("router-link",{staticClass:"col-1 col-sm-1 col-md-1 col-lg-1 fc-margin-auto fc-margin-right-o p10 pL15 pR15 bg-color-1 fc-space-header-card fc-border-1 uppercase pointer sp-color-7",staticStyle:{"border-right-width":"0px","padding-bottom":"12px"},attrs:{tag:"div",to:"sites"}},[_c("div",{staticClass:" f18 fw6 fc-identify-color-1",staticStyle:{"padding-bottom":"4px"}},[_vm._v(" "+_vm._s(_vm.sitesCount)+" ")]),_c("div",{staticClass:"f11"},[_vm._v(_vm._s(_vm.$t("space.sites._sites")))])]),_c("router-link",{staticClass:"col-1 col-sm-1 col-md-1 col-lg-1 fc-margin-auto fc-margin-left-o p10 pL15 pR15 bg-color-1 fc-space-header-card fc-border-1 uppercase pointer sp-color-7",staticStyle:{"padding-bottom":"12px"},attrs:{tag:"div",to:"zones"}},[_c("div",{staticClass:" f18 fw6 fc-identify-color-1",staticStyle:{"padding-bottom":"4px"}},[_vm._v(" "+_vm._s(_vm.zonesCount)+" ")]),_c("div",{staticClass:"f11"},[_vm._v(_vm._s(_vm.$t("space.sites.zones")))])])],1)]),_c("div",{staticClass:"col-3 col-sm-3 col-lg-3 pull-right text-right self-center"},[_vm.$hasPermission("space:CREATE")?_c("button",{staticClass:"sh-button sh-button-add button-add  fc-shadow sp-sh-btn",on:{click:_vm.createNew}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"q-icon material-icons",staticStyle:{"font-weight":"700"},attrs:{"aria-hidden":"true","data-arrow":"true",title:_vm.$t("space.sites.add_site")}},[_vm._v("add")])]):_vm._e()])])])},SpaceNavvue_type_template_id_6bfaae7a_staticRenderFns=[],SpaceNavvue_type_script_lang_js={computed:{sitesCount:function(){return this.$store.state.space.sites.length},zonesCount:function(){return this.$store.state.space.zones.length}},data:function(){return{showCreateDialog:!1,isNew:!0}},mounted:function(){this.$store.dispatch("space/fetchSites"),this.$store.dispatch("space/fetchZones")},methods:{createNew:function(){this.$emit("new")}}},spacemanagement_SpaceNavvue_type_script_lang_js=SpaceNavvue_type_script_lang_js,SpaceNav_component=(0,componentNormalizer/* default */.Z)(spacemanagement_SpaceNavvue_type_script_lang_js,SpaceNavvue_type_template_id_6bfaae7a_render,SpaceNavvue_type_template_id_6bfaae7a_staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceNav=SpaceNav_component.exports,Formlayout=__webpack_require__(16133),quasar_esm=__webpack_require__(641358),router=__webpack_require__(329435),Zonesvue_type_script_lang_js={components:{NewZone:newzone,SpaceAvatar:Space/* default */.Z,spaceNav:SpaceNav,FormLayout:Formlayout/* default */.Z,QModal:quasar_esm/* QModal */.hc,QBtn:quasar_esm/* QBtn */.OV,QIcon:quasar_esm/* QIcon */.oF},data:function(){return{isNew:!0,zoneobj:{},showCreateDialog:!1,loading:!0,formlayout:{title:"New Zone",metaurl:"/zone/layout"},attachedSpaces:[]}},mounted:function(){this.loadZones()},title:function(){return"Zones"},computed:{zones:function(){return this.$store.state.space.zones},spaces:function(){return this.$store.state.spaces}},methods:{getParentName:function(zone){return zone.floorId>0?"Floor":zone.buildingId>0?"Building":zone.siteId>0?"Site":"--"},deleteZone:function(zone){var self=this,promptObj={title:"Delete zone",message:"Are you sure you want to delete this zone?",rbDanger:!0,rbLabel:"Delete"};self.$dialog.confirm(promptObj).then((function(value){value&&self.$http.post("/zone/delete",{zoneId:zone.id}).then((function(response){if(response.data&&!response.data.error&&response.data.zoneId){var doZones=self.zones.find((function(r){return r.id===response.data.zoneId}));doZones&&self.zones.splice(self.zones.indexOf(doZones),1),self.$message.success("Deleted Successfully")}else response.data&&response.data.error&&self.$message.error(response.data.error)}))}))},updateList:function(){this.loadZones()},loadZones:function(){var self=this;self.loading=!0,self.$store.dispatch("space/fetchZones").then((function(){self.loading=!1})).catch((function(error){error&&(self.loading=!1)}))},findRoute:function(){var tabType=router/* tabTypes */.VF.CUSTOM,config={type:"portfolio"},_ref=(0,router/* findRouteForTab */.OD)(tabType,{config:config})||{},name=_ref.name;return name?this.$router.resolve({name:name}).href:null},openZoneOverview:function(id){var parentPath=(0,router/* isWebTabsEnabled */.tj)()?this.findRoute():"/app/home/portfolio";parentPath&&this.$router.push({path:"".concat(parentPath,"/zone/").concat(id,"/overview")})},openCreateDialog:function(){this.isNew=!0,this.showCreateDialog=!0},closeCreateDialog:function(){this.$refs.createNewZoneModel.close(),this.loadZones(),this.attachedSpaces=[]},editZone:function(_editZone){this.isNew=!1,this.zoneobj=this.$helpers.cloneObject(_editZone),this.showCreateDialog=!0},saveZone:function(formdata){var data={zone:formdata.zone,spaceId:this.attachedSpaces},self=this;self.$http.post("/zone/add",data).then((function(response){if("object"===(0,esm_typeof/* default */.Z)(response.data)){var alert1=quasar_esm/* Alert */.bZ.create({html:"Zone created successfully!",color:"positive",position:"top-center"});setTimeout((function(){alert1.dismiss()}),1500),self.closeCreateDialog()}else{var alert3=quasar_esm/* Alert */.bZ.create({html:"Zone creation failed!",color:"negative",position:"top-center"});setTimeout((function(){alert3.dismiss()}),1500)}})).catch((function(error){var alert2=quasar_esm/* Alert */.bZ.create({html:"Zone creation failed! [ "+error+"]",color:"negative",position:"top-center"});setTimeout((function(){alert2.dismiss()}),1500)}))}}},spacemanagement_Zonesvue_type_script_lang_js=Zonesvue_type_script_lang_js,Zones_component=(0,componentNormalizer/* default */.Z)(spacemanagement_Zonesvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Zones=Zones_component.exports},
/***/188742:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"22bc1f7e3fecc069519710728d363ce9.svg";
/***/},
/***/73209:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"feab5de01574d25fa144b4289c5c1d69.svg";
/***/},
/***/555751:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"299b4c1da32a42a00cf63d01aaeb8c83.svg";
/***/},
/***/351129:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"34313c056b103abf1cd337cccc6f8896.svg";
/***/},
/***/398596:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"a4d2fa3a3df16df5c45be4f9a34439f4.svg";
/***/},
/***/924353:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0d57a0742a44e20a09bf2796286c373d.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/73482.js.map