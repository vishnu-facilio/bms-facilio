(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[62574,4119,26737],{
/***/822902:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlertBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlertBanner.vue?vue&type=template&id=1787a4c4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"error-block-page"},[_vm.hasAlert?_c("div",{staticClass:"fc-error-block",attrs:{id:"alert"}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("InlineSvg",{attrs:{src:"svgs/info-warning",iconClass:"icon icon-sm fill-red vertical-text-super"}})],1),_c("el-col",{attrs:{span:23}},[_c("div",{staticClass:"error-txt"},[_vm._v(" "+_vm._s(_vm.alertMessage?_vm.alertMessage:"Invalid Reading")+" ")])])],1)],1):_vm._e()])},staticRenderFns=[],AlertBannervue_type_script_lang_js={props:["alert","alertMessage"],computed:{hasAlert:{get:function(){return this.alert},set:function(value){this.$emit("update:alert",value)}}}},components_AlertBannervue_type_script_lang_js=AlertBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlertBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlertBanner=component.exports},
/***/749563:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AssetBreakdown}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AssetBreakdown.vue?vue&type=template&id=118ba6c6&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,"append-to-body":!0,"custom-class":"setup-dialog40 setup-dialog asset-breakdown-popup","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{staticClass:"content-section"},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(_vm._s("Report Asset Downtime"))])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.message"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Enter the Condition"},model:{value:_vm.breakdown.condition,callback:function($$v){_vm.$set(_vm.breakdown,"condition",$$v)},expression:"breakdown.condition"}})],1)],1),_c("el-row",{staticClass:"mT20",attrs:{align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.time"))+" ")]),_c("div",{staticClass:"form-input"},[_c("f-date-picker",{staticClass:"fc-input-full-border-select2 form-date-picker",attrs:{type:"datetimerange","start-placeholder":"Start Date","end-placeholder":"End Date"},on:{change:_vm.pickerChange},model:{value:_vm.time,callback:function($$v){_vm.time=$$v},expression:"time"}})],1)])],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving},on:{click:_vm.saveAssetBreakdown}},[_vm._v(_vm._s(_vm.isSaving?"Saving...":_vm.$t("common._common._save")))])],1)])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ErrorBanner=(__webpack_require__(450886),__webpack_require__(297157)),utils_validation=__webpack_require__(990260),FDatePicker=__webpack_require__(358551),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),AssetBreakdownvue_type_script_lang_js={props:["assetBDSourceDetails","visibility"],components:{ErrorBanner:ErrorBanner/* default */.Z,FDatePicker:FDatePicker/* default */.Z},data:function(){return{breakdown:{sourceId:null,condition:null,assetid:null,sourceType:null},time:[],fromtime:null,totime:null,error:!1,errorText:"",isSaving:!1}},mounted:function(){this.initAssetBreakDown()},methods:{initAssetBreakDown:function(){this.breakdown=(0,objectSpread2/* default */.Z)({},this.assetBDSourceDetails)},pickerChange:function(value){var _this=this;!(0,utils_validation/* isEmpty */.xb)(value)&&(0,utils_validation/* isArray */.kJ)(value)?(this.fromtime=value[0],this.totime=value[1],this.time=value.map((function(val){return _this.getTimeInSystemZone(val)}))):this.time=[]},validation:function(){(0,utils_validation/* isEmpty */.xb)(this.breakdown.condition)?(this.errorText=this.$t("common.placeholders.please_enter_condition"),this.error=!0):2!=this.time.length?(this.errorText=this.$t("common.placeholders.please_choose_time"),this.error=!0):(this.errorText="",this.error=!1)},saveAssetBreakdown:function(){var _this2=this;if(this.validation(),!this.error){var assetBDSourceDetails=(0,objectSpread2/* default */.Z)({},this.breakdown),fromtime=this.fromtime,totime=this.totime;assetBDSourceDetails.fromtime=fromtime,assetBDSourceDetails.totime=totime,this.isSaving=!0,this.$http.post("/v2/assetbreakdown/addNew",{assetBDSourceDetails:assetBDSourceDetails}).then((function(response){0===response.data.responseCode?(_this2.$message.success(_this2.$t("common._common.Asset_breakdown_saved_successfully")),_this2.$emit("onSave"),_this2.closeDialog()):_this2.$message.error(response.data.message),_this2.isSaving=!1})).catch((function(){_this2.$message.error(_this2.$t('common._common."Failed_to_record_breakdown')),_this2.closeDialog(),_this2.isSaving=!1}))}},getTimeInSystemZone:function(value){return moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss")},closeDialog:function(){this.$emit("update:visibility",!1)}}},components_AssetBreakdownvue_type_script_lang_js=AssetBreakdownvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AssetBreakdownvue_type_script_lang_js,render,staticRenderFns,!1,null,"118ba6c6",null)
/* harmony default export */,AssetBreakdown=component.exports},
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/142885:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return InstantTranslate}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/InstantTranslate.vue?vue&type=template&id=7d2632e2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.detectLangShow?_c("div",[_vm.orgAndUserLanguage!==_vm.detectLanguage.language?_c("div",[_vm.extraContent?_c("div",_vm._l(_vm.translateListMoreThan,(function(translate,inex){return _c("div",{key:inex},[_c("div",{staticClass:"fc-translate-text"},[_c("div",{staticClass:"fc-grey8-14 f13 bold"},[_vm._v(" "+_vm._s(_vm.$t("common.translation.translate_text"))+" "),translate&&translate.detectedSourceLanguage?_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Translated from "+_vm.languagesData[translate.detectedSourceLanguage]||0,placement:"top-start"}},[_c("i",{staticClass:"el-icon-info"})]):_vm._e()],1),_c("div",{staticClass:"pT5 fc-grey8-14 f13 line-height20"},[_vm._v(" "+_vm._s(translate.translatedText)+" ")])])])})),0):_c("div",{staticClass:"fc-grey8-14 f13 fc-translate-text"},[_c("div",{staticClass:"fc-grey8-14 f13 bold"},[_vm._v(" "+_vm._s(_vm.$t("common.translation.translate_text"))+" "),_vm.translateListData&&_vm.translateListData.detectedSourceLanguage?_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Translated from "+_vm.languagesData[_vm.translateListData.detectedSourceLanguage],placement:"top-start"}},[_c("i",{staticClass:"el-icon-info"})]):_vm._e()],1),_c("div",{staticClass:"pT5 fc-grey8-14 f13 line-height20"},[_vm._v(" "+_vm._s(_vm.translateListData.translatedText)+" ")])])]):_vm._e()]):_vm._e()])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),axios=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(634338),__webpack_require__(409669)),axios_default=__webpack_require__.n(axios),validation=__webpack_require__(586529),languages=__webpack_require__(601273),InstantTranslatevue_type_script_lang_js={props:["content","extraContent"],data:function(){return{detectLanguage:[],loading:!0,translateListData:[],languageData:this.$org.language,seeTranslation:!1,seeTranslationStartContent:!0,googleKey:"AIzaSyAeJBX0k0BxzMvvlRyCsOtPYWKVs62603w",translateListMoreThan:[],detectLangShow:!1,languages:null,languageTranslateData:{}}},computed:{orgAndUserLanguage:function(){return(0,validation/* isEmpty */.xb)(this.$account.user.language)?this.$org.language:this.$account.user.language},languagesData:function(){var _this=this,data={};return languages/* default */.Z.forEach((function(rt){_this.$set(data,rt.value,rt.label)})),data}},mounted:function(){var _this2=this;this.$nextTick((function(){_this2.getDetectLanguage()}))},methods:{
// This API for detect app language
detectAppLanguage:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this3.loading=!0,_context.next=3,axios_default().post("https://translation.googleapis.com/language/translate/v2/detect?key=".concat(_this3.googleKey,"&q=").concat(_this3.content));case 3:response=_context.sent,_this3.detectLanguage=response.data&&response.data.data&&response.data.data.detections[0][0],_this3.loading=!1;case 6:case"end":return _context.stop()}}),_callee)})))()},
// This API for translate text
translateLanguageList:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this4.loading=!0,params={q:[_this4.content]},_this4.extraContent&&(params.q=[_this4.content,_this4.extraContent]),_context2.next=5,axios_default().post("https://translation.googleapis.com/language/translate/v2?key=".concat(_this4.googleKey,"&target=").concat(_this4.orgAndUserLanguage,"&format=html"),params);case 5:response=_context2.sent,_this4.translateListData=response.data&&response.data.data&&response.data.data.translations[0],_this4.translateListMoreThan=response.data&&response.data.data&&response.data.data.translations,_this4.loading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},showLanguageHideList:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this5.seeTranslation=!0,_this5.seeTranslationStartContent=!1,_context3.next=4,_this5.translateLanguageList();case 4:_this5.$emit("onData");case 5:case"end":return _context3.stop()}}),_callee3)})))()},backToOriginal:function(){this.seeTranslation=!1,this.seeTranslationStartContent=!0},getDetectLanguage:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this6.detectAppLanguage(),_context4.next=3,_this6.translateLanguageList();case 3:_this6.$emit("reLoad"),_this6.$emit("onData"),_this6.detectLangShow=!0;case 6:case"end":return _context4.stop()}}),_callee4)})))()}}},components_InstantTranslatevue_type_script_lang_js=InstantTranslatevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_InstantTranslatevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,InstantTranslate=component.exports},
/***/391810:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return MobileAttachment2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/MobileAttachment2.vue?vue&type=template&id=46fd5568
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},[_c("div",{staticClass:"row"},[_c("div",[_c("div",{staticClass:"header-label pB15"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.before"))+" ")]),_vm.beforeImage?_c("div",[_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px"},attrs:{width:"100",height:"auto",src:_vm.beforeImage},on:{click:function($event){return _vm.imgaeBefore(1)}}})])]):_c("div",[_c("div",{staticClass:"inputover"},[_vm._m(0),_vm.doNotSave?_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.marshallFile($event.target.files,1)}}}):_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.filesChange($event.target.files,1)}}})])])]),_c("div",{staticClass:"mL30"},[_c("div",{staticClass:"header-label pB15",staticStyle:{"padding-left":"0px"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.after"))+" ")]),_vm.afterImage?_c("div",[_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px"},attrs:{width:"100",height:"auto",src:_vm.afterImage},on:{click:function($event){return _vm.imgaeBefore(2)}}})])]):_c("div",[_c("div",{staticClass:"inputover"},[_vm._m(1),_vm.doNotSave?_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.marshallFile($event.target.files,2)}}}):_c("input",{attrs:{id:"file-upload",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.filesChange($event.target.files,2)}}})])])])])])])]),_vm.visibility&&_vm.selectedAttachment?_c("preview-file",{attrs:{visibility:_vm.visibility,showDelete:"true",previewFile:_vm.selectedAttachment,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event},onDelete:_vm.taskPhotoDletion}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload"}},[_c("i",{staticClass:"fa fa-camera"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload"}},[_c("i",{staticClass:"fa fa-camera"})])}],createForOfIteratorHelper=__webpack_require__(566347),PreviewFile=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(720096)),api=__webpack_require__(32284),validation=__webpack_require__(990260),MobileAttachment2vue_type_script_lang_js={props:["module","record","disabled","doNotSave"],data:function(){return{loading:!0,before:!1,after:null,status:{UPLOADING:1,SUCCESS:2,FAILED:3},beforeImage:null,afterImage:null,attachments:[],formFieldName:"attachment",attachmentType:-1,selectedAttachment:null,visibility:!1,afterImageDetail:{},beforeImageDetail:{}}},watch:{record:function(recordObj){this.loadAttachments()},attachments:function(newVal){this.record.noOfAttachments=this.attachments.length}},components:{PreviewFile:PreviewFile/* default */.Z},mounted:function(){this.loadAttachments()},methods:{taskPhotoDletion:function(file){var _this=this,dialogObj={title:"Delete Task Attachment",message:"Are you sure you want to delete this attachment?",rbDanger:!0,rbLabel:"Delete"};this.$dialog.confirm(dialogObj).then((function(value){if(value){var url="/v2/tasks/deleteTaskAttachment",id=file.id,params={recordId:_this.record.id,attachmentId:[id],module:"taskattachments"};api/* API */.bl.post(url,params).then((function(_ref){_ref.data;var error=_ref.error;error?_this.$message.error(error.message||"Error Occured"):(1===file.type?_this.beforeImage=null:2===file.type&&(_this.afterImage=null),_this.$emit("taskattachmentactivity"),_this.visibility=!1)}))}}))},marshallFile:function(fileList,attType){var _this2=this,attachmentInfo={module:this.module,recordId:this.record.id,attachmentType:attType,formFieldName:this.formFieldName,file:fileList[0],fileName:fileList[0].name},picReader=new FileReader;picReader.addEventListener("load",(function(event){var picFile=event.target;1===attType?_this2.beforeImage=picFile.result:2===attType&&(_this2.afterImage=picFile.result)})),picReader.readAsDataURL(fileList[0]),this.$emit("marshalled",attachmentInfo)},loadAttachments:function(){if(!this.record&&!this.record.id)return!1;var self=this;return self.loading=!0,this.$http.get("/attachment?module="+this.module+"&recordId="+this.record.id).then((function(response){if(200===response.status)if(self.loading=!1,self.attachments=response.data.attachments?response.data.attachments:[],self.attachments.length>0){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(self.attachments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attachment=_step.value;1===attachment.type?self.beforeImage=attachment.previewUrl:2===attachment.type&&(self.afterImage=attachment.previewUrl),self.setAttachmentDetail(attachment)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else self.beforeImage=null,self.afterImage=null}))},imgaeBefore:function(type){if(this.attachments.length>0){this.visibility=!0;var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.attachments);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var attachment=_step2.value;type===attachment.type&&(this.selectedAttachment=attachment,this.setAttachmentDetail(attachment))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}},filesChange:function(fileList,attType){var self1=this,formData=new FormData;formData.append("module",this.module),formData.append("recordId",this.record.id),formData.append("attachmentType",attType),formData.append(this.formFieldName,fileList[0],fileList[0].name);var picReader=new FileReader;picReader.addEventListener("load",(function(event){var picFile=event.target;1===attType?(self1.beforeImage=picFile.result,self1.beforeImageDetail={}):2===attType&&(self1.afterImage=picFile.result,self1.afterImageDetail={})})),picReader.readAsDataURL(fileList[0]);var self=this;self.$http.post("/attachment/add",formData).then((function(response){if(self.$emit("taskattachmentactivity"),200===response.status){self.$message.success("Attachment added successfully");var _ref2=response||{},data=_ref2.data,_ref3=data||[],attachments=_ref3.attachments;(0,validation/* isEmpty */.xb)(attachments)||attachments.forEach((function(attachment){self.attachments.push(attachment),self.setAttachmentDetail(attachment)}));
// window.location.reload()
}})).catch((function(){self.$message.error("Error in adding attachment")}))},setAttachmentDetail:function(attachment){1==attachment.type&&(this.beforeImageDetail=attachment),2==attachment.type&&(this.afterImageDetail=attachment)}}},components_MobileAttachment2vue_type_script_lang_js=MobileAttachment2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_MobileAttachment2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MobileAttachment2=component.exports},
/***/615987:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PDFDownload}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PDFDownload.vue?vue&type=template&id=be2ef4d6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.downloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.downloadUrl}}):_vm._e()},staticRenderFns=[],api=__webpack_require__(32284),validation=__webpack_require__(990260),PDFDownloadvue_type_script_lang_js={props:["url","additionalInfo","isDownload"],data:function(){return{downloadUrl:null}},watch:{isDownload:{handler:function(val){var url=this.url;!(0,validation/* isEmpty */.xb)(url)&&val&&this.downloadPdf()},immediate:!0}},methods:{downloadPdf:function(){var _this=this,url=this.url,additionalInfo=this.additionalInfo;this.$message({message:"Downloading...",showClose:!0,duration:0}),api/* API */.bl.post("/v2/integ/pdf/create",{url:url,additionalInfo:additionalInfo}).then((function(_ref){var data=_ref.data,error=_ref.error;if(_this.$message.closeAll(),error){var _error$message=error.message,message=void 0===_error$message?"Unable to fetch download link":_error$message;_this.$message.error(message)}else _this.downloadUrl=(data||{}).fileUrl;_this.$emit("update:isDownload",!1)}))}}},components_PDFDownloadvue_type_script_lang_js=PDFDownloadvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PDFDownloadvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PDFDownload=component.exports},
/***/252669:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TaskAttachmentPreview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/TaskAttachmentPreview.vue?vue&type=template&id=178d141f&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):[_c("div",{staticClass:"header-label pB15"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.before"))+" ")]),_c("div",{staticClass:"flex-middle"},[_vm.beforeImage?_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px","max-height":"80px"},attrs:{width:"100",src:_vm.beforeImage},on:{click:function($event){return _vm.imgaeBefore(1)}}})]):_c("div",{staticClass:"inputover"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.you_dont_have_attachment_permission"),placement:"right",disabled:!_vm.disabled}},[_c("label",{staticClass:"custom-upload",class:_vm.isNotAllowed,attrs:{for:"file-upload-before"}},[_c("i",{staticClass:"fa fa-camera"})])]),_c("input",{attrs:{id:"file-upload-before",name:"before",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.uploadBeforeImage($event.target)}}})],1),_vm.beforeImage&&_vm.beforeImageDetail.createdTime?_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"f11 text-fc-pink bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uploaded_time"))+" ")]),_c("div",{staticClass:"mT6 fL fc-italic f11"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.beforeImageDetail.createdTime))+" ")])]):_vm._e()]),_c("div",{staticClass:"header-label pB15 mT20",staticStyle:{"padding-left":"0px"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.after"))+" ")]),_c("div",{staticClass:"flex-middle"},[_vm.afterImage?_c("div",[_c("img",{staticClass:"custom-file-upload",staticStyle:{padding:"0px","max-height":"80px"},attrs:{width:"100",src:_vm.afterImage},on:{click:function($event){return _vm.imgaeBefore(2)}}})]):_c("div",{staticClass:"inputover"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.you_dont_have_attachment_permission"),placement:"right",disabled:!_vm.disabled}},[_c("label",{staticClass:"custom-upload",class:_vm.isNotAllowed,attrs:{for:"file-upload-after"}},[_c("i",{staticClass:"fa fa-camera"})])]),_c("input",{attrs:{id:"file-upload-after",name:"after",type:"file",accept:"image/*",disabled:_vm.disabled},on:{change:function($event){return _vm.uploadAfterImage($event.target)}}})],1),_vm.afterImage&&_vm.afterImageDetail.createdTime?_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"f11 text-fc-pink bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uploaded_time"))+" ")]),_c("div",{staticClass:"mT6 fL fc-italic f11"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.afterImageDetail.createdTime))+" ")])]):_vm._e()])],_vm.visibility&&_vm.selectedAttachment?_c("preview-file",{attrs:{visibility:_vm.visibility,showDelete:"true",isLockedState:_vm.isLockedState,isTaskClosed:_vm.isTaskClosed,previewFile:_vm.selectedAttachment,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event},onDelete:_vm.taskPhotoDletion}}):_vm._e()],2)},staticRenderFns=[],MobileAttachment2=__webpack_require__(391810),TaskAttachmentPreviewvue_type_script_lang_js={props:["isLockedState","isTaskClosed"],extends:MobileAttachment2/* default */.Z,computed:{isNotAllowed:function(){var disabled=this.disabled;return disabled?"cursor-not-allowed":"pointer"}},methods:{uploadAfterImage:function(event){this.filesChange(event.files,2)},uploadBeforeImage:function(event){this.filesChange(event.files,1)}}},components_TaskAttachmentPreviewvue_type_script_lang_js=TaskAttachmentPreviewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_TaskAttachmentPreviewvue_type_script_lang_js,render,staticRenderFns,!1,null,"178d141f",null)
/* harmony default export */,TaskAttachmentPreview=component.exports},
/***/38278:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WarningBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/WarningBanner.vue?vue&type=template&id=00ba6567
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-warning-card"},[_vm.hasWarning?_c("div",{staticClass:"fc-warning-info",attrs:{id:"warning"}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("i",{staticClass:"el-icon-warning-outline rotate180"})]),_c("el-col",{attrs:{span:23}},[_c("div",{staticClass:"warning-txt"},[_vm._v(" "+_vm._s(_vm.warningMessage?_vm.warningMessage:"Invalid Reading")+" ")])])],1)],1):_vm._e()])},staticRenderFns=[],WarningBannervue_type_script_lang_js={props:["warning","warningMessage"],computed:{hasWarning:{get:function(){return this.warning},set:function(value){this.$emit("update:warning",value)}}}},components_WarningBannervue_type_script_lang_js=WarningBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_WarningBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WarningBanner=component.exports},
/***/304119:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NotesWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/NotesWidget.vue?vue&type=template&id=4fc36ea4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"overflow-y-scroll"},[_vm.hideTitleSection?_vm._e():[_c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title pL20"},[_vm._v(_vm._s(_vm.widgetTitle))])]),_c("div",{staticClass:"flex-end"},[_c("portal-target",{attrs:{name:_vm.widget.key+"-topbar"}})],1)],_c("notes",{staticClass:"assetsnotes flex-grow overflow-y-scroll",attrs:{module:_vm.notesModuleName,parentModule:_vm.moduleName,isCustomModule:_vm.isCustomModule,record:_vm.details,notify:_vm.canShowNotifyRequester,title:_vm.widget?_vm.widget.title:_vm.$t("asset.assets.notes"),layoutParams:_vm.layoutParams,resizeWidget:_vm.resizeWidget,isActive:_vm.isActive,groupKey:_vm.groupKey}}),_vm.expand&&_vm.renderNewComment?_c("el-dialog",{staticClass:"attribute-list-dialog",attrs:{visible:!0,width:"65%","custom-class":"fc-dialofc-dialog-center-container scale-up-center ex-dialog",isCustomModule:_vm.isCustomModule,"lock-scroll":!1,"show-close":!0,"append-to-body":!0,"before-close":_vm.closeDialog,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{close:function(){_vm.expand=!1}}},[_c("template",{slot:"title"},[_c("div",{staticClass:"ex-dialog-header fW500 pL10"},[_vm._v(" "+_vm._s("Notes")+" ")])]),_vm.renderNewComment?_c("notes",{staticClass:"assetsnotes mT0 ",staticStyle:{height:"556px",overflow:"auto"},attrs:{module:_vm.notesModuleName,parentModule:_vm.moduleName,isPopoverView:!0,record:_vm.details,notify:_vm.canShowNotifyRequester,title:_vm.widget?_vm.widget.title:_vm.$t("asset.assets.notes"),layoutParams:_vm.layoutParams,resizeWidget:_vm.resizeWidget,isActive:_vm.isActive,groupKey:_vm.groupKey}}):_vm._e()],2):_vm._e()],2)},staticRenderFns=[],eventBus=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(398011)),NotesWidgetvue_type_script_lang_js={props:["moduleName","details","layoutParams","hideTitleSection","groupKey","activeTab","widget","resizeWidget","notesModuleName"],mounted:function(){eventBus/* eventBus */.Y.$on("expandNotesWidget",this.expandNotesWidget)},destroyed:function(){eventBus/* eventBus */.Y.$off("expandNotesWidget",this.expandNotesWidget)},data:function(){return{expand:!1}},components:{Notes:function(){return __webpack_require__.e(/* import() */20470).then(__webpack_require__.bind(__webpack_require__,120470))}},computed:{isActive:function(){var _ref=this.widget||{},_ref$widgetParams=_ref.widgetParams,widgetParams=void 0===_ref$widgetParams?{}:_ref$widgetParams,_ref$widgetTypeObj=_ref.widgetTypeObj,widgetTypeObj=void 0===_ref$widgetTypeObj?{}:_ref$widgetTypeObj;return this.activeTab===(widgetParams?widgetParams.module:widgetTypeObj.name)},isCustomModule:function(){var widget=this.widget;return this.$getProperty(widget,"relation.toModule.custom")},widgetTitle:function(){var widget=this.widget;return(widget||{}).title?widget.title:this.$t("asset.assets.documents")},canShowNotifyRequester:function(){var _this$widget=this.widget,_this$widget2=void 0===_this$widget?{}:_this$widget,widgetParams=_this$widget2.widgetParams,_ref2=widgetParams||{},_ref2$canShowNotifyRe=_ref2.canShowNotifyRequestor,canShowNotifyRequestor=void 0!==_ref2$canShowNotifyRe&&_ref2$canShowNotifyRe;return canShowNotifyRequestor||!1},renderNewComment:function(){return this.$helpers.isLicenseEnabled("NEW_COMMENTS")},notesWidgetClass:function(){return this.renderNewComment?"overflow-y-scroll":"widget-content"}},methods:{closeDialog:function(){this.expand=!1},expandNotesWidget:function(){this.expand=!0}}},common_NotesWidgetvue_type_script_lang_js=NotesWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(common_NotesWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NotesWidget=component.exports},
/***/638507:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Activities2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/Activities2.vue?vue&type=template&id=0cb76648
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{"padding-top":"20px"}},[_vm.loading?_c("div",[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm.activities&&_vm.activities.length?_vm._l(_vm.activities,(function(activity,index){return _c("div",{key:index,staticClass:"tactivity"},[_c("div",{staticClass:"tlContent2"},[_vm._m(0,!0),_c("div",{},[_c("div",{staticStyle:{display:"inline-flex"}},[_c("div",{staticClass:"tlContentMain pR10 pull-left"},[_c("avatar",{attrs:{size:"sm",user:{name:activity.name}}})],1),_c("div",{staticClass:"pull-left ",staticStyle:{"line-height":"1.4"}},[_c("span",[_vm._v(_vm._s(activity.name))]),16==activity.activityType?_c("span",[_vm._v(" "+_vm._s(activity.message)+" "),_c("avatar",{attrs:{size:"sm",user:{name:_vm.getAssignedBy(activity.info.updatedFields)}}}),_c("span",{staticClass:"updval"},[_vm._v(_vm._s(_vm.getAssignedBy(activity.info.updatedFields)))])],1):_c("span",{staticClass:"tlContentMain"},[_vm._v(" "+_vm._s(_vm.getMessage(activity).message?_vm.getMessage(activity).message:"")+" "),_vm.getMessage(activity).value?_c("span",{staticClass:"updval"},[_vm._v(_vm._s(_vm.getMessage(activity).value))]):_vm._e()]),_c("div",{staticClass:"tlDate2 col-12"},[_c("span",[_vm._v(_vm._s(_vm._f("fromNow")(activity.modifiedTime)))])])])])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})])})):_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.products.no_activities_tracked_yet"))+" ")])],2)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flLeft activityIconDiv2"},[_c("i",{staticClass:"fa fa-circle-o ",attrs:{"aria-hidden":"true"}})])}],Activities2vue_type_script_lang_js=__webpack_require__(942577),relatedlist_Activities2vue_type_script_lang_js=Activities2vue_type_script_lang_js/* default */.Z,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_Activities2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Activities2=component.exports},
/***/512208:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ActivitiesView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/ActivitiesView.vue?vue&type=template&id=acf06790
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"block"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading}}):_vm.activities&&_vm.activities.length?_c("el-timeline",{staticClass:"wo-activity"},[_vm._l(_vm.activities,(function(activity,index){return[null!==_vm.getActivityMessage(activity).message?_c("el-timeline-item",{key:index,attrs:{type:"primary",color:activity.color,timestamp:_vm._f("formatDate")(activity.ttime)}},[3===activity.type&&activity.info.assigned?_c("div",[_c("avatar",{attrs:{size:"sm",user:{name:activity.doneBy.name}}}),_vm._v(" "+_vm._s(activity.doneBy.name)+" "),activity.info.assigned.assignedTo?[activity.info.assigned.assignedTo>0?[_c("span",{domProps:{innerHTML:_vm._s(_vm.getActivityMessage(activity).message)}}),_vm._v(" "+_vm._s(" ")+" "),_c("avatar",{attrs:{size:"sm",user:{name:_vm.getUserName(activity.info.assigned.assignedTo,activity)}}}),_vm._v(" "+_vm._s(" ")+" "),_c("i",[_vm._v(_vm._s(_vm.getUserName(activity.info.assigned.assignedTo,activity)))])]:[_c("b",[_vm._v(_vm._s(_vm.$t("common._common.removed_the_staff")))])]]:[activity.info.assigned.assignmentGroup>0?[_c("span",{domProps:{innerHTML:_vm._s(_vm.getActivityMessage(activity).message)}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.team"))+" "),_c("i",[_vm._v(_vm._s(_vm.getGroup(activity.info.assigned.assignmentGroup,activity).name))])]:[_c("b",[_vm._v(_vm._s(_vm.$t("common._common.removed_the_team")))])]]],2):24===activity.type?_c("div",[_c("avatar",{attrs:{size:"sm",user:{name:activity.doneBy.name}}}),_vm._v(" "+_vm._s(activity.doneBy.name)+" "),_c("span",{domProps:{innerHTML:_vm._s(_vm.getActivityMessage(activity).message)}}),_c("i",[_c("span",{staticClass:"fc-id pointer",on:{click:function($event){return _vm.openPm(activity)}}},[_vm._v(" #"+_vm._s(_vm.getPmId(activity))+" ")])])],1):3!==activity.type&&24!==activity.type?_c("div",[_c("avatar",{attrs:{size:"sm",user:{name:activity.doneBy.name}}}),_vm._v(" "+_vm._s(activity.doneBy.name)+" "),_c("span",{domProps:{innerHTML:_vm._s(_vm.getActivityMessage(activity).message)}})],1):_vm._e()]):_vm._e()]}))],2):_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.products.no_activities_tracked_yet"))+" ")])],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(538077),__webpack_require__(879288),__webpack_require__(420629)),validation=__webpack_require__(990260),api=__webpack_require__(32284),Avatar=__webpack_require__(574752),ActivitiesMixin=__webpack_require__(832568),router=__webpack_require__(329435),ActivitiesViewvue_type_script_lang_js={props:["record","serviceportal","module"],data:function(){return{activities:[],loading:!1,userlist:[]}},mixins:[ActivitiesMixin/* default */.Z],components:{Avatar:Avatar["default"]},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.serviceportal){_context.next=5;break}return _context.next=3,_this.loadServicePortalActivities();case 3:_context.next=7;break;case 5:return _context.next=7,_this.loadActivities();case 7:_this.loadusers();case 8:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},sites:function(state){return state.site},metaInfo:function(state){return state.view.metaInfo}})),(0,vuex_esm/* mapGetters */.Se)(["getUser","getGroup","getTicketCategory","getTicketPriority","getTicketType"])),{},{fieldsMap:function(){var _this2=this,metaInfo=this.metaInfo,map={};if(!(0,validation/* isEmpty */.xb)(metaInfo)){var fields=this.$getProperty(metaInfo,"fields",[]);fields.forEach((function(field){_this2.$setProperty(map,"".concat(field.name),field)}))}return map},recordId:function(){var record=this.record,_ref=record||{},id=_ref.id;return id}}),watch:{record:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!_this3.serviceportal){_context2.next=5;break}return _context2.next=3,_this3.loadServicePortalActivities();case 3:_context2.next=7;break;case 5:return _context2.next=7,_this3.loadActivities();case 7:return _context2.next=9,_this3.loadusers();case 9:case"end":return _context2.stop()}}),_callee2)})))()}},created:function(){this.$store.dispatch("view/loadModuleMeta",this.module),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadSite"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadTicketCategory")},methods:{getPmId:function(activity){var _ref2=activity||{},info=_ref2.info,_ref3=info||{},addPMWO=_ref3.addPMWO,pmIdObj=(addPMWO||[]).find((function(obj){return Object.prototype.hasOwnProperty.call(obj,"pmid")}));return(0,validation/* isEmpty */.xb)(pmIdObj)?"":pmIdObj.pmid},loadServicePortalActivities:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.loading=!0,_this4.modulename="workorders",_context3.next=4,api/* API */.bl.get("/v2/activity?workOrderId="+_this4.recordId);case 4:_yield$API$get=_context3.sent,data=_yield$API$get.data,_this4.activities=data,_this4.loading=!1;case 8:case"end":return _context3.stop()}}),_callee3)})))()},openPm:function(activity){var id=this.getPmId(activity);if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForModule */.Jp)("preventivemaintenance",router/* pageTypes */.As.OVERVIEW)||{},name=_ref4.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else this.$router.replace({path:"/app/wo/planned/summary/"+id})},loadusers:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var activities,assignedToIds,userIds,params,_yield$API$get2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(_this5.loading=!0,activities=_this5.activities,// let ouids = [],
assignedToIds=[],activities.forEach((function(activity){var $getProperty=_this5.$getProperty,assignedToId=$getProperty(activity,"info.assigned.assignedTo",null);
// let ouid = $getProperty(activity, 'doneBy.ouid', null)
// !isEmpty(ouid) && ouids.push(`${ouid}`)
(0,validation/* isEmpty */.xb)(assignedToId)||-99===assignedToId||assignedToIds.push("".concat(assignedToId))})),userIds=(0,toConsumableArray/* default */.Z)(new Set([].concat(assignedToIds))),(0,validation/* isEmpty */.xb)(userIds)){_context4.next=13;break}return params={includeParentFilter:!0,filters:JSON.stringify({ouid:{operatorId:36,value:userIds}})},_context4.next=9,api/* API */.bl.get("/setup/portalUsersList",params);case 9:_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error||(_this5.userlist=(null===data||void 0===data?void 0:data.users)||[]);case 13:_this5.loading=!1;case 14:case"end":return _context4.stop()}}),_callee4)})))()},getUserName:function(id){if(id){var usr=[];if(usr=this.users.filter((function(us){return us.ouid===id})),usr.length){var userName=usr[0].name;return userName}if(this.userlist.length){var us=[];if(us=this.userlist.filter((function(u){return u.ouid===id})),us.length){var _userName=us[0].name;return _userName}return"---1"}return"---2"}return"---3"},loadActivities:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var params,_yield$API$get3,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _this6.loading=!0,params={},"asset"===_this6.module?(_this6.modulename="assets",params.assetId=_this6.recordId):"workorder"===_this6.module&&(_this6.modulename="workorders",params.workOrderId=_this6.recordId),_context5.next=5,api/* API */.bl.get("/v2/".concat(_this6.modulename,"/activity"),params);case 5:_yield$API$get3=_context5.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,error||(_this6.activities=data.activity,_this6.loading=!1);case 9:case"end":return _context5.stop()}}),_callee5)})))()},
// getAttachmentsString(obj) {
//   let str = ''
//   for (let item = 0; item < (obj || []).length; item++) {
//     if (item !== 0) {
//       if (item === obj.length - 1) {
//         str += ' and '
//       } else {
//         str += ', '
//       }
//     }
//     str += obj[item]
//   }
//   return str
// },
// getUserCall(names) {
//   if (this.serviceportal) {
//     if (this.$account.user.id === names) {
//       return this.$account.user.name
//     } else {
//       return this.getUser(names).name
//     }
//   } else {
//     return this.getUser(names).name
//   }
// },
// getAssignedBy(updatedFields) {
//   let user = updatedFields.find(el => el.fieldName === 'assignedTo')
//   if (user.newValue) {
//     return this.getUser(user.newValue.id).name
//   } else if (user.oldValue) {
//     return this.getUser(user.oldValue.id).name
//   }
// },
// getLocation(value) {
//   return this.$helpers.parseLocation(value)
// },
// compare(str1, str2) {
//   return !str1.localeCompare(str2)
// },
getTicket:function(info){var _ref5=info||{},field=_ref5.field,displayName=_ref5.displayName,newValue=_ref5.newValue;if("type"===field){var _ref6=this.getTicketType(newValue)||{},ticketTypeName=_ref6.name;return"<b>"+displayName+"</b> as <i>"+ticketTypeName+"</i>"}if("category"===field){var _ref7=this.getTicketCategory(newValue)||{},ticketCategoryDisplayName=_ref7.displayName;return"<b>"+displayName+"</b> as <i>"+ticketCategoryDisplayName+"</i>"}if("priority"===field){var _ref8=this.getTicketPriority(newValue)||{},ticketPriorityDisplayName=_ref8.displayName;return"<b>"+displayName+"</b> as <i>"+ticketPriorityDisplayName+"</i>"}if("dueDate"===field)return"<b>"+displayName+"</b> as <i>"+this.$options.filters.formatDate(newValue)+"</i>";if("resource"===field)return"<b>"+displayName+"</b> as <i>"+newValue+"</i>";if("site"===field)return"<b>"+displayName+"</b> as <i>"+this.getSiteName(newValue)+"</i>";var fieldsMap=this.fieldsMap,_ref9=info||{},fieldName=_ref9.field,_newValue=_ref9.newValue,_field=fieldsMap[fieldName]||{},displayValue=_newValue;return(0,validation/* isEmpty */.xb)(_field)||((0,validation/* isArray */.kJ)(displayValue)||Number(displayValue)&&(displayValue=Number(displayValue)),displayValue=this.$fieldUtils.getDisplayValue(_field,displayValue)),"<b>"+displayName+"</b> as <i>"+displayValue+"</i>"},getSiteName:function(siteId){var site=(this.sites||[]).find((function(site){return site.id===siteId}));return site?site.name:""},getActivityMessage:function(activity){var _this7=this,_ref10=activity||{},type=_ref10.type,info=_ref10.info,message=_ref10.message;if((0,validation/* isEmpty */.xb)(info)||(0,validation/* isEmpty */.xb)(type))return 2===type?{message:"<b> closed all the tasks  </b>"}:{message:"<b>  </b>"};if(4===type&&info.addWO)return{message:"<b>created workorder</b>"};if(24===type&&info.addPMWO&&info.addPMWO.length>2)return{message:"<b> created workorder from PM</b>"};if(5===type&&info.status)return{message:"<b>".concat(info.status.toLowerCase(),"</b> the Work Order")};if(5===type&&info.woupdate){
// let a3 = []
var woupdate=info.woupdate.filter((function(a){return"modifiedTime"!==a.field&&-99!==a.newValue&&a.oldValue!==a.newValue}));
// a3 = a3.filter(a => a.newValue !== -99)
return(0,validation/* isEmpty */.xb)(woupdate)?{message:null}:{message:"<b>updated </b>"+woupdate.reduce((function(accStr,activity){return(0,validation/* isEmpty */.xb)(accStr)?_this7.getTicket(activity):"".concat(accStr,", ").concat(_this7.getTicket(activity))}),"")}}if(3===type)return{message:"<b> assigned </b> the Work Order to"};if(10===type)return{message:"<b> attached </b> <i> ".concat(info.attachment[0].Filename," </i>")};if(36===type)return{message:"<b> added prerequisite photo </b> <i> ".concat(info.taskattachment[0].Filename," </i>")};if(38===type)return{message:"<b> removed prerequisite photo </b> <i> ".concat(info.taskattachment[0].Filename," </i>")};if(37===type)return{message:"<b> approved prerequisite </b>"};if(23===type)return{message:"<b> closed the task </b> <i> ".concat(info.subject," </i>")};if(25===type)return{message:"<b> reopened the task </b> <i> ".concat(info.subject," </i>")};if(8===type)return{message:"<b>"+message+"</b><i>"+info.Task[0].Task+"</i>"};if(12===type)return{message:"<b>updated task ("+info.taskupdate.subject+")</b> input value as <i>"+info.taskupdate.newvalue+"</i>"};if(35===type)return{message:"<b>updated prerequisite ("+info.taskupdate.subject+")</b> input value as <i>"+info.taskupdate.newvalue+"</i>"};if(26===type)return{message:"<b>updated status </b>from <i>"+info.oldValue+" to "+info.newValue+"</i>"};if(9===type)return{message:"<b> added the Comment </b> <i> (".concat(info.Comment,") </i>")};if(113===type)return{message:"<b> deleted the Comment </b> <i> (".concat(info.Comment,") </i>")};if(60===type)return{message:info.message};if(61===type){var _ref11=info||{},_message=_ref11.message,slaEntity=_ref11.slaEntity;return{message:" - "+"<strong>".concat(_message,"</strong>")+(slaEntity?" for ":" ")+(slaEntity||"")}}if(62!==type)return this.getMessage(activity);var _ref12=info||{},name=_ref12.name,slaEntityName=_ref12.slaEntityName,oldDate=_ref12.oldDate,newDate=_ref12.newDate,formatDate=this.$options.filters.formatDate,slaEntityDisplayName=slaEntityName||name||"SLA Date";return(0,validation/* isEmpty */.xb)(oldDate)||(0,validation/* isEmpty */.xb)(newDate)?(0,validation/* isEmpty */.xb)(newDate)?void 0:{message:"has changed <strong>".concat(slaEntityDisplayName,"</strong>  to ")+"<i>".concat(formatDate(newDate,!0,!1),"</i>")}:{message:"has changed <strong>".concat(slaEntityDisplayName,"</strong>  from ")+"<i>".concat(formatDate(oldDate,!0,!1),"</i> to")+"<i>".concat(formatDate(newDate,!0,!1),"</i>")}}}},relatedlist_ActivitiesViewvue_type_script_lang_js=ActivitiesViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_ActivitiesViewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ActivitiesView=component.exports},
/***/31766:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SummaryAttachment2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/SummaryAttachment2.vue?vue&type=template&id=8089043c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-attachments new-attachments"},[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row fc-summary-attchment wo-fc-summary-attchment pL0"},_vm._l(_vm.attachments,(function(attachment,index){return _c("el-row",{key:attachment.attachmentId,staticClass:"attchment-row visibility-visible-actions"},[_c("el-col",{attrs:{span:22}},[_c("el-col",{staticClass:"mT5",attrs:{span:1}},[_c("img",{staticClass:"svg-icon",staticStyle:{width:"20px"},attrs:{src:__webpack_require__(250620)}})]),_c("el-col",{attrs:{span:18}},[_c("div",{staticClass:"pL10"},[attachment.previewUrl?_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName},on:{click:function($event){return _vm.selectedFile(attachment)}}},[_vm._v(_vm._s(attachment.fileName))]):_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName}},[_vm._v(_vm._s(attachment.fileName))]),_vm.getUser(attachment)>0?_c("div",{staticClass:"col-4 comment-file mT2",staticStyle:{border:"none"}},[_vm._v(" "+_vm._s(_vm.getUser(attachment))+" "),attachment.createdTime?_c("span",[_vm._v("| "+_vm._s(_vm._f("formatDate")(attachment.createdTime,"DD-MM_YYYY")))]):_vm._e()]):_c("div",{staticClass:"col-4 comment-file mT2",staticStyle:{border:"none"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(attachment.createdTime,"DD-MM_YYYY"))+" ")])])])],1),_c("el-col",{staticClass:"mT5 pointer",attrs:{span:2}},[_c("img",{staticClass:"mR10",attrs:{src:__webpack_require__(365565),width:"16",height:"15"},on:{click:function($event){return _vm.downloadAttachment(attachment.downloadUrl)}}}),_vm.canShowDelete(attachment)?_c("span",{on:{click:function($event){return _vm.deleteAttachment(attachment,index)}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color mL10 visibility-hide-actions",attrs:{src:"svgs/delete",iconClass:"icon icon-xs fill-red"}})],1):_vm._e()])],1)})),1),_vm.diasbleAttachment?_vm._e():_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("img",{staticClass:"mT10 mB10 opacity-05",attrs:{src:__webpack_require__(581121),width:"20",height:"20"}}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files"))),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])])]),_vm.visibility&&_vm.selectedAttachedFile?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.selectedAttachedFile,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),PreviewFile=(__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(821057),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(891719),__webpack_require__(339772),__webpack_require__(720096)),validation=__webpack_require__(990260),SummaryAttachment2vue_type_script_lang_js={props:["module","record","diasbleAttachment"],data:function(){return{loading:!0,status:{UPLOADING:1,SUCCESS:2,FAILED:3},attachments:[],formFieldName:"attachment",exportDownloadUrl:null,selectedAttachedFile:null,visibility:!1}},components:{PreviewFile:PreviewFile/* default */.Z},mounted:function(){this.loadAttachments()},watch:{record:function(recordObj){this.loadAttachments()}},methods:{canShowDelete:function(attachment){var _ref=attachment||{},uploadedBy=_ref.uploadedBy,status=_ref.status,SUCCESS=this.status.SUCCESS;return((0,validation/* isEmpty */.xb)(status)||status===SUCCESS)&&uploadedBy===this.$account.user.id},deleteAttachment:function(attachment,index){var _this=this,module=this.module,ids=[];ids.push(attachment.id);var obj={attachmentId:ids,module:module};this.$dialog.confirm({title:this.$t("common.header.delete_attachment"),message:this.$t("common.header.are_you_sure_you_want_to_delete_this_attachment"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then((function(value){value&&_this.$http.post("/v2/attachments/delete",obj).then((function(_ref2){var _ref2$data=_ref2.data,message=_ref2$data.message,responseCode=_ref2$data.responseCode;_ref2$data.result;if(0!==responseCode)throw new Error(message);_this.attachments.splice(index,1)}))}))},selectedFile:function(inList){this.selectedAttachedFile=inList,this.visibility=!0},loadAttachments:function(){var self=this;return self.loading=!0,this.$http.get("/attachment?module="+this.module+"&recordId="+this.record.id).then((function(response){self.loading=!1,self.attachments=response.data.attachments?response.data.attachments:[]})).catch((function(error){error&&(self.loading=!1,self.attachments=null)}))},filesChange:function(files){var _this2=this,fileList=Array.from(files);if(fileList.length){var formData=new FormData;formData.append("module",this.module),formData.append("recordId",this.record.id);var _this$status=this.status,UPLOADING=_this$status.UPLOADING,SUCCESS=_this$status.SUCCESS,FAILED=_this$status.FAILED;fileList.forEach((function(file){var _ref3=file||{},name=_ref3.name,size=_ref3.size,type=_ref3.type,fileEntry={fileId:-1,fileName:name,fileSize:size,contentType:type,status:UPLOADING,error:null,previewUrl:null,uploadedBy:_this2.$account.user.id};formData.append(_this2.formFieldName,file,name),_this2.attachments.unshift(fileEntry)})),this.$http.post("/attachment/add",formData).then((function(_ref4){var data=_ref4.data;data.attachments.forEach((function(attachment){var fileId=attachment.fileId,fileName=attachment.fileName,fileSize=attachment.fileSize,attachmentIdx=_this2.attachments.findIndex((function(a){return a.fileName===fileName&&a.fileSize===fileSize}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this2.attachments[attachmentIdx];attachmentFile=fileId?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),attachment),{},{status:SUCCESS}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this2.$set(_this2.attachments,attachmentIdx,attachmentFile)}}))})).catch((function(){fileList.forEach((function(file){var _ref5=file||{},name=_ref5.name,size=_ref5.size,attachmentIdx=_this2.attachments.findIndex((function(a){return a.fileName===name&&a.fileSize===size}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this2.attachments[attachmentIdx];attachmentFile=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this2.$set(_this2.attachments,attachmentIdx,attachmentFile)}}))}))}},getUser:function(assign){if(null!==assign&&assign.id){var assignto=this.$store.getters.getUser(assign.id);return assignto?assignto.name:"---"}return"---"},downloadAttachment:function(url){this.exportDownloadUrl=url},icon:function(file){return file&&"image/png"===file?"statics/icons/png.svg":"statics/icons/pdf.svg"}}},relatedlist_SummaryAttachment2vue_type_script_lang_js=SummaryAttachment2vue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_SummaryAttachment2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SummaryAttachment2=component.exports},
/***/832568:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ActivitiesMixin}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js
__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(538077),__webpack_require__(634338),__webpack_require__(879288),__webpack_require__(450886),__webpack_require__(506203),__webpack_require__(689730);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var render,staticRenderFns,validation=__webpack_require__(990260),field_utils=__webpack_require__(455344),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),ActivitiesMixinvue_type_script_lang_js={methods:{getUserName:function(id){if(id){var user=null;return user=(this.users||[]).find((function(us){return us.ouid===id})),user?user.name:(0,validation/* isEmpty */.xb)(this.portalUserList)?"---2":(user=(this.portalUserList||[]).find((function(u){return u.ouid===id})),user?user.name:"---1")}return"---3"},getAttachmentsString:function(obj){for(var str="",item=0;item<(obj||[]).length;item++)0!==item&&(item===obj.length-1?str+=" and ":str+=", "),str+=obj[item];return str},getAssignedBy:function(updatedFields){var user=(updatedFields||[]).find((function(el){return"assignedTo"===el.fieldName}));return user.newValue?this.getUser(user.newValue.id).name:user.oldValue?this.getUser(user.oldValue.id).name:void 0},getLocation:function(value){return this.$helpers.parseLocation(value)},getMessage:function(activity){var _this=this,_ref=activity||{},info=_ref.info,module=this.module,fieldsMap=this.fieldsMap;if("newreadingalarm"===module)return this.processAlarmActivity(activity);if([63,64,70,71].includes(activity.type))return this.formatQuotationActivity(activity);if(75===activity.type&&!(0,validation/* isEmpty */.xb)(info.changeSet)){var filteredArr=info.changeSet.filter((function(a){var _ref2=a||{},fieldName=_ref2.field,newValue=_ref2.newValue,oldValue=_ref2.oldValue,field=fieldsMap[fieldName]||{},isMultiLookupChanged=!0;return(0,field_utils/* isMultiLookupField */.Xn)(field)&&(isMultiLookupChanged=(newValue||[]).length!==(oldValue||[]).length),isMultiLookupChanged&&"modifiedTime"!==a.field&&-99!==a.newValue&&!((0,validation/* isEmpty */.xb)(a.oldValue)&&(0,validation/* isEmpty */.xb)(a.newValue))&&!isEqual_default()(a.oldValue,a.newValue)&&"moduleState"!==a.field&&"sysModifiedTime"!==a.field}));return(0,validation/* isEmpty */.xb)(filteredArr)?{message:null}:{message:"<b>updated </b>"+filteredArr.reduce((function(accStr,activity){return(0,validation/* isEmpty */.xb)(accStr)?_this.getValue(activity):"".concat(accStr,", ").concat(_this.getValue(activity))}),"")}}
// 64,66,69,71,72 Common Activities for Comment, Attachments, Status Update, Approval, Approval Entry respectively
// use same for other modules
if(65===activity.type)return{message:"<b> added the Comment </b><i>("+this.$getProperty(activity,"info.Comment","")+")</i>"};if(66===(activity||{}).type)return{message:"<b>attached </b><i>"+this.$getProperty(activity,["info","attachment",0,"Filename"],"")+"</i>"};if(69===(activity||{}).type)return{message:"<b>updated status </b>from <i>"+this.$getProperty(activity,"info.oldValue","")+" to "+this.$getProperty(activity,"info.newValue","")+"</i>"};if(72===(activity||{}).type){
// Approval Activity Message
var metaInfo=this.metaInfo,_ref3=metaInfo||{},_module=_ref3.module,_ref4=_module||{},displayName=_ref4.displayName;(0,validation/* isEmpty */.xb)(displayName)&&(displayName=_module);var approvalMessage="",approvalStatus=this.$getProperty(activity,"info.status",""),moduleSingularDisplayName=this.$constants.moduleSingularDisplayNameMap[_module]?this.$constants.moduleSingularDisplayNameMap[_module]:displayName;return"Approved"===approvalStatus?approvalMessage="<b> approved the ".concat(moduleSingularDisplayName,"</b>"):"Rejected"===approvalStatus?approvalMessage="<b> rejected the ".concat(moduleSingularDisplayName,"</b>"):"Requested"===approvalStatus&&(approvalMessage="<b> resent for Approval.</b>"),{message:approvalMessage}}if(73===(activity||{}).type)return{message:"<b> initiated Approval process</b>"};if(109===(activity||{}).type){var employee=((null===info||void 0===info?void 0:info.changeSet)||[]).find((function(a){return"employee"===a.field&&a.newValue>0&&a.oldValue!==a.newValue}));return employee?{message:"<b> assigned <i>".concat(info.empName,"</i> to desk <i>").concat(info.deskName,"</i> </b>")}:{message:null}}if(110===(activity||{}).type){var _employee=((null===info||void 0===info?void 0:info.changeSet)||[]).find((function(a){return"employee"===a.field&&a.oldValue>0&&a.oldValue!==a.newValue}));return _employee?{message:"<b> unassigned <i>".concat(info.empName,"</i> from desk <i>").concat(info.deskName,"</i> </b>")}:{message:null}}return{message:"<b>"+activity.message+"</b>"}},getValue:function(info){var fieldsMap=this.fieldsMap,_ref5=info||{},fieldName=_ref5.field,newValue=_ref5.newValue,oldValue=_ref5.oldValue,field=fieldsMap[fieldName]||{},displayValue=newValue,displayOldValue=oldValue;if(!(0,validation/* isEmpty */.xb)(field)&&((0,validation/* isArray */.kJ)(displayValue)||Number(displayValue)&&(displayValue=Number(displayValue)),displayValue=this.$fieldUtils.getDisplayValue(field,displayValue),(0,validation/* isArray */.kJ)(displayOldValue)||Number(displayOldValue)&&(displayOldValue=Number(displayOldValue)),!(0,validation/* isEmpty */.xb)(displayOldValue)))if((0,field_utils/* isMultiLookupField */.Xn)(field)){var lookupRecordNames=(displayOldValue||[]).map((function(currRecord){return currRecord.displayName||currRecord.name||currRecord.subject}));displayOldValue=lookupRecordNames.length>5?"".concat(lookupRecordNames.slice(0,5).join(", ")," +").concat(Math.abs(lookupRecordNames.length-5)):(0,validation/* isEmpty */.xb)(lookupRecordNames)?"---":"".concat(lookupRecordNames.join(", "))}else displayOldValue=this.$fieldUtils.getDisplayValue(field,displayOldValue);return(0,validation/* isEmpty */.xb)(displayOldValue)||"---"===displayOldValue?"<b>"+info.displayName+"</b> as <i>"+displayValue+"</i>":"<b>"+info.displayName+"</b> from <i>"+displayOldValue+"</i> to <i>"+displayValue+"</i>"},processAlarmActivity:function(activity){return 50===activity.type?{message:"<b>created alarm occurrence </b>"}:51===activity.type?{message:"<b> created workorder </b>"}:53===activity.type?{message:"<b> Acknowledged Alarm </b>"}:54===activity.type?{message:"<b> added the Comment </b><i>("+activity.infoJsonStr.Comment+")</i>"}:56===activity.type?{message:"<b> alarm occurrence cleared </b>"}:57===activity.type?{message:"<b> Auto Cleared </b>"}:"Activity"},formatQuotationActivity:function(activity){var amount,message="",val=this.$getProperty(activity,"info.totalCost",null);return val&&(val=this.$d3.format(",.2f")(val),amount="$"===this.$currency||"₹"===this.$currency?this.$currency+val:val+" "+this.$currency),63===activity.type?message="<b> Created the Quote for </b>"+(amount?"<i>".concat(amount,"</i>"):""):64===activity.type?message="<b> Updated the Quote.</b>"+(amount?"<b> Amount changed to</b> <i>".concat(amount,"</i>"):""):70===activity.type?message="<b> Associated Term(s)</b> <i>".concat(this.$getProperty(activity,"info.termsName"),"</i>"):71===activity.type&&(message="<b> Disassociated Term(s) </b> <i>".concat(this.$getProperty(activity,"info.termsName"),"</i>")),{message:message}}}},widget_ActivitiesMixinvue_type_script_lang_js=ActivitiesMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(widget_ActivitiesMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ActivitiesMixin=component.exports},
/***/989778:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FMiniChart}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/minicharts/components/FMiniChart.vue?vue&type=template&id=4ec3313e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"f-minichart",attrs:{id:"f-minichart"}})},staticRenderFns=[],d3=__webpack_require__(348727),semidoughnut=__webpack_require__(387901),progress=__webpack_require__(640161),FMiniChartvue_type_script_lang_js={props:["type","data"],data:function(){return{chartcontext:null}},mounted:function(){this.generate()},watch:{data:function(){this.$refs["f-minichart"].innerHTML="",this.generate()}},methods:{generate:function(){var chartContext={};switch(chartContext.selecter=this.$refs["f-minichart"],chartContext.width=100,chartContext.height=100,chartContext.svg=d3.select(chartContext.selecter).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(chartContext.width,chartContext.height)+" "+Math.min(chartContext.width,chartContext.height)).attr("preserveAspectRatio","xMinYMin").append("g"),"semidoughnut"===this.type&&chartContext.svg.attr("transform","translate("+Math.min(chartContext.width,chartContext.height)/2+","+Math.min(chartContext.width,chartContext.height)/2+") "),chartContext.data=this.data,this.type){case"semidoughnut":semidoughnut/* default */.Z.generate(chartContext);break;case"progress":progress/* default */.Z.generate(chartContext);break}}}},components_FMiniChartvue_type_script_lang_js=FMiniChartvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FMiniChartvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FMiniChart=component.exports},
/***/676474:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return V3LookupFieldWizard}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),FLookupFieldWizard=(__webpack_require__(648324),__webpack_require__(499751)),api=__webpack_require__(32284),validation=__webpack_require__(990260),V3LookupFieldWizardvue_type_script_lang_js={name:"V3LookupFieldWizard",extends:FLookupFieldWizard["default"],methods:{fetchModulesData:function(){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var skipResetPage,moduleName,_this$filters,filters,perPage,page,_this$withReadings,withReadings,selectedLookupField,_ref,clientCriteria,additionalParams,_yield$API$fetchAll,list,meta,error,totalCount;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return skipResetPage=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],moduleName=_this.moduleName,_this$filters=_this.filters,filters=void 0===_this$filters?{}:_this$filters,perPage=_this.perPage,page=_this.page,_this$withReadings=_this.withReadings,withReadings=void 0===_this$withReadings?null:_this$withReadings,selectedLookupField=_this.selectedLookupField,_ref=selectedLookupField||{},clientCriteria=_ref.clientCriteria,additionalParams=_ref.additionalParams,_context.next=5,api/* API */.bl.fetchAll(moduleName,(0,objectSpread2/* default */.Z)({withCount:!0,page:(0,validation/* isEmpty */.xb)(filters)||skipResetPage?page:1,filters:(0,validation/* isEmpty */.xb)(filters)?null:JSON.stringify(filters),perPage:perPage,viewName:"hidden-all",withReadings:withReadings,clientCriteria:(0,validation/* isEmpty */.xb)(clientCriteria)?null:JSON.stringify(clientCriteria)},additionalParams));case 5:_yield$API$fetchAll=_context.sent,list=_yield$API$fetchAll.list,meta=_yield$API$fetchAll.meta,error=_yield$API$fetchAll.error,totalCount=_this.$getProperty(meta,"pagination.totalCount",null),error?_this.$message.error(error.message):((0,validation/* isNullOrUndefined */.le)(list)||_this.$set(_this,"modulesList",list),(0,validation/* isNullOrUndefined */.le)(totalCount)||_this.$set(_this,"totalCount",totalCount)),_this.isSearchDataLoading=!1;case 12:case"end":return _context.stop()}}),_callee)})))()},loadDataCount:function(){}}},components_V3LookupFieldWizardvue_type_script_lang_js=V3LookupFieldWizardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_V3LookupFieldWizardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,V3LookupFieldWizard=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
},
/***/784823:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AdvancedSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/search/AdvancedSearch.vue?vue&type=template&id=66305202
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"d-flex align-center",on:{click:function($event){return _vm.openCloseSearch(!0)}}},[_vm._t("icon",(function(){return[_c("InlineSvg",{staticClass:"d-flex mT3 cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm self-center mR5"}})]}))],2),_vm.canShowSearchWiz?_c("el-dialog",{attrs:{title:_vm.title,visible:_vm.canShowSearchWiz,fullscreen:!0,"append-to-body":!0,"custom-class":"advance-search-container"},on:{"update:visible":function($event){_vm.canShowSearchWiz=$event}}},[_c("AdvancedSearch",{attrs:{moduleName:_vm.moduleName,searchParam:_vm.searchParam,hideQuery:_vm.hideQuery,filterList:_vm.filterList},on:{applyFilters:_vm.applyFilters,closeDialog:function(){return _vm.openCloseSearch(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),router=(__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(329435)),dist=__webpack_require__(191853),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),AdvancedSearchvue_type_script_lang_js={props:["moduleName","moduleDisplayName","filterList","hideQuery","onSave"],components:{AdvancedSearch:dist/* AdvancedSearch */.ZJ},data:function(){return{searchText:"",canShowSearchWiz:!1,isSaving:!1,searchableFields:[],isOpenWizPressed:!1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler))},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&(document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler))},computed:{title:function(){var moduleDisplayName=this.moduleDisplayName,title="".concat(this.$t("commissioning.sheet.filter")," ").concat(moduleDisplayName," ").concat(this.$t("filters.search.by"));return title},searchParam:function(){var $route=this.$route,_ref=$route||{},query=_ref.query,_ref2=query||{},search=_ref2.search;return(0,validation/* isEmpty */.xb)(search)?"":search}},mounted:function(){this.fetchSearchableFields({moduleName:this.moduleName})},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({fetchSearchableFields:"search/fetchSearchableFields"})),{},{openCloseSearch:function(canShow){this.searchText="",this.canShowSearchWiz=canShow},applyFilters:function(filters){var hideQuery=this.hideQuery;hideQuery?this.onSave({filters:filters}):this.$store.dispatch("search/applyFilters",filters),this.openCloseSearch(!1)},keyDownHandler:function(e){if(e.shiftKey&&"Slash"===e.code)this.isOpenWizPressed=!0;else{var _navigator=navigator,userAgentData=_navigator.userAgentData,platform=_navigator.platform,_ref3=userAgentData||{},userPlatform=_ref3.platform,currentOS=userPlatform||platform,isMac=currentOS.toUpperCase().indexOf("MAC")>=0;(isMac&&e.metaKey||!isMac&&e.ctrlKey)&&"Enter"===e.key&&this.applyFilter()}},keyUpHandler:function(){this.isOpenWizPressed&&(this.openCloseSearch(!0),this.isOpenWizPressed=!1)}})},search_AdvancedSearchvue_type_script_lang_js=AdvancedSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(search_AdvancedSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AdvancedSearch=component.exports},
/***/16297:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkHours}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/widgets/dialogs/WorkHours.vue?vue&type=template&id=4efda2fd
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"duration-dialog setup-dialog",attrs:{visible:_vm.showDialog,width:"40%"},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v("Set Work Hours")])])]),_c("div",{staticClass:"duration-body-scroll"},[_vm.id&&-1!=_vm.id?_c("div",[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v("Estimated Duration")]),_c("el-row",{staticClass:"el-row"},[_vm.estimatedDuration.days?_c("div",{staticClass:"el-col el-col-7"},[_vm._v(" "+_vm._s(_vm.estimatedDuration.days+" Days")+" ")]):_vm._e(),_c("div",{staticClass:"el-col el-col-11"},[_vm._v(" "+_vm._s(_vm.estimatedDuration.hours+" Hour"+(_vm.estimatedDuration.hours>1?"s":""))+" ")])])],1):_vm._e(),_c("div",[_c("duration",{staticClass:"fc-dark-grey-txt14",attrs:{label:"Work Hours"},model:{value:_vm.actualDuration,callback:function($$v){_vm.actualDuration=$$v},expression:"actualDuration"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("span",{attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.setDuration}},[_vm._v("SET")])],1)])])},staticRenderFns=[],FWorkHourDurationvue_type_template_id_630dc428_render=(__webpack_require__(897389),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:_vm.labelClass},[_vm._v(_vm._s(_vm.label?_vm.label:"Duration"))]),_c("el-row",{attrs:{gutter:10}},[_vm._t("prefix"),_c("el-col",{attrs:{span:"l"==_vm.size?8:5}},[_c("el-input",{staticStyle:{width:"37%"},attrs:{type:"number",min:"0"},on:{change:function($event){return _vm.updateDuration("manual-entry")}},model:{value:_vm.duration.day,callback:function($$v){_vm.$set(_vm.duration,"day",$$v)},expression:"duration.day"}}),_c("span",{staticClass:"textcolor pL10"},[_vm._v("Day(s)")])],1),_c("el-col",{attrs:{span:11}},[_c("el-select",{staticStyle:{width:"50%"},on:{change:function($event){return _vm.updateDuration("manual-entry")}},model:{value:_vm.duration.hour,callback:function($$v){_vm.$set(_vm.duration,"hour",$$v)},expression:"duration.hour"}},_vm._l(_vm.getNumberRange(23),(function(hour){return _c("el-option",{key:hour.value,attrs:{label:hour.label,value:hour.value}})})),1),_c("span",{staticClass:"textcolor pL10"},[_vm._v("Hour(s)")])],1)],2),_vm._l(_vm.workTimings,(function(v,i){return _c("el-row",{key:i},[_c("div",{staticClass:"creteria-delete-new"},[_c("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"Start Time","end-placeholder":"End Time",format:"yyyy-MM-dd HH","value-format":"timestamp","range-separator":"To"},on:{change:function($event){return _vm.updateDuration("split")}},model:{value:_vm.workTimings[i],callback:function($$v){_vm.$set(_vm.workTimings,i,$$v)},expression:"workTimings[i]"}}),_vm.workTimings.length===parseInt(i)+1?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"37px"},attrs:{src:__webpack_require__(353654)},on:{click:_vm.addTiming}}):_vm._e(),0!==i?_c("img",{staticClass:"delete-icon",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteTiming(i)}}}):_vm._e()],1)])}))],2)}),FWorkHourDurationvue_type_template_id_630dc428_staticRenderFns=[],moment_timezone=(__webpack_require__(670560),__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),FWorkHourDurationvue_type_script_lang_js={props:["value","label","labelClass","format","size"],data:function(){return{duration:{day:0,hour:0},workTimings:[],now:moment_timezone_default()()}},watch:{duration:{handler:function(){this.onValueChange()},deep:!0}},mounted:function(){this.workTimings.push([Number(this.now.format("x")),Number(this.now.format("x"))]);var unwatch=this.$watch("value",(function(value){if(value&&-1!==value.duration){var duration=value.duration,factor=1;factor="h"===this.format?1:3600;var days=Math.floor(duration/(24*factor));duration-=24*days*factor;var hours=Math.floor(duration/factor);this.duration.day=days,this.duration.hour=hours,unwatch()}}),{immediate:!0})},methods:{updateDuration:function(val){if("manual-entry"===val){var start=this.now.clone().subtract(this.duration.day,"days").subtract(this.duration.hour,"hours");this.workTimings=[[Number(start.format("x")),Number(this.now.format("x"))]],this.onValueChange()}else"split"===val&&this.setDuration(this.workTimings)},setDuration:function(val){var totalDuration=moment_timezone_default().duration(0);val.forEach((function(e){if(0!==e.length){var duration=moment_timezone_default().duration(moment_timezone_default()(e[1],"x").diff(moment_timezone_default()(e[0],"x")));totalDuration.add(duration)}})),this.$set(this.duration,"day",totalDuration.get("days")),this.$set(this.duration,"hour",totalDuration.get("hours"))},addTiming:function(){this.workTimings.push([])},deleteTiming:function(i){this.workTimings.splice(i,1)},getNumberRange:function(no){for(var list=[],i=0;i<=no;i++)list.push({label:i+"",value:i});return list},onValueChange:function(){var factor=1;factor="h"===this.format?1:3600;var duration=24*this.duration.day*factor;duration+=this.duration.hour*factor,duration=duration||-1,this.$emit("input",{workTimings:this.workTimings,duration:duration})}}},components_FWorkHourDurationvue_type_script_lang_js=FWorkHourDurationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FWorkHourDurationvue_type_script_lang_js,FWorkHourDurationvue_type_template_id_630dc428_render,FWorkHourDurationvue_type_template_id_630dc428_staticRenderFns,!1,null,null,null)
/* harmony default export */,FWorkHourDuration=component.exports,WorkHoursvue_type_script_lang_js={props:["visible","id","callback"],components:{Duration:FWorkHourDuration},data:function(){return{showDialog:this.visible,estimatedDuration:{hours:0,days:0},actualDuration:null}},watch:{visible:{handler:function(val){val&&this.getEstimatedDuration()},immediate:!0},showDialog:function(val){this.$emit("update:visible",val)}},methods:{getEstimatedDuration:function(){var _this=this;this.id&&-1!==this.id&&this.$http.get("/workorder/getEstimatedWorkDuration?workOrderId="+this.id).then((function(response){if(response&&response.data){var duration=response.data.estimatedDuration;if(duration&&-1!==duration){var days=Math.floor(duration/86400);duration-=86400*days;var hours=(duration/3600).toFixed(2);_this.estimatedDuration.days=days,_this.estimatedDuration.hours=hours}}}))},setDuration:function(){this.callback&&this.callback(this.actualDuration)},close:function(){this.showDialog=!1}}},dialogs_WorkHoursvue_type_script_lang_js=WorkHoursvue_type_script_lang_js,WorkHours_component=(0,componentNormalizer/* default */.Z)(dialogs_WorkHoursvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkHours=WorkHours_component.exports},
/***/455360:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkOrderSummaryPdfOptions}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v1/WorkOrderSummaryPdfOptions.vue?vue&type=template&id=0c2591ac&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.visibility?_c("el-dialog",{attrs:{"append-to-body":!0,title:_vm.title,visible:_vm.visibility,width:"28%","before-close":_vm.closeDialog,"custom-class":"fc-dialog-center-container scale-up-center"},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"height300"},[_c("el-checkbox",{model:{value:_vm.checked,callback:function($$v){_vm.checked=$$v},expression:"checked"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.show_photo")))]),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.showAttachement,callback:function($$v){_vm.showAttachement=$$v},expression:"showAttachement"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_attachement"))+" "),_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:_vm.$t("common.wo_report.prints_image_type"),placement:"bottom"}},[_c("i",{staticClass:"el-icon-info capp-linkname"})])],1),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.showComments,callback:function($$v){_vm.showComments=$$v},expression:"showComments"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_comments"))+" ")]),_c("el-checkbox",{staticClass:"pT20 mR100",model:{value:_vm.showHistory,callback:function($$v){_vm.showHistory=$$v},expression:"showHistory"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_history"))+" ")]),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.useSiteLogo,callback:function($$v){_vm.useSiteLogo=$$v},expression:"useSiteLogo"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.use_site_logo"))+" ")]),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.showSignature,callback:function($$v){_vm.showSignature=$$v},expression:"showSignature"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_signature"))+" ")])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.disableDownloadButton},on:{click:function($event){_vm.isDownloadOption?_vm.downloadWorkOrder():_vm.printWorkOrder()}}},[_vm._v(_vm._s(_vm.confirmButtonText)+" ")])],1)]):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),router=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(779307),__webpack_require__(398858),__webpack_require__(461318),__webpack_require__(33228),__webpack_require__(634338),__webpack_require__(212826),__webpack_require__(329435)),vuex_esm=__webpack_require__(420629),WorkOrderSummaryPdfOptionsvue_type_script_lang_js={
//props: ['visibility', 'workorders', 'viewName', 'isDownloadOption', 'pdfUrl'],
props:{visibility:{type:Boolean,default:!1},workorders:{type:Array,default:function(){return[]}},viewName:{type:String,default:""},isDownloadOption:{type:Boolean,default:!1},pdfUrl:{type:String,default:""},isPdfDownload:{type:Boolean,default:!1}},data:function(){return{checked:!1,showAttachement:!1,showComments:!1,showHistory:!1,useSiteLogo:!1,showSignature:!0}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({currentTab:function(state){return state.webtabs.selectedTab},currentGroup:function(state){return state.webtabs.selectedTabGroup}})),{},{selected:function(){return this.data.checked},title:function(){var isDownloadOption=this.isDownloadOption;return isDownloadOption?this.$t("common.wo_report.download_options"):this.$t("common.wo_report.print_options")},confirmButtonText:function(){var isDownloadOption=this.isDownloadOption;return isDownloadOption?this.$t("common.wo_report.download"):this.$t("common.wo_report.print")},disableDownloadButton:function(){var isDownloadOption=this.isDownloadOption,isPdfDownload=this.isPdfDownload;return isDownloadOption&&isPdfDownload}}),methods:{closeDialog:function(){this.$emit("update:visibility",!1)},getFileUrl:function(){var workorders=this.workorders,checked=this.checked,showAttachement=this.showAttachement,showComments=this.showComments,showHistory=this.showHistory,useSiteLogo=this.useSiteLogo,showSignature=this.showSignature,viewName=this.viewName,_getApp=(0,router/* getApp */.wx)(),linkName=_getApp.linkName,appName="newapp"===linkName?"app":linkName,query=new URLSearchParams;if(query.append("workorderId",workorders),query.append("showImage",checked),query.append("showAttachements",showAttachement),query.append("showComments",showComments),query.append("showHistory",showHistory),query.append("useSiteLogo",useSiteLogo),query.append("showSignature",showSignature),query.append("viewName",viewName),(0,router/* isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,currentGroup=this.currentGroup;query.append("currentTabId",currentTab.id),query.append("currentGroupId",currentGroup.id)}var url="".concat(window.location.origin,"/").concat(appName,"/pdf/summarydownloadreport?").concat(query.toString());return url},printWorkOrder:function(){var getFileUrl=this.getFileUrl,url=getFileUrl();window.open(url)},downloadWorkOrder:function(){var getFileUrl=this.getFileUrl,url=getFileUrl();this.$emit("update:pdfUrl",url)}}},v1_WorkOrderSummaryPdfOptionsvue_type_script_lang_js=WorkOrderSummaryPdfOptionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_WorkOrderSummaryPdfOptionsvue_type_script_lang_js,render,staticRenderFns,!1,null,"0c2591ac",null)
/* harmony default export */,WorkOrderSummaryPdfOptions=component.exports},
/***/100830:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WorkorderSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v1/WorkorderSummary.vue?vue&type=template&id=785924c6&scoped=true
var render=function(){var this$1=this,_vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:["new-summary-view wo-summary-page",!_vm.isNotPortal&&"portal-wo-summary-page"],staticStyle:{height:"auto"}},[_vm.workorder?_c("div",[_c("div",{staticClass:"fc-pm-summary-header fc-new-pm-summary-header"},[_c("div",{staticClass:"fL pointer"},[_c("div",{staticClass:"wos-id",attrs:{title:_vm.$t("common.header.back")},on:{click:_vm.back}},[_c("img",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"perspective"},expression:"{ arrow: true, animation: 'perspective' }"}],staticClass:"vertical-middle mR5 mL3 pointer",attrs:{src:__webpack_require__(528661),"data-position":"top",width:"12",height:"12"}}),_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.workorder.serialNumber))])]),_c("div",{staticClass:"heading-black22 pT5 flex-middle"},[_vm.$getProperty(_vm.workorder,"moduleState.id",null)&&_vm.isStatusLocked(_vm.workorder.moduleState.id,"workorder")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fa fa-lock locked-wo",attrs:{"data-arrow":"true",title:_vm.$t("maintenance.approval.waiting_for_approval")}}):_vm._e(),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"max-width500px textoverflow-ellipsis show",attrs:{title:_vm.workorder.subject,"data-arrow":"true"}},[_vm._v(" "+_vm._s(_vm.workorder.subject?_vm.workorder.subject:"---")+" ")]),_c("span",{staticClass:"fc-newsummary-chip"},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.workorder,"moduleState.id",null)&&(_vm.$store.getters.getTicketStatus(_vm.workorder.moduleState.id,"workorder")||{}).displayName||"---")+" ")])])]),_c("div",{staticClass:"fc-v1-sum-H-fR fR pT10 position-relative",staticStyle:{"z-index":"100"}},[_vm.showAssetBreakdown?_c("asset-breakdown",{attrs:{assetBDSourceDetails:_vm.assetBDSourceDetails,visibility:_vm.showAssetBreakdown},on:{"update:visibility":function($event){_vm.showAssetBreakdown=$event}}}):_vm._e(),_c("div",{staticClass:"flex-middle"}),_c("div",[_c("div",{staticClass:"fR display-flex"},[_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[3===_vm.$account.user.appType?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                  arrow: true,\n                  arrowType: 'round',\n                  animation: 'fade',\n                }"}],staticClass:"gTranslate-icon-place fc-gtransalte",class:{translateActive:_vm.isActive},attrs:{content:"Show translation text changes in subject,description,comments and tasks"},on:{click:_vm.handleTranslate}},[_c("inline-svg",{attrs:{src:"svgs/google-translate",iconClass:"icon text-center icon-md vertical-middle"}})],1):_vm._e()]):_vm._e(),_c("CustomButton",{attrs:{moduleName:"workorder",record:_vm.workorder,updateUrl:_vm.updateUrlString,transformFn:_vm.transformFormData,position:_vm.POSITION.SUMMARY},on:{refresh:_vm.onTransitionSuccess,onSuccess:function(){},onError:function(){}}}),_c("TransitionButtons",{ref:"TransitionButtons",attrs:{moduleName:"workorder",record:_vm.workorder,transformFn:_vm.transformFormData,transitionFilter:_vm.transitionFilter,updateUrl:_vm.updateUrlString,disabled:_vm.isApprovalEnabled,buttonClass:"asset-el-btn"},on:{currentState:function(id){return _vm.$setProperty(_vm.workorder,"moduleState.id",id)},transitionSuccess:_vm.onTransitionSuccess,transitionFailure:function(){}}}),_c("el-dropdown",{staticClass:"mL10 fc-btn-ico-lg pointer",staticStyle:{"padding-top":"5px","padding-bottom":"5px"},attrs:{trigger:"click"}},[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{attrs:{src:__webpack_require__(935010),width:"16",height:"16"}})]),_c("el-dropdown-menu",{staticClass:"p10",attrs:{slot:"dropdown",trigger:"click"},slot:"dropdown"},[_c("div",{staticClass:"pT5 pB5 fc-label-hover label-txt-black f14 pL10 pR10 pointer",on:{click:function($event){return _vm.openPrintOptionDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.print"))+" ")]),_c("div",{staticClass:"pT5 pB5 fc-label-hover label-txt-black f14 pL10 pR10 pointer",on:{click:function($event){return _vm.openDownloadOptionDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.download"))+" ")]),_vm.canShowReportDownTime?_c("div",{staticClass:"pT5 pB5 fc-label-hover label-txt-black f14 pL10 pR10 pointer",on:{click:function($event){return _vm.openAssetBreakDown(_vm.workorder.resource.id,_vm.workorder.subject)}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.report_downtime"))+" ")]):_vm._e(),_vm.enablePrerequisiteApprove?_c("div",{staticClass:"pT5 pB5 fc-label-hover label-txt-black f14 pL10 pR10 pointer",on:{click:function($event){return _vm.preRequisiteApprove()}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.prerequisite_approve"))+" ")]):_vm._e()])],1)],1)])],1)]),_vm.isApprovalEnabled?_c("ApprovalBar",{attrs:{moduleName:"workorder",record:_vm.workorder,transformFn:_vm.transformFormData,canShowEdit:"true"},on:{onSuccess:_vm.onTransitionSuccess,onFailure:function(){},onEdit:function(){this$1.$refs["wo-field-details"].openWoEditForm()}}}):_vm._e(),_c("div",{class:["clearboth fc-pm-summary-tab wo-summary-container",_vm.isApprovalEnabled&&"offset-top"]},[_c("el-tabs",{model:{value:_vm.activeName,callback:function($$v){_vm.activeName=$$v},expression:"activeName"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("maintenance._workorder.summary"),name:"first"}},[_c("div",{staticClass:"pm-summary-inner-container"},[_c("div",{staticClass:"fL pm-summary-inner-left-con mT20 fc-res-dell fc-wo-page-scroll scrollbar-style"},[_vm.workorder.subject.length>45||_vm.workorder.description?_c("div",{staticClass:"p30 white-bg-block pB40 fc__wo__sum__h__desc mB20"},[_c("div",[_vm.workorder.subject.length>45?_c("div",{staticClass:"heading-black18"},[_vm._v(" "+_vm._s(_vm.workorder.subject?_vm.workorder.subject:"---")+" ")]):_vm._e(),_vm.workorder.description?_c("div",{staticClass:"space-preline pm-summary-tab-subject",domProps:{innerHTML:_vm._s(_vm.getDescription(_vm.workorder))}}):_vm._e()]),_vm.workorder.subject.length>45?_c("div",[_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[3===_vm.$account.user.appType?_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:_vm.workorder.subject,extraContent:_vm.workorder.description}}):_vm._e()],1):_vm._e()]):_vm._e()]):_c("div",[_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[3===_vm.$account.user.appType?_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:_vm.workorder.description}}):_vm._e()],1):_vm._e()]):_vm._e()])]):_vm._e(),_c("div",{staticClass:"clearboth"},[_c("el-row",{attrs:{gutter:10}},[_c("el-col",{attrs:{span:8}},[_vm.taskChartData?_c("div",{staticClass:"p30 white-bg-block nws-chart-container height212px width100"},[_c("f-mini-chart",{staticClass:"nws-chart",attrs:{type:"semidoughnut",data:_vm.taskChartData}})],1):_vm._e()]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"col-4 white-bg-block new-sum-scheduled height212px width100"},[_c("div",{staticClass:"fc__wo__sum__chart_block position-relative"},[_c("div",{staticClass:"fc-black-13 fw-bold text-left pL20"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.scheduled"))+" ")])]),_vm.workorder.scheduledStart&&_vm.workorder.scheduledStart>-1||_vm.workorder.estimatedEnd&&_vm.workorder.estimatedEnd>-1?_c("div",{staticClass:"row pL20 pR20 pT20"},[_c("div",{staticClass:"col-6 n-su-left-cont"},[_c("div",{},[_c("div",{staticClass:"fc-text-pink11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.header.start"))+" ")]),_vm.workorder.scheduledStart&&_vm.workorder.scheduledStart>-1?_c("div",{staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.scheduledStart,!0))+" ")]):_c("div",{staticClass:"fc-black-13 text-left pT10"},[_vm._v(" --- ")])]),_c("div",{staticClass:"mT40"},[_c("div",{staticClass:"fc-text-pink11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.finish"))+" ")]),_vm.workorder.estimatedEnd&&_vm.workorder.estimatedEnd>-1?_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.estimatedEnd,!0))+" ")]):_vm.workorder.dueDate&&_vm.workorder.dueDate>-1?_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.dueDate,!0))+" ")]):_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" --- ")])])]),_c("div",{staticClass:"col-6"},[_vm.workorder.scheduledStart&&_vm.workorder.scheduledStart>-1?_c("div",{staticClass:"fc-black-22 pT10"},[_vm._v(" "+_vm._s(_vm.formDate(_vm.workorder.scheduledStart,"hh:mm"))+" "),_c("span",{staticClass:"fc-grey3-text14"},[_vm._v(_vm._s(_vm.formDate(_vm.workorder.scheduledStart,"A")))])]):_c("div",{staticClass:"fc-black-22 pT10"},[_vm._v("---")]),_vm.workorder.estimatedEnd&&_vm.workorder.estimatedEnd>-1?_c("div",{staticClass:"fc-black-22 mT40"},[_vm._v(" "+_vm._s(_vm.formDate(_vm.workorder.estimatedEnd,"hh:mm"))+" "),_c("span",{staticClass:"fc-grey3-text14"},[_vm._v(_vm._s(_vm.formDate(_vm.workorder.estimatedEnd,"A")))])]):_vm.workorder.dueDate&&_vm.workorder.dueDate>-1?_c("div",{staticClass:"fc-black-22 mT40"},[_vm._v(" "+_vm._s(_vm.formDate(_vm.workorder.dueDate,"hh:mm"))+" "),_c("span",{staticClass:"fc-grey3-text14"},[_vm._v(_vm._s(_vm.formDate(_vm.workorder.dueDate,"A")))])]):_c("div",{staticClass:"fc-black-22 mT40"},[_vm._v("---")])])]):_c("div",[_c("div",{staticClass:"text-center fc-black-14 pT60 pB60"},[_vm._v(" "+_vm._s(_vm.$t("common._common.nodata"))+" ")])])])]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"col-4 white-bg-block new-sum-scheduled height212px width100"},[_c("div",{staticClass:"fc__wo__sum__chart_block position-relative"},[_c("div",{staticClass:"fc-black-13 fw-bold text-left pL20"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.actual"))+" ")])]),_vm.workorder.actualWorkStart&&_vm.workorder.actualWorkStart>-1||_vm.workorder.actualWorkEnd&&_vm.workorder.actualWorkEnd>-1?_c("div",{staticClass:"row pL20 pR20 pT20"},[_c("div",{staticClass:"col-5 n-su-left-cont"},[_c("div",{},[_c("div",{staticClass:"fc-text-pink11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.header.start"))+" ")]),_vm.workorder.actualWorkStart&&_vm.workorder.actualWorkStart>-1?_c("div",{staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.actualWorkStart,!0))+" ")]):_c("div",{staticClass:"fc-black-13 text-left pT10"},[_vm._v(" --- ")])]),_c("div",{staticClass:"mT40"},[_c("div",{staticClass:"fc-text-pink11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.finish"))+" ")]),_vm.workorder.actualWorkEnd&&_vm.workorder.actualWorkEnd>-1?_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.actualWorkEnd,!0))+" ")]):_c("div",{staticClass:"fc-black-13 text-left"},[_vm._v(" --- ")])])]),_c("div",{staticClass:"col-2 timer-line"},[_c("div",{staticClass:"nu-su-timer-icon"},[_c("i",{staticClass:"el-icon-time"})]),_c("div",{staticClass:"nu-su-time-line",class:{shnotfinished:_vm.workorder.actualWorkEnd&&_vm.workorder.actualWorkEnd<0}}),_c("div",{staticClass:"nu-su-timer-icon nu-bottom-time",class:{shnotfinished:_vm.workorder.actualWorkEnd&&_vm.workorder.actualWorkEnd<0}},[_c("i",{staticClass:"el-icon-time"})])]),_c("div",{staticClass:"col-5"},[_vm.workorder.actualWorkStart&&_vm.workorder.actualWorkStart>-1?_c("div",{staticClass:"fc-black-22 pT10"},[_vm._v(" "+_vm._s(_vm.formDate(_vm.workorder.actualWorkStart,"hh:mm"))+" "),_c("span",{staticClass:"fc-grey3-text14"},[_vm._v(_vm._s(_vm.formDate(_vm.workorder.actualWorkStart,"a")))])]):_c("div",{staticClass:"fc-black-22 pT35"},[_vm._v("---")]),_vm.workorder.actualWorkEnd&&_vm.workorder.actualWorkEnd>-1?_c("div",{staticClass:"fc-black-22 pT35"},[_vm._v(" "+_vm._s(_vm.formDate(_vm.workorder.actualWorkEnd,"hh:mm"))+" "),_c("span",{staticClass:"fc-grey3-text14"},[_vm._v(_vm._s(_vm.formDate(_vm.workorder.actualWorkEnd,"a")))])]):_c("div",{staticClass:"fc-black-22 pT35"},[_vm._v("---")])])]):_c("div",[_c("div",{staticClass:"text-center fc-black-14 pT60 pB60"},[_vm._v(" "+_vm._s(_vm.$t("common._common.nodata"))+" ")])])])])],1)],1),this.$helpers.isLicenseEnabled("NEW_COMMENTS")?_c("div",{staticClass:"clearboth white-bg-block new-summary-block mT20"},[_c("NotesWidget",{attrs:{details:_vm.workorder,moduleName:"workorder",notesModuleName:"ticketnotes",widget:_vm.commentWidget,layoutParams:_vm.commentWidgetLayoutParam,resizeWidget:_vm.resizeWidget}})],1):_c("div",{staticClass:"clearboth"},[_c("div",{staticClass:"white-bg-block new-summary-block mT20 pL30 pR30"},[_c("div",{staticClass:"label-txt-black pT20 fw-bold"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.comments"))+" ")]),_vm._l(_vm.comments,(function(comment){return _c("el-row",{key:comment.id,staticClass:"border-bottom4 pT20 pB20 visibility-visible-actions"},[_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"flLeft"},[_c("avatar",{attrs:{size:"sm",user:{name:comment.createdBy?comment.createdBy.name:"Unknown User"}}})],1),_c("div",{staticClass:"flLeft",staticStyle:{"margin-top":"0px","padding-left":"15px","max-width":"90%"}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"new-cmd-name"},[_vm._v(_vm._s(comment.createdBy?comment.createdBy.name:"Unknown User"))])]),_c("div",{staticClass:"flLeft",staticStyle:{width:"6px",height:"6px",background:"rgb(216, 216, 216)","border-radius":"50%","margin-left":"23px"}}),_c("div",{staticClass:"flLeft pL5 secondary-color f12 comment-time",staticStyle:{"font-weight":"normal","font-style":"normal","font-stretch":"normal","line-height":"normal","letter-spacing":"0.5px",color:"#8ca1ad"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(comment.createdTime))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{}},[null!=comment.bodyHTML?_c("div",{staticClass:"markdown-style",domProps:{innerHTML:_vm._s(comment.bodyHTML)}}):_vm._e(),_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[3===_vm.$account.user.appType?_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:comment.bodyText}}):_vm._e()],1):_vm._e()]):_vm._e()])]),_c("div",{staticClass:"clearboth"})]),(comment.createdBy||{}).id===_vm.$account.user.id?_c("el-col",{staticClass:"mT5 pointer pointer",attrs:{span:2},on:{click:function($event){return _vm.deleteNote(comment,_vm.index)}}},[_c("span",{on:{click:function($event){return _vm.deleteNote(comment)}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color mL10 visibility-hide-actions",attrs:{src:"svgs/delete",iconClass:"icon icon-xs fill-red"}})],1)]):_vm._e()],1)})),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"row comment-area2 pL0 pR0 pT15",attrs:{id:"commentBoxPar"}},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"markdown-inside"},[_c("textarea",{directives:[{name:"model",rawName:"v-model",value:_vm.newComment.body,expression:"newComment.body"}],ref:"commentBoxRef",staticClass:"comment-box",class:{height75:_vm.commentFocus,height40:!_vm.commentFocus},staticStyle:{"font-size":"13px","letter-spacing":"0.3px",color:"#333333","border-color":"#d0d9e2"},attrs:{placeholder:_vm.$t("common._common.write_comment"),autofocus:"",id:"commentBoxPar"},domProps:{value:_vm.newComment.body},on:{focus:_vm.focusCommentBoxtextarea,input:function($event){$event.target.composing||_vm.$set(_vm.newComment,"body",$event.target.value)}}}),_vm._v(" "),_c("button",{class:[_vm.commentFocus?"show":"hide"],on:{click:_vm.markdownhelplist}},[_c("img",{staticClass:"pull-right pointer",attrs:{src:__webpack_require__(773339)}})])]),_c("div",[_c("button",{staticClass:"markdown-comment-btn marginL-auto",class:[_vm.commentFocus?"show":"hide"],on:{click:_vm.addComment}},[_vm._v(" "+_vm._s(_vm.$t("common._common._comment"))+" ")]),_vm.workorder.requester?_c("div",{staticClass:"flLeft"},[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.newComment.notifyRequester,expression:"newComment.notifyRequester"}],attrs:{type:"checkbox",name:"notifyRequester"},domProps:{checked:Array.isArray(_vm.newComment.notifyRequester)?_vm._i(_vm.newComment.notifyRequester,null)>-1:_vm.newComment.notifyRequester},on:{change:function($event){var $$a=_vm.newComment.notifyRequester,$$el=$event.target,$$c=!!$$el.checked;if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);$$el.checked?$$i<0&&_vm.$set(_vm.newComment,"notifyRequester",$$a.concat([$$v])):$$i>-1&&_vm.$set(_vm.newComment,"notifyRequester",$$a.slice(0,$$i).concat($$a.slice($$i+1)))}else _vm.$set(_vm.newComment,"notifyRequester",$$c)}}}),_c("label",{staticClass:"notify-req",attrs:{for:"notifyRequester"}},[_vm._v(_vm._s(_vm.$t("common._common.notify")))])]):_vm._e(),_c("div",{staticClass:"clearboth"})])])])])],1)],2)]),this.markdownshow?[_c("markdown-help-list",{attrs:{markdownshow:_vm.markdownshow},on:{"update:markdownshow":function($event){_vm.markdownshow=$event}}})]:_vm._e(),_c("div",{staticClass:"clearboth"},[_c("div",{staticClass:"white-bg-block new-summary-block pL30 pR30 mT20"},[_c("div",{staticClass:"label-txt-black pT20 pB20 fw-bold"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.attachments"))+" ")]),_c("attachments",{attrs:{module:"ticketattachments",record:_vm.workorder},on:{attachmentactivity:function($event){return _vm.updateWoActions()}}})],1)])],2),_c("wo-field-details",{ref:"wo-field-details",attrs:{workorder:_vm.workorder,excludeFields:[],refreshWoDetails:_vm.refreshWoDetails,updateWoActions:_vm.updateWoActions,currentView:_vm.currentView}})],1)]),_vm.showHazardListWidget?_c("el-tab-pane",{staticClass:"clear",attrs:{label:_vm.$t("common.header.safety_plan"),name:"safetyplan","data-test-selector":"Safety_Plan"}},[_c("div",{staticClass:"pm-summary-inner-container"},[_c("div",{staticClass:"fL pm-summary-inner-left-con mT20 fc-res-dell fc-wo-page-scroll scrollbar-style",class:{width71:!_vm.showAddPreRequest,width66:_vm.showAddPreRequest}},[_vm.showHazardListWidget?_c("div",{staticClass:"white-bg-block height300"},[_c("HazardListWidget",{attrs:{widget:_vm.hazardWidget,details:_vm.workorder,moduleName:"workorder",staticWidgetHeight:"238"}})],1):_vm._e(),_vm.showHazardListWidget?_c("div",{staticClass:"white-bg-block mT20 height300"},[_c("HazardPrecautions",{attrs:{details:_vm.workorder,moduleName:"workorder",staticWidgetHeight:"342"}})],1):_vm._e(),_vm.workorder.prerequisiteEnabled?_c("div",{staticClass:"white-bg-block mT20"},[_c("div",{staticClass:"wo-widget-header"},[_c("div",{staticClass:"header justify-content-space height100"},[_c("div",{staticClass:"widget-title d-flex flex-direction-column justify-center"},[_vm._v(" "+_vm._s(_vm.$t("common.header.prerequisite_"))+" ")])])]),_c("div",{staticClass:"pL30 pB60 pR30"},[_c("div",{staticClass:"label-txt-black pT40 pB20 bold"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.photos"))+" ")]),_c("el-upload",{staticClass:"avatar-uploader",attrs:{"list-type":"picture-card",multiple:"","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-remove":_vm.onPhotoDelete}},[_c("i",{staticClass:"el-icon-plus"})]),_vm._l(Object.keys(_vm.preRequestList),(function(section,index){return _c("div",{key:index,staticClass:"pT40"},[_c("div",{staticClass:"label-txt-black p20 border-bottom4 fw-bold"},[_vm._v(" "+_vm._s(_vm.preRequestSections[section]?_vm.preRequestSections[section].name:"")+" ")]),_vm._l(_vm.preRequestList[section],(function(task,index1){return _c("div",{key:index1,staticClass:"fc__sum__task__list",class:{selected:_vm.selectedPreRequest===task,closed:"OPEN"!==task.status.type}},[_c("div",{staticClass:"task-item width100 flex-middle",on:{click:function($event){return _vm.showPreRequestDetails(task)}}},[_c("div",{staticClass:"dot-green mR10 mT3"}),_c("div",{class:[{closedTask:"OPEN"!==task.status.type},"label-txt-black pointer"],staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{type:"text",placeholder:""}},[_vm._v(" "+_vm._s(task.subject)+" ")])]),1!==task.inputType&&-1!==task.id?_c("div",{staticClass:"text-right width40 flex-middle justify-content-end"},[6===task.inputType||"6"===task.inputType?_c("div",{staticClass:"flex-middle justify-content-end"},[_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:"OPEN"!==task.status.type||!_vm.canExecuteTask},on:{change:function($event){_vm.checkAndShowPreRequest(task),_vm.addPreRequest(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_c("el-radio",{key:task.truevalue,attrs:{color:"secondary",label:task.truevalue}},[_vm._v(_vm._s(task.truevalue))]),_c("el-radio",{key:task.falsevalue,attrs:{color:"secondary",label:task.falsevalue}},[_vm._v(_vm._s(task.falsevalue))])],1)],1):_vm._e()]):_vm._e()])}))],2)}))],2)]):_vm._e()]),_vm.showAddPreRequest&&-1!==_vm.selectedPreRequest.id?_c("div",{staticClass:"fR pm-summary-inner-right-con fc-v1-wo-sum-right fc-wo-summary-task-fixed width32-4"},[_c("div",{staticClass:"fc-scrollbar-wrap pT20"},[_c("div",{staticClass:"white-bg-block fc__sum__task__details position-relative"},[_c("div",{},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,placement:"top"},expression:"{\n                        arrow: true,\n                        placement: 'top',\n                      }"}],staticClass:"q-icon el-icon-close material-icons pull-right pointer wo__close__icon",attrs:{"aria-hidden":"true",title:_vm.$t("common._common.close")},on:{click:_vm.closedisplayPreRequest}}),_c("div",{staticClass:"inline-flex"},[_c("div",{staticClass:"pL30 pT20 pR30"},[_c("div",{staticClass:"fc-black2-18"},[_vm._v(" "+_vm._s(_vm.selectedPreRequest.subject?_vm.selectedPreRequest.subject:"")+" ")])])])]),_c("div",{staticClass:"mL30 mR30"},[_c("div",{staticClass:"fc-black-13"},[_vm._v(" "+_vm._s(_vm.selectedPreRequest.description)+" ")]),_c("div",{staticClass:"mT20"},[6===_vm.selectedPreRequest.inputType||"6"===_vm.selectedPreRequest.inputType?_c("div",[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{color:"secondary",label:_vm.selectedPreRequest.truevalue,disabled:"OPEN"!==_vm.selectedPreRequest.status.type},on:{change:function($event){return _vm.addPreRequest(_vm.selectedPreRequest)}},model:{value:_vm.selectedPreRequest.inputValue,callback:function($$v){_vm.$set(_vm.selectedPreRequest,"inputValue",$$v)},expression:"selectedPreRequest.inputValue"}},[_vm._v(_vm._s(_vm.selectedPreRequest.truevalue))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{color:"secondary",label:_vm.selectedPreRequest.falsevalue,disabled:"OPEN"!==_vm.selectedPreRequest.status.type},on:{change:function($event){return _vm.addPreRequest(_vm.selectedPreRequest)}},model:{value:_vm.selectedPreRequest.inputValue,callback:function($$v){_vm.$set(_vm.selectedPreRequest,"inputValue",$$v)},expression:"selectedPreRequest.inputValue"}},[_vm._v(_vm._s(_vm.selectedPreRequest.falsevalue))])],1):_vm._e(),_c("div",{staticClass:"taskoptions pB10 mT20"},[_c("div",{staticClass:"taskoptions pB10 pT20 fc__wo__remarks"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"text",disabled:"OPEN"!==_vm.selectedPreRequest.status.type||!_vm.canExecuteTask,placeholder:_vm.$t("common.products.add_remarks")},on:{change:function($event){return _vm.addPreRequest(_vm.selectedPreRequest)}},model:{value:_vm.selectedPreRequest.remarks,callback:function($$v){_vm.$set(_vm.selectedPreRequest,"remarks",$$v)},expression:"selectedPreRequest.remarks"}})],1)])])])])])]):_c("wo-field-details",{ref:"wo-field-details",attrs:{workorder:_vm.workorder,excludeFields:[],refreshWoDetails:_vm.refreshWoDetails,updateWoActions:_vm.updateWoActions,currentView:_vm.currentView}})],1)]):_vm._e(),_vm.workorder.prerequisiteEnabled&&!_vm.showHazardListWidget?_c("el-tab-pane",{staticClass:"clear",attrs:{label:_vm.$t("common.header.prerequisite"),name:"second1"}},[_c("div",{staticClass:"pm-summary-inner-container"},[_c("div",{staticClass:"pm-summary-inner-left-con fL mT20 fc-res-dell fc-wo-page-scroll scrollbar-style",class:{width71:!_vm.showAddPreRequest,width66:_vm.showAddPreRequest}},[_c("div",[_c("div",{staticClass:"fc-res-dell fc-wo-page-scroll scrollbar-style"},[_c("div",[_c("div",{staticClass:"white-bg-block pT40 pL30 pB60 pR30 height100 mB100"},[_c("div",{staticClass:"label-txt-black pB20 bold"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.photos"))+" ")]),_c("el-upload",{staticClass:"avatar-uploader",attrs:{"list-type":"picture-card",multiple:"","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-remove":_vm.onPhotoDelete}},[_c("i",{staticClass:"el-icon-plus"})]),_vm._l(Object.keys(_vm.preRequestList),(function(section,index){return _c("div",{key:index,staticClass:"pT40"},[_c("div",{staticClass:"label-txt-black p20 border-bottom4 fw-bold"},[_vm._v(" "+_vm._s(_vm.preRequestSections[section]?_vm.preRequestSections[section].name:"")+" ")]),_vm._l(_vm.preRequestList[section],(function(task,index1){return _c("div",{key:index1,staticClass:"fc__sum__task__list",class:{selected:_vm.selectedPreRequest===task,closed:"OPEN"!==task.status.type}},[_c("div",{staticClass:"task-item width100 flex-middle",on:{click:function($event){return _vm.showPreRequestDetails(task)}}},[_c("div",{staticClass:"dot-green mR10 mT3"}),_c("div",{class:[{closedTask:"OPEN"!==task.status.type},"label-txt-black pointer"],staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{type:"text",placeholder:""}},[_vm._v(" "+_vm._s(task.subject)+" ")])]),1!==task.inputType&&-1!==task.id?_c("div",{staticClass:"text-right width40 flex-middle justify-content-end"},[6===task.inputType||"6"===task.inputType?_c("div",{staticClass:"flex-middle justify-content-end"},[_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:"OPEN"!==task.status.type},on:{change:function($event){_vm.checkAndShowPreRequest(task),_vm.addPreRequest(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_c("el-radio",{key:task.truevalue,attrs:{color:"secondary",label:task.truevalue}},[_vm._v(_vm._s(task.truevalue))]),_c("el-radio",{key:task.falsevalue,attrs:{color:"secondary",label:task.falsevalue}},[_vm._v(_vm._s(task.falsevalue))])],1)],1):_vm._e()]):_vm._e()])}))],2)}))],2)])])])]),_vm.showAddPreRequest&&-1!==_vm.selectedPreRequest.id?_c("div",{staticClass:"fR pm-summary-inner-right-con fc-v1-wo-sum-right fc-wo-summary-task-fixed width32-4"},[_c("div",{staticClass:"fc-scrollbar-wrap pT20"},[_c("div",{staticClass:"white-bg-block fc__sum__task__details position-relative"},[_c("div",{},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,placement:"top"},expression:"{\n                        arrow: true,\n                        placement: 'top',\n                      }"}],staticClass:"q-icon el-icon-close material-icons pull-right pointer wo__close__icon",attrs:{"aria-hidden":"true",title:_vm.$t("common._common.close")},on:{click:_vm.closedisplayPreRequest}}),_c("div",{staticClass:"inline-flex"},[_c("div",{staticClass:"pL30 pT20 pR30"},[_c("div",{staticClass:"fc-black2-18"},[_vm._v(" "+_vm._s(_vm.selectedPreRequest.subject?_vm.selectedPreRequest.subject:"")+" ")])])])]),_c("div",{staticClass:"mL30 mR30"},[_c("div",{staticClass:"fc-black-13 text-left pT10"},[_vm._v(" "+_vm._s(_vm.selectedPreRequest.description)+" ")]),_c("div",{staticClass:"mT20"},[6===_vm.selectedPreRequest.inputType||"6"===_vm.selectedPreRequest.inputType?_c("div",[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{color:"secondary",label:_vm.selectedPreRequest.truevalue,disabled:"OPEN"!==_vm.selectedPreRequest.status.type},on:{change:function($event){return _vm.addPreRequest(_vm.selectedPreRequest)}},model:{value:_vm.selectedPreRequest.inputValue,callback:function($$v){_vm.$set(_vm.selectedPreRequest,"inputValue",$$v)},expression:"selectedPreRequest.inputValue"}},[_vm._v(_vm._s(_vm.selectedPreRequest.truevalue))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{color:"secondary",label:_vm.selectedPreRequest.falsevalue,disabled:"OPEN"!==_vm.selectedPreRequest.status.type},on:{change:function($event){return _vm.addPreRequest(_vm.selectedPreRequest)}},model:{value:_vm.selectedPreRequest.inputValue,callback:function($$v){_vm.$set(_vm.selectedPreRequest,"inputValue",$$v)},expression:"selectedPreRequest.inputValue"}},[_vm._v(_vm._s(_vm.selectedPreRequest.falsevalue))])],1):_vm._e(),_c("div",{staticClass:"taskoptions pB10 mT20"},[_c("div",{staticClass:"taskoptions pB10 pT20 fc__wo__remarks"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"text",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedPreRequest.status.type,placeholder:_vm.$t("common.products.add_remarks")},on:{change:function($event){return _vm.addPreRequest(_vm.selectedPreRequest)}},model:{value:_vm.selectedPreRequest.remarks,callback:function($$v){_vm.$set(_vm.selectedPreRequest,"remarks",$$v)},expression:"selectedPreRequest.remarks"}})],1)])])])])])]):_c("wo-field-details",{ref:"wo-field-details",attrs:{workorder:_vm.workorder,excludeFields:[],refreshWoDetails:_vm.refreshWoDetails,updateWoActions:_vm.updateWoActions,currentView:_vm.currentView}})],1)]):_vm._e(),_c("el-tab-pane",{staticClass:"summaryTask-input",attrs:{label:_vm.$t("maintenance._workorder.tasks"),name:"second"}},[_vm.isWorkOrderFeatureSettingsLicenseEnabled&&_vm.canShowMessageBanner?_c("div",{staticClass:"wo_task_view_banner pT5"},[_c("span",{staticClass:"wo_task_view_banner_subject"},[_c("fc-icon",{attrs:{group:"action",name:"info"}}),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.bannerMessage))])],1)]):_vm.isWorkOrderFeatureSettingsLicenseEnabled||_vm.hasExecuteTaskPermission?_vm._e():_c("div",{staticClass:"wo_task_view_banner pT5"},[_c("span",{staticClass:"wo_task_view_banner_subject"},[_c("fc-icon",{attrs:{group:"action",name:"info"}}),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.$t("common.products.workorder_no_update_task")))])],1)]),_c("div",{staticClass:"pm-summary-inner-container",attrs:{id:"summarytask"}},[_c("div",{staticClass:"pm-summary-inner-left-con fL mT20 fc-res-dell fc-wo-page-scroll scrollbar-style",class:{width71:!_vm.showAddTask,width66:_vm.showAddTask}},[_c("div",[_vm.taskChartData&&_vm.taskChartData.value&&_vm.taskChartData.value>0?_c("div",{staticClass:"p20 white-bg-block mB20"},[_c("el-row",[_c("el-col",{staticClass:"mT10",attrs:{span:_vm.taskResources.length>1&&_vm.taskResources.length<=30?14:15}},[_c("div",{staticClass:"fc__wo__task__bar fc__wo__task__bar-stacked"},[_c("span",{staticClass:"fc__task__gradient__bar",style:"width:"+_vm.taskChartData.currentValue/_vm.taskChartData.value*100+"%",attrs:{data:_vm.taskChartData}})])]),_c("el-col",{staticClass:"mT15",attrs:{span:3}},[_c("div",{staticClass:"flex-middle justify-content-center"},[_c("div",{staticClass:"green-txt-12"},[_vm._v(" "+_vm._s(_vm.taskChartData.currentValue)+" ")]),_c("div",{staticClass:"fc-grey-text12 pL3"},[_vm._v(" / "+_vm._s(_vm.taskChartData.value)+" ")])])]),_c("el-col",{staticClass:"text-right",attrs:{span:5}},[_vm.taskChartData.currentValue!==_vm.taskChartData.value?_c("el-button",{staticClass:"fc-pink-border-btn",attrs:{type:"button",disabled:!_vm.allTaskStatus||!_vm.isPrerequisiteCompleted||!_vm.canExecuteTask},on:{click:_vm.closeAllTask}},[_vm._v(" "+_vm._s(_vm.selectedTaskResource?_vm.$t("maintenance._workorder.close_filtered_task"):_vm.$t("maintenance._workorder.close_all_task"))+" ")]):_c("div",{staticClass:"pT15 green-txt-13"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.all_task_closed"))+" ")])],1),_vm.taskResources.length>1&&_vm.taskResources.length<=30?_c("el-col",{staticClass:"flRight mT15 pL20",attrs:{span:1}},[_c("div",{staticClass:"pointer user-select-none",on:{click:function($event){_vm.showTaskResourceFilter=!_vm.showTaskResourceFilter}}},[_c("span",{staticClass:"rotate90"},[_c("img",{staticStyle:{width:"15px"},attrs:{src:__webpack_require__(684890)}})])])]):_vm._e()],1)],1):_vm._e(),_vm.showTaskResourceFilter?_c("div",{staticClass:"p10 white-bg-block mB20 flRight task-resource-filter",staticStyle:{width:"35%"}},[_c("el-select",{staticClass:"width100",attrs:{filterable:"",clearable:""},model:{value:_vm.selectedTaskResource,callback:function($$v){_vm.selectedTaskResource=$$v},expression:"selectedTaskResource"}},_vm._l(_vm.taskResources,(function(resource){return _c("el-option",{key:resource.id,attrs:{label:resource.name,value:resource.id}})})),1)],1):_vm._e(),_c("div",{staticClass:"clearboth"}),_c("div",{staticClass:"position-relative fc-visibility-gicon-visible height100"},[_c("div",[_vm.isTaskListEmpty?_vm._e():_c("div",{staticClass:"white-bg-block mB20 pB40 pT20"},[0===Object.keys(_vm.sections).length?_c("div",{staticClass:"item float_right_2"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.addTaskButtonMessage,placement:"top"}},[_c("span",[_vm.workorderSourceTypeNotPlanned&&!_vm.isTaskListEmpty?_c("el-button",{staticClass:"p5",attrs:{disabled:!_vm.showAddNewTask,"data-test-selector":"Add_Task",icon:"el-icon-plus",type:"text"},on:{click:function($event){return _vm.addNewTask()}}}):_vm._e()],1)])],1):_vm._e(),_vm._l(_vm.getSortedTaskList(),(function(obj,index){return _c("div",{key:index,staticClass:"mT20"},[_vm.sections[obj.sectionId]?_c("div",{staticClass:"label-txt-black p20 border-bottom4 fw-bold"},[_c("div",[_vm._v(" "+_vm._s(_vm.sections[obj.sectionId].name)+" ")]),_c("div",{staticClass:"float_right_1"},[_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:_vm.addTaskButtonMessage,placement:"top"}},[_c("span",[_vm.workorderSourceTypeNotPlanned&&!_vm.isTaskListEmpty?_c("el-button",{attrs:{disabled:!_vm.showAddNewTask,"data-test-selector":"Add_Task",icon:"el-icon-plus",type:"text"},on:{click:function($event){return _vm.addNewTaskToASection(obj.sectionId)}}}):_vm._e()],1)])],1),_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[3===_vm.$account.user.appType?_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:_vm.sections[obj.sectionId].name}}):_vm._e()],1):_vm._e()]):_vm._e()]):_vm._e(),_vm._l(obj.taskList,(function(task,index1){return _c("div",{key:index1,staticClass:"fc__sum__task__list width100",class:{selected:_vm.selectedTask===task,closed:"OPEN"!==task.status.type},attrs:{disabled:!_vm.isPrerequisiteCompleted}},[_c("div",{staticClass:"width40px",staticStyle:{cursor:"pointer","padding-left":"5px"},attrs:{disabled:!_vm.isPrerequisiteCompleted||!_vm.canExecuteTask},on:{click:function($event){_vm.isPrerequisiteCompleted&&_vm.canExecuteTask&&_vm.changeTaskStatus(task)}}},["OPEN"===task.status.type?_c("i",{staticClass:"fa fa-circle-thin",staticStyle:{color:"#ff3184","font-size":"28px"},attrs:{disabled:!_vm.isPrerequisiteCompleted}}):_c("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"#ff3184","font-size":"28px"},attrs:{disabled:!_vm.isPrerequisiteCompleted}})]),_c("div",{staticClass:"task-item width50",staticStyle:{"padding-left":"10px",position:"relative"},on:{click:function($event){return _vm.showTaskDetails(task)}}},[-1===task.id?_c("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:_vm.$t("maintenance._workorder.write_a_task_name"),disabled:!_vm.canExecuteTask},model:{value:task.subject,callback:function($$v){_vm.$set(task,"subject",$$v)},expression:"task.subject"}}):_c("div",[_c("div",{class:[{closedTask:"OPEN"!==task.status.type},"label-txt-black pointer"],staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{type:"text",placeholder:""}},[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(task.uniqueId))]),_vm._v(" "+_vm._s(task.subject)+" ")]),_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[3===_vm.$account.user.appType?_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:task.subject}}):_vm._e()],1):_vm._e()]):_vm._e()]),-1===task.id||task.resource&&task.resource.name?_c("div",{staticClass:"pT5 inline-flex"},[-1===task.id?_c("div",{staticClass:"flLeft",staticStyle:{height:"10px",width:"10px",cursor:"pointer"},on:{click:function($event){return _vm.showSpaceAssetChooser()}}},[_c("img",{attrs:{src:__webpack_require__(539884)}})]):_c("div",{staticClass:"flLeft"},[1===task.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]),_c("div",{staticClass:"fc-grey2-text12 pL5"},[_vm._v(" "+_vm._s(task.resource.name||"")+" ")])]):_vm._e()],1),1!==task.inputType&&-1!==task.id?_c("div",{staticClass:"f-element text-right width50 wo-text-input-width flex-middle justify-content-end"},[2===task.inputType||"2"===task.inputType?_c("div",[!task.readingField||"NUMBER"!==task.readingField.dataTypeEnum&&"DECIMAL"!==task.readingField.dataTypeEnum||5!==task.readingField.metric?_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"flex-middle justify-content-end"},[task.lastReading&&-1!==task.lastReading&&"-1"!==task.lastReading?_c("div",{staticClass:"inline mR10"},[_c("q-icon",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#prevpopup_"+task.id,position:"bottom",arrow:!0,theme:"light",animation:"scale"},expression:"{\n                                        html: '#prevpopup_' + task.id,\n                                        position: 'bottom',\n                                        arrow: true,\n                                        theme: 'light',\n                                        animation: 'scale',\n                                      }"}],staticClass:"info-icon mL10",staticStyle:{"vertical-align":"middle"},attrs:{name:"info_outline",size:"18px",title:""}})],1):_vm._e(),task.readingField&&_vm.isBooleanField(task.readingField)?_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.onReadingChange(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"1"}},[_vm._v(_vm._s(task.readingField.trueVal||"True"))]),_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"0"}},[_vm._v(_vm._s(task.readingField.falseVal||"False"))])],1):_vm.isReadingEnum(task)?_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{disabled:_vm.canDisableField(task)},on:{change:function($event){return _vm.onReadingChange(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},_vm._l(_vm.fieldOptions(task),(function(item){return _c("el-option",{key:item.id,attrs:{label:item.value,value:item.id}})})),1):_c("el-input",{staticClass:"input-with-select",class:{"wo-task-group-input":_vm.isReadingFieldValidationEnabled,"wo-reading-input-width":task.readingFieldUnit<0},attrs:{type:"number",placeholder:_vm.$t("maintenance._workorder.enter_reading"),disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.onReadingChange(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.metric>0&&task.readingFieldUnit>0?_c("el-select",{attrs:{slot:"append",disabled:!_vm.canExecuteTask},on:{change:function($event){return _vm.onReadingChange(task)}},slot:"append",model:{value:task.readingFieldUnit,callback:function($$v){_vm.$set(task,"readingFieldUnit",$$v)},expression:"task.readingFieldUnit"}},_vm._l(_vm.getReadingFieldUnits(task.readingField.metric),(function(readingFieldUnit,index){return _c("el-option",{key:index,attrs:{label:readingFieldUnit.symbol,value:readingFieldUnit.unitId}})})),1):_vm._e()],1),!_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.unit?_c("div",{staticClass:"inline pL8"},[_vm._v(" "+_vm._s(task.readingField.unit)+" ")]):_vm._e()],1),_c("div",{staticClass:"time-error wo-time-error"},[_c("el-date-picker",{staticClass:"fc__wo__reading__time",attrs:{placeholder:_vm.$t("maintenance._workorder.time_of_reading"),type:"datetime",editable:!1,disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted,"default-value":new Date(_vm.workorder.createdTime),"picker-options":_vm.readingPickerOptions},on:{change:function($event){return _vm.updateReading(task)}},model:{value:task.inputTime,callback:function($$v){_vm.$set(task,"inputTime",$$v)},expression:"task.inputTime"}})],1),_vm.isReadingFieldValidationEnabled?_c("div",{staticClass:"clearboth"},[_vm.isReadingFieldValidationEnabled&&_vm.readingFieldErrorToggle?_c("div",[task.id==_vm.currentTaskObj.id?_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:_vm.readingFieldErrorToggle,title:_vm.$t("common.header.alert"),fullscreen:!1,"before-close":_vm.beforeCloseDialogBox,"append-to-body":!0,width:"46%"},on:{"update:visible":function($event){_vm.readingFieldErrorToggle=$event}}},[_c("div",{staticClass:"wo-error-dialog-body"},[_c("div",[_c("AlertBanner",{attrs:{alert:_vm.readingFieldErrorToggle,alertMessage:_vm.readingFieldError},on:{"update:alert":function($event){_vm.readingFieldErrorToggle=$event},"update:alertMessage":function($event){_vm.readingFieldError=$event},"update:alert-message":function($event){_vm.readingFieldError=$event}}})],1),_vm.readingFieldSuggestionToggle?_c("div",{staticClass:"mT20"},_vm._l(_vm.readingFieldSuggestions,(function(readingFieldSuggestion,key){return _c("div",{key:key},[_c("WarningBanner",{attrs:{warning:_vm.readingFieldSuggestionToggle,warningMessage:readingFieldSuggestion},on:{"update:warning":function($event){_vm.readingFieldSuggestionToggle=$event},"update:warningMessage":function($event){readingFieldSuggestion=$event},"update:warning-message":function($event){readingFieldSuggestion=$event}}})],1)})),0):_vm._e(),_c("div",{staticClass:"fc-pink f14 bold text-left pT20"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reset_reading"))+" ")]),_c("div",{staticClass:"mT20 mR5"},[_c("el-radio-group",{model:{value:_vm.readingData,callback:function($$v){_vm.readingData=$$v},expression:"readingData"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:3}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.yes")))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:6}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.no")))])],1),3===_vm.readingData?_c("el-row",{staticClass:"flex-middle pT20"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"pR20 bold text-left fc-black-13"},[_vm._v(" "+_vm._s(task.subject)+" ")]),_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[3===_vm.$account.user.appType?_c("div",[_vm.woDescriptiontranslate?_c("InstantTranslate",{attrs:{content:task.subject}}):_vm._e()],1):_vm._e()]):_vm._e()]),_c("el-col",{attrs:{span:12}},[_c("el-input",{staticClass:"fc-input-full-border",class:{"wo-task-group-input":_vm.isReadingFieldValidationEnabled,"wo-reading-input-width":task.readingFieldUnit<0},attrs:{type:"number",placeholder:_vm.$t("maintenance._workorder.enter_reading"),disabled:!_vm.canExecuteTask},on:{focus:function($event){return _vm.checkAndShowTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},[_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.metric>0&&task.readingFieldUnit>0?_c("el-select",{staticClass:"fc-value-border",attrs:{slot:"append",disabled:!_vm.canExecuteTask},slot:"append",model:{value:task.readingFieldUnit,callback:function($$v){_vm.$set(task,"readingFieldUnit",$$v)},expression:"\n                                                    task.readingFieldUnit\n                                                  "}},_vm._l(_vm.getReadingFieldUnits(task.readingField.metric),(function(readingFieldUnit,index){return _c("el-option",{key:index,attrs:{label:readingFieldUnit.symbol,value:readingFieldUnit.unitId}})})),1):_vm._e()],1)],1)],1):_vm._e(),3===_vm.readingData?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"bold fc-black-13 text-left"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.enter_the_consumption"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 fc-width-input mT10 mR20",attrs:{placeholder:_vm.$t("common.placeholders.enter_the_consumption"),disabled:!_vm.canExecuteTask},model:{value:_vm.consumptionData,callback:function($$v){_vm.consumptionData=$$v},expression:"consumptionData"}},[_vm.isReadingFieldValidationEnabled&&task.readingField&&task.readingField.metric>0&&task.readingFieldUnit>0?_c("el-select",{staticClass:"width110px",attrs:{slot:"append",disabled:!_vm.canExecuteTask},slot:"append",model:{value:task.readingFieldUnit,callback:function($$v){_vm.$set(task,"readingFieldUnit",$$v)},expression:"\n                                                  task.readingFieldUnit\n                                                "}},_vm._l(_vm.getReadingFieldUnits(task.readingField.metric),(function(readingFieldUnit,index){return _c("el-option",{key:index,attrs:{label:readingFieldUnit.symbol,value:readingFieldUnit.unitId}})})),1):_vm._e()],1)],1):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[3===_vm.readingData?_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeReadingFieldErrorDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel")))]):_vm._e(),3===_vm.readingData?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",disabled:_vm.isDisabled},on:{click:function($event){return _vm.onReadingChange(task)}}},[_vm._v(_vm._s(_vm.$t("common._common._save"))+" ")]):_c("el-button",{staticClass:"modal-btn-error uppercase",on:{click:_vm.closeReadingFieldErrorDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("common._common.try_again"))+" ")])],1)])]):_vm._e()],1):_vm.isReadingFieldValidationEnabled&&_vm.readingFieldSuggestionToggle&&!_vm.readingFieldErrorToggle?_c("div",[_c("el-dialog",{key:"1",staticClass:"fc-dialog-center-container",attrs:{visible:_vm.readingFieldSuggestionToggle,title:_vm.$t("common.header.note"),fullscreen:!1,"before-close":_vm.beforeCloseDialogBox,"append-to-body":!0,width:"41%"},on:{"update:visible":function($event){_vm.readingFieldSuggestionToggle=$event}}},[_c("div",{staticClass:"wo-error-dialog-body"},[_vm._l(_vm.readingFieldSuggestions,(function(readingFieldSuggestion,key){return _c("div",{key:key},[_c("WarningBanner",{attrs:{warning:_vm.readingFieldSuggestionToggle,warningMessage:readingFieldSuggestion},on:{"update:warning":function($event){_vm.readingFieldSuggestionToggle=$event},"update:warningMessage":function($event){readingFieldSuggestion=$event},"update:warning-message":function($event){readingFieldSuggestion=$event}}})],1)})),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeReadingFieldSuggestionDialogBox}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.back"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.callOnReadingChangeWithoutValidation(_vm.currentTaskObj)}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.continue_anyway"))+" ")])],1)],2)])],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"hide",attrs:{id:"prevpopup_"+task.id}},[_c("div",{staticClass:"task-prevreading"},[_vm._v(" "+_vm._s(task.lastReading)+_vm._s(task.readingField&&task.readingField.unit?task.readingField.unit:"")+" "),_c("span",[_vm._v(" ("+_vm._s(_vm.$t("maintenance._workorder.previous_reading"))+") ")])])])]):_c("div",{staticClass:"flex-middle justify-content-end"},[_c("el-input",{staticClass:"inline task-minutes-hours-input task-right-right-r-remove",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.checkForHoursAndMins(task)}},model:{value:task.hours,callback:function($$v){_vm.$set(task,"hours",$$v)},expression:"task.hours"}},[_c("span",{staticClass:"pR10 fc-grey6 f12 duration",attrs:{slot:"suffix"},slot:"suffix"},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.hours")))])]),_c("el-input",{ref:"fTaskMin"+task.id,refInFor:!0,staticClass:"inline task-minutes-hours-input mR10 task-right-left-r-remove",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.checkForHoursAndMins(task)}},model:{value:task.minutes,callback:function($$v){_vm.$set(task,"minutes",$$v)},expression:"task.minutes"}},[_c("span",{staticClass:"pR10 fc-grey6 f12 duration",attrs:{slot:"suffix"},slot:"suffix"},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.minutes")))])])],1)]):_vm._e(),3===task.inputType||"3"===task.inputType?_c("el-input",{attrs:{type:"text",placeholder:_vm.$t("maintenance._workorder.enter_text"),disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.addTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}}):_vm._e(),4===task.inputType||"4"===task.inputType?_c("el-input",{attrs:{type:"number",placeholder:_vm.$t("maintenance._workorder.enter_numeric_value"),disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{focus:function($event){return _vm.checkAndShowTask(task)},change:function($event){return _vm.addTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}}):_vm._e(),5===task.inputType||"5"===task.inputType?_c("span",[_vm.checkOptionsLength(task.options)?_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==task.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){_vm.checkAndShowTask(task),_vm.addTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},_vm._l(task.options,(function(option,index){return _c("el-radio",{key:index,staticClass:"pT15",attrs:{color:"secondary",label:option}},[_vm._v(_vm._s(option))])})),1):_c("el-select",{attrs:{"popper-class":"f-dropdown",disabled:_vm.canDisableField(task)},on:{change:function($event){return _vm.addTask(task)},focus:function($event){return _vm.checkAndShowTask(task)}},model:{value:task.inputValue,callback:function($$v){_vm.$set(task,"inputValue",$$v)},expression:"task.inputValue"}},_vm._l(task.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option,value:option}})})),1)],1):_vm._e()],1):_vm._e()])}))],2)}))],2),_vm.isTaskListEmpty?_c("div",{staticClass:"pT30 text-center white-bg-block pB30"},[_c("div",{staticClass:"mB10"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/task",iconClass:"icon text-center icon-xxxlg"}})],1),_c("div",{staticClass:"nowo-label"}),_c("div",{staticClass:"pB20 pT20"},[_c("el-tooltip",{attrs:{effect:"dark",disabled:_vm.canShowAddTaskButton,content:_vm.addTaskButtonMessage,placement:"top"}},[_c("span",[_c("el-button",{staticClass:"fc-btn-green-medium-fill",attrs:{disabled:!_vm.canShowAddTaskButton,"data-test-selector":"Add_Task"},on:{click:_vm.addNewTask}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_task")))])],1)]),_c("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"fc-btn-green-medium-border mL10",on:{click:_vm.addNewTask}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_section")))])],1)]):_vm._e()])])])])]),_vm.showAddTask&&-1!==_vm.selectedTask.id?_c("div",{staticClass:"fR pm-summary-inner-right-con mT20 fc-wo-summary-task-fixed width32-4"},[_c("div",{staticClass:"fc-scrollbar-wrap mT0"},[_c("div",{staticClass:"white-bg-block fc__sum__task__details position-relative"},[_c("div",{},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,placement:"top"},expression:"{\n                      arrow: true,\n                      placement: 'top',\n                    }"}],staticClass:"q-icon el-icon-close material-icons pull-right pointer wo__close__icon",attrs:{"aria-hidden":"true",title:_vm.$t("common._common.close")},on:{click:_vm.closedisplay}}),_c("div",{staticClass:"inline-flex"},[_c("div",{staticClass:"pL30 pT20 pR30"},[_c("div",{staticClass:"fc-black2-18"},[_vm._v(" "+_vm._s(_vm.selectedTask.subject?_vm.selectedTask.subject:"")+" ")]),_c("div",{staticClass:"flex-middle mT10"},[_vm.selectedTask.resource?_c("div",{staticClass:"pR5 vertical-middle"},[1===_vm.selectedTask.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]):_vm._e(),_c("div",{staticClass:"fc-grey2-text12"},[_vm._v(" "+_vm._s(_vm.selectedTask.resource?_vm.selectedTask.resource.name:"")+" ")])])])])]),_c("div",{staticClass:"mL30 mR30"},[_c("div",{staticClass:"fc-black-13"},[_vm._v(" "+_vm._s(_vm.selectedTask.description)+" ")]),_c("div",{staticClass:"mT20"},[2===_vm.selectedTask.inputType||"2"===_vm.selectedTask.inputType?_c("div",[_c("div",{staticClass:"taskoptions pB10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.enter"))+" "+_vm._s(_vm.selectedTask.readingField.displayName)+" "+_vm._s(_vm.selectedTask.readingField.unit?"(in "+_vm.selectedTask.readingField.unit+")":"")+" ")]),_vm.selectedTask.readingField&&_vm.isBooleanField(_vm.selectedTask.readingField)?_c("el-radio-group",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}},[_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"1"}},[_vm._v(_vm._s(_vm.selectedTask.readingField.trueVal||"True"))]),_c("el-radio",{staticClass:"pT15",attrs:{color:"secondary",label:"0"}},[_vm._v(_vm._s(_vm.selectedTask.readingField.falseVal||"False"))])],1):_vm.isReadingEnum(_vm.selectedTask)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:_vm.canDisableField(_vm.selectedTask)},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}},_vm._l(_vm.fieldOptions(_vm.selectedTask),(function(item){return _c("el-option",{key:item.id,attrs:{label:item.value,value:item.id}})})),1):_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}}),_c("el-date-picker",{staticClass:"inputtime-detail fc-input-full-border2 width100 mT20",attrs:{type:"datetime",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.onReadingChange(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputTime,callback:function($$v){_vm.$set(_vm.selectedTask,"inputTime",$$v)},expression:"selectedTask.inputTime"}})],1):_vm._e(),3===_vm.selectedTask.inputType||"3"===_vm.selectedTask.inputType?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}})],1):_vm._e(),4===_vm.selectedTask.inputType||"4"===_vm.selectedTask.inputType?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}})],1):_vm._e(),5===_vm.selectedTask.inputType||"5"===_vm.selectedTask.inputType?_c("div",{staticClass:"f-element"},_vm._l(_vm.selectedTask.options,(function(option,index){return _c("div",{key:index},[_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:option,disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValue,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValue",$$v)},expression:"selectedTask.inputValue"}},[_vm._v(_vm._s(option))])],1)})),0):_vm._e(),6===_vm.selectedTask.inputType||"6"===_vm.selectedTask.inputType?_c("div",[_c("el-checkbox-group",{attrs:{disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.inputValues,callback:function($$v){_vm.$set(_vm.selectedTask,"inputValues",$$v)},expression:"selectedTask.inputValues"}},_vm._l(_vm.selectedTask.options,(function(option,index){return _c("el-checkbox",{key:index,staticClass:"newradio pT15 f-checkbox",attrs:{color:"secondary",label:option}},[_vm._v(_vm._s(option))])})),1)],1):_vm._e(),_c("div",{staticClass:"taskoptions pB10 mT20"},[_c("task-attachment-preview",{key:_vm.selectedTask,attrs:{module:"taskattachments",isLockedState:_vm.isLockedState||!_vm.canExecuteTask,isTaskClosed:_vm.isTaskClosed(_vm.selectedTask),record:_vm.selectedTask,disabled:_vm.canDisableAttachment(_vm.selectedTask)},on:{taskattachmentactivity:function($event){return _vm.updateWoActions()}}})],1),_c("div",{staticClass:"taskoptions pB10 pT20 fc__wo__remarks"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted,placeholder:_vm.$t("common.products.add_remarks")},on:{change:function($event){return _vm.addTask(_vm.selectedTask)}},model:{value:_vm.selectedTask.remarks,callback:function($$v){_vm.$set(_vm.selectedTask,"remarks",$$v)},expression:"selectedTask.remarks"}})],1)])]),_c("div",{staticClass:"fc__task__complete__btn"},[_c("el-button",{staticClass:"fc-pink-btn-full-width",attrs:{type:"button",disabled:!_vm.isPrerequisiteCompleted||!_vm.canExecuteTask},on:{click:function($event){return _vm.changeTaskStatus(_vm.selectedTask)}}},[_vm._v(_vm._s(_vm.getButtonName(_vm.selectedTask)))])],1)])])]):_vm.showAddTask&&-1===_vm.selectedTask.id?_c("div",{staticClass:"fR pm-summary-inner-right-con mT20 fc-wo-summary-task-fixed width32-4"},[_c("div",{staticClass:"fc-scrollbar-wrap mT0"},[_c("div",{staticClass:"white-bg-block fc__sum__task__details position-relative"},[_c("div",[_c("div",{staticStyle:{"padding-bottom":"25px","padding-top":"17px","padding-left":"30px"}},[_c("div",{staticClass:"fw-bold label-txt-black pB15"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_task"))+" ")]),_c("i",{staticClass:"q-icon el-icon-close material-icons destroy pull-right pointer",attrs:{"aria-hidden":"true"},on:{click:_vm.closedisplay}}),_c("div",{staticClass:"inline-flex"},[_c("div",{staticClass:"flLeft"},[_c("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"rgb(255, 49, 132)","font-size":"28px"}})]),_c("div",{staticClass:"flLeft"},[_c("div",{staticClass:"taskheader"},[_c("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:_vm.$t("maintenance._workorder.write_a_task_name")},model:{value:_vm.selectedTask.subject,callback:function($$v){_vm.$set(_vm.selectedTask,"subject",$$v)},expression:"selectedTask.subject"}})],1),_c("div",{staticStyle:{"margin-top":"-3px"}},[_c("div",{staticClass:"tasksubheader flLeft",staticStyle:{"padding-left":"10px"}},[_vm._v(" "+_vm._s(_vm.selectedTask.selectedResourceName)+" ")]),_c("div",{staticClass:"flLeft",staticStyle:{height:"10px",width:"10px","margin-left":"10px",cursor:"pointer"},on:{click:function($event){return _vm.showSpaceAssetChooser()}}},[_c("img",{attrs:{src:__webpack_require__(539884)}})]),_c("div",{staticClass:"clearboth"})])]),_c("div",{staticClass:"clearboth"})])]),_c("div",{staticStyle:{"margin-left":"30px","margin-right":"30px","margin-top":"30px"}},[_c("div",[_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"label-txt-black fw-bold"},[_c("div",{staticClass:"taskdescinput",staticStyle:{"font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("el-input",{staticClass:"form-item pT20 fc-input-full-border-select2",attrs:{type:"textarea"},model:{value:_vm.selectedTask.description,callback:function($$v){_vm.$set(_vm.selectedTask,"description",$$v)},expression:"selectedTask.description"}})],1)])],1),_c("div",{staticClass:"enableInput",staticStyle:{"padding-top":"25px"}},[_c("el-checkbox",{model:{value:_vm.selectedTask.attachmentRequired,callback:function($$v){_vm.$set(_vm.selectedTask,"attachmentRequired",$$v)},expression:"selectedTask.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.photo")))])],1),_c("div",{staticClass:"enableInput",staticStyle:{"padding-top":"25px"}},[_c("el-checkbox",{on:{change:function($event){_vm.selectedTask.inputType=_vm.selectedTask.enableInput?_vm.selectedTask.inputType:1}},model:{value:_vm.selectedTask.enableInput,callback:function($$v){_vm.$set(_vm.selectedTask,"enableInput",$$v)},expression:"selectedTask.enableInput"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.enable_input")))])],1),_vm.selectedTask.enableInput?_c("div",{staticClass:"f-element"},[_c("div",{staticClass:"pT30",staticStyle:{"font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.task_type"))+" ")]),_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{disabled:!_vm.selectedTask.resource||!_vm.selectedTask.resource.id||-1===_vm.selectedTask.resource.id||!_vm.isPrerequisiteCompleted,color:"secondary",label:"2"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reading"))+" "+_vm._s(_vm.selectedTask.resource&&_vm.selectedTask.resource.id&&-1!==_vm.selectedTask.resource.id?"":_vm.$t("maintenance._workorder.select_asset_space"))+" ")]),_c("div",[_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"3"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.text")))])],1),_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"4"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.numeric")))]),_c("div",[_c("el-radio",{staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"5"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.option")))])],1),_c("el-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pT15 fc-radio-btn",attrs:{color:"secondary",label:"6"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.checkbox")))])],1):_vm._e(),"2"===_vm.selectedTask.inputType?_c("div",{staticStyle:{"padding-top":"20px"}},[_c("div",{staticStyle:{"padding-top":"20px","font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reading_field"))+" ")]),_c("div",[_c("el-select",{staticClass:"form-item",staticStyle:{width:"100%"},attrs:{placeholder:" "},model:{value:_vm.selectedTask.readingFieldId,callback:function($$v){_vm.$set(_vm.selectedTask,"readingFieldId",$$v)},expression:"selectedTask.readingFieldId"}},_vm._l(_vm.taskReadingFields,(function(readingField){return _c("el-option",{key:readingField.id,attrs:{label:readingField.displayName,value:readingField.id}})})),1)],1)]):_vm._e(),"5"===_vm.selectedTask.inputType||"6"===_vm.selectedTask.inputType?_c("div",[_c("div",{staticClass:"pT30",staticStyle:{"font-size":"13px","letter-spacing":"0.4px",color:"#6b7e91","padding-bottom":"10px"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.selectedTask.options,(function(option){return _c("div",{key:option,staticStyle:{"padding-bottom":"10px"}},["5"===_vm.selectedTask.inputType?_c("div",{staticClass:"circle flLeft",staticStyle:{width:"14px",height:"14px","margin-top":"9px"}}):_vm._e(),"6"===_vm.selectedTask.inputType?_c("div",{staticClass:"flLeft",staticStyle:{width:"14px",height:"14px","margin-top":"9px","margin-right":"7px","border-radius":"3px",border:"1px solid #c4d1dd"}}):_vm._e(),_c("div",{staticClass:"flLeft",staticStyle:{"padding-left":"3px",width:"200px"}},[_c("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:""},model:{value:option.name,callback:function($$v){_vm.$set(option,"name",$$v)},expression:"option.name"}})],1),_c("div",{staticClass:"clearboth"})])})),_c("div",{staticStyle:{"margin-bottom":"30px","font-size":"13px",color:"rgb(57, 178, 194)",cursor:"pointer","border-bottom":"1px solid rgb(57, 178, 194)",width:"70px","padding-top":"10px"},on:{click:function($event){return _vm.addTaskOption(_vm.selectedTask)}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_option"))+" ")])],2):_vm._e()],1),_c("div",{staticClass:"p30"},[_c("el-button",{staticClass:"btnsize txt fc-btn-green-medium-fill",attrs:{"data-test-selector":"Save_Task"},on:{click:function($event){return _vm.addTask(_vm.selectedTask)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.save")))])],1)])])])])]):_c("wo-field-details",{ref:"wo-field-details",attrs:{workorder:_vm.workorder,excludeFields:[],refreshWoDetails:_vm.refreshWoDetails,updateWoActions:_vm.updateWoActions,currentView:_vm.currentView}}),_c("el-dialog",{attrs:{visible:_vm.showMandatoryInputsDialog,title:_vm.mandatoryInputsTitle,"custom-class":"fc-dialog-center-container"},on:{"update:visible":function($event){_vm.showMandatoryInputsDialog=$event}}},[_vm.showMandatoryInputsDialog?_c("div",{staticClass:"max-height500 pB100"},[_vm.addAttachmentRequiredDialog?_c("div",{staticClass:"pB20"},[_c("mobile-attachment",{attrs:{module:"taskattachments",record:_vm.selectedTask,disabled:!_vm.canExecuteTask||"OPEN"!==_vm.selectedTask.status.type||!_vm.isPrerequisiteCompleted,doNotSave:!0},on:{marshalled:function($event){return _vm.handlePhotoUpload($event)}}})],1):_vm._e(),_vm.addTaskRemarksDialog?_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.remarks"))+" ")]),_c("div",[_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:_vm.$t("common.products.add_remarks"),resize:"none",disabled:!_vm.canExecuteTask},model:{value:_vm.selectedTask.remarks,callback:function($$v){_vm.$set(_vm.selectedTask,"remarks",$$v)},expression:"selectedTask.remarks"}})],1)])],1):_vm._e()],1):_vm._e(),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showMandatoryInputsDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){_vm.addTask(_vm.selectedTask),_vm.showMandatoryInputsDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common._save")))])],1)])],1),!_vm.$helpers.isLicenseEnabled("INVENTORY")||_vm.$helpers.isLicenseEnabled("PLANNED_INVENTORY")||_vm.aster?_vm._e():_c("el-tab-pane",{attrs:{label:_vm.$t("maintenance._workorder.items_and_labour"),name:"third"}},["third"===_vm.activeName?_c("Inventory-summary",{attrs:{canDisable:_vm.canDisable,workorder:_vm.workorder,openWorkorderId:_vm.openWorkorderId,showLabour:!0}}):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("maintenance.pm_list.related_records"),name:"fourth"}},[_c("div",{staticClass:"pm-summary-inner-container mT20 height100"},[_c("div",{staticClass:"width100 height100 fc-summary-content-scroll"},[_c("div",[406===_vm.$org.id?_c("WorkorderRelatedRecordsWidget",{staticClass:"mB20",attrs:{id:_vm.workorder.id}}):_vm._e(),_vm.invokeRelatedListWidget?_c("div",{staticClass:"white-bg-block"},[_c("WoRelatedListWidget",{attrs:{widget:_vm.woWidget,details:_vm.workorder,moduleName:"workorder"}})],1):_vm._e(),_vm.showPermitListWidget?_c("div",{staticClass:"white-bg-block mT20"},[_c("WorkPermitListWidget",{attrs:{widget:_vm.permitWidget,staticWidgetHeight:"342",details:_vm.workorder,moduleName:"workorder"}})],1):_vm._e(),406!==_vm.$org.id?_c("WorkorderRelatedRecordsWidget",{attrs:{id:_vm.workorder.id}}):_vm._e()],1)])])]),_vm.isNotPortal?_c("el-tab-pane",{attrs:{label:_vm.$t("maintenance.pm_list.history"),name:"fifth"}},[_c("div",{staticClass:"pm-summary-inner-container mT20 height100"},[_c("div",{staticClass:"width100 height100 fc-summary-content-scroll"},[_c("div",{staticClass:"p30 white-bg-block pL80 pT30"},[_vm.workorder.createdTime<1553875578690?_c("activities",{ref:"activitiesDiv",attrs:{record:_vm.workorder,module:_vm.module_name}}):_c("ActivitiesView",{ref:"activitiesDiv",attrs:{record:_vm.workorder,module:_vm.module_name}})],1)])])]):_vm._e()],1)],1),_c("task-space-asset-chooser",{attrs:{visibility:_vm.visibility,quickSearchQuery:_vm.quickSearchQuery,filter:_vm.filter},on:{associate:_vm.associate,"update:visibility":function($event){_vm.visibility=$event}}}),_vm.showWorkDurationDialog?_c("work-hours",{attrs:{visible:_vm.showWorkDurationDialog,id:_vm.workorder.id,callback:_vm.workDurationCallBack},on:{"update:visible":function($event){_vm.showWorkDurationDialog=$event}}}):_vm._e(),_vm.customFieldUpdate?_c("f-dialog",{attrs:{visible:_vm.customFieldUpdate,width:"30%",title:"Enter "+_vm.selectedFieldUpdate.displayName+" Value",confirmTitle:"Update",height:"auto"},on:{save:function($event){return _vm.updateCustomFields()},close:_vm.closeUpdateDialog}},[_c("div",{staticClass:"pB30",attrs:{slot:"content"},slot:"content"},["TEXTAREA"===_vm.selectedFieldUpdate.dataTypeEnum||"TEXTAREA"===_vm.selectedFieldUpdate.dataTypeEnum._name||"STRING"===_vm.selectedFieldUpdate.dataTypeEnum||"STRING"===_vm.selectedFieldUpdate.dataTypeEnum._name?_c("el-input",{staticClass:"fc-input-full-border-select2 line-height20",attrs:{type:"textarea",placeholder:"Type your "+_vm.selectedFieldUpdate.displayName+" Value",autosize:{minRows:2,maxRows:4},resize:"none"},model:{value:_vm.selectedFieldValue,callback:function($$v){_vm.selectedFieldValue=$$v},expression:"selectedFieldValue"}}):"NUMBER"===_vm.selectedFieldUpdate.dataTypeEnum||"NUMBER"===_vm.selectedFieldUpdate.dataTypeEnum._name||"DECIMAL"===_vm.selectedFieldUpdate.dataTypeEnum||"DECIMAL"===_vm.selectedFieldUpdate.dataTypeEnum._name?_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"number",placeholder:"Type your "+_vm.selectedFieldUpdate.displayName+" Value"},model:{value:_vm.selectedFieldValue,callback:function($$v){_vm.selectedFieldValue=$$v},expression:"selectedFieldValue"}}):"ENUM"===_vm.field.dataTypeEnum||"ENUM"===_vm.field.dataTypeEnum._name?_c("el-select",{staticClass:"fc-input-full-border-h35 width100",on:{change:function($event){_vm.canEdit&&(_vm.selectedFieldUpdate=_vm.field,_vm.selectedFieldValue=_vm.workorder.data[_vm.field.name],_vm.updateCustomFields())}},model:{value:_vm.workorder.data[_vm.field.name],callback:function($$v){_vm.$set(_vm.workorder.data,_vm.field.name,$$v)},expression:"workorder.data[field.name]"}},_vm._l(_vm.field.enumMap,(function(enumValue,index){return _c("el-option",{key:index,attrs:{label:enumValue,value:parseInt(index)}})})),1):_vm._e()],1)]):_vm._e(),_vm.openTaskOptions?_c("workorder-options",{attrs:{workorders:[_vm.openWorkorderId],visibility:_vm.openTaskOptions,viewName:_vm.currentView,isDownloadOption:_vm.isDownloadOption,pdfUrl:_vm.pdfUrl,isPdfDownload:_vm.isPdfDownload},on:{"update:visibility":function($event){_vm.openTaskOptions=$event},"update:pdfUrl":function($event){_vm.pdfUrl=$event},"update:pdf-url":function($event){_vm.pdfUrl=$event}}}):_vm._e()],1):_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1),_c("pdf-download",{attrs:{url:_vm.pdfUrl,isDownload:_vm.isPdfDownload},on:{"update:isDownload":function($event){_vm.isPdfDownload=$event},"update:is-download":function($event){_vm.isPdfDownload=$event}}})],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),SummaryAttachment2=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(879288),__webpack_require__(186466),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(425728),__webpack_require__(162506),__webpack_require__(821057),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(336585),__webpack_require__(31766)),ChildRelationListWidget=__webpack_require__(569439),RelatedListWidget=__webpack_require__(77645),WorkorderRelatedRecordsWidgetvue_type_template_id_3cbfb23f_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.$validation.isEmpty(_vm.widgets)?_vm._e():_c("div",_vm._l(_vm.widgets,(function(widget,index){return _c("div",{key:index},[_c("div",{staticClass:"white-bg-block mT20"},[_c("RelatedListWidget",{attrs:{staticWidgetHeight:_vm.staticWidgetHeight,details:_vm.details,widget:widget,moduleName:"workorder"}})],1)])})),0)},WorkorderRelatedRecordsWidgetvue_type_template_id_3cbfb23f_staticRenderFns=[],api=(__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(32284)),validation=__webpack_require__(990260),WorkorderRelatedRecordsWidgetvue_type_script_lang_js={props:["id"],components:{RelatedListWidget:RelatedListWidget/* default */.Z},created:function(){this.fetchRelatedWidgetDetails()},data:function(){return{staticWidgetHeight:"342",details:null,widgets:null}},methods:{fetchRelatedWidgetDetails:function(){var _this=this,id=this.id,url="/v2/pages/workorder",params={id:id};api/* API */.bl.get(url,params).then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this.$message.error(error||"Error Occured");else if(!(0,validation/* isEmpty */.xb)(data)){var page=data.page,record=data.record;_this.details=record||{};var filteredWidget=[],_ref2=page||{},tabs=_ref2.tabs;if(!(0,validation/* isEmpty */.xb)(tabs)){var relatedRecordsTab=tabs.filter((function(t){return"related records"===t.name})),_ref3=relatedRecordsTab.length>0?relatedRecordsTab:[{}],_ref4=(0,slicedToArray/* default */.Z)(_ref3,1),sections=_ref4[0].sections;if(!(0,validation/* isEmpty */.xb)(sections)){var widgets=sections[0].widgets||[];if(!(0,validation/* isEmpty */.xb)(widgets)){for(var sysWidget=[],cusWidget=[],i=0;i<widgets.length;i++)if("RELATED_LIST"===widgets[i].widgetTypeEnum){var _ref5=widgets[i].relatedList||{},module=_ref5.module,_ref6=widgets[i].relatedList||{},field=_ref6.field;(0,validation/* isEmpty */.xb)(module)||["workorderCost","workpermit"].includes(module.name)||["parentWO"].includes(field.name)||(module.custom?cusWidget.push(widgets[i]):sysWidget.push(widgets[i]))}filteredWidget=sysWidget.concat(cusWidget)}}_this.widgets=filteredWidget}}}))}}},relatedlist_WorkorderRelatedRecordsWidgetvue_type_script_lang_js=WorkorderRelatedRecordsWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_WorkorderRelatedRecordsWidgetvue_type_script_lang_js,WorkorderRelatedRecordsWidgetvue_type_template_id_3cbfb23f_render,WorkorderRelatedRecordsWidgetvue_type_template_id_3cbfb23f_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkorderRelatedRecordsWidget=component.exports,CommonHazardListvue_type_template_id_15a0cc94_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"relatedListContainer",staticClass:"related-list-container"},[_vm.isLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_c("div",[_c("div",{staticClass:"related-list-header"},[_c("div",{staticClass:"header justify-content-space"},[_c("div",{staticClass:"widget-title d-flex flex-direction-column justify-center"},[_vm._v(" "+_vm._s(_vm.moduleDisplayName?_vm.moduleDisplayName:_vm.moduleName)+" ")]),!_vm.$validation.isEmpty(_vm.modulesList)||_vm.showFilter?[_vm.showFilterWizard?_c("AdvancedSearch",{key:_vm.moduleName+"-search",ref:"hazard-search",attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideQuery:!0,onSave:_vm.applyFilters,filterList:_vm.hazardFilters},scopedSlots:_vm._u([{key:"icon",fn:function(){return[_c("div")]},proxy:!0}],null,!1,882428920)}):_vm._e(),_c("div",{staticClass:"ml-auto flex items-center"},[_c("div",{staticClass:"resource-filter-icon"},[[_c("el-badge",{attrs:{"is-dot":"",hidden:_vm.$validation.isEmpty(_vm.hazardFilters)}},[_c("div",{staticClass:"resource-icons",on:{click:_vm.checkShowFitler}},[_c("InlineSvg",{staticClass:"d-flex cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm self-center"}})],1)])]],2),!_vm.$validation.isEmpty(_vm.hazardFilters)||_vm.showFilter?_c("div",[_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"el-dialog__close el-icon el-icon-close close-icon cursor-pointer resource-icons  mR5",on:{click:_vm.clearSearch}})]):_vm._e()]),_vm.$validation.isEmpty(_vm.totalCount)||_vm.$validation.isEmpty(_vm.modulesList)?_vm._e():_c("span",{staticClass:"separator self-center"},[_vm._v("|")]),_c("pagination",{staticClass:"self-center",attrs:{currentPage:_vm.page,total:_vm.totalCount,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})]:_vm._e(),_c("span",{staticClass:"self-center"},[_c("el-button",{staticClass:"fc-create-btn mR10",on:{click:_vm.addRelatedRecordsToggle}},[_c("i",{staticClass:"el-icon-plus"})])],1)],2)]),_c("div",[_vm.$validation.isEmpty(_vm.modulesList)?_c("div",{staticClass:"flex-middle justify-content-center wo-flex-col flex-direction-column",staticStyle:{"margin-top":"4%"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"pT10 fc-black-dark f18 bold pB50"},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_module_available",{moduleName:_vm.moduleDisplayName?_vm.moduleDisplayName:_vm.moduleName}))+" ")])],1):_c("div",{staticClass:"fc-list-view fc-table-td-height"},[_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.modulesList,fit:!0,height:_vm.tableHeight}},[_vm.$validation.isEmpty(_vm.mainFieldColumn)?_vm._e():_c("el-table-column",{attrs:{label:_vm.mainFieldColumn.displayName,prop:_vm.mainFieldColumn.name,fixed:"","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"table-subheading",on:{click:function($event){return _vm.redirectToOverview(item.row)}}},[_c("div",{staticClass:"d-flex"},[item.row.photoId?_c("div",[item.row.photoId>0?_c("img",{staticClass:"img-container mR10",attrs:{src:_vm.getImage(item.row.photoId)}}):_c(_vm.avatarMap[_vm.moduleName]?_vm.avatarMap[_vm.moduleName]:"Avatar",{tag:"component",staticClass:"mR10",attrs:{size:"lg",name:item.row.name,asset:item.row,color:"#4273e9"}})],1):_vm._e(),_c("div",{staticClass:"self-center name bold"},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(_vm.mainFieldColumn,item.row)||"---")+" ")])])])]}}],null,!1,2556422953)}),_vm._l(_vm.filteredViewColumns,(function(field,index){return _c("el-table-column",{key:index,attrs:{prop:field.name,label:field.displayName,align:_vm.fieldtype(field),"min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm.isSpecialHandlingField(field)?_c("keep-alive",[_c((_vm.listComponentsMap[_vm.moduleName]||{}).componentName,{tag:"component",attrs:{field:field,moduleData:scope.row},on:{refreshList:_vm.refreshRelatedList}})],1):_vm.isFileTypeField((field||{}).field)?_c("div",[_c("FilePreviewColumn",{attrs:{field:field,record:scope.row,isV2:!0}})],1):_c("div",{staticClass:"table-subheading",class:{"text-right":"DECIMAL"===(field.field||{}).dataTypeEnum}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(field,scope.row)||"---")+" ")])]}}],null,!0)})})),_c("el-table-column",{staticClass:"visibility-visible-actions",attrs:{prop:"",label:"",width:"130"},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"text-center"},[_c("span",{on:{click:function($event){return _vm.deleteRecord(item.row.id)}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color visibility-hide-actions mL10",attrs:{src:"svgs/delete",iconClass:"icon icon-sm icon-remove"}})],1)])]}}])})],2)],1)]),_vm.quickAddDialogVisibility?_c("QuickCreateRecord",{attrs:{dialogVisibility:_vm.quickAddDialogVisibility,moduleName:_vm.moduleName,parentId:_vm.getParentId},on:{"update:dialogVisibility":function($event){_vm.quickAddDialogVisibility=$event},"update:dialog-visibility":function($event){_vm.quickAddDialogVisibility=$event},saved:_vm.refreshRelatedList}}):_vm._e(),_vm.canShowWizard?_c("V3LookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowWizard,selectedLookupField:_vm.hazardField},on:{"update:canShowLookupWizard":function($event){_vm.canShowWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowWizard=$event},setLookupFieldValue:_vm.saveRecord}}):_vm._e(),_c("ColumnCustomization",{attrs:{visible:_vm.canShowColumnCustomization,moduleName:_vm.moduleName,columnConfig:_vm.columnCustomizationConfig,relatedViewDetail:_vm.viewDetail,relatedMetaInfo:_vm.currentMetaInfo,viewName:"hidden-all"},on:{"update:visible":function($event){_vm.canShowColumnCustomization=$event},refreshRelatedList:_vm.refreshRelatedList}})],1)])},CommonHazardListvue_type_template_id_15a0cc94_scoped_true_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),field=(__webpack_require__(648324),__webpack_require__(815872)),V3LookupFieldWizard=__webpack_require__(676474),eventBus=__webpack_require__(398011),AdvancedSearch=__webpack_require__(784823),CommonHazardListvue_type_script_lang_js={name:"CommonHazardList",extends:RelatedListWidget/* default */.Z,components:{V3LookupFieldWizard:V3LookupFieldWizard/* default */.Z,AdvancedSearch:AdvancedSearch/* default */.Z},data:function(){return{canShowWizard:!1,showFilter:!1,showFilterWizard:!1,hazardFilters:null,hazardField:{isDataLoading:!1,options:[],lookupModuleName:"hazard",field:{lookupModule:{name:"hazard",displayName:"Hazards"}},multiple:!0,forceFetchAlways:!0,selectedItems:[]},canShowColumnCustomization:!1}},created:function(){this.isFileTypeField=field/* isFileTypeField */.Lg,this.setQueryParams()},computed:{fieldtype:function(){return function(field){return"DECIMAL"===(field.field||{}).dataTypeEnum?"right":"left"}}},watch:{hazardFilters:{handler:function(oldVal,newVal){oldVal!=newVal&&(this.showFilterWizard=!1)}}},methods:{init:function(){this.loadData()},addRelatedRecordsToggle:function(){var hazardField=this.hazardField;this.$set(hazardField,"selectedItems",[]),this.$set(this,"hazardField",hazardField),this.canShowWizard=!0},setQueryParams:function(){var _this$details;this.hazardField["additionalParams"]={excludeAvailableParentAssociatedHazards:null===(_this$details=this.details)||void 0===_this$details?void 0:_this$details.id,parentModuleName:this.moduleName}},closeWizard:function(){this.canShowWizard=!1},checkShowFitler:function(){var _this=this;this.showFilterWizard=!1,this.$nextTick((function(){_this.openSearchFilter()}))},openSearchFilter:function(){var _this2=this;this.showFilterWizard=!0,this.$nextTick((function(){_this2.$refs["hazard-search"].openCloseSearch(!0)}))},applyFilters:function(_ref){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return filters=_ref.filters,_this3.isLoading=!0,_this3.showFilterWizard=!1,_this3.hazardFilters=filters,_this3.showFilter=!0,_context.next=7,_this3.fetchModulesData({filters:filters});case 7:_this3.isLoading=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},clearSearch:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this4.showFilterWizard=!1,_this4.hazardFilters=null,_this4.showFilter=!1,_context2.next=5,_this4.fetchModulesData();case 5:case"end":return _context2.stop()}}),_callee2)})))()},getParentModuleName:function(){var pageModuleName=this.pageModuleName,baseSpaces=["site","building","floor","space"];return baseSpaces.includes(pageModuleName)?"space":pageModuleName},saveRecord:function(HazardData){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var moduleName,hazardIds,parentId,parentModuleName,url,records,selectedHazardIds,field,selectedData,params,data,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this5.isLoading=!0,moduleName=_this5.moduleName,hazardIds=_this5.$getProperty(_this5,"details.hazardIds",[]),parentId=_this5.$getProperty(_this5,"details.id",null),parentModuleName=_this5.getParentModuleName(),url="v3/modules/data/bulkCreate",records=[],selectedHazardIds=[],field=_this5.$getProperty(HazardData,"field"),selectedData=_this5.$getProperty(field,"selectedItems"),records=selectedData.map((function(record){var value=record.value;selectedHazardIds.push(value);var obj={hazard:{id:value}};return obj["".concat(parentModuleName)]={id:parentId},obj})),selectedHazardIds=[].concat((0,toConsumableArray/* default */.Z)(selectedHazardIds),(0,toConsumableArray/* default */.Z)(hazardIds)),_this5.$set(_this5,"details.hazardIds",selectedHazardIds),params={data:{workorderHazard:records},moduleName:moduleName,params:{return:!0}},data={},data["".concat(parentModuleName,"Hazard")]=records,params["data"]=data,_context3.next=19,api/* API */.bl.post(url,params);case 19:_yield$API$post=_context3.sent,error=_yield$API$post.error,error?_this5.$message.error(error.message||"Error Occured"):(_this5.$message.success("Hazards added successfully"),_this5.closeWizard(),_this5.loadData()),_this5.isLoading=!1,_this5.closeWizard();case 24:case"end":return _context3.stop()}}),_callee3)})))()},fetchModulesData:function(props){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _this6$details,moduleName,page,parentModuleName,_ref2,_ref2$filters,filters,filter,params,_yield$API$fetchAll,list,error,meta,pagination;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return moduleName=_this6.moduleName,page=_this6.page,_this6.isLoading=!0,parentModuleName=_this6.getParentModuleName(),_ref2=props||{},_ref2$filters=_ref2.filters,filters=void 0===_ref2$filters?{}:_ref2$filters,filter=(0,objectSpread2/* default */.Z)({},filters),filter["".concat(parentModuleName)]={operatorId:9,value:["".concat(null===(_this6$details=_this6.details)||void 0===_this6$details?void 0:_this6$details.id)]},params={viewName:"hidden-all",withCount:!0,filters:JSON.stringify(filter),page:page,perPage:10},_context4.next=9,api/* API */.bl.fetchAll(moduleName,params,{force:!0});case 9:_yield$API$fetchAll=_context4.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,meta=_yield$API$fetchAll.meta,error||(pagination=meta.pagination,(0,validation/* isNullOrUndefined */.le)(list)||(_this6.$set(_this6,"modulesList",list),_this6.$set(_this6,"totalCount",null===pagination||void 0===pagination?void 0:pagination.totalCount)),eventBus/* eventBus */.Y.$emit("refresh-precautions"),_this6.totalCount>0?eventBus/* eventBus */.Y.$emit("refresh-workorderPrecaution",!0):eventBus/* eventBus */.Y.$emit("refresh-workorderPrecaution",!1)),_this6.isLoading=!1;case 15:case"end":return _context4.stop()}}),_callee4)})))()},deleteRecord:function(id){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var moduleDisplayName,moduleName,value;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return moduleDisplayName=_this7.moduleDisplayName,moduleName=_this7.moduleName,_context5.next=3,_this7.$dialog.confirm({title:"".concat(_this7.$t("custommodules.list.delete")," ").concat(moduleDisplayName),message:"".concat(_this7.$t("custommodules.list.delete_confirmation")," ").concat(moduleDisplayName,"?"),rbDanger:!0,rbLabel:_this7.$t("custommodules.list.delete")});case 3:if(value=_context5.sent,!value){_context5.next=19;break}return _this7.isLoading=!0,_context5.prev=6,_context5.next=9,api/* API */.bl.deleteRecord(moduleName,id);case 9:return _this7.$message.success("".concat(moduleDisplayName," ").concat(_this7.$t("custommodules.list.delete_success"))),_context5.next=12,_this7.loadData();case 12:eventBus/* eventBus */.Y.$emit("refresh-workorderPrecaution"),_context5.next=18;break;case 15:_context5.prev=15,_context5.t0=_context5["catch"](6),_this7.$message.error(_context5.t0);case 18:_this7.isLoading=!1;case 19:case"end":return _context5.stop()}}),_callee5,null,[[6,15]])})))()}}},common_CommonHazardListvue_type_script_lang_js=CommonHazardListvue_type_script_lang_js,CommonHazardList_component=(0,componentNormalizer/* default */.Z)(common_CommonHazardListvue_type_script_lang_js,CommonHazardListvue_type_template_id_15a0cc94_scoped_true_render,CommonHazardListvue_type_template_id_15a0cc94_scoped_true_staticRenderFns,!1,null,"15a0cc94",null)
/* harmony default export */,CommonHazardList=CommonHazardList_component.exports,Activities2=__webpack_require__(638507),ActivitiesView=__webpack_require__(512208),vuex_esm=__webpack_require__(420629),Avatar=__webpack_require__(574752),FDialogNew=__webpack_require__(436756),SpaceAssetChooser=__webpack_require__(372587),MobileAttachment2=__webpack_require__(391810),TaskAttachmentPreview=__webpack_require__(252669),WorkHours=__webpack_require__(16297),FMiniChart=__webpack_require__(989778),inventory=__webpack_require__(884692),workorderHelper=__webpack_require__(865764),AlertBanner=__webpack_require__(822902),WarningBanner=__webpack_require__(38278),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),AssetBreakdown=__webpack_require__(749563),quasar_esm=__webpack_require__(641358),WorkOrderSummaryPdfOptions=__webpack_require__(455360),TransitionButtons=__webpack_require__(987612),SafetyPlanPrecautionsListvue_type_template_id_2b8fca91_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"relatedListContainer",staticClass:"related-list-container"},[_vm.isLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_c("div",{staticClass:"related-list-header pB25"},[_c("div",{staticClass:"header justify-content-space"},[_c("div",{staticClass:"widget-title d-flex flex-direction-column justify-center"},[_vm._v(" "+_vm._s(_vm.moduleDisplayName?_vm.moduleDisplayName:_vm.moduleName)+" ")]),!_vm.$validation.isEmpty(_vm.modulesList)||_vm.showFilter?[_vm.showFilterWizard?_c("AdvancedSearch",{key:_vm.moduleName+"-search",ref:"precaution-search",attrs:{moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,hideQuery:!0,onSave:_vm.applyFilters,filterList:_vm.precautionFilters},scopedSlots:_vm._u([{key:"icon",fn:function(){return[_c("div")]},proxy:!0}],null,!1,882428920)}):_vm._e(),_vm.showSearchField()?_c("div",{staticClass:"ml-auto flex items-center"},[_c("div",{staticClass:"resource-filter-icon"},[[_c("el-badge",{attrs:{"is-dot":"",hidden:_vm.$validation.isEmpty(_vm.precautionFilters)}},[_c("div",{staticClass:"resource-icons",on:{click:_vm.checkShowFitler}},[_c("InlineSvg",{staticClass:"d-flex cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm self-center"}})],1)])]],2),!_vm.$validation.isEmpty(_vm.precautionFilters)||_vm.showFilter?_c("div",[_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"el-dialog__close el-icon el-icon-close close-icon cursor-pointer resource-icons  mR5",on:{click:_vm.clearSearch}})]):_vm._e()]):_vm._e(),_vm.$validation.isEmpty(_vm.totalCount)||_vm.$validation.isEmpty(_vm.modulesList)?_vm._e():_c("span",{staticClass:"separator self-center"},[_vm._v("|")]),_c("pagination",{staticClass:"self-center",attrs:{currentPage:_vm.page,total:_vm.totalCount,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})]:_vm._e()],2)]),_c("div",[_vm.isLoading?_c("div",{staticClass:"loading-container d-flex justify-content-center"},[_c("spinner",{attrs:{show:_vm.isLoading}})],1):_vm.$validation.isEmpty(_vm.modulesList)?_c("div",{staticClass:"flex-middle justify-content-center wo-flex-col flex-direction-column",staticStyle:{"margin-top":"4%"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"pT10 fc-black-dark f18 bold pB50"},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_module_available",{moduleName:_vm.moduleDisplayName?_vm.moduleDisplayName:_vm.moduleName}))+" ")])],1):_c("div",{staticClass:"fc-list-view fc-table-td-height"},[_vm.hideColumnCustomizationList.includes(_vm.moduleName)?_vm._e():_c("div",{staticClass:"view-column-chooser",on:{click:_vm.showColumnCustomization}},[_c("img",{staticClass:"column-customization-icon",attrs:{src:__webpack_require__(266707)}})]),_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.modulesList,fit:!0,height:_vm.tableHeight,"header-cell-style":{background:"#f3f1fc"}}},[_vm.$validation.isEmpty(_vm.mainFieldColumn)?_vm._e():_c("el-table-column",{attrs:{label:_vm.mainFieldColumn.displayName,prop:_vm.mainFieldColumn.name,fixed:"","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"table-subheading",on:{click:function($event){return _vm.redirectToOverview(item.row)}}},[_c("div",{staticClass:"d-flex"},[item.row.photoId?_c("div",[item.row.photoId>0?_c("img",{staticClass:"img-container mR10",attrs:{src:_vm.getImage(item.row.photoId)}}):_c(_vm.avatarMap[_vm.moduleName]?_vm.avatarMap[_vm.moduleName]:"Avatar",{tag:"component",staticClass:"mR10",attrs:{size:"lg",name:item.row.name,asset:item.row,color:"#4273e9"}})],1):_vm._e(),_c("div",{staticClass:"self-center name bold"},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(_vm.mainFieldColumn,item.row)||"---")+" ")])])])]}}],null,!1,1190894761)}),_vm._l(_vm.filteredViewColumns,(function(field,index){return _c("el-table-column",{key:index,attrs:{prop:field.name,label:field.displayName,align:"DECIMAL"===(field.field||{}).dataTypeEnum?"right":"left","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm.isSpecialHandlingField(field)?_c("keep-alive",[_c((_vm.listComponentsMap[_vm.moduleName]||{}).componentName,{tag:"component",attrs:{field:field,moduleData:scope.row},on:{refreshList:_vm.refreshRelatedList}})],1):_vm.isFileTypeField((field||{}).field)?_c("div",[_c("FilePreviewColumn",{attrs:{field:field,record:scope.row,isV2:!0}})],1):_c("div",{staticClass:"table-subheading",class:{"text-right":"DECIMAL"===(field.field||{}).dataTypeEnum}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(field,scope.row)||"---")+" ")])]}}],null,!0)})}))],2)],1)]),_vm.quickAddDialogVisibility?_c("QuickCreateRecord",{attrs:{dialogVisibility:_vm.quickAddDialogVisibility,moduleName:_vm.moduleName,parentId:_vm.getParentId},on:{"update:dialogVisibility":function($event){_vm.quickAddDialogVisibility=$event},"update:dialog-visibility":function($event){_vm.quickAddDialogVisibility=$event},saved:_vm.refreshRelatedList}}):_vm._e(),_c("ColumnCustomization",{attrs:{visible:_vm.canShowColumnCustomization,moduleName:_vm.moduleName,columnConfig:_vm.columnCustomizationConfig,relatedViewDetail:_vm.viewDetail,relatedMetaInfo:_vm.currentMetaInfo,viewName:"hidden-all"},on:{"update:visible":function($event){_vm.canShowColumnCustomization=$event},refreshRelatedList:_vm.refreshRelatedList}})],1)},SafetyPlanPrecautionsListvue_type_template_id_2b8fca91_scoped_true_staticRenderFns=[],EQUALS_OPERATOR=9,SHOW_SEARCH_FIELD=["asset","site","building","floor","space"],SafetyPlanPrecautionsListvue_type_script_lang_js={name:"SafetyPlanPrecautionsList",extends:RelatedListWidget/* default */.Z,props:["details"],components:{AdvancedSearch:AdvancedSearch/* default */.Z},data:function(){return{showFilter:!1,showFilterWizard:!1,hazardIds:[],precautionFilters:null,canShowColumnCustomization:!1}},computed:{moduleName:function(){return"hazardPrecaution"},moduleDisplayName:function(){return"Precautions"},canShowDelete:function(){return!1}},created:function(){this.fetchSafetyPlanHazards()},mounted:function(){eventBus/* eventBus */.Y.$on("refesh-parent",this.fetchSafetyPlanHazards),eventBus/* eventBus */.Y.$on("refresh-precautions",this.fetchSafetyPlanHazards)},methods:{showSearchField:function(){return SHOW_SEARCH_FIELD.includes(this.pageModuleName)},checkShowFitler:function(){var _this=this;this.showFilterWizard=!1,this.$nextTick((function(){_this.openSearchFilter()}))},openSearchFilter:function(){var _this2=this;this.showFilterWizard=!0,this.$nextTick((function(){_this2.$refs["precaution-search"].openCloseSearch(!0)}))},applyFilters:function(_ref){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return filters=_ref.filters,_this3.isLoading=!0,_this3.showFilterWizard=!1,_this3.precautionFilters=filters,_this3.showFilter=!0,_context.next=7,_this3.fetchModulesData({filters:filters});case 7:_this3.isLoading=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},clearSearch:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this4.showFilterWizard=!1,_this4.precautionFilters=null,_this4.showFilter=!1,_context2.next=5,_this4.fetchModulesData();case 5:case"end":return _context2.stop()}}),_callee2)})))()},getParentModuleName:function(){var pageModuleName=this.pageModuleName,baseSpaces=["site","building","floor","space"];return baseSpaces.includes(pageModuleName)?"space":pageModuleName},fetchSafetyPlanHazards:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _this5$details,parentModuleName,filter,params,_yield$API$fetchAll,list,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this5.hazardIds=[],_this5.isLoading=!0,parentModuleName=_this5.getParentModuleName(),filter={},filter["".concat(parentModuleName)]={operatorId:EQUALS_OPERATOR,value:["".concat(null===(_this5$details=_this5.details)||void 0===_this5$details?void 0:_this5$details.id)]},params={withCount:!0},params["filters"]=JSON.stringify(filter),_context3.next=9,api/* API */.bl.fetchAll("".concat(parentModuleName,"Hazard"),params,{force:!0});case 9:_yield$API$fetchAll=_context3.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error||(null===list||void 0===list?void 0:list.length)>0&&(_this5.hazardIds=list.map((function(data){var hazard=_this5.$getProperty(data,"hazard",{}),hazardId=_this5.$getProperty(hazard,"id",null);return hazardId+""}))),_this5.fetchModulesData(),_this5.isLoading=!1;case 15:case"end":return _context3.stop()}}),_callee3)})))()},fetchModulesData:function(props){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleName,hazardIds,_ref2,_ref2$filters,filters,filter,params,_yield$API$fetchAll2,list,error,meta,pagination;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(moduleName=_this6.moduleName,hazardIds=_this6.hazardIds,_ref2=props||{},_ref2$filters=_ref2.filters,filters=void 0===_ref2$filters?{}:_ref2$filters,(0,validation/* isEmpty */.xb)(hazardIds)){_context4.next=15;break}return filter=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),{},{hazard:{operatorId:9,value:hazardIds}}),params={withCount:!0,filters:JSON.stringify(filter)},_context4.next=8,api/* API */.bl.fetchAll(moduleName,params,{force:!0});case 8:_yield$API$fetchAll2=_context4.sent,list=_yield$API$fetchAll2.list,error=_yield$API$fetchAll2.error,meta=_yield$API$fetchAll2.meta,error||(pagination=meta.pagination,(0,validation/* isNullOrUndefined */.le)(list)||(_this6.$set(_this6,"modulesList",list),_this6.$set(_this6,"totalCount",null===pagination||void 0===pagination?void 0:pagination.totalCount))),_context4.next=16;break;case 15:_this6.$set(_this6,"modulesList",[]);case 16:case"end":return _context4.stop()}}),_callee4)})))()}}},component_SafetyPlanPrecautionsListvue_type_script_lang_js=SafetyPlanPrecautionsListvue_type_script_lang_js,SafetyPlanPrecautionsList_component=(0,componentNormalizer/* default */.Z)(component_SafetyPlanPrecautionsListvue_type_script_lang_js,SafetyPlanPrecautionsListvue_type_template_id_2b8fca91_scoped_true_render,SafetyPlanPrecautionsListvue_type_template_id_2b8fca91_scoped_true_staticRenderFns,!1,null,"2b8fca91",null)
/* harmony default export */,SafetyPlanPrecautionsList=SafetyPlanPrecautionsList_component.exports,WorkOrderFieldDetails=__webpack_require__(587971),ApprovalBar=__webpack_require__(42525),CustomButton=__webpack_require__(623857),CustomButtonUtil=__webpack_require__(746095),picklist=__webpack_require__(961358),sanitize=__webpack_require__(678042),InstantTranslate=__webpack_require__(142885),router=__webpack_require__(329435),MarkdownHelpList=__webpack_require__(566302),PDFDownload=__webpack_require__(615987),NotesWidget=__webpack_require__(304119),WorkorderSummaryvue_type_script_lang_js={name:"WorkorderSummary",mixins:[workorderHelper/* default */.Z],components:{Avatar:Avatar["default"],Activities:Activities2/* default */.Z,QIcon:quasar_esm/* QIcon */.oF,Attachments:SummaryAttachment2/* default */.Z,WoRelatedListWidget:ChildRelationListWidget/* default */.Z,WorkPermitListWidget:RelatedListWidget/* default */.Z,WorkorderRelatedRecordsWidget:WorkorderRelatedRecordsWidget,FDialog:FDialogNew/* default */.Z,TaskSpaceAssetChooser:SpaceAssetChooser/* default */.Z,MobileAttachment:MobileAttachment2/* default */.Z,WorkHours:WorkHours/* default */.Z,FMiniChart:FMiniChart/* default */.Z,InventorySummary:inventory/* default */.Z,ActivitiesView:ActivitiesView/* default */.Z,AssetBreakdown:AssetBreakdown/* default */.Z,AlertBanner:AlertBanner/* default */.Z,WarningBanner:WarningBanner/* default */.Z,workorderOptions:WorkOrderSummaryPdfOptions/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,HazardListWidget:CommonHazardList,HazardPrecautions:SafetyPlanPrecautionsList,WoFieldDetails:WorkOrderFieldDetails/* default */.Z,ApprovalBar:ApprovalBar/* default */.Z,CustomButton:CustomButton/* default */.Z,MarkdownHelpList:MarkdownHelpList/* default */.Z,TaskAttachmentPreview:TaskAttachmentPreview/* default */.Z,InstantTranslate:InstantTranslate/* default */.Z,PdfDownload:PDFDownload/* default */.Z,NotesWidget:NotesWidget["default"]},data:function(){return{commentWidgetLayoutParam:{w:24,x:0,h:8,y:7},commentWidget:{id:-1,layoutParams:null,name:null,orgId:-1,relatedList:null,relation:null,section:null,sectionId:0,title:"Comments",widgetParams:null,widgetType:14,widgetTypeEnum:"COMMENT",widgetTypeObj:{name:"comment",featureId:-1,value:14},widgets:null},taskErrorMap:{},invokeRelatedListWidget:!1,woWidget:{relatedList:{module:{}}},permitWidget:{relatedList:{module:{},field:{name:"ticket"}}},showPermitListWidget:!1,nextExecutionTime:null,photos:[],onFocus:!1,photoUploadUrl:null,photoUploadData:{},showAssetBreakdown:!1,assetBDSourceDetails:{condition:null,assetid:null,sourceId:null,sourceType:null},tasks:[],module_name:"workorder",activeName:"first",dialogVisible:!1,showSiteEdit:!0,validationRules:{},errorMap:{},errorQue:{},errorMessage:{},taskBulkList:[],fields:[],noOfUpdatedTAsk:0,testVar:null,customFieldUpdate:!1,visibility:!1,quickSearchQuery:"",loading:!0,summoryview:!0,fieldvisibility:!1,showWorkDurationDialog:!1,workDurationCallBack:null,radio2:"",selectedFieldUpdate:null,selectedFieldValue:null,summaryWindow:"true",subSection:"summarypage",sequencedData:!1,summarySection:"details",taskReadingFields:[],editFormVisibilty:!1,duedate:"",value1:"",subheaderMenu:[{label:this.$t("common.events.today"),path:{path:"/app/fa/events/today"}},{label:this.$t("common.events.yesterday"),path:{path:"/app/fa/events/yesterday"}},{label:this.$t("common.events.this_week"),path:{path:"/app/fa/events/thisweek"}},{label:this.$t("common.events.last_week"),path:{path:"/app/fa/events/lastweek"}},{label:this.$t("common.events.all_events"),path:{path:"/app/fa/events/all"}}],comments:[],taskList:{},preRequestList:{},newTaskList:[],sections:{},preRequestSections:{},newComment:{parentModuleLinkName:"ticketnotes",parentId:this.$route.params.id,body:null,notifyRequester:!1},commentFocus:!0,newTask:{subject:"",description:"",resource:{id:-1},isReadingTask:!1,readingFieldId:null,options:[],taskType:-1,enableInput:!1,inputType:1,attachmentRequired:!1,inputValidation:null,minSafeLimit:null,maxSafeLimit:null,id:-1},showAddTask:!1,selectedTask:{inputValidationRuleId:-1,inputValidation:null,safeLimitRuleId:-1,minSafeLimit:null,maxSafeLimit:null,options:[],taskType:-1,enableInput:!1,inputType:1,attachmentRequired:!1,subject:"",selectedResourceName:"",inputValues:[]},showAddPreRequest:!1,selectedPreRequest:{inputValidationRuleId:-1,inputValidation:null,safeLimitRuleId:-1,minSafeLimit:null,maxSafeLimit:null,options:[],taskType:-1,enableInput:!1,inputType:1,attachmentRequired:!1,subject:"",selectedResourceName:"",inputValues:[]},pickerOptions:{disabledDate:function(time){return time.getTime()<Date.now()-864e5}},waitBoolean:!0,downloadSummary:!1,workOrderTotalCost:null,workOrderSubTotal:null,taskChartData:null,workOrderStates:[],activeWoStateData:null,selectedTaskResource:null,showTaskResourceFilter:!1,metricWithUnits:{},readingFieldUnits:[],skipValidation:!1,readingFieldErrorToggle:!1,readingFieldError:null,currentValue:null,previousValue:null,readingFieldSuggestionToggle:!1,readingFieldSuggestions:[],averageValue:[],suggestedUnits:[],currentTaskObj:null,addTaskRemarksDialog:!1,showMandatoryInputsDialog:!1,addAttachmentRequiredDialog:!1,vendorsList:[],openTaskOptions:!1,hazardWidget:{relatedList:{module:{},field:{name:"workorder"}}},showHazardListWidget:!1,currentTaskformData:{},POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,readingData:6,consumptionData:"",markdownshow:!1,woDescriptiontranslate:!1,isDownloadOption:!1,pdfUrl:"",workOrderSettingsRelatedData:{},isUserAddingTask:!1}},created:function(){var _this=this;this.isBooleanField=field/* isBooleanField */.Mw,window.addEventListener("click",this.blurCommentBox),this.$store.dispatch("loadSite"),this.$store.dispatch("loadTicketStatus","workorder"),this.$store.dispatch("loadApprovalStatus"),this.$store.dispatch("view/loadModuleMeta","workorder"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups"),eventBus/* eventBus */.Y.$on("woDescriptiontranslate",(function(woDescriptiontranslate){_this.woDescriptiontranslate=woDescriptiontranslate})),eventBus/* eventBus */.Y.$on("refreshWorkOrderPage",(function(){return _this.fetchWo(!0)}))},destroyed:function(){var _this2=this;eventBus/* eventBus */.Y.$off("woDescriptiontranslate",(function(){_this2.woDescriptiontranslate=!1})),eventBus/* eventBus */.Y.$off("refreshWorkOrderPage")},mounted:function(){var _this3=this;this.init();var woPromise=this.fetchWo(!0),taskPromise=this.loadTasks(this.workorder);this.loadComments(),this.loadReadingFieldUnits(),Promise.all([woPromise,taskPromise]).then((function(resp){_this3.workorder.pm&&_this3.workorder.pm.id&&_this3.getNextWorkOrderTime().then((function(resp){if(resp.data.result&&(_this3.nextExecutionTime=resp.data.result.nextExecutionTime,_this3.taskList))for(var keys=Object.keys(_this3.taskList),i=0;i<keys.length;i++)for(var tasks=_this3.taskList[keys[i]],k=0;k<tasks.length;k++)if(_this3.workorder.pm&&(!_this3.taskList[keys[i]][k].inputTime||-1===_this3.taskList[keys[i]][k].inputTime)){var nextExec=_this3.nextExecutionTime;if(nextExec&&nextExec>0){var currentTime=(new Date).valueOf();currentTime>=_this3.workorder.createdTime&&currentTime<nextExec||(_this3.taskList[keys[i]][k].inputTime=_this3.convertTimeAsIfFromDatePicker(_this3.workorder.createdTime))}}}))})).then((function(){_this3.loadWorkOrderFeatureSettings()}));var currentSiteId=Number(this.$cookie.get("fc.currentSite"))||-1;-1!==currentSiteId&&(this.showSiteEdit=!1),this.$http.get("v2/photos/prerequisitephotos?parentId="+this.openWorkorderId).then((function(response){response.data&&0===response.data.responseCode&&(_this3.photos=response.data.result.photos?response.data.result.photos:[])})),this.loadVendorsPicklist(),eventBus/* eventBus */.Y.$on("refesh-parent",(function(){_this3.fetchWo(!0),_this3.loadWorkOrderFeatureSettings()})),this.$root.$on("reloadWO",(function(){_this3.fetchWo(!0),_this3.loadWorkOrderFeatureSettings()}))},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority},ticketstatus:function(state){return state.ticketStatus.workorder},moduleMeta:function(state){return state.view.metaInfo},sites:function(state){return state.site},hasWorkOrderClosePermission:function(){return(0,router/* isWebTabsEnabled */.tj)()?this.$hasPermission("".concat(this.moduleName,":UPDATE_CLOSE_WORKORDER")):this.$hasPermission("".concat(this.moduleName,":CLOSE_WORK_ORDER"))}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketTypePickList","getTicketPriority","getApprovalStatus","isStatusLocked"])),{},{isWorkOrderFeatureSettingsLicenseEnabled:function(){var $helpers=this.$helpers,_ref=$helpers||{},isLicenseEnabled=_ref.isLicenseEnabled;return isLicenseEnabled("WORK_ORDER_FEATURE_SETTINGS")},
//TODO: WORK_ORDER_FEATURE_SETTINGS license check
canExecuteTask:function(){
// -- can be removed later --
var isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled;if(!isWorkOrderFeatureSettingsLicenseEnabled){var hasExecuteTaskPermission=this.hasExecuteTaskPermission;return hasExecuteTaskPermission}
// -- can be removed later --
var workOrderSettings=this.workOrderSettings,_ref2=workOrderSettings||{},executeTask=_ref2.executeTask,_ref3=executeTask||{},_ref3$allowed=_ref3.allowed,allowed=void 0!==_ref3$allowed&&_ref3$allowed;return allowed},
//TODO: WORK_ORDER_FEATURE_SETTINGS license check
canAddTask:function(){
// -- can be removed later --
var isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled;if(!isWorkOrderFeatureSettingsLicenseEnabled)return!0;
// -- can be removed later --
var workOrderSettings=this.workOrderSettings,_ref4=workOrderSettings||{},manageTask=_ref4.manageTask,_ref5=manageTask||{},_ref5$allowed=_ref5.allowed,allowed=void 0!==_ref5$allowed&&_ref5$allowed;return allowed},workOrderSettings:function(){var workOrderSettingsRelatedData=this.workOrderSettingsRelatedData,_ref6=workOrderSettingsRelatedData||{},_ref6$workOrderSettin=_ref6.workOrderSettings,workOrderSettings=void 0===_ref6$workOrderSettin?{}:_ref6$workOrderSettin;return workOrderSettings},canShowMessageBanner:function(){return!(0,validation/* isEmpty */.xb)(this.bannerMessage)},bannerMessage:function(){var message=null,isTasksTab=this.isTasksTab,isPlansTab=this.isPlansTab,isActualsTab=this.isActualsTab,workOrderSettingsRelatedData=this.workOrderSettingsRelatedData,_ref7=workOrderSettingsRelatedData||{},workOrderSettings=_ref7.workOrderSettings;
// Tasks tab conditional messages
if(isTasksTab){var _ref8=workOrderSettings||{},executeTask=_ref8.executeTask,_ref9=executeTask||{},reason=_ref9.reason,allowed=_ref9.allowed,workorder=this.workorder,_ref10=workorder||{},noOfTasks=_ref10.noOfTasks;allowed||(0,validation/* isEmpty */.xb)(reason)||!((0,validation/* isEmpty */.xb)(noOfTasks)||noOfTasks<=0)?(0,validation/* isEmpty */.xb)(reason)||(message=reason):
/*
            -> True when executeTask is false, and there is no task in workorder
            -> It's been done to not-to show "Task Execution not allowed" bannerMessage when there are no tasks.
           */
message=null}else if(isPlansTab){
// Plans tab conditional messages
var _ref11=workOrderSettings||{},inventoryPlaning=_ref11.inventoryPlaning,_ref12=inventoryPlaning||{},_reason=_ref12.reason;(0,validation/* isEmpty */.xb)(_reason)||(message=_reason)}else if(isActualsTab){
// Actuals tab conditional messages
var _ref13=workOrderSettings||{},inventoryActuals=_ref13.inventoryActuals,_ref14=inventoryActuals||{},_reason2=_ref14.reason;(0,validation/* isEmpty */.xb)(_reason2)||(message=_reason2)}return message},isTasksTab:function(){return"second"===this.activeName},hasManageTaskPermission:function(){var _ref15=(0,router/* getApp */.wx)()||{},linkName=_ref15.linkName;return"newapp"===linkName||this.$hasPermission("workorder:UPDATE_TASK")},mandatoryInputsTitle:function(){return this.addAttachmentRequiredDialog&&this.addTaskRemarksDialog?"Attach Photo and Add Remarks":this.addAttachmentRequiredDialog?"Attach Photo":this.addTaskRemarksDialog?"Add Remarks":""},isWorkPermitLicenseEnabled:function(){var $helpers=this.$helpers,_ref16=$helpers||{},isLicenseEnabled=_ref16.isLicenseEnabled;return isLicenseEnabled("WORK_PERMIT")},aster:function(){var ASTER=583,currentOrgID=this.$org.id;return currentOrgID&&currentOrgID===ASTER},readingPickerOptions:function(){if(!this.workorder.pm||!this.nextExecutionTime||this.nextExecutionTime<=0)return{disabledDate:function(time){return!1}};var startTime=this.$helpers.getOrgMoment(this.workorder.createdTime).valueOf(),endTime=this.$helpers.getOrgMoment(this.nextExecutionTime).valueOf();return{disabledDate:function(time){var res=!(time.getTime()>=startTime&&time.getTime()<endTime||time.getTime()+864e5>=startTime&&time.getTime()<endTime);return res}}},tickettype:function(){return this.getTicketTypePickList()},isPrerequisiteCompleted:function(){return!this.workorder.prerequisiteEnabled||!this.workorder.allowNegativePreRequisite||-1===this.workorder.allowNegativePreRequisite||!this.workorder.preRequestStatus||-1===this.workorder.preRequestStatus||this.workorder.preRequestStatus&&2===this.workorder.allowNegativePreRequisite&&(2===this.workorder.preRequestStatus||3===this.workorder.preRequestStatus)||3===this.workorder.allowNegativePreRequisite&&3===this.workorder.preRequestStatus},enablePrerequisiteApprove:function(){return this.workorder.prerequisiteEnabled&&this.workorder.allowNegativePreRequisite&&3===this.workorder.allowNegativePreRequisite&&this.workorder.prerequisiteApprover&&!this.workorder.preRequisiteApproved&&2===this.workorder.preRequestStatus},isTenantEnabled:function(){return this.$helpers.isLicenseEnabled("TENANTS")},isReadingFieldValidationEnabled:function(){return this.$helpers.isLicenseEnabled("READING_FIELD_UNITS_VALIDATION")},canEdit:function(){var _this$workorder,hasState=this.$getProperty(this.workorder,"moduleState.id",null),isLocked=this.isStatusLocked(null===this||void 0===this||null===(_this$workorder=this.workorder)||void 0===_this$workorder||null===(_this$workorder=_this$workorder.moduleState)||void 0===_this$workorder?void 0:_this$workorder.id,"workorder"),isRequestedState=this.isRequestedState;return hasState&&!isLocked&&!isRequestedState},openWorkorderId:function(){var id=this.$attrs.id||this.$route.params.id;return id?parseInt(id):-1},allTaskStatus:function(){var status=null,closedCount=0,taskCount=0;for(var idx in this.taskList)for(var idx2 in this.taskList[idx]){taskCount+=1;var isOpen="OPEN"===this.taskList[idx][idx2].status.type,hasInputValue=this.taskList[idx][idx2].inputValue;isOpen&&1!==this.taskList[idx][idx2].inputType&&!hasInputValue?(null===status&&(status=!1),status=status&&!1):(null===status&&(status=!0),status=status&&!0,isOpen||(closedCount+=1))}return closedCount===taskCount&&(status=!1),status},openStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Submitted","workorder").id;return id?parseInt(id):id},closedStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Closed","workorder").id;return id?parseInt(id):id},resolvedStatusId:function(){var id=this.$store.getters.getTicketStatusByLabel("Resolved","workorder").id;return id?parseInt(id):id},workorder:function(){return this.$store.state.workorder.currentWorkOrder},ticketStatusValue:function(){return this.workorder&&this.workorder.status&&this.workorder.status.id&&this.$store.getters.getTicketStatus(this.workorder.status.id,"workorder")||""},inventory:function(){var _this$$store$state$in,_this$$store;return null!==(_this$$store$state$in=null===this||void 0===this||null===(_this$$store=this.$store)||void 0===_this$$store||null===(_this$$store=_this$$store.state)||void 0===_this$$store||null===(_this$$store=_this$$store.inventory)||void 0===_this$$store?void 0:_this$$store.inventory)&&void 0!==_this$$store$state$in?_this$$store$state$in:[]},stockedTools:function(){var _this$$store$state$st,_this$$store2;return null!==(_this$$store$state$st=null===this||void 0===this||null===(_this$$store2=this.$store)||void 0===_this$$store2||null===(_this$$store2=_this$$store2.state)||void 0===_this$$store2||null===(_this$$store2=_this$$store2.stockedtool)||void 0===_this$$store2?void 0:_this$$store2.stockedTools)&&void 0!==_this$$store$state$st?_this$$store$state$st:[]},taskResources:function(){var obj={};if(this.taskList)for(var idx in this.taskList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.taskList[idx]);try{for(_iterator.s();!(_step=_iterator.n()).done;){var task=_step.value;task.resource&&task.resource.id>0&&(obj[task.resource.id]=task.resource)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return Object.values(obj)},filter:function(){var filter={};return this.workorder.siteId&&this.workorder.siteId>0&&(filter.site=Number(this.workorder.siteId)),filter},allowEdit:function(){return!1},isApprovalEnabled:function(){var _this$workorder2=this.workorder,workorder=void 0===_this$workorder2?{}:_this$workorder2,_ref17=workorder||{},approvalFlowId=_ref17.approvalFlowId,approvalStatus=_ref17.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)},isRequestedState:function(){var workorder=this.workorder,_ref18=workorder||{},approvalStatus=_ref18.approvalStatus;if((0,validation/* isEmpty */.xb)(approvalStatus))return!1;var statusObj=this.getApprovalStatus(approvalStatus.id);return this.$getProperty(statusObj,"requestedState",!1)},canDisable:function(){return this.isApprovalEnabled&&!this.isRequestedState},currentView:function(){var viewName=this.$attrs.viewname||this.$route.params.viewname||"all";return viewName},isDisabled:function(){return!this.consumptionData},canShowReportDownTime:function(){var workorder=this.workorder,isNotPortal=this.isNotPortal,_ref19=workorder||{},resource=_ref19.resource,_ref20=resource||{},resourceType=_ref20.resourceType,id=_ref20.id;return isNotPortal&&2===resourceType&&-1!==id},isWoStateTransitionLicenseEnabled:function(){return this.$helpers.isLicenseEnabled("WO_STATE_TRANSITION_V3")},updateUrlString:function(){return this.isWoStateTransitionLicenseEnabled?null:"v2/workorders/update"},isLockedState:function(){var workorder=this.workorder,_ref21=workorder||{},moduleState=_ref21.moduleState;return this.$getProperty(moduleState,"recordLocked",!1)},hasAddTaskPermission:function(){return this.$hasPermission("workorder:UPDATE_TASK")},hasExecuteTaskPermission:function(){
// hasUpdateTaskPermission changed to hasExecuteTaskPermission
return this.$hasPermission("workorder:UPDATE_WORKORDER_TASK")},isUpdateTaskAllowed:function(){var hasExecuteTaskPermission=this.hasExecuteTaskPermission;return hasExecuteTaskPermission?"":"pointer-events-none"},isUpdateAllowed:function(){var hasExecuteTaskPermission=this.hasExecuteTaskPermission;return hasExecuteTaskPermission?"":"cursor-not-allowed"},isPdfDownload:{get:function(){var openTaskOptions=this.openTaskOptions,isDownloadOption=this.isDownloadOption,pdfUrl=this.pdfUrl;return openTaskOptions&&isDownloadOption&&!(0,validation/* isEmpty */.xb)(pdfUrl)},set:function(newValue){newValue||this.$set(this,"pdfUrl",""),this.$set(this,"openTaskOptions",newValue)}},isTaskListEmpty:function(){var taskList=this.taskList;return(0,validation/* isEmpty */.xb)(taskList)},addTaskCheckBasedOnWorkOrderFeatureSetting:function(){var hasAddTaskPermission=this.hasAddTaskPermission,canAddTask=this.canAddTask,isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled,addTaskCheck=!1;
// TODO: after this license is removed entirely keep this part
return addTaskCheck=isWorkOrderFeatureSettingsLicenseEnabled?canAddTask:hasAddTaskPermission,addTaskCheck},workorderSourceTypeNotPlanned:function(){var workorder=this.workorder,_ref22=workorder||{},sourceType=_ref22.sourceType;return!(0,validation/* isEmpty */.xb)(sourceType)&&5!==sourceType},canShowAddTaskButton:function(){var workorderSourceTypeNotPlanned=this.workorderSourceTypeNotPlanned,addTaskCheckBasedOnWorkOrderFeatureSetting=this.addTaskCheckBasedOnWorkOrderFeatureSetting;
// can add the workorder planning setting check here (and) and move if to :disabled check
return workorderSourceTypeNotPlanned&&addTaskCheckBasedOnWorkOrderFeatureSetting},addTaskButtonMessage:function(){var showAddNewTask=this.showAddNewTask;if(showAddNewTask)return"Add Task";
// -- can be removed later --
var isWorkOrderFeatureSettingsLicenseEnabled=this.isWorkOrderFeatureSettingsLicenseEnabled;if(!isWorkOrderFeatureSettingsLicenseEnabled)return"You cannot add new Task!";
// -- can be removed later --
var workOrderSettings=this.workOrderSettings,_ref23=workOrderSettings||{},manageTask=_ref23.manageTask,_ref24=manageTask||{},reason=_ref24.reason;return(0,validation/* isEmpty */.xb)(reason)?"":reason},showAddNewTask:function(){var workorder=this.workorder,canEdit=this.canEdit,taskList=this.taskList,resolvedStatusId=this.resolvedStatusId,isUserAddingTask=this.isUserAddingTask,addTaskCheckBasedOnWorkOrderFeatureSetting=this.addTaskCheckBasedOnWorkOrderFeatureSetting,_ref25=workorder||{},sourceType=_ref25.sourceType,moduleState=_ref25.moduleState,_ref26=moduleState||{},id=_ref26.id;
// can add the workorder planning setting check here (and) and move if to :disabled check
return!(0,validation/* isEmpty */.xb)(sourceType)&&!(0,validation/* isEmpty */.xb)(taskList)&&5!==sourceType&&canEdit&&id!==resolvedStatusId&&!isUserAddingTask&&addTaskCheckBasedOnWorkOrderFeatureSetting}}),methods:{resizeWidget:function(){},markdownhelplist:function(){this.markdownshow=!0},convertTimeAsIfFromDatePicker:function(dateInMillis){var currentBrowserTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone;return moment_timezone_default().tz(this.$helpers.getOrgMoment(dateInMillis).format("YYYY-MM-DD HH:mm:ss"),currentBrowserTimeZone)},getDescription:function(record){var description=record.description;return(0,validation/* isEmpty */.xb)(description)?"---":(0,sanitize/* sanitize */.N)(description)},onTransitionSuccess:function(){this.workorder.loadTimer=!1,this.refreshWoDetails(),this.reloadRelatedRecords(),this.onStateFlowFormSaved(),this.loadTasks(),this.reloadInventorySummary()},reloadRelatedRecords:function(){eventBus/* eventBus */.Y.$emit("refresh-related-list")},reloadInventorySummary:function(){eventBus/* eventBus */.Y.$emit("refresh-inventory-summary")},deleteNote:function(note){var _this4=this,obj={noteId:note.id,module:"ticketnotes",parentModuleName:"workorder"};this.$dialog.confirm({title:this.$t("common.header.delete_note"),message:this.$t("common.header.are_you_sure_you_want_to_delete_this_note_form_workorder"),rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&_this4.$http.post("/v2/notes/delete",obj).then((function(_ref27){var _ref27$data=_ref27.data,message=_ref27$data.message,responseCode=_ref27$data.responseCode;_ref27$data.result;if(0!==responseCode)throw new Error(message);_this4.$message.success(_this4.$t("common.products.note_deleted_successfully"));var doNote=_this4.comments.find((function(r){return r.id===note.id}));doNote&&_this4.comments.splice(_this4.comments.indexOf(doNote),1)}))}))},handlePhotoUpload:function(attachment){this.selectedTask.attachment||(this.selectedTask.attachment={}),this.selectedTask.attachment.module=attachment.module,this.selectedTask.attachment.recordId=attachment.recordId,1===attachment.attachmentType?(this.selectedTask.attachment.beforeFile=attachment.file,this.selectedTask.attachment.beforeFileName=attachment.fileName):(this.selectedTask.attachment.afterFile=attachment.file,this.selectedTask.attachment.afterFileName=attachment.fileName)},openParentWo:function(parentWo){var _ref28=parentWo||{},id=_ref28.id;if(id)if((0,router/* isWebTabsEnabled */.tj)()){var currentView=this.currentView,_ref29=(0,router/* findRouteForModule */.Jp)("workorder",router/* pageTypes */.As.OVERVIEW)||{},name=_ref29.name;name&&this.$router.push({name:name,params:{viewname:currentView,id:id}})}else this.$router.push({path:"/app/wo/orders/summary/"+id})},openPrintOptionDialog:function(){this.openTaskOptions=!0,this.isDownloadOption=!1},openDownloadOptionDialog:function(){this.openTaskOptions=!0,this.isDownloadOption=!0},init:function(){var _this5=this,isWorkPermitLicenseEnabled=this.isWorkPermitLicenseEnabled;this.woWidget.relatedList.module=(this.moduleMeta||{}).module,isWorkPermitLicenseEnabled&&this.$http.get("module/meta?moduleName=workPermit").then((function(response){200===response.status&&(_this5.$setProperty(_this5,"permitWidget.relatedList.module",_this5.$getProperty(response,"data.meta.module",null)),_this5.showPermitListWidget=!0)})),this.loadSafetyPlanWidgets(),this.invokeRelatedListWidget=!0},loadSafetyPlanWidgets:function(){var _this6=this;this.$helpers.isLicenseEnabled("SAFETY_PLAN")&&this.$http.get("module/meta?moduleName=workorderHazard").then((function(response){200===response.status&&(_this6.$setProperty(_this6,"hazardWidget.relatedList.module",_this6.$getProperty(response,"data.meta.module",null)),_this6.$setProperty(_this6,"hazardWidget.relatedList.module.displayName","Hazards"),_this6.showHazardListWidget=!0)}))},updateReading:function(selectedTask){if(selectedTask.inputTime&&this.nextExecutionTime&&this.nextExecutionTime>0){var startTime=this.workorder.createdTime,endTime=this.nextExecutionTime;if(!(selectedTask.inputTime.valueOf()>=startTime&&selectedTask.inputTime.valueOf()<endTime)){var s=this.$helpers.getOrgMoment(startTime).format("D MMM, h:mm a"),e=this.$helpers.getOrgMoment(endTime).format("D MMM, h:mm a");return void this.$message.error(this.$t("maintenance._workorder.task_input_time_invalid",[s,e]))}}this.onReadingChange(selectedTask)},checkForHoursAndMins:function(task){var _this7=this;this.$nextTick((function(){if(_this7.$refs["fTaskMin"+task.id]&&_this7.$refs["fTaskMin"+task.id][0]&&document.activeElement===_this7.$refs["fTaskMin"+task.id][0].$el.querySelector(".el-input input.el-input__inner"));else{if(task&&(task.hours||task.minutes)){var seconds=moment_timezone_default().duration("".concat(task.hours?task.hours:"00",":").concat(task.minutes?task.minutes:"00",":00")).asSeconds();task.inputValue=seconds}_this7.onReadingChange(task)}}))},onUpload:function(_ref30){var file=_ref30.file,data=(_ref30.onSuccess,_ref30.onError,{parentId:this.openWorkorderId,module:"prerequisitephotos"}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.photos.push(result.photos[0]),this.getPrerequisiteStatus(),this.loadactivitie())},onPhotoDelete:function(file){this.deletePhoto(file)},focusCommentBoxtextarea:function(){this.$refs.commentBoxRef.focus(),this.commentFocus=!0},callOnReadingChangeWithoutValidation:function(currentTaskObj){(0,validation/* isEmpty */.xb)(currentTaskObj)||(this.onReadingChange(currentTaskObj,!1),this.resetReadingFieldUnitDialogBox())},beforeCloseDialogBox:function(done){this.resetReadingFieldUnitDialogBox(),done()},closeReadingFieldSuggestionDialogBox:function(){this.readingFieldSuggestionToggle=!1,this.readingFieldSuggestions=[],this.currentTaskObj=null},closeReadingFieldErrorDialogBox:function(){this.resetReadingFieldUnitDialogBox(),this.readingData=6,// meterReset state is now false .
this.consumptionData=""},resetReadingFieldUnitDialogBox:function(){this.readingFieldErrorToggle=!1,this.readingFieldError=null,this.readingFieldSuggestionToggle=!1,this.readingFieldSuggestions=[],this.currentTaskObj=null},deletePhoto:function(value){var _this8=this;value&&this.$http.post("v2/photos/delete?module=prerequisitephotos",{id:value.id,parentId:value.parentId,photoId:value.photoId}).then((function(response){if(response.data&&response.data.result&&response.data.result.Id){var pht=_this8.photos.find((function(r){return r.id===response.data.result.Id}));pht&&_this8.photos.splice(_this8.photos.indexOf(pht),1),_this8.getPrerequisiteStatus(),_this8.loadactivitie(),_this8.$message.success(_this8.$t("common._common.delete_success"))}else _this8.$message.error(_this8.$t("common._common.deletion_operation_failed"))}))},getPrerequisiteStatus:function(){var self=this;self.$http.get("v2/workorders/getPrerequisiteStatus?workOrderId="+self.openWorkorderId).then((function(response){self.workorder.preRequestStatus=response.data.result.preRequestStatus}))},openTenant:function(id){if(id)if((0,router/* isWebTabsEnabled */.tj)()){var _ref31=(0,router/* findRouteForModule */.Jp)("tenant",router/* pageTypes */.As.OVERVIEW)||{},name=_ref31.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else{var url="/app/tm/tenants/all/"+id+"/overview";this.$router.replace({path:url})}},updateWoActions:function(){this.loadactivitie()},refreshWoDetails:function(){var _this9=this;this.fetchWo(!0).then((function(){_this9.loadWorkOrderFeatureSettings()}))},onStateFlowFormSaved:function(){this.updateWoActions(),this.loadComments()},associate:function(selectedObj){this.visibility=!1,this.selectedTask.resource=selectedObj},preRequisiteApprove:function(){this.updateWorkOrder([this.openWorkorderId],{preRequisiteApproved:!0,preRequestStatus:3})},blurCommentBox:function(e){
//let itTargetPar = (e.path || []).filter(ele => ele.id === 'commentBoxPar')
var _ref32=e||{},srcElement=_ref32.srcElement,_ref33=srcElement||{},id=_ref33.id,isCommentBoxPar="commentBoxPar"===id;this.newComment.body&&""!==this.newComment.body.trim()||(0,validation/* isEmpty */.xb)(this.comments)||isCommentBoxPar||(this.commentFocus=!1)},loadReadingFieldUnits:function(){var _this10=this;this.$http.get("v2/getReadingFieldUnits").then((function(response){response.data&&0===response.data.responseCode&&(_this10.metricWithUnits=response.data.result.readingFieldUnits.MetricsWithUnits)}))},getReadingFieldUnits:function(readingFieldMetricId){if(!(0,validation/* isEmpty */.xb)(this.metricWithUnits)){var currentMetricId=Object.keys(this.metricWithUnits).find((function(metricUnitKey){return metricUnitKey==readingFieldMetricId})),readingFieldUnits=this.metricWithUnits[currentMetricId];return readingFieldUnits}},redirectToSpecialModule:function(field,data){if(!(0,validation/* isEmpty */.xb)(field)&&!(0,validation/* isEmpty */.xb)(data)){var fieldName=field.name,_field$lookupModule=field.lookupModule,lookupModule=void 0===_field$lookupModule?{}:_field$lookupModule;if(!(0,validation/* isEmpty */.xb)(lookupModule)){var name=lookupModule.name;if((0,router/* isWebTabsEnabled */.tj)()){var _ref34=(0,router/* findRouteForModule */.Jp)(name,router/* pageTypes */.As.OVERVIEW)||{},routeName=_ref34.name;if(routeName){var _ref35="vendors"===name?data[name]:data[fieldName],id=_ref35.id;this.$router.push({routeName:routeName,params:{viewname:"all",id:id}})}}else{var urlHash={vendors:{name:"vendorsummary",params:{viewname:"all",vendorid:data["vendors"].id}},custom:{name:"custommodules-summary",params:{viewName:"all",id:data[fieldName].id,moduleName:name}}},routerParams={};"vendors"===name?routerParams=urlHash["vendors"]:"CUSTOM"===lookupModule.typeEnum&&(routerParams=urlHash["custom"]),(0,validation/* isEmpty */.xb)(routerParams)||this.$router.push(routerParams)}}}},loadVendorsPicklist:function(){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"vendors"}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this11.$message.error(error.message||"Error Occured"):_this11.vendorsList=options;case 6:case"end":return _context.stop()}}),_callee)})))()},updateUrl:function(transition){if(!(0,validation/* isEmpty */.xb)(transition)){var stateObj=this.$store.getters.getTicketStatus(transition.toStateId,"workorder");return"CLOSED"===this.$getProperty(stateObj,"type")?"/v2/workorders/close":"/v2/workorders/update"}},transitionFilter:function(transition){var stateObj=this.$store.getters.getTicketStatus(transition.toStateId,"workorder"),isDisallowedState="CLOSED"===stateObj.type&&!hasWorkOrderClosePermission;return!isDisallowedState},handleTranslate:function(){this.woDescriptiontranslate=!this.woDescriptiontranslate,eventBus/* eventBus */.Y.$emit("woDescriptiontranslate",this.woDescriptiontranslate)},isTaskClosed:function(task){var type=this.$getProperty(task,"status.type","");return"OPEN"!==type},canDisableAttachment:function(task){var isLockedState=this.isLockedState,isPrerequisiteCompleted=this.isPrerequisiteCompleted,moduleMeta=this.moduleMeta,canExecuteTask=this.canExecuteTask,type=this.$getProperty(task,"status.type",""),hideGallery=this.$getProperty(moduleMeta,"moduleSetting.hideGallery",!1);return"OPEN"!==type||!isPrerequisiteCompleted||isLockedState||hideGallery||!canExecuteTask},getButtonName:function(task){return this.isTaskClosed(task)?this.$t("maintenance._workorder.reopen_task"):this.$t("maintenance._workorder.complete_task")},fieldOptions:function(task){var _ref36=task||{},readingField=_ref36.readingField,options=[];if(!(0,validation/* isEmpty */.xb)(readingField)){var _ref37=readingField||{},enumMap=_ref37.enumMap;options=Object.entries(enumMap||{}).map((function(_ref38){var _ref39=(0,slicedToArray/* default */.Z)(_ref38,2),key=_ref39[0],value=_ref39[1];return{id:key,value:value}}))}return options},isReadingEnum:function(task){var _ref40=task||{},readingField=_ref40.readingField;return readingField&&(0,field/* isEnumField */.Ri)(readingField)},canDisableField:function(field){var type=this.$getProperty(field,"status.type",""),isPrerequisiteCompleted=this.isPrerequisiteCompleted,canExecuteTask=this.canExecuteTask;return!canExecuteTask||!isPrerequisiteCompleted||"OPEN"!==type},loadWorkOrderFeatureSettings:function(){var _this12=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var isWorkOrderFeatureSettingsLicenseEnabled,workorder,route,_yield$API$get,data,error,workOrderSettingsRelatedData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(isWorkOrderFeatureSettingsLicenseEnabled=_this12.isWorkOrderFeatureSettingsLicenseEnabled,isWorkOrderFeatureSettingsLicenseEnabled){_context2.next=3;break}return _context2.abrupt("return");case 3:if((0,validation/* isEmpty */.xb)(_this12.workorder)){_context2.next=12;break}return workorder=_this12.workorder,route="v3/workorders/features/"+workorder.id,_context2.next=8,api/* API */.bl.get(route);case 8:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,(0,validation/* isEmpty */.xb)(data)?(0,validation/* isEmpty */.xb)(error)||_this12.$message.error(error.message||_this12.$t(common.workorder.error_occurred_while_fetching_work_order_feature_settings_message)):(workOrderSettingsRelatedData=_this12.workOrderSettingsRelatedData,workOrderSettingsRelatedData=(0,objectSpread2/* default */.Z)({},data),_this12.$set(_this12,"workOrderSettingsRelatedData",workOrderSettingsRelatedData));case 12:case"end":return _context2.stop()}}),_callee2)})))()}},watch:{workorder:function(){var title="[#"+this.workorder.serialNumber+"] "+this.workorder.subject;this.setTitle(title),this.workorder.priority&&(this.workorder.priority=this.getTicketPriority(this.workorder.priority.id)),this.workorder.data||(this.workorder.data={}),this.setDueDate(this.workorder.dueDate),this.updateTaskChartData()},openWorkorderId:function(){this.fetchWo(!0),this.loadWorkOrderFeatureSettings()},filteredComments:function(list){(0,validation/* isEmpty */.xb)(list)&&(this.commentFocus=!0)},moduleMeta:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.init()},isActive:function(_isActive){!_isActive&&this.canShowAllComments&&this.showAllComments()}},beforeDestroy:function(){this.$store.dispatch("workorder/removeCurrentWo")},filters:{getUser:function(id,users){var userObj=users.find((function(user){return user.id===id}));return userObj||{name:"System"}},options:function(jsonobj,type){var array=[];if("category"===type||"priority"===type)for(var jsonkey in jsonobj){var val=jsonobj[jsonkey];array.push({label:val,value:parseInt(jsonkey)})}else if("user"===type||"space"===type)for(var key in jsonobj)array.push({label:jsonobj[key].name,value:jsonobj[key].id});return array}}},v1_WorkorderSummaryvue_type_script_lang_js=WorkorderSummaryvue_type_script_lang_js,WorkorderSummary_component=(0,componentNormalizer/* default */.Z)(v1_WorkorderSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"785924c6",null)
/* harmony default export */,WorkorderSummary=WorkorderSummary_component.exports},
/***/528661:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ee101f37a965f2ea9553a1e4c1a221b.svg";
/***/},
/***/365565:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d022638208d4baab3e4d8fbec8ac38ca.svg";
/***/},
/***/773339:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ec28172b828295676202641adbd2566.svg";
/***/},
/***/935010:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/},
/***/250620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"03daa5e7a5fe4964f41cd5e0c6dbcdb3.svg";
/***/},
/***/684890:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"c5bbcb00b28261c206e2f2de4a9fe124.svg";
/***/},
/***/942577:
/***/function(module,__webpack_exports__,__webpack_require__){"use strict";
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_Avatar__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(574752)),vuex__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(420629);
/* harmony import */
/* module decorator */module=__webpack_require__.hmd(module),
/* harmony default export */__webpack_exports__.Z={props:["record","serviceportal"],data:function(){return{activities:[],loading:!0}},components:{Avatar:_Avatar__WEBPACK_IMPORTED_MODULE_5__["default"]},mounted:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()},watch:{record:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()}},computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_6__/* .mapGetters */.Se)(["getUser"])),methods:{getUserCall:function(names){return this.serviceportal&&this.$account.user.id===names?this.$account.user.name:this.getUser(names).name},getAssignedBy:function(updatedFields){var user=updatedFields.find((function(el){return"assignedTo"===el.fieldName}));return user.newValue?this.getUser(user.newValue.id).name:user.oldValue?this.getUser(user.oldValue.id).name:void 0},getMessage:function(activity){if(131072===activity.activityType)return{message:activity.message};if(2===activity.activityType){if(activity.info.updatedFields&&activity.info.updatedFields.length>0){if(activity.info.updatedFields.find((function(el){return"category"===el.fieldName}))&&"category"===activity.info.updatedFields.find((function(el){return"category"===el.fieldName})).fieldName)return{message:"updated category as",value:activity.info.updatedFields.find((function(el){return"category"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"priority"===el.fieldName}))&&"priority"===activity.info.updatedFields.find((function(el){return"priority"===el.fieldName})).fieldName)return{message:"updated priority as",value:activity.info.updatedFields.find((function(el){return"priority"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"actualWorkStart"===el.fieldName}))&&"actualWorkStart"===activity.info.updatedFields.find((function(el){return"actualWorkStart"===el.fieldName})).fieldName||activity.info.updatedFields.find((function(el){return"resumedWorkStart"===el.fieldName}))&&"resumedWorkStart"===activity.info.updatedFields.find((function(el){return"resumedWorkStart"===el.fieldName})).fieldName)return{message:"started work"};if(activity.info.updatedFields.find((function(el){return"actualWorkEnd"===el.fieldName}))&&"actualWorkEnd"===activity.info.updatedFields.find((function(el){return"actualWorkEnd"===el.fieldName})).fieldName)return{message:"resolved work"};if(activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName}))&&"dueDateString"===activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName})).fieldName)return{message:"updated Due Date as",value:activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"type"===el.fieldName}))&&"type"===activity.info.updatedFields.find((function(el){return"type"===el.fieldName})).fieldName)return{message:"updated Type as",value:activity.info.updatedFields.find((function(el){return"type"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"status"===el.fieldName}))&&"status"===activity.info.updatedFields.find((function(el){return"status"===el.fieldName})).fieldName)return{message:"pause the work"}}}else if(16384===activity.activityType){if(activity.info.updatedFields.length>0){if(activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName}))&&"remarks"===activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName})).fieldName)return{message:"updated task ("+activity.info.task.subject+") remarks as",value:activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName}))&&"inputValue"===activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName})).fieldName)return{message:"updated task ("+activity.info.task.subject+") input Value as",value:activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName})).newValue}}}else{if(128===activity.activityType)return activity.info.attachments?{message:"attached",value:this.getAttachmentsString(activity.info.attachments)}:{message:"attached",value:null};if(256===activity.activityType)return{message:"added the task",value:activity.info.task};if(72===(activity||{}).type){
// Approval Activity Message
var approvalMessage="",approvalStatus=this.$getProperty(activity,"info.status",""),moduleSingularDisplayName=this.$constants.moduleSingularDisplayNameMap[module]?this.$constants.moduleSingularDisplayNameMap[module]:module;return"Approved"===approvalStatus?approvalMessage="<b> Approved the ".concat(moduleSingularDisplayName,"</b>"):"Rejected"===approvalStatus?approvalMessage="<b> Rejected the ".concat(moduleSingularDisplayName,"</b>"):"Requested"===approvalStatus&&(approvalMessage="<b> resent for Approval.</b>"),{message:approvalMessage}}if(73===(activity||{}).type)return{message:"<b> initiated Approval process</b>"}}return{message:activity.message}},loadActivities:function(){var self=this;self.loading=!0,self.$http.get("/workorder/activities?workOrderId="+self.record.id).then((function(response){self.activities=response.data.filter((function(activity){return 16!==activity.activityType||activity.info.updatedFields&&activity.info.updatedFields.length>0&&activity.info.updatedFields.find((function(el){return"assignedTo"===el.fieldName}))})),self.loading=!1})).catch((function(){}))},loadServicePortalActivities:function(){var self=this;self.loading=!0,self.$http.get("/activities?workOrderRequestId="+self.record.id).then((function(response){self.activities=response.data,self.loading=!1}))},getAttachmentsString:function(obj){for(var str="",item=0;item<obj.length;item++)0!==item&&(item===obj.length-1?str+=" and ":str+=", "),str+=obj[item];return str}}}}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/62574.js.map