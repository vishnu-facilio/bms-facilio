(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[15450],{
/***/703117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlarmModel}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlarmModel.vue?vue&type=template&id=5b251d32
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{background:"#fff",width:"400px",height:"420px !important"}},[_vm._m(0),_c("div",{staticClass:"model-container",staticStyle:{background:"#fff"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.category,callback:function($$v){_vm.$set(_vm.alarmRequest,"category",$$v)},expression:"alarmRequest.category"}},_vm._l(_vm.ticketcategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:category.id}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Team/Staff")]),_c("div",{staticStyle:{border:"1px solid #d8dce5",display:"inline-block",position:"relative",width:"100%",height:"40px","line-height":"40px","padding-left":"10px","padding-right":"10px","border-radius":"3px"}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.alarmRequest)))]),_vm._m(1),_c("f-assignment",{attrs:{model:_vm.alarmRequest,viewtype:"form"}})],1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Priority")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.priority,callback:function($$v){_vm.$set(_vm.alarmRequest,"priority",$$v)},expression:"alarmRequest.priority"}},_vm._l(_vm.ticketpriority,(function(priority){return _c("el-option",{key:priority.priority,attrs:{label:priority.displayName,value:parseInt(priority.id)}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Site")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",clearable:"","collapse-tags":"",placeholder:"Sites"},model:{value:_vm.alarmRequest.siteId,callback:function($$v){_vm.$set(_vm.alarmRequest,"siteId",$$v)},expression:"alarmRequest.siteId"}},_vm._l(_vm.sites,(function(site,index){return _c("el-option",{key:index,attrs:{label:site.name,value:site.id}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{background:"#fff"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",on:{click:function($event){return _vm.createWO()}}},[_vm._v("CREATE")])],1)])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{padding:"20px 20px 10px 20px"},attrs:{label:"Create Workorder"}},[_c("div",{staticClass:"setup-modal-title"},[_vm._v("Create workorder")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",{staticStyle:{float:"right"}},[_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{position:"relative",top:"-4px",right:"3px",color:"#c0c4cc"}})])}],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),FAssignment=__webpack_require__(383274),TeamStaffMixin=__webpack_require__(462599),AlarmModelvue_type_script_lang_js={props:["id"],components:{FAssignment:FAssignment/* default */.Z},mixins:[TeamStaffMixin/* default */.Z],data:function(){return{alarmRequest:{category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},siteId:null,priority:null}}},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},sites:function(state){return state.sites},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority}})),methods:{createWO:function(event){this.$emit("submit",this.alarmRequest)},closeDialog:function(){this.reset(),this.$emit("closed")},reset:function(){this.alarmRequest={category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},priority:null}}}},components_AlarmModelvue_type_script_lang_js=AlarmModelvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmModelvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmModel=component.exports},
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/383274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAssignment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FAssignment.vue?vue&type=template&id=3fd62ade
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showRecommendedUsers&&"view"===_vm.viewtype?_c("el-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",attrs:{"popper-class":"fc-popover-p02 fc-assignment-popover-height",placement:"bottom",width:"320",trigger:"click"},on:{show:function($event){return _vm.loadrecommendedUsers()}}},[_c("div",{staticClass:"row popover-active-block",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"10px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel pointer"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",{staticClass:"fc-search-sticky"},["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"}},[_vm.recommendedUsersList.length&&"workorder"===_vm.moduleName?_c("div",[_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended_users"))+" ")]),_vm._l(_vm.recommendedUsersList,(function(recommendedUser,reusridx){return _c("div",{key:reusridx,on:{click:function($event){return _vm.assignViewWorkOrder(recommendedUser)}}},[_c("div",{staticClass:"group-item-label pointer"},[_vm._v(" "+_vm._s(recommendedUser.name)+" ( "+_vm._s(_vm.userVsTicketCountObj[recommendedUser.id])+" Tickets) ")])])}))],2):_vm._e(),"workorder"===_vm.moduleName&&_vm.recommendedUsersList.length?_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.others"))+" ")]):_vm._e(),_vm._l(_vm.userList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])}))],2):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px","padding-left":"10px"}},_vm._l(_vm.memberList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])})),0):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("div",{key:grpidx,on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticClass:"pL5",staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])]):_vm._e()})),0):_vm._e(),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("showFAssignmentPopover")],2)]):"form"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment"},[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignWorkOrder(group,grpidx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()],1):"view"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",on:{open:function($event){_vm.isPopverVisible=!0},close:function($event){_vm.isPopverVisible=!1}}},[_vm.isPopverVisible?[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()]:_vm._e()],2):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),quasar_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(641358)),vuex_esm=__webpack_require__(420629),FSearch=__webpack_require__(947748),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),FAssignmentvue_type_script_lang_js={props:{model:{},viewtype:{},record:{},form:{},siteId:{default:null},recordId:{},moduleName:{},showRecommendedUsers:{}},data:function(){return{showQuickSearch:!1,loading:!1,quickSearchQuery:null,assignmentValue:"assignmentGroup",selectedName:"",selectedGroup:"",selctedGroupMember:"",userVsTicketCountObj:{},memberList:[],typeVal:this.viewtype,workorder:null,actions:{assign:{loading:!1}},userList:[],recommendedUsersList:[],groupList:[],filtereduserList:[],filteredgroupList:[],filteredmemberList:[],isPopverVisible:!1}},components:{QPopover:quasar_esm/* QPopover */.oe,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QList:quasar_esm/* QList */.tu,FSearch:FSearch/* default */.Z},watch:{record:function(){this.loadWorkorders()},siteId:{handler:function(newVal,oldVal){var getCurrentSiteId=this.getCurrentSiteId,viewtype=this.viewtype;isEqual_default()(newVal,oldVal)||isEqual_default()(newVal,getCurrentSiteId)||isEqual_default()(viewtype,"view")||this.scopeTeamUser()},immediate:!0},isPopverVisible:function(){this.isPopverVisible&&"view"===this.viewtype&&(0,validation/* isEmpty */.xb)(this.userList)&&(0,validation/* isEmpty */.xb)(this.groupList)&&this.scopeTeamUser()},model:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var assignedTo=newVal.assignedTo,assignmentGroup=newVal.assignmentGroup,_ref=assignedTo||{},assignedToId=_ref.id,_ref2=assignmentGroup||{},assignmentGroupId=_ref2.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(this.selectedName=null),(0,validation/* isEmpty */.xb)(assignmentGroupId)&&(this.selectedGroup=null)}}}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusByLabel","getCurrentSiteId","getUser","getGroup"])),created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","workorder").then((function(){_this.loadWorkorders()}))},methods:{memberCount:function(group){var _ref3=group||{},members=_ref3.members;return(members||[]).length},loadrecommendedUsers:function(){var _this2=this;this.loading=!0,this.userVsTicketCountObj={},this.recommendedUsersList=[];var url="v2/recommended/workorder?woId=".concat(this.record.id);this.$http.get(url).then((function(response){0===response.data.responseCode&&response.data.result&&response.data.result.recommendedUsers&&response.data.result.recommendedUsers.forEach((function(element){_this2.recommendedUsersList.push(element.user),_this2.userVsTicketCountObj[element.user.id]=element.reason.no_of_tickets;for(var i=0;i<_this2.userList.length;i++)_this2.userList[i].id===element.user.id&&_this2.userList.splice(i,1)})),_this2.loading=!1})).catch((function(){
// TODO handle errors
}))},loadWorkorders:function(){var objKey="model";"view"===this.viewtype&&(objKey="record");var parent=this[objKey],_ref4=parent||{},assignedTo=_ref4.assignedTo,assignmentGroup=_ref4.assignmentGroup,_ref5=assignedTo||{},assignedToId=_ref5.id,assignedToName=_ref5.name,_ref6=assignmentGroup||{},assignmentGroupId=_ref6.id,assignmentGroupName=_ref6.name;(0,validation/* isEmpty */.xb)(assignedToName)?this.selectedName=(0,validation/* isEmpty */.xb)(assignedToId)?null:this.getUserNameFromList(assignedToId):this.selectedName=assignedToName,(0,validation/* isEmpty */.xb)(assignmentGroupName)?this.assignmentGroupName=(0,validation/* isEmpty */.xb)(assignmentGroupId)?null:this.getGroupNameFromList(assignmentGroupId):this.selectedGroup=assignmentGroupName},assignment:function(value){this.assignmentValue=value},assignWorkOrder:function(assignedObj,index,value){var isValueChanged=!1,model=this.model,$refs=this.$refs,_ref7=model||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup,_ref8=assignedObj||{},id=_ref8.id,name=_ref8.name;if("assignmentGroup"===value){var _ref9=assignmentGroup||{},assignmentGroupId=_ref9.id;(0,validation/* isEmpty */.xb)(name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(id)?null:this.getGroupNameFromList(id):this.selectedGroup=name,(0,validation/* isEmpty */.xb)(assignmentGroup)||(isValueChanged=assignmentGroupId!==id,this.$set(this.model.assignmentGroup,"id",id),this.$set(this.model.assignmentGroup,"name",name)),this.$emit("input",id),this.$emit("value",model),this.groupmemberList(index),isValueChanged&&this.$emit("onChange")}if("assignedTo"===value||"assignedToGroupMember"===value){
// get the assignedTo user and update using 'updateAssignedTo' emit.
var _ref10=assignedTo||{},assignedToId=_ref10.id;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,(0,validation/* isEmpty */.xb)(assignedTo)||(isValueChanged=assignedToId!==id,this.$set(this.model.assignedTo,"id",id),this.$set(this.model.assignedTo,"name",name)),this.$emit("input",id),this.$emit("value",model),$refs["assignedtopopover"]&&$refs["assignedtopopover"].close(),isValueChanged&&this.$emit("onChange",assignedObj)}},groupmemberList:function(groupIndex){this.assignmentValue="assignedToGroupMember",this.memberList=this.groupList[groupIndex].members,this.selectedName=null},assignViewWorkOrder:function(assignedTo,assignmentGroup,index){var _this3=this,$refs=this.$refs,record=this.record,assignObj={},moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref11=moduleState||{},statusId=_ref11.id,_ref12=record||{},recordId=_ref12.id;if(assignObj.id=[recordId],assignedTo){assignObj.assignedTo=assignedTo;var _ref13=assignedTo||{},id=_ref13.id,name=_ref13.name;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,$refs["assignedtopopover"]&&$refs["assignedtopopover"].close()}if(assignmentGroup){assignObj.assignmentGroup=assignmentGroup;var _ref14=assignmentGroup||{},_id=_ref14.id,_name=_ref14.name;(0,validation/* isEmpty */.xb)(_name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(_id)?null:this.getGroupNameFromList(_id):this.selectedGroup=_name,this.groupmemberList(index)}assignObj.status={id:statusId,status:"Assigned"},this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this3.$emit("assignactivity",assignObj),_this3.$dialog.notify(_this3.$t("common.products.workorder_assigned_successfully"))}))},scopeTeamUser:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,siteId,_yield$API$post,data,error,_ref15,groups,users;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={},siteId=_this4.siteId,siteId&&(params.siteId=siteId),_context.next=5,api/* API */.bl.post("v3/group/scopeBySite",params);case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref15=data||{},groups=_ref15.groups,users=_ref15.users,_this4.userList=users||[],_this4.groupList=groups||[]);case 9:case"end":return _context.stop()}}),_callee)})))()},removeTeamWO:function(assignValue){var _assignObj,_this5=this,record=this.record,_ref16=record||{},recordId=_ref16.id,moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref17=moduleState||{},statusId=_ref17.id,assignObj=(_assignObj={id:[recordId]},(0,defineProperty/* default */.Z)(_assignObj,assignValue,{id:-1}),(0,defineProperty/* default */.Z)(_assignObj,"status",{id:statusId,status:"Assigned"}),_assignObj);this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this5.$emit("assignactivity",assignObj),_this5.$dialog.notify(_this5.$t("common.products.workorder_assigned_successfully"))}))},reassign:function(assignValue){var model=this.model,_ref18=model||{},assignmentGroup=_ref18.assignmentGroup,assignedTo=_ref18.assignedTo;"assignmentGroup"===assignValue&&(this.selectedGroup=null,(0,validation/* isEmpty */.xb)(assignmentGroup)||(this.$set(this.model.assignmentGroup,"id",null),this.$set(this.model.assignmentGroup,"name",null))),"assignedTo"===assignValue&&(this.selectedName=null,(0,validation/* isEmpty */.xb)(assignedTo)||(this.$set(this.model.assignedTo,"id",null),this.$set(this.model.assignedTo,"name",null)))},reassignWO:function(assignValue){"assignmentGroup"===assignValue&&(this.selectedGroup=null),"assignedTo"===assignValue&&(this.selectedName=null),this.removeTeamWO(assignValue)},getUserNameFromList:function(id){var userList=this.userList;if((0,validation/* isEmpty */.xb)(userList))return this.getUser(id).name;var user=userList.find((function(user){return user.id===id}));return(0,validation/* isEmpty */.xb)(user)?void 0:this.$getProperty(user,"name",null)},getGroupNameFromList:function(id){var _this6=this,groupList=this.groupList;if((0,validation/* isEmpty */.xb)(groupList))this.$store.dispatch("loadGroups").then((function(){return(_this6.getGroup(id)||{}).name}));else{var group=groupList.find((function(group){return group.id===id}));if(!(0,validation/* isEmpty */.xb)(group))return this.$getProperty(group,"name",null)}}}},components_FAssignmentvue_type_script_lang_js=FAssignmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAssignmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAssignment=component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/114857:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Timer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Timer.vue?vue&type=template&id=79408276
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-timer"},[_c("div",{staticClass:"inline_flex"},[_vm.days>0?_c("div",{staticClass:"t-days"},[_vm.days<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.days)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.days))]),_vm.days<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.day"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.days"))+" ")])]):_vm._e(),_vm.days>0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_c("div",{staticClass:"t-hours"},[_vm.hours<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.hours)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.hours))]),_vm.hours<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hour"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hours"))+" ")])]),_c("div",{staticClass:"t-separate"},[_vm._v(":")]),_c("div",{staticClass:"t-mins"},[_vm.mins<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.mins)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.mins))]),_vm.mins<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.min"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.mins"))+" ")])]),_vm.days<=0?_c("div",{staticClass:"t-separate"},[_vm._v(":")]):_vm._e(),_vm.days<=0?_c("div",{staticClass:"t-secs"},[_vm.secs<9&&_vm.twoDigits?_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(" 0"+_vm._s(_vm.secs)+" ")]):_c("div",{staticClass:"t-label",style:_vm.bgColor},[_vm._v(_vm._s(_vm.secs))]),_vm.secs<2?_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.sec"))+" ")]):_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.secs"))+" ")])]):_vm._e()])])},staticRenderFns=[],Timervue_type_script_lang_js={props:["time","color","twoDigits","staticTime","static","duration"],data:function(){return{days:"",hours:"",mins:"",secs:"",bgColor:"color: "+this.color+";",intervalObj:null}},watch:{time:function(){this.initCounter()},staticTime:{handler:function(newValue,oldValue){newValue!==oldValue&&this.staticTime&&this.initCounter()}}},mounted:function(){this.initCounter()},methods:{initCounter:function(){var date,dateObj=new Date(this.time),currentTime=Date.now();if(this.staticTime){this.days="",this.hours="",this.mins="",this.secs="",this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null),date=dateObj/1e3,date<0&&date>-2&&(date=0);var d=Math.floor(date/86400),h=Math.floor(date%86400/3600),m=Math.floor(date%3600/60),s=Math.floor(date%3600%60);this.days=d>=0?d:0,this.hours=h>=0?h:0,this.mins=m>=0?m:0,this.secs=s>=0?s:0}else if(this.static){this.days="",this.hours="",this.mins="",this.secs="",date=this.duration,date<0&&date>-2&&(date=0);var _d=Math.floor(date/86400),_h=Math.floor(date%86400/3600),_m=Math.floor(date%3600/60),_s=Math.floor(date%3600%60);this.days=_d>=0?_d:0,this.hours=_h>=0?_h:0,this.mins=_m>=0?_m:0,this.secs=_s>=0?_s:0}else{date=(currentTime-dateObj)/1e3,date<0&&date>-2&&(date=0);var _d2=Math.floor(date/86400),_h2=Math.floor(date%86400/3600),_m2=Math.floor(date%3600/60),_s2=Math.floor(date%3600%60);this.days=_d2>=0?_d2:0,this.hours=_h2>=0?_h2:0,this.mins=_m2>=0?_m2:0,this.secs=_s2>=0?_s2:0,this.startCounter()}},startCounter:function(){this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null);var self=this;this.intervalObj=setInterval((function(){self.secs++,self.secs>=60&&(self.secs=0,self.mins++),self.mins>=60&&(self.mins=0,self.hours++),self.hours>=24&&(self.hours=0,self.days++)}),1e3)}}},components_Timervue_type_script_lang_js=Timervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Timervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Timer=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/349318:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Comments}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var render,staticRenderFns,objectSpread2=__webpack_require__(595082),esm_typeof=__webpack_require__(103336),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(843097),__webpack_require__(420629)),api=__webpack_require__(32284),Commentsvue_type_script_lang_js={props:["module","record","notify","parentModule","isServicePortal","setNoOfNotesLength"],created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.availablePortalApps();case 2:_this.canShowSharing&&(_this.newComment.commentSharing=_this.defaultSharingApps),_this.loadComments();case 4:case"end":return _context.stop()}}),_callee)})))()},data:function(){return{isAddingNotes:!1,loading:!0,selectedPortal:[],portalApps:[],defaultSharingApps:[],comments:[],newComment:{parentModuleLinkName:this.module,parentId:this.record.id,body:null,notifyRequester:!1,commentSharing:[]},commentFocus:!1}},watch:{record:function(recordObj){this.loadComments()},comments:function(newVal){this.record&&"object"===(0,esm_typeof/* default */.Z)(this.record)&&this.setNoOfNotesLength&&
//this.record.noOfNotes = this.comments.length
this.setNoOfNotesLength(this.comments.length)}},computed:(0,objectSpread2/* default */.Z)({showNotifyRequester:function(){return"undefined"===typeof this.notify||this.notify}},(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),methods:{availablePortalApps:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,error,data,licensedPortalApps,commentSharingPreferences;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/v3/commentPreferences/sharingOptions");case 2:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this2.$message.error(error.message||_this2.$t("common._common.error_occured")):(licensedPortalApps=data.licensedPortalApps,commentSharingPreferences=data.commentSharingPreferences,_this2.portalApps=licensedPortalApps,_this2.defaultSharingApps=commentSharingPreferences);case 6:case"end":return _context2.stop()}}),_callee2)})))()},loadComments:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this3.record&&"object"===(0,esm_typeof/* default */.Z)(_this3.record)){_context3.next=2;break}return _context3.abrupt("return");case 2:return _this3.loading=!0,_this3.newComment.parentId=_this3.record.id,url="/note/get?module=",_this3.isServicePortal&&(url="/notelist?module="),_context3.abrupt("return",_this3.$http.get(url+_this3.module+"&parentId="+_this3.record.id+"&parentModuleName="+_this3.parentModule).then((function(response){_this3.loading=!1,_this3.comments=response.data})).catch((function(error){_this3.loading=!1,_this3.comments=[]})));case 7:case"end":return _context3.stop()}}),_callee3)})))()},reset:function(){this.newComment={parentModuleLinkName:this.module,parentId:this.record.id,body:null,notifyRequester:!1},this.canShowSharing&&(this.newComment.commentSharing=this.defaultSharingApps)},addComment:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var param,url,record,parentModule,module,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!_this4.newComment.body){_context4.next=13;break}return _this4.isServicePortal&&(_this4.newComment.notifyRequester=!0),param={note:_this4.newComment,module:_this4.module,parentModuleName:_this4.parentModule},"basealarmnotes"===_this4.module&&(param.alarmOccurrenceId=_this4.record.occurrence?_this4.record.occurrence.id:-1),_this4.isAddingNotes=!0,url="v2/notes/add",_this4.$helpers.isLicenseEnabled("THROW_403_WEBTAB")&&(record=_this4.record,parentModule=_this4.parentModule,module=_this4.module,url="v2/notes/".concat(module,"/").concat(parentModule,"/add/").concat(record.id)),_context4.next=9,api/* API */.bl.post(url,param);case 9:_yield$API$post=_context4.sent,data=_yield$API$post.data,error=_yield$API$post.error,error?_this4.$message.error(error.message||"Error Occured"):(_this4.reset(),_this4.comments.push(data.Notes),_this4.closeComment(),_this4.isAddingNotes=!1);case 13:case"end":return _context4.stop()}}),_callee4)})))()}}},base_Commentsvue_type_script_lang_js=Commentsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_Commentsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Comments=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/typeof.js
},
/***/147105:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return relatedlist_Comments}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/Comments.vue?vue&type=template&id=9c5de910
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-comments"},[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",{staticClass:"comment-msg-container"},_vm._l(_vm.comments,(function(comment){return _c("div",{key:comment.id,staticClass:"fc-comment-row"},[_c("div",{staticClass:"flLeft f12 secondary-color comment-by"},[_c("user-avatar",{staticClass:"comments-avatar",attrs:{size:"md",user:comment.createdBy,id:comment.createdBy.id}}),_c("div",{staticClass:"pL45 comment-time"},[_c("i",{staticClass:"fa fa-circle",staticStyle:{opacity:"0.4px",color:"rgba(140,161,173,0.30)","font-size":"8px","padding-right":"5px"},attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm._f("fromNow")(comment.createdTime))+" ")])],1),null!=comment.bodyHTML?_c("div",{staticClass:"markdown-style",domProps:{innerHTML:_vm._s(comment.bodyHTML)}}):_vm._e(),_c("div",{staticClass:"clearboth"})])})),0),_c("div",{staticClass:"row new-comment-area width100 mT20",attrs:{id:"commentBoxPar"}},[_c("form",{staticClass:"col-12",on:{submit:function($event){return $event.preventDefault(),_vm.addComment.apply(null,arguments)}}},[_c("div",{staticClass:"markdown-inside"},[_c("textarea",{directives:[{name:"model",rawName:"v-model",value:_vm.newComment.body,expression:"newComment.body"}],ref:"commentBoxRef",staticClass:"comment-box pT10",class:{height75:_vm.commentFocus,height35:!_vm.commentFocus},staticStyle:{"font-size":"13px","letter-spacing":"0.3px",color:"#333333","border-color":"#d0d9e2 !important","border-radius":"3px",width:"100%",height:"40px"},attrs:{placeholder:_vm.placeholder?_vm.placeholder:_vm.$t("common._common.write_comment")},domProps:{value:_vm.newComment.body},on:{focus:_vm.focusCommentBox,input:function($event){$event.target.composing||_vm.$set(_vm.newComment,"body",$event.target.value)}}}),_vm._v(" "),_c("button",{class:[_vm.commentFocus?"show":"hide"],on:{click:_vm.markdownhelplist}},[_c("img",{staticClass:"pull-right pointer",attrs:{src:__webpack_require__(773339)}})])]),this.markdownshow?[_c("markdown-help-list",{attrs:{markdownshow:_vm.markdownshow},on:{"update:markdownshow":function($event){_vm.markdownshow=$event}}})]:_vm._e(),_vm.commentFocus?_c("div",[_c("div",{staticClass:"flRight"},[_c("button",{staticClass:"comment-btn"},[_vm._v(" "+_vm._s(_vm.btnLabel?_vm.btnLabel:_vm.$t("common._common.comment"))+" ")])]),!_vm.isServicePortal&&_vm.showNotifyRequester?_c("div",{staticClass:"flLeft"},[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.newComment.notifyRequester,expression:"newComment.notifyRequester"}],staticClass:"notify-requester-checkbox",attrs:{type:"checkbox",name:"notifyRequester"},domProps:{checked:Array.isArray(_vm.newComment.notifyRequester)?_vm._i(_vm.newComment.notifyRequester,null)>-1:_vm.newComment.notifyRequester},on:{change:function($event){var $$a=_vm.newComment.notifyRequester,$$el=$event.target,$$c=!!$$el.checked;if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);$$el.checked?$$i<0&&_vm.$set(_vm.newComment,"notifyRequester",$$a.concat([$$v])):$$i>-1&&_vm.$set(_vm.newComment,"notifyRequester",$$a.slice(0,$$i).concat($$a.slice($$i+1)))}else _vm.$set(_vm.newComment,"notifyRequester",$$c)}}}),_c("label",{staticClass:"notify-req",attrs:{for:"notifyRequester"}},[_vm._v(_vm._s(_vm.$t("common._common.notify")))])]):_vm._e(),_c("div",{staticClass:"clearboth"})]):_vm._e()],2)])])},staticRenderFns=[],User=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(228436),__webpack_require__(426803)),Comments=__webpack_require__(349318),MarkdownHelpList=__webpack_require__(566302),Commentsvue_type_script_lang_js={extends:Comments/* default */.Z,props:["placeholder","btnLabel"],components:{UserAvatar:User/* default */.Z,MarkdownHelpList:MarkdownHelpList/* default */.Z},data:function(){return{markdownshow:!1}},created:function(){window.addEventListener("click",this.blurCommentBox)},methods:{markdownhelplist:function(){this.markdownshow=!0},focusCommentBox:function(){this.$refs.commentBoxRef.focus(),this.commentFocus=!0},blurCommentBox:function(e){var itTargetPar=e.path.filter((function(ele){if("commentBoxPar"===ele.id)return!0}));this.newComment.body&&""!==this.newComment.body.trim()||itTargetPar.length||(this.commentFocus=!1)}}},relatedlist_Commentsvue_type_script_lang_js=Commentsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_Commentsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,relatedlist_Comments=component.exports},
/***/566302:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return MarkdownHelpList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/MarkdownHelpList.vue?vue&type=template&id=55b1eae8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.markdownshow,"before-close":_vm.cancelForm,title:_vm.$t("common.markdown.title"),"custom-class":"markdow-dialog markdown-pop"},on:{"update:visible":function($event){_vm.markdownshow=$event}}},[_c("div",{staticClass:"markdown-style"},[_c("table",[_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$t("common.markdown.element")))]),_c("th",[_vm._v(_vm._s(_vm.$t("common.markdown.output")))]),_c("th",[_vm._v(_vm._s(_vm.$t("common.markdown.syntax")))]),_c("th",[_vm._v(_vm._s(_vm.$t("common.markdown.null")))])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.bold")))])]),_c("td",[_c("p",[_c("strong",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("**")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))),_c("span",{staticClass:"symbol"},[_vm._v("**")])])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.bold)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.h1")))])]),_c("td",[_c("h1",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("# ")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))+" ")])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.h1)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.h2")))])]),_c("td",[_c("h2",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("## ")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))+" ")])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.h2)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.italics")))])]),_c("td",[_c("em",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("*")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))),_c("span",{staticClass:"symbol"},[_vm._v("*")])])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.italics)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.strike")))])]),_c("td",[_c("del",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v(_vm._s(_vm.$t("common.markdown.strikesyntax")))]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))),_c("span",{staticClass:"symbol"},[_vm._v(_vm._s(_vm.$t("common.markdown.strikesyntax")))])])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.strike)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.underline")))])]),_c("td",[_c("ins",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("++")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))),_c("span",{staticClass:"symbol"},[_vm._v("++")])])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.underline)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.list")))])]),_c("td",[_c("li",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("- ")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))+" ")])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.list)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.blockquote")))])]),_c("td",[_c("blockquote",{staticClass:"list-blockquote",staticStyle:{display:"block","margin-top":"1px","margin-bottom":"1px","font-size":"13px",padding:"0px 0px"}},[_vm._v(" "+_vm._s(_vm.$t("common.markdown.hithere"))+" ")])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("> ")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))+" ")])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.blockquote)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.hyperlink")))])]),_c("td",[_c("a",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("[")]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))),_c("span",{staticClass:"symbol"},[_vm._v("]")]),_vm._v(" "),_c("span",{staticClass:"symbol"},[_vm._v("(")]),_vm._v(_vm._s(_vm.$t("common.markdown.url"))),_c("span",{staticClass:"symbol"},[_vm._v(")")])])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.hyperlink)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.highlight")))])]),_c("td",[_c("code",[_vm._v(_vm._s(_vm.$t("common.markdown.hithere")))])]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v(_vm._s(_vm.$t("common.markdown.highlightsyntax")))]),_vm._v(_vm._s(_vm.$t("common.markdown.hithere"))),_c("span",{staticClass:"symbol"},[_vm._v(_vm._s(_vm.$t("common.markdown.highlightsyntax")))])])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.highlight)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])]),_c("tr",[_c("td",[_c("span",{staticClass:"element-list"},[_vm._v(_vm._s(_vm.$t("common.markdown.hr")))])]),_c("td",[_c("hr")]),_c("td",[_c("span",{staticClass:"syntax-text"},[_c("span",{staticClass:"symbol"},[_vm._v("---")])])]),_c("td",[_c("div",{staticClass:"syntax-copy"},[_c("button",{on:{click:function($event){return _vm.copyLinkName(_vm.hr)}}},[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"25px",width:"23px"},attrs:{src:__webpack_require__(262079)}})])])])])])])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),MarkdownHelpListvue_type_script_lang_js={props:["markdownshow"],data:function(){return{bold:"**Hi There**",h1:"# Hi There",h2:"## Hi There",italics:"*Hi There*",strike:"~~Hi There~~",underline:"++Hi There++",list:"- Hi There",blockquote:"> Hi There",hyperlink:"[Hi There](URL)",highlight:"`Hi There`",hr:"---"}},methods:{cancelForm:function(){this.$emit("update:markdownshow",!1)},copyLinkName:function(copy){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,navigator.clipboard.writeText(copy);case 2:_this.$message({message:"Copied to clipboard!",type:"success"});case 3:case"end":return _context.stop()}}),_callee)})))()}}},relatedlist_MarkdownHelpListvue_type_script_lang_js=MarkdownHelpListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_MarkdownHelpListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MarkdownHelpList=component.exports},
/***/76384:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AlarmSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/v1/AlarmSummary.vue?vue&type=template&id=70b59df8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.alarm?_c("div",[_c("div",{staticClass:"alarm-summary-header"},[_c("div",{staticClass:"fL"},[_c("div",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.alarm.serialNumber))]),_c("div",{staticClass:"fc-black3-24 max-width650px textoverflow-height-ellipsis"},[_vm._v(" "+_vm._s(_vm.alarm.subject?_vm.alarm.subject:"---")+" ")]),_c("div",[_vm.alarm.severity?_c("div",{staticClass:"flex-middle mT10"},[_c("div",{staticClass:"uppercase secondary-color summaryseverityTag f11",style:{"background-color":_vm.getAlarmSeverity(_vm.alarm.severity.id).color}},[_vm._v(" "+_vm._s(_vm.alarm.severity.id?_vm.getAlarmSeverity(_vm.alarm.severity.id).displayName:"---")+" ")]),_c("div",{staticClass:"fc-blue-label mL10 f11 letter-spacing: 0.7px;",staticStyle:{"margin-top":"-4px"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(_vm.alarm.modifiedTime))+" ")])]):_vm._e()])]),_c("div",{staticClass:"fR"},[_c("div",{staticClass:"triangle-close"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"close-summary-icon material-icons pull-right pointer",attrs:{"data-theme":"light","data-arrow":"true"},on:{click:_vm.closeSummary}},[_vm._v("close")])]),_c("div",{staticClass:"display-flex"},[!_vm.alarm.isAcknowledged&&_vm.isActiveAlarm(_vm.alarm)&&_vm.$hasPermission("alarm:ACKNOWLEDGE_ALARM")?_c("el-button",{staticClass:"fc-btn-green-lg-fill",on:{click:function($event){return _vm.acknowledgeAlarm({alarm:_vm.alarm,isAcknowledged:!0,acknowledgedBy:_vm.$account.user})}}},[_vm._v("Acknowledge")]):_vm.isActiveAlarm(_vm.alarm)?_c("div",{staticClass:"q-item-label mR10 status-btn2"},[_c("span",{staticClass:"pB10 fc-summary-ack ellipsis"},[_vm._v("Acknowledged by "+_vm._s(_vm.alarm.acknowledgedBy?_vm.$store.getters.getUser(_vm.alarm.acknowledgedBy.id).name:"Unknown"))]),_c("div",{staticClass:"text-right"},[_vm._v(" "),_c("span",{staticClass:"fc-summary-timeago text-right"},[_vm._v(_vm._s(_vm._f("fromNow")(_vm.alarm.acknowledgedTime>0?_vm.alarm.acknowledgedTime:new Date)))])])]):_c("div",{staticClass:"q-item-label fc-summary-ack status-btn1 pR10 pointer"},[_vm._v(" Unacknowledged ")]),_vm.isActiveAlarm(_vm.alarm)&&_vm.$hasPermission("alarm:CLEAR_ALARM")?_c("el-button",{staticClass:"fc-btn-green-lg-border",on:{click:function($event){_vm.updateAlarmStatus({alarm:_vm.alarm,severity:_vm.severityStatus.find((function(status){return"Clear"===status.severity}))})}}},[_vm._v("CLEAR")]):_vm._e(),_vm.isActiveAlarm(_vm.alarm)?_c("q-icon",{staticClass:"fc-btn-ico-lg mL10",attrs:{slot:"right",name:"more_vert"},slot:"right"},[_c("q-popover",{ref:"moreactionspopover"},[_c("q-list",{staticClass:"no-border",attrs:{link:""}},[_c("q-item",[_c("q-item-main",{attrs:{label:"Delete"},on:{click:function($event){return _vm.deleteAlarmById()}}})],1),_c("q-item",[_c("q-item-main",{attrs:{label:"Export CSV"},on:{click:function($event){_vm.exportSummary(1),_vm.$refs.moreactionspopover.close()}}})],1),_c("q-item",[_c("q-item-main",{attrs:{label:"Export Excel"},on:{click:function($event){_vm.exportSummary(2),_vm.$refs.moreactionspopover.close()}}})],1),_vm.alarm.woId>0?_c("q-item",[_c("q-item-main",{attrs:{label:"View Workorder"},on:{click:function($event){_vm.openWorkorder(_vm.alarm.woId),_vm.$refs.moreactionspopover.close()}}})],1):_vm.$hasPermission("alarm:CREATE_WO")?_c("q-item",[_c("q-item-main",{attrs:{label:"Create Workorder"},on:{click:function($event){_vm.createWoDialog([_vm.alarm.id]),_vm.$refs.moreactionspopover.close()}}})],1):_vm._e()],1)],1)],1):_vm._e()],1)])])]):_c("div"),_c("div",{staticClass:"alarm-summary-body clearboth"},[_c("div",{staticClass:"alarm-summary-body-left"},[_c("div",{staticClass:"alaram-summary-body-scroll"},[_c("div",{staticClass:"alarm-summary-inner"},[_vm.alarm.ruleId||_vm.alarm.readingVal?_vm._e():_c("div",{staticClass:"fc-white-bg-container mB10"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" Source ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(_vm.alarm.source?_vm.alarm.source:"---")+" ")])]),_vm.alarm.sourceTypeEnum&&"THRESHOLD_ALARM"===_vm.alarm.sourceTypeEnum?_c("div",{staticClass:"alarm-summary-box-block"},[_vm.alarm.readingMessage&&!_vm.alarm.problem?_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box mR10"},[_vm.alarm&&_vm.alarm.problem?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" PROBLEM ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(_vm.alarm.problem)+" ")])]):_vm.alarm&&_vm.alarm.readingMessage&&!_vm.alarm.problem?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" Message ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(_vm.loadmsg())+" ")])]):_vm._e()]):_vm._e(),_vm.alarm.readingVal&&_vm.readingField.displayName?_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box",style:_vm.alarm.readingMessage?"width:100%":""},[_c("el-row",[_vm.alarm.readingVal&&_vm.readingField.displayName?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" Threshold Metric ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(_vm.alarm.readingFieldId?_vm.readingField?_vm.readingField.displayName:_vm.loadFieldDetails():"---")+" ")])]):_c("el-col",{attrs:{span:12}}),_vm.alarm.readingVal&&_vm.readingField.unit?_c("el-col",{staticClass:"pL20",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" RECORDED VALUE ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(Number(_vm.alarm.readingVal).toFixed(2))+" "+_vm._s(_vm.loadReadingField())+" ")])]):_vm._e()],1)],1):_vm._e()]):_vm._e(),_c("div",{staticClass:"alarm-summary-box-block mT10"},[_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" Condition ")]),_vm.alarm.condition?_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(_vm.alarm.condition?_vm.alarm.condition:"---")+" ")]):_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v("---")])]),_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box mL10"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" Created On ")]),_vm.alarm.createdTime?_c("div",{staticClass:"fc-black-13 mT10 line-height20 text-left"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.alarm.createdTime))+" ")]):_c("div",{staticClass:"label-txt-black mT10"},[_vm._v("---")])]),_c("el-col",{staticClass:"pL10 pR0",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" Last Recorded ")]),_vm.alarm.modifiedTime?_c("div",{staticClass:"fc-black-13 mT10 line-height20 text-left"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.alarm.modifiedTime))+" ")]):_c("div",{staticClass:"label-txt-black mT10"},[_vm._v("---")])])],1)],1)]),_vm.alarm&&_vm.alarm.readingVal?_c("div",{staticClass:"alarm-summary-graph-container"},[_c("div",{staticClass:"alarm-summary-graph-inner"},[_vm._m(0),_c("div",[_vm.analyticsConfig?_c("f-new-analytic-report",{ref:"newAnalyticReport",staticClass:"alarm-summary-chart",attrs:{config:_vm.analyticsConfig}}):_vm._e()],1),_c("div",{staticClass:"analytics-txt"},[_c("div",{staticClass:"fc-summary-content-div"},[_c("div",{staticClass:"content analytics-txt",staticStyle:{cursor:"pointer",color:"rgb(57, 178, 194)","font-size":"13px","text-align":"right","font-weight":"500","margin-right":"20px"},on:{click:function($event){return _vm.jumpAlarmToAnalytics(_vm.alarm.id)}}},[_vm._v(" Go to Analytics "),_c("img",{staticStyle:{width:"13px",height:"9px"},attrs:{src:__webpack_require__(862620)}})])])])])]):_vm._e(),_vm.alarm.possibleCauses||_vm.alarm.recommendation>0?_c("div",[_c("div",{staticClass:"fc-white-bg-container mT10"},[_vm.alarm.possibleCauses?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" POSSIBLE CAUSES ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 space-preline"},[_vm._v(" "+_vm._s(_vm.alarm.possibleCauses)+" ")])]):_vm.alarm.possibleCauses?_vm._e():_c("div")]),_c("div",{staticClass:"fc-white-bg-container mT10"},[_vm.alarm.recommendation?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" POSSIBLE SOLUTIONS ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 space-preline"},[_vm._v(" "+_vm._s(_vm.alarm.recommendation)+" ")])]):_vm.alarm.recommendation?_c("div"):_vm._e()])]):_vm._e(),_c("div",{staticClass:"fc-white-bg-container mT10 p0 alarm-comment-con"},[_c("div",{staticClass:"row pT20",staticStyle:{"border-bottom":"1px solid #f4f4f4"}},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"row pL20"},[_c("div",{staticClass:"col-1 fc-black-13 text-left pointer bold",on:{click:function($event){return _vm.selectSubSection("comment")}}},[_vm._v(" Comments "),_c("div",{class:{wosactive:"comment"===_vm.subSection},staticStyle:{width:"50%"}})]),_c("div",{staticClass:"col-1 fc-black-13 text-left pointer bold mL60",on:{click:function($event){return _vm.selectSubSection("event")}}},[_vm._v(" Events "),_c("div",{class:{wosactive:"event"===_vm.subSection},staticStyle:{width:"50%"}})]),_c("div",{staticClass:"col-3 fc-black-13 text-left pointer bold mL40",on:{click:function($event){return _vm.selectSubSection("relatedalarms")}}},[_vm._v(" Related Alarms "),_c("div",{class:{wosactive:"relatedalarms"===_vm.subSection},staticStyle:{width:"30%"}})])])])]),"relatedalarms"===_vm.subSection?_c("div",[_vm.relatedAlarmsLoading?_c("spinner",{attrs:{show:_vm.relatedAlarmsLoading,size:"50"}}):!_vm.relatedalarms||!_vm.relatedalarms.length||1===_vm.relatedalarms.length&&_vm.relatedalarms[0].id===_vm.alarm.id?_c("div",{staticClass:"empty-msg"},[_vm._v(" No related alarms found. ")]):_vm._l(_vm.relatedalarms,(function(relatedalarm,index){return _vm.alarm.id!==relatedalarm.id?_c("el-row",{key:index,staticClass:"pR10 pT10 pB10 mL20 mR20",staticStyle:{"line-height":"2.79","border-bottom":"solid 1px rgba(151, 151, 151, 0.2)"}},[_c("el-col",{attrs:{span:2}},[_c("router-link",{attrs:{to:"/app/fa/faults/summary/"+relatedalarm.id}},[_c("div",{staticClass:"id-color f13 pull-left pointer"},[_vm._v(" #"+_vm._s(relatedalarm.serialNumber)+" ")])])],1),_c("el-col",{attrs:{span:15}},[_c("div",{staticClass:"event-content2"},[_vm._v(" "+_vm._s(relatedalarm.subject)+" ")])]),_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"fc-id",style:{color:_vm.getAlarmSeverity(_vm.alarm.severity.id).color}},[_vm._v(" "+_vm._s("Clear"===_vm.getAlarmSeverity(relatedalarm.severity.id).severity&&relatedalarm.previousSeverity?_vm.getAlarmSeverity(relatedalarm.previousSeverity.id).severity:_vm.getAlarmSeverity(relatedalarm.severity.id).severity)+" ")])]),_c("el-col",{attrs:{span:5}},[_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.4px","text-align":"right",color:"#919191"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(relatedalarm.modifiedTime))+" ")])])],1):_vm._e()}))],2):_vm._e(),"event"===_vm.subSection?_c("div",{staticClass:"row event-inner-container"},[_vm.eventsLoading?_c("spinner",{attrs:{show:_vm.eventsLoading,size:"50"}}):_c("table",{staticStyle:{"margin-bottom":"100px"},attrs:{width:"100%;"}},_vm._l(_vm.events,(function(event,index){return _c("tr",{key:index,staticStyle:{"border-bottom":"solid 1px rgba(151, 151, 151, 0.2)","line-height":"2.79"}},[_c("td",{staticStyle:{width:"100%"}},[_c("div",{staticClass:"event-msg"},[_c("router-link",{attrs:{to:"/app/fa/events/all/summary/"+event.id}},[_c("div",{staticClass:"id-color f12 pull-left pointer"},[_c("span",{staticClass:"f11"},[_vm._v("#")]),_vm._v(_vm._s(event.id)+" ")])]),_c("div",{staticClass:"event-content"},[_vm._v(" "+_vm._s(event.eventMessage)+" ")]),_c("div",{staticStyle:{float:"right","font-size":"12px","letter-spacing":"0.4px","text-align":"right",color:"#919191"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(event.createdTime))+" ")]),_c("div",{staticStyle:{clear:"both"}})],1)])])})),0)],1):_vm._e(),"comment"===_vm.subSection?_c("comments",{staticStyle:{"margin-left":"40px","margin-right":"30px"},attrs:{module:"ticketnotes",parentModule:"alarm",record:_vm.alarm,notify:!1}}):_vm._e()],1)])])]),_c("div",{staticClass:"alarm-summary-body-right clearboth"},[_c("div",{staticClass:"alaram-summary-body-scroll mL30 mR20"},[_vm.alarm.createdTime?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v("ALARM DURATION")]),_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+_vm.alarm.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n              html: '#timer_popover_' + alarm.id,\n              distance: 0,\n              interactive: true,\n              theme: 'light',\n              animation: 'scale',\n              arrow: true,\n            }"}],staticClass:"alarm-timer p10",attrs:{time:_vm.alarm.createdTime,twoDigits:_vm.showingTwoDigit,title:_vm._f("formatDate")(_vm.alarm.createdTime)}})],1):_vm._e(),_vm.resource?_c("div",{staticClass:"asset-con"},[_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v("ASSET CATEGORY")]),_vm.resource&&_vm.resource.category&&_vm.resource.category.id?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(_vm.resource&&_vm.getAssetCategoryById(_vm.resource.category.id).name?_vm.getAssetCategoryById(_vm.resource.category.id).displayName:"---")+" ")]):_vm._e()]),_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v("ASSET NAME")]),_vm.resource&&_vm.resource.name?_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openAsset(_vm.alarm.resource.id)}}},[_vm._v(" "+_vm._s(_vm.resource.name?_vm.resource.name:"---")+" ")]):_vm._e()]),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(1,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v("SITE")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openSite(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(1,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e(),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(2,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v("BUILDING")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openBuilding(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(2,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e(),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(3,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v("FLOOR")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openFloor(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(3,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e(),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(4,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v("SPACE")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openSpace(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(4,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e()]):_vm._e(),_vm.alarm&&_vm.alarm.woId&&_vm.workorder?_c("div",{staticClass:"mT25"},[_c("div",{},[_c("div",{staticClass:"fc-text-pink11"},[_vm._v("WORKORDER")]),_vm.workorder&&_vm.workorder.id?_c("div",{staticClass:"label-txt-black mT5 pointer fc-id",on:{click:function($event){return _vm.openWorkorder(_vm.alarm.woId)}}},[_vm._v(" #"+_vm._s(_vm.workorder.id)+" ")]):_vm._e(),_vm.workorder&&_vm.workorder.subject?_c("div",{staticClass:"label-txt-black mT5 pointer",on:{click:function($event){return _vm.openWorkorder(_vm.alarm.woId)}}},[_vm._v(" "+_vm._s(_vm.workorder.subject?_vm.workorder.subject:"---")+" ")]):_vm._e()]),_c("div",[_vm.workorder&&_vm.workorder.dueDate&&-1!==_vm.workorder.dueDate?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v("Due Time")]),_vm.workorder&&_vm.workorder.dueDate?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(-1!==_vm.workorder.dueDate?_vm.workorder.dueDateString:"")+" ")]):_vm._e()]):_vm._e(),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v("Status")]),_vm.workorder&&_vm.workorder.status&&_vm.workorder.status.displayName?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(_vm.workorder.status.displayName?_vm.workorder.status.displayName:"---")+" ")]):_vm._e()]),_vm.workorder&&_vm.workorder.assignedTo>0?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v("ASSIGNED TO")]),_vm.workorder&&_vm.workorder.assignedTo&&_vm.workorder.assignedTo.name?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(_vm.workorder.assignedTo.name?_vm.workorder.assignedTo.name:"---")+" ")]):_vm._e()]):_vm._e(),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v("PRIORITY")]),_vm.workorder&&_vm.workorder.priority&&_vm.workorder.priority.priority?_c("div",{staticClass:"mT10 label-txt-black"},[_c("i",{staticClass:"fa fa-circle f9",style:{color:_vm.workorder.priority.colour},attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.workorder.priority.priority?_vm.workorder.priority.priority:"---")+" ")]):_vm._e()])])]):_vm._e()])])]),_vm.showAssetExport?_c("el-dialog",{staticClass:"dialog-header-remove export-dialog",attrs:{visible:_vm.showAssetExport,width:"30%"},on:{"update:visible":function($event){_vm.showAssetExport=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v("Export Alarm summary")])])]),_c("div",{staticClass:"export-body-dailog"},[_c("div",[_c("el-checkbox",{staticStyle:{"padding-bottom":"10px","padding-left":"40px","padding-top":"10px"},attrs:{checked:"",disabled:""}},[_vm._v("All Events")])],1),_c("el-checkbox-group",{staticClass:"check-padding-remove",model:{value:_vm.selectedFields,callback:function($$v){_vm.selectedFields=$$v},expression:"selectedFields"}},[_c("div",{staticClass:"row"},_vm._l(_vm.assetFields,(function(field){return _c("el-checkbox",{key:field.id,staticClass:"check-width",attrs:{label:field.id}},[_vm._v(_vm._s(field.displayName))])})),1)])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeExportDialog()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.exportEvent()}}},[_vm._v("EXPORT DATA")])],1)]):_vm._e(),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_c("q-modal",{ref:"createWOModel",attrs:{noBackdropDismiss:"","content-classes":"fc-model","content-css":{padding:"0px",background:"#f7f8fa",Width:"10vw",Height:"30vh"}}},[_c("alarm-model",{ref:"confirmWoModel",on:{submit:_vm.createWO,closed:_vm.closeWoDialog}})],1)],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"alarm-summary-graph-header"},[_c("div",{staticClass:"fc-black-16 bold fL"},[_vm._v("Alarms Report")])])}],objectSpread2=__webpack_require__(595082),Timer=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(114857)),Comments=__webpack_require__(147105),AlarmModel=__webpack_require__(703117),moment_moment=__webpack_require__(730381),moment_default=__webpack_require__.n(moment_moment),quasar_esm=__webpack_require__(641358),vuex_esm=__webpack_require__(420629),FNewAnalyticReport=__webpack_require__(794925),JumpToHelper=__webpack_require__(921466),AnalyticsMixin=__webpack_require__(244936),NewDateHelper=__webpack_require__(105534),NewDataFormatHelper=__webpack_require__(804911),router=__webpack_require__(329435),validation=__webpack_require__(990260),log_map_getters=__webpack_require__(160799),log_map_state=__webpack_require__(766331),AlarmSummaryvue_type_script_lang_js={name:"AlarmSummary",mixins:[JumpToHelper/* default */.Z,NewDataFormatHelper/* default */.Z,AnalyticsMixin/* default */.Z,NewDateHelper/* default */.Z],data:function(){return{assetFields:[],workorder:null,eventsLoading:!1,relatedAlarmsLoading:!1,summary:!0,showAssetExport:!1,subSection:"comment",events:[],showingTwoDigit:!0,relatedalarms:[],selectedFields:[],chartOperatorId:null,exportDownloadUrl:null,asset:null,exportType:null,readingField:null,analyticsConfig:null,loading:!0}},components:{FNewAnalyticReport:FNewAnalyticReport["default"],Timer:Timer/* default */.Z,Comments:Comments/* default */.Z,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QModal:quasar_esm/* QModal */.hc,QIcon:quasar_esm/* QIcon */.oF,QPopover:quasar_esm/* QPopover */.oe,QList:quasar_esm/* QList */.tu,AlarmModel:AlarmModel/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({alarms:function(state){return state.alarm.alarms},users:function(state){return state.users},severityStatus:function(state){return state.alarmSeverity}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)({getTicketPriority:"getTicketPriority",getTicketCategory:"getTicketCategory",getAssetCategoryById:"getAssetCategory",getAlarmSeverity:"getAlarmSeverity"})),(0,log_map_getters/* mapGettersWithLogging */.t)({storeGetSpace:"getSpace"})),{},{alarm:function(){return this.$store.state.alarm.currentAlarm},alarmId:function(){return parseInt(this.$route.params.id)},resource:function(){return this.alarm&&this.alarm.resource?this.alarm.resource:null}}),created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("alarm/fetchAlarm",{id:parseInt(this.$route.params.id)})},watch:{alarm:function(){var _this=this,title="[#"+this.alarm.serialNumber+"] "+this.alarm.subject;this.setTitle(title),this.loadFieldDetails(),this.loadWoDetails(),"event"===this.subSection?this.loadEvents(this.alarm.id):"relatedalarms"===this.subSection&&this.alarm.entityId&&this.loadRelatedAlarms(this.alarm.entityId),this.alarm.readingVal&&(this.analyticsConfig?(this.analyticsConfig=null,this.$nextTick((function(){_this.analyticsConfig={alarmId:_this.alarm.id,dateFilter:_this.getDatePickerObject(),hidechartoptions:!0,hidetabular:!0,hidecharttypechanger:!0,fixedChartHeight:300}}))):this.analyticsConfig={alarmId:this.alarm.id,dateFilter:this.getDatePickerObject(),hidechartoptions:!0,hidetabular:!0,hidecharttypechanger:!0,fixedChartHeight:300})},subSection:function(){"event"===this.subSection?this.loadEvents(this.alarm.id):"relatedalarms"===this.subSection&&this.alarm.entityId&&this.loadRelatedAlarms(this.alarm.entityId)},alarmId:function(newVal){this.$store.dispatch("alarm/fetchAlarm",{id:this.alarmId}),this.loadWoDetails()}},mounted:function(){this.loadAssetDetails(),this.loadWoDetails()},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({assignAlarmApi:"alarm/assignAlarm",addAlarmApi:"alarm/addAlarm",updateAlarmStatus:"alarm/updateAlarmStatus",notifyAlarm:"alarm/notifyAlarm",acknowledgeAlarm:"alarm/acknowledgeAlarm",getRelatedWorkorderId:"alarm/getRelatedWorkorderId",deleteAlarm:"alarm/deleteAlarm"})),{},{loadmsg:function(){return this.alarm.readingMessage.replace("&deg;C","C")},loadReadingField:function(){return this.readingField.unit.replace("&deg;C","C")},getDatePickerObject:function(){var modifiedTime;return modifiedTime=this.alarm.createdTime,this.alarm.modifiedTime>0&&(modifiedTime=this.alarm.modifiedTime),NewDateHelper/* default */.Z.getDatePickerObject(62,""+modifiedTime)},chartOperatorHandling:function(operatorId){this.chartOperatorId=operatorId},loadWoDetails:function(){var self=this;if(this.alarm&&this.alarm.woId&&this.alarm.woId>0){var url="/workorder/summary/"+this.alarm.woId;return self.$http.get(url).then((function(response){self.workorder=response.data.workorder}))}self.workorder=null,this.$forceUpdate()},forceUpdate:function(){this.$forceUpdate()},exportEvent:function(type){var array={alarmId:this.alarmId,fieldId:this.selectedFields,type:this.exportType,parentId:this.alarm.resource.id},self=this,url="event/eventExport";self.$message({showClose:!0,message:"Downloading...",type:"success"}),this.$http.post(url,array).then((function(response){self.exportDownloadUrl=response.data.fileUrl,self.showAssetExport=!1}))},closeExportDialog:function(){this.showAssetExport=!1,this.selectedFields=[]},exportSummary:function(type){var _this2=this;this.exportType=type,this.showAssetExport=!0,this.$util.loadAssetReadingFields(this.alarm.resource.id).then((function(fields){_this2.assetFields=fields}))},createWoDialog:function(id){this.createWoIds=id,this.$refs["createWOModel"].open(),this.$refs.confirmWoModel.reset()},getSpace:function(spaceType,spaceId){var obj=this.storeGetSpace(spaceId);if(obj){if(1===spaceType)return 1===obj.spaceType?obj.name:this.getSpace(1,obj.siteId);if(2===spaceType){if(2===obj.spaceType)return obj.name;if(3===obj.spaceType||4===obj.spaceType)return this.getSpace(2,obj.buildingId)}else if(3===spaceType){if(3===obj.spaceType)return obj.name;if(4===obj.spaceType)return this.getSpace(3,obj.floorId)}else if(4===spaceType&&4===obj.spaceType)return obj.name}return"---"},loadFieldDetails:function(){var self=this;if(self.alarm.sourceTypeEnum&&"THRESHOLD_ALARM"===self.alarm.sourceTypeEnum){var url="/field/"+this.alarm.readingFieldId;self.$http.get(url).then((function(response){self.readingField=response.data.field}))}},loadAssetDetails:function(){if(this.alarm.asset&&this.alarm.asset.id){var self=this,url="/asset/summary/"+this.alarm.asset.id;self.$http.get(url).then((function(response){self.asset=response.data}))}},goToAnalytics:function(){this.$router.replace({path:"/app/em/analytics/reading",query:{alarmId:this.alarm.id}})},openEvent:function(id){var url="/app/fa/events/all/summary/"+id;this.$router.replace({path:url})},openAsset:function(id){if(id)if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("asset",router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else{var url="/app/at/assets/all/"+id+"/overview";this.$router.replace({path:url})}},findRoute:function(){if((0,router/* isWebTabsEnabled */.tj)()){var tabType=router/* tabTypes */.VF.CUSTOM,config={type:"portfolio"},route=(0,router/* findRouteForTab */.OD)(tabType,{config:config})||{};return(0,validation/* isEmpty */.xb)(route)?null:this.$router.resolve({name:route.name}).href}return"/app/home/portfolio"},openSite:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId;if(sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/overview");this.$router.replace({path:url})}}}},openBuilding:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId,bid=this.storeGetSpace(id).id;if(bid&&sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/building/").concat(bid);this.$router.replace({path:url})}}}},openFloor:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId,bid=this.storeGetSpace(id).id;if(bid&&sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/floor/").concat(bid);this.$router.replace({path:url})}}}},openSpace:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId,bid=this.storeGetSpace(id).id;if(bid&&sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/space/").concat(bid);this.$router.replace({path:url})}}}},isActiveAlarm:function(alarm){return"Clear"!==this.getAlarmSeverity(alarm.severity.id).severity},loadEvents:function(alarmId){var _this3=this,self=this,queryObj={alarmId:alarmId};self.eventsLoading=!0,self.$http.post("event/alarm",queryObj).then((function(response){self.eventsLoading=!1,self.events=response.data.events})).catch((function(){_this3.eventsLoading=!1}))},loadRelatedAlarms:function(entityId){var _this4=this,self=this,queryObj={entityId:entityId};self.relatedAlarmsLoading=!0,self.$http.post("alarmentity/alarm",queryObj).then((function(response){self.relatedAlarmsLoading=!1,self.relatedalarms=response.data.alarms})).catch((function(){_this4.relatedAlarmsLoading=!1}))},assignAlarm:function(alarm,userId,userName){var data={id:[alarm.id],alarm:{assignedTo:{id:userId,name:userName}}};this.assignAlarmApi({data:data,alarm:alarm})},closeSummary:function(){this.summary=!1;var newpath=this.$route.path.substring(0,this.$route.path.indexOf("/summary/"));this.$router.replace({path:newpath})},deleteAlarmById:function(){var self=this;self.$dialog.confirm({title:"Delete Alarm",message:"Are you sure you want to delete this Alarm?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){if(value){self.deleteAlarm([self.alarm.id]),self.$message({message:"Alarm deleted successfully!",type:"success"});var newpath="/app/fa/faults/unacknowledged/summary/"+self.alarms[0].id;self.$router.replace({path:newpath})}}))},createWO:function(data){var self=this,fields={};data.category&&(fields.category={id:data.category,name:this.getTicketCategory(data.category).name}),data.priority&&(fields.priority={id:data.priority,name:this.getTicketPriority(data.priority)}),data.assignedTo&&(fields.assignedTo=data.assignedTo),data.assignmentGroup&&(fields.assignmentGroup=data.assignmentGroup),self.$store.dispatch("alarm/createWoFromAlarm",{id:this.createWoIds,fields:fields}).then((function(){self.$dialog.notify("Workorder created successfully!"),self.$refs["createWOModel"].close()}))},closeWoDialog:function(){this.$refs["createWOModel"].close()},selectSubSection:function(section){this.subSection=section},alarmstatus:function(status){return 1===status?"":2===status?"Suppressed":3===status?"Cleared":void 0},openWorkorder:function(id){if(!(id>0))return!1;if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)("workorder",router/* pageTypes */.As.OVERVIEW)||{},name=_ref2.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else this.$router.push({path:"/app/wo/orders/summary/"+id})},onlyInternalProps:function(additionInfo){for(var key in additionInfo)if(""!==key&&"resourceId"!==key&&"eventStateEnum"!==key&&"internalStateEnum"!==key&&"PUBLISH_TYPE"!==key)return!1;return!0}}),filters:{moment:function(date,format){return moment_default()(date).format(format)},getFollowerUser:function(value,users){if(-1!==value.indexOf("@")){var userObj=users.find((function(user){return user.email===value}));if(userObj)return userObj}return{name:value}},sensorName:function(deviceId,devices){var sensorName;for(var key in devices)devices[key].id===deviceId&&(sensorName=devices[key].name);return sensorName},sensorType:function(deviceId,devices){var sensorType;for(var key in devices)devices[key].id===deviceId&&(sensorType=devices[key].type);return sensorType}}},v1_AlarmSummaryvue_type_script_lang_js=AlarmSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_AlarmSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmSummary=component.exports},
/***/583972:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3aed7174c314bbc14fee9c5cd51e20fa.svg";
/***/},
/***/262079:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"456de1d725ea1682baf27189b19eb544.svg";
/***/},
/***/773339:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ec28172b828295676202641adbd2566.svg";
/***/},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/108277:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"fdf30d3630145654a9db58f2d68b8d49.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/},
/***/862620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"99feee13c865562d98860641f93e90d9.svg";
/***/},
/***/754125:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./af":702525,"./af.js":702525,"./ar":689102,"./ar-dz":463778,"./ar-dz.js":463778,"./ar-kw":410960,"./ar-kw.js":410960,"./ar-ly":281490,"./ar-ly.js":281490,"./ar-ma":985507,"./ar-ma.js":985507,"./ar-sa":224042,"./ar-sa.js":224042,"./ar-tn":191523,"./ar-tn.js":191523,"./ar.js":689102,"./az":938365,"./az.js":938365,"./be":544860,"./be.js":544860,"./bg":709904,"./bg.js":709904,"./bm":660952,"./bm.js":660952,"./bn":709807,"./bn.js":709807,"./bo":858437,"./bo.js":858437,"./br":784557,"./br.js":784557,"./bs":979332,"./bs.js":979332,"./ca":493667,"./ca.js":493667,"./cs":276860,"./cs.js":276860,"./cv":515427,"./cv.js":515427,"./cy":158863,"./cy.js":158863,"./da":513520,"./da.js":513520,"./de":112111,"./de-at":30464,"./de-at.js":30464,"./de-ch":750701,"./de-ch.js":750701,"./de.js":112111,"./dv":494438,"./dv.js":494438,"./el":33121,"./el.js":33121,"./en-au":849197,"./en-au.js":849197,"./en-ca":753885,"./en-ca.js":753885,"./en-gb":551914,"./en-gb.js":551914,"./en-ie":880938,"./en-ie.js":880938,"./en-nz":619722,"./en-nz.js":619722,"./eo":742783,"./eo.js":742783,"./es":56820,"./es-do":559651,"./es-do.js":559651,"./es-us":146018,"./es-us.js":146018,"./es.js":56820,"./et":818686,"./et.js":818686,"./eu":831323,"./eu.js":831323,"./fa":261885,"./fa.js":261885,"./fi":263741,"./fi.js":263741,"./fo":219961,"./fo.js":219961,"./fr":802800,"./fr-ca":388121,"./fr-ca.js":388121,"./fr-ch":427979,"./fr-ch.js":427979,"./fr.js":802800,"./fy":428930,"./fy.js":428930,"./gd":695513,"./gd.js":695513,"./gl":224485,"./gl.js":224485,"./gom-latn":703878,"./gom-latn.js":703878,"./gu":25435,"./gu.js":25435,"./he":862825,"./he.js":862825,"./hi":727282,"./hi.js":727282,"./hr":402438,"./hr.js":402438,"./hu":591310,"./hu.js":591310,"./hy-am":614794,"./hy-am.js":614794,"./id":108761,"./id.js":108761,"./is":256593,"./is.js":256593,"./it":272196,"./it.js":272196,"./ja":812645,"./ja.js":812645,"./jv":471869,"./jv.js":471869,"./ka":174093,"./ka.js":174093,"./kk":919794,"./kk.js":919794,"./km":792637,"./km.js":792637,"./kn":828684,"./kn.js":828684,"./ko":94565,"./ko.js":94565,"./ky":465606,"./ky.js":465606,"./lb":472027,"./lb.js":472027,"./lo":280366,"./lo.js":280366,"./lt":327311,"./lt.js":327311,"./lv":531851,"./lv.js":531851,"./me":952700,"./me.js":952700,"./mi":673575,"./mi.js":673575,"./mk":195509,"./mk.js":195509,"./ml":429866,"./ml.js":429866,"./mr":713798,"./mr.js":713798,"./ms":526848,"./ms-my":701212,"./ms-my.js":701212,"./ms.js":526848,"./mt":863181,"./mt.js":863181,"./my":63977,"./my.js":63977,"./nb":47248,"./nb.js":47248,"./ne":891859,"./ne.js":891859,"./nl":127058,"./nl-be":66901,"./nl-be.js":66901,"./nl.js":127058,"./nn":561748,"./nn.js":561748,"./pa-in":634266,"./pa-in.js":634266,"./pl":79581,"./pl.js":79581,"./pt":687410,"./pt-br":906114,"./pt-br.js":906114,"./pt.js":687410,"./ro":138295,"./ro.js":138295,"./ru":539862,"./ru.js":539862,"./sd":59548,"./sd.js":59548,"./se":293236,"./se.js":293236,"./si":340289,"./si.js":340289,"./sk":658339,"./sk.js":658339,"./sl":574170,"./sl.js":574170,"./sq":615316,"./sq.js":615316,"./sr":668791,"./sr-cyrl":447630,"./sr-cyrl.js":447630,"./sr.js":668791,"./ss":65773,"./ss.js":65773,"./sv":731159,"./sv.js":731159,"./sw":422329,"./sw.js":422329,"./ta":267054,"./ta.js":267054,"./te":971280,"./te.js":971280,"./tet":154120,"./tet.js":154120,"./th":254679,"./th.js":254679,"./tl-ph":63270,"./tl-ph.js":63270,"./tlh":845386,"./tlh.js":845386,"./tr":664669,"./tr.js":664669,"./tzl":691434,"./tzl.js":691434,"./tzm":57217,"./tzm-latn":547665,"./tzm-latn.js":547665,"./tzm.js":57217,"./uk":969596,"./uk.js":969596,"./ur":985133,"./ur.js":985133,"./uz":349456,"./uz-latn":978737,"./uz-latn.js":978737,"./uz.js":349456,"./vi":905577,"./vi.js":905577,"./x-pseudo":464564,"./x-pseudo.js":464564,"./yo":68854,"./yo.js":68854,"./zh-cn":795817,"./zh-cn.js":795817,"./zh-hk":266634,"./zh-hk.js":266634,"./zh-tw":749292,"./zh-tw.js":749292};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=754125}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/15450.js.map