"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[85025],{
/***/485025:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return RadialCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/dashboard/widget/cards/v2/RadialCard.vue?vue&type=template&id=4397ce28&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("div",{staticClass:"d-flex flex-direction-column justify-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",{staticClass:"radial-gauge dragabale-card fc-widget height-100"},[_c("div",{staticClass:"pT10 pB10 title text-left"},[_c("div",{staticClass:"f16 bold letter-spacing0_4 text-left pL15"},[_vm._v(" "+_vm._s(_vm.data.title)+" ")])]),_c("div",{staticClass:"mT15"},[_c("canvas",{ref:"canvasGauges-linear-"+_vm.fieldObj.fieldId})])])},staticRenderFns=[],gauge_min=(__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(879288),__webpack_require__(144172)),validation=__webpack_require__(990260),RadialCardvue_type_script_lang_js={props:["widget","config"],data:function(){return{loading:!1,result:null,data:{style:{color:"red",bgcolor:"pink"},unitString:"",workflowV2String:""},radialGaugeChart:null,options:{renderTo:"",width:210,height:210,minValue:null,maxValue:null,value:null,units:null,minorTicks:null,majorTicks:[],highlights:[],strokeTicks:!0,colorStrokeTicks:"#fff",colorMajorTicks:["#000"],colorMinorTicks:"#000",colorTitle:"#324056",colorUnits:"#324056",colorNumbers:"#324056",borderRadius:0,borders:!1,needleCircleInner:!1,needleType:"arrow",needleWidth:2,needleCircleSize:7,barStrokeWidth:0,colorValueBoxShadow:!1,colorValueBoxBackground:"#fff",colorValueText:"#324056",valueBoxStroke:0,valueBoxWidth:10,valueTextShadow:!1,valueInt:1,animationDuration:1500,animationRule:"bounce",animateOnInit:!0}}},computed:{fieldObj:function(){var result=this.result,_ref=result||{},fieldObj=_ref.fieldObj;return fieldObj||{}}},mounted:function(){var _this=this;this.getParams(),this.loadCardData().then((function(){var $refs=_this.$refs,fieldObj=_this.fieldObj;_this.$nextTick((function(){if(!(0,validation/* isEmpty */.xb)($refs)){var canvasElement=$refs["canvasGauges-linear-".concat(fieldObj.fieldId)];_this.$set(_this.options,"renderTo",canvasElement),_this.radialGaugeChart=new gauge_min.RadialGauge(_this.options).draw()}}))}))},methods:{refresh:function(){this.updateCard()},getParams:function(){this.widget.dataOptions.data?(this.widget.dataOptions.metaJson=JSON.stringify(this.widget.dataOptions.data),this.data=this.widget.dataOptions.data,this.setParams()):this.widget.id>-1&&this.widget.dataOptions.metaJson&&(this.data=JSON.parse(this.widget.dataOptions.metaJson),this.setParams())},setParams:function(){var gaugeMeta=this.data.gaugeMeta;this.data&&!this.data.style?this.data.style={color:this.color,bgcolor:this.bgcolor}:this.style=this.data.style,this.widget.dataOptions.metaJson=JSON.stringify(this.data),this.$set(this.options,"minorTicks",gaugeMeta.minorTicks),this.$set(this.options,"majorTicks",gaugeMeta.majorTicks),this.$set(this.options,"highlights",gaugeMeta.highlights)},updateCard:function(){var self=this,params=null;self.getParams(),params={workflow:{isV2Script:!0,workflowV2String:this.data.workflowV2String},staticKey:"kpiCard"},this.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){self.getData(response.data.cardResult),self.loading=!1})).catch((function(error){self.loading=!1}))},loadCardData:function(){var self=this,params=null;return params=this.widget&&this.widget.id>-1?{widgetId:self.widget.id}:{workflow:{isV2Script:!0,workflowV2String:this.data.workflowV2String},staticKey:"kpiCard"},this.loading=!0,self.$http.post("dashboard/getCardData",params).then((function(response){self.getData(response.data.cardResult),self.loading=!1})).catch((function(error){self.loading=!1}))},getData:function(data){if(data.hasOwnProperty("result")){this.result=data.result;var radialGaugeChart=this.radialGaugeChart;this.$set(this.options,"minValue",Number(this.result.minValue)),this.$set(this.options,"maxValue",Number(this.result.maxValue)),this.$set(this.options,"value",Number(this.result.lastValue)),this.$set(this.options,"units",this.result.fieldObj.unit),radialGaugeChart.update(this.options)}}}},v2_RadialCardvue_type_script_lang_js=RadialCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v2_RadialCardvue_type_script_lang_js,render,staticRenderFns,!1,null,"4397ce28",null)
/* harmony default export */,RadialCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/85025.js.map