"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[6074],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/706512:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSafeLimit}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSafeLimit.vue?vue&type=template&id=62fb55f3
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"mT20 pB20"},[_c("div",{staticClass:"fc-text-pink2 mT20"},[_vm._v("SAFE LIMIT")]),_c("p",{staticClass:"grey-text2 pT5"},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.specify_rules_for_reading"))+" ")]),_c("el-row",{staticClass:"mT20"},[_c("el-col",{staticClass:"mT10",attrs:{span:6}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"none"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.none"))+" ")])],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"mT10",attrs:{span:7}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"greater"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v("Greater Than")])],1),"greater"===_vm.field.safeLimitPattern?_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.greaterThan,callback:function($$v){_vm.$set(_vm.field,"greaterThan",$$v)},expression:"field.greaterThan"}})],1):_vm._e()],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"mT10",attrs:{span:7}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"lesser"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v("Lesser Than")])],1),"lesser"===_vm.field.safeLimitPattern?_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.lesserThan,callback:function($$v){_vm.$set(_vm.field,"lesserThan",$$v)},expression:"field.lesserThan"}})],1):_vm._e()],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"mT10",attrs:{span:6}},[_c("el-radio",{staticClass:"fc-radio-btn fc-radio-btn2",attrs:{label:"between"},on:{change:function($event){return _vm.clearData(_vm.field.safeLimitPattern)}},model:{value:_vm.field.safeLimitPattern,callback:function($$v){_vm.$set(_vm.field,"safeLimitPattern",$$v)},expression:"field.safeLimitPattern"}},[_vm._v("Between")])],1),"between"===_vm.field.safeLimitPattern?_c("div",[_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.betweenFrom,callback:function($$v){_vm.$set(_vm.field,"betweenFrom",$$v)},expression:"field.betweenFrom"}})],1),_c("el-col",{staticStyle:{"margin-top":"18px","text-align":"center"},attrs:{span:2}},[_c("span",{staticClass:"label-txt-black"},[_vm._v("to")])]),_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2",model:{value:_vm.field.betweenTo,callback:function($$v){_vm.$set(_vm.field,"betweenTo",$$v)},expression:"field.betweenTo"}})],1)],1):_vm._e()],1),_c("div",{staticClass:"mT30"},[_c("el-row",[_c("el-col",{staticClass:"el-checkbox-container mT10",attrs:{span:7}},[_c("el-checkbox",{model:{value:_vm.field.raiseSafeLimitAlarm,callback:function($$v){_vm.$set(_vm.field,"raiseSafeLimitAlarm",$$v)},expression:"field.raiseSafeLimitAlarm"}},[_vm._v("Raise Alarm")])],1),_c("el-col",{staticClass:"mT10",attrs:{span:7}},[_c("div",{staticClass:"label-txt2"},[_vm._v("Alarm Severity")])]),_c("el-col",{attrs:{span:6}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Select"},model:{value:_vm.field.safeLimitSeverity,callback:function($$v){_vm.$set(_vm.field,"safeLimitSeverity",$$v)},expression:"field.safeLimitSeverity"}},_vm._l(_vm.alarmSeverity,(function(item){return _c("el-option",{key:item,attrs:{label:item,value:item}})})),1)],1)],1)],1)],1)},staticRenderFns=[],FSafeLimitvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(425728),__webpack_require__(434284),{props:["value","edit"],data:function(){return{field:{safeLimitId:-1,raiseSafeLimitAlarm:!1,displayName:"",dataType:1,lesserThan:null,greaterThan:null,betweenTo:null,betweenFrom:null,safeLimitPattern:"none",safeLimitSeverity:"Minor"},alarmSeverity:["Critical","Major","Minor"]}},mounted:function(){this.$helpers.extend(this.field,this.value),this.edit&&this.editReadingRules(this.value)},created:function(){this.$store.dispatch("loadAlarmSeverity")},watch:{field:{handler:function(val){this.$emit("input",this.field)},deep:!0}},methods:{editReadingRules:function(fields){var _this=this;this.field.raiseSafeLimitAlarm=!1,this.field.safeLimitSeverity="Minor",this.field.lesserThan=null,this.field.greaterThan=null,this.field.betweenTo=null,this.field.betweenFrom=null,this.field.safeLimitPattern="none",fields.readingRules&&fields.readingRules.forEach((function(rule){if("(b!=-1&&a<b)||(c!=-1&&a>c)"===rule.workflow.resultEvaluator){var min=rule.workflow.expressions.find((function(e){return"b"===e.name})).constant,max=rule.workflow.expressions.find((function(e){return"c"===e.name})).constant;"-1"===min&&"-1"===max?_this.field.safeLimitPattern="none":"-1"===min?(_this.field.safeLimitPattern="lesser",_this.field.lesserThan=max):"-1"===max?(_this.field.safeLimitPattern="greater",_this.field.greaterThan=min):(_this.field.safeLimitPattern="between",_this.field.betweenTo=max,_this.field.betweenFrom=min),_this.field.safeLimitId=rule.id||-1,rule.actions&&(_this.field.safeLimitSeverity=rule.actions[0].template.originalTemplate.severity,_this.field.raiseSafeLimitAlarm=!0)}}))},clearData:function(safeLimitPattern){"none"===safeLimitPattern?(this.field.lesserThan=null,this.field.greaterThan=null,this.field.betweenFrom=null,this.field.betweenTo=null):"lesser"===safeLimitPattern?(this.field.greaterThan=null,this.field.betweenFrom=null,this.field.betweenTo=null):"greater"===safeLimitPattern?(this.field.lesserThan=null,this.field.betweenFrom=null,this.field.betweenTo=null):"between"===safeLimitPattern&&(this.field.lesserThan=null,this.field.greaterThan=null)}}}),components_FSafeLimitvue_type_script_lang_js=FSafeLimitvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSafeLimitvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSafeLimit=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/148019:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return EnPI}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/EnPI.vue?vue&type=template&id=1bd74e04
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v(_vm._s(_vm.$t("setup.setup.enpi")))]),_c("div",{staticClass:"heading-description"},[_vm._v(_vm._s(_vm.$t("setup.list.list_enpi")))])]),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.showNewEnpi}},[_vm._v(" "+_vm._s(_vm.$t("setup.add.add_enpi"))+" ")])],1)]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common.roles.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.space_asset"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.site_freq"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])]),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_vm.enpilist.length?_c("tbody",_vm._l(_vm.enpilist,(function(enpi,index){return _c("tr",{directives:[{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],key:index,staticClass:"tablerow"},[_c("td",[_vm._v(_vm._s(enpi.name))]),_c("td",[_vm._v(_vm._s(_vm.getResourceName(enpi)))]),_c("td",[_vm._v(" "+_vm._s(enpi.frequency?_vm.frequencyTypes[enpi.frequency]:"---")+" ")]),_c("td",[_c("div",{staticClass:"text-left actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center"}},[_c("i",{staticClass:"el-icon-edit pointer",on:{click:function($event){return _vm.showEditEnpi(enpi)}}}),_vm._v("    "),_c("i",{staticClass:"el-icon-delete pointer",on:{click:function($event){return _vm.deleteEnpi(enpi.id,index)}}})])])])})),0):_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v(" "+_vm._s(_vm.$t("setup.empty.empty_enpi"))+" ")])])])])])]),_vm.loadForm?_c("new-enpi",{attrs:{isNew:_vm.isNew,visibility:_vm.loadForm,enpi:_vm.selectedEnpi},on:{saved:_vm.save,"update:visibility":function($event){_vm.loadForm=$event}}}):_vm._e()],1)},staticRenderFns=[],esm_typeof=__webpack_require__(103336),NewEnPI=(__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(585213)),EnPIvue_type_script_lang_js={components:{NewEnpi:NewEnPI/* default */.Z},title:function(){return"ENPI"},data:function(){return{loading:!0,enpilist:[],selectedEnpi:{},loadForm:!1,isNew:!1,rule:null}},computed:{frequencyTypes:function(){var types=this.$helpers.cloneObject(this.$constants.FACILIO_FREQUENCY);return types["8"]="Hourly",types},assetCategoryList:function(){return this.$store.state.assetCategory}},created:function(){this.$store.dispatch("loadAssetCategory")},mounted:function(){this.loadEnpi()},methods:{save:function(){
// this.$refs.createNewEnpi.close()
this.loadEnpi(),this.showDialog=!0},loadEnpi:function(){var self=this;self.$http.get("/reading/allformulas?type=1").then((function(response){if(self.loading=!1,200===response.status){self.enpilist=response.data&&response.data.formulaList?response.data.formulaList:[];var fieldVsRules=response.data.fieldVsRules;if(fieldVsRules&&self.enpilist&&self.enpilist.length)for(var i=0;i<self.enpilist.length;i++)self.enpilist[i].readingField&&(self.enpilist[i].readingField.readingRules=fieldVsRules[self.enpilist[i].readingFieldId]||[])}})).catch((function(error){self.loading=!1}))},showNewEnpi:function(){this.loadForm=!0,this.isNew=!0,this.selectedEnpi={}},showEditEnpi:function(enpi){this.loadForm=!0,this.selectedEnpi=this.$helpers.cloneObject(enpi),this.isNew=!1,this.showDialog=!0},
// closeForm () {
//   this.$refs.createNewEnpi.close()
// },
deleteEnpi:function(id,idx){var _this=this;this.$dialog.confirm({title:this.$t("setup.delete.delete_enpi"),message:this.$t("setup.delete.delete_enpi_confirm"),rbDanger:!0,rbLabel:this.$t("setup.users_management.delete")}).then((function(value){value&&_this.$http.post("/reading/deleteformula",{id:id}).then((function(response){200===response.status&&"object"===(0,esm_typeof/* default */.Z)(response.data)?(_this.$message.success(_this.$t("setup.delete.delete_enpi_success")),_this.enpilist.splice(idx,1)):_this.$message.error(_this.$t("setup.delete.delete_enpi_failed"))}))}))},getResourceName:function(enpi){if(enpi.matchedResourcesIds&&enpi.matchedResourcesIds.length){if(enpi.assetCategoryId>0){var message,selectedCount;enpi.includedResources&&enpi.includedResources.length&&(selectedCount=enpi.includedResources.length);var categoryName=this.getCategoryName(enpi.assetCategoryId);if(selectedCount){if(1===selectedCount)return enpi.matchedResources[0].name;message=selectedCount+" "+categoryName+"s"}else message="All "+categoryName+"s";return message}var firstResource=enpi.matchedResources[Object.keys(enpi.matchedResources)[0]];return 1===enpi.matchedResources.length?firstResource.name:1===firstResource.resourceType?"Some Spaces":"Some Assets"}return"---"},getCategoryName:function(categoryId){if(categoryId>0&&this.assetCategoryList){var category=this.assetCategoryList.find((function(category){return category.id===categoryId}));if(category)return category.name}}}},setup_EnPIvue_type_script_lang_js=EnPIvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_EnPIvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EnPI=component.exports},
/***/585213:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewEnPI}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/new/NewEnPI.vue?vue&type=template&id=34932632
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog50 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"newenpi"}},[_c("el-form",{ref:"meterForm",staticClass:"fc-form",attrs:{model:_vm.newenpi,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?_vm.$t("setup.list.new"):_vm.$t("maintenance.pm_list.edit"))+" ENPI DEFINITION ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("div",{staticClass:"body-scroll"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" ENPI "+_vm._s(_vm.$t("common.roles.name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:"Enter EnPI Name"},model:{value:_vm.newenpi.name,callback:function($$v){_vm.$set(_vm.newenpi,"name",$$v)},expression:"newenpi.name"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.site_description"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:_vm.$t("common._common.enter_desc"),resize:"none"},model:{value:_vm.newenpi.description,callback:function($$v){_vm.$set(_vm.newenpi,"description",$$v)},expression:"newenpi.description"}})],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt mT10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.type"))+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.isNew,label:"space",value:"space"},model:{value:_vm.enpiType,callback:function($$v){_vm.enpiType=$$v},expression:"enpiType"}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.space")))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{disabled:!_vm.isNew,label:"asset",value:"asset"},model:{value:_vm.enpiType,callback:function($$v){_vm.enpiType=$$v},expression:"enpiType"}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.asset")))])],1)],1),_c("el-row",{staticClass:"mT30",attrs:{gutter:20}},["asset"===_vm.enpiType?[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.site_category"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:!_vm.isNew,filterable:"",placeholder:"Select Category"},model:{value:_vm.newenpi.assetCategoryId,callback:function($$v){_vm.$set(_vm.newenpi,"assetCategoryId",$$v)},expression:"newenpi.assetCategoryId"}},_vm._l(_vm.assetCategory,(function(category,index){return _c("el-option",{key:index,attrs:{label:category.displayName,value:parseInt(category.id)}})})),1)],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Asset(s)")]),_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{disabled:""},model:{value:_vm.resourceLabel,callback:function($$v){_vm.resourceLabel=$$v},expression:"resourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.isNew&&(_vm.chooserVisibility=!0)}},slot:"suffix"})])],1)]:_c("el-col",{attrs:{span:12}},[[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.space"))+" ")]),_c("el-input",{staticClass:"mT10 fc-input-full-border2",attrs:{disabled:!_vm.isNew,type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.resourceQuery=_vm.selectedResourceName,_vm.chooserVisibility=!0}},model:{value:_vm.selectedResourceName,callback:function($$v){_vm.selectedResourceName=$$v},expression:"selectedResourceName"}},[_c("i",{staticClass:"el-input__icon el-icon-search enpi-icon-search",attrs:{slot:"suffix",disabled:!_vm.isNew},on:{click:function($event){_vm.isNew&&(_vm.chooserVisibility=!0)}},slot:"suffix"})])]],2)],2),_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt mT30"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.site_freq"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Choose Frequency",disabled:!_vm.isNew},model:{value:_vm.newenpi.frequency,callback:function($$v){_vm.$set(_vm.newenpi,"frequency",$$v)},expression:"newenpi.frequency"}},_vm._l(_vm.frequencyTypes,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-input-label-txt mT30"},[_vm._v(" "+_vm._s(_vm.$t("commissioning.sheet.header_unit"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",placeholder:"Enter Unit"},model:{value:_vm.formulaFieldUnit,callback:function($$v){_vm.formulaFieldUnit=$$v},expression:"formulaFieldUnit"}})],1)],1),_c("div",{staticClass:"mT40"},[_c("f-formula-builder",{attrs:{isNew:_vm.isNew,module:"enpi",assetCategory:{id:_vm.newenpi.assetCategoryId}},model:{value:_vm.newenpi.workflow,callback:function($$v){_vm.$set(_vm.newenpi,"workflow",$$v)},expression:"newenpi.workflow"}})],1),_c("f-safe-limit",{ref:"safelimit",attrs:{edit:!this.isNew},model:{value:_vm.newenpi.readingField,callback:function($$v){_vm.$set(_vm.newenpi,"readingField",$$v)},expression:"newenpi.readingField"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm("meterForm")}}},[_vm._v(_vm._s(_vm.saving?_vm.$t("maintenance._workorder.saving"):_vm.$t("maintenance._workorder.save"))+" ")])],1)]),_vm.newenpi.assetCategoryId>0?_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,query:_vm.resourceQuery,showAsset:!0,disable:!0,hideBanner:!0},on:{associate:_vm.associateResource,"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_c("space-asset-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:{},query:_vm.resourceQuery,showAsset:"asset"===_vm.enpiType,picktype:_vm.enpiType},on:{associate:_vm.associateResource,"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1)])},staticRenderFns=[],esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),FFormulaBuilder=(__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(902294)),SpaceAssetChooser=__webpack_require__(372587),SpaceAssetMultiChooser=__webpack_require__(673362),FSafeLimit=__webpack_require__(706512),vuex_esm=__webpack_require__(420629),NewEnPIvue_type_script_lang_js={props:["isNew","enpi","visibility"],data:function(){return{saving:!1,formulaFieldUnit:"",enpiType:"space",newenpi:{name:"",description:"",resourceId:null,frequency:null,triggerType:1,formulaFieldType:1,resourceType:1,resultDataType:3,workflow:{},assetCategoryId:null,includedResources:[],readingField:{safeLimitId:-1,raiseSafeLimitAlarm:!1,displayName:"",dataType:1,lesserThan:null,greaterThan:null,betweenTo:null,betweenFrom:null,safeLimitPattern:"none",safeLimitSeverity:"Minor"}},selectedResourceName:null,selectedResourceList:null,resourceQuery:null,chooserVisibility:!1}},components:{FFormulaBuilder:FFormulaBuilder/* default */.Z,SpaceAssetChooser:SpaceAssetChooser/* default */.Z,SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,FSafeLimit:FSafeLimit/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{frequencyTypes:function(){var types=this.$helpers.cloneObject(this.$constants.FACILIO_FREQUENCY);return types["8"]="Hourly",types},resourceData:function(){var resourceData={};return this.newenpi.assetCategoryId>0&&(resourceData.assetCategory=this.newenpi.assetCategoryId),this.newenpi.includedResources&&this.newenpi.includedResources.length&&(resourceData.isIncludeResource=!0,resourceData.selectedResources=this.newenpi.includedResources.map((function(resource){return{id:resource}}))),resourceData},dummyAssetValue:function(){return this.resourceLabel?[1]:[]},resourceLabel:function(){var _this=this;if(this.newenpi.assetCategoryId>0){var message,category=this.assetCategory.filter((function(d){return d.id===_this.newenpi.assetCategoryId})),selectedCount=0;if(this.newenpi.includedResources&&(selectedCount=this.newenpi.includedResources.length),selectedCount){if(1===selectedCount)return this.newenpi.includedResources[0].name;message=selectedCount+" "+category[0].name+(selectedCount>1?"s":"")}else message="All "+category[0].name+"s selected";return message}return this.selectedResourceName}}),mounted:function(){this.isNew?this.isNew&&"undefined"!==typeof this.enpi&&0!==Object.keys(this.enpi).length&&(
// saving regression expressions
this.newenpi=this.$helpers.cloneObject(this.enpi),this.selectedResourceName=this.enpi.matchedResources[0].name,delete this.newenpi.matchedResources):(this.newenpi=this.$helpers.cloneObject(this.enpi),this.selectedResourceName=this.enpi.matchedResources[0].name,this.formulaFieldUnit=this.enpi.readingField.unit,-1===this.enpi.assetCategoryId&&(this.newenpi.assetCategoryId=null),this.enpiType=1===this.enpi.matchedResources[0].resourceType?"space":"asset")},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity")},methods:{submitForm:function(meterForm){var _this2=this,self=this;this.$refs[meterForm].validate((function(valid){if(!valid)return!1;var fieldReadingRules=[];fieldReadingRules.push(_this2.$common.getSafeLimitRules(_this2.newenpi.readingField,_this2.newenpi.assetCategoryId));var url="/reading/addformula",objToSave=_this2.$helpers.cloneObject(_this2.newenpi);
// this.newenpi.interval = 60
objToSave.assetCategoryId>0?(objToSave.resourceType=6,delete objToSave.resourceId):(objToSave.resourceType=1,delete objToSave.assetCategoryId);var param={formula:objToSave,fieldReadingRules:fieldReadingRules,formulaFieldUnit:_this2.formulaFieldUnit};if(_this2.isNew&&(param.formula.interval=60),!_this2.isNew){var delReadingRulesIds=[];_this2.newenpi.readingField&&"none"===_this2.newenpi.readingField.safeLimitPattern&&_this2.newenpi.readingField.safeLimitId&&-1!==_this2.newenpi.readingField.safeLimitId&&delReadingRulesIds.push(_this2.newenpi.readingField.safeLimitId),url="/reading/updateformula",objToSave=_this2.$helpers.compareObject(objToSave,_this2.enpi),objToSave.id=_this2.enpi.id,
// param=  {formula: self.newenpi}
param={formula:objToSave,moduleId:_this2.enpi.moduleId,formulaFieldUnit:_this2.formulaFieldUnit,delReadingRulesIds:delReadingRulesIds,fieldReadingRules:fieldReadingRules}}
/* let newenpi = {}
          newenpi.enpi = {
            name: enpi.name,
            description: enpi.description,
            frequency: enpi.frequency
          }
          // if (this.newenpi.frequency === 1) {
          //   newenpi.enpi.schedule = {'frequencyType': 1, 'frequency': 1, 'tim
          resultDataType: 3,es': ['00:01']}
          // }
          // else if (this.newenpi.frequency === 2) {
          //   newenpi.enpi.schedule = {'frequencyType': 3, 'frequency': 1, 'times': ['00:01']}
          // }
          // else if (this.newenpi.frequency === 3) {
          //   newenpi.enpi.schedule = {'frequencyType': 3, 'frequency': 3, 'times': ['00:01']}
          // }
          if (enpi.resourceId) {
            newenpi.enpi.resourceId = enpi.resourceId
          }
          newenpi.enpi.workflow = this.newenpi.workflow */self.saving=!0,_this2.$http.post(url,param).then((function(response){self.saving=!1,"object"===(0,esm_typeof/* default */.Z)(response.data)?(self.$message.success(self.isNew?self.$t("setup.new.new_enpi_success"):self.$t("setup.new.update_enpi_success")),self.resetForm(),self.$emit("saved"),self.$emit("update:visibility",!1)):self.$message.error(self.isNew?"EnPI addition failed":"EnPI updation failed")})).catch((function(error){self.saving=!1,self.$message.error(self.isNew?"EnPI addition failed":"EnPI updation failed")}))}))},resetForm:function(){this.newenpi={name:"",description:"",space:{id:null},frequency:null,workflow:{}}},cancel:function(){this.resetForm(),this.$emit("canceled")},save:function(){var self=this;self.saving=!0},closeDialog:function(){this.$emit("update:visibility",!1)},associateResource:function(selectedObj){this.chooserVisibility=!1,this.resourceQuery=null,this.newenpi.assetCategoryId>0?selectedObj.resourceList&&selectedObj.resourceList.length&&(this.newenpi.includedResources=selectedObj.resourceList.map((function(resource){return resource.id}))):(this.newenpi.resourceId=selectedObj.id,this.selectedResourceName=selectedObj.name)}}},new_NewEnPIvue_type_script_lang_js=NewEnPIvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(new_NewEnPIvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewEnPI=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/6074.js.map