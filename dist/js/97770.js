(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[97770,67004],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/383274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAssignment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FAssignment.vue?vue&type=template&id=3fd62ade
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showRecommendedUsers&&"view"===_vm.viewtype?_c("el-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",attrs:{"popper-class":"fc-popover-p02 fc-assignment-popover-height",placement:"bottom",width:"320",trigger:"click"},on:{show:function($event){return _vm.loadrecommendedUsers()}}},[_c("div",{staticClass:"row popover-active-block",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"10px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel pointer"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",{staticClass:"fc-search-sticky"},["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"}},[_vm.recommendedUsersList.length&&"workorder"===_vm.moduleName?_c("div",[_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended_users"))+" ")]),_vm._l(_vm.recommendedUsersList,(function(recommendedUser,reusridx){return _c("div",{key:reusridx,on:{click:function($event){return _vm.assignViewWorkOrder(recommendedUser)}}},[_c("div",{staticClass:"group-item-label pointer"},[_vm._v(" "+_vm._s(recommendedUser.name)+" ( "+_vm._s(_vm.userVsTicketCountObj[recommendedUser.id])+" Tickets) ")])])}))],2):_vm._e(),"workorder"===_vm.moduleName&&_vm.recommendedUsersList.length?_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.others"))+" ")]):_vm._e(),_vm._l(_vm.userList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])}))],2):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px","padding-left":"10px"}},_vm._l(_vm.memberList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])})),0):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("div",{key:grpidx,on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticClass:"pL5",staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])]):_vm._e()})),0):_vm._e(),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("showFAssignmentPopover")],2)]):"form"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment"},[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignWorkOrder(group,grpidx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()],1):"view"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",on:{open:function($event){_vm.isPopverVisible=!0},close:function($event){_vm.isPopverVisible=!1}}},[_vm.isPopverVisible?[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()]:_vm._e()],2):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),quasar_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(641358)),vuex_esm=__webpack_require__(420629),FSearch=__webpack_require__(947748),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),FAssignmentvue_type_script_lang_js={props:{model:{},viewtype:{},record:{},form:{},siteId:{default:null},recordId:{},moduleName:{},showRecommendedUsers:{}},data:function(){return{showQuickSearch:!1,loading:!1,quickSearchQuery:null,assignmentValue:"assignmentGroup",selectedName:"",selectedGroup:"",selctedGroupMember:"",userVsTicketCountObj:{},memberList:[],typeVal:this.viewtype,workorder:null,actions:{assign:{loading:!1}},userList:[],recommendedUsersList:[],groupList:[],filtereduserList:[],filteredgroupList:[],filteredmemberList:[],isPopverVisible:!1}},components:{QPopover:quasar_esm/* QPopover */.oe,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QList:quasar_esm/* QList */.tu,FSearch:FSearch/* default */.Z},watch:{record:function(){this.loadWorkorders()},siteId:{handler:function(newVal,oldVal){var getCurrentSiteId=this.getCurrentSiteId,viewtype=this.viewtype;isEqual_default()(newVal,oldVal)||isEqual_default()(newVal,getCurrentSiteId)||isEqual_default()(viewtype,"view")||this.scopeTeamUser()},immediate:!0},isPopverVisible:function(){this.isPopverVisible&&"view"===this.viewtype&&(0,validation/* isEmpty */.xb)(this.userList)&&(0,validation/* isEmpty */.xb)(this.groupList)&&this.scopeTeamUser()},model:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var assignedTo=newVal.assignedTo,assignmentGroup=newVal.assignmentGroup,_ref=assignedTo||{},assignedToId=_ref.id,_ref2=assignmentGroup||{},assignmentGroupId=_ref2.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(this.selectedName=null),(0,validation/* isEmpty */.xb)(assignmentGroupId)&&(this.selectedGroup=null)}}}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusByLabel","getCurrentSiteId","getUser","getGroup"])),created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","workorder").then((function(){_this.loadWorkorders()}))},methods:{memberCount:function(group){var _ref3=group||{},members=_ref3.members;return(members||[]).length},loadrecommendedUsers:function(){var _this2=this;this.loading=!0,this.userVsTicketCountObj={},this.recommendedUsersList=[];var url="v2/recommended/workorder?woId=".concat(this.record.id);this.$http.get(url).then((function(response){0===response.data.responseCode&&response.data.result&&response.data.result.recommendedUsers&&response.data.result.recommendedUsers.forEach((function(element){_this2.recommendedUsersList.push(element.user),_this2.userVsTicketCountObj[element.user.id]=element.reason.no_of_tickets;for(var i=0;i<_this2.userList.length;i++)_this2.userList[i].id===element.user.id&&_this2.userList.splice(i,1)})),_this2.loading=!1})).catch((function(){
// TODO handle errors
}))},loadWorkorders:function(){var objKey="model";"view"===this.viewtype&&(objKey="record");var parent=this[objKey],_ref4=parent||{},assignedTo=_ref4.assignedTo,assignmentGroup=_ref4.assignmentGroup,_ref5=assignedTo||{},assignedToId=_ref5.id,assignedToName=_ref5.name,_ref6=assignmentGroup||{},assignmentGroupId=_ref6.id,assignmentGroupName=_ref6.name;(0,validation/* isEmpty */.xb)(assignedToName)?this.selectedName=(0,validation/* isEmpty */.xb)(assignedToId)?null:this.getUserNameFromList(assignedToId):this.selectedName=assignedToName,(0,validation/* isEmpty */.xb)(assignmentGroupName)?this.assignmentGroupName=(0,validation/* isEmpty */.xb)(assignmentGroupId)?null:this.getGroupNameFromList(assignmentGroupId):this.selectedGroup=assignmentGroupName},assignment:function(value){this.assignmentValue=value},assignWorkOrder:function(assignedObj,index,value){var isValueChanged=!1,model=this.model,$refs=this.$refs,_ref7=model||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup,_ref8=assignedObj||{},id=_ref8.id,name=_ref8.name;if("assignmentGroup"===value){var _ref9=assignmentGroup||{},assignmentGroupId=_ref9.id;(0,validation/* isEmpty */.xb)(name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(id)?null:this.getGroupNameFromList(id):this.selectedGroup=name,(0,validation/* isEmpty */.xb)(assignmentGroup)||(isValueChanged=assignmentGroupId!==id,this.$set(this.model.assignmentGroup,"id",id),this.$set(this.model.assignmentGroup,"name",name)),this.$emit("input",id),this.$emit("value",model),this.groupmemberList(index),isValueChanged&&this.$emit("onChange")}if("assignedTo"===value||"assignedToGroupMember"===value){
// get the assignedTo user and update using 'updateAssignedTo' emit.
var _ref10=assignedTo||{},assignedToId=_ref10.id;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,(0,validation/* isEmpty */.xb)(assignedTo)||(isValueChanged=assignedToId!==id,this.$set(this.model.assignedTo,"id",id),this.$set(this.model.assignedTo,"name",name)),this.$emit("input",id),this.$emit("value",model),$refs["assignedtopopover"]&&$refs["assignedtopopover"].close(),isValueChanged&&this.$emit("onChange",assignedObj)}},groupmemberList:function(groupIndex){this.assignmentValue="assignedToGroupMember",this.memberList=this.groupList[groupIndex].members,this.selectedName=null},assignViewWorkOrder:function(assignedTo,assignmentGroup,index){var _this3=this,$refs=this.$refs,record=this.record,assignObj={},moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref11=moduleState||{},statusId=_ref11.id,_ref12=record||{},recordId=_ref12.id;if(assignObj.id=[recordId],assignedTo){assignObj.assignedTo=assignedTo;var _ref13=assignedTo||{},id=_ref13.id,name=_ref13.name;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,$refs["assignedtopopover"]&&$refs["assignedtopopover"].close()}if(assignmentGroup){assignObj.assignmentGroup=assignmentGroup;var _ref14=assignmentGroup||{},_id=_ref14.id,_name=_ref14.name;(0,validation/* isEmpty */.xb)(_name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(_id)?null:this.getGroupNameFromList(_id):this.selectedGroup=_name,this.groupmemberList(index)}assignObj.status={id:statusId,status:"Assigned"},this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this3.$emit("assignactivity",assignObj),_this3.$dialog.notify(_this3.$t("common.products.workorder_assigned_successfully"))}))},scopeTeamUser:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,siteId,_yield$API$post,data,error,_ref15,groups,users;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={},siteId=_this4.siteId,siteId&&(params.siteId=siteId),_context.next=5,api/* API */.bl.post("v3/group/scopeBySite",params);case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref15=data||{},groups=_ref15.groups,users=_ref15.users,_this4.userList=users||[],_this4.groupList=groups||[]);case 9:case"end":return _context.stop()}}),_callee)})))()},removeTeamWO:function(assignValue){var _assignObj,_this5=this,record=this.record,_ref16=record||{},recordId=_ref16.id,moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref17=moduleState||{},statusId=_ref17.id,assignObj=(_assignObj={id:[recordId]},(0,defineProperty/* default */.Z)(_assignObj,assignValue,{id:-1}),(0,defineProperty/* default */.Z)(_assignObj,"status",{id:statusId,status:"Assigned"}),_assignObj);this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this5.$emit("assignactivity",assignObj),_this5.$dialog.notify(_this5.$t("common.products.workorder_assigned_successfully"))}))},reassign:function(assignValue){var model=this.model,_ref18=model||{},assignmentGroup=_ref18.assignmentGroup,assignedTo=_ref18.assignedTo;"assignmentGroup"===assignValue&&(this.selectedGroup=null,(0,validation/* isEmpty */.xb)(assignmentGroup)||(this.$set(this.model.assignmentGroup,"id",null),this.$set(this.model.assignmentGroup,"name",null))),"assignedTo"===assignValue&&(this.selectedName=null,(0,validation/* isEmpty */.xb)(assignedTo)||(this.$set(this.model.assignedTo,"id",null),this.$set(this.model.assignedTo,"name",null)))},reassignWO:function(assignValue){"assignmentGroup"===assignValue&&(this.selectedGroup=null),"assignedTo"===assignValue&&(this.selectedName=null),this.removeTeamWO(assignValue)},getUserNameFromList:function(id){var userList=this.userList;if((0,validation/* isEmpty */.xb)(userList))return this.getUser(id).name;var user=userList.find((function(user){return user.id===id}));return(0,validation/* isEmpty */.xb)(user)?void 0:this.$getProperty(user,"name",null)},getGroupNameFromList:function(id){var _this6=this,groupList=this.groupList;if((0,validation/* isEmpty */.xb)(groupList))this.$store.dispatch("loadGroups").then((function(){return(_this6.getGroup(id)||{}).name}));else{var group=groupList.find((function(group){return group.id===id}));if(!(0,validation/* isEmpty */.xb)(group))return this.$getProperty(group,"name",null)}}}},components_FAssignmentvue_type_script_lang_js=FAssignmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAssignmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAssignment=component.exports},
/***/643821:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FCurrencyField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FCurrencyField.vue?vue&type=template&id=2f44aab8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"currencyField"},[_c("el-input",{staticClass:"input-with-select fc-input-full-border width100",attrs:{type:"number",placeholder:_vm.$t("setup.currency.enter_amount"),disabled:_vm.disabled},on:{change:_vm.handleChange},model:{value:_vm.currency.currencyValue,callback:function($$v){_vm.$set(_vm.currency,"currencyValue",$$v)},expression:"currency.currencyValue"}},[_vm.isDefaultCurrency?_c("template",{slot:"prepend"},[_c("span",[_vm._v(_vm._s(_vm.baseCurrency.symbol))])]):_c("el-select",{attrs:{slot:"prepend",disabled:_vm.isDisabled,loading:_vm.isLoading,placeholder:" "},on:{change:_vm.getExchangeRate},slot:"prepend",model:{value:_vm.currency.currencyCode,callback:function($$v){_vm.$set(_vm.currency,"currencyCode",$$v)},expression:"currency.currencyCode"}},_vm._l(_vm.allSymbols,(function(record,index){return _c("el-option",{key:index,attrs:{label:record.label,value:record.value}})})),1)],2),_c("div",{staticClass:"mT5"},[_vm.showDescription?_c("span",{staticClass:"description"},[_vm._v(_vm._s(_vm.description))]):_vm._e()])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(634338),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(990260)),CurrencyModel=__webpack_require__(579959),vuex_esm=__webpack_require__(420629),FCurrencyFieldvue_type_script_lang_js={props:["disabled","isEdit","value","field"],data:function(){return{symbol:"",exchangeRate:"",allSymbols:[],currencyList:null,isLoading:!1,loading:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account}})),{},{showDescription:function(){var currency=this.currency,baseCurrency=this.baseCurrency,_ref=currency||{},currencyCode=_ref.currencyCode,_ref2=baseCurrency||{},code=_ref2.code;return currencyCode!==code&&!this.isDefaultCurrency},description:function(){var baseCurrency=this.baseCurrency,exchangeRate=this.exchangeRate,symbol=this.symbol;return"1 ".concat(baseCurrency.symbol," = ").concat(exchangeRate," ").concat(symbol)},currency:{get:function(){var _value,field=this.field,baseCurrency=this.baseCurrency,value=this.value,_ref3=field||{},fieldValue=_ref3.value;if(value=value||fieldValue,(0,validation/* isEmpty */.xb)(value))value={currencyCode:null,currencyValue:null};else{value="string"===typeof value?JSON.parse(value):value;var _ref4=value||{},currencyValue=_ref4.currencyValue;value.currencyValue=(0,validation/* isEmpty */.xb)(currencyValue)?null:"".concat(currencyValue)}return(0,validation/* isEmpty */.xb)(null===(_value=value)||void 0===_value?void 0:_value.currencyCode)&&baseCurrency.isCurrencyEnabled&&(value.currencyCode=baseCurrency.code),value},set:function(value){var _value2;(0,validation/* isEmpty */.xb)(null===(_value2=value)||void 0===_value2?void 0:_value2.currencyValue)?(value=this.loading?null:value,this.emitValues(value)):this.emitValues(value)}},baseCurrency:function(){var _this$multiCurrency=this.multiCurrency,displaySymbol=_this$multiCurrency.displaySymbol,currencyCode=_this$multiCurrency.currencyCode,multiCurrencyEnabled=_this$multiCurrency.multiCurrencyEnabled;return{code:currencyCode,symbol:displaySymbol,isCurrencyEnabled:multiCurrencyEnabled}},isDisabled:function(){var disabled=this.disabled,isEdit=this.isEdit,currency=this.currency;return disabled||isEdit&&!(0,validation/* isEmpty */.xb)(currency.currencyValue)},isDefaultCurrency:function(){var currencyList=this.currencyList;return(0,validation/* isEmpty */.xb)(currencyList)||1===currencyList.length},multiCurrency:function(){var _ref5=this.account.data.currencyInfo||{},displaySymbol=_ref5.displaySymbol,currencyCode=_ref5.currencyCode,multiCurrencyEnabled=_ref5.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}}}),created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$currency;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_this.setCurrencyData(),_context.next=4,_this.fetchRecords();case 4:_this.getExchangeRate(),_this.loading=!1,(0,validation/* isEmpty */.xb)(null===(_this$currency=_this.currency)||void 0===_this$currency?void 0:_this$currency.currencyValue)&&(_this.currency={currencyCode:null,currencyValue:null});case 7:case"end":return _context.stop()}}),_callee)})))()},methods:{emitValues:function(value){this.$emit("input",value),this.$emit("value",value)},getCurrencyCode:function(){this.allSymbols=(this.currencyList||[]).map((function(currency){var displaySymbol=currency.displaySymbol,currencyCode=currency.currencyCode,exchangeRate=currency.exchangeRate;return{label:displaySymbol,value:currencyCode,rate:exchangeRate}}))},fetchRecords:function(){var _arguments=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return force=!(_arguments.length>0&&void 0!==_arguments[0])||_arguments[0],_this2.isLoading=!0,_context2.prev=2,_context2.next=5,CurrencyModel/* CurrencyListModel */.A.fetchAll({force:force});case 5:_this2.currencyList=_context2.sent,_this2.getCurrencyCode(),_context2.next=12;break;case 9:_context2.prev=9,_context2.t0=_context2["catch"](2),_this2.$message.error(_this2.$t("common._common.error_occured"));case 12:_this2.isLoading=!1;case 13:case"end":return _context2.stop()}}),_callee2,null,[[2,9]])})))()},getExchangeRate:function(){if(!(0,validation/* isEmpty */.xb)(this.currencyList)){var currencyCode=this.currency.currencyCode,result=this.currencyList.find((function(currency){return currency.currencyCode===currencyCode})),_ref6=result||{},exchangeRate=_ref6.exchangeRate,displaySymbol=_ref6.displaySymbol;this.exchangeRate=exchangeRate,this.symbol=displaySymbol,this.handleChange()}},setCurrencyData:function(){var field=this.field,baseCurrency=this.baseCurrency,value=this.value,_ref7=field||{},fieldValue=_ref7.value;value=value||fieldValue,this.currency={currencyCode:null,currencyValue:null},(0,validation/* isEmpty */.xb)(value)||(value="string"===typeof value?JSON.parse(value):value,value.currencyValue=(0,validation/* isEmpty */.xb)(value.currencyValue)?null:"".concat(value.currencyValue),(0,validation/* isEmpty */.xb)(value.currencyCode)&&baseCurrency.isCurrencyEnabled&&(value.currencyCode=baseCurrency.code),this.currency=value)},handleChange:function(){var _this$value;!(0,validation/* isEmpty */.xb)(null===(_this$value=this.value)||void 0===_this$value?void 0:_this$value.currencyValue)&&this.$emit("handleChange",this.currency)}}},components_FCurrencyFieldvue_type_script_lang_js=FCurrencyFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FCurrencyFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FCurrencyField=component.exports},
/***/482175:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDurationField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDurationField.vue?vue&type=template&id=1e7e910d
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex"},[_c("el-input",{staticClass:"fc-input-full-border2 input-with-select",attrs:{type:"number",disabled:_vm.isDisabled},on:{change:function($event){return _vm.handleDurationObjChange()}},model:{value:_vm.durationObj[_vm.field.selectedUnit],callback:function($$v){_vm.$set(_vm.durationObj,_vm.field.selectedUnit,$$v)},expression:"durationObj[field.selectedUnit]"}},[_c("el-select",{attrs:{slot:"append",disabled:_vm.isDisabled},on:{change:function($event){return _vm.onUnitChange.apply(void 0,arguments)}},slot:"append",model:{value:_vm.field.selectedUnit,callback:function($$v){_vm.$set(_vm.field,"selectedUnit",$$v)},expression:"field.selectedUnit"}},_vm._l(_vm.unitOptions,(function(option){return _c("el-option",{key:option.value,attrs:{label:option.label,value:option.value}})})),1)],1),_c("el-input",{staticClass:"fc-input-full-border2 secondary-field",attrs:{type:"number",disabled:_vm.isDisabled},on:{change:function($event){return _vm.handleDurationObjChange()}},model:{value:_vm.durationObj[_vm.secondaryUnitObj.value],callback:function($$v){_vm.$set(_vm.durationObj,_vm.secondaryUnitObj.value,$$v)},expression:"durationObj[secondaryUnitObj.value]"}},[_c("span",{staticClass:"pR10 fc-grey6 f12 line-height40",attrs:{slot:"suffix"},slot:"suffix"},[_vm._v(_vm._s(_vm.secondaryUnitObj.label))])])],1)},staticRenderFns=[],validation=__webpack_require__(990260),utility_methods=__webpack_require__(555005),FDurationFieldvue_type_script_lang_js={props:["field","isDisabled","value"],data:function(){return{durationObj:{days:0,hours:0,minutes:0,seconds:0},unitOptions:[{label:"Days",value:"days"},{label:"Hours",value:"hours"}]}},computed:{secondaryUnitObj:function(){var field=this.field,selectedUnit=field.selectedUnit;return"days"===selectedUnit?{label:"Hours",value:"hours"}:{label:"Minutes",value:"minutes"}}},watch:{field:{handler:function(){var field=this.field,value=field.value;this.deserializeDurationField(value)},immediate:!0,deep:!0},value:{handler:function(val){this.deserializeDurationField(val)},immediate:!0}},methods:{deserializeDurationField:function(value){if(!(0,validation/* isEmpty */.xb)(value)){var durationObj=this.$helpers.getDuration(value,"seconds",1),_durationObj$Days=durationObj.Days,Days=void 0===_durationObj$Days?0:_durationObj$Days,_durationObj$Hrs=durationObj.Hrs,Hrs=void 0===_durationObj$Hrs?0:_durationObj$Hrs,_durationObj$Mins=durationObj.Mins,Mins=void 0===_durationObj$Mins?0:_durationObj$Mins,_durationObj$Secs=durationObj.Secs,Secs=void 0===_durationObj$Secs?0:_durationObj$Secs,selectedUnit=0===Days?"hours":"days";this.$set(this,"durationObj",{days:Days,hours:Hrs,minutes:Mins,seconds:Secs}),this.$set(this.field,"selectedUnit",selectedUnit)}},onUnitChange:function(value){var durationObj=this.durationObj,days=durationObj.days,hours=durationObj.hours,minutes=durationObj.minutes,seconds=durationObj.seconds;"days"===value?(minutes=0,seconds=0):"hours"===value&&(days=0,seconds=0),this.$set(this,"durationObj",{days:days,hours:hours,minutes:minutes,seconds:seconds})},handleDurationObjChange:function(){var durationObj=this.durationObj,days=durationObj.days,hours=durationObj.hours,minutes=durationObj.minutes,seconds=durationObj.seconds,formatedDuration=(0,utility_methods/* durationToSeconds */.Ro)({seconds:seconds,minutes:minutes,hours:hours,days:days});this.setFieldValue(formatedDuration)},setFieldValue:function(formatedDuration){this.$set(this.field,"value",formatedDuration),this.$emit("updateDurationValue",this.field,formatedDuration),this.$emit("input",formatedDuration)}}},components_FDurationFieldvue_type_script_lang_js=FDurationFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDurationFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDurationField=component.exports},
/***/212468:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FEmailField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FEmailField.vue?vue&type=template&id=3f63c35a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.inputPlaceholder,disabled:_vm.isDisabled},on:{change:_vm.handleChange},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}})},staticRenderFns=[],validation=(__webpack_require__(634338),__webpack_require__(990260)),FEmailFieldvue_type_script_lang_js={props:["isDisabled","isEdit","value","field"],data:function(){return{}},computed:{modelValue:{get:function(){return this.value},set:function(value){this.$emit("input",value)}},inputPlaceholder:function(){var _this$field;return"".concat(this.$t("forms.field_permission.input_value")," ").concat(null===(_this$field=this.field)||void 0===_this$field?void 0:_this$field.displayName)}},methods:{handleChange:function(){var _ref=this||{},value=_ref.value;(0,validation/* isEmpty */.xb)(value)||this.$emit("change",value)}}},components_FEmailFieldvue_type_script_lang_js=FEmailFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FEmailFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FEmailField=component.exports},
/***/794948:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FFileUpload}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FFileUpload.vue?vue&type=template&id=e533b9a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-img-container"},[_vm.imgUrl&&!_vm.isFileType?_c("div",{staticClass:"photo-container"},[_c("img",{staticClass:"f-img",attrs:{src:_vm.imgUrl}}),_vm.isDisabled||_vm.isUploading?_vm._e():_c("div",{staticClass:"f-img-delete",on:{click:function($event){return _vm.removeFile(_vm.field)}}},[_c("inline-svg",{staticClass:"f-delete",attrs:{src:"svgs/delete",iconClass:"icon icon-sm"}})],1)]):_vm.isFileType&&_vm.fileObject?_c("div",{staticClass:"fc-attachments"},[_c("div",{staticClass:"fc-attachment-row d-flex"},[_c("div",{staticClass:"attached-files"},[_c("div",{staticClass:"mB10"},[_vm._v(_vm._s(_vm.fileObject.name))]),_vm.$validation.isEmpty(_vm.fileObject.size)||_vm.preview?_vm._e():_c("div",{staticClass:"attached-file-size"},[_vm._v(" "+_vm._s(_vm._f("prettyBytes")(_vm.fileObject.size))+" ")])]),_c("div",{staticClass:"d-flex mL-auto"},[_vm.isUploading?_c("spinner",{attrs:{show:_vm.isUploading,size:"30"}}):_vm._e(),_vm.isDisabled||_vm.isUploading?_vm._e():_c("i",{staticClass:"el-icon-delete pointer attachment-delete",on:{click:function($event){return _vm.removeFile(_vm.field)}}})],1)])]):_c("div",{staticClass:"f-img-empty"},[_vm.showWebCamPhoto&&!_vm.isFileType?_c("div",{staticClass:"f-add-photo",on:{click:_vm.openPhoto}},[_c("inline-svg",{staticClass:"camera-icon self-center",attrs:{src:"svgs/camera",iconClass:"icon icon-xxl"}}),_c("div",{staticClass:"self-center"},[_c("p",{staticClass:"help-text"},[_vm._v(_vm._s(_vm.$t("common.attachment_form.add_photo")))])])],1):_vm._e(),_vm.showWebCamPhoto&&!_vm.isFileType?_c("div",{staticClass:"f-img-separator justify-center d-flex"},[_c("span",{staticClass:"self-center"},[_vm._v(_vm._s(_vm.$t("common.text.or")))])]):_vm._e(),_c("el-upload",{staticClass:"f-img-upload",attrs:{action:"","show-file-list":!1,"http-request":function(event){return _vm.uploadFile(_vm.field,event)},"on-remove":_vm.removeFile,"before-upload":_vm.beforeUpload,disabled:_vm.isDisabled,drag:""}},[_vm.isPlaceHolderAvailable?_vm._t("placeHolderSlot"):_c("div",{staticClass:"d-flex flex-direction-column"},[_c("inline-svg",{staticClass:"folder-icon self-center",attrs:{src:"svgs/folder",iconClass:"icon icon-xxl"}}),_c("div",{staticClass:"self-center"},[_c("p",{staticClass:"help-text"},[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_drop_text"))+" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])],1)],2)],1),_vm.isUploading&&!_vm.isFileType?_c("div",{staticClass:"mT10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uploading"))+" ")]):_vm._e(),_vm.showPhotoContainer?_c("div",[_c("el-dialog",{staticClass:"f-img-webcam",attrs:{visible:_vm.showPhotoContainer,width:"650px","append-to-body":!0,"show-close":!1,"before-close":_vm.closeDialogBox},on:{"update:visible":function($event){_vm.showPhotoContainer=$event}}},[_c("div",{staticClass:"height400"},[_c("video",{ref:"player",attrs:{autoplay:""}}),_c("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{width:"320",height:"240"}})]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.captureImg()}}},[_vm._v("Save Photo")])],1)])],1):_vm._e()])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(169358),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),Spinner=__webpack_require__(604947),uuid=__webpack_require__(455877),FFileUploadvue_type_script_lang_js={name:"FFileUpload",components:{Spinner:Spinner/* default */.Z},props:["field","showWebCamPhoto","isDisabled","imgContentUrl","isFileType","fileObj","additionalFileFormat","isV3Api","isSaveBtnDisabled","addImgFile","preview"],data:function(){return{showPhotoContainer:!1,authorizeImageFormats:["image/jpeg","image/png","image/jpg"],isUploading:!1,skipDefault:!1}},computed:{imgUrl:{get:function(){return this.imgContentUrl},set:function(value){this.$emit("update:imgContentUrl",value)}},fileObject:{get:function(){var fileObj=this.fileObj,defaultFileObject=this.defaultFileObject,skipDefault=this.skipDefault;return(0,validation/* isEmpty */.xb)(defaultFileObject)||skipDefault?fileObj:defaultFileObject},set:function(value){this.$emit("update:fileObj",value)}},defaultFileObject:function(){var field=this.field,_ref=field||{},value=_ref.value;if(!(0,validation/* isEmpty */.xb)(value)){if(!(0,validation/* isArray */.kJ)(value))try{value=JSON.parse(value)}catch(e){this.$message.warning(this.$t("common._common.error_parsing_value"))}var defaultFileObj=value[0]||{},_ref2=defaultFileObj||{},name=_ref2.fileName;return(0,validation/* isEmpty */.xb)(name)?null:{name:name}}return null},isPlaceHolderAvailable:function(){var $slots=this.$slots;return!(0,validation/* isEmpty */.xb)($slots.placeHolderSlot)}},methods:{beforeUpload:function(file){var authorizeImageFormats=this.authorizeImageFormats,isFileType=this.isFileType,additionalFileFormat=this.additionalFileFormat;if(!isFileType){(0,validation/* isEmpty */.xb)(additionalFileFormat)||(authorizeImageFormats=authorizeImageFormats.concat(additionalFileFormat));var isFileTypeAccessible=authorizeImageFormats.includes(file.type);return isFileTypeAccessible||this.$message.error("Picture must be under any of these (jpeg/png/jpg) format!"),isFileTypeAccessible}return!0},openPhoto:function(){var _this=this;if(this.hasGetUserMedia())this.showPhotoContainer=!0,this.$nextTick((function(){var player=_this.$refs.player,constraints={video:{width:{exact:600},height:{exact:350}}};navigator.mediaDevices.getUserMedia(constraints).then((function(stream){player.srcObject=stream}))}));else{var errMsg=this.$t("common.errorMsg.no_browser_support");this.$message.error(errMsg)}this.$set(this,"showPhotoContainer",!0)},hasGetUserMedia:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)},removeFile:function(field){var _ref3=field||{},value=_ref3.value;this.imgUrl=null,this.fileObject=null,(0,validation/* isEmpty */.xb)(value)||(this.skipDefault=!0),this.$emit("removeImgFile",field)},uploadFile:function(field,event){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var file,isFileType,fileReader,fileOrId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return file=event.file,isFileType=_this2.isFileType,fileReader=new FileReader,isFileType?_this2.fileObject=file:fileReader.addEventListener("load",(function(event){_this2.imgUrl=event.target.result})),fileReader.readAsDataURL(file),_context.next=7,_this2.getFileId(file);case 7:fileOrId=_context.sent,_this2.addImgFile(fileOrId,field);case 9:case"end":return _context.stop()}}),_callee)})))()},closeDialogBox:function(){var player=this.$refs.player;player.srcObject&&player.srcObject.getVideoTracks().forEach((function(track){return track.stop()})),this.showPhotoContainer=!1},captureImg:function(){var _this3=this,field=this.field,canvasElement=this.$refs.canvas,player=this.$refs.player,canvasContext=canvasElement.getContext("2d");canvasContext.drawImage(player,0,0,canvasElement.width,canvasElement.height),this.$nextTick((function(){var dataUrl=canvasElement.toDataURL("image/png");_this3.imgUrl=dataUrl,fetch(dataUrl).then((function(res){return res.blob()})).then(function(){var _ref4=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(blob){var fileOrId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return blob.name=blob.name||"file ".concat((0,uuid.v4)()),_context2.next=3,_this3.getFileId(blob);case 3:fileOrId=_context2.sent,_this3.addImgFile(fileOrId,field);case 5:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref4.apply(this,arguments)}}()),player.srcObject.getVideoTracks().forEach((function(track){return track.stop()})),_this3.showPhotoContainer=!1}))},getFileId:function(file){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var fileId,_yield$API$uploadFile,ids,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.$emit("update:isSaveBtnDisabled",!0),_this4.isUploading=!0,_context3.next=4,api/* API */.bl.uploadFiles([file]);case 4:return _yield$API$uploadFile=_context3.sent,ids=_yield$API$uploadFile.ids,error=_yield$API$uploadFile.error,error?_this4.$message.error(error.message||"Error Occured"):fileId=(0,validation/* isEmpty */.xb)(ids)?null:ids[0],_this4.isUploading=!1,_this4.$emit("update:isSaveBtnDisabled",!1),_context3.abrupt("return",fileId);case 11:case"end":return _context3.stop()}}),_callee3)})))()}}},components_FFileUploadvue_type_script_lang_js=FFileUploadvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FFileUploadvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FFileUpload=component.exports},
/***/766188:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLocationPickerDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FLocationPickerDialog.vue?vue&type=template&id=5bcba4fb
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.dialogVisibility?_c("el-dialog",{attrs:{visible:_vm.dialogVisibility,"append-to-body":!0,"before-close":_vm.closeDialog,"custom-class":_vm.customClass?_vm.customClass:"width60 map-location-dialog",title:_vm.title?_vm.title:_vm.$t("space.sites.location_picker")},on:{"update:visible":function($event){_vm.dialogVisibility=$event}}},[_c("div",{staticClass:"pB50"},[_c("FLocationPicker",{ref:"location-picker",attrs:{model:_vm.model}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveLocation}},[_vm._v(_vm._s(_vm.$t("common._common.done")))])],1)]):_vm._e()},staticRenderFns=[],FLocationPickervue_type_template_id_7e8f6ee4_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("gmap-autocomplete",{staticClass:"f-location-autofill-input",attrs:{placeholder:"Search Google Maps",fields:["address_components","geometry"]},on:{place_changed:_vm.setPlace}}),_c("Gmap-Map",{ref:"mapView",class:_vm.customClass?_vm.customClass:"width100 height400",attrs:{zoom:11,center:_vm.center,options:_vm.options?_vm.options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,disableDefaultUI:!0}},on:{click:_vm.setLocation}},[_vm.place?_c("Gmap-Marker",{attrs:{draggable:"",position:{lat:_vm.place.lat,lng:_vm.place.lng}},on:{dragend:_vm.setLocation}}):_vm._e()],1)],1)},FLocationPickervue_type_template_id_7e8f6ee4_staticRenderFns=[],validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(990260)),gMapsVsFacilioAddressFieldMap={route:"street",locality:"city",administrative_area_level_1:"state",postal_code:"zip",country:"country"},FLocationPickervue_type_script_lang_js={props:["model","customClass","fillAddress","options"],data:function(){return{place:null,center:{lat:40.712776,lng:-74.005974}}},mounted:function(){var _this=this;(0,validation/* isEmpty */.xb)(this.model)||(0,validation/* isEmpty */.xb)(this.model.lat)&&(0,validation/* isEmpty */.xb)(this.model.lng)||(this.place=this.$helpers.cloneObject(this.model),this.$refs.mapView.$mapPromise.then((function(){_this.panTo()})))},methods:{getChoosenLocation:function(){return(0,validation/* isEmpty */.xb)((this.model||{}).id)||this.$setProperty(this.place,"id",this.model.id),this.place},setPlace:function(place){(0,validation/* isEmpty */.xb)(place)||(this.place={lat:place.geometry.location.lat(),lng:place.geometry.location.lng()},this.fillAddress&&!(0,validation/* isEmpty */.xb)((place||{}).address_components)&&(0,validation/* isArray */.kJ)(place.address_components)&&this.fillAddressInModel(place.address_components),this.panTo())},panTo:function(){(0,validation/* isEmpty */.xb)(this.$refs.mapView)||(0,validation/* areValuesEmpty */.sD)(this.place)||this.$refs.mapView.panTo(this.place)},setLocation:function(value){(0,validation/* isEmpty */.xb)(value)||(this.place={lat:value.latLng.lat(),lng:value.latLng.lng()})},fillAddressInModel:function(addressComponents){var _this2=this;addressComponents.forEach((function(level){var addressType=_this2.$getProperty(level,["types",0]);gMapsVsFacilioAddressFieldMap[addressType]&&_this2.$setProperty(_this2.place,"".concat(gMapsVsFacilioAddressFieldMap[addressType]),level.long_name||level.short_name)}))}}},components_FLocationPickervue_type_script_lang_js=FLocationPickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FLocationPickervue_type_script_lang_js,FLocationPickervue_type_template_id_7e8f6ee4_render,FLocationPickervue_type_template_id_7e8f6ee4_staticRenderFns,!1,null,null,null)
/* harmony default export */,FLocationPicker=component.exports,FLocationPickerDialogvue_type_script_lang_js={props:["title","customClass","model","dialogVisibility"],components:{FLocationPicker:FLocationPicker},methods:{closeDialog:function(){this.$emit("update:dialogVisibility",!1)},saveLocation:function(){var location=this.$refs["location-picker"].getChoosenLocation();this.$emit("updateLocation",location),this.closeDialog()}}},components_FLocationPickerDialogvue_type_script_lang_js=FLocationPickerDialogvue_type_script_lang_js,FLocationPickerDialog_component=(0,componentNormalizer/* default */.Z)(components_FLocationPickerDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLocationPickerDialog=FLocationPickerDialog_component.exports},
/***/533206:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewCurrencyField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FNewCurrencyField.vue?vue&type=template&id=7f731036
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fNewCurrencyField d-flex"},[_c("div",{staticClass:"width100"},[_vm.isLineItem?[_c("FSelectCurrencyField",{attrs:{isDisabled:_vm.isDisabled,isLoading:_vm.isLoading,allSymbols:_vm.allSymbols,isLineItem:!0},model:{value:_vm.currencyCode,callback:function($$v){_vm.currencyCode=$$v},expression:"currencyCode"}})]:_c("el-input",{staticClass:"input-with-select fc-input-full-border width100",attrs:{type:"number",placeholder:_vm.$t("setup.currency.enter_amount"),disabled:_vm.disabled},on:{change:_vm.handleChange},model:{value:_vm.currencyValue,callback:function($$v){_vm.currencyValue=$$v},expression:"currencyValue"}},[_vm.isDefaultCurrency||_vm.hideCurrency?_c("template",{slot:"prepend"},[_c("span",[_vm._v(_vm._s(_vm.baseCurrency.symbol))])]):_c("FSelectCurrencyField",{attrs:{slot:"prepend",isDisabled:_vm.isDisabled,isLoading:_vm.isLoading,allSymbols:_vm.allSymbols},slot:"prepend",model:{value:_vm.currencyCode,callback:function($$v){_vm.currencyCode=$$v},expression:"currencyCode"}})],2),_vm.hideDesc?_vm._e():_c("div",{staticClass:"mT5"},[_c("span",{class:[_vm.showDescription?"description":"hideDescription"]},[_vm._v(_vm._s(_vm.description)+" ")])])],2)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),toConsumableArray=__webpack_require__(488478),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(634338),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),CurrencyUtil=__webpack_require__(15426),FSelectCurrencyFieldvue_type_template_id_6dc8a954_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-select",{class:[_vm.isLineItem&&"currencySelect-lineItem"],attrs:{disabled:_vm.isDisabled,loading:_vm.isLoading,"popper-class":"fCurrencyCodeList"},model:{value:_vm.currencyCode,callback:function($$v){_vm.currencyCode=$$v},expression:"currencyCode"}},_vm._l(_vm.allSymbolsList,(function(record,index){return _c("el-option",{key:index,attrs:{label:record.label,value:record.value,disabled:record.disabled}},[_vm._v(" "+_vm._s(record.displayName)+" ")])})),1)},FSelectCurrencyFieldvue_type_template_id_6dc8a954_staticRenderFns=[],FSelectCurrencyFieldvue_type_script_lang_js={props:["value","isDisabled","isLoading","allSymbols","isLineItem"],computed:{currencyCode:{get:function(){return this.value},set:function(value){this.$emit("input",value)}},allSymbolsList:function(){var text=this.$t("common.products.change_currency_text");return[{displayName:text,disabled:!0}].concat((0,toConsumableArray/* default */.Z)(this.allSymbols||[]))}}},components_FSelectCurrencyFieldvue_type_script_lang_js=FSelectCurrencyFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSelectCurrencyFieldvue_type_script_lang_js,FSelectCurrencyFieldvue_type_template_id_6dc8a954_render,FSelectCurrencyFieldvue_type_template_id_6dc8a954_staticRenderFns,!1,null,null,null)
/* harmony default export */,FSelectCurrencyField=component.exports,vue_runtime_esm=__webpack_require__(720144),FNewCurrencyFieldvue_type_script_lang_js={components:{FSelectCurrencyField:FSelectCurrencyField},props:["disabled","isEdit","value","field","moduleData","hideCurrency","isLineItem","initialCurrency","isSubform","hideDesc"],data:function(){return{symbol:"",exchangeRate:"",allSymbols:[],isLoading:!1,loading:!1,currentCurrencyCode:null,currentCurrency:{},initialCurrencyCode:null,currencyList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencies:function(state){return state.activeCurrencies}})),{},{showDescription:function(){var currencyCode=this.currencyCode,baseCurrency=this.baseCurrency,_ref=baseCurrency||{},code=_ref.code;return currencyCode!==code&&!this.isDefaultCurrency},description:function(){var baseCurrency=this.baseCurrency,exchangeRate=this.exchangeRate,symbol=this.symbol;return"1 ".concat(baseCurrency.symbol," = ").concat(exchangeRate," ").concat(symbol)},currencyValue:{get:function(){return(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(this.value,this.currentCurrency)},set:function(value){value=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(value,this.currentCurrency),this.$emit("input",value),this.$emit("value",value)}},currencyCode:{get:function(){var defaultUserCurrency=vue_runtime_esm["default"].cookie.get("userCurrency")||null,moduleData=this.moduleData,currentCurrencyCode=this.currentCurrencyCode,code=(null===moduleData||void 0===moduleData?void 0:moduleData.currencyCode)||null;return code==currentCurrencyCode||(0,validation/* isEmpty */.xb)(currentCurrencyCode)?code||defaultUserCurrency||this.baseCurrency.code:currentCurrencyCode},set:function(value){this.currentCurrencyCode=value}},baseCurrency:function(){var _this$multiCurrency=this.multiCurrency,displaySymbol=_this$multiCurrency.displaySymbol,currencyCode=_this$multiCurrency.currencyCode,multiCurrencyEnabled=_this$multiCurrency.multiCurrencyEnabled;return{code:currencyCode,symbol:displaySymbol,isCurrencyEnabled:multiCurrencyEnabled}},isDisabled:function(){return this.disabled},isDefaultCurrency:function(){var currencyList=this.currencyList,filteredCurrencyList=this.filteredCurrencyList;return(0,validation/* isEmpty */.xb)(currencyList)||1===currencyList.length||1===(null===filteredCurrencyList||void 0===filteredCurrencyList?void 0:filteredCurrencyList.length)},multiCurrency:function(){var _ref2=this.$getProperty(this.account,"data.currencyInfo")||{},displaySymbol=_ref2.displaySymbol,currencyCode=_ref2.currencyCode,multiCurrencyEnabled=_ref2.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}},filteredCurrencyList:function(){var moduleData=this.moduleData,currencyCode=this.currencyCode,currencyList=this.currencyList,_ref3=moduleData||{},initialCurrencyCode=_ref3.initialCurrencyCode;return initialCurrencyCode=initialCurrencyCode||currencyCode,(currencyList||[]).filter((function(currency){return currency.status||currency.currencyCode===initialCurrencyCode}))}}),watch:{code:{handler:function(newVal,oldVal){newVal!==oldVal&&(this.currentCurrencyCode=newVal)}},currencyCode:{handler:function(newVal,oldVal){newVal!==oldVal&&this.getExchangeRate(!1,oldVal)}}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_context.next=3,_this.$store.dispatch("getActiveCurrencyList");case 3:_this.currencyList=(0,toConsumableArray/* default */.Z)(_this.currencies||[]),_this.$emit("setCurrencyCode",_this.currencyCode,_this.exchangeRate),_this.setInitialExchangeRate(),_this.getExchangeRate(!0),_this.getCurrencyCode(),_this.$emit("setIsDefaultCurrency",_this.isDefaultCurrency),_this.loading=!1;case 10:case"end":return _context.stop()}}),_callee)})))()},methods:{setInitialExchangeRate:function(){if(!(0,validation/* isEmpty */.xb)(this.currencyList)){var _ref4=this.initialCurrency||{},currencyCode=_ref4.currencyCode,exchangeRate=_ref4.exchangeRate;this.currencyList=(this.currencyList||[]).map((function(cur){return currencyCode===cur.currencyCode?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},cur),{},{exchangeRate:exchangeRate}):cur}))}},getCurrencyCode:function(){var _this2=this;this.allSymbols=(this.filteredCurrencyList||[]).map((function(currency){var displaySymbol=currency.displaySymbol,currencyCode=currency.currencyCode,exchangeRate=currency.exchangeRate,displayName="".concat(currencyCode," - ").concat(displaySymbol),label=_this2.isLineItem?"".concat(currencyCode," - ").concat(displaySymbol):displaySymbol;return{label:label,displayName:displayName,value:currencyCode,rate:exchangeRate}}))},getExchangeRate:function(omitCalculateExchangeRate,prevCurrencyCode){var currencyCode=this.currencyCode,currencyList=this.currencyList;if(!(0,validation/* isEmpty */.xb)(currencyList)){var _this$moduleData,result=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode}));this.currentCurrency=result,prevCurrencyCode=prevCurrencyCode||(null===(_this$moduleData=this.moduleData)||void 0===_this$moduleData?void 0:_this$moduleData.oldCurrencyCode);var previousCurrency=(this.currencyList||[]).find((function(currency){return prevCurrencyCode===currency.currencyCode})),_ref5=result||{},exchangeRate=_ref5.exchangeRate,displaySymbol=_ref5.displaySymbol;this.exchangeRate=exchangeRate,this.symbol=displaySymbol;var isBaseCurrencyCode=currencyCode===this.baseCurrency.code,isPrevBaseCurrencyCode=prevCurrencyCode===this.baseCurrency.code,oldExchangeRate=null===previousCurrency||void 0===previousCurrency?void 0:previousCurrency.exchangeRate,_ref6=this.initialCurrency||{},initCode=_ref6.currencyCode,initRate=_ref6.exchangeRate;currencyCode===initCode&&(exchangeRate=initRate||exchangeRate),!omitCalculateExchangeRate&&oldExchangeRate>0&&this.$emit("calculateExchangeRate",{exchangeRate:exchangeRate,oldExchangeRate:oldExchangeRate,isBaseCurrencyCode:isBaseCurrencyCode,isPrevBaseCurrencyCode:isPrevBaseCurrencyCode,currencyCode:currencyCode}),this.$emit("setCurrencyCode",currencyCode,exchangeRate,displaySymbol),this.isSubform&&this.$emit("setCurrencyCodeInSubform",currencyCode,exchangeRate),(0,validation/* isEmpty */.xb)(prevCurrencyCode)||currencyCode==prevCurrencyCode||this.handleChange()}},handleChange:function(){var currencyValue=this.currencyValue;(0,validation/* isEmpty */.xb)(currencyValue)||isNaN(currencyValue)||this.$emit("handleChange",currencyValue)}}},components_FNewCurrencyFieldvue_type_script_lang_js=FNewCurrencyFieldvue_type_script_lang_js,FNewCurrencyField_component=(0,componentNormalizer/* default */.Z)(components_FNewCurrencyFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewCurrencyField=FNewCurrencyField_component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/809596:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSignaturePad}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSignaturePad.vue?vue&type=template&id=52ac4aa2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"signature-container"},[_vm.imgUrl?_vm._e():_c("div",{staticClass:"btn-container"},[_vm.canShowColorPalette?_c("el-dropdown",[_c("div",{staticClass:"el-dropdown-link color-palette",attrs:{placement:"bottom-start"}},[_c("InlineSvg",{staticClass:"vertical-middle pointer d-flex",attrs:{src:"svgs/painter-palette",iconClass:_vm.getIconClassName()}})],1),_c("el-dropdown-menu",{staticClass:"color-palette-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.colorsArr,(function(color,index){return _c("div",{key:index,staticClass:"color-item",class:_vm.getClassName(color),on:{click:function($event){return _vm.changePenColor(color)}}})})),0)],1):_vm._e(),_vm.canShowRestore?_c("div",{staticClass:"restore-btn pR5 self-center",on:{click:_vm.restoreSignature}},[_vm._v(" "+_vm._s(_vm.restoreBtnTxt)+" ")]):_vm._e(),_c("div",{staticClass:"clear-btn self-center",on:{click:_vm.clearSignature}},[_vm._v(" "+_vm._s(_vm.clearBtnTxt)+" ")])],1),_vm.disabled?_c("div",{staticClass:"signature-disabled"}):_vm.imgUrl?_c("div",{staticClass:"preview-container"},[_c("div",{staticClass:"remove-sign",on:{click:_vm.clearSignature}},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:"svgs/delete",iconClass:"icon icon-sm"}})],1),_c("img",{staticClass:"width100 height-100",attrs:{src:_vm.imgUrl}})]):_vm.isLoading?_vm._e():_c("VueSignaturePad",{ref:_vm.refKey,attrs:{height:"100px",saveType:"image/"+_vm.extension,customStyle:_vm.styleObj,options:{backgroundColor:"transparent",penColor:"#"+_vm.penColor,onEnd:_vm.onEnd}}}),_vm.isUploading?_c("div",{staticClass:"mT10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.uploading"))+" ")]):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vue_signature_pad_common=__webpack_require__(408529),vue_signature_pad_common_default=__webpack_require__.n(vue_signature_pad_common),validation=__webpack_require__(990260),uuid=__webpack_require__(455877),api=__webpack_require__(32284),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),colorsArr=["000000","332AC7","EA5151","1A925E","46D0E1","C848A3"],FSignaturePadvue_type_script_lang_js={props:{model:{default:function(){}},customStyle:{type:Object},disabled:{type:Boolean,default:function(){return!1}},fileName:{type:String,default:function(){return"signature"}},isV3Api:{type:Boolean,default:function(){return!1}},imgUrl:{default:function(){return null}},restoreBtnTxt:{default:function(){return"restore"}},clearBtnTxt:{default:function(){return"clear"}},canShowColorPalette:{type:Boolean}},components:{VueSignaturePad:vue_signature_pad_common_default()},data:function(){return{styleObj:{border:"dashed 1px #e3e2e5"},isLoading:!1,isUploading:!1,initialImgUrl:null,initialImgValue:null,canShowRestore:!1,refKey:"",penColor:"000",colorsArr:[],extension:"png"}},created:function(){this.init()},methods:{init:function(){var customStyle=this.customStyle,styleObj=this.styleObj,imgUrl=this.imgUrl,model=this.model;this.colorsArr=colorsArr,this.initialImgUrl=imgUrl,this.initialImgValue=model,this.isLoading=!0,this.refKey=(0,uuid.v4)(),this.isLoading=!1,(0,validation/* isEmpty */.xb)(customStyle)||(this.styleObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},styleObj),customStyle))},getClassName:function(){var code=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"label-".concat(code)},getIconClassName:function(){var penColor=this.penColor,className=this.getClassName(penColor);return"color-palette-icon ".concat(className," icon icon-xs")},getSignatureInstance:function(){var $refs=this.$refs,refKey=this.refKey;if(!(0,validation/* isEmpty */.xb)(refKey)&&!(0,validation/* isEmpty */.xb)($refs[refKey])){var instance=$refs[refKey];return instance}return null},clearSignature:function(){var imgUrl=this.imgUrl,signatureInstance=this.getSignatureInstance();imgUrl?(this.$emit("update:imgUrl",null),this.canShowRestore=!0):(0,validation/* isEmpty */.xb)(signatureInstance)||signatureInstance.clearSignature(),this.$emit("update:model",null),this.$emit("change",null)},restoreSignature:function(){var initialImgUrl=this.initialImgUrl,initialImgValue=this.initialImgValue;this.$emit("update:model",initialImgValue),this.$emit("change",initialImgValue),this.$emit("update:imgUrl",initialImgUrl),this.canShowRestore=!1},onEnd:debounce_default()((0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var fileName,extension,signatureInstance,_signatureInstance$sa,isSignEmpty,data,fileObj,fileOrId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(fileName=this.fileName,extension=this.extension,fileName+=".".concat(extension),signatureInstance=this.getSignatureInstance(),(0,validation/* isEmpty */.xb)(signatureInstance)){_context.next=13;break}if(_signatureInstance$sa=signatureInstance.saveSignature(),isSignEmpty=_signatureInstance$sa.isEmpty,data=_signatureInstance$sa.data,fileObj=this.$helpers.dataURLtoFile(data,fileName),fileOrId=null,isSignEmpty){_context.next=11;break}return _context.next=10,this.getFileId(fileObj);case 10:fileOrId=_context.sent;case 11:this.$emit("update:model",fileOrId),this.$emit("change",fileOrId);case 13:case"end":return _context.stop()}}),_callee,this)}))),400),getFileId:function(file){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var fileId,_yield$API$uploadFile,ids;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this.$emit("update:isSaveBtnDisabled",!0),_this.isUploading=!0,_context2.next=4,api/* API */.bl.uploadFiles([file]);case 4:return _yield$API$uploadFile=_context2.sent,ids=_yield$API$uploadFile.ids,fileId=(0,validation/* isEmpty */.xb)(ids)?null:ids[0],_this.isUploading=!1,_this.$emit("update:isSaveBtnDisabled",!1),_context2.abrupt("return",fileId);case 10:case"end":return _context2.stop()}}),_callee2)})))()},changePenColor:function(color){this.penColor=color}}},components_FSignaturePadvue_type_script_lang_js=FSignaturePadvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSignaturePadvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSignaturePad=component.exports},
/***/890006:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSiteField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSiteField.vue?vue&type=template&id=aef7e964
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}}):_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:!_vm.$validation.isEmpty(_vm.isClearable)&&_vm.isClearable,"remote-method":_vm.remoteMethod,loading:_vm.loading,placeholder:"Select",disabled:_vm.disableSiteField,remote:!0},on:{change:function($event){return _vm.onSiteChange()}},model:{value:_vm.modelVal,callback:function($$v){_vm.modelVal=$$v},expression:"modelVal"}},_vm._l(_vm.sitesList,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value,"data-test-selector":""+option.label}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10 pR10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])})),1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),slicedToArray=__webpack_require__(554621),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(990260)),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),vuex_esm=__webpack_require__(420629),picklist=__webpack_require__(961358),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),FieldLoader=__webpack_require__(62979),FSiteFieldvue_type_script_lang_js={name:"FSiteField",components:{FieldLoader:FieldLoader/* default */.Z},props:["model","canDisable","isEdit","resetFields","filter","isClearable","isBuilder","field"],data:function(){return{sites:null,loading:!1,selectText:null,isLoading:!1}},computed:{modelVal:{get:function(){return this.model},set:function(value){value=(0,validation/* isEmpty */.xb)(value)?null:value,this.$emit("update:model",value),
// Have to filter the options in space asset chooser, if site is already selected.
this.$emit("update:filter",{site:Number(value)})}},currentSiteId:function(){var sitesList=this.sitesList,isBuilder=this.isBuilder,selectText=this.selectText,siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;if((0,validation/* isEmpty */.xb)(currentSiteId)&&1===sitesList.length&&!isBuilder&&(0,validation/* isEmpty */.xb)(selectText)){var _ref=sitesList||[],_ref2=(0,slicedToArray/* default */.Z)(_ref,1),site=_ref2[0],_ref3=site||{},value=_ref3.value;return value||null}return currentSiteId},isCurrentSiteSelected:function(){var currentSiteId=this.currentSiteId;return!(0,validation/* isEmpty */.xb)(currentSiteId)},disableSiteField:function(){var isCurrentSiteSelected=this.isCurrentSiteSelected,canDisable=this.canDisable,isEdit=this.isEdit;return isCurrentSiteSelected||canDisable||isEdit},sitesList:function(){var _this$sites=this.sites,sites=void 0===_this$sites?{}:_this$sites;return sites||[]}},created:function(){this.loadSites(),this.setSite(),this.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx},watch:{currentSiteId:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.setSite()},field:{handler:function(){this.loadSites()},deep:!0},modelVal:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref4,sitesList,hasValue;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_ref4=_this||{},sitesList=_ref4.sitesList,hasValue=(sitesList||[]).some((function(site){return site.value===newVal})),hasValue){_context.next=7;break}return _this.isLoading=!0,_context.next=6,_this.loadSites();case 6:_this.isLoading=!1;case 7:case"end":return _context.stop()}}),_callee)})))()}}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)(["loadSite"])),{},{loadSites:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref5,field,modelVal,params,_yield$getFieldOption,options,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref5=_this2||{},field=_ref5.field,modelVal=_ref5.modelVal,params={field:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{lookupModuleName:"site",skipDeserialize:!1})},(0,validation/* isEmpty */.xb)(modelVal)||(params["defaultIds"]=[modelVal]),_context2.next=5,(0,picklist/* getFieldOptions */._K)(params);case 5:_yield$getFieldOption=_context2.sent,options=_yield$getFieldOption.options,error=_yield$getFieldOption.error,(0,validation/* isEmpty */.xb)(error)&&(_this2.sites=options);case 9:case"end":return _context2.stop()}}),_callee2)})))()},remoteMethod:debounce_default()(function(){var _ref6=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(query){var _ref7,field,_yield$getFieldOption2,options,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return this.loading=!0,_ref7=this||{},field=_ref7.field,(0,validation/* isEmpty */.xb)(query)?this.selectText=null:this.selectText=query,_context3.next=5,(0,picklist/* getFieldOptions */._K)({field:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{lookupModuleName:"site",skipDeserialize:!1}),searchText:query});case 5:_yield$getFieldOption2=_context3.sent,options=_yield$getFieldOption2.options,error=_yield$getFieldOption2.error,(0,validation/* isEmpty */.xb)(error)&&(this.sites=options),this.loading=!1;case 10:case"end":return _context3.stop()}}),_callee3,this)})));return function(_x){return _ref6.apply(this,arguments)}}(),1e3),setSite:function(){var modelVal=this.modelVal,currentSiteId=this.currentSiteId,isEdit=this.isEdit;
// Skip setting site id for edit case
isEdit||(0,validation/* isEmpty */.xb)(currentSiteId)||Number(modelVal)===currentSiteId||(this.$set(this,"modelVal",currentSiteId),this.$emit("handleChange"))},onSiteChange:function(){
// Here model returns the previous site id
var resetFields=this.resetFields,model=this.model,siteId=(0,validation/* isEmpty */.xb)(model)?null:model;resetFields&&this.$emit("handleSiteSwitch",siteId),this.$emit("handleChange")}})},components_FSiteFieldvue_type_script_lang_js=FSiteFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSiteFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSiteField=component.exports},
/***/790142:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSubFormWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSubFormWrapper.vue?vue&type=template&id=4ab5c541&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"overflow-scroll f-subform-wrapper"},[_vm.isLoading?_c("div",[_c("div",{staticClass:"subform-wrapper-loaders"},[_c("div",{staticClass:"subform-header-loader"},[_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}})],1),_c("div",{staticClass:"subform-header-loader"},[_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}})],1),_c("div",{staticClass:"subform-header-loader"},[_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}})],1)]),_vm._l([1,2],(function(load){return _c("div",{key:load,staticClass:"subform-wrapper-loaders"},[_c("div",{staticClass:"subform-child-loader"},[_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}})],1),_c("div",{staticClass:"subform-child-loader"},[_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}})],1),_c("div",{staticClass:"subform-child-loader"},[_c("FieldLoader",{attrs:{isLoading:_vm.isLoading}})],1)])}))],2):_vm._l(_vm.subForms,(function(subForm,subFormIndex){return _c("div",{key:subFormIndex+" "+subForm.id},[_c("f-sub-form",{key:"subform "+subFormIndex+" "+subForm.id,ref:"subform "+subFormIndex+" "+subForm.id,refInFor:!0,attrs:{form:subForm,formIndex:subFormIndex,isLiveSubForm:!0,isSaving:_vm.isSaving,isFirstofType:0===subFormIndex,isLastofType:subFormIndex===_vm.subForms.length-1,canShowRemove:1!==_vm.subForms.length,isV3Api:_vm.isV3Api,parentSiteId:_vm.siteId,subFormModuleData:_vm.subFormsArr[subFormIndex].moduleData,isEdit:_vm.isEdit},on:{removeLineItem:_vm.removeSubFormSection,subFormDirtyChange:_vm.subFormDirtyChange,onModelChange:function(ref){var field=ref.field,formModel=ref.formModel;return _vm.onModelChange({field:field,formModel:formModel,subFormIndex:subFormIndex})}}})],1)}))],2),_c("div",{staticClass:"add-btn-container mT15"},[_c("el-button",{staticClass:"add-lineitem-btn",on:{click:_vm.addSubFormSection}},[_vm._v("Add Item")])],1)])},staticRenderFns=[],defineProperty=__webpack_require__(482482),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),cloneDeep=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(821057),__webpack_require__(150361)),cloneDeep_default=__webpack_require__.n(cloneDeep),validation=__webpack_require__(990260),DataCreationMixin=__webpack_require__(216758),FieldLoader=__webpack_require__(62979),FSubFormWrappervue_type_script_lang_js={mixins:[DataCreationMixin/* default */.Z],components:{FSubForm:function(){return __webpack_require__.e(/* import() */8517).then(__webpack_require__.bind(__webpack_require__,808517))},FieldLoader:FieldLoader/* default */.Z},props:["subFormsArr","isSaving","siteId","initialSubForm","isV3Api","isEdit","isLoading"],data:function(){return{dirtyRecordIds:[],deletedRecordIds:[],subFormModels:[],triggerOnLoad:!0}},computed:{subForms:{get:function(){return this.subFormsArr},set:function(value){this.$emit("update:subFormsArr",value)}},ruleFieldIds:function(){return this.$getProperty(this,"subFormsArr.0.ruleFieldIds",[])}},methods:{subFormDirtyChange:function(value){
// Records that are actually changed are tracked here, so that on edit only
// those records are sent and the sane can be used for validation,
// only interacted records should undergo validation
var dirtyRecordIds=this.dirtyRecordIds,currDirtyRecord=dirtyRecordIds.find((function(id){return id===value.id}));(0,validation/* isEmpty */.xb)(currDirtyRecord)&&!(0,validation/* isEmpty */.xb)(value.id)&&this.dirtyRecordIds.push(value.id)},onModelChange:function(props){var formModel=props.formModel,field=props.field,subFormIndex=props.subFormIndex,subFormModels=this.subFormModels,subForms=this.subForms,triggerOnLoad=this.triggerOnLoad,_ref=subFormModels||{},length=_ref.length;
// If the change is on an existing subform change that model alone
// if not we push the new model
0===length||length-1<subFormIndex?subFormModels.push(formModel):subFormModels=subFormModels.map((function(model,index){return index===subFormIndex?formModel:model})),this.subFormModels=subFormModels;
// We need to call on load rules for edit case
var triggerAddDeleteRules=!1;(0,validation/* isEmpty */.xb)(field)&&(subForms||[]).length===(subFormModels||[]).length&&(triggerAddDeleteRules=!0);
// We need to track the model that is changed, so that we
// send that to execute form rules api, therefore rule will be
// applied only for the changed model
var modifiedSubFormModel=subFormModels.map((function(model,index){return index===subFormIndex?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formModel),{},{sub_form_action:"edit"}):model}));this.$emit("onSubFormModelChange",{model:modifiedSubFormModel,subFormName:subForms[0].name,field:field,triggerAddDeleteRules:triggerAddDeleteRules,params:{subFormId:subForms[0].id},triggerOnLoad:triggerOnLoad}),triggerOnLoad&&(this.triggerOnLoad=!1)},addSubFormSection:function(){var subForms=this.subForms,initialSubForm=this.initialSubForm,ruleFieldIds=this.ruleFieldIds;if(subForms.length>24)this.$message.error("Subform records should not be greater than 25");else{var formObj=cloneDeep_default()(initialSubForm);if(!(0,validation/* isEmpty */.xb)(formObj)){formObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formObj),{},{ruleFieldIds:ruleFieldIds});var _formObj=formObj,sections=_formObj.sections;(0,validation/* isEmpty */.xb)(sections)||sections.forEach((function(section){var fields=section.fields;(0,validation/* isEmpty */.xb)(fields)||fields.forEach((function(field){"FILE"!==field.displayTypeEnum||(0,validation/* isEmpty */.xb)(field.fileObj)||(field.fileObj=null)}))})),this.$set(formObj,"sections",sections),subForms.push(formObj)}this.$set(this,"subForms",subForms)}},removeSubFormSection:function(index){var subForms=this.subForms,isEdit=this.isEdit,subFormModels=this.subFormModels,currSubForm=subForms[index]||{},recordId=this.$getProperty(currSubForm,"recordId");!(0,validation/* isEmpty */.xb)(recordId)&&isEdit&&this.deletedRecordIds.push(recordId),subForms.splice(index,1),this.$set(this,"subForms",subForms);var modifiedSubFormModel=cloneDeep_default()(subFormModels);subFormModels.splice(index,1),this.$set(this,"subFormModels",subFormModels),
// Deleted record should be denoted to the server hence that subform,
// eventhough it is deleted, we should add sub_form_action prop as delete
modifiedSubFormModel=modifiedSubFormModel.map((function(model,currIndex){return currIndex===index?{sub_form_action:"delete"}:model})),this.$emit("onSubFormModelChange",{model:modifiedSubFormModel,subFormName:subForms[0].name,field:{},triggerAddDeleteRules:!0,params:{subFormId:subForms[0].id}})},executeSubFormRules:function(subFormsRulesList){
// Here we iterate the rules array which will have length same as the
// number of sub form records.
var subForms=this.subForms,$refs=this.$refs;subFormsRulesList.forEach((function(subFormRules,index){
// Here we access each sub form component and call form rules handler
// for all the actions using refs.
var currentSubForm=subForms[index],_ref2=currentSubForm||{},formId=_ref2.id,subFormElement=$refs["subform ".concat(index," ").concat(formId)];(0,validation/* isEmpty */.xb)(subFormElement)||subFormElement[0].formRulesHandler((subFormRules||{}).actions)}))},serializeSubFormData:function(formObj,formModel){var siteId=this.siteId,isFileTypeFields=this.isFileTypeFields,sections=formObj.sections,id=formObj.id,finalObj={datum:[]};return(0,validation/* isEmpty */.xb)(sections)||sections.forEach((function(section){var fields=section.fields;(0,validation/* isEmpty */.xb)(fields)||fields.forEach((function(field){var name=field.name,fieldObj=field.field,displayTypeEnum=field.displayTypeEnum,_ref3=fieldObj||{},dataType=_ref3.dataType,value=formModel[name];if("siteId"!==name){var dataObj={name:name,value:value};isFileTypeFields.includes(displayTypeEnum)?dataObj.name="".concat(name,"Id"):(0,validation/* isObject */.Kn)(value)&&!(0,validation/* isEmpty */.xb)(value.id)&&"siteId"!==name&&(7!==dataType||fieldObj&&!fieldObj.default)&&(dataObj.value=value.id),(0,validation/* isObject */.Kn)(dataObj.value)?(0,validation/* areValuesEmpty */.sD)(dataObj.value)||(dataObj.valueMap=dataObj.value,delete dataObj.value,finalObj.datum.push(dataObj)):(0,validation/* isEmpty */.xb)(dataObj.value)||(dataObj.value=String(dataObj.value),finalObj.datum.push(dataObj))}}))})),finalObj.datum.push({name:"formId",value:id}),(0,validation/* isEmpty */.xb)(siteId)||finalObj.datum.push({name:"siteId",value:siteId}),finalObj},saveRecord:function(){var _this=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$skipDeserializ=props.skipDeserialize,skipDeserialize=void 0!==_props$skipDeserializ&&_props$skipDeserializ,_props$skipSubFormVal=props.skipSubFormValidation,skipSubFormValidation=void 0!==_props$skipSubFormVal&&_props$skipSubFormVal,subForms=this.subForms,$refs=this.$refs,isV3Api=this.isV3Api,siteId=this.siteId,dirtyRecordIds=this.dirtyRecordIds,isEdit=this.isEdit,deletedRecordIds=this.deletedRecordIds,initialSubForm=this.initialSubForm,_ref4=subForms[0]||{},module=_ref4.module,lookupFieldId=this.$getProperty(initialSubForm,"sections.0.lookupFieldId"),_ref5=module||{},moduleName=_ref5.name,promises=[],subFormData={moduleName:moduleName,data:[]},subFormDataV3Format=(0,defineProperty/* default */.Z)({},moduleName,[{fieldId:lookupFieldId,data:[],deleteIds:(0,toConsumableArray/* default */.Z)(deletedRecordIds)}]);return(0,validation/* isEmpty */.xb)(subForms)||subForms.forEach((function(subForm,index){var id=subForm.id,subFormElement=$refs["subform ".concat(index," ").concat(id)];(0,validation/* isEmpty */.xb)(subForm)||(0,validation/* isEmpty */.xb)(subFormElement)||promises.push(subFormElement[0].saveRecord({skipSubFormValidation:skipSubFormValidation}).then((function(formData){if(!(0,validation/* areValuesEmpty */.sD)(formData)){var serializedSubFormData=formData;if(isV3Api){var serializedData=_this.serializedData(subForm,formData);if(serializedData.formId=subForm.id,(0,validation/* isEmpty */.xb)(siteId)||(serializedData.siteId=siteId),isEdit){var isDirty=dirtyRecordIds.includes(subForm.recordId);(isDirty||(0,validation/* isEmpty */.xb)(subForm.recordId))&&subFormDataV3Format[moduleName][0].data.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},serializedData),{},{id:subForm.recordId}))}else subFormDataV3Format[moduleName][0].data.push(serializedData)}else skipDeserialize||(serializedSubFormData=_this.serializeSubFormData(subForm,formData)),subFormData.data.push(serializedSubFormData)}})).catch((function(){throw new Error})))})),new Promise((function(resolve,reject){Promise.all(promises).then((function(){var data=isV3Api?subFormDataV3Format:subFormData;resolve(data)})).catch((function(){reject()}))}))}}},components_FSubFormWrappervue_type_script_lang_js=FSubFormWrappervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSubFormWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,"4ab5c541",null)
/* harmony default export */,FSubFormWrapper=component.exports},
/***/172630:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FTimePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FTimePicker.vue?vue&type=template&id=16cefeb8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dropdown",{staticClass:"width100",attrs:{trigger:"click",disabled:_vm.disabled},on:{command:_vm.handleSelect},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}},[_c("el-input",{ref:"time-picker-input",staticClass:"time-picker-input fc-input-full-border-select2 width100 ",class:_vm.isError&&"time-input-error",attrs:{disabled:_vm.disabled},on:{input:_vm.formatTime},scopedSlots:_vm._u([{key:"prefix",fn:function(){return[_c("div",{staticClass:"el-input__icon el-icon-time"})]},proxy:!0},{key:"suffix",fn:function(){return[_vm.canShowSystemClear?_c("div",{staticClass:"ftime-remove-icon-alignment",on:{click:_vm.resetTimeValue}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e()]},proxy:!0}]),model:{value:_vm.inputValue,callback:function($$v){_vm.inputValue=$$v},expression:"inputValue"}}),_c("el-dropdown-menu",{staticClass:"height200 overflow-scroll",style:_vm.dropdownStyle,attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.rows,(function(row){return _c("el-dropdown-item",{key:""+row.value,attrs:{command:""+row.value}},[_vm._v(_vm._s(row.label))])})),1)],1),_c("div",{staticClass:"el-form-item-time__error"},[_vm._v(_vm._s(_vm.errMsg))])],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(322462),__webpack_require__(990260)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),utility_methods=__webpack_require__(555005),INTERVAL_HASH=["00","15","30","45"],TIME_FORMAT_HASH={"24Hour":1,"12Hour":2},FTimePickervue_type_script_lang_js={props:{value:{default:function(){return new Date}},field:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},data:function(){return{time:"",inputValue:null,debounce:debounce_default(),errMsg:"",isError:null,interval:30,dropdownStyle:""}},mounted:function(){var element=this.$refs["time-picker-input"];if(!(0,validation/* isEmpty */.xb)(element)){var width=this.$getProperty(element,"$el.clientWidth");this.dropdownStyle="width:".concat(width,"px")}},computed:{is12Hour:function(){var timeFormat=this.$getProperty(this.$account,"org.timeFormat");return timeFormat===TIME_FORMAT_HASH["12Hour"]},modelValue:{get:function(){return this.value},set:function(value){this.$emit("input",this.getFormattedTime(value))}},rows:function(){var rows=[],is12Hour=this.is12Hour,interval=this.interval;return rows=this.generateRows(is12Hour,interval),rows},canShowSystemClear:function(){var disabled=this.disabled,modelValue=this.modelValue;return!disabled&&!(0,validation/* isEmpty */.xb)(modelValue)}},watch:{value:{handler:function(val){(0,validation/* isEmpty */.xb)(val)?this.resetTimeValue():this.handleValue(val)},immediate:!0},inputValue:{handler:function(){this.errMsg="",this.isError=!1},immediate:!0}},methods:{handleValue:function(val){var _this=this,selectedTime=this.rows.find((function(row){return row.label==_this.getFormattedTime(val)}));(0,validation/* isEmpty */.xb)(selectedTime)?this.inputValue=this.getFormattedTime(val):this.inputValue=selectedTime.label,this.handleChange()},generateRows:function(is12Hour,interval){for(var rows=[],minutesInterval=30===interval?2:4,startHour=is12Hour?"12":"0",meridian=is12Hour?"AM":"",i=0
// mintuesInterval helps to decide the interval hash interval
;i<24;i++){for(var j=0;j<minutesInterval;j++){var minutes=30===interval?INTERVAL_HASH[2*j]:INTERVAL_HASH[j];rows.push({label:"".concat(startHour<10?"0":"").concat(startHour,":").concat(minutes," ").concat(meridian),value:this.getUnixTime(startHour,minutes,meridian)})}is12Hour?(startHour=(parseInt(startHour)+1)%12,0===startHour&&(startHour=12,meridian="PM")):startHour=parseInt(startHour)+1}return rows},getUnixTime:function(hours,minutes,meridian){var setHour=hours;(0,validation/* isEmpty */.xb)(meridian)||(setHour="AM"===meridian?hours:hours+12),"AM"===meridian&&12==hours?setHour=0:"PM"===meridian&&12==hours&&(setHour=12);var time=this.getTimeAsMills(setHour,minutes);return time},handleSelect:function(val){this.$emit("input",val);var selectedTime=this.rows.find((function(row){return row.value===parseInt(val)}));this.inputValue=selectedTime.label,this.handleChange()},handleChange:function(){var _ref=this||{},value=_ref.value;!(0,validation/* isEmpty */.xb)(value)&&this.$emit("change",value)},resetTimeValue:function(){this.modelValue=null,this.inputValue=null,this.handleChange(),this.$emit("input",null)},formatTime:debounce_default()((function(value){if(!(0,validation/* isEmpty */.xb)(value)){
// regex for 01:34 PM, 11:59 am
this.is12Hour||(value=value.replace(/\s/g,""));var meridianRegex=/^(0?[0-9]|1[0-9]|2[0-4]):([0-5][0-9]) ([AaPp][Mm])$/,meridianValues=value.match(meridianRegex);if((0,validation/* isEmpty */.xb)(meridianValues)){
// regex for 00:46, 22:30, 01:56
var nonMeridianRegex=/^(0?[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$/,nonMeridianValues=value.match(nonMeridianRegex);if((0,validation/* isEmpty */.xb)(nonMeridianValues))if((0,validation/* isEmpty */.xb)(nonMeridianValues)){var numberRegex=/^(0?[0-9]|1[0-9]|2[0-3])$/,colonRegex=/^(0?[0-9]|1[0-9]|2[0-3]):$/,numberPatternRegex=/^(0?[0-9]|1[0-9]|2[0-3]):([0-5])$/,numberValues=value.match(numberRegex),colonValues=value.match(colonRegex),numberPatternValues=value.match(numberPatternRegex);if((0,validation/* isEmpty */.xb)(numberPatternValues))if((0,validation/* isEmpty */.xb)(colonValues))if((0,validation/* isEmpty */.xb)(numberValues))this.isError=!0,this.errMsg=this.$t("forms.field_permission.valid_time");else{var _ref10=numberValues||[],_ref11=(0,slicedToArray/* default */.Z)(_ref10,2),_hours4=_ref11[1],_mins4=0,_updatedTime4=this.getTimeAsMills(_hours4,_mins4);_updatedTime4=moment_timezone_default()(_updatedTime4).format("x"),this.$emit("input",_updatedTime4)}else{var _ref8=colonValues||[],_ref9=(0,slicedToArray/* default */.Z)(_ref8,2),_hours3=_ref9[1],_mins3=0,_updatedTime3=this.getTimeAsMills(_hours3,_mins3);_updatedTime3=moment_timezone_default()(_updatedTime3).format("x"),this.$emit("input",_updatedTime3)}else{var _ref6=numberPatternValues||[],_ref7=(0,slicedToArray/* default */.Z)(_ref6,3),_hours2=_ref7[1],_mins2=_ref7[2],min=10*_mins2,_updatedTime2=this.getTimeAsMills(_hours2,min);_updatedTime2=moment_timezone_default()(_updatedTime2).format("x"),this.$emit("input",_updatedTime2)}}else this.isError=!0,this.errMsg=this.$t("forms.field_permission.valid_time");else{var _ref4=nonMeridianValues||[],_ref5=(0,slicedToArray/* default */.Z)(_ref4,3),_hours=_ref5[1],_mins=_ref5[2],_updatedTime=this.getTimeAsMills(_hours,_mins);_updatedTime=moment_timezone_default()(_updatedTime).format("x"),this.$emit("input",_updatedTime)}}else{var _ref2=meridianValues||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,4),hours=_ref3[1],mins=_ref3[2],meridian=_ref3[3];
// handling for cases : 16:45 PM ---> 04:45 PM , 14:22 AM ---> 02:22 PM
hours>12&&hours<=24&&(hours-=12,meridian="PM"),"0"!==hours&&"00"!==hours||(hours="00",meridian="AM"),
// we need to convert 12 AM to 24 hrs format
hours="12"===hours&&"AM"==meridian.toUpperCase()?"00":"PM"===meridian.toUpperCase()&&12!=hours?parseInt(hours)+12:hours;var updatedTime=this.getTimeAsMills(hours,mins);updatedTime=moment_timezone_default()(updatedTime).format("x"),this.$emit("input",updatedTime)}this.isDropdownVisible=!1}}),1e3),getTimeAsMills:function(hours,minutes){var seconds=0,days=0,formatedDuration=(0,utility_methods/* durationToSeconds */.Ro)({seconds:seconds,minutes:minutes,hours:hours,days:days});return 1e3*formatedDuration},getFormattedTime:function(value){var format=this.is12Hour?"hh:mm A":"  HH:mm";return this.convertMilliSecondsToTimeHHMM(value,format)},convertMilliSecondsToTimeHHMM:function(timeValue,format){var timeFieldValue=timeValue||{};return moment_timezone_default()().startOf("day").milliseconds(timeFieldValue).format(format)}}},components_FTimePickervue_type_script_lang_js=FTimePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FTimePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FTimePicker=component.exports},
/***/434500:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FWebform}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FWebform.vue?vue&type=template&id=3cc611bd
var LookUpSpecialWizardAudience_render,LookUpSpecialWizardAudience_staticRenderFns,FormComments_render,FormComments_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:_vm.$validation.isEmpty(_vm.creationWidgets)?"height-100":"d-flex"},[_c("div",{class:[!_vm.removeDefaultStyling&&"f-webform-container",_vm.$validation.isEmpty(_vm.customClass)?"":_vm.customClass]},[_c("el-form",{ref:"form",attrs:{model:_vm.formModel,rules:_vm.rules,"label-position":_vm.labelPosition}},_vm._l(_vm.form.sections,(function(section,sectionIndex){return _c("div",{key:sectionIndex,staticClass:"section-container flex-container",class:["top"===_vm.labelPosition?"pR300":"",0===sectionIndex?"":"mT20","BUDGET_AMOUNT"===_vm.$getProperty(section,["fields",0,"displayTypeEnum"])&&"budget-section-container"],style:section.hideSection||_vm.isSubForm(section)&&!_vm.showSubform(section)?"display: none;":""},[_c("div",{staticClass:"section-header form-one-column"},[section.showLabel?_c("div",{staticClass:"pT50 text-uppercase"},[_vm._v(" "+_vm._s(section.name)+" "),_c("div",{staticClass:"fc-heading-border-width43 mT15"})]):_vm._e()]),_vm.isSubForm(section)?_c("div",{staticClass:"form-one-column"},[_c("FSubFormWrapper",{key:sectionIndex+" "+section.subFormId,ref:sectionIndex+" "+section.subFormId,refInFor:!0,staticClass:"position-relative",attrs:{initialSubForm:section.subForm,siteId:_vm.selectedSiteId,subFormsArr:section.subFormsArr,isV3Api:_vm.isV3Api,isEdit:_vm.isEdit,isLoading:_vm.isLoading},on:{"update:subFormsArr":function($event){return _vm.$set(section,"subFormsArr",$event)},"update:sub-forms-arr":function($event){return _vm.$set(section,"subFormsArr",$event)},onSubFormModelChange:_vm.onSubFormModelChange}})],1):_vm._l(section.fields,(function(field,fieldIndex){return _c("div",{key:sectionIndex+" - "+fieldIndex,class:[1===field.span?"form-one-column":"form-two-column","TASKS"===field.displayTypeEnum?"task-section":"",field.hideField?"hide":""]},[_vm.isMvSection(field)?_c("el-form-item",{staticClass:"section-items",attrs:{label:field.displayName,prop:field.name,required:field.required}},["RADIO_TEMP"===field.displayTypeEnum?_c("el-radio-group",{model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{"data-test-selector":field.field.name+"_true",label:1}},[_vm._v(_vm._s(field.field.trueVal))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{"data-test-selector":field.field.name+"_false",label:0}},[_vm._v(_vm._s(field.field.falseVal))])],1):_vm._e(),"FORMULA_FIELD_TEMP"===field.displayTypeEnum?_c("f-formula-builder",{attrs:{module:"formulaField",title:"",renderInLeft:field.renderInLeft,hideModeChange:field.hideModeChange},model:{value:_vm.formModel[field.name].workflow,callback:function($$v){_vm.$set(_vm.formModel[field.name],"workflow",$$v)},expression:"formModel[field.name].workflow"}}):_vm._e(),"TEXTBOX_TEMP"===field.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border2",attrs:{"data-test-selector":""+field.name,disabled:field.isDisabled},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):_vm._e()],1):field.formulaFieldHack||["LINEITEMS","INVREQUEST_LINE_ITEMS","TASKS","SADDRESS","ADDRESS","QUOTE_ADDRESS","QUOTE_LINE_ITEMS","PERMIT_CHECKLIST","COMMUNITY_PUBLISHING","ATTACHMENT","BUDGET_AMOUNT","FACILITY_AVAILABILITY","FACILITY_BOOKING_SLOTS","NOTES"].includes(field.displayTypeEnum)?"ATTACHMENT"===field.displayTypeEnum?[_c("FormAttachments",{attrs:{formModel:_vm.formModel,attachments:_vm.attachments,field:field,labelPosition:_vm.labelPosition,isV3Api:_vm.isV3Api,clearError:_vm.clearError,disableSaveBtn:function(value){return _vm.isSaveBtnDisabled=value}},on:{updateAttachment:_vm.updateAttachment,updateFormModel:_vm.updateFormModel}})]:"SADDRESS"===field.displayTypeEnum||"ADDRESS"===field.displayTypeEnum?_c("div",[_c("f-address-field",{attrs:{model:_vm.formModel[field.name],field:field,storeRoomId:(_vm.formModel["storeRoom"]||{}).id,vendorId:(_vm.formModel["vendor"]||{}).id}})],1):"QUOTE_ADDRESS"===field.displayTypeEnum?_c("div",[_c("FQuoteAddress",{attrs:{model:_vm.formModel}})],1):"LINEITEMS"===field.displayTypeEnum?_c("div",[_c("FLineItem",{key:""+_vm.currencyDetails.currencyCode,ref:"line-item",refInFor:!0,attrs:{model:_vm.formModel,lineItems:_vm.formModel[field.name],currencyObj:_vm.currencyDetails,initialCurrency:_vm.initialCurrency,hasMultiCurrencyFieldInModel:_vm.hasMultiCurrencyFieldInModel,vendorId:(_vm.formModel["vendor"]||{}).id,field:field,isEdit:_vm.isEdit,module:_vm.module},on:{"update:model":function($event){_vm.formModel=$event},"update:lineItems":function($event){return _vm.$set(_vm.formModel,field.name,$event)},"update:line-items":function($event){return _vm.$set(_vm.formModel,field.name,$event)},calculateExchangeRate:function(rateObj){return _vm.calculateExchangeRate(rateObj)},setCurrencyCode:_vm.setCurrencyCodeOnChange}})],1):"INVREQUEST_LINE_ITEMS"===field.displayTypeEnum?_c("div",[_c("FTransferRequestLineItem",{ref:"line-item",refInFor:!0,attrs:{model:_vm.formModel,lineItems:_vm.formModel[field.name],field:field,isEdit:_vm.isEdit,module:_vm.module}})],1):"QUOTE_LINE_ITEMS"===field.displayTypeEnum?_c("div",[_c("FQuoteLineItem",{key:""+_vm.currencyDetails.currencyCode,ref:"line-item",refInFor:!0,attrs:{model:_vm.formModel,lineItems:_vm.formModel[field.name],initialCurrency:_vm.initialCurrency,currencyObj:_vm.currencyDetails,hasMultiCurrencyFieldInModel:_vm.hasMultiCurrencyFieldInModel,field:field,isEdit:_vm.isEdit,module:_vm.module},on:{"update:model":function($event){_vm.formModel=$event},"update:lineItems":function($event){return _vm.$set(_vm.formModel,field.name,$event)},"update:line-items":function($event){return _vm.$set(_vm.formModel,field.name,$event)},calculateExchangeRate:function(rateObj){return _vm.calculateExchangeRate(rateObj)},setCurrencyCode:_vm.setCurrencyCodeOnChange}})],1):"BUDGET_AMOUNT"===field.displayTypeEnum?_c("div",[_c("FBudgetAmount",{ref:"budget-amount",refInFor:!0,attrs:{model:_vm.formModel,budgetamount:_vm.formModel.budgetamount,initialCurrency:_vm.initialCurrency,currencyObj:_vm.currencyDetails,field:field},on:{"update:model":function($event){_vm.formModel=$event},calculateExchangeRate:function(rateObj){return _vm.calculateExchangeRate(rateObj)},setCurrencyCode:_vm.setCurrencyCodeOnChange}})],1):"FACILITY_AVAILABILITY"===field.displayTypeEnum?_c("div",[_c("FFacilityAvailability",{attrs:{model:_vm.formModel,moduleData:_vm.moduleData,field:field}})],1):"FACILITY_BOOKING_SLOTS"===field.displayTypeEnum?_c("div",[_c("FFacilityBookingSlots",{attrs:{model:_vm.formModel,bookingslot:_vm.formModel[field.name],field:field,facilityId:(_vm.formModel["facility"]||{}).id},on:{"update:bookingslot":function($event){return _vm.$set(_vm.formModel,field.name,$event)}}})],1):"PERMIT_CHECKLIST"===field.displayTypeEnum?_c("div",{staticClass:"permit-checklist"},[_c("FFormPermitChecklist",{attrs:{model:_vm.formModel,field:field}})],1):"COMMUNITY_PUBLISHING"===field.displayTypeEnum?[_c("FPublishTo",{attrs:{formModel:_vm.formModel,field:field,isEdit:_vm.isEdit},on:{"update:formModel":function($event){_vm.formModel=$event},"update:form-model":function($event){_vm.formModel=$event}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})]:"NOTES"===field.displayTypeEnum?[_c("div",{staticClass:"pL10 notes-content",class:_vm.getNotesClass(field),domProps:{innerHTML:_vm._s(_vm.sanitize(field.value))}})]:field.formulaFieldHack?_vm._e():_c("div",[_c("TasksList",{attrs:{tasksList:_vm.tasksList,spaceAssetResourceObj:_vm.spaceAssetResourceObj,hasError:_vm.hasError,filter:_vm.filter},on:{"update:tasksList":function($event){_vm.tasksList=$event},"update:tasks-list":function($event){_vm.tasksList=$event},"update:hasError":function($event){_vm.hasError=$event},"update:has-error":function($event){_vm.hasError=$event}}})],1):_c("el-form-item",{staticClass:"section-items",attrs:{label:field.displayName,prop:field.name,required:field.required}},[_vm.$constants.FORM_TEXTAREA_DISPLAY_TYPES.includes(field.displayTypeEnum)&&_vm.$getProperty(field,"configJSON.richText")||"RICH_TEXT"===field.displayTypeEnum?[_c("RichTextArea",{attrs:{field:field,isEdit:_vm.isEdit,disabled:field.isDisabled},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})]:"TICKETNOTES"===field.displayTypeEnum&&_vm.isNewCommentsEnabled?_c("form-comments",{attrs:{field:field,parentModule:_vm.module,recordId:_vm.moduleDataId},on:{clearError:function($event){return _vm.clearError(field.name)}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):_vm.$constants.FORM_TEXTAREA_DISPLAY_TYPES.includes(field.displayTypeEnum)?_c("div",[_c("el-input",{key:""+sectionIndex+fieldIndex,staticClass:"fc-input-full-border-textarea",attrs:{"data-test-selector":""+field.name,type:"textarea",autosize:{minRows:4,maxRows:6},resize:"none",placeholder:"Type your  "+field.displayName,disabled:field.isDisabled},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}),"TICKETNOTES"===field.displayTypeEnum&&_vm.canShowNotifyRequester?_c("el-checkbox",{model:{value:_vm.formModel["notifyRequester"],callback:function($$v){_vm.$set(_vm.formModel,"notifyRequester",$$v)},expression:"formModel['notifyRequester']"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.notify"))+" ")]):_vm._e()],1):"DECISION_BOX"===field.displayTypeEnum?_c("el-checkbox",{attrs:{"data-test-selector":""+field.name,disabled:field.isDisabled},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"RADIO"===field.displayTypeEnum?_c("el-radio-group",{attrs:{disabled:field.isDisabled},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{"data-test-selector":field.field.name+"_true",label:!0}},[_vm._v(_vm._s(field.field.trueVal))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{"data-test-selector":field.field.name+"_false",label:!1}},[_vm._v(_vm._s(field.field.falseVal))])],1):_vm.isSiteField(field)||_vm.$fieldUtils.isSiteLookup(field)?_c("f-site-field",{key:fieldIndex+" "+field.id,attrs:{"data-test-selector":""+field.name,model:(_vm.formModel[field.name]||{}).id,canDisable:field.isDisabled,resetFields:!0,isEdit:_vm.isEdit,filter:_vm.filter,field:field},on:{"update:model":function($event){_vm.$set(_vm.formModel[field.name]||{},"id",$event)},"update:filter":function($event){_vm.filter=$event},handleSiteSwitch:_vm.showConfirmSiteSwitch,handleChange:function(){return _vm.onChangeHandler({field:field})}}}):"MULTI_LOOKUP_SIMPLE"===field.displayTypeEnum?[_vm.checkNewLookupWizardEnabled?_c("Lookup",{key:fieldIndex+" "+field.id,attrs:{field:field,disabled:field.isDisabled,hideDropDown:_vm.$fieldUtils.isChooserTypeField(field)&&!(field.config||{}).isFiltersEnabled,siteId:_vm.selectedSiteId},on:{showLookupWizard:_vm.showLookupWizard,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field})},setLookupFieldValue:_vm.setLookupFieldValue},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):_c("FLookupField",{key:fieldIndex+" "+field.id,attrs:{"data-test-selector":""+field.name,model:_vm.formModel[field.name],field:field,disabled:field.isDisabled,hideDropDown:_vm.$fieldUtils.isChooserTypeField(field)&&!(field.config||{}).isFiltersEnabled,siteId:_vm.selectedSiteId},on:{"update:model":function($event){return _vm.$set(_vm.formModel,field.name,$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field})}}})]:_vm.isLookupSimpleField(field)&&(field.config||{}).canShowFloorPlanPicker?_c("FLookupFieldWithFloorplan",{key:fieldIndex+" "+field.id,attrs:{"data-test-selector":""+field.name,model:(_vm.formModel[field.name]||{}).id,field:field,disabled:field.isDisabled,siteId:_vm.selectedSiteId},on:{"update:model":function($event){_vm.$set(_vm.formModel[field.name]||{},"id",$event)},showLookupWizard:_vm.showLookupWizard,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field})}}}):_vm.isLookupSimpleOrChooserType(field)||"SPACECHOOSER"===field.displayTypeEnum?[_vm.checkNewLookupWizardEnabled?_c("Lookup",{key:fieldIndex+" "+field.id,attrs:{field:field,disabled:field.isDisabled,hideDropDown:_vm.$fieldUtils.isChooserTypeField(field)&&!(field.config||{}).isFiltersEnabled,siteId:_vm.selectedSiteId},on:{showLookupWizard:_vm.showLookupWizard,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field})},setLookupFieldValue:_vm.setLookupFieldValue},model:{value:(_vm.formModel[field.name]||{}).id,callback:function($$v){_vm.$set(_vm.formModel[field.name]||{},"id",$$v)},expression:"(formModel[field.name] || {}).id"}}):_c("FLookupField",{key:fieldIndex+" "+field.id,attrs:{"data-test-selector":""+field.name,model:(_vm.formModel[field.name]||{}).id,field:field,disabled:field.isDisabled,hideDropDown:_vm.$fieldUtils.isChooserTypeField(field)&&!(field.config||{}).isFiltersEnabled,siteId:_vm.selectedSiteId},on:{"update:model":function($event){_vm.$set(_vm.formModel[field.name]||{},"id",$event)},showLookupWizard:_vm.showLookupWizard,setLookupFieldValue:_vm.setLookupFieldValue,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field})}}})]:["SELECTBOX"].includes(field.displayTypeEnum)&&_vm.isMultiple(field)?_c("el-select",{key:fieldIndex+" "+field.id,ref:fieldIndex+" "+field.id,refInFor:!0,staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{"data-test-selector":""+field.name,multiple:!0,filterable:"","collapse-tags":"",clearable:!field.required,disabled:field.isDisabled,placeholder:_vm.$t("common._common.select")},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_c("div",{attrs:{slot:"empty"},slot:"empty"},[_c("div",{staticClass:"el-select-dropdown__empty"},[_vm._v(" "+_vm._s(_vm.$t("common._common.empty_option_text"))+" ")]),field.allowCreate?_c("el-button",{staticClass:"add-option-empty",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_option"),loading:field.isOptionsLoading},on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))]):_vm._e()],1),_vm._l(field.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value,"data-test-selector":field.name+"_"+option.label}})})),field.allowCreate?_c("div",{staticClass:"add-option-container"},[_c("el-button",{staticClass:"add-option-content",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_option")},on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))])],1):_vm._e()],2):["SELECTBOX","URGENCY","REQUESTER"].includes(field.displayTypeEnum)?_c("el-select",{ref:fieldIndex+" "+field.id,refInFor:!0,staticClass:"fc-input-full-border-select2 width100",attrs:{"data-test-selector":""+field.name,filterable:"",clearable:!field.required,disabled:field.isDisabled,placeholder:_vm.$t("common._common.select")},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:(_vm.formModel[field.name]||{}).id,callback:function($$v){_vm.$set(_vm.formModel[field.name]||{},"id",$$v)},expression:"(formModel[field.name] || {}).id"}},[_c("div",{attrs:{slot:"empty"},slot:"empty"},[_c("div",{staticClass:"el-select-dropdown__empty"},[_vm._v(" "+_vm._s(_vm.$t("common._common.empty_option_text"))+" ")]),field.allowCreate?_c("el-button",{staticClass:"add-option-empty",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_option"),loading:field.isOptionsLoading},on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))]):_vm._e()],1),_vm._l(field.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value,"data-test-selector":field.name+"_"+option.label}})})),field.allowCreate?_c("div",{staticClass:"add-option-container"},[_c("el-button",{staticClass:"add-option-content",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_option")},on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))])],1):_vm._e()],2):"TEAMSTAFFASSIGNMENT"===field.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2",class:[field.isDisabled?"disabled-background":""],attrs:{"data-test-selector":"Team/Staff",disabled:field.isDisabled}},[_c("div",{staticClass:"fc-border-input-div2",on:{click:function(event){return _vm.openFassignment(event,field)}}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.formModel[field.name])))]),_c("span",{staticStyle:{float:"right"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_c("FAssignment",{attrs:{model:_vm.formModel[field.name],siteId:_vm.teamStaffSiteId,viewtype:"form"},on:{onChange:function(){var args=[],len=arguments.length;while(len--)args[len]=arguments[len];return _vm.updateAssignedTo(args,field)}}})],1):"FORMULA_FIELD"===field.displayTypeEnum?_c("f-formula-builder",{attrs:{module:"formulaField",title:"",renderInLeft:field.renderInLeft,hideModeChange:field.hideModeChange},model:{value:_vm.formModel[field.name].workflow,callback:function($$v){_vm.$set(_vm.formModel[field.name],"workflow",$$v)},expression:"formModel[field.name].workflow"}}):"IMAGE"===field.displayTypeEnum||"FILE"===field.displayTypeEnum?_c("div",[_c("FFileUpload",{attrs:{field:field,isFileType:"FILE"===field.displayTypeEnum,isDisabled:field.isDisabled,imgContentUrl:field.imgUrl,fileObj:field.fileObj,showWebCamPhoto:!0,isV3Api:_vm.isV3Api,isSaveBtnDisabled:_vm.isSaveBtnDisabled,addImgFile:function(fileOrId,field){return _vm.addImgFile({fileOrId:fileOrId,field:field})}},on:{"update:imgContentUrl":function($event){return _vm.$set(field,"imgUrl",$event)},"update:img-content-url":function($event){return _vm.$set(field,"imgUrl",$event)},"update:fileObj":function($event){return _vm.$set(field,"fileObj",$event)},"update:file-obj":function($event){return _vm.$set(field,"fileObj",$event)},"update:isSaveBtnDisabled":function($event){_vm.isSaveBtnDisabled=$event},"update:is-save-btn-disabled":function($event){_vm.isSaveBtnDisabled=$event},removeImgFile:function(field){return _vm.removeImgFile({field:field})}}})],1):"SIGNATURE"===field.displayTypeEnum?_c("div",[field.hideField?_vm._e():_c("FSignaturePad",{attrs:{model:_vm.formModel[field.name],fileName:field.name,isV3Api:_vm.isV3Api,imgUrl:field.imgUrl,isSaveBtnDisabled:_vm.isSaveBtnDisabled,canShowColorPalette:(field.config||{}).canShowColorPalette},on:{"update:model":function($event){return _vm.$set(_vm.formModel,field.name,$event)},"update:imgUrl":function($event){return _vm.$set(field,"imgUrl",$event)},"update:img-url":function($event){return _vm.$set(field,"imgUrl",$event)},"update:isSaveBtnDisabled":function($event){_vm.isSaveBtnDisabled=$event},"update:is-save-btn-disabled":function($event){_vm.isSaveBtnDisabled=$event}}})],1):"WEEK_MATRIX"===field.displayTypeEnum?_c("div",[_c("WeekMatrix",{attrs:{weekendData:_vm.formModel[field.name]},on:{"update:weekendData":function($event){return _vm.$set(_vm.formModel,field.name,$event)},"update:weekend-data":function($event){return _vm.$set(_vm.formModel,field.name,$event)}}})],1):"COLOR_PICKER"===field.displayTypeEnum?_c("div",[_c("el-color-picker",{attrs:{predefine:_vm.predefineColors(field)},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):"DURATION"===field.displayTypeEnum?_c("div",[_c("f-duration-field",{key:field.fieldId,staticClass:"duration-container",attrs:{field:field,isDisabled:field.isDisabled},on:{updateDurationValue:_vm.updateDurationValue},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):"TIME"===field.displayTypeEnum?_c("FTimePicker",{staticClass:"el-select fc-input-full-border-select2 width100",attrs:{config:field.config,disabled:field.isDisabled,field:field,placeholder:_vm.$t("fields.properties.time_picker_placeholder")},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DATE"===field.displayTypeEnum?_c("FDatePicker",{key:fieldIndex+" "+field.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"date",disabled:field.isDisabled},on:{change:function(){return _vm.onChangeHandler({field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DATETIME"===field.displayTypeEnum?_c("FDatePicker",{key:fieldIndex+" "+field.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"datetime",disabled:field.isDisabled},on:{change:function(){return _vm.onChangeHandler({field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DATERANGE"===field.displayTypeEnum?_c("FDatePicker",{key:fieldIndex+" "+field.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"daterange",disabled:field.isDisabled},on:{change:function(){return _vm.onChangeHandler({field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DAILY_START_END"===field.displayTypeEnum?_c("div",[_c("FScheduleField",{key:fieldIndex+" "+field.id,attrs:{model:_vm.formModel,config:field.config}})],1):"GEO_LOCATION"===field.displayTypeEnum?_c("div",[_c("FLocationField",{key:fieldIndex+" "+field.id,attrs:{field:field,disabled:field.isDisabled,clearable:!1},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):"TIMEZONE"===field.displayTypeEnum?_c("div",[_c("FTimeZoneField",{key:fieldIndex+" "+field.id,attrs:{field:field},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):"LANGUAGE"===field.displayTypeEnum?_c("div",[_c("FLanguageFiled",{key:fieldIndex+" "+field.id,attrs:{field:field},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):"NUMBER"===field.displayTypeEnum||"DECIMAL"===field.displayTypeEnum?_c("el-input",{class:["fc-input-full-border2",_vm.canShowMetric(field)&&("prepend"===_vm.metricSymbolPosition(field)?"fc-slot-input-prepend":"fc-slot-input-append")],attrs:{"data-test-selector":""+field.name,type:"number",disabled:field.isDisabled},on:{change:function(){return _vm.onChangeHandler({field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_vm.canShowMetric(field)?_c("template",{slot:_vm.metricSymbolPosition(field)},[_vm._v(" "+_vm._s((field.field||{}).unit)+" ")]):_vm._e()],2):"PERCENTAGE"===field.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border2 fc-input-icon",attrs:{"data-test-selector":""+field.name},on:{change:function(){return _vm.onChangeHandler({field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_c("template",{slot:field.iconPosition},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:field.icon,iconClass:"icon icon-xs"}})],1)],2):"URL_FIELD"===field.displayTypeEnum?_c("FUrlField",{attrs:{field:field,isEdit:_vm.isEdit,config:field.config},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):["JP_TASK","JP_PREREQUISITE"].includes(field.displayTypeEnum)?[_c("JobPlanTasks",{attrs:{formModel:_vm.formModel,type:field.displayTypeEnum,isJobPlan:!0,field:field,isEdit:_vm.isEdit},on:{updateFormModel:_vm.updateFormModel},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})]:"CURRENCY"===field.displayTypeEnum?_c("div",[_c("FCurrencyField",{attrs:{field:field,isEdit:_vm.isEdit,disabled:field.isDisabled},on:{handleChange:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):"MULTI_CURRENCY"===field.displayTypeEnum?_c("div",[_c("FNewCurrencyField",{key:""+_vm.currencyDetails.currencyCode,attrs:{field:field,isEdit:_vm.isEdit,disabled:field.isDisabled,moduleData:_vm.currencyDetails,initialCurrency:_vm.initialCurrency},on:{handleChange:function(value){return _vm.onChangeHandler({value:value,field:field})},calculateExchangeRate:function(rateObj){return _vm.calculateExchangeRate(rateObj)},setCurrencyCode:_vm.setCurrencyCodeOnChange},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):"EMAIL"===field.displayTypeEnum?_c("FEmailField",{attrs:{field:field,isDisabled:field.isDisabled},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):_c("el-input",{staticClass:"fc-input-full-border2",attrs:{"data-test-selector":""+field.name,disabled:field.isDisabled},on:{"&blur":function($event){return _vm.onBlurHandler({field:field})},change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],2)],2)}))],2)})),0),_c("div",{staticClass:"flex-grow flex-shrink white-background"}),_c("div",{staticClass:"d-flex mT-auto fc-web-form-action-btn flex-row-reverse"},[_vm.canShowPrimaryBtn?_c("el-button",{staticClass:"form-btn f13 bold primary m0 text-center text-uppercase save-btn-focus",attrs:{"data-test-submit":"",type:"primary",loading:_vm.isSaving,disabled:_vm.isSaveBtnDisabled},on:{click:function($event){return _vm.saveRecord()}}},[_vm._v(" "+_vm._s(_vm.form.primaryBtnLabel)+" ")]):_vm._e(),_vm.canShowSecondaryBtn?_c("el-button",{staticClass:"form-btn f13 bold secondary text-center text-uppercase cancel-btn-focus",attrs:{"data-test-cancel":""},on:{click:function($event){return _vm.cancel()}}},[_vm._v(_vm._s(_vm.form.secondaryBtnLabel))]):_vm._e()],1),_vm.showResourceWizard?_c("div",[_c("LookupWizard",{attrs:{canShowLookupWizard:_vm.showResourceWizard,field:_vm.selectedLookupField,siteId:_vm.selectedSiteId},on:{"update:canShowLookupWizard":function($event){_vm.showResourceWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.showResourceWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})],1):_vm.canShowLookupWizard?_c("div",[_vm.checkNewLookupWizardEnabled?_c("LookupWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,field:_vm.selectedLookupField,siteId:_vm.selectedSiteId},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}}):_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.selectedLookupField,siteId:_vm.selectedSiteId},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})],1):_vm._e()],1),_vm.canShowSidebarWidgets?_c("portal",{attrs:{to:"side-bar-widgets"}},[_c("el-collapse",{class:_vm.isSingleWidgetConfigured?"height100":"",model:{value:_vm.activeWidgets,callback:function($$v){_vm.activeWidgets=$$v},expression:"activeWidgets"}},_vm._l(_vm.sideBarWidgets,(function(widget,index){return _c("el-collapse-item",{key:index,class:_vm.isSingleWidgetConfigured?"expand-widget":"",attrs:{title:widget.widgetName,name:widget.widgetName}},[_c("ConnectedAppViewWidget",{key:widget.id,ref:"ref-"+widget.id,refInFor:!0,attrs:{widgetId:widget.id,recordId:_vm.moduleDataId,context:_vm.moduleData,handlers:_vm.handlers}})],1)})),1)],1):_vm._e(),_c("div",{staticClass:"hide"},_vm._l(_vm.backgroundWidgets,(function(widget,index){return _c("div",{key:index},[_c("ConnectedAppViewWidget",{key:widget.id,ref:"ref-"+widget.id,refInFor:!0,attrs:{widgetId:widget.id,recordId:_vm.moduleDataId,context:_vm.moduleData,handlers:_vm.handlers}})],1)})),0)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),slicedToArray=__webpack_require__(554621),defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),FLookupFieldWizard=(__webpack_require__(879288),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(821057),__webpack_require__(891719),__webpack_require__(499751)),FLookupField=__webpack_require__(855048),WebFormMixin=__webpack_require__(143306),TasksMixin=__webpack_require__(153046),FDatePicker=__webpack_require__(358551),FFormulaBuilder=__webpack_require__(902294),FFileUpload=__webpack_require__(794948),FDurationField=__webpack_require__(482175),FAddressFieldvue_type_template_id_21badc30_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex flex-wrap"},[_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.street"),prop:(_vm.field||{}).name+".street","label-width":"0px",required:_vm.field.required}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_street")},model:{value:(_vm.model||{}).street,callback:function($$v){_vm.$set(_vm.model||{},"street",$$v)},expression:"(model || {}).street"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.city_district"),prop:(_vm.field||{}).name+".city","label-width":"0px",required:_vm.field.required}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.entre_city_district")},model:{value:(_vm.model||{}).city,callback:function($$v){_vm.$set(_vm.model||{},"city",$$v)},expression:"(model || {}).city"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.state_province_county"),prop:(_vm.field||{}).name+".state","label-width":"0px",required:_vm.field.required}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_state_province_county")},model:{value:(_vm.model||{}).state,callback:function($$v){_vm.$set(_vm.model||{},"state",$$v)},expression:"(model || {}).state"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.zipcodeText,prop:(_vm.field||{}).name+".zip","label-width":"0px",required:_vm.field.required}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("maintenance._workorder.enter")+" "+_vm.zipcodeText},model:{value:(_vm.model||{}).zip,callback:function($$v){_vm.$set(_vm.model||{},"zip",$$v)},expression:"(model || {}).zip"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.country"),prop:(_vm.field||{}).name+".country","label-width":"0px",required:_vm.field.required}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("setup.setup_profile.enter_country")},model:{value:(_vm.model||{}).country,callback:function($$v){_vm.$set(_vm.model||{},"country",$$v)},expression:"(model || {}).country"}},_vm._l(_vm.countryList,(function(country){return _c("el-option",{key:country.value,attrs:{label:country.label,value:String(country.value)}})})),1)],1)],1)},FAddressFieldvue_type_template_id_21badc30_staticRenderFns=[],countries=__webpack_require__(587207),validation=__webpack_require__(990260),api=__webpack_require__(32284),InventoryUtil=__webpack_require__(976195),FAddressFieldvue_type_script_lang_js={props:["model","field","storeRoomId","vendorId"],data:function(){return{countryList:countries/* default */.Z}},watch:{storeRoomId:function(newVal,oldVal){newVal!==oldVal&&this.onStoreRoomChange()},vendorId:function(newVal,oldVal){newVal!==oldVal&&this.onVendorChange()}},computed:{zipcodeText:function(){var _ref=this.$account||{},user=_ref.user,timezone=_ref.timezone;return"en"===user.language&&"Europe/London"===timezone?"Postcode":this.$t("setup.setup_profile.zipcode")}},methods:{
// Special handling for prefilling store address in billing address
onStoreRoomChange:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var storeRoomId,field,name,_yield$getStoreRoomBy,location,addressProp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(storeRoomId=_this.storeRoomId,field=_this.field,name=field.name,(0,validation/* isEmpty */.xb)(storeRoomId)||"shipToAddress"!==name){_context.next=8;break}return _context.next=5,(0,InventoryUtil/* getStoreRoomById */.Yd)(storeRoomId);case 5:_yield$getStoreRoomBy=_context.sent,location=_yield$getStoreRoomBy.location,(0,validation/* isEmpty */.xb)(location)||(addressProp=["city","street","state","country","zip"],addressProp.forEach((function(prop){_this.$set(_this.model,"".concat(prop),location[prop])})));case 8:case"end":return _context.stop()}}),_callee)})))()},onVendorChange:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var vendorId,field,name,_yield$API$fetchRecor,vendors,error,_error$message,message,address,addressProp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(vendorId=_this2.vendorId,field=_this2.field,name=field.name,(0,validation/* isEmpty */.xb)(vendorId)||"billToAddress"!==name){_context2.next=9;break}return _context2.next=5,api/* API */.bl.fetchRecord("vendors",{id:vendorId});case 5:_yield$API$fetchRecor=_context2.sent,vendors=_yield$API$fetchRecor.vendors,error=_yield$API$fetchRecor.error,(0,validation/* isEmpty */.xb)(error)?(address=vendors.address,(0,validation/* isEmpty */.xb)(address)||(addressProp=["city","street","state","country","zip"],addressProp.forEach((function(prop){_this2.$set(_this2.model,"".concat(prop),address[prop])})))):(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Vendor":_error$message,_this2.$message.error(message));case 9:case"end":return _context2.stop()}}),_callee2)})))()}}},components_FAddressFieldvue_type_script_lang_js=FAddressFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAddressFieldvue_type_script_lang_js,FAddressFieldvue_type_template_id_21badc30_render,FAddressFieldvue_type_template_id_21badc30_staticRenderFns,!1,null,null,null)
/* harmony default export */,FAddressField=component.exports,FSiteField=__webpack_require__(890006),FPoPrLineItemvue_type_template_id_8854788a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("div",{staticClass:"section-items f-quote-lineitems flex-middle flex-col"},[_c("spinner",{attrs:{show:!0,size:80}})],1):_c("div",{staticClass:"section-items f-quote-lineitems flex-col display-table"},[_vm.canShowCurrencyDropDown&&"requestForQuotation"!==_vm.module?_c("div",{staticClass:"mL-auto d-flex items-baseline"},[_c("span",{staticClass:"mR10 lineItem-currency-header"},[_vm._v(_vm._s(_vm.$t("common.products.currency")))]),_c("FNewCurrencyField",{attrs:{moduleData:_vm.currencyDetails,isLineItem:!0,initialCurrency:_vm.initialCurrency},on:{setCurrencyCode:_vm.setCurrencyCodeOnChange,setIsDefaultCurrency:function(val){return _vm.isDefaultCurrency=val}}})],1):_vm._e(),_c("table",{staticClass:"fc-quote-line-item-table mT20"},[_c("thead",[_c("tr",[_c("th",{class:_vm.nameClass},[_vm._v(" "+_vm._s(_vm.$t("common._common.name_and_description"))+" ")]),"requestForQuotation"!==_vm.module?_c("th",{staticClass:"text-center",class:1===this.$helpers.taxMode()?"fcQuoteWidth166":"fcQuoteWidth16"},[_vm._v(" "+_vm._s(_vm.$t("common.header._unit_price")+" ("+_vm.lineItemCurrency+")")+" ")]):_vm._e(),_c("th",{staticClass:"text-center",class:_vm.quantityClass},[_vm._v(" "+_vm._s(_vm.$t("common.products.qty"))+" ")]),_c("th",{staticClass:"text-center",class:_vm.uomClass},[_vm._v(" "+_vm._s(_vm.$t("common.products.uom"))+" ")]),_vm.displayTaxField?_c("th",{staticClass:"text-center fcQuoteWidth100",class:1===_vm.$helpers.taxMode()?"fcQuoteWidth100":"fcQuoteWidth16"},[_vm._v(" "+_vm._s(_vm.$t("common.products.tax"))+" ")]):_vm._e(),"requestForQuotation"!==_vm.module?_c("th",{staticClass:"text-center fcAmountWidth"},[_vm._v(" "+_vm._s(_vm.$t("common.header.amounts")+" ("+_vm.lineItemCurrency+")")+" ")]):_vm._e()])]),_c("tbody",_vm._l(_vm.lineItems,(function(lineItem,index){return _c("tr",{key:index},[_c("td",{staticStyle:{padding:"0"}},[_c("el-form",{ref:"lineItem-description-"+index,refInFor:!0,attrs:{rules:_vm.nameAndDescriptionValidationRules,model:lineItem}},[_c("el-row",[_c("el-col",{attrs:{span:4}},[_c("el-select",{staticClass:"fc-select-suffix-hide fc-select-icon fc-quote-item-select",on:{change:function($event){return _vm.lineItemChangeAction(lineItem,index)}},model:{value:lineItem.inventoryType,callback:function($$v){_vm.$set(lineItem,"inventoryType",$$v)},expression:"lineItem.inventoryType"}},[_c("template",{slot:"prefix"},[_c("InlineSvg",{key:lineItem.inventoryType,attrs:{src:_vm.getLineItemTypeObj(lineItem.inventoryType).icon,iconClass:_vm.getLineItemTypeObj(lineItem.inventoryType).iconClass}}),_c("i",{staticClass:"el-icon-caret-bottom"})],1),_vm._l(_vm.lineItemTypes,(function(item){return _c("el-option",{key:item.inventoryType,attrs:{label:"",value:item.inventoryType}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{attrs:{src:item.icon,iconClass:item.iconClass}}),_c("div",{staticClass:"pR40"},[_vm._v(" "+_vm._s(item.label)+" ")])],1)])}))],2)],1),_vm.getLineItemsList(lineItem.inventoryType)?_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:_vm.lineItemTypesMap[lineItem.inventoryType].model,required:!0}},[_vm.showLookupField?_c("FLookupFieldWrapper",{staticClass:"width100 fc-input-full-border-select2 lookup-lineItem fc-quoation-form-select",attrs:{field:_vm.currentFieldObject(lineItem)},on:{recordSelected:function($event){return _vm.lineItemChangeAction(lineItem,index)}},model:{value:lineItem[""+_vm.lineItemTypesMap[lineItem.inventoryType].model].id,callback:function($$v){_vm.$set(lineItem[""+_vm.lineItemTypesMap[lineItem.inventoryType].model],"id",$$v)},expression:"\n                      lineItem[\n                        `${lineItemTypesMap[lineItem.inventoryType].model}`\n                      ].id\n                    "}}):_vm._e()],1)],1):_vm._e(),_vm.getLineItemsList(lineItem.inventoryType)?_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-black-13 text-left pL10 line-height20 mR10 mT10"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"description"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100 fc-quotation-first-td",attrs:{placeholder:_vm.$t("common.wo_report.report_description"),type:"textarea",resize:"none",autosize:{minRows:2,maxRows:100}},model:{value:lineItem.description,callback:function($$v){_vm.$set(lineItem,"description",$$v)},expression:"lineItem.description"}})],1)],1)]):_c("el-col",{attrs:{span:20}},[_c("div",{staticClass:"fc-black-13 text-left pL10 line-height20 mR10 mL10"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"description",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border2 fc-quotation-first-td",attrs:{type:"textarea",placeholder:_vm.$t("common.wo_report.report_description"),resize:"none",autosize:{minRows:2,maxRows:100}},model:{value:lineItem.description,callback:function($$v){_vm.$set(lineItem,"description",$$v)},expression:"lineItem.description"}})],1)],1)])],1)],1)],1),"requestForQuotation"!==_vm.module?_c("td",["requestForQuotation"!==_vm.module?_c("el-form",{ref:"lineItem-unitPrice-"+index,refInFor:!0,staticClass:"table-row",attrs:{rules:_vm.unitPriceValidationRules,model:lineItem}},[_c("div",{staticClass:"fc-black-13 text-right"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"unitPrice"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.header.unit_price"),type:"number"},model:{value:lineItem.unitPrice,callback:function($$v){_vm.$set(lineItem,"unitPrice",_vm._n($$v))},expression:"lineItem.unitPrice"}})],1)],1)]):_vm._e()],1):_vm._e(),_c("td",[_c("el-form",{ref:"lineItem-quantity-"+index,refInFor:!0,staticClass:"table-row",attrs:{rules:_vm.quantityValidationRules,model:lineItem}},[_c("div",{staticClass:"fc-black-13"},[_c("el-form-item",{staticClass:"hide-error",attrs:{required:!0,prop:"quantity"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common._common.quantity"),type:"number"},model:{value:lineItem.quantity,callback:function($$v){_vm.$set(lineItem,"quantity",$$v)},expression:"lineItem.quantity"}})],1)],1)])],1),_c("td",[_c("div",[_c("el-select",{staticClass:"width100 fc-input-full-border2",attrs:{filterable:""},model:{value:lineItem.unitOfMeasure,callback:function($$v){_vm.$set(lineItem,"unitOfMeasure",$$v)},expression:"lineItem.unitOfMeasure"}},_vm._l(_vm.uomFieldOptions,(function(item,index){return _c("el-option",{key:index,attrs:{label:item.label,value:item.value}})})),1)],1)]),_vm.displayTaxField?_c("td",[_c("el-select",{staticClass:"width100 fc-input-full-border2",attrs:{filterable:"",clearable:""},model:{value:lineItem.tax.id,callback:function($$v){_vm.$set(lineItem.tax,"id",$$v)},expression:"lineItem.tax.id"}},[_c("el-option-group",{key:"1",attrs:{label:"Tax Groups"}},_vm._l(_vm.groupedTaxes,(function(tax,index){return _c("el-option",{key:index,attrs:{label:tax.isActive?tax.name+" ("+tax.rate+" %)":tax.name+"* ("+tax.rate+" %)",value:tax.id}})})),1),_c("el-option-group",{key:"2",attrs:{label:_vm.groupedTaxes.length>0?"Individual Taxes":""}},_vm._l(_vm.individualTaxes,(function(tax,index){return _c("el-option",{key:index,attrs:{label:tax.isActive?tax.name+" ("+tax.rate+" %)":tax.name+"* ("+tax.rate+" %)",value:tax.id}})})),1)],1),_vm.getTaxRate(lineItem)?_c("div",{staticClass:"fc-grey7-12 pR10 pT5"},[_vm._v(" "+_vm._s(_vm.getTaxRate(lineItem)+" %")+" ")]):_vm._e()],1):_vm._e(),"requestForQuotation"===_vm.module?_c("td",{staticClass:"text-center rfq-line-items-action"},[_vm.lineItems.length-1===index?_c("i",{staticClass:"el-icon-circle-plus-outline fc-row-add-icon f20 bold pL5",on:{click:function($event){return _vm.addLineItems()}}}):_vm._e(),_vm.lineItems.length>1?_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold pL10",on:{click:function($event){return _vm.removeLineItems(index)}}}):_vm._e()]):_vm._e(),"requestForQuotation"!==_vm.module?_c("td",{staticClass:"text-right"},[_c("div",{staticClass:"fc-black-13 text-right pT18 fc-quotation-total"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.getLineItemTotalCost(lineItem)))+" ")]),_c("div",{staticClass:"fc-form-tax-actions"},[_c("div",{staticClass:"flex-middle"},[_vm.lineItems.length-1===index?_c("i",{staticClass:"el-icon-circle-plus-outline fc-row-add-icon f20 bold pL5",on:{click:function($event){return _vm.addLineItems()}}}):_vm._e(),_vm.lineItems.length>1?_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold pL10",on:{click:function($event){return _vm.removeLineItems(index)}}}):_vm._e()])])]):_vm._e()])})),0)]),_c("div",{staticClass:"d-flex flex-row"},[_c("div",{staticClass:"flex-1"},[_c("div",{staticClass:"flex-middle mT20"},[_vm.showDiscount?_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"fc-id bold pointer f14",on:{click:function($event){return _vm.addCost("discount")}}},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" "+_vm._s(_vm.$t("common.products.add_discount"))+" ")])]):_vm._e()])]),"requestForQuotation"!==_vm.module?_c("div",{staticClass:"flexWidthQuote"},[_c("el-form",{ref:"lineItem-additionalCosts",attrs:{rules:_vm.additionalCostsRules,model:_vm.model}},[_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6"},[_vm._v(" "+_vm._s(_vm.$t("common._common.sub_total"))+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold break-word-all"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.subTotal))+" ")])])],1),1===_vm.$helpers.discountMode()?_c("DiscountSegment",{attrs:{discountVisibility:_vm.discountVisibility,model:_vm.model,discount:_vm.discount,currency:_vm.lineItemCurrency},on:{"update:discountVisibility":function($event){_vm.discountVisibility=$event},"update:discount-visibility":function($event){_vm.discountVisibility=$event}}}):_vm._e(),_c("TaxSegment",{attrs:{model:_vm.model,individualTaxes:_vm.individualTaxes,groupedTaxes:_vm.groupedTaxes,showTotalTax:_vm.showTotalTax,totalTax:_vm.totalTax,taxSplitUp:_vm.taxSplitUp}}),2===_vm.$helpers.discountMode()?_c("DiscountSegment",{attrs:{discountVisibility:_vm.discountVisibility,model:_vm.model,discount:_vm.discount,currency:_vm.lineItemCurrency},on:{"update:discountVisibility":function($event){_vm.discountVisibility=$event},"update:discount-visibility":function($event){_vm.discountVisibility=$event}}}):_vm._e(),_c("el-col",{attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border fc-form-total-td-bg",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fwBold"},[_vm._v(" "+_vm._s(_vm.$t("common.header.total_amount")+" ("+_vm.lineItemCurrency+")")+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-total-td-bg",attrs:{span:8}},[_c("div",{staticClass:"label-txt-black text-right fwBold break-word-all"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.totalAmount))+" ")])])],1)],1)],1):_vm._e()])])},FPoPrLineItemvue_type_template_id_8854788a_scoped_true_staticRenderFns=[],FLookupFieldWrapper=__webpack_require__(201117),utility_methods=__webpack_require__(773258),constant=__webpack_require__(354754),utils_utility_methods=__webpack_require__(555005),QuoteFormDiscountSegmentvue_type_template_id_07d0c2af_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.discountVisibility?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border position-relative flex-middle",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-left fw6 pT5"},[_vm._v(" DISCOUNT ")]),_c("el-form-item",{staticClass:"mB0 hide-error",attrs:{prop:"discountAmount"}},[1===Number(_vm.discountType)?_c("el-input",{staticClass:"fc-input-full-border2 width100 mL5 pL5 pR5 width135px",attrs:{placeholder:"Discount",type:"number"},model:{value:_vm.model.discountAmount,callback:function($$v){_vm.$set(_vm.model,"discountAmount",$$v)},expression:"model.discountAmount"}}):_vm._e()],1),_c("el-form-item",{staticClass:"mB0 hide-error",attrs:{prop:"discountPercentage"}},[2===Number(_vm.discountType)?_c("el-input",{staticClass:"fc-input-full-border2 width100 mL5 pL5 pR5 width135px",attrs:{placeholder:"Discount",type:"number"},model:{value:_vm.model.discountPercentage,callback:function($$v){_vm.$set(_vm.model,"discountPercentage",$$v)},expression:"model.discountPercentage"}}):_vm._e()],1),_c("div",{staticClass:"fc-form-tax-discount-box d-flex"},[_c("div",{staticClass:"flex-middle"},[_c("el-select",{staticClass:"mL10",attrs:{placeholder:""},on:{change:_vm.resetDiscount},model:{value:_vm.discountType,callback:function($$v){_vm.discountType=$$v},expression:"discountType"}},[_c("el-option",{key:"1",attrs:{label:_vm.currency,value:1}}),_c("el-option",{key:"2",attrs:{label:"%",value:2}})],1)],1)])],1),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold break-word-all"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.discount))+" ")])]),_c("div",{staticClass:"fc-form-action-total-remove",on:{click:function($event){return _vm.removeDiscount()}}},[_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon bold f20"})])],1):_vm._e()},QuoteFormDiscountSegmentvue_type_template_id_07d0c2af_staticRenderFns=[],QuoteFormDiscountSegmentvue_type_script_lang_js={props:["model","discountVisibility","discount","currency"],data:function(){return{discountType:1}},created:function(){(this.model||{}).discountPercentage&&(this.discountType=2)},methods:{resetDiscount:function(val){1===Number(val)?this.model.discountPercentage=null:2===Number(val)&&(this.model.discountAmount=null)},removeDiscount:function(){this.$emit("update:discountVisibility",!1),this.model.discountAmount=null,this.model.discountPercentage=null}}},components_QuoteFormDiscountSegmentvue_type_script_lang_js=QuoteFormDiscountSegmentvue_type_script_lang_js,QuoteFormDiscountSegment_component=(0,componentNormalizer/* default */.Z)(components_QuoteFormDiscountSegmentvue_type_script_lang_js,QuoteFormDiscountSegmentvue_type_template_id_07d0c2af_render,QuoteFormDiscountSegmentvue_type_template_id_07d0c2af_staticRenderFns,!1,null,null,null)
/* harmony default export */,QuoteFormDiscountSegment=QuoteFormDiscountSegment_component.exports,FormTaxSegmentvue_type_template_id_169dc38c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[2===_vm.$helpers.taxMode()?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right text-uppercase fw6"},[_vm._v(" TAX ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td pT10",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold"},[_c("el-select",{staticClass:"width100 fc-input-full-border2 fc-form-select-grey-txt",attrs:{filterable:"",clearable:""},model:{value:_vm.model.tax.id,callback:function($$v){_vm.$set(_vm.model.tax,"id",$$v)},expression:"model.tax.id"}},[_c("el-option-group",{key:"1",attrs:{label:"Tax Groups"}},_vm._l(_vm.groupedTaxes,(function(tax,index){return _c("el-option",{key:index,attrs:{label:tax.isActive?tax.name+" ("+tax.rate+" %)":tax.name+"* ("+tax.rate+" %)",value:tax.id}})})),1),_c("el-option-group",{key:"2",attrs:{label:_vm.groupedTaxes.length>0?"Individual Taxes":""}},_vm._l(_vm.individualTaxes,(function(tax,index){return _c("el-option",{key:index,attrs:{label:tax.isActive?tax.name+" ("+tax.rate+" %)":tax.name+"* ("+tax.rate+" %)",value:tax.id}})})),1)],1)],1)])],1):_vm._e(),_c("el-col",{staticClass:"position-relative",attrs:{span:24}},_vm._l(Object.keys(_vm.taxSplitUp),(function(key,index){return _c("div",{key:index},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6"},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.taxSplitUp[key],"tax.name")+" ("+_vm.$getProperty(_vm.taxSplitUp[key],"tax.rate")+" %)")+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold text-uppercase"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.$getProperty(_vm.taxSplitUp[key],"taxAmount")))+" ")])])],1)})),0),_vm.showTotalTax?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6"},[_vm._v(" TOTAL TAX ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.totalTax))+" ")])])],1):_vm._e()],1)},FormTaxSegmentvue_type_template_id_169dc38c_staticRenderFns=[],FormTaxSegmentvue_type_script_lang_js={props:["model","individualTaxes","groupedTaxes","taxSplitUp","showTotalTax","totalTax","$helpers.taxMode()"]},components_FormTaxSegmentvue_type_script_lang_js=FormTaxSegmentvue_type_script_lang_js,FormTaxSegment_component=(0,componentNormalizer/* default */.Z)(components_FormTaxSegmentvue_type_script_lang_js,FormTaxSegmentvue_type_template_id_169dc38c_render,FormTaxSegmentvue_type_template_id_169dc38c_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormTaxSegment=FormTaxSegment_component.exports,LineItemsMixin=__webpack_require__(364122),vuex_esm=__webpack_require__(420629),FNewCurrencyField=__webpack_require__(533206),FPoPrLineItemvue_type_script_lang_js={props:["model","field","lineItems","isEdit","module","currencyObj","initialCurrency","hasMultiCurrencyFieldInModel"],mixins:[LineItemsMixin/* default */.Z],components:{DiscountSegment:QuoteFormDiscountSegment,TaxSegment:FormTaxSegment,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z,FNewCurrencyField:FNewCurrencyField/* default */.Z},data:function(){return{showLookupField:!0,record:null,fields:{itemTypes:{lookupModule:{name:"itemTypes",displayName:"Item Type"},multiple:!1},toolTypes:{lookupModule:{name:"toolTypes",displayName:"Tool Type"},multiple:!1},service:{lookupModule:{name:"service",displayName:"Service"},multiple:!1}},lineItemTypes:[{value:"items",label:this.$t("common.products.items"),icon:"svgs/items",iconClass:"icon icon-sm-md vertical-sub mR10 stroke-grey",inventoryType:1},{value:"tools",label:this.$t("common.header.tools"),icon:"svgs/setting",iconClass:"icon icon-md vertical-sub mR10 fill-grey",inventoryType:2},{value:"service",label:this.$t("common.products._service"),icon:"svgs/service",iconClass:"icon icon-sm-md vertical-sub mR10 fill-grey",inventoryType:3},{value:"others",label:this.$t("common._common.others"),icon:"svgs/pencil",iconClass:"icon icon-sm vertical-sub mR10",inventoryType:4}],lineItemTypesMap:{1:{list:"itemTypes",model:"itemType"},2:{list:"toolTypes",model:"toolType"},3:{list:"service",model:"service"},4:{model:"others"}},currencyData:{},hasMultiCurrencyField:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.init();case 1:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencyList:function(state){return state.activeCurrencies}})),{},{nameClass:function(){return"requestForQuotation"===this.module?"name-and-description-rfq":"name-and-description"},quantityClass:function(){return"requestForQuotation"===this.module?"rfq-quantity-uom-width":1===this.$helpers.taxMode()?"fcQuoteWidth13":"fcQuoteWidth16"},uomClass:function(){return"requestForQuotation"===this.module?"rfq-quantity-uom-width":1===this.$helpers.taxMode()?"fcQuoteWidth10":"fcQuoteWidth16"},showDiscount:function(){return!this.discountVisibility&&"requestForQuotation"!==this.module},displayTaxField:function(){return 1===this.$helpers.taxMode()&&!this.hideTaxField&&"requestForQuotation"!==this.module},hideTaxField:function(){return this.$getProperty(this,"field.config.hideTaxField")}}),watch:{"currencyData.currencyCode":{handler:function(newVal,oldVal){if(newVal!=oldVal){var lineItems=(this.lineItems||[]).map((function(item){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},item),{},{currencyCalculated:!1})}));this.updateLineItem(lineItems),this.getExchangeRate(oldVal)}},deep:!0}},methods:{currentFieldObject:function(lineItem){var _ref=lineItem||{},inventoryType=_ref.inventoryType;if(null!==inventoryType)return this.fields["".concat(this.lineItemTypesMap[inventoryType].list)]},init:function(){var _this2=this,_ref2=this||{},lineItems=_ref2.lineItems;this.loading=!0,Promise.all([this.loadTaxes(lineItems),this.loadLineItemsModuleMeta()]).then((function(){_this2.setCurrencyData(),_this2.loading=!1})),((this.model||{}).discountAmount||(this.model||{}).discountPercentage)&&((this.model||{}).discountPercentage&&(this.model.discountAmount=null),this.discountVisibility=!0)},loadRecord:function(recordId,moduleName){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$fetchRecor,record,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.fetchRecord(moduleName,{id:recordId});case 2:_yield$API$fetchRecor=_context2.sent,record=_yield$API$fetchRecor[moduleName],error=_yield$API$fetchRecor.error,error?_this3.$message.error(error.message||"Error Occured"):_this3.record=record||{};case 6:case"end":return _context2.stop()}}),_callee2)})))()},getLineItemTypeObj:function(type){return this.lineItemTypes.find((function(item){return item.inventoryType===type}))||{}},addLineItems:function(){var lineItems=this.lineItems,newLineItem=(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.LINE_ITEM_DEFAULTS),_ref3=this.currencyDetails||{},currencyCode=_ref3.currencyCode,exchangeRate=_ref3.exchangeRate;lineItems.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},newLineItem),{},{currencyCode:currencyCode,exchangeRate:exchangeRate,currencyCalculated:!1}))},loadLineItemsModuleMeta:function(){var _this4=this,onMetaSave=function(_ref4){var _ref4$fields=_ref4.fields,fields=void 0===_ref4$fields?[]:_ref4$fields,uomField=fields.filter((function(field){return"unitOfMeasure"===field.name}));if(!(0,validation/* isEmpty */.xb)(uomField)){var values=_this4.$getProperty(uomField,[0,"values"],[]);_this4.uomFieldOptions=(0,utils_utility_methods/* constructEnumFieldOptions */.rr)(values||[])}};return"requestForQuotation"===this.module?this.$store.dispatch("view/loadModuleMeta","requestForQuotationLineItems").then(onMetaSave):this.$store.dispatch("view/loadModuleMeta","purchaserequest"===this.module?"purchaserequestlineitems":"purchaseorderlineitems").then(onMetaSave)},updateLineItem:function(lineItems){this.$emit("update:lineItems",lineItems),this.$emit("update:model",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.model),{},{lineItems:lineItems}))},lineItemChangeAction:function(val,index){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _val,inventoryType,lineItemTypesMap,lineItems,_lineItemTypesMap$inv,model,list,typeId,typeData,unitPrice,description,_ref5,currencyCode,itemObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this5.showLookupField=!1,_val=val,inventoryType=_val.inventoryType,lineItemTypesMap=_this5.lineItemTypesMap,lineItems=_this5.lineItems,"others"===lineItemTypesMap[inventoryType].model){_context3.next=19;break}if(_lineItemTypesMap$inv=lineItemTypesMap[inventoryType],model=_lineItemTypesMap$inv.model,list=_lineItemTypesMap$inv.list,typeId=val[model].id,(0,validation/* isEmpty */.xb)(typeId)){_context3.next=19;break}return _context3.next=9,_this5.loadRecord(typeId,list);case 9:typeData=_this5.record,unitPrice=_this5.$getProperty(typeData,"lastPurchasedPrice",null),description=_this5.$getProperty(typeData,"description",null),unitPrice=(0,validation/* isEmpty */.xb)(unitPrice)||"requestForQuotation"===_this5.module?null:unitPrice,_ref5=typeData||{},currencyCode=_ref5.currencyCode,val=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},val),{},{unitPrice:unitPrice,description:description,currencyCalculated:!1}),lineItems=lineItems.map((function(currVal,currIndex){return currIndex===index?val:currVal})),_this5.updateLineItem(lineItems),itemObj={type:model,typeId:typeId},_this5.getExchangeRate(currencyCode,itemObj);case 19:_this5.$nextTick((function(){_this5.showLookupField=!0}));case 20:case"end":return _context3.stop()}}),_callee3)})))()}}},forms_FPoPrLineItemvue_type_script_lang_js=FPoPrLineItemvue_type_script_lang_js,FPoPrLineItem_component=(0,componentNormalizer/* default */.Z)(forms_FPoPrLineItemvue_type_script_lang_js,FPoPrLineItemvue_type_template_id_8854788a_scoped_true_render,FPoPrLineItemvue_type_template_id_8854788a_scoped_true_staticRenderFns,!1,null,"8854788a",null)
/* harmony default export */,FPoPrLineItem=FPoPrLineItem_component.exports,FTransferRequestLineItemvue_type_template_id_7e722c50_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"width100 pB50 position-relative"},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.quantity"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.lineItems,(function(lineItem,index){return _c("tr",{key:index},[_c("td",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",on:{change:function($event){return _vm.lineItemChangeAction()}},model:{value:lineItem.inventoryType,callback:function($$v){_vm.$set(lineItem,"inventoryType",$$v)},expression:"lineItem.inventoryType"}},_vm._l(_vm.lineItemTypes,(function(item){return _c("el-option",{key:item.type,attrs:{label:item.label,value:item.type}},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"pR40"},[_vm._v(" "+_vm._s(item.label)+" ")])])])})),1)],1),_c("td",[_c("el-form",{ref:"lineItem-description-"+index,refInFor:!0,staticClass:"table-row",attrs:{rules:_vm.descriptionValidationRules,model:lineItem}},[_c("el-form-item",{staticClass:"hide-error pT20",attrs:{prop:_vm.lineItemTypesMap[lineItem.inventoryType].model,required:!0}},[_vm.showLookupField?_c("FLookupFieldWrapper",{staticClass:"width100",attrs:{field:_vm.currentFieldObject(lineItem),filterConstruction:_vm.constructFilter},model:{value:lineItem[""+_vm.lineItemTypesMap[lineItem.inventoryType].model].id,callback:function($$v){_vm.$set(lineItem[""+_vm.lineItemTypesMap[lineItem.inventoryType].model],"id",$$v)},expression:"\n                    lineItem[\n                      `${lineItemTypesMap[lineItem.inventoryType].model}`\n                    ].id\n                  "}}):_vm._e()],1)],1)],1),_c("td",[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common._common.quantity"),min:0,type:"number"},model:{value:lineItem.quantity,callback:function($$v){_vm.$set(lineItem,"quantity",$$v)},expression:"lineItem.quantity"}})],1),_c("td",[_c("div",{staticClass:"flex-middle"},[_vm.lineItems.length-1===index?_c("i",{staticClass:"el-icon-circle-plus-outline fc-row-add-icon f20 bold pL5",on:{click:function($event){return _vm.addLineItems()}}}):_vm._e(),_vm.lineItems.length>1?_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold pL10",on:{click:function($event){return _vm.removeLineItems(index)}}}):_vm._e()])])])})),0)])])])},FTransferRequestLineItemvue_type_template_id_7e722c50_scoped_true_staticRenderFns=[],FTransferRequestLineItemvue_type_script_lang_js={props:["model","field","lineItems","isEdit","module"],mixins:[LineItemsMixin/* default */.Z],components:{FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z},data:function(){return{showLookupField:!0,fields:{itemTypes:{multiple:!1,lookupModule:{name:"itemTypes",displayName:"Item Type"}},toolTypes:{lookupModule:{name:"toolTypes",displayName:"Tool Type"},multiple:!1}},lineItemTypesMap:{1:{list:"itemTypes",model:"itemType"},2:{list:"toolTypes",model:"toolType"}},lineItemTypes:[{value:"items",label:this.$t("common.products.items"),icon:"svgs/items",iconClass:"icon icon-sm-md vertical-sub mR10 stroke-grey",type:1},{value:"tools",label:this.$t("common.header.tools"),icon:"svgs/setting",iconClass:"icon icon-md vertical-sub mR10 fill-grey",type:2}]}},created:function(){this.init()},methods:{currentFieldObject:function(lineItem){var _ref=lineItem||{},inventoryType=_ref.inventoryType;if(null!==inventoryType)return this.fields["".concat(this.lineItemTypesMap[inventoryType].list)]},constructFilter:function(){return"transferrequest"===this.module?{isRotating:{operatorId:15,value:["false"]}}:{}},init:function(){var _this=this;this.loading=!0,Promise.all([this.loadLineItemsModuleMeta()]).then((function(){_this.loading=!1}))},addLineItems:function(){var lineItems=this.lineItems;lineItems.push((0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.INV_LINE_ITEM_DEFAULTS))},lineItemChangeAction:function(){var _this2=this;this.showLookupField=!1,this.$nextTick((function(){_this2.showLookupField=!0}))},loadLineItemsModuleMeta:function(){return this.$store.dispatch("view/loadModuleMeta","transferrequestlineitems")}}},forms_FTransferRequestLineItemvue_type_script_lang_js=FTransferRequestLineItemvue_type_script_lang_js,FTransferRequestLineItem_component=(0,componentNormalizer/* default */.Z)(forms_FTransferRequestLineItemvue_type_script_lang_js,FTransferRequestLineItemvue_type_template_id_7e722c50_scoped_true_render,FTransferRequestLineItemvue_type_template_id_7e722c50_scoped_true_staticRenderFns,!1,null,"7e722c50",null)
/* harmony default export */,FTransferRequestLineItem=FTransferRequestLineItem_component.exports,FQuoteLineItemvue_type_template_id_29040f83_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("div",{staticClass:"section-items f-quote-lineitems flex-middle flex-col"},[_c("spinner",{attrs:{show:!0,size:80}})],1):_c("div",{staticClass:"section-items f-quote-lineitems flex-col display-table"},[_vm.canShowCurrencyDropDown&&"requestForQuotation"!==_vm.module?_c("div",{staticClass:"mL-auto d-flex items-baseline"},[_c("span",{staticClass:"mR10 lineItem-currency-header"},[_vm._v(_vm._s(_vm.$t("common.products.currency")))]),_c("FNewCurrencyField",{attrs:{moduleData:_vm.currencyDetails,isLineItem:!0,initialCurrency:_vm.initialCurrency},on:{setCurrencyCode:_vm.setCurrencyCodeOnChange,setIsDefaultCurrency:function(val){return _vm.isDefaultCurrency=val}}})],1):_vm._e(),_c("table",{staticClass:"fc-quote-line-item-table mT20"},[_c("thead",[_c("tr",[_c("th",{staticStyle:{width:"33.33333%"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.name_and_description"))+" ")]),_c("th",{staticClass:"text-center",class:1===_vm.$helpers.taxMode()?"fcQuoteWidth166":"fcQuoteWidth16"},[_vm._v(" "+_vm._s(_vm.$t("common.header._unit_price")+" ("+_vm.lineItemCurrency+")")+" ")]),_c("th",{staticClass:"text-center",class:1===_vm.$helpers.taxMode()?"fcQuoteWidth13":"fcQuoteWidth16"},[_vm._v(" "+_vm._s(_vm.$t("common.products.qty"))+" ")]),_c("th",{staticClass:"text-center",class:1===_vm.$helpers.taxMode()?"fcQuoteWidth10":"fcQuoteWidth16"},[_vm._v(" "+_vm._s(_vm.$t("common.products.uom"))+" ")]),1!==_vm.$helpers.taxMode()||_vm.hideTaxField||!_vm.showMarkupValue||_vm.isGlobalMarkup?_vm._e():_c("th",{staticClass:"text-center fcQuoteWidth100",class:1===_vm.$helpers.taxMode()?"fcQuoteWidth100":"fcQuoteWidth16"},[_vm._v(" "+_vm._s("MARKUP")+" ")]),1!==_vm.$helpers.taxMode()||_vm.hideTaxField?_vm._e():_c("th",{staticClass:"text-center fcQuoteWidth100",class:1===_vm.$helpers.taxMode()?"fcQuoteWidth100":"fcQuoteWidth16"},[_vm._v(" "+_vm._s(_vm.$t("common.products.tax"))+" ")]),_c("th",{staticClass:"text-center",class:1===_vm.$helpers.taxMode()?"fcQuoteWidth28":"fcQuoteWidth16"},[_vm._v(" "+_vm._s(_vm.$t("common.header.total_amount")+" ("+_vm.lineItemCurrency+")")+" ")])])]),_c("tbody",_vm._l(_vm.lineItems,(function(lineItem,index){return _c("tr",{key:index},[_c("td",{staticStyle:{padding:"0"}},[_c("el-form",{ref:"lineItem-description-"+index,refInFor:!0,staticClass:"table-row",attrs:{rules:_vm.descriptionValidationRules,model:lineItem}},[_c("el-row",[_c("el-col",{attrs:{span:4}},[_c("el-select",{staticClass:"fc-select-suffix-hide fc-select-icon fc-quote-item-select",on:{change:function($event){return _vm.lineItemChangeAction(lineItem,index)}},model:{value:lineItem.type,callback:function($$v){_vm.$set(lineItem,"type",$$v)},expression:"lineItem.type"}},[_c("template",{slot:"prefix"},[_c("InlineSvg",{attrs:{src:_vm.getLineItemTypeObj(lineItem.type).icon,iconClass:_vm.getLineItemTypeObj(lineItem.type).iconClass}}),_c("i",{staticClass:"el-icon-caret-bottom"})],1),_vm._l(_vm.lineItemTypes,(function(item){return _c("el-option",{key:item.type,attrs:{label:"",value:item.type}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{attrs:{src:item.icon,iconClass:item.iconClass}}),_c("div",{staticClass:"pR40"},[_vm._v(" "+_vm._s(item.label)+" ")])],1)])}))],2)],1),_vm.getLineItemsList(lineItem.type)?_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:_vm.lineItemTypesMap[lineItem.type].model,required:!0}},[_vm.showLookupField?_c("FLookupFieldWrapper",{staticClass:"width100 fc-input-full-border-select2 lookup-lineItem fc-quoation-form-select",attrs:{field:_vm.currentFieldObject(lineItem)},on:{recordSelected:function($event){return _vm.lineItemChangeAction(lineItem,index)}},model:{value:lineItem[""+_vm.lineItemTypesMap[lineItem.type].model].id,callback:function($$v){_vm.$set(lineItem[""+_vm.lineItemTypesMap[lineItem.type].model],"id",$$v)},expression:"\n                      lineItem[`${lineItemTypesMap[lineItem.type].model}`].id\n                    "}}):_vm._e()],1)],1):_vm._e(),_vm.getLineItemsList(lineItem.type)?_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-black-13 text-left pL10 line-height20 mR10 mT10"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"description",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border2 width100 fc-quotation-first-td",attrs:{placeholder:_vm.$t("common.wo_report.report_description"),type:"textarea",resize:"none",autosize:{minRows:2,maxRows:100}},model:{value:lineItem.description,callback:function($$v){_vm.$set(lineItem,"description",$$v)},expression:"lineItem.description"}})],1)],1)]):_c("el-col",{attrs:{span:20}},[_c("div",{staticClass:"fc-black-13 text-left pL10 line-height20 mR10 width100 mL10 fc-desc-width"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"description",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border2 width100 fc-quotation-first-td",attrs:{type:"textarea",placeholder:_vm.$t("common.wo_report.report_description"),resize:"none",autosize:{minRows:2,maxRows:100}},model:{value:lineItem.description,callback:function($$v){_vm.$set(lineItem,"description",$$v)},expression:"lineItem.description"}})],1)],1)])],1)],1)],1),_c("td",[_c("el-form",{ref:"lineItem-unitPrice-"+index,refInFor:!0,staticClass:"table-row",attrs:{rules:_vm.unitPriceValidationRules,model:lineItem}},[_c("div",{staticClass:"fc-black-13 text-right"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"unitPrice",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.header.unit_price"),type:"number"},model:{value:lineItem.unitPrice,callback:function($$v){_vm.$set(lineItem,"unitPrice",_vm._n($$v))},expression:"lineItem.unitPrice"}})],1)],1),[2,4].includes(Number(lineItem.type))?_c("div",{staticClass:"fc-grey7-12 pR10 pT5"},[_vm._v(" "+_vm._s("per hr")+" ")]):_vm._e()])],1),_c("td",[_c("el-form",{ref:"lineItem-quantity-"+index,refInFor:!0,staticClass:"table-row",attrs:{rules:_vm.quantityValidationRules,model:lineItem}},[_c("div",{staticClass:"fc-black-13"},[_c("el-form-item",{staticClass:"hide-error",attrs:{required:!0,prop:"quantity"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common._common.quantity"),type:"number"},model:{value:lineItem.quantity,callback:function($$v){_vm.$set(lineItem,"quantity",$$v)},expression:"lineItem.quantity"}})],1)],1)])],1),_c("td",[_c("div",{staticClass:"fc-black-13"},[_c("el-select",{staticClass:"width100 fc-input-full-border2 fc-form-select-grey-txt",attrs:{filterable:""},model:{value:lineItem.unitOfMeasure,callback:function($$v){_vm.$set(lineItem,"unitOfMeasure",$$v)},expression:"lineItem.unitOfMeasure"}},_vm._l(_vm.uomFieldOptions,(function(item,index){return _c("el-option",{key:index,attrs:{label:item.label,value:item.value}})})),1)],1)]),_vm.showMarkupValue&&!_vm.isGlobalMarkup?_c("td",[_c("el-form",{ref:"lineItem-markup-"+index,refInFor:!0,staticClass:"table-row",attrs:{model:lineItem}},[_c("div",{staticClass:"fc-black-13 text-right"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"unitPrice",required:!1}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"%",type:"number"},model:{value:lineItem.markup,callback:function($$v){_vm.$set(lineItem,"markup",_vm._n($$v))},expression:"lineItem.markup"}})],1)],1),[2,4].includes(Number(lineItem.type))?_c("div",{staticClass:"fc-grey7-12 pR10 pT5"},[_vm._v(" "+_vm._s("per hr")+" ")]):_vm._e()])],1):_vm._e(),1!==_vm.$helpers.taxMode()||_vm.hideTaxField?_vm._e():_c("td",[_c("el-select",{staticClass:"width100 fc-input-full-border2 fc-form-select-grey-txt",attrs:{filterable:"",clearable:""},on:{clear:function($event){return _vm.clearTaxLineItem(index)}},model:{value:lineItem.tax,callback:function($$v){_vm.$set(lineItem,"tax",$$v)},expression:"lineItem.tax"}},[_c("el-option-group",{key:"1",attrs:{label:"Tax Groups"}},_vm._l(_vm.groupedTaxes,(function(tax,index){return _c("el-option",{key:index,attrs:{label:tax.isActive?tax.name+" ("+tax.rate+" %)":tax.name+"* ("+tax.rate+" %)",value:tax}})})),1),_c("el-option-group",{key:"2",attrs:{label:_vm.groupedTaxes.length>0?"Individual Taxes":""}},_vm._l(_vm.individualTaxes,(function(tax,index){return _c("el-option",{key:index,attrs:{label:tax.isActive?tax.name+" ("+tax.rate+" %)":tax.name+"* ("+tax.rate+" %)",value:tax}})})),1)],1),_vm.getTaxRate(lineItem)?_c("div",{staticClass:"fc-grey7-12 pR10 pT5"},[_vm._v(" "+_vm._s(_vm.getTaxRate(lineItem)+" %")+" ")]):_vm._e()],1),_c("td",{staticClass:"text-right"},[_c("div",{staticClass:"fc-black-13 text-right pT18 fc-quotation-total"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.getLineItemTotalCost(lineItem)))+" ")]),_c("div",{staticClass:"fc-form-tax-actions",class:{"quo-actions":5===lineItem.type}},[_c("div",{staticClass:"flex-middle"},[_vm.lineItems.length-1===index?_c("i",{staticClass:"el-icon-circle-plus-outline fc-row-add-icon f20 bold pL5",on:{click:function($event){return _vm.addLineItems()}}}):_vm._e(),_vm.lineItems.length>1?_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold pL10",on:{click:function($event){return _vm.removeLineItems(index)}}}):_vm._e()])])])])})),0)]),_c("div",{staticClass:"d-flex flex-row"},[_c("div",{staticClass:"flex-1"},[_c("div",{staticClass:"flex-middle mT20"},[_c("div",[null==_vm.model.shippingCharges||null==_vm.model.miscellaneousCharges||null===_vm.model.adjustmentsCost?_c("el-dropdown",{on:{command:function(action){return _vm.addCost(action)}}},[_c("el-button",{staticClass:"fc-bordrer-btn-grey"},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" "+_vm._s(_vm.$t("common._common.additional_cost"))+" ")]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[null==_vm.model.shippingCharges?_c("el-dropdown-item",{key:1,attrs:{command:"shippingCharges"}},[_vm._v(_vm._s(_vm.$t("common.products.add_shipping_charges")))]):_vm._e(),null==_vm.model.miscellaneousCharges?_c("el-dropdown-item",{key:2,attrs:{command:"miscellaneousCharges"}},[_vm._v(_vm._s(_vm.$t("common.products.add_misc_charges")))]):_vm._e(),null===_vm.model.adjustmentsCost?_c("el-dropdown-item",{key:3,attrs:{command:"adjustmentsCost"}},[_vm._v(_vm._s(_vm.$t("common.products.add_adjustment_costs")))]):_vm._e()],1)],1):_vm._e()],1),_vm.discountVisibility?_vm._e():_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"fc-id bold pointer f14",on:{click:function($event){return _vm.addCost("discount")}}},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" "+_vm._s(_vm.$t("common.products.add_discount"))+" ")])])])]),_c("div",{class:1===_vm.$helpers.taxMode()?"flexWidthQuote":"flexWidth0"},[_c("el-form",{ref:"lineItem-additionalCosts",attrs:{rules:_vm.additionalCostsRules,model:_vm.model}},[_vm.isGlobalMarkup&&_vm.lineItems.length&&_vm.showMarkupValue?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6"},[_vm._v(" "+_vm._s("Markup ("+_vm.getDefaultMarkupValue(_vm.model.markup)+")%")+" "),_c("el-tooltip",{staticClass:"m4",attrs:{effect:"dark",content:_vm.markupContent,placement:"top-start"}},[_c("i",{staticClass:"el-icon-warning-outline warning-icon"})])],1)]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.getTotalMarkupAmount))+" ")])])],1):_vm._e(),_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6"},[_vm._v(" "+_vm._s(_vm.$t("common._common.sub_total"))+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.subTotal))+" ")])])],1),1===_vm.$helpers.discountMode()?_c("DiscountSegment",{attrs:{discountVisibility:_vm.discountVisibility,model:_vm.model,discount:_vm.discount,currency:_vm.lineItemCurrency},on:{"update:discountVisibility":function($event){_vm.discountVisibility=$event},"update:discount-visibility":function($event){_vm.discountVisibility=$event}}}):_vm._e(),1===_vm.$helpers.discountMode()&&_vm.discount?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6"},[_vm._v(" "+_vm._s(_vm.$t("common.header.adjusted_total"))+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right bold"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.getAdjustedTotal))+" ")])])],1):_vm._e(),_c("TaxSegment",{attrs:{model:_vm.model,individualTaxes:_vm.individualTaxes,groupedTaxes:_vm.groupedTaxes,showTotalTax:_vm.showTotalTax,totalTax:_vm.totalTax,taxSplitUp:_vm.taxSplitUp}}),2===_vm.$helpers.discountMode()?_c("DiscountSegment",{attrs:{discountVisibility:_vm.discountVisibility,model:_vm.model,discount:_vm.discount,currency:_vm.lineItemCurrency},on:{"update:discountVisibility":function($event){_vm.discountVisibility=$event},"update:discount-visibility":function($event){_vm.discountVisibility=$event}}}):_vm._e(),null!=_vm.model.shippingCharges?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right text-uppercase fw6"},[_vm._v(" "+_vm._s(_vm.$t("common.header.shipping_charges"))+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td pT10",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"shippingCharges"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100 fc-input-text-right",attrs:{placeholder:_vm.$t("common.header.shipping_charges"),type:"number"},model:{value:_vm.model.shippingCharges,callback:function($$v){_vm.$set(_vm.model,"shippingCharges",$$v)},expression:"model.shippingCharges"}})],1)],1)]),_c("div",{staticClass:"fc-form-action-total-remove",on:{click:function($event){return _vm.removeCost("shippingCharges")}}},[_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold"})])],1):_vm._e(),null!=_vm.model.miscellaneousCharges?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.header.misc_charges"))+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td pT10",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"miscellaneousCharges"}},[_c("el-input",{staticClass:"fc-input-full-border2 width100 fc-input-text-right",attrs:{placeholder:_vm.$t("common.header.misc_charges"),type:"number"},model:{value:_vm.model.miscellaneousCharges,callback:function($$v){_vm.$set(_vm.model,"miscellaneousCharges",$$v)},expression:"model.miscellaneousCharges"}})],1)],1)]),_c("div",{staticClass:"fc-form-action-total-remove",on:{click:function($event){return _vm.removeCost("miscellaneousCharges")}}},[_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold"})])],1):_vm._e(),null!=_vm.model.adjustmentsCost?_c("el-col",{staticClass:"position-relative",attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fw6 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.header.adjustment_cost"))+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td pT10",attrs:{span:8}},[_c("div",{staticClass:"fc-black-12 text-right"},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"adjustmentsCost"}},[_c("el-input",{staticClass:"fc-input-full-border2 fc-input-text-right width100",attrs:{placeholder:_vm.$t("common.header.adjustment_cost"),type:"number"},model:{value:_vm.model.adjustmentsCost,callback:function($$v){_vm.$set(_vm.model,"adjustmentsCost",$$v)},expression:"model.adjustmentsCost"}})],1)],1)]),_c("div",{staticClass:"fc-form-action-total-remove",on:{click:function($event){return _vm.removeCost("adjustmentsCost")}}},[_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold"})])],1):_vm._e(),_c("el-col",{attrs:{span:24}},[_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-tax-table-left-border fc-form-total-td-bg",attrs:{span:16}},[_c("div",{staticClass:"fc-black-12 text-right fwBold"},[_vm._v(" "+_vm._s(_vm.$t("common.header.total_amount")+" ("+_vm.lineItemCurrency+")")+" ")])]),_c("el-col",{staticClass:"fc-form-tax-table-right-border fc-border-form-table-cal-td fc-form-total-td-bg",attrs:{span:8}},[_c("div",{staticClass:"label-txt-black text-right fwBold"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.totalAmount))+" ")])])],1)],1)],1)])])},FQuoteLineItemvue_type_template_id_29040f83_staticRenderFns=[],FQuoteLineItemvue_type_script_lang_js={props:["model","field","lineItems","isEdit","module","currencyObj","initialCurrency","hasMultiCurrencyFieldInModel"],mixins:[LineItemsMixin/* default */.Z],components:{DiscountSegment:QuoteFormDiscountSegment,TaxSegment:FormTaxSegment,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z,FNewCurrencyField:FNewCurrencyField/* default */.Z},data:function(){return{markupContent:"The global markup value is used.",showLookupField:!0,numberFormater:null,currencyData:{},fields:{itemTypes:{lookupModule:{name:"itemTypes",displayName:"Item Type"},multiple:!1},toolTypes:{lookupModule:{name:"toolTypes",displayName:"Tool Type"},multiple:!1},services:{lookupModule:{name:"service",displayName:"Service"},multiple:!1},labours:{lookupModule:{name:"labour",displayName:"Labour"},multiple:!1}},lineItemTypesMap:{1:{list:"itemTypes",model:"itemType"},2:{list:"toolTypes",model:"toolType"},3:{list:"services",model:"service"},4:{list:"labours",model:"labour"},5:{model:"others"}},lineItemTypes:[{value:"items",label:this.$t("common.products.items"),icon:"svgs/items",iconClass:"icon icon-sm-md vertical-sub mR10 stroke-grey",type:1},{value:"service",label:this.$t("common.header.service"),icon:"svgs/service",iconClass:"icon icon-sm-md vertical-sub mR10 fill-grey",type:3},{value:"others",label:this.$t("common._common.others"),icon:"svgs/pencil",iconClass:"icon icon-sm vertical-sub mR10",type:5}]}},created:function(){this.fetchNumberFormater(),this.init()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencyList:function(state){return state.activeCurrencies}})),{},{hideTaxField:function(){return this.$getProperty(this,"field.config.hideTaxField")}}),watch:{"currencyData.currencyCode":{handler:function(newVal,oldVal){if(newVal!=oldVal){var lineItems=(this.lineItems||[]).map((function(item){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},item),{},{currencyCalculated:!1})}));this.updateLineItem(lineItems),this.getExchangeRate(oldVal)}},deep:!0}},methods:{init:function(){var _this=this,_ref=this||{},lineItems=_ref.lineItems;this.loading=!0,Promise.all([this.loadItemTypes(),this.loadTaxes(lineItems),this.loadServices(),this.loadLineItemsModuleMeta(),this.fetchQuoteSetting()]).then((function(){_this.setCurrencyData(),_this.loading=!1})),((this.model||{}).discountAmount||(this.model||{}).discountPercentage)&&((this.model||{}).discountPercentage&&(this.model.discountAmount=null),this.discountVisibility=!0)},fetchNumberFormater:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var route,_yield$API$get,data,_data$data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return route="v1/setup/numberformat/fetch",_context.next=3,api/* API */.bl.get(route);case 3:return _yield$API$get=_context.sent,data=_yield$API$get.data,data&&null!==data&&void 0!==data&&null!==(_data$data=data.data)&&void 0!==_data$data&&_data$data.numberformat&&(_this2.numberFormater=data.data.numberformat),_context.abrupt("return",!0);case 7:case"end":return _context.stop()}}),_callee)})))()},formatValue:function(value){return(0,validation/* isEmpty */.xb)(value)?value:null==this.numberFormater?559===this.$org.id?this.$d3.format(",.3f")(value):this.$d3.format(",.2f")(value):this.$d3.format(",")(value)},getLineItemTypeObj:function(type){return this.lineItemTypes.find((function(item){return item.type===type}))||{}},addLineItems:function(){var lineItems=this.lineItems,newLineItem=(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.QUOTE_LINE_ITEM_DEFAULTS),_ref2=this.currencyDetails||{},currencyCode=_ref2.currencyCode,exchangeRate=_ref2.exchangeRate;lineItems.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},newLineItem),{},{currencyCode:currencyCode,exchangeRate:exchangeRate,currencyCalculated:!1}))},updateLineItem:function(lineItems){this.$emit("update:lineItems",lineItems),this.$emit("update:model",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.model),{},{lineItems:lineItems}))},loadItemTypes:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$fetchAll,list,error,_error$message,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.fetchAll("itemTypes");case 2:_yield$API$fetchAll=_context2.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error?(_error$message=error.message,message=void 0===_error$message?_this3.$t("common._common.error_occured_while_fetching_item_ypes_list"):_error$message,_this3.$message.error(message)):_this3.itemTypes=list||[];case 6:case"end":return _context2.stop()}}),_callee2)})))()},loadServices:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get2,data,error,_error$message2,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,api/* API */.bl.get("/v2/service/all");case 2:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?(_error$message2=error.message,message=void 0===_error$message2?_this4.$t("common._common.error_occured_while_fetching_services_list"):_error$message2,_this4.$message.error(message)):_this4.services=data.services||[];case 6:case"end":return _context3.stop()}}),_callee3)})))()},lineItemChangeAction:function(val,index){var _this5=this;this.showLookupField=!1;var _val=val,type=_val.type,lineItemTypesMap=this.lineItemTypesMap,lineItems=this.lineItems;if("others"!==lineItemTypesMap[type].model){var _lineItemTypesMap$typ=lineItemTypesMap[type],model=_lineItemTypesMap$typ.model,list=_lineItemTypesMap$typ.list,typeId=val[model].id,typeData=this[list].filter((function(type){return type.id===typeId})),unitPrice=this.$getProperty(typeData,[0,"sellingPrice"],null),description=this.$getProperty(typeData,[0,"description"],null);unitPrice=(0,validation/* isEmpty */.xb)(unitPrice)?null:unitPrice;var _ref3=typeData||{},currencyCode=_ref3.currencyCode;val=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},val),{},{unitPrice:unitPrice,description:description,currencyCalculated:!1}),lineItems=lineItems.map((function(currVal,currIndex){return currIndex===index?val:currVal})),this.updateLineItem(lineItems);var itemObj={type:model,typeId:typeId};this.getExchangeRate(currencyCode,itemObj)}this.$nextTick((function(){_this5.showLookupField=!0}))},loadLineItemsModuleMeta:function(){var _this6=this;return this.$store.dispatch("view/loadModuleMeta","quotelineitems").then((function(_ref4){var _ref4$fields=_ref4.fields,fields=void 0===_ref4$fields?[]:_ref4$fields,uomField=fields.filter((function(field){return"unitOfMeasure"===field.name}));if(!(0,validation/* isEmpty */.xb)(uomField)){var values=_this6.$getProperty(uomField,[0,"values"],[]);_this6.uomFieldOptions=(0,utils_utility_methods/* constructEnumFieldOptions */.rr)(values||[])}}))},currentFieldObject:function(lineItem){var _ref5=lineItem||{},type=_ref5.type;if(null!==type)return this.fields["".concat(this.lineItemTypesMap[type].list)]},clearTaxLineItem:function(index){this.lineItems[index].tax=null}}},forms_FQuoteLineItemvue_type_script_lang_js=FQuoteLineItemvue_type_script_lang_js,FQuoteLineItem_component=(0,componentNormalizer/* default */.Z)(forms_FQuoteLineItemvue_type_script_lang_js,FQuoteLineItemvue_type_template_id_29040f83_render,FQuoteLineItemvue_type_template_id_29040f83_staticRenderFns,!1,null,null,null)
/* harmony default export */,FQuoteLineItem=FQuoteLineItem_component.exports,FQuoteAddressvue_type_template_id_51226877_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-form-address"},[_c("el-row",{staticClass:"d-flex"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-black-12 text-left bold height40 line-height40 position-relative fc-text-underline-half mL10 mR10"},[_vm._v(" BILLING ADDRESS ")])]),_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-black-12 text-left bold height40 line-height40 position-relative fc-text-underline-half mL10 mR10 mL63"},[_vm._v(" SHIPPING ADDRESS ")])]),_c("el-col",{staticClass:"flex-middle",attrs:{span:4}},[_c("el-dropdown",{on:{command:function(action){return _vm.copyBillToAddress(action)}}},[_c("el-button",{staticClass:"fc-bordrer-btn-grey"},[_vm._v(" COPY ADDRESS "),_c("i",{staticClass:"el-icon-arrow-down"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{key:1,attrs:{command:"billTo"}},[_vm._v("Billing to Shipping")]),_c("el-dropdown-item",{key:2,attrs:{command:"shipTo"}},[_vm._v("Shipping to Billing")])],1)],1),_c("span",{staticClass:"fc-link3 f14 fc-text-underline2 pointer mL20",on:{click:function($event){return _vm.resetAddress()}}},[_vm._v("Reset")])],1)],1),_c("div",{staticClass:"fc-form-single-el-block mT30"},[_c("el-row",{staticClass:"d-flex"},[_c("el-col",{attrs:{span:10}},[_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.street"),prop:"billToAddress.street","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_street")},model:{value:(_vm.model.billToAddress||{}).street,callback:function($$v){_vm.$set(_vm.model.billToAddress||{},"street",$$v)},expression:"(model.billToAddress || {}).street"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.city_district"),prop:"billToAddress.city","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.entre_city_district")},model:{value:(_vm.model.billToAddress||{}).city,callback:function($$v){_vm.$set(_vm.model.billToAddress||{},"city",$$v)},expression:"(model.billToAddress || {}).city"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.state_province_county"),prop:"billToAddress.state","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_state_province_county")},model:{value:(_vm.model.billToAddress||{}).state,callback:function($$v){_vm.$set(_vm.model.billToAddress||{},"state",$$v)},expression:"(model.billToAddress || {}).state"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.zipcode"),prop:"billToAddress.zip","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_zipcode"),type:"number"},model:{value:(_vm.model.billToAddress||{}).zip,callback:function($$v){_vm.$set(_vm.model.billToAddress||{},"zip",$$v)},expression:"(model.billToAddress || {}).zip"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.country"),prop:"billToAddress.country","label-width":"0px"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("setup.setup_profile.enter_country")},model:{value:(_vm.model.billToAddress||{}).country,callback:function($$v){_vm.$set(_vm.model.billToAddress||{},"country",$$v)},expression:"(model.billToAddress || {}).country"}},_vm._l(_vm.countryList,(function(country){return _c("el-option",{key:country.value,attrs:{label:country.label,value:String(country.value)}})})),1)],1)],1),_c("el-col",{staticClass:"fc-flex50",attrs:{span:10}},[_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.street"),prop:"shipToAddress.street","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_street")},model:{value:(_vm.model.shipToAddress||{}).street,callback:function($$v){_vm.$set(_vm.model.shipToAddress||{},"street",$$v)},expression:"(model.shipToAddress || {}).street"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.city_district"),prop:"shipToAddress.city","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.entre_city_district")},model:{value:(_vm.model.shipToAddress||{}).city,callback:function($$v){_vm.$set(_vm.model.shipToAddress||{},"city",$$v)},expression:"(model.shipToAddress || {}).city"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.state_province_county"),prop:"shipToAddress.state","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_state_province_county")},model:{value:(_vm.model.shipToAddress||{}).state,callback:function($$v){_vm.$set(_vm.model.shipToAddress||{},"state",$$v)},expression:"(model.shipToAddress || {}).state"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.zipcode"),prop:"shipToAddress.zip","label-width":"0px"}},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_zipcode"),type:"number"},model:{value:(_vm.model.shipToAddress||{}).zip,callback:function($$v){_vm.$set(_vm.model.shipToAddress||{},"zip",$$v)},expression:"(model.shipToAddress || {}).zip"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{label:_vm.$t("setup.setup_profile.country"),prop:"shipToAddress.country","label-width":"0px"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("setup.setup_profile.enter_country")},model:{value:(_vm.model.shipToAddress||{}).country,callback:function($$v){_vm.$set(_vm.model.shipToAddress||{},"country",$$v)},expression:"(model.shipToAddress || {}).country"}},_vm._l(_vm.countryList,(function(country){return _c("el-option",{key:country.value,attrs:{label:country.label,value:String(country.value)}})})),1)],1)],1)],1)],1)],1)},FQuoteAddressvue_type_template_id_51226877_staticRenderFns=[],router=(__webpack_require__(169358),__webpack_require__(329435)),vue_router_esm=__webpack_require__(578345),FQuoteAddressvue_type_script_lang_js={props:["model"],data:function(){return{countryList:countries/* default */.Z,copyAddress:!0,tenantLoading:!1,quoteFormsList:[],customerTypeData:null}},computed:{getRedirectFormId:function(){var _this$customerType$id=this.customerType.id,id=void 0===_this$customerType$id?-1:_this$customerType$id;if(id>-1){var customerTypeToFormsMap={1:"tenantquoteform",2:"clientquoteform",3:"default_quote_web_maintenance",4:"vendorquoteform"};if(id){var form=this.quoteFormsList.find((function(rt){return rt.name===customerTypeToFormsMap[id]?rt:null}));if(null!==form&&void 0!==form&&form.id)return form.id}}else if(this.quoteFormsList.length&&this.quoteFormsList[0]&&this.quoteFormsList[0].id)return this.quoteFormsList[0].id;return null},tenantId:function(){return this.$getProperty(this.model,"tenant.id",-1)},billToAddress:function(){return this.$getProperty(this.getRouterQuerryData,"billToAddress",-1)},customerType:function(){return this.$getProperty(this.model,"customerType",-1)},getRouterQuerryData:function(){var $route=this.$route,_ref=$route||{},query=_ref.query;return(0,validation/* isEmpty */.xb)(query)?null:query}},watch:{tenantId:function(){this.fillAddressFields()},billToAddress:function(){this.fillQuerryAddress()},customerType:{handler:function(){this.quoteFormsList.length&&this.quoteFormsList.length>1&&this.handleChangeCustomertype()},deep:!0}},mounted:function(){this.loadQuoteDependencies(),this.billToAddress&&this.fillQuerryAddress()},methods:{setDefaultCustomerType:function(){var _this$customerType;null!==(_this$customerType=this.customerType)&&void 0!==_this$customerType&&_this$customerType.id&&(this.customerTypeData=this.customerType.id)},clearFormData:function(){this.$set(this.model,"billToAddress",{})},loadQuoteDependencies:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.setDefaultCustomerType(),_context.next=3,_this.loadQuoteForms();case 3:case"end":return _context.stop()}}),_callee)})))()},loadQuoteForms:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var url,_yield$API$get,data,error,message,_ref2,_ref2$forms,forms;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return url="/v2/forms?moduleName=".concat("quote"),_context2.next=3,api/* API */.bl.get(url);case 3:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(message=error.message,_this2.$message.error(message)):(_ref2=data||{},_ref2$forms=_ref2.forms,forms=void 0===_ref2$forms?[]:_ref2$forms,_this2.quoteFormsList=forms);case 7:case"end":return _context2.stop()}}),_callee2)})))()},handleChangeCustomertype:function(){var _this$customerType2,_this3=this;if(null!==(_this$customerType2=this.customerType)&&void 0!==_this$customerType2&&_this$customerType2.id&&this.customerTypeData!==this.customerType.id){var dialogObj={title:"Change Quote type",htmlMessage:"Changing the Quote type may impact certain fields within the form. Do you want to proceed?",rbClass:"confirm-dialog-btn confirm-dialog-btn2",rbLabel:"proceed"};this.$dialog.confirm(dialogObj).then((function(value){value&&_this3.changeQuoteForm()}))}},changeQuoteForm:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this4.clearFormData();case 2:_this4.redirectToQuotationForm();case 3:case"end":return _context3.stop()}}),_callee3)})))()},redirectToQuotationForm:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _this$customerType3,_this$customerType4,query=this.$helpers.cloneObject(this.getRouterQuerryData)||{};
// let { name } = findRouteForModule('quote', pageTypes.CREATE) || {}
this.getRedirectFormId&&(query["formId"]=this.getRedirectFormId),delete query.billToAddress,delete query.customerType,null!==(_this$customerType3=this.customerType)&&void 0!==_this$customerType3&&_this$customerType3.id&&4===this.customerType.id&&delete query.vendor,null!==(_this$customerType4=this.customerType)&&void 0!==_this$customerType4&&_this$customerType4.id&&this.$set(query,"customerType",this.customerType.id);var currentPath=this.$route.path;this.$router.push({path:currentPath,query:query}).catch((function(err){if(!vue_router_esm/* default.isNavigationFailure */.ZP.isNavigationFailure(err,vue_router_esm/* default.NavigationFailureType */.ZP.NavigationFailureType.duplicated))
// Handle other errors
throw err}))}},copyBillToAddress:function(action){"billTo"===action?this.model.shipToAddress=this.$helpers.cloneObject(this.model.billToAddress):"shipTo"===action&&(this.model.billToAddress=this.$helpers.cloneObject(this.model.shipToAddress))},resetAddress:function(){this.model.shipToAddress=this.$helpers.cloneObject(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS),this.model.billToAddress=this.$helpers.cloneObject(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS)},fillQuerryAddress:function(){var billToAddress=JSON.parse(this.billToAddress);billToAddress&&this.copyAddressValueTo(billToAddress,"billToAddress")},fillAddressFields:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$API$fetchRecor,tenant,error,_error$message,message,dialogObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!(_this5.tenantId>0)){_context4.next=7;break}return _context4.next=3,api/* API */.bl.fetchRecord("tenant",{id:_this5.tenantId});case 3:_yield$API$fetchRecor=_context4.sent,tenant=_yield$API$fetchRecor.tenant,error=_yield$API$fetchRecor.error,(0,validation/* isEmpty */.xb)(error)?(0,validation/* isEmpty */.xb)(tenant.address)||(dialogObj={title:"Fill Address",htmlMessage:"Copy Tenant address to Billing address.",rbClass:"confirm-dialog-btn",rbLabel:"Copy"},_this5.$dialog.confirm(dialogObj).then((function(value){value&&_this5.copyAddressValueTo(tenant.address,"billToAddress")}))):(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Tenant":_error$message,_this5.$message.error(message));case 7:case"end":return _context4.stop()}}),_callee4)})))()},copyAddressValueTo:function(address,field){var _this6=this;address=this.$helpers.cloneObject(address);var loactionKeys=["street","city","state","zip","lat","lng","country"];loactionKeys.forEach((function(key){_this6.$set(_this6.model[field],key,address[key])}))}}},forms_FQuoteAddressvue_type_script_lang_js=FQuoteAddressvue_type_script_lang_js,FQuoteAddress_component=(0,componentNormalizer/* default */.Z)(forms_FQuoteAddressvue_type_script_lang_js,FQuoteAddressvue_type_template_id_51226877_render,FQuoteAddressvue_type_template_id_51226877_staticRenderFns,!1,null,null,null)
/* harmony default export */,FQuoteAddress=FQuoteAddress_component.exports,FSubFormWrapper=__webpack_require__(790142),FScheduleFieldvue_type_template_id_ae6b3e40_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.$validation.isEmpty(_vm.scheduleInfo)?_vm._e():_c("div",{staticClass:"schedule-field-container"},[_c("div",{staticClass:"d-flex"},[_c("f-date-picker",{staticClass:"fc-input-full-border2 form-date-picker start-date",attrs:{hideClear:!0,type:"date",pickerOptions:_vm.pickerOptions},model:{value:_vm.startTime,callback:function($$v){_vm.startTime=$$v},expression:"startTime"}}),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 start-time",attrs:{placeholder:"--/--"},model:{value:_vm.startTime,callback:function($$v){_vm.startTime=$$v},expression:"startTime"}},_vm._l(_vm.startTimeArr,(function(time,index){return _c("el-option",{key:index,attrs:{label:time.label,value:time.value}})})),1),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 end-time",attrs:{placeholder:"--/--"},model:{value:_vm.endTime,callback:function($$v){_vm.endTime=$$v},expression:"endTime"}},_vm._l(_vm.endTimeArr,(function(group,index){return _c("el-option-group",{key:index,attrs:{label:group.label}},_vm._l(group.options,(function(time,index){return _c("el-option",{key:index,attrs:{label:time.label,value:time.value}})})),1)})),1)],1),_c("div",[_c("el-checkbox",{model:{value:_vm.model.isRecurring,callback:function($$v){_vm.$set(_vm.model,"isRecurring",$$v)},expression:"model.isRecurring"}},[_vm._v("Recurring Visit")])],1),_vm.model.isRecurring?_c("div",{staticClass:"mT15"},[_c("FRecurringSchedular",{attrs:{scheduleInfoObj:_vm.scheduleInfo,pickerOptions:_vm.pickerOptions}})],1):_vm._e()])},FScheduleFieldvue_type_template_id_ae6b3e40_staticRenderFns=[],FRecurringSchedularvue_type_template_id_3a280a20_render=(__webpack_require__(397895),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"reccuring-schedular-container"},[_c("div",{staticClass:"recurring-type"},[_c("div",{staticClass:"label"},[_vm._v("Recurrence Type")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.scheduleInfoObj.frequencyType,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"frequencyType",$$v)},expression:"scheduleInfoObj.frequencyType"}},_vm._l(_vm.frequencyTypes,(function(type,index){return _c("el-option",{key:index,attrs:{label:type.label,value:type.value}})})),1)],1),_vm.canShowRecurringBasedOn?_c("div",{staticClass:"recurring-monthly-based-on mT15"},[_c("div",{staticClass:"label"},[_vm._v("Based On")]),_c("el-radio-group",{model:{value:_vm.scheduleInfoObj.monthlyBasedOn,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"monthlyBasedOn",$$v)},expression:"scheduleInfoObj.monthlyBasedOn"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"basedOnDate"}},[_vm._v("Date")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"basedOnWeek"}},[_vm._v("Week")])],1)],1):_vm._e(),_c("div",{staticClass:"d-flex flex-wrap"},[_c("div",{staticClass:"recurring-every mT15"},[_c("div",{staticClass:"label"},[_vm._v("Every")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.scheduleInfoObj.frequency,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"frequency",$$v)},expression:"scheduleInfoObj.frequency"}},_vm._l(_vm.everyTypes,(function(type,index){return _c("el-option",{key:index,attrs:{label:type.label,value:type.value}})})),1)],1),_vm.canShowRecurringOn?_c("div",{staticClass:"recurring-on mT15",class:_vm.canShowWeekFrequency||_vm.canShowYearly?"form-one-column":"pL10"},[_c("div",{staticClass:"label"},[_vm._v("On")]),_c("div",{staticClass:"d-flex",class:_vm.canShowYearlyWeekFrequency?"flex-wrap":""},[_vm.canShowWeekFrequency?_c("el-select",{staticClass:"weeks-frequency fc-input-full-border-select2 width100",model:{value:_vm.scheduleInfoObj.weekFrequency,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"weekFrequency",$$v)},expression:"scheduleInfoObj.weekFrequency"}},_vm._l(_vm.weeksFrequencyHash,(function(week,index){return _c("el-option",{key:index,attrs:{label:week.label,value:week.value}})})),1):_vm._e(),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{multiple:"","collapse-tags":""},model:{value:_vm.scheduleInfoObj.values,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"values",$$v)},expression:"scheduleInfoObj.values"}},_vm._l(_vm.recurringOnTypeOptions,(function(day,index){return _c("el-option",{key:index,attrs:{label:day.label,value:day.value}})})),1),_vm.canShowYearlyWeekFrequency?_c("div",{staticClass:"d-flex mT10 form-one-column"},[_vm.canShowYearlyWeekFrequency?_c("el-select",{staticClass:"weeks-frequency fc-input-full-border-select2 width100",model:{value:_vm.scheduleInfoObj.weekFrequency,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"weekFrequency",$$v)},expression:"scheduleInfoObj.weekFrequency"}},_vm._l(_vm.weeksFrequencyHash,(function(week,index){return _c("el-option",{key:index,attrs:{label:week.label,value:week.value}})})),1):_vm._e(),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{multiple:"","collapse-tags":""},model:{value:_vm.scheduleInfoObj.yearlyDayOfWeekValues,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"yearlyDayOfWeekValues",$$v)},expression:"scheduleInfoObj.yearlyDayOfWeekValues"}},_vm._l(_vm.weekDaysArr,(function(day,index){return _c("el-option",{key:index,attrs:{label:day.label,value:day.value}})})),1)],1):_vm.canShowYearly?_c("div",{staticClass:"yearly-date"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.scheduleInfoObj.yearlyDayValue,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"yearlyDayValue",$$v)},expression:"scheduleInfoObj.yearlyDayValue"}},_vm._l(_vm.monthDatesArr,(function(day,index){return _c("el-option",{key:index,attrs:{label:day.label,value:day.value}})})),1)],1):_vm._e()],1)]):_vm._e(),_c("div",{staticClass:"d-flex form-one-column mT15"},[_c("div",{staticClass:"recurring-end"},[_c("div",{staticClass:"label"},[_vm._v("End")]),_c("f-date-picker",{staticClass:"fc-input-full-border2 form-date-picker start-date",attrs:{hideClear:!0,type:"date",pickerOptions:_vm.pickerOptions},model:{value:_vm.scheduleInfoObj.endTime,callback:function($$v){_vm.$set(_vm.scheduleInfoObj,"endTime",$$v)},expression:"scheduleInfoObj.endTime"}})],1)])])])}),FRecurringSchedularvue_type_template_id_3a280a20_staticRenderFns=[],frequencyTypesHash={1:"Daily",2:"Weekly",3:"Monthly",5:"Annually"},weeksHash={1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last"},frequencyHash=["Day","Week","Month","Quater","Year"],recurringOnHash=["Weekly","Monthly","Annually"],recurringBasedOnHash=["Monthly","Annually"],FRecurringSchedularvue_type_script_lang_js={props:["scheduleInfoObj","pickerOptions"],components:{FDatePicker:FDatePicker/* default */.Z},computed:{everyTypes:function(){var scheduleInfoObj=this.scheduleInfoObj,frequencyType=scheduleInfoObj.frequencyType,everyTypesArr=[];return new Array(60).fill().forEach((function(_,index){var label="".concat(frequencyHash[frequencyType-1]);label="".concat(label),0!==index&&(label="".concat(index+1," ").concat(label,"s")),everyTypesArr.push({label:label,value:index+1})})),everyTypesArr},frequencyTypes:function(){return(0,utils_utility_methods/* constructFieldOptions */.aE)(frequencyTypesHash)},weekDaysArr:function(){return(0,utils_utility_methods/* constructFieldOptions */.aE)(constant/* default */.Z.WEEK_DAYS)},weeksFrequencyHash:function(){return(0,utils_utility_methods/* constructFieldOptions */.aE)(weeksHash)},monthDatesArr:function(){var date=this.$helpers.getOrgMoment("2012-01-01"),monthDatesArr=[];return new Array(31).fill().forEach((function(_,index){monthDatesArr.push({label:date.format("DDDo"),value:index+1}),date.add(1,"d")})),monthDatesArr},monthsArr:function(){return constant/* default */.Z.MONTHS},selectedFrequencyObj:function(){var scheduleInfoObj=this.scheduleInfoObj,frequencyTypes=this.frequencyTypes,frequencyType=scheduleInfoObj.frequencyType,frequencyObj=frequencyTypes.find((function(frequency){return frequency.value===frequencyType}))||{};return frequencyObj},canShowRecurringBasedOn:function(){var selectedFrequencyObj=this.selectedFrequencyObj,label=selectedFrequencyObj.label;return recurringBasedOnHash.includes(label)},canShowRecurringOn:function(){var selectedFrequencyObj=this.selectedFrequencyObj,label=selectedFrequencyObj.label;return recurringOnHash.includes(label)},canShowWeekFrequency:function(){var selectedFrequencyObj=this.selectedFrequencyObj,scheduleInfoObj=this.scheduleInfoObj,label=selectedFrequencyObj.label,monthlyBasedOn=scheduleInfoObj.monthlyBasedOn;return"Monthly"===label&&"basedOnDate"!==monthlyBasedOn},canShowYearlyWeekFrequency:function(){var selectedFrequencyObj=this.selectedFrequencyObj,scheduleInfoObj=this.scheduleInfoObj,label=selectedFrequencyObj.label,monthlyBasedOn=scheduleInfoObj.monthlyBasedOn;return"Annually"===label&&"basedOnDate"!==monthlyBasedOn},canShowYearly:function(){var selectedFrequencyObj=this.selectedFrequencyObj,label=selectedFrequencyObj.label;return"Annually"===label},recurringOnTypeOptions:function(){var selectedFrequencyObj=this.selectedFrequencyObj,monthDatesArr=this.monthDatesArr,weekDaysArr=this.weekDaysArr,monthsArr=this.monthsArr,scheduleInfoObj=this.scheduleInfoObj,value=selectedFrequencyObj.value,label=selectedFrequencyObj.label,monthlyBasedOn=scheduleInfoObj.monthlyBasedOn;return"Monthly"===label?"basedOnDate"!==monthlyBasedOn?weekDaysArr:monthDatesArr:2===value?weekDaysArr:6===value?monthsArr:monthDatesArr}},watch:{"scheduleInfoObj.frequencyType":{handler:function(){this.resetToDefaultValues()}}},methods:{resetToDefaultValues:function(){this.$set(this.scheduleInfoObj,"values",[1]),this.$set(this.scheduleInfoObj,"weekFrequency",1),this.$set(this.scheduleInfoObj,"yearlyDayValue",1),this.$set(this.scheduleInfoObj,"yearlyDayOfWeekValues",[1])}}},components_FRecurringSchedularvue_type_script_lang_js=FRecurringSchedularvue_type_script_lang_js,FRecurringSchedular_component=(0,componentNormalizer/* default */.Z)(components_FRecurringSchedularvue_type_script_lang_js,FRecurringSchedularvue_type_template_id_3a280a20_render,FRecurringSchedularvue_type_template_id_3a280a20_staticRenderFns,!1,null,null,null)
/* harmony default export */,FRecurringSchedular=FRecurringSchedular_component.exports,isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),FScheduleFieldvue_type_script_lang_js={props:{model:{type:Object,required:!0},config:{type:Object,required:!0}},components:{FDatePicker:FDatePicker/* default */.Z,FRecurringSchedular:FRecurringSchedular},data:function(){return{timeInterval:15,scheduleInfo:null,initScheduleInfo:{endTime:this.$helpers.getOrgMoment().startOf("date").add(1,"d").valueOf(),frequencyType:1,frequency:1,values:[1],weekFrequency:1,yearlyDayValue:1,yearlyDayOfWeekValues:[1],monthlyBasedOn:"basedOnDate"}}},computed:{startTime:{get:function(){var config=this.config,model=this.model,startFieldName=config.startFieldName;return model[startFieldName]},set:function(value){var config=this.config,startFieldName=config.startFieldName;this.$set(this.model,startFieldName,value)}},endTime:{get:function(){var config=this.config,model=this.model,endFieldName=config.endFieldName;return model[endFieldName]},set:function(value){var config=this.config,endFieldName=config.endFieldName;this.$set(this.model,endFieldName,value)}},pickerOptions:function(){var todayDate=this.$helpers.getOrgMoment().startOf("date").valueOf();return{disabledDate:function(time){return time.getTime()<todayDate}}},startTimeArr:function(){return this.constructTimeArr({startHour:0,endHour:24,startMinute:0,endMinute:60,isNextDay:!1})},endTimeArr:function(){var startTime=this.startTime,timesArr=[{label:"",options:[]},{label:"",options:[]}],startHour=this.$helpers.getOrgMoment(startTime).hours(),startMinute=this.$helpers.getOrgMoment(startTime).minutes(),endHour=startHour,endMinute=startMinute;return timesArr[0].options=this.constructTimeArr({startHour:startHour,endHour:24,startMinute:startMinute,endMinute:60,isNextDay:!1}),timesArr[1].options=this.constructTimeArr({startHour:0,endHour:endHour,startMinute:0,endMinute:endMinute,isNextDay:!0}),timesArr}},watch:{startTime:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var endTime=this.$helpers.getOrgMoment(newVal).add(2,"hours").valueOf();this.$set(this,"endTime",endTime)}}},scheduleInfo:{handler:function(newVal){var config=this.config,scheduleJsonName=config.scheduleJsonName,value=(0,utility_methods/* deepCloneObject */.kh)(newVal),serializedValue=this.serializeScheduleInfo(value);this.$set(this.model,scheduleJsonName,serializedValue)},deep:!0}},created:function(){var model=this.model,config=this.config,scheduleJsonName=config.scheduleJsonName,scheduleInfoObj=model[scheduleJsonName];(0,validation/* isEmpty */.xb)(scheduleInfoObj)?this.init():(scheduleInfoObj=this.deserializeScheduleInfo(model[scheduleJsonName]),this.$set(this,"scheduleInfo",scheduleInfoObj))},methods:{init:function(){var timeInterval=this.timeInterval,initScheduleInfo=this.initScheduleInfo,currentHour=this.$helpers.getOrgMoment().hours(),currentMinute=this.$helpers.getOrgMoment().minutes(),nearestMinute=Math.ceil(currentMinute/timeInterval)*timeInterval,startTime=this.$helpers.getOrgMoment({hour:currentHour}).add(nearestMinute,"minutes").valueOf(),endTime=this.$helpers.getOrgMoment(startTime).add(2,"hours").valueOf();this.$set(this,"startTime",startTime),this.$set(this,"endTime",endTime),this.$set(this,"scheduleInfo",(0,utility_methods/* deepCloneObject */.kh)(initScheduleInfo))},constructTimeArr:function(){var _this=this,timeObj=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},startHour=timeObj.startHour,endHour=timeObj.endHour,startMinute=timeObj.startMinute,endMinute=timeObj.endMinute,isNextDay=timeObj.isNextDay,timeInterval=this.timeInterval,startTime=this.startTime,timesArr=[],timeArrLength=endHour-startHour;isNextDay&&(timeArrLength+=1);var lastIndex=timeArrLength-1;return new Array(timeArrLength).fill().forEach((function(_,index){var currentHour=startHour+index,currentMinute=startMinute,lastMin=lastIndex===index?endMinute:60;while(currentMinute<lastMin){var label=_this.$helpers.getOrgMoment({hour:currentHour,minute:currentMinute}).format("h:mm A"),value=_this.$helpers.getOrgMoment({hour:currentHour,minute:currentMinute}).valueOf(),diffInDays=_this.findDiffInDays(startTime,value);diffInDays>0&&(value=_this.$helpers.getOrgMoment(value).add(diffInDays,"days").valueOf()),isNextDay&&(label="".concat(label," +1"),value=_this.$helpers.getOrgMoment(value).add(1,"days").valueOf()),timesArr.push({label:label,value:value}),currentMinute+=timeInterval}currentMinute=0})),timesArr},findDiffInDays:function(startTime,currentTime){var startTimeMoment=this.$helpers.getOrgMoment(startTime),currentTimeMoment=this.$helpers.getOrgMoment(currentTime);return startTimeMoment.diff(currentTimeMoment,"days")},deserializeScheduleInfo:function(scheduleInfo){var schedule=scheduleInfo.schedule,endTime=scheduleInfo.endTime,frequencyType=schedule.frequencyType,deserializedScheduleObj={};return[3,4].includes(frequencyType)?(this.$set(schedule,"monthlyBasedOn",3===frequencyType?"basedOnDate":"basedOnWeek"),schedule.frequencyType=3):[5,6].includes(frequencyType)&&(this.$set(schedule,"monthlyBasedOn",5===frequencyType?"basedOnDate":"basedOnWeek"),schedule.frequencyType=5),schedule.endTime=endTime,deserializedScheduleObj=(0,objectSpread2/* default */.Z)({},schedule),deserializedScheduleObj},
/*
      when `basedOnWeek` is selected for monthly frequency, then frequency type should be 4
      when `basedOnDate` is selected for monthly frequency, then frequency type should be 3
      when `basedOnWeek` is selected for yearly frequency, then frequency type should be 6
      when `basedOnDate` is selected for yearly frequency, then frequency type should be 5
    */
serializeScheduleInfo:function(scheduleInfo){var startTime=this.startTime,monthlyBasedOn=scheduleInfo.monthlyBasedOn,frequencyType=scheduleInfo.frequencyType,endTime=scheduleInfo.endTime,finalScheduleObj={};return[3,5].includes(frequencyType)&&"basedOnWeek"===monthlyBasedOn&&(scheduleInfo.frequencyType=3===frequencyType?4:6),delete scheduleInfo.monthlyBasedOn,delete scheduleInfo.endTime,finalScheduleObj={startTime:startTime,endTime:endTime,schedule:scheduleInfo},finalScheduleObj}}},components_FScheduleFieldvue_type_script_lang_js=FScheduleFieldvue_type_script_lang_js,FScheduleField_component=(0,componentNormalizer/* default */.Z)(components_FScheduleFieldvue_type_script_lang_js,FScheduleFieldvue_type_template_id_ae6b3e40_render,FScheduleFieldvue_type_template_id_ae6b3e40_staticRenderFns,!1,null,null,null)
/* harmony default export */,FScheduleField=FScheduleField_component.exports,FSignaturePad=__webpack_require__(809596),TasksListvue_type_template_id_4b4377f4_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"task-container mB20 wo-task-page"},[_vm.isTasksEmpty?_c("div",{staticClass:"text-center"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/task",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label mB10"}),_c("el-button",{staticClass:"task-add-btn empty mT5",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_task")},on:{click:function($event){return _vm.addNewTaskSection()}}},[_c("img",{attrs:{src:__webpack_require__(511423)}}),_c("span",{staticClass:"btn-label mL5"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_task"))+" ")])])],1):_c("draggable",_vm._b({attrs:{handle:".task-handle",disabled:_vm.disableDrag},model:{value:_vm.tasks,callback:function($$v){_vm.tasks=$$v},expression:"tasks"}},"draggable",_vm.taskSectionDragOptions,!1),_vm._l(_vm.tasks,(function(section,sectionIndex){return _c("div",{key:sectionIndex,staticClass:"task-section"},[_c("div",{staticClass:"task-section-header d-flex mB10"},[_c("div",{staticClass:"task-handle"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_c("el-input",{staticClass:"task-input fc-input-border-remove",attrs:{"data-test-selector":"Section_Title"},model:{value:section.section,callback:function($$v){_vm.$set(section,"section",$$v)},expression:"section.section"}}),_vm.hasError?_vm._e():_c("i",{staticClass:"el-icon-delete pointer trash-icon",on:{click:function($event){return _vm.deleteSection(sectionIndex)}}})],1),_c("draggable",_vm._b({attrs:{disabled:_vm.disableDrag,draggable:".task-item"},model:{value:section.tasks,callback:function($$v){_vm.$set(section,"tasks",$$v)},expression:"section.tasks"}},"draggable",_vm.taskDragOptions,!1),[_vm._l(section.tasks,(function(task,taskIndex){return _c("div",{key:taskIndex,staticClass:"task-item d-flex"},[_c("el-input",{staticClass:"fc-input-full-border2 wo-task-list-num",attrs:{"data-test-selector":"Section_ID",type:"number"},model:{value:task.uniqueId,callback:function($$v){_vm.$set(task,"uniqueId",$$v)},expression:"task.uniqueId"}}),_c("el-input",{ref:section.section+" - "+sectionIndex+" ~ "+taskIndex,refInFor:!0,staticClass:"mL20 fc-input-border-remove mT7 task-name-input",attrs:{"data-test-selector":"Section_Subject",type:"text",placeholder:"Enter a task"},on:{blur:function($event){return _vm.onInputBlur.apply(void 0,arguments)}},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.addNewTask(sectionIndex,section.section)},paste:function($event){var i=arguments.length,argsArray=Array(i);while(i--)argsArray[i]=arguments[i];return _vm.handlePaste.apply(void 0,[sectionIndex,section,task].concat(argsArray))}},model:{value:task.subject,callback:function($$v){_vm.$set(task,"subject",$$v)},expression:"task.subject"}}),_c("el-input",{staticClass:"fc-input-border-remove task-spaceasset-chooser",attrs:{"data-test-selector":"Section_Resource",placeholder:"Space/Asset",type:"text",disabled:!0},model:{value:(task.resource||{}).name,callback:function($$v){_vm.$set(task.resource||{},"name",$$v)},expression:"(task.resource || {}).name"}},[_c("img",{staticClass:"space-icon pointer",attrs:{slot:"prefix",src:__webpack_require__(914368)},on:{click:function($event){return _vm.showLookupWizard(task,!0)}},slot:"prefix"})]),_vm.$validation.isEmpty((task.resource||{}).name)?_vm._e():_c("i",{staticClass:"el-icon-circle-close pointer clear-icon mR10",on:{click:function($event){return _vm.resetTaskResourceField(task)}}}),_c("div",{staticClass:"task-settings pointer mR10",on:{click:function($event){return _vm.setSelectedTaskIndices(sectionIndex,taskIndex,task)}}},[_c("img",{attrs:{src:__webpack_require__(108277)}})]),_c("i",{staticClass:"el-icon-delete pointer trash-icon mR10",on:{click:function($event){return _vm.deleteTask(section.tasks,taskIndex)}}})],1)})),_c("el-button",{staticClass:"task-add-btn mT5 mB15",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_task")},on:{click:function($event){return _vm.addNewTask(sectionIndex,section.section)}}},[_c("img",{attrs:{src:__webpack_require__(511423)}}),_c("span",{staticClass:"btn-label mL5"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_task"))+" ")])]),_c("div",{staticClass:"d-flex justify-content-space"},[_c("div",{staticClass:"dashed-line"}),_c("el-button",{staticClass:"task-add-btn",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_section")},on:{click:function($event){return _vm.addNewTaskSection(sectionIndex+1)}}},[_c("img",{attrs:{src:__webpack_require__(511423)}}),_c("span",{staticClass:"btn-label mL5"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_section"))+" ")])]),_c("div",{staticClass:"dashed-line"})],1)],2)],1)})),0),_vm.canShowTaskDetails?_c("TaskDetails",{attrs:{canShowTaskDetails:_vm.canShowTaskDetails,selectedTask:_vm.selectedTask},on:{"update:canShowTaskDetails":function($event){_vm.canShowTaskDetails=$event},"update:can-show-task-details":function($event){_vm.canShowTaskDetails=$event},updateTaskDetails:_vm.updateTaskDetails}}):_vm._e(),_vm.canShowLookupWizard?[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.activeResourceTask.selectedLookupField,siteId:(_vm.filter||{}).site},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})]:_vm._e()],2)},TasksListvue_type_template_id_4b4377f4_staticRenderFns=[],vuedraggable_umd=(__webpack_require__(162506),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(909980)),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),TaskDetails=__webpack_require__(135824),TasksListvue_type_script_lang_js={mixins:[WebFormMixin/* default */.Z],components:{draggable:vuedraggable_umd_default(),TaskDetails:TaskDetails/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},props:{tasksList:{type:Array,required:!0},spaceAssetResourceObj:{type:Object},hasError:{type:Boolean,required:!0},filter:{type:Object},isFromBuilder:{type:Boolean}},data:function(){return{canShowTaskDetails:!1,selectedTask:{},selectedTaskIndices:{row:"",column:""},disableDrag:!1,canShowLookupWizard:!1,activeResourceTask:{}}},computed:{tasks:{get:function(){return this.tasksList},set:function(value){this.$emit("update:tasksList",value)}},taskSectionDragOptions:function(){return{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0,class:"draggable-section"}},taskDragOptions:function(){return{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasks",sort:!0}},isTasksEmpty:function(){var tasks=this.tasks;return(0,validation/* isEmpty */.xb)(tasks)}},methods:{getMaxTaskNumber:function(){var max;return this.tasksList.length&&this.tasksList[0].tasks.length?(max=this.tasksList[0].tasks[0].uniqueId,this.tasksList.forEach((function(obj){obj.tasks.forEach((function(t){t.uniqueId>max&&(max=t.uniqueId)}))})),max):0},addNewTask:function(sectionIndex,sectionName,subject){var _this=this,tasks=this.tasks,canAddNewTaskOrSection=this.canAddNewTaskOrSection,canAddTask=canAddNewTaskOrSection();if(canAddTask||subject){var task=this.createNewTaskInstance(subject);task.uniqueId=this.getMaxTaskNumber()+1;var _tasks=(tasks[sectionIndex]||{}).tasks||[];_tasks.push(task),this.$nextTick((function(){_this.setFocus(sectionName,sectionIndex,_tasks.length-1)}))}else this.$message.error("Please specify the task subject")},addNewTaskSection:function(){var _this2=this,sectionIndex=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,tasks=this.tasks,canAddNewTaskOrSection=this.canAddNewTaskOrSection,canAddSection=canAddNewTaskOrSection();if(canAddSection){var taskLength=tasks.length,sectionName=0===taskLength?"Untitled Section":"Untitled Section ".concat(taskLength),task=this.createNewTaskInstance();task.uniqueId=this.getMaxTaskNumber()+1,tasks.splice(sectionIndex,0,{section:sectionName,tasks:[task]}),this.$nextTick((function(){_this2.setFocus(sectionName,sectionIndex,0)}))}else this.$message.error("Please specify the task subject")},handlePaste:function(sectionIndex,section,task,event){var _this3=this,sectionName=section.section,tasksPlainText=event.clipboardData.getData("text/plain");if(!(0,validation/* isEmpty */.xb)(tasksPlainText)){var tasksArr=tasksPlainText.split(/[\n\r]/g),taskSubject=tasksArr.shift();task.subject=taskSubject,(0,validation/* isEmpty */.xb)(tasksArr)||tasksArr.forEach((function(task){_this3.addNewTask(sectionIndex,sectionName,task)}))}event.preventDefault()},deleteSection:function(sectionIndex){var tasks=this.tasks;tasks.splice(sectionIndex,1)},deleteTask:function(){var task=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],taskIndex=arguments.length>1?arguments[1]:void 0;task.splice(taskIndex,1),this.$emit("update:hasError",!1)},setFocus:function(sectionName,sectionIndex,taskIndex){
// eg: Untitled Section - 0 ~ 0
var inputRef=this.$refs["".concat(sectionName," - ").concat(sectionIndex," ~ ").concat(taskIndex)];(0,validation/* isEmpty */.xb)(inputRef)||inputRef[0].focus()},onInputBlur:function(event){var value=event.target.value;(0,validation/* isEmpty */.xb)(value)?(this.$message.error("Please specify the task subject"),this.$emit("update:hasError",!0)):this.$emit("update:hasError",!1)},createNewTaskInstance:function(){var subject=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",task=(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.TASK_DEFAULT_FIELDS),_this$spaceAssetResou=this.spaceAssetResourceObj,spaceAssetResourceObj=void 0===_this$spaceAssetResou?{}:_this$spaceAssetResou,id=spaceAssetResourceObj.id,name=spaceAssetResourceObj.name,config=spaceAssetResourceObj.config;return task.selectedLookupField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},constant/* default */.Z.RESOURCE_DEFAULT_OBJ),{},{config:config,value:{id:id}}),(0,validation/* isEmpty */.xb)(spaceAssetResourceObj)||(task.resource={id:id,name:name},task.selectedLookupField.selectedItems=[{label:name,value:id}]),task.subject=subject,task},setSelectedTaskIndices:function(row,column,task){this.selectedTaskIndices={row:row,column:column},this.showHideTaskDetails(task,!0)},updateTaskDetails:function(task){var _this$selectedTaskInd=this.selectedTaskIndices,row=_this$selectedTaskInd.row,column=_this$selectedTaskInd.column;this.tasks[row].tasks[column]=task,this.showHideTaskDetails({},!1)},canAddNewTaskOrSection:function(){var _this$tasks=this.tasks,tasks=void 0===_this$tasks?[]:_this$tasks,canAdd=!0;return tasks.forEach((function(task){var tasks=task.tasks;canAdd&&(canAdd=!tasks.some((function(task){return(0,validation/* isEmpty */.xb)(task.subject)})))})),canAdd},showHideTaskDetails:function(){var task=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},canShow=arguments.length>1?arguments[1]:void 0;this.$set(this,"selectedTask",task),this.canShowTaskDetails=canShow},showLookupWizard:function(task,canShow){this.$set(this,"activeResourceTask",task),this.$set(this,"canShowLookupWizard",canShow)},setLookupFieldValue:function(props){var field=props.field,_ref=field||{},selectedItems=_ref.selectedItems,_selectedItems=(0,slicedToArray/* default */.Z)(selectedItems,1),selectedItem=_selectedItems[0],value=selectedItem.value,label=selectedItem.label,activeResourceTask=this.activeResourceTask;(0,validation/* isEmpty */.xb)(activeResourceTask)||(activeResourceTask.resource={name:label,id:value},activeResourceTask.readingFieldId=null,activeResourceTask.taskReadings=[])}}},components_TasksListvue_type_script_lang_js=TasksListvue_type_script_lang_js,TasksList_component=(0,componentNormalizer/* default */.Z)(components_TasksListvue_type_script_lang_js,TasksListvue_type_template_id_4b4377f4_render,TasksListvue_type_template_id_4b4377f4_staticRenderFns,!1,null,null,null)
/* harmony default export */,TasksList=TasksList_component.exports,FFormPermitChecklistvue_type_template_id_54c0cb42_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-tabs",{staticClass:"width100 fc-tab2 permit-checklist-tabs",model:{value:_vm.checklistTypeTab,callback:function($$v){_vm.checklistTypeTab=$$v},expression:"checklistTypeTab"}},_vm._l(_vm.tabModes,(function(mode,modeIndex){return _c("el-tab-pane",{key:modeIndex,attrs:{label:mode.displayName,name:mode.name}},[_vm.isLoading?_c("div",{staticClass:"flex-middle height200"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.getCategoriesForForm(mode))?_c("div",{staticClass:"flex-middle justify-content-center flex-col height200"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/workorder",iconClass:"icon text-center icon-xxxlg height-auto"}}),_c("div",{staticClass:"line-height20 nowo-label mT20"},[_vm._v(" No Checklist Categories available. ")])],1):_vm._l(_vm.getCategoriesForForm(mode),(function(category,categoryIndex){return _c("div",{key:categoryIndex,staticClass:"pT20"},[_c("div",{staticClass:"label-txt-black bold pB10"},[_vm._v(" "+_vm._s(category.name)+" ")]),_vm.$validation.isEmpty(category.checklist)?_c("div",{staticClass:"flex-middle justify-content-center flex-col height150"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/task",iconClass:"icon text-center icon-xxlg height-auto"}}),_c("div",{staticClass:"line-height20 mT20 label-txt-black bold f15"},[_vm._v(" No Checklist available under this category. ")])],1):_vm._l(category.checklist,(function(wpChecklist,checklistIndex){return _c("el-row",{key:checklistIndex,staticClass:"flex-middle mT10",attrs:{gutter:20}},[_c("el-col",{staticClass:"fc-grey8-14 f14 text-left",attrs:{span:1}},[_vm._v(" "+_vm._s(checklistIndex+1)+" ")]),_c("el-col",{staticClass:"label-txt-black",attrs:{span:10}},[_vm._v(" "+_vm._s(wpChecklist.checklist.item)+" ")]),_c("el-col",{staticClass:"pL0",attrs:{span:4}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Permit Type"},model:{value:wpChecklist.required,callback:function($$v){_vm.$set(wpChecklist,"required",$$v)},expression:"wpChecklist.required"}},[_c("el-option",{attrs:{label:"Yes",value:1}}),_c("el-option",{attrs:{label:"No",value:2}}),_c("el-option",{attrs:{label:"N/A",value:3}})],1)],1),_c("el-col",{attrs:{span:9}},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Enter Remarks"},model:{value:wpChecklist.remarks,callback:function($$v){_vm.$set(wpChecklist,"remarks",$$v)},expression:"wpChecklist.remarks"}})],1)],1)}))],2)}))],2)})),1)],1)},FFormPermitChecklistvue_type_template_id_54c0cb42_staticRenderFns=[],PermitChecklistMixin=__webpack_require__(557657),FFormPermitChecklistvue_type_script_lang_js={props:["model"],mixins:[PermitChecklistMixin/* default */.Z],data:function(){return{}},created:function(){var _this=this;this.isLoading=!0,this.loadWorkPermitChecklistModuleMeta().then((function(){_this.isLoading=!1}))}},forms_FFormPermitChecklistvue_type_script_lang_js=FFormPermitChecklistvue_type_script_lang_js,FFormPermitChecklist_component=(0,componentNormalizer/* default */.Z)(forms_FFormPermitChecklistvue_type_script_lang_js,FFormPermitChecklistvue_type_template_id_54c0cb42_render,FFormPermitChecklistvue_type_template_id_54c0cb42_staticRenderFns,!1,null,null,null)
/* harmony default export */,FFormPermitChecklist=FFormPermitChecklist_component.exports,FPublishTovue_type_template_id_76e50a8d_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex flex-col"},[_c("el-form-item",{staticClass:"section-items publish-to",attrs:{label:"Publish To"}},[_c("el-radio-group",{staticStyle:{"text-decoration":"none"},on:{change:_vm.clearFieldValues},model:{value:_vm.sharingType,callback:function($$v){_vm.sharingType=$$v},expression:"sharingType"}},[_c("div",{staticClass:"pB20 pT10",staticStyle:{"text-decoration":"none"}},[_c("el-radio",{staticClass:"fc-radio-btn",staticStyle:{"text-decoration":"none"},attrs:{label:_vm.sharingTypes.BUILDING}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.building"))+" ")])]),_vm.sharingType===_vm.sharingTypes.BUILDING?_c("div",{staticClass:"mL30 mT20"},[_c("el-radio-group",{on:{change:_vm.clearFieldValues},model:{value:_vm.sharingSubType,callback:function($$v){_vm.sharingSubType=$$v},expression:"sharingSubType"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.sharingSubTypes.ALL}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.all_building"))+" ")])]),_c("el-radio",{staticClass:"fc-radio-btn mL20",attrs:{label:_vm.sharingSubTypes.SELECTED}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.selected_building"))+" ")])])],1)],1):_vm._e()],1),_c("div",{staticClass:"pB20"},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.sharingTypes.TENANT_UNIT}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.selected_tenant_units"))+" ")])])],1),_c("div",{staticClass:"pB20"},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.sharingTypes.ROLE}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common.products.selected_roles"))+" ")])]),_vm.sharingType===_vm.sharingTypes.ROLE?_c("div",{staticClass:"mL30 mT20"},[_c("el-radio-group",{on:{change:_vm.clearFieldValues},model:{value:_vm.sharingSubType,callback:function($$v){_vm.sharingSubType=$$v},expression:"sharingSubType"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.sharingSubTypes.ALL}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.all_role"))+" ")])]),_c("el-radio",{staticClass:"fc-radio-btn mL20 fc-input-label-txt",attrs:{label:_vm.sharingSubTypes.SELECTED}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.selected_roles"))+" ")])])],1)],1):_vm._e()],1),_c("div",{staticClass:"pB20"},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.sharingTypes.PEOPLE}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common.products.selected_people"))+" ")])]),_vm.sharingType===_vm.sharingTypes.PEOPLE?_c("div",{staticClass:"mL30 mT20"},[_c("el-radio-group",{on:{change:_vm.clearFieldValues},model:{value:_vm.sharingSubType,callback:function($$v){_vm.sharingSubType=$$v},expression:"sharingSubType"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.sharingSubTypes.ALL}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.all_people"))+" ")])]),_c("el-radio",{staticClass:"fc-radio-btn mL20",attrs:{label:_vm.sharingSubTypes.SELECTED}},[_c("span",{staticClass:"normal-case"},[_vm._v(" "+_vm._s(_vm.$t("common._common.selected_people"))+" ")])])],1)],1):_vm._e()],1)])],1),_vm.sharingType===_vm.sharingTypes.TENANT_UNIT?_c("el-form-item",{staticClass:"section-items",attrs:{label:"Select Tenant Units"}},[_c("FLookupField",{key:_vm.field.name+"-tenantunit",attrs:{model:_vm.sharedToSpace,field:_vm.fields.tenantunit},on:{"update:model":function($event){_vm.sharedToSpace=$event},recordSelected:_vm.serialize,showLookupWizard:_vm.showLookupWizard}})],1):_vm._e(),_vm.sharingType===_vm.sharingTypes.ROLE&&_vm.sharingSubType===_vm.sharingSubTypes.SELECTED?_c("el-form-item",{staticClass:"section-items",attrs:{label:"Select Roles"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{filterable:"",multiple:"","collapse-tags":""},on:{change:_vm.serialize},model:{value:_vm.sharedToRole,callback:function($$v){_vm.sharedToRole=$$v},expression:"sharedToRole"}},_vm._l(_vm.roles,(function(role){return _c("el-option",{key:role.value,attrs:{label:role.label,value:role.value}})})),1)],1):_vm._e(),_vm.sharingType===_vm.sharingTypes.PEOPLE&&_vm.sharingSubType===_vm.sharingSubTypes.SELECTED?_c("el-form-item",{staticClass:"section-items",attrs:{label:"Select People"}},[_c("FLookupField",{key:_vm.field.name+"-people",attrs:{model:_vm.sharedToPeople,fetchOptionsOnLoad:!0,field:_vm.fields.people},on:{"update:model":function($event){_vm.sharedToPeople=$event},recordSelected:_vm.serialize,showLookupWizard:_vm.showLookupWizard}})],1):_vm._e(),_vm.sharingType===_vm.sharingTypes.BUILDING&&_vm.sharingSubType===_vm.sharingSubTypes.SELECTED?_c("el-form-item",{staticClass:"section-items",attrs:{label:"Select Building"}},[_c("FLookupField",{key:_vm.field.name+"-building",attrs:{model:_vm.sharedToBuilding,fetchOptionsOnLoad:!0,field:_vm.fields.building},on:{"update:model":function($event){_vm.sharedToBuilding=$event},recordSelected:_vm.serialize,showLookupWizard:_vm.showLookupWizard}})],1):_vm._e(),_c("el-form-item",[_c("el-row",[_c("el-col",{attrs:{span:9}},[_vm.showRoleFilter?_c("el-checkbox",{staticStyle:{"padding-bottom":"15px","padding-left":"135px","padding-top":"10px",width:"100%",float:"left"},on:{change:function($event){return _vm.serialize()}},model:{value:_vm.showRoleFilterField,callback:function($$v){_vm.showRoleFilterField=$$v},expression:"showRoleFilterField"}},[_vm._v(_vm._s(_vm.$t("common._common.add_role_filter")))]):_vm._e()],1),_c("el-col",{attrs:{span:15}},[_vm.showRoleFilterField?_c("div",{staticClass:"section-items",staticStyle:{float:"left",width:"100%"},attrs:{label:"Select Roles"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{filterable:"",multiple:"","collapse-tags":""},on:{change:_vm.serialize},model:{value:_vm.sharedToRoleFilter,callback:function($$v){_vm.sharedToRoleFilter=$$v},expression:"sharedToRoleFilter"}},_vm._l(_vm.roles,(function(role){return _c("el-option",{key:role.value,attrs:{label:role.label,value:role.value}})})),1)],1):_vm._e()])],1)],1),_vm.canShowLookupWizard?_c("FLookupFieldWizard",{key:_vm.selectedLookupField.lookupModuleName,attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedField:_vm.selectedLookupField,withReadings:!0,specialFilterValue:_vm.specialFilterValue,showFilters:!0},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}}):_vm._e()],1)},FPublishTovue_type_template_id_76e50a8d_scoped_true_staticRenderFns=[],picklist=(__webpack_require__(336585),__webpack_require__(212826),__webpack_require__(961358)),LookUpSpecialWizardAudiencevue_type_script_lang_js={extends:FLookupFieldWizard["default"],data:function(){return{peopleType:null,contactFilters:[],tenantContactFields:[],vendorContactFields:[],buildingFields:[]}},props:["selectedField"],created:function(){this.loadTenantContactFields(),this.loadVendorContactFields()},computed:{viewColumns:function(){var columns=this.buildingFields,viewObject=this.viewDetail?this.viewDetail:this.$store.state.view.currentViewDetail,selectedField=this.selectedField,_ref=selectedField||{},lookupModuleName=_ref.lookupModuleName;if(viewObject&&viewObject.fields&&("tenantunit"===lookupModuleName||"people"===lookupModuleName||"building"===lookupModuleName)&&(columns=viewObject.fields.map((function(vf){vf.name=(vf.field||{}).name||vf.fieldName,vf.fieldId=(vf.field||{}).fieldId;var defaultColumnName=viewObject.defaultModuleFields&&viewObject.defaultModuleFields[vf.name]?viewObject.defaultModuleFields[vf.name].columnDisplayName:null;return vf.displayName=vf.columnDisplayName||defaultColumnName||vf.field.displayName,vf}))),"tenant"==this.peopleType){var tenantcontactcolumns=this.getFieldsByModule("tenantcontact"),finalCols=[];finalCols=tenantcontactcolumns.map((function(field){var fieldObj={};return fieldObj.field=field,fieldObj.name=field.name,fieldObj.displayName=field.displayName,fieldObj}));var resultFields=[];(0,validation/* isEmpty */.xb)(columns)||resultFields.push(columns[0]),resultFields=resultFields.concat(finalCols),columns=resultFields}if("vendors"==this.peopleType){var vendorcontactcolumns=this.getFieldsByModule("vendorcontact"),_finalCols=[];_finalCols=vendorcontactcolumns.map((function(field){var fieldObj={};return fieldObj.field=field,fieldObj.name=field.name,fieldObj.displayName=field.displayName,fieldObj}));var _resultFields=[];(0,validation/* isEmpty */.xb)(columns)||_resultFields.push(columns[0]),_resultFields=_resultFields.concat(_finalCols),columns=_resultFields}return columns},selectedLookupField:function(){return(0,validation/* isEmpty */.xb)(this.peopleType)?this.selectedField:{isDataLoading:!1,options:[],lookupModuleName:"tenant"===this.peopleType?"tenantcontact":"vendorcontact",displayName:"People",field:{lookupModule:{name:"tenant"===this.peopleType?"tenantcontact":"vendorcontact",displayName:"People"}},forceFetchAlways:!0,filters:{},multiple:!0,isDisabled:!1}}},methods:{loadTenantContactFields:function(){var _this=this;this.$util.loadFields("tenantcontact",!1).then((function(fields){_this.tenantContactFields=fields}))},loadVendorContactFields:function(){var _this2=this;this.$util.loadFields("vendorcontact",!1).then((function(fields){_this2.vendorContactFields=fields}))},getFieldsByModule:function(moduleName){var fields=[];return"tenantcontact"===moduleName?fields=this.tenantContactFields:"vendorcontact"===moduleName&&(fields=this.vendorContactFields),fields},setPeopleTypeFilter:function(command){this.clearAllFilters=!0;var value=[];"tenant_contact"===command?(this.peopleType="tenant",value=["1"],this.quickFiltersContacts()):"vendor_contact"===command&&(this.peopleType="vendors",value=["2"],this.quickFiltersContacts()),this.clearFilter(),this.specialFilterValue={peopleType:{operatorId:54,value:value}},this.setPeopleAdditionalFilters()},clearPeopleTypeFilter:function(){this.peopleType=null,this.specialFilterValue={peopleType:{operatorId:54,value:["1","2"]}},this.setPeopleAdditionalFilters()},setPeopleAdditionalFilters:function(){(0,validation/* isEmpty */.xb)(this.peopleType)?this.quickFilters=[this.quickFilters[0]]:("tenant"===this.peopleType&&this.quickFilters.push({value:null,key:"Tenant",placeHolderText:"Tenant",lookupModule:{name:"tenant"},disabled:!1,options:[]}),"vendors"===this.peopleType&&this.quickFilters.push({value:null,key:"Vendor",placeHolderText:"Vendor",lookupModule:{name:"vendors"},disabled:!1,options:[]}))},constructQuickFilters:function(){"people"===this.selectedField.lookupModuleName?this.quickFiltersContacts():"tenantunit"===this.selectedField.lookupModuleName&&(this.quickFilters=[{spaceType:1,value:null,key:"site",placeHolderText:"Site",lookupModule:{name:"site"},disabled:!1,options:[]},{spaceType:2,value:null,key:"building",placeHolderText:"Building",lookupModule:{name:"building"},disabled:!1,options:[]},{spaceType:3,value:null,key:"floor",placeHolderText:"Floor",lookupModule:{name:"floor"},disabled:!1,options:[]}])},quickFiltersContacts:function(){this.quickFilters=[{value:null,key:"peopletype",placeHolderText:"People Type",disabled:!1,lookupModule:{name:"peopleType"},options:[{label:"Tenant Contact",value:1},{label:"Vendor Contact",value:2}]}]},resourceFilterConstruction:function(field){if((0,validation/* isEmpty */.xb)(field))return this.resourceFilterObj;if("peopletype"===field.key){var filter={operatorId:36,value:["".concat(value)]};return filters.peopleType=filter,filters}var name=field.lookupModule.name,value=field.value,filterHash={site:"siteId",building:"building",floor:"floor",basespace:"space",tenant:"tenant",vendors:"vendor",peopleType:"peopleType"};if((0,validation/* isEmpty */.xb)(value))this.$delete(this.resourceFilterObj,filterHash[name]);else{var _filter={};_filter={operatorId:36,value:["".concat(value)]},this.$set(this.resourceFilterObj,filterHash[name],_filter)}var filters={};return"basespace"===name?Object.entries(this.resourceFilterObj).forEach((function(_ref2){var _ref3=(0,slicedToArray/* default */.Z)(_ref2,2),key=_ref3[0],value=_ref3[1];["siteId","building","floor"].includes(key)&&(filters[key]=value)})):"building"===name?Object.entries(this.resourceFilterObj).forEach((function(_ref4){var _ref5=(0,slicedToArray/* default */.Z)(_ref4,2),key=_ref5[0],value=_ref5[1];"siteId"===key&&(filters[key]=value)})):"floor"===name&&Object.entries(this.resourceFilterObj).forEach((function(_ref6){var _ref7=(0,slicedToArray/* default */.Z)(_ref6,2),key=_ref7[0],value=_ref7[1];["siteId","building"].includes(key)&&(filters[key]=value)})),filters},setLookUpFilter:function(field,valueObj){var _this3=this;"peopletype"==field.key&&(this.resourceFilterObj={},(0,validation/* isEmpty */.xb)(valueObj.value)?this.specialFilterValue={peopleType:{operatorId:54,value:["1","2"]}}:this.specialFilterValue={peopleType:{operatorId:54,value:[valueObj.value.toString()]}}),"peopletype"==field.key&&(1==valueObj.value?this.setPeopleTypeFilter("tenant_contact"):2==valueObj.value?this.setPeopleTypeFilter("vendor_contact"):this.clearPeopleTypeFilter());var spaceType=field.spaceType,_ref8=valueObj||{},value=_ref8.value;this.quickFilters.forEach((function(fld){fld.key===field.key&&(fld.value=(0,validation/* isEmpty */.xb)(value)?null:value,_this3.resourceFilterConstruction(fld))})),this.quickFilters.forEach((function(fld){var resetOptions=spaceType&&spaceType<fld.spaceType;if(fld.filters=_this3.resourceFilterConstruction(fld),resetOptions){"building"!==fld.key&&(fld.disabled=(0,validation/* isEmpty */.xb)(value)),fld.value=null,_this3.resourceFilterConstruction(fld),value=null;var params={page:1,perPage:50};(0,picklist/* getFieldOptions */._K)((0,objectSpread2/* default */.Z)({field:fld},params)).then((function(_ref9){var error=_ref9.error,options=_ref9.options;error?_this3.$message.error(error.message||"Error Occured"):fld.options=options}))}}))},setFilterForWizard:function(field,valObj){this.wizardFilterValue={};var lookupModule=field.lookupModule,name=lookupModule.name,value=[],operatorId=2;!(0,validation/* isEmpty */.xb)(valObj)&&valObj.value&&(value=[valObj.value.toString()],operatorId=54),this.specialFilterValue="vendors"===name?{vendor:{operatorId:operatorId,value:value}}:{tenant:{operatorId:operatorId,value:value}}}}},components_LookUpSpecialWizardAudiencevue_type_script_lang_js=LookUpSpecialWizardAudiencevue_type_script_lang_js,LookUpSpecialWizardAudience_component=(0,componentNormalizer/* default */.Z)(components_LookUpSpecialWizardAudiencevue_type_script_lang_js,LookUpSpecialWizardAudience_render,LookUpSpecialWizardAudience_staticRenderFns,!1,null,"1f39671b",null)
/* harmony default export */,LookUpSpecialWizardAudience=LookUpSpecialWizardAudience_component.exports,sharingTypes={TENANT_UNIT:1,ROLE:2,PEOPLE:3,BUILDING:4},sharingSubTypes={ALL:1,SELECTED:2},fields={building:{isDataLoading:!1,options:[],lookupModuleName:"building",field:{lookupModule:{name:"building",displayName:"Buildings"}},forceFetchAlways:!0,filters:{},multiple:!0,isDisabled:!1},tenantunit:{isDataLoading:!1,options:[],lookupModuleName:"tenantunit",field:{lookupModule:{name:"tenantunit",displayName:"Tenant Unit"}},forceFetchAlways:!0,filters:{},multiple:!0,isDisabled:!1},role:{isDataLoading:!1,options:[],lookupModuleName:"role",field:{lookupModule:{name:"role",displayName:"Roles"}},forceFetchAlways:!0,filters:{},multiple:!0,isDisabled:!1},people:{isDataLoading:!1,options:[],lookupModuleName:"people",field:{lookupModule:{name:"people",displayName:"Peoples"}},forceFetchAlways:!0,filters:{},multiple:!0,isDisabled:!1}},FPublishTovue_type_script_lang_js={props:["value","field","isEdit","formModel"],components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:LookUpSpecialWizardAudience},data:function(){return{publishTo:[{sharingType:sharingTypes.BUILDING}],chooserVisibility:!0,originalData:[],sharingTypes:sharingTypes,fields:fields,roles:[],selectedLookupField:null,canShowLookupWizard:!1,sharingTypeSelection:1,sharingSubTypes:sharingSubTypes,sharingSubType:sharingSubTypes.ALL,showRoleFilterField:!1,sharingType:sharingTypes.BUILDING,roleFilterSharingInfo:[]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadRoles();case 2:case"end":return _context.stop()}}),_callee)})))()},mounted:function(){this.isEdit&&(this.originalData=this.value,this.initValues());// for finding deleted Ids
},watch:{value:{handler:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.deserialize()},immediate:!0}},computed:{showRoleFilter:function(){var sharingType=this.sharingType,sharingSubType=this.sharingSubType;return sharingType===sharingTypes.TENANT_UNIT||sharingType==sharingTypes.BUILDING&&sharingSubType===sharingSubTypes.SELECTED},specialFilterValue:function(){var selectedLookupField=this.selectedLookupField,lookupModuleName=selectedLookupField.lookupModuleName;return"people"===lookupModuleName?{peopleType:{operatorId:54,value:["1","2"]}}:{}},sharedToBuilding:{get:function(){return this.publishTo.filter((function(_ref){var sharedToSpace=_ref.sharedToSpace;return!(0,validation/* isEmpty */.xb)(sharedToSpace)})).map((function(_ref2){var sharedToSpace=_ref2.sharedToSpace;return null===sharedToSpace||void 0===sharedToSpace?void 0:sharedToSpace.id}))},set:function(values){var publishTo=(0,validation/* isEmpty */.xb)(values)?null:values.filter((function(id){return!(0,validation/* isEmpty */.xb)(id)})).map((function(id){var sharingType=sharingTypes.BUILDING;return{sharingType:sharingType,sharedToSpace:{id:id}}}));this.publishTo=(0,validation/* isEmpty */.xb)(publishTo)?[{sharingType:sharingTypes.BUILDING}]:publishTo}},sharedToSpace:{get:function(){return this.publishTo.filter((function(_ref3){var sharedToSpace=_ref3.sharedToSpace;return!(0,validation/* isEmpty */.xb)(sharedToSpace)})).map((function(_ref4){var sharedToSpace=_ref4.sharedToSpace;return null===sharedToSpace||void 0===sharedToSpace?void 0:sharedToSpace.id}))},set:function(values){var publishTo=(0,validation/* isEmpty */.xb)(values)?null:values.filter((function(id){return!(0,validation/* isEmpty */.xb)(id)})).map((function(id){var sharingType=sharingTypes.TENANT_UNIT;return{sharingType:sharingType,sharedToSpace:{id:id}}}));this.publishTo=(0,validation/* isEmpty */.xb)(publishTo)?[{sharingType:sharingTypes.TENANT_UNIT}]:publishTo}},sharedToRole:{get:function(){return this.publishTo.filter((function(_ref5){var sharedToRole=_ref5.sharedToRole;return!(0,validation/* isEmpty */.xb)(sharedToRole)})).map((function(_ref6){var sharedToRole=_ref6.sharedToRole;return null===sharedToRole||void 0===sharedToRole?void 0:sharedToRole.id}))},set:function(values){var publishTo=values.filter((function(id){return!(0,validation/* isEmpty */.xb)(id)})).map((function(id){var sharingType=sharingTypes.ROLE;return{sharingType:sharingType,sharedToRole:{id:id,roleId:id}}}));this.publishTo=(0,validation/* isEmpty */.xb)(publishTo)?[{sharingType:sharingTypes.ROLE}]:publishTo}},sharedToPeople:{get:function(){return this.publishTo.filter((function(_ref7){var sharedToPeople=_ref7.sharedToPeople;return!(0,validation/* isEmpty */.xb)(sharedToPeople)})).map((function(_ref8){var sharedToPeople=_ref8.sharedToPeople;return null===sharedToPeople||void 0===sharedToPeople?void 0:sharedToPeople.id}))},set:function(values){var publishTo=values.filter((function(id){return!(0,validation/* isEmpty */.xb)(id)})).map((function(id){var sharingType=sharingTypes.PEOPLE;return{sharingType:sharingType,sharedToPeople:{id:id}}}));this.publishTo=(0,validation/* isEmpty */.xb)(publishTo)?[{sharingType:sharingTypes.PEOPLE}]:publishTo}},sharedToRoleFilter:{get:function(){return this.roleFilterSharingInfo.filter((function(_ref9){var sharedToRole=_ref9.sharedToRole;return!(0,validation/* isEmpty */.xb)(sharedToRole)})).map((function(_ref10){var sharedToRole=_ref10.sharedToRole;return null===sharedToRole||void 0===sharedToRole?void 0:sharedToRole.id}))},set:function(values){var publishTo=values.filter((function(id){return!(0,validation/* isEmpty */.xb)(id)})).map((function(id){var sharingType=sharingTypes.ROLE;return{sharingType:sharingType,sharedToRole:{id:id,roleId:id}}}));(0,validation/* isEmpty */.xb)(publishTo)?this.roleFilterSharingInfo=[]:this.roleFilterSharingInfo=publishTo}}},methods:{setLookupFieldValue:function(value){var sharingType=this.sharingType,field=value.field,selectedItems=field.selectedItems;sharingType===sharingTypes.PEOPLE?this.sharedToPeople=selectedItems.map((function(item){return item.value})):this.sharedToSpace=selectedItems.map((function(item){return item.value})),this.serialize(),this.canShowLookupWizard=!1},showLookupWizard:function(field,canShow){this.$set(this,"selectedLookupField",field),this.$set(this,"canShowLookupWizard",canShow)},loadRoles:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var filters,_yield$API$get,error,data,_ref11,pickList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loading=!0,filters=JSON.stringify({appLinkNames:["tenant","vendor","service"]}),_context2.next=4,api/* API */.bl.get("/v3/picklist/role",{filters:filters});case 4:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this2.$message.error(error.message||"Error Occured"):(_ref11=data||{},pickList=_ref11.pickList,_this2.roles=pickList||[]),_this2.loading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},clearFieldValues:function(){this.showRoleFilterField=!1;var sharingType=this.sharingType,sharingSubType=sharingSubTypes.ALL;sharingType==sharingTypes.TENANT_UNIT&&(sharingSubType=sharingSubTypes.SELECTED),this.publishTo=[{sharingType:sharingType,sharingSubType:sharingSubType}],this.serialize()},getDeletedIds:function(){var originalData=this.originalData,publishTo=this.publishTo,$getProperty=this.$getProperty,sharingType=this.sharingType;if((0,validation/* isEmpty */.xb)(originalData))return[];if(sharingType===sharingTypes.TENANT_UNIT)return[];var removedItems=originalData.filter((function(shareObj){var sharingType=shareObj.sharingType,sharedToSpace=shareObj.sharedToSpace;return(0,validation/* isEmpty */.xb)(publishTo.find((function(p){return p.sharingType===sharingType&&$getProperty(p,"sharedToSpace.id")===$getProperty(sharedToSpace,"id")})))}));return removedItems.map((function(_ref12){var id=_ref12.id;return id}))},getSharingTypeWithAppliedFilter:function(filterSharingType){if(!(0,validation/* isEmpty */.xb)(filterSharingType)&&filterSharingType==sharingTypes.ROLE){var publishTo=this.publishTo.filter((function(publishInfo){return publishInfo.sharingType!=sharingTypes.ROLE}));return this.$getProperty(publishTo,"0.sharingType")}return this.$getProperty(this.publishTo,"0.sharingType")},initValues:function(){var _this3=this,formModel=this.formModel,_ref13=formModel||{},filterSharingType=_ref13.filterSharingType;this.sharingType=this.getSharingTypeWithAppliedFilter(filterSharingType),filterSharingType&&filterSharingType==sharingTypes.ROLE&&(this.showRoleFilterField=!0);var fieldValue=this.value;(0,validation/* isEmpty */.xb)(fieldValue)?this.serialize():(0,validation/* isEmpty */.xb)(fieldValue)||(fieldValue.forEach((function(fieldVal){(0,validation/* isEmpty */.xb)(fieldVal.sharedToSpace)&&(0,validation/* isEmpty */.xb)(fieldVal.sharedToRole)&&(0,validation/* isEmpty */.xb)(fieldVal.sharedToPeople)?_this3.sharingSubType=sharingSubTypes.ALL:_this3.sharingSubType=sharingSubTypes.SELECTED})),filterSharingType&&filterSharingType==sharingTypes.ROLE?(this.publishTo=fieldValue.filter((function(publishInfo){return publishInfo.sharingType!=sharingTypes.ROLE})),this.roleFilterSharingInfo=fieldValue.filter((function(publishInfo){return publishInfo.sharingType==sharingTypes.ROLE}))):this.publishTo=fieldValue)},deserialize:function(){var fieldValue=this.value;(0,validation/* isEmpty */.xb)(fieldValue)?this.serialize():(0,validation/* isEmpty */.xb)(fieldValue)||(this.publishTo=fieldValue)},serialize:function(){var roleFilterSharingInfo=this.roleFilterSharingInfo;publishTo=(this.publishTo||[]).filter((function(publishInfo){return publishInfo.sharingType!=sharingTypes.ROLE})),this.showRoleFilterField&&(this.publishTo=(publishTo||[]).concat(roleFilterSharingInfo));var publishTo=this.publishTo,getDeletedIds=this.getDeletedIds,sharingSubType=this.sharingSubType,showRoleFilterField=this.showRoleFilterField;showRoleFilterField||(this.roleFilterSharingInfo=[]);var fieldValue,sharingType=publishTo[0].sharingType;fieldValue=sharingSubType===sharingSubTypes.ALL&&sharingType!=sharingTypes.TENANT_UNIT?[{sharingType:sharingType}]:publishTo.map((function(shareObj){return(0,objectSpread2/* default */.Z)({},shareObj)})),this.$emit("input",fieldValue),this.formModel["filterSharingType"]=showRoleFilterField?sharingTypes.ROLE:null,(0,validation/* isEmpty */.xb)(getDeletedIds())||(this.formModel["".concat(this.field.name,"_delete")]=getDeletedIds())}}},forms_FPublishTovue_type_script_lang_js=FPublishTovue_type_script_lang_js,FPublishTo_component=(0,componentNormalizer/* default */.Z)(forms_FPublishTovue_type_script_lang_js,FPublishTovue_type_template_id_76e50a8d_scoped_true_render,FPublishTovue_type_template_id_76e50a8d_scoped_true_staticRenderFns,!1,null,"76e50a8d",null)
/* harmony default export */,FPublishTo=FPublishTo_component.exports,RichTextArea=__webpack_require__(874249),FLocationField=__webpack_require__(321389),FFormTimeZoneFieldvue_type_template_id_2d132159_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},on:{change:_vm.updateValue},model:{value:_vm.valueBinder,callback:function($$v){_vm.valueBinder=$$v},expression:"valueBinder"}},_vm._l(_vm.timeZonesList,(function(timeZone,index){return _c("el-option",{key:index,attrs:{label:timeZone.label,value:timeZone.value,disabled:_vm.field.isDisabled}})})),1)},FFormTimeZoneFieldvue_type_template_id_2d132159_staticRenderFns=[],timezones=__webpack_require__(887315),FFormTimeZoneFieldvue_type_script_lang_js={props:["value","field"],data:function(){return{valueBinder:this.value}},computed:{timeZonesList:function(){return timezones/* default */.Z}},methods:{updateValue:function(value){this.$emit("input",value)}}},forms_FFormTimeZoneFieldvue_type_script_lang_js=FFormTimeZoneFieldvue_type_script_lang_js,FFormTimeZoneField_component=(0,componentNormalizer/* default */.Z)(forms_FFormTimeZoneFieldvue_type_script_lang_js,FFormTimeZoneFieldvue_type_template_id_2d132159_render,FFormTimeZoneFieldvue_type_template_id_2d132159_staticRenderFns,!1,null,null,null)
/* harmony default export */,FFormTimeZoneField=FFormTimeZoneField_component.exports,FFormAttachments=__webpack_require__(80757),ConnectedAppViewWidget=__webpack_require__(767004),FBudgetAmountsTablevue_type_template_id_6fe4ddc2_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"budget-amount-form-table"},[_c("div",[_vm.canShowCurrencyDropDown?_c("FNewCurrencyField",{staticClass:"budget-currency-select",attrs:{moduleData:_vm.currencyDetails,isLineItem:!0,initialCurrency:_vm.initialCurrency},on:{setCurrencyCode:_vm.setCurrencyCodeOnChange,setIsDefaultCurrency:function(val){return _vm.isDefaultCurrency=val}}}):_vm._e(),_c("span",{staticClass:"blue-txt",on:{click:_vm.hideShowSplitUp}},[_vm._v(" "+_vm._s(_vm.canShowSplitUp?"Hide months":"Show months")+" ")])],1),_c("table",{staticClass:"mT10 table-fixed",class:[_vm.canShowSplitUp?"width100":"width50"]},[_c("thead",[_c("tr",[_c("th",{staticClass:"width150px"},[_vm._v(" INCOME ")]),_vm._l(_vm.monthsDisplayName,(function(value,monthIndex){return _c("th",{key:monthIndex,staticClass:"width6o5 text-right"},[_vm._v(" "+_vm._s(value)+" ")])})),_c("th",{staticClass:"text-right"},[_vm._v(" "+_vm._s(_vm.getFiscalYearTitle)+" ")])],2)]),_c("tbody",_vm._l(_vm.budgetamount.incomes,(function(data,index){return _c("tr",{key:index},[_c("td",[_c("el-form",{ref:"budget-item-account-1-"+index,refInFor:!0,staticClass:"budget-sub-form",attrs:{rules:_vm.allValidationRules,model:data}},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"account",required:!0}},[_c("FLookupField",{staticClass:"width400px budget-table-select",attrs:{model:data.account.id,field:_vm.selectedLookupField},on:{"update:model":function($event){return _vm.$set(data.account,"id",$event)}}})],1)],1)],1),_vm._l(_vm.canShowSplitUp?data.monthlyAmountSplitUp:[],(function(splitup,sIndex){return _c("td",{key:sIndex},[_c("div",[_c("el-input",{staticClass:"fc-budget-table-input width100",attrs:{type:"number"},on:{change:function($event){return _vm.computeYearlyAmount(data)}},model:{value:splitup.monthlyAmount,callback:function($$v){_vm.$set(splitup,"monthlyAmount",_vm._n($$v))},expression:"splitup.monthlyAmount"}})],1)])})),_c("td",{staticClass:"position-relative"},[_c("div",[_c("el-input",{staticClass:"fc-budget-table-input width100",attrs:{type:"number"},on:{change:function($event){return _vm.overwriteMonthlySplitUp(data)}},model:{value:data.yearlyAmount,callback:function($$v){_vm.$set(data,"yearlyAmount",_vm._n($$v))},expression:"data.yearlyAmount"}})],1),_c("div",{staticClass:"add-delete-action-buttons"},[_c("div",{staticClass:"flex-middle"},[_vm.budgetamount.incomes.length-1===index?_c("i",{staticClass:"el-icon-circle-plus-outline fc-row-add-icon f20 bold pL5",on:{click:function($event){return _vm.addIncomeBudgetItem()}}}):_vm._e(),_vm.budgetamount.incomes.length>1?_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold pL10",on:{click:function($event){return _vm.removeIncomeBudgetItem(index)}}}):_vm._e()])])])],2)})),0)]),_c("table",{staticClass:"mT50 table-fixed",class:[_vm.canShowSplitUp?"width100":"width50"]},[_c("thead",[_c("tr",[_c("th",{staticClass:"width150px"},[_vm._v(" EXPENSE ")]),_vm._l(_vm.monthsDisplayName,(function(value,monthIndex){return _c("th",{key:monthIndex,staticClass:"width6o5 text-right"},[_vm._v(" "+_vm._s(value)+" ")])})),_c("th",{staticClass:"text-right"},[_vm._v(" "+_vm._s(_vm.getFiscalYearTitle)+" ")])],2)]),_c("tbody",_vm._l(_vm.budgetamount.expenses,(function(data,index){return _c("tr",{key:index},[_c("td",[_c("el-form",{ref:"budget-item-account-2-"+index,refInFor:!0,staticClass:"budget-sub-form",attrs:{rules:_vm.allValidationRules,model:data}},[_c("el-form-item",{staticClass:"hide-error",attrs:{prop:"account",required:!0}},[_c("FLookupField",{staticClass:"width400px budget-table-select",attrs:{model:data.account.id,field:_vm.selectedExpenseField},on:{"update:model":function($event){return _vm.$set(data.account,"id",$event)}}})],1)],1)],1),_vm._l(_vm.canShowSplitUp?data.monthlyAmountSplitUp:[],(function(splitup,sIndex){return _c("td",{key:sIndex},[_c("div",[_c("el-input",{staticClass:"fc-budget-table-input width100",attrs:{type:"number"},on:{change:function($event){return _vm.computeYearlyAmount(data)}},model:{value:splitup.monthlyAmount,callback:function($$v){_vm.$set(splitup,"monthlyAmount",_vm._n($$v))},expression:"splitup.monthlyAmount"}})],1)])})),_c("td",{staticClass:"position-relative"},[_c("div",[_c("el-input",{staticClass:"fc-budget-table-input width100",attrs:{type:"number"},on:{change:function($event){return _vm.overwriteMonthlySplitUp(data)}},model:{value:data.yearlyAmount,callback:function($$v){_vm.$set(data,"yearlyAmount",_vm._n($$v))},expression:"data.yearlyAmount"}})],1),_c("div",{staticClass:"add-delete-action-buttons"},[_c("div",{staticClass:"flex-middle"},[_vm.budgetamount.expenses.length-1===index?_c("i",{staticClass:"el-icon-circle-plus-outline fc-row-add-icon f20 bold pL5",on:{click:function($event){return _vm.addExpenseBudgetItem()}}}):_vm._e(),_vm.budgetamount.expenses.length>1?_c("i",{staticClass:"el-icon-remove-outline fc-row-delete-icon f20 bold pL10",on:{click:function($event){return _vm.removeExpenseBudgetItem(index)}}}):_vm._e()])])])],2)})),0)]),_c("table",{staticClass:"mT50 table-fixed",class:[_vm.canShowSplitUp?"width100":"width50"]},[_c("thead",[_c("tr",[_c("th",{staticClass:"width150px"},[_vm._v(" TOTAL ")]),_vm._l(_vm.monthsDisplayName,(function(value,monthIndex){return _c("th",{key:monthIndex,staticClass:"width6o5 text-right"},[_vm._v(" "+_vm._s(value)+" ")])})),_c("th",{staticClass:"text-right"},[_vm._v(" "+_vm._s(_vm.getFiscalYearTitle)+" ")])],2)]),_c("tbody",[_c("tr",[_c("td",{staticClass:"td-padding"},[_vm._v(" "+_vm._s("INCOME ("+_vm.$currency+")")+" ")]),_vm._l(_vm.monthsDisplayName,(function(value,monthIndex){return _c("td",{key:monthIndex,staticClass:"text-right td-padding"},[_c("div",{staticClass:"overflow-scroll"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.getTotalCostForMonth(monthIndex,"incomes")))+" ")])])})),_c("td",{staticClass:"td-padding text-right"},[_c("div",{staticClass:"overflow-scroll"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.getTotalIncome))+" ")])])],2),_c("tr",[_c("td",{staticClass:"td-padding"},[_vm._v(" "+_vm._s("EXPENSE ("+_vm.$currency+")")+" ")]),_vm._l(_vm.monthsDisplayName,(function(value,monthIndex){return _c("td",{key:monthIndex,staticClass:"text-right td-padding"},[_c("div",{staticClass:"overflow-scroll"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.getTotalCostForMonth(monthIndex,"expenses")))+" ")])])})),_c("td",{staticClass:"td-padding text-right"},[_c("div",{staticClass:"overflow-scroll"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.getTotalExpense))+" ")])])],2),_c("tr",[_c("td",{staticClass:"td-padding bold"},[_vm._v(" "+_vm._s("NET INCOME ("+_vm.$currency+")")+" ")]),_vm._l(_vm.monthsDisplayName,(function(value,monthIndex){return _c("td",{key:monthIndex,staticClass:"text-right td-padding"},[_c("div",{staticClass:"overflow-scroll bold"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.getNetIncomeForMonth(monthIndex)))+" ")])])})),_c("td",{staticClass:"td-padding bold text-right"},[_c("div",{staticClass:"overflow-scroll"},[_vm._v(" "+_vm._s(_vm.$d3.format(",.2f")(_vm.getNetIncome))+" ")])])],2)])])])},FBudgetAmountsTablevue_type_template_id_6fe4ddc2_staticRenderFns=[],form_validator=(__webpack_require__(689730),__webpack_require__(145621)),FBudgetAmountsTablevue_type_script_lang_js={props:["model","field","budgetamount","initialCurrency","currencyObj"],components:{FLookupField:FLookupField/* default */.Z,FNewCurrencyField:FNewCurrencyField/* default */.Z},data:function(){return{canShowSplitUp:!0,sample:null,unitPrice:100,incomeAccountTypes:[],expenseAccountTypes:[],selectedExpenseField:{isDataLoading:!1,options:[],config:{},lookupModuleName:"chartofaccount",filters:{accountType:{operatorId:36,value:["5"]}},field:{lookupModule:{name:"chartofaccount",displayName:"chart of Account"}},multiple:!1,selectedItems:[]},selectedLookupField:{isDataLoading:!1,options:[],config:{},lookupModuleName:"chartofaccount",filters:{accountType:{operatorId:36,value:["4"]}},field:{lookupModule:{name:"chartofaccount",displayName:"chart of Account"}},multiple:!1,selectedItems:[]},allValidationRules:{account:[{required:!0,message:"Please input",trigger:"change",validator:form_validator/* validateForDropDownField */.mN}]},currencyData:{}}},mounted:function(){this.loadAllIncomeAccountTypes(),this.loadAllExpenseAccountTypes(),this.setCurrencyData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencyList:function(state){return state.activeCurrencies}})),{},{isMulticurrencyEnabled:function(){var _ref=this.$getProperty(this.account,"data.currencyInfo")||{},multiCurrencyEnabled=_ref.multiCurrencyEnabled;return multiCurrencyEnabled},canShowCurrencyDropDown:function(){var isMulticurrencyEnabled=this.isMulticurrencyEnabled,isDefaultCurrency=this.isDefaultCurrency;return!isDefaultCurrency&&isMulticurrencyEnabled},currencyDetails:{get:function(){var _ref2=this.currencyData||this.model||{},currencyCode=_ref2.currencyCode,exchangeRate=_ref2.exchangeRate,symbol=_ref2.symbol,initialCurrencyCode=_ref2.initialCurrencyCode;return{currencyCode:currencyCode,exchangeRate:exchangeRate,symbol:symbol,initialCurrencyCode:initialCurrencyCode}},set:function(value){var _ref3=this.$getProperty(this,"model.budgetamount")||{},expenses=_ref3.expenses,incomes=_ref3.incomes,_ref4=value||{},currencyCode=_ref4.currencyCode,exchangeRate=_ref4.exchangeRate;this.currencyData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currencyData||{}),value),expenses=(expenses||[]).map((function(expense){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},expense||{}),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})})),incomes=(incomes||[]).map((function(income){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},income||{}),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})})),this.$set(this.model,"budgetamount",{expenses:expenses,incomes:incomes}),this.$emit("update:model",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.model),{},{currencyCode:currencyCode,exchangeRate:exchangeRate}))}},incomeListMap:function(){var _this=this;return(this.budgetamount.incomes||[]).map((function(item){return _this.$getProperty(item,"account.id",-1)}))||[]},expenseListMap:function(){var _this2=this;return(this.budgetamount.expenses||[]).map((function(item){return _this2.$getProperty(item,"account.id",-1)}))||[]},getTotalIncome:function(){var incomes=this.budgetamount.incomes,total=0;return incomes.forEach((function(income){(0,validation/* isEmpty */.xb)(income.yearlyAmount)||(total+=Number(income.yearlyAmount))})),Number(total)},getTotalExpense:function(){var expenses=this.budgetamount.expenses,total=0;return expenses.forEach((function(income){(0,validation/* isEmpty */.xb)(income.yearlyAmount)||(total+=Number(income.yearlyAmount))})),Number(total)},getNetIncome:function(){return this.getTotalIncome-this.getTotalExpense},monthsDisplayName:function(){if(this.canShowSplitUp){var model=this.model;if(!(0,validation/* isEmpty */.xb)(model.fiscalYear.id)){var month=Number(model.fiscalYear.id);return[].concat((0,toConsumableArray/* default */.Z)(this.$constants.budgetMonthsDisplayName.slice(month-1,12)),(0,toConsumableArray/* default */.Z)(this.$constants.budgetMonthsDisplayName.slice(0,month-1)))}return this.$constants.budgetMonthsDisplayName}return[]},getFiscalYearTitle:function(){var model=this.model;return"FY".concat((0,validation/* isEmpty */.xb)(model.fiscalYearStart.id)?"":2018+Number(model.fiscalYearStart.id))}}),watch:{"currencyData.currencyCode":{handler:function(newVal,oldVal){newVal!=oldVal&&this.getExchangeRate(oldVal)},deep:!0}},methods:{setCurrencyData:function(){var _ref5=this.currencyObj||this.model||{},currencyCode=_ref5.currencyCode,exchangeRate=_ref5.exchangeRate,initialCurrencyCode=_ref5.initialCurrencyCode;this.currencyDetails={currencyCode:currencyCode,exchangeRate:exchangeRate,initialCurrencyCode:initialCurrencyCode}},setCurrencyCodeOnChange:function(currencyCode,exchangeRate,symbol){(0,validation/* isEmpty */.xb)(currencyCode)||(this.currencyDetails={currencyCode:currencyCode,exchangeRate:exchangeRate,symbol:symbol}),this.$emit("setCurrencyCode",currencyCode,exchangeRate)},hideShowSplitUp:function(){this.canShowSplitUp=!this.canShowSplitUp},addIncomeBudgetItem:function(){var _ref6=this.$constants||{},budgetIncomeDefaults=_ref6.budgetIncomeDefaults,_ref7=budgetIncomeDefaults||{},monthlyAmountSplitUp=_ref7.monthlyAmountSplitUp,_ref8=this.currencyDetails||{},currencyCode=_ref8.currencyCode,exchangeRate=_ref8.exchangeRate;monthlyAmountSplitUp=monthlyAmountSplitUp.map((function(monthlyAmount){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},monthlyAmount),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})})),budgetIncomeDefaults.monthlyAmountSplitUp=monthlyAmountSplitUp,this.budgetamount.incomes.push((0,utility_methods/* deepCloneObject */.kh)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},budgetIncomeDefaults||{}),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})))},removeIncomeBudgetItem:function(index){this.budgetamount.incomes.splice(index,1)},addExpenseBudgetItem:function(){var _ref9=this.$constants||{},budgetExpenseDefaults=_ref9.budgetExpenseDefaults,_ref10=budgetExpenseDefaults||{},monthlyAmountSplitUp=_ref10.monthlyAmountSplitUp,_ref11=this.currencyDetails||{},currencyCode=_ref11.currencyCode,exchangeRate=_ref11.exchangeRate;monthlyAmountSplitUp=monthlyAmountSplitUp.map((function(monthlyAmount){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},monthlyAmount),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})})),budgetExpenseDefaults.monthlyAmountSplitUp=monthlyAmountSplitUp,this.budgetamount.expenses.push((0,utility_methods/* deepCloneObject */.kh)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},budgetExpenseDefaults||{}),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})))},removeExpenseBudgetItem:function(index){this.budgetamount.expenses.splice(index,1)},getTotalCostForMonth:function(index,type){var costForTheMonth=0;return this.budgetamount[type].forEach((function(data){(0,validation/* isEmpty */.xb)(data.monthlyAmountSplitUp[index].monthlyAmount)||(costForTheMonth+=data.monthlyAmountSplitUp[index].monthlyAmount)})),Number(costForTheMonth)||0},getNetIncomeForMonth:function(index){return Number(this.getTotalCostForMonth(index,"incomes")-this.getTotalCostForMonth(index,"expenses"))||0},computeYearlyAmount:function(data){var yearlyAmount=0;data.monthlyAmountSplitUp.forEach((function(record){(0,validation/* isEmpty */.xb)(record.monthlyAmount)||(yearlyAmount+=Number(record.monthlyAmount))})),data.yearlyAmount=Number(yearlyAmount)},overwriteMonthlySplitUp:function(data){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref12,currencyCode,exchangeRate,monthlyAmount,isConfirmationRequired,oldYearlyAmount,value;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if((0,validation/* isEmpty */.xb)(data.yearlyAmount)){_context.next=14;break}if(_ref12=_this3.currencyDetails||{},currencyCode=_ref12.currencyCode,exchangeRate=_ref12.exchangeRate,monthlyAmount=Number(data.yearlyAmount)/12,isConfirmationRequired=!1,oldYearlyAmount=0,data.monthlyAmountSplitUp.forEach((function(record){0!==Number(record.monthlyAmount)&&(isConfirmationRequired=!0),oldYearlyAmount+=Number(record.monthlyAmount),record.currencyCode=currencyCode,record.exchangeRate=exchangeRate})),!isConfirmationRequired){_context.next=13;break}return _context.next=9,_this3.$dialog.confirm({title:"Overwrite Monthly amount",message:"Are you sure to overwrite monthly amounts",rbDanger:!0,rbLabel:"Yes"});case 9:value=_context.sent,value?_this3.overwriteMontlyAmount(data,monthlyAmount):data.yearlyAmount=oldYearlyAmount,_context.next=14;break;case 13:_this3.overwriteMontlyAmount(data,monthlyAmount);case 14:case"end":return _context.stop()}}),_callee)})))()},overwriteMontlyAmount:function(data,monthlyAmount){data.monthlyAmountSplitUp.forEach((function(record){record.monthlyAmount=monthlyAmount}))},validateForm:function(){var _this4=this,isIncomeValid=!0;this.budgetamount.incomes.forEach((function(data,index){var accountFormRef=_this4.$refs["budget-item-account-1-".concat(index)];(0,validation/* isEmpty */.xb)(accountFormRef)||accountFormRef[0].validate((function(valid){valid||(isIncomeValid=!1)}))}));var isExpenseValid=!0;return this.budgetamount.expenses.forEach((function(data,index){var accountFormRef=_this4.$refs["budget-item-account-2-".concat(index)];(0,validation/* isEmpty */.xb)(accountFormRef)||accountFormRef[0].validate((function(valid){valid||(isExpenseValid=!1)}))})),!(!isIncomeValid||isExpenseValid||1!==this.budgetamount.expenses.length)||(!(isIncomeValid||!isExpenseValid||1!==this.budgetamount.incomes.length)||isIncomeValid&&isExpenseValid)},getExchangeRate:function(prevCurrencyCode){var currencyList=this.currencyList,currencyDetails=this.currencyDetails,currencyObj=this.currencyObj,currencyInfoObj={};if(!(0,validation/* isEmpty */.xb)(currencyList)){var _ref13=currencyDetails||{},currencyCode=_ref13.currencyCode,result=(currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode}));prevCurrencyCode=prevCurrencyCode||(null===currencyObj||void 0===currencyObj?void 0:currencyObj.oldCurrencyCode);var previousCurrency=(currencyList||[]).find((function(currency){return prevCurrencyCode===currency.currencyCode})),_ref14=result||{},exchangeRate=_ref14.exchangeRate,_ref15=this.$getProperty(this.account,"data.currencyInfo")||{},baseCode=_ref15.currencyCode,isBaseCurrencyCode=currencyCode===baseCode,isPrevBaseCurrencyCode=prevCurrencyCode===baseCode,oldExchangeRate=null===previousCurrency||void 0===previousCurrency?void 0:previousCurrency.exchangeRate,_ref16=this.initialCurrency||{},initCode=_ref16.currencyCode,initRate=_ref16.exchangeRate;currencyCode===initCode&&(exchangeRate=initRate||exchangeRate),currencyInfoObj={exchangeRate:exchangeRate,oldExchangeRate:oldExchangeRate,isBaseCurrencyCode:isBaseCurrencyCode,isPrevBaseCurrencyCode:isPrevBaseCurrencyCode,currencyCode:currencyCode}}this.$emit("calculateExchangeRate",currencyInfoObj||{})}}},forms_FBudgetAmountsTablevue_type_script_lang_js=FBudgetAmountsTablevue_type_script_lang_js,FBudgetAmountsTable_component=(0,componentNormalizer/* default */.Z)(forms_FBudgetAmountsTablevue_type_script_lang_js,FBudgetAmountsTablevue_type_template_id_6fe4ddc2_render,FBudgetAmountsTablevue_type_template_id_6fe4ddc2_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBudgetAmountsTable=FBudgetAmountsTable_component.exports,FFacilityAvailabilityvue_type_template_id_950bb596_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"facility-availability-container"},[_vm._l(_vm.model.facilityWeekdayAvailability,(function(record,index){return _c("el-row",{key:index,staticClass:"mB20",attrs:{gutter:20,type:"flex",align:"middle"}},[_c("el-col",{attrs:{span:6}},[_c("el-checkbox",{model:{value:record.isSelected,callback:function($$v){_vm.$set(record,"isSelected",$$v)},expression:"record.isSelected"}},[_vm._v(_vm._s(_vm.$constants.WEEK_DAYS[record.dayOfWeek]))])],1),_c("el-col",{attrs:{span:6}},[_c("el-time-select",{staticClass:"width100 fc-input-full-border-select2",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45",maxTime:record.endTime}},model:{value:record.startTime,callback:function($$v){_vm.$set(record,"startTime",$$v)},expression:"record.startTime"}})],1),_c("el-col",{attrs:{span:6}},[_c("el-time-select",{staticClass:"width100 fc-input-full-border-select2",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:45",minTime:record.startTime}},model:{value:record.endTime,callback:function($$v){_vm.$set(record,"endTime",$$v)},expression:"record.endTime"}})],1),_vm.model.isChargeable?_c("el-col",{attrs:{span:6}},[_c("el-input",{staticClass:"fc-input-full-border2 currency-suffix",attrs:{type:"number"},scopedSlots:_vm._u([{key:"suffix",fn:function(){return[_vm._v(" "+_vm._s(_vm.$currency)+" ")]},proxy:!0}],null,!0),model:{value:record.cost,callback:function($$v){_vm.$set(record,"cost",$$v)},expression:"record.cost"}})],1):_vm._e()],1)})),(_vm.moduleData||{}).slotGeneratedUpto?_c("div",{staticClass:"fc-warning-tag-1 flex-middle justify-content-center pT0 pB0 f13"},[_c("inline-svg",{attrs:{src:"svgs/alert",iconClass:"icon text-left icon-sm fill-yellow vertical-text-top "}}),_c("div",{staticClass:"pL10 break-word"},[_c("ol",[_c("li",{staticClass:"pB5"},[_vm._v(" "+_vm._s("While editing the working hours, any booking made outside of the designated working hours, the system will automatically cancel it.")+" ")]),_c("li",[_vm._v(" "+_vm._s("If the slot duration is updated, all the bookings will be cancelled by the system automatically.")+" ")])])])],1):_vm._e()],2)},FFacilityAvailabilityvue_type_template_id_950bb596_staticRenderFns=[],FFacilityAvailabilityvue_type_script_lang_js={props:["model","field","moduleData"]},forms_FFacilityAvailabilityvue_type_script_lang_js=FFacilityAvailabilityvue_type_script_lang_js,FFacilityAvailability_component=(0,componentNormalizer/* default */.Z)(forms_FFacilityAvailabilityvue_type_script_lang_js,FFacilityAvailabilityvue_type_template_id_950bb596_render,FFacilityAvailabilityvue_type_template_id_950bb596_staticRenderFns,!1,null,null,null)
/* harmony default export */,FFacilityAvailability=FFacilityAvailability_component.exports,FFacilityBookingSlotsvue_type_template_id_8190af4c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-booking-slots-container"},[_c("div",{staticClass:"d-flex"},[_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{required:!0,prop:"bookingDate",label:"Date"}},[_c("FDatePicker",{staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"date","picker-options":_vm.pickerOptions},on:{change:function($event){return _vm.fetchFacilitySlots(!0)},initialized:function($event){return _vm.fetchFacilitySlots(!1)}},model:{value:_vm.model.bookingDate,callback:function($$v){_vm.$set(_vm.model,"bookingDate",$$v)},expression:"model.bookingDate"}})],1),_c("el-form-item",{staticClass:"section-items form-two-column",attrs:{prop:"bookingSlots",label:"Slots"}},[_vm.$validation.isEmpty(_vm.facilitySlots)?_c("div",{staticClass:"fc-input-div-full-border width fc-black-14 text-left bold",attrs:{disabled:""}},[_vm._v(" "+_vm._s(_vm.$t("forms.booking.no_slot_available"))+" ")]):_vm.$validation.isEmpty(_vm.facilitySlots)?_vm._e():_c("div",{staticClass:"fc-input-div-full-border width fc-black-14 text-left bold",attrs:{disabled:""}},[_vm._v(" "+_vm._s(_vm.formattedBookingstartEndTime)+" ")])])],1),_c("div",{staticClass:"fc-black-13 text-left mB10 mL10 fc-available-slot"},[_vm._v(" "+_vm._s(_vm.$t("forms.booking.time_slot"))+" ")]),_c("div",{staticClass:"d-flex flex-row mL10"},[_c("div",{staticClass:"f-slot-c1"},[_c("el-row",{attrs:{gutter:20}},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:50}}):_vm.$validation.isEmpty(_vm.facilitySlots)?_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("div",{staticClass:"fc-black-14 text-left fw6"},[_vm._v(" "+_vm._s(_vm.$t("forms.booking.no_available_slot"))+" ")])])]):_vm._e(),_vm._l(_vm.facilitySlots,(function(slot){return _c("el-col",{key:"slot-"+slot.id,staticClass:"slot-available-width",attrs:{span:4}},[_c("div",{staticClass:"time-slot-container",class:[_vm.isSelectedSlot(slot)&&"active",!_vm.isSelectedSlot(slot)&&_vm.isDisabledSlot(slot)&&"disabled pointer-events-none"],on:{click:function($event){return _vm.toggleSlotSelection(slot)}}},[_vm._v(" "+_vm._s(_vm.$helpers.formatMillistoHHMM(slot.slotStartTime)+" - "+_vm.$helpers.formatMillistoHHMM(slot.slotEndTime))+" ")])])}))],2)],1)]),_c("div",[_vm.formattedBookingstartEndTime&&_vm.facility.chargeable?_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-alert",{staticClass:"booking-slot-alret",attrs:{type:"success",closable:!1,effect:"dark"}},[_c("div",{staticClass:"fc-black-14 text-left bold flex-middle"},[_c("i",{staticClass:"el-icon-warning-outline fc-warning-icon-booking"}),_vm._v(" "+_vm._s(_vm.$t("forms.booking.external_Attendees_msg"))+" "),_c("el-popover",{attrs:{placement:"top",title:_vm.$t("forms.booking.slotHeading"),width:"300",trigger:"hover","popper-class":"fc-booking-popup"}},[_vm.$validation.isEmpty(_vm.bookingslot)?_c("div",[_c("div",{staticClass:"d-flex justify-content-center flex-direction-column align-center fc-black-14 text-left bold pT10 pB10"},[_vm._v(" "+_vm._s(_vm.$t("forms.booking.no_cost_breakdown"))+" ")])]):_c("div",_vm._l(_vm.bookingslot,(function(selectedSlot){return _c("div",{key:"selected-slot-"+selectedSlot.id,staticClass:"time-slot-data flex-middle vertical-middle justify-content-space pB10"},[_c("div",{staticClass:"time-slot-text"},[_c("InlineSvg",{staticClass:"mR5",attrs:{iconClass:"fc-color icon-xs icon",src:"svgs/clock"}}),_vm._v(" "+_vm._s(_vm.$helpers.formatMillistoHHMM(selectedSlot.slotStartTime)+" - "+_vm.$helpers.formatMillistoHHMM(selectedSlot.slotEndTime))+" ")],1),_c("div",{staticClass:"time-slot-text"},[_c("currency",{attrs:{value:selectedSlot.slotCost||0}})],1)])})),0),_vm.$validation.isEmpty(_vm.bookingslot)?_vm._e():_c("div",{staticClass:"time-slot-data2 flex-middle pT5 justify-content-space border-top3"},[_c("div",{staticClass:"time-slot-total-txt fc-black-14 text-left bold "},[_vm._v(" "+_vm._s(_vm.$t("common.header.total"))+" ")]),_c("div",{staticClass:"time-slot-total-txt bold"},[_c("currency",{attrs:{value:_vm.getTotalCost}})],1)]),_c("div",{staticClass:"underline fwBold pointer f16 pL5",attrs:{slot:"reference"},slot:"reference"},[_c("currency",{attrs:{value:_vm.getTotalCost}})],1)])],1)])],1)],1):_vm._e()],1)])},FFacilityBookingSlotsvue_type_template_id_8190af4c_staticRenderFns=[],FFacilityBookingSlotsvue_type_script_lang_js={props:["model","field","facilityId","bookingslot"],components:{FDatePicker:FDatePicker/* default */.Z},data:function(){return{facilitySlots:[],loading:!1,facility:{}}},watch:{facilityId:function(newVal,oldVal){newVal!=oldVal&&this.fetchFacilitySlots(!0)}},created:function(){
// this.fetchFacilitySlots(false)
},computed:{getTotalCost:function(){var _this$bookingslot=this.bookingslot,bookingslot=void 0===_this$bookingslot?[]:_this$bookingslot,totalCost=0;return bookingslot.forEach((function(slot){(0,validation/* isEmpty */.xb)(slot.slotCost)||(totalCost+=slot.slotCost)})),totalCost},selectedSlotIds:function(){var _this$bookingslot2=this.bookingslot,bookingslot=void 0===_this$bookingslot2?[]:_this$bookingslot2;return bookingslot.map((function(slot){return slot.id}))},pickerOptions:function(){var $helpers=this.$helpers,todayDate=$helpers.getOrgMoment().startOf("date").valueOf();return{disabledDate:function(time){return $helpers.getDateInOrg(time.getTime())<todayDate}}},formattedBookingstartEndTime:function(){return this.bookingslot.length?"".concat(this.$helpers.formatMillistoHHMM(this.slotStartTime)," - ").concat(this.$helpers.formatMillistoHHMM(this.slotEndTime)):""},slotStartTime:function(){return Math.min.apply(Math,this.bookingslot.map((function(o){return o.slotStartTime})))},slotEndTime:function(){return Math.max.apply(Math,this.bookingslot.map((function(o){return o.slotEndTime})))}},methods:{fetchFacilitySlots:function(reset){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,currentTime,_yield$API$fetchRecor,facility,error,_error$message,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(reset&&(_this.facilitySlots=[],_this.facility={},_this.$emit("update:bookingslot",[])),(0,validation/* isEmpty */.xb)(_this.facilityId)||(0,validation/* isEmpty */.xb)(_this.model.bookingDate)||isNaN(_this.model.bookingDate)){_context.next=12;break}return params={id:_this.facilityId,startTime:_this.model.bookingDate,endTime:_this.model.bookingDate+864e5},currentTime=_this.$helpers.getOrgMoment().valueOf(),_this.model.bookingDate<=currentTime&&(params.startTime=currentTime),_this.loading=!0,_context.next=8,api/* API */.bl.fetchRecord("facility",params);case 8:_yield$API$fetchRecor=_context.sent,facility=_yield$API$fetchRecor.facility,error=_yield$API$fetchRecor.error,error?(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Facility slots":_error$message,_this.$message.error(message)):(_this.facilitySlots=(facility||{}).slots||[],_this.facility=facility||{});case 12:_this.loading=!1;case 13:case"end":return _context.stop()}}),_callee)})))()},isSelectedSlot:function(){var slot=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$selectedSlotIds=this.selectedSlotIds,selectedSlotIds=void 0===_this$selectedSlotIds?[]:_this$selectedSlotIds;return!!selectedSlotIds.includes(slot.id)},isDisabledSlot:function(){var slot=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$selectedSlotIds2=this.selectedSlotIds,selectedSlotIds=void 0===_this$selectedSlotIds2?[]:_this$selectedSlotIds2,_this$facilitySlots=this.facilitySlots,facilitySlots=void 0===_this$facilitySlots?[]:_this$facilitySlots,_this$facility=this.facility,facility=void 0===_this$facility?{}:_this$facility;if((0,validation/* isEmpty */.xb)(selectedSlotIds))return!1;if(selectedSlotIds.length<facility.maxSlotBookingAllowed){var fSlot=facilitySlots.find((function(record){return record.id===slot.id})),slotIndex=facilitySlots.indexOf(fSlot),slotLeft=facilitySlots[slotIndex-1],slotRight=facilitySlots[slotIndex+1];if(selectedSlotIds.includes(null===slotLeft||void 0===slotLeft?void 0:slotLeft.id)||selectedSlotIds.includes(null===slotRight||void 0===slotRight?void 0:slotRight.id))return!1}return!0},toggleSlotSelection:function(){var slot=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$selectedSlotIds3=this.selectedSlotIds,selectedSlotIds=void 0===_this$selectedSlotIds3?[]:_this$selectedSlotIds3,_this$bookingslot3=this.bookingslot,bookingslot=void 0===_this$bookingslot3?[]:_this$bookingslot3;if(selectedSlotIds.includes(null===slot||void 0===slot?void 0:slot.id)){var bSlot=bookingslot.find((function(record){return record.id===(null===slot||void 0===slot?void 0:slot.id)}));this.isLeafNode(bSlot)?bookingslot.splice(bookingslot.indexOf(bSlot),1):this.$message.error("Cannot deselect this slot")}else bookingslot.push(slot)},isLeafNode:function(){var _facilitySlots,_facilitySlots2,slot=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$facilitySlots2=this.facilitySlots,facilitySlots=void 0===_this$facilitySlots2?[]:_this$facilitySlots2,_this$selectedSlotIds4=this.selectedSlotIds,selectedSlotIds=void 0===_this$selectedSlotIds4?[]:_this$selectedSlotIds4,fSlot=facilitySlots.find((function(record){return slot.id===record.id})),slotIndex=facilitySlots.indexOf(fSlot);if(slotIndex>-1&&(selectedSlotIds.includes(null===(_facilitySlots=facilitySlots[slotIndex+1])||void 0===_facilitySlots?void 0:_facilitySlots.id)&&selectedSlotIds.includes(null===(_facilitySlots2=facilitySlots[slotIndex-1])||void 0===_facilitySlots2?void 0:_facilitySlots2.id)))return!1;return!0}}},forms_FFacilityBookingSlotsvue_type_script_lang_js=FFacilityBookingSlotsvue_type_script_lang_js,FFacilityBookingSlots_component=(0,componentNormalizer/* default */.Z)(forms_FFacilityBookingSlotsvue_type_script_lang_js,FFacilityBookingSlotsvue_type_template_id_8190af4c_render,FFacilityBookingSlotsvue_type_template_id_8190af4c_staticRenderFns,!1,null,null,null)
/* harmony default export */,FFacilityBookingSlots=FFacilityBookingSlots_component.exports,FTimePicker=__webpack_require__(172630),FLookupFieldWithFloorplanvue_type_template_id_609ed4aa_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isFieldLoading}}):_c("div",{class:_vm.hideDropDown?"f-lookup-chooser":""},[_c("el-select",{ref:"selectBox",class:["fc-input-full-border-select2 width100 fp-picker-input",_vm.canShowIcons&&"resource-search",_vm.isMultiple&&"fc-tag"],attrs:{"collapse-tags":"",remote:_vm.isRemote,filterable:"",clearable:_vm.isClearable,multiple:_vm.isMultiple,popperAppendToBody:_vm.popperAppendToBody,"remote-method":function(searchText){return _vm.remoteMethod(searchText)},loading:_vm.field.isDataLoading,"loading-text":_vm.$t("common._common.searching"),disabled:_vm.disabled||_vm.hideDropDown,placeholder:_vm.field.placeHolderText||"Select"},on:{change:_vm.recordSelected},model:{value:_vm.modelObj,callback:function($$v){_vm.modelObj=$$v},expression:"modelObj"}},[_vm.canShowIcons?_c("div",{staticClass:"flRight inline-flex",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},slot:"prefix"},[_vm.canHideLookupIcon?_vm._e():_c("div",{class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},on:{click:function($event){return $event.stopPropagation(),_vm.openLookupFieldWizard(_vm.field)}},slot:"prefix"},[_c("inline-svg",{staticClass:"mR10",attrs:{src:"lookup",iconClass:"icon icon-sm-md mT15 fc-lookup-icon"}})],1),_vm.canHideFloorplanIcon?_vm._e():_c("div",{staticClass:"flRight",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},on:{click:function($event){return $event.stopPropagation(),_vm.openFloorPlanWizard(_vm.field)}},slot:"prefix"},[_c("inline-svg",{staticClass:"mR10",attrs:{src:"floorpicker",iconClass:"icon icon-sm-md mT15 fc-lookup-icon"}})],1)]):_vm._e(),_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:option.value+" "+index,staticClass:"fc-input-full-border-select2 width100",attrs:{label:option.label,value:option.value}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.$validation.isEmpty(option.secondaryLabel)?_vm._e():_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.secondaryLabel))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])}))],2),_vm.hideDropDown&&!_vm.$validation.isEmpty(_vm.modelObj)?_c("div",{staticClass:"remove-icon"},[_c("i",{staticClass:"el-icon-circle-close pointer f13",on:{click:_vm.clearData}})]):_vm._e(),_vm.openfloorplanWizard?_c("IndoorFloorPlanPicker",{attrs:{visibility:_vm.openfloorplanWizard,moduleName:_vm.lookupModuleName,field:_vm.field,inputValue:_vm.modelObj,siteId:_vm.siteId,moduleId:_vm.lookupModuleId},on:{"update:visibility":function($event){_vm.openfloorplanWizard=$event},onSelect:_vm.setValue}}):_vm._e()],1)},FLookupFieldWithFloorplanvue_type_template_id_609ed4aa_staticRenderFns=[],IndoorFloorPlanPickervue_type_template_id_c4ad6d7e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container fp-picker-dialog",attrs:{title:_vm.$t("floorplan.picker_title"),visible:_vm.visibility,width:"70%","before-close":_vm.closeDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_vm.loading?_vm._e():[_vm.indoorFloorPlanId?_c("div",{staticClass:" fp-picker-dialog-body h100"},[_c("div",{staticClass:"width100 inline-flex"},[_vm.filterDialogOpen?_c("div",{staticClass:"width70 flex align-center"},[_c("div",{staticClass:"width70"},[_c("IndoorFloorPlanPickerSwitcher",{attrs:{floorplanId:_vm.indoorFloorPlanId,visibility:_vm.filterDialogOpen,floorId:_vm.floor.id,buildingId:_vm.building.id},on:{"update:visibility":function($event){_vm.filterDialogOpen=$event},changeFloor:_vm.switchFloor}})],1),_vm.selectedFeature?_c("div",{staticClass:"selelectedValue flex-middle width25"},[_vm.modulesVsIcon[_vm.moduleName]?_c("inline-svg",{staticClass:"width20px",attrs:{src:_vm.modulesVsIcon[_vm.moduleName],iconClass:"icon icon-md mR10 fill-blue2"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.selectedFeature?""+_vm.selectedFeature.label:"")+" ")],1):_vm._e()]):_vm._e(),_c("portal-target",{staticClass:"width30 pull-right",attrs:{name:"indoorFloorPlanPickerSearch"}})],1),!_vm.loading&&_vm.indoorFloorPlanId?_c("IndoorFloorPlanPickerCore",{attrs:{id:_vm.indoorFloorPlanId,building:_vm.building,floor:_vm.floor,selectedModuleName:_vm.moduleName,selectedFeatureId:_vm.inputValue,selectedModuleId:_vm.moduleId},on:{"update:selectedFeatureId":function($event){_vm.inputValue=$event},"update:selected-feature-id":function($event){_vm.inputValue=$event},onFeatureSelect:_vm.handleFeatureSelect}}):_vm._e()],1):_c("div",{staticClass:" fp-picker-dialog-body h100"},[_c("div",{staticClass:"fp-picker-nodata"},[_vm._v(" "+_vm._s(_vm.siteId?_vm.$t("floorplan.no_floorplan_site"):_vm.$t("floorplan.no_floorplan"))+" ")])])],_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel uppercase",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("floorplan.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save uppercase",attrs:{disabled:_vm.confirmBtnDisableState,type:"primary"},on:{click:function($event){return _vm.confirm()}}},[_vm._v(_vm._s(_vm.$t("floorplan.confirm"))+" ")])],1)],2)],1)},IndoorFloorPlanPickervue_type_template_id_c4ad6d7e_staticRenderFns=[],IndoorFloorPlanPickerCorevue_type_template_id_eb229bf4_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"h100 flex flex-col"},[_c("div",{staticClass:"fp-picker-header width100 row flex-middle justify-content-space pT0"},[_c("portal",{attrs:{to:"indoorFloorPlanPickerSearch"}},[_c("div",{staticClass:"text-right"},[_vm.floorplanloading?_vm._e():_c("IndoorFloorPlanPickerSearch",{attrs:{deskList:_vm.deskList,spaceList:_vm.spaceList,loading:_vm.employeLoading,departments:_vm.departments,viewerMode:_vm.viewerMode,lockers:_vm.lockerList,parkings:_vm.parkingList,floorId:_vm.floorId,floorplanId:_vm.floorplanId},on:{focus:_vm.focusMarker,unselectFeature:_vm.clearFeatureData,resetZoom:_vm.resetZoomLevel}})],1)])],1),_c("div",{staticClass:"indoor-floorplan-editor height80",attrs:{id:"viewer"}},[_c("div",{staticClass:"indoor-fp-mapbox-section relative"},[_vm.floorplanloading?_c("FloorPlanLoading"):_vm._e(),_c("base-map",{staticStyle:{width:"100%"},attrs:{maxZoom:_vm.maxZoom,zoom:_vm.zoom,minZoom:_vm.minZoom},on:{mapLoaded:_vm.mapLoaded}})],1),_c("IndoorFloorPlanMarkerTooltip",{ref:"markerTooltip",attrs:{tooltipData:_vm.tooltipData}})],1)])},IndoorFloorPlanPickerCorevue_type_template_id_eb229bf4_staticRenderFns=[],ViewerActions=(__webpack_require__(339772),__webpack_require__(381904)),IndoorFloorPlanViewer=__webpack_require__(769240),FloorPlanLoading=__webpack_require__(386046),mapbox_gl=__webpack_require__(706158),mapbox_gl_default=__webpack_require__.n(mapbox_gl),IndoorFloorPlanMarkerToolipNew=__webpack_require__(742727),IndoorFloorPlanPickerSearchvue_type_template_id_9c4cdd66_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"indoor-plan-search-con"},[_vm._m(0),_c("el-select",{staticClass:"fc-input-full-border-select2 fp-picker-search",attrs:{placeholder:_vm.$t("floorplan.search"),filterable:"",remote:"",clearable:"","reserve-keyword":"","popper-append-to-body":!1,"remote-method":_vm.remoteSearch},on:{clear:_vm.clearSearch},model:{value:_vm.selectedResult,callback:function($$v){_vm.selectedResult=$$v},expression:"selectedResult"}},_vm._l(_vm.serachResult,(function(value,key){return _c("el-option-group",{key:key,attrs:{label:key}},["Employee"===key?_vm._l(value,(function(employee,index){return _c("el-option",{key:"employee-"+index,attrs:{label:employee.name,value:employee.id}},[_c("div",{key:"employee-"+index,on:{click:function($event){return _vm.actionEmployee(employee)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("avatar",{attrs:{size:"md",user:employee}})],1)]),_c("el-col",{staticClass:"pL25",attrs:{span:22}},[_c("div",{staticClass:"fc-black-14 text-left fc-rightside-ico pointer"},[_c("div",[_vm._v(" "+_vm._s(employee.name||"")+" ")]),_c("div",{staticClass:"flex flex-row pT5"},[employee&&employee.space?_c("div",{staticClass:"flex flex-row pR10"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/office_desk",iconClass:"deskFill icon-path-fill vertical-bottom"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                          arrow: true,\n                          arrowType: 'round',\n                          animation: 'fade',\n                        }"}],staticClass:"fc-black-12 fw4 text-left break-word line-height18 truncate-text pL3",staticStyle:{"max-width":"100px"},attrs:{content:employee.space.name}},[_vm._v(" "+_vm._s(employee.space.name)+" ")])]):_vm._e(),employee.data&&employee.data.department?_c("div",{staticClass:"flex-middle"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/department2",iconClass:"icon icon-sm icon-path-fill mR5"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                          arrow: true,\n                          arrowType: 'round',\n                          animation: 'fade',\n                        }"}],staticClass:"fc-black-12 fw4 text-left break-word line-height18 truncate-text",staticStyle:{"max-width":"150px"},attrs:{content:employee.data.department.name}},[_vm._v(" "+_vm._s(employee.data&&employee.data.department?employee.data.department.name:"")+" ")])]):_vm._e()])])])],1)],1)])})):_vm._e(),"Desks"===key?_vm._l(value,(function(desk,index){return _c("el-option",{key:"desks-"+index,attrs:{label:desk.name,value:desk.id}},[_c("div",{key:"desk"+index,on:{click:function($event){return _vm.emitData("desks",desk)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/office_desk",iconClass:"icon text-center fp-icon-inside icon-xxl"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",[_vm._v(" "+_vm._s(desk.name||"")+" ")]),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"fc-black-12 fw4 pT5",staticStyle:{color:"#a3a6b1"}},[_vm._v(" "+_vm._s(_vm.deskType[desk.deskType])+" ")])])])])])],1)],1)])})):_vm._e(),"Space"===key?_vm._l(value,(function(data,index){return _c("el-option",{key:"space-"+index,attrs:{label:data.name,value:data.id}},[_c("div",{key:"space"+index,on:{click:function($event){return _vm.emitData("space",data)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/room1",iconClass:"icon text-center icon-md  fp-icon-inside"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",{staticClass:"flex-middle"},[_c("div",[_vm._v(" "+_vm._s(data.name||"")+" ")]),data.isReservable?_c("div",{staticClass:"fc-room-tag"},[_c("el-tag",[_vm._v("Reservable")])],1):_vm._e()]),_c("div",{staticClass:"pT5 flex-middle"},[_c("i",{staticClass:"el-icon-user-solid f14",staticStyle:{color:"#a9aacb"}}),_c("div",{staticClass:"pL5 fc-black-12 fw4"},[_vm._v(" "+_vm._s(data.maxOccupancy>0?data.maxOccupancy:0)+" ")])])])])],1)],1)])})):_vm._e(),"Lockers"===key?_vm._l(value,(function(data,index){return _c("el-option",{key:"lockers-"+index,attrs:{label:data.name,value:data.id}},[_c("div",{key:"lockers"+index,on:{click:function($event){return _vm.emitData("space",data)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/locker",iconClass:"icon text-center icon-md  fp-icon-inside"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",[_vm._v(" "+_vm._s(data.name||"")+" ")]),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"flex-middle"},[data.data&&data.data.singleline?_c("div",{staticClass:"fc-black-12 fw4"},[_vm._v(" "+_vm._s(data.data.singleline)+" ")]):_vm._e()])])])])],1)],1)])})):_vm._e(),"Parkingstall"===key?_vm._l(value,(function(data,index){return _c("el-option",{key:"parkingstall-"+index,attrs:{label:data.name,value:data.id}},[_c("div",{key:"parkingstall"+index,on:{click:function($event){return _vm.emitData("space",data)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/parking",iconClass:"icon text-center icon-md  fp-icon-inside"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",[_vm._v(" "+_vm._s(data.name||"")+" ")]),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"flex-middle"},[data.parkingType?_c("div",{staticClass:"fc-black-12 fw4"},[_vm._v(" "+_vm._s(_vm.parkingtypeMap[data.parkingType])+" ")]):_vm._e()])])])])],1)],1)])})):_vm._e()],2)})),1)],1)},IndoorFloorPlanPickerSearchvue_type_template_id_9c4cdd66_staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"custom_suffix_icon"},[_c("i",{staticClass:"el-icon-search el-input__icon"})])}],IndoorFloorplanSearch=(__webpack_require__(61514),__webpack_require__(103649)),IndoorFloorPlanPickerSearchvue_type_script_lang_js={extends:IndoorFloorplanSearch/* default */.Z,data:function(){return{selectedResult:null,selectedModule:"all",selectedFilter:{employee:{assignment:"asssigned"},desks:{desktype:1},lockers:{status:1},parkingstall:{status:1},space:{capcity:-1}}}},created:function(){this.searchData()},computed:{assignedEmployeeList:function(){var _this=this,emplyeeList=[];return this.deskList.length&&this.deskList.forEach((function(desk){if(desk.employee){var emp=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},desk.employee),{},{desks:desk,floor:{id:_this.floorId},space:desk});_this.$set(emp.space,"floor",{id:_this.floorId}),emplyeeList.push(emp)}})),emplyeeList},serachResult:function(){var result={},empList=this.empList,dskList=this.dskList,spacesList=this.spacesList,lockersList=this.lockersList,parkingstallList=this.parkingstallList;return empList&&empList.length&&(result["Employee"]=this.applySearchLimit(empList)),dskList&&dskList.length&&(result["Desks"]=this.applySearchLimit(dskList)),spacesList&&spacesList.length&&(result["Space"]=this.applySearchLimit(this.applyOthermoduleFilters(spacesList))),lockersList&&lockersList.length&&(result["Lockers"]=this.applySearchLimit(lockersList)),parkingstallList&&parkingstallList.length&&(result["Parkingstall"]=this.applySearchLimit(parkingstallList)),result}},methods:{clearSearch:function(){
// need to implement clear
this.$emit("unselectFeature"),this.$emit("resetZoom")},remoteSearch:function(query){this.search=query,this.searchContent()},searchLocalEmployee:function(searchText){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this2.isLoading=!0,setTimeout((function(){var assignedEmployeeList=_this2.assignedEmployeeList;_this2.empList=[];var dataList=assignedEmployeeList.filter((function(emp){return searchText?emp.name.toLowerCase().indexOf(searchText.toLowerCase())>-1?emp:null:emp}));_this2.empList=dataList,_this2.isLoading=!1}),1e3);case 2:case"end":return _context.stop()}}),_callee)})))()}}},components_IndoorFloorPlanPickerSearchvue_type_script_lang_js=IndoorFloorPlanPickerSearchvue_type_script_lang_js,IndoorFloorPlanPickerSearch_component=(0,componentNormalizer/* default */.Z)(components_IndoorFloorPlanPickerSearchvue_type_script_lang_js,IndoorFloorPlanPickerSearchvue_type_template_id_9c4cdd66_render,IndoorFloorPlanPickerSearchvue_type_template_id_9c4cdd66_staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanPickerSearch=IndoorFloorPlanPickerSearch_component.exports,IndoorFloorPlanPickerCorevue_type_script_lang_js={props:["building","floor","selectedModuleName","selectedFeatureId","id","selectedModuleId"],extends:IndoorFloorPlanViewer/* default */.Z,mixins:[ViewerActions/* default */.Z],components:{FloorPlanLoading:FloorPlanLoading/* default */.Z,IndoorFloorPlanMarkerTooltip:IndoorFloorPlanMarkerToolipNew/* default */.Z,IndoorFloorPlanPickerSearch:IndoorFloorPlanPickerSearch},watch:{id:{immediate:!0,handler:function(){
// this.init()
}}},computed:{buildingId:function(){var _this$building;return null!==(_this$building=this.building)&&void 0!==_this$building&&_this$building.id?this.building.id:null},floorId:function(){var _this$floor;return null!==(_this$floor=this.floor)&&void 0!==_this$floor&&_this$floor.id?this.floor.id:null}},data:function(){return{zoom:20,propertiesFeatureVisibile:!1,visibleFilter:!1,filterDialogOpen:!0,floorSearchBuilding:"",buildingActive:"",moveElement:!1,mouseMouseEnter:!1,spaceMapDialog:!1,lockerDialog:!1,parkingdialog:!1,selectedZone:{},viewerMode:"ASSIGNMENT",zonesModules:["space","lockers","parkingstall"]}},methods:{addSelectedMarker:function(feature){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var asyncCalls;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return asyncCalls=[_this.onMapLoad],_context.next=3,Promise.all(asyncCalls);case 3:_this.$nextTick((function(){_this.removeYourMarker();var mapMarker=new(mapbox_gl_default().Marker)({color:"#f53b5d"}).setLngLat(feature.geometry.coordinates).addTo(_this.map);_this.$nextTick((function(){_this.mapMarker=mapMarker}))}));
// this.addYourMarker(feature, 'selectedMarker')
case 4:case"end":return _context.stop()}}),_callee)})))()},removeYourMarker:function(){this.mapMarker&&this.mapMarker.remove()},removeLayer:function(layerName){this.map.removeLayer(layerName)},onFeatureSelect:function(feature,node){"marker"===node&&this.addSelectedMarker(feature),this.$emit("onFeatureSelect",feature,node)},resetZoomLevel:function(){this.imageBounds&&this.map&&this.map.fitBounds(this.imageBounds,{padding:100})},clearFeatureData:function(){
// this method used in the search clear
this.selectedFeature=null,this.selectedZone={}},focusAndActiveMarker:function(feature){var _this2=this;this.selectedFeature&&this.unSelectFeature(this.selectedFeature),feature.active&&(this.selectFeature(feature),this.selectedFeature=feature),this.map.flyTo({center:feature.geometry.coordinates,zoom:this.maxZoom-1,essential:!0}),this.$nextTick((function(){_this2.onFeatureSelect(feature,"marker")}))},focusAndActivezone:function(feature){var _this3=this;this.selectedFeature&&this.unSelectFeature(this.selectedFeature),feature.active&&(this.selectFeature(feature),this.selectedFeature=feature,this.selectedZone=feature,this.$nextTick((function(){_this3.onFeatureSelect(feature,"zone")})));var coordinates=feature.geometry.coordinates;this.fitBounds(coordinates[0],100)},zoneClick:function(e,f){f.active&&(//zone active state set from child comps  , based on IS_RESERVABLE Flag
e.preventDefault(),this.selectedFeature&&this.unSelectFeature(this.selectedFeature),this.selectFeature(f),this.selectedFeature=f,this.onFeatureSelect(f,"zone"),this.handleZoneClick&&this.handleZoneClick(e,f))},changeFloor:function(value){this.$emit("switchFloor",value)},afterFloorPlanRender:function(){try{var selectedModuleName=this.selectedModuleName,selectedFeatureId=this.selectedFeatureId;selectedModuleName&&selectedFeatureId&&(this.zonesModules.includes(selectedModuleName)?this.focusMarker("space",{id:selectedFeatureId}):this.focusMarker(selectedModuleName,{id:selectedFeatureId}))}catch(e){}},getZoneFeatureFromRecordId:function(recordId){var data=this.zones.features.find((function(rt){var _rt$space;return null!==(_rt$space=rt.space)&&void 0!==_rt$space&&_rt$space.id&&rt.space.id===recordId?rt:null}));return data||null},getMarkerFeatureFromRecordId:function(recordId){var data=this.markers.features.find((function(rt){return rt.recordId===recordId}));return data||null},updateLockerProperty:function(feature){var data=feature.moduleData;if(data){var dataIndex=this.moduleVsData[this.lockerModuleId].findIndex((function(rt){return rt.id===data.id}));dataIndex>-1&&this.moduleVsData[this.lockerModuleId].splice(dataIndex,1,data),this.$set(feature,"moduleData",data),data.employee&&data.employee.id}this.refreshData()},dropElement:function(){this.isDraging=!1;var div=document.getElementById("dragItem");div.style.display="none",this.dragElement=null,this.employeSideBar=!0},mousemove:function(e){this.isDraging&&this.dragElement&&this.ghostElemntHandle(e)},mouseup:function(e){this.dropElement(e)},beforeDestroy:function(){this.map=null},markerMouseLeave:function(e,f){this.popup&&this.popup.remove(),this.popup=null,e.preventDefault();var map=this.map,canvas=map.getCanvasContainer();canvas.style.cursor="",this.isDraging&&f.active&&(f.properties.markerId=f.properties.normalClass),f&&f.properties.employeeId&&this.moveElement&&!this.mouseMouseEnter&&(map["dragPan"].disable(),f.properties.markerId="desk",
// map.setLayoutProperty(id, 'icon-image', 'desk')
f.desk&&f.desk.employee&&f.desk.employee.id&&this.mouseDownElement(e,f.desk.employee,f),f.properties.employeeId=null,this.$set(f.properties,"secondaryLabel",this.getDeskSecondaryLabel(f)),this.unassignDesk(f),this.updateProperty(f)),this.refreshData(),this.mouseMouseEnter=!1},closeSpaceDialog:function(){this.selectedZone&&this.unSelectFeature(this.selectedZone),this.spaceMapDialog=!1,this.lockerDialog=!1,this.parkingdialog=!1,this.selectedZone={}},handleZoneClick:function(e,f){e.preventDefault(),f.properties&&f.properties.spaceCategory?"Lockers"===f.properties.spaceCategory?this.lockerDialog=!0:"Parking Stall"===f.properties.spaceCategory?this.parkingdialog=!0:this.spaceMapDialog=!0:this.spaceMapDialog=!0,this.selectedZone=f},markerMouseEnter:function(e,f){e.preventDefault();var map=this.map;this.mouseMouseEnter=!0;var canvas=map.getCanvasContainer();canvas.style.cursor="pointer",this.isDraging&&f.active?(this.hoveredMarker=f,f.properties.markerId=f.properties.hoverClass):(this.popup&&(this.popup.remove(),this.popup=null),this.popup=new(mapbox_gl_default().Popup)({closeButton:!1,closeOnClick:!1}),this.popup.setLngLat(f.geometry.coordinates).setDOMContent(this.$refs["markerTooltip"].$el).addTo(map)),this.refreshData()},zoneMouseEnter:function(e,f){e.preventDefault();var map=this.map;this.mouseMouseEnter=!0;var canvas=map.getCanvasContainer();canvas.style.cursor="pointer",this.popup&&(this.popup.remove(),this.popup=null),this.popup=new(mapbox_gl_default().Popup)({closeButton:!1,closeOnClick:!1}),this.popup.setLngLat(this.getPolygonCenter([f.geometry.coordinates[0]])).setDOMContent(this.$refs["markerTooltip"].$el).addTo(map)},zoneMouseLeave:function(e){this.popup&&this.popup.remove(),this.popup=null,e.preventDefault();var map=this.map,canvas=map.getCanvasContainer();canvas.style.cursor=""},
// eslint-disable-next-line no-unused-vars
markerMouseDown:function(e,f,id){if(f.active){var map=this.map;map["dragPan"].disable(),this.moveElement=!0,this.mouseMouseEnter=!1,this.refreshData()}},markerMouseUp:function(e,f){if(f.active){e.preventDefault();var map=this.map,canvas=map.getCanvasContainer();if(canvas.style.cursor="pointer",this.isDraging&&this.dragElement){this.$set(f.properties,"employeeId",Number(this.dragElement.id));var data=this.dragElement.data;this.$set(f,"employee",this.dragElement),data&&data.department&&data.department.id?(this.$set(f.properties,"departmentId",Number(data.department.id)),this.$set(f,"department",data.department)):f.properties.departmentId&&(delete f.properties.departmentId,delete f.department),this.updateProperty(f),this.updateMove(f),this.dropElement()}this.dragElement=null,this.moveElement=!1,map["dragPan"].enable()}},handleMarkerClick:function(){this.propertiesFeatureVisibile=!0},
// Do not move this to mixin, mixin methods wont be properly overridden from children
//this methods makes sense to be in children
setDeskActiveState:function(feature){var _feature$properties,_feature$properties2,_feature$properties3;if(null!==feature&&void 0!==feature&&null!==(_feature$properties=feature.properties)&&void 0!==_feature$properties&&_feature$properties.markerModuleName&&this.selectedModuleName===feature.properties.markerModuleName)if(null!==(_feature$properties2=feature.properties)&&void 0!==_feature$properties2&&_feature$properties2.deskId&&null!==(_feature$properties3=feature.properties)&&void 0!==_feature$properties3&&_feature$properties3.deskType){var deskType=feature.properties.deskType;1===deskType?(this.$set(feature,"active",!0),this.$set(feature.properties,"active",!0)):(this.$set(feature,"active",!1),this.$set(feature.properties,"active",!1))}else this.$set(feature,"active",!0),this.$set(feature.properties,"active",!0);else this.$set(feature,"active",!1),this.$set(feature.properties,"active",!1);return feature},setActive:function(feature){return this.$set(feature,"active",!0),null!==feature&&void 0!==feature&&feature.properties&&this.$set(feature.properties,"active",!0),feature},setZoneActiveState:function(feature){var _feature$space,_feature$space2;
// used to set the active state
return"space"===this.selectedModuleName||"lockers"===this.selectedModuleName&&null!==feature&&void 0!==feature&&null!==(_feature$space=feature.space)&&void 0!==_feature$space&&null!==(_feature$space=_feature$space.spaceCategory)&&void 0!==_feature$space&&_feature$space.id&&feature.space.spaceCategory.id===this.lockerSpaceCatgegoryId||"parkingstall"===this.selectedModuleName&&null!==feature&&void 0!==feature&&null!==(_feature$space2=feature.space)&&void 0!==_feature$space2&&null!==(_feature$space2=_feature$space2.spaceCategory)&&void 0!==_feature$space2&&_feature$space2.id&&feature.space.spaceCategory.id===this.parkingSpaceCategoryId?this.setActive(feature):(this.$set(feature,"active",!1),null!==feature&&void 0!==feature&&feature.properties&&this.$set(feature.properties,"active",!1)),feature}}},indoorFloorPlan_IndoorFloorPlanPickerCorevue_type_script_lang_js=IndoorFloorPlanPickerCorevue_type_script_lang_js,IndoorFloorPlanPickerCore_component=(0,componentNormalizer/* default */.Z)(indoorFloorPlan_IndoorFloorPlanPickerCorevue_type_script_lang_js,IndoorFloorPlanPickerCorevue_type_template_id_eb229bf4_render,IndoorFloorPlanPickerCorevue_type_template_id_eb229bf4_staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanPickerCore=IndoorFloorPlanPickerCore_component.exports,IndoorFloorPlanPickerSwitchervue_type_template_id_338b1853_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_vm._e():_c("div",{staticClass:"width100 fp-picker-switcher relative"},[_c("i",{staticClass:"el-icon-office-building fp-picker-prefix-icon"}),_c("el-cascader",{ref:"floorplan-swicther",staticClass:"width100 el-input-textbox-full-border fp-picker-selecter",attrs:{options:_vm.switcherData,props:_vm.propData,filterable:""},on:{change:_vm.expandChange},scopedSlots:_vm._u([{key:"default",fn:function(ref){var data=ref.data;return[_c("span",[_vm._v(_vm._s(""+data.label))])]}}],null,!1,1904611616),model:{value:_vm.value,callback:function($$v){_vm.value=$$v},expression:"value"}})],1)},IndoorFloorPlanPickerSwitchervue_type_template_id_338b1853_staticRenderFns=[],IndoorFloorPlanSwitcher=(__webpack_require__(186466),__webpack_require__(517185)),IndoorFloorPlanPickerSwitchervue_type_script_lang_js={extends:IndoorFloorPlanSwitcher/* default */.Z,data:function(){var self=this;return{loading:!0,value:[],propData:{lazy:!0,lazyLoad:function(node,resolve){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var id,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if((0,validation/* isEmpty */.xb)(node.data)){_context.next=8;break}return id=node.data.id,_context.next=4,self.loadFloor(id);case 4:data=self.formatChildrenData(id),resolve(data),_context.next=9;break;case 8:resolve([]);case 9:case"end":return _context.stop()}}),_callee)})))()}}}},mounted:function(){this.initData()},computed:{formatedData:function(){var data=[];return(0,validation/* isEmpty */.xb)(this.filterdBuildingMap)||Object.values(this.filterdBuildingMap).forEach((function(buildings){data=[].concat((0,toConsumableArray/* default */.Z)(data),(0,toConsumableArray/* default */.Z)(buildings))})),data},switcherData:function(){var _this=this;return this.formatedData.forEach((function(building){building&&(_this.$set(building,"label",building.name),_this.$set(building,"value",building.id))})),this.formatedData}},methods:{initData:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_this2.loading=!0,!_this2.buildingId){_context2.next=7;break}if(_this2.value=[_this2.buildingId],!_this2.floorId){_context2.next=7;break}return _this2.value.push(_this2.floorId),_context2.next=7,_this2.loadFloor(_this2.buildingId).then((function(){var data=_this2.formatChildrenData(_this2.buildingId)||[];_this2.switcherData.forEach((function(building){building.id===_this2.buildingId&&_this2.$set(building,"children",data)}))}));case 7:_this2.loading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},expandChange:function(value){value&&value.length&&value.length>1&&this.$emit("changeFloor",value[1])},formatChildrenData:function(id){var _this3=this,data=this.buildingFloorMap[id];return(0,validation/* isEmpty */.xb)(data)?[]:(data.forEach((function(floor){_this3.$set(floor,"label",floor.name),_this3.$set(floor,"value",floor.id),_this3.$set(floor,"leaf",1)})),data)}}},components_IndoorFloorPlanPickerSwitchervue_type_script_lang_js=IndoorFloorPlanPickerSwitchervue_type_script_lang_js,IndoorFloorPlanPickerSwitcher_component=(0,componentNormalizer/* default */.Z)(components_IndoorFloorPlanPickerSwitchervue_type_script_lang_js,IndoorFloorPlanPickerSwitchervue_type_template_id_338b1853_render,IndoorFloorPlanPickerSwitchervue_type_template_id_338b1853_staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanPickerSwitcher=IndoorFloorPlanPickerSwitcher_component.exports,IndoorFloorPlanPickervue_type_script_lang_js={props:["visibility","moduleName","inputValue","siteId","moduleId"],components:{IndoorFloorPlanPickerCore:IndoorFloorPlanPickerCore,IndoorFloorPlanPickerSwitcher:IndoorFloorPlanPickerSwitcher},data:function(){return{selectedFeature:null,filterDialogOpen:!1,indoorFloorPlanId:null,loading:!0,floor:{name:this.$t("floorplan.loading_text")},building:{name:this.$t("floorplan.loading_text")},floorId:null,modulesVsIcon:{employee:"svgs/person",desks:"svgs/office_desk",space:"svgs/room2",lockers:"svgs/locker",parkingstall:"svgs/parking"}}},computed:{buildingId:function(){var _this$building;return null!==(_this$building=this.building)&&void 0!==_this$building&&_this$building.id?this.building.id:null},confirmBtnDisableState:function(){return!this.indoorFloorPlanId}},mounted:function(){this.init()},methods:{confirm:function(){var selectedFeature=this.selectedFeature;if(null!==selectedFeature&&void 0!==selectedFeature&&selectedFeature.featureType)if("marker"===selectedFeature.featureType)null!==selectedFeature&&void 0!==selectedFeature&&selectedFeature.recordId&&(this.$emit("onSelect",selectedFeature.recordId,selectedFeature),this.$emit("input",selectedFeature.recordId));else if("zone"===selectedFeature.featureType){var _selectedFeature$spac;null!==selectedFeature&&void 0!==selectedFeature&&null!==(_selectedFeature$spac=selectedFeature.space)&&void 0!==_selectedFeature$spac&&_selectedFeature$spac.id&&(this.$emit("onSelect",selectedFeature.space.id,selectedFeature),this.$emit("input",selectedFeature.space.id))}this.$emit("update:visibility",!1)},switchFloor:function(value){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_this.floorId=value,_context.next=4,_this.fetchFloorDetails();case 4:_this.loading=!1;case 5:case"end":return _context.stop()}}),_callee)})))()},init:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_this2.loading=!0,_this2.filterDialogOpen=!1,!_this2.inputValue||!_this2.moduleName){_context2.next=9;break}return _context2.next=5,_this2.getModuleData();case 5:return _context2.next=7,_this2.fetchFloorDetails();case 7:_context2.next=11;break;case 9:return _context2.next=11,_this2.getFirstActivePlanFromFloorList();case 11:_this2.loading=!1,_this2.filterDialogOpen=!0;case 13:case"end":return _context2.stop()}}),_callee2)})))()},getModuleData:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var params,_yield$API$post,data,error,d;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return params={moduleName:_this3.moduleName,id:_this3.inputValue},_context3.next=3,api/* API */.bl.post("v3/modules/data/summary",params);case 3:if(_yield$API$post=_context3.sent,data=_yield$API$post.data,error=_yield$API$post.error,!error){_context3.next=12;break}throw _this3.$message.error("Failed"),new Error("get Data Failed",error);case 12:d=data[_this3.moduleName],null!==d&&void 0!==d&&d.floor&&(_this3.floor=d.floor,_this3.floorId=_this3.floor.id);case 14:case"end":return _context3.stop()}}),_callee3)})))()},handleFeatureSelect:function(feature,type){type&&this.$set(feature,"featureType",type),this.selectedFeature=feature},showBuildingFilter:function(){this.filterDialogOpen=!0},closeDialog:function(){this.$emit("update:visibility",!1)},getFirstActivePlanFromFloorList:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var filters,params,_yield$API$get,data,error,floorPlanIdFromList,floor;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this4.filterDialogOpen=!1,
//get first floor with an  active floor plan
filters={indoorFloorPlanId:{operatorId:2,value:[]}},_this4.siteId&&(filters["site"]={operatorId:36,value:["".concat(_this4.siteId)]}),params={viewName:"all",page:1,perPage:1,moduleName:"floor",filters:JSON.stringify(filters)},_context4.next=6,api/* API */.bl.get("v2/module/data/list",params);case 6:_yield$API$get=_context4.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this4.$error.message("Error loading all floors",error):null!==data&&void 0!==data&&data.moduleDatas&&data.moduleDatas.length&&(floorPlanIdFromList=data.moduleDatas[0].indoorFloorPlanId,floor=data.moduleDatas[0],_this4.floorId=floor.id,_this4.indoorFloorPlanId=floorPlanIdFromList,null!==floor&&void 0!==floor&&floor.building?_this4.building=floor.building:_this4.building={name:_this4.$t("floorplan.building")},_this4.floor=floor||{name:_this4.$t("floorplan.floor")}),_this4.filterDialogOpen=!0;case 11:case"end":return _context4.stop()}}),_callee4)})))()},fetchFloorDetails:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _data$floor,_data$floor2,_data$floor3,params,_yield$API$post2,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return params={floorId:_this5.floorId},_context5.next=3,api/* API */.bl.post("v2/floor/details",params);case 3:_yield$API$post2=_context5.sent,data=_yield$API$post2.data,null!==data&&void 0!==data&&data.floor?_this5.floor=data.floor:_this5.floor={name:_this5.$t("floorplan.floor")},null!==data&&void 0!==data&&null!==(_data$floor=data.floor)&&void 0!==_data$floor&&_data$floor.building?_this5.building=data.floor.building:_this5.building={name:_this5.$t("floorplan.building")},null!==data&&void 0!==data&&null!==(_data$floor2=data.floor)&&void 0!==_data$floor2&&_data$floor2.id&&null!==data&&void 0!==data&&null!==(_data$floor3=data.floor)&&void 0!==_data$floor3&&_data$floor3.indoorFloorPlanId&&(_this5.indoorFloorPlanId=data.floor.indoorFloorPlanId);case 8:case"end":return _context5.stop()}}),_callee5)})))()}}},indoorFloorPlan_IndoorFloorPlanPickervue_type_script_lang_js=IndoorFloorPlanPickervue_type_script_lang_js,IndoorFloorPlanPicker_component=(0,componentNormalizer/* default */.Z)(indoorFloorPlan_IndoorFloorPlanPickervue_type_script_lang_js,IndoorFloorPlanPickervue_type_template_id_c4ad6d7e_render,IndoorFloorPlanPickervue_type_template_id_c4ad6d7e_staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanPicker=IndoorFloorPlanPicker_component.exports,FLookupFieldWithFloorplanvue_type_script_lang_js={components:{IndoorFloorPlanPicker:IndoorFloorPlanPicker},extends:FLookupField/* default */.Z,data:function(){return{recordId:null,canHideFloorplanIcon:!1,openfloorplanWizard:!1}},created:function(){this.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx},computed:{lookupModuleName:function(){var _this$field;return null!==(_this$field=this.field)&&void 0!==_this$field&&null!==(_this$field=_this$field.field)&&void 0!==_this$field&&null!==(_this$field=_this$field.lookupModule)&&void 0!==_this$field&&_this$field.name?this.field.field.lookupModule.name:null},lookupModuleId:function(){var _this$field2;return null!==(_this$field2=this.field)&&void 0!==_this$field2&&null!==(_this$field2=_this$field2.field)&&void 0!==_this$field2&&_this$field2.lookupModuleId?this.field.field.lookupModuleId:null},canShowIcons:function(){var canHideLookupIcon=this.canHideLookupIcon,canHideFloorplanIcon=this.canHideFloorplanIcon;return!canHideLookupIcon||!canHideFloorplanIcon}},methods:{setName:function(){},setValue:function(value,selectedObject){var options=this.field.options;if(options&&options.length&&value){var option=options.find((function(rt){return rt.value===value}));!option&&null!==selectedObject&&void 0!==selectedObject&&selectedObject.label&&options.push({label:selectedObject.label,value:value})}this.$emit("update:model",value)},openFloorPlanWizard:function(field){var disabled=this.disabled;disabled||(this.openfloorplanWizard=!0,this.$emit("showFloorPlanWizard",field,!0))}}},forms_FLookupFieldWithFloorplanvue_type_script_lang_js=FLookupFieldWithFloorplanvue_type_script_lang_js,FLookupFieldWithFloorplan_component=(0,componentNormalizer/* default */.Z)(forms_FLookupFieldWithFloorplanvue_type_script_lang_js,FLookupFieldWithFloorplanvue_type_template_id_609ed4aa_render,FLookupFieldWithFloorplanvue_type_template_id_609ed4aa_staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupFieldWithFloorplan=FLookupFieldWithFloorplan_component.exports,sanitize=__webpack_require__(678042),utils_field=__webpack_require__(815872),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),FUrlField=__webpack_require__(658774),TasksLayout=__webpack_require__(189494),WeekMatrixvue_type_template_id_2bf384ba_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-table",{staticClass:"mT10 width100 weekmatrix",attrs:{data:_vm.tableData,"cell-style":{padding:"5px 5px 5px 15px",fontWeight:"bold",color:"#324056"},"header-cell-style":{background:"white",padding:"5px 5px 5px 15px",color:"#324056"}}},[_c("el-table-column",{attrs:{width:"100",label:"DAYS",prop:"day"}}),_c("el-table-column",{attrs:{label:"WEEK"},scopedSlots:_vm._u([{key:"header",fn:function(){return[_c("div",{staticStyle:{"text-align":"center"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.weeks_"))+" ")])]},proxy:!0}])},[_c("el-table-column",{attrs:{label:_vm.$t("common._common._all"),width:"70",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("el-checkbox",{on:{change:function($event){return _vm.allCheckBoxChangeActions(scope.row)}},model:{value:scope.row.all,callback:function($$v){_vm.$set(scope.row,"all",$$v)},expression:"scope.row.all"}})]}}])}),_c("el-table-column",{attrs:{label:"1st",width:"70",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("el-checkbox",{on:{change:function($event){return _vm.checkBoxChangeActions(scope.row)}},model:{value:scope.row.one,callback:function($$v){_vm.$set(scope.row,"one",$$v)},expression:"scope.row.one"}})]}}])}),_c("el-table-column",{attrs:{label:"2nd",width:"70",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("el-checkbox",{on:{change:function($event){return _vm.checkBoxChangeActions(scope.row)}},model:{value:scope.row.two,callback:function($$v){_vm.$set(scope.row,"two",$$v)},expression:"scope.row.two"}})]}}])}),_c("el-table-column",{attrs:{label:"3rd",width:"70",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("el-checkbox",{on:{change:function($event){return _vm.checkBoxChangeActions(scope.row)}},model:{value:scope.row.three,callback:function($$v){_vm.$set(scope.row,"three",$$v)},expression:"scope.row.three"}})]}}])}),_c("el-table-column",{attrs:{label:"4th",width:"70",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("el-checkbox",{on:{change:function($event){return _vm.checkBoxChangeActions(scope.row)}},model:{value:scope.row.four,callback:function($$v){_vm.$set(scope.row,"four",$$v)},expression:"scope.row.four"}})]}}])}),_c("el-table-column",{attrs:{label:"5th",width:"70",align:"center"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("el-checkbox",{on:{change:function($event){return _vm.checkBoxChangeActions(scope.row)}},model:{value:scope.row.five,callback:function($$v){_vm.$set(scope.row,"five",$$v)},expression:"scope.row.five"}})]}}])})],1)],1)},WeekMatrixvue_type_template_id_2bf384ba_staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),WeekMatrixvue_type_script_lang_js={props:["weekendData"],data:function(){return{tableData:[{day:"Sunday",key:1,all:!1,one:!1,two:!1,three:!1,four:!1,five:!1},{day:"Monday",key:2,all:!1,one:!1,two:!1,three:!1,four:!1,five:!1},{day:"Tuesday",key:3,all:!1,one:!1,two:!1,three:!1,four:!1,five:!1},{day:"Wednesday",key:4,all:!1,one:!1,two:!1,three:!1,four:!1,five:!1},{day:"Thursday",key:5,all:!1,one:!1,two:!1,three:!1,four:!1,five:!1},{day:"Friday",key:6,all:!1,one:!1,two:!1,three:!1,four:!1,five:!1},{day:"Saturday",key:7,all:!1,one:!1,two:!1,three:!1,four:!1,five:!1}]}},computed:{tableDataJson:function(){return this.generateWeekendJson()}},watch:{tableDataJson:{handler:function(value){this.$emit("update:weekendData",value)}}},methods:{fillTableData:function(){var self=this;if(this.weekendData){var weekendJSON=JSON.parse(this.weekendData);for(var week in weekendJSON){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(weekendJSON[week]);try{for(_iterator.s();!(_step=_iterator.n()).done;){var day=_step.value;self.tableData[day-1][this.getNumberWord(week)]=!0}}catch(err){_iterator.e(err)}finally{_iterator.f()}}for(var key in this.tableData)this.checkBoxChangeActions(this.tableData[key])}},getNumberWord:function(val){switch(parseInt(val)){case 1:return"one";case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five"}},generateWeekendJson:function(){var _step2,weekend={1:[],2:[],3:[],4:[],5:[]},_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.tableData);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var tab=_step2.value;tab.one&&weekend["1"].push(tab.key),tab.two&&weekend["2"].push(tab.key),tab.three&&weekend["3"].push(tab.key),tab.four&&weekend["4"].push(tab.key),tab.five&&weekend["5"].push(tab.key)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}for(var key in weekend)0===weekend[key].length&&delete weekend[key];return JSON.stringify(weekend)},allCheckBoxChangeActions:function(val){val.one=val.all,val.two=val.all,val.three=val.all,val.four=val.all,val.five=val.all},checkBoxChangeActions:function(val){val.one&&val.two&&val.three&&val.four&&val.five?val.all=!0:val.all=!1}},mounted:function(){this.weekendData&&this.fillTableData()}},WeekMatrix_WeekMatrixvue_type_script_lang_js=WeekMatrixvue_type_script_lang_js,WeekMatrix_component=(0,componentNormalizer/* default */.Z)(WeekMatrix_WeekMatrixvue_type_script_lang_js,WeekMatrixvue_type_template_id_2bf384ba_render,WeekMatrixvue_type_template_id_2bf384ba_staticRenderFns,!1,null,null,null)
/* harmony default export */,WeekMatrix=WeekMatrix_component.exports,ui_forms=__webpack_require__(141323),FCurrencyField=__webpack_require__(643821),FEmailField=__webpack_require__(212468),TeamStaffMixin=__webpack_require__(462599),CommentInput=__webpack_require__(965757),FormCommentsvue_type_script_lang_js={extends:CommentInput/* default */.Z,props:["value","parentModule","recordId"],created:function(){this.initiateCommentService()},data:function(){return{expandTextBox:!0,canShowAvatar:!1}},computed:{isFormComments:function(){return!0},forWO:function(){var parentModule=this.parentModule;return"workorder"===parentModule}},methods:{inputHandler:function(){var comment=this.setupNewComment();(0,validation/* isEmpty */.xb)(null===comment||void 0===comment?void 0:comment.body)?this.$emit("input",{}):(this.$emit("input",comment),this.$emit("clearError"))},initiateCommentService:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.CommentService.parentModule=_this.parentModule,_this.CommentService.forWO=_this.forWO,_this.$set(_this.CommentService.record,"id",_this.recordId),!_this.CommentService.canShowSharing){_context.next=7;break}return _context.next=6,_this.CommentService.getSharingApps();case 6:_this.commentSharing=_this.CommentService.defaultSharingApps;case 7:case"end":return _context.stop()}}),_callee)})))()}}},notes_FormCommentsvue_type_script_lang_js=FormCommentsvue_type_script_lang_js,FormComments_component=(0,componentNormalizer/* default */.Z)(notes_FormCommentsvue_type_script_lang_js,FormComments_render,FormComments_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormComments=FormComments_component.exports,FFormLanguageFieldvue_type_template_id_7cf76c54_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},on:{change:_vm.updateValue},model:{value:_vm.valueBinder,callback:function($$v){_vm.valueBinder=$$v},expression:"valueBinder"}},_vm._l(_vm.languagesList,(function(language,index){return _c("el-option",{key:index,attrs:{label:language.label,value:language.value,disabled:_vm.field.isDisabled}})})),1)},FFormLanguageFieldvue_type_template_id_7cf76c54_staticRenderFns=[],languages=__webpack_require__(601273),FFormLanguageFieldvue_type_script_lang_js={props:["value","field"],data:function(){return{valueBinder:this.value}},computed:{languagesList:function(){return languages/* default */.Z}},methods:{updateValue:function(value){this.$emit("input",value)}}},forms_FFormLanguageFieldvue_type_script_lang_js=FFormLanguageFieldvue_type_script_lang_js,FFormLanguageField_component=(0,componentNormalizer/* default */.Z)(forms_FFormLanguageFieldvue_type_script_lang_js,FFormLanguageFieldvue_type_template_id_7cf76c54_render,FFormLanguageFieldvue_type_template_id_7cf76c54_staticRenderFns,!1,null,null,null)
/* harmony default export */,FFormLanguageField=FFormLanguageField_component.exports,FWebformvue_type_script_lang_js={name:"f-web-form",mixins:[WebFormMixin/* default */.Z,TasksMixin/* default */.Z,TeamStaffMixin/* default */.Z],components:{FLookupFieldWizard:FLookupFieldWizard["default"],FLookupField:FLookupField/* default */.Z,Lookup:ui_forms/* Lookup */.tY,LookupWizard:ui_forms/* LookupWizard */.ns,TasksList:TasksList,FDatePicker:FDatePicker/* default */.Z,FFormulaBuilder:FFormulaBuilder/* default */.Z,FFileUpload:FFileUpload/* default */.Z,FDurationField:FDurationField/* default */.Z,FAddressField:FAddressField,FLineItem:FPoPrLineItem,FTransferRequestLineItem:FTransferRequestLineItem,FSiteField:FSiteField/* default */.Z,FSubFormWrapper:FSubFormWrapper/* default */.Z,FScheduleField:FScheduleField,FQuoteLineItem:FQuoteLineItem,FQuoteAddress:FQuoteAddress,FFormPermitChecklist:FFormPermitChecklist,FSignaturePad:FSignaturePad/* default */.Z,FPublishTo:FPublishTo,RichTextArea:RichTextArea/* default */.Z,FLocationField:FLocationField/* default */.Z,FormAttachments:FFormAttachments/* default */.Z,ConnectedAppViewWidget:ConnectedAppViewWidget["default"],FBudgetAmount:FBudgetAmountsTable,FFacilityAvailability:FFacilityAvailability,FFacilityBookingSlots:FFacilityBookingSlots,FTimePicker:FTimePicker/* default */.Z,FTimeZoneField:FFormTimeZoneField,FLookupFieldWithFloorplan:FLookupFieldWithFloorplan,FUrlField:FUrlField/* default */.Z,JobPlanTasks:TasksLayout/* default */.Z,WeekMatrix:WeekMatrix,FCurrencyField:FCurrencyField/* default */.Z,FEmailField:FEmailField/* default */.Z,FormComments:FormComments,FLanguageFiled:FFormLanguageField,FNewCurrencyField:FNewCurrencyField/* default */.Z},props:{form:{type:Object,required:!0},module:{type:String},moduleDisplayName:{type:String},isSaving:{type:Boolean},canShowPrimaryBtn:{type:Boolean},canShowSecondaryBtn:{type:Boolean},customClass:{type:String},isEdit:{type:Boolean},removeDefaultStyling:{type:Boolean},formLabelPosition:{type:String},fieldTransitionFn:{type:Function},canShowNotifyRequester:{type:Boolean},isV3Api:{type:Boolean},moduleData:{type:Object,default:function(){return{}}},moduleDataId:{type:Number},isWidgetsSupported:{type:Boolean,default:!1},parentSiteId:{type:Number},subFormRecords:{type:Object},modifyFieldPropsHook:{type:Function,default:function(){return{}}},modifySectionPropsHook:{type:Function,default:function(){return{}}},isEditForm:{type:Boolean}},created:function(){this.init(),this.setInitialCurrency(),this.sanitize=sanitize/* sanitize */.N,this.isSiteField=utils_field/* isSiteField */.Vn},data:function(){return{tasksList:[],spaceAssetResourceObj:{},attachments:[],activeWidgets:[],rules:{},formModel:{},filter:{},ruleFieldIds:[],hasError:!1,handlers:{},canShowLookupWizard:!1,showResourceWizard:!1,selectedLookupField:null,isSaveBtnDisabled:!1,creationWidgets:[],isLoading:!0,subFormModels:[],currencyData:null,oldCurrencyCode:null,initialCurrency:{},hasMultiCurrencyFieldInModel:!1}},watch:{isSaveBtnDisabled:function(value){this.$emit("disableSaveBtn",value)},formModel:{handler:function(newVal){this.$emit("onFormModelChange",newVal)},deep:!0},sideBarWidgets:{handler:function(newVal){this.$emit("onWidgetChange",newVal)}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({currencyList:function(state){return state.activeCurrencies}})),{},{checkNewLookupWizardEnabled:function(){return this.$helpers.isLicenseEnabled("NEW_LOOKUP_WIZARD")},isNewCommentsEnabled:function(){return this.$helpers.isLicenseEnabled("NEW_COMMENTS")},labelPosition:function(){var formLabelPosition=this.formLabelPosition,form=this.form,labelPosition=form.labelPosition;return(0,validation/* isEmpty */.xb)(formLabelPosition)?constant/* default */.Z.FORMS_LABELALIGNMENT_ENUMHASH[labelPosition]||"left":constant/* default */.Z.FORMS_LABELALIGNMENT_ENUMHASH[formLabelPosition]||"top"},sideBarWidgets:function(){var creationWidgets=this.creationWidgets;return(0,validation/* isEmpty */.xb)(creationWidgets)?[]:creationWidgets.filter((function(widget){return"CREATE_RECORD_SIDEBAR"===widget.entityTypeEnum}))},backgroundWidgets:function(){var creationWidgets=this.creationWidgets;return(0,validation/* isEmpty */.xb)(creationWidgets)?[]:creationWidgets.filter((function(widget){return"FORM_BACKGROUND"===widget.entityTypeEnum}))},canShowSidebarWidgets:function(){var sideBarWidgets=this.sideBarWidgets;return!(0,validation/* isEmpty */.xb)(sideBarWidgets)},isSingleWidgetConfigured:function(){var sideBarWidgets=this.sideBarWidgets;return!(0,validation/* isEmpty */.xb)(sideBarWidgets)&&1===sideBarWidgets.length},isSubFormPresent:function(){var sections=this.$getProperty(this,"form.sections",[]);return sections.some((function(section){return!(0,validation/* isEmpty */.xb)((section||{}).subForm)}))},teamStaffSiteId:function(){var selectedSiteId=this.selectedSiteId,moduleData=this.moduleData,_ref=moduleData||{},siteId=_ref.siteId;return selectedSiteId||siteId},currencyDetails:{get:function(){var _ref2=this.currencyData||this.moduleData||{},currencyCode=_ref2.currencyCode,exchangeRate=_ref2.exchangeRate,oldCurrencyCode=_ref2.oldCurrencyCode,initialCurrencyCode=_ref2.initialCurrencyCode;return{currencyCode:currencyCode,exchangeRate:exchangeRate,oldCurrencyCode:oldCurrencyCode,initialCurrencyCode:initialCurrencyCode}},set:function(value){this.currencyData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.moduleData||{}),value)}}}),mounted:function(){this.handleResourceSelectAttribute()},methods:{updateAssignedTo:function(args,field){var user=args[0];(0,validation/* isEmpty */.xb)(user)||this.$set(this.formModel["assignment"],"assignedTo",user),this.onChangeHandler({field:field})},init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var creationWidgets;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.isLookupSimpleField=utils_field/* isLookupSimple */.qu,_this.initActionHandlers(),_context.next=4,_this.deserialize();case 4:return _context.next=6,_this.getRecordWidgets();case 6:creationWidgets=_context.sent,_this.creationWidgets=creationWidgets||[],(0,validation/* isEmpty */.xb)(creationWidgets)||(_this.initWidgets(),_this.initWidgetHandlers());case 9:case"end":return _context.stop()}}),_callee)})))()},onSubFormModelChange:function(_ref3){var model=_ref3.model,subFormName=_ref3.subFormName,field=_ref3.field,triggerAddDeleteRules=_ref3.triggerAddDeleteRules,_ref3$params=_ref3.params,params=void 0===_ref3$params?{}:_ref3$params,triggerOnLoad=_ref3.triggerOnLoad,subFormModels=this.subFormModels;
// This is used to track the changes in the sub forms, on change handler will be called
// with changed field as trigger.
this.subFormModels=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},subFormModels),{},(0,defineProperty/* default */.Z)({},subFormName,model)),this.onChangeHandler({field:field}),triggerAddDeleteRules&&this.fetchOnDataActionsList(4,params),triggerOnLoad&&this.fetchOnDataActionsList()},getRecordWidgets:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var isWidgetsSupported,form,_ref4,id,operatorValue,filters,_yield$_this2$loadWid,error,data,_error$message,message,_ref5,connectedAppWidgets;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(isWidgetsSupported=_this2.isWidgetsSupported,form=_this2.form,_ref4=form||{},id=_ref4.id,operatorValue=10,// have to load background widgets always, operatorValue for fetching background widget is 10
filters={entityType:{operatorId:9,value:["".concat(operatorValue)]}},(0,validation/* isEmpty */.xb)(id)){_context2.next=19;break}return filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),{},{entityId:{operatorId:9,value:["".concat(id)]}}),
// This boolean is to show side bar widget,
isWidgetsSupported&&(filters.entityType.value=["".concat(operatorValue),"8"]),_context2.next=9,_this2.loadWidgets(filters);case 9:if(_yield$_this2$loadWid=_context2.sent,error=_yield$_this2$loadWid.error,data=_yield$_this2$loadWid.data,!error){_context2.next=17;break}_error$message=error.message,message=void 0===_error$message?"Error occured":_error$message,_this2.$message.error(message),_context2.next=19;break;case 17:return _ref5=data||{},connectedAppWidgets=_ref5.connectedAppWidgets,_context2.abrupt("return",connectedAppWidgets);case 19:return _context2.abrupt("return",[]);case 20:case"end":return _context2.stop()}}),_callee2)})))()},loadWidgets:function(filters){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var encodedFilters,url,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return encodedFilters=encodeURIComponent(JSON.stringify(filters)),url="/v2/connectedApps/widgetList?filters=".concat(encodedFilters),_context3.next=4,api/* API */.bl.get(url);case 4:return response=_context3.sent,_context3.abrupt("return",response);case 6:case"end":return _context3.stop()}}),_callee3)})))()},initWidgets:function(){var creationWidgets=this.creationWidgets,_creationWidgets=(0,slicedToArray/* default */.Z)(creationWidgets,1),firstWidget=_creationWidgets[0],_ref6=firstWidget||{},widgetName=_ref6.widgetName,activeWidgets=[widgetName];this.$set(this,"activeWidgets",activeWidgets)},predefineColors:function(field){var color=this.$getProperty(field,"config.predefineColors");return color},initWidgetHandlers:function(){var _this3=this,setValue=function(options){var fieldName=options.fieldName,value=options.value,formModel=_this3.formModel,field=_this3.getFieldByName({name:fieldName})||{};if(!(0,validation/* isEmpty */.xb)(field)){var displayTypeEnum=field.displayTypeEnum;if("FILE"===displayTypeEnum){var _ref7=value||{},name=_ref7.name;_this3.$set(field,"fileObj",{name:name})}}_this3.$set(formModel,fieldName,value)},setSubFormData=function(options){var form=_this3.form,ruleFieldIds=_this3.ruleFieldIds,_ref8=form||{},sections=_ref8.sections,subFormId=options.subFormId,subFormValue=options.subFormValue;if(!(0,validation/* isEmpty */.xb)(subFormId)&&!(0,validation/* areValuesEmpty */.sD)(subFormValue)){var selectedSection=sections.find((function(section){return section.subFormId===subFormId})),_ref9=selectedSection||{},subForm=_ref9.subForm,subFormsArr=_this3.constructSubFormValues({subForm:subForm,subFormValue:subFormValue,ruleFieldIds:ruleFieldIds})||[];_this3.$set(selectedSection,"subFormsArr",subFormsArr)}},getValue=function(options){var fieldName=options.fieldName,formModel=_this3.formModel;return formModel[fieldName]},getFormData=function(){return _this3.getCurrentFormData()},getFormMeta=function(){var form=_this3.form;return form},getCurrentRecord=function(){var moduleData=_this3.moduleData;return moduleData||{}};this.handlers={setValue:setValue,getValue:getValue,getFormData:getFormData,getFormMeta:getFormMeta,getCurrentRecord:getCurrentRecord,setSubFormData:setSubFormData}},initActionHandlers:function(){var _this4=this,actionsMap={show:{handler:function(prop){return _this4.handleShowHideAction(prop)}},hide:{handler:function(prop){return _this4.handleShowHideAction(prop)}},enable:{handler:function(prop){return _this4.handleEnableDisableAction(prop)}},disable:{handler:function(prop){return _this4.handleEnableDisableAction(prop)}},set:{handler:function(prop){return _this4.handleSetValueAction(prop)}},filter:{handler:function(prop){return _this4.handleSetFilter(prop)}},hideSection:{handler:function(prop){return _this4.handleShowHideSection(prop)}},showSection:{handler:function(prop){return _this4.handleShowHideSection(prop)}},setMandatory:{handler:function(prop){return _this4.handleSetRemoveMandatory(prop)}},removeMandatory:{handler:function(prop){return _this4.handleSetRemoveMandatory(prop)}}};this.actionsMap=actionsMap},getNotesClass:function(field){var _ref10=field||{},config=_ref10.config,_ref11=config||{},isRichTextMode=_ref11.isRichTextMode;return isRichTextMode?"":"plain-text"},deserialize:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var form,removeFieldsHash,isEdit,moduleDataId,modifySectionPropsHook,isLiveSubForm,isSubFormPresent,sections,ruleFieldIds,filteredSections,deserializedSections;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _this5.isLoading=!0,form=_this5.form,removeFieldsHash=_this5.removeFieldsHash,isEdit=_this5.isEdit,moduleDataId=_this5.moduleDataId,modifySectionPropsHook=_this5.modifySectionPropsHook,isLiveSubForm=_this5.isLiveSubForm,isSubFormPresent=_this5.isSubFormPresent,sections=form.sections,ruleFieldIds=form.ruleFieldIds,(0,validation/* isEmpty */.xb)(ruleFieldIds)||_this5.$set(_this5,"ruleFieldIds",ruleFieldIds),filteredSections=(sections||[]).filter((function(section){var fields=section.fields,subFormId=section.subFormId,filteredFields=(fields||[]).filter((function(field){return(0,validation/* isEmpty */.xb)(removeFieldsHash)?"photo"!==field.name||!0!==field.hideField:!(removeFieldsHash||[]).includes(field.name)}));return section.fields=filteredFields,!(0,validation/* isEmpty */.xb)(subFormId)||!(0,validation/* isEmpty */.xb)(filteredFields)})),_context5.next=7,Promise.all(filteredSections.map(function(){var _ref12=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(section){var _section,fields,subFormId,subForm,subFormValue,subFormsArr,moduleName,records,modifiedSection;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(_section=section,fields=_section.fields,subFormId=_section.subFormId,subForm=_section.subForm,subFormValue=_section.subFormValue,subFormsArr=[],(0,validation/* isEmpty */.xb)(subFormId)){_context4.next=11;break}if(!isEdit){_context4.next=9;break}return moduleName=_this5.$getProperty(form,"module.name"),_context4.next=7,_this5.loadSubFormRecords(section,moduleDataId,moduleName);case 7:records=_context4.sent,subFormValue={data:records};case 9:subFormsArr=_this5.constructSubFormValues({subForm:subForm,subFormValue:subFormValue,isEdit:isEdit,ruleFieldIds:ruleFieldIds}),_this5.$set(section,"subFormsArr",subFormsArr);case 11:return(0,validation/* isEmpty */.xb)(fields)||_this5.$set(section,"fields",_this5.deserializeData(fields)),(0,validation/* isEmpty */.xb)(section)||_this5.$set(section,"hideSection",!1),!(0,validation/* isEmpty */.xb)(modifySectionPropsHook)&&(0,validation/* isFunction */.mf)(modifySectionPropsHook)&&(modifiedSection=modifySectionPropsHook(section),(0,validation/* isEmpty */.xb)(modifiedSection)||(section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),modifiedSection))),_context4.abrupt("return",section);case 15:case"end":return _context4.stop()}}),_callee4)})));return function(_x){return _ref12.apply(this,arguments)}}()));case 7:deserializedSections=_context5.sent,isLiveSubForm?_this5.onChangeHandler({field:{},isSubForm:!0}):isSubFormPresent||_this5.fetchOnDataActionsList(),_this5.$set(form,"sections",deserializedSections),_this5.isLoading=!1;case 11:case"end":return _context5.stop()}}),_callee5)})))()},clearError:function(name){this.$refs["form"].clearValidate(name)},cancel:function(){this.$emit("cancel")},saveRecord:function(){var _this6=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$skipSubFormVal=props.skipSubFormValidation,skipSubFormValidation=void 0!==_props$skipSubFormVal&&_props$skipSubFormVal,form=this.form,$refs=this.$refs,isV3Api=this.isV3Api,sections=form.sections,subFormData=[],promises=[],subFormV3Data={},isSubSectionsValid=!0;(0,validation/* isEmpty */.xb)(sections)||sections.forEach((function(section,index){var subForm=section.subForm,subFormId=section.subFormId,subFormElement=$refs["".concat(index," ").concat(subFormId)];if(!(0,validation/* isEmpty */.xb)(subForm)&&!(0,validation/* isEmpty */.xb)(subFormElement)){var subFormModuleName=_this6.$getProperty(section,"subForm.module.name");promises.push(subFormElement[0].saveRecord({skipSubFormValidation:skipSubFormValidation}).then((function(dataObj){if(!(0,validation/* isEmpty */.xb)(dataObj))if(isV3Api)(0,validation/* isEmpty */.xb)(subFormV3Data[subFormModuleName])?subFormV3Data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},subFormV3Data),dataObj):subFormV3Data[subFormModuleName].push(dataObj);else{var data=dataObj.data;(0,validation/* isEmpty */.xb)(data)||subFormData.push(dataObj)}})).catch((function(){throw new Error})))}if(["QUOTE_LINE_ITEMS","LINEITEMS"].includes(_this6.$getProperty(section,["fields",0,"displayTypeEnum"]))){var quoteForm=_this6.$refs["line-item"];(0,validation/* isEmpty */.xb)(quoteForm)||(isSubSectionsValid=quoteForm[0].validateForm())}if(["BUDGET_AMOUNT"].includes(_this6.$getProperty(section,["fields",0,"displayTypeEnum"]))){var budgetForm=_this6.$refs["budget-amount"];(0,validation/* isEmpty */.xb)(budgetForm)||(isSubSectionsValid=budgetForm[0].validateForm())}})),Promise.all(promises).then((function(){_this6.$refs["form"].validate((function(valid){var hasError=_this6.hasError,formModel=_this6.formModel,form=(_this6.module,_this6.form),canShowNotifyRequester=_this6.canShowNotifyRequester;if(hasError)_this6.$message.error("Please specify the task subject");else if(isSubSectionsValid&&valid){var _ref13=form||{},id=_ref13.id,_formModel=cloneDeep_default()(formModel);(0,validation/* isEmpty */.xb)(id)||(_formModel.formId=id),(0,validation/* isEmpty */.xb)(subFormV3Data)?(0,validation/* isEmpty */.xb)(subFormData)||(_formModel.subFormData=subFormData):_formModel.subFormData={relations:subFormV3Data};var serializedFormData=_formModel;canShowNotifyRequester&&(serializedFormData.notifyRequester=formModel.notifyRequester),_this6.$emit("save",serializedFormData)}}))})).catch((function(err){return err}))},
// TODO: Have to remove this once rules feature is done
isMvSection:function(field){var formModel=this.formModel,formulaFieldHack=field.formulaFieldHack,displayTypeEnum=field.displayTypeEnum;return formulaFieldHack&&"RADIO_TEMP"!==displayTypeEnum?"FORMULA_FIELD_TEMP"===displayTypeEnum?0===formModel["saveGoalType"]:1===formModel["saveGoalType"]:!!formulaFieldHack},handleResourceSelectAttribute:function(){
/*
       * Handling remote select for mobile. el-select doesn't hanldle this
       * Refer https://github.com/ElemeFE/element/issues/12563
       */
this.$refs.resourceSelect&&this.$refs.resourceSelect.forEach((function(node){var child=node.$el.querySelector(".el-input input.el-input__inner");child&&child.removeAttribute("readonly")}))},showLookupWizard:function(field,canShow){this.$set(this,"selectedLookupField",field);var lookupModuleName=this.$getProperty(field,"field.lookupModule.name"),showNewResourceWizard=this.$helpers.isLicenseEnabled("WIZARD_RESOURCE_FILTER");"resource"===lookupModuleName&&showNewResourceWizard?this.$set(this,"showResourceWizard",canShow):this.$set(this,"canShowLookupWizard",canShow)},setLookupFieldValue:function(props){var selectedLookupField=this.selectedLookupField,field=props.field;(0,validation/* isEmpty */.xb)(selectedLookupField)&&(this.selectedLookupField=field);var _ref14=field||{},selectedItems=_ref14.selectedItems,fieldName=_ref14.name,_ref14$options=_ref14.options,options=void 0===_ref14$options?[]:_ref14$options,multiple=_ref14.multiple,_ref15=selectedItems||[],_ref16=(0,slicedToArray/* default */.Z)(_ref15,1),selectedItem=_ref16[0],selectedItemIds=[];if(!(0,validation/* isEmpty */.xb)(selectedItems))if(selectedItemIds=selectedItems.map((function(item){return item.value})),(0,validation/* isEmpty */.xb)(options))options=(0,toConsumableArray/* default */.Z)(selectedItems);else{var _options,ids=options.map((function(item){return item.value})),newOptions=selectedItems.filter((function(item){return!ids.includes(item.value)}));(_options=options).unshift.apply(_options,(0,toConsumableArray/* default */.Z)(newOptions))}this.$set(this.selectedLookupField,"options",options),multiple?this.$set(this.formModel,"".concat(fieldName),selectedItemIds):this.$set(this.formModel[fieldName],"id",selectedItemIds[0]),"resource"===fieldName?this.onRecordSelected({value:selectedItem,field:field}):this.onChangeHandler({field:field})},updateDurationValue:function(field,value){var name=field.name;this.onChangeHandler({field:field}),this.$set(this.formModel,name,value)},canShowMetric:function(field){var fieldObj=field.field,metric=fieldObj.metric,unit=fieldObj.unit;return!(0,validation/* isEmpty */.xb)(metric)&&!(0,validation/* isEmpty */.xb)(unit)},metricSymbolPosition:function(field){var fieldObj=field.field,_ref17=fieldObj||{},metricEnum=_ref17.metricEnum;return"CURRENCY"===metricEnum?"prepend":"append"},
// Adding new option for picklist fields in live form
addOption:function(field,sectionIndex,fieldIndex){var _this7=this,id=field.id,fieldId=field.fieldId,displayName=field.displayName,_field$options=field.options,options=void 0===_field$options?[]:_field$options,name=field.name,fieldObj=field.field,form=this.form,sections=form.sections,_ref18=fieldObj||{},dataType=_ref18.dataType,values=_ref18.values,selectElement=this.$refs["".concat(fieldIndex," ").concat(id)]||[];if(!(0,validation/* isEmpty */.xb)(selectElement[0])){var query=selectElement[0].query;if(!(0,validation/* isEmpty */.xb)(query)){var clonedOptions=(0,toConsumableArray/* default */.Z)(options),newOption={label:query,visible:!0,value:values.length+1};clonedOptions.push(newOption),this.$set(field,"isOptionsLoading",!0);var url="v2/modules/fields/update",data={fieldJson:{fieldId:fieldId,dataType:dataType,displayName:displayName,values:clonedOptions.map((function(option){var clonedOption=(0,utility_methods/* deepCloneObject */.kh)(option);return clonedOption.index=option.value,clonedOption.value=option.label,delete clonedOption.label,clonedOption}))}},promise=this.$http.post(url,data).then((function(_ref19){var _ref19$data=_ref19.data,message=_ref19$data.message,responseCode=_ref19$data.responseCode,result=_ref19$data.result;if(0!==responseCode)throw new Error(message);var _field=result.field,_ref20=_field||{},_values=_ref20.values;if(!(0,validation/* isEmpty */.xb)(_values)){var deserializedOptions=(0,utils_utility_methods/* constructEnumFieldOptions */.rr)(_values),recentlyAddedOption=_values.find((function(value){return value.index===newOption.value}));
// Focus the newly created option
_this7.$nextTick((function(){(0,validation/* isEmpty */.xb)(selectElement[0])||selectElement[0].blur()})),_this7.$set(sections[sectionIndex].fields[fieldIndex],"options",deserializedOptions);var isMultiple=_this7.isMultiple({field:_field});isMultiple?_this7.$set(_this7.formModel[name],"0",recentlyAddedOption.index):_this7.$set(_this7.formModel[name],"id",recentlyAddedOption.index)}})).catch((function(_ref21){var message=_ref21.message;_this7.$message.error(message)}));Promise.all([promise]).finally((function(){_this7.$set(field,"isOptionsLoading",!1)}))}}},isSubForm:function(section){var isSubFormPresent=!(0,validation/* isEmpty */.xb)(section.subForm)&&2===section.sectionType&&!(0,validation/* isEmpty */.xb)(section.subFormsArr);return isSubFormPresent},showSubform:function(section){var isV3Api=this.isV3Api,isEdit=this.isEdit,isSubForm=this.isSubForm,isSubFormPresent=isSubForm(section);return(isV3Api||!isEdit)&&isSubFormPresent},isLookupSimpleOrChooserType:function(field){return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isLookupSimple */.qu)(field)||this.$fieldUtils.isChooserTypeField(field))},getTasksList:function(){return this.tasksList},updateAttachment:function(attachments){this.$set(this,"attachments",attachments)},updateFormModel:function(formModel,field){this.$set(this,"formModel",formModel),(0,validation/* isEmpty */.xb)(field)||this.onChangeHandler({field:field})}}},components_FWebformvue_type_script_lang_js=FWebformvue_type_script_lang_js,FWebform_component=(0,componentNormalizer/* default */.Z)(components_FWebformvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FWebform=FWebform_component.exports},
/***/135824:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TaskDetails}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/TaskDetails.vue?vue&type=template&id=b21f96ae&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"TASK DETAILS",visible:_vm.showTaskDetails,"append-to-body":!0,width:"40%"},on:{"update:visible":function($event){_vm.showTaskDetails=$event}}},[_c("div",{staticClass:"task-details"},[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" "),_c("el-input",{staticClass:"fc-input-full-border-textarea mT25",attrs:{type:"textarea","auto-complete":"off",rows:1,resize:"none",placeholder:"Enter Description",autosize:{minRows:5,maxRows:5}},model:{value:_vm.task.description,callback:function($$v){_vm.$set(_vm.task,"description",$$v)},expression:"task.description"}})],1),_c("div",{staticClass:"mT25"},[_c("el-checkbox",{on:{change:function($event){_vm.task.inputType=_vm.task.enableInput?_vm.task.inputType:1}},model:{value:_vm.task.enableInput,callback:function($$v){_vm.$set(_vm.task,"enableInput",$$v)},expression:"task.enableInput"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.enable_input")))])],1),_vm.task.enableInput?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.task_type"))+" ")]),_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{disabled:!_vm.canDisableInputType,color:"secondary",label:"2"},on:{change:_vm.onSelectInput},model:{value:_vm.task.inputType,callback:function($$v){_vm.$set(_vm.task,"inputType",$$v)},expression:"task.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.reading"))+" "+_vm._s(_vm.canDisableInputType?"":_vm.$t("maintenance._workorder.select_asset_space")))]),_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"3"},on:{change:_vm.onSelectInput},model:{value:_vm.task.inputType,callback:function($$v){_vm.$set(_vm.task,"inputType",$$v)},expression:"task.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.text")))]),_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"4"},on:{change:_vm.onSelectInput},model:{value:_vm.task.inputType,callback:function($$v){_vm.$set(_vm.task,"inputType",$$v)},expression:"task.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.number")))]),_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"5"},on:{change:_vm.onSelectInput},model:{value:_vm.task.inputType,callback:function($$v){_vm.$set(_vm.task,"inputType",$$v)},expression:"task.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.option")))])],1):_vm._e(),"2"===_vm.task.inputType?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reading_field"))+" ")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 mT10",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:" ",loading:_vm.isLoading},model:{value:_vm.task.readingFieldId,callback:function($$v){_vm.$set(_vm.task,"readingFieldId",$$v)},expression:"task.readingFieldId"}},_vm._l(_vm.task.taskReadings,(function(option){return _c("el-option",{key:option.value,attrs:{label:option.label,value:option.value}})})),1)],1)]):_vm._e(),"5"===_vm.task.inputType?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"mT10 fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.task.options,(function(option,index){return _c("div",{key:index,staticClass:"taskoption mT10 d-flex"},[_c("el-input",{staticClass:"fc-input-full-border2 width200px task-option-input",attrs:{type:"text",placeholder:""},model:{value:option.name,callback:function($$v){_vm.$set(option,"name",$$v)},expression:"option.name"}},[_c("template",{slot:"prepend"},[_vm._v(_vm._s(index+1))])],2),_c("div",{staticClass:"add-remove-icons"},[_c("img",{attrs:{src:__webpack_require__(353654)},on:{click:function($event){return _vm.addTaskOption()}}}),_vm.canShowDeleteIcon()?_c("img",{attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.removeTaskOption(index)}}}):_vm._e()])],1)})),_c("div",[_c("div",{staticClass:"fc-dark-grey-txt13 mT25"},[_vm._v("Default Value")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mT10",attrs:{placeholder:"Select"},model:{value:_vm.task.defaultValue,callback:function($$v){_vm.$set(_vm.task,"defaultValue",$$v)},expression:"task.defaultValue"}},_vm._l(_vm.task.options,(function(task){return _c("el-option",{key:task.name,attrs:{label:task.name,value:task.name}})})),1)],1)],2):_vm._e(),_c("div",{staticClass:"fc-dark-grey-txt14 mT20 mb5"},[_vm._v("Validation")]),_c("div",{staticClass:"mT20"},[_c("el-checkbox",{model:{value:_vm.task.attachmentRequired,callback:function($$v){_vm.$set(_vm.task,"attachmentRequired",$$v)},expression:"task.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.photo")))]),_vm.task.inputType&&"5"===_vm.task.inputType?_c("el-checkbox",{model:{value:_vm.task.remarksRequired,callback:function($$v){_vm.$set(_vm.task,"remarksRequired",$$v)},expression:"task.remarksRequired"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.remarks_required")))]):_vm._e(),_vm.task.remarksRequired?_c("div",[_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-dark-grey-txt14 mb5"},[_vm._v("Remarks Options")]),_c("el-radio-group",{staticClass:"mT10",model:{value:_vm.task.remarkOption,callback:function($$v){_vm.$set(_vm.task,"remarkOption",$$v)},expression:"task.remarkOption"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"specific"}},[_vm._v("Specific")])],1),"specific"===_vm.task.remarkOption?_c("el-select",{staticClass:"fc-input-full-border-select2 fc-tag el-select-block width200px mT10",attrs:{multiple:"","collapse-tags":"",placeholder:"Select Values"},model:{value:_vm.task.remarkOptionValues,callback:function($$v){_vm.$set(_vm.task,"remarkOptionValues",$$v)},expression:"task.remarkOptionValues"}},_vm._l(_vm.task.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.name,value:option.name}})})),1):_vm._e()],1)],1)],1):_vm._e()],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showTaskDetails=!1}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveTaskDetails}},[_vm._v("SAVE")])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),utils_validation=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(879288),__webpack_require__(990260)),utility_methods=__webpack_require__(773258),constant=__webpack_require__(354754),api=__webpack_require__(32284),TaskDetailsvue_type_script_lang_js={props:{canShowTaskDetails:{type:Boolean,required:!0},selectedTask:{type:Object,required:!0}},data:function(){return{numberTypeOptions:constant/* default */.Z.NUMBER_TYPE_OPTIONS,task:{},isLoading:!1,previousResourceId:null}},mounted:function(){var selectedTask=this.selectedTask;this.$set(this,"task",(0,utility_methods/* deepCloneObject */.kh)(selectedTask)),this.fetchTaskReadings()},computed:{showTaskDetails:{get:function(){return this.canShowTaskDetails},set:function(value){return this.$emit("update:canShowTaskDetails",value)}},canDisableInputType:function(){var _this$task=this.task,task=void 0===_this$task?{}:_this$task,resource=task.resource;if(!(0,utils_validation/* isEmpty */.xb)(resource)){var _task$resource=task.resource,_name=_task$resource.name,id=_task$resource.id;return!(0,utils_validation/* isEmpty */.xb)(_name)||!(0,utils_validation/* isEmpty */.xb)(id)}return!1}},methods:{canShowDeleteIcon:function(){var _this$task$options=this.task.options,options=void 0===_this$task$options?[]:_this$task$options;return options.length>2},onSelectInput:function(){this.$set(this.task,"remarksRequired",!1),this.$set(this.task,"remarkOptionValues",[]),this.$set(this.task,"remarkOption","all"),this.fetchTaskReadings()},fetchTaskReadings:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$task2,inputType,taskReadings,resource,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this$task2=_this.task,inputType=_this$task2.inputType,taskReadings=_this$task2.taskReadings,resource=_this.task.resource,"2"!==inputType||!(0,utils_validation/* isEmpty */.xb)(taskReadings)){_context.next=9;break}return _this.isLoading=!0,_context.next=6,_this.loadResourceReadingFields(resource);case 6:options=_context.sent,_this.isLoading=!1,_this.$set(_this.task,"taskReadings",options);case 9:case"end":return _context.stop()}}),_callee)})))()},loadResourceReadingFields:function(resource){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var id,url,_yield$API$get,data,error,options,_ref,message,_ref2,_ref2$readingValues,readingValues;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return id=resource.id,url="/v2/reading/latestdata/".concat(id,"?readingType=available"),_context2.next=4,api/* API */.bl.get(url);case 4:return _yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,options=[],(0,utils_validation/* isEmpty */.xb)(resource)||(error?(_ref=error||{},message=_ref.message,_this2.$message.error(message||{})):(_ref2=data||{},_ref2$readingValues=_ref2.readingValues,readingValues=void 0===_ref2$readingValues?[]:_ref2$readingValues,(0,utils_validation/* isEmpty */.xb)(readingValues)||readingValues.forEach((function(reading){var _ref3=reading||{},field=_ref3.field,_ref4=field||{},label=_ref4.displayName,value=_ref4.id;(0,utils_validation/* isEmpty */.xb)(label)||(0,utils_validation/* isEmpty */.xb)(value)||options.push({label:label,value:value})})))),_context2.abrupt("return",options);case 10:case"end":return _context2.stop()}}),_callee2)})))()},addTaskOption:function(){var options=this.task.options;options.push({name:name})},removeTaskOption:function(index){var options=this.task.options;options.splice(index,1)},validateTask:function(task){var enableInput=task.enableInput,inputType=task.inputType,validation=task.validation,maxSafeLimit=task.maxSafeLimit,minSafeLimit=task.minSafeLimit;if(enableInput)if(4===Number(inputType)&&"safeLimit"===validation){if((0,utils_validation/* isEmpty */.xb)(minSafeLimit)&&(0,utils_validation/* isEmpty */.xb)(maxSafeLimit))return this.showErrMsg("Please enter minimum and maximum value"),!0}else if(5===Number(inputType)){var options=task.options,length=task.options.length,isTaskOptionEmpty=options.some((function(option){return(0,utils_validation/* isEmpty */.xb)(option.name)}));if(length<2)return this.showErrMsg("Please enter atleast two options"),!0;if(isTaskOptionEmpty)return this.showErrMsg("Option cannot be empty"),!0}},showErrMsg:function(msg){this.$message.error(msg)},saveTaskDetails:function(){var task=this.task,validateTask=this.validateTask,canProceedSave=validateTask(task);canProceedSave||this.$emit("updateTaskDetails",task)}}},components_TaskDetailsvue_type_script_lang_js=TaskDetailsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_TaskDetailsvue_type_script_lang_js,render,staticRenderFns,!1,null,"b21f96ae",null)
/* harmony default export */,TaskDetails=component.exports},
/***/621658:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return facilio_loading}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/facilio-loading.vue?vue&type=template&id=1d1e8419
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("transition",[_c("svg",{staticClass:"lds-bricks",attrs:{width:"81px",height:"81px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[_c("rect",{attrs:{"ng-attr-fill":_vm.config.c1,"ng-attr-x":_vm.config.x,"ng-attr-y":_vm.config.x,"ng-attr-width":_vm.config.w,"ng-attr-height":_vm.config.w,"ng-attr-rx":_vm.config.radius,"ng-attr-ry":_vm.config.radius,fill:"#40b7cc",x:"21.5",y:"21.5",width:"25",height:"25",rx:"3",ry:"3"}},[_c("animate",{attrs:{attributeName:"x",calcMode:"linear",values:"21.5;53.5;53.5;53.5;53.5;21.5;21.5;21.5;21.5",keyTimes:"0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1",dur:"1.5",begin:"-1.375s",repeatCount:"indefinite"}}),_c("animate",{attrs:{attributeName:"y",calcMode:"linear",values:"21.5;53.5;53.5;53.5;53.5;21.5;21.5;21.5;21.5",keyTimes:"0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1",dur:"1.5",begin:"-1s",repeatCount:"indefinite"}})]),_c("rect",{attrs:{"ng-attr-fill":_vm.config.c2,"ng-attr-x":_vm.config.x,"ng-attr-y":_vm.config.x,"ng-attr-width":_vm.config.w,"ng-attr-height":_vm.config.w,"ng-attr-rx":_vm.config.radius,"ng-attr-ry":_vm.config.radius,fill:"#ff3184",x:"21.5",y:"53.5",width:"25",height:"25",rx:"3",ry:"3"}},[_c("animate",{attrs:{attributeName:"x",calcMode:"linear",values:"21.5;53.5;53.5;53.5;53.5;21.5;21.5;21.5;21.5",keyTimes:"0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1",dur:"1.5",begin:"-0.875s",repeatCount:"indefinite"}}),_c("animate",{attrs:{attributeName:"y",calcMode:"linear",values:"21.5;53.5;53.5;53.5;53.5;21.5;21.5;21.5;21.5",keyTimes:"0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1",dur:"1.5",begin:"-0.5s",repeatCount:"indefinite"}})]),_c("rect",{attrs:{"ng-attr-fill":_vm.config.c3,"ng-attr-x":_vm.config.x,"ng-attr-y":_vm.config.x,"ng-attr-width":_vm.config.w,"ng-attr-height":_vm.config.w,"ng-attr-rx":_vm.config.radius,"ng-attr-ry":_vm.config.radius,fill:"#372668",x:"53.5",y:"42.919",width:"25",height:"25",rx:"3",ry:"3"}},[_c("animate",{attrs:{attributeName:"x",calcMode:"linear",values:"21.5;53.5;53.5;53.5;53.5;21.5;21.5;21.5;21.5",keyTimes:"0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1",dur:"1.5",begin:"-0.375s",repeatCount:"indefinite"}}),_c("animate",{attrs:{attributeName:"y",calcMode:"linear",values:"21.5;53.5;53.5;53.5;53.5;21.5;21.5;21.5;21.5",keyTimes:"0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1",dur:"1.5",begin:"0s",repeatCount:"indefinite"}})])])])],1)},staticRenderFns=[],facilio_loadingvue_type_script_lang_js={data:function(){return{config:""}}},components_facilio_loadingvue_type_script_lang_js=facilio_loadingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_facilio_loadingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,facilio_loading=component.exports},
/***/80757:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FFormAttachments}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FFormAttachments.vue?vue&type=template&id=c2b51e82
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-form-item",{staticClass:"section-items attachments-container",attrs:{prop:_vm.field.lookupModuleName,required:_vm.field.required}},[_c("div",{class:["top"===_vm.labelPosition&&"attachment-label"],attrs:{slot:"label"},slot:"label"},[_vm._v(" "+_vm._s(_vm.field.displayName)+" "),_vm.attachments.length>0&&"top"===_vm.labelPosition?_c("div",{staticClass:"pT5 f12 fc-link3 cursor-pointer self-center",attrs:{onclick:"document.getElementById('file-attachment').click()"}},[_c("inline-svg",{attrs:{src:"clip",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.$t("common._common.attach_files"))+" ")],1):_vm._e()]),_c("div",{staticClass:"fc-attachments mT10"},[_vm.attachments.length>0?_vm._l(_vm.attachments,(function(attachment,index){return _c("div",{key:"attachment-"+index,staticClass:"fc-attachment-row d-flex"},[_c("inline-svg",{staticClass:"mT5 mR15 d-flex",attrs:{src:"svgs/doc-outline",iconClass:"icon icon-xxl"}}),_c("div",{staticClass:"attached-files"},[_c("div",{staticClass:"mB10 attachment-label"},[_vm._v(" "+_vm._s(attachment.name)+" ")]),_vm.preview?_vm._e():_c("div",{staticClass:"attached-file-size"},[_vm._v(" "+_vm._s(attachment.bytes)+" ")]),1===attachment.status?_c("div",[_vm._v(" , "+_vm._s(_vm.$t("common._common.uploading"))+" ")]):2===attachment.status?_c("div",[_vm._v(" , "+_vm._s(_vm.$t("common._common.success"))+" ")]):_c("div",[_vm._v(_vm._s(attachment.error))])]),_c("i",{staticClass:"el-icon-delete pointer attachment-delete",on:{click:function($event){return _vm.deleteAttachment(_vm.field.name,index)}}}),_c("div")],1)})):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:0===_vm.attachments.length,expression:"attachments.length === 0"}],staticClass:"pointer",on:{change:function($event){var i=arguments.length,argsArray=Array(i);while(i--)argsArray[i]=arguments[i];return _vm.addAttachment.apply(void 0,[_vm.field].concat(argsArray))}}},[_vm.isLoading?_c("spinner",{attrs:{show:_vm.isLoading,size:"40"}}):_c("form",{attrs:{enctype:"multipart/form-data","data-test-selector":""+_vm.field.name}},[_c("div",{staticClass:"dropbox text-center"},[_c("img",{staticClass:"mT10 upload-icon",attrs:{src:__webpack_require__(581121)}}),_c("input",{staticClass:"input-file",attrs:{type:"file",id:"file-attachment",accept:_vm.acceptedFileTypes,multiple:""}}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_file"))+" "),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])])],1)],2),_vm.attachments.length>0&&"top"!==_vm.labelPosition?_c("div",{staticClass:"pT10 pB10 f12 fc-link3 cursor-pointer",attrs:{onclick:"document.getElementById('file-attachment').click()"}},[_c("inline-svg",{attrs:{src:"clip",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.$t("common._common.attach_files"))+" ")],1):_vm._e()])},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(634338),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(162506),__webpack_require__(32284)),filters=__webpack_require__(638203),validation=__webpack_require__(990260),helpers=__webpack_require__(778390),Spinner=__webpack_require__(604947),moment=helpers/* default */.ZP.getOrgMoment,FFormAttachmentsvue_type_script_lang_js={props:["field","formModel","attachments","labelPosition","isV3Api","clearError","disableSaveBtn","preview"],components:{Spinner:Spinner/* default */.Z},data:function(){return{isLoading:!1}},created:function(){var field=this.field,_ref=field||{},value=_ref.value;(0,validation/* isEmpty */.xb)(value)||this.setAttachments(field)},computed:{acceptedFileTypes:function(){var field=this.field,$getProperty=this.$getProperty,acceptedFileTypes=$getProperty(field,"config.fileTypes","");
// fileTypes inside field should be an array. refer
// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#Unique_file_type_specifiers
return(0,validation/* isEmpty */.xb)(acceptedFileTypes)?"":acceptedFileTypes}},methods:{addAttachment:function(_ref2,event){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var lookupModuleName,_event$target$files,files,availableAttachments,attachments,index,_files$index,name,size,type,bytes;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:for(lookupModuleName=_ref2.lookupModuleName,_event$target$files=event.target.files,files=void 0===_event$target$files?[]:_event$target$files,availableAttachments=_this.attachments,attachments=availableAttachments,index=0;index<files.length;index++)_files$index=files[index],name=_files$index.name,size=_files$index.size,type=_files$index.type,bytes=(0,filters/* prettyBytes */.Hi)(size),attachments.push({name:name,size:size,bytes:bytes,type:type,status:null,error:null});return _this.disableSaveBtn(!0),_context.next=8,_this.uploadFiles(files);case 8:_this.disableSaveBtn(!1),_this.$emit("updateAttachment",attachments),_this.clearError(lookupModuleName);case 11:case"end":return _context.stop()}}),_callee)})))()},uploadFiles:function(files){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var formModel,_yield$API$uploadFile,error,ids,message,lookupModuleName,uploadedFiles,fileIds;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.isLoading=!0,formModel=_this2.formModel,_context2.next=4,api/* API */.bl.uploadFiles(files);case 4:_yield$API$uploadFile=_context2.sent,error=_yield$API$uploadFile.error,ids=_yield$API$uploadFile.ids,error?(message=error.message,_this2.$message.error(message||"Error occured")):ids&&(lookupModuleName=_this2.field.lookupModuleName,uploadedFiles=[],(0,validation/* isEmpty */.xb)(ids)||ids.forEach((function(id){uploadedFiles.push({fileId:id,createdTime:Date.now()})})),fileIds=_this2.formModel[lookupModuleName]||[],(0,validation/* isEmpty */.xb)(fileIds)?formModel[lookupModuleName]=uploadedFiles:(fileIds=fileIds.concat(uploadedFiles),formModel[lookupModuleName]=fileIds),_this2.$emit("updateFormModel",formModel,_this2.field),_this2.isLoading=!1);case 8:case"end":return _context2.stop()}}),_callee2)})))()},setAttachments:function(field){var formModel=this.formModel,_ref3=field||{},value=_ref3.value,lookupModuleName=_ref3.lookupModuleName;if(!(0,validation/* isEmpty */.xb)(value)){"string"===typeof value&&(value=JSON.parse(value));var attachmentsInfo=value.map((function(file){var _ref4=file||{},fileId=_ref4.fileId,createdTime=_ref4.createdTime;
//need to remove after server chnage
return(0,validation/* isEmpty */.xb)(createdTime)&&(createdTime=moment().valueOf()),{fileId:fileId,createdTime:createdTime}})),attachments=value.map((function(file){var _ref5=file||{},name=_ref5.fileName;return{name:name}}));formModel[lookupModuleName]=attachmentsInfo,this.$emit("updateAttachment",attachments),this.$emit("updateFormModel",formModel,this.field)}},deleteAttachment:function(name,index){var attachments=this.attachments,formModel=this.formModel;attachments.splice(index,1);var lookupModuleName=this.field.lookupModuleName,_formModel$lookupModu=formModel[lookupModuleName].splice(index,1),_formModel$lookupModu2=(0,slicedToArray/* default */.Z)(_formModel$lookupModu,1),removedAttachment=_formModel$lookupModu2[0];if(this.isV3Api){
// Temp handling for removing values from submodules
if(this.$getProperty(removedAttachment,"id")){var deletedSubModuleKey="".concat(lookupModuleName,"_delete");(0,validation/* isEmpty */.xb)(formModel[deletedSubModuleKey])&&(formModel[deletedSubModuleKey]=[]),formModel[deletedSubModuleKey].push(removedAttachment.id)}this.$emit("updateFormModel",formModel,this.field)}(0,validation/* isEmpty */.xb)(this.attachments)&&((document.getElementById("file-attachment")||{}).value="")}}},forms_FFormAttachmentsvue_type_script_lang_js=FFormAttachmentsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FFormAttachmentsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FFormAttachments=component.exports},
/***/321389:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLocationField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FLocationField.vue?vue&type=template&id=393fd2d6&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-input",{staticClass:"fc-input-full-border2 location-field",attrs:{readonly:"",disabled:_vm.disabled},on:{change:_vm.handleChange},model:{value:_vm.inputModel,callback:function($$v){_vm.inputModel=$$v},expression:"inputModel"}},[_c("div",{class:["flRight d-flex",!_vm.disabled&&"pointer"],attrs:{slot:"suffix"},slot:"suffix"},[_vm.canShowSystemClear?_c("div",{staticClass:"flocation-remove-icon-alignment  flookup-remove-icon",on:{click:_vm.resetLocationValue}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e(),_c("div",{attrs:{slot:"suffix"},on:{click:function($event){_vm.dialogVisibility=!_vm.disabled}},slot:"suffix"},[_c("inline-svg",{staticClass:"vertical-middle cursor-pointer mT10 mR5",attrs:{src:"location-icon",iconClass:"icon icon-md location-icon"}})],1)])]),_c("FLocationPickerDialog",{attrs:{model:_vm.inputValue,dialogVisibility:_vm.dialogVisibility},on:{updateLocation:_vm.updateLocation,"update:dialogVisibility":function($event){_vm.dialogVisibility=$event},"update:dialog-visibility":function($event){_vm.dialogVisibility=$event}}})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),FLocationPickerDialog=(__webpack_require__(634338),__webpack_require__(169358),__webpack_require__(766188)),validation=__webpack_require__(990260),api=__webpack_require__(32284),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),FLocationFieldvue_type_script_lang_js={props:["value","field","disabled","clearable"],components:{FLocationPickerDialog:FLocationPickerDialog/* default */.Z},data:function(){return{dialogVisibility:!1,inputModel:null,inputValue:null}},computed:{canShowSystemClear:function(){var disabled=this.disabled,value=this.value;if(disabled||(0,validation/* isEmpty */.xb)(value))return!1;var _ref=value||{},locationId=_ref.locationId;return!(0,validation/* isEmpty */.xb)(locationId)||!this.isLocationValueEmpty(value)}},watch:{inputValue:{handler:function(newVal,oldVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _newVal,_newVal2,_ref2,locationId,_yield$API$get,data,error,_ref3,location,_ref4,id,lat,lng;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if((0,validation/* isEmpty */.xb)(newVal)){_context.next=10;break}if((0,validation/* isEmpty */.xb)(newVal.locationId)||!_this.isLocationValueEmpty(newVal)){_context.next=9;break}return _ref2=newVal||{},locationId=_ref2.locationId,_context.next=5,api/* API */.bl.get("v2/location/details",{locationId:locationId});case 5:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this.$message.error(error.message||"Error Occured"):(_ref3=data||{},location=_ref3.location,_ref4=location||{},id=_ref4.id,lat=_ref4.lat,lng=_ref4.lng,newVal=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},newVal),{},{lat:lat,lng:lng}),_this.$emit("input",{locationId:id,lat:lat,lng:lng}));case 9:_this.isLocationValueEmpty(newVal)||(_this.inputModel="".concat(newVal.lat,", ").concat(newVal.lng));case 10:null!==(_newVal=newVal)&&void 0!==_newVal&&_newVal.lat&&null!==(_newVal2=newVal)&&void 0!==_newVal2&&_newVal2.lng?(_this.$emit("locationUpdated",newVal),_this.$emit("input",newVal)):_this.inputModel=newVal,isEqual_default()(oldVal,newVal)||_this.handleChange();case 12:case"end":return _context.stop()}}),_callee)})))()},deep:!0},value:{handler:function(newVal){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:(0,validation/* isObject */.Kn)(newVal)||(newVal=JSON.parse(newVal)),_this2.inputValue=newVal;case 2:case"end":return _context2.stop()}}),_callee2)})))()}}},mounted:function(){var value=this.value,_ref5=value||{},locationId=_ref5.locationId;((0,validation/* isEmpty */.xb)(value)||(0,validation/* isEmpty */.xb)(locationId))&&this.isLocationValueEmpty(value)||(this.inputValue=this.$helpers.cloneObject(value))},methods:{resetLocationValue:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref6,field,clearable,_ref7,value,_value,locationIds,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this3.inputModel=null,_ref6=_this3||{},field=_ref6.field,clearable=_ref6.clearable,_ref7=field||{},value=_ref7.value,(0,validation/* isEmpty */.xb)(value)||!clearable){_context3.next=11;break}return(0,validation/* isObject */.Kn)(value)||(value=JSON.parse(value)),locationIds=[null===(_value=value)||void 0===_value?void 0:_value.locationId],_context3.next=8,api/* API */.bl.post("location/delete",{locationIds:locationIds});case 8:_yield$API$post=_context3.sent,error=_yield$API$post.error,error&&_this3.$message.error(error.message||"Error Occured");case 11:_this3.handleChange(),_this3.inputValue=null,_this3.$emit("input",null);case 14:case"end":return _context3.stop()}}),_callee3)})))()},handleChange:function(){var _ref8=this||{},value=_ref8.value;(0,validation/* isEmpty */.xb)(value)||((0,validation/* isObject */.Kn)(value)||(value=JSON.parse(value)),this.inputValue=value),!(0,validation/* isEmpty */.xb)(value)&&this.$emit("change",value)},updateLocation:function(location){this.$emit("input",location),this.$emit("value",location)},isLocationValueEmpty:function(value){return(0,validation/* isEmpty */.xb)(null===value||void 0===value?void 0:value.lat)&&(0,validation/* isEmpty */.xb)(null===value||void 0===value?void 0:value.lng)}}},forms_FLocationFieldvue_type_script_lang_js=FLocationFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FLocationFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,"393fd2d6",null)
/* harmony default export */,FLocationField=component.exports},
/***/216758:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DataCreationMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
var render,staticRenderFns,slicedToArray=__webpack_require__(554621),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(300268),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(336585),__webpack_require__(879288),__webpack_require__(169358),__webpack_require__(990260)),field_utils=__webpack_require__(455344),constant=__webpack_require__(354754),utils_field=__webpack_require__(815872),DataCreationMixinvue_type_script_lang_js={data:function(){return{isFileTypeFields:["FILE","IMAGE","SIGNATURE"]}},methods:{serializedData:function(formObj,formModel){var _this=this,sections=formObj.sections,isFileTypeFields=this.isFileTypeFields,isV3Api=this.isV3Api,$getProperty=this.$getProperty,$setProperty=this.$setProperty,subFormData=formModel.subFormData,finalObj={data:{}};return(0,validation/* isEmpty */.xb)(sections)||sections.forEach((function(section){var fields=section.fields;(0,validation/* isEmpty */.xb)(fields)||fields.forEach((function(field){var name=field.name,fieldObj=field.field,displayType=field.displayType,displayTypeEnum=field.displayTypeEnum,lookupModuleName=field.lookupModuleName,_ref=fieldObj||{},dataType=_ref.dataType,unitId=_ref.unitId,dataTypeEnum=_ref.dataTypeEnum,value=formModel[name];if((0,validation/* isObject */.Kn)(value)&&!(0,validation/* isFileObject */.Mk)(value)?(0,validation/* areValuesEmpty */.sD)(value)?!utils_field/* isDropdownTypeField */.aK&&!field_utils/* isChooserTypeField */.Rq||isV3Api||(7!==dataType||fieldObj&&!fieldObj.default?value=-99:value.id=-99):"siteId"===name||"assignment"===name||[21,7].includes(dataType)&&(!fieldObj||fieldObj.default||isV3Api)||(
// custom lookup fields, value should not be an object
value=value.id):isV3Api||"NUMBER"!==dataTypeEnum&&"DECIMAL"!==dataTypeEnum||(0,validation/* isEmpty */.xb)(value)&&(value=-99),"NUMBER"!==displayTypeEnum&&"DECIMAL"!==displayTypeEnum||((isV3Api?(0,validation/* isNullOrUndefined */.le)(value):(0,validation/* isEmpty */.xb)(value))||(value="DECIMAL"===displayTypeEnum?parseFloat(value):parseInt(value)),(0,validation/* isEmpty */.xb)(unitId)||(isV3Api?_this.$set(finalObj,"".concat(name,"Unit"),unitId):_this.$set(finalObj.data,"".concat(name,"Unit"),unitId))),56===displayType){
// Recurring fields handling
var config=field.config,endFieldName=config.endFieldName,scheduleJsonName=config.scheduleJsonName,startFieldName=config.startFieldName;finalObj[startFieldName]=formModel[startFieldName],finalObj[endFieldName]=formModel[endFieldName],finalObj[scheduleJsonName]=formModel[scheduleJsonName],finalObj.isRecurring=formModel.isRecurring}else if("QUOTE_ADDRESS"===displayTypeEnum)finalObj["shipToAddress"]=formModel.shipToAddress,finalObj["billToAddress"]=formModel.billToAddress;else if(["QUOTE_LINE_ITEMS","LINEITEMS"].includes(displayTypeEnum)){finalObj[name]=formModel[name];var _ref2=formModel||{},currencyCode=_ref2.currencyCode,exchangeRate=_ref2.exchangeRate;finalObj["currencyCode"]=currencyCode,finalObj["exchangeRate"]=exchangeRate,constant/* default */.Z.QUOTE_LINE_ITEMS_ADDITIONAL_FIELDS.forEach((function(additionalField){"tax"===additionalField&&(0,validation/* isEmpty */.xb)($getProperty(formModel,"".concat(additionalField,".id")))&&$setProperty(formModel,"".concat(additionalField,".id"),null),finalObj[additionalField]=formModel[additionalField]}))}else if("FACILITY_BOOKING_SLOTS"===displayTypeEnum)finalObj[name]=formModel[name],finalObj["bookingDate"]=formModel.bookingDate;else if("MULTI_CURRENCY"===displayTypeEnum){var _ref3=formModel||{},_currencyCode=_ref3.currencyCode,_exchangeRate=_ref3.exchangeRate;finalObj[name]=formModel[name],finalObj["currencyCode"]=_currencyCode,finalObj["exchangeRate"]=_exchangeRate}else if(["BUDGET_AMOUNT","PERMIT_CHECKLIST","FACILITY_AVAILABILITY"].includes(displayTypeEnum))finalObj[name]=formModel[name];else if("ATTACHMENT"===displayTypeEnum){finalObj[lookupModuleName]=formModel[lookupModuleName];var deletedItemKey="".concat(lookupModuleName,"_delete");$getProperty(formModel,deletedItemKey)&&isV3Api&&(finalObj[deletedItemKey]=formModel[deletedItemKey])}else if("COMMUNITY_PUBLISHING"===displayTypeEnum&&isV3Api){finalObj[name]=value;var _deletedItemKey="".concat(name,"_delete");$getProperty(formModel,_deletedItemKey)&&(finalObj[_deletedItemKey]=formModel[_deletedItemKey])}else if("TICKETNOTES"===displayTypeEnum&&isV3Api)if(_this.$helpers.isLicenseEnabled("NEW_COMMENTS")){var comment=formModel[name]||{};$setProperty(comment,"createdTime",Date.now()),$setProperty(comment,"createdBy",(_this.$account||{}).user),finalObj[name]=[comment]}else finalObj[name]=[{body:formModel[name],createdTime:Date.now(),createdBy:(_this.$account||{}).user}];else if("URL_FIELD"===displayTypeEnum){var urlFieldValue=formModel[name],_ref4=urlFieldValue||"",href=_ref4.href;if((0,validation/* isEmpty */.xb)(href))urlFieldValue=null;else{var isValidUrl=href.startsWith("http://",0)||href.startsWith("https://",0);(0,validation/* isEmpty */.xb)(href)?urlFieldValue=isV3Api?null:{}:isValidUrl||(urlFieldValue.href="http://"+href)}isV3Api?finalObj[name]=urlFieldValue:finalObj.data[name]=urlFieldValue}else if("JP_TASK"===displayTypeEnum){var tasks=formModel[name];tasks=_this.serializeJobPlanTasks(tasks),isV3Api&&(finalObj[name]=tasks)}else if("JP_PREREQUISITE"===displayTypeEnum){var preRequisites=formModel[name];preRequisites=_this.serializePrerequisites(preRequisites),isV3Api&&(finalObj[name]=preRequisites)}else
// For text type fields, in edit case value should be sent even if it is empty
if("MULTI_LOOKUP"===dataTypeEnum&&(value=(formModel[name]||[]).map((function(currId){return{id:currId}})),finalObj.data[name]=value),"siteId"!==name||(0,validation/* isEmpty */.xb)(value))if("assignment"!==name||(0,validation/* isEmpty */.xb)(value))isFileTypeFields.includes(displayTypeEnum)?finalObj=_this.fileFieldHandler(finalObj,field,value):isV3Api?finalObj[name]=value:fieldObj&&!fieldObj.default?
// Custom field handling
(0,validation/* isEmpty */.xb)(value)||(finalObj.data[name]=value):
// System field handling
finalObj=_this.systemFieldHandler(finalObj,field,value);else
// Team, staff assignment related fields
for(var assignmentObj in value)(0,validation/* isEmpty */.xb)(value[assignmentObj].id)?finalObj[assignmentObj]=isV3Api?null:{id:-99}:finalObj[assignmentObj]={id:value[assignmentObj].id};else finalObj[name]=value.id}))})),(0,validation/* isNullOrUndefined */.le)(formModel.notifyRequester)||(finalObj.notifyRequester=formModel.notifyRequester),!(0,validation/* isEmpty */.xb)(finalObj)&&isV3Api&&(delete finalObj.data,(0,validation/* isEmpty */.xb)(subFormData)||(finalObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},finalObj),subFormData),subFormData={}),finalObj=this.v3NullHandler(finalObj)),(0,validation/* isEmpty */.xb)(subFormData)||(finalObj.subFormData=subFormData),finalObj},v3NullHandler:function(data){return(0,validation/* isEmpty */.xb)(data)||Object.entries(data).forEach((function(_ref5){var _ref6=(0,slicedToArray/* default */.Z)(_ref5,2),key=_ref6[0],value=_ref6[1];(0,validation/* isObject */.Kn)(value)&&!(0,validation/* isEmpty */.xb)(value)&&"relations"!==key&&(0,validation/* areValuesEmpty */.sD)(value)&&(data[key]=null)})),data},systemFieldHandler:function(finalObj,field,value){var name=field.name;return(0,validation/* isEmpty */.xb)(value)||(finalObj[name]=value),finalObj},serializeJobPlanTasks:function(taskList){var _this2=this,serializedSection=null,inputHash={2:"Reading",3:"Text",4:"Number",5:"Option"};return(0,validation/* isEmpty */.xb)(taskList)||(serializedSection=taskList.map((function(section,index){var _ref7=section||{},_ref7$tasks=_ref7.tasks,tasks=void 0===_ref7$tasks?[]:_ref7$tasks,jobPlanSectionCategory=_ref7.jobPlanSectionCategory,name=_ref7.name,inputType=_ref7.inputType,_ref7$inputOptions=_ref7.inputOptions,inputOptions=void 0===_ref7$inputOptions?[]:_ref7$inputOptions;if(section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{name:"JP-".concat(name)}),(0,validation/* isEmpty */.xb)(inputType)&&(section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{inputType:1})),(0,validation/* isEmpty */.xb)(jobPlanSectionCategory)&&(section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{jobPlanSectionCategory:5})),!(0,validation/* isEmpty */.xb)(inputOptions)){var sequence=1;inputOptions.forEach((function(option){option.sequence=sequence++})),section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{inputOptions:inputOptions})}
// Option Type
if("Option"===inputHash[inputType]){var _ref8=section||{},_inputOptions=_ref8.inputOptions,remarkOptionValues=_ref8.remarkOptionValues,attachmentOptionValues=_ref8.attachmentOptionValues,defaultValue=_ref8.defaultValue,failureValue=_ref8.failureValue;if(!(0,validation/* isEmpty */.xb)(defaultValue)){defaultValue=(_inputOptions[defaultValue]||{}).value;var selectedDefaultValue=_inputOptions[defaultValue]||{};failureValue=_this2.$getProperty(selectedDefaultValue,"value","")}if(!(0,validation/* isEmpty */.xb)(failureValue)){var selectedFailureValue=_inputOptions[failureValue]||{};failureValue=_this2.$getProperty(selectedFailureValue,"value","")}(0,validation/* isEmpty */.xb)(attachmentOptionValues)||(attachmentOptionValues=(attachmentOptionValues||[]).map((function(option){var selectedOption=_inputOptions[option],_ref9=selectedOption||{},value=_ref9.value;return value}))),(0,validation/* isEmpty */.xb)(remarkOptionValues)||(remarkOptionValues=(remarkOptionValues||[]).map((function(option){var selectedOption=_inputOptions[option],_ref10=selectedOption||{},value=_ref10.value;return value}))),section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{remarkOptionValues:remarkOptionValues,attachmentOptionValues:attachmentOptionValues,defaultValue:defaultValue,failureValue:failureValue})}
//Removing unwanted nodes
var excludeFields=["tasks","sectionId","resource"];excludeFields.forEach((function(excludeField){return delete(section||{})[excludeField]}));var serializedTasks=tasks.map((function(task){var _ref11=task||{},jobPlanTaskCategory=_ref11.jobPlanTaskCategory,_ref11$inputOptions=_ref11.inputOptions,inputOptions=void 0===_ref11$inputOptions?[]:_ref11$inputOptions,taskId=_ref11.taskId,taskInputType=_ref11.inputType;if(task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{taskId:Number(taskId),sequence:Number(taskId)}),(0,validation/* isEmpty */.xb)(jobPlanTaskCategory)&&(task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{jobPlanTaskCategory:5})),(0,validation/* isEmpty */.xb)(taskInputType)&&(task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{inputType:1})),!(0,validation/* isEmpty */.xb)(inputOptions)){var _sequence=1;inputOptions.forEach((function(option){option.sequence=_sequence++})),task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{inputOptions:inputOptions})}if("Option"===inputHash[taskInputType]){var _ref12=task||{},_ref12$inputOptions=_ref12.inputOptions,taskInputOptions=void 0===_ref12$inputOptions?[]:_ref12$inputOptions,taskRemarkOptions=_ref12.remarkOptionValues,taskAttachmentOptions=_ref12.attachmentOptionValues,taskDefaultValue=_ref12.defaultValue,taskFailureValue=_ref12.failureValue;if(!(0,validation/* isEmpty */.xb)(taskDefaultValue)){var _selectedDefaultValue=taskInputOptions[taskDefaultValue]||{};taskDefaultValue=_this2.$getProperty(_selectedDefaultValue,"value","")}if(!(0,validation/* isEmpty */.xb)(taskFailureValue)){var _selectedFailureValue=taskInputOptions[taskFailureValue]||{};taskFailureValue=_this2.$getProperty(_selectedFailureValue,"value","")}(0,validation/* isEmpty */.xb)(taskAttachmentOptions)||(taskAttachmentOptions=(taskAttachmentOptions||[]).map((function(option){var selectedOption=taskInputOptions[option],_ref13=selectedOption||{},value=_ref13.value;return value}))),(0,validation/* isEmpty */.xb)(taskRemarkOptions)||(taskRemarkOptions=(taskRemarkOptions||[]).map((function(option){var selectedOption=taskInputOptions[option],_ref14=selectedOption||{},value=_ref14.value;return value}))),task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{remarkOptionValues:taskRemarkOptions,attachmentOptionValues:taskAttachmentOptions,defaultValue:taskDefaultValue,failureValue:taskFailureValue})}
//Removing unwanted nodes
var excludeFields=["resource","sectionId","jobPlanResource","sectionResource","jobPlanCategory","readings","sequenceNumber"];return excludeFields.forEach((function(excludeField){return delete(task||{})[excludeField]})),task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{statusNew:1}),task}));return section.tasks=serializedTasks,(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{sequenceNumber:index+1})}))),serializedSection},serializePrerequisites:function(){var prerequisiteList=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],serializedPrereqs=null;return serializedPrereqs=prerequisiteList.map((function(section){var _ref15=section||{},enableOption=_ref15.enableOption,options=_ref15.options,attachmentRequired=_ref15.attachmentRequired,tasks=_ref15.tasks,name=_ref15.name,serializedTasks=tasks.map((function(task){var _ref16=task||{},enableOption=_ref16.enableOption,options=_ref16.options,attachmentRequired=_ref16.attachmentRequired,subject=_ref16.subject;return{subject:subject,enableOption:enableOption,options:options,attachmentRequired:attachmentRequired}}));return{name:name,enableOption:enableOption,options:options,attachmentRequired:attachmentRequired,tasks:serializedTasks}})),serializedPrereqs},fileFieldHandler:function(finalObj,field,value){var isV3Api=this.isV3Api,isEdit=this.isEdit,fieldObj=field.field,name=field.name;if(!(0,validation/* isEmpty */.xb)(value)&&"string"===typeof value){try{value=JSON.parse(value)}catch(e){this.$message.warning(this.$t("common._common.error_parsing_value"))}var defaultFileObj=value[0]||{},_ref17=defaultFileObj||{},fileId=_ref17.fileId;value=fileId}return isV3Api?finalObj["".concat(name,"Id")]=value:fieldObj&&!fieldObj.default?
// Custom file field handling
(0,validation/* isEmpty */.xb)(value)&&isEdit?
// To reset the file fields on edit
finalObj.data["".concat(name,"Id")]=-99:finalObj.data["".concat(name,"Id")]=value:
// System file field handling
(0,validation/* isEmpty */.xb)(value)&&isEdit?
// To reset the file fields on edit
finalObj["".concat(name,"Id")]=-99:finalObj["".concat(name,"Id")]=value,finalObj}}},mixins_DataCreationMixinvue_type_script_lang_js=DataCreationMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_DataCreationMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DataCreationMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
},
/***/332807:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FormsEventMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules
var render,staticRenderFns,toConsumableArray=__webpack_require__(488478),slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),defineProperty=__webpack_require__(482482),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(76265),__webpack_require__(538077),__webpack_require__(990260)),isString=__webpack_require__(747037),isString_default=__webpack_require__.n(isString),constant=__webpack_require__(354754),api=__webpack_require__(32284),utility_methods=__webpack_require__(555005),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),DataCreationMixin=__webpack_require__(216758),field_utils=__webpack_require__(455344),field=__webpack_require__(815872),FormsEventMixinvue_type_script_lang_js={mixins:[DataCreationMixin/* default */.Z],methods:{fetchOnDataActionsList:function(){var _this=this,triggerType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},form=this.form,formModel=this.formModel,moduleDataId=this.moduleDataId,subFormModels=this.subFormModels,isEditForm=this.isEditForm,isEdit=this.isEdit,_ref=form||{},formId=_ref.id,executeType=isEdit||isEditForm?constant/* default */.Z.EXECUTE_TYPE_HASH["Edit"]:constant/* default */.Z.EXECUTE_TYPE_HASH["Create"],url="/v2/form/rule/executeFormActionRules",clonedFormModel=cloneDeep_default()(formModel),formData=this.serializeFormModel(clonedFormModel,form);subFormModels=this.getModifiedSubForm(),formData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formData),{},{relations:subFormModels});var payload=(0,objectSpread2/* default */.Z)({formId:formId,triggerType:triggerType,formData:formData,executeType:executeType},params);(0,validation/* isEmpty */.xb)(moduleDataId)||(0,validation/* isEmpty */.xb)(payload.formData)||(payload.formData.id=moduleDataId),formId>0&&api/* API */.bl.post(url,payload).then((function(_ref2){var data=_ref2.data,error=_ref2.error;if(error){var message=error.message;_this.$message.error(message)}else{var formRuleResultJSON=data.formRuleResultJSON,subFormRuleResultJSON=data.subFormRuleResultJSON;(0,validation/* isEmpty */.xb)(formRuleResultJSON)||_this.formRulesHandler(formRuleResultJSON),(0,validation/* isEmpty */.xb)(subFormRuleResultJSON)||_this.subFormRulesHandler(subFormRuleResultJSON)}}))},fetchActionsList:function(field){var _this2=this,form=this.form,formModel=this.formModel,moduleDataId=this.moduleDataId,subFormModels=this.subFormModels,_ref3=form||{},formId=_ref3.id,formFieldId=field.id,url="/v2/form/rule/executeFormActionRules",clonedFormModel=cloneDeep_default()(formModel),formData=this.serializeFormModel(clonedFormModel,form),isEdit=this.isEdit,isEditForm=this.isEditForm,executeType=isEdit||isEditForm?constant/* default */.Z.EXECUTE_TYPE_HASH["Edit"]:constant/* default */.Z.EXECUTE_TYPE_HASH["Create"];subFormModels=this.getModifiedSubForm(),formData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formData),{},{relations:subFormModels});var payload={formId:formId,executeType:executeType,formFieldId:formFieldId,triggerType:2,formData:formData};(0,validation/* isEmpty */.xb)(moduleDataId)||(0,validation/* isEmpty */.xb)(payload.formData)||(payload.formData.id=moduleDataId),api/* API */.bl.post(url,payload).then((function(_ref4){var data=_ref4.data,error=_ref4.error;if(error){var message=error.message;_this2.$message.error(message)}else{var formRuleResultJSON=data.formRuleResultJSON,subFormRuleResultJSON=data.subFormRuleResultJSON;(0,validation/* isEmpty */.xb)(formRuleResultJSON)||_this2.formRulesHandler(formRuleResultJSON),(0,validation/* isEmpty */.xb)(subFormRuleResultJSON)||_this2.subFormRulesHandler(subFormRuleResultJSON)}}))},getModifiedSubForm:function(){var _this3=this,_ref5=this||{},subFormModels=_ref5.subFormModels,_ref6=this||{},form=_ref6.form,_ref7=form||{},sections=_ref7.sections,modifiedSubForm={};return Object.keys(subFormModels).forEach((function(subFormName){var model=subFormModels[subFormName],clonedSubFormModel=cloneDeep_default()(model),subFormSection=sections.find((function(section){var _ref8=section||{},sectionTypeEnum=_ref8.sectionTypeEnum,subForm=_ref8.subForm,_ref9=subForm||{},sectionSubformName=_ref9.name;return"SUB_FORM"==sectionTypeEnum&&sectionSubformName==subFormName})),_ref10=subFormSection||{},subForm=_ref10.subForm,subFormModel=clonedSubFormModel.map((function(model){var modifiedModel=_this3.serializeFormModel(model,subForm),_ref11=model||{},sub_form_action=_ref11.sub_form_action;return(0,validation/* isEmpty */.xb)(sub_form_action)||(modifiedModel.sub_form_action=model["sub_form_action"]),modifiedModel}));modifiedSubForm=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},modifiedSubForm),{},(0,defineProperty/* default */.Z)({},subFormName,{data:subFormModel}))})),modifiedSubForm},serializeFormModel:function(formModel,form){var serializedModel={};if(!(0,validation/* isEmpty */.xb)(formModel)){serializedModel=this.serializedData(form,formModel);var _serializedModel=serializedModel,subFormData=_serializedModel.subFormData;(0,validation/* isEmpty */.xb)(subFormData)||delete serializedModel.subFormData}return(0,utility_methods/* deepClean */.I2)(serializedModel)},formRulesHandler:function(rulesArr){var _this4=this;rulesArr.forEach((function(rule){_this4.executeRules({rule:rule})}))},subFormRulesHandler:function(rules){
// Here we get the subform sections and access the sub form wrapper
// component to call the executeSubFormRules method inside that component.
var form=this.form,$refs=this.$refs,sections=form.sections;(0,validation/* isEmpty */.xb)(sections)||sections.forEach((function(section,index){var _ref12=section||{},subForm=_ref12.subForm,subFormId=_ref12.subFormId,subFormElement=$refs["".concat(index," ").concat(subFormId)],_ref13=subForm||{},name=_ref13.name;(0,validation/* isEmpty */.xb)(subFormElement)||subFormElement[0].executeSubFormRules(rules[name])}))},executeViewRelatedActions:function(props){var _this5=this,field=props.field,id=field.id,form=this.form,_form$onLoadActionsFi=form.onLoadActionsFieldIds,onLoadActionsFieldIds=void 0===_form$onLoadActionsFi?[]:_form$onLoadActionsFi,_form$initialActionsL=form.initialActionsList,initialActionsList=void 0===_form$initialActionsL?[]:_form$initialActionsL,viewRelatedRules=[];if(onLoadActionsFieldIds.includes(id)){var rules=this.getRulesById({initialActionsList:initialActionsList,id:id});viewRelatedRules=this.getViewRelatedActionRules({rules:rules})}(0,validation/* isEmpty */.xb)(viewRelatedRules)||viewRelatedRules.forEach((function(rule){_this5.executeRules({rule:rule,selectedField:field})}))},executeFilterRelatedActions:function(props){var field=props.field,id=field.id,form=this.form,_form$onLoadActionsFi2=form.onLoadActionsFieldIds,onLoadActionsFieldIds=void 0===_form$onLoadActionsFi2?[]:_form$onLoadActionsFi2,_form$initialActionsL2=form.initialActionsList,initialActionsList=void 0===_form$initialActionsL2?[]:_form$initialActionsL2,rule={};if(onLoadActionsFieldIds.includes(id)){var rules=this.getRulesById({initialActionsList:initialActionsList,id:id});rule=this.getFilterActionRules({rules:rules})}(0,validation/* isEmpty */.xb)(rule)||this.executeRules({rule:rule,selectedField:field,criteriaKey:"clientCriteria"})},executeRules:function(props){var rule=props.rule,selectedField=props.selectedField,_props$stopRecursiveR=props.stopRecursiveRuleExecution,stopRecursiveRuleExecution=void 0!==_props$stopRecursiveR&&_props$stopRecursiveR,_props$criteriaKey=props.criteriaKey,criteriaKey=void 0===_props$criteriaKey?"clientCriteria":_props$criteriaKey,actionsMap=this.actionsMap,action=rule.action,_ref14=action||{},actionName=_ref14.actionName,actionHandler=(actionsMap[actionName]||{}).handler;!(0,validation/* isEmpty */.xb)(actionHandler)&&(0,validation/* isFunction */.mf)(actionHandler)&&actionHandler((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},rule),{},{selectedField:selectedField,stopRecursiveRuleExecution:stopRecursiveRuleExecution,criteriaKey:criteriaKey}))},onBlurHandler:function(props){var field=props.field,formModel=this.formModel;this.$emit("onBlur",{field:field,value:formModel[field.name],formModel:formModel})},onChangeHandler:function(props){var _this6=this,field=props.field,isSubForm=props.isSubForm;if(isSubForm){var form=this.form,formModel=this.formModel,isEdit=this.isEdit;if(isEdit){var id=this.$getProperty(form,"recordId");this.$emit("subFormDirtyChange",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formModel),{},{id:id}))}this.$emit("onModelChange",{formModel:formModel,field:field})}else
// To send events on form or field change
this.$nextTick((function(){_this6.sendFieldChangeEvent(field);var _ref15=field||{},isTriggerField=_ref15.isTriggerField;isTriggerField&&_this6.fetchActionsList(field)}))},getCurrentFormData:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var form,$refs,formModel,modelObj,_ref16,_ref16$sections,sections,index,section,subForm,subFormId,subFormElement,subFormData,moduleName,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(form=_this7.form,$refs=_this7.$refs,formModel=_this7.formModel,modelObj=formModel||{},_ref16=form||{},_ref16$sections=_ref16.sections,sections=void 0===_ref16$sections?[]:_ref16$sections,(0,validation/* isEmpty */.xb)(sections)){_context.next=18;break}index=0;case 5:if(!(index<sections.length)){_context.next=18;break}if(section=sections[index],subForm=section.subForm,subFormId=section.subFormId,subFormElement=$refs["".concat(index," ").concat(subFormId)],(0,validation/* isEmpty */.xb)(subForm)||(0,validation/* isEmpty */.xb)(subFormElement)){_context.next=15;break}return _context.next=12,subFormElement[0].saveRecord({skipDeserialize:!0,skipSubFormValidation:!0});case 12:subFormData=_context.sent,moduleName=subFormData.moduleName,data=subFormData.data,modelObj[moduleName]=data;case 15:index++,_context.next=5;break;case 18:return _context.abrupt("return",modelObj);case 19:case"end":return _context.stop()}}),_callee)})))()},sendFieldChangeEvent:function(field){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var formModel,module,name,modelObj,data,fieldData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return formModel=_this8.formModel,module=_this8.module,name=field.name,_context2.next=4,_this8.getCurrentFormData();case 4:modelObj=_context2.sent,data={formData:modelObj,module:module},fieldData={value:formModel[name],module:module},_this8.sendEvent({eventName:"form.changed",eventData:data}),_this8.sendEvent({eventName:"form.".concat(name,".changed"),eventData:fieldData});case 9:case"end":return _context2.stop()}}),_callee2)})))()},sendEvent:function(props){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var eventName,eventData,creationWidgets,$refs;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:eventName=props.eventName,eventData=props.eventData,creationWidgets=_this9.creationWidgets,$refs=_this9.$refs,(0,validation/* isEmpty */.xb)(creationWidgets)||creationWidgets.forEach((function(widget){var id=widget.id,_$refs=(0,slicedToArray/* default */.Z)($refs["ref-".concat(id)],1),refElement=_$refs[0];(0,validation/* isEmpty */.xb)(refElement)||refElement.sendEvent(eventName,eventData)}));case 3:case"end":return _context3.stop()}}),_callee3)})))()},handleShowHideAction:function(prop){var action=prop.action,fieldId=prop.fieldId,selectedField=prop.selectedField,_ref17=action||{},actionName=_ref17.actionName;if((0,validation/* isEmpty */.xb)(selectedField)&&(selectedField=this.getSelectedField(fieldId)),!(0,validation/* isEmpty */.xb)(selectedField)){var _selectedField=selectedField,hideField=_selectedField.hideField;hideField="hide"===actionName,this.$set(selectedField,"hideField",hideField)}},handleEnableDisableAction:function(prop){var action=prop.action,fieldId=prop.fieldId,selectedField=prop.selectedField,_ref18=action||{},actionName=_ref18.actionName;if((0,validation/* isEmpty */.xb)(selectedField)&&(selectedField=this.getSelectedField(fieldId)),!(0,validation/* isEmpty */.xb)(selectedField)){var _selectedField2=selectedField,isDisabled=_selectedField2.isDisabled;isDisabled="disable"===actionName,this.$set(selectedField,"isDisabled",isDisabled)}},handleSetRemoveMandatory:function(prop){var action=prop.action,fieldId=prop.fieldId,selectedField=prop.selectedField,_ref19=action||{},actionName=_ref19.actionName;if((0,validation/* isEmpty */.xb)(selectedField)&&(selectedField=this.getSelectedField(fieldId)),!(0,validation/* isEmpty */.xb)(selectedField)){var _selectedField3=selectedField,required=_selectedField3.required;required="setMandatory"===actionName,required?this.setupValidation(selectedField):this.removeValidation(selectedField),this.$set(selectedField,"required",required)}},removeValidation:function(field){var _this$rules=this.rules,rules=void 0===_this$rules?[]:_this$rules,name=field.name;(0,validation/* isEmpty */.xb)(rules[name])||delete rules[name]},handleShowHideSection:function(prop){var action=prop.action,sectionId=prop.sectionId,selectedSection=prop.selectedSection,_ref20=action||{},actionName=_ref20.actionName;if((0,validation/* isEmpty */.xb)(sectionId)||(selectedSection=this.getSelectedSection(sectionId)),!(0,validation/* isEmpty */.xb)(selectedSection)){var _selectedSection=selectedSection,hideSection=_selectedSection.hideSection;hideSection="hideSection"===actionName,this.$set(selectedSection,"hideSection",hideSection)}},handleSetValueAction:function(prop){var action=prop.action,fieldId=prop.fieldId,selectedField=prop.selectedField,stopRecursiveRuleExecution=prop.stopRecursiveRuleExecution,_ref21=action||{},value=_ref21.value;if((0,validation/* isEmpty */.xb)(selectedField)&&(selectedField=this.getSelectedField(fieldId)),!(0,validation/* isEmpty */.xb)(selectedField)){var _selectedField4=selectedField,name=_selectedField4.name,displayTypeEnum=_selectedField4.displayTypeEnum;if(constant/* default */.Z.PARSE_FIELDS_HASH.includes(displayTypeEnum)&&!(0,validation/* isEmpty */.xb)(value)&&isString_default()(value)&&(value=JSON.parse(value)),(0,field/* isMultiLookup */.On)(selectedField))value=value.map((function(val){return val.id})),this.$set(this.formModel,name,value);else if((0,field_utils/* isChooserTypeField */.Rq)(selectedField)||(0,field/* isDropdownTypeField */.aK)(selectedField))this.$set(this.formModel,name,{id:value});else if("MULTI_CURRENCY"===selectedField.displayTypeEnum){var _ref22=this.formModel||{},exchangeRate=_ref22.exchangeRate;value=(0,validation/* isEmpty */.xb)(exchangeRate)?value:value*exchangeRate,this.$set(this.formModel,name,value)}else this.$set(this.formModel,name,value);stopRecursiveRuleExecution||this.onChangeHandler({field:selectedField})}},handleSetFilter:function(prop){var action=prop.action,fieldId=prop.fieldId,selectedField=prop.selectedField,criteriaKey=prop.criteriaKey,_ref23=action||{},value=_ref23.value,isEnum=_ref23.isEnum;if((0,validation/* isEmpty */.xb)(selectedField)&&(selectedField=this.getSelectedField(fieldId)),!(0,validation/* isEmpty */.xb)(selectedField))if(isEnum){var formModel=this.formModel,_value$values=value.values,values=void 0===_value$values?[]:_value$values,_selectedField5=selectedField,fieldObj=_selectedField5.field,name=_selectedField5.name,_fieldObj$values=fieldObj.values,optionsMap=void 0===_fieldObj$values?[]:_fieldObj$values,options=(0,utility_methods/* constructEnumFieldOptions */.rr)(optionsMap),isMultipleEnum=this.isMultiple(selectedField);
// To reset already selected values
if(isMultipleEnum){var selectedValues=formModel[name]||[],finalValues=selectedValues.filter((function(value){return!values.includes(value)}))||[];this.$set(this.formModel,name,finalValues)}else{var _ref24=formModel[name]||{},id=_ref24.id,canResetValue=values.includes(id);canResetValue&&this.$set(this.formModel,name,{id:null})}var filteredOptions=(options||[]).filter((function(option){return!values.includes(option.value)}))||[];this.$set(selectedField,"options",filteredOptions)}else{var conditions=value.conditions,pattern=value.pattern,criteria={conditions:conditions,pattern:pattern};this.$set(selectedField,criteriaKey,criteria)}},getSelectedField:function(fieldId){var form=this.form,_ref25=form||{},_ref25$sections=_ref25.sections,sections=void 0===_ref25$sections?[]:_ref25$sections,selectedField=sections.reduce((function(res,_ref26){var fields=_ref26.fields;return[].concat((0,toConsumableArray/* default */.Z)(res),(0,toConsumableArray/* default */.Z)(fields))}),[]).find((function(field){return field.id===fieldId}));return selectedField||{}},getSelectedSection:function(sectionId){var form=this.form,_ref27=form||{},_ref27$sections=_ref27.sections,sections=void 0===_ref27$sections?[]:_ref27$sections,selectedSection=sections.find((function(section){return section.id===sectionId}));return selectedSection||{}},getActionName:function(rule){var _ref28=rule||{},action=_ref28.action,_ref29=action||{},actionName=_ref29.actionName;return actionName},getRulesById:function(props){var initialActionsList=props.initialActionsList,id=props.id,selectedRules=(initialActionsList||[]).filter((function(rule){return rule.fieldId===id}));return selectedRules},getSetActionRule:function(props){var _this10=this,rules=props.rules,selectedRule=(rules||[]).find((function(rule){var actionName=_this10.getActionName(rule);return"set"===actionName}));return selectedRule},getViewRelatedActionRules:function(props){var _this11=this,rules=props.rules,selectedRules=(rules||[]).filter((function(rule){var actionName=_this11.getActionName(rule);return["enable","disable","show","hide","hideSection","showSection","setMandatory","removeMandatory"].includes(actionName)}));return selectedRules},getFilterActionRules:function(props){var _this12=this,rules=props.rules,selectedRule=(rules||[]).find((function(rule){var actionName=_this12.getActionName(rule);return"filter"===actionName}));return selectedRule}}},forms_FormsEventMixinvue_type_script_lang_js=FormsEventMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FormsEventMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FormsEventMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
},
/***/364122:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return LineItemsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(897389),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(162506),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(990260)),form_validator=__webpack_require__(145621),api=__webpack_require__(32284),round=__webpack_require__(59854),round_default=__webpack_require__.n(round),MODULE_LINEITEM_MAP={purchaserequest:"purchaserequestlineitems",purchaseorder:"purchaseorderlineitems",quote:"quotelineitems"},LineItemsMixinvue_type_script_lang_js={data:function(){return{quotationsetting:null,quantityValidationRules:{quantity:[{required:!0,message:"Required",trigger:"blur"},{validator:form_validator/* validateForPositiveNumber */.T3,trigger:"blur"}]},nameAndDescriptionValidationRules:{itemType:[{required:!0,message:"Please input",trigger:"change",validator:form_validator/* validateForDropDownField */.mN}],toolType:[{required:!0,message:"Please input",trigger:"change",validator:form_validator/* validateForDropDownField */.mN}],service:[{required:!0,message:"Please input",trigger:"change",validator:form_validator/* validateForDropDownField */.mN}]},descriptionValidationRules:{description:[{required:!0,message:"Please enter description",trigger:"blur"}],itemType:[{required:!0,message:"Please input",trigger:"change",validator:form_validator/* validateForDropDownField */.mN}],toolType:[{required:!0,message:"Please input",trigger:"change",validator:form_validator/* validateForDropDownField */.mN}],service:[{required:!0,message:"Please input",trigger:"change",validator:form_validator/* validateForDropDownField */.mN}]},additionalCostsRules:{miscellaneousCharges:[{validator:form_validator/* validateForPositiveNumber */.T3,trigger:"blur"}],shippingCharges:[{validator:form_validator/* validateForPositiveNumber */.T3,trigger:"blur"}],discountPercentage:[{validator:form_validator/* validateForPositiveNumber */.T3,trigger:"blur"}],discountAmount:[{validator:form_validator/* validateForPositiveNumber */.T3,trigger:"blur"}],adjustmentsCost:[{validator:form_validator/* validateForNumber */.FS,trigger:"blur"}]},individualTaxes:[],groupedTaxes:[],allTaxes:[],discountVisibility:!1,itemTypes:[],nonVendorItems:[],toolTypes:[],vendorItems:[],service:[],labours:[],uomFieldOptions:[],loading:!0,currencyInfoObj:{},isDefaultCurrency:!1}},computed:{showMarkupValue:function(){var _this$quotationsettin2,_this$quotationsettin;
// this showmarkup used to create the quote
return null!==this.customerType&&4===this.customerType&&this.quotationsetting?this.quotationsetting.vendorquote:null===this.customerType||1!==this.customerType&&2!==this.customerType?(null===(_this$quotationsettin2=this.quotationsetting)||void 0===_this$quotationsettin2?void 0:_this$quotationsettin2.showMarkupValue)||!1:null===(_this$quotationsettin=this.quotationsetting)||void 0===_this$quotationsettin?void 0:_this$quotationsettin.enduserquote},customerType:function(){var _this$model;return null!==(_this$model=this.model)&&void 0!==_this$model&&null!==(_this$model=_this$model.customerType)&&void 0!==_this$model&&_this$model.id?this.model.customerType.id:null},isGlobalMarkup:function(){var _this$quotationsettin3;return null===(_this$quotationsettin3=this.quotationsetting)||void 0===_this$quotationsettin3||!_this$quotationsettin3.markupdisplayMode||2!==this.quotationsetting.markupdisplayMode},unitPriceValidationRules:function(){return{unitPrice:[{required:"requestForQuotation"===!this.module,message:"Required",trigger:"blur"},{validator:form_validator/* validateForPositiveNumber */.T3,trigger:"blur"}]}},totalAmount:function(){return Number(this.subTotal)+Number(this.totalTax)+Number(this.model.shippingCharges||0)+Number(this.model.adjustmentsCost||0)+Number(this.model.miscellaneousCharges||0)+(Number(this.discount)||0)},totalTax:function(){var _this=this,totalTax=0,markup=this.model.markup;if(1===this.$helpers.taxMode())this.lineItems.forEach((function(item){var relativeCost=Number(_this.getRelativeLineItemCost(item));if(_this.showMarkupValue&&_this.isGlobalMarkup){var markupValue=_this.getGlobalMarkupvalue(item,markup);null!==markupValue&&(0,validation/* isNumber */.hj)(markupValue)&&(relativeCost=markupValue+relativeCost)}var taxId=_this.$getProperty(item,"tax.id",-1),tax=_this.getTaxObject(taxId),taxRate=_this.$getProperty(tax,"rate",0);totalTax+=Number((relativeCost*taxRate/100).toFixed(2))}));else if(2===this.$helpers.taxMode()){var _this$subTotal=this.subTotal,subTotal=void 0===_this$subTotal?0:_this$subTotal,total=Number(subTotal);1===this.$helpers.discountMode()&&(
// Discount itself will be negative
total+=Number(this.discount));var taxId=this.$getProperty(this.model,"tax.id",-1),tax=this.getTaxObject(taxId),taxRate=this.$getProperty(tax,"rate",0);totalTax=total*taxRate/100}return Number(totalTax)},discount:function(){var subTotal=this.subTotal,discount=0,total=Number(subTotal);return 2===this.$helpers.discountMode()&&(
// Beware of recursion
total+=Number(this.totalTax)),(0,validation/* isEmpty */.xb)(this.model.discountAmount)?(0,validation/* isEmpty */.xb)(this.model.discountPercentage)||(discount=total*Number(this.model.discountPercentage)/100):discount=Number(this.model.discountAmount),Number(-discount)||0},subTotal:function(){var _this2=this,subTotal=0;return this.lineItems.forEach((function(item){var lineItemCost=_this2.getLineItemTotalCost(item);subTotal+=Number(lineItemCost)||0})),Number(subTotal)+Number(this.getTotalMarkupAmount)},getAdjustedTotal:function(){var subTotal=this.subTotal,discount=this.discount;return Number(subTotal+discount)||0},getTotalMarkupAmount:function(){var _this3=this,totlaMarkup=0,markup=this.model.markup;return this.lineItems.forEach((function(lineItem){totlaMarkup+=_this3.getGlobalMarkupvalue(lineItem,markup)})),totlaMarkup},taxSplitUp:function(){var _this4=this,taxSplitUpMap={},markup=this.model.markup;if(1===this.$helpers.taxMode())this.lineItems.forEach((function(lineItem){var taxId=_this4.$getProperty(lineItem,"tax.id",-1);if(taxId>0){var taxRate,taxObj=_this4.getTaxObject(taxId),lineItemCost=Number(_this4.getRelativeLineItemCost(lineItem));if(_this4.showMarkupValue&&_this4.isGlobalMarkup){var markupValue=_this4.getGlobalMarkupvalue(lineItem,markup);null!==markupValue&&(0,validation/* isNumber */.hj)(markupValue)&&(lineItemCost=markupValue+lineItemCost)}if(taxObj&&1===taxObj.type){taxRate=Number(taxObj.rate);var taxAmount=lineItemCost*taxRate/100;taxAmount=Number(taxAmount),taxAmount&&0!==taxAmount&&(taxSplitUpMap[taxObj.id]?taxSplitUpMap[taxObj.id].taxAmount+=Number(taxAmount):taxSplitUpMap[taxObj.id]={tax:taxObj,taxAmount:Number(taxAmount)})}else taxObj&&2===taxObj.type&&taxObj.childTaxes.forEach((function(child){taxRate=Number(child.rate);var taxAmount=lineItemCost*taxRate/100;taxAmount=Number(taxAmount),0!==taxAmount&&(taxSplitUpMap[child.id]?taxSplitUpMap[child.id].taxAmount+=Number(taxAmount):taxSplitUpMap[child.id]={tax:child,taxAmount:Number(taxAmount)})}))}}));else if(2===this.$helpers.taxMode()){var _this$subTotal2=this.subTotal,subTotal=void 0===_this$subTotal2?0:_this$subTotal2,taxId=this.$getProperty(this.model,"tax.id");if(!(0,validation/* isEmpty */.xb)(taxId)){var taxObj=this.getTaxObject(taxId);if(1===(taxObj||{}).type)taxSplitUpMap[taxId]={tax:taxObj,taxAmount:this.totalTax};else if(2===(taxObj||{}).type){var taxRate=0,total=subTotal;1===this.$helpers.discountMode()&&(total+=this.discount),taxObj.childTaxes.forEach((function(child){taxRate=Number(child.rate);var taxAmount=total*taxRate/100;taxAmount=Number(taxAmount),0!==taxAmount&&(taxSplitUpMap[child.id]?taxSplitUpMap[child.id].taxAmount+=Number(taxAmount):taxSplitUpMap[child.id]={tax:child,taxAmount:Number(taxAmount)})}))}}}return taxSplitUpMap},showTotalTax:function(){return Object.keys(this.taxSplitUp||{}).length>1},lineItemCurrency:function(){var _this$currencyDetails;return(null===(_this$currencyDetails=this.currencyDetails)||void 0===_this$currencyDetails?void 0:_this$currencyDetails.symbol)||this.$currency},isMulticurrencyEnabled:function(){var _ref=this.$getProperty(this.account,"data.currencyInfo")||{},multiCurrencyEnabled=_ref.multiCurrencyEnabled;return multiCurrencyEnabled},canShowCurrencyDropDown:function(){var isMulticurrencyEnabled=this.isMulticurrencyEnabled,isDefaultCurrency=this.isDefaultCurrency;return!isDefaultCurrency&&isMulticurrencyEnabled},currencyDetails:{get:function(){var _ref2=this.currencyData||this.model||{},currencyCode=_ref2.currencyCode,exchangeRate=_ref2.exchangeRate,symbol=_ref2.symbol,initialCurrencyCode=_ref2.initialCurrencyCode;return{currencyCode:currencyCode,exchangeRate:exchangeRate,symbol:symbol,initialCurrencyCode:initialCurrencyCode}},set:function(value){var _ref3=value||{},currencyCode=_ref3.currencyCode,exchangeRate=_ref3.exchangeRate;this.currencyData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currencyData||{}),value);var lineItems=this.lineItems.map((function(item){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},item),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})}));this.$emit("update:model",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.model),{},{currencyCode:currencyCode,exchangeRate:exchangeRate,lineItems:lineItems}))}}},created:function(){this.fetchMetaFields()},methods:{fetchQuoteSetting:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var route,_yield$API$get,data,error,_data$data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if("quote"!==_this5.module){_context.next=14;break}return route="v1/setup/quotesetting/fetch",_context.next=4,api/* API */.bl.get(route);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context.next=12;break}return _this5.$message.error(error.message||"Error occurred"),_context.abrupt("return",!1);case 12:return null!==data&&void 0!==data&&null!==(_data$data=data.data)&&void 0!==_data$data&&_data$data.quotationsetting&&(_this5.quotationsetting=data.data.quotationsetting),_context.abrupt("return",!0);case 14:case"end":return _context.stop()}}),_callee)})))()},getDefaultMarkupValue:function(markup){var markupValue=0,_this$quotationsettin4=this.quotationsetting,_this$quotationsettin5=_this$quotationsettin4.markupDefaultValue,markupDefaultValue=void 0===_this$quotationsettin5?0:_this$quotationsettin5,_this$quotationsettin6=_this$quotationsettin4.globalMarkupValue,globalMarkupValue=void 0===_this$quotationsettin6?0:_this$quotationsettin6,markupdisplayMode=_this$quotationsettin4.markupdisplayMode;return markupdisplayMode&&1===markupdisplayMode?globalMarkupValue:(markupDefaultValue&&(markupValue=markupDefaultValue),markup&&(markupValue=markup),markupValue)},getPercetageOfValue:function(value,percentage){var quantity=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,_this$quotationsettin7=this.quotationsetting,_this$quotationsettin8=_this$quotationsettin7.markupDefaultValue,markupDefaultValue=void 0===_this$quotationsettin8?0:_this$quotationsettin8,_this$quotationsettin9=_this$quotationsettin7.globalMarkupValue,globalMarkupValue=void 0===_this$quotationsettin9?0:_this$quotationsettin9,markupdisplayMode=_this$quotationsettin7.markupdisplayMode,per=0;if(1===markupdisplayMode?per=globalMarkupValue:markupDefaultValue&&(per=markupDefaultValue),percentage&&(per=percentage),value&&null!==per){var perOfV=per/100*value*quantity;return round_default()(perOfV,3)}return 0},getMarkupvalue:function(lineItem){if(!this.showMarkupValue)return 0;var markup=lineItem.markup,unitPrice=lineItem.unitPrice;return this.getPercetageOfValue(unitPrice,markup)},getGlobalMarkupvalue:function(lineItem,markup){if(!this.showMarkupValue)return 0;var unitPrice=lineItem.unitPrice,quantity=lineItem.quantity;return this.isGlobalMarkup?this.getPercetageOfValue(unitPrice,markup,quantity):0},validateForm:function(){var _this6=this,isValid=!0,_ref4=this||{},model=_ref4.model,_ref5=model||{},lineItems=_ref5.lineItems,_ref6=model||{},requestForQuotationLineItems=_ref6.requestForQuotationLineItems,_ref7=this||{},module=_ref7.module,requestedLineItems={};requestedLineItems="requestForQuotation"===module?requestForQuotationLineItems:lineItems,requestedLineItems.forEach((function(lineItem,index){var descriptionFormRef=_this6.$refs["lineItem-description-".concat(index)],unitPriceFormRef=_this6.$refs["lineItem-unitPrice-".concat(index)],quantityFormRef=_this6.$refs["lineItem-quantity-".concat(index)];(0,validation/* isEmpty */.xb)(descriptionFormRef)||descriptionFormRef[0].validate((function(valid){valid||(isValid=!1)})),(0,validation/* isEmpty */.xb)(unitPriceFormRef)||unitPriceFormRef[0].validate((function(valid){valid||(isValid=!1)})),(0,validation/* isEmpty */.xb)(quantityFormRef)||quantityFormRef[0].validate((function(valid){valid||(isValid=!1)}))}));var additionalCostForm=this.$refs["lineItem-additionalCosts"];return(0,validation/* isEmpty */.xb)(additionalCostForm)||additionalCostForm.validate((function(valid){valid||(isValid=!1)})),isValid},removeLineItems:function(index){var lineItems=this.lineItems;lineItems.splice(index,1)},getLineItemsList:function(type){var listModel=(this.lineItemTypesMap["".concat(type)]||{}).list;return!!listModel&&this["".concat(listModel)]},typeChangeAction:function(val){val.unitPrice=null},loadTaxes:function(){var _arguments=arguments,_this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var lineItems,_yield$API$fetchAll,list,error,_error$message,message,lineItemsTaxIdsList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return lineItems=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:[],_context2.next=3,api/* API */.bl.fetchAll("tax",{viewName:"all"});case 3:_yield$API$fetchAll=_context2.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error?(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Tax list":_error$message,_this7.$message.error(message)):(list=list||[],lineItemsTaxIdsList=lineItems.map((function(lineItem){return _this7.$getProperty(lineItem,"tax.id")})),_this7.allTaxes=list,_this7.individualTaxes=list.filter((function(t){return 1===t.type&&(lineItemsTaxIdsList.includes(t.id)||t.isActive)})),_this7.groupedTaxes=list.filter((function(t){return 2===t.type&&(lineItemsTaxIdsList.includes(t.id)||t.isActive)})),_this7.isEdit||2!==_this7.$helpers.taxMode()||(0,validation/* isEmpty */.xb)(list)||!(0,validation/* isArray */.kJ)(list)||1!==list.length||_this7.$setProperty(_this7.model,"tax.id",_this7.$getProperty(list,[0,"id"])));case 7:case"end":return _context2.stop()}}),_callee2)})))()},getTaxAmount:function(lineItem){return this.$getProperty(lineItem,"taxAmount","---")},calculateTaxAmount:function(lineItem){var taxAmount=0,_ref8=lineItem||{},quantity=_ref8.quantity,counterPrice=_ref8.counterPrice,taxRate=this.getTaxRate(lineItem);if(!(0,validation/* isEmpty */.xb)(quantity)&&!(0,validation/* isEmpty */.xb)(counterPrice)&&!(0,validation/* isEmpty */.xb)(taxRate)){var amount=quantity*counterPrice;taxAmount=Number((amount*taxRate/100).toFixed(2))}return this.$set(lineItem,"taxAmount",taxAmount),taxAmount},getTaxPercentage:function(lineItem){var percentage=this.getTaxRate(lineItem);return(0,validation/* isEmpty */.xb)(percentage)?"---":"".concat(percentage," %")},getTaxRate:function(lineItem){var taxObj,taxId=Number(this.$getProperty(lineItem,"tax.id",-1));taxId>0&&(taxObj=this.getTaxObject(taxId));var _ref9=taxObj||{},rate=_ref9.rate;return rate},getTaxObject:function(id){var allTaxes=this.allTaxes;return(allTaxes||[]).find((function(tax){return tax.id===id}))},getLineItemTotalCost:function(lineItem){var totalCost=0;if(this.showMarkupValue&&!this.isGlobalMarkup){var quantity=lineItem.quantity,unitPrice=lineItem.unitPrice;return totalCost=(Number(unitPrice)+Number(this.getMarkupvalue(lineItem)))*Number(quantity),(0,validation/* isNumber */.hj)(totalCost)?totalCost:0}return totalCost=Number(lineItem.unitPrice)*Number(lineItem.quantity),(0,validation/* isNumber */.hj)(totalCost)?totalCost:0},addCost:function(cost){"discount"===cost?this.discountVisibility=!0:this.model["".concat(cost)]=0},removeCost:function(cost){this.model["".concat(cost)]=null},getRelativeLineItemCost:function(lineItem){var lineItemCost=this.getLineItemTotalCost(lineItem);if(1===this.$helpers.discountMode()){var subTotal=this.subTotal,discount=this.discount,subTotalAfterDiscount=Number(subTotal)+Number(discount);return subTotalAfterDiscount*(lineItemCost/subTotal)}return 2===this.$helpers.discountMode()?lineItemCost:0},getExchangeRate:function(prevCurrencyCode,lineItemObj){var currencyList=this.currencyList,currencyDetails=this.currencyDetails,currencyObj=this.currencyObj;if(!(0,validation/* isEmpty */.xb)(currencyList)){var _ref10=currencyDetails||{},currencyCode=_ref10.currencyCode,result=(currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode}));prevCurrencyCode=prevCurrencyCode||(null===currencyObj||void 0===currencyObj?void 0:currencyObj.oldCurrencyCode);var previousCurrency=(currencyList||[]).find((function(currency){return prevCurrencyCode===currency.currencyCode})),_ref11=result||{},exchangeRate=_ref11.exchangeRate,_ref12=this.$getProperty(this.account,"data.currencyInfo")||{},baseCode=_ref12.currencyCode,isBaseCurrencyCode=currencyCode===baseCode,isPrevBaseCurrencyCode=prevCurrencyCode===baseCode,oldExchangeRate=null===previousCurrency||void 0===previousCurrency?void 0:previousCurrency.exchangeRate,_ref13=this.initialCurrency||{},initCode=_ref13.currencyCode,initRate=_ref13.exchangeRate;currencyCode===initCode&&(exchangeRate=initRate||exchangeRate),this.currencyInfoObj={exchangeRate:exchangeRate,oldExchangeRate:oldExchangeRate,isBaseCurrencyCode:isBaseCurrencyCode,isPrevBaseCurrencyCode:isPrevBaseCurrencyCode,currencyCode:currencyCode,lineItemObj:lineItemObj}}this.$emit("calculateExchangeRate",this.currencyInfoObj||{})},setCurrencyData:function(){var _ref14=this.currencyObj||this.model||{},currencyCode=_ref14.currencyCode,exchangeRate=_ref14.exchangeRate,initialCurrencyCode=_ref14.initialCurrencyCode;this.currencyDetails={currencyCode:currencyCode,exchangeRate:exchangeRate,initialCurrencyCode:initialCurrencyCode}},setCurrencyCodeOnChange:function(currencyCode,exchangeRate,symbol){(0,validation/* isEmpty */.xb)(currencyCode)||(this.currencyDetails={currencyCode:currencyCode,exchangeRate:exchangeRate,symbol:symbol}),this.$emit("setCurrencyCode",currencyCode,exchangeRate)},fetchMetaFields:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var module,moduleName,_yield$API$get2,data,lineItemFields,multiCurrencyField;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(module=_this8.module,!(0,validation/* isEmpty */.xb)(module)){_context3.next=3;break}return _context3.abrupt("return");case 3:return moduleName=MODULE_LINEITEM_MAP[module],_context3.next=6,api/* API */.bl.get("/module/metafields",{moduleName:moduleName});case 6:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,lineItemFields=_this8.$getProperty(data,"meta.fields",[]),multiCurrencyField=(lineItemFields||[]).find((function(fld){return"MULTI_CURRENCY"===fld.displayTypeEnum})),_this8.hasMultiCurrencyField=!(0,validation/* isEmpty */.xb)(multiCurrencyField);case 11:case"end":return _context3.stop()}}),_callee3)})))()}}},forms_LineItemsMixinvue_type_script_lang_js=LineItemsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_LineItemsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,LineItemsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/946201:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SubFormSetupMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),defineProperty=__webpack_require__(482482),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(634338),__webpack_require__(990260)),utility_methods=__webpack_require__(773258),api=__webpack_require__(32284),dlv_umd=__webpack_require__(226905),dlv_umd_default=__webpack_require__.n(dlv_umd),SubFormSetupMixinvue_type_script_lang_js={computed:{checkEditSubFormDataEnabled:function(){return this.$helpers.isLicenseEnabled("DISABLE_EDIT_SUB_FORM_DATA")}},methods:{constructSubFormValues:function(props){var subForm=props.subForm,subFormValue=props.subFormValue,isEdit=props.isEdit,ruleFieldIds=props.ruleFieldIds;if(subForm=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},subForm),{},{ruleFieldIds:ruleFieldIds}),!(0,validation/* isEmpty */.xb)(subFormValue)){var dataArr=subFormValue.data;if(!(0,validation/* isEmpty */.xb)(dataArr)){var subFormArr=[];return dataArr.forEach((function(data){var clonedSubForm=(0,utility_methods/* deepCloneObject */.kh)(subForm)||{},_clonedSubForm=clonedSubForm,sections=_clonedSubForm.sections;if(isEdit){var id=data.id;clonedSubForm=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},clonedSubForm),{},{recordId:id})}var clonedSections=(0,utility_methods/* deepCloneObject */.kh)(sections);clonedSections.forEach((function(section){var fields=section.fields;(0,validation/* isEmpty */.xb)(fields)||fields.forEach((function(field){var name=field.name,displayTypeEnum=field.displayTypeEnum,value=data[name];if("siteId"===name)field.value=(0,validation/* isEmpty */.xb)(value)?null:value.id;else if("FILE"===displayTypeEnum){if(isEdit){var _ref=field||{},fieldName=_ref.name,_name=data["".concat(fieldName,"FileName")],_id=data["".concat(fieldName,"Id")];value={name:_name,id:_id}}var _ref2=value||{},_name2=_ref2.name,_id2=_ref2.id;(0,validation/* isEmpty */.xb)(_name2)||(field.fileObj={name:value.name}),field.value=_id2}else(0,validation/* isObject */.Kn)(value)?field.value=value.id:(0,validation/* isEmpty */.xb)(value)||(field.value=value)}))})),clonedSubForm.sections=clonedSections,subFormArr.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},clonedSubForm||{}),{},{moduleData:data}))})),subFormArr}}return[(0,utility_methods/* deepCloneObject */.kh)(subForm)]},loadSubFormRecords:function(section,moduleDataId,currentModuleName){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var subFormModuleName,lookupFieldName,moduleName,_yield$API$fetchAll,list,url,params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(subFormModuleName=_this.$getProperty(section,"subForm.module.name"),lookupFieldName=_this.$getProperty(section,"lookupFieldName"),moduleName=currentModuleName||{},!subFormModuleName){_context.next=24;break}if(!_this.checkEditSubFormDataEnabled){_context.next=12;break}return _context.next=7,api/* API */.bl.fetchAll(subFormModuleName,{page:1,perPage:25,filters:JSON.stringify((0,defineProperty/* default */.Z)({},lookupFieldName,{operatorId:5,value:["".concat(moduleDataId)]}))});case 7:return _yield$API$fetchAll=_context.sent,list=_yield$API$fetchAll.list,_context.abrupt("return",list);case 12:return url="v3/modules/".concat(moduleName,"/").concat(moduleDataId,"/relatedList/").concat(subFormModuleName,"/").concat(lookupFieldName),params={orderBy:"id",orderType:"ASC",subFormRecord:!0},_context.next=16,api/* API */.bl.get(url,params);case 16:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context.next=23;break}_this.$message.error(error.message||"Error occured"),_context.next=24;break;case 23:return _context.abrupt("return",dlv_umd_default()(data,"".concat(subFormModuleName),[]));case 24:case"end":return _context.stop()}}),_callee)})))()}}},forms_SubFormSetupMixinvue_type_script_lang_js=SubFormSetupMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_SubFormSetupMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SubFormSetupMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
},
/***/143306:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WebFormMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
var render,staticRenderFns,WebFormMixin_render,WebFormMixin_staticRenderFns,slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(879288),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(300268),__webpack_require__(76265),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(821057),__webpack_require__(336585),__webpack_require__(990260)),utility_methods=__webpack_require__(773258),utils_utility_methods=__webpack_require__(555005),constant=__webpack_require__(354754),FAssignment=__webpack_require__(383274),FLookupField=__webpack_require__(855048),http=__webpack_require__(218430),field_utils=__webpack_require__(455344),isString=__webpack_require__(747037),isString_default=__webpack_require__.n(isString),api=__webpack_require__(32284),FormFieldHandlerMixinvue_type_script_lang_js={methods:{siteFieldHandler:function(props){var field=props.field,currentSiteId=props.currentSiteId;
// To set globally selected site scope
(0,validation/* isEmpty */.xb)(currentSiteId)||(field.value=currentSiteId,this.onChangeHandler({field:field}))},lookupFieldHandler:function(props){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var field,isEdit,preFillValueForCreationObj,isResourceField,isLookupMulti,isLookupField,value,name,lookupModuleName,label,dataValue,_ref,config,canShowLookupWizard,id;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(field=props.field,isEdit=props.isEdit,preFillValueForCreationObj=props.preFillValueForCreationObj,isResourceField=props.isResourceField,isLookupMulti=props.isLookupMulti,isLookupField=props.isLookupField,value=field.value,name=field.name,lookupModuleName=field.lookupModuleName,field.multiple=isLookupMulti,isLookupField&&(
// For old lookupfields, this `canShowLookupWizard` will not be available to skip migration, we're doing this
_ref=field||{},config=_ref.config,(0,validation/* isEmpty */.xb)(config)?(field.config={},field.config.canShowLookupWizard=!0):(canShowLookupWizard=_this.$getProperty(config,"canShowLookupWizard",null),(0,validation/* isNull */.Ft)(canShowLookupWizard)&&(field.config.canShowLookupWizard=!0))),!isResourceField){_context.next=13;break}
// To prefill value by extracting it from url
if(isEdit||(0,validation/* isEmpty */.xb)(preFillValueForCreationObj["".concat(name)])||(dataValue=Number(preFillValueForCreationObj["".concat(name)])),(0,validation/* isEmpty */.xb)(dataValue)&&!(0,validation/* isEmpty */.xb)(value)&&(
/*
                To prefill default value configured in form builder
                To prefill values in edit case
                */
id=value.id,dataValue=id?Number(id):id),(0,validation/* isEmpty */.xb)(dataValue)){_context.next=13;break}return _context.next=10,_this.getResourceLabel({lookupModuleName:lookupModuleName,selectedOptionId:dataValue});case 10:label=_context.sent,_this.$set(field,"value",{id:dataValue}),_this.setupInitialResourceObj({label:label,dataValue:dataValue});case 13:case"end":return _context.stop()}}),_callee)})))()},numberDecimalFieldHandler:function(props){var field=props.field,fieldObj=field.field;if(!(0,validation/* isEmpty */.xb)(fieldObj)){var metric=fieldObj.metric,unitId=fieldObj.unitId;-1!==metric&&(field.metric=metric),-1!==unitId&&(field.unitId=unitId)}},durationFieldHandler:function(props){var field=props.field,value=field.value;(0,validation/* isEmpty */.xb)(value)&&this.$set(field,"selectedUnit","days")},getResourceLabel:function(props){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var lookupModuleName,selectedOptionId,labelMeta,_yield$API$post,data,error,_ref2,label,_ref3,_ref4,selectedOption;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return lookupModuleName=props.lookupModuleName,selectedOptionId=props.selectedOptionId,labelMeta={},labelMeta[lookupModuleName]=[selectedOptionId],_context2.next=5,api/* API */.bl.post("/v2/picklist/label",{labelMeta:labelMeta});case 5:if(_yield$API$post=_context2.sent,data=_yield$API$post.data,error=_yield$API$post.error,!error){_context2.next=12;break}return _context2.abrupt("return",{error:error});case 12:return _ref2=data||{},label=_ref2.label,_ref3=label[lookupModuleName]||[],_ref4=(0,slicedToArray/* default */.Z)(_ref3,1),selectedOption=_ref4[0],_context2.abrupt("return",(selectedOption||{}).label);case 15:case"end":return _context2.stop()}}),_callee2)})))()},setupInitialResourceObj:function(props){var spaceAssetResourceObj=this.spaceAssetResourceObj,label=props.label,dataValue=props.dataValue;
// spaceAssetResourceObj used in task list component to set initial resource value for new task created.
(0,validation/* isObject */.Kn)(spaceAssetResourceObj)&&(this.spaceAssetResourceObj={name:label,id:dataValue})}}},forms_FormFieldHandlerMixinvue_type_script_lang_js=FormFieldHandlerMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FormFieldHandlerMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FormFieldHandlerMixin=component.exports,SubFormSetupMixin=__webpack_require__(946201),FormsEventMixin=__webpack_require__(332807),filters=__webpack_require__(638203),picklist=__webpack_require__(961358),utils_field=__webpack_require__(815872),vuex_esm=__webpack_require__(420629),common=__webpack_require__(927698),CurrencyUtil=__webpack_require__(15426),addressFieldsList=["billToAddress","shipToAddress","location"],WebFormMixinvue_type_script_lang_js={mixins:[FormsEventMixin/* default */.Z,SubFormSetupMixin/* default */.Z,FormFieldHandlerMixin],components:{FAssignment:FAssignment/* default */.Z,FLookupField:FLookupField/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account}})),{},{currentSiteId:function(){var siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;return currentSiteId},selectedSiteId:{get:function(){var sections=this.sections,formModel=this.formModel,module=this.module,form=this.form,_ref=formModel||{},siteId=_ref.siteId;if((0,validation/* isEmpty */.xb)(siteId)){if("formBuilder"!==module||(0,validation/* isEmpty */.xb)(sections)){var _ref3=form||{},_ref3$sections=_ref3.sections,currSection=void 0===_ref3$sections?[]:_ref3$sections,siteField=currSection.reduce((function(res,_ref4){var fields=_ref4.fields;return(0,validation/* isEmpty */.xb)(fields)?res:[].concat((0,toConsumableArray/* default */.Z)(res),(0,toConsumableArray/* default */.Z)(fields))}),[]).find((function(field){return(0,field_utils/* isSiteLookup */.Xs)(field)}));if((0,validation/* isEmpty */.xb)(siteField))return null;var _siteField$name=siteField.name,name=void 0===_siteField$name?"":_siteField$name;return(0,validation/* isEmpty */.xb)(formModel[name])?null:formModel[name].id}var site=sections.reduce((function(res,_ref2){var fields=_ref2.fields;return[].concat((0,toConsumableArray/* default */.Z)(res),(0,toConsumableArray/* default */.Z)(fields))}),[]).filter((function(field){return"siteId"===field.name}));return(0,validation/* isEmpty */.xb)(site)?null:site[0].value}return(0,validation/* isEmpty */.xb)(siteId)?null:siteId.id},deep:!0},preFillValueForCreationObj:function(){var $route=this.$route,_ref5=$route||{},query=_ref5.query,_ref6=query||{},formDetails=_ref6.formDetails,queryModel={};if(queryModel=(0,validation/* isEmpty */.xb)(formDetails)?query:JSON.parse(formDetails),!(0,validation/* isEmpty */.xb)(queryModel)){var _ref7=queryModel||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup;if(!(0,validation/* isEmpty */.xb)(assignedTo)||!(0,validation/* isEmpty */.xb)(assignmentGroup)){assignedTo=(0,validation/* isEmpty */.xb)(assignedTo)?"":parseInt(assignedTo),assignmentGroup=(0,validation/* isEmpty */.xb)(assignmentGroup)?"":parseInt(assignmentGroup);var assignment={assignedTo:{id:assignedTo},assignmentGroup:{id:assignmentGroup}};queryModel["assignment"]=JSON.stringify(assignment)}return queryModel}return{}}}),watch:{selectedSiteId:{handler:function(newVal,oldVal){newVal!==oldVal&&this.$set(this,"filter",{site:newVal})}}},created:function(){this.$store.dispatch("loadBuildings")},mounted:function(){var selectedSiteId=this.selectedSiteId;(0,validation/* isEmpty */.xb)(selectedSiteId)||this.$set(this,"filter",{site:selectedSiteId})},methods:{
/*
      1. Have to fetch options for system fields of type lookup_simple through picklist factory.
      2. Have to convert `value` to the desired format, since all the `value` for the fields is of type string
        for eg:
        Team/Staff field `value` from the server is json string
        "{"assignedTo":{"id":848545},"assignmentGroup":{"id":56}}"
        Have to convert this to normal object before rendering.
      3. Fetch files for 'ATTACHMENT' type field and insert into both formModel and attachments[]
    */
deserializeData:function(fields){var _this=this,sections=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],module=this.module,isEdit=this.isEdit,fieldTransitionFn=this.fieldTransitionFn,form=this.form,ruleFieldIds=this.ruleFieldIds,isV3Api=this.isV3Api,preFillValueForCreationObj=this.preFillValueForCreationObj,currentSiteId=this.currentSiteId,modifyFieldPropsHook=this.modifyFieldPropsHook,formSections=[];if("formBuilder"===module)formSections=sections;else{var _ref8=form||{},_sections=_ref8.sections;formSections=_sections}constant/* default */.Z.TASKS_ALLOWED_MODULES_HASH;return fields.map((function(field){var _field=field,displayTypeEnum=_field.displayTypeEnum,value=_field.value,required=_field.required,lookupModuleName=_field.lookupModuleName,name=_field.name,config=_field.config,hideField=_field.hideField,id=_field.id,validations=_field.validations;if(!(0,validation/* isEmpty */.xb)(modifyFieldPropsHook)&&(0,validation/* isFunction */.mf)(modifyFieldPropsHook)){var modifiedField=modifyFieldPropsHook(field);(0,validation/* isEmpty */.xb)(modifiedField)||(field=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),modifiedField))}var isLookupSimpleField=(0,utils_field/* isLookupSimple */.qu)(field)||"SPACECHOOSER"===field.displayTypeEnum,isLookupMulti=(0,utils_field/* isMultiLookup */.On)(field),isLookupField=(0,field_utils/* isLookupDropDownField */.Nz)(field)||"SPACECHOOSER"===field.displayTypeEnum,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field);if(
// To set filters and criteria values that are configured onLoad form rules
"formBuilder"!==module&&_this.executeFilterRelatedActions({field:field}),constant/* default */.Z.PARSE_FIELDS_HASH.includes(displayTypeEnum)&&!(0,validation/* isEmpty */.xb)(value)&&isString_default()(value)&&(
// Special hanlding for deviation type forms
value.startsWith("${")||"NUMBER"===displayTypeEnum||_this.isStringSystemEnumField(field)?field.value=value:field.value=_this.parseDefaultValue(value)),(isLookupSimpleField||isResourceField||isLookupMulti)&&!(0,validation/* isEmpty */.xb)(lookupModuleName)&&("siteId"===name?_this.siteFieldHandler({field:field,currentSiteId:currentSiteId}):_this.lookupFieldHandler({formSections:formSections,field:field,isEdit:isEdit,preFillValueForCreationObj:preFillValueForCreationObj,isLookupField:isLookupField,isResourceField:isResourceField,isLookupMulti:isLookupMulti})),"SIGNATURE"===displayTypeEnum&&(0,validation/* isEmpty */.xb)(config)&&_this.$set(field,"config",{canShowColorPalette:!1}),"REQUESTER"===displayTypeEnum&&_this.fetchRequesterList(field),"TEAMSTAFFASSIGNMENT"===displayTypeEnum&&(0,validation/* isEmpty */.xb)(field.value)&&(field.value={assignedTo:{id:""},assignmentGroup:{id:""}}),"DURATION"===displayTypeEnum&&_this.durationFieldHandler({field:field}),"NUMBER"!==displayTypeEnum&&"DECIMAL"!==displayTypeEnum||"formBuilder"!==module||_this.numberDecimalFieldHandler({field:field}),"SELECTBOX"===displayTypeEnum){var _field2=field,fieldObj=_field2.field,_value=_field2.value;if(_this.isMultiple(field)&&(0,validation/* isEmpty */.xb)(_value)&&(field.value=[]),!(0,validation/* isEmpty */.xb)(fieldObj)&&!(0,validation/* isEmpty */.xb)(fieldObj.enumMap)){var _fieldObj$values=fieldObj.values,values=void 0===_fieldObj$values?[]:_fieldObj$values,options=(0,utils_utility_methods/* constructEnumFieldOptions */.rr)(values);_this.$set(field,"options",options)}}if("URGENCY"===displayTypeEnum){var _options=constant/* default */.Z.URGENCY_FIELD_OPTIONS;_this.$set(field,"options",_options)}if("SADDRESS"!==displayTypeEnum&&"ADDRESS"!==displayTypeEnum||isEdit)if("QUOTE_ADDRESS"!==displayTypeEnum||isEdit){if("GEO_LOCATION"===displayTypeEnum&&!isEdit){var _ref9=field||{},_value2=_ref9.value;(0,validation/* isEmpty */.xb)(_value2)||((0,validation/* isObject */.Kn)(_value2)||(_value2=JSON.parse(_value2)),_this.$set(field,"value",_value2))}}else _this.$set(field,"value",(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS)),_this.formModel&&(_this.$set(_this.formModel,"billToAddress",(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS)),_this.$set(_this.formModel,"shipToAddress",(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS)));else _this.$set(field,"value",(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS));if("LINEITEMS"===displayTypeEnum&&!isEdit){var defaultItem=[];defaultItem.push((0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.LINE_ITEM_DEFAULTS)),_this.$set(field,"value",defaultItem),constant/* default */.Z.QUOTE_LINE_ITEMS_ADDITIONAL_FIELDS.forEach((function(additionalField){_this.formModel&&("tax"===additionalField?_this.$set(_this.formModel,additionalField,{id:null}):_this.$set(_this.formModel,additionalField,null))}))}if("INVREQUEST_LINE_ITEMS"===displayTypeEnum&&!isEdit){var _defaultItem=[];_defaultItem.push((0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.INV_LINE_ITEM_DEFAULTS)),_this.$set(field,"value",_defaultItem)}if("BUDGET_AMOUNT"===displayTypeEnum&&!isEdit&&"formBuilder"!==module){var _defaultItem2={incomes:[(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.budgetIncomeDefaults)],expenses:[(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.budgetExpenseDefaults)]};_this.$set(field,"value",_defaultItem2)}if("FACILITY_AVAILABILITY"!==displayTypeEnum||isEdit||"formBuilder"===module||_this.$set(field,"value",(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.facilityAvailabilityDefaults)),"FACILITY_BOOKING_SLOTS"!==displayTypeEnum||!(0,validation/* isEmpty */.xb)(value)&&(0,validation/* isArray */.kJ)(value)||(
// TODO Default value is getting set as '[]' when we open form builder Check with ahielan and fix this
_this.$set(field,"value",[]),_this.formModel&&_this.$set(_this.formModel,"bookingDate",null)),"QUOTE_LINE_ITEMS"===displayTypeEnum&&!isEdit){var _defaultItem3=[];_defaultItem3.push((0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.QUOTE_LINE_ITEM_DEFAULTS)),_this.$set(field,"value",_defaultItem3),constant/* default */.Z.QUOTE_LINE_ITEMS_ADDITIONAL_FIELDS.forEach((function(additionalField){_this.formModel&&("tax"===additionalField?_this.$set(_this.formModel,additionalField,{id:null}):_this.$set(_this.formModel,additionalField,null))}))}return"ATTACHMENT"===displayTypeEnum&&isV3Api&&isEdit&&_this.fetchAttachments(field),(0,validation/* isEmpty */.xb)(fieldTransitionFn)||(field=fieldTransitionFn(field)),"formBuilder"!==module&&"NOTES"!==displayTypeEnum&&(_this.constructFormModel(field),
// To hide or show or disable or enable fields that are configured for onLoad form rules
_this.executeViewRelatedActions({field:field}),
// Skip validtion for hidden fields, have to revisit while implementing form rules
(required&&!hideField||!(0,validation/* isEmpty */.xb)(validations))&&
// Setup validation for mandatory fields
_this.setupValidation(field)),
// Setting trigger fields
field.isTriggerField=(ruleFieldIds||[]).includes(id),field}))},fetchRequesterList:function(field){var _this2=this,url="/setup/portalusers";http/* default */.ZP.get(url).then((function(_ref10){var _ref10$data=_ref10.data,data=void 0===_ref10$data?{}:_ref10$data,_data$users=data.users,users=void 0===_data$users?[]:_data$users,options=[];(0,validation/* isEmpty */.xb)(users)||(options=users.map((function(user){return{label:user.email,value:user.id}}))),_this2.$set(field,"options",options)})).catch((function(_ref11){var message=_ref11.message;_this2.$message.error(message)}))},fetchAttachments:function(_ref12){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var lookupModuleName,_ref13,parentId,id,_yield$API$get,error,data,_ref14,attachments;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(lookupModuleName=_ref12.lookupModuleName,_ref13=_this3.moduleData||{},parentId=_ref13.parentId,id=_ref13.id,!(0,validation/* isEmpty */.xb)(id)){_context.next=4;break}return _context.abrupt("return");case 4:return _context.next=6,api/* API */.bl.get("/attachment",{module:lookupModuleName,recordId:parentId||id});case 6:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_ref14=data||[],attachments=_ref14.attachments,_this3.formModel[lookupModuleName]=attachments,_this3.attachments=attachments.map((function(file){var name=file.fileName,size=file.fileSize,type=file.contentType,bytes=(0,filters/* prettyBytes */.Hi)(size);return{name:name,size:size,bytes:bytes,type:type,status:null,error:null}})));case 10:case"end":return _context.stop()}}),_callee)})))()},constructFormModel:function(field){var _this4=this,name=field.name,value=field.value,displayTypeEnum=field.displayTypeEnum,displayType=field.displayType,config=field.config,_field$scheduleValueO=field.scheduleValueObj,scheduleValueObj=void 0===_field$scheduleValueO?{}:_field$scheduleValueO,id=field.id,lookupModuleName=field.lookupModuleName,preFillValueForCreationObj=this.preFillValueForCreationObj,isEdit=this.isEdit,form=this.form,isLiveSubForm=this.isLiveSubForm,_form$onLoadActionsFi=form.onLoadActionsFieldIds,onLoadActionsFieldIds=void 0===_form$onLoadActionsFi?[]:_form$onLoadActionsFi,_form$initialActionsL=form.initialActionsList,initialActionsList=void 0===_form$initialActionsL?[]:_form$initialActionsL,rule={};
// To set values that are configured for onLoad form rules
if(onLoadActionsFieldIds.includes(id)){var rules=this.getRulesById({initialActionsList:initialActionsList,id:id});rule=this.getSetActionRule({rules:rules})}if((0,validation/* isEmpty */.xb)(rule)){if(!(0,validation/* isEmpty */.xb)(preFillValueForCreationObj[name])&&!isEdit&&!isLiveSubForm){
// To prefill values in the query param
var paramValue=preFillValueForCreationObj[name];value=(0,field_utils/* isChooserTypeField */.Rq)(field)?{id:this.parseDefaultValue(paramValue)}:constant/* default */.Z.PARSE_FIELDS_HASH.includes(displayTypeEnum)?this.parseDefaultValue(paramValue):paramValue}if(56!==displayType||(0,validation/* isEmpty */.xb)(config)){if("QUOTE_ADDRESS"===displayTypeEnum){var billToAddress=field.billToAddress,shipToAddress=field.shipToAddress;(0,validation/* isEmpty */.xb)(billToAddress)?this.$set(this.formModel,"billToAddress",(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS)):this.$set(this.formModel,"billToAddress",billToAddress),(0,validation/* isEmpty */.xb)(shipToAddress)?this.$set(this.formModel,"shipToAddress",(0,utility_methods/* deepCloneObject */.kh)(constant/* default */.Z.ADDRESS_FIELD_DEFAULTS)):this.$set(this.formModel,"shipToAddress",shipToAddress)}else if(["LINEITEMS","QUOTE_LINE_ITEMS"].includes(displayTypeEnum))this.$set(this.formModel,"".concat(name),value),constant/* default */.Z.QUOTE_LINE_ITEMS_ADDITIONAL_FIELDS.forEach((function(additionalField){var value=_this4.$getProperty(field,"".concat(additionalField),null);"tax"===additionalField&&(0,validation/* isEmpty */.xb)(value)&&(value={id:null}),_this4.$set(_this4.formModel,additionalField,value)}));else if("FACILITY_BOOKING_SLOTS"===displayTypeEnum)this.$set(this.formModel,"".concat(name),value||[]),this.$set(this.formModel,"bookingDate",field.bookingDate);else if("URL_FIELD"===displayTypeEnum){var _ref15=config||{},showName=_ref15.showName,_value3={href:""};showName&&(_value3=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_value3),{},{name:""})),this.$set(this.formModel,"".concat(name),_value3||{})}else if(!(0,validation/* isEmpty */.xb)(name))if((0,utils_field/* isDropdownTypeField */.aK)(field)||"SPACECHOOSER"===displayTypeEnum||(0,field_utils/* isChooserTypeField */.Rq)(field)&&(0,validation/* isEmpty */.xb)(value)||(0,utils_field/* isMultiLookup */.On)(field))this.isMultiple(field)?this.$set(this.formModel,"".concat(name),value||[]):(0,utils_field/* isMultiLookup */.On)(field)?((0,validation/* isEmpty */.xb)(value)||("string"===typeof value&&(value=JSON.parse(value)),value=value.map((function(value){var _ref16=value||{},id=_ref16.id;return(0,validation/* isEmpty */.xb)(id)?{id:value}:value}))),this.$set(this.formModel,"".concat(name),(0,validation/* isEmpty */.xb)(value)?[]:value.map((function(value){return(value||{}).id})))):this.$set(this.formModel,"".concat(name),{id:value});else{var _ref17=field||{},fieldObj=_ref17.field;"ATTACHMENT"===displayTypeEnum?this.$set(this.formModel,"".concat(lookupModuleName),[]):"FORMULA_FIELD"===displayTypeEnum||"FORMULA_FIELD_TEMP"===displayTypeEnum?((0,validation/* isEmpty */.xb)(value)&&(value={workflow:null}),this.$set(this.formModel,"".concat(name),value)):!(0,validation/* isEmpty */.xb)(fieldObj)&&(0,utils_field/* isDateTypeField */.S6)(fieldObj)&&value<=0?this.$set(this.formModel,"".concat(name),null):this.$set(this.formModel,"".concat(name),value)}}else{var endFieldName=config.endFieldName,startFieldName=config.startFieldName,scheduleJsonName=config.scheduleJsonName,_scheduleValueObj$sta=scheduleValueObj.startFieldValue,startFieldValue=void 0===_scheduleValueObj$sta?null:_scheduleValueObj$sta,_scheduleValueObj$end=scheduleValueObj.endFieldValue,endFieldValue=void 0===_scheduleValueObj$end?null:_scheduleValueObj$end,_scheduleValueObj$sch=scheduleValueObj.scheduleJsonValue,scheduleJsonValue=void 0===_scheduleValueObj$sch?{}:_scheduleValueObj$sch,_scheduleValueObj$isR=scheduleValueObj.isRecurring,isRecurring=void 0!==_scheduleValueObj$isR&&_scheduleValueObj$isR;this.$set(this.formModel,"".concat(endFieldName),endFieldValue),this.$set(this.formModel,"".concat(startFieldName),startFieldValue),this.$set(this.formModel,"".concat(scheduleJsonName),scheduleJsonValue),this.$set(this.formModel,"isRecurring",isRecurring)}}else this.executeRules({rule:rule,selectedField:field,stopRecursiveRuleExecution:!0})},parseDefaultValue:function(value){return JSON.parse(value)},setupValidation:function(field){var _this5=this,name=field.name;if(!(0,validation/* isEmpty */.xb)(name))if(addressFieldsList.includes(name)){var addressProps=["street","city","state","zip","country"];addressProps.forEach((function(prop){_this5.pushValidationRules("".concat(field.name,".").concat(prop),field)}))}else this.pushValidationRules("".concat(field.name),field)},isEmailField:function(displayTypeEnum){return"EMAIL"===displayTypeEnum},pushValidationRules:function(fieldName,field){var _this6=this,displayTypeEnum=field.displayTypeEnum,lookupModuleName=field.lookupModuleName,trigger=constant/* default */.Z.FIELD_TYPE_DROPDOWNHASH.includes(displayTypeEnum)?"change":"blur",isAttachmentField="ATTACHMENT"===displayTypeEnum;trigger="TEAMSTAFFASSIGNMENT"===displayTypeEnum?"change":trigger,fieldName=isAttachmentField?lookupModuleName:fieldName,this.rules[fieldName]=[],this.rules[fieldName].push({validator:function(rule,value,callback){_this6.validateFields({rule:rule,field:field,value:value,callback:callback})},trigger:trigger})},validateFields:function(_ref18){var rule=_ref18.rule,field=_ref18.field,value=_ref18.value,callback=_ref18.callback,ruleField=rule.field,displayName=field.displayName,displayTypeEnum=field.displayTypeEnum,_field$value=field.value,fieldValue=void 0===_field$value?{}:_field$value,name=field.name,validations=field.validations,required=field.required,lookupModuleName=field.lookupModuleName,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field),isMultipleField=this.isMultiple(field),formModel=this.formModel,parentSiteId=this.parentSiteId,isLiveSubForm=this.isLiveSubForm,isV3Api=this.isV3Api;if(!(0,validation/* isEmpty */.xb)(parentSiteId)&&isLiveSubForm&&"siteId"===name)callback();else if(ruleField.includes("address.")){var charIndex=ruleField.indexOf("."),addressProp=ruleField.substring(charIndex+1);(0,validation/* isEmpty */.xb)(fieldValue[addressProp])?callback(new Error("Please input ".concat(addressProp))):callback()}else if(isResourceField)(0,validation/* areValuesEmpty */.sD)(value)?callback(new Error("Please input ".concat(displayName))):callback();else if("TEAMSTAFFASSIGNMENT"===displayTypeEnum){var _ref19=formModel[name]||{},assignedTo=_ref19.assignedTo,assignmentGroup=_ref19.assignmentGroup,_ref20=assignedTo||{},assignedToId=_ref20.id,_ref21=assignmentGroup||{},assignmentGroupId=_ref21.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(0,validation/* isEmpty */.xb)(assignmentGroupId)?callback(new Error("Please input ".concat(displayName))):callback()}else if("CURRENCY"===displayTypeEnum){var _ref22=this.$getProperty(this,"account.data.currencyInfo")||{},multiCurrencyEnabled=_ref22.multiCurrencyEnabled,_ref23=formModel[name]||{},currencyCode=_ref23.currencyCode,currencyValue=_ref23.currencyValue;multiCurrencyEnabled&&((0,validation/* isEmpty */.xb)(currencyCode)||(0,validation/* isEmpty */.xb)(currencyValue))||(0,validation/* isEmpty */.xb)(currencyValue)?callback(new Error("Please input ".concat(displayName))):callback()}else if("MULTI_CURRENCY"===displayTypeEnum){var _value4=formModel[name]||{};(0,validation/* isEmpty */.xb)(_value4)?callback(new Error("Please input ".concat(displayName))):callback()}else if("FORMULA_FIELD_TEMP"===displayTypeEnum||"FORMULA_FIELD"===displayTypeEnum){var formulaFieldValue=formModel[name];if(!(0,validation/* isEmpty */.xb)(formulaFieldValue)){var workflow=formulaFieldValue.workflow;if(!(0,validation/* isEmpty */.xb)(workflow)){var workflowUIMode=workflow.workflowUIMode,workflowString=workflow.workflowString,resultEvaluator=workflow.resultEvaluator;(2===workflowUIMode&&!(0,validation/* isEmpty */.xb)(workflowString)||3===workflowUIMode||1===workflowUIMode&&!(0,validation/* isEmpty */.xb)(resultEvaluator))&&callback()}}callback(new Error("Please input ".concat(displayName)))}else if(
// TODO: Have to check fdatepicker component, as it is returning NaN for empty value
"DATE"!==displayTypeEnum&&"DATETIME"!==displayTypeEnum||!isNaN(value))if("ATTACHMENT"===displayTypeEnum){var attachments=this.$getProperty(formModel,"".concat(lookupModuleName),[]);(0,validation/* isEmpty */.xb)(attachments)?callback(new Error("Please input ".concat(displayName))):callback()}else if("URL_FIELD"===displayTypeEnum){if(required&&!(0,validation/* isEmpty */.xb)(value)){var _ref24=value||{},href=_ref24.href;(0,validation/* isEmpty */.xb)(href)?callback(new Error("Please input a url")):callback()}}else if(isMultipleField)(0,validation/* isEmpty */.xb)(value)?callback(new Error("Please input ".concat(displayName))):callback();else if(constant/* default */.Z.FIELD_TYPE_DROPDOWNHASH.includes(displayTypeEnum)&&(0,validation/* isEmpty */.xb)(value.id))callback(new Error("Please input ".concat(displayName)));else if("daterange"!==displayTypeEnum||(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value))if("DECISION_BOX"!==displayTypeEnum||value)if(["NUMBER","DECIMAL"].includes(displayTypeEnum)&&isV3Api)(0,validation/* isNullOrUndefined */.le)(value)?callback(new Error("Please input ".concat(displayName))):callback();else if((0,validation/* isEmpty */.xb)(value)&&required)callback(new Error("Please enter ".concat(displayName)));else if((0,validation/* isEmpty */.xb)(validations))callback();else{var maxLength=validations.maxLength;!(0,validation/* isNullOrUndefined */.le)(value)&&value.length>maxLength?callback(new Error("Character limit of ".concat(maxLength," exceeded"))):(0,validation/* isEmpty */.xb)(value)||!this.isEmailField(displayTypeEnum)||common/* default */.Z.validateEmail(value)?callback():callback(new Error(this.$t("forms.field_permission.email_validation")))}else callback(new Error("Please input ".concat(displayName)));else callback(new Error("Please input ".concat(displayName)));else callback(new Error("Please input ".concat(displayName)))},isDropdownTypeFields:function(displayTypeEnum){return constant/* default */.Z.FIELD_TYPE_DROPDOWNHASH.includes(displayTypeEnum)},isResourceTypeFields:function(field){var displayTypeEnum=field.displayTypeEnum,lookupModuleName=field.lookupModuleName;return"WOASSETSPACECHOOSER"===displayTypeEnum&&"resource"===lookupModuleName},isStringSystemEnumField:function(field){var _ref25=field||{},fieldObj=_ref25.field,_ref26=fieldObj||{},dataTypeEnum=_ref26.dataTypeEnum;return["STRING_SYSTEM_ENUM"].includes(dataTypeEnum)},isMultiple:function(field){var _ref27=field||{},fieldObj=_ref27.field,_ref28=fieldObj||{},dataTypeEnum=_ref28.dataTypeEnum;return"MULTI_ENUM"===dataTypeEnum},showConfirmSiteSwitch:function(previousSiteId){var _this7=this,form=this.form,formModel=this.formModel,tasksList=this.tasksList,isLiveSubForm=this.isLiveSubForm;if(!(0,validation/* isEmpty */.xb)(form)){var sections=form.sections;if(!(0,validation/* isEmpty */.xb)(sections)){var lookupDropDownFields=sections.reduce((function(res,_ref29){var fields=_ref29.fields;return[].concat((0,toConsumableArray/* default */.Z)(res),(0,toConsumableArray/* default */.Z)(fields))}),[]).filter((function(field){var _ref30=field||{},config=_ref30.config,_ref31=config||{},_ref31$skipSiteFilter=_ref31.skipSiteFilter,skipSiteFilter=void 0!==_ref31$skipSiteFilter&&_ref31$skipSiteFilter;return!skipSiteFilter&&!(0,field_utils/* isSiteLookup */.Xs)(field)&&("TEAMSTAFFASSIGNMENT"===field.displayTypeEnum||(0,field_utils/* isLookupDropDownField */.Nz)(field)||(0,field_utils/* isChooserTypeField */.Rq)(field))||"SPACECHOOSER"===field.displayTypeEnum})),isAnyLookupFieldFilled=lookupDropDownFields.some((function(field){var displayTypeEnum=field.displayTypeEnum;if("TEAMSTAFFASSIGNMENT"===displayTypeEnum){var _ref32=formModel[field.name]||{},assignedTo=_ref32.assignedTo,assignmentGroup=_ref32.assignmentGroup,_ref33=assignedTo||{},assignedToId=_ref33.id,_ref34=assignmentGroup||{},assignmentGroupId=_ref34.id;return!(0,validation/* isEmpty */.xb)(assignedToId)||!(0,validation/* isEmpty */.xb)(assignmentGroupId)}return!(0,validation/* isEmpty */.xb)((formModel[field.name]||{}).id)})),isAnyTasksWithResource=(tasksList||[]).some((function(taskObj){var tasks=taskObj.tasks;return!(0,validation/* isEmpty */.xb)(tasks)&&tasks.some((function(task){return!(0,validation/* isEmpty */.xb)(task.resource.id)}))}));if(isAnyLookupFieldFilled||isAnyTasksWithResource){var htmlMessage=this.$t("forms.live_form.change_site");isLiveSubForm&&(htmlMessage=this.$t("forms.live_form.change_site_subform"));var dialogObj={title:this.$t("forms.live_form.change_site_heading"),htmlMessage:htmlMessage,rbDanger:!0,lbLabel:this.$t("common.products.no"),rbLabel:this.$t("common.products.yes")};this.$dialog.confirm(dialogObj).then((function(value){value?(_this7.resetLookupFields(lookupDropDownFields),isAnyTasksWithResource&&tasksList.forEach((function(taskObj){var tasks=taskObj.tasks;(0,validation/* isEmpty */.xb)(tasks)||tasks.forEach((function(task){return _this7.resetTaskResourceField(task)}))}))):_this7.$set(_this7.formModel,"siteId",{id:previousSiteId})}))}}}},resetLookupFields:function(lookupDropDownFields){var _this8=this;(0,validation/* isEmpty */.xb)(lookupDropDownFields)||lookupDropDownFields.forEach((function(field){var displayTypeEnum=field.displayTypeEnum,value={id:null};"TEAMSTAFFASSIGNMENT"===displayTypeEnum&&(value={assignedTo:{id:""},assignmentGroup:{id:""}}),_this8.$set(field,"selectedItems",[]),_this8.$set(_this8.formModel,"".concat(field.name),value)}))},resetTaskResourceField:function(selectedTask){selectedTask.resource={},selectedTask.readingFieldId=null,selectedTask.inputType=1,selectedTask.selectedLookupField.value={id:null},selectedTask.selectedLookupField.selectedItems=[]},addImgFile:function(props){var _ref35=props||{},data=_ref35.fileOrId,field=_ref35.field,isSubForm=_ref35.isSubForm,name=field.name;this.formModel[name]=data,this.clearError(name),this.onChangeHandler({field:field,isSubForm:isSubForm})},removeImgFile:function(props){var _ref36=props||{},field=_ref36.field,isSubForm=_ref36.isSubForm,name=field.name;this.formModel[name]=null,this.onChangeHandler({field:field,isSubForm:isSubForm})},openFassignment:function(event,field){var isDisabled=field.isDisabled;isDisabled&&event.stopPropagation()},onRecordSelected:function(prop){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref37,value,field,isSubForm,name,fieldObj,selectedItems,config,formModel,_selectedItems,selectedItem,_value5,resourceName,module,form,_ref38,resource,_ref39,id,sections,tenantField,params,_ref40,_ref40$filters,filters,tenantFilters,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_ref37=prop||{},value=_ref37.value,field=_ref37.field,isSubForm=_ref37.isSubForm,name=field.name,fieldObj=field.field,selectedItems=field.selectedItems,config=field.config,formModel=_this9.formModel,_this9.onChangeHandler({field:field,isSubForm:isSubForm}),"resource"!==name||(0,validation/* isEmpty */.xb)(fieldObj)){_context2.next=26;break}if((0,validation/* isEmpty */.xb)(value)?
// Reset space asset resource obj, when user clears the selected resource field
_this9.spaceAssetResourceObj={}:(_selectedItems=(0,slicedToArray/* default */.Z)(selectedItems,1),selectedItem=_selectedItems[0],_value5=selectedItem.value,resourceName=selectedItem.label,_this9.spaceAssetResourceObj={name:resourceName,id:_value5,config:config}),module=fieldObj.module,(0,validation/* isEmpty */.xb)(module)||"ticket"!==module.name){_context2.next=26;break}if(form=_this9.form,_ref38=formModel||{},resource=_ref38.resource,_ref39=resource||{},id=_ref39.id,(0,validation/* isEmpty */.xb)(form)){_context2.next=26;break}if(sections=form.sections,params={page:1,perPage:50},(0,validation/* isEmpty */.xb)(sections)||sections.forEach((function(section){return section.fields.forEach((function(field){"tenant"===field.name&&(tenantField=field)}))})),320===_this9.$org.id||(0,validation/* isEmpty */.xb)(id)||(0,validation/* isEmpty */.xb)(tenantField)){_context2.next=26;break}return _ref40=tenantField||{},_ref40$filters=_ref40.filters,filters=void 0===_ref40$filters?{}:_ref40$filters,tenantField.spaceId=id,tenantFilters={tenantspaces:{operatorId:88,relatedOperatorId:38,relatedFieldName:"tenant",filterFieldName:"space",value:[String(id)]}},tenantField.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),tenantFilters),_context2.next=22,(0,picklist/* getFieldOptions */._K)((0,objectSpread2/* default */.Z)({field:tenantField},params));case 22:_yield$getFieldOption=_context2.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this9.$message.error(error.message||"Error Occured"):tenantField.options=options;case 26:case"end":return _context2.stop()}}),_callee2)})))()},getSiteId:function(sections){var filteredSections=sections.filter((function(section){return!(0,validation/* isEmpty */.xb)(section.fields)})),site=filteredSections.reduce((function(res,_ref41){var fields=_ref41.fields;return[].concat((0,toConsumableArray/* default */.Z)(res),(0,toConsumableArray/* default */.Z)(fields))}),[]).filter((function(field){return"siteId"===field.name}));return(0,validation/* isEmpty */.xb)(site)?null:site[0].value},getResourceId:function(){var formModel=this.formModel;if(!(0,validation/* isEmpty */.xb)(formModel)){var resourceValue=formModel["resource"],_ref42=resourceValue||{},id=_ref42.id;return id}return null},getFieldByName:function(props){var name=props.name,form=this.form,_ref43=form||{},sections=_ref43.sections,field={};return sections.forEach((function(section){if(!(0,validation/* isEmpty */.xb)(section)){var fields=section.fields;!(0,validation/* isEmpty */.xb)(fields)&&(0,validation/* isEmpty */.xb)(field)&&(field=fields.find((function(field){return field.name===name})))}})),field},getStringEnumMap:function(field){for(var _ref44=field||{},fieldObj=_ref44.field,_ref45=fieldObj||{},enumMap=_ref45.enumMap,options=[],enumArr=Object.entries(enumMap||{}),_i=0,_enumArr=enumArr;_i<_enumArr.length;_i++){var _enumArr$_i=(0,slicedToArray/* default */.Z)(_enumArr[_i],2),key=_enumArr$_i[0],value=_enumArr$_i[1],option={label:key,value:value};options.push(option)}return options},calculateExchangeRate:function(rateObj){var _this10=this,_ref46=rateObj||{},oldExchangeRate=_ref46.oldExchangeRate,currencyCode=_ref46.currencyCode,lineItemObj=_ref46.lineItemObj,exchangeRate=_ref46.exchangeRate,sections=this.$getProperty(this,"form.sections",[]),_ref47=this.initialCurrency||{},initCurrencyCode=_ref47.currencyCode,initExchangeRate=_ref47.exchangeRate;if((0,validation/* isEmpty */.xb)(oldExchangeRate)){var oldCurrency=(this.currencyList||[]).find((function(cur){return cur.currencyCode===_this10.oldCurrencyCode}));oldExchangeRate=(null===oldCurrency||void 0===oldCurrency?void 0:oldCurrency.currencyCode)===initCurrencyCode?initExchangeRate:null===oldCurrency||void 0===oldCurrency?void 0:oldCurrency.exchangeRate}rateObj.oldExchangeRate=oldExchangeRate,sections.forEach((function(section){_this10.formModel=(section.fields||[]).reduce((function(formModel,field){var _ref48=field||{},name=_ref48.name,displayTypeEnum=_ref48.displayTypeEnum,value=formModel[name],lineItemList=["QUOTE_LINE_ITEMS","LINEITEMS"],allowCalculateCurrency=!(0,validation/* isEmpty */.xb)(value)&&(0,validation/* isEmpty */.xb)(lineItemObj),lineItems=formModel.lineItems;if("MULTI_CURRENCY"===displayTypeEnum&&allowCalculateCurrency&&(lineItems=(lineItems||[]).map((function(item){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},item),{},{currencyCalculated:!1})})),formModel[name]=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,value)),lineItemList.includes(displayTypeEnum)){var _formModel=formModel,adjustmentsCost=_formModel.adjustmentsCost,discountAmount=_formModel.discountAmount,miscellaneousCharges=_formModel.miscellaneousCharges,shippingCharges=_formModel.shippingCharges,_ref49=lineItemObj||{},type=_ref49.type,typeId=_ref49.typeId;(0,validation/* isEmpty */.xb)(typeId)?formModel.lineItems=(lineItems||[]).map((function(item){var _ref52=item||{},unitPrice=_ref52.unitPrice,currencyCalculated=_ref52.currencyCalculated;return unitPrice=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,unitPrice),currencyCalculated=!(0,validation/* isEmpty */.xb)(unitPrice),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},item),{},{unitPrice:unitPrice||null,currencyCalculated:currencyCalculated})})):formModel.lineItems=(lineItems||[]).map((function(item){var _ref50=item||{},unitPrice=_ref50.unitPrice,currencyCalculated=_ref50.currencyCalculated,_ref51=item[type]||{},id=_ref51.id;return typeId!==id||currencyCalculated||(unitPrice=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,unitPrice),currencyCalculated=!(0,validation/* isEmpty */.xb)(unitPrice)),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},item),{},{unitPrice:unitPrice||null,currencyCalculated:currencyCalculated})})),adjustmentsCost=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,adjustmentsCost),discountAmount=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,discountAmount),miscellaneousCharges=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,miscellaneousCharges),shippingCharges=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,shippingCharges),formModel=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formModel),{},{adjustmentsCost:adjustmentsCost,discountAmount:discountAmount,miscellaneousCharges:miscellaneousCharges,shippingCharges:shippingCharges})}if("BUDGET_AMOUNT"===displayTypeEnum){var _ref53=_this10.formModel||{},budgetamount=_ref53.budgetamount,_ref54=budgetamount||{},expenses=_ref54.expenses,incomes=_ref54.incomes;expenses=(expenses||[]).map((function(expense){var _ref55=expense||{},yearlyAmount=_ref55.yearlyAmount;yearlyAmount=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,yearlyAmount);var _ref56=expense||{},monthlyAmountSplitUp=_ref56.monthlyAmountSplitUp;return monthlyAmountSplitUp=(monthlyAmountSplitUp||[]).map((function(monthlyAmt){var _ref57=monthlyAmt||{},monthlyAmount=_ref57.monthlyAmount;return{monthlyAmount:(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,monthlyAmount),currencyCode:currencyCode,exchangeRate:exchangeRate}})),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},expense||{}),{},{yearlyAmount:yearlyAmount,monthlyAmountSplitUp:monthlyAmountSplitUp})})),incomes=(incomes||[]).map((function(income){var _ref58=income||{},yearlyAmount=_ref58.yearlyAmount;yearlyAmount=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,yearlyAmount);var _ref59=income||{},monthlyAmountSplitUp=_ref59.monthlyAmountSplitUp;return monthlyAmountSplitUp=(monthlyAmountSplitUp||[]).map((function(monthlyAmt){var _ref60=monthlyAmt||{},monthlyAmount=_ref60.monthlyAmount;return{monthlyAmount:(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,monthlyAmount),currencyCode:currencyCode,exchangeRate:exchangeRate}})),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},income||{}),{},{yearlyAmount:yearlyAmount,monthlyAmountSplitUp:monthlyAmountSplitUp})})),formModel=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formModel||{}),{},{budgetamount:{expenses:expenses,incomes:incomes}})}return formModel}),_this10.formModel)})),(this.oldCurrencyCode!==currencyCode||(0,validation/* isEmpty */.xb)(this.oldCurrencyCode))&&(this.oldCurrencyCode=currencyCode)},setCurrencyCodeOnChange:function(currencyCode,exchangeRate){if(!(0,validation/* isEmpty */.xb)(currencyCode)){var _ref61=this.currencyData||{},initialCurrencyCode=_ref61.initialCurrencyCode,currencyData={currencyCode:currencyCode,exchangeRate:exchangeRate,oldCurrencyCode:this.oldCurrencyCode,initialCurrencyCode:initialCurrencyCode};(0,validation/* isEmpty */.xb)(initialCurrencyCode)&&(currencyData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},currencyData),{},{initialCurrencyCode:currencyCode})),this.$set(this,"currencyData",currencyData),this.$set(this.formModel,"currencyCode",currencyCode),this.$set(this.formModel,"exchangeRate",exchangeRate)}},setInitialCurrency:function(){if((0,validation/* isEmpty */.xb)(this.initialCurrency)){var _ref62=this.moduleData||{},currencyCode=_ref62.currencyCode,exchangeRate=_ref62.exchangeRate;this.initialCurrency={currencyCode:currencyCode,exchangeRate:exchangeRate}}this.setHasMultiCurrencyFieldInModel()},setHasMultiCurrencyFieldInModel:function(){var sections=this.$getProperty(this,"form.sections",[]),filteredFields=[],fields=sections.reduce((function(fields,section){return fields=[].concat((0,toConsumableArray/* default */.Z)(fields),(0,toConsumableArray/* default */.Z)(section.fields||[])),fields}),[]);filteredFields=(fields||[]).filter((function(field){return"MULTI_CURRENCY"===field.displayTypeEnum})),this.hasMultiCurrencyFieldInModel=!(0,validation/* isEmpty */.xb)(filteredFields)}}},forms_WebFormMixinvue_type_script_lang_js=WebFormMixinvue_type_script_lang_js,WebFormMixin_component=(0,componentNormalizer/* default */.Z)(forms_WebFormMixinvue_type_script_lang_js,WebFormMixin_render,WebFormMixin_staticRenderFns,!1,null,null,null)
/* harmony default export */,WebFormMixin=WebFormMixin_component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
},
/***/153046:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TasksMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var render,staticRenderFns,objectSpread2=__webpack_require__(595082),constant=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(354754)),validation=__webpack_require__(990260),TasksMixinvue_type_script_lang_js={methods:{serializeTaskData:function(task,index){
// TODO: Have to move all these handling to server side
if(4===Number(task.inputType)&&"safeLimit"===task.validation){var readingRules=constant/* default */.Z.TASK_READING_RULES_SAFELIMIT;readingRules.workflow.expressions=[{name:"a",constant:"${inputValue}"},{name:"b",constant:task.minSafeLimit},{name:"c",constant:task.maxSafeLimit}],readingRules.id=task.inputValidationRuleId,task.readingRules.push(readingRules)}if(5===Number(task.inputType)?task.options=task.options.map((function(option){return option.name})):task.options=[],2!==Number(task.inputType)&&(task.readingFieldId=null),!(0,validation/* isEmpty */.xb)(task.resource)){var resourceObj={};(0,validation/* isEmpty */.xb)(task.resource.id)?resourceObj=null:resourceObj.id=task.resource.id,task.resource=resourceObj,delete task.selectedLookupField}for(var taskObj in(0,validation/* isEmpty */.xb)(task.taskReadings)||delete task.taskReadings,task)(0,validation/* isEmpty */.xb)(task[taskObj])&&delete task[taskObj];
// TODO: Have to move this to server side
return task.sequence=index,task},
/*
      Data from server,
      tasks: {
        "Untitled Section": [
          {
            ...task1
          },
          {
            ...task2
          }
          ...
        ]
      }
      after deserializing data,
      tasksList: [
        {
          section: "Untitled Section",
          tasks: [
            {
              ...task1
            },
            {
              ...task2
            }
            ...
          ]
        }
      ]
    */
deserializeTaskData:function(jobPlan){var _jobPlan$tasks=jobPlan.tasks,tasks=void 0===_jobPlan$tasks?{}:_jobPlan$tasks,tasksList=[],_loop=function(task){var taskArr=tasks[task],taskObj={tasks:[]};taskArr.forEach((function(item){var taskItem={visibility:!1};if(taskObj.section=task,
// In client, to check the enable input checkbox for the task
item.inputType>1&&(item.enableInput=!0),(0,validation/* isEmpty */.xb)(item.options))item.options=constant/* default */.Z.TASK_DEFAULT_OPTIONS;else{var itemOptions=item.options.map((function(option){var optionMap={};return optionMap.name=option,optionMap}));item.options=itemOptions,taskItem.defaultValue=item.defaultValue}
// TODO: Change the inputtype as number
item.inputType=String(item.inputType),constant/* default */.Z.TASK_RESOURCE_PROPS.forEach((function(prop){var value=item[prop];"resource"===prop?(0,validation/* isEmpty */.xb)(value)?(taskItem[prop]={name:""},taskItem.selectedLookupField=(0,objectSpread2/* default */.Z)({},constant/* default */.Z.RESOURCE_DEFAULT_OBJ)):(taskItem[prop]=value,taskItem.selectedLookupField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},constant/* default */.Z.RESOURCE_DEFAULT_OBJ),{},{selectedItems:[{name:value.name,id:value.id,resourceType:value.resourceType}],value:{id:value.id}})):taskItem[prop]=value})),taskItem.readingRules=[],taskObj.tasks.push(taskItem)})),tasksList.push(taskObj)};for(var task in tasks)_loop(task);return tasksList}}},tasks_TasksMixinvue_type_script_lang_js=TasksMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tasks_TasksMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TasksMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.constructor.js
},
/***/658774:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUrlField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/FUrlField.vue?vue&type=template&id=aa9ae77a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"url-container"},[_c("div",{staticClass:"url-field"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",disabled:_vm.isDisabled,placeholder:"https://"},model:{value:_vm.urlFieldValue.href,callback:function($$v){_vm.$set(_vm.urlFieldValue,"href",$$v)},expression:"urlFieldValue.href"}},[_c("template",{staticClass:"title",slot:"prepend"},[_vm._v(" "+_vm._s(_vm.$t("common.markdown.url_")))])],2)],1),_vm.showName?_c("div",{staticClass:"url-field"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"text",disabled:_vm.isDisabled,placeholder:_vm.$t("setup.setupLabel.link_name")},model:{value:_vm.urlFieldValue.name,callback:function($$v){_vm.$set(_vm.urlFieldValue,"name",$$v)},expression:"urlFieldValue.name"}},[_c("template",{staticClass:"title",slot:"prepend"},[_c("div",{staticClass:"name-field"},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")])])],2)],1):_vm._e()])},staticRenderFns=[],validation=__webpack_require__(990260),FUrlFieldvue_type_script_lang_js={props:["field","isDisabled","config","isEdit","value"],data:function(){return{showName:!1}},created:function(){this.prefillUrlField()},watch:{config:{handler:function(newVal,oldVal){if(newVal!==oldVal){var config=this.config;this.showName=(config||{}).showName}},immediate:!0}},computed:{urlFieldValue:{get:function(){var _this$value=this.value,value=void 0===_this$value?{}:_this$value;return(0,validation/* isEmpty */.xb)(value)?value={href:"",name:""}:"string"===typeof value&&(value={href:value}),value},set:function(value){this.$emit("input",value)}}},methods:{prefillUrlField:function(){var field=this.field,_ref=field||{},value=_ref.value;"string"===typeof value&&(value={href:value}),(0,validation/* isEmpty */.xb)(value)||this.$set(this,"urlFieldValue",value)}}},components_FUrlFieldvue_type_script_lang_js=FUrlFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUrlFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUrlField=component.exports},
/***/189494:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TasksLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/tasks-creation/TasksLayout.vue?vue&type=template&id=cdcc8864&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"task-container",class:[_vm.isTasksEmpty?"task-empty-container":""]},[_vm.isTasksEmpty?_c("div",{staticClass:"text-center"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/task",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label mB10"}),_c("el-button",{staticClass:"task-add-btn empty mT5",attrs:{"data-test-selector":""+_vm.$t("maintenance._workorder.add_task")},on:{click:function($event){return _vm.addNewSection()}}},[_vm.isPreRequisite?_vm._e():_c("img",{attrs:{src:__webpack_require__(511423)}}),_c("span",{staticClass:"btn-label mL5"},[_vm._v(" "+_vm._s(_vm.sectionButtonTitle)+" ")])])],1):_vm._e(),_c("TasksList",{ref:"task-list-jp",attrs:{id:"task-list-container",taskList:_vm.taskList,disableDrag:_vm.disableDrag,isPreRequisite:_vm.isPreRequisite,isJobPlan:_vm.isJobPlan,formModel:_vm.formModel},on:{openTaskSetting:_vm.openTaskSetting,openSectionSetting:_vm.openSectionSetting}}),_vm.showSectionSettings?_c("TaskSectionDetails",{attrs:{showSectionSettings:_vm.showSectionSettings,selectedSection:_vm.selectedSection,isPreRequisite:_vm.isPreRequisite,formModel:_vm.formModel},on:{"update:showSectionSettings":function($event){_vm.showSectionSettings=$event},"update:show-section-settings":function($event){_vm.showSectionSettings=$event},sectionUpdated:_vm.updateSection}}):_vm._e(),_vm.canShowTaskDetails?_c("TaskDetails",{attrs:{canShowTaskDetails:_vm.canShowTaskDetails,selectedTaskInfo:_vm.selectedTaskInfo,isPreRequisite:_vm.isPreRequisite,selectedTask:{},formModel:_vm.formModel},on:{"update:canShowTaskDetails":function($event){_vm.canShowTaskDetails=$event},"update:can-show-task-details":function($event){_vm.canShowTaskDetails=$event},taskUpdated:_vm.updateTaskDetails}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),cloneDeep=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(162506),__webpack_require__(976801),__webpack_require__(150361)),cloneDeep_default=__webpack_require__.n(cloneDeep),uuid=__webpack_require__(455877),validation=__webpack_require__(990260),TaskSectionDetailsvue_type_template_id_f59b61e6_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container jp-task-dialog",attrs:{visible:_vm.showSectionSettings,"append-to-body":!0,title:_vm.dialogTitle,width:"45%","before-close":_vm.cancelSectionSettings},on:{"update:visible":function($event){_vm.showSectionSettings=$event}}},[_c("div",{staticClass:"task-section-dialog jp-section-dialog "},[_c("div",{staticClass:"jp-banner-space"},[_c("div",{class:_vm.bannerClass},[_c("i",{staticClass:"fa",class:_vm.bannerIcon,attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.bannerText)+" ")])]),_vm.isPreRequisite?[_c("div",{staticClass:"pL20 pT10 pR10 width100"},[_c("div",{staticClass:"scope-heading mT5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.prereq_type"))+" ")]),_c("el-checkbox",{staticClass:"mT15 mL5 scope-txt14 scope-border",model:{value:_vm.sectionSettingsObj.enableOption,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"enableOption",$$v)},expression:"sectionSettingsObj.enableOption"}},[_vm._v(_vm._s(_vm.$t("jobplan.enable_option")))])],1),_c("div",{staticClass:"pL20 pR10 mT15"},[_c("div",{staticClass:"scope-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.sectionSettingsObj.options,(function(option,index){return _c("el-row",{key:index,staticClass:"mT20"},[_c("el-col",{attrs:{span:20}},[_c("el-input",{staticClass:"fc-input-full-border2 width500 task-option-input",attrs:{type:"text",placeholder:"Option "+(index+1)},model:{value:option.value,callback:function($$v){_vm.$set(option,"value",$$v)},expression:"option.value"}},[_c("template",{slot:"prepend"},[_vm._v(_vm._s(index+1))])],2)],1)],1)}))],2),_c("div",{staticClass:"scope-seperator"}),_c("div",{staticClass:"pL20 pR10 mT10"},[_c("div",{staticClass:"scope-heading"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.validation"))+" ")]),_c("el-checkbox",{staticClass:"mT15 mL5 scope-border",model:{value:_vm.sectionSettingsObj.attachmentRequired,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"attachmentRequired",$$v)},expression:"sectionSettingsObj.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("jobplan.photo_mandatory")))])],1),_c("div",{staticClass:"scope-seperator"})]:[_c("div",{staticClass:"mT10 mB10 pL20 pR10"},[_c("div",{staticClass:"scope-txt14 mT30"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.section_name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10 width75",attrs:{placeholder:_vm.$t("common.placeholders.write_section_name")},model:{value:_vm.sectionSettingsObj.name,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"name",$$v)},expression:"sectionSettingsObj.name"}})],1),_c("div",{staticClass:"scope-seperator"}),_vm.canShowScope?_c("div",{staticClass:"mT10 mB10 pL20 pR10"},[_c("div",{staticClass:"scope-heading"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.section_scope"))+" ")]),_c("div",{staticClass:"jp-scope-desc mT5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.section_scope_desc"))+" ")]),_c("div",{staticClass:"d-flex mT15"},[_c("div",[_c("div",{staticClass:"scope-txt14  fw4"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.category"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 mT10  width250px",attrs:{clearable:"",filterable:"",placeholder:_vm.$t("jobplan.select_scope")},on:{change:function($event){return _vm.resetResources()}},model:{value:_vm.sectionSettingsObj.jobPlanSectionCategory,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"jobPlanSectionCategory",$$v)},expression:"sectionSettingsObj.jobPlanSectionCategory"}},_vm._l(_vm.scopeOptions,(function(key,label){return _c("el-option",{key:key,attrs:{label:label,value:Number(key)}})})),1)],1),_vm.canShowLookup?_c("div",{staticClass:"mL15"},[_c("div",{staticClass:"scope-txt14  fw4"},[_vm._v(" "+_vm._s(_vm.lookupDisplayName)+" ")]),_c("FLookupField",{ref:"section-resource-field",staticClass:"width250px mT10",attrs:{model:_vm.sectionSettingsObj.resource,field:_vm.selectedLookupField},on:{"update:model":function($event){return _vm.$set(_vm.sectionSettingsObj,"resource",$event)},recordSelected:_vm.setSelectedLookupValue,showLookupWizard:_vm.showLookupWizard}})],1):_vm._e()])]):_vm._e(),_vm.canShowScope?_c("div",{staticClass:"scope-seperator"}):_vm._e(),_c("div",{staticClass:"mT20 mB10 pL20 pR10"},[_c("div",{staticClass:"width100"},[_c("div",{staticClass:"scope-heading mT20"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.input_config"))+" ")]),_c("el-checkbox",{staticClass:"mT15 mL5 scope-txt14 scope-border",on:{change:_vm.resetInputs},model:{value:_vm.sectionSettingsObj.enableInput,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"enableInput",$$v)},expression:"sectionSettingsObj.enableInput"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.enable_input")))])],1)]),_vm.sectionSettingsObj.enableInput?_c("div",{staticClass:"pL55 pR10"},[_c("div",{},[_vm.sectionSettingsObj.enableInput?_c("div",{staticClass:"mT20 form-task-radio"},[_c("div",{staticClass:"scope-txt14 mT30"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.input_type"))+" ")]),_vm._l(_vm.inputOptions,(function(label,key){return _c("el-radio",{key:key,staticClass:"fc-radio-btn mT20 scope-border",attrs:{color:"secondary",label:Number(key)},on:{change:_vm.onSelectInput},model:{value:_vm.sectionSettingsObj.inputType,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"inputType",$$v)},expression:"sectionSettingsObj.inputType"}},[_vm._v(_vm._s(label))])}))],2):_vm._e(),_vm.isPreferredInputType("Option")||_vm.isPreferredInputType("Boolean")?_c("div",{staticClass:"mT30"},[_c("div",{staticClass:"scope-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.sectionSettingsObj.inputOptions,(function(option,index){return _c("div",{key:index,staticClass:"mT20"},[_c("el-row",{staticClass:"visibility-visible-actions"},[_c("el-col",{attrs:{span:20}},[_c("el-input",{staticClass:"fc-input-full-border2 width500 task-option-input",attrs:{type:"text",placeholder:"Option "+(index+1)},model:{value:option.value,callback:function($$v){_vm.$set(option,"value",$$v)},expression:"option.value"}},[_c("template",{slot:"prepend"},[_vm._v(_vm._s(index+1))])],2)],1),_vm.isPreferredInputType("Option")?_c("el-col",{staticClass:"visibility-hide-actions pointer mL10",attrs:{span:1}},[_c("div",{staticClass:"mT12",on:{click:function($event){return _vm.addTaskOption(_vm.sectionSettingsObj)}}},[_c("inline-svg",{attrs:{src:"add-icon",iconClass:"icon icon-xxl"}})],1)]):_vm._e(),_vm.isPreferredInputType("Option")?_c("el-col",{staticClass:"visibility-hide-actions pointer",attrs:{span:2}},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.sectionSettingsObj.inputOptions.length>2,expression:"sectionSettingsObj.inputOptions.length > 2"}],staticClass:"mT12 mL10",on:{click:function($event){return _vm.removeOption(_vm.sectionSettingsObj.inputOptions,index)}}},[_c("inline-svg",{attrs:{iconClass:"icon icon-xxl",src:"remove-icon"}})],1)]):_vm._e()],1)],1)}))],2):_vm._e()]),!_vm.isPreferredInputType("Reading")&&_vm.sectionSettingsObj.inputType?_c("div",{staticClass:"d-flex"},[_c("div",[_c("div",{staticClass:"scope-txt14 mT20 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.default_value"))+" ")]),_vm.isPreferredInputType("Option")||_vm.isPreferredInputType("Boolean")?_c("el-select",{staticClass:"fc-input-full-border-select2 width250px mT10",attrs:{clearable:"",filterable:"",placeholder:_vm.$t("jobplan.select_default")},model:{value:_vm.sectionSettingsObj.defaultValue,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"defaultValue",$$v)},expression:"sectionSettingsObj.defaultValue"}},_vm._l(_vm.sectionSettingsObj.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1):_c("el-input",{staticClass:"fc-input-full-border2 width250px mT10 task-option-input",attrs:{type:_vm.isPreferredInputType("Number")?"number":"text",placeholder:_vm.$t("jobplan.enter_default")},model:{value:_vm.sectionSettingsObj.defaultValue,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"defaultValue",$$v)},expression:"sectionSettingsObj.defaultValue"}})],1),_vm.isPreferredInputType("Option")?_c("div",{staticClass:"mL15"},[_c("div",{staticClass:"scope-txt14 mT20 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.deviation_value"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width250px mT10",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("common.placeholders.select_deviation_value")},on:{change:_vm.resetWoTemplate},model:{value:_vm.sectionSettingsObj.failureValue,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"failureValue",$$v)},expression:"sectionSettingsObj.failureValue"}},_vm._l(_vm.sectionSettingsObj.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1)],1):_vm._e()]):_vm._e(),_vm.isPreferredInputType("Text")||_vm.isPreferredInputType("Reading")?_vm._e():_c("div",[_vm.isPreferredInputType("Number")?[_c("div",{staticClass:"scope-txt14 f15 mT20 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.deviation_condition"))+" ")]),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:11}},[_c("div",{staticClass:"scope-txt14 mT10 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.Operator"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width250px mT10",attrs:{clearable:"",filterable:"",placeholder:_vm.$t("dashboardfilters.select_operator")},model:{value:_vm.sectionSettingsObj.deviationOperatorId,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"deviationOperatorId",$$v)},expression:"sectionSettingsObj.deviationOperatorId"}},_vm._l(_vm.operatorsList,(function(operator,index){return _c("el-option",{key:"section-operator-"+index,attrs:{label:operator.label,value:operator.value}})})),1)],1),_c("el-col",{attrs:{span:11}},[_c("div",{staticClass:"scope-txt14 mT10 mb5"},[_vm._v(" "+_vm._s(_vm.$t("asset.readings.value"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 width250px task-option-input mT10",attrs:{type:"number",disabled:_vm.$validation.isEmpty(_vm.sectionSettingsObj.deviationOperatorId),placeholder:"Enter value"},on:{input:function($event){var i=arguments.length,argsArray=Array(i);while(i--)argsArray[i]=arguments[i];return _vm.resetWoTemplate.apply(void 0,argsArray.concat(["number"]))}},model:{value:_vm.sectionSettingsObj.failureValue,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"failureValue",$$v)},expression:"sectionSettingsObj.failureValue"}})],1)],1)]:_vm._e(),_vm.canShowConfig?_c("div",{staticClass:"mT10"},[_c("el-checkbox",{staticClass:"width-full pT20 pB10 scope-border",on:{change:_vm.resetTemplate},model:{value:_vm.sectionSettingsObj.createWoOnFailure,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"createWoOnFailure",$$v)},expression:"sectionSettingsObj.createWoOnFailure"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.create_workorder_on_deviation")))])],1):_vm._e()],2)]):_vm._e(),_c("div",{staticClass:"scope-seperator",class:_vm.emptyInput}),_c("div",{staticClass:"pL20 pR10 mT20"},[_c("div",{staticClass:"scope-heading"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.validation"))+" ")]),_c("el-checkbox",{staticClass:"mT15 mL5 scope-border",on:{change:function($event){return _vm.resetOptionValues("attachment")}},model:{value:_vm.sectionSettingsObj.attachmentRequired,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"attachmentRequired",$$v)},expression:"sectionSettingsObj.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("jobplan.photo_mandatory")))]),_vm.isAttachmentOptionRequired?_c("div",{staticClass:"pL35 pR10"},[_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"scope-txt14 mb5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.attachments_options"))+" ")]),_c("el-radio-group",{staticClass:"mT10",on:{change:_vm.resetAttachmentValues},model:{value:_vm.sectionSettingsObj.attachmentOption,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"attachmentOption",$$v)},expression:"sectionSettingsObj.attachmentOption"}},[_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"all"}},[_vm._v(_vm._s(_vm.$t("jobplan.all")))]),_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"specific"}},[_vm._v(_vm._s(_vm.$t("jobplan.specific")))])],1),"specific"===_vm.sectionSettingsObj.attachmentOption?_c("el-select",{staticClass:"fc-input-full-border-select2 fc-tag el-select-block width250px mT10",attrs:{multiple:"","collapse-tags":"",clearable:"",filterable:"",placeholder:_vm.$t("common.placeholders.select_values")},model:{value:_vm.sectionSettingsObj.attachmentOptionValues,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"attachmentOptionValues",$$v)},expression:"sectionSettingsObj.attachmentOptionValues"}},_vm._l(_vm.sectionSettingsObj.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1):_vm._e()],1)],1)],1):_vm._e(),_vm.isPreferredInputType("Option")?_c("div",{staticClass:"mT20"},[_c("el-checkbox",{staticClass:"scope-border mL5",on:{change:function($event){return _vm.resetOptionValues("remark")}},model:{value:_vm.sectionSettingsObj.remarksRequired,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"remarksRequired",$$v)},expression:"sectionSettingsObj.remarksRequired"}},[_vm._v(" "+_vm._s(_vm.$t("jobplan.remarks_mandatory"))+" ")]),_vm.isRemarksRequired?_c("div",{staticClass:"pL35 pR10"},[_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"scope-txt14 mb5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.remark_options"))+" ")]),_c("el-radio-group",{staticClass:"mT10",on:{change:_vm.resetRemarksValues},model:{value:_vm.sectionSettingsObj.remarkOption,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"remarkOption",$$v)},expression:"sectionSettingsObj.remarkOption"}},[_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"all"}},[_vm._v(_vm._s(_vm.$t("jobplan.all")))]),_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"specific"}},[_vm._v(_vm._s(_vm.$t("jobplan.specific")))])],1),"specific"===_vm.sectionSettingsObj.remarkOption?_c("el-select",{staticClass:"fc-input-full-border-select2 fc-tag el-select-block width250px mT10",attrs:{multiple:"","collapse-tags":"",clearable:"",filterable:"",placeholder:_vm.$t("common.placeholders.select_values")},model:{value:_vm.sectionSettingsObj.remarkOptionValues,callback:function($$v){_vm.$set(_vm.sectionSettingsObj,"remarkOptionValues",$$v)},expression:"sectionSettingsObj.remarkOptionValues"}},_vm._l(_vm.sectionSettingsObj.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1):_vm._e()],1)],1)],1):_vm._e()],1):_vm._e()],1),_vm.canShowLookupWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.selectedLookupField},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setWizardValue}}):_vm._e(),_c("div",{staticClass:"scope-seperator"})],_c("div",{staticClass:"modal-dialog-footer jp-task-dialog-footer"},[_c("div",{staticClass:"pR20 pB20 d-flex"},[_c("el-button",{staticClass:"jp-task-save",attrs:{type:"primary"},on:{click:_vm.saveSectionSettings}},[_vm._v(_vm._s(_vm.$t("jobplan.save")))]),_c("el-button",{staticClass:"jp-task-cancel mL15",attrs:{plain:""},on:{click:_vm.cancelSectionSettings}},[_vm._v(_vm._s(_vm.$t("agent.agent.cancel")))])],1)])],2)])},TaskSectionDetailsvue_type_template_id_f59b61e6_scoped_true_staticRenderFns=[],scope_util=(__webpack_require__(425728),__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(594144)),FLookupField=__webpack_require__(855048),FLookupFieldWizard=__webpack_require__(499751),sectionSettingConfig={attachmentRequired:!1,enableInput:!1,validation:null,
// minSafeLimit: null,
// maxSafeLimit: null,
inputType:null,inputOptions:[],defaultValue:"",failureValue:"",deviationOperatorId:null,createWoOnFailure:null,
//woCreateFormId: null,
remarkOption:"all",remarkOptionValues:[],remarksRequired:!1,attachmentOptionValues:[],attachmentOption:"all",resource:null},sectionPrerequisiteConfig={enableOption:!0,options:[{value:"Yes"},{value:"No"}],attachmentRequired:!1},TaskSectionDetailsvue_type_script_lang_js={name:"TaskSectionDetails",props:["showSectionSettings","selectedSection",
//'woForms',
"formModel","isPreRequisite"],components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},data:function(){return{sectionSettingsObj:{},canShowLookupWizard:!1,sectionOption:1,inputOptions:{3:"Text",4:"Number",5:"Option"},inputTypeHash:{2:"Reading",3:"Text",4:"Number",5:"Option",6:"Boolean"},
// validationOptions: [
//   { label: 'None', value: 'none' },
//   { label: 'Incremental', value: 'incremental' },
//   { label: 'Decremental', value: 'decremental' },
//   { label: 'Safe Limit', value: 'safeLimit' },
// ],
operatorsList:[{label:"=",value:9},{label:"!=",value:10},{label:"<",value:11},{label:"<=",value:12},{label:">",value:13},{label:">=",value:14}],error:!1,errorText:"",canShowLookup:!1}},computed:{dialogTitle:function(){var isPreRequisite=this.isPreRequisite;return isPreRequisite?this.$t("jobplan.prereq_details"):this.$t("jobplan.configure_task_section")},bannerText:function(){var error=this.error,errorText=this.errorText;return error?errorText:this.$t("jobplan.alert_info")},bannerClass:function(){var error=this.error;return error?"jp-error-info":"fc-alert-msg-info"},bannerIcon:function(){var error=this.error;return error?"fa-info-circle":"fa-exclamation-triangle"},scopeOptions:function(){var formModel=this.formModel,_ref=formModel||{},jobPlanCategory=_ref.jobPlanCategory,_ref2=jobPlanCategory||{},jobPlanScope=_ref2.id,sectionScopeOptions=scope_util/* JOB_PLAN_SECTION_SCOPE */.Si[jobPlanScope]||[];return sectionScopeOptions},canShowScope:function(){var formModel=this.formModel,_ref3=formModel||{},jobPlanCategory=_ref3.jobPlanCategory,_ref4=jobPlanCategory||{},jobPlanScope=_ref4.id;return!(0,validation/* isEmpty */.xb)(jobPlanScope)},emptyInput:function(){var sectionSettingsObj=this.sectionSettingsObj,_ref5=sectionSettingsObj||{},enableInput=_ref5.enableInput;return enableInput?"":"mT50"},lookupDisplayName:function(){var selectedLookupField=this.selectedLookupField,_ref6=selectedLookupField||{},field=_ref6.field,_ref7=field||{},lookupModule=_ref7.lookupModule;return this.$getProperty(lookupModule,"displayName","")},
// safeLimitSelected() {
//   let { sectionSettingsObj } = this
//   let { enableInput, validation } = sectionSettingsObj || {}
//   return enableInput && validation === 'safeLimit'
// },
isAttachmentOptionRequired:function(){var sectionSettingsObj=this.sectionSettingsObj,inputTypeHash=this.inputTypeHash,_ref8=sectionSettingsObj||{},attachmentRequired=_ref8.attachmentRequired,inputType=_ref8.inputType;return attachmentRequired&&["Option","Boolean"].includes(inputTypeHash[inputType])},isRemarksRequired:function(){var sectionSettingsObj=this.sectionSettingsObj,inputTypeHash=this.inputTypeHash,_ref9=sectionSettingsObj||{},remarksRequired=_ref9.remarksRequired,inputType=_ref9.inputType;return remarksRequired&&["Option","Boolean"].includes(inputTypeHash[inputType])},canShowConfig:function(){var sectionSettingsObj=this.sectionSettingsObj,inputTypeHash=this.inputTypeHash,_ref10=sectionSettingsObj||{},enableInput=_ref10.enableInput,inputType=_ref10.inputType,failureValue=_ref10.failureValue,isFailureValueSelected=!1;return isFailureValueSelected="Option"===inputTypeHash[inputType]?!!(0,validation/* isNumber */.hj)(failureValue)&&failureValue>=0:!(0,validation/* isEmpty */.xb)(failureValue),enableInput&&isFailureValueSelected&&["Option","Boolean","Number"].includes(inputTypeHash[inputType])},attachmentRequired:function(){var sectionSettingsObj=this.sectionSettingsObj,_ref11=sectionSettingsObj||{},attachmentRequired=_ref11.attachmentRequired;return attachmentRequired&&this.isPreferredInputType("Option")},selectedLookupField:function(){var sectionSettingsObj=this.sectionSettingsObj,_ref12=sectionSettingsObj||{},jobPlanSectionCategory=_ref12.jobPlanSectionCategory;return scope_util/* SCOPE_LOOKUP_FIELDS */.Nt[jobPlanSectionCategory]||{}}},created:function(){var selectedSection=this.selectedSection,isPreRequisite=this.isPreRequisite,sectionObj=isPreRequisite?cloneDeep_default()(sectionPrerequisiteConfig):cloneDeep_default()(sectionSettingConfig),sectionData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},sectionObj),selectedSection);this.sectionSettingsObj=sectionData,isPreRequisite||this.fillDefaultScope()},watch:{selectedLookupField:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.canShowLookup=!1,(0,validation/* isEmpty */.xb)(newVal)||_this.$nextTick((function(){_this.canShowLookup=!0}));case 2:case"end":return _context.stop()}}),_callee)})))()},deep:!0},sectionSettingsObj:{handler:function(newVal){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2.validateSection(newVal);case 1:case"end":return _context2.stop()}}),_callee2)})))()},deep:!0,immediate:!0}},methods:{fillDefaultScope:function(){var sectionSettingsObj=this.sectionSettingsObj,canShowScope=this.canShowScope,_ref13=sectionSettingsObj||{},jobPlanSectionCategory=_ref13.jobPlanSectionCategory;(0,validation/* isEmpty */.xb)(jobPlanSectionCategory)&&canShowScope&&this.$set(this.sectionSettingsObj,"jobPlanSectionCategory",5)},isPreferredInputType:function(input){var sectionSettingsObj=this.sectionSettingsObj,inputTypeHash=this.inputTypeHash,_ref14=sectionSettingsObj||{},enableInput=_ref14.enableInput,inputType=-1;return enableInput&&(inputType=this.$getProperty(sectionSettingsObj,"inputType","-1")),!(0,validation/* isEmpty */.xb)(inputType)&&inputTypeHash[inputType]===input},setSelectedLookupValue:function(){var selectedLookupField=this.selectedLookupField,sectionSettingsObj=this.sectionSettingsObj,_ref15=selectedLookupField||{},lookupModuleName=_ref15.lookupModuleName,_ref16=sectionSettingsObj||{},_ref16$resource=_ref16.resource,resource=void 0===_ref16$resource?null:_ref16$resource;"assetcategory"===lookupModuleName?this.$set(this.sectionSettingsObj,"assetCategory",{id:resource}):this.$set(this.sectionSettingsObj,"spaceCategory",{id:resource})},setWizardValue:function(props){var field=props.field,_field$selectedItems=field.selectedItems,selectedItems=void 0===_field$selectedItems?[]:_field$selectedItems,selectedItemIds=[];(0,validation/* isEmpty */.xb)(selectedItems)||(selectedItemIds=selectedItems.find((function(item){return item.value})).value||{}),this.$set(this.sectionSettingsObj,"resource",selectedItemIds),this.setSelectedLookupValue()},showLookupWizard:function(_,canShow){this.canShowLookupWizard=canShow},resetInputs:function(val){if(!val){var sectionSettingsObj=this.sectionSettingsObj;sectionSettingsObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},sectionSettingsObj),{},{remarksRequired:!1,remarkOptionValues:null,inputOptions:[{value:"Choice1"},{value:"Choice 2"}],remarkOption:"all",defaultValue:null,attachmentRequired:!1,attachmentOptionValues:null,attachmentOption:"all",failureValue:null,deviationOperatorId:null,createWoOnFailure:!1}),this.$set(this,"sectionSettingsObj",sectionSettingsObj)}},
//Reset WO Template Selection
resetTemplate:function(reset){if(reset){var sectionSettingsObj=this.sectionSettingsObj;this.sectionSettingsObj=(0,objectSpread2/* default */.Z)({},sectionSettingsObj)}},
//Reset WO Template Selection if deviation value is reset
resetWoTemplate:function(failureValue,type){"number"===type&&(failureValue=Number(failureValue));var isFailureValueSelected="number"===type?failureValue>0:(0,validation/* isNumber */.hj)(failureValue);if(!isFailureValueSelected){var sectionSettingsObj=this.sectionSettingsObj;this.sectionSettingsObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},sectionSettingsObj),{},{createWoOnFailure:!1,woCreateFormId:null})}},resetResources:function(){var sectionSettingsObj=this.sectionSettingsObj;this.sectionSettingsObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},sectionSettingsObj),{},{resource:null,assetCategory:null,spaceCategory:null})},addTaskOption:function(selectedTask){var _ref17=selectedTask||{},inputOptions=_ref17.inputOptions,optionValue="Choice".concat(inputOptions.length+1);selectedTask.inputOptions.push({value:optionValue}),this.sectionOption+=1},removeOption:function(list,index){
//Removing the deleted option if its selected in configuration
var sectionSettingsObj=this.sectionSettingsObj,_ref18=sectionSettingsObj||{},remarkOptionValues=_ref18.remarkOptionValues,attachmentOptionValues=_ref18.attachmentOptionValues,defaultValue=_ref18.defaultValue,failureValue=_ref18.failureValue;
//Removing remarkoption selected
if(defaultValue===index&&(defaultValue=null),failureValue===index&&(failureValue=null),!(0,validation/* isEmpty */.xb)(remarkOptionValues)){var remarkIndex=remarkOptionValues.findIndex((function(option){return option===index}));remarkOptionValues.splice(remarkIndex,1)}
//Removing attachmentoption selected
if(!(0,validation/* isEmpty */.xb)(attachmentOptionValues)){var attachmentIndex=attachmentOptionValues.findIndex((function(option){return option===index}));attachmentOptionValues.splice(attachmentIndex,1)}this.sectionSettingsObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},sectionSettingsObj),{},{remarkOptionValues:remarkOptionValues,attachmentOptionValues:attachmentOptionValues,defaultValue:defaultValue,failureValue:failureValue}),list.splice(index,1)},onSelectInput:function(){var sectionSettingsObj=this.sectionSettingsObj,_ref19=sectionSettingsObj||{},inputType=_ref19.inputType;if(5===inputType)this.sectionSettingsObj.inputOptions=[],this.addTaskOption(this.sectionSettingsObj),this.addTaskOption(this.sectionSettingsObj);else if(6===inputType){this.taskSettingsEdit.inputOptions=[{label:"",value:""},{label:"",value:""}];var options=[{label:"YES",value:"YES"},{label:"NO",value:"NO"}];this.$set(this.sectionSettingsObj,"inputOptions",options)}this.resetInputs(!1)},resetAttachmentValues:function(val){"all"===val&&(this.sectionSettingsObj.attachmentOptionValues=null)},resetRemarksValues:function(val){"all"===val&&(this.sectionSettingsObj.remarkOptionValues=null)},resetOptionValues:function(type){"remark"===type?(this.sectionSettingsObj.remarkOptionValues=null,this.sectionSettingsObj.remarkOption=null):(this.sectionSettingsObj.attachmentOptionValues=null,this.sectionSettingsObj.attachmentOption=null)},validateSection:function(section){var inputTypeHash=this.inputTypeHash,_ref20=section||{},inputType=_ref20.inputType,attachmentOption=_ref20.attachmentOption,attachmentOptionValues=_ref20.attachmentOptionValues,remarkOption=_ref20.remarkOption,remarkOptionValues=_ref20.remarkOptionValues,inputOptions=_ref20.inputOptions,jobPlanSectionCategory=_ref20.jobPlanSectionCategory,deviationOperatorId=_ref20.deviationOperatorId,failureValue=_ref20.failureValue,resource=_ref20.resource,defaultValue=_ref20.defaultValue,categoryHash={3:"Space Category",4:"Asset Category"};if(["Asset Category","Space Category"].includes(categoryHash[jobPlanSectionCategory])&&(0,validation/* isEmpty */.xb)(resource))return this.error=!0,"Asset Category"===categoryHash[jobPlanSectionCategory]?this.errorText=this.$t("jobplan.select_asset_category"):this.errorText=this.$t("jobplan.select_space_category"),!(0,validation/* isEmpty */.xb)(resource);if("Number"===inputTypeHash[inputType]){var numberConfigValid=!0;return deviationOperatorId&&(0,validation/* isEmpty */.xb)(failureValue)&&(numberConfigValid=!1,this.error=!0,this.errorText=this.$t("jobplan.input_deviation")),deviationOperatorId&&!(0,validation/* isEmpty */.xb)(failureValue)&&failureValue===defaultValue&&9===deviationOperatorId&&(
// OperatorID of = is 9
numberConfigValid=!1,this.error=!0,this.errorText=this.$t("jobplan.same_def_deviation")),
// if (validation === 'safeLimit') {
//   let minLimitValid = true
//   let maxLimitValid = true
//   if (isEmpty(minSafeLimit)) {
//     this.error = true
//     this.errorText = this.$t('jobplan.minlimit_needed')
//     minLimitValid = !isEmpty(minSafeLimit)
//   }
//   if (isEmpty(maxSafeLimit)) {
//     this.error = true
//     this.errorText = this.$t('jobplan.maxlimit_needed')
//     maxLimitValid = !isEmpty(maxSafeLimit)
//   }
//   numberConfigValid = minLimitValid && maxLimitValid
// }
numberConfigValid&&(this.error=!1,this.errorText=""),numberConfigValid}
// if (createWoOnFailure && isEmpty(woCreateFormId)) {
//   this.error = true
//   this.errorText = this.$t('jobplan.select_wo_template')
//   return !isEmpty(woCreateFormId)
// }
if("Option"===inputTypeHash[inputType]){var OptionNotEmpty=!0,isAttachmentOptionValid=!0,isRemarkOptionValid=!0,deviationValueValid=!0;return inputOptions.forEach((function(option){var _ref21=option||{},value=_ref21.value;OptionNotEmpty=OptionNotEmpty&&!(0,validation/* isEmpty */.xb)(value)})),OptionNotEmpty||(this.error=!0,this.errorText=this.$t("jobplan.option_needed")),(0,validation/* isEmpty */.xb)(failureValue)||failureValue!==defaultValue||(deviationValueValid=!1,this.error=!0,this.errorText=this.$t("jobplan.same_def_deviation")),"specific"===attachmentOption&&(0,validation/* isEmpty */.xb)(attachmentOptionValues)&&(this.error=!0,this.errorText=this.$t("jobplan.select_attachment"),isAttachmentOptionValid=!(0,validation/* isEmpty */.xb)(attachmentOptionValues)),"specific"===remarkOption&&(0,validation/* isEmpty */.xb)(remarkOptionValues)&&(this.error=!0,this.errorText=this.$t("jobplan.select_remark"),isRemarkOptionValid=!(0,validation/* isEmpty */.xb)(remarkOptionValues)),OptionNotEmpty&&isAttachmentOptionValid&&isRemarkOptionValid&&deviationValueValid&&(this.error=!1,this.errorText=""),OptionNotEmpty&&isAttachmentOptionValid&&isRemarkOptionValid&&deviationValueValid}return this.error=!1,this.errorText="",!0},serialize:function(section){return Object.keys(section).forEach((function(property){(0,validation/* isEmpty */.xb)(section[property])&&delete section[property]})),section},saveSectionSettings:function(){var sectionSettingsObj=this.sectionSettingsObj,isValid=this.validateSection(sectionSettingsObj);if(isValid){var serializedSection=this.serialize(sectionSettingsObj);this.$emit("sectionUpdated",serializedSection)}},cancelSectionSettings:function(){this.$emit("update:showSectionSettings",!1)}}},tasks_creation_TaskSectionDetailsvue_type_script_lang_js=TaskSectionDetailsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tasks_creation_TaskSectionDetailsvue_type_script_lang_js,TaskSectionDetailsvue_type_template_id_f59b61e6_scoped_true_render,TaskSectionDetailsvue_type_template_id_f59b61e6_scoped_true_staticRenderFns,!1,null,"f59b61e6",null)
/* harmony default export */,TaskSectionDetails=component.exports,TaskDetailsvue_type_template_id_757f7e55_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container jp-task-dialog",attrs:{title:_vm.dialogTitle,visible:_vm.canShowTaskDetails,"append-to-body":!0,width:"45%","before-close":_vm.closeTaskDialog},on:{"update:visible":function($event){_vm.canShowTaskDetails=$event}}},[_c("div",{staticClass:"task-details jp-section-dialog"},[_vm.error?_c("div",{staticClass:"jp-banner-space"},[_c("div",{staticClass:"jp-error-info"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorText)+" ")])]):_vm._e(),_vm.isPreRequisite?[_c("div",{staticClass:"pL20 pT10 pR10 width100"},[_c("div",{staticClass:"scope-heading mT5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.prereq_type"))+" ")]),_c("el-checkbox",{staticClass:"mT15 mL5 scope-txt14 scope-border",model:{value:_vm.task.enableOption,callback:function($$v){_vm.$set(_vm.task,"enableOption",$$v)},expression:"task.enableOption"}},[_vm._v(_vm._s(_vm.$t("jobplan.enable_option")))])],1),_vm.task.enableOption?_c("div",{staticClass:"pL20 pR10 mT15"},[_c("div",{staticClass:"scope-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.task.options,(function(option,index){return _c("el-row",{key:index,staticClass:"mT20"},[_c("el-col",{attrs:{span:20}},[_c("el-input",{staticClass:"fc-input-full-border2 width500 task-option-input",attrs:{type:"text",placeholder:"Option "+(index+1)},model:{value:option.value,callback:function($$v){_vm.$set(option,"value",$$v)},expression:"option.value"}},[_c("template",{slot:"prepend"},[_vm._v(_vm._s(index+1))])],2)],1)],1)}))],2):_vm._e(),_c("div",{staticClass:"scope-seperator"}),_c("div",{staticClass:"pL20 pR10 mT10"},[_c("div",{staticClass:"scope-heading"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.validation"))+" ")]),_c("el-checkbox",{staticClass:"mT15 mL5 scope-border",model:{value:_vm.task.attachmentRequired,callback:function($$v){_vm.$set(_vm.task,"attachmentRequired",$$v)},expression:"task.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("jobplan.photo_mandatory")))])],1),_c("div",{staticClass:"scope-seperator"})]:[_c("div",{staticClass:"scope-text14  pT20  pL20 pR10"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.task_name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 pL20 pR10 mT10 width75",attrs:{placeholder:_vm.$t("common.placeholders.write_task_name")},model:{value:_vm.task.subject,callback:function($$v){_vm.$set(_vm.task,"subject",$$v)},expression:"task.subject"}}),_c("div",{staticClass:"mT20 pL20 pR10"},[_c("div",{staticClass:"scope-text14 "},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-textarea mT10 width75",attrs:{type:"textarea","auto-complete":"off",rows:1,resize:"none",placeholder:_vm.$t("common.placeholders.enter_description"),autosize:{minRows:3,maxRows:5}},model:{value:_vm.task.description,callback:function($$v){_vm.$set(_vm.task,"description",$$v)},expression:"task.description"}})],1),_c("div",{staticClass:"scope-seperator mT15"}),_vm.canShowScope?_c("div",{staticClass:"mT10 mB10 d-flex pL20 pR10"},[_c("div",[_c("div",{staticClass:"scope-heading"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.task_scope"))+" ")]),_c("div",{staticClass:"jp-scope-desc mT5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.section_task_desc"))+" ")]),_c("div",{staticClass:"d-flex mT15"},[_c("div",[_c("div",{staticClass:"scope-txt14  fw4"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.category"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 mT10  width250px",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("jobplan.select_scope")},on:{change:function($event){return _vm.resetResources()}},model:{value:_vm.task.jobPlanTaskCategory,callback:function($$v){_vm.$set(_vm.task,"jobPlanTaskCategory",$$v)},expression:"task.jobPlanTaskCategory"}},_vm._l(_vm.scopeOptions,(function(key,label){return _c("el-option",{key:key,attrs:{label:label,value:Number(key)}})})),1)],1),_vm.canShowLookup?_c("div",{staticClass:"mL15"},[_c("div",{staticClass:"scope-text14  fw4"},[_vm._v(" "+_vm._s(_vm.lookupDisplayName)+" ")]),_c("FLookupField",{ref:"task-resource-field",staticClass:"width250px mT10",attrs:{model:_vm.task.resource,field:_vm.selectedLookupField},on:{"update:model":function($event){return _vm.$set(_vm.task,"resource",$event)},recordSelected:_vm.setSelectedLookupValue,showLookupWizard:_vm.showLookupWizard}})],1):_vm._e()])])]):_vm._e(),_vm.canShowScope?_c("div",{staticClass:"scope-seperator"}):_vm._e(),_c("div",{staticClass:"mT25 pL20 pR10"},[_c("div",{staticClass:"scope-heading mT20"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.input_config"))+" ")]),_c("el-checkbox",{staticClass:"scope-border mT15 mL5 scope-txt14",on:{change:_vm.resetInputs},model:{value:_vm.task.enableInput,callback:function($$v){_vm.$set(_vm.task,"enableInput",$$v)},expression:"task.enableInput"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.enable_input")))])],1),_vm.task.enableInput?_c("div",{staticClass:"pL35 pR10"},[_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"scope-text14 "},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.task_type"))+" ")]),_vm._l(_vm.inputOptions,(function(label,key){return _c("el-radio",{key:key,staticClass:"fc-radio-btn pT15 scope-border",attrs:{color:"secondary",label:Number(key)},on:{change:function($event){return _vm.resetInputs(!1)}},model:{value:_vm.task.inputType,callback:function($$v){_vm.$set(_vm.task,"inputType",$$v)},expression:"task.inputType"}},[_vm._v(_vm._s(label))])}))],2),_vm.isPreferredInputType("Reading")?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"scope-text14 "},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reading_field"))+" ")]),_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 mT10 width250px",staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:_vm.$t("jobplan.select_reading_field"),loading:_vm.isLoading},model:{value:_vm.task.readingFieldId,callback:function($$v){_vm.$set(_vm.task,"readingFieldId",$$v)},expression:"task.readingFieldId"}},_vm._l(_vm.task.readings,(function(option){return _c("el-option",{key:option.value,attrs:{label:option.label,value:option.value}})})),1)],1)]):_vm._e(),_vm.isPreferredInputType("Option")?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"mT10 scope-text14 "},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.task.inputOptions,(function(option,index){return _c("div",{key:index,staticClass:"taskoption mT10 d-flex"},[_c("el-row",{staticClass:"visibility-visible-actions width100"},[_c("el-col",{attrs:{span:20}},[_c("el-input",{staticClass:"fc-input-full-border2 width500 task-option-input",attrs:{type:"text",placeholder:"Option "+(index+1)},model:{value:option.value,callback:function($$v){_vm.$set(option,"value",$$v)},expression:"option.value"}},[_c("template",{slot:"prepend"},[_vm._v(_vm._s(index+1))])],2)],1),_vm.isPreferredInputType("Option")?_c("el-col",{staticClass:"visibility-hide-actions pointer mL10",attrs:{span:1}},[_c("div",{staticClass:"mT12",on:{click:function($event){return _vm.addTaskOption(_vm.task)}}},[_c("inline-svg",{attrs:{src:"add-icon",iconClass:"icon icon-xxl"}})],1)]):_vm._e(),_vm.isPreferredInputType("Option")?_c("el-col",{staticClass:"visibility-hide-actions pointer",attrs:{span:2}},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.task.inputOptions.length>2,expression:"task.inputOptions.length > 2"}],staticClass:"mT12 mL10",on:{click:function($event){return _vm.removeTaskOption(_vm.task.inputOptions,index)}}},[_c("inline-svg",{attrs:{iconClass:"icon icon-xxl",src:"remove-icon"}})],1)]):_vm._e()],1)],1)}))],2):_vm._e(),!_vm.isPreferredInputType("Reading")&&_vm.task.inputType?_c("div",{staticClass:"d-flex"},[_c("div",[_c("div",{staticClass:"scope-text14  mT20 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.default_value"))+" ")]),["Option","Boolean"].includes(_vm.inputTypeHash[_vm.task.inputType])?_c("el-select",{staticClass:"fc-input-full-border-select2 width250px mT10",attrs:{clearable:"",filterable:"",placeholder:_vm.$t("jobplan.select_default")},model:{value:_vm.task.defaultValue,callback:function($$v){_vm.$set(_vm.task,"defaultValue",$$v)},expression:"task.defaultValue"}},_vm._l(_vm.task.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1):_c("el-input",{staticClass:"fc-input-full-border2 width250px task-option-input mT10",attrs:{type:_vm.isPreferredInputType("Number")?"number":"text",placeholder:_vm.$t("jobplan.enter_default")},model:{value:_vm.task.defaultValue,callback:function($$v){_vm.$set(_vm.task,"defaultValue",$$v)},expression:"task.defaultValue"}})],1),_vm.isPreferredInputType("Option")?_c("div",{staticClass:"mL15"},[_c("div",{staticClass:"scope-text14  mT20 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.deviation_value"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width250px mT10",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("common.placeholders.select_deviation_value")},on:{change:_vm.resetWoTemplate},model:{value:_vm.task.failureValue,callback:function($$v){_vm.$set(_vm.task,"failureValue",$$v)},expression:"task.failureValue"}},_vm._l(_vm.task.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1)],1):_vm._e()]):_vm._e(),_vm.isPreferredInputType("Text")||_vm.isPreferredInputType("Reading")?_vm._e():_c("div",[_vm.isPreferredInputType("Number")?[_c("div",{staticClass:"scope-text14  f15 mT20 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.deviation_condition"))+" ")]),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:11}},[_c("div",{staticClass:"scope-text14  mT10 mb5"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.Operator"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width250px mT10",attrs:{clearable:"",filterable:"",placeholder:_vm.$t("dashboardfilters.select_operator")},model:{value:_vm.task.deviationOperatorId,callback:function($$v){_vm.$set(_vm.task,"deviationOperatorId",$$v)},expression:"task.deviationOperatorId"}},_vm._l(_vm.operatorsList,(function(operator,index){return _c("el-option",{key:"section-operator-"+index,attrs:{label:operator.label,value:operator.value}})})),1)],1),_c("el-col",{attrs:{span:11}},[_c("div",{staticClass:"scope-text14  mT10 mb5"},[_vm._v(" "+_vm._s(_vm.$t("asset.readings.value"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 width250px task-option-input mT10",attrs:{type:"number",disabled:_vm.$validation.isEmpty(_vm.task.deviationOperatorId),placeholder:_vm.$t("common._common.please_enter_value")},on:{input:function($event){var i=arguments.length,argsArray=Array(i);while(i--)argsArray[i]=arguments[i];return _vm.resetWoTemplate.apply(void 0,argsArray.concat(["number"]))}},model:{value:_vm.task.failureValue,callback:function($$v){_vm.$set(_vm.task,"failureValue",$$v)},expression:"task.failureValue"}})],1)],1)]:_vm._e(),_vm.canShowConfig?_c("div",{staticClass:"mT10"},[_c("el-checkbox",{staticClass:"width-full pT20 pB10 scope-border",on:{change:_vm.resetTemplate},model:{value:_vm.task.createWoOnFailure,callback:function($$v){_vm.$set(_vm.task,"createWoOnFailure",$$v)},expression:"task.createWoOnFailure"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.create_workorder_on_deviation")))])],1):_vm._e()],2)]):_vm._e(),_c("div",{staticClass:"scope-seperator"}),_c("div",{staticClass:"pL20 pR10"},[_c("div",{staticClass:"scope-heading mT20 mb5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.validation"))+" ")]),_c("div",{staticClass:"mT15"},[_c("el-checkbox",{staticClass:"scope-border mL5",on:{change:function($event){return _vm.resetOptionValues("attachment")}},model:{value:_vm.task.attachmentRequired,callback:function($$v){_vm.$set(_vm.task,"attachmentRequired",$$v)},expression:"task.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.photo")))]),_vm.isAttachmentOptionRequired?_c("div",{staticClass:"mB15 pL35 pR10"},[_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"scope-text14  mb5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.attachments_options"))+" ")]),_c("el-radio-group",{staticClass:"mT10 mB10",on:{change:_vm.resetAttachmentValues},model:{value:_vm.task.attachmentOption,callback:function($$v){_vm.$set(_vm.task,"attachmentOption",$$v)},expression:"task.attachmentOption"}},[_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"all"}},[_vm._v(_vm._s(_vm.$t("jobplan.all")))]),_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"specific"}},[_vm._v(_vm._s(_vm.$t("jobplan.specific")))])],1),"specific"===_vm.task.attachmentOption?_c("el-select",{staticClass:"fc-input-full-border-select2 fc-tag el-select-block width250px mT10",attrs:{multiple:"","collapse-tags":"",clearable:"",filterable:"",placeholder:_vm.$t("common.placeholders.select_values")},model:{value:_vm.task.attachmentOptionValues,callback:function($$v){_vm.$set(_vm.task,"attachmentOptionValues",$$v)},expression:"task.attachmentOptionValues"}},_vm._l(_vm.task.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1):_vm._e()],1)],1)],1):_vm._e()],1),_c("div",{staticClass:"mT20"},[_vm.isPreferredInputType("Option")?_c("el-checkbox",{staticClass:"scope-border mL5",on:{change:function($event){return _vm.resetOptionValues("remark")}},model:{value:_vm.task.remarksRequired,callback:function($$v){_vm.$set(_vm.task,"remarksRequired",$$v)},expression:"task.remarksRequired"}},[_vm._v(_vm._s(_vm.$t("jobplan.remarks_mandatory")))]):_vm._e(),_vm.isRemarksRequired?_c("div",{staticClass:"pL35 pR10"},[_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"scope-text14  mb5"},[_vm._v(" "+_vm._s(_vm.$t("jobplan.remark_options"))+" ")]),_c("el-radio-group",{staticClass:"mT10",on:{change:_vm.resetRemarksValues},model:{value:_vm.task.remarkOption,callback:function($$v){_vm.$set(_vm.task,"remarkOption",$$v)},expression:"task.remarkOption"}},[_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"all"}},[_vm._v(_vm._s(_vm.$t("jobplan.all")))]),_c("el-radio",{staticClass:"fc-radio-btn scope-border",attrs:{label:"specific"}},[_vm._v(_vm._s(_vm.$t("jobplan.specific")))])],1),"specific"===_vm.task.remarkOption?_c("el-select",{staticClass:"fc-input-full-border-select2 fc-tag el-select-block width250px mT10",attrs:{multiple:"","collapse-tags":"",placeholder:_vm.$t("common.placeholders.select_values"),clearable:"",filterable:""},model:{value:_vm.task.remarkOptionValues,callback:function($$v){_vm.$set(_vm.task,"remarkOptionValues",$$v)},expression:"task.remarkOptionValues"}},_vm._l(_vm.task.inputOptions,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.value,value:index}})})),1):_vm._e()],1)],1)],1):_vm._e()],1)]),_vm.canShowLookupWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.selectedLookupField},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setWizardValue}}):_vm._e(),_c("div",{staticClass:"scope-seperator"})],_c("div",{staticClass:"modal-dialog-footer jp-task-dialog-footer"},[_c("div",{staticClass:"pR20 pB20 d-flex"},[_c("el-button",{staticClass:"jp-task-save",attrs:{type:"primary"},on:{click:function($event){return _vm.saveTaskInfo()}}},[_vm._v(_vm._s(_vm.$t("jobplan.save")))]),_c("el-button",{staticClass:"jp-task-cancel mL15",attrs:{plain:""},on:{click:_vm.closeTaskDialog}},[_vm._v(_vm._s(_vm.$t("agent.agent.cancel")))])],1)])],2)])},TaskDetailsvue_type_template_id_757f7e55_scoped_true_staticRenderFns=[],TaskDetails=__webpack_require__(135824),api=__webpack_require__(32284),taskSettingConfig={description:"",inputOptions:[{value:"Choice 1"},{value:"Choice 2"}],inputType:null,enableInput:!1,defaultValue:"",failureValue:"",deviationOperatorId:null,createWoOnFailure:null,
// woCreateFormId: null,
remarkOption:"all",remarkOptionValues:[],remarksRequired:!1,attachmentOptionValues:[],attachmentOption:"all",statusNew:1,taskId:1,jobPlanTaskCategory:null,resource:null,readings:[],readingFieldId:null},taskPrerequisiteConfig={enableOption:!0,options:[{value:"Yes"},{value:"No"}],attachmentRequired:!1},TaskDetailsvue_type_script_lang_js={extends:TaskDetails/* default */.Z,props:["woForms","selectedTaskInfo","canShowTaskDetails","formModel","isPreRequisite"],components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},data:function(){return{inputOptions:{3:"Text",4:"Number",5:"Option"},inputTypeHash:{2:"Reading",3:"Text",4:"Number",5:"Option",6:"Boolean"},isLoading:!1,
// validationOptions: [
//   { label: 'None', value: 'none' },
//   { label: 'Incremental', value: 'incremental' },
//   { label: 'Decremental', value: 'decremental' },
//   { label: 'Safe Limit', value: 'safeLimit' },
// ],
operatorsList:[{label:"=",value:9},{label:"!=",value:10},{label:"<",value:11},{label:"<=",value:12},{label:">",value:13},{label:">=",value:14}],canShowLookupWizard:!1,error:!1,errorText:"",canShowLookup:!1}},computed:{dialogTitle:function(){var isPreRequisite=this.isPreRequisite;return isPreRequisite?this.$t("jobplan.prereq_details"):this.$t("jobplan.task_details")},scopeOptions:function(){var selectedTaskInfo=this.selectedTaskInfo,formModel=this.formModel,_ref=selectedTaskInfo||{},task=_ref.task,_ref2=task||{},jobPlanSectionCategory=_ref2.jobPlanSectionCategory,_ref3=formModel||{},jobPlanCategory=_ref3.jobPlanCategory,_ref4=jobPlanCategory||{},jobPlanScope=_ref4.id,currentSectionScopeOptions=scope_util/* JOB_PLAN_SECTION_SCOPE */.Si[jobPlanScope]||{},taskScopeKey=Object.keys(currentSectionScopeOptions).find((function(key){return currentSectionScopeOptions[key]===jobPlanSectionCategory})),taskScopeOptions=scope_util/* JOB_PLAN_TASK_SCOPE */.zO[taskScopeKey]||{};return taskScopeOptions},canShowScope:function(){var formModel=this.formModel,task=this.task,_ref5=task||{},jobPlanSectionCategory=_ref5.jobPlanSectionCategory,_ref6=formModel||{},jobPlanCategory=_ref6.jobPlanCategory,_ref7=jobPlanCategory||{},jobPlanScope=_ref7.id;return!(0,validation/* isEmpty */.xb)(jobPlanScope)&&!(0,validation/* isEmpty */.xb)(jobPlanSectionCategory)},lookupDisplayName:function(){var selectedLookupField=this.selectedLookupField,_ref8=selectedLookupField||{},field=_ref8.field,_ref9=field||{},lookupModule=_ref9.lookupModule;return this.$getProperty(lookupModule,"displayName","")},selectedLookupField:function(){var task=this.task,_ref10=task||{},jobPlanTaskCategory=_ref10.jobPlanTaskCategory;return scope_util/* SCOPE_LOOKUP_FIELDS */.Nt[jobPlanTaskCategory]||{}},isAttachmentOptionRequired:function(){var task=this.task,inputTypeHash=this.inputTypeHash,_ref11=task||{},attachmentRequired=_ref11.attachmentRequired,inputType=_ref11.inputType;return attachmentRequired&&["Option","Boolean"].includes(inputTypeHash[inputType])},isRemarksRequired:function(){var task=this.task,inputTypeHash=this.inputTypeHash,_ref12=task||{},remarksRequired=_ref12.remarksRequired,inputType=_ref12.inputType;return remarksRequired&&["Option","Boolean"].includes(inputTypeHash[inputType])},canShowConfig:function(){var task=this.task,inputTypeHash=this.inputTypeHash,_ref13=task||{},enableInput=_ref13.enableInput,inputType=_ref13.inputType,failureValue=_ref13.failureValue,isFailureValueSelected=!1;return isFailureValueSelected="Option"===inputTypeHash[inputType]?!!(0,validation/* isNumber */.hj)(failureValue)&&failureValue>=0:!(0,validation/* isEmpty */.xb)(failureValue),enableInput&&isFailureValueSelected&&["Option","Boolean","Number"].includes(inputTypeHash[inputType])}},mounted:function(){var selectedTaskInfo=this.selectedTaskInfo,isPreRequisite=this.isPreRequisite,_ref14=selectedTaskInfo||{},task=_ref14.task,taskObj=isPreRequisite?cloneDeep_default()(taskPrerequisiteConfig):cloneDeep_default()(taskSettingConfig),taskData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},taskObj),task);this.$set(this,"task",taskData),isPreRequisite||(this.fillDefaultScope(),this.initReadings())},watch:{selectedLookupField:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.canShowLookup=!1,(0,validation/* isEmpty */.xb)(newVal)||_this.$nextTick((function(){_this.canShowLookup=!0}));case 2:case"end":return _context.stop()}}),_callee)})))()},deep:!0},task:{handler:function(newVal){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2.validateTask(newVal);case 1:case"end":return _context2.stop()}}),_callee2)})))()},deep:!0,immediate:!0}},methods:{isCategoryScope:function(scope){return["ASSETCATEGORY","SPACECATEGORY"].includes(scope_util/* JOB_PLAN_SCOPE */.QY[scope])},initReadings:function(){var scope,formModel=this.formModel,task=this.task,_ref15=formModel||{},jobPlanCategory=_ref15.jobPlanCategory,_ref16=task||{},jobPlanSectionCategory=_ref16.jobPlanSectionCategory,jobPlanTaskCategory=_ref16.jobPlanTaskCategory,_ref17=jobPlanCategory||{},_ref17$id=_ref17.id,mainScope=void 0===_ref17$id?null:_ref17$id;if((0,validation/* isEmpty */.xb)(jobPlanTaskCategory)||(scope=jobPlanTaskCategory,this.isCategoryScope(scope)||(scope=jobPlanSectionCategory,this.isCategoryScope(scope)||(scope=mainScope))),this.isCategoryScope(scope)){var inputOptions=this.inputOptions;this.inputOptions=(0,objectSpread2/* default */.Z)({2:"Reading"},inputOptions),this.loadReadings()}else{var inputType=this.inputType;2===inputType&&this.$set(this.task,"inputType",null)}},fillDefaultScope:function(){var task=this.task,canShowScope=this.canShowScope,_ref18=task||{},jobPlanTaskCategory=_ref18.jobPlanTaskCategory,jobPlanSectionCategory=_ref18.jobPlanSectionCategory;!(0,validation/* isEmpty */.xb)(jobPlanSectionCategory)&&(0,validation/* isEmpty */.xb)(jobPlanTaskCategory)&&canShowScope&&this.$set(this.task,"jobPlanTaskCategory",5)},resetTemplate:function(reset){if(reset){var task=this.task;this.task=(0,objectSpread2/* default */.Z)({},task)}},
//Reset WO Template Selection if deviation value is reset
resetWoTemplate:function(failureValue,type){"number"===type&&(failureValue=Number(failureValue));var isFailureValueSelected="number"===type?failureValue>0:(0,validation/* isNumber */.hj)(failureValue);if(!isFailureValueSelected){var task=this.task;this.task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{createWoOnFailure:!1})}},loadReadings:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var task,_ref19,resourceId,sectionResourceId,jobPlanResource,jobPlanCategory,jobPlanSectionCategory,jobPlanTaskCategory,_ref20,jobPlanResourceId,options,taskResourceId,isAssetCategory,url,_yield$API$get,data,error,_ref21,message,_ref22,_ref22$readings,readings,_ref24,_readings;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this3.isLoading=!0,task=_this3.task,_ref19=task||{},resourceId=_ref19.resource,sectionResourceId=_ref19.sectionResource,jobPlanResource=_ref19.jobPlanResource,jobPlanCategory=_ref19.jobPlanCategory,jobPlanSectionCategory=_ref19.jobPlanSectionCategory,jobPlanTaskCategory=_ref19.jobPlanTaskCategory,_ref20=jobPlanResource||{},jobPlanResourceId=_ref20.id,options=[],isAssetCategory=!0,//Will Change logic while general release ***
(0,validation/* isEmpty */.xb)(resourceId)?(0,validation/* isEmpty */.xb)(sectionResourceId)?(taskResourceId=jobPlanResourceId,isAssetCategory=3===jobPlanCategory):(taskResourceId=sectionResourceId,isAssetCategory=4===jobPlanSectionCategory):(taskResourceId=resourceId,isAssetCategory=4===jobPlanTaskCategory),(0,validation/* isEmpty */.xb)(taskResourceId)){_context3.next=15;break}return url=isAssetCategory?"v2/readings/assetcategory?id=".concat(taskResourceId,"&excludeEmptyFields=false&readingType=true"):"reading/getallspacereadings?categoryIds=".concat(taskResourceId),_context3.next=11,api/* API */.bl.get(url);case 11:_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(_ref21=error||{},message=_ref21.message,_this3.$message.error(message||{})):isAssetCategory?(_ref22=data||{},_ref22$readings=_ref22.readings,readings=void 0===_ref22$readings?[]:_ref22$readings,(0,validation/* isEmpty */.xb)(readings)||readings.forEach((function(reading){var _ref23=reading||{},label=_ref23.displayName,value=_ref23.id;(0,validation/* isEmpty */.xb)(label)||(0,validation/* isEmpty */.xb)(value)||options.push({label:label,value:value})}))):(_ref24=data||{},_readings=_ref24["".concat(taskResourceId)],(0,validation/* isEmpty */.xb)(_readings)||_readings.forEach((function(reading){var _ref25=reading||{},fields=_ref25.fields;(fields||[]).forEach((function(field){var _ref26=field||{},label=_ref26.displayName,value=_ref26.id;(0,validation/* isEmpty */.xb)(label)||(0,validation/* isEmpty */.xb)(value)||options.push({label:label,value:value})}))})));case 15:_this3.$set(_this3.task,"readings",options),_this3.isLoading=!1;case 17:case"end":return _context3.stop()}}),_callee3)})))()},isPreferredInputType:function(input){var task=this.task,inputTypeHash=this.inputTypeHash,_ref27=task||{},enableInput=_ref27.enableInput,inputType=-1;return enableInput&&(inputType=this.$getProperty(task,"inputType","-1")),!(0,validation/* isEmpty */.xb)(inputType)&&inputTypeHash[inputType]===input},validateTask:function(task){var inputTypeHash=this.inputTypeHash,_ref28=task||{},inputType=_ref28.inputType,readingFieldId=_ref28.readingFieldId,inputOptions=_ref28.inputOptions,jobPlanTaskCategory=_ref28.jobPlanTaskCategory,attachmentOption=_ref28.attachmentOption,attachmentOptionValues=_ref28.attachmentOptionValues,remarkOption=_ref28.remarkOption,remarkOptionValues=_ref28.remarkOptionValues,deviationOperatorId=_ref28.deviationOperatorId,failureValue=_ref28.failureValue,resource=_ref28.resource,defaultValue=_ref28.defaultValue,categoryHash={3:"Space Category",4:"Asset Category"};if(["Asset Category","Space Category"].includes(categoryHash[jobPlanTaskCategory])&&(0,validation/* isEmpty */.xb)(resource))return this.error=!0,"Asset Category"===categoryHash[jobPlanTaskCategory]?this.errorText=this.$t("jobplan.select_asset_category"):this.errorText=this.$t("jobplan.select_space_category"),!(0,validation/* isEmpty */.xb)(resource);if("Reading"===inputTypeHash[inputType]&&(0,validation/* isEmpty */.xb)(readingFieldId))return this.error=!0,this.errorText=this.$t("jobplan.reading_needed"),!1;if("Number"===inputTypeHash[inputType]){var numberConfigValid=!0;return deviationOperatorId&&(0,validation/* isEmpty */.xb)(failureValue)&&(numberConfigValid=!1,this.error=!0,this.errorText=this.$t("jobplan.input_deviation")),deviationOperatorId&&!(0,validation/* isEmpty */.xb)(failureValue)&&failureValue===defaultValue&&9===deviationOperatorId&&(
// OperatorID of = is 9
numberConfigValid=!1,this.error=!0,this.errorText=this.$t("jobplan.same_def_deviation")),
// if (validation === 'safeLimit') {
//   let minLimitValid = true
//   let maxLimitValid = true
//   if (isEmpty(minSafeLimit)) {
//     this.error = true
//     this.errorText = this.$t('jobplan.minlimit_needed')
//     minLimitValid = !isEmpty(minSafeLimit)
//   }
//   if (isEmpty(maxSafeLimit)) {
//     this.error = true
//     this.errorText = this.$t('jobplan.maxlimit_needed')
//     maxLimitValid = !isEmpty(maxSafeLimit)
//   }
//   numberConfigValid = minLimitValid && maxLimitValid
// }
numberConfigValid&&(this.error=!1,this.errorText=""),numberConfigValid}
// if (createWoOnFailure && isEmpty(woCreateFormId)) {
//   this.error = true
//   this.errorText = this.$t('jobplan.select_wo_template')
//   return !isEmpty(woCreateFormId)
// }
if("Option"===inputTypeHash[inputType]){var OptionNotEmpty=!0,isAttachmentOptionValid=!0,isRemarkOptionValid=!0,deviationValueValid=!0;return inputOptions.forEach((function(option){var _ref29=option||{},value=_ref29.value;OptionNotEmpty=OptionNotEmpty&&!(0,validation/* isEmpty */.xb)(value)})),OptionNotEmpty||(this.error=!0,this.errorText=this.$t("jobplan.option_needed")),(0,validation/* isEmpty */.xb)(failureValue)||failureValue!==defaultValue||(deviationValueValid=!1,this.error=!0,this.errorText=this.$t("jobplan.same_def_deviation")),"specific"===attachmentOption&&(0,validation/* isEmpty */.xb)(attachmentOptionValues)&&(this.error=!0,this.errorText=this.$t("jobplan.select_attachment"),isAttachmentOptionValid=!(0,validation/* isEmpty */.xb)(attachmentOptionValues)),"specific"===remarkOption&&(0,validation/* isEmpty */.xb)(remarkOptionValues)&&(this.error=!0,this.errorText=this.$t("jobplan.select_remark"),isRemarkOptionValid=!(0,validation/* isEmpty */.xb)(remarkOptionValues)),OptionNotEmpty&&isAttachmentOptionValid&&isRemarkOptionValid&&deviationValueValid&&(this.error=!1,this.errorText=""),OptionNotEmpty&&isAttachmentOptionValid&&isRemarkOptionValid&&deviationValueValid}return this.error=!1,this.errorText="",!0},serialize:function(task){var _ref30=task||{},subject=_ref30.subject;return Object.keys(task).forEach((function(property){(0,validation/* isEmpty */.xb)(task[property])&&delete task[property]})),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{subject:subject})},setSelectedLookupValue:function(){var selectedLookupField=this.selectedLookupField,task=this.task,_ref31=selectedLookupField||{},lookupModuleName=_ref31.lookupModuleName,_ref32=task||{},_ref32$resource=_ref32.resource,resource=void 0===_ref32$resource?null:_ref32$resource;"assetcategory"===lookupModuleName?this.$set(this.task,"assetCategory",{id:resource}):this.$set(this.task,"spaceCategory",{id:resource}),(0,validation/* isEmpty */.xb)(resource)||this.initReadings()},showLookupWizard:function(_,canShow){this.canShowLookupWizard=canShow},setWizardValue:function(props){var field=props.field,_field$selectedItems=field.selectedItems,selectedItems=void 0===_field$selectedItems?[]:_field$selectedItems,selectedItemIds=[];(0,validation/* isEmpty */.xb)(selectedItems)||(selectedItemIds=selectedItems.find((function(item){return item.value})).value||{}),this.$set(this.task,"resource",selectedItemIds),this.setSelectedLookupValue(),this.initReadings()},resetResources:function(){var task=this.task;this.task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{resource:null,assetCategory:null,spaceCategory:null})},addTaskOption:function(selectedTask){var _ref33=selectedTask||{},inputOptions=_ref33.inputOptions,optionValue="Choice".concat(inputOptions.length+1);selectedTask.inputOptions.push({value:optionValue})},removeTaskOption:function(list,index){
//Removing the deleted option if its selected in configuration
var task=this.task,_ref34=task||{},remarkOptionValues=_ref34.remarkOptionValues,attachmentOptionValues=_ref34.attachmentOptionValues,defaultValue=_ref34.defaultValue,failureValue=_ref34.failureValue;
//Removing remarkoption selected
if(defaultValue===index&&(defaultValue=null),failureValue===index&&(failureValue=null),!(0,validation/* isEmpty */.xb)(remarkOptionValues)){var remarkIndex=remarkOptionValues.findIndex((function(option){return option===index}));remarkOptionValues.splice(remarkIndex,1)}
//Removing attachmentoption selected
if(!(0,validation/* isEmpty */.xb)(attachmentOptionValues)){var attachmentIndex=attachmentOptionValues.findIndex((function(option){return option===index}));attachmentOptionValues.splice(attachmentIndex,1)}this.task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{remarkOptionValues:remarkOptionValues,attachmentOptionValues:attachmentOptionValues,defaultValue:defaultValue,failureValue:failureValue}),list.splice(index,1)},resetInputs:function(val){if(!val){var task=this.task,inputTypeHash=this.inputTypeHash,_ref35=task||{},inputType=_ref35.inputType,readingContext={};"Reading"!==inputTypeHash[inputType]&&(readingContext.readings=[],readingContext.readingFieldId=null),this.task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),readingContext),{},{remarksRequired:!1,inputOptions:[{value:"Choice1"},{value:"Choice 2"}],remarkOptionValues:null,remarkOption:"all",defaultValue:null,attachmentRequired:!1,attachmentOptionValues:null,attachmentOption:"all",failureValue:null,deviationOperatorId:null,createWoOnFailure:!1})}},resetAttachmentValues:function(val){"all"===val&&(this.task.attachmentOptionValues=null)},resetRemarksValues:function(val){"all"===val&&(this.task.remarkOptionValues=null)},resetOptionValues:function(type){"remark"===type?(this.task.remarkOptionValues=null,this.task.remarkOption=null):(this.task.attachmentOptionValues=null,this.task.attachmentOption=null)},saveTaskInfo:function(){var updatedTask={},task=this.task,selectedTaskInfo=this.selectedTaskInfo,isValid=this.validateTask(task);isValid&&(task=this.serialize(task),updatedTask=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},selectedTaskInfo),{},{task:task}),this.$emit("taskUpdated",updatedTask))},closeTaskDialog:function(){this.$emit("update:canShowTaskDetails",!1)}}},tasks_creation_TaskDetailsvue_type_script_lang_js=TaskDetailsvue_type_script_lang_js,TaskDetails_component=(0,componentNormalizer/* default */.Z)(tasks_creation_TaskDetailsvue_type_script_lang_js,TaskDetailsvue_type_template_id_757f7e55_scoped_true_render,TaskDetailsvue_type_template_id_757f7e55_scoped_true_staticRenderFns,!1,null,"757f7e55",null)
/* harmony default export */,tasks_creation_TaskDetails=TaskDetails_component.exports,TasksListvue_type_template_id_465befaa_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("Draggable",{attrs:{list:_vm.tasks,options:_vm.taskSectionDragOptions,disabled:_vm.disableDrag,handle:".section-handle"}},_vm._l(_vm.tasks,(function(section,section_index){return _c("div",{key:section.sectionId,staticClass:"task-section"},[_c("div",{staticClass:"jp-section-header visibility-visible-actions"},[_c("div",{staticClass:"section-left"},[_c("div",{staticClass:"section-handle cursor-move mT15 mR10"},[_c("fc-icon",{attrs:{group:"default",name:"drag",size:"22",color:"#cbc9c9"}})],1),_c("el-input",{ref:section.section+" - "+section_index,refInFor:!0,staticClass:"mL2 fc-input-border-remove mT9 section-name",attrs:{"data-test-selector":"Section_Subject",type:"text"},on:{blur:function($event){return _vm.onSectionInputBlur.apply(void 0,arguments)}},model:{value:section.name,callback:function($$v){_vm.$set(section,"name",$$v)},expression:"section.name"}})],1),_c("div",{staticClass:"task-setup d-flex"},[_c("div",{staticClass:"section-customization"},[_c("div",{staticClass:"pT10 pointer pR10",on:{click:function($event){return _vm.openSectionSetting(section_index)}}},[_c("fc-icon",{attrs:{group:"default",name:"settings",size:"18"}})],1)]),1===_vm.tasks.length?_c("div",{staticClass:"space-filler"}):_c("div",{staticClass:"pT10 space-filler pointer",on:{click:function($event){return _vm.deleteSection(section_index)}}},[_c("fc-icon",{attrs:{group:"default",name:"trash-can",size:"18"}})],1)])]),_c("div",{staticClass:"task-list-container"},[_c("Draggable",_vm._b({attrs:{handle:".task-handle",disabled:_vm.disableDrag},on:{change:function($event){return _vm.handleTaskDrag(section_index)}},model:{value:section.tasks,callback:function($$v){_vm.$set(section,"tasks",$$v)},expression:"section.tasks"}},"Draggable",_vm.taskDragOptions,!1),_vm._l(section.tasks,(function(task,taskIndex){return _c("div",{key:taskIndex},[_c("div",{staticClass:"task-row visibility-visible-actions"},[_c("div",{staticClass:"task-left"},[_c("div",{staticClass:"task-prefix d-flex"},[_c("div",{staticClass:"task-handle cursor-move mT10 mR10"},[_c("fc-icon",{attrs:{group:"default",name:"drag",size:"22",color:"#cbc9c9"}})],1)]),_c("div",{staticClass:"d-flex task-id-section mT10"},[_c("el-input",{staticClass:"fc-input-border-remove",attrs:{"data-test-selector":"Section_ID",type:"number"},on:{blur:function($event){return _vm.onSequenceBlur.apply(void 0,arguments)}},model:{value:task.taskId,callback:function($$v){_vm.$set(task,"taskId",$$v)},expression:"task.taskId"}})],1),_c("el-input",{ref:section.section+" - "+section_index+" ~ "+taskIndex,refInFor:!0,staticClass:"mL10 fc-input-border-remove mT10",attrs:{"data-test-selector":"Section_Subject",type:"text",placeholder:_vm.taskPlaceHolder},on:{blur:function($event){return _vm.onInputBlur.apply(void 0,arguments)}},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.addNewTask(section_index)}},model:{value:task.subject,callback:function($$v){_vm.$set(task,"subject",$$v)},expression:"task.subject"}})],1),_c("div",{staticClass:"task-setup d-flex visibility-visible-actions"},[_c("div",{staticClass:"task-customization d-flex pT10"},[_c("div",{staticClass:"pR10 visibility-hide-actions",on:{click:function($event){return _vm.openTaskSetting(section_index,taskIndex)}}},[_c("fc-icon",{attrs:{group:"default",name:"settings",size:"18"}})],1)]),1===section.tasks.length?_c("div",{staticClass:"space-filler"}):_c("div",{staticClass:"pT10 space-filler visibility-hide-actions",on:{click:function($event){return _vm.deleteTask(section_index,taskIndex)}}},[_c("fc-icon",{attrs:{group:"default",name:"trash-can",size:"18"}})],1)])])])})),0)],1),_c("div",{staticClass:"add-task"},[_c("el-button",{staticClass:"fc-secondary-btn add-task-btn",on:{click:function($event){return _vm.addNewTask(section_index)}}},[_vm._v(_vm._s(_vm.taskButtonTitle))])],1),_c("div",{staticClass:"add-section"},[_c("div",{staticClass:"seperator-line"}),_c("el-button",{staticClass:"fc-secondary-btn add-section-btn",on:{click:function($event){return _vm.addNewSection(section_index)}}},[_vm._v(_vm._s(_vm.$t("jobplan.add_section")))])],1)])})),0)},TasksListvue_type_template_id_465befaa_scoped_true_staticRenderFns=[],vuedraggable_umd=(__webpack_require__(634338),__webpack_require__(909980)),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),INIT_TASK={subject:null,statusNew:1,taskId:1},INIT_SECTION={name:null,sectionId:null,jobPlanSectionCategory:5,statusNew:1,tasks:[{subject:null,statusNew:1,taskId:1,jobPlanSectionCategory:5,jobPlanTaskCategory:5}]},TasksListvue_type_script_lang_js={props:["taskList","disableDrag","isPreRequisite","isJobPlan","formModel"],components:{Draggable:vuedraggable_umd_default()},data:function(){return{sectionIndex:1}},computed:{tasks:{get:function(){return this.taskList},set:function(value){this.$emit("update:taskList",value)}},taskPlaceHolder:function(){var isPreRequisite=this.isPreRequisite;return isPreRequisite?this.$t("jobplan.enter_preq"):this.$t("jobplan.task_placeholder")},taskSectionDragOptions:function(){return{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0}},taskDragOptions:function(){return{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasks",sort:!0}},taskButtonTitle:function(){var isPreRequisite=this.isPreRequisite;return isPreRequisite?this.$t("jobplan.add_prerequisite"):this.$t("maintenance._workorder.add_task")}},methods:{addNewTask:function(sectionIndex){var _this=this,taskObject=cloneDeep_default()(INIT_TASK),taskList=this.tasks,taskSection=taskList[sectionIndex]||{},tasks=this.$getProperty(taskSection,"tasks",[]),canAddTask=this.validateTasks(tasks);if(canAddTask){var taskId=tasks.length+1;taskObject=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},taskObject),{},{taskId:taskId}),tasks.push(taskObject),this.setJobPlanSection(sectionIndex,"tasks",tasks),this.$nextTick((function(){_this.preFillSectionSettings(_this.tasks,sectionIndex)}))}else this.$message.error("Specify Task Subject")},validateTasks:function(tasks){var validTasks=!0;return tasks.forEach((function(task){var _ref=task||{},subject=_ref.subject;validTasks=validTasks&&!(0,validation/* isEmpty */.xb)(subject)})),validTasks},preFillSectionSettings:function(taskList,sectionIndex){var sectionInfo=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},formModel=this.formModel,section=(0,validation/* isEmpty */.xb)(sectionInfo)?taskList[sectionIndex]:sectionInfo;
//Prefilling Task with Section setting Values
if(!(0,validation/* isEmpty */.xb)(section)){var sectionData=cloneDeep_default()(section),excludeFields=["assetCategory","spaceCategory"];excludeFields.forEach((function(excludeField){return delete(sectionData||{})[excludeField]})),delete sectionData["tasks"],delete sectionData["sectionId"],section.tasks=section.tasks.map((function(task){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},sectionData),task)}))}section=(0,scope_util/* addResourceParams */.wY)(formModel,section),this.setJobPlanSection(sectionIndex,"",section)},deleteTask:function(sectionIndex,taskIndex){var taskList=this.tasks,section=taskList[sectionIndex]||{},_ref2=section||{},_ref2$tasks=_ref2.tasks,tasks=void 0===_ref2$tasks?[]:_ref2$tasks;tasks.splice(taskIndex,1),section.tasks=tasks,this.setJobPlanSection(sectionIndex,"",section),this.handleTaskDrag(sectionIndex)},handleTaskDrag:function(sectionIndex){var taskList=this.tasks,taskSection=taskList[sectionIndex]||{};if(!(0,validation/* isEmpty */.xb)(taskSection)){var _ref3=taskSection||{},_ref3$tasks=_ref3.tasks,tasks=void 0===_ref3$tasks?[]:_ref3$tasks;this.setJobPlanSection(sectionIndex,"tasks",tasks)}},addNewSection:function(currentSectionIndex){var taskList=this.taskList,formModel=this.formModel,currentSection=taskList[currentSectionIndex],_ref4=currentSection||{},_ref4$tasks=_ref4.tasks,tasks=void 0===_ref4$tasks?[]:_ref4$tasks;if(this.validateTasks(tasks)){var sectionId=(0,uuid.v4)().substring(0,4),name="Untitled Section ".concat(taskList.length+1),newTaskSection=cloneDeep_default()(INIT_SECTION);newTaskSection=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},newTaskSection),{},{sectionId:sectionId,name:name}),newTaskSection=(0,scope_util/* addResourceParams */.wY)(formModel,newTaskSection),currentSectionIndex<taskList.length-1?this.tasks.splice(currentSectionIndex+1,0,newTaskSection):this.tasks.push(newTaskSection),this.sectionIndex+=1}else this.$message.error("Specify Task Subject")},deleteSection:function(sectionIndex){this.tasks.splice(sectionIndex,1)},setJobPlanSection:function(sectionIndex,property,value){(0,validation/* isEmpty */.xb)(property)?this.$set(this.tasks,sectionIndex,value):this.$set(this.tasks,"".concat(sectionIndex,".").concat(property),value)},onInputBlur:function(event){var value=event.target.value;(0,validation/* isEmpty */.xb)(value)&&this.$message.error(this.$t("jobplan.specify_task_subject"))},onSectionInputBlur:function(event){var value=event.target.value;(0,validation/* isEmpty */.xb)(value)&&this.$message.error(this.$t("jobplan.specify_section_input"))},onSequenceBlur:function(event){var value=event.target.value;(0,validation/* isEmpty */.xb)(value)&&this.$message.error(this.$t("jobplan.sequence_empty"))},openTaskSetting:function(sectionIndex,taskIndex){this.$emit("openTaskSetting",{sectionIndex:sectionIndex,taskIndex:taskIndex})},openSectionSetting:function(sectionIndex){this.$emit("openSectionSetting",{sectionIndex:sectionIndex})}}},tasks_creation_TasksListvue_type_script_lang_js=TasksListvue_type_script_lang_js,TasksList_component=(0,componentNormalizer/* default */.Z)(tasks_creation_TasksListvue_type_script_lang_js,TasksListvue_type_template_id_465befaa_scoped_true_render,TasksListvue_type_template_id_465befaa_scoped_true_staticRenderFns,!1,null,"465befaa",null)
/* harmony default export */,TasksList=TasksList_component.exports,isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),TasksLayoutvue_type_script_lang_js={name:"TasksLayout",data:function(){return{sectionIndex:1,disableDrag:!1,taskList:[],selectedSection:{},selectedTaskInfo:{},showSectionSettings:!1,canShowTaskDetails:!1,
//woForms: null,
oldFormModel:{},preventWatcher:!1}},props:["type","isEdit","value","formModel","isJobPlan"],components:{TaskSectionDetails:TaskSectionDetails,TaskDetails:tasks_creation_TaskDetails,TasksList:TasksList},created:function(){var value=this.value,isEdit=this.isEdit;
//this.loadWoForms()
!(0,validation/* isEmpty */.xb)(value)&&isEdit&&this.prefillJobPlanTasks(),this.setPreviousModel()},computed:{isTasksEmpty:function(){var taskList=this.taskList;return(0,validation/* isEmpty */.xb)(taskList)},sectionButtonTitle:function(){var isPreRequisite=this.isPreRequisite;return isPreRequisite?this.$t("jobplan.add_prerequisite"):this.$t("maintenance._workorder.add_task")},isPreRequisite:function(){var type=this.type;return"JP_PREREQUISITE"===type}},watch:{taskList:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:(0,validation/* isEmpty */.xb)(newVal)||_this.serializeTasks(newVal);case 1:case"end":return _context.stop()}}),_callee)})))()},deep:!0,immediate:!0},formModel:{handler:function(newVal){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var taskList,preventWatcher,oldFormModel,_ref,jobPlanCategory,_ref2,newJobPlanCategory,_ref2$jobplansection,jobplansection,oldJobPlanCategoryId,newJobPlanCategoryId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(taskList=_this2.taskList,preventWatcher=_this2.preventWatcher,oldFormModel=_this2.oldFormModel,_ref=oldFormModel||{},jobPlanCategory=_ref.jobPlanCategory,_ref2=newVal||{},newJobPlanCategory=_ref2.jobPlanCategory,_ref2$jobplansection=_ref2.jobplansection,jobplansection=void 0===_ref2$jobplansection?[]:_ref2$jobplansection,oldJobPlanCategoryId=_this2.$getProperty(jobPlanCategory,"id",null),newJobPlanCategoryId=_this2.$getProperty(newJobPlanCategory,"id",null),isEqual_default()(oldJobPlanCategoryId,newJobPlanCategoryId)||preventWatcher||(0,validation/* isEmpty */.xb)(oldJobPlanCategoryId)){_context2.next=8;break}return _context2.next=8,_this2.showConfirmCategorySwitch();case 8:(0,validation/* isEmpty */.xb)(jobplansection)||isEqual_default()(jobplansection,taskList)||preventWatcher||_this2.$set(_this2,"taskList",jobplansection),_this2.$nextTick((function(){_this2.setPreviousModel(),_this2.preventWatcher=!1}));case 10:case"end":return _context2.stop()}}),_callee2)})))()},deep:!0}},methods:{showConfirmCategorySwitch:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var dialogObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return dialogObj={htmlMessage:_this3.$t("jobplan.scope_switch"),rbLabel:_this3.$t("maintenance.pm.proceed"),rbClass:"jp-edit-dialog-btn",className:"jp-edit-dialog"},_context3.next=3,_this3.$dialog.confirm(dialogObj).then((function(value){if(value)_this3.resetScoping();else{var oldFormModel=_this3.oldFormModel,formModel=_this3.formModel,_ref3=oldFormModel||{},jobPlanCategory=_ref3.jobPlanCategory;_this3.$emit("updateFormModel",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formModel),{},{jobPlanCategory:jobPlanCategory})),_this3.preventWatcher=!0}}));case 3:case"end":return _context3.stop()}}),_callee3)})))()},setPreviousModel:function(){var formModel=this.formModel,prevModel=cloneDeep_default()(formModel);this.oldFormModel=prevModel},resetScoping:function(){var formModel=this.formModel,_ref4=formModel||{},_ref4$jobplansection=_ref4.jobplansection,jobplansection=void 0===_ref4$jobplansection?[]:_ref4$jobplansection;if(!(0,validation/* isEmpty */.xb)(jobplansection)){var serializedTaskList=jobplansection.map((function(section){var _ref5=section||{},tasks=_ref5.tasks,serializedTasks=tasks.map((function(task){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{jobPlanSectionCategory:5,jobPlanTaskCategory:5,resource:null,assetCategory:null,spaceCategory:null,readings:[],readingFieldId:null})})),serializedSection=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{jobPlanSectionCategory:5,resource:null,assetCategory:null,spaceCategory:null,tasks:serializedTasks});return serializedSection=(0,scope_util/* addResourceParams */.wY)(formModel,serializedSection),serializedSection}));this.taskList=serializedTaskList,this.setPreviousModel(),this.preventWatcher=!0}},prefillJobPlanTasks:function(){var _this4=this,_this$value=this.value,jobPlanSections=void 0===_this$value?[]:_this$value,formModel=this.formModel;jobPlanSections=jobPlanSections.map((function(section){var sectionId=(0,uuid.v4)().substring(0,4),_ref6=section||{},_ref6$tasks=_ref6.tasks,tasks=void 0===_ref6$tasks?[]:_ref6$tasks,name=_ref6.name,jobPlanSectionCategory=_ref6.jobPlanSectionCategory;name=name.replace("JP-",""),section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{name:name,sectionId:sectionId});var serializedTasks=[];(0,validation/* isEmpty */.xb)(tasks)||(serializedTasks=tasks.map((function(task){var _ref7=task||{},subject=_ref7.subject,sequence=_ref7.sequence,taskSubject=subject.replace("JP-",""),taskId=sequence,serializedTask=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{subject:taskSubject,taskId:taskId,jobPlanSectionCategory:jobPlanSectionCategory});return serializedTask})));var serializedSection=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{tasks:serializedTasks});return serializedSection=(0,scope_util/* addResourceParams */.wY)(formModel,serializedSection),serializedSection=_this4.fillInputConfig(serializedSection),serializedSection})),this.taskList=jobPlanSections,this.serializeTasks(this.taskList)},fillInputConfig:function(section){var inputHash={2:"Reading",3:"Text",4:"Number",5:"Option"},_ref8=section||{},inputType=_ref8.inputType,tasks=_ref8.tasks;
//Filling Section Input Configuration  if its Option Type
if("Option"===inputHash[inputType]){var _ref9=section||{},_ref9$inputOptions=_ref9.inputOptions,inputOptions=void 0===_ref9$inputOptions?[]:_ref9$inputOptions,remarkOptionValues=_ref9.remarkOptionValues,attachmentOptionValues=_ref9.attachmentOptionValues,defaultValue=_ref9.defaultValue,failureValue=_ref9.failureValue;(0,validation/* isEmpty */.xb)(defaultValue)||(defaultValue=inputOptions.findIndex((function(option){return option.value===defaultValue}))),(0,validation/* isEmpty */.xb)(failureValue)||(failureValue=inputOptions.findIndex((function(option){return option.value===failureValue}))),(0,validation/* isEmpty */.xb)(attachmentOptionValues)||(attachmentOptionValues=(attachmentOptionValues||[]).map((function(optionValue){var selectedValue=inputOptions.findIndex((function(option){return option.value===optionValue}));return selectedValue}))),(0,validation/* isEmpty */.xb)(remarkOptionValues)||(remarkOptionValues=(remarkOptionValues||[]).map((function(optionValue){var selectedValue=inputOptions.findIndex((function(option){return option.value===optionValue}));return selectedValue}))),section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{remarkOptionValues:remarkOptionValues,attachmentOptionValues:attachmentOptionValues,defaultValue:defaultValue,failureValue:failureValue})}return tasks=tasks.map((function(task){var _ref10=task||{},taskInput=_ref10.inputType;
//Filling Task Input Configuration if its Option Type
if("Option"===inputHash[taskInput]){var _ref11=task||{},_ref11$inputOptions=_ref11.inputOptions,taskInputOptions=void 0===_ref11$inputOptions?[]:_ref11$inputOptions,taskRemarkOptions=_ref11.remarkOptionValues,taskAttachmentOptions=_ref11.attachmentOptionValues,taskDefaultValue=_ref11.defaultValue,taskFailureValue=_ref11.failureValue;(0,validation/* isEmpty */.xb)(taskDefaultValue)||(taskDefaultValue=taskInputOptions.findIndex((function(option){return option.value===taskDefaultValue}))),(0,validation/* isEmpty */.xb)(taskFailureValue)||(taskFailureValue=taskInputOptions.findIndex((function(option){return option.value===taskFailureValue}))),(0,validation/* isEmpty */.xb)(taskAttachmentOptions)||(taskAttachmentOptions=(taskAttachmentOptions||[]).map((function(optionValue){var selectedValue=taskInputOptions.findIndex((function(option){return option.value===optionValue}));return selectedValue}))),(0,validation/* isEmpty */.xb)(taskRemarkOptions)||(taskRemarkOptions=(taskRemarkOptions||[]).map((function(optionValue){var selectedValue=taskInputOptions.findIndex((function(option){return option.value===optionValue}));return selectedValue}))),task=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{remarkOptionValues:taskRemarkOptions,attachmentOptionValues:taskAttachmentOptions,defaultValue:taskDefaultValue,failureValue:taskFailureValue})}return task})),section=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{tasks:tasks}),section},
// async loadWoForms() {
//   let url = `/v2/forms?moduleName=workorder`
//   let { error, data } = await API.get(url)
//   if (error) {
//     this.$message.error('Error Occured')
//   } else {
//     let { forms = [] } = data || {}
//     this.woForms = forms.filter(
//       form => form.id > 0 && form.name !== 'default_workorder_web'
//     )
//   }
// },
addNewSection:function(){var taskListComp=this.$refs["task-list-jp"];(0,validation/* isEmpty */.xb)(taskListComp)||taskListComp.addNewSection(),this.preFillSectionSettings(this.taskList,0)},openSectionSetting:function(props){var _ref12=props||{},sectionIndex=_ref12.sectionIndex,taskList=this.taskList;this.selectedSection=taskList[sectionIndex],this.showSectionSettings=!0},openTaskSetting:function(props){var _ref13=props||{},sectionIndex=_ref13.sectionIndex,taskIndex=_ref13.taskIndex,taskList=this.taskList,selectedSection=taskList[sectionIndex]||{},_ref14=selectedSection||{},_ref14$tasks=_ref14.tasks,tasks=void 0===_ref14$tasks?[]:_ref14$tasks,taskObj=tasks[taskIndex];this.selectedTaskInfo={task:taskObj,sectionIndex:sectionIndex,taskIndex:taskIndex},this.canShowTaskDetails=!0},preFillSectionSettings:function(taskList,sectionIndex){var sectionInfo=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},formModel=this.formModel,section=(0,validation/* isEmpty */.xb)(sectionInfo)?taskList[sectionIndex]:sectionInfo;
//Prefilling Task with Section setting Values
if(!(0,validation/* isEmpty */.xb)(section)){var sectionData=cloneDeep_default()(section),_ref15=sectionData||{},_ref15$tasks=_ref15.tasks,tasks=void 0===_ref15$tasks?[]:_ref15$tasks,excludeFields=["tasks","assetCategory","spaceCategory"];excludeFields.forEach((function(excludeField){return delete(sectionData||{})[excludeField]}));var updatedTasks=tasks.map((function(task){var _ref16=sectionData||{},sectionCategory=_ref16.jobPlanSectionCategory,_ref17=task||{},previousSectionCategory=_ref17.jobPlanSectionCategory,subject=_ref17.subject,assetCategory=_ref17.assetCategory,spaceCategory=_ref17.spaceCategory,resource=_ref17.resource,description=_ref17.description,taskId=_ref17.taskId,scoping={};return isEqual_default()(sectionCategory,previousSectionCategory)||(0,validation/* isEmpty */.xb)(previousSectionCategory)||(scoping={jobPlanSectionCategory:sectionCategory,jobPlanTaskCategory:null,resource:null}),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},sectionData),{},{subject:subject,assetCategory:assetCategory,spaceCategory:spaceCategory,resource:resource,description:description,taskId:taskId},scoping)}));section.tasks=updatedTasks,section=(0,scope_util/* addResourceParams */.wY)(formModel,section);var taskListComp=this.$refs["task-list-jp"];(0,validation/* isEmpty */.xb)(taskListComp)||taskListComp.setJobPlanSection(sectionIndex,"",section)}},updateSection:function(section){var _ref18=section||{},sectionId=_ref18.sectionId,taskList=this.taskList,sectionIndex=taskList.findIndex((function(section){return section.sectionId===sectionId}));this.preFillSectionSettings(taskList,sectionIndex,section),this.serializeTasks(taskList),this.showSectionSettings=!1},updateTaskDetails:function(taskInfo){var _ref19=taskInfo||{},sectionIndex=_ref19.sectionIndex,taskIndex=_ref19.taskIndex,task=_ref19.task,taskList=this.taskList,section=taskList[sectionIndex]||{},_ref20=section||{},_ref20$tasks=_ref20.tasks,tasks=void 0===_ref20$tasks?[]:_ref20$tasks;tasks.splice(taskIndex,1,task);var taskListComp=this.$refs["task-list-jp"];(0,validation/* isEmpty */.xb)(taskListComp)||taskListComp.setJobPlanSection(sectionIndex,"tasks",tasks),this.serializeTasks(this.taskList),this.canShowTaskDetails=!1},setCurrentResourceScope:function(tasksList){var formModel=this.formModel,_ref21=formModel||{},jobPlanCategory=_ref21.jobPlanCategory,_ref22=jobPlanCategory||{},jobPlanScope=_ref22.id,serializedTaskList=tasksList;return["ASSETS"].includes(scope_util/* JOB_PLAN_SCOPE */.QY[jobPlanScope])&&(serializedTaskList=tasksList.map((function(section){var _ref23=section||{},tasks=_ref23.tasks,serializedTasks=tasks.map((function(task){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},task),{},{jobPlanTaskCategory:5})}));return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{jobPlanSectionCategory:5,tasks:serializedTasks})}))),serializedTaskList},serializeTasks:function(taskList){taskList=this.setCurrentResourceScope(taskList),this.preventWatcher=!0,this.$emit("input",taskList)}}},tasks_creation_TasksLayoutvue_type_script_lang_js=TasksLayoutvue_type_script_lang_js,TasksLayout_component=(0,componentNormalizer/* default */.Z)(tasks_creation_TasksLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,"cdcc8864",null)
/* harmony default export */,TasksLayout=TasksLayout_component.exports},
/***/767004:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ConnectedAppViewWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/connectedapps/ConnectedAppViewWidget.vue?vue&type=template&id=2a629fff
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_vm._e():_c("div",{staticClass:"height100 customize-scroll-hidden"},[_c("form",{ref:"formSubmit",attrs:{action:_vm.actionUrl,method:_vm.samlResponse?"POST":"GET",target:"iframeWidget-"+_vm.widgetId}},[_c("input",{attrs:{type:"hidden",name:"origin"},domProps:{value:_vm.origin}}),_c("input",{attrs:{type:"hidden",name:"capp_id"},domProps:{value:_vm.instanceUid}}),_vm.urlParams?_vm._l(_vm.urlParams,(function(param,index){return _c("input",{key:index,attrs:{type:"hidden",name:param.name},domProps:{value:param.value}})})):_vm._e(),_vm.samlResponse?_c("input",{attrs:{type:"hidden",name:"SAMLResponse"},domProps:{value:_vm.samlResponse}}):_vm._e(),_vm.relay?_c("input",{attrs:{type:"hidden",name:"RelayState"},domProps:{value:_vm.relay}}):_vm._e()],2),_c("iframe",{ref:"cappFrame",staticClass:"fc-connected-app-iframe",staticStyle:{width:"100%",height:"100%",border:"0px"},attrs:{name:"iframeWidget-"+_vm.widgetId,allow:"geolocation *; microphone *;  camera *;"}},[_vm._v(" The URL cannot be loaded in iframe. ")])])},staticRenderFns=[],slicedToArray=__webpack_require__(554621),createForOfIteratorHelper=__webpack_require__(566347),api=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(478730),__webpack_require__(779307),__webpack_require__(398858),__webpack_require__(461318),__webpack_require__(33228),__webpack_require__(670560),__webpack_require__(32284)),ConnectedAppViewWidgetvue_type_script_lang_js={props:["widgetId","recordId","context","handlers","exportMode"],data:function(){return{loading:!0,origin:null,instanceUid:null,urlParams:null,actionUrl:null,samlResponse:null,relay:null}},computed:{widgetKey:function(){var key=this.widgetId+"";return this.recordId&&(key=key+"_"+this.recordId),key}},mounted:function(){this.loadConnectedAppWidget()},watch:{widgetKey:function(){this.loadConnectedAppWidget()}},beforeDestroy:function(){this.destroyCurrentInstance()},methods:{getActions:function(){var _this=this;return{fullscreen:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&(_this.$refs.cappFrame.requestFullscreen?_this.$refs.cappFrame.requestFullscreen():_this.$refs.cappFrame.webkitRequestFullscreen?_this.$refs.cappFrame.webkitRequestFullscreen():_this.$refs.cappFrame.mozRequestFullScreen?_this.$refs.cappFrame.mozRequestFullScreen():_this.$refs.cappFrame.msRequestFullscreen&&_this.$refs.cappFrame.msRequestFullscreen(),!0)},trigger:function(namespace,options){if(_this.handlers&&_this.handlers[namespace]&&"function"===typeof _this.handlers[namespace]){var returnValue=_this.handlers[namespace](options);return"undefined"===typeof returnValue||returnValue}return!1}}},getWidgetLinkName:function(key){if(key&&(key+="",key.indexOf("_")>0&&2===key.split("_").length)){var cappLink=key.split("_")[0],widgetLink=key.split("_")[1];if(cappLink.length&&widgetLink.length)return cappLink+"."+widgetLink}return null},loadConnectedAppWidget:function(){var _this2=this;this.destroyCurrentInstance(),this.loading=!0;var url="/v2/connectedApps/viewWidget?";this.getWidgetLinkName(this.widgetId)?url+="&widgetLinkName="+this.getWidgetLinkName(this.widgetId):url+="&widgetId="+this.widgetId,this.recordId&&(url+="&recordId="+this.recordId),api/* API */.bl.get(url).then((function(response){var data=response.data;if(_this2.loading=!1,data.viewUrl){_this2.samlResponse=data.samlResponse,_this2.relay=data.relay,_this2.actionUrl=_this2.samlResponse?data.acsURL:data.viewUrl;var connectedAppWidget=data.connectedAppWidget||{};_this2.$nextTick((function(){var frame=_this2.$refs.cappFrame.contentWindow,widgetOrigin=new URL(data.viewUrl).protocol+"//"+new URL(data.viewUrl).host;_this2.instanceUid=_this2.$connectedAppEventChannel.attachWidget(connectedAppWidget,_this2.context,{frame:frame,origin:widgetOrigin},_this2.getActions(),_this2.exportMode||!1),_this2.origin=_this2.$connectedAppEventChannel.getOrigin();var _step,urlParamsList=[],urlSearchParams=new URL(data.viewUrl).searchParams,_iterator=(0,createForOfIteratorHelper/* default */.Z)(urlSearchParams.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=(0,slicedToArray/* default */.Z)(_step.value,2),key=_step$value[0],value=_step$value[1];urlParamsList.push({name:key,value:value})}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this2.urlParams=urlParamsList,_this2.$nextTick((function(){_this2.$refs.formSubmit.submit()}))}))}}))},destroyCurrentInstance:function(){this.instanceUid&&(this.$connectedAppEventChannel.deattachWidget(this.instanceUid),this.instanceUid=null)},sendEvent:function(key,data){this.instanceUid&&this.$connectedAppEventChannel.sendEventToInstance(this.instanceUid,key,data)}}},connectedapps_ConnectedAppViewWidgetvue_type_script_lang_js=ConnectedAppViewWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(connectedapps_ConnectedAppViewWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ConnectedAppViewWidget=component.exports},
/***/742727:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return IndoorFloorPlanMarkerToolipNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/IndoorFloorPlanMarkerToolipNew.vue?vue&type=template&id=05a67308&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"marker-tooltip"},[_vm.tooltipData?_c("div",{staticClass:"desk-tooltip"},[_vm.tooltipData.title?_c("div",{staticClass:"tooltip-header d-flex"},[_vm.tooltipData.title.icon?_c("InlineSvg",{staticClass:"mR5 mT1",attrs:{src:"svgs/indoorFloorPlan/"+_vm.tooltipData.title.icon,iconClass:"icon icon-sm-md",inonStyle:"background:#ffffff;fill:#ffffff;"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.tooltipData.title.label)+" ")],1):_vm._e(),_c("div",{staticClass:"tooltip-body"},["MODULE_LINKED"===_vm.tooltipData.markerType&&_vm.tooltipData.recordId?_c("div",{staticClass:"tooltip-row "},[_c("div",{staticClass:"tooltip-value"},[_vm._v(" "+_vm._s("# "+_vm.tooltipData.recordId)+" ")])]):_vm._e(),_vm.tooltipData.content?_vm._l(_vm.tooltipData.content,(function(content,index){return _c("div",{key:index,staticClass:"tooltip-row "},[content.icon?_c("InlineSvg",{staticClass:"mR15 mT2",attrs:{iconStyle:"opacity:.2;",src:"svgs/indoorFloorPlan/"+content.icon,iconClass:"icon icon-sm"}}):_vm._e(),"unassigned"===content.label?_c("div",{staticClass:"fp-unassigned-employee tooltip-value"},[_vm._v(" "+_vm._s(content.label)+" ")]):_c("div",{staticClass:"tooltip-value"},[_vm._v(" "+_vm._s(content.label)+" ")])],1)})):_vm._e()],2)]):_vm._e()])},staticRenderFns=[],IndoorFloorPlanMarkerToolipNewvue_type_script_lang_js={props:["tooltipData"],computed:{showreservable:function(){var tooltipData=this.tooltipData;return!!(tooltipData&&tooltipData.space&&tooltipData.space.category)&&("Lockers"!==tooltipData.space.category&&(tooltipData.space.category,!0))}},methods:{pathIcon:function(icon){return __webpack_require__(614607)("./".concat(icon))}}},indoorFloorPlan_IndoorFloorPlanMarkerToolipNewvue_type_script_lang_js=IndoorFloorPlanMarkerToolipNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(indoorFloorPlan_IndoorFloorPlanMarkerToolipNewvue_type_script_lang_js,render,staticRenderFns,!1,null,"05a67308",null)
/* harmony default export */,IndoorFloorPlanMarkerToolipNew=component.exports},
/***/769240:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return IndoorFloorPlanViewer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/IndoorFloorPlanViewer.vue?vue&type=template&id=7d885355&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("base-map",{staticClass:"width100",attrs:{maxZoom:22,zoom:20,minZoom:10},on:{mapLoaded:_vm.mapLoaded}})},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),es=(__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(879288),__webpack_require__(648324),__webpack_require__(339772),__webpack_require__(98602)),dist_es=__webpack_require__(701449),api=__webpack_require__(32284),ViewerActions=__webpack_require__(381904),MapBoxBase=__webpack_require__(605552),mapbox_gl=__webpack_require__(706158),mapbox_gl_default=__webpack_require__.n(mapbox_gl),vuex_esm=__webpack_require__(420629),router=__webpack_require__(329435),validation=__webpack_require__(990260),eventBus=__webpack_require__(398011),IndoorFloorPlanViewervue_type_script_lang_js={mixins:[ViewerActions/* default */.Z],data:function(){return{mouseDownClicked:!1,selectedHoverZone:null,isDraging:!1,prevId:null,fpEditor:!1,move:{},floorplanSwitch:!1,popup:null,clickPopup:null,isClickPopupActive:!1,tooltipData:{employee:{},desk:{},label:null,markerType:null},deskTypeEnumMap:{},moduleVsData:{},hoveredMarker:null,secondaryMarkers:{},viewerMode:"ASSIGNMENT"}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser","getTicketStatus"])),{},{floorplanTypesLength:function(){
// have to remove
return(0,validation/* isEmpty */.xb)(this.floorplanTypes)&&(0,validation/* isUndefined */.o8)(this.floorplanTypes)?0:Object.keys(this.floorplanTypes).length},parkingSpaceCategory:function(){var parking=this.spaceCategories.find((function(rt){return"Parking Stall"===rt.name}));return parking||null},parkingSpaceCategoryId:function(){return this.parkingSpaceCategory?this.parkingSpaceCategory.id:null},lockerCatgegory:function(){var locker=this.spaceCategories.find((function(rt){return"Lockers"===rt.name}));return locker||null},lockerSpaceCatgegoryId:function(){return this.lockerCatgegory?this.lockerCatgegory.id:null},markerModuleVsId:function(){var markers=this.indoorFloorPlan.markers,map={};return markers.forEach((function(marker){if(marker&&marker.markerModuleId&&marker.recordId&&!marker.desk)if(map[marker.markerModuleId]&&map[marker.markerModuleId].length){var d=map[marker.markerModuleId];map[marker.markerModuleId]=[].concat((0,toConsumableArray/* default */.Z)(d),[String(marker.recordId)])}else map[marker.markerModuleId]=[String(marker.recordId)]})),map},parkingModule:function(){var modules=this.modules;if(modules){var mod=modules.find((function(rt){return"parkingstall"===rt.name}));if(mod)return mod}return null},lockerModule:function(){var modules=this.modules;if(modules){var mod=modules.find((function(rt){return"lockers"===rt.name}));if(mod)return mod}return null},lockerList:function(){var _this=this,zones=this.zones,features=zones.features,data=[];return features&&features.length&&features.forEach((function(feature){var _feature$properties;if(null!==feature&&void 0!==feature&&null!==(_feature$properties=feature.properties)&&void 0!==_feature$properties&&_feature$properties.markerModuleId&&feature.properties.markerModuleId===_this.lockerModuleId){var properties=feature.properties,desk={id:properties.recordId,name:properties.label,isBooked:properties.isBooked,isOccupied:properties.isOccupied};properties.employeeId&&(desk["employee"]={id:properties.employeeId}),properties.departmentId&&(desk["department"]={id:properties.departmentId}),data.push(desk)}})),data},parkingList:function(){var _this2=this,zones=this.zones,features=zones.features,data=[];return features&&features.length&&features.forEach((function(feature){var _feature$properties2;if(null!==feature&&void 0!==feature&&null!==(_feature$properties2=feature.properties)&&void 0!==_feature$properties2&&_feature$properties2.markerModuleId&&feature.properties.markerModuleId===_this2.parkingModuleId){var properties=feature.properties,parking={id:properties.recordId,name:properties.label,isBooked:properties.isBooked,isOccupied:properties.isOccupied,isReservable:feature.isReservable};feature.isReservable&&delete parking.isOccupied,properties.employeeId&&(parking["employee"]={id:properties.employeeId}),properties.departmentId&&(parking["department"]={id:properties.departmentId}),data.push(parking)}})),data},lockerModuleId:function(){return this.lockerModule?this.lockerModule.moduleId:null},parkingModuleId:function(){return this.parkingModule?this.parkingModule.moduleId:null},parkingRecordIds:function(){var _this3=this,ids=[];return this.spaceList.forEach((function(space){space.spaceCategory&&space.spaceCategory.id===_this3.parkingSpaceCategoryId&&ids.push(String(space.id))})),ids},LockerRecordIds:function(){var _this4=this,ids=[];return this.spaceList.forEach((function(space){space.spaceCategory&&space.spaceCategory.id===_this4.lockerSpaceCatgegoryId&&ids.push(String(space.id))})),ids},moduleIdvsModuleName:function(){var _this5=this,modules=this.modules,data={};return modules.forEach((function(m){_this5.$set(data,m.moduleId,m.name)})),data},isPortal:function(){var PORTALS=this.$constants.appCategory.PORTALS;return!(!(0,router/* getApp */.wx)()||(0,router/* getApp */.wx)().appCategory!==PORTALS)},spaceList:function(){var _this6=this,zones=this.zones,data=[];return zones.features&&zones.features.length&&zones.features.forEach((function(rt){rt.properties&&(_this6.$set(rt.properties,"isReservable",rt.isReservable),data.push(rt.properties))})),data},deskList:function(){var markers=this.markers,features=markers.features,desks=[];return features&&features.length&&features.forEach((function(feature){var _feature$properties3;if(null!==feature&&void 0!==feature&&null!==(_feature$properties3=feature.properties)&&void 0!==_feature$properties3&&_feature$properties3.markerModuleName&&"desks"===feature.properties.markerModuleName){var properties=feature.properties,desk={id:properties.deskId,name:properties.label,deskType:properties.deskType,isBooked:properties.isBooked,isOccupied:properties.isOccupied,openDialog:properties.openDialog};properties.employeeId&&(desk["employee"]={id:properties.employeeId}),properties.departmentId&&(desk["department"]={id:properties.departmentId}),desks.push(desk)}})),desks},isDev:function(){var isDevMode=!1;return isDevMode},floorId:function(){return this.indoorFloorPlan&&this.indoorFloorPlan.floor&&this.indoorFloorPlan.floor.id?this.indoorFloorPlan.floor.id:null},siteId:function(){return this.indoorFloorPlan&&this.indoorFloorPlan.site&&this.indoorFloorPlan.site.id?this.indoorFloorPlan.site.id:null},querryDeskId:function(){return this.$route.query&&this.$route.query.deskId?this.$route.query.deskId:null}}),components:{BaseMap:MapBoxBase/* default */.Z},mounted:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var floorPlandataLoaded,objectLoad,asyncCalls;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this7.getSpaceCatgory(),
// this.afterFloorplanLoad
floorPlandataLoaded=new Promise((function(resolve){eventBus/* eventBus */.Y.$on("floorplandataloaded",(function(data){resolve(data)}))})),objectLoad=new Promise((function(resolve){eventBus/* eventBus */.Y.$on("floorplanObjectLoaded",(function(data){resolve(data)}))})),asyncCalls=[floorPlandataLoaded,objectLoad],_context.next=6,Promise.all(asyncCalls);case 6:_this7.afterFloorplanLoadHook(),eventBus/* eventBus */.Y.$on("amenity-filter",(function(array){_this7.handleAmenityFilter(array)})),eventBus/* eventBus */.Y.$on("reset-amenity",(function(){_this7.resetAmenityFilter()}));case 9:case"end":return _context.stop()}}),_callee)})))()},destroyed:function(){eventBus/* eventBus */.Y.$off("floorplandataloaded",{}),eventBus/* eventBus */.Y.$off("floorplanObjectLoaded",{}),eventBus/* eventBus */.Y.$off("amenity-filter",[]),eventBus/* eventBus */.Y.$off("reset-amenity")},methods:{redirectToSummary:function(moduleId,recordId){if(moduleId&&recordId){var moduleName=this.floorplanMappedModulesObject[moduleId]||null;if((0,router/* isWebTabsEnabled */.tj)()&&null!==moduleName){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:"all",id:recordId}})}else this.$message.info("No summary tab found!!!")}},isLayerAvailable:function(layerName){var mapLayer=this.map.getLayer(layerName);return"undefined"!==typeof mapLayer},afterFloorplanLoadHook:function(){},setZoneActiveState:function(feature){
// used to set the active state
return this.$set(feature,"active",!0),null!==feature&&void 0!==feature&&feature.properties&&this.$set(feature.properties,"active",!0),feature},loadViewerData:function(){var _this8=this;this.getViewerApi().then((function(){_this8.deSerializeGeoJson(),_this8.refreshData()}))},loadParkingData:function(){this.parkingModuleId&&this.parkingRecordIds.length&&this.getModuleData(Number(this.parkingModuleId),this.parkingRecordIds)},loadLockerData:function(){this.lockerModuleId&&this.LockerRecordIds.length&&this.getModuleData(Number(this.lockerModuleId),this.LockerRecordIds)},loadMarkerModuleData:function(){var _this9=this;
// need to remove
Object.keys(this.markerModuleVsId).length&&(this.moduleVsData={},Object.keys(this.markerModuleVsId).forEach((function(moduleId){var idsList=_this9.markerModuleVsId[moduleId];_this9.getModuleData(Number(moduleId),idsList)})))},getModuleData:function(moduleId,idsList){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,filters,params,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(idsList&&idsList.length&&moduleId)){_context2.next=11;break}if(moduleName=_this10.moduleIdvsModuleName[moduleId],!moduleName){_context2.next=11;break}return filters={id:{operatorId:9,value:idsList}},params={moduleName:moduleName,includeParentFilter:!0,page:1,perPage:200,filters:JSON.stringify(filters)},_context2.next=7,api/* API */.bl.get("v3/modules/data/list",params);case 7:_yield$API$get=_context2.sent,data=_yield$API$get.data,data&&data[moduleName]&&(_this10.$set(_this10.moduleVsData,moduleId,data[moduleName]),moduleId===_this10.parkingModuleId?_this10.refreshParkingZone():moduleId===_this10.lockerModuleId&&_this10.refreshLockerZone()),_this10.refreshData();case 11:case"end":return _context2.stop()}}),_callee2)})))()},refreshParkingZone:function(){var _this11=this,zones=this.zones;zones.features.forEach((function(feature){var dataList=_this11.moduleVsData[_this11.parkingModuleId];if(dataList&&dataList.length&&feature.space&&feature.space.id){var data=dataList.find((function(rt){return rt.id===feature.space.id}));if(data){_this11.$set(feature,"moduleData",data);var moduleStateId=data.moduleState&&data.moduleState.id?data.moduleState.id:null;if(moduleStateId){var statusMap=_this11.getTicketStatus(moduleStateId,"parkingstall"),status=statusMap&&statusMap.displayName?statusMap.displayName:null;
// need to remove this after demo
status=28477===moduleStateId?"Vacant":28478===moduleStateId?"Occupied":null,
_this11.$set(feature.moduleData,"statusDisplayName",status),_this11.$set(feature.properties,"status",status)}else _this11.$set(feature.moduleData,"statusDisplayName",null),_this11.$set(feature.properties,"status",null);_this11.updateProperty(feature),_this11.refreshData()}}}))},refreshLockerZone:function(){var _this12=this,zones=this.zones;zones.features.forEach((function(feature){var dataList=_this12.moduleVsData[_this12.lockerModuleId];if(dataList&&dataList.length&&feature.space&&feature.space.id){var data=dataList.find((function(rt){return rt.id===feature.space.id}));data&&(_this12.$set(feature,"moduleData",data),data.employee&&data.employee.id?_this12.$set(feature.properties,"employeeId",data.employee.id):_this12.$set(feature.properties,"employeeId",null))}})),this.refreshData()},updateMarker:function(){var _this13=this,markers=this.markers;
// need to optimize this method
markers.features.forEach((function(feature){if(feature.properties.markerModuleId&&feature.properties.recordId&&_this13.moduleVsData[feature.properties.markerModuleId]){var dataList=_this13.moduleVsData[feature.properties.markerModuleId],data=dataList.find((function(rt){return rt.id===feature.properties.recordId}));data&&(feature.moduleData=data)}}))},focusMarkerFromFeature:function(featureId){var _this$markers=this.markers,markers=void 0===_this$markers?{}:_this$markers,_this$zones=this.zones,zones=void 0===_this$zones?{}:_this$zones,feature=null;null!==markers&&void 0!==markers&&markers.features&&(feature=markers.features.find((function(f){return f.properties.objectId===featureId})),null!=feature&&this.focusAndActiveMarker(feature)),feature=null,null!==zones&&void 0!==zones&&zones.features&&(feature=zones.features.find((function(f){return f.properties.objectId===featureId})),null!=feature&&(this.selectedHoverZone&&this.removeHoverEffect(this.selectedHoverZone),this.setHoverEffect(feature),this.focusAndActivezone(feature),this.selectedHoverZone=feature))},focusMarker:function(moduleName,data){if("desks"===moduleName&&data&&data.id){var markers=this.markers;if(markers.features&&markers.features.length){var feature=markers.features.find((function(f){var _f$properties;return null!==f&&void 0!==f&&null!==(_f$properties=f.properties)&&void 0!==_f$properties&&_f$properties.recordId&&f.properties.recordId===data.id||null!==f&&void 0!==f&&f.recordId&&f.recordId===data.id?f:null}));feature&&this.focusAndActiveMarker(feature)}}else if("space"===moduleName&&data&&data.id){var zones=this.zones;if(zones.features&&zones.features.length){var _feature=zones.features.find((function(f){var _f$properties2;return null!==(_f$properties2=f.properties)&&void 0!==_f$properties2&&_f$properties2.spaceId&&f.properties.spaceId===data.id?f:null}));_feature&&this.focusAndActivezone(_feature)}}},getPolygonCenter:function(polyGonCoordinates){var centroidPoint=(0,es/* default */.Z)((0,dist_es/* polygon */.yu)(polyGonCoordinates));return centroidPoint.geometry.coordinates},getDeskTypeEnumMap:function(){var _this14=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url,_yield$API$get2,data,error,deskTypeField;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return url="/module/meta",_context3.next=3,api/* API */.bl.get(url,{moduleName:"desks"});case 3:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error||(deskTypeField=data.meta.fields.find((function(field){return"deskType"==field.name})),_this14.deskTypeEnumMap=deskTypeField.enumMap);case 7:case"end":return _context3.stop()}}),_callee3)})))()},setToolTipData:function(f){this.isDraging&&!f.tooltipData||null!==f&&void 0!==f&&f.tooltipData&&this.$set(this,"tooltipData",f.tooltipData)},
//load the map image only after floorplan data   and
//mapbox component are loaded .but both can be loaded in parallel
init:function(){var _this15=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var asyncCalls,resps,_resps,floorplanResp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:
//console.log('init fired')
// wait till all these async actions are completed. But all can be made in parallel
return _this15.floorplanloading=!0,_this15.loadFloorplanFields(),asyncCalls=[_this15.onMapLoad,_this15.getViewerApi(),_this15.loadModulesList(),_this15.fetchMarkerTypes(),
//to do . marker type data needed for booking and assign view, other api calls can be moved to optional data load hooks
_this15.getDepartments(),_this15.getDeskTypeEnumMap()],_context4.next=5,Promise.all(asyncCalls);case 5:if(resps=_context4.sent,_resps=(0,slicedToArray/* default */.Z)(resps,2),floorplanResp=_resps[1],//transform data from floorplanResp
_this15.indoorFloorPlan=floorplanResp.indoorfloorplan,_this15.deSerializeGeoJson(),_this15.loadFloorplanTypes(),
// this.loadMarkerModuleData()
// this.loadParkingData() // have to remove this method
// this.loadLockerData() // have to remove this method
_this15.fetchSpaces(),_this15.afterDeserialize&&_this15.afterDeserialize(),
//floor plan loades after mapbox and all required apis are done
_this15.loadFloorplanImage(_this15.map),_this15.floorplanloading=!1,
// console.log('floorplan loaded')
eventBus/* eventBus */.Y.$emit("floorplandataloaded"),!_this15.afterDataLoadHook){_context4.next=18;break}return _context4.next=18,_this15.afterDataLoadHook();case 18:case"end":return _context4.stop()}}),_callee4)})))()},afterFloorPlanRender:function(){try{
// if currently logged in user is assigned a desk in current floor plan , focus on desk
var feature=this.getFeatureAssisgnedToCurrentUser();feature&&!this.querryDeskId&&(this.map.flyTo({center:feature.geometry.coordinates,zoom:20,essential:!0}),this.yourMarker=[],new(mapbox_gl_default().Marker)({color:"red"}).setLngLat(feature.geometry.coordinates).addTo(this.map),this.addYourMarker(feature),this.loadFloorplanSettings())}catch(e){}},setQuerrData:function(){
// methods used to set the querry data
},loadFloorplanSettings:function(){},refreshData:function(){
//this.preFormatMarkers()
this.map.getSource("spaceZone").setData(this.zones),this.map.getSource("marker").setData(this.markers)},addYourMarker:function(f){var layerName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yourmarker";this.map.addLayer({id:layerName,type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[f]}},layout:{"icon-allow-overlap":!0,"text-field":"Your desk","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":14,"text-letter-spacing":.03,"text-offset":[-4,-1]},paint:{"text-color":"red","text-halo-color":"#fff","text-halo-width":1}})},getFeatureAssisgnedToCurrentUser:function(){var feature=null,user=this.getCurrentUser(),currentEmployeeId=user.peopleId;return currentEmployeeId&&this.markers.features.forEach((function(f){var _f$properties3;(null===f||void 0===f||null===(_f$properties3=f.properties)||void 0===_f$properties3?void 0:_f$properties3.employeeId)==currentEmployeeId&&(feature=f)})),feature},loadMetaData:function(){
// hooks for meta data like space and floor desks etc
},focusAndActiveMarker:function(feature){var _this16=this;this.selectedFeature&&this.unSelectFeature(this.selectedFeature),this.selectFeature(feature),this.selectedFeature=feature,this.handleMarkerClick(feature),this.map.flyTo({center:feature.geometry.coordinates,zoom:this.maxZoom-1,essential:!0}),this.$nextTick((function(){_this16.onFeatureSelect(feature,"marker")}))},onFeatureSelect:function(feature,node){this.$emit("onFeatureSelect",feature,node)},focusAndActivezone:function(feature){this.selectedFeature&&this.unSelectFeature(this.selectedFeature),this.selectFeature(feature),this.selectedFeature=feature,this.onFeatureSelect(feature,"zone"),this.spaceMapDialog=!0,this.selectedZone=feature;var coordinates=feature.geometry.coordinates;this.fitBounds(coordinates[0],100)},addSelectedMarker:function(){
// used to add the location marker for mapbox
},closePropertyDialog:function(){this.unSelectFeature(this.selectedFeature),this.selectedFeature=null,this.onFeatureSelect(null,"marker"),this.propertiesFeatureVisibile=!1},updateData:function(){
// this.updateProperty(this.selectedFeature)
// let desk = this.deskDataFromFeature(this.selectedFeature)
// this.updateDesk(desk)
},updateMarkerData:function(){this.updateProperty(this.selectedFeature);var marker=this.markerFromFeature(this.selectedFeature);this.updateMarker(marker)},updateLocker:function(){this.updateProperty(this.selectedFeature)},markerFromFeature:function(feature){var markers=this.indoorFloorPlan.markers;if(feature.properties&&feature.properties.objectId&&markers.length){var marker=markers.find((function(rt){return rt.id===String(feature.properties.objectId)}));if(marker&&feature.properties&&feature.properties.label)return marker.label=feature.properties.label,marker.id=Number(feature.properties.objectId),marker.geometry=JSON.stringify(marker.geometry),marker.properties=JSON.stringify(marker.properties),marker}return null},moveData:function(){this.updateProperty(this.selectedFeature),this.updateMove(this.selectedFeature)},updateProperty:function(feature){if(feature.desk){var desk=this.deskDataFromFeature(feature),name=this.getIconName(desk);feature.properties.normalClass=name,this.$set(feature.properties,"markerId",name)}this.refreshData()},unSelectFeature:function(feature){feature.space||
//   this.map.setLayoutProperty(
//     feature.id,
//     'icon-image',
//     feature.properties.markerId
//   )
feature.properties.normalClass&&(feature.properties.markerId=feature.properties.normalClass),this.refreshData()},selectFeature:function(feature){if(feature){if(2===feature.objectType);else if(feature.properties.markerId&&feature.properties.markerId.indexOf("desk")>-1){var iconName=feature.properties.activeClass;feature.properties.markerId=iconName}else{var _iconName="".concat(feature.properties.markerId);feature.properties.markerId=_iconName}this.refreshData()}},getDragElement:function(dragElement){var data=null;return dragElement&&dragElement.employee&&(data=dragElement.employee,dragElement.department&&this.$set(data,"data",{department:dragElement.department})),data},mouseDownElement:function(e,data,feature){this.isDraging=!0,this.dragElement=feature?this.getDragElement(feature.desk):data,e.pageX&&e.pageY?this.createElemnt(e):this.createMouseDownElemnt(e),this.selectedFeature&&(this.propertiesFeatureVisibile=!1)},getDepartmentColor:function(dragElement){if(dragElement&&dragElement.data&&dragElement.data.department&&dragElement.data.department.id){var department=this.departments.find((function(rt){return rt.id===dragElement.data.department.id}));if(department&&department.color)return department.color}return"#000"},createMouseDownElemnt:function(e){if(e.point.x||e.point.y){var color=this.getDepartmentColor(this.dragElement),div=document.getElementById("dragItem");div.style.position="absolute",div.style.display="block",div.style.zIndex="10",div.style.top="0px",div.innerHTML='<div class="dragelemnt-innerContainer">\n      <div class="drag-avatar">'.concat(this.dragElement.name.charAt(0)).concat(this.dragElement.name.charAt(1),'</div>\n      <div class="drag-label">').concat(this.dragElement.name,"</div>\n      </div>"),div.style.transform="translate(".concat(e.point.x+10,"px,").concat(e.point.y,"px)"),// Insert text
div.style.background=color,document.body.appendChild(div)}},createElemnt:function(e){if(e.pageX||e.pageY){var color=this.getDepartmentColor(this.dragElement),div=document.getElementById("dragItem");div.style.position="absolute",div.style.display="block",div.style.zIndex="10",div.style.top="0px",div.innerHTML='<div class="dragelemnt-innerContainer">\n      <div class="drag-avatar">'.concat(this.dragElement.name.charAt(0)).concat(this.dragElement.name.charAt(1),'</div>\n      <div class="drag-label">').concat(this.dragElement.name,"</div>\n      </div>"),div.style.transform="translate(".concat(e.pageX+10,"px,").concat(e.pageY,"px)"),// Insert text
div.style.background=color,document.body.appendChild(div)}},ghostElemntHandle:function(e){if(e.pageX||e.pageY){var div=document.getElementById("dragItem");div.style.display="block",div.style.transform="translate(".concat(e.pageX+10,"px,").concat(e.pageY,"px)")}},addMarkedZones:function(map){var _this17=this;map.addSource("spaceZone",{type:"geojson",data:this.zones});var id="zone";map.addLayer({id:id,type:"fill",source:"spaceZone",paint:{"fill-color":["get","zoneBackgroundColor"],"fill-opacity":["get","zoneOpacity"]},filter:["all",["in","$type","Polygon"]]}),map.addLayer({id:"space-text-".concat(id),type:"symbol",source:"spaceZone",layout:{"icon-allow-overlap":!0,"text-field":"{label}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-max-width":15,"text-size":["interpolate",["linear"],["zoom"],this.minZoom,0,this.maxZoom,this.fontSize+1],"text-transform":"uppercase","text-letter-spacing":.03,"text-offset":[0,0]},paint:{"text-color":"#324056","text-halo-color":"#ffffff","text-halo-width":.5},filter:["all",["in","$type","Polygon"]]}),map.addLayer({id:"space-secondary-text-".concat(id),type:"symbol",source:"spaceZone",layout:{"icon-allow-overlap":!0,"text-field":"{secondaryLabel}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-max-width":15,"text-size":["interpolate",["linear"],["zoom"],this.minZoom,0,this.maxZoom,this.fontSize+1],"text-transform":"uppercase","text-letter-spacing":.03,"text-offset":["interpolate",["exponential",.5],["zoom"],17,["literal",[0,1.2]],18,["literal",[0,1.2]],19,["literal",[0,1.3]],20,["literal",[0,1.5]]]},paint:{"text-color":"#324056","text-halo-color":"#ffffff","text-halo-width":.5},filter:["all",["in","$type","Polygon"]]}),map.on("click",id,(function(e){var f=_this17.getFirstFeatureFromZonePoints(e);_this17.zoneClick(e,f)})),map.on("mousemove",id,(function(e){e.preventDefault();var f=_this17.getFirstFeatureFromZonePoints(e);
// console.log('=====> f', f)
//  this.unSelectHoverItems(f)
_this17.setToolTipData(f),_this17.setHoverEffect(f),_this17.zoneMouseEnter&&_this17.zoneMouseEnter(e,f,id),_this17.prevId=f})),map.on("mouseleave",id,(function(e){var f=_this17.getFirstFeatureFromZonePoints(e);_this17.removeHoverEffect(f),_this17.zoneMouseLeave&&_this17.zoneMouseLeave(e,f,id)}))},setHoverEffect:function(){
// prototype
},
// unSelectHoverItems(f) {
//   if (f == null) {
//   } else if (
//     f != null &&
//     f.properties.spaceId != f.properties.spaceId
//   ) {
//     this.removeHoverEffect(this.prevId)
//   }
// },
addZoneStrokeLayer:function(newFeature){this.map.getLayer("zone-outline")&&this.map.getSource("zone-outline")||this.map.addLayer({id:"zone-outline",type:"line",source:{type:"geojson",data:newFeature},paint:{"line-color":"#0073cf","line-width":2}})},removeZoneStrokeLayer:function(id){this.map.getLayer(id)&&this.map.getSource(id)&&(this.map.removeLayer(id),this.map.removeSource(id))},replaceFeature:function(newFeature){var _this$zones2;if(null!==(_this$zones2=this.zones)&&void 0!==_this$zones2&&_this$zones2.features){var index=this.zones.features.findIndex((function(f){return f.properties.objectId===newFeature.properties.objectId}));index>-1&&(this.zones.features[index]=newFeature)}this.refreshData()},removeHoverEffect:function(){
// prototype
},getFirstFeatureFromZonePoints:function(e){var point=this.map.queryRenderedFeatures(e.point),feature=point?point[0]:null;return this.getZoneFromObjectId(feature)||null},getFirstFeatureFromMarkerPoints:function(e){var point=this.map.queryRenderedFeatures(e.point),feature=point?point[0]:null;return this.getMarkerFromObjectId(feature)||null},getZoneFromObjectId:function(f){return f&&f.properties&&f.properties.objectId?this.zoneMap[f.properties.objectId]:null},getMarkerFromObjectId:function(f){return f&&f.properties&&f.properties.objectId?this.markerMap[f.properties.objectId]:null},preFormatMarkers:function(){var _this18=this;this.markers.features.forEach((function(marker){var properties=marker.properties;_this18.$set(properties,"centerLabel",_this18.centerLabel(properties.secondaryLabel))}))},addMarkerLayer:function(map){var _this19=this;this.mapAddImages(),
//this.preFormatMarkers()
map.addSource("marker",{type:"geojson",data:this.markers});var id="marker";map.addLayer({id:id,type:"symbol",source:"marker",layout:{"icon-image":"{markerId}","text-field":"{label}","text-allow-overlap":!0,"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,2],"text-anchor":"top","icon-allow-overlap":!0,"icon-size":["interpolate",["linear"],["zoom"],this.minZoom,0,this.maxZoom,this.iconSize],"text-size":["interpolate",["linear"],["zoom"],this.minZoom,0,this.maxZoom,this.fontSize]},paint:{"icon-opacity":["case",["boolean",["get","active"],!1],1,.3]},filter:["all",["in","$type","Point"]]}),map.addLayer({id:"secondary-label-".concat(id),type:"symbol",source:"marker",layout:{"icon-allow-overlap":!0,"text-field":"{secondaryLabel}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":["interpolate",["linear"],["zoom"],8,0,this.maxZoom,this.fontSize+3],"text-letter-spacing":.03,"text-offset":[0,-2]},paint:{"text-color":"#25243e","text-halo-width":.5,"text-halo-color":"#ffffff"},filter:["all",["in","$type","Point"]]}),map.addLayer({id:"formated-secondary-label-".concat(id),type:"symbol",source:"marker",layout:{"icon-allow-overlap":!0,"text-field":"{centerLabel}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":["interpolate",["linear"],["zoom"],this.minZoom,0,this.maxZoom,this.fontSize+1],"text-letter-spacing":.05,"text-offset":[0,0]},paint:{"text-color":"#fafafa","text-halo-color":"#25243e","text-halo-width":1},filter:["all",["in","$type","Point"]]}),map.on("click",id,(function(e){e.preventDefault();var f=_this19.getFirstFeatureFromMarkerPoints(e);_this19.markerClick(e,f)})),map.on("mousemove",id,(function(e){
// recent impplementaion due to breck school zone top marker issue
//  console.log('****** f', e)
e.preventDefault();var f=_this19.getFirstFeatureFromMarkerPoints(e);_this19.setToolTipData(f),_this19.markerMouseEnter&&_this19.markerMouseEnter(e,f,id)})),map.on("mouseenter",id,(function(e){e.preventDefault();var f=_this19.getFirstFeatureFromMarkerPoints(e);_this19.setToolTipData(f),_this19.markerMouseEnter&&_this19.markerMouseEnter(e,f,id)})),map.on("mouseleave",id,(function(e){var f=_this19.getFirstFeatureFromMarkerPoints(e);_this19.hoveredMarker&&(f=_this19.hoveredMarker),_this19.markerMouseLeave&&_this19.markerMouseLeave(e,f,id)})),map.on("mousedown",id,(function(e){var f=_this19.getFirstFeatureFromMarkerPoints(e);_this19.mouseDownClicked=!0,_this19.markerMouseDown&&_this19.markerMouseDown(e,f,id)})),map.on("mouseup",id,(function(e){var f=_this19.getFirstFeatureFromMarkerPoints(e);_this19.mouseDownClicked&&_this19.markerClick(e,f),_this19.mouseDownClicked=!1,_this19.markerMouseUp&&_this19.markerMouseUp(e,f,id)}))},
//pass click,mouse enter or any event , and dom ref of popup template
displayClickPopUp:function(coordinates,popupEle){var _this20=this;this.isClickPopupActive=!0,this.clickPopup=new(mapbox_gl_default().Popup)({closeButton:!1}),this.clickPopup.setLngLat(coordinates).setDOMContent(popupEle).addTo(this.map),this.clickPopup.on("close",(function(){
// console.log('popup was closed',e);
_this20.isClickPopupActive=!1}))},updateMarkers:function(){var _this21=this,map=this.map,features=map.querySourceFeatures("marker");document.getElementsByClassName("secondaryMarker").forEach((function(el){el.remove()})),features.forEach((function(feature){var coords=feature.geometry.coordinates,id=feature.id,el=document.createElement("div");el.className="secondaryMarker",el.innerHTML="<div>hii</div>",_this21.secondaryMarkers[id]=new(mapbox_gl_default().Marker)(el).setLngLat(coords).addTo(_this21.map)}))},specialHandelCheck:function(){
// overwride this function for special Handel
return!0},markerClick:function(e,f){e.preventDefault(),(this.specialHandelCheck(f)||f.active)&&(this.selectedFeature&&this.unSelectFeature(this.selectedFeature),this.selectFeature(f),this.selectedFeature=f,this.onFeatureSelect(f,"marker"),this.handleMarkerClick(f))},zoneClick:function(e,f){
//if (!f.active) return //zone active state set from child comps  , based on IS_RESERVABLE Flag
e.preventDefault(),this.selectedFeature&&this.unSelectFeature(this.selectedFeature),this.selectFeature(f),this.selectedFeature=f,this.onFeatureSelect(f,"zone"),this.handleZoneClick&&this.handleZoneClick(e,f)},loadObjects:function(map){this.generateIcons(),this.addMarkedZones(map),this.addMarkerLayer(map),this.loadDefaultDesk(map),this.setQuerrData(map),eventBus/* eventBus */.Y.$emit("floorplanObjectLoaded")},loadDefaultDesk:function(){var _this22=this;if(this.querryDeskId){var feature=this.markers.features.find((function(f){var _f$desk;return(null===f||void 0===f||null===(_f$desk=f.desk)||void 0===_f$desk?void 0:_f$desk.id)==_this22.querryDeskId?f:null}));feature&&(this.setHoverEffect(feature),this.focusAndActiveMarker(feature))}},deskDataFromFeatureNew:function(feature){var _feature$properties4;if(null!==feature&&void 0!==feature&&null!==(_feature$properties4=feature.properties)&&void 0!==_feature$properties4&&_feature$properties4.deskId){var properties=feature.properties,desk={id:feature.properties.deskId,name:properties.label||""};return properties.employeeId&&(desk["employee"]={id:properties.employeeId}),properties.departmentId&&(desk["department"]={id:properties.departmentId}),desk}return null},
// to be removed bcs moving to new viewer api
deskDataFromFeature:function(feature){if(feature&&feature.properties&&feature.properties.desk){var properties=feature.properties,desk=properties.desk;if(properties.deskId&&this.$set(desk,"id",properties.deskId),properties.deskType&&this.$set(desk,"deskType",properties.deskType),properties.deskCode&&this.$set(desk,"deskCode",properties.deskCode),properties.employeeId){var _desk$employee,_desk$employee2,_desk$employee3;if(feature.employee&&feature.employee.id&&feature.employee.id===properties.employeeId)this.$set(desk,"employee",feature.employee);else null!==(_desk$employee=desk.employee)&&void 0!==_desk$employee&&_desk$employee.value&&(null===(_desk$employee2=desk.employee)||void 0===_desk$employee2?void 0:_desk$employee2.value)===properties.employeeId?this.$set(desk,"employee",{id:properties.employeeId,name:desk.employee.label}):(null===(_desk$employee3=desk.employee)||void 0===_desk$employee3?void 0:_desk$employee3.id)!==properties.employeeId&&this.$set(desk,"employee",{id:properties.employeeId});properties.departmentId?desk.department&&desk.department.id&&desk.department.id===properties.departmentId?this.$set(desk,"department",desk.department):this.$set(desk,"department",{id:properties.departmentId}):delete desk.department}else delete desk.employee;return properties.departmentId&&(desk.department&&desk.department.id&&desk.department.id===properties.departmentId?this.$set(desk,"department",desk.department):this.$set(desk,"department",{id:properties.departmentId})),desk}},
unassignDesk:function(feature){if(feature&&feature.properties){var desk=this.deskDataFromFeature(feature);desk&&(
//this.updateDesk(desk)
this.$set(this.move,"fromFetaure",feature),this.$set(this.move,"fromDesk",desk))}},getDepartmentFromEmployee:function(employeeId){var employee=this.employeeList.find((function(rt){return rt.id===employeeId}));return employee&&employee.data&&employee.data.department?employee.data.department:null},unassignDeskfromProperty:function(){var feature=this.selectedFeature;this.updateProperty(feature);var desk=feature.desk||null;if(desk){this.$set(this.move,"fromFetaure",feature),this.$set(this.move,"fromDesk",desk);var msg="".concat(desk.employee.name," is unassigned from ").concat(desk.name);this.updateMoveApi(msg)}},updateMove:function(feature){var _this23=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var desk,employeId,fromDesk;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!feature||!feature.properties){_context5.next=10;break}if(desk=_this23.deskDataFromFeatureNew(feature),!desk){_context5.next=10;break}return _this23.$set(_this23.move,"toFetaure",feature),_this23.$set(_this23.move,"toDesk",desk),employeId=desk.employee&&desk.employee.id?desk.employee.id:null,_context5.next=8,Promise.all([_this23.updateMoveApi(),_this23.fetchEmployeeFulldetails(employeId,desk)]);case 8:fromDesk=_this23.movedEmployeeDesks.length?_this23.movedEmployeeDesks[0]:null,_this23.loadMoveDetails(fromDesk,desk);case 10:case"end":return _context5.stop()}}),_callee5)})))()},updateMoveApi:function(msg){var _this24=this,move=this.move;if(this.movedEmployeeDesks=[],move&&Object.keys(move).length){var moveAPI=this.prepareMoveData(move);this.updateMoveData(moveAPI).then((function(){msg&&_this24.$message.success(msg),_this24.loadViewerData()}))}this.move={}},prepareMoveData:function(move){var timeOfMove=(new Date).valueOf(),moveParmas={};if(move.fromDesk&&move.toDesk){if(this.$set(moveParmas,"to",move.toDesk),this.$set(moveParmas,"from",move.fromDesk),this.$set(moveParmas,"timeOfMove",timeOfMove),move.toDesk.employee){var department=this.getDepartmentFromEmployee(move.toDesk.employee.id);this.$set(moveParmas,"employee",move.toDesk.employee),department&&this.$set(moveParmas,"department",department)}}else if(move.fromDesk&&!move.toDesk){if(this.$set(moveParmas,"from",move.fromDesk),this.$set(moveParmas,"timeOfMove",timeOfMove),move.fromDesk.employee){var _department=this.getDepartmentFromEmployee(move.fromDesk.employee.id);this.$set(moveParmas,"employee",move.fromDesk.employee),_department&&this.$set(moveParmas,"department",_department)}}else if(move.toDesk&&!move.fromDesk&&(this.$set(moveParmas,"to",move.toDesk),this.$set(moveParmas,"timeOfMove",timeOfMove),move.toDesk.employee)){var _department2=this.getDepartmentFromEmployee(move.toDesk.employee.id);this.$set(moveParmas,"employee",move.toDesk.employee),_department2&&this.$set(moveParmas,"department",_department2)}return this.$set(moveParmas,"scheduledTime",null),this.$set(moveParmas,"moveType",1),this.$set(moveParmas,"siteId",this.siteId),moveParmas},mapLoaded:function(event){
//console.log('mapload fired')
this.init(),//to do . avoid consuming this.map reference before mappromise resolves(ie mapbpox comp loads)
this.map=event.map,//map object is referred evenb before mapload //to check
this.onMapLoad=event.onMapLoad},getRandomColor:function(){for(var letters="0123456789ABCDEF",color="#",i=0;i<6;i++)color+=letters[Math.floor(16*Math.random())];return color},handleAmenityFilter:function(array){this.amenities=array,this.loadViewerData()},resetAmenityFilter:function(){this.amenities=[],this.loadViewerData()}}},indoorFloorPlan_IndoorFloorPlanViewervue_type_script_lang_js=IndoorFloorPlanViewervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(indoorFloorPlan_IndoorFloorPlanViewervue_type_script_lang_js,render,staticRenderFns,!1,null,"7d885355",null)
/* harmony default export */,IndoorFloorPlanViewer=component.exports},
/***/386046:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanLoading}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/components/FloorPlanLoading.vue?vue&type=template&id=e4d27a54
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floorplanloading "},[_c("div",{staticClass:"section__item"},[_c("facilio-new-loader",{})],1)])},staticRenderFns=[],facilio_loading=__webpack_require__(621658),FloorPlanLoadingvue_type_script_lang_js={components:{facilioNewLoader:facilio_loading/* default */.Z}},components_FloorPlanLoadingvue_type_script_lang_js=FloorPlanLoadingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanLoadingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanLoading=component.exports},
/***/517185:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return IndoorFloorPlanSwitcher}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/components/IndoorFloorPlanSwitcher.vue?vue&type=template&id=7e5aeac4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{staticClass:"floor-filter-con"},[_c("div",{staticClass:"position-relative floor-filter-align",staticStyle:{width:"691px"}},[_c("div",{staticClass:"floor-filter-sec-building floor-filter-sec"},[_vm._m(0),_c("div",{staticClass:"floor-filter-search"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Search","prefix-icon":"el-icon-search",clearable:""},model:{value:_vm.floorSearchBuilding,callback:function($$v){_vm.floorSearchBuilding=$$v},expression:"floorSearchBuilding"}})],1),_vm.siteLoading?_c("div",[_c("spinner",{attrs:{show:_vm.siteLoading,size:"80"}})],1):_c("div",{staticClass:"floor-filter-building-list"},[_c("el-collapse",{model:{value:_vm.buildingActive,callback:function($$v){_vm.buildingActive=$$v},expression:"buildingActive"}},[_vm._l(_vm.filteredSites,(function(site,index){return[_vm.filterdBuildingMap[site.id]?_c("el-collapse-item",{key:index,attrs:{name:site.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"flex-middle"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/site",iconClass:"icon text-center icon-xxlll"}})],1),_c("div",{staticClass:"pL10 bold"},[_vm._v(" "+_vm._s(site.name)+" ")])])]),_vm.buildingLoading?_c("div",[_c("spinner",{attrs:{show:_vm.buildingLoading,size:"80"}})],1):_vm.filterdBuildingMap[site.id]?_vm._l(_vm.filterdBuildingMap[site.id],(function(building,idx){return _c("div",{key:idx,staticClass:"flex-middle floor-list-bg",class:{active:_vm.selctedBuilding===building.id},on:{click:function($event){return _vm.selectBuilding(building)}}},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/building",iconClass:"icon text-center icon-lg"}}),_c("div",{staticClass:"label-txt-black text-left pL10"},[_vm._v(" "+_vm._s(building.name)+" ")])],1)})):_c("div",[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/building",iconClass:"icon text-center icon-xxlll"}}),_c("div",{staticClass:"label-txt-black fwbold"},[_vm._v(" No building ")])],1)],2):_vm._e()]}))],2)],1)]),_vm.floorSection?_c("div",{staticClass:"floor-filter-sec-floor floor-filter-sec floor-filter-right"},[_vm._m(1),_c("div",{staticClass:"floor-filter-search"},[_c("el-input",{staticClass:"mT5 fc-input-full-border2",attrs:{placeholder:"Search","prefix-icon":"el-icon-search"},model:{value:_vm.floorSearch,callback:function($$v){_vm.floorSearch=$$v},expression:"floorSearch"}})],1),_c("div",{staticClass:"floor-filter-con-scroll mT30 floor-filter-building-list"},[_vm.floorLoading?_c("div",[_c("spinner",{attrs:{show:_vm.floorLoading,size:"80"}})],1):_vm.buildingFloorMap[_vm.selctedBuilding]&&_vm.buildingFloorMap[_vm.selctedBuilding].length?_vm._l(_vm.filteredfloor,(function(floor,fidx){return _c("div",{key:fidx,staticClass:"flex-middle floor-list-bg",class:{active:floor.id===_vm.floorId},on:{click:function($event){return _vm.changeFloorPlan(floor)}}},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/floor",iconClass:"icon text-center icon-lg"}}),_c("div",{staticClass:"label-txt-black text-left pL10"},[_vm._v(" "+_vm._s(floor.name)+" ")])],1)})):[_c("div",{staticClass:"text-center mT80"},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/floor",iconClass:"icon text-center icon-xlg"}}),_c("div",{staticClass:"label-txt-black fwBold pT10"},[_vm._v(" No floors ")])],1)]],2)]):_vm._e(),_vm.floorSection?_c("div",{staticClass:"floor-filter-close-ico"},[_c("i",{staticClass:"el-icon-back",on:{click:_vm.handleChange}})]):_vm._e()])]):_vm._e()},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floor-filter-header flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black3-16 bold text-left f15"},[_vm._v(" Buildings ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floor-filter-header flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black3-16 bold text-left f15 "},[_vm._v(" Floors ")])])}],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(420629)),api=__webpack_require__(32284),IndoorFloorPlanSwitchervue_type_script_lang_js={props:["visibility","floorplanId","floorId","buildingId"],data:function(){return{floorSearchBuilding:null,buildingActive:[],floorSection:!1,siteBuildingMap:{},buildingLoading:!1,selctedBuilding:null,floorLoading:!1,buildingFloorMap:{},floorSearch:null,siteLoading:!1}},watch:{fpType:{immediate:!0,handler:function(){
// change floorplan here
}}},created:function(){this.$store.dispatch("loadSite"),this.loadSearchBuilding()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.site}})),{},{fpType:function(){return this.$route.query&&this.$route.query.type?this.$route.query.type:1},filteredSites:function(){
// return this.sites.filter(data => {
//   if (this.floorSearchBuilding) {
//     if (
//       data.name
//         .toLowerCase()
//         .indexOf(this.floorSearchBuilding.toLowerCase()) > -1
//     ) {
//       return data
//     }
//     return null
//   }
//   return data
// })
return this.sites},filterdBuildingMap:function(){var _this=this,siteBuildingMap=this.siteBuildingMap,buildingandSiteMap={};return siteBuildingMap&&Object.keys(siteBuildingMap).forEach((function(siteId){var buildings=siteBuildingMap[siteId].filter((function(building){return _this.floorSearchBuilding?building.name.toLowerCase().indexOf(_this.floorSearchBuilding.toLowerCase())>-1?building:null:building}));buildings.length&&_this.$set(buildingandSiteMap,siteId,buildings)})),buildingandSiteMap},filteredfloor:function(){var _this2=this,floors=this.buildingFloorMap[this.selctedBuilding];return floors.filter((function(data){return _this2.floorSearch?data.name.toLowerCase().indexOf(_this2.floorSearch.toLowerCase())>-1?data:null:data}))}}),methods:{changeFloorPlan:function(floor){floor&&floor.indoorFloorPlanId&&floor.indoorFloorPlanId!==this.floorplanId&&this.$router.replace({params:{floorId:floor.id,floorplanid:floor.indoorFloorPlanId}}),this.afterFloorplanChangeHook(floor),this.handleChange()},selectBuilding:function(building){this.selctedBuilding=building.id,this.floorSection=!0,this.buildingFloorMap[building.id]||this.loadFloor(building.id)},afterFloorplanChangeHook:function(){
// after floorplan change hook
},
// changeSite(id) {
//   if (!this.siteBuildingMap[id]) {
//     this.loadBuilding(id)
//   }
// },
closeFloorSection:function(){this.floorSection=!1},handleChange:function(){this.$emit("update:visibility",!1)},loadSearchBuilding:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this3.siteLoading=!0,_this3.siteBuildingMap={},_this3.buildingActive=[],url="/v2/building/list?viewName=all",_this3.floorSearchBuilding&&(url="/v2/building/list?viewName=all&search=".concat(_this3.floorSearchBuilding)),_context.next=7,api/* API */.bl.get(url);case 7:_yield$API$get=_context.sent,data=_yield$API$get.data,data&&data.buildings&&data.buildings.length&&data.buildings.forEach((function(building){_this3.selectBuilding&&building.id===_this3.buildingId&&_this3.selectBuilding(building),building.siteId&&(_this3.buildingActive.push(building.siteId),_this3.siteBuildingMap[building.siteId]?_this3.siteBuildingMap[building.siteId].push(building):_this3.$set(_this3.siteBuildingMap,building.siteId,[building]))})),_this3.afterBuildingDataHook(),_this3.siteLoading=!1;case 12:case"end":return _context.stop()}}),_callee)})))()},afterBuildingDataHook:function(){
// after building load hook
},loadBuilding:function(siteId){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var url,_yield$API$get2,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this4.buildingLoading=!0,url="/v2/basespace/getBaseSpaceChildren?baseSpaceId=".concat(siteId),_context2.next=4,api/* API */.bl.get(url);case 4:_yield$API$get2=_context2.sent,data=_yield$API$get2.data,data&&_this4.$set(_this4.siteBuildingMap,siteId,data.basespaces),_this4.buildingLoading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},loadFloor:function(buildignId){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var filter,url,params,_yield$API$get3,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this5.floorLoading=!0,filter={building:{operatorId:36,value:[buildignId+""]},indoorFloorPlanId:{operatorId:2}},url="/v2/module/data/list",params={moduleName:"floor",viewName:"hidden-all",filters:JSON.stringify(filter)},_context3.next=6,api/* API */.bl.get(url,params);case 6:_yield$API$get3=_context3.sent,data=_yield$API$get3.data,data&&_this5.$set(_this5.buildingFloorMap,buildignId,data.moduleDatas),_this5.floorLoading=!1;case 10:case"end":return _context3.stop()}}),_callee3)})))()}}},components_IndoorFloorPlanSwitchervue_type_script_lang_js=IndoorFloorPlanSwitchervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_IndoorFloorPlanSwitchervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanSwitcher=component.exports},
/***/103649:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return IndoorFloorplanSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/components/IndoorFloorplanSearch.vue?vue&type=template&id=3a4f8540&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fp-search-section fp-search-container",class:{"hide-section":_vm.hidesidebar}},[_c("div",{staticClass:"fc-floor-search-block",staticStyle:{height:"inherit"},on:{mouseleave:function($event){return _vm.handleMouseLeave()},mouseup:function($event){return _vm.handleMouseUP()}}},[_c("div",{staticClass:"fp-search-area",class:{"fc-search-box-shadow":_vm.scrollPosition>2}},[_c("div",{staticClass:"fc-search-bottom-border inline width100 inline-flex self-center"},[_c("el-input",{staticClass:"width100 fc-input-full-border2 fc-input-full-border2-prefix",attrs:{size:"medium",placeholder:"Search",clearable:""},on:{input:function($event){return _vm.searchContent()},focus:function($event){_vm.focused=!0},blur:function($event){return _vm.blurSearchBox()}},model:{value:_vm.search,callback:function($$v){_vm.search=$$v},expression:"search"}},[_c("i",{staticClass:"el-input__icon pointer fc-grey8 f14 fwBold el-icon-search mR5",attrs:{slot:"prefix"},slot:"prefix"})]),_c("div",{staticClass:"f20 pL10 self-centter pT3"},[_c("el-popover",{attrs:{placement:"bottom",width:"230",trigger:"click"},model:{value:_vm.searchpopover,callback:function($$v){_vm.searchpopover=$$v},expression:"searchpopover"}},[_c("div",[_c("div",{staticClass:"fc-pink fw6 p10 pB5 clearboth f11 text-uppercase"},[_vm._v(" Search By ")]),_c("div",{staticClass:"p10 fc-black-13 text-left flex-middle justify-content-space border-bottom-line pointer",on:{click:function($event){return _vm.switchModule({name:"All",value:"all"})}}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:"width20px",attrs:{src:"svgs/all",iconClass:"icon-sm icon all-fill-color"}}),_c("div",{staticClass:"fc-black-13 fw6 pointer"},[_vm._v(" All ")])],1),_c("div",["all"===_vm.selectedModule?_c("i",{staticClass:"el-icon-check check-active"}):_vm._e()])]),_vm._l(_vm.searchMosules,(function(module,index){return _c("div",{key:index,staticClass:"fc-black-13 text-left fc-floor-popup-menu",on:{click:function($event){return _vm.switchModule(module)}}},[_c("div",{staticClass:"flex-middle"},[_c("InlineSvg",{staticClass:"width20px",attrs:{src:module.icon,iconClass:module.iconClass}}),_c("div",{staticClass:"fc-black-13 text-left bold"},[_vm._v(" "+_vm._s(module.name)+" ")])],1),_c("div",{},[_vm.selectedModule===module.value?_c("i",{staticClass:"el-icon-check check-active"}):_vm._e()])])}))],2),_c("inline-svg",{staticClass:"vertical-middle fc-filter-icon",attrs:{slot:"reference",src:"svgs/filter3",iconClass:"icon icon-md"},slot:"reference"})],1)],1)],1),_vm.focused||Object.keys(_vm.serachResult).length?[_c("div",{},[_c("div",{staticClass:"f12 p10 search-subtext"},[_vm._v(" "+_vm._s(_vm.getModuleDisplayName)+" results ")]),_c("div",{staticClass:"fp-filter-section "},["employee"===_vm.selectedModule?_c("div",{staticClass:"flex"},[_c("div",{staticClass:"p10 pL0 pT0"},[_c("el-select",{staticClass:"fc-input-full-border-select2 round-select",attrs:{prop:"agents",filterable:"","default-first-option":"",placeholder:"Employee",size:"mini"},on:{change:_vm.searchContent},model:{value:_vm.selectedFilter[_vm.selectedModule]["assignment"],callback:function($$v){_vm.$set(_vm.selectedFilter[_vm.selectedModule],"assignment",$$v)},expression:"selectedFilter[selectedModule]['assignment']"}},_vm._l(_vm.filtersOptions[_vm.selectedModule]["assignment"],(function(filter,index){return _c("el-option",{key:index,attrs:{label:filter.name,value:filter.value,"no-data-text":"No filter",clearable:""}})})),1)],1),_c("div",{staticClass:"p10 pL0 pT0"},[_c("el-select",{staticClass:"fc-input-full-border-select2 round-select",attrs:{prop:"agents",filterable:"",clearable:"","default-first-option":"",placeholder:"Department",size:"mini"},on:{change:_vm.searchContent},model:{value:_vm.selectedFilter[_vm.selectedModule]["department"],callback:function($$v){_vm.$set(_vm.selectedFilter[_vm.selectedModule],"department",$$v)},expression:"selectedFilter[selectedModule]['department']"}},_vm._l(_vm.departments,(function(department,index){return _c("el-option",{key:index,attrs:{label:department.name,value:department.id,"no-data-text":"No Data"}})})),1)],1)]):"desks"===_vm.selectedModule?_c("div",{staticClass:"flex"},[_c("div",{staticClass:"p10 pL0 pT0"},[_c("el-select",{staticClass:"fc-input-full-border-select2 round-select",attrs:{filterable:"","default-first-option":"",placeholder:"Desk type",size:"mini"},on:{change:_vm.searchContent},model:{value:_vm.selectedFilter[_vm.selectedModule]["desktype"],callback:function($$v){_vm.$set(_vm.selectedFilter[_vm.selectedModule],"desktype",$$v)},expression:"selectedFilter[selectedModule]['desktype']"}},_vm._l(_vm.filtersOptions[_vm.selectedModule]["desktypes"],(function(filter,index){return _c("el-option",{key:index,attrs:{label:filter.name,value:filter.value,"no-data-text":"No filter",clearable:""}})})),1)],1)]):"space"===_vm.selectedModule?_c("div",{staticClass:"flex"},[_c("div",{staticClass:"p10 pL0 pT0"},[_c("el-select",{staticClass:"fc-input-full-border-select2 round-select fc-floorplan-room",attrs:{filterable:"","default-first-option":"",placeholder:"Capacity",size:"mini"},on:{change:_vm.searchContent},model:{value:_vm.selectedFilter[_vm.selectedModule]["capcity"],callback:function($$v){_vm.$set(_vm.selectedFilter[_vm.selectedModule],"capcity",$$v)},expression:"selectedFilter[selectedModule]['capcity']"}},[_c("i",{staticClass:"el-icon-user-solid f12",staticStyle:{color:"#a9aacb","padding-top":"9px"},attrs:{slot:"prefix"},slot:"prefix"}),_vm._l(_vm.filtersOptions[_vm.selectedModule]["capcity"],(function(filter,index){return _c("el-option",{key:index,attrs:{label:filter.name,value:filter.value,"no-data-text":"No filter",clearable:""}})}))],2)],1)]):"lockers"===_vm.selectedModule||"parkingstall"===_vm.selectedModule?_c("div",{staticClass:"flex"},[_c("div",{staticClass:"p10 pL0 pT0"},[_c("el-select",{staticClass:"fc-input-full-border-select2 round-select",attrs:{filterable:"","default-first-option":"",placeholder:"Status",size:"mini"},on:{change:_vm.searchContent},model:{value:_vm.selectedFilter[_vm.selectedModule]["status"],callback:function($$v){_vm.$set(_vm.selectedFilter[_vm.selectedModule],"status",$$v)},expression:"selectedFilter[selectedModule]['status']"}},_vm._l(_vm.filtersOptions[_vm.selectedModule]["status"],(function(filter,index){return _c("el-option",{key:index,attrs:{label:filter.name,value:filter.value,"no-data-text":"No filter",clearable:""}})})),1)],1)]):_vm._e()])])]:_vm._e(),_c("div",{staticClass:"sidebarhide",on:{click:function($event){return _vm.handleSideBar()}}},[_c("div",{staticClass:"sidebarhide-bar"},[_vm.hidesidebar?_c("i",{staticClass:"el-icon-arrow-right"}):_c("i",{staticClass:"el-icon-arrow-left"})])])],2),_vm.isLoading&&_vm.firstTimeLoad?[_c("div",{staticClass:"fc-search-result-con list-container mT15 fp-result-list",attrs:{id:"fp-result-view"}},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1)]:Object.keys(_vm.serachResult).length&&_vm.firstTimeLoad?[_c("div",{staticClass:"fc-search-result-con list-container mT15 fp-result-list",class:{"all-view":"all"===_vm.selectedModule},attrs:{id:"fp-result-view"},on:{"&scroll":function($event){return _vm.onScroll.apply(null,arguments)}}},[_vm.serachResult["employee"]?_c("div",{staticClass:"fc-pink f12 text-uppercase pT15 bold"},[_vm._v(" Employee ")]):_vm._e(),"ASSIGNMENT"===_vm.viewerMode?_vm._l(_vm.serachResult["employee"],(function(employee,index){return _c("div",{key:index},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer",on:{click:function($event){return _vm.actionEmployee(employee)}}},[_c("avatar",{attrs:{size:"md",user:employee}})],1)]),_c("el-col",{staticClass:"pL15",attrs:{span:20}},[_c("div",{staticClass:"fc-black-14 text-left fc-rightside-ico pinter",on:{click:function($event){return _vm.actionEmployee(employee)}}},[_c("div",[_vm._v(" "+_vm._s(employee.name||"")+" ")]),_c("div",{staticClass:"flex flex-row pT5"},[employee&&employee.space?_c("div",{staticClass:"flex flex-row pR10"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/office_desk",iconClass:"deskFill icon-path-fill vertical-bottom"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                          arrow: true,\n                          arrowType: 'round',\n                          animation: 'fade',\n                        }"}],staticClass:"fc-black-12 fw4 text-left break-word line-height18 truncate-text pL3",staticStyle:{"max-width":"100px"},attrs:{content:employee.space.name}},[_vm._v(" "+_vm._s(employee.space.name)+" ")])]):_vm._e(),employee.data&&employee.data.department?_c("div",{staticClass:"flex-middle"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/department2",iconClass:"icon icon-sm icon-path-fill mR5"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                          arrow: true,\n                          arrowType: 'round',\n                          animation: 'fade',\n                        }"}],staticClass:"fc-black-12 fw4 text-left break-word line-height18 truncate-text",staticStyle:{"max-width":"150px"},attrs:{content:employee.data.department.name}},[_vm._v(" "+_vm._s(employee.data&&employee.data.department?employee.data.department.name:"")+" ")])]):_vm._e()])])]),_vm.showAssignOption?_c("el-col",{staticClass:"cursor-drag",attrs:{span:2}},[_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Drag and drop employee",placement:"top-start"}},[_c("div",{staticClass:"more-icon-contianer",on:{mousedown:function($event){return _vm.handleMouseDown($event,employee)},mouseup:function($event){return _vm.handleEmpMouseUp(employee)},mousemove:function($event){return _vm.handleMouseMove($event,employee)}}},[_c("inline-svg",{attrs:{src:"svgs/header-more"}}),_c("inline-svg",{staticStyle:{bottom:"12px"},attrs:{src:"svgs/header-more"}})],1)])],1):_vm._e()],1)],1)})):_vm._l(_vm.serachResult["employee"],(function(employee,index){return _c("div",{key:index,on:{click:function($event){return _vm.actionEmployee(employee)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("avatar",{attrs:{size:"md",user:employee}})],1)]),_c("el-col",{staticClass:"pL15",attrs:{span:22}},[_c("div",{staticClass:"fc-black-14 text-left fc-rightside-ico pointer"},[_c("div",[_vm._v(" "+_vm._s(employee.name||"")+" ")]),_c("div",{staticClass:"flex flex-row pT5"},[employee&&employee.space?_c("div",{staticClass:"flex flex-row pR10"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/office_desk",iconClass:"deskFill icon-path-fill vertical-bottom"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                          arrow: true,\n                          arrowType: 'round',\n                          animation: 'fade',\n                        }"}],staticClass:"fc-black-12 fw4 text-left break-word line-height18 truncate-text pL3",staticStyle:{"max-width":"100px"},attrs:{content:employee.space.name}},[_vm._v(" "+_vm._s(employee.space.name)+" ")])]):_vm._e(),employee.data&&employee.data.department?_c("div",{staticClass:"flex-middle"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/department2",iconClass:"icon icon-sm icon-path-fill mR5"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                          arrow: true,\n                          arrowType: 'round',\n                          animation: 'fade',\n                        }"}],staticClass:"fc-black-12 fw4 text-left break-word line-height18 truncate-text",staticStyle:{"max-width":"150px"},attrs:{content:employee.data.department.name}},[_vm._v(" "+_vm._s(employee.data&&employee.data.department?employee.data.department.name:"")+" ")])]):_vm._e()])])])],1)],1)})),_vm.serachResult["desks"]?_c("div",{staticClass:"fc-pink f12 text-uppercase pT15 bold"},[_vm._v(" Desks ")]):_vm._e(),_vm._l(_vm.serachResult["desks"],(function(desk,index){return _c("div",{key:"desk"+index,on:{click:function($event){return _vm.emitData("desks",desk)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/office_desk",iconClass:"icon text-center fp-icon-inside icon-xxl"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",[_vm._v(" "+_vm._s(desk.name||"")+" ")]),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"fc-black-12 fw4 pT5",staticStyle:{color:"#a3a6b1"}},[_vm._v(" "+_vm._s(_vm.deskType[desk.deskType])+" ")])])])])])],1)],1)})),_vm.serachResult["space"]?_c("div",{staticClass:"fc-pink f12 text-uppercase pT15 bold"},[_vm._v(" Rooms ")]):_vm._e(),_vm._l(_vm.serachResult["space"],(function(data,index){return _c("div",{key:"space"+index,on:{click:function($event){return _vm.emitData("space",data)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/room1",iconClass:"icon text-center icon-md  fp-icon-inside"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",{staticClass:"flex-middle"},[_c("div",[_vm._v(" "+_vm._s(data.name||"")+" ")]),data.isReservable?_c("div",{staticClass:"fc-room-tag"},[_c("el-tag",[_vm._v("Reservable")])],1):_vm._e()]),_c("div",{staticClass:"pT5 flex-middle"},[_c("i",{staticClass:"el-icon-user-solid f14",staticStyle:{color:"#a9aacb"}}),_c("div",{staticClass:"pL5 fc-black-12 fw4"},[_vm._v(" "+_vm._s(data.maxOccupancy>0?data.maxOccupancy:0)+" ")])])])])],1)],1)})),_vm.serachResult["lockers"]?_c("div",{staticClass:"fc-pink f12 text-uppercase pT15 bold"},[_vm._v(" Lockers ")]):_vm._e(),_vm._l(_vm.serachResult["lockers"],(function(data,index){return _c("div",{key:"lockers"+index,on:{click:function($event){return _vm.emitData("space",data)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/locker",iconClass:"icon text-center icon-md  fp-icon-inside"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",[_vm._v(" "+_vm._s(data.name||"")+" ")]),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"flex-middle"},[data.data&&data.data.singleline?_c("div",{staticClass:"fc-black-12 fw4"},[_vm._v(" "+_vm._s(data.data.singleline)+" ")]):_vm._e()])])])])],1)],1)})),_vm.serachResult["parkingstall"]?_c("div",{staticClass:"fc-pink f12 text-uppercase pT15 bold"},[_vm._v(" Parkings ")]):_vm._e(),_vm._l(_vm.serachResult["parkingstall"],(function(data,index){return _c("div",{key:"parkingstall"+index,on:{click:function($event){return _vm.emitData("space",data)}}},[_c("el-row",{staticClass:"field-row flex flex-row list-borader-bottom align-center pT15 pB15"},[_c("el-col",{staticClass:"self-center",attrs:{span:2}},[_c("div",{staticClass:"task-handle mR5 pointer"},[_c("div",{staticClass:"fp-search-icons"},[_c("inline-svg",{attrs:{src:"svgs/parking",iconClass:"icon text-center icon-md  fp-icon-inside"}})],1)])]),_c("el-col",{staticClass:"pL10",attrs:{span:22}},[_c("div",{staticClass:"bold fc-black-14 text-left fc-rightside-ico"},[_c("div",[_vm._v(" "+_vm._s(data.name||"")+" ")]),_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"flex-middle"},[data.parkingType?_c("div",{staticClass:"fc-black-12 fw4"},[_vm._v(" "+_vm._s(_vm.parkingtypeMap[data.parkingType])+" ")]):_vm._e()])])])])],1)],1)}))],2)]:_vm.firstTimeLoad?[_c("div",{staticClass:"fc-search-result-con list-container mT15 fp-result-list nodata text-center",attrs:{id:"fp-result-view"}},[_c("inline-svg",{attrs:{src:"svgs/floor-plan-empty",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"fwBold"},[_vm._v(" No search results found ")])],1)]:_vm._e()],2),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"SWITCH FLOOR",visible:_vm.openFloorPlanDialog,width:"30%","before-close":_vm.closeDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.openFloorPlanDialog=$event}}},[_c("div",{staticClass:"height150"},[_vm.openfloorplanData?_c("div",{staticClass:"label-txt-black"},[_vm.openfloorplanData.loading?_c("span",[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("span",[_vm._v(" "+_vm._s(_vm.openfloorplanData.message)+" ")])]):_vm._e()]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.openFloorPlanDialog=!1}}},[_vm._v(_vm._s("CANCEL")+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.openFloorPlan()}}},[_vm._v(_vm._s("SWITCH")+" ")])],1)])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(538077),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(420629)),Avatar=__webpack_require__(574752),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),api=__webpack_require__(32284),eventBus=__webpack_require__(398011),IndoorFloorplanSearchvue_type_script_lang_js={props:["visible","deskList","loading","departments","viewerMode","spaceList","floorId","parkings","lockers","floorplanId"],components:{Avatar:Avatar["default"]},data:function(){return{selectedDragEmployee:null,searchLimit:10,firstTimeLoad:!0,openFloorPlanDialog:!1,openfloorplanData:null,hidesidebar:!0,deskType:{1:"Assignable",2:"Hoteling",3:"Hot"},spaceCategories:[],scrollPosition:0,selectedModule:"all",focused:!0,isLoading:!1,isDragging:!1,mouseDown:!1,searchpopover:!1,search:null,showSearchbox:!1,employelistview:!0,showHidesearchIcon:!0,unassigned:!1,searchBy:{employee:!0,desk:!1,room:!1,parking:!1},fieldSectionDragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0},activeSearchby:["1"],searchMosules:[{name:"Employee",value:"employee",icon:"svgs/person",iconClass:"deskFill icon-path-fill align-top"},{name:"Desk",value:"desks",icon:"svgs/office_desk",iconClass:"deskFill icon-path-fill vertical-bottom"},{name:"Room",value:"space",icon:"svgs/room2",iconClass:"roomFill icon-path-fill"},{name:"Locker",value:"lockers",icon:"svgs/locker",iconClass:"lockerFill icon-path-fill"},{name:"Parking Lot",value:"parkingstall",icon:"svgs/parking",iconClass:"parkingFill icon-path-fill"}],employeLoading:!1,empList:[],dskList:[],filtersOptions:{employee:{assignment:[{name:"All",value:"all"},{name:"Seated",value:"asssigned"},{name:"Unseated",value:"unasssigned"}],department:[]},desks:{desktypes:[{name:"All",value:-1},{name:"Assignable",value:1},{name:"Hoteling",value:2},{name:"Hot",value:3}]},space:{capcity:[{name:"Capacity",value:-1},{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5},{name:"6",value:6},{name:"7",value:7},{name:"8",value:8},{name:"9",value:9},{name:"10+",value:10}]},lockers:{status:[{name:"All",value:-1},{name:"Vacant",value:1},{name:"Occupied",value:2}]},parkingstall:{status:[{name:"All",value:-1},{name:"Vacant",value:"vacant"},{name:"Occupied",value:"occupied"}]}},selectedFilter:{employee:{assignment:"unasssigned"},desks:{desktype:1},lockers:{status:1},parkingstall:{status:1},space:{capcity:-1}},spacesList:[],lockersList:[],parkingstallList:[],parkingStatus:[]}},created:function(){this.loadParkingStatus()},mounted:function(){this.getSideBarDetails(),this.getSpaceCatgory(),"ASSIGNMENT"===this.viewerMode?this.selectedModule="employee":"BOOKING"===this.viewerMode&&(this.selectedFilter["desks"]["desktype"]=-1,this.selectedModule="all",this.firstTimeLoad=!1,this.focused=!1),this.searchData(),this.initEvents()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{hasAssignPermission:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("ASSIGN",currentTab)},parkingIdvsName:function(){var _this=this,map={};return this.parkings&&this.parkings.length&&this.parkings.forEach((function(parking){_this.$set(map,parking.id,parking.name)})),map},locakerIdvsName:function(){var _this2=this,map={};return this.lockers&&this.lockers.length&&this.lockers.forEach((function(locker){_this2.$set(map,locker.id,locker.name)})),map},parkingtypeMap:function(){return{1:"Parking Stall",2:"Handicap",3:"Carpool"}},deskCategoryId:function(){var deskCategory=this.spaceCategories.find((function(rt){return"Desk"===rt.name}));return deskCategory?deskCategory.id:null},count:function(){return this.empList.length},serachResult:function(){var result={},empList=this.empList,dskList=this.dskList,spacesList=this.spacesList,lockersList=this.lockersList,parkingstallList=this.parkingstallList;return empList&&empList.length&&(result["employee"]=this.applySearchLimit(empList)),dskList&&dskList.length&&(result["desks"]=this.applySearchLimit(dskList)),spacesList&&spacesList.length&&(result["space"]=this.applySearchLimit(this.applyOthermoduleFilters(spacesList))),lockersList&&lockersList.length&&(result["lockers"]=this.applySearchLimit(lockersList)),parkingstallList&&parkingstallList.length&&(result["parkingstall"]=this.applySearchLimit(parkingstallList)),result},getModuleDisplayName:function(){var searchMosules=this.searchMosules,selectedModule=this.selectedModule;return"all"===selectedModule?"All":searchMosules&&selectedModule?this.searchMosules.find((function(rt){return rt.value===selectedModule})).name:"All"},employeeList:function(){var _this3=this,deskList=this.deskList,empList=this.empList;if(deskList&&deskList.length){var employeeMap={},deskName={};return deskList.forEach((function(rt){rt.employee&&rt.employee.id&&(_this3.$set(employeeMap,rt.employee.id,rt.id),_this3.$set(deskName,rt.employee.id,rt))})),empList.forEach((function(rt){employeeMap[rt.id]&&_this3.$set(rt,"desk",deskName[rt.id])})),empList}return[]},hasViewPermission:function(){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("VIEW",currentTab)},showAssignOption:function(){return!(!this.hasViewPermission||!this.hasAssignPermission)}}),beforeDestroy:function(){eventBus/* eventBus */.Y.$off("REFRESH_EMPLOYEE_LIST",(function(){}))},methods:{initEvents:function(){eventBus/* eventBus */.Y.$on("REFRESH_EMPLOYEE_LIST",this.handleEmployeeRefresh)},handleEmployeeRefresh:function(){this.searchEmployee(this.search)},loadParkingStatus:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:api/* API */.bl.get("v2/state/list?parentModuleName=parkingstall").then((function(_ref){var data=_ref.data;_this4.parkingStatus=data.status||[]}));case 1:case"end":return _context.stop()}}),_callee)})))()},applyOthermoduleFilters:function(spaceList){var _this5=this;if(spaceList&&spaceList.length)return spaceList.filter((function(space){return _this5.parkingIdvsName[space.id]||_this5.locakerIdvsName[space.id]?null:space}))},applySearchLimit:function(data){return this.searchLimit&&data.length&&
// data.length = this.searchLimit
data.splice(this.searchLimit),data},openFloorPlan:function(){this.openfloorplanData&&this.openfloorplanData.indoorFloorPlanId&&(this.$router.push({path:"/employee/floorplan/floor-map/indoorfloorplan/".concat(this.openfloorplanData.floorId,"/").concat(this.openfloorplanData.indoorFloorPlanId),query:{deskId:this.openfloorplanData.deskId}}),
// window.open(routeData.href, '_blank')
this.closeDialog())},closeDialog:function(){this.openFloorPlanDialog=!1},actionEmployee:function(employee){if(this.openfloorplanData={},employee&&employee.space&&employee.space.id){var floor=employee.space.floor;if(floor&&floor.id)if(floor.id===this.floorId)this.emitData("desks",employee.space);else{var data={deskId:employee.space.id,deskName:employee.space.name,employeeName:employee.name,floorId:floor.id,message:"",loading:!0,indoorFloorPlanId:-1};this.openfloorplanData=data,this.openFloorPlanDialog=!0,this.getFloor()}}},getFloor:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var floorId,params,_yield$API$post,data,floor,building,employeeName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return floorId=_this6.openfloorplanData.floorId,params={floorId:floorId},_context2.next=4,api/* API */.bl.post("v2/floor/details",params);case 4:_yield$API$post=_context2.sent,data=_yield$API$post.data,data&&(floor=data.floor,building=floor.building,_this6.openfloorplanData.indoorFloorPlanId=floor.indoorFloorPlanId,employeeName=_this6.openfloorplanData.employeeName,_this6.openfloorplanData.message="".concat(employeeName," is located at ").concat(floor.name," ").concat(building&&building.name?", "+building.name:"",". Do you want to switch the floor plan?")),_this6.openfloorplanData.loading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},openFloorPlanAndDesk:function(){},getSideBarDetails:function(){var sidebar=window.localStorage.getItem("searchSideBar");this.hidesidebar=!(!sidebar||"hide"!==sidebar)},handleSideBar:function(){this.hidesidebar=!this.hidesidebar,this.hidesidebar?window.localStorage.setItem("searchSideBar","hide"):window.localStorage.setItem("searchSideBar","show")},emitData:function(modulesName,data){this.$emit("focus",modulesName,data)},switchModule:function(module){this.search=null,this.empList=[],this.dskList=[],this.spacesList=[],this.lockersList=[],this.parkingstallList=[],this.selectedModule=module.value,this.searchpopover=!1,this.searchData()},onScroll:function(){this.scrollPosition=document.querySelector("#fp-result-view").scrollTop},blurSearchBox:function(){
// if (!this.search) {
//   this.focused = false
// }
},getData:function(){this.employeeSearch(this.search)},getAll:function(searchText){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var params,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this7.isLoading=!0,_this7.dskList=[],params={search:searchText},_context3.next=5,api/* API */.bl.get("v3/floorplan/search/".concat(_this7.floorplanId),params);case 5:_yield$API$get=_context3.sent,data=_yield$API$get.data,null!==data&&void 0!==data&&data.records&&data.records.forEach((function(records){var name=records.name;"desks"===name&&null!==records&&void 0!==records&&records.data&&(_this7.dskList=records.data),"space"===name&&null!==records&&void 0!==records&&records.data&&(_this7.spacesList=records.data),"lockers"===name&&null!==records&&void 0!==records&&records.data&&(_this7.lockersList=records.data),"parkingstall"===name&&null!==records&&void 0!==records&&records.data&&(_this7.parkingstallList=records.data),"employee"===name&&null!==records&&void 0!==records&&records.data&&(_this7.empList=records.data)})),_this7.isLoading=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},searchData:function(){this.firstTimeLoad=!0,this.focused=!0,"employee"===this.selectedModule?this.employeeSearch(this.search):"desks"===this.selectedModule?this.searchDesks(this.search):"space"===this.selectedModule?this.searchSpaces(this.search):"lockers"===this.selectedModule?this.searchLocalLockers(this.search):"parkingstall"===this.selectedModule?this.searchParkings(this.search):"all"===this.selectedModule&&this.getAll(this.search)},searchContent:debounce_default()((function(){this.searchData()}),1e3),handleMouseMove:function($event,employee){this.mouseDown&&!this.isDragging&&(this.onselectPrevent(),this.$emit("dragElement",$event,employee),this.isDragging=!0,this.mouseDown=!1)},mouseDragClickAction:function(){},handleEmpMouseUp:function(employee){this.isDragging?(this.mouseDragClickAction(),this.isDragging=!1):this.actionEmployee(employee),this.mouseDown=!1,this.onselectEnable()},handleMouseDown:function(){this.onselectPrevent(),this.mouseDown=!0},handleMouseUP:function(){this.isDragging&&(this.isDragging=!1,this.onselectEnable())},onselectPrevent:function(){document.onselectstart=function(){return!1;// cancel selection
}},onselectEnable:function(){document.onselectstart=function(){return!0;// cancel selection
}},handleMouseLeave:function(){this.isDragging&&this.handleClose()},handleClose:function(){this.$emit("update:visible",!1),this.$emit("close"),this.isDragging=!1},hideSearchBox:function(){this.showSearchbox=!1,this.showHidesearchIcon=!0},clickToShowSearchBox:function(){this.showSearchbox=!0,this.showHidesearchIcon=!1},getSpaceCatgory:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var params,_yield$API$get2,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return params={moduleName:"spacecategory",page:1,perPage:_this8.searchLimit,includeParentFilter:!0},_context4.next=3,api/* API */.bl.get("v3/modules/data/list",params);case 3:_yield$API$get2=_context4.sent,data=_yield$API$get2.data,data&&(_this8.spaceCategories=data.spacecategory);case 6:case"end":return _context4.stop()}}),_callee4)})))()},searchLocaker:function(searchText){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return filters={name:{operatorId:5,value:[searchText]}},params={moduleName:"lockers",page:1,perPage:_this9.searchLimit,includeParentFilter:!0},searchText&&(params={moduleName:"lockers",page:1,perPage:_this9.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)}),_context5.next=5,api/* API */.bl.get("v2/module/data/list",params).then((function(_ref2){var data=_ref2.data;data&&(_this9.lockersList=data.moduleDatas)}));case 5:case"end":return _context5.stop()}}),_callee5)})))()},searchparkingstall:function(searchText){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return filters={name:{operatorId:5,value:[searchText]}},params={moduleName:"parkingstall",page:1,perPage:_this10.searchLimit,includeParentFilter:!0},searchText&&(params={moduleName:"parkingstall",page:1,perPage:_this10.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)}),_context6.next=5,api/* API */.bl.get("v2/module/data/list",params).then((function(_ref3){var data=_ref3.data;data&&(_this10.parkingstallList=data.moduleDatas)}));case 5:case"end":return _context6.stop()}}),_callee6)})))()},
// async searchDeskss(searchText) {
//   let { selectedFilter, selectedModule } = this
//   this.isLoading = true
//   this.dskList = []
//   let filters = {
//     deskType: {
//       operatorId: 54,
//       value: [String(selectedFilter[selectedModule]['desktype'])],
//     },
//   }
//   let params = {
//     moduleName: 'desks',
//     page: 1,
//     perPage: this.searchLimit,
//     includeParentFilter: true,
//     filters: JSON.stringify(filters),
//   }
//   if (searchText) {
//     filters['name'] = { operatorId: 5, value: [searchText] }
//     params = {
//       moduleName: 'desks',
//       page: 1,
//       perPage: this.searchLimit,
//       includeParentFilter: true,
//       filters: JSON.stringify(filters),
//     }
//   }
//   await API.get(`v2/module/data/list`, params).then(({ data }) => {
//     if (data) {
//       this.dskList = data.moduleDatas
//     }
//   })
//   this.isLoading = false
// },
searchDesks:function(searchText){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var selectedFilter,selectedModule,params,_yield$API$get3,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _this11.isLoading=!0,selectedFilter=_this11.selectedFilter,selectedModule=_this11.selectedModule,_this11.dskList=[],params={search:searchText,moduleName:"desks"},-1!==selectedFilter[selectedModule]["desktype"]&&(params["filters"]='{"deskType":{"operatorId":54,"value":["'.concat(selectedFilter[selectedModule]["desktype"],'"]}}')),_context7.next=7,api/* API */.bl.get("v3/floorplan/search/".concat(_this11.floorplanId),params);case 7:_yield$API$get3=_context7.sent,data=_yield$API$get3.data,data&&(_this11.dskList=_this11.getRecords("desks",data)),_this11.isLoading=!1;case 11:case"end":return _context7.stop()}}),_callee7)})))()},searchLocalLockers:function(searchText){var _this12=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var selectedFilter,selectedModule,params,filters,_yield$API$get4,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return _this12.isLoading=!0,selectedFilter=_this12.selectedFilter,selectedModule=_this12.selectedModule,_this12.lockersList=[],params={search:searchText,moduleName:selectedModule,includeParentFilter:!0},-1!==selectedFilter[selectedModule]["status"]&&(filters={employee:{operatorId:selectedFilter[selectedModule]["status"]}},params["filters"]=JSON.stringify(filters),params.includeParentFilter=!0),_context8.next=7,api/* API */.bl.get("v3/floorplan/search/".concat(_this12.floorplanId),params);case 7:_yield$API$get4=_context8.sent,data=_yield$API$get4.data,data&&(_this12.lockersList=_this12.getRecords(selectedModule,data)),_this12.isLoading=!1;case 11:case"end":return _context8.stop()}}),_callee8)})))()},searchParkings:function(searchText){var _this13=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){var selectedFilter,selectedModule,params,statusId,_yield$API$get5,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return _this13.isLoading=!0,selectedFilter=_this13.selectedFilter,selectedModule=_this13.selectedModule,_this13.parkingstallList=[],params={search:searchText,moduleName:selectedModule},-1!==selectedFilter[selectedModule]["status"]&&(statusId=_this13.parkingStatus.find((function(rt){return rt.name===selectedFilter[selectedModule]["status"]})),statusId&&(params["filters"]='{"moduleState":{"operatorId":36,"value":["'.concat(statusId,'"]}}'))),_context9.next=7,api/* API */.bl.get("v3/floorplan/search/".concat(_this13.floorplanId),params);case 7:_yield$API$get5=_context9.sent,data=_yield$API$get5.data,data&&(_this13.parkingstallList=_this13.getRecords(selectedModule,data)),_this13.isLoading=!1;case 11:case"end":return _context9.stop()}}),_callee9)})))()},searchSpaces:function(searchText){var _this14=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee10(){var selectedFilter,selectedModule,params,_yield$API$get6,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context10){while(1)switch(_context10.prev=_context10.next){case 0:return _this14.isLoading=!0,selectedFilter=_this14.selectedFilter,selectedModule=_this14.selectedModule,_this14.spacesList=[],params={search:searchText,moduleName:selectedModule},-1!==selectedFilter[selectedModule]["capcity"]&&(params["filters"]='{"maxOccupancy":{"operatorId":9,"value":["'.concat(selectedFilter[selectedModule]["capcity"],'"]}}')),_context10.next=7,api/* API */.bl.get("v3/floorplan/search/".concat(_this14.floorplanId),params);case 7:_yield$API$get6=_context10.sent,data=_yield$API$get6.data,data&&(_this14.spacesList=_this14.getRecords(selectedModule,data)),_this14.isLoading=!1;case 11:case"end":return _context10.stop()}}),_callee10)})))()},searchSpace:function(searchText){var _this15=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee11(){var selectedFilter,selectedModule,filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context11){while(1)switch(_context11.prev=_context11.next){case 0:return selectedFilter=_this15.selectedFilter,selectedModule=_this15.selectedModule,filters={spaceCategory:{operatorId:37,value:["".concat(_this15.deskCategoryId)]}},selectedFilter[selectedModule]["capcity"]&&(filters["maxOccupancy"]={operatorId:12,value:[""+selectedFilter[selectedModule]["capcity"]]}),params={moduleName:"space",page:1,perPage:_this15.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)},searchText&&(filters["name"]={operatorId:5,value:[searchText]},params={moduleName:"space",page:1,perPage:_this15.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)}),_context11.next=7,api/* API */.bl.get("v2/module/data/list",params).then((function(_ref4){var data=_ref4.data;data&&(_this15.spacesList=data.moduleDatas)}));case 7:return _context11.abrupt("return",_context11.sent);case 8:case"end":return _context11.stop()}}),_callee11)})))()},searchEmployee:function(searchText){var _this16=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee12(){var filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context12){while(1)switch(_context12.prev=_context12.next){case 0:return filters={},params={moduleName:"employee",page:1,perPage:_this16.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)},searchText&&(filters["name"]={operatorId:5,value:[searchText]},params={moduleName:"employee",page:1,perPage:_this16.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)}),_context12.next=5,api/* API */.bl.get("v2/module/data/list",params).then((function(_ref5){var data=_ref5.data;data&&(_this16.empList=data.moduleDatas)}));case 5:case"end":return _context12.stop()}}),_callee12)})))()},employeeSearch:function(searchText,loadAll){var _this17=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee13(){var selectedFilter,selectedModule,filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context13){while(1)switch(_context13.prev=_context13.next){case 0:return selectedFilter=_this17.selectedFilter,selectedModule=_this17.selectedModule,_this17.isLoading=!0,_this17.empList=[],filters={},// department: {
//     operatorId: 35,
//     lookupOperatorId: 5,
//     field: 'name',
//     value: [searchText],
//     orFilters: [{ field: 'name', operatorId: 5 }],
//   },
loadAll||(filters="asssigned"===selectedFilter[selectedModule]["assignment"]?{desks:{operatorId:88,relatedFieldName:"employee",relatedOperatorId:2,filterFieldName:"employee",value:["test"]}}:"all"===selectedFilter[selectedModule]["assignment"]?{}:{desks:{operatorId:92,relatedFieldName:"employee",relatedOperatorId:2,filterFieldName:"employee",value:["test"]}},selectedFilter[selectedModule]["department"]&&(filters["department"]={operatorId:36,value:[String(selectedFilter[selectedModule]["department"])]})),params={moduleName:"employee",page:1,perPage:_this17.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)},searchText&&(filters["name"]={operatorId:5,value:[searchText]},params={moduleName:"employee",page:1,perPage:_this17.searchLimit,includeParentFilter:!0,filters:JSON.stringify(filters)}),_this17.employeLoading=!0,_context13.next=10,api/* API */.bl.get("v2/module/data/list",params).then((function(_ref6){var data=_ref6.data;data&&(_this17.empList=data.moduleDatas),_this17.employeLoading=!1}));case 10:_this17.isLoading=!1;case 11:case"end":return _context13.stop()}}),_callee13)})))()},getEmployee:function(){var _this18=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee14(){var params,filters,_yield$API$get7,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context14){while(1)switch(_context14.prev=_context14.next){case 0:return _this18.empList=[],params={moduleName:"employee",page:1,perPage:_this18.searchLimit,includeParentFilter:!0},filters={desks:{operatorId:92,relatedFieldName:"employee",filterFieldName:"employee",relatedOperatorId:2,value:["test"]}},_this18.unassigned&&(params={page:1,perPage:_this18.searchLimit,includeParentFilter:!0,moduleName:"employee",filters:JSON.stringify(filters)}),_this18.employeLoading=!0,_context14.next=7,api/* API */.bl.get("v2/module/data/list",params);case 7:_yield$API$get7=_context14.sent,data=_yield$API$get7.data,data&&(_this18.empList=data.moduleDatas),_this18.employeLoading=!1;case 11:case"end":return _context14.stop()}}),_callee14)})))()},getRecords:function(moduleName,data){if(null!==data&&void 0!==data&&data.records){var list=data.records.find((function(rt){return rt.name===moduleName}));if(null!==list&&void 0!==list&&list.data&&null!==list&&void 0!==list&&list.data.length)return list.data}return[]}}},components_IndoorFloorplanSearchvue_type_script_lang_js=IndoorFloorplanSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_IndoorFloorplanSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,"3a4f8540",null)
/* harmony default export */,IndoorFloorplanSearch=component.exports},
/***/605552:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return MapBoxBase}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/components/MapBoxBase.vue?vue&type=template&id=c0a97f6e&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"map",staticClass:"map"})},staticRenderFns=[],mapbox_gl=(__webpack_require__(879288),__webpack_require__(450886),__webpack_require__(260228),__webpack_require__(706158)),mapbox_gl_default=__webpack_require__.n(mapbox_gl),MapBoxBasevue_type_script_lang_js={name:"base-map",props:{styles:{type:String,required:!1,default:function(){
// return null;
// return 'mapbox://styles/mapbox/streets-v11'
return"mapbox://styles/prasanth1/ckmw2ly7e0jy817r6jzd4em5j"}},center:{type:Array,required:!1,default:function(){return[0,0]}},zoom:{type:Number,required:!1,default:20},minZoom:{type:Number,required:!1,default:17},maxZoom:{type:Number,required:!1,default:22}},data:function(){return{loaded:!1}},mounted:function(){var _this=this;
//map component on mount emits map object and a promise->which resolves when map is loaded
mapbox_gl_default().accessToken="pk.eyJ1IjoicHJhc2FudGgxIiwiYSI6ImNrbHhodzhzZDJ0YXYydW53d3hhaTBlNW4ifQ.4F4YF7aUuwmUQV5TfA4lbQ",this.map=new(mapbox_gl_default().Map)({container:this.$refs.map,
// container id
style:this.styles,center:this.center,zoom:this.zoom,
// starting zoom
maxZoom:this.maxZoom,minZoom:this.minZoom,renderWorldCopies:!1});var onMapLoad=new Promise((function(res){_this.map.on("load",(function(){_this.loaded=!0,_this.map.addControl(new(mapbox_gl_default().NavigationControl)),res()}))}));this.$emit("mapLoaded",{map:this.map,mapboxgl:mapbox_gl_default(),onMapLoad:onMapLoad})}},components_MapBoxBasevue_type_script_lang_js=MapBoxBasevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_MapBoxBasevue_type_script_lang_js,render,staticRenderFns,!1,null,"c0a97f6e",null)
/* harmony default export */,MapBoxBase=component.exports},
/***/381904:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ViewerActions}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules
var render,staticRenderFns,toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(648324),__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(450886),__webpack_require__(899211),__webpack_require__(228607),__webpack_require__(995194),__webpack_require__(36664),__webpack_require__(455980),__webpack_require__(279943),__webpack_require__(396089),__webpack_require__(718539),__webpack_require__(948690),__webpack_require__(520522),__webpack_require__(200082),__webpack_require__(345385),__webpack_require__(785552),__webpack_require__(131803),__webpack_require__(991565),__webpack_require__(367987),__webpack_require__(549365),__webpack_require__(480677),__webpack_require__(518118),__webpack_require__(41165),__webpack_require__(271522),__webpack_require__(379976),__webpack_require__(304797),__webpack_require__(207300),__webpack_require__(593356),__webpack_require__(862533),__webpack_require__(699724),__webpack_require__(724224),__webpack_require__(761121),__webpack_require__(899901),__webpack_require__(637133),__webpack_require__(397895),__webpack_require__(670560),__webpack_require__(169358),__webpack_require__(821057),__webpack_require__(32284)),baseUrl=__webpack_require__(420499),mapbox_gl=__webpack_require__(706158),mapbox_gl_default=__webpack_require__.n(mapbox_gl),eventBus=__webpack_require__(398011),moment=__webpack_require__(730381),moment_default=__webpack_require__.n(moment),ViewerActionsvue_type_script_lang_js={props:["id"],data:function(){return{floorplanMappedmodules:[],floorplanloading:!0,movedEmployeeDesks:[],moveText:null,indoorFloorPlan:null,markers:{},zones:{},selectedElementIndex:-1,selectedElement:null,canMove:!1,spaces:[],markerTypes:[],employeeList:[],employeSideBar:!0,selectedFeature:null,modules:[],departments:[],leagends:[],desks:[],imageList:[],amenities:[],deskTypes:[{name:"Assigned Desk",value:1,color:"red"},{name:"Hotel Desk",value:2,color:"green"},{name:"HOT Desk",value:3,color:"blue"},{name:"Assignable Desk",value:4,color:"red"}],spaceCategories:[],employeLoading:!1,unassignedemployee:!0,markerIconMap:{Camera:"Camera.png",CCTV:"CCTV.png",Elevator:"Elevator.png",Escalator:"Escalator.png","Women’s restroom":"FemaleRestroom.png","Fire extinguisher":"FireExtingus.png",Kitchen:"Kitchen1.png",Microwave:"Kitchen2.png",Locker:"Locker.png","Men’s restroom":"MaleRestroom.png",Parking:"Parking.png",Restroom:"Restroom.png",Handicap:"Handicap.png",Limited:"Limited.png"},floorplanTypes:{},floorplantypeSwicthLoading:!0,indoorFloorplanFields:[],imageBounds:[],markerMap:{},markerList:[],zoneList:[],zoneMap:{},facilities:{},bookings:{}}},computed:{defaulttimeRange:function(){
// '09:00 : AM', '05:00 : PM'
var date=moment_default()().startOf("day").valueOf(),d=new Date,ms=d.getHours(),currentTime=36e5*ms,time=date+108e5;return currentTime<=time?{startTime:date+54e6,endTime:date+792e5}:{startTime:date+324e5,endTime:date+612e5}},floorplanMappedModulesObject:function(){var _this=this,data={};return this.floorplanMappedmodules.forEach((function(rt){data[rt.moduleId]||_this.$set(data,rt.moduleId,rt.name)})),data},newBooking:function(){return!!this.$helpers.isLicenseEnabled("NEW_BOOKING")},newFloorPlan:function(){return!!this.$helpers.isLicenseEnabled("NEW_FLOORPLAN")},spaceCategoryIdVsNameMap:function(){var _this2=this,data={};return this.spaceCategories.forEach((function(rt){_this2.$set(data,rt.id,rt.name)})),data},iconSize:function(){return this.indoorFloorPlan&&this.indoorFloorPlan.iconSize?this.indoorFloorPlan.iconSize:1},fontSize:function(){return this.indoorFloorPlan&&this.indoorFloorPlan.fontSize?this.indoorFloorPlan.fontSize:10},minZoom:function(){return this.indoorFloorPlan&&this.indoorFloorPlan.minZoom?this.indoorFloorPlan.minZoom:16},maxZoom:function(){return this.indoorFloorPlan&&this.indoorFloorPlan.maxZoom?this.indoorFloorPlan.maxZoom:22},defaultMarkerTypes:function(){var _this3=this,markers=this.markerTypes.filter((function(rt){return-1===rt.fileId&&"desk"!==rt.name?rt:null}));return markers.forEach((function(rt){_this3.markerIconMap[rt.name]&&_this3.$set(rt,"icon",_this3.markerIconMap[rt.name])})),markers},defaultMarkerIdVsName:function(){var _this4=this,data={};return this.defaultMarkerTypes.forEach((function(rt){_this4.$set(data,rt.id,rt.name)})),data},defaultMarkerIdVsIcon:function(){var _this5=this,data={};return this.defaultMarkerTypes.forEach((function(rt){_this5.$set(data,rt.id,rt.icon)})),data},defaultMarkerNameVsId:function(){var _this6=this,data={};return this.defaultMarkerTypes.forEach((function(rt){_this6.$set(data,rt.name,rt.id)})),data},deskCategoryId:function(){var deskCategory=this.spaceCategories.find((function(rt){return"Desk"===rt.name}));return deskCategory?deskCategory.id:null},siteId:function(){return this.indoorFloorPlan&&this.indoorFloorPlan.site?this.indoorFloorPlan.site.id:null},floorplanId:function(){return this.id?this.id:this.$route&&this.$route.params.floorplanid?parseInt(this.$route.params.floorplanid):null},customization:function(){var _this$indoorFloorPlan;return null!==(_this$indoorFloorPlan=this.indoorFloorPlan)&&void 0!==_this$indoorFloorPlan&&_this$indoorFloorPlan.customization?this.indoorFloorPlan.customization:null},customizationBooking:function(){var _this$indoorFloorPlan2;return null!==(_this$indoorFloorPlan2=this.indoorFloorPlan)&&void 0!==_this$indoorFloorPlan2&&_this$indoorFloorPlan2.customizationBooking?this.indoorFloorPlan.customizationBooking:null}},methods:{patchUpdateRecord:function(settings){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref,id,param,_yield$API$updateReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref=_this7.indoorFloorPlan||{},id=_ref.id,param={id:id,data:{customizationJSON:JSON.stringify(settings),customization:settings}},_context.next=4,api/* API */.bl.updateRecord("indoorfloorplan",param);case 4:_yield$API$updateReco=_context.sent,error=_yield$API$updateReco.error,error&&_this7.$message.error(error.message||"Error Occured");case 7:case"end":return _context.stop()}}),_callee)})))()},patchUpdateBookingRecord:function(settings){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref2,id,param,_yield$API$updateReco2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref2=_this8.indoorFloorPlan||{},id=_ref2.id,param={id:id,data:{customizationBookingJSON:JSON.stringify(settings),customizationBooking:settings}},_context2.next=4,api/* API */.bl.updateRecord("indoorfloorplan",param);case 4:_yield$API$updateReco2=_context2.sent,error=_yield$API$updateReco2.error,error&&_this8.$message.error(error.message||"Error Occured");case 7:case"end":return _context2.stop()}}),_callee2)})))()},getSpaceCatgoryfromSpace:function(space){return space&&space.spaceCategory&&space.spaceCategory.id&&this.spaceCategoryIdVsNameMap[space.spaceCategory.id]?this.spaceCategoryIdVsNameMap[space.spaceCategory.id]:null},loadModulesList:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get,data,customModules,systemModules;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,api/* API */.bl.get("/v3/modules/list/all");case 2:_yield$API$get=_context3.sent,data=_yield$API$get.data,data&&(customModules=data["customModules"]||[],systemModules=data.systemModules||[],_this9.modules=[].concat((0,toConsumableArray/* default */.Z)(systemModules),(0,toConsumableArray/* default */.Z)(customModules)));case 5:case"end":return _context3.stop()}}),_callee3)})))()},fetchEmployeeFulldetails:function(id){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$API$get2,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!id){_context4.next=6;break}return _context4.next=3,api/* API */.bl.get("v2/servicePortalHome?fetchOnlyDesk=true&count=1&recordId=".concat(id));case 3:_yield$API$get2=_context4.sent,data=_yield$API$get2.data,data&&data.desks&&(_this10.movedEmployeeDesks=data.desks);case 6:case"end":return _context4.stop()}}),_callee4)})))()},loadMoveDetails:function(fromDesk,toDesk){if(this.moveText="",fromDesk){var floorName=fromDesk.floor&&fromDesk.floor.name?fromDesk.floor.name:null;this.moveText="Employee moved from ".concat(fromDesk.name," ").concat(floorName?", "+floorName:""),toDesk&&toDesk.name&&(this.moveText+=" to ".concat(toDesk.name))}else toDesk&&toDesk.name&&(this.moveText+="Employee moved to ".concat(toDesk.name));this.$message.success(this.moveText),eventBus/* eventBus */.Y.$emit("REFRESH_EMPLOYEE_LIST")},generateIcons:function(){var _this11=this;
// this.addSecondaryLabelIcon()
this.addDeskIcon("desk",null,null),// no assignmnet desk types should be #000 in this color
this.deskTypes.forEach((function(type){var name="";name="desk_".concat(type.name),_this11.addDeskIcon(name.replace(/\s+/g,""),"#73706f","#73706f"),_this11.departments.forEach((function(department){name="desk_".concat(type.name),name+="_".concat(department.name),_this11.addDeskIcon(name.replace(/\s+/g,""),department.color,department.color)}))}))},addSecondaryLabelIcon:function(){var map=this.map,secondaryLabel={width:50,height:10,data:new Uint8Array(2e3),
// get rendering context for the map canvas when layer is added to the map
onAdd:function(){var canvas=document.createElement("canvas");canvas.width=this.width,canvas.height=this.height,this.context=canvas.getContext("2d")},
// called once before every frame where the icon will be used
render:function(){var ctx=this.context;return ctx.beginPath(),ctx.rect(0,0,50,10),ctx.fillStyle="blue",ctx.stroke(),ctx.fill(),!0}};map.addImage("secondaryLabel",secondaryLabel,{pixelRatio:2})},addDeskIcon:function(name,innercolor,outerColor){var map=this.map;name||(name="desk");var size=80,outerRadius=(size-20)/2,radius=size/3*.5,active=size/2-5,activeOuter=size/2-3,desk={width:size,height:size,data:new Uint8Array(size*size*4),
// get rendering context for the map canvas when layer is added to the map
onAdd:function(){var canvas=document.createElement("canvas");canvas.width=this.width,canvas.height=this.height,this.context=canvas.getContext("2d")},
// called once before every frame where the icon will be used
render:function(){var context=this.context;
// draw inner circle
// continuously repaint the map, resulting in the smooth animation of the dot
// map.triggerRepaint();
// return `true` to let the map know that the image was updated
return context.beginPath(),context.arc(this.width/2,this.height/2,active,0,2*Math.PI),context.fillStyle="transparent",context.strokeStyle="transparent",context.lineWidth=5,context.fill(),context.stroke(),
// draw inner circle
context.beginPath(),context.arc(this.width/2,this.height/2,outerRadius,0,2*Math.PI),context.fillStyle=outerColor||"#000",context.strokeStyle="white",context.lineWidth=5,context.fill(),context.stroke(),
// draw inner circle
context.beginPath(),context.arc(this.width/2,this.height/2,radius,0,2*Math.PI),context.fillStyle=innercolor||"#fff",context.fill(),
// update this image's data with data from the canvas
this.data=context.getImageData(0,0,this.width,this.height).data,!0}},deskactive={width:size,height:size,data:new Uint8Array(size*size*4),
// get rendering context for the map canvas when layer is added to the map
onAdd:function(){var canvas=document.createElement("canvas");canvas.width=this.width,canvas.height=this.height,this.context=canvas.getContext("2d")},
// called once before every frame where the icon will be used
render:function(){var context=this.context;
// draw active green circle
// continuously repaint the map, resulting in the smooth animation of the dot
// map.triggerRepaint();
// return `true` to let the map know that the image was updated
return context.beginPath(),context.arc(this.width/2,this.height/2,activeOuter,0,2*Math.PI),context.fillStyle="transparent",context.strokeStyle="#fff",context.lineWidth=10,context.fill(),context.stroke(),
// draw active green circle
context.beginPath(),context.arc(this.width/2,this.height/2,active,0,2*Math.PI),context.fillStyle="transparent",context.strokeStyle="green",context.lineWidth=10,context.fill(),context.stroke(),
// draw outer circle
context.beginPath(),context.arc(this.width/2,this.height/2,outerRadius,0,2*Math.PI),context.fillStyle=outerColor||"#000",context.strokeStyle="white",context.lineWidth=5,context.fill(),context.stroke(),
// draw inner circle
context.beginPath(),context.arc(this.width/2,this.height/2,radius,0,2*Math.PI),context.fillStyle=innercolor||"#fff",context.fill(),
// update this image's data with data from the canvas
this.data=context.getImageData(0,0,this.width,this.height).data,!0}},hoverdesksize=100,hoverOuterRadius=(hoverdesksize-20)/2,hoverRadius=hoverdesksize/3*.5,hoverActive=hoverdesksize/2-5,deskHover={width:hoverdesksize,height:hoverdesksize,data:new Uint8Array(hoverdesksize*hoverdesksize*4),
// get rendering context for the map canvas when layer is added to the map
onAdd:function(){var canvas=document.createElement("canvas");canvas.width=this.width,canvas.height=this.height,this.context=canvas.getContext("2d")},
// called once before every frame where the icon will be used
render:function(){var context=this.context;
// draw inner circle
// continuously repaint the map, resulting in the smooth animation of the dot
// map.triggerRepaint();
// return `true` to let the map know that the image was updated
return context.beginPath(),context.arc(this.width/2,this.height/2,hoverActive,0,2*Math.PI),context.fillStyle="transparent",context.strokeStyle="transparent",context.lineWidth=5,context.fill(),context.stroke(),
// draw inner circle
context.beginPath(),context.arc(this.width/2,this.height/2,hoverOuterRadius,0,2*Math.PI),context.fillStyle=outerColor||"#000",context.strokeStyle="white",context.lineWidth=5,context.fill(),context.stroke(),
// draw inner circle
context.beginPath(),context.arc(this.width/2,this.height/2,hoverRadius,0,2*Math.PI),context.fillStyle=innercolor||"#fff",context.fill(),
// update this image's data with data from the canvas
this.data=context.getImageData(0,0,this.width,this.height).data,!0}};map.addImage("".concat(name,"_active"),deskactive,{pixelRatio:2}),this.imageList.push("".concat(name,"_active")),map.addImage("".concat(name,"_hover"),deskHover,{pixelRatio:2}),this.imageList.push("".concat(name,"_hover")),map.addImage(name,desk,{pixelRatio:2}),this.imageList.push(name)},removeImage:function(){var map=this.map,imageList=this.imageList;imageList.forEach((function(name){map.removeImage(name)}))},mapAddImages:function(){var map=this.map,size=100,self=this;this.markerTypes.forEach((function(type){var pulsingDot={width:size,height:size,data:new Uint8Array(size*size*4),
// get rendering context for the map canvas when layer is added to the map
onAdd:function(){var imageCanvas=document.createElement("canvas");imageCanvas.width=this.width,imageCanvas.height=this.height,this.context=imageCanvas.getContext("2d")},
// called once before every frame where the icon will be used
render:function(){var context=this.context,img=new Image,url="";
// return `true` to let the map know that the image was updated
return type.fileId&&(url=self.getPreviewUrl(type.fileId)),self.isDev&&(url="https://upload.wikimedia.org/wikipedia/commons/7/7c/201408_cat.png"),img.src=url,img.setAttribute("crossOrigin",""),img.onload=function(){
//https://www.nashvail.me/blog/canvas-image refre this link for more details
context.drawImage(this,0,0,this.width,this.height,25,25,50,50)},
// update this image's data with data from the canvas
this.data=context.getImageData(0,0,this.width,this.height).data,!0}};map.addImage(type.name,pulsingDot,{pixelRatio:2})})),this.defaultMarkerTypes.forEach((function(marker){var defaultIcons={width:size,height:size,data:new Uint8Array(size*size*4),
// get rendering context for the map canvas when layer is added to the map
onAdd:function(){var imageCanvas=document.createElement("canvas");imageCanvas.width=this.width,imageCanvas.height=this.height,this.context=imageCanvas.getContext("2d")},
// called once before every frame where the icon will be used
render:function(){var context=this.context,img=new Image,url="";
// return `true` to let the map know that the image was updated
return marker.name&&(url=self.pathIcon(marker.icon)),
// if (self.isDev) {
//   url =
//     'https://upload.wikimedia.org/wikipedia/commons/7/7c/201408_cat.png'
// }
img.src=url,img.setAttribute("crossOrigin",""),img.onload=function(){
//https://www.nashvail.me/blog/canvas-image refre this link for more details
context.drawImage(this,0,0,this.width,this.height,25,25,50,50)},
// update this image's data with data from the canvas
this.data=context.getImageData(0,0,this.width,this.height).data,!0}};if("Locker"===marker.name){var InActiveIcons={width:size,height:size,data:new Uint8Array(size*size*4),
// get rendering context for the map canvas when layer is added to the map
onAdd:function(){var imageCanvas=document.createElement("canvas");imageCanvas.width=this.width,imageCanvas.height=this.height,this.context=imageCanvas.getContext("2d")},
// called once before every frame where the icon will be used
render:function(){var context=this.context,img=new Image,url="";
// return `true` to let the map know that the image was updated
return marker.name&&(url=self.inActivepathIcon(marker.icon)),
// if (self.isDev) {
//   url =
//     'https://upload.wikimedia.org/wikipedia/commons/7/7c/201408_cat.png'
// }
img.src=url,img.setAttribute("crossOrigin",""),img.onload=function(){
//https://www.nashvail.me/blog/canvas-image refre this link for more details
context.drawImage(this,0,0,this.width,this.height,25,25,50,50)},
// update this image's data with data from the canvas
this.data=context.getImageData(0,0,this.width,this.height).data,!0}};map.addImage("".concat(marker.name,"_inactive"),InActiveIcons,{pixelRatio:2})}map.addImage(marker.name,defaultIcons,{pixelRatio:2})}))},pathIcon:function(icon){return __webpack_require__(614607)("./".concat(icon))},inActivepathIcon:function(icon){return __webpack_require__(602127)("./".concat(icon))},getPreviewUrl:function(fileId){return"".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(fileId,"?fetchOriginal=true")},loadFloorplanImage:function(map){var imageUrl="",fileId=this.indoorFloorPlan.fileId;imageUrl=this.isDev?"".concat(window.location.origin,"/statics/floorplan.png"):"".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(fileId,"?fetchOriginal=true");var img=new Image,self=this;img.onload=function(){var w=this.width,h=this.height,cUL=map.unproject([0,0]).toArray(),cUR=map.unproject([w,0]).toArray(),cLR=map.unproject([w,h]).toArray(),cLL=map.unproject([0,h]).toArray(),coordinates=[cUL,cUR,cLR,cLL];if(self.indoorFloorPlan.geometry){var geometry=JSON.parse(self.indoorFloorPlan.geometry);geometry.coordinates&&(coordinates=geometry.coordinates)}else self.indoorFloorPlan.geometry=JSON.stringify({coordinates:coordinates});map.addSource("ImageSource",{type:"image",url:imageUrl,coordinates:coordinates},{pixelRatio:2}),map.addLayer({id:"ImageLayer",source:"ImageSource",type:"raster",paint:{"raster-opacity":.7}});var bd=coordinates.reduce((function(bid,coord){return bid.extend(coord)}),new(mapbox_gl_default().LngLatBounds)(coordinates[0],coordinates[0]));
// need to set the mapbox fitbounds zoom level
// let minZoom = map.getZoom() - 2
// let maxZoom = map.getZoom() + 2
// self.minZoom = minZoom
// self.maxZoom = maxZoom
// map.setMinZoom(minZoom)
// map.setMaxZoom(maxZoom)
self.imageBounds=bd,map.fitBounds(bd,{padding:100}),self.loadObjects(map),self.afterFloorPlanRender&&self.afterFloorPlanRender()},img.src=imageUrl},fitBounds:function(coordinates){var padding=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,bd=coordinates.reduce((function(bid,coord){return bid.extend(coord)}),new(mapbox_gl_default().LngLatBounds)(coordinates[0],coordinates[0]));this.map.fitBounds(bd,{padding:padding})},getDeskMarkerType:function(){return this.markerTypes.find((function(rt){return"desk"===rt.name}))},getIconName:function(desk){var name="desk";if(desk&&desk.employee&&desk.employee.id)if(desk.department&&desk.department.id){var department=this.departments.find((function(rt){return rt.id===desk.department.id}));name+=department?"_".concat(desk.deskTypeVal,"_").concat(department.name):"_".concat(desk.deskTypeVal)}else name+="_".concat(desk.deskTypeVal);var result=name.replace(/\s+/g,"");return result},centerLabel:function(name){if(name){var spliteName=name.split(" ");if(spliteName.length>1)return spliteName[0].charAt(0).toUpperCase()+spliteName[1].charAt(0).toUpperCase();if(1===spliteName.length&&spliteName[0].length>1)return spliteName[0].charAt(0).toUpperCase()+spliteName[0].charAt(1).toUpperCase();spliteName[0].charAt(0).toUpperCase()}return""},deSerializeGeoJson:function(){
// if (this.zones?.features?.length) {
//   this.zones.features.forEach(f => {
//     console.log('--->', f.properties.zoneOpacity)
//   })
// }
},getDeskSecondaryLabel:function(feature){var _feature$desk;return feature.properties.employeeId&&null!==feature&&void 0!==feature&&null!==(_feature$desk=feature.desk)&&void 0!==_feature$desk&&null!==(_feature$desk=_feature$desk.employee)&&void 0!==_feature$desk&&_feature$desk.name?feature.desk.employee.name:""},loadFloorplanTypes:function(){var _this12=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _yield$API$get3,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _this12.floorplantypeSwicthLoading=!0,_context5.next=3,api/* API */.bl.get("v3/floorplan/getFloorplanDetailsByType?floorId=".concat(_this12.floorId));case 3:_yield$API$get3=_context5.sent,data=_yield$API$get3.data,null!==data&&void 0!==data&&data.indoorFloorPlans&&(_this12.floorplanTypes=data.indoorFloorPlans),_this12.floorplantypeSwicthLoading=!1;case 7:case"end":return _context5.stop()}}),_callee5)})))()},setFeatureStateClass:function(feature,name){this.$set(feature.properties,"normalClass",name),this.$set(feature.properties,"markerId",name),this.$set(feature.properties,"activeClass","".concat(name,"_active")),this.$set(feature.properties,"hoverClass","".concat(name,"_hover"))},updateDesk:function(desk){var _this13=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var params,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return params={moduleName:"desks",data:desk,id:desk.id},_context6.next=3,api/* API */.bl.post("v3/modules/data/update",params);case 3:_yield$API$post=_context6.sent,data=_yield$API$post.data,error=_yield$API$post.error,data&&_this13.$message.success("Desk updated"),error&&_this13.$message.error("Failed");case 8:case"end":return _context6.stop()}}),_callee6)})))()},updateMarker:function(marker){var _this14=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var params,_yield$API$post2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return params={moduleName:"floorplanmarker",data:marker,id:marker.id},_context7.next=3,api/* API */.bl.post("v3/modules/data/update",params);case 3:_yield$API$post2=_context7.sent,data=_yield$API$post2.data,error=_yield$API$post2.error,data&&_this14.$message.success("Updated"),error&&_this14.$message.error("Failed");case 8:case"end":return _context7.stop()}}),_callee7)})))()},updateMoveData:function(move){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return params={data:move,moduleName:"moves"},_context8.next=3,api/* API */.bl.post("v3/modules/data/create",params);case 3:case"end":return _context8.stop()}}),_callee8)})))()},getFloorplan:function(){var _this15=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){var params,_yield$API$post3,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return params={moduleName:"indoorfloorplan",id:_this15.floorplanId},_context9.next=3,api/* API */.bl.post("v3/modules/data/summary",params);case 3:if(_yield$API$post3=_context9.sent,data=_yield$API$post3.data,error=_yield$API$post3.error,!error){_context9.next=11;break}throw _this15.$message.error("Failed"),new Error("getFloorplan failed",error);case 11:return _this15.$emit("floorPlanLoaded",data.indoorfloorplan),_context9.abrupt("return",data);case 13:case"end":return _context9.stop()}}),_callee9)})))()},getViewerApi:function(){var _this16=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee10(){var filters,params,_yield$API$post4,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context10){while(1)switch(_context10.prev=_context10.next){case 0:
//  temp method need to change this
return filters={},params={floorplanId:_this16.floorplanId,viewMode:_this16.viewerMode,newBooking:_this16.newBooking},"BOOKING"===_this16.viewerMode&&(_this16.timeRange?(params["endTime"]=_this16.timeRange.endTime||_this16.defaulttimeRange.endTime,params["startTime"]=_this16.timeRange.startTime||_this16.defaulttimeRange.startTime):(params["endTime"]=_this16.defaulttimeRange.endTime,params["startTime"]=_this16.defaulttimeRange.startTime),_this16.amenities&&_this16.amenities.length?_this16.$set(filters,"amenities",_this16.amenities):_this16.$set(filters,"amenities",[]),params["floorplanFilters"]=filters),_context10.next=5,api/* API */.bl.post("v3/floorplan/viewerData",params);case 5:if(_yield$API$post4=_context10.sent,data=_yield$API$post4.data,error=_yield$API$post4.error,!error){_context10.next=13;break}throw _this16.$message.error("Failed"),new Error("floorplan viewer data failed",error);case 13:return _this16.markers=data.marker,_this16.zones=data.spaceZone,_this16.markerMap=_this16.convertToMap(data.marker),_this16.zoneMap=_this16.convertToMap(data.spaceZone),_this16.indoorFloorPlan=data.indoorfloorplan,_this16.floorplanMappedmodules=data.floorplanMappedmodules,_this16.$emit("floorPlanLoaded",data.indoorfloorplan),eventBus/* eventBus */.Y.$emit("VIEWER_API_LOADED",{markers:_this16.markers,zones:_this16.zones}),null!==data&&void 0!==data&&data.facility&&(_this16.facilities=data.facility),null!==data&&void 0!==data&&data.facilitybooking&&(_this16.bookings=data.facilitybooking),_context10.abrupt("return",data);case 24:case"end":return _context10.stop()}}),_callee10)})))()},convertToMap:function(data){var _this17=this,features=data.features,d={};return features&&features.length?(features.forEach((function(f){var _f$properties;null!==f&&void 0!==f&&null!==(_f$properties=f.properties)&&void 0!==_f$properties&&_f$properties.objectId&&_this17.$set(d,f.properties.objectId,f)})),d):{}},convertGeoJson:function(data){return{type:"FeatureCollection",features:data}},fetchSpaces:function(){var _this18=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee11(){var filters,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context11){while(1)switch(_context11.prev=_context11.next){case 0:return filters={floor:{operatorId:36,value:["".concat(_this18.floorId)]}},params={moduleName:"space",filters:JSON.stringify(filters),includeParentFilter:!0,page:1,perPage:100},_context11.next=4,api/* API */.bl.get("v2/module/data/list",params).then((function(_ref3){var data=_ref3.data;data&&(_this18.spaces=data.moduleDatas)}));case 4:return _context11.abrupt("return",_context11.sent);case 5:case"end":return _context11.stop()}}),_callee11)})))()},fetchMarkerTypes:function(){var _this19=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee12(){var params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context12){while(1)switch(_context12.prev=_context12.next){case 0:return params={moduleName:"markertype"},_context12.next=3,api/* API */.bl.get("v3/modules/data/list",params).then((function(_ref4){var data=_ref4.data;data&&(_this19.markerTypes=data.markertype)}));case 3:return _context12.abrupt("return",_context12.sent);case 4:case"end":return _context12.stop()}}),_callee12)})))()},getDepartments:function(){var _this20=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee13(){var params,_yield$API$get4,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context13){while(1)switch(_context13.prev=_context13.next){case 0:return params={moduleName:"department"},_context13.next=3,api/* API */.bl.get("v2/module/data/list",params);case 3:_yield$API$get4=_context13.sent,data=_yield$API$get4.data,_this20.departments=data.moduleDatas;case 6:case"end":return _context13.stop()}}),_callee13)})))()},getSpaceCatgory:function(){var _this21=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee14(){var params,_yield$API$get5,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context14){while(1)switch(_context14.prev=_context14.next){case 0:return params={page:1,perPage:200,includeParentFilter:!0,moduleName:"spacecategory"},_context14.next=3,api/* API */.bl.get("v3/modules/data/list",params);case 3:_yield$API$get5=_context14.sent,data=_yield$API$get5.data,data&&(_this21.spaceCategories=data.spacecategory);case 6:case"end":return _context14.stop()}}),_callee14)})))()},loadFloorplanFields:function(){var _this22=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee15(){var params,_yield$API$get6,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context15){while(1)switch(_context15.prev=_context15.next){case 0:return params={moduleName:"indoorfloorplan"},_context15.next=3,api/* API */.bl.get("v2/modules/fields/fields",params);case 3:_yield$API$get6=_context15.sent,data=_yield$API$get6.data,null!==data&&void 0!==data&&data.fields&&(_this22.indoorFloorplanFields=data.fields);case 6:case"end":return _context15.stop()}}),_callee15)})))()}}},mixins_ViewerActionsvue_type_script_lang_js=ViewerActionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_ViewerActionsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewerActions=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
},
/***/557657:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PermitChecklistMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var render,staticRenderFns,objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(990260)),api=__webpack_require__(32284),PermitChecklistMixinvue_type_script_lang_js={data:function(){return{checklistTypeTab:"pre",tabModes:[{displayName:this.$t("home.workpermit.pre_checklist"),name:"pre",list:"preChecklist",value:1},{displayName:this.$t("home.workpermit.post_checklist"),name:"post",list:"postChecklist",value:2}],isLoading:!1,workPermitFieldId:null}},computed:{workPermitTypeId:function(){return this.$getProperty(this.model,"workPermitType.id")}},watch:{workPermitTypeId:{handler:function(){var deleteIds=this.$getProperty(this,"model.checklist.permitChecklistIds");(0,validation/* isEmpty */.xb)(deleteIds)||(this.$setProperty(this,"model.checklist.deleteIds",deleteIds),delete this.model.checklist.permitChecklistIds),(0,validation/* isEmpty */.xb)(this.workPermitTypeId)?this.formatCategoryData([]):this.loadChecklist(!0)},immediate:!0}},methods:{getCategoriesForForm:function(mode){return this.$getProperty(this.model,"checklist.".concat(mode.name),[]).filter((function(category){return!(0,validation/* isEmpty */.xb)(category.checklist)}))||[]},loadChecklist:function(force){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filters,params,_yield$API$fetchAll,list,error,_error$message,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return filters={workPermitType:{operatorId:36,value:[String(_this.workPermitTypeId)]}},params={viewName:"all",filters:JSON.stringify(filters)},_this.isLoading=!0,_context.next=5,api/* API */.bl.fetchAll("workpermittypechecklistcategory",params,{force:force});case 5:_yield$API$fetchAll=_context.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error?(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Category list":_error$message,_this.$message.error(message)):_this.formatCategoryData(list),_this.isLoading=!1;case 10:case"end":return _context.stop()}}),_callee)})))()},formatPermitChecklistData:function(){var _this2=this,list=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],preCategories=[],postCategories=[],permitChecklistIds=[];return list.forEach((function(permitChecklist){var checklist=_this2.$getProperty(permitChecklist,"checklist",{}),checklistCategory=_this2.$getProperty(checklist,"category",{});if((0,validation/* isEmpty */.xb)(permitChecklist.id)||permitChecklistIds.push(permitChecklist.id),1!==checklist.validationType||(0,validation/* isEmpty */.xb)(checklistCategory)){if(2===checklist.validationType&&!(0,validation/* isEmpty */.xb)(checklistCategory)){var _category=postCategories.find((function(c){return c.id===checklistCategory.id}));!(0,validation/* isEmpty */.xb)(_category)&&(0,validation/* isObject */.Kn)(_category)?_category.checklist.push(permitChecklist):postCategories.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},checklistCategory),{},{checklist:[permitChecklist]}))}}else{var category=preCategories.find((function(c){return c.id===checklistCategory.id}));!(0,validation/* isEmpty */.xb)(category)&&(0,validation/* isObject */.Kn)(category)?category.checklist.push(permitChecklist):preCategories.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},checklistCategory),{},{checklist:[permitChecklist]}))}})),{pre:preCategories,post:postCategories,permitChecklistIds:permitChecklistIds}},getChecklistforValidation:function(){var _this3=this,list=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],validationType=arguments.length>1?arguments[1]:void 0,categories=[];return list.forEach((function(permitChecklist){var checklist=_this3.$getProperty(permitChecklist,"checklist",{}),checklistCategory=_this3.$getProperty(checklist,"category",{});if(checklist.validationType===validationType&&!(0,validation/* isEmpty */.xb)(checklistCategory)&&1===permitChecklist.required){_this3.$set(permitChecklist,"isReviewed",!(0,validation/* isBoolean */.jn)(permitChecklist.isReviewed)||!0);var category=categories.find((function(c){return c.id===checklistCategory.id}));!(0,validation/* isEmpty */.xb)(category)&&(0,validation/* isObject */.Kn)(category)?category.checklist.push(permitChecklist):categories.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},checklistCategory),{},{checklist:[permitChecklist]}))}})),categories||[]},formatCategoryData:function(){var _this4=this,list=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],pre=[],post=[];list.forEach((function(category){var categoryChecklist=_this4.$getProperty(category,"checklist",[]),workPermitChecklist=[];(0,validation/* isArray */.kJ)(categoryChecklist)&&!(0,validation/* isEmpty */.xb)(categoryChecklist)&&(categoryChecklist.forEach((function(checklist){workPermitChecklist.push({checklist:checklist,remarks:null,required:1})})),_this4.$set(category,"checklist",workPermitChecklist)),1===category.validationType?pre.push(category):2===category.validationType&&post.push(category)})),this.$getProperty(this,"model.checklist")&&(this.$set(this.model.checklist,"pre",pre),this.$set(this.model.checklist,"post",post))},loadWorkPermitChecklistModuleMeta:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data,error,message,fields,workpermitField;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/v2/modules/meta/workpermitchecklist");case 2:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(message=error.message,_this5.$messsage.error(message||"Error Occured while fetching Work permit checklist module meta")):(fields=_this5.$getProperty(data,"meta.fields",[]),workpermitField=fields.find((function(field){return"workPermit"===field.name})),(0,validation/* isEmpty */.xb)(workpermitField)||(_this5.workPermitFieldId=workpermitField.id,(0,validation/* isEmpty */.xb)(_this5.model)||_this5.$setProperty(_this5,"model.checklist.fieldId",_this5.workPermitFieldId)));case 6:case"end":return _context2.stop()}}),_callee2)})))()}}},v3_PermitChecklistMixinvue_type_script_lang_js=PermitChecklistMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v3_PermitChecklistMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PermitChecklistMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
},
/***/511423:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"b924ed3856bb4e9406aa8f8b4a5913cd.svg";
/***/},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/583972:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3aed7174c314bbc14fee9c5cd51e20fa.svg";
/***/},
/***/620955:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3feba09e23b73ae14f127291e5aab046.svg";
/***/},
/***/271791:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"8f181d382ffbfa8849763c3ada75c3c6.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/},
/***/108277:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"fdf30d3630145654a9db58f2d68b8d49.svg";
/***/},
/***/914368:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"98cdff1d737afaab585f391f53d26fdf.svg";
/***/},
/***/581121:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"88cd7135ef1417b08c9498c51d2cda59.svg";
/***/},
/***/446858:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"7dfd1bbfbc44bf11b4004bec01065e4f.svg";
/***/},
/***/602127:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./Locker.png":355356,"./Locker.svg":446858};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=602127},
/***/614607:
/***/function(module,__unused_webpack_exports,__webpack_require__){var map={"./CCTV.png":406284,"./Camera.png":571375,"./Elevator.png":936945,"./Escalator.png":496058,"./FemaleRestroom.png":124726,"./FireExtingus.png":561743,"./Handicap.png":610849,"./Kitchen1.png":105324,"./Kitchen2.png":191177,"./Limited.png":74022,"./Locker.png":941424,"./MaleRestroom.png":666994,"./Parking.png":433631,"./Restroom.png":170999,"./inactive/Locker.png":355356,"./inactive/Locker.svg":446858};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=614607},
/***/406284:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/571375:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/936945:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/496058:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/124726:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/561743:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/610849:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/105324:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/191177:
/***/function(module){"use strict";module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAA4ZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAKgAgAEAAAAAQAAAGSgAwAEAAAAAQAAAGQAAAAADHP8ewAABv1JREFUeAHtnFtsVEUYx785ban2gkBtMa02GtMLAV9AQsALMWmM8aFt9MFEib6YEHwwfcAoIpFY0GBIqMSQNPqiQQ0RE1oT5dFGFANtjFHslhajFapt2UIv9Mr2ON+BqdO9dLvdOZ1vd79JtmfO7OzMN//fmdvX3REQJWxqdnN6p7rq3BDUg4CHBbhlrgsFUbJy0qIVEKNSyz5woV1kwany3KqWjp1iJvzjIjxhbVOgdhbcwxJARfh7fG9OASGg2wGxu7+hulUv1VE3ruuK4g863w25bgvDUKr4d0WNUWvUHLVXNWWrSMnRwEF3Fvaoe74ujwKoudQeK3sT/3hkcJhCWpjAwY4CWULU4fAlvAl8InCBhyk7IFStOKeU31m93vFWUzyBK12sXbFDIAvHW9paM4Mr1hVAFo7cY2zWEzluTwFkIZfCUGrPBK55ngKShSPHLt6Bz1PF3g2ymNsY2jODa9YVYCC6GgTiDIQABN0EBqKrQSDOQAhA0E1gILoaBOIMhAAE3QQGoqtBIM5ACEDQTWAguhoE4gyEAATdBAaiq0EgzkAIQNBNYCC6GgTiDIQABN2Eua8B6Ymm4jvW3wUvbFgF1UW5ULAitdmPTYcgEJyGz367DscvDJuSKKIccfeRTjciNcmEkrwsOPZUKWwvz0+yJJofb+u9Aa+c7oOB8ZBxA315bNMZBhLABw3b6EcwDgSHqXTtGToAbCO21XQwD0TOGZkScH40HYwDqZITeKYEXKyYDsZXWbFWU8VN3heKTdsft7zBhuq4eZaaIVZbl1oefs54D0nGGP4sAyH3DBgfssi1cBEGxRpO/RzuYpnFQ1YsZSylMxBLwseqlsSQhauVlx5aBY/flweVa3KhSLpe+kZvwtkr4/CF9Bud+2cilv1pl24dyK6Na+C1LUVQmJs1T9wHV68AfO2Qm6/W7hHY//0g/D3y/6+Is2Xf3vdIMXzYMQSDPviU5hmzjDfWgOTnCPj46TKoeSD+l+9rK1bCkzLfkXNB+PTX61BWmAON20tga1ke1NxfAPVf9aYNFGtADj1xz6JgqIfzDtkl9mwr9l4qDa+Vcrd86tnypKDYWE3pbdDj1ib1xh8GoefatG7LkuMKSrGce1I9WAPSf+Mm1H/5F/QMTRnREKG8sbXYSFk2C7EGBBvdLyfj+pO90H0bCq6qaj7/E9Y1d8NB2YMmbs4uWptvL43C3u/6F52fakarQFAUBeVYRxCekZPzLwOTcHUiBE3ng7Dtkz+g5eLIgtoNT4Y8EC9+fQUmQ8b/+blg3X68aW1S1xuD/wp9Wy5rw8NluRd5+Zs+aP75Gjwv/xmEq6rSwmwIyvxdsle19Y57q64bM4vvSeF1ULsnASSeKOflxhBffoVp2bMOnR2EE523euNz61Z681FO1tyZMH5VHVFuSgCJsNpwAsI42j40V6qK73u0ZC5tuSLW55DlauhC9aieoeeJlqa/71ecgfil7BLLZSBSOJwzwkO0tPA8ftzzHCJVff32hlINU2pS90PweGWSAGLb/b5CrqZwArcxiYcDsg4kOfd7iXS/B9PG04twrAFJxv1+78ocOCDd71tK0f2en5SnN/wJtX1vDQgl97ttCHr91lZZB6Tz8BK733UWXtwakH/R/S49vSahsPs9gm9iCeFQfry8dPf7ael+f6ttae539GU1nhmADR/1eC+Mz1jyHFubQxQ6BWXXxtXwzplBUDqg+/1kYBj2P1YCdZWRGzf1+ZGpELz/01XPI6zSEr1S8mVZB4LiIZRE3e8Xlftd/sRsbDo59/uJ3yN/ooabRBv7EhJA4j3RfrvfQZ5iTCVYm9SpCIB2RPNbRUtbDptToof4LQT7svxWOMHyKfmyeMhKEJ7f2RmI3wonWL7xOQSXoNF+e0fp65oJahQzO57uYDoY7yFdQTPfRDTdUD/Kw6M2TAfjQI7LjVqmBDz3xHQwD0T+wAbPAkn3gG304xAa40AQBB7Mks5Q1OEzfjx0vpwGpAzFs0DwF1B4ukO0iV7lS4UrLlYCcn5MyeOZUkFgqjb6MmRRbWwq2MVAiFFiIAyEmALEzOEewkCIKUDMHO4hDISYAsTM4R7CQIgpQMwc7iEMhJgCxMzhHsJAiClAzBzuIdSAyK+1jhGzKYPNEaMOuNCXwQrQarqAPscFcZ6WVRlsjQvtjsiCUxksAammIwunPLeqRc4j3aQsy0BjkAGycDp2ihkHxO4M1IBUk5HBLRbSrP6G6lbhwHukLMwgY1B7ZIBNntuHDLxavZehLP9TgJqj9qrmiB/XrW0K1M6Ce9h1oUJl4qt5BXDOwGFK9QxVQwQQfGNTs5vTO9VV58pTXAW4m0FAqQQU/0xwVSpfIxTwNuByz4fbDFxN4QSOc0Z4xv8AXXhfdfzt1q8AAAAASUVORK5CYII="},
/***/74022:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/941424:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/666994:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/433631:
/***/function(module){"use strict";module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAA4ZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAKgAgAEAAAAAQAAAGSgAwAEAAAAAQAAAGQAAAAADHP8ewAABg5JREFUeAHtnV1oHFUUx8+dtMm2m3VrvkmbKlpTjIFtQSxtsZi+qCVgUIpitSAUXyoI4seLUEIffSgUVCwFISA+iBpKaBAkFqGVSoqN1UqkDUWTNNmaj3WTZpNsdrxn4uyMae5+4O7cszvnQpi7596dc+b/2/sxd2YyAhSpsWcimJqOdQKkukwQETChGcAMK6qzOaMCIgYCxgWYQwBGr1ET7ps82jS/3lfEWuNT35kbrg/9/rppmidMMBvWlvPn/6+AABEVQnS3RVrPXOgQSfce/wNk29k/axLx+S9kSzjorsT5YikgBgKh4OHRYy3Ttoc0EAvG3PwlMM2ddiFvPVBAiOFAdXCfDcVAl9hNWS2DYXhAYI0LqTlqjwywxAKCYwZ3U2uE8vSjeXCVAYCwZlNTsyM8gHtK4B5nONAbtVseMnBqyzDu0cdzAzJAFrLLSnV57p0dKhRIdRnWSZ+imM3eKoAsjNUzcG8dszeFAnI1RHZZvByikEeD2Qxb014NntmlQgEGohBGl5mB6FJe4ZeBKITRZWYgupRX+GUgCmF0mRmILuUVfhmIQhhdZgaiS3mFXwaiEEaXmYHoUl7hl4EohNFlZiC6lFf4tS6sK8qKbg5uFHDreOFuckmmTIjOJ2FC/o3Hk3Bx9C70j8RhTOZLJYm6U7+ZuoItNBDVcQxFE/DRlSn4ajiuqkLG7osuK9IQgE+e3Qrfvvwg7N+2mYz46wXiCyD2gSOYr19ogXf21NomcltfAUH15T218O7eejh7qBkCFekbN8mA8R0QW/nnWu+Dj5+RN/QTS74Fghw6HwnBe3vrSCHxNRAk8faeOuh4IEgGiu+BIInuJxvk8zQ0EgORHB6tq4IX22g8HMZA/m0Ybz5eQ6KJaF06yVeB/T0jEF9KZfza1tAG2NWwCV6Sv/hIYyBjXXfhjpoq2HF/JdyYWXKbPc+XFJDbc8msQLDO4O0EfPrzDLz1RK11zpGrqocerobTg+mny3L9WkHrlW2XtSJX6D64PAWf/TKbs2AHtuufbZUtEJvC+99H4e/FFftjxm1ztf4Oo+yBzMkx56fJREYQdmFTkIHYWhR1++udxZz2H6qqgCrN61tl30KQBM68cklLcuBZxMFHY/IFkN05Tn8n5ZVG3ansgRx5LAzbw5U56Twhp8y6U1kDaa+vgpMHcv93LVejC7p5QG6dq/Yw8wugfnMFvNK+xVrJrcxjkO6/OZefoyLULikgXz7fAtnGXDyXaA5tzFuq2cQKXJJ3qehOJQVkd9Omoun1+fVYVthFc+7acVmPIa7jzJjFM/lTP/6VsY5XhQxEKn16cApmEplXkRmIRwr8MHYXPryid4XXfai+biF/xJbgtb4xSNJoHBYX3wLB+3+PnBuFqYXcVoLdv+Ji5ktqllUoIa5OLsCr58asm7ILtc9C7cdXQPDu+J5rs3BCXiNJZDuhKZTCee7HN0DO34jDyYt3tF8zz8anbIGkTBMujy8ALof034zDrdhyNi1IlJcUkDe+GYeFpPp6xbLrgR18cGeZ0OwpV9olBeS8/LVnuw0o1wOnWs+3014GQlUBYnFxC2EgxBQgFg63EAZCTAFi4XALYSDEFCAWDrcQBkJMAWLhcAthIMQUIBYOtxAGQkwBYuFwCyEGROs/MCOmBYlwuIWQwOAEwUAcLUjkGAgJDE4QDMTRgkSOgZDA4ATBQBwtSOQYCAkMThAMxNGCRI6BkMDgBMFAHC1I5BgICQxOEAzE0YJEjoGQwOAEIYGImPORc3oVEDFD/gfhcb1BsPe0ApKFIcAcShs4o1UBZCG7LKNXaxTs3KWA0WsYNeE+ASLqsnJWgwLIAFkYk0eb5uVLTro1xMAuXQogA2RhTXvbIq1n5GxrwFXOWU8VEAOrDOQAgn4vdIhkIBQ8LN8HNOxpHOwM38E0jNojA5TDAoKZ0WMt04Hq4D5uKaiGV0kMoOaove0xDQQNWNC+a+fThjCO80BvS1T4rTWAS41RazcM9KR8sUxjz0QwNR3rBEh1mSAiYIJ8g5ZJ460nhdeoyHuUqyHypG/1nE9ObeVsCgfw9Zz+A0KdhjbZ03GeAAAAAElFTkSuQmCC"},
/***/170999:
/***/function(module){"use strict";module.exports="data:image/png;base64,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"},
/***/355356:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/Locker.b495afa8.png"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/97770.js.map