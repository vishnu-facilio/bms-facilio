(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[97538],{
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/978131:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilderFluid}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilderFluid.vue?vue&type=template&id=f19a6966
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{key:_vm.id,staticClass:"f-page"},[_vm.isLoading?_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.page?_c("div",{staticClass:"width100"},[_c("el-tabs",{staticClass:"fpage-tabs",class:[_vm.hideTab?"hide-tab":"",_vm.hideScroll?"disable-scroll":""],on:{"tab-click":_vm.updateTabQuery},model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_vm._l(_vm.page.tabs,(function(tab,index){return[_vm.getTabDetails(tab).isHidden?_vm._e():_c("el-tab-pane",{key:tab.key,attrs:{label:_vm.getTabDetails(tab).displayName||tab.name,name:tab.name,lazy:""}},[_c("portal-target",{staticStyle:{position:"sticky",top:"0","z-index":"1"},attrs:{name:"pagebuilder-sticky-top"}}),_c("div",{staticClass:"height100 fpage-tab-content tab-content-pb"},[_vm.getTabDetails(tab).isCustomTab?_c("div",{key:tab.key+"c"+index,staticClass:"f-page-section mT20 mB20 mL20 mR20"},[_c("div",[_c("portal-target",{attrs:{name:tab.name+"-title-section"}})],1),_c("widget-tab",_vm._b({attrs:{tab:tab,isInPageBuilder:!0,moduleName:_vm.module,details:_vm.record,primaryFields:_vm.primaryFields,size:_vm.containerSize}},"widget-tab",_vm.$attrs,!1))],1):_vm._l(tab.sections,(function(section){return _c("div",{key:_vm.id+"-section-"+section.key+"-container",staticClass:"f-page-section"},[_vm.$validation.isEmpty(section.name)?_vm._e():_c("div",{staticClass:"section-header d-flex display-flex-between-space"},[_c("div",{staticClass:"section-header-name"},[_vm._v(" "+_vm._s(_vm.getSectionName(section.name))+" ")]),_c("div",[_c("portal-target",{attrs:{name:section.key+"-title-section"}})],1)]),section.widgets?_c("div",{key:"section-"+section.key+"-layout",ref:section.key,refInFor:!0,attrs:{margin:_vm.margins}},_vm._l(section.widgets,(function(item){return _c("div",{key:_vm.id+"-section-"+section.key+"-item-"+item.key,ref:item.key,refInFor:!0,staticClass:"f-page-grid-item"},[_c("widget-group",_vm._b({key:_vm.id+"-section-"+section.key+"-item-"+item.key+"-group",class:["page-widget-container",_vm.isSidebarView&&"in-sidebar",_vm.skipMargins&&"no-margin"],attrs:{widget:item,moduleName:_vm.module,details:_vm.record,notesModuleName:_vm.notesModuleName,attachmentsModuleName:_vm.attachmentsModuleName,primaryFields:_vm.primaryFields,resizeWidget:function(params){return _vm.resizeGridItem()},calculateDimensions:function(params){return _vm.calculateRequiredDimensions()},sectionKey:section.key,isSidebarView:_vm.isSidebarView}},"widget-group",_vm.$attrs,!1))],1)})),0):_vm._e()])}))],2)],1)]}))],2)],1):_vm._e()])},staticRenderFns=[],PageBuilderDep=__webpack_require__(223803),PageBuilderFluidvue_type_script_lang_js={extends:PageBuilderDep["default"],methods:{resizeGridItem:function(){},calculateRequiredDimensions:function(){},onLayoutUpdate:function(){}}},page_PageBuilderFluidvue_type_script_lang_js=PageBuilderFluidvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuilderFluidvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilderFluid=component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"Â  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports},
/***/697538:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AnnouncementSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/community/announcements/AnnouncementSummary.vue?vue&type=template&id=22ebd03a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:!0,fullscreen:!0,"custom-class":"fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog f-page-dialog-right","before-close":_vm.goToList}},[_vm.loading?_c("div",{staticClass:"height100 flex-middle"},[_c("spinner",{attrs:{show:!0,size:"80"}})],1):_c("div",{staticClass:"container pB50"},[_vm.$validation.isEmpty(_vm.imageAttachments)?_vm._e():[_c("el-carousel",{staticClass:"f-page-dialog-carousel",attrs:{trigger:"click",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.imageAttachments,(function(image){return _c("el-carousel-item",{key:image.id},[_c("el-image",{key:_vm.record.id+image.id,staticClass:"width100 height100",attrs:{src:image?_vm.$prependBaseUrl(image.previewUrl):"",fit:"cover"}},[_c("div",{attrs:{slot:"error"},slot:"error"},[_c("div",[_c("InlineSvg",{attrs:{src:"svgs/photo",iconClass:"icon fill-grey icon-xxlll op5"}})],1)])])],1)})),1)],_c("div",{staticClass:"header-section border-bottom1px"},[_c("div",{staticClass:"d-flex flex-col"},[_c("div",{staticClass:"record-id bold"},[_vm._v("#"+_vm._s(_vm.record.id))]),_c("div",{staticClass:"record-name"},[_vm._v(" "+_vm._s(_vm.record.title)+" "),_vm.moduleState?_c("div",{staticClass:"fc-badge text-uppercase inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.moduleState)+" ")]):_vm._e()])]),_c("div",{staticClass:"header-actions d-flex flex-row align-center"},[_c("CustomButton",{staticClass:"pR10",attrs:{record:_vm.record,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.loadData(!0)},onError:function(){}}}),_vm.isStateFlowEnabled?[_c("TransitionButtons",{key:_vm.record.id,staticClass:"mR10",attrs:{moduleName:_vm.moduleName,record:_vm.record,buttonClass:"asset-el-btn"},on:{currentState:function(){},transitionSuccess:function($event){return _vm.loadData(!0)},transitionFailure:function(){}}})]:_vm._e(),_vm.isApprovalEnabled?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.record.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.record,hideApprovers:_vm.shouldHideApprovers},on:{onSuccess:function($event){return _vm.loadData(!0)},onFailure:function(){}}})],1):_vm._e(),_vm.record.isPublished&&"announcement"===_vm.moduleName?[_c("div",{staticClass:"viewers-count"},[_c("div",{staticClass:"flex-center-row-space width-auto pointer mL10",staticStyle:{"min-width":"40px"},on:{click:function($event){return _vm.showMoreDialog(!1)}}},[_c("img",{staticClass:"mR5",staticStyle:{width:"20px",height:"20px"},attrs:{src:__webpack_require__(203435)}}),_c("span",{staticClass:"fw6"},[_vm._v(" "+_vm._s(_vm.allCount)+" ")])]),_c("div",{staticClass:"flex-center-row-space width-auto pointer mR10 mL10",staticStyle:{"min-width":"40px"},on:{click:function($event){return _vm.showMoreDialog(!0)}}},[_c("img",{staticClass:"mR5",staticStyle:{width:"20px",height:"20px"},attrs:{src:__webpack_require__(385793)}}),_c("span",{staticClass:"fw6"},[_vm._v(" "+_vm._s(_vm.readCount)+" ")])])]),_c("div",{staticClass:"count-refresh",on:{click:function($event){return _vm.getPeopleAnnouncement()}}},[_vm.countLoading?_c("spinner",{attrs:{show:!0,size:"20"}}):_c("img",{staticClass:"mR5",staticStyle:{width:"20px",height:"20px"},attrs:{src:__webpack_require__(93817)}})],1)]:_vm._e(),_vm.canShowActionButtons?_c("el-dropdown",{staticClass:"dialog-dropdown",on:{command:_vm.dropdownActionHandler}},[_c("span",{staticClass:"el-dropdown-link"},[_c("InlineSvg",{attrs:{src:"menu",iconClass:"icon icon-md"}})],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.hasUpdatePermission?[_vm.record.isPublished||_vm.isApprovalEnabled?_vm._e():_c("el-dropdown-item",{attrs:{command:"publish"}},[_vm._v(" Publish ")]),_vm.record.isPublished&&!_vm.record.isCancelled?_c("el-dropdown-item",{attrs:{command:"cancel"}},[_vm._v(" Cancel ")]):_vm._e(),_vm.record.isPublished?_vm._e():_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(" Edit ")]),_c("el-dropdown-item",{attrs:{command:"clone"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.clone"))+" ")])]:_vm._e(),_vm.hasDeletePermission?_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(" Delete ")]):_vm._e()],2)],1):_vm._e()],2)]),_vm.record.isPublished||_vm.isApprovalEnabled?_vm._e():_c("div",{staticClass:"publish-bar"},[_c("span",[_vm._v(" This announcement has not been published yet. ")]),_c("AsynButton",{attrs:{size:"mini",clickAction:_vm.publishAnnouncement,buttonClass:"publish-btn"}},[_vm._v(" Publish ")])],1),_vm.record&&_vm.record.id?_c("page",{key:_vm.record.id,attrs:{module:_vm.moduleName,id:_vm.record.id,details:_vm.record,primaryFields:_vm.primaryFields,notesModuleName:_vm.notesModuleName,attachmentsModuleName:_vm.attachmentsModuleName,isSidebarView:!0,skipMargins:!0,hideScroll:!0,isV3Api:!0}}):_vm._e(),_vm.showMore?_c("PeopleList",{key:_vm.record.name,attrs:{details:_vm.record,sharingModuleName:_vm.sharingModuleName,showDialog:_vm.showMore,isRead:_vm.isRead}}):_vm._e()],2)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(212826),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(947522),__webpack_require__(32284)),vuex_esm=__webpack_require__(420629),PageBuilderFluid=__webpack_require__(978131),validation=__webpack_require__(990260),TransitionButtons=__webpack_require__(987612),CustomButtonUtil=__webpack_require__(746095),AsyncButton=__webpack_require__(303514),router=__webpack_require__(329435),eventBus=__webpack_require__(398011),ApprovalBar=__webpack_require__(42525),CustomButton=__webpack_require__(623857),PeopleListvue_type_template_id_72f07eec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-containers f-lookup-wizard scale-up-center fc-wizard-table-width100",attrs:{visible:_vm.showDialogBox,width:"90%","append-to-body":!0,"show-close":!1,"before-close":_vm.handleClose},on:{"update:visible":function($event){_vm.showDialogBox=$event}}},[_c("template",{staticClass:"height70",slot:"title"},[_c("div",{staticClass:"header d-flex justify-between width100"},[_c("div",{staticClass:"el-dialog__title self-center f14"},[_vm._v(" "+_vm._s(_vm.isRead?"Viewers List":"Recipient List")+" ")]),_c("div",[_c("div",{staticClass:"mT10"},[_c("span",{staticClass:"close-btn self-center cursor-pointer",on:{click:_vm.handleClose}},[_c("i",{staticClass:"el-dialog__close el-icon el-icon-close"})])])])])]),_c("div",{staticClass:"horizontal-line"}),_c("div",{staticClass:"header d-flex justify-between width100"},[_c("div",{staticClass:"pull-right table-btn display-flex-between-space mT5",staticStyle:{"z-index":"10"}},[_vm.showSearchComponent?_c("SearchComponent",{key:_vm.moduleName+"-search",staticClass:"self-center mL-auto lookup-wizard-search mR10 mT10",attrs:{moduleName:_vm.moduleName,searchMetaInfo:_vm.moduleMetaInfo,hideOperatorDialog:!0,singleFieldSearch:!0,clearFilters:_vm.clearAllFilters},on:{onChange:_vm.applyFilter,clearedFilters:function($event){_vm.clearAllFilters=!0}}}):_vm._e(),_vm.$validation.isEmpty(_vm.filterObjectsData)?_vm._e():_c("el-tooltip",{attrs:{effect:"dark",content:"Clear Filters",placement:"right"}},[_c("span",{staticClass:"self-center",on:{click:function($event){return _vm.clearFilter()}}},[_c("img",{staticStyle:{position:"relative",top:"8px",left:"10px"},attrs:{src:__webpack_require__(644634),width:"20px",height:"20px"}})])]),_vm.showSearchComponent?_c("span",{staticClass:"separator self-center mT5"},[_vm._v("|")]):_vm._e(),_c("pagination",{staticClass:"self-center mT5",attrs:{currentPage:_vm.page,total:_vm.listCount,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_c("el-tabs",{staticClass:"width100 people-tabs-container pL20 pR20 mT10",on:{"tab-click":function($event){return _vm.handleClick()}},model:{value:_vm.moduleName,callback:function($$v){_vm.moduleName=$$v},expression:"moduleName"}},_vm._l(_vm.modulesList,(function(moduleObj,index){return _c("el-tab-pane",{key:"tab"+index,attrs:{name:moduleObj.modulename}},[_c("span",{attrs:{slot:"label"},slot:"label"},[_vm._v(_vm._s(moduleObj.displayName))]),_vm.isLoading?_c("div",{staticClass:"mT40"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_vm.$validation.isEmpty(_vm.items)?[_c("div",{staticClass:"width100 fc-empty-center mB100"},[_c("img",{staticClass:"mT100",attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10"},[_vm._v(_vm._s("No "+moduleObj.displayName))])])]:_c("el-table",{staticClass:"fc-table-widget-scroll",staticStyle:{width:"100%",height:"80%"},attrs:{data:_vm.items,fit:!0,height:"500"}},[_c("el-table-column",{attrs:{label:"ID",width:"70"},scopedSlots:_vm._u([{key:"default",fn:function(item){return[_c("div",{staticClass:"fc-id mL20"},[_vm._v("#"+_vm._s(item.row.id))])]}}],null,!0)}),_vm._l(_vm.getModuleFieldsList,(function(field,index_field){return _c("el-table-column",{key:"data"+index_field,attrs:{label:field.displayName,width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(item){return[field.type&&"lookup"===field.type?_c("div",{staticClass:"mL20"},[_vm._v(" "+_vm._s(item.row[field.fieldname].name||"---")+" ")]):_c("div",{staticClass:"mL20"},[_vm._v(" "+_vm._s(item.row[field.fieldname]||"---")+" ")])]}}],null,!0)})}))],2)],2)})),1)],1)],2)},PeopleListvue_type_template_id_72f07eec_staticRenderFns=[],WidgetPagination=(__webpack_require__(634338),__webpack_require__(806339)),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),WizardSearch=__webpack_require__(57791),WizardQuickFilterAndSearchMixin=__webpack_require__(854711),SearchTagMixin=__webpack_require__(200689),Spinner=__webpack_require__(604947),PeopleListvue_type_script_lang_js={mixins:[WizardQuickFilterAndSearchMixin/* default */.Z,SearchTagMixin/* default */.Z],props:["details","sharingModuleName","showDialog","isRead"],components:{Pagination:WidgetPagination/* default */.Z,SearchComponent:WizardSearch/* default */.Z,Spinner:Spinner/* default */.Z},data:function(){return{items:[],page:1,perPage:20,showDialogBox:!1,moduleName:"employee",listCount:null,listFilters:null,isLoading:!0,modulesList:[{displayName:"Employee",modulename:"employee"},{displayName:"Vendor Contact",modulename:"vendorcontact"},{displayName:"Tenant Contact",modulename:"tenantcontact"}],commonFields:[{displayName:"Name",fieldname:"name"},{displayName:"Email ID",fieldname:"email"}],moduleFieldsList:{tenantcontact:[{displayName:"Tenant",fieldname:"tenant",type:"lookup"},{displayName:"Tenant Unit",fieldname:"tenantunit"},{displayName:"Building",fieldname:"building"},{displayName:"Site",fieldname:"site"}],vendorcontact:[{displayName:"Vendor",fieldname:"vendor",type:"lookup"}],employee:[]},showSearchComponent:!1}},created:function(){this.initial(),this.showDialogBox=this.showDialog},watch:{page:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.setItemsList()}},computed:(0,objectSpread2/* default */.Z)({getModuleFieldsList:function(){var moduleName=this.moduleName,moduleFieldsList=this.moduleFieldsList,commonFields=this.commonFields;return commonFields.concat(moduleFieldsList[moduleName])||[]}},(0,vuex_esm/* mapGetters */.Se)({getFilterConfig:"search/getFilterConfig"})),methods:{clearFilter:function(){this.clearAllFilters=!0,this.filterObjectsData=null,this.listFilters=null,this.page=0,this.setItemsList()},applyFilter:function(filterData){(0,validation/* isEmpty */.xb)(filterData)?filterData=this.filterObjectsData:this.filterObjectsData=filterData,this.page=0;var filters=this.formatDataForFilter(filterData);this.listFilters=filters,this.setItemsList(),this.showFilterCondition=!1},initial:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.fetchModuleMetaInfo();case 2:return _context.next=4,_this.setItemsList();case 4:case"end":return _context.stop()}}),_callee)})))()},setItemsList:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var details,listFilters,isRead,params,moduleName,_yield$API$fetchAll,list,meta,_ref,pagination,_ref2,totalCount;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.isLoading=!0,details=_this2.details,listFilters=_this2.listFilters,isRead=_this2.isRead,params={viewName:"hidden-all",page:_this2.page,perPage:_this2.perPage,withCount:!0,fetchAnnouncementPeople:!0,announcementId:details.id},(0,validation/* isEmpty */.xb)(isRead)||(params.isRead=isRead),(0,validation/* isEmpty */.xb)(listFilters)||(params.filters=JSON.stringify(listFilters)),_this2.loading=!0,moduleName=_this2.moduleName,_context2.next=9,api/* API */.bl.fetchAll(moduleName,params);case 9:_yield$API$fetchAll=_context2.sent,list=_yield$API$fetchAll.list,meta=_yield$API$fetchAll.meta,_this2.items=list,_ref=meta||{},pagination=_ref.pagination,_ref2=pagination||{},totalCount=_ref2.totalCount,_this2.listCount=totalCount,_this2.showSearchComponent=totalCount>0,_this2.isLoading=!1;case 18:case"end":return _context2.stop()}}),_callee2)})))()},handleClick:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.page=1,_this3.showSearchComponent=!1,_this3.isLoading=!0,_context3.next=5,_this3.fetchModuleMetaInfo();case 5:return _context3.next=7,_this3.setItemsList();case 7:case"end":return _context3.stop()}}),_callee3)})))()},handleClose:function(){this.showDialogBox=!1,eventBus/* eventBus */.Y.$emit("listDialogClose")},fetchModuleMetaInfo:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(moduleName=_this4.moduleName,(0,validation/* isEmpty */.xb)(moduleName)){_context4.next=4;break}return _context4.next=4,api/* API */.bl.get("/module/metafields?moduleName="+moduleName).then((function(response){(0,validation/* isEmpty */.xb)(response.data.meta)||(_this4.moduleMetaInfo=response.data.meta),_this4.showSearch=!0})).catch((function(){}));case 4:case"end":return _context4.stop()}}),_callee4)})))()}}},components_PeopleListvue_type_script_lang_js=PeopleListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PeopleListvue_type_script_lang_js,PeopleListvue_type_template_id_72f07eec_render,PeopleListvue_type_template_id_72f07eec_staticRenderFns,!1,null,null,null)
/* harmony default export */,PeopleList=component.exports,AnnouncementSummaryvue_type_script_lang_js={props:["viewname","id","moduleName","notesModuleName","attachmentsModuleName"],components:{Page:PageBuilderFluid/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,AsynButton:AsyncButton/* default */.Z,PeopleList:PeopleList,ApprovalBar:ApprovalBar/* default */.Z,CustomButton:CustomButton/* default */.Z},data:function(){return{loading:!0,record:{id:this.id},attachments:[],fieldsMap:{},allCount:0,POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,readCount:0,isRead:null,showMore:!1,countLoading:!1}},created:function(){this.$store.dispatch("loadTicketStatus",this.moduleName),this.loadModuleMeta(),this.init()},mounted:function(){eventBus/* eventBus */.Y.$on("listDialogClose",this.closeDialog)},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({ticketStatus:function(state){return state.ticketStatus},moduleMeta:function(state){return state.view.metaInfo}})),{},{sharingModuleName:function(){return this.$getProperty(this.widget,"widgetParams.sharingInfoModuleName")},states:function(){var ticketStatus=this.ticketStatus,moduleName=this.moduleName,$getProperty=this.$getProperty;return ticketStatus?$getProperty(ticketStatus,moduleName):[]},shouldHideApprovers:function(){return!0},moduleState:function(){var currentStateId=this.$getProperty(this.record,"moduleState.id"),currentState=(this.states||[]).find((function(state){return state.id===currentStateId}));return currentState?currentState.displayName:null},isStateFlowEnabled:function(){var hasState=this.$getProperty(this.record,"moduleState.id"),isEnabled=this.$getProperty(this.moduleMeta,"module.stateFlowEnabled");return hasState&&isEnabled},isApprovalEnabled:function(){var record=this.record,approvalFlowId=record.approvalFlowId,approvalStatus=record.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)},primaryFields:function(){return["title","longDescription","announcementattachments","announcementsharing","audience"]},imageAttachments:function(){var _step,files=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.attachments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attachment=_step.value;attachment.contentType.includes("image")&&files.push(attachment)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return files},canShowActionButtons:function(){var hasUpdatePermission=this.hasUpdatePermission,hasDeletePermission=this.hasDeletePermission;return hasUpdatePermission||hasDeletePermission},hasUpdatePermission:function(){return this.$hasPermission("".concat(this.moduleName,":UPDATE"))},hasDeletePermission:function(){return this.$hasPermission("".concat(this.moduleName,":DELETE"))},listRouteName:function(){return"announcementsList"},editRouteName:function(){return"edit-announcement"}}),watch:{id:{handler:function(newVal,oldVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:newVal&&newVal!==oldVal&&(_this.loading=!0,_this.loadData().then((function(){return _this.loadAttachments()})).finally((function(){_this.loading=!1})));case 1:case"end":return _context.stop()}}),_callee)})))()},immediate:!0}},methods:{init:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(
// this.isLoading = true
moduleName=_this2.moduleName,"announcement"!==moduleName){_context2.next=4;break}return _context2.next=4,_this2.getPeopleAnnouncement();case 4:_this2.isLoading=!1;case 5:case"end":return _context2.stop()}}),_callee2)})))()},getPeopleAnnouncement:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var id,filtersAll,filtersRead;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.countLoading=!0,id=_this3.id,filtersAll=JSON.stringify({parentId:{operatorId:9,value:[id.toString()]}}),filtersRead=JSON.stringify({parentId:{operatorId:9,value:[id.toString()]},isRead:{operatorId:15,value:["true"]}}),_context3.next=6,Promise.all([_this3.getPeopleAnnouncementCount("all",filtersAll),_this3.getPeopleAnnouncementCount("read",filtersRead)]);case 6:_this3.countLoading=!1;case 7:case"end":return _context3.stop()}}),_callee3)})))()},getPeopleAnnouncementCount:function(type,filters){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$API$get,error,data,count;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,api/* API */.bl.get("/v3/modules/data/count",{filters:filters,moduleName:"peopleannouncement"});case 2:_yield$API$get=_context4.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this4.$message.error(error.message||"Error Occcured"):(count=data.count,"all"===type?_this4.allCount=count:_this4.readCount=count);case 6:case"end":return _context4.stop()}}),_callee4)})))()},loadData:function(force){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var id,moduleName,config,_yield$API$fetchRecor,error,record;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return id=_this5.id,moduleName=_this5.moduleName,config=force?{force:force}:{},_context5.next=4,api/* API */.bl.fetchRecord(moduleName,{id:id},config);case 4:_yield$API$fetchRecor=_context5.sent,error=_yield$API$fetchRecor.error,record=_yield$API$fetchRecor[moduleName],error?_this5.$message.error(error.message||"Error Occurred"):_this5.record=record;case 8:case"end":return _context5.stop()}}),_callee5)})))()},loadAttachments:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var _yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,api/* API */.bl.get("/attachment",{module:_this6.attachmentsModuleName,recordId:_this6.record.parentId?_this6.record.parentId:_this6.record.id});case 2:_yield$API$get2=_context6.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,_this6.attachments=error?[]:data.attachments?data.attachments:[];case 6:case"end":return _context6.stop()}}),_callee6)})))()},goToList:function(){var viewname=this.viewname,moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref.name;name&&this.$router.replace({name:name,params:{viewname:viewname}})}else this.$router.replace({name:this.listRouteName,params:{viewname:viewname}})},goToEdit:function(){var id=this.id,moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref2.name;name&&this.$router.replace({name:name,params:{id:id}})}else this.$router.replace({name:this.editRouteName,params:{id:id}})},loadModuleMeta:function(){var _this7=this;this.$store.dispatch("view/loadModuleMeta",this.moduleName).then((function(meta){meta.fields.forEach((function(field){_this7.$setProperty(_this7.fieldsMap,"".concat(field.name),field)}))}))},dropdownActionHandler:function(command){"edit"===command?this.goToEdit():"delete"===command?this.deleteRecord():"publish"===command?this.publishAnnouncement():"cancel"===command?this.cancelAnnouncement():"clone"===command&&this.cloneAnnouncement()},publishAnnouncement:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var moduleName,_yield$API$updateReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return moduleName=_this8.moduleName,_context7.next=3,api/* API */.bl.updateRecord(moduleName,{id:_this8.record.id,data:{},params:{publish:!0}});case 3:_yield$API$updateReco=_context7.sent,error=_yield$API$updateReco.error,error?_this8.$message.error(error.message||"Error occurred while publishing announcement"):_this8.loadData(!0);case 6:case"end":return _context7.stop()}}),_callee7)})))()},cancelAnnouncement:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var moduleName,_yield$API$updateReco2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return moduleName=_this9.moduleName,_context8.next=3,api/* API */.bl.updateRecord(moduleName,{id:_this9.record.id,data:{},params:{cancel:!0}});case 3:_yield$API$updateReco2=_context8.sent,error=_yield$API$updateReco2.error,error?_this9.$message.error(error.message||"Error occurred while cancelling announcement"):_this9.loadData(!0);case 6:case"end":return _context8.stop()}}),_callee8)})))()},deleteRecord:function(){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){var value,moduleName,id,_yield$API$deleteReco,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,_this10.$dialog.confirm({title:_this10.$t("common._common.delete"),message:_this10.$t("common._common.delete_confirmation"),rbDanger:!0,rbLabel:_this10.$t("common._common.delete")});case 2:if(value=_context9.sent,!value){_context9.next=10;break}return moduleName=_this10.moduleName,id=_this10.id,_context9.next=7,api/* API */.bl.deleteRecord(moduleName,id);case 7:_yield$API$deleteReco=_context9.sent,error=_yield$API$deleteReco.error,error?(message=error.message,_this10.$message.error(message||"Error Occured while deleting")):(_this10.$message.success(_this10.$t("common._common.delete_success")),_this10.$emit("refreshList"),_this10.goToList());case 10:case"end":return _context9.stop()}}),_callee9)})))()},cloneAnnouncement:function(){var id=this.id,moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref3=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref3.name;name&&this.$router.push({name:name,params:{id:id},query:{clone:!0}})}else this.$router.push({path:"/app/cy/announcements/".concat(id,"/edit?clone=true")})},closeDialog:function(){this.showMore=!1},showMoreDialog:function(isRead){this.isRead=isRead,this.showMore=!0}}},announcements_AnnouncementSummaryvue_type_script_lang_js=AnnouncementSummaryvue_type_script_lang_js,AnnouncementSummary_component=(0,componentNormalizer/* default */.Z)(announcements_AnnouncementSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,"22ebd03a",null)
/* harmony default export */,AnnouncementSummary=AnnouncementSummary_component.exports},
/***/93817:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0cbfbc2f1d1c6ae378439eb74a9aba56.svg";
/***/},
/***/385793:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4741372afa38e7ef033fdd53027fc686.svg";
/***/},
/***/203435:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4641388fe3e978815775c8a3b4d2c4ae.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/97538.js.map