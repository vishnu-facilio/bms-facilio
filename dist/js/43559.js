"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[43559],{
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/903610:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FolderCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/FolderCreation.vue?vue&type=template&id=79d49609
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container views-manager-container-v2",attrs:{title:_vm.title,visible:!0,width:"35%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height200"},[_c("el-form",{ref:"folderCreationForm",attrs:{rules:_vm.rules,model:_vm.folderObj}},[_c("el-form-item",{attrs:{label:"Folder Name",prop:"name",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common.dashboard.enter_the_folder_name")},model:{value:_vm.folderObj.name,callback:function($$v){_vm.$set(_vm.folderObj,"name",$$v)},expression:"folderObj.name"}})],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.saveFolderInfo}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(434284),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),FolderCreationvue_type_script_lang_js={props:["groupDetail","moduleName","appId"],data:function(){return{folderObj:{name:null},saving:!1,rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"}}}},created:function(){this.init()},computed:{title:function(){var groupDetail=this.groupDetail;return(0,validation/* isEmpty */.xb)(groupDetail)?this.$t("viewsmanager.folder.add_new_folder"):this.$t("viewsmanager.folder.edit_folder")}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({addFolder:"view/addFolder",updateFolder:"view/updateFolder"})),{},{init:function(){var groupDetail=this.groupDetail;if(!(0,validation/* isEmpty */.xb)(groupDetail)){var displayName=groupDetail.displayName;this.folderObj.name=displayName}},closeDialog:function(){this.$emit("onClose")},saveFolderInfo:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var validate,groupDetail,folderObj,moduleName,appId,_ref,id,name,moduleId,sequenceNumber,params,_yield$_this$addFolde,error,data,_params,_yield$_this$updateFo,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$refs["folderCreationForm"].validate();case 2:if(validate=_context.sent,validate){_context.next=5;break}return _context.abrupt("return");case 5:if(groupDetail=_this.groupDetail,folderObj=_this.folderObj,moduleName=_this.moduleName,appId=_this.appId,_ref=groupDetail||{},id=_ref.id,name=_ref.name,moduleId=_ref.moduleId,sequenceNumber=_ref.sequenceNumber,!(0,validation/* isEmpty */.xb)(groupDetail)){_context.next=19;break}return params={viewGroup:{displayName:folderObj.name,appId:appId},moduleName:moduleName},_this.saving=!0,_context.next=12,_this.addFolder(params);case 12:_yield$_this$addFolde=_context.sent,error=_yield$_this$addFolde.error,data=_yield$_this$addFolde.data,error?_this.$message.error(error.message||_this.$t("viewsmanager.folder.error_creation")):(_this.$message.success(_this.$t("viewsmanager.folder.success_creation")),_this.$emit("onSave",data.viewGroup),_this.closeDialog()),_this.saving=!1,_context.next=28;break;case 19:return _params={viewGroup:{displayName:folderObj.name,id:id,name:name,moduleId:moduleId,sequenceNumber:sequenceNumber,appId:appId}},_this.saving=!0,_context.next=23,_this.updateFolder(_params);case 23:_yield$_this$updateFo=_context.sent,_error=_yield$_this$updateFo.error,_error?_this.$message.error(_error.message||_this.$t("viewsmanager.folder.error_creation")):((0,validation/* isEmpty */.xb)(groupDetail)&&!(0,validation/* isEmpty */.xb)(appId)?_this.$emit("onSave",appId):_this.$emit("onSave"),_this.$message.success(_this.$t("viewsmanager.folder.edit_creation"))),_this.closeDialog(),_this.saving=!1;case 28:case"end":return _context.stop()}}),_callee)})))()}})},viewmanager_FolderCreationvue_type_script_lang_js=FolderCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(viewmanager_FolderCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FolderCreation=component.exports},
/***/943559:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ViewCreationForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/ViewCreationForm.vue?vue&type=template&id=2142552f&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("FormLayout",{staticClass:"view-creation-form view-creation-form-v2",attrs:{subHeadings:_vm.subHeading,breadcrumbHeadings:_vm.breadcrumb,title:_vm.title,isLoading:_vm.loading,isSaving:_vm.isSaving},on:{onClickBreadcrumb:_vm.onClickBreadcrumb,onSave:_vm.saveView,onCancel:_vm.onCancel},scopedSlots:_vm._u([{key:"spinner-section",fn:function(){return[_c("Spinner",{attrs:{show:_vm.loading,size:"80"}})]},proxy:!0},{key:"naming-section",fn:function(){return[_c("Naming",{ref:"naming-section",attrs:{saveAsNew:_vm.saveAsNew,viewDetail:_vm.viewDetail,isViewClone:_vm.isViewClone,appId:_vm.appId,moduleName:_vm.moduleName,isLoading:_vm.viewGrpLoading}})]},proxy:!0},{key:"sorting-header-section",fn:function(){return[_c("el-switch",{staticClass:"pL20",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},model:{value:_vm.isSortingEnable,callback:function($$v){_vm.isSortingEnable=$$v},expression:"isSortingEnable"}})]},proxy:!0},{key:"sorting-section",fn:function(){return[_vm.isSortingEnable?_c("Sorting",{ref:"sorting-section",attrs:{moduleName:_vm.moduleName,viewDetail:_vm.viewDetail}}):_vm._e()]},proxy:!0},{key:"custcolm-section",fn:function(){return[_c("VisualizationType",{ref:"visualization-section",attrs:{viewDetail:_vm.viewDetail,saveAsNew:_vm.saveAsNew,isNewView:_vm.isNewView,moduleName:_vm.moduleName,canShowCalendarView:_vm.canShowCalendarView,canHideAddConditionManager:_vm.canHideAddConditionManager}})]},proxy:!0},_vm.saveAsNew||_vm.defaultView?{key:"filter-section",fn:function(){return[_c("div",{staticClass:"view-tags"},[_vm.$validation.isEmpty(_vm.viewDetail.filters)?_vm._e():[_c("div",{staticClass:"fc-grey-text-input-label mB10"},[_vm._v(" "+_vm._s(_vm.$t("filters.views.existing_filters"))+" ")]),_c("FTags",{key:"ftags-existing-"+_vm.moduleName,staticClass:"mB10",attrs:{showOnlyExisting:!0,hideActionBtn:!0,hideClose:!0}})],_vm.$validation.isEmpty(_vm.appliedFilters)?_vm._e():[_c("div",{staticClass:"fc-grey-text-input-label mB10"},[_vm._v(" "+_vm._s(_vm.$t("filters.views.new_filters"))+" ")]),_c("FTags",{key:"ftags-new-"+_vm.moduleName,attrs:{moduleName:_vm.moduleName,hideActionBtn:!0,hideClose:!0}})]],2)]},proxy:!0}:{key:"specific-section",fn:function(){return[_c("div",{staticClass:"fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.schedules.specify_criteria_for_this_view_to_teams_and_users"))+" ")]),_c("CriteriaBuilder",{ref:"criteria-builder",attrs:{moduleName:_vm.moduleName,disabled:_vm.defaultView,isOneLevelEnabled:!0},model:{value:_vm.viewCriteria,callback:function($$v){_vm.viewCriteria=$$v},expression:"viewCriteria"}})]},proxy:!0},{key:"share-section",fn:function(){return[_c("ShareWith",{ref:"sharing-section",attrs:{isNewView:_vm.isNewView,saveAsNew:_vm.saveAsNew,viewDetail:_vm.viewDetail,appId:_vm.appId}})]},proxy:!0}],null,!0)})},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(857267),__webpack_require__(648324),__webpack_require__(420629)),validation=__webpack_require__(990260),setup=__webpack_require__(572552),Naming=__webpack_require__(899158),VisualizationTypevue_type_template_id_32772f25_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.canShowCalendarView?_c("div",{staticClass:"d-flex justify-content-space align-center pB20"},[_c("el-tabs",{staticClass:"width100 visual-type",on:{"tab-click":_vm.switchListandCalendar},model:{value:_vm.visualType,callback:function($$v){_vm.visualType=$$v},expression:"visualType"}},[_c("el-tab-pane",{attrs:{disabled:!_vm.isListView,name:"list"}},[_c("span",{staticClass:" visual-tab",attrs:{slot:"label"},slot:"label"},[_c("fc-icon",{attrs:{group:"action",name:"option",size:"16",color:[!_vm.isListView&&"#c0c4cc"]}}),_vm._v(" "+_vm._s(_vm.$t("viewsmanager.visualization_type.list")))],1)]),_c("el-tab-pane",{attrs:{disabled:!_vm.isCalendarView,name:"calendar"}},[_c("span",{staticClass:"visual-tab",attrs:{slot:"label"},slot:"label"},[_c("fc-icon",{attrs:{group:"dsm",name:"calendar",size:"16",color:[!_vm.isCalendarView&&"#c0c4cc"]}}),_vm._v(" "+_vm._s(_vm.$t("viewsmanager.visualization_type.calendar")))],1)])],1),_c("el-dropdown",{attrs:{"hide-on-click":!1,trigger:"hover"}},[_c("span",{staticClass:"el-dropdown-link pointer"},[_c("fc-icon",{attrs:{group:"default",name:"ellipsis-vertical",color:_vm.isIconActive(_vm.isCalendarView)}})],1),_c("el-dropdown-menu",{staticStyle:{width:"200px"},attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",[_c("div",{staticClass:"d-flex justify-content-space align-center"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.visualization_type.list"))+" "),_c("el-switch",{attrs:{disabled:!_vm.isCalendarView},on:{change:function($event){return _vm.toggleVisual("list")}},model:{value:_vm.isListView,callback:function($$v){_vm.isListView=$$v},expression:"isListView"}})],1)]),_c("el-dropdown-item",[_c("div",{staticClass:"d-flex justify-content-space align-center"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.visualization_type.calendar"))+" "),_c("el-switch",{attrs:{disabled:!_vm.isListView},on:{change:function($event){return _vm.toggleVisual("calendar")}},model:{value:_vm.isCalendarView,callback:function($$v){_vm.isCalendarView=$$v},expression:"isCalendarView"}})],1)])],1)],1)],1):_vm._e(),_c("CustomizeColumns",{directives:[{name:"show",rawName:"v-show",value:_vm.showList,expression:"showList"}],ref:"custcolm-section",attrs:{saveAsNew:_vm.saveAsNew,isNewView:_vm.isNewView,viewDetail:_vm.viewDetail,moduleName:_vm.moduleName}}),_vm.canShowCalendarView?[_c("Calendar",{directives:[{name:"show",rawName:"v-show",value:!_vm.showList,expression:"!showList"}],ref:"calendar-section",staticClass:"tab-height",attrs:{moduleName:_vm.moduleName,viewDetail:_vm.viewDetail}}),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showList,expression:"showList"}]},[_c("div",{staticClass:"d-flex mT20 pB10"},[_c("span",{staticClass:"f14 bold"},[_vm._v(_vm._s(_vm.$t("viewsmanager.sorting.heading_name")))]),_c("el-switch",{staticClass:"pL20",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},model:{value:_vm.isSortingEnable,callback:function($$v){_vm.isSortingEnable=$$v},expression:"isSortingEnable"}})],1),_vm.isSortingEnable?_c("Sorting",{ref:"sorting-section",attrs:{moduleName:_vm.moduleName,viewDetail:_vm.viewDetail}}):_vm._e()],1)]:_vm._e()],2)},VisualizationTypevue_type_template_id_32772f25_scoped_true_staticRenderFns=[],Calendarvue_type_template_id_b070bf68_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-form",{ref:"visual-cal",attrs:{model:_vm.calendarViewContext,rules:_vm.rules}},[_vm.isLoading?_c("div",{staticClass:"shimmer-cal"},_vm._l(2,(function(i){return _c("div",{key:i,staticClass:"cal-box loading-shimmer"})})),0):_c("div",{staticClass:"d-flex width100"},[_c("el-form-item",{staticClass:"width100",attrs:{label:"From",prop:"startDateFieldId"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100 pR20",attrs:{filterable:"",clearable:""},on:{change:function($event){_vm.calendarViewContext.endDateFieldId=null}},model:{value:_vm.calendarViewContext.startDateFieldId,callback:function($$v){_vm.$set(_vm.calendarViewContext,"startDateFieldId",$$v)},expression:"calendarViewContext.startDateFieldId"}},_vm._l(_vm.timeFieldList,(function(startTimeFld){return _c("el-option",{key:startTimeFld.id,attrs:{label:startTimeFld.displayName,value:startTimeFld.id}})})),1)],1),_c("el-form-item",{staticClass:"width100",attrs:{label:"To",prop:"endDateFieldId"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.calendarViewContext.endDateFieldId,callback:function($$v){_vm.$set(_vm.calendarViewContext,"endDateFieldId",$$v)},expression:"calendarViewContext.endDateFieldId"}},_vm._l(_vm.endTimeFieldList,(function(endTimeFld){return _c("el-option",{key:endTimeFld.id,attrs:{label:endTimeFld.displayName,value:endTimeFld.id}})})),1)],1)],1)])},Calendarvue_type_template_id_b070bf68_staticRenderFns=[],api=__webpack_require__(32284),calenderViews={
// 1: 'Day',
// 2: 'Week',
3:"Month"},dataTypes={DATE:5,DATE_TIME:6},Calendarvue_type_script_lang_js={props:["moduleName","viewDetail"],data:function(){return{calenderViews:calenderViews,metaInfoObj:{},isLoading:!1,calendarViewContext:{startDateFieldId:null,endDateFieldId:null,defaultCalendarView:null},rules:{startDateFieldId:[{required:!0,message:this.$t("viewsmanager.calender.from_date"),trigger:"blur"}]}}},mounted:function(){var _this$viewDetail,moduleName=this.moduleName,viewDetail=this.viewDetail;this.fetchModuleMetaInfo(moduleName),(0,validation/* isEmpty */.xb)(null===viewDetail||void 0===viewDetail?void 0:viewDetail.calendarViewContext)||(this.calendarViewContext=null===(_this$viewDetail=this.viewDetail)||void 0===_this$viewDetail?void 0:_this$viewDetail.calendarViewContext)},computed:{moduleFields:function(){var fields=this.$getProperty(this.metaInfoObj,"fields",[])||[];return(fields||[]).filter((function(field){return"TASKS"!==field.displayTypeEnum}))||[]},timeFieldList:function(){var DATE=dataTypes.DATE,DATE_TIME=dataTypes.DATE_TIME;return(this.moduleFields||[]).filter((function(fld){return[DATE,DATE_TIME].includes(fld.dataType)}))},endTimeFieldList:function(){var _this=this;return this.timeFieldList.filter((function(fld){var _this$calendarViewCon;return(null===(_this$calendarViewCon=_this.calendarViewContext)||void 0===_this$calendarViewCon?void 0:_this$calendarViewCon.startDateFieldId)!=fld.id}))}},methods:{fetchModuleMetaInfo:function(moduleName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if((0,validation/* isEmpty */.xb)(moduleName)){_context.next=4;break}return _this2.isLoading=!0,_context.next=4,api/* API */.bl.get("/module/metafields?moduleName="+moduleName).then((function(_ref){var data=_ref.data,error=_ref.error;error?_this2.$message.error(error.message||"Error Occured"):_this2.metaInfoObj=_this2.$getProperty(data,"meta",{})||{}}));case 4:_this2.isLoading=!1;case 5:case"end":return _context.stop()}}),_callee)})))()},serializeData:function(){var _this$calendarViewCon2=this.calendarViewContext,startDateFieldId=_this$calendarViewCon2.startDateFieldId,endDateFieldId=_this$calendarViewCon2.endDateFieldId,defaultCalendarView=_this$calendarViewCon2.defaultCalendarView,calendarViewContext={startDateFieldId:startDateFieldId,endDateFieldId:endDateFieldId,defaultCalendarView:defaultCalendarView};return{calendarViewContext:calendarViewContext,isCalendarView:!0}},validate:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var validCal;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return validCal=!1,_context2.prev=1,_context2.next=4,_this3.$refs["visual-cal"].validate();case 4:validCal=_context2.sent,_context2.next=10;break;case 7:_context2.prev=7,_context2.t0=_context2["catch"](1),validCal=!1;case 10:return _context2.abrupt("return",validCal);case 11:case"end":return _context2.stop()}}),_callee2,null,[[1,7]])})))()}}},components_Calendarvue_type_script_lang_js=Calendarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Calendarvue_type_script_lang_js,Calendarvue_type_template_id_b070bf68_render,Calendarvue_type_template_id_b070bf68_staticRenderFns,!1,null,null,null)
/* harmony default export */,Calendar=component.exports,CustomizeColumns=__webpack_require__(274104),Sorting=__webpack_require__(868245),VisualizationTypevue_type_script_lang_js={props:["viewDetail","isNewView","moduleName","saveAsNew","canShowCalendarView"],components:{Calendar:Calendar,CustomizeColumns:CustomizeColumns/* default */.Z,Sorting:Sorting/* default */.Z},data:function(){return{isListView:!1,isCalendarView:!1,visualType:"",showList:!0,isSortingEnable:!1}},created:function(){var _this$viewDetail,_this$viewDetail2;(0,validation/* isEmpty */.xb)(this.viewDetail)||(this.isListView=null===(_this$viewDetail=this.viewDetail)||void 0===_this$viewDetail?void 0:_this$viewDetail.listView,this.isCalendarView=null===(_this$viewDetail2=this.viewDetail)||void 0===_this$viewDetail2?void 0:_this$viewDetail2.calendarView,this.isListView||!this.isListView&&!this.isCalendarView?(this.showList=!0,this.visualType="list",this.computeSort()):(this.showList=!1,this.visualType="calendar"));this.isNewView&&(this.visualType="list",this.showList=this.isListView=!0)},computed:{isCalendarViewEnabled:function(){return this.isCalendarView&&this.$helpers.isLicenseEnabled("CALENDAR_VIEW")}},methods:{switchListandCalendar:function(event){var _ref=event||{},name=_ref.name;this.showList="list"===name},computeSort:function(){var viewDetail=this.viewDetail,_ref2=viewDetail||{},sortFields=_ref2.sortFields;this.isSortingEnable=!(0,validation/* isEmpty */.xb)(sortFields)},toggleVisual:function(event){var isListView=this.isListView,isCalendarView=this.isCalendarView,bothEnabled=isListView&&isCalendarView;bothEnabled?(this.switchListandCalendar({name:event}),this.visualType=event):(this.showList=isListView,this.visualType=isListView?"list":"calendar")},isIconActive:function(showList){return showList?"#007adb":"black"},validate:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var isListView,isCalendarViewEnabled,custcolmValidate,calendarValidate;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isListView=_this.isListView,isCalendarViewEnabled=_this.isCalendarViewEnabled,isListView||isCalendarViewEnabled){_context.next=4;break}return _this.$message({message:_this.$t("viewsmanager.visualization_type.error_msg"),type:"error"}),_context.abrupt("return",!1);case 4:if(custcolmValidate=!1,calendarValidate=!1,!isListView){_context.next=9;break}return _context.next=8,_this.$refs["custcolm-section"].validate();case 8:custcolmValidate=_context.sent;case 9:if(!isCalendarViewEnabled){_context.next=13;break}return _context.next=12,_this.$refs["calendar-section"].validate();case 12:calendarValidate=_context.sent;case 13:if(!isListView||!isCalendarViewEnabled){_context.next=27;break}if(!custcolmValidate||!calendarValidate){_context.next=18;break}return _context.abrupt("return",!0);case 18:if(!custcolmValidate){_context.next=24;break}return _this.showList=!1,_this.visualType="calendar",_context.abrupt("return",!1);case 24:return _this.showList=!0,_this.visualType="list",_context.abrupt("return",!1);case 27:return _context.abrupt("return",custcolmValidate||calendarValidate);case 28:case"end":return _context.stop()}}),_callee)})))()},serializeData:function(){var isListView=this.isListView,isCalendarViewEnabled=this.isCalendarViewEnabled,listData={},calendarData={};isListView&&(listData=this.$refs["custcolm-section"].serializeData()),isCalendarViewEnabled&&(calendarData=this.$refs["calendar-section"].serializeData());var sortComponent=this.$refs["sorting-section"],sortConfigData={orderBy:null,orderType:null};!(0,validation/* isEmpty */.xb)(sortComponent)&&isListView&&(sortConfigData=sortComponent.serializeData());var visualization=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},listData),calendarData),{},{isListView:isListView,isCalendarView:isCalendarViewEnabled});return{visualization:visualization,sortConfigData:sortConfigData}}}},components_VisualizationTypevue_type_script_lang_js=VisualizationTypevue_type_script_lang_js,VisualizationType_component=(0,componentNormalizer/* default */.Z)(components_VisualizationTypevue_type_script_lang_js,VisualizationTypevue_type_template_id_32772f25_scoped_true_render,VisualizationTypevue_type_template_id_32772f25_scoped_true_staticRenderFns,!1,null,"32772f25",null)
/* harmony default export */,VisualizationType=VisualizationType_component.exports,dist=__webpack_require__(191853),ShareWith=__webpack_require__(622306),router=__webpack_require__(329435),routeUtil=__webpack_require__(405759),calendarSupportUtil=__webpack_require__(852452),Spinner=__webpack_require__(604947),ViewCreationFormvue_type_script_lang_js={props:["moduleName"],components:{Naming:Naming/* default */.Z,FormLayout:setup/* FormLayout */.l,VisualizationType:VisualizationType,CriteriaBuilder:dist/* CriteriaBuilder */.IP,ShareWith:ShareWith/* default */.Z,Sorting:Sorting/* default */.Z,Spinner:Spinner/* default */.Z,FTags:function(){return Promise.all(/* import() */[__webpack_require__.e(75676),__webpack_require__.e(71569)]).then(__webpack_require__.bind(__webpack_require__,775676))}},data:function(){return{viewDetail:null,isSaving:!1,loading:!0,viewCriteria:null,breadcrumb:[],viewGrpLoading:!1,isSortingEnable:!1,appList:[],subHeading:[{displayName:this.$t("viewsmanager.naming.heading_name"),id:"naming"},{displayName:this.$t("viewsmanager.sharing_permission.heading_name"),id:"share"}]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.getAppList();case 2:if(_this.$store.dispatch("view/loadModuleMeta",_this.moduleName),_this.loadGroupViewsList(),_this.constructBreadCrumb(),!_this.viewname){_context.next=9;break}return _context.next=8,_this.loadViewDetails();case 8:_this.canShowCalendarView||_this.computeSort();case 9:_this.constructSideBarList(),_this.loading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{viewname:function(){var _this$$attrs,_this$$route;return(null===(_this$$attrs=this.$attrs)||void 0===_this$$attrs?void 0:_this$$attrs.viewname)||(null===(_this$$route=this.$route)||void 0===_this$$route?void 0:_this$$route.query.viewname)||null},isNewView:function(){var _this$$attrs2;return(0,validation/* isEmpty */.xb)(null===(_this$$attrs2=this.$attrs)||void 0===_this$$attrs2?void 0:_this$$attrs2.viewname)||this.isViewClone},appId:function(){var viewCloneAppId=this.viewCloneAppId,currentAppId=this.currentAppId;return viewCloneAppId||currentAppId},currentAppId:function(){var query=this.$route.query;return query=(0,validation/* isObject */.Kn)(query)?query:JSON.parse(query),query.appId},title:function(){var viewname=this.viewname;return(0,validation/* isEmpty */.xb)(viewname)?this.$t("viewsmanager.list.add_view"):this.isViewClone?this.$t("viewsmanager.list.clone_view"):this.$t("viewsmanager.list.edit_view")},appliedFilters:function(){var $route=this.$route,_ref=$route||{},search=_ref.query.search;return(0,validation/* isEmpty */.xb)(search)?null:JSON.parse(this.$route.query.search)},saveAsNew:function(){var query=this.$route.query,_ref2=query||{},saveAsNew=_ref2.saveAsNew;return saveAsNew},defaultView:function(){var viewDetail=this.viewDetail;return null===viewDetail||void 0===viewDetail?void 0:viewDetail.default},isViewClone:function(){var viewCloneAppId=this.viewCloneAppId,viewname=this.viewname;return viewCloneAppId&&viewname},viewCloneAppId:function(){return this.$getProperty(this.$route,"query.viewCloneAppId")||null},isCustom:function(){var _ref3=this.metaInfo||{},moduleObj=_ref3.module,_ref4=moduleObj||{},custom=_ref4.custom;return custom},canShowCalendarView:function(){var _this2=this,isFeaturedApp=(this.appList||[]).some((function(app){return(null===app||void 0===app?void 0:app.id)==_this2.appId}));return(calendarSupportUtil/* calendarSupportModules */.C.includes(this.moduleName)||this.isCustom)&&this.$helpers.isLicenseEnabled("CALENDAR_VIEW")&&isFeaturedApp},canHideAddConditionManager:function(){return!1}}),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({saveNewView:"view/saveNewView",editView:"view/editView",loadModuleMeta:"view/loadModuleMeta"})),{},{getAppList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("v2/application/fetchList?moduleName=".concat(_this3.moduleName));case 2:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_this3.appList=(data.application||[]).filter((function(app){return"FEATURE_GROUPING"===app.appCategoryEnum||"WORK_CENTERS"===app.appCategoryEnum&&"Maintenance"===app.name})));case 6:case"end":return _context2.stop()}}),_callee2)})))()},computeSort:function(){var viewDetail=this.viewDetail,_ref5=viewDetail||{},sortFields=_ref5.sortFields;this.isSortingEnable=!(0,validation/* isEmpty */.xb)(sortFields)},loadViewDetails:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var viewname,moduleName,appId,url,params,_yield$API$get2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return viewname=_this4.viewname,moduleName=_this4.moduleName,appId=_this4.currentAppId,url="/v2/views/".concat(viewname),params={moduleName:moduleName,appId:appId,fromBuilder:!0},_context3.next=5,api/* API */.bl.get(url,params);case 5:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error||(_this4.viewDetail=data.viewDetail||{},_this4.viewCriteria=_this4.viewDetail.criteria,_this4.isViewClone&&(_this4.viewDetail=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this4.viewDetail),{},{groupId:null,name:null,id:-1})));case 9:case"end":return _context3.stop()}}),_callee3)})))()},loadGroupViewsList:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleName,appId,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return moduleName=_this5.moduleName,appId=_this5.appId,data={moduleName:moduleName,appId:appId,restrictPermissions:!0},_this5.viewGrpLoading=!0,_context4.next=5,_this5.$store.dispatch("view/loadGroupViews",data);case 5:_this5.viewGrpLoading=!1;case 6:case"end":return _context4.stop()}}),_callee4)})))()},constructBreadCrumb:function(){var moduleRoute=this.getModuleListRoute();if(moduleRoute&&this.breadcrumb.push({name:this.$t("viewsmanager.list.module_list"),route:moduleRoute}),!this.saveAsNew||!this.isViewClone){var viewManagerRoute=this.getViewManagerRoute();viewManagerRoute&&this.breadcrumb.push({name:this.$t("viewsmanager.list.manage_views"),route:viewManagerRoute})}var name=this.isViewClone?"".concat(this.$t("viewsmanager.list.clone_view")):this.isNewView?"".concat(this.$t("viewsmanager.list.add_view")):"".concat(this.$t("viewsmanager.list.edit_view"));this.breadcrumb.push({name:name})},constructSideBarList:function(){this.canShowCalendarView?this.subHeading.splice(2,0,{displayName:this.$t("viewsmanager.visualization_type.heading_name"),id:"custcolm"}):
// when calendar license is disabled following old flow
this.subHeading.splice(2,0,{displayName:this.$t("viewsmanager.customize.heading_name"),id:"custcolm"},{displayName:this.$t("viewsmanager.sorting.heading_name"),id:"sorting"}),this.saveAsNew&&
// splicing criteria and replaced by filter object
this.subHeading.splice(1,0,{displayName:"Filters",id:"filter"}),this.defaultView||this.subHeading.splice(1,0,{displayName:this.$t("viewsmanager.criteria.heading_name"),id:"specific"})},getModuleListRoute:function(){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref6=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref6.name;if(name)return{name:name}}else{var route=(0,routeUtil/* findRouterForModuleInApp */.E)(moduleName,router/* pageTypes */.As.LIST)||{};if(route)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},route),{},{params:{moduleName:moduleName}})}return null},getViewManagerRoute:function(){var moduleName=this.moduleName,$route=this.$route,query=$route.query;if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForModule=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.VIEW_MANAGER),name=_findRouteForModule.name;if(name)return{name:name,query:query}}else{var route=(0,routeUtil/* findRouterForModuleInApp */.E)(moduleName,router/* pageTypes */.As.VIEW_MANAGER);if(route)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},route),{},{query:query})}return null},saveView:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var isValid,payload;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this6.validateViewData();case 2:if(isValid=_context5.sent,isValid){_context5.next=5;break}return _context5.abrupt("return");case 5:payload=_this6.constructViewData(),_this6.isSaving=!0,_this6.isNewView?_this6.saveNewView(payload).then((function(payload){var _ref7=payload||{},viewname=_ref7.name,moduleRoute=_this6.getModuleListRoute();if(_this6.$message.success("View created successfully!"),_this6.saveAsNew&&moduleRoute){var _ref8=moduleRoute||{},name=_ref8.name,_ref8$params=_ref8.params,params=void 0===_ref8$params?{}:_ref8$params;_this6.$router.replace({name:name,params:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},params),{},{viewname:viewname}),query:{}})}else _this6.onCancel()})).catch((function(error){"Name already taken"===(null===error||void 0===error?void 0:error.message)?_this6.$message.error("View name already taken in this app!"):_this6.$message.error("View creation failed!")})).finally((function(){_this6.isSaving=!1})):_this6.editView(payload).then((function(){_this6.$message.success(_this6.$t("filters.views.edit_success")),_this6.onCancel()})).catch((function(){_this6.$message.error("View edited failed!")})).finally((function(){_this6.isSaving=!1}));case 8:case"end":return _context5.stop()}}),_callee5)})))()},validateViewData:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var _this7$$refs$criteria,namingValidate,visualValidate,criteriaValidate;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,_this7.$refs["naming-section"].validate();case 2:return namingValidate=_context6.sent,_context6.next=5,_this7.$refs["visualization-section"].validate();case 5:return visualValidate=_context6.sent,criteriaValidate=!!(0,validation/* isEmpty */.xb)(_this7.$refs["criteria-builder"])||(null===(_this7$$refs$criteria=_this7.$refs["criteria-builder"])||void 0===_this7$$refs$criteria?void 0:_this7$$refs$criteria.validate()),_context6.abrupt("return",namingValidate&&criteriaValidate&&visualValidate);case 8:case"end":return _context6.stop()}}),_callee6)})))()},constructViewData:function(){var appId=this.appId,viewname=this.viewname,appliedFilters=this.appliedFilters,saveAsNew=this.saveAsNew,criteria=this.viewCriteria,moduleName=this.moduleName,canShowCalendarView=this.canShowCalendarView,_this$$refs$visualiza=this.$refs["visualization-section"].serializeData(),visualization=_this$$refs$visualiza.visualization,sortConfigData=_this$$refs$visualiza.sortConfigData,naming=this.$refs["naming-section"].serializeData(),sharingData=this.$refs["sharing-section"].serializeData();if(!canShowCalendarView){var sortComponent=this.$refs["sorting-section"];sortConfigData={orderBy:null,orderType:null},(0,validation/* isEmpty */.xb)(sortComponent)||(sortConfigData=sortComponent.serializeData())}var paramObj=(0,objectSpread2/* default */.Z)({moduleName:moduleName},sortConfigData),viewObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},naming),sharingData),visualization),{},{appId:appId});return saveAsNew?(viewObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},viewObj),{},{includeParentCriteria:!0,filtersJson:JSON.stringify(appliedFilters||{})}),paramObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},paramObj),{},{parentView:viewname})):(0,validation/* isEmpty */.xb)(criteria)||this.defaultView||(viewObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},viewObj),{},{criteria:criteria})),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},paramObj),{},{view:viewObj})},onCancel:function(){var appId=this.appId,moduleName=this.moduleName,route=this.getViewManagerRoute();route&&this.$router.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},route),{},{params:{moduleName:moduleName},query:{appId:appId}}))},onClickBreadcrumb:function(){}})},viewmanager_ViewCreationFormvue_type_script_lang_js=ViewCreationFormvue_type_script_lang_js,ViewCreationForm_component=(0,componentNormalizer/* default */.Z)(viewmanager_ViewCreationFormvue_type_script_lang_js,render,staticRenderFns,!1,null,"2142552f",null)
/* harmony default export */,ViewCreationForm=ViewCreationForm_component.exports},
/***/274104:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CustomizeColumns}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/components/CustomizeColumns.vue?vue&type=template&id=b36583de
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"view-creation-form-customize-column-container"},[_c("div",{staticClass:"cc-fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.customize.drag_drop_text"))+" ")]),_c("div",{staticClass:"wo-rearrage-container"},[_c("div",{staticClass:"cc-rearrange-box mR40"},[_c("div",{staticClass:"container-header"},[_c("div",{staticClass:"available-column-header d-flex pL15"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.customize.available_columns"))+" ")]),_c("div",{staticClass:"d-flex user-selecter"},[_c("el-input",{staticClass:"avail-select width100 border-right2",attrs:{"prefix-icon":"el-icon-search",placeholder:"Search Column"},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1)]),_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(6,(function(i){return _c("div",{key:"available_list-"+i,staticClass:"lines loading-shimmer"})})),0):_c("div",{staticClass:"rearrange-box-body"},_vm._l(_vm.filteredColumns,(function(element,index){return _c("div",{key:"filtered-fields-"+index,staticClass:"avail-block d-flex"},[_c("span",{staticClass:"rearrange-txt block-word-break"},[_vm._v(_vm._s(element.label))]),_c("div",{staticClass:"rearrange-plus-icon pointer",on:{click:function($event){return _vm.addcolumn(element)}}},[_c("i",{staticClass:"el-icon-plus action-icon "})])])})),0)]),_c("div",{staticClass:"cc-rearrange-box vc-container-right"},[_c("p",{staticClass:"rearrange-box-sticky-container right-column-container "},[_c("span",{staticClass:"vc-rearrange-box-H"},[_vm._v(_vm._s(_vm.$t("viewsmanager.customize.selected_columns")))])]),_c("div",{staticClass:"rearrange-box-body"},[_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(3,(function(i){return _c("div",{key:"selected_list-"+i,staticClass:"lines loading-shimmer"})})),0):_c("div",[_vm._l(_vm.fixedSelectedCol,(function(col,index){return _c("div",{key:index+"fixed-fields",staticClass:"avail-block",staticStyle:{border:"solid 1px #f0f0f0"}},[_c("span",{staticClass:"rearrange-txt2 block-word-break",staticStyle:{opacity:"0.5"}},[_vm._v(_vm._s(col.label))])])})),_c("draggable",{staticClass:"dragArea",attrs:{group:"people",handle:".rearrange-icon"},model:{value:_vm.selectedColumns,callback:function($$v){_vm.selectedColumns=$$v},expression:"selectedColumns"}},_vm._l(_vm.selectedColumns,(function(element,index){return _c("div",{key:index+"selected-fields",staticClass:"avail-block right-column-container d-flex"},[_c("div",{staticClass:"d-flex"},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("viewsmanager.sharing_permission.reorder"),placement:"top"}},[_c("inline-svg",{staticClass:"vertical-middle rearrange-icon cursor-move",attrs:{src:"svgs/ic-drag-handle",iconClass:"text-center icon icon-sm-md"}})],1),_c("span",{staticClass:"rearrange-txt2 block-word-break"},[_vm._v(_vm._s(element.label)+" ")])],1),_c("i",{staticClass:"el-icon-close action-icon  ",on:{click:function($event){return _vm.removeColumn(element,index)}}})])})),0)],2)])])])])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(634338),__webpack_require__(990260)),ViewMixin=__webpack_require__(453877),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),api=__webpack_require__(32284),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),CustomizeColumnsvue_type_script_lang_js={props:["viewDetail","isNewView","moduleName","saveAsNew"],mixins:[ViewMixin/* default */.Z],components:{draggable:vuedraggable_umd_default()},data:function(){return{isLoading:!0,searchText:"",metaInfoObj:{},availableColumns:[],selectedColumns:[],config:{availableColumns:[]},allColumns:[]}},created:function(){this.fetchModuleMetaInfo(this.moduleName)},watch:{viewColumns:{handler:function(){this.availableColumns=[],this.selectedColumns=[]}},allFields:{handler:function(val){this.allColumns=cloneDeep_default()(val),this.checkColumns()},deep:!0}},mounted:function(){this.allColumns=cloneDeep_default()(this.allFields)},computed:{columnDisplayNameMap:function(){var viewDetail=this.viewDetail,_ref=viewDetail||{},fields=_ref.fields,map={};return(0,validation/* isEmpty */.xb)(fields)||fields.forEach((function(field){map[field.name]=field.columnDisplayName||field.displayName})),map},fixedCols:function(){var metaInfoObj=this.metaInfoObj,mainField=null,fixedColumns=[];if((0,validation/* isEmpty */.xb)(metaInfoObj))fixedColumns=["name"];else{var fields=metaInfoObj.fields;mainField=(fields||[]).find((function(field){return field.mainField})),fixedColumns.push(mainField.name)}return fixedColumns},allFields:function(){var _this=this,fieldsList=[];return this.metaInfoObj&&this.metaInfoObj.fields&&(fieldsList=this.metaInfoObj.fields.filter((function(field){return(_this.config.availableColumns||-1!==_this.config.availableColumns.indexOf(field.name)||!field.default)&&-1!==field.parentFieldId&&17!==field.dataType&&(!_this.fixedCols||!_this.fixedCols.includes(field.name))})).filter((function(f){return f.id&&f.name})).map((function(field){var columnDisplayNameLable=_this.columnDisplayNameMap[field.name]||null;return{id:field.id,label:columnDisplayNameLable||field.columnDisplayName||field.displayName,key:field.name||""}}))),fieldsList},fixedSelectedCol:function(){var _this2=this;return this.fixedCols&&this.metaInfoObj&&this.metaInfoObj.fields?this.metaInfoObj.fields.filter((function(field){return _this2.fixedCols.includes(field.name)})).map((function(field){return{id:field.id,label:field.columnDisplayName||field.displayName}})):[]},filteredColumns:function(){var _this3=this,availableColumns=this.availableColumns;return this.searchText?availableColumns.filter((function(search){return search.label.toLowerCase().includes(_this3.searchText.toLowerCase())})):availableColumns}},methods:{fetchModuleMetaInfo:function(moduleName){var _this4=this;(0,validation/* isEmpty */.xb)(moduleName)||api/* API */.bl.get("/module/metafields?moduleName="+moduleName).then((function(_ref2){var data=_ref2.data,error=_ref2.error;error?_this4.$message.error(error.message||"Error Occured"):_this4.metaInfoObj=_this4.$getProperty(data,"meta",{})||{}}))},checkColumns:function(){var _this5=this;this.isLoading=!0;var _ref3=this.viewDetail||{},fields=_ref3.fields,nonSelectableColumns=["assignmentGroup","asset","week","hour","month","day","localId","photoId","space","hideToCustomer","parentAssetId","stateFlowId","id"];for(var column in this.selectedColumns=[],this.allColumns){var isColumnSelected=!1;for(var viewColumn in this.viewColumns)this.allColumns[column].label!==this.viewColumns[viewColumn].displayName||this.isNewView&&!this.saveAsNew||(isColumnSelected=!0);isColumnSelected||nonSelectableColumns.includes(this.allColumns[column].key)||this.availableColumns.push(this.allColumns[column])}(0,validation/* isEmpty */.xb)(fields)||fields.forEach((function(fld){var _ref4=fld||{},fieldId=_ref4.fieldId,name=_ref4.name,displayName=_ref4.displayName,columnDisplayName=_ref4.columnDisplayName,field=_ref4.field,_ref5=field||{},mainField=_ref5.mainField,fieldName=_ref5.name;mainField||_this5.selectedColumns.push({id:fieldId,key:name||fieldName,label:displayName||columnDisplayName})})),this.isLoading=!1},addcolumn:function(element){this.selectedColumns.push(element);var index=this.availableColumns.findIndex((function(c){return c.id===element.id}));-1!==index&&this.availableColumns.splice(index,1)},removeColumn:function(element,index){this.availableColumns.push(element),this.selectedColumns.splice(index,1)},validate:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve){(0,validation/* isEmpty */.xb)(_this6.selectedColumns)&&(_this6.$message({message:"Please select atleast one customize column",type:"error"}),resolve(!1)),resolve(!0)})));case 1:case"end":return _context.stop()}}),_callee)})))()},serializeData:function(){var columns=[].concat((0,toConsumableArray/* default */.Z)(this.fixedSelectedCol),(0,toConsumableArray/* default */.Z)(this.selectedColumns)),fields=columns.map((function(col){return{fieldId:col.id,columnDisplayName:col.label,fieldName:col.key||""}}));return{fields:fields}}}},components_CustomizeColumnsvue_type_script_lang_js=CustomizeColumnsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CustomizeColumnsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CustomizeColumns=component.exports},
/***/899158:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Naming}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/components/Naming.vue?vue&type=template&id=282ab9a8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-form",{ref:"naming-form",attrs:{rules:_vm.rules,model:_vm.viewNamingSection}},[_c("el-form-item",{attrs:{label:_vm.$t("viewsmanager.naming.display_name"),prop:"displayName"}},[_c("TextInput",{attrs:{placeholder:_vm.placeholder},model:{value:_vm.viewNamingSection.displayName,callback:function($$v){_vm.$set(_vm.viewNamingSection,"displayName",$$v)},expression:"viewNamingSection.displayName"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("viewsmanager.naming.folder_name"),prop:"groupId"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Select Folder",filterable:"",loading:_vm.isLoading,"popper-class":"view-creation-folder-selection-popper view-creation-form-v2"},scopedSlots:_vm._u([{key:"empty",fn:function(){return[_c("el-button",{staticClass:"pL20 width100 text-left addFolder-btn",on:{click:function($event){_vm.showFolderCreationDialog=!0}}},[_vm._v(" + "+_vm._s(_vm.$t("viewsmanager.list.add_folder"))+" ")])]},proxy:!0}]),model:{value:_vm.viewNamingSection.groupId,callback:function($$v){_vm.$set(_vm.viewNamingSection,"groupId",$$v)},expression:"viewNamingSection.groupId"}},[_vm._l(_vm.groupViews,(function(group,index){return _c("el-option",{key:index,attrs:{label:group.displayName||group.name,value:group.id}})})),_c("div",{staticClass:"search-select-filter-btn"},[_c("el-button",{staticClass:"pL20 width100 text-left addFolder-btn",on:{click:function($event){_vm.showFolderCreationDialog=!0}}},[_vm._v(" + "+_vm._s(_vm.$t("viewsmanager.list.add_folder"))+" ")])],1)],2)],1)],1),_vm.showFolderCreationDialog?_c("FolderCreation",{attrs:{moduleName:_vm.moduleName,appId:_vm.appId},on:{onClose:function($event){_vm.showFolderCreationDialog=!1},onSave:_vm.onUpdateGroupId}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),FolderCreation=(__webpack_require__(821057),__webpack_require__(434284),__webpack_require__(903610)),vuex_esm=__webpack_require__(420629),ui_forms=__webpack_require__(141323),validation=__webpack_require__(990260),Namingvue_type_script_lang_js={props:["viewDetail","appId","saveAsNew","moduleName","isLoading"],components:{FolderCreation:FolderCreation/* default */.Z,TextInput:ui_forms/* TextInput */.oi},data:function(){return{placeholder:"Enter View Name",showFolderCreationDialog:!1,viewNamingSection:{displayName:null,groupId:null},rules:{displayName:{validator:function(rule,value,callback){(0,validation/* isEmpty */.xb)(value)?callback(new Error(this.$t("common._common.please_enter_a_name"))):callback()}.bind(this),required:!0,trigger:"blur"},groupId:{validator:function(rule,value,callback){(0,validation/* isEmpty */.xb)(value)?callback(new Error("Please select view group folder")):callback()}.bind(this),required:!0,trigger:"change"}}}},created:function(){this.initData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("view",{groupViews:function(state){return state.groupViews}})),{},{isNewView:function(){var viewDetail=this.viewDetail,saveAsNew=this.saveAsNew;return(0,validation/* isEmpty */.xb)(viewDetail)||!!saveAsNew}}),methods:{initData:function(){var viewDetail=this.viewDetail,isNewView=this.isNewView;if(!(0,validation/* isEmpty */.xb)(viewDetail)){var _ref=viewDetail||{},displayName=_ref.displayName,groupId=_ref.groupId,id=_ref.id,name=_ref.name;isNewView||(this.viewNamingSection={displayName:displayName,id:id,name:name}),this.$set(this.viewNamingSection,"groupId",groupId||null)}},onUpdateGroupId:function(val){this.viewNamingSection.groupId=val.id},validate:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,_this.$refs["naming-form"].validate();case 3:return _context.abrupt("return",_context.sent);case 6:return _context.prev=6,_context.t0=_context["catch"](0),_context.abrupt("return",!1);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},serializeData:function(){return this.viewNamingSection}}},components_Namingvue_type_script_lang_js=Namingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Namingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Naming=component.exports},
/***/622306:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ShareWith}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/components/ShareWith.vue?vue&type=template&id=506aa156
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"view-creation-form-share-with-container"},[_c("el-radio-group",{staticClass:"sharing-radio-icon",model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},_vm._l(_vm.shareWithTypes,(function(displayLabel,value){return _c("el-radio",{key:value,staticClass:"fc-radio-btn",attrs:{label:parseInt(value)},on:{change:_vm.onChangeSharingTo}},[_vm._v(" "+_vm._s(displayLabel)+" ")])})),1),_vm.isSpecific?_c("div",[_c("div",{staticClass:"specific_user-header"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.select_user"))+" ")]),_c("div",{staticClass:"specific_user-descrp"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.add_columns_desc"))+" ")]),_c("div",{staticClass:"user-selection-container"},[_c("div",{staticClass:"user-selection-container-block avaiable-user-container"},[_c("div",{staticClass:"header-section"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.available_user"))+" ")]),_c("div",{staticClass:"user-selection-filter-container"},[_c("el-select",{staticClass:"width100 border-right2",on:{change:function($event){_vm.searchText=null}},model:{value:_vm.shareWithSelected,callback:function($$v){_vm.shareWithSelected=$$v},expression:"shareWithSelected"}},_vm._l(_vm.specificUser,(function(option,index){return _c("el-option",{key:index,attrs:{label:option,value:parseInt(index)}})})),1),_c("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"Search",clearable:""},on:{input:_vm.searchContent,clear:_vm.searchContent},model:{value:_vm.searchText,callback:function($$v){_vm.searchText=$$v},expression:"searchText"}})],1),_c("div",{staticClass:"list-container"},[_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(6,(function(i){return _c("div",{key:"available_list-"+i,staticClass:"lines loading-shimmer"})})),0):_vm._l(_vm.filteredList,(function(element,index){return _c("div",{key:"filteredList-"+index,staticClass:"block-card"},[_c("span",{staticClass:"block-text"},[_vm._v(_vm._s(element.name))]),_c("i",{staticClass:"el-icon-plus addition-plus-icon",on:{click:function($event){return _vm.addcolumn(element)}}})])}))],2)]),_c("div",{staticClass:"user-selection-container-block selected-user-container"},[_c("div",{staticClass:"header-section"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.selected_user"))+" ")]),_c("div",{staticClass:"list-container"},[_vm.isLoading?_c("div",{staticClass:"pT20"},_vm._l(3,(function(i){return _c("div",{key:"selected_list-"+i,staticClass:"lines loading-shimmer"})})),0):_vm.$validation.isEmpty(_vm.selectedUsers)?_c("div",{staticClass:"empty-state"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.add_here"))+" ")]):_c("draggable",{staticClass:"dragArea",attrs:{group:"people",handle:".rearrange-icon"},model:{value:_vm.selectedUsers,callback:function($$v){_vm.selectedUsers=$$v},expression:"selectedUsers"}},_vm._l(_vm.selectedUsers,(function(element,index){return _c("div",{key:"selected-user-"+index,staticClass:"block-card"},[_c("div",{staticClass:"flex-middle"},[_c("el-tooltip",{staticStyle:{height:"16px"},attrs:{effect:"dark",content:_vm.$t("viewsmanager.sharing_permission.reorder"),placement:"top"}},[_c("inline-svg",{staticClass:"rearrange-icon cursor-move",attrs:{src:"svgs/ic-drag-handle",iconClass:"icon icon-sm-md"}})],1),_c("div",{staticClass:"block-text2 mL5"},[_vm._v(_vm._s(element.name))])],1),_c("i",{staticClass:"el-icon-close addition-plus-icon",on:{click:function($event){return _vm.removeColumn(index)}}})])})),0)],1)])])]):_vm._e(),_vm.isOnlyMe?_vm._e():_c("div",{staticClass:"mT40"},[_c("el-checkbox",{model:{value:_vm.hasEditPermission,callback:function($$v){_vm.hasEditPermission=$$v},expression:"hasEditPermission"}},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sharing_permission.permission_desc"))+" ")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),slicedToArray=__webpack_require__(554621),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),picklist=__webpack_require__(961358),shareWithTypeValue={ONLY_ME:1,EVERYONE:2,SELECT_USER:3},specificUserValue={USER:1,ROLE:2,GROUP:3},ShareWithvue_type_script_lang_js={props:["viewDetail","saveAsNew","isNewView","appId"],components:{draggable:vuedraggable_umd_default()},data:function(){return{shareWithTypeValue:shareWithTypeValue,specificUserValue:specificUserValue,viewSharingDetails:{},hasEditPermission:!1,sharingDetails:null,isLoading:!1,shareTo:shareWithTypeValue.ONLY_ME,roleList:[],selectedUsers:[],userList:[],searchText:null,shareWithSelected:specificUserValue.USER,shareWithTypes:{1:"Only Me",2:"Everyone",3:"Select User"},specificUser:{1:"User",2:"Role",3:"Team"}}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.deserializedSharingDetails();case 1:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groupList:function(state){return state.groups}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{currentUserId:function(){var _ref=this.getCurrentUser()||{},id=_ref.id;return id||null},isSpecific:function(){var shareTo=this.shareTo;return shareTo===shareWithTypeValue.SELECT_USER},isOnlyMe:function(){var shareTo=this.shareTo;return shareTo===this.shareWithTypeValue.ONLY_ME},filteredList:function(){var _this2=this,shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP,currentList=shareWithSelected===USER?this.userList:shareWithSelected===ROLE?this.roleList:shareWithSelected===GROUP?this.groupList:[],currentUserList=currentList.filter((function(filt){return!_this2.selectedUsers.find((function(element){return element.name===filt.name}))}));return this.searchText&&shareWithSelected!=USER?currentUserList.filter((function(user){var _ref2=user||{},name=_ref2.name;return name.toLowerCase().includes(_this2.searchText.toLowerCase())})):currentUserList}}),methods:{onChangeSharingTo:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this3.shareTo===shareWithTypeValue.ONLY_ME&&(_this3.hasEditPermission=!1),_this3.shareTo===shareWithTypeValue.SELECT_USER&&_this3.getUserManagementList(),_this3.shareWithSelected=specificUserValue.USER,_this3.selectedUsers=[];case 4:case"end":return _context2.stop()}}),_callee2)})))()},deserializedSharingDetails:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var sharingDetails,viewDetail,isNewView,USER,ROLE,GROUP,_ref3,_ref3$isLocked,isLocked,sharedList,_sharedList,sharedData,_userId,type,userId,roleId,groupId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(sharingDetails=_this4.sharingDetails,viewDetail=_this4.viewDetail,isNewView=_this4.isNewView,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP,_ref3=viewDetail||{},_ref3$isLocked=_ref3.isLocked,isLocked=void 0!==_ref3$isLocked&&_ref3$isLocked,(0,validation/* isEmpty */.xb)(null===viewDetail||void 0===viewDetail?void 0:viewDetail.viewSharing)||(sharingDetails=viewDetail.viewSharing),_this4.hasEditPermission=isLocked,!isNewView&&!_this4.saveAsNew){_context3.next=9;break}_this4.shareTo=shareWithTypeValue.ONLY_ME,_context3.next=23;break;case 9:if((0,validation/* isEmpty */.xb)(sharingDetails)){_context3.next=22;break}return sharedList=sharingDetails.filter((function(viewSharingContext){return"APP"!=viewSharingContext.typeEnum})),(0,validation/* isEmpty */.xb)(sharedList)?_this4.shareTo=shareWithTypeValue.EVERYONE:(_this4.shareTo=shareWithTypeValue.SELECT_USER,1===sharedList.length&&(_sharedList=(0,slicedToArray/* default */.Z)(sharedList,1),sharedData=_sharedList[0],_userId=sharedData.userId,type=sharedData.type,1===type&&_this4.currentUserId===_userId&&(_this4.shareTo=shareWithTypeValue.ONLY_ME))),userId=sharingDetails.filter((function(user){return user.type===USER})).map((function(user){return user.userId})),roleId=sharingDetails.filter((function(user){return user.type===ROLE})).map((function(user){return user.roleId})),groupId=sharingDetails.filter((function(user){return user.type===GROUP})).map((function(user){return user.groupId})),_context3.next=17,_this4.getUserManagementList(userId);case 17:_this4.loadUserIds(userId),_this4.loadRoleIds(roleId),_this4.loadGroupIds(groupId),_context3.next=23;break;case 22:_this4.shareTo=shareWithTypeValue.EVERYONE;case 23:case"end":return _context3.stop()}}),_callee3)})))()},getUserManagementList:function(){var _arguments=arguments,_this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var userIds;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return userIds=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:null,_this5.isLoading=!0,_context4.next=4,_this5.loadUsersList(userIds);case 4:return _context4.next=6,_this5.loadRoleList();case 6:return _context4.next=8,_this5.$store.dispatch("loadGroups");case 8:_this5.isLoading=!1;case 9:case"end":return _context4.stop()}}),_callee4)})))()},loadUsersList:function(){var _arguments2=arguments,_this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var userIds,appId,searchText,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return userIds=_arguments2.length>0&&void 0!==_arguments2[0]?_arguments2[0]:null,appId=_this6.appId,searchText=_this6.searchText,_context5.next=4,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"users",filters:{applicationId:{value:[appId]}}},searchText:searchText,defaultIds:userIds});case 4:_yield$getFieldOption=_context5.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this6.$message.error(error.message||"Error Occured"):_this6.userList=options.map((function(user){return{name:user.label,id:user.value}}));case 8:case"end":return _context5.stop()}}),_callee5)})))()},loadRoleList:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var appId,params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(appId=_this7.appId,!(0,validation/* isEmpty */.xb)(appId)){_context6.next=3;break}return _context6.abrupt("return");case 3:return params={search:_this7.searchText,appId:appId},_context6.next=6,api/* API */.bl.get("/setup/roles",params);case 6:_yield$API$get=_context6.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this7.$message.error(error.message||"Error Occured"):_this7.roleList=data.roles||[];case 10:case"end":return _context6.stop()}}),_callee6)})))()},searchContent:debounce_default()((function(){var shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER;shareWithSelected===USER&&this.loadUsersList()}),500),loadUserIds:function(usersId){var userList=this.userList,userDetails=(userList||[]).filter((function(user){return(usersId||[]).includes(user.id)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{userId:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(userDetails))},loadRoleIds:function(roleId){var roleList=this.roleList,roleDetails=(roleList||[]).filter((function(user){return(roleId||[]).includes(user.roleId)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{roleIdKey:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(roleDetails))},loadGroupIds:function(groupId){var groupList=this.groupList,groupDetails=(groupList||[]).filter((function(user){return(groupId||[]).includes(user.groupId)})).map((function(user){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},user),{},{groupId:user.id})}));this.selectedUsers=[].concat((0,toConsumableArray/* default */.Z)(this.selectedUsers),(0,toConsumableArray/* default */.Z)(groupDetails))},addcolumn:function(element){var shareWithSelected=this.shareWithSelected,USER=specificUserValue.USER,ROLE=specificUserValue.ROLE,GROUP=specificUserValue.GROUP;shareWithSelected===USER?this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{userId:element.id})):shareWithSelected===ROLE?this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{roleIdKey:element.id})):shareWithSelected===GROUP&&this.selectedUsers.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},element),{},{groupId:element.id}))},removeColumn:function(index){this.selectedUsers.splice(index,1)},serializeData:function(){var currentUserId=this.currentUserId,selectedUsers=this.selectedUsers,sharedUserIds=selectedUsers.filter((function(user){return user.userId})).map((function(user){return user.userId})),sharedRoleIds=selectedUsers.filter((function(user){return user.roleIdKey})).map((function(user){return user.roleIdKey})),sharedGroupIds=selectedUsers.filter((function(user){return user.groupId})).map((function(user){return user.groupId})),sharedUserDetails=[],sharedRoleDetails=[],sharedGroupDetails=[];this.shareTo===shareWithTypeValue.ONLY_ME?sharedUserDetails.push({type:1,userId:currentUserId}):this.shareTo===shareWithTypeValue.SELECT_USER&&((0,validation/* isEmpty */.xb)(sharedUserIds)||(sharedUserDetails=sharedUserIds.map((function(userId){return userId!==currentUserId?{type:1,userId:userId}:{type:1,userId:currentUserId}}))),(0,validation/* isEmpty */.xb)(sharedRoleIds)||(sharedRoleDetails=sharedRoleIds.map((function(roleId){return{type:2,roleId:roleId}}))),(0,validation/* isEmpty */.xb)(sharedGroupIds)||(sharedGroupDetails=sharedGroupIds.map((function(groupId){return{type:3,groupId:groupId}}))));var sharingDetails=[].concat((0,toConsumableArray/* default */.Z)(sharedUserDetails),(0,toConsumableArray/* default */.Z)(sharedRoleDetails),(0,toConsumableArray/* default */.Z)(sharedGroupDetails));return{viewSharing:sharingDetails,isLocked:this.hasEditPermission}}}},components_ShareWithvue_type_script_lang_js=ShareWithvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ShareWithvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ShareWith=component.exports},
/***/868245:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Sorting}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/viewmanager/components/Sorting.vue?vue&type=template&id=adbaf808
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.sorting.field"))+" ")]),_c("Select",{attrs:{options:_vm.sortableFields,valueName:"name",labelName:"displayName",placeholder:_vm.placeholder,filterable:!0},on:{change:_vm.setOrdertype},model:{value:_vm.sortConfig.orderBy,callback:function($$v){_vm.$set(_vm.sortConfig,"orderBy",$$v)},expression:"sortConfig.orderBy"}})],1),_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.sort_by"))+" ")]),_c("Select",{attrs:{options:_vm.orderType,valueName:"value",labelName:"label"},model:{value:_vm.sortConfig.orderType,callback:function($$v){_vm.$set(_vm.sortConfig,"orderType",$$v)},expression:"sortConfig.orderType"}})],1)],1)},staticRenderFns=[],ui_forms=(__webpack_require__(434284),__webpack_require__(141323)),validation=__webpack_require__(990260),api=__webpack_require__(32284),Sortingvue_type_script_lang_js={components:{Select:ui_forms/* Select */.Ph},props:["moduleName","viewDetail"],data:function(){return{placeholder:"Select Field",sortableFields:{},sortConfig:{orderBy:null,orderType:null},orderType:[{label:this.$t("common._common.ascending"),value:"asc"},{label:this.$t("common._common.descending"),value:"desc"}]}},created:function(){this.fetchSortablefields(),this.initData()},methods:{initData:function(){var _ref=this.viewDetail||{},_ref$sortFields=_ref.sortFields,sortFields=void 0===_ref$sortFields?[]:_ref$sortFields;if(!(0,validation/* isEmpty */.xb)(sortFields)){var _this$$getProperty=this.$getProperty(sortFields[0],"sortField",{}),name=_this$$getProperty.name;this.sortConfig={orderType:sortFields[0].isAscending?"asc":"desc",orderBy:name}}},setOrdertype:function(value){this.$set(this.sortConfig,"orderType",value?"asc":null)},fetchSortablefields:function(){var _this=this,moduleName=this.moduleName;(0,validation/* isEmpty */.xb)(moduleName)||api/* API */.bl.get("v2/fields/sortable/".concat(this.moduleName)).then((function(_ref2){var data=_ref2.data,error=_ref2.error;error?_this.$message.error(error.message||"Error Occured"):_this.sortableFields=data.fields||{}}))},serializeData:function(){var _this$sortConfig=this.sortConfig,orderBy=_this$sortConfig.orderBy,orderType=_this$sortConfig.orderType;return{orderBy:orderBy,orderType:orderType}}}},components_Sortingvue_type_script_lang_js=Sortingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Sortingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Sorting=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/43559.js.map