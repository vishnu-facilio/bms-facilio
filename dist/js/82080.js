"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[82080],{
/***/782080:
/***/function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){
/* harmony export */__webpack_require__.d(__webpack_exports__,{
/* harmony export */J_:function(){/* binding */return __vue_component__$5},
/* harmony export */PE:function(){/* binding */return __vue_component__$4},
/* harmony export */T3:function(){/* binding */return __vue_component__},
/* harmony export */f:function(){/* binding */return __vue_component__$3},
/* harmony export */f3:function(){/* binding */return __vue_component__$6},
/* harmony export */lb:function(){/* binding */return __vue_component__$a},
/* harmony export */lv:function(){/* binding */return __vue_component__$h}
/* harmony export */});
/* unused harmony exports Button, FieldDetails, LineItemTable */
/* harmony import */var _vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36568),_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(990260),moment_timezone__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(480008),vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(720144),element_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(364720),_facilio_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(32284),dlv__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(226905),_facilio_icons_dist_loader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(150556),moment__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(730381),_facilio_utils_sanitize__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(678042),_facilio_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(788262);
/* harmony import */vue__WEBPACK_IMPORTED_MODULE_9__["default"].component(element_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox.name,element_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox);const formatDate$2=(date,excludeTime,onlyTime)=>{let dateformat="DD-MMM-YYYY",timeformat="HH:mm";
// let orgformatArray = orgformat.match(/DD-MMM-YYYY (HH:mm)/)
return onlyTime?moment_timezone__WEBPACK_IMPORTED_MODULE_1__(date).format(timeformat):excludeTime?moment_timezone__WEBPACK_IMPORTED_MODULE_1__(date).format(dateformat):moment_timezone__WEBPACK_IMPORTED_MODULE_1__(date).format(dateformat+" "+timeformat)},formatTime=time=>{let timeformat="HH:mm";return moment_timezone__WEBPACK_IMPORTED_MODULE_1__().startOf("day").milliseconds(time).format(timeformat)},getFormattedDuration$2=(value,format="milliseconds",skipDurationCreation=!1)=>{if(!value)return"00:00 Hrs";let duration;duration=skipDurationCreation?value:moment_timezone__WEBPACK_IMPORTED_MODULE_1__.duration(parseInt(value,10),format);let days=parseInt(duration.asDays(),10),hours=duration.hours(),minutes=duration.minutes(),seconds=duration.seconds();return days>0?1===days?hours?`${days} Day ${hours} Hrs`:`${days} Day`:hours?`${days} Days ${hours} Hrs`:`${days} Days`:hours>0?minutes?`${hours} Hrs ${minutes} Mins`:`${hours} Hrs`:minutes>0?seconds?`${minutes} Mins ${seconds} Secs`:`${minutes} Mins`:`${seconds} Secs`},DATA_TYPE_VALUE_HASH$2={LOOKUP(field,data){let{name:fieldName}=field,{primaryValue:primaryValue,name:name,displayName:displayName,subject:subject}=data[fieldName]||{},value=displayName||name||subject;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(primaryValue)?value:primaryValue},FILE(field,data){let filename=data[`${field.name}FileName`];return filename},DATE(field,data){let{name:name}=field||{},value=data[name];return value&&-1!==value?formatDate$2(value,!0):""},DATE_TIME(field,data){let{name:name}=field||{},value=data[name];return value&&-1!==value?formatDate$2(value):""},ENUM(field,data){let{name:name}=field||{},value=data[name],fieldObj=field.field;return value=value?fieldObj.enumMap[data[fieldObj.name]]:value,value},SYSTEM_ENUM(field,data){let{name:name}=field||{},value=data[name],fieldObj=field.field;return value=value?fieldObj.enumMap[data[fieldObj.name]]:value,value},MULTI_ENUM(field,data){let{name:name,enumMap:enumMap}=field.field||{},values=data[name]||[],valueStr=values.reduce(((accStr,value)=>{let str=enumMap[value]||"";return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(accStr)?`${str}`:`${accStr}, ${str}`}),"");return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(valueStr)?"---":valueStr},BOOLEAN(field,data){let{name:name}=field||{},value=data[name]?field.trueVal||"Yes":field.falseVal||"No";return value},MULTI_LOOKUP(field,data){let{name:name}=field,value=data[name]||[],lookupRecordNames=(value||[]).map((currRecord=>currRecord.displayName||currRecord.name||currRecord.subject));return lookupRecordNames.length>2?`${lookupRecordNames.slice(0,2).join(", ")} +${Math.abs(lookupRecordNames.length-2)}`:(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(lookupRecordNames)?"---":`${lookupRecordNames.join(", ")}`},OTHERS(field,data){let{name:name}=field||{};if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isObject */.Kn)(data[name]))return data[name];{let{name:name}=data[name]||{};if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(name))return name;data[name]}}},DISPLAY_TYPE_HASH={DURATION(field,record){const h=this.$createElement;let{name:name}=field,value=record[name]||[];return h("div",[(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)||"---"===value?"---":getFormattedDuration$2(value,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(field.unit)?"s":field.unit)])},URL_FIELD(field,record){const h=this.$createElement;let{name:name}=field||{};if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(record[name]))return"---";{let{name:displayName,href:href,target:target}=record[name]||{},value=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(displayName)?href:displayName;return h(element_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip,{attrs:{effect:"dark",content:value,placement:"bottom-start"}},[h("a",{attrs:{rel:"nofollow",referrerpolicy:"no-referrer",href:href,target:target},class:"url-field-display truncate-text"},[h("span",{class:"textoverflow-ellipsis"},[value])])])}},TIME(field,record){let{name:name}=field||{};return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(record[name])?"---":formatTime(record[name])},OTHERS(field,record){const h=this.$createElement;return h("div",{class:"truncate-text"},[this.getColumnDisplayValue(field,record)])}};var script$h={props:["viewDetail","records","moduleName","redirectToOverview","columnConfig","slotList","hideListSelect","customButtonList","canShowCustomButton","refreshList","metaInfo"],computed:{viewColumns(){let columns=[],{viewDetail:viewDetail}=this,{fields:viewDetailFields=[]}=viewDetail;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(viewDetail)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(viewDetailFields)||(columns=viewDetailFields.map((viewField=>{let{field:field,fieldName:fieldName}=viewField||{};field=field||{};let name=field.name||fieldName,fieldId=field.fieldId,defaultColumnName=viewDetail.defaultModuleFields&&viewDetail.defaultModuleFields[viewField.name]?viewDetail.defaultModuleFields[viewField.name].columnDisplayName:null,displayName=viewField.columnDisplayName||defaultColumnName||field.displayName;return viewField={...viewField,name:name,fieldId:fieldId,displayName:displayName},viewField})));let{columnConfig:columnConfig}=this,{fixedSelectableColumns:fixedSelectableColumns}=columnConfig||{};return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(columns)?[]:columns.filter((column=>!(fixedSelectableColumns||[]).includes(column.name)))},customFieldValueSlots(){let{slotList:slotList}=this;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(slotList)?[]:slotList.filter((slotObj=>!slotObj.isActionColumn))},actionColumnSlots(){let{slotList:slotList}=this;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(slotList)?[]:slotList.filter((slotObj=>slotObj.isActionColumn))},hardCodedSlots(){let{slotList:slotList}=this;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(slotList)?[]:slotList.filter((slotObj=>slotObj.isHardcodedColumn))}},methods:{
// field type checks
isDecimalField(field){let{dataTypeEnum:dataTypeEnum}=field.field||{};return field.field&&"DECIMAL"===dataTypeEnum},isFixedColumn(name){let{columnConfig:{fixedColumns:fixedColumns}={}}=this;return(fixedColumns||[]).includes(name)},
// column display related methods
getColumnHeaderLabel(column){let{displayName:displayName,field:field}=column;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(field)&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(field.unit)){let{unit:unit}=field;return`${displayName} (${unit})`}return displayName},getColumnDisplayValue(field,record){let value,{parentField:parentField}=field,fieldObj=field.field||field,{dataTypeEnum:dataTypeEnum}=fieldObj||{};
// first level lookup value, related handling
if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(parentField)){let{name:lookupModuleName}=parentField||{};(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(lookupModuleName)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(record[lookupModuleName])||(record=record[lookupModuleName])}return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(DATA_TYPE_VALUE_HASH$2[dataTypeEnum])?value=DATA_TYPE_VALUE_HASH$2["OTHERS"](field,record,this):(dataTypeEnum=dataTypeEnum||dataTypeEnum._name,value=DATA_TYPE_VALUE_HASH$2[dataTypeEnum](field,record,this)),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)?"---":value},getColumnDisplayComponent(field,record){let fieldObj=field.field||field,{displayType:displayType}=fieldObj||{},{criteriaCheckForSlot:criteriaCheckForSlot}=this||{},{canRenderSlot:canRenderSlot,slotName:slotName}=criteriaCheckForSlot(field);return canRenderSlot&&!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(this.$scopedSlots[slotName])?this.$scopedSlots[slotName]({record:record}):(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(this[displayType])?this["OTHERS"](field,record,this.getColumnDisplayValue):this[displayType](field,record,this.getColumnDisplayValue)},criteriaCheckForSlot(field){let{customFieldValueSlots:customFieldValueSlots}=this,canRenderSlot=!0,slotName="",fieldObj=field.field||field;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(customFieldValueSlots))for(let currSlot of customFieldValueSlots){let{criteria:criteria}=currSlot||{};if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(criteria)){let slotCriteria=JSON.parse(criteria);if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isObject */.Kn)(slotCriteria)&&Object.keys(slotCriteria).forEach((fieldName=>{canRenderSlot=fieldObj[fieldName]===slotCriteria[fieldName]})),canRenderSlot){slotName=criteria;break}}}return{canRenderSlot:canRenderSlot,slotName:slotName}},
// redirects and event emitters
selectionChange(selected){this.$emit("selection-change",selected)},select(selected){this.$emit("select",selected)},selectAll(selected){this.$emit("selectAll",selected)},toggleVisibility(id,val){let{$el:$el}=this.$refs[`custom-btn-${id}`]||{},{classList:classList}=$el||{};val?classList.remove("visibility-hide-actions"):classList.add("visibility-hide-actions")},toggleRowSelection(item,val){let{moduleName:moduleName}=this||{},ref=this.$refs[`${moduleName}-list`];ref.toggleRowSelection(item,val)},clearSelection(){let{moduleName:moduleName}=this||{},ref=this.$refs[`${moduleName}-list`];ref.clearSelection()},
// display type hash
...DISPLAY_TYPE_HASH},render(){const h=arguments[0];return h(element_ui__WEBPACK_IMPORTED_MODULE_2__.Table,{attrs:{data:this.records,height:"100%",fit:!0,"row-class-name":"no-hover"},ref:`${this.moduleName}-list`,style:"width: 100%;",class:"table-border",on:{"selection-change":this.selectionChange,select:this.select,"select-all":this.selectAll}},[!this.hideListSelect&&h(element_ui__WEBPACK_IMPORTED_MODULE_2__.TableColumn,{attrs:{fixed:!0,align:"left",type:"selection",width:"60"}}),this.hardCodedSlots.map(((slotObj,index)=>h(element_ui__WEBPACK_IMPORTED_MODULE_2__.TableColumn,_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_0__([{key:`${slotObj.name}-${index}`},{scopedSlots:{default:data=>this.$scopedSlots[slotObj.name]({record:data.row})}},{attrs:{...slotObj.columnAttrs||{}}}])))),this.viewColumns.map(((field,index)=>h(element_ui__WEBPACK_IMPORTED_MODULE_2__.TableColumn,_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_0__([{attrs:{fixed:this.isFixedColumn(field.name),prop:field.name,label:this.getColumnHeaderLabel(field),align:this.isDecimalField(field)?"right":"left","min-width":"230"},key:index},{scopedSlots:{default:data=>this.getColumnDisplayComponent(field,data.row)}},{attrs:{...field.columnAttrs||{}}}])))),this.actionColumnSlots.map(((slotObj,index)=>h(element_ui__WEBPACK_IMPORTED_MODULE_2__.TableColumn,_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_0__([{key:`${slotObj.name}-${index}`},{scopedSlots:{default:data=>this.$scopedSlots[slotObj.name]({record:data.row})}},{attrs:{...slotObj.columnAttrs||{}}}]))))])}};function normalizeComponent(template,style,script,scopeId,isFunctionalTemplate,moduleIdentifier/* server only */,shadowMode,createInjector,createInjectorSSR,createInjectorShadow){"boolean"!==typeof shadowMode&&(createInjectorSSR=createInjector,createInjector=shadowMode,shadowMode=!1);
// Vue.extend constructor export interop.
const options="function"===typeof script?script.options:script;
// render functions
let hook;if(template&&template.render&&(options.render=template.render,options.staticRenderFns=template.staticRenderFns,options._compiled=!0,
// functional template
isFunctionalTemplate&&(options.functional=!0)),
// scopedId
scopeId&&(options._scopeId=scopeId),moduleIdentifier?(
// server build
hook=function(context){
// 2.3 injection
context=context||
// cached call
this.$vnode&&this.$vnode.ssrContext||
// stateful
this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,// functional
// 2.2 with runInNewContext: true
context||"undefined"===typeof __VUE_SSR_CONTEXT__||(context=__VUE_SSR_CONTEXT__),
// inject component styles
style&&style.call(this,createInjectorSSR(context)),
// register component module identifier for async chunk inference
context&&context._registeredComponents&&context._registeredComponents.add(moduleIdentifier)},
// used by ssr in case component is cached and beforeCreate
// never gets called
options._ssrRegister=hook):style&&(hook=shadowMode?function(context){style.call(this,createInjectorShadow(context,this.$root.$options.shadowRoot))}:function(context){style.call(this,createInjector(context))}),hook)if(options.functional){
// register for functional component in vue file
const originalRender=options.render;options.render=function(h,context){return hook.call(context),originalRender(h,context)}}else{
// inject component registration as beforeCreate hook
const existing=options.beforeCreate;options.beforeCreate=existing?[].concat(existing,hook):[hook]}return script}const isOldIE="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function createInjector(context){return(id,style)=>addStyle(id,style)}let HEAD;const styles={};function addStyle(id,css){const group=isOldIE?css.media||"default":id,style=styles[group]||(styles[group]={ids:new Set,styles:[]});if(!style.ids.has(id)){style.ids.add(id);let code=css.source;if(css.map&&(
// https://developer.chrome.com/devtools/docs/javascript-debugging
// this makes source maps inside style tags work properly in Chrome
code+="\n/*# sourceURL="+css.map.sources[0]+" */",
// http://stackoverflow.com/a/26603875
code+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(css.map))))+" */"),style.element||(style.element=document.createElement("style"),style.element.type="text/css",css.media&&style.element.setAttribute("media",css.media),void 0===HEAD&&(HEAD=document.head||document.getElementsByTagName("head")[0]),HEAD.appendChild(style.element)),"styleSheet"in style.element)style.styles.push(code),style.element.styleSheet.cssText=style.styles.filter(Boolean).join("\n");else{const index=style.ids.size-1,textNode=document.createTextNode(code),nodes=style.element.childNodes;nodes[index]&&style.element.removeChild(nodes[index]),nodes.length?style.element.insertBefore(textNode,nodes[index]):style.element.appendChild(textNode)}}}
/* script */const __vue_script__$h=script$h,__vue_inject_styles__$h=function(inject){inject&&inject("data-v-4be6238c_0",{source:".url-field-display[data-v-4be6238c]{color:#46a2bf}.url-field-display[data-v-4be6238c]:hover{text-decoration:underline;text-underline-offset:3px;color:#46a2bf}",map:void 0,media:void 0})},__vue_scope_id__$h="data-v-4be6238c",__vue_module_identifier__$h=void 0,__vue_is_functional_template__$h=void 0,__vue_component__$h=normalizeComponent({},__vue_inject_styles__$h,__vue_script__$h,__vue_scope_id__$h,__vue_is_functional_template__$h,__vue_module_identifier__$h,!1,createInjector,void 0,void 0);
/* template */
/* style */
element_ui__WEBPACK_IMPORTED_MODULE_2__.Button;
/* script */
var script$f={props:{detailsLayout:{type:Array},record:{type:Object},labelPosition:{type:String,default:"vertical"},columns:{type:Number},getFormattedValue:{type:Function},sites:{type:[Object,Array]}},data(){return{fieldsArray:[],loading:!1,layout:[]}},computed:{isVertical(){return"vertical"===this.labelPosition}},created(){let{detailsLayout:detailsLayout}=this;this.layout=JSON.parse(JSON.stringify(detailsLayout)),this.fieldsArray=this.layout.map((obj=>obj.fields))},async mounted(){this.loading=!0,await this.deserialize(),this.loading=!1},methods:{customSectionStyle(section){let{colSpan:colSpan}=section;switch(colSpan){case 1:return"fields-container one-column";case 2:return"fields-container two-column";case 3:return"fields-container three-column";case 4:return"fields-container four-column"}},customSectionHeaderStyle(section){let{columns:columns}=this;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(columns))return"";let{colorCode:colorCode}=section;return`color:${colorCode}`},customFieldStyle(field){let{columns:columns}=this;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(columns))return"";let{colSpan:colSpan,colIndex:colIndex,rowIndex:rowIndex}=field,style=`grid-column:${colIndex}/ span ${colSpan};\n                   grid-row:${rowIndex}/span 1`;return style},getFormattedDisplayName(fieldObj={}){let{field:field,displayName:formFieldDisplayName}=fieldObj,{displayName:displayName}=field||null,fieldDisplayName=displayName;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(fieldDisplayName)?formFieldDisplayName:fieldDisplayName},deserialize(){let{fieldsArray:fieldsArray,record:record,sites:sites}=this,flattenedArray=[];fieldsArray.forEach((arr=>{flattenedArray=[...flattenedArray,...arr]})),flattenedArray.forEach((field=>{this.getFormattedValue(field,record,sites).then((value=>{this.$set(field,"displayValue",value)}))}))}}};
/* script */const __vue_script__$f=script$f;
/* template */var __vue_render__$f=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-field-details-container"},[_vm._t("actionButtons"),_vm._v(" "),_c("div",{staticClass:"sections-container"},_vm._l(_vm.layout,(function(section){return _c("div",{key:section.name},[section.name?_c("header",{style:_vm.customSectionHeaderStyle(section)},[_vm._v("\n        "+_vm._s(section.name)+"\n      ")]):_vm._e(),_vm._v(" "),_c("div",{class:_vm.customSectionStyle(section)},_vm._l(section.fields,(function(field){return _c("div",{key:field.id,style:_vm.customFieldStyle(field)},[_vm.isVertical?_c("div",{staticClass:"vertical-label"},[_c("span",{staticClass:"heading-label"},[_vm._v(_vm._s(_vm.getFormattedDisplayName(field)))]),_vm._v(" "),_vm.loading?_c("span",{staticClass:"lines loading-shimmer"}):_c("span",{staticClass:"field-value-container"},[_vm._v(_vm._s(field.displayValue))])]):_c("div",{staticClass:"horizontal-label"},[_c("span",{staticClass:"heading-label"},[_vm._v("\n              "+_vm._s(_vm.getFormattedDisplayName(field)))]),_vm._v(" "),_vm.loading?_c("span",{staticClass:"lines loading-shimmer"}):_c("span",{staticClass:"field-value-container"},[_vm._v(_vm._s(field.displayValue))])])])})),0),_vm._v(" "),_c("div",{staticClass:"divider"})])})),0)],2)},__vue_staticRenderFns__$f=[];
/* style */
const __vue_inject_styles__$f=function(inject){inject&&inject("data-v-6b758285_0",{source:".f-field-details-container{height:100%;width:100%;padding:20px}.sections-container{display:flex;flex-direction:column}.sections-container .loading-shimmer{background:#f6f7f8;background-image:linear-gradient(to right,#f6f7f8 0,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-repeat:no-repeat;background-size:800px 104px;display:inline-block;position:relative;animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:shimmer;animation-timing-function:linear}.sections-container .lines{height:20px;width:100px}@keyframes shimmer{0%{background-position:-500px 0}100%{background-position:500px 0}}.sections-container header{color:#324056;font-size:16px;margin-bottom:15px;font-weight:bolder}.sections-container .fields-container{display:grid;grid-auto-flow:row;font-size:14px;color:#324056;grid-row-gap:24px}.sections-container .one-column{grid-template-columns:1fr}.sections-container .two-column{grid-template-columns:repeat(2,1fr)}.sections-container .three-column{grid-template-columns:repeat(3,1fr)}.sections-container .four-column{grid-template-columns:repeat(4,1fr)}.sections-container .vertical-label{display:flex;flex-direction:column;gap:5px}.sections-container .heading-label{color:#324056;font-size:13px;font-weight:500}.sections-container .horizontal-label{display:flex;padding:20px 0}.sections-container .field-value-container{font-size:13px;font-weight:400;color:#324056;padding:0}.sections-container .horizontal-label>*{flex:0 1 50%}.sections-container .divider{width:100%;margin:10px 0;border:1px dashed #c7c7c7}",map:void 0,media:void 0})},__vue_scope_id__$f=void 0,__vue_module_identifier__$f=void 0,__vue_is_functional_template__$f=!1,__vue_component__$f=normalizeComponent({render:__vue_render__$f,staticRenderFns:__vue_staticRenderFns__$f},__vue_inject_styles__$f,__vue_script__$f,__vue_scope_id__$f,__vue_is_functional_template__$f,__vue_module_identifier__$f,!1,createInjector,void 0,void 0);
/* scoped */
var script$e={props:["currentPage","perPage","total","hideToggle"],data(){return{from:0,to:0,page:1}},mounted(){this.init()},watch:{total(){this.init()},currentPage(val){val!==this.page&&this.init()}},methods:{init(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;let to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,
// Update currentPage value
this.$emit("update:currentPage",this.page)},prev(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,
// Update currentPage value
this.$emit("update:currentPage",this.page)}}};
/* script */const __vue_script__$e=script$e;
/* template */var __vue_render__$e=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.total>0?_c("div",{staticClass:"f-ui-widget-pagination"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" "),_vm.hideToggle?_vm._e():[_c("span",{staticClass:"pl-1 pr-3"},[_vm._v("of "+_vm._s(_vm.total))]),_vm._v(" "),_c("span",{staticClass:"el-icon-arrow-left arrow-icons cursor-pointer",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_vm._v(" "),_c("span",{staticClass:"el-icon-arrow-right arrow-icons cursor-pointer",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()},__vue_staticRenderFns__$e=[];
/* style */
const __vue_inject_styles__$e=function(inject){inject&&inject("data-v-dec3861c_0",{source:".f-ui-widget-pagination{display:flex;align-items:center;font-size:12px;font-weight:500;font-style:normal;letter-spacing:1px;color:#50506c}.f-ui-widget-pagination .arrow-icons{font-size:15px}.f-ui-widget-pagination .disable{opacity:.5;cursor:not-allowed}.f-ui-widget-pagination .el-icon-arrow-left{padding:4px 3px;border-radius:4px;border:1px solid transparent}.f-ui-widget-pagination .el-icon-arrow-left:hover{color:#615e88;background:#f5f6f8;border:1px solid #dae0e8}.f-ui-widget-pagination .el-icon-arrow-right{padding:4px 3px;border-radius:4px;border:1px solid transparent}.f-ui-widget-pagination .el-icon-arrow-right:hover{color:#615e88;background:#f5f6f8;border:1px solid #dae0e8}",map:void 0,media:void 0})},__vue_scope_id__$e=void 0,__vue_module_identifier__$e=void 0,__vue_is_functional_template__$e=!1,__vue_component__$e=normalizeComponent({render:__vue_render__$e,staticRenderFns:__vue_staticRenderFns__$e},__vue_inject_styles__$e,__vue_script__$e,__vue_scope_id__$e,__vue_is_functional_template__$e,__vue_module_identifier__$e,!1,createInjector,void 0,void 0);
/* scoped */
var script$d={name:"spinner",props:["show","size","colour"],computed:{spinnerSize(){return this.size?this.size+"px":"50px"},strokeColor(){return this.colour?this.colour:"#fd4b92"}}};
/* script */const __vue_script__$d=script$d;
/* template */var __vue_render__$d=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},__vue_staticRenderFns__$d=[];
/* style */
const __vue_inject_styles__$d=function(inject){inject&&inject("data-v-3994ea33_0",{source:".spinner[data-v-3994ea33]{transition:opacity .15s ease;animation:rotator-data-v-3994ea33 1.4s linear infinite;animation-play-state:paused}.spinner.show[data-v-3994ea33]{animation-play-state:running}.spinner.v-enter[data-v-3994ea33],.spinner.v-leave-active[data-v-3994ea33]{opacity:0}.spinner.v-enter-active[data-v-3994ea33],.spinner.v-leave[data-v-3994ea33]{opacity:1}.spinner .path[data-v-3994ea33]{stroke-dasharray:126;stroke-dashoffset:0;transform-origin:center;animation:dash-data-v-3994ea33 1.4s ease-in-out infinite}@-moz-keyframes rotator-data-v-3994ea33{0%{transform:scale(.5) rotate(0)}100%{transform:scale(.5) rotate(270deg)}}@-webkit-keyframes rotator-data-v-3994ea33{0%{transform:scale(.5) rotate(0)}100%{transform:scale(.5) rotate(270deg)}}@-o-keyframes rotator-data-v-3994ea33{0%{transform:scale(.5) rotate(0)}100%{transform:scale(.5) rotate(270deg)}}@keyframes rotator-data-v-3994ea33{0%{transform:scale(.5) rotate(0)}100%{transform:scale(.5) rotate(270deg)}}@-moz-keyframes dash-data-v-3994ea33{0%{stroke-dashoffset:126}50%{stroke-dashoffset:63;transform:rotate(135deg)}100%{stroke-dashoffset:126;transform:rotate(450deg)}}@-webkit-keyframes dash-data-v-3994ea33{0%{stroke-dashoffset:126}50%{stroke-dashoffset:63;transform:rotate(135deg)}100%{stroke-dashoffset:126;transform:rotate(450deg)}}@-o-keyframes dash-data-v-3994ea33{0%{stroke-dashoffset:126}50%{stroke-dashoffset:63;transform:rotate(135deg)}100%{stroke-dashoffset:126;transform:rotate(450deg)}}@keyframes dash-data-v-3994ea33{0%{stroke-dashoffset:126}50%{stroke-dashoffset:63;transform:rotate(135deg)}100%{stroke-dashoffset:126;transform:rotate(450deg)}}",map:void 0,media:void 0})},__vue_scope_id__$d="data-v-3994ea33",__vue_module_identifier__$d=void 0,__vue_is_functional_template__$d=!1,__vue_component__$d=normalizeComponent({render:__vue_render__$d,staticRenderFns:__vue_staticRenderFns__$d},__vue_inject_styles__$d,__vue_script__$d,__vue_scope_id__$d,__vue_is_functional_template__$d,__vue_module_identifier__$d,!1,createInjector,void 0,void 0);
/* scoped */
var script$c={};
/* script */const __vue_script__$c=script$c;
/* template */var __vue_render__$c=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("svg",{attrs:{width:"87",height:"66",viewBox:"0 0 87 66",xmlns:"http://www.w3.org/2000/svg"}},[_c("g",{attrs:{transform:"translate(0 .87)",fill:"none","fill-rule":"evenodd"}},[_c("path",{attrs:{stroke:"#7176C4",fill:"#FFF","stroke-linecap":"round","stroke-linejoin":"round",d:"M76.196 57.682l-2.284-3.27 5.511-3.86 5.002 7.144"}}),_vm._v(" "),_c("path",{attrs:{fill:"#DBDBF3",d:"M75.243 54.064l3.99-2.793 4.646 6.636-5.915.044z"}}),_vm._v(" "),_c("path",{attrs:{fill:"#FFF",d:"M77.846 52.252l.926-.649 3.96 5.657-.925.648zM76.773 52.998l.819-.573 3.461 4.943-.819.574z"}}),_vm._v(" "),_c("path",{attrs:{stroke:"#7176C4","stroke-linecap":"round","stroke-linejoin":"round",d:"M.5 57.682h85.874M54.688 64.317h10.86M21.326 64.317h24.253"}}),_vm._v(" "),_c("path",{attrs:{stroke:"#FFF","stroke-linecap":"round","stroke-linejoin":"round",d:"M57.377 33.73h0M68.252 33.73h0"}}),_vm._v(" "),_c("path",{attrs:{stroke:"#7176C4","stroke-linecap":"round","stroke-linejoin":"round",d:"M25.525 57.111V.5h35.062l7.666 7.725v48.887"}}),_vm._v(" "),_c("path",{attrs:{stroke:"#7176C4","stroke-linecap":"round","stroke-linejoin":"round",d:"M60.682.5l7.571 7.57h-7.57z"}}),_vm._v(" "),_c("path",{attrs:{fill:"#DBDBF3",d:"M67.806 15.954l-7.57-7.57h7.57zM21.507 6.16h3.509v50.952h-3.509z"}}),_vm._v(" "),_c("path",{attrs:{stroke:"#7176C4","stroke-linecap":"round","stroke-linejoin":"round",d:"M7.482 57.16v-51h18.043"}}),_vm._v(" "),_c("g",{attrs:{stroke:"#BCBCE2","stroke-linecap":"round","stroke-linejoin":"round"}},[_c("path",{attrs:{d:"M72.705 22.132a18.131 18.131 0 018.923 9.319M73.27 19.113c.4.2.795.413 1.182.638m1.443.912a21.96 21.96 0 013.622 3.122"}})]),_vm._v(" "),_c("path",{attrs:{fill:"#AAAAE2",opacity:".5",d:"M33.001 35.954h28.027V34.13H33.001zM33.001 30.954h28.027V29.13H33.001z"}}),_vm._v(" "),_c("path",{attrs:{"fill-opacity":".5",fill:"#DBDBF3",d:"M33.001 40.954h28.027V39.13H33.001zM33 45.977h14.014v-1.823H33z"}}),_vm._v(" "),_c("path",{attrs:{fill:"#AAAAE2",opacity:".5",d:"M33.001 9.954h25.34V8.13h-25.34z"}}),_vm._v(" "),_c("path",{attrs:{"fill-opacity":".5",fill:"#DBDBF3",d:"M33.001 14.954h25.34V13.13h-25.34zM33 19.977h14.014v-1.823H33z"}}),_vm._v(" "),_c("path",{attrs:{fill:"#AAAAE2",opacity:".5",d:"M12 14.954h9.551V13.13h-9.55z"}}),_vm._v(" "),_c("path",{attrs:{"fill-opacity":".5",fill:"#DBDBF3",d:"M12 19.954h9.551V18.13h-9.55z"}}),_vm._v(" "),_c("path",{attrs:{stroke:"#7176C4",fill:"#FFF","stroke-linecap":"round","stroke-linejoin":"round",d:"M69.658 45.844l3.277-2.294 5.725 8.176-3.276 2.295z"}}),_vm._v(" "),_c("path",{attrs:{"fill-opacity":".3",fill:"#7176C4",d:"M70.218 47.319l3.898-2.73 1.98 2.83-3.897 2.728z"}}),_vm._v(" "),_c("path",{attrs:{d:"M64.459 52.077c1.146 0 2.257-.148 3.316-.425.088-25.227.088-24.887.088-25.227a13.067 13.067 0 00-3.404-.448c-7.208 0-13.05 5.842-13.05 13.05 0 7.207 5.842 13.05 13.05 13.05z","fill-opacity":".3",fill:"#BCBCE2"}}),_vm._v(" "),_c("circle",{attrs:{stroke:"#7176C4",fill:"#FFF","stroke-linecap":"round","stroke-linejoin":"round",cx:"65.99",cy:"37.431",r:"11.302"}}),_vm._v(" "),_c("path",{attrs:{"fill-opacity":".5",fill:"#DBDBF3",d:"M12 24.977h7.112v-1.823H12z"}}),_vm._v(" "),_c("circle",{attrs:{fill:"#DBDBF3",cx:"66.262",cy:"37.704",r:"10.489"}}),_vm._v(" "),_c("circle",{attrs:{fill:"#FFF",cx:"65.99",cy:"37.431",r:"8.127"}}),_vm._v(" "),_c("path",{attrs:{d:"M74.117 37.431c0-.687-.086-1.355-.246-1.992m-.685-1.788a8.127 8.127 0 10-7.196 11.907h0M73.157 46.63l1.29 1.815m1.013 1.424l.253.357",stroke:"#7176C4",fill:"#FFF","stroke-linecap":"round","stroke-linejoin":"round"}}),_vm._v(" "),_c("circle",{attrs:{fill:"#EDEDF9",cx:"66.829",cy:"33.959",r:"2.829"}}),_vm._v(" "),_c("circle",{attrs:{fill:"#EDEDF9",cx:"70.75",cy:"37.959",r:"1.171"}})])])},__vue_staticRenderFns__$c=[];
/* style */
const __vue_inject_styles__$c=void 0,__vue_scope_id__$c=void 0,__vue_module_identifier__$c=void 0,__vue_is_functional_template__$c=!1,__vue_component__$c=normalizeComponent({render:__vue_render__$c,staticRenderFns:__vue_staticRenderFns__$c},__vue_inject_styles__$c,__vue_script__$c,__vue_scope_id__$c,__vue_is_functional_template__$c,__vue_module_identifier__$c,!1,void 0,void 0,void 0);
/* scoped */
(0,_facilio_icons_dist_loader__WEBPACK_IMPORTED_MODULE_5__/* .defineCustomElements */.q4)(window);const COLUMN_STYLE_HASH$1={columnWidth(value){return{width:`${value}px`}},"text-wrap"(value){return"wrap"===value?{"word-wrap":"break-word","white-space":"normal"}:{"text-overflow":"ellipsis"}}};element_ui__WEBPACK_IMPORTED_MODULE_2__.Table,element_ui__WEBPACK_IMPORTED_MODULE_2__.TableColumn,Boolean,Boolean,Boolean;
/* script */
/* style */
const DATA_TYPE_VALUE_HASH$1={LOOKUP(field,data){let{name:fieldName}=field.field||{},{primaryValue:primaryValue,name:name,displayName:displayName,subject:subject}=data[fieldName]||{},value=displayName||name||subject;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(primaryValue)?value:primaryValue},FILE(field,data){let{name:name}=field.field||{},filename=data[`${name}FileName`];return filename},DATE(field,data,config){let{name:name}=field.field||{},value=data[name];return value&&-1!==value?formatDate$1(value,!0,!1,config):""},DATE_TIME(field,data,config){let{name:name}=field.field||{},value=data[name];return value&&-1!==value?formatDate$1(value,!1,!1,config):""},ENUM(field,data){let fieldObj=field.field||{},{name:name,enumMap:enumMap}=fieldObj||{},value=data[name];return value=value?enumMap[value]:value,value},SYSTEM_ENUM(field,data){let fieldObj=field.field||{},{name:name,enumMap:enumMap}=fieldObj||{},value=data[name];return value=value?enumMap[value]:value,value},MULTI_ENUM(field,data){let{name:name,enumMap:enumMap}=field.field||{},values=data[name]||[],valueStr=values.reduce(((accStr,value)=>{let str=enumMap[value]||"";return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(accStr)?`${str}`:`${accStr}, ${str}`}),"");return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(valueStr)?"---":valueStr},BOOLEAN(field,data){
// destructure name from field.field
let{name:name}=field.field||{},{field:fieldObj}=field||{},trueValue="Yes",falseValue="No",{trueVal:trueVal,falseVal:falseVal}=fieldObj;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(trueVal)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(falseVal)||(trueValue=trueVal,falseValue=falseVal);let value=data[name]?trueValue:falseValue;return value},MULTI_LOOKUP(field,data){let{name:name}=field.field||{},value=data[name]||[],lookupRecordNames=(value||[]).map((currRecord=>currRecord.displayName||currRecord.name||currRecord.subject));return lookupRecordNames.length>2?`${lookupRecordNames.slice(0,2).join(", ")} +${Math.abs(lookupRecordNames.length-2)}`:(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(lookupRecordNames)?"---":`${lookupRecordNames.join(", ")}`},DURATION(field,record){let{name:name}=field.field||{},value=record[name]||[];if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)||"---"===value)return"---";{let{unit:unit}=field||{};return unit=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(unit)?"s":unit,getFormattedDuration$1(value,unit)}},OTHERS(field,data){let{name:name}=field.field||{};
// let { name } = field || {}
if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isObject */.Kn)(data[name]))return data[name];{let{name:name}=data[name]||{};if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(name))return name;data[name]}}},COLUMN_STYLE_HASH={columnWidth(value){return{width:`${value}px`}},"text-wrap"(value){return"wrap"===value?{"word-wrap":"break-word","white-space":"normal"}:{"text-overflow":"ellipsis"}}};
/* scoped */function formatDate$1(date,excludeTime,onlyTime,config){let{timeformat:timeformat,dateformat:dateformat,timezone:timezone}=config;return onlyTime?moment__WEBPACK_IMPORTED_MODULE_6__(date).tz(timezone).format(timeformat):excludeTime?moment__WEBPACK_IMPORTED_MODULE_6__(date).tz(timezone).format(dateformat):moment__WEBPACK_IMPORTED_MODULE_6__(date).tz(timezone).format(dateformat+" "+timeformat)}function getFormattedDuration$1(value,format="milliseconds",skipDurationCreation=!1){if(!value)return"00:00 Hrs";let duration;duration=skipDurationCreation?value:moment__WEBPACK_IMPORTED_MODULE_6__.duration(parseInt(value,10),format);let days=parseInt(duration.asDays(),10),hours=duration.hours(),minutes=duration.minutes(),seconds=duration.seconds();return days>0?1===days?hours?`${days} Day ${hours} Hrs`:`${days} Day`:hours?`${days} Days ${hours} Hrs`:`${days} Days`:hours>0?minutes?`${hours} Hrs ${minutes} Mins`:`${hours} Hrs`:minutes>0?seconds?`${minutes} Mins ${seconds} Secs`:`${minutes} Mins`:`${seconds} Secs`}var script$a={components:{Table:element_ui__WEBPACK_IMPORTED_MODULE_2__.Table,TableColumn:element_ui__WEBPACK_IMPORTED_MODULE_2__.TableColumn,FieldDetails:__vue_component__$f,ReadingEmpty:__vue_component__$c},props:{config:{type:Object,required:!0},records:{type:Array,default:null},viewFields:{type:Array},siteList:{type:Object},singleRecordId:{type:Number,default:-1}},data(){return{tableData:[],pageNumber:1,totalRecords:null,loading:!0,editRecordId:null,showEmptyState:!1}},watch:{records:{handler(){this.init()},immediate:!0}},methods:{getColumnDisplayValue(field,record){let value,{config:config}=this,{parentField:parentField}=field,fieldObj=field.field||field,{dataTypeEnum:dataTypeEnum,displayType:displayType}=fieldObj||{};
// first level lookup value, related handling
if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(parentField)){let{name:lookupModuleName}=parentField||{};(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(lookupModuleName)||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(record[lookupModuleName])||(record=record[lookupModuleName])}
// Column display value is categorized based on the data type property, except for siteId
// which is treated as a special field for all the modules.
return"siteId"===field.name?value=this.getSiteName(record[field.name]):"DURATION"===displayType?value=DATA_TYPE_VALUE_HASH$1["DURATION"](field,record,config):(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(DATA_TYPE_VALUE_HASH$1[dataTypeEnum])?value=DATA_TYPE_VALUE_HASH$1["OTHERS"](field,record,config):(dataTypeEnum=dataTypeEnum||dataTypeEnum._name,value=DATA_TYPE_VALUE_HASH$1[dataTypeEnum](field,record,config)),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)?"---":value},getSiteName(id){let{siteList:siteList}=this,value=siteList[id]||"---";return value},expandEvent(row,expanded){this.$emit("toggleAccordion",expanded)},
// to check if checkbox is disabled or enabled
singleSelection(row){let{config:config,singleRecordId:singleRecordId}=this,{singleSelect:singleSelect,checkSelection:checkSelection}=config;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isFunction */.mf)(checkSelection))return checkSelection(row.record);if(!singleSelect)return!0;{let{record:record}=row,{id:id}=record||{};if(-1!==singleRecordId&&singleRecordId==id)return!0;if(-1!==singleRecordId&&singleRecordId!=id)return!1;if(-1==singleRecordId)return!0}},clearSelectionHandler(){this.$refs.table.clearSelection()},
// handles selection when clicking checkbox in row
handleSelectionChange(selected){this.$emit("selection-change",selected)},handleSelectAll(selected){let{config:config}=this,{singleSelect:singleSelect}=config||{};if(singleSelect)return this.$refs.table.clearSelection(),void(this.singleRecordId=-1);this.$emit("select-all",selected)},handleSelect(selected){this.$emit("select",selected);let{config:config}=this,{singleSelect:singleSelect}=config||{};if(singleSelect){if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(selected))return void(this.singleRecordId=-1);let{record:record}=selected[0],{id:id}=record||{};this.singleRecordId=id}},cancelEdit(){this.editRecordId=null},checkEdit(row){let{editRecordId:editRecordId}=this,id=dlv__WEBPACK_IMPORTED_MODULE_4__(row,"record.id");return editRecordId===id&&(this.$refs.table.toggleRowExpansion(row,!0),!0)},
// custom styling for column field , if any customisation is present
getColumnStyle(field){let{customization:customization}=field||{},style={};return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(customization)||(customization=JSON.parse(customization)||{},Object.entries(customization).forEach((([key,value])=>{(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(COLUMN_STYLE_HASH[key])||(style={...style,...COLUMN_STYLE_HASH[key](value)})}))),style},
// gets the formatted display name for the header
getFormattedDisplayName(fieldObj={}){let{field:field,displayName:formFieldDisplayName,columnDisplayName:columnDisplayName}=fieldObj,fieldDisplayName=columnDisplayName||field?.displayName||null;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(fieldDisplayName)?formFieldDisplayName:fieldDisplayName},async init(){this.tableData=[],this.loading=!0,this.showEmptyState=!1;let{records:records}=this;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(records))return this.showEmptyState=!0,void(this.loading=!1);let tableData=await this.generateTableData(records);this.tableData=tableData,this.loading=!1},async refreshList(){await this.init()},
// generates the table data
async generateTableData(data){let{viewFields:viewFields}=this,tableData=data.map((record=>{let recordObj={};for(let field of viewFields){let label=this.getFormattedDisplayName(field),value=this.getColumnDisplayValue(field,record);recordObj[label]=value}return recordObj["record"]=record,recordObj})),table=await Promise.all(tableData);return table},
// when a row is expanded, this function collapses the rows if accordion prop is true
expandSelect(row,expandedRows){this.$emit("toggleAccordion",expandedRows);
// let { config } = this
// let { accordion } = config || {}
// if (!accordion) {
//   return
// }
let recordId=dlv__WEBPACK_IMPORTED_MODULE_4__(row,"record.id");expandedRows.length>1&&expandedRows.forEach((expandedRow=>{let expandedRecordId=dlv__WEBPACK_IMPORTED_MODULE_4__(expandedRow,"record.id");expandedRecordId!==recordId&&this.$refs.table.toggleRowExpansion(expandedRow,!1)}))},expandRow(row){let{config:config}=this,{expand:expand}=config||{};expand?(this.editRecordId=dlv__WEBPACK_IMPORTED_MODULE_4__(row,"record.id"),this.$refs.table.toggleRowExpansion(row,!0),this.$emit("edit",row.record)):this.$emit("edit",row.record)},setEdit(row){this.editRecordId=dlv__WEBPACK_IMPORTED_MODULE_4__(row,"record.id"),this.$refs.table.toggleRowExpansion(row,!0)}}};
/* script */const __vue_script__$a=script$a;
/* template */var __vue_render__$a=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"line-items-container"},[_vm.loading?_vm._e():_c("Table",{ref:"table",staticClass:"line-item-component-table",attrs:{data:_vm.tableData,height:"100%"},on:{"expand-change":_vm.expandSelect,"selection-change":_vm.handleSelectionChange,"select-all":_vm.handleSelectAll,select:_vm.handleSelect}},[_vm._v("\n    >\n    "),_c("template",{slot:"empty"},[_vm._t("empty-state",(function(){return[_vm.showEmptyState?_c("div",{staticClass:"empty-state"},[_c("ReadingEmpty",{staticStyle:{height:"100px",width:"100px"}}),_vm._v(" "),_c("p",{staticClass:"description"},[_vm._v("No Records Found")])],1):_vm._e()]}))],2),_vm._v(" "),_vm.config.expand?[_c("TableColumn",{attrs:{type:"expand"},scopedSlots:_vm._u([{key:"default",fn:function(ref){var row=ref.row;return[_vm._t("accordion",null,{row:row})]}}],null,!0)})]:_vm._e(),_vm._v(" "),_vm.config.isSelectionEnabled?_c("TableColumn",{attrs:{selectable:_vm.singleSelection,type:"selection",width:"55"}}):_vm._e(),_vm._v(" "),_vm.config.isIndexEnabled?_c("TableColumn",{staticClass:"index",attrs:{type:"index",index:_vm.config.indexMethod,width:"55"}}):_vm._e(),_vm._v(" "),_vm._l(_vm.viewFields,(function(field,index){return _c("TableColumn",{key:field.field.id+"-"+index,style:_vm.getColumnStyle(field),attrs:{prop:_vm.getFormattedDisplayName(field),label:_vm.getFormattedDisplayName(field),"min-width":200,"show-overflow-tooltip":""},scopedSlots:_vm._u([{key:"default",fn:function(ref){var row=ref.row;return[field.field.mainField?[_c("span",{class:[_vm.config.canEnableMainFieldAction?"mainfield":""],on:{click:function($event){_vm.config.canEnableMainFieldAction&&_vm.$emit("mainField",row.record)}}},[_vm._v(_vm._s(row[_vm.getFormattedDisplayName(field)]))])]:[_c("div",[_vm._v("\n            "+_vm._s(row[_vm.getFormattedDisplayName(field)])+"\n          ")])]]}}],null,!0)})})),_vm._v(" "),_c("TableColumn",{attrs:{"min-width":200},scopedSlots:_vm._u([{key:"default",fn:function(ref){var row=ref.row;return[_vm._t("action-buttons",null,{row:row})]}}],null,!0)})],2)],1)},__vue_staticRenderFns__$a=[];
/* style */
const __vue_inject_styles__$a=function(inject){inject&&inject("data-v-e899d6b6_0",{source:".line-items-container{box-sizing:border-box;width:100%;height:100%;background:#fff;margin:0 auto;position:relative}.line-items-container i{cursor:pointer}.line-items-container .empty-state{width:100%;height:200px;display:flex;justify-content:center;align-items:center;flex-direction:column}.line-items-container .empty-state .description{font-size:16px;color:#324056;font-weight:500;line-height:1.5;text-align:center}.line-items-container .line-item-component-table.el-table .cell{line-height:normal!important}.line-items-container .line-item-component-table{height:100%;overflow:scroll}.line-items-container .line-item-component-table .mainfield{color:#2b8bff}.line-items-container .line-item-component-table .mainfield:hover{text-decoration:underline}.line-items-container .line-item-component-table .edit-slot{min-height:200px;height:max-content;box-shadow:0 0 18px 0 rgba(0,0,0,.1);overflow:scroll}.line-items-container .line-item-component-table table th{background-color:#f7faff;height:44px;padding:10px;color:#324056;font-size:14px;font-weight:500;letter-spacing:.5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.line-items-container .line-item-component-table table th:first-child{padding-left:24px}.line-items-container .line-item-component-table .el-table__header thead th .cell{text-overflow:ellipsis;text-transform:none!important}.line-items-container .line-item-component-table table tr td{height:44px;padding:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:14px}.line-items-container .line-item-component-table table tr td div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.line-items-container .line-item-component-table table tr td:first-child{padding-left:24px}.line-items-container .line-item-component-table .el-tooltip{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.line-items-container .line-item-component-table tr .icons{display:flex;align-items:center;gap:20px}.line-items-container .line-item-component-table tr .icons .el-icon-edit{padding:4px 3px;border-radius:4px;border:1px solid transparent}.line-items-container .line-item-component-table tr .icons .el-icon-edit:hover{color:#615e88;background:#f5f6f8;border:1px solid #dae0e8}.line-items-container .line-item-component-table tr .icons .el-icon-delete-solid{padding:4px 3px;border-radius:4px;border:1px solid transparent}.line-items-container .line-item-component-table tr .icons .el-icon-delete-solid:hover{color:#615e88;background:#f5f6f8;border:1px solid #dae0e8}.line-items-container .line-item-component-table tr .icons i{font-size:16px;color:#324056}.line-items-container .line-item-component-table .details-container{display:flex;align-items:center;flex-flow:row wrap}.line-items-container .line-item-component-table .accordion-container{font-size:16px;color:#324056;padding-inline-start:25px}.line-items-container .line-item-component-table .details{display:flex;flex-direction:column;gap:5px;font-size:14px;margin-right:60px}.line-items-container .line-item-component-table .details span:first-child{color:#797b80}.line-items-container .line-item-component-table .details span{height:20px}.line-items-container .line-item-component-table .accordion-container{display:flex;flex-direction:column;gap:20px}.line-items-container .line-item-component-table .visibility-hide-actions{visibility:hidden}.line-items-container .line-item-component-table tr:hover .visibility-hide-actions{visibility:visible}",map:void 0,media:void 0})},__vue_scope_id__$a=void 0,__vue_module_identifier__$a=void 0,__vue_is_functional_template__$a=!1,__vue_component__$a=normalizeComponent({render:__vue_render__$a,staticRenderFns:__vue_staticRenderFns__$a},__vue_inject_styles__$a,__vue_script__$a,__vue_scope_id__$a,__vue_is_functional_template__$a,__vue_module_identifier__$a,!1,createInjector,void 0,void 0);
/* scoped */
var script$9={props:{field:{type:Object}},components:{Dropdown:element_ui__WEBPACK_IMPORTED_MODULE_2__.Dropdown,DropdownMenu:element_ui__WEBPACK_IMPORTED_MODULE_2__.DropdownMenu,DropdownItem:element_ui__WEBPACK_IMPORTED_MODULE_2__.DropdownItem},data(){return{lookups:[],popupList:[],popupIndexArray:[]}},mounted(){this.init()},computed:{popupLength(){let{popupList:popupList}=this;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(popupList)?"":`+${popupList.length}`}},methods:{init(){let{field:field}=this,{value:value}=field,lookupRecordNames=(value||[]).map((currRecord=>currRecord.displayName||currRecord.name||currRecord.subject));this.lookups=lookupRecordNames,(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(lookupRecordNames)||this.checkSize()},clickHandler(command){let{field:field}=this,{value:value}=field;this.$emit("lookupRedirect",value[command])},handleCommand(command){let{popupIndexArray:popupIndexArray,field:field}=this,{value:value}=field,index=popupIndexArray[command];this.$emit("lookupRedirect",value[index])},checkSize(){let clientWidth=this.$refs["lookup-list"].clientWidth,arr=[],font="13px Arial";for(let str of this.lookups){let canvas=document.createElement("canvas"),context=canvas.getContext("2d");context.font=font;let width=context.measureText(str+", ").width,formattedWidth=Math.ceil(width);arr.push(formattedWidth)}let summedArr=[];for(let i=0;i<arr.length;i++)summedArr[i]=0===i?arr[i]:summedArr[i-1]+arr[i];let popupArray=[];for(let i=0;i<summedArr.length;i++)summedArr[i]>=clientWidth&&popupArray.push(i);this.popupIndexArray=popupArray;let popupList=[];for(let i of popupArray)popupList.push(this.lookups[i]);this.popupList=popupList},redirect(index){let{field:field}=this,{value:value}=field;this.$emit("lookupRedirect",value[index])}}};
/* script */const __vue_script__$9=script$9;
/* template */var __vue_render__$9=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-field-multilookup"},[_c("div",{ref:"lookup-list",staticClass:"lookup-list"},[_vm._l(_vm.lookups,(function(lookup,index){return _c("span",{key:lookup+"-"+index,staticClass:"lookup-item",on:{click:function($event){return _vm.redirect(index)}}},[_c("span",{staticClass:"item"},[_vm._v(_vm._s(lookup))]),index!==_vm.lookups.length-1?_c("span",[_vm._v(",")]):_vm._e()])})),_vm._v(" "),0===_vm.lookups.length?_c("span",{staticStyle:{color:"#5c6470"}},[_vm._v("---")]):_vm._e()],2),_vm._v(" "),_c("div",[_c("Dropdown",{on:{command:_vm.handleCommand}},[_c("div",{staticClass:"el-dropdown-link"},[_vm._v(_vm._s(_vm.popupLength))]),_vm._v(" "),_c("DropdownMenu",{staticClass:"lookup-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.popupList,(function(item,index){return _c("DropdownItem",{key:item+"-"+index,attrs:{command:index}},[_vm._v(_vm._s(item))])})),1)],1)],1)])},__vue_staticRenderFns__$9=[];
/* style */
const __vue_inject_styles__$9=function(inject){inject&&inject("data-v-5bcd96ae_0",{source:".f-field-multilookup[data-v-5bcd96ae]{display:flex;align-items:center}.f-field-multilookup .lookup-list[data-v-5bcd96ae]{width:90%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#2b8bff}.f-field-multilookup .lookup-list .lookup-item[data-v-5bcd96ae]{color:#2b8bff;cursor:pointer}.f-field-multilookup .lookup-list .lookup-item .item[data-v-5bcd96ae]:hover{text-decoration:underline}.f-field-multilookup .el-dropdown-link[data-v-5bcd96ae]{cursor:pointer;color:#2b8bff;padding:4px}.f-field-multilookup .el-dropdown-link[data-v-5bcd96ae]:hover{background:#f2f2f2}.el-dropdown-menu.el-popper.lookup-dropdown li.el-dropdown-menu__item[data-v-5bcd96ae]{cursor:pointer;color:#2b8bff!important}",map:void 0,media:void 0})},__vue_scope_id__$9="data-v-5bcd96ae",__vue_module_identifier__$9=void 0,__vue_is_functional_template__$9=!1,__vue_component__$9=normalizeComponent({render:__vue_render__$9,staticRenderFns:__vue_staticRenderFns__$9},__vue_inject_styles__$9,__vue_script__$9,__vue_scope_id__$9,__vue_is_functional_template__$9,__vue_module_identifier__$9,!1,createInjector,void 0,void 0);
/* scoped */
var script$8={props:{field:{type:Object}},data(){return{link:""}},computed:{isLinkEmpty(){let{link:link}=this;return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(link)}},created(){this.init()},methods:{init(){let fileName=dlv__WEBPACK_IMPORTED_MODULE_4__(this,"field.value",null);this.link=fileName}}};
/* script */const __vue_script__$8=script$8;
/* template */var __vue_render__$8=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLinkEmpty?_c("span",{staticClass:"f-file-field",on:{click:function($event){return _vm.$emit("fileDownload",_vm.field)}}},[_vm._v(_vm._s(_vm.link))]):_c("span",[_vm._v(" --- ")])},__vue_staticRenderFns__$8=[];
/* style */
const __vue_inject_styles__$8=function(inject){inject&&inject("data-v-5d3bac65_0",{source:".f-file-field[data-v-5d3bac65]{color:#2b8bff;cursor:pointer;width:fit-content}.f-file-field[data-v-5d3bac65]:hover{text-decoration:underline}",map:void 0,media:void 0})},__vue_scope_id__$8="data-v-5d3bac65",__vue_module_identifier__$8=void 0,__vue_is_functional_template__$8=!1,__vue_component__$8=normalizeComponent({render:__vue_render__$8,staticRenderFns:__vue_staticRenderFns__$8},__vue_inject_styles__$8,__vue_script__$8,__vue_scope_id__$8,__vue_is_functional_template__$8,__vue_module_identifier__$8,!1,createInjector,void 0,void 0);
/* scoped */
var script$7={components:{Popover:element_ui__WEBPACK_IMPORTED_MODULE_2__.Popover},props:{field:{type:Object},config:{type:Object}},data(){return{currencyValue:"",baseValue:"",displaySymbol:"",content:""}},created(){this.init()},methods:{checkEmpty(value){return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)},init(){let{config:config,field:field}=this,{value:value}=field||{},{multiCurrency:multiCurrency}=config,{displaySymbol:baseSymbol,currencyCode:baseCode,multiCurrencyEnabled:multiCurrencyEnabled}=multiCurrency;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value))this.baseValue="---";else{let{displaySymbol:displaySymbol,currencyValue:currencyValue,baseCurrencyValue:baseCurrencyValue,exchangeRate:exchangeRate,currencyCode:currencyCode}=value||{};this.displaySymbol=displaySymbol;let content=`${baseSymbol} 1 = ${displaySymbol} ${exchangeRate}`;this.content=content,this.currencyValue=currencyValue;let baseValue="";multiCurrencyEnabled&&baseCode!==currencyCode&&(baseValue=`( ${baseSymbol} ${baseCurrencyValue} )`),this.baseValue=baseValue}},showInfoIcon(field){let{config:config}=this,{value:value}=field,{multiCurrency:multiCurrency}=config||{},{currencyCode:baseCode,multiCurrencyEnabled:multiCurrencyEnabled}=multiCurrency,{currencyCode:currencyCode}=value||{};return multiCurrencyEnabled&&baseCode!==currencyCode}}};
/* script */const __vue_script__$7=script$7;
/* template */var __vue_render__$7=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"currency-value-container"},[_c("span",[_vm._v(" "+_vm._s(_vm.displaySymbol+" "+_vm.currencyValue)+" "+_vm._s(_vm.baseValue)+" ")]),_vm._v(" "),"---"!==_vm.baseValue?[_vm.showInfoIcon(_vm.field)?_c("Popover",{attrs:{placement:"right",title:"Currency Rate",content:_vm.content,"open-delay":5,disabled:_vm.checkEmpty(_vm.baseValue),"popper-class":"currency-icon-position",width:"230",trigger:"click"}},[_c("template",{slot:"reference"},[_c("fc-icon",{staticClass:"pointer",attrs:{group:"action",name:"info",size:"16"}})],1)],2):_vm._e()]:_vm._e()],2)},__vue_staticRenderFns__$7=[];
/* style */
const __vue_inject_styles__$7=function(inject){inject&&inject("data-v-19bae0ed_0",{source:"span[data-v-19bae0ed]:has(.currency-icon-position){margin-bottom:-4px;cursor:pointer}.currency-value-container[data-v-19bae0ed]{display:flex;align-items:center;gap:4px}.currency-value-container>span[data-v-19bae0ed]:last-child{margin-bottom:-6px;cursor:pointer}",map:void 0,media:void 0})},__vue_scope_id__$7="data-v-19bae0ed",__vue_module_identifier__$7=void 0,__vue_is_functional_template__$7=!1,__vue_component__$7=normalizeComponent({render:__vue_render__$7,staticRenderFns:__vue_staticRenderFns__$7},__vue_inject_styles__$7,__vue_script__$7,__vue_scope_id__$7,__vue_is_functional_template__$7,__vue_module_identifier__$7,!1,createInjector,void 0,void 0),timeFormatHash={"24Hour":1,"12Hour":2},getFormattedDuration=(value,format="milliseconds",skipDurationCreation=!1)=>{if(!value)return"00:00 Hrs";let duration;duration=skipDurationCreation?value:moment__WEBPACK_IMPORTED_MODULE_6__.duration(parseInt(value,10),format);let days=parseInt(duration.asDays(),10),hours=duration.hours(),minutes=duration.minutes(),seconds=duration.seconds();return days>0?1===days?hours?`${days} Day ${hours} Hrs`:`${days} Day`:hours?`${days} Days ${hours} Hrs`:`${days} Days`:hours>0?minutes?`${hours} Hrs ${minutes} Mins`:`${hours} Hrs`:minutes>0?seconds?`${minutes} Mins ${seconds} Secs`:`${minutes} Mins`:`${seconds} Secs`},DATA_TYPE_VALUE_HASH={DURATION(field){let{value:value,options:options}=field;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)||"---"===value)return"---";{let{unit:unit}=options||{};return unit=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(unit)?"s":unit,getFormattedDuration(value,unit)}},LOOKUP(field){let{value:value}=field,{primaryValue:primaryValue,name:name,displayName:displayName,subject:subject}=value||{},lookupValue=displayName||name||subject;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(primaryValue)?lookupValue||"---":primaryValue},FILE(field){let{value:value}=field;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)?"---":value},DATE(field,config){
// need to test
let{value:value}=field||{};return value&&-1!==value?formatDate(value,!0,!1,config):"---"},DATE_TIME(field,config){let{value:value}=field||{};return value&&-1!==value?formatDate(value,!1,!1,config):"---"},ENUM(field){
// need to test
let{value:value,options:options}=field,finalValue=value?options[value]:value||"---";return finalValue},SYSTEM_ENUM(field,data){
// need to test
let{name:name}=field||{},value=data[name]||null,fieldObj=field.field;return value=value?fieldObj.enumMap[data[fieldObj.name]]:value||"---",value},MULTI_ENUM(field){
// need to test multi enum
let{value:value,options:options}=field||{},valueStr=(value||[]).reduce(((accStr,value)=>{let str=options[value]||"";return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(accStr)?`${str}`:`${accStr}, ${str}`}),"");return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(valueStr)?"---":valueStr},BOOLEAN(field){let finalValue,{options:options,value:value}=field||{};
//  need to test boolean field
return finalValue=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)?"---":value?options.trueVal||"Yes":options.falseVal||"No",finalValue},OTHERS(field){let{value:value}=field||{};if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isObject */.Kn)(value)){let{name:name}=value||{};return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(name)?"---":name}return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(value)?"---":value},DECIMAL(field){let{options:options={},value:value=null}=field,{unit:unit=""}=options;return value?`${value} ${unit}`:"---"},NUMBER(field){let{options:options={},value:value=null}=field,{unit:unit=""}=options;return value?`${value} ${unit}`:"---"},TIME(field,config){let{value:value}=field||{},formattedValue=getFormatedTime(value,config);return formattedValue||"---"}};
/* scoped */function formatDate(date,excludeTime,onlyTime,config){let{timeformat:timeformat,dateformat:dateformat,timezone:timezone}=config;return onlyTime?moment__WEBPACK_IMPORTED_MODULE_6__(date).tz(timezone).format(timeformat):excludeTime?moment__WEBPACK_IMPORTED_MODULE_6__(date).tz(timezone).format(dateformat):moment__WEBPACK_IMPORTED_MODULE_6__(date).tz(timezone).format(dateformat+" "+timeformat)}function getFormatedTime(timeValue,config){let timeFieldValue=timeValue||new Number,timeFormat=dlv__WEBPACK_IMPORTED_MODULE_4__(config,"org.timeFormat"),format=timeFormat===timeFormatHash["12Hour"]?"h:mm A":"HH:mm";return moment__WEBPACK_IMPORTED_MODULE_6__().startOf("day").milliseconds(timeFieldValue).format(format)}var script$6={components:{MULTI_LOOKUP:__vue_component__$9,FILE:__vue_component__$8,Tooltip:element_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip,CURRENCY_FIELD:__vue_component__$7},props:{detailsLayout:{type:Array},labelPosition:{type:String,default:"vertical"},columns:{type:Number},formatter:{type:Object},config:{type:Object},preview:{type:Boolean,default:!1}},data(){return{fieldsArray:[],loading:!1,displayTypes:["MULTI_LOOKUP","FILE","CURRENCY_FIELD"]}},computed:{showDivider(){let{config:{showDivider:showDivider=!0}}=this;return showDivider},isVertical(){let{labelPosition:labelPosition}=this||{};return"vertical"===labelPosition}},methods:{showRegularField(fieldObj){let{displayTypes:displayTypes}=this,{dataTypeEnum:dataTypeEnum}=fieldObj;return!displayTypes.includes(dataTypeEnum)},customSectionStyle(section){let{columns:columns}=this;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(columns))return"";let{sectionConfig:sectionConfig}=section||{},{colorCode:colorCode="#324056"}=sectionConfig||{};return`color:${colorCode};font-weight:500;`},displayType(field){let{dataTypeEnum:dataTypeEnum}=field,{displayTypes:displayTypes}=this;return displayTypes.includes(dataTypeEnum)?field.dataTypeEnum:""},gridLayout(section){
// configure for sectionConfig span
let{sectionConfig:sectionConfig}=section,{columns:sectionColumns}=sectionConfig||{},{columns:columns}=this;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(columns)?this.getGridConfig(sectionColumns):this.getGridConfig(columns)},getGridConfig(columns){switch(columns){case 1:return"fields-container one-column";case 2:return"fields-container two-column";case 3:return"fields-container three-column";case 4:return"fields-container four-column"}},getFieldStyle(field){let valueClass="",{isClickable:isClickable}=field||{};return valueClass=isClickable?"cursor-pointer":"",valueClass},customFieldConfig(field){let{columns:columns}=this;if(!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(columns))return"";let{fieldConfig:fieldConfig}=field||{},{colSpan:colSpan,colIndex:colIndex,rowIndex:rowIndex}=fieldConfig,style=`grid-column:${colIndex}/ span ${colSpan};\n                   grid-row:${rowIndex}/span 1`;return style},getDisplayValue(field){let{formatter:formatter,config:config}=this,{name:name,value:value,dataTypeEnum:dataTypeEnum,displayType:displayType}=field,formatFunction=dlv__WEBPACK_IMPORTED_MODULE_4__(formatter,name,null);return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(formatFunction)?"DURATION"===displayType?DATA_TYPE_VALUE_HASH["DURATION"](field,config):"TIME"===displayType?DATA_TYPE_VALUE_HASH["TIME"](field,config):(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(dataTypeEnum)?value:(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(DATA_TYPE_VALUE_HASH[dataTypeEnum])?DATA_TYPE_VALUE_HASH["OTHERS"](field):DATA_TYPE_VALUE_HASH[dataTypeEnum](field,config):formatFunction(field)},fieldEvent(field){let{dataTypeEnum:dataTypeEnum}=field;"FILE"===dataTypeEnum?this.$emit("fileDownload",field):"LOOKUP"===dataTypeEnum&&this.$emit("lookupRedirect",field)},lookupRedirect(payload){this.$emit("lookupRedirect",payload)},fileDownload(payload){this.$emit("fileDownload",payload)}}};
/* script */const __vue_script__$6=script$6;
/* template */var __vue_render__$6=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-field-details-container"},[_c("div",{staticClass:"action-button-container"},[_vm._t("action-buttons")],2),_vm._v(" "),_c("div",{staticClass:"sections-container",style:!_vm.showDivider&&"gap:20px"},_vm._l(_vm.detailsLayout,(function(section,index){return _c("div",{key:section.name+"-"+index},[section.name?_c("header",{staticClass:"f-section-header",style:_vm.customSectionStyle(section)},[_vm._v("\n        "+_vm._s(section.name)+"\n      ")]):_vm._e(),_vm._v(" "),_c("div",{class:_vm.gridLayout(section)},_vm._l(section.fields,(function(field,index){return _c("div",{key:field.id+"-"+index,style:_vm.customFieldConfig(field)},[_vm.isVertical?_c("div",{staticClass:"vertical-label"},[_c("span",{staticClass:"heading-label"},[_vm._v(_vm._s(field.displayName))]),_vm._v(" "),_vm.preview?_vm.displayType(field)?[_c("span",{staticClass:"preview-lines"})]:_vm._e():[_c(_vm.displayType(field),{tag:"component",attrs:{field:field,config:_vm.config},on:{lookupRedirect:_vm.lookupRedirect,fileDownload:_vm.fileDownload}})],_vm._v(" "),_vm.showRegularField(field)?[_vm.preview?[_c("span",{staticClass:"preview-lines"})]:[_vm.loading?_c("span",{staticClass:"lines loading-shimmer"}):_c("span",{ref:field.name+"-"+section.name,refInFor:!0,staticClass:"widget-field-value",class:_vm.getFieldStyle(field),on:{click:function($event){field.isClickable&&_vm.fieldEvent(field)}}},[_vm._v("\n                  "+_vm._s(_vm.getDisplayValue(field))+"\n                ")])]]:_vm._e()],2):_c("div",{staticClass:"horizontal-label"},[_c("span",{staticClass:"heading-label"},[_vm._v(" "+_vm._s(field.displayName))]),_vm._v(" "),_vm.preview?_vm.displayType(field)?[_c("span",{staticClass:"preview-lines"})]:_vm._e():[_c(_vm.displayType(field),{tag:"component",attrs:{field:field},on:{lookupRedirect:_vm.lookupRedirect}})],_vm._v(" "),_vm.showRegularField(field)?[_vm.preview?[_c("span",{staticClass:"preview-lines"})]:[_vm.loading?_c("span",{staticClass:"lines loading-shimmer"}):_c("span",{staticClass:"widget-field-value",style:_vm.getFieldStyle(field),on:{click:function($event){return _vm.fieldEvent(field)}}},[_vm._v(_vm._s(_vm.getDisplayValue(field)))])]]:_vm._e()],2)])})),0),_vm._v(" "),_vm.showDivider&&index!==_vm.detailsLayout.length-1?[_c("div",{staticClass:"section-divider"})]:_vm._e()],2)})),0)])},__vue_staticRenderFns__$6=[];
/* style */
const __vue_inject_styles__$6=function(inject){inject&&inject("data-v-49adb596_0",{source:".f-field-details-container{height:100%;width:100%;padding:24px;position:relative}.sections-container{display:flex;flex-direction:column}.sections-container .f-section-header{color:#324056;font-weight:500}.sections-container .loading-shimmer{background:#f6f7f8;background-image:linear-gradient(to right,#f6f7f8 0,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-repeat:no-repeat;background-size:800px 104px;display:inline-block;position:relative;animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:shimmer;animation-timing-function:linear}.sections-container .lines,.sections-container .preview-lines{height:8px;width:calc(100% - 30px);border-radius:4px}.sections-container .preview-lines{background-color:#f1f2f4}@keyframes shimmer{0%{background-position:-500px 0}100%{background-position:500px 0}}.sections-container header{color:#324056;font-size:16px;margin-bottom:15px;font-weight:500}.sections-container .fields-container{display:grid;grid-auto-flow:row;font-size:14px;color:#324056;grid-row-gap:24px}.sections-container .one-column{grid-template-columns:1fr}.sections-container .two-column{grid-template-columns:repeat(2,1fr)}.sections-container .three-column{grid-template-columns:repeat(3,1fr)}.sections-container .four-column{grid-template-columns:repeat(4,1fr)}.sections-container .vertical-label{display:flex;flex-direction:column;gap:5px}.sections-container .heading-label{font-size:14px;color:#324056;font-weight:500}.sections-container .widget-field-value{color:#5c6470}.sections-container .horizontal-label{display:flex;padding:20px 0}.sections-container .horizontal-label>*{flex:0 1 50%}.sections-container .section-divider{border:.5px solid #f0f0f0;margin:24px -24px}.sections-container .cursor-pointer{cursor:pointer;color:#2b8bff}.sections-container .cursor-pointer:hover{text-decoration:underline}.action-button-container{position:absolute;right:24px;top:24px;width:50px;z-index:3;height:24px;direction:rtl}",map:void 0,media:void 0})},__vue_scope_id__$6=void 0,__vue_module_identifier__$6=void 0,__vue_is_functional_template__$6=!1,__vue_component__$6=normalizeComponent({render:__vue_render__$6,staticRenderFns:__vue_staticRenderFns__$6},__vue_inject_styles__$6,__vue_script__$6,__vue_scope_id__$6,__vue_is_functional_template__$6,__vue_module_identifier__$6,!1,createInjector,void 0,void 0);
/* scoped */
var script$5={props:{content:{type:String,required:!0}},methods:{sanitizeHtml(content){return(0,_facilio_utils_sanitize__WEBPACK_IMPORTED_MODULE_7__/* .sanitize */.N)(content)}},computed:{html(){const{content:content}=this;return this.sanitizeHtml(content)}}};
/* script */const __vue_script__$5=script$5;
/* template */var __vue_render__$5=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-html-content",domProps:{innerHTML:_vm._s(_vm.html)}})},__vue_staticRenderFns__$5=[];
/* style */
const __vue_inject_styles__$5=function(inject){inject&&inject("data-v-43c09180_0",{source:".f-html-content p{padding:0!important;margin:0!important;line-height:1.428!important;font-size:14px!important}.f-html-content div{font-size:14px!important}.f-html-content a{font-size:14px!important}.f-html-content blockquote{font-size:14px!important}",map:void 0,media:void 0})},__vue_scope_id__$5=void 0,__vue_module_identifier__$5=void 0,__vue_is_functional_template__$5=!1,__vue_component__$5=normalizeComponent({render:__vue_render__$5,staticRenderFns:__vue_staticRenderFns__$5},__vue_inject_styles__$5,__vue_script__$5,__vue_scope_id__$5,__vue_is_functional_template__$5,__vue_module_identifier__$5,!1,createInjector,void 0,void 0),NONE_FIELD={displayName:"None",id:null,mainField:!1,name:null};
/* scoped */var script$4={props:{skipOrderBy:{default:!1},fields:{type:Array,default:()=>[]},sortByField:{},viewDetail:{type:Object,default:()=>{}}},data(){return{visible:!1,search:"",sortConfig:{orderBy:null,orderType:null},sortFieldLists:[],orderTypeList:{asc:this.$t("common.wo_report.ascending"),desc:this.$t("common.wo_report.descending")}}},created(){let{fields:fields}=this;(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(fields)||(this.sortFieldLists=[...fields,NONE_FIELD])},computed:{orderBy(){let{orderBy:orderBy}=this.sortConfig;return(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isObject */.Kn)(orderBy)?orderBy.value:orderBy},orderType(){let{orderType:orderType,orderBy:orderBy}=this.sortConfig;return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(orderBy)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(orderType)?"asc":orderType},filteredSortList(){let{sortFieldLists:sortFieldLists,search:search}=this;return sortFieldLists.filter((field=>{let{displayName:displayName}=field||{};return!!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(search)||(displayName.toLowerCase().includes(search.toLowerCase())||"")}))}},watch:{viewDetail:{handler(){let{sortFields:sortFields=[]}=this.viewDetail||{},{sortByField:sortByField}=this;if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(sortByField))if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(sortFields))this.sortConfig={orderBy:null,orderType:null};else{let defaultAscending={isAscending:!0},{name:name}=this.$getProperty(sortFields[0],"sortField",{})||{},{isAscending:isAscending}=this.$getProperty(sortFields,"0",defaultAscending)||defaultAscending;this.sortConfig={orderType:isAscending?"asc":"desc",orderBy:name||""}}else this.sortConfig={orderType:"asc",orderBy:sortByField?.name}},immediate:!0}},methods:{async updateOrder(orderName,type){this.$set(this.sortConfig,type,orderName);let{orderBy:orderBy,orderType:orderType}=this;orderType=(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(orderBy)?null:orderType;let sortObj={orderBy:orderBy,orderType:orderType};this.$emit("onSortChange",sortObj),this.visible=!1}}};
/* script */const __vue_script__$4=script$4;
/* template */var __vue_render__$4=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{placement:"bottom",trigger:"click","popper-class":"portal-sort-container","visible-arrow":!0},model:{value:_vm.visible,callback:function($$v){_vm.visible=$$v},expression:"visible"}},[_c("fc-icon",{staticClass:"pointer margin-auto more-icon",attrs:{slot:"reference",group:"sort",name:"alphabet-sort",size:"16"},slot:"reference"}),_vm._v(" "),_vm.skipOrderBy?_vm._e():[_c("el-input",{attrs:{type:"text",placeholder:_vm.$t("common._common.sort_search")},model:{value:_vm.search,callback:function($$v){_vm.search=$$v},expression:"search"}})],_vm._v(" "),_c("div",{staticClass:"sort-list-container"},[_vm.skipOrderBy?_vm._e():[_c("div",{staticClass:"sort-field-list"},_vm._l(_vm.filteredSortList,(function(sortField,index){return _c("div",{key:index,class:["list-item",_vm.orderBy===sortField.name&&"active"],on:{click:function($event){return $event.stopPropagation(),_vm.updateOrder(sortField.name,"orderBy")}}},[_vm._v("\n          "+_vm._s(sortField.displayName)+"\n\n          "),_vm.orderBy===sortField.name?_c("i",{staticClass:"el-icon-check"}):_vm._e()])})),0),_vm._v(" "),_c("div",{staticClass:"seperator"})],_vm._v(" "),_vm._l(_vm.orderTypeList,(function(type,name){return _c("div",{key:name,staticClass:"list-item",class:["list-item",_vm.orderType===name&&null!==_vm.orderBy&&"active"],attrs:{disabled:null===_vm.orderBy},on:{click:function($event){return $event.stopPropagation(),_vm.updateOrder(name,"orderType")}}},[_vm._v("\n      "+_vm._s(type)+"\n    ")])}))],2)],2)},__vue_staticRenderFns__$4=[];
/* style */
const __vue_inject_styles__$4=function(inject){inject&&inject("data-v-1ecb4eca_0",{source:".portal-sort-container{padding:0;cursor:pointer}.portal-sort-container .el-input__inner{padding:20px 20px}.portal-sort-container .sort-list-container{max-height:400px}.portal-sort-container .sort-list-container .sort-field-list{max-height:200px;overflow:scroll}.portal-sort-container .sort-list-container .list-item{display:flex;align-items:center;justify-content:space-between;padding:10px 20px}.portal-sort-container .sort-list-container .list-item.active{font-weight:700;color:#39b2c2}.portal-sort-container .sort-list-container .list-item .el-icon-check{font-weight:700}.portal-sort-container .sort-list-container .seperator{margin:10px 0;border-top:1px solid #f1f1f1}",map:void 0,media:void 0})},__vue_scope_id__$4=void 0,__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1,__vue_component__$4=normalizeComponent({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},__vue_inject_styles__$4,__vue_script__$4,__vue_scope_id__$4,__vue_is_functional_template__$4,__vue_module_identifier__$4,!1,createInjector,void 0,void 0),MAX_EVENT_MONTH=4,MAX_EVENT_WEEK=3,MAX_EVENT_DAY=5;
/* scoped */var script$3={name:"calendar",components:{FCalendar:_facilio_design_system__WEBPACK_IMPORTED_MODULE_8__/* .FCalendar */.FV},props:{calendarEvents:{type:Object,default:()=>{}},viewDetails:{type:Object,default:()=>{}},calendarView:{type:String,default:"month"},referenceDate:{type:Number,default:0},availableViews:{type:Array,default:()=>[],required:!0},account:{type:Object,default:()=>{}},outOfScopeCellClicked:{type:Boolean,default:!1}},data(){return{events:[],activeView:"",canShowWizard:!1,fieldName:"",eventPerCell:3,loading:!0,maxEventInMonth:MAX_EVENT_MONTH,maxEventInWeek:MAX_EVENT_WEEK,maxEventInDay:MAX_EVENT_DAY}},computed:{timezone(){let timezone,{account:account={}}=this||{};if((account||{}).timezone){let{timezone:accountTimeZone}=account||{};timezone=accountTimeZone||"Etc/UTC"}else{let orgTimeZone=dlv__WEBPACK_IMPORTED_MODULE_4__(account,"org.timezone");timezone=orgTimeZone||"Etc/UTC"}return timezone},filteredEvents(){let format,customFormat,formatedEndDate,customObj,maxEventCount,{events:events,activeView:activeView,maxEventInMonth:maxEventInMonth,maxEventInWeek:maxEventInWeek,maxEventInDay:maxEventInDay}=this||{},selectedDate="",eventsList=[];return"month"===activeView?(format="YYYY-MM-DD",customFormat="YYYY-MM-DD"):(format="YYYY-MM-DD HH:mm",customFormat="YYYY-MM-DD HH"),maxEventCount="month"===activeView?maxEventInMonth:"week"===activeView?maxEventInWeek:maxEventInDay,events.forEach(((event,index)=>{let{count:eventsCount,hidden:hiddenEvent}=event||{},{start:startTime,end:endTime,displayStartTime:startTimeLabel,displayEndTime:endTimeLabel}=event||{},CustomStartDate=this.getFormatedDate(startTime,customFormat),startDate=this.getFormatedDate(startTime,format),endDate=this.getFormatedDate(endTime,format);!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(eventsCount)&&eventsCount>maxEventCount||hiddenEvent?(formatedEndDate="month"!==activeView?moment_timezone__WEBPACK_IMPORTED_MODULE_1__(CustomStartDate).add(1,"hours").tz(this.timezone).format(format):startDate,customObj={start:startDate,end:formatedEndDate,title:"more",totalEvent:eventsCount,startDate:startTime,class:"view-more-event"},eventsList.push(customObj),selectedDate=CustomStartDate):(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(eventsCount)&&selectedDate!==CustomStartDate&&(customObj={start:startDate,end:endDate,title:event.title,eventId:event.eventId,localId:event.localId,moduleState:event.moduleState,eventsKey:event.eventsKey,bgColor:"backgroundAccentBlueLight",displayStartTime:startTimeLabel,displayEndTime:endTimeLabel,class:`eventClass${index}`,invalidEvent:event.invalidEvent},eventsList.push(customObj))})),"month"!==activeView&&eventsList.reverse(),eventsList},filterEventId(){let{filteredEvents:filteredEvents,timezone:timezone}=this||[],{eventPerCell:eventPerCell}=this||0,calendarEvent=structuredClone(filteredEvents);calendarEvent.sort(((initial,final)=>{let initialStart=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(initial.start,timezone).valueOf(),finalStart=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(final.start,timezone).valueOf();return initialStart-finalStart}));let count=0,overlappingEvent=[];for(let i=0;i<calendarEvent.length;i++){const event1=calendarEvent[i];for(let j=i;j>=0;j--){const event=calendarEvent[j];let isNotMore="more"!==event.title,eventIsBetween=moment_timezone__WEBPACK_IMPORTED_MODULE_1__(event1.start).isBetween(event.start,event.end);if(eventIsBetween&&isNotMore||event1.start===event.start&&isNotMore||event1.start===event.end&&isNotMore){if(overlappingEvent.includes(event.eventId))continue;count++,count>eventPerCell&&overlappingEvent.push(event1.eventId)}}count=0}return overlappingEvent},removedEvents(){let{filteredEvents:filteredEvents,filterEventId:filterEventId,timezone:timezone}=this||[];const filteredData=filteredEvents.filter((item=>filterEventId.includes(item.eventId))),dates=filteredData.reduce(((acc,event)=>{const startDates=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(event.start,timezone),endDates=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(event.end,timezone),startDate=new Date(startDates),endDate=new Date(endDates);while(startDate<=endDate)acc.push(this.getFormatedDate(startDate,"YYYY-MM-DD")),startDate.setDate(startDate.getDate()+1);return acc}),[]),uniqueArr=[...new Set(dates)];return uniqueArr},presentViewMore(){let{filteredEvents:filteredEvents}=this||[];const present=filteredEvents.filter((event=>"more"===event.title)).map((event=>event.start)),newArray=this.removedEvents.filter((obj=>!present.includes(obj)));return newArray},displayEvent(){let{presentViewMore:presentViewMore,filteredEvents:filteredEvents,filterEventId:filterEventId,timezone:timezone}=this||[];const events=[...filteredEvents];presentViewMore.forEach((date=>{const customObj={start:date,end:date,title:"more",totalEvent:6,startDate:date,class:"view-more-event"};events.push(customObj)})),events.sort(((initial,final)=>{let initialStart=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(initial.start,timezone).valueOf(),finalStart=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(final.start,timezone).valueOf();return initialStart-finalStart}));let filteredEvent=events.filter((event=>!filterEventId.includes(event.eventId)));return filteredEvent},constructedSplitEvent(){let{displayEvent:displayEvent}=this||[],{eventPerCell:eventPerCell,timezone:timezone}=this||0,eventsArr=[];displayEvent.forEach(((event,index)=>{let dates=[],customObj={};if("more"===event.title||event.invalidEvent){if(event.invalidEvent){let customClass=`${event.class}`;customClass+=" event-start single-day-event";let newObj={...event,start:event.start,end:event.start,actualStart:event.start,actualEnd:event?.end,class:customClass};eventsArr.push(newObj)}}else{const endDates=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(event.end,timezone),currentDates=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(event.start,timezone);while(currentDates<=endDates){let months=currentDates.month()+1;const year=currentDates.year(),month=months.toString().padStart(2,"0"),day=currentDates.format("DD"),formattedDate=`${year}-${month}-${day}`;dates.push(formattedDate),currentDates.add(1,"days")}event.position=index;let uniqueArr=[...new Set(dates)],singleDayEvent=event.start===event.end;uniqueArr.forEach((date=>{customObj={...event,start:date,end:date,actualStart:event.start,actualEnd:event.end};let customClass=`${event.class}`;date===event.start?customClass+=" event-start":date===event.end?customClass+=" event-end":customClass+=" event-middle",singleDayEvent&&(customClass+=" single-day-event"),customObj.class=customClass,eventsArr.push(customObj)}))}})),eventsArr.sort(((initial,final)=>{let initialStart=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(initial.start,timezone).valueOf(),finalStart=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(final.start,timezone).valueOf();return initialStart-finalStart}));let subArrays=[],currentSubArray=[];for(let i=0;i<eventsArr.length;i++){currentSubArray.push(eventsArr[i]);let currentEvent=eventsArr[i],nextEvent=eventsArr[i+1];i+1!==eventsArr.length&&moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(currentEvent.start,timezone).valueOf()===moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(nextEvent.start,timezone).valueOf()||(currentSubArray.sort(((a,b)=>a.position-b.position)),subArrays.push(currentSubArray),currentSubArray=[])}return subArrays.forEach((day=>{day.sort(((initial,final)=>initial.startDate-final.startDate))})),subArrays.forEach((day=>{let hiddenEvent={};if(day.length<eventPerCell){hiddenEvent={...day[0],position:9999,class:"dummy",title:"dummy",eventId:0,isDummyEvent:!0};let balanceEventCount=eventPerCell-day.length;Array.from({length:balanceEventCount}).forEach((()=>{day.push(hiddenEvent)}))}})),subArrays},finalMonthViewEvents(){let foundObject,{constructedSplitEvent:constructedSplitEvent,displayEvent:displayEvent}=this||[],subArrays=structuredClone(constructedSplitEvent),preEventArray=[],customArray=structuredClone(constructedSplitEvent),dummyEventArray=[],newEvent=[],mainArray=[],startOfWeek=!1,startingDay="",foundArray=subArrays.find((subArray=>subArray.some((obj=>obj.isDummyEvent))));foundArray&&(foundObject=foundArray.find((obj=>obj.isDummyEvent))),customArray.forEach(((evetsSubArray,index)=>{let eventsPerCell=evetsSubArray.length;dummyEventArray.length=eventsPerCell,dummyEventArray.fill(foundObject),0===index&&mainArray.push(evetsSubArray),1===index&&(preEventArray=subArrays[index-1]),index>1&&(preEventArray=mainArray[index-1]);let startDate=evetsSubArray[0].start;if(startingDay=this.getFormatedDate(startDate,"dddd"),"Monday"===startingDay&&index>1?(mainArray.push(evetsSubArray),startOfWeek=!0):startOfWeek=!1,index>=1&&!startOfWeek){evetsSubArray.forEach((subEvents=>{let postioningIndex=preEventArray.findIndex((item=>item.eventId===subEvents.eventId));"dummy"!==subEvents.title&&-1!==postioningIndex&&(dummyEventArray[postioningIndex]=subEvents),"dummy"!==subEvents.title&&-1===postioningIndex&&newEvent.push(subEvents)}));let count=newEvent.length;newEvent.length>0&&dummyEventArray.forEach(((event,index)=>{count>0&&void 0!==event&&"dummy"===event.title&&(dummyEventArray[index]=newEvent.shift(),count--)}));let customObj={},rearrangedArray=[];dummyEventArray.forEach((element=>{customObj={...element},customObj.start=evetsSubArray[0].start,customObj.end=evetsSubArray[0].end,rearrangedArray.push(customObj),customObj={}})),(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(foundArray)&&(rearrangedArray=[],rearrangedArray=(index=0)?evetsSubArray:this.getModifiedEvent(preEventArray,evetsSubArray)),mainArray.push(rearrangedArray),dummyEventArray=[],newEvent=[]}}));let combinedEvent=[].concat(...mainArray);return displayEvent.forEach((event=>{"more"===event.title&&combinedEvent.push(event)})),combinedEvent},eventsList(){return this.loading?[]:"month"===this.calendarView?this.finalMonthViewEvents:this.filteredEvents}},created(){this.getMainField(dlv__WEBPACK_IMPORTED_MODULE_4__(this,"viewDetails.fields")),this.activeView=this.calendarView;let{viewDetails:viewDetails,fieldName:fieldName,timezone:timezone}=this||{},endTimeKey=dlv__WEBPACK_IMPORTED_MODULE_4__(viewDetails,"calendarViewContext.endDateField.name"),startTimeKey=dlv__WEBPACK_IMPORTED_MODULE_4__(viewDetails,"calendarViewContext.startDateField.name"),{calendarEvents:calendarEvents}=this||{};Object.entries(calendarEvents).forEach((([key,value])=>{let{list:list}=value||{},calenderEventData=list||[];calenderEventData.forEach((element=>{let startTime=dlv__WEBPACK_IMPORTED_MODULE_4__(element,`data.${startTimeKey}`),endTime=dlv__WEBPACK_IMPORTED_MODULE_4__(element,`data.${endTimeKey}`);(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(endTime)&&(endTime=null);let title=dlv__WEBPACK_IMPORTED_MODULE_4__(element,`data.${fieldName}`),eventId=dlv__WEBPACK_IMPORTED_MODULE_4__(element,"data.id"),loacalId=dlv__WEBPACK_IMPORTED_MODULE_4__(element,"data.localId"),state=dlv__WEBPACK_IMPORTED_MODULE_4__(element,"data.moduleState"),eventKey={[startTimeKey]:startTime,[endTimeKey]:endTime},eventObj={start:startTime,end:endTime,title:title,eventId:eventId,localId:loacalId,moduleState:state,eventsKey:eventKey,displayStartTime:this.getFormatedDate(startTime,"hh:mm A"),displayEndTime:this.getFormatedDate(endTime,"hh:mm A")};(startTime>endTime||(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(endTime))&&(eventObj={...eventObj,invalidEvent:!0}),this.events.push(eventObj)}));let totalCount={count:value.count,start:parseInt(key),hidden:value.hidden};this.events.push(totalCount)}))},watch:{calendarView(val){this.activeView=val}},mounted(){this.getDisplayEvent(),window.addEventListener("resize",(()=>{(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isFunction */.mf)(this.getDisplayEvent)&&this.getDisplayEvent()}))},destroyed(){window.removeEventListener("resize",this.getDisplayEvent)},methods:{getFormatedDate(date,format){let{timezone:timezone}=this,currentDate=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(date,timezone).format(format);return currentDate},getDisplayEvent(){this.$nextTick((()=>{let ref=this.$refs["f-cal"],totalHeight=ref?.$el.querySelector(".vuecal__cell").clientHeight;this.eventPerCell=Math.floor((totalHeight-50)/20),this.loading=!1}))},getMainField(fields){fields.forEach((record=>{let mainField=dlv__WEBPACK_IMPORTED_MODULE_4__(record,"field.mainField");mainField&&(this.fieldName=dlv__WEBPACK_IMPORTED_MODULE_4__(record,"field.name"))}))},getModifiedEvent(previousEvents,currentEvents){let rearrangeArray=[],includedEvent=[],lenght=previousEvents.length;return rearrangeArray.length=previousEvents.length,rearrangeArray.fill({}),currentEvents.forEach(((record,index)=>{let id=record.eventId;const ind=previousEvents.findIndex((object=>object.eventId===id));ind>-1&&(includedEvent.push(record.eventId),rearrangeArray[ind]=record)})),includedEvent.length<previousEvents.length&&currentEvents.forEach(((event,index)=>{if(!includedEvent.includes(event.eventId))for(let i=0;i<lenght;i++)if((0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(rearrangeArray[i]))return void(rearrangeArray[i]=event)})),rearrangeArray},getActiveView(viewObj){"object"===typeof viewObj&&(this.activeView=viewObj.view,this.$emit("viewChanged",viewObj))},onEventClick(event){this.canShowWizard=!0,this.$emit("eventClick",event)},showMoreEvent(eventObj){this.$emit("OnViewMoreClick",eventObj)},cellClicked(range){this.$emit("OnCellClicked",range)},currentDay(date){let day=moment_timezone__WEBPACK_IMPORTED_MODULE_1__.tz(date,this.timezone).valueOf();this.$emit("currentDate",day)},gotoPrevious(){this.$refs["f-cal"].gotoPrevious()},gotoNext(){this.$refs["f-cal"].gotoNext()},gotoToday(){this.$refs["f-cal"].gotoToday()}}};
/* script */const __vue_script__$3=script$3;
/* template */var __vue_render__$3=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("FCalendar",{ref:"f-cal",attrs:{calendarEvents:_vm.eventsList,calendarView:_vm.activeView,referenceDate:_vm.referenceDate,availableViews:_vm.availableViews,timezone:_vm.timezone,outOfScopeCellClicked:_vm.outOfScopeCellClicked},on:{viewChanged:_vm.getActiveView,eventClick:_vm.onEventClick,OnViewMoreClick:_vm.showMoreEvent,OnCellClick:_vm.cellClicked,currentDayChanged:_vm.currentDay},scopedSlots:_vm._u([{key:"event",fn:function(event){return[_vm._t("eventPopup",null,{event:event})]}}],null,!0)})],1)},__vue_staticRenderFns__$3=[];
/* style */
const __vue_inject_styles__$3=void 0,__vue_scope_id__$3=void 0,__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1,__vue_component__$3=normalizeComponent({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},__vue_inject_styles__$3,__vue_script__$3,__vue_scope_id__$3,__vue_is_functional_template__$3,__vue_module_identifier__$3,!1,void 0,void 0,void 0);
/* scoped */
var script$2={computed:{showTitle(){return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(this.title)}},props:{title:{type:String,default:""}}};
/* script */const __vue_script__$2=script$2;
/* template */var __vue_render__$2=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showTitle?_c("div",{staticClass:"header"},[_c("div",{staticClass:"title"},[_vm._v(_vm._s(_vm.title))])]):_vm._e(),_vm._v(" "),_vm._t("default")],2)},__vue_staticRenderFns__$2=[];
/* style */
const __vue_inject_styles__$2=function(inject){inject&&inject("data-v-72920185_0",{source:".title[data-v-72920185]{font-family:aktivGrotesk-medium;font-size:16px;font-weight:500;font-stretch:normal;font-style:normal;line-height:1.38;letter-spacing:normal;color:#324056}",map:void 0,media:void 0})},__vue_scope_id__$2="data-v-72920185",__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1,__vue_component__$2=normalizeComponent({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,!1,createInjector,void 0,void 0);
/* scoped */
var script$1={computed:{showTitle(){return!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(this.title)}},props:{title:{type:String,default:""}}};
/* script */const __vue_script__$1=script$1;
/* template */var __vue_render__$1=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showTitle?_c("div",{staticClass:"header"},[_c("div",{staticClass:"title"},[_vm._v(_vm._s(_vm.title))])]):_vm._e(),_vm._v(" "),_vm._t("default")],2)},__vue_staticRenderFns__$1=[];
/* style */
const __vue_inject_styles__$1=function(inject){inject&&inject("data-v-87b0842c_0",{source:".title[data-v-87b0842c]{font-family:AktivGrotesk-Medium;font-size:16px;font-weight:500;font-stretch:normal;font-style:normal;line-height:1.38;letter-spacing:normal;color:#324056}",map:void 0,media:void 0})},__vue_scope_id__$1="data-v-87b0842c",__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1,__vue_component__$1=normalizeComponent({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,!1,createInjector,void 0,void 0);
/* scoped */
var script={data(){return{gridData:{},loading:!1}},methods:{resize(id,name,dimension){const[item]=this.$refs[`gs-widget-${id}-${name}`];item.resize(dimension)},getMasterGridSingleColumnSize(){return this.$refs["gs-master-grid"].getSingleColumnSize()},getColumnHeight(){return this.$refs["gs-master-grid"].getSingleColumnHeight()},canShowBorder(widget){let{isBorderEnabled:isBorderEnabled}=widget||null;return!!(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(isBorderEnabled)||isBorderEnabled}},created(){let{grid:grid,cellHeight:cellHeight}=this||{};this.gridData=structuredClone(grid);let{columns:columns}=grid||[];(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(columns)||this.gridData.columns.forEach((column=>{let{sections:sections}=column||[];(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(sections)||sections.forEach((section=>{(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(section.displayName)&&(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(section.description)?section.scale=0:section.scale=44;let{widgets:widgets}=section||[];(0,_facilio_utils_validation__WEBPACK_IMPORTED_MODULE_10__/* .isEmpty */.xb)(widgets)||widgets.forEach((widget=>{widget.h=widget.h*cellHeight+16;//temp fix
}))}))}))},components:{"gs-layout":_facilio_design_system__WEBPACK_IMPORTED_MODULE_8__/* .FGridstackLayout */.ON,"gs-item":_facilio_design_system__WEBPACK_IMPORTED_MODULE_8__/* .FGridstackItem */.O5,"gs-subgrid":_facilio_design_system__WEBPACK_IMPORTED_MODULE_8__/* .FGridstackSubgrid */.Bh,"f-column":__vue_component__$2,"f-section":__vue_component__$1},props:{grid:{},cellHeight:{type:[Number,String],default:100}}};
/* script */const __vue_script__=script;
/* template */var __vue_render__=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("gs-layout",{ref:"gs-master-grid",staticClass:"page-builder-comp-ui",attrs:{layout:_vm.gridData.columns||[],"cell-height":1,column:12,"min-row":0,float:!1,margin:"0px"}},_vm._l(_vm.gridData.columns||[],(function(column){return _c("gs-item",{key:column.id,attrs:{id:column.id,x:column.x,y:0,w:column.width,h:1,"no-resize":!0,"no-move":!0}},[_c("f-column",{attrs:{title:""}},[_c("gs-subgrid",{attrs:{column:column.width,items:column.sections||[],accept:["gs-section"],"auto-scale":"onResize","auto-scale-offset":0,margin:"0px"}},_vm._l(column.sections.slice().reverse()||[],(function(section){return _c("gs-item",{key:section.id,staticClass:"gs-section",attrs:{id:section.id,x:0,y:0,w:12,h:1,"no-resize":!0,"no-scroll":!0,"no-move":!0}},[_c("f-section",{attrs:{title:""}},[_vm._t("sectionHeader",null,{section:section}),_vm._v(" "),_c("gs-subgrid",{attrs:{items:section.widgets||[],accept:["gs-widget"],"auto-scale":"onResize","auto-scale-offset":section.scale,column:column.width,margin:"8px"}},_vm._l(section.widgets.slice().reverse()||[],(function(widget){return _c("gs-item",{key:widget.id,ref:"gs-widget-"+widget.id+"-"+widget.name,refInFor:!0,staticClass:"gs-widget",class:{"widget-border":_vm.canShowBorder(widget)},attrs:{id:widget.id,x:widget.x,y:widget.y,w:widget.w,h:widget.h,"no-resize":widget.noResize,"no-move":!0}},[_vm._t("default",null,{widget:widget})],2)})),1)],2)],1)})),1)],1)],1)})),1)},__vue_staticRenderFns__=[];
/* style */
const __vue_inject_styles__=function(inject){inject&&inject("data-v-6f12c1b0_0",{source:".page-builder-comp-ui>.grid-stack-item>.grid-stack-item-content .grid-stack-item-content .grid-stack-item-content{overflow-y:hidden!important;background:#fff}",map:void 0,media:void 0})},__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,__vue_component__=normalizeComponent({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,!1,createInjector,void 0,void 0);
/* scoped */}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/82080.js.map