"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[97630],{
/***/115927:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PlaceHolder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/templates/PlaceHolder.vue?vue&type=template&id=740e292c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.ruleId?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_vm._m(0)]):_vm._e(),_vm._m(1),_c("div",{staticClass:"pL30 pR30 pT20 height100 overflow-y-scroll pB100"},_vm._l(_vm.groupedPlaceHolder,(function(templates,category){return _c("div",{key:category},_vm._l(templates,(function(fields,index){return _c("el-row",{directives:[{name:"show",rawName:"v-show",value:fields.selection_criteria,expression:"fields.selection_criteria"}],key:index,staticClass:"pT10 pB10 flex-middle"},[_c("el-col",{attrs:{span:24}},["Field"===fields.selection_criteria.displayType?_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" Field "+_vm._s(fields.label)+" ")]):_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(_vm._s(fields.label))]),"ASSETCHOOSER"===fields.selection_criteria.displayType?_c("div",[_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{disabled:""},model:{value:_vm.resourceLabel,callback:function($$v){_vm.resourceLabel=$$v},expression:"resourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0}},slot:"suffix"})])],1):"DURATION"===fields.selection_criteria.displayType?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Enter Interval"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_c("el-option",{key:1,attrs:{label:"Last 1 Hour",value:3600}}),_c("el-option",{key:3,attrs:{label:"Last 3 Hour",value:10800}}),_c("el-option",{key:6,attrs:{label:"Last 6 Hour",value:21600}}),_c("el-option",{key:12,attrs:{label:"Last 12 Hour",value:43200}})],1)],1):"field"===fields.selection_criteria.displayType?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},_vm._l(_vm.thresholdFields,(function(field){return _c("el-option",{key:field.name+field.id,attrs:{label:field.displayName,value:field.name}})})),1)],1):"NUMBER"===fields.selection_criteria.displayType?_c("div",[_c("el-input",{staticClass:"fc-border-select fc-input-full-border-select2 width100",attrs:{type:"number"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}})],1):"Radio"===fields.selection_criteria.displayType?_c("div",[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"true"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_vm._v(_vm._s(fields.selection_criteria.trueVal))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"false"},model:{value:fields.default_value,callback:function($$v){_vm.$set(fields,"default_value",$$v)},expression:"fields.default_value"}},[_vm._v(_vm._s(fields.selection_criteria.falseVal))])],1):_c("el-",{attrs:{span:12}},[_c("div",{staticClass:"fc-black-12 text-left bold"},[_vm._v(" "+_vm._s(fields.default_value)+" ")])]),_c("el-col",{staticClass:"mT10 pL20",attrs:{span:12}})],1)],1)})),1)})),0),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{attrs:{disabled:_vm.ruleId,type:"button fc-full-btn-fill-green"},on:{click:function($event){return _vm.createRules()}}},[_vm._v("Create rule")])],1),_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,query:_vm.resourceQuery,showAsset:!0,disable:!0},on:{associate:function(data){return _vm.associateResource(data,"assets")},"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" This template is already been used. ")])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"rules-sum-header"},[_c("div",{staticClass:"fc-black-14 fwBold text-left text-uppercase"},[_vm._v(" Template Summary ")])])}],objectSpread2=__webpack_require__(595082),SpaceAssetMultiChooser=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(673362)),templateHepler=__webpack_require__(663356),vuex_esm=__webpack_require__(420629),PlaceHoldervue_type_script_lang_js={mixins:[templateHepler/* default */.Z],props:["ruleTemplate","templateId","ruleId"],components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z},data:function(){return{templates:[],groupedPlaceHolder:[],chooserVisibility:!1,selectedResourceList:[],resourceQuery:null}},mounted:function(){this.ruleTemplate&&(this.groupedPlaceHolder=this.placeHolderGroupFields())},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{selectedCategory:function(){var _this=this;if(this.ruleTemplate&&this.ruleTemplate.category){var category=this.assetCategory.filter((function(d){return d.name===_this.ruleTemplate.category}));return category}return null},resourceData:function(){return{assetCategory:this.selectedCategory[0].id}},resourceLabel:function(){if(this.selectedCategory){var message,category=this.selectedCategory,selectedCount=this.selectedResourceList.length;if(selectedCount){var includeMsg=this.isIncludeResource?"included":"excluded";if(1===selectedCount)return this.selectedResourceList[0].name;message=selectedCount+" "+category[0].name+(selectedCount>1?"s":"")+" "+includeMsg}else message="All "+category[0].name+"s";return message}return this.selectedResourceList.id>0?this.selectedResourceList.name:null}}),methods:{placeHolderGroupFields:function(){var _this2=this;return Object.keys(this.ruleTemplate.placeHolder).forEach((function(key){_this2.templates.push(_this2.ruleTemplate.placeHolder[key])})),this.groupByField(this.templates,"type")},checkFields:function(){this.loadThresholdFields(this.selectedCategory[0].id)},associateResource:function(selectedObj,type){"assets"===type?selectedObj.resourceList&&selectedObj.resourceList.length&&(this.selectedResourceList=selectedObj.resourceList,this.isIncludeResource=selectedObj.isInclude):this.selectedResourceList=selectedObj,this.chooserVisibility=!1,this.resourceQuery=null},createRules:function(){var _this3=this,placeHolder={},index=0;Object.keys(this.groupedPlaceHolder).forEach((function(key){_this3.groupedPlaceHolder[key].forEach((function(d,i){if("ASSETCHOOSER"===d.selection_criteria.displayType&&_this3.selectedResourceList.length>0){var fieldName=_this3.isIncludeResource?"includeResource":"excludeResource";d.uniqueId=fieldName,_this3.selectedResourceList.length>0?d.default_value=_this3.selectedResourceList.map((function(resource){return resource.id})):d.default_value=null}placeHolder[index]=d,index++}))}));var params={id:this.ruleTemplate.id,placeHolder:placeHolder},url="/v2/rules/template/createRule";this.$http.post(url,params).then((function(response){0===response.data.responseCode&&response.data.result&&(_this3.$message.success("Rule created successfully"),_this3.$router.push({path:"/app/fa/rules/active"}))})).catch((function(){_this3.$message.success("Something went wrong")}))}}},templates_PlaceHoldervue_type_script_lang_js=PlaceHoldervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(templates_PlaceHoldervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PlaceHolder=component.exports},
/***/89270:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AlarmRulesTemplateSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/rules/AlarmRulesTemplateSummary.vue?vue&type=template&id=d2708a62
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 pB50"},[_c("div",{staticClass:"alarm-template-container height100"},[_c("div",{staticClass:"alarm-template-header"},[_c("div",{staticClass:"fL"},[_c("div",{staticClass:"summary-back",on:{click:function($event){return _vm.goBack()}}},[_c("i",{staticClass:"el-icon-back mR10"}),_vm._v(" "+_vm._s(_vm.$t("common._common.back_list"))+" ")]),_c("div",{staticClass:"heading-black22 mT10"},[_c("span",{staticClass:"heading-black22"},[_vm._v(_vm._s(_vm.ruleTemplate.name))])])]),_c("div",{staticClass:"mL10 fR",staticStyle:{"margin-left":"auto"}},[_c("el-button",{staticClass:"fc-btn-edit",attrs:{type:"button"}},[_c("i",{staticClass:"el-icon-edit",on:{click:function($event){return _vm.editThresholdRule()}}})])],1)]),_c("div",{staticClass:"rules-template-body"},[_c("div",{staticClass:"width100"},[_c("div",{staticClass:"fL rules-body-sum-left"},[_c("div",{staticClass:"height100 overflow-y-scroll pB100"},[_vm._m(0),_c("div",{staticClass:"p30"},[_c("div",{staticClass:"fc-text-pink11 text-uppercase"},[_vm._v("Description")]),_c("div",{staticClass:"fc-black-13 pT10 text-left"},[_vm._v(" "+_vm._s(_vm.ruleTemplate.description)+" ")]),_c("div",{staticClass:"pT20"},[_c("el-row",[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-blue-label text-uppercase text-left"},[_vm._v(" Alarm Type ")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v("Assets")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-blue-label text-uppercase text-left"},[_vm._v(" ASSET CATEGORY ")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v(" "+_vm._s(_vm.ruleTemplate.category)+" ")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-blue-label text-uppercase text-left"},[_vm._v(" ASSETS ")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v(" "+_vm._s(_vm.resourceLabel)+" ")])]),_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-blue-label text-uppercase text-left"},[_vm._v(" THRESHOLD METRIC ")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName(_vm.ruleTemplate.threshold_metric).displayName)+" ")])])],1)],1),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"fc-text-pink11 text-uppercase"},[_vm._v(" RULE CONDITION ")]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("PREREQUISITE")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v(" "+_vm._s(_vm.ruleTemplate.preRequsite?_vm.ruleTemplate.preRequsite.condition_statement:null)+" ")])]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Alarm Condition")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v(" "+_vm._s(_vm.ruleTemplate.alarmCondition.condition_statement)+" ")])]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label flex-middle"},[_vm._v(" Severity "),_c("div",{staticClass:"fc-badge-critical mL20",style:{"background-color":_vm.getAlarmSeverityByName(_vm.ruleTemplate.severity).color}},[_vm._v(" "+_vm._s(_vm.getAlarmSeverityByName(_vm.ruleTemplate.severity).displayName)+" ")])])]),_vm._m(1)]),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"fc-text-pink11 text-uppercase"},[_vm._v("ALARM DETAILS")]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("ALARM MESSAGE")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v(" "+_vm._s(_vm.ruleTemplate.name)+" ")])]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("PROBLEM")]),_c("div",{staticClass:"fc-black-13 text-left pT5",domProps:{innerHTML:_vm._s(_vm.ruleTemplate.problem)}})]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label bold"},[_vm._v("Possible Causes")]),_c("div",{staticClass:"fc-black-13 text-left pT5",domProps:{innerHTML:_vm._s(_vm.ruleTemplate.possible_causes)}})]),_c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label bold"},[_vm._v("Possible Solution")]),_c("div",{staticClass:"fc-black-13 text-left pT5",domProps:{innerHTML:_vm._s(_vm.ruleTemplate.possible_solution)}})])])])])]),_c("div",{staticClass:"fR rules-body-sum-right"},[_c("place-holder",{staticClass:"rules-body-sum-right-bg",attrs:{ruleTemplate:_vm.ruleTemplate,ruleId:_vm.ruleTemplate.ruleId,selectedCategory:_vm.selectedCategory,templateId:_vm.ruleTemplate.id}})],1)])])]),_vm.thresholddialog?_c("new-rule",{attrs:{rules:_vm.selectedRules,ruleId:_vm.selectedRule,visibility:_vm.thresholddialog},on:{"update:visibility":function($event){_vm.thresholddialog=$event}}}):_vm._e(),_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,query:_vm.resourceQuery,showAsset:!0,disable:!0},on:{associate:function(data){return _vm.associateResource(data,"assets")},"update:visibility":function($event){_vm.chooserVisibility=$event}}})],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"rules-sum-header"},[_c("div",{staticClass:"fc-black-14 fwBold text-left text-uppercase"},[_vm._v(" Template Summary ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pT20"},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("ALARM CLEAR WHEN")]),_c("div",{staticClass:"fc-black-13 text-left pT5"},[_vm._v(" Autoclear (Default) ")])])}],objectSpread2=__webpack_require__(595082),NewRule=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(670560),__webpack_require__(552154)),SpaceAssetMultiChooser=__webpack_require__(673362),PlaceHolder=__webpack_require__(115927),vuex_esm=__webpack_require__(420629),templateHepler=__webpack_require__(663356),AlarmRulesTemplateSummaryvue_type_script_lang_js={components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,NewRule:NewRule/* default */.Z,PlaceHolder:PlaceHolder/* default */.Z},mixins:[templateHepler/* default */.Z],computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAlarmSeverityByName"])),{},{ruleTemplate:function(){return this.$store.state.ruleTemplate.selectedTemplate},selectedCategory:function(){var _this=this;if(this.ruleTemplate&&this.ruleTemplate.category){var category=this.assetCategory.filter((function(d){return d.name===_this.ruleTemplate.category}));return category}return null}},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{resourceData:function(){return{assetCategory:this.selectedCategory[0].id}},resourceLabel:function(){if(this.ruleTemplate.category){var message,category=this.selectedCategory,selectedCount=this.selectedResourceList.length;if(selectedCount){var includeMsg=this.isIncludeResource?"included":"excluded";if(1===selectedCount)return this.selectedResourceList[0].name;message=selectedCount+" "+category[0].name+(selectedCount>1?"s":"")+" "+includeMsg}else message="All "+category[0].name+"s";return message}return this.selectedResourceList.id>0?this.selectedResourceList.name:null}}),data:function(){return{templates:[],selectedRules:null,thresholddialog:!1,chooserVisibility:!1,selectedResourceList:[],resourceQuery:null,selectedMetricFields:null,groupedPlaceHolder:[],thresholdFields:null,placeHolderVisibility:!1}},mounted:function(){this.ruleTemplate&&(this.groupedPlaceHolder=this.placeHolderGroupFields())},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity")},methods:{editThresholdRule:function(){this.getRuleContext()},goBack:function(){window.history.go(-1)},getRuleContext:function(){var _this2=this,placeHolder={},index=0;Object.keys(this.groupedPlaceHolder).forEach((function(key){_this2.groupedPlaceHolder[key].forEach((function(d,i){if("ASSETCHOOSER"===d.selection_criteria.displayType&&_this2.selectedResourceList.length>0){var fieldName=_this2.isIncludeResource?"includeResource":"excludeResource";d.uniqueId=fieldName,_this2.selectedResourceList.length>0?d.default_value=_this2.selectedResourceList.map((function(resource){return resource.id})):d.default_value=null}placeHolder[index]=d,index++}))}));var params={id:this.ruleTemplate.id,placeHolder:placeHolder},url="/v2/rules/template/getRuleContext";this.$http.post(url,params).then((function(response){0===response.data.responseCode&&response.data.result&&(_this2.selectedRules=response.data.result,_this2.selectedRule=-1,_this2.thresholddialog=!0)})).catch((function(){}))},getFieldDisplayName:function(name){var fieldObj;return this.thresholdFields.filter((function(d){d.name===name&&(fieldObj=d)})),fieldObj},checkFields:function(){this.loadThresholdFields(this.selectedCategory[0].id)},closeDialog:function(){this.$emit("update:visibility",!1)},placeHolderGroupFields:function(){var _this3=this;return this.checkFields(),Object.keys(this.ruleTemplate.placeHolder).forEach((function(key){_this3.templates.push(_this3.ruleTemplate.placeHolder[key])})),this.groupByField(this.templates,"type")},associateResource:function(selectedObj,type){"assets"===type?selectedObj.resourceList&&selectedObj.resourceList.length&&(this.selectedResourceList=selectedObj.resourceList,this.isIncludeResource=selectedObj.isInclude):this.selectedResourceList=selectedObj,this.chooserVisibility=!1,this.resourceQuery=null}}},rules_AlarmRulesTemplateSummaryvue_type_script_lang_js=AlarmRulesTemplateSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(rules_AlarmRulesTemplateSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmRulesTemplateSummary=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/97630.js.map