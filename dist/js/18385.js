"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[18385],{
/***/350367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUploadPhotos}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FUploadPhotos.vue?vue&type=template&id=5a0f9682
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"upload-photos-dialog fc-dialog-center-container",attrs:{title:"Upload Photos",visible:_vm.showDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event},"before-close":_vm.closeDialog}},[_vm.showDialog?_c("el-upload",{attrs:{multiple:"","list-type":"picture-card","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-error":_vm.onError,"on-remove":_vm.onRemove}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e(),_c("span",{staticClass:"dialog-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.done}},[_vm._v("Done")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),eventBus=__webpack_require__(398011),FUploadPhotosvue_type_script_lang_js={props:["module","record","list"],data:function(){return{photos:[],showDialog:!1,isChanged:!1}},methods:{open:function(){this.photos=(0,validation/* isEmpty */.xb)(this.list)?[]:this.list,this.showDialog=!0},onUpload:function(_ref){var file=_ref.file,data=(_ref.onError,{parentId:this.record.id,module:this.module}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.list.push(result.photos[0]),this.isChanged=!0)},onError:function(){this.$message.error(this.$t("setup.users_management.Invalid_image"))},onRemove:function(file){var _this=this;this.$http.post("/v2/photos/delete",{id:file.id,photoId:file.photoId,module:this.module,parentId:this.record.id}).then((function(response){if(0===response.data.responseCode){var list=(0,toConsumableArray/* default */.Z)(_this.list),index=list.findIndex((function(f){return f.id===file.id}));list.splice(index,1),_this.$emit("updatePhotos",list),_this.isChanged=!0}})).catch((function(){}))},done:function(){this.showDialog=!1,this.photos=[],this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1)},closeDialog:function(){this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1),this.showDialog=!1}}},components_FUploadPhotosvue_type_script_lang_js=FUploadPhotosvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUploadPhotosvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUploadPhotos=component.exports},
/***/664281:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Storeroom}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Storeroom.vue?vue&type=template&id=1587f6ed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.storeRoom?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[!_vm.showSlide||"undefined"!==typeof _vm.disableSlide&&!1!==_vm.disableSlide?_vm.isSummary?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{attrs:{trigger:"click",height:"180px",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.photos,(function(photo,index){return photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()})),1)],1),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.storeRoom.name))])])]):_vm._e(),!_vm.showUpload||"undefined"!==typeof _vm.disableUpload&&!1!==_vm.disableUpload?_vm._e():_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{list:_vm.photos,module:"storeroomphotos",record:_vm.storeRoom}})],1)])]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(350367)),Storeroomvue_type_script_lang_js={props:["size","storeRoom","name","hovercard","disableUpload","disableSlide","isSummary"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.storeRoom.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge","mxhuge"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl()},computed:{showSlide:function(){if(this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},watch:{storeRoom:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){var self=this;this.storeRoom.id>0&&(self.photosLoading=!0,self.$http.get("/photos/get?module=storeroomphotos&parentId="+this.storeRoom.id).then((function(response){if(self.photos=response.data.photos?response.data.photos:[],self.photosLoading=!1,self.photos.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.photos);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var photo=_step2.value;if(photo.url){self.avatarUrl=photo.url;break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}))),this.storeRoom.avatarUrl?this.avatarUrl=this.storeRoom.avatarUrl:(this.avatarUrl=this.getDefaultAvatar(),this.storeRoom.avatarUrl=this.avatarUrl)},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.storeRoom)return __webpack_require__(494194)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Storeroomvue_type_script_lang_js=Storeroomvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Storeroomvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Storeroom=component.exports},
/***/396859:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ToolStoreIssueReturn}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/Inventory/Storerooms/ToolStoreIssueReturn.vue?vue&type=template&id=59b9a372&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["issue"===_vm.type?_c("div",[_c("div",[_c("el-dialog",{key:_vm.storeRoom.id,attrs:{visible:_vm.showToolIssueReturn,title:"ISSUE TOOL","before-close":_vm.cancelForm,"custom-class":"fc-dialog-center-container"},on:{"update:visible":function($event){_vm.showToolIssueReturn=$event}}},[_vm.loading?_c("div",{staticClass:"mT50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),_c("div",[_c("div",{staticClass:"fc-black3-16 text-left fw4"},[_vm._v(" Tool ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 mT5",attrs:{filterable:""},on:{change:function($event){return _vm.selectedToolFill(_vm.selectedTool)}},model:{value:_vm.selectedTool,callback:function($$v){_vm.selectedTool=$$v},expression:"selectedTool"}},[_vm._l(_vm.toolList,(function(tool){return[tool.toolType.approvalNeeded||tool.storeRoom.approvalNeeded?_vm._e():_c("el-option",{key:tool.id,attrs:{label:tool.toolType.name,value:tool.id}})]}))],2)],1),_c("div",{staticClass:"height400 mT20"},[_vm.tool&&_vm.tool.toolType.isRotating&&_vm.tool?_c("div",[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.purLoading,expression:"purLoading"}],staticClass:"width100 inventory-inner-table",attrs:{height:"200",data:_vm.purchasedUnUsedToolList,"empty-text":"No Rotating assets available.","default-sort":{prop:"costDate",order:"descending"}},on:{"selection-change":_vm.toggleUnUsedToolSelection}},[_c("el-table-column",{attrs:{type:"selection",width:"60"}}),_c("el-table-column",{attrs:{prop:"serialNumber",sortable:"",label:"SERIAL NUMBER"}}),_c("el-table-column",{attrs:{sortable:"",label:"RATE/HR"}},[[_c("currency",{attrs:{value:_vm.tool.rate}})]],2),_c("el-table-column",{attrs:{sortable:"",prop:"purchasedDate",formatter:_vm.getDateTime,label:"PURCHASED TIME"}})],1),_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-black3-16 text-left fw4"},[_vm._v(" Issue To ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mT5",attrs:{filterable:"",clearable:"",placeholder:"Select User"},model:{value:_vm.userid,callback:function($$v){_vm.userid=$$v},expression:"userid"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:parseInt(user.id)}})})),1)],1)],1)],1):_vm._e(),_vm.tool&&!_vm.tool.toolType.isRotating&&_vm.tool?_c("div",[_c("div",[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.tool.toolType.id))]),_c("div",{staticClass:"fc-black3-16 text-left"},[_vm._v(" "+_vm._s(_vm.tool.toolType.name)+" ")])]),_c("el-col",{attrs:{span:12}},[_c("store-room-avatar",{attrs:{name:"true",size:"lg",storeRoom:_vm.tool.storeRoom}})],1)],1)],1),_c("el-row",{staticClass:"mT40",attrs:{gutter:10}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-black3-16 text-left fw4"},[_vm._v(" Issue Quantity ")]),_c("el-input",{staticClass:"fc-input-full-border2 mT5",attrs:{placeholder:"Issue Quantity",min:1,max:_vm.tool.currentQuantity,type:"number"},model:{value:_vm.quantity,callback:function($$v){_vm.quantity=$$v},expression:"quantity"}},[_c("span",{staticClass:"width100 item-input-txt",attrs:{slot:"suffix"},slot:"suffix"},[_vm._v("Tool")])]),_c("div",{staticClass:"green-txt2-13 mT10 fw4"},[_vm._v(" "+_vm._s(_vm.tool.currentQuantity)+" Current Balance ")])],1),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-black3-16 text-left fw4"},[_vm._v(" Issue To ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mT5",attrs:{filterable:"",clearable:"",placeholder:"Select User"},model:{value:_vm.userid,callback:function($$v){_vm.userid=$$v},expression:"userid"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:parseInt(user.id)}})})),1)],1)],1)],1):_vm._e()]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.cancelForm()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.saveIssueForm()}}},[_vm._v(_vm._s(_vm.saving?"Submitting...":"SAVE"))])],1)])],1)]):_vm._e(),"return"===_vm.type?_c("div",[_c("el-dialog",{key:_vm.storeRoom.id,attrs:{visible:_vm.showToolIssueReturn,title:"RETURN TOOL","before-close":_vm.cancelForm,width:"65%","custom-class":"fc-dialog-center-container"},on:{"update:visible":function($event){_vm.showToolIssueReturn=$event}}},[_vm.showLoading?_c("spinner",{staticClass:"height400",attrs:{show:_vm.showLoading,size:"80"}}):_vm.$validation.isEmpty(_vm.toolList)?_c("div",{staticClass:"tools-return-empty-state height400"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon icon-130"}}),_c("div",{staticClass:"tools-return-empty-state-text"},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_tools_available_in_this_storeroom"))+" ")])],1):_c("div",[_c("div",[_c("div",{staticClass:"fc-black3-16 text-left fw4"},[_vm._v(" Tool ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 mT5",attrs:{filterable:""},on:{change:function($event){return _vm.selectedToolFill(_vm.selectedTool)}},model:{value:_vm.selectedTool,callback:function($$v){_vm.selectedTool=$$v},expression:"selectedTool"}},_vm._l(_vm.toolList,(function(tool){return _c("el-option",{key:tool.id,attrs:{label:tool.toolType.name,value:tool.id}})})),1)],1),_c("div",{staticClass:"height400 mT20"},[_vm.issueLoading?_c("div",[_c("spinner",{attrs:{show:_vm.issueLoading}})],1):_vm._e(),_vm.issueLoading||!_vm.tool||_vm.tool.toolType.isRotating?_vm._e():_c("div",[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.issueLoading,expression:"issueLoading"}],staticClass:"inventory-inner-table width100",attrs:{data:_vm.issuedTools,"empty-text":"This tool is not issued to anyone.",height:"300","default-sort":{prop:"tool.storeRoom.name",order:"descending"}}},[_c("el-table-column",{attrs:{prop:"tool.storeRoom.name",sortable:"",width:"190",label:"STOREROOM NAME"}}),_c("el-table-column",{attrs:{prop:"remainingQuantity",sortable:"",label:"QUANTITY"}}),_c("el-table-column",{attrs:{prop:"sysModifiedTime",formatter:_vm.getDateTimeIssuedTime,width:"160",sortable:"",label:"ISSUED TIME"}}),_c("el-table-column",{attrs:{label:"ISSUED TO"},scopedSlots:_vm._u([{key:"default",fn:function(tool){return[2===tool.row.transactionType?_c("div",[_vm._v(" WO-"),_c("router-link",{staticClass:"fc-id",attrs:{to:{path:"/app/wo/orders/summary/"+tool.row.parentId}}},[_vm._v(" #"+_vm._s(tool.row.parentId)+" ")])],1):_vm._e(),3===tool.row.transactionType?_c("div",[4===tool.row.resource.resourceType?_c("user-avatar",{attrs:{size:"md",user:_vm.$store.getters.getUser(tool.row.parentId)}}):2===tool.row.resource.resourceType?_c("span",[_vm._v("Asset-"),_c("router-link",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,animation:"shift-away"},expression:"{\n                          placement: 'top',\n                          arrow: true,\n                          animation: 'shift-away',\n                        }"}],staticClass:"fc-id",attrs:{title:tool.row.resource?tool.row.resource.name:"",to:{path:"/app/at/assets/all/"+tool.row.parentId+"/overview/"}}},[_vm._v("#"+_vm._s(tool.row.parentId))])],1):1===tool.row.resource.resourceType?_c("span",[_vm._v("Space- "),_c("router-link",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,animation:"shift-away"},expression:"{\n                          placement: 'top',\n                          arrow: true,\n                          animation: 'shift-away',\n                        }"}],staticClass:"fc-id",attrs:{title:tool.row.resource?tool.row.resource.name:"",to:{path:_vm.getSpaceRouteLink(tool.row.resource)}}},[_vm._v("#"+_vm._s(tool.row.parentId))])],1):_vm._e()],1):_vm._e()]}}],null,!1,2072943877)}),_c("el-table-column",{attrs:{width:"180",label:"RETURN QUANTITY"},scopedSlots:_vm._u([{key:"default",fn:function(issuedTool){return[_c("div",[_c("el-input",{ref:"quantityElInput",staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Quantity",min:1,max:issuedTool.row.remainingQuantity,type:"number"},model:{value:issuedTool.row.updateQuantity,callback:function($$v){_vm.$set(issuedTool.row,"updateQuantity",$$v)},expression:"issuedTool.row.updateQuantity"}})],1)]}}],null,!1,2624838559)})],1)],1),!_vm.issueLoading&&_vm.tool&&_vm.tool.toolType.isRotating?_c("div",[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.issueLoading,expression:"issueLoading"}],staticClass:"inventory-inner-table width100",attrs:{data:_vm.issuedTools,"empty-text":"This tool is not issued to anyone.",height:"300","default-sort":{prop:"storeRoom.name",order:"descending"}},on:{"selection-change":_vm.toggleReturnToolSelection}},[_c("el-table-column",{attrs:{type:"selection",width:"60"}}),_c("el-table-column",{attrs:{prop:"tool.storeRoom.name",sortable:"",label:"STOREROOM NAME",width:"190"}}),_c("el-table-column",{attrs:{prop:"asset.name",sortable:"",label:"NAME",width:"140"}}),_c("el-table-column",{attrs:{prop:"asset.serialNumber",sortable:"",label:"SERIAL NUMBER",width:"170"}}),_c("el-table-column",{attrs:{label:"ISSUED TO",width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(tool){return[2===tool.row.transactionType?_c("div",[_vm._v(" WO-"),_c("router-link",{staticClass:"fc-id",attrs:{to:{path:"/app/wo/orders/summary/"+tool.row.parentId}}},[_vm._v(" #"+_vm._s(tool.row.parentId)+" ")])],1):_vm._e(),3===tool.row.transactionType?_c("div",[4===tool.row.resource.resourceType?_c("user-avatar",{attrs:{size:"md",user:_vm.$store.getters.getUser(tool.row.parentId)}}):2===tool.row.resource.resourceType?_c("span",[_vm._v("Asset-"),_c("router-link",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,animation:"shift-away"},expression:"{\n                          placement: 'top',\n                          arrow: true,\n                          animation: 'shift-away',\n                        }"}],staticClass:"fc-id",attrs:{title:tool.row.resource?tool.row.resource.name:"",to:{path:"/app/at/assets/all/"+tool.row.parentId+"/overview/"}}},[_vm._v("#"+_vm._s(tool.row.parentId))])],1):1===tool.row.resource.resourceType?_c("span",[_vm._v("Space- "),_c("router-link",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,animation:"shift-away"},expression:"{\n                          placement: 'top',\n                          arrow: true,\n                          animation: 'shift-away',\n                        }"}],staticClass:"fc-id",attrs:{title:tool.row.resource?tool.row.resource.name:"",to:{path:_vm.getSpaceRouteLink(tool.row.resource)}}},[_vm._v("#"+_vm._s(tool.row.parentId))])],1):_vm._e()],1):_vm._e()]}}],null,!1,2072943877)}),_c("el-table-column",{attrs:{prop:"sysModifiedTime",formatter:_vm.getDateTimeIssuedTime,sortable:"",label:"ISSUED TIME"}})],1)],1):_vm._e()])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.cancelForm()}}},[_vm._v("CLOSE")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.returnTool()}}},[_vm._v(_vm._s(_vm.saving?"Submitting...":"Return"))])],1)],1)],1):_vm._e()])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(450886),__webpack_require__(648324),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(425728),__webpack_require__(420629)),User=__webpack_require__(426803),Storeroom=__webpack_require__(664281),inventoryHelper=__webpack_require__(424477),InventoryUtil=__webpack_require__(976195),api=__webpack_require__(32284),validation=__webpack_require__(990260),transactionTypeEnum={STOCK:1,MANUAL:3},transactionStateEnum={ISSUE:2,RETURN:3},ToolStoreIssueReturnvue_type_script_lang_js={props:["storeRoom","showToolIssueReturn","type"],components:{UserAvatar:User/* default */.Z,StoreRoomAvatar:Storeroom/* default */.Z},mixins:[inventoryHelper/* default */.Z],data:function(){return{saving:!1,loading:!1,fetchingMore:!1,quantity:null,userid:null,workorderid:null,purchasedUnUsedToolList:[],selectedUnUsedTools:null,issueForm:null,issuedTools:[],selectedIndTrackReturnTool:null,purLoading:!0,tool:null,issueLoading:!1,selectedTool:null,showLoading:!0,toolList:[]}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){this.loadToolforStoreRoom()},methods:{loadToolforStoreRoom:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.showLoading=!0,filters={storeRoom:{operatorId:36,value:[_this.storeRoom.id+""]}},_context.next=4,(0,InventoryUtil/* getFilteredToolList */.FI)(filters);case 4:if(_this.toolList=_context.sent,!(0,validation/* isEmpty */.xb)(_this.toolList)){_context.next=7;break}return _context.abrupt("return");case 7:_this.selectedTool=_this.toolList[0].id,_this.tool=_this.toolList[0],"issue"===_this.type?_this.loadPurchasedUnUsedToolsList():"return"===_this.type&&_this.loadIssuedTool(),_this.showLoading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},savedForm:function(){this.cancelForm()},cancelForm:function(){this.$emit("refresh"),this.$emit("update:showToolIssueReturn",!1)},issueTool:function(toolTransactionData){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$createReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.createRecord("toolTransactions",{data:toolTransactionData,params:{issue:!0}});case 2:_yield$API$createReco=_context2.sent,error=_yield$API$createReco.error,error?_this2.$message.error(error.message||_this2.$t("common.wo_report.unable_to_update")):(_this2.$message.success(_this2.$t("common.header.tool_issued_successfully")),_this2.savedForm());case 5:case"end":return _context2.stop()}}),_callee2)})))()},saveIssueForm:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var toolTransactionData,_toolTransactionData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this3.userid){_context3.next=4;break}_this3.$message.error("Choose a User"),_context3.next=14;break;case 4:if(!_this3.userid||_this3.tool.toolType.isRotating||!_this3.quantity){_context3.next=10;break}return toolTransactionData={tool:{id:_this3.tool.id},parentId:_this3.userid,transactionType:transactionTypeEnum.MANUAL,transactionState:transactionStateEnum.ISSUE,issuedTo:{ouid:_this3.userid},quantity:_this3.quantity},_context3.next=8,_this3.issueTool(toolTransactionData);case 8:_context3.next=14;break;case 10:if(!(_this3.userid&&_this3.tool.toolType.isRotating&&_this3.selectedUnUsedTools)){_context3.next=14;break}return _toolTransactionData={tool:{id:_this3.tool.id},parentId:_this3.userid,transactionType:transactionTypeEnum.MANUAL,transactionState:transactionStateEnum.ISSUE,issuedTo:{ouid:_this3.userid},assetIds:_this3.selectedUnUsedTools},_context3.next=14,_this3.issueTool(_toolTransactionData);case 14:case"end":return _context3.stop()}}),_callee3)})))()},loadPurchasedUnUsedToolsList:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var filters;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!_this4.tool.toolType.isRotating){_context4.next=7;break}return filters={rotatingTool:{operatorId:36,value:[_this4.tool.id+""]},isUsed:{operatorId:15,value:[!1+""]}},_this4.purLoading=!0,_context4.next=5,_this4.$util.getFilteredAssetList(filters);case 5:_this4.purchasedUnUsedToolList=_context4.sent,_this4.purLoading=!1;case 7:case"end":return _context4.stop()}}),_callee4)})))()},toggleUnUsedToolSelection:function(selected){this.selectedUnUsedTools=selected.map((function(value){return value.id}))},toggleReturnToolSelection:function(selected){this.selectedIndTrackReturnTool=selected},getDateTime:function(val){var value=val.purchasedDate;return value&&-1!==value?this.$options.filters.formatDate(value):""},getDateTimeIssuedTime:function(val){var value=val.sysModifiedTime;return value&&-1!==value?this.$options.filters.formatDate(value,!0):""},loadIssuedTool:function(){var self=this,filters={tool:{operatorId:5,value:[this.tool.id+""]}};self.issueLoading=!0,self.$http.get("/v2/toolTransactions/view/showToolTransactionListForReturn?showToolsForReturn=true&filters="+encodeURIComponent(JSON.stringify(filters))).then((function(response){self.issueLoading=!1,self.issuedTools=response.data.result.toolTransactions})).catch((function(error){error&&(self.issueLoading=!1,self.fetchingMore=!1)}))},isValid:function(val){if(null!==val&&""!==val&&void 0!==val)return!0},returnToolCall:function(toolTransaction,rotating){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var url,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return url="v3/modules/data/bulkCreate",params={data:{toolTransactions:toolTransaction},moduleName:"toolTransactions",params:{return:!0}},_context5.next=4,api/* API */.bl.post(url,params);case 4:_yield$API$post=_context5.sent,error=_yield$API$post.error,error?_this5.$message.error(error.message||_this5.$t("common.wo_report.unable_to_update")):(_this5.$message.success(_this5.$t("common.header.tool_returned_successfully")),_this5.loadIssuedTool(),rotating&&(_this5.selectedIndTrackReturnTool=null),_this5.savedForm(),_this5.$emit("refreshInventory"));case 7:case"end":return _context5.stop()}}),_callee5)})))()},returnTool:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var toolTransaction,i,tTemp,_toolTransaction,_i,temp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(_this6.tool.toolType.isRotating){_context6.next=15;break}toolTransaction=[],_context6.t0=(0,regeneratorRuntime/* default */.Z)().keys(_this6.issuedTools);case 3:if((_context6.t1=_context6.t0()).done){_context6.next=11;break}if(i=_context6.t1.value,!(_this6.issuedTools[i].updateQuantity&&_this6.issuedTools[i].updateQuantity>_this6.issuedTools[i].remainingQuantity)){_context6.next=8;break}return _this6.$message.error(_this6.$t("common._common.return_quantity_greater_issued")),_context6.abrupt("return");case 8:_this6.isValid(_this6.issuedTools[i].updateQuantity)&&!isNaN(_this6.issuedTools[i].updateQuantity)&&(tTemp={tool:{id:_this6.issuedTools[i].tool.id},parentTransactionId:_this6.issuedTools[i].id,parentId:_this6.issuedTools[i].parentId,transactionType:_this6.issuedTools[i].transactionType,transactionState:transactionStateEnum.RETURN,quantity:parseInt(_this6.issuedTools[i].updateQuantity)},toolTransaction.push(tTemp)),_context6.next=3;break;case 11:return _context6.next=13,_this6.returnToolCall(toolTransaction,_this6.$getProperty(_this6.tool,"toolType.isRotating",null));case 13:_context6.next=20;break;case 15:if(!_this6.tool.toolType.isRotating){_context6.next=20;break}for(_i in _toolTransaction=[],_this6.selectedIndTrackReturnTool)temp={tool:{id:_this6.selectedIndTrackReturnTool[_i].tool.id},parentId:_this6.selectedIndTrackReturnTool[_i].parentId,parentTransactionId:_this6.selectedIndTrackReturnTool[_i].id,transactionType:_this6.selectedIndTrackReturnTool[_i].transactionType,transactionState:transactionStateEnum.RETURN,assetIds:[_this6.selectedIndTrackReturnTool[_i].asset.id]},_toolTransaction.push(temp);return _context6.next=20,_this6.returnToolCall(_toolTransaction,_this6.$getProperty(_this6.tool,"toolType.isRotating"));case 20:case"end":return _context6.stop()}}),_callee6)})))()},selectedToolFill:function(val){val&&(this.tool=this.toolList.find((function(it){return val===it.id})),"issue"===this.type?this.loadPurchasedUnUsedToolsList():"return"===this.type&&this.loadIssuedTool())}}},Storerooms_ToolStoreIssueReturnvue_type_script_lang_js=ToolStoreIssueReturnvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Storerooms_ToolStoreIssueReturnvue_type_script_lang_js,render,staticRenderFns,!1,null,"59b9a372",null)
/* harmony default export */,ToolStoreIssueReturn=component.exports},
/***/770724:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return IssuesAndReturns}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/Inventory/Storerooms/component/IssuesAndReturns.vue?vue&type=template&id=364915d6
var IssueItems_render,IssueItems_staticRenderFns,IssueTools_render,IssueTools_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-tabs",{model:{value:_vm.moduleName,callback:function($$v){_vm.moduleName=$$v},expression:"moduleName"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.items"),name:"workorderItem"}},["workorderItem"==_vm.moduleName?_c("IssueItems",_vm._b({staticClass:"height-100"},"IssueItems",_vm.$attrs,!1)):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("common.header.tools"),name:"workorderTools"}},["workorderTools"==_vm.moduleName?_c("IssueTools",_vm._b({staticClass:"height-100"},"IssueTools",_vm.$attrs,!1)):_vm._e()],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),IssuesAndReturnsBasevue_type_template_id_49d93a1e_scoped_true_render=(__webpack_require__(648324),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("LineItemList",_vm._b({ref:"lineItemList",staticClass:"flex-grow",attrs:{config:_vm.listConfiguration,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,widgetDetails:_vm.widgetDetails,hideNotification:!0,additionalParams:_vm.additionalParams,viewname:"all"},on:{onCreateOrUpdate:_vm.issuedRecordData,clickedActionBtn:_vm.btnValue},scopedSlots:_vm._u([{key:"empty-state-icon-text",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/storeroom/issue-to-wo",iconClass:"p10"}}),_c("div",{staticClass:"line-item-list-empty-state-text"},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.issues_empty_msg"))+" ")])]},proxy:!0},{key:"empty-state-btn",fn:function(){return[_c("div",{staticClass:"line-item-list-footer"},[_vm._l(_vm.emptyStateBtnList,(function(btnObj,index){return _c("el-button",{key:"footer-btn-"+index,staticClass:"line-item-list-footer-add-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.clickAction(btnObj.value)}}},[_c("div",{staticClass:"d-flex",staticStyle:{height:"14px"}},[_vm._v(" "+_vm._s(btnObj.label)+" ")])])})),_vm._l(_vm.additionalBtnList,(function(btnObj,index){return _c("el-button",{key:"additional-btn-"+index,staticClass:"line-item-list-footer-add-btn",attrs:{type:"primary"},on:{click:function($event){return btnObj.action(btnObj)}}},[_c("div",{staticClass:"d-flex",staticStyle:{height:"14px"}},[_vm._v(" "+_vm._s(btnObj.label)+" ")])])}))],2)]},proxy:!0}])},"LineItemList",_vm.$attrs,!1)),_c("portal",{attrs:{to:"pagebuilder-fixed-top"}},[_vm.showSuccessMsg?_c("div",{staticClass:"issuance-success-msg-container"},[_c("div",{staticClass:"success-msg-container"},[_c("InlineSvg",{staticClass:"success-icon",attrs:{src:"svgs/storeroom/white-check-circle",iconClass:"icon icon-sm-md"}}),_c("span",{staticClass:"item-name"},[_vm._v(" "+_vm._s(_vm.typeName))]),_c("span",{staticClass:"issue-success-msg"},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.has_been_issued_to")))]),_c("span",{staticClass:"work-order-name"},[_vm._v(" "+_vm._s(_vm.workOrderName))])],1),_c("span",{staticClass:"close-icon",on:{click:function($event){_vm.showSuccessMsg=!1}}},[_c("InlineSvg",{attrs:{src:"svgs/storeroom/ic-clear",iconClass:"icon icon-sm-md"}})],1)]):_vm._e()]),_vm.showToolsIssue?_c("tool-issue-return",{attrs:{storeRoom:_vm.details,type:"issue",showToolIssueReturn:_vm.showToolsIssue},on:{"update:showToolIssueReturn":function($event){_vm.showToolsIssue=$event},"update:show-tool-issue-return":function($event){_vm.showToolsIssue=$event},refreshInventory:_vm.refreshData}}):_vm._e(),_vm.showToolsReturn?_c("tool-issue-return",{attrs:{storeRoom:_vm.details,type:"return",showToolIssueReturn:_vm.showToolsReturn},on:{"update:showToolIssueReturn":function($event){_vm.showToolsReturn=$event},"update:show-tool-issue-return":function($event){_vm.showToolsReturn=$event},refreshInventory:_vm.refreshData}}):_vm._e()],1)}),IssuesAndReturnsBasevue_type_template_id_49d93a1e_scoped_true_staticRenderFns=[],LineItemList=(__webpack_require__(434284),__webpack_require__(197724)),validation=__webpack_require__(990260),InventoryMixin=__webpack_require__(796689),ToolStoreIssueReturn=__webpack_require__(396859),IssuesAndReturnsBasevue_type_script_lang_js={mixins:[InventoryMixin/* default */.Z],props:["details"],components:{LineItemList:LineItemList/* default */.Z,ToolIssueReturn:ToolStoreIssueReturn/* default */.Z},data:function(){return{showSuccessMsg:!1,issuedInventory:null,inventoryReservationId:null,actionButtonValue:null,recordsCount:null,isRotatingType:null,showToolsIssue:!1,showToolsReturn:!1}},computed:{additionalParams:function(){var _ref=this||{},inventoryReservationId=_ref.inventoryReservationId,actionButtonValue=_ref.actionButtonValue,_ref2=actionButtonValue||{},lookupModuleName=_ref2.lookupModuleName;return(0,validation/* isEmpty */.xb)(inventoryReservationId)||"inventoryReservation"!==lookupModuleName?{}:{inventoryReservation:{id:inventoryReservationId}}},additionalBtnList:function(){
// to be added by extended components
return[]},formConfig:function(){var _this=this,_ref3=this||{},actionButtonValue=_ref3.actionButtonValue,isRotatingType=_ref3.isRotatingType,_ref4=actionButtonValue||{},lookupModuleName=_ref4.lookupModuleName;return{formType:"POP_UP_FORM",formTitle:{defaultForm:this.$t("common.inventory.issue_to_workorder")},modifyFieldPropsHook:function(field){var _ref5=field||{},name=_ref5.name;return"storeRoom"===name?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0,required:!0,value:_this.$getProperty(_this.details,"id")}):
// if (name === 'issueTo') {
//   return {
//     ...field,
//     value: this.$getProperty(this.details, 'id'),
//   }
// }
"workorder"===name?"inventoryReservation"===lookupModuleName?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{required:!0,isDisabled:!0}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{required:!0}):"item"===name||"tool"===name||"quantity"===name&&isRotatingType?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0}):"asset"===name?isRotatingType?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{required:!0}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{hideField:!0}):void 0}}},listConfiguration:function(){var formConfig=this.formConfig;return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({getRecordList:function(){return[]}},formConfig||{}),{},{canHideHeader:!0})},widgetDetails:function(){var emptyStateBtnList=this.emptyStateBtnList;return{canHideHeader:!0,actionButtonList:emptyStateBtnList}},
// check if it needs to move to item component as tools must be issued only to a person
// if yes, change the name to issuedTo and move it to specific child components
workOrderName:function(){return this.$getProperty(this.issuedInventory,"workorder.subject",this.$t("common.inventory.the_mentioned_workorder"))}},methods:{btnValue:function(value){this.actionButtonValue=value},clickAction:function(btnObjValue){var _this$$refs$lineItemL;null===(_this$$refs$lineItemL=this.$refs["lineItemList"])||void 0===_this$$refs$lineItemL||_this$$refs$lineItemL.handleClickActionBtn(btnObjValue)},refreshData:function(){},issuedRecordData:function(response){var _this2=this,_ref6=response||{},error=_ref6.error,workorderItem=_ref6.workorderItem;error?this.$message.error(error||this.$t("common.inventory.error_occurred")):(this.issuedInventory=workorderItem,this.showSuccessMsg=!0,setTimeout((function(){_this2.showSuccessMsg=!1}),5e3)),this.inventoryReservationId=null}}},component_IssuesAndReturnsBasevue_type_script_lang_js=IssuesAndReturnsBasevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(component_IssuesAndReturnsBasevue_type_script_lang_js,IssuesAndReturnsBasevue_type_template_id_49d93a1e_scoped_true_render,IssuesAndReturnsBasevue_type_template_id_49d93a1e_scoped_true_staticRenderFns,!1,null,"49d93a1e",null)
/* harmony default export */,IssuesAndReturnsBase=component.exports,api=__webpack_require__(32284),CustomModuleData=__webpack_require__(689565),IssueItemsvue_type_script_lang_js={name:"IssueItems",extends:IssuesAndReturnsBase,computed:{moduleDisplayName:function(){return this.$t("common.workorder_actuals.work_order_item")},moduleName:function(){return"workorderItem"},emptyStateBtnList:function(){var _this=this;return this.checkStoreRoomPermission()?[{label:this.$t("common.inventory.issue_available_items"),value:{lookupModuleName:"item",lookupModuleDisplayName:this.$t("common.inventory.item"),getRecordDetails:function(){var _getRecordDetails=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(payload){var _ref,id,moduleName,workorder,workOrderId,queryParam,_yield$API$get,data,error,_ref2,workorderItem,_ref3,itemType,_ref4,isRotating;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref=payload||{},id=_ref.id,moduleName=_ref.moduleName,workorder=_this.workorder,workOrderId=_this.$getProperty(workorder,"id"),queryParam={itemId:id,workOrderId:workOrderId},_context.next=6,api/* API */.bl.get("/v3/workOrderItem/getWorkorderItem",queryParam);case 6:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context.next=13;break}_this.$message.error(error.message||_this.$t("common._common.error_occured")),_context.next=18;break;case 13:return _ref2=data||{},workorderItem=_ref2.workorderItem,_ref3=workorderItem||{},itemType=_ref3.itemType,_ref4=itemType||{},isRotating=_ref4.isRotating,_this.isRotatingType=isRotating,_context.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workorderItem),{},{moduleName:moduleName})));case 18:case"end":return _context.stop()}}),_callee)})));function getRecordDetails(_x){return _getRecordDetails.apply(this,arguments)}return getRecordDetails}(),getRecordList:function(){var _getRecordList=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(listParams){var _ref5,filters,itemModuleName,siteId,params,_yield$API$fetchAll,list,error,length;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref5=listParams||{},filters=_ref5.filters,itemModuleName="item",siteId=_this.siteId,params={siteId:siteId,includeServingSite:!0,filters:JSON.stringify(filters)},_context2.next=6,api/* API */.bl.fetchAll(itemModuleName,params);case 6:if(_yield$API$fetchAll=_context2.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error){_context2.next=13;break}return length=list.length,_this.recordsCount=length,_context2.abrupt("return",list);case 13:case"end":return _context2.stop()}}),_callee2)})));function getRecordList(_x2){return _getRecordList.apply(this,arguments)}return getRecordList}(),getRecordCount:function(){return _this.recordsCount}}},{label:this.$t("common.inventory.issue_reserved_items"),value:{lookupModuleName:"inventoryReservation",lookupModuleDisplayName:this.$t("common.inventory.reserved_items"),getRecordList:function(){var _getRecordList2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(listParams){var _ref6,filters,additionalFilters,params,_yield$API$fetchAll2,list,error,length;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref6=listParams||{},filters=_ref6.filters,additionalFilters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters||{}),{},{storeRoom:{operatorId:36,value:["".concat(_this.details.id)]},reservationStatus:{operatorId:10,value:["".concat(3)]},itemType:{operatorId:2}}),params={filters:JSON.stringify(additionalFilters)},_context3.next=5,api/* API */.bl.fetchAll("inventoryReservation",params);case 5:if(_yield$API$fetchAll2=_context3.sent,list=_yield$API$fetchAll2.list,error=_yield$API$fetchAll2.error,error){_context3.next=12;break}return length=list.length,_this.recordsCount=length,_context3.abrupt("return",list);case 12:case"end":return _context3.stop()}}),_callee3)})));function getRecordList(_x3){return _getRecordList2.apply(this,arguments)}return getRecordList}(),getRecordCount:function(){return _this.recordsCount},getRecordDetails:function(){var _getRecordDetails2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(payload){var _ref7,id,moduleName,queryParam,_yield$API$get2,data,error,_ref8,workorderItem,_ref9,itemType,_ref10,isRotating;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _ref7=payload||{},id=_ref7.id,moduleName=_ref7.moduleName,_this.inventoryReservationId=(0,validation/* isEmpty */.xb)(id)?null:id,queryParam={reservationId:id},_context4.next=5,api/* API */.bl.get("/v3/workOrderItem/getWorkorderItemFromReservation",queryParam);case 5:if(_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,_ref8=data||{},workorderItem=_ref8.workorderItem,_ref9=workorderItem||{},itemType=_ref9.itemType,_ref10=itemType||{},isRotating=_ref10.isRotating,_this.isRotatingType=isRotating,error){_context4.next=14;break}return _context4.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workorderItem),{},{moduleName:moduleName})));case 14:case"end":return _context4.stop()}}),_callee4)})));function getRecordDetails(_x4){return _getRecordDetails2.apply(this,arguments)}return getRecordDetails}()}}]:[]},typeName:function(){return this.$getProperty(this.issuedInventory,"itemType.name",this.$t("common.inventory.item"))}},methods:{}},component_IssueItemsvue_type_script_lang_js=IssueItemsvue_type_script_lang_js,IssueItems_component=(0,componentNormalizer/* default */.Z)(component_IssueItemsvue_type_script_lang_js,IssueItems_render,IssueItems_staticRenderFns,!1,null,null,null)
/* harmony default export */,IssueItems=IssueItems_component.exports,IssueToolsvue_type_script_lang_js={name:"IssueTools",extends:IssuesAndReturnsBase,computed:{moduleDisplayName:function(){return this.$t("common.workorder_actuals.work_order_tool")},moduleName:function(){return"workorderTools"},additionalBtnList:function(){var _this=this;return this.checkStoreRoomPermission()?[{label:this.$t("common.products.issue_to_person"),action:function(){_this.showToolsIssue=!0}},{label:this.$t("common._common.return_tools"),action:function(){_this.showToolsReturn=!0}}]:[]},emptyStateBtnList:function(){var _this2=this;return this.checkStoreRoomPermission()?[{label:this.$t("common.inventory.issue_available_tools"),value:{lookupModuleName:"tool",lookupModuleDisplayName:this.$t("common.header.tool"),getRecordDetails:function(){var _getRecordDetails=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(payload){var _ref,id,moduleName,workorder,workOrderId,queryParam,_yield$API$get,data,error,_ref2,workorderTools,_ref3,toolType,_ref4,isRotating;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref=payload||{},id=_ref.id,moduleName=_ref.moduleName,workorder=_this2.workorder,workOrderId=_this2.$getProperty(workorder,"id"),queryParam={toolId:id,workOrderId:workOrderId},_context.next=6,api/* API */.bl.get("/v3/workorderTools/getWorkorderTool",queryParam);case 6:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error){_context.next=13;break}_this2.$message.error(error.message||_this2.$t("common._common.error_occured")),_context.next=18;break;case 13:return _ref2=data||{},workorderTools=_ref2.workorderTools,_ref3=workorderTools||{},toolType=_ref3.toolType,_ref4=toolType||{},isRotating=_ref4.isRotating,_this2.isRotatingType=isRotating,_context.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workorderTools),{},{moduleName:moduleName})));case 18:case"end":return _context.stop()}}),_callee)})));function getRecordDetails(_x){return _getRecordDetails.apply(this,arguments)}return getRecordDetails}(),getRecordList:function(){var _getRecordList=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(listParams){var _ref5,filters,toolModuleName,siteId,params,_yield$API$fetchAll,list,error,length;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref5=listParams||{},filters=_ref5.filters,toolModuleName="tool",siteId=_this2.siteId,params={siteId:siteId,includeServingSite:!0,filters:JSON.stringify(filters)},_context2.next=6,api/* API */.bl.fetchAll(toolModuleName,params);case 6:if(_yield$API$fetchAll=_context2.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error){_context2.next=13;break}return length=list.length,_this2.recordsCount=length,_context2.abrupt("return",list);case 13:case"end":return _context2.stop()}}),_callee2)})));function getRecordList(_x2){return _getRecordList.apply(this,arguments)}return getRecordList}(),getRecordCount:function(){return _this2.recordsCount}}},{label:this.$t("common.inventory.issue_reserved_tools"),value:{lookupModuleName:"inventoryReservation",viewname:"all-tools",lookupModuleDisplayName:this.$t("common.inventory.reserved_tools"),getRecordList:function(){var _getRecordList2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(listParams){var _ref6,filters,additionalFilters,params,_yield$API$fetchAll2,list,error,length;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref6=listParams||{},filters=_ref6.filters,additionalFilters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters||{}),{},{storeRoom:{operatorId:36,value:["".concat(_this2.details.id)]},reservationStatus:{operatorId:10,value:["".concat(3)]},toolType:{operatorId:2}}),params={filters:JSON.stringify(additionalFilters)},_context3.next=5,api/* API */.bl.fetchAll("inventoryReservation",params);case 5:if(_yield$API$fetchAll2=_context3.sent,list=_yield$API$fetchAll2.list,error=_yield$API$fetchAll2.error,error){_context3.next=12;break}return length=list.length,_this2.recordsCount=length,_context3.abrupt("return",list);case 12:case"end":return _context3.stop()}}),_callee3)})));function getRecordList(_x3){return _getRecordList2.apply(this,arguments)}return getRecordList}(),getRecordCount:function(){return _this2.recordsCount},getRecordDetails:function(){var _getRecordDetails2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(payload){var _ref7,id,moduleName,queryParam,_yield$API$get2,data,error,_ref8,workorderTools,_ref9,toolType,_ref10,isRotating;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _ref7=payload||{},id=_ref7.id,moduleName=_ref7.moduleName,_this2.inventoryReservationId=(0,validation/* isEmpty */.xb)(id)?null:id,queryParam={reservationId:id},_context4.next=5,api/* API */.bl.get("/v3/workorderTools/getWorkorderToolFromReservation",queryParam);case 5:if(_yield$API$get2=_context4.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,_ref8=data||{},workorderTools=_ref8.workorderTools,_ref9=workorderTools||{},toolType=_ref9.toolType,_ref10=toolType||{},isRotating=_ref10.isRotating,_this2.isRotatingType=isRotating,error){_context4.next=14;break}return _context4.abrupt("return",new CustomModuleData/* CustomModuleData */.u((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workorderTools),{},{moduleName:moduleName})));case 14:case"end":return _context4.stop()}}),_callee4)})));function getRecordDetails(_x4){return _getRecordDetails2.apply(this,arguments)}return getRecordDetails}()}}]:[]},typeName:function(){return this.$getProperty(this.issuedInventory,"itemType.name",this.$t("common.inventory.item"))}},methods:{}},component_IssueToolsvue_type_script_lang_js=IssueToolsvue_type_script_lang_js,IssueTools_component=(0,componentNormalizer/* default */.Z)(component_IssueToolsvue_type_script_lang_js,IssueTools_render,IssueTools_staticRenderFns,!1,null,null,null)
/* harmony default export */,IssueTools=IssueTools_component.exports,IssuesAndReturnsvue_type_script_lang_js={components:{IssueItems:IssueItems,IssueTools:IssueTools},data:function(){return{moduleName:"workorderItem"}},computed:{}},component_IssuesAndReturnsvue_type_script_lang_js=IssuesAndReturnsvue_type_script_lang_js,IssuesAndReturns_component=(0,componentNormalizer/* default */.Z)(component_IssuesAndReturnsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,IssuesAndReturns=IssuesAndReturns_component.exports},
/***/494194:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/store-img.8acd997f.jpg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/18385.js.map