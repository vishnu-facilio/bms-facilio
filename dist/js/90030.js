"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[90030,23302],{
/***/415312:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NewImportModule}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
__webpack_require__(976801),__webpack_require__(670560);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js
var render,staticRenderFns,ColumnMapping_render,ColumnMapping_staticRenderFns,DataValidation_render,DataValidation_staticRenderFns,NewImportModule_render,NewImportModule_staticRenderFns,ImportModule=__webpack_require__(875545),ImportSetting=__webpack_require__(349188),ImportSettingvue_type_script_lang_js={extends:ImportSetting/* default */.Z,methods:{addAttachment:function(){var _this=this,formData=new FormData;formData.append("moduleName",this.module),formData.append("fileUpload",this.uploadFile),formData.append("importMode",this.importMode),this.loading=!0,this.$http.post("/v2/import/uploadHandler",formData).then((function(response){response.data&&(_this.loading=!1,0!==response.data.responseCode?(_this.$message.error(response.data.message),_this.deleteAttachment()):(_this.$emit("update:importProcessContext",response.data.result.importProcessContext),_this.$message.success("File Uploaded Successfully")))})).catch((function(error){_this.loading=!1,_this.$message.error(error),_this.deleteAttachment()}))}}},v2_ImportSettingvue_type_script_lang_js=ImportSettingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v2_ImportSettingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,v2_ImportSetting=component.exports,ColumnMapping=(__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(169358),__webpack_require__(700188)),ColumnMappingvue_type_script_lang_js={extends:ColumnMapping/* default */.Z,methods:{sendMapping:function(){if(this.checkForProperDateMapping()&&this.checkForProperFieldMapping()){for(var key in this.importProcessContext.fieldMapping={},this.importProcessContext.fieldMappingJSON={},this.fieldMappingForm.mappedValues)if(""!==this.fieldMappingForm.mappedValues[key]){var fieldMappingKey=void 0;fieldMappingKey=this.importProcessContext.facilioFieldMapping[this.fieldMappingForm.mappedValues[key]]?this.importProcessContext.facilioFieldMapping[this.fieldMappingForm.mappedValues[key]].module.name+"__"+this.fieldMappingForm.mappedValues[key]:this.importProcessContext.module.name+"__"+this.fieldMappingForm.mappedValues[key],this.importProcessContext.fieldMapping[fieldMappingKey]=key}if(this.mapImportSettingFields(),this.importProcessContext.fieldMappingString=JSON.stringify(this.importProcessContext.fieldMapping),null===this.importProcessContext.importJobMeta){var temp={};temp["dateFormats"]=this.fieldMappingForm.dateFormatMapping,this.importProcessContext.importJobMeta=JSON.stringify(temp)}else{var _temp=JSON.parse(this.importProcessContext.importJobMeta);_temp["dateFormats"]=this.fieldMappingForm.dateFormatMapping,this.importProcessContext.importJobMeta=JSON.stringify(_temp)}var self=this,assetId=this.asset;""===this.asset&&(assetId=null),this.saving.sendMapping=!0,this.$http.post("/v2/import/parseHandler",{importProcessContext:this.importProcessContext,assetId:assetId}).then((function(response){self.$emit("mappingResponse",response.data.result),self.saving.sendMapping=!1})).catch((function(error){self.saving.sendMapping=!1,self.$message.error("Data import failed! [ "+error+"]")}))}else!1===this.checkForProperFieldMapping()?this.$message.error("Please map all Update By columns"):!1===this.checkForProperDateMapping()?this.$message.error("Please map all date fields to a format before importing"):this.$message.error("Please map all mandatory columns and date fields")}}},v2_ColumnMappingvue_type_script_lang_js=ColumnMappingvue_type_script_lang_js,ColumnMapping_component=(0,componentNormalizer/* default */.Z)(v2_ColumnMappingvue_type_script_lang_js,ColumnMapping_render,ColumnMapping_staticRenderFns,!1,null,null,null)
/* harmony default export */,v2_ColumnMapping=ColumnMapping_component.exports,DataValidation=__webpack_require__(50381),DataValidationvue_type_script_lang_js={extends:DataValidation/* default */.Z,methods:{finishValidation:function(){var _this=this;this.saving=!0;var url=1===this.importProcessContext.importMode?"/v2/import/importHandler":"/import/importreading";this.$http.post(url,{importProcessContext:this.importProcessContext}).then((function(response){_this.$emit("update:importProcessContext",response.data.result.importProcessContext),_this.$emit("finishValidation",!0),_this.saving=!1})).catch((function(){_this.$message.error("Error Occured"),_this.saving=!1}))}}},v2_DataValidationvue_type_script_lang_js=DataValidationvue_type_script_lang_js,DataValidation_component=(0,componentNormalizer/* default */.Z)(v2_DataValidationvue_type_script_lang_js,DataValidation_render,DataValidation_staticRenderFns,!1,null,null,null)
/* harmony default export */,v2_DataValidation=DataValidation_component.exports,MODULES_SUPPORTED=["plannedmaintenance","pmPlanner","pmTrigger","pmResourcePlanner","resourceplanner","pmTasksImport","failureclass","failurecode","failurecodecauses","failurecoderemedies","labourCraftSkill"],NewImportModulevue_type_script_lang_js={extends:ImportModule["default"],components:{ImportSetting:v2_ImportSetting,FieldMapping:v2_ColumnMapping,DataValidation:v2_DataValidation},created:function(){var _ref=this.$route.params||{},moduleName=_ref.moduleName;MODULES_SUPPORTED.includes(moduleName)||this.$router.push({name:"notsupported"})}},module_import_NewImportModulevue_type_script_lang_js=NewImportModulevue_type_script_lang_js,NewImportModule_component=(0,componentNormalizer/* default */.Z)(module_import_NewImportModulevue_type_script_lang_js,NewImportModule_render,NewImportModule_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewImportModule=NewImportModule_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/90030.js.map