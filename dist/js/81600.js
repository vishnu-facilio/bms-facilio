"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[81600],{
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/68305:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceBookingCalendar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceBookingCalendar.vue?vue&type=template&id=85f25058
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showToday?_c("div",{staticClass:"vue-cal-header-wrapper"},[_c("div",{staticClass:"vuecal-top-heading"},[_c("div",{staticClass:"vue-schedule"},[_vm._v(_vm._s("Schedule"))]),_c("div",{staticClass:"vuecal-top-today"},[_vm.goToBooking?_c("el-tooltip",{attrs:{placement:"top",trigger:"hover",content:"Go to current booking"}},[_vm.goToBooking&&!_vm.isBookingCancel?_c("el-button",{staticClass:"vuecal-today-icon",on:{click:_vm.goToCurrentBooking}},[_c("inline-svg",{attrs:{src:"svgs/agent/currentBooking",iconClass:"icon text-center icon-md vertical-bottom"}})],1):_vm._e()],1):_vm._e(),_vm.showToday?_c("el-button",{staticClass:"vuecal-today-button mL10",on:{click:function($event){_vm.$refs.vuecal.switchView("day",new Date)}}},[_vm._v(" "+_vm._s("Today")+" ")]):_vm._e()],1)])]):_vm._e(),_c("vue-cal",{ref:"vuecal",staticClass:"vuecal--facilio--theme",class:_vm.calenderClass,attrs:{id:"vuecal","disable-views":["week","month","year","years"],"hide-view-selector":"","active-view":"day",events:_vm.localEvents,"time-cell-height":_vm.timeCellHeight,"selected-date":_vm.selectedDate,timeFormat:_vm.timeFormat,"on-event-click":_vm.onEventClick,"editable-events":{title:!1,drag:!1,resize:!1,delete:!1,create:!1}},on:{ready:_vm.afterRenderhook,"view-change":function($event){return _vm.updateDayEvents($event,_vm.$refs)}},scopedSlots:_vm._u([{key:"event",fn:function(ref){var event=ref.event;return[_c("el-popover",{attrs:{placement:"left",width:"450px",trigger:"click","close-delay":0,"open-delay":0},on:{hide:_vm.handleCloseDialog}},[_c("div",{staticStyle:{width:"450px","min-height":"200px"}},[_vm.showDialog?_c("SpaceBookingOverviewDialog",{attrs:{moduleName:_vm.moduleName,bookingId:_vm.bookingId,selectedEvent:_vm.selectedEvent},on:{close:_vm.handleCloseDialog}}):_vm._e()],1),_c("div",{staticClass:"event-object",class:_vm.reSizeEventBox(event),attrs:{slot:"reference"},slot:"reference"},[_c("div",{staticClass:"vuecal__event-title",domProps:{innerHTML:_vm._s(event.title)}}),_c("div",{staticClass:"vuecal__event-time"},[_c("span",[_vm._v(_vm._s(event.start.formatTime(_vm.eventTimeFormat)))]),_vm._v(_vm._s(" to ")+" "),_c("span",[_vm._v(_vm._s(event.end.formatTime(_vm.eventTimeFormat)))])])])])]}}])})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vue_cal_es=(__webpack_require__(648324),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(676894)),api=__webpack_require__(32284),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),utility_methods=__webpack_require__(773258),SpaceBookingOverviewDialogvue_type_template_id_5768e874_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticStyle:{width:"450px","background-color":"#fff"}},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):!_vm.isLoading&&_vm.booking?_c("div",{ref:"spaceBookingOverviewCard",staticClass:"spacebookingdetails-card height100"},[_c("div",{staticClass:"booking-header"},[_c("span",{staticClass:"booking-state"},[_c("div",{staticClass:"color-box",style:{"background-color":_vm.selectedEvent.color}})]),_vm._v(_vm._s(_vm.booking.name)+" ")]),_c("div",{ref:"spaceBookingDetailCard",staticClass:"spacebookingdetails-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{staticClass:"inline-grid",attrs:{span:24}},[_c("div",{staticClass:"inline-block   header"},[_c("div",{staticClass:"flex-middle"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/calendar",iconClass:"icon text-center icon-md vertical-bottom"}}),_c("div",{staticClass:" pL15 ellipsis main-content"},[_vm._v(" "+_vm._s(_vm.formatDateWithoutTime(_vm.booking.bookingStartTime))+" - "+_vm._s(_vm.formatDateWithoutTime(_vm.booking.bookingEndTime))+" ")])],1)]),_vm.space?_c("div",{staticClass:"inline-block  detail-container"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"icon-container"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/new_location",iconClass:"icon text-center icon-md vertical-bottom"}})],1),_c("div",{staticClass:"space-container"},[_c("div",{staticClass:" pL15 ellipsis main-content"},[_vm._v(" "+_vm._s(""+_vm.space.name)+" ")]),_c("div",{staticClass:" pL15 ellipsis sub-content"},[_vm.space.building?_c("div",[_vm._v(" "+_vm._s(_vm.space.building.name+" ")+" ")]):_vm._e(),_vm.space.floor?_c("div",[_vm._v(" "+_vm._s(", "+_vm.space.floor.name)+" ")]):_vm._e()])])])]):_vm._e(),_c("div",[_c("div",{staticClass:"inline-block people-container"},[_c("div",{staticClass:"flex-middle pB5"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/people",iconClass:"icon text-center icon-md vertical-bottom"}}),_c("div",{staticClass:" pL15 ellipsis main-content"},[_vm._v(" "+_vm._s(""+_vm.getAttendeeCount)+" "+_vm._s(_vm.$t("setup.spaceBooking.attendees"))+" ")])],1),_c("div",{staticClass:"attendee-container"},[_vm.getAttendeeCount<5?_c("div",{staticClass:"avatar-container"},[_c("UserAvatar",{staticClass:"pointer pB5 pT5",attrs:{size:"md",user:_vm.getHost,iconClass:"icon text-center icon-xxl"}}),_vm._l(_vm.getAttendeesObject,(function(user,index){return _c("UserAvatar",{key:index,staticClass:"pointer pB5 pT5",attrs:{size:"md",user:user,iconClass:"icon text-center icon-xxl"}})}))],2):_c("div",[_c("UserAvatar",{staticClass:"pointer pB5 pT5",attrs:{size:"md",user:_vm.getHost,iconClass:"icon text-center icon-xxl"}}),_c("GroupAvatar",{attrs:{size:"md",avatars:_vm.getAttendeesObject,count:2,iconClass:"icon text-center icon-xxl"}})],1)])])]),_vm.booking.description?_c("div",{staticClass:"inline-block description"},[_c("div",{staticClass:"flex-middle",staticStyle:{height:"inherit"}},[_c("div",{staticClass:"icon-container mR15"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/description",iconClass:"icon text-center icon-md vertical-bottom"}})],1),_c("read-more",{staticClass:"read-more",attrs:{"more-str":"read more",text:_vm.booking.description,link:"#","less-str":"read less","max-chars":160}})],1)]):_vm._e()])],1)],1),_vm.editFormVisibility?_c("div",{staticClass:"spacebookingdetails-container booking-form-container"},[_vm.editFormVisibility?_c("InlineSpaceBookingForm",{attrs:{moduleName:_vm.moduleName,formData:_vm.formObj,recordData:_vm.recordData},on:{closeForm:_vm.closeForm,saved:_vm.handleSaveForm,"update:formData":function($event){_vm.formObj=$event},"update:form-data":function($event){_vm.formObj=$event}}}):_vm._e()],1):_vm._e()]):_vm._e()},SpaceBookingOverviewDialogvue_type_template_id_5768e874_staticRenderFns=[],objectSpread2=__webpack_require__(595082),SpaceBookingOverview=(__webpack_require__(450886),__webpack_require__(683390)),SpaceBookingOverviewDialogvue_type_script_lang_js={extends:SpaceBookingOverview/* default */.Z,props:["bookingId","selectedEvent"],data:function(){return{isLoading:!1}},computed:{getAttendees:function(){var attendee={count:0,hostCount:0,internalAttendeesCount:0,externalAttendeeCount:0,internalAttendees:[],externalAttendee:[],allAttendee:{}};return this.booking&&this.booking.host&&(attendee.hostCount=1),this.booking&&this.booking.internalAttendees&&this.booking.internalAttendees.length&&(attendee.internalAttendeesCount=this.booking.internalAttendees.length,attendee.internalAttendees=this.booking.internalAttendees.map((function(v){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},v),{},{value:"Internal Attendee"})}))),this.booking&&this.booking.externalAttendee&&this.booking.externalAttendee.length&&(attendee.externalAttendeeCount=this.booking.externalAttendee.length,attendee.externalAttendee=this.booking.externalAttendee.map((function(v){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},v),{},{value:"External Attendee"})})),attendee.externalAttendee=this.booking.externalAttendee),attendee.count+=attendee.hostCount+attendee.internalAttendeesCount+attendee.externalAttendeeCount,attendee.allAttendee=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attendee.internalAttendees),attendee.externalAttendee),attendee},getAttendeeCount:function(){var attendee=this.getAttendees;return attendee.count},getAttendeesObject:function(){var attendee=this.getAttendees;return attendee.allAttendee}},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.bookingId){_context.next=7;break}return _this.isLoading=!0,_context.next=4,_this.loadRecord(_this.bookingId);case 4:return _context.next=6,_this.loadSpaceDetails(_this.spaceId);case 6:_this.isLoading=!1;case 7:case"end":return _context.stop()}}),_callee)})))()},methods:{loadRecord:function(id){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.booking={},_context2.next=3,api/* API */.bl.post("/v3/modules/data/summary",{moduleName:_this2.moduleName,id:id});case 3:_yield$API$post=_context2.sent,data=_yield$API$post.data,error=_yield$API$post.error,error?_this2.$message.error(error):_this2.booking=data.spacebooking||null;case 7:case"end":return _context2.stop()}}),_callee2)})))()}}},components_SpaceBookingOverviewDialogvue_type_script_lang_js=SpaceBookingOverviewDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceBookingOverviewDialogvue_type_script_lang_js,SpaceBookingOverviewDialogvue_type_template_id_5768e874_render,SpaceBookingOverviewDialogvue_type_template_id_5768e874_staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceBookingOverviewDialog=component.exports,constant=__webpack_require__(354754),SpaceBookingCalendarvue_type_script_lang_js={props:["startHour","startDate","endDate","selectDate","spaceId","moduleName","spaceCategory","showToday","goToBooking","bookingHour","bookingDate","events","height","isBookingCancel"],components:{VueCal:vue_cal_es/* default */.Z,SpaceBookingOverviewDialog:SpaceBookingOverviewDialog},data:function(){return{space:null,isLoading:!1,timeCellHeight:40,pointDate:null,localEvents:[],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],selectedDate:null,booking:null,showPopup:!1,bookingId:null,selectedEvent:null,showDialog:!1,calenderClass:"vuecal--facilio--theme"}},mounted:function(){this.selectedDate=(0,utility_methods/* deepCloneObject */.kh)(this.selectDate),this.init()},computed:{calHeight:function(){return this.height||400},getCurrentTime:function(){return this.$helpers.getOrgMoment().valueOf()},timeFormat:function(){return"hh:mm A"===this.$timeformat?"h {am}":"HH:mm"},eventTimeFormat:function(){return"hh:mm A"===this.$timeformat?"hh:mm {am}":"HH:mm"},showEdit:function(){var $org=this.$org,$hasPermission=this.$hasPermission,orgIdsToCheck=constant/* default */.Z.isCustomModulePermissionsEnabled,canShowEdit=!orgIdsToCheck($org.id)||$hasPermission("".concat(this.moduleName,":UPDATE"));return canShowEdit}},methods:{reSizeEventBox:function(event){var _ref=event||null,startTimeMinutes=_ref.startTimeMinutes,endTimeMinutes=_ref.endTimeMinutes,diff=endTimeMinutes-startTimeMinutes;diff<=15?this.calenderClass="line-div":diff>=15&&diff<=30&&(this.calenderClass="multyline-div")},handleCloseDialog:function(){this.showDialog=!1},init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return"hh:mm A"===_this.$timeformat&&(_this.timeformat="h:mm"),_context.next=3,_this.loadSpaceBookingRecords(_this.startDate,_this.endDate,_this.spaceId);case 3:case"end":return _context.stop()}}),_callee)})))()},afterRenderhook:function(){this.scrollToElement()},scrollToElement:function(){var calendar=document.getElementsByClassName("vuecal__bg")[0];calendar.scrollTo({top:this.startHour*this.timeCellHeight,behavior:"smooth"})},updateDayEvents:function(event,ref){var start=new Date(event.startDate);this.selectedDate=start.format("YYYY-MM-DD");var end=new Date(event.endDate);ref.vuecal.switchView("day",new Date(start.getTime()));var startDate=start.getTime(),endDate=end.getTime();this.loadSpaceBookingRecords(startDate,endDate,this.spaceId)},loadSpaceBookingRecords:function(startTime,endTime,spaceId){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,url,viewname,filters,params,_yield$API$get,data,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_this2.isLoading=!0,moduleName=_this2.moduleName,url="/v3/modules/data/list",viewname="all",filters=JSON.stringify({bookingEndTime:{operatorId:18,value:[String(endTime+1)]},bookingStartTime:{operatorId:19,value:[String(startTime-1)]},space:{operatorId:36,value:[String(spaceId)]},isCancelled:{operatorId:15,value:["false"]}}),params={moduleName:moduleName,viewname:viewname,filters:filters,page:1,perPage:50,withCount:!1},_context2.next=9,api/* API */.bl.get(url,params);case 9:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(message=error.message,_this2.$message.error(message||"Error Occured")):(_this2.bookings=data.spacebooking,_this2.generateEvents(),_this2.isLoading=!1),_context2.next=18;break;case 15:_context2.prev=15,_context2.t0=_context2["catch"](0),_this2.$message.error(_context2.t0);case 18:case"end":return _context2.stop()}}),_callee2,null,[[0,15]])})))()},generateEvents:function(){var _this3=this;this.localEvents=[],this.bookings.forEach((function(booking){var _this3$events,obj={},startDate=new Date(booking.bookingStartTime),endDate=new Date(booking.bookingEndTime);_this3.$set(obj,"start",startDate.format("YYYY-MM-DD HH:mm")),_this3.$set(obj,"end",endDate.format("YYYY-MM-DD HH:mm")),_this3.$set(obj,"title",booking.name),_this3.$set(obj,"bookingId",booking.id),_this3.$set(obj,"split",1),_this3.$set(obj,"color","#0053cc"),booking.isCancelled&&(_this3.$set(obj,"class","cancel-booking"),_this3.$set(obj,"color","#ff6666e6")),"checkedIn"===booking.moduleState.status&&(_this3.$set(obj,"class","check-in"),_this3.$set(obj,"color","#1cdb98e6")),_this3.localEvents.push(obj),(null===(_this3$events=_this3.events)||void 0===_this3$events?void 0:_this3$events.size)>0&&_this3.localEvents.push(_this3.events[0])}))},goToCurrentBooking:function(){var start=new Date(this.bookingDate);this.selectedDate=start.format("YYYY-MM-DD"),this.$refs.vuecal.switchView("day",new Date(start.getTime()));var startDate=moment_timezone_default()(this.bookingDate).startOf("day").valueOf(),endDate=moment_timezone_default()(this.bookingDate).endOf("day").valueOf();this.loadSpaceBookingRecords(startDate,endDate,this.spaceId);var calendar=document.getElementsByClassName("vuecal__bg")[0];calendar.scrollTo({top:this.bookingHour*this.timeCellHeight,behavior:"smooth"})},onEventClick:function(event,e){this.selectedEvent=event;var id=event.bookingId;this.bookingId=id,this.showDialog=!0,
// Prevent navigating to narrower view (default vue-cal behavior).
e.stopPropagation()},createBooking:function(event){var start=event.start,end=event.end,obj={bookingStartTime:start,bookingEndTime:end};this.$emit("book",obj)}}},components_SpaceBookingCalendarvue_type_script_lang_js=SpaceBookingCalendarvue_type_script_lang_js,SpaceBookingCalendar_component=(0,componentNormalizer/* default */.Z)(components_SpaceBookingCalendarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceBookingCalendar=SpaceBookingCalendar_component.exports},
/***/683390:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceBookingOverview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceBookingOverview.vue?vue&type=template&id=0202113d
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"spaceBookingOverviewCard",staticClass:"spacebookingdetails-card"},[_c("div",{ref:"spaceBookingDetailCard",staticClass:"spacebookingdetails-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{staticClass:"inline-grid",attrs:{span:24}},[_c("div",{staticClass:"inline-block   header"},[_c("div",{staticClass:"flex-middle"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/calendar",iconClass:"icon text-center icon-md vertical-bottom"}}),_c("div",{staticClass:" pL15 ellipsis main-content"},[_vm._v(" "+_vm._s(_vm.formatDateWithoutTime(_vm.details.bookingStartTime))+" - "+_vm._s(_vm.formatDateWithoutTime(_vm.details.bookingEndTime))+" ")])],1)]),_vm.space?_c("div",{staticClass:"inline-block  detail-container"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"icon-container"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/new_location",iconClass:"icon text-center icon-md vertical-bottom"}})],1),_c("div",{staticClass:"space-container"},[_c("div",{staticClass:" pL15 ellipsis main-content"},[_vm._v(" "+_vm._s(""+_vm.space.name)+" ")]),_c("div",{staticClass:" pL15 ellipsis sub-content"},[_vm.space.building?_c("div",[_vm._v(" "+_vm._s(_vm.space.building.name+" ")+" ")]):_vm._e(),_vm.space.floor?_c("div",[_vm._v(" "+_vm._s(", "+_vm.space.floor.name)+" ")]):_vm._e()])])])]):_vm._e(),_c("div",[_c("div",{staticClass:"inline-block people-container"},[_c("div",{staticClass:"flex-middle pB5"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/people",iconClass:"icon text-center icon-md vertical-bottom"}}),_c("div",{staticClass:" pL15 ellipsis main-content"},[_vm._v(" "+_vm._s(""+_vm.getCount)+" "+_vm._s(_vm.$t("setup.spaceBooking.attendees"))+" ")])],1),_c("div",{staticClass:"attendee-container"},[_vm.getCount<5?_c("div",{staticClass:"avatar-container"},[_c("UserAvatar",{staticClass:"pointer pB5 pT5",attrs:{size:"md",user:_vm.getHost,iconClass:"icon text-center icon-xxl"}}),_vm._l(_vm.getAttendeeObject,(function(user,index){return _c("UserAvatar",{key:index,staticClass:"pointer pB5 pT5",attrs:{size:"md",user:user,iconClass:"icon text-center icon-xxl"}})}))],2):_c("div",[_c("UserAvatar",{staticClass:"pointer pB5 pT5",attrs:{size:"md",user:_vm.getHost,iconClass:"icon text-center icon-xxl"}}),_c("GroupAvatar",{attrs:{size:"md",avatars:_vm.getAttendeeObject,count:2,iconClass:"icon text-center icon-xxl"}})],1)])])]),_vm.details.description?_c("div",{staticClass:"inline-block description"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"icon-container"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/description",iconClass:"icon text-center icon-md vertical-bottom"}})],1),_c("div",{staticClass:"hide-container",attrs:{id:"secondarydescription"}},[_c("p",[_vm._v(" "+_vm._s(""+_vm.details.description)+" ")])]),_c("div",{staticClass:"width100",attrs:{id:"more"}},[_c("div",{staticClass:"width100 wrapper pL15 pR15"},[_c("div",{staticClass:"width100 box"},[_c("div",{staticClass:"float"}),_c("p",[_vm._v(" "+_vm._s(""+_vm.details.description)+" ")])])])])])]):_vm._e()])],1)],1),_vm.editFormVisibility?_c("div",{staticClass:"spacebookingdetails-container booking-form-container"},[_vm.editFormVisibility?_c("InlineSpaceBookingForm",{attrs:{moduleName:_vm.moduleName,formData:_vm.formObj,recordData:_vm.recordData},on:{closeForm:_vm.closeForm,saved:_vm.handleSaveForm,"update:formData":function($event){_vm.formObj=$event},"update:form-data":function($event){_vm.formObj=$event}}}):_vm._e()],1):_vm._e()])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),UserAvatarDetailsvue_type_template_id_a7d77096_scoped_true_render=(__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(659749),__webpack_require__(386544),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||_vm.users.find((function(usr){return usr.id===_vm.user.id})).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||_vm.$store.getters.getGroup(_vm.group.id).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",{staticClass:"avatar-details"},[_c("span",{staticClass:"q-item-label d-flex flex-wrap avatar-details-name"},[_vm._v(_vm._s(_vm.userObj.name))])]),_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap avatar-details-description"},[_vm._v(_vm._s(_vm.userObj.value))])]),_vm.userObj.role&&_vm.userObj.role.name?_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap avatar-details-description"},[_vm._v(_vm._s(_vm.userObj.role.name))])]):_vm._e()]):_vm._e()],2)]):_vm._e()}),UserAvatarDetailsvue_type_template_id_a7d77096_scoped_true_staticRenderFns=[],User=__webpack_require__(426803),UserAvatarDetailsvue_type_script_lang_js={extends:User/* default */.Z},avatar_UserAvatarDetailsvue_type_script_lang_js=UserAvatarDetailsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_UserAvatarDetailsvue_type_script_lang_js,UserAvatarDetailsvue_type_template_id_a7d77096_scoped_true_render,UserAvatarDetailsvue_type_template_id_a7d77096_scoped_true_staticRenderFns,!1,null,"a7d77096",null)
/* harmony default export */,UserAvatarDetails=component.exports,InlineSpaceBookingFormvue_type_template_id_ef6fecce_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:!0,"before-close":_vm.closeDialog,"append-to-body":!0,fullscreen:!0,"custom-class":"fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog fc-web-form-dialog f-webform-right-dialog fc-floor-plan-booking"}},[_c("div",{staticClass:"fc-pm-main-content-H"},[_vm._v(_vm._s(_vm.$t("tenant.occupant.booking")))]),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{staticClass:"fp-bookings-form",attrs:{form:_vm.formObj,module:_vm.moduleName,moduleData:_vm.moduleData,moduleDataId:_vm.moduleDataId,moduleDisplayName:_vm.moduleDisplayName,isSaving:_vm.isSaving,isV3Api:_vm.isV3Api,isEdit:!0,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,formLabelPosition:"top"},on:{"update:form":function($event){_vm.formObj=$event},onBlur:_vm.onBlurHook,save:_vm.saveRecord,cancel:_vm.closeDialog}})],1)},InlineSpaceBookingFormvue_type_template_id_ef6fecce_staticRenderFns=[],validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(990260)),FWebform=__webpack_require__(434500),FormCreation=__webpack_require__(373729),api=__webpack_require__(32284),InlineSpaceBookingFormvue_type_script_lang_js={extends:FormCreation/* default */.Z,components:{FWebform:FWebform/* default */.Z},props:["formVisibility","formData","moduleName","recordData"],data:function(){return{isSaving:!1}},computed:{moduleDisplayName:function(){return this.formObj&&this.formObj.module?this.formObj.module.displayName:"Booking"},moduleDataId:function(){var moduleData=this.moduleData,_ref=moduleData||{},id=_ref.id;return id||null},isV3Api:function(){return!0}},methods:{init:function(){this.formData&&(this.formObj=this.formData,this.selectedForm=this.formData),this.recordData&&(this.moduleData=this.recordData)},getFormattedSlotData:function(moduleData){var _moduleData$slotList=moduleData.slotList,slotList=void 0===_moduleData$slotList?[]:_moduleData$slotList,slotData=[];return(0,validation/* isEmpty */.xb)(slotList)||slotList.forEach((function(record){slotData.push(record.slot)})),slotData},afterSerializeHook:function(_ref2){_ref2.data},afterSaveHook:function(_ref3){var error=_ref3.error;error||this.$emit("saved")},closeDialog:function(){this.$emit("closeForm")},saveRecord:function(formModel){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var afterSaveHook,moduleName,moduleDataId,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return afterSaveHook=_this.afterSaveHook,moduleName=_this.moduleName,moduleDataId=_this.moduleDataId,_this.isSaving=!0,_context.next=4,api/* API */.bl.updateRecord(moduleName,{id:moduleDataId,data:formModel});case 4:response=_context.sent,_this.isSaving=!1,
// Hook to handle notification after crud operation
_this.notificationHandler(response),
// Hook to handle response after crud operation
!(0,validation/* isEmpty */.xb)(afterSaveHook)&&(0,validation/* isFunction */.mf)(afterSaveHook)&&_this.afterSaveHook(response);case 8:case"end":return _context.stop()}}),_callee)})))()}}},components_InlineSpaceBookingFormvue_type_script_lang_js=InlineSpaceBookingFormvue_type_script_lang_js,InlineSpaceBookingForm_component=(0,componentNormalizer/* default */.Z)(components_InlineSpaceBookingFormvue_type_script_lang_js,InlineSpaceBookingFormvue_type_template_id_ef6fecce_render,InlineSpaceBookingFormvue_type_template_id_ef6fecce_staticRenderFns,!1,null,null,null)
/* harmony default export */,InlineSpaceBookingForm=InlineSpaceBookingForm_component.exports,eventBus=__webpack_require__(398011),GroupedAvatarUservue_type_template_id_2fa17a61_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"avatar-container"},[_vm._l(_vm.listAvatar,(function(user,key){return key<_vm.count?_c("UserAvatar",{key:key,staticClass:"pointer pB5 pT5",attrs:{size:"md",user:user,iconClass:"icon text-center icon-xxl"}}):_vm._e()})),_vm.listAvatar.length>_vm.count?_c("div",{staticClass:"extended-container "},[_c("AvatarTooltip",{attrs:{avatar:_vm.groupedAvatar}},[_vm.listAvatar.length>_vm.count?_c("button",{staticClass:"popover"},[_c("div",{staticClass:"overall-container"},[_c("div",{staticClass:"more-avatar"},[_vm._v(_vm._s("+"+_vm.getRemainingCount))]),_c("div",{staticClass:"more"},[_vm._v(_vm._s("Attendees"))])])]):_vm._e()])],1):_vm._e()],2)])},GroupedAvatarUservue_type_template_id_2fa17a61_staticRenderFns=[],GroupedAvatarPopovervue_type_template_id_7d115ffb_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{"popper-class":"avatar-popup",placement:"right",width:"220",height:"200",trigger:"hover"},on:{hide:_vm.onHide},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",[_c("div",{staticClass:"p15"},_vm._l(_vm.avatar,(function(user,key){return _c("UserAvatar",{key:key,staticClass:"pointer pB5 pT5",attrs:{size:"md",user:user,iconClass:"icon text-center icon-xxl"}})})),1)]),_c("div",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("default")],2)])},GroupedAvatarPopovervue_type_template_id_7d115ffb_staticRenderFns=[],GroupedAvatarPopovervue_type_script_lang_js={props:["avatar"],data:function(){return{popoverShown:!1}},components:{UserAvatar:UserAvatarDetails},methods:{onHide:function(){this.$emit("hide")}}},GroupedAvatar_GroupedAvatarPopovervue_type_script_lang_js=GroupedAvatarPopovervue_type_script_lang_js,GroupedAvatarPopover_component=(0,componentNormalizer/* default */.Z)(GroupedAvatar_GroupedAvatarPopovervue_type_script_lang_js,GroupedAvatarPopovervue_type_template_id_7d115ffb_render,GroupedAvatarPopovervue_type_template_id_7d115ffb_staticRenderFns,!1,null,null,null)
/* harmony default export */,GroupedAvatarPopover=GroupedAvatarPopover_component.exports,GroupedAvatarUservue_type_script_lang_js={props:["avatars","count"],data:function(){return{stackedLimit:3,stackedMenu:!1,menuMaxHeight:"".concat(304,"px"),listAvatar:[],groupedAvatar:[],active:!1}},components:{UserAvatar:UserAvatarDetails,AvatarTooltip:GroupedAvatarPopover},mounted:function(){if(this.avatars){var avatarObject=this.avatars;for(var key in avatarObject)this.listAvatar.push(avatarObject[key]),key>=2&&this.groupedAvatar.push(avatarObject[key])}},computed:{getRemainingCount:function(){var remainingCount=0;return this.listAvatar.length>3&&(remainingCount=this.listAvatar.length-2),remainingCount}}},GroupedAvatar_GroupedAvatarUservue_type_script_lang_js=GroupedAvatarUservue_type_script_lang_js,GroupedAvatarUser_component=(0,componentNormalizer/* default */.Z)(GroupedAvatar_GroupedAvatarUservue_type_script_lang_js,GroupedAvatarUservue_type_template_id_2fa17a61_render,GroupedAvatarUservue_type_template_id_2fa17a61_staticRenderFns,!1,null,null,null)
/* harmony default export */,GroupedAvatarUser=GroupedAvatarUser_component.exports,vuex_esm=__webpack_require__(420629),SpaceBookingOverviewvue_type_script_lang_js={props:["widget","moduleName","details","layoutParams","resizeWidget","primaryFields","approvalMeta","hideTitleSection"],components:{UserAvatar:UserAvatarDetails,InlineSpaceBookingForm:InlineSpaceBookingForm,GroupAvatar:GroupedAvatarUser},data:function(){return{editFormVisibility:!1,forms:[],recordData:null,space:null,role:null,peopleType:{internalAttendee:null,externalAttendee:null},notesModuleName:"spaceBookingNotes",attachmentsModuleName:"spaceBookingAttachments",booking:null}},computed:{spacebookingData:function(){return this.details||this.booking},spaceId:function(){var _this$spacebookingDat;return null!==(_this$spacebookingDat=this.spacebookingData)&&void 0!==_this$spacebookingDat&&null!==(_this$spacebookingDat=_this$spacebookingDat.space)&&void 0!==_this$spacebookingDat&&_this$spacebookingDat.id?this.spacebookingData.space.id:null},getBuilding:function(){var _this$space,buildingName="";return null!==(_this$space=this.space)&&void 0!==_this$space&&null!==(_this$space=_this$space.building)&&void 0!==_this$space&&_this$space.name&&(buildingName+="".concat(this.space.building.name," - ")),buildingName},getFloor:function(){var _this$space2,floor="";return null!==(_this$space2=this.space)&&void 0!==_this$space2&&null!==(_this$space2=_this$space2.floor)&&void 0!==_this$space2&&_this$space2.name&&(floor+="".concat(this.space.floor.name)),floor},formObj:function(){return this.forms.length?this.forms[0]:null},getHost:function(){var host=null;return this.spacebookingData&&(host=this.spacebookingData.host,host.value="Host"),host},getAttendee:function(){var attendee={count:0,hostCount:0,internalAttendeesCount:0,externalAttendeeCount:0,internalAttendees:[],externalAttendee:[],allAttendee:{}};return this.spacebookingData&&this.spacebookingData.host&&(attendee.hostCount=1),this.spacebookingData&&this.spacebookingData.internalAttendees&&this.spacebookingData.internalAttendees.length&&(attendee.internalAttendeesCount=this.spacebookingData.internalAttendees.length,attendee.internalAttendees=this.spacebookingData.internalAttendees.map((function(v){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},v),{},{value:"Internal Attendee"})}))),this.spacebookingData&&this.spacebookingData.externalAttendee&&this.spacebookingData.externalAttendee.length&&(attendee.externalAttendeeCount=this.spacebookingData.externalAttendee.length,attendee.externalAttendee=this.spacebookingData.externalAttendee.map((function(v){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},v),{},{value:"External Attendee"})})),attendee.externalAttendee=this.spacebookingData.externalAttendee),attendee.count+=attendee.hostCount+attendee.internalAttendeesCount+attendee.externalAttendeeCount,attendee.allAttendee=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attendee.internalAttendees),attendee.externalAttendee),attendee},getCount:function(){var attendee=this.getAttendee;return attendee.count},getAttendeeObject:function(){var attendee=this.getAttendee;return attendee.allAttendee},sectionHeight:function(){var sectionDOM=document.getElementById("secondarydescription");return sectionDOM?sectionDOM.offsetHeight:0}},mounted:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$spacebookingDat2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadFormsList();case 2:if(_this.recordData=_this.spacebookingData,!_this.spaceId){_context.next=6;break}return _context.next=6,_this.loadSpaceDetails();case 6:eventBus/* eventBus */.Y.$on("location-changed",(function(id){id&&(_this.isLoading=!0,_this.loadSpaceDetails(id))})),null!==(_this$spacebookingDat2=_this.spacebookingData)&&void 0!==_this$spacebookingDat2&&_this$spacebookingDat2.description&&_this.getMore(),_this.afterloadHook(),_this.autoResize();case 10:case"end":return _context.stop()}}),_callee)})))()},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({getWidgetHeight:function(){

},afterloadHook:function(){
// after data load hook
}},(0,vuex_esm/* mapGetters */.Se)(["getUser"])),{},{loadSpaceDetails:function(id){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,error,data,space;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/v3/modules/data/summary?id=".concat(id||_this2.spaceId,"&moduleName=space"));case 2:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this2.$message.success("Error while loading "):(space=data.space,null!=space&&(_this2.space=space,_this2.isLoading=!1));case 6:case"end":return _context2.stop()}}),_callee2)})))()},formatDate:function(date,exclTime,onlyTime){return this.$options.filters.formatDate(date,exclTime,onlyTime)},formatDateWithoutTime:function(date){return this.formatDate(date,!1,!1)},getMore:function(){var root=document.getElementById("more"),self=this,wrapper=document.querySelector(".wrapper"),box=wrapper.querySelector(".box"),float=wrapper.querySelector(".float"),btn=wrapper.querySelector("button");function init(){float.innerHTML='<button class="">... Read More</div>',btn=wrapper.querySelector("button"),btn.addEventListener("click",(function(){wrapper.classList.contains("expanded")?(wrapper.classList.remove("expanded"),this.innerHTML="... Read More",self.autoResize()):(wrapper.classList.add("expanded"),this.innerHTML="View Less",self.autoResize())}))}function destroy(){float.innerHTML="",wrapper.classList.add("expanded")}function checkInit(){wrapper.classList.remove("expanded");var hasOverflow=box.scrollHeight>box.clientHeight;hasOverflow?init():destroy()}root.style.setProperty("--lines",2),checkInit(),window.addEventListener("resize",(function(){checkInit()})),document.addEventListener("DOMContentLoaded",(function(){checkInit()}))},getDayEnumValue:function(day){return day&&day>0&&day<8?this.dayEnumMap[day]:""},handleSaveForm:function(){this.editFormVisibility=!1,eventBus/* eventBus */.Y.$emit("refreshdata")},loadFormsList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url,_yield$API$get2,data,error,message,_ref,_ref$forms,forms;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return url="/v2/forms?moduleName=".concat(_this3.moduleName),_this3.isLoading=!0,_context3.next=4,api/* API */.bl.get(url);case 4:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?(message=error.message,_this3.$message.error(message)):(_ref=data||{},_ref$forms=_ref.forms,forms=void 0===_ref$forms?[]:_ref$forms,_this3.$set(_this3,"forms",forms));case 8:case"end":return _context3.stop()}}),_callee3)})))()},handleEditForm:function(){this.editFormVisibility=!0},closeForm:function(){this.editFormVisibility=!1},autoResize:function(){var _this4=this;this.$nextTick((function(){setTimeout((function(){var container=_this4.$refs["spaceBookingDetailCard"];if(container){var height=container.scrollHeight+20,width=container.scrollWidth;_this4.resizeWidget&&_this4.resizeWidget({height:height,width:width})}}))}))}})},components_SpaceBookingOverviewvue_type_script_lang_js=SpaceBookingOverviewvue_type_script_lang_js,SpaceBookingOverview_component=(0,componentNormalizer/* default */.Z)(components_SpaceBookingOverviewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceBookingOverview=SpaceBookingOverview_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/81600.js.map