"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[67386],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/467386:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return History}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/History.vue?vue&type=template&id=6fb6d361
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"history-container",staticClass:"p30"},[_vm.details.createdTime<1553875578690?_c("activities",{ref:"activitiesDiv",attrs:{record:_vm.details,module:_vm.moduleName}}):_c("AssetActivaties",{ref:"activitiesDiv",attrs:{record:_vm.details,module:"asset"},on:{resizeWidget:_vm.autoResize}})],1)},staticRenderFns=[],Activities2=__webpack_require__(638507),AssetActivatiesvue_type_template_id_fd2c10f2_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"block"},[_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",[_c("div",{staticClass:"fc-black-com f14 bold pL10"},[_vm._v(" "+_vm._s(_vm.$t("asset.history.history"))+" ")])]),_c("div",[_c("el-dropdown",{staticClass:"fc-dropdown-menu-border",attrs:{trigger:"click"}},[_c("el-button",{staticClass:"fc-btn-group-white",attrs:{type:"primary"}},[_c("div",[_vm._v(" "+_vm._s(_vm.fixedFilter)+" "),_c("i",{staticClass:"el-icon-arrow-down"})])]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.$helpers.isLicenseEnabled("COMMISSIONING")?_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.setCommissioningLogActive()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.decommission.commissioning_log"))+" ")])]):_vm._e(),_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.getFilteredActivities("Downtime History")}}},[_vm._v(" "+_vm._s(_vm.$t("asset.history.downtime_history"))+" ")])]),_c("el-dropdown-item",[_c("div",{on:{click:function($event){return _vm.getFilteredActivities("All History")}}},[_vm._v(" "+_vm._s(_vm.$t("asset.history.all_history"))+" ")])])],1)],1)],1)]),_vm.loading?_c("div",[_c("Spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm.logActive?_c("LogActivity",{attrs:{recordId:_vm.recordId,selectedModule:"asset",details:_vm.record},on:{autoResizeWidget:_vm.autoResize}}):[_vm.$validation.isEmpty(_vm.activities)?_c("div",[_c("div",{staticClass:"flex-middle width100 height80vh justify-center white-bg-block flex-direction-column shadow-none"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/history",iconClass:"icon icon-xxxxlg mR10"}}),_c("div",{staticClass:"nowo-label text-center pT10"},[_vm._v(" "+_vm._s(_vm.$t("asset.history.no_history_available"))+" ")])],1)]):_c("div",{staticClass:"mT20"},[_c("el-timeline",{staticClass:"wo-activity"},[_vm._l(_vm.activities,(function(activity,index){return[_vm.messageEmptyCheck(activity)?_c("el-timeline-item",{key:index,attrs:{type:"primary",timestamp:_vm._f("formatDate")(activity.ttime)}},[_vm.operatingHourCheck(activity)?_c("div",[_c("avatar",{attrs:{size:"sm",user:{name:activity.doneBy.name}}}),_vm._v(" "+_vm._s(activity.doneBy.name)+" "),_c("b",[_vm._v(_vm._s(_vm.$t("asset.history.updated_op_hrs")))]),_c("i",[_vm._v(_vm._s(_vm.$getProperty(activity,"info.changeSet.0.newValue.name","")))])],1):_vm.activityTypeCheck(activity)?_c("div",[_c("avatar",{attrs:{size:"sm",user:{name:activity.doneBy.name}}}),_vm._v(" "+_vm._s(activity.doneBy.name)+" "+_vm._s(_vm.checkForSubActi(activity)?_vm.updated:"")+" "),_vm.checkForSubActi(activity)?_vm._e():_c("span",{domProps:{innerHTML:_vm._s(_vm.message(activity))}}),_vm.moreCheck(activity)?_c("span",{staticClass:"pointer fc-dark-blue4 f11 bold pL10",on:{click:function($event){return _vm.enableSubActi(activity)}}},[_vm._v(_vm._s(_vm.$t("asset.history.more")))]):_vm._e(),_vm.checkForSubActi(activity)?_c("div",[_c("div",{staticClass:"pT10"},[_c("span",{domProps:{innerHTML:_vm._s(_vm.message(activity))}}),_c("span",{staticClass:"pointer fc-dark-blue4 f11 bold pL10",on:{click:function($event){return _vm.disableActi(activity)}}},[_vm._v(_vm._s(_vm.$t("asset.history.less")))])]),activity.info.designatedLocation?_c("div",{staticClass:"pT10"},[_vm._v(" "+_vm._s(_vm.$t("asset.history.moved_status_is"))+" "+_vm._s(activity.info.designatedLocation)+" ")]):_vm._e(),activity.info.distanceMoved?_c("div",{staticClass:"pT10"},[_vm._v(" "+_vm._s(_vm.$t("asset.history.distance_moved_is"))+" "+_vm._s(activity.info.distanceMoved+"m")+" ")]):_vm._e()]):_vm._e()],1):_vm.messageEmptyCheck(activity)?_c("div",[_c("avatar",{attrs:{size:"sm",user:{name:activity.doneBy.name}}}),_vm._v(" "+_vm._s(activity.doneBy.name)+" "),_c("span",{domProps:{innerHTML:_vm._s(_vm.message(activity))}})],1):_vm._e()]):_vm._e()]}))],2)],1)]],2)},AssetActivatiesvue_type_template_id_fd2c10f2_staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(169358),__webpack_require__(634338),__webpack_require__(879288),__webpack_require__(420629)),Avatar=__webpack_require__(574752),validation=__webpack_require__(990260),Spinner=__webpack_require__(604947),LogActivities=__webpack_require__(137725),AssetActivatiesvue_type_script_lang_js={props:["record","serviceportal","module"],data:function(){return{showDetialsActivity:[],activities:[],activitiesList:[],fixedFilter:this.$t("asset.history.all_history"),loading:!1,showSubActivaites:!1,
// userlist: [],
logActive:!1}},components:{Avatar:Avatar["default"],Spinner:Spinner/* default */.Z,LogActivity:LogActivities/* default */.Z},mounted:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({
// users: state => state.users,
// sites: state => state.mysites,
metaInfo:function(state){return state.view.metaInfo}})),{},{fieldsMap:function(){var _this=this,metaInfo=this.metaInfo,map={};if(!(0,validation/* isEmpty */.xb)(metaInfo)){var fields=this.$getProperty(metaInfo,"fields",[]);fields.forEach((function(field){_this.$setProperty(map,"".concat(field.name),field)}))}return map}},(0,vuex_esm/* mapGetters */.Se)([
// 'getUser',
"getTicketCategory","getTicketPriority","getTicketType"])),{},{recordId:function(){return this.$getProperty(this,"record.id",null)}}),watch:{record:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()}},created:function(){
// this.loadusers()
this.$store.dispatch("view/loadModuleMeta",this.module),
// this.$store.dispatch('loadSite')
this.$store.dispatch("loadTicketPriority")},methods:{getFilteredActivities:function(filterType){var type;this.logActive=!1,this.fixedFilter=filterType,type="Move History"===filterType?1:"Status"===filterType?33:"Downtime History"===filterType?34:null,this.activities=null===type?this.activitiesList:this.activities.filter((function(i){return i.type===type}))},autoResize:function(){this.$emit("resizeWidget")},setCommissioningLogActive:function(){this.logActive=!0,this.fixedFilter=this.$t("setup.decommission.commissioning_log")},checkForSubActi:function(activity){return!!(this.showDetialsActivity.length&&this.showDetialsActivity.includes(activity.id)&&activity)},enableSubActi:function(activity){this.showDetialsActivity.push(activity.id)},activityTypeCheck:function(act){var _ref=act||{},type=_ref.type;return this.messageEmptyCheck(act)&&1===type},disableActi:function(activity){this.showDetialsActivity=this.showDetialsActivity.filter((function(item){return item!==activity.id}))},loadServicePortalActivities:function(){var self=this;self.loading=!0,self.modulename="workorders",self.$http.get("/v2/activity?workOrderId="+self.record.id).then((function(response){self.activities=response.data})).finally((function(){self.loading=!1}))},openPm:function(id){this.$router.replace({path:"/app/wo/planned/summary/"+id})},
// loadusers() {
//   this.$http
//     .get('/setup/portalusers')
//     .then(({ data }) => {
//       this.userlist = data.users
//     })
//     .catch(() => {})
// },
messageEmptyCheck:function(activity){var _ref2=this.getMessage(activity)||{},message=_ref2.message;return null!==message},message:function(activity){var _ref3=this.getMessage(activity)||{},message=_ref3.message;return message},moreCheck:function(activity){var _ref4=activity||{},info=_ref4.info;return info&&Object.keys(info).length>1&&!this.checkForSubActi(activity)},
// getUserName(activity) {
//   let { doneBy } = activity || {}
//   let { ouid: id } = doneBy || {}
//   if (id) {
//     let usr = []
//     usr = this.users.filter(us => us.ouid === id)
//     if (usr.length) {
//       let userName = usr[0].name
//       return userName
//     } else if (this.userlist.length) {
//       let us = []
//       us = this.userlist.filter(u => u.ouid === id)
//       if (us.length) {
//         let userName = us[0].name
//         return userName
//       } else {
//         return '---1'
//       }
//     } else {
//       return '---2'
//     }
//   } else {
//     return '---3'
//   }
// },
loadActivities:function(){var self=this;self.loading=!0;var params=null;"asset"===self.module?(self.modulename="assets",params="?assetId="):"workorder"===self.module&&(self.modulename="workorders",params="?workOrderId="),self.$http.get("/v2/"+self.modulename+"/activity"+params+self.record.id).then((function(response){response.data.result&&response.data.result.activity&&(self.activities=response.data.result.activity,self.activitiesList=response.data.result.activity)})).catch((function(){})).finally((function(){self.loading=!1}))},operatingHourCheck:function(activity){var _ref5=activity||{},type=_ref5.type,info=_ref5.info,_ref6=info||{},changeSet=_ref6.changeSet,_ref7=this.getMessage(activity)||{},message=_ref7.message;return 28===type&&null!==message&&info&&changeSet&&"operatingHour"===this.$getProperty(changeSet,"0.field")},
// getAttachmentsString(obj) {
//   let str = ''
//   for (let item = 0; item < obj.length; item++) {
//     if (item !== 0) {
//       if (item === obj.length - 1) {
//         str += ' and '
//       } else {
//         str += ', '
//       }
//     }
//     str += obj[item]
//   }
//   return str
// },
// getUserCall(names) {
//   if (this.serviceportal) {
//     if (this.$account.user.id === names) {
//       return this.$account.user.name
//     } else {
//       return this.getUser(names).name
//     }
//   } else {
//     return this.getUser(names).name
//   }
// },
// getAssignedBy(updatedFields) {
//   let user = updatedFields.find(el => el.fieldName === 'assignedTo')
//   if (user.newValue) {
//     return this.getUser(user.newValue.id).name
//   } else if (user.oldValue) {
//     return this.getUser(user.oldValue.id).name
//   }
// },
// getLocation(value) {
//   return this.$helpers.parseLocation(value)
// },
// compare(str1, str2) {
//   return !str1.localeCompare(str2)
// },
// openPM(val) {
//   this.$router.replace({
//     path: '/app/wo/planned/summary/' + val,
//   })
// },
// getTicket(info) {
//   if (info.field === 'type') {
//     return (
//       '<b>' +
//       'updated ' +
//       info.displayName +
//       '</b>' +
//       ' as ' +
//       '<i>' +
//       this.getTicketType(info.newValue).name +
//       '</i>'
//     )
//   } else if (info.field === 'category') {
//     return (
//       '<b>' +
//       'updated ' +
//       info.displayName +
//       '</b>' +
//       ' as ' +
//       '<i>' +
//       this.getTicketCategory(info.newValue).displayName +
//       '</i>'
//     )
//   } else if (info.field === 'priority') {
//     return (
//       '<b>' +
//       'updated ' +
//       info.displayName +
//       '</b>' +
//       ' as ' +
//       '<i>' +
//       this.getTicketPriority(info.newValue).displayName +
//       '</i>'
//     )
//   } else if (info.field === 'dueDate') {
//     return (
//       '<b>' +
//       'updated ' +
//       info.displayName +
//       '</b>' +
//       ' as ' +
//       '<i>' +
//       this.$options.filters.formatDate(info.newValue) +
//       '</i>'
//     )
//   } else if (info.field === 'site') {
//     return (
//       '<b>' +
//       'updated ' +
//       info.displayName +
//       '</b>' +
//       ' as ' +
//       '<i>' +
//       this.getSiteName(info.newValue) +
//       '</i>'
//     )
//   } else {
//     return (
//       '<b>' +
//       'updated ' +
//       info.displayName +
//       '</b>' +
//       ' as ' +
//       '<i>' +
//       info.newValue +
//       '</i>'
//     )
//   }
// },
// getSiteName(siteId) {
//   let site = this.sites.find(site => site.id === siteId)
//   return site ? site.name : ''
// },
getMessage:function(activity){var _this2=this,module=this.module;if(activity){if(24===activity.type&&activity.info.addPMWO&&activity.info.addPMWO.length>2)return{message:"<b> created workorder from PM</b>"};if(activity&&33===activity.type)return{message:"<b>updated status </b>from <i>"+activity.info.oldValue+" to "+activity.info.newValue+"</i>"};if(75===activity.type&&!(0,validation/* isEmpty */.xb)(activity.info.changeSet)){var filteredArr=activity.info.changeSet.filter((function(a){return"modifiedTime"!==a.field&&-99!==a.newValue&&a.oldValue!==a.newValue&&"moduleState"!==a.field&&"sysModifiedTime"!==a.field}));return(0,validation/* isEmpty */.xb)(filteredArr)?{message:null}:{message:"<b>updated </b>"+filteredArr.reduce((function(accStr,activity){return(0,validation/* isEmpty */.xb)(accStr)?_this2.getValue(activity):"".concat(accStr,", ").concat(_this2.getValue(activity))}),"")}}if(activity&&34===activity.type)return{message:"<b>recorded downtime as  </b> (from: <i>"+this.$options.filters.formatDate(activity.info.changeSet[0].from,!0,!1)+" to: "+this.$options.filters.formatDate(activity.info.changeSet[0].to,!0,!1)+")</i>"};if(28===activity.type&&activity.info&&activity.info.changeSet)return activity.info.changeSet[0]&&"operatingHour"===activity.info.changeSet[0].field?{message:activity.info.changeSet[0].field}:{message:null};if(1===activity.type){var latLng;if(activity.info&&activity.info.currentSite&&activity.info.currentSpace)return{message:"<b>Location was updated to</b><i> "+activity.info.currentSpace+" ( "+activity.info.currentSite+" ) "};if(activity.info&&activity.info.currentLocation)return latLng=activity.info.currentLocation.split(","),{message:"<b>Location was updated to</b><i>( "+(latLng&&latLng.length?"lat: "+latLng[0]+" lng: "+latLng[1]:"")+" ) "}}else{if(30===activity.type)return{message:"<b>attached </b><i>"+activity.info.attachment[0].Filename+"</i>"};if(26===activity.type)return{message:"<b>updated status </b>from <i>"+activity.info.oldValue+" to "+activity.info.newValue+"</i>"};if(29===activity.type)return{message:"<b> added the Comment </b><i>("+activity.info.Comment+")</i>"};if(72===(activity||{}).type){
// Approval Activity Message
var approvalMessage="",approvalStatus=this.$getProperty(activity,"info.status",""),moduleSingularDisplayName=this.$constants.moduleSingularDisplayNameMap[module]?this.$constants.moduleSingularDisplayNameMap[module]:module;return"Approved"===approvalStatus?approvalMessage="<b> Approved the ".concat(moduleSingularDisplayName,"</b>"):"Rejected"===approvalStatus?approvalMessage="<b> Rejected the ".concat(moduleSingularDisplayName,"</b>"):"Requested"===approvalStatus&&(approvalMessage="<b> resent for Approval.</b>"),{message:approvalMessage}}if(73===(activity||{}).type)return{message:"<b> initiated Approval process</b>"}}}return{message:"<b>"+activity.message+"</b>"}},getValue:function(info){var fieldsMap=this.fieldsMap,_ref8=info||{},fieldName=_ref8.field,newValue=_ref8.newValue,oldValue=_ref8.oldValue,field=fieldsMap[fieldName]||{},displayValue=newValue,displayOldValue=oldValue;return(0,validation/* isEmpty */.xb)(field)||((0,validation/* isArray */.kJ)(displayValue)||"---"===displayValue||Number(displayValue)&&(displayValue=Number(displayValue)),displayValue=this.$fieldUtils.getDisplayValue(field,displayValue),(0,validation/* isArray */.kJ)(displayOldValue)||Number(displayOldValue)&&(displayOldValue=Number(displayOldValue)),(0,validation/* isEmpty */.xb)(displayOldValue)||(displayOldValue=this.$fieldUtils.getDisplayValue(field,displayOldValue))),(0,validation/* isEmpty */.xb)(displayOldValue)||"---"===displayOldValue||-99===displayOldValue?(0,validation/* isEmpty */.xb)(displayValue)||"---"===displayValue||-99===displayValue?"":"<b>"+info.displayName+"</b> as <i>"+displayValue+"</i>":"<b>"+info.displayName+"</b> from <i>"+displayOldValue+"</i> to <i>"+displayValue+"</i>"}}},relatedlist_AssetActivatiesvue_type_script_lang_js=AssetActivatiesvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_AssetActivatiesvue_type_script_lang_js,AssetActivatiesvue_type_template_id_fd2c10f2_render,AssetActivatiesvue_type_template_id_fd2c10f2_staticRenderFns,!1,null,null,null)
/* harmony default export */,AssetActivaties=component.exports,Historyvue_type_script_lang_js={props:["details","layoutParams","hideTitleSection","groupKey","activeTab","moduleName","resizeWidget"],components:{Activities:Activities2/* default */.Z,AssetActivaties:AssetActivaties},mounted:function(){this.autoResize()},computed:{},methods:{autoResize:function(){var height=this.$refs["history-container"].scrollHeight+150,width=this.$refs["history-container"].scrollWidth;this.resizeWidget&&this.resizeWidget({height:height,width:width})}}},common_Historyvue_type_script_lang_js=Historyvue_type_script_lang_js,History_component=(0,componentNormalizer/* default */.Z)(common_Historyvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,History=History_component.exports},
/***/638507:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Activities2}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/relatedlist/Activities2.vue?vue&type=template&id=0cb76648
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{"padding-top":"20px"}},[_vm.loading?_c("div",[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm.activities&&_vm.activities.length?_vm._l(_vm.activities,(function(activity,index){return _c("div",{key:index,staticClass:"tactivity"},[_c("div",{staticClass:"tlContent2"},[_vm._m(0,!0),_c("div",{},[_c("div",{staticStyle:{display:"inline-flex"}},[_c("div",{staticClass:"tlContentMain pR10 pull-left"},[_c("avatar",{attrs:{size:"sm",user:{name:activity.name}}})],1),_c("div",{staticClass:"pull-left ",staticStyle:{"line-height":"1.4"}},[_c("span",[_vm._v(_vm._s(activity.name))]),16==activity.activityType?_c("span",[_vm._v(" "+_vm._s(activity.message)+" "),_c("avatar",{attrs:{size:"sm",user:{name:_vm.getAssignedBy(activity.info.updatedFields)}}}),_c("span",{staticClass:"updval"},[_vm._v(_vm._s(_vm.getAssignedBy(activity.info.updatedFields)))])],1):_c("span",{staticClass:"tlContentMain"},[_vm._v(" "+_vm._s(_vm.getMessage(activity).message?_vm.getMessage(activity).message:"")+" "),_vm.getMessage(activity).value?_c("span",{staticClass:"updval"},[_vm._v(_vm._s(_vm.getMessage(activity).value))]):_vm._e()]),_c("div",{staticClass:"tlDate2 col-12"},[_c("span",[_vm._v(_vm._s(_vm._f("fromNow")(activity.modifiedTime)))])])])])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})])})):_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.products.no_activities_tracked_yet"))+" ")])],2)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flLeft activityIconDiv2"},[_c("i",{staticClass:"fa fa-circle-o ",attrs:{"aria-hidden":"true"}})])}],Activities2vue_type_script_lang_js=__webpack_require__(942577),relatedlist_Activities2vue_type_script_lang_js=Activities2vue_type_script_lang_js/* default */.Z,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(relatedlist_Activities2vue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Activities2=component.exports},
/***/137725:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return LogActivities}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/widget/decommission/LogActivities.vue?vue&type=template&id=2a85bcb5
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"block mL30 mT20"},[_c("el-timeline",{staticClass:"decommission-activity"},[_vm.loading?_c("spinner",{attrs:{size:80,show:_vm.loading}}):_vm.isLogsEmpty?_c("div",[_c("div",{staticClass:"flex-middle width100 height80vh justify-center shadow-none white-bg-block flex-direction-column"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/history",iconClass:"icon icon-xxxxlg mR10"}}),_c("div",{staticClass:"nowo-label text-center pT10"},[_vm._v(" "+_vm._s(_vm.$t("setup.decommission.no_logs"))+" ")])],1)]):_vm._l(_vm.activities,(function(activity,index){return[_vm.$validation.isEmpty(_vm.getMessage(activity))?_vm._e():_c("el-timeline-item",{key:index,attrs:{type:"primary",color:activity.color,timestamp:_vm._f("formatDate")(activity.commissionedTime)}},[_c("div",{staticClass:"pT4"},[_c("avatar",{attrs:{size:"sm",user:{name:_vm.getUserName(activity)}}}),_vm._v(" "+_vm._s(_vm.getUserName(activity))+" "),_c("span",{domProps:{innerHTML:_vm._s(_vm.getMessage(activity))}}),_c("span",{staticClass:"tag-style pL25 pointer f14",attrs:{type:"text"},on:{click:function($event){return _vm.viewLogDialog(activity)}}},[_vm._v(" "+_vm._s(_vm.$t("setup.decommission.log"))+" ")])],1)])]}))],2),_vm.showLogDialog?_c("DecommissionLogDialog",{attrs:{centerDialogVisible:_vm.showLogDialog,rowData:_vm.logResourceData,moduleName:_vm.selectedModule},on:{handleClose:_vm.handleClose}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(32284)),DecommissionLogsDialogvue_type_template_id_356200be_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container dialog-padding-bottom decommission-log-dialog",attrs:{visible:_vm.centerDialogVisible,title:_vm.title,width:"50%","append-to-body":!0,"before-close":_vm.handleClose}},[_c("div",{staticClass:"decommission-container"},[_vm.loading?_c("div",{staticClass:"flex-middle"},[_c("spinner",{attrs:{show:_vm.loading,size:"60"}})],1):_vm.exceptionLogCheck?_vm._e():_c("div",{staticClass:"dialog-style"},[_c("div",{staticClass:"mL30 mT10 f14 time-msg-color"},[_c("span",{staticClass:"text-capitalize bold"},[_vm._v(_vm._s(_vm.getCommisionedUser))]),_c("span",[_vm._v(_vm._s(_vm.getCommissioningTimeMessage))])]),_c("div",{staticClass:"mL30 mR40 seperator mT20"},[_c("div",{staticClass:"width100 height40"},[_c("span",{staticClass:"width100 text-left pB5 dialog-header-color text-fc-black f16 fL"},[_vm._v(_vm._s(_vm.$t("setup.decommission.portfolio")))]),_c("span",{staticClass:"width100 pT5 f12 fc-text-grey"},[_vm._v(" "+_vm._s(_vm.getPortfolioDescription)+" ")])]),_c("div",{staticClass:"mB25"},[_c("div",{staticClass:"width100 pT20 flex-direction-row"},[_c("div",{staticClass:"width100 fw6 text-capitalize flex-direction-row fL bold f14"},[_vm._v(" "+_vm._s(_vm.$t("setup.decommission.resource_name"))+" ")]),_c("div",{staticClass:"width100 flex-direction-row pT8 fL f14"},[_vm._v(" "+_vm._s(_vm.resourceName)+" ")])]),_vm.isLogsEmpty?_vm._e():_c("div",{staticClass:"width100 flex-direction-row "},_vm._l(_vm.portfolioDependency,(function(key,value,index){return _c("div",{key:index,staticClass:"width25 pT20 inline-block"},[_c("div",{staticClass:"width100 fw6 text-capitalize flex-direction-row"},[_vm._v(" "+_vm._s(value)+" ")]),_c("div",{staticClass:"width100 flex-direction-row pT8"},[_vm._v(_vm._s(key))])])})),0)])]),_vm.isModuleDependencyEmpty||_vm.isLogsEmpty?_vm._e():_c("div",{staticClass:"mL30 mR40 seperator mT20"},[_c("div",{staticClass:"width100 height30"},[_c("div",{staticClass:"width100 pB5 text-left dialog-header-color text-fc-black f16 fL"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.modules"))+" ")]),_c("div",{staticClass:"width100 f12 fc-text-grey"},[_vm._v(" "+_vm._s(_vm.$t("setup.decommission.module_log_description"))+" ")])]),_c("div",{staticClass:"mB25"},[_c("div",{staticClass:"width100 flex-direction-row mT20 width100"},_vm._l(_vm.moduleDependency,(function(item){return _c("div",{key:item,staticClass:"width30 pT10 inline-block"},[_c("div",{staticClass:"width100 fw6 text-capitalize flex-direction-row font-bold"},[_vm._v(" "+_vm._s(_vm.$t("setup.decommission."+_vm.getModuleName(item)))+" ")]),_c("div",{staticClass:"width100 flex-direction-row pT8"},[_vm._v(" "+_vm._s(item.count)+" ")])])})),0)])]),_vm.isRemarksAvailable?_c("div",{staticClass:"mL30 mR40 mT20"},[_c("div",{staticClass:"width100 height40"},[_c("div",{staticClass:"width100 text-left dialog-header-color text-fc-black f16 fL"},[_vm._v(" "+_vm._s(_vm.getRemarkHeader)+" ")])]),_c("div",[_vm._v(_vm._s(_vm.getRemarks))])]):_vm._e()])])])},DecommissionLogsDialogvue_type_template_id_356200be_scoped_true_staticRenderFns=[],validation=(__webpack_require__(169358),__webpack_require__(990260)),filters=__webpack_require__(273861),DecommissionLogsDialogvue_type_script_lang_js={name:"DecommissionLogDialog",props:["centerDialogVisible","rowData","moduleName"],data:function(){return{decommissionLogs:[],loading:!1}},computed:{title:function(){var isDecommissioned=this.isDecommissioned;return"".concat(isDecommissioned?this.$t("setup.decommission.decommissioned"):this.$t("setup.decommission.recommissioned")," log")},getRemarkHeader:function(){var isDecommissioned=this.isDecommissioned;return"".concat(this.$t("setup.decommission.remark")," ").concat(isDecommissioned?"decommissioning":"recommissioning")},exceptionLogCheck:function(){var decommissionLogs=this.decommissionLogs;return(0,validation/* isEmpty */.xb)(decommissionLogs)},commissionedTime:function(){var decommissionLogs=this.decommissionLogs;return this.$getProperty(decommissionLogs,"0.commissionedTime",null)},resourceName:function(){var rowData=this.rowData;return this.$getProperty(rowData,"name",null)},logId:function(){var rowData=this.rowData;return this.$getProperty(rowData,"id",null)},getPortfolioDescription:function(){var moduleName=this.moduleName;return"".concat(this.$t("setup.decommission.portfolio_description")," ").concat(moduleName," .")},portfolioDependency:function(){var decommissionLogs=this.decommissionLogs,logValue=JSON.parse(this.$getProperty(decommissionLogs,"0.logValue",null)),_ref=logValue||{},resource=_ref.resource;return resource},moduleDependency:function(){var decommissionLogs=this.decommissionLogs,logValue=JSON.parse(this.$getProperty(decommissionLogs,"0.logValue",null)),_ref2=logValue||{},modules=_ref2.modules;return modules},isModuleDependencyEmpty:function(){var moduleDependency=this.moduleDependency;return(0,validation/* isEmpty */.xb)(moduleDependency)},isLogsEmpty:function(){var portfolioDependency=this.portfolioDependency,moduleDependency=this.moduleDependency;return(0,validation/* isEmpty */.xb)(portfolioDependency)&&(0,validation/* isEmpty */.xb)(moduleDependency)},isDecommissioned:function(){var decommissionLogs=this.decommissionLogs;return this.$getProperty(decommissionLogs,"0.decommission",null)},getCommissioningTimeMessage:function(){var isDecommissioned=this.isDecommissioned,commissionedTime=this.commissionedTime,moduleName=this.moduleName,type=isDecommissioned?"decommissioned":"recommissioned",time=this.getDecommissionedTime(commissionedTime);return" ".concat(type," this ").concat(moduleName," on ").concat(time)},isRemarksAvailable:function(){var getRemarks=this.getRemarks;return!(0,validation/* isEmpty */.xb)(getRemarks)},getRemarks:function(){var decommissionLogs=this.decommissionLogs;return this.$getProperty(decommissionLogs,"0.remarks",null)},getCommisionedUser:function(){return this.$getProperty(this,"decommissionLogs.0.commissionedBy.name","---")}},created:function(){this.loadDecommissionLogs()},methods:{getDecommissionedTime:function(time){return(0,validation/* isEmpty */.xb)(time)?"---":(0,filters.formatDate)(time)},loadDecommissionLogs:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var logId,filters,params,_yield$API$fetchAll,error,list;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,logId=_this.logId,filters={id:{operatorId:9,value:["".concat(logId)]}},params={filters:JSON.stringify(filters),force:!0},_context.next=6,api/* API */.bl.fetchAll("decommissionLog",params);case 6:_yield$API$fetchAll=_context.sent,error=_yield$API$fetchAll.error,list=_yield$API$fetchAll.list,error?_this.$message.error(error.message):(_this.decommissionLogs=list,_this.loading=!1);case 10:case"end":return _context.stop()}}),_callee)})))()},handleClose:function(){this.$emit("handleClose")},getModuleName:function(data){var _ref3=data||{},moduleName=_ref3.moduleName;return null===moduleName||void 0===moduleName?void 0:moduleName.toLowerCase()}}},decommission_DecommissionLogsDialogvue_type_script_lang_js=DecommissionLogsDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(decommission_DecommissionLogsDialogvue_type_script_lang_js,DecommissionLogsDialogvue_type_template_id_356200be_scoped_true_render,DecommissionLogsDialogvue_type_template_id_356200be_scoped_true_staticRenderFns,!1,null,"356200be",null)
/* harmony default export */,DecommissionLogsDialog=component.exports,Avatar=__webpack_require__(574752),LogActivitiesvue_type_script_lang_js={props:["recordId","selectedModule","details"],data:function(){return{activities:[],loading:!1,showLogDialog:!1,logResourceData:{}}},created:function(){this.loadLogs()},computed:{isLogsEmpty:function(){var activities=this.activities;return(0,validation/* isEmpty */.xb)(activities)}},components:{DecommissionLogDialog:DecommissionLogsDialog,Avatar:Avatar["default"]},methods:{getMessage:function(act){var selectedModule=this.selectedModule,_ref=act||{},decommission=_ref.decommission;return"".concat(decommission?"Decommissioned":"Recommissioned",' the  <b class="text-capitalize"> ').concat(selectedModule," </b>.")},viewLogDialog:function(data){this.showLogDialog=!0;var _ref2=data||{},commissionedTime=_ref2.commissionedTime,id=_ref2.id;this.logResourceData={commissionedTime:commissionedTime,name:this.details.name,id:id}},handleClose:function(){this.showLogDialog=!1},getUserName:function(data){var _ref3=data||{},commissionedBy=_ref3.commissionedBy,_ref4=commissionedBy||{},name=_ref4.name;return(0,validation/* isEmpty */.xb)(name)?"Invalid User":name},loadLogs:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var recordId,filters,params,_yield$API$fetchAll,error,list;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,recordId=_this.recordId,filters={resourceId:{operatorId:9,value:["".concat(recordId)]}},params={filters:JSON.stringify(filters),force:!0},_context.next=6,api/* API */.bl.fetchAll("decommissionLog",params);case 6:_yield$API$fetchAll=_context.sent,error=_yield$API$fetchAll.error,list=_yield$API$fetchAll.list,error?_this.$message.error((0,validation/* isEmpty */.xb)(error.message)?"Error Occured":error.message):(_this.activities=list,_this.loading=!1,_this.$emit("autoResizeWidget"));case 10:case"end":return _context.stop()}}),_callee)})))()}}},decommission_LogActivitiesvue_type_script_lang_js=LogActivitiesvue_type_script_lang_js,LogActivities_component=(0,componentNormalizer/* default */.Z)(decommission_LogActivitiesvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,LogActivities=LogActivities_component.exports},
/***/942577:
/***/function(module,__webpack_exports__,__webpack_require__){
/* harmony import */var _Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595082),_Avatar__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(574752)),vuex__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(420629);
/* harmony import */
/* module decorator */module=__webpack_require__.hmd(module),
/* harmony default export */__webpack_exports__.Z={props:["record","serviceportal"],data:function(){return{activities:[],loading:!0}},components:{Avatar:_Avatar__WEBPACK_IMPORTED_MODULE_5__["default"]},mounted:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()},watch:{record:function(){this.serviceportal?this.loadServicePortalActivities():this.loadActivities()}},computed:(0,_Users_abishekrakavel_Desktop_facilioClient_facilio_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_6__/* .mapGetters */.Se)(["getUser"])),methods:{getUserCall:function(names){return this.serviceportal&&this.$account.user.id===names?this.$account.user.name:this.getUser(names).name},getAssignedBy:function(updatedFields){var user=updatedFields.find((function(el){return"assignedTo"===el.fieldName}));return user.newValue?this.getUser(user.newValue.id).name:user.oldValue?this.getUser(user.oldValue.id).name:void 0},getMessage:function(activity){if(131072===activity.activityType)return{message:activity.message};if(2===activity.activityType){if(activity.info.updatedFields&&activity.info.updatedFields.length>0){if(activity.info.updatedFields.find((function(el){return"category"===el.fieldName}))&&"category"===activity.info.updatedFields.find((function(el){return"category"===el.fieldName})).fieldName)return{message:"updated category as",value:activity.info.updatedFields.find((function(el){return"category"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"priority"===el.fieldName}))&&"priority"===activity.info.updatedFields.find((function(el){return"priority"===el.fieldName})).fieldName)return{message:"updated priority as",value:activity.info.updatedFields.find((function(el){return"priority"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"actualWorkStart"===el.fieldName}))&&"actualWorkStart"===activity.info.updatedFields.find((function(el){return"actualWorkStart"===el.fieldName})).fieldName||activity.info.updatedFields.find((function(el){return"resumedWorkStart"===el.fieldName}))&&"resumedWorkStart"===activity.info.updatedFields.find((function(el){return"resumedWorkStart"===el.fieldName})).fieldName)return{message:"started work"};if(activity.info.updatedFields.find((function(el){return"actualWorkEnd"===el.fieldName}))&&"actualWorkEnd"===activity.info.updatedFields.find((function(el){return"actualWorkEnd"===el.fieldName})).fieldName)return{message:"resolved work"};if(activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName}))&&"dueDateString"===activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName})).fieldName)return{message:"updated Due Date as",value:activity.info.updatedFields.find((function(el){return"dueDateString"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"type"===el.fieldName}))&&"type"===activity.info.updatedFields.find((function(el){return"type"===el.fieldName})).fieldName)return{message:"updated Type as",value:activity.info.updatedFields.find((function(el){return"type"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"status"===el.fieldName}))&&"status"===activity.info.updatedFields.find((function(el){return"status"===el.fieldName})).fieldName)return{message:"pause the work"}}}else if(16384===activity.activityType){if(activity.info.updatedFields.length>0){if(activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName}))&&"remarks"===activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName})).fieldName)return{message:"updated task ("+activity.info.task.subject+") remarks as",value:activity.info.updatedFields.find((function(el){return"remarks"===el.fieldName})).newValue};if(activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName}))&&"inputValue"===activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName})).fieldName)return{message:"updated task ("+activity.info.task.subject+") input Value as",value:activity.info.updatedFields.find((function(el){return"inputValue"===el.fieldName})).newValue}}}else{if(128===activity.activityType)return activity.info.attachments?{message:"attached",value:this.getAttachmentsString(activity.info.attachments)}:{message:"attached",value:null};if(256===activity.activityType)return{message:"added the task",value:activity.info.task};if(72===(activity||{}).type){
// Approval Activity Message
var approvalMessage="",approvalStatus=this.$getProperty(activity,"info.status",""),moduleSingularDisplayName=this.$constants.moduleSingularDisplayNameMap[module]?this.$constants.moduleSingularDisplayNameMap[module]:module;return"Approved"===approvalStatus?approvalMessage="<b> Approved the ".concat(moduleSingularDisplayName,"</b>"):"Rejected"===approvalStatus?approvalMessage="<b> Rejected the ".concat(moduleSingularDisplayName,"</b>"):"Requested"===approvalStatus&&(approvalMessage="<b> resent for Approval.</b>"),{message:approvalMessage}}if(73===(activity||{}).type)return{message:"<b> initiated Approval process</b>"}}return{message:activity.message}},loadActivities:function(){var self=this;self.loading=!0,self.$http.get("/workorder/activities?workOrderId="+self.record.id).then((function(response){self.activities=response.data.filter((function(activity){return 16!==activity.activityType||activity.info.updatedFields&&activity.info.updatedFields.length>0&&activity.info.updatedFields.find((function(el){return"assignedTo"===el.fieldName}))})),self.loading=!1})).catch((function(){}))},loadServicePortalActivities:function(){var self=this;self.loading=!0,self.$http.get("/activities?workOrderRequestId="+self.record.id).then((function(response){self.activities=response.data,self.loading=!1}))},getAttachmentsString:function(obj){for(var str="",item=0;item<obj.length;item++)0!==item&&(item===obj.length-1?str+=" and ":str+=", "),str+=obj[item];return str}}}}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/67386.js.map