"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[16360,83999],{
/***/106222:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PMFieldDetails}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/pm/summary/PMFieldDetails.vue?vue&type=template&id=e5005a7e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:["inspection-details-widget",_vm.title&&"pT0"]},[_vm.title?[_c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title mL0 pm-title"},[_vm._v(_vm._s(_vm.title))])])]:_vm._e(),_vm.loading?_c("div",{class:["container",_vm.widget.title&&"pL0"]},_vm._l([1,2,3],(function(index){return _c("el-row",{key:"rowIndex-"+index,staticClass:"width100"},_vm._l([1,2,3,4],(function(index){return _c("el-col",{key:"col-"+index,staticClass:"field",attrs:{span:6}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("span",{class:["lines loading-shimmer",_vm.widget.title&&"m0"]}),_c("span",{class:["lines loading-shimmer",_vm.widget.title&&"mT10"]})])])})),1)})),1):_vm.emptyState?_c("div",{staticClass:"mT20 empty-state-color"},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("inline-svg",{staticClass:"vertical-middle self-center",attrs:{src:"svgs/emptystate/notes",iconClass:"icon icon-xxxlg mR5"}}),_c("div",{staticClass:"f14 pL10 self-center"},[_vm._v(" "+_vm._s(_vm.$t("qanda.template.no_fields"))+" ")])],1)]):_c("div",{ref:"content-container",class:["container",_vm.widget.title&&"pL0"]},[_vm.isSecondaryDetails&&!_vm.$validation.isEmpty(_vm.fieldsList)?[_vm.$validation.isEmpty(_vm.details.subject)?_vm._e():_c("el-row",{staticClass:"width100"},[_c("el-col",{staticClass:"field",attrs:{span:24}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("span",{staticClass:"field-label mB10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.subject"))+" ")]),_c("div",{staticClass:"field-value pL0"},[_vm._v(" "+_vm._s(_vm.details.subject)+" ")])])])],1),_vm.$validation.isEmpty(_vm.details.description)?_vm._e():_c("el-row",{staticClass:"width100"},[_c("el-col",{staticClass:"field",attrs:{span:24}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("span",{staticClass:"field-label mB10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("div",{staticClass:"field-value pL0"},[_vm._v(" "+_vm._s(_vm.details.description)+" ")])])])],1)]:_vm._e(),_c("div",{staticClass:"width100 pmv2-wo"},_vm._l(_vm.fieldsList,(function(field,index){return _c("div",{key:"top-down-field-"+index,staticClass:"field",class:["field",_vm.isFullColumnSpan(field)&&"field-full-width"]},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("span",{staticClass:"field-label mB10"},[_vm._v(" "+_vm._s(_vm.getFormattedDisplayName(field))+" ")]),_c("div",{staticClass:"field-value pL0"},[_vm.isRotatingItemOrTool(field)?_c("div",{on:{click:function($event){return _vm.redirectToOverview(field)}}},[_c("item-tool-avatar",{attrs:{name:"true",size:"lg",module:"item",recordData:_vm.getRecordData(field)}})],1):_vm.isLookupSimple(field)?_c("div",[_c("GlimpseLookupWrapper",{attrs:{field:field,record:_vm.details,siteList:_vm.siteList,recordModuleName:_vm.moduleName}})],1):_vm.systemFields.includes(field.name)?_c("div",[_vm._v(" "+_vm._s(_vm.getSysFieldValue(field))+" ")]):_vm.isFileField(field)?_c("div",[_c("el-row",[_c("el-col",{key:index+1+"asset",staticClass:"attachment-label pointer",attrs:{span:12}},[_vm.exportDownloadUrl[field.name]?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl[field.name]}}):_vm._e(),_c("a",{on:{click:function($event){return _vm.downloadAttachment(field)}}},[_vm._v(" "+_vm._s(_vm.getFileName(field))+" ")])])],1)],1):_vm.isSignatureField(field)?_c("div",[_c("SignatureField",{attrs:{field:(field||{}).field,record:_vm.details}})],1):_vm.isGeoLocationField(field)?[_vm.$validation.isEmpty(field.displayValue)?_c("span",[_vm._v("---")]):_c("div",{staticClass:"bluetxt pointer",on:{click:function($event){return _vm.$helpers.openInMapForLatLngStr(field.displayValue)}}},[_vm._v(" "+_vm._s("@"+field.displayValue)+" ")])]:"URL_FIELD"===field.displayTypeEnum?[_vm.$validation.isEmpty(field.displayValue)||"---"===field.displayValue?_c("span",[_vm._v("---")]):_c("a",{staticClass:"url-field-display",attrs:{rel:"nofollow",href:_vm.$getProperty(field,"displayValue.href",""),target:_vm.$getProperty(field,"displayValue.target",""),referrerpolicy:"no-referrer"}},[_vm._v(_vm._s(_vm.getUrlDisplayName(field)))])]:"RICH_TEXT"===field.displayTypeEnum?[_vm.$validation.isEmpty(field.displayValue)?_c("span",[_vm._v("---")]):_c("div",{staticClass:"rich-text-preview-details",domProps:{innerHTML:_vm._s(_vm.sanitize(field.displayValue))}})]:_c("span",[_vm._v(_vm._s(field.displayValue))])],2)])])})),0)],2)],2)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),VerticalFieldDetails=(__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(141990)),validation=__webpack_require__(990260),sanitize=__webpack_require__(678042),pm_utils=__webpack_require__(195123),SCOPE_FIELDS=[{name:"sites",displayName:"Sites",field:{displayType:"MULTI_LOOKUP_SIMPLE",dataType:13,dataTypeEnum:"MULTI_LOOKUP",name:"sites"}},{displayName:"Asset Category",name:"assetCategory",field:{displayType:"LOOKUP_SIMPLE",name:"assetCategory"}},{displayName:"Space Category",name:"spaceCategory",field:{displayType:"LOOKUP_SIMPLE",name:"spaceCategory"}},{displayName:"Category",name:"assignmentTypeEnum",field:{name:"assignmentTypeEnum"}}],SCOPE_FIELDS_LIST=["sites","assignmentTypeEnum","assetCategory","spaceCategory","sysCreatedTime"],PMFieldDetailsvue_type_script_lang_js={extends:VerticalFieldDetails/* default */.Z,props:["widget","moduleName"],name:"PMFieldDetails",created:function(){this.sanitize=sanitize/* sanitize */.N},computed:{title:function(){var _ref=this||{},isSecondaryDetails=_ref.isSecondaryDetails;return isSecondaryDetails?"Workorder":"Scope"},isSecondaryDetails:function(){var _ref2=this||{},widget=_ref2.widget,_ref3=widget||{},widgetParams=_ref3.widgetParams,_ref4=widgetParams||{},card=_ref4.card;return"plannedMaintenanceSecondaryDetails"===card}},methods:{deserialize:function(data){var _this=this,sites=this.sites,promises=[],skipFields=[].concat((0,toConsumableArray/* default */.Z)(this.filterfields),(0,toConsumableArray/* default */.Z)(this.primaryFields)),fieldsArray=this.$getProperty(data,"fields",[]);fieldsArray=[].concat(SCOPE_FIELDS,(0,toConsumableArray/* default */.Z)(fieldsArray));var fields=[];fieldsArray.forEach((function(field){var dataObj=!_this.isV3Api&&field.field&&!0!==field.field.default?_this.details.data:_this.details;if(!skipFields.includes(_this.$getProperty(field,"field.name"))){var promise=_this.getFormattedValue(field,dataObj,sites).then((function(value){_this.$set(field,"displayValue",value)}));promises.push(promise),fields.push(field)}}));var isSecondaryDetails=this.isSecondaryDetails,details=this.details;if(isSecondaryDetails)this.fieldsList=fields.filter((function(field){return!SCOPE_FIELDS_LIST.includes(field.name)}));else{var actualFields=SCOPE_FIELDS_LIST.map((function(field){var modifiedField=fields.find((function(currField){return currField.name===field})),name=_this.$getProperty(modifiedField,"field.name");if("assignmentTypeEnum"===name){var _ref5=details||{},_assignmentTypeEnum=_ref5.assignmentTypeEnum,value=pm_utils/* SCOPE_PLACEHOLDER */.mO[_assignmentTypeEnum]||{};modifiedField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},modifiedField),{},{displayValue:value})}return modifiedField})),_ref6=details||{},assignmentTypeEnum=_ref6.assignmentTypeEnum;actualFields="ASSETCATEGORY"===assignmentTypeEnum?actualFields.filter((function(field){return"spaceCategory"!==field.name})):"SPACECATEGORY"===assignmentTypeEnum?actualFields.filter((function(field){return"assetCategory"!==field.name})):actualFields.filter((function(field){return!["spaceCategory","assetCategory"].includes(field.name)})),this.fieldsList=actualFields.filter((function(field){return!(0,validation/* isEmpty */.xb)(field)}))}this.fieldsList=this.fieldsList.filter((function(field){return!["subject","description","category"].includes(field.name)}));var fieldCount=this.fieldsList.length-this.fieldsList.filter((function(field){return"TEXTAREA"===field.displayTypeEnum})).length;this.details.geoLocationEnabled&&(fieldCount+=5),fieldCount%2!==0&&(this.additionalField=!0),Promise.all(promises).then((function(){_this.loading=!1,_this.autoResize()}))}}},summary_PMFieldDetailsvue_type_script_lang_js=PMFieldDetailsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(summary_PMFieldDetailsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PMFieldDetails=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/16360.js.map