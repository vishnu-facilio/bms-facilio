"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[64295],{
/***/703117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlarmModel}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlarmModel.vue?vue&type=template&id=5b251d32
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{background:"#fff",width:"400px",height:"420px !important"}},[_vm._m(0),_c("div",{staticClass:"model-container",staticStyle:{background:"#fff"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.category,callback:function($$v){_vm.$set(_vm.alarmRequest,"category",$$v)},expression:"alarmRequest.category"}},_vm._l(_vm.ticketcategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:category.id}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Team/Staff")]),_c("div",{staticStyle:{border:"1px solid #d8dce5",display:"inline-block",position:"relative",width:"100%",height:"40px","line-height":"40px","padding-left":"10px","padding-right":"10px","border-radius":"3px"}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.alarmRequest)))]),_vm._m(1),_c("f-assignment",{attrs:{model:_vm.alarmRequest,viewtype:"form"}})],1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Priority")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.priority,callback:function($$v){_vm.$set(_vm.alarmRequest,"priority",$$v)},expression:"alarmRequest.priority"}},_vm._l(_vm.ticketpriority,(function(priority){return _c("el-option",{key:priority.priority,attrs:{label:priority.displayName,value:parseInt(priority.id)}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Site")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",clearable:"","collapse-tags":"",placeholder:"Sites"},model:{value:_vm.alarmRequest.siteId,callback:function($$v){_vm.$set(_vm.alarmRequest,"siteId",$$v)},expression:"alarmRequest.siteId"}},_vm._l(_vm.sites,(function(site,index){return _c("el-option",{key:index,attrs:{label:site.name,value:site.id}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{background:"#fff"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",on:{click:function($event){return _vm.createWO()}}},[_vm._v("CREATE")])],1)])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{padding:"20px 20px 10px 20px"},attrs:{label:"Create Workorder"}},[_c("div",{staticClass:"setup-modal-title"},[_vm._v("Create workorder")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",{staticStyle:{float:"right"}},[_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{position:"relative",top:"-4px",right:"3px",color:"#c0c4cc"}})])}],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),FAssignment=__webpack_require__(383274),TeamStaffMixin=__webpack_require__(462599),AlarmModelvue_type_script_lang_js={props:["id"],components:{FAssignment:FAssignment/* default */.Z},mixins:[TeamStaffMixin/* default */.Z],data:function(){return{alarmRequest:{category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},siteId:null,priority:null}}},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},sites:function(state){return state.sites},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority}})),methods:{createWO:function(event){this.$emit("submit",this.alarmRequest)},closeDialog:function(){this.reset(),this.$emit("closed")},reset:function(){this.alarmRequest={category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},priority:null}}}},components_AlarmModelvue_type_script_lang_js=AlarmModelvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmModelvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmModel=component.exports},
/***/164295:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SensorAlarmList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/alarms/v3/SensorAlarmList.vue?vue&type=template&id=fa03f0e4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isSummaryOpen?_c("div",{staticClass:"height100"},[_c("div",{staticClass:"flex flex-row"},[_c("div",{staticClass:"cm-side-bar-container"},[_c("SummarySidebar",{attrs:{list:_vm.records,isLoading:_vm.isLoading,activeRecordId:_vm.selectedRecordId,total:_vm.recordCount,currentCount:(_vm.records||[]).length},on:{"update:isLoading":function($event){_vm.isLoading=$event},"update:is-loading":function($event){_vm.isLoading=$event}},scopedSlots:_vm._u([{key:"title",fn:function(){return[_c("el-row",{staticClass:"cm-sidebar-header"},[_c("el-col",{attrs:{span:2}},[_c("span",{on:{click:function($event){return _vm.openList()}}},[_c("inline-svg",{staticClass:"rotate-90 pointer",attrs:{src:"svgs/arrow",iconClass:"icon icon-sm"}})],1)]),_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"bold"},[_vm._v(_vm._s(_vm.currentViewDetail))])])],1)]},proxy:!0},{key:"default",fn:function(ref){var record=ref.record;return[_c("router-link",{staticClass:"label-txt-black link-hover-decoration",attrs:{tag:"div",to:_vm.redirectToOverview(record.id)}},[_c("div",{staticClass:"inline-flex justify-content-space pT20 pB10"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:_vm.tippyOptions,expression:"tippyOptions"}],staticClass:"summary-item-heading",attrs:{title:record.subject}},[_vm._v(" "+_vm._s(_vm.getReadingFieldName(record))+" ")]),_c("div",{staticClass:"flex-middle pR10"},[_c("span",[_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getAlarmColor(record)},attrs:{"aria-hidden":"true"}})]),_c("span",{staticClass:" uppercase secondary-color severityTagSummary"},[_vm._v(" "+_vm._s(_vm.getAlarmDisplayName(record))+" ")])])]),_c("div",{staticClass:"pL20 pB20"},[_c("div",{staticClass:"fc-grey2-text12 max-width70"},[_c("fc-icon",{staticClass:"pR10",attrs:{group:"default",name:"assets",color:"#8ca1ae",size:"17"}}),record.hasOwnProperty("agent")?_c("span",[_vm._v(_vm._s(_vm.$getProperty(record,"agent.name","---")))]):_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:_vm.tippyOptions,expression:"tippyOptions"}],staticClass:"textoverflow-ellipsis inline-block width160px",attrs:{title:_vm.getResourceName(record)}},[_vm._v(_vm._s(_vm.getResourceName(record)))])],1)])])]}}],null,!1,3520741007)})],1),_c("div",{staticClass:"flex-1"},[_c("router-view",{attrs:{viewname:_vm.viewname}})],1)])]):_c("CommonListLayout",{key:_vm.moduleName+"-list-layout",staticClass:"custom-module-list-layout",attrs:{moduleName:_vm.moduleName,showViewRearrange:!0,showViewEdit:!0,visibleViewCount:3,getPageTitle:function(){return _vm.moduleDisplayName},pathPrefix:_vm.parentPath,hideSubHeader:_vm.canHideSubHeader,recordCount:_vm.recordCount,recordLoading:_vm.showLoading},scopedSlots:_vm._u([{key:"header",fn:function(){return[_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName}}),_vm.canShowVisualSwitch?_c("visual-type",{on:{onSwitchVisualize:function(val){return _vm.canShowListView=val}}}):_vm._e(),_c("CustomButton",{staticClass:"custom-button",attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_TOP},on:{onSuccess:_vm.refreshRecordDetails,onError:function(){}}})]},proxy:!0},_vm.canShowCalendarHeader?{key:"sub-header",fn:function(){return[_vm.showListView?_vm._e():_c("CalendarDateWrapper")]},proxy:!0}:null,{key:"sub-header-actions",fn:function(){return[!_vm.isEmpty(_vm.records)&&_vm.showListView?[_c("pagination",{staticClass:"pL15 fc-black-small-txt-12",attrs:{total:_vm.recordCount,currentPageCount:_vm.currentPageCount,perPage:_vm.perPage,skipTotalCount:!0}}),_vm.recordCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),"open-delay":500,placement:"top",tabindex:-1}},[_c("Sort",{key:_vm.moduleName+"-sort",attrs:{moduleName:_vm.moduleName},on:{onSortChange:_vm.updateSort}})],1),_vm.hasPermission("EXPORT")?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_vm.hasPermission("EXPORT")?_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.export"),"open-delay":500,placement:"top",tabindex:-1}},[_c("f-export-settings",{attrs:{module:_vm.moduleName,viewDetail:_vm.viewDetail,showViewScheduler:!0,showMail:!1,filters:_vm.filters}})],1):_vm._e()]:_vm._e()]},proxy:!0},{key:"content",fn:function(){return[_vm.showLoading?_c("Spinner",{staticClass:"mT40",attrs:{show:_vm.showLoading}}):_vm.showListView?[_vm.isRecordsEmpty?_c("div",{staticClass:"cm-empty-state-container"},[_c("img",{staticClass:"mT20 self-center",attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10 label-txt-black f14 self-center"},[_vm._v(" "+_vm._s(_vm.emptyStateText)+" ")])]):_vm._e(),_vm.isRecordsNotEmpty?[_c("div",{staticClass:"cm-list-container"},[_c("div",{staticClass:"column-customization-icon",attrs:{disabled:!_vm.isColumnCustomizable},on:{click:_vm.toShowColumnSettings}},[_c("el-tooltip",{attrs:{disabled:_vm.isColumnCustomizable,placement:"top",content:_vm.$t("common._common.you_dont_have_permission")}},[_c("inline-svg",{staticClass:"text-center position-absolute icon",attrs:{src:"column-setting"}})],1)],1),_vm.selectedListItemsIds.length>0?_c("div",{staticClass:"pull-left table-header-actions"},[_c("div",{staticClass:"action-btn-slide btn-block"},[_vm.$hasPermission("sensorrollupalarm:DELETE")?_c("button",{staticClass:"btn btn--tertiary pointer",class:{disabled:_vm.isLoading},on:{click:function($event){return _vm.deleteRecords(_vm.selectedListItemsIds)}}},[_vm.isLoading?_c("i",{staticClass:"fa fa-circle-o-notch b-icon fa-spin",attrs:{"aria-hidden":"true"}}):_c("i",{staticClass:"fa fa-trash-o b-icon"}),_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")]):_vm._e()]),_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_BAR,staticClass:"custom-button",attrs:{modelDataClass:_vm.modelDataClass,selectedRecords:_vm.selectedListItemsObj,moduleName:_vm.moduleName,position:_vm.POSITION.LIST_BAR},on:{onSuccess:_vm.refreshRecordDetails,onError:function(){}}})],1):_vm._e(),_c("CommonList",{attrs:{moduleName:_vm.moduleName,viewDetail:_vm.viewDetail,records:_vm.records,slotList:_vm.slotList,redirectToOverview:_vm.redirectToOverview,refreshList:_vm.onCustomButtonSuccess},on:{"selection-change":_vm.selectAlarm},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("router-link",{staticClass:"d-flex fw5 label-txt-black ellipsis main-field-column",attrs:{to:_vm.redirectToOverview(record.id)}},[_c("div",{staticClass:"min-width150"},[_c("span",{staticClass:"q-item-label pL5 f13 letter-spacing0_4"},[_vm._v(" "+_vm._s(_vm.getSensorDisplayName(record))+" ")])])])]}},{key:_vm.slotList[1].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                    placement: 'top',\n                    animation: 'shift-away',\n                    arrow: true,\n                  }"}],staticClass:"self-center mL5 textoverflow-ellipsis",attrs:{title:_vm.getSensorDisplayName(record)}},[_vm._v(" "+_vm._s(_vm.getSensorDisplayName(record))+" ")])])]}},{key:_vm.slotList[2].criteria,fn:function(ref){var record=ref.record;return[_c("div",[record.severity.id?_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getAlarmColor(record)},attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.getAlarmDisplayName(record))+" ")])]}},{key:_vm.slotList[3].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"min-width150"},[_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:_vm.timerHoverOptions,expression:"timerHoverOptions"}],staticClass:"alarm-timer",attrs:{id:"timer_popover_"+record.id,time:record.lastOccurredTime,title:_vm._f("formatDate")(record.lastOccurredTime)}}),_c("div",{staticClass:"hide",attrs:{id:"timer_popover_"+record.id}},[_c("div",{staticClass:"alarm-timer-text"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(record.lastOccurredTime))+" ")])])],1)]}},{key:_vm.slotList[4].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"min-width150"},[_c("inline-svg",{staticClass:"occurrence-icon",attrs:{src:"event"}}),_c("span",{staticClass:"q-item-label pL5 f13 letter-spacing0_4"},[_vm._v(" "+_vm._s(_vm.getNoOfOccurrences(record))+" ")])],1)]}},{key:_vm.slotList[5].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"min-width150"},[_vm.$hasPermission("sensorrollupalarm:ACKNOWLEDGE_ALARM")?_c("div",{staticClass:"pull-left acknowledgeColumn"},[!record.acknowledged&&_vm.isActiveAlarm(record)?_c("el-button",{staticClass:"uppercase ack-btn",attrs:{size:"mini",plain:""},on:{click:function($event){return _vm.acknowledgeAlarm(record)}}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledge")))]):_vm.isActiveAlarm(record)?_c("span",{staticClass:"q-item-label f11"},[_c("div",{staticClass:"self-center mL5"},[_c("user-avatar",{attrs:{size:"sm",user:record.acknowledgedBy}})],1),_c("div",{staticClass:"self-center mL5"},[_vm._v(" "+_vm._s(_vm.getAcknowledgedTime(record))+" ")])]):_c("span",{staticClass:"q-item-label"})],1):_vm._e()])]}},{key:_vm.slotList[6].name,fn:function(ref){var record=ref.record;return[_c("CustomButton",{key:_vm.moduleName+"_"+record.id+"_"+_vm.POSITION.LIST_ITEM,ref:"custom-btn-"+record.id,attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_ITEM,record:record,trigger:"click"},on:{onSuccess:_vm.onCustomButtonSuccess,freezeRecord:function(val){return _vm.isTableFreeze=val},moreActionButtons:function(command){return _vm.handleDropDown(command,record)}}},[_vm.isActiveAlarm(record)&&_vm.$hasPermission("sensorrollupalarm:CREATE_WORKORDER")?_c("el-dropdown-item",{attrs:{command:"createWo"}},[_vm.isWoCreated(record)?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common._common.view_workorder"))+" ")]):_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.create_workorder"))+" ")])]):_vm._e(),_vm.$hasPermission("sensorrollupalarm:DELETE")?_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete"))+" ")]):_vm._e()],1)]}}],null,!0)}),_c("el-dialog",{attrs:{visible:_vm.dialogVisible,width:"32%","custom-class":"dialog"},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("alarm-model",{ref:"confirmWoModel",on:{submit:_vm.createWO,closed:_vm.closeWoDialog}})],1)],1)]:_vm._e()]:_vm.showListView?_vm._e():_c("CalendarView",{ref:"calendar",attrs:{moduleName:_vm.moduleName,record:_vm.records,viewDetail:_vm.viewDetail,viewname:_vm.viewname,filters:_vm.filters}}),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:_vm.moduleName,viewName:_vm.viewname,excludeMainField:"true"},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}})]},proxy:!0}],null,!0)},[_c("portal",{attrs:{to:"view-manager-link"}},[_c("router-link",{staticClass:"view-manager-btn",attrs:{tag:"div",to:{path:"/app/fa/sensoralarms/sensorrollupalarm/viewmanager"}}},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}}),_c("span",{staticClass:"label mL10 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.views_manager"))+" ")])],1)],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(32284)),User=__webpack_require__(426803),validation=__webpack_require__(990260),router=__webpack_require__(329435),AlarmModel=__webpack_require__(703117),NewAlarmMixin=__webpack_require__(230255),CommonModuleList=__webpack_require__(347446),Timer=__webpack_require__(114857),SensorAlarmListvue_type_script_lang_js={extends:CommonModuleList["default"],name:"SensorAlarmList",props:["viewname"],mixins:[NewAlarmMixin/* default */.Z],components:{UserAvatar:User/* default */.Z,AlarmModel:AlarmModel/* default */.Z,Timer:Timer/* default */.Z},data:function(){return{dialogVisible:!1,createWoIds:[],isTableFreeze:!1,tippyOptions:{placement:"top",animation:"shift-away",arrow:!0}}},created:function(){this.init()},computed:{slotList:function(){return[{name:"readingField",isHardcodedColumn:!0,columnAttrs:{"min-width":275,fixed:"left",label:"SENSOR"}},{criteria:JSON.stringify({name:"readingFieldId"})},{criteria:JSON.stringify({name:"severity"})},{criteria:JSON.stringify({name:"lastOccurredTime"})},{criteria:JSON.stringify({name:"noOfOccurrences"})},{criteria:JSON.stringify({name:"acknowledgedBy"})},{name:"clearDeleteCreateWO",isActionColumn:!0,columnAttrs:{width:130,class:"visibility-visible-actions",fixed:"right",align:"right"}}]},timerHoverOptions:function(){return{distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0}},isRecordsEmpty:function(){return(0,validation/* isEmpty */.xb)(this.records)&&!this.showLoading},isRecordsNotEmpty:function(){return!(0,validation/* isEmpty */.xb)(this.records)&&!this.showLoading},parentPath:function(){var modulePath=this.modulePath;return"/app/".concat(modulePath,"/")},modulePath:function(){return"fa/sensoralarms"},emptyStateText:function(){return"No Data Available"}},methods:{getUserInfo:function(record){var _ref=record||{},acknowledgedBy=_ref.acknowledgedBy,_ref2=acknowledgedBy||{},id=_ref2.id;return this.getUserName(id)},init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.$store.dispatch("view/loadModuleMeta",_this.moduleName),_this.$store.dispatch("loadTicketPriority"),_this.$store.dispatch("loadTicketCategory"),_this.$store.dispatch("loadTicketStatus",_this.moduleName||"");case 4:case"end":return _context.stop()}}),_callee)})))()},getReadingFieldName:function(record){return this.$getProperty(record,"subject","---")},getResourceName:function(record){var _ref3=record||{},resource=_ref3.resource;return this.$getProperty(resource,"name","---")},isWoCreated:function(record){var _ref4=record||{},lastWoId=_ref4.lastWoId;return!(0,validation/* isEmpty */.xb)(lastWoId)},openList:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var viewname,$route,_ref5,query,_ref6,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return viewname=_this2.viewname,$route=_this2.$route,_ref5=$route||{},query=_ref5.query,_context2.next=4,_this2.loadRecords();case 4:(0,router/* isWebTabsEnabled */.tj)()?(_ref6=(0,router/* findRouteForModule */.Jp)(_this2.moduleName,router/* pageTypes */.As.LIST)||{},name=_ref6.name,_this2.$router.push({name:name,params:{viewname:viewname},query:query})):_this2.$router.push({name:"sensorrollupalarm-list",params:{viewname:viewname},query:query});case 5:case"end":return _context2.stop()}}),_callee2)})))()},redirectToOverview:function(id){var moduleName=this.moduleName,viewname=this.viewname;if((0,router/* isWebTabsEnabled */.tj)()){var _ref7=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name,route={name:name,params:{viewname:viewname,id:id},query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{tab:"summary"})};return route}return{name:"sensorrollupalarm-summary",params:{moduleName:moduleName,viewname:viewname,id:id},query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{tab:"summary"})}},handleDropDown:function(command,record){if("clear"===command)this.updateAlarmStatus(record);else if("delete"===command)this.deleteRecords([record.id]);else{var woId=this.$getProperty(record,"lastWoId");woId>0?this.openWorkorder(woId):this.createWoDialog(record.lastOccurrenceId)}},acknowledgeAlarm:function(record){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref8,lastOccurrenceId,id,lastOccId,$account,_ref9,user,dataObj,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref8=record||{},lastOccurrenceId=_ref8.lastOccurrenceId,id=_ref8.id,lastOccId=record&&lastOccurrenceId?lastOccurrenceId:null,$account=_this3.$account,_ref9=$account||{},user=_ref9.user,dataObj={alarm:record,occurrence:{id:lastOccId},acknowledged:!0,acknowledgedBy:user,acknowledgedTime:Date.now(),id:id},params={data:dataObj,moduleName:_this3.moduleName,id:id},_context3.next=8,api/* API */.bl.post("v3/modules/data/patch",params);case 8:if(_yield$API$post=_context3.sent,error=_yield$API$post.error,!(0,validation/* isEmpty */.xb)(error)){_context3.next=13;break}return _context3.next=13,_this3.loadRecords(!0);case 13:case"end":return _context3.stop()}}),_callee3)})))()},selectAlarm:function(selectAlarmcheck){this.selectedListItemsObj=selectAlarmcheck,this.selectedListItemsIds=selectAlarmcheck.map((function(value){return value.id}))},unSelectRecords:function(){this.selectedListItemsIds=[],this.selectedListItemsObj=[]}}},v3_SensorAlarmListvue_type_script_lang_js=SensorAlarmListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v3_SensorAlarmListvue_type_script_lang_js,render,staticRenderFns,!1,null,"fa03f0e4",null)
/* harmony default export */,SensorAlarmList=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/64295.js.map