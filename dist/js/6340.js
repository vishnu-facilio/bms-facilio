"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[6340],{
/***/406340:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Events}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/event/pages/firealarm/Events.vue?vue&type=template&id=41592724
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[-1===_vm.openEventId?_c("div",{staticClass:"fc-list-view p10 pT0 height100 mT10"},[_c("div",{staticClass:"row full-layout-white scrollable130-y100 fc-border-1",staticStyle:{"margin-top":"10px",display:"block"}},[_c("table",{staticClass:"fc-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticStyle:{width:"15px"}}),_c("th",{staticClass:"text-left",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.message"))+" ")]),_c("th",{staticClass:"text-left",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.source"))+" ")]),_c("th",{staticClass:"text-left",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.condition"))+" ")]),_c("th",{staticClass:"text-left",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.space_asset"))+" ")]),_c("th",{staticClass:"text-left",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.severity"))+" ")]),_c("th",{staticClass:"text-left",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.created_time"))+" ")]),_c("th",{staticClass:"text-left",staticStyle:{"text-transform":"uppercase"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.status"))+" ")])])]),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_c("tbody",[_vm.events.length?_vm._l(_vm.events,(function(event){return _c("tr",{key:event.id,staticClass:"tablerow",class:{active:_vm.openEventId===_vm.events.id}},[_c("td",{staticStyle:{width:"15px"}}),_c("td",{staticClass:"text-left ellipsis",on:{click:function($event){return _vm.opensummary(event.id)}}},[_c("div",{staticClass:"q-item-division relative-position"},[_c("div",{staticClass:"q-item-main q-item-section"},[_c("div",{staticClass:"q-item-label ellipsis primary-field bold",staticStyle:{"max-width":"250px"}},[_vm._v(" "+_vm._s(event.eventMessage)+" ")])])])]),_c("td",{staticClass:"text-left secondary-color",staticStyle:{"min-width":"100px"}},[_c("div",[_c("span",{staticClass:"q-item-label ellipsis"},[_vm._v(_vm._s(event.source?event.source:"---"))])])]),_c("td",{staticClass:"text-left"},[_c("div",{staticClass:"q-item-division relative-position"},[event.condition?_c("div",[_c("span",{staticClass:"q-item-label ellipsis f13",staticStyle:{"max-width":"200px",display:"block"}},[_vm._v(_vm._s(event.condition))])]):_c("div",[_c("span",{staticClass:"q-item-label secondary-color color-d"},[_vm._v("---")])])])]),_c("td",{staticClass:"text-left ellipsis",staticStyle:{"min-width":"100px"}},[_c("div",{staticClass:"q-item-division relative-position"},[event.resource&&event.resource.name?_c("div",[_c("span",{staticClass:"q-item-label ellipsis f13"},[_vm._v(_vm._s(event.resource.name))])]):_c("div",[_c("span",{staticClass:"q-item-label secondary-color color-d"},[_vm._v("---")])])])]),_c("td",{staticClass:"text-left secondary-color text-overflow-ellipsis",staticStyle:{"min-width":"100px"}},[_c("div",{staticClass:"q-item-label"},[event.severity?_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getAlarmSeverityByName(event.severity).color},attrs:{"aria-hidden":"true"}}):_vm._e(),_c("span",{staticClass:"q-item-label uppercase secondary-color f13"},[_vm._v(_vm._s(event.severity?_vm.getAlarmSeverityByName(event.severity).displayName:"---"))])])]),_c("td",{staticClass:"text-left"},[_c("div",{staticClass:"q-item-division relative-position"},[event.createdTime?_c("div",[event.createdTime?_c("div",[_c("div",{staticClass:"q-item-sublabel wl-id pointer f13"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(event.createdTime))+" ")])]):_c("div",[_c("div",{staticClass:"q-item-sublabel wl-id color-2"},[_vm._v("---")])])]):_vm._e()])]),_c("td",{staticClass:"text-left secondary-color text-overflow-ellipsis",staticStyle:{"min-width":"100px"}},[_c("div",[event.eventState?_c("span",{staticClass:"q-item-label"},[_vm._v(" "+_vm._s(_vm.getStateVal(event.eventState)))]):_c("span",{staticClass:"color-d"},[_vm._v(" --- ")])])])])})):_c("tr",{staticClass:"nowotd"},[_c("td",{attrs:{colspan:"100%"}},[_c("div",{staticClass:"row container"},[_c("div",{staticClass:"justify-center nowo"},[_c("div",[_c("img",{staticClass:"nowo-logo",attrs:{src:__webpack_require__(457524)}}),_c("div",{staticClass:"q-item-label nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.no_event_here"))+" ")]),_c("div",{staticClass:"q-item-sublabel nowo-sublabel",staticStyle:{width:"24%"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.no_event_in_view"))+" ")])])])])])])],2)])])]):_c("div",{staticClass:"fc-column-view height100"},[_c("div",{staticClass:"row fc-column-view-title height100"},[_c("div",{staticClass:"col-4 fc-column-view-left height100"},[_c("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"row fia-tabel-header fc-border-1",staticStyle:{padding:"18px","padding-left":"14px","background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12 secondary-color f11"},[_c("div",{staticClass:"pull-left"},[_c("div",{staticClass:"q-item-label inline row uppercase"},[_c("span",{staticStyle:{left:"10px",position:"relative",top:"3px"}},[_vm._v(_vm._s(_vm.$t("header.evetns")))])])]),_c("div",{staticClass:"pull-right row"},[_c("div",{staticStyle:{"padding-right":"30px"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.recent"))),_c("i",{staticClass:"fa fa-sort-desc fia-icon-downarrow",attrs:{"aria-hidden":"true"}})]),_c("div",{staticStyle:{"padding-right":"20px"}},[_vm._v("|")]),_vm._m(0),_vm._m(1)])])]),_vm.loading?_c("div",{staticClass:"row fia-tabel-nocontent"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",{},[_c("div",{staticClass:"row fc-column-view-records height100"},[_c("table",{staticClass:"fc-list-view-table",staticStyle:{height:"calc(100vh - 100px)","overflow-y":"scroll",display:"block","padding-bottom":"60px"}},[_vm.events.length?_c("tbody",_vm._l(_vm.events,(function(event){return _c("tr",{key:event.id,staticClass:"tablerow",class:{active:_vm.openEventId===event.id}},[_c("td",{staticStyle:{width:"5%"}}),_c("td",{staticClass:"text-left width90 pL5",on:{click:function($event){return _vm.opensummary(event.id)}}},[_c("div",{staticClass:"q-item-main q-item-section"},[_c("div",{staticClass:"q-item-label pull-left"},[_vm._v(" "+_vm._s(event.eventMessage)+" ")]),_c("div",{staticClass:"q-item-sublabel wl-id pointer pull-right",staticStyle:{"margin-top":"0px"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(event.createdTime))+" ")])])])])})),0):_vm._e()])])])]),_c("div",{staticClass:"col-8 fc-column-view-right"},[_c("div",{attrs:{slot:"right"},slot:"right"},[_c("router-view",{attrs:{name:"summary"}})],1)])])]),_vm.showCreateNewDialog?_c("new-event-layout"):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{"padding-right":"30px"}},[_c("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),_c("i",{staticClass:"fa fa-sort-desc fia-icon-downarrow",attrs:{"aria-hidden":"true"}})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])}],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(857267),__webpack_require__(648324),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(420629)),NewEventvue_type_template_id_fb4f2370_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("q-modal",{ref:"createNewEventModel",attrs:{position:"right","content-classes":"fc-create-record"},on:{close:_vm.close}},[_c("q-btn",{staticClass:"fc-model-close",attrs:{flat:""},on:{click:function($event){return _vm.$refs.createNewEventModel.close()}}},[_c("q-icon",{attrs:{name:"close"}})],1),_c("div",{staticClass:"fc-formlayout"},[_c("div",[_c("q-toolbar",{attrs:{inverted:""}},[_c("q-toolbar-title",[_vm._v(_vm._s(_vm.$t("common.events.new_event")))])],1),_c("form",{staticStyle:{padding:"0 25px"},on:{submit:function($event){return $event.preventDefault(),_vm.submit.apply(null,arguments)}}},[_c("div",{staticClass:"row md-gutter"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("div",[_c("label",[_c("h6",[_vm._v(_vm._s(_vm.$t("common.events.payload")))])]),_c("textarea",{directives:[{name:"model",rawName:"v-model",value:_vm.eventPayload,expression:"eventPayload"}],staticClass:"full-width payload",attrs:{required:""},domProps:{value:_vm.eventPayload},on:{input:function($event){$event.target.composing||(_vm.eventPayload=$event.target.value)}}})])]),_c("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12",attrs:{align:"right"}},[_c("q-btn",{attrs:{flat:"",type:"button",cancel:""},on:{click:function($event){return _vm.$refs.createNewEventModel.close()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("q-btn",{attrs:{loader:"",color:"primary"},model:{value:_vm.submitBtn,callback:function($$v){_vm.submitBtn=$$v},expression:"submitBtn"}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" "),_c("span",{attrs:{slot:"loading"},slot:"loading"},[_vm._v(_vm._s(_vm.$t("common._common._saving")))])])],1)])])],1)])],1)],1)},NewEventvue_type_template_id_fb4f2370_staticRenderFns=[],quasar_esm=__webpack_require__(641358),NewEventvue_type_script_lang_js={data:function(){return{eventPayload:'{\n    "source" : "ln01",\n    "condition" : "Smoke Detected",\n    "priority" : 255,\n    "alarmClass" : "Critical",\n    "state" : "Alarm",\n    "severity" : "Major",\n    "test1" : "value1",\n    "test2" : "value2"\n}',submitBtn:!1,severity:[{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"},{label:"Clear",value:"Clear"},{label:"Idle",value:"Idle"}]}},components:{QModal:quasar_esm/* QModal */.hc,QBtn:quasar_esm/* QBtn */.OV,QIcon:quasar_esm/* QIcon */.oF,QToolbar:quasar_esm/* QToolbar */.UX,QToolbarTitle:quasar_esm/* QToolbarTitle */.OU},mounted:function(){this.$refs.createNewEventModel.open()},methods:{close:function(){var newpath=this.$route.path.replace("/new","");this.$router.replace({path:newpath})},cancel:function(){this.$emit("canceled"),this.submitBtn=!1},submit:function(){this.submitBtn=!0,this.$http.post("/event/addevent",{payload:JSON.parse(this.eventPayload)}).catch((function(){})),this.close()}}},firealarm_NewEventvue_type_script_lang_js=NewEventvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(firealarm_NewEventvue_type_script_lang_js,NewEventvue_type_template_id_fb4f2370_render,NewEventvue_type_template_id_fb4f2370_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewEvent=component.exports,Eventsvue_type_script_lang_js={data:function(){return{loading:!1,summoryview:!1,selectedEvents:[],selectAll:!1,newViewName:"",sortConfig:{orderBy:{label:this.$t("wr_list.created_on"),value:"createdTime"},orderType:"desc",list:[{label:this.$t("wr_list.created_on"),value:"createdTime"},{label:this.$t("wr_list.due_by_time"),value:"dueDate"},{label:this.$t("wr_list.subject"),value:"subject"}]},showQuickSearch:!1,quickSearchQuery:null,states:{1:"Ready",2:"Ignored",3:"Alarm Created",4:"Alarm Updated"},page:1,perPage:30,allEventsLoaded:!1}},title:function(){},directives:{Ripple:quasar_esm/* Ripple */.HW},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAlarmSeverityByName"])),{},{events:function(){return this.$store.state.event.events},openEventId:function(){return this.$route.params.id?parseInt(this.$route.params.id):-1},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},canShowFilteredFields:function(){var canShow=!1;if(this.filters){var self=this;Object.keys(this.filters).forEach((function(key){self.filters[key].value.length&&(canShow=!0)}))}return canShow},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:"today"},showCreateNewDialog:function(){return!!this.$route.query.create}}),created:function(){this.$store.dispatch("loadAlarmSeverity")},mounted:function(){this.loadEvents()},methods:{toggleSelection:function(woId){var idx=this.selectedEvents.indexOf(woId);-1===idx?this.selectedEvents.push(woId):this.selectedEvents.splice(idx,1)},resetSelectAll:function(){this.selectedEvents=[],this.selectAll=!1},loadEvents:function(){var self=this,queryObj={viewname:this.currentView};self.loading=!0,self.$store.dispatch("event/fetchEvents",queryObj).then((function(){self.loading=!1,self.fetchEvent()})).catch((function(error){error&&(self.loading=!1)})),self.setTitle(self.$options.filters.viewName(self.currentView))},opensummary:function(id){this.$router.push({path:"/app/fa/events/"+this.$route.params.viewname+"/summary/"+id})},openEvent:function(id){this.summoryview=!0,this.$router.push({path:"/app/fa/events/"+this.$route.params.viewname+"/summary/"+id})},clearFiters:function(){this.$router.replace({path:this.$route.path,query:{}})},removeFilterField:function(fl,index){fl.value.splice(index,1),this.$router.replace({path:this.$route.path,query:{search:JSON.stringify(this.filters)}})},showQuickSearchBox:function(){this.showQuickSearch=!0},hideQuickSearchBox:function(){this.showQuickSearch=!1,this.quickSearchQuery&&this.quickSearchQuery.trim().length>0&&(this.quickSearchQuery=null,this.loadEvents())},quickSearch:function(){this.quickSearchQuery&&this.quickSearchQuery.trim().length>0&&this.loadEvents()},openCreateDialog:function(){this.$refs.createNewEventModel.open()},closeCreateDialog:function(){this.$refs.createNewEventModel.close()},getStateVal:function(state){return this.states[state]},openalarm:function(id){if(!id)return!1;this.$router.push({path:"/app/fa/faults/summary/"+id})},fetchEvent:function(){if(this.openEventId>0){var event=this.$store.getters["event/getEventById"](this.openEventId);event||this.$store.dispatch("event/summaryEvents",{id:this.openEventId})}}},watch:{currentView:function(newVal,oldVal){oldVal!==newVal&&this.loadEvents()},openEventId:function(){-1===this.openEventId?this.summoryview=!1:this.fetchEvent()},filters:function(){this.loadEvents()},searchQuery:function(){this.quickSearchQuery=this.searchQuery,this.loadEvents()},selectAll:function(val){val?this.selectedEvents=this.events.map((function(event){return event.id})):this.selectedEvents.length===this.events.length&&(this.selectedEvents=[])},selectedEvents:function(){this.selectedEvents.length!==this.events.length&&(this.selectAll=!1)}},components:{NewEventLayout:NewEvent},filters:{viewName:function(name){return"today"===name?"Today Events":"yesterday"===name?"Yesterday Events":"thisweek"===name?"This Week Events":"lastweek"===name?"Last Week Events":"all"===name?"All Events":"Events"}}},firealarm_Eventsvue_type_script_lang_js=Eventsvue_type_script_lang_js,Events_component=(0,componentNormalizer/* default */.Z)(firealarm_Eventsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Events=Events_component.exports},
/***/457524:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/no_workorder.cc14d21f.jpg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/6340.js.map