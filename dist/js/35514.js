"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[35514],{
/***/235514:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SLATypeList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/sla/SLATypeList.vue?vue&type=template&id=2809ecfa&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 overflow-hidden"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title text-capitalize"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.slapolicies"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.list_sla_policie"))+" ")])]),_c("div",{staticClass:"action-btn setting-page-btn"},[_vm.canShowAdd?_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.addEntity}},[_vm._v(" "+_vm._s(_vm.$t("setup.add.add_breach_type"))+" ")]):_vm._e()],1)]),_c("div",{staticClass:"pL30 pB20"},[_c("portal-target",{attrs:{name:"sla-modules"}})],1),_vm._t("subHeaderMenu"),_c("el-tabs",{staticClass:"alarm-action-tab",attrs:{"before-leave":function(){return!1}},on:{"tab-click":_vm.switchTab},model:{value:_vm.currentTab,callback:function($$v){_vm.currentTab=$$v},expression:"currentTab"}},[_c("el-tab-pane",{attrs:{label:"SLA Policies",name:"sla.list"}}),_c("el-tab-pane",{attrs:{label:_vm.$t("setup.setupLabel.sla_tab_switch_title"),name:"sla.types"}})],1),_c("div",{staticClass:"container-scroll mT15"},[_c("div",{staticClass:"row setting-Rlayout"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common.roles.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_field"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.reference_field"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])]),_vm.isLoading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1)])]):_vm.entities.length?_c("tbody",_vm._l(_vm.entities,(function(entity,index){return _c("tr",{key:index,staticClass:"tablerow"},[_c("td",[_vm._v(_vm._s(entity.name))]),_c("td",[_vm._v(_vm._s(_vm.getFieldName(entity.dueFieldId)))]),_c("td",[_vm._v(_vm._s(_vm.getFieldName(entity.baseFieldId)))]),_vm.canShowAdd?_c("td",{on:{click:function($event){return _vm.editEntity(entity)}}},[_vm._m(0,!0)]):_c("td")])})),0):_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v(" "+_vm._s(_vm.$t("setup.empty.empty_sla"))+" ")])])])])])])]),_vm.showEntityDialog?_c("NewSLAEntity",{attrs:{isNew:_vm.isNew,entity:_vm.activeEntityObj,moduleName:_vm.moduleName},on:{onClose:_vm.closeDialog,onSave:_vm.getEntityList}}):_vm._e()],2)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-left actions mT0 mR15 text-center"},[_c("i",{staticClass:"el-icon-edit pointer"})])}],NewSLAEntityvue_type_template_id_79c27386_scoped_true_render=(__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"before-close":_vm.cancel,"custom-class":"fc-dialog-form fc-dialog-right custom-rule-dialog setup-dialog40 setup-dialog"}},[_c("el-form",{ref:"new-stateflow-form",attrs:{model:_vm.slaEntity,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container mR30 pL30"},[_c("div",{staticClass:"new-header-modal"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" "+_vm._s(_vm.title)+" ")])])]),_c("div",{staticClass:"sla-field-desc truncate-text mT3"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_new_type_header_desc"))+" ")])]),_c("div",{staticClass:"new-body-modal new-escalation-level"},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt newsla-header-color"},[_vm._v(" Name ")]),_c("el-input",{staticClass:"width100 pR20",attrs:{autofocus:_vm.isNew,placeholder:_vm.$t("setup.failureclass.enter_description")},model:{value:_vm.slaEntity.name,callback:function($$v){_vm.$set(_vm.slaEntity,"name",$$v)},expression:"slaEntity.name"}})],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"description"}},[_c("p",{staticClass:"fc-input-label-txt newsla-header-color"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.description"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{"min-rows":1,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:_vm.$t("setup.failureclass.enter_description"),resize:"none"},model:{value:_vm.slaEntity.description,callback:function($$v){_vm.$set(_vm.slaEntity,"description",$$v)},expression:"slaEntity.description"}})],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"baseFieldId"}},[_c("p",{staticClass:"fc-input-label-txt m0 newsla-header-color"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_field"))+" ")]),_c("p",{staticClass:"sla-field-desc mB20"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_field_desc"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR20 sla-entity",attrs:{placeholder:_vm.$t("setup.globalscoping.selectfield"),filterable:""},model:{value:_vm.slaEntity.dueFieldId,callback:function($$v){_vm.$set(_vm.slaEntity,"dueFieldId",$$v)},expression:"slaEntity.dueFieldId"}},[_c("template",{slot:"prefix"},[_c("InlineSvg",{attrs:{src:"svgs/calendar",iconClass:"icon mT13 mL5"}})],1),_vm._l(_vm.fields.filter((function(f){return[5,6].includes(f.dataType)})),(function(item){return _c("el-option",{key:item.id,attrs:{label:item.displayName,value:item.id}})}))],2)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"compareFieldId"}},[_c("p",{staticClass:"fc-input-label-txt m0 newsla-header-color"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_referance_field"))+" ")]),_c("p",{staticClass:"sla-field-desc mB20"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_referance_field_desc"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 pR20 sla-entity",attrs:{placeholder:_vm.$t("setup.globalscoping.selectfield"),filterable:""},model:{value:_vm.slaEntity.baseFieldId,callback:function($$v){_vm.$set(_vm.slaEntity,"baseFieldId",$$v)},expression:"slaEntity.baseFieldId"}},[_c("template",{slot:"prefix"},[_c("InlineSvg",{attrs:{src:"svgs/calendar",iconClass:"icon mT13 mL5"}})],1),_vm._l(_vm.fields.filter((function(f){return[5,6].includes(f.dataType)})),(function(item){return _c("el-option",{key:item.id,attrs:{label:item.displayName,value:item.id}})}))],2)],1)],1),_c("div",{staticClass:"mB10"},[_c("span",{staticClass:"fc-modal-sub-title fc-input-label-color"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_criteria"))+" ")]),_c("el-tooltip",{attrs:{placement:"top-start",content:_vm.$t("setup.setupLabel.sla_criteria_info")}},[_c("i",{staticClass:"el-icon-info mL5"})])],1),_c("div",[_c("p",{staticClass:"m0 truncate-text sla-field-desc"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.sla_criteria_desc"))+" ")])]),_c("CriteriaBuilder",{ref:"criteriaBuilder",attrs:{moduleName:_vm.moduleName},model:{value:_vm.slaEntity.criteria,callback:function($$v){_vm.$set(_vm.slaEntity,"criteria",$$v)},expression:"slaEntity.criteria"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:_vm.cancel}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.isSaving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])],1)}),NewSLAEntityvue_type_template_id_79c27386_scoped_true_staticRenderFns=[],objectSpread2=__webpack_require__(595082),dist=__webpack_require__(191853),NewSLAEntityvue_type_script_lang_js={name:"NewSLAEntity",props:["entity","moduleName","isNew"],components:{CriteriaBuilder:dist/* CriteriaBuilder */.IP},created:function(){var _this=this;this.$store.dispatch("loadUsers"),this.loadFields().then((function(){return _this.init()}))},data:function(){return{fields:[],slaEntity:{name:"",description:"",baseFieldId:null,dueFieldId:null,criteria:null},isSaving:!1,rules:{}}},computed:{title:function(){return this.isNew?this.$t("setup.add.new_breach_type"):this.$t("setup.add.edit_breach_type")}},methods:{loadFields:function(){var _this2=this;return this.$http.get("/module/metafields?moduleName="+this.moduleName).then((function(_ref){var data=_ref.data;_this2.fields=_this2.$getProperty(data,"meta.fields",null)||[]}))},init:function(){this.isNew||(this.slaEntity=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.slaEntity),this.entity))},validate:function(){var _this$$refs$criteriaB,isValidCriteria=null===(_this$$refs$criteriaB=this.$refs["criteriaBuilder"])||void 0===_this$$refs$criteriaB?void 0:_this$$refs$criteriaB.validate();return isValidCriteria},cancel:function(){this.$emit("onClose")},save:function(){var _this3=this,isValid=this.validate();if(isValid){var slaEntity=this.slaEntity,moduleName=this.moduleName;this.isSaving=!0,this.$http.post("v2/slaEntity/addOrUpdate",{moduleName:moduleName,slaEntity:slaEntity}).then((function(_ref2){var data=_ref2.data;0===data.responseCode&&(_this3.$message.success("SLA entity saved"),_this3.$emit("onSave",data.result.slaEntity),_this3.cancel()),_this3.isSaving=!1})).catch((function(){_this3.isSaving=!1,_this3.$message.error("Could not create SLA entity")}))}}}},components_NewSLAEntityvue_type_script_lang_js=NewSLAEntityvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_NewSLAEntityvue_type_script_lang_js,NewSLAEntityvue_type_template_id_79c27386_scoped_true_render,NewSLAEntityvue_type_template_id_79c27386_scoped_true_staticRenderFns,!1,null,"79c27386",null)
/* harmony default export */,NewSLAEntity=component.exports,isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),validation=__webpack_require__(990260),SLATypeListvue_type_script_lang_js={props:["moduleName"],components:{NewSLAEntity:NewSLAEntity},data:function(){return{currentTab:"sla.types",module:null,isLoading:!0,entities:[],fields:[],isNew:!1,showEntityDialog:!1,activeEntityObj:{}}},created:function(){this.loadFields()},computed:{canShowAdd:function(){var query=this.$route.query,showAdd=query.hasOwnProperty("add")&&query.add;return showAdd}},watch:{moduleName:{handler:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||(0,validation/* isEmpty */.xb)(newVal)||this.getEntityList()},immediate:!0}},methods:{switchTab:function(tab){var params={moduleName:this.moduleName};this.$router.push({name:tab.name,params:params})},loadFields:function(){var _this=this;return this.$http.get("/module/metafields?moduleName="+this.moduleName).then((function(_ref){var data=_ref.data;_this.fields=_this.$getProperty(data,"meta.fields",null)||[]}))},getFieldName:function(id){var field=this.fields.find((function(field){return field.id===id}))||{};return field.displayName||""},getEntityList:function(){var _this2=this;return this.isLoading=!0,this.$http.post("v2/slaEntity/list",{moduleName:this.moduleName}).then((function(_ref2){var data=_ref2.data;_this2.entities=data.result.slaEntityList||[]})).catch((function(_ref3){var _ref3$message=_ref3.message,message=void 0===_ref3$message?"Error loading SLA Types":_ref3$message;_this2.$message.error(message)})).finally((function(){return _this2.isLoading=!1}))},addEntity:function(){this.isNew=!0,this.activeEntityObj={},this.showEntityDialog=!0},editEntity:function(entity){this.activeEntityObj=this.$helpers.cloneObject(entity),this.isNew=!1,this.showEntityDialog=!0},closeDialog:function(){this.showEntityDialog=!1,this.isNew=!1,this.activeEntityObj={}}}},sla_SLATypeListvue_type_script_lang_js=SLATypeListvue_type_script_lang_js,SLATypeList_component=(0,componentNormalizer/* default */.Z)(sla_SLATypeListvue_type_script_lang_js,render,staticRenderFns,!1,null,"2809ecfa",null)
/* harmony default export */,SLATypeList=SLATypeList_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/35514.js.map