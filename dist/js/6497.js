"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[6497],{
/***/633757:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanActionDialog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/floorPlan/components/FloorPlanActionDialog.vue?vue&type=template&id=09d2e92a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-body-p0 fc-dialog-center-container fc-dialog-header-hide",attrs:{visible:_vm.visibility,width:"55%","append-to-body":!0,"before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"fc-dialog-header-custom p20"},[_c("div",{staticClass:"fc-black2-20 bold line-height24"},[_vm._v(" "+_vm._s(_vm.floor&&_vm.floor.name?_vm.floor.name:"")+" ")]),_c("div",{staticClass:"fc-black-13 text-left pT10 text-uppercase bold"},[_vm._v(" "+_vm._s(_vm.space&&_vm.space.name?_vm.space.name:"")+" ")])]),_c("div",{staticClass:"height500 position-relative"},[_c("el-row",[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"height500 overflow-y-scroll pB50 border-right1"},[_c("div",{staticClass:"label-txt-label p20 flex-middle pointer",class:{SmartListActive:null===_vm.selectedResource},on:{click:function($event){return _vm.getAvgPoint()}}},[_c("i",{staticClass:"fa fa-circle pR10 f6 active-txt",attrs:{"aria-hidden":"true"}}),_vm._v(_vm._s(_vm.elementCategory&&_vm.elementCategory.name?_vm.elementCategory.name+" ("+_vm.resourceLength+")":"")+" ")]),_c("div",{staticClass:"fc-grey2 f11 pL20 pR20 pB20 bold"},[_vm._v(" "+_vm._s(_vm.elementCategory&&_vm.elementCategory._name?""+_vm.elementCategory._name:"")+" ")]),_c("div",{},_vm._l(_vm.elementResourceContext,(function(asset,index){return _c("div",{key:index,staticClass:"label-txt-label pL20 pR20 pT15 pB15 flex-middle border-bottom15 fc-smart-list-side pointer",class:{SmartListActive:_vm.selectedResource==asset.resource},on:{click:function($event){return _vm.getControllablepointlist(asset)}}},[_c("i",{staticClass:"fa fa-circle pR10 f6 active-txt",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(asset.resource.name)+" ")])})),0)])]),_vm.elementCategory&&"LIGHT"===_vm.elementCategory._name?_c("el-col",{attrs:{span:16}},[_vm.point?_c("div",[_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column pT20 pB20"},[_c("div",{staticClass:"fc-black2-18 pT35"},[_vm._v(" "+_vm._s(_vm.selectedResource&&_vm.selectedResource.name?_vm.selectedResource.name:_vm.elementCategory&&_vm.elementCategory.name?_vm.elementCategory.name+" ("+_vm.resourceLength+")":"")+" ")]),_c("div",{staticClass:"pT35 fc-black-12 letter-spacing1"},[_vm._v(" "+_vm._s(_vm.point.name)+" ")]),_c("div",{staticClass:"fc-smart-control-input pT35"},[_c("el-switch",{attrs:{"active-text":_vm.point.field.trueVal.toUpperCase(),"inactive-text":_vm.point.field.falseVal.toUpperCase(),"active-value":1,"inactive-value":0},model:{value:_vm.point.value,callback:function($$v){_vm.$set(_vm.point,"value",$$v)},expression:"point.value"}})],1),_c("div",{staticClass:"pT30 width65"},[_vm.point.value!==_vm.point.rawvalue?_c("div",{staticClass:" fc-warning2-12 text-center"},[_vm._v(" "+_vm._s("You switching "+(_vm.point.value>0?_vm.point.field.trueVal:_vm.point.field.falseVal)+" "+_vm.elementResourceContext.length+" lights")+" ")]):_vm._e()])]),_c("div",{staticClass:"smart-temp-details"},[_vm.selectedResource?_c("div",{staticClass:"text-right bold fc-grey2 f24"},[_vm.point.rawvalue>0?[_vm._v(" "+_vm._s(""+_vm.point.field.trueVal.toUpperCase())+" ")]:[_vm._v(" "+_vm._s(""+_vm.point.field.falseVal.toUpperCase())+" ")],_c("span",{staticClass:"unit f16 bold"},[_vm._v(_vm._s(_vm.unit))])],2):_c("div",{staticClass:"text-right bold fc-grey2 f24"},[_vm._v(" "+_vm._s(_vm.point.field.trueVal.toUpperCase()+" "+_vm.point.actualAvgValue+" / "+_vm.elementResourceContext.length)+" "),_c("span",{staticClass:"unit f16 bold"},[_vm._v(_vm._s(_vm.unit))])]),_c("div",{staticClass:"fc-grey2 f11 text-right pT5"},[_vm._v(" ROOM LIGHT STATUS ")])])]):_vm._e()]):_c("el-col",{attrs:{span:16}},[_vm.point?_c("div",[_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column pT20 pB20"},[_c("div",{staticClass:"fc-black2-18 pT35"},[_vm._v(" "+_vm._s(_vm.selectedResource&&_vm.selectedResource.name?_vm.selectedResource.name:_vm.elementCategory&&_vm.elementCategory.name?_vm.elementCategory.name+" ("+_vm.resourceLength+")":"")+" ")]),_c("div",{staticClass:"pT35 fc-black-12 letter-spacing1"},[_vm._v(" "+_vm._s(_vm.point.name)+" ")]),_c("div",{staticClass:"fc-smart-control-input pT35"},[_c("el-input",{attrs:{placeholder:"celsius",type:"number","controls-position":"right"},model:{value:_vm.point.value,callback:function($$v){_vm.$set(_vm.point,"value",$$v)},expression:"point.value"}},[_c("template",{slot:"append"},[_c("div",{staticClass:"unit f16 bold"},[_vm._v(_vm._s(_vm.unit))])])],2)],1),_c("div",{staticClass:"pT30 width65"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"pR20"},[_c("el-button",{staticClass:"fc-btn-circle-grey",attrs:{circle:""},on:{click:_vm.decrease}},[_c("inline-svg",{attrs:{iconClass:"icon icon-md",src:"svgs/minus-icon"}})],1)],1),_c("div",{staticClass:"fc-smart-progress position-relative width100 mL10"},[_c("el-slider",{staticClass:"fc-temperature-slider",attrs:{min:_vm.point.minValue,max:_vm.point.maxValue},on:{input:function($event){return _vm.setInputValue(_vm.point.sliderValue)}},model:{value:_vm.point.sliderValue,callback:function($$v){_vm.$set(_vm.point,"sliderValue",$$v)},expression:"point.sliderValue"}})],1),_c("div",{staticClass:"pL10"},[_c("el-button",{staticClass:"fc-btn-circle-grey",attrs:{circle:""},on:{click:_vm.increase}},[_c("inline-svg",{attrs:{iconClass:"icon icon-md",src:"svgs/plus-icon"}})],1)],1)]),_vm.point.value-_vm.point.rawvalue!==0?_c("div",{staticClass:"pT20 fc-warning2-12 text-center"},[_vm._v(" Youâ€™ve changed the value by "+_vm._s(_vm.formatValue(_vm.point.value-_vm.point.rawvalue))+" "),_c("span",{staticClass:"unit f12 "},[_vm._v(_vm._s(" "+_vm.unit))])]):_vm._e()])]),_c("div",{staticClass:"smart-temp-details"},[_vm.point.rawvalueRangeFrom&&_vm.point.rawvalueRangeTo&&_vm.point.rawvalueRangeFrom!==_vm.point.rawvalueRangeTo?_c("div",{staticClass:"text-right bold fc-grey2 f24"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.point.rawvalueRangeFrom)+" "+_vm.unit+" ~ "+_vm.formatValue(_vm.point.rawvalueRangeTo)+" "+_vm.unit+" ")+" ")]):_vm.point.rawvalueRangeFrom&&_vm.point.rawvalueRangeTo&&_vm.point.rawvalueRangeFrom===_vm.point.rawvalueRangeTo?_c("div",{staticClass:"text-right bold fc-grey2 f24"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.point.actualAvgValue)+" "+_vm.unit+" ")+" ")]):_c("div",{staticClass:"text-right bold fc-grey2 f24"},[_vm._v(" "+_vm._s(_vm.formatValue(_vm.point.childRDM.value))+" "),_c("span",{staticClass:"unit f16 bold"},[_vm._v(_vm._s(_vm.unit))])]),_c("div",{staticClass:"fc-grey2 f11 text-right pT5"},[_vm._v(" ROOM TEMPERATURE ")])])]):_vm._e()])],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel")))]),_vm.selectedResource?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.setValue(_vm.point)}}},[_vm._v(" Set Value ")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.setSpaceValue(_vm.point)}}},[_vm._v(" Set Value ")])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(879288),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(538077),__webpack_require__(762795),__webpack_require__(413383),__webpack_require__(450886),__webpack_require__(186466),__webpack_require__(169358),__webpack_require__(990260)),Common=__webpack_require__(54278),FloorPlanActionDialogvue_type_script_lang_js={props:["floorPlan","visibility","element","controlCategoryList","spaceControllableCategoriesMap","spaceList","selectedArea"],data:function(){return{sliderRerender:!1,controllableCategories:[],elementResourceContext:null,controllablepointlist:[],point:null,selectedResource:null}},watch:{},computed:{unit:function(){var point=this.point;return point&&point.field&&point.field.unit?point.field.unit:""},resourceLength:function(){return this.elementResourceContext&&this.elementResourceContext.length?this.elementResourceContext.length:0},spaceId:function(){var target=this.element.target;return target.floorplan.spaceId?target.floorplan.spaceId:null},elementCategory:function(){var target=this.element.target;if(target){var floorplan=target.floorplan;if(floorplan.markerType)return this.controlCategoryList.find((function(rt){return rt._name===floorplan.markerType}))}return null},floorId:function(){return!(0,validation/* isEmpty */.xb)(this.floorPlan)&&this.floorPlan.floorId?Number(this.floorPlan.floorId):null},elementCategoryId:function(){return this.elementCategory&&this.elementCategory.categoryId?this.elementCategory.categoryId:null},elementCategoryPoints:function(){return this.elementCategory&&this.elementCategory.points?this.elementCategory.points:[]},space:function(){var _this=this;return(0,validation/* isEmpty */.xb)(this.spaceList)?null:this.spaceList.find((function(rt){return rt.id===_this.spaceId}))},floor:function(){return(0,validation/* isEmpty */.xb)(this.space)?null:this.space.floor}},mounted:function(){this.selectedArea&&this.selectedArea.markers?this.controllableCategories=this.selectedArea.markers:this.controllableCategories=this.spaceControllableCategoriesMap[this.spaceId],this.getResourceData(),this.getAvgPoint()},methods:{increase:function(){this.point.value+=1},decrease:function(){this.point.value-=1},setInputValue:function(value){this.point.minValue<value&&(this.point.value=value)},setValue:function(point){this.setAssetValue(point)},getAvgPoint:function(){this.selectedResource=null;var pointList=this.getControllablePointsList();this.point=this.getPointFromPointList(pointList)},getPointFromPointList:function(pointList){var _this2=this,point=null,unitEnum=null,avgValue=0,actualAvgValue=0,valArray=[],pointname="",pointId=null,rawvalueRangeFrom=pointList[0]&&pointList[0].childRDM?this.getChildRDMValue(pointList[0]):0,rawvalueRangeTo=pointList[0]&&pointList[0].childRDM?this.getChildRDMValue(pointList[0]):0,minValue=pointList[0]&&pointList[0].minValue?pointList[0].minValue:0,maxValue=pointList[0]&&pointList[0].maxValue?pointList[0].maxValue:0,datatype=null;return pointList&&(pointList.forEach((function(rt){datatype=rt.field.dataType,pointId=rt.pointId,pointname=rt.name,unitEnum=rt.field,4===datatype?(Number(rt.value)>0&&actualAvgValue++,valArray.push(Number(rt.value))):(avgValue=Number(rt.value)+avgValue,actualAvgValue=Number(_this2.getChildRDMValue(rt))+actualAvgValue,minValue>=rt.minValue&&(minValue=rt.minValue),maxValue<=rt.maxValue&&(maxValue=rt.maxValue),rawvalueRangeFrom<=_this2.getChildRDMValue(rt)?rawvalueRangeFrom=_this2.getChildRDMValue(rt):rawvalueRangeTo>=_this2.getChildRDMValue(rt)&&(rawvalueRangeTo=_this2.getChildRDMValue(rt)))})),4===unitEnum.dataType?(avgValue=valArray.length?Math.min.apply(Math,valArray):0,point={field:unitEnum,pointId:pointId,name:pointname,maxValue:maxValue,minValue:minValue,value:avgValue,rawvalue:this.formatValue(Number(avgValue)),actualAvgValue:this.formatValue(Number(actualAvgValue)),rawvalueRangeFrom:rawvalueRangeFrom,rawvalueRangeTo:rawvalueRangeTo,sliderValue:this.formatValue(Number(avgValue))}):(avgValue/=pointList.length,actualAvgValue/=pointList.length,point={field:unitEnum,pointId:pointId,name:pointname,maxValue:maxValue,minValue:minValue,value:this.formatValue(Number(avgValue)),rawvalue:this.formatValue(Number(avgValue)),actualAvgValue:this.formatValue(Number(actualAvgValue)),rawvalueRangeFrom:rawvalueRangeFrom,rawvalueRangeTo:rawvalueRangeTo,sliderValue:this.formatValue(Number(avgValue))})),point},getChildRDMValue:function(point){return point.childRDM&&null!==point.childRDM.value?point.childRDM.value:""},emitEvents:function(name){this.$emit(name)},setAssetValue:function(point){var fieldId=point.fieldId,resourceId=point.resourceId,value=point.value;this.$http.get("/v2/controlAction/setReadingValue?resourceId=".concat(resourceId,"&value=").concat(value,"&fieldId=").concat(fieldId)).then((function(_ref){var data=_ref.data;data.responseCode})),this.$message({message:"".concat(point.name," updated"),type:"success"}),this.emitEvents("setValue"),this.closeDialog()},setSpaceValue:function(){var _this$point=this.point,value=_this$point.value,pointId=_this$point.pointId,name=_this$point.name,elementCategoryId=this.elementCategoryId,spaceId=this.spaceId;this.$http.get("/v2/controlAction/setReadingValueForSpace?spaceId=".concat(spaceId,"&value=").concat(value,"&controllablePoint=").concat(pointId,"&controllableCategory=").concat(elementCategoryId)).then((function(_ref2){var data=_ref2.data;data.responseCode})),this.$message({message:"".concat(name," updated"),type:"success"}),this.emitEvents("setValue"),this.closeDialog()},closeDialog:function(){this.$emit("update:visibility",!1)},getResourceData:function(){this.elementCategory&&(this.elementResourceContext=this.markerFilteredResorces())},markerFilteredResorces:function(){var elementCategory=this.elementCategory;return Object.values(this.controllableCategories).map((function(rt){if(rt.controlTypeEnum&&rt.controlTypeEnum._name===elementCategory._name)return rt.controllableResourceContexts})).flat().filter((function(rt){return void 0!==rt}))},formatValue:function(value){return(0,Common/* formatDecimal */.VG)(value)},getControllablePointsList:function(){var _this3=this,self=this,point=null,pointList=[];return this.elementResourceContext.forEach((function(asset){if(asset.controllablePointMap){var controllablePointMap=asset.controllablePointMap;Object.keys(controllablePointMap).forEach((function(pointId){if(point={},pointId){var pointMetaData=self.elementCategoryPoints.find((function(rt){return rt.pointId===Number(pointId)})),pointdata=controllablePointMap[pointId];pointMetaData&&(point=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},pointdata),pointMetaData),self.controllablepointlist.push(point))}})),point&&(point.value=_this3.formatValue(Number(point.value)),point.rawvalue=_this3.formatValue(Number(point.value)),point.sliderValue=_this3.formatValue(Number(point.value)),pointList.push(point)),0===point.value&&(point.minValue=0)}})),pointList},getControllablepointlist:function(asset){this.selectedResource=null;var self=this;if(this.selectedResource=asset.resource,this.controllablepointlist=[],asset.controllablePointMap){var controllablePointMap=asset.controllablePointMap;Object.keys(controllablePointMap).forEach((function(pointId){if(pointId){var pointMetaData=self.elementCategoryPoints.find((function(rt){return rt.pointId===Number(pointId)})),pointdata=controllablePointMap[pointId];pointMetaData&&self.controllablepointlist.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},pointdata),pointMetaData))}})),self.point=self.controllablepointlist&&self.controllablepointlist.length?self.controllablepointlist[0]:null,0===self.point.value&&(self.point.minValue=0),self.point&&(self.point.value=this.formatValue(Number(self.point.value)),self.point.rawvalue=this.formatValue(Number(self.point.value)),self.point.sliderValue=this.formatValue(Number(self.point.value)))}}}},components_FloorPlanActionDialogvue_type_script_lang_js=FloorPlanActionDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanActionDialogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanActionDialog=component.exports},
/***/907316:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorplanBuilderNotification}});// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/floorPlan/components/FloorplanBuilderNotification.vue?vue&type=script&lang=js
// used to customize the notification
/* harmony default export */var render,staticRenderFns,FloorplanBuilderNotificationvue_type_script_lang_js={methods:{showError:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error occured";this.$message.error(data)},showSaving:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...";this.$message({message:data,type:"success"})},showSuccess:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success";this.$message({message:data,type:"success"})},showWarning:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning";this.$message({message:data,type:"warning"})}}},components_FloorplanBuilderNotificationvue_type_script_lang_js=FloorplanBuilderNotificationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorplanBuilderNotificationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorplanBuilderNotification=component.exports},
/***/474560:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DrawElementsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js
var render,staticRenderFns,createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),fabric=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(232777)),Common=__webpack_require__(54278),CURRENT_MARKER_FIELD_PREFIX=function(key){return"currentMarker."+key},DrawElementsMixinvue_type_script_lang_js={methods:{getlayerInfo:function(){var layer=this.layer,sublayer=this.sublayer,layerInfo={layer:layer,sublayer:sublayer};return layerInfo},addUtilMarker:function(mode){var canvas=this.canvas,svg="",uid=1,options={floorplan:{uid:uid,name:"",markerType:null,blink:!1,hide:!1,animateEffect:"none",id:(0,Common/* getUniqueId */.Ki)(),spaceId:null,objectType:"element_group",type:"element_group"},hoverCursor:"pointer"};"1"===mode?(uid="1_1",options.floorplan.name="CCTV",svg='<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512"><rect width="512" height="512" rx="20" ry="20" fill="#5b616b" transform="matrix(.1 0 0 .1 230.4 230.4)"/><path d="M261.47 261.31l7.325-9.737-19.118-7.64-4.364 10.919 7.49 2.994-.92 2.296a2.886 2.886 0 00-2.961 1.975h-2.86v-3.976h-5.422v9.926h5.422v-4.156h2.86a2.886 2.886 0 002.737 1.985 2.885 2.885 0 002.882-2.882c0-.871-.39-1.652-1.003-2.182l.931-2.32 7.001 2.798zm-1.51-5.567l1.667.665-.667 1.666-1.665-.665.666-1.666zM269.326 253.851l-4.935 6.56 4.029 1.61 2.94-7.357z" fill="#fff" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/></svg>'):"2"===mode?(options.floorplan.name="LIFT",uid="1_2",svg='<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512"><rect width="512" height="512" rx="20" ry="20" fill="#5b616b"/><path d="M341.2 142.4H136.72a5.675 5.675 0 00-5.68 5.68v284c0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68V153.76h193.12v278.32c0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68v-284a5.675 5.675 0 00-5.68-5.68z" fill="#fffefe" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/><path d="M324.16 159.44h-170.4a5.675 5.675 0 00-5.68 5.68v266.96c0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68V170.8h159.04v261.28c0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68V165.12a5.675 5.675 0 00-5.68-5.68zM379.295 257.664a5.674 5.674 0 00-8.031 0l-11.36 11.36a5.674 5.674 0 000 8.032 5.664 5.664 0 004.015 1.664 5.664 5.664 0 004.016-1.664l11.36-11.36a5.674 5.674 0 000-8.032z" fill="#fffefe" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/><path d="M390.655 269.024l-11.36-11.36a5.674 5.674 0 00-8.031 0 5.674 5.674 0 000 8.032l11.36 11.36a5.664 5.664 0 004.015 1.664 5.664 5.664 0 004.016-1.664 5.674 5.674 0 000-8.032zM390.655 303.104a5.674 5.674 0 00-8.031 0l-11.36 11.36a5.674 5.674 0 000 8.032 5.664 5.664 0 004.015 1.664 5.664 5.664 0 004.016-1.664l11.36-11.36a5.674 5.674 0 000-8.032z" fill="#fffefe" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/><path d="M379.295 314.464l-11.36-11.36a5.674 5.674 0 00-8.031 0 5.674 5.674 0 000 8.032l11.36 11.36a5.664 5.664 0 004.015 1.664 5.664 5.664 0 004.016-1.664 5.674 5.674 0 000-8.032zM238.96 159.44a5.675 5.675 0 00-5.68 5.68v266.96c0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68V165.12a5.675 5.675 0 00-5.68-5.68z" fill="#fffefe" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/><path d="M352.56 426.4h-227.2c-3.142 0-5.68 2.539-5.68 5.68s2.538 5.68 5.68 5.68h227.2c3.14 0 5.68-2.539 5.68-5.68s-2.54-5.68-5.68-5.68zM238.96 74.24c-28.19 0-51.12 22.93-51.12 51.12 0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68c0-21.92 17.84-39.76 39.76-39.76s39.76 17.84 39.76 39.76c0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68c0-28.19-22.93-51.12-51.12-51.12z" fill="#fffefe" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/><path d="M284.4 119.68h-90.88c-3.142 0-5.68 2.539-5.68 5.68s2.538 5.68 5.68 5.68h90.88c3.14 0 5.68-2.539 5.68-5.68s-2.54-5.68-5.68-5.68z" fill="#fffefe" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/><path d="M238.96 96.96a5.675 5.675 0 00-5.68 5.68v22.72c0 3.141 2.538 5.68 5.68 5.68s5.68-2.539 5.68-5.68v-22.72a5.675 5.675 0 00-5.68-5.68z" fill="#fffefe" data-original="#000000" xmlns="http://www.w3.org/2000/svg"/></svg>'):"3"===mode?(options.floorplan.name="WIFI",uid="1_3",svg='<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 493.746 493.746"><rect width="493.746" height="493.746" rx="20" ry="20" fill="#5b616b"/><g xmlns="http://www.w3.org/2000/svg"><path d="M219.394 334.911c-15.173 15.175-15.173 39.79 0 54.965 15.18 15.172 39.792 15.172 54.972 0 15.172-15.175 15.172-39.79 0-54.965-15.18-15.175-39.791-15.175-54.972 0zM246.88 242.481c-32.021 0-62.146 12.473-84.777 35.126-8.89 8.886-8.89 23.29 0 32.17 8.884 8.886 23.28 8.886 32.17 0 14.038-14.057 32.726-21.795 52.607-21.795s38.57 7.738 52.607 21.795a22.721 22.721 0 0016.09 6.664 22.64 22.64 0 0016.08-6.664c8.891-8.88 8.891-23.283 0-32.17-22.63-22.653-52.755-35.126-84.777-35.126z" fill="#fff" data-original="#000000"/><path d="M246.88 167.57c-52.042 0-100.967 20.267-137.759 57.064-8.883 8.886-8.883 23.291 0 32.17 8.89 8.887 23.294 8.887 32.17 0 28.198-28.206 65.703-43.737 105.588-43.737 39.87 0 77.375 15.53 105.574 43.737a22.69 22.69 0 0016.082 6.666 22.654 22.654 0 0016.088-6.666c8.884-8.879 8.884-23.284 0-32.17-36.792-36.797-85.7-57.065-137.743-57.065z" fill="#fff" data-original="#000000"/><path d="M437.723 171.551c-50.968-50.986-118.74-79.06-190.843-79.06s-139.874 28.074-190.843 79.06c-8.883 8.888-8.883 23.292 0 32.172a22.694 22.694 0 0016.089 6.663c5.82 0 11.656-2.22 16.081-6.663 42.376-42.392 98.736-65.733 158.673-65.733 59.939 0 116.281 23.341 158.659 65.733 8.881 8.886 23.278 8.878 32.17.008 8.882-8.888 8.882-23.292.014-32.18z" fill="#fff" data-original="#000000"/></g></svg>'):"4"===mode&&(options.floorplan.name="FIRE EXTINGUISHER",uid="1_4",svg='<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 128 128"><rect width="128" height="128" rx="20" ry="20" fill="#5b616b"/><path xmlns="http://www.w3.org/2000/svg" d="M100.3 20.313A4.317 4.317 0 0095.985 16H71.91a8.827 8.827 0 00-8.502 6.518h-2.94A28.345 28.345 0 0032.155 50.83v23.312a4.546 4.546 0 00-2.617 5.92l1.88 4.769-3.703 25.669a1.312 1.312 0 001.3 1.5H43.92a1.312 1.312 0 001.3-1.5l-3.703-25.67 1.88-4.769a4.545 4.545 0 00-2.617-5.919V50.83a19.71 19.71 0 0119.688-19.687h2.625v4.5a27.118 27.118 0 00-12.2 22.532v49.513A4.317 4.317 0 0055.206 112h33.41a4.317 4.317 0 004.312-4.312V58.175a26.458 26.459 0 00-.269-3.712 1.322 1.322 0 00-.023-.145A27.15 27.15 0 0080.73 35.643v-5.722l5.526 3.191a7.318 7.318 0 009.989-2.677 1.312 1.313 0 00-.48-1.794l-6.956-4.016h7.176a4.317 4.317 0 004.315-4.312zm-2.625 0A1.69 1.69 0 0195.985 22H80.26a8.836 8.836 0 00-2.08-3.375h17.806a1.69 1.69 0 011.69 1.688zm-25.764-1.688a6.2 6.2 0 016.194 6.194v10.215H65.718V24.819c0-.15.012-.3.023-.45a8.04 8.04 0 01.038-.366v-.008a6.199 6.199 0 016.132-5.37zm-41.381 90.75l3.375-23.389h5.127l3.375 23.389zm10.425-30.276l-1.682 4.262h-5.612L31.98 79.1a1.922 1.922 0 011.788-2.625h5.4a1.922 1.922 0 011.787 2.625zm19.513-50.581A22.337 22.337 0 0038.155 50.83v23.016H34.78V50.83a25.716 25.716 0 0125.688-25.687h2.625v3.375zM90.303 98.69H53.518V94.47h36.785zm-1.687 10.685h-33.41a1.69 1.69 0 01-1.688-1.687v-6.375h36.785v6.375a1.69 1.69 0 01-1.687 1.687zm1.687-51.2v22.7H79.317V55.94h10.87c.07.74.116 1.485.116 2.235zm-.507-4.86H78.005a1.312 1.312 0 00-1.313 1.312V82.19a1.312 1.312 0 001.313 1.31h12.3v8.344H53.518v-33.67A24.481 24.482 0 0164.782 37.66h14.259A24.505 24.505 0 0189.8 53.315zm3.357-23.151a4.694 4.694 0 01-5.585.675L80.73 26.89v-2.07c0-.065-.01-.13-.01-.194h2.84z" fill="#fff" data-original="#000000"/></svg>'),fabric.fabric.loadSVGFromString(svg,(function(objects){var groupedObject=fabric.fabric.util.groupSVGElements(objects),extendedOptions=fabric.fabric.util.object.extend(options);groupedObject.set(extendedOptions),canvas.add(groupedObject)})),this.canvas.requestRenderAll()},addPointer:function(){var fgraphic=(0,objectSpread2/* default */.Z)({enableButtonBinding:!0,formatText:"",blink:!1,hide:!1,animateEffect:"none",id:(0,Common/* getUniqueId */.Ki)(),employeeId:null,styles:{fill:"",fontFamily:"Aktiv-Grotesk",textAlign:"",lineHeight:null,charSpacing:null,fontWeight:"",fontStyle:"",fontColor:"#FFFFFF",backgroundColor:"#C95DB4",padding:20,radius:5},hoverCursor:"pointer",objectType:"pointer_group",type:"pointer_group"},this.getlayerInfo()),bg=new fabric.fabric.Circle({fill:"#000",originX:"center",originY:"center",radius:6,opacity:1,floorplan:(0,objectSpread2/* default */.Z)({objectType:"pointer_bg_circle",type:"pointer_bg_circle",id:(0,Common/* getUniqueId */.Ki)()},this.getlayerInfo())}),center=new fabric.fabric.Circle({fill:"#fff",originX:"center",originY:"center",radius:2,opacity:1,floorplan:(0,objectSpread2/* default */.Z)({objectType:"pointer_center_circle",type:"pointer_center_circle",id:(0,Common/* getUniqueId */.Ki)()},this.getlayerInfo())}),activeT=new fabric.fabric.Circle({fill:"transparent",originX:"center",originY:"center",radius:8,opacity:1,floorplan:(0,objectSpread2/* default */.Z)({objectType:"pointer_activeT_circle",type:"pointer_activeT_circle",id:(0,Common/* getUniqueId */.Ki)()},this.getlayerInfo())}),active=new fabric.fabric.Circle({fill:"transparent",originX:"center",originY:"center",radius:10,opacity:1,floorplan:(0,objectSpread2/* default */.Z)({objectType:"pointer_active_circle",type:"pointer_active_circle",id:(0,Common/* getUniqueId */.Ki)()},this.getlayerInfo())}),group=new fabric.fabric.Group([active,activeT,bg,center],{left:50,top:100,hoverCursor:"pointer"});group.set({floorplan:fgraphic}),this.canvas.add(group),this.setObjectActions(group),this.setUpObjectEvents(group)},addButton:function(){var fgraphic=(0,objectSpread2/* default */.Z)({enableButtonBinding:!0,formatText:"Button",blink:!1,hide:!1,animateEffect:"none",id:(0,Common/* getUniqueId */.Ki)(),styles:{fill:"",fontFamily:"Aktiv-Grotesk",textAlign:"",lineHeight:null,charSpacing:null,fontWeight:"",fontStyle:"",fontColor:"#FFFFFF",backgroundColor:"#C95DB4",padding:20,radius:5},objectType:"button_group",type:"button_group"},this.getlayerInfo()),text=new fabric.fabric.Text("Button",{fontSize:15,originX:"center",originY:"center",fill:fgraphic.styles.fontColor,floorplan:(0,objectSpread2/* default */.Z)({objectType:"button_text",type:"button",id:(0,Common/* getUniqueId */.Ki)()},this.getlayerInfo())}),textWidth=text.get("width"),textHeight=text.get("height"),bg=new fabric.fabric.Rect({fill:fgraphic.styles.backgroundColor,scaleY:.5,originX:"center",originY:"center",rx:fgraphic.styles.radius,ry:fgraphic.styles.radius,width:textWidth+2*fgraphic.styles.padding,height:textHeight+2*fgraphic.styles.padding,floorplan:(0,objectSpread2/* default */.Z)({objectType:"button_rect",type:"button_rect",id:(0,Common/* getUniqueId */.Ki)()},this.getlayerInfo())}),group=new fabric.fabric.Group([bg,text],{left:50,top:100});group.set({floorplan:fgraphic}),this.canvas.add(group),this.setObjectActions(group),this.setUpObjectEvents(group)},setObjectActions:function(object){var _this=this;if(object&&object.floorplan){this.controlPoints=[],this.controlGroups=[];var showTrend=!0,controlAction=!1,controlActionList=[{type:"control_point",actionName:null,assetId:null,assetCategoryId:null,fieldId:null,pointId:null,groupId:null}],hyperLink=!1,hyperLinkList=[{actionName:null,linkType:null,assetId:null,id:null,url:null,target:"_blank"}];object.floorplan.actions&&(showTrend=!!object.floorplan.actions.showTrend.enable,object.floorplan.actions.controlAction.enable?(controlAction=!0,object.floorplan.actions.controlAction.control_list&&(controlActionList=object.floorplan.actions.controlAction.control_list)):controlAction=!1,object.floorplan.actions.hyperLink.enable?(hyperLink=!0,object.floorplan.actions.hyperLink.link_list&&(hyperLinkList=object.floorplan.actions.hyperLink.link_list,hyperLinkList.forEach((function(rt){rt.hasOwnProperty("assetId")||_this.$set(rt,"assetId",null)})))):hyperLink=!1),this.objectActions={showTrend:{enable:showTrend},controlAction:{enable:controlAction,control_list:controlActionList},hyperLink:{enable:hyperLink,link_list:hyperLinkList},invokeFunction:{enable:!1,function_list:[]}}}},generatePolygon:function(polygonOptions,canvas){var _step,points=new Array,layer=this.layer,sublayer=this.sublayer,layerInfo={layer:layer,sublayer:sublayer},_iterator=(0,createForOfIteratorHelper/* default */.Z)(polygonOptions.pointArray);try{for(_iterator.s();!(_step=_iterator.n()).done;){var point=_step.value;points.push({x:point.left,y:point.top}),canvas.remove(point)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(polygonOptions.lineArray);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var line=_step2.value;canvas.remove(line)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}canvas.remove(polygonOptions.activeShape).remove(polygonOptions.activeLine);var elementArray=[],polygon=new fabric.fabric.Polygon(points,{stroke:"#333333",strokeWidth:.8,fill:"#b0b0b0",opacity:.5,perPixelTargetFind:!0,floorplan:(0,objectSpread2/* default */.Z)({objectType:"space_poly",type:"polygon",id:(0,Common/* getUniqueId */.Ki)()},layerInfo)});elementArray.push(polygon);var center=polygon._findCenterFromElement(),textEl=new fabric.fabric.Text("",(0,objectSpread2/* default */.Z)({left:center.x,top:center.y,originX:"center",originY:"center",fontFamily:'"Aktiv-Grotesk", Helvetica, Arial, sans-serif',fill:"#25243e",setStroke:"#fff",fontSize:"15",perPixelTargetFind:!0,floorplan:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},layerInfo),{},{id:(0,Common/* getUniqueId */.Ki)(),type:"text",objectType:"space_zone_label"})},Common/* commonObjProps */.Lp));elementArray.push(textEl);var group=new fabric.fabric.Group(elementArray,(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({lockMovementX:!0,lockMovementY:!0,hoverCursor:"pointer",opacity:.6,perPixelTargetFind:!0},Common/* commonObjProps */.Lp),{},{floorplan:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({spaceId:null,enableSpaceMapping:!0,styles:{}},layerInfo),{},{id:(0,Common/* getUniqueId */.Ki)(),objectType:"space_zone",type:"space_zone_group",fill:"#ff0000",actions:{}})}));canvas.add(group),this.setUpObjectEvents(group),polygonOptions.activeLine=null,polygonOptions.activeShape=null,polygonOptions.polygonMode=!1,canvas.forEachObject((function(object){object.set("selectable",!0)})),canvas.selection=!0},getShape:function(shape,callback){var layer=this.layer,sublayer=this.sublayer,layerInfo={layer:layer,sublayer:sublayer},options={floorplan:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({uid:shape.uid,type:"marker",objectType:"control",markerType:shape._name||null,blink:!1,hide:!1,animateEffect:"none",id:(0,Common/* getUniqueId */.Ki)()},layerInfo),{},{spaceId:null}),hoverCursor:"pointer"},shapeSvg=shape.template.svg,floorplan=options.floorplan;shape.states&&(floorplan.enableStateBinding=!0,floorplan.stateBindingVariable=null),shape.animate&&(floorplan.enableAnimateBinding=!0,floorplan.animateBindingVariable=null,floorplan.animate=shape.animate);var rectOption=shape.rectOption,svgObject=null,rect=new fabric.fabric.Rect((0,objectSpread2/* default */.Z)({width:40,height:40,left:0,top:0,strokeWidth:1},rectOption)),textOption=shape.textOption,textEl=new fabric.fabric.Text("",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({formatText:"${"+CURRENT_MARKER_FIELD_PREFIX["LABEL"]+"}",floorplan:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},layerInfo),{},{id:(0,Common/* getUniqueId */.Ki)(),type:"text",objectType:"marker_label"})},textOption),Common/* commonObjProps */.Lp)),aditionalOptions={left:0,top:0};fabric.fabric.loadSVGFromString(shapeSvg,(function(objects){svgObject=fabric.fabric.util.groupSVGElements(objects);var extendedOptions=fabric.fabric.util.object.extend(shape.options,options,aditionalOptions);svgObject.set(extendedOptions)}));var groupedObject=new fabric.fabric.Group([rect,svgObject,textEl]),groupedOtions=fabric.fabric.util.object.extend(shape.options,options);groupedObject.set(groupedOtions),callback(groupedObject)}}},mixins_DrawElementsMixinvue_type_script_lang_js=DrawElementsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_DrawElementsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DrawElementsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
},
/***/826913:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanDataMixin}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(339772),__webpack_require__(879288),__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(819979);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js
var render,staticRenderFns,validation=__webpack_require__(990260),baseUrl=__webpack_require__(420499),FloorPlanDataMixinvue_type_script_lang_js={data:function(){return{floorPlan:{},leagend:{},isNew:!1,controlCategoryList:[],spaceControllableCategoriesMap:[],spaceControlCategory:[],floor:null,floorPlanId:null,spaces:[],flooplans:[],spaceList:[],pubSubWatcherKey:null,employeeList:[],employeeFields:[]}},computed:{devloper:function(){return!(!this.$route.query||!this.$route.query.devloper)}},methods:{fetchEmployeeDetails:function(){var _this=this;if("employee"===this.viewMode){var url="v2/module/data/list?moduleName=custom_deskmanager&page=1&perPage=500&viewName=all";this.$http.get(url).then((function(response){response.data&&response.data.result&&response.data.result.moduleDatas&&(_this.employeeList=response.data.result.moduleDatas)})),this.getFields()}},getFields:function(){var _this2=this,moduleName="custom_deskmanager",url="/v2/filter/advanced/fields/".concat(moduleName);this.$http.get(url).then((function(response){response.data&&response.data.result&&response.data.result.fields&&(_this2.employeeFields=response.data.result.fields)}))},subscribeToLiveData:function(){(0,validation/* isEmpty */.xb)(this.pubSubWatcherKey)||this.unSubscribeToLiveData();var params=this.getSubscriptionParams();(0,validation/* isEmpty */.xb)(params)||(this.pubSubWatcherKey=this.subscribe("readingChange",params,this.loadfloorPlanData()))},unSubscribeToLiveData:function(){this.pubSubWatcherKey&&this.unsubscribe(this.pubSubWatcherKey,"readingChange",this.getSubscriptionParams()),this.pubSubWatcherKey=null},getSubscriptionParams:function(){return{readings:this.subcriptiondata||[]}},loadfloorPlanData:function(){var _this3=this;Promise.all([this.fetchFloorDetails(),this.fetchFloorSpaces(),this.getFloorControlCategory(),this.loadFloorSpaces()]).then((function(){_this3.fetchFloorPlan().then((function(){_this3.setMarkerValue()}))}))},setLeagend:function(){var floorPlan=this.floorPlan;if(!(0,validation/* isEmpty */.xb)(floorPlan)&&floorPlan.leagend){var leagend=JSON.parse(floorPlan.leagend);this.$set(this,"leagend",leagend)}},setFloorPlanData:function(floorPlan){this.$set(this,"floorPlan",this.formatImgUrl(floorPlan))},formatImgUrl:function(floorPlan){if(floorPlan&&floorPlan.canvas){var canvas=JSON.parse(floorPlan.canvas),imageIndex=canvas.objects.findIndex((function(rt){return"image"===rt.type})),obj=canvas.objects[imageIndex],url=obj.src;if(obj&&url){var d=url.split("/"),fileId=d[d.length-1]?Number(d[d.length-1]):null;if(fileId){var newUrl="".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(fileId,"?fetchOriginal=true");this.$set(canvas.objects[imageIndex],"src",newUrl),this.$set(floorPlan,"canvas",JSON.stringify(canvas))}}}return floorPlan},addFloorPlan:function(floorPlan){var _this4=this;return this.$http.post("/v2/floorPlan/add",{floorPlan:floorPlan}).then((function(_ref){var data=_ref.data;0===data.responseCode&&_this4.setFloorPlanData(data.result.floorPlan)}))},fetchFloorDetails:function(){var _this5=this;if(this.floorId)return this.$http.get("/v2/pages/floor?id=".concat(this.floorId)).then((function(_ref2){var data=_ref2.data;0===data.responseCode&&(_this5.$set(_this5,"floor",data.result.record),_this5.floorplanId?_this5.$set(_this5,"floorPlanId",_this5.floorplanId):_this5.$set(_this5,"floorPlanId",data.result.record.defaultFloorPlanId))}))},fetchViewMode:function(floorPlanId){var _this6=this,viewMode={viewMode:this.viewMode,floorPlanId:floorPlanId,scriptModeInt:1};this.$http.post("/v2/floorPlan/viewFloorPlanMode",{floorPlanViewMode:viewMode}).then((function(_ref3){var data=_ref3.data;0===data.responseCode&&(data.result.data,_this6.$emit("floorModeData",data.result.data))}))},fetchFloorPlan:function(_fetchFloorPlan){var _this7=this;return _fetchFloorPlan>0||this.floorPlanId>0?(this.$emit("floorplanId",_fetchFloorPlan||this.floorPlanId),this.floorPlanId&&this.viewMode&&this.loadViewMode&&this.fetchViewMode(this.floorPlanId),this.$http.post("/v2/floorPlan/get",{floorPlan:{id:_fetchFloorPlan||this.floorPlanId}}).then((function(_ref4){var data=_ref4.data;0===data.responseCode&&(_this7.setFloorPlanData(data.result.floorPlan),_this7.setLeagend(data.result.floorPlan))}))):void this.$emit("floorplanId",-1)},fetchFloorSpaces:function(){var _this8=this;return this.$http.get("/v2/floorPlan/spaces?floorId=".concat(this.floorId)).then((function(_ref5){var data=_ref5.data;0===data.responseCode&&_this8.$set(_this8,"spaces",data.result.spaces)}))},fetchListOfFloorPlans:function(){var _this9=this,floorPlan={floorId:this.floorId};this.$http.post("/v2/floorPlan/getListOfFloorPlan",{floorPlan:floorPlan}).then((function(_ref6){var data=_ref6.data;0===data.responseCode&&(_this9.flooplans=data.result.floorPlans)}))},updateFloorPlan:function(){var _this10=this;return this.floorPlan.canvas=JSON.stringify(this.canvas.toJSON(["floorplan"])),this.floorPlan.leagend=JSON.stringify(this.leagend),this.floorPlan.floorPlanId=this.floorPlan.id,this.$http.post("/v2/floorPlan/update",{floorPlan:this.floorPlan}).then((function(_ref7){var data=_ref7.data;0===data.responseCode&&_this10.setFloorPlanData(data.result.floorPlan)}))},getAllCategoryEnum:function(){var _this11=this;return this.$http.get("/v2/controlAction/getControllableCategoryList").then((function(_ref8){var data=_ref8.data;0===data.responseCode&&(_this11.controlCategoryList=data.result.controllableCategories)}))},getFloorControlCategory:function(){var _this12=this;return this.$http.get("/v2/controlAction/getControllableCategories?floorId=".concat(this.floorId)).then((function(_ref9){var data=_ref9.data;0===data.responseCode&&data.result&&(_this12.spaceControllableCategoriesMap=data.result.spaceControllableCategoriesMap)}))},getspaceControlCategory:function(spaceId){var _this13=this;return this.$http.get("/v2/controlAction/getControllableCategories?spaceId=".concat(spaceId)).then((function(_ref10){var data=_ref10.data;0===data.responseCode&&(_this13.spaceControlCategory=data.result.controllableCategories)}))},loadFloorSpaces:function(categoryId){var _this14=this;this.floorId&&this.$util.loadSpacesContext(4,null,[
// {
//   key: 'spaceCategory',
//   operator: 'is',
//   value: categoryId,
// },
{key:"floor",operator:"is",value:this.floorId}]).then((function(response){_this14.spaceList=response.records}))}}},mixins_FloorPlanDataMixinvue_type_script_lang_js=FloorPlanDataMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_FloorPlanDataMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanDataMixin=component.exports},
/***/557883:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanVariableMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/typeof.js
var render,staticRenderFns,esm_typeof=__webpack_require__(103336),createForOfIteratorHelper=__webpack_require__(566347),CURRENT_ASSET_FIELD_PREFIX=(__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(54278),function(key){return"currentAsset."+key}),CURRENT_ASSET_READING_PREFIX=function(key){return"currentAsset.reading."+key},FloorPlanVariableMixinvue_type_script_lang_js={data:function(){return{objectActions:{showTrend:{enable:!0},controlAction:{enable:!1,control_list:[{actionName:null,assetId:null,assetCategoryId:null,fieldId:null}]},hyperLink:{enable:!1,link_list:[{actionName:null,linkType:null,id:null,assetId:null,url:null,target:"_blank"}]},invokeFunction:{enable:!1,function_list:[]}},currentAsset:{id:null,record:null,fields:null,readings:null}}},methods:{loadVariables:function(){this.leagend&&this.leagend.assetId&&(this.variables=[],this.loadAsset(this.leagend.assetId))},loadAsset:function(assetId){var _this=this;assetId&&(this.variablesLoaded=!1,
// this.loadSystemVariables()
this.currentAsset.fields&&this.currentAsset.fields.length?this.loadAssetSummary(assetId):this.$util.loadFields("asset").then((function(fields){_this.currentAsset.fields=fields,_this.loadAssetSummary(assetId)})))},loadAssetSummary:function(assetId){var _this2=this;this.$http.get("/asset/summary/"+assetId).then((function(response){_this2.currentAsset.record=response.data.asset,_this2.currentAsset.id=response.data.asset.id,_this2.$emit("assetLoaded",response.data.asset),_this2.loadAssetFieldVarialbes(),_this2.$util.loadAssetReadingFields(-1,response.data.asset.category.id).then((function(fields){_this2.currentAsset.readings=fields,_this2.loadAssetReadingVariables(),_this2.updateValueProps(),_this2.loadUsedVariables(),_this2.updateVariable()}))}))},loadAssetReadingVariables:function(){var _this$variables,_this3=this,variables=[];if(this.currentAsset.fields&&this.currentAsset.fields){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.currentAsset.fields);try{for(_iterator.s();!(_step=_iterator.n()).done;){var field=_step.value;variables.push({fetchType:"field",module:field.module.name,id:this.currentAsset.record.id,parentId:this.currentAsset.record.id,select:field.name,key:CURRENT_ASSET_FIELD_PREFIX(field.name),dataType:field.dataTypeEnum._name,label:field.displayName,type:"field"})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}if(this.currentAsset.readings&&this.currentAsset.readings){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.currentAsset.readings);try{var _loop=function(){var reading=_step2.value;if(210===_this3.$org.id&&1145442===_this3.currentAsset.record.id&&variables.push({fetchType:"liveValue",module:reading.module.name,select:reading.name,parentId:_this3.currentAsset.record.id,key:CURRENT_ASSET_READING_PREFIX(reading.module.name+"_"+reading.name),dataType:reading.dataTypeEnum._name,label:reading.displayName,unit:reading.unit,type:"reading"}),variables.find((function(v){return v.key===CURRENT_ASSET_READING_PREFIX(reading.name)}))&&!1===reading.default)return 1;// continue
variables.push({fetchType:"liveValue",module:reading.module.name,select:reading.name,parentId:_this3.currentAsset.record.id,key:CURRENT_ASSET_READING_PREFIX(reading.name),dataType:reading.dataTypeEnum._name,label:reading.displayName,unit:reading.unit,type:"reading"})};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}(_this$variables=this.variables).push.apply(_this$variables,variables);var _step3,readings=[],_iterator3=(0,createForOfIteratorHelper/* default */.Z)(this.variables.filter((function(v){return"liveValue"===v.fetchType})));try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var varObj=_step3.value;readings.push({parentId:varObj.parentId+"",fieldName:varObj.select,moduleName:varObj.module})}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}},loadAssetFieldVarialbes:function(){var _this$variables2,variables=[];if(this.currentAsset.fields&&this.currentAsset.fields){var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(this.currentAsset.fields);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var field=_step4.value;this.currentAsset.record[field.name]?"object"===(0,esm_typeof/* default */.Z)(this.currentAsset.record[field.name])?this.liveValues[CURRENT_ASSET_FIELD_PREFIX(field.name)]={value:this.currentAsset.record[field.name].displayName?this.currentAsset.record[field.name].displayName:this.currentAsset.record[field.name].name}:this.liveValues[CURRENT_ASSET_FIELD_PREFIX(field.name)]={value:this.currentAsset.record[field.name]}:this.liveValues[CURRENT_ASSET_FIELD_PREFIX(field.name)]={value:null}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}(_this$variables2=this.variables).push.apply(_this$variables2,variables)}}},mixins_FloorPlanVariableMixinvue_type_script_lang_js=FloorPlanVariableMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_FloorPlanVariableMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanVariableMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js
}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/6497.js.map