"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[5113],{
/***/850504:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return VisitorAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/VisitorAvatar.vue?vue&type=template&id=159e524a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.recordData?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl||_vm.defaultIcon?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl?_vm.$prependBaseUrl(_vm.avatarUrl):_vm.defaultIcon}}):_vm._e()]),_vm.showName?[_c("div",{staticClass:"textoverflow-ellipsis width110px pL8"},[_vm._v(" "+_vm._s(_vm.getDisplayName())+" ")])]:_vm._e()],2)]):_vm._e()},staticRenderFns=[],VisitorAvatarvue_type_script_lang_js=(__webpack_require__(434284),__webpack_require__(976801),{props:["size","recordData","name","hovercard","module"],data:function(){return{avatarUrl:null,defaultIcon:null,sizeClass:"fc-avatar-"+this.size,showName:!!this.name}},watch:{recordData:{handler:function(){this.loadAvatarUrl()},immediate:!0}},methods:{loadAvatarUrl:function(){var _ref=this.recordData||{},avatarUrl=_ref.avatarUrl;avatarUrl?this.avatarUrl=avatarUrl:this.recordData&&(["visitor","visitorlog","invitevisitor"].includes(this.module)?this.defaultIcon=__webpack_require__(128951):this.defaultIcon=__webpack_require__(73188))},getDisplayName:function(){var _ref2=this.recordData||{},visitorName=_ref2.visitorName,name=_ref2.name;return"visitorlog"===this.module?visitorName||"---":name||"---"}}}),avatar_VisitorAvatarvue_type_script_lang_js=VisitorAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_VisitorAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"159e524a",null)
/* harmony default export */,VisitorAvatar=component.exports},
/***/255885:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return VisitorForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/visitors/visitor/VisitorForm.vue?vue&type=template&id=78577136
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,"before-close":_vm.closeDialog,"append-to-body":!0,fullscreen:!0,"custom-class":"fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog fc-web-form-dialog f-webform-right-dialog"},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"fc-pm-main-content-H"},[_vm._v(_vm._s(_vm.formDisplayName))]),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.formDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isV3Api:_vm.isV3Api,moduleDataId:_vm.moduleDataId,isEdit:!_vm.$validation.isEmpty(_vm.moduleDataId)},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.saveRecord,cancel:_vm.closeDialog}})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),FWebform=__webpack_require__(434500),FormCreation=__webpack_require__(373729),validation=__webpack_require__(990260),api=__webpack_require__(32284),VisitorFormvue_type_script_lang_js={extends:FormCreation/* default */.Z,components:{FWebform:FWebform/* default */.Z},props:["visibility","editId","moduleName"],data:function(){return{isSaving:!1}},computed:{formDisplayName:function(){return(this.formObj||{}).displayName},moduleDisplayName:function(){return this.formObj&&this.formObj.module?this.formObj.module.displayName:""},moduleDataId:function(){return this.editId},moduleKey:function(){return"visitors"},isV3Api:function(){return!0}},methods:{saveRecord:function(formModel){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var formObj,moduleName,moduleDataId,isRevised,formId,response,data,requestObj,_response,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(formObj=_this.formObj,moduleName=_this.moduleName,moduleDataId=_this.moduleDataId,isRevised=_this.isRevised,formId=formModel.formId,response={},data=_this.serializedData(formObj,formModel),(0,validation/* isEmpty */.xb)(formId)||(data.formId=formId),(0,validation/* isEmpty */.xb)(moduleDataId)||(data.id=moduleDataId),_this.isSaving=!0,!(0,validation/* isEmpty */.xb)(moduleDataId)&&!isRevised){_context.next=15;break}return requestObj={data:data},isRevised&&(requestObj.data=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},data),{},{isPublished:!0}),requestObj.params={revise:!0}),_context.next=12,api/* API */.bl.createRecord(moduleName,requestObj);case 12:response=_context.sent,_context.next=18;break;case 15:return _context.next=17,api/* API */.bl.updateRecord(moduleName,{id:moduleDataId,data:data});case 17:response=_context.sent;case 18:_this.isSaving=!1,
// Hook to handle notification after crud operation
_this.notificationHandler(response),_response=response,error=_response.error,error||(_this.$emit("saved"),_this.closeDialog());case 22:case"end":return _context.stop()}}),_callee)})))()},closeDialog:function(){this.$emit("update:visibility",!1)}}},visitor_VisitorFormvue_type_script_lang_js=VisitorFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(visitor_VisitorFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,VisitorForm=component.exports},
/***/905113:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return VisitorList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/visitors/visitor/VisitorList.vue?vue&type=template&id=2d6c4d7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("CommonListLayout",{key:_vm.moduleName+"-list-layout",staticClass:"custom-module-list-layout",attrs:{moduleName:_vm.moduleName,showViewRearrange:!0,showViewEdit:!0,visibleViewCount:3,getPageTitle:function(){return _vm.moduleDisplayName},pathPrefix:_vm.parentPath,hideSubHeader:_vm.canHideSubHeader,recordCount:_vm.recordCount,recordLoading:_vm.showLoading},scopedSlots:_vm._u([{key:"header",fn:function(){return[_vm.isEmpty(_vm.viewname)?_vm._e():[_vm.canHideFilter?_vm._e():_c("AdvancedSearchWrapper",{attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName}})],_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_TOP,staticClass:"custom-button",attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_TOP,modelDataClass:_vm.modelDataClass},on:{onSuccess:_vm.onCustomButtonSuccess,onError:function(){}}}),_vm.hasPermission("CREATE")?[_c("button",{staticClass:"fc-create-btn",on:{click:function($event){return _vm.openNewForm()}}},[_vm._v(" "+_vm._s(_vm.createBtnText)+" ")])]:_vm._e()]},proxy:!0},{key:"sub-header-actions",fn:function(){return[!_vm.isEmpty(_vm.records)&&_vm.showListView?[_c("pagination",{staticClass:" fc-black-small-txt-12 ",attrs:{total:_vm.recordCount,currentPageCount:_vm.currentPageCount,perPage:_vm.perPage}}),_vm.recordCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.sort"),"open-delay":500,placement:"top",tabindex:-1}},[_c("Sort",{key:_vm.moduleName+"-sort",attrs:{moduleName:_vm.moduleName},on:{onSortChange:_vm.updateSort}})],1),_vm.hasPermission("EXPORT")?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_vm.hasPermission("EXPORT")?_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.export"),"open-delay":500,placement:"top",tabindex:-1}},[_c("f-export-settings",{attrs:{module:_vm.moduleName,viewDetail:_vm.viewDetail,showViewScheduler:!1,showMail:!1,filters:_vm.filters}})],1):_vm._e()]:_vm._e()]},proxy:!0},{key:"content",fn:function(){return[_vm.showLoading?_c("Spinner",{staticClass:"mT40",attrs:{show:_vm.showLoading}}):_vm.isEmpty(_vm.viewname)?_c("div",{staticClass:"cm-view-empty-state-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"mB20 label-txt-black f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.no_view_config"))+" ")]),_c("el-button",{staticClass:"add-view-btn",attrs:{type:"primary"},on:{click:_vm.openNewForm}},[_c("span",{staticClass:"btn-label"},[_vm._v(_vm._s(_vm.$t("viewsmanager.list.add_view")))])])],1):_vm.isEmpty(_vm.records)?_c("div",{staticClass:"cm-empty-state-container"},[_c("img",{staticClass:"mT20 self-center",attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10 label-txt-black f14 self-center"},[_vm._v(" "+_vm._s(_vm.emptyStateText)+" ")])]):[_c("div",{staticClass:"cm-list-container"},[_c("div",{staticClass:"column-customization-icon",attrs:{disabled:!_vm.isColumnCustomizable},on:{click:_vm.toShowColumnSettings}},[_c("el-tooltip",{attrs:{disabled:_vm.isColumnCustomizable,placement:"top",content:_vm.$t("common._common.you_dont_have_permission")}},[_c("inline-svg",{staticClass:"text-center position-absolute icon",attrs:{src:"column-setting"}})],1)],1),_vm.isEmpty(_vm.selectedListItemsIds)?_vm._e():_c("div",{staticClass:"pull-left table-header-actions"},[_vm.hasPermission("DELETE")?_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary pointer",on:{click:function($event){return _vm.deleteRecords(_vm.selectedListItemsIds)}}},[_vm._v(" "+_vm._s(_vm.$t("custommodules.list.delete"))+" ")])]):_vm._e(),_c("CustomButton",{key:_vm.moduleName+"_"+_vm.viewname+"_"+_vm.POSITION.LIST_BAR,staticClass:"custom-button",attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.LIST_BAR,modelDataClass:_vm.modelDataClass,selectedRecords:_vm.selectedListItemsObj},on:{onSuccess:_vm.onCustomButtonSuccess,onError:function(){}}})],1),_c("CommonList",{key:"viewname-"+_vm.viewname,attrs:{viewDetail:_vm.viewDetail,records:_vm.records,moduleName:_vm.moduleName,redirectToOverview:_vm.redirectToOverview,slotList:_vm.slotList,canShowCustomButton:"true",refreshList:_vm.onCustomButtonSuccess,modelDataClass:_vm.modelDataClass},on:{"selection-change":_vm.selectItems},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+record[_vm.slotList[0].name]))])])]}},{key:_vm.slotList[1].criteria,fn:function(ref){var record=ref.record;return[_c("router-link",{staticClass:"d-flex fw5 label-txt-black ellipsis main-field-column",attrs:{to:_vm.redirectToOverview(record.id)}},[record[_vm.photoFieldName]>0?_c("div",[_c("img",{staticClass:"img-container",attrs:{src:record.getImage(_vm.photoFieldName)}})]):_vm._e(),_c("div",{staticClass:"mR10"},[_c("VisitorAvatar",{attrs:{module:"visitor",name:!1,size:"lg",recordData:record}})],1),_c("el-tooltip",{attrs:{effect:"dark",content:record.name||"---",placement:"top-end","open-delay":600}},[_c("div",{staticClass:"self-center width200px"},[_c("span",{staticClass:"list-main-field"},[_vm._v(_vm._s(record.name||"---"))])])])],1)]}},{key:_vm.slotList[2].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"d-flex text-center"},[_vm.hasPermission("EDIT,UPDATE")&&record.canEdit()?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editModule(record)}}}):_vm._e(),_vm.hasPermission("DELETE")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecords([record.id])}}}):_vm._e()])]}}],null,!0)})],1)],_c("ColumnCustomization",{attrs:{visible:_vm.showColumnSettings,moduleName:_vm.moduleName,viewName:_vm.viewname},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}}),_vm.formVisibility?_c("VisitorForm",{attrs:{visibility:_vm.formVisibility,editId:_vm.editId,moduleName:_vm.moduleName},on:{"update:visibility":function($event){_vm.formVisibility=$event},saved:function($event){return _vm.refreshList()}}}):_vm._e()]},proxy:!0}])},[_c("portal",{attrs:{to:"view-manager-link"}},[_c("div",{staticClass:"view-manager-btn",on:{click:_vm.getViewManagerRoute}},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}}),_c("span",{staticClass:"label mL10 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.views_manager"))+" ")])],1)])],1)},staticRenderFns=[],CommonModuleList=(__webpack_require__(434284),__webpack_require__(347446)),VisitorForm=__webpack_require__(255885),VisitorAvatar=__webpack_require__(850504),router=__webpack_require__(329435),VisitorListvue_type_script_lang_js={props:["viewname"],extends:CommonModuleList["default"],components:{VisitorForm:VisitorForm/* default */.Z,VisitorAvatar:VisitorAvatar/* default */.Z},computed:{parentPath:function(){return"/app/vi/visitor"}},data:function(){return{formVisibility:!1,editId:null}},methods:{refreshList:function(){this.refreshRecordDetails(!0)},openNewForm:function(){this.editId=null,this.formVisibility=!0},editModule:function(data){this.editId=data.id,this.formVisibility=!0},redirectToOverview:function(id){var moduleName=this.moduleName,viewname=this.viewname,$route=this.$route,query=$route.query;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name,route={name:name,params:{viewname:viewname,id:id},query:query};return name&&route}return{name:"visitorsummary",params:{moduleName:moduleName,viewname:viewname,id:id},query:query}}}},visitor_VisitorListvue_type_script_lang_js=VisitorListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(visitor_VisitorListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,VisitorList=component.exports},
/***/128951:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/user.b09a1c06.png";
/***/},
/***/73188:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/item-img.7bf6d6bd.jpg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/5113.js.map