(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[20528,7307,32686,80865,55246,53021],{
/***/546055:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return GroupInvitesPortalSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/groupInvites/GroupInvitesPortalSummary.vue?vue&type=template&id=fb0fdfba
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"d-flex flex-col flex-auto visitor-summary",staticStyle:{overflow:"hidden"}},[_vm.summaryLoading?[_c("spinner",{attrs:{show:_vm.summaryLoading}})]:[_c("div",{staticClass:"visitor-container"},[_c("div",{staticClass:"fc-dark-grey-txt18"},[_c("div",{staticClass:"row p5 pointer summary-name"},[_c("div",{staticClass:"col-1 text-left"},[_c("i",{staticClass:"el-icon-back fw6",staticStyle:{"vertical-align":"sub"},on:{click:_vm.back}})])]),_c("div",{staticClass:"summary-name pL5"},[_c("div",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.summaryData.id))]),_c("div",{staticClass:"fc-black-17 bold inline-flex"},[_vm._v(" "+_vm._s(_vm.summaryData.name)+" ")])])]),_c("div",{staticClass:"fc__layout__align inventory-overview-btn-group"},[_vm.$hasPermission("visitor:UPDATE")||_vm.$hasPermission("visitor:DELETE")?_c("el-dropdown",{on:{command:_vm.handleCommand}},[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{attrs:{src:__webpack_require__(935010),height:"18",width:"18"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.$hasPermission("visitor:UPDATE")&&_vm.summaryData.totalInvites>0?_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]):_vm._e(),_vm.$hasPermission("visitor:DELETE")?_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete")))]):_vm._e()],1)],1):_vm._e()],1)]),_vm.$validation.isEmpty(_vm.summaryData)?_vm._e():_c("div",{staticClass:"flex-auto"},[_c("div",{staticClass:"fc__asset__main__scroll"},[_c("div",{staticClass:"widget-header"},[_vm._v("Summary")]),_c("div",{staticClass:"fc__white__bg__info p0"},[_c("el-row",{staticClass:"border-bottom6 p10"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{staticClass:"p10",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Description")])]),_c("el-col",{staticClass:"p10",attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.summaryData,"description","---"))+" ")])],1)],1),_c("el-row",{staticClass:"border-bottom6 p10 "},[_c("el-col",{attrs:{span:12}},[_c("el-col",{staticClass:"p10",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Total Invites")])]),_c("el-col",{staticClass:"p10",attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.summaryData,"totalInvites","---"))+" ")])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{staticClass:"p10",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("No. of Checked-In Invites")])]),_c("el-col",{staticClass:"p10",attrs:{span:12}},[_vm._v(_vm._s(_vm.$getProperty(_vm.summaryData,"checkedInCount","---")))])],1)],1),_c("el-row",{staticClass:"border-bottom6 p10"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{staticClass:"p10",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Created By")])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black pT5"},[_vm.summaryData.sysCreatedBy?_c("user-avatar",{attrs:{size:"md",user:_vm.summaryData.sysCreatedBy}}):_c("div",[_vm._v("---")])],1)])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{staticClass:"p10",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Created Time")])]),_c("el-col",{staticClass:"p10",attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.sysCreatedTime&&-1!==_vm.summaryData.sysCreatedTime?this.$options.filters.formatDate(_vm.summaryData.sysCreatedTime):"---")+" ")])],1)],1),_c("el-row",{staticClass:"p10"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{staticClass:"p10",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Modified By")])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black pT5"},[_vm.summaryData.sysModifiedBy?_c("user-avatar",{attrs:{size:"md",user:_vm.summaryData.sysModifiedBy}}):_c("div",[_vm._v("---")])],1)])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{staticClass:"p10",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Modified Time")])]),_c("el-col",{staticClass:"p10",attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.sysModifiedTime&&-1!==_vm.summaryData.sysModifiedTime?this.$options.filters.formatDate(_vm.summaryData.sysModifiedTime):"---")+" ")])],1)],1)],1),_vm.$validation.isEmpty(_vm.customFields)?_vm._e():_c("div",{staticClass:"fc__white__bg__info__custom mT20"},[_vm._l(_vm.customFields,(function(d,index){return[index%2===0?_c("el-row",{key:index,staticClass:"border-bottom6 pB20 pT20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.customFields[index].displayName)+" ")])]),"DATE"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index].name],!0):"---"))]):"DATE_TIME"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s((_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name])>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index].name]):"---"))]):[2,3].includes(_vm.customFields[index].field.dataType)?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]&&-1!==_vm.summaryData.data[_vm.customFields[index].name]?_vm.summaryData.data[_vm.customFields[index].name]:"---"))]):"ENUM"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.customFields[index+1].field.enumMap[parseInt(_vm.summaryData.data[_vm.customFields[index+1].name])]:"---"))]):_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]?_vm.summaryData.data[_vm.customFields[index].name]:"---"))])],1),_vm.customFields.length>index+1?_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.customFields[index+1].displayName)+" ")])]),"DATE"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index+1].name],!0):"---"))]):"DATE_TIME"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s((_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name])>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index+1].name]):"---"))]):[2,3].includes(_vm.customFields[index+1].field.dataType)?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]&&-1!==_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.summaryData.data[_vm.customFields[index+1].name]:"---"))]):"ENUM"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.customFields[index+1].field.enumMap[parseInt(_vm.summaryData.data[_vm.customFields[index+1].name])]:"---"))]):_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.summaryData.data[_vm.customFields[index+1].name]:"---"))])],1):_vm._e()],1):_vm._e()]}))],2),_c("div",{staticClass:"widget-header"},[_vm._v("All Invites")]),_c("div",{staticClass:"fc__white__bg__p0"},[_c("el-table",{directives:[{name:"loading",rawName:"v-loading",value:_vm.visitsLoading,expression:"visitsLoading"}],staticClass:"m0 p15 width100 inventory-inner-table clearboth visitor-table",attrs:{height:"400",data:_vm.groupInvitesList,"empty-text":_vm.$t("home.visitor.all_invites_deleted"),"default-sort":{prop:"name",order:"descending"}}},[_c("template",{slot:"empty"},[_c("img",{staticClass:"mT50",attrs:{src:__webpack_require__(15482),width:"100",height:"100"}}),_c("div",{staticClass:"mT10 label-txt-black f14 op6"},[_vm._v(" "+_vm._s(_vm.$t("home.visitor.all_invites_deleted"))+" ")])]),_c("el-table-column",{attrs:{prop:"id",sortable:"",label:"ID"}}),_c("el-table-column",{attrs:{prop:"visitorName",sortable:"",label:"NAME"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"fw5 ellipsis width200px mL10 main-field-column",on:{click:function($event){return _vm.goToOverview(data.row.id)}}},[_vm._v(" "+_vm._s(data.row.visitorName)+" ")])]}}],null,!1,757569162)}),_c("el-table-column",{attrs:{prop:"visitorPhone",sortable:"",label:"PHONE"}}),_c("el-table-column",{attrs:{prop:"visitorEmail",label:"EMAIL"}}),_c("el-table-column",{attrs:{prop:"host.name",label:"HOST"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("user-avatar",{attrs:{size:"md",user:data.row.host}})]}}],null,!1,2789767439)}),_c("el-table-column",{attrs:{prop:"expectedCheckInTime",formatter:_vm.getDateTime,label:"EXPECTED CHECK-IN TIME"}}),_c("el-table-column",{attrs:{prop:"expectedCheckOutTime",formatter:_vm.getDateTime,label:"EXPECTED CHECK-OUT TIME"}}),_c("el-table-column",{attrs:{width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"text-center flex-middle"},[_vm.$hasPermission(_vm.moduleName+":UPDATE")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",":title":_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editSingleRecord([data.row],"invitevisitor")}}}):_vm._e(),_vm.$hasPermission(_vm.moduleName+":DELETE")&&_vm.summaryData.totalInvites>1?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecord([data.row.id],"invitevisitor")}}}):_vm._e()])]}}],null,!1,2117616163)})],2)],1)])])],_vm.visitorinvite?_c("VisitsSummary",{attrs:{id:_vm.inviteid,groupinviteInviteSummary:!0,moduleName:"invitevisitor"},on:{closeDialog:function($event){return _vm.closeDialog()}}}):_vm._e()],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),User=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(426803)),api=(__webpack_require__(480008),__webpack_require__(32284)),router=__webpack_require__(329435),VisitsSummary=__webpack_require__(489945),GroupInvitesPortalSummaryvue_type_script_lang_js={props:["id"],components:{UserAvatar:User/* default */.Z,VisitsSummary:VisitsSummary["default"]},data:function(){return{summaryLoading:!1,activeName:"first",visitsLoading:!1,groupInvitesList:null,visitsStateFlow:null,summaryData:null,editFormVisibility:!1,systemField:{},customFields:[],moduleName:"groupinvite",inviteid:null,visitorinvite:!1}},watch:{id:{handler:function(newValue){newValue&&this.loadSummary()},immediate:!0}},methods:{loadSummary:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var id,_yield$API$fetchRecor,groupinvite,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return id=_this.id,_this.summaryLoading=!0,_context.next=4,api/* API */.bl.fetchRecord("groupinvite",{id:id});case 4:_yield$API$fetchRecor=_context.sent,groupinvite=_yield$API$fetchRecor.groupinvite,error=_yield$API$fetchRecor.error,error?_this.$message.error(error.message||"Error Occurred"):(_this.summaryData=groupinvite||[],_this.groupInvitesList=groupinvite.groupChildInvites),_this.summaryLoading=!1;case 9:case"end":return _context.stop()}}),_callee)})))()},formFields:function(data){var _this2=this,_ref=data||{},fields=_ref.fields;fields.forEach((function(f){var field=f.field,_ref2=field||{},defaultField=_ref2.default,name=_ref2.name,displayName=_ref2.displayName;!0!==defaultField?_this2.customFields.push(f):_this2.systemField[name]=displayName||name}))},handleCommand:function(command){"delete"===command?this.deleteRecord(this.summaryData.id,this.moduleName):"edit"===command&&this.editRecord(this.summaryData)},editRecord:function(data){var id=data.id,formId=data.formId,groupChildInvites=data.groupChildInvites,visitorTypeId=groupChildInvites[0].visitorType.id||null,query={formId:formId,formMode:"bulk",visitorTypeId:visitorTypeId};if((0,router/* isWebTabsEnabled */.tj)()){var moduleName=this.moduleName,_ref3=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref3.name;name&&this.$router.push({name:name,params:{id:id},query:query})}else this.$router.push({name:"group-invites-edit",params:{id:id},query:query})},deleteRecord:function(id,moduleName){var _this3=this;this.$dialog.confirm({title:"invitevisitor"===moduleName?this.$t("home.visitor.delete_visitor_invite"):this.$t("home.visitor.delete_group_invite"),message:"invitevisitor"===moduleName?this.$t("home.visitor.delete_visitor_invite_confirmation"):this.$t("home.visitor.delete_group_invite_confirmation"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then((function(value){value&&api/* API */.bl.deleteRecord(moduleName,id).then((function(_ref4){var error=_ref4.error;error?_this3.$message.error(error.messsage||"Error Occured"):(_this3.$message.success("invitevisitor"===moduleName?_this3.$t("home.visitor.visitor_invite_delete_success"):_this3.$t("home.visitor.group_invite_delete_success")),"invitevisitor"===moduleName?_this3.loadSummary():_this3.back())}))}))},getDateTime:function(val,obj){var value=val[obj.property];return value&&-1!==value?this.$options.filters.formatDate(value):"---"},back:function(){var viewname=this.viewname,moduleName=this.moduleName,$route=this.$route;if((0,router/* isWebTabsEnabled */.tj)()){var _ref5=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref5.name;name&&this.$router.push({name:name,params:{viewname:viewname},query:$route.query})}else this.$router.push({path:"/app/vi/groupinvite/".concat(viewname),query:$route.query})},editSingleRecord:function(data){var _data$=data[0],id=_data$.id,visitorType=_data$.visitorType,formId=_data$.formId,query={visitorTypeId:visitorType.id,formId:formId};if((0,router/* isWebTabsEnabled */.tj)()){var _ref6=(0,router/* findRouteForModule */.Jp)("invitevisitor",router/* pageTypes */.As.EDIT)||{},name=_ref6.name;name&&this.$router.push({name:name,params:{id:id},query:query})}else this.$router.push({name:"invites-edit",params:{id:id},query:query})},goToOverview:function(inviteid){this.inviteid=inviteid,this.visitorinvite=!0},closeDialog:function(){this.inviteid=null,this.visitorinvite=!1}}},groupInvites_GroupInvitesPortalSummaryvue_type_script_lang_js=GroupInvitesPortalSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(groupInvites_GroupInvitesPortalSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,GroupInvitesPortalSummary=component.exports},
/***/935010:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/20528.js.map