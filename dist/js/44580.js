(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[44580],{
/***/918325:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AssetDuplicationViewer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AssetDuplicationViewer.vue?vue&type=template&id=49d0ced3
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container new-add-duplicate-dialog fc-dialog-header-hide",attrs:{visible:_vm.visible,width:"45%",maxHeight:"300px",title:_vm.moduleName+" Duplication",confirmTitle:"UPDATE"},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{staticClass:"positon-relative duplicate-dialog-body"},[_c("div",{staticClass:"record-duplicate-dialog-form"},[_c("div",{staticClass:"record-duplicate-dialog-form-left",class:{"duplicate-right-side-width":_vm.$validation.isEmpty(_vm.records)}},[_c("div",{staticClass:"label-txt-black text-uppercase fwBold duplicate-header-left"},[_vm._v(" "+_vm._s(_vm.moduleName)+" "+_vm._s(_vm.$t("common._common.duplication"))+" ")]),_c("div",{staticClass:"pL30 pR30"},[_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.name"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common._common.enter_the_name")},model:{value:_vm.duplicateObj.name,callback:function($$v){_vm.$set(_vm.duplicateObj,"name",$$v)},expression:"duplicateObj.name"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.starting_number"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"number",placeholder:_vm.$t("common.placeholders.enter_the_starting_number"),min:0},model:{value:_vm.startingNumber,callback:function($$v){_vm.startingNumber=$$v},expression:"startingNumber"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.quantity"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{type:"number",placeholder:_vm.$t("common.placeholders.enter_the_quantity"),min:0,max:100},model:{value:_vm.duplicateObj.quantity,callback:function($$v){_vm.$set(_vm.duplicateObj,"quantity",$$v)},expression:"duplicateObj.quantity"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.prefix"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.placeholders.enter_the_prefix")},model:{value:_vm.duplicateObj.prefix,callback:function($$v){_vm.$set(_vm.duplicateObj,"prefix",$$v)},expression:"duplicateObj.prefix"}})],1)])],1),_c("el-row",{staticClass:"mT30"},[_c("div",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.suffix"))+" ")]),_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.placeholders.enter_the_suffix")},model:{value:_vm.duplicateObj.sufix,callback:function($$v){_vm.$set(_vm.duplicateObj,"sufix",$$v)},expression:"duplicateObj.sufix"}})],1)])],1)],1)]),_vm.$validation.isEmpty(_vm.records)?_vm._e():[_c("div",{staticClass:"record-duplicate-dialog-form-right",class:{"duplicate-right-side-hide":!_vm.records}},[_c("div",[_c("div",{staticClass:"flex-middle record-duplicate-left-header"},[_c("div",{staticClass:"label-txt-black fwBold mL10"},[_vm._v(" "+_vm._s(_vm.records.length)+" "+_vm._s(_vm.listName)+_vm._s(_vm.duplicateObj.quantity>1?"s":"")+" ")])]),_vm._l(_vm.records,(function(value,index){return index<10?_c("div",{key:index,staticClass:"pR30 pL30 pT3"},[_c("div",{staticClass:"fc-black-13 text-left pT15 pB15 border-bottom3 bold"},[_vm._v(" "+_vm._s(value)+" ")])]):_vm._e()})),_vm.records.length>10?_c("div",{staticClass:"pR30 pL30 pT20"},[_c("i",{staticClass:"el-icon-plus plus-button",staticStyle:{"font-weight":"700","font-size":"12px"}}),_c("span",{staticClass:"fc-black-13 text-left pT15 pB15 bold"},[_vm._v(" "+_vm._s(_vm.records.length-10)+" "+_vm._s(_vm.listName)+_vm._s(_vm.records.length-10>1?"s":""))])]):_vm._e()],2)])],_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.visible=!1,_vm.actioncancel()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.actionSave()}}},[_vm._v(_vm._s(_vm.saving?"Saving...":"Save"))])],1)],2)])],1)],1)},staticRenderFns=[],utils_validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(990260)),ErrorBanner=__webpack_require__(297157),AssetDuplicationViewervue_type_script_lang_js={data:function(){return{visible:!0,saving:!1,error:!1,errorText:"",startingNumber:1,duplicateObj:{name:null,quantity:"1",prefix:null,sufix:null}}},computed:{records:function(){var duplicateObj=this.duplicateObj,startingNumber=this.startingNumber,recordList=[];if(!(0,utils_validation/* isEmpty */.xb)(duplicateObj.name))for(var i=0;i<duplicateObj.quantity;i++){var value=((0,utils_validation/* isEmpty */.xb)(duplicateObj.prefix)?"":duplicateObj.prefix+" ")+((0,utils_validation/* isEmpty */.xb)(duplicateObj.name)?"":duplicateObj.name)+(!(0,utils_validation/* isEmpty */.xb)(startingNumber)&&startingNumber>0?" ":"")+(!(0,utils_validation/* isEmpty */.xb)(startingNumber)&&startingNumber>0?startingNumber:"")+((0,utils_validation/* isEmpty */.xb)(duplicateObj.sufix)?"":" "+duplicateObj.sufix);value.length>0&&recordList.push(value),startingNumber++}return recordList}},components:{ErrorBanner:ErrorBanner/* default */.Z},watch:{selectedRecordObj:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.init()},visible:function(newVal,oldVal){newVal||this.actioncancel()},"duplicateObj.quantity":function(newData){newData>100?(this.errorText="Quantity should not exceed 100",this.error=!0):this.error=!1}},mounted:function(){this.init()},props:["moduleName","selectedRecord","selectedRecordObj","listName"],methods:{init:function(){this.selectedRecordObj&&this.$set(this.duplicateObj,"name",(0,utils_validation/* isEmpty */.xb)(this.selectedRecordObj)?null:this.selectedRecordObj.name)},actioncancel:function(){this.$emit("closed")},actionSave:function(){var _this=this,moduleName=this.moduleName,startingNumber=this.startingNumber,selectedRecord=this.selectedRecord,duplicateObj=this.duplicateObj;if(this.validation(),!this.error){this.saving=!0;var url="/v2/module/recordsDuplication",params={moduleName:moduleName,id:selectedRecord,startingNumber:parseInt(startingNumber),duplicateObj:duplicateObj};this.$http.post(url,params).then((function(response){response.data&&0===response.data.responseCode?(_this.$message({message:moduleName+" duplicated successfully",type:"success"}),_this.saving=!1,_this.$emit("sucess"),_this.$emit("closed")):(_this.$error.message("Export failed"),_this.$emit("closed"))}))}},validation:function(){(0,utils_validation/* isEmpty */.xb)(this.duplicateObj.name)?(this.errorText="Please enter the name",this.error=!0):(0,utils_validation/* isEmpty */.xb)(this.duplicateObj.quantity)?(this.errorText="Please enter the quantity",this.error=!0):!(0,utils_validation/* isEmpty */.xb)(this.duplicateObj.quantity)&&this.duplicateObj.quantity>100?(this.errorText="Quantity should not exceed 100",this.error=!0):(0,utils_validation/* isEmpty */.xb)(this.startingNumber)?(this.errorText="Please enter the startingNumber",this.error=!0):(this.errorText="",this.error=!1)}}},components_AssetDuplicationViewervue_type_script_lang_js=AssetDuplicationViewervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AssetDuplicationViewervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AssetDuplicationViewer=component.exports},
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports},
/***/328955:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AddDepreciationForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/asset/v1/AddDepreciationForm.vue?vue&type=template&id=5ae10516&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:!_vm.canShowAddNewForm,title:"Apply Depreciation Schedule",width:"50%",height:"50%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{staticClass:"height400 mT15"},[_vm.loading?_c("div",{staticStyle:{"margin-bottom":"22px"}},[_c("span",{staticClass:"lines loading-shimmer width50 height45"})]):_c("el-form",{ref:"depreciationForm",attrs:{rules:_vm.rules,model:_vm.selectedDepreciation}},[_c("el-form-item",{attrs:{prop:"id"}},[_c("div",{staticClass:"d-flex"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width50",attrs:{filterable:"",placeholder:"Select Depreciation Schedule"},model:{value:_vm.selectedDepreciation.id,callback:function($$v){_vm.$set(_vm.selectedDepreciation,"id",$$v)},expression:"selectedDepreciation.id"}},_vm._l(_vm.depreciationList,(function(depreciation){return _c("el-option",{key:depreciation.id,attrs:{label:depreciation.name,value:depreciation.id}})})),1),_c("div",{staticClass:"text-fc-green pointer mL20",on:{click:function($event){_vm.canShowAddNewForm=!0}}},[_c("inline-svg",{staticClass:"vertical-middle pT5",attrs:{src:"add-icon",iconClass:"icon icon-md mR5"}}),_vm._v(" Add New ")],1)],1)])],1),_c("div",{staticClass:"fc-modal-sub-title pB10",staticStyle:{color:"#385571"}},[_vm._v(" Preview ")]),_c("depreciation-schedule",{attrs:{asset:_vm.asset,selectedDepreciationId:_vm.selectedDepreciation.id},on:{appliedDepreciationId:_vm.setDepreciationId,depreciationRel:_vm.setDepreciationRel,error:_vm.errorBanner}}),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" Cancel ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.applyingDepreciation},on:{click:function($event){return _vm.submitForm()}}},[_vm._v(" Confirm ")])],1)],1)],1),_vm.canShowAddNewForm?_c("new-asset-depreciation",{on:{onRecordSaved:_vm.addDepreciation,onClose:function($event){_vm.canShowAddNewForm=!1}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),NewAssetDepreciation=(__webpack_require__(670560),__webpack_require__(468495)),api=__webpack_require__(32284),ScheduleList=__webpack_require__(849621),ErrorBanner=__webpack_require__(297157),validation=__webpack_require__(990260),AddDepreciationFormvue_type_script_lang_js={props:["asset"],data:function(){return{selectedDepreciation:{id:null},loading:!1,appliedDepreciationId:null,depreciationList:[],canShowAddNewForm:!1,applyingDepreciation:!1,depreciationRelId:null,error:!1,errorText:"",rules:{id:{required:!0,message:"Please select a Depreciation Schedule",trigger:"change"}}}},components:{NewAssetDepreciation:NewAssetDepreciation/* default */.Z,DepreciationSchedule:ScheduleList/* default */.Z,ErrorBanner:ErrorBanner/* default */.Z},created:function(){this.loadDepreciation()},watch:{"selectedDepreciation.id":function(value){value&&(this.error=!1,this.errorText="")}},methods:{loadDepreciation:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$fetchAll,list,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_context.next=3,api/* API */.bl.fetchAll("assetdepreciation");case 3:_yield$API$fetchAll=_context.sent,list=_yield$API$fetchAll.list,error=_yield$API$fetchAll.error,error?_this.$message.error(error.message||"Error Occured"):_this.depreciationList=list,_this.loading=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},addDepreciation:function(depreciation){this.depreciationList.push(depreciation),this.selectedDepreciation.id=depreciation.id},setDepreciationId:function(id){this.appliedDepreciationId=id,this.selectedDepreciation.id=id},setDepreciationRel:function(rel){var _ref=rel||{},id=_ref.id;this.depreciationRelId=id},errorBanner:function(errorMsg){this.error=!0,this.errorText=errorMsg||"Error Occured"},submitForm:function(){var _this2=this;this.$refs["depreciationForm"].validate(function(){var _ref2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(valid){var asset,depreciationRelId,param,promise,_ref3,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(valid){_context2.next=2;break}return _context2.abrupt("return",!1);case 2:if(asset=_this2.asset,depreciationRelId=_this2.depreciationRelId,param={data:{asset:{id:asset.id},depreciation:{id:_this2.selectedDepreciation.id}}},promise={},!(0,validation/* isEmpty */.xb)(depreciationRelId)){_context2.next=11;break}return _context2.next=8,api/* API */.bl.createRecord("assetdepreciationRel",param);case 8:promise=_context2.sent,_context2.next=14;break;case 11:return _context2.next=13,api/* API */.bl.updateRecord("assetdepreciationRel",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},param),{},{id:depreciationRelId}));case 13:promise=_context2.sent;case 14:_ref3=promise||{},error=_ref3.error,error?_this2.$message.error(error.message||"Error Occured"):(_this2.$message.success(_this2.$t("setup.users_management.Depreciation_scheduled")),_this2.$emit("fetchAssetDetail"),_this2.applyingDepreciation=!1,_this2.closeDialog());case 16:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref2.apply(this,arguments)}}())},closeDialog:function(){this.$emit("onClose")}}},v1_AddDepreciationFormvue_type_script_lang_js=AddDepreciationFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_AddDepreciationFormvue_type_script_lang_js,render,staticRenderFns,!1,null,"5ae10516",null)
/* harmony default export */,AddDepreciationForm=component.exports},
/***/686092:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewAsset}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/asset/v1/NewAsset.vue?vue&type=template&id=3df9bd96
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showCreateNewDialog?_c("el-dialog",{attrs:{visible:_vm.showCreateNewDialog,fullscreen:!0,"custom-class":"fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog f-webform-right-dialog new-asset-container","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.showCreateNewDialog=$event}}},[_c("div",{staticClass:"header pT10 pB10 pL40 pR40 d-flex"},[_c("div",{staticClass:"title mT10"},[_vm._v(_vm._s(_vm.title))]),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},on:{change:function($event){return _vm.handleSelectChange.apply(void 0,arguments)}},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return"default_asset_mobile"!==form.name?_c("el-option",{key:index,attrs:{value:form,label:form.displayName}}):_vm._e()})),1):_vm._e()],1),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,fieldTransitionFn:_vm.setSelectedCategory,formLabelPosition:"top",isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isEdit:!_vm.$validation.isEmpty(_vm.dataId)},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.saveRecord,cancel:_vm.closeDialog}})],1):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(434284),__webpack_require__(32284)),FormCreation=__webpack_require__(373729),validation=__webpack_require__(990260),NewAssetvue_type_script_lang_js={extends:FormCreation/* default */.Z,props:["canShowAssetCreation","moduleName","moduleDisplayName","dataId","selectedCategory"],computed:{showCreateNewDialog:{get:function(){return this.canShowAssetCreation},set:function(value){this.$emit("update:canShowAssetCreation",value)}},currentSelectedCategory:{get:function(){return this.selectedCategory},set:function(value){this.$emit("update:selectedCategory",value)}},isV3Api:function(){return!0}},methods:{
/* getter setter methods*/setSelectedCategory:function(field){var selectedCategory=this.selectedCategory;if("category"===field.name){var categoryId=(selectedCategory||{}).id;this.$set(field,"value",categoryId),this.$set(field,"disabled",!0)}return field},
/* event related methods */closeDialog:function(){this.$set(this,"currentSelectedCategory",null),this.$set(this,"showCreateNewDialog",!1)},handleSelectChange:function(formObj){var module=formObj.module,_ref=module||{},name=_ref.name;(0,validation/* isEmpty */.xb)(name)||this.$emit("update:moduleName",name),this.$emit("update:moduleName","asset")},saveRecord:function(data){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var formObj,moduleDataId,moduleDisplayName,moduleName,formId,successMsg,assetToSave,response,_ref2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(formObj=_this.formObj,moduleDataId=_this.moduleDataId,moduleDisplayName=_this.moduleDisplayName,moduleName=_this.moduleName,formId=null===formObj||void 0===formObj?void 0:formObj.id,successMsg="",assetToSave=_this.serializedData(formObj,data),!(assetToSave.rotatingItem&&assetToSave.rotatingItem.id&&assetToSave.rotatingItem.id>0&&assetToSave.rotatingTool&&assetToSave.rotatingTool.id&&assetToSave.rotatingTool.id>0)){_context.next=7;break}return _this.$message.error("Asset can only be either a Rotating Item or a Rotating Tool"),_context.abrupt("return");case 7:if((0,validation/* isEmpty */.xb)(moduleDataId)?successMsg="".concat(moduleDisplayName," created successfully!"):(successMsg="".concat(moduleDisplayName," updated successfully!"),assetToSave.id=moduleDataId),_this.isSaving=!0,(0,validation/* isEmpty */.xb)(formId)||(assetToSave.formId=formId),response={},!(0,validation/* isEmpty */.xb)(moduleDataId)){_context.next=17;break}return _context.next=14,api/* API */.bl.createRecord(moduleName,{data:assetToSave});case 14:response=_context.sent,_context.next=20;break;case 17:return _context.next=19,api/* API */.bl.updateRecord(moduleName,{id:moduleDataId,data:assetToSave});case 19:response=_context.sent;case 20:_ref2=response||{},error=_ref2.error,_this.isSaving=!1,error?_this.$message.error((null===error||void 0===error?void 0:error.message)||"Error occured while saving asset"):(_this.$message.success(successMsg),_this.closeDialog(),_this.$emit("refreshlist"));case 23:case"end":return _context.stop()}}),_callee)})))()},
/* Overrided hooks */loadFormsList:function(moduleName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var categoryModuleName,url,_yield$API$get,data,error,message,_ref3,_ref3$forms,forms;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return categoryModuleName=_this2.selectedCategory.moduleName,url="/v2/forms?moduleName=".concat(categoryModuleName,"&fetchExtendedModuleForms=",!0),_this2.isLoading=!0,_context2.next=5,api/* API */.bl.get(url);case 5:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(message=error.message,_this2.$message.error(message)):(_ref3=data||{},_ref3$forms=_ref3.forms,forms=void 0===_ref3$forms?[]:_ref3$forms,_this2.$set(_this2,"forms",forms));case 9:case"end":return _context2.stop()}}),_callee2)})))()}}},v1_NewAssetvue_type_script_lang_js=NewAssetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_NewAssetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewAsset=component.exports},
/***/44580:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Overview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/asset/v1/Overview.vue?vue&type=template&id=1c69bce8&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{height:"auto","overflow-y":"scroll"}},[_c("div",{staticClass:"fc__layout__align fc__asset__main__header pT20 pB20 pL20 pR20",staticStyle:{width:"auto","align-items":"center !important","border-bottom":"none"}},[_vm.asset?_c("div",{staticClass:"asset-details"},[_c("div",{staticClass:"asset-id mb5"},[_vm._v("#"+_vm._s(_vm.asset.id))]),_c("div",{staticClass:"asset-name mb5 max-width550px"},[_vm.decommission?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pT3 pointer",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"pR5",attrs:{group:"alert",name:"decommissioning",size:"18"}})],1):_vm._e(),_c("span",{staticClass:"whitespace-pre-wrap"},[_vm._v(_vm._s(_vm.asset.name))]),_vm.isStateFlowEnabled&&_vm.currentModuleState?_c("div",{staticClass:"fc-badge inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.currentModuleState)+" ")]):_vm.assetState?_c("div",{staticClass:"fc-badge inline vertical-middle mL15"},[_vm._v(" "+_vm._s(_vm.assetState)+" ")]):_vm._e()])]):_vm._e(),_c("div",{staticClass:"d-flex flex-direction-row",staticStyle:{"margin-left":"auto"}},[_c("CustomButton",{attrs:{record:_vm.asset,moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY},on:{refresh:function($event){return _vm.refreshObj()},onError:function(){}}}),_vm.isStateFlowEnabled?[_c("TransitionButtons",{attrs:{moduleName:_vm.moduleName,record:_vm.asset,buttonClass:"asset-el-btn",disabled:_vm.isApprovalEnabled},on:{currentState:function(){},transitionSuccess:function($event){return _vm.refreshObj()},transitionFailure:function(){}}})]:_vm._e(),_vm.isApprovalEnabled?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_c("ApprovalBar",{key:_vm.asset.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:_vm.moduleName,record:_vm.asset,hideApprovers:!1},on:{onSuccess:function($event){return _vm.refreshObj()},onFailure:function(){}}})],1):_vm._e(),_vm.moreOptions?_c("el-dropdown",{staticClass:"mL10 fc-btn-ico-lg pT5 pB5 pL8 pR8 pointer",on:{command:_vm.handleCommand}},[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{attrs:{src:__webpack_require__(935010),height:"18",width:"18"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.$hasPermission("asset:UPDATE")?_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]):_vm._e(),_vm.showMoveButton?_c("el-dropdown-item",{attrs:{command:"move"}},[_vm._v("Move")]):_vm._e(),_vm.$hasPermission("asset:CREATE")?_c("el-dropdown-item",{attrs:{command:"duplicate"}},[_vm._v(_vm._s(_vm.$t("common._common.duplicate")))]):_vm._e(),_vm.$helpers.isLicenseEnabled("ASSET_DEPRECIATION")?_c("el-dropdown-item",{attrs:{command:"addDepreciation"}},[_vm._v(" Apply Depreciation ")]):_vm._e(),_vm.canShowStoreRoomMovement?_c("el-dropdown-item",{attrs:{command:"moveToStoreRoom"}},[_vm._v(" "+_vm._s(_vm.$t("common.inventory.move_to_storeroom"))+" ")]):_vm._e()],1)],1):_vm._e()],2)]),_vm.loading?_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),!_vm.loading&&_vm.asset?_c("page",{key:_vm.asset.id,attrs:{module:_vm.currentModuleName,id:_vm.asset.id,details:_vm.asset,primaryFields:_vm.primaryFields,notesModuleName:"assetnotes",attachmentsModuleName:"assetattachments",isV3Api:!0}}):_vm._e(),_vm.canShowAssetCreation?_c("new-asset",{ref:"new-asset",attrs:{canShowAssetCreation:_vm.canShowAssetCreation,selectedCategory:_vm.selectedCategory,moduleName:"asset",dataId:_vm.assetId,moduleDisplayName:"Asset"},on:{"update:canShowAssetCreation":function($event){_vm.canShowAssetCreation=$event},"update:can-show-asset-creation":function($event){_vm.canShowAssetCreation=$event},"update:selectedCategory":function($event){_vm.selectedCategory=$event},"update:selected-category":function($event){_vm.selectedCategory=$event},refreshlist:_vm.refreshObj}}):_vm._e(),_c("asset-move",{key:_vm.showAssetMoveDialog,attrs:{visibility:_vm.showAssetMoveDialog,asset:_vm.asset},on:{"update:visibility":function($event){_vm.showAssetMoveDialog=$event},refresh:_vm.refreshObj}}),_vm.showAssetDuplicationDialog?_c("AssetDuplicationViewer",{attrs:{moduleName:_vm.asset.categoryModuleName||"asset",selectedRecord:_vm.asset.id,selectedRecordObj:_vm.asset},on:{sucess:_vm.redirectListPage,closed:_vm.closeAssetduplicationDialog}}):_vm._e(),_vm.showAddDepreciationForm?_c("depreciation-form",{attrs:{asset:_vm.asset},on:{fetchAssetDetail:function($event){return _vm.refreshObj()},onClose:function($event){_vm.showAddDepreciationForm=!1}}}):_vm._e(),_c("el-dialog",{attrs:{visible:_vm.showStoreRoomPopUp,fullscreen:!1,open:"top",width:"30%",title:_vm.$t("common.inventory.move_to_storeroom"),"custom-class":"assetaddvaluedialog fc-dialog-center-container move-to-store-dialog inventory-dialog fc-web-form-dialog"},on:{"update:visible":function($event){_vm.showStoreRoomPopUp=$event}}},[_vm.isNonRotatingAsset(_vm.asset)?_c("div",{staticClass:"pB10"},[_c("div",{staticClass:"stock-form-field pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.header.item_type"))+" ")]),_c("FLookupFieldWrapper",{staticClass:"width100",attrs:{field:_vm.rotatingItemTypeLookupData,filterConstruction:_vm.rotatingFilters},model:{value:_vm.selectedRotatingItemType,callback:function($$v){_vm.selectedRotatingItemType=$$v},expression:"selectedRotatingItemType"}})],1):_vm._e(),_c("div",{staticClass:"stock-form-field pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.products.storeroom"))+" ")]),_c("FLookupFieldWrapper",{staticClass:"width100 pB10",attrs:{field:_vm.storeRoomLookupData},model:{value:_vm.selectedStoreroom,callback:function($$v){_vm.selectedStoreroom=$$v},expression:"selectedStoreroom"}}),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showStoreRoomPopUp=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isButtonLoading},on:{click:_vm.moveToStoreRoomApi}},[_vm._v(_vm._s(_vm.$t("common._common.ok")))])],1)],1),_vm.showUsagesList?_c("RotatingAssetUsagesList",{attrs:{plannedMaintenanceList:_vm.plannedMaintenanceList,inspectionTemplateList:_vm.inspectionTemplateList},on:{onClose:function($event){_vm.showUsagesList=!1}}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(169358),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(420629)),validation=__webpack_require__(990260),eventBus=__webpack_require__(398011),api=__webpack_require__(32284),router=__webpack_require__(329435),PageBuilder=__webpack_require__(760218),AssetDuplicationViewer=__webpack_require__(918325),NewAsset=__webpack_require__(686092),AssetMoveDialogvue_type_template_id_8acfc844_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.visibility?_c("f-dialog",{attrs:{"append-to-body":!0,title:"Move Asset",visible:_vm.visibility,width:"30%",stayOnSave:!0,confirmTitle:_vm.asset.moveApprovalNeeded?"Request":"Move",customClass:"qr-dialog"},on:{"update:visible":function($event){_vm.visibility=$event},save:function($event){return _vm.moveAsset(_vm.assetMovement)},close:_vm.moveDialogClose}},[_c("el-row",{staticClass:"pB20",attrs:{align:"middle"}},[_c("el-col",{staticClass:"pR5",attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt",staticStyle:{color:"#dc7171"}},[_vm._v("To Site")]),_c("div",{staticClass:"form-input"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border2",attrs:{filterable:"",placeholder:"Select Site"},model:{value:_vm.assetMovement.toSite,callback:function($$v){_vm.$set(_vm.assetMovement,"toSite",$$v)},expression:"assetMovement.toSite"}},_vm._l(_vm.sites,(function(site){return _c("el-option",{key:site.id,attrs:{label:site.name,value:site.id}})})),1)],1)])],1),_c("el-row",{staticClass:"pB20",attrs:{align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt",staticStyle:{color:"#dc7171"}},[_vm._v("To Space")]),_c("div",{staticClass:"form-input"},[_c("el-input",{staticClass:"fc-input-full-border width100",attrs:{type:"text",placeholder:_vm.$t("maintenance.wr_list.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.assetMovement.spaceDisplayName,_vm.showSpaceChooser=!0}},model:{value:_vm.assetMovement.spaceDisplayName,callback:function($$v){_vm.$set(_vm.assetMovement,"spaceDisplayName",$$v)},expression:"assetMovement.spaceDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search pm-form-search-icon op5 pT7",attrs:{slot:"suffix"},on:{click:function($event){_vm.showSpaceChooser=!0}},slot:"suffix"})])],1)])],1),_c("el-row",{staticClass:"pB20",attrs:{align:"middle"}},[_c("el-col",{staticClass:"pR5",attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt",staticStyle:{color:"#dc7171"}},[_vm._v(" Requested By ")]),_c("div",{staticClass:"form-input"},[_c("el-select",{staticClass:"form-item width100 fc-input-full-border2",attrs:{filterable:"",placeholder:"Select Site"},model:{value:_vm.currentUserId,callback:function($$v){_vm.currentUserId=$$v},expression:"currentUserId"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1),_c("el-row",{staticClass:"pB20",attrs:{align:"middle"}},[_c("el-col",{staticClass:"pR5",attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt",staticStyle:{color:"#dc7171"}},[_vm._v(" Description ")]),_c("div",{staticClass:"form-input"},[_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:_vm.$t("common._common.enter_desc"),resize:"none"},model:{value:_vm.assetMovement.description,callback:function($$v){_vm.$set(_vm.assetMovement,"description",$$v)},expression:"assetMovement.description"}})],1)])],1)],1):_vm._e(),_vm.showSpaceChooser?_c("space-asset-chooser",{attrs:{resourceType:"2, 3, 4",picktype:"space",query:_vm.quickSearchQuery,visibility:_vm.showSpaceChooser,filter:_vm.filter,showAsset:!1},on:{associate:function($event){return _vm.associate($event)},"update:visibility":function($event){_vm.showSpaceChooser=$event}}}):_vm._e()],1)},AssetMoveDialogvue_type_template_id_8acfc844_staticRenderFns=[],SpaceAssetChooser=(__webpack_require__(879288),__webpack_require__(372587)),FDialogNew=__webpack_require__(436756),AssetMoveDialogvue_type_script_lang_js={components:{FDialog:FDialogNew/* default */.Z,SpaceAssetChooser:SpaceAssetChooser/* default */.Z},props:["visibility","asset"],data:function(){return{quickSearchQuery:"",currentUserId:null,showSpaceChooser:!1,assetMovement:{}}},created:function(){this.$store.dispatch("loadSite")},mounted:function(){var _this$sites;this.assetMovement={},1===(null===(_this$sites=this.sites)||void 0===_this$sites?void 0:_this$sites.length)&&(this.assetMovement.toSite=this.sites[0].id),this.currentUserId=this.getCurrentUser().id},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},sites:function(state){return state.site}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{filter:function(){var filter={};return this.assetMovement.toSite&&(filter.site=Number(this.assetMovement.toSite)),filter}}),methods:{moveDialogClose:function(){this.visibility=!1,this.$emit("update:visibility",!1)},associate:function(selectedObj){this.assetMovement.toSpace=selectedObj.id,this.assetMovement.spaceDisplayName=selectedObj.name,this.showSpaceChooser=!1,this.$forceUpdate()},moveAsset:function(assetMovement){var _this=this;assetMovement.toSite?assetMovement.toSpace?(assetMovement.assetId=this.asset.id,assetMovement.approvalNeeded=this.asset.moveApprovalNeeded,this.asset.identifiedLocation?assetMovement.fromSite=this.asset.identifiedLocation.id:this.asset.siteId&&(assetMovement.fromSite=this.asset.siteId),this.asset.currentSpaceId?assetMovement.fromSpace=this.asset.currentSpaceId:this.asset.space&&(assetMovement.fromSpace=this.asset.space.id),assetMovement.fromSite!=assetMovement.toSite||assetMovement.fromSpace!=assetMovement.toSpace?(assetMovement.requestedBy={id:this.currentUserId},this.$http.post("/v2/assetMovement/create",{assetMovement:assetMovement}).then((function(response){0===response.data.responseCode?(assetMovement.approvalNeeded?_this.$message.success("Asset Move requested successfully."):_this.$message.success("Asset Moved successfully."),_this.moveDialogClose(),_this.$emit("refresh")):_this.$message.error(response.data.message)}))):this.$message.error("Please choose a different site/space for movement")):this.$message.error("Please choose the To Space"):this.$message.error("Please choose the To Site")}}},v1_AssetMoveDialogvue_type_script_lang_js=AssetMoveDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_AssetMoveDialogvue_type_script_lang_js,AssetMoveDialogvue_type_template_id_8acfc844_render,AssetMoveDialogvue_type_template_id_8acfc844_staticRenderFns,!1,null,null,null)
/* harmony default export */,AssetMoveDialog=component.exports,AddDepreciationForm=__webpack_require__(328955),TransitionButtons=__webpack_require__(987612),ApprovalBar=__webpack_require__(42525),CustomButton=__webpack_require__(623857),CustomButtonUtil=__webpack_require__(746095),Spinner=__webpack_require__(604947),FLookupFieldWrapper=__webpack_require__(201117),RotatingAssetUsagesListvue_type_template_id_d582345a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"rotating-asset fc-dialog-center-container",attrs:{visible:!0,"before-close":_vm.closeDialog,width:"50%",height:"70%","show-close":!1,"append-to-body":!0}},[_c("el-tabs",{staticClass:"rotating-asset-tabs",model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},_vm._l(_vm.tabList,(function(tab){return _c("el-tab-pane",{key:tab.name,attrs:{label:tab.displayName,name:tab.name}},[_c("div",{staticClass:"rotating-asset-msg-container"},[_c("fc-icon",{staticClass:"warning-icon",attrs:{group:"alert",name:"triangle-warning"}}),_c("span",{staticClass:"rotating-asset-msg"},[_vm._v(" "+_vm._s(tab.message))])],1),_c("RotatingAssetUsagesTable",{attrs:{list:tab.list,moduleName:tab.moduleName}})],1)})),1),_c("fc-icon",{staticClass:"asset-cross-icon",attrs:{group:"action",name:"cross",size:"16",color:"#000"},on:{click:_vm.closeDialog}})],1)},RotatingAssetUsagesListvue_type_template_id_d582345a_scoped_true_staticRenderFns=[],RotatingAssetUsagesTablevue_type_template_id_a862770c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"rotating-asset-table"},[_c("el-table",{staticStyle:{width:"100%"},attrs:{data:_vm.list,height:"210px"}},[_c("el-table-column",{attrs:{prop:"id",formatter:_vm.getId,label:_vm.$t("common._common._id"),"min-width":"200"}}),_c("el-table-column",{attrs:{prop:"name",label:_vm.$t("common.products._name"),"min-width":"250"}}),_c("el-table-column",{attrs:{prop:"id","min-width":"150"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"rotating-asset-view-container",on:{click:function($event){return _vm.redirectToSummary(data.row.id)}}},[_c("span",{staticClass:"rotating-asset-view"},[_c("fc-icon",{staticClass:"view-icon",attrs:{group:"dsm",name:"open-window",size:"16"}}),_vm._v(_vm._s(_vm.$t("common._common.view")))],1)])]}}])})],1)],1)},RotatingAssetUsagesTablevue_type_template_id_a862770c_staticRenderFns=[],RotatingAssetUsagesTablevue_type_script_lang_js={props:["list","moduleName"],computed:{getSummaryName:function(){var moduleName=this.moduleName;return"plannedmaintenance"===moduleName?"pm-summary":"inspectionTemplateSummary"}},methods:{getId:function(val){return"#".concat(val.id)},redirectToSummary:function(id){var route;if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&(route=this.$router.resolve({name:name,params:{viewname:"all",id:id}}).href)}else route=this.$router.resolve({name:this.getSummaryName,params:{viewname:"all",id:id}}).href;route&&window.open(route,"_blank")}}},v1_RotatingAssetUsagesTablevue_type_script_lang_js=RotatingAssetUsagesTablevue_type_script_lang_js,RotatingAssetUsagesTable_component=(0,componentNormalizer/* default */.Z)(v1_RotatingAssetUsagesTablevue_type_script_lang_js,RotatingAssetUsagesTablevue_type_template_id_a862770c_render,RotatingAssetUsagesTablevue_type_template_id_a862770c_staticRenderFns,!1,null,null,null)
/* harmony default export */,RotatingAssetUsagesTable=RotatingAssetUsagesTable_component.exports,RotatingAssetUsagesListvue_type_script_lang_js={props:["plannedMaintenanceList","inspectionTemplateList"],components:{RotatingAssetUsagesTable:RotatingAssetUsagesTable},created:function(){this.init()},data:function(){return{activeTab:null,tabList:[]}},methods:{init:function(){var tabList=[];(0,validation/* isEmpty */.xb)(this.plannedMaintenanceList)||tabList.push({name:"plannedPreventiveMaintenanace",displayName:this.$t("common.inventory.planned_preventive_maintenanace"),message:this.$t("common.inventory.pm_warning_msg"),list:this.plannedMaintenanceList,moduleName:"plannedmaintenance"}),(0,validation/* isEmpty */.xb)(this.inspectionTemplateList)||tabList.push({name:"inspectionTemplate",displayName:this.$t("common.inventory.inspection_template"),message:this.$t("common.inventory.inspection_warning_msg"),list:this.inspectionTemplateList,moduleName:"inspectionTemplate"}),this.tabList=tabList,this.activeTab=this.$getProperty(tabList,"0.name")},closeDialog:function(){this.$emit("onClose")}}},v1_RotatingAssetUsagesListvue_type_script_lang_js=RotatingAssetUsagesListvue_type_script_lang_js,RotatingAssetUsagesList_component=(0,componentNormalizer/* default */.Z)(v1_RotatingAssetUsagesListvue_type_script_lang_js,RotatingAssetUsagesListvue_type_template_id_d582345a_scoped_true_render,RotatingAssetUsagesListvue_type_template_id_d582345a_scoped_true_staticRenderFns,!1,null,"d582345a",null)
/* harmony default export */,RotatingAssetUsagesList=RotatingAssetUsagesList_component.exports,Overviewvue_type_script_lang_js={components:{Page:PageBuilder/* default */.Z,NewAsset:NewAsset/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,AssetMove:AssetMoveDialog,AssetDuplicationViewer:AssetDuplicationViewer/* default */.Z,DepreciationForm:AddDepreciationForm/* default */.Z,ApprovalBar:ApprovalBar/* default */.Z,CustomButton:CustomButton/* default */.Z,Spinner:Spinner/* default */.Z,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z,RotatingAssetUsagesList:RotatingAssetUsagesList},created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","asset"),this.$store.dispatch("loadTicketStatus","assetmovement"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAssetType"),eventBus/* eventBus */.Y.$on("refesh-parent",(function(){return _this.refreshObj()})),eventBus/* eventBus */.Y.$on("refresh-overview",this.refreshObj),eventBus/* eventBus */.Y.$on("stateflows",this.loadStateflows),eventBus/* eventBus */.Y.$on("currentSpaceId",this.setCurrentSpaceId),this.loadAssetsDetails(),this.loadAssetMovements()},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("refresh-overview",this.refreshObj)},data:function(){return{plannedMaintenanceList:[],inspectionTemplateList:[],canMoveToStore:null,showUsagesList:!1,stateflows:[],showAssetMoveDialog:!1,showAssetDuplicationDialog:!1,asset:null,moduleName:"asset",primaryFields:["name","description","category","type","siteId","space"],canShowAssetCreation:!1,selectedCategory:null,showAddDepreciationForm:!1,POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,loading:!1,showStoreRoomPopUp:!1,selectedStoreroom:null,selectedRotatingItemType:null,storeRoomLookupData:{displayName:this.$t("common.header.choose_storeroom"),name:"storeRoom",lookupModule:{displayName:this.$t("common.products.storeroom"),name:"storeRoom"},forceFetchAlways:!0,selectedItems:[]},rotatingItemTypeLookupData:{name:"itemTypes",lookupModule:{displayName:this.$t("common.inventory.rotating_itemType"),name:"itemTypes"},forceFetchAlways:!0,selectedItems:[]},isButtonLoading:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({ticketStates:function(state){return state.ticketStatus.asset}})),(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{currentModuleName:function(){var _ref=this.asset||{},moduleName=_ref.moduleName;return moduleName||"asset"},canShowStoreRoomMovement:function(){var asset=this.asset,_ref2=asset||{},storeRoom=_ref2.storeRoom;return(0,validation/* isEmpty */.xb)(storeRoom)&&this.$helpers.isLicenseEnabled("INVENTORY")},currentAssetCategory:function(){var currentModuleName=this.currentModuleName,selectedCategory=this.selectedCategory;if(!(0,validation/* isEmpty */.xb)(selectedCategory)){var moduleName=selectedCategory.moduleName;return moduleName}return currentModuleName},assetId:function(){var assetId=this.$attrs.id||this.$route.params.assetid;return assetId?parseInt(assetId):null},isStateFlowEnabled:function(){return Boolean(this.asset&&this.asset.moduleState&&this.asset.moduleState.id)},decommission:function(){return this.$getProperty(this,"asset.decommission",!1)},isApprovalEnabled:function(){var asset=this.asset,_ref3=asset||{},approvalFlowId=_ref3.approvalFlowId,approvalStatus=_ref3.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)},currentModuleState:function(){var currentStateId=this.asset&&this.asset.moduleState.id,currentState=this.ticketStates&&this.ticketStates.find((function(state){return state.id===currentStateId}));return currentState?currentState.displayName:null},assetState:function(){var state=this.asset.state;if(state){if(1===state)return"Active";if(2===state)return"In Store";if(3===state)return"In Repair";if(4===state)return"Inactive";if(5===state)return"Retired"}return null},showMoveButton:function(){if(155!=this.$account.user.orgId)return!1;if(!this.asset)return!1;var recordInOpenState=!0;return this.stateflows&&0!==Object.keys(this.stateflows).length||(recordInOpenState=!1),this.asset.geoLocationEnabled&&!recordInOpenState&&!this.asset.connected},moreOptions:function(){var recordLocked=this.$getProperty(this,"asset.moduleState.recordLocked",!1);return(this.$hasPermission("asset:UPDATE")||this.$hasPermission("asset:CREATE")||this.showMoveButton)&&!recordLocked}}),methods:{rotatingFilters:function(){return{isRotating:{operatorId:15,value:["true"]}}},isNonRotatingAsset:function(asset){var _ref4=asset||{},rotatingItemType=_ref4.rotatingItemType;return(0,validation/* isEmpty */.xb)(rotatingItemType)},assetUsageList:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this2$asset,queryParam,_yield$API$post,data,error,_ref5,plannedMaintenanceList,inspectionTemplateList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return queryParam={assetId:null===(_this2$asset=_this2.asset)||void 0===_this2$asset?void 0:_this2$asset.id},_context.next=3,api/* API */.bl.post("/v3/rotatingAsset/rotatingAssetUsages",queryParam);case 3:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error?(_this2.$message.error(_this2.$t("common.inventory.error_occured_while_selecting_store")),_this2.canMoveToStore=!1):(_ref5=data||{},plannedMaintenanceList=_ref5.plannedMaintenanceList,inspectionTemplateList=_ref5.inspectionTemplateList,_this2.plannedMaintenanceList=plannedMaintenanceList||[],_this2.inspectionTemplateList=inspectionTemplateList||[],_this2.canMoveToStore=!0);case 7:case"end":return _context.stop()}}),_callee)})))()},moveToStoreRoom:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var plannedMaintenanceList,inspectionTemplateList,canMoveToStore;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this3.assetUsageList();case 2:if(plannedMaintenanceList=_this3.plannedMaintenanceList,inspectionTemplateList=_this3.inspectionTemplateList,canMoveToStore=_this3.canMoveToStore,canMoveToStore){_context2.next=5;break}return _context2.abrupt("return");case 5:(0,validation/* isEmpty */.xb)(plannedMaintenanceList)&&(0,validation/* isEmpty */.xb)(inspectionTemplateList)?_this3.showStoreRoomPopUp=!0:_this3.showUsagesList=!0;case 6:case"end":return _context2.stop()}}),_callee2)})))()},moveToStoreRoomApi:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var asset,moduleName,selectedStoreroom,selectedRotatingItemType,storeRoomData,params,_yield$API$updateReco,error,successMsg;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this4.isButtonLoading=!0,asset=_this4.asset,moduleName=_this4.moduleName,selectedStoreroom=_this4.selectedStoreroom,selectedRotatingItemType=_this4.selectedRotatingItemType,!(0,validation/* isEmpty */.xb)(selectedStoreroom)){_context3.next=6;break}return _this4.$message.error(_this4.$t("common.inventory.select_store_warning")),_this4.isButtonLoading=!1,_context3.abrupt("return");case 6:if(storeRoomData={id:selectedStoreroom},params={id:asset.id,data:{storeRoom:storeRoomData},params:{moveToStoreRoom:!0}},!_this4.isNonRotatingAsset(asset)){_context3.next=14;break}if(!(0,validation/* isEmpty */.xb)(selectedRotatingItemType)){_context3.next=13;break}return _this4.$message.error(_this4.$t("common.inventory.select_itemType_warning")),_this4.isButtonLoading=!1,_context3.abrupt("return");case 13:params.data["rotatingItemType"]={id:selectedRotatingItemType};case 14:return _context3.next=16,api/* API */.bl.updateRecord(moduleName,params);case 16:_yield$API$updateReco=_context3.sent,error=_yield$API$updateReco.error,error?_this4.$message.error(error.message||_this4.$t("common.inventory.error_occured_while_selecting_store")):(successMsg=_this4.$t("common.inventory.move_to_store_success"),_this4.$message.success(successMsg),_this4.showStoreRoomPopUp=!1,_this4.loadAssetsDetails()),selectedStoreroom=null,_this4.isButtonLoading=!1;case 21:case"end":return _context3.stop()}}),_callee3)})))()},loadAssetsDetails:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$API$fetchRecor,asset,error,_error$message,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this5.loading=!0,_context4.next=3,api/* API */.bl.fetchRecord("asset",{id:_this5.assetId},{force:!0});case 3:_yield$API$fetchRecor=_context4.sent,asset=_yield$API$fetchRecor.asset,error=_yield$API$fetchRecor.error,(0,validation/* isEmpty */.xb)(error)?_this5.asset=asset:(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Asset":_error$message,_this5.$message.error(message)),_this5.loading=!1;case 8:case"end":return _context4.stop()}}),_callee4)})))()},redirectListPage:function(){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForModule=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST),name=_findRouteForModule.name,currentView="filteredassets"===this.$attrs.viewname?"all":this.$attrs.viewname;name&&this.$router.push({name:name,params:{viewname:currentView},query:this.$route.query})}else{var url="/app/at/assets/"+("filteredassets"===this.$route.params.viewname?"all":this.$route.params.viewname);this.$router.push({path:url,query:this.$route.query})}},handleCommand:function(command){"edit"===command?this.editAsset():"move"===command?this.showAssetMoveDialog=!0:"duplicate"===command?this.invokeAssetduplicationDialog(this.asset):"addDepreciation"===command?this.showAddDepreciationForm=!0:"moveToStoreRoom"===command&&this.moveToStoreRoom()},invokeAssetduplicationDialog:function(){this.showAssetDuplicationDialog=!0},closeAssetduplicationDialog:function(){this.showAssetDuplicationDialog=!1},loadAssetMovements:function(){var _this6=this,filters=JSON.stringify({assetId:[{operatorId:36,value:[this.assetId+""]}]});api/* API */.bl.get("/v2/assetMovement/list",{filters:filters}).then((function(_ref6){var error=_ref6.error,data=_ref6.data;!error&&data.stateFlows&&(_this6.stateflows=data.stateFlows)}))},editAsset:function(){var asset=this.asset,category=asset.category,categoryId=category.id;if(!(0,validation/* isEmpty */.xb)(categoryId)){var selectedCategory=this.getAssetCategory(categoryId);(0,validation/* isEmpty */.xb)(selectedCategory)||this.$set(this,"selectedCategory",selectedCategory)}this.$set(this,"canShowAssetCreation",!0)},refreshObj:function(){this.loadAssetsDetails(!0),this.loadAssetMovements(!0)},loadStateflows:function(value){this.stateflows=value},setCurrentSpaceId:function(value){value&&(this.asset.currentSpaceId=value),this.loadAssetsDetails()}}},v1_Overviewvue_type_script_lang_js=Overviewvue_type_script_lang_js,Overview_component=(0,componentNormalizer/* default */.Z)(v1_Overviewvue_type_script_lang_js,render,staticRenderFns,!1,null,"1c69bce8",null)
/* harmony default export */,Overview=Overview_component.exports},
/***/468495:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewAssetDepreciation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/depreciation/NewAssetDepreciation.vue?vue&type=template&id=b2639826&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog","before-close":_vm.closeDialog}},[_c("div",{staticClass:"depreciation-form"},[_c("el-form",{ref:"depreciationForm",staticClass:"fc-form",attrs:{model:_vm.depreciation,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.id?_vm.$t("common.header.edit_depreciation_schedule"):_vm.$t("common.products.new_depreciation_schedule"))+" ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("div",{staticClass:"body-scroll"},[_vm.loading?_c("div",[_vm._l([1,2],(function(index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("span",{staticClass:"lines loading-shimmer width50 mB10"}),_c("span",{staticClass:"lines loading-shimmer width100 mB10 height40"})])],1)],1)})),_vm._l([3,4],(function(index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB10 d-flex"},[_c("el-col",{staticClass:"mR10",attrs:{span:12}},[_c("span",{staticClass:"lines loading-shimmer width50"}),_c("span",{staticClass:"lines loading-shimmer width100 mT13 mB10 height40"})]),4!==index?_c("el-col",{staticClass:"mL10",attrs:{span:12}},[_c("span",{staticClass:"lines loading-shimmer width50"}),_c("span",{staticClass:"lines loading-shimmer width100 mT13 mB10 height40"})]):_vm._e()],1)],1)}))],2):_c("div",[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common.placeholders.enter_depreciation_name")},model:{value:_vm.depreciation.name,callback:function($$v){_vm.$set(_vm.depreciation,"name",$$v)},expression:"depreciation.name"}})],1)],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"depreciationType"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.depreciation_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:_vm.$t("common.placeholders.select_depreciation_type")},model:{value:_vm.depreciation.depreciationType,callback:function($$v){_vm.$set(_vm.depreciation,"depreciationType",$$v)},expression:"depreciation.depreciationType"}},_vm._l(_vm.depreciationTypes,(function(displayName,key){return _c("el-option",{key:key,attrs:{label:displayName,value:Number(key)}})})),1)],1)],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"pR10",attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.period_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{filterable:""},model:{value:_vm.depreciation.frequencyType,callback:function($$v){_vm.$set(_vm.depreciation,"frequencyType",$$v)},expression:"depreciation.frequencyType"}},_vm._l(_vm.frequencyTypes,(function(displayName,key){return _c("el-option",{key:key,attrs:{label:displayName,value:Number(key)}})})),1)],1),_c("el-col",{staticClass:"pL10",attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"frequency"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.period"))+" ")]),_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"number",placeholder:_vm.$t("common._common.enter_period")},model:{value:_vm.depreciation.frequency,callback:function($$v){_vm.$set(_vm.depreciation,"frequency",$$v)},expression:"depreciation.frequency"}})],1)],1)],1),_c("el-row",{staticClass:"mT10"},[_c("el-col",{staticClass:"pR10",attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"startDateFieldId"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.start_date_field"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",placeholder:_vm.$t("common._common.select_start_date")},model:{value:_vm.depreciation.startDateFieldId,callback:function($$v){_vm.$set(_vm.depreciation,"startDateFieldId",$$v)},expression:"depreciation.startDateFieldId"}},_vm._l(_vm.dateFields,(function(dateField,dateFldIdx){return _c("el-option",{key:dateField.id+"-"+dateFldIdx,attrs:{label:dateField.displayName,value:dateField.id}})})),1)],1)],1)],1)],1)])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm()}}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),api=(__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(186466),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(32284)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),utils_field=__webpack_require__(815872),DepreciationConstant=__webpack_require__(793428),NewAssetDepreciationvue_type_script_lang_js={props:["id"],data:function(){return{depreciation:{name:"",depreciationType:1,frequency:null,frequencyType:1,totalPriceFieldId:null,salvagePriceFieldId:null,currentPriceFieldId:null,startDateFieldId:null},loading:!1,saving:!1,dateFields:{},rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"},frequency:{required:!0,message:this.$t("common.header.please_select_period"),trigger:"change"},startDateFieldId:{required:!0,message:this.$t("common._common.please_select_a_start_date"),trigger:"change"}}}},created:function(){var _this=this,promises=[];promises.push(this.$store.dispatch("view/loadModuleMeta","asset")),this.id&&promises.push(this.init()),Promise.all(promises).then((function(){_this.filterOptions(),_this.loading=!1})),this.depreciationTypes=DepreciationConstant/* DEPRECIATION_TYPES */.ik},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{frequencyTypes:function(){return Object.values(DepreciationConstant/* FREQUENCY_TYPES */.ze).reduce((function(res,freq){return res[freq.id]=freq.label,res}),{})}}),methods:{init:function(){var _this2=this;this.loading=!0;var param={id:this.id};return api/* API */.bl.fetchRecord("assetdepreciation",param).then((function(_ref){var assetdepreciation=_ref.assetdepreciation,error=_ref.error;error?_this2.$message.error(error.messsage||"Error Occured"):_this2.depreciation=assetdepreciation}))},filterOptions:function(){var fields=this.$getProperty(this.metaInfo,"fields",null);(0,validation/* isEmpty */.xb)(fields)||(this.dateFields=fields.filter((function(field){return(0,utils_field/* isDateTypeField */.S6)(field)})),this.id||(this.depreciation.totalPriceFieldId=(fields.find((function(field){return"unitPrice"===field.name}))||{}).id,this.depreciation.currentPriceFieldId=(fields.find((function(field){return"currentPrice"===field.name}))||{}).id,this.depreciation.salvagePriceFieldId=(fields.find((function(field){return"salvageAmount"===field.name}))||{}).id,this.depreciation.startDateFieldId=(fields.find((function(field){return"purchasedDate"===field.name}))||{}).id))},submitForm:function(){var _this3=this;this.$refs["depreciationForm"].validate((function(valid){if(!valid)return!1;_this3.id?_this3.updateDepreciation():_this3.createDepreciation()}))},createDepreciation:function(){var _this4=this,param={data:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.depreciation),{},{active:!0})};this.saving=!0,api/* API */.bl.createRecord("assetdepreciation",param).then((function(_ref2){var assetdepreciation=_ref2.assetdepreciation,error=_ref2.error;error?_this4.$message.error(error.messsage||"Error Occured"):(_this4.$emit("onRecordSaved",assetdepreciation),_this4.$message.success(_this4.$t("common.products.depreciation_schedule_created"))),_this4.saving=!1,_this4.closeDialog()}))},updateDepreciation:function(){var _this5=this,param={id:this.id,data:this.depreciation};this.saving=!0,api/* API */.bl.updateRecord("assetdepreciation",param).then((function(_ref3){var error=_ref3.error;error?_this5.$message.error(error.messsage||"Error Occured"):(_this5.$emit("onRecordSaved"),_this5.$message.success(_this5.$t("common.products.depreciation_schedule_updated"))),_this5.saving=!1,_this5.closeDialog()}))},closeDialog:function(){this.$emit("onClose")}}},depreciation_NewAssetDepreciationvue_type_script_lang_js=NewAssetDepreciationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(depreciation_NewAssetDepreciationvue_type_script_lang_js,render,staticRenderFns,!1,null,"b2639826",null)
/* harmony default export */,NewAssetDepreciation=component.exports},
/***/849621:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ScheduleList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/depreciation/ScheduleList.vue?vue&type=template&id=7cc11731
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"depreciation-list"},[_vm.canShowMethod?_c("div",{staticClass:"flex-middle justify-content-space p20 width100 "},[_vm.loading?_c("span",{staticClass:"loading-shimmer width250px",staticStyle:{height:"16px","border-radius":"5px"}}):_c("div",{staticClass:"label-txt-black bold"},[_vm._v(" Depreciation Method - "),_c("span",{staticClass:"fw4"},[_vm._v(_vm._s(_vm.depreciationMethod)+" ")])])]):_vm._e(),_c("div",[_vm.loading?_c("div",{staticClass:"mT8"},_vm._l([1,2,3,4],(function(index){return _c("div",{key:index,staticClass:"d-flex"},_vm._l([0,1],(function(idx){return _c("div",{key:idx,class:["d-flex",0!==idx?"width100":"mL-20"]},[_c("span",{class:["lines loading-shimmer",0===idx?"width210px":"width100"]})])})),0)})),0):_vm.$validation.isEmpty(_vm.depreciationTable)?_c("div",{staticClass:"text-center d-flex flex-direction-column mT30",staticStyle:{color:"#324056"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label f13"},[_vm._v(" No depreciation schedule applied ")])],1):_c("div",{staticClass:"mT8"},[_c("el-table",{ref:"depreciationSchedule",staticClass:"mL15",staticStyle:{width:"98%"},attrs:{data:_vm.depreciationTable,height:"auto",fit:!0,"cell-style":{padding:"10px 20px"},"header-row-class-name":"hide","row-class-name":_vm.rowStyle,"cell-class-name":_vm.cellStyle}},[_c("el-table-column",{attrs:{fixed:"","min-width":"250",prop:"displayName"}}),_vm._l(_vm.depreciationSchedule.length,(function(data,index){return _c("el-table-column",{key:index,attrs:{"min-width":"150",align:"right",prop:"col"+index}})}))],2)],1)])])},staticRenderFns=[],api=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(843843),__webpack_require__(212826),__webpack_require__(169358),__webpack_require__(32284)),validation=__webpack_require__(990260),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),DepreciationConstant=__webpack_require__(793428),ScheduleListvue_type_script_lang_js={props:["asset","selectedDepreciationId","showMethod"],data:function(){return{depreciationSchedule:null,depreciation:null,loading:!1}},created:function(){(0,validation/* isEmpty */.xb)(this.selectedDepreciationId)?this.getDepreciation():this.fetchDepreciation()},computed:{depreciationTable:function(){var _this=this,tableData=[],depreciationSchedule=this.depreciationSchedule,depreciation=this.depreciation,$currency=this.$currency;if(!(0,validation/* isEmpty */.xb)(depreciationSchedule)&&!(0,validation/* isEmpty */.xb)(depreciation)){var listObjKeys=["calculatedDate","openPrice","depreciatedAmount","currentPrice"];listObjKeys.forEach((function(key){var columnData={};"calculatedDate"===key?depreciationSchedule.forEach((function(listData,index){columnData["col".concat(index)]=moment_timezone_default()(listData[key]).tz(_this.$timezone).format("MMM YYYY").toUpperCase()})):"openPrice"===key?(columnData["col0"]=["$","₹"].includes($currency)?"".concat($currency).concat(_this.asset.unitPrice):"".concat(_this.asset.unitPrice).concat($currency),depreciationSchedule.forEach((function(listData,idx){var index=idx+1;index!==depreciationSchedule.length&&(["$","₹"].includes($currency)?columnData["col".concat(index)]="".concat($currency).concat(listData["currentPrice"]):columnData["col".concat(index)]="".concat(listData["currentPrice"]).concat($currency))}))):depreciationSchedule.forEach((function(listData,index){["$","₹"].includes($currency)?columnData["col".concat(index)]="".concat($currency).concat(listData[key]):columnData["col".concat(index)]="".concat(listData[key]).concat($currency)})),tableData.push(columnData)}));var data=["Opening Book Value","Depreciation","Ending Book Value"],_ref=depreciation||{},frequencyTypeEnum=_ref.frequencyTypeEnum;data.splice(0,0,frequencyTypeEnum),data.forEach((function(data,index){tableData[index].displayName=data}))}return tableData},currentDepreciationDate:function(){var depreciation=this.depreciation,frequencyTypes=this.frequencyTypes,today=moment_timezone_default()(new Date),dateToCompare=[];if(!(0,validation/* isEmpty */.xb)(depreciation)){var frequencyType=depreciation.frequencyType;if(frequencyType===frequencyTypes.MONTHLY)dateToCompare.push(today.month());else if([frequencyTypes.QUARTERLY,frequencyTypes.HALFYEARLY].includes(frequencyType)){var quarterDate=today.quarter();frequencyType===frequencyTypes.HALFYEARLY&&(DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.FIRSTHALFYEAR.includes(quarterDate)?quarterDate=1:DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.SECONDHALFYEAR.includes(quarterDate)&&(quarterDate=2)),dateToCompare.push(quarterDate)}dateToCompare.push(today.year())}return dateToCompare},currentDepreciationCol:function(){var currentDepreciationDate=this.currentDepreciationDate,depreciation=this.depreciation,depreciationSchedule=this.depreciationSchedule,frequencyTypes=this.frequencyTypes,currentCol=null;return(0,validation/* isEmpty */.xb)(currentDepreciationDate)||depreciationSchedule.forEach((function(listData,index){var dateRange=moment_timezone_default()(listData["date"]),frequencyType=depreciation.frequencyType,currentDateValue=[];if(frequencyType===frequencyTypes.MONTHLY)currentDateValue.push(dateRange.month());else if([frequencyTypes.QUARTERLY,frequencyTypes.HALFYEARLY].includes(frequencyType)){var quarterDate=dateRange.quarter();frequencyType===frequencyTypes.HALFYEARLY&&(DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.FIRSTHALFYEAR.includes(quarterDate)?quarterDate=1:DepreciationConstant/* QUARTERLY_FREQUENCY */.u5.SECONDHALFYEAR.includes(quarterDate)&&(quarterDate=2)),currentDateValue.push(quarterDate)}currentDateValue.push(dateRange.year()),currentDepreciationDate.toString()===currentDateValue.toString()&&(currentCol=index+1)})),currentCol},frequencyTypes:function(){return Object.keys(DepreciationConstant/* FREQUENCY_TYPES */.ze).reduce((function(res,freq){return res[freq]=DepreciationConstant/* FREQUENCY_TYPES */.ze[freq].id,res}),{})},canShowMethod:function(){var depreciation=this.depreciation,depreciationTable=this.depreciationTable,showMethod=this.showMethod;return!(0,validation/* isEmpty */.xb)(depreciation)&&!(0,validation/* isEmpty */.xb)(depreciationTable)&&showMethod},depreciationMethod:function(){var _this$depreciation$de=this.depreciation.depreciationType,depreciationType=void 0===_this$depreciation$de?1:_this$depreciation$de;return DepreciationConstant/* DEPRECIATION_TYPES */.ik[depreciationType.toString()]}},watch:{selectedDepreciationId:{handler:function(newValue,oldValue){newValue&&newValue!==oldValue&&this.fetchDepreciation()},immediate:!0}},methods:{getDepreciation:function(){var _this2=this,url="v2/asset/depreciation/getForAsset",param={assetId:this.asset.id};this.loading=!0,api/* API */.bl.post(url,param).then((function(_ref2){var data=_ref2.data,error=_ref2.error;if(error)_this2.$message.error(error.messsage||"Error Occured");else if(_this2.depreciation=data.assetdepreciation,(0,validation/* isEmpty */.xb)(_this2.depreciation))_this2.loading=!1;else{var depreciation=_this2.depreciation,_ref3=depreciation||{},_ref3$assetDepreciati=_ref3.assetDepreciationRelList,assetDepreciationRelList=void 0===_ref3$assetDepreciati?[]:_ref3$assetDepreciati;_this2.$emit("appliedDepreciationId",depreciation.id),_this2.$emit("depreciationRel",assetDepreciationRelList[0]),_this2.fetchTableList()}}))},fetchTableList:function(){var _this3=this,url="v2/asset/depreciation/chart",id=this.depreciation.id,params={id:id,assetId:this.asset.id};api/* API */.bl.post(url,params).then((function(_ref4){var data=_ref4.data,error=_ref4.error;error?(_this3.$emit("error",error.message),_this3.canShowMethod&&_this3.$message.error(error.message||"Error Occured"),_this3.depreciationSchedule=null):_this3.depreciationSchedule=data.depreciationList||[],_this3.loading=!1}))},fetchDepreciation:function(){var _this4=this,param={id:this.selectedDepreciationId};this.loading=!0,api/* API */.bl.fetchRecord("assetdepreciation",param).then((function(_ref5){var assetdepreciation=_ref5.assetdepreciation,error=_ref5.error;error?(_this4.$message.error(error.messsage||"Error Occured"),_this4.depreciation=null,_this4.loading=!1):(_this4.depreciation=assetdepreciation,_this4.fetchTableList())}))},rowStyle:function(rowObject){var rowIndex=rowObject.rowIndex;return 0===rowIndex?"bold-row":2===rowIndex?"border-top":void 0},cellStyle:function(cellObject){var rowIndex=cellObject.rowIndex,columnIndex=cellObject.columnIndex,currentDepreciationCol=this.currentDepreciationCol,cellClass="";return columnIndex===currentDepreciationCol&&(cellClass="high-light-background current-border-left-and-right",0===rowIndex?cellClass+=" current-border-top":3===rowIndex&&(cellClass+=" current-border-bottom")),cellClass}}},depreciation_ScheduleListvue_type_script_lang_js=ScheduleListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(depreciation_ScheduleListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ScheduleList=component.exports},
/***/935010:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/44580.js.map