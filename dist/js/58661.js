"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[58661],{
/***/233492:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CanvasSetupMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/typeof.js
var render,staticRenderFns,esm_typeof=__webpack_require__(103336),createForOfIteratorHelper=__webpack_require__(566347),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(397895),__webpack_require__(634338),__webpack_require__(865137),__webpack_require__(300268),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(322462),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(990260)),fabric=__webpack_require__(232777),throttle=__webpack_require__(823493),throttle_default=__webpack_require__.n(throttle),SpacePolygonUtil=__webpack_require__(527230),NewDateHelper=__webpack_require__(105534),Common=__webpack_require__(54278),baseUrl=__webpack_require__(420499),CanvasSetupMixinvue_type_script_lang_js={data:function(){return{animate:null,focusElement:null,selection:!1,defaultZoomLevel:1,centerPoints:null,touchDargEnd:!1,currentZoomLevel:1,activeAll:!1,isCanvasPanning:!1,mapedElementsList:[],allowedCanvasPanSize:1800,
// How much further the canvas extends off screen (along both axis) in px
polygonOptions:{polygonMode:!1,pointArray:new Array,lineArray:new Array,activeLine:null,activeShape:!1},trendPopup:{visible:!1,analyticsConfig:{period:0,mode:1,dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(22),dataPoints:[],hidechartoptions:!0,hidecharttypechanger:!0}},controlPopup:{visible:!1,controlConfig:{title:null,assetId:null,fieldId:null,groupId:null},setVal:null,saving:!1},clickActions:null}},created:function(){this.lastPosX=null,this.lastPosY=null},computed:{formattedZoomLevel:function(){return Math.round(100*this.currentZoomLevel)}},methods:{spaceFocus:function(){if(this.focus){var spaceId=this.focus.spaceId;
// let { canvas } = this
if(spaceId){var element=this.getElementBySpaceId(spaceId);
// let image = this.getFloorPlanImageElement()
// let zoom = canvas.getZoom()
// let elementCenter = element.getCenterPoint()
this.addFocusElement(element),this.resetPanAndZoom()}}},animateFocusElement:function(element){var _this=this;element.animate("radius",100,{onChange:function(){element.radius>90?element.set("opacity",.2):element.radius>80&&element.set("opacity",.5),_this.canvas&&_this.canvas.requestRenderAll()}.bind(this.canvas),onComplete:function(){element.set("radius",10),element.set("opacity",1),_this.canvas&&_this.canvas.requestRenderAll()},duration:2500,easing:fabric.fabric.util.ease.easeInQuad})},focusTheElement:function(element){var _this2=this;this.animateFocusElement(element),clearInterval(this.animate),this.animate=setInterval((function(){_this2.animateFocusElement(element)}),2600)},removeFocusElement:function(){this.focusElement&&(this.canvas.remove(this.focusElement),this.focusElement=null)},addFocusElement:function(element){var canvas=this.canvas;this.removeFocusElement();var centerPoints=element.getCenterPoint();this.focusElement=new fabric.fabric.Circle((0,objectSpread2/* default */.Z)({radius:10,fill:"#42acc914",stroke:"#42acc9",strokeWidth:4,left:centerPoints.x,top:centerPoints.y,originX:"center",originY:"center",floorplan:{objectType:"focus_wave",type:"focus_wave"}},Common/* viewerProps */.My)),canvas.add(this.focusElement),this.focusTheElement(this.focusElement)},loadUsedVariables:function(){var _this3=this;if(this.canvas&&this.graphicUtil){var usedVariables=[];this.canvas.forEachObject((function(obj){var uv=_this3.graphicUtil.getUsedVariables(obj);uv&&uv.length&&usedVariables.push.apply(usedVariables,(0,toConsumableArray/* default */.Z)(uv))})),this.usedVariables=usedVariables}
// if (!this.currentAsset.record) {
//   this.refreshLiveData()
// }
},updateVariable:function(){var _this4=this;if(this.graphicUtil){var vars=this.variables;this.usedVariables&&this.usedVariables.length?vars=vars.filter((function(v){return _this4.usedVariables.indexOf(v.key)>=0})):(vars=vars.filter((function(v){return-1===v.key.indexOf("system.")})),this.canvas.requestRenderAll(),this.loadingState=!1),this.fetchGraphicsData(vars).then((function(){_this4.graphicUtil.updateAllLiveValues(_this4.canvas.getObjects(),{floorplan:_this4.floorplan,variables:vars,liveValues:_this4.liveValues})}))}},fetchGraphicsData:function(paramList,cfShapes){var _this5=this,parameters=[];parameters.push(paramList),cfShapes&&cfShapes.length&&parameters.push(cfShapes);var url="/v2/workflow/getDefaultWorkflowResult",params={defaultWorkflowId:2,paramList:parameters};return new Promise((function(resolve,reject){_this5.$http.post(url,params).then((function(response){if(response.data.result.workflow.returnValue){var graphicsData=response.data.result.workflow.returnValue.conditionalFormatting?response.data.result.workflow.returnValue.data:response.data.result.workflow.returnValue,_loop=function(key){"object"===(0,esm_typeof/* default */.Z)(graphicsData[key])?_this5.liveValues[key]=graphicsData[key]:_this5.liveValues[key]={value:graphicsData[key]&&"object"===(0,esm_typeof/* default */.Z)(graphicsData[key])?graphicsData[key].value:graphicsData[key],unit:paramList.find((function(p){return p.key===key})).unit},resolve()};for(var key in graphicsData)_loop(key);if(_this5.canvas&&response.data.result.workflow.returnValue.conditionalFormatting){var _step,cfMap={},_iterator=(0,createForOfIteratorHelper/* default */.Z)(response.data.result.workflow.returnValue.conditionalFormatting);try{for(_iterator.s();!(_step=_iterator.n()).done;){var cf=_step.value;cfMap[cf.id]=cf}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this5.canvas.forEachObject((function(obj){if(obj.fgraphic&&obj.floorplan.id){var appliedTheme=obj.get("fgraphic").appliedTheme;cfMap[obj.floorplan.id]?(cfMap[obj.floorplan.id].appliedTheme=appliedTheme,obj.get("actualFgraphic")||obj.set("actualFgraphic",obj.get("fgraphic")),obj.set("fgraphic",cfMap[obj.floorplan.id])):obj.get("actualFgraphic")&&obj.set("fgraphic",obj.get("actualFgraphic"))}}))}}})).catch((function(err){err&&reject(err)}))}))},areaProperties:function(){var _this6=this;this.viewMode&&"readings"===this.viewMode?this.addHeatMapScale():this.removeHeatmapScale(),this.canvas.forEachObject((function(obj){if((0,Common/* isSpaceZoneElement */.RO)(obj)){var spaceId=obj.floorplan.spaceId,areas=_this6.areas,focusspaceId=null;_this6.focus&&(focusspaceId=_this6.focus.spaceId);var area=areas.find((function(rt){return rt.spaceId===spaceId}));area&&!(0,validation/* isEmpty */.xb)(area.icons)&&area.icons.length&&(focusspaceId&&area.spaceId===focusspaceId&&_this6.spaceFocus(),area.icons.forEach((function(icon){icon.position?_this6.addMarker(icon.type,obj,icon.position,icon):_this6.addMarker(icon.type,obj,null,icon)})))}}))},updatefloorplanObj:function(selectedobj){var _this7=this;this.canvas.forEachObject((function(obj){selectedobj&&selectedobj.floorplan&&obj.floorplan&&obj.floorplan.id===selectedobj.floorplan.id&&_this7.$set(obj,"floorplan",selectedobj.floorplan)}))},updateObjectProps:function(selectedObj){var floorplanObj={floorplan:this.floorplan,variables:this.variables,liveValues:this.liveValues};this.graphicUtil.updateLiveValue(this.selectedObject,floorplanObj),"image"===this.selectedObject.type&&this.graphicUtil.updateImageFilters(this.selectedObject),this.updatefloorplanObj(selectedObj),this.canvas.requestRenderAll(),this.propertiesvisible=!1,this.pointervisible=!1},updateValueProps:function(){var _this8=this;this.canvas.forEachObject((function(selectedObject){var floorplanObj={floorplan:_this8.floorplan,variables:_this8.variables,liveValues:_this8.liveValues};_this8.graphicUtil.updateLiveValue(selectedObject,floorplanObj),"image"===selectedObject.type&&_this8.graphicUtil.updateImageFilters(selectedObject)}))},getClickActions:function(actions,readings){var actionList=[];if(actions){if(actions.showTrend.enable&&readings&&readings.length&&actionList.push({actionName:"Show Trend",actionType:"showTrend",data:readings}),actions.controlAction.enable){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(actions.controlAction.control_list);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var c=_step2.value;actionList.push({actionName:c.actionName,actionType:"controlAction",data:c})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}if(actions.hyperLink.enable){var _step3,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(actions.hyperLink.link_list);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _c=_step3.value;actionList.push({actionName:_c.actionName,actionType:"hyperLink",data:_c})}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}else readings&&readings.length&&actionList.push({actionName:"Show Trend",actionType:"showTrend",data:readings});return actionList},updateObject:function(updatedObj){var _this9=this;this.canvas.forEachObject((function(object){updatedObj&&updatedObj.floorplan&&object.floorplan&&object.floorplan.id===updatedObj.floorplan.id&&"group"===object.type&&object._objects.forEach((function(rt,index){var fill=rt.fill,sty={fill:fill};_this9.setSpaceZoneProps(object,updatedObj._objects[index].type,sty)}))})),this.$nextTick((function(){_this9.canvas.renderAll()}))},setImageAsbackground:function(){var canvas=this.canvas,fileURL="".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(this.fileId,"?fetchOriginal=true"),paddingLeft=0,paddingright=0;return fabric.fabric.Image.fromURL(fileURL,(function(img){canvas.setBackgroundImage(img,canvas.renderAll.bind(canvas),{scaleX:canvas.width/img.width,scaleY:canvas.height/img.height,left:paddingLeft,top:paddingright})})),this.canvas.renderAll()},removeBg:function(){var canvas=this.canvas;canvas.setBackgroundColor(null,canvas.renderAll.bind(canvas))},setBg:function(){var _this10=this;return(0,Common/* makeBg */.A2)().then((function(bg){return _this10.canvas.backgroundColor=bg,_this10.canvas.renderAll()}))},handleSpaceDraw:function(elemnet){var evt=elemnet.e;!0===evt.altKey?(this.config.isDragging=!0,this.selection=!1,this.config.lastPosX=evt.clientX,this.config.lastPosY=evt.clientY):(elemnet.target&&this.polygonOptions.pointArray.length&&elemnet.target.id==this.polygonOptions.pointArray[0].id&&this.generatePolygon(this.polygonOptions,this.canvas),this.polygonOptions.polygonMode&&SpacePolygonUtil/* addPoint */.c5(this.polygonOptions,elemnet,this.canvas))},activeAction:function(){this.activeAll&&(this.activeAll=!1,this.activeAllObjects())},prepareRightClickMenu:function(){var menuList=[];this._clipboard&&menuList.push({label:"Paste",action:"paste",order:3});var activeObjects=this.canvas&&this.canvas.getActiveObjects()||null;if(activeObjects&&activeObjects.length){
// menuList.push({
//   label: 'Cut',
//   action: 'cut',
//   order: 1,
// })
menuList.push({label:"Copy",action:"copy",order:2}),
// menuList.push({
//   label: 'Duplicate',
//   action: 'duplicate',
//   order: 4,
// })
menuList.push({label:"Delete",action:"delete",order:5}),
// if (activeObjects.length === 1) {
//   menuList.push({
//     label: 'Properties',
//     action: 'showProperties',
//     section: true,
//     order: 20,
//   })
//   if (
//     activeObjects[0].fgraphic &&
//     activeObjects[0].fgraphic.styles &&
//     Object.keys(activeObjects[0].fgraphic.styles).length
//   ) {
//     menuList.push({
//       label: 'Copy Style',
//       action: 'copyStyle',
//       order: 6,
//     })
//   }
//   if (
//     activeObjects[0].fgraphic &&
//     activeObjects[0].fgraphic.conditionalFormatting &&
//     activeObjects[0].fgraphic.conditionalFormatting.length
//   ) {
//     menuList.push({
//       label: 'Copy Conditional Formatting',
//       action: 'copyCF',
//       order: 8,
//     })
//   }
// }
menuList.push({label:"Bring to front",action:"bringToFront",order:11,section:!0}),menuList.push({label:"Send to back",action:"sendToBack",order:12});var _step4,typeMap={},uidMap={},themeMap={},_iterator4=(0,createForOfIteratorHelper/* default */.Z)(activeObjects);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var activeObject=_step4.value;activeObject.fgraphic&&(activeObject.fgraphic.uid&&(uidMap[activeObject.fgraphic.uid]=!0),activeObject.fgraphic.type&&(typeMap[activeObject.fgraphic.type]=!0),activeObject.fgraphic.themeGroup&&(themeMap[activeObject.fgraphic.themeGroup]=!0))}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}this._clipboardStyle&&this.isSameTypeObjects(this._clipboardStyle.type)&&menuList.push({label:"Paste Style",action:"pasteStyle",order:7}),this._clipboardCF&&this.isSameTypeObjects(this._clipboardCF.type)&&menuList.push({label:"Paste Conditional Formatting",action:"pasteCF",order:9}),
// if (Object.keys(themeMap).length === 1) {
//   let themeList = getColorThemes(Object.keys(themeMap)[0]).map(th => {
//     return {
//       label: th.label,
//       value: th.key,
//     }
//   })
//   menuList.push({
//     label: 'Change Theme',
//     action: 'changeTheme',
//     order: 10,
//     section: true,
//     showSubMenu: false,
//     submenu: themeList,
//   })
// }
1===activeObjects.length&&menuList.push({label:"Apply to all the space",action:"applytoallthespace",order:10})}else menuList.push({label:"Select All",action:"selectAll",order:13});return menuList.sort((function(a,b){return a.order-b.order}))},handleMouseLeftClickEvent:function(){},handleMouseMiddlelickEvent:function(){},handleMouseRightClickEvent:function(options){var self=this,isCanvas=options.path.find((function(p){return"floor-plan-builder-container col-10 p10"===p.className}));isCanvas&&(options.preventDefault(),self.contextmenu={top:options.clientY+10,left:options.clientX+10,menu:self.prepareRightClickMenu()},self.$nextTick((function(){if(self.contextmenu&&self.$refs["floorplanContextMenu"]){self.contextmenu.width=self.$refs["floorplanContextMenu"].clientWidth-5,self.contextmenu.height=self.$refs["floorplanContextMenu"].clientHeight;var top=options.clientY+10,left=options.clientX+10,bottomSpace=window.innerHeight-options.clientY,rightSpace=window.innerWidth-options.clientX,divHeight=self.contextmenu.height,divWidth=self.contextmenu.width;divHeight>bottomSpace-40&&(top=options.clientY-divHeight-10),divWidth>rightSpace-20&&(left=options.clientX-divWidth-10),self.contextmenu.top=top,self.contextmenu.left=left}})))},setupMobileEvents:function(){var canvas=this.canvas,self=this;canvas.on("mouse:wheel",(function(opt){self.refresh=!0;var delta=opt.e.deltaY,zoom=canvas.getZoom();zoom+=delta/200,zoom>20&&(zoom=20),zoom<.01&&(zoom=.01),canvas.zoomToPoint({x:opt.e.offsetX,y:opt.e.offsetY},zoom),opt.e.preventDefault(),opt.e.stopPropagation()})),canvas.on("mouse:down",(function(opt){var evt=opt.e;if(this.isDragging=!0,this.selection=!1,self.touchDargEnd=!1,evt.touches&&evt.touches.length){var cliEvent=evt.touches[0];this.lastPosX=cliEvent.clientX,this.lastPosY=cliEvent.clientY}})),canvas.on("mouse:move",(function(opt){if(this.isDragging){self.touchDargEnd=!0;var e=opt.e;if(e.touches&&e.touches.length){var cliEvent=e.touches[0];self.refresh=!0,this.viewportTransform[4]+=cliEvent.clientX-this.lastPosX,this.viewportTransform[5]+=cliEvent.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=cliEvent.clientX,this.lastPosY=cliEvent.clientY}}})),canvas.on("mouse:up",(function(){this.isDragging&&(self.refresh=!0,self.onCanvasPanEnd())})),this.isDragging=!1},CenterCoord:function(){var canvas=this.canvas;return{x:fabric.fabric.util.invertTransform(canvas.viewportTransform)[4]+canvas.width/2,y:fabric.fabric.util.invertTransform(canvas.viewportTransform)[5]+canvas.height/2}},setCenterCorinate:function(){this.canvas.absolutePan(new fabric.fabric.Point(0,0))},resetPanAndZoom:function(){this.defaultZoomLevel?this.canvas.setZoom(this.defaultZoomLevel):this.canvas.setZoom(1),this.fitToCenter(),this.dragMode=!1,this.canvas.trigger("moved"),this.refresh=!1,this.touchDargEnd=!1},panMode:function(){var STATE_IDLE="idle",STATE_PANNING="panning";fabric.fabric.Canvas.prototype.toggleDragMode=function(dragMode){var lastClientX,lastClientY,_this11=this,state=STATE_IDLE;
// Remember the previous X and Y coordinates for delta calculations
// We're entering dragmode
dragMode&&this.isDragging?(
// Discard any active object
this.discardActiveObject(),
// Set the cursor to 'move'
this.defaultCursor="grab",
// Loop over all objects and disable events / selectable. We remember its value in a temp variable stored on each object
this.forEachObject((function(object){object.prevEvented=object.evented,object.prevSelectable=object.selectable,object.evented=!1,object.selectable=!1})),
// Remove selection ability on the canvas
this.selection=!1,
// When MouseUp fires, we set the state to idle
this.on("mouse:up",(function(){state=STATE_IDLE})),
// When MouseDown fires, we set the state to panning
this.on("mouse:down",(function(e){state=STATE_PANNING,lastClientX=e.e.clientX,lastClientY=e.e.clientY})),
// When the mouse moves, and we're panning (mouse down), we continue
this.on("mouse:move",(function(e){if(state===STATE_PANNING&&e&&e.e){
// let delta = new fabric.Point(e.e.movementX, e.e.movementY); // No Safari support for movementX and movementY
// For cross-browser compatibility, I had to manually keep track of the delta
// Calculate deltas
var deltaX=0,deltaY=0;lastClientX&&(deltaX=e.e.clientX-lastClientX),lastClientY&&(deltaY=e.e.clientY-lastClientY),
// Update the last X and Y values
lastClientX=e.e.clientX,lastClientY=e.e.clientY;var delta=new fabric.fabric.Point(deltaX,deltaY);_this11.relativePan(delta),_this11.trigger("moved")}}))):(
// When we exit dragmode, we restore the previous values on all objects
this.forEachObject((function(object){object.evented=void 0!==object.prevEvented?object.prevEvented:object.evented,object.selectable=!1})),
// Reset the cursor
this.defaultCursor="default",this.trigger("moved"))}},openSelectedReadingInAnalytics:function(){this.trendPopup.analyticsConfig.dataPoints&&this.trendPopup.analyticsConfig.dataPoints.length&&(this.trendPopup.visible=!1,this.jumpReadingsToAnalytics(this.trendPopup.analyticsConfig.dataPoints,null,null,null))},onSetControlValue:function(){this.$account&&321===this.$account.org.id&&setTimeout((function(){
// this.refreshLiveData()
}),2e3),this.resetControlValue()},resetControlValue:function(){this.controlPopup={visible:!1,controlConfig:{title:null,assetId:null,fieldId:null,groupId:null},setVal:null,saving:!1}},handleClickAction:function(action){var selfHost=window.location.protocol+"//"+window.location.host;if("showTrend"===action.actionType)this.trendPopup.analyticsConfig.dataPoints=action.data,this.trendPopup.visible=!0;else if("controlAction"===action.actionType)this.controlPopup.controlConfig.title=action.data.actionName,"control_group"===action.data.type?(this.controlPopup.controlConfig.groupId=action.data.groupId,this.controlPopup.controlConfig.assetId=null,this.controlPopup.controlConfig.fieldId=null):(action.data.assetCategoryId&&this.currentAsset.record&&this.currentAsset.record.category.id===action.data.assetCategoryId&&this.currentAsset.id?this.controlPopup.controlConfig.assetId=this.currentAsset.id:this.controlPopup.controlConfig.assetId=action.data.assetId,this.controlPopup.controlConfig.fieldId=action.data.fieldId,this.controlPopup.controlConfig.groupId=null),this.controlPopup.visible=!0;else if("hyperLink"===action.actionType&&(action.data.url||action.data.id)){var url=this.graphicUtil.applyLiveVariables(action.data.url,!0);if("graphics"===action.data.linkType&&(url=selfHost+"/app/em/graphics/view/"+action.data.id,action.data.assetId&&(url+="?assetId="+action.data.assetId)),"self"===action.data.target)if(url.startsWith(selfHost)){this.$helpers.isLicenseEnabled("NEW_LAYOUT")&&url.startsWith(selfHost+"/app/em/newdashboard/")&&(url=url.replace(selfHost+"/app/em/newdashboard/",selfHost+"/app/home/dashboard/"));var appUrl=url.replace(selfHost,"");this.$router.push({path:appUrl})}else window.location.href=url;else"popup"===action.data.target?this.$popupView.openPopup({type:action.data.linkType,url:action.data.url,alt:"",dashboardId:"",reportId:"",graphicsId:action.data.id,assetId:action.data.assetId,target:action.data.target}):window.open(url,"_blank")}this.clickActions=null},openAssetGraphics:function(assetId,assetCategoryId){this.$popupView.openPopup({type:"graphics",url:null,alt:"",dashboardId:"",reportId:"",graphicsId:null,assetId:assetId,target:null,graphicsContext:{assetId:assetId,assetCategoryId:assetCategoryId}})},handleshapesAction:function(e){if(e&&e.target&&(0,Common/* isElement */.kK)(e.target,"button_group")){var self=this;if(e.target.floorplan.spaceMappingBindingVariable){var top=e.e.offsetY+20,left=e.e.offsetX+20,bottomSpace=window.innerHeight-e.e.clientY,divHeight=260;return divHeight>bottomSpace-40&&(top=e.e.offsetY-divHeight),void(self.selectedSpaceInfo={top:top,left:left,space:self.liveValues[e.target.floorplan.spaceMappingBindingVariable]&&self.liveValues[e.target.floorplan.spaceMappingBindingVariable].value&&self.liveValues[e.target.floorplan.spaceMappingBindingVariable].value.length?self.liveValues[e.target.floorplan.spaceMappingBindingVariable].value[0]:null})}var readingVariables=[];if(e.target.floorplan.formatText){var formatText=e.target.floorplan.formatText,matched=formatText.match(/[^\\${}]+(?=\})/g);matched&&matched.length&&readingVariables.push.apply(readingVariables,(0,toConsumableArray/* default */.Z)(matched))}e.target.floorplan.enableStateBinding&&readingVariables.push(e.target.floorplan.stateBindingVariable),e.target.floorplan.enableAnimateBinding&&readingVariables.push(e.target.floorplan.animateBindingVariable);var dataPoints=[];if(readingVariables&&readingVariables.length){var _step5,_iterator5=(0,createForOfIteratorHelper/* default */.Z)(readingVariables);try{var _loop2=function(){var readingVar=_step5.value,varObj=self.variables.find((function(v){return v.key===readingVar}));if(varObj){var readingObj=self.currentAsset.readings?self.currentAsset.readings.find((function(rd){return rd.name===varObj.select})):null,fieldId=null;readingObj?fieldId=readingObj.id:self.liveValues[readingVar]&&(fieldId=self.liveValues[readingVar].fieldid),fieldId&&dataPoints.push({parentId:varObj.parentId,yAxis:{fieldId:fieldId,aggr:3}})}};for(_iterator5.s();!(_step5=_iterator5.n()).done;)_loop2()}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}var clickActions=self.getClickActions(e.target.floorplan.actions,dataPoints);clickActions&&clickActions.length&&(1===clickActions.length?self.handleClickAction(clickActions[0]):self.clickActions={top:e.e.offsetY+30,left:e.e.offsetX+20,actions:clickActions})}},setupViewerEvents:function(){var canvas=this.canvas,self=this;canvas.on("mouse:down",(function(opt){var evt=opt.e;
// if (evt.altKey === true) {
this.isDragging=!0,self.refresh=!0,this.selection=!1,this.lastPosX=evt.clientX,this.lastPosY=evt.clientY,self.handleshapesAction(opt)})),canvas.on("mouse:move",(function(opt){var e=opt.e,xDiff=Math.abs(this.lastPosX-e.clientX),yDiff=Math.abs(this.lastPosY-e.clientY),pixelDiff=xDiff>1&&yDiff>1;//  make pixel diffrence morethan one for dragging
this.isDragging&&pixelDiff&&(this.viewportTransform[4]+=e.clientX-this.lastPosX,this.viewportTransform[5]+=e.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=e.clientX,this.lastPosY=e.clientY,self.spaceDetailsPopup=!1,self.spaceButtonPopup=!1)})),canvas.on("mouse:up",(function(){this.isDragging&&(self.refresh=!0,self.onCanvasPanEnd()),this.isDragging=!1,this.selectedElement=null}))},setUpEvents:function(){var canvas=this.canvas,self=this;canvas.on("mouse:down",(function(evt){self.contextmenu&&self.$refs["floorplanContextMenu"]&&(self.contextmenu=null),self.activeAction(evt),self.handleSpaceDraw(evt)})),this.canvas.on("mouse:move",(function(elemnet){if(self.config.isDragging){var e=elemnet.e;this.viewportTransform[4]+=e.clientX-self.config.lastPosX,this.viewportTransform[5]+=e.clientY-self.config.lastPosY,this.requestRenderAll(),self.config.lastPosX=e.clientX,self.config.lastPosY=e.clientY}else if(self.polygonOptions.activeLine&&"line"==self.polygonOptions.activeLine.class){var pointer=self.canvas.getPointer(elemnet.e);self.polygonOptions.activeLine.set({x2:pointer.x,y2:pointer.y});var points=self.polygonOptions.activeShape.get("points");points[self.polygonOptions.pointArray.length]={x:pointer.x,y:pointer.y},self.polygonOptions.activeShape.set({points:points}),self.canvas.renderAll()}})),this.canvas.on("drop",(function(options){var pointer=this.getPointer(event);return self.handleDrop(options,pointer),!1}),!1)},setUpImageViewObjEvents:function(){
// view mode image events
},setUpImageObjEvents:function(image){var _this12=this;image.on("mousedblclick",(function(){_this12.activeAll=!0,_this12.activeAllObjects(),_this12.polygonOptions.polygonMode&&_this12.generatePolygon(_this12.polygonOptions,_this12.canvas)}))},activeAllObjects:function(){var canvas=this.canvas,activeAll=this.activeAll;canvas.forEachObject((function(object){"floor_plan_image"===object.type&&(object.selectable=activeAll)})),canvas.discardActiveObject();var sel=new fabric.fabric.ActiveSelection(canvas.getObjects(),{canvas:canvas});canvas.setActiveObject(sel),canvas.requestRenderAll()},setSpaceZoneLabel:function(element){var _this13=this,type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",text=arguments.length>2?arguments[2]:void 0;element.forEachObject((function(object){object.type===type&&_this13.$set(object,"text",text)}))},setSpaceZoneStyles:function(element,type,style){element.forEachObject((function(object){object.type===type&&Object.keys(style).forEach((function(rl){object.set(rl,style[rl])}))}))},setSpaceZoneProps:function(element,type,style){element.forEachObject((function(object){object.type===type&&Object.keys(style).forEach((function(rl){object.set(rl,style[rl])}))})),this.canvas.requestRenderAll()},setSpaceZoneFloorProps:function(element,type,style){element.forEachObject((function(object){object.floorplan.type===type&&Object.keys(style).forEach((function(rl){object.set(rl,style[rl])}))})),this.canvas.requestRenderAll()},handleSpaceZoneHoverEvents:function(spaceZone){spaceZone.hoverCursor="pointer";var hoverStyles={opacity:.8},texthoverStyles={opacity:1};
// setInterval(() => {
//   spaceZone.animate('opacity', spaceZone.opacity === 1 ? 0.5 : 1, {
//     onChange: (() => {
//       this.canvas.requestRenderAll()
//     }).bind(this.canvas),
//     duration: 100,
//     easing: fabric.util.ease.easeOutSine,
//   })
// }, 800)
this.setSpaceZoneProps(spaceZone,"polygon",hoverStyles),this.setSpaceZoneProps(spaceZone,"text",texthoverStyles),(0,validation/* isEmpty */.xb)(this.selectedArea)||this.selectedArea[0].tooltip&&(
// this.spaceDetailsPopup = false
this.tooltipPopup=!0)},handleSpaceZoneMouseOutEvents:function(spaceZone){var mouseOutStyles={opacity:.4},texthoverStyles={opacity:1,fontSize:"15"};this.setSpaceZoneProps(spaceZone,"polygon",mouseOutStyles),this.setSpaceZoneProps(spaceZone,"text",texthoverStyles)},setupSpaceZoneEvents:function(spaceZone){var _this14=this;spaceZone.on("mouseover",(function(elemnet){434==window.orgId&&_this14.getSelectedArea(elemnet),(0,validation/* isEmpty */.xb)(_this14.selectedArea)||_this14.selectedArea[0].tooltip&&(_this14.selectedElement=elemnet),_this14.handleSpaceZoneHoverEvents(spaceZone)})),spaceZone.on("mouseout",(function(elemnet){
// this.tooltipPopup = false
(0,validation/* isEmpty */.xb)(_this14.selectedArea)||_this14.selectedArea[0].tooltip&&(_this14.selectedElement=elemnet),_this14.handleSpaceZoneMouseOutEvents(spaceZone)}))},setuppointerEvents:function(marker){var _this15=this;marker.on("mouseover",(function(element){element.target.set("hoverCursor","pointer"),_this15.selectedElement=element,_this15.pointerpopup=!0})),marker.on("mouseout",(function(){_this15.selectedElement=null,_this15.pointerpopup=!1}))},setelementEvents:function(marker){var _this16=this;marker.on("mouseover",(function(element){element.target.set("hoverCursor","pointer"),_this16.selectedElement=element,_this16.elementpopup=!0})),marker.on("mouseout",(function(){_this16.selectedElement=null,_this16.elementpopup=!1}))},setupMarkerEvents:function(marker){var _this17=this;marker.on("mouseover",(function(){marker.hoverCursor="pointer"})),marker.on("mouseout",(function(){_this17.handleSpaceZoneMouseOutEvents(marker)}))},getListofSpaceElemnts:function(element){this.mapedElementsList=[];var target=element.target;target&&target.floorplan&&target.floorplan.spaceId&&(this.mapedElementsList=this.getListOfMappedElemnet("button_group",target.floorplan.spaceId))},setUpViwerObjectEvents:function(obj){var _this18=this;(0,Common/* isElement */.kK)(obj,"floor_plan_image")&&this.setUpImageViewObjEvents(obj),(0,Common/* isElement */.kK)(obj,"space_zone_group")&&this.setupSpaceZoneEvents(obj),(0,Common/* isElement */.kK)(obj,"marker")&&this.setupMarkerEvents(obj),(0,Common/* isElement */.kK)(obj,"pointer_group")&&(this.applyPointerStyles(obj),this.setuppointerEvents(obj)),(0,Common/* isElement */.kK)(obj,"element_group")&&
// this.applyPointerStyles(obj)
this.setelementEvents(obj),obj.on("mousedown",(function(element){var target=element.target;_this18.getSelectedArea(element),(0,validation/* isEmpty */.xb)(target)||((0,Common/* isElement */.kK)(target,"marker")&&(0,Common/* isObjectType */.lp)(target,"control")&&(0,Common/* isMappedElement */.ej)(target,"marker")&&343!==window.orgId?(_this18.selectedElement=element,_this18.selectPopUp()):(0,Common/* isElement */.kK)(target,"space_zone_group")&&(0,Common/* isMappedElement */.ej)(target)?(_this18.selectedElement=element,[343,410,155].includes(window.orgId)?(_this18.getListofSpaceElemnts(element),_this18.spaceButtonPopup=!0):_this18.spaceDetailsPopup=!0):(0,Common/* isElement */.kK)(target,"pointer_group")?(_this18.selectedElement=element,_this18.pointerDetailsPopup=!0):(_this18.setPointerDefaultStyles(),_this18.selectedElement=null,_this18.spaceDetailsPopup=!1,_this18.pointerDetailsPopup=!1,_this18.spaceButtonPopup=!1))}))},closePointerdetailPopup:function(){this.selectedElement=null,this.pointerDetailsPopup=!1},setPointerDefaultStyles:function(){},selectPopUp:function(){if(this.viewMode){var canvasMeta={width:this.canvas.width,height:this.canvas.height},data={floorPlan:this.floorPlan,element:this.selectedElement,spaceList:this.spaceList,area:this.selectedArea,icons:this.selectedArea[0].icons,canvasMeta:canvasMeta};switch(this.$refs["marker-actions"]&&this.$refs["marker-actions"].executeAction(this.viewMode,data),this.viewMode){case"default":break;case"maintenance":break;case"control_points":this.floorActionVisible=!0;break;case"reservation":break;case"spacecategory":break;case"asset":break;case"readings":break}}else this.isEdit||(this.floorActionVisible=!0)},handleSpaceZoneObject:function(){},setUpObjectEvents:function(obj){var _this19=this;(0,Common/* isElement */.kK)(obj,"floor_plan_image")?this.setUpImageObjEvents(obj):(obj.on("object:selected",(function(element){var object=element.target;_this19.canvas.sendToBack(object)})),obj.on("moved",(function(element){_this19.handeleObjectMove(element)})),obj.on("drop",(function(){})),obj.on("mousedown",(function(element){var target=element.target;(0,validation/* isEmpty */.xb)(target)||((0,Common/* isElement */.kK)(target,"space_zone_group")&&(0,Common/* isNotMappedElement */.jh)(target)?(_this19.selectedElement=element,_this19.floorMapVisible=!0):(0,Common/* isElement */.kK)(target,"marker")&&(0,Common/* isObjectType */.lp)(target,"control")&&(0,Common/* isMappedElement */.ej)(target,"marker")&&343!==window.orgId&&(_this19.selectedElement=element,_this19.selectPopUp()))})),obj.on("mousedblclick",(function(element){var target=element.target;_this19.selectedObject=null,(0,validation/* isEmpty */.xb)(target)||((0,Common/* isElement */.kK)(target,"space_zone_group")&&(0,Common/* isMappedElement */.ej)(target)?(_this19.selectedObject=obj,_this19.objectSettingVisible=!0):(0,Common/* isElement */.kK)(target,"marker")&&(0,Common/* isObjectType */.lp)(target,"control")&&(0,Common/* isMappedElement */.ej)(target,"marker")&&[343,410].includes(window.orgId)||(0,Common/* isElement */.kK)(target,"button_group")?(_this19.selectedObject=obj,_this19.propertiesvisible=!0):(0,Common/* isElement */.kK)(target,"pointer_group")&&(_this19.selectedObject=obj,_this19.pointervisible=!0))})))},keyupHandler:function(event){27===event.keyCode&&(SpacePolygonUtil/* deletePolygonArray */.JG(this.polygonOptions,this.canvas),this.polygonOptions={polygonMode:!1,pointArray:new Array,lineArray:new Array,activeLine:null,activeShape:!1})},setUpViewerProps:function(obj){obj&&Object.keys(Common/* viewerProps */.My).forEach((function(rt){obj.set(rt,Common/* viewerProps */.My[rt])}))},setUpEditorProps:function(obj){((0,Common/* isElement */.kK)(obj,"floor_plan_image")||(0,Common/* isElement */.kK)(obj,"space_zone_group"))&&Object.keys(Common/* EditorProps */.nY).forEach((function(rt){obj.set(rt,Common/* EditorProps */.nY[rt])}))},unLockProps:function(){this.canvas.forEachObject((function(obj){((0,Common/* isElement */.kK)(obj,"floor_plan_image")||(0,Common/* isElement */.kK)(obj,"space_zone_group"))&&Object.keys(Common/* UnlockProps */.Tx).forEach((function(rt){obj.set(rt,Common/* UnlockProps */.Tx[rt])}))}))},setupCommonObjProps:function(obj){
// if (isElement(obj, 'floor_plan_image')) {
//   obj.selectable = false
// } else if (isElement(obj, 'space_zone_group')) {
//   obj.selectable = false
// }
Object.keys(Common/* tempProps */.UY).forEach((function(rt){obj.set(rt,Common/* tempProps */.UY[rt]),obj.selectable=!1}))},handeleObjectMove:function(element){var target=element.target;(0,Common/* isMarkerElement */.H4)(target)},handleRightClickAction:function(menu,context,subMenu){"selectAll"===menu.action?this.selectAll():"showProperties"===menu.action||"changeTheme"===menu.action||"cut"===menu.action||("copy"===menu.action?this.copy():"paste"===menu.action?this.paste({left:10*Math.ceil(context.left/10),top:10*Math.ceil(context.top/10)}):"duplicate"===menu.action||("delete"===menu.action?this.deleteActiveObject():"copyStyle"===menu.action||"pasteStyle"===menu.action||"copyCF"===menu.action||"pasteCF"===menu.action||("bringToFront"===menu.action?this.bringToFront():"sendToBack"===menu.action?this.sendToBack():"applytoallthespace"===menu.action&&this.applyMarker()))),this.contextmenu=null},handleAction:function(action,mode,data){this.refresh=!0,this.canvas.requestRenderAll(),"layer"===action?this.handleLayer():"addPolygon"===action?this.addPolygon():"zoomIn"===action?this.zoomIn():"zoomOut"===action?this.zoomOut():"rotateRight"===action?this.rotateRight():"rotateLeft"===action?this.rotateLeft():"goRight"===action?this.goRight():"goLeft"===action?this.goLeft():"goUp"===action?this.goUp():"goDown"===action?this.goDown():"resetPanAndZoom"===action?this.resetPanAndZoom():"enableMarkerValue"===action?this.handleMarkerValue():"unlock"===action?this.unLockProps():"viewMode"===action?this.$emit("view",mode,data):"addButton"===action?this.addButton():"addPointer"===action?this.addPointer():"addUtilMarker"===action&&this.addUtilMarker(mode)},handleDrag:function(obj){var self=this;if(!(0,validation/* isEmpty */.xb)(obj))if((0,Common/* isVariable */.cG)(obj))self.currentDragElement=self.getTextElement(obj);else if(obj&&obj.object_id){var shape=(0,Common/* findShape */._N)(obj.object_id);self.getShape(shape,(function(obj){self.currentDragElement=obj}))}},addViewerMarkers:function(target,pointer,icon){var currentDragElement=this.currentDragElement,canvas=this.canvas,x=pointer.x,y=pointer.y;if(pointer&&(x=pointer.x,y=pointer.y),currentDragElement.floorplan.uid){var width=currentDragElement.get("width"),height=currentDragElement.get("height");width&&(x=x-width/2<0?0:x-width/2),height&&(y=y-height/2<0?0:y-height/2)}if(currentDragElement.set((0,objectSpread2/* default */.Z)({left:10*Math.ceil(x/10),top:10*Math.ceil(y/10)},Common/* viewerProps */.My)),!(0,validation/* isEmpty */.xb)(currentDragElement)&&!(0,validation/* isEmpty */.xb)(target)){var spaceId=this.getSpaceId(target);if(currentDragElement.floorplan.spaceId=spaceId,icon&&icon.value&&icon.value.value){var label="".concat(icon.value.value," ").concat(icon.value.unit);this.applyCustomeMarkerValue(currentDragElement,label)}canvas.add(currentDragElement),this.setUpObjectEvents(currentDragElement)}},addHeatMapScale:function(){var canvas=this.canvas,leagend=this.leagend,layout=leagend.layout,rect1=new fabric.fabric.Rect((0,objectSpread2/* default */.Z)({left:layout.width/4,top:layout.height,width:layout.width/2,height:10,fill:"#ffda4f",floorplan:{id:"heatmapBar",objectType:"heatmapBar",type:"heatmapBar"}},Common/* viewerProps */.My));rect1.setGradient("fill",{type:"linear",x1:0,y1:0,x2:rect1.width,y2:0,colorStops:{0:"#1b7f01",.2:"#7fc001",.4:"#ffff01",.6:"#fb8002",.8:"#fb8002",1:"#fa1000"}}),canvas.add(rect1),this.setUpObjectEvents(rect1)},removeHeatmapScale:function(){this.canvas.forEachObject((function(){}))},addMarkers:function(target,pointer){var currentDragElement=this.currentDragElement,canvas=this.canvas,x=pointer.x,y=pointer.y;if(pointer&&(x=pointer.x,y=pointer.y),currentDragElement.floorplan.uid){var width=currentDragElement.get("width"),height=currentDragElement.get("height");width&&(x=x-width/2<0?0:x-width/2),height&&(y=y-height/2<0?0:y-height/2)}if(currentDragElement.set({left:10*Math.ceil(x/10),top:10*Math.ceil(y/10)}),!(0,validation/* isEmpty */.xb)(currentDragElement)&&!(0,validation/* isEmpty */.xb)(target)){var spaceId=this.getSpaceId(target);currentDragElement.floorplan.spaceId=spaceId,canvas.add(currentDragElement),this.setUpObjectEvents(currentDragElement)}},applyMarker:function(){var object=this.canvas.getActiveObjects();if(object&&object.length){var activeObject=object[0],floorplan=activeObject.floorplan;this.handleLayerInfo(floorplan)}},handleVariables:function(elemnet,pointer){var currentDragElement=this.currentDragElement,canvas=this.canvas,e=elemnet.e,x=e.layerX-canvas.viewportTransform[4],y=e.layerY-canvas.viewportTransform[5];pointer&&(x=pointer.x,y=pointer.y);var width=currentDragElement.get("width"),height=currentDragElement.get("height");width&&(x=x-width/2<0?0:x-width/2),height&&(y=y-height/2<0?0:y-height/2),currentDragElement.set({left:10*Math.ceil(x/10),top:10*Math.ceil(y/10)}),(0,validation/* isEmpty */.xb)(currentDragElement)||(this.canvas.add(currentDragElement),this.canvas.requestRenderAll())},handleMarkerElement:function(elemnet,pointer){var currentDragElement=this.currentDragElement,canvas=this.canvas,target=elemnet.target,e=elemnet.e,x=e.layerX-canvas.viewportTransform[4],y=e.layerY-canvas.viewportTransform[5];if(pointer&&(x=pointer.x,y=pointer.y),currentDragElement.floorplan.uid){var width=currentDragElement.get("width"),height=currentDragElement.get("height");width&&(x=x-width/2<0?0:x-width/2),height&&(y=y-height/2<0?0:y-height/2)}if(currentDragElement.set({left:10*Math.ceil(x/10),top:10*Math.ceil(y/10)}),(0,validation/* isEmpty */.xb)(currentDragElement)||(0,validation/* isEmpty */.xb)(target))(0,validation/* isEmpty */.xb)(currentDragElement)||this.canvas.add(currentDragElement);else{var spaceId=this.getSpaceId(target);currentDragElement.floorplan.spaceId=spaceId,[343,410].includes(window.orgId)&&(this.setObjectActions(currentDragElement),this.setUpObjectEvents(currentDragElement)),this.canvas.add(currentDragElement)}},getSpaceId:function(elemnet){return(0,Common/* isMappedElement */.ej)(elemnet)?elemnet.floorplan.spaceId:null},handleLayerInfo:function(data){this.layer=data.layer,this.sublayer=data.sublayer,this.populateLayerInfo(data)},handleDrop:function(elemnet,pointer){var currentDragElement=this.currentDragElement;(0,Common/* isMarkerElement */.H4)(currentDragElement)?this.handleMarkerElement(elemnet,pointer):(0,Common/* isVariableElement */.b2)(currentDragElement)&&this.handleVariables(elemnet,pointer)},spaceIdMap:function(target){var currentDragElement=this.currentDragElement;target.floorplan.id&&this.canvas&&(this.canvas.forEachObject((function(obj){var floorplan=obj.floorplan;!(0,validation/* isEmpty */.xb)(floorplan)&&floorplan.id&&floorplan.id===target.floorplan.id&&(floorplan.spaceId=currentDragElement.floorplan.spaceId)})),this.canvas.renderAll())},getTextElement:function(obj){var layerInfo={layer:this.layer,sublayer:this.sublayer},textElm=new fabric.fabric.Text("test",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({floorplan:{enableTextBinding:!0,formatText:obj.label+": ${"+obj.key+"}",blink:!1,hide:!1,animateEffect:"none",id:(0,Common/* getUniqueId */.Ki)(),type:obj.type,objectType:obj.objectType,variableType:obj.variableType,variableObj:obj,styles:{fill:"",textBackgroundColor:"",backgroundColor:"",fontFamily:"Aktiv-Grotesk",textAlign:"",lineHeight:null,charSpacing:null,fontWeight:"",fontStyle:""}}},layerInfo),{},{fill:"#0c0c0c",scaleX:.3,scaleY:.3}));return textElm},setupBackground:function(){var objects=this.canvas.getObjects();if((0,validation/* isEmpty */.xb)(objects)||objects.forEach((function(obj){return!(0,Common/* isElement */.kK)(obj,"floor_plan_image")}))){var self=this,layerInfo={layer:this.layer,sublayer:this.sublayer},fileURL="".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(this.fileId,"?fetchOriginal=true");fabric.fabric.Image.fromURL(fileURL,(function(imgObj){var filters={brightness:null,contrast:null,saturation:null,hue:null,noise:null,pixelate:null,blur:null},obj=imgObj.set({floorplan:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({objectType:"image",type:"floor_plan_image",blink:!1,hide:!1,animateEffect:"none",filters:filters},layerInfo),{},{id:(0,Common/* getUniqueId */.Ki)()}),hoverCursor:"pointer",left:50,top:50,hasRotatingPoint:!1,lockRotation:!0,hasControls:!1,hasBorders:!1,lockScalingX:!0,lockScalingY:!0,index:0,selectable:!1});self.leagend.fitToscreen&&self.setFloorPlanDimentions(imgObj),self.setUpImageObjEvents(obj),self.canvas.add(obj)}))}this.canvas.renderAll()},setFloorPlanDimentions:function(imgObj){var imageLayout=this.leagend.imageLayout,canvas=this.canvas;if(imageLayout){var width=canvas.width-100,height=canvas.height-100;imgObj.scaleToHeight(height),imgObj.scaleToWidth(width)}},setDimensions:function(){var container=this.$refs["floorPlanContainer"];if(!(0,validation/* isEmpty */.xb)(container)){
// let { imageLayout } = this.leagend
var width=container.offsetWidth,height=container.offsetHeight;
// if (!isEmpty(imageLayout)) {
//   height = imageLayout.height
//   width = imageLayout.width
// }
this.canvas.setHeight(height),this.canvas.setWidth(width),this.canvas.calcOffset(),this.canvas.renderAll()}},setFitDimensions:function(){var container=this.$refs["floorPlanContainer"];(0,validation/* isEmpty */.xb)(container)||(this.canvas.setHeight(container.offsetHeight),this.canvas.setWidth(container.offsetWidth),this.canvas.calcOffset(),this.canvas.renderAll())},fitToFloormapViewResolution:function(){},fitToResolution:function(){var container=this.$refs["floorPlanContainer"];if(!(0,validation/* isEmpty */.xb)(container)){var width=1200,height=1e3;if(this.leagend&&this.leagend.layout){var layout=this.leagend.layout;width=layout.width,height=layout.height}var widthChanges=container.offsetWidth/width,heightChanges=container.offsetHeight/height,z=widthChanges>heightChanges?heightChanges:widthChanges;z>.4&&z<1&&(this.defaultZoomLevel=z,this.canvas.setZoom(z),this.setCenterCorinate(),this.canvas.requestRenderAll(),this.onCanvasPanEnd())}},fitToCenter:function(){this.setCenterCorinate(),this.onCanvasPanEnd();var image=this.getFloorPlanImageElement(),elementCenter=(0,Common/* getCoordinatesCenter */.wr)(image.getCoords()),cnco=this.CenterCoord(),x=elementCenter.x-cnco.x,y=elementCenter.y-cnco.y;
// let elementCenter = image.getCenterPoint()
image?(this.centerPoints={x:x,y:y},this.canvas.absolutePan(this.centerPoints)):this.canvas.absolutePan(new fabric.fabric.Point(0,0)),this.canvas.requestRenderAll()},setInitialZoom:function(){var zoom=(0,validation/* isEmpty */.xb)(this.diagramJson&&this.diagramJson.zoom)?.75:this.diagramJson.zoom;this.canvas.setZoom(zoom),this.currentZoomLevel=zoom},adjustZoom:function(){var _this20=this,zoomIn=arguments.length>0&&void 0!==arguments[0]&&arguments[0],delta=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.125,zoom=this.canvas.getZoom();zoomIn?zoom+=delta:zoom-=delta,zoom>1.75&&(zoom=1.75),zoom<.01&&(zoom=.01),this.canvas.setZoom(zoom),this.currentZoomLevel=zoom,this.$nextTick((function(){return _this20.autoSave()}))},fitToScreen:function(){var delta=0,edgeBuffer=140,canvas=this.canvas,zoom=canvas.getZoom(),canvasH=canvas.getHeight()-edgeBuffer,canvasW=canvas.getWidth()-edgeBuffer,objs=canvas.getObjects(),g=new fabric.fabric.Group(objs),_g$getBoundingRect=g.getBoundingRect(),width=_g$getBoundingRect.width,height=_g$getBoundingRect.height;g.ungroupOnCanvas(),width*=zoom,height*=zoom;var shouldScaleDown=width>canvasW||height>canvasH,shouldScaleUp=width<canvasW&&height<canvasH;if(shouldScaleDown||shouldScaleUp){var Wx=canvasW/width,Hx=canvasH/height;delta=Wx<Hx?Wx:Hx,zoom>1.75&&(zoom=1.75),zoom<.5&&(zoom=.5),canvas.setZoom(zoom*delta),this.currentZoomLevel=zoom*delta}},onCanvasPanStart:function(_ref){var e=_ref.e;this.isCanvasPanning=!0,this.lastPosX=e.clientX,this.lastPosY=e.clientY,this.canvas.defaultCursor="grabbing",this.canvas.renderAll()},onCanvasPan:throttle_default()((function(_ref2){var e=_ref2.e;
// https://stackoverflow.com/a/52504899
if(this.isCanvasPanning){var canvas=this.canvas,xOffset=e.clientX-this.lastPosX,yOffset=e.clientY-this.lastPosY,xDiffWidth=this.allowedCanvasPanSize-canvas.getWidth(),yDiffHeight=this.allowedCanvasPanSize-canvas.getHeight(),transformArray=canvas.viewportTransform,isXWithinBounds=transformArray[4]+xOffset>=-xDiffWidth&&transformArray[4]+xOffset<=0,isYWithinBounds=transformArray[5]+yOffset>=-yDiffHeight&&transformArray[5]+yOffset<=0;isXWithinBounds?(transformArray[4]+=xOffset,this.lastPosX=e.clientX,canvas.requestRenderAll()):transformArray[4]+xOffset>=-xDiffWidth&&(transformArray[4]=0,this.lastPosX=e.clientX,canvas.requestRenderAll()),isYWithinBounds?(transformArray[5]+=yOffset,this.lastPosY=e.clientY,canvas.requestRenderAll()):transformArray[5]+yOffset>=-yDiffHeight&&(transformArray[5]=0,this.lastPosY=e.clientY,canvas.requestRenderAll())}}),75),onCanvasPanEnd:function(){var _this21=this;this.isCanvasPanning=!1,this.canvas.getObjects().forEach((function(obj){return obj.setCoords()})),this.canvas.defaultCursor="grab",this.$nextTick((function(){return _this21.canvas.renderAll()}))}}},mixins_CanvasSetupMixinvue_type_script_lang_js=CanvasSetupMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_CanvasSetupMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CanvasSetupMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js
},
/***/88421:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanActionMixin}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(450886);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var render,staticRenderFns,debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),CanvasActionsMixin=__webpack_require__(238936),SpacePolygonUtil=__webpack_require__(527230),fabric=__webpack_require__(232777),validation=__webpack_require__(990260),Common=__webpack_require__(54278),FloorPlanActionMixinvue_type_script_lang_js={extends:CanvasActionsMixin/* default */.Z,methods:{onWindowResize:debounce_default()((function(){
// this.updateDiagram()
this.setupEditor()}),2e3),mapTheMouseEvents:function(){var self=this;this.canvas.on("mouse:down",(function(event){self.onNewConnectionMouseDown(event)})),this.canvas.on("mouse:up",(function(event){self.onNewConnectionMouseUp(event)}))},handleMarkerValue:function(){var _this=this;this.leagend&&this.leagend.showValue?this.$set(this.leagend,"showValue",!1):this.$set(this.leagend,"showValue",!0),this.canvas.forEachObject((function(obj){_this.applyValue(obj,_this.leagend.showValue)})),this.canvas.renderAll()},setMarkerValue:function(){var _this2=this;this.canvas.forEachObject((function(obj){_this2.applyValue(obj,_this2.leagend.showValue)})),this.canvas.renderAll()},populateLayerInfo:function(data){this.populateMarkers(data)},zoomIn:function(){this.canvas.setZoom(1.1*this.canvas.getZoom())},zoomOut:function(){this.canvas.setZoom(this.canvas.getZoom()/1.1)},sendToBack:function(){var activeObject=this.canvas.getActiveObject();activeObject&&this.canvas.sendToBack(activeObject)},bringToFront:function(){var activeObject=this.canvas.getActiveObject();activeObject&&this.canvas.bringToFront(activeObject)},rotate:function(degrees){var canvas=this.canvas,canvasCenter=new fabric.fabric.Point(canvas.getWidth()/2,canvas.getHeight()/2),radians=fabric.fabric.util.degreesToRadians(degrees);canvas.getObjects().forEach((function(obj){var objectOrigin=new fabric.fabric.Point(obj.left,obj.top),new_loc=fabric.fabric.util.rotatePoint(objectOrigin,canvasCenter,radians);obj.top=new_loc.y,obj.left=new_loc.x,obj.angle+=degrees,//rotate each object buy the same angle
obj.setCoords()})),canvas.renderAll()},rotateLeft:function(){this.rotate(-90)},rotateRight:function(){this.rotate(90)},goRight:function(){var units=10,canvas=this.canvas,delta=new fabric.fabric.Point(units,0);canvas.relativePan(delta)},goLeft:function(){var units=10,canvas=this.canvas,delta=new fabric.fabric.Point(-units,0);canvas.relativePan(delta)},goUp:function(){var units=10,canvas=this.canvas,delta=new fabric.fabric.Point(0,-units);canvas.relativePan(delta)},goDown:function(){var units=10,canvas=this.canvas,delta=new fabric.fabric.Point(0,units);canvas.relativePan(delta)},selectAll:function(){this.activeAllObjects()},deleteActiveObject:function(){var activeObjects=this.canvas.getActiveObjects();this.canvas.discardActiveObject(),activeObjects.length&&this.canvas.remove.apply(this.canvas,activeObjects)},copy:function(){var _this3=this;this.canvas.getActiveObject()&&this.canvas.getActiveObject().clone((function(cloned){_this3._clipboard=cloned}),["floorplan"])},paste:function(position){this.pasteInternal(this._clipboard,position)},pasteInternal:function(clipboard,position){var _this4=this,self=this;clipboard&&clipboard.clone((function(clonedObj){clonedObj.set({left:position?position.left:clonedObj.left+10,top:position?position.top:clonedObj.top+10,evented:!0}),"activeSelection"===clonedObj.type?(
// active selection needs a reference to the canvas.
clonedObj.canvas=_this4.canvas,clonedObj.forEachObject((function(obj){obj.floorplan&&obj.floorplan.id&&(obj.floorplan.id=self.graphicUtil.getUniqueId()),self.canvas.add(obj)})),
// this should solve the unselectability
clonedObj.setCoords()):(clonedObj.floorplan&&clonedObj.floorplan.id&&(clonedObj.floorplan.id=self.graphicUtil.getUniqueId()),self.canvas.add(clonedObj)),clipboard.top+=10,clipboard.left+=10,self.selectedObject=clonedObj,self.setUpObjectEvents(clonedObj),self.canvas.setActiveObject(clonedObj),self.canvas.requestRenderAll()}),["floorplan"])},populateMarkers:function(data){var _this5=this,markerType=data.markerType,self=this,list=this.getListOfMappedElemnet("space_zone_group").filter((function(rt){var spaceId=rt.floorplan&&rt.floorplan.spaceId?rt.floorplan.spaceId:null;if(spaceId&&!_this5.getElementBySpaceId(spaceId,markerType))return rt}));list.forEach((function(rt){var shape=(0,Common/* findShapeByName */.oB)(markerType);self.getShape(shape,(function(obj){self.currentDragElement=obj})),_this5.addMarkers(rt,rt._findCenterFromElement())}))},addMarker:function(markerType,space,location,icon){var _this6=this,shape=(0,Common/* findShapeByName */.oB)(markerType);this.getShape(shape,(function(obj){_this6.currentDragElement=obj})),this.addViewerMarkers(space,(0,Common/* getcoordinates */.Bb)(space,location),icon)},addPolygon:function(){var canvas=this.canvas,polygonOptions=this.polygonOptions;SpacePolygonUtil/* drawPolygon */.is(polygonOptions,canvas)},handleLayer:function(){this.layerVisible=!0},configSpaceRegion:function(){},bindSpace:function(space){if(!(0,validation/* isEmpty */.xb)(space)&&this.selectedElement){var target=this.selectedElement.target,floorplan=target.floorplan;(0,Common/* isNotMappedElement */.jh)(target,"space_zone_group")?(target&&target._objects&&target.getObjects().forEach((function(rt){rt.floorplan&&"space_zone_label"===rt.floorplan.objectType&&rt.set("text",space.name)})),floorplan.spaceId=space.id,this.setElementDataById(this.selectedElement.id,floorplan),this.canvas.renderAll(),this.showSuccess("Space Mapped successfully")):(0,Common/* isNotMappedElement */.jh)(target,"space_zone_group")||this.showError("Space Mapped already")}else this.showWarning("No Space Selected")},getElementBySpaceId:function(spaceId,markerType){return markerType?this.canvas.getObjects().find((function(el){var floorplan=el.floorplan;if(floorplan&&floorplan.spaceId===spaceId&&floorplan.markerType&&floorplan.markerType===markerType)return el})):this.canvas.getObjects().find((function(el){if(el.floorplan&&el.floorplan.spaceId===spaceId)return el}))},getElementById:function(id){return this.canvas.getObjects().find((function(el){if(el.floorplan&&el.floorplan.id===id)return el}))},getFloorPlanImageElement:function(){return this.canvas.getObjects().find((function(el){if((0,Common/* isElement */.kK)(el,"floor_plan_image"))return el}))},getListOfNotMappedElemnet:function(type){return type?this.canvas.getObjects().filter((function(el){if(!(0,Common/* isElement */.kK)(el,type))return el})):this.canvas.getObjects().filter((function(el){if((0,Common/* isNotMappedElement */.jh)(el,type))return el}))},getListOfMappedElemnet:function(type,spaceId){return type&&spaceId?this.canvas.getObjects().filter((function(el){if((0,Common/* isElement */.kK)(el,type)&&(0,Common/* isSpaceId */.pz)(el,spaceId))return el})):type?this.canvas.getObjects().filter((function(el){if((0,Common/* isElement */.kK)(el,type))return el})):this.canvas.getObjects().filter((function(el){if((0,Common/* isMappedElement */.ej)(el))return el}))},getListOfSpaceId:function(element){(0,Common/* isMappedElement */.ej)(element)&&this.mappedSpaceId.push(element.floorplan.spaceId)},getListOfMappedSpaceId:function(){return this.canvas.getObjects().filter((function(el){if((0,Common/* isMappedElement */.ej)(el))return el})).map((function(rt){return rt.floorplan.spaceId}))},updateActionEvents:function(){var _this7=this;setTimeout((function(){_this7.loadfloorPlanData()}),1e3)},setElementDataById:function(id,data){var _this8=this;this.canvas.getObjects().forEach((function(el){el.floorplan&&el.floorplan.id===id&&_this8.$set(el,"floorplan",data)}))},resetSpaceFocus:function(){var _this9=this;this.canvas.getObjects().forEach((function(el){el.floorplan&&(0,Common/* isElement */.kK)("space_zone_group")&&_this9.$set(el,"opacity",.6)}))},getSpaceIdFromElement:function(element){return(0,Common/* isMappedElement */.ej)(element)&&element.floorplan&&element.floorplan.spaceId?element.floorplan.spaceId:null},getSelectedArea:function(element){if(this.hasOwnProperty("selectedArea")&&element){var spaceId=this.getSpaceIdFromElement(element.target);spaceId&&(this.selectedArea=this.areas.filter((function(rt){return rt.spaceId===spaceId})))}return null}}},mixins_FloorPlanActionMixinvue_type_script_lang_js=FloorPlanActionMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_FloorPlanActionMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanActionMixin=component.exports},
/***/891691:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanFiltersMixin}});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js
__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(339772),__webpack_require__(450886);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var render,staticRenderFns,validation=__webpack_require__(990260),Common=__webpack_require__(54278),FloorPlanFiltersMixinvue_type_script_lang_js={methods:{applyFilters:function(obj){this.applySpaceFilter(obj)},applyStyles:function(obj){var spaceId=obj.floorplan&&obj.floorplan.spaceId?obj.floorplan.spaceId:null,areas=this.areas;if(spaceId){var area=areas.find((function(rt){return rt.spaceId===spaceId}));if(area&&area.styles&&(0,Common/* isSpaceZoneElement */.RO)(obj)){var styles=area.styles;this.setSpaceZoneStyles(obj,"polygon",styles),area.label&&this.setSpaceZoneLabel(obj,"text",area.label)}}},applyPointerStyles:function(obj){var _this=this,employeeId=obj.floorplan.employeeId,areas=this.areas,employee=areas.find((function(rt){return rt.employeeId===employeeId}));if(employee&&employee.styles){var styles=employee.styles;Object.keys(styles).forEach((function(key){_this.setSpaceZoneFloorProps(obj,key,styles[key])}))}},getAsset:function(){},applySpaceFilter:function(obj){if(obj&&obj.floorplan&&obj.floorplan.spaceId){var spaceId=obj.floorplan.spaceId,spaces=this.spaces,markerType=obj.floorplan.markerType;if(this.areas&&this.areas.length){var area=this.areas.find((function(rt){return rt.spaceId===spaceId}));if(area){if((0,Common/* isMarkerElement */.H4)(obj))if([343,410].includes(window.orgId))if(area.markerReadings&&area.markerReadings.OCCUPANCY){var OCCUPANCY=area.markerReadings.OCCUPANCY;OCCUPANCY.value||this.disableObject(obj)}else if(area.assets&&area.assets.length){var assetId=obj.floorplan.assetId;if((assetId||area.assets[0][assetId])&&area.markerReading&&area.markerReading.OCCUPANCY){var _OCCUPANCY=area.markerReading.OCCUPANCY;_OCCUPANCY.value||this.disableObject(obj)}else assetId&&area.assets[0][assetId]||this.disableObject(obj)}else this.disableObject(obj);else area.markers?markerType&&-1===area.markers.findIndex((function(rt){return rt.Enum===markerType}))&&this.disableObject(obj):this.disableObject(obj)}else this.disableObject(obj)}if(!(0,validation/* isEmpty */.xb)(spaces)){var spaceIdList=spaces.map((function(rt){return rt.id}));-1===spaceIdList.indexOf(spaceId)&&this.disableObject(obj)}}},disableObject:function(obj){this.$set(obj.floorplan,"disable",!0),obj.visible=0}}},mixins_FloorPlanFiltersMixinvue_type_script_lang_js=FloorPlanFiltersMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_FloorPlanFiltersMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanFiltersMixin=component.exports},
/***/701758:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FloorPlanValueMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var render,staticRenderFns,defineProperty=__webpack_require__(482482),Common=(__webpack_require__(976801),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(879288),__webpack_require__(186466),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(54278)),FloorPlanValueMixinvue_type_script_lang_js={
/* eslint-disable array-callback-return */data:function(){return{markerDisplayValue:{},subcriptiondata:[]}},methods:{formatValue:function(value){return(0,Common/* formatDecimal */.VG)(value)},applyValue:function(obj,showValue){if([343,410].includes(window.orgId))(0,Common/* isMappedMarkerElement */.io)(obj)&&(410===window.orgId?this.applyMarkerValue(obj,!1,!1):this.applyMarkerValue(obj,!0,!1));else if(this.preparearkervalue(),void 0===showValue&&(showValue=this.leagend.showValue||!1),(0,Common/* isMappedMarkerElement */.io)(obj)){var enable=!1;this.viewMode&&"control_points"!==this.viewMode&&(enable=!0),this.applyMarkerValue(obj,showValue,enable)}},applyReadingIconValue:function(){},preparearkervalue:function(){var _this=this,spaceControllableCategoriesMap=this.spaceControllableCategoriesMap,data={};Object.keys(spaceControllableCategoriesMap).forEach((function(rt){_this.$set(data,Number(rt),{}),Object.values(spaceControllableCategoriesMap[rt]).forEach((function(rl){var name=_this.controlCategoryList.find((function(cat){return cat.categoryId===rl.controlType}))._name;_this.$set(data[Number(rt)],name,_this.getMarkerDisplayValue(rl.controllableResourceContexts))}))})),this.markerDisplayValue=data},getMarkerDisplayValue:function(resourceContext){var _this2=this,value={},unit="",pointMap={},subcriptiondataList=[];return resourceContext.forEach((function(rt){_this2.$set(value,rt.resource.id,{}),rt.controllablePoints.forEach((function(rl){var field=rt.controllablePointMap[rl.pointId].field;_this2.$set(pointMap,rl._name,field.dataType);var point=rt.controllablePointMap[rl.pointId],val="";val=4===field.dataType?point.value:point.childRDM&&null!==point.childRDM.value?point.childRDM.value:"",unit=point.field&&point.field.unit?point.field.unit:"",_this2.$set(value[rt.resource.id],rl._name,(0,defineProperty/* default */.Z)({},field.dataType,val)),subcriptiondataList.push({moduleName:field.module.name,fieldName:field.name,parentId:rt.resource.id})}))})),this.subcriptiondata=subcriptiondataList,this.dataTypeBasedValue(null,value,pointMap,unit)},dataTypeBasedValue:function(pointname,value,pointMap,unit){null===pointname&&(pointname=Object.keys(pointMap)[0]);var result="",datatype=pointMap[pointname],length=0,pointValue=Object.values(value).map((function(rt){if(length++,rt[pointname])return rt[pointname]}));if(4===datatype){var count=0;pointValue.forEach((function(rt){Number(rt[datatype])>0&&count++})),result="ON ".concat(count," / ").concat(length)}else if(2===datatype||3===datatype){var min=null,max=null;pointValue.forEach((function(rt,index){var v=Number(rt[datatype]);0===index?(min=v,max=v):min>v?min=v:min<=v&&(max=v)})),result=min===max?"".concat(this.formatValue(min)," ").concat(unit):"".concat(this.formatValue(min)," ").concat(unit," ~ ").concat(this.formatValue(max)," ").concat(unit)}return result},applyMarkerValue:function(obj,showValue,enable){if(!enable){var formatText="";formatText=[343,410].includes(window.orgId)?showValue?this.getReadingIconValue(obj):"":showValue?this.getMarkerValue(obj):"";var textWidth=0,rectWidth=40,totalWidth=40;if(obj.forEachObject((function(object){"text"===object.type&&(object.set("text",formatText),textWidth=object.width)})),textWidth=textWidth>2?textWidth:0,showValue){if(textWidth>0){obj.forEachObject((function(object){if(textWidth+=10,"text"===object.type&&([343,410].includes(window.orgId)?object.set("left",20):object.set("left",10)),"rect"===object.type&&(totalWidth=rectWidth+textWidth,object.set("width",totalWidth)),"group"===object.type){var newWidth=-totalWidth/2+20;object.set("left",newWidth),[343,410].includes(window.orgId)&&object.set("width",totalWidth)}}));var groupwith=40,totalGroupWith=groupwith+textWidth;obj.set("width",totalGroupWith)}}else obj.forEachObject((function(object){"text"===object.type&&object.set("left",0),"rect"===object.type&&(totalWidth=rectWidth+textWidth,object.set("width",40)),"group"===object.type&&object.set("left",0)})),obj.set("width",40)}this.canvas.requestRenderAll()},applyCustomeMarkerValue:function(obj,value){var markerType=obj.floorplan.markerType,formatText=value,textWidth=0,rectWidth=40,totalWidth=40;if(obj.forEachObject((function(object){"text"===object.type&&(object.set("text",formatText),textWidth=object.width)})),textWidth=textWidth>2?textWidth:0,textWidth>0){obj.forEachObject((function(object){if(textWidth+=10,"text"===object.type&&object.set("left",20),"path"===object.type&&("READINGS"===markerType?object.set("left",-25):object.set("left",-10)),"rect"===object.type&&(totalWidth=rectWidth+textWidth+10,object.set("width",totalWidth)),"group"===object.type){var newWidth=-totalWidth/2+30;object.set("left",newWidth)}}));var groupwith=40,totalGroupWith=groupwith+textWidth;obj.set("width",totalGroupWith)}},getMarkerValue:function(obj){var floorplan=obj.floorplan,spaceId=floorplan.spaceId,markerType=floorplan.markerType,value=this.markerDisplayValue;return value[spaceId]&&value[spaceId][markerType]?value[spaceId][markerType]:""},getReadingIconValue:function(obj){var floorplan=obj.floorplan,spaceId=floorplan.spaceId,assetId=floorplan.assetId;if(this.areas&&this.areas.length&&assetId){var area=this.areas.find((function(rt){return rt.spaceId===spaceId}));if(area&&area.assets.length&&area.assets[0][assetId]){var assetValue=area.assets[0][assetId];return"".concat(assetValue.value?this.formatValue(assetValue.value):0," ").concat(assetValue.unit?assetValue.unit:"")}return""}return""}}},mixins_FloorPlanValueMixinvue_type_script_lang_js=FloorPlanValueMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_FloorPlanValueMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanValueMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
},
/***/238936:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CanvasActionsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules
var render,staticRenderFns,toConsumableArray=__webpack_require__(488478),AutoLayout=(__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(450886),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(538077),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(32996)),Common=__webpack_require__(126577),utils_Math=__webpack_require__(308530),elements_Common=__webpack_require__(144945),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),validation=__webpack_require__(990260),CanvasActionsMixinvue_type_script_lang_js={computed:{diagramJson:{get:function(){var diagramJson=this.stateFlow.diagramJson;return diagramJson?JSON.parse(diagramJson):null},set:function(json){this.stateFlow.diagramJson=JSON.stringify(json)}}},methods:{autoLayout:function(){var _this=this,stateTransitions=this.stateTransitions,usedStates=this.usedStates,defaultStateId=this.stateFlow.defaultStateId,coords=(0,AutoLayout/* getLayout */.G)(usedStates,stateTransitions,defaultStateId);usedStates.map((function(state){return _this.drawState(state,coords[state.id])}))},beautifyAnchors:function(){var _this2=this,diagramJson=cloneDeep_default()(this.diagramJson);
// Clear existing anchors
diagramJson.states.forEach((function(s){return s.anchors=[null,null,null,null,null,null,null,null]})),this.diagramJson=diagramJson,this.$nextTick((function(){
// Assign new anchors to all transitions based on direction
var canvas=_this2.canvas,stateTransitions=[].concat((0,toConsumableArray/* default */.Z)(_this2.stateTransitions),(0,toConsumableArray/* default */.Z)(_this2.tempTransitionList)).filter((function(t){return!(0,validation/* isEmpty */.xb)(t.id)}));stateTransitions.forEach((function(transition){var fromStateObj=(0,Common/* getObjById */.cU)(canvas,transition.fromStateId),toStateObj=(0,Common/* getObjById */.cU)(canvas,transition.toStateId),fromCoords=(0,Common/* getCenterCoords */.us)(fromStateObj),toCoords=(0,Common/* getCenterCoords */.us)(toStateObj),dirForFromState=(0,utils_Math/* getCombinedDirection */._f)((0,utils_Math/* getDirectionBetweenPoints */.Dm)(fromCoords,toCoords)),anchorForFromState=_this2.getPreferredAnchor(transition.fromStateId,{direction:dirForFromState,isStartAnchor:!0});_this2.assignAnchor(fromStateObj,transition.id,{id:anchorForFromState});var dirForToState=(0,utils_Math/* getCombinedDirection */._f)((0,utils_Math/* getDirectionBetweenPoints */.Dm)(toCoords,fromCoords)),anchorForToState=_this2.getPreferredAnchor(transition.toStateId,{direction:dirForToState});_this2.assignAnchor(toStateObj,transition.id,{id:anchorForToState})}))}))},beautifyLayout:function(){var _this3=this;this.autoLayout(),this.beautifyAnchors(),this.$nextTick((function(){_this3.initTransitions(),_this3.$nextTick((function(){return _this3.addToHistory()}))}))},setBg:function(){var _this4=this;return(0,elements_Common/* makeBg */.A2)().then((function(bg){return _this4.canvas.backgroundColor=bg,_this4.canvas.renderAll()}))},setActiveObject:function(activeObject){this.activeObj&&this.activeObj.makeInActive(),this.activeObj=activeObject,this.canvas.requestRenderAll()},resetSelection:function(){var canvas=this.canvas;this.activeObj&&this.activeObj.makeInActive(),this.resetEditObjects(),canvas.discardActiveObject(),canvas.defaultCursor="grab",canvas.requestRenderAll()},showAllAnchors:function(){var _this5=this;this.canvas.getObjects().filter((function(obj){return["state"].includes(obj.objType)})).forEach((function(obj){obj.lockMovementY=!0,obj.lockMovementX=!0,obj.resetAnchors(),obj.showAnchors(),_this5.canvas.requestRenderAll()}))},hideAllAnchors:function(){var _this6=this;this.canvas.getObjects().filter((function(obj){return["state"].includes(obj.objType)})).forEach((function(obj){obj.lockMovementY=!1,obj.lockMovementX=!1,obj.resetAnchors(),obj.hideAnchors(),_this6.canvas.requestRenderAll()}))},enableTransitionMode:function(){this.isNewConnectionMode=!0,this.showAllAnchors()},disableTransitionMode:function(){this.isNewConnectionMode=!1,this.hideAllAnchors()},clearDragDrop:function(){var obj=this.canvas.getActiveObject();"connector"===obj.objType&&(obj.isDragMode=!1),this.canvas.discardActiveObject(),this.isConnectorDragging=!1,this.disableTransitionMode(),this.removePseudoConnector(),this.resetDragProps(),this.resetModifiedProps(),this.resetNewConnectorProps()},onKeyPress:function(_ref){var keyCode=_ref.keyCode,isEsc=27==keyCode;isEsc&&(this.isConnectorDragging||this.isNewConnectionMode)&&this.clearDragDrop()},onWindowResize:debounce_default()((function(){this.updateDiagram(),this.setupEditor()}),2e3),addToDiagram:function(stateId,_ref2){var x=_ref2.x,y=_ref2.y,stateObj={stateId:stateId,x:x,y:y,anchors:[null,null,null,null,null,null,null,null]},diagramJson=cloneDeep_default()(this.diagramJson||{});diagramJson.states=diagramJson.states||[];var stateMap=diagramJson.states.map((function(state){return state.stateId}));if(stateMap.includes(stateId)){var index=stateMap.findIndex((function(key){return String(key)===String(stateId)}));diagramJson.states.splice(index,1,stateObj)}else diagramJson.states.push(stateObj);this.$set(this,"diagramJson",diagramJson)},removeTempTransition:function(transitionId){var index=this.tempTransitionList.findIndex((function(t){return t===transitionId}));this.tempTransitionList.splice(index,1);var connector=(0,Common/* getObjById */.cU)(this.canvas,String(transitionId));this.canvas.remove(connector),this.canvas.requestRenderAll()},swapTempTransition:function(transition,tempTransitionId){var anchorMap=this.anchorMap,fromAnchor=(anchorMap[transition.fromStateId]||[]).findIndex((function(id){return String(id)===String(tempTransitionId)})),toAnchor=(anchorMap[transition.toStateId]||[]).findIndex((function(id){return String(id)===String(tempTransitionId)}));this.setAnchor(transition.fromStateId,fromAnchor,transition.id),this.setAnchor(transition.toStateId,toAnchor,transition.id),this.updateAnchorMap(transition.fromStateId,fromAnchor,transition.id),this.updateAnchorMap(transition.toStateId,toAnchor,transition.id),this.removeTempTransition(tempTransitionId)}}},mixins_CanvasActionsMixinvue_type_script_lang_js=CanvasActionsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mixins_CanvasActionsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CanvasActionsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js
},
/***/432480:
/***/function(module){module.exports=JSON.parse('{"J":[{"gid":"com.facilio.floorplan.control","label":"floorplan.control","children":[{"_name":"LIGHT","label":"floorplan.control.light.on","uid":"com.facilio.floorplan.control.light.on","template":{"svg":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?><svg width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\"><title>idea1</title><desc>Created with Sketch.</desc><g id=\\"Page-1\\" stroke=\\"none\\" stroke-width=\\"1\\" fill=\\"none\\" fill-rule=\\"evenodd\\"><g id=\\"SVG\\" transform=\\"translate(-56.000000, -254.000000)\\" fill=\\"#000000\\" fill-rule=\\"nonzero\\"><g id=\\"idea1\\" transform=\\"translate(56.000000, 254.000000)\\"><path d=\\"M7.38461538,0 C4.84604117,0 2.78072417,2.065317 2.78072417,4.60389121 C2.78072417,6.06490385 3.46953877,7.42822266 4.63454025,8.29631161 L4.63454025,8.68077675 C4.3508113,8.93013822 4.1711989,9.29533503 4.1711989,9.70188551 C4.1711989,10.0598708 4.31047177,10.3858549 4.53740986,10.6289062 C4.31047177,10.8719576 4.1711989,11.197829 4.1711989,11.5558143 C4.1711989,12.16564 4.57470704,12.6829552 5.12886868,12.85468 C5.30712891,13.9391151 6.25048829,14.7692308 7.38461538,14.7692308 C8.51874248,14.7692308 9.46221456,13.9391151 9.64047476,12.85468 C10.1945237,12.6828425 10.5981445,12.16564 10.5981445,11.5557016 C10.5981445,11.197829 10.4588717,10.871845 10.2319336,10.6287936 C10.4588717,10.3857422 10.5981445,10.0598708 10.5981445,9.70188551 C10.5981445,9.29533503 10.4185321,8.93013822 10.1346905,8.68066408 L10.1346905,8.29631161 C11.299692,7.42822266 11.9885066,6.06490385 11.9885066,4.60389121 C11.9885066,2.065317 9.9231896,0 7.38461538,0 Z M9.23854416,9.20766978 C9.51100512,9.20766978 9.73275992,9.42942459 9.73275992,9.70188551 C9.73275992,9.97445913 9.51100512,10.1962139 9.23854416,10.1962139 L5.53079928,10.1962139 C5.25822565,10.1962139 5.03647085,9.97445913 5.03647085,9.70188551 C5.03647085,9.42942459 5.25822565,9.20766978 5.53079928,9.20766978 L9.23854416,9.20766978 Z M7.38461538,13.9038462 C6.75180288,13.9038462 6.21431792,13.4880559 6.03076171,12.9154147 L8.73846906,12.9154147 C8.55502555,13.4881686 8.01742788,13.9038462 7.38461538,13.9038462 Z M9.23854416,12.05003 L5.53079928,12.05003 C5.25822565,12.05003 5.03647085,11.8282752 5.03647085,11.5558143 C5.03647085,11.2832407 5.25822565,11.0615986 5.53079928,11.0615986 L9.23854416,11.0615986 C9.51100512,11.0615986 9.73275992,11.2832407 9.73275992,11.5558143 C9.73275992,11.8282752 9.51100512,12.05003 9.23854416,12.05003 Z M9.46131312,7.71285306 C9.34130859,7.7931941 9.2693059,7.92807242 9.2693059,8.07241587 L9.2693059,8.3430739 C9.25905199,8.34284856 9.24879808,8.34228516 9.23854416,8.34228516 L8.74421573,8.34228516 L8.74421573,6.63698166 L9.36553486,6.01566257 C9.53455529,5.84664213 9.53455529,5.57271635 9.36553486,5.40369591 C9.1966271,5.23467548 8.92258863,5.23467548 8.7536809,5.40369591 L8.00559646,6.15178036 C7.92446665,6.23291016 7.87883112,6.34288612 7.87883112,6.45770735 L7.87883112,8.34228516 L6.89039965,8.34228516 L6.89039965,6.45770735 C6.89039965,6.3429988 6.84476412,6.23291016 6.76363431,6.15178036 L6.01554987,5.40369591 C5.84664213,5.23478815 5.57271635,5.23478815 5.40369591,5.40369591 C5.23467548,5.57271635 5.23467548,5.84664213 5.40369591,6.01566257 L6.02501504,6.63698166 L6.02501504,8.34239784 L5.53079928,8.34239784 C5.52043269,8.34239784 5.51017878,8.34284856 5.49992487,8.3430739 L5.49992487,8.07241587 C5.49992487,7.92807242 5.42792218,7.7931941 5.30791765,7.71285306 C4.26742788,7.01626353 3.64610879,5.85407902 3.64610879,4.60389121 C3.64610879,2.54240536 5.32324217,0.865384615 7.38461538,0.865384615 C9.4459886,0.865384615 11.123122,2.54240536 11.123122,4.60389121 C11.123122,5.85407902 10.5018029,7.01626353 9.46131312,7.71285306 Z\\" id=\\"Shape\\"></path><path d=\\"M1.79229265,4.60389121 C1.79229265,4.36489633 1.59859526,4.1711989 1.35960035,4.1711989 L0.432692308,4.1711989 C0.193697423,4.1711989 0,4.36489633 0,4.60389121 C0,4.84277342 0.193697423,5.03658352 0.432692308,5.03658352 L1.35960035,5.03658352 C1.59859526,5.03658352 1.79229265,4.84277342 1.79229265,4.60389121 Z\\" id=\\"Path\\"></path><path d=\\"M14.3365385,4.1711989 L13.4096304,4.1711989 C13.1707482,4.1711989 12.9769381,4.36489633 12.9769381,4.60389121 C12.9769381,4.84277342 13.1707482,5.03658352 13.4096304,5.03658352 L14.3365385,5.03658352 C14.5755333,5.03658352 14.7692308,4.84277342 14.7692308,4.60389121 C14.7692308,4.36489633 14.5755333,4.1711989 14.3365385,4.1711989 Z\\" id=\\"Path\\"></path><path d=\\"M1.95038311,7.24162411 L1.14764873,7.70507813 C0.940767721,7.8246319 0.869891827,8.08920522 0.989332933,8.2961989 C1.06944862,8.43502102 1.21491888,8.51254506 1.36444561,8.51254506 C1.43780048,8.51254506 1.51228214,8.49395282 1.58034104,8.45451473 L2.38307541,7.99117338 C2.5900691,7.87161958 2.66094502,7.60704629 2.54150391,7.40005258 C2.42206281,7.19305889 2.15737679,7.122183 1.95038311,7.24162411 Z\\" id=\\"Path\\"></path><path d=\\"M12.6028396,2.0241887 C12.6761944,2.0241887 12.7505634,2.00548379 12.818735,1.96615835 L13.621582,1.50259165 C13.828463,1.38315055 13.8994516,1.11857723 13.7798978,0.911583519 C13.6603441,0.704589837 13.3957707,0.633713942 13.1888897,0.753267721 L12.3860427,1.21672177 C12.1791617,1.33616285 12.1081731,1.60084887 12.2277269,1.80772987 C12.3078425,1.94655199 12.4533128,2.0241887 12.6028396,2.0241887 Z\\" id=\\"Path\\"></path><path d=\\"M13.6214694,7.70507812 L12.818735,7.24173678 C12.6117413,7.12229567 12.3470553,7.19317157 12.2276142,7.40016525 C12.1081731,7.60704629 12.1791617,7.87173228 12.3860427,7.99117338 L13.1888897,8.45451473 C13.2569486,8.49384014 13.3313176,8.51254506 13.4047852,8.51254506 C13.5543119,8.51254506 13.6997821,8.43490835 13.7798978,8.29608623 C13.8994516,8.08920522 13.828463,7.82451923 13.6214694,7.70507812 Z\\" id=\\"Path\\"></path><path d=\\"M2.38318812,1.21660907 L1.58045371,0.753267721 C1.37346003,0.633713942 1.10888671,0.704702538 0.989445606,0.911696221 C0.869891827,1.1186899 0.940880423,1.38326322 1.1477614,1.50270433 L1.95049581,1.96615835 C2.01866737,2.00548379 2.09303637,2.0241887 2.16639121,2.0241887 C2.31603063,2.0241887 2.46138822,1.94655199 2.54161659,1.80772988 C2.66105769,1.60073619 2.5900691,1.33616285 2.38318812,1.21660907 Z\\" id=\\"Path\\"></path></g></g></g></svg>\\r\\n","themeGroup":"control"},"options":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"hoverCursor":"pointer"},"rectOption":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"fill":"#ffd458","rx":5,"ry":5,"hoverCursor":"pointer"},"textOption":{"originX":"center","originY":"center","fontFamily":"\\"Aktiv-Grotesk\\", \\"Helvetica, Arial\\", \\"sans-serif\\"","fill":"#000","setStroke":"#fff","fontSize":"13"}},{"_name":"AC","label":"floorplan.control.ac.setpoint","uid":"com.facilio.floorplan.control.ac.setpoint","template":{"svg":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?><svg width=\\"10px\\" height=\\"16px\\" viewBox=\\"0 0 10 16\\" version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\"><title>celsius</title><desc>Created with Sketch.</desc><g id=\\"Page-1\\" stroke=\\"none\\" stroke-width=\\"1\\" fill=\\"none\\" fill-rule=\\"evenodd\\"><g id=\\"SVG\\" transform=\\"translate(-94.000000, -253.000000)\\" fill=\\"#ffffff\\" fill-rule=\\"nonzero\\"><g id=\\"celsius\\" transform=\\"translate(94.500000, 253.000000)\\"><path d=\\"M4.24780275,10.3743897 L4.24780275,4.19433594 C4.24780275,3.93542481 4.03796387,3.72558594 3.77905275,3.72558594 C3.52026369,3.72558594 3.31030275,3.93542481 3.31030275,4.19433594 L3.31030275,10.3743897 C2.48632812,10.5838623 1.875,11.3319092 1.875,12.2203369 C1.875,13.2703858 2.72912597,14.1246338 3.77905275,14.1246338 C4.8289795,14.1246338 5.68322753,13.2703858 5.68322753,12.2203369 C5.68322753,11.3319092 5.07177734,10.5838623 4.24780275,10.3743897 Z M3.77905275,13.1871338 C3.24609375,13.1871338 2.8125,12.753418 2.8125,12.2203369 C2.8125,11.6871338 3.24609375,11.253418 3.77905275,11.253418 C4.31213378,11.253418 4.74572753,11.6871338 4.74572753,12.2203369 C4.74572753,12.753418 4.31213378,13.1871338 3.77905275,13.1871338 Z\\" id=\\"Shape\\"></path><path d=\\"M6.10546875,9.24145506 L6.10546875,2.32666016 C6.10546875,1.04370119 5.06188966,0 3.77905275,0 C2.49633788,0 1.45275878,1.04370119 1.45275878,2.32666016 L1.45275878,9.24145506 C0.538696281,9.95593263 0,11.0515137 0,12.2202148 C0,14.3044434 1.6953125,16 3.77905275,16 C5.86291503,16 7.55822753,14.3044434 7.55822753,12.2202148 C7.55822753,11.0515137 7.01953125,9.95593263 6.10546875,9.24145506 Z M3.77905275,15.0625 C2.21215819,15.0625 0.9375,13.7874756 0.9375,12.2202148 C0.9375,11.2774658 1.40380859,10.3978272 2.18493653,9.8671875 C2.3133545,9.77990722 2.39025878,9.63464356 2.39025878,9.47937013 L2.39025878,2.32666016 C2.39025878,1.56066894 3.01330566,0.9375 3.77905275,0.9375 C4.54492188,0.9375 5.16796875,1.56066894 5.16796875,2.32666016 L5.16796875,9.47937013 C5.16796875,9.63464356 5.24487306,9.77990722 5.373291,9.8671875 C6.15441894,10.3978272 6.62072753,11.2774658 6.62072753,12.2202148 C6.62072753,13.7874756 5.34594725,15.0625 3.77905275,15.0625 Z\\" id=\\"Shape\\"></path><path d=\\"M8.96447753,7.48400878 L7.51171875,7.48400878 C7.25280762,7.48400878 7.04296875,7.69384766 7.04296875,7.95275878 C7.04296875,8.21166994 7.25280762,8.42150878 7.51171875,8.42150878 L8.96447753,8.42150878 C9.22326659,8.42150878 9.43322753,8.21166994 9.43322753,7.95275878 C9.43322753,7.69384766 9.22326659,7.48400878 8.96447753,7.48400878 L8.96447753,7.48400878 Z\\" id=\\"Path\\"></path><path d=\\"M8.96447753,5.60864256 L7.51171875,5.60864256 C7.25280762,5.60864256 7.04296875,5.81848144 7.04296875,6.07739256 C7.04296875,6.33630372 7.25280762,6.54614256 7.51171875,6.54614256 L8.96447753,6.54614256 C9.22326659,6.54614256 9.43322753,6.33630372 9.43322753,6.07739256 C9.43322753,5.81848144 9.22326659,5.60864256 8.96447753,5.60864256 Z\\" id=\\"Path\\"></path><path d=\\"M8.96447753,3.73327637 L7.51171875,3.73327637 C7.25280762,3.73327637 7.04296875,3.94311525 7.04296875,4.20202637 C7.04296875,4.4609375 7.25280762,4.67077637 7.51171875,4.67077637 L8.96447753,4.67077637 C9.22326659,4.67077637 9.43322753,4.4609375 9.43322753,4.20202637 C9.43322753,3.94311525 9.22326659,3.73327637 8.96447753,3.73327637 Z\\" id=\\"Path\\"></path><path d=\\"M7.51171875,2.79541016 L8.96447753,2.79541016 C9.22326659,2.79541016 9.43322753,2.58557128 9.43322753,2.32666016 C9.43322753,2.06787109 9.22326659,1.85791016 8.96447753,1.85791016 L7.51171875,1.85791016 C7.25280763,1.85791016 7.04296875,2.06787109 7.04296875,2.32666016 C7.04296875,2.58557128 7.25280763,2.79541016 7.51171875,2.79541016 L7.51171875,2.79541016 Z\\" id=\\"Path\\"></path></g></g></g></svg>","themeGroup":"control"},"options":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"hoverCursor":"pointer"},"rectOption":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"fill":"#017aff","rx":5,"ry":5,"hoverCursor":"pointer"},"textOption":{"originX":"center","originY":"center","fontFamily":"\\"Aktiv-Grotesk\\", \\"Helvetica, Arial\\", \\"sans-serif\\"","fill":"#fff","setStroke":"#fff","fontSize":"13"}},{"_name":"MAINTENANCE","label":"com.facilio.floorplan.maintenance","uid":"com.facilio.floorplan.maintenance","template":{"svg":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?><svg version=\\"1.1\\" viewBox=\\"0 0 22 22\\" xmlns=\\"http://www.w3.org/2000/svg\\"><title>maintenance</title><desc>Created with Sketch.</desc><g fill=\\"none\\" fill-rule=\\"evenodd\\"><g transform=\\"translate(-14 -14)\\" fill=\\"#fff\\" fill-rule=\\"nonzero\\" stroke=\\"#fff\\" stroke-width=\\".2\\"><path d=\\"m34.515 17.403c-0.13184-0.03067-0.27039 0.0091552-0.36561 0.10529l-1.6195 1.6322h-0.77639l-0.85467-0.88547v-0.7872l1.5963-1.62c0.094455-0.095825 0.13291-0.23361 0.10163-0.36469-0.031129-0.13092-0.12757-0.23651-0.25513-0.27954-0.40101-0.13519-0.82064-0.20374-1.2474-0.20374-1.2723 0-2.4282 0.5933-3.1713 1.6277-0.69552 0.96832-0.90991 2.155-0.60274 3.2907l-2.8774 2.8774-4.7938-4.8047v-0.94299c0-0.13718-0.072024-0.26444-0.18967-0.33493l-2.7621-1.6574c-0.15381-0.092316-0.3505-0.068054-0.47716 0.058746l-1.1048 1.1046c-0.12665 0.1268-0.15091 0.32349-0.058748 0.4773l1.6572 2.762c0.070498 0.11765 0.19761 0.18951 0.33479 0.18967l0.94272 3.052e-4 4.7943 4.8047-2.8665 2.8664c-1.1357-0.30701-2.3231-0.092316-3.2919 0.60364-1.0338 0.74265-1.6266 1.8982-1.6266 3.1705 0 0.42664 0.068514 0.84641 0.20371 1.2473 0.043184 0.12833 0.14985 0.22522 0.28169 0.25574 0.13199 0.03067 0.27039-0.0091552 0.36576-0.10529l1.6193-1.6321h0.78066l0.88946 0.88944v0.78064l-1.6321 1.6193c-0.096133 0.095368-0.13596 0.23376-0.10529 0.36575 0.030518 0.13184 0.12741 0.2385 0.25575 0.28168 0.40086 0.13519 0.82064 0.2037 1.2473 0.2037 1.2723 0 2.4277-0.59296 3.1706-1.6267 0.69597-0.96878 0.91067-2.1559 0.60366-3.2916l2.3022-2.3021 0.52736 0.57282-0.24201 0.24185c-0.15259 0.15259-0.15259 0.39993 0 0.55252 0.15259 0.15244 0.39979 0.15244 0.55254 0l0.21912-0.21912 4.948 5.3745c0.0036623 0.0039673 0.0074771 0.007782 0.011292 0.011597 0.91556 0.91553 2.3989 0.91583 3.3149-1.526e-4 0.91342-0.91385 0.91342-2.4008 0-3.3147-0.0039674-0.0039674-0.0080873-0.0077821-0.012207-0.011597l-5.383-4.9384 0.21668-0.21668c0.15259-0.15244 0.15259-0.39978 0-0.55237-0.15259-0.15259-0.39979-0.15259-0.55254 0l-0.24033 0.24048-0.5739-0.52673 2.3133-2.3132c0.32884 0.087891 0.6682 0.13245 1.012 0.13245 2.154 0 3.9062-1.7523 3.9062-3.9061 0-0.42679-0.068514-0.84641-0.20371-1.2474-0.043184-0.12833-0.14985-0.22522-0.28169-0.25574zm-16.085 1.5787c-0.073244-0.073395-0.17258-0.11078-0.27635-0.11078l-0.88351-3.051e-4 -1.3865-2.3148 0.67339-0.67337 2.3109 1.3867v0.88348c0 0.10345 0.041047 0.20264 0.11414 0.27588l4.9086 4.9196-0.55254 0.55237-4.9081-4.9188zm9.9364 7.6196 5.4013 4.955c0.60335 0.60974 0.60152 1.597-0.005646 2.2044-0.60854 0.60852-1.5937 0.61035-2.2047 0.0053405l-4.9641-5.392 1.7731-1.7728zm-0.57619-0.52872-1.7266 1.7262-0.52736-0.57282 1.68-1.6801 0.5739 0.52673zm3.3044-4.0416c-0.34165 0-0.67766-0.054779-0.99841-0.16281-0.14054-0.04715-0.29588-0.010834-0.40086 0.093994-1.9584 1.9583-6.1782 6.1778-7.732 7.7318-0.10498 0.10498-0.14145 0.26032-0.093997 0.401 0.32472 0.9642 0.16938 1.9926-0.42634 2.822-0.59404 0.82687-1.5184 1.3013-2.5359 1.3013-0.11429 0-0.22797-0.006256-0.34059-0.018311l1.2407-1.2311c0.073855-0.073242 0.11551-0.17303 0.11551-0.27725v-1.105c0-0.10361-0.0412-0.20294-0.11444-0.27618l-1.1184-1.1183c-0.073244-0.073242-0.17258-0.11444-0.27619-0.11444h-1.1051c-0.10422 0-0.20402 0.041657-0.27741 0.11551l-1.231 1.2407c-0.012207-0.11261-0.018311-0.22629-0.018311-0.34058 0-1.0176 0.47426-1.9418 1.3013-2.5359 0.82919-0.5957 1.8578-0.75119 2.8222-0.42633 0.14054 0.047455 0.29588 0.010986 0.40086-0.093994 0.021516-0.021362 7.7265-7.7263 7.732-7.7318 0.10498-0.10498 0.1413-0.26016 0.093997-0.40085-0.32487-0.9642-0.16984-1.9923 0.42543-2.821 0.5945-0.82764 1.5191-1.3022 2.5367-1.3022 0.1178 0 0.23484 0.0065613 0.35081 0.019379l-1.2149 1.2331c-0.072024 0.07309-0.11231 0.17151-0.11231 0.27405v1.105c0 0.10132 0.039216 0.19852 0.10956 0.2713l1.0793 1.1183c0.07355 0.076294 0.17502 0.11932 0.28108 0.11932h1.1051c0.10407 0 0.20386-0.041504 0.27726-0.11551l1.231-1.2405c0.012207 0.11261 0.018311 0.22629 0.018311 0.34058 0 1.723-1.4019 3.1249-3.1249 3.1249z\\"/></g></g></svg>","themeGroup":"control"},"options":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"hoverCursor":"pointer"},"rectOption":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"fill":"#f05958","rx":5,"ry":5,"hoverCursor":"pointer"},"textOption":{"originX":"center","originY":"center","fontFamily":"\\"Aktiv-Grotesk\\", \\"Helvetica, Arial\\", \\"sans-serif\\"","fill":"#fff","setStroke":"#fff","fontSize":"14"}},{"_name":"READINGS","label":"com.facilio.floorplan.readings","uid":"com.facilio.floorplan.readings","template":{"svg":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?><svg width=\\"21px\\" height=\\"28px\\" viewBox=\\"0 0 21 28\\" version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\"><title>energy</title><desc>Created with Sketch.</desc><g id=\\"Page-1\\" stroke=\\"none\\" stroke-width=\\"1\\" fill=\\"none\\" fill-rule=\\"evenodd\\"><g id=\\"energy-icon\\" transform=\\"translate(-15.000000, -11.000000)\\" fill=\\"#ffffff\\" fill-rule=\\"nonzero\\"><g id=\\"image-1\\"><path d=\\"M15.5453798,27.2990766 L15.4928114,27.405934 C15.1673333,28.1597184 15.7259056,29.0178646 16.57203,29.0180636 L25.018,29.021 L25.018538,37.4384365 C25.018538,38.6413853 26.6321463,39.0458886 27.215772,37.9998259 L35.4573361,22.6992051 L35.5096771,22.5934172 C35.8336582,21.8467797 35.2765046,20.9869805 34.4299322,20.9851903 L26.22,20.967 L26.2206157,12.5614528 C26.2206157,11.3568842 24.603297,10.9538264 24.0219128,12.0030109 L15.5453798,27.2990766 Z M25.02,12.676 L25.0206157,22.1657048 L34.371,22.185 L26.218,37.32 L26.218538,27.8213238 L16.628,27.818 L25.02,12.676 Z\\" id=\\"energy\\"></path></g> </g></g></svg>","themeGroup":"control"},"options":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"hoverCursor":"pointer"},"rectOption":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"fill":"#48ba61","rx":0,"ry":0,"hoverCursor":"pointer"},"textOption":{"originX":"center","originY":"center","fontFamily":"\\"Aktiv-Grotesk\\", \\"Helvetica, Arial\\", \\"sans-serif\\"","fill":"#fff","setStroke":"#fff","fontSize":"14"}},{"_name":"FAN","label":"floorplan.control.fan.on","uid":"com.facilio.floorplan.control.fan.on","template":{"svg":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?><svg width=\\"36px\\" height=\\"36px\\" viewBox=\\"0 0 36 36\\" version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\"><title>Fan with base</title><desc>Created with Sketch.</desc><defs><linearGradient x1=\\"79.0215099%\\" y1=\\"91.770871%\\" x2=\\"18.02391%\\" y2=\\"12.580571%\\" id=\\"linearGradient-1\\"><stop stop-color=\\"#42535E\\" offset=\\"0%\\"></stop><stop stop-color=\\"#1F2930\\" offset=\\"100%\\"></stop></linearGradient><linearGradient x1=\\"87.463788%\\" y1=\\"16.0727894%\\" x2=\\"23.4200858%\\" y2=\\"89.0030632%\\" id=\\"linearGradient-2\\"><stop stop-color=\\"#99ACB9\\" offset=\\"0%\\"></stop><stop stop-color=\\"#DBE1E6\\" offset=\\"100%\\"></stop></linearGradient></defs><g id=\\"AHU-Illustration\\" stroke=\\"none\\" stroke-width=\\"1\\" fill=\\"none\\" fill-rule=\\"evenodd\\"><g id=\\"Components\\" transform=\\"translate(-424.000000, -287.000000)\\"><g id=\\"Fan-with-base\\" transform=\\"translate(424.000000, 287.000000)\\"><g id=\\"Group-27-Copy-5\\" transform=\\"translate(18.000000, 18.000000) scale(-1, 1) translate(-18.000000, -18.000000) \\"><circle id=\\"Oval\\" fill=\\"#00BCD4\\" cx=\\"18\\" cy=\\"18\\" r=\\"18\\"></circle><circle id=\\"Oval\\" fill=\\"url(#linearGradient-2)\\" cx=\\"18\\" cy=\\"18\\" r=\\"3\\"></circle><ellipse id=\\"Oval\\" fill=\\"url(#linearGradient-2)\\" cx=\\"18\\" cy=\\"8.5\\" rx=\\"4\\" ry=\\"5.5\\"></ellipse><ellipse id=\\"Oval-Copy-6\\" fill=\\"url(#linearGradient-2)\\" transform=\\"translate(18.000000, 27.500000) scale(-1, -1) translate(-18.000000, -27.500000) \\" cx=\\"18\\" cy=\\"27.5\\" rx=\\"4\\" ry=\\"5.5\\"></ellipse><ellipse id=\\"Oval-Copy-7\\" fill=\\"url(#linearGradient-2)\\" transform=\\"translate(27.500000, 18.000000) rotate(90.000000) translate(-27.500000, -18.000000) \\" cx=\\"27.5\\" cy=\\"18\\" rx=\\"4\\" ry=\\"5.5\\"></ellipse><ellipse id=\\"Oval-Copy-8\\" fill=\\"url(#linearGradient-2)\\" transform=\\"translate(8.500000, 18.000000) scale(-1, -1) rotate(90.000000) translate(-8.500000, -18.000000) \\" cx=\\"8.5\\" cy=\\"18\\" rx=\\"4\\" ry=\\"5.5\\"></ellipse></g></g></g></g></svg>\',\\r\\n","themeGroup":"control"},"options":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40},"rectOption":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"fill":"#017aff","hoverCursor":"pointer"},"textOption":{"originX":"center","originY":"center","fontFamily":"\\"Aktiv-Grotesk\\", \\"Helvetica, Arial\\", \\"sans-serif\\"","fill":"#fff","setStroke":"#fff","fontSize":"13"}},{"_name":"Humidity","label":"com.facilio.floorplan.humidity","uid":"com.facilio.floorplan.humidity","template":{"svg":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?> <svg width=\\"50px\\" height=\\"50px\\" viewBox=\\"0 0 50 50\\" version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\"> <g id=\\"humidity\\" stroke=\\"none\\" stroke-width=\\"1\\" fill=\\"none\\" fill-rule=\\"evenodd\\"> <g id=\\"image-1\\" fill-rule=\\"nonzero\\"> <rect id=\\"Rectangle\\" fill=\\"#14BAF2\\" x=\\"0\\" y=\\"0\\" width=\\"50\\" height=\\"50\\" rx=\\"5\\"></rect> <g id=\\"humidity\\" transform=\\"translate(15.000000, 12.000000)\\" stroke=\\"#FFFFFF\\" stroke-width=\\"1.3\\"> <path d=\\"M10,0.65 C9.88428363,0.65 9.76852662,0.687855483 9.67271046,0.763751515 C8.4180794,1.75358511 6.49448049,3.68635256 4.93680095,5.72991799 C2.50073245,8.93732961 0.65,12.7880442 0.65,16.786841 C0.65,19.3064605 1.60791704,21.6025054 3.17264415,23.3135457 C4.74334052,25.0311134 6.92588324,26.1594537 9.36325228,26.3281092 C12.0649912,26.5132948 14.556735,25.5108398 16.37475,23.7765464 C18.2025937,22.0328768 19.35,19.5499765 19.35,16.786841 C19.35,13.1199961 17.772251,9.19465462 14.8273938,5.42336788 C12.6144461,2.58900047 10.4208971,0.837608547 10,0.65 Z\\" id=\\"Path\\"></path> <path d=\\"M8.02706166,21.941818 C5.71458515,20.0692794 4.35523149,17.7337669 4.35523149,14.4935207\\" id=\\"Path\\" stroke-linecap=\\"round\\"></path> </g> </g> </g> </svg>","themeGroup":"control"},"options":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40},"rectOption":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"fill":"#14BAF2","hoverCursor":"pointer"},"textOption":{"originX":"center","originY":"center","fontFamily":"\\"Aktiv-Grotesk\\", \\"Helvetica, Arial\\", \\"sans-serif\\"","fill":"#fff","setStroke":"#fff","fontSize":"13"}},{"_name":"Occupancy","label":"com.facilio.floorplan.occupancy","uid":"com.facilio.floorplan.occupancy","template":{"svg":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?><svg width=\\"50\\" height=\\"50\\" xmlns=\\"http://www.w3.org/2000/svg\\"><g fill=\\"none\\" fill-rule=\\"evenodd\\"><rect fill=\\"#30C5BB\\" fill-rule=\\"nonzero\\" width=\\"50\\" height=\\"50\\" rx=\\"5\\"/><path d=\\"M30.248 29.216C36.126 30.792 39.043 34.054 39 39H11v-.107c.353-5.65 3.367-8.815 9.04-9.497 3.477 1.915 6.88 1.855 10.208-.18zm-5.366-17.765c4.328 0 6.493 2.319 6.493 6.957-.395 6.544-2.578 9.717-6.549 9.52-3.97-.197-6.153-3.37-6.548-9.52.074-4.638 2.276-6.957 6.604-6.957z\\" stroke=\\"#FFF\\" stroke-width=\\"1.3\\"/></g></svg>\',\\r\\n","themeGroup":"control"},"options":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40},"rectOption":{"originX":"center","originY":"center","lockUniScaling":true,"lockScalingFlip":true,"lockRotation":true,"width":40,"height":40,"fill":"#30C5BB","hoverCursor":"pointer"},"textOption":{"originX":"center","originY":"center","fontFamily":"\\"Aktiv-Grotesk\\", \\"Helvetica, Arial\\", \\"sans-serif\\"","fill":"#fff","setStroke":"#fff","fontSize":"13"}}]}]}');
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/58661.js.map