"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[82607,3710,32686,80865,53021],{
/***/703117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AlarmModel}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AlarmModel.vue?vue&type=template&id=5b251d32
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{background:"#fff",width:"400px",height:"420px !important"}},[_vm._m(0),_c("div",{staticClass:"model-container",staticStyle:{background:"#fff"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Category")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.category,callback:function($$v){_vm.$set(_vm.alarmRequest,"category",$$v)},expression:"alarmRequest.category"}},_vm._l(_vm.ticketcategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:category.id}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Team/Staff")]),_c("div",{staticStyle:{border:"1px solid #d8dce5",display:"inline-block",position:"relative",width:"100%",height:"40px","line-height":"40px","padding-left":"10px","padding-right":"10px","border-radius":"3px"}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.alarmRequest)))]),_vm._m(1),_c("f-assignment",{attrs:{model:_vm.alarmRequest,viewtype:"form"}})],1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Priority")]),_c("el-select",{staticClass:"fc-input-full-border2 width100",model:{value:_vm.alarmRequest.priority,callback:function($$v){_vm.$set(_vm.alarmRequest,"priority",$$v)},expression:"alarmRequest.priority"}},_vm._l(_vm.ticketpriority,(function(priority){return _c("el-option",{key:priority.priority,attrs:{label:priority.displayName,value:parseInt(priority.id)}})})),1),_c("p",{staticClass:"fc-input-label-txt mT20"},[_vm._v("Site")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-input-full-border2 width100",attrs:{filterable:"",clearable:"","collapse-tags":"",placeholder:"Sites"},model:{value:_vm.alarmRequest.siteId,callback:function($$v){_vm.$set(_vm.alarmRequest,"siteId",$$v)},expression:"alarmRequest.siteId"}},_vm._l(_vm.sites,(function(site,index){return _c("el-option",{key:index,attrs:{label:site.name,value:site.id}})})),1)],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{background:"#fff"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",on:{click:function($event){return _vm.createWO()}}},[_vm._v("CREATE")])],1)])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{padding:"20px 20px 10px 20px"},attrs:{label:"Create Workorder"}},[_c("div",{staticClass:"setup-modal-title"},[_vm._v("Create workorder")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",{staticStyle:{float:"right"}},[_c("i",{staticClass:"el-icon-arrow-down",staticStyle:{position:"relative",top:"-4px",right:"3px",color:"#c0c4cc"}})])}],objectSpread2=__webpack_require__(595082),vuex_esm=__webpack_require__(420629),FAssignment=__webpack_require__(383274),TeamStaffMixin=__webpack_require__(462599),AlarmModelvue_type_script_lang_js={props:["id"],components:{FAssignment:FAssignment/* default */.Z},mixins:[TeamStaffMixin/* default */.Z],data:function(){return{alarmRequest:{category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},siteId:null,priority:null}}},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},sites:function(state){return state.sites},ticketcategory:function(state){return state.ticketCategory},ticketpriority:function(state){return state.ticketPriority}})),methods:{createWO:function(event){this.$emit("submit",this.alarmRequest)},closeDialog:function(){this.reset(),this.$emit("closed")},reset:function(){this.alarmRequest={category:null,assignedTo:{id:-1},assignmentGroup:{id:-1},priority:null}}}},components_AlarmModelvue_type_script_lang_js=AlarmModelvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmModelvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmModel=component.exports},
/***/447745:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return alarmSwitch_AlarmList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/alarmSwitch/AlarmList.vue?vue&type=template&id=585cb7a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.layout?_c(_vm.layout,{ref:"alarm",tag:"component",on:{syncCount:_vm.callbackMethod,showTag:_vm.showTagInList}}):_vm._e()},staticRenderFns=[],AlarmsListvue_type_template_id_3b4096ab_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"layout container",staticStyle:{"padding-bottom":"100px"}},[-1===_vm.openAlarmId?_c("div",{staticClass:"pL10 pR10 height100 scrollable mT10",staticStyle:{"padding-bottom":"0px"}},[_c("div",{staticClass:"row full-layout-white fc-border-1 alarm-table scrollbar-style",staticStyle:{"padding-bottom":"20px","overflow-x":"scroll",display:"block"}},[_c("table",{staticClass:"fc-list-view-table fc-alarm-summary-table"},[_c("thead",[_vm.canShowColumn("severity")?_c("th",{staticClass:"text-left"}):_vm._e(),_c("th",{staticClass:"text-left uppercase",staticStyle:{width:"350px"}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.message"))+" ")]),_vm._l(_vm.viewColumns,(function(field,index){return _vm.isFixedColumn(field.name)?_vm._e():_c("th",{key:index,staticClass:"uppercase"},[_c("div",{class:{"text-center":"modifiedTime"===field.name}},[_vm._v(" "+_vm._s(field.displayName)+" ")])])})),_vm.canShowColumn("noOfEvents")?_c("th"):_vm._e(),_vm.canShowColumn("acknowledgedBy")?_c("th",{staticClass:"text-left uppercase"}):_vm._e(),_c("th")],2),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_c("tbody",{staticClass:"scrollable"},[_vm.alarms.length?_vm._l(_vm.alarms,(function(alarm,index){return _c("tr",{key:index,staticClass:"tablerow"},[_vm.canShowColumn("severity")?_c("td",[alarm.severity?_c("div",{staticClass:"q-item-label self-center f10 secondary-color",staticStyle:{"min-width":"90px","margin-left":"13%"}},[_c("div",{staticClass:"q-item-label uppercase severityTag",style:{"background-color":_vm.getAlarmSeverity(alarm.severity.id).color}},[_vm._v(" "+_vm._s(alarm.severity.id?_vm.getAlarmSeverity(alarm.severity.id).displayName:"---")+" ")])]):_vm._e()]):_vm._e(),_c("td",{on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("div",{staticClass:"q-item-main q-item-section",staticStyle:{"min-width":"250px"}},[_c("div",{staticClass:"q-item-sublabel ellipsis",staticStyle:{"margin-top":"5px","font-size":"12px"}},[_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(alarm.serialNumber))])]),_c("div",{staticClass:"q-item-label fw5",staticStyle:{"margin-top":"1px","font-size":"15px","letter-spacing":"0.3px"}},[_vm._v(" "+_vm._s(alarm.subject)+" ")]),_c("div",{staticClass:"ellipsis",staticStyle:{"font-size":"12px",color:"#8a8a8a","margin-top":"5px"}},[_c("span",{},[_vm._v(_vm._s(_vm._f("fromNow")(alarm.modifiedTime)))])])])]),_vm._l(_vm.viewColumns,(function(field,index){return _vm.isFixedColumn(field.name)?_vm._e():_c("td",{key:index},["alarmType"===field.name?_c("div",[_c("span",{staticClass:"q-item-label",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(_vm._s(alarm.alarmTypeVal?alarm.alarmTypeVal:"---"))])]):"modifiedTime"===field.name?_c("div",{staticStyle:{"min-width":"150px"},on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+alarm.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n                    html: '#timer_popover_' + alarm.id,\n                    distance: 0,\n                    interactive: true,\n                    theme: 'light',\n                    animation: 'scale',\n                    arrow: true,\n                  }"}],staticClass:"alarm-timer p10",attrs:{time:alarm.modifiedTime,title:_vm._f("formatDate")(alarm.modifiedTime)}}),_c("div",{staticClass:"hide",attrs:{id:"timer_popover_"+alarm.id}},[_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.5px",color:"#666666"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(alarm.modifiedTime))+" ")])])],1):"previousSeverity"===field.name&&alarm.previousSeverity?_c("div",{staticClass:"q-item-label self-center f10 secondary-color"},[_c("div",{staticClass:"q-item-label uppercase",class:alarm.previousSeverity?{severityTag:!0}:"",style:{"background-color":_vm.getAlarmSeverity(alarm.previousSeverity.id).color}},[_vm._v(" "+_vm._s(alarm.previousSeverity?_vm.getAlarmSeverity(alarm.previousSeverity.id).displayName:"---")+" ")])]):_c("div",{staticStyle:{width:"200px","max-width":"200px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},[_c("span",{staticClass:"q-item-label",staticStyle:{"font-size":"13px","letter-spacing":"0.4px"}},[_vm._v(_vm._s(_vm.getColumnDisplayValue(field,alarm)))]),"resource"===field.name&&alarm.resource&&alarm.resource.space&&alarm.resource.space.id>0?_c("div",{staticStyle:{"padding-top":"5px"}},[_c("img",{staticClass:"flLeft",staticStyle:{height:"11px",width:"12px","margin-right":"3px"},attrs:{src:__webpack_require__(572902)}}),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flLeft q-item-label ellipsis",staticStyle:{"max-width":"85%","font-size":"10px"},attrs:{small:"","data-position":"bottom",title:alarm.resource.space.name}},[_vm._v(_vm._s(alarm.resource.space.name))])]):_vm._e()])])})),_vm.canShowColumn("noOfEvents")?_c("td",[alarm.noOfEvents>0?_c("div",{staticStyle:{width:"55px"}},[_vm._m(0,!0),_c("span",{staticClass:"flLeft pL5"},[_vm._v(_vm._s(alarm.noOfEvents))]),_c("div",{staticStyle:{clear:"both"}})]):_vm._e()]):_vm._e(),_vm.canShowColumn("acknowledgedBy")?_c("td",[_vm.$hasPermission("alarm:ACKNOWLEDGE_ALARM")?_c("div",{staticClass:"pull-left",staticStyle:{"font-size":"13px",color:"#383434","white-space":"nowrap"}},[!alarm.isAcknowledged&&_vm.isActiveAlarm(alarm)?_c("q-btn",{staticClass:"uppercase fia-alert-btn",attrs:{color:"secondary",small:"",outline:""},on:{click:function($event){return _vm.acknowledgeAlarm({alarm:alarm,isAcknowledged:!0,acknowledgedBy:_vm.$account.user})}}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledge")))]):_vm.isActiveAlarm(alarm)?_c("span",{staticClass:"q-item-label f11"},[_c("div",{staticClass:"hide ackhover",attrs:{id:"contentpopup2_"+alarm.id}},[_c("div",[_c("div",{staticClass:"ackhover-row"},[_c("div",{staticClass:"hover-row"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.acknowledge_by"))+" ")]),_c("div",{staticClass:"hover-row"},[_c("span",[_c("user-avatar",{attrs:{size:"sm",user:_vm.getUserName(alarm.acknowledgedBy.id)}})],1)]),_c("div",{staticClass:"hover-row"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.acknowledgedTime>0?alarm.acknowledgedTime:new Date))+" ")])])])]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"contentpopup2_"+alarm.id,interactive:!0,reactive:!0,distance:15,theme:"light",animation:"scale"},expression:"{\n                      html: 'contentpopup2_' + alarm.id,\n                      interactive: true,\n                      reactive: true,\n                      distance: 15,\n                      theme: 'light',\n                      animation: 'scale',\n                    }"}],staticClass:"f11 pB10",staticStyle:{"font-size":"14px","letter-spacing":"0.3px",color:"#333333"}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledged")))]),_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.4px","text-align":"left",color:"#8a8a8a","padding-top":"5px"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.acknowledgedTime>0?alarm.acknowledgedTime:new Date))+" ")])]):_c("span",{staticClass:"q-item-label"})],1):_vm._e()]):_vm._e(),_c("td",{staticClass:"self-center secondary-color"},[_c("q-icon",{staticStyle:{float:"right","font-size":"20px",color:"#d8d8d8"},attrs:{slot:"right",name:"more_vert"},slot:"right"},[_c("q-popover",{ref:"moreactionspopover",refInFor:!0},[_vm.isActiveAlarm(alarm)?_c("q-list",{staticClass:"no-border",attrs:{link:""}},[_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.clear")},on:{click:function($event){_vm.updateAlarmStatus({alarm:alarm,severity:_vm.severityStatus.find((function(status){return"Clear"===status.severity}))}),_vm.$refs.moreactionspopover[index].close()}}})],1),_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common._common.delete")},on:{click:function($event){_vm.deleteAlarm([alarm.id]),_vm.$refs.moreactionspopover[index].close()}}})],1),alarm.woId>0?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.view_workorder")},on:{click:function($event){_vm.viewAlarm(alarm.woId),_vm.$refs.moreactionspopover[index].close()}}})],1):_vm.$hasPermission("alarm:CREATE_WO")?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.create_workorder")},on:{click:function($event){_vm.createWoDialog([alarm.id]),_vm.$refs.moreactionspopover[index].close()}}})],1):_vm._e()],1):_c("q-list",{staticClass:"no-border",attrs:{link:""}},[_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common._common.delete")},on:{click:function($event){_vm.deleteAlarm([alarm.id]),_vm.$refs.moreactionspopover[index].close()}}})],1)],1)],1)],1)],1)],2)})):_c("tr",{staticClass:"nowotd"},[_c("td",{attrs:{colspan:"100%"}},[_c("div",{staticClass:"fia-tabel-nocontent"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.no_alarms_found"))+" ")])])]),_vm.fetchingMore?_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.fetchingMore,size:"50"}})],1)]):_vm._e()],2)]),_c("span",{staticClass:"view-column-chooser",on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("img",{staticStyle:{"text-align":"center",position:"absolute",top:"36%",right:"25%"},attrs:{src:__webpack_require__(266707)}})])])]):_c("div",{staticClass:"fc-column-view height100 border-border-none"},[_c("div",{staticClass:"row fc-column-view-title height100"},[_c("div",{staticClass:"col-4 fc-column-view-left height100",staticStyle:{"max-width":"26.3333%",flex:"0 0 26.3333%"}},[_c("div",{staticClass:"row container col-header pL20"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"pull-left"},[_c("el-dropdown",{staticClass:"alarm-dp",on:{command:_vm.openChild}},[_c("span",{staticClass:"el-dropdown-link pointer"},[_vm._v(" "+_vm._s(_vm.currentViewDetail.displayName)),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{staticClass:"wo-dropdownmenu",attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.getviewtype(),(function(view,idx){return view.name!==_vm.currentViewDetail.name?_c("el-dropdown-item",{key:idx,attrs:{command:view.name}},[_vm._v(" "+_vm._s(view.displayName)+" ")]):_vm._e()})),1)],1)],1)])]),_vm.loading?_c("div",{staticClass:"row fia-tabel-nocontent"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",[_c("div",{staticClass:"row fc-column-view-records height100",staticStyle:{background:"#fff"}},[_c("table",{staticClass:"fc-list-view-table",staticStyle:{height:"calc(100vh - 100px)","overflow-y":"scroll",display:"block","padding-bottom":"60px"}},[_vm.alarms.length?_c("tbody",_vm._l(_vm.alarms,(function(alarm,index){return _c("tr",{key:index,staticClass:"tablerow",class:{active:_vm.openAlarmId===alarm.id},on:{click:function($event){return _vm.opensummary(alarm.id)}}},[_c("td",{staticClass:"text-left width100 pL5"},[_c("div",{staticClass:"q-item-main q-item-section pL10"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fw5 workRequest-heading f14 textoverflow-height-ellipsis",attrs:{title:alarm.Subject}},[_vm._v(" "+_vm._s(alarm.subject)+" ")]),_c("div",{staticClass:"flex-middle pT5"},[_c("div",{staticClass:"uppercase fc-id"},[_vm._v(" #"+_vm._s(alarm.serialNumber)+" ")]),_c("div",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"fc-grey2-text12"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(alarm.modifiedTime))+" ")])])])]),alarm.severity?_c("td",{staticClass:"text-left"},[_c("span",{staticClass:"ellipsis pT5"},[_c("span",{staticClass:"q-item-label"},[_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getAlarmSeverity(alarm.severity.id).color},attrs:{"aria-hidden":"true"}})]),_c("span",{staticClass:"q-item-label uppercase secondary-color",staticStyle:{"font-size":"10px","letter-spacing":"0.7px",color:"#333333"}},[_vm._v(_vm._s(_vm.getAlarmSeverity(alarm.severity.id).displayName))])])]):_vm._e()])})),0):_vm._e()])])])]),_c("div",{staticClass:"col-8 fc-column-alarm-right new-alarm-summ-bg",staticStyle:{"max-width":"73.6667%",flex:"0 0 73.6667%"}},[_c("div",{attrs:{slot:"right"},slot:"right"},[_c("router-view",{attrs:{name:"summary"}})],1)])])]),_c("q-modal",{ref:"createNewAlarmModel",attrs:{position:"right","content-classes":"fc-create-record"},on:{close:_vm.closeDialog}},[_c("q-btn",{attrs:{flat:""},on:{click:function($event){return _vm.$refs.createNewAlarmModel.close()}}},[_c("q-icon",{attrs:{name:"close"}})],1),_c("new-alarm",{on:{closed:_vm.closeDialog}})],1),_c("q-modal",{ref:"createWOModel",attrs:{noBackdropDismiss:"","content-classes":"fc-model","content-css":{padding:"0px",background:"#f7f8fa",Width:"10vw",Height:"30vh"}}},[_c("alarm-model",{ref:"confirmWoModel",on:{submit:_vm.createWO,closed:_vm.closeWoDialog}})],1),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:"alarm",viewName:_vm.currentView},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}})],1)},AlarmsListvue_type_template_id_3b4096ab_staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flLeft"},[_c("img",{staticClass:"flLeft",staticStyle:{width:"15px"},attrs:{src:__webpack_require__(912146)}})])}],objectSpread2=__webpack_require__(595082),User=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(426803)),Timer=__webpack_require__(114857),NewAlarm=__webpack_require__(430797),vuex_esm=__webpack_require__(420629),AlarmModel=__webpack_require__(703117),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ColumnCustomization=__webpack_require__(490966),ViewMixin=__webpack_require__(453877),columnConfigUtil=__webpack_require__(486613),quasar_esm=__webpack_require__(641358),log_map_state=__webpack_require__(766331),AlarmsListvue_type_script_lang_js={mixins:[ViewMixin/* default */.Z],data:function(){return{createWoIds:[],loading:!0,fetchingMore:!1,sortConfig:{orderBy:{label:this.$t("alarm.alarm.date_modified"),value:"modifiedTime"},orderType:"desc",list:[{label:this.$t("maintenance.wr_list.created_on"),value:"createdTime"},{label:this.$t("maintenance.wr_list.due_by_time"),value:"dueDate"},{label:this.$t("maintenance.wr_list.subject"),value:"subject"}]},showColumnSettings:!1}},components:{QList:quasar_esm/* QList */.tu,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QIcon:quasar_esm/* QIcon */.oF,QPopover:quasar_esm/* QPopover */.oe,QModal:quasar_esm/* QModal */.hc,NewAlarm:NewAlarm/* default */.Z,Timer:Timer/* default */.Z,UserAvatar:User/* default */.Z,QBtn:quasar_esm/* QBtn */.OV,AlarmModel:AlarmModel/* default */.Z,ColumnCustomization:ColumnCustomization/* default */.Z},directives:{infiniteScroll:vue_infinite_scroll_default()},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadGroups"),this.loadAlarms()},mounted:function(){this.loadAlarmCount()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},views:function(state){return state.view.views},severityStatus:function(state){return state.alarmSeverity},currentViewDetail:function(state){return state.view.currentViewDetail}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketPriority","getTicketCategory","getAlarmSeverity"])),{},{alarms:function(){return this.$store.state.alarm.alarms.filter((function(n){return n}))},openAlarmId:function(){return this.$route.params.id?(this.$emit("showTag",!1),parseInt(this.$route.params.id)):(this.$emit("showTag",!0),-1)},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:"all"},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},sorting:function(){return this.$store.state.alarm.sorting},searchQuery:function(){return this.$store.state.alarm.quickSearchQuery},scrollDisabled:function(){return this.loading||!this.canLoadMore||this.fetchingMore},page:function(){return this.$route.query.page||1},columnConfig:function(){return(0,columnConfigUtil/* getColumnConfig */.U)("alarm")}}),watch:{currentView:function(newVal,oldVal){oldVal!==newVal&&(this.loadAlarms(),this.loadAlarmCount())},filters:function(newVal){this.loadAlarms(),this.loadAlarmCount()},sorting:function(newVal){this.sortConfig.orderBy=this.sorting.orderBy,this.sortConfig.orderType=this.sorting.orderType,this.loadAlarms(),this.loadAlarmCount()},page:function(newVal,oldVal){oldVal===newVal||this.loading||this.loadAlarms()},searchQuery:function(newVal){this.quickSearchQuery=this.searchQuery,this.loadAlarms(),this.loadAlarmCount()}},filters:{viewName:function(name){return"active"===name?"Active Alarms":"unacknowledged"===name?"Unacknowledged Alarms":"critical"===name?"Critical Alarms":"major"===name?"Major Alarms":"minor"===name?"Minor Alarms":"fire"===name?"Fire Alarms":"energy"===name?"Energy Alarms":"hvac"===name?"HVAC Alarms":"cleared"===name?"Cleared Alarms":"anomalies"===name?"Anomalies":"fire"===name?"Fire Alarms":"Alarms"}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({assignAlarmApi:"alarm/assignAlarm",updateAlarmStatus:"alarm/updateAlarmStatus",notifyAlarm:"alarm/notifyAlarm",acknowledgeAlarm:"alarm/acknowledgeAlarm",createWoFromAlarm:"alarm/createWoFromAlarm",getRelatedWorkorderId:"alarm/getRelatedWorkorderId",deleteAlarm:"alarm/deleteAlarm"})),{},{getviewtype:function(){var group=this.$store.state.view.groupViews;if(group){for(var elem=[],types=[],len=group.length,itr=0;itr<len;itr++)elem.push(group[itr].views),types=types.concat(elem[itr]);return types}},openChild:function(viewNames){var self=this,queryObj={viewname:viewNames,page:this.page,filters:this.filters,orderBy:this.sortConfig.orderBy.value,orderType:this.sortConfig.orderType,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,isNew:!0};this.$store.dispatch("alarm/fetchAlarms",queryObj).then((function(response){if(self.$store.state.alarm.alarms.length>0)self.$router.push({path:"/app/fa/faults/"+viewNames+"/newsummary/"+self.$store.state.alarm.alarms[0].id,query:self.$route.query});else{var newPath=self.$route.path.substring(0,self.$route.path.indexOf("/alarms/"));newPath+="/alarms/"+viewNames,self.$router.push({path:newPath,query:self.$route.query})}}))},createWO:function(data){var self=this,fields={};data.category&&(fields.category={id:data.category,name:this.getTicketCategory(data.category).name}),data.priority&&(fields.priority={id:data.priority,name:this.getTicketPriority(data.priority)}),data.assignedTo&&(fields.assignedTo=data.assignedTo),data.assignmentGroup&&(fields.assignmentGroup=data.assignmentGroup),self.$store.dispatch("alarm/createWoFromAlarm",{id:self.createWoIds,fields:fields}).then((function(){self.$dialog.notify(self.$t("alarm.alarm.wo_created_success")),self.$refs["createWOModel"].close()}))},createWoDialog:function(idList){this.createWoIds=idList,this.$refs["createWOModel"].open(),this.$refs.confirmWoModel.reset()},closeWoDialog:function(){this.$refs["createWOModel"].close()},loadAlarms:function(){var self=this,queryObj={viewname:this.currentView,page:this.page,filters:this.filters,orderBy:this.sortConfig.orderBy.value,orderType:this.sortConfig.orderType,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,isNew:!0};self.$store.dispatch("alarm/fetchAlarms",queryObj).then((function(response){self.loading=!1,self.fetchingMore=!1})).catch((function(error){error&&(self.loading=!1,self.fetchingMore=!1)})),self.setTitle(self.$options.filters.viewName(self.currentView))},loadAlarmCount:function(){var params,self=this,queryObj={viewname:this.currentView,filters:this.filters,search:this.quickSearchQuery,criteriaIds:this.$route.query.criteriaIds,includeParentFilter:this.includeParentFilter,count:!0},url="/v2/alarms/alarmCount?viewName="+queryObj.viewname;params="isCount="+queryObj.count,queryObj.filters&&(params=params+"&filters="+encodeURIComponent(JSON.stringify(queryObj.filters))),queryObj.search&&(params=params+"&search="+queryObj.search),queryObj.criteriaIds&&(params=params+"&criteriaIds="+queryObj.criteriaIds),queryObj.includeParentFilter&&(params=params+"&includeParentFilter="+queryObj.includeParentFilter),url=url+"&"+params,self.$http.get(url).then((function(response){self.listcount=response.data.count,self.$emit("syncCount",response.data.result.count)})).catch((function(error){}))},isActiveAlarm:function(alarm){return"Clear"!==this.getAlarmSeverity(alarm.severity.id).severity},getUserName:function(id){return-1!==id&&id?this.$store.getters.getUser(id).name:"Unkown"},opensummary:function(id){this.$router.push({path:"/app/fa/faults/"+this.$route.params.viewname+"/newsummary/"+id,query:this.$route.query})},assignAlarm:function(alarm,userId,userName){var data={id:[alarm.id],alarm:{assignedTo:{id:userId,name:userName}}};this.assignAlarmApi({data:data,alarm:alarm})},viewAlarm:function(ticketId){var self=this;self.$router.push({path:"/app/wo/orders/summary/"+ticketId})},closeDialog:function(){},loadMore:function(){this.fetchingMore=!0,this.loadAlarms(!0)}})},v1_AlarmsListvue_type_script_lang_js=AlarmsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_AlarmsListvue_type_script_lang_js,AlarmsListvue_type_template_id_3b4096ab_render,AlarmsListvue_type_template_id_3b4096ab_staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmsList=component.exports,AlarmList=__webpack_require__(657763),AlarmListvue_type_script_lang_js={props:["config, widget"],components:{"old-alarm":AlarmsList,"new-alarm":AlarmList["default"]},computed:{layout:function(){return this.$helpers.isLicenseEnabled("NEW_ALARMS")?"new-alarm":"old-alarm"}},methods:{callbackMethod:function(val){this.$emit("syncCount",val)},showTagInList:function(val){this.$emit("showTag",val)}}},alarmSwitch_AlarmListvue_type_script_lang_js=AlarmListvue_type_script_lang_js,AlarmList_component=(0,componentNormalizer/* default */.Z)(alarmSwitch_AlarmListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,alarmSwitch_AlarmList=AlarmList_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/82607.js.map