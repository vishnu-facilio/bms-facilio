(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[74827],{
/***/608422:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return TenantSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/TenantSummary.vue?vue&type=template&id=a733716e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):_c("div",[_c("el-row",[_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"tenant-summary-detail-container"},[_c("div",{staticClass:"tenant-summary-scroll-layout"},[_c("div",{staticClass:"mL30 mR30 mT20"},[_c("div",{staticClass:"pointer",on:{click:_vm.back}},[_c("div",{staticClass:"col-6 label-txt-blue f10 text-uppercase"},[_c("i",{staticClass:"el-icon-back fw6 mR10"}),_vm._v(" "+_vm._s(_vm.$t("common._common.back_list"))+" ")])]),_vm.tenant.logoUrl?_c("div",{staticClass:"tenant-logo-img-block mT10 mB30"},[_c("img",{attrs:{src:_vm.tenant.logoUrl}})]):_vm._e(),_c("div",{staticClass:"tenant-name fwBold mT10"},[_vm._v(" "+_vm._s(_vm.tenant.name)+" ")]),_c("div",{staticClass:"tenant-location-block mT10"},[_c("span",[_c("img",{staticStyle:{height:"12px"},attrs:{src:__webpack_require__(533841)}})]),"Building"===_vm.tenant.space.spaceTypeVal&&_vm.tenant.space&&_vm.tenant.space.name?_c("span",{staticClass:"tenant-address"},[_vm._v(_vm._s(_vm.tenant.space.name))]):_vm._e()]),_c("ul",{staticClass:"tenant-count-list-block"},[_vm.userLists&&_vm.userLists.length?_c("li",{staticClass:"tenant-count-list"},[_c("span",{staticStyle:{"padding-right":"10px"}},[_c("img",{staticStyle:{height:"16px",width:"14px"},attrs:{src:__webpack_require__(535604)}})]),_c("span",{staticClass:"tenant-count-txt"},[_vm._v(_vm._s(_vm.userLists.length))]),_c("span",{staticClass:"tenant-meter-count"},[_vm._v(" "+_vm._s(1===_vm.userLists.length?"USER":"USERS"))])]):_vm._e(),_vm.enrgyMeters&&_vm.enrgyMeters.length?_c("li",{staticClass:"tenant-count-list"},[_c("span",{staticStyle:{"padding-right":"10px"}},[_c("img",{staticStyle:{height:"20px",position:"relative",top:"5px"},attrs:{src:__webpack_require__(343436)}})]),_c("span",{staticClass:"tenant-count-txt"},[_vm._v(_vm._s(_vm.enrgyMeters.length))]),_c("span",{staticClass:"tenant-meter-count"},[_vm._v("ENERGY "+_vm._s(1===_vm.enrgyMeters.length?"METER":"METERS"))])]):_vm._e(),_vm.waterMeters&&_vm.waterMeters.length?_c("li",{staticClass:"tenant-count-list"},[_c("span",{staticStyle:{"padding-right":"10px"}},[_c("img",{staticStyle:{height:"20px",position:"relative",top:"5px"},attrs:{src:__webpack_require__(343436)}})]),_c("span",{staticClass:"tenant-count-txt"},[_vm._v(_vm._s(_vm.waterMeters.length))]),_c("span",{staticClass:"tenant-meter-count"},[_vm._v("WATER "+_vm._s(1===_vm.waterMeters.length?"METER":"METERS"))])]):_vm._e(),_vm.naturalGas&&_vm.naturalGas.length?_c("li",{staticClass:"tenant-count-list"},[_c("span",{staticStyle:{"padding-right":"10px"}},[_c("img",{staticStyle:{height:"20px",position:"relative",top:"5px"},attrs:{src:__webpack_require__(343436)}})]),_c("span",{staticClass:"tenant-count-txt"},[_vm._v(_vm._s(_vm.naturalGas.length))]),_c("span",{staticClass:"tenant-meter-count"},[_vm._v(" "+_vm._s((_vm.naturalGas.length,"NATURAL GAS")))])]):_vm._e(),_vm.btu&&_vm.btu.length?_c("li",{staticClass:"tenant-count-list"},[_c("span",{staticStyle:{"padding-right":"10px"}},[_c("img",{staticStyle:{height:"20px",position:"relative",top:"5px"},attrs:{src:__webpack_require__(343436)}})]),_c("span",{staticClass:"tenant-count-txt"},[_vm._v(_vm._s(_vm.btu.length))]),_c("span",{staticClass:"tenant-meter-count"},[_vm._v("BTU "+_vm._s((_vm.btu.length,"BTU")))])]):_vm._e()]),_c("p",{staticClass:"tenant-description mT40"},[_vm._v(" "+_vm._s(_vm.tenant.description)+" ")])])])])]),_c("spinner",{attrs:{show:_vm.loading,size:"80"}}),_c("el-col",[_c("div",{staticClass:"tenant-summary-card-container"},[_c("div",{staticClass:"label-txt-black3"},[_vm._v(" USERS ")]),_c("div",{staticClass:"tenant-user-card-container"},[_c("div",{staticClass:"tenant-user-wrap"},[_c("el-row",[_vm._l(_vm.userLists,(function(user,i){return _c("el-col",{key:i,staticClass:"tenant-user-card text-center",attrs:{span:4}},[_c("div",{staticClass:"mT30"},[_c("user-avatar",{attrs:{size:"xlg",user:user.orgUser,showPopover:!1,name:!1}})],1),user.orgUser&&user.orgUser.name?_c("div",{staticClass:"contactinfo-name summary-name"},[_vm._v(" "+_vm._s(user.orgUser.name)+" ")]):_vm._e(),user.orgUser&&user.orgUser.email?_c("div",{staticClass:"contactinfo-email summary-email"},[_vm._v(" "+_vm._s(user.orgUser.email)+" ")]):_vm._e(),user.orgUser&&user.orgUser.mobile?_c("div",{staticClass:"fc-black-13 mT10"},[_vm._v(" "+_vm._s(user.orgUser.mobile)+" ")]):_vm._e(),_c("div",{staticClass:"portal-enable-section"},[_vm._v(" Portal Access "),_c("el-switch",{staticClass:"Notification-toggle mL40",attrs:{"active-color":"#ef4f8f","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.toggleAttribute(user)}},model:{value:user.orgUser.portal_verified,callback:function($$v){_vm.$set(user.orgUser,"portal_verified",$$v)},expression:"user.orgUser.portal_verified"}})],1)])})),_c("el-col",{staticClass:"tenant-user-card",attrs:{span:4}},[_c("div",{staticClass:"tenant-addUser-block"},[_c("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function($event){_vm.showDialog=!0}}}),_c("div",{staticClass:"add-us"},[_vm._v("ADD USER")]),_vm.showDialog?_c("new-requester",{attrs:{visibility:_vm.showDialog,source:"tenant"},on:{"update:visibility":function($event){_vm.showDialog=$event},saved:_vm.addusers}}):_vm._e()],1)])],2)],1)]),_c("div",{staticClass:"label-txt-black3 mT60"},[_vm._v(" ENERGY METERS ")]),_c("div",{staticClass:"tenant-user-wrap"},[_c("div",{staticClass:"tenant-user-card-container"},[_vm.tenant.utilityAssets.length?_c("el-row",_vm._l(_vm.tenant.utilityAssets,(function(utility,inx){return"ENERGY"===utility.utilityEnum?_c("el-col",{key:inx,staticClass:"tenant-user-card",attrs:{span:5}},[_c("div",{staticClass:"tenant-text-center-asset"},[_vm._v(" "+_vm._s(utility.asset.name)+" ")]),_c("div",{staticClass:"mL20 mT40"},[_c("div",{staticClass:"reading"},[_vm._v(" "+_vm._s(_vm.meterLists[utility.assetId])+"kwh ")]),_c("div",{staticClass:"tenant-timeperdiod"},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.this_month"))+" ")])]),_c("div",{staticClass:"portal-enable-section"},[_vm._v(" Show In Portal "),_c("el-switch",{staticClass:"mL40",attrs:{"active-color":"#ef4f8f","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.showInPortal(utility)}},model:{value:utility.showInPortal,callback:function($$v){_vm.$set(utility,"showInPortal",$$v)},expression:"utility.showInPortal"}})],1)]):_vm._e()})),1):_vm._e()],1)]),_vm._l(_vm.tenant.utilityAssets,(function(utility,inx){return"WATER"===utility.utilityEnum?_c("div",{key:inx,staticClass:"label-txt-black3 mT60"},[_vm._v(" WATER METERS ")]):_vm._e()})),_c("div",{staticClass:"tenant-user-wrap"},[_c("div",{staticClass:"tenant-user-card-container"},[_vm.tenant.utilityAssets.length?_c("el-row",_vm._l(_vm.tenant.utilityAssets,(function(utility,inx){return"WATER"===utility.utilityEnum?_c("el-col",{key:inx,staticClass:"tenant-user-card",attrs:{span:5}},[_c("div",{staticClass:"tenant-text-center-asset"},[_vm._v(" "+_vm._s(utility.asset.name)+" ")]),_c("div",{staticClass:"mL20 mT40"},[_c("div",{staticClass:"reading"},[_vm._v(" "+_vm._s(_vm.meterLists[utility.assetId])+"kwh ")]),_c("div",{staticClass:"tenant-timeperdiod"},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.this_month"))+" ")])]),_c("div",{staticClass:"portal-enable-section"},[_vm._v(" Show In Portal "),_c("el-switch",{staticClass:"mL40",attrs:{"active-color":"#ef4f8f","inactive-color":"#e5e5e5"}})],1)]):_vm._e()})),1):_vm._e()],1)]),_vm._l(_vm.tenant.utilityAssets,(function(utility,inx){return"NATURAL GAS"===utility.utilityEnum?_c("div",{key:inx,staticClass:"label-txt-black3 mT60"},[_vm._v(" Natural Gas ")]):_vm._e()})),_c("div",{staticClass:"tenant-user-wrap"},[_c("div",{staticClass:"tenant-user-card-container"},[_vm.tenant.utilityAssets.length?_c("el-row",_vm._l(_vm.tenant.utilityAssets,(function(utility,inx){return"NATURAL GAS"===utility.utilityEnum?_c("el-col",{key:inx,staticClass:"tenant-user-card",attrs:{span:5}},[_c("div",{staticClass:"tenant-text-center-asset"},[_vm._v(" "+_vm._s(utility.asset.name)+" ")]),_c("div",{staticClass:"mL20 mT40"},[_c("div",{staticClass:"reading"},[_vm._v(" "+_vm._s(_vm.meterLists[utility.assetId])+"kwh ")]),_c("div",{staticClass:"tenant-timeperdiod"},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.this_month"))+" ")])]),_c("div",{staticClass:"portal-enable-section"},[_vm._v(" Show In Portal "),_c("el-switch",{staticClass:"mL40",attrs:{"active-color":"#ef4f8f","inactive-color":"#e5e5e5"}})],1)]):_vm._e()})),1):_vm._e()],1)]),_vm._l(_vm.tenant.utilityAssets,(function(utility,inx){return"BTU"===utility.utilityEnum?_c("div",{key:inx,staticClass:"label-txt-black3 mT60"},[_vm._v(" BTU ")]):_vm._e()})),_c("div",{staticClass:"tenant-user-wrap"},[_c("div",{staticClass:"tenant-user-card-container"},[_vm.tenant.utilityAssets.length?_c("el-row",_vm._l(_vm.tenant.utilityAssets,(function(utility,inx){return"BTU"===utility.utilityEnum?_c("el-col",{key:inx,staticClass:"tenant-user-card",attrs:{span:5}},[_c("div",{staticClass:"tenant-text-center-asset"},[_vm._v(" "+_vm._s(utility.asset.name)+" ")]),_c("div",{staticClass:"mL20 mT40"},[_c("div",{staticClass:"reading"},[_vm._v(" "+_vm._s(_vm.meterLists[utility.assetId])+"kwh ")]),_c("div",{staticClass:"tenant-timeperdiod"},[_vm._v(" "+_vm._s(_vm.$t("common.date_picker.this_month"))+" ")])]),_c("div",{staticClass:"portal-enable-section"},[_vm._v(" Portal Access "),_c("el-switch",{staticClass:"Notification-toggle tenant-show-in-portal",attrs:{"active-color":"#ef4f8f","inactive-color":"#e5e5e5"}})],1)]):_vm._e()})),1):_vm._e()],1)])],2)])],1)],1)],1)},staticRenderFns=[],User=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(426803)),NewRequester=__webpack_require__(43584),TenantSummaryvue_type_script_lang_js={data:function(){return{tenant:null,loading:!0,userloading:!0,showDialog:!1,newtemp:!1,enrgyMeters:[],waterMeters:[],btu:[],naturalGas:[],user:{name:null,email:null,phone:null},userList:[],userLists:[],meterLists:[],portal_verified:null}},components:{UserAvatar:User/* default */.Z,NewRequester:NewRequester/* default */.Z},watch:{$route:function(){this.loadTenantsDetails()}},computed:{},mounted:function(){this.loadTenantsDetails(),this.loadMeterReadings()},methods:{prepareTenantInfo:function(data){this.enrgyMeters=data.utilityAssets.filter((function(rw){return"ENERGY"===rw.utilityEnum})),this.waterMeters=data.utilityAssets.filter((function(rw){return"WATER"===rw.utilityEnum})),this.naturalgas=data.utilityAssets.filter((function(rw){return"NATURAL GAS"===rw.utilityEnum})),this.btu=data.utilityAssets.filter((function(rw){return"BTU"===rw.utilityEnum}))},loadTenantsDetails:function(id){var self=this;self.loading=!0,self.$http.get("/tenant/"+this.$route.params.id).then((function(response){self.tenant=response.data?response.data:null,self.prepareTenantInfo(self.tenant),self.loading=!1,self.loadUsers()}))},addusers:function(data){var that=this,params={id:parseInt(this.$route.params.id),user:{name:data.name,email:data.email,phone:data.phone}};data.portal_verified&&(params.user.portal_verified=data.portal_verified),that.$http.post("/tenant/addTenantUser",params).then((function(response){that.userlist=response["data"].users,that.loading=!1,that.loadUsers()})).catch((function(error){that.loading=!1}))},loadUsers:function(){var that=this;
// that.$http.get('/tenant/getTenantUsers', params).then(function (response) {
this.userloading=!0,that.$http.post("/tenant/getTenantUsers",{tenantId:this.$route.params.id}).then((function(response){that.userLists=response["data"].tenantsUsers,that.userloading=!1,that.loadMeterReadings()})).catch((function(error){that.loading=!1}))},loadMeterReadings:function(){var that=this,assetId=[];
// assetId = tenant.utilityAssets.map(fn => fn.assetId)
this.tenant.utilityAssets.forEach((function(element){assetId.push(element.assetId)})),that.$http.post("/tenant/getmeterreadings",{meterId:assetId}).then((function(response){that.meterLists=response.data,
// that.meterLists.forEach(d => {
//   console.log('__________', d)
// })
that.userloading=!1}))},toggleAttribute:function(user){var self=this,params={user:{ouid:parseInt(user.orgUser.ouid),portal_verified:user.orgUser.portal_verified}};self.$http.post("/tenant/updateportalaccess",params).then((function(response){})).then((function(response){self.$message.success(" Portal access updated successfully")}))},showInPortal:function(utility){var self=this,params={tenantId:parseInt(this.$route.params.id),tenantMeterId:utility.assetId,show_In_Portal:utility.showInPortal};self.$http.post("/tenant/showinportal",params).then((function(response){})).then((function(response){self.$message.success(" Portal access updated successfully")}))},back:function(){this.$router.push("/app/setup/tenantbilling/tenant")}}},setup_TenantSummaryvue_type_script_lang_js=TenantSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_TenantSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TenantSummary=component.exports},
/***/343436:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"17729b7266140ce65e041a27e88fff8a.svg";
/***/},
/***/533841:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"b1712c276b061c2160f9ba173fcc3589.svg";
/***/},
/***/535604:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f49f37187665a74732170b8c31e9f82f.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/74827.js.map