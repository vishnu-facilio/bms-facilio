(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[93840],{
/***/885544:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return StateTransitionList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/StateTransitionList.vue?vue&type=template&id=9d0339de
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"wos-id pointer mB10",attrs:{title:"Back"},on:{click:function($event){return _vm.$router.back()}}},[_c("img",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"perspective"},expression:"{ arrow: true, animation: 'perspective' }"}],staticClass:"vertical-middle mR5 mL3",attrs:{src:__webpack_require__(528661),"data-position":"top",width:"12",height:"12"}}),_c("span",{staticClass:"fc-id"},[_vm._v("Back To Stateflows")])]),_c("div",{staticClass:"setting-form-title"},[_vm._v("State Transitions")]),_c("div",{staticClass:"heading-description"},[_vm._v(" List of configured state transitions ")])]),_c("div",{staticClass:"action-btn setting-page-btn mT25"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){_vm.showEditTransitionDialog=!0,_vm.isNew=!0,_vm.activeTransitionObj={}}}},[_vm._v("Add State Transition")]),_vm.showEditTransitionDialog?_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-right setup-dialog40 new-state-transition-dialog"}},[_c("new-state-transition",{attrs:{transitionObj:_vm.activeTransitionObj,stateFlowId:_vm.stateFlowId,stateFlowObj:_vm.stateFlow,isNew:_vm.isNew,module:_vm.module},on:{onClose:_vm.closeDialog,onTransitionUpdate:_vm.saveAndCloseDialog,onTransitionCreate:_vm.saveAndCloseDialog,onError:_vm.showError,onDelete:_vm.deleteTransitionObj}})],1):_vm._e()],1)]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_vm._m(0),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_vm.stateTransitions.length?_c("tbody",_vm._l(_vm.stateTransitions,(function(transition,index){return _c("tr",{key:index,staticClass:"tablerow"},[_c("td",{on:{click:function($event){return _vm.editTransition(transition)}}},[_vm._v(" "+_vm._s(transition.name)+" ")]),_c("td",{on:{click:function($event){return _vm.editTransition(transition)}}},[_vm._v(" "+_vm._s((_vm.$store.getters.getTicketStatus(transition.fromStateId,_vm.module)||{}).displayName)+" ")]),_c("td",{on:{click:function($event){return _vm.editTransition(transition)}}},[_vm._v(" "+_vm._s((_vm.$store.getters.getTicketStatus(transition.toStateId,_vm.module)||{}).displayName)+" ")]),_c("td",{staticStyle:{width:"15%"}},[_c("div",{staticClass:"text-left actions mT0 mR15 text-center"},[_c("i",{staticClass:"el-icon-delete pointer",on:{click:function($event){_vm.showDeleteDialog=!0,_vm.activeTransitionObj=transition}}})])])])})),0):_c("tbody",[_vm._m(1)])])])])]),_vm.showDeleteDialog?_c("delete-dialog",{on:{onClose:function($event){_vm.showDeleteDialog=!1},onSave:function($event){return _vm.deleteTransition(_vm.activeTransitionObj)}}}):_vm._e()],1)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("Name")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("From")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v("To")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v(" No transitions created yet. ")])])}],objectSpread2=__webpack_require__(595082),esm_typeof=__webpack_require__(103336),NewStateTransition=(__webpack_require__(260228),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(888776)),validation=__webpack_require__(990260),TransitionDeleteDialog=__webpack_require__(555563),StateTransitionListvue_type_script_lang_js={props:["stateFlowId","moduleName"],components:{NewStateTransition:NewStateTransition/* default */.Z,DeleteDialog:TransitionDeleteDialog/* default */.Z},data:function(){return{module:null,loading:!1,stateTransitions:[],showEditTransitionDialog:!1,isNew:!1,activeTransitionObj:{},stateFlow:{},showDeleteDialog:!1}},created:function(){(0,validation/* isEmpty */.xb)(this.module)&&!(0,validation/* isEmpty */.xb)(this.moduleName)&&(this.module=this.moduleName)},mounted:function(){var _this=this;this.$store.dispatch("loadTicketStatus",this.moduleName).then((function(){_this.loadStateFlowDetails(),_this.getStateTransitionsList()}))},methods:{loadStateFlowDetails:function(){var _this2=this;this.$http.get("/v2/stateflow/view?stateFlowId=".concat(this.stateFlowId)).then((function(response){_this2.stateFlow=response.data.result.stateFlow}))},getStateTransitionsList:function(){var _this3=this,module=this.module;return this.loading=!0,this.$http.post("/v2/statetransition/list",{moduleName:module,stateFlowId:this.stateFlowId}).then((function(_ref){var data=_ref.data;_this3.stateTransitions=data.result.stateTransitionList||[]})).catch((function(_ref2){var _ref2$message=_ref2.message,message=void 0===_ref2$message?"Error loading transitions":_ref2$message;_this3.$message.error(message)})).finally((function(){return _this3.loading=!1}))},editTransition:function(transition){this.activeTransitionObj=this.$helpers.cloneObject(transition),this.isNew=!1,this.showEditTransitionDialog=!0},
// showDeleteDialog({ id }) {
//   let dialogObj = {
//     title: 'Confirm Delete',
//     message: 'Are you sure you want to delete this transition?',
//     rbDanger: true,
//     rbLabel: 'Confirm',
//   }
//   this.$dialog.confirm(dialogObj).then(value => {
//     if (value) {
//       this.deleteTransition(id)
//     }
//   })
// },
deleteTransition:function(_ref3){var _this4=this,id=_ref3.id;return this.$http.post("/v2/statetransition/delete",{stateFlowId:this.stateFlowId,stateTransitionId:id}).then((function(response){if(0===response.data.responseCode){var index=_this4.stateTransitions.findIndex((function(transition){return transition.id===id}));_this4.stateTransitions.splice(index,1),_this4.closeDialog()}})).catch((function(response){_this4.$message.error(response.data.message||"Error occurred while deleting transiion")}))},deleteTransitionObj:function(id){var index=this.stateTransitions.findIndex((function(transition){return transition.id===id}));this.stateTransitions.splice(index,1),this.closeDialog()},closeDialog:function(transitionObj){var needsRefresh=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(needsRefresh)this.getStateTransitionsList();else if("object"===(0,esm_typeof/* default */.Z)(transitionObj))if(this.isNew)this.stateTransitions.push(transitionObj);else{var index=this.stateTransitions.findIndex((function(transition){return transitionObj.id===transition.id}));this.stateTransitions[index]=(0,objectSpread2/* default */.Z)({},transitionObj)}this.showEditTransitionDialog=!1,this.isNew=!1,this.activeTransitionObj={}},saveAndCloseDialog:function(transition){this.$message({showClose:!0,message:"Transition updated successfully",type:"success"}),this.closeDialog(transition,!(0,validation/* isEmpty */.xb)(transition))},showError:function(error){this.$message({showClose:!0,message:error?error.message:"Could not create state transition.",type:"error"})},goToStateFlowList:function(){this.$router.push({path:"stateflows"})}}},stateflow_StateTransitionListvue_type_script_lang_js=StateTransitionListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(stateflow_StateTransitionListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,StateTransitionList=component.exports},
/***/528661:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ee101f37a965f2ea9553a1e4c1a221b.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/93840.js.map