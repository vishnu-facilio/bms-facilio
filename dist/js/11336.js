"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[11336],{
/***/211336:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SensorAlarmDetailsWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/alarms/SensorAlarmDetailsWidget.vue?vue&type=template&id=31465ebc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"alarm-summary-graph-header"},[_c("div",{staticClass:"fc-black-16 bold"},[_vm._v(" "+_vm._s(_vm.$t("alarm.sensor_alarm.tabular_report"))+" ")])]),_c("div",[_c("div",{staticClass:"height100 overflow-y-scroll"},[_c("el-table",{staticClass:"fc-sensor-alarm-table fc-table-widget-scroll",staticStyle:{width:"100%"},attrs:{data:_vm.recordsToIterate,height:"300",fit:!0}},[_c("el-table-column",{attrs:{prop:"subject",label:_vm.$t("alarm.sensor_alarm.alarms"),width:"260"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_c("div",[_vm._v(" "+_vm._s(alarm.row.subject)+" ")]),_vm.$validation.isEmpty(alarm.row.ruleInfo)?_vm._e():_c("div",{staticClass:"op6"},[_vm._v(" ("+_vm._s(alarm.row.ruleInfo)+") ")])]}}])}),_c("el-table-column",{attrs:{prop:"lastCreatedTimeString",label:_vm.$t("alarm.sensor_alarm.previos_occurrence"),width:"190"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_c("div",[_vm._v(" "+_vm._s(alarm.row.lastCreatedTimeString)+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"id",label:_vm.$t("alarm.sensor_alarm.total_duration"),width:"170"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_c("div",[_vm._v(" "+_vm._s(alarm.row.totalDuration)+" ")])]}}])},[_c("template",{slot:"header"},[_c("div",[_vm._v(" "+_vm._s(_vm.$t("alarm.sensor_alarm.total_duration"))+" ")]),_c("div",{staticClass:"op6"},[_vm._v("(Last 12 months)")])])],2),_c("el-table-column",{attrs:{prop:"id",width:"260"},scopedSlots:_vm._u([{key:"default",fn:function(alarm){return[_c("div",[_vm._v(" "+_vm._s(alarm.row.averageFrequencyFailure)+" ")])]}}])},[_c("template",{slot:"header"},[_c("div",[_vm._v(" "+_vm._s(_vm.$t("alarm.sensor_alarm.average_frequency_failure"))+" ")]),_c("div",{staticClass:"op6"},[_vm._v("(Last 12 months)")])])],2)],1)],1)])])},staticRenderFns=[],api=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(897389),__webpack_require__(32284)),validation=__webpack_require__(990260),SensorAlarmDetailsWidgetvue_type_script_lang_js={props:["moduleName","details"],data:function(){return{relatedAlarms:[],duration:{},recordsToIterate:[],meterTableData:[{subject:"Decremental meter readings",lastCreatedTimeString:"No occurrence found",totalDuration:"Not enough data",averageFrequencyFailure:"Not enough data",type:4,ruleInfo:null},{subject:"No change in value",lastCreatedTimeString:"No occurrence found",totalDuration:"Not enough data",averageFrequencyFailure:"Not enough data",type:5,ruleInfo:null},{subject:"Abnormal energy reading",lastCreatedTimeString:"No occurrence found",totalDuration:"Not enough data",averageFrequencyFailure:"Not enough data",type:6,ruleInfo:null}],nonMeterTableData:[{subject:"No change in value",lastCreatedTimeString:"No occurrence found",totalDuration:"Not enough data",averageFrequencyFailure:"Not enough data",type:1,ruleInfo:null},{subject:"Out of range",lastCreatedTimeString:"No occurrence found",totalDuration:"Not enough data",averageFrequencyFailure:"Not enough data",type:2,ruleInfo:null}]}},mounted:function(){this.fetchRelatedAlarms()},methods:{fetchRelatedAlarms:function(){var _this=this,details=this.details,id=details.id,alarm=details.alarm,readingFieldId=alarm.readingFieldId,url="/v2/alarms/fetchRelatedAlarms",params={alarmId:id};api/* API */.bl.get(url,params).then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this.$message.error(error||"Error Occured");else{var relatedAlarms=data.relatedAlarms;if(_this.relatedAlarms=relatedAlarms,!(0,validation/* isEmpty */.xb)(relatedAlarms))for(var _loop=function(i){readingFieldId>0?_this.nonMeterTableData.forEach((function(data){data.type===relatedAlarms[i].sensorRuleType&&(data.lastCreatedTimeString=relatedAlarms[i].lastCreatedTimeString,data.totalDuration=_this.getDuration(relatedAlarms[i].totalDuration,!1),data.averageFrequencyFailure=_this.getDuration(relatedAlarms[i].averageFrequencyFailure,!0),1===relatedAlarms[i].sensorRuleType?data.ruleInfo="More than "+relatedAlarms[i].sensorRule.rulePropInfo.timeInterval+" hours":2===relatedAlarms[i].sensorRuleType&&(data.ruleInfo="Range is "+relatedAlarms[i].sensorRule.rulePropInfo.lowerLimit+" to "+relatedAlarms[i].sensorRule.rulePropInfo.upperLimit))})):_this.meterTableData.forEach((function(data){data.type===relatedAlarms[i].sensorRuleType&&(data.lastCreatedTimeString=relatedAlarms[i].lastCreatedTimeString,data.totalDuration=_this.getDuration(relatedAlarms[i].totalDuration,!1),data.averageFrequencyFailure=_this.getDuration(relatedAlarms[i].averageFrequencyFailure,!0),5===relatedAlarms[i].sensorRuleType?data.ruleInfo="More than "+relatedAlarms[i].sensorRule.rulePropInfo.timeInterval+" hours":6===relatedAlarms[i].sensorRuleType&&(data.ruleInfo="Greater than "+relatedAlarms[i].sensorRule.rulePropInfo.averageBoundPercentage+"%"))}))},i=0;i<relatedAlarms.length;i++)_loop(i)}})),this.recordsToIterate=readingFieldId>0?this.nonMeterTableData:this.meterTableData},getDuration:function(duration,avgFreq){if(duration>0){var days=Math.floor(duration/86400),hours=(duration/3600).toFixed(2),mnts=Math.floor(duration/60);if(days>.99)return Math.round(days)+(days>1?" days":" day");if(hours>.99)return Math.round(hours)+(hours>1?" hours":" hour");if(mnts>.99)return Math.round(mnts)+(mnts>1?" minutes":" minute")}else if(avgFreq)return"Not enough data";return 0}}},alarms_SensorAlarmDetailsWidgetvue_type_script_lang_js=SensorAlarmDetailsWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(alarms_SensorAlarmDetailsWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SensorAlarmDetailsWidget=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/11336.js.map