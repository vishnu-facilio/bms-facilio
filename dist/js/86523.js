(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[86523],{
/***/863072:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FProgressBarChart}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FProgressBarChart.vue?vue&type=template&id=1ec4da23
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_c("div",{staticClass:"f-multichart"},[_c("div",{class:["f-multichart-print"]},[_vm.chartContext?_c("div",{staticStyle:{"text-align":"center"}},[_c("div",{staticClass:"fc-newchart-container"},[_c("div",{ref:"newChartEle",staticClass:"fc-new-chart fc-boolean-chart"})])]):_vm._e()])])])},staticRenderFns=[],billboard=(__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(169358),__webpack_require__(872695)),basechart=__webpack_require__(503162),c3_helper=__webpack_require__(167021),JumpToHelper=__webpack_require__(921466),tooltip=__webpack_require__(460895),color_helper=__webpack_require__(794211),deepmerge=__webpack_require__(708634),FProgressBarChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z],props:["resultObj","isWidget","showWidgetLegends","colors","unit"],computed:{},watch:{data:{handler:function(){this.reRender()},deep:!0}},data:function(){return{chartContext:null,chartId:Math.random().toString(36).substr(2,9),c3:{params:null,chart:null},updateTimeout:null}},mounted:function(){this.render()},beforeDestroy:function(){tooltip/* default */.Z.hideTooltip(),this.c3&&this.c3.chart&&this.c3.chart.destroy(),this.chartContext=null,this.c3.params=null,this.c3.chart=null},methods:{render:function(){var _this=this;this.data&&(this.chartContext=null,this.$nextTick((function(){_this.chartContext={},_this.chartContext.options=_this.getOptions(),_this.chartContext.dateRange=_this.dateRange,_this.chartContext.data=deepmerge/* default */.Z.objectAssignDeep({},_this.data),_this.chartContext.xValueMode=_this.isXValueMode(_this.chartContext.options,_this.data),_this.chartContext.unitMap=_this.chartContext.options.dataPoints?_this.getUnitMap(_this.chartContext.options.dataPoints):{},_this.chartContext.enumMap=_this.chartContext.options.dataPoints?_this.getEnumMap(_this.chartContext.options.dataPoints):{},"pie"!==_this.chartContext.options.type&&"donut"!==_this.chartContext.options.type||(_this.chartContext.options.padding.top=20);var c3Params=c3_helper/* default */.Z.prepareProgressChart(_this.chartContext,_this.colors,_this.unit);c3Params&&(c3Params.data.onclick=function(d){_this.$emit("drilldown",d)});var self=_this;if(_this.chartContext.options.customizeC3){var defaultOptions={},mergedOptions=deepmerge/* default */.Z.objectAssignDeep(defaultOptions,c3Params,_this.chartContext.options.customizeC3);c3Params=mergedOptions}self.$refs["newChartEle"]?(c3Params.bindto=self.$refs["newChartEle"],self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(c3Params)):_this.$nextTick((function(){c3Params.bindto=self.$refs["newChartEle"],self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(c3Params)}))})))},isXValueMode:function(options,data){if("pie"===options.type||"donut"===options.type){if(options.xColorMap)return!0;if(data&&data.x&&2===Object.keys(data).length&&data.x.length<=15){for(var colors=color_helper/* default */.Z.newColorPicker(data.x.length),xColorMap={},i=0;i<data.x.length;i++){var xVal=data.x[i];xColorMap[xVal]=options.xColorMap&&options.xColorMap[xVal]?options.xColorMap[xVal]:colors[i]}return options.xColorMap=xColorMap,!0}}return!1},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},components_FProgressBarChartvue_type_script_lang_js=FProgressBarChartvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FProgressBarChartvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FProgressBarChart=component.exports},
/***/23561:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Energy}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energyAnalytics/energy/Energy.vue?vue&type=template&id=79f40bda
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-energy-con fc-energy-main-summary"},[_c("el-header",{staticClass:"fc-energy-header",attrs:{height:"150"}},[_c("div",{staticClass:"flex-middle justify-content-center"},[_c("div",{staticClass:"mR20"},[_c("img",{attrs:{src:__webpack_require__(775180),width:"84",height:"100"}})]),_c("div",{staticClass:"flex-grow"},[_c("div",{staticClass:"fc-black3-20"},[_vm._v(" Portfolio - ENERGY STAR "),_c("span",{},[_vm._v("Â®")]),_vm._v(" Score ")]),_c("div",{staticClass:"flex-middle pT20"},[_c("div",{staticClass:"pR30"},[_c("div",{staticClass:"fc-black-22 line-height30"},[_vm._v(" "+_vm._s(Math.round(_vm.countData.returnValue))+" ")]),_c("div",{staticClass:"fc-black-13"},[_vm._v("Average Score")])]),_c("div",{staticClass:"pL30 border-left3"},[_c("div",{staticClass:"fc-black-22 line-height30"},[_vm._v(" "+_vm._s(_vm.energySummaryData.length)+" of "+_vm._s(_vm.buildingCount)+" ")]),_c("div",{staticClass:"fc-black-13"},[_vm._v("Building Reporting a Score")])])])]),_c("div",{staticClass:"text-right"},[_vm.canShowSetupActions?_c("el-dropdown",{on:{command:_vm.EnergySetup}},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"}},[_vm._v(" Configure "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"setupDialog"}},[_vm._v("Sync from EnergySTAR")]),_c("el-dropdown-item",{attrs:{command:"pushingDialog"}},[_vm._v("Push Missing data")])],1)],1):_vm._e()],1)])]),_c("el-container",[_c("div",{staticClass:"fc-energy-main-con"},[_c("div",{staticClass:"fc-energy-main-white-bg pB20"},[_c("el-row",[_c("el-col",{staticClass:"border-right6",attrs:{span:6}},[_c("el-header",{staticClass:"pL0 border-bottom12",attrs:{height:"92"}},[_c("div",{staticClass:"p20"},[_c("div",{staticClass:"fc-black-11 bold text-uppercase"},[_vm._v(" BUILDINGS ( "+_vm._s(_vm.energySummaryData.length)+" ) ")]),_c("div",{staticClass:"fc-grey2 f10 line-height15 pT8"},[_vm._v(" Buildings must have 12 months of Data to receive Energy Star Score. ")])])]),_vm.refresh?_c("div",[_c("el-col",{attrs:{span:24}},[_vm.showLoading?_c("div",{staticClass:"flex-middle fc-empty-white justify-content-center scrollable250-y100"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.energySummaryData)&&!_vm.showLoading?_c("div",{staticClass:"flex-middle flex-direction-column fc-empty-white justify-content-center nowo-label scrollable250-y100"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg "}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Buildings ")])],1):_vm._e(),_vm.showLoading||_vm.$validation.isEmpty(_vm.energySummaryData)?_vm._e():_c("div",_vm._l(_vm.energySummaryData,(function(building){return _c("div",{key:building.name,staticClass:"pointer flex-middle justify-content-space border-bottom12 p20",staticStyle:{height:"80px"}},[_c("div",{staticClass:"width100",on:{click:function($event){return _vm.openEnegySummary(building)}}},[_c("div",{staticClass:"flex-middle justify-content-space pB10"},[_c("div",{staticClass:"label-txt-black bold"},[_vm._v(" "+_vm._s(building.data.building.name)+" ")]),building.data.values[_vm.tabActive]&&building.data.values[_vm.tabActive].current?_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"fc-blue-txt2-14 text-left"},["energyCost"===_vm.tabActive?_c("div",[_c("currency",{attrs:{value:building.data.values[_vm.tabActive].current}})],1):_c("div",[_vm._v(" "+_vm._s(_vm.numberWithCommas(Math.round(building.data.values[_vm.tabActive].current)))+" "+_vm._s(_vm.tabunitmap[_vm.tabActive])+" ")])])]):_vm._e()]),_c("div",[building.data.values[_vm.tabActive]&&building.data.values[_vm.tabActive].baseline?_c("div",{staticClass:"flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black-12 text-left"},[_vm._v(" Baseline ")]),_c("div",{staticClass:"fc-black-12 text-left"},["energyCost"===_vm.tabActive?_c("div",[_c("currency",{attrs:{value:building.data.values[_vm.tabActive].baseline}})],1):_c("div",[_vm._v(" "+_vm._s(_vm.numberWithCommas(Math.round(building.data.values[_vm.tabActive].baseline)))+" "+_vm._s(_vm.tabunitmap[_vm.tabActive])+" ")])])]):_vm._e()])])])})),0)])],1):_vm._e()],1),_c("el-col",{attrs:{span:18}},[_c("div",{},[_c("el-header",{staticClass:"pR0 pL0",attrs:{height:"80"}},[_c("el-tabs",{staticClass:"pT10 fc-energy-tab",attrs:{lazy:""},on:{"tab-click":_vm.energyTabSwitch},model:{value:_vm.tabActive,callback:function($$v){_vm.tabActive=$$v},expression:"tabActive"}},_vm._l(_vm.tabLists,(function(tab){return _c("el-tab-pane",{key:tab.name,attrs:{label:tab.displayName,name:tab.name}},[_c("div",{staticClass:"fc-energy-timeline"},_vm._l(_vm.xvalues,(function(xval,ind){return _c("div",{key:ind,staticClass:"fc-grey6-11"},[_vm._v(" "+_vm._s(xval)+" ")])})),0),_vm.showLoading?_c("div",{staticClass:"flex-middle fc-empty-white justify-content-center scrollable250-y100"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.energySummaryData)&&!_vm.showLoading?_c("div",{staticClass:"flex-middle nowo-label flex-direction-column scrollable250-y100 fc-empty-white justify-content-center"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg "}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Buildings Readings ")])],1):_vm._e(),_vm.showLoading||_vm.$validation.isEmpty(_vm.energySummaryData)?_vm._e():_c("div",_vm._l(_vm.energySummaryData,(function(building){return _c("div",{key:building.id,staticClass:"border-bottom12 flex-middle justify-content-center fc-energy-bar-chart",staticStyle:{height:"80px"}},[_vm.tabActive===tab.name&&_vm.widgets[building.id+"_"+_vm.tabActive]?_c("f-progress-bar-chart",{staticClass:"height100",attrs:{fixedChartHeight:null,isWidget:!0,data:_vm.widgets[building.id+"_"+_vm.tabActive]?_vm.widgets[building.id+"_"+_vm.tabActive]:null,options:_vm.widgetOptions,colors:_vm.defaultcolors,unit:_vm.tabunitmap[_vm.tabActive]}}):_vm._e()],1)})),0)])})),1)],1)],1)])],1),_c("div",{staticClass:"fc-energy-dot flex-middle justify-content-end width100 pT20 pR20"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"fc-dot fc-dot-blue"}),_c("div",{staticClass:"fc-black-12 pL10 bold"},[_vm._v(" Current ")])]),_c("div",{staticClass:"flex-middle mL20"},[_c("div",{staticClass:"fc-dot-dark-blue fc-dot"}),_c("div",{staticClass:"fc-black-12 pL10 bold"},[_vm._v(" Baseline ")])]),_c("div",{staticClass:"flex-middle mL20"},[_c("div",{staticClass:"fc-dot-red fc-dot"}),_c("div",{staticClass:"fc-black-12 pL10 bold"},[_vm._v(" National Median ")])]),_c("div",{staticClass:"flex-middle mL20"},[_c("div",{staticClass:"fc-dot-green fc-dot"}),_c("div",{staticClass:"fc-black-12 pL10 bold"},[_vm._v(" Target ")])])])],1)])])],1),_vm.showPushingData?_c("EnergyPushingData",{attrs:{showPushingData:_vm.showPushingData},on:{"update:showPushingData":function($event){_vm.showPushingData=$event},"update:show-pushing-data":function($event){_vm.showPushingData=$event}}}):_vm._e(),_vm.showDialog?_c("EnergySetup",{attrs:{visibility:_vm.showDialog},on:{"update:visibility":function($event){_vm.showDialog=$event}}}):_vm._e()],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(821057),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(75239),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(212826),__webpack_require__(990260)),FProgressBarChart=__webpack_require__(863072),chart_model=__webpack_require__(374575),deepmerge=__webpack_require__(708634),EnergySetupvue_type_template_id_ef948a7c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog60 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"new-header-container pL20 pR20"},[_c("div",{staticClass:"new-header-text flex-middle justify-content-space"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" Setup ")]),_c("div",{staticClass:"flex-middle"},[_vm.syncData.lastSyncedTime>0?_c("div",{staticClass:"fc-black-12"},[_vm._v(" Last Synced on "+_vm._s(_vm._f("formatDate")(_vm.syncData.lastSyncedTime))+" ")]):_vm._e(),_c("el-button",{staticClass:"setup-el-btn text-right mL10",on:{click:_vm.energySync}},[_vm._v(" Sync ")]),_c("div",{staticClass:"pL15 pointer",on:{click:_vm.closeDialog}},[_c("i",{staticClass:"el-icon-close fc-black-12 f20"})])],1)])]),_c("div",{staticClass:"new-body-modal p0 mT0"},[_vm.loading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.energyDatas)&&!_vm.loading?_c("div",{staticClass:"height100vh fc-empty-white flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Property available ")])],1):_vm._e(),_vm.loading||_vm.$validation.isEmpty(_vm.energyDatas)?_vm._e():_c("el-table",{staticClass:"fc-table-th-minus fc-energy-setup-main-table",staticStyle:{width:"100%"},attrs:{data:_vm.energyDatas}},[_c("el-table-column",{attrs:{prop:"property",label:"PROPERTY",width:"180"},scopedSlots:_vm._u([{key:"default",fn:function(energyData){return[_c("div",[_vm._v(" "+_vm._s(_vm.parseProperty(energyData.row.meta))+" ")])]}}],null,!1,4277403391)}),_c("el-table-column",{attrs:{prop:"meters",label:"NO. OF METERS",width:"160"},scopedSlots:_vm._u([{key:"default",fn:function(energyData){return[_c("div",[_vm._v(" "+_vm._s(energyData.row.meterContexts.length)+" ")])]}}],null,!1,4288972900)}),_c("el-table-column",{attrs:{prop:"mapped",label:"MAPPED BUILDING",width:"180"},scopedSlots:_vm._u([{key:"default",fn:function(energyData){return[energyData.row.buildingId>0?_c("div",[_vm._v(" "+_vm._s(energyData.row.data.building.name?energyData.row.data.building.name:"---")+" ")]):_c("div",{staticClass:"fc-warning2 f14"},[_vm._v(" Unmapped ")])]}}],null,!1,2586450895)}),_c("el-table-column",{attrs:{prop:"mapped",label:"Status",width:"160"},scopedSlots:_vm._u([{key:"default",fn:function(energyData){return[!0===energyData.row.configured?_c("div",[_c("el-button",{staticClass:"success-green-btn pL7 pR7"},[_c("i",{staticClass:"el-icon-check pR5 fwBold"}),_vm._v("Configured ")])],1):!1===energyData.row.configured?_c("div",[_c("el-button",{staticClass:"fc-add-border-green-btn",on:{click:function($event){return _vm.configurationDialog(energyData.row)}}},[_vm._v(" Configure")])],1):_vm._e()]}}],null,!1,1906930677)}),_c("el-table-column",{scopedSlots:_vm._u([{key:"default",fn:function(energyData){return[_c("div",{staticClass:"fc-blue-txt4-12 f14 bold",on:{click:function($event){return _vm.configurationDialog(energyData.row)}}},[_vm._v(" Edit ")])]}}],null,!1,1148589068)})],1)],1)]),_vm.showSetupDialog&&_vm.showSetupDialog.id?_c("el-dialog",{staticClass:"fc-dialog-center-container text-left energysetup-dialog",attrs:{title:"Configuration",visible:_vm.dialogVisible,width:"55%","before-close":_vm.configClose},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("div",{staticClass:"height400 overflow-y-scroll"},[_c("el-row",[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"fc-black-13 text-left bold"},[_vm._v(" Property Name ")])]),_c("el-col",{attrs:{span:3}},[_c("div",{staticClass:"hide-v"},[_c("i",{staticClass:"el-icon-right"})])]),_c("el-col",{attrs:{span:11}},[_c("div",{staticClass:"fc-black-13 text-left bold"},[_vm._v("Map Building")])])],1),_c("el-row",{staticClass:"pT10 flex-middle"},[_c("el-col",{attrs:{span:8}},[_vm.$getProperty(_vm.showSetupDialog,"meta")?_c("div",{staticClass:"label-txt-black text-left"},[_vm._v(" "+_vm._s(_vm.parseProperty(_vm.showSetupDialog.meta))+" ")]):_vm._e()]),_c("el-col",{attrs:{span:3}},[_c("div",[_c("InlineSvg",{attrs:{src:"svgs/black-arrow-right",iconClass:"icon icon-sm fill-green3"}})],1)]),_c("el-col",{attrs:{span:11}},[_c("el-select",{staticClass:"fc-input-full-border2 width80",attrs:{placeholder:"Select",filterable:""},on:{change:function($event){return _vm.loadMeters()}},model:{value:_vm.buildingListData,callback:function($$v){_vm.buildingListData=$$v},expression:"buildingListData"}},_vm._l(_vm.buildingDatas,(function(buildingData){return _c("el-option",{key:buildingData.id,attrs:{label:buildingData.name,value:buildingData.id}})})),1)],1)],1),_c("div",{staticClass:"fc-text-pink12 pT30 text-uppercase bold"},[_vm._v(" Meters ")]),_c("div",{staticClass:"fc-energy-setup-table-con"},[_c("table",{staticClass:"setting-list-view-table width100 fc-energy-setup-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text uppercase"},[_vm._v(" METER NAME ")]),_c("th",{staticClass:"setting-table-th setting-th-text uppercase"},[_vm._v(" ENERGY TYPE ")]),_c("th",{staticClass:"setting-table-th setting-th-text uppercase"},[_vm._v(" MAP METER ")])])]),_vm.loading?_c("tbody",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("div",{staticClass:"flex-middle pT30 pB30 width100"},[_c("spinner",{attrs:{show:_vm.loading,size:"50"}})],1)])]):_vm._e(),_vm.$validation.isEmpty(_vm.showSetupDialog.meterContexts)&&!_vm.loading?_c("tbody",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column height200"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Meters available ")])],1)])]):_vm._e(),_vm.loading||_vm.$validation.isEmpty(_vm.showSetupDialog.meterContexts)?_vm._e():_c("tbody",_vm._l(_vm.showSetupDialog.meterContexts,(function(meterTable,index){return _c("tr",{key:index},[_c("td",[_vm.$getProperty(meterTable,"meta")?_c("div",[_vm._v(" "+_vm._s(_vm.parseProperty(meterTable.meta)?_vm.parseProperty(meterTable.meta):"")+" ")]):_vm._e()]),_c("td",[_vm.$getProperty(meterTable,"typeEnum")?_c("div",[_vm._v(" "+_vm._s(_vm.$getProperty(meterTable,"typeEnum"))+" ")]):_vm._e()]),_c("td",[_c("el-select",{staticClass:"fc-input-full-border2 width80",attrs:{placeholder:"Select",filterable:""},model:{value:meterTable.meterId,callback:function($$v){_vm.$set(meterTable,"meterId",$$v)},expression:"meterTable.meterId"}},_vm._l(_vm.meterList,(function(energyMeter){return _c("el-option",{key:energyMeter.id,attrs:{label:energyMeter.name,value:energyMeter.id}})})),1)],1)])})),0)])])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.configClose}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.energyMeterConfigureData}},[_vm._v("Confirm")])],1)]):_vm._e(),_c("el-dialog",{staticClass:"fc-dialog-center-container text-left",attrs:{title:"Data Sync",visible:_vm.syncDataVisible,width:"35%","before-close":_vm.syncCancel},on:{"update:visible":function($event){_vm.syncDataVisible=$event}}},[_c("div",{staticClass:"height150"},[_c("div",{staticClass:"flex-middle items-start"},[_c("div",[_c("i",{staticClass:"fc-warning-14 bold f18 el-icon-warning-outline"})]),_c("div",{staticClass:"fc-warning-14 line-height20 f16 break-word pL10"},[_vm._v(" Sync will be scheduled at the background. ")])])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.syncCancel}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.dataSyncDialogVisible}},[_vm._v("Sync Data")])],1)]),_c("el-dialog",{staticClass:"fc-dialog-center-container text-left",attrs:{title:"Data Sync",visible:_vm.nonsyncDataVisible,width:"38%","before-close":_vm.nonsyncCancel},on:{"update:visible":function($event){_vm.nonsyncDataVisible=$event}}},[_c("div",{staticClass:"height150"},[_c("div",{staticClass:"flex-middle items-start"},[_c("div",[_c("i",{staticClass:"fc-warning-14 bold f18 el-icon-warning-outline"})]),_c("div",{staticClass:"fc-warning-14 line-height20 f16 break-word pL10"},[_vm._v(" Sync is running in the background, please wait until it is completed. ")])])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel width100",on:{click:function($event){_vm.nonsyncDataVisible=!1}}},[_vm._v("Cancel")])],1)]),_c("el-dialog",{staticClass:"fc-dialog-center-container text-left",attrs:{title:"Data Confirmation",visible:_vm.configurationDialogVisible,width:"35%","before-close":_vm.confrimationCancel},on:{"update:visible":function($event){_vm.configurationDialogVisible=$event}}},[_c("div",{staticClass:"height200 break-word line-height20"},[_c("div",{staticClass:"flex-middle items-start"},[_c("div",[_c("i",{staticClass:"fc-warning-14 bold f18 el-icon-warning-outline"})]),_c("div",{staticClass:"fc-warning-14 line-height20 f16 break-word pL10"},[_vm._v(" If you want proceed value not changed map building and meter? ")])])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.configurationDialogVisible=!1}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.confrimationOk}},[_vm._v("Confirm")])],1)])],1)},EnergySetupvue_type_template_id_ef948a7c_staticRenderFns=[],api=(__webpack_require__(425728),__webpack_require__(648324),__webpack_require__(32284)),EnergySetupvue_type_script_lang_js={props:["visibility"],data:function(){return{energyDatas:[],energyData:null,energyMetricDatas:[],energyMetricData:null,myObj:{},dialogVisible:!1,tableData:[],showSetupDialog:null,loading:!0,meterList:[],energyMeter:null,buildingDatas:[],buildingData:null,buildingListData:null,syncData:[],metaMeterName:{},syncDataVisible:!1,nonsyncDataVisible:!1,getBuildingId:[],getMeterId:[],configurationDialogVisible:!1}},mounted:function(){this.energySetupDataFetch(),this.lastSyncData()},methods:{closeDialog:function(){this.$emit("update:visibility",!1)},configClose:function(){this.dialogVisible=!1},allBuildings:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_context.next=3,api/* API */.bl.get("/v2/building/list?fetchCount=false&viewName=all");case 3:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?(_this.loading=!1,message=error.message,_this.$message.error(message)):(_this.loading=!1,_this.buildingDatas=data.buildings?data.buildings:[]);case 7:case"end":return _context.stop()}}),_callee)})))()},lastSyncData:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get2,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loading=!0,_context2.next=3,api/* API */.bl.get("/v2/energystar/fetchCustomer");case 3:_yield$API$get2=_context2.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?(_this2.loading=!1,message=error.message,_this2.$message.error(message)):(_this2.loading=!1,_this2.syncData=data.energyStarCustomerContext?data.energyStarCustomerContext:[]);case 7:case"end":return _context2.stop()}}),_callee2)})))()},energySetupDataFetch:function(){var _this3=this;this.loading=!0,this.$http.get("/v2/energystar/fetchSetupData").then((function(response){_this3.loading=!1,_this3.energyDatas=response.data.result.energyStarPropertiesContext?response.data.result.energyStarPropertiesContext:[],_this3.energyMetricDatas=response.data.result.energyStarPropertiesContext.meterContexts?response.data.result.energyStarPropertiesContext.meterContexts:[];var energyStarPropertiesContext=response.data.result.energyStarPropertiesContext,property=energyStarPropertiesContext.find((function(rt){return rt.id===_this3.showSetupDialog.id})),currentBuilding=property.data.building.buildingId;_this3.buildingListData=currentBuilding})).catch((function(){_this3.loading=!1}))},configurationDialog:function(energyData){this.dialogVisible=!0,this.showSetupDialog=energyData,this.energySetupDataFetch(),this.loadMeters(),this.allBuildings()},loadMeters:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var buildingListData,params,_yield$API$get3,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.loading=!0,buildingListData=_this4.buildingListData,params={},(0,validation/* isEmpty */.xb)(buildingListData)||(params={filters:JSON.stringify({buildingId:{operatorId:9,value:[buildingListData]}})}),_context3.next=6,api/* API */.bl.get("/energymeter/all",params);case 6:_yield$API$get3=_context3.sent,data=_yield$API$get3.data,error=_yield$API$get3.error,error?_this4.$message.error(error.message||"Error Occured"):_this4.meterList=data||[],_this4.loading=!1;case 11:case"end":return _context3.stop()}}),_callee3)})))()},loadaddMeter:function(){var that=this;that.$http.get("/energymeter/all").then((function(response){that.loading=!1,200===response.status&&(that.meterList=response.data?response.data:[])})).catch((function(error){}))},energySync:function(){1===this.syncData.syncStatus||-1===this.syncData.syncStatus?this.syncDataVisible=!0:2===this.syncData.syncStatus&&(this.nonsyncDataVisible=!0)},syncCancel:function(){this.syncDataVisible=!1},nonsyncCancel:function(){this.nonsyncDataVisible=!1},dataSyncDialogVisible:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$API$get4,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,api/* API */.bl.get("/v2/energystar/sync");case 2:_yield$API$get4=_context4.sent,error=_yield$API$get4.error,error?(message=error.message,_this5.$message.error(message),_this5.closeDialog()):(_this5.$message.success("Energy Data sync started successfully."),_this5.syncCancel(),_this5.closeDialog());case 5:case"end":return _context4.stop()}}),_callee4)})))()},energyMeterConfigure:function(){var _this6=this;this.loading=!0;
// let meterObj = this.showSetupDialog
var data=this.$helpers.cloneObject(this.showSetupDialog);data.buildingId=this.buildingListData;var url={propertyContext:data};
// url.propertyContext.meterContexts.meterId = this.selectedEnergyMeter
api/* API */.bl.post("/v2/energystar/updateProperty",url).then((function(_ref){var error=_ref.error;error?(_this6.$message.error(error),_this6.loading=!1,_this6.dialogVisible=!1,_this6.closeDialog()):(_this6.$message.success("Meter configure succeed"),_this6.loading=!1,_this6.dialogVisible=!1,_this6.closeDialog())}))},parseProperty:function(string){if(string){var parsedData=JSON.parse(string);if(parsedData&&parsedData.name)return parsedData.name}return""},confrimationOk:function(){this.energyMeterConfigure()},confrimationCancel:function(){this.configurationDialogVisible=!1},energyMeterConfigureData:function(){var getBuildingId=this.getBuildingId,buildingListData=this.buildingListData,buildingId=this.$getProperty(getBuildingId,"buildingId",-1);buildingListData===buildingId?this.configurationDialogVisible=!0:this.energyMeterConfigure()}}},energy_EnergySetupvue_type_script_lang_js=EnergySetupvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(energy_EnergySetupvue_type_script_lang_js,EnergySetupvue_type_template_id_ef948a7c_render,EnergySetupvue_type_template_id_ef948a7c_staticRenderFns,!1,null,null,null)
/* harmony default export */,EnergySetup=component.exports,EnergyPushingDatavue_type_template_id_e03a68e0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container text-left fc-dialog-center-body-p0",attrs:{title:"Push Missing Data",visible:_vm.showPushingData,width:"70%","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.showPushingData=$event}}},[_c("div",{staticClass:"height400 overflow-y-scroll pB50"},[_vm.loading?_c("div",{staticClass:"flex-middle height300"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.pushDatas)&&!_vm.loading?_c("div",{staticClass:"height300 fc-empty-white flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Pushing meter available ")])],1):_vm._e(),_vm.loading||_vm.$validation.isEmpty(_vm.pushDatas)?_vm._e():_c("el-collapse",{staticClass:"fc-pushing-data-collapse",attrs:{accordion:""}},_vm._l(_vm.pushDatas,(function(pushData,index){return _c("el-collapse-item",{key:index.id,attrs:{name:index}},[_c("template",{slot:"title"},[_c("el-row",{staticClass:"width100"},[_c("el-col",{attrs:{span:6}},[_vm.$getProperty(pushData,"data.building.name")?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                    arrow: true,\n                    arrowType: 'round',\n                    animation: 'fade',\n                  }"}],staticClass:"label-txt-black textoverflow-ellipsis",attrs:{title:pushData.data.building.name}},[_vm._v(" "+_vm._s(pushData.data.building.name?pushData.data.building.name:"---")+" ")]):_vm._e()]),_c("el-col",{attrs:{span:18}},[_c("div",{staticClass:"flex-middle pL20"},[_c("div",{staticClass:"fc-grey3-text14"},[_vm._v("Meter Name")]),_vm._l(pushData.meterContexts,(function(energyMeterContext){return _c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                      arrow: true,\n                      arrowType: 'round',\n                      animation: 'fade',\n                    }"}],key:energyMeterContext,staticClass:"label-txt-black pL10 textoverflow-ellipsis",attrs:{title:energyMeterContext.meterContext.name}},[_vm.$getProperty(energyMeterContext,"meterContext.name")?_c("div",{staticClass:"label-txt-black textoverflow-ellipsis",staticStyle:{"max-width":"250px"}},[_vm._v(" "+_vm._s(energyMeterContext.meterContext.name?energyMeterContext.meterContext.name:"---")+" ")]):_vm._e(),_vm.$getProperty(energyMeterContext,"missingRangeString")?_c("div",{staticClass:"label-txt-black missing-data fw4"},[_vm._v(" Data Missing for "),_c("span",{staticClass:"fc-blue-txt4-12 f14 bold"},[_vm._v(_vm._s(energyMeterContext.missingRangeString?energyMeterContext.missingRangeString:""))])]):_vm._e()])}))],2)])],1)],1),_vm.$validation.isEmpty(pushData.meterContexts[0].energyStarDataMissingRangesThatCanBeFilled)?_c("div",[_c("div",{staticClass:"flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg "}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Missing Data available ")])],1)]):_vm._e(),_vm.$validation.isEmpty(pushData.meterContexts[0].energyStarDataMissingRangesThatCanBeFilled)?_vm._e():_c("div",[pushData.meterContexts[0].energyStarDataAvailableRanges?_c("el-row",{staticClass:"flex-middle flex-wrap"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-grey3-text14"},[_vm._v("Data in Energy Star")])]),_c("el-col",{staticClass:"flex-middle flex-wrap",attrs:{span:18}},_vm._l(pushData.meterContexts[0].energyStarDataAvailableRanges,(function(energyMeterContextDate,index){return _c("div",{key:index,staticClass:"label-txt-black pL20 pB10"},[energyMeterContextDate?_c("div",[_c("el-tag",{staticClass:"fc-tag-bg-blue"},[_vm.$getProperty(energyMeterContextDate,"startTime")?_c("span",[_vm._v(" "+_vm._s(_vm._f("formatDate")(energyMeterContextDate.startTime,!0))+" ")]):_vm._e(),_vm._v(" - "),_vm.$getProperty(energyMeterContextDate,"endTime")?_c("span",[_vm._v(" "+_vm._s(_vm._f("formatDate")(energyMeterContextDate.endTime,!0))+" ")]):_vm._e()])],1):_vm._e()])})),0)],1):_vm._e(),pushData.meterContexts?_c("el-row",{staticClass:"pT10 flex-middle flex-wrap"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-grey3-text14"},[_vm._v("Data in Facilio")])]),_c("el-col",{staticClass:"flex-middle flex-wrap",attrs:{span:18}},_vm._l(pushData.meterContexts,(function(energyMeterContext){return _c("div",{key:energyMeterContext,staticClass:"label-txt-black pL20 pB10"},[_c("el-tag",{staticClass:"fc-tag-bg-blue"},[_vm.$getProperty(energyMeterContext,"dataAvailableInFacilio.startTime")?_c("span",[_vm._v(" "+_vm._s(_vm._f("formatDate")(energyMeterContext.dataAvailableInFacilio.startTime,!0))+" - ")]):_vm._e(),_vm.$getProperty(energyMeterContext,"dataAvailableInFacilio.endTime")?_c("span",[_vm._v(" "+_vm._s(_vm._f("formatDate")(energyMeterContext.dataAvailableInFacilio.endTime,!0))+" ")]):_vm._e()])],1)})),0)],1):_vm._e(),pushData.meterContexts[0].energyStarDataMissingRangesThatCanBeFilled?_c("el-row",{staticClass:"pT10 flex-middle flex-wrap"},[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"fc-grey3-text14"},[_vm._v("Missing Data")])]),_c("el-col",{staticClass:"flex-middle flex-wrap",attrs:{span:18}},_vm._l(pushData.meterContexts[0].energyStarDataMissingRangesThatCanBeFilled,(function(energyMeterContextMissing,index){return _c("div",{key:index,staticClass:"label-txt-black pL20 pB10"},[_c("el-tag",{staticClass:"fc-tag-bg-blue"},[_vm.$getProperty(energyMeterContextMissing,"startTime")?_c("span",[_vm._v(" "+_vm._s(_vm._f("formatDate")(energyMeterContextMissing.startTime,!0))+" ")]):_vm._e(),_vm._v(" - "),_vm.$getProperty(energyMeterContextMissing,"endTime")?_c("span",[_vm._v(" "+_vm._s(_vm._f("formatDate")(energyMeterContextMissing.endTime,!0))+" ")]):_vm._e()])],1)})),0)],1):_vm._e()],1)],2)})),1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.confirmBtn}},[_vm._v("Confirm")])],1)])],1)},EnergyPushingDatavue_type_template_id_e03a68e0_staticRenderFns=[],EnergyPushingDatavue_type_script_lang_js={props:["showPushingData"],data:function(){return{pushDatas:[],meterContextData:[],energyStarDataAvailableRanges:[],energyMeterContext:null,energyMeterContextMissing:null,energyMeterContextDate:null,loading:!0,pushData:null}},mounted:function(){this.energyPushingData()},methods:{closeDialog:function(){this.$emit("update:showPushingData",!1)},energyPushingData:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,data,error,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_context.next=3,api/* API */.bl.get("/v2/energystar/fetchMissingData");case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?(_this.loading=!1,message=error.message,_this.$message.error(message)):(_this.loading=!1,_this.pushDatas=data.energyStarPropertiesContext?data.energyStarPropertiesContext:[],_this.meterContextData=data.energyStarPropertiesContext.meterContexts?data.energyStarPropertiesContext.meterContexts:[]);case 7:case"end":return _context.stop()}}),_callee)})))()},confirmBtn:function(){var _this2=this;this.loading=!0;var pushMeterData=[];this.pushDatas.forEach((function(pushData){pushData.meterContexts[0].energyStarDataMissingRangesThatCanBeFilled[0]&&pushMeterData.push({id:pushData.id,dateRanges:[{startTime:pushData.meterContexts[0].energyStarDataMissingRangesThatCanBeFilled[0].startTime,endTime:pushData.meterContexts[0].energyStarDataMissingRangesThatCanBeFilled[0].endTime}]})})),api/* API */.bl.post("/v2/energystar/bulkPushHistoricalData",{pushMeterData:pushMeterData}).then((function(_ref){var error=_ref.error;error?(_this2.$message.error(error),_this2.loading=!1,_this2.showPushingData=!1):(_this2.$message.success("Push data updated Successfully"),_this2.loading=!1,_this2.showPushingData=!1)}))}}},energy_EnergyPushingDatavue_type_script_lang_js=EnergyPushingDatavue_type_script_lang_js,EnergyPushingData_component=(0,componentNormalizer/* default */.Z)(energy_EnergyPushingDatavue_type_script_lang_js,EnergyPushingDatavue_type_template_id_e03a68e0_render,EnergyPushingDatavue_type_template_id_e03a68e0_staticRenderFns,!1,null,null,null)
/* harmony default export */,EnergyPushingData=EnergyPushingData_component.exports,d3=__webpack_require__(348727),router=__webpack_require__(329435),vuex_esm=__webpack_require__(420629),Energyvue_type_script_lang_js={data:function(){return{tabActive:null,tabunitmap:{},countData:[],energySummaryData:[],tabLists:[],showLoading:!0,tab:null,buildingCount:0,refresh:!0,showPushingData:!1,building:null,widgetOptions:{},showDialog:!1,defaultcolors:{current:"#a6e1ff",baseline:"#1f8bdd",median:"#f98484",target:"#55d685"},widgets:{},xvalues:[]}},components:{FProgressBarChart:FProgressBarChart/* default */.Z,EnergySetup:EnergySetup,EnergyPushingData:EnergyPushingData},mounted:function(){this.energyCountData(),this.tabListData(),this.prepareChartOptions()},created:function(){this.buildingLoadCount()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)("webtabs",{currentTab:function(state){return state.selectedTab}})),{},{canShowSetupActions:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _getApp=(0,router/* getApp */.wx)(),linkName=_getApp.linkName;return"operations"!==linkName}return!0}}),methods:{energyCountData:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$http.get("/v2/workflow/getDefaultWorkflowResult?defaultWorkflowId=54");case 2:response=_context.sent,_this.countData=response.data.result.workflow;case 4:case"end":return _context.stop()}}),_callee)})))()},energyListData:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.showLoading=!0,_context2.next=3,_this2.$http.get("/v2/energystar/fetchMainSummaryData?fieldName=".concat(_this2.tabActive));case 3:response=_context2.sent,_this2.energySummaryData=response.data.result.energyStarPropertiesContext,_this2.showLoading=!1,_this2.widgets={},_this2.widgetsData=_this2.prepareWidgetData();case 8:case"end":return _context2.stop()}}),_callee2)})))()},tabListData:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var response,_iterator,_step,tab;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.$http.get("/v2/energystar/getMetricsList");case 2:response=_context3.sent,_this3.tabLists=response.data.result.metrics,_this3.tabActive=_this3.tabLists[0].name,_this3.tabunitmap={},_iterator=(0,createForOfIteratorHelper/* default */.Z)(_this3.tabLists);try{for(_iterator.s();!(_step=_iterator.n()).done;)tab=_step.value,_this3.tabunitmap[tab.name]=tab.field.unit}catch(err){_iterator.e(err)}finally{_iterator.f()}_this3.energyListData();case 9:case"end":return _context3.stop()}}),_callee3)})))()},energyTabSwitch:function(){this.energyListData()},findRoute:function(){var _this$currentTab=this.currentTab,currentTab=void 0===_this$currentTab?{}:_this$currentTab,$router=this.$router,tabType=router/* tabTypes */.VF.CUSTOM,config={type:"energyStar"},route=(0,router/* findRouteForTab */.OD)(currentTab.id,{tabType:tabType,config:config})||{};return $router.resolve({name:route.name}).href},openEnegySummary:function(building){if((0,router/* isWebTabsEnabled */.tj)()){var path=this.findRoute();this.$router.push({path:path+"/energy/summary/"+building.id})}else this.$router.push({path:"/app/en/energy/summary/"+building.id})},buildingLoadCount:function(){var _this4=this,promises=[],buildingsTotalCountUrl="v2/building/list?fetchCount=true&viewName=all";promises.push(this.$http.get(buildingsTotalCountUrl)),Promise.all(promises).then((function(_ref){var _ref2=(0,slicedToArray/* default */.Z)(_ref,1),buildingCount=_ref2[0];if(!(0,validation/* isEmpty */.xb)(buildingCount)){var _buildingCount$data=buildingCount.data,message=_buildingCount$data.message,responseCode=_buildingCount$data.responseCode,_buildingCount$data$r=_buildingCount$data.result,result=void 0===_buildingCount$data$r?{}:_buildingCount$data$r;if(0!==responseCode)throw new Error(message);var recordCount=result.recordCount;_this4.$set(_this4,"buildingCount",recordCount)}})).catch((function(_ref3){var _ref3$message=_ref3.message,message=void 0===_ref3$message?"Error Occurred while fetching Count":_ref3$message;_this4.$message.error(message)})).finally((function(){_this4.isLoading=!1}))},prepareWidgetData:function(){var _this5=this,widgetObj={},maxValArray=[];if(this.xvalues=[],this.energySummaryData){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(this.energySummaryData);try{var _loop=function(){var value=_step2.value,details={};value.data&&value.data.values&&value.data.values[_this5.tabActive]&&Object.keys(value.data.values[_this5.tabActive]).forEach((function(key){["max","maxValue"].includes(key)?"maxValue"===key&&maxValArray.push(parseFloat(value.data.values[_this5.tabActive][key])):details[key]=[parseFloat(value.data.values[_this5.tabActive][key])]})),widgetObj[value.id+"_"+_this5.tabActive]=details};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}if(maxValArray.length){for(var maxVal=d3.max(maxValArray),_i=0,_Object$keys=Object.keys(widgetObj);_i<_Object$keys.length;_i++){var objKey=_Object$keys[_i];widgetObj[objKey]["x"]=this.findNiceDelta(parseFloat(maxVal),5)}this.xvalues=this.findNiceDelta(parseFloat(maxVal),5)}this.widgets=widgetObj},findNiceDelta:function(maxVal,count){var step=Math.ceil(maxVal)/(count-1),order=Math.pow(10,Math.floor(Math.log10(step))),delta=step/order,stepVal=delta*order,stepList=[];stepList.push(0);for(var j=1;j<count;j++)stepList.push(Math.ceil(j*stepVal));return stepList},prepareChartOptions:function(){var defaultOptions={},customOptions={axis:{x:{datatype:"number",show:!1}},dataPoints:[],regionMultiplier:.0015,customizeC3:{size:{height:20}}},mergedOptions=deepmerge/* default */.Z.objectAssignDeep(defaultOptions,chart_model/* default */.Z.options,{style:chart_model/* default */.Z.style},customOptions);this.widgetOptions=mergedOptions},EnergySetup:function(cmd){"setupDialog"===cmd?this.setupDialogOpen():"pushingDialog"===cmd&&this.pushingDataOpen()},setupDialogOpen:function(){this.showDialog=!0},pushingDataOpen:function(){this.showPushingData=!0},numberWithCommas:function(value){return value.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}}},energy_Energyvue_type_script_lang_js=Energyvue_type_script_lang_js,Energy_component=(0,componentNormalizer/* default */.Z)(energy_Energyvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Energy=Energy_component.exports},
/***/410108:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f1c32ac6a1501ce55d7f2300b27d5e44.svg";
/***/},
/***/775180:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/energy-star.eeaa0b08.jpg"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/86523.js.map