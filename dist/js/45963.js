"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[45963],{
/***/646716:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FetchViewsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),FetchViewsMixinvue_type_script_lang_js={methods:{fetchView:function(moduleName){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,data,error,_ref,groupViews;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,params={moduleName:moduleName,groupType:1,viewType:1},_context.next=4,api/* API */.bl.get("/v2/views/viewList",params);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error){_context.next=10;break}return _ref=data||{},groupViews=_ref.groupViews,_context.abrupt("return",_this.getFirstView(groupViews));case 10:_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context["catch"](0),_context.abrupt("return","all");case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])})))()},getFirstView:function(groupViews){var _ref2=(groupViews||[]).find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref2.views,_this$$getProperty=this.$getProperty(views,"0",{}),name=_this$$getProperty.name;return name||"all"}}},base_FetchViewsMixinvue_type_script_lang_js=FetchViewsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_FetchViewsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FetchViewsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/724460:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SignatureColumn}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/SignatureColumn.vue?vue&type=template&id=00c0fd35&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasSignature({field:_vm.field,record:_vm.record})?_c("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"hover","close-delay":100}},[_c("div",{staticClass:"signature-field-container"},[_c("img",{attrs:{src:_vm.getSignatureUrl({field:_vm.field,record:_vm.record})}})]),_c("a",{attrs:{slot:"reference"},slot:"reference"},[_vm._v("Signed")])]):_c("div",[_vm._v("Not Signed")])],1)},staticRenderFns=[],validation=(__webpack_require__(434284),__webpack_require__(990260)),baseUrl=__webpack_require__(420499),SignatureColumnvue_type_script_lang_js={props:["field","record"],methods:{hasSignature:function(props){var field=props.field,record=props.record,_ref=field||{},name=_ref.name,isDefaultField=this.$getProperty(field||{},"default");if(isDefaultField)return!(0,validation/* isEmpty */.xb)(record["".concat(name,"Id")]);var recordData=this.$getProperty(record,"data.".concat(name,"Id"));return!(0,validation/* isEmpty */.xb)(recordData)||!(0,validation/* isEmpty */.xb)(record["".concat(name,"Id")])},getSignatureUrl:function(props){
// TODO move this handling to some util
var field=props.field,record=props.record,_ref2=field||{},name=_ref2.name;if(!(0,validation/* isEmpty */.xb)(field)){var url="".concat((0,baseUrl/* getBaseURL */.BS)()),previewUrl=null,_field$default=field.default,isDefault=void 0!==_field$default&&_field$default;return previewUrl=isDefault?this.$getProperty(record,"".concat(name,"Url")):this.$getProperty(record.data,"".concat(name,"Url"))||this.$getProperty(record,"".concat(name,"Url")),(0,validation/* isEmpty */.xb)(previewUrl)?void 0:url+"".concat(previewUrl.split("/api")[1])}}}},list_SignatureColumnvue_type_script_lang_js=SignatureColumnvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_SignatureColumnvue_type_script_lang_js,render,staticRenderFns,!1,null,"00c0fd35",null)
/* harmony default export */,SignatureColumn=component.exports},
/***/481161:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DetailsWidgetMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var render,staticRenderFns,defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(506203),__webpack_require__(689730),__webpack_require__(990260)),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),utils_field=__webpack_require__(815872),router=__webpack_require__(329435),FetchViewsMixin=__webpack_require__(646716),lookupModulesRouterMap={workorder:function(id,viewname){return{name:"wosummarynew",params:{id:id,viewname:viewname}}},ticket:function(id,viewname){return{name:"wosummarynew",params:{id:id,viewname:viewname}}},asset:function(id,viewname){return{path:"/app/at/assets/".concat(viewname,"/").concat(id,"/overview")}},alarm:function(id,viewname){return{path:"/app/fa/faults/".concat(viewname,"/newsummary/").concat(id)}},vendors:function(id,viewname){return{path:"/app/vendor/vendors/".concat(viewname,"/summary/").concat(id)}},purchaseorder:function(id,viewname){return{name:"poSummary",params:{id:id,viewname:viewname}}},tenant:function(id,viewname){return{name:"tenantSummary",params:{id:id,viewname:viewname}}},tenantunit:function(id,viewname){return{name:"tenantUnitSummary",params:{id:id,viewname:viewname}}},custom:function(id,viewname,moduleName){return{name:"custommodules-summary",params:{moduleName:moduleName,viewname:viewname,id:id}}}},lookUpSpecialSupportModules=["alarm","workorder","ticket","asset","vendors","purchaseorder","tenant","tenantunit"],DetailsWidgetMixinvue_type_script_lang_js={data:function(){return{isLookupSimple:utils_field/* isLookupSimple */.qu,exportDownloadUrl:{},lookUpSpecialSupportModules:lookUpSpecialSupportModules}},mixins:[FetchViewsMixin/* default */.Z],methods:{isLookUpRedirectApplicable:function(field){var _ref=field||{},displayTypeEnum=_ref.displayTypeEnum,lookupModuleName=_ref.lookupModuleName,fieldObj=_ref.field,_ref2=fieldObj||{},lookupModule=_ref2.lookupModule,_ref3=lookupModule||{},custom=_ref3.custom,typeEnum=_ref3.typeEnum;return"LOOKUP_SIMPLE"===displayTypeEnum&&lookupModuleName&&"BASE_ENTITY"===typeEnum&&(this.lookUpSpecialSupportModules.includes(lookupModuleName)||custom||(0,router/* isWebTabsEnabled */.tj)())},redirectToLookUpFieldSummary:function(lookUpField){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref4,lookupModuleName,name,field,details,isV3Api,_ref5,data,_ref6,lookupModule,_ref7,custom,viewname,_ref8,id,_ref9,routeName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref4=lookUpField||{},lookupModuleName=_ref4.lookupModuleName,name=_ref4.name,field=_ref4.field,details=_this.details,isV3Api=_this.isV3Api,_ref5=details||{},data=_ref5.data,_ref6=field||{},lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},custom=_ref7.custom,_context.next=7,_this.fetchView(lookupModuleName);case 7:if(viewname=_context.sent,_ref8=isV3Api||(field||{}).default?(details||{})[name]:(data||{})[name],id=_ref8.id,!(0,validation/* isEmpty */.xb)(id)){_context.next=11;break}return _context.abrupt("return");case 11:(0,router/* isWebTabsEnabled */.tj)()?(_ref9=(0,router/* findRouteForModule */.Jp)(lookupModuleName,router/* pageTypes */.As.OVERVIEW)||{},routeName=_ref9.name,routeName&&_this.$router.push({name:routeName,params:{viewname:viewname,id:id}})):custom?_this.$router.push(lookupModulesRouterMap["custom"](id,viewname,lookupModuleName)):_this.$router.push(lookupModulesRouterMap[lookupModuleName](id,viewname));case 12:case"end":return _context.stop()}}),_callee)})))()},isFileField:function(field){return"FILE"===field.displayTypeEnum},isCustomField:function(field){return!this.$getProperty(field,"field.default",!1)},getFileName:function(field){var record,details=this.details,isV3Api=this.isV3Api;if(isV3Api)record=details;else{var _ref10=details||{},data=_ref10.data;record=this.isCustomField(field)?data:details}if(!(0,validation/* isEmpty */.xb)(record)){var filename=record["".concat(field.name,"FileName")];if(!(0,validation/* isEmpty */.xb)(filename))return filename}return"---"},downloadAttachment:function(field){var url,record,_this2=this,details=this.details,isV3Api=this.isV3Api;if(isV3Api)record=details;else{var _ref11=details||{},data=_ref11.data;record=this.isCustomField(field)?data:details}if(!(0,validation/* isEmpty */.xb)(record)){var filename=record["".concat(field.name,"FileName")];(0,validation/* isEmpty */.xb)(filename)||(url=record["".concat(field.name,"DownloadUrl")],(0,validation/* isEmpty */.xb)(this.exportDownloadUrl[field.name])?this.exportDownloadUrl=(0,defineProperty/* default */.Z)({},field.name,url):(this.exportDownloadUrl=(0,defineProperty/* default */.Z)({},field.name,null),this.$nextTick((function(){_this2.exportDownloadUrl=(0,defineProperty/* default */.Z)({},field.name,url)}))))}},getFormattedDisplayName:function(){var fieldObj=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},field=fieldObj.field,formFieldDisplayName=fieldObj.displayName,fieldDisplayName=this.$getProperty(field,"displayName");return 1===this.$org.id?formFieldDisplayName||fieldDisplayName:fieldDisplayName||formFieldDisplayName;//ICD wants its fieldLabel to be formFieldDisplaName
},getFormattedValue:function(fieldObj,lookupObj,sites){var _this3=this;return new Promise((function(resolve){lookupObj||(lookupObj={});var value,field=fieldObj.field,lookupModuleName=fieldObj.lookupModuleName,_ref12=field||{},_ref12$lookupModule=_ref12.lookupModule,lookupModule=void 0===_ref12$lookupModule?{}:_ref12$lookupModule;if(lookupObj&&field?value=(0,validation/* isEmpty */.xb)(lookupObj[field.name])?null:lookupObj[field.name]:lookupObj&&(value=(0,validation/* isEmpty */.xb)(lookupObj[fieldObj.name])?null:lookupObj[fieldObj.name]),field&&(0,utils_field/* isSiteField */.Vn)(field)||(0,utils_field/* isSiteField */.Vn)(fieldObj)){var site=sites[value];value=site&&site.label?site.label:"---",resolve(value)}else if((0,validation/* isEmpty */.xb)(field)||!(0,utils_field/* isDateField */.y2)(field)&&!(0,utils_field/* isDateTimeField */.K)(field))if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isSpecialEnumField */.je)(field))resolve(value?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else if((0,validation/* isEmpty */.xb)(field)||!(0,utils_field/* isEnumField */.Ri)(field)&&!(0,utils_field/* isSystemEnumField */.Hw)(field))if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isMultiEnumField */.yS)(field))resolve(_this3.getMultiEnumFieldValues(field,value));else if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isBooleanField */.Mw)(field))resolve((0,validation/* isBoolean */.jn)(value)?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isGeoLocationField */.PR)(fieldObj))resolve(value?(0,field_utils/* getDisplayValue */.UZ)(fieldObj,value):"");else if(field&&"DURATION"===field.displayType||"DURATION"===fieldObj.displayTypeEnum)resolve(_this3.$helpers.getFormattedDuration(value,(0,validation/* isEmpty */.xb)(field.unit)?"s":field.unit));else if(!(0,validation/* isEmpty */.xb)(field)&&[2,3].includes(field.dataType)){var _field=fieldObj.field,_ref13=_field||{},unit=_ref13.unit;value=(_this3.isV3Api?(0,validation/* isNullOrUndefined */.le)(value):(0,validation/* isEmpty */.xb)(value))?"---":(0,validation/* isEmpty */.xb)(unit)?"".concat(value):["$","₹"].includes(unit)?" ".concat(unit," ").concat(value):"".concat(value," ").concat(unit),resolve(value)}else if("MULTI_LOOKUP"===(field||{}).dataTypeEnum)resolve(_this3.getMultiLookupValue(value));else if("STRING_SYSTEM_ENUM"===(field||{}).dataTypeEnum)resolve(value?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else if(value&&(lookupModule&&"basespace"===lookupModule.name||"basespace"===lookupModuleName)){var spaceName=_this3.$getProperty(value,"name");(0,validation/* isEmpty */.xb)(spaceName)&&(spaceName=_this3.space[value.id]?_this3.space[value.id]:"---"),resolve(spaceName)}else if(lookupModule&&["users","requester"].includes(lookupModule.name)||["users","requester"].includes(lookupModuleName)){var userId=(value||{}).id,userName=_this3.$getProperty(value,"name");if((0,validation/* isEmpty */.xb)(userName))if(userId){var _ref14=_this3.$store.getters.getUser(userId)||{},_ref14$name=_ref14.name,name=void 0===_ref14$name?"---":_ref14$name;resolve(name)}else resolve("---");else resolve(userName)}else if(field&&"ticket"===lookupModule.name&&"workpermit"===_this3.$getProperty(field.module,"name",""))resolve((0,validation/* isEmpty */.xb)((value||{}).serialNumber)?"---":"#".concat(value.serialNumber));else if(((0,utils_field/* isLookupSimple */.qu)(fieldObj)||(0,utils_field/* isLookupPopup */.CT)(fieldObj))&&_this3.$getProperty(lookupObj,fieldObj.name,null)&&(0,validation/* isObject */.Kn)(lookupObj[fieldObj.name])&&_this3.$getProperty(lookupObj,"".concat(fieldObj.name,".primaryValue"),null)||field&&["LOOKUP_SIMPLE","LOOKUP_POPUP"].includes(field.displayType)&&_this3.$getProperty(lookupObj,field.name,null)&&(0,validation/* isObject */.Kn)(lookupObj[field.name])&&_this3.$getProperty(lookupObj,"".concat(field.name,".primaryValue"),null)){
// Custom modules lookup fields
var _name=field&&field.name||fieldObj.name;resolve(lookupObj[_name].primaryValue?lookupObj[_name].primaryValue:"---")}else if(value&&(((0,utils_field/* isLookupSimple */.qu)(fieldObj)||(0,utils_field/* isLookupPopup */.CT)(fieldObj))&&fieldObj.lookupModuleName||field&&["LOOKUP_SIMPLE","LOOKUP_POPUP"].includes(field.displayType)&&_this3.$getProperty(field.lookupModule,"name",""))){var isRotating=["rotatingItem","rotatingTool"].includes(field.name);if(isRotating)resolve(value||"---");else{var _lookupModuleName=field&&_this3.$getProperty(field.lookupModule,"name","")||fieldObj.lookupModuleName;(0,picklist/* getFieldValue */.oe)({lookupModuleName:_lookupModuleName,selectedOptionId:[value.id]}).then((function(_ref15){var value,error=_ref15.error,data=_ref15.data;error||(value=_this3.$getProperty(data,"0.label")),resolve(value||"---")}))}}else"resource"===(field||{}).name?resolve((value||{}).name?value.name:"---"):_this3.isFileField(fieldObj)||"SIGNATURE"===_this3.$getProperty(fieldObj,"field.displayType")?resolve(_this3.getFileName(fieldObj)):resolve(value||"---");else resolve(value?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else resolve(value>0?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---")}))},getMultiLookupValue:function(value){var lookupRecordNames=(value||[]).map((function(currRecord){return currRecord.displayName||currRecord.name||currRecord.subject}));return lookupRecordNames.length>5?"".concat(lookupRecordNames.slice(0,5).join(", ")," +").concat(Math.abs(lookupRecordNames.length-5)):(0,validation/* isEmpty */.xb)(lookupRecordNames)?"---":"".concat(lookupRecordNames.join(", "))},getSysFieldValue:function(field){var value,details=this.details;if("sysModifiedBy"===field.name||"sysCreatedBy"===field.name||"lastIssuedToUser"===field.name){var userId=(details[field.name]||{}).id,userName=this.$getProperty(details[field.name],"name");if(!(0,validation/* isEmpty */.xb)(userName))return userName;if(userId){var _ref16=this.$store.getters.getUser(userId)||{},_ref16$name=_ref16.name,name=void 0===_ref16$name?"---":_ref16$name;return name}}else{if("sysCreatedTime"!==field.name&&"sysModifiedTime"!==field.name&&"lastIssuedTime"!==field.name)return value=details[field.name],value||"---";if(value=details[field.name],(0,validation/* isEmpty */.xb)(value))return"---";var timePerdiod=this.$options.filters.formatDate(value);if(!(0,validation/* isEmpty */.xb)(timePerdiod))return timePerdiod}return"---"},getMultiEnumFieldValues:function(field){var values=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],enumMap=field.enumMap,valueStr=(values||[]).reduce((function(accStr,value){var str=enumMap[value]||"";return(0,validation/* isEmpty */.xb)(accStr)?"".concat(str):"".concat(accStr,", ").concat(str)}),"");return(0,validation/* isEmpty */.xb)(valueStr)?"---":valueStr},toggleVisibility:function(offsetHeight){var _this4=this;this.isAllVisible=!this.isAllVisible,this.isAllVisible?this.$nextTick((function(){var height=_this4.$refs["content-container"].scrollHeight+(offsetHeight||90),width=_this4.$refs["content-container"].scrollWidth;_this4.resizeWidget({height:height,width:width})})):this.$nextTick((function(){return _this4.resizeWidget({h:_this4.defaultWidgetHeight})}))},autoResize:function(){var _this5=this;this.$nextTick((function(){var container=_this5.$refs["content-container"];if(container){var dimensions,height=_this5.$refs["content-container"].scrollHeight+60,width=_this5.$refs["content-container"].scrollWidth;if((0,validation/* isFunction */.mf)(_this5.calculateDimensions)&&(dimensions=_this5.calculateDimensions({height:height,width:width})),!(0,validation/* isEmpty */.xb)(dimensions)){var _ref17=dimensions||{},h=_ref17.h,params={};if(h<=_this5.defaultWidgetHeight)_this5.needsShowMore=!1,params={height:height,width:width};else{var _this5$defaultWidgetH=_this5.defaultWidgetHeight,defaultWidgetHeight=void 0===_this5$defaultWidgetH?7:_this5$defaultWidgetH;_this5.needsShowMore=h>defaultWidgetHeight,_this5.defaultWidgetHeight=defaultWidgetHeight,params=_this5.needsShowMore?{h:defaultWidgetHeight}:{h:h}}_this5.resizeWidget(params)}}}))}}},common_DetailsWidgetMixinvue_type_script_lang_js=DetailsWidgetMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(common_DetailsWidgetMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DetailsWidgetMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
},
/***/445963:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FixedFieldDetails}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/FixedFieldDetails.vue?vue&type=template&id=7f5285a0&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"asset-details-widget"},[_vm.$validation.isEmpty(_vm.textAreaFields)&&_vm.$validation.isEmpty(_vm.generalFields)?_c("div",{staticClass:"mT20",staticStyle:{color:"#8ca1ad"}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("inline-svg",{staticClass:"vertical-middle self-center",attrs:{src:"svgs/emptystate/notes",iconClass:"icon icon-xxxlg mR5"}}),_c("div",{staticClass:"f14 pL10 self-center"},[_vm._v(" "+_vm._s(_vm.$t("qanda.template.no_fields"))+" ")])],1)]):_c("div",{ref:"content-container",staticClass:"container"},[_vm._l(_vm.textAreaFields,(function(field,index){return _c("div",{key:field.name+index,staticClass:"field",staticStyle:{flex:"0 100%"}},[_c("el-row",[_c("el-col",{staticClass:"field-label",attrs:{span:6}},[_vm._v(_vm._s(field.displayName))]),_c("el-col",{staticClass:"field-value line-height22",attrs:{span:16}},["RICH_TEXT"===field.displayTypeEnum?[_vm.$validation.isEmpty(field.displayValue)?_c("span",[_vm._v("---")]):_c("div",{staticClass:"rich-text-preview-details",domProps:{innerHTML:_vm._s(_vm.sanitize(field.displayValue))}})]:[_vm._v(_vm._s(field.displayValue)+" ")]],2)],1)],1)})),_vm._l(_vm.generalFields,(function(field,index){return _c("div",{key:field.name+index,staticClass:"field"},[_c("el-row",[_c("el-col",{key:field.displayName,staticClass:"field-label",attrs:{span:12}},[_vm._v(_vm._s(field.displayName))]),_c("el-col",{key:field.displayName+"value",staticClass:"field-value",attrs:{span:12}},["frequencyEnum"===field.name&&field.displayValue?_c("span",{staticClass:"text-capitalize"},[_vm._v(_vm._s(field.displayValue.toLowerCase()))]):_vm.isLocationFieldOrNot(field)?_c("span",{staticClass:"bluetxt pointer",on:{click:function($event){return _vm.$helpers.openInMapForLatLngStr(field.displayValue)}}},[_vm._v(_vm._s("@"+field.displayValue))]):_vm.isFileField(field)?_c("div",[_c("el-row",[_c("el-col",{staticClass:"attachment-label pointer",attrs:{span:12}},[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_c("a",{on:{click:function($event){return _vm.downloadAttachment(field)}}},[_vm._v(" "+_vm._s(_vm.getFileName(field))+" ")])])],1)],1):"SIGNATURE"===_vm.$getProperty(field,"displayTypeEnum")?_c("div",[_c("SignatureField",{attrs:{field:field,record:_vm.details,isV3Api:_vm.isV3Api}})],1):"URL_FIELD"===_vm.$getProperty(field,"displayTypeEnum")?[_vm.$validation.isEmpty(field.displayValue)||"---"===field.displayValue?_c("span",[_vm._v("---")]):_c("a",{staticClass:"url-field-display",attrs:{rel:"nofollow",href:_vm.$getProperty(field,"displayValue.href",""),target:_vm.$getProperty(field,"displayValue.target",""),referrerpolicy:"no-referrer"}},[_vm._v(_vm._s(_vm.getUrlDisplayName(field)))])]:_vm.isLookUpRedirectApplicable(field)?_c("div",{staticClass:"bluetxt pointer",on:{click:function($event){return _vm.redirectToLookUpFieldSummary(field)}}},[_vm._v(" "+_vm._s(field.displayValue)+" ")]):_c("span",[_vm._v(_vm._s(field.displayValue))])],2)],1)],1)}))],2),_vm.needsShowMore&&"formulaField"!==_vm.moduleName?_c("div",{staticClass:"text-center",staticStyle:{padding:"6px 0 15px","background-color":"#fff"}},[_c("a",{staticClass:"fc-link fc-link-animation text-capitalize letter-spacing0_3 f13",on:{click:function($event){return _vm.toggleVisibility()}}},[_vm._v(_vm._s(_vm.showMoreLinkText))])]):_vm._e()])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(634338),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(670560),__webpack_require__(865137),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(897389),__webpack_require__(420629)),DetailsWidgetMixin=__webpack_require__(481161),validation=__webpack_require__(990260),getDefaultFields=function(dataObj){var formulaField=[{displayName:"Description",displayTypeEnum:"TEXTAREA",name:"description"},{displayName:"Site",displayTypeEnum:"LOOKUP_SIMPLE",name:"siteId",lookupModuleName:"site"},{displayName:"KPI Category",displayTypeEnum:"LOOKUP_SIMPLE",name:"kpiCategory",lookupModuleName:"kpiCategory"},{displayName:"Frequency",displayTypeEnum:"NUMBER",name:"frequencyEnum"}];return(0,validation/* isEmpty */.xb)(dataObj.spaceCategoryId)||formulaField.push({displayName:"Space Category",displayTypeEnum:"LOOKUP_SIMPLE",name:"spaceCategoryId",lookupModuleName:"spaceCategory"}),(0,validation/* isEmpty */.xb)(dataObj.assetCategoryId)||formulaField.push({displayName:"Asset Category",displayTypeEnum:"LOOKUP_SIMPLE",name:"assetCategoryId",lookupModuleName:"assetCategory"}),(0,validation/* isEmpty */.xb)(dataObj.includedResources)||1!==dataObj.includedResources.length||formulaField.push({displayName:"Asset",displayTypeEnum:"LOOKUP_SIMPLE",name:"matchedResources",lookupModuleName:"asset"}),(0,validation/* isEmpty */.xb)(dataObj.assetCategoryId)&&!(0,validation/* isEmpty */.xb)(dataObj.matchedResourcesIds)&&formulaField.push({displayName:"Space",displayTypeEnum:"LOOKUP_SIMPLE",name:"matchedResources",lookupModuleName:"space"}),{formulaField:formulaField}},picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),utils_field=__webpack_require__(815872),SignatureColumn=__webpack_require__(724460),sanitize=__webpack_require__(678042),log_map_state=__webpack_require__(766331),FixedFieldDetailsvue_type_script_lang_js={components:{SignatureField:SignatureColumn/* default */.Z},mixins:[DetailsWidgetMixin/* default */.Z],props:["moduleName","details","layoutParams","resizeWidget","primaryFields","calculateDimensions","isV3Api"],created:function(){this.deserialize(),this.sanitize=sanitize/* sanitize */.N},mounted:function(){this.autoResize()},data:function(){return{filterFields:[],generalFields:[],textAreaFields:[],isAllVisible:!1,defaultWidgetHeight:this.layoutParams.h,needsShowMore:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)(["getUser"])),{},{showMoreLinkText:function(){return this.isAllVisible?"View Less":"View More"}}),methods:{deserialize:function(){var _this=this,moduleName=this.moduleName,_this$metaInfo=this.metaInfo,metaInfo=void 0===_this$metaInfo?{}:_this$metaInfo;this.skipFields=[].concat((0,toConsumableArray/* default */.Z)(this.filterfields||[]),(0,toConsumableArray/* default */.Z)(this.primaryFields||[]));var fields,promises=[];if(this.$constants.moduleVsFixedDetails[moduleName]){var metaFields,showFields=this.$constants.moduleVsFixedDetails[moduleName];fields=[],metaFields=(metaInfo.fields||[]).filter((function(f){return showFields.includes(f.name)||!f.default})),(0,validation/* isEmpty */.xb)(metaFields)||metaFields.forEach((function(field){if(field){if("description"===field.name)return void((0,validation/* isEmpty */.xb)((_this.details||{}).description)||fields.push({name:"description",displayName:"Description",displayTypeEnum:"TEXTAREA",default:field.default}));if("unitReservationCost"===field.name)return void((_this.details||{}).reservable&&fields.push({name:"unitReservationCost",displayName:field.displayName,displayTypeEnum:field.displayType._name,default:field.default}));if(349===_this.$org.id&&"number"===field.name||"sortingHelper"===field.name)
// Temp for removing Accomations count and sort custom field
return;var fieldClone=_this.$helpers.cloneObject(field);fieldClone["displayTypeEnum"]=fieldClone.displayType._name,fieldClone["lookupModuleName"]=(fieldClone.lookupModule||{}).name,fields.push(fieldClone)}}))}else fields=getDefaultFields(this.details)[moduleName];
// Fetch field values
fields.forEach((function(field){var dataObj=!1!==(field||{}).default||_this.isV3Api?_this.details:_this.details.data,promise=_this.getFormattedValue(field,dataObj).then((function(value){_this.$set(field,"displayValue",value)}));promises.push(promise)}));
// Cleanup and seperate fields
var textAreaFieldDisplayTypeEnum=["RICH_TEXT","TEXTAREA"],textAreaFields=function(field){return textAreaFieldDisplayTypeEnum.includes(field.displayTypeEnum)};this.generalFields=fields.filter((function(field){return!textAreaFields(field)&&!_this.skipFields.includes(field.name)})).sort((function(a,b){return["DATE","DATE_TIME"].includes(a.dataTypeEnum)?-1:["DATE","DATE_TIME"].includes(b.dataTypeEnum)?1:0})),this.generalFields.length%2!==0&&this.generalFields.push({}),this.textAreaFields=fields.filter((function(field){return textAreaFields(field)&&!_this.skipFields.includes(field.name)})),Promise.all(promises).then((function(){_this.loading=!1,_this.autoResize()}))},getFormattedValue:function(fieldObj){var _this2=this,lookupObj=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(resolve){if("matchedResources"===fieldObj.name||"includedResources"===fieldObj.name){var fieldObjName=lookupObj&&lookupObj[fieldObj.name];fieldObjName=fieldObjName[0].name,resolve(fieldObjName||"---")}else{var value=lookupObj&&lookupObj[fieldObj.name];if((0,utils_field/* isDateField */.y2)(fieldObj)||(0,utils_field/* isDateTimeField */.K)(fieldObj))resolve(value>0?(0,field_utils/* getDisplayValue */.UZ)(fieldObj,value):"---");else if((0,utils_field/* isEnumField */.Ri)(fieldObj))resolve(value?(0,field_utils/* getDisplayValue */.UZ)(fieldObj,value):"---");else if((0,utils_field/* isBooleanField */.Mw)(fieldObj))resolve((0,validation/* isBoolean */.jn)(value)?(0,field_utils/* getDisplayValue */.UZ)(fieldObj,value):"---");else if("DURATION"===fieldObj.displayTypeEnum)resolve(_this2.$helpers.getFormattedDuration(value,(0,validation/* isEmpty */.xb)(fieldObj.unit)?"s":fieldObj.unit));else if(!(0,validation/* isEmpty */.xb)(fieldObj)&&[2,3].includes(fieldObj.dataType)){var _ref=fieldObj||{},unit=_ref.unit;value=(0,validation/* isEmpty */.xb)(value)||(0,validation/* isEmpty */.xb)(unit)?(0,validation/* isEmpty */.xb)(value)?"---":"".concat(value):"".concat(value," ").concat(unit),resolve(value)}else if(!(0,validation/* isEmpty */.xb)(fieldObj)&&(0,utils_field/* isLocationField */.yP)(fieldObj))resolve(value?parseFloat(value.lat).toFixed(6)+","+parseFloat(value.lng).toFixed(6):"---");else if((0,utils_field/* isLookupSimple */.qu)(fieldObj)&&value&&_this2.$getProperty(fieldObj,"lookupModuleName",null)){var isRotating=["rotatingItem","rotatingTool"].includes(fieldObj.name);if(!isRotating)if("Site"===fieldObj.displayName&&-1===value)resolve("All sites");else if(["spacecategory"].includes(fieldObj.lookupModuleName))resolve((_this2.details["".concat(fieldObj.name)]||{}).name||"---");else if(["ticket","workorder"].includes(_this2.$getProperty(fieldObj,"lookupModule.name")))resolve((0,validation/* isEmpty */.xb)((value||{}).serialNumber)?"---":"#".concat(value.serialNumber));else if("purchaseorder"===_this2.$getProperty(fieldObj,"lookupModule.name"))resolve((0,validation/* isEmpty */.xb)((value||{}).localId)?"---":"#".concat(value.localId));else if((0,utils_field/* isLookupSimple */.qu)(fieldObj)&&_this2.$getProperty(lookupObj,fieldObj.name,null)&&(0,validation/* isObject */.Kn)(lookupObj[fieldObj.name])&&_this2.$getProperty(lookupObj,"".concat(fieldObj.name,".primaryValue"),null)||fieldObj&&"LOOKUP_SIMPLE"===fieldObj.displayType&&_this2.$getProperty(lookupObj,fieldObj.name,null)&&(0,validation/* isObject */.Kn)(lookupObj[fieldObj.name])&&_this2.$getProperty(lookupObj,"".concat(fieldObj.name,".primaryValue"),null)){
// Custom modules lookup fields
var name=fieldObj&&fieldObj.name;resolve(lookupObj[name].primaryValue?lookupObj[name].primaryValue:"---")}else{var lookupModuleName=fieldObj.lookupModuleName||fieldObj.lookupModule.name;(0,picklist/* getFieldValue */.oe)({lookupModuleName:lookupModuleName,selectedOptionId:[(value||{}).id||value]}).then((function(_ref2){var error=_ref2.error,data=_ref2.data;if(error)resolve("---");else{var _value=_this2.$getProperty(data,"0.label");resolve(_value||"---")}}))}}else if((0,field_utils/* isLookupPopup */.CT)(fieldObj)){if("users"===fieldObj.lookupModuleName){var _ref3=value||{},id=_ref3.id;resolve(id>0?_this2.getUser(id).name:"---")}}else resolve(value||"---")}}))},isLookUpRedirectApplicable:function(field){var lookUpSpecialSupportModules=this.lookUpSpecialSupportModules;return"LOOKUP_SIMPLE"===field.displayTypeEnum&&field.lookupModuleName&&(lookUpSpecialSupportModules.includes(field.lookupModuleName)||field.lookupModule&&"CUSTOM"===field.lookupModule.typeEnum)},isLocationFieldOrNot:function(field){var _ref4=field||{},displayValue=_ref4.displayValue;return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isLocationField */.yP)(field)&&"---"!==displayValue)},getUrlDisplayName:function(field){var _ref5=field||{},displayValue=_ref5.displayValue,_ref6=displayValue||{},name=_ref6.name,href=_ref6.href;return name||href}}},common_FixedFieldDetailsvue_type_script_lang_js=FixedFieldDetailsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(common_FixedFieldDetailsvue_type_script_lang_js,render,staticRenderFns,!1,null,"7f5285a0",null)
/* harmony default export */,FixedFieldDetails=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/45963.js.map