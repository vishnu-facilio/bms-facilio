"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[25887],{
/***/125887:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Connections}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/Connections.vue?vue&type=template&id=531dcbce&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 width100"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title"},[_vm._v(" "+_vm._s(_vm.$t("common.products.connectors"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("common._common.list_of_all_connectors"))+" ")])]),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.newConnectionOpen}},[_vm._v(_vm._s(_vm.$t("common.products.new_connector")))])],1)]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{"min-width":"250px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.display_name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{"min-width":"200px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.connectors_name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{"min-width":"180px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.connector_status"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{"min-width":"180px"}}),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{"min-width":"160px"}})])]),_vm.loading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)])]):_vm.connections&&_vm.connections.length?_c("tbody",_vm._l(_vm.connections,(function(connection,index){return _c("tr",{key:index,staticClass:"tablerow"},[_c("td",[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(connection.serviceName))])])])])]),_c("td",[_vm._v(_vm._s(connection.name))]),_c("td",[_c("el-tag",{staticClass:"f12",attrs:{size:"mini",type:_vm.tagState[connection.state]}},[_vm._v(_vm._s(_vm.state[connection.state]))])],1),_c("td",[2===connection.state&&connection.authenticationURL?_c("div",[_c("el-button",{staticClass:"uppercase connection-auth-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.openAuthenticationPanel(connection)}}},[_vm._v(_vm._s(_vm.$t("common.header.authorize")))])],1):_vm._e()]),_c("td",[_c("div",{staticClass:"text-left actions",staticStyle:{"margin-top":"-3px","margin-right":"15px","text-align":"center"}},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer el-icon-refresh pR10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.invalid_conection")},on:{click:function($event){return _vm.invalidConnection(connection)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-connection pointer",class:connection.clientId?_vm.$t("common.header.connected"):_vm.$t("common.header.notconnected"),attrs:{"data-arrow":"true",title:_vm.$t("common._common.credentials")},on:{click:function($event){return _vm.updateCredentials(connection)}}}),_vm._v("   "),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon",attrs:{"data-arrow":"true",title:_vm.$t("common.header.edit_connector")},on:{click:function($event){return _vm.editconnection(connection)}}}),_vm._v("    "),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer",attrs:{"data-arrow":"true",title:_vm.$t("common.header.delete_connector")},on:{click:function($event){return _vm.deleteconnection(connection)}}})])])])})),0):_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_connections_available"))+" ")])])])])])])]),_vm.showCreateNewDialog?_c("new-connection",{attrs:{isNew:_vm.isNew,connectionObj:_vm.connection},on:{saved:_vm.saved,onClose:function($event){_vm.showCreateNewDialog=!1},reloadList:_vm.loadconnections}}):_vm._e(),_vm.showCredentials?_c("new-credentials",{attrs:{isNew:!1,visibility:_vm.showCredentials,connectionObj:_vm.connection},on:{"update:visibility":function($event){_vm.showCredentials=$event},saved:_vm.loadconnections}}):_vm._e()],1)},staticRenderFns=[],NewConnection=__webpack_require__(413448),NewConnectionCredentials=__webpack_require__(899775),Connectionsvue_type_script_lang_js={title:function(){return"connections"},components:{NewConnection:NewConnection/* default */.Z,NewCredentials:NewConnectionCredentials/* default */.Z},watch:{$route:function(from,to){}},data:function(){return{showCreateNewDialog:!1,showCredentials:!1,loading:!0,closed:!1,isNew:!0,authWindow:{},state:{1:"CREATED",2:"NOT CONNECTED",3:"CONNECTED",4:"CONNECTED",5:"DISABLED"},tagState:{1:"",2:"warning",3:"success",4:"success",5:"danger"},connection:{name:"",id:null,authType:1,serviceName:"",clientId:null,clientSecretId:null,scope:null,authorizeUrl:"",accessTokenUrl:"",refreshTokenUrl:"",revokeTokenUrl:"",accessToken:"",authCode:"",refreshToken:"",callBackURL:""},connectionBasic:{name:"",ParamType:1,connectionParams:[{key:"",value:""}]},emitForm:!1,resetForm:!1}},mounted:function(){this.loadconnections()},methods:{openAuthenticationPanel:function(connection){connection&&(this.authWindow=window.open(connection.authenticationURL,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=700,height=700,left=250"),this.closeEventCheck(this.authWindow,connection))},newConnectionOpen:function(){this.showCreateNewDialog=!0,this.isNew=!0},closeEventCheck:function(win,connection){this.intervalObj&&(clearInterval(this.intervalObj),this.intervalObj=null);var closed=!1,self=this,interval=setInterval((function(){win.closed&&!closed&&(closed=!0,self.checktheConnection(connection),clearInterval(interval))}),250)},checktheConnection:function(connection){var self=this;self.$http.get("/v2/connection/getAllConnection").then((function(response){self.connections=response.data.result.connections?response.data.result.connections:[],connection.state>=3?(self.$message.success(this.$t("common.wo_report.authenticated_successfully")),self.loading=!0,self.loading=!1):self.$message.error(this.$t("common.wo_report.authenticated_failed"))})).catch((function(error){self.loading=!1}))},loadconnections:function(){var that=this;that.loading=!0,that.$http.get("/v2/connection/getAllConnection").then((function(response){that.connections=response.data.result.connections?response.data.result.connections:[],that.loading=!1})).catch((function(error){that.loading=!1}))},updateCredentials:function(connection){this.showCreateNewDialog=!1,this.connection=connection,this.showCredentials=!0},cancelForm:function(){this.resetForm=!0,this.showCreateNewDialog=!1,this.showCredentials=!1},saveForm:function(){this.emitForm=!0},saved:function(data,type){type?this.$nextTick((function(){data.authType})):this.loadconnections()},editconnection:function(connection){this.connection=connection,this.showCreateNewDialog=!0,this.isNew=!1},invalidConnection:function(connection){var _this=this;this.$http.post("/v2/connection/invalidateConnection",{connectionContext:{id:connection.id}}).then((function(response){response.data&&(_this.$message.warning(_this.$t("common._common.connection_invalidate")),_this.loadconnections())}))},deleteconnection:function(connection){var _this2=this;this.$dialog.confirm({title:this.$t("common.header.delete_connection"),message:this.$t("common._common.are_you_sure_want_to_delete_this_connection"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then((function(value){value&&_this2.$http.post("/v2/connection/delete",{connectionContext:{id:connection.id}}).then((function(response){response.data&&(_this2.$message.success(_this2.$t("common.products.connection_deleted_successfully")),_this2.loadconnections())}))}))}}},setup_Connectionsvue_type_script_lang_js=Connectionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(setup_Connectionsvue_type_script_lang_js,render,staticRenderFns,!1,null,"531dcbce",null)
/* harmony default export */,Connections=component.exports},
/***/413448:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewConnection}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/new/NewConnection.vue?vue&type=template&id=3c7f911c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog50 setup-dialog","before-close":_vm.closeDialog}},[_c("div",{attrs:{id:"newenpi"}},[_c("el-form",{ref:"meterForm",staticClass:"fc-form",attrs:{model:_vm.connection,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?_vm.$t("common.products.new_connector"):_vm.$t("common.header.edit_connector"))+" ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("div",{staticClass:"body-scroll"},[_c("el-row",{staticClass:"pB5",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.authentication_types"))+" ")]),_c("el-select",{staticClass:"width100 fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.$t("common.products.select_auth_type")},on:{change:function($event){return _vm.resetForm(_vm.connection.authType)}},model:{value:_vm.connection.authType,callback:function($$v){_vm.$set(_vm.connection,"authType",$$v)},expression:"connection.authType"}},[_c("el-option",{attrs:{label:"OAuth2",value:parseInt(1)}}),_c("el-option",{attrs:{label:_vm.$t("common.header.basic_authentication"),value:parseInt(2)}})],1)],1)],1),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.grand_type"))+" ")]),_c("el-select",{staticClass:"width100 fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.$t("common.products.select_auth_type")},model:{value:_vm.connection.grantType,callback:function($$v){_vm.$set(_vm.connection,"grantType",$$v)},expression:"connection.grantType"}},[_c("el-option",{attrs:{label:_vm.$t("common.header.authorization_code"),value:1}}),_c("el-option",{attrs:{label:_vm.$t("common.header.client_credentials"),value:2}}),_c("el-option",{attrs:{label:_vm.$t("common.header.password_credentials"),value:3}}),_c("el-option",{attrs:{label:_vm.$t("common.header.implicit"),value:4}})],1)],1)],1):_vm._e(),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.connectors_name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_connection_name")},model:{value:_vm.connection.name,callback:function($$v){_vm.$set(_vm.connection,"name",$$v)},expression:"connection.name"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.display_name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_service_name")},model:{value:_vm.connection.serviceName,callback:function($$v){_vm.$set(_vm.connection,"serviceName",$$v)},expression:"connection.serviceName"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType&&1===_vm.connection.grantType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.authorize_url"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_uri")},model:{value:_vm.connection.authorizeUrl,callback:function($$v){_vm.$set(_vm.connection,"authorizeUrl",$$v)},expression:"connection.authorizeUrl"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.access_token_url"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_uri")},model:{value:_vm.connection.accessTokenUrl,callback:function($$v){_vm.$set(_vm.connection,"accessTokenUrl",$$v)},expression:"connection.accessTokenUrl"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.refresh_token_url"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_uri")},model:{value:_vm.connection.refreshTokenUrl,callback:function($$v){_vm.$set(_vm.connection,"refreshTokenUrl",$$v)},expression:"connection.refreshTokenUrl"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType?[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.client_id"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common.header.client_id")},model:{value:_vm.connection.clientId,callback:function($$v){_vm.$set(_vm.connection,"clientId",$$v)},expression:"connection.clientId"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.client_secret"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common.header.client_secret")},model:{value:_vm.connection.clientSecretId,callback:function($$v){_vm.$set(_vm.connection,"clientSecretId",$$v)},expression:"connection.clientSecretId"}})],1)],1)],1)]:_vm._e(),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.scope"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_scope")},model:{value:_vm.connection.scope,callback:function($$v){_vm.$set(_vm.connection,"scope",$$v)},expression:"connection.scope"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.audience"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_audience")},model:{value:_vm.connection.audience,callback:function($$v){_vm.$set(_vm.connection,"audience",$$v)},expression:"connection.audience"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.resource_"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_resource")},model:{value:_vm.connection.resource,callback:function($$v){_vm.$set(_vm.connection,"resource",$$v)},expression:"connection.resource"}})],1)],1)],1):_vm._e(),1===_vm.connection.authType&&3===_vm.connection.grantType?[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.user_name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_user_name")},model:{value:_vm.connection.userName,callback:function($$v){_vm.$set(_vm.connection,"userName",$$v)},expression:"connection.userName"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.password"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{"show-password":"",autofocus:"",type:"password",placeholder:_vm.$t("common._common.enter_password"),autocomplete:"new-password"},model:{value:_vm.connection.password,callback:function($$v){_vm.$set(_vm.connection,"password",$$v)},expression:"connection.password"}})],1)],1)],1)]:_vm._e(),2===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:20}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_name")},model:{value:_vm.connectionBasic.name,callback:function($$v){_vm.$set(_vm.connectionBasic,"name",$$v)},expression:"connectionBasic.name"}})],1)],1)],1):_vm._e(),2===_vm.connection.authType?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.service_name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_service_name")},model:{value:_vm.connectionBasic.serviceName,callback:function($$v){_vm.$set(_vm.connectionBasic,"serviceName",$$v)},expression:"connectionBasic.serviceName"}})],1)],1)],1):_vm._e(),2===_vm.connection.authType?_c("div",[_vm.isNew?_c("div",[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.user_name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_user_name")},model:{value:_vm.connectionBasic.connectionParams.userName,callback:function($$v){_vm.$set(_vm.connectionBasic.connectionParams,"userName",$$v)},expression:"connectionBasic.connectionParams.userName"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.password"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"password",autocomplete:"new-password",placeholder:_vm.$t("common._common.enter_password"),"show-password":""},model:{value:_vm.connectionBasic.connectionParams.password,callback:function($$v){_vm.$set(_vm.connectionBasic.connectionParams,"password",$$v)},expression:"connectionBasic.connectionParams.password"}})],1)],1)],1)],1):_c("div",_vm._l(_vm.connectionBasic.connectionParams,(function(connection,key){return _c("div",{key:key},[0===key?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.products.user_name"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common._common.enter_user_name")},model:{value:connection.value,callback:function($$v){_vm.$set(connection,"value",$$v)},expression:"connection.value"}})],1)],1)],1):_vm._e(),1===key?_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.password"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"password",autocomplete:"new-password",placeholder:_vm.$t("common._common.enter_password"),"show-password":""},model:{value:connection.value,callback:function($$v){_vm.$set(connection,"value",$$v)},expression:"connection.value"}})],1)],1)],1):_vm._e()],1)})),0)]):_vm._e()],2)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel")))]),1===_vm.connection.authType?_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm()}}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")]):_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.submitBasicForm}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1)])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(32284)),NewConnectionvue_type_script_lang_js={props:["isNew","connectionObj","kpiCategoryId"],data:function(){return{saving:!1,connection:{id:null,name:"",authType:1,grantType:1,serviceName:"",clientId:null,clientSecretId:null,scope:null,audience:null,resource:null,authorizeUrl:"",accessTokenUrl:"",refreshTokenUrl:"",revokeTokenUrl:"",accessToken:"",authCode:"",refreshToken:"",userName:"",password:""},connectionBasic:{name:"",serviceName:"",ParamType:1,connectionParams:[{key:"userName",value:null},{key:"password",value:null}]}}},mounted:function(){this.isNew?this.resetForm():(this.connectionBasic=(0,objectSpread2/* default */.Z)({},this.connectionObj),this.connection=this.connectionObj,this.connectionBasic=this.connectionObj)},methods:{getConnectionParams:function(){
// if (this.isNew) {
//   return {
//     authType: this.connection.authType,
//     name: this.connection.name,
//     serviceName: this.connection.serviceName,
//     scope: this.connection.scope,
//     authorizeUrl: this.connection.authorizeUrl,
//     accessTokenUrl: this.connection.accessTokenUrl,
//     refreshTokenUrl: this.connection.refreshTokenUrl,
//   }
// } else {
//   return this.connection
return this.connection},getConnectionBasicParams:function(){return{authType:this.connection.authType,name:this.connectionBasic.name,id:this.connection.id,ParamType:this.connectionBasic.ParamType,serviceName:this.connectionBasic.serviceName,connectionParams:[{key:"userName",value:this.connectionBasic.connectionParams&&this.connectionBasic.connectionParams.userName},{key:"password",value:this.connectionBasic.connectionParams&&this.connectionBasic.connectionParams.password}]}},editGetConnectionBasicParams:function(){return{authType:this.connection.authType,name:this.connectionBasic.name,id:this.connection.id,ParamType:this.connectionBasic.ParamType,serviceName:this.connectionBasic.serviceName,connectionParams:[{key:"userName",value:this.connectionBasic.connectionParams[0]&&this.connectionBasic.connectionParams[0].value},{key:"password",value:this.connectionBasic.connectionParams[1]&&this.connectionBasic.connectionParams[1].value}]}},toObject:function(array){var obj={};return array.forEach((function(rt){obj[rt.key]=rt.value})),obj},removeParam:function(index){this.connectionBasic.connectionParams.splice(index,1)},submitBasicForm:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var self,param,url,_yield$API$post,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return self=_this,self.saving=!0,param=null,param=_this.isNew?{connectionContext:_this.getConnectionBasicParams()}:{connectionContext:_this.editGetConnectionBasicParams()},url=_this.isNew?"/v2/connection/add":"/v2/connection/update",_context.next=7,api/* API */.bl.post(url,param);case 7:_yield$API$post=_context.sent,error=_yield$API$post.error,data=_yield$API$post.data,data?self.isNew?self.$message.success(_this.$t("common._common.connection_created_successfully")):self.$message.success(_this.$t("common._common.connection_updated_successfully")):error&&self.$message.error(error.message),self.saving=!1,_this.$emit("reloadList"),_this.closeDialog();case 14:case"end":return _context.stop()}}),_callee)})))()},agentVersion:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,error,data,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("v2/agent/versions?latestVersion=true");case 2:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?(message=error.message,_this2.$message.error(message)):_this2.versionData=data||[];case 6:case"end":return _context2.stop()}}),_callee2)})))()},submitForm:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var self,param,url,_yield$API$post2,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return self=_this3,self.saving=!0,param={connectionContext:_this3.getConnectionParams()},url=_this3.isNew?"/v2/connection/add":"/v2/connection/update",_context3.next=6,api/* API */.bl.post(url,param);case 6:_yield$API$post2=_context3.sent,data=_yield$API$post2.data,data?(_this3.isNew?_this3.$message.success(_this3.$t("common._common.connection_created_successfully")):_this3.$message.success(_this3.$t("common._common.connection_updated_successfully")),_this3.toggleCredentials(data)):_this3.$message.error(_this3.$t("common.wo_report.unable_to_create_connection")),_this3.saving=!1,_this3.closeDialog();case 11:case"end":return _context3.stop()}}),_callee3)})))()},resetForm:function(authType){this.connection={name:"",authType:authType||1,grantType:1,serviceName:"",clientId:null,clientSecretId:null,scope:null,audience:null,resource:null,authorizeUrl:"",accessTokenUrl:"",refreshTokenUrl:"",revokeTokenUrl:"",accessToken:"",authCode:"",refreshToken:"",userName:"",password:""},this.connectionBasic={name:"",ParamType:1,serviceName:"",connectionParams:[]}},
// cancel() {
//   this.resetForm()
//   this.$emit('canceled')
//   this.closeDialog()
// },
save:function(){var self=this;self.saving=!0},toggleCredentials:function(data){var self=this;data.connection&&self.isNew?self.$emit("saved",data.connection,!0):self.$emit("saved")},closeDialog:function(){this.$emit("onClose")}}},new_NewConnectionvue_type_script_lang_js=NewConnectionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(new_NewConnectionvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewConnection=component.exports},
/***/899775:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewConnectionCredentials}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/new/NewConnectionCredentials.vue?vue&type=template&id=1a5ad2e0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,"custom-class":"setup-dialog-2","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticStyle:{height:"400px"},attrs:{id:"newenpi"}},[_c("el-form",{ref:"meterForm",staticClass:"fc-form",attrs:{model:_vm.connection,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("common.header.client_credentials"))+" ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("div",{staticClass:"body-scroll"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.client_id"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common.header.client_id")},model:{value:_vm.connection.clientId,callback:function($$v){_vm.$set(_vm.connection,"clientId",$$v)},expression:"connection.clientId"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.client_secret"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common.header.client_secret")},model:{value:_vm.connection.clientSecretId,callback:function($$v){_vm.$set(_vm.connection,"clientSecretId",$$v)},expression:"connection.clientSecretId"}})],1)],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.header.redirect_url"))+" ")]),_c("el-form-item",[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",autocomplete:"off",placeholder:_vm.$t("common.header.redirect_url")},model:{value:_vm.connection.callBackURL,callback:function($$v){_vm.$set(_vm.connection,"callBackURL",$$v)},expression:"connection.callBackURL"}})],1)],1)],1)],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.submitForm}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common.updating"):_vm.$t("common._common.update"))+" ")])],1)])],1)])},staticRenderFns=[],NewConnectionCredentialsvue_type_script_lang_js=(__webpack_require__(434284),{props:["isNew","connectionObj","visibility","kpiCategoryId"],data:function(){return{saving:!1,connection:{id:null,name:"",authType:1,serviceName:"",clientId:null,clientSecretId:null,scope:null,authorizeUrl:"",accessTokenUrl:"",refreshTokenUrl:"",revokeTokenUrl:"",accessToken:"",authCode:"",refreshToken:"",callBackURL:""},connectionBasic:{name:"",ParamType:1,connectionParams:[{key:"",value:""}]}}},mounted:function(){this.isNew?this.resetForm():this.connection=this.$helpers.cloneObject(this.connectionObj)},methods:{getConnectionParams:function(){return this.isNew?{authType:this.connection.authType,name:this.connection.name,serviceName:this.connection.serviceName,scope:this.connection.scope,authorizeUrl:this.connection.authorizeUrl,accessTokenUrl:this.connection.accessTokenUrl,refreshTokenUrl:this.connection.refreshTokenUrl}:{id:this.connection.id,clientId:this.connection.clientId,clientSecretId:this.connection.clientSecretId}},submitForm:function(){var _this=this,self=this;this.showCreateNewDialog=!1;var param={connectionContext:this.getConnectionParams()},url="/v2/connection/update";self.$http.post(url,param).then((function(response){0===response.data.responseCode?self.isNew?self.$message.success(_this.$t("common._common.connection_created_successfully")):self.$message.success(_this.$t("common._common.connection_updated_successfully")):self.$message.error(response.data.message),self.resetForm(),self.$emit("saved"),self.cancel()})).catch((function(error){self.$message.error(_this.$t("common.wo_report.unable_to_create_connection"))}))},resetForm:function(){this.connection={name:"",authType:1,serviceName:"",clientId:null,clientSecretId:null,scope:null,authorizeUrl:"",accessTokenUrl:"",refreshTokenUrl:"",revokeTokenUrl:"",accessToken:"",authCode:"",refreshToken:"",callBackURL:""},this.connectionBasic={name:"",ParamType:1,connectionParams:{}}},cancel:function(){this.resetForm(),this.$emit("canceled"),this.closeDialog()},save:function(){var self=this;self.saving=!0},closeDialog:function(){this.$emit("update:visibility",!1),this.$emit("closed")}}}),new_NewConnectionCredentialsvue_type_script_lang_js=NewConnectionCredentialsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(new_NewConnectionCredentialsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewConnectionCredentials=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/25887.js.map