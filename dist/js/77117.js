"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[77117],{
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/68925:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return InventoryOverallCost}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v3/widgets/InventoryOverallCost.vue?vue&type=template&id=3904ef24
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"white-bg-block pm-summary-right-bg wo-summary-right-bg-border"},[_c("div",{staticClass:"new-in-header p30"},[_vm._v(" "+_vm._s(_vm.$t("common.header.overall_cost"))+" ")]),_vm.workOrderCostList.length?_c("div",_vm._l(_vm.workOrderCostList,(function(cost){return _c("el-row",{key:cost.id,staticClass:"overallCost visibility-visible-actions"},["custom"===cost.costTypeEnum&&_vm.actionRule?_c("span",{staticClass:"visibility-hide-actions mL30 export-dropdown-menu additionalCostIcon additionalCostDelete",on:{click:function($event){return _vm.deleteAdditionalCost(cost.id)}}},[_c("i",{staticClass:"el-icon-delete"})]):_vm._e(),"custom"===cost.costTypeEnum?_c("el-col",{attrs:{span:18}},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"label-txt-black textoverflow-ellipsis",attrs:{content:cost.name}},[_vm._v(" "+_vm._s(cost.name)+" ")])]):_c("el-col",{attrs:{span:18}},[_c("div",{staticClass:"label-txt-black textoverflow-ellipsis"},[_vm._v(" "+_vm._s(cost.name)+" ")])]),(cost.costTypeEnum,_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"label-txt-black text-right"},[_c("currency",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"textoverflow-ellipsis",attrs:{value:cost.cost,content:_vm.$helpers.formatedCurrencyCost(cost.cost),recordCurrency:_vm.recordCurrency}})],1)]))],1)})),1):_c("div",[_c("el-row",{staticClass:"p30"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.$t("common.products.items"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black text-right"},[_vm._v("0")])])],1),_c("el-row",{staticClass:"p30 pT10"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black"},[_vm._v(" "+_vm._s(_vm.$t("common.header.tools"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"label-txt-black text-right"},[_vm._v("0")])])],1)],1),_c("el-row",{staticClass:"fc-spares-subtotal-additional overallCost relative visibility-visible-actions"},[_c("el-col",{attrs:{span:17}},[_c("el-input",{staticClass:"fc-input-full-border2 width140px",attrs:{placeholder:_vm.$t("common._common.additional_cost")},on:{change:function($event){return _vm.addAdditionalCost()}},model:{value:_vm.additionalCost.name,callback:function($$v){_vm.$set(_vm.additionalCost,"name",$$v)},expression:"additionalCost.name"}})],1),_c("el-col",{attrs:{span:1}}),_c("el-col",{staticClass:"text-right additionalCostEnter pL20",attrs:{span:6}},["$"===_vm.$currency?_c("el-input",{staticClass:"fc-input-full-border2 inventory-input-width75px text-right",attrs:{placeholder:"0",type:"number",prefix:_vm.$currency},on:{change:function($event){return _vm.addAdditionalCost()}},model:{value:_vm.additionalCost.cost,callback:function($$v){_vm.$set(_vm.additionalCost,"cost",$$v)},expression:"additionalCost.cost"}}):_vm._e(),"$"!==_vm.$currency?_c("el-input",{staticClass:"fc-input-full-border2 inventory-input-width75px text-right",attrs:{placeholder:"0",type:"number",suffix:_vm.$currency},on:{change:function($event){return _vm.addAdditionalCost()}},model:{value:_vm.additionalCost.cost,callback:function($$v){_vm.$set(_vm.additionalCost,"cost",$$v)},expression:"additionalCost.cost"}}):_vm._e()],1)],1),_c("el-row",{staticClass:"border-top1 text-right total-amount"},[_c("el-col",{staticClass:"p30 pT10",attrs:{span:24}},[_c("div",{},[_c("currency",{attrs:{value:_vm.workOrderTotalCost,recordCurrency:_vm.recordCurrency}})],1),_c("div",{staticClass:"fc-text-pink13 fw-bold text-right pT5"},[_vm._v(" "+_vm._s(_vm.$t("common.header._total"))+" ")])])],1)],1)},staticRenderFns=[],workorderHelper=(__webpack_require__(434284),__webpack_require__(879288),__webpack_require__(865764)),eventBus=__webpack_require__(398011),InventoryOverallCostvue_type_script_lang_js={props:["details"],mixins:[workorderHelper/* default */.Z],data:function(){return{selectedInventory:null,hidequrry:!0,additionalCost:{name:null,cost:null},loading:{deleteAdditionalCost:!1},selectedInventoryList:[],inventoryRequestForWOLoading:!1,iTloading:!1,workOrderCostList:[],inventory:[],tempStoreList:[],selectedStoreList:[],inventoryRequestDialogVisibility:!1,issueInventoryIRDialogVisibility:!1,inventoryRequestList:null,inventoryListLoading:!1}},created:function(){this.$store.dispatch("loadTicketStatus","workorder"),this.init()},mounted:function(){var _this=this;this.$root.$on("refresh-inventory-summary",(function(){
// console.log('event received to reload from root')
_this.init()})),eventBus/* eventBus */.Y.$on("refresh-inventory-summary",(function(){
// console.log('event received to reload')
_this.init()})),eventBus/* eventBus */.Y.$on("reloadOverallCost",(function(){_this.init()}))},computed:{workorder:function(){return this.details.workorder},workOrderTotalCost:function(){if(this.workOrderCostList&&this.workOrderCostList.length){for(var cost=0,i=0;i<this.workOrderCostList.length;i++)cost+=this.workOrderCostList[i].cost;return cost}return 0},canEdit:function(){return this.isStateFlowEnabled?!this.$store.getters.isStatusLocked(this.workorder.moduleState.id,"workorder"):this.workorder&&2!==this.workorder.approvalState},actionRule:function(){return!!this.canEdit},isStateFlowEnabled:function(){return Boolean(this.workorder.moduleState&&this.workorder.moduleState.id)}},methods:{init:function(){this.getWorkOrderCostList(!0)},reload:function(){
// this.loadWoItemParts(true)
},addAdditionalCost:function(){var _this2=this,self=this;if(this.additionalCost.name&&null!==this.additionalCost.cost){var param={workorderCost:{name:this.additionalCost.name,parentId:{id:this.workorder.id},cost:Number(this.additionalCost.cost),costType:5}};this.$http.post("v2/workorderCosts/add",param).then((function(response){0===response.data.responseCode?(self.$message.success(_this2.$t("common._common.cost_added_successfully")),self.actionToWorkorderStatusChange(),self.additionalCost={name:null,cost:null},self.getWorkOrderCostList()):self.$message.error(response.data.message)}))}},actionToWorkorderStatusChange:function(){this.fetchWo()},deleteAdditionalCost:function(id){if(id){var self=this,param={workordercostId:[id],parentId:this.workorder.id};this.$http.post("v2/workorderCosts/delete",param).then((function(response){self.actionToWorkorderStatusChange(),0===response.data.responseCode?(self.getWorkOrderCostList(),self.$message.success("Cost Deleted")):self.$message.error(response.data.message)}))}},getWorkOrderCostList:function(loading){var self=this;this.$http.get("v2/workorderCostsList/parent/"+this.workorder.id).then((function(response){loading||(self.itemnsloading=!1),self.workOrderCostList=response.data.result.workorderCost}))}}},widgets_InventoryOverallCostvue_type_script_lang_js=InventoryOverallCostvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(widgets_InventoryOverallCostvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,InventoryOverallCost=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/77117.js.map