(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[40566],{
/***/240566:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return KioskCheckout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/devices/VisitorKiosk/KioskCheckout.vue?vue&type=template&id=ad10b276
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-kiosk-checkout-page"},[_c("mobile-or-qr",{attrs:{action:"checkout"},on:{authDone:_vm.handleAuth}})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),MobileOrQR=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(573464)),visitorHelpers=__webpack_require__(553330),KioskCheckoutvue_type_script_lang_js={components:{mobileOrQr:MobileOrQR/* default */.Z},methods:{handleAuth:function(authData){var _this=this;if("qr"==authData.type){var splitQr=authData.qr.split("_"),passCode=splitQr[1];
// let visitorLogId=splitQr[1]
this.checkoutWithPassCode(passCode).then((function(){_this.$router.replace({name:"visitorthankyou",query:{messageType:"checkOut"}})})).catch((function(){_this.$message({message:"Eror occured during checkout ,please contact admin",type:"error"}),(0,visitorHelpers/* errorRedirect */.J)()}))}else"mobile"==authData.type&&this.checkoutWithPhone(authData.mobile).then((function(){_this.$router.replace({name:"visitorthankyou",query:{messageType:"checkOut"}})}))},checkoutWithPhone:function(phone){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this2.$http.post("/v2/visitorLogging/checkOutWithPhone",{contactNumber:phone});case 2:return _context.abrupt("return");case 3:case"end":return _context.stop()}}),_callee)})))()},checkoutWithPassCode:function(passCode){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var visitorLogResp,visitorLogId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this3.$http.post("/v2/visitorLogging/getVisitorLogforPassCode",{passCode:passCode});case 2:if(visitorLogResp=_context2.sent,!(visitorLogResp.data.result.visitorlogging&&visitorLogResp.data.result.visitorlogging.visitor&&visitorLogResp.data.result.visitorlogging.visitor.phone)){_context2.next=8;break}return _context2.next=6,_this3.$http.post("/v2/visitorLogging/checkOutWithPhone",{contactNumber:visitorLogResp.data.result.visitorlogging.visitor.phone});case 6:_context2.next=11;break;case 8:return visitorLogId=visitorLogResp.data.result.visitorlogging.id,_context2.next=11,_this3.$http.post("/v2/visitorLogging/checkInFromKiosk",{recordId:visitorLogId});case 11:return _context2.abrupt("return");case 12:case"end":return _context2.stop()}}),_callee2)})))()}}},VisitorKiosk_KioskCheckoutvue_type_script_lang_js=KioskCheckoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(VisitorKiosk_KioskCheckoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,KioskCheckout=component.exports},
/***/573464:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return MobileOrQR}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/devices/VisitorKiosk/MobileOrQR.vue?vue&type=template&id=a4176a7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:["kiosk","auth page","fc-kiosk-form",{"kiosk-mobile-bg":!_vm.isInputOpen}]},[_c("div",{staticClass:"fc-kiosk-form-con"},[_c("div",{staticClass:"fc-kiosk-form position-relative"},[_c("div",{class:["fc-kiosk-form-header",{"kiosk-mobile-qr-header":!_vm.isInputOpen}]},[_c("div",{staticClass:"fc-kiosk-form-header-icon",on:{click:_vm.handleBack}},[_c("img",{attrs:{src:__webpack_require__(781058),width:"16",height:"16"}})]),_c("div",{staticClass:"fc-kiosk-f18"},[_vm._v(_vm._s(_vm.currentAccount.org.name))])]),_vm.isInputOpen?_vm._e():_c("div",{staticClass:"fc-kiosk-in-out-con"},[_c("div",{staticClass:"fc-checkin-mode fc-kiosk-in-out-bg fc-animated slideInUp",on:{click:_vm.mobileClicked}},[_c("img",{attrs:{src:__webpack_require__(433775),alt:"",title:""}}),_c("div",{staticClass:"fc-kiosk-16 pT10 bold"},[_vm._v("MOBILE")])]),_c("div",{staticClass:"fc-checkin-mode qr-options"},[_c("div",{staticClass:"fc-kiosk-in-out-bg mL40 fc-animated slideInUp",on:{click:function($event){_vm.isQrInput=!0}}},[_c("img",{staticClass:"pT10",attrs:{src:__webpack_require__(660588),alt:"",title:""}}),_c("div",{staticClass:"fc-kiosk-16 pT20 bold"},[_vm._v("SCAN QR")])])]),"checkout"!==_vm.action?_c("div",{staticClass:"fc-checkin-mode qr-options"},[_c("div",{staticClass:"fc-kiosk-in-out-bg mL40 fc-animated slideInUp",on:{click:function($event){_vm.isPassCodeOpen=!0}}},[_c("img",{staticStyle:{height:"70px"},attrs:{src:__webpack_require__(781254),alt:"",title:""}}),_c("div",{staticClass:"fc-kiosk-16 pT10 bold"},[_vm._v("INVITE CODE")])])]):_vm._e()]),_vm.isQrInput?_c("div",{staticClass:"kiosk-photo-capture-box d-flex flex-direction-column "},[_c("div",{staticClass:"qr-cam-title mB20 bold"},[_vm._v("Scan QR")]),_vm.error?_c("p",{staticClass:"error"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c("qrcode-stream",{attrs:{camera:_vm.camera},on:{decode:_vm.onDecode,init:_vm.onInit}})],1):_vm._e(),_vm.isMobileInput?_c("div",{staticClass:"fc-kiosk-form-con"},[_c("div",{staticClass:"position-relative fc-scale-in-center"},[_c("el-form",{nativeOn:{submit:function($event){return $event.preventDefault(),_vm.mobileNumberEntered.apply(null,arguments)}}},[_c("el-form-item",[_c("div",{staticClass:"fc-kiosk-form-label"},[_vm._v(" Enter mobile number ")]),_c("div",{staticClass:"fc-kiosk-form-input fc-kiosk-form-input-mobile"},[_c("el-input",{ref:"formInp",staticClass:"fc-kiosk-input mT10",attrs:{inputmode:"tel",autofocus:""},model:{value:_vm.mobile,callback:function($$v){_vm.mobile=$$v},expression:"mobile"}}),_c("el-button",{staticClass:"fc-kiosk-input-next",on:{click:_vm.mobileNumberEntered}},[_c("img",{attrs:{src:__webpack_require__(977117),height:"45",width:"45"}})])],1)])],1)],1)]):_vm._e(),_vm.isPassCodeOpen?_c("div",{staticClass:"d-flex flex-col align-center"},[_c("div",{staticClass:"fc-check-in-f22 pT10 pB20"},[_vm._v("Enter Invite Code")]),_c("div",{staticClass:"position-relative fc-scale-in-center"},[_c("vie-otp-input",{attrs:{inputClasses:"otp-input",numInputs:4,separator:"-",shouldAutoFocus:!0,"is-input-num":!0},on:{"on-complete":_vm.passCodeEntered}})],1)]):_vm._e()])]),_c("portal",{attrs:{to:"kiosk-footer-logo"}},[_vm.isInputOpen?_c("img",{staticStyle:{width:"70px",height:"20px"},attrs:{src:__webpack_require__(181242)}}):_c("img",{staticStyle:{width:"70px",height:"20px"},attrs:{src:__webpack_require__(408069)}})])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(228436),__webpack_require__(434284),__webpack_require__(420629)),vueOtpInput_common=__webpack_require__(926774),vueOtpInput_common_default=__webpack_require__.n(vueOtpInput_common),VueQrcodeReader_common=__webpack_require__(243464),MobileOrQRvue_type_script_lang_js={props:["action"],data:function(){return{isMobileInput:!1,isQrInput:!1,result:"",
//qr code
mobile:null,error:"",camera:"front",isPassCodeOpen:!1}},components:{"qrcode-stream":VueQrcodeReader_common.QrcodeStream,VieOtpInput:vueOtpInput_common_default()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["currentAccount"])),{},{isInputOpen:function(){return this.isMobileInput||this.isQrInput||this.isPassCodeOpen}}),methods:{switchCamera:function(){"front"==this.camera?this.camera="back":"back"==this.camera&&(this.camera="front")},passCodeEntered:function(e){this.$emit("authDone",{type:"qr",qr:"passcode_"+e})},handleBack:function(){this.isInputOpen?(this.isMobileInput=!1,this.isQrInput=!1,this.isPassCodeOpen=!1):this.$router.replace({name:"welcome"})},mobileClicked:function(){var _this=this;this.isMobileInput=!0,this.$nextTick((function(){_this.$refs["formInp"].focus()}))},mobileNumberEntered:function(){this.$emit("authDone",{type:"mobile",mobile:this.mobile})},onDecode:function(result){result&&result.trim()?(this.result=result,this.$emit("authDone",{type:"qr",qr:this.result})):this.$message({message:"Please position QR code in frame correctly",type:"info"})},onInit:function(promise){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,promise;case 3:_context.next=8;break;case 5:_context.prev=5,_context.t0=_context["catch"](0),"NotAllowedError"===_context.t0.name?_this2.error="ERROR: you need to grant camera access permisson":"NotFoundError"===_context.t0.name?_this2.error="ERROR: no camera on this device":"NotSupportedError"===_context.t0.name?_this2.error="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===_context.t0.name?_this2.error="ERROR: is the camera already in use?":"OverconstrainedError"===_context.t0.name?_this2.camera="auto":"StreamApiNotSupportedError"===_context.t0.name&&(_this2.error="ERROR: Stream API is not supported in this browser");case 8:case"end":return _context.stop()}}),_callee,null,[[0,5]])})))()}}},VisitorKiosk_MobileOrQRvue_type_script_lang_js=MobileOrQRvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(VisitorKiosk_MobileOrQRvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MobileOrQR=component.exports},
/***/181242:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"da85ccff86897ff2fe48e5fab3a86d03.svg";
/***/},
/***/408069:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f529a279eeb109c97db160a100b10186.svg";
/***/},
/***/781058:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"973bbd0a909a9dc270cbaf4a60651319.svg";
/***/},
/***/977117:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ab0dc785267645839fe3e0ef85592e3f.svg";
/***/},
/***/433775:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"5c144aea7920c6ff18a160143b8db3fe.svg";
/***/},
/***/660588:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ab3692f7d5d821f95c3d0a247421430.svg";
/***/},
/***/781254:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"b207b0de5e08a73e08f1994bd071773f.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/40566.js.map