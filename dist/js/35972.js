"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[35972],{
/***/735972:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ClassificationSpecificationWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/specification/ClassificationSpecificationWidget.vue?vue&type=template&id=57f26524
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"classification-specification-container"},[_vm.isLoading?_c("div",{staticClass:"flex-middle height-100"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.canShowWidget)?_c("div",{staticClass:"classification-specification-empty-state"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon icon-130"}}),_c("div",{staticClass:"classification-specification-empty-state-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.classification.empty_state_association"))+" ")]),_c("el-button",{staticClass:"classification-specification-add-btn",attrs:{type:"primary"},on:{click:function($event){_vm.canShowSpecificationWizard=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.classification.associate_classification"))+" ")])],1):_c("div",{staticClass:"classification-association-container"},[_c("field-details",{ref:"fieldDetails",attrs:{columns:_vm.noOfColumns,detailsLayout:_vm.detailsLayout,config:_vm.config}}),_c("div",{staticClass:"specification-right-content d-flex p20"},[_c("el-dropdown",{on:{command:_vm.handleCommand}},[_c("i",{staticClass:"el-icon-edit pointer"}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.editDropDownList,(function(editItem){return _c("el-dropdown-item",{key:editItem+"-index",attrs:{command:editItem}},[_vm._v(_vm._s(editItem))])})),1)],1),_c("div",{on:{click:_vm.showConfirmDelete}},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("setup.classification.remove_classification"),placement:"top-end"}},[_c("inline-svg",{staticClass:"mL20 pointer",attrs:{src:"svgs/spacemanagement/ic-delete",iconClass:"icon icon-md"}})],1)],1)],1)],1),_vm.canShowSpecificationWizard?_c("SpecificationWizard",{attrs:{isAttributeInherited:"true",fromModuleName:_vm.moduleName},on:{onSave:_vm.selectedClassification,specificationAttributes:function(v){return _vm.attributesList=v},onClose:function($event){_vm.canShowSpecificationWizard=!1}}}):_vm._e(),_vm.canShowSpecificationAttributes?_c("SpecificationAttributes",{attrs:{selectedAttribute:_vm.attributesList},on:{onClose:_vm.onCancelAttributes,onSave:_vm.saveAttribute}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),app=(__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(782080)),SpecificationWizard=__webpack_require__(968378),SpecificationAttributesvue_type_template_id_8999e13e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"attribute-list-specification",attrs:{"append-to-body":!0,visible:!0,width:"37%","before-close":_vm.closeDialog,"lock-scroll":"","custom-class":"fc-dialog-center-container"},scopedSlots:_vm._u([{key:"title",fn:function(){return[_c("div",{staticClass:"el-dialog__title self-center f18"},[_vm._v(" "+_vm._s(_vm.$t("setup.classification.attributes.attributes"))+" ")])]},proxy:!0}])},[_vm.$validation.isEmpty(_vm.attributesList)?_c("div",{staticClass:"flex-middle height-100 justify-center"},[_vm._v(" "+_vm._s(_vm.$t("setup.classification.attributes.empty_state_classification"))+" ")]):_c("el-form",{staticClass:"fc-form pT15 form-item",attrs:{"label-position":"top"},on:{submit:function($event){return $event.preventDefault(),_vm.save.apply(null,arguments)}}},_vm._l(_vm.attributesList,(function(attr){return _c("el-form-item",{key:attr.id,attrs:{label:attr.name,prop:attr.name}},[attr.fieldType===_vm.dataTypes.BOOLEAN?_c("Select",{attrs:{options:_vm.options,placeholder:"Select",valueName:"value",labelName:"label"},model:{value:attr.value,callback:function($$v){_vm.$set(attr,"value",$$v)},expression:"attr.value"}}):_vm._e(),attr.fieldType===_vm.dataTypes.DATE_TIME?_c("el-date-picker",{staticClass:"fc-input-full-border-select2 width100",attrs:{type:attr.displayType,placeholder:attr.placeholder,"value-format":"timestamp"},model:{value:attr.value,callback:function($$v){_vm.$set(attr,"value",$$v)},expression:"attr.value"}}):_vm._e(),[_vm.dataTypes.STRING,_vm.dataTypes.NUMBER,_vm.dataTypes.DECIMAL].includes(attr.fieldType)?_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{type:attr.displayType,placeholder:attr.placeholder},model:{value:attr.value,callback:function($$v){_vm.$set(attr,"value",$$v)},expression:"attr.value"}}):_vm._e()],1)})),1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel attributes-cancel-btn",on:{click:_vm.closeDialog}},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save attributes-save-btn",attrs:{type:"primary",loading:_vm.isSaving},on:{click:_vm.onSave}},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.save"))+" ")])],1)],1)},SpecificationAttributesvue_type_template_id_8999e13e_staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(990260)),classificationUtil=__webpack_require__(805282),ui_forms=__webpack_require__(141323),SpecificationAttributesvue_type_script_lang_js={props:["selectedAttribute","isSaving"],components:{Select:ui_forms/* Select */.Ph},data:function(){return{dataTypes:classificationUtil/* dataTypes */.D,attributesList:[]}},created:function(){this.init()},computed:{options:function(){return[{label:"Yes",value:!0},{label:"No",value:!1}]}},methods:{init:function(){var _this=this;(0,validation/* isEmpty */.xb)(this.selectedAttribute)||(this.attributesList=(this.selectedAttribute||[]).map((function(attr){var _ref=attr||{},fieldType=_ref.fieldType,name=_ref.name,_ref2=classificationUtil/* dataTypes */.D||{},STRING=_ref2.STRING,NUMBER=_ref2.NUMBER,DECIMAL=_ref2.DECIMAL,DATE_TIME=_ref2.DATE_TIME,displayType=null,placeholder="";return[NUMBER,DECIMAL,STRING].includes(fieldType)?(displayType=fieldType===STRING?"text":"number",placeholder="Enter ".concat(name)):fieldType===DATE_TIME&&(displayType="datetime",placeholder=_this.$t("setup.classification.attributes.select_date_time")),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attr),{},{displayType:displayType,placeholder:placeholder})})))},closeDialog:function(){this.$emit("onClose")},onSave:function(){var attributesList=this.attributesList.map((function(attr){return delete attr.displayType,delete attr.placeholder,attr}));this.$emit("onSave",attributesList)}}},specification_SpecificationAttributesvue_type_script_lang_js=SpecificationAttributesvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(specification_SpecificationAttributesvue_type_script_lang_js,SpecificationAttributesvue_type_template_id_8999e13e_render,SpecificationAttributesvue_type_template_id_8999e13e_staticRenderFns,!1,null,null,null)
/* harmony default export */,SpecificationAttributes=component.exports,api=__webpack_require__(32284),eventBus=__webpack_require__(398011),vuex_esm=__webpack_require__(420629),filters=__webpack_require__(273861),ClassificationSpecificationWidgetvue_type_script_lang_js={props:["moduleName","id","resizeWidget","layoutParams","calculateDimensions"],components:{SpecificationWizard:SpecificationWizard/* default */.Z,SpecificationAttributes:SpecificationAttributes,FieldDetails:app/* NewFieldDetails */.f3},data:function(){return{detailsLayout:null,canShowSpecificationWizard:!1,canShowSpecificationAttributes:!1,classificationData:null,attributesList:null,isLoading:!1,editDropDownList:[this.$t("setup.classification.attributes.edit_attribute")]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadMetricUnits();case 2:return _context.next=4,_this.init();case 4:_this.autoResize();case 5:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)({noOfColumns:function(){return(0,validation/* isEmpty */.xb)(this.attributesList)?1:4},config:function(){return{dateformat:this.$dateformat,timezone:this.$timezone,timeformat:this.$timeformat,showDivider:!1,org:this.$account.org}},canShowWidget:function(){var details=this.details;return details.classification||[]},
//Check for Workorder due to internal dependency
details:function(){var moduleName=this.moduleName,$attrs=this.$attrs,_ref=$attrs||{},details=_ref.details,_ref2=details||{},_ref2$workorder=_ref2.workorder,workorder=void 0===_ref2$workorder?{}:_ref2$workorder;return"workorder"===moduleName?workorder:details}},(0,vuex_esm/* mapGetters */.Se)({getMetrics:"metricUnits/getMetrics",getMetricsUnit:"metricUnits/getMetricsUnit"})),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({loadMetricUnits:"metricUnits/loadMetricUnits"})),{},{init:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref3,classification,_ref4,name,id,attributes;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_ref3=_this2.details||{},classification=_ref3.classification,(0,validation/* isEmpty */.xb)(classification)){_context2.next=8;break}return _ref4=classification||{},name=_ref4.name,id=_ref4.id,attributes=_ref4.attributes,_this2.classificationData={name:name,id:id},_this2.attributesList=attributes,_context2.next=7,_this2.serializeDetailsLayout();case 7:_this2.detailsLayout=_context2.sent;case 8:case"end":return _context2.stop()}}),_callee2)})))()},autoResize:function(reset){var _this3=this;setTimeout((function(){var _this3$$refs$fieldDet,_ref5=_this3.layoutParams||{},layoutHeight=_ref5.h;if(reset)_this3.resizeWidget({h:layoutHeight});else{var container=null===(_this3$$refs$fieldDet=_this3.$refs["fieldDetails"])||void 0===_this3$$refs$fieldDet?void 0:_this3$$refs$fieldDet.$el;if(container){var height=container.scrollHeight+20,width=container.scrollWidth,_this3$calculateDimen=_this3.calculateDimensions({height:height,width:width}),actualHeight=_this3$calculateDimen.h,h=actualHeight>layoutHeight||actualHeight<layoutHeight?actualHeight:layoutHeight;actualHeight!==layoutHeight&&_this3.resizeWidget({h:h})}}}))},serializeDetailsLayout:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var serializedFields,_ref6,name,classificationField,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this4.serializeFields();case 2:return serializedFields=_context3.sent,_ref6=_this4.classificationData||{},name=_ref6.name,classificationField=[{name:_this4.$t("setup.classification.classification"),value:name}],data=[{name:_this4.$t("setup.classification.classification"),fields:classificationField},{name:_this4.$t("setup.classification.attributes.attributes"),fields:serializedFields}],_context3.abrupt("return",data);case 7:case"end":return _context3.stop()}}),_callee3)})))()},serializeFields:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _ref7,DATE_TIME,BOOLEAN,DECIMAL,NUMBER,fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if((0,validation/* isEmpty */.xb)(_this5.attributesList)){_context4.next=6;break}return _ref7=classificationUtil/* dataTypes */.D||{},DATE_TIME=_ref7.DATE_TIME,BOOLEAN=_ref7.BOOLEAN,DECIMAL=_ref7.DECIMAL,NUMBER=_ref7.NUMBER,fields=(_this5.attributesList||[]).map((function(attr){var _ref8=attr||{},name=_ref8.name,value=_ref8.value,fieldType=_ref8.fieldType,unitId=_ref8.unitId,metric=_ref8.metric;fieldType===DATE_TIME&&(value=value?(0,filters.formatDate)(value,!0):null),value=(0,validation/* isEmpty */.xb)(value)?null:value;var result={displayName:name,value:value,name:name,dataTypeEnum:classificationUtil/* dataTypeKey */.i[fieldType]};if(fieldType===BOOLEAN)result=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},result),{},{options:{trueVal:"Yes",falseVal:"No"}});else if(fieldType===DECIMAL||fieldType===NUMBER){var unit=_this5.getUnitName(metric,unitId);result=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},result),{},{options:{unit:unit}})}return result})),_context4.abrupt("return",fields);case 6:return _context4.abrupt("return",[{name:_this5.$t("setup.classification.attributes.attributes"),value:_this5.$t("setup.classification.no_attribute_associated")}]);case 7:case"end":return _context4.stop()}}),_callee4)})))()},getUnitName:function(metric,unitId){var options=this.getMetricsUnit({metricId:metric}),unitLabel="";return options.forEach((function(unit){var label=unit.label,value=unit.value;value===unitId&&(unitLabel=label)})),unitLabel},selectedClassification:function(item){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_this6.classificationData=item,_this6.canShowSpecificationAttributes=!0;case 2:case"end":return _context5.stop()}}),_callee5)})))()},saveAttribute:function(item){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var attributesData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _this7.canShowSpecificationWizard=!1,_context6.next=3,_this7.filteredAttributes(item);case 3:attributesData=_context6.sent,_this7.saveClassification(attributesData);case 5:case"end":return _context6.stop()}}),_callee6)})))()},filteredAttributes:function(attributes){var _ref9=classificationUtil/* dataTypes */.D||{},NUMBER=_ref9.NUMBER,DECIMAL=_ref9.DECIMAL,serializedAttribute=(attributes||[]).map((function(attr){var _ref10=attr||{},fieldType=_ref10.fieldType,value=_ref10.value;return fieldType===NUMBER?value=(0,validation/* isEmpty */.xb)(value)?null:parseInt(value):fieldType===DECIMAL&&(value=(0,validation/* isEmpty */.xb)(value)?null:parseFloat(value)),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attr),{},{value:value})}));return serializedAttribute},serialize:function(){var attributesData=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,id=this.id,moduleName=this.moduleName,classificationData=this.classificationData,_ref11=classificationData||[],classificationId=_ref11.id,classification=null;return(0,validation/* isEmpty */.xb)(classificationId)||(classification={id:classificationId,attributes:attributesData}),{data:{classification:classification},id:id,moduleName:moduleName}},saveClassification:function(){var _arguments=arguments,_this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var attributesData,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return attributesData=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:null,_this8.isLoading=!0,_this8.canShowSpecificationAttributes=!1,params=_this8.serialize(attributesData),_context7.next=6,api/* API */.bl.post("v3/modules/data/patch",params);case 6:_yield$API$post=_context7.sent,error=_yield$API$post.error,error?_this8.$message.error(error.message):(_this8.$message.success(_this8.$t("setup.classification.associate_successfully")),eventBus/* eventBus */.Y.$emit("refresh-overview")),_this8.isLoading=!1,_this8.autoResize((0,validation/* isEmpty */.xb)(_this8.detailsLayout));case 11:case"end":return _context7.stop()}}),_callee7)})))()},onCancelAttributes:function(){this.canShowSpecificationWizard=!1,this.canShowSpecificationAttributes=!1},handleCommand:function(){this.canShowSpecificationAttributes=!0},showConfirmDelete:function(){var _this9=this,dialogObj={title:"".concat(this.$t("setup.classification.delete_associate")),htmlMessage:"".concat(this.$t("setup.classification.delete_associate_msg")),rbDanger:!0,rbLabel:this.$t("common.login_expiry.rbLabel")};this.$dialog.confirm(dialogObj).then(function(){var _ref12=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(value){var params,_yield$API$post2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:if(!value){_context8.next=10;break}return _this9.classificationData=null,_this9.isLoading=!0,params=_this9.serialize(),_context8.next=6,api/* API */.bl.post("v3/modules/data/patch",params);case 6:_yield$API$post2=_context8.sent,error=_yield$API$post2.error,error||(_this9.detailsLayout=null,_this9.$message.success(_this9.$t("setup.classification.delete_sucess")),eventBus/* eventBus */.Y.$emit("refresh-overview")),_this9.isLoading=!1;case 10:case"end":return _context8.stop()}}),_callee8)})));return function(_x){return _ref12.apply(this,arguments)}}())}})},specification_ClassificationSpecificationWidgetvue_type_script_lang_js=ClassificationSpecificationWidgetvue_type_script_lang_js,ClassificationSpecificationWidget_component=(0,componentNormalizer/* default */.Z)(specification_ClassificationSpecificationWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ClassificationSpecificationWidget=ClassificationSpecificationWidget_component.exports},
/***/806339:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/utils/WidgetPagination.vue?vue&type=template&id=6b10cd5b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-widget-pagination"},[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},staticRenderFns=[],WidgetPaginationvue_type_script_lang_js={props:["currentPage","perPage","total","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{total:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.updateCurrentPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.updateCurrentPage()},updateCurrentPage:function(){
// Update currentPage value
this.$emit("update:currentPage",this.page),this.$emit("onChange")}}},utils_WidgetPaginationvue_type_script_lang_js=WidgetPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(utils_WidgetPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetPagination=component.exports},
/***/968378:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpecificationWizard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/classification/SpecificationWizard.vue?vue&type=template&id=1877b55e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"clsfi",attrs:{"append-to-body":!0,visible:!0,width:"37%","before-close":_vm.closeDialog,"lock-scroll":"","custom-class":"fc-dialog-center-container scale-up-center"}},[_c("div",{staticClass:"clsfi-header",attrs:{slot:"title"},slot:"title"},[_c("div",{staticClass:"flex-middle justify-between clsfi-title-border clsfi-title "},[_c("span",{staticClass:"clsfi-title-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.classification.classification"))+" ")]),_c("pagination",{ref:"f-page",staticClass:"mR20",attrs:{currentPage:_vm.page,total:_vm.count,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_c("div",{staticClass:"fc-list-search-wrapper clsfi-search clsfi-title-border"},[_c("el-input",{ref:"quickSearchQuery",staticClass:"quick-search-input-specification",attrs:{"prefix-icon":"el-icon-search",autofocus:"",type:"text",clearable:"",placeholder:"Search Classification"},on:{change:function($event){return _vm.loadClassificationListOnSearch(_vm.breadCrumb[_vm.breadCrumb.length-1].id)},clear:_vm.loadClassificationListOnClear},model:{value:_vm.clsfiModuleSearch,callback:function($$v){_vm.clsfiModuleSearch=$$v},expression:"clsfiModuleSearch"}})],1),_c("div",[_vm.searchResult?_c("div",{staticClass:"search-result"},[_vm._v(" "+_vm._s(_vm.$t("setup.classification.results"))+" ")]):_c("div",[_c("classification-breadcrumb",{staticClass:"f12 mT10 pL5",attrs:{breadCrumb:_vm.breadCrumb},on:{onGetBreadcrumbList:_vm.getBreadcrumbList}})],1)])]),_c("div",{staticClass:"cls-list pB30"},[_vm.searchLoading?_c("div",{staticClass:"flex-middle m10 height80"},[_c("spinner",{attrs:{show:_vm.searchLoading,size:"80"}})],1):_vm.$validation.isEmpty(_vm.clsfiModuleList)?_c("div",{staticClass:"d-flex empty-state-classification height100"},[_vm._v(" "+_vm._s(_vm.$t("setup.classification.empty_state_classification"))+" ")]):_vm._l(_vm.clsfiModuleList,(function(item){return _c("div",{key:item.id,staticClass:"d-flex flex-middle pR20"},[_c("div",{staticClass:"flex-middle justify-between clsfi-list pointer pR20",class:{"clsfi-select":_vm.isSelected(item.id)},on:{click:function($event){_vm.selectedClsfiModuleId=item.id}}},[_c("div",{staticClass:"text-containter-content"},[_c("div",[_vm._v(" "+_vm._s(item.name)+" ")]),_vm.searchResult?_c("div",{staticClass:"clsfi-path op5 f12 pT5"},[_c("span",[_vm._v(_vm._s(item.classificationPath))])]):_vm._e()]),_c("div",{staticClass:"d-flex flex-middle"},[item.id===_vm.selectedClsfiModuleId?_c("i",{staticClass:"el-icon-circle-check pointer f18 fw6 clsfi-circle"}):_vm._e()])]),_c("div",{staticClass:"parent-icon"},[item.hasChild&&!_vm.searchResult?_c("i",{staticClass:"el-icon-arrow-right clsfi-arrow pointer f16 p3 fw6 page-widget-shadow",class:[_vm.isSelected(item.id)?"clsfi-arrow-border":"clsfi-border-none"],on:{click:function($event){return _vm.getClassificationListChild(item)}}}):_vm._e()])])}))],2),_c("div",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel clsfi-cancel-btn",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save clsfi-save-btn",attrs:{type:"primary",loading:_vm.isSaving},on:{click:function($event){return _vm.saveSpecification()}}},[_vm._v(_vm._s(_vm.onSaveButton)+" ")])],1)])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),WidgetPagination=(__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(806339)),ClassificationBreadcrumb=__webpack_require__(326926),validation=__webpack_require__(990260),ClassificationModel=__webpack_require__(351343),SpecificationWizardvue_type_script_lang_js={props:["isAttributeInherited","fromModuleName"],components:{Pagination:WidgetPagination/* default */.Z,classificationBreadcrumb:ClassificationBreadcrumb/* default */.Z},data:function(){return{isSaving:!1,searchLoading:!1,clsfiModuleList:[],selectedClsfiModuleId:null,clsfiModuleSearch:null,count:null,parentClassificationDataId:null,searchResult:!1,perPage:10,page:1,breadCrumb:[{name:"All classification"}]}},created:function(){this.getClassificationList()},computed:{onSaveButton:function(){return this.isAttributeInherited?this.$t("common._common.next"):this.$t("common._common.save")}},watch:{page:function(){this.getClassificationList()}},methods:{isSelected:function(currentId){return this.selectedClsfiModuleId===currentId},getBreadcrumbList:function(item){var index=null,id=item.id;index=this.breadCrumb.findIndex((function(obj){return obj.id===id}))||0,this.breadCrumb.splice(++index),this.parentClassificationDataId=id||null,this.getClassificationList()},loadClassificationListOnSearch:function(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.searchResult=!0,this.page=1,this.parentClassificationDataId=id||null,this.getClassificationList()},loadClassificationListOnClear:function(){this.searchResult=!1,this.getClassificationList()},getClassificationListChild:function(item){var _ref=item||{},name=_ref.name,id=_ref.id;this.page=1,this.breadCrumb.push({name:name,id:id}),this.parentClassificationDataId=id||null,this.getClassificationList()},getClassificationList:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var clsfiModuleSearch,parentClassificationDataId,page,perPage,fromModuleName,search,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return clsfiModuleSearch=_this.clsfiModuleSearch,parentClassificationDataId=_this.parentClassificationDataId,_this.searchLoading=!0,page=_this.page,perPage=_this.perPage,fromModuleName=_this.fromModuleName,search=clsfiModuleSearch||null,params={page:page,perPage:perPage,search:search,parentClassificationId:(0,validation/* isEmpty */.xb)(parentClassificationDataId)?null:parentClassificationDataId,withCount:!0,fetchAll:(0,validation/* isEmpty */.xb)(fromModuleName),hasChild:!0,classificationResolvePath:!(0,validation/* isEmpty */.xb)(search)},(0,validation/* isEmpty */.xb)(fromModuleName)||(params=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},params),{},{fromModuleName:fromModuleName})),_context.next=8,ClassificationModel/* ClassificationListModel */.K.fetchAll(params);case 8:_this.clsfiModuleList=_context.sent,_this.count=ClassificationModel/* ClassificationListModel */.K.totalCount,_this.searchLoading=!1;case 11:case"end":return _context.stop()}}),_callee)})))()},saveSpecification:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var clsfiModuleList,selectedClsfiModuleId,breadCrumb,selectedModule;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(clsfiModuleList=_this2.clsfiModuleList,selectedClsfiModuleId=_this2.selectedClsfiModuleId,breadCrumb=_this2.breadCrumb,selectedModule=clsfiModuleList.find((function(cls){return cls.id===selectedClsfiModuleId})),!_this2.isAttributeInherited){_context2.next=7;break}return _context2.next=5,_this2.onSaveClassification(selectedModule);case 5:_context2.next=8;break;case 7:_this2.$emit("onSave",selectedModule,breadCrumb);case 8:_this2.closeDialog();case 9:case"end":return _context2.stop()}}),_callee2)})))()},closeDialog:function(){this.$emit("onClose")},onSaveClassification:function(item){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var classificationData,attributesList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.isSaving=!0,_context3.next=3,ClassificationModel/* ClassificationListModel */.K.fetch({id:item.id});case 3:classificationData=_context3.sent,attributesList=classificationData.attributes,_this3.$emit("specificationAttributes",attributesList),_this3.$emit("onSave",item,_this3.breadCrumb),_this3.isSaving=!1;case 8:case"end":return _context3.stop()}}),_callee3)})))()}}},classification_SpecificationWizardvue_type_script_lang_js=SpecificationWizardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(classification_SpecificationWizardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpecificationWizard=component.exports},
/***/326926:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ClassificationBreadcrumb}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/classification/ClassificationBreadcrumb.vue?vue&type=template&id=8b0092aa&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"breadcrumb-container pointer mL20"},_vm._l(_vm.breadCrumbObj,(function(item,index){return _c("div",{key:index+"item"},[item.child?_c("el-dropdown",{staticClass:"dropdown-breadcrumb",attrs:{trigger:"click"},on:{command:_vm.getBreadcrumbList}},[_c("div",{staticClass:"d-flex breadcrumb-container-list"},[_c("el-tooltip",{staticClass:"d-flex vertical-middle",attrs:{effect:"dark",content:_vm.$t("setup.classification.show_path"),placement:"bottom-end"}},[_c("div",{staticClass:"mL5 breadcrumb-hover pB8"},[_vm._v("...")])]),_c("div",{staticClass:"mL5 breadcrumb-hover"},[_vm._v("/")])],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.dropdownBreadcrumb,(function(breadcrumbItem){return _c("el-dropdown-item",{key:breadcrumbItem.id+"breadcrumb",attrs:{command:breadcrumbItem}},[_vm._v(" "+_vm._s(breadcrumbItem.name)+" ")])})),1)],1):index===_vm.breadCrumbObj.length-1?_c("div",{staticClass:"mL5 breadcrumb-last-child",on:{click:function($event){return _vm.getBreadcrumbList(item)}}},[_vm._v(" "+_vm._s(item.name)+" ")]):_c("div",{staticClass:"d-flex vertical-middle"},[_c("span",{staticClass:"mL5 breadcrumb-hover",on:{click:function($event){return _vm.getBreadcrumbList(item)}}},[_vm._v(_vm._s(item.name))]),_c("div",{staticClass:"mL5 breadcrumb-hover"},[_vm._v(" / ")])])],1)})),0)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),ClassificationBreadcrumbvue_type_script_lang_js=(__webpack_require__(689730),__webpack_require__(670560),__webpack_require__(634338),{props:["breadCrumb"],computed:{breadcrumbSize:function(){var size=this.breadCrumb.length;return size<4},dropdownBreadcrumb:function(){var breadcrumb=[];return this.breadcrumbSize||(breadcrumb=this.breadCrumb.slice(1,this.breadCrumb.length-2)),breadcrumb},breadCrumbObj:function(){var _breadCrumbObj,breadCrumbObj=[];this.breadcrumbSize?breadCrumbObj=this.breadCrumb:(_breadCrumbObj=breadCrumbObj).push.apply(_breadCrumbObj,[this.breadCrumb[0],{child:this.dropdownBreadcrumb}].concat((0,toConsumableArray/* default */.Z)(this.breadCrumb.slice(-2))));return breadCrumbObj}},methods:{getBreadcrumbList:function(item){this.$emit("onGetBreadcrumbList",item)}}}),classification_ClassificationBreadcrumbvue_type_script_lang_js=ClassificationBreadcrumbvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(classification_ClassificationBreadcrumbvue_type_script_lang_js,render,staticRenderFns,!1,null,"8b0092aa",null)
/* harmony default export */,ClassificationBreadcrumb=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/35972.js.map