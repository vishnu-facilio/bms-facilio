(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[30915],{
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/730915:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return MVSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/mv/MVSummary.vue?vue&type=template&id=66df7d92
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"mT60 loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("div",{staticClass:"mv-summary-container"},[_c("div",{staticClass:"mv-summary-header d-flex"},[_c("div",{staticClass:"mv-back-container cursor-pointer"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"flex-middle",on:{click:_vm.redirectToMvList}},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"svgs/arrow",iconClass:"icon icon-xs mR5 arrow rotate-left"}}),_c("span",{staticClass:"mv-back-btn f13"},[_vm._v("Back")]),_c("div",{staticClass:"fc-separator-lg mL20 mR20"}),_c("div",{staticClass:"heading-black22"},[_vm._v(_vm._s(_vm.projectName))])],1)])]),_c("div",{staticClass:"mL-auto flex-middle"},[_c("el-button",{staticClass:"fc-wo-border-btn pL15 pR15",attrs:{type:"button"},on:{click:_vm.editMVProject}},[_c("i",{staticClass:"el-icon-edit"})]),_c("el-dropdown",{staticClass:"mL10 fc-btn-ico-lg pointer",staticStyle:{"padding-top":"4px","padding-bottom":"4px"},attrs:{trigger:"click"}},[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{attrs:{src:__webpack_require__(935010),width:"16",height:"16"}})]),_c("el-dropdown-menu",{staticClass:"p10",attrs:{slot:"dropdown"},slot:"dropdown"},[_c("div",{staticClass:"pT10 pB10 fc-label-hover label-txt-black f14 pL10 pR10 pointer",on:{click:_vm.print}},[_vm._v(" Print ")])])],1)],1)]),_c("page",{attrs:{module:_vm.moduleName,id:_vm.mvId,details:_vm.mvProjectObj}})],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),PageBuilder=(__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(821057),__webpack_require__(947522),__webpack_require__(760218)),Spinner=__webpack_require__(604947),router=__webpack_require__(329435),http=__webpack_require__(218430),validation=__webpack_require__(990260),frequencyHash={1:"Till yesterday",3:"Till last month"},MVSummaryvue_type_script_lang_js={components:{Page:PageBuilder/* default */.Z,Spinner:Spinner/* default */.Z},data:function(){return{moduleName:"mvproject",mvId:this.$route.params.id,isLoading:!1,mvProjectObj:{}}},computed:{projectName:function(){var mvProjectObj=this.mvProjectObj,_mvProjectObj$mvProje=mvProjectObj.mvProject,mvProject=void 0===_mvProjectObj$mvProje?{}:_mvProjectObj$mvProje;return(0,validation/* isEmpty */.xb)(mvProject)?"":mvProject.name},pdfUrl:function(){var _getApp,appName=null===(_getApp=(0,router/* getApp */.wx)())||void 0===_getApp?void 0:_getApp.linkName;return appName="newapp"===appName?"app":appName,window.location.protocol+"//"+window.location.host+"/".concat(appName,"/pdf/mv/").concat(this.mvId)},parentPath:function(){var _getApp2,appLinkName=null===(_getApp2=(0,router/* getApp */.wx)())||void 0===_getApp2?void 0:_getApp2.linkName,_findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* tabTypes */.VF.CUSTOM,{config:{type:"mandv"}}),path=_findRouteForTab.path;return"/".concat(appLinkName,"/").concat(path)}},created:function(){var _this=this,promises=[],mvId=this.mvId,fetchMVDetailsUrl="/v2/mv/getMVProject?mvProjectId=".concat(mvId),fetchMVCardDetailsUrl="/v2/workflow/getDefaultWorkflowResult",fetchMVSubmoduleDetailsUrl="/v2/readings/getSubModuleRel?moduleName=mvproject",params={defaultWorkflowId:3,paramList:[mvId]};this.isLoading=!0,promises.push(http/* default */.ZP.get(fetchMVDetailsUrl)),promises.push(http/* default */.ZP.post(fetchMVCardDetailsUrl,params)),promises.push(http/* default */.ZP.get(fetchMVSubmoduleDetailsUrl)),Promise.all(promises).then((function(_ref){var _ref2=(0,slicedToArray/* default */.Z)(_ref,3),mvData=_ref2[0],mvCardData=_ref2[1],mvSubmodules=_ref2[2],_mvData$data=mvData.data,mvDataMessage=_mvData$data.message,mvDataResponseCode=_mvData$data.responseCode,mvDataResult=_mvData$data.result,_mvCardData$data=mvCardData.data,mvCardDataMessage=_mvCardData$data.message,mvCardDataResponseCode=_mvCardData$data.responseCode,mvCardDataResult=_mvCardData$data.result,_mvSubmodules$data=mvSubmodules.data,mvSubmodulesMessage=_mvSubmodules$data.message,mvSubmodulesResponseCode=_mvSubmodules$data.responseCode,mvSubmodulesResult=_mvSubmodules$data.result;if(0!==mvDataResponseCode)throw new Error(mvDataMessage);var _mvDataResult$mvProje=mvDataResult.mvProjectWrapper,mvProjectWrapper=void 0===_mvDataResult$mvProje?{}:_mvDataResult$mvProje,frequency=mvProjectWrapper.mvProject.frequency;if(_this.mvProjectObj=mvProjectWrapper,_this.mvProjectObj.frequencyLabel=frequencyHash[frequency],0!==mvCardDataResponseCode)throw new Error(mvCardDataMessage);var _mvCardDataResult$wor=mvCardDataResult.workflow,workflow=void 0===_mvCardDataResult$wor?{}:_mvCardDataResult$wor,_workflow$returnValue=workflow.returnValue,returnValue=void 0===_workflow$returnValue?{}:_workflow$returnValue;if(_this.mvProjectObj.returnValue=returnValue,0!==mvSubmodulesResponseCode)throw new Error(mvSubmodulesMessage);_this.mvProjectObj.submodules={},mvSubmodulesResult.submodules.forEach((function(submodule){_this.mvProjectObj.submodules[submodule.name]=submodule}))})).catch((function(_ref3){var message=_ref3.message;_this.$message.error(message)})).finally((function(){return _this.isLoading=!1}))},methods:{redirectToMvList:function(){if((0,router/* isWebTabsEnabled */.tj)()){var parentPath=this.parentPath,path="".concat(parentPath,"/open");this.$router.push({path:path})}else this.$router.push({path:"/app/em/mv/open"})},editMVProject:function(){if((0,router/* isWebTabsEnabled */.tj)()){var mvId=this.mvId,parentPath=this.parentPath,path="".concat(parentPath,"/edit/").concat(mvId);this.$router.push({path:path})}else this.$router.push({name:"mv-project-edit",params:{id:this.mvId}})},print:function(){window.open(this.pdfUrl)},download:function(){this.$http.get("/v2/integ/pdf/create?url=".concat(this.pdfUrl,"&download=false"))}}},mv_MVSummaryvue_type_script_lang_js=MVSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(mv_MVSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,MVSummary=component.exports},
/***/935010:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/30915.js.map