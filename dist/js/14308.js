(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[14308],{
/***/588:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return chartIcon}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/charts/components/chartIcon.vue?vue&type=template&id=23f433a8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["pie"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(928824)}}):"doughnut"===_vm.icon||"donut"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(629443)}}):"bar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(341029)}}):"stackedbar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(709333)}}):"histogram"===_vm.icon?_c("fc-icon",{staticClass:"chart-icon-new filter-theme-color",staticStyle:{border:"1.5px solid #ef508f","border-radius":"2px",display:"flex","justify-content":"center","align-items":"center"},attrs:{group:"chart-data",name:"histogram",color:"#ef508f",size:"17"}}):"groupedbar"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(717328)}}):"line"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(570678)}}):"area"===_vm.icon||"area-spline"===_vm.icon||"area-step"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(887025)}}):"progress"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(71761)}}):"heatMap"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(413273)}}):"cubsim"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(129816)}}):"tabular"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(407826)}}):"gauge"===_vm.icon?_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(91677)}}):_c("img",{staticClass:"chart-icon-new filter-theme-color",attrs:{src:__webpack_require__(570678)}})],1)},staticRenderFns=[],chartIconvue_type_script_lang_js={props:["icon"]},components_chartIconvue_type_script_lang_js=chartIconvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_chartIconvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,chartIcon=component.exports},
/***/410806:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FCriteriaBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/criteria/FCriteriaBuilder.vue?vue&type=template&id=8977952a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_vm._e():_c("div",{staticClass:"f-criteria-builder"},[_c("f-criteria-group",{attrs:{rule:_vm.criteriaGroup,moduleMeta:_vm.moduleMeta,size:_vm.fieldSize,isroot:"true",threshold:_vm.threshold,thresholdFieldName:_vm.thresholdFieldName},on:{removeChild:_vm.removeChild,thresholdmetric:_vm.thresholdmetric}})],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FCriteriaGroupvue_type_template_id_96f43c26_render=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(322462),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(169358),__webpack_require__(506203),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-criteria-group",class:{rootgroup:_vm.isroot&&!_vm.threshold,subgroup:!_vm.isroot&&!_vm.threshold,threshold:_vm.threshold}},[_c("el-card",{staticClass:"box-card"},[_c("div",{attrs:{slot:"header"},slot:"header"},[_vm.isroot&&!_vm.threshold?_c("span",[_c("span",{staticClass:"MATCH-TYPE"},[_vm._v("   MATCH TYPE   ")]),_vm.isroot?_c("span",{staticClass:"MATCH-TYPE"}):_vm._e(),_c("el-dropdown",{attrs:{trigger:"click"},on:{command:_vm.switchOperator},model:{value:_vm.rule.operator,callback:function($$v){_vm.$set(_vm.rule,"operator",$$v)},expression:"rule.operator"}},[_c("span",{staticClass:"el-dropdown-link"},[_c("span",{staticClass:"pointer"},[_c("span",{staticClass:"allwhite"},[_vm._v(" "+_vm._s(_vm.getOperatorLabel(_vm.rule.operator))),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})])])]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"all"}},[_vm._v("ALL")]),_c("el-dropdown-item",{attrs:{command:"any"}},[_vm._v("ANY")])],1)],1)],1):_vm._e(),_vm.isroot?_vm._e():_c("span",[_c("span",{staticClass:"WATCH-TYPE"},[_vm._v("  MATCH TYPE  ")]),_vm.isroot?_vm._e():_c("span",{staticClass:"WATCH-TYPE"}),_c("el-dropdown",{attrs:{trigger:"click"},on:{command:_vm.switchOperator},model:{value:_vm.rule.operator,callback:function($$v){_vm.$set(_vm.rule,"operator",$$v)},expression:"rule.operator"}},[_c("span",{staticClass:"el-dropdown-link"},[_c("span",{staticClass:"pointer"},[_c("span",{staticClass:"all"},[_vm._v(" "+_vm._s(_vm.rule.operator)),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})])])]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"ALL"}},[_vm._v("ALL")]),_c("el-dropdown-item",{attrs:{command:"ANY"}},[_vm._v("ANY")])],1)],1)],1),_vm.isroot?_vm._e():_c("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"17px"},attrs:{type:"text",icon:"el-icon-minus"},on:{click:_vm.remove}})],1),_vm._l(_vm.rule.children,(function(child,idx){return _c(child.type,{key:idx,tag:"component",attrs:{index:idx,rule:child,size:_vm.size,moduleMeta:_vm.moduleMeta,threshold:_vm.threshold,thresholdFieldName:_vm.thresholdFieldName},on:{removeChild:_vm.removeChild,add:_vm.addRule,thresholdmetric:_vm.thresholdmetric}})})),_vm.isroot?_vm._e():_c("el-button",{staticClass:"adcomp",staticStyle:{"font-size":"17px",width:"16px",color:"#8778bb"},attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:_vm.addRule}}),_vm.isroot&&!_vm.threshold?_c("div",{staticStyle:{"margin-top":"21px","margin-bottom":"8px","margin-left":"0px"}},[_c("el-button",{staticStyle:{"border-color":"#39b2c2","font-size":"11px",color:"#39b2c2","font-weight":"bold"},attrs:{round:"",size:_vm.size,plain:"",icon:"el-icon-plus"},on:{click:_vm.addGroup}},[_vm._v("ADD GROUP")]),_vm.threshold?_vm._e():_c("el-button",{staticStyle:{"border-color":"#39b2c2","font-size":"11px",color:"#39b2c2","font-weight":"bold"},attrs:{round:"",size:_vm.size,icon:"el-icon-plus"},on:{click:_vm.addRule}},[_vm._v("ADD CONDITION")])],1):_vm._e()],2)],1)}),FCriteriaGroupvue_type_template_id_96f43c26_staticRenderFns=[],FCriteriaRulevue_type_template_id_1ccc6516_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-criteria-rule"},[_vm.rule.active?_c("div",[_c("el-card",{staticClass:"box-card active"},[_c("el-row",{staticStyle:{"margin-top":"-6px"},attrs:{gutter:10,span:8,align:"middle"}},[_c("el-col",{attrs:{md:6,lg:6}},[_vm.threshold?_c("el-select",{attrs:{disabled:"",size:_vm.size},model:{value:_vm.rule.fieldName,callback:function($$v){_vm.$set(_vm.rule,"fieldName",$$v)},expression:"rule.fieldName"}},_vm._l(_vm.moduleMeta.fields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.name}})})),1):_c("el-select",{attrs:{size:_vm.size},model:{value:_vm.rule.fieldName,callback:function($$v){_vm.$set(_vm.rule,"fieldName",$$v)},expression:"rule.fieldName"}},_vm._l(_vm.moduleMeta.fields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.name}})})),1)],1),_c("el-col",{attrs:{md:6,lg:6}},[_c("el-select",{staticClass:"rule-part",attrs:{size:_vm.size,disabled:!_vm.getOperators,filterable:"",placeholder:"Select operator"},model:{value:_vm.rule.operator,callback:function($$v){_vm.$set(_vm.rule,"operator",$$v)},expression:"rule.operator"}},_vm._l(_vm.getOperators,(function(operator,key){return _c("el-option",{key:operator,attrs:{label:key,value:key}})})),1)],1),_c("el-col",{staticStyle:{"background-color":"#fff"},attrs:{md:_vm.threshold?12:11,lg:_vm.threshold?12:11}},[_vm.isValueNeeded?_vm.getValueDataType?_c("div",[_vm.threshold||"NUMBER"!==_vm.getValueDataType.dataType&&"DECIMAL"!==_vm.getValueDataType.dataType?"NUMBER"===_vm.getValueDataType.dataType||"DECIMAL"===_vm.getValueDataType.dataType?_c("el-input",{staticClass:"rule-part",attrs:{size:_vm.size,type:"number"},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}}):"BOOLEAN"===_vm.getValueDataType.dataType?_c("el-select",{staticClass:"rule-part",attrs:{size:_vm.size},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}},[_c("el-option",{attrs:{label:"Yes",value:"true"}}),_c("el-option",{attrs:{label:"No",value:"false"}})],1):"DATE"===_vm.getValueDataType.dataType?_c("f-date-picker",{staticClass:"rule-part",attrs:{size:_vm.size,type:_vm.rule.operator.indexOf("between")>=0?"daterange":"date"},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}}):"DATE_TIME"===_vm.getValueDataType.dataType?_c("f-date-picker",{staticClass:"rule-part",attrs:{size:_vm.size,type:_vm.rule.operator.indexOf("between")>=0?"datetimerange":"datetime"},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}}):"LOOKUP"===_vm.getValueDataType.dataType&&"LOOKUP_SIMPLE"===_vm.getValueDataType.displayType||"LOOKUP"===_vm.getValueDataType.dataType&&"LOOKUP_POPUP"===_vm.getValueDataType.displayType?_c("el-select",{staticClass:"rule-part",attrs:{size:_vm.size,filterable:"",multiple:""},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}},_vm._l(_vm.picklistOptions,(function(value,key){return _c("el-option",{key:key,attrs:{label:value,value:key}})})),1):"LOOKUP"===_vm.getValueDataType.dataType&&"LOOKUP_POPUP1"===_vm.getValueDataType.displayType?_c("el-input",{staticClass:"rule-part",attrs:{size:_vm.size,placeholder:"Select records",readonly:!0,"suffix-icon":"el-icon-search"},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}}):_c("el-input",{staticClass:"rule-part",attrs:{size:_vm.size},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}}):_c("el-input-number",{staticClass:"rule-part",attrs:{size:_vm.size},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}})],1):_vm._e():_c("div",[_c("el-input",{staticClass:"rule-part",attrs:{size:_vm.size,disabled:""},model:{value:_vm.rule.value,callback:function($$v){_vm.$set(_vm.rule,"value",$$v)},expression:"rule.value"}})],1)]),0!==_vm.index?_c("el-button",{staticStyle:{float:"right","font-size":"13px",color:"black","margin-top":"-3px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:_vm.remove}}):_vm._e()],1)],1)],1):_c("div",{on:{click:_vm.toggle}},[_c("el-card",{staticClass:"box-card normal"},[_c("el-row",{attrs:{gutter:10,span:8,align:"middle"}},[_c("el-col",{attrs:{md:6,lg:6}},[_c("span",{staticClass:"pointer"},[_c("span",{staticClass:"Alarm-Class"},[_vm._v(_vm._s(_vm.rule.fieldName))])])]),_c("el-col",{attrs:{md:6,lg:6}},[_c("span",{staticClass:"pointer"},[_c("span",{staticClass:"Alarm-Class"},[_vm._v(_vm._s(_vm.rule.operator))])])]),_c("el-col",{attrs:{md:11,lg:11}},[_c("span",{staticClass:"pointer"},[_c("span",{staticClass:"Alarm-Class"},[_vm._v(_vm._s(_vm.rule.value))])])]),0!==_vm.index?_c("el-button",{staticClass:"pull-right",staticStyle:{"font-size":"13px",color:"black","margin-top":"-10px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:_vm.remove}}):_vm._e()],1)],1)],1)])},FCriteriaRulevue_type_template_id_1ccc6516_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FDatePicker=(__webpack_require__(538077),__webpack_require__(358551)),picklist=__webpack_require__(961358),FCriteriaRulevue_type_script_lang_js={name:"f-criteria-rule",props:["index","rule","moduleMeta","size","threshold","thresholdFieldName"],components:{FDatePicker:FDatePicker/* default */.Z},data:function(){return{picklistOptions:{},valueNotNeed:["is empty","is not empty","Today","Tomorrow","Yesterday","Starting Tomorrow","Till Yesterday","Last Month","Current Month","Next Month","Last Week","Current Week","Next Week"]}},watch:{"rule.fieldName":function(val){this.threshold&&this.$emit("thresholdmetric",val)}},created:function(){this.$store.dispatch("loadGroups")},mounted:function(){this.setThresholdMetric()},computed:{getOperators:function(){var _this=this;if(this.rule.fieldName&&""!==this.rule.fieldName){var field=this.moduleMeta.fields.filter((function(field){return field.name===_this.rule.fieldName}));if(field.length){if("LOOKUP"===field[0].dataTypeEnum._name&&field[0].specialType?this.loadSpecialTypePickList(field[0].specialType):"LOOKUP"===field[0].dataTypeEnum._name&&field[0].lookupModule&&this.loadPickList(field[0].lookupModule.name),field[0].specialType&&"basespace"===field[0].specialType){var oprs=this.moduleMeta.operators[field[0].dataTypeEnum._name];return oprs["is"]="BUILDING_IS",oprs}return this.moduleMeta.operators[field[0].dataTypeEnum._name]}}return null},getValueDataType:function(){var _this2=this;if(this.rule.operator&&""!==this.rule.operator){var field=this.moduleMeta.fields.filter((function(field){return field.name===_this2.rule.fieldName}));return"DATE"!==field[0].dataTypeEnum._name&&"DATE_TIME"!==field[0].dataTypeEnum._name||"Age in Days"!==this.rule.operator&&"Due in Days"!==this.rule.operator?{dataType:field[0].dataTypeEnum._name,displayType:field[0].displayType._name}:{dataType:"NUMBER",displayType:"NUMBER"}}return null},isValueNeeded:function(){if(this.rule.operator&&""!==this.rule.operator){var bool=-1===this.valueNotNeed.indexOf(this.rule.operator);return bool||(this.rule.value=""),bool}return this.rule.value="",!1}},methods:{setThresholdMetric:function(){this.rule.fieldName=this.thresholdFieldName},loadSpecialTypePickList:function(specialType){var self=this;if(self.picklistOptions={},"users"===specialType){var userList=self.$store.state.users;self.picklistOptions["${LOGGED_USER}"]="Current User";var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(userList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var user=_step.value;self.picklistOptions[user.id]=user.name}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else if("groups"===specialType){var _step2,groupList=self.$store.state.groups,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(groupList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var group=_step2.value;self.picklistOptions[group.groupId]=group.name}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else if("basespace"===specialType){var _step3,spaceList=self.$store.state.spaces,_iterator3=(0,createForOfIteratorHelper/* default */.Z)(spaceList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var space=_step3.value;self.picklistOptions[space.id]=space.name}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}},toggle:function(){this.rule.active=!this.rule.active},loadPickList:function(moduleName){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this3.picklistOptions={},_context.next=3,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName,skipDeserialize:!0}});case 3:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this3.$message.error(error.message||"Error Occured"):_this3.picklistOptions=options;case 7:case"end":return _context.stop()}}),_callee)})))()},remove:function(){this.$emit("removeChild",this.index)},add:function(){this.isroot||this.$emit("add",this.index)}}},criteria_FCriteriaRulevue_type_script_lang_js=FCriteriaRulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(criteria_FCriteriaRulevue_type_script_lang_js,FCriteriaRulevue_type_template_id_1ccc6516_render,FCriteriaRulevue_type_template_id_1ccc6516_staticRenderFns,!1,null,null,null)
/* harmony default export */,FCriteriaRule=component.exports,FCriteriaGroupvue_type_script_lang_js={data:function(){return{click:!1,rules:{label:"",value:""}}},name:"f-criteria-group",components:{FCriteriaRule:FCriteriaRule},mounted:function(){this.addRuleForRoot()},props:["index","rule","moduleMeta","size","isroot","threshold","thresholdFieldName"],methods:{thresholdmetric:function(val){this.$emit("thresholdmetric",val)},addRuleForRoot:function(){this.isroot&&this.rule.children.push({type:"f-criteria-rule",fieldName:"",operator:"",value:"",active:!0})},addRule:function(){
// if (!this.rule.children[i].fieldName === null) {
for(var i=0;i<this.rule.children.length;i++){var r=this.rule.children[i];""!==r.fieldName&&(r.active=!1)}this.rule.children.push({type:"f-criteria-rule",fieldName:"",operator:"",value:"",active:!0})},switchOperator:function(operator){this.rule.operator=operator},test:function(){},addGroup:function(){var self=this;self.rule.children.push({type:"f-criteria-group",operator:"ALL",children:[{type:"f-criteria-rule",fieldName:"",operator:"",value:"",active:!0}]})},removeChild:function(index){this.rule.children.splice(index,1)},remove:function(){this.$emit("removeChild",this.index)},getOperatorLabel:function(operator){return"all"===operator?"ALL":"ANY"}}},criteria_FCriteriaGroupvue_type_script_lang_js=FCriteriaGroupvue_type_script_lang_js,FCriteriaGroup_component=(0,componentNormalizer/* default */.Z)(criteria_FCriteriaGroupvue_type_script_lang_js,FCriteriaGroupvue_type_template_id_96f43c26_render,FCriteriaGroupvue_type_template_id_96f43c26_staticRenderFns,!1,null,null,null)
/* harmony default export */,FCriteriaGroup=FCriteriaGroup_component.exports,FCriteriaBuildervue_type_script_lang_js={props:["module","value","size","threshold","readingobj","resourceType","thresholdFieldName"],components:{FCriteriaGroup:FCriteriaGroup},data:function(){return{loading:!0,moduleMeta:null,criteriaGroup:null}},created:function(){this.$store.dispatch("loadSpaceCategory")},mounted:function(){var self=this;this.criteriaGroup=this.parseCriteriaObject(),this.loadModuleMeta(),this.$watch("criteriaGroup",(function(newVal){var criteriaObject=self.constructCriteriaObject(newVal);this.$emit("input",criteriaObject)}),{deep:!0})},
// watch: {
//   readingobj (val) {
//     if (this.threshold && this.module === 'asset') {
//       this.loadModuleMeta()
//     }
//   }
// },
computed:{fieldSize:function(){return this.size?this.size:"small"}},methods:{thresholdmetric:function(val){!this.threshold||"asset"!==this.module&&"space"!==this.module||this.$emit("thresholdfield",this.moduleMeta.fields.find((function(field){return field.name===val})))},loadModuleMeta:function(){var self=this;if(self.loading=!0,!self.threshold||"asset"!==self.module&&"space"!==self.module)self.$http.get("/module/meta?moduleName="+this.module).then((function(response){self.moduleMeta=response.data.meta,self.loading=!1}));else{var url=null;"asset"===self.module?url="/module/meta?moduleName="+self.module+"&assetId="+self.readingobj.id+"&categoryId="+self.readingobj.category.id+"&resourceType="+self.module:"space"===self.module&&(url="/module/meta?moduleName="+self.module+"&assetId="+self.readingobj.id+"&categoryId="+self.readingobj.spaceCategory.id+"&resourceType="+self.module),
// self.$http.get('/reading/getassetlatestdata?parentId=' + self.readingobj.id + '&parentCategoryId=' + self.readingobj.category.id)
self.$http.get(url).then((function(response){self.moduleMeta=response.data.meta,self.loading=!1}))}},parseCriteriaObject:function(){var criteriaObj={type:"f-criteria-group",operator:"all",children:[]};if(this.value){var SPLIT_REGX=/([1-9]\d*)|(\()|(\))|(and)|(or)/gi,matchList=this.value.pattern.match(SPLIT_REGX);matchList&&matchList.length&&(1===matchList.length&&(matchList.splice(0,0,"("),matchList.splice(2,0,")")),criteriaObj=this.parseCriteriaGroup(matchList,1))}return criteriaObj},parseCriteriaGroup:function(list,index){for(var group={type:"f-criteria-group",operator:"all",children:[]},i=index;i<list.length;i++){var match=list[i];if("("===match)return group.children.push(this.parseCriteriaGroup(list,i+1)),group;if(")"===match)return group;if("or"===match||"and"===match)group.operator="or"===match?"any":"all";else if(this.value.conditions[match]){var condition=this.value.conditions[match];if(condition.type="f-criteria-rule",condition.field&&condition.value&&""!==condition.value)if(-1!==condition.field.dataTypeEnum._name.indexOf("DATE")){var arr=condition.value.split(",");if(1===arr.length)condition.value=new Date(parseInt(arr[0]));else{var _step,dateList=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(arr);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dateStr=_step.value;dateList.push(new Date(parseInt(dateStr)))}}catch(err){_iterator.e(err)}finally{_iterator.f()}condition.value=dateList}}else"LOOKUP"===condition.field.dataTypeEnum._name&&(condition.value=condition.value.split(","));group.children.push(condition)}}return group},constructCriteriaObject:function(obj){var pattern="",conditions={},seq=1;return obj&&(pattern=this.constructCriteriaGroup(seq,conditions,obj.operator,obj.children)),""!==pattern&&"()"!==pattern&&Object.keys(conditions).length>0?{pattern:pattern,conditions:conditions}:null},constructCriteriaGroup:function(seq,conditions,operator,children){var _this=this;if(!children.length)return"";for(var ptn="(",_loop=function(){var child=children[i];if(!("f-criteria-rule"!==child.type||child.fieldName&&""!==child.fieldName&&child.operator&&""!==child.operator))
// if condition is empty, skip it in the criteria
return 0;// continue
if("f-criteria-group"===child.type&&!child.children.length)
// if condition group is empty, skip it in the criteria
return 0;// continue
if(0!==i&&(ptn+=" "+("all"===operator?"and":"or")+" "),"f-criteria-group"===child.type&&child.children.length)ptn+=_this.constructCriteriaGroup(seq,conditions,child.operator,child.children);else{var condition=_this.$helpers.cloneObject(child),field=_this.moduleMeta.fields.find((function(field){return field.name===condition.fieldName}));if(Array.isArray(condition.value))if(2===condition.value.length&&condition.value[0]instanceof Date){
// date range
var val=condition.value[0].getTime()+","+condition.value[1].getTime();condition.value=val}else condition.value=condition.value.join();else condition.value instanceof Date&&(condition.value=condition.value.getTime());condition.operator&&(condition.operatorId=_this.moduleMeta.operators[field.dataTypeEnum._name][condition.operator].operatorId,delete condition.operator),condition.columnName=field.extendedModule.tableName+"."+field.columnName,ptn+=seq,conditions[seq]=condition,seq++}},i=0;i<children.length;i++)_loop();return ptn+=")",ptn},removeChild:function(index){this.criteriaObj.children.splice(index,1)}}},criteria_FCriteriaBuildervue_type_script_lang_js=FCriteriaBuildervue_type_script_lang_js,FCriteriaBuilder_component=(0,componentNormalizer/* default */.Z)(criteria_FCriteriaBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FCriteriaBuilder=FCriteriaBuilder_component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/802873:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NewTabularReport}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/forms/NewTabularReport.vue?vue&type=template&id=b7afbb36
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("spinner"):_c("div",{staticClass:"height100"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"new-report-header"},[_c("div",{staticClass:"pull-left",staticStyle:{width:"auto"}},[_c("el-input",{staticClass:"report-input-title",attrs:{placeholder:"New Report"},model:{value:_vm.reportForm.name,callback:function($$v){_vm.$set(_vm.reportForm,"name",$$v)},expression:"reportForm.name"}}),_c("el-input",{staticClass:"report-input-desc",attrs:{placeholder:"Description"},model:{value:_vm.reportForm.description,callback:function($$v){_vm.$set(_vm.reportForm,"description",$$v)},expression:"reportForm.description"}}),_c("el-select",{staticClass:"report-input-folder",attrs:{placeholder:"Folder"},model:{value:_vm.reportForm.parentFolderId,callback:function($$v){_vm.$set(_vm.reportForm,"parentFolderId",$$v)},expression:"reportForm.parentFolderId"}},_vm._l(_vm.reportFolders,(function(folder,index){return _c("el-option",{key:index,attrs:{label:folder.label,value:folder.id}})})),1)],1),_c("div",{staticClass:"pull-right"},[_c("el-button",{staticStyle:{color:"#39b2c2","border-color":"#39b2c2","letter-spacing":"0.7px"},attrs:{size:"medium"},on:{click:_vm.cancel}},[_vm._v("CANCEL")]),_c("el-button",{attrs:{size:"medium",type:"primary"},on:{click:_vm.save}},[_vm._v("SAVE")])],1)])])]),_c("div",{staticClass:"row height100 scrollable"},[_c("div",{staticClass:"col-4"},[_c("div",{staticClass:"report-builder"},[_c("el-form",{ref:"newReportForm",staticClass:"fc-form",attrs:{"label-position":"top",model:_vm.reportForm},on:{submit:function($event){return $event.preventDefault(),_vm.save.apply(null,arguments)}}},[_c("el-tabs",{attrs:{"tab-position":"top"}},[_c("el-tab-pane",{attrs:{label:"BUILD"}},[_c("el-row",{attrs:{gutter:30,align:"middle"}},[_c("el-col",{attrs:{md:9,lg:9}},[_vm.dateFields?_c("el-form-item",{attrs:{label:"Date Filter"}},[_c("el-select",{attrs:{placeholder:"Select field"},model:{value:_vm.dateFilter.fieldId,callback:function($$v){_vm.$set(_vm.dateFilter,"fieldId",$$v)},expression:"dateFilter.fieldId"}},_vm._l(_vm.dateFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.id}})})),1)],1):_vm._e()],1),_c("el-col",{attrs:{md:9,lg:9}},[_c("el-form-item",{attrs:{label:"Operator"}},[_c("el-select",{attrs:{placeholder:"Select field"},model:{value:_vm.dateFilter.operatorId,callback:function($$v){_vm.$set(_vm.dateFilter,"operatorId",$$v)},expression:"dateFilter.operatorId"}},_vm._l(_vm.dateOperators,(function(operator,index){return _c("el-option",{key:index,attrs:{label:operator.label,value:operator.value}})})),1)],1)],1),_c("el-col",{attrs:{md:6,lg:6}},[_c("el-form-item",{directives:[{name:"show",rawName:"v-show",value:20===_vm.dateFilter.operatorId,expression:"dateFilter.operatorId === 20"}],attrs:{label:"Custom"}},[_c("el-date-picker",{attrs:{type:"datetimerange"},model:{value:_vm.dateFilter.dateRange,callback:function($$v){_vm.$set(_vm.dateFilter,"dateRange",$$v)},expression:"dateFilter.dateRange"}})],1)],1)],1),_c("el-row",{attrs:{gutter:30,align:"middle"}},[_c("el-col",{attrs:{md:18,lg:18}},[_c("el-form-item",{attrs:{label:"Row Headings"}},[_c("el-select",{attrs:{placeholder:"Select field"},model:{value:_vm.reportForm.xAxisField.moduleFieldId,callback:function($$v){_vm.$set(_vm.reportForm.xAxisField,"moduleFieldId",$$v)},expression:"reportForm.xAxisField.moduleFieldId"}},_vm._l(_vm.moduleMeta.fields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.id}})})),1)],1)],1),_c("el-col",{attrs:{md:6,lg:6}},[_c("el-form-item",{attrs:{label:"Function"}},[_c("el-select",{attrs:{placeholder:"Select"},model:{value:_vm.reportForm.xAxisaggregateFunction,callback:function($$v){_vm.$set(_vm.reportForm,"xAxisaggregateFunction",$$v)},expression:"reportForm.xAxisaggregateFunction"}},_vm._l(_vm.getAggregateFunctions(_vm.getXAxisDataType),(function(func,funcidx){return _c("el-option",{key:funcidx,attrs:{label:func._name,value:func.value}})})),1)],1)],1)],1),_c("el-row",{attrs:{gutter:30,align:"middle"}},[_c("el-col",{staticStyle:{"margin-top":"30px","font-weight":"450",color:"#6b7e91"},attrs:{md:24,lg:24}},[_vm._v(" Columns ")]),_c("el-col",{attrs:{md:24,lg:24}},[_c("table",{staticClass:"tabular-columns-list",attrs:{width:"100%"}},_vm._l(_vm.columns,(function(column,index){return _c("tr",{key:index},[_c("td",[_c("el-input",{attrs:{placeholder:"Column Name"},model:{value:column.data.name,callback:function($$v){_vm.$set(column.data,"name",$$v)},expression:"column.data.name"}})],1),_c("td",[_c("el-select",{attrs:{placeholder:"Aggregate"},model:{value:column.data.aggregateFunc,callback:function($$v){_vm.$set(column.data,"aggregateFunc",$$v)},expression:"column.data.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return _c("el-option",{key:funcidx,attrs:{label:func.label,value:func.value}})})),1)],1),_c("td",[_c("span",{staticClass:"pointer"},[_c("i",{staticClass:"el-icon-close"})])])])})),0)]),_c("el-col",{staticClass:"mT30",attrs:{md:24,lg:24}},[_c("a",[_vm._v("Add Column")]),_vm._v(" / "),_c("a",{on:{click:_vm.addReadingColumn}},[_vm._v("Add Reading Column")])])],1)],1),_c("el-tab-pane",{attrs:{label:"FILTERS"}},[_c("f-criteria-builder",{attrs:{module:_vm.moduleMeta.module},model:{value:_vm.reportForm.criteria,callback:function($$v){_vm.$set(_vm.reportForm,"criteria",$$v)},expression:"reportForm.criteria"}})],1)],1)],1)],1)]),_c("div",{staticClass:"col-8"},[_c("div",{staticClass:"report-preview text-center"},[_vm.showGeneratePreview?_c("el-button",{attrs:{type:"info"},on:{click:_vm.generatePreview}},[_vm._v("Generate Report Preview")]):_vm._e(),_vm.previewReportContext?_c("f-report",{attrs:{config:{id:-1,report:_vm.previewReportContext}}}):_vm._e()],1)])]),_c("el-dialog",{staticClass:"compare-dialog",attrs:{width:"300px",title:"Add Reading Column",visible:_vm.addReadingColumnDialogVisibility},on:{"update:visible":function($event){_vm.addReadingColumnDialogVisibility=$event}}},[_c("f-compare-report",{ref:"addReadingColumnReportForm",on:{save:_vm.readingColumnAdded,cancel:_vm.readingColumnClosed}})],1)],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FReport=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(228436),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(712744)),FCriteriaBuilder=__webpack_require__(410806),ReportHelper=__webpack_require__(507815),FCompareReportvue_type_template_id_17563b7e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-left"},[_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"header"},[_vm._v("Type")]),_c("el-select",{staticClass:"report-dropDown",attrs:{filterable:""},model:{value:_vm.compareObject.type,callback:function($$v){_vm.$set(_vm.compareObject,"type",$$v)},expression:"compareObject.type"}},[_c("el-option",{attrs:{label:"Space",value:"space"}}),_c("el-option",{attrs:{label:"Asset",value:"asset"}})],1)],1),"space"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"header"},[_vm._v("Space")]),_c("el-select",{staticClass:"report-dropDown",attrs:{filterable:""},on:{change:_vm.selectSpace},model:{value:_vm.compareObject.spaceId,callback:function($$v){_vm.$set(_vm.compareObject,"spaceId",$$v)},expression:"compareObject.spaceId"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:space.id}})})),1)],1):_vm._e(),"asset"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"header"},[_vm._v("Asset")]),_c("el-select",{staticClass:"report-dropDown",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1):_vm._e(),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"header"},[_vm._v("Data Point")]),_c("el-select",{staticClass:"report-dropDown",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.id}})})),1)],1),_vm.compareObject.readingFieldId?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"header"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"en-dropDown",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},on:{change:_vm.applyFilter},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return _c("el-option",{key:funcidx,attrs:{label:func.label,value:func.value}})})),1)],1):_vm._e(),_c("div",{staticClass:"p5"},[_c("el-checkbox",{staticClass:"form-item ",staticStyle:{width:"100%"},model:{value:_vm.compareObject.hasBaseline,callback:function($$v){_vm.$set(_vm.compareObject,"hasBaseline",$$v)},expression:"compareObject.hasBaseline"}},[_vm._v("Apply Baseline")])],1),_vm.compareObject.hasBaseline?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"header"},[_vm._v("Baseline")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"en-dropDown",attrs:{filterable:"",placeholder:"Choose Baseline",title:"Choose Baseline"},on:{change:_vm.applyFilter},model:{value:_vm.compareObject.baseLineId,callback:function($$v){_vm.$set(_vm.compareObject,"baseLineId",$$v)},expression:"compareObject.baseLineId"}},_vm._l(_vm.baselineList,(function(baseline,index){return _c("el-option",{key:index,attrs:{label:baseline.name,value:baseline.id}})})),1)],1):_vm._e()]),_c("div",{staticClass:"row mT30"},[_c("div",{staticClass:"el-report-cancel-btn col-6 fc-el-btn",on:{click:_vm.cancel}},[_vm._v(" cancel ")]),_c("div",{staticClass:"el-report-save-btn fc-el-btn col-6",on:{click:_vm.save}},[_vm._v("Ok")])])])},FCompareReportvue_type_template_id_17563b7e_staticRenderFns=[],FCompareReportvue_type_script_lang_js={data:function(){return{compareObject:{type:"space",spaceId:"",assetId:"",readingFieldId:"",aggregateFunc:0,hasBaseline:!1,baseLineId:""},baselineList:[],assetList:[],spaceList:[],readingFields:[],aggregateFunctions:[{label:"Actual",value:0},{label:"Sum",value:3},{label:"Avg",value:2},{label:"Min",value:4},{label:"Max",value:5}]}},mounted:function(){this.init()},methods:{init:function(){this.loadAssets(),this.loadSpaces(),this.loadBaselines()},reset:function(){this.compareObject=null,this.compareObject={type:"space",spaceId:"",assetId:"",readingFieldId:"",aggregateFunc:0,hasBaseline:!1,baseLineId:""}},open:function(options){this.reset(),options&&(this.compareObject=Object.assign(this.compareObject,this.compareObject,options))},save:function(){var _this=this,reportName="";this.compareObject.spaceId&&(this.compareObject.space=this.spaceList.find((function(a){return a.id===_this.compareObject.spaceId})),reportName=this.compareObject.space.name),this.compareObject.assetId&&(this.compareObject.asset=this.assetList.find((function(a){return a.id===_this.compareObject.assetId})),reportName=this.compareObject.asset.name),this.compareObject.readingFieldId&&(this.compareObject.readingField=this.readingFields.find((function(a){return a.id===_this.compareObject.readingFieldId})),reportName+=" - "+this.compareObject.readingField.displayName),this.compareObject.name=reportName,this.$emit("save",this.compareObject)},cancel:function(){this.$emit("cancel")},selectSpace:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},selectAsset:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},loadAssets:function(){var self=this;self.loading=!0;var url="/asset/all";this.$http.get(url).then((function(response){response.data&&(self.assetList=response.data.assets,self.loading=!1)}))},getAsset:function(id){return this.assetList.find((function(obj){return obj.id===id}))},loadSpaces:function(){var self=this,url="/basespace";this.$http.get(url).then((function(response){response.data&&(self.spaceList=response.data.basespaces)}))},getSpace:function(id){return this.spaceList.find((function(obj){return obj.id===id}))},loadBaselines:function(){var self=this;self.$http.get("/baseline/all").then((function(response){200===response.status&&(self.baselineList=response.data?response.data:[])}))},loadReadingFields:function(){var self=this;if("asset"===self.compareObject.type&&this.compareObject.assetId){var obj=self.getAsset(this.compareObject.assetId),url="/module/meta?moduleName=asset&assetId="+obj.id+"&categoryId="+obj.category.id+"&resourceType=asset";self.$http.get(url).then((function(response){if(self.readingFields=response.data.meta.fields,!self.compareObject.readingFieldId){var energyDelta=self.readingFields.find((function(r){return"TOTAL_ENERGY_CONSUMPTION_DELTA"===r.columnName}));self.compareObject.readingFieldId=energyDelta?energyDelta.id+"":self.readingFields[0].id+""}}))}else if("space"===self.compareObject.type&&self.compareObject.spaceId){var _url="/reading/getspacespecificreadings?parentId="+self.compareObject.spaceId;self.$http.get(_url).then((function(response){var fields=[];if(response.data){for(var i=0;i<response.data.length;i++)for(var readingModule=response.data[i],j=0;j<readingModule.fields.length;j++){var field=readingModule.fields[j];field.module={name:readingModule.name},fields.push(field)}self.readingFields=fields,self.compareObject.readingFieldId||(self.compareObject.readingFieldId=self.readingFields[0].id)}}))}}}},components_FCompareReportvue_type_script_lang_js=FCompareReportvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FCompareReportvue_type_script_lang_js,FCompareReportvue_type_template_id_17563b7e_render,FCompareReportvue_type_template_id_17563b7e_staticRenderFns,!1,null,null,null)
/* harmony default export */,FCompareReport=component.exports,NewTabularReportvue_type_script_lang_js={mixins:[ReportHelper/* default */.Z],components:{FCriteriaBuilder:FCriteriaBuilder/* default */.Z,FReport:FReport/* default */.Z,FCompareReport:FCompareReport},data:function(){return{loading:!0,module:"",moduleMeta:null,reportFolders:[],reportForm:{name:"",description:"",parentFolderId:null,chartType:14,xAxisField:{moduleFieldId:null},xAxisaggregateFunction:null,y1AxisField:{moduleFieldId:null},y1AxisaggregateFunction:null,groupByField:{moduleFieldId:null},groupByFieldAggregateFunction:null,criteria:null,reportUserFilters:[],reportThresholds:[]},columns:[],addReadingColumnDialogVisibility:!1,dateFilter:{fieldId:"",operatorId:"",dateRange:null},energyMeterFilter:{buildingId:"",serviceId:"",subMeterId:"",groupBy:""},subMeters:[],energyGroupBy:[{label:"By Building",value:"building"},{label:"By Service",value:"service"}],dateOperators:[{label:"Today",value:22},{label:"Yesterday",value:25},{label:"This Week",value:31},{label:"Last Week",value:30},{label:"This Month",value:28},{label:"Last Month",value:27},{label:"This Year",value:44},{label:"Last Year",value:45},{label:"Custom",value:20}],thresholdLineStyles:[{label:"Default",value:3},{label:"Dotted",value:2},{label:"Dashed",value:1}],aggregateFunctions:[{label:"Actual",value:0},{label:"Sum",value:3},{label:"Avg",value:2},{label:"Min",value:4},{label:"Max",value:5}],showGeneratePreview:!0,previewReportContext:null}},created:function(){this.$store.dispatch("loadEnergyMeters")},mounted:function(){this.loadModuleMeta()},computed:{getXAxisDataType:function(){var _this=this;if(this.reportForm.xAxisField.moduleFieldId&&""!==this.reportForm.xAxisField.moduleFieldId){var field=this.moduleMeta.fields.find((function(field){return field.id===parseInt(_this.reportForm.xAxisField.moduleFieldId)}));return field.dataTypeEnum._name}return null},getYAxisDataType:function(){var _this2=this;if(this.reportForm.y1AxisField.moduleFieldId&&""!==this.reportForm.y1AxisField.moduleFieldId){var field=this.moduleMeta.fields.find((function(field){return field.id===parseInt(_this2.reportForm.y1AxisField.moduleFieldId)}));return field.dataTypeEnum._name}return null},getGroupByDataType:function(){var _this3=this;if(this.reportForm.groupByField.moduleFieldId&&""!==this.reportForm.groupByField.moduleFieldId){var field=this.moduleMeta.fields.find((function(field){return field.id===parseInt(_this3.reportForm.groupByField.moduleFieldId)}));return field.dataTypeEnum._name}return null},dateFields:function(){return this.moduleMeta?this.moduleMeta.fields.filter((function(fld){return fld.dataTypeEnum._name.indexOf("DATE")>=0})):null}},methods:{loadModuleMeta:function(){var self=this;if(this.getCurrentModule().module){self.loading=!0;var model=this.getCurrentModule().module;self.$http.get("/module/meta?moduleName="+this.getCurrentModule().module).then((function(response){self.moduleMeta=response.data.meta,self.moduleMeta.module=model,self.loading=!1})),self.loadReportFolders()}},loadReportFolders:function(){var self=this;self.$http.get("/report/workorder/getAllWorkOrderReports?moduleName="+this.getCurrentModule().module).then((function(response){response.data.allWorkOrderJsonReports&&(self.reportFolders=response.data.allWorkOrderJsonReports)}))},loadSubMeters:function(){var self=this,url="/dashboard/getSubMeters?buildingId="+this.energyMeterFilter.buildingId;this.energyMeterFilter.serviceId&&""!==this.energyMeterFilter.serviceId&&(url+="&serviceId="+this.energyMeterFilter.serviceId),self.$http.get(url).then((function(response){self.subMeters=response.data.energyMeters}))},generatePreview:function(){this.reportForm.xAxisField.moduleFieldId&&""!==this.reportForm.xAxisField.moduleFieldId?(this.previewReportContext=this.$helpers.cloneObject(this.reportForm),this.showGeneratePreview=!1):this.$message({message:"X-Axis field is required to preview chart.",type:"warning"})},getAggregateFunctions:function(dataType){return dataType?"DATE"===dataType||"DATE_TIME"===dataType?this.moduleMeta.reportOperators.DateAggregateOperator:"NUMBER"===dataType||"DECIMAL"===dataType?this.moduleMeta.reportOperators.NumberAggregateOperator:this.moduleMeta.reportOperators.StringAggregateOperator:[]},addThreshold:function(){this.reportForm.reportThresholds.push({name:"",value:"",color:"",lineStyle:3})},removeThreshold:function(index){this.reportForm.reportThresholds.splice(index,1)},cancel:function(){this.$router.push({path:this.getCurrentModule().rootPath})},save:function(){if(""!==this.reportForm.name.trim())if(this.reportForm.xAxisField.moduleFieldId&&""!==this.reportForm.xAxisField.moduleFieldId){var _step,self=this,formattedUserFilters=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.reportForm.reportUserFilters);try{for(_iterator.s();!(_step=_iterator.n()).done;){var filterFldId=_step.value;formattedUserFilters.push({reportFieldContext:{moduleFieldId:filterFldId}})}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.reportForm.reportUserFilters=formattedUserFilters,this.dateFilter.fieldId&&""!==this.dateFilter.fieldId&&(this.reportForm.dateFilter={fieldId:this.dateFilter.fieldId,operatorId:this.dateFilter.operatorId},20===this.dateFilter.operatorId&&(this.reportForm.dateFilter.val=this.dateFilter.dateRange[0].getTime()+","+this.dateFilter.dateRange[1].getTime()));var energyMeter={};this.energyMeterFilter.buildingId&&""!==this.energyMeterFilter.buildingId&&(energyMeter.buildingId=this.energyMeterFilter.buildingId),this.energyMeterFilter.serviceId&&""!==this.energyMeterFilter.serviceId&&(energyMeter.serviceId=this.energyMeterFilter.serviceId),this.energyMeterFilter.subMeterId&&""!==this.energyMeterFilter.subMeterId&&(energyMeter.subMeterId=this.energyMeterFilter.subMeterId),this.energyMeterFilter.groupBy&&""!==this.energyMeterFilter.groupBy&&(energyMeter.groupBy=this.energyMeterFilter.groupBy),Object.keys(energyMeter).length>0&&(this.reportForm.energyMeter=energyMeter);var reports=[];self.reportForm.moduleName=this.getCurrentModule().module,reports.push(self.reportForm);var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.columns);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var column=_step2.value,reportObj={name:column.data.name,description:column.data.name,parentFolderId:null,moduleId:column.data.readingField.moduleId,chartType:1,xAxisField:{moduleField:{name:"ttime"}},xAxisaggregateFunction:self.reportForm.xAxisaggregateFunction,y1AxisField:{moduleFieldId:column.data.readingField.id},y1AxisaggregateFunction:column.data.aggregateFunc,groupByField:{moduleFieldId:null},groupByFieldAggregateFunction:null,criteria:{pattern:"(1)",conditions:{1:{fieldName:"parentId",moduleName:column.data.readingField.module.name,operatorId:36,value:(column.data.space?column.data.space.id:column.data.asset.id)+""}}},reportUserFilters:[],reportThresholds:[]};column.data.baseLineId&&(reportObj.baseLineId=column.data.baseLineId),reports.push(reportObj)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}self.$http.post("dashboard/addTabularReport?moduleName="+this.getCurrentModule().module,{reports:reports}).then((function(response){if(response.data.reportContext){self.$message({message:"Report saved successfully.",type:"success"});var reportURL=self.getCurrentModule().rootPath+"/view/"+response.data.reportContext.id;self.$router.replace({path:reportURL})}else self.$message({message:"Report creation failed",type:"warning"})}))}else this.$message({message:"X-Axis is mandatory",type:"warning"});else this.$message({message:"Report name shoudn't be empty",type:"warning"})},saveReadingColumn:function(reportContext,data){var params={readingFieldId:data.readingField.id,parentId:data.space?data.space.id:data.asset.id,reportName:data.name,xAggr:reportContext.XAxisAggregateOpperator.value,yAggr:data.aggregateFunc,reportEntityId:reportContext.reportEntityId},self=this;self.$http.post("dashboard/addComparisionReport?moduleName=energydata",params).then((function(response){}))},addReadingColumn:function(){this.addReadingColumnDialogVisibility=!0,this.$refs["addReadingColumnReportForm"]&&this.$refs["addReadingColumnReportForm"].open()},readingColumnAdded:function(data){this.columns.push({type:"reading",data:data}),this.addReadingColumnDialogVisibility=!1},readingColumnClosed:function(){this.addReadingColumnDialogVisibility=!1}}},forms_NewTabularReportvue_type_script_lang_js=NewTabularReportvue_type_script_lang_js,NewTabularReport_component=(0,componentNormalizer/* default */.Z)(forms_NewTabularReportvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewTabularReport=NewTabularReport_component.exports},
/***/410108:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f1c32ac6a1501ce55d7f2300b27d5e44.svg";
/***/},
/***/887025:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d48efac97df00618be2544d7f1f74f91.svg";
/***/},
/***/341029:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"de70c08c169675a03d6f6f01e3ac8485.svg";
/***/},
/***/129816:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"dfcbbadf4f8f09681ad8f2de015afb01.svg";
/***/},
/***/629443:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"85ea53fd2628a4ae14c73fee9cb609a6.svg";
/***/},
/***/91677:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d03d12044be501e3bdbdc83d030da718.svg";
/***/},
/***/717328:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"274def972329432efd7d03727bb5999c.svg";
/***/},
/***/413273:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"1f25d1b30ac0891c72ce35e280c7bdd4.svg";
/***/},
/***/570678:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ac77e7e49ce3d548023f1938bf0c314.svg";
/***/},
/***/928824:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"6a1913f5986e24342d2477d78bebbe25.svg";
/***/},
/***/71761:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"1286a23c6f12683d5209b7f870725c4e.svg";
/***/},
/***/709333:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4996a0a169dce81b1a1f65b7449a9834.svg";
/***/},
/***/407826:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"187c798f2c8a54e79cbaafc1005755e6.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/14308.js.map