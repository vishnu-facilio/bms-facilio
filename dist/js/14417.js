"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[14417],{
/***/14417:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Layout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/custom-module/Layout.vue?vue&type=template&id=4859cefd
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 pL50"},[_c("router-view",{key:_vm.uniqueKey})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),slicedToArray=__webpack_require__(554621),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(648324),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(821057),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(990260)),api=__webpack_require__(32284),Layoutvue_type_script_lang_js={created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var connectedAppFilters,customModulesUrl,connectedAppsUrl,promises,modulesList,appsList,_yield$Promise$all,_yield$Promise$all2,modulesListData,connecedAppsData,_modulesListData$data,_modulesListData$data2,moduleList,error,_connecedAppsData$dat,_connecedAppsData$dat2,connectedAppWidgets,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return connectedAppFilters=encodeURIComponent(JSON.stringify({entityType:{operatorId:9,value:["1"]}})),customModulesUrl="/v2/module/list",connectedAppsUrl="/v2/connectedApps/widgetList?filters=".concat(connectedAppFilters),promises=[],modulesList=[],appsList=[],promises.push(api/* API */.bl.get(customModulesUrl)),promises.push(api/* API */.bl.get(connectedAppsUrl)),_context.next=10,Promise.all(promises);case 10:if(_yield$Promise$all=_context.sent,_yield$Promise$all2=(0,slicedToArray/* default */.Z)(_yield$Promise$all,2),modulesListData=_yield$Promise$all2[0],connecedAppsData=_yield$Promise$all2[1],_context.prev=14,(0,validation/* isEmpty */.xb)(modulesListData)){_context.next=22;break}if(_modulesListData$data=modulesListData.data,_modulesListData$data2=_modulesListData$data.moduleList,moduleList=void 0===_modulesListData$data2?{}:_modulesListData$data2,error=_modulesListData$data.error,!error){_context.next=21;break}throw new Error(error.message);case 21:modulesList=moduleList||[];case 22:if((0,validation/* isEmpty */.xb)(connecedAppsData)){_context.next=29;break}if(_connecedAppsData$dat=connecedAppsData.data,_connecedAppsData$dat2=_connecedAppsData$dat.connectedAppWidgets,connectedAppWidgets=void 0===_connecedAppsData$dat2?{}:_connecedAppsData$dat2,_error=_connecedAppsData$dat.error,!_error){_context.next=28;break}throw new Error(_error.message);case 28:appsList=connectedAppWidgets||[];case 29:(0,validation/* isEmpty */.xb)(modulesList)&&(0,validation/* isEmpty */.xb)(appsList)||_this.deserializeModulesData({modulesList:modulesList,appsList:appsList}),_context.next=35;break;case 32:_context.prev=32,_context.t0=_context["catch"](14),_this.$message.error(_context.t0.message||"Error Occurred");case 35:case"end":return _context.stop()}}),_callee,null,[[14,32]])})))()},data:function(){return{product:{code:"ca",label:"".concat(this.$t("custommodules.list.connected_apps")),path:"app/ca",modules:[]}}},computed:{uniqueKey:function(){var _ref=this.$route||{},params=_ref.params,_ref2=params||{},moduleName=_ref2.moduleName;return"moduleName-".concat(moduleName)}},methods:{deserializeModulesData:function(_ref3){var _this$$route,_this$$route2,_this$$route3,_this2=this,modulesList=_ref3.modulesList,appsList=_ref3.appsList,finalArr=[],product=this.product,$router=this.$router,currentRoute=$router.currentRoute,_ref4=currentRoute||{},params=_ref4.params;"moro@facilio.com"===this.$account.user.email&&(
// to be removed
modulesList=modulesList.filter((function(m){return!["custom_servicebilllineitems"].includes(m.name)}))),this.$constants.isCustomModulePermissionsEnabled(this.$org.id)&&(modulesList=modulesList.filter((function(moduleDetail){return _this2.$hasPermission("".concat(moduleDetail.name,":READ"))})));var modulesArr=(modulesList||[]).map((function(modules){return{label:modules.displayName,path:{path:"/app/ca/modules/".concat(modules.name)}}}));
// Urgent fix to hide connectedApp widgets in investa will be removed when mainApp to webtab migration
[17,659].includes(this.$org.id)&&(appsList=[]);var appsArr=appsList.map((function(widget){return{label:widget.widgetName,path:{path:"/app/ca/apps/".concat(widget.id)}}}));finalArr=modulesArr.concat(appsArr),(0,validation/* isEmpty */.xb)(finalArr)||(finalArr=finalArr.concat([{label:this.$t("common.header.reports"),path:{path:"/app/ca/reports"},icon:"fa fa-bar-chart-o"}])),this.$set(this.product,"modules",finalArr),this.$store.dispatch("switchProduct",product),null!==this&&void 0!==this&&null!==(_this$$route=this.$route)&&void 0!==_this$$route&&null!==(_this$$route=_this$$route.query)&&void 0!==_this$$route&&_this$$route.module&&null!==this&&void 0!==this&&null!==(_this$$route2=this.$route)&&void 0!==_this$$route2&&null!==(_this$$route2=_this$$route2.query)&&void 0!==_this$$route2&&_this$$route2.reportId?this.$router.push(this.$route.fullPath):"/app/ca/reports"!==(null===this||void 0===this||null===(_this$$route3=this.$route)||void 0===_this$$route3?void 0:_this$$route3.fullPath)?(0,validation/* isEmpty */.xb)(params)&&!(0,validation/* isEmpty */.xb)(finalArr[0])&&this.$router.push(finalArr[0].path):this.$router.push(this.$route.fullPath)}}},custom_module_Layoutvue_type_script_lang_js=Layoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(custom_module_Layoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Layout=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/14417.js.map