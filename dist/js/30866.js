"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[30866],{
/***/130866:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return InspectionTemplateList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/inspection/inspection-template/InspectionTemplateList.vue?vue&type=template&id=87d8864c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isSummaryOpen?_c("div",{staticClass:"height100 schedule-list-container"},[_vm.showLoading?_c("div",{staticClass:"flex-middle fc-empty-white"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_c("div",{staticClass:"flex flex-row"},[_c("div",{staticClass:"height100vh full-layout-white fc-border-left fc-border-right approval-sidebar-list",staticStyle:{flex:"0 0 320px","max-width":"320px"}},[_c("SummarySidebar",{staticClass:"inspection-template-summary-list",attrs:{list:_vm.records,isLoading:_vm.isLoading,activeRecordId:_vm.selectedRecordId,total:_vm.recordCount,currentCount:(_vm.records||[]).length},on:{"update:isLoading":function($event){_vm.isLoading=$event},"update:is-loading":function($event){_vm.isLoading=$event}},scopedSlots:_vm._u([{key:"title",fn:function(){return[_c("el-row",{staticClass:"p15 pT20 pB20 fc-border-bottom"},[_c("el-col",{attrs:{span:2}},[_c("span",{on:{click:function($event){return _vm.openList()}}},[_c("inline-svg",{staticClass:"rotate-90 pointer",attrs:{src:"svgs/arrow",iconClass:"icon icon-sm"},on:{click:function($event){return _vm.openList()}}})],1)]),_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"bold"},[_vm._v(_vm._s(_vm.currentViewDetail))])])],1)]},proxy:!0},{key:"default",fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"sp-li ellipsis f12 pointer asset-item p20",on:{click:function($event){return _vm.openSummary(record.id)}}},[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"d-flex"},[_c("div",{staticClass:"fc-id pR10"},[_vm._v("#"+_vm._s(record.id))])]),_c("div",{staticClass:"flex-middle justify-content-space width100 pT10"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                      placement: 'top',\n                      animation: 'shift-away',\n                      arrow: true,\n                    }"}],staticClass:"f14 truncate-text",attrs:{title:record.subject||record.name}},[_vm._v(" "+_vm._s(record.subject||record.name)+" ")]),_c("div",{staticClass:"fc-grey2-text12"},[_c("i",{staticClass:"el-icon-time pR5"}),_vm._v(" "+_vm._s(_vm._f("fromNow")(record.sysCreatedTime))+" ")])])])],1)],1)]}}],null,!1,1189344270)})],1),_c("div",{staticStyle:{flex:"1"}},[_c("router-view",{attrs:{viewname:_vm.viewname,moduleName:_vm.moduleName}})],1)])]):_c("CommonListLayout",{key:_vm.moduleName+"-list-layout",staticClass:"custom-module-list-layout",attrs:{moduleName:_vm.moduleName,showViewRearrange:!0,showViewEdit:!0,visibleViewCount:3,getPageTitle:function(){return"All "+_vm.moduleDisplayName+"s"},pathPrefix:_vm.parentPath,hideSubHeader:_vm.canHideSubHeader,recordCount:_vm.recordCount,recordLoading:_vm.showLoading},scopedSlots:_vm._u([{key:"header",fn:function(){return[_vm.canHideFilter?_vm._e():_c("AdvancedSearchWrapper",{key:"ftags-list-"+_vm.moduleName,attrs:{filters:_vm.filters,moduleName:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName}}),_vm.canShowVisualSwitch?_c("visual-type",{on:{onSwitchVisualize:function(val){return _vm.canShowListView=val}}}):_vm._e(),_c("div",[_vm.hasCreatePermission?_c("button",{staticClass:"fc-create-btn",on:{click:function($event){return _vm.openCreate()}}},[_vm._v(" "+_vm._s(_vm.createText)+" ")]):_vm._e()])]},proxy:!0},_vm.canShowCalendarHeader?{key:"sub-header",fn:function(){return[_vm.showListView?_vm._e():_c("CalendarDateWrapper")]},proxy:!0}:null,{key:"sub-header-actions",fn:function(){return[!_vm.isEmpty(_vm.records)&&_vm.showListView?[_c("pagination",{staticClass:"pL15 fc-black-small-txt-12",attrs:{total:_vm.recordCount,currentPageCount:_vm.currentPageCount,perPage:_vm.perPage,skipTotalCount:!0}}),_vm.recordCount&&_vm.recordCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("Sort",{key:_vm.moduleName+"-sort",attrs:{moduleName:_vm.moduleName},on:{onSortChange:_vm.updateSort}})]:_vm._e()]},proxy:!0},{key:"content",fn:function(){return[_c("div",{staticClass:"height100 pB10"},[_vm.showLoading?_c("Spinner",{staticClass:"mT40",attrs:{show:_vm.showLoading}}):_vm.showListView?_c("div",{staticClass:"fc-card-popup-list-view"},[_c("div",{staticClass:"fc-list-view fc-list-table-container  height100vh fc-table-td-height fc-table-viewchooser pB200"},[_vm.$validation.isEmpty(_vm.records)&&!_vm.showLoading?_c("div",{staticClass:" cm-empty-state-container white-bg height100 flex-middle justify-content-centerheight100flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/purchaseOrder",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v("No "+_vm._s(_vm.moduleDisplayName)+" Available")])],1):_vm._e(),_vm.showLoading||_vm.$validation.isEmpty(_vm.records)?_vm._e():_c("div",{staticClass:"m10 mT0"},[_c("div",{staticClass:"column-customization-icon",attrs:{disabled:!_vm.isColumnCustomizable},on:{click:_vm.toShowColumnSettings}},[_c("el-tooltip",{attrs:{disabled:_vm.isColumnCustomizable,placement:"top",content:_vm.$t("common._common.you_dont_have_permission")}},[_c("inline-svg",{staticClass:"text-center position-absolute icon",attrs:{src:"column-setting"}})],1)],1),_vm.selectedListItemsIds.length>0?_c("div",{staticClass:"pull-left table-header-actions"},[_c("div",{staticClass:"action-btn-slide btn-block"},[_c("button",{staticClass:"btn btn--tertiary",class:{disabled:_vm.isLoading},on:{click:function($event){return _vm.deleteRecords(_vm.selectedListItemsIds)}}},[_vm.isLoading?_vm._e():_c("i",{staticClass:"fa fa-trash-o b-icon"}),_vm.isLoading?_c("i",{staticClass:"fa fa-circle-o-notch b-icon fa-spin",attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])])]):_vm._e(),_c("CommonList",{attrs:{viewDetail:_vm.modifiedViewDetail,records:_vm.records,moduleName:_vm.moduleName,redirectToOverview:_vm.openSummary,slotList:_vm.slotList},on:{"selection-change":_vm.selectItems},scopedSlots:_vm._u([{key:_vm.slotList[0].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+record.id))])]}},{key:_vm.slotList[1].name,fn:function(ref){var record=ref.record;return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flex-middle main-field-column",attrs:{small:"",title:_vm.$getProperty(record,"name","---")},on:{click:function($event){return _vm.openSummary(record.id)}}},[_c("div",{staticClass:"fw5 ellipsis width200px"},[_vm._v(" "+_vm._s(_vm.$getProperty(record,"name","---"))+" ")])])]}},{key:_vm.slotList[2].criteria,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"truncate-text"},[_vm._v(" "+_vm._s(_vm.getAssignedToValue(record))+" ")])]}},{key:_vm.slotList[3].name,fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"text-center"},[_vm.$hasPermission(_vm.moduleName+":UPDATE")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editRecord(record)}}}):_vm._e(),_vm.$hasPermission(_vm.moduleName+":DELETE")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color visibility-hide-actions mL10",attrs:{"data-arrow":"true",title:_vm.$t("common._common.delete")},on:{click:function($event){return _vm.deleteRecords([record.id])}}}):_vm._e()])]}}],null,!0)})],1)])]):_vm.showListView?_vm._e():_c("CalendarView",{ref:"calendar",attrs:{moduleName:_vm.moduleName,record:_vm.records,viewDetail:_vm.viewDetail,viewname:_vm.viewname,filters:_vm.filters}})],1)]},proxy:!0}],null,!0)},[_c("portal",{attrs:{to:"view-manager-link"}},[_c("router-link",{staticClass:"view-manager-btn",attrs:{tag:"div",to:_vm.viewManagerRoute}},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:"svgs/hamburger-menu",iconClass:"icon icon-sm"}}),_c("span",{staticClass:"label mL10 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("viewsmanager.list.views_manager"))+" ")])],1)],1),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:_vm.moduleName,viewName:_vm.viewname,excludeMainField:!0},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(648324),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(32284)),router=__webpack_require__(329435),CommonModuleList=__webpack_require__(347446),InspectionTemplateListvue_type_script_lang_js={extends:CommonModuleList["default"],name:"InspectionTemplateList",computed:{slotList:function(){return[{name:"id",isHardcodedColumn:!0,columnAttrs:{"min-width":110,label:"ID",fixed:"left"}},{name:"name",isHardcodedColumn:!0,columnAttrs:{"min-width":230,label:"Name",fixed:"left"}},{criteria:JSON.stringify({name:"assignedTo"})},{name:"editDelete",isActionColumn:!0,columnAttrs:{width:130,class:"visibility-visible-actions",fixed:"right"}}]},parentPath:function(){return"/app/inspection/template"},createText:function(){return this.$t("qanda.template.new_inspection")},viewManagerRoute:function(){return{path:"/app/inspection/".concat(this.moduleName,"/viewmanager")}},modifiedViewDetail:function(){var viewDetail=this.viewDetail,_ref=viewDetail||{},_ref$fields=_ref.fields,fields=void 0===_ref$fields?[]:_ref$fields;return fields=fields.filter((function(field){var _ref2=field||{},fieldObj=_ref2.field,_ref3=fieldObj||{},mainField=_ref3.mainField;return!mainField})),viewDetail=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},viewDetail),{},{fields:fields}),viewDetail},hasCreatePermission:function(){return this.$hasPermission("".concat(this.moduleName,":CREATE"))}},methods:{getAssignedToValue:function(record){var value=record.assignmentGroup?record.assignmentGroup.name:"---";return value+=" / "+(record.assignedTo?record.assignedTo.name:"---"),value},openSummary:function(id){if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref4.name;name&&this.$router.push({name:name,params:{viewname:this.viewname,id:id},query:this.$route.query})}else this.$router.push({name:"inspectionTemplateSummary",params:{id:id,viewname:this.viewname},query:this.$route.query})},openList:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _ref5=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.LIST)||{},name=_ref5.name;name&&this.$router.push({name:name,params:{viewname:this.viewname},query:this.$route.query})}else this.$router.push({name:"inspectionTemplateList",params:{viewname:this.viewname},query:this.$route.query})},openCreate:function(){if((0,router/* isWebTabsEnabled */.tj)()){var viewname=this.viewname,_ref6=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.CREATE)||{},name=_ref6.name;name&&this.$router.push({name:name,params:{viewname:viewname},query:this.$route.query})}else this.$router.push({name:"inspectionTemplateCreate",params:{viewname:this.viewname},query:this.$route.query})},deleteRecords:function(idList){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var value,_yield$API$deleteReco,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$dialog.confirm({title:_this.$t("qanda.template.delete_template"),message:_this.$t("qanda.template.delete_confirmation"),rbDanger:!0,rbLabel:_this.$t("common._common.delete")});case 2:if(value=_context.sent,!value){_context.next=17;break}return _context.next=6,api/* API */.bl.deleteRecord(_this.moduleName,idList);case 6:if(_yield$API$deleteReco=_context.sent,error=_yield$API$deleteReco.error,!error){_context.next=12;break}_this.$message.error(error.message||"Error Occured"),_context.next=17;break;case 12:return _context.next=14,_this.refreshRecordDetails(!0);case 14:_this.$message.success(_this.$t("qanda.template.multiple_success_delete")),_this.selectedListItemsObj=[],_this.selectedListItemsIds=[];case 17:case"end":return _context.stop()}}),_callee)})))()},editRecord:function(record){var _ref7=record||{},id=_ref7.id,moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForModule=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT),name=_findRouteForModule.name;name&&this.$router.push({name:name,params:{id:id}})}else this.$router.push({name:"inspectionTemplateEdit",params:{id:id}})}}},inspection_template_InspectionTemplateListvue_type_script_lang_js=InspectionTemplateListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(inspection_template_InspectionTemplateListvue_type_script_lang_js,render,staticRenderFns,!1,null,"87d8864c",null)
/* harmony default export */,InspectionTemplateList=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/30866.js.map