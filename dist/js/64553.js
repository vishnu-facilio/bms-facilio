(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[64553],{
/***/105402:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SummarySideBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/SummarySideBar.vue?vue&type=template&id=28fb6c2a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height-100"},[_vm._t("title"),_c("ul",{staticClass:"mT10 p0 side-bar-list"},[_c("v-infinite-scroll",{staticClass:"overflow-y-scroll",attrs:{loading:_vm.isLoading,offset:20},on:{bottom:_vm.nextPage}},_vm._l(_vm.lists,(function(record,index){return _c("div",{key:index,staticClass:"pointer list-item",class:{active:_vm.currentId===record.id}},[_vm._t("default",null,{record:record})],2)})),0),_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1)],2)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),v_infinite_scroll=(__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),SummarySideBarvue_type_script_lang_js={props:["list","isLoading","activeRecordId","total","currentCount","currentPage","perPage"],data:function(){return{currentId:-1,lists:[]}},components:{VInfiniteScroll:v_infinite_scroll_default()},computed:{page:function(){return this.currentPage?this.currentPage:parseInt(this.$route.query.page||1)}},watch:{activeRecordId:{handler:function(newValue){this.currentId=newValue},immediate:!0},list:{handler:function(newValue){this.isLoading?this.lists=[].concat((0,toConsumableArray/* default */.Z)(this.lists),(0,toConsumableArray/* default */.Z)(newValue)):this.lists=(0,toConsumableArray/* default */.Z)(newValue),this.$emit("update:isLoading",!1)},immediate:!0}},methods:{nextPage:function(){var page=this.page,total=this.total,currentCount=this.currentCount,perPage=this.perPage,query=this.$route.query,canTraverseNextPage=total>(page-1)*(perPage||50)+currentCount;canTraverseNextPage&&(this.$emit("nextPage"),this.$router.push({query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},query),{},{page:page+1})}))}}},components_SummarySideBarvue_type_script_lang_js=SummarySideBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SummarySideBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"28fb6c2a",null)
/* harmony default export */,SummarySideBar=component.exports},
/***/861058:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ContactSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/contact/v1/ContactSummary.vue?vue&type=template&id=3ca26df4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.summaryData?_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__columns fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__columns"},[_c("div",{staticClass:"fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__has__row fc__submenu__left fc__layout__box"},[_c("summary-side-bar",{attrs:{list:_vm.recordList||[],isLoading:_vm.loading,activeRecordId:_vm.id,total:_vm.listCount,currentCount:(_vm.recordList||[]).length,currentPage:_vm.page-1},on:{"update:isLoading":function($event){_vm.loading=$event},"update:is-loading":function($event){_vm.loading=$event},nextPage:_vm.loadData},scopedSlots:_vm._u([{key:"title",fn:function(){return[_c("div",{staticClass:"fc__layout_media_center fc__submenu__header fc__layout__has__columns pointer"},[_c("i",{staticClass:"el-icon-back fw6",on:{click:_vm.back}}),_c("div",{staticClass:"label-txt-black pL10"},[_c("el-popover",{attrs:{placement:"bottom",width:"170","popper-class":"popover-height inventory-list-popover",trigger:"click"},model:{value:_vm.toggle,callback:function($$v){_vm.toggle=$$v},expression:"toggle"}},[_c("ul",_vm._l(_vm.views,(function(view,index){return _c("li",{key:index,class:{active:_vm.currentViewDetail.displayName===view.displayName},on:{click:function($event){return _vm.switchCategory(view)}}},[_vm._v(" "+_vm._s(view.displayName)+" ")])})),0),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.currentViewDetail.displayName)+" "),_c("i",{staticClass:"el-icon-arrow-down el-icon-arrow-down-tv",staticStyle:{"padding-left":"8px"}})])])],1)])]},proxy:!0},{key:"default",fn:function(ref){var record=ref.record;return[_c("div",{staticClass:"fc__layout__flexes overflo-auto fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__submenu__section fc__layout__has__row fc__layout__max__row"},[_c("div",{staticClass:"pB15 pT15 pL20 pR20 flex-middle justify-content-space line-height20",on:{click:function($event){return _vm.getSummaryLink(record.id)}}},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                            placement: 'top',\n                            animation: 'shift-away',\n                            arrow: true,\n                          }"}],staticClass:"width220px textoverflow-ellipsis",attrs:{title:record.name?record.name:"[#"+record.parentId+"]"}},[_vm._v(" "+_vm._s(record.name?record.name:"[#"+record.id+"]")+" ")]),_c("img",{class:["fR hide mT3",{show:_vm.id===record.id}],attrs:{src:__webpack_require__(513905),width:"15",height:"15"}})])])])]}}])})],1),_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__asset_main"},[_c("div",{},[_c("div",{staticClass:"fc__layout__align fc__asset__main__header pT24 pB20 pL20 pR20"},[_c("div",{staticClass:"fc-dark-grey-txt18"},[_c("div",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.summaryData.id))]),_c("div",{staticClass:"fc-black-17 bold inline-flex"},[_vm._v(" "+_vm._s(_vm.summaryData.name)+" ")])]),_c("div",{staticClass:"fc__layout__align inventory-overview-btn-group"},[_c("el-dropdown",{on:{command:_vm.handleCommand}},[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{attrs:{src:__webpack_require__(935010),height:"18",width:"18"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]),_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete")))])],1)],1)],1)])]),null!==_vm.summaryData?_c("div",{staticClass:"fc__layout__flexes fc__main__con__width"},[_c("div",{staticClass:"fc__asset__main__scroll"},[_c("div",{staticClass:"fc__white__bg__asset"},[_c("el-row",[_c("el-col",{attrs:{span:16}},[_c("el-col",{staticClass:"mB30",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.systemFieldsDisplayNameMap["phone"])+" ")]),_c("div",{staticClass:"label-txt-black pT5"},[_vm._v(" "+_vm._s(_vm.summaryData.phone?_vm.summaryData.phone:"---")+" ")])]),_c("el-col",{staticClass:"mB30",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.systemFieldsDisplayNameMap["email"])+" ")]),_c("div",{staticClass:"label-txt-black pT5"},[_vm._v(" "+_vm._s(_vm.summaryData.email?_vm.summaryData.email:"---")+" ")])])],1),_c("el-col",{attrs:{span:16}},[_c("el-col",{staticClass:"mB30",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v("Type")]),_c("div",{staticClass:"label-txt-black pT5"},[_vm._v(" "+_vm._s(_vm.summaryData.contactType?_vm.contactTypeEnum[_vm.summaryData.contactType]:"---")+" ")])])],1),_c("el-col",{attrs:{span:16}},[_c("el-col",{staticClass:"mB30",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label pB5"},[_vm._v("Vendor")]),_vm.summaryData.vendor?_c("router-link",{attrs:{to:{path:"/app/vendor/vendors/all/summary/"+_vm.summaryData.vendor.id}}},[_vm._v(_vm._s(_vm.summaryData.vendor.name))]):_c("div",[_vm._v("---")])],1),_c("el-col",{staticClass:"mB30",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label pB5"},[_vm._v("Tenant")]),_vm.summaryData.tenant?_c("router-link",{attrs:{to:{path:"/app/tm/tenants/all/"+_vm.summaryData.tenant.id+"/overview"}}},[_vm._v(_vm._s(_vm.summaryData.tenant.name))]):_c("div",[_vm._v("---")])],1)],1)],1)],1),_c("div",{staticClass:"mT20 mB10 inventory-section-header"},[_vm._v(" Summary ")]),_c("div",{staticClass:"fc__white__bg__info"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.systemFieldsDisplayNameMap["isPortalAccessNeeded"])+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.isPortalAccessNeeded?"Yes":"No"))])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.systemFieldsDisplayNameMap["isPrimaryContact"])+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.isPrimaryContact?"Yes":"No"))])],1)],1)],1),_vm.customFields&&_vm.customFields.length>0?_c("div",{staticClass:"fc__white__bg__info__custom mT20"},_vm._l(_vm.customFields,(function(d,index){return index%2===0?_c("el-row",{key:index,staticClass:"border-bottom6 pB20 pT20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.customFields[index].displayName)+" ")])]),"DATE"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index].name],!0):"---"))]):"DATE_TIME"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s((_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name])>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index].name]):"---"))]):[2,3].includes(_vm.customFields[index].field.dataType)?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]&&-1!==_vm.summaryData.data[_vm.customFields[index].name]?_vm.summaryData.data[_vm.customFields[index].name]:"---"))]):"ENUM"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.customFields[index+1].field.enumMap[parseInt(_vm.summaryData.data[_vm.customFields[index+1].name])]:"---"))]):_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]?_vm.summaryData.data[_vm.customFields[index].name]:"---"))])],1),_vm.customFields.length>index+1?_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.customFields[index+1].displayName)+" ")])]),"DATE"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index+1].name],!0):"---"))]):"DATE_TIME"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s((_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name])>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index+1].name]):"---"))]):[2,3].includes(_vm.customFields[index+1].field.dataType)?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]&&-1!==_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.summaryData.data[_vm.customFields[index+1].name]:"---"))]):"ENUM"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.customFields[index+1].field.enumMap[parseInt(_vm.summaryData.data[_vm.customFields[index+1].name])]:"---"))]):_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.summaryData.data[_vm.customFields[index+1].name]:"---"))])],1):_vm._e()],1):_vm._e()})),1):_vm._e()])]):_vm._e()])])])])]),_c("ContactForm",{attrs:{visibility:_vm.editFormVisibility,moduleName:"contact",editData:_vm.editData},on:{"update:visibility":function($event){_vm.editFormVisibility=$event},saved:_vm.refreshData}})],1):_c("div",[_c("spinner",{attrs:{show:!_vm.summaryData}})],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ContactForm=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(169358),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(947522),__webpack_require__(857267),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(575088)),SummarySideBar=__webpack_require__(105402),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),ContactSummaryvue_type_script_lang_js={components:{ContactForm:ContactForm/* default */.Z,SummarySideBar:SummarySideBar/* default */.Z},data:function(){return{recordList:null,toggle:!1,loading:!0,page:1,summaryData:null,customFields:[],editFormVisibility:!1,systemFieldsDisplayNameMap:{},editData:null,listCount:0,contactTypeEnum:{1:"Tenant",2:"Vendor",3:"Employee"}}},mounted:function(){this.$store.dispatch("view/clearViews"),this.$store.dispatch("view/loadViews",this.getCurrentModule),this.$store.dispatch("view/loadModuleMeta",this.getCurrentModule),this.loadRecordsCount(),this.getViewDetail(),this.loadData(),this.loadSummary(),this.loadForm()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({views:function(state){return state.view.views}})),{},{id:function(){return parseInt(this.$route.params.id)},getCurrentModule:function(){return"contact"},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:null},currentViewDetail:function(){var _this=this;return this.$route.query.search?{displayName:"Filtered Contact",name:"filteredcontact"}:this.views.find((function(view){return view.name===_this.currentView}))||{}},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null}}),watch:{recordList:function(newVal){"null"===this.$route.params.id&&newVal&&newVal.length>0&&this.getSummaryLink(newVal[0].id)},id:function(newVal){this.$route.query.refresh&&this.loadData(),this.loadSummary()},filters:function(newVal){(0,validation/* isEmpty */.xb)(newVal)||this.views.push({displayName:"Filtered Contacts",name:"filteredcontact"})}},methods:{refreshData:function(){this.loadData(),this.loadSummary()},loadRecordsCount:function(){var _this2=this,filters=this.filters,currentView=this.currentView,params={filters:(0,validation/* isEmpty */.xb)(filters)?null:JSON.stringify(filters),fetchCount:!0},url="/v2/contacts/".concat(currentView);api/* API */.bl.get(url,params).then((function(_ref){var data=_ref.data,error=_ref.error;error?_this2.$message.error(error.message||"Error occured"):_this2.listCount=data.recordCount||0}))},loadForm:function(){var _this3=this,url="/getFormMeta",param={formNames:"contactForm"};api/* API */.bl.get(url,param).then((function(_ref2){var data=_ref2.data,error=_ref2.error;error?_this3.$message.error(error.message||"Error occured"):_this3.formFields(data.forms[0])}))},formFields:function(data){var _this4=this;this.customFields=[],data.fields.forEach((function(field){field.field&&!0!==field.field.default?_this4.customFields.push(field):field.field&&(_this4.systemFieldsDisplayNameMap[field.field.name]=field.field.displayName?field.field.displayName:field.field.name)}))},loadSummary:function(){var _this5=this,url="/v2/contacts/details",param={recordId:this.id};this.id&&api/* API */.bl.get(url,param).then((function(_ref3){var data=_ref3.data,error=_ref3.error;error?_this5.$message.error(error.message||"Error occured"):_this5.summaryData=data.contact||[]}))},back:function(){var url="/app/home/contact/"+this.$route.params.viewname;this.$router.push({path:url,query:this.$route.query})},getViewDetail:function(){this.$store.dispatch("view/loadViewDetail",{viewName:this.currentView,moduleName:this.getCurrentModule})},loadData:function(changeView,currentView){var _this6=this;this.page=changeView?1:this.page,!currentView&&(currentView=this.currentView);var params={page:this.page,perPage:50,filters:(0,validation/* isEmpty */.xb)(this.filters)?null:encodeURIComponent(this.filters)},url="/v2/contacts/".concat(currentView);!changeView&&(this.loading=!0),api/* API */.bl.get(url,params).then((function(_ref4){var data=_ref4.data,error=_ref4.error;error?_this6.$message.error(error.message||"Error occured"):(_this6.recordList=data.contacts,_this6.page+=1)}))},getSummaryLink:function(id){var url="/app/home/contact/"+this.$route.params.viewname+"/summary/"+id;this.$router.replace({path:url,query:this.$route.query})},switchCategory:function(view){var _this7=this,filterIndex=this.views.findIndex((function(view){return"filteredList"===view.name}));-1!==filterIndex&&this.views.splice(filterIndex,1);var url="/app/home/contact/".concat(view.name,"/summary/null");this.loadModuleMeta(this.getCurrentModule).then((function(){_this7.$router.replace({path:url}),_this7.loadData(!0,view.name)})),this.toggle=!1},loadModuleMeta:function(moduleName){return this.$store.dispatch("view/loadModuleMeta",moduleName)},handleCommand:function(command){"delete"===command?this.delete():"edit"===command&&(this.editData=this.$helpers.cloneObject(this.summaryData),this.editData.contactType=this.editData.contactType>0?String(this.editData.contactType):"",this.editFormVisibility=!0)},delete:function(){var _this8=this,url="/v2/contacts/delete",params={contactIds:[this.summaryData.id]};api/* API */.bl.post(url,params).then((function(_ref5){var error=_ref5.error;error?_this8.$message.error(error.message||"Error occured"):(_this8.$message.success("Deleted Successfully"),_this8.$router.push({path:"/app/home/contact/".concat(_this8.currentView)}))}))},getDateTime:function(val,obj){var value=val[obj.property];return value&&-1!==value?this.$options.filters.formatDate(value):"---"}}},v1_ContactSummaryvue_type_script_lang_js=ContactSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_ContactSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ContactSummary=component.exports},
/***/513905:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4509a724e53a55e08ccba29f5172c7ec.svg";
/***/},
/***/935010:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/64553.js.map