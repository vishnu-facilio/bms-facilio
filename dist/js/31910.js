"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[31910],{
/***/231910:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PivotTable}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/PivotTable.vue?vue&type=template&id=4d6ea38e&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-table-comp-root height100 width100",class:_vm.isPivot?"pR25":""},[_vm.showTimelineFilter&&_vm.datePickerObj&&!_vm.isBuilder?_c("div",{staticClass:"date-picker-boxed-style",style:_vm.showTimelineFilter&&_vm.datePickerObj&&!_vm.isBuilder&&!_vm.isPivot?"display:none !important;":""},[_vm.config?_c("portal",{staticClass:"tabulardata-datepicker",attrs:{to:"widget-datepicker"+_vm.config.widget.id,slim:""}},[_c("new-date-picker",{key:_vm.pickerCompKey,ref:"datePickerRef",staticClass:"filter-field date-filter-comp-new-report inline",class:{"move-left":_vm.isInfoIconVisible},staticStyle:{"text-align":"right"},attrs:{zone:_vm.$timezone,dateObj:_vm.datePickerObj},on:{date:_vm.dateChanged}})],1):_c("new-date-picker",{key:_vm.pickerCompKey,ref:"datePickerRef",staticClass:"mB10",staticStyle:{"text-align":"left"},attrs:{zone:_vm.$timezone,dateObj:_vm.datePickerObj},on:{date:_vm.dateChanged}})],1):_vm._e(),_vm.isBuilder?_c("div",{staticClass:"pivot-tool-bar pivot-table-builder-root"},[_vm._t("tools-section"),_vm.showTimelineFilter&&_vm.datePickerObj?_c("div",{staticClass:"date-picker-slot"},[_c("new-date-picker",{key:_vm.pickerCompKey,ref:"datePickerRef",staticStyle:{"text-align":"left"},attrs:{zone:_vm.$timezone,dateObj:_vm.datePickerObj},on:{date:_vm.dateChanged}})],1):_vm._e()],2):_vm._e(),_vm.showTable?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.outsideClick,expression:"outsideClick"}],ref:"pivotTableContainer",staticClass:"calculate-table-height h100 w100"},[_vm.isBuilderLoaded?_c("div",[_vm.loading?_c("skeletonLoader",{attrs:{show:_vm.loading,preset:"Table",columns:4,rows:4}}):_vm._e()],1):_vm.isNoConfig||_vm.fetchPivotDataError?_c("div",{staticClass:"no-config-pivot width100 flex-middle flex-direction-column justify-content-center",class:["pivot-theme-"+_vm.pivotThemeName]},[_vm.fetchPivotDataError?_c("div",{staticClass:"pivot-error-container"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-100"}}),_c("div",{staticClass:"nowo-label mB150"},[_vm._v(" "+_vm._s(_vm.$t("pivot.fetchError"))+" ")])],1):_vm._e(),_vm.isNoConfig&&_vm.spinnerStat.measures&&_vm.spinnerStat.dimensions?_c("div",{staticStyle:{width:"500px"}},[_c("img",{staticStyle:{"margin-top":"-480px",transform:"scale(0.3)","margin-left":"-700px"},attrs:{src:__webpack_require__(797818)}})]):_vm.fetchPivotDataError||_vm.isDimensionsAndMeasuresLoaded?_vm._e():_c("el-table",{attrs:{data:[],border:"","max-height":500,width:"100","cell-style":_vm.cellStyle,"header-cell-style":_vm.headerStyle,"row-class-name":"pivot-table-row","span-method":_vm.pivotSpanMethod},on:{"header-dragend":_vm.columnResizeEvent}},_vm._l(_vm.tableProps,(function(prop,index){return _c("el-table-column",{key:index,attrs:{resizable:"",fixed:_vm.isColumnFixed(index,prop),"min-width":_vm.getColumnWidth(prop),prop:prop,label:_vm.tableHeaders[index]},scopedSlots:_vm._u([{key:"header",fn:function(scope){return[_c("div",{class:prop==_vm.activeColumn?"selected-row pivot-table-header":"pivot-table-header"},[_c("span",{style:prop==_vm.activeColumn?"color:white !important":""},[_vm._v(" "+_vm._s(scope.column.label)+" ")])])]}}],null,!0)})})),1)],1):_c("div",{class:{"pivot-el-table-section":_vm.enableColumnFormat}},[_c("div",{staticClass:"height100 width100",class:["pivot-theme-"+_vm.pivotThemeName]},[_c("div",{staticClass:"height100 width100",class:["pivot-grid-line-"+_vm.pivotTableGrid,"pivot-stripe-"+_vm.pivotTableStripe,"pivot-font-"+_vm.pivotFontSize]},[_vm.isDimensionsAndMeasuresLoaded?_vm._e():_c("el-table",{ref:"pivotTable",attrs:{data:_vm.orderedPivotRecords,border:"","max-height":_vm.pivotTableHeight,"max-width":"100","cell-style":_vm.cellStyle,"header-cell-style":_vm.headerStyle,"row-class-name":"pivot-table-row"},on:{"header-dragend":_vm.columnResizeEvent,"header-click":_vm.enableTitleEdit,"cell-click":_vm.handleDrillDown}},_vm._l(_vm.pivotFilteredColumnProps,(function(prop,index){return _c("el-table-column",{key:index,attrs:{resizable:"",fixed:_vm.isColumnFixed(index,prop),prop:prop,label:_vm.pivotTable.pivotReconstructedData.headers[prop],"min-width":_vm.getColumnWidth(prop),"sort-method":function(a,b){return _vm.sortMethod(a,b,prop)}},scopedSlots:_vm._u([{key:"header",fn:function(scope){return[_c("div","number"!=prop?[_c("div",{class:prop==_vm.activeColumn?"selected-row pivot-table-header":"pivot-table-header"},[_c("div",{staticClass:"header-dropdown-container pointer",staticStyle:{width:"100%"}},[_vm.isColumnFixed(index,prop)?_c("i",{staticClass:"fa fa-thumb-tack mL5",staticStyle:{opacity:"0.5","font-size":"10px","padding-right":"5px"},attrs:{id:"pin-"+prop}}):_vm._e(),_vm.showTitleEditBox==prop?_c("div",[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.titleEditModel,expression:"titleEditModel"},{name:"click-outside",rawName:"v-click-outside",value:_vm.headerLabelChanged,expression:"headerLabelChanged"}],staticClass:"el-input fc-input-full-border2",staticStyle:{border:"none"},domProps:{value:_vm.titleEditModel},on:{keydown:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.headerLabelChanged.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.titleEditModel=$event.target.value)}}})]):_c("span",{staticClass:"el-dropdown-tooltip",style:prop==_vm.activeColumn?"color:white !important":""},[_c("el-tooltip",{attrs:{placement:"top"}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("span",[_vm._v(_vm._s(scope.column.label))])]),_c("div",{staticClass:"header-label",attrs:{id:"column-"+prop}},[_c("span",[_vm._v(" "+_vm._s(scope.column.label)+" ")])])]),_c("el-tooltip",{attrs:{placement:"top"}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("span",[_vm._v(_vm._s(3==_vm.tableSort.order?"Ascending":"Descending"))])]),_c("i",{staticClass:"header-icon",class:[].concat(_vm.getSortIconClass(prop)),attrs:{id:"sort-"+prop},on:{click:function($event){return _vm.toggleSortColumn(prop)}}})])],1)]),_c("div",{staticClass:"header-icons"},[_vm.enableColumnFormat?_c("header-dropdown",{staticClass:"header-dropdown-icon",attrs:{contextmenu:_vm.getContextMenu(prop),prop:prop},on:{contextMenuSelectEvent:_vm.contextMenuSelectEvent}}):_vm._e()],1)])]:[_c("span",[_vm._v(" "+_vm._s(scope.column.label)+" ")])])]}},{key:"default",fn:function(scope){return[_c("table-cell-wrapper",{attrs:{textBackgroundStyle:_vm.getTextBackground(scope.row[prop].style,prop),prop:prop,pivotTable:_vm.pivotTable,visualConfig:_vm.getVisualConfig(prop),referenceValue:_vm.getReferenceValue(prop,scope.row),alignment:_vm.getTextAlignment(scope.row[prop]),value:scope.row[prop].formattedValue}})]}}],null,!0)})})),1)],1)])])]):_vm._e()])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),NewDateHelper=(__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(879288),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(865137),__webpack_require__(300268),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(670560),__webpack_require__(76265),__webpack_require__(425728),__webpack_require__(725906),__webpack_require__(105534)),NewDatePicker=__webpack_require__(900773),validation=__webpack_require__(990260),PivotDefaults=__webpack_require__(706214),utils_field=__webpack_require__(815872),HeaderDropdownvue_type_template_id_5f60168a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{ref:"graphicsContextMenu",staticClass:"pivot-header-dropdown"},[_c("el-dropdown",{ref:_vm.prop,attrs:{trigger:"click"},on:{command:_vm.handleClickAction}},[_c("div",{staticClass:"more-icon-header"},[_c("i",{staticClass:"el-icon-more",staticStyle:{"margin-left":"6px"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.menuOptions,(function(menu,index){return _c("el-dropdown-item",{key:index,attrs:{command:menu},on:{click:function($event){return _vm.handleClickAction(menu)}}},[_c("div",{staticClass:"dropdown-menu-text"},[_c("div",{staticStyle:{"padding-top":"2.5px","margin-right":"10px"}},[_c("InlineSvg",{attrs:{src:_vm.imgUrl[index],iconClass:"icon-sm flex icon"}})],1),_c("span",[_vm._v(" "+_vm._s(menu.isActive?menu.activeLabel:menu.label)+" ")])])])})),1)],1)],1)},HeaderDropdownvue_type_template_id_5f60168a_scoped_true_staticRenderFns=[],HeaderDropdownvue_type_script_lang_js={props:["contextmenu","prop","visible","isPinned"],data:function(){return{iconsSet1:["svgs/pivot/pin-notification","svgs/pivot/sort","svgs/pivot/auto-size-icon","svgs/pivot/cli-text-icon","svgs/pivot/Column","svgs/pivot/paint-icon","svgs/pivot/rename-icon"],iconsSet2:["svgs/pivot/pin-notification","svgs/pivot/sort","svgs/pivot/auto-size-icon","svgs/pivot/cli-text-icon","svgs/pivot/cell-visualixzation","svgs/pivot/Column","svgs/pivot/paint-icon","svgs/pivot/rename-icon"]}},computed:{menuOptions:function(){return this.contextmenu.menu},imgUrl:function(){return this.menuOptions.length<8?this.iconsSet1:this.iconsSet2}},methods:{handleClickAction:function(menu){this.$emit("contextMenuSelectEvent",{menu:menu,prop:this.prop})}}},pivot_HeaderDropdownvue_type_script_lang_js=HeaderDropdownvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(pivot_HeaderDropdownvue_type_script_lang_js,HeaderDropdownvue_type_template_id_5f60168a_scoped_true_render,HeaderDropdownvue_type_template_id_5f60168a_scoped_true_staticRenderFns,!1,null,"5f60168a",null)
/* harmony default export */,HeaderDropdown=component.exports,TableCellWrappervue_type_template_id_6366d793_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{style:_vm.getCellStyle()},["data-bar"==_vm.displayType?_c("data-bar-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,referenceValue:_vm.referenceValue,visualConfig:_vm.visualConfig,prop:_vm.prop,pivotTable:_vm.pivotTable}}):"compare"==_vm.displayType?_c("compare-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,referenceValue:_vm.referenceValue,visualConfig:_vm.visualConfig,prop:_vm.prop,pivotTable:_vm.pivotTable,alignment:_vm.alignment}}):"circle"==_vm.displayType?_c("circle-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,referenceValue:_vm.referenceValue,visualConfig:_vm.visualConfig,prop:_vm.prop,pivotTable:_vm.pivotTable}}):_c("text-view",{style:_vm.textBackgroundStyle,attrs:{value:_vm.value,prop:_vm.prop,pivotTable:_vm.pivotTable}})],1)},TableCellWrappervue_type_template_id_6366d793_staticRenderFns=[],TextViewvue_type_template_id_9b508df6_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["number"==_vm.prop?_c("div",[_vm._v(" "+_vm._s(_vm.value)+" ")]):"#VALUE!"==_vm.getFormattedCellValue(_vm.value,_vm.prop)?_c("div",[_c("el-popover",{attrs:{placement:"bottom",title:_vm.$t("pivot.formulaError"),width:"425",trigger:"hover",content:"Error calculating formula field. Please check the expression."}},[_c("div",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.getFormattedCellValue(_vm.value,_vm.prop))+" ")])])],1):_c("div",[_vm._v(" "+_vm._s(_vm.getFormattedCellValue(_vm.value,_vm.prop))+" ")])])},TextViewvue_type_template_id_9b508df6_staticRenderFns=[],BaseView=__webpack_require__(617338),TextViewvue_type_script_lang_js={extends:BaseView/* default */.Z},TableCell_TextViewvue_type_script_lang_js=TextViewvue_type_script_lang_js,TextView_component=(0,componentNormalizer/* default */.Z)(TableCell_TextViewvue_type_script_lang_js,TextViewvue_type_template_id_9b508df6_render,TextViewvue_type_template_id_9b508df6_staticRenderFns,!1,null,null,null)
/* harmony default export */,TextView=TextView_component.exports,DataBarView=__webpack_require__(959252),CompareView=__webpack_require__(51928),CircleView=__webpack_require__(971669),TableCellWrappervue_type_script_lang_js={props:["textBackgroundStyle","value","prop","pivotTable","alignment","visualConfig","referenceValue"],computed:{displayType:function(){return this.visualConfig.visualType?this.visualConfig.visualType:"text"}},components:{TextView:TextView,DataBarView:DataBarView/* default */.Z,CompareView:CompareView/* default */.Z,CircleView:CircleView/* default */.Z},methods:{getCellStyle:function(){var style={};return"data-bar"==this.displayType?{}:(style["display"]="flex","right"==this.alignment?style["justify-content"]="flex-end":"left"==this.alignment?style["justify-content"]="flex-start":style["justify-content"]="space-around",style["align-items"]="center",style)}}},pivot_TableCellWrappervue_type_script_lang_js=TableCellWrappervue_type_script_lang_js,TableCellWrapper_component=(0,componentNormalizer/* default */.Z)(pivot_TableCellWrappervue_type_script_lang_js,TableCellWrappervue_type_template_id_6366d793_render,TableCellWrappervue_type_template_id_6366d793_staticRenderFns,!1,null,null,null)
/* harmony default export */,TableCellWrapper=TableCellWrapper_component.exports,JumpToHelper=__webpack_require__(921466),router=__webpack_require__(329435),skeletonLoader=__webpack_require__(892249),PivotTablevue_type_script_lang_js={components:{NewDatePicker:NewDatePicker/* default */.Z,HeaderDropdown:HeaderDropdown,TableCellWrapper:TableCellWrapper,skeletonLoader:skeletonLoader/* default */.Z},watch:{showTimelineFilter:function(newVal){
//if picker enabled from edit pane
newVal&&this.dateOperator&&this.dateValue&&this.setDatePicker()},dateValue:function(val){val&&this.setDatePicker()},recordsCount:function(newCount){this.$emit("recordCountUpdated",newCount)},isNoConfig:{handler:function(newState){1==newState&&(this.tableProps=null)}},pivotTable:function(){var _this=this;this.constructTableData(this.pivotTable),this.setDatePicker(),this.$nextTick().then((function(){var _this$$refs;(_this.$emit("tableReady",!1),_this.pivotTableHeight=_this.calculateTableHeight(),_this.rerenderTable(),_this.$refs.pivotTable)&&(null===(_this$$refs=_this.$refs)||void 0===_this$$refs||null===(_this$$refs=_this$$refs.pivotTable)||void 0===_this$$refs||_this$$refs.doLayout());_this.tableSort=JSON.parse(JSON.stringify(_this.sortBy)),_this.currentSortAlias=_this.tableSort.alias}))}},mixins:[JumpToHelper/* default */.Z],props:{isInfoIconVisible:{type:Boolean,required:!1,default:!1},sortBy:{type:Object,default:null},showTimelineFilter:{type:Boolean,default:!1},activeColumn:{type:String,default:null},dateOperator:{type:Number,default:28},dateValue:{type:String,default:null},pivotTable:{type:Object,default:function(){return null}},theme:{type:Object,default:function(){return PivotDefaults/* defaultTheme */.uH}},columnFormatting:{type:Object,default:function(){return{}}},isNoConfig:{default:!1},spinnerStat:{type:Object},tableFormatting:{type:Object,default:function(){return{isStickyColumns:!1,noWrap:!1};
//setting no wrap property is like auto width for ALL columns ,styles are set to whitespace no wrap and no width property is set
}},loading:{type:Boolean,default:!0},dashbord:{type:Boolean},config:{type:Object},widgetDatePicker:{type:Object},enableColumnFormat:{type:Boolean},isMobileDashboard:{type:Boolean},fetchPivotDataError:{type:Boolean},diable_userfilter_drillown:{type:Boolean}},mounted:function(){var _this2=this;this.$nextTick().then((function(){var _this2$$refs;_this2.pivotTableHeight=_this2.calculateTableHeight(),_this2.setDatePicker(),null===(_this2$$refs=_this2.$refs)||void 0===_this2$$refs||null===(_this2$$refs=_this2$$refs.pivotTable)||void 0===_this2$$refs||_this2$$refs.doLayout()}))},data:function(){return{stickyColumnWidths:[],
//rendered row widths in pixel
dragging:!1,renameModel:null,datePickerObj:null,pickerCompKey:0,tableData:[],tableHeaders:[],tableProps:[],showSortIcon:"",borderColor:"",hoverColor:"",showTable:!0,tableSort:{},editTitleProp:null,currentSortAlias:null,pivotTableHeight:700,showTitleEditBox:null,headerDBClick:0,dBClickCounter:null,dBTimerObj:null,titleEditModel:"",contextMenu:{menu:[{label:"Pin",activeLabel:"Unpin",isActive:!1},{label:"Sort"},{label:"Auto size"},{label:"Text wrap",activeLabel:"Clip text",isActive:!0},{label:"Cell visualization"},{label:"Column formatting"},{label:"Conditional formatting"},{label:"Rename"}]},timeAggregation:PivotDefaults/* timeAggregation */.tP}},computed:{noDataState:function(){var _this$pivotTable;return!(0!=(null===(_this$pivotTable=this.pivotTable)||void 0===_this$pivotTable||null===(_this$pivotTable=_this$pivotTable.pivotReconstructedData)||void 0===_this$pivotTable?void 0:_this$pivotTable.records.length))},isBuilderLoaded:function(){return this.$route.path.includes("pivotbuilder")?this.loading&&this.spinnerStat.dimensions&&this.spinnerStat.measures:this.loading},isDimensionsAndMeasuresLoaded:function(){return this.$route.path.includes("pivotbuilder")?!(this.spinnerStat.dimensions&&this.spinnerStat.measures):this.loading},recordsCount:function(){var _this$pivotTable2;return null===(_this$pivotTable2=this.pivotTable)||void 0===_this$pivotTable2||null===(_this$pivotTable2=_this$pivotTable2.pivotReconstructedData)||void 0===_this$pivotTable2?void 0:_this$pivotTable2.records.length},pivotThemeName:function(){var _this$theme,_this$theme2;return null!==(_this$theme=this.theme)&&void 0!==_this$theme&&_this$theme.class?null===(_this$theme2=this.theme)||void 0===_this$theme2?void 0:_this$theme2.class:"default"},isBuilder:function(){return this.enableColumnFormat},isPivot:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab,_findRouteForTab2,_findRouteForTab3,_ref=null!==(_findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW))&&void 0!==_findRouteForTab?_findRouteForTab:{},path=_ref.path;if(this.$route.path.includes(path))return!0;var route_obj=null!==(_findRouteForTab2=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_FORM))&&void 0!==_findRouteForTab2?_findRouteForTab2:{};return!!this.$route.path.includes(route_obj.path)||(route_obj=null!==(_findRouteForTab3=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW_MANAGER))&&void 0!==_findRouteForTab3?_findRouteForTab3:{},!!this.$route.path.includes(route_obj.path))}return this.$route.path.includes("em/pivot")},pivotTableGrid:function(){var _this$theme3,_this$theme4;return null!==(_this$theme3=this.theme)&&void 0!==_this$theme3&&_this$theme3.grid?null===(_this$theme4=this.theme)||void 0===_this$theme4?void 0:_this$theme4.grid:"both"},pivotTableStripe:function(){var _this$theme5,_this$theme6;return!(null===(_this$theme5=this.theme)||void 0===_this$theme5||!_this$theme5.stripe)&&(null===(_this$theme6=this.theme)||void 0===_this$theme6?void 0:_this$theme6.stripe)},pivotFontSize:function(){var _this$theme7,_this$theme8;return null!==(_this$theme7=this.theme)&&void 0!==_this$theme7&&_this$theme7.fontSize?null===(_this$theme8=this.theme)||void 0===_this$theme8?void 0:_this$theme8.fontSize:"medium"},pivotShowRowNumber:function(){var _this$theme9;return!(null===(_this$theme9=this.theme)||void 0===_this$theme9||!_this$theme9.number)&&this.theme.number},pivotFilteredColumnProps:function(){var _this3=this;if(!this.columnFormatting||!this.tableProps)return this.tableProps;var props=this.tableProps.filter((function(prop){var _this3$columnFormatti;return!(null!==(_this3$columnFormatti=_this3.columnFormatting[prop])&&void 0!==_this3$columnFormatti&&_this3$columnFormatti.hideColumn)}));return props},orderedPivotRecords:function(){var _this$sortBy,sort_alias=null===(_this$sortBy=this.sortBy)||void 0===_this$sortBy?void 0:_this$sortBy.alias,sort_order=this.sortBy.order;if(!(0,validation/* isEmpty */.xb)(sort_alias)&&!(0,validation/* isEmpty */.xb)(this.pivotTable.pivotReconstructedData.records)&&this.pivotTable.pivotReconstructedData.records.length>1){var self=this,field=this.pivotTable.pivotAliasVsField[sort_alias];!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isLookupField */.Qf)(field)&&this.pivotTable.pivotReconstructedData.records.sort((function(objA,objB){return 3==sort_order?self.sortMethod(objA,objB,sort_alias):self.sortMethod(objB,objA,sort_alias)}))}return this.pivotTable.pivotReconstructedData.records}},methods:{isEmpty:validation/* isEmpty */.xb,outsideClick:function(){this.$emit("activeColumnChanged",null)},enableTitleEdit:function(column){
// this.showTitleEditBox = column.property
// if (this.showTitleEditBox === column.property) return
// if (this.dBTimerObj) {
//   clearTimeout(this.dBTimerObj)
//   this.dBClickCounter = 2
//   this.dBTimerObj = null
// } else {
//   this.dBClickCounter = 1
//   this.dBTimerObj = setTimeout(() => {
//     this.showTitleEditBox = null
//     this.dBClickCounter = 0
//     this.dBTimerObj = null
//   }, 200)
// }
// if (this.dBClickCounter == 2) {
//   this.dBClickCounter = 0
//   this.showTitleEditBox = column.property
//   this.titleEditModel = column.label
this.$emit("activeColumnChanged",column.property);
// }
},headerLabelChanged:function(){this.$emit("headerLabelChanged",{label:this.titleEditModel,prop:this.showTitleEditBox}),this.$emit("activeColumnChanged",null),this.showTitleEditBox=null,this.titleEditModel=""},getFormattedCellValue:function(value,prop){if(prop.startsWith("number"))return value;if(prop.startsWith("formula")||(0,validation/* isEmpty */.xb)(field))return value||"--";var _ref2=this.pivotTable||{},dataAlias=_ref2.dataAlias,rowAlias=_ref2.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;if((0,validation/* isEmpty */.xb)(value))return"0";if((0,utils_field/* isIdField */.sh)(field)&&prop.startsWith("row"))return"#"+value;if((0,utils_field/* isDateTimeField */.K)(field)||(0,utils_field/* isDateField */.y2)(field)){var _this$pivotTable3,timeAggr,aggr=0;return null===(_this$pivotTable3=this.pivotTable)||void 0===_this$pivotTable3||null===(_this$pivotTable3=_this$pivotTable3.rows)||void 0===_this$pivotTable3||_this$pivotTable3.forEach((function(e){e.alias===prop&&(aggr=e.field.aggr>0?e.field.aggr:0)})),this.timeAggregation.forEach((function(obj){obj.value===aggr&&(timeAggr=obj.enumValue)})),this.formatDate(value,timeAggr)}return value},formatDate:function(date,period){var dateFormat=this.getDateFormat(period);return this.$options.filters.toDateFormat(new Date(date),dateFormat.tooltip)},checkNumberField:function(prop){var _ref3=this.pivotTable||{},dataAlias=_ref3.dataAlias,rowAlias=_ref3.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isNumberField */.Z2)(field)||(0,utils_field/* isDecimalField */.No)(field)||(0,utils_field/* isIdField */.sh)(field))},sortMethod:function(obj1,obj2,column){var at=obj1[column].value,bt=obj2[column].value,field=this.pivotTable.pivotAliasVsField[column];return!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isLookupField */.Qf)(field)&&"number"==typeof obj1[column].value&&"string"==typeof obj1[column].formattedValue&&(at=obj1[column].formattedValue,bt=obj2[column].formattedValue),"string"==typeof at?at.localeCompare(bt):null==at?1:null==bt||at>bt?-1:1},handleDrillDown:function(rows,column){var _rowAliases,_this4=this,filters={},pattern="",count=0,global_pattern="",glocalCriteria=this.pivotTable.criteria;if(this.pivotTable&&this.pivotTable.criteria){global_pattern=glocalCriteria.pattern;var result=this.criteriaToSearchQuery(glocalCriteria,count,filters),globalCriteriaQuery=result[0];global_pattern=result[1],globalCriteriaQuery&&(count=Object.keys(globalCriteriaQuery).length),globalCriteriaQuery&&(filters=(0,objectSpread2/* default */.Z)({},globalCriteriaQuery))}
// data criteria search query
var data_pattern="";if(column.property.startsWith("data")){var dataCriteria=this.getDataCriteria(column.property);if(dataCriteria){data_pattern=dataCriteria.pattern;var _result=this.criteriaToSearchQuery(dataCriteria,count,filters),dataCriteriaQuery=_result[0];data_pattern=_result[1],filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),dataCriteriaQuery),count=Object.keys(filters).length}}
// timefilter search query
var time_filter_pattern="";if(!this.diable_userfilter_drillown&&this.pivotTable.pivotDrillDownFields["timeFilter"]){var timefilterQuery={},timefilterField=this.pivotTable.pivotDrillDownFields["timeFilter"],fieldName=this.generateUniqueFieldName(filters,timefilterField.name);timefilterQuery[fieldName]={operatorId:this.pivotTable.pivotDrillDownOperators["timeFilter"],value:["".concat(this.datePickerObj.value[0]),"".concat(this.datePickerObj.value[1])],id:++count},time_filter_pattern="(".concat(count,")"),filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),timefilterQuery),count=Object.keys(filters).length}var rowVsRowAggr=null;try{var _this$pivotTable4;rowVsRowAggr=null===this||void 0===this||null===(_this$pivotTable4=this.pivotTable)||void 0===_this$pivotTable4||null===(_this$pivotTable4=_this$pivotTable4.rows)||void 0===_this$pivotTable4?void 0:_this$pivotTable4.reduce((function(map,obj){return map[obj.alias]=obj.selectedTimeAggr,map}),{})}catch(e){}
// row search query
var _this$pivotTable5,row_pattern="",rowCriteriaQuery={},rowAliases=Object.keys(rows);if((null===(_rowAliases=rowAliases)||void 0===_rowAliases?void 0:_rowAliases.length)>0){row_pattern="(";var filtersClone=(0,objectSpread2/* default */.Z)({},filters);rowAliases=rowAliases.filter((function(row){return row.startsWith("row")})),rowAliases.forEach((function(row){var facilioField=_this4.pivotTable.pivotAliasVsField[row];if((0,validation/* isEmpty */.xb)(facilioField)||"SITE_ID"!=facilioField.columnName||"BaseSpace"!=facilioField.tableName){if(_this4.isDrillDownFieldValid(row)&&rows[row].value){var row_field=_this4.pivotTable.pivotDrillDownFields[row],_fieldName=_this4.generateUniqueFieldName(filtersClone,row_field.name),rowValue=_this4.getRowValue(row,rows[row].value),dateObj={};if(("DATE_TIME"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum||"DATE"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum)&&!(0,validation/* isEmpty */.xb)(rowVsRowAggr[row])&&rowVsRowAggr[row]>0){if(dateObj=NewDateHelper/* default */.Z.getDatePickerObjectFromDateAggregation(rowVsRowAggr[row],[rowValue]),!(0,validation/* isEmpty */.xb)(dateObj)){var _queryObj={operatorId:_this4.pivotTable.pivotDrillDownOperators[row],value:_this4.getValueArray(dateObj.value),id:++count};rowCriteriaQuery[_fieldName]=_queryObj,filtersClone[_fieldName]=_queryObj}}else{var _queryObj2={operatorId:"DATE_TIME"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum||"DATE"===_this4.pivotTable.pivotDrillDownFields[row].dataTypeEnum?16:_this4.pivotTable.pivotDrillDownOperators[row],value:"STRING"===row_field.dataTypeEnum?[rowValue]:_this4.getValueArray(rowValue),id:++count};rowCriteriaQuery[_fieldName]=_queryObj2,filtersClone[_fieldName]=_queryObj2}row_pattern="("==row_pattern?"".concat(row_pattern," ").concat(count):"".concat(row_pattern,"  and ").concat(count)}}else{var queryObj={operatorId:36,value:_this4.getValueArray(rows[row].value),id:++count};rowCriteriaQuery["siteId"]=queryObj,filtersClone["siteId"]=queryObj,row_pattern="("==row_pattern?"".concat(row_pattern," ").concat(count):"".concat(row_pattern,"  and ").concat(count)}})),row_pattern+=")",filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},filters),rowCriteriaQuery)}if(pattern="(",""!==global_pattern&&(pattern="".concat(pattern," ").concat(global_pattern," and")),""!==data_pattern&&(pattern="".concat(pattern," ").concat(data_pattern," and")),""!==time_filter_pattern&&(pattern="".concat(pattern," ").concat(time_filter_pattern," and")),""!==row_pattern&&(pattern="".concat(pattern," ").concat(row_pattern,")")),filters["drillDownPattern"]=pattern,null!==this&&void 0!==this&&this.$mobile){if(null!==(_this$pivotTable5=this.pivotTable)&&void 0!==_this$pivotTable5&&_this$pivotTable5.moduleName){var drillDowndata={moduleName:this.pivotTable.moduleName,viewName:"all",viewDisplayName:"All",type:"view",query:{filter:this.$helpers.formatFilter(filters)}};this.$helpers.sendToMobile(drillDowndata)}}else this.jumpToViewList(filters,this.pivotTable.moduleName,!0)},isDrillDownFieldValid:function(alias){var field=this.pivotTable.pivotDrillDownFields[alias],facilioField=this.pivotTable.pivotAliasVsField[alias],pivotExtendedModuleIds=this.pivotTable.pivotExtendedModuleIds;return!(!facilioField||!pivotExtendedModuleIds.includes(facilioField.moduleId))||!!(field&&(0,utils_field/* isLookupField */.Qf)(field)&&facilioField.mainField)},getValueArray:function(value){return value?"object"!=(0,esm_typeof/* default */.Z)(value)?"".concat(value).split(","):value.map((function(val){return"".concat(val)})):null},getRowValue:function(alias,value){var facilioField=this.pivotTable.pivotAliasVsField[alias],lookupField=this.pivotTable.pivotDrillDownFields[alias];return(0,utils_field/* isLookupField */.Qf)(lookupField)&&!(0,utils_field/* isLookupField */.Qf)(facilioField)?this.pivotTable.pivotLookupMap[alias][value]:value},criteriaToSearchQuery:function(criteria,count,filters){var pattern,_this5=this,searchQuery={},filtersClone=(0,objectSpread2/* default */.Z)({},filters);if(null!==criteria&&void 0!==criteria&&criteria.conditions){var conditionKeys=Object.keys(criteria.conditions);pattern=criteria.pattern,conditionKeys.forEach((function(key,index){var condition=criteria.conditions[key],newFieldName=_this5.getQueryFieldName(condition.fieldName),fieldName=_this5.generateUniqueFieldName(filtersClone,newFieldName),queryObj={operatorId:condition.operatorId,value:_this5.getValueArray(condition.value),id:++count};searchQuery[fieldName]=queryObj,filtersClone[fieldName]=queryObj,pattern=pattern.replace(index+1,count)}))}return[searchQuery,pattern]},getQueryFieldName:function(fieldName){var fieldNameArray=fieldName.split(".");return fieldNameArray.length>1?fieldNameArray[fieldNameArray.length-1]:fieldName},generateUniqueFieldName:function(filters,fieldName){if(filters&&!filters[fieldName])return fieldName;var count=1;while(filters[fieldName])fieldName="".concat(fieldName,"----").concat(count);return fieldName},getDataCriteria:function(alias){var _this$pivotTable6,criteria;if(null!==(_this$pivotTable6=this.pivotTable)&&void 0!==_this$pivotTable6&&_this$pivotTable6.data)return this.pivotTable.data.forEach((function(data){data.alias==alias&&(criteria=data.criteria)})),criteria},toggleSortColumn:function(alias){if(
//if clicked col already sort col , flip asc/desc 3/2 only
this.tableSort={limit:this.tableSort.limit,order:3==this.tableSort.order?2:3,alias:alias},!this.isBuilder){var sortOrder=3==this.tableSort.order?"ascending":"descending";return this.currentSortAlias=alias,void this.$refs.pivotTable.sort(alias,sortOrder)}this.$emit("sortChanged",this.tableSort)},constructTableData:function(data){var _this$tableProps,_this$tableProps2;this.tableData=[],this.tableProps=[],this.tableHeaders=[],data=JSON.parse(JSON.stringify(data)),this.tableData=data.pivotReconstructedData,this.pivotShowRowNumber&&this.tableProps.push("number"),(_this$tableProps=this.tableProps).push.apply(_this$tableProps,(0,toConsumableArray/* default */.Z)(data.rowHeaders));var valueProps=data.values.map((function(v){return v.alias}));(_this$tableProps2=this.tableProps).push.apply(_this$tableProps2,(0,toConsumableArray/* default */.Z)(valueProps)),this.tableHeaders=this.tableProps.map((function(prop){return data.pivotReconstructedData.headers[prop]}))},getTextAlignment:function(scope){var _scope$style;return null!==scope&&void 0!==scope&&null!==(_scope$style=scope.style)&&void 0!==_scope$style&&_scope$style.textAlign?scope.style.textAlign:"left"},getVisualConfig:function(prop){if(prop.startsWith("data")){var _this$pivotTable7,data=null===(_this$pivotTable7=this.pivotTable)||void 0===_this$pivotTable7||null===(_this$pivotTable7=_this$pivotTable7.values)||void 0===_this$pivotTable7?void 0:_this$pivotTable7.find((function(data){return data.alias==prop}));if(null!==data&&void 0!==data&&data.moduleMeasure.visualConfig)return data.moduleMeasure.visualConfig}else{var _this$pivotTable8,formula=null===(_this$pivotTable8=this.pivotTable)||void 0===_this$pivotTable8||null===(_this$pivotTable8=_this$pivotTable8.values)||void 0===_this$pivotTable8?void 0:_this$pivotTable8.find((function(formula){return formula.alias==prop}));if(null!==formula&&void 0!==formula&&formula.customMeasure.visualConfig)return formula.customMeasure.visualConfig}return{}},getReferenceValue:function(prop,row){var visualConfig=this.getVisualConfig(prop),referenceAlias=visualConfig.referenceAlias;return row[referenceAlias]?row[referenceAlias].formattedValue:null},getSortIconClass:function(alias){var _this$tableSort,_this$tableSort2,_this$tableSort3,elIconclass=2===(null===(_this$tableSort=this.tableSort)||void 0===_this$tableSort?void 0:_this$tableSort.order)?["el-icon-bottom"]:["el-icon-top"];(null===(_this$tableSort2=this.tableSort)||void 0===_this$tableSort2?void 0:_this$tableSort2.alias)===alias&&(elIconclass=3===(null===(_this$tableSort3=this.tableSort)||void 0===_this$tableSort3?void 0:_this$tableSort3.order)?["el-icon-bottom"]:["el-icon-top"]);return elIconclass.push("sort-column"),this.currentSortAlias==alias&&elIconclass.push("current-sort-column"),elIconclass},getColumnWidth:function(prop){var _this$columnFormattin;return prop.startsWith("number")?50:null!==(_this$columnFormattin=this.columnFormatting[prop])&&void 0!==_this$columnFormattin&&_this$columnFormattin.autoWidth?this.getTextWidth(this.pivotTable.pivotReconstructedData.headers[prop])+25:this.columnFormatting[prop].width},dateChanged:function(dateObj){this.datePickerObj=dateObj,this.$emit("pickerChanged",dateObj)},setDatePicker:function(){this.showTimelineFilter&&(this.datePickerObj=NewDateHelper/* default */.Z.getDatePickerObject(this.dateOperator,this.dateValue),this.pickerCompKey++)},contextMenuSelectEvent:function(_ref4){var menu=_ref4.menu,prop=_ref4.prop;this.contextMenu.showContextMenu=!1,"Pin"==menu.label?this.$emit("columnPinningEvent",{prop:prop,value:!0}):"Unpin"==menu.label?this.$emit("columnPinningEvent",{prop:prop,value:!1}):"Sort"==menu.label?this.toggleSortColumn(prop):"Rename"==menu.label?(this.showTitleEditBox=prop,this.titleEditModel=this.pivotTable.pivotReconstructedData.headers[prop]):"Auto size"==menu.label?this.textAutoSize(prop):"Text wrap"==menu.label&&menu.isActive?this.$emit("columnTextWarpEvent",{prop:prop,value:!0}):"Text wrap"!=menu.label||menu.isActive?"Column formatting"==menu.label?this.$emit("openColumnFormatDialog",prop):"Conditional formatting"==menu.label?this.$emit("openConditionalFormatDialog",prop):"Cell visualization"==menu.label&&this.$emit("openCellVisualizationDialog",prop):this.$emit("columnTextWarpEvent",{prop:prop,value:!1})},isColumnFixed:function(index,prop){var _this$columnFormattin2;
// if (index == 0 && prop) return true
// else if (this.pivotShowRowNumber && index == 1) return true
return!(null===(_this$columnFormattin2=this.columnFormatting[prop])||void 0===_this$columnFormattin2||!_this$columnFormattin2.isFixed||this.isMobileDashboard)},getContextMenu:function(prop){var contextMenu=JSON.parse(JSON.stringify(this.contextMenu)),columnFormat=JSON.parse(JSON.stringify(this.columnFormatting[prop]));columnFormat.isFixed?(contextMenu.menu[0].isActive=!0,contextMenu.menu[0].label="Unpin"):(contextMenu.menu[0].isActive=!1,contextMenu.menu[0].label="Pin"),columnFormat.textWarp?contextMenu.menu[3].isActive=!1:contextMenu.menu[3].isActive=!0;var includeCellVisual=!1;prop.startsWith("data")&&(includeCellVisual=!0);var pivotAliasVsField=this.pivotTable.pivotAliasVsField,field=pivotAliasVsField[prop];return((0,utils_field/* isDecimalField */.No)(field)||(0,utils_field/* isNumberField */.Z2)(field))&&(includeCellVisual=!0),includeCellVisual||(contextMenu.menu=contextMenu.menu.filter((function(menu){return"Cell visualization"!=menu.label}))),contextMenu},getTextWidth:function(word,fontSize){var text=document.createElement("span");document.body.appendChild(text),text.style.fontFamily="'Aktiv-Grotesk', Helvetica, Arial, sans-serif",text.style.fontSize=fontSize?fontSize+"px":"16px",text.style.height="auto",text.style.width="auto",text.style.position="absolute",text.style.whiteSpace="no-wrap",text.innerHTML=word;var width=Math.ceil(text.clientWidth);return document.body.removeChild(text),width+50},rerenderTable:function(){var _this6=this;
// force re-render table...
setTimeout((function(){_this6.showTable=!1,_this6.$nextTick((function(){return _this6.showTable=!0}))}),250)},pivotSpanMethod:function(){return{rowspan:0,colspan:this.tableHeaders.length}},textAutoSize:function(prop){var records=[];this.pivotTable.pivotReconstructedData.records.forEach((function(ob){records.push(ob[prop].formattedValue)}));var longestWord=records.reduce((function(a,b){return a&&b&&a.length>b.length?a:b})),width=this.getTextWidth(longestWord,13);width=width<500?width:500,this.$emit("columnResizeEvent",{width:width,column:prop})},calculateTableHeight:function(){var _this$config;if(this.isMobileDashboard)return null===(_this$config=this.config)||void 0===_this$config?void 0:_this$config.height;var table=this.$refs.pivotTableContainer;return!1===this.isMobileDashboard?table.clientHeight-55:table.clientHeight<600?600:table.clientHeight},cellStyle:function(data){var style={},columnFormat=JSON.parse(JSON.stringify(this.columnFormatting));if("LARGE"==this.theme.density?style["padding"]="15px 10px 15px 10px":"MEDIUM"==this.theme.density?style["padding"]="10px 10px 10px 10px":style["padding"]="5px 10px 5px 10px","number"!=data.column.property){var _data$row$data$column,columnStyle=null===(_data$row$data$column=data.row[data.column.property])||void 0===_data$row$data$column?void 0:_data$row$data$column.style;style["text-align"]=columnStyle.textAlign,columnFormat[data.column.property].textWarp?(style["white-space"]="nowrap",style["overflow"]="hidden"):style["white-space"]="inherit",
// conditional format
null!==columnStyle&&void 0!==columnStyle&&columnStyle.blink&&(style["animation"]="blinkerCell 1s linear infinite !important"),null!==columnStyle&&void 0!==columnStyle&&columnStyle.bgColor&&(style["backgroundColor"]="".concat(columnStyle.bgColor," !important")),null!==columnStyle&&void 0!==columnStyle&&columnStyle.textColor&&(style["color"]="".concat(columnStyle.textColor," !important"))}else style["text-align"]="left";return style},getTextBackground:function(cellStyleObj,prop){var _this7=this,style={};null!==cellStyleObj&&void 0!==cellStyleObj&&cellStyleObj.textBgColor&&(style["backgroundColor"]=cellStyleObj.textBgColor,style["padding"]="0px 10px",style["border-radius"]="5px"),null!==cellStyleObj&&void 0!==cellStyleObj&&cellStyleObj.textStyle&&cellStyleObj.textStyle.forEach((function(textStyle){var fontStyle=_this7.getFontStyle(textStyle);style=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},style),fontStyle)}));var visualConfig=this.getVisualConfig(prop);return"data-bar"!=(null===visualConfig||void 0===visualConfig?void 0:visualConfig.visualType)&&(style["width"]="fit-content"),style},getFontStyle:function(value){return"normal"==value?{}:"italic"==value?{"font-style":"italic"}:"bold"==value?{"font-weight":"bold"}:"strike-through"==value?{"text-decoration":"line-through"}:{}},columnResizeEvent:function(newWidth,oldWidth,column){var label=document.querySelectorAll("#column-".concat(column.property)),pin=document.querySelectorAll("#pin-".concat(column.property)),sort=document.querySelectorAll("#sort-".concat(column.property)),text=label.textContent,textWidth=this.getTextWidth(text,11);newWidth<textWidth+30?label.forEach((function(l){return l.style.display="none"})):newWidth>textWidth-50&&label.forEach((function(l){return l.style.display="inline"})),newWidth<84?sort.forEach((function(s){return s.style.display="none"})):sort.forEach((function(s){return s.style.display="inline"})),newWidth<50?pin.forEach((function(p){return p.style.display="none"})):pin.forEach((function(p){return p.style.display="inline"})),this.$emit("columnResizeEvent",{width:newWidth,column:column.property})},headerStyle:function(){var style={"text-align":"left","white-space":"nowrap"};return style}}},pivot_PivotTablevue_type_script_lang_js=PivotTablevue_type_script_lang_js,PivotTable_component=(0,componentNormalizer/* default */.Z)(pivot_PivotTablevue_type_script_lang_js,render,staticRenderFns,!1,null,"4d6ea38e",null)
/* harmony default export */,PivotTable=PivotTable_component.exports},
/***/617338:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return BaseView}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var render,staticRenderFns,objectSpread2=__webpack_require__(595082),PivotDefaults=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(879288),__webpack_require__(897389),__webpack_require__(300268),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(947522),__webpack_require__(706214)),vue_runtime_esm=__webpack_require__(720144),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),vuex_esm=__webpack_require__(420629),utils_field=__webpack_require__(815872),field_utils=__webpack_require__(455344),NewDataFormatHelper=__webpack_require__(804911),validation=__webpack_require__(990260),BaseViewvue_type_script_lang_js={props:["value","pivotTable","prop","visualConfig","referenceValue"],mixins:[NewDataFormatHelper/* default */.Z],computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{valueInPercentage:function(){var result=100;if("constant"==this.visualConfig.compareWith&&this.visualConfig.constantValue){var _this$value,currentValue="string"==typeof this.value?null===(_this$value=this.value)||void 0===_this$value?void 0:_this$value.replaceAll(",",""):this.value;void 0==currentValue||isNaN(currentValue)||(result=Number(currentValue)/Number(this.visualConfig.constantValue)*100)}else if("maxValue"==this.visualConfig.compareWith&&this.visualConfig.columnMaxValue)result=this.value/this.visualConfig.columnMaxValue*100;else if("referenceColumn"==this.visualConfig.compareWith&&this.referenceValue){var _this$value2,_this$referenceValue,_currentValue="string"==typeof this.value?null===(_this$value2=this.value)||void 0===_this$value2?void 0:_this$value2.replaceAll(",",""):this.value,referenceValue="string"==typeof this.referenceValue?null===(_this$referenceValue=this.referenceValue)||void 0===_this$referenceValue?void 0:_this$referenceValue.replaceAll(",",""):this.referenceValue;void 0!=_currentValue&&!isNaN(_currentValue)&&!isNaN(referenceValue)&&Number(referenceValue)>0?(result=Number(_currentValue)/Number(referenceValue)*100,result-=100):void 0!=_currentValue&&!isNaN(_currentValue)&&Number(_currentValue)<=0&&!isNaN(referenceValue)&&Number(referenceValue)<=0&&(result=0)}else this.referenceValue||(result=100*this.value,result-=100);return result=Number(result).toFixed(2),parseFloat(result)},absValueInPercentage:function(){var result=Math.abs(this.valueInPercentage);return result}}),data:function(){return{timeAggregation:PivotDefaults/* timeAggregation */.tP}},methods:{isEmpty:validation/* isEmpty */.xb,getFormattedCellValue:function(value,prop){if(prop.startsWith("number"))return value;if(prop.startsWith("formula"))return value||"--";var _ref=this.pivotTable||{},dataAlias=_ref.dataAlias,rowAlias=_ref.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;if(prop.startsWith("data")&&(0,validation/* isEmpty */.xb)(value)){var aggr=this.pivotTable.values.find((function(e){return e.alias===prop})).aggr;if(1===aggr)return 0}if((0,validation/* isEmpty */.xb)(value))return"--";if((0,utils_field/* isIdField */.sh)(field)&&prop.startsWith("row"))return"#"+value;if((0,utils_field/* isNumberField */.Z2)(field)&&"DURATION"==field.displayType){if((0,validation/* isEmpty */.xb)(value)||(value=value.replaceAll(",","")),!isNaN(value)&&(0,validation/* isEmpty */.xb)(field.unit)&&(0,validation/* isEmpty */.xb)(field.unitId)&&(0,validation/* isEmpty */.xb)(field.unitEnum))return this.$helpers.getFormattedDuration(Number(value),"seconds")}else{if((0,utils_field/* isDateTimeField */.K)(field)||(0,utils_field/* isDateField */.y2)(field)){var _this$pivotTable,_aggr=0;null===(_this$pivotTable=this.pivotTable)||void 0===_this$pivotTable||null===(_this$pivotTable=_this$pivotTable.rows)||void 0===_this$pivotTable||_this$pivotTable.forEach((function(e){e.alias===prop&&(_aggr=e.field.aggr>0?e.field.aggr:0,!(0,validation/* isEmpty */.xb)(e.selectedTimeAggr)&&_aggr<=0&&(_aggr=_aggr>0?_aggr:e.selectedTimeAggr))}));var timeAggr=this.timeAggregation.find((function(obj){return obj.value===_aggr}));return this.formatDate(value,timeAggr.enumValue)}if((0,field_utils/* isTimeField */.hO)(field))return(0,validation/* isEmpty */.xb)(value)||(value=value.replaceAll(",","")),"0"==value||null==value?"--":(0,field_utils/* getDisplayValue */.UZ)(field,value)}return value},formatDate:function(date,period){var _this$getCurrentUser,dateFormat=this.getDateFormat(period);return null===(null===(_this$getCurrentUser=this.getCurrentUser())||void 0===_this$getCurrentUser?void 0:_this$getCurrentUser.timezone)?moment_timezone_default()(new Date(date)).tz(vue_runtime_esm["default"].prototype.$timezone).format(dateFormat.tooltip):moment_timezone_default()(date.replace(/-/g,"/")).format(dateFormat.tooltip)},checkNumberField:function(prop){var _ref2=this.pivotTable||{},dataAlias=_ref2.dataAlias,rowAlias=_ref2.rowAlias,field=dataAlias[prop]?dataAlias[prop].field:rowAlias[prop].field;return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isNumberField */.Z2)(field)||(0,utils_field/* isDecimalField */.No)(field)||(0,utils_field/* isIdField */.sh)(field))}}},TableCell_BaseViewvue_type_script_lang_js=BaseViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(TableCell_BaseViewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,BaseView=component.exports;
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js
},
/***/971669:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CircleView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/TableCell/CircleView.vue?vue&type=template&id=803a298a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"circle-view-wrapper"},[_c("div",{staticClass:"circle-view-pivot"},[_c("svg",{attrs:{height:"25",width:"25",viewBox:"0 0 20 20"}},[_c("circle",{attrs:{r:"10",cx:"10",cy:"10",fill:_vm.fillColor,opacity:"0.1"}}),_c("circle",{attrs:{r:"5",cx:"10",cy:"10",fill:"transparent",stroke:_vm.fillColor,"stroke-width":"10","stroke-dasharray":_vm.svgDashArray,transform:"rotate(-90) translate(-20)"}})])]),_vm.showValue?_c("div",{staticClass:"circle-value-container"},[_vm._v(" "+_vm._s(_vm.value)+" ")]):_vm._e()])])},staticRenderFns=[],BaseView=__webpack_require__(617338),CircleViewvue_type_script_lang_js={computed:{fillColor:function(){return this.visualConfig.fillColor?this.visualConfig.fillColor:"red"},svgDashArray:function(){return"".concat(31.4*this.absValueInPercentage/100," 31.4")},showValue:function(){return this.visualConfig.showValue}},extends:BaseView/* default */.Z,methods:{format:function(){return this.value}}},TableCell_CircleViewvue_type_script_lang_js=CircleViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(TableCell_CircleViewvue_type_script_lang_js,render,staticRenderFns,!1,null,"803a298a",null)
/* harmony default export */,CircleView=component.exports},
/***/51928:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CompareView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/TableCell/CompareView.vue?vue&type=template&id=e6f58cd2
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"compare-view-wrapper"},[_c("el-row",{staticStyle:{display:"flex","min-width":"200px"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"compare-value-container"},[_vm._v(" "+_vm._s(_vm.value)+" ")])]),_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"icons-container mR5"},[_vm.valueInPercentage<0?_c("i",{staticClass:"el-icon-bottom",style:{color:_vm.downArrowColor}}):_c("i",{staticClass:"el-icon-top",style:{color:_vm.upArrowColor}})])]),_c("el-col",{attrs:{span:24}},[_c("div",{style:_vm.getCellStyle},[_c("span",[_vm._v(" "+_vm._s(_vm.absValueInPercentage+" %"))])])])],1)],1)])},staticRenderFns=[],BaseView=__webpack_require__(617338),CompareViewvue_type_script_lang_js={props:["visualConfig","referenceValue","alignment"],computed:{downArrowColor:function(){return this.visualConfig.downArrowColor?this.visualConfig.downArrowColor:"red"},upArrowColor:function(){return this.visualConfig.upArrowColor?this.visualConfig.upArrowColor:"green"},getCellStyle:function(){var style={display:"flex"};return"right"==this.alignment?style["justify-content"]="flex-end":"left"==this.alignment||"center"==this.alignment?style["justify-content"]="flex-start":style["justify-content"]="space-around",style["align-items"]="center",style}},extends:BaseView/* default */.Z},TableCell_CompareViewvue_type_script_lang_js=CompareViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(TableCell_CompareViewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CompareView=component.exports},
/***/959252:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DataBarView}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/TableCell/DataBarView.vue?vue&type=template&id=48b9a412&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"progress-bar-wrapper"},[_c("div",{staticClass:"progress-bar",style:{background:_vm.fillColor+"0f"}},[_c("div",{staticClass:"progress-bar-base",style:{width:_vm.absValueInPercentage+"%",opacity:1,background:_vm.fillColor}},[_vm.showValue?_c("div",{staticClass:"data-bar-value-container",style:{color:_vm.textColor}},[_vm._v(" "+_vm._s(_vm.value)+" ")]):_vm._e()])]),_vm._e()])])},staticRenderFns=[],BaseView=__webpack_require__(617338),DataBarViewvue_type_script_lang_js={computed:{showIcon:function(){return"maxValue"!=this.visualConfig.compareWith},fillColor:function(){return this.visualConfig.fillColor?this.visualConfig.fillColor:"green"},textColor:function(){return this.visualConfig.textColor?this.visualConfig.textColor:"black"},showValue:function(){return this.visualConfig.showValue}},extends:BaseView/* default */.Z},TableCell_DataBarViewvue_type_script_lang_js=DataBarViewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(TableCell_DataBarViewvue_type_script_lang_js,render,staticRenderFns,!1,null,"48b9a412",null)
/* harmony default export */,DataBarView=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/31910.js.map