"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[56803],{
/***/256803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PMCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/pm/create/PMCreation.vue?vue&type=template&id=3ccbcc84&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pm-creation-container"},[_c("div",{staticClass:"header"},[_c("div",{staticClass:"header-text"},[_vm._v(_vm._s(_vm.$t("maintenance.pm.new_pm")))]),_c("div",{staticClass:"stepper-container"},[_c("FormStepper",{attrs:{steps:_vm.steps,active:_vm.activePage},on:{onStepClick:_vm.redirectToStep}})],1),_c("el-button",{staticClass:"discard-button",on:{click:_vm.redirectToList}},[_vm._v(_vm._s(_vm.cancelButtonText))])],1),_c("div",{staticClass:"page-container"},[_c(_vm.activePage,{ref:"pm-creation-page",tag:"component",attrs:{pmProps:_vm.pmProps,isSaving:_vm.isSaving,disableButton:_vm.disableButton},on:{"update:isSaving":function($event){_vm.isSaving=$event},"update:is-saving":function($event){_vm.isSaving=$event},updateIsSaving:function(isSaving){return _vm.updateIsSaving(isSaving)},"update:disableButton":function($event){_vm.disableButton=$event},"update:disable-button":function($event){_vm.disableButton=$event}}}),_c("div",{staticClass:"footer-container mT25"},[_c("div",{staticClass:"actions-container"},[_vm.currentPageObject.cancelText?_c("el-button",{staticClass:"cancel-button",on:{click:_vm.onCancelClick}},[_c("i",{staticClass:"el-icon-arrow-left mR5"}),_vm._v(_vm._s(_vm.$t(_vm.currentPageObject.cancelText)))]):_vm._e(),_vm.currentPageObject.saveText?_c("el-button",{staticClass:"save-button",class:[_vm.disableButton&&"disabled-pm-save"],attrs:{loading:_vm.isSaving,disabled:_vm.disableButton},on:{click:_vm.onSuccessClick}},[_vm._v(_vm._s(_vm.$t(_vm.currentPageObject.saveText))),_c("i",{staticClass:"el-icon-arrow-right mL5"})]):_vm._e()],1)])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FormSteppervue_type_template_id_5b38f218_scoped_true_render=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(670560),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"steps-container"},_vm._l(_vm.steps,(function(step,index){return _c("div",{key:"step-"+index,class:["step",_vm.isSelectedStepPrevious(index)?"step--active":""]},[_c("div",{staticClass:"step-circle",class:_vm.isSelectedStep(index)?"selected-step-circle":"",on:{click:function($event){return _vm.redirectToStep(index,step)}}},[_vm.isSelectedStepPrevious(index)?_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}):_vm._e()],1),_c("div",{staticClass:"step-title",class:_vm.isSelectedStep(index)?"selected-step-title":""},[_vm._v(" "+_vm._s(step.displayName)+" ")])])})),0)}),FormSteppervue_type_template_id_5b38f218_scoped_true_staticRenderFns=[],FormSteppervue_type_script_lang_js=(__webpack_require__(339772),{props:["steps","active"],methods:{isSelectedStep:function(index){var _ref=this||{},active=_ref.active,steps=_ref.steps,currentSelectedIndex=(steps||[]).findIndex((function(step){return step.name===active}));return index<=currentSelectedIndex},isSelectedStepPrevious:function(index){var _ref2=this||{},active=_ref2.active,steps=_ref2.steps,currentSelectedIndex=(steps||[]).findIndex((function(step){return step.name===active}));return index<currentSelectedIndex},currentActiveStep:function(index){var _ref3=this||{},active=_ref3.active,steps=_ref3.steps,currentSelectedIndex=(steps||[]).findIndex((function(step){return step.name===active}));return index===currentSelectedIndex},redirectToStep:function(index,step){this.isSelectedStepPrevious(index)&&this.$emit("onStepClick",step)}}}),create_FormSteppervue_type_script_lang_js=FormSteppervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(create_FormSteppervue_type_script_lang_js,FormSteppervue_type_template_id_5b38f218_scoped_true_render,FormSteppervue_type_template_id_5b38f218_scoped_true_staticRenderFns,!1,null,"5b38f218",null)
/* harmony default export */,FormStepper=component.exports,validation=__webpack_require__(990260),api=__webpack_require__(32284),router=__webpack_require__(329435),PMCreationvue_type_script_lang_js={props:["isEdit","id"],components:{FormStepper:FormStepper,configuration:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(18461)]).then(__webpack_require__.bind(__webpack_require__,162875))},publish:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(84785)]).then(__webpack_require__.bind(__webpack_require__,584785))},planner:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(91853),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(59850),__webpack_require__.e(21472),__webpack_require__.e(71271),__webpack_require__.e(70334)]).then(__webpack_require__.bind(__webpack_require__,549793))}},created:function(){var _ref=this||{},isEdit=_ref.isEdit;isEdit&&this.deactivatePm()},data:function(){return{isSaving:!1,disableButton:!1}},watch:{activePage:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:(0,validation/* isEmpty */.xb)(newVal)||(_this.disableButton=!1);case 1:case"end":return _context.stop()}}),_callee)})))()},immediate:!0}},computed:{pmProps:function(){var id=this.$getProperty(this,"$route.query.id");return id=(0,validation/* isEmpty */.xb)(id)?null:parseInt(id),{id:id}},moduleName:function(){return"plannedmaintenance"},activePage:function(){var _ref2=this||{},$route=_ref2.$route,_ref3=$route||{},query=_ref3.query,_ref4=query||{},tab=_ref4.tab;return tab||"configuration"},currentPageObject:function(){var _ref5=this||{},activePage=_ref5.activePage,steps=_ref5.steps;return(steps||{}).find((function(page){return page.name===activePage}))},cancelButtonText:function(){var activePage=this.activePage;return"configuration"===activePage?this.$t("maintenance.pm.discard"):this.$t("maintenance.pm.exit")},steps:function(){return[{name:"configuration",displayName:"Configuration",saveText:"maintenance.pm.next"},{name:"planner",displayName:"Planner",saveText:"maintenance.pm.next",cancelText:"maintenance.wr_list.previous"},{name:"publish",displayName:"Publish",saveText:"maintenance.pm.publish",cancelText:"maintenance.wr_list.previous"}]}},methods:{redirectToStep:function(currentStep){var _ref6=currentStep||{},name=_ref6.name,query=this.$getProperty(this,"$route.query");this.$router.push({path:"",query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},query),{},{tab:name})})},deactivatePm:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref7,pmId,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref7=_this2||{},pmId=_ref7.id,_context2.next=3,api/* API */.bl.post("/v3/plannedmaintenance/deactivate",{pmId:pmId});case 3:_yield$API$post=_context2.sent,error=_yield$API$post.error,(0,validation/* isEmpty */.xb)(error)||_this2.$message.error(error.message||"Error Occured");case 6:case"end":return _context2.stop()}}),_callee2)})))()},redirectToList:function(){var viewname=this.viewname;if((0,router/* isWebTabsEnabled */.tj)()){var _ref8=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.LIST)||{},name=_ref8.name;name&&this.$router.push({name:name,params:{viewname:viewname},query:this.$route.query})}else this.$router.push({name:"pm-list",params:{viewname:viewname},query:this.$route.query})},onCancelClick:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var pageComponent,_ref9,onCancel;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(pageComponent=_this3.$refs["pm-creation-page"],(0,validation/* isEmpty */.xb)(pageComponent)){_context3.next=8;break}if(_this3.isSaving=!0,_ref9=pageComponent||{},onCancel=_ref9.onCancel,(0,validation/* isEmpty */.xb)(onCancel)){_context3.next=7;break}return _context3.next=7,pageComponent.onCancel();case 7:_this3.isSaving=!1;case 8:case"end":return _context3.stop()}}),_callee3)})))()},onSuccessClick:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var pageComponent,_ref10,onSave;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(pageComponent=_this4.$refs["pm-creation-page"],(0,validation/* isEmpty */.xb)(pageComponent)){_context4.next=6;break}
// this.isSaving = true
if(_ref10=pageComponent||{},onSave=_ref10.onSave,(0,validation/* isEmpty */.xb)(onSave)){_context4.next=6;break}return _context4.next=6,pageComponent.onSave();case 6:case"end":return _context4.stop()}}),_callee4)})))()},updateIsSaving:function(isSaving){this.isSaving=isSaving}}},create_PMCreationvue_type_script_lang_js=PMCreationvue_type_script_lang_js,PMCreation_component=(0,componentNormalizer/* default */.Z)(create_PMCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,"3ccbcc84",null)
/* harmony default export */,PMCreation=PMCreation_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/56803.js.map