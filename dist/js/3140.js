"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[3140],{
/***/646716:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FetchViewsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),FetchViewsMixinvue_type_script_lang_js={methods:{fetchView:function(moduleName){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,data,error,_ref,groupViews;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,params={moduleName:moduleName,groupType:1,viewType:1},_context.next=4,api/* API */.bl.get("/v2/views/viewList",params);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error){_context.next=10;break}return _ref=data||{},groupViews=_ref.groupViews,_context.abrupt("return",_this.getFirstView(groupViews));case 10:_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context["catch"](0),_context.abrupt("return","all");case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])})))()},getFirstView:function(groupViews){var _ref2=(groupViews||[]).find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref2.views,_this$$getProperty=this.$getProperty(views,"0",{}),name=_this$$getProperty.name;return name||"all"}}},base_FetchViewsMixinvue_type_script_lang_js=FetchViewsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_FetchViewsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FetchViewsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/416269:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AuditLog}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/AuditLog/AuditLog.vue?vue&type=template&id=995e3d84
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-table-expand-row fc-audit-log-page"},[_c("setup-header",{scopedSlots:_vm._u([{key:"heading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.setup.audit_logs"))+" ")]},proxy:!0},{key:"description",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.setup.audit_log_desc"))+" ")]},proxy:!0},{key:"filter",fn:function(){return[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"flex-middle"},[_c("div",[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.date_filter"))+" ")]),_c("el-select",{staticClass:"mR20 fc-input-full-border2",attrs:{placeholder:"Select time period",clearable:"",filterable:""},on:{change:function($event){return _vm.searchLoadData(!0)}},model:{value:_vm.dateFilterModel,callback:function($$v){_vm.dateFilterModel=$$v},expression:"dateFilterModel"}},_vm._l(_vm.selectFilter,(function(filter,f){return _c("el-option",{key:f,attrs:{label:filter.label,value:filter.value}})})),1)],1),"Custom"===_vm.dateFilterModel?_c("div",[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.custom"))+" ")]),_c("el-date-picker",{staticClass:"fc-input-full-border2 width250px",attrs:{type:"daterange",placeholder:"Select date and time","range-separator":"-","start-placeholder":"Start date","end-placeholder":"End date","value-format":"timestamp"},on:{change:function($event){return _vm.searchLoadData(!0)}},model:{value:_vm.datePicker,callback:function($$v){_vm.datePicker=$$v},expression:"datePicker"}})],1):_vm._e()])])]},proxy:!0},{key:"searchAndPagination",fn:function(){return[_c("div",{staticClass:"pT20 flex-middle"},[_vm.searchHide?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"pointer mR15 fc-portal-filter-border",attrs:{content:"Search"},on:{click:_vm.searchShowHide}},[_c("i",{staticClass:"el-icon-search fc-black-14 text-right fwBold"})]):_vm._e(),_vm.searchShow?_c("div",{staticClass:"relative mR15"},[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.querySearch,expression:"querySearch"}],ref:"querySearch",staticClass:"fc-input-full-border2 fc-log-search width250px",attrs:{placeholder:"Search subject"},domProps:{value:_vm.querySearch},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.searchLoadData(!0)},input:function($event){$event.target.composing||(_vm.querySearch=$event.target.value)}}}),_c("i",{staticClass:"el-icon-close fc-search-close fc-black-14 text-right fwBold",on:{click:_vm.searchClose}})]):_vm._e(),_c("pagination",{staticClass:"mR15",attrs:{total:_vm.auditCount,"current-page":_vm.auditPage},on:{pagechanged:_vm.setPage}}),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"pointer fwBold mR15 f16 fc-portal-filter-border ",attrs:{content:"Refresh"},on:{click:function($event){return _vm.searchLoadData(!0)}}},[_c("i",{staticClass:"el-icon-refresh fwBold f16"})]),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"filter-border fc-portal-filter-border mL0",class:{filterActive:_vm.showFilter},attrs:{content:"Advanced filters"},on:{click:_vm.showExtraFilter}},[_c("inline-svg",{staticClass:"pointer",attrs:{src:"svgs/dashboard/filter",iconClass:"icon icon-sm-md fc-fill-path-grey"}}),_c("div",{class:{"dot-active-pink":_vm.userData||_vm.recordData}})],1)],1)]},proxy:!0}])}),_vm.showFilter?[_c("div",{staticClass:"flex-middle pB20 fc-extra-filter-block"},[_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.performed_by"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{"reserve-keyword":"",filterable:"",clearable:"",remote:!0,placeholder:"Select performed by","remote-method":_vm.remoteSearchUser,loading:_vm.loading},on:{change:_vm.listLoading},model:{value:_vm.userData,callback:function($$v){_vm.userData=$$v},expression:"userData"}},_vm._l(_vm.userListData,(function(user,i){return _c("el-option",{key:i.id,attrs:{label:user.name,value:user.id.toString()}})})),1)],1),_c("div",{staticClass:"mL20"},[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.record_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Select entity",filterable:"",clearable:""},on:{change:_vm.listLoading},model:{value:_vm.recordData,callback:function($$v){_vm.recordData=$$v},expression:"recordData"}},_vm._l(_vm.recordTypeList,(function(record,inx){return _c("el-option",{key:inx,attrs:{label:record.name,value:record.id.toString()}})})),1)],1),_vm.userData||_vm.recordData?_c("div",{staticClass:"fc-blue-txt2-14 pL20 pointer pT20",on:{click:_vm.clearFiltersAll}},[_vm._v(" "+_vm._s(_vm.$t("common._common.clear_all_filters"))+" ")]):_vm._e()])]:_vm._e(),_c("div",{staticClass:"p15 fc-setup-table-layout-scroll fc-page-scroll-top"},[_vm.loading?_c("setup-loader",{scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})]},proxy:!0}],null,!1,3199698086)}):_vm._e(),_vm.$validation.isEmpty(_vm.auditLogList)&&!_vm.loading?_c("setup-empty",{scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("common.products.no_audit_available"))+" ")]},proxy:!0},{key:"emptyDescription",fn:function(){},proxy:!0}],null,!1,1319158457)}):_c("div",{staticClass:"d-flex flex-col-reverse"},_vm._l(_vm.sortValue,(function(time,iex){return _c("div",{key:iex},[_vm.$validation.isEmpty(_vm.resultMap[time])?_vm._e():_c("div",[_c("div",[_vm.$validation.isEmpty(_vm.resultMap[time])?_vm._e():_c("div",{staticClass:"fc-setup-group-header header-lavender"},[_c("div",{staticClass:"fc-black-14 fwBold text-left flex-middle"},[_c("div",[_vm._v(" "+_vm._s(_vm.getFormatter(time))+" ")])])]),_c("div",{staticClass:"mB20 fc-audit-log-table"},[_vm.$validation.isEmpty(_vm.resultMap[time])?_c("div"):_vm._e(),_c("el-header",{staticClass:"fc-table-header-sticky",attrs:{height:"40"}},[_c("el-row",[_c("el-col",{staticClass:"pL10",attrs:{span:3}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.time"))+" ")]),_c("el-col",{staticClass:"pL5",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.performed_by"))+" ")]),_c("el-col",{staticClass:"pL10",attrs:{span:8}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.subject"))+" ")]),_c("el-col",{staticClass:"pL25",staticStyle:{width:"18%"},attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.app_id"))+" ")]),_c("el-col",{attrs:{span:3}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.record_type"))+" ")])],1)],1),_vm.$validation.isEmpty(_vm.resultMap[time])?_vm._e():_c("el-table",{ref:"auditLogTable",refInFor:!0,staticClass:"fc-setup-table fc-setup-table-header-hide",staticStyle:{width:"100%"},attrs:{data:_vm.resultMap[time],"cell-style":{padding:"12px 30px"},height:"auto",fit:!0,"row-key":function(row){return row.id},"expand-row-keys":_vm.expandRowKeys},on:{"row-click":function(){var args=[],len=arguments.length;while(len--)args[len]=arguments[len];return _vm.tableRowExpand.apply(void 0,[iex].concat(args))},"expand-change":_vm.handleExpandChange}},[_c("el-table-column",{attrs:{label:"",prop:"time",width:"120"},scopedSlots:_vm._u([{key:"default",fn:function(audit){return[_vm._v(" "+_vm._s(_vm.getFormatTime(audit.row.time))+" ")]}}],null,!0)}),_c("el-table-column",{attrs:{prop:"performed",width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(audit){return[_c("div",{staticClass:"bold leading-none"},[_vm._v(" "+_vm._s(_vm.$getProperty(audit.row,"performedBy.name")?_vm.$getProperty(audit.row,"performedBy.name"):"---")+" ")])]}}],null,!0)}),_c("el-table-column",{attrs:{prop:"desc",width:"330"},scopedSlots:_vm._u([{key:"default",fn:function(audit){return[_c("FHtml",{attrs:{content:_vm.replace(audit.row.subject,audit.row.linkConfig)}})]}}],null,!0)}),_c("el-table-column",{attrs:{prop:"appId",width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(audit){return[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"nowrap"},[_vm._v(" "+_vm._s(_vm.appHash[audit.row.appId])+" ")])])]}}],null,!0)}),_c("el-table-column",{attrs:{prop:"recordType",width:"140"},scopedSlots:_vm._u([{key:"default",fn:function(audit){return[_c("div",{staticClass:"flex-middle"},[_c("div",[1===_vm.$getProperty(audit,"row.recordType")?_c("div",{staticClass:"nowrap width50px"},[_vm._v(" "+_vm._s(_vm.$t("setup.auditLog.module"))+" ")]):2===_vm.$getProperty(audit,"row.recordType")?_c("div",{staticClass:"nowrap width50px"},[_vm._v(" "+_vm._s(_vm.$t("setup.auditLog.setup"))+" ")]):_c("div",[_vm._v("---")])]),_c("div",[_c("div",{staticClass:"pL10"},[1===_vm.$getProperty(audit,"row.sourceType")?_c("div",[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                                arrow: true,\n                                arrowType: 'round',\n                                animation: 'fade',\n                              }"}],staticClass:"flex-middle",attrs:{content:"Web"}},[_c("inline-svg",{attrs:{src:"svgs/web-icon",iconClass:"icon text-center icon-lg vertical-baseline mL5 fc-black-path"}})],1)]):2===_vm.$getProperty(audit,"row.sourceType")?_c("div",[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                                arrow: true,\n                                arrowType: 'round',\n                                animation: 'fade',\n                              }"}],staticClass:"flex-middle",attrs:{content:"Android Mobile"}},[_c("inline-svg",{attrs:{src:"svgs/mobile-blue",iconClass:"icon text-center icon-lg vertical-baseline fill-black1 mL5 fc-black-path"}})],1)]):3===_vm.$getProperty(audit,"row.sourceType")?_c("div",[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                                arrow: true,\n                                arrowType: 'round',\n                                animation: 'fade',\n                              }"}],staticClass:"flex-middle",attrs:{content:"Ios Mobile"}},[_c("inline-svg",{attrs:{src:"svgs/mobile-blue",iconClass:"icon text-center icon-lg vertical-baseline fill-black1 mL5 fc-black-path"}})],1)]):4===_vm.$getProperty(audit,"row.sourceType")?_c("div",[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n                                arrow: true,\n                                arrowType: 'round',\n                                animation: 'fade',\n                              }"}],staticClass:"flex-middle",attrs:{content:"API"}},[_c("inline-svg",{attrs:{src:"svgs/api",iconClass:"icon text-center icon-lg vertical-baseline fill-black1 mL5 fill-api-red"}})],1)]):_c("div")])])])]}}],null,!0)}),_c("el-table-column",{staticClass:"fc-expand-row",attrs:{type:"expand"},scopedSlots:_vm._u([{key:"default",fn:function(audit){return[_c("el-row",[_c("el-col",{staticClass:"bold",attrs:{span:3}},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.description"))+" ")]),_c("el-col",{attrs:{span:21}},[_vm._v(" "+_vm._s(audit.row.description?audit.row.description:"---")+" ")])],1)]}}],null,!0)})],1)],1)])])])})),0)],1),_c("SetupScrollToTop")],2)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),toConsumableArray=__webpack_require__(488478),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(450886),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(538077),__webpack_require__(169358),__webpack_require__(186466),__webpack_require__(865137),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(689730),__webpack_require__(322462),__webpack_require__(434284),__webpack_require__(32284)),validation=__webpack_require__(990260),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),SetupLoader=__webpack_require__(233432),SetupEmptyState=__webpack_require__(622957),SetupHeaderTabs=__webpack_require__(291612),AuditLogPagination=__webpack_require__(952322),FetchViewsMixin=__webpack_require__(646716),appUtil=__webpack_require__(843097),SetupScrollToTopvue_type_template_id_7eabff95_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-page-backTo-top"},[_c("el-backtop",{attrs:{target:".fc-page-scroll-top",bottom:40,right:20}})],1)},SetupScrollToTopvue_type_template_id_7eabff95_staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,SetupScrollToTopvue_type_template_id_7eabff95_render,SetupScrollToTopvue_type_template_id_7eabff95_staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupScrollToTop=component.exports,debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),app=__webpack_require__(782080),AuditLogvue_type_script_lang_js={mixins:[FetchViewsMixin/* default */.Z],data:function(){return{loading:!0,tableData:[],auditLogList:[],currentTimeLabel:[],logList:{},systemApps:[],querySearch:"",datePicker:[],dayMap:{},resultMap:{},description:null,userlist:[],userData:null,recordData:null,typeNameSearch:null,searchHide:!0,searchShow:!1,sortValue:{},showFilter:!1,dateFilterModel:[],auditCount:0,userListSearch:[],list:[],selectFilter:[{label:"Today",value:"Today"},{label:"Till Now",value:"Till Now"},{label:"Yesterday",value:"Yesterday"},{label:"Till Yesterday",value:"Till Yesterday"},{label:"This Week",value:"This Week"},{label:"Last Week",value:"Last Week"},{label:"Last 2 Week",value:"Last 2 Week"},{label:"This Month",value:"This Month"},{label:"Last Month",value:"Last Month"},{label:"Custom",value:"Custom"}],recordTypeList:[{id:1,name:"Module"},{id:2,name:"Setup"}],perPage:50,auditPage:1,expandRowKeys:[],userListData:[],userSearchData:[],appHash:{}}},components:{SetupHeader:SetupHeaderTabs/* default */.Z,SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z,Pagination:AuditLogPagination/* default */.Z,SetupScrollToTop:SetupScrollToTop,FHtml:app/* FHtml */.J_},title:function(){return"Audit logs"},created:function(){this.fetchAuditLog(),this.loadSystemApps(),this.loadusers()},computed:{},watch:{page:function(newVal,oldVal){oldVal!=newVal&&this.fetchAuditLog()}},methods:{fetchAuditLog:function(){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,filters,_yield$API$get,error,data,ids;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=!(_arguments.length>0&&void 0!==_arguments[0])||_arguments[0],_this.loading=!0,filters={},(0,validation/* isEmpty */.xb)(_this.querySearch)||(filters.subject={operatorId:5,value:[_this.querySearch]}),(0,validation/* isEmpty */.xb)(_this.datePicker)||(filters.time={operatorId:20,value:_this.datePicker.map((function(a){return a.toString()}))}),(0,validation/* isEmpty */.xb)(_this.userData)||(filters.performedBy={operatorId:36,value:[_this.userData]}),(0,validation/* isEmpty */.xb)(_this.recordData)||(filters.recordType={operatorId:54,value:[_this.recordData]}),(0,validation/* isEmpty */.xb)(_this.typeNameSearch)||(filters.typeName={operatorId:5,value:[_this.typeNameSearch]}),"This Month"===_this.dateFilterModel&&(filters.time={operatorId:28}),"Today"===_this.dateFilterModel&&(filters.time={operatorId:22}),"Yesterday"===_this.dateFilterModel&&(filters.time={operatorId:25}),"Last Month"===_this.dateFilterModel&&(filters.time={operatorId:27}),"Last Month"===_this.dateFilterModel&&(filters.time={operatorId:27}),"Last Week"===_this.dateFilterModel&&(filters.time={operatorId:30}),"Last 2 Week"===_this.dateFilterModel&&(filters.time={operatorId:50,value:["2"]}),"This Week"===_this.dateFilterModel&&(filters.time={operatorId:31}),"Till Now"===_this.dateFilterModel&&(filters.time={operatorId:72}),"Till Yesterday"===_this.dateFilterModel&&(filters.time={operatorId:26}),_context.next=20,api/* API */.bl.get("v2/auditLogs/list?&page=".concat(_this.auditPage,"&perPage=").concat(_this.perPage,'&includePrentFilter=true&orderType="asc"&orderBy="datetime"'),{filters:(0,validation/* isEmpty */.xb)(filters)?null:JSON.stringify(filters)},{force:force});case 20:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this.$message.error(error.message||"Error Occurred"):(_this.auditLogList=data.auditLogs||[],
// this.auditLogList = await Promise.all(
//   this.auditLogList.map(async audit => {
//     let { subject, linkConfig } = audit || {}
//     let replaceText = await this.replace(subject, linkConfig)
//     return { ...audit, replaceText }
//   })
// )
_this.auditCount=_this.auditLogList.length,_this.currentTimeLabel=[],_this.logList={},ids=data.auditLogs.map((function(rt){return rt.time})),ids=(0,toConsumableArray/* default */.Z)(new Set(ids)),ids.forEach((function(time){_this.currentTimeLabel.push(data.auditLogs.find((function(rl){return rl.time===time})).time),_this.logList[time]=data.auditLogs.filter((function(rl){return rl.time===time}))})),_this.auditLogList.forEach((function(rt){_this.$set(rt,"day",moment_timezone_default()(rt.time).tz(_this.$timezone).format("DDMMYYYY")),_this.$set(_this.dayMap,moment_timezone_default()(rt.time).tz(_this.$timezone).format("DDMMYYYY"),rt.time)})),Object.keys(_this.dayMap).forEach((function(key){var d=_this.auditLogList.filter((function(rt){return rt.day===key}));_this.$set(_this.resultMap,_this.dayMap[key],d)}))),_this.sortValue=Object.values(_this.dayMap),_this.sortValue.sort(),_this.loading=!1;case 27:case"end":return _context.stop()}}),_callee)})))()},replace:function(stringToReplace,linkConfig){if(stringToReplace.indexOf("{")<0)return stringToReplace;var stringExtractor=this.extract(["{","}"]),stuffIneed=stringExtractor(stringToReplace);if((0,validation/* isEmpty */.xb)(linkConfig))stuffIneed.forEach((function(text){stringToReplace=stringToReplace.replace("{".concat(text,"}"),"<b>".concat(text,"</b>"))}));else if(!(0,validation/* isEmpty */.xb)(linkConfig)){var linkConfigs=JSON.parse(linkConfig);if(linkConfigs&&linkConfig.length){var stateFlowId=linkConfigs[0].stateFlowId,moduleName=linkConfigs[0].moduleName;
// let id = linkConfigs[0].id
if(stateFlowId)if(moduleName){var url=this.$router.resolve({path:"/app/setup/process/stateflows/".concat(moduleName,"/").concat(stateFlowId,"/edit")}).href;stuffIneed.forEach((function(text){stringToReplace=stringToReplace.replace("{".concat(text,"}"),'<a href="'.concat(url,'" class="pointer f14 fc-audit-link" style="color: #2f6acf;" target="_blank">').concat(text,"</a>"))})),this.text=stringToReplace}else{var _url=this.$router.resolve({path:"/app/setup/process/stateflows/workorder/".concat(stateFlowId,"/edit")}).href;stuffIneed.forEach((function(text){stringToReplace=stringToReplace.replace("{".concat(text,"}"),'<a href="'.concat(_url,'" class="pointer f14 fc-audit-link" style="color: #2f6acf;" target="_blank">').concat(text,"</a>"))})),this.text=stringToReplace}else if(linkConfigs[0].reportId){var routeName=this.getReportsRouteName(linkConfigs[0]),_url2=this.$router.resolve({path:routeName+linkConfigs[0].reportId}).href;stuffIneed.forEach((function(text){stringToReplace=stringToReplace.replace("{".concat(text,"}"),'<a href="'.concat(_url2,'" class="pointer f14 fc-audit-link" style="color: #2f6acf;" target="_blank">').concat(text,"</a>"))})),this.text=stringToReplace}
// else if (moduleName && isWebTabsEnabled()) {
//   let url = this
//   let viewname = await this.fetchView(moduleName)
//   let { name } =
//     findRouteForModule(moduleName, pageTypes.OVERVIEW) || {}
//   if (name) {
//     url = this.$router.resolve({
//       name,
//       params: { viewname, id },
//     }).href
//     stuffIneed.forEach(text => {
//       stringToReplace = stringToReplace.replace(
//         `{${text}}`,
//         `<a href="${url}" class="pointer f14 fc-audit-link" style="color: #2f6acf;" target="_blank">${text}</a>`
//       )
//     })
//   } else {
//     stuffIneed.forEach(text => {
//       stringToReplace = stringToReplace.replace(
//         `{${text}}`,
//         `<b>${text} <i>(#${id})</i></b>`
//       )
//     })
//   }
//   this.text = stringToReplace
// }
else stuffIneed.forEach((function(text){stringToReplace=stringToReplace.replace("{".concat(text,"}"),"<b>".concat(text,"</b>"))}))}}return stringToReplace},extract:function(_ref){var _ref2=(0,slicedToArray/* default */.Z)(_ref,2),beg=_ref2[0],end=_ref2[1],matcher=new RegExp("".concat(beg,"(.*?)").concat(end),"gm"),normalise=function(str){return str.slice(beg.length,-1*end.length)};return function(str){return str.match(matcher).map(normalise)}},getTime:function(miliseconds){return this.$options.filters.fromNow(miliseconds)},listLoading:function(){this.fetchAuditLog(!0)},formatTime:function(date){return moment_timezone_default()(date).tz(this.$timezone).format("MMM-YYYY")},loadSystemApps:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$loadApps,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,appUtil/* loadApps */.jJ)();case 2:_yield$loadApps=_context2.sent,error=_yield$loadApps.error,data=_yield$loadApps.data,error?_this2.$message.error(error.message||"Error Occured"):_this2.appHash=data.reduce((function(appHash,appObj){var _ref3=appObj||{},id=_ref3.id,name=_ref3.name;return appHash[id]=name,appHash}),{});case 6:case"end":return _context2.stop()}}),_callee2)})))()},nextPage:function(){this.fetchAuditLog()},loadusers:function(){var _this3=this;this.loading=!0,api/* API */.bl.get("/v2/application/users/list?inviteAcceptStatus=true").then((function(_ref4){var data=_ref4.data,error=_ref4.error;if(error)_this3.$message.error(error.message||"Error Occured");else{_this3.userlist=data.users||[];var uniqueValuesSet=new Set;_this3.userListData=_this3.userlist.filter((function(obj){var isPresentInSet=uniqueValuesSet.has(obj.ouid);return uniqueValuesSet.add(obj.ouid),!isPresentInSet}))}_this3.loading=!1}))},remoteSearchUser:debounce_default()(function(){var _ref5=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(searchText){var _this4=this;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:this.loading=!0,api/* API */.bl.get("/v2/application/users/list?inviteAcceptStatus=true&search=".concat(searchText)).then((function(_ref6){var data=_ref6.data,error=_ref6.error;if(error)_this4.$message.error(error.message||"Error Occured");else{_this4.userlist=data.users||[];var uniqueValuesSet=new Set;_this4.userListData=_this4.userlist.filter((function(obj){var isPresentInSet=uniqueValuesSet.has(obj.ouid);return uniqueValuesSet.add(obj.ouid),!isPresentInSet}))}_this4.loading=!1}));case 2:case"end":return _context3.stop()}}),_callee3,this)})));return function(_x){return _ref5.apply(this,arguments)}}(),1e3),searchShowHide:function(){this.searchHide=!1,this.searchShow=!0},searchClose:function(){this.searchHide=!0,this.searchShow=!1,this.querySearch=null,this.listLoading()},showExtraFilter:function(){this.showFilter=!this.showFilter},setPage:function(page){this.auditPage=page,this.fetchAuditLog()},clearFiltersAll:function(){this.userData=null,this.recordData=null,this.listLoading()},searchLoadData:function(){this.auditPage=1,this.perPage=50,this.auditCount=null,this.fetchAuditLog()},handleExpandChange:function(row){var id=row.id,lastId=this.expandRowKeys[0];this.expandRowKeys=id===lastId?[]:[id]},tableRowExpand:function(tableIndex,row){this.$refs.auditLogTable[tableIndex].toggleRowExpansion(row)},getFormatter:function(timeStamp){return moment_timezone_default()(timeStamp).tz(this.$timezone).format("dddd, DD MMM YYYY")},getFormatTime:function(time){return moment_timezone_default()(time).tz(this.$timezone).format("hh:mm A")},getReportsRouteName:function(linkJsonConfig){var moduleName=linkJsonConfig.moduleName,report_type=linkJsonConfig.reportType;if("undefined"===moduleName||null===moduleName||"energydata"===moduleName)return"/app/em/reports/newview/";if(void 0!==report_type&&null!==report_type&&4==report_type)return"/app/em/pivot/view/";if(linkJsonConfig.moduleType)return"/app/ca/reports/newview/";switch(moduleName){case"workorder":case"workorderLabour":case"workorderCost":case"workorderItem":case"workorderTools":case"workorderService":case"workorderTimeLog":case"workorderHazard":case"plannedmaintenance":return"/app/wo/reports/newview/";case"purchaseorder":case"purchaseorderlineitems":case"poterms":case"purchaserequest":case"purchaserequestlineitems":return"/app/purchase/reports/newview/";case"asset":return"/app/at/reports/newview/";case"alarm":case"newreadingalarm":case"readingalarmoccurrence":case"bmsalarm":case"mlAnomalyAlarm":case"anomalyalarmoccurrence":case"violationalarm":case"violationalarmoccurrence":case"operationalarm":case"operationalarmoccurrence":case"sensoralarm":case"sensoralarmoccurrence":case"sensorrollupalarm":case"sensorrollupalarmoccurrence":case"basealarm":case"alarmoccurrence":case"readingevent":case"bmsevent":case"mlAnomalyEvent":case"violationevent":case"operationevent":case"sensorevent":case"baseevent":return"/app/fa/reports/newview/";case"servicerequest":return"/app/sr/reports/newview/";case"visitor":case"visitorlog":case"invitevisitor":case"watchlist":return"/app/vi/reports/newview/";case"tenant":case"tenantunit":case"tenantcontact":case"quote":case"contact":case"tenantspaces":case"quotelineitems":case"quoteterms":case"people":case"newsandinformationsharing":case"neighbourhoodsharing":case"dealsandofferssharing":case"contactdirectorysharing":case"admindocumentsharing":case"audienceSharing":return"/app/tm/reports/newview/";case"contracts":case"purchasecontracts":case"purchasecontractlineitems":case"labourcontracts":case"labourcontractlineitems":case"warrantycontracts":case"warrantycontractlineitems":case"rentalleasecontracts":case"rentalleasecontractlineitems":return"/app/ct/reports/newview/";case"item":case"tool":case"itemTransactions":case"tootTransactions":case"itemTypes":case"toolTypes":case"storeRoom":case"shipment":case"transferrequest":case"transferrequestshipmentreceivables":case"transferrequestpurchaseditems":return"/app/inventory/reports/newview/";case"inspectionTemplate":case"inspectionResponse":return"/app/inspection/reports/newview/"}}}},AuditLog_AuditLogvue_type_script_lang_js=AuditLogvue_type_script_lang_js,AuditLog_component=(0,componentNormalizer/* default */.Z)(AuditLog_AuditLogvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AuditLog=AuditLog_component.exports},
/***/952322:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AuditLogPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/AuditLog/AuditLogPagination.vue?vue&type=template&id=7bfb080a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"flex-middle fc-setup-pagination"},[_c("el-button",{staticClass:"fc-pagination-arrow",attrs:{type:"button",disabled:_vm.isInFirstPage},on:{click:function($event){_vm.currentPage>1&&_vm.onClickPreviousPage()}}},[_c("i",{staticClass:"el-icon-arrow-left"})]),_c("div",{staticClass:"mL10 fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.currentPage)+" ")]),_c("el-button",{staticClass:"fc-pagination-arrow mL10",attrs:{type:"button",disabled:0===_vm.total},on:{click:function($event){_vm.startPage!==_vm.total&&_vm.onClickNextPage()}}},[_c("i",{staticClass:"el-icon-arrow-right"})])],1)},staticRenderFns=[],AuditLogPaginationvue_type_script_lang_js=(__webpack_require__(879288),__webpack_require__(670560),{props:{totalPages:{type:Number},total:{type:Number,required:!0},currentPage:{type:Number,required:!0}},computed:{isInFirstPage:function(){return 1===this.currentPage},isInLastPage:function(){return this.currentPage===this.totalPages},startPage:function(){return 1===this.currentPage?1:this.currentPage-1},endPage:function(){return Math.min(this.totalPages)},pages:function(){for(var range=[],i=this.startPage;i<=this.endPage;i+=1)range.push({name:i,isDisabled:i===this.currentPage});return range}},methods:{onPageChange:function(page){this.currentPage=page},onClickPreviousPage:function(){this.$emit("pagechanged",this.currentPage-1)},onClickPage:function(page){this.$emit("pagechanged",page)},onClickNextPage:function(){this.total&&this.$emit("pagechanged",this.currentPage+1)},isPageActive:function(page){return this.currentPage===page}}}),AuditLog_AuditLogPaginationvue_type_script_lang_js=AuditLogPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(AuditLog_AuditLogPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AuditLogPagination=component.exports},
/***/622957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupEmptyState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupEmptyState.vue?vue&type=template&id=839bdf38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-empty"},[_c("div",{staticClass:"fc-setup-empty-image"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}})],1),_c("div",{staticClass:"fc-setup-empty-txt"},[_vm._t("emptyHeading")],2),_c("div",{staticClass:"fc-setup-empty-txt-desc"},[_vm._t("emptyDescription")],2)])},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupEmptyState=component.exports},
/***/291612:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupHeaderTabs}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupHeaderTabs.vue?vue&type=template&id=86381c1c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{},[_c("el-header",{staticClass:"fc-v1-setup-header",attrs:{height:"150"}},[_c("div",{staticClass:"flex-middle justify-content-space fc-header-border-bottom p20"},[_c("div",[_c("div",{staticClass:"fc-v1-setup-heading"},[_vm._t("heading")],2),_c("div",{staticClass:"fc-v1-setup-description"},[_vm._t("description")],2)]),_c("div",{staticClass:"flex-middle"},[_vm._t("actions")],2)]),_c("div",[_c("div",{staticClass:"fc-setup-tab-content"},[_vm._t("tabs",(function(){return[_vm._t("tabFilter",(function(){return[_c("div",{staticClass:"flex-middle justify-content-space p20"},[_c("div",{},[_vm._t("filter")],2),_c("div",{},[_vm._t("searchAndPagination")],2)])]})),_vm._t("tabContent")]}))],2)])])],1)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={}
/* normalize component */,component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupHeaderTabs=component.exports},
/***/233432:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupLoader.vue?vue&type=template&id=367e612c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-loader"},[_vm._t("setupLoading")],2)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupLoader=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/3140.js.map