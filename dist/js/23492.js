(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[23492],{
/***/303514:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AsyncButton}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AsyncButton.vue?vue&type=template&id=16ca9ad1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-button",_vm._b({class:_vm.buttonClass,attrs:{loading:_vm.showLoading,type:_vm.buttonType,size:_vm.size,disabled:_vm.disabled},on:{click:function($event){return _vm.save()}}},"el-button",_vm.$attrs,!1),[_vm._t("default")],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),AsyncButtonvue_type_script_lang_js=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),{props:["clickAction","actionParams","buttonType","buttonClass","size","disabled","loading"],data:function(){return{isLoading:!1}},computed:{showLoading:function(){return this.loading||this.isLoading}},methods:{save:function(){var _this=this;if(this.clickAction&&"function"===typeof this.clickAction){this.isLoading=!0;var returnPromise=this.actionParams?this.clickAction.apply(this,(0,toConsumableArray/* default */.Z)(this.actionParams)):this.clickAction(),minimumTimeout=this.$helpers.delay(1e3);returnPromise?Promise.all([returnPromise,minimumTimeout]).finally((function(){_this.isLoading=!1})):this.$helpers.delay(1e3).then((function(){return _this.isLoading=!1}))}}}}),components_AsyncButtonvue_type_script_lang_js=AsyncButtonvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AsyncButtonvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AsyncButton=component.exports},
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/247367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return StateFlowList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/StateFlowList.vue?vue&type=template&id=33eca304&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 overflow-hidden"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title text-capitalize"},[_vm._v(_vm._s(_vm.title))]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.list_desc"))+" ")])]),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:function($event){return _vm.createStateFlow()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.header_add"))+" ")])],1)]),_c("div",{staticClass:"pL30 pB15"},[_c("portal-target",{attrs:{name:"automation-modules"}})],1),_vm._t("subHeaderMenu"),_c("el-tabs",{staticClass:"alarm-action-tab",attrs:{"before-leave":function(){return!1}},on:{"tab-click":_vm.switchTab},model:{value:_vm.currentTab,callback:function($$v){_vm.currentTab=$$v},expression:"currentTab"}},[_c("el-tab-pane",{attrs:{label:"Stateflows",name:"stateflow.list"}}),_c("el-tab-pane",{attrs:{label:"States",name:"stateflow.states",lazy:""}})],1),_c("div",{staticClass:"container-scroll mT15",staticStyle:{height:"calc(100vh - 250px)"}},[_c("div",{staticClass:"setting-Rlayout setting-list-view-table"},[_c("el-row",{staticClass:"header-row"},[_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.name"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.last_published"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.status"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:4}},[_vm._v(" "+_vm._s("Â ")+" ")])],1),_vm.loading?_c("el-row",[_c("el-col",{staticClass:"text-center",attrs:{span:24}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)],1):_vm.$validation.isEmpty(_vm.stateFlows)?_c("el-row",[_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:24}},[_vm._v(_vm._s(_vm.$t("setup.empty.empty_stateflows")))])],1):_c("draggable",_vm._b({attrs:{draggable:".is-draggable",handle:".task-handle"},on:{change:function($event){return _vm.reorderStateFlows()}},model:{value:_vm.stateFlows,callback:function($$v){_vm.stateFlows=$$v},expression:"stateFlows"}},"draggable",_vm.dragOptions,!1),_vm._l(_vm.stateFlows,(function(stateflow){return _c("el-row",{key:stateflow.id,class:[stateflow.defaltStateFlow?"is-default":"is-draggable","body-row tablerow"]},[_c("el-col",{staticClass:"body-row-cell d-flex",attrs:{span:5},nativeOn:{click:function($event){return _vm.goToBuilder(stateflow)}}},[_c("div",{staticClass:"vertical-middle task-handle inline pR10"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_c("div",[_vm._v(_vm._s(stateflow.name))])]),_c("el-tooltip",{attrs:{content:stateflow.description,placement:"top","open-delay":1200,manual:_vm.$validation.isEmpty(stateflow.description)||stateflow.description.length<30}},[_c("el-col",{staticClass:"body-row-cell",attrs:{span:6},nativeOn:{click:function($event){return _vm.goToBuilder(stateflow)}}},[_vm._v(_vm._s(stateflow.description||"---")+" ")])],1),stateflow.draft?_c("el-col",{staticClass:"body-row-cell pointer pT13 pB13 text-center",attrs:{span:5}},[_c("async-button",{attrs:{buttonType:"primary",buttonClass:"publish-button",size:"mini",clickAction:_vm.publish,actionParams:[stateflow]}},[_vm._v(_vm._s(_vm.$t("commissioning.list.publish")))])],1):_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.getFormattedDate(stateflow))+" ")]),_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:4}},[stateflow.defaltStateFlow?_vm._e():_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeStatus(stateflow)}},model:{value:stateflow.status,callback:function($$v){_vm.$set(stateflow,"status",$$v)},expression:"stateflow.status"}})],1),_c("el-col",{staticClass:"body-row-cell stateflow-actions-cell",attrs:{span:4}},[stateflow.locked?_vm._e():_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"text-left actions mT0 mR15 text-center cursor-pointer",attrs:{content:_vm.$t("common._common.edit")},on:{click:function($event){return _vm.editStateFlow(stateflow)}}},[_c("i",{staticClass:"el-icon-edit pointer"})]),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"text-left actions mT0 mR15 text-center cursor-pointer",attrs:{content:_vm.$t("common._common.clone")},on:{click:function($event){return _vm.cloneStateFlow(stateflow)}}},[_c("inline-svg",{attrs:{src:"svgs/copy",iconClass:"icon clone-icon"}})],1)])],1)})),1)],1)]),_vm.showNewStateFlowDialog?_c("new-state-flow",{attrs:{stateflow:_vm.selectedStateFlowObj,isNew:_vm.isNew,closeDialog:_vm.closeDialog,module:_vm.module}}):_vm._e(),_vm.showCloneDialog?_c("CloneStateFlow",{attrs:{referenceStateflowId:_vm.referenceStateflowId,stateflow:_vm.selectedStateFlowObj,closeDialog:_vm.closeDialog,module:_vm.module}}):_vm._e()],2)},staticRenderFns=[],NewStateFlowvue_type_template_id_3499446f_render=(__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(450886),__webpack_require__(538077),function(){var this$1=this,_vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"before-close":function(){return _vm.closeDialog()},"custom-class":"fc-dialog-form fc-dialog-right custom-rule-dialog setup-dialog40 setup-dialog"}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}),_c("el-form",{ref:"new-stateflow-form",attrs:{model:_vm.stateFlowObj,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container mR30 pL30"},[_c("div",{staticClass:"new-header-modal"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?_vm.$t("setup.stateflow.header_new"):_vm.$t("setup.stateflow.header_edit"))+" ")])])])]),_c("div",{staticClass:"new-body-modal new-stateflow-modal"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.name"))+" ")]),_c("el-input",{staticClass:"width100 pR20",attrs:{autofocus:!0,placeholder:_vm.$t("setup.stateflow.name_placeholder")},model:{value:_vm.stateFlowObj.name,callback:function($$v){_vm.$set(_vm.stateFlowObj,"name",$$v)},expression:"stateFlowObj.name"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"defaultStateId"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.default_state"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select the default state",filterable:""},model:{value:_vm.stateFlowObj.defaultStateId,callback:function($$v){_vm.$set(_vm.stateFlowObj,"defaultStateId",$$v)},expression:"stateFlowObj.defaultStateId"}},_vm._l(_vm.ticketStatus,(function(item){return _c("el-option",{key:item.id,attrs:{label:item.displayName,value:item.id}})})),1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"description"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.description"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{"min-rows":1,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:_vm.$t("setup.stateflow.desc_placeholder"),resize:"none"},model:{value:_vm.stateFlowObj.description,callback:function($$v){_vm.$set(_vm.stateFlowObj,"description",$$v)},expression:"stateFlowObj.description"}})],1)],1)],1),_vm.stateFlowObj.defaltStateFlow?_vm._e():[_c("hr",{staticClass:"separator-line"}),_c("p",{staticClass:"fc-input-label-txt bold mL10 pB0 text-fc-pink text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.criteria"))+" ")]),_c("p",{staticClass:"mL10 fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.criteria_desc"))+" ")]),_c("el-form-item",{attrs:{prop:"criteria"}},[_c("new-criteria-builder",{ref:"criteriaBuilder",staticClass:"stateflow-criteria",attrs:{exrule:_vm.stateFlowObj.criteria,module:_vm.module,isRendering:_vm.criteriaRendered,hideTitleSection:!0},on:{condition:function(newValue){return this$1.stateFlowObj.criteria=newValue},"update:isRendering":function($event){_vm.criteriaRendered=$event},"update:is-rendering":function($event){_vm.criteriaRendered=$event}},model:{value:_vm.stateFlowObj.criteria,callback:function($$v){_vm.$set(_vm.stateFlowObj,"criteria",$$v)},expression:"stateFlowObj.criteria"}})],1)]],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])],1)],1)}),NewStateFlowvue_type_template_id_3499446f_staticRenderFns=[],objectSpread2=__webpack_require__(595082),ErrorBanner=(__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(821057),__webpack_require__(297157)),NewCriteriaBuilder=__webpack_require__(859850),NewStateFlowvue_type_script_lang_js={props:["isNew","stateflow","closeDialog","module"],components:{ErrorBanner:ErrorBanner/* default */.Z,NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z},created:function(){this.$store.dispatch("loadTicketStatus",this.module),this.stateFlowObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.stateFlowObj),this.stateflow),this.deserialize()},computed:{ticketStatus:function(){return this.$store.state.ticketStatus[this.module]}},data:function(){var _this=this;return{saving:!1,error:!1,errorMessage:"",criteriaRendered:!1,stateFlowObj:{name:null,defaultStateId:null,description:null,criteria:null},rules:{name:[{required:!0,message:"Please enter a name for this stateflow",trigger:"blur"}],defaultStateId:[{required:!0,message:"Please select a default state",trigger:"blur"}],criteria:[{validator:function(rule,value,callback){return _this.validate("criteria",value,callback)}}]}}},methods:{serializeCriteria:function(criteria){return Object.keys(criteria.conditions).forEach((function(condition){if(1===parseInt(condition))criteria.conditions[1].fieldName||(criteria=null);else if(criteria.conditions[condition].hasOwnProperty("fieldName")){var discardKeys=["valueArray","operatorsDataType","operatorLabel"];discardKeys.forEach((function(key){delete criteria.conditions[condition][key]}))}else delete criteria.conditions[condition]})),criteria&&criteria.conditions&&0===Object.keys(criteria.conditions).length?null:criteria},serialize:function(data){data.stateFlow.criteria&&this.serializeCriteria(data.stateFlow.criteria)},deserialize:function(){},validate:function(field,value,callback){
// if (
//   !this.stateFlowObj.defaltStateFlow &&
//   !this.serializeCriteria(this.stateFlowObj.criteria)
// ) {
//   callback(new Error('Please configure a criteria for this stateflow'))
// } else {
//   callback()
// }
callback()},save:function(){var _this2=this,moduleName=this.module,data={};data["stateFlow"]=(0,objectSpread2/* default */.Z)({moduleName:moduleName},this.stateFlowObj),this.serialize(data);var form=this.$refs["new-stateflow-form"];form&&form.validate().then((function(isValid){isValid&&(_this2.saving=!0,_this2.$http.post("/v2/stateflow/addOrUpdate",data).then((function(_ref){var data=_ref.data;if(0!==data.responseCode)throw new Error(data.message);_this2.$message({showClose:!0,message:data.result.message||_this2.$t("setup.stateflow.creation_success"),type:"success"}),_this2.closeDialog(!0)})).catch((function(error){_this2.$message({showClose:!0,message:error.message||_this2.$t("setup.stateflow.creation_failure"),type:"error"})})).finally((function(){return _this2.saving=!1})))}))}}},stateflow_NewStateFlowvue_type_script_lang_js=NewStateFlowvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(stateflow_NewStateFlowvue_type_script_lang_js,NewStateFlowvue_type_template_id_3499446f_render,NewStateFlowvue_type_template_id_3499446f_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewStateFlow=component.exports,CloneStateFlowvue_type_template_id_b21a2090_render=function(){var this$1=this,_vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"before-close":function(){return _vm.closeDialog()},"custom-class":"fc-dialog-form fc-dialog-right custom-rule-dialog setup-dialog40 setup-dialog"}},[_c("el-form",{ref:"new-stateflow-form",attrs:{model:_vm.stateFlowObj,"label-position":"top"}},[_c("div",{staticClass:"new-header-container mR30 pL30"},[_c("div",{staticClass:"new-header-modal"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.header_clone"))+" ")])])])]),_c("div",{staticClass:"new-body-modal new-stateflow-modal"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"name"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.name"))+" ")]),_c("el-input",{staticClass:"width100 pR20",attrs:{autofocus:!0,disabled:""},model:{value:_vm.stateFlowObj.name,callback:function($$v){_vm.$set(_vm.stateFlowObj,"name",$$v)},expression:"stateFlowObj.name"}})],1)],1),_c("el-col",{attrs:{span:12}},[_c("el-form-item",{attrs:{prop:"defaultStateId"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.default_state"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:""},model:{value:_vm.stateFlowObj.defaultStateId,callback:function($$v){_vm.$set(_vm.stateFlowObj,"defaultStateId",$$v)},expression:"stateFlowObj.defaultStateId"}},_vm._l(_vm.ticketStatus,(function(item){return _c("el-option",{key:item.id,attrs:{label:item.displayName,value:item.id}})})),1)],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{attrs:{prop:"description"}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.description"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{"min-rows":1,type:"textarea",autosize:{minRows:2,maxRows:4},disabled:"",resize:"none"},model:{value:_vm.stateFlowObj.description,callback:function($$v){_vm.$set(_vm.stateFlowObj,"description",$$v)},expression:"stateFlowObj.description"}})],1)],1)],1),_vm.stateFlowObj.defaltStateFlow?_vm._e():[_c("hr",{staticClass:"separator-line"}),_c("p",{staticClass:"fc-input-label-txt bold mL10 pB0 text-fc-pink text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.criteria"))+" ")]),_c("p",{staticClass:"mL10 fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.stateflow.criteria_desc"))+" ")]),_c("el-form-item",{attrs:{prop:"criteria"}},[_c("new-criteria-builder",{ref:"criteriaBuilder",staticClass:"stateflow-criteria",attrs:{exrule:_vm.stateFlowObj.criteria,module:_vm.module,isRendering:_vm.criteriaRendered,hideTitleSection:!0},on:{condition:function(newValue){return this$1.stateFlowObj.criteria=newValue},"update:isRendering":function($event){_vm.criteriaRendered=$event},"update:is-rendering":function($event){_vm.criteriaRendered=$event}},model:{value:_vm.stateFlowObj.criteria,callback:function($$v){_vm.$set(_vm.stateFlowObj,"criteria",$$v)},expression:"stateFlowObj.criteria"}})],1)]],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel text-uppercase",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])],1)],1)},CloneStateFlowvue_type_template_id_b21a2090_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=__webpack_require__(990260),api=__webpack_require__(32284),CloneStateFlowvue_type_script_lang_js={props:["referenceStateflowId","stateflow","closeDialog","module"],components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z},created:function(){this.$store.dispatch("loadTicketStatus",this.module),this.stateFlowObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.stateFlowObj),this.stateflow)},data:function(){return{saving:!1,error:!1,errorMessage:"",criteriaRendered:!1,stateFlowObj:{name:null,defaultStateId:null,description:null,criteria:null}}},computed:{ticketStatus:function(){return this.$store.state.ticketStatus[this.module]}},methods:{serializeCriteria:function(criteria){return Object.keys(criteria.conditions).forEach((function(condition){if(1===parseInt(condition))criteria.conditions[1].fieldName||(criteria=null);else if((0,validation/* isEmpty */.xb)(criteria.conditions[condition]["fieldName"]))delete criteria.conditions[condition];else{var discardKeys=["valueArray","operatorsDataType","operatorLabel"];discardKeys.forEach((function(key){delete criteria.conditions[condition][key]}))}})),criteria&&criteria.conditions&&0===Object.keys(criteria.conditions).length?null:criteria},save:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var stateFlowObj,referenceStateflowId,criteria,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return stateFlowObj=_this.stateFlowObj,referenceStateflowId=_this.referenceStateflowId,criteria=_this.serializeCriteria(stateFlowObj.criteria),params={stateFlowId:referenceStateflowId,criteria:criteria},_this.saving=!0,_context.next=6,api/* API */.bl.post("v2/stateflow/clone",params);case 6:_yield$API$post=_context.sent,error=_yield$API$post.error,error?_this.$message.error(error.message||"Error Occurred"):(_this.$message.success(_this.$t("setup.stateflow.creation_success")),_this.closeDialog(!0)),_this.saving=!1;case 10:case"end":return _context.stop()}}),_callee)})))()}}},stateflow_CloneStateFlowvue_type_script_lang_js=CloneStateFlowvue_type_script_lang_js,CloneStateFlow_component=(0,componentNormalizer/* default */.Z)(stateflow_CloneStateFlowvue_type_script_lang_js,CloneStateFlowvue_type_template_id_b21a2090_render,CloneStateFlowvue_type_template_id_b21a2090_staticRenderFns,!1,null,null,null)
/* harmony default export */,CloneStateFlow=CloneStateFlow_component.exports,vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),filters=__webpack_require__(273861),AsyncButton=__webpack_require__(303514),StateFlowListvue_type_script_lang_js={props:["moduleName","transitionRouteName","isCustomModule","moduleDisplayName"],components:{NewStateFlow:NewStateFlow,CloneStateFlow:CloneStateFlow,draggable:vuedraggable_umd_default(),AsyncButton:AsyncButton/* default */.Z},title:function(){return"Stateflows"},data:function(){return{module:null,loading:!1,stateFlows:[],isNew:!1,showNewStateFlowDialog:!1,showCloneDialog:!1,selectedStateFlowObj:{},referenceStateflowId:null,dragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0},currentTab:"stateflow.list"}},computed:{title:function(){var module=this.module,moduleDisplayName=this.moduleDisplayName;return(0,validation/* isEmpty */.xb)(moduleDisplayName)?"".concat(module," Stateflows"):"".concat(moduleDisplayName," Stateflows")}},created:function(){(0,validation/* isEmpty */.xb)(this.module)&&!(0,validation/* isEmpty */.xb)(this.moduleName)&&(this.module=this.moduleName),this.getStateFlowList()},methods:{getFormattedDate:function(stateflow){var publishedDate=stateflow.publishedDate,modifiedTime=stateflow.modifiedTime;return(0,validation/* isEmpty */.xb)(publishedDate)?(0,validation/* isEmpty */.xb)(modifiedTime)?"__":(0,filters.formatDate)(modifiedTime,!0):(0,filters.formatDate)(publishedDate,!0)},switchTab:function(tab){var params={moduleName:this.module};this.$router.push({name:tab.name,params:params})},getStateFlowList:function(){var _this=this;return this.loading=!0,this.$http.post("/v2/stateflow/list",{moduleName:this.module}).then((function(_ref){var data=_ref.data;if(!(0,validation/* isEmpty */.xb)(data.result.stateFlows)&&0==data.responseCode){
// Sort stateflows so that the default stateflow is at the last
var stateFlows=data.result.stateFlows,defaultStateFlow=stateFlows.findIndex((function(stateflow){return stateflow.defaltStateFlow}));
// Move the default stateflow to the end of the list
defaultStateFlow=stateFlows.splice(defaultStateFlow,1)[0],stateFlows.push(defaultStateFlow),_this.stateFlows=stateFlows}})).catch((function(_ref2){var _ref2$message=_ref2.message,message=void 0===_ref2$message?"Error loading stateflows":_ref2$message;_this.$message.error(message)})).finally((function(){return _this.loading=!1}))},createStateFlow:function(){this.showNewStateFlowDialog=!0,this.isNew=!0,this.selectedStateFlowObj={}},editStateFlow:function(stateFlowObj){this.selectedStateFlowObj=this.$helpers.cloneObject(stateFlowObj),this.isNew=!1,this.showNewStateFlowDialog=!0},cloneStateFlow:function(stateflow){var id=stateflow.id,name=stateflow.name,description=stateflow.description,defaultStateId=stateflow.defaultStateId;this.selectedStateFlowObj={name:name,description:description,defaultStateId:defaultStateId},this.referenceStateflowId=id,this.showCloneDialog=!0},closeDialog:function(){var needsRefresh=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showNewStateFlowDialog=!1,this.showCloneDialog=!1,this.isNew=!1,this.selectedStateFlowObj={},this.referenceStateflowId=null,needsRefresh&&this.getStateFlowList()},goToBuilder:function(stateflow){if(!stateflow.locked){var isCustomModule=this.isCustomModule,params={stateFlowId:stateflow.id,moduleId:stateflow.moduleId,isCustomModule:isCustomModule};this.$router.push({name:"stateflow.edit",params:params})}},goToTransitions:function(stateflow){var params={stateFlowId:stateflow.id,moduleId:stateflow.moduleId};(0,validation/* isEmpty */.xb)(this.transitionRouteName)?this.$router.push({name:"stateflow.transitions",params:params}):this.$router.push({name:this.transitionRouteName,params:params})},reorderStateFlows:function(){var _this2=this;return this.$http.post("/v2/stateflow/rearrange",{moduleName:this.module,stateFlows:this.stateFlows.filter((function(stateflow){return!stateflow.defaltStateFlow})).map((function(stateflow){return{id:stateflow.id}}))}).then((function(response){0!==response.data.responseCode?_this2.$message.error(response.data.message||"Error Occurred"):_this2.$message.success("Reorder Successful")})).catch((function(response){_this2.$message.error(response.data.message||"Error Occurred")}))},publish:function(stateflow){var _this3=this;return this.$http.get("/v2/stateflow/publish?stateFlowId="+stateflow.id).then((function(response){0==response.data.responseCode&&_this3.getStateFlowList()})).catch((function(){_this3.$message.error("Failed to publish.")}))},changeStatus:function(_ref3){var _this4=this,id=_ref3.id,status=_ref3.status;return this.$http.post("/v2/stateflow/changeStatus",{id:id,status:status,stateFlows:this.stateFlows.filter((function(stateflow){return!stateflow.defaltStateFlow})).map((function(stateflow){return{id:stateflow.id}})),moduleName:this.module}).then((function(response){0!==response.data.responseCode&&_this4.$message.error(response.data.message||"Error Occurred")})).catch((function(response){_this4.$message.error(response.data.message||"Error Occurred")}))}}},stateflow_StateFlowListvue_type_script_lang_js=StateFlowListvue_type_script_lang_js,StateFlowList_component=(0,componentNormalizer/* default */.Z)(stateflow_StateFlowListvue_type_script_lang_js,render,staticRenderFns,!1,null,"33eca304",null)
/* harmony default export */,StateFlowList=StateFlowList_component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/271791:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"8f181d382ffbfa8849763c3ada75c3c6.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/23492.js.map