(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[54426],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/530370:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return OccurrenceHistory}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/anomalies/OccurrenceHistory.vue?vue&type=template&id=d411dcd8&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"anomalies-occurences-page"},[_c("el-tabs",{model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},_vm._l(_vm.tabs,(function(tab,index){return _c("el-tab-pane",{key:tab.name,attrs:{name:tab.name,label:tab.displayName,lazy:""}},[_c("div",{staticClass:"align-stuff text-right"},["occurrences"===_vm.activeTab?_c("div",[_c("pagination",{staticClass:"pR10 pT10 pB10 fc-black-small-txt-12",attrs:{currentPage:_vm.occurrenceCurrentPage,total:_vm.occurrenceCount,perPage:_vm.perPage},on:{"update:currentPage":[function($event){_vm.occurrenceCurrentPage=$event},_vm.handleNextPageOccurrence],"update:current-page":function($event){_vm.occurrenceCurrentPage=$event}}}),_c("alarm-widget-list",{key:""+tab.name+index,ref:"occurrenceWidget",refInFor:!0,attrs:{isActive:tab.isActive,details:_vm.details,loading:_vm.occurenceloading,name:_vm.activeTab,dateObj:_vm.dateObj,portalName:_vm.activeTab+"-topbar",list:_vm.occurrenceList,fields:_vm.occurrenceFields},on:{filter:_vm.filterOccurrence}})],1):_vm._e()]),_c("div",{staticClass:"align-stuff text-right"},["events"===_vm.activeTab?_c("div",[_c("pagination",{staticClass:"pR10 pT10 pB10 fc-black-small-txt-12",attrs:{currentPage:_vm.eventCurrentPage,total:_vm.eventCount,perPage:_vm.perPage},on:{"update:currentPage":[function($event){_vm.eventCurrentPage=$event},_vm.handleNextPageEvent],"update:current-page":function($event){_vm.eventCurrentPage=$event}}}),_c("alarm-widget-list",{key:""+tab.name+index,ref:"eventWidget",refInFor:!0,attrs:{isActive:tab.isActive,details:_vm.details,name:_vm.activeTab,dateObj:_vm.dateObj,loading:_vm.eventloading,portalName:_vm.activeTab+"-topbar",list:_vm.eventList,fields:_vm.eventFields},on:{filter:_vm.filterEvent}})],1):_vm._e()])])})),1),_c("div",{staticClass:"widget-topbar-actions"},[_c("portal-target",{attrs:{name:_vm.activeTab+"-topbar"}})],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),AlarmWidgetListvue_type_template_id_3de11c50_render=(__webpack_require__(634338),__webpack_require__(648324),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(506203),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isActive?[_vm.portalName?_c("portal",{key:_vm.portalName+"-portalwrap",attrs:{to:_vm.portalName,slim:""}},[_c("div",{staticClass:"fR position-relative",staticStyle:{"margin-left":"auto",top:"5px"}},[_c("new-date-picker",{staticClass:"filter-field date-filter-comp",staticStyle:{"margin-left":"auto"},attrs:{zone:_vm.$timezone,dateObj:_vm.dateObj},on:{date:_vm.changeDateFilter}})],1)]):_vm._e()]:_vm._e(),_vm.loading?_c("div",{staticClass:"flex-middle fc-empty-white block"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm.isDataAvailable?_c("el-table",{staticClass:"alarm-occurence-table",staticStyle:{width:"100%"},attrs:{data:_vm.list}},_vm._l(_vm.fields,(function(field,index){return _c("el-table-column",{key:field.name+index,attrs:{label:field.displayName,width:field.width,prop:field.name},scopedSlots:_vm._u([{key:"default",fn:function(occurrence){return["ID"===field.displayType?_c("div",{staticClass:"fc-id",staticStyle:{width:"100px"}},[_vm._v(" "+_vm._s("#"+occurrence.row[field.name])+" ")]):"DATE_TIME"===field.displayType?_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(occurrence.row[field.name]>0?_vm.getDateFomattedTz(occurrence.row[field.name]):"--")+" ")]):"DURATION"===field.displayType?_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(occurrence.row[field.name]>0?_vm.getDuration(occurrence.row):"--")+" ")]):"IMPACT"===field.displayType?_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(_vm.getImpact(occurrence.row,field.name))+" ")]):"USER_AVATAR"===field.displayType?_c("div",{staticClass:"table-subheading"},[occurrence.row.acknowledged?_c("user-avatar",{attrs:{size:"md",user:occurrence.row[field.name],showPopover:!0,name:!0,moduleName:"alarm"}}):_c("div",[_vm._v("Unacknowledged")])],1):"PREVIOUS_SEVERITY"===field.displayType?_c("div",{staticClass:"q-item-label self-center f10 secondary-color",staticStyle:{"min-width":"90px"}},[occurrence.row.previousSeverity?[_c("div",{staticClass:"q-item-label uppercase severityTag",style:{"background-color":_vm.getPreviousOccurrenceColor(occurrence.row)}},[_vm._v(" "+_vm._s(_vm.getPreviousOccurrenceDisplayName(occurrence.row))+" ")])]:[_c("div",{staticClass:"q-item-label uppercase severityTag",style:{"background-color":_vm.getAlarmColor(occurrence.row)}},[_vm._v(" "+_vm._s(_vm.getAlarmDisplayName(occurrence.row))+" ")])]],2):_c("div",{staticClass:"table-subheading"},[_vm._v(" "+_vm._s(occurrence.row[field.name])+" ")])]}}],null,!0)})})),1):_c("div",{staticClass:"block"},[_c("div",{staticClass:"mT40 mB40 text-center p30imp"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/alarmEmpty",iconClass:"icon text-center icon-xxxxlg emptystate-icon-size"}}),_c("div",{staticClass:"fc-black-dark f18 bold"},[_vm._v("No "+_vm._s(_vm.name)+"!")])],1)])],2)}),AlarmWidgetListvue_type_template_id_3de11c50_staticRenderFns=[],NewDatePicker=(__webpack_require__(897389),__webpack_require__(900773)),NewDateHelper=__webpack_require__(105534),User=__webpack_require__(426803),NewAlarmMixin=__webpack_require__(230255),validation=__webpack_require__(990260),AlarmWidgetListvue_type_script_lang_js={mixins:[NewDateHelper/* default */.Z,NewAlarmMixin/* default */.Z],components:{UserAvatar:User/* default */.Z,NewDatePicker:NewDatePicker/* default */.Z},props:["isActive","portalName","loading","name","details","list","fields","dateObj"],computed:{isDataAvailable:function(){var list=this.list;return!(0,validation/* isEmpty */.xb)(list)&&list.length>0}},data:function(){return{localDateFormat:[22,25,31,30,28,27,44,45],dateOperator:28,dateValue:null}},created:function(){this.init()},mounted:function(){this.dateObj&&this.changeDateFilter(this.dateObj)},methods:{init:function(){return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}),_callee)})))()},getPreviousOccurrenceColor:function(alarm){var _ref=alarm||{},previousSeverity=_ref.previousSeverity;return this.$getProperty(previousSeverity,"color")},getPreviousOccurrenceDisplayName:function(alarm){var _ref2=alarm||{},previousSeverity=_ref2.previousSeverity;return this.$getProperty(previousSeverity,"displayName","---")},changeDateFilter:function(dateFilter){this.dateObj=dateFilter,
// TODO...use alarmbarmixin for booleancard and alarminsight
this.localDateFormat.includes(dateFilter.operatorId)?(this.dateOperator=dateFilter.operatorId,this.dateValue=null):(this.dateOperator=20,this.dateValue=dateFilter.value.join());var dateOperator=this.dateOperator,dateValue=this.dateValue;this.$emit("filter",NewDateHelper/* default */.Z.getDatePickerObject(dateOperator,dateValue))},getDateFomattedTz:function(date){return this.$options.filters.formatDate(date)},getDuration:function(occurrence){var data="",duration=this.$helpers.getDuration((occurrence.clearedTime-occurrence.createdTime)/1e3,"seconds");for(var key in duration)data+=" "+duration[key]+" "+key;return data},getImpact:function(occurrence,name){var impact=this.$getProperty(occurrence,name,0);return occurrence[name]>0?impact.toFixed(2):"--"}}},components_AlarmWidgetListvue_type_script_lang_js=AlarmWidgetListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AlarmWidgetListvue_type_script_lang_js,AlarmWidgetListvue_type_template_id_3de11c50_render,AlarmWidgetListvue_type_template_id_3de11c50_staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmWidgetList=component.exports,api=__webpack_require__(32284),WidgetPagination=__webpack_require__(806339),OccurrenceHistoryvue_type_script_lang_js={mixins:[NewDateHelper/* default */.Z],components:{AlarmWidgetList:AlarmWidgetList,Pagination:WidgetPagination/* default */.Z},data:function(){return{occurrenceList:null,eventList:null,currentParamsForFilter:null,recordCount:null,occurrenceCount:null,occurrenceCurrentPage:1,eventCurrentPage:1,eventCount:null,localDateFormat:[22,25,31,30,28,27,44,45],defaultOccurrenceFields:[{displayName:"ID",name:"id",displayType:"ID",width:90},{displayName:"OCCURRED TIME",name:"createdTime",displayType:"DATE_TIME"},{displayName:"CLEARED TIME",name:"clearedTime",displayType:"DATE_TIME"},{displayName:"DURATION",name:"clearedTime",displayType:"DURATION"}],eventFields:[{displayName:"ID",name:"id",displayType:"ID",width:90},{displayName:"EVENT MESSAGE",name:"eventMessage",displayType:"STRING"},{displayName:"EVENT TIME",name:"createdTime",displayType:"DATE_TIME"},{displayName:"SEVERITY",name:"previousSeverity",displayType:"PREVIOUS_SEVERITY"}],activeTab:"occurrences",occurrence:null,loading:!1,dateObj:NewDateHelper/* default */.Z.getDatePickerObject(20,this.details.alarm?[new Date(new Date(this.details.alarm.lastOccurredTime).toLocaleDateString("en-US")+" 00:00:00").getTime()-2592e5,new Date(new Date(this.details.alarm.lastOccurredTime).toLocaleDateString("en-US")+" 23:59:59:999").getTime()]:null),eventloading:!1,occurenceloading:!1,perPage:50}},computed:{tabs:function(){var activeTab=this.activeTab;return[{type:"occurrences",name:"occurrences",displayName:"Occurrences",isActive:"occurrences"===activeTab},{type:"events",name:"events",displayName:"Events",isActive:"events"===activeTab}]},isNewReadingAlarm:function(){var details=this.details,_ref=details||{},alarm=_ref.alarm,_ref2=alarm||{},type=_ref2.type;return 1===type},occurrenceFields:function(){var defaultOccurrenceFields=this.defaultOccurrenceFields,isNewReadingAlarm=this.isNewReadingAlarm,constructField=this.constructField,constructedFields=[];return constructedFields=isNewReadingAlarm?[constructField("ENERGY IMPACT (kWh)","energyImpact","IMPACT"),constructField("COST IMPACT","costImpact","IMPACT"),constructField("SEVERITY","previousSeverity","PREVIOUS_SEVERITY")]:[constructField("SEVERITY","previousSeverity","PREVIOUS_SEVERITY"),constructField("ACKNOWLEDGED BY","acknowledgedBy","USER_AVATAR")],[].concat((0,toConsumableArray/* default */.Z)(defaultOccurrenceFields),(0,toConsumableArray/* default */.Z)(constructedFields))}},props:["details","layoutParams","hideTitleSection","sectionKey","widget","resizeWidget"],methods:{getOccurrence:function(payload){var _arguments=arguments,_this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,isNewReadingAlarm,moduleName,_ref3,filters,orderBy,orderType,perPage,withCount,page,params,_yield$API$get,data,meta,_ref4,pagination,_ref5,totalCount,_ref6,readingalarmoccurrence,_ref7,alarmoccurrence;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],_context.prev=1,isNewReadingAlarm=_this.isNewReadingAlarm,moduleName=isNewReadingAlarm?"readingalarmoccurrence":"alarmoccurrence",_ref3=payload||{},filters=_ref3.filters,orderBy=_ref3.orderBy,orderType=_ref3.orderType,perPage=_this.perPage,withCount=!0,page=_this.occurrenceCurrentPage,params={moduleName:moduleName,filters:filters,page:page,force:force,orderBy:orderBy,orderType:orderType,withCount:withCount,perPage:perPage},_this.currentParamsForFilter=params,_context.next=12,api/* API */.bl.get("v3/modules/data/list",params);case 12:_yield$API$get=_context.sent,data=_yield$API$get.data,meta=_yield$API$get.meta,_ref4=meta||{},pagination=_ref4.pagination,_ref5=pagination||{},totalCount=_ref5.totalCount,isNewReadingAlarm?(_ref6=data||{},readingalarmoccurrence=_ref6.readingalarmoccurrence,_this.occurrenceList=readingalarmoccurrence):(_ref7=data||{},alarmoccurrence=_ref7.alarmoccurrence,_this.occurrenceList=alarmoccurrence),_this.occurrenceCount=totalCount,_this.recordCount=_this.occurrenceCount,_this.occurenceloading=!1,_context.next=26;break;case 23:_context.prev=23,_context.t0=_context["catch"](1),_this.$message.error(_context.t0);case 26:case"end":return _context.stop()}}),_callee,null,[[1,23]])})))()},getEvents:function(payload){var _arguments2=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force,moduleName,perPage,_ref8,filters,orderBy,orderType,withCount,page,params,_yield$API$get2,data,meta,_ref9,baseevent,_ref10,pagination,_ref11,totalCount;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return force=_arguments2.length>1&&void 0!==_arguments2[1]&&_arguments2[1],_context2.prev=1,moduleName="baseevent",perPage=_this2.perPage,_ref8=payload||{},filters=_ref8.filters,orderBy=_ref8.orderBy,orderType=_ref8.orderType,withCount=!0,page=_this2.eventCurrentPage,params={moduleName:moduleName,filters:filters,page:page,force:force,orderBy:orderBy,orderType:orderType,withCount:withCount,perPage:perPage},_this2.currentParamsForFilter=params,_context2.next=11,api/* API */.bl.get("v3/modules/data/list",params);case 11:_yield$API$get2=_context2.sent,data=_yield$API$get2.data,meta=_yield$API$get2.meta,_ref9=data||{},baseevent=_ref9.baseevent,_ref10=meta||{},pagination=_ref10.pagination,_ref11=pagination||{},totalCount=_ref11.totalCount,_this2.eventList=baseevent,_this2.eventCount=totalCount,_this2.eventloading=!1,_context2.next=25;break;case 22:_context2.prev=22,_context2.t0=_context2["catch"](1),_this2.$message.error(_context2.t0);case 25:case"end":return _context2.stop()}}),_callee2,null,[[1,22]])})))()},loadOccurrence:function(filter){this.occurenceloading=!0;var params={};params.page=this.page,params.perPage=this.perPage,params.filters=filter.filters,params.orderBy="CREATED_TIME",params.orderType="desc",this.getOccurrence(params)},loadEvent:function(filter){this.eventloading=!0;var params={};params.page=this.page,params.perPage=this.perPage,params.filters=filter.filters,params.orderBy="CREATED_TIME",params.orderType="desc",this.getEvents(params)},handleNextPageOccurrence:function(page){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.occurrenceCurrentPage=page,_context3.next=3,_this3.getOccurrence(_this3.currentParamsForFilter);case 3:case"end":return _context3.stop()}}),_callee3)})))()},handleNextPageEvent:function(page){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this4.eventCurrentPage=page,_context4.next=3,_this4.getEvents(_this4.currentParamsForFilter);case 3:case"end":return _context4.stop()}}),_callee4)})))()},filterOccurrence:function(filter){this.dateObj=filter;var newfilter={};newfilter["alarm"]={operatorId:36,value:[JSON.stringify(this.details.alarm.id)]},newfilter["createdTime"]={operatorId:filter.operatorId},NewDateHelper/* default */.Z.isValueRequired(filter.operatorId)&&filter.value&&(newfilter.createdTime["value"]=[],newfilter.createdTime["value"][0]=JSON.stringify(filter.value[0]),newfilter.createdTime["value"][1]=JSON.stringify(filter.value[1])),this.loadOccurrence({filters:JSON.stringify(newfilter)})},filterEvent:function(filter){this.dateObj=filter;var newfilter={};newfilter["baseAlarm"]={operatorId:36,value:[JSON.stringify(this.details.alarm.id)]},newfilter["createdTime"]={operatorId:filter.operatorId},NewDateHelper/* default */.Z.isValueRequired(filter.operatorId)&&filter.value&&(newfilter.createdTime["value"]=[],newfilter.createdTime["value"][0]=JSON.stringify(filter.value[0]),newfilter.createdTime["value"][1]=JSON.stringify(filter.value[1])),this.loadEvent({filters:JSON.stringify(newfilter)})},changeDateFilter:function(dateFilter){this.dateObj=dateFilter,this.localDateFormat.includes(dateFilter.operatorId)?(this.dateOperator=dateFilter.operatorId,this.dateValue=null):(this.dateOperator=20,this.dateValue=dateFilter.value.join())},constructField:function(displayName,name,displayType){return{displayName:displayName,name:name,displayType:displayType}}}},anomalies_OccurrenceHistoryvue_type_script_lang_js=OccurrenceHistoryvue_type_script_lang_js,OccurrenceHistory_component=(0,componentNormalizer/* default */.Z)(anomalies_OccurrenceHistoryvue_type_script_lang_js,render,staticRenderFns,!1,null,"d411dcd8",null)
/* harmony default export */,OccurrenceHistory=OccurrenceHistory_component.exports},
/***/806339:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/utils/WidgetPagination.vue?vue&type=template&id=6b10cd5b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-widget-pagination"},[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},staticRenderFns=[],WidgetPaginationvue_type_script_lang_js={props:["currentPage","perPage","total","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{total:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.updateCurrentPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.updateCurrentPage()},updateCurrentPage:function(){
// Update currentPage value
this.$emit("update:currentPage",this.page),this.$emit("onChange")}}},utils_WidgetPaginationvue_type_script_lang_js=WidgetPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(utils_WidgetPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetPagination=component.exports},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/54426.js.map