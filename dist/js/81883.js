"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[81883],{
/***/81883:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CurrentWeatherCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/site/CurrentWeatherCard.vue?vue&type=template&id=627955f0&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_c("div",[_c("spinner",{attrs:{show:!0}})],1):_vm.$validation.isEmpty(_vm.currentWeatherData)?_c("div",{staticClass:"height100"},[_c("div",{staticClass:"height100 d-flex flex-col justify-center align-center"},[_c("div",[_c("inline-svg",{staticClass:"vertical-middle'",attrs:{src:"svgs/cardNodata",iconClass:"icon icon-80"}})],1),_c("div",{staticClass:"fc-black3-16 self-center bold"},[_vm._v(" "+_vm._s(_vm.emptyStateMsg)+" ")])])]):_c("div",{staticClass:"height100 current-weather-widget"},[_c("div",{staticClass:"current-weather-header p20 pT15 pB10 border-bottom14 "},[_c("p",{staticClass:"f18 bold mB10"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.weather.current_weather"))+" ")]),_c("div",{staticClass:"d-flex flex-direction-row bold mT15 mB10"},[_c("div",[_vm._v(_vm._s(_vm.$t("common._common.today"))+",")]),_c("div",[_vm._v(_vm._s(_vm.getFormatedTime(_vm.currentWeatherData)))])])]),_c("div",{staticClass:"current-weather-body height100 p30 flex-center-column justify-around"},[_c("div",{staticClass:"weather-icon"},[_c("div",{},[_c("fc-icon",{attrs:{group:"default",name:_vm.iconSrc,size:"50",color:"#3ab2c2"}})],1)]),_c("div",{staticClass:"weather-temperature"},[_c("div",{staticClass:"temperature-text"},[_vm._v(" "+_vm._s(_vm.temperature)+" ")])]),_c("div",{staticClass:"weather-label"},[_c("div",{staticClass:"weather-text self-center f18 fw4"},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.currentWeatherData,"summary","---"))+" ")])])])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(634338),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(32284)),validation=__webpack_require__(990260),helpers=__webpack_require__(778390),WeatherUtils=__webpack_require__(62561),CurrentWeatherCardvue_type_script_lang_js={props:["details"],data:function(){return{currentWeatherData:{},loading:!1,stationAssociated:!0,temperatureUnit:""}},created:function(){this.init()},computed:{emptyStateMsg:function(){var stationAssociated=this.stationAssociated;return stationAssociated?this.$t("space.sites.no_weather_data"):this.$t("space.sites.weather.no_weather_station")},iconSrc:function(){var _ref=this.currentWeatherData||{},icon=_ref.icon;return(0,WeatherUtils/* getIconSrc */.zW)(icon)},temperature:function(){var _ref2=this||{},currentWeatherData=_ref2.currentWeatherData,currentTemperature=this.$getProperty(currentWeatherData,"temperature","---"),unit=this.$getProperty(currentWeatherData,"unit","°C");return"".concat(currentTemperature).concat(unit)}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.setUnitForTemperature("newWeather");case 2:return _context.next=4,_this.loadWeatherData();case 4:case"end":return _context.stop()}}),_callee)})))()},setUnitForTemperature:function(moduleName){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data,error,_fieldsMap$temperatur,_ref3,meta,_ref4,_ref4$fields,fields,fieldsMap;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,api/* API */.bl.get("/module/meta",{moduleName:moduleName});case 3:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(0,validation/* isEmpty */.xb)(data)||(_ref3=data||{},meta=_ref3.meta,_ref4=meta||{},_ref4$fields=_ref4.fields,fields=void 0===_ref4$fields?[]:_ref4$fields,fieldsMap={},fields.forEach((function(field){fieldsMap[field.name]=field})),_this2.temperatureUnit=null===(_fieldsMap$temperatur=fieldsMap["temperature"])||void 0===_fieldsMap$temperatur?void 0:_fieldsMap$temperatur.unit),_context2.next=12;break;case 9:_context2.prev=9,_context2.t0=_context2["catch"](0),_this2.temperatureUnit="°C";case 12:case"end":return _context2.stop()}}),_callee2,null,[[0,9]])})))()},loadWeatherData:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _this3$details,details,_this3$temperatureUni,temperatureUnit,_ref5,siteId,params,_yield$API$get2,data,error,_ref6,time,temperature,_ref6$unit,unit,_ref6$icon,icon,_ref6$summary,summary;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3$details=_this3.details,details=void 0===_this3$details?{}:_this3$details,_this3$temperatureUni=_this3.temperatureUnit,temperatureUnit=void 0===_this3$temperatureUni?"°C":_this3$temperatureUni,_ref5=details||{},siteId=_ref5.id,params={siteId:siteId},_this3.loading=!0,_context3.prev=4,_context3.next=7,api/* API */.bl.get("v3/weather/currentdata",params);case 7:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,(0,validation/* isEmpty */.xb)(error)?(_this3.currentWeatherData={},(0,validation/* isEmpty */.xb)(data)||(_ref6=data||{},time=_ref6.actualTtime,temperature=_ref6.temperature,_ref6$unit=_ref6.unit,unit=void 0===_ref6$unit?temperatureUnit:_ref6$unit,_ref6$icon=_ref6.icon,icon=void 0===_ref6$icon?"default":_ref6$icon,_ref6$summary=_ref6.summary,summary=void 0===_ref6$summary?"---":_ref6$summary,(0,validation/* isEmpty */.xb)(temperature)||(temperature=Math.round(temperature),_this3.currentWeatherData={time:time,temperature:temperature,unit:unit,icon:icon,summary:summary}))):(_this3.currentWeatherData={},-1===error.code&&(_this3.stationAssociated=!1)),_context3.next=16;break;case 13:_context3.prev=13,_context3.t0=_context3["catch"](4),_this3.currentWeatherData={};case 16:_this3.loading=!1;case 17:case"end":return _context3.stop()}}),_callee3,null,[[4,13]])})))()},getFormatedTime:function(_ref7){var time=_ref7.time;return(0,helpers/* getTimeInOrgFormat */.eB)(time)}}},site_CurrentWeatherCardvue_type_script_lang_js=CurrentWeatherCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(site_CurrentWeatherCardvue_type_script_lang_js,render,staticRenderFns,!1,null,"627955f0",null)
/* harmony default export */,CurrentWeatherCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/81883.js.map