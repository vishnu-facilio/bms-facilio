(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[92409],{
/***/469388:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageSort}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PageSort.vue?vue&type=template&id=55d15ba8&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"page-sort-popover p0"},[_c("outside-click",{attrs:{visibility:_vm.visible},on:{"update:visibility":function($event){_vm.visible=$event}}},[_c("el-popover",{ref:"sortComponentPopover",staticClass:"sort-popover",attrs:{placement:"left","popper-class":"page-sort-popover","visible-arrow":!0},model:{value:_vm.visible,callback:function($$v){_vm.visible=$$v},expression:"visible"}},[_c("div",{staticClass:"sort-popovernew",staticStyle:{"min-width":"180px"},attrs:{link:""}},[_c("el-input",{staticClass:"tag-list-search",attrs:{type:"text",placeholder:"Search..."},model:{value:_vm.search,callback:function($$v){_vm.search=$$v},expression:"search"}}),_vm._l(_vm.sortList,(function(name,index){return _c("div",{key:index,staticClass:"position-relative sort-active-check",on:{click:function($event){$event.stopPropagation(),_vm.updateOrderBy(name),_vm.close()}}},[name&&_vm.viewDetail&&_vm.viewDetail.fieldDisplayNames&&_vm.viewDetail.fieldDisplayNames[name]?_c("div",[_vm.selectedFields(name)?_c("div",[""===_vm.search||_vm.viewDetail.fieldDisplayNames[name].toLowerCase().startsWith(_vm.search.toLowerCase())?_c("div",[_c("div",{staticClass:"fc-div-hover page-sort-list",class:{selected:_vm.orderBy===name,"flex-middle":_vm.orderBy===name},attrs:{label:name}},[_vm._v(" "+_vm._s(_vm.viewDetail.fieldDisplayNames[name])+" ")])]):_vm._e()]):_vm._e(),_c("i",{class:{"el-icon-check":_vm.orderBy===name}})]):_vm._e()])})),_c("div",{staticClass:"scr-sep"}),_vm.config.orderType?_c("div",{staticClass:"q-item-bottom-p fc-div-hover page-sort-list",attrs:{separator:""},on:{click:function($event){$event.stopPropagation(),_vm.updateOrderType("asc"),_vm.close()}}},[_c("div",{class:{selected:"asc"===_vm.orderType}},[_vm._v(" "+_vm._s(_vm.$t("common._common.ascending"))+" ")])]):_vm._e(),_vm.config.orderType?_c("div",{staticClass:"fc-div-hover page-sort-list",on:{click:function($event){$event.stopPropagation(),_vm.updateOrderType("desc"),_vm.close()}}},[_c("div",{class:{selected:"desc"===_vm.orderType}},[_vm._v(" "+_vm._s(_vm.$t("common._common.descending"))+" ")])]):_vm._e()],2)])],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),OutsideClick=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(21864)),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),PageSortvue_type_script_lang_js={props:["config","sortList","excludeFields"],data:function(){return{visible:!1,customLookupFieldsArray:[],search:""}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo}})),{},{orderBy:function(){return this.config.orderBy?this.config.orderBy:null},orderType:function(){return this.config.orderType?this.config.orderType:null},viewDetail:function(){return this.$store.state.view.currentViewDetail}}),watch:{moduleMeta:function(newVal,oldVal){oldVal!==newVal&&this.toFilterCustomLookupFields()}},components:{OutsideClick:OutsideClick/* default */.Z},methods:{toFilterCustomLookupFields:function(){var _this=this,moduleMeta=this.moduleMeta;(0,validation/* isEmpty */.xb)(moduleMeta)||(0,validation/* isEmpty */.xb)(moduleMeta.fields)||moduleMeta.fields.forEach((function(field){field.default||(0,validation/* isEmpty */.xb)(field.displayType)||"LOOKUP_SIMPLE"!==field.displayType._name||_this.customLookupFieldsArray.push(field)}))},open:function(){this.visible=!0},close:function(){this.visible=!1},selectedFields:function(label){if(this.excludeFields||this.customLookupFieldsArray){if(!(0,validation/* isEmpty */.xb)(this.excludeFields)){var key1=this.excludeFields.find((function(rt){return rt===label}));if(key1)return!1}if(!(0,validation/* isEmpty */.xb)(this.customLookupFieldsArray)){var customLookup=this.customLookupFieldsArray.find((function(rt){return rt.name===label}));if(customLookup)return!1}}return!0},updateOrderBy:function(orderBy){this.config.orderBy=orderBy,this.$emit("onchange",{orderBy:orderBy,orderType:this.orderType})},updateOrderType:function(orderType){this.config.orderType=orderType,this.$emit("onchange",{orderBy:this.orderBy,orderType:orderType})}}},components_PageSortvue_type_script_lang_js=PageSortvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PageSortvue_type_script_lang_js,render,staticRenderFns,!1,null,"55d15ba8",null)
/* harmony default export */,PageSort=component.exports},
/***/478264:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ViewCustomization}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ViewCustomization.vue?vue&type=template&id=a8fd5fbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.showDialog,fullscreen:!0,"custom-class":"cc-dialog",title:"View Settings","append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"scrollable",staticStyle:{padding:"30px","max-height":"85vh"}},[_c("draggable",{attrs:{options:{handle:".icon-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},list:_vm.viewList}},_vm._l(_vm.viewList,(function(view){return _c("div",{key:view.name,staticClass:"column-item"},[view?_c("div",[_vm._v(_vm._s(_vm.menu?view.label:view.displayName))]):_vm._e(),_c("i",{staticClass:"fa fa-exchange icon-right",attrs:{"aria-hidden":"true"}})])})),0)],1),_c("div",{staticClass:"row cc-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("button",{staticClass:"el-button col-6 uppercase ls9 f12 form-btn el-button--default",staticStyle:{"background-color":"#f4f4f4",border:"0","border-left":"1px solid white","border-radius":"0px",padding:"18px","font-size":"13px","font-weight":"500","letter-spacing":"0.8px","text-align":"center",color:"#5f5f5f",margin:"0"},attrs:{type:"button"},on:{click:function($event){_vm.showDialog=!1}}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"el-button col-6 uppercase ls9 f12 form-btn  el-button--default",staticStyle:{"margin-left":"0px",color:"#ffffff","background-color":"#39b2c2",border:"0","border-radius":"0px","font-size":"13px","font-weight":"500","letter-spacing":"0.8px","text-align":"center"},attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v("Save")])])])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(990260)),vuex_esm=__webpack_require__(420629),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),ViewCustomizationvue_type_script_lang_js={props:["visible","moduleName","menu","reload"],data:function(){return{showDialog:this.visible,viewList:[],lists:{}}},components:{draggable:vuedraggable_umd_default()},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({views:function(state){return state.view.views}})),mounted:function(){(0,validation/* isEmpty */.xb)(this.menu)?this.viewList=this.$helpers.cloneObject(this.views):this.viewList=this.$helpers.cloneObject(this.menu)},watch:{visible:function(val){this.showDialog=val},showDialog:function(val){this.$emit("update:visible",val)},views:function(val){this.viewList=this.$helpers.cloneObject(val)},menu:function(val){this.viewList=this.$helpers.cloneObject(val)}},methods:{save:function(){var _this=this;this.$store.dispatch("view/customizeView",{moduleName:this.moduleName,views:this.viewList.map((function(view,index){return{id:view.id,sequenceNumber:index+1,name:view.name}}))}).then((function(){_this.showDialog=!1,_this.reload&&_this.$emit("onchange")}))}}},components_ViewCustomizationvue_type_script_lang_js=ViewCustomizationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ViewCustomizationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ViewCustomization=component.exports},
/***/19964:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NewLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/approval/NewLayout.vue?vue&type=template&id=a2c55a36
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"layout container"},[_vm.$route.path.includes("summary")?_vm._e():_c("subheader",{staticClass:"inventory_subheader",attrs:{menu:_vm.subheaderMenu,newbtn:"true",type:"workorder",parent:this.parentPath+"/approvals",listCount:_vm.listCount,showRearrange:!1,showCurrentViewOnly:_vm.showQuickSearch,filtersRetain:_vm.filtersRetains,maxVisibleMenu:3}},[_c("template",{slot:"prefix"},[_c("div",{staticClass:"fL fc-subheader-left"},[_c("div",{staticClass:"pR15 pointer"},[_c("img",{staticClass:"wo-three-line",attrs:{src:__webpack_require__(358413),width:"14",height:"14"},on:{click:function($event){$event.stopPropagation(),_vm.showListWorkorder=!0}}}),_vm.moduleVsViews.preparingViews?_c("el-dropdown",{staticClass:"fc-dropdown-menu pL10",attrs:{trigger:"click"},on:{command:_vm.openChild}},[_c("span",{staticClass:"el-dropdown-link"},[_vm._v(" "+_vm._s(_vm.moduleVsViews.mainViewsList[_vm.selectedList])+" "),_vm.showQuickSearch?_vm._e():_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_vm.moduleVsViews.preparingViews&&!_vm.showQuickSearch?_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.moduleVsViews.preparingViews,(function(view,key){return _c("el-dropdown-item",{key:key,attrs:{command:key}},[_vm._v(_vm._s(_vm.moduleVsViews.mainViewsList[key]))])})),1):_vm._e()],1):_vm._e()],1),_vm.moduleVsViews.preparingViews?_c("div",{staticClass:"fc-separator-lg mL10 mR10"}):_vm._e()])]),_c("div",{staticClass:"fR fc-subheader-right fc-subheader-right-inventory"},[_vm.showQuickSearch?_vm._e():[_c("div",{staticClass:"pL15 fc-black-small-txt-12"},[_c("pagination",{attrs:{total:_vm.listCount,perPage:50}}),_c("div",{staticClass:"block"})],1),_vm.listCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e(),_c("div",{staticClass:"pointer user-select-none pR0 sort-icon",on:{click:function($event){return $event.stopPropagation(),_vm.$refs.sortPopover.open()}}},[_c("img",{staticClass:"sort-icon-hover mR10 mL10 mT10",staticStyle:{width:"19px",height:"19px"},attrs:{src:__webpack_require__(137308)}}),_vm.sortConfigList?_c("page-sort",{ref:"sortPopover",attrs:{sortList:_vm.sortConfigList,config:_vm.sortConfig,excludeFields:_vm.excludedSortFields},on:{onchange:_vm.updateSort}}):_vm._e()],1),_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticClass:"pR10"},[_c("i",{staticClass:"el-icon-search fc-black-2 f16 pointer mR10 mL10 fw-bold",on:{click:function($event){return $event.stopPropagation(),_vm.toggleQuickSearch()}}})]),_c("div",{directives:[{name:"show",rawName:"v-show",value:!_vm.showQuickSearch,expression:"!showQuickSearch"}],staticClass:"pL10"},[_vm.$hasPermission("inventory:CREATE")&&"inventoryrequest"===_vm.getCurrentModule?_c("router-link",{attrs:{to:"/app/wo/approvals/ir/new/ir?create=new",append:""}},[_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-create-btn create-btn",attrs:{title:"New Inventory Request","data-size":"small"}},[_c("i",{staticClass:"el-icon-plus white-color f12 fw-bold"})])],1):_vm._e()],1)],_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],staticClass:"fc-black-small-txt-12 fc-subheader-right-search-inventory"},[_vm.filterConfig?_c("new-search",{attrs:{loadViews:!0,moduleName:_vm.filterConfig.moduleName,config:_vm.filterConfig,quickSearchQuery:_vm.quickSearchQuery,save:_vm.save,saveAs:_vm.saveAs,resetFilters:_vm.resetFilters,sortConfig:_vm.sortConfig,showSearch:_vm.showQuickSearch,defaultFilter:_vm.defaultFilter},on:{loadView:function($event){return _vm.loadGroupViews()},hideSearch:function($event){_vm.showQuickSearch=!1}}}):_vm._e(),_c("div",{staticClass:"filter-search-close"})],1)],2)],2),_c("div",{staticClass:"height100 row width100"},[null!==_vm.appliedFilters?_c("div",{staticClass:"width100"},[_c("div",{staticClass:"fL",staticStyle:{width:"84%"}},[_vm.filterConfig?_c("new-tag",{staticClass:"layout-new-tag",attrs:{showCloseIcon:!0,config:_vm.filterConfig,showFilterAdd:_vm.showAddFilter,filters:_vm.appliedFilters}}):_vm._e()],1),_c("div",{staticClass:"save-btn-section"},[_vm.appliedFilters?_c("div",[_vm.viewDetail.isDefault?_c("div",[Object.keys(_vm.appliedFilters).length>"0"?_c("el-button",{staticClass:"subheader-saveas-btn saveas",on:{click:function($event){_vm.saveAs=!_vm.saveAs}}},[_vm._v(_vm._s(_vm.$t("common._common.save_filters")))]):_vm._e(),Object.keys(_vm.appliedFilters).length>"0"?_c("div",{staticClass:"clear-filter",on:{click:function($event){_vm.resetFilters=!_vm.resetFilters}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.clear_all_filters"))+" ")]):_vm._e()],1):_c("div",[_c("el-dropdown",{on:{command:_vm.savingView}},[_c("el-button",{staticClass:"subheader-saveas-btn",attrs:{type:"primary"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.save_filters"))+" "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"Save"}},[_vm._v(_vm._s(_vm.$t("common._common._save")))]),_c("el-dropdown-item",{attrs:{command:"Save As"}},[_vm._v(_vm._s(_vm.$t("common._common.save_as")))])],1)],1),Object.keys(_vm.appliedFilters).length>"0"?_c("div",{staticClass:"clear-filter",on:{click:function($event){_vm.resetFilters=!_vm.resetFilters}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.clear_all_filters"))+" ")]):_vm._e()],1)]):_vm._e()])]):_vm._e(),_c("div",{staticClass:"height100 f-list-view"},[_c("router-view",{on:{syncCount:_vm.callbackMethod}})],1)]),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showListWorkorder,expression:"showListWorkorder"}]},[_vm.filterConfig?_c("views-list",{attrs:{config:_vm.filterConfig,preparingViews:_vm.moduleVsViews.preparingViews,views:_vm.views,showListWorkorder:_vm.showListWorkorder,mainViewsList:_vm.moduleVsViews.mainViewsList,parentPathList:_vm.moduleVsViews.parentPathList,showEditIcon:_vm.showEditIcon},on:{delete:_vm.deleteView,"update:views":function($event){_vm.views=$event},"update:showListWorkorder":function($event){_vm.showListWorkorder=$event},"update:show-list-workorder":function($event){_vm.showListWorkorder=$event}}}):_vm._e()],1),_c("view-customization",{attrs:{visible:_vm.showViewSettings,reload:!0,menu:_vm.subheaderMenu,moduleName:_vm.getCurrentModule},on:{"update:visible":function($event){_vm.showViewSettings=$event},onchange:function($event){return _vm.loadGroupViews()}}})],1)},staticRenderFns=[],esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),Subheader=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(947522),__webpack_require__(785869)),ViewCustomization=__webpack_require__(478264),vuex_esm=__webpack_require__(420629),ViewsList=__webpack_require__(795214),NewSearch=__webpack_require__(521816),FPagination=__webpack_require__(929593),NewTag=__webpack_require__(588633),PageSort=__webpack_require__(469388),NewLayoutvue_type_script_lang_js={data:function(){return{parentPath:"/app/wo",showListWorkorder:!1,showEditIcon:!1,showAddFilter:!0,defaultFilter:"subject",listCount:"",save:!1,saveAs:!1,moduleMetaObject:{},filtersRetains:["search","includeParentFilter"],resetFilters:!1,selectedList:null,showQuickSearch:!1,quickSearchQuery:null,excludedSortFields:null,sortConfig:{orderBy:{label:this.$t("maintenance.wr_list.datecreated"),value:"createdTime"},orderType:"desc"},sortConfigList:null,filterSelected:!1,showViewSettings:!1,moduleVsViews:{mainViewsList:{},preparingViews:{},parentPathList:{}},filterConfig:null}},components:{Subheader:Subheader/* default */.Z,ViewCustomization:ViewCustomization/* default */.Z,ViewsList:ViewsList/* default */.Z,NewSearch:NewSearch/* default */.Z,NewTag:NewTag/* default */.Z,Pagination:FPagination/* default */.Z,PageSort:PageSort/* default */.Z},created:function(){this.$store.dispatch("view/clearViews")},mounted:function(){this.$helpers.isEtisalat()&&(this.parentPath="/app/home"),this.loadAllModuleViews(),this.loadGroupViews(),"approval"===this.getCurrentModule?this.$store.dispatch("view/loadModuleMeta","workorder"):this.$store.dispatch("view/loadModuleMeta",this.getCurrentModule),this.getViewDetail(),!this.filterSelected&&this.filters&&this.toggleViewFilter(),this.loadSortConfigListForModule(),this.setFilterConfig()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)({loadViewDetail:"view/loadViewDetail",savesorting:"view/savesorting"})),(0,vuex_esm/* mapState */.rn)({viewDetail:function(state){return state.view.currentViewDetail}})),{},{views:function(){return this.$store.state.view.groupViews},subheaderMenu:function(){return this.getSubHeaderMenu()},showFilter:function(){return this.filterSelected&&-1===this.$route.path.indexOf("/summary/")},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},currentView:function(){return this.$route.params.viewname?this.$route.params.viewname:"all"},appliedFilters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},includeParentFilter:function(){return this.$route.query.includeParentFilter&&("true"===this.$route.query.includeParentFilter||!0===this.$route.query.includeParentFilter)},getCurrentModule:function(){return this.selectedList=this.$route.meta.module||"approval",this.$route.meta.module||"approval"},isWorkPermitLicenseEnabled:function(){var $helpers=this.$helpers,_ref=$helpers||{},isLicenseEnabled=_ref.isLicenseEnabled;return isLicenseEnabled("WORK_PERMIT")}}),watch:{filters:function(val){null==val||this.filterSelected||this.toggleViewFilter()},currentView:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.getViewDetail()},viewDetail:function(newVal,oldVal){var _this=this;if(newVal&&oldVal!==newVal&&this.viewDetail.sortFields){var orderBy=this.sortConfigList.find((function(name){return name===_this.viewDetail.sortFields[0].sortField.name}));this.sortConfig={orderType:this.viewDetail.sortFields[0].isAscending?"asc":"desc",orderBy:orderBy}}},getCurrentModule:function(newVal,oldVal){this.loadGroupViews(),"approval"===this.getCurrentModule?this.$store.dispatch("view/loadModuleMeta","workorder"):this.$store.dispatch("view/loadModuleMeta",this.getCurrentModule),this.getViewDetail(),this.setFilterConfig(),this.loadSortConfigListForModule()},showListWorkorder:function(){this.loadSortConfigListForModule()}},methods:{loadGroupViews:function(){var param={moduleName:this.getCurrentModule,status:!1};this.$store.dispatch("view/loadGroupViews",param)},loadAllModuleViews:function(){var isWorkPermitLicenseEnabled=this.isWorkPermitLicenseEnabled,modules=[{moduleName:"approval",displayName:this.$t("common.header.workrequests"),parentPath:"".concat(this.parentPath,"/approvals/wr/")}],workPermit={moduleName:"workpermit",displayName:this.$t("Work Permits"),parentPath:"".concat(this.parentPath,"/approvals/wp/")};isWorkPermitLicenseEnabled&&modules.push(workPermit);for(var self=this,_loop=function(){var moduleKey=_modules[_i];self.moduleVsViews.mainViewsList[moduleKey.moduleName]=moduleKey.displayName,self.moduleVsViews.parentPathList[moduleKey.moduleName]=moduleKey.parentPath,self.moduleVsViews.preparingViews[moduleKey.moduleName]=[],self.$http.get("/v2/views/viewList?moduleName="+moduleKey.moduleName+"&groupStatus=false").then((function(response){if(response.data.result){var views=response.data.result.views;"workpermit"===moduleKey.moduleName&&(views=(views||[]).filter((function(view){return"requested"===view.name}))),self.moduleVsViews.preparingViews[moduleKey.moduleName]=views}})).catch((function(error){}))},_i=0,_modules=modules;_i<_modules.length;_i++)_loop()},updateSort:function(sorting){this.$store.dispatch("view/savesorting",{viewName:this.currentView,orderBy:sorting.orderBy,orderType:sorting.orderType,moduleName:this.getCurrentModule})},setFilterConfig:function(){"approval"===this.getCurrentModule?(this.defaultFilter="subject",this.filterConfig={moduleName:"workorder",includeParentCriteria:!0,fetchModuleAction:"workorder/fetchWorkOrders",path:"".concat(this.parentPath,"/approvals/wr"),data:{subject:{label:"Subject",displayType:"string",value:[]},category:{label:this.$t("maintenance.wr_list.category"),displayType:"select",options:{},value:[]},space:{label:this.$t("maintenance._workorder.space"),displayType:"space",options:{},value:[]},asset:{label:this.$t("maintenance._workorder.asset"),displayType:"asset",options:{},value:[]},assignedTo:{label:this.$t("maintenance.wr_list.staff/team"),displayType:"select",options:{},value:[]},ticketType:{label:this.$t("maintenance.wr_list.type"),displayType:"select",options:{},value:[],key:"type"},status:{label:this.$t("maintenance._workorder.status"),displayType:"select",options:{},value:[]},priority:{label:this.$t("maintenance.wr_list.priority"),displayType:"select",options:{},value:[]},sourceType:{label:this.$t("maintenance.wr_list.source_type"),displayType:"select",options:this.$constants.SourceType,value:[]},dueDate:{label:this.$t("maintenance.wr_list.duedate"),displayType:"select",type:"date",customdate:!0,options:{26:"Overdue",22:"Today",23:"Tomorrow","8_41":"Next 8 Hours"},value:[]},createdTime:{label:this.$t("maintenance.wr_list.created_date"),displayType:"select",single:!0,type:"date",customdate:!0,options:{"1_40":"Within 1 Hour","12_40":"Within 12 Hours","24_40":"Within 24 Hours",22:"Today",25:"Yesterday",31:"This Week",28:"This Month",27:"Last Month","2_39":"Last 2 Months","6_39":"Last 6 Months"},value:""}},availableColumns:["subject","category","resource","dueDate","status","assignedTo","createdTime","comments","tasks","priority","noOfNotes","noOfTasks","modifiedTime","actualWorkStart","actualWorkEnd"],fixedCols:["subject"],saveView:!0}):"inventoryrequest"===this.getCurrentModule?(this.defaultFilter="name",this.filterConfig={moduleName:"inventoryrequest",includeParentCriteria:!0,path:"".concat(this.parentPath,"approvals/ir"),data:{name:{label:"Name",displayType:"string",value:[]},parentId:{label:"Work Order",displayType:"string",value:[]},localId:{label:"Local Id",displayType:"string",value:[]},requestedBy:{label:"Requested By",displayType:"select",options:{},value:[]},storeRoom:{label:"Storeroom",displayType:"select",options:{},value:[]},requestedFor:{label:"Requested For",displayType:"select",options:{},value:[]},requestedTime:{label:"Requested Time",displayType:"select",type:"date",customdate:!0,options:{"1_40":"Within 1 Hour","12_40":"Within 12 Hours","24_40":"Within 24 Hours",22:"Today",25:"Yesterday",31:"This Week",28:"This Month",27:"Last Month","2_39":"Last 2 Months","6_39":"Last 6 Months"},value:""},requiredTime:{label:"Required Time",displayType:"select",type:"date",customdate:!0,options:{"1_40":"Within 1 Hour","12_40":"Within 12 Hours","24_40":"Within 24 Hours",22:"Today",25:"Yesterday",31:"This Week",28:"This Month",27:"Last Month","2_39":"Last 2 Months","6_39":"Last 6 Months"},value:""}},availableColumns:["name"],fixedCols:["name"],saveView:!0}):"workpermit"===this.getCurrentModule&&(this.defaultFilter="name",this.filterConfig={moduleName:"workpermit",includeParentCriteria:!0,path:"".concat(this.parentPath,"/approvals/wp"),data:{name:{label:"Name",displayType:"string",value:[]},requestedBy:{label:"Requested By",displayType:"select",options:{},value:[]},vendor:{label:"Vendor",displayType:"select",options:{},value:[]}},availableColumns:["name"],fixedCols:["name"],saveView:!0})},openChild:function(command){var self=this;self.selectedList=null,self.selectedList=command;var a2=self.moduleVsViews.preparingViews[command];a2&&self.$router.push(this.moduleVsViews.parentPathList[command]+a2[0].name),this.loadSortConfigListForModule()},savingView:function(command){"Save"===command?this.save=!this.save:"Save As"===command&&(this.saveAs=!this.saveAs)},deleteView:function(a,index){var _this2=this;this.$dialog.confirm({title:"Delete View",message:"Are you sure you want to delete this View?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&_this2.$http.post("/view/delete",{id:a.id}).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(_this2.loadGroupViews(),
// this.preparingViews['CustomViews'].splice(index, 1)
_this2.$message.success("View deleted successfully"),_this2.$router.push(_this2.filterConfig.path+_this2.views[0].name)):_this2.$message.error("View cannot be deleted")}))}))},toggleQuickSearch:function(){this.showQuickSearch=!this.showQuickSearch},toggleViewFilter:function(){this.filterSelected=!this.filterSelected},callbackMethod:function(newVal){this.listCount=newVal},getViewDetail:function(){this.$store.dispatch("view/loadViewDetail",{viewName:this.currentView,moduleName:this.getCurrentModule})},getSubHeaderMenu:function(){var list=[],self=this;return Object.keys(self.views).forEach((function(key){var view=self.views[key];"workpermit"===self.getCurrentModule&&"requested"!==view.name||list.push({label:view.displayName,path:{path:self.moduleVsViews.parentPathList[self.getCurrentModule]+view.name},permission:"workorder:READ,READ_TEAM,READ_OWN",id:view.id,name:view.name})})),list},metaFieldsLists:function(){var self=this;self.sortConfigList=[],self.$http.get("/module/metafields?moduleName=workorder").then((function(response){if(self.moduleMetaObject=response.data.meta,self.moduleMetaObject&&self.moduleMetaObject.fields)for(var i=0;i<self.moduleMetaObject.fields.length;i++)self.sortConfigList.push(self.moduleMetaObject.fields[i].name)}))},loadSortConfigListForModule:function(){"approval"===this.getCurrentModule?(this.excludedSortFields=["assignedTo","assignedBy","assignmentGroup","createdBy","requestedBy","requester"],this.filtersRetains=["search","includeParentFilter"],this.metaFieldsLists()):"inventoryrequest"===this.getCurrentModule&&(this.excludedSortFields=null,this.filtersRetains=null,this.sortConfigList=["localId","name","requestedTime","requiredTime"])}}},approval_NewLayoutvue_type_script_lang_js=NewLayoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_NewLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewLayout=component.exports},
/***/137308:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f5655b5c7d337eaaa1c310ef6456f44e.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/92409.js.map