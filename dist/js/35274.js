"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[35274],{
/***/576583:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAddDataPoint}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/FAddDataPoint.vue?vue&type=template&id=d1ff10a8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"text-left"},["reading"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Type")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",disabled:_vm.canDisableTypePicker},model:{value:_vm.compareObject.type,callback:function($$v){_vm.$set(_vm.compareObject,"type",$$v)},expression:"compareObject.type"}},[_c("el-option",{attrs:{label:"Space",value:"space"}}),_c("el-option",{attrs:{label:"Asset",value:"asset"}})],1)],1),"space"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Space")]),_vm.multipleParent?_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{multiple:"",filterable:""},on:{change:_vm.loadReadingsOnly},model:{value:_vm.compareObject.parentIds,callback:function($$v){_vm.$set(_vm.compareObject,"parentIds",$$v)},expression:"compareObject.parentIds"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:parseInt(space.id)}})})),1):_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectSpace},model:{value:_vm.compareObject.spaceId,callback:function($$v){_vm.$set(_vm.compareObject,"spaceId",$$v)},expression:"compareObject.spaceId"}},_vm._l(_vm.spaceList,(function(space,index){return _c("el-option",{key:index,attrs:{label:space.name+" ("+space.spaceTypeVal+")",value:parseInt(space.id)}})})),1)],1):_vm._e(),"asset"===_vm.compareObject.type?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Asset")]),_vm.multipleParent?_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",multiple:""},on:{change:_vm.loadReadingsOnly},model:{value:_vm.compareObject.parentIds,callback:function($$v){_vm.$set(_vm.compareObject,"parentIds",$$v)},expression:"compareObject.parentIds"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1):_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.assetList,(function(asset,index){return _c("el-option",{key:index,attrs:{label:asset.name,value:asset.id}})})),1)],1):_vm._e(),_vm.newReading?_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt pT10"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.setReading},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.field.displayName,value:field.field.id}})})),1)],1):_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Reading")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.displayName,value:field.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5b hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:func.value}}):_vm._e()})),1)],1)]):_vm._e(),"meter"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.$store.getters.getBuildingsPickList(),(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Meter")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectAsset},model:{value:_vm.compareObject.assetId,callback:function($$v){_vm.$set(_vm.compareObject,"assetId",$$v)},expression:"compareObject.assetId"}},_vm._l(_vm.subMeters,(function(meter,index){return _c("el-option",{key:index,attrs:{label:meter.name,value:meter.id}})})),1)],1),!_vm.compareObject.readingFieldId||"undefined"!==typeof _vm.aggregate&&0===_vm.aggregate?_vm._e():_c("div",{staticClass:"p5 hide",class:{hide:!_vm.source}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Aggregate")]),_c("el-select",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:"",placeholder:"Choose Function",title:"Choose Function"},model:{value:_vm.compareObject.aggregateFunc,callback:function($$v){_vm.$set(_vm.compareObject,"aggregateFunc",$$v)},expression:"compareObject.aggregateFunc"}},_vm._l(_vm.aggregateFunctions,(function(func,funcidx){return func.value>0&&("lastValue"!==func.name||_vm.showLastValue)?_c("el-option",{key:funcidx,attrs:{label:func.label,value:parseInt(func.value)}}):_vm._e()})),1)],1)]):_vm._e(),"enpi"===_vm.dataPointType?_c("div",{staticClass:"p10 fc-report-popover-conetnt"},[_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("Building")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},on:{change:_vm.selectBuilding},model:{value:_vm.compareObject.buildingId,callback:function($$v){_vm.$set(_vm.compareObject,"buildingId",$$v)},expression:"compareObject.buildingId"}},_vm._l(_vm.buildingList,(function(building,key){return _c("el-option",{key:key,attrs:{label:building,value:key}})})),1)],1),_c("div",{staticClass:"p5"},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v("EnPI")]),_c("el-select",{staticClass:"report-dropDown fc-input-full-border2 ",attrs:{filterable:""},model:{value:_vm.compareObject.readingFieldId,callback:function($$v){_vm.$set(_vm.compareObject,"readingFieldId",$$v)},expression:"compareObject.readingFieldId"}},_vm._l(_vm.readingFields,(function(field,index){return _c("el-option",{key:index,attrs:{label:field.readingFields,value:field.id}})})),1)],1)]):_vm._e(),_c("div",{staticClass:"row mT30"},[_c("div",{staticClass:"modal-btn-cancel col-6 fc-el-btn",on:{click:_vm.cancel}},[_vm._v("cancel")]),_c("div",{staticClass:"modal-btn-save fc-el-btn col-6",on:{click:_vm.save}},[_vm._v("Ok")])])])},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(670560),__webpack_require__(420629)),validation=__webpack_require__(990260),FAddDataPointvue_type_script_lang_js={props:["type","aggregate","reading","showLastValue","source","newReading","editdata","multipleParent","readingType"],data:function(){return{compareObject:{type:"space",buildingId:"",spaceId:"",parentIds:[],assetId:"",readingFieldId:"",aggregateFunc:3,hasBaseline:!1,baseLineId:""},canDisableTypePicker:!1,baselineList:[],assetList:[],spaceList:[],subMeters:[],readingFields:[],aggregateFunctions:[{label:"Actual",value:0,name:"actual"},{label:"Sum",value:3,name:"sum"},{label:"Avg",value:2,name:"avg"},{label:"Min",value:4,name:"min"},{label:"Max",value:5,name:"max"},{label:"Current Value",value:6,name:"lastValue"}]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getBuildingsPickList"])),{},{buildingList:function(){return this.getBuildingsPickList()},dataPointType:function(){return this.type?this.type:"reading"},"compareObject.assetId":function(){return parseInt(this.compareObject.assetId)}}),created:function(){var _this=this;this.$store.dispatch("loadEnergyMeters"),this.$store.dispatch("loadBuildings").then((function(){_this.init()}))},mounted:function(){},methods:{init:function(){this.loadSpaces(),this.loadAssets(),this.loadBaselines(),this.readingType&&(this.compareObject.type=this.readingType,this.canDisableTypePicker=!0)},reset:function(){this.compareObject=null,this.compareObject={type:"space",spaceId:"",assetId:"",readingFieldId:"",aggregateFunc:0,hasBaseline:!1,baseLineId:""}},open:function(options){this.reset(),options&&(this.compareObject=Object.assign(this.compareObject,this.compareObject,options),this.compareObject.type=this.compareObject.parentType,this.compareObject.buildingId?(this.compareObject.assetId=parseInt(this.compareObject.parentId),this.loadSubMeters()):"space"===this.compareObject.parentType?this.compareObject.parentId&&(this.compareObject.spaceId=parseInt(this.compareObject.parentId)):this.compareObject.parentId&&(this.compareObject.assetId=parseInt(this.compareObject.parentId)),this.compareObject.readingFieldId&&this.loadReadingFields()),0===this.aggregate?this.compareObject.aggregateFunc=this.aggregate:this.compareObject.yAggr?this.compareObject.aggregateFunc=this.compareObject.yAggr:this.compareObject.aggregateFunc=3},save:function(){var _this2=this;if(this.compareObject.readingFieldId){var reportName="";this.compareObject.spaceId&&(this.compareObject.space=this.spaceList.find((function(a){return a.id===_this2.compareObject.spaceId})),reportName=this.compareObject.space.name),this.compareObject.assetId&&(this.compareObject.asset=this.assetList.find((function(a){return a.id===_this2.compareObject.assetId})),reportName=this.compareObject.asset.name),this.compareObject.readingFieldId&&(this.newReading?(this.compareObject.readingField=this.readingFields.find((function(a){return a.field.id===_this2.compareObject.readingFieldId})).field,this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")")):(this.compareObject.readingField=this.readingFields.find((function(a){return a.id===_this2.compareObject.readingFieldId})),this.reading||(reportName+=" ("+this.compareObject.readingField.displayName+")"))),this.compareObject.name=reportName,this.compareObject.aggregateFunctions=this.aggregateFunctions,this.$emit("save",this.compareObject)}else this.$message.error("Please select the reading")},cancel:function(){this.$emit("cancel")},selectSpace:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},selectAsset:function(){this.compareObject.readingFieldId="",this.loadReadingFields()},loadReadingsOnly:function(){this.loadReadingFieldsArray()},loadAssets:function(){var _this3=this;this.loading=!0;var self=this;this.$util.loadAsset({withReadings:!0}).then((function(response){response.assets&&(_this3.assetList=response.assets,self.editdata&&self.editdata.editmode&&(self.$store.getters.getBuildingsPickList()[self.editdata.parentId]?(self.compareObject.type="space",self.compareObject.spaceId=self.editdata.parentId):_this3.assetList.find((function(rt){return rt.id===self.editdata.parentId}))&&(self.compareObject.type="asset",self.compareObject.assetId=self.editdata.parentId,self.compareObject.readingFieldId=self.editdata.reading?self.editdata.reading.readingFieldId:self.editdata.readingFieldId)),_this3.compareObject.assetId&&_this3.loadReadingFields(),_this3.loading=!1)}))},getAsset:function(id){return this.assetList.find((function(obj){return obj.id===id}))},loadSpaces:function(){var self=this,url="/basespace";this.$http.get(url).then((function(response){response.data&&(self.spaceList=response.data.basespaces,self.compareObject.spaceId&&self.loadReadingFields())}))},getSpace:function(id){return this.spaceList.find((function(obj){return obj.id===id}))},loadBaselines:function(){var self=this;self.$http.get("/baseline/all").then((function(response){200===response.status&&(self.baselineList=response.data?response.data:[])}))},setReading:function(){},loadReadingFieldsArray:function(){var _this4=this,assetId=this.compareObject.parentIds.length?this.compareObject.parentIds[0]:null,spaceId=this.compareObject.parentIds.length?this.compareObject.parentIds[0]:null;"asset"===this.compareObject.type&&assetId?this.$util.loadAssetReadingFields(assetId).then((function(readingFields){if(_this4.readingFields=readingFields,!_this4.compareObject.readingFieldId){var defaultReadingName=_this4.reading?_this4.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=_this4.readingFields.find((function(r){return r.columnName===defaultReadingName}));_this4.compareObject.readingFieldId=energyDelta?energyDelta.id:_this4.readingFields[0].id}})):"space"===this.compareObject.type&&spaceId&&this.$util.loadSpaceReadingFields(spaceId).then((function(readingFields){_this4.readingFields="enpi"!==_this4.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.typeEnum._name})),!_this4.compareObject.readingFieldId&&_this4.readingFields.length&&(_this4.compareObject.readingFieldId=_this4.readingFields[0].id)}))},loadReadingFields:function(){var _this5=this,self=this;this.newReading?"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadLatestReading(this.compareObject.assetId).then((function(readingFields){self.readingFields=readingFields;var defaultReadingName=self.reading?self.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).field:[];energyDelta.readingType=self.readingFields.find((function(r){return r.field.columnName===defaultReadingName}))?self.readingFields.find((function(r){return r.field.columnName===defaultReadingName})).readingType:-1,energyDelta?((0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=energyDelta.id),self.compareObject.fullList=self.$helpers.cloneObject(readingFields)):(0,validation/* isEmpty */.xb)(self.compareObject.readingFieldId)&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"space"===self.compareObject.type&&self.compareObject.spaceId&&self.$util.loadLatestReading(self.compareObject.spaceId).then((function(readingFields){self.readingFields="enpi"!==self.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.field.dataTypeEnum})),
// if (self.editdata && self.editdata.editmode) {
//   self.save()
// }
!self.compareObject.readingFieldId&&self.readingFields.length&&(self.compareObject.readingFieldId=self.readingFields[0].field.id)})):"asset"===this.compareObject.type&&this.compareObject.assetId?this.$util.loadAssetReadingFields(this.compareObject.assetId).then((function(readingFields){if(_this5.readingFields=readingFields,!_this5.compareObject.readingFieldId){var defaultReadingName=_this5.reading?_this5.reading:"TOTAL_ENERGY_CONSUMPTION_DELTA",energyDelta=_this5.readingFields.find((function(r){return r.columnName===defaultReadingName}));_this5.compareObject.readingFieldId=energyDelta?energyDelta.id:_this5.readingFields[0].id}})):"space"===this.compareObject.type&&this.compareObject.spaceId&&this.$util.loadSpaceReadingFields(this.compareObject.spaceId).then((function(readingFields){_this5.readingFields="enpi"!==_this5.type?readingFields:readingFields.filter((function(type){return"ENPI"===type.typeEnum._name})),!_this5.compareObject.readingFieldId&&_this5.readingFields.length&&(_this5.compareObject.readingFieldId=_this5.readingFields[0].id)}))},selectBuilding:function(){"meter"===this.type?(this.compareObject.type="asset",this.loadSubMeters()):"enpi"===this.type&&(this.compareObject.type="space",this.compareObject.spaceId=parseInt(this.compareObject.buildingId),this.loadReadingFields())},loadSubMeters:function(){var self=this,url="/dashboard/getSubMeters?buildingId="+this.compareObject.buildingId;self.$http.get(url).then((function(response){var energyAssets=response.data.energyMeters,subMeterList=[];if(energyAssets&&self.assetList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(energyAssets);try{var _loop=function(){var ea=_step.value,asset=self.assetList.find((function(aa){return aa.id===ea.id}));asset&&subMeterList.push(ea)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}else subMeterList=energyAssets;self.subMeters=subMeterList,self.compareObject.assetId&&self.loadReadingFields()}))}}},components_FAddDataPointvue_type_script_lang_js=FAddDataPointvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAddDataPointvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAddDataPoint=component.exports},
/***/583574:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDataPointAdder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/FDataPointAdder.vue?vue&type=template&id=9737b722
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"data-points-container"},[_vm._l(_vm.dataPoints,(function(datapoint,index){return _c("div",{key:index,staticClass:"data-point"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:"Click to edit data point"},on:{click:function($event){return _vm.openEditDataPoint(index,datapoint)}}},[_vm._v(" "+_vm._s(datapoint.name)+" ")]),_c("i",{staticClass:"el-icon-close data-point-remove",on:{click:function($event){return _vm.removeDataPoint(index)}}})])})),_c("el-button",{directives:[{name:"show",rawName:"v-show",value:_vm.dataPoints.length,expression:"dataPoints.length"}],staticClass:"add-data-point",attrs:{size:"small",icon:"el-icon-plus"},on:{click:_vm.addDataPoint}}),_c("el-button",{directives:[{name:"show",rawName:"v-show",value:!_vm.dataPoints.length&&_vm.showAddPoint,expression:"!dataPoints.length && showAddPoint"}],staticClass:"freport-btn",attrs:{size:"small"},on:{click:_vm.selectDataPoint}},[_vm._v("Select "+_vm._s(_vm.displayName))]),_c("el-dialog",{staticClass:"add-data-point-dialog",attrs:{width:"300px",title:_vm.dialogTitle,visible:_vm.addDataPointFormVisibility,"custom-class":"analystics-dialog"},on:{"update:visible":function($event){_vm.addDataPointFormVisibility=$event}}},[_c("f-add-data-point",{ref:"addDataPointForm",attrs:{aggregate:_vm.aggregate,reading:_vm.reading,type:_vm.type},on:{save:_vm.readingColumnAdded,cancel:_vm.readingColumnClosed}})],1)],2)},staticRenderFns=[],FAddDataPoint=(__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(576583)),FDataPointAddervue_type_script_lang_js={props:["aggregate","type","reading","showAddPoint"],components:{FAddDataPoint:FAddDataPoint/* default */.Z},data:function(){return{addDataPointFormVisibility:!1,dataPoints:[],dialogTitle:"",editIndex:-1}},computed:{displayName:function(){return"meter"===this.type?"Meter":"enpi"===this.type?"EnPI":"Reading"}},methods:{setDataPoints:function(dataPoints){this.dataPoints=dataPoints},selectDataPoint:function(){var self=this;self.editIndex=-1,self.dialogTitle="Select "+this.displayName,self.addDataPointFormVisibility=!0,this.$nextTick((function(){self.$refs.addDataPointForm.open()}))},addDataPoint:function(){var self=this;self.editIndex=-1,self.dialogTitle="Add "+this.displayName,self.addDataPointFormVisibility=!0,this.$nextTick((function(){self.$refs.addDataPointForm.open()}))},removeDataPoint:function(index){this.dataPoints.splice(index,1),this.$emit("change",this.dataPoints)},openEditDataPoint:function(index,dataPoint){var self=this;self.addDataPointFormVisibility=!0,self.dialogTitle="Edit "+this.displayName,self.editIndex=index,this.$nextTick((function(){self.$refs.addDataPointForm.open(dataPoint)}))},readingColumnAdded:function(dataPoint){var readingReport={buildingId:dataPoint.buildingId,readingFieldId:dataPoint.readingField.id,readingField:dataPoint.readingField,parentId:dataPoint.space?dataPoint.space.id:dataPoint.asset.id,parent:dataPoint.space?dataPoint.space:dataPoint.asset,parentType:dataPoint.space?"space":"asset",name:dataPoint.name,yAggr:dataPoint.aggregateFunc};this.editIndex>=0?this.dataPoints.splice(this.editIndex,1,readingReport):this.dataPoints.push(readingReport),this.$emit("change",this.dataPoints),this.addDataPointFormVisibility=!1},readingColumnClosed:function(){this.addDataPointFormVisibility=!1}}},components_FDataPointAddervue_type_script_lang_js=FDataPointAddervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDataPointAddervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDataPointAdder=component.exports},
/***/655076:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PeakAnalysis}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/tools/PeakAnalysis.vue?vue&type=template&id=2de8b7b4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_c("div",{staticClass:"analytics-page-header"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-7"},[_c("div",{staticClass:"analytics-page-header-title"},[_vm._v(" "+_vm._s(_vm.analyticsConfig.name)+" ")]),_c("div",{staticClass:"analytics-page-header-filters"},[_c("el-select",{staticClass:"period-select",attrs:{placeholder:"Period"},model:{value:_vm.analyticsConfig.period,callback:function($$v){_vm.$set(_vm.analyticsConfig,"period",$$v)},expression:"analyticsConfig.period"}},[_c("el-option",{attrs:{label:"High-res",value:0}}),_c("el-option",{attrs:{label:"Hourly",value:20}}),_c("el-option",{attrs:{label:"Daily",value:12}}),_c("el-option",{attrs:{label:"Weekly",value:11}}),_c("el-option",{attrs:{label:"Monthly",value:10}})],1),_c("f-data-point-adder",{ref:"readingAdder",staticStyle:{display:"inline"},attrs:{type:"reading",aggregate:_vm.analyticsConfig.period},on:{change:_vm.dataPointsChanged}})],1)]),_c("div",{staticClass:"col-5",staticStyle:{"text-align":"right"}},[_c("el-button",{staticClass:"freport-btn analytics-save-as-report",attrs:{disabled:_vm.isActionsDisabled},on:{click:function($event){_vm.visibility.saveAsDialog=!0}}},[_vm._v(_vm._s(_vm.$t("common.wo_report.save_as_report")))]),_c("div",{staticClass:"analytics-page-options"},[_c("el-dropdown",{class:{"action-disabled":_vm.isActionsDisabled},on:{command:function($event){return _vm.exportData($event,_vm.analyticsConfig,_vm.iframeLoader)}}},[_c("el-button",{staticClass:"fc-chart-btn",attrs:{size:"small",type:"text"}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(153813)}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"1",disabled:_vm.isActionsDisabled}},[_vm._v(_vm._s(_vm.$t("common.wo_report.export_csv")))]),_c("el-dropdown-item",{attrs:{command:"2",disabled:_vm.isActionsDisabled}},[_vm._v(_vm._s(_vm.$t("common.wo_report.export_xcl")))])],1)],1),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-chart-btn",attrs:{size:"small",disabled:_vm.isActionsDisabled,type:"text",title:_vm.$t("common.wo_report.email_this_report"),"data-position":"bottom","data-arrow":"true"},on:{click:function($event){_vm.visibility.emailReport=!0}}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(2175)}})]),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fc-chart-btn",attrs:{size:"small",disabled:_vm.isActionsDisabled,type:"text",title:"Print","data-position":"bottom","data-arrow":"true"},on:{click:_vm.printReport}},[_c("img",{staticClass:"report-icon",attrs:{src:__webpack_require__(467511)}})]),_c("email-report",{attrs:{visibility:_vm.visibility.emailReport,analyticsConfig:_vm.analyticsConfig},on:{"update:visibility":function($event){return _vm.$set(_vm.visibility,"emailReport",$event)}}}),_c("f-save-as-report",{attrs:{visibility:_vm.visibility.saveAsDialog,config:_vm.analyticsConfig},on:{"update:visibility":function($event){return _vm.$set(_vm.visibility,"saveAsDialog",$event)}}})],1)],1)])]),_c("div",{ref:"chartSection",staticClass:"self-center fchart-section scrollable"},[_vm.analyticsConfig.dataPoints.length?_c("f-analytic-report",{attrs:{config:_vm.analyticsConfig},on:{"update:config":function($event){_vm.analyticsConfig=$event}}}):_c("div",{staticClass:"text-center"},[_c("div",{staticClass:"p15"},[_vm._v("Please select a reading to analyze.")]),_c("el-button",{staticClass:"freport-btn",attrs:{size:"small"},on:{click:function($event){return _vm.$refs.readingAdder.selectDataPoint()}}},[_vm._v("Select Reading")])],1)],1)])},staticRenderFns=[],FDataPointAdder=__webpack_require__(583574),FAnalyticReport=__webpack_require__(523163),FSaveAsReport=__webpack_require__(101699),EmailReport=__webpack_require__(150406),AnalyticsMixin=__webpack_require__(244936),PeakAnalysisvue_type_script_lang_js={mixins:[AnalyticsMixin/* default */.Z],components:{FDataPointAdder:FDataPointAdder/* default */.Z,FAnalyticReport:FAnalyticReport/* default */.Z,FSaveAsReport:FSaveAsReport/* default */.Z,EmailReport:EmailReport/* default */.Z},title:function(){return"Peak Energy Analysis"},data:function(){return{analyticsConfig:{name:"Peak Analysis",type:"peak",period:0,dateFilter:this.getDefaultDateFilter("D"),dataPoints:[]},visibility:{saveAsDialog:!1,emailReport:!1},exportDownloadUrl:null}},mounted:function(){this.loadAnalyticsConfig()&&(this.$helpers.extend(this.analyticsConfig,this.loadAnalyticsConfig()),this.$refs.readingAdder&&this.$refs.readingAdder.setDataPoints(this.analyticsConfig.dataPoints))},methods:{dataPointsChanged:function(dataPoints){this.analyticsConfig.dataPoints=dataPoints},iframeLoader:function(url){this.exportDownloadUrl=url}}},tools_PeakAnalysisvue_type_script_lang_js=PeakAnalysisvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(tools_PeakAnalysisvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PeakAnalysis=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/35274.js.map