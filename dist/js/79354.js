(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[79354],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/808517:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FSubForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSubForm.vue?vue&type=template&id=625d9dc2&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:[!_vm.removeDefaultStyling&&"f-subform-container",_vm.$validation.isEmpty(_vm.customClass)?"":_vm.customClass,_vm.isLiveSubForm?"f-subform-live scrollbar-style":"f-subform-builder"]},[_vm.canShowRemove?_c("div",{staticClass:"remove-btn-container",class:0===_vm.formIndex?"first":""},[_c("img",{staticClass:"mL5 remove-icon",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.removeLineItem()}}})]):_vm._e(),_c("el-form",{ref:"form",staticClass:"position-relative",attrs:{model:_vm.formModel,rules:_vm.rules,"label-position":"top","label-width":"100px"}},[_vm.isSectionsEmpty&&!_vm.isLiveSubForm?_c("div",{staticClass:"empty btn-container",on:{click:function(event){_vm.showHideFields(!0,event)}}},[_c("div",{staticClass:"add-field-btn"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"add",iconClass:"icon icon-sm-md"}})],1)]):_vm._l(_vm.form.sections,(function(section,sectionIndex){return _c("div",{key:sectionIndex,staticClass:"section-container pR300",class:[0===sectionIndex?"":"mT20",_vm.isFirstofType?"first-subform":"",_vm.isLastofType?"last-subform ":""]},[_c("draggable",_vm._b({staticClass:"dragArea fields-container",attrs:{disabled:_vm.canDisableDrag()},on:{start:_vm.onStart,end:_vm.onEnd,change:function($event){return _vm.onSubFormFieldChange.apply(void 0,arguments)}},model:{value:_vm.form.sections[sectionIndex].fields,callback:function($$v){_vm.$set(_vm.form.sections[sectionIndex],"fields",$$v)},expression:"form.sections[sectionIndex].fields"}},"draggable",_vm.formFieldsDragOptions,!1),_vm._l(section.fields,(function(field,fieldIndex){return _c("div",{key:sectionIndex+" - "+fieldIndex,staticClass:"subform-field",class:[_vm.isLiveSubForm?"":"form-drag-item",_vm.isLiveSubForm&&field.hideField?"hide":""],on:{click:function($event){return $event.stopPropagation(),_vm.setActiveField(field)}}},[_c("el-form-item",{staticClass:"section-items",class:[_vm.isFieldActive(field)&&!_vm.isLiveSubForm?"active":""],attrs:{label:field.displayName,prop:field.name,required:!!_vm.isLiveSubForm&&field.required,"label-width":"150px"},scopedSlots:_vm._u([_vm.isLiveSubForm?null:{key:"label",fn:function(){return[_c("div",[_c("label",[_c("span",{staticClass:"forms-field-text-label"},[_vm._v(_vm._s(field.displayName))]),field.required?_c("span",{staticClass:"forms-red-dot"},[_vm._v("*")]):_vm._e()]),field.hideField?_c("inline-svg",{attrs:{src:"svgs/hidden-field",iconClass:"mL5 icon icon-sm vertical-text-bottom"}}):_vm._e()],1)]},proxy:!0}],null,!0)},[_vm.isLiveSubForm?_vm._e():_c("div",{staticClass:"subform-field-delete",on:{click:function(event){_vm.removeSubFormField(field,fieldIndex,event)}}},[_c("img",{staticClass:"delete-icon",attrs:{src:__webpack_require__(385769)}})]),_vm.$constants.FORM_TEXTAREA_DISPLAY_TYPES.includes(field.displayTypeEnum)?_c("el-input",{key:""+sectionIndex+fieldIndex,staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",resize:"none",placeholder:"Type your  "+field.displayName,disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DECISION_BOX"===field.displayTypeEnum?_c("el-checkbox",{attrs:{disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"RADIO"===field.displayTypeEnum?_c("el-radio-group",{attrs:{disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!0}},[_vm._v(_vm._s(field.field.trueVal))]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v(_vm._s(field.field.falseVal))])],1):"MULTI_CURRENCY"===field.displayTypeEnum?_c("div",[_c("FNewCurrencyField",{key:_vm.formModel.currencyCode,attrs:{field:field,isEdit:_vm.isEdit,disabled:!_vm.isLiveSubForm,isSubform:!0,moduleData:_vm.formModel},on:{setCurrencyCodeInSubform:_vm.setCurrencyCodeInSubform,calculateExchangeRate:function(rateObj){return _vm.calculateExchangeRate(rateObj,section.fields)}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):_vm.isSiteField(field)||_vm.$fieldUtils.isSiteLookup(field)?_c("FSiteField",{key:fieldIndex+" "+field.id,attrs:{"data-test-selector":""+field.name,model:(_vm.formModel[field.name]||{}).id,canDisable:field.isDisabled,resetFields:!0,isEdit:_vm.isEdit,filter:_vm.filter,field:field},on:{"update:model":function($event){_vm.$set(_vm.formModel[field.name]||{},"id",$event)},"update:filter":function($event){_vm.filter=$event},handleSiteSwitch:_vm.showConfirmSiteSwitch,handleChange:function(){return _vm.onChangeHandler({field:field})}}}):"MULTI_LOOKUP_SIMPLE"===field.displayTypeEnum?_c("FLookupField",{key:fieldIndex+" "+field.id,attrs:{"data-test-selector":""+field.name,model:_vm.formModel[field.name],field:field,disabled:field.isDisabled,hideDropDown:_vm.$fieldUtils.isChooserTypeField(field)&&!(field.config||{}).isFiltersEnabled,siteId:_vm.selectedSiteId,rulesCriteria:field.rulesCriteria},on:{"update:model":function($event){return _vm.$set(_vm.formModel,field.name,$event)},showLookupWizard:_vm.showLookupWizard,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field,isSubForm:!0})}}}):_vm.isLookupSimpleField(field)&&(field.config||{}).canShowFloorPlanPicker?_c("FLookupFieldWithFloorplan",{key:fieldIndex+" "+field.id,attrs:{"data-test-selector":""+field.name,model:(_vm.formModel[field.name]||{}).id,field:field,disabled:field.isDisabled,siteId:_vm.selectedSiteId},on:{"update:model":function($event){_vm.$set(_vm.formModel[field.name]||{},"id",$event)},showLookupWizard:_vm.showLookupWizard,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field,isSubForm:!0})}}}):_vm.checkFieldType(field)?_c("FLookupField",{attrs:{model:(_vm.formModel[field.name]||{}).id,field:field,disabled:_vm.canDisableField(field),hideDropDown:_vm.$fieldUtils.isChooserTypeField(field)&&!(field.config||{}).isFiltersEnabled,siteId:_vm.selectedSiteId,fetchOptionsOnLoad:!0,skipLoading:!0},on:{"update:model":function($event){_vm.$set(_vm.formModel[field.name]||{},"id",$event)},showLookupWizard:_vm.showLookupWizard,recordSelected:function(value,field){return _vm.onRecordSelected({value:value,field:field,isSubForm:!0})}}}):"GEO_LOCATION"===field.displayTypeEnum?_c("div",[_c("FLocationField",{key:fieldIndex+" "+field.id,attrs:{field:field,disabled:field.isDisabled,clearable:!1},on:{change:function(value){return _vm.onChangeHandler({value:value,field:field})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1):_vm.isDropdownTypeFields(field.displayTypeEnum)&&_vm.isMultiple(field)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{multiple:!0,filterable:"",disabled:_vm.canDisableField(field),placeholder:"Select"},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_c("div",{attrs:{slot:"empty"},slot:"empty"},[_c("div",{staticClass:"el-select-dropdown__empty"},[_vm._v(" "+_vm._s(_vm.$t("common._common.empty_option_text"))+" ")]),field.allowCreate?_c("el-button",{staticClass:"add-option-empty",attrs:{loading:field.isOptionsLoading},on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))]):_vm._e()],1),_vm._l(field.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),field.allowCreate?_c("div",{staticClass:"add-option-container"},[_c("el-button",{staticClass:"add-option-content",on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))])],1):_vm._e()],2):_vm.isDropdownTypeFields(field.displayTypeEnum)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",disabled:_vm.canDisableField(field),placeholder:"Select"},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:(_vm.formModel[field.name]||{}).id,callback:function($$v){_vm.$set(_vm.formModel[field.name]||{},"id",$$v)},expression:"(formModel[field.name] || {}).id"}},[_c("div",{attrs:{slot:"empty"},slot:"empty"},[_c("div",{staticClass:"el-select-dropdown__empty"},[_vm._v(" "+_vm._s(_vm.$t("common._common.empty_option_text"))+" ")]),field.allowCreate?_c("el-button",{staticClass:"add-option-empty",attrs:{loading:field.isOptionsLoading},on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))]):_vm._e()],1),_vm._l(field.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),field.allowCreate?_c("div",{staticClass:"add-option-container"},[_c("el-button",{staticClass:"add-option-content",on:{click:function($event){return _vm.addOption(field,sectionIndex,fieldIndex)}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_option")))])],1):_vm._e()],2):"TEAMSTAFFASSIGNMENT"===field.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2",class:[field.isDisabled?"disabled-background":""],attrs:{disabled:_vm.canDisableField(field)}},[_c("div",{staticClass:"fc-border-input-div",on:{click:function(event){return _vm.openFassignment(event,field)}}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.formModel[field.name])))]),_c("span",{staticStyle:{float:"right"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_c("FAssignment",{attrs:{model:_vm.formModel[field.name],siteId:_vm.selectedSiteId,viewtype:"form"},on:{onChange:function(){return _vm.onChangeHandler({field:field,isSubForm:!0})}}})],1):"DURATION"===field.displayTypeEnum?_c("div",[_c("f-duration-field",{key:field.fieldId,staticClass:"duration-container",attrs:{field:field,isDisabled:_vm.canDisableField(field)},on:{updateDurationValue:_vm.updateDurationValue}})],1):"TIME"===field.displayTypeEnum?_c("FTimePicker",{staticClass:"el-select fc-input-full-border-select2 width100",attrs:{disabled:field.isDisabled,placeholder:_vm.$t("fields.properties.time_picker_placeholder")},on:{onChange:function(){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DATE"===field.displayTypeEnum?_c("f-date-picker",{key:fieldIndex+" "+field.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"date",disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DATETIME"===field.displayTypeEnum?_c("f-date-picker",{key:fieldIndex+" "+field.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"datetime",disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"DATERANGE"===field.displayTypeEnum?_c("f-date-picker",{key:fieldIndex+" "+field.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"daterange",disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}}):"FILE"===field.displayTypeEnum?_c("div",[_c("FFileUpload",{key:_vm.getRandomNumber(),attrs:{field:field,isFileType:"FILE"===field.displayTypeEnum,isDisabled:!_vm.isLiveSubForm,imgContentUrl:field.imgUrl,fileObj:field.fileObj,showWebCamPhoto:!1,isSaveBtnDisabled:_vm.isSaveBtnDisabled,isV3Api:_vm.isV3Api,addImgFile:function(fileOrId,field){return _vm.addImgFile({fileOrId:fileOrId,field:field,isSubForm:!0})}},on:{"update:imgContentUrl":function($event){return _vm.$set(field,"imgUrl",$event)},"update:img-content-url":function($event){return _vm.$set(field,"imgUrl",$event)},"update:fileObj":function($event){return _vm.$set(field,"fileObj",$event)},"update:file-obj":function($event){return _vm.$set(field,"fileObj",$event)},"update:isSaveBtnDisabled":function($event){_vm.isSaveBtnDisabled=$event},"update:is-save-btn-disabled":function($event){_vm.isSaveBtnDisabled=$event},removeImgFile:function(field){return _vm.removeImgFile({field:field,isSubForm:!0})}}})],1):"SIGNATURE"===field.displayTypeEnum?_c("div",[_c("FSignaturePad",{attrs:{model:_vm.formModel[field.name],fileName:field.name,isV3Api:_vm.isV3Api,imgUrl:field.imgUrl,isSaveBtnDisabled:_vm.isSaveBtnDisabled,canShowColorPalette:(field.config||{}).canShowColorPalette},on:{"update:model":function($event){return _vm.$set(_vm.formModel,field.name,$event)},"update:imgUrl":function($event){return _vm.$set(field,"imgUrl",$event)},"update:img-url":function($event){return _vm.$set(field,"imgUrl",$event)},"update:isSaveBtnDisabled":function($event){_vm.isSaveBtnDisabled=$event},"update:is-save-btn-disabled":function($event){_vm.isSaveBtnDisabled=$event},onChange:function(){return _vm.onChangeHandler({field:field,isSubForm:!0})}}})],1):"NUMBER"===field.displayTypeEnum||"DECIMAL"===field.displayTypeEnum?_c("el-input",{class:["fc-input-full-border2",_vm.canShowMetric(field)&&("prepend"===_vm.metricSymbolPosition(field)?"fc-slot-input-prepend":"fc-slot-input-append")],attrs:{type:"number",disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_vm.canShowMetric(field)?_c("template",{slot:_vm.metricSymbolPosition(field)},[_vm._v(" "+_vm._s((field.field||{}).unit)+" ")]):_vm._e()],2):"PERCENTAGE"===field.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border2 fc-input-icon",attrs:{disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}},[_c("template",{slot:field.iconPosition},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:field.icon,iconClass:"icon icon-xs"}})],1)],2):_c("el-input",{staticClass:"fc-input-full-border2",attrs:{disabled:_vm.canDisableField(field)},on:{change:function(value){return _vm.onChangeHandler({field:field,isSubForm:!0})}},model:{value:_vm.formModel[field.name],callback:function($$v){_vm.$set(_vm.formModel,field.name,$$v)},expression:"formModel[field.name]"}})],1)],1)})),0),_vm.isLiveSubForm?_vm._e():_c("div",{staticClass:"add-field-btn",on:{click:function(event){_vm.showHideFields(!0,event)}}},[_c("div",[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"add",iconClass:"icon icon-sm-md"}})],1)])],1)})),_vm.isLiveSubForm?_vm._e():_c("el-popover",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.showHideFields,expression:"showHideFields"}],attrs:{placement:"left",width:"200",trigger:"manual",value:_vm.canShowFields,"popper-class":"fields-dropdown"}},_vm._l(_vm.subFormFields,(function(field,index){return _c("div",{key:index},[_c("div",{staticClass:"letter-spacing0_4 fc-black-color f14 mB20 pointer",on:{click:function(event){_vm.addSubFormField(field,index,event)}}},[_c("span",{staticClass:"mR5 vertical-middle"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:_vm.getIconSrc(field.displayTypeEnum),iconClass:"icon icon-sm-md"}})],1),_vm._v(" "+_vm._s(field.displayName)+" ")])])})),0)],2),_vm.canShowLookupWizard?_c("div",[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.selectedLookupField,siteId:_vm.selectedSiteId},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})],1):_vm._e()],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),FWebform=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(434500)),FormBuilderMixin=__webpack_require__(445829),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),validation=__webpack_require__(990260),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),uuid=__webpack_require__(455877),utils_field=__webpack_require__(815872),TeamStaffMixin=__webpack_require__(462599),FNewCurrencyField=__webpack_require__(533206),CurrencyUtil=__webpack_require__(15426),defaultDragOptions={animation:150,easing:"cubic-bezier(1, 0, 0, 1)"},FSubFormvue_type_script_lang_js={name:"f-sub-form",extends:FWebform/* default */.Z,mixins:[FormBuilderMixin/* default */.Z,TeamStaffMixin/* default */.Z],components:{draggable:vuedraggable_umd_default(),FNewCurrencyField:FNewCurrencyField/* default */.Z},props:["isLiveSubForm","removeDefaultStyling","customClass","fieldError","activeField","isLastofType","isFirstofType","canShowRemove","formIndex","isV3Api","isEdit","subFormModuleData"],data:function(){return{removeFieldsHash:["photo","attachedFiles"],subFormFields:[],canShowFields:!1}},computed:{formFieldsDragOptions:function(){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},defaultDragOptions),{},{draggable:".form-drag-item",group:"subform-fields",sort:!0})},moduleName:function(){var form=this.form;if(!(0,validation/* isEmpty */.xb)(form)){var module=form.module,_ref=module||{},name=_ref.name;return name}return null},formId:function(){var form=this.form;if(!(0,validation/* isEmpty */.xb)(form)){var id=form.id;return id}return null},subFormActiveField:{get:function(){return this.activeField},set:function(value){this.$emit("update:activeField",value)}},isSectionsEmpty:function(){var form=this.form,_ref2=form||{},_ref2$sections=_ref2.sections,sections=void 0===_ref2$sections?[]:_ref2$sections,_ref3=sections[0]||{},fields=_ref3.fields;return(0,validation/* isEmpty */.xb)(fields)}},watch:{form:{handler:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.deserialize()},deep:!0}},methods:{
/* Data serialize and deserialize methods */deserializeFormData:function(){var subFormActiveField=this.subFormActiveField,_this$form$sections=this.form.sections,sections=void 0===_this$form$sections?[]:_this$form$sections;this.deserialize(),(0,validation/* isEmpty */.xb)(subFormActiveField)||(this.subFormActiveField=this.findSelectedField(sections,subFormActiveField))},init:function(){var _this=this,moduleName=this.moduleName,formId=this.formId,isLiveSubForm=this.isLiveSubForm;this.isLookupSimpleField=utils_field/* isLookupSimple */.qu,this.initActionHandlers(),this.deserialize();var _ref4=this.subFormModuleData||{},currencyCode=_ref4.currencyCode,exchangeRate=_ref4.exchangeRate;this.setCurrencyCodeInSubform(currencyCode,exchangeRate),isLiveSubForm||(0,validation/* isEmpty */.xb)(moduleName)||(0,validation/* isEmpty */.xb)(formId)||this.loadUnusedFields(moduleName,formId).then((function(fields){return _this.setSubFormFields(fields)}))},saveRecord:function(){var _arguments=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var props,_ref5,_ref5$skipSubFormVali,skipSubFormValidation,isValid;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(props=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:{},_ref5=props||{},_ref5$skipSubFormVali=_ref5.skipSubFormValidation,skipSubFormValidation=void 0!==_ref5$skipSubFormVali&&_ref5$skipSubFormVali,isValid=!0,skipSubFormValidation||!_this2.canValidateSubForm()){_context.next=9;break}return _context.next=6,new Promise((function(res){return _this2.$refs["form"].validate((function(valid){return res(valid)}))}));case 6:isValid=_context.sent,_context.next=10;break;case 9:_this2.$refs["form"].clearValidate();case 10:return _context.abrupt("return",new Promise((function(resolve,reject){var formModel=_this2.formModel;if(isValid){var _formModel=cloneDeep_default()(formModel);resolve(_formModel)}else reject()})));case 11:case"end":return _context.stop()}}),_callee)})))()},
/* Drag and drop related methods */onStart:function(){this.$emit("onDragStart")},onEnd:function(){this.$emit("onDragEnd")},onSubFormFieldChange:function(){var subFormObj=this.form;this.debounceSaveRecord({subFormObj:subFormObj,skipSettingSave:!0})},
/* Show/Hide/Disable related Actions */canDisableDrag:function(){var fieldError=this.fieldError,isSaving=this.isSaving;return fieldError||isSaving},canDisableField:function(field){var isLiveSubForm=this.isLiveSubForm,isDisabled=field.isDisabled;return!isLiveSubForm||isDisabled},showHideFields:function(){var canShow=arguments.length>0&&void 0!==arguments[0]&&arguments[0],event=arguments.length>1?arguments[1]:void 0,isLiveSubForm=this.isLiveSubForm;isLiveSubForm||(event&&event.stopPropagation(),this.$set(this,"canShowFields",canShow))},setSubFormFields:function(fields){var isLiveSubForm=this.isLiveSubForm;if(!isLiveSubForm){var systemFields=fields.systemFields,customFields=fields.customFields,subFormFields=[].concat((0,toConsumableArray/* default */.Z)(systemFields),(0,toConsumableArray/* default */.Z)(customFields));this.$set(this,"subFormFields",subFormFields)}},setActiveField:function(field){var isLiveSubForm=this.isLiveSubForm;isLiveSubForm||(this.subFormActiveField=field,this.$emit("resetActiveSection"))},addSubFormField:function(field,index,event){var isLiveSubForm=this.isLiveSubForm;if(!isLiveSubForm){event&&event.stopPropagation();var subFormFields=this.subFormFields,form=this.form,_ref6=form||{},sections=_ref6.sections,section=sections[0]||{},fields=section.fields;if(subFormFields.splice(index,1),(0,validation/* isEmpty */.xb)(fields)){var _fields=[],_sections=[];_fields.push(field),section.fields=_fields,_sections.push(section),form.sections=_sections}else fields.push(field);this.setActiveField(field),this.$set(this,"subFormFields",subFormFields),this.$set(this,"canShowFields",!1),this.saveFormRecord({subFormObj:form,skipSettingSave:!0})}},removeSubFormField:function(field,index,event){var isLiveSubForm=this.isLiveSubForm;if(!isLiveSubForm){event&&event.stopPropagation();var subFormFields=this.subFormFields,subFormObj=this.form,_ref7=subFormObj||{},sections=_ref7.sections,section=sections[0]||{},fields=section.fields;fields.splice(index,1),this.$set(section.fields,"fields",fields),subFormFields.push(field),this.isFieldActive(field)&&this.$emit("removeActiveField"),this.debounceSaveRecord({subFormObj:subFormObj,skipSettingSave:!0})}},
/* live subform related methods */removeLineItem:function(){var formIndex=this.formIndex;this.$emit("removeLineItem",formIndex)},getRandomNumber:function(){return(0,uuid.v4)()},canValidateSubForm:function(){var shouldSkipValidation,formModel=this.formModel;return Object.keys(formModel).forEach((function(field){shouldSkipValidation||((0,validation/* isObject */.Kn)(formModel[field])||(0,validation/* isEmpty */.xb)(formModel[field])?(0,validation/* isObject */.Kn)(formModel[field])&&!(0,validation/* areValuesEmpty */.sD)(formModel[field])&&(shouldSkipValidation=!0):shouldSkipValidation=!0)})),shouldSkipValidation},checkFieldType:function(field){return!(0,validation/* isEmpty */.xb)(field)&&((0,utils_field/* isLookupSimple */.qu)(field)||this.$fieldUtils.isChooserTypeField(field))},setCurrencyCodeInSubform:function(currencyCode,exchangeRate){var formModel=this.formModel;this.formModel=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formModel||{}),{},{currencyCode:currencyCode,exchangeRate:exchangeRate})},calculateExchangeRate:function(rateObj,fields){this.formModel=(fields||[]).reduce((function(formModel,field){var _ref8=field||{},name=_ref8.name,displayTypeEnum=_ref8.displayTypeEnum,value=formModel[name];return"MULTI_CURRENCY"!==displayTypeEnum||(0,validation/* isEmpty */.xb)(value)||(formModel[name]=(0,CurrencyUtil/* getCalculatedCurrencyValue */.sd)(rateObj,value)),formModel}),this.formModel)}}},components_FSubFormvue_type_script_lang_js=FSubFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSubFormvue_type_script_lang_js,render,staticRenderFns,!1,null,"625d9dc2",null)
/* harmony default export */,FSubForm=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/874249:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return RichTextArea}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/RichTextArea.vue?vue&type=template&id=7711575b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isRichText?_c("div",{staticClass:"richtext-area"},[_c("RichText",{style:{minHeight:_vm.minHeight,maxHeight:_vm.maxHeight,overflow:_vm.overflow},attrs:{readOnly:_vm.disabled,placeholder:_vm.placeholder,hideImgTool:_vm.hideImgTool,hideUnorderedList:_vm.hideUnorderedList,hideOrderedList:_vm.hideOrderedList,secondaryToolbar:_vm.secondaryToolbar,istoolbarPositionBottom:_vm.istoolbarPositionBottom,isMoreOption:_vm.isMoreOption,customToolOrder:_vm.customToolOrder,iconColor:_vm.iconColor},scopedSlots:_vm._u([_vm.canShowModeToggle?{key:"editorMode",fn:function(){return[_c("div",{staticClass:"self-center marginL-auto mR15 cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.plain_text_mode"))+" ")])]},proxy:!0}:null],null,!0),model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1):_c("div",{staticClass:"richtext-area plain-text-mode"},[_c("div",{staticClass:"richtext-editor"},[_c("div",{staticClass:"richtext-toolbar"},[_c("div",{staticClass:"toolbar-button marginL-auto cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.switch_to_richtext"))+" ")])]),_c("el-input",{key:"plain-text",staticClass:"richtext-content",attrs:{type:"textarea",resize:"none",placeholder:_vm.placeholder},model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1)])},staticRenderFns=[],ui_forms=(__webpack_require__(879288),__webpack_require__(141323)),filters=__webpack_require__(638203),RichTextAreavue_type_script_lang_js={props:{value:{type:String},field:{type:Object},rows:{type:Number,default:10},maxRows:{type:Number,default:12},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Enter text here"},isEdit:{type:Boolean,default:!1},hideImgTool:{type:Boolean,default:!1},hideOrderedList:{type:Boolean,default:!1},hideUnorderedList:{type:Boolean,default:!1},isRichTextMode:{type:Boolean,default:!0},canShowModeToggle:{type:Boolean,default:!1},istoolbarPositionBottom:{type:Boolean},customToolOrder:{type:Array},isMoreOption:{type:Boolean},secondaryToolbar:{type:Boolean},iconColor:{type:String}},components:{RichText:ui_forms/* RichText */.Ho},computed:{content:{get:function(){return this.value},set:function(value){this.$emit("input",value)}},isRichText:{get:function(){return this.isRichTextMode},set:function(value){this.$emit("update:isRichTextMode",value)}},
// Assuming a <p></p> tag inside editor
// has fonts-size 1rem and margin-bottom 1rem
minHeight:function(){return"".concat(2*this.rows,"rem")},maxHeight:function(){return"".concat(2*this.maxRows,"rem")},overflow:function(){return"hidden"}},methods:{changeMode:function(){var isRichText=this.isRichText,value=this.value;if(isRichText)this.showConfirmModeSwitch();else{var htmlContent="<p>".concat(value,"</p>");this.content=htmlContent,this.proceedChangingModes()}},showConfirmModeSwitch:function(){var _this=this,dialogObj={htmlMessage:"".concat(this.$t("forms.builder.switch_alert")),rbDanger:!0,rbLabel:"Confirm"};this.$dialog.confirm(dialogObj).then((function(canProceed){if(canProceed){var value=_this.value,textContent=(0,filters/* htmlToText */.s9)(value);_this.content=textContent,_this.proceedChangingModes()}}))},proceedChangingModes:function(){var isRichText=this.isRichText;this.isRichText=!isRichText}}},forms_RichTextAreavue_type_script_lang_js=RichTextAreavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_RichTextAreavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,RichTextArea=component.exports},
/***/786113:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkOrderSpecialFieldsList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/WorkOrderSpecialFieldsList.vue?vue&type=template&id=c5129894
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",["resource"===_vm.field.name?_c("div",{staticClass:"q-item-division relative-position",staticStyle:{"min-width":"170px"}},[_vm.$validation.isEmpty(_vm.moduleData.resource)||_vm.$validation.isEmpty(_vm.moduleData.resource.id)?_c("div",[_c("span",{staticClass:"q-item-label secondary-color color-d"},[_vm._v("--- "+_vm._s(_vm.$t("maintenance.wr_list.space_asset"))+" ---")])]):_c("div",[_c("div",{staticClass:"flLeft mR7"},[1===_vm.moduleData.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flLeft q-item-label ellipsis max-width140px",attrs:{small:"","data-position":"bottom",title:_vm.moduleData.resource.name}},[_vm._v(_vm._s(_vm.moduleData.resource.name))])])]):"assignedTo"===_vm.field.name?_c("div",{staticClass:"q-item-division relative-position wo_assignedto_avatarblock"},[_c("div",{staticClass:"wo-assigned-avatar fL"},[_c("user-avatar",{attrs:{size:"md",user:_vm.moduleData.assignedTo,group:_vm.moduleData.assignmentGroup,showLabel:!0,moduleName:"lookupModuleName"}})],1)]):"noOfNotes"===_vm.field.name?_c("div",[_vm._m(0),_c("span",{staticClass:"width5px q-item-sublabel comment-counnt-txt"},[_vm._v(_vm._s(_vm.notesLabel))])]):"noOfTasks"===_vm.field.name?_c("div",[_vm.canShowTaskIcon?_c("inline-svg",{staticClass:"vertical-middle cursor-pointer",attrs:{src:"svgs/task-list",iconClass:"icon icon-sm mT5 mR5 task-icon"}}):_vm._e(),_c("span",{staticClass:"q-item-sublabel pL5"},[_vm._v(_vm._s(_vm.taskLabel))])],1):"noOfAttachments"===_vm.field.name?_c("div",{staticStyle:{float:"left"}},[_vm._m(1),_c("span",{staticClass:"width5px q-item-sublabel comment-counnt-txt"},[_vm._v(_vm._s(_vm.attachmentLabel))])]):_vm._e()])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",[_c("img",{staticStyle:{width:"14px",height:"12.8px"},attrs:{src:__webpack_require__(293656)}})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",[_c("img",{staticStyle:{width:"14px",height:"12.8px"},attrs:{src:__webpack_require__(345265)}})])}],User=(__webpack_require__(634338),__webpack_require__(426803)),validation=__webpack_require__(990260),WorkOrderSpecialFieldsListvue_type_script_lang_js={components:{UserAvatar:User/* default */.Z},props:["field","moduleData"],computed:{canShowTaskIcon:function(){var moduleData=this.moduleData;return!(0,validation/* isEmpty */.xb)(moduleData.noOfTasks)&&0!==moduleData.noOfNotes},taskLabel:function(){var moduleData=this.moduleData,noOfTasks=moduleData.noOfTasks,noOfNotes=moduleData.noOfNotes,noOfClosedTasks=moduleData.noOfClosedTasks,taskLabel="---";return(0,validation/* isEmpty */.xb)(noOfTasks)||0===noOfNotes?taskLabel:(0,validation/* isEmpty */.xb)(noOfClosedTasks)?"0":"".concat(noOfClosedTasks,"/").concat(noOfTasks)},notesLabel:function(){var moduleData=this.moduleData,noOfNotes=moduleData.noOfNotes;return(0,validation/* isEmpty */.xb)(noOfNotes)||0===noOfNotes?"0":moduleData.noOfNotes},attachmentLabel:function(){var moduleData=this.moduleData,_ref=moduleData||{},noOfAttachments=_ref.noOfAttachments;return(0,validation/* isEmpty */.xb)(noOfAttachments)||0===noOfAttachments?"0":noOfAttachments}}},list_WorkOrderSpecialFieldsListvue_type_script_lang_js=WorkOrderSpecialFieldsListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_WorkOrderSpecialFieldsListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkOrderSpecialFieldsList=component.exports},
/***/445829:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FormBuilderMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var render,staticRenderFns,objectSpread2=__webpack_require__(595082),slicedToArray=__webpack_require__(554621),toConsumableArray=__webpack_require__(488478),helpers=(__webpack_require__(634338),__webpack_require__(821057),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(648324),__webpack_require__(947522),__webpack_require__(336585),__webpack_require__(879288),__webpack_require__(162506),__webpack_require__(778390)),utility_methods=__webpack_require__(773258),validation=__webpack_require__(990260),utils_utility_methods=__webpack_require__(555005),constant=__webpack_require__(354754),http=__webpack_require__(218430),DELAY=5e3,windowMessage={action:"setup-form-close"},FormBuilderMixinvue_type_script_lang_js={mounted:function(){var _this=this;this.debounceSaveRecord=helpers/* default */.ZP.debounce((function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_this.saveFormRecord(props)}),DELAY)},methods:{loadUnusedFields:function(moduleName,formId){var fetchUnusedFieldsUrl="/v2/forms/fields/unusedlist?moduleName=".concat(moduleName,"&formId=").concat(formId);return http/* default */.ZP.get(fetchUnusedFieldsUrl).then((function(_ref){var _ref$data=_ref.data,message=_ref$data.message,responseCode=_ref$data.responseCode,_ref$data$result=_ref$data.result,result=void 0===_ref$data$result?{}:_ref$data$result;if(0===responseCode){var fields=result.fields;return fields}throw new Error(message)})).catch((function(err){throw new Error(err)}))},findSelectedField:function(sections,element){return sections.reduce((function(res,_ref2){var fields=_ref2.fields;return[].concat((0,toConsumableArray/* default */.Z)(res),(0,toConsumableArray/* default */.Z)(fields))}),[]).find((function(field){return field.name===element.name}))},isFieldActive:function(_ref3){var name=_ref3.name,formId=_ref3.formId,activeField=this.activeField;if(!(0,validation/* isEmpty */.xb)(activeField)){var activeFieldFormId=activeField.formId;return"".concat(activeFieldFormId).concat((activeField||{}).name)==="".concat(formId).concat(name)}return!1},getIconSrc:function(name){var svgName=constant/* default */.Z.FIELDS_ICON_HASH[name]||"single-line";return"".concat(svgName)},deserializeSectionData:function(sections){var _this2=this,skipEmptySectionHandling=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!skipEmptySectionHandling){var sectionsLength=sections.length+1;
// Pushing empty section object, to support adding new section.
sections.push({name:"section_".concat(sectionsLength),id:-1,showLabel:!1,fields:[]})}return sections.map((function(section){var subFormId=section.subFormId,subForm=section.subForm,subFormsArr=[];return(0,validation/* isEmpty */.xb)(subFormId)||(subFormsArr=[subForm],_this2.$set(section,"subFormsArr",subFormsArr)),(0,validation/* isEmpty */.xb)(section.fields)?section.fields=[]:section.fields=_this2.deserializeData(section.fields,sections),section}))},saveFormRecord:function(_ref4){var _this3=this,_ref4$redirect=_ref4.redirect,redirect=void 0!==_ref4$redirect&&_ref4$redirect,_ref4$subFormObj=_ref4.subFormObj,subFormObj=void 0===_ref4$subFormObj?{}:_ref4$subFormObj,_ref4$skipSettingSave=_ref4.skipSettingSave,skipSettingSave=void 0!==_ref4$skipSettingSave&&_ref4$skipSettingSave,sections=this.sections,_this$formProperties=this.formProperties,form=void 0===_this$formProperties?{}:_this$formProperties,hasError=this.hasError,$route=this.$route,isSetupPage=this.$getProperty($route.query,"setup",!1),formObj=(0,validation/* isEmpty */.xb)(subFormObj)?form:subFormObj,_form=this.serializeFormData(formObj),_sections=(0,validation/* isEmpty */.xb)(subFormObj)?(0,utility_methods/* cloneArray */.M2)(sections):(0,utility_methods/* cloneArray */.M2)(subFormObj.sections),data={form:_form};if(data.form.sections=this.serializeData(_sections,!(0,validation/* isEmpty */.xb)(subFormObj)),!hasError)return skipSettingSave||(this.isSaving=!0),http/* default */.ZP.post("/v2/forms/fields/init",data).then((function(_ref5){var _ref5$data=_ref5.data,message=_ref5$data.message,responseCode=_ref5$data.responseCode,_ref5$data$result=_ref5$data.result,result=void 0===_ref5$data$result?{}:_ref5$data$result;if(0!==responseCode)throw new Error(message);if(skipSettingSave||(_this3.isSaving=!1),!redirect)return _this3.deserializeFormData(result);isSetupPage&&_this3.sendMessage(),_this3.redirectToFormsList()})).catch((function(_ref6){var message=_ref6.message;_this3.$message.error(message),skipSettingSave||(_this3.isSaving=!0)}))},sendMessage:function(){var origin=window.location.origin,stringifiedMessage=JSON.stringify(windowMessage);window.parent.postMessage(stringifiedMessage,origin)},serializeFormData:function(){var form=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},formObj=(0,utility_methods/* deepCloneObject */.kh)(form),labelPosition="",labelAlignmentHash=constant/* default */.Z.FORMS_LABELALIGNMENT_ENUMHASH;return Object.entries(labelAlignmentHash).forEach((function(_ref7){var _ref8=(0,slicedToArray/* default */.Z)(_ref7,2),key=_ref8[0],value=_ref8[1];formObj.labelPosition===value&&(labelPosition=Number(key))})),"number"!==typeof(formObj||{}).labelPosition&&(formObj.labelPosition=labelPosition),formObj},serializeData:function(){var _this4=this,sections=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],skipEmptyRow=arguments.length>1?arguments[1]:void 0;
// To remove the empty row, which is added manually to support drag
if(!skipEmptyRow){var sectionLastIndex=sections.length-1;sections.splice(sectionLastIndex,1)}return sections=sections.map((function(section){var _section=(0,utility_methods/* deepCloneObject */.kh)(section),_section2=_section,subFormId=_section2.subFormId;return(0,validation/* isEmpty */.xb)(subFormId)?_section.fields=_section.fields.reduce((function(result,field){var _field=(0,utility_methods/* deepCloneObject */.kh)(field);return result.push(_this4.serializeFields(_field)),result}),[]):_section=_this4.serializeSubFormSection(_section),_section})),sections},serializeSubFormSection:function(){var _this5=this,formSection=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_ref9=formSection||{},subForm=_ref9.subForm,_subForm=(0,utility_methods/* deepCloneObject */.kh)(subForm);delete _subForm.fields;var _ref10=_subForm||{},_ref10$sections=_ref10.sections,subFormSections=void 0===_ref10$sections?[]:_ref10$sections;subFormSections=subFormSections.map((function(section){var _ref11=section||{},fields=_ref11.fields;return fields=fields.map((function(field){return _this5.serializeFields(field)})),(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{fields:fields})}));var serializedSection=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formSection),{},{subForm:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_subForm),{},{sections:subFormSections})});return delete serializedSection.subFormsArr,serializedSection},serializeFields:function(){var field=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},resourceProps=arguments.length>1?arguments[1]:void 0,currentSiteId=this.currentSiteId,_ref12=field||{},name=_ref12.name,resourceProperties=(0,validation/* isEmpty */.xb)(resourceProps)?constant/* default */.Z.FIELDS_RESOURCE_PROPS:resourceProps,serializedField=(0,utils_utility_methods/* serializeProps */._$)(field,resourceProperties),skipStringify=null===field.value||"string"===typeof field.value;return serializedField.value=skipStringify?field.value:JSON.stringify(field.value),
// Skip site field value update, if global site is not 'All'
"siteId"!==name||(0,validation/* isEmpty */.xb)(currentSiteId)||delete serializedField["value"],serializedField}}},forms_FormBuilderMixinvue_type_script_lang_js=FormBuilderMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FormBuilderMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FormBuilderMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
},
/***/806339:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WidgetPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/utils/WidgetPagination.vue?vue&type=template&id=6b10cd5b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-widget-pagination"},[_vm.total>0?_c("div",{class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" -")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm.hideToggle?_vm._e():[_vm._v(" of "+_vm._s(_vm.total)+" "),_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})]],2):_vm._e()])},staticRenderFns=[],WidgetPaginationvue_type_script_lang_js={props:["currentPage","perPage","total","hideToggle"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{total:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{init:function(){this.page=this.currentPage||1,this.from=(this.page-1)*this.perPage+1;var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.updateCurrentPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.updateCurrentPage()},updateCurrentPage:function(){
// Update currentPage value
this.$emit("update:currentPage",this.page),this.$emit("onChange")}}},utils_WidgetPaginationvue_type_script_lang_js=WidgetPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(utils_WidgetPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WidgetPagination=component.exports},
/***/961704:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/FPagination.vue?vue&type=template&id=dc442900&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"grp-pagination-text"},[_c("el-tooltip",{attrs:{disabled:_vm.from<=1,effect:"dark",content:_vm.prevContent(),placement:"top-start"}},[_c("span",{staticClass:"el-icon-arrow-left arrow-16",class:{disable:_vm.from<=1},on:{click:_vm.prev}})]),_c("el-tooltip",{attrs:{disabled:!_vm.hasMoreList,effect:"dark",content:_vm.to+1+" - "+(_vm.perPage+_vm.to),placement:"top-end"}},[_c("span",{staticClass:"el-icon-arrow-right arrow-16",class:{disable:!_vm.hasMoreList},on:{click:_vm.next}})])],1)},staticRenderFns=[],FPaginationvue_type_script_lang_js=(__webpack_require__(634338),{props:["hasMoreList","currentPage","perPage","currentCount"],data:function(){return{from:0,to:0,page:1}},mounted:function(){this.init()},watch:{currentCount:function(){this.init()},currentPage:function(val){val!==this.page&&this.init()}},methods:{prevContent:function(){var from=this.from,perPage=this.perPage;return 1!=from?"".concat(from-perPage," - ").concat(from-1):"".concat(from," - ").concat(perPage)},init:function(){var currentPage=this.currentPage,currentCount=this.currentCount,perPage=this.perPage;this.page=currentPage||1,this.from=(this.page-1)*perPage+1,this.to=(this.page-1)*perPage+currentCount},next:function(){this.hasMoreList&&(this.from=this.to+1,this.to+=this.perPage,this.page++,this.$emit("update:currentPage",this.page))},prev:function(){this.from<=1||(this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.$emit("update:currentPage",this.page))}}}),components_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"dc442900",null)
/* harmony default export */,FPagination=component.exports},
/***/233889:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ConditionManagerForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/conditionmanager/ConditionManagerForm.vue?vue&type=template&id=65dabbe1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"custom-class":"condition-animated slideInRight fc-dialog-form fc-dialog-right setup-dialog40 setup-dialog condition-manager-form","before-close":_vm.closeDialog}},[_c("el-form",{ref:"condition-manager",staticClass:"fc-form",attrs:{model:_vm.namedCriteria,rules:_vm.rules,"label-position":"top"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.isNew?_vm.$t("common._common.add_condition"):_vm.$t("common._common.edit_condition"))+" ")])])]),_c("div",{staticClass:"new-body-modal enpi-body-modal"},[_c("div",{staticClass:"body-scroll"},[_c("el-form-item",{attrs:{label:_vm.$t("common.products.name"),prop:"name"}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common._common.enter_crieteria_name")},model:{value:_vm.namedCriteria.name,callback:function($$v){_vm.$set(_vm.namedCriteria,"name",$$v)},expression:"namedCriteria.name"}})],1),_c("div",{staticClass:"criteria-types-config"},[_c("p",{staticClass:"fc-input-label-txt bold pB0 text-fc-pink text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.products.conditions"))+" ")]),_c("el-dropdown",{on:{command:_vm.openConditionExpressions}},[_c("div",{staticClass:"d-flex pointer"},[_c("inline-svg",{staticClass:"fill-blue",attrs:{src:"svgs/plus-button"}}),_c("div",{staticClass:"config"},[_vm._v(_vm._s(_vm.$t("common._common.configure")))])],1),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.criteriaType,(function(label,type){return _c("el-dropdown-item",{key:type,attrs:{command:parseInt(type)}},[_vm._v(" "+_vm._s(label)+" ")])})),1)],1)],1),_c("div",{staticClass:"mT20"},[_vm.conditions.length>1?[_c("el-radio-group",{staticClass:"mB15",on:{change:_vm.setPattern},model:{value:_vm.operatorType,callback:function($$v){_vm.operatorType=$$v},expression:"operatorType"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.operatorTypes.AND}},[_vm._v(" "+_vm._s(_vm.$t("common._common.match_all"))+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.operatorTypes.OR}},[_vm._v(" "+_vm._s(_vm.$t("common._common.match_any"))+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:_vm.operatorTypes.CUSTOM}},[_vm._v(" "+_vm._s(_vm.$t("common._common.custom_pattern"))+" ")])],1),_vm.operatorType===_vm.operatorTypes.CUSTOM?_c("el-form-item",{attrs:{prop:"pattern"}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{placeholder:-_vm.$t("common._common.please_enter_pattern_for_conditions")},model:{value:_vm.namedCriteria.pattern,callback:function($$v){_vm.$set(_vm.namedCriteria,"pattern",$$v)},expression:"namedCriteria.pattern"}})],1):_vm._e()]:_vm._e(),_vm._l(_vm.namedCriteria.conditions,(function(condition,conditionKey){return _c("div",{key:conditionKey,staticClass:"criteria-conditions"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"criteria-alphabet-block alphabet-circle"},[_vm._v(" "+_vm._s(conditionKey)+" ")]),_c("div",{staticClass:"fc__layout__has__row"},[_c("div",{staticClass:"criteria-name"},[_vm._v(" "+_vm._s(condition.name)+" ")]),_c("div",{staticClass:"criteria-type"},[_vm._v(" "+_vm._s(_vm.criteriaType[condition.type])+" ")])])]),_c("div",{staticClass:"actions-visibility"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit edit-icon pR15 pointer",attrs:{"data-arrow":"true",title:_vm.$t("common.header.edit_expression")},on:{click:function($event){return _vm.editExpression(condition,conditionKey)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete fc-delete-icon pointer",attrs:{"data-arrow":"true",title:_vm.$t("common.header.delete_expression")},on:{click:function($event){return _vm.deleteExpression(conditionKey)}}})])])}))],2)],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:function($event){return _vm.submitForm()}}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common._common._saving"):_vm.$t("common._common._save"))+" ")])],1)]),_vm.showCriteriaBuilder?_c("CriteriaBuilder",{attrs:{module:_vm.moduleName,selectedCriteria:_vm.activeCriteria,expressionIdx:_vm.expressionIdx},on:{save:function(criteria){return _vm.addConditionExpressions(criteria,_vm.criteriaTypes.SIMPLE)},close:function($event){_vm.showCriteriaBuilder=!1}}}):_vm._e(),_vm.showScript?_c("ScriptDialog",{attrs:{selectedScript:_vm.activeScript,moduleName:_vm.moduleName,expressionIdx:_vm.expressionIdx},on:{onSave:function(scriptData){return _vm.addConditionExpressions(scriptData,_vm.criteriaTypes.SCRIPT)},onClose:function($event){_vm.showScript=!1}}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),api=(__webpack_require__(564043),__webpack_require__(779866),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(821057),__webpack_require__(186466),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(857267),__webpack_require__(450886),__webpack_require__(169358),__webpack_require__(506203),__webpack_require__(32284)),validation=__webpack_require__(990260),CriteriaBuilderDialogvue_type_template_id_0e096f79_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"60%",title:_vm.$t("common._common._criteria"),"custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}),_c("div",{staticClass:"height330 overflow-y-scroll pB70 pL5 pR5"},[_c("el-form",{ref:"criteria-builder",attrs:{rules:_vm.rules,model:_vm.namedCriteria}},[_c("el-form-item",{attrs:{label:_vm.$t("common.products.name"),prop:"name",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",placeholder:_vm.$t("common._common.enter_crieteria_name")},model:{value:_vm.namedCriteria.name,callback:function($$v){_vm.$set(_vm.namedCriteria,"name",$$v)},expression:"namedCriteria.name"}})],1)],1),_c("CriteriaBuilder",{attrs:{moduleName:_vm.module,isOneLevelEnabled:!0},model:{value:_vm.criteria,callback:function($$v){_vm.criteria=$$v},expression:"criteria"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.saveCriteria()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common._save"))+" ")])],1)],1)},CriteriaBuilderDialogvue_type_template_id_0e096f79_scoped_true_staticRenderFns=[],StateTransitionCriteria=(__webpack_require__(434284),__webpack_require__(557428)),clone=__webpack_require__(766678),clone_default=__webpack_require__.n(clone),dist=__webpack_require__(191853),CriteriaBuilderDialogvue_type_script_lang_js={extends:StateTransitionCriteria/* default */.Z,components:{CriteriaBuilder:dist/* CriteriaBuilder */.IP},props:["selectedCriteria","expressionIdx"],data:function(){return{criteria:null,error:!1,errorMessage:"",criteriaRendered:!1,namedCriteria:{name:null,criteria:null},rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"}}}},created:function(){if((0,validation/* isEmpty */.xb)(this.selectedCriteria))this.namedCriteria.name="Expression ".concat(this.expressionIdx);else{var _ref=this.selectedCriteria||{},criteria=_ref.criteria,name=_ref.name;this.criteria=criteria||null,this.namedCriteria.name=name}},methods:{saveCriteria:function(){var _this=this,criteria=clone_default()(this.criteria),activeCriteria=this.serializeCriteria(criteria);
// overridden from StateTransitionCriteria(parent component)
this.$refs["criteria-builder"].validate(function(){var _ref2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(valid){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(valid){_context.next=2;break}return _context.abrupt("return",!1);case 2:if((0,validation/* isEmpty */.xb)(activeCriteria)){_context.next=8;break}_this.namedCriteria.criteria=activeCriteria,_this.$emit("save",_this.namedCriteria),_this.close(),_context.next=11;break;case 8:return _this.error=!0,_this.errorMessage=_this.$t("common.header.please_select_fields"),_context.abrupt("return");case 11:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}())}}},conditionmanager_CriteriaBuilderDialogvue_type_script_lang_js=CriteriaBuilderDialogvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(conditionmanager_CriteriaBuilderDialogvue_type_script_lang_js,CriteriaBuilderDialogvue_type_template_id_0e096f79_scoped_true_render,CriteriaBuilderDialogvue_type_template_id_0e096f79_scoped_true_staticRenderFns,!1,null,"0e096f79",null)
/* harmony default export */,CriteriaBuilderDialog=component.exports,ScriptDialogvue_type_template_id_ba9304d0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"pB15 fc-dialog-center-container fc-dialog-center-body-p0",attrs:{visible:!0,width:"60%",title:"script","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"height550 overflow-y-scroll pB30 pT20 pR30 pL30"},[_c("el-form",{ref:"script-dialog",attrs:{rules:_vm.rules,model:_vm.scriptData}},[_c("el-form-item",{attrs:{label:"Name",prop:"name",required:!0}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{autofocus:"",placeholder:"Enter Script Name"},model:{value:_vm.scriptData.name,callback:function($$v){_vm.$set(_vm.scriptData,"name",$$v)},expression:"scriptData.name"}})],1)],1),_c("p",{staticClass:"fc-input-label-txt"},[_vm._v("Script")]),_c("code-mirror",{staticClass:"condition-manager-script",attrs:{codeeditor:!0},model:{value:_vm.scriptData.workflow,callback:function($$v){_vm.$set(_vm.scriptData,"workflow",$$v)},expression:"scriptData.workflow"}})],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(" CANCEL ")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveScript}},[_vm._v(" Save ")])],1)])},ScriptDialogvue_type_template_id_ba9304d0_staticRenderFns=[],CodeMirror=(__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(212826),__webpack_require__(919324)),ScriptDialogvue_type_script_lang_js={props:["selectedScript","moduleName","expressionIdx"],components:{CodeMirror:CodeMirror/* default */.Z},data:function(){return{scriptData:{name:null,workflow:null},rules:{name:{required:!0,message:"Please enter a name",trigger:"change"}}}},created:function(){var _ref=this.selectedScript||{},workflowContext=_ref.workflowContext,name=_ref.name;if((0,validation/* isEmpty */.xb)(workflowContext))this.scriptData.name="Expression ".concat(this.expressionIdx);else{var _ref2=workflowContext||{},workflowV2String=_ref2.workflowV2String,workflowId=_ref2.id;this.scriptData={name:name,workflow:this.getScriptWorkflow(workflowV2String),workflowId:workflowId}}},methods:{getScriptWorkflow:function(workflowString){return workflowString?workflowString.replace("boolean scriptFunc(Map "+this.moduleName+") {\n","").replace("void scriptFunc(Map "+this.moduleName+") {\n","").replace("Boolean scriptFunc(Map "+this.moduleName+") {\n","").replace(new RegExp("\n}$"),""):null},saveScript:function(){var _this=this,scriptData=this.scriptData,moduleName=this.moduleName,_ref3=scriptData||{},workflow=_ref3.workflow,name=_ref3.name,workflowId=_ref3.workflowId;this.$refs["script-dialog"].validate(function(){var _ref4=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(valid){var workflowV2String,workflowContext,scriptDataToSave;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(valid){_context.next=2;break}return _context.abrupt("return",!1);case 2:if(!(0,validation/* isEmpty */.xb)(workflow)){_context.next=5;break}return _this.$message.error("Script is Empty"),_context.abrupt("return");case 5:workflowV2String="Boolean scriptFunc(Map "+moduleName+") {\n"+workflow+"\n}",workflowContext={isV2Script:!0,workflowV2String:workflowV2String},(0,validation/* isEmpty */.xb)(workflowId)||(workflowContext=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},workflowContext),{},{id:workflowId})),scriptDataToSave={name:name,workflowContext:workflowContext},_this.$emit("onSave",scriptDataToSave),_this.closeDialog();case 11:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref4.apply(this,arguments)}}())},closeDialog:function(){this.$emit("onClose")}}},conditionmanager_ScriptDialogvue_type_script_lang_js=ScriptDialogvue_type_script_lang_js,ScriptDialog_component=(0,componentNormalizer/* default */.Z)(conditionmanager_ScriptDialogvue_type_script_lang_js,ScriptDialogvue_type_template_id_ba9304d0_render,ScriptDialogvue_type_template_id_ba9304d0_staticRenderFns,!1,null,null,null)
/* harmony default export */,ScriptDialog=ScriptDialog_component.exports,flatten=__webpack_require__(385564),flatten_default=__webpack_require__.n(flatten),criteriaTypes={SIMPLE:1,SCRIPT:2},operatorTypes={AND:1,OR:2,CUSTOM:3},ConditionManagerFormvue_type_script_lang_js={props:["selectedConditon","isNew","moduleName"],components:{CriteriaBuilder:CriteriaBuilderDialog,ScriptDialog:ScriptDialog},data:function(){return{namedCriteria:{name:null,pattern:null,conditions:{}},conditions:[],saving:!1,criteriaType:{1:"Simple",2:"Script"},operatorType:1,showCriteriaBuilder:!1,showScript:!1,activeCriteria:null,activeScript:null,activeConditionKey:null,expressionIdx:null,criteriaTypes:criteriaTypes,operatorTypes:operatorTypes,rules:{name:{required:!0,message:this.$t("common._common.please_enter_a_name"),trigger:"change"},pattern:{validator:function(rule,value,callback){var conditions=this.conditions,usedOperator=flatten_default()((0,toConsumableArray/* default */.Z)(value.matchAll(/and|or/gm))),conditionLength=conditions.length,brackets=flatten_default()((0,toConsumableArray/* default */.Z)(value.matchAll(/\(|\)/gm))),validBracketCount=0;brackets.forEach((function(b){"("===b?validBracketCount+=1:")"===b&&(validBracketCount-=1)})),conditionLength!==usedOperator.length+1||0!==validBracketCount?callback(new Error(this.$t("common._common.please_enter_valid_pattern"))):callback()}.bind(this),trigger:"change"}}}},created:function(){if(!this.isNew){var _this$selectedCondito=this.selectedConditon,conditions=_this$selectedCondito.conditions,pattern=_this$selectedCondito.pattern,usedOperatorTypes=flatten_default()((0,toConsumableArray/* default */.Z)(pattern.matchAll(/and|or/gm)));usedOperatorTypes.every((function(t){return"and"===t}))?this.operatorType=operatorTypes.AND:usedOperatorTypes.every((function(t){return"or"===t}))?this.operatorType=operatorTypes.OR:this.operatorType=operatorTypes.CUSTOM,this.conditions=Object.values(conditions),this.namedCriteria=this.selectedConditon}},watch:{conditions:function(newVal){var namedCriteria=this.namedCriteria,conditions=newVal.reduce((function(namedCriteria,condition,index){return namedCriteria[index+1]=condition,namedCriteria}),{});this.namedCriteria=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},namedCriteria),{},{conditions:conditions})}},methods:{openConditionExpressions:function(type){var SIMPLE=criteriaTypes.SIMPLE,SCRIPT=criteriaTypes.SCRIPT;this.activeCriteria=null,this.activeScript=null,this.expressionIdx=this.conditions.length+1,type===SIMPLE?this.showCriteriaBuilder=!0:type===SCRIPT&&(this.showScript=!0)},addConditionExpressions:function(data,criteriaType){var SIMPLE=criteriaTypes.SIMPLE,SCRIPT=criteriaTypes.SCRIPT,condition={};if(criteriaType===SIMPLE?condition=(0,objectSpread2/* default */.Z)({type:SIMPLE},data):criteriaType===SCRIPT&&(condition=(0,objectSpread2/* default */.Z)({type:SCRIPT},data)),this.activeConditionKey){var index=this.activeConditionKey-1;this.conditions.splice(index,1,condition),this.activeConditionKey=null}else{this.conditions.push(condition);var conditionLength=this.conditions.length,newPattern="(1)";if(1!==conditionLength){var operatorType=this.operatorType,namedCriteria=this.namedCriteria,_ref=namedCriteria||{},pattern=_ref.pattern,AND=operatorTypes.AND,CUSTOM=operatorTypes.CUSTOM,operator=[AND,CUSTOM].includes(operatorType)?"and":"or",newCondition=" ".concat(operator," ").concat(conditionLength,")");newPattern=pattern.replace(/\)$/gm,newCondition)}this.$set(this.namedCriteria,"pattern",newPattern)}},editExpression:function(condition,activeKey){var SIMPLE=criteriaTypes.SIMPLE,SCRIPT=criteriaTypes.SCRIPT,type=condition.type;type===SIMPLE?(this.activeCriteria=condition,this.showCriteriaBuilder=!0):type===SCRIPT&&(this.activeScript=condition,this.showScript=!0),this.activeConditionKey=parseInt(activeKey)},deleteExpression:function(conditionKey){var index=conditionKey-1;this.conditions.splice(index,1);var operatorType=this.operatorType,patternConditions=Object.keys(this.conditions).map((function(c){return parseInt(c)+1})),AND=operatorTypes.AND,CUSTOM=operatorTypes.CUSTOM,newPattern="";newPattern=[AND,CUSTOM].includes(operatorType)?"(".concat(patternConditions.join(" and "),")"):"(".concat(patternConditions.join(" or "),")"),this.$set(this.namedCriteria,"pattern",newPattern)},setPattern:function(){var operatorType=this.operatorType,namedCriteria=this.namedCriteria,pattern=namedCriteria.pattern,AND=operatorTypes.AND,CUSTOM=operatorTypes.CUSTOM;pattern=[AND,CUSTOM].includes(operatorType)?pattern.replace(/and|or/gm,"and"):pattern.replace(/and|or/gm,"or"),this.$set(this.namedCriteria,"pattern",pattern)},submitForm:function(){var _this=this,conditions=this.conditions,moduleName=this.moduleName,namedCriteria=this.namedCriteria;(0,validation/* isEmpty */.xb)(conditions)?this.$message.error(this.$t("common.header.atleast_one_condition_should_configured")):this.$refs["condition-manager"].validate(function(){var _ref2=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(valid){var url,params,_yield$API$post,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(valid){_context.next=2;break}return _context.abrupt("return",!1);case 2:return _this.saving=!0,url="v2/namedCriteria/addOrUpdate",params={moduleName:moduleName,namedCriteria:namedCriteria},_context.next=7,api/* API */.bl.post(url,params);case 7:_yield$API$post=_context.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this.$message.error(error.message||"Error Occurred"):(_this.$message.success(_this.$t("common.header.condition_saved_successfully")),_this.$emit("onSave",data.namedCriteria),_this.closeDialog()),_this.saving=!1;case 12:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}())},closeDialog:function(){this.$emit("onClose")}}},conditionmanager_ConditionManagerFormvue_type_script_lang_js=ConditionManagerFormvue_type_script_lang_js,ConditionManagerForm_component=(0,componentNormalizer/* default */.Z)(conditionmanager_ConditionManagerFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ConditionManagerForm=ConditionManagerForm_component.exports},
/***/185759:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FormsEdit}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/modules/FormsEdit.vue?vue&type=template&id=61fd330e&scoped=true
var SubformRulesList_render,SubformRulesList_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"form-customization-container position-relative",class:_vm.isSaving||_vm.hasError?"noselect":""},[_c("FFormLoader",{attrs:{isFormLoading:_vm.isFormLoading}}),_c("div",{staticClass:"header p15"},[_c("div",{staticClass:"title cursor-pointer",on:{click:_vm.removeActiveField}},[_vm._v(" "+_vm._s(_vm.formProperties.displayName)+" "),_c("span",{directives:[{name:"show",rawName:"v-show",value:_vm.isSaving,expression:"isSaving"}],staticClass:"saving-container"},[_vm._v(_vm._s(_vm.$t("common.roles.saving")))])]),_c("div",{staticClass:"mL-auto"},["builder"===_vm.activeTab?_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none",attrs:{type:"primary",disabled:_vm.isSaving},on:{click:function($event){return _vm.saveFormRecord({redirect:!0})}}},[_vm._v(_vm._s(_vm.$t("common._common.done")))]):_c("portal-target",{attrs:{name:"builder-btn-portal"}})],1)]),_c("div",{staticClass:"customization-tabs"},[_c("portal-target",{staticClass:"builder-action-config-portal",attrs:{name:"builder-action-config"}}),_c("el-tabs",{model:{value:_vm.activeTab,callback:function($$v){_vm.activeTab=$$v},expression:"activeTab"}},[_c("el-tab-pane",{staticClass:"builder-container",attrs:{label:"BUILDER",name:"builder"}},[_c("div",{staticClass:"fields-section"},[_c("div",{staticClass:"default-fields"},[_c("div",{staticClass:"fc-dark-grey-txt fw-bold f12 p15 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.new_fields"))+" ")]),_c("div",{staticClass:"container"},[_c("el-row",{attrs:{gutter:20}},[_c("draggable",_vm._b({staticClass:"dragArea",attrs:{clone:_vm.createNewFieldInstance,disabled:_vm.isSaving||_vm.hasError,move:_vm.onFieldsMove},on:{start:_vm.onStart,end:_vm.onEnd},model:{value:_vm.defaultFields,callback:function($$v){_vm.defaultFields=$$v},expression:"defaultFields"}},"draggable",_vm.defaultFieldsDragOptions,!1),_vm._l(_vm.defaultFields,(function(field,index){return _c("el-col",{key:index,staticClass:"mB15",attrs:{span:12}},[_c("el-tooltip",{attrs:{disabled:field.displayName.length<16,effect:"dark",content:field.displayName,placement:"top"}},[_c("div",{staticClass:"field-block"},[_c("div",{staticClass:"field-label fw4 truncate-text"},[_c("span",{staticClass:"mR5 vertical-middle"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:_vm.getIconSrc(field.displayTypeEnum),iconClass:"icon icon-sm-md"}})],1),_vm._v(" "+_vm._s(field.displayName)+" ")])])])],1)})),1)],1),_c("el-row",{staticClass:"mB20",attrs:{gutter:20}},[_c("draggable",_vm._b({staticClass:"dragArea",attrs:{clone:_vm.createNewFieldInstance,move:_vm.onNewSectionFieldsMove,disabled:_vm.isSaving||_vm.hasError},on:{start:_vm.onStart,end:_vm.onEnd},model:{value:_vm.newSection,callback:function($$v){_vm.newSection=$$v},expression:"newSection"}},"draggable",_vm.newSectionDragOptions,!1),[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"field-block"},[_c("div",{staticClass:"field-label fw4 truncate-text d-flex"},[_c("span",{staticClass:"mR5"},[_c("img",{staticClass:"field-icons",attrs:{src:__webpack_require__(406729)}})]),_vm._v(" "+_vm._s(_vm.$t("forms.builder.new_section"))+" ")])])])],1)],1),_c("el-row",{attrs:{gutter:20}},[_c("draggable",_vm._b({staticClass:"dragArea",attrs:{clone:_vm.createNewFieldInstance,move:_vm.onNewSectionFieldsMove,disabled:_vm.isSaving||_vm.hasError},on:{start:_vm.onStart,end:_vm.onEnd},model:{value:_vm.newSubForm,callback:function($$v){_vm.newSubForm=$$v},expression:"newSubForm"}},"draggable",_vm.newSectionDragOptions,!1),[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"field-block"},[_c("div",{staticClass:"field-label fw4 truncate-text d-flex"},[_c("span",{staticClass:"mR5"},[_c("img",{staticClass:"field-icons",attrs:{src:__webpack_require__(406729)}})]),_vm._v(" "+_vm._s(_vm.$t("forms.builder.new_subform"))+" ")])])])],1)],1)],1)]),_c("div",{staticClass:"sys-cus-fields"},[_c("el-tabs",{model:{value:_vm.activeFieldsTab,callback:function($$v){_vm.activeFieldsTab=$$v},expression:"activeFieldsTab"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("forms.builder.system_label"),name:"systemfields"}},[_c("div",{staticClass:"container"},[_c("el-row",{attrs:{gutter:20}},[_c("draggable",_vm._b({staticClass:"dragArea",attrs:{disabled:_vm.isSaving||_vm.hasError,move:_vm.onFieldsMove},on:{start:_vm.onStart,end:_vm.onEnd},model:{value:_vm.systemFields,callback:function($$v){_vm.systemFields=$$v},expression:"systemFields"}},"draggable",_vm.systemFieldsDragOptions,!1),_vm._l(_vm.systemFields,(function(field,index){return _c("el-col",{key:index,staticClass:"mB15",attrs:{span:24}},[_c("el-tooltip",{attrs:{disabled:field.displayName.length<40,effect:"dark",content:field.displayName,placement:"top"}},[_c("div",{staticClass:"field-block"},[_c("div",{staticClass:"field-label fw4 truncate-text"},[_c("span",{staticClass:"mR5 vertical-middle"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:_vm.getIconSrc(field.name),iconClass:"icon icon-sm-md"}})],1),_vm._v(" "+_vm._s(field.displayName)+" ")])])])],1)})),1)],1)],1)]),_c("el-tab-pane",{attrs:{label:_vm.$t("forms.builder.custom_label"),name:"customfields"}},[_c("div",{staticClass:"container"},[_c("el-row",{attrs:{gutter:20}},[_c("draggable",_vm._b({staticClass:"dragArea",attrs:{clone:_vm.createNewFieldInstance,disabled:_vm.isSaving||_vm.hasError,move:_vm.onFieldsMove},on:{start:_vm.onStart,end:_vm.onEnd},model:{value:_vm.customFields,callback:function($$v){_vm.customFields=$$v},expression:"customFields"}},"draggable",_vm.systemFieldsDragOptions,!1),_vm._l(_vm.customFields,(function(field,index){return _c("el-col",{key:index,staticClass:"mB15",attrs:{span:24}},[_c("el-tooltip",{attrs:{disabled:field.displayName.length<40,effect:"dark",content:field.displayName,placement:"top"}},[_c("div",{staticClass:"field-block"},[_c("div",{staticClass:"field-label fw4 truncate-text"},[_c("span",{staticClass:"mR5 vertical-middle"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:_vm.getIconSrc(field.displayTypeEnum),iconClass:"icon icon-sm-md"}})],1),_vm._v(" "+_vm._s(field.displayName)+" ")])])])],1)})),1)],1)],1)])],1)],1)]),_c("div",{staticClass:"builder-prop-wrapper"},[_c("div",{staticClass:"builder-section"},[_c("el-form",{ref:"formsEdit",staticClass:"form-builder-main-form pT20 pb20",attrs:{model:_vm.formProperties,"label-position":_vm.formProperties.labelPosition,"label-width":"100px"},nativeOn:{click:function($event){return _vm.removeActiveField.apply(null,arguments)}}},[_c("draggable",_vm._b({staticClass:"dragArea fc-main-drag-area",attrs:{move:_vm.onSectionsMove,disabled:_vm.isSaving||_vm.hasError,"ghost-class":"ghost-class-sections"},on:{change:_vm.onSectionChange},model:{value:_vm.sections,callback:function($$v){_vm.sections=$$v},expression:"sections"}},"draggable",_vm.formSectionDragOptions,!1),_vm._l(_vm.sections,(function(row,rowIndex){return _c("div",{key:rowIndex,staticClass:"section-container position-relative mB15 p10 mL20 mR20",class:[rowIndex===_vm.sections.length-1?"border-none":"",_vm.isSectionActive(row)?"active":"",_vm.isImageSection(row)?"":"form-drag-section"],on:{click:function($event){return $event.stopPropagation(),_vm.setActiveSection(rowIndex)}}},[!_vm.hasError&&_vm.canShowSectionDelete(row,rowIndex)?_c("img",{staticClass:"delete-icon",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return $event.stopPropagation(),_vm.removeSection(row,rowIndex)}}}):_vm._e(),_vm.canShowSectionHeader(row,rowIndex)?_c("div",{staticClass:"section-header"},[_c("p",{staticClass:"fc-dark-grey-txt fw-bold f12 text-uppercase section-name"},[_vm._v(" "+_vm._s(row.name)+" ")])]):_vm._e(),_vm.$validation.isEmpty(row.subForm)||2!==row.sectionType?_c("draggable",_vm._b({staticClass:"dragArea flex-container",class:_vm.isFieldEmpty(row.fields)?"pT20 pB20":"pT10",attrs:{"ghost-class":_vm.ghostClass,disabled:_vm.isSaving||_vm.hasError,move:_vm.onFieldsMove},on:{start:_vm.onStart,end:_vm.onEnd,change:function($event){var i=arguments.length,argsArray=Array(i);while(i--)argsArray[i]=arguments[i];return _vm.onFieldChange.apply(void 0,[rowIndex,row].concat(argsArray))}},model:{value:_vm.sections[rowIndex].fields,callback:function($$v){_vm.$set(_vm.sections[rowIndex],"fields",$$v)},expression:"sections[rowIndex].fields"}},"draggable",_vm.formFieldsDragOptions,!1),_vm._l(row.fields,(function(column,columnIndex){return _c("div",{key:columnIndex,staticClass:"form-drag-main-ele-con position-relative mb5",class:[1===column.span?"form-one-column":"form-two-column","top"!==_vm.formProperties.labelPosition?"label-bottom":"","IMAGE"!==column.displayTypeEnum?"form-drag-item":""],on:{click:function($event){var i=arguments.length,argsArray=Array(i);while(i--)argsArray[i]=arguments[i];return $event.stopPropagation(),_vm.setActiveField.apply(void 0,[column,rowIndex,columnIndex].concat(argsArray))}}},[_vm.isFieldEmpty(column)?_c("el-form-item"):_c("el-form-item",{staticClass:"form-label-container",class:[_vm.isFieldActive(column)?"active":"",["photo"].includes(column.name)?"photo-field":"",["avatar"].includes(column.name)?"avatar-field":"",["NOTES"].includes(column.displayTypeEnum)?"notes-field":"",column.hideField?"":"hide-field"],attrs:{required:column.required}},[["photo","avatar"].includes(column.name)||["NOTES"].includes(column.displayTypeEnum)?_vm._e():_c("div",{staticClass:"d-flex",attrs:{slot:"label"},slot:"label"},[_c("div",[_vm._v(" "+_vm._s(column.displayName)+" "),column.hideField?_c("inline-svg",{attrs:{src:"svgs/hidden-field",iconClass:"mL5 icon icon-sm vertical-text-bottom"}}):_vm._e()],1)]),_c("img",{directives:[{name:"show",rawName:"v-show",value:!_vm.isSaving&&!_vm.hasError&&_vm.canShowFieldDelete(column),expression:"\n                            !isSaving &&\n                              !hasError &&\n                              canShowFieldDelete(column)\n                          "}],staticClass:"delete-icon",attrs:{src:__webpack_require__(385769)},on:{click:function($event){return $event.stopPropagation(),_vm.removeField(column,rowIndex,columnIndex)}}}),_vm.canShowLayoutIcon(column)?_c("img",{staticClass:"layout-icon",attrs:{src:_vm.layoutIcon(column.span)},on:{click:function($event){return $event.stopPropagation(),_vm.changeLayout(column)}}}):_vm._e(),["TEXTAREA","RICH_TEXT"].includes(column.displayTypeEnum)?_c("el-input",{key:""+rowIndex+columnIndex,staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},resize:"none",placeholder:"Type your  "+column.displayName,disabled:_vm.isPreview}}):"DECISION_BOX"===column.displayTypeEnum?_c("el-checkbox",{attrs:{disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}}):"RADIO"===column.displayTypeEnum?_c("el-radio-group",{attrs:{disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!0}},[_vm._v(" "+_vm._s(column.field.trueVal)+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:!1}},[_vm._v(" "+_vm._s(column.field.falseVal)+" ")])],1):_vm.isSiteField(column)?_c("FSiteField",{attrs:{model:column.value,canDisable:_vm.isPreview,isBuilder:!0},on:{"update:model":function($event){return _vm.$set(column,"value",$event)}}}):_vm.$fieldUtils.isChooserTypeField(column)&&!_vm.isSpaceChooser(column)?_c("FLookupField",{key:columnIndex+" "+column.id,attrs:{model:(column.value||{}).id,field:column,disabled:_vm.isPreview,hideLookupIcon:!0,siteId:_vm.selectedSiteId,fetchOptionsOnLoad:!0},on:{"update:model":function($event){_vm.$set(column.value||{},"id",$event)}}}):_vm.isLookupSimple(column)||_vm.isMultiLookup(column)||_vm.isSpaceChooser(column)?[_c("FLookupField",{key:columnIndex+" "+column.id,attrs:{field:column,disabled:_vm.isPreview,hideLookupIcon:!0,siteId:_vm.selectedSiteId,fetchOptionsOnLoad:!0}})]:_vm.isDropdownTypeFields(column.displayTypeEnum)&&_vm.isMultiple(column)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-tag",attrs:{"collapse-tags":"",multiple:!0,filterable:"",placeholder:"Select",disabled:_vm.isPreview}},_vm._l(column.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):_vm.isDropdownTypeFields(column.displayTypeEnum)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select",disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}},_vm._l(column.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):"TEAMSTAFFASSIGNMENT"===column.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2",attrs:{disabled:_vm.isPreview}},[_c("div",{staticClass:"fc-border-input-div"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(column.value)))]),_c("span",{staticStyle:{float:"right"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_vm.isPreview?_vm._e():_c("FAssignment",{attrs:{model:column.value,siteId:_vm.selectedSiteId,viewtype:"form"}})],1):"ATTACHMENT"===column.displayTypeEnum?_c("div",[_c("div",{staticClass:"fc-attachments"},[_c("div",{staticClass:"pointer"},[_c("form",[_c("div",{staticClass:"dropbox text-center"},[_c("img",{staticClass:"mT10 upload-icon",attrs:{src:__webpack_require__(581121)}}),_c("input",{staticClass:"input-file"}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_file"))+" "),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])])])])]):"NUMBER"===column.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number",disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}}):["TASKS","PERMIT_CHECKLIST","QUOTE_LINE_ITEMS","INVREQUEST_LINE_ITEMS","QUOTE_ADDRESS","ADDRESS","SADDRESS","LINEITEMS","GEO_LOCATION","BUDGET_AMOUNT","FACILITY_AVAILABILITY","FACILITY_BOOKING_SLOTS"].includes(column.displayTypeEnum)?_c("el-input",{staticClass:"fc-input-full-border2",attrs:{disabled:_vm.isPreview}}):"TIME"===column.displayTypeEnum?_c("FTimePicker",{key:"time "+columnIndex+" "+column.id,staticClass:"el-select fc-input-full-border-select2 width100",attrs:{field:column,disabled:_vm.isPreview,placeholder:_vm.$t("fields.properties.time_picker_placeholder")},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}}):"DATE"===column.displayTypeEnum?_c("FDatePicker",{key:columnIndex+" "+column.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"date",disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}}):"DATETIME"===column.displayTypeEnum?_c("FDatePicker",{key:columnIndex+" "+column.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"datetime",disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}}):"DATERANGE"===column.displayTypeEnum?_c("FDatePicker",{key:columnIndex+" "+column.id,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"daterange",disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}}):"DURATION"===column.displayTypeEnum?_c("div",[_c("f-duration-field",{key:columnIndex+" "+column.id,staticClass:"duration-container",attrs:{field:column,isDisabled:_vm.isPreview}})],1):"IMAGE"===column.displayTypeEnum?_c("div",[_c("forms-photo-field",{attrs:{field:column,activeField:_vm.activeField},on:{updatePhotoField:_vm.updatePhotoField}})],1):"FILE"===column.displayTypeEnum?_c("FFileUpload",{attrs:{isFileType:!0,isDisabled:_vm.isPreview,imgContentUrl:column.imgUrl,showWebCamPhoto:!1},on:{"update:imgContentUrl":function($event){return _vm.$set(column,"imgUrl",$event)},"update:img-content-url":function($event){return _vm.$set(column,"imgUrl",$event)}}}):"SIGNATURE"===column.displayTypeEnum?_c("div",[_c("FSignaturePad",{attrs:{disabled:_vm.isPreview,canShowColorPalette:(column.config||{}).canShowColorPalette}})],1):"NOTES"===column.displayTypeEnum?_c("div",{staticClass:"notes-container"},[_c("InlineSvg",{staticClass:"self-center pointer d-flex",attrs:{src:"form-notes",iconClass:"icon icon-sm-md"}}),_c("div",{staticClass:"mL10"},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.notes_des"))+" ")])],1):"URL_FIELD"===column.displayTypeEnum?_c("FUrlField",{key:columnIndex+"-"+column.id,attrs:{field:column,isDisabled:_vm.isPreview,config:column.config}}):"CURRENCY"===column.displayTypeEnum?_c("div",[_c("FCurrencyField",{key:columnIndex+"-"+column.id,attrs:{disabled:_vm.isPreview,field:column,config:column.config,value:column.value}})],1):"MULTI_CURRENCY"===column.displayTypeEnum?_c("div",[_c("FNewCurrencyField",{key:columnIndex+"-"+column.id,attrs:{disabled:_vm.isPreview,field:column,config:column.config,value:column.value,hideCurrency:!0,hideDesc:!0}})],1):"EMAIL"===column.displayTypeEnum?_c("FEmailField",{attrs:{field:column,isDisabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}}):"GEO_LOCATION"===column.displayTypeEnum?_c("div",[_c("FLocationField",{key:columnIndex+"-"+column.id,attrs:{field:column,disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}})],1):_c("el-input",{staticClass:"fc-input-full-border2",attrs:{disabled:_vm.isPreview},model:{value:column.value,callback:function($$v){_vm.$set(column,"value",$$v)},expression:"column.value"}})],2)],1)})),0):_c("div",[_c("f-sub-form",{key:row.subFormId,attrs:{form:row.subForm,isLiveSubForm:!1,isSaving:_vm.isSaving,fieldError:_vm.hasError,activeField:_vm.activeField},on:{"update:activeField":function($event){_vm.activeField=$event},"update:active-field":function($event){_vm.activeField=$event},onDragEnd:_vm.onEnd,onDragStart:_vm.onStart,resetActiveSection:_vm.resetActiveSection,removeActiveField:_vm.removeActiveField}})],1)],1)})),0),_c("div",{staticClass:"formbuilder-main-btn"},[_c("el-button",{staticClass:"formbuilder-secondary-btn text-uppercase"},[_vm._v(" "+_vm._s(_vm.formProperties.secondaryBtnLabel)+" ")]),_c("el-button",{staticClass:"formbuilder-primary-btn text-uppercase"},[_vm._v(" "+_vm._s(_vm.formProperties.primaryBtnLabel)+" ")])],1)],1)],1),_c("div",{staticClass:"property-section"},[_c("FieldProperties",{attrs:{formId:_vm.formId,formObj:_vm.formObj,moduleName:_vm.moduleName,isCustomModule:_vm.isCustomModule,field:_vm.activeField,fieldsList:_vm.formFields,section:_vm.activeSection,formRulesMap:_vm.formRulesMap,formProperties:_vm.formProperties,spaceAssetResourceObj:_vm.spaceAssetResourceObj,jobPlansList:_vm.jobPlansList,isSaving:_vm.isSaving,allowUpdateProp:_vm.allowUpdateProp,allowUpdateFormProp:_vm.allowUpdateFormProp,isFieldPropertiesLoading:_vm.isFieldPropertiesLoading,hasError:_vm.hasError,filter:_vm.filter,siteId:_vm.selectedSiteId,moduleList:_vm.moduleList,currentSiteId:_vm.currentSiteId,isUpdateForm:_vm.isUpdateForm},on:{"update:spaceAssetResourceObj":function($event){_vm.spaceAssetResourceObj=$event},"update:space-asset-resource-obj":function($event){_vm.spaceAssetResourceObj=$event},"update:isSaving":function($event){_vm.isSaving=$event},"update:is-saving":function($event){_vm.isSaving=$event},"update:hasError":function($event){_vm.hasError=$event},"update:has-error":function($event){_vm.hasError=$event},"update:filter":function($event){_vm.filter=$event},openConfigurationDialog:_vm.canShowSubFormDefaultDialog,loadRulesList:_vm.getFormRulesMap,formFieldUpdated:_vm.formFieldUpdated,saveDefaultValue:_vm.saveDefaultValue}})],1)])]),_c("el-tab-pane",{attrs:{label:"RULES",name:"rules",lazy:""}},["rules"===_vm.activeTab?_c("FormRulesList",{attrs:{moduleName:_vm.moduleName,formId:_vm.formId,redirectToFormsList:_vm.redirectToFormsList,formObj:_vm.formObj,isUpdateForm:_vm.isUpdateForm}}):_vm._e()],1),_c("el-tab-pane",{attrs:{label:_vm.$t("setup.form_builder.validation.validation_rules"),name:"validation",lazy:""}},["validation"===_vm.activeTab?_c("ValidationRulesList",{attrs:{moduleName:_vm.moduleName,formId:_vm.formId,redirectToFormsList:_vm.redirectToFormsList}}):_vm._e()],1),_vm.isSubFormPresent?_c("el-tab-pane",{attrs:{label:"SUBFORM RULES",name:"subformrules",lazy:""}},["subformrules"===_vm.activeTab?_c("SubformRulesList",{attrs:{moduleName:_vm.moduleName,formId:_vm.formId,redirectToFormsList:_vm.redirectToFormsList,formObj:_vm.formObj,isUpdateForm:_vm.isUpdateForm}}):_vm._e()],1):_vm._e()],1)],1),_vm.openLookupDialog?_c("LookupFieldProperties",{attrs:{openLookupDialog:_vm.openLookupDialog,moduleList:_vm.moduleList,lookupField:_vm.lookupField,moduleName:_vm.moduleName,isLocationField:_vm.isLocationField,isCustomModule:_vm.isCustomModule},on:{"update:openLookupDialog":function($event){_vm.openLookupDialog=$event},"update:open-lookup-dialog":function($event){_vm.openLookupDialog=$event},"update:lookupField":function($event){_vm.lookupField=$event},"update:lookup-field":function($event){_vm.lookupField=$event},addNewDefaultField:_vm.addNewDefaultField,removeField:_vm.removeField}}):_vm._e(),_vm.openMultiLinePropDialog?_c("MultiLineFieldProperties",{ref:"multiLineFieldProperties",attrs:{openMultiLinePropDialog:_vm.openMultiLinePropDialog,multiLineField:_vm.multiLineField,moduleName:_vm.moduleName},on:{"update:openMultiLinePropDialog":function($event){_vm.openMultiLinePropDialog=$event},"update:open-multi-line-prop-dialog":function($event){_vm.openMultiLinePropDialog=$event},"update:multiLineField":function($event){_vm.multiLineField=$event},"update:multi-line-field":function($event){_vm.multiLineField=$event},addNewDefaultField:_vm.addNewDefaultField,removeField:_vm.removeField}}):_vm._e(),_vm.openSubformDialog?_c("SubFormModulesList",{attrs:{openSubformDialog:_vm.openSubformDialog,subFormsModules:_vm.subFormsModules,activeSectionIndex:_vm.activeSectionIndex,activeSection:_vm.activeSection,formId:(_vm.formProperties||{}).id},on:{"update:openSubformDialog":function($event){_vm.openSubformDialog=$event},"update:open-subform-dialog":function($event){_vm.openSubformDialog=$event},updateSubFormSection:_vm.updateSubFormSection,removeSection:_vm.removeSection}}):_vm._e(),_vm.openSubformDefaultDialog?_c("SubFormValuesConfigBox",{attrs:{openSubformDefaultDialog:_vm.openSubformDefaultDialog,allowUpdateProp:_vm.allowUpdateProp,section:_vm.activeSection},on:{"update:openSubformDefaultDialog":function($event){_vm.openSubformDefaultDialog=$event},"update:open-subform-default-dialog":function($event){_vm.openSubformDefaultDialog=$event},"update:allowUpdateProp":function($event){_vm.allowUpdateProp=$event},"update:allow-update-prop":function($event){_vm.allowUpdateProp=$event}}}):_vm._e(),_vm.openFieldNamePropDialog?_c("DefaultFieldProperties",{attrs:{canShowDialog:_vm.openFieldNamePropDialog,fieldObj:_vm.defaultField},on:{"update:canShowDialog":function($event){_vm.openFieldNamePropDialog=$event},"update:can-show-dialog":function($event){_vm.openFieldNamePropDialog=$event},removeField:_vm.removeField,addNewDefaultField:_vm.addNewDefaultField,"update:fieldObj":function($event){_vm.defaultField=$event},"update:field-obj":function($event){_vm.defaultField=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),slicedToArray=__webpack_require__(554621),FFormLoadervue_type_template_id_30c08cb8_render=(__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(976801),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(947522),__webpack_require__(450886),__webpack_require__(339772),__webpack_require__(821057),__webpack_require__(169358),__webpack_require__(162506),__webpack_require__(879288),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.isFormLoading,expression:"isFormLoading"}],staticClass:"formbuilder-con"},[_c("div",{staticClass:"formbuilder-main"},[_c("div",{staticClass:"formbuilder-outer-con"},[_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"height100"},[_c("div",{staticClass:"formbuilder-sidebar-left"},[_c("div",{staticClass:"formbuilder-left-tools-con"},[_c("div",{staticClass:"formbuilder-left-header"},[_c("div",{staticClass:"fc-grey-text-input-label pointer mT40"},[_c("el-row",{staticClass:"mB20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})])],1),_c("el-row",{staticClass:"mB20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})])],1)],1)])])]),_c("div",{staticClass:"formbuilder-main-con"},[_c("div",{staticClass:"formbuilder-main-inner"},[_c("div",{staticClass:"height100"},[_c("div",{staticClass:"formbuilder-main-bg"},[_c("div",{staticClass:"formbuilder-main-comp-left p20"},[_c("el-row",{staticClass:"mB20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})])],1),_c("el-row",{staticClass:"mB20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})])],1)],1),_c("div",{staticClass:"formbuilder-main-comp-right p20"},[_c("el-row",{staticClass:"mB20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})])],1),_c("el-row",{staticClass:"mB20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})])],1)],1)])])])])])])])])])}),FFormLoadervue_type_template_id_30c08cb8_staticRenderFns=[],FFormLoadervue_type_script_lang_js={props:{isFormLoading:{type:Boolean,required:!0}}},components_FFormLoadervue_type_script_lang_js=FFormLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FFormLoadervue_type_script_lang_js,FFormLoadervue_type_template_id_30c08cb8_render,FFormLoadervue_type_template_id_30c08cb8_staticRenderFns,!1,null,null,null)
/* harmony default export */,FFormLoader=component.exports,vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),http=__webpack_require__(218430),validation=__webpack_require__(990260),utility_methods=__webpack_require__(773258),FieldPropertiesvue_type_template_id_0374b13f_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldPropertiesLoading?_c("div",{staticClass:"p10"},_vm._l(2,(function(n){return _c("el-row",{key:n,staticClass:"mB20",attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-animated-background"})])],1)})),1):_vm.showFormProperties?_c("div",{staticClass:"pL30 pR30 pT10 pB30 overflow-scroll"},[_c("div",{staticClass:"fc-text-pink mB15 field-title"},[_vm._v(_vm._s(_vm.title))]),_c("el-row",{staticClass:"mB20",class:_vm.hasError?"error":""},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v("Title")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10",on:{input:function($event){return _vm.onLabelChange.apply(void 0,arguments)}},nativeOn:{change:function($event){return _vm.onFormInputChange()}},model:{value:_vm.formProperties.displayName,callback:function($$v){_vm.$set(_vm.formProperties,"displayName",$$v)},expression:"formProperties.displayName"}}),_vm.labelErrMsg?_c("span",{staticClass:"mL0 error-text"},[_vm._v(_vm._s(_vm.labelErrMsg))]):_vm._e()],1)],1),_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v("Description")]),_c("el-input",{staticClass:"fc-input-txt fc-desc-input fc-input-full-border-select2 mT10 mB0",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none"},on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFormInputChange()}},model:{value:_vm.formProperties.description,callback:function($$v){_vm.$set(_vm.formProperties,"description",$$v)},expression:"formProperties.description"}})],1)],1),_c("FormAlignmentSection",{attrs:{labelPosition:_vm.formProperties.labelPosition},on:{updatePosition:_vm.updatePosition}}),_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v("Primary Button")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10 fc-input-disabled",attrs:{disabled:!0},on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFormInputChange()}},model:{value:_vm.formProperties.primaryBtnLabel,callback:function($$v){_vm.$set(_vm.formProperties,"primaryBtnLabel",$$v)},expression:"formProperties.primaryBtnLabel"}})],1)],1),_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v("Secondary Button")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10 fc-input-disabled",attrs:{disabled:!0},on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFormInputChange()}},model:{value:_vm.formProperties.secondaryBtnLabel,callback:function($$v){_vm.$set(_vm.formProperties,"secondaryBtnLabel",$$v)},expression:"formProperties.secondaryBtnLabel"}})],1)],1)],1):_vm.showSectionProperties?_c("div",{staticClass:"pL30 pR30 pT10 pB30 overflow-scroll"},[_c("div",{staticClass:"fc-text-pink mB15 field-title"},[_vm._v(_vm._s(_vm.title))]),_c("el-row",{staticClass:"mB20",class:_vm.hasError?"error":""},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v("Label")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10",on:{input:function($event){return _vm.onLabelChange.apply(void 0,arguments)}},nativeOn:{change:function($event){return _vm.onSectionInputChange()}},model:{value:_vm.section.name,callback:function($$v){_vm.$set(_vm.section,"name",$$v)},expression:"section.name"}}),_vm.labelErrMsg?_c("span",{staticClass:"mL0 error-text"},[_vm._v(_vm._s(_vm.labelErrMsg))]):_vm._e()],1)],1),_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("el-checkbox",{model:{value:_vm.section.showLabel,callback:function($$v){_vm.$set(_vm.section,"showLabel",$$v)},expression:"section.showLabel"}},[_vm._v("Show header for this section")])],1)],1),_vm.isSubFormSection?_c("el-row",{staticClass:"mB20"},[_c("div",[_c("div",{staticClass:"details-Heading"},[_vm._v("Set default values")]),_c("el-button",{staticClass:"mT10",class:_vm.isDefaultConfigured?"success-green-btn":"small-border-btn",attrs:{type:"button"},on:{click:function($event){return _vm.openConfigurationDialog(!1)}}},[_vm._v(_vm._s(_vm.isDefaultConfigured?"Configured":"Configure"))]),_vm.isDefaultConfigured?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:"Edit default values"},on:{click:function($event){return _vm.openConfigurationDialog(!0)}}}),_c("span",{staticClass:"mL10 reset-txt-color f12 letter-spacing0_5 pointer",on:{click:function($event){return _vm.resetDefaultValues()}}},[_vm._v("Reset")])]):_vm._e()],1)]):_vm._e()],1):_c("div",{staticClass:"pL30 pR30 pT10 pB30 overflow-scroll field-prop-section"},[_c("div",{staticClass:"fc-text-pink mB15 field-title"},[_vm._v(_vm._s(_vm.title))]),_c("el-row",{staticClass:"mB20",class:_vm.hasError?"error":""},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.field_label"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10",on:{input:function($event){return _vm.onLabelChange.apply(void 0,arguments)}},nativeOn:{change:function($event){return _vm.onFieldInputChange()}},model:{value:_vm.field.displayName,callback:function($$v){_vm.$set(_vm.field,"displayName",$$v)},expression:"field.displayName"}}),_vm.labelErrMsg?_c("span",{staticClass:"mL0 error-text"},[_vm._v(_vm._s(_vm.labelErrMsg))]):_vm._e()],1)],1),_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.link_name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10 fc-input-disabled",attrs:{disabled:!0},model:{value:_vm.field.name,callback:function($$v){_vm.$set(_vm.field,"name",$$v)},expression:"field.name"}})],1)],1),_vm.showHideMand(_vm.field.displayTypeEnum)?_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("el-checkbox",{attrs:{disabled:_vm.canDisableMand(_vm.field.name)&&!_vm.isCustomModule},model:{value:_vm.field.required,callback:function($$v){_vm.$set(_vm.field,"required",$$v)},expression:"field.required"}},[_vm._v("Mandatory")])],1)],1):_vm._e(),_vm.isLookup(_vm.field)?[_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v("Lookup Module")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 fc-input-disabled",attrs:{placeholder:"Select",disabled:!0},model:{value:_vm.field.field.lookupModuleId,callback:function($$v){_vm.$set(_vm.field.field,"lookupModuleId",$$v)},expression:"field.field.lookupModuleId"}},_vm._l(_vm.moduleList,(function(module){return _c("el-option",{key:(module||{}).name,attrs:{label:(module||{}).displayName,value:(module||{}).moduleId}})})),1)],1)],1),_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.display_type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("fields.properties.display_type_placeholders"),disabled:""},model:{value:_vm.field.displayType,callback:function($$v){_vm.$set(_vm.field,"displayType",$$v)},expression:"field.displayType"}},[_c("el-option",{attrs:{label:_vm.$t("fields.properties.single_select"),value:10}}),_c("el-option",{attrs:{label:_vm.$t("fields.properties.multiple_select"),value:66}})],1)],1)],1),_vm.canShowRelatedListTitle(_vm.field)?_c("el-row",{staticClass:"mB20",class:[_vm.hasError&&"error"]},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13"},[_vm._v(" "+_vm._s(_vm.$t("common._common.enter_related_list_label"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10",attrs:{placeholder:_vm.$t("common._common.enter_name")},nativeOn:{change:function($event){return _vm.onFieldInputChange()}},model:{value:_vm.field.field.relatedListDisplayName,callback:function($$v){_vm.$set(_vm.field.field,"relatedListDisplayName",$$v)},expression:"field.field.relatedListDisplayName"}}),_vm.labelErrMsg?_c("span",{staticClass:"mL0 error-text"},[_vm._v(_vm._s(_vm.labelErrMsg))]):_vm._e()],1)],1):_vm._e(),_c("el-row",[_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_c("el-checkbox",{model:{value:(_vm.field.config||{}).canShowLookupWizard,callback:function($$v){_vm.$set(_vm.field.config||{},"canShowLookupWizard",$$v)},expression:"(field.config || {}).canShowLookupWizard"}},[_vm._v(_vm._s(_vm.$t("fields.properties.show_lookup_wizard")))])],1),_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_c("el-checkbox",{model:{value:(_vm.field.config||{}).canShowQuickCreate,callback:function($$v){_vm.$set(_vm.field.config||{},"canShowQuickCreate",$$v)},expression:"(field.config || {}).canShowQuickCreate"}},[_vm._v(_vm._s(_vm.$t("fields.properties.show_quick_create")))])],1),_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm.field.showFloorPlanConfig?_c("el-checkbox",{model:{value:(_vm.field.config||{}).canShowFloorPlanPicker,callback:function($$v){_vm.$set(_vm.field.config||{},"canShowFloorPlanPicker",$$v)},expression:"(field.config || {}).canShowFloorPlanPicker"}},[_vm._v(_vm._s(_vm.$t("fields.properties.show_floorpicker")))]):_vm._e()],1)],1)]:_vm._e(),_vm.isDisplayTypeFieldsHash(_vm.field)?_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v("Display Type")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select"},on:{change:function($event){return _vm.onFieldTypeChange.apply(void 0,arguments)}},model:{value:_vm.field.displayType,callback:function($$v){_vm.$set(_vm.field,"displayType",$$v)},expression:"field.displayType"}},_vm._l(_vm.$constants.FIELD_TYPE_OPTIONS,(function(option){return _c("el-option",{key:option.value,attrs:{label:option.label,value:option.value}})})),1)],1)],1):_vm._e(),_vm.isUpdateForm||_vm.$validation.isEmpty(_vm.placeHolderMap)?_vm._e():_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("el-checkbox",{on:{change:_vm.handlePlaceHolder},model:{value:_vm.enablePlaceHolder,callback:function($$v){_vm.enablePlaceHolder=$$v},expression:"enablePlaceHolder"}},[_vm._v(_vm._s(_vm.placeHolderMap.label))])],1)],1),_vm.enablePlaceHolder?_vm._e():_c("el-row",{staticClass:"mB10"},["SELECTBOX"===_vm.field.displayTypeEnum?_c("el-col",{attrs:{span:24}},[_vm.hideDefaultValue?_vm._e():_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v(" "+_vm._s(_vm.defaultValueLabel)+" ")]),_vm.isMultiple?_c("el-checkbox-group",{model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}},_vm._l(_vm.field.options,(function(option,index){return _c("div",{key:index},[option.visible?_c("div",{staticClass:"field-option mB15",class:_vm.isOptionInvalid(index)?"error":""},[_c("div",{staticClass:"d-flex"},[_c("el-checkbox",{staticClass:"fc-radio-btn mR0",attrs:{label:option.value,disabled:_vm.isUpdateForm}},[_c("el-input",{ref:"input"+index,refInFor:!0,staticClass:"fc-input-full-border2 width-auto",attrs:{maxlength:100},on:{input:function($event){return _vm.onInputChange()},blur:function($event){return _vm.onInputBlur(index,option)}},nativeOn:{change:function($event){return _vm.onOptionsInputChange(index,option)}},model:{value:option.label,callback:function($$v){_vm.$set(option,"label",$$v)},expression:"option.label"}})],1),_vm.canShowAddIcon?_c("img",{staticClass:"mT10 mL5 add-icon",attrs:{src:__webpack_require__(353654)},on:{mousedown:function($event){return _vm.addOption(index)}}}):_vm._e(),_vm.canShowRemoveIcon(index)?_c("img",{staticClass:"mT10 mL5 remove-icon",attrs:{src:__webpack_require__(385769)},on:{mousedown:function($event){return _vm.removeOption(option,index)}}}):_vm._e()],1),_vm.isOptionInvalid(index)?_c("div",{staticClass:"error-text"},[_vm._v(" "+_vm._s(_vm.optionsErrObj.msg)+" ")]):_vm._e()]):_vm._e()])})),0):_c("el-radio-group",{model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}},_vm._l(_vm.field.options,(function(option,index){return _c("div",{key:index},[option.visible?_c("div",{staticClass:"field-option mB15",class:_vm.isOptionInvalid(index)?"error":""},[_c("div",{staticClass:"d-flex"},[_c("el-radio",{staticClass:"fc-radio-btn mR0",attrs:{label:option.value,disabled:_vm.isUpdateForm}},[_c("el-input",{ref:"input"+index,refInFor:!0,staticClass:"fc-input-full-border2 width-auto",attrs:{maxlength:100},on:{input:function($event){return _vm.onInputChange()},blur:function($event){return _vm.onInputBlur(index,option)}},nativeOn:{change:function($event){return _vm.onOptionsInputChange(index,option)}},model:{value:option.label,callback:function($$v){_vm.$set(option,"label",$$v)},expression:"option.label"}})],1),_vm.canShowAddIcon?_c("img",{staticClass:"mT10 mL5 add-icon",attrs:{src:__webpack_require__(353654)},on:{mousedown:function($event){return _vm.addOption(index)}}}):_vm._e(),_vm.canShowRemoveIcon(index)?_c("img",{staticClass:"mT10 mL5 remove-icon",attrs:{src:__webpack_require__(385769)},on:{mousedown:function($event){return _vm.removeOption(option,index)}}}):_vm._e()],1),_vm.isOptionInvalid(index)?_c("div",{staticClass:"error-text"},[_vm._v(" "+_vm._s(_vm.optionsErrObj.msg)+" ")]):_vm._e()]):_vm._e()])})),0)],1):"RADIO"===_vm.field.displayTypeEnum?_c("el-radio-group",{model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}},[_c("el-radio",{staticClass:"fc-radio-btn display-block mB15",attrs:{label:!0,disabled:_vm.isUpdateForm}},[_c("el-input",{staticClass:"fc-input-full-border2 width-auto",on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFieldInputChange()}},model:{value:_vm.field.field.trueVal,callback:function($$v){_vm.$set(_vm.field.field,"trueVal",$$v)},expression:"field.field.trueVal"}}),_c("span",{staticClass:"mL5 text-lowercase"},[_vm._v("(+ve)")])],1),_c("el-radio",{staticClass:"fc-radio-btn display-block mB15 mL0",attrs:{label:!1,disabled:_vm.isUpdateForm}},[_c("el-input",{staticClass:"fc-input-full-border2 width-auto",on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFieldInputChange()}},model:{value:_vm.field.field.falseVal,callback:function($$v){_vm.$set(_vm.field.field,"falseVal",$$v)},expression:"field.field.falseVal"}}),_c("span",{staticClass:"mL5 text-lowercase"},[_vm._v("(-ve)")])],1)],1):_vm.isUpdateForm?_vm._e():_c("el-col",{attrs:{span:24}},[_vm.hideDefaultValue?_vm._e():_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v(" "+_vm._s(_vm.defaultValueLabel)+" ")]),_vm.canShowConfigureBtn(_vm.field)?[_c("el-button",{class:_vm.$validation.isEmpty(_vm.field.value)?"small-border-btn":"configured-button",on:{click:function($event){_vm.$validation.isEmpty(_vm.field.value)&&_vm.canShowDefaultValueDialog()}}},[_vm.$validation.isEmpty(_vm.field.value)?_vm._e():_c("span",{staticClass:"el-icon-check mR5 fwBold"}),_vm._v(" "+_vm._s(_vm.$validation.isEmpty(_vm.field.value)?"Configure":"Default Value Configured")+" ")]),_vm.$validation.isEmpty(_vm.field.value)?_vm._e():_c("span",{staticClass:"mL15"},[_c("span",{staticClass:"pointer",on:{click:function($event){return _vm.canShowDefaultValueDialog()}}},[_c("i",{staticClass:"el-icon-edit mR5"}),_vm._v(" "+_vm._s(_vm.$t("common._common.edit"))+" ")]),_c("span",{staticClass:"mL15 reset-txt pointer",on:{click:function($event){return _vm.resetDefaultValue()}}},[_c("i",{staticClass:"el-icon-refresh-right mR5"}),_vm._v(_vm._s(_vm.$t("common._common.reset")))])])]:["TEXTAREA"===_vm.field.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"Type your  "+_vm.field.displayName},on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFieldInputChange()}},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):_vm.isSiteField(_vm.field)?_c("FSiteField",{attrs:{model:_vm.field.value,filter:_vm.filterObj,isBuilder:!0,isClearable:!0},on:{"update:model":function($event){return _vm.$set(_vm.field,"value",$event)},"update:filter":function($event){_vm.filterObj=$event}}}):_vm.isDropdownTypeFields(_vm.field)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:!_vm.field.required,placeholder:"Select"},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}},_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):"TASKS"===_vm.field.displayTypeEnum?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select"},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}},_vm._l(_vm.jobPlansList,(function(jobPlan){return _c("el-option",{key:jobPlan.id,attrs:{label:jobPlan.name,value:jobPlan.id}})})),1):"DECISION_BOX"===_vm.field.displayTypeEnum?_c("el-checkbox",{model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}},[_vm._v(_vm._s(_vm.field.displayName))]):_vm.isResourceTypeFields(_vm.field)&&(_vm.field.config||{}).isFiltersEnabled?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select",disabled:(_vm.field.config||{}).isFiltersEnabled},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}},_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):_vm.$fieldUtils.isChooserTypeField(_vm.field)&&"SPACECHOOSER"!==_vm.field.displayTypeEnum&&!_vm.hideDefaultValue?_c("FLookupField",{key:""+_vm.field.id,attrs:{model:(_vm.field.value||{}).id,field:_vm.field,disabled:_vm.field.isDisabled,hideDropDown:_vm.$fieldUtils.isChooserTypeField(_vm.field)&&!(_vm.field.config||{}).isFiltersEnabled&&"SPACECHOOSER"!==_vm.field.displayTypeEnum,siteId:_vm.siteId},on:{"update:model":function($event){_vm.$set(_vm.field.value||{},"id",$event)},showLookupWizard:_vm.showLookupWizard,recordSelected:_vm.onRecordSelected}}):"TEAMSTAFFASSIGNMENT"===_vm.field.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2"},[_c("div",{staticClass:"fc-border-input-div el-form-item__content"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.field.value)))]),_c("span",{staticStyle:{float:"right"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_c("FAssignment",{attrs:{model:_vm.field.value,siteId:_vm.siteId,viewtype:"form"}})],1):"DATE"===_vm.field.displayTypeEnum?_c("FDatePicker",{key:_vm.field.name,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"date"},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):"DATETIME"===_vm.field.displayTypeEnum?_c("FDatePicker",{key:_vm.field.name,staticClass:"fc-input-full-border2 form-date-picker",attrs:{type:"datetime"},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):"NUMBER"===_vm.field.displayTypeEnum||"DECIMAL"===_vm.field.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number",placeholder:"Enter a default value"},on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFieldInputChange()}},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):"DURATION"===_vm.field.displayTypeEnum?_c("div",[_c("f-duration-field",{key:"prop-"+_vm.field.id,attrs:{field:_vm.field}})],1):"TIME"===_vm.field.displayTypeEnum?_c("FTimePicker",{key:""+_vm.field.name,staticClass:"el-select fc-input-full-border-select2 width100",attrs:{field:_vm.field,placeholder:_vm.$t("fields.properties.time_picker_placeholder")},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):_vm.isLookupTypeField?_c("FLookupField",{key:"lookup-"+_vm.field.id,attrs:{model:_vm.field.value,field:_vm.field,disabled:_vm.field.isDisabled,siteId:_vm.siteId},on:{"update:model":function($event){return _vm.$set(_vm.field,"value",$event)},showLookupWizard:_vm.showLookupWizard,recordSelected:_vm.onRecordSelected}}):"CURRENCY"===_vm.field.displayTypeEnum?_c("FCurrencyField",{key:""+_vm.field.name,attrs:{disabled:!1,field:_vm.field},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):"MULTI_CURRENCY"===_vm.field.displayTypeEnum?_c("FNewCurrencyField",{key:"multicurrency-"+_vm.field.currencyCode,attrs:{disabled:!1,field:_vm.field,hideCurrency:!0,hideDesc:!0},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):"GEO_LOCATION"===_vm.field.displayTypeEnum?_c("FLocationField",{key:"location-"+_vm.field.name,attrs:{field:_vm.field,disabled:!1,clearable:!0},on:{locationUpdated:_vm.locationUpdated},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}}):_vm.hideDefaultValue?_vm._e():_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Enter a default value"},on:{input:function($event){return _vm.onInputChange()}},nativeOn:{change:function($event){return _vm.onFieldInputChange()}},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}})]],2)],1),"URL_FIELD"===_vm.field.displayTypeEnum?[_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.target"))+" ")]),_c("el-radio-group",{model:{value:(_vm.field.field||{}).target,callback:function($$v){_vm.$set(_vm.field.field||{},"target",$$v)},expression:"(field.field || {}).target"}},_vm._l(_vm.urlTargetOptions,(function(option,index){return _c("el-radio",{key:index,staticClass:"fc-radio-btn display-block mB10",attrs:{label:option.value}},[_vm._v(" "+_vm._s(option.label)+" ")])})),1)],1)],1)]:_vm._e(),_vm.isNotesField?_c("el-row",{staticClass:"mB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v(" "+_vm._s(_vm.$t("asset.assets.notes"))+" ")]),_c("el-input",{staticClass:"fc-input-txt fc-desc-input fc-input-full-border-select2 mT10 mB0",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none"},nativeOn:{click:function($event){return _vm.openRichTextArea()}},model:{value:_vm.field.value,callback:function($$v){_vm.$set(_vm.field,"value",$$v)},expression:"field.value"}})],1)],1):_vm._e(),_vm.handleNumberFieldMetric||"DECIMAL"===_vm.field.displayTypeEnum?_c("el-row",{staticClass:"mB20"},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v("Metric")]),_c("el-col",{attrs:{span:24}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select",loading:_vm.isMetricLoading},on:{change:_vm.resetUnitField},model:{value:_vm.field.metric,callback:function($$v){_vm.$set(_vm.field,"metric",$$v)},expression:"field.metric"}},_vm._l(_vm.metricsList,(function(option){return _c("el-option",{key:option.value,attrs:{label:option.label,value:option.value}})})),1)],1)],1):_vm._e(),_vm.handleNumberFieldMetric||"DECIMAL"===_vm.field.displayTypeEnum?_c("el-row",{staticClass:"mB20"},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v("Unit")]),_c("el-col",{attrs:{span:24}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select"},model:{value:_vm.field.unitId,callback:function($$v){_vm.$set(_vm.field,"unitId",$$v)},expression:"field.unitId"}},_vm._l(_vm.unitOptions,(function(option){return _c("el-option",{key:option.value,attrs:{label:option.label,value:option.value}})})),1)],1)],1):_vm._e(),_vm.isNotesField?_vm._e():_c("el-row",{staticClass:"mT20 mB10"},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.choices"))+" ")]),_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_vm.showAddOptionsCheckbox(_vm.field.displayTypeEnum)?_c("el-checkbox",{model:{value:_vm.field.allowCreate,callback:function($$v){_vm.$set(_vm.field,"allowCreate",$$v)},expression:"field.allowCreate"}},[_vm._v(_vm._s(_vm.$t("fields.properties.allow_other_choices")))]):_vm._e()],1),_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_c("el-checkbox",{attrs:{disabled:!_vm.canShowHideField},on:{change:_vm.onHideChange},model:{value:_vm.field.hideField,callback:function($$v){_vm.$set(_vm.field,"hideField",$$v)},expression:"field.hideField"}},[_vm._v(_vm._s(_vm.$t("fields.properties.hideFieldTxt")))])],1),_c("el-col",{staticClass:"mB10",attrs:{span:24}},[_c("el-checkbox",{attrs:{disabled:!_vm.canShowHideField},model:{value:_vm.field.isDisabled,callback:function($$v){_vm.$set(_vm.field,"isDisabled",$$v)},expression:"field.isDisabled"}},[_vm._v(_vm._s(_vm.$t("fields.properties.disabledFieldTxt")))])],1),_c("el-col",{attrs:{span:24}},["SIGNATURE"===_vm.field.displayTypeEnum?_c("el-checkbox",{model:{value:(_vm.field.config||{}).canShowColorPalette,callback:function($$v){_vm.$set(_vm.field.config||{},"canShowColorPalette",$$v)},expression:"(field.config || {}).canShowColorPalette"}},[_vm._v(_vm._s(_vm.$t("fields.properties.enable_colorpalette")))]):_vm._e()],1),_c("el-col",{attrs:{span:24}},[_vm.canShowSkipSiteFilter(_vm.field)?_c("el-checkbox",{on:{change:_vm.setSkipSiteFilter},model:{value:(_vm.field.config||{}).skipSiteFilter,callback:function($$v){_vm.$set(_vm.field.config||{},"skipSiteFilter",$$v)},expression:"(field.config || {}).skipSiteFilter"}},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.skip_site_filter"))+" ")]):_vm._e()],1),_c("el-col",{attrs:{span:24}},["URL_FIELD"===_vm.field.displayTypeEnum?_c("el-checkbox",{on:{change:_vm.setShowName},model:{value:(_vm.field.config||{}).showName,callback:function($$v){_vm.$set(_vm.field.config||{},"showName",$$v)},expression:"(field.config || {}).showName"}},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.show_link_name"))+" ")]):_vm._e()],1),_c("el-col",{attrs:{span:24}},[["LINEITEMS","QUOTE_LINE_ITEMS"].includes(_vm.field.displayTypeEnum)?_c("el-checkbox",{on:{change:_vm.setHideTaxField},model:{value:(_vm.field.config||{}).hideTaxField,callback:function($$v){_vm.$set(_vm.field.config||{},"hideTaxField",$$v)},expression:"(field.config || {}).hideTaxField"}},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.hide_tax_field"))+" ")]):_vm._e()],1)],1),_vm.canShowLookupFilterOption(_vm.field)?_c("el-row",{staticClass:"mT10 mB20"},[_c("el-checkbox",{on:{change:_vm.onCheckFilters},model:{value:(_vm.field.config||{}).isFiltersEnabled,callback:function($$v){_vm.$set(_vm.field.config||{},"isFiltersEnabled",$$v)},expression:"(field.config || {}).isFiltersEnabled"}},[_vm._v(_vm._s(_vm.$t("fields.properties.enable_filters")))]),(_vm.field.config||{}).isFiltersEnabled?_c("div",{staticClass:"mT20"},[2===_vm.lookupFilterOptionArr.length?_c("el-radio-group",{model:{value:(_vm.field.config||{}).filterValue,callback:function($$v){_vm.$set(_vm.field.config||{},"filterValue",$$v)},expression:"(field.config || {}).filterValue"}},_vm._l(_vm.lookupFilterOptionArr,(function(option,index){return _c("el-radio",{key:index,staticClass:"fc-radio-btn display-block mB10",attrs:{label:option.value}},[_vm._v(" "+_vm._s(option.label)+" ")])})),1):_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",placeholder:"Select"},on:{change:_vm.onFilterCheckChange},model:{value:(_vm.field.config||{}).filterValue,callback:function($$v){_vm.$set(_vm.field.config||{},"filterValue",$$v)},expression:"(field.config || {}).filterValue"}},_vm._l(_vm.lookupFilterOptionArr,(function(option){return _c("el-option",{key:option.value,attrs:{label:option.label,value:option.value}})})),1)],1):_vm._e()],1):_vm._e(),_vm.canShowCriteriaBuilderForLookup?_c("el-row",{staticClass:"mT10 mB20"},[_c("div",{staticClass:"fc-dark-grey-txt13 mB10"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.set_filter"))+" ")]),_c("el-button",{class:_vm.$validation.isEmpty(_vm.formRulesMap)||_vm.$validation.isEmpty(_vm.formRulesMap[_vm.field.id])?"small-border-btn":"configured-button",on:{click:function($event){(_vm.$validation.isEmpty(_vm.formRulesMap)||_vm.$validation.isEmpty(_vm.formRulesMap[_vm.field.id]))&&_vm.showCriteriaForField(_vm.field)}}},[_vm.$validation.isEmpty(_vm.formRulesMap)||_vm.$validation.isEmpty(_vm.formRulesMap[_vm.field.id])?_vm._e():_c("span",{staticClass:"el-icon-check mR5 fwBold"}),_vm._v(" "+_vm._s(_vm.$validation.isEmpty(_vm.formRulesMap)||_vm.$validation.isEmpty(_vm.formRulesMap[_vm.field.id])?"Configure":"Criteria Configured")+" ")]),_vm.$validation.isEmpty(_vm.formRulesMap)||_vm.$validation.isEmpty(_vm.formRulesMap[_vm.field.id])?_vm._e():_c("span",{staticClass:"mL15"},[_c("span",{staticClass:"pointer",on:{click:function($event){return _vm.showCriteriaForField(_vm.field)}}},[_c("i",{staticClass:"el-icon-edit mR5"}),_vm._v("Edit ")]),_c("span",{staticClass:"mL15 reset-txt pointer",on:{click:function($event){return _vm.resetRule()}}},[_c("i",{staticClass:"el-icon-refresh-right mR5"}),_vm._v("Reset")])]),_vm.openCriteriaForRule?_c("FormFieldsCriteriaBuilder",{attrs:{formId:_vm.formId,subFormId:_vm.subFormId,moduleName:_vm.moduleName,isSubForm:_vm.isSubFormField,visibility:_vm.openCriteriaForRule,lookupFieldsList:_vm.fieldsList,existingRule:_vm.$validation.isEmpty(_vm.formRulesMap)||_vm.$validation.isEmpty(_vm.formRulesMap[_vm.field.id])?null:_vm.formRulesMap[_vm.field.id],fieldObject:_vm.field},on:{"update:visibility":function($event){_vm.openCriteriaForRule=$event},"update:lookupFieldsList":function($event){_vm.fieldsList=$event},"update:lookup-fields-list":function($event){_vm.fieldsList=$event},"update:fieldObject":function($event){_vm.field=$event},"update:field-object":function($event){_vm.field=$event},saved:_vm.afterSave}}):_vm._e()],1):_vm._e(),_vm.canShowLookupWizard?_c("div",[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.selectedLookupField,siteId:_vm.siteId},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})],1):_vm._e(),_vm.canShowRichText?_c("div",[_c("FormNotes",{attrs:{canShowRichText:_vm.canShowRichText,field:_vm.field},on:{"update:canShowRichText":function($event){_vm.canShowRichText=$event},"update:can-show-rich-text":function($event){_vm.canShowRichText=$event}}})],1):_vm._e(),_vm.showDefaultValueDialog?_c("DefaultValueSelector",{attrs:{showDefaultValueDialog:_vm.showDefaultValueDialog,selectedField:_vm.field},on:{saveDefaultValue:_vm.saveDefaultValue,closeDefaultVaueDialog:_vm.closeDefaultVaueDialog}}):_vm._e()],2)},FieldPropertiesvue_type_template_id_0374b13f_scoped_true_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),FormAlignmentSectionvue_type_template_id_400fb7ce_scoped_true_render=(__webpack_require__(689730),__webpack_require__(425728),__webpack_require__(843843),__webpack_require__(891719),__webpack_require__(336585),__webpack_require__(648324),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",{staticClass:"mB20"},[_c("div",{staticClass:"fc-dark-grey-txt14 pB10"},[_vm._v("Form Alignment")]),_c("el-button-group",[_c("el-button",{staticClass:"align-btn",class:["left"===_vm.position?"active":""],attrs:{disabled:_vm.isSaving},on:{click:function($event){_vm.position="left"}}},[_vm._v("Left")]),_c("el-button",{staticClass:"align-btn",class:["top"===_vm.position?"active":""],attrs:{disabled:_vm.isSaving},on:{click:function($event){_vm.position="top"}}},[_vm._v("Top")]),_c("el-button",{staticClass:"align-btn",class:["right"===_vm.position?"active":""],attrs:{disabled:_vm.isSaving},on:{click:function($event){_vm.position="right"}}},[_vm._v("Right")])],1)],1)}),FormAlignmentSectionvue_type_template_id_400fb7ce_scoped_true_staticRenderFns=[],FormAlignmentSectionvue_type_script_lang_js={props:{labelPosition:{type:String,required:!0},isSaving:{type:Boolean}},computed:{position:{get:function(){return this.labelPosition},set:function(value){this.$emit("updatePosition",value)}}}},form_builder_FormAlignmentSectionvue_type_script_lang_js=FormAlignmentSectionvue_type_script_lang_js,FormAlignmentSection_component=(0,componentNormalizer/* default */.Z)(form_builder_FormAlignmentSectionvue_type_script_lang_js,FormAlignmentSectionvue_type_template_id_400fb7ce_scoped_true_render,FormAlignmentSectionvue_type_template_id_400fb7ce_scoped_true_staticRenderFns,!1,null,"400fb7ce",null)
/* harmony default export */,FormAlignmentSection=FormAlignmentSection_component.exports,FormFieldsCriteriaBuildervue_type_template_id_c6ef08b2_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.dialogVisibility?_c("f-dialog",{attrs:{"append-to-body":!0,visible:_vm.dialogVisibility,width:"58%",maxHeight:"300px",title:"Set Criteria",stayOnSave:!0},on:{"update:visible":function($event){_vm.dialogVisibility=$event},save:_vm.saveRule,close:function($event){_vm.dialogVisibility=!1}}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},[_vm.dialogVisibility?_c("CriteriaBuilder",{attrs:{moduleName:_vm.lookupModuleName,customValues:_vm.customValues,showValueType:!0},model:{value:_vm.criteria,callback:function($$v){_vm.criteria=$$v},expression:"criteria"}}):_vm._e()],1)]):_vm._e()},FormFieldsCriteriaBuildervue_type_template_id_c6ef08b2_staticRenderFns=[],FDialogNew=(__webpack_require__(564043),__webpack_require__(322462),__webpack_require__(857267),__webpack_require__(436756)),constant=__webpack_require__(354754),dist=__webpack_require__(191853),FormFieldsCriteriaBuildervue_type_script_lang_js={components:{FDialog:FDialogNew/* default */.Z,CriteriaBuilder:dist/* CriteriaBuilder */.IP},data:function(){return{criteria:null,customValues:[{allowCreate:!0,options:[],label:"".concat(this.$t("forms.builder.field")),value:"fields",matcher:function(value){var regexArray=String(value).match(/\$\{(.*?)\}/);return!(0,validation/* isEmpty */.xb)(regexArray)}}]}},props:["formId","moduleName","visibility","lookupFieldsList","fieldObject","existingRule","isSubForm","subFormId","options"],created:function(){var _this=this;this.constructCriteriaFromExistingRule(),this.customValues[0].options=(this.lookupFieldsList||[]).map((function(option){var _ref=option||{},displayName=_ref.displayName,name=_ref.name,field=_ref.field;if(displayName){var value="${".concat(_this.moduleName,".").concat(name,"}");return"LOOKUP"===(null===field||void 0===field?void 0:field.dataTypeEnum)&&(value="${".concat(_this.moduleName,".").concat(name,".id}")),{label:displayName,value:value}}return null})).filter((function(data){return!(0,validation/* isEmpty */.xb)(data)}))},computed:{dialogVisibility:{get:function(){return this.visibility},set:function(val){this.$emit("update:visibility",val)}},lookupModuleName:function(){var _ref2=this.fieldObject||{},lookupModuleName=_ref2.lookupModuleName;return lookupModuleName}},methods:{constructCriteriaFromExistingRule:function(){var existingRule=this.existingRule;if(!(0,validation/* isEmpty */.xb)(existingRule)){var _ref3=existingRule||{},actions=_ref3.actions,formRuleActionField=actions[0].formRuleActionFieldsContext[0];(0,validation/* isEmpty */.xb)(formRuleActionField)||(this.criteria=formRuleActionField.criteria)}},getLookupModuleName:function(){var fieldObject=this.fieldObject,fieldObj=fieldObject.field;if(!(0,validation/* isEmpty */.xb)(fieldObj)){var lookupModule=fieldObj.lookupModule,_ref4=fieldObject||{},config=_ref4.config,_ref5=config||{},filterValue=_ref5.filterValue,isFiltersEnabled=_ref5.isFiltersEnabled,configLookupModuleName=_ref5.lookupModuleName;if(isFiltersEnabled){var moduleName=configLookupModuleName||constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue];return moduleName}if(!(0,validation/* isEmpty */.xb)(lookupModule))return lookupModule.name}return""},updateCriteria:function(value){this.$set(this,"criteria",value)},saveRule:function(){var _this2=this,criteria=this.criteria,moduleName=this.moduleName,isSubForm=this.isSubForm,subFormId=this.subFormId,triggerFields=[];if(!(0,validation/* isEmpty */.xb)(criteria)){var _loop=function(){var _criteria$conditions$,ruleForField,criteriaForField;if(!(0,validation/* isEmpty */.xb)(null===criteria||void 0===criteria||null===(_criteria$conditions$=criteria.conditions[key])||void 0===_criteria$conditions$?void 0:_criteria$conditions$.value)&&criteria.conditions[key].value.includes("${"+moduleName+".")&&(ruleForField=criteria.conditions[key].value,ruleForField=ruleForField.replace("${"+moduleName+".",""),ruleForField=ruleForField.replace("data.",""),ruleForField=ruleForField.replace("}",""),ruleForField=ruleForField.replace(".id","")),(0,validation/* isEmpty */.xb)(ruleForField)||(criteriaForField=_this2.lookupFieldsList.find((function(field){return field.name===ruleForField}))),!(0,validation/* isEmpty */.xb)(criteriaForField)){var triggerFieldObj={fieldId:criteriaForField.id?criteriaForField.id:""};(0,validation/* isEmpty */.xb)(_this2.existingRule)||(triggerFieldObj.ruleId=_this2.existingRule.id),triggerFields.push(triggerFieldObj)}};for(var key in criteria.conditions)_loop();var formId=this.formId,formRuleContext={name:"Set Filter Rule",formId:parseInt(formId),type:2,triggerType:2,ruleType:1,actions:[{actionType:6,formRuleActionFieldsContext:[{criteria:criteria,formFieldId:this.fieldObject.id}]}]};(0,validation/* isEmpty */.xb)(triggerFields)?formRuleContext.triggerType=1:formRuleContext.triggerFields=triggerFields,isSubForm&&(formRuleContext=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},formRuleContext),{},{subFormId:subFormId,triggerType:4}));var url=(0,validation/* isEmpty */.xb)(this.existingRule)?"v2/form/rule/add":"v2/form/rule/update";(0,validation/* isEmpty */.xb)(this.existingRule)||(formRuleContext.id=this.existingRule.id,formRuleContext.actions[0].formRuleId=this.existingRule.id,formRuleContext.actions[0].id=this.existingRule.actions[0].id),this.$http.post(url,{formRuleContext:formRuleContext}).then((function(_ref6){var data=_ref6.data;0===data.responseCode&&(_this2.$message.success("Form Rule saved"),_this2.$emit("update:visibility",!1),_this2.dialogVisibility=!1,_this2.$emit("saved"))})).catch((function(){_this2.$message.error("Could not save form rule")}))}}}},form_builder_FormFieldsCriteriaBuildervue_type_script_lang_js=FormFieldsCriteriaBuildervue_type_script_lang_js,FormFieldsCriteriaBuilder_component=(0,componentNormalizer/* default */.Z)(form_builder_FormFieldsCriteriaBuildervue_type_script_lang_js,FormFieldsCriteriaBuildervue_type_template_id_c6ef08b2_render,FormFieldsCriteriaBuildervue_type_template_id_c6ef08b2_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormFieldsCriteriaBuilder=FormFieldsCriteriaBuilder_component.exports,DefaultValueSelectorvue_type_template_id_4fd5492f_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container taskdialog",attrs:{title:_vm.$t("common._common.default_value"),visible:_vm.showDefaultValueDialog,width:"50%","before-close":_vm.closeDialogBox,"append-to-body":!0,persistent:!0},on:{"update:visible":function($event){_vm.showDefaultValueDialog=$event}}},[_c("div",{staticClass:"default-value-dialog"},[_vm.isLoading?_c("div",{staticClass:"mT20"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"40"}})],1):_c("div",[_vm.isFileField?[_c("div",{staticClass:"mT30 width90"},[_c("div",{staticClass:"attachment-label mB20"},[_vm._v(" "+_vm._s(_vm.$t("common._common.file_default_value"))+" ")]),_c("FFileUpload",{attrs:{field:_vm.fieldObj,isFileType:_vm.isFileField,isDisabled:!1,imgContentUrl:_vm.fieldObj.imgUrl,fileObj:_vm.fieldObj.fileObj,showWebCamPhoto:!0,isV3Api:!0,preview:!0,isSaveBtnDisabled:_vm.isSaveBtnDisabled,addImgFile:function(fileOrId,fieldObj){return _vm.addImgFile({fileOrId:fileOrId,fieldObj:fieldObj})}},on:{"update:field":function($event){_vm.fieldObj=$event},"update:imgContentUrl":function($event){return _vm.$set(_vm.fieldObj,"imgUrl",$event)},"update:img-content-url":function($event){return _vm.$set(_vm.fieldObj,"imgUrl",$event)},"update:fileObj":function($event){return _vm.$set(_vm.fieldObj,"fileObj",$event)},"update:file-obj":function($event){return _vm.$set(_vm.fieldObj,"fileObj",$event)},removeImgFile:function(fieldObj){return _vm.removeImgFile({fieldObj:fieldObj})}}})],1)]:_vm._e(),_vm.isAttachmentField?[_c("div",{staticClass:"attachment-label mB20"},[_vm._v(" "+_vm._s(_vm.$t("common._common.attachment_default_value"))+" ")]),_c("el-form",{staticClass:"width90 mL30",attrs:{model:_vm.mockFormModel,"label-position":"top"}},[_c("FormAttachments",{attrs:{formModel:_vm.mockFormModel,attachments:_vm.attachments,field:_vm.fieldObj,labelPosition:"top",isV3Api:!0,clearError:function(){},preview:!0,disableSaveBtn:function(value){return _vm.isSaveBtnDisabled=value}},on:{updateAttachment:_vm.updateAttachment,updateFormModel:_vm.updateFormModel}})],1)]:_vm._e(),_vm.showRichTextArea?[_c("div",{staticClass:"attachment-label mB20"},[_vm._v(" "+_vm._s(_vm.$t("common._common.richtext_default_value"))+" ")]),_c("RichTextArea",{attrs:{field:_vm.fieldObj},model:{value:_vm.richTextValue,callback:function($$v){_vm.richTextValue=$$v},expression:"richTextValue"}})]:_vm._e()],2),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving},on:{click:_vm.saveDefaultValue}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.save")))])],1)])])},DefaultValueSelectorvue_type_template_id_4fd5492f_staticRenderFns=[],Spinner=__webpack_require__(604947),FFileUpload=__webpack_require__(794948),FFormAttachments=__webpack_require__(80757),baseUrl=__webpack_require__(420499),api=__webpack_require__(32284),RichTextArea=__webpack_require__(874249),DefaultValueSelectorvue_type_script_lang_js={name:"DefaultValueSelector",props:["showDefaultValueDialog","selectedField"],components:{FFileUpload:FFileUpload/* default */.Z,FormAttachments:FFormAttachments/* default */.Z,RichTextArea:RichTextArea/* default */.Z,Spinner:Spinner/* default */.Z},data:function(){return{fieldObj:{},isSaveBtnDisabled:!1,attachments:[],mockFormModel:{},richTextValue:"",fileDefaults:[],isLoading:!1,isSaving:!1,allowRichContentSave:!0}},created:function(){this.initDefaultValueSetup()},computed:{defaultValueEmpty:function(){var selectedField=this.selectedField,_ref=selectedField||{},value=_ref.value;return(0,validation/* isEmpty */.xb)(value)},showRichTextArea:function(){var selectedField=this.selectedField,_ref2=selectedField||{},configJSON=_ref2.configJSON,displayTypeEnum=_ref2.displayTypeEnum,_ref3=configJSON||{},richText=_ref3.richText;return richText&&"TEXTAREA"===displayTypeEnum||"RICH_TEXT"===displayTypeEnum},isFileField:function(){var fieldObj=this.fieldObj,_ref4=fieldObj||{},displayTypeEnum=_ref4.displayTypeEnum;return"FILE"===displayTypeEnum},isAttachmentField:function(){var fieldObj=this.fieldObj,_ref5=fieldObj||{},displayTypeEnum=_ref5.displayTypeEnum;return"ATTACHMENT"===displayTypeEnum}},methods:{initDefaultValueSetup:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var selectedField,showRichTextArea,_ref6,displayTypeEnum,lookupModuleName,mockFormModelObj,_ref7,value,_ref8,fileId,richTextContent,richTextUrl,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.isLoading=!0,selectedField=_this.selectedField,showRichTextArea=_this.showRichTextArea,(0,validation/* isEmpty */.xb)(selectedField)){_context.next=26;break}if(_ref6=selectedField||{},displayTypeEnum=_ref6.displayTypeEnum,lookupModuleName=_ref6.lookupModuleName,"ATTACHMENT"!==displayTypeEnum||(0,validation/* isEmpty */.xb)(lookupModuleName)){_context.next=10;break}mockFormModelObj={},mockFormModelObj["".concat(lookupModuleName)]=[],_this.mockFormModel=mockFormModelObj,_context.next=25;break;case 10:if(!showRichTextArea){_context.next=25;break}if(_ref7=selectedField||{},value=_ref7.value,(0,validation/* isEmpty */.xb)(value)){_context.next=25;break}if("string"===typeof value&&(value=JSON.parse(value)),_ref8=value||{},fileId=_ref8.fileId,richTextContent="",(0,validation/* isEmpty */.xb)(fileId)){_context.next=24;break}return richTextUrl="".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(fileId),_context.next=20,api/* API */.bl.get(richTextUrl);case 20:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this.$message.error("Error Occured"):richTextContent=data;case 24:_this.richTextValue=richTextContent;case 25:_this.fieldObj=selectedField;case 26:_this.isLoading=!1;case 27:case"end":return _context.stop()}}),_callee)})))()},updateAttachment:function(attachments){this.$set(this,"attachments",attachments)},updateFormModel:function(formModel){this.$set(this,"mockFormModel",formModel)},constructAttachment:function(){var attachments=this.attachments,mockFormModel=this.mockFormModel,fieldObj=this.fieldObj;if(!(0,validation/* isEmpty */.xb)(mockFormModel)){var _ref9=fieldObj||{},lookupModuleName=_ref9.lookupModuleName,defaultAttachments=[];if(!(0,validation/* isEmpty */.xb)(lookupModuleName)){var _ref10=mockFormModel||{},_ref10$lookupModuleNa=_ref10[lookupModuleName],attachmentIdArr=void 0===_ref10$lookupModuleNa?[]:_ref10$lookupModuleNa;(0,validation/* isEmpty */.xb)(attachmentIdArr)||attachmentIdArr.forEach((function(attachment,index){var currentAttachmentInfo=attachments[index],_ref11=currentAttachmentInfo||{},fileName=_ref11.name,_ref12=attachment||{},fileId=_ref12.fileId,createdTime=_ref12.createdTime;defaultAttachments.push({fileName:fileName,fileId:fileId,createdTime:createdTime})})),(0,validation/* isEmpty */.xb)(defaultAttachments)&&(defaultAttachments=null),this.setDefaultValue(defaultAttachments)}}},addImgFile:function(props){var _ref13=props||{},data=_ref13.fileOrId,fieldObj=this.fieldObj,_ref14=fieldObj||{},fileObj=_ref14.fileObj,defaultValueArr=[],defaultValue={};if(!(0,validation/* isEmpty */.xb)(fileObj)){var _ref15=fileObj||{},name=_ref15.name;defaultValue={fileName:name,fileId:data},defaultValueArr.push(defaultValue)}this.fileDefaults=defaultValueArr},removeImgFile:function(props){var _ref16=props||{},fieldObj=_ref16.fieldObj;(0,validation/* isEmpty */.xb)(fieldObj)||(this.fileDefaults=null)},uploadRichText:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var richTextValue,fileId,file,_yield$API$uploadFile,ids,error,value;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(richTextValue=_this2.richTextValue,fileId=null,(0,validation/* isEmpty */.xb)(richTextValue)){_context2.next=16;break}if(!(richTextValue.length>32e3)){_context2.next=7;break}_this2.allowRichContentSave=!1,_context2.next=16;break;case 7:return file=new File([richTextValue],"richText.txt",{type:"text/plain"}),_context2.next=10,api/* API */.bl.uploadFiles([file]);case 10:_yield$API$uploadFile=_context2.sent,ids=_yield$API$uploadFile.ids,error=_yield$API$uploadFile.error,error?_this2.$message.error(error.message||"Error Occured"):fileId=(0,validation/* isEmpty */.xb)(ids)?null:ids[0],value={fileId:fileId},_this2.setDefaultValue(value);case 16:case"end":return _context2.stop()}}),_callee2)})))()},saveFileDefaults:function(){var fileDefaults=this.fileDefaults;(0,validation/* isEmpty */.xb)(fileDefaults)&&(this.fieldObj.fileObj=null),this.setDefaultValue(fileDefaults)},setDefaultValue:function(value){this.$set(this.fieldObj,"value",value)},saveDefaultValue:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var fieldObj,showRichTextArea,_ref17,displayTypeEnum,allowRichContentSave;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this3.isSaving=!0,fieldObj=_this3.fieldObj,showRichTextArea=_this3.showRichTextArea,_ref17=fieldObj||{},displayTypeEnum=_ref17.displayTypeEnum,!showRichTextArea){_context3.next=8;break}return _context3.next=6,_this3.uploadRichText();case 6:_context3.next=9;break;case 8:"ATTACHMENT"===displayTypeEnum?_this3.constructAttachment():"FILE"===displayTypeEnum&&_this3.saveFileDefaults();case 9:allowRichContentSave=_this3.allowRichContentSave,allowRichContentSave?_this3.$emit("saveDefaultValue",_this3.fieldObj):_this3.$message.error(_this3.$t("common._common.max_length_reached")),_this3.isSaving=!1;case 12:case"end":return _context3.stop()}}),_callee3)})))()},closeDialogBox:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_this4.$emit("closeDefaultVaueDialog");case 1:case"end":return _context4.stop()}}),_callee4)})))()}}},form_builder_DefaultValueSelectorvue_type_script_lang_js=DefaultValueSelectorvue_type_script_lang_js,DefaultValueSelector_component=(0,componentNormalizer/* default */.Z)(form_builder_DefaultValueSelectorvue_type_script_lang_js,DefaultValueSelectorvue_type_template_id_4fd5492f_render,DefaultValueSelectorvue_type_template_id_4fd5492f_staticRenderFns,!1,null,null,null)
/* harmony default export */,DefaultValueSelector=DefaultValueSelector_component.exports,FormNotesvue_type_template_id_cd7264b0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container notes-editor",attrs:{title:_vm.$t("asset.assets.notes"),visible:_vm.canShow,"append-to-body":!0,width:"40%"},on:{"update:visible":function($event){_vm.canShow=$event}}},[_c("RichTextArea",{attrs:{isRichTextMode:_vm.isRichTextMode,field:_vm.field,disabled:_vm.field.isDisabled,rows:8,maxRows:6,hideImgTool:!0,hideOrderedList:!0,hideUnorderedList:!0,canShowModeToggle:!0},on:{"update:isRichTextMode":function($event){_vm.isRichTextMode=$event},"update:is-rich-text-mode":function($event){_vm.isRichTextMode=$event}},model:{value:_vm.notesFieldValue,callback:function($$v){_vm.notesFieldValue=$$v},expression:"notesFieldValue"}}),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveNotes}},[_vm._v("SAVE")])],1)],1)},FormNotesvue_type_template_id_cd7264b0_staticRenderFns=[],isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),FormNotesvue_type_script_lang_js={props:{field:{type:Object,required:!0},canShowRichText:{type:Boolean,required:!0}},components:{RichTextArea:RichTextArea/* default */.Z},computed:{canShow:{get:function(){return this.canShowRichText},set:function(value){this.$emit("update:canShowRichText",value)}}},watch:{"field.value":{handler:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||(this.notesFieldValue=newVal)},immediate:!0}},data:function(){return{notesFieldValue:"",isRichTextMode:!0}},mounted:function(){this.init()},methods:{init:function(){var field=this.field,_ref=field||{},config=_ref.config,_ref2=config||{},_ref2$isRichTextMode=_ref2.isRichTextMode,isRichTextMode=void 0===_ref2$isRichTextMode||_ref2$isRichTextMode;this.isRichTextMode=isRichTextMode},saveNotes:function(){var notesFieldValue=this.notesFieldValue,isRichTextMode=this.isRichTextMode,field=this.field;field.value=notesFieldValue,field.config=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field.config),{},{isRichTextMode:isRichTextMode}),this.closeDialog()},closeDialog:function(){this.$set(this,"canShow",!1)}}},form_builder_FormNotesvue_type_script_lang_js=FormNotesvue_type_script_lang_js,FormNotes_component=(0,componentNormalizer/* default */.Z)(form_builder_FormNotesvue_type_script_lang_js,FormNotesvue_type_template_id_cd7264b0_render,FormNotesvue_type_template_id_cd7264b0_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormNotes=FormNotes_component.exports,FDatePicker=__webpack_require__(358551),FDurationField=__webpack_require__(482175),FSiteField=__webpack_require__(890006),FLookupField=__webpack_require__(855048),FLookupFieldWizard=__webpack_require__(499751),FLocationField=__webpack_require__(321389),TeamStaffMixin=__webpack_require__(462599),FAssignment=__webpack_require__(383274),helpers=__webpack_require__(778390),vuex_esm=__webpack_require__(420629),utils_utility_methods=__webpack_require__(555005),field_utils=__webpack_require__(455344),utils_field=__webpack_require__(815872),FTimePicker=__webpack_require__(172630),max=__webpack_require__(606162),max_default=__webpack_require__.n(max),FCurrencyField=__webpack_require__(643821),FNewCurrencyField=__webpack_require__(533206),dropDownTypeHash=["SELECTBOX","URGENCY"],hideDefaultValueFieldsHash=["IMAGE","SIGNATURE","PERMIT_CHECKLIST","QUOTE_LINE_ITEMS","QUOTE_ADDRESS","ADDRESS","SADDRESS","LINEITEMS","NOTES","BUDGET_AMOUNT","FACILITY_AVAILABILITY","FACILITY_BOOKING_SLOTS"],hideMandatoryFieldsHash=["TASKS","DECISION_BOX","IMAGE","NOTES"],displayTypeFieldsHash=["DECISION_BOX","RADIO"],disabledMandFieldHash=["siteId","subject"],DELAY=500,FieldPropertiesvue_type_script_lang_js={components:{FormAlignmentSection:FormAlignmentSection,FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"],FAssignment:FAssignment/* default */.Z,FDatePicker:FDatePicker/* default */.Z,FDurationField:FDurationField/* default */.Z,FSiteField:FSiteField/* default */.Z,FormFieldsCriteriaBuilder:FormFieldsCriteriaBuilder,FormNotes:FormNotes,FTimePicker:FTimePicker/* default */.Z,DefaultValueSelector:DefaultValueSelector,FCurrencyField:FCurrencyField/* default */.Z,FLocationField:FLocationField/* default */.Z,FNewCurrencyField:FNewCurrencyField/* default */.Z},props:{formId:{type:Number,required:!0},field:{type:Object,required:!0},formRulesMap:{type:Object},section:{type:Object,required:!0},formProperties:{type:Object,required:!0},formObj:{type:Object,required:!0},fieldsList:{type:Array},jobPlansList:{type:Array},allowUpdateFormProp:{type:Boolean,required:!0},allowUpdateProp:{type:Boolean,required:!0},isSaving:{type:Boolean,required:!0},isFieldPropertiesLoading:{type:Boolean,required:!0},hasError:{type:Boolean,required:!0},filter:{type:Object},moduleList:{type:Array},siteId:{type:Number},spaceAssetResourceObj:{type:Object},moduleName:{type:String},currentSiteId:{type:Number},isCustomModule:{type:Boolean},isUpdateForm:{type:Boolean,default:function(){return!1}}},mixins:[TeamStaffMixin/* default */.Z],created:function(){this.$store.dispatch("loadGroups"),this.isSiteField=utils_field/* isSiteField */.Vn},mounted:function(){var _this=this;this.debounceFormUpdate=helpers/* default */.ZP.debounce((function(){var formProperties=_this.formProperties,url="/v2/forms/update",data={form:_this.serializeFormData(formProperties)};_this.updateProperties(url,data)}),DELAY),this.debounceFieldUpdate=helpers/* default */.ZP.debounce((function(){var field=_this.field,_this$field=_this.field,_this$field$options=_this$field.options,options=void 0===_this$field$options?[]:_this$field$options,fieldId=_this$field.fieldId,displayTypeEnum=_this$field.displayTypeEnum,metric=_this$field.metric,unitId=_this$field.unitId,displayName=_this$field.displayName,fieldObj=_this.field.field,filteredOptions=options.filter((function(option){return option.visible})),isAnyOptionEmpty=(filteredOptions||[]).some((function(option){return(0,validation/* isEmpty */.xb)(option.label)})),isNotesField="NOTES"===displayTypeEnum;if(!isAnyOptionEmpty){var url="v2/forms/fields/update",serializedField=_this.serializeField(field),data={formField:serializedField};if(_this.updateProperties(url,data),!(0,validation/* isEmpty */.xb)(fieldObj)&&!isNotesField){var _url="v2/modules/fields/update",_data={fieldJson:{fieldId:fieldId,dataType:fieldObj.dataType}};if(fieldObj.default||(
// Update displayname only for custom fields
_data.fieldJson.displayName=displayName),fieldObj.relatedListDisplayName&&(_data.fieldJson.relatedListDisplayName=fieldObj.relatedListDisplayName),"SELECTBOX"!==displayTypeEnum||(0,validation/* isEmpty */.xb)(options))"NUMBER"===displayTypeEnum||"DECIMAL"===displayTypeEnum?(_data.fieldJson.metric=metric||-99,_data.fieldJson.unitId=unitId||-99):"RADIO"===displayTypeEnum?(_data.fieldJson.trueVal=fieldObj.trueVal,_data.fieldJson.falseVal=fieldObj.falseVal):"URL_FIELD"===displayTypeEnum?_data.fieldJson.target=fieldObj.target:"MULTI_CURRENCY"===displayTypeEnum&&(_data.fieldJson.currencyCode=field.currencyCode);else{var clonedOptions=(0,utility_methods/* cloneArray */.M2)(options);clonedOptions=clonedOptions.map((function(option){var clonedOption=(0,utility_methods/* deepCloneObject */.kh)(option);return clonedOption.index=option.value,clonedOption.value=option.label,delete clonedOption.label,clonedOption.isNew&&delete clonedOption.isNew,clonedOption}));var nonVisibleOptions=(fieldObj.values||[]).filter((function(value){return!value.visible}));clonedOptions=clonedOptions.concat(nonVisibleOptions),_data.fieldJson.values=clonedOptions.map((function(option,index){return option.sequence=index+1,option}))}_this.updateProperties(_url,_data)}}}),DELAY),this.debounceSectionUpdate=helpers/* default */.ZP.debounce((function(){var url="/v2/forms/sections/update",resourceProps=constant/* default */.Z.SECTION_RESOURCE_PROPS,data={formId:_this.formProperties.id,formSection:(0,utils_utility_methods/* serializeProps */._$)(_this.section,resourceProps,!0)};_this.updateProperties(url,data)}),DELAY)},data:function(){return{newOptionIndex:null,openCriteriaForRule:!1,debounceFormUpdate:null,debounceFieldUpdate:null,debounceSectionUpdate:null,optionsErrObj:{index:null,msg:""},labelErrMsg:"",allowUpdateFieldProp:!0,isInputFieldFocused:!1,canShowLookupWizard:!1,canShowQuickCreate:!1,selectedLookupField:null,canShowRichText:!1,enablePlaceHolder:!1,showDefaultValueDialog:!1,urlTargetOptions:[{label:this.$t("fields.properties.same_window"),value:"_self"},{label:this.$t("fields.properties.new_window"),value:"_blank"}]}},watch:{formProperties:{handler:function(){this.allowUpdateFormProp&&!this.isInputFieldFocused&&this.debounceFormUpdate()},deep:!0},field:{
/*
        * Have to skip update during the first render of all field properties.
        * Have to skip update while switching between fields.
         PS: Everytime newval and oldval will be same for the active field property even after changing
          refer: http://vuejs.org/api/#vm-watch
      */
handler:function(newVal,oldVal){if(!(0,validation/* isEmpty */.xb)(newVal)){var displayTypeEnum=newVal.displayTypeEnum,isNumberOrDecimal=["NUMBER","DECIMAL"].includes(displayTypeEnum);isNumberOrDecimal&&this.loadMetricUnits(),this.setPlaceHolders()}this.allowUpdateProp&&this.allowUpdateFieldProp&&!this.isInputFieldFocused&&((0,validation/* isEmpty */.xb)(oldVal)||helpers/* default */.ZP.isObjectEqual(newVal,oldVal)&&this.debounceFieldUpdate())},deep:!0},section:{handler:function(newVal,oldVal){this.allowUpdateProp&&!this.isInputFieldFocused&&((0,validation/* isEmpty */.xb)(oldVal)||helpers/* default */.ZP.isObjectEqual(newVal,oldVal)&&this.debounceSectionUpdate())},deep:!0},canShowHideField:{handler:function(newVal){if(!newVal){var field=this.field,_ref=field||{},hideField=_ref.hideField,isDisabled=_ref.isDisabled;hideField&&this.$set(field,"hideField",!1),isDisabled&&this.$set(field,"isDisabled",!1)}}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)({getMetrics:"metricUnits/getMetrics",getMetricsUnit:"metricUnits/getMetricsUnit"})),(0,vuex_esm/* mapState */.rn)({isMetricLoading:function(state){return state.metricUnits.isMetricLoading}})),{},{metricsList:function(){var metrics=this.getMetrics;return metrics||[]},showFormProperties:function(){var field=this.field,section=this.section;return(0,validation/* isEmpty */.xb)(field)&&(0,validation/* isEmpty */.xb)(section)},showSectionProperties:function(){var field=this.field,section=this.section;return!(0,validation/* isEmpty */.xb)(section)&&(0,validation/* isEmpty */.xb)(field)},isLookupTypeField:function(){var field=this.field,_ref2=field||{},displayTypeEnum=_ref2.displayTypeEnum;return["LOOKUP_POPUP","LOOKUP_SIMPLE","MULTI_LOOKUP_SIMPLE","SPACECHOOSER"].includes(displayTypeEnum)},title:function(){var field=this.field,section=this.section;return(0,validation/* isEmpty */.xb)(field)&&(0,validation/* isEmpty */.xb)(section)?"FORM PROPERTIES":(0,validation/* isEmpty */.xb)(field)?"SECTION PROPERTIES":"FIELD PROPERTIES"},defaultValueLabel:function(){if(!(0,validation/* isEmpty */.xb)(this.field)){var displayTypeEnum=this.field.displayTypeEnum;return dropDownTypeHash.includes(displayTypeEnum)?"Drop down values":"Default value"}return""},
/* Show add option
       - only if no error exists
       - after new option added successfully
    */
canShowAddIcon:function(){var msg=this.optionsErrObj.msg,newOptionIndex=this.newOptionIndex;return(0,validation/* isEmpty */.xb)(newOptionIndex)&&(0,validation/* isEmpty */.xb)(msg)},hideDefaultValue:function(){if(!(0,validation/* isEmpty */.xb)(this.field)){var displayTypeEnum=this.field.displayTypeEnum;return hideDefaultValueFieldsHash.includes(displayTypeEnum)}return!0},unitOptions:function(){var metric=this.field.metric,options=this.getMetricsUnit({metricId:metric});return options||[]},filterObj:{get:function(){return this.filter},set:function(value){this.$emit("update:filter",value)}},canShowHideField:function(){var field=this.field,name=field.name;return"tasks"!==name},lookupFilterOptionArr:function(){var _this2=this,field=this.field,filterOption=(0,utils_utility_methods/* constructFieldOptions */.aE)(constant/* default */.Z.LOOKUP_FILTERS_MAP),isResourceTypeFields=this.isResourceTypeFields(field);return filterOption=isResourceTypeFields?filterOption.slice(0,2):filterOption.slice(2,6),filterOption.map((function(option){var label=option.label,value=option.value;return{label:_this2.$t("fields.properties.show_only_".concat(label)),value:value}}))},isSubFormSection:function(){var section=this.section,_ref3=section||{},sectionType=_ref3.sectionType;return 2===sectionType},selectedFieldSection:function(){var _this3=this,_ref4=this||{},section=_ref4.section,formObj=_ref4.formObj,field=_ref4.field;if((0,validation/* isEmpty */.xb)(section)){var _ref5=formObj||{},sections=_ref5.sections,_ref6=field||{},fieldId=_ref6.id,fieldSection=(sections||[]).find((function(section){var _ref7=section||{},fields=_ref7.fields,subForm=_ref7.subForm;return(0,validation/* isEmpty */.xb)(subForm)||(fields=_this3.$getProperty(section,"subForm.sections.0.fields",[])),(fields||[]).find((function(fieldObj){return fieldObj.id===fieldId}))}));return fieldSection}return section},subFormId:function(){var _ref8=this||{},selectedFieldSection=_ref8.selectedFieldSection;return this.$getProperty(selectedFieldSection,"subForm.id")},isSubFormField:function(){var _ref9=this||{},selectedFieldSection=_ref9.selectedFieldSection,_ref10=selectedFieldSection||{},subForm=_ref10.subForm;return!(0,validation/* isEmpty */.xb)(subForm)},isDefaultConfigured:function(){var isSubFormSection=this.isSubFormSection,section=this.section;if(isSubFormSection){var _ref11=section||{},subFormValue=_ref11.subFormValue;return!(0,validation/* isEmpty */.xb)(subFormValue)}return!1},isMultiple:function(){var field=this.field,_ref12=field||{},fieldObj=_ref12.field,_ref13=fieldObj||{},dataTypeEnum=_ref13.dataTypeEnum;return"MULTI_ENUM"===dataTypeEnum},isNotesField:function(){var field=this.field,displayTypeEnum=field.displayTypeEnum;return"NOTES"===displayTypeEnum},placeHolderMap:function(){var field=this.field,_ref14=field||{},displayTypeEnum=_ref14.displayTypeEnum,lookupModuleName=_ref14.lookupModuleName,placeHolderObj=constant/* default */.Z.FIELD_PLACEHOLDER_MAP[displayTypeEnum]||{};return["LOOKUP_SIMPLE"].includes(displayTypeEnum)||"SPACECHOOSER"===displayTypeEnum?placeHolderObj[lookupModuleName]||{}:placeHolderObj||{}},handleNumberFieldMetric:function(){var field=this.field,_ref15=field||{},displayTypeEnum=_ref15.displayTypeEnum;return"NUMBER"===displayTypeEnum&&(!(0,validation/* isEmpty */.xb)(field.metric)||!(0,validation/* isEmpty */.xb)(field.unitId))},canShowCriteriaBuilderForLookup:function(){var field=this.field,displayTypeEnum=field.displayTypeEnum,fieldObj=field.field,dataTypeEnum=field.dataTypeEnum,isEnumType=["LOOKUP_SIMPLE","MULTI_LOOKUP_SIMPLE","WOASSETSPACECHOOSER","SPACECHOOSER"];if((!(0,validation/* isEmpty */.xb)(fieldObj)||!(0,validation/* isEmpty */.xb)(field))&&(isEnumType.includes(displayTypeEnum)||dataTypeEnum&&"LOOKUP"===dataTypeEnum._name)){var _ref16=fieldObj||field||{},lookupModule=_ref16.lookupModule;if(!(0,validation/* isEmpty */.xb)(lookupModule)){var _ref17=lookupModule||{},type=_ref17.type;return constant/* default */.Z.FIELD_LOOKUP_ENTITY_HASH.includes(type)}}return!1}}),methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({canShowRelatedListTitle:function(field){var _ref18=this||{},isLocationField=_ref18.isLocationField;return!(0,utils_field/* isMultiLookup */.On)(field)&&!isLocationField}},(0,vuex_esm/* mapActions */.nv)({loadMetricUnits:"metricUnits/loadMetricUnits"})),{},{setPlaceHolders:function(){var field=this.field,_ref19=field||{},_ref19$value=_ref19.value,value=void 0===_ref19$value?"":_ref19$value;this.enablePlaceHolder=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)},openConfigurationDialog:function(isEdit){var isDefaultConfigured=this.isDefaultConfigured;isEdit?this.$emit("openConfigurationDialog"):isDefaultConfigured||this.$emit("openConfigurationDialog")},showCriteriaForField:function(){this.openCriteriaForRule=!0},afterSave:function(){this.$emit("loadRulesList")},resetRule:function(){var _this4=this,formRulesMap=this.formRulesMap,field=this.field,dialogObj={title:"Delete Form Rule",message:"Are you sure you want to delete this rule?",rbDanger:!0,rbLabel:"Delete"};this.$dialog.confirm(dialogObj).then((function(value){if(value){for(var rule=formRulesMap[field.id],i=0;i<rule.actions.length;i++){var action=rule.actions[i];action.formRuleActionFieldsContext.forEach((function(formRuleActionField){if(!(0,validation/* isEmpty */.xb)(formRuleActionField.criteria))for(var key in formRuleActionField.criteria.conditions)delete formRuleActionField.criteria.conditions[key].operator}))}var url="v2/form/rule/delete",data={formRuleContext:formRulesMap[field.id]};http/* default */.ZP.post(url,data).then((function(_ref20){var _ref20$data=_ref20.data,message=_ref20$data.message,responseCode=_ref20$data.responseCode;if(0!==responseCode)throw new Error(message);delete _this4.formRulesMap[field.id],_this4.$emit("loadRulesList"),_this4.$message.success("Successfully Deleted")})).catch((function(_ref21){var message=_ref21.message;_this4.$message.error(message)}))}}))},updatePosition:function(value){this.formProperties.labelPosition=value},
/* Dont Show remove option
       - if it is the only option left
    */
canShowRemoveIcon:function(index){var _this$field$options2=this.field.options,options=void 0===_this$field$options2?[]:_this$field$options2,errIndex=this.optionsErrObj.index,newOptionIndex=this.newOptionIndex,length=options.length;if(!(0,validation/* isEmpty */.xb)(newOptionIndex))return index===newOptionIndex;if(length<1&&!(0,validation/* isEmpty */.xb)(errIndex))return index===errIndex;var visibleOptionsCount=options.reduce((function(acc,option){return option.visible&&(acc+=1),acc}),0);return visibleOptionsCount>1},isOptionInvalid:function(index){var errIndex=this.optionsErrObj.index;return index===errIndex},isDropdownTypeFields:function(field){var displayTypeEnum=field.displayTypeEnum,isLookupModuleField=(0,field_utils/* isLookupDropDownField */.Nz)(this.field);return"LOOKUP_SIMPLE"===displayTypeEnum&&!isLookupModuleField||["REQUESTER","URGENCY"].includes(displayTypeEnum)},isDisplayTypeFieldsHash:function(field){var displayTypeEnum=field.displayTypeEnum;return displayTypeFieldsHash.includes(displayTypeEnum)},addOption:function(index){var _this5=this,_this$field2=this.field,_this$field2$options=_this$field2.options,options=void 0===_this$field2$options?[]:_this$field2$options,fieldObj=_this$field2.field,_ref22=fieldObj||{},_ref22$values=_ref22.values,values=void 0===_ref22$values?[]:_ref22$values,indices=values.map((function(value){return value.index})),maxIndex=max_default()(indices||[])||0,clonedOptions=(0,toConsumableArray/* default */.Z)(options),unsavedIndices=clonedOptions.map((function(option){return option.value})),unsavedMaxIndex=max_default()(unsavedIndices||[])||0;
// check both max index in field.field.values and field.options, because if users add options
// continously then the max index of field.field.values is incorrect, so check if field.options has max
// greater than max index in field.field.values (index for field.options is value)
unsavedMaxIndex>maxIndex&&(maxIndex=unsavedMaxIndex);var newOption={label:"",visible:!0,isNew:!0,value:maxIndex+1};index+=1,clonedOptions.splice(index,0,newOption),clonedOptions=clonedOptions.map((function(option){return option})),this.$set(this.field,"options",clonedOptions),
// Focus the newly created option
this.$nextTick((function(){_this5.newOptionIndex=index;var ref=_this5.$refs["input".concat(index)];(0,validation/* isEmpty */.xb)(ref)||ref[0].focus()}))},removeOption:function(option,index){var errIndex=this.optionsErrObj.index,isMultiple=this.isMultiple,_this$field3=this.field,value=_this$field3.value,options=_this$field3.options,_ref23=option||{},isNew=_ref23.isNew;
// Reset value if default value is deleted
if((0,validation/* isEmpty */.xb)(errIndex)||errIndex!==index||(this.optionsErrObj={msg:"",index:null},this.$emit("update:hasError",!1)),isNew?options.splice(index,1):option.visible=!1,isMultiple){value=(0,validation/* isEmpty */.xb)(value)?[]:value;var optionsValue=(option||{}).value,valueIndex=value.indexOf(optionsValue);value.splice(valueIndex,1),this.field.value=value}else value===(option||{}).value&&(this.field.value=null);this.newOptionIndex=null},onInputChange:function(){this.$set(this,"isInputFieldFocused",!0)},onLabelChange:function(value){var hasError=this.hasError;(0,validation/* isEmpty */.xb)(value)?(this.labelErrMsg="Label cannot be empty",this.$emit("update:hasError",!0)):hasError&&(this.labelErrMsg="",this.$emit("update:hasError",!1)),this.$set(this,"isInputFieldFocused",!0)},onOptionsInputChange:function(index,_ref24){var label=_ref24.label,_this$field$options3=this.field.options,options=void 0===_this$field$options3?[]:_this$field$options3,filteredOptions=options.filter((function(option){return option.visible}));if((0,validation/* isEmpty */.xb)(label)){var errMsg="Field option cannot be empty";this.setFieldInvalid(index,errMsg)}else{var isDuplicateLabel=(0,utility_methods/* checkDuplicateInObject */.w2)("label",filteredOptions);if(isDuplicateLabel){var _errMsg="Choices cannot contain duplicates";this.setFieldInvalid(index,_errMsg)}else this.setFieldValid()}this.debounceFieldUpdate()},onInputBlur:function(index,_ref25){var label=_ref25.label,msg=this.optionsErrObj.msg,newOptionIndex=this.newOptionIndex;if(!(0,validation/* isEmpty */.xb)(newOptionIndex)&&(0,validation/* isEmpty */.xb)(label)&&(0,validation/* isEmpty */.xb)(msg)){var errMsg="Field option cannot be empty";this.setFieldInvalid(index,errMsg)}this.newOptionIndex=null},onFormInputChange:function(){this.debounceFormUpdate()},onSectionInputChange:function(){this.debounceSectionUpdate()},onFieldInputChange:function(){this.debounceFieldUpdate()},onFieldTypeChange:function(value){var fieldObj=this.field,_ref26=fieldObj||{},fieldValue=_ref26.value;4===Number(value)?(this.field.displayTypeEnum="RADIO",this.field.displayTypeInt=4,this.field.value=fieldValue?1:0,(0,validation/* isEmpty */.xb)(fieldObj)||(this.field.field.trueVal=fieldObj.trueVal||"True",this.field.field.falseVal=fieldObj.falseVal||"False")):(this.field.displayTypeEnum="DECISION_BOX",this.field.displayTypeInt=5,this.field.value=0!==fieldValue)},onHideChange:function(value){var field=this.field;value&&this.$set(field,"span",1)},onRecordSelected:function(value,field){var name=field.name,displayTypeEnum=field.displayTypeEnum;"resource"===name&&(0,validation/* isEmpty */.xb)(value)&&(
// Reset space asset resource obj, when user clears the selected resource field
this.$emit("update:spaceAssetResourceObj",{}),this.$set(field,"value",null)),
//Temp Hack fix need to removed in revamp
"MULTI_LOOKUP_SIMPLE"===displayTypeEnum&&this.$emit("formFieldUpdated",field)},setLookupFieldValue:function(props){var _this6=this,field=props.field,_ref27=field||{},selectedItems=_ref27.selectedItems,_ref27$options=_ref27.options,options=void 0===_ref27$options?[]:_ref27$options,fieldName=_ref27.name,config=_ref27.config,displayTypeEnum=_ref27.displayTypeEnum,multiple=_ref27.multiple,selectedValue=[];selectedItems.forEach((function(selectedItem){var value=selectedItem.value,label=selectedItem.label;if((0,validation/* isEmpty */.xb)(options))options.push(selectedItem);else{var isAlreadyExists=!(0,validation/* isEmpty */.xb)(options.find((function(option){return option.value===value})));isAlreadyExists||options.unshift(selectedItem)}_this6.$set(field,"options",options),selectedValue.push(value),"resource"===fieldName&&_this6.$emit("update:spaceAssetResourceObj",{name:label,config:config,id:value})})),multiple?this.$set(field,"value",selectedValue):this.$set(field,"value",selectedValue[0]),
//Temp Hack fix need to removed in revamp
"MULTI_LOOKUP_SIMPLE"===displayTypeEnum&&this.$emit("formFieldUpdated",field)},onFilterCheckChange:function(value){var field=this.field;value&&this.$set(field,"value",null)},onCheckFilters:function(isFiltersEnabled){var _this$field4=this.field,_this$field5=void 0===_this$field4?{}:_this$field4,_this$field5$config=_this$field5.config,config=void 0===_this$field5$config?{}:_this$field5$config;this.field.config=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},config),{},{isFiltersEnabled:isFiltersEnabled})},setFieldInvalid:function(index,errMsg){this.optionsErrObj={msg:errMsg,index:index},this.$emit("update:hasError",!0)},setFieldValid:function(){this.optionsErrObj={msg:"",index:null},this.$emit("update:hasError",!1),this.newOptionIndex=null},resetUnitField:function(){var field=this.field;this.$set(field,"unitId","")},updateProperties:function(url,data){var _this7=this,hasError=this.hasError;if(!hasError){this.$emit("update:isSaving",!0);var promise=http/* default */.ZP.post(url,data).then((function(_ref28){var _ref28$data=_ref28.data,message=_ref28$data.message,responseCode=_ref28$data.responseCode,result=_ref28$data.result;if(0!==responseCode)throw new Error(message);var _result$field=result.field,field=void 0===_result$field?{}:_result$field,values=field.values,dataType=field.dataType;if(!(0,validation/* isEmpty */.xb)(field)&&(
// Handling for loading options after auto save
_this7.allowUpdateFieldProp=!1,_this7.$set(_this7.field.field,"values",values),8===dataType||14===dataType)){var _ref29=_this7.field||{},_ref29$options=_ref29.options,actualOptions=void 0===_ref29$options?[]:_ref29$options,modifiedOptions=(0,utils_utility_methods/* constructEnumFieldOptions */.rr)(values);actualOptions=(actualOptions||[]).map((function(option){var currOptionValue=modifiedOptions.find((function(val){return val.value===option.value}));return(0,validation/* isEmpty */.xb)(currOptionValue)?option:currOptionValue})),_this7.$set(_this7.field,"options",actualOptions)}})).catch((function(_ref30){var message=_ref30.message;"Field Display Name Duplication Is Not Allowed"===message?(_this7.labelErrMsg="Field display name duplication is not allowed",_this7.$emit("update:hasError",!0)):_this7.$message.error(message)}));Promise.all([promise]).finally((function(){_this7.allowUpdateFieldProp=!0,_this7.$emit("update:isSaving",!1),_this7.$set(_this7,"isInputFieldFocused",!1)}))}},serializeFormData:function(){var form=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},formObj=(0,utility_methods/* cloneObject */.kI)(form),labelPosition="",labelAlignmentHash=constant/* default */.Z.FORMS_LABELALIGNMENT_ENUMHASH;return Object.entries(labelAlignmentHash).forEach((function(_ref31){var _ref32=(0,slicedToArray/* default */.Z)(_ref31,2),key=_ref32[0],value=_ref32[1];formObj.labelPosition===value&&(labelPosition=Number(key))})),formObj.labelPosition=labelPosition,formObj},serializeField:function(field){var currentSiteId=this.currentSiteId,name=field.name,value=field.value,resourceProps=constant/* default */.Z.FIELDS_RESOURCE_PROPS,serializedField=(0,utils_utility_methods/* serializeProps */._$)(field,resourceProps),isChooserTypeFields=(0,field_utils/* isChooserTypeField */.Rq)(field),skipStringify=null===value||"string"===typeof value;return isChooserTypeFields&&"SPACECHOOSER"!==field.displayTypeEnum&&(0,validation/* isObject */.Kn)(value)&&(0,validation/* areValuesEmpty */.sD)(value)?serializedField.value="":"MULTI_CURRENCY"!==field.displayTypeEnum||(0,validation/* isEmpty */.xb)(field.currencyCode)?serializedField.value=skipStringify?(0,validation/* isEmpty */.xb)(value)?"":value:JSON.stringify(value):(serializedField.currencyCode=field.currencyCode,serializedField.exchangeRate=field.exchangeRate),
// Skip site field value update, if global site is not 'All'
"siteId"!==name||(0,validation/* isEmpty */.xb)(currentSiteId)||delete serializedField["value"],serializedField},showLookupWizard:function(field,canShow){this.$set(this,"selectedLookupField",field),this.$set(this,"canShowLookupWizard",canShow)},showHideMand:function(displayTypeEnum){return!hideMandatoryFieldsHash.includes(displayTypeEnum)},showAddOptionsCheckbox:function(displayTypeEnum){return"SELECTBOX"===displayTypeEnum},canDisableMand:function(name){return disabledMandFieldHash.includes(name)&&!this.isCustomModule},isResourceTypeFields:function(field){var displayTypeEnum=field.displayTypeEnum,lookupModuleName=field.lookupModuleName;return"WOASSETSPACECHOOSER"===displayTypeEnum&&"resource"===lookupModuleName},canShowLookupFilterOption:function(field){var lookupModuleName=field.lookupModuleName,isResourceTypeFields=this.isResourceTypeFields(field),isFilterAllowedField=constant/* default */.Z.LOOKUP_FILTER_ENABLED_FIELDS.includes(lookupModuleName);return isResourceTypeFields||isFilterAllowedField},resetDefaultValues:function(){var section=this.section;this.$set(section,"subFormValue",null),this.$set(section,"subFormValueStr",null)},openRichTextArea:function(){this.canShowRichText=!0},isLookup:function(field){return(0,field_utils/* isLookupDropDownField */.Nz)(field)||(0,utils_field/* isMultiLookup */.On)(field)},handlePlaceHolder:function(value){var placeHolderValue="",field=this.field;if(value){var placeHolderMap=this.placeHolderMap;(0,validation/* isEmpty */.xb)(placeHolderMap)||(placeHolderValue=placeHolderMap.value||"")}this.$set(field,"value",placeHolderValue)},canShowSkipSiteFilter:function(fieldObj){var _ref33=fieldObj||{},field=_ref33.field,_ref34=field||{},lookupModule=_ref34.lookupModule,_ref35=lookupModule||{},type=_ref35.type;return((0,utils_field/* isLookupField */.Qf)(field||{})||(0,utils_field/* isMultiLookup */.On)(fieldObj))&&constant/* default */.Z.FIELD_LOOKUP_ENTITY_HASH.includes(type)},setSkipSiteFilter:function(skipSiteFilter){var _ref36=this.field||{},config=_ref36.config;this.field.config=(0,validation/* isEmpty */.xb)(config)?{skipSiteFilter:skipSiteFilter}:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},config),{},{skipSiteFilter:skipSiteFilter})},setShowName:function(showName){var config={skipSiteFilter:!1};this.field.config=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},config),{},{showName:showName})},setHideTaxField:function(hideTaxField){var _ref37=this.field||{},config=_ref37.config;this.field.config=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},config),{},{hideTaxField:hideTaxField})},canShowConfigureBtn:function(field){var isSubFormField=this.isSubFormField,_ref38=field||{},displayTypeEnum=_ref38.displayTypeEnum,configJSON=_ref38.configJSON,_ref39=configJSON||{},richText=_ref39.richText;return!!(["FILE","ATTACHMENT","RICH_TEXT"].includes(displayTypeEnum)||"TEXTAREA"===displayTypeEnum&&richText)&&!isSubFormField},canShowDefaultValueDialog:function(){this.showDefaultValueDialog=!0},closeDefaultVaueDialog:function(){this.showDefaultValueDialog=!1},saveDefaultValue:function(fieldObj){this.$emit("saveDefaultValue",fieldObj),this.showDefaultValueDialog=!1},resetDefaultValue:function(){var field=this.field,_ref40=field||{},displayTypeEnum=_ref40.displayTypeEnum,fieldObj=field;"FILE"===displayTypeEnum&&(fieldObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{fileId:null,fileObj:null})),fieldObj.value=null,this.$emit("saveDefaultValue",fieldObj),
//Temp Hack fix need to removed in revamp
"FILE"===displayTypeEnum&&this.$emit("formFieldUpdated",fieldObj)},locationUpdated:function(val){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref41,name,field,_yield$API$post,data,error,_ref42,locationId,_ref43,value;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_ref41=val||{},name=_ref41.name,field=_this8.field,(0,validation/* isObject */.Kn)(val)||(val=JSON.parse(val)),(0,validation/* isEmpty */.xb)(name)&&(val.name=field.name),!(0,validation/* isEmpty */.xb)(val.locationId)){_context.next=17;break}return _context.prev=5,_context.next=8,api/* API */.bl.post("location/add",{location:val});case 8:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref42=data||{},locationId=_ref42.locationId,_ref43=field||{},value=_ref43.value,field.value=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},value),{},{locationId:locationId}),_this8.$emit("saveDefaultValue",field)),_context.next=17;break;case 14:_context.prev=14,_context.t0=_context["catch"](5);case 17:case"end":return _context.stop()}}),_callee,null,[[5,14]])})))()}})},form_builder_FieldPropertiesvue_type_script_lang_js=FieldPropertiesvue_type_script_lang_js,FieldProperties_component=(0,componentNormalizer/* default */.Z)(form_builder_FieldPropertiesvue_type_script_lang_js,FieldPropertiesvue_type_template_id_0374b13f_scoped_true_render,FieldPropertiesvue_type_template_id_0374b13f_scoped_true_staticRenderFns,!1,null,"0374b13f",null)
/* harmony default export */,FieldProperties=FieldProperties_component.exports,FormsPhotoFieldvue_type_template_id_3877a9a6_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"photo-field-content d-flex"},[_c("inline-svg",{staticClass:"img-container",attrs:{src:"svgs/photo",iconClass:"icon icon-xl photo"}}),_c("div",{staticClass:"img-name f14 mL10"},[_vm._v(_vm._s(_vm.field.displayName))]),_c("div",{staticClass:"status-container mL-auto"},[_c("el-switch",{attrs:{width:30,"active-color":"#39b2c2","inactive-color":"#8ca1ad"},on:{change:function($event){return _vm.onToggle()}},model:{value:_vm.proxyDataSetter,callback:function($$v){_vm.proxyDataSetter=$$v},expression:"proxyDataSetter"}})],1)],1)},FormsPhotoFieldvue_type_template_id_3877a9a6_staticRenderFns=[],FormsPhotoFieldvue_type_script_lang_js={props:["field","activeField"],computed:{isPhotoFieldActive:function(){var field=this.field,activeField=this.activeField;return field.name===activeField.name},proxyDataSetter:{get:function(){var field=this.field;return!field.hideField},set:function(value){var field=this.field;this.$set(field,"hideField",!value)}}},methods:{onToggle:function(){
/*
        Usually updateproperty will trigger update field method in field properties component
        if 'photo field' is active field,
        so to trigger update field method if 'photo field' is not active this method is used
      */
var isPhotoFieldActive=this.isPhotoFieldActive,field=this.field;isPhotoFieldActive||this.$emit("updatePhotoField",field)}}},form_builder_FormsPhotoFieldvue_type_script_lang_js=FormsPhotoFieldvue_type_script_lang_js,FormsPhotoField_component=(0,componentNormalizer/* default */.Z)(form_builder_FormsPhotoFieldvue_type_script_lang_js,FormsPhotoFieldvue_type_template_id_3877a9a6_render,FormsPhotoFieldvue_type_template_id_3877a9a6_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormsPhotoField=FormsPhotoField_component.exports,SubFormValuesConfigBoxvue_type_template_id_8a3644be_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.canShowConfigureDialog?_c("el-dialog",{staticClass:"fc-dialog-center-container default-value-container",attrs:{title:"Configure default values",visible:_vm.canShowConfigureDialog,width:"50%","before-close":_vm.closeDialogBox,"append-to-body":!0},on:{"update:visible":function($event){_vm.canShowConfigureDialog=$event}}},[_c("div",{staticClass:"height450 el-form"},[_c("f-sub-form-wrapper",{key:"default-value ~  "+_vm.section.subFormId,ref:"default-value ~ "+_vm.section.subFormId,staticClass:"position-relative pB100",attrs:{initialSubForm:_vm.section.subForm,subFormsArr:_vm.section.subFormsArr},on:{"update:subFormsArr":function($event){return _vm.$set(_vm.section,"subFormsArr",$event)},"update:sub-forms-arr":function($event){return _vm.$set(_vm.section,"subFormsArr",$event)}}})],1),_c("div",{staticClass:"modal-dialog-footer z-50"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.isSaving,type:"primary"},on:{click:function($event){return _vm.saveDefaultValues()}}},[_vm._v("Confirm")])],1)]):_vm._e()],1)},SubFormValuesConfigBoxvue_type_template_id_8a3644be_staticRenderFns=[],SubFormSetupMixin=__webpack_require__(946201),FSubFormWrapper=__webpack_require__(790142),SubFormValuesConfigBoxvue_type_script_lang_js={mixins:[SubFormSetupMixin/* default */.Z],components:{FSubFormWrapper:FSubFormWrapper/* default */.Z},props:{openSubformDefaultDialog:{type:Boolean},section:{type:Object},allowUpdateProp:{type:Boolean}},data:function(){return{isSaving:!1}},computed:{canShowConfigureDialog:{get:function(){return this.openSubformDefaultDialog},set:function(value){this.$emit("update:openSubformDefaultDialog",value)}}},created:function(){var section=this.section,subFormId=section.subFormId,subForm=section.subForm,subFormValue=section.subFormValue,subFormsArr=[];(0,validation/* isEmpty */.xb)(subFormId)||(subFormsArr=this.constructSubFormValues({subForm:subForm,subFormValue:subFormValue}),this.$set(section,"subFormsArr",subFormsArr))},methods:{closeDialogBox:function(){this.$emit("update:allowUpdateProp",!0),this.$set(this,"canShowConfigureDialog",!1)},saveDefaultValues:function(){var _this=this,$refs=this.$refs,section=this.section,_ref=section||{},subFormId=_ref.subFormId,subformWrapperElement=$refs["default-value ~ ".concat(subFormId)];(0,validation/* isEmpty */.xb)(subformWrapperElement)||subformWrapperElement.saveRecord({skipDeserialize:!0}).then((function(data){_this.$emit("update:allowUpdateProp",!0),_this.$set(_this.section,"subFormValue",data),_this.$set(_this,"canShowConfigureDialog",!1)}))}}},form_builder_SubFormValuesConfigBoxvue_type_script_lang_js=SubFormValuesConfigBoxvue_type_script_lang_js,SubFormValuesConfigBox_component=(0,componentNormalizer/* default */.Z)(form_builder_SubFormValuesConfigBoxvue_type_script_lang_js,SubFormValuesConfigBoxvue_type_template_id_8a3644be_render,SubFormValuesConfigBoxvue_type_template_id_8a3644be_staticRenderFns,!1,null,null,null)
/* harmony default export */,SubFormValuesConfigBox=SubFormValuesConfigBox_component.exports,LookupFieldPropertiesvue_type_template_id_f521ae54_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container lookup-field-prop-container",attrs:{title:_vm.titleCard,visible:_vm.canShowLookupDialog,width:"40%","before-close":_vm.closeDialogBox,"append-to-body":!0},on:{"update:visible":function($event){_vm.canShowLookupDialog=$event}}},[_c("ErrorBanner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorMessage=$event},"update:error-message":function($event){_vm.errorMessage=$event}}}),_c("div",{staticClass:"pB60"},[_c("el-form",{ref:"lookupFieldProps",attrs:{rules:_vm.rules,model:_vm.field}},[_c("el-form-item",{staticClass:"mB20",attrs:{label:"Field Label",prop:"displayName",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},on:{input:_vm.changeFieldName},model:{value:_vm.field.displayName,callback:function($$v){_vm.$set(_vm.field,"displayName",$$v)},expression:"field.displayName"}})],1),_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name",required:!0}},[_c("div",{staticClass:"d-flex align-center pB6"},[_c("p",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.link_name"))+" ")]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n              arrow: true,\n              arrowType: 'round',\n              animation: 'fade',\n            }"}],staticClass:"el-icon-info mL5",attrs:{content:_vm.$t("fields.properties.link_name_desc")}})]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},on:{change:_vm.changeNameInteractedBoolean},model:{value:_vm.field.name,callback:function($$v){_vm.$set(_vm.field,"name",$$v)},expression:"field.name"}})],1),_vm.isLocationField?_vm._e():_c("el-form-item",{staticClass:"mB20",attrs:{label:"Type",prop:"lookupModuleName",required:!_vm.isLocationField}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select",filterable:""},model:{value:_vm.field.lookupModuleName,callback:function($$v){_vm.$set(_vm.field,"lookupModuleName",$$v)},expression:"field.lookupModuleName"}},_vm._l(_vm.moduleList,(function(module){return _c("el-option",{key:module.name,attrs:{label:module.displayName,value:module.name}})})),1)],1),_vm.isLocationField?_vm._e():_c("el-form-item",{staticClass:"mB20",attrs:{label:_vm.$t("fields.properties.display_type"),prop:"config"}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:_vm.$t("fields.properties.display_type_placeholders")},on:{change:_vm.changeDisplayType},model:{value:_vm.field.displayType,callback:function($$v){_vm.$set(_vm.field,"displayType",$$v)},expression:"field.displayType"}},[_c("el-option",{attrs:{label:_vm.$t("fields.properties.single_select"),value:10}}),_c("el-option",{attrs:{label:_vm.$t("fields.properties.multiple_select"),value:66}})],1)],1),_vm.canShowRelatedListTitle(_vm.field)?_c("el-form-item",{staticClass:"mB20",attrs:{label:_vm.$t("common._common.enter_related_list_label"),prop:"relatedListDisplayName"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",on:{input:_vm.changeRelatedListDisplayName},model:{value:_vm.field.relatedListDisplayName,callback:function($$v){_vm.$set(_vm.field,"relatedListDisplayName",$$v)},expression:"field.relatedListDisplayName"}})],1):_vm._e()],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addLookup()}}},[_vm._v("Confirm")])],1)],1)},LookupFieldPropertiesvue_type_template_id_f521ae54_staticRenderFns=[],ErrorBanner=__webpack_require__(297157),LookupFieldPropertiesvue_type_script_lang_js={components:{ErrorBanner:ErrorBanner/* default */.Z},props:{openLookupDialog:{type:Boolean},moduleList:{type:Array},lookupField:{type:Object},moduleName:{type:String},isCustomModule:{type:Boolean},isLocationField:{type:Boolean}},computed:{titleCard:function(){var _ref=this||{},isLocationField=_ref.isLocationField,placeholder="".concat(isLocationField?"Location":"Lookup");return"".concat(placeholder," Field Properties")},canShowLookupDialog:{get:function(){return this.openLookupDialog},set:function(value){this.$emit("update:openLookupDialog",value)}},field:{get:function(){return this.lookupField},set:function(value){this.$emit("update:lookupField",value)}}},created:function(){var field=this.field,_ref2=field||{},displayName=_ref2.displayName;if(!(0,validation/* isEmpty */.xb)(displayName)){var fieldName=this.getSnakeCase(displayName);this.$set(field,"name",fieldName)}},data:function(){return{fieldProperties:{},canRemoveField:!0,error:!1,errorMessage:null,isNameFieldInteracted:!1,rules:{displayName:[{required:!0,message:"Please input module name",trigger:"change"}],lookupModuleName:[{required:!0,message:"Please select module",trigger:"change"}]}}},methods:{canShowRelatedListTitle:function(field){var _ref3=this||{},isLocationField=_ref3.isLocationField;return!(0,utils_field/* isMultiLookup */.On)(field)&&!isLocationField},closeDialogBox:function(){var field=this.field,rowIndex=field.rowIndex,columnIndex=field.columnIndex;this.canShowLookupDialog=!1,this.canRemoveField&&this.$emit("removeField",field,rowIndex,columnIndex)},addLookup:function(){var _this=this;this.$refs["lookupFieldProps"].validate(function(){var _ref4=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(valid){var field,_ref5,displayTypeEnum,moduleObj,_yield$API$get,data,moduleId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!valid){_context.next=20;break}if(field=_this.field,_ref5=field||{},displayTypeEnum=_ref5.displayTypeEnum,moduleObj=_this.moduleList.find((function(module){return module.name===field.lookupModuleName}))||{},!(0,validation/* isEmpty */.xb)(moduleObj)||"GEO_LOCATION"!==displayTypeEnum){_context.next=17;break}return _context.prev=5,_context.next=8,api/* API */.bl.get("v2/module/location");case 8:_yield$API$get=_context.sent,data=_yield$API$get.data,moduleId=_this.$getProperty(data,"module.moduleId")||null,(0,validation/* isEmpty */.xb)(moduleId)?_this.$set(field,"specialType","location"):_this.$set(field,"lookupModuleId",moduleId),_context.next=17;break;case 14:_context.prev=14,_context.t0=_context["catch"](5),_this.$message.error(_context.t0.message||"Error Occurred");case 17:(0,validation/* isEmpty */.xb)(null===moduleObj||void 0===moduleObj?void 0:moduleObj.moduleId)?_this.$set(field,"specialType",moduleObj.name):_this.$set(field,"lookupModuleId",moduleObj.moduleId),_this.canRemoveField=!1,_this.$emit("addNewDefaultField",field);case 20:case"end":return _context.stop()}}),_callee,null,[[5,14]])})));return function(_x){return _ref4.apply(this,arguments)}}())},changeDisplayType:function(displayType){var field=this.field;10===displayType?(this.$set(field,"displayTypeEnum","LOOKUP"),this.$set(field,"displayTypeInt",10),this.$set(field,"dataType",7)):66===displayType&&(this.$set(field,"displayTypeEnum","MULTI_LOOKUP_SIMPLE"),this.$set(field,"displayTypeInt",66),this.$set(field,"dataType",13))},getSnakeCase:function(string){return string.replace(/[\W_]/g,"_").toLowerCase()},changeRelatedListDisplayName:function(inputVal){this.$set(this.field,"relatedListDisplayName",inputVal)},changeFieldName:function(val){var field=this.field,isNameFieldInteracted=this.isNameFieldInteracted;if(!isNameFieldInteracted){var fieldName=this.getSnakeCase(val);this.$set(field,"name",fieldName)}},changeNameInteractedBoolean:function(){this.isNameFieldInteracted=!0}}},form_builder_LookupFieldPropertiesvue_type_script_lang_js=LookupFieldPropertiesvue_type_script_lang_js,LookupFieldProperties_component=(0,componentNormalizer/* default */.Z)(form_builder_LookupFieldPropertiesvue_type_script_lang_js,LookupFieldPropertiesvue_type_template_id_f521ae54_render,LookupFieldPropertiesvue_type_template_id_f521ae54_staticRenderFns,!1,null,null,null)
/* harmony default export */,LookupFieldProperties=LookupFieldProperties_component.exports,DefaultFieldPropertiesvue_type_template_id_1e822ea9_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container default-field-prop-container",attrs:{title:_vm.$t("fields.properties.base_field_properties"),visible:_vm.canShowLookupDialog,width:"40%","before-close":_vm.closeDialogBox,"append-to-body":!0},on:{"update:visible":function($event){_vm.canShowLookupDialog=$event}}},[_c("div",{staticClass:"height250"},[_c("el-form",{ref:"lookupFieldProps",attrs:{model:_vm.field}},[_c("el-form-item",{staticClass:"mB10",attrs:{label:_vm.$t("fields.properties.field_label"),prop:"displayName",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},on:{input:_vm.changeFieldName},model:{value:_vm.field.displayName,callback:function($$v){_vm.$set(_vm.field,"displayName",$$v)},expression:"field.displayName"}})],1),_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name",required:!0}},[_c("div",{staticClass:"d-flex align-center pB6"},[_c("p",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.link_name"))+" ")]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n              arrow: true,\n              arrowType: 'round',\n              animation: 'fade',\n            }"}],staticClass:"el-icon-info mL5",attrs:{content:_vm.$t("fields.properties.link_name_desc")}})]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},on:{change:_vm.changeNameInteractedBoolean},model:{value:_vm.field.name,callback:function($$v){_vm.$set(_vm.field,"name",$$v)},expression:"field.name"}})],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.addField}},[_vm._v(_vm._s(_vm.$t("common._common.confirm")))])],1)])},DefaultFieldPropertiesvue_type_template_id_1e822ea9_staticRenderFns=[],DefaultFieldPropertiesvue_type_script_lang_js={props:{canShowDialog:{type:Boolean},fieldObj:{type:Object}},created:function(){var field=this.field,_ref=field||{},displayName=_ref.displayName;if(!(0,validation/* isEmpty */.xb)(displayName)){var fieldName=this.getSnakeCase(displayName);this.$set(field,"name",fieldName)}},data:function(){return{fieldProperties:{},isNameFieldInteracted:!1}},computed:{canShowLookupDialog:{get:function(){return this.canShowDialog},set:function(value){this.$emit("update:canShowDialog",value)}},field:{get:function(){return this.fieldObj},set:function(value){this.$emit("update:fieldObj",value)}}},methods:{closeDialogBox:function(){var field=this.field,rowIndex=field.rowIndex,columnIndex=field.columnIndex;this.canShowLookupDialog=!1,this.$emit("removeField",field,rowIndex,columnIndex)},addField:function(){var field=this.field;this.$emit("addNewDefaultField",field)},getSnakeCase:function(string){return string.replace(/[\W_]/g,"_").toLowerCase()},changeFieldName:function(val){var field=this.field,isNameFieldInteracted=this.isNameFieldInteracted;if(!isNameFieldInteracted){var fieldName=this.getSnakeCase(val);this.$set(field,"name",fieldName)}},changeNameInteractedBoolean:function(){this.isNameFieldInteracted=!0}}},form_builder_DefaultFieldPropertiesvue_type_script_lang_js=DefaultFieldPropertiesvue_type_script_lang_js,DefaultFieldProperties_component=(0,componentNormalizer/* default */.Z)(form_builder_DefaultFieldPropertiesvue_type_script_lang_js,DefaultFieldPropertiesvue_type_template_id_1e822ea9_render,DefaultFieldPropertiesvue_type_template_id_1e822ea9_staticRenderFns,!1,null,null,null)
/* harmony default export */,DefaultFieldProperties=DefaultFieldProperties_component.exports,MultiLineFieldPropertiesvue_type_template_id_18f85732_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container multi-line-prop-container",attrs:{title:"Multi Line field Properties",visible:_vm.canShowDialog,width:"40%","before-close":_vm.closeDialogBox,"append-to-body":!0},on:{"update:visible":function($event){_vm.canShowDialog=$event}}},[_c("div",{staticClass:"height350"},[_c("el-form",{ref:"lookupFieldProps",attrs:{model:_vm.field}},[_c("el-form-item",{staticClass:"mB20",attrs:{label:"Field Label",prop:"displayName",required:!0}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},on:{input:_vm.changeFieldName},model:{value:_vm.field.displayName,callback:function($$v){_vm.$set(_vm.field,"displayName",$$v)},expression:"field.displayName"}})],1),_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name",required:!0}},[_c("div",{staticClass:"d-flex align-center pB6"},[_c("p",{staticClass:"fc-input-label-txt pB0"},[_vm._v(" "+_vm._s(_vm.$t("fields.properties.link_name"))+" ")]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n              arrow: true,\n              arrowType: 'round',\n              animation: 'fade',\n            }"}],staticClass:"el-icon-info mL5",attrs:{content:_vm.$t("fields.properties.link_name_desc")}})]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("common._common.enter_name")},on:{change:_vm.changeNameInteractedBoolean},model:{value:_vm.field.name,callback:function($$v){_vm.$set(_vm.field,"name",$$v)},expression:"field.name"}})],1),_c("el-form-item",{attrs:{label:"Character Length",required:!0}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select",filterable:""},model:{value:_vm.selectedDataType,callback:function($$v){_vm.selectedDataType=$$v},expression:"selectedDataType"}},_vm._l(_vm.properties,(function(propertie){return _c("el-option",{key:propertie.dataType,attrs:{label:propertie.label,value:propertie.dataType}})})),1)],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addMainField()}}},[_vm._v("Confirm")])],1)])},MultiLineFieldPropertiesvue_type_template_id_18f85732_staticRenderFns=[],MultiLineFieldPropertiesvue_type_script_lang_js={props:{openMultiLinePropDialog:{type:Boolean},multiLineField:{type:Object},moduleName:{type:String}},created:function(){var field=this.field,_ref=field||{},displayName=_ref.displayName;if(!(0,validation/* isEmpty */.xb)(displayName)){var fieldName=this.getSnakeCase(displayName);this.$set(field,"name",fieldName)}},data:function(){return{properties:[{label:"Small (2000 characters)",dataType:18},{label:"Large (32000 characters)",dataType:17}],selectedDataType:17,canRemoveField:!0,error:!1,errorMessage:null,isNameFieldInteracted:!1}},computed:{canShowDialog:{get:function(){return this.openMultiLinePropDialog},set:function(value){this.$emit("update:openMultiLinePropDialog",value)}},field:{get:function(){return this.multiLineField},set:function(value){this.$emit("update:multiLineField",value)}}},methods:{addMainField:function(){var field=this.field,selectedDataType=this.selectedDataType;this.$set(field,"dataType",selectedDataType),this.canRemoveField=!1,this.$emit("addNewDefaultField",field)},closeDialogBox:function(){var field=this.field,rowIndex=field.rowIndex,columnIndex=field.columnIndex;this.canShowDialog=!1,this.canRemoveField&&this.$emit("removeField",field,rowIndex,columnIndex)},getSnakeCase:function(string){return string.replace(/[\W_]/g,"_").toLowerCase()},changeFieldName:function(val){var field=this.field,isNameFieldInteracted=this.isNameFieldInteracted;if(!isNameFieldInteracted){var fieldName=this.getSnakeCase(val);this.$set(field,"name",fieldName)}},changeNameInteractedBoolean:function(){this.isNameFieldInteracted=!0}}},form_builder_MultiLineFieldPropertiesvue_type_script_lang_js=MultiLineFieldPropertiesvue_type_script_lang_js,MultiLineFieldProperties_component=(0,componentNormalizer/* default */.Z)(form_builder_MultiLineFieldPropertiesvue_type_script_lang_js,MultiLineFieldPropertiesvue_type_template_id_18f85732_render,MultiLineFieldPropertiesvue_type_template_id_18f85732_staticRenderFns,!1,null,null,null)
/* harmony default export */,MultiLineFieldProperties=MultiLineFieldProperties_component.exports,SubFormModulesListvue_type_template_id_2631643e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Subform Modules List",visible:_vm.canShowSubFormsModulesDialog,width:"30%","before-close":_vm.closeDialogBox,"append-to-body":!0},on:{"update:visible":function($event){_vm.canShowSubFormsModulesDialog=$event}}},[_c("ErrorBanner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorMessage=$event},"update:error-message":function($event){_vm.errorMessage=$event}}}),_c("div",{staticClass:"height250"},[_c("el-form",{ref:"subFormModules",attrs:{rules:_vm.rules,model:_vm.subFormModule}},[_c("el-form-item",{staticClass:"mB20",attrs:{label:"Type",prop:"selectedModuleName",required:!0}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{placeholder:"Select"},model:{value:_vm.subFormModule.selectedModuleName,callback:function($$v){_vm.$set(_vm.subFormModule,"selectedModuleName",$$v)},expression:"subFormModule.selectedModuleName"}},_vm._l(_vm.subFormsModules,(function(module,index){return _c("el-option",{key:index+" "+module.name,attrs:{label:module.displayName,value:module.name}})})),1)],1)],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialogBox}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.isSaving,type:"primary"},on:{click:function($event){return _vm.addSubForm()}}},[_vm._v("Confirm")])],1)],1)],1)},SubFormModulesListvue_type_template_id_2631643e_staticRenderFns=[],SubFormModulesListvue_type_script_lang_js={components:{ErrorBanner:ErrorBanner/* default */.Z},props:["openSubformDialog","subFormsModules","formId","activeSection","activeSectionIndex"],computed:{canShowSubFormsModulesDialog:{get:function(){return this.openSubformDialog},set:function(value){this.$emit("update:openSubformDialog",value)}}},data:function(){return{canRemoveSection:!0,error:!1,errorMessage:null,rules:{selectedModuleName:[{required:!0,message:"Please select module",trigger:"change"}]},subFormModule:{selectedModuleName:null},isSaving:!1}},methods:{closeDialogBox:function(){var activeSectionIndex=this.activeSectionIndex,activeSection=this.activeSection;this.canShowSubFormsModulesDialog=!1,this.canRemoveSection&&this.$emit("removeSection",activeSection,activeSectionIndex)},addSubForm:function(){var _this=this;this.$refs["subFormModules"].validate((function(valid){if(valid){var subFormModule=_this.subFormModule,formId=_this.formId,moduleName=subFormModule.selectedModuleName,url="v2/forms/addSubForm",data={moduleName:moduleName,form:{displayName:"".concat(moduleName," ").concat(formId)},parentFormId:formId};_this.$set(_this,"isSaving",!0);var promise=_this.$http.post(url,data).then((function(_ref){var _ref$data=_ref.data,message=_ref$data.message,responseCode=_ref$data.responseCode,_ref$data$result=_ref$data.result,result=void 0===_ref$data$result?{}:_ref$data$result;if(0!==responseCode)throw new Error(message);var form=result.form;(0,validation/* isEmpty */.xb)(form)||(_this.$set(_this,"canRemoveSection",!1),_this.$set(_this,"canShowSubFormsModulesDialog",!1),_this.$emit("updateSubFormSection",form))})).catch((function(_ref2){var message=_ref2.message;_this.$message.error(message)}));Promise.all([promise]).finally((function(){_this.$set(_this,"isSaving",!1)}))}}))}}},form_builder_SubFormModulesListvue_type_script_lang_js=SubFormModulesListvue_type_script_lang_js,SubFormModulesList_component=(0,componentNormalizer/* default */.Z)(form_builder_SubFormModulesListvue_type_script_lang_js,SubFormModulesListvue_type_template_id_2631643e_render,SubFormModulesListvue_type_template_id_2631643e_staticRenderFns,!1,null,null,null)
/* harmony default export */,SubFormModulesList=SubFormModulesList_component.exports,WebFormMixin=__webpack_require__(143306),FormBuilderMixin=__webpack_require__(445829),FSubForm=__webpack_require__(808517),FSignaturePad=__webpack_require__(809596),FEmailField=__webpack_require__(212468),FormRulesListvue_type_template_id_2a703a2e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"position-relative"},[_c("portal",{attrs:{to:"builder-btn-portal",slim:""}},[_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none",attrs:{type:"primary"},on:{click:_vm.openFormRuleCreation}},[_vm._v(" "+_vm._s(_vm.addRuleText)+" ")]),_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none",attrs:{type:"primary"},on:{click:_vm.redirect}},[_vm._v(_vm._s(_vm.$t("common._common.done")))])],1)]),_c("div",{staticClass:"container-scroll"},[_c("div",{staticClass:"row setting-Rlayout mT30"},[_c("div",{staticClass:"col-lg-12 col-md-12"},[_c("table",{staticClass:"setting-list-view-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common.roles.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.trigger_field"))+" ")]),_vm.isSubForm?_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("forms.rules.subform_name"))+" ")]):_vm._e(),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.status"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"})])]),_vm.isLoading?_c("tbody",[_c("tr",[_c("td",{staticClass:"text-center",attrs:{colspan:"100%"}},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1)])]):_vm.$validation.isEmpty(_vm.formRuleList)?_c("tbody",[_c("tr",{staticClass:"tablerow"},[_c("td",{staticClass:"text-center",staticStyle:{"padding-top":"18px","padding-bottom":"18px"},attrs:{colspan:"100%"}},[_vm._v(" "+_vm._s(_vm.$t("forms.rules.forms_empty"))+" ")])])]):_c("tbody",_vm._l(_vm.formRuleList,(function(rule,index){return _c("tr",{key:index,staticClass:"tablerow"},[_c("td",{staticClass:"text-capitalize",staticStyle:{width:"25%"}},[_vm._v(" "+_vm._s(rule.name)+" ")]),_c("td",{staticStyle:{width:"25%"}},[_vm._v(" "+_vm._s(rule.description?rule.description:"---")+" ")]),_c("td",{staticClass:"text-capitalize",staticStyle:{width:"20%"}},[_vm._v(" "+_vm._s(_vm.getFieldsDisplayname(rule.triggerFields))+" ")]),_vm.isSubForm?_c("td",{staticClass:"text-capitalize",staticStyle:{width:"20%"}},[_vm._v(" "+_vm._s(_vm.getSubFormName(rule.subFormId))+" ")]):_vm._e(),_c("td",[_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeRuleStatus(rule)}},model:{value:rule.status,callback:function($$v){_vm.$set(rule,"status",$$v)},expression:"rule.status"}})],1),_c("td",{staticClass:"pR0",staticStyle:{width:"20%"}},[_c("div",{staticClass:"text-left actions text-center mL20",staticStyle:{"margin-top":"-3px"}},[_c("i",{staticClass:"el-icon-edit pointer",on:{click:function($event){return _vm.editFormRuleCreation(rule)}}}),_vm._v("    "),_c("i",{staticClass:"el-icon-delete pointer",on:{click:function($event){return _vm.showConfirmDelete(rule)}}})])])])})),0)])])])]),_vm.showFormRule?_c("NewRule",{staticClass:"mB20",attrs:{isSubForm:_vm.isSubForm,visibility:_vm.showFormRule,selectedFormObj:_vm.selectedForm,formId:_vm.formId,isNew:_vm.isNew,formRuleId:_vm.formRuleId,isUpdateForm:_vm.isUpdateForm},on:{"update:visibility":function($event){_vm.showFormRule=$event},"update:selectedFormObj":function($event){_vm.selectedForm=$event},"update:selected-form-obj":function($event){_vm.selectedForm=$event},updateTitle:function(value){return _vm.ruleTitle=value},saved:_vm.getFormRulesList}}):_vm._e()],1)},FormRulesListvue_type_template_id_2a703a2e_staticRenderFns=[],NewRulevue_type_template_id_1ee8f446_render=(__webpack_require__(506203),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,fullscreen:!0,"append-to-body":!0,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog50 setup-dialog","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_c("div",{staticClass:"section-header",attrs:{id:"policy-header"}},[_vm._v(" "+_vm._s(_vm.isNew?"New Rule":"Edit "+_vm.ruleTitle)+" ")])])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-form",{ref:"slaPolicy-form",attrs:{model:_vm.formRuleContext,rules:_vm.rules,"label-width":"180px","label-position":"top"}},[_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"name",label:"Rule Name"}},[_c("el-input",{staticClass:"fc-input-full-border2",on:{change:function(name){return _vm.$emit("updateTitle",name)}},model:{value:_vm.formRuleContext.name,callback:function($$v){_vm.$set(_vm.formRuleContext,"name",$$v)},expression:"formRuleContext.name"}})],1)],1)],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:24}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"description",label:_vm.$t("space.sites.site_description")}},[_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:_vm.$t("setup.setupLabel.add_a_decs"),resize:"none"},model:{value:_vm.formRuleContext.description,callback:function($$v){_vm.$set(_vm.formRuleContext,"description",$$v)},expression:"formRuleContext.description"}})],1)],1)],1),_c("p",{staticClass:"fc-modal-sub-title"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.execute_on"))+" ")]),_c("p",{staticClass:"small-description-txt mB10"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.notify_rule_executed"))+" ")]),_c("el-row",{staticClass:"mb10"},[_c("el-col",{attrs:{span:14}},[_c("el-form-item",{staticClass:"mb10",attrs:{prop:"executeType",label:_vm.$t("forms.form_rule.execute")}},[_c("el-radio-group",{attrs:{disabled:_vm.isUpdateForm},model:{value:_vm.formRuleContext.executeType,callback:function($$v){_vm.$set(_vm.formRuleContext,"executeType",$$v)},expression:"formRuleContext.executeType"}},_vm._l(_vm.executeOptions,(function(value,label){return _c("el-radio",{key:value,staticClass:"fc-radio-btn",attrs:{label:value}},[_vm._v(" "+_vm._s(label)+" ")])})),1)],1)],1)],1),_c("el-row",{staticClass:"mb10"},[_c("el-col",{attrs:{span:14}},[_c("el-form-item",{staticClass:"mb10",attrs:{prop:"triggerType",label:"Trigger Type"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{disabled:!_vm.isNew,placeholder:"On Field Update",filterable:""},model:{value:_vm.formRuleContext.triggerType,callback:function($$v){_vm.$set(_vm.formRuleContext,"triggerType",$$v)},expression:"formRuleContext.triggerType"}},_vm._l(_vm.triggerTypeList,(function(type){return _c("el-option",{key:type.value,attrs:{label:type.label,value:type.value}})})),1)],1)],1)],1),_vm.canShowSubformField?_c("el-row",[_c("el-col",{attrs:{span:14}},[_c("el-form-item",{staticClass:"mB10",attrs:{label:"Subform"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100 fc-tag",attrs:{disabled:!_vm.isNew,placeholder:"Select a sub form",filterable:"","collapse-tags":""},model:{value:_vm.formRuleContext.subFormId,callback:function($$v){_vm.$set(_vm.formRuleContext,"subFormId",$$v)},expression:"formRuleContext.subFormId"}},_vm._l(_vm.subForms,(function(forms){return _c("el-option",{key:forms.id,attrs:{label:(forms||{}).displayName,value:(forms||{}).id}})})),1)],1)],1)],1):_vm._e(),2===_vm.formRuleContext.triggerType?_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:14}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"fieldId",label:"Trigger Field"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100 fc-tag",attrs:{disabled:!_vm.isNew,placeholder:"Select the field",filterable:"",multiple:"","collapse-tags":""},model:{value:_vm.formRuleContext.fieldIds,callback:function($$v){_vm.$set(_vm.formRuleContext,"fieldIds",$$v)},expression:"formRuleContext.fieldIds"}},_vm._l(_vm.triggerFieldsList,(function(group){return _c("el-option-group",{key:group.label,attrs:{label:group.label}},_vm._l(group.options,(function(field){return _c("el-option",{key:field.id,attrs:{label:(field||{}).displayName,value:(field||{}).id}})})),1)})),1)],1)],1)],1):_vm._e(),_c("el-row",{staticClass:"mT30"},[_c("el-col",{attrs:{span:24}},[_c("div",[_c("label",{staticClass:"fc-modal-sub-title"},[_vm._v(_vm._s(_vm.$t("forms.rules.criteria")))]),_c("div",{staticClass:"fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("forms.rules.specify_criteria"))+" ")])]),_c("CriteriaBuilder",{attrs:{moduleName:_vm.module},model:{value:_vm.formRuleContext.criteria,callback:function($$v){_vm.$set(_vm.formRuleContext,"criteria",$$v)},expression:"formRuleContext.criteria"}})],1)],1),_vm.isSubFormsEmpty?_vm._e():_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",[_c("label",{staticClass:"fc-modal-sub-title"},[_vm._v(_vm._s(_vm.$t("forms.rules.subform_criteria")))]),_c("div",{staticClass:"fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("forms.rules.specify_subform_criteria"))+" ")])]),_c("CriteriaBuilder",{attrs:{moduleName:_vm.$getProperty(_vm.selectedSubForm,"module.name")},model:{value:_vm.formRuleContext.subFormCriteria,callback:function($$v){_vm.$set(_vm.formRuleContext,"subFormCriteria",$$v)},expression:"formRuleContext.subFormCriteria"}})],1)],1)],1),_c("div",[_c("p",{staticClass:"subHeading-pink-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.approvalprocess.action"))+" ")]),_c("p",{staticClass:"small-description-txt"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.set_corresponding_rule"))+" ")]),_vm.isSubFormsEmpty?_c("ActionsConfiguredHelper",{attrs:{name:_vm.$t("forms.rules.show_hide_fields"),description:_vm.$t("forms.rules.specify_show_hide"),actions:_vm.actions,type:"SHOW_HIDE",reset:function(){return _vm.reset("showHide")},configureAction:function(){return _vm.showConfigure("showHide")}}}):_vm._e(),_c("ActionsConfiguredHelper",{attrs:{name:_vm.$t("forms.rules.enable_disable_field"),description:_vm.$t("forms.rules.specify_enable_disable"),actions:_vm.actions,type:"ENABLE_DISABLE",reset:function(){return _vm.reset("enableDisable")},configureAction:function(){return _vm.showConfigure("enableDisable")}}}),_vm.isSubFormsEmpty?_c("ActionsConfiguredHelper",{attrs:{name:_vm.$t("forms.rules.show_hide_section"),description:_vm.$t("forms.rules.specify_show_hide_section"),actions:_vm.actions,type:"SHOW_HIDE_SECTION",reset:function(){return _vm.reset("showHideSection")},configureAction:function(){return _vm.showConfigure("showHideSection")}}}):_vm._e(),_c("ActionsConfiguredHelper",{attrs:{name:_vm.$t("forms.rules.set_remove_mandatory"),description:_vm.$t("forms.rules.specify_mandatory"),actions:_vm.actions,type:"SET_MANDATORY",reset:function(){return _vm.reset("setRemoveMandatory")},configureAction:function(){return _vm.showConfigure("setRemoveMandatory")}}}),_c("ActionsConfiguredHelper",{attrs:{name:_vm.$t("forms.rules.set_value"),description:_vm.$t("forms.rules.specify_set_value"),actions:_vm.actions,type:"SET_VALUE",reset:function(){return _vm.reset("set")},configureAction:function(){return _vm.showConfigure("set")}}}),_c("ActionsConfiguredHelper",{attrs:{name:_vm.$t("setup.setup.set_picklist_filters"),description:_vm.$t("forms.rules.specify_picklist_filter"),actions:_vm.actions,type:"SET_FILTER",reset:function(){return _vm.reset("setFilters")},configureAction:function(){return _vm.showConfigure("setFilters")}}}),_vm.showWorkflow?_c("ActionsConfiguredHelper",{attrs:{name:_vm.$t("forms.rules.execute_script"),description:_vm.$t("forms.rules.specify_execute_script"),actions:_vm.actions,type:"EXECUTE_SCRIPT",reset:function(){return _vm.reset("script")},configureAction:function(){return _vm.showConfigure("script")}}}):_vm._e()],1),_vm.dialogVisible?_c("NewAction",{staticClass:"mB20 form-rule-actions-comp",attrs:{selectedFormObj:_vm.selectedSubForm||_vm.selectedForm,selectedActionType:_vm.selectedActionType,action:_vm.actions,dialogVisible:_vm.dialogVisible,handleActionSave:_vm.handleActionSave,handleClose:_vm.handleClose,isSubForm:_vm.isSubForm,parentForm:_vm.selectedForm},on:{"update:action":function($event){_vm.actions=$event},"update:dialogVisible":function($event){_vm.dialogVisible=$event},"update:dialog-visible":function($event){_vm.dialogVisible=$event}}}):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("forms.rules.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.saving?"Saving...":"SAVE"))])],1)])],1)}),NewRulevue_type_template_id_1ee8f446_staticRenderFns=[],clone=(__webpack_require__(300268),__webpack_require__(212826),__webpack_require__(766678)),clone_default=__webpack_require__.n(clone),NewActionvue_type_template_id_7befa751_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.dialogVisible?_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Actions",visible:_vm.dialogVisible,width:"55%","before-close":_vm.handleClose,"append-to-body":!0},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},["script"!==_vm.selectedActionType?_c("el-form",{ref:"ruleAction-form",attrs:{"label-width":"180px","label-position":"top"}},[_vm.$validation.isEmpty(_vm.selectedActionType)||"set"!==_vm.selectedActionType?_vm._e():_c("div",_vm._l(_vm.actionList[5].formRuleActionFieldsContext,(function(formRuleAction,index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB10 visibility-visible-actions pT10 pB10 pL10"},[_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(_vm._s(index+1))])])]),_c("el-col",{attrs:{span:7}},[_c("el-select",{staticClass:"fc-input-full-border2 width85",attrs:{placeholder:"Please select the fields",filterable:"",collapse:""},on:{change:function($event){return _vm.setSelectedField(formRuleAction,formRuleAction.formFieldId)}},model:{value:formRuleAction.formFieldId,callback:function($$v){_vm.$set(formRuleAction,"formFieldId",$$v)},expression:"formRuleAction.formFieldId"}},_vm._l(_vm.selectedFieldsList,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1),_c("el-col",{attrs:{span:5}},[_vm.$validation.isEmpty(formRuleAction.formFieldId)?_vm._e():_c("el-select",{staticClass:"fc-input-full-border2 width80",on:{change:function($event){return _vm.toggleLookupFields(formRuleAction.formFieldId,_vm.showLookupForSetField[formRuleAction.formFieldId])}},model:{value:_vm.showLookupForSetField[formRuleAction.formFieldId],callback:function($$v){_vm.$set(_vm.showLookupForSetField,formRuleAction.formFieldId,$$v)},expression:"showLookupForSetField[formRuleAction.formFieldId]"}},_vm._l(_vm.valueTypes,(function(valueType,idx){return _c("el-option",{key:idx,attrs:{label:valueType,value:idx}})})),1)],1),_c("el-col",{attrs:{span:6}},[_vm.$validation.isEmpty(formRuleAction.fieldObj)||_vm.$validation.isEmpty(_vm.showLookupForSetField[formRuleAction.formFieldId])||"1"!==_vm.showLookupForSetField[formRuleAction.formFieldId]||!_vm.canShowPlaceholderComponent(formRuleAction)?!_vm.$validation.isEmpty(formRuleAction.fieldObj)&&_vm.canShowPlaceholderComponent(formRuleAction)?_c("ValueChooser",{attrs:{fieldObj:formRuleAction.fieldObj,fieldName:formRuleAction.fieldObj.name,displayTypeEnum:formRuleAction.fieldObj.displayTypeEnum,dataTypeEnum:_vm.$validation.isEmpty(formRuleAction.fieldObj.field)||_vm.$validation.isEmpty(formRuleAction.fieldObj.field.dataTypeEnum)?"LOOKUP":formRuleAction.fieldObj.field.dataTypeEnum,value:formRuleAction.actionMeta},on:{"update:value":function($event){return _vm.$set(formRuleAction,"actionMeta",$event)}}}):_vm._e():_c("PlaceHolderComponent",{attrs:{formId:_vm.selectedFormObj.id,isSubForm:_vm.isSubForm,selectedFormObj:_vm.selectedFormObj,parentForm:_vm.parentForm},model:{value:formRuleAction.actionMeta,callback:function($$v){_vm.$set(formRuleAction,"actionMeta",$$v)},expression:"formRuleAction.actionMeta"}})],1),_c("el-col",{staticClass:"visibility-hide-actions",staticStyle:{"padding-top":"9px","padding-left":"10px","padding-right":"0"},attrs:{span:2}},[_vm.$validation.isEmpty(formRuleAction.actionMeta)?_vm._e():_c("img",{staticClass:"delete-icon pointer",staticStyle:{height:"17px",width:"17px","margin-right":"7px"},attrs:{src:__webpack_require__(353654)},on:{click:function($event){return _vm.addRow(5)}}}),!(_vm.actionList[5].formRuleActionFieldsContext.length>1&&1!==_vm.actionList[5].formRuleActionFieldsContext)||_vm.$validation.isEmpty(formRuleAction.actionMeta)&&_vm.$validation.isEmpty(formRuleAction.fieldObj)?_vm._e():_c("img",{staticClass:"delete-icon pointer",staticStyle:{height:"17px",width:"17px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(index,5)}}})])],1)],1)})),0),_vm.$validation.isEmpty(_vm.selectedActionType)||"setFilters"!==_vm.selectedActionType?_vm.$validation.isEmpty(_vm.selectedActionType)||_vm.$validation.isEmpty(_vm.selectedFormObj)||_vm.$validation.isEmpty(_vm.selectedFormObj.fields)||"showHide"!==_vm.selectedActionType?_vm.$validation.isEmpty(_vm.selectedActionType)||_vm.$validation.isEmpty(_vm.selectedFormObj)||_vm.$validation.isEmpty(_vm.selectedFormObj.fields)||"enableDisable"!==_vm.selectedActionType?_vm.$validation.isEmpty(_vm.selectedActionType)||_vm.$validation.isEmpty(_vm.selectedFormObj)||_vm.$validation.isEmpty(_vm.selectedFormObj.sections)||"showHideSection"!==_vm.selectedActionType?_vm.$validation.isEmpty(_vm.selectedActionType)||_vm.$validation.isEmpty(_vm.selectedFormObj)||_vm.$validation.isEmpty(_vm.selectedFormObj.fields)||"setRemoveMandatory"!==_vm.selectedActionType?_vm._e():_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Set Fields Mandatory"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,11,_vm.actionModelValues.setMandatoryAction)}},model:{value:_vm.actionModelValues.setMandatoryAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"setMandatoryAction",$$v)},expression:"actionModelValues.setMandatoryAction"}},_vm._l(_vm.selectedFormObj.fields,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1)],1),_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Remove Fields Mandatory"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,12,_vm.actionModelValues.removeMandatoryAction)}},model:{value:_vm.actionModelValues.removeMandatoryAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"removeMandatoryAction",$$v)},expression:"actionModelValues.removeMandatoryAction"}},_vm._l(_vm.selectedFormObj.fields,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1)],1)],1):_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Show Section"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,9,_vm.actionModelValues.showSectionAction,!0)}},model:{value:_vm.actionModelValues.showSectionAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"showSectionAction",$$v)},expression:"actionModelValues.showSectionAction"}},_vm._l(_vm.selectedFormObj.sections,(function(section){return _c("el-option",{key:section.id,attrs:{label:section.name,value:section.id}})})),1)],1)],1),_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Hide Section"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,10,_vm.actionModelValues.hidSectionAction,!0)}},model:{value:_vm.actionModelValues.hidSectionAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"hidSectionAction",$$v)},expression:"actionModelValues.hidSectionAction"}},_vm._l(_vm.selectedFormObj.sections,(function(section){return _c("el-option",{key:section.id,attrs:{label:section.name,value:section.id}})})),1)],1)],1)],1):_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Enable Fields"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,3,_vm.actionModelValues.enableAction)}},model:{value:_vm.actionModelValues.enableAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"enableAction",$$v)},expression:"actionModelValues.enableAction"}},_vm._l(_vm.selectedFormObj.fields,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1)],1),_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Disble Fields"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,4,_vm.actionModelValues.disableAction)}},model:{value:_vm.actionModelValues.disableAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"disableAction",$$v)},expression:"actionModelValues.disableAction"}},_vm._l(_vm.selectedFormObj.fields,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1)],1)],1):_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Show Fields"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,1,_vm.actionModelValues.showAction)}},model:{value:_vm.actionModelValues.showAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"showAction",$$v)},expression:"actionModelValues.showAction"}},_vm._l(_vm.selectedFormObj.fields,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1)],1),_c("el-col",{attrs:{span:20}},[_c("el-form-item",{staticClass:"mB10",attrs:{prop:"type",label:"Hide Fields"}},[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{placeholder:"Please select the fields",filterable:"",multiple:"",collapse:""},on:{change:function($event){return _vm.setSelectedFormFieldObj(_vm.actionList,2,_vm.actionModelValues.hidAction)}},model:{value:_vm.actionModelValues.hidAction,callback:function($$v){_vm.$set(_vm.actionModelValues,"hidAction",$$v)},expression:"actionModelValues.hidAction"}},_vm._l(_vm.selectedFormObj.fields,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1)],1)],1):_c("div",[_vm.$validation.isEmpty(_vm.selectedFieldsList)?_c("div",{staticStyle:{position:"absolute",left:"40%",top:"42%"}},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.no_picklist_fields_available"))+" ")]):_c("div",_vm._l(_vm.actionList[6].formRuleActionFieldsContext,(function(formRuleAction,index){return _c("div",{key:index},[_c("el-row",{staticClass:"mB10 visibility-visible-actions pT10 pB10 pL10"},[_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"criteria-alphabet-block pT6"},[_c("div",{staticClass:"alphabet-circle"},[_vm._v(_vm._s(index+1))])])]),_c("el-col",{attrs:{span:9}},[_c("el-select",{staticClass:"fc-input-full-border2 width90",attrs:{placeholder:"Please select the fields",filterable:"",collapse:""},on:{change:function($event){return _vm.setSelectedField(formRuleAction,formRuleAction.formFieldId)}},model:{value:formRuleAction.formFieldId,callback:function($$v){_vm.$set(formRuleAction,"formFieldId",$$v)},expression:"formRuleAction.formFieldId"}},_vm._l(_vm.selectedFieldsList,(function(field){return _c("el-option",{key:field.id,attrs:{label:field.displayName,value:field.id}})})),1)],1),_vm.$validation.isEmpty(formRuleAction.fieldObj)||_vm.$validation.isEmpty(formRuleAction.fieldObj.field)?_vm._e():_c("el-col",{attrs:{span:10}},[_c("el-select",{staticClass:"fc-input-full-border2 width80",attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"Select Hide Options"},model:{value:formRuleAction.values,callback:function($$v){_vm.$set(formRuleAction,"values",$$v)},expression:"formRuleAction.values"}},_vm._l(formRuleAction.fieldObj.field.enumMap,(function(enumValue,index){return _c("el-option",{key:index,attrs:{label:enumValue,value:parseInt(index)}})})),1)],1),_c("el-col",{staticClass:"visibility-hide-actions",staticStyle:{"padding-top":"9px","padding-left":"10px","padding-right":"0"},attrs:{span:3}},[_vm.$validation.isEmpty(formRuleAction.values)?_vm._e():_c("img",{staticClass:"delete-icon pointer",staticStyle:{height:"18px",width:"18px","margin-left":"32px"},attrs:{src:__webpack_require__(353654)},on:{click:function($event){return _vm.addRow(6)}}}),!(_vm.actionList[6].formRuleActionFieldsContext.length>1&&1!==_vm.actionList[6].formRuleActionFieldsContext)||_vm.$validation.isEmpty(formRuleAction.values)&&_vm.$validation.isEmpty(formRuleAction.fieldObj)?_vm._e():_c("img",{staticClass:"delete-icon pointer",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRow(index,6)}}})])],1)],1)})),0)])],1):_c("div",[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("code-mirror",{attrs:{codeeditor:!0},model:{value:_vm.action[8].tempWorkflow,callback:function($$v){_vm.$set(_vm.action[8],"tempWorkflow",$$v)},expression:"action[8].tempWorkflow"}})],1)])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.handleClose}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.handleActionSave}},[_vm._v(_vm._s("script"!==_vm.selectedActionType?"Add Fields":"CONFIGURE"))])],1)]):_vm._e()},NewActionvue_type_template_id_7befa751_scoped_true_staticRenderFns=[],FormRulePlaceholdersvue_type_template_id_0a158d30_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-cascader",{staticClass:"fc-input-full-border2 input-with-select flex-grow",attrs:{options:_vm.fieldOptions,props:{expandTrigger:"hover",value:"name",label:"displayName",children:"fields"},"popper-class":"sla-duration-field"},on:{change:function($event){return _vm.getPlaceholderFromField()}},model:{value:_vm.fieldPlaceHolder,callback:function($$v){_vm.fieldPlaceHolder=$$v},expression:"fieldPlaceHolder"}})},FormRulePlaceholdersvue_type_template_id_0a158d30_staticRenderFns=[],cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),regex=/[\${}]+/gm,FormRulePlaceholdersvue_type_script_lang_js={props:["value","formId","isSubForm","selectedFormObj","parentForm"],data:function(){return{fieldPlaceHolder:null,fieldOptions:[]}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.init();case 1:case"end":return _context.stop()}}),_callee)})))()},computed:{moduleName:function(){return this.$route.params.moduleName},subFormModuleName:function(){return this.$getProperty(this,"selectedFormObj.module.name")}},methods:{init:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref,isSubForm,selectedFormObj,parentForm,subForm,form;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_ref=_this2||{},isSubForm=_ref.isSubForm,selectedFormObj=_ref.selectedFormObj,parentForm=_ref.parentForm,!isSubForm){_context2.next=8;break}return subForm=_this2.loadPlaceholderFieldOptions(selectedFormObj,_this2.subFormModuleName),form=_this2.loadPlaceholderFieldOptions(parentForm,_this2.moduleName),_context2.next=6,Promise.all([subForm,form]);case 6:_context2.next=10;break;case 8:return _context2.next=10,_this2.loadPlaceholderFieldOptions(selectedFormObj,_this2.moduleName);case 10:_this2.fieldPlaceHolder=_this2.getFieldFromPlaceholder();case 11:case"end":return _context2.stop()}}),_callee2)})))()},loadPlaceholderFieldOptions:function(form,moduleName){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _ref2,isSubForm,_ref3,formId,_yield$API$get,data,error,_ref4,placeholders,_ref5,fields,moduleFields,_ref7,name,displayName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _ref2=_this3||{},isSubForm=_ref2.isSubForm,_ref3=form||{},formId=_ref3.id,_context3.next=4,api/* API */.bl.get("v3/placeholders/".concat(moduleName,"?formId=").concat(formId));case 4:_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_ref4=data||{},placeholders=_ref4.placeholders,_ref5=placeholders||{},fields=_ref5.fields,moduleFields=_ref5.moduleFields,(0,validation/* isEmpty */.xb)(fields)||((0,validation/* isEmpty */.xb)(moduleFields)||Object.keys(moduleFields).forEach((function(fieldName){var lookupField=fields.find((function(fld){return fld.module===fieldName})),moduleLookupFields=moduleFields[fieldName];
//Handling for SiteId --> Changing displayType as 'NUMBER'
moduleLookupFields=moduleLookupFields.map((function(field){var _ref6=field||{},name=_ref6.name;return"siteId"===name?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{displayType:"NUMBER",dataType:"NUMBER",primaryField:null}):field})),lookupField.fields=moduleLookupFields})),isSubForm?(_ref7=form||{},name=_ref7.name,displayName=_ref7.displayName,_this3.fieldOptions=[].concat((0,toConsumableArray/* default */.Z)(_this3.fieldOptions),[{name:name,displayName:displayName,fields:fields}])):_this3.fieldOptions=fields));case 8:case"end":return _context3.stop()}}),_callee3)})))()},getFieldFromPlaceholder:function(){var value=this.value,isSubForm=this.isSubForm,parentForm=this.parentForm,selectedFormObj=this.selectedFormObj,fieldOptions=this.fieldOptions;if(!(0,validation/* isEmpty */.xb)(value)){var placeholderArray=value.replace(regex,"").split("."),fieldsArray=[];placeholderArray=placeholderArray.filter((function(_,i){return 0!==i}));var modifiedPlaceholderArray=cloneDeep_default()(placeholderArray),currentFormName=(selectedFormObj||{}).name,isSubFormWithinSubForm=placeholderArray[0]===currentFormName;
// set field options to appropriate fields array
// based on the value if it is a subform
if(isSubForm)if(isSubFormWithinSubForm){var currentOption=fieldOptions.find((function(option){return option.name===currentFormName}));fieldOptions=(currentOption||{}).fields,
// if subform and the placeholder is from subform
// then extra form name will be there, have to remove it
modifiedPlaceholderArray=modifiedPlaceholderArray.filter((function(_,i){return 0!==i}))}else{currentFormName=(parentForm||{}).name;var _currentOption=fieldOptions.find((function(option){return option.name===currentFormName}));fieldOptions=(_currentOption||{}).fields}var _modifiedPlaceholderA=modifiedPlaceholderArray,_modifiedPlaceholderA2=(0,slicedToArray/* default */.Z)(_modifiedPlaceholderA,2),fieldName=_modifiedPlaceholderA2[0],primaryField=_modifiedPlaceholderA2[1],field=(0,validation/* isEmpty */.xb)(fieldName)?null:fieldOptions.find((function(f){return f.name===fieldName}));if(!(0,validation/* isEmpty */.xb)(field))if(primaryField){var _field$fields,lookupField=(null===(_field$fields=field.fields)||void 0===_field$fields?void 0:_field$fields.find((function(f){return f.name===primaryField})))||null;
// Checking if primary field is a lookup field
fieldsArray=(0,validation/* isEmpty */.xb)(lookupField)?[fieldName]:[fieldName,primaryField]}else fieldsArray=[fieldName];
// if rule is for subform, then form name should be
// added to the cascade array
if(isSubForm){var _ref8=parentForm||{},parentFormName=_ref8.name,_ref9=selectedFormObj||{},subFormName=_ref9.name,formName=isSubFormWithinSubForm?subFormName:parentFormName;placeholderArray=[formName].concat((0,toConsumableArray/* default */.Z)(fieldsArray))}else placeholderArray=fieldsArray;return placeholderArray}return null},getPlaceholderFromField:function(){var fieldPlaceHolder=this.fieldPlaceHolder,isSubForm=this.isSubForm,selectedFormObj=this.selectedFormObj,moduleName=this.moduleName,placeholderString=null;if(!(0,validation/* isEmpty */.xb)(fieldPlaceHolder)){var _fieldPlaceHolder=(0,slicedToArray/* default */.Z)(fieldPlaceHolder,2),fieldName=_fieldPlaceHolder[0],lookupFieldName=_fieldPlaceHolder[1],_this$fieldOptions$fi=this.fieldOptions.find((function(f){return f.name===fieldName})),primaryField=_this$fieldOptions$fi.primaryField,fields=_this$fieldOptions$fi.fields;
// have to find the first option from cascade can be a field
// or can be a form based on if rule is for subform
if((0,validation/* isEmpty */.xb)(lookupFieldName))!(0,validation/* isEmpty */.xb)(primaryField)&&fieldPlaceHolder.push(primaryField);else{var _fields$find=fields.find((function(f){return f.name===lookupFieldName})),lookupPrimaryField=_fields$find.primaryField;!(0,validation/* isEmpty */.xb)(lookupPrimaryField)&&fieldPlaceHolder.push(lookupPrimaryField)}var currentModuleName=moduleName,placeholders=cloneDeep_default()(fieldPlaceHolder);if(isSubForm){var currentForm=fieldPlaceHolder[0],isSubFormField=currentForm===this.$getProperty(selectedFormObj,"name");
// if placeholders are for subform then form name,
// along with module name should be added
isSubFormField||(placeholders=placeholders.splice(1,1))}placeholders=(0,toConsumableArray/* default */.Z)(placeholders),placeholderString="${".concat(currentModuleName,".").concat(placeholders.join("."),"}")}this.$emit("input",placeholderString)}}},form_rules_FormRulePlaceholdersvue_type_script_lang_js=FormRulePlaceholdersvue_type_script_lang_js,FormRulePlaceholders_component=(0,componentNormalizer/* default */.Z)(form_rules_FormRulePlaceholdersvue_type_script_lang_js,FormRulePlaceholdersvue_type_template_id_0a158d30_render,FormRulePlaceholdersvue_type_template_id_0a158d30_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormRulePlaceholders=FormRulePlaceholders_component.exports,ValueChooservue_type_template_id_a51ce562_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.$validation.isEmpty(_vm.$getProperty(_vm.fieldObjectData,_vm.fieldName))?_vm._e():_c("div",["select"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",["BOOLEAN"===_vm.dataTypeEnum?_c("el-select",{staticClass:"fc-input-full-border2 width80",attrs:{"collapse-tags":"",clearable:"",filterable:"",placeholder:"Select Value"},on:{change:function($event){return _vm.onFieldInputChange(_vm.stringValue)}},model:{value:_vm.stringValue,callback:function($$v){_vm.stringValue=$$v},expression:"stringValue"}},_vm._l(_vm.fieldObjectData[_vm.fieldName].options,(function(label,value){return _c("el-option",{key:"option-"+value,attrs:{label:label,value:value}})})),1):"ENUM"===_vm.dataTypeEnum?_c("el-select",{staticClass:"fc-input-full-border2 width80",attrs:{"collapse-tags":"",filterable:"",placeholder:"Select Value"},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}},_vm._l(_vm.fieldObjectData[_vm.fieldName].options,(function(enumValue,index){return _c("el-option",{key:index,attrs:{label:enumValue,value:parseInt(index)}})})),1):_c("el-select",{staticClass:"fc-input-full-border2 width80",attrs:{"collapse-tags":"",filterable:"",placeholder:"Select Value"},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}},_vm._l(_vm.fieldObjectData[_vm.fieldName].options,(function(record,value){return _c("el-option",{key:"option-"+value,attrs:{label:record.label,value:record.value}})})),1)],1):"currency"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("FCurrencyField",{attrs:{field:_vm.fieldObj,disabled:_vm.fieldObj.isDisabled},on:{value:_vm.updateModelValue},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}})],1):"multi_currency"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("FNewCurrencyField",{attrs:{field:_vm.fieldObj,disabled:_vm.fieldObj.isDisabled,hideCurrency:!0},on:{value:_vm.updateModelValue},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}})],1):"datePicker"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("el-date-picker",{staticClass:"fc-input-full-border-select2 width100 date-editor",staticStyle:{width:"290px"},attrs:{type:"DATETIME"===_vm.displayTypeEnum?"datetime":"date","value-format":"timestamp"},on:{change:function($event){return _vm.onFieldInputChange(_vm.stringValue)}},model:{value:_vm.stringValue,callback:function($$v){_vm.stringValue=$$v},expression:"stringValue"}})],1):"dateRangePicker"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("el-date-picker",{staticClass:"fc-input-full-border-select2 width100 date-editor",staticStyle:{width:"290px"},attrs:{type:"daterange","value-format":"timestamp"},on:{change:function($event){return _vm.onFieldInputChange(_vm.dateValue)}},model:{value:_vm.dateValue,callback:function($$v){_vm.dateValue=$$v},expression:"dateValue"}})],1):"TIME"===_vm.displayTypeEnum?_c("div",[_c("FTimePicker",{key:""+_vm.fieldObj.id,attrs:{field:_vm.fieldObj,disabled:!1},on:{value:_vm.updateModelValue},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}})],1):"durationPicker"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("f-duration-field",{key:_vm.fieldObj.id,attrs:{field:_vm.fieldObj},on:{updateDurationValue:_vm.updateDurationValue}})],1):"GEO_LOCATION"===_vm.displayTypeEnum?_c("div",[_c("FLocationField",{key:""+_vm.fieldObj.id,attrs:{field:_vm.fieldObj,disabled:!1,clearable:!0},on:{value:_vm.updateModelValue},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}})],1):"siteField"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("f-site-field",{staticClass:"fc-input-full-border2 width80",attrs:{model:_vm.modelValue,canDisable:!1,isClearable:!0},on:{"update:model":function($event){_vm.modelValue=$event}}})],1):"lookup"!==_vm.fieldObjectData[_vm.fieldName].displayType||_vm.fieldObjectData[_vm.fieldName].specialType?"string"===_vm.fieldObjectData[_vm.fieldName].displayType?[_c("el-input",{staticClass:"fc-input-full-border2 width80",attrs:{placeholder:"Enter the value",type:"text",clearable:""},on:{input:function($event){return _vm.onFieldInputChange(_vm.stringValue)}},model:{value:_vm.stringValue,callback:function($$v){_vm.stringValue=$$v},expression:"stringValue"}})]:"teamStaffAssignmentPicker"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("div",{staticClass:"fc-border-input-div2 width80"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.teamStaff)))]),_vm._m(0)]),_c("f-assignment",{attrs:{model:_vm.teamStaff,viewtype:"form"},on:{value:_vm.updateModelValue}})],1):"number"===_vm.fieldObjectData[_vm.fieldName].displayType?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2 width80",attrs:{type:"text",placeholder:"Enter the value",clearable:""},model:{value:_vm.modelValue,callback:function($$v){_vm.modelValue=$$v},expression:"modelValue"}})],1):["spaceAssetPicker"].includes(_vm.fieldObjectData[_vm.fieldName].displayType)?_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border search-select-comp2 down-arrow-remove search-border-left fc-tag width100",attrs:{filterable:"",multiple:"","collapse-tags":"",value:_vm.$validation.isEmpty(_vm.modelValue)?[]:[1],disabled:""}},[_c("el-option",{attrs:{label:_vm.spaceAssetFilter,value:1}})],1),_c("i",{staticClass:"el-icon-search serach-icon-picker",on:{click:function($event){return _vm.spaceAssetProps(_vm.fieldObjectData,_vm.fieldName)}}})],1):_vm._e():[_c("FLookupField",{key:""+_vm.fieldObj.id,attrs:{model:_vm.lookupModel.id,field:_vm.fieldObj},on:{recordSelected:_vm.onRecordSelected,showLookupWizard:_vm.showLookupWizard}})]],2),_vm.chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{initialValues:_vm.initialValues,visibility:_vm.chooserVisibility,hideBanner:!0},on:{associate:function($event){return _vm.associateResource($event,_vm.fieldObjectData[_vm.fieldName])},"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e(),_vm.canShowLookupWizard?_c("div",[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.fieldObj},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}})],1):_vm._e()],1)},ValueChooservue_type_template_id_a51ce562_staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("span",{staticStyle:{float:"right","padding-right":"12px"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])}],SpaceAssetMultiChooser=__webpack_require__(673362),picklist=__webpack_require__(961358),ValueChooservue_type_script_lang_js={components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"],SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,FDurationField:FDurationField/* default */.Z,FSiteField:FSiteField/* default */.Z,FAssignment:FAssignment/* default */.Z,FCurrencyField:FCurrencyField/* default */.Z,FLocationField:FLocationField/* default */.Z,FTimePicker:FTimePicker/* default */.Z,FNewCurrencyField:FNewCurrencyField/* default */.Z},created:function(){var _this=this;Promise.all([this.$store.dispatch("loadGroups"),this.$store.dispatch("loadUsers")]).then((function(){_this.setOptions()})).catch((function(){})),this.initData()},props:["fieldObj","value","displayTypeEnum","dataTypeEnum","fieldName"],mixins:[TeamStaffMixin/* default */.Z],data:function(){return{fieldObjectData:{},lookupModel:{id:null,label:null},stringValue:null,dateValue:[],setOptionField:{},canShowLookupWizard:!1,chooserVisibility:!1,duration:{days:0,hours:0},teamStaff:{assignedTo:{id:-1},assignmentGroup:{id:-1}}}},watch:{fieldObj:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||(this.initData(),this.setOptions(),(0,validation/* isEmpty */.xb)(this.value)?this.stringValue=null:this.stringValue=this.value)},setOptionField:{handler:function(newVal){(0,validation/* isEmpty */.xb)(newVal)||(0,validation/* isEmpty */.xb)(newVal.options)||(this.fieldObjectData[this.fieldName].options=newVal.options)},deep:!0}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups}})),{},{spaceAssetFilter:function(){var filters={};return filters},modelValue:{get:function(){return this.value},set:function(val){isNaN(val)||(this.$emit("update:value",val),this.$emit("onValueChange",val))}}}),mounted:function(){this.constructModelValues()},methods:{constructModelValues:function(){(0,validation/* isEmpty */.xb)(this.value)||(["STRING","BOOLEAN"].includes(this.dataTypeEnum)||["DATE","DATETIME"].includes(this.displayTypeEnum)?this.stringValue=this.value:["DATERANGE"].includes(this.displayTypeEnum)?this.dateValue=this.value:["GEO_LOCATION"].includes(this.displayTypeEnum)?this.modelValue=this.value:["DURATION"].includes(this.displayTypeEnum)?(this.modelValue=this.value,this.$set(this.fieldObj,"value",this.value)):"DECIMAL"===this.dataTypeEnum?this.modelValue=this.value:!(0,validation/* isEmpty */.xb)(this.fieldObj.field)&&this.isLookupDropDownField(this.fieldObj.field)?this.lookupModel.id=this.value:"TEAMSTAFFASSIGNMENT"===this.displayTypeEnum?this.teamStaff=this.value:["CURRENCY"].includes(this.displayTypeEnum)||["MULTI_CURRENCY"].includes(this.displayTypeEnum)?this.modelValue=this.value:this.modelValue=parseInt(this.value))},updateDurationValue:function(field,value){isNaN(value)||(this.$emit("update:value",value),this.$emit("onValueChange",value))},setLookupFieldValue:function(props){var lookupModel=this.lookupModel,field=props.field,_ref=field||{},selectedItems=_ref.selectedItems,_selectedItems=(0,slicedToArray/* default */.Z)(selectedItems,1),selectedItem=_selectedItems[0];if(!(0,validation/* isEmpty */.xb)(selectedItem)){var value=selectedItem.value,label=selectedItem.label;this.lookupModel=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},lookupModel),{},{id:value,label:label})}},showLookupWizard:function(field,canShow){this.$set(this,"canShowLookupWizard",canShow)},isLookupDropDownField:function(field){var dataTypeEnum=this.dataTypeEnum,displayTypeEnum=this.displayTypeEnum;if(!(0,validation/* isEmpty */.xb)(field)&&("LOOKUP"===dataTypeEnum||"LOOKUP_SIMPLE"===displayTypeEnum)){var lookupModule=field.lookupModule;if(!(0,validation/* isEmpty */.xb)(lookupModule)){var type=lookupModule.type;return constant/* default */.Z.FIELD_LOOKUP_ENTITY_HASH.includes(type)}}return!1},updateModelValue:function(value){this.$emit("update:value",value),this.$emit("onValueChange",value)},setDateValue:function(value){this.$emit("update:value",value.toString()),this.$emit("onValueChange",value.toString())},onFieldInputChange:function(value){this.$emit("update:value",value),this.$emit("onValueChange",value)},initData:function(){var values,fieldObj=this.fieldObj,displayTypeEnum=this.displayTypeEnum,dataTypeEnum=this.dataTypeEnum;if(!(0,validation/* isEmpty */.xb)(fieldObj)&&!(0,validation/* isEmpty */.xb)(displayTypeEnum)){var field=fieldObj.field,name=fieldObj.name;if((0,validation/* isEmpty */.xb)(field)){var _name=fieldObj.name;(0,utils_field/* isSiteField */.Vn)(fieldObj)?values={displayType:"siteField"}:"TEAMSTAFFASSIGNMENT"===displayTypeEnum&&(values={displayType:"teamStaffAssignmentPicker"}),this.$set(this.fieldObjectData,_name,values)}else{var _ref2=field||{},trueVal=_ref2.trueVal,falseVal=_ref2.falseVal,displayName=_ref2.displayName,lookupModule=_ref2.lookupModule,specialType=_ref2.specialType,enumMap=_ref2.enumMap;if(values={label:"",displayType:"string",value:[]},"DATE"==displayTypeEnum||"DATETIME"==displayTypeEnum)values.displayType="datePicker";else if("DATERANGE"==displayTypeEnum)values.displayType="dateRangePicker";else if("DURATION"==displayTypeEnum)values.displayType="durationPicker";else if("STRING"==dataTypeEnum)values.displayType="string";else if("BOOLEAN"==dataTypeEnum)values.displayType="select",values.type="Boolean",values.options={true:trueVal||"Yes",false:falseVal||"No"},values.value=[];else if("NUMBER"==dataTypeEnum||"DECIMAL"===dataTypeEnum)values.displayType="number";else if("LOOKUP"==dataTypeEnum){if("WOASSETSPACECHOOSER"===displayTypeEnum?values.displayType="spaceAssetPicker":"GEO_LOCATION"===displayTypeEnum?values.displayType="Geo Location":(0,utils_field/* isSiteField */.Vn)(fieldObj)?values.displayType="siteField":this.isLookupDropDownField(field)?values.displayType="lookup":(values.displayType="select",values.options=[]),values.isCustomFieldLookup=(lookupModule||{}).custom||!1,specialType&&"users"===specialType){var userOptions={};this.users.forEach((function(user){userOptions[user.id]=user.name})),values.specialType,values.displayType="select",values.options=userOptions}}else"ENUM"==dataTypeEnum?(values.displayType="select",values.type="enum",values.value=[],values.options=enumMap):"CURRENCY"===displayTypeEnum?values.displayType="currency":"TIME"===displayTypeEnum?values.displayType="time":"MULTI_CURRENCY"===displayTypeEnum&&(values.displayType="multi_currency");values.label=displayName,(["LOOKUP","NUMBER","DECIMAL","ENUM","BOOLEAN","STRING"].includes(dataTypeEnum)||["DATE","DATETIME","DATERANGE","DURATION","CURRENCY","MULTI_CURRENCY"].includes(displayTypeEnum))&&
// Set only allowed field types
this.$set(this.fieldObjectData,name,values)}}},onRecordSelected:function(filter){if((0,validation/* isEmpty */.xb)(filter))(0,validation/* isEmpty */.xb)(filter)&&(this.lookupModel.id=null,this.$emit("update:value",null),this.$emit("onValueChange",null));else{var value=filter.value||"";this.lookupModel.id=value,this.$emit("update:value",value),this.$emit("onValueChange",value)}},spaceAssetProps:function(){this.chooserVisibility=!0},setOption:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var fieldObject,displayTypeEnum,name,lookupModuleName,field,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(fieldObject=_this2.fieldObjectData,displayTypeEnum=_this2.displayTypeEnum,_this2.fieldName,name=_this2.fieldObj.name,Object.keys(fieldObject),"frequency"!==name){_context.next=9;break}fieldObject[key].options=cloneDeep_default()(_this2.$constants.FACILIO_FREQUENCY),fieldObject[key].options["0"]="Once",_context.next=20;break;case 9:if("LOOKUP_SIMPLE"!==displayTypeEnum){_context.next=20;break}if(lookupModuleName=_this2.fieldObj.lookupModuleName,field=_this2.fieldObj,(0,validation/* isEmpty */.xb)(lookupModuleName)){_context.next=20;break}if("siteId"===name||_this2.isLookupDropDownField(field)){_context.next=20;break}return _context.next=16,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:lookupModuleName}});case 16:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this2.$message.error(error.message||"Error Occured"):field.options=options;case 20:return _context.abrupt("return",_this2.fieldObj);case 21:case"end":return _context.stop()}}),_callee)})))()},setOptions:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this3.setOption();case 2:_this3.setOptionField=_context2.sent;case 3:case"end":return _context2.stop()}}),_callee2)})))()}}},form_rules_ValueChooservue_type_script_lang_js=ValueChooservue_type_script_lang_js,ValueChooser_component=(0,componentNormalizer/* default */.Z)(form_rules_ValueChooservue_type_script_lang_js,ValueChooservue_type_template_id_a51ce562_render,ValueChooservue_type_template_id_a51ce562_staticRenderFns,!1,null,null,null)
/* harmony default export */,ValueChooser=ValueChooser_component.exports,CodeMirror=__webpack_require__(919324),excludePlaceHolderHash=["GEO_LOCATION"],NewActionvue_type_script_lang_js={name:"NewAction",props:["selectedFormObj","selectedActionType","action","handleClose","handleActionSave","dialogVisible","isSubForm","parentForm"],components:{ValueChooser:ValueChooser,CodeMirror:CodeMirror/* default */.Z,PlaceHolderComponent:FormRulePlaceholders},data:function(){return{valueTypes:{1:"Field",2:"Value"},showLookupForSetField:{},actions:[{actionType:null,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,formRuleActionFieldsContext:[{formFieldId:null,actionMeta:null}]}],actionTypes:{showHide:{SHOW_FIELD:{label:"Show",value:1},HIDE_FIELD:{label:"Hide",value:2}},enableDisable:{ENABLE_FIELD:{label:"Enable",value:3},DISABLE_FIELD:{label:"Disable",value:4}}},values:[],actionModelValues:{showAction:[],hidAction:[],enableAction:[],disableAction:[],showSectionAction:[],hidSectionAction:[],setMandatoryAction:[],removeMandatoryAction:[]},selectedField:null,rules:{},excludeDisplayTypes:["TASKS","ATTACHMENT","IMAGE","FILE","WOASSETSPACECHOOSER","SPACECHOOSER"]}},computed:{actionList:{get:function(){return this.action},set:function(val){this.$emit("update:value",val)}},ruleId:function(){return this.$route.params.id},isNew:function(){return(0,validation/* isEmpty */.xb)(this.$route.params.id)},module:function(){return this.$route.params.moduleName},selectedFieldsList:function(){var _this=this,selectedActionType=this.selectedActionType,selectedFormObj=this.selectedFormObj,excludeDisplayTypes=this.excludeDisplayTypes;if(!(0,validation/* isEmpty */.xb)(selectedActionType)&&"set"===selectedActionType&&!(0,validation/* isEmpty */.xb)(selectedFormObj)){var fields=[];return fields=selectedFormObj.fields.filter((function(field){return!excludeDisplayTypes.includes(field.displayTypeEnum)})),fields}if(!(0,validation/* isEmpty */.xb)(selectedActionType)&&"setFilters"===selectedActionType&&!(0,validation/* isEmpty */.xb)(selectedFormObj)){var _fields=[];return _fields=selectedFormObj.fields.filter((function(field){return _this.isPicklistTypeField(field)})),_fields}return(0,validation/* isEmpty */.xb)(selectedFormObj)?[]:selectedFormObj.fields}},mounted:function(){this.constructModelValues(),this.placeHolderFieldHandlings()},watch:{},methods:{placeHolderFieldHandlings:function(){var action=this.action;if(!(0,validation/* isEmpty */.xb)(action)){var formRuleActionList=action[5].formRuleActionFieldsContext;if(!(0,validation/* isEmpty */.xb)(formRuleActionList))for(var i=0;i<formRuleActionList.length;i++)(0,validation/* isEmpty */.xb)(formRuleActionList[i].formFieldId)||(!(0,validation/* isEmpty */.xb)(formRuleActionList[i].actionMeta)&&isNaN(formRuleActionList[i].actionMeta)&&!(0,validation/* isObject */.Kn)(formRuleActionList[i].actionMeta)&&formRuleActionList[i].actionMeta.startsWith("${")?this.$set(this.showLookupForSetField,formRuleActionList[i].formFieldId,"1"):this.$set(this.showLookupForSetField,formRuleActionList[i].formFieldId,"2"))}},toggleLookupFields:function(key,value){this.$set(this.showLookupForSetField,key,value)},isPicklistTypeField:function(field){var _ref=field||{},displayTypeEnum=_ref.displayTypeEnum;return["SELECTBOX","MULTI_SELECTBOX"].includes(displayTypeEnum)},constructModelValues:function(){var action=this.action;(0,validation/* isEmpty */.xb)(action)||(this.actionModelValues.showAction=action[1].values,this.actionModelValues.hidAction=action[2].values,this.actionModelValues.enableAction=action[3].values,this.actionModelValues.disableAction=action[4].values,this.actionModelValues.showSectionAction=action[9].values,this.actionModelValues.hidSectionAction=action[10].values,this.actionModelValues.setMandatoryAction=action[11].values,this.actionModelValues.removeMandatoryAction=action[12].values)},setSelectedFormFieldObj:function(action,actionType,values,isSection){if(action[actionType].formRuleActionFieldsContext=[],action[actionType].values=values,!(0,validation/* isEmpty */.xb)(values))for(var i=0;i<values.length;i++){var object={};isSection?object.formSectionId=values[i]:object.formFieldId=values[i],action[actionType].formRuleActionFieldsContext.push(object)}this.$set(this,"actionList",action),this.$emit("update:value",action)},setSelectedField:function(formRuleAction,fieldId){if(!(0,validation/* isEmpty */.xb)(fieldId)){var fieldObject=this.selectedFormObj.fields.find((function(field){return field.id===fieldId}));(0,validation/* isEmpty */.xb)(fieldObject)?(formRuleAction.fieldObj=null,formRuleAction.actionMeta=null):(formRuleAction.fieldObj=fieldObject,formRuleAction.actionMeta=null);
// this.showLookupForSetField[fieldId] = '2'
}},addRow:function(actionType){this.actionList[actionType].formRuleActionFieldsContext.push({formFieldId:null,actionMeta:null,fieldObj:null,values:[]})},deleteRow:function(index,actionType){this.actionList[actionType].formRuleActionFieldsContext.splice(index,1)},canShowPlaceholderComponent:function(formRuleAction){var showLookupForSetField=this.showLookupForSetField,_ref2=formRuleAction||{},fieldObj=_ref2.fieldObj,formFieldId=_ref2.formFieldId,actionType=showLookupForSetField[formFieldId]||{},_ref3=fieldObj||{},displayTypeEnum=_ref3.displayTypeEnum,canShowPlaceHolder="2"===actionType||!excludePlaceHolderHash.includes(displayTypeEnum);return canShowPlaceHolder}}},form_rules_NewActionvue_type_script_lang_js=NewActionvue_type_script_lang_js,NewAction_component=(0,componentNormalizer/* default */.Z)(form_rules_NewActionvue_type_script_lang_js,NewActionvue_type_template_id_7befa751_scoped_true_render,NewActionvue_type_template_id_7befa751_scoped_true_staticRenderFns,!1,null,"7befa751",null)
/* harmony default export */,NewAction=NewAction_component.exports,ActionsConfiguredHelpervue_type_template_id_69795c48_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",{staticClass:"mT20 flex items-center"},[_c("el-col",{attrs:{span:10}},[_c("p",{staticClass:"details-Heading"},[_vm._v(_vm._s(_vm.name))]),_c("p",{staticClass:"small-description-txt2 width65 break-word"},[_vm._v(" "+_vm._s(_vm.description)+" ")])]),_c("el-col",{staticClass:"flex items-center",attrs:{span:10}},[_vm.isActionConfigure?_c("div",{staticClass:"pR10 configured-green f13 border-right2"},[_vm._v(" "+_vm._s(_vm.$t("forms.rules.configured"))+" ")]):_c("el-button",{staticClass:"small-border-btn",attrs:{type:"button"},on:{click:_vm.configureAction}},[_vm._v(_vm._s(_vm.isActionConfigure?"Configured":"Configure"))]),_vm.isActionConfigure?_c("span",{staticClass:"mL10"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit pointer",attrs:{title:_vm.$t("forms.rules.edit_actions")},on:{click:_vm.configureAction}}),_c("span",{staticClass:"mL10 reset-txt pointer",on:{click:_vm.reset}},[_vm._v(_vm._s(_vm.$t("forms.rules.reset")))])]):_vm._e()],1)],1)},ActionsConfiguredHelpervue_type_template_id_69795c48_staticRenderFns=[],actionsHash={SHOW_HIDE:[1,2],ENABLE_DISABLE:[3,4],SET_VALUE:[5],SET_FILTER:[6],EXECUTE_SCRIPT:[8],SHOW_HIDE_SECTION:[9,10],SET_MANDATORY:[11,12]},ActionsConfiguredHelpervue_type_script_lang_js={name:"ActionsConfiguredHelper",props:["name","description","type","configureAction","reset","actions"],computed:{isActionConfigure:function(){var actions=this.actions,type=this.type,isActionEmpty=this.isActionEmpty,currentActionIds=actionsHash[type]||{},currentActions=[];return(currentActionIds||[]).forEach((function(actionId){currentActions.push(actions[actionId])})),currentActions.some((function(action){return isActionEmpty(action)}))}},methods:{isActionEmpty:function(action){var type=this.type;if("SET_VALUE"===type){var actionMeta=this.$getProperty(action,"formRuleActionFieldsContext.0.actionMeta");return!(0,validation/* isEmpty */.xb)(actionMeta)}if("SET_FILTER"===type){var picklistVal=this.$getProperty(action,"formRuleActionFieldsContext.0.values");return!(0,validation/* isEmpty */.xb)(picklistVal)}if("EXECUTE_SCRIPT"===type){var workflowString=this.$getProperty(action,"workflow.workflowV2String");return!(0,validation/* isEmpty */.xb)(workflowString)}return!(0,validation/* isEmpty */.xb)(action.values)}}},form_rules_ActionsConfiguredHelpervue_type_script_lang_js=ActionsConfiguredHelpervue_type_script_lang_js,ActionsConfiguredHelper_component=(0,componentNormalizer/* default */.Z)(form_rules_ActionsConfiguredHelpervue_type_script_lang_js,ActionsConfiguredHelpervue_type_template_id_69795c48_render,ActionsConfiguredHelpervue_type_template_id_69795c48_staticRenderFns,!1,null,null,null)
/* harmony default export */,ActionsConfiguredHelper=ActionsConfiguredHelper_component.exports,scriptHeader="List getActions(Map formData) {\n",NewRulevue_type_script_lang_js={name:"NewRule",props:["visibility","isNew","formRuleId","formId","isSubForm","isUpdateForm"],components:{CriteriaBuilder:dist/* CriteriaBuilder */.IP,NewAction:NewAction,ActionsConfiguredHelper:ActionsConfiguredHelper},data:function(){return{executeOptions:constant/* default */.Z.EXECUTE_TYPE_HASH,formRuleContext:{name:"",description:"",formId:null,triggerType:2,executeType:constant/* default */.Z.EXECUTE_TYPE_HASH["Create Or Edit"],fieldIds:[],ruleType:1,type:1,criteria:null,subFormCriteria:null},formRuleContextObj:{},actions:{1:{actionType:1,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null}]},2:{actionType:2,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null}]},3:{actionType:3,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null}]},4:{actionType:4,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null}]},5:{actionType:5,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null,actionMeta:null,fieldObj:null}]},8:{actionType:8,workflow:{workflowV2String:null,isV2Script:!0},tempWorkflow:""},9:{actionType:9,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formSectionId:null}]},10:{actionType:10,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formSectionId:null}]},11:{actionType:11,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null}]},12:{actionType:12,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null}]},6:{actionType:6,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,subFormCriteria:null,formRuleActionFieldsContext:[{formFieldId:null,actionMeta:null,values:[]}]}},comment:"// `formData` will be passed to the script. Return actions as list\n\n",forms:[],rules:{},saving:!1,isCriteriaRendering:!1,selectedForm:null,ruleTitle:"Form Rule",dialogVisible:!1,selectedActionType:null,apps:[],isLoading:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var $store;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:$store=_this.$store,Promise.all([$store.dispatch("loadSites"),_this.fetchFormRule()]).then((function(){_this.isNew||(_this.ruleTitle=_this.formRuleContext.name)})).finally((function(){_this.$nextTick(_this.registerScrollHandler)}));case 2:case"end":return _context.stop()}}),_callee)})))()},mounted:function(){this.isUpdateForm&&(this.formRuleContext.executeType=constant/* default */.Z.EXECUTE_TYPE_HASH["Edit"])},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.sites}})),{},{module:function(){return this.$route.params.moduleName},triggerTypeList:function(){var _ref=this||{},isSubForm=_ref.isSubForm,types=cloneDeep_default()(this.$constants.FormRuleTriggerType);return isSubForm?(delete types["FORM_ON_LOAD"],types):(delete types["ADD_DELETE_SUBFORM"],types)},showWorkflow:function(){return!!this.$route.query.showScript||!(this.isNew||!this.formRuleContext||!this.formRuleContext.actions)&&this.formRuleContext.actions.some((function(action){return 8===action.actionType}))},canShowSubformField:function(){var subForms=this.subForms,isNew=this.isNew,formRuleContext=this.formRuleContext,isSubForm=this.isSubForm;return isNew?!(0,validation/* isEmpty */.xb)(subForms)&&isSubForm:!(0,validation/* isEmpty */.xb)(formRuleContext.subFormId)&&isSubForm},subForms:function(){var selectedForm=this.selectedForm,_ref2=selectedForm||{},sections=_ref2.sections,subForms=(sections||[]).filter((function(section){return!(0,validation/* isEmpty */.xb)(section.subFormId)}));return subForms=(subForms||[]).map((function(form){return form.subForm})),subForms},selectedSubForm:function(){var formRuleContext=this.formRuleContext,subForms=this.subForms,_ref3=formRuleContext||{},subFormId=_ref3.subFormId;if((0,validation/* isEmpty */.xb)(subFormId)||(0,validation/* isEmpty */.xb)(subForms))return null;var currentSubForm=subForms.find((function(form){return form.id===subFormId}));return currentSubForm},isSubFormsEmpty:function(){var selectedSubForm=this.selectedSubForm;return(0,validation/* isEmpty */.xb)(selectedSubForm)},triggerFieldsList:function(){var selectedForm=this.selectedForm,selectedSubForm=this.selectedSubForm,isSubFormsEmpty=this.isSubFormsEmpty,_ref4=selectedForm||{},fields=_ref4.fields,fieldsList=[{label:"Form fields",options:fields}];if(!isSubFormsEmpty){var _ref5=selectedSubForm||{},_ref5$fields=_ref5.fields,subFormFields=void 0===_ref5$fields?[]:_ref5$fields;fieldsList=[].concat((0,toConsumableArray/* default */.Z)(fieldsList),[{label:"Subform fields",options:subFormFields}])}return fieldsList}}),methods:{reset:function(actionType){var action={actionType:null,fieldObj:null,values:[],id:null,formRuleId:null,criteria:null,formRuleActionFieldsContext:[{formFieldId:null}]};if("showHide"===actionType){var showAction=clone_default()(action);showAction.actionType=1,this.$set(this.actions,"1",showAction);var hideAction=clone_default()(action);hideAction.actionType=2,this.$set(this.actions,"2",hideAction)}else if("enableDisable"===actionType){var enableAction=clone_default()(action);enableAction.actionType=3,this.$set(this.actions,"3",enableAction);var disableAction=clone_default()(action);disableAction.actionType=4,this.$set(this.actions,"4",disableAction)}else if("showHideSection"===actionType){var showSectionAction=clone_default()(action);showSectionAction.actionType=9,this.$set(this.actions,"9",showSectionAction);var hideSectionAction=clone_default()(action);hideSectionAction.actionType=10,this.$set(this.actions,"10",hideSectionAction)}else if("setRemoveMandatory"===actionType){var setMandatoryAction=clone_default()(action);setMandatoryAction.actionType=11,this.$set(this.actions,"11",setMandatoryAction);var removeMandatoryAction=clone_default()(action);removeMandatoryAction.actionType=12,this.$set(this.actions,"12",removeMandatoryAction)}else if("setFilters"===actionType){var setAction=[{formFieldId:null,actionMeta:null,values:[]}];this.actions[6].formRuleActionFieldsContext=setAction,this.$set(this.actions[6],"formRuleActionFieldsContext",setAction)}else if("set"===actionType){var _setAction=[{formFieldId:null,actionMeta:null,fieldObj:null}];this.actions[5].formRuleActionFieldsContext=_setAction,this.$set(this.actions[5],"formRuleActionFieldsContext",_setAction)}else"script"===actionType&&(this.actions[8].workflow.workflowV2String=null,this.actions[8].tempWorkflow="")},fetchFormRule:function(){var _this2=this,isNew=this.isNew,formId=this.formId;return isNew&&(this.formRuleContext.formId=Number(formId),this.fetchFormDetails()),this.formRuleId?http/* default */.ZP.post("v2/form/rule/get",{formRuleContext:{id:parseInt(this.formRuleId)}}).then((function(_ref6){var data=_ref6.data;if(0!==data.responseCode)throw new Error;_this2.formRuleContextObj=data.result.formRuleResultJSON,_this2.formRuleContext=data.result.formRuleResultJSON,_this2.formRuleContext.fieldIds=data.result.formRuleResultJSON.triggerFields?data.result.formRuleResultJSON.triggerFields.map((function(triggerField){var fieldId=triggerField.fieldId;return fieldId})):[],_this2.fetchFormDetails()})).catch((function(){_this2.$message.error("Could not load form rule")})):Promise.resolve()},closeDialog:function(){this.$emit("update:visibility",!1)},fetchFormDetails:function(){var _this3=this,formRuleContext=this.formRuleContext,forms=this.forms,selectedForm=forms.find((function(form){return form.id===formRuleContext.formId})),_ref7=formRuleContext||{},formId=_ref7.formId,_ref8=selectedForm||{},name=_ref8.name,url=-1===formId?"/v2/forms/workorder?formName=".concat(name):"/v2/forms/workorder?formId=".concat(formId);
// eslint-disable-next-line @facilio/no-http
this.$http.get(url).then((function(_ref9){var _ref9$data=_ref9.data,message=_ref9$data.message,responseCode=_ref9$data.responseCode,_ref9$data$result=_ref9$data.result,result=void 0===_ref9$data$result?{}:_ref9$data$result;if(0!==responseCode)throw new Error(message);var form=result.form;if(!(0,validation/* isEmpty */.xb)(form)){_this3.selectedForm=form;var _ref10=form||{},_ref10$sections=_ref10.sections,sections=void 0===_ref10$sections?[]:_ref10$sections,subFormSection=sections.find((function(section){return!(0,validation/* isEmpty */.xb)((section||{}).subForm)}));if(!(0,validation/* isEmpty */.xb)(subFormSection)){var _ref11=_this3||{},_formRuleContext=_ref11.formRuleContext,isSubForm=_ref11.isSubForm;if(isSubForm){var subFormId=_this3.$getProperty(subFormSection,"subForm.id");_this3.formRuleContext=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_formRuleContext),{},{subFormId:subFormId})}}_this3.isNew||_this3.deserializeRuleData()}})).catch((function(_ref12){var message=_ref12.message;_this3.$message.error(message)}))},deserializeRuleData:function(){var _this4=this,values=[],selectedForm=this.selectedForm,selectedSubForm=this.selectedSubForm;if((0,validation/* isEmpty */.xb)(selectedSubForm)||(selectedForm=selectedSubForm),!(0,validation/* isEmpty */.xb)(this.formRuleContext.actions)&&!(0,validation/* isEmpty */.xb)(selectedForm))for(var _loop=function(i){if(values=[],_this4.formRuleContext.actions[i].formRuleActionFieldsContext)for(var _loop2=function(j){var fieldObject={};if([5,6].includes(_this4.formRuleContext.actions[i].actionType)&&(fieldObject=selectedForm.fields.find((function(field){return field.id===_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j].formFieldId})),_this4.$set(_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j],"fieldObj",fieldObject)),5===_this4.formRuleContext.actions[i].actionType){var value,dataTypeEnum=(0,validation/* isEmpty */.xb)(fieldObject.field)||(0,validation/* isEmpty */.xb)(fieldObject.field.dataTypeEnum)?"LOOKUP":fieldObject.field.dataTypeEnum,displayTypeEnum=fieldObject.displayTypeEnum,valueObj=JSON.parse(_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j].actionMeta);["STRING","BOOLEAN","DECIMAL"].includes(dataTypeEnum)||!(0,validation/* isEmpty */.xb)(valueObj)&&!(0,validation/* isEmpty */.xb)(valueObj.setValue)&&!(0,validation/* isObject */.Kn)(valueObj.setValue)&&valueObj.setValue.startsWith("${")||["DATE","DATETIME"].includes(displayTypeEnum)?(value=null,value=valueObj.setValue):"DATERANGE"===displayTypeEnum?(value=[],value=valueObj.setValue.split(",")):["TIME"].includes(displayTypeEnum)?value=valueObj.setValue:"TEAMSTAFFASSIGNMENT"===displayTypeEnum?(value={},value=valueObj.setValue):value=["CURRENCY"].includes(displayTypeEnum)||["MULTI_CURRENCY"].includes(displayTypeEnum)||["GEO_LOCATION"].includes(displayTypeEnum)?valueObj.setValue:parseInt(valueObj.setValue),_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j].actionMeta=value}else if(6===_this4.formRuleContext.actions[i].actionType){var _valueObj=JSON.parse(_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j].actionMeta),_values=_valueObj.values;_this4.$set(_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j],"values",_values)}else[9,10].includes(_this4.formRuleContext.actions[i].actionType)?values.push(_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j].formSectionId):values.push(_this4.formRuleContext.actions[i].formRuleActionFieldsContext[j].formFieldId)},j=0;j<_this4.formRuleContext.actions[i].formRuleActionFieldsContext.length;j++)_loop2(j);5!==_this4.formRuleContext.actions[i].actionType&&(_this4.formRuleContext.actions[i].values=values),_this4.actions[_this4.formRuleContext.actions[i].actionType]=_this4.formRuleContext.actions[i]},i=0;i<this.formRuleContext.actions.length;i++)_loop(i)},updateCriteria:function(value,criteriaType){this.$set(this.formRuleContext,"".concat(criteriaType),value)},save:function(){var _this5=this,actions=this.actions,formRuleContext=this.serialize(),actionsList=[],_loop3=function(){var action=actions[key],actionType=action.actionType,formRuleActionFieldsContext=action.formRuleActionFieldsContext,workflow=action.workflow,id=action.id;if(_this5.isNew||_this5.formRuleContextObj.actions.forEach((function(action){action.actionType===actionType&&(id=action.id)})),8===actionType)workflow.workflowV2String&&actionsList.push({actionType:actionType,workflow:workflow});else if(5===actionType&&(formRuleActionFieldsContext=formRuleActionFieldsContext.filter((function(action){return!(0,validation/* isEmpty */.xb)(action.actionMeta)}))),6===actionType&&(formRuleActionFieldsContext=formRuleActionFieldsContext.filter((function(action){return!(0,validation/* isEmpty */.xb)(action.values)}))),formRuleActionFieldsContext.length>0&&(!(0,validation/* isEmpty */.xb)(formRuleActionFieldsContext[0].formFieldId)||!(0,validation/* isEmpty */.xb)(formRuleActionFieldsContext[0].formSectionId))){for(var data={actionType:actionType},actionFormRuleList=[],i=0;i<formRuleActionFieldsContext.length;i++)if(5===actionType){var actionMetaJson=void 0;if("TEAMSTAFFASSIGNMENT"===formRuleActionFieldsContext[i].fieldObj.displayTypeEnum){var teamStaffValue={setValue:formRuleActionFieldsContext[i].actionMeta};actionMetaJson=JSON.stringify(teamStaffValue)}else if("CURRENCY"===formRuleActionFieldsContext[i].fieldObj.displayTypeEnum){var currency={setValue:formRuleActionFieldsContext[i].actionMeta};actionMetaJson=JSON.stringify(currency)}else if("GEO_LOCATION"===formRuleActionFieldsContext[i].fieldObj.displayTypeEnum){var location={setValue:formRuleActionFieldsContext[i].actionMeta};actionMetaJson=JSON.stringify(location)}else actionMetaJson='{"setValue": "'.concat(formRuleActionFieldsContext[i].actionMeta.toString(),'"}');formRuleActionFieldsContext[i].actionMeta=actionMetaJson,delete formRuleActionFieldsContext[i]["fieldObj"]}else if(6===actionType){var _actionMetaJson='{"show": false,"values": ['.concat(formRuleActionFieldsContext[i].values,"]}");formRuleActionFieldsContext[i].actionMeta=_actionMetaJson,delete formRuleActionFieldsContext[i]["values"]}else if(!_this5.isNew){var _formRuleActionFields=formRuleActionFieldsContext[i],formFieldId=_formRuleActionFields.formFieldId,formSectionId=_formRuleActionFields.formSectionId,formRuleActionId=_formRuleActionFields.formRuleActionId,_id=_formRuleActionFields.id,dataAction={formFieldId:formFieldId,formSectionId:formSectionId,formRuleActionId:formRuleActionId,id:_id};actionFormRuleList.push(dataAction)}_this5.isNew||[5,6].includes(actionType)||(formRuleActionFieldsContext=actionFormRuleList),data.formRuleActionFieldsContext=formRuleActionFieldsContext,_this5.isNew||(data.id=id),_this5.isNew||(data.formRuleId=_this5.formRuleId),(0,validation/* isEmpty */.xb)(formRuleActionFieldsContext)||actionsList.push(data)}};for(var key in actions)_loop3();(0,validation/* isEmpty */.xb)(actionsList)||this.$set(formRuleContext,"actions",actionsList);var url=this.isNew?"v2/form/rule/add":"v2/form/rule/update";return this.saving=!0,http/* default */.ZP.post(url,{formRuleContext:formRuleContext}).then((function(_ref13){var data=_ref13.data;if(0!==data.responseCode)throw new Error;_this5.$message.success("Form Rule saved"),_this5.$emit("saved",data.result.formRuleResultJSON),_this5.closeDialog(),_this5.$nextTick(_this5.goBack)})).catch((function(){_this5.$message.error("Could not save form rule")})).finally((function(){return _this5.saving=!1}))},serialize:function(){var formRuleId=this.formRuleId,_clone=clone_default()(this.formRuleContext),name=_clone.name,description=_clone.description,formId=_clone.formId,triggerType=_clone.triggerType,executeType=_clone.executeType,fieldIds=_clone.fieldIds,ruleType=_clone.ruleType,type=_clone.type,criteria=_clone.criteria,_clone$criteriaId=_clone.criteriaId,criteriaId=void 0===_clone$criteriaId?null:_clone$criteriaId,subFormId=_clone.subFormId,subFormCriteria=_clone.subFormCriteria,data={name:name,description:description,formId:formId,triggerType:triggerType,executeType:executeType,ruleType:ruleType,type:type,subFormId:subFormId};return 2===triggerType&&(data.triggerFields=fieldIds.map((function(fieldId){return{fieldId:fieldId}}))),(0,validation/* isEmpty */.xb)(criteria)||(data.criteria=this.serializeCriteria(criteria)),(0,validation/* isEmpty */.xb)(subFormCriteria)||(data.subFormCriteria=this.serializeCriteria(subFormCriteria)),this.isNew||(data.id=formRuleId),(0,validation/* isEmpty */.xb)(criteria)||(0,validation/* isEmpty */.xb)(criteriaId)||(data.criteriaId=criteriaId),data},showConfigure:function(actionType){this.selectedActionType=actionType,this.dialogVisible=!0,"script"!==actionType||this.actions[8].tempWorkflow||(this.actions[8].workflow.workflowV2String?this.actions[8].tempWorkflow=this.actions[8].workflow.workflowV2String.replace(scriptHeader,"").slice(0,-1):this.actions[8].tempWorkflow=this.comment)},handleActionSave:function(){
// TODO change the data only if saved. If clicked cancel, reset the data
var _this$actions$=this.actions[8],workflow=_this$actions$.workflow,tempWorkflow=_this$actions$.tempWorkflow;"script"===this.selectedActionType&&tempWorkflow&&(workflow.workflowV2String=scriptHeader+tempWorkflow+"\n}"),this.handleClose()},handleClose:function(){this.dialogVisible=!1},serializeCriteria:function(criteria){for(var _loop4=function(){var condition=_Object$keys[_i],hasValidFieldName=
// eslint-disable-next-line no-prototype-builtins
criteria.conditions[condition].hasOwnProperty("fieldName")&&!(0,validation/* isEmpty */.xb)(criteria.conditions[condition].fieldName);if(hasValidFieldName){var discardKeys=["valueArray","operatorsDataType","operatorLabel","operator"];discardKeys.forEach((function(key){delete criteria.conditions[condition][key]}))}else delete criteria.conditions[condition]},_i=0,_Object$keys=Object.keys(criteria.conditions);_i<_Object$keys.length;_i++)_loop4();return criteria&&criteria.conditions&&0===Object.keys(criteria.conditions).length&&(criteria=null),criteria}}},form_rules_NewRulevue_type_script_lang_js=NewRulevue_type_script_lang_js,NewRule_component=(0,componentNormalizer/* default */.Z)(form_rules_NewRulevue_type_script_lang_js,NewRulevue_type_template_id_1ee8f446_render,NewRulevue_type_template_id_1ee8f446_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewRule=NewRule_component.exports,FormRulesListvue_type_script_lang_js={props:["moduleName","formId","redirectToFormsList","formObj","isUpdateForm"],components:{NewRule:NewRule},data:function(){return{isLoading:!1,triggerFieldMap:{},formRuleId:null,formRuleList:[],selectedForm:null,ruleTitle:"Form Rule",showFormRule:!1,isNew:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.sites}})),{},{siteObj:function(){var obj={};return(0,validation/* isEmpty */.xb)(this.sites)||this.sites.forEach((function(site){obj[site.id]=site.name})),obj},isSubForm:function(){return!1},addRuleText:function(){return this.$t("forms.rules.add_new_rule")},fetchOnlySubformRules:function(){return!1}}),created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.getFormRulesList();case 2:_this.$store.dispatch("loadSites");case 3:case"end":return _context.stop()}}),_callee)})))()},methods:{getFieldsDisplayname:function(triggerFields){return(0,validation/* isEmpty */.xb)(triggerFields)?"---":triggerFields.join(",")},changeRuleStatus:function(rule){var _this2=this,url="v2/form/rule/changeRuleStatus",data={formRuleContext:{id:rule.id,status:rule.status}};api/* API */.bl.post(url,data).then((function(_ref){var error=_ref.error;error?_this2.$message.error(error.message||"Error Occured"):_this2.$message.success("Updated Successfully")}))},getFormRulesList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,formId,formObj,isSubForm,_yield$API$get,error,data,_data$formRuleContext,formRuleContexts,_ref2,fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.isLoading=!0,moduleName=_this3.moduleName,formId=_this3.formId,formObj=_this3.formObj,isSubForm=_this3.isSubForm,_context2.next=4,api/* API */.bl.get("v2/form/rule/getRuleList",{moduleName:moduleName,formId:formId,fetchOnlySubformRules:isSubForm},{force:!0});case 4:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this3.$message.error(error.message||"Error Occurred"):(_data$formRuleContext=data.formRuleContexts,formRuleContexts=void 0===_data$formRuleContext?[]:_data$formRuleContext,(0,validation/* isEmpty */.xb)(formRuleContexts)||(_ref2=formObj||{},fields=_ref2.fields,formRuleContexts=formRuleContexts.map((function(rules){var _ref3=rules||{},triggerFields=_ref3.triggerFields;triggerFields=(triggerFields||[]).map((function(field){return field.fieldId}));var modifiedTriggerFields=(fields||[]).filter((function(field){return triggerFields.includes(field.id)})).map((function(field){return field.displayName}));return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},rules),{},{triggerFields:modifiedTriggerFields})}))),_this3.formRuleList=formRuleContexts||[]),_this3.isLoading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},showConfirmDelete:function(ruleObj){var _this4=this,dialogObj={title:"Delete Form Rule",message:"Are you sure you want to delete this rule?",rbDanger:!0,rbLabel:"Delete"};this.$dialog.confirm(dialogObj).then((function(value){value&&_this4.deleteForm(ruleObj)}))},deleteForm:function(ruleObj){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url,data,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return url="v2/form/rule/delete",data={formRuleContext:{id:ruleObj.id}},_context3.next=4,api/* API */.bl.post(url,data);case 4:_yield$API$post=_context3.sent,error=_yield$API$post.error,error?_this5.$message.error(error.message||"Error Occurred"):(_this5.getFormRulesList(),_this5.$message.success("Successfully Deleted"));case 7:case"end":return _context3.stop()}}),_callee3)})))()},editFormRuleCreation:function(rule){this.isNew=!1,this.formRuleId=rule.id,this.showFormRule=!0},openFormRuleCreation:function(){this.isNew=!0,this.formRuleId=null,this.showFormRule=!0},redirect:function(){var redirectToFormsList=this.redirectToFormsList;(0,validation/* isFunction */.mf)(redirectToFormsList)&&redirectToFormsList()},getSubFormName:function(id){var formObj=this.formObj,_ref4=formObj||{},sections=_ref4.sections,subFormName="---";return sections.forEach((function(section){var _ref5=section||{},subForm=_ref5.subForm;(0,validation/* isEmpty */.xb)(subForm)||subForm.id!==id||(subFormName=subForm.displayName||"---")})),subFormName}}},form_rules_FormRulesListvue_type_script_lang_js=FormRulesListvue_type_script_lang_js,FormRulesList_component=(0,componentNormalizer/* default */.Z)(form_rules_FormRulesListvue_type_script_lang_js,FormRulesListvue_type_template_id_2a703a2e_render,FormRulesListvue_type_template_id_2a703a2e_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormRulesList=FormRulesList_component.exports,FUrlField=__webpack_require__(658774),SubformRulesListvue_type_script_lang_js={name:"SubformRulesList",extends:FormRulesList,computed:{isSubForm:function(){return!0},addRuleText:function(){return this.$t("forms.rules.add_new_subform_rule")}}},form_rules_SubformRulesListvue_type_script_lang_js=SubformRulesListvue_type_script_lang_js,SubformRulesList_component=(0,componentNormalizer/* default */.Z)(form_rules_SubformRulesListvue_type_script_lang_js,SubformRulesList_render,SubformRulesList_staticRenderFns,!1,null,null,null)
/* harmony default export */,SubformRulesList=SubformRulesList_component.exports,FormValidationListvue_type_template_id_413bdd39_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"form-validation-list"},[_c("portal",{attrs:{to:"builder-btn-portal",slim:""}},[_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none",attrs:{type:"primary"},on:{click:function($event){return _vm.openFormRuleCreation()}}},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.add_form_Validation"))+" ")]),_c("el-button",{staticClass:"fc-btn-green-medium-fill shadow-none",attrs:{type:"primary"},on:{click:_vm.redirect}},[_vm._v(_vm._s(_vm.$t("common._common.done")))])],1)]),_c("portal",{attrs:{to:"builder-action-config",slim:""}},[_c("div",{staticClass:"flex-center-row-space line-height24"},[_vm.showMainFieldSearch?_c("el-input",{ref:"mainFieldSearchInput",staticClass:"fc-input-full-border2 width150px form-builder-validation-main-field-search",attrs:{clearable:"",autofocus:"",placeholder:_vm.$t("common._common.search")},on:{blur:_vm.hideMainFieldSearch,clear:_vm.hideMainFieldSearch,change:_vm.loadValidationList},model:{value:_vm.validationSearchData,callback:function($$v){_vm.validationSearchData=$$v},expression:"validationSearchData"}}):_c("span",{staticClass:"search-icon-val",on:{click:_vm.openMainFieldSearch}},[_c("inline-svg",{staticClass:"vertical-middle cursor-pointer",attrs:{src:"svgs/search",iconClass:"icon icon-sm"}})],1),_vm.showPagination?_c("Pagination",{staticClass:"mL10",attrs:{hasMoreList:_vm.hasMoreList,currentPage:_vm.page,perPage:_vm.perPage,currentCount:_vm.currentListCount},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}):_vm._e()],1)]),_c("div",{staticClass:"validation-table-container m20"},[_vm.isLoading?_c("div",{staticClass:"flex-middle height-100"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_c("el-table",{staticClass:"form-list-table overflow-y-scroll",attrs:{data:_vm.formValidationList,height:"100%","empty-text":"No Validation Rules available"}},[_c("el-table-column",{attrs:{prop:"name",label:"Name",width:"500"}}),_c("el-table-column",{attrs:{prop:"namedCriteriaDisplayName",label:"Criteria Name",width:"500"}}),_c("el-table-column",{scopedSlots:_vm._u([{key:"default",fn:function(formValidation){return[_c("div",{staticClass:"hover-icons",staticStyle:{"margin-top":"-3px"}},[_c("i",{staticClass:"el-icon-edit pointer",on:{click:function($event){return _vm.openFormRuleCreation(formValidation.row.id)}}}),_vm._v("    "),_c("i",{staticClass:"el-icon-delete pointer",on:{click:function($event){return _vm.showConfirmDelete(formValidation.row.id)}}})])]}}])})],1)],1),_vm.openValidationDialog?_c("RuleCreation",{attrs:{moduleName:_vm.moduleName,selectedId:_vm.selectedId,formId:_vm.formId},on:{onClose:function($event){_vm.openValidationDialog=!1},onSave:_vm.loadValidationList}}):_vm._e()],1)},FormValidationListvue_type_template_id_413bdd39_staticRenderFns=[],FormValidationCreationvue_type_template_id_ea3333a0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:!0,fullscreen:!0,"append-to-body":!0,"before-close":_vm.closeDialog,"custom-class":"fc-dialog-form fc-dialog-right setup-dialog50 setup-dialog"}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_c("div",{staticClass:"section-header",attrs:{id:"policy-header"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])])])]),_vm.isLoading?_c("div",{staticClass:"form-builder-shimmer-lines mT10"},[_vm._l(2,(function(i){return _c("div",{key:i},[_c("span",{staticClass:"span-name loading-shimmer"}),_c("span",{staticClass:"lines loading-shimmer"})])})),_c("span",{staticClass:"span-name loading-shimmer"}),_c("span",{staticClass:"rectangle loading-shimmer"})],2):_c("div",{staticClass:"height400 overflow-y-scroll pB60 m20"},[_c("p",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.name"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{autofocus:!0,placeholder:"Enter validation name",reseize:"none"},model:{value:_vm.validation.name,callback:function($$v){_vm.$set(_vm.validation,"name",$$v)},expression:"validation.name"}}),_c("p",{staticClass:"fc-input-label-txt pT20 pB0"},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.condition"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border2 width100 fc-tag",attrs:{filterable:"",loading:_vm.conditionLoading,placeholder:"Select Condition","popper-class":"form-builder-condition-popover"},model:{value:_vm.validation.namedCriteriaId,callback:function($$v){_vm.$set(_vm.validation,"namedCriteriaId",$$v)},expression:"validation.namedCriteriaId"}},[_vm._l(_vm.criteriaList,(function(criteria){return _c("el-option",{key:criteria.id,attrs:{label:criteria.name,value:criteria.id}})})),_c("div",{staticClass:"search-select-filter-btn pT5"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold pT10 pB10",on:{click:function($event){_vm.showCreate=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.add_new"))+" ")])],1),_c("div",{staticClass:"el-select-dropdown__empty",attrs:{slot:"empty"},slot:"empty"},[_c("div",{staticClass:"empty-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.no_data"))+" ")]),_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold pT10 pB10",on:{click:function($event){_vm.showCreate=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.add_new"))+" ")])],1)],2),_c("div",{staticClass:"flex-center-row-space"},[_c("p",{staticClass:"fc-input-label-txt pT20 pB5"},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.error_message"))+" ")]),_c("div",{staticClass:"fc-pdf-blue-txt-13 pointer pL10 bold fc-underline-hover pT20 line-height24",on:{click:function($event){_vm.openScript=!0}}},[_vm._v(" "+_vm._s(_vm.$t("setup.form_builder.validation.configure_script"))+" ")])]),_c("el-input",{staticClass:"fc-input-full-border-select2 width100",attrs:{type:"textarea","min-rows":3,autosize:{minRows:3,maxRows:4},placeholder:"Enter an error message",reseize:"none"},model:{value:_vm.validation.errorMessage,callback:function($$v){_vm.$set(_vm.validation,"errorMessage",$$v)},expression:"validation.errorMessage"}})],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("setup.form_builder.validation.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.onSave}},[_vm._v(_vm._s(_vm.$t("setup.form_builder.validation.save")))])],1)]),_vm.showCreate?_c("ConditionManagerForm",{attrs:{isNew:!0,moduleName:_vm.moduleName},on:{onSave:_vm.setConditions,onClose:function($event){_vm.showCreate=!1}}}):_vm._e(),_vm.openScript?_c("PlaceholderScriptConfig",{attrs:{module:_vm.moduleName,scriptTemplate:_vm.validation.errorMessagePlaceHolderScript},on:{"update:scriptTemplate":function($event){return _vm.$set(_vm.validation,"errorMessagePlaceHolderScript",$event)},"update:script-template":function($event){return _vm.$set(_vm.validation,"errorMessagePlaceHolderScript",$event)},onClose:function($event){_vm.openScript=!1}}}):_vm._e()],1)},FormValidationCreationvue_type_template_id_ea3333a0_staticRenderFns=[],ConditionManagerForm=__webpack_require__(233889),PlaceholderScriptConfig=__webpack_require__(116143),FormValidationModel=__webpack_require__(580066),FormValidationCreationvue_type_script_lang_js={props:["moduleName","selectedId","formId"],components:{ConditionManagerForm:ConditionManagerForm/* default */.Z,PlaceholderScriptConfig:PlaceholderScriptConfig/* default */.Z},data:function(){return{isLoading:!0,showCreate:!1,openScript:!1,validation:{},criteriaList:[],conditionLoading:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadCriteriaList();case 2:return _context.next=4,_this.loadValidationData();case 4:case"end":return _context.stop()}}),_callee)})))()},computed:{isNew:function(){return(0,validation/* isEmpty */.xb)(this.selectedId)},title:function(){return this.isNew?this.$t("setup.form_builder.validation.add_form"):this.$t("setup.form_builder.validation.edit_form")}},methods:{closeDialog:function(){this.$emit("onClose")},setConditions:function(condition){var _this2=this;this.conditionLoading=!0,this.criteriaList.push(condition),this.$nextTick((function(){_this2.validation.namedCriteriaId=condition.id,_this2.conditionLoading=!1}))},loadValidationData:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_this3.isLoading=!0,!_this3.isNew){_context2.next=5;break}_this3.validation=new FormValidationModel/* FormValidation */.I,_context2.next=15;break;case 5:return _context2.prev=5,params={id:_this3.selectedId},_context2.next=9,FormValidationModel/* FormValidation */.I.fetch(params);case 9:_this3.validation=_context2.sent,_context2.next=15;break;case 12:_context2.prev=12,_context2.t0=_context2["catch"](5),_this3.$message.error(_context2.t0);case 15:_this3.isLoading=!1;case 16:case"end":return _context2.stop()}}),_callee2,null,[[5,12]])})))()},loadCriteriaList:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var moduleName,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.conditionLoading=!0,moduleName=_this4.moduleName,_context3.next=4,api/* API */.bl.post("v2/namedCriteria/list",{moduleName:moduleName});case 4:_yield$API$post=_context3.sent,data=_yield$API$post.data,error=_yield$API$post.error,error?_this4.$message.error(error.message):_this4.criteriaList=(null===data||void 0===data?void 0:data.namedCriteriaList)||[],_this4.conditionLoading=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},onSave:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(_context4.prev=0,!(0,validation/* isEmpty */.xb)(_this5.selectedId)){_context4.next=8;break}return _this5.validation.parentId=_this5.formId,_context4.next=5,_this5.validation.save();case 5:_this5.$message.success(_this5.$t("setup.form_builder.validation.creation_success")),_context4.next=11;break;case 8:return _context4.next=10,_this5.validation.patch();case 10:_this5.$message.success(_this5.$t("setup.form_builder.validation.update_success"));case 11:_this5.$emit("onSave"),_this5.closeDialog(),_context4.next=18;break;case 15:_context4.prev=15,_context4.t0=_context4["catch"](0),_this5.$message.error(_context4.t0);case 18:case"end":return _context4.stop()}}),_callee4,null,[[0,15]])})))()}}},form_validation_FormValidationCreationvue_type_script_lang_js=FormValidationCreationvue_type_script_lang_js,FormValidationCreation_component=(0,componentNormalizer/* default */.Z)(form_validation_FormValidationCreationvue_type_script_lang_js,FormValidationCreationvue_type_template_id_ea3333a0_render,FormValidationCreationvue_type_template_id_ea3333a0_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormValidationCreation=FormValidationCreation_component.exports,FPagination=__webpack_require__(961704),FormValidationListvue_type_script_lang_js={props:["moduleName","formId","redirectToFormsList"],components:{RuleCreation:FormValidationCreation,Pagination:FPagination/* default */.Z},data:function(){return{isLoading:!1,showConfirmationForDelete:!1,openValidationDialog:!1,showMainFieldSearch:!1,formValidationList:[],selectedId:null,validationSearchData:"",page:1,perPage:10,showPagination:!1,currentListCount:0,hasMoreList:!1}},created:function(){this.loadValidationList()},watch:{page:{handler:"loadValidationList"}},methods:{openFormRuleCreation:function(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.selectedId=value,this.openValidationDialog=!0},redirect:function(){(0,validation/* isFunction */.mf)(this.redirectToFormsList)&&this.redirectToFormsList()},openMainFieldSearch:function(){var _this=this;this.showMainFieldSearch=!0,this.$nextTick((function(){var mainFieldSearchInput=_this.$refs["mainFieldSearchInput"];(0,validation/* isEmpty */.xb)(mainFieldSearchInput)||mainFieldSearchInput.focus()}))},hideMainFieldSearch:function(){(0,validation/* isEmpty */.xb)(this.validationSearchData)&&(this.showMainFieldSearch=!1)},showConfirmDelete:function(id){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var value,idx;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this2.$dialog.confirm({title:_this2.$t("setup.form_builder.validation.delete_validation"),htmlMessage:_this2.$t("setup.form_builder.validation.are_you_want_delete"),rbDanger:!0,rbLabel:_this2.$t("common._common.confirm")});case 2:if(value=_context.sent,value){_context.next=5;break}return _context.abrupt("return");case 5:return _context.prev=5,_context.next=8,FormValidationModel/* FormValidation */.I.delete({id:id});case 8:idx=_this2.formValidationList.findIndex((function(validation){return validation.id===id})),-1!==idx&&_this2.formValidationList.splice(idx,1),_this2.$message.success(_this2.$t("setup.form_builder.validation.delete_success")),_context.next=16;break;case 13:_context.prev=13,_context.t0=_context["catch"](5),_this2.$message.error(_context.t0);case 16:case"end":return _context.stop()}}),_callee,null,[[5,13]])})))()},loadValidationList:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var formId,page,perPage,_this3$formValidation,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return formId=_this3.formId,page=_this3.page,perPage=_this3.perPage,_context2.prev=1,_this3.isLoading=!0,params={formId:formId,page:page,perPage:perPage,search:_this3.validationSearchData},_context2.next=6,FormValidationModel/* FormValidation */.I.fetchAll(params);case 6:_this3.formValidationList=_context2.sent,_this3.currentListCount=(null===(_this3$formValidation=_this3.formValidationList)||void 0===_this3$formValidation?void 0:_this3$formValidation.length)||0,_this3.showPagination=_this3.currentListCount===perPage||1!=_this3.page,_this3.hasMoreList=_this3.currentListCount===perPage,_context2.next=15;break;case 12:_context2.prev=12,_context2.t0=_context2["catch"](1),_this3.$message.error(_context2.t0);case 15:_this3.isLoading=!1;case 16:case"end":return _context2.stop()}}),_callee2,null,[[1,12]])})))()}}},form_validation_FormValidationListvue_type_script_lang_js=FormValidationListvue_type_script_lang_js,FormValidationList_component=(0,componentNormalizer/* default */.Z)(form_validation_FormValidationListvue_type_script_lang_js,FormValidationListvue_type_template_id_413bdd39_render,FormValidationListvue_type_template_id_413bdd39_staticRenderFns,!1,null,null,null)
/* harmony default export */,FormValidationList=FormValidationList_component.exports,defaultDragOptions={animation:150,easing:"cubic-bezier(1, 0, 0, 1)"},fullWidthFieldsHash=["TEXTAREA","ATTACHMENT","TEAMSTAFFASSIGNMENT","TASKS","IMAGE","FILE","DURATION","SIGNATURE","NOTES","GEO_LOCATION"],hideDeleteIconFieldsHash=["subject","siteId"],excludeFieldsHash=["stateFlowId","moduleState"],FormsEditvue_type_script_lang_js={name:"forms-edit",props:["moduleName","id","onSave","showDeleteForField","isUpdateForm"],mixins:[WebFormMixin/* default */.Z,FormBuilderMixin/* default */.Z,TeamStaffMixin/* default */.Z],components:{FFormLoader:FFormLoader,draggable:vuedraggable_umd_default(),FieldProperties:FieldProperties,LookupFieldProperties:LookupFieldProperties,MultiLineFieldProperties:MultiLineFieldProperties,FDurationField:FDurationField/* default */.Z,FormsPhotoField:FormsPhotoField,FSiteField:FSiteField/* default */.Z,FSubForm:FSubForm["default"],SubFormModulesList:SubFormModulesList,SubFormValuesConfigBox:SubFormValuesConfigBox,FFileUpload:FFileUpload/* default */.Z,FSignaturePad:FSignaturePad/* default */.Z,FDatePicker:FDatePicker/* default */.Z,FTimePicker:FTimePicker/* default */.Z,FEmailField:FEmailField/* default */.Z,FLocationField:FLocationField/* default */.Z,FormRulesList:FormRulesList,FUrlField:FUrlField/* default */.Z,DefaultFieldProperties:DefaultFieldProperties,SubformRulesList:SubformRulesList,ValidationRulesList:FormValidationList,FCurrencyField:FCurrencyField/* default */.Z,FNewCurrencyField:FNewCurrencyField/* default */.Z},data:function(){return{module:"formBuilder",formRulesMap:{},appId:null,isFormLoading:!1,isPreview:!0,defaultFields:[],systemFields:[],customFields:[],newSection:[{name:"New Section",showLabel:!0,fields:[]}],newSubForm:[{name:"Subform",fields:[],subForm:{},subFormId:-1,showLabel:!0,isSubForm:!0}],formProperties:{displayName:"Untitled form",id:null,description:null,labelPosition:"top",primaryBtnLabel:"Submit",secondaryBtnLabel:"Cancel"},sections:[],activeField:{},activeSection:{},activeSectionIndex:null,activeFieldsTab:"systemfields",activeTab:"builder",draggedIntoNewSection:!1,allowUpdateProp:!0,allowUpdateFormProp:!1,isSaving:!1,isFieldPropertiesLoading:!1,debounceSaveRecord:null,hasError:!1,filter:{},jobPlansList:[],taskDetails:[],spaceAssetResourceObj:{},taskTemplateName:"",isCustomModule:!1,openMultiLinePropDialog:!1,openLookupDialog:!1,openFieldNamePropDialog:!1,openSubformDialog:!1,openSubformDefaultDialog:!1,moduleList:[],lookupField:null,defaultField:null,multiLineField:null,subFormsModules:[],formObj:{},isLocationField:!1}},beforeDestroy:function(){window.removeEventListener("beforeunload",this.beforeWindowUnload)},created:function(){var _this=this,moduleName=this.moduleName,formId=this.formId,FORM_SOURCE=constant/* default */.Z.FORM_SOURCE;this.isLookupSimple=utils_field/* isLookupSimple */.qu,this.isMultiLookup=utils_field/* isMultiLookup */.On,this.isSiteField=utils_field/* isSiteField */.Vn,this.$store.dispatch("loadGroups"),this.getFormRulesMap(),this.isFormLoading=!0;var promises=[],fetchUnusedFieldsUrl="/v2/forms/fields/unusedlist?moduleName=".concat(moduleName,"&formId=").concat(formId),formsDetails="/v2/forms/".concat(moduleName,"?formId=").concat(formId,"&formSourceType=").concat(FORM_SOURCE.BUILDER),fetchModulesList="/v2/module/list?defaultModules=true",fetchSubFormsModulesList="v2/forms/subFormModules?moduleName=".concat(moduleName);promises.push(http/* default */.ZP.get(formsDetails)),promises.push(http/* default */.ZP.get(fetchUnusedFieldsUrl)),promises.push(http/* default */.ZP.get(fetchModulesList)),promises.push(http/* default */.ZP.get(fetchSubFormsModulesList)),Promise.all(promises).then((function(_ref){var _ref2=(0,slicedToArray/* default */.Z)(_ref,4),_ref2$=_ref2[0],formsData=void 0===_ref2$?{}:_ref2$,_ref2$2=_ref2[1],unusedFieldsData=void 0===_ref2$2?{}:_ref2$2,_ref2$3=_ref2[2],modulesData=void 0===_ref2$3?{}:_ref2$3,_ref2$4=_ref2[3],subFormsModulesData=void 0===_ref2$4?{}:_ref2$4,fields=unusedFieldsData.data.result.fields,_formsData$data$resul=formsData.data.result,form=_formsData$data$resul.form,_formsData$data$resul2=_formsData$data$resul.form,sections=_formsData$data$resul2.sections,module=_formsData$data$resul2.module,custom=module.custom,moduleList=(module.name,modulesData.data.result.moduleList),subFormModules=subFormsModulesData.data.result.modules,systemFields=fields.systemFields,customFields=fields.customFields,filteredCustomFields=[];
// Have to remove these fields before loading form builder
(0,validation/* isEmpty */.xb)(customFields)||(filteredCustomFields=customFields.filter((function(field){return!excludeFieldsHash.includes((field||{}).name)}))),_this.sections=_this.deserializeSectionData(sections),_this.defaultFields=constant/* default */.Z.FORMS_DEFAULT_FIELDS.filter((function(field){return!field.hasOwnProperty("license")||field.hasOwnProperty("license")&&_this.$helpers.isLicenseEnabled(field.license)})),_this.removeCurrencyFieldForSystemModule(custom),_this.customFields=_this.deserializeData(filteredCustomFields),_this.systemFields=_this.deserializeData(systemFields),moduleList=moduleList.filter((function(module){return"users"!==module.name})),_this.moduleList=moduleList,_this.subFormsModules=subFormModules,_this.isCustomModule=custom,_this.activeFieldsTab=_this.isCustomModule?"customfields":"systemfields",_this.allowUpdateFormProp=!1,_this.formProperties.labelPosition=constant/* default */.Z.FORMS_LABELALIGNMENT_ENUMHASH[form.labelPosition],_this.formProperties.id=formId,_this.formProperties.description=form.description,_this.formProperties.displayName=form.displayName,_this.isFormLoading=!1,_this.allowUpdateFormProp=!0,_this.appId=form.appId,_this.formObj=form})).catch((function(_ref3){var message=_ref3.message;_this.$message.error(message),_this.isFormLoading=!1,_this.allowUpdateFormProp=!0}))},watch:{isSaving:function(newVal){newVal?window.addEventListener("beforeunload",this.beforeWindowUnload):window.removeEventListener("beforeunload",this.beforeWindowUnload)}},computed:{defaultFieldsDragOptions:function(){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},defaultDragOptions),{},{group:{name:"fields",pull:"clone",put:!1},sort:!1})},systemFieldsDragOptions:function(){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},defaultDragOptions),{},{group:"fields",sort:!1})},formFields:function(){var sections=this.sections,fields=[];return(0,validation/* isEmpty */.xb)(sections)||sections.forEach((function(sec){(0,validation/* isEmpty */.xb)(sec.fields)||sec.fields.forEach((function(field){fields.push(field)}))})),fields},newSectionDragOptions:function(){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},defaultDragOptions),{},{group:{name:"sections",pull:"clone",put:!1}})},newSubFormDragOptions:function(){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},defaultDragOptions),{},{group:{name:"sections",pull:"clone",put:!1}})},formSectionDragOptions:function(){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},defaultDragOptions),{},{draggable:".form-drag-section",group:"sections",sort:!0})},formFieldsDragOptions:function(){return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},defaultDragOptions),{},{draggable:".form-drag-item",group:"fields",sort:!0})},ghostClass:function(){var labelPosition=this.formProperties.labelPosition;return"top"===labelPosition?"ghost-class-top":"ghost-class"},formId:function(){var id=this.id;return parseInt(id)},isSubFormPresent:function(){var _ref4=this||{},formObj=_ref4.formObj,_ref5=formObj||{},_ref5$sections=_ref5.sections,sections=void 0===_ref5$sections?[]:_ref5$sections,isSubFormPresent=sections.some((function(section){return!(0,validation/* isEmpty */.xb)((section||{}).subForm)}));return isSubFormPresent}},methods:{
//Temp hack should be removed in revamp
formFieldUpdated:function(field){var formObj=this.formObj,_ref6=field||{},selectedFieldId=_ref6.id,_ref7=formObj||{},sections=_ref7.sections,updatedSections=sections.map((function(section){var _ref8=section||{},fields=_ref8.fields,fieldIndex=fields.findIndex((function(field){return field.id===selectedFieldId}));return-1!==fieldIndex&&(fields[fieldIndex]=field,section.fields=fields),section}));this.$set(formObj,"sections",updatedSections)},beforeWindowUnload:function(e){e.preventDefault(),e.returnValue=""},getFormRulesMap:function(){var _this2=this,formId=this.formId;this.$http.post("v2/form/rule/getRulesMap",{formRuleContext:{formId:formId}}).then((function(_ref9){var data=_ref9.data;if(0!==data.responseCode)throw new Error;_this2.formRulesMap=data.result.formRuleResultJSON})).catch((function(){_this2.$message.error("Could not load form rule")}))},redirectToFormsList:function(){var moduleName=this.moduleName,appId=this.appId,onSave=this.onSave,$route=this.$route,isSetupPage=this.$getProperty($route.query,"setup",!1);if(isSetupPage)this.sendMessage();else if((0,validation/* isFunction */.mf)(onSave))onSave();else{var currentPath=this.$router.resolve({name:"modules-details",params:{moduleName:moduleName}}).href;this.$router.push({path:"".concat(currentPath,"/layouts"),query:{appId:appId}})}},setActiveSection:function(rowIndex){var hasError=this.hasError,sections=this.sections,isNotLastSection=rowIndex!==sections.length-1;hasError||(
// If empty section is clicked, then show form properties
this.activeSection=isNotLastSection?this.sections[rowIndex]:{},this.activeField={},this.allowUpdateProp=!0)},setActiveField:function(field,rowIndex,columnIndex){var hasError=this.hasError,hideField=field.hideField,displayTypeEnum=field.displayTypeEnum;if(!hasError&&("IMAGE"!==displayTypeEnum||!hideField)){this.activeSection={};var activeField=(this.sections[rowIndex]||{}).fields[columnIndex];if("MULTI_LOOKUP_SIMPLE"===displayTypeEnum){var _ref10=activeField||{},value=_ref10.value;"string"===typeof value&&(value=JSON.parse(value)),this.activeField=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},activeField),{},{value:value})}else this.activeField=activeField;this.allowUpdateProp=!0}},removeActiveField:function(){var hasError=this.hasError;hasError||(this.activeSection={},this.activeField={},this.allowUpdateProp=!1)},layoutIcon:function(span){return __webpack_require__(1===span?688331:218352)},changeLayout:function(element){element.span=1===element.span?2:1},isFieldEmpty:function(field){return(0,validation/* isEmpty */.xb)(field)},isSectionActive:function(_ref11){var id=_ref11.id,activeSection=this.activeSection;return(activeSection||{}).id===id},isImageSection:function(section){var fields=section.fields;return!(0,validation/* isEmpty */.xb)(fields)&&fields.some((function(field){return"photo"===field.name||"IMAGE"===field.displayTypeEnum}))},canShowLayoutIcon:function(field){var displayTypeEnum=field.displayTypeEnum,hideField=field.hideField;return!fullWidthFieldsHash.includes(displayTypeEnum)&&!hideField},canShowSectionHeader:function(element,rowIndex){var sections=this.sections,isNotLastSection=rowIndex!==sections.length-1;return isNotLastSection&&element.showLabel},canShowSectionDelete:function(section,rowIndex){var sections=this.sections,fields=section.fields,isNotLastSection=rowIndex!==sections.length-1;return(0,validation/* isEmpty */.xb)(fields)&&isNotLastSection},canShowFieldDelete:function(_ref12){var name=_ref12.name,isCustomModule=this.isCustomModule,showDeleteForField=this.showDeleteForField;return(0,validation/* isFunction */.mf)(showDeleteForField)?showDeleteForField({name:name}):isCustomModule?!["name","photo"].includes(name):!hideDeleteIconFieldsHash.includes(name)},createNewFieldInstance:function(field){var newFieldInstance=(0,utility_methods/* cloneObject */.kI)(field);return newFieldInstance},removeSection:function(removedSection,rowIndex){var sections=this.sections,activeSection=this.activeSection;(0,validation/* isEmpty */.xb)(activeSection)||removedSection.id!==activeSection.id||(this.activeSection={}),sections.splice(rowIndex,1),this.debounceSaveRecord()},removeField:function(removedField,row,column){var activeField=this.activeField,formFields=this.formFields,systemFields=this.systemFields,customFields=this.customFields;if(1!==formFields.length){
// To check whether the removed field is system field or custom field
var field=removedField.field,isDefault=removedField.isDefault,displayTypeEnum=removedField.displayTypeEnum,_ref13=field||{},isSystemField=_ref13.default,isNotesField="NOTES"===displayTypeEnum;(0,validation/* isEmpty */.xb)(activeField)||removedField.id!==activeField.id||this.removeActiveField(),isNotesField||((0,validation/* isEmpty */.xb)(field)||isSystemField?isDefault||(this.resetFieldValues(removedField),systemFields.push(removedField)):(this.resetFieldValues(removedField),customFields.push(removedField))),(0,validation/* isEmpty */.xb)(this.sections[row])||this.sections[row].fields.splice(column,1),this.debounceSaveRecord()}else this.$message.error("There must be atleast one field")},resetFieldValues:function(field){"TEAMSTAFFASSIGNMENT"===field.displayTypeEnum?field.value={assignedTo:{id:""},assignmentGroup:{id:""}}:(0,field_utils/* isChooserTypeField */.Rq)(field)?field.value={id:null}:field.value=null},resetActiveSection:function(){this.activeSection={},this.activeSectionIndex=null},isSpaceChooser:function(column){var displayTypeEnum=column.displayTypeEnum;return"SPACECHOOSER"===displayTypeEnum},resetActiveFields:function(){this.activeField={}},formatSectionsArray:function(){var sections=this.sections,sectionsLength=Object.keys(sections).length,_sections=(0,utility_methods/* cloneArray */.M2)(sections);Object.keys(sections).forEach((function(row){var fields=sections[row].fields;Number(row)===sectionsLength-1&&((0,validation/* isEmpty */.xb)(fields)||_sections.push({name:"section_".concat(sectionsLength),id:-1,fields:[]}))})),this.sections=_sections},
/* Drag and Drop related methods */onEnd:function(){var formElement=(this.$refs["formsEdit"]||{}).$el;formElement.classList.remove("disable-hover")},onStart:function(){var formElement=(this.$refs["formsEdit"]||{}).$el;formElement.classList.add("disable-hover")},onSectionsMove:function(_ref14){var draggedContext=_ref14.draggedContext,relatedContext=_ref14.relatedContext,_draggedContext$eleme=draggedContext.element,draggedElement=void 0===_draggedContext$eleme?{}:_draggedContext$eleme,_relatedContext$eleme=relatedContext.element,relatedElement=void 0===_relatedContext$eleme?{}:_relatedContext$eleme,isEmptyElementDragged=-1!==draggedElement.id,isSectionDraggedOverEmptyDiv=-1!==relatedElement.id;return isEmptyElementDragged&&isSectionDraggedOverEmptyDiv},onFieldsMove:function(_ref15){var draggedContext=_ref15.draggedContext,relatedContext=_ref15.relatedContext,draggedElement=draggedContext.element,relatedElement=relatedContext.element,isSaving=this.isSaving;
/*
        Cancel drag if empty section dragged over fields.
      */return!isSaving&&(!(0,validation/* isEmpty */.xb)(draggedElement)&&((0,validation/* isEmpty */.xb)(relatedElement)?this.draggedIntoNewSection=!0:this.draggedIntoNewSection=!1,!0))},onNewSectionFieldsMove:function(){var isSaving=this.isSaving;return!isSaving},onFieldChange:function(rowIndex,section,_ref16){var _this3=this,_ref16$added=_ref16.added,added=void 0===_ref16$added?{}:_ref16$added,_ref16$moved=_ref16.moved,moved=void 0===_ref16$moved?{}:_ref16$moved,sections=this.sections,isLastSection=rowIndex===sections.length-1,_added$element=added.element,addedElement=void 0===_added$element?{}:_added$element,columnIndex=added.newIndex,_moved$element=moved.element,movedElement=void 0===_moved$element?{}:_moved$element;if(!(0,validation/* isEmpty */.xb)(addedElement)){var displayTypeEnum=addedElement.displayTypeEnum,isDefaultFields=addedElement.isDefault,draggedIntoNewSection=this.draggedIntoNewSection,isNotesField="NOTES"===displayTypeEnum;if(fullWidthFieldsHash.includes(displayTypeEnum)||(addedElement.span=draggedIntoNewSection?1:2),this.allowUpdateProp=!0,isDefaultFields)if(addedElement.rowIndex=rowIndex,addedElement.columnIndex=columnIndex,["GEO_LOCATION","LOOKUP"].includes(displayTypeEnum)){var isLocationField="GEO_LOCATION"===displayTypeEnum;this.addLookupField(addedElement,isLocationField)}
// else if (displayTypeEnum === 'GEO_LOCATION') {
//   this.addLocationField(addedElement)
// }
else"TEXTAREA"===displayTypeEnum?this.addMultiLineField(addedElement):isNotesField?this.addNotesField(addedElement):this.addDefaultField(addedElement);else if(isLastSection){var _sections2=this.sections,sectionsLength=_sections2.length+1;
// Pushing empty section object, to support adding new section.
_sections2.push({name:"section_".concat(sectionsLength),id:-1,showLabel:!1,fields:[]}),this.addNewSection().then((function(sections){var activeElement=_this3.findSelectedField(sections,addedElement);_this3.resetActiveSection(),_this3.activeField=activeElement}))}else this.activeField=addedElement,this.resetActiveSection(),this.saveFormRecord({})}(0,validation/* isEmpty */.xb)(movedElement)||(this.activeField=movedElement,this.resetActiveSection(),this.allowUpdateProp=!0,this.saveFormRecord({})),this.formatSectionsArray()},onSectionChange:function(_ref17){var _ref17$added=_ref17.added,added=void 0===_ref17$added?{}:_ref17$added,_ref17$moved=_ref17.moved,moved=void 0===_ref17$moved?{}:_ref17$moved,_added$element2=added.element,addedElement=void 0===_added$element2?{}:_added$element2,elementIndex=added.newIndex,_moved$element2=moved.element,movedElement=void 0===_moved$element2?{}:_moved$element2,movedElementIndex=moved.newIndex;if(!(0,validation/* isEmpty */.xb)(addedElement)){var isSubForm=addedElement.isSubForm;this.activeSection=addedElement,this.activeSectionIndex=elementIndex,this.resetActiveFields(),isSubForm?(delete addedElement.isSubForm,this.openSubformDialog=!0):this.addNewSection()}(0,validation/* isEmpty */.xb)(movedElement)||(this.activeSectionIndex=movedElementIndex,this.activeSection=movedElement,this.resetActiveFields(),this.allowUpdateProp=!0,this.debounceSaveRecord())},updateSubFormSection:function(form){var _this4=this,id=form.id,activeSection=this.activeSection;(0,validation/* isEmpty */.xb)(activeSection)||(this.allowUpdateProp=!1,activeSection.subFormId=id,activeSection.sectionType=2),this.addNewSection().then((function(){_this4.allowUpdateProp=!0}))},saveDefaultValue:function(fieldObj){this.$set(this,"activeField",fieldObj)},addNewSection:function(){var _this5=this;return this.isFieldPropertiesLoading=!0,this.saveFormRecord({}).then((function(){return _this5.isFieldPropertiesLoading=!1})).catch((function(){return _this5.isFieldPropertiesLoading=!1}))},addLookupField:function(element){var isLocationField=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isLocationField=isLocationField,this.openLookupDialog=!0,this.lookupField=element},
// addLocationField(element){
//   this.isLocationField = true
//   this.openLookupDialog = true
//   this.lookupField = element
// },
addDefaultField:function(element){this.openFieldNamePropDialog=!0,this.defaultField=element},addMultiLineField:function(element){this.openMultiLinePropDialog=!0,this.multiLineField=element},addNotesField:function(element){var _this6=this,columnIndex=element.columnIndex,rowIndex=element.rowIndex;this.isFieldPropertiesLoading=!0,this.saveFormRecord({}).then((function(sections){if(!(0,validation/* isEmpty */.xb)(sections)&&!(0,validation/* isEmpty */.xb)(columnIndex)&&!(0,validation/* isEmpty */.xb)(rowIndex)){var selectedSection=sections[rowIndex]||{},fields=selectedSection.fields,selectedField=fields[columnIndex]||{};_this6.resetActiveSection(),_this6.activeField=selectedField}})).finally((function(){return _this6.isFieldPropertiesLoading=!1}))},addNewDefaultField:function(element){var _this7=this,moduleName=this.moduleName,url="/v2/modules/fields/add",data={fieldJson:this.serializeFields(element,constant/* default */.Z.ADD_FIELDS_RESOURCE_PROPS),moduleName:moduleName};this.isFieldPropertiesLoading=!0,this.isSaving=!0,http/* default */.ZP.post(url,data).then((function(_ref18){var _ref18$data=_ref18.data,message=_ref18$data.message,responseCode=_ref18$data.responseCode,_ref18$data$result=_ref18$data.result,result=void 0===_ref18$data$result?{}:_ref18$data$result;if(0===responseCode){var _result$field=result.field,field=void 0===_result$field?{}:_result$field;return element.name=field.name,element.displayName=field.displayName,element.fieldId=field.fieldId,_this7.saveFormRecord({}).then((function(sections){var activeElement=_this7.findSelectedField(sections,element);_this7.resetActiveSection(),_this7.activeField=activeElement,_this7.isFieldPropertiesLoading=!1,_this7.isSaving=!1,_this7.openLookupDialog=!1,_this7.openMultiLinePropDialog=!1,_this7.openFieldNamePropDialog=!1}))}throw new Error(message)})).catch((function(_ref19){var message=_ref19.message;_this7.$message.error(message),_this7.isFieldPropertiesLoading=!1,_this7.isSaving=!1}))},deserializeFormData:function(result){var activeField=this.activeField,activeSection=this.activeSection,activeSectionIndex=this.activeSectionIndex,_result$form$sections=result.form.sections,sections=void 0===_result$form$sections?[]:_result$form$sections,deserializedSection=this.$set(this,"sections",this.deserializeSectionData(sections));return(0,validation/* isEmpty */.xb)(activeField)?(0,validation/* isEmpty */.xb)(activeSection)||(0,validation/* isEmpty */.xb)(activeSectionIndex)||(this.activeSection=deserializedSection[activeSectionIndex]):this.activeField=this.findSelectedField(deserializedSection,activeField),deserializedSection},updatePhotoField:function(field){var _this8=this,id=field.id,hideField=field.hideField,url="v2/forms/fields/update",data={formField:{id:id,hideField:hideField}};this.$http.post(url,data).then((function(_ref20){var _ref20$data=_ref20.data,message=_ref20$data.message,responseCode=_ref20$data.responseCode;if(0!==responseCode)throw new Error(message)})).catch((function(_ref21){var message=_ref21.message;_this8.$message.error(message)}))},canShowSubFormDefaultDialog:function(){this.$set(this,"openSubformDefaultDialog",!0),this.$set(this,"allowUpdateProp",!1)},closeFieldNamePropDialog:function(element){this.openFieldNamePropDialog=!1;var rowIndex=element.rowIndex,columnIndex=element.columnIndex;(0,validation/* isEmpty */.xb)(rowIndex)||(0,validation/* isEmpty */.xb)(columnIndex)||this.removeField(element,rowIndex,columnIndex)},removeCurrencyFieldForSystemModule:function(custom){var index=(this.defaultFields||[]).findIndex((function(fld){return"MULTI_CURRENCY"===fld.displayTypeEnum})),currencySupportedModules=["workorder","purchaserequest","purchaseorder","quote","budget"],removeCurrencyField=!currencySupportedModules.includes(this.moduleName)&&!custom;-1!=index&&removeCurrencyField&&this.defaultFields.splice(index,1)}}},modules_FormsEditvue_type_script_lang_js=FormsEditvue_type_script_lang_js,FormsEdit_component=(0,componentNormalizer/* default */.Z)(modules_FormsEditvue_type_script_lang_js,render,staticRenderFns,!1,null,"61fd330e",null)
/* harmony default export */,FormsEdit=FormsEdit_component.exports},
/***/706881:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CurrencyPopOver}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/organizationSetting/currency/CurrencyPopOver.vue?vue&type=template&id=434b446a&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showCurrencyField?_c("div",{staticClass:"d-flex"},[_vm.showInfo?_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))]):_vm._e(),_vm.showMultiCurrencyInfo?_c("el-popover",{attrs:{placement:"right",title:_vm.$t("setup.currency.rate"),width:"230",trigger:"hover",content:_vm.currencyContent,"open-delay":5,disabled:_vm.isEmpty(_vm.baseValue)}},[_vm.showInfo?_vm._e():_c("div",{class:[_vm.baseValue&&"pointer"],attrs:{slot:"reference"},slot:"reference"},[_c("div",[_vm._v(_vm._s(""+_vm.getMultiCurrencyFieldValue))]),_c("div",{staticClass:"f12"},[_vm._v(_vm._s(_vm.baseValue))])]),_vm.isBaseCode||!_vm.showInfo||_vm.hideInfoBtn?_vm._e():_c("fc-icon",{staticClass:"pointer info-position mL2",attrs:{slot:"reference",group:"dsm",name:"info",size:"13"},slot:"reference"})],1):_c("span",[_vm._v(_vm._s(_vm.getMultiCurrencyFieldValue||"---"))])],1):_c("span",[_vm._v("---")])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(990260)),CurrencyUtil=__webpack_require__(15426),vuex_esm=__webpack_require__(420629),CurrencyPopOvervue_type_script_lang_js={props:["field","details","showInfo","hideInfoBtn"],data:function(){return{baseValue:"",isEmpty:validation/* isEmpty */.xb}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({account:function(state){return state.account},currencyList:function(state){return state.activeCurrencies}})),{},{showMultiCurrencyInfo:function(){var _ref=this.multiCurrency||{},multiCurrencyEnabled=_ref.multiCurrencyEnabled;return multiCurrencyEnabled},isBaseCode:function(){var _ref2=this.multiCurrency||{},baseCode=_ref2.currencyCode,_ref3=this.details||{},currencyCode=_ref3.currencyCode;return baseCode===currencyCode},showCurrencyField:function(){var currencyValue=this.currencyValue;return!(0,validation/* isEmpty */.xb)(currencyValue)&&"---"!=currencyValue},multiCurrency:function(){var _ref4=this.$getProperty(this.account,"data.currencyInfo")||{},displaySymbol=_ref4.displaySymbol,currencyCode=_ref4.currencyCode,multiCurrencyEnabled=_ref4.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}},currencyContent:function(){var details=this.details,currencyValue=this.currencyValue,baseSymbol=this.multiCurrency.displaySymbol;if(!(0,validation/* isEmpty */.xb)(currencyValue)){var _ref5=details||{},exchangeRate=_ref5.exchangeRate,currencyCode=_ref5.currencyCode,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)||currency.displaySymbol===baseSymbol)return null;var _ref6=currency||{},displaySymbol=_ref6.displaySymbol,content="".concat(baseSymbol," 1 = ").concat(displaySymbol," ").concat(exchangeRate);return content}return"---"},currencyValue:function(){var details=this.details,field=this.field,_ref7=details||{},data=_ref7.data;return field.displayValue||details[field.name]||(null===data||void 0===data?void 0:data[field.name])},getMultiCurrencyFieldValue:function(){var currencyValue=this.currencyValue,showInfo=this.showInfo,_this$multiCurrency=this.multiCurrency,baseSymbol=_this$multiCurrency.displaySymbol,baseCode=_this$multiCurrency.currencyCode,multiCurrencyEnabled=_this$multiCurrency.multiCurrencyEnabled,_ref8=this.details||{},currencyCode=_ref8.currencyCode,exchangeRate=_ref8.exchangeRate,currency=(this.currencyList||[]).find((function(currency){return currencyCode===currency.currencyCode})),baseCurrency=(this.currencyList||[]).find((function(currency){return baseCode===currency.currencyCode}));if((0,validation/* isEmpty */.xb)(currency)&&!(0,validation/* isEmpty */.xb)(currencyValue))return"".concat(baseSymbol," ").concat(currencyValue);var _ref9=currency||{},displaySymbol=_ref9.displaySymbol;displaySymbol=(0,validation/* isEmpty */.xb)(displaySymbol)?baseSymbol:displaySymbol;var baseValue="";if(multiCurrencyEnabled&&baseCode!==currencyCode){var value=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue/exchangeRate,baseCurrency);baseValue="( ".concat(baseSymbol," ").concat(value," )")}return currencyValue=(0,CurrencyUtil/* getCurrencyInDecimalValue */.Jg)(currencyValue,currency),this.setBaseValue(baseValue),showInfo?"".concat(displaySymbol," ").concat(currencyValue," ").concat(baseValue):"".concat(displaySymbol," ").concat(currencyValue)}}),created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.$store.dispatch("getActiveCurrencyList");case 2:case"end":return _context.stop()}}),_callee)})))()},methods:{setBaseValue:function(value){this.baseValue=value}}},currency_CurrencyPopOvervue_type_script_lang_js=CurrencyPopOvervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(currency_CurrencyPopOvervue_type_script_lang_js,render,staticRenderFns,!1,null,"434b446a",null)
/* harmony default export */,CurrencyPopOver=component.exports},
/***/116143:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PlaceholderScriptConfig}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/popups/PlaceholderScriptConfig.vue?vue&type=template&id=47cac1e8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container fc-dialog-center-body-p0",attrs:{visible:!0,width:"60%",title:"Placeholder Script Configuration","append-to-body":!0,"before-close":_vm.close}},[_c("div",{staticClass:"height350 overflow-y-scroll pB50"},[_c("code-mirror",{attrs:{codeeditor:!0},model:{value:_vm.workFlowString,callback:function($$v){_vm.workFlowString=$$v},expression:"workFlowString"}})],1),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Save")])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),validation=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(212826),__webpack_require__(990260)),CodeMirror=__webpack_require__(919324),PlaceholderScriptConfigvue_type_script_lang_js={props:["scriptTemplate","module"],components:{CodeMirror:CodeMirror/* default */.Z},data:function(){return{workFlowString:null}},created:function(){this.workFlowString=this.getScriptWorkflow()},methods:{getScriptWorkflow:function(){var _ref=this.scriptTemplate||{},workflowV2String=_ref.workflowV2String;return(0,validation/* isEmpty */.xb)(workflowV2String)?null:workflowV2String.replace("Map scriptFunc(Map "+this.module+") {\n","").replace(new RegExp("\n}$"),"")},close:function(){this.$emit("onClose")},save:function(){var moduleName=this.module,workFlowString=this.workFlowString,scriptTemplate=this.scriptTemplate,_ref2=scriptTemplate||{},id=_ref2.id,userWorkflow=null;(0,validation/* isEmpty */.xb)(workFlowString)||(userWorkflow={isV2Script:!0,workflowV2String:"Map scriptFunc(Map "+moduleName+") {\n"+workFlowString+"\n}"}),(0,validation/* isEmpty */.xb)(id)||(userWorkflow=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},userWorkflow),{},{id:id})),this.$emit("update:scriptTemplate",userWorkflow),this.close()}}},popups_PlaceholderScriptConfigvue_type_script_lang_js=PlaceholderScriptConfigvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(popups_PlaceholderScriptConfigvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PlaceholderScriptConfig=component.exports},
/***/557428:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return StateTransitionCriteria}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/stateflow/popups/StateTransitionCriteria.vue?vue&type=template&id=1058ab2f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fieldchange-Dialog pB15 fc-dialog-center-container",attrs:{visible:!0,width:"50%",title:"Criteria","custom-class":"dialog-header-padding","append-to-body":!0,"before-close":_vm.close}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorMessage},on:{"update:error":function($event){_vm.error=$event}}}),_c("div",{staticClass:"height330 overflow-y-scroll pB50"},[_c("span",{staticClass:"new-body-modal"},[_c("new-criteria-builder",{ref:"criteriaBuilder",staticClass:"stateflow-criteria",attrs:{exrule:_vm.criteria,module:_vm.module,isRendering:_vm.criteriaRendered,hideTitleSection:!0},on:{condition:function(newValue){return _vm.criteria=newValue},"update:isRendering":function($event){_vm.criteriaRendered=$event},"update:is-rendering":function($event){_vm.criteriaRendered=$event}},model:{value:_vm.criteria,callback:function($$v){_vm.criteria=$$v},expression:"criteria"}})],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.saveCriteria()}}},[_vm._v("Save")])],1)],1)},staticRenderFns=[],ErrorBanner=(__webpack_require__(169358),__webpack_require__(260228),__webpack_require__(297157)),NewCriteriaBuilder=__webpack_require__(859850),validation=__webpack_require__(990260),clone=__webpack_require__(766678),clone_default=__webpack_require__.n(clone),StateTransitionCriteriavue_type_script_lang_js={components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z,ErrorBanner:ErrorBanner/* default */.Z},props:["module","activeCriteria"],data:function(){return{criteria:null,error:!1,errorMessage:"",criteriaRendered:!1}},created:function(){this.criteria=this.activeCriteria},methods:{saveCriteria:function(){var criteria=clone_default()(this.criteria),activeCriteria=this.serializeCriteria(criteria);if((0,validation/* isEmpty */.xb)(activeCriteria))return this.error=!0,void(this.errorMessage=" Please select fields");this.$emit("save",activeCriteria)},close:function(){this.$emit("close")},serializeCriteria:function(criteria){for(var _loop=function(){var condition=_Object$keys[_i],hasValidFieldName=criteria.conditions[condition].hasOwnProperty("fieldName")&&!(0,validation/* isEmpty */.xb)(criteria.conditions[condition].fieldName);if(hasValidFieldName){var discardKeys=["valueArray","operatorsDataType","operatorLabel","operator"];discardKeys.forEach((function(key){delete criteria.conditions[condition][key]}))}else delete criteria.conditions[condition]},_i=0,_Object$keys=Object.keys(criteria.conditions);_i<_Object$keys.length;_i++)_loop();return criteria&&criteria.conditions&&0===Object.keys(criteria.conditions).length&&(criteria=null),criteria}}},popups_StateTransitionCriteriavue_type_script_lang_js=StateTransitionCriteriavue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(popups_StateTransitionCriteriavue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,StateTransitionCriteria=component.exports},
/***/345265:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"35079cf978684c9b6a17e182df923ff5.svg";
/***/},
/***/293656:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"e179f34e6169d9164845bf6c1d403c8e.svg";
/***/},
/***/688331:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2e59de5b8eb4021854186f6c49ccb2bd.svg";
/***/},
/***/218352:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ee5bef04eaa4f15f627b5be41f7185d9.svg";
/***/},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/406729:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4b0a0639ba62c71bad4a5b821631916f.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/},
/***/30684:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"52c2ff301190417db7febd08d4cd5153.svg";
/***/},
/***/572902:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"db5324b7cf9058a0aa45899e55bf6444.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/79354.js.map