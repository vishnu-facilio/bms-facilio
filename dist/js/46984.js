"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[46984],{
/***/882401:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ItemTool}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/ItemTool.vue?vue&type=template&id=eff8209c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.recordData?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_vm.showSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{attrs:{trigger:"click",height:"120px",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.photos,(function(photo,index){return photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()})),1)],1):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]),_vm.showName?_c("div",[_c("div",{staticClass:"textoverflow-ellipsis width110px pL8"},[_vm._v(" "+_vm._s("others"===_vm.module?_vm.recordData:_vm.recordData.name)+" ")])]):_vm._e()])]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),ItemToolvue_type_script_lang_js=(__webpack_require__(434284),{props:["size","recordData","name","hovercard","module"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.recordData.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge"]}},mounted:function(){this.loadAvatarUrl()},computed:{showSlide:function(){if(this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},watch:{recordData:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){this.avatarUrl=this.recordData.photoUrl,this.recordData.photoUrl?this.avatarUrl=this.recordData.photoUrl:this.avatarUrl=this.getDefaultAvatar()},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.recordData){if("item"===this.module)return __webpack_require__(73188);if("tool"===this.module)return __webpack_require__(392708);if("others"===this.module)return __webpack_require__(73188)}return __webpack_require__(73188)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}}),avatar_ItemToolvue_type_script_lang_js=ItemToolvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_ItemToolvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ItemTool=component.exports},
/***/684812:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PurchaseContractSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/contract/summary/PurchaseContractSummary.vue?vue&type=template&id=5cd14b1a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.summaryData?_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__columns fc__layout__box"},[_c("div",{staticClass:"fc__layout__flexes fc__layout__has__columns"},[_c("div",{staticClass:"fc__layout__has__row fc__layout__box"},[_c("div",{staticClass:"fc__layout__has__row fc__submenu__left fc__layout__box"},[_c("div",{staticClass:"fc__layout_media_center fc__submenu__header fc__layout__has__columns pointer"},[_c("i",{staticClass:"el-icon-back fw6",on:{click:_vm.back}}),_vm.showRevisionHistory?_c("div",{staticClass:"label-txt-black pL10"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.revision_history"))+" "+_vm._s(_vm.revisionHistoryObj?_vm.revisionHistoryObj.name:"---")+" ")]):_c("div",{staticClass:"label-txt-black pL10"},[_c("el-popover",{attrs:{placement:"bottom",width:"170","popper-class":"popover-height inventory-list-popover",trigger:"click"},model:{value:_vm.toggle,callback:function($$v){_vm.toggle=$$v},expression:"toggle"}},[_c("ul",_vm._l(_vm.views,(function(view,index){return _c("li",{key:index,class:{active:_vm.currentViewDetail.displayName===view.displayName},on:{click:function($event){return _vm.switchCategory(view)}}},[_vm._v(" "+_vm._s(view.displayName)+" ")])})),0),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._v(_vm._s(_vm.currentViewDetail.displayName)),_c("i",{staticClass:"el-icon-arrow-down el-icon-arrow-down-tv",staticStyle:{"padding-left":"8px"}})])])],1),_vm.showRevisionHistory?_vm._e():_c("div",{staticClass:"pointer",on:{click:function($event){_vm.showQuickSearch=!_vm.showQuickSearch}}},[_c("i",{staticClass:"fa fa-search asset__search__icon",attrs:{"aria-hidden":"true"}})]),_vm.showQuickSearch?_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper asset__inventory_search__con"},[_c("svg",{staticClass:"search-icon-asset hide",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input-asset asset__inventory__search",attrs:{autofocus:"",type:"text",placeholder:_vm.$t("common._common.search")},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"asset__inventory__close",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.closeSearch}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.close")))]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_vm._e()]),_c("div",{staticClass:"fc__layout__flexes overflo-auto fc__layout__has__row fc__layout__box layout__box__height"},[_c("div",{staticClass:"fc__submenu__section fc__layout__has__row fc__layout__max__row"},[_vm.showRevisionHistory?_vm.showRevisionHistory?_c("div",{staticClass:"pT10"},_vm._l(_vm.revisionHistoryJSON.list,(function(purchaseContract){return _c("div",{key:purchaseContract.id,staticClass:"label-txt-black pb20 flex-middle justify-content-space",class:{fcactivelist:_vm.id===purchaseContract.id},on:{click:function($event){return _vm.getHistorySummaryLink(purchaseContract.id)}}},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                          placement: 'top',\n                          animation: 'shift-away',\n                          arrow: true,\n                        }"}],staticClass:"width220px textoverflow-ellipsis",attrs:{title:purchaseContract.name?purchaseContract.name:"[#"+purchaseContract.id+"]"}},[_vm._v(" "+_vm._s(purchaseContract?purchaseContract.name+" R-"+purchaseContract.revisionNumber:"[#"+purchaseContract.parentId+"]")+" ")]),_c("img",{staticClass:"fR hide mT3",class:{show:_vm.id===purchaseContract.id},attrs:{src:__webpack_require__(513905),width:"15",height:"15"}})])})),0):_vm._e():_c("div",{staticClass:"pT10"},_vm._l(_vm.purchaseContracts,(function(purchaseContract){return _c("div",{key:purchaseContract.id,staticClass:"label-txt-black pb20 flex-middle justify-content-space",class:{fcactivelist:_vm.id===purchaseContract.id},on:{click:function($event){return _vm.getSummaryLink(purchaseContract.id)}}},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                          placement: 'top',\n                          animation: 'shift-away',\n                          arrow: true,\n                        }"}],staticClass:"width220px textoverflow-ellipsis",attrs:{title:purchaseContract.name?purchaseContract.name:"[#"+purchaseContract.id+"]"}},[_vm._v(" "+_vm._s(purchaseContract.name?purchaseContract.name:"[#"+purchaseContract.parentId+"]")+" ")]),_c("img",{staticClass:"fR hide mT3",class:{show:_vm.id===purchaseContract.id},attrs:{src:__webpack_require__(513905),width:"15",height:"15"}})])})),0)])])]),_c("div",{staticClass:"fc__layout__flexes fc__layout__has__row fc__layout__asset_main"},[_c("div",{},[_c("div",{staticClass:"fc__layout__align fc__asset__main__header pT24 pB20 pL20 pR20"},[_c("div",{staticClass:"fc-dark-grey-txt18"},[_c("div",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.summaryData.parentId))]),_c("div",{staticClass:"fc-black-17 bold inline-flex"},[_vm._v(" "+_vm._s(_vm.summaryData.name)+" "),_c("div",{staticClass:"fc-newsummary-chip mL10 "},[_vm._v(" "+_vm._s(_vm.getContractStatus(_vm.summaryData.status))+" ")])])]),_c("div",{staticClass:"fc__layout__align inventory-overview-btn-group"},[_vm.$hasPermission("contract:APPROVE_REJECT_WORKREQUEST")&&7!==_vm.summaryData.status?_c("div",[_c("el-popover",{attrs:{placement:"top-start",width:"180",trigger:"hover"}},[_c("el-button",{staticClass:"fc__border__btn",attrs:{slot:"reference"},slot:"reference"},[_vm._v(" "+_vm._s(_vm.$t("common.profile.change_status"))+" "),_c("i",{staticClass:"el-icon-arrow-down f14 text-right"})]),2!==_vm.summaryData.status?_c("div",{staticClass:"label-txt-black pT10 pB10 pointer pL10 list-hover",on:{click:function($event){return _vm.updateContractStatus(2,"Approved Successfully","purchasecontract")}}},[_vm._v(" "+_vm._s(_vm.$t("common.header.approve"))+" ")]):_vm._e(),3!==_vm.summaryData.status?_c("div",{staticClass:"label-txt-black pT10 pB10 pointer pL10 list-hover",on:{click:function($event){return _vm.updateContractStatus(3,"Closed Successfully","purchasecontract")}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.close"))+" ")]):_vm._e(),4!==_vm.summaryData.status?_c("div",{staticClass:"label-txt-black pT10 pB10 pointer pL10 list-hover",on:{click:function($event){return _vm.updateContractStatus(4,"Cancelled Successfully","purchasecontract")}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.cancel"))+" ")]):_vm._e(),5!==_vm.summaryData.status?_c("div",{staticClass:"label-txt-black pT10 pB10 pointer pL10 list-hover",on:{click:function($event){return _vm.updateContractStatus(5,"Suspended Successfully","purchasecontract")}}},[_vm._v(" "+_vm._s(_vm.$t("common.header.suspend"))+" ")]):_vm._e()],1)],1):_vm._e(),_vm.isContractEditable(_vm.summaryData.status)||_vm.$hasPermission("contract:DELETE")?_c("el-dropdown",{staticClass:"mL15 fc-btn-ico-lg pT5 pB5 pL8 pR8 pointer",on:{command:_vm.handleCommand}},[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{attrs:{src:__webpack_require__(935010),height:"18",width:"18"}})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.isContractEditable(_vm.summaryData.status)?_c("el-dropdown-item",{attrs:{command:"edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))]):_vm._e(),1===_vm.summaryData.status&&_vm.$hasPermission("contract:DELETE")?_c("el-dropdown-item",{attrs:{command:"delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete")))]):_vm._e(),_vm.$hasPermission("contract:CREATE")?_c("el-dropdown-item",{attrs:{command:"duplicate"}},[_vm._v(_vm._s(_vm.$t("common._common.duplicate")))]):_vm._e(),_vm.$hasPermission("contract:CREATE")&&2===_vm.summaryData.status?_c("el-dropdown-item",{attrs:{command:"revise"}},[_vm._v(_vm._s(_vm.$t("common.products.revise")))]):_vm._e(),_vm.summaryData.revisionNumber>0&&7!==_vm.summaryData.status?_c("el-dropdown-item",{attrs:{command:"revisionhistory"}},[_vm._v(_vm._s(_vm.$t("common.header.show_revision_history")))]):_vm._e(),2===_vm.summaryData.status?_c("el-dropdown-item",{attrs:{command:"preference"}},[_vm._v(_vm._s(_vm.$t("common.header.notification_preferences")))]):_vm._e(),_vm.summaryData.frequencyType>0&&2===_vm.summaryData.status?_c("el-dropdown-item",{attrs:{command:"updatepayment"}},[_vm._v(_vm._s(_vm.$t("common.header.update_payment_status")))]):_vm._e()],1)],1):_vm._e()],1)])]),null!==_vm.summaryData?_c("div",{staticClass:"fc__layout__flexes fc__main__con__width"},[_c("div",{staticClass:"fc__asset__main__scroll"},[_c("div",{staticClass:"fc__white__bg__asset"},[_c("el-row",[_c("el-col",{staticClass:"mB30",attrs:{span:16}},[_c("el-col",{staticClass:"pB30",attrs:{span:24}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.report_description"))+" ")]),_vm.summaryData.description?_c("div",{staticClass:"label-txt-black pT10 inventory-item-desc textoverflow-height-ellipsis2 height40"},[_vm._v(" "+_vm._s(_vm.summaryData.description)+" ")]):_c("div",{staticClass:"label-txt-black pT10 inventory-item-desc textoverflow-height-ellipsis2 height40 pointer f13",on:{click:function($event){_vm.addDescDialog=!0,_vm.addDescriptionText=null}}},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{ arrow: true }"}],attrs:{title:_vm.$t("common.attachment_form.click_to_add_description")}},[_vm._v(_vm._s(_vm.$t("common._common.nodescription")))])]),_c("el-dialog",{attrs:{visible:_vm.addDescDialog,fullscreen:!1,title:_vm.$t("common.attachment_form.click_to_add_description"),open:"top",width:"400px","custom-class":"inventory-dialog fc-dialog-center-container fc-web-form-dialog","append-to-body":!0},on:{"update:visible":function($event){_vm.addDescDialog=$event}}},[_c("div",[_c("div",{staticClass:"readingcard-setlayout"},[_c("div",{staticClass:"reading-setcard-body"},[_c("div",{staticClass:"pB10",staticStyle:{"margin-top":"7px"}},[_c("div",{staticClass:"inventory-select-item-con mT15 mB15"},[_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",placeholder:_vm.$t("common.placeholders.enter_description"),autosize:{minRows:3}},model:{value:_vm.addDescriptionText,callback:function($$v){_vm.addDescriptionText=$$v},expression:"addDescriptionText"}})],1)])])])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.addDescDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addDescription()}}},[_vm._v(_vm._s(_vm.$t("common._common._add")))])],1)])],1),_c("el-col",{staticClass:"mB30",attrs:{span:24}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("div",{staticClass:"label-txt-black pT5"},[_vm._v(" "+_vm._s(_vm.summaryData.contractType?_vm.contractTypeEnumFormatter(_vm.summaryData.contractType):"---")+" ")])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.products.vendor"))+" ")]),_c("div",{staticClass:"label-txt-black pT5"},[_vm.summaryData.vendor?_c("router-link",{attrs:{to:_vm.openVendorSummary(_vm.summaryData.vendor.id)}},[_vm._v(_vm._s(_vm.summaryData.vendor.name))]):_c("span",[_vm._v("---")])],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.header._total_cost"))+" ")]),_c("div",{staticClass:"label-txt-black pT5"},[_c("currency",{attrs:{value:_vm.summaryData.totalCost}})],1)])],1)],1)],1),_c("div",{staticClass:"mT20 mB10 inventory-section-header"},[_vm._v(" "+_vm._s(_vm.$t("common._common.summary"))+" ")]),_c("div",{staticClass:"fc__white__bg__info"},[_c("el-row",{staticClass:"border-bottom6 pB20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.valid_from"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.fromDate>0?_vm.$options.filters.formatDate(_vm.summaryData.fromDate,!0):"---")+" ")])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.valid_till"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.endDate>0?_vm.$options.filters.formatDate(_vm.summaryData.endDate,!0):"---")+" ")])],1)],1),_c("el-row",{staticClass:"pT20 border-bottom6 pB20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.renewal_date"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.renewalDate>0?_vm.$options.filters.formatDate(_vm.summaryData.renewalDate,!0):"---")+" ")])],1)],1)],1),_c("div",{staticClass:"mT20 mB10 inventory-section-header"},[_vm._v(" "+_vm._s(_vm.$t("common.header.payment_info"))+" "),_vm.isContractEditable(_vm.summaryData.status)?_c("i",{staticClass:"el-icon-edit pointer pL10",on:{click:function($event){return _vm.handleCommand("edit")}}}):_vm._e()]),_vm.summaryData.frequencyType<0?_c("div",{staticClass:"fc__white__bg__info height100px"},[_c("el-row",{staticClass:"mT10"},[_c("div",{staticClass:"payment-info-nodata"},[_vm._v(" "+_vm._s(_vm.$t("inventory.contracts.no_payment_info"))+" ")])])],1):_c("div",{staticClass:"fc__white__bg__info"},[_c("el-row",{staticClass:"border-bottom6 pB20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.header.next_payment_date"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.nextPaymentDate>0?_vm.$options.filters.formatDate(_vm.summaryData.nextPaymentDate,!0):"---")+" ")])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.frequency_type"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.frequencyTypeEnum?_vm.summaryData.frequencyTypeEnum:"---")+" ")])],1)],1),_c("el-row",{staticClass:"pT20 border-bottom6 pB20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.header.payment_interval"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.paymentInterval?_vm.summaryData.paymentInterval:"---")+" ")])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.header.schedule_time"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.scheduleTime?_vm.convertMilliSecondsToTimeHHMM(_vm.summaryData.scheduleTime):"---")+" ")])],1)],1),_c("el-row",{staticClass:"pT20 border-bottom6 pB20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.header.schedule_day"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.scheduleDay?_vm.summaryData.scheduleDay:"---")+" ")])],1),_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.$t("common.header.schedule_month"))+" ")])]),_c("el-col",{attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.summaryData.scheduleMonth?_vm.summaryData.scheduleMonth:"---")+" ")])],1)],1)],1),_vm.customFields&&_vm.customFields.length>0?_c("div",{staticClass:"fc__white__bg__info__custom mT20"},[_vm._l(_vm.customFields,(function(d,index){return[index%2===0?_c("el-row",{key:index,staticClass:"border-bottom6 pB20 pT20"},[_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.customFields[index].displayName)+" ")])]),"DATE"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index].name],!0):"---"))]):"DATE_TIME"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s((_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name])>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index].name]):"---"))]):[2,3].includes(_vm.customFields[index].field.dataType)?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]&&-1!==_vm.summaryData.data[_vm.customFields[index].name]?_vm.summaryData.data[_vm.customFields[index].name]:"---"))]):"ENUM"===_vm.customFields[index].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.customFields[index+1].field.enumMap[parseInt(_vm.summaryData.data[_vm.customFields[index+1].name])]:"---"))]):_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index].name]?_vm.summaryData.data[_vm.customFields[index].name]:"---"))])],1),_vm.customFields.length>index+1?_c("el-col",{attrs:{span:12}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.customFields[index+1].displayName)+" ")])]),"DATE"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index+1].name],!0):"---"))]):"DATE_TIME"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s((_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name])>0?_vm.$options.filters.formatDate(_vm.summaryData.data[_vm.customFields[index+1].name]):"---"))]):[2,3].includes(_vm.customFields[index+1].field.dataType)?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]&&-1!==_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.summaryData.data[_vm.customFields[index+1].name]:"---"))]):"ENUM"===_vm.customFields[index+1].field.dataTypeEnum?_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.customFields[index+1].field.enumMap[parseInt(_vm.summaryData.data[_vm.customFields[index+1].name])]:"---"))]):_c("el-col",{attrs:{span:12}},[_vm._v(_vm._s(_vm.summaryData.data&&_vm.summaryData.data[_vm.customFields[index+1].name]?_vm.summaryData.data[_vm.customFields[index+1].name]:"---"))])],1):_vm._e()],1):_vm._e()]}))],2):_vm._e(),_c("div",{staticClass:"fc__white__bg__p0 mT20"},["first"===_vm.activeName1&&_vm.isContractEditable(_vm.summaryData.status)?_c("div",{staticClass:"pull-right self-center table-btn"},[_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-button f12 fc-sites-btn el-button--text sh-button sh-button-add button-add  sp-sh-btn-sm",attrs:{icon:"el-icon-plus",type:"text",title:_vm.$t("common.products.add_line_items"),"data-size":"small"},on:{click:_vm.addLineItemsDialog}})],1):_vm._e(),_c("el-tabs",{staticClass:"fc-tab-hide",model:{value:_vm.activeName1,callback:function($$v){_vm.activeName1=$$v},expression:"activeName1"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("common.products.line_item"),name:"first"}},[_c("el-table",{staticClass:"width100 inventory-inner-table mT20",attrs:{data:_vm.summaryData.lineItems,"empty-text":_vm.$t("common.products.no_items_available"),"default-sort":{prop:"summaryData.lineItems.name",order:"descending"}},on:{"cell-click":_vm.openItemTypeOverview}},[_c("el-table-column",{attrs:{label:_vm.$t("common.products.line_item")},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[1===_vm.summaryData.lineItems[scope.$index].inventoryType&&null!==_vm.summaryData.lineItems[scope.$index].itemType?_c("item-tool-avatar",{attrs:{name:"true",size:"lg",module:"item",recordData:_vm.summaryData.lineItems[scope.$index].itemType}}):2===_vm.summaryData.lineItems[scope.$index].inventoryType&&null!==_vm.summaryData.lineItems[scope.$index].toolType?_c("item-tool-avatar",{attrs:{name:"true",size:"lg",module:"tool",recordData:_vm.summaryData.lineItems[scope.$index].toolType}}):_vm._e()]}}],null,!1,3706266157)}),_c("el-table-column",{attrs:{label:_vm.$t("common._common.ordered_quantity")},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm.isContractEditable(_vm.summaryData.status)?_c("div",[_c("el-input",{staticClass:"fc-input-full-border2 width50px inventory-input-width text-right pL20 pr-summary",attrs:{placeholder:"",min:0,type:"number"},on:{change:function($event){return _vm.updateContractLineItem("Line Item edited Successfully","purchasecontract")}},model:{value:_vm.summaryData.lineItems[scope.$index].quantity,callback:function($$v){_vm.$set(_vm.summaryData.lineItems[scope.$index],"quantity",$$v)},expression:"\n                                    summaryData.lineItems[scope.$index]\n                                      .quantity\n                                  "}})],1):_c("div",[_c("div",[_vm._v(" "+_vm._s(_vm.summaryData.lineItems[scope.$index].quantity)+" ")])])]}}],null,!1,24668630)}),_c("el-table-column",{attrs:{label:_vm.$t("common.header._unit_price")},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm.isContractEditable(_vm.summaryData.status)?_c("div",["$"===_vm.$currency?_c("span",[_vm._v(_vm._s(_vm.$currency))]):_vm._e(),_c("el-input",{staticClass:"fc-input-full-border2 width50px inventory-input-width text-right  pr-summary",attrs:{placeholder:"",min:0,type:"number"},on:{change:function($event){return _vm.updateContractLineItem("Line Item edited Successfully","purchasecontract")}},model:{value:_vm.summaryData.lineItems[scope.$index].unitPrice,callback:function($$v){_vm.$set(_vm.summaryData.lineItems[scope.$index],"unitPrice",$$v)},expression:"\n                                    summaryData.lineItems[scope.$index]\n                                      .unitPrice\n                                  "}}),"$"!==_vm.$currency?_c("span",[_vm._v(_vm._s(_vm.$currency))]):_vm._e()],1):_c("div",[_c("div",[_c("currency",{attrs:{value:_vm.summaryData.lineItems[scope.$index].unitPrice}})],1)])]}}],null,!1,620700539)}),_c("el-table-column",{attrs:{label:"COST"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("currency",{attrs:{value:scope.row.cost}})]}}],null,!1,2048271982)}),_vm.isContractEditable(_vm.summaryData.status)?_c("el-table-column",{scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_vm.isContractEditable(_vm.summaryData.status)?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete pointer edit-icon-color",staticStyle:{"padding-left":"18px"},attrs:{"data-arrow":"true",title:_vm.$t("common.header.delete_line_item")},on:{click:function($event){return _vm.remove(_vm.summaryData.lineItems[scope.$index],scope.$index)}}}):_vm._e()])]}}],null,!1,1122216537)}):_vm._e()],1)],1)],1)],1),_c("div",{staticClass:"fc__white__bg__p0 mT20"},["tandc"===_vm.section2&&1===_vm.summaryData.status?_c("div",{staticClass:"pull-right self-center table-btn"},[_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-button f12 fc-sites-btn el-button--text sh-button sh-button-add button-add sp-sh-btn-sm",attrs:{icon:"el-icon-plus",type:"text",title:"Add T&C","data-size":"small"},on:{click:function($event){_vm.addTandCVisibility=!0}}})],1):_vm._e(),_c("el-tabs",{model:{value:_vm.section2,callback:function($$v){_vm.section2=$$v},expression:"section2"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("common._common.terms_conditions"),name:"tandc"}},[_c("contract-terms-and-conditions",{attrs:{summaryData:_vm.summaryData,type:"contract",addTandCVisibility:_vm.addTandCVisibility},on:{refreshList:_vm.loadSummary,"update:addTandCVisibility":function($event){_vm.addTandCVisibility=$event},"update:add-tand-c-visibility":function($event){_vm.addTandCVisibility=$event}}})],1)],1)],1),_c("div",{key:_vm.summaryData.id,staticClass:"fc__white__bg__p0 mT20"},[_c("el-tabs",{model:{value:_vm.activeName,callback:function($$v){_vm.activeName=$$v},expression:"activeName"}},[_c("el-tab-pane",{attrs:{label:_vm.$t("common._common.notes"),name:"first"}},["first"===_vm.activeName&&_vm.summaryData&&_vm.summaryData.id?_c("div",{staticClass:"inventory-comments"},[_c("comments",{attrs:{module:"contractnotes",placeholder:_vm.$t("common._common.add_note"),btnLabel:_vm.$t("common._common.add_note"),record:_vm.summaryData,notify:!1}})],1):_vm._e()]),_c("el-tab-pane",{attrs:{label:_vm.$t("common._common.documents"),name:"second"}},["second"===_vm.activeName?_c("div",[_vm.summaryData?_c("attachments",{attrs:{module:"contractattachments",record:_vm.summaryData}}):_vm._e()],1):_vm._e()])],1)],1)])]):_vm._e()])])])])])]):_c("div",[_c("spinner",{attrs:{show:!_vm.summaryData}})],1),_vm.addLineItemsVisibility?_c("div",{key:_vm.summaryData.id,staticClass:"position-relative"},[_c("el-dialog",{key:_vm.summaryData.id,attrs:{visible:_vm.addLineItemsVisibility,fullscreen:!1,title:_vm.$t("common.products.add_line_items"),width:"70%",open:"top","custom-class":"assetaddvaluedialog fc-dialog-center-container inventory-store-dialog fc-web-form-dialog","append-to-body":!0},on:{"update:visible":function($event){_vm.addLineItemsVisibility=$event}}},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common._type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products._name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common._quantity"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header._unit_price"))+" ")]),_c("th")])]),_c("tbody",{key:_vm.summaryData.id},_vm._l(_vm.lineItemsFormObject.lineItems,(function(field,lineindex){return _c("tr",{key:lineindex,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",model:{value:_vm.lineItemsFormObject.lineItems[lineindex].inventoryType,callback:function($$v){_vm.$set(_vm.lineItemsFormObject.lineItems[lineindex],"inventoryType",$$v)},expression:"\n                  lineItemsFormObject.lineItems[lineindex].inventoryType\n                "}},[_c("el-option",{key:"1",attrs:{label:_vm.$t("common.header.item"),value:1}}),_c("el-option",{key:"2",attrs:{label:_vm.$t("common.header.tool"),value:2}})],1)],1),_c("td",{staticClass:"module-builder-td"},[1===parseInt(_vm.lineItemsFormObject.lineItems[lineindex].inventoryType)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{clearable:"",filterable:""},model:{value:_vm.lineItemsFormObject.lineItems[lineindex].itemType.id,callback:function($$v){_vm.$set(_vm.lineItemsFormObject.lineItems[lineindex].itemType,"id",$$v)},expression:"lineItemsFormObject.lineItems[lineindex].itemType.id"}},[_vm.vendorItems.length>0?_c("el-option-group",{key:"1",attrs:{label:_vm.$t("common.header.vendor_items")}},_vm._l(_vm.vendorItems,(function(vendorItem,index){return _c("el-option",{key:index,attrs:{label:vendorItem.itemType.name,value:vendorItem.itemType.id}})})),1):_vm._e(),_c("el-option-group",{key:"2",attrs:{label:_vm.vendorItems.length>0?"Other Items":""}},_vm._l(_vm.nonVendorItems,(function(item,index){return _c("el-option",{key:index,attrs:{label:item.name,value:item.id}})})),1)],1):_vm._e(),2===parseInt(_vm.lineItemsFormObject.lineItems[lineindex].inventoryType)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.lineItemsFormObject.lineItems[lineindex].toolType.id,callback:function($$v){_vm.$set(_vm.lineItemsFormObject.lineItems[lineindex].toolType,"id",$$v)},expression:"lineItemsFormObject.lineItems[lineindex].toolType.id"}},_vm._l(_vm.tools,(function(tool,index){return _c("el-option",{key:index,attrs:{label:tool.name,value:tool.id}})})),1):_vm._e()],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common._common.quantity"),type:"number",min:0},model:{value:_vm.lineItemsFormObject.lineItems[lineindex].quantity,callback:function($$v){_vm.$set(_vm.lineItemsFormObject.lineItems[lineindex],"quantity",$$v)},expression:"lineItemsFormObject.lineItems[lineindex].quantity"}})],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.tabs.cost"),type:"number",min:0},model:{value:_vm.lineItemsFormObject.lineItems[lineindex].unitPrice,callback:function($$v){_vm.$set(_vm.lineItemsFormObject.lineItems[lineindex],"unitPrice",$$v)},expression:"lineItemsFormObject.lineItems[lineindex].unitPrice"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addItemEntry(_vm.lineItemsFormObject.lineItems)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.lineItemsFormObject.lineItems.length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeItemEntry(_vm.lineItemsFormObject.lineItems,_vm.index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.addLineItemsVisibility=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.addLineItemtoContract()}}},[_vm._v(_vm._s(_vm.$t("common._common._add")))])],1)])],1):_vm._e(),_vm.preferenceVisibility?_c("div",[_c("el-dialog",{key:"1",attrs:{visible:_vm.preferenceVisibility,title:_vm.$t("common.header.notification_preference"),fullscreen:!1,"before-close":_vm.cancelNotificationPreference,"append-to-body":!0,"custom-class":"fc-animated slideInRight fc-dialog-form contract-notification-form-heading fc-dialog-right width50"},on:{"update:visible":function($event){_vm.preferenceVisibility=$event}}},[_c("notification-preference",{attrs:{moduleName:"purchasecontracts",recordId:_vm.summaryData.id,visibility:_vm.preferenceVisibility},on:{"update:visibility":function($event){_vm.preferenceVisibility=$event}}})],1)],1):_vm._e()])},staticRenderFns=[],Attachments=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(339772),__webpack_require__(670560),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(538077),__webpack_require__(169358),__webpack_require__(162506),__webpack_require__(212826),__webpack_require__(976801),__webpack_require__(648324),__webpack_require__(903650),__webpack_require__(77098)),Comments=__webpack_require__(147105),ItemTool=__webpack_require__(882401),contractHelper=__webpack_require__(496376),ContractTermsAndConditions=__webpack_require__(932773),NotificationPreference=__webpack_require__(785595),validation=__webpack_require__(990260),router=__webpack_require__(329435),PurchaseContractSummaryvue_type_script_lang_js={components:{Comments:Comments/* default */.Z,Attachments:Attachments/* default */.Z,ItemToolAvatar:ItemTool/* default */.Z,ContractTermsAndConditions:ContractTermsAndConditions/* default */.Z,NotificationPreference:NotificationPreference/* default */.Z},mixins:[contractHelper/* default */.Z],data:function(){return{activeName:"first",activeName1:"first",activeName2:"first",section2:"tandc",status:{REQUESTED:"REQUESTED",APPROVED:"APPROVED",REJECTED:"REJECTED",ORDERED:"ORDERED",PARTIALLY_RECEIVED:"PARTIALLY RECEIVED",RECEIVED:"RECEIVED",COMPLETED:"COMPLETED"},showQuickSearch:!1,error:!1,errorText:"",quickSearchQuery:null,toggle:!1,selectindex:!1,loading:!0,page:1,fetchingMore:!1,summaryData:null,itemType:{},saving:!1,customFields:null,storeRooms:[],vendors:[],items:[],tools:[],addLineItemsVisibility:!1,lineItemsFormObject:{lineItems:null},nonVendorItems:[],vendorItems:[],addDescDialog:!1,addDescriptionText:null,addTandCVisibility:!1,preferenceVisibility:!1}},mounted:function(){this.$store.dispatch("view/clearViews"),this.$store.dispatch("view/loadViews",this.getCurrentModule),this.$store.dispatch("view/loadModuleMeta",this.getCurrentModule),this.getViewDetail(),this.loadData(),this.loadSummary(),this.loadForm()},computed:{id:function(){return parseInt(this.$route.params.id)},purchaseContracts:function(){return this.$store.state.purchasecontract.purchaseContracts},getCurrentModule:function(){return"purchasecontracts"},canLoadMore:function(){return this.$store.state.purchasecontract.canLoadMore},scrollDisabled:function(){return this.loading||!this.canLoadMore||this.fetchingMore},currentView:function(){return this.$route.query.search?"Filtered Item Types":this.$route.params.viewname?this.$route.params.viewname:"all"},currentViewDetail:function(){var _this=this;return this.$route.query.search?{displayName:"Filtered Purchase Contract",name:"filteredpurchasecontract"}:this.views.find((function(view){return view.name===_this.currentView}))||{}},views:function(){return this.$store.state.view.views},searchQuery:function(){return this.$store.state.purchasecontract.quickSearchQuery}},watch:{purchaseContracts:function(newVal){"null"===this.$route.params.id&&newVal&&newVal.length>0&&this.getSummaryLink(newVal[0].id)},id:function(){this.$route.query.refresh&&this.loadData(),this.loadSummary()},searchQuery:function(){this.loadData()},currentView:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.loadData()},"$route.query.search":{handler:function(value){var viewIndex=this.views.findIndex((function(view){return"filteredpurchasecontract"===view.name}));value&&(0,validation/* isEmpty */.xb)(viewIndex)&&this.views.push({displayName:"Filtered Purchase Contract",name:"filteredpurchasecontract"})}}},methods:{loadForm:function(){var self=this,url="/getFormMeta?formNames=purchaseContractForm";this.$http.get(url).then((function(response){self.formFields(response.data.forms[0])})).catch((function(){}))},updateStatus:function(status,message){status&&0!==status&&(this.summaryData.status=status);var self=this,param={purchaseContract:{id:this.summaryData.id,lineItems:this.summaryData.lineItems,status:status,vendor:this.summaryData.vendor}};this.$http.post("v2/purchasecontract/addOrUpdate",param).then((function(response){0===response.data.responseCode?(self.$message.success(message),self.loadSummary()):self.$message.error(response.data.message)})).catch((function(){}))},addDescription:function(){if(this.addDescDialog=!1,this.addDescriptionText){var _self=this,param={purchaseContract:{id:this.summaryData.id,description:this.addDescriptionText,lineItems:this.summaryData.lineItems,storeRoom:this.summaryData.storeRoom,vendor:this.summaryData.vendor}};this.$http.post("v2/purchasecontract/addOrUpdate",param).then((function(response){0===response.data.responseCode?(_self.$message.success(this.$t("common.products.description_updated_successfully")),_self.summaryData.description=_self.addDescriptionText):_self.$message.error(response.data.message)})).catch((function(){}))}},remove:function(data,index){this.deleteContractLineItem([this.summaryData.lineItems[index].id],"Line Item Removed Successfully","purchasecontract")},openItemTypeOverview:function(row,col){if("ITEM NAME"===col.label)if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("itemTypes",router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&this.$router.push({name:name,params:{id:row.itemType.id,viewname:"all"}})}else this.$router.push({path:"/app/inventory/itemtypes/all/"+row.itemType.id+"/summary"})},loadTypes:function(type){if(1===type){var _self2=this,url="v2/storeRoom/view/all";this.$http.get(url).then((function(response){_self2.storeRooms=response.data.result&&response.data.result.storeRooms?response.data.result.storeRooms:[]}))}else if(2===type){var _self3=this,_url="v2/vendors/view/all";this.$http.get(_url).then((function(response){_self3.vendors=response.data.result&&response.data.result.vendors?response.data.result.vendors:[]}))}},loadSummary:function(){var self=this,url="/v2/purchasecontract/getById",params={recordId:this.id};this.id&&this.$http.post(url,params).then((function(response){self.summaryData=response.data.result&&response.data.result.purchasecontract?response.data.result.purchasecontract:[];var title="[#"+self.summaryData.id+"] "+self.summaryData.name;self.setTitle(title)})).catch((function(){}))},formFields:function(data){this.customFields=data.fields.filter((function(field){return field.field&&!0!==field.field.default}))},toggleQuickSearch:function(){this.showQuickSearch=!this.showQuickSearch},closeSearch:function(){this.toggleQuickSearch(),this.quickSearchQuery=null,this.quickSearch()},quickSearch:function(){this.$store.dispatch("purchasecontract/updateSearchQuery",this.quickSearchQuery)},getViewDetail:function(){this.$store.dispatch("view/loadViewDetail",{viewName:this.currentView,moduleName:this.getCurrentModule})},loadData:function(loadMore){var self=this;this.page=loadMore?this.page:1;var queryObj={viewname:this.currentView,page:this.page,filters:this.$route.query.search?JSON.parse(this.$route.query.search):this.filters,search:this.searchQuery,includeParentFilter:this.includeParentFilter};loadMore?self.fetchingMore=!0:self.loading=!0,self.$store.dispatch("purchasecontract/fetchPurchaseContracts",queryObj).then((function(){self.loading=!1,self.fetchingMore=!1,self.page++})).catch((function(error){error&&(self.loading=!1,self.fetchingMore=!1)}))},getSummaryLink:function(id){var getCurrentModule=this.getCurrentModule,_this$$route=this.$route,query=_this$$route.query,params=_this$$route.params,_ref2=params||{},viewname=_ref2.viewname;if((0,router/* isWebTabsEnabled */.tj)()){var _ref3=(0,router/* findRouteForModule */.Jp)(getCurrentModule,router/* pageTypes */.As.OVERVIEW)||{},name=_ref3.name;name&&this.$router.push({name:name,params:{id:id,viewname:viewname},query:query})}else{var url="/app/ct/purchasecontracts/"+viewname+"/summary/"+id;this.$router.push({path:url,query:query})}},switchCategory:function(index){var indexs;indexs&&-1!==indexs&&this.views.splice(indexs,1);var getCurrentModule=this.getCurrentModule;if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForModule */.Jp)(getCurrentModule,router/* pageTypes */.As.OVERVIEW)||{},name=_ref4.name;name&&this.$router.push({name:name,params:{id:"null",viewname:index.name}})}else{var url="/app/ct/purchasecontracts/"+index.name+"/summary/null";this.$router.push({path:url})}this.toggle=!1},getDisplayTime:function(val){var d=new Date(val);return d.toString(),d},handleCommand:function(command){if(["edit","duplicate"].includes(command)){var summaryData=this.summaryData,getCurrentModule=this.getCurrentModule,_ref5=summaryData||{},id=_ref5.id,query="duplicate"===command?{duplicate:!0}:{};if((0,router/* isWebTabsEnabled */.tj)()){var _ref6=(0,router/* findRouteForModule */.Jp)(getCurrentModule,router/* pageTypes */.As.EDIT)||{},name=_ref6.name;name&&this.$router.push({name:name,params:{id:id},query:query})}else this.$router.push({path:"/app/ct/purchasecontracts/edit/"+id,query:query})}else"delete"===command?this.delete():"createpo"===command?this.convertContractToPo():"revise"===command?this.reviseContract(this.summaryData,"purchasecontract"):"revisionhistory"===command?this.$router.push({query:{showRevisionHistory:JSON.stringify({id:this.summaryData.id,parentId:this.summaryData.parentId,name:this.summaryData.name})}}):"preference"===command?this.preferenceVisibility=!0:"updatepayment"===command&&this.updatePaymentActions(this.summaryData)},delete:function(){var _this2=this,url="/v2/purchasecontract/delete",params={recordIds:[this.summaryData.id]};this.$http.post(url,params).then((function(response){if(0===response.data.responseCode)if(_this2.$message.success(_this2.$t("common._common.delete_success")),(0,router/* isWebTabsEnabled */.tj)()){var getCurrentModule=_this2.getCurrentModule,_params=_this2.$route.params,_ref7=_params||{},viewname=_ref7.viewname,_ref8=(0,router/* findRouteForModule */.Jp)(getCurrentModule,router/* pageTypes */.As.LIST)||{},name=_ref8.name;name&&_this2.$router.push({name:name,params:{viewname:viewname}})}else _this2.$router.push({path:"/app/ct/purchasecontracts/all"})})).catch((function(){}))},getDateTime:function(val){var value=val.sysCreatedTime;return value&&-1!==value?this.$options.filters.formatDate(value):""},addLineItemtoContract:function(){for(var i=this.lineItemsFormObject.lineItems.length-1;i>=0;i--){if(1===this.lineItemsFormObject.lineItems[i].inventoryType){if(delete this.lineItemsFormObject.lineItems[i].toolType,!this.lineItemsFormObject.lineItems[i].itemType.id){this.lineItemsFormObject.lineItems.splice(i,1);continue}}else if(2===this.lineItemsFormObject.lineItems[i].inventoryType&&(delete this.lineItemsFormObject.lineItems[i].itemType,!this.lineItemsFormObject.lineItems[i].toolType.id)){this.lineItemsFormObject.lineItems.splice(i,1);continue}0!==this.lineItemsFormObject.lineItems[i].quantity&&""!==this.lineItemsFormObject.lineItems[i].quantity&&null!==this.lineItemsFormObject.lineItems[i].quantity&&""!==this.lineItemsFormObject.lineItems[i].unitPrice&&null!==this.lineItemsFormObject.lineItems[i].unitPrice||this.lineItemsFormObject.lineItems.splice(i,1)}if(0!==this.lineItemsFormObject.lineItems.length){for(var j in this.lineItemsFormObject.lineItems)this.lineItemsFormObject.lineItems[j]["purchaseContractId"]=this.summaryData.id;this.addContractLineItem(this.lineItemsFormObject.lineItems,"purchasecontract")}else this.addLineItemsVisibility=!1},addLineItemsDialog:function(){this.loadLineTypes(1),this.loadLineTypes(2),this.addLineItemsVisibility=!0,this.lineItemsFormObject.lineItems=[{inventoryType:1,itemType:{id:null},toolType:{id:null},quantity:null,unitPrice:null}]},loadLineTypes:function(type){if(1===type){if(0===this.items.length){var _self4=this,url="v2/itemTypes/view/all";this.$http.get(url).then((function(response){_self4.items=response.data.result&&response.data.result.itemTypes?response.data.result.itemTypes:[],_self4.loadVendorItems()}))}}else if(2===type&&0===this.tools.length){var _self5=this,_url2="v2/toolTypes/view/all";this.$http.get(_url2).then((function(response){_self5.tools=response.data.result&&response.data.result.toolTypes?response.data.result.toolTypes:[]}))}self.lineItemsFormObject&&self.lineItemsFormObject.lineItems&&self.lineItemsFormObject.lineItems.itemType.id&&self.lineItemsFormObject.lineItems.toolType.id&&(self.lineItemsFormObject.lineItems.itemType.id=null,self.lineItemsFormObject.lineItems.toolType.id=null)},loadVendorItems:function(){var self=this;this.$http.get("/v2/itemTypesForVendors/vendor/"+this.summaryData.vendor.id).then((function(response){self.vendorItems=response.data.result.itemVendors,self.nonVendorItems=self.items.filter((function(item){return!self.vendorItems.some((function(vItem){return item.id===vItem.itemType.id}))}))})).catch((function(){}))},addItemEntry:function(field){var emptyData={inventoryType:1,itemType:{id:null},toolType:{id:null},quantity:null,unitPrice:null};field.push(emptyData)},removeItemEntry:function(list,index){list.splice(index,1)},convertContractToPo:function(){var _this3=this,param={vendor:{id:this.summaryData.vendor.id},lineItems:[],billToAddress:{street:null,city:null,state:null,zip:null,lat:1.1,lng:1.1,country:null}};for(var i in this.summaryData.lineItems)1===this.summaryData.lineItems[i].inventoryType?param.lineItems.push({quantity:this.summaryData.lineItems[i].quantity,unitPrice:this.summaryData.lineItems[i].unitPrice,inventoryType:1,itemType:{id:this.summaryData.lineItems[i].itemType.id}}):2===this.summaryData.lineItems.inventoryType&&param.lineItems.push({quantity:this.summaryData.lineItems[i].quantity,unitPrice:this.summaryData.lineItems[i].unitPrice,inventoryType:2,toolType:{id:this.summaryData.lineItems[i].toolType.id}});this.$http.get("/settings/company").then((function(response){var address=response.data.org;if(param.billToAddress.city=address.city,param.billToAddress.state=address.state,param.billToAddress.street=address.street,param.billToAddress.country=address.country,param.billToAddress.zip=address.zip,(0,router/* isWebTabsEnabled */.tj)()){var _ref9=(0,router/* findRouteForModule */.Jp)("purchaseorder",router/* pageTypes */.As.CREATE)||{},name=_ref9.name;name&&_this3.$router.push({name:name,query:{contractContext:JSON.stringify(param)}})}else _this3.$router.push({path:"/app/purchase/po/new/?&contractContext="+encodeURIComponent(JSON.stringify(param))})})).catch((function(){}))},openVendorSummary:function(id){if(!(0,router/* isWebTabsEnabled */.tj)())return{path:"/app/vendor/vendors/all/summary/".concat(id)};var _ref10=(0,router/* findRouteForModule */.Jp)("vendors",router/* pageTypes */.As.OVERVIEW)||{},name=_ref10.name;return name?{name:name,params:{viewname:"all",id:id}}:void 0}}},summary_PurchaseContractSummaryvue_type_script_lang_js=PurchaseContractSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(summary_PurchaseContractSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PurchaseContractSummary=component.exports},
/***/73188:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/item-img.7bf6d6bd.jpg";
/***/},
/***/392708:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/tool-img.a48b92e6.jpg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/46984.js.map