"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[44101],{
/***/544771:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return DashboardLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/PortalTenant/dashboard/DashboardLayout.vue?vue&type=template&id=6f0ec282&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"portal-dashboard-layout"},[_c("el-header",{staticClass:"fc-v1-tenant-overview-header overflow-x"},[_c("div",{staticClass:"portal"},[_vm.$validation.isEmpty(_vm.activeDashboardList)?_vm._e():_c("div",{staticClass:"d-flex",staticStyle:{height:"100%"}},[_vm._l(_vm.activeDashboardList,(function(dashboard,index){return _c("div",{key:index,staticClass:"fc-white-14 pR20 pL20 pointer",on:{click:function($event){return _vm.routeToDashboard(dashboard.linkName,null,!1,index,dashboard)}}},[_vm._v(" "+_vm._s(dashboard.dashboardName)+" "),_vm.currentLinkName===dashboard.linkName?_c("div",{staticClass:"portal-dashboard-active"}):_vm._e()])})),_c("div",{staticClass:"d-flex flex-grow "},[_vm.$validation.isEmpty(_vm.moreDashboardList)?_vm._e():_c("div",{staticClass:"pL20 pR20 pointer",on:{click:function($event){_vm.canShowDashboardLinks=!_vm.canShowDashboardLinks}}},[_c("svg",{staticStyle:{"enable-background":"new 0 0 408 408"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"18px",height:"18px",viewBox:"0 0 408 408","xml:space":"preserve"}},[_c("g",[_c("g",{attrs:{id:"more-horiz"}},[_c("path",{attrs:{d:"M51,153c-28.05,0-51,22.95-51,51s22.95,51,51,51s51-22.95,51-51S79.05,153,51,153z M357,153c-28.05,0-51,22.95-51,51    s22.95,51,51,51s51-22.95,51-51S385.05,153,357,153z M204,153c-28.05,0-51,22.95-51,51s22.95,51,51,51s51-22.95,51-51    S232.05,153,204,153z",fill:"#b1bdc9"}})])])])]),_c("el-popover",{attrs:{placement:"bottom-start",trigger:"manual",value:_vm.canShowDashboardLinks,"popper-class":"more-dashboard-list"}},_vm._l(_vm.moreDashboardList,(function(dashboard,index){return _c("div",{key:index,staticClass:"more-dashboard-name",on:{click:function($event){return _vm.routeToDashboard(dashboard.linkName,null,!0,index,dashboard)}}},[_vm._v(" "+_vm._s(dashboard.dashboardName)+" ")])})),0)],1),_c("div",{staticClass:"fR fc-subheader-right marginL-auto mR10 self-center"},[_c("portal-target",{staticClass:"dashboard-filter-portal d-flex",attrs:{name:"dashboardFilter"}})],1),_c("div",{staticClass:"flex-middle  fc-new-dashboard-full-more mR20 mT2",staticStyle:{"margin-top":"-10px"}},[_c("div",[_c("el-dropdown",{staticClass:"dashboard-dropdown-right pR10 pL10",attrs:{trigger:"click"}},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more rotate-90 pointer f14 fc-grey6"})]),_c("el-dropdown-menu",{staticClass:"dashboard-subheader-dp",attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",[_c("div",{on:{click:function($event){_vm.isPdfDownload=!0}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.download"))+" ")])])],1)],1)],1)])],2)])]),_vm.loading?_c("div",{staticClass:"position-relative height100vh"},[_c("loader")],1):_vm.currentLinkName?_c(_vm.selectDashboard,{tag:"component"}):_c("div",{staticClass:"mT100 text-center d-flex flex-col"},[_c("inline-svg",{attrs:{src:"svgs/empty-dashboard",iconClass:"text-center icon-xxxlg"}}),_c("div",{staticClass:"fc-grayish pT20"},[_vm._v("No dashboard configured")])],1),_c("pdf-download",{attrs:{url:_vm.pdfUrl,isDownload:_vm.isPdfDownload},on:{"update:isDownload":function($event){_vm.isPdfDownload=$event},"update:is-download":function($event){_vm.isPdfDownload=$event}}})],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(689730),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(990260)),api=__webpack_require__(32284),Loader=__webpack_require__(932447),DashboardlayoutHelper=__webpack_require__(579924),PDFDownload=__webpack_require__(615987),router=__webpack_require__(329435),DashboardLayoutvue_type_script_lang_js={name:"DashboardLayout",mixins:[DashboardlayoutHelper/* default */.Z],props:["dashboardlink"],components:{Loader:Loader/* default */.Z,OldDashboardViewer:function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,328917))},NewDashboardViewer:function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,825026))},PdfDownload:PDFDownload/* default */.Z},data:function(){return{moreDashboardList:[],activeDashboardList:[],canShowDashboardLinks:!1,loading:!0,currentDashboard:null,dashboardList:[],isPdfDownload:!1}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.loadDashboardFolder();case 2:_this.setHeaderList();case 3:case"end":return _context.stop()}}),_callee)})))()},computed:{selectDashboard:function(){var isNewDashboardEnabled=this.$helpers.isLicenseEnabled("NEW_DASHBOARD_FLOW");return isNewDashboardEnabled?"NewDashboardViewer":"OldDashboardViewer"},currentLinkName:function(){return this.$getProperty(this.$route,"params.dashboardlink",null)}},watch:{dashboardlink:{handler:function(value,oldValue){value!==oldValue&&this.loadDashboardFolder()}}},methods:{setHeaderList:function(){var dashboardList=this.dashboardList;dashboardList.length>3?(this.activeDashboardList=dashboardList.slice(0,3),this.moreDashboardList=dashboardList.slice(3)):this.activeDashboardList=dashboardList,this.currentDashboard=this.activeDashboardList[0]},loadDashboardFolder:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,_yield$API$get,data,error,_ref,_ref$dashboardFolders,dashboardFolders,linkName,tabs,tab,link;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loading=!0,
// let { data, error } = await API.get('/dashboardWithFolder')
params={appId:(0,router/* getApp */.wx)().id,onlyPublished:!0},_context2.next=4,api/* API */.bl.get("v3/dashboard/list",params);case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_ref=data||{},_ref$dashboardFolders=_ref.dashboardFolders,dashboardFolders=void 0===_ref$dashboardFolders?[]:_ref$dashboardFolders,_this2.dashboardList=dashboardFolders.reduce((function(dashboards,folder){return(0,validation/* isArray */.kJ)(folder.dashboards)&&!(0,validation/* isEmpty */.xb)(folder.dashboards)&&(dashboards=[].concat((0,toConsumableArray/* default */.Z)(dashboards),(0,toConsumableArray/* default */.Z)(folder.dashboards))),dashboards}),[]),(0,validation/* isEmpty */.xb)(_this2.dashboardlink)&&(linkName=null,tabs=_this2.$getProperty(_this2.$route,"query.tab"),tab=null,link=_this2.$getProperty(_this2.$route,"params.dashboardlink"),null==link?linkName=_this2.$getProperty(_this2.dashboardList,"0.linkName"):(linkName=link,tabs&&(tab=tabs)),_this2.routeToDashboard(linkName,tab))),_this2.loading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},routeToDashboard:function(dashboardlink,tab,link,index,dashboard){var _this3=this;this.currentDashboard=dashboard||"";var printQuery=function(){var _this3$$route;return"true"==(null===(_this3$$route=_this3.$route)||void 0===_this3$$route||null===(_this3$$route=_this3$$route.query)||void 0===_this3$$route?void 0:_this3$$route.printing)?{printing:"true"}:{}};if(dashboardlink&&this.$router.push({params:{dashboardlink:dashboardlink},query:(0,objectSpread2/* default */.Z)({},printQuery())}),tab&&this.$router.push({query:(0,objectSpread2/* default */.Z)({tab:tab},printQuery())}),link){var dashboardLink=this.moreDashboardList[index];this.moreDashboardList=[].concat((0,toConsumableArray/* default */.Z)(this.moreDashboardList.slice(0,index)),(0,toConsumableArray/* default */.Z)(this.moreDashboardList.slice(index+1)),[this.activeDashboardList[2]]),this.activeDashboardList=[].concat((0,toConsumableArray/* default */.Z)(this.activeDashboardList.slice(0,2)),[dashboardLink])}this.canShowDashboardLinks=!1}}},dashboard_DashboardLayoutvue_type_script_lang_js=DashboardLayoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,"6f0ec282",null)
/* harmony default export */,DashboardLayout=component.exports},
/***/932447:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Loader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Loader.vue?vue&type=template&id=320cdb92
var render=function(){var _vm=this,_h=_vm.$createElement;_vm._self._c;return _vm._m(0)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-spinner heigh100"},[_c("div",{staticClass:"bounce1"}),_c("div",{staticClass:"bounce2"}),_c("div",{staticClass:"bounce3"})])}],Loadervue_type_script_lang_js={props:["width","height"],data:function(){return{}}},components_Loadervue_type_script_lang_js=Loadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Loadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Loader=component.exports},
/***/615987:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PDFDownload}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PDFDownload.vue?vue&type=template&id=be2ef4d6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.downloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.downloadUrl}}):_vm._e()},staticRenderFns=[],api=__webpack_require__(32284),validation=__webpack_require__(990260),PDFDownloadvue_type_script_lang_js={props:["url","additionalInfo","isDownload"],data:function(){return{downloadUrl:null}},watch:{isDownload:{handler:function(val){var url=this.url;!(0,validation/* isEmpty */.xb)(url)&&val&&this.downloadPdf()},immediate:!0}},methods:{downloadPdf:function(){var _this=this,url=this.url,additionalInfo=this.additionalInfo;this.$message({message:"Downloading...",showClose:!0,duration:0}),api/* API */.bl.post("/v2/integ/pdf/create",{url:url,additionalInfo:additionalInfo}).then((function(_ref){var data=_ref.data,error=_ref.error;if(_this.$message.closeAll(),error){var _error$message=error.message,message=void 0===_error$message?"Unable to fetch download link":_error$message;_this.$message.error(message)}else _this.downloadUrl=(data||{}).fileUrl;_this.$emit("update:isDownload",!1)}))}}},components_PDFDownloadvue_type_script_lang_js=PDFDownloadvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PDFDownloadvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PDFDownload=component.exports},
/***/733569:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DashboardShare}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/dashboard/DashboardShare.vue?vue&type=template&id=f6fc7b0a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-popover",{ref:"popover5",attrs:{placement:"bottom",width:"350",height:"400","popper-class":"sharepopover"},model:{value:_vm.sharingDialogVisible,callback:function($$v){_vm.sharingDialogVisible=$$v},expression:"sharingDialogVisible"}},[_c("div",{staticClass:"share-container"},[_c("el-row",{staticClass:"share-header",attrs:{align:"middle ",guttr:20}},[_c("el-col",{staticStyle:{"padding-right":"35px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"add"},[_c("el-radio",{attrs:{label:1},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.me")))]),_c("el-radio",{attrs:{label:2},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.share.everyone")))]),_c("el-radio",{attrs:{label:3},model:{value:_vm.shareTo,callback:function($$v){_vm.shareTo=$$v},expression:"shareTo"}},[_vm._v(_vm._s(_vm.$t("panel.share.specific")))])],1)])],1),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.users")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.sharedUsers,callback:function($$v){_vm.sharedUsers=$$v},expression:"sharedUsers"}},_vm._l(_vm.users,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.roles")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_roles")},model:{value:_vm.sharedRoles,callback:function($$v){_vm.sharedRoles=$$v},expression:"sharedRoles"}},_vm._l(_vm.roles,(function(role){return _c("el-option",{key:role.id,attrs:{label:role.name,value:role.id}})})),1)],1)])],1):_vm._e(),3===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.teams")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_teams")},model:{value:_vm.sharedGroups,callback:function($$v){_vm.sharedGroups=$$v},expression:"sharedGroups"}},_vm._l(_vm.groups,(function(group){return _c("el-option",{key:group.id,attrs:{label:group.name,value:group.id}})})),1)],1)])],1):_vm._e(),4===_vm.shareTo?_c("el-row",{staticStyle:{margin:"0px","padding-top":"20px"},attrs:{align:"middle",gutter:20}},[_c("el-col",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{span:24}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("panel.share.portal")))]),_c("div",{staticClass:"add"},[_c("el-select",{staticClass:"form-item ",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:_vm.$t("common.wo_report.choose_users")},model:{value:_vm.portalusers,callback:function($$v){_vm.portalusers=$$v},expression:"portalusers"}},_vm._l(_vm.portalusers,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1)],1)])],1):_vm._e()],1),_c("div",{staticClass:"dialog-footer row"},[_c("div",{staticClass:"col-6 shareoverbtn shrbtn1",on:{click:function($event){_vm.sharingDialogVisible=!1}}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.cancel"))+" ")]),_c("div",{staticClass:"col-6 shareoverbtn shrbtn2",on:{click:_vm.applySharing}},[_vm._v(" "+_vm._s(_vm.$t("panel.share.confirm"))+" ")])])]),_c("div",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}]},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-share default dashboard-edit share-icon",attrs:{title:"Share","data-position":"top","data-arrow":"true"}})])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ReportHelper=(__webpack_require__(670560),__webpack_require__(507815)),vuex_esm=__webpack_require__(420629),DashboardSharevue_type_script_lang_js={mixins:[ReportHelper/* default */.Z],props:["id","dashboard"],data:function(){return{shareTo:2,sharedUsers:[],sharedRoles:[],portalusers:[],sharedGroups:[],sharingDialogVisible:!1}},watch:{dashboard:{handler:function(newData,oldData){newData!==oldData&&this.loadSharing()},deep:!0}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groups:function(state){return state.groups},users:function(state){return state.users},roles:function(state){return state.roles}})),(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),{},{dashboardLink:function(){return this.$route.params.dashboardlink}}),created:function(){this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadUsers")},mounted:function(){this.loadSharing(),this.loadPortalUsers()},methods:{loadPortalUsers:function(){var self=this;self.$http.get("/setup/portalusers").then((function(response){self.portalusers=response.data.users}))},loadSharing:function(){var self=this;null!==self.dashboard&&self.$http.get("/dashboardsharing/"+self.dashboard.id).then((function(response){if(response.data.dashboardSharing)if(0===response.data.dashboardSharing.length)self.shareTo=2;else{self.sharedUsers=[],self.sharedRoles=[],self.sharedGroups=[];for(var i=0;i<response.data.dashboardSharing.length;i++){var dashboardSharing=response.data.dashboardSharing[i];1===dashboardSharing.sharingType?self.sharedUsers.push(dashboardSharing.orgUserId):2===dashboardSharing.sharingType?self.sharedRoles.push(dashboardSharing.roleId):3===dashboardSharing.sharingType?self.sharedGroups.push(dashboardSharing.groupId):4===dashboardSharing.sharingType&&self.sharedUsers.push(dashboardSharing.orgUserId)}1===response.data.dashboardSharing.length&&1===self.sharedUsers.length&&self.sharedUsers[0]===self.getCurrentUser().ouid?self.shareTo=1:self.shareTo=3}}))},applySharing:function(){var self=this;self.sharingDialogVisible=!1;var dashboardSharing=[];if(1===self.shareTo)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});else if(3===self.shareTo){if(self.sharedUsers.length>0){dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.getCurrentUser().ouid});for(var i=0;i<self.sharedUsers.length;i++)self.sharedUsers[i]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[i]})}if(self.sharedRoles.length>0)for(var _i=0;_i<self.sharedRoles.length;_i++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:2,roleId:self.sharedRoles[_i]});if(self.sharedGroups.length>0)for(var _i2=0;_i2<self.sharedGroups.length;_i2++)dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:3,groupId:self.sharedGroups[_i2]})}else if(4===self.shareTo&&self.sharedUsers.length>0)for(var _i3=0;_i3<self.sharedUsers.length;_i3++)self.sharedUsers[_i3]!==self.getCurrentUser().ouid&&dashboardSharing.push({dashboardId:self.dashboard.id,sharingType:1,orgUserId:self.sharedUsers[_i3]});self.$http.post("/dashboardsharing/apply",{dashboardId:self.dashboard.id,dashboardSharing:dashboardSharing}).then((function(response){self.$message({message:"Sharing applied successfully!",type:"success"})}))}}},dashboard_DashboardSharevue_type_script_lang_js=DashboardSharevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_DashboardSharevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DashboardShare=component.exports},
/***/186267:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return NewDashboard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/new-dashboard/components/dashboard/NewDashboard.vue?vue&type=template&id=9438a20a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("f-form",{ref:"newDashboardForm",attrs:{type:"dialog50",title:"New Dashboard",model:_vm.model},on:{save:_vm.save},scopedSlots:_vm._u([{key:"form",fn:function(fscope){return[_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-input",{staticClass:"form-item",attrs:{"float-label":"Name"},model:{value:fscope.formModel.dashboardName,callback:function($$v){_vm.$set(fscope.formModel,"dashboardName",$$v)},expression:"fscope.formModel.dashboardName"}})],1)],1),_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-input",{staticClass:"form-item",attrs:{"float-label":"Description",type:"textarea"},model:{value:fscope.formModel.dashboardDesc,callback:function($$v){_vm.$set(fscope.formModel,"dashboardDesc",$$v)},expression:"fscope.formModel.dashboardDesc"}})],1)],1),_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("q-select",{staticClass:"form-item",attrs:{"float-label":"Module",options:_vm._f("options")(_vm.supportedModules,"displayName","moduleId")},model:{value:fscope.formModel.moduleId,callback:function($$v){_vm.$set(fscope.formModel,"moduleId",$$v)},expression:"fscope.formModel.moduleId"}})],1)],1)]}}])})},staticRenderFns=[],quasar_esm=__webpack_require__(641358),FForm=__webpack_require__(570992),NewDashboardvue_type_script_lang_js={components:{QInput:quasar_esm/* QInput */.Ke,QSelect:quasar_esm/* QSelect */.zO,FForm:FForm/* default */.Z},data:function(){return{model:{dashboardName:null,dashboardDesc:null,moduleId:null},supportedModules:[]}},
// watch: {
//   visibility: function (newVal) {
//     this.visibilityState = newVal
//     if (this.visibilityState) {
//       this.$refs.newDashboardForm.open()
//     }
//     else {
//       this.$refs.newDashboardForm.close()
//     }
//   }
// },
mounted:function(){this.loadSupportedModules()},methods:{loadSupportedModules:function(){var self=this,url="/dashboard/supportedmodules";this.$http.get(url).then((function(response){response.data.modules&&(self.supportedModules=response.data.modules)}))},open:function(){this.$refs.newDashboardForm.open()},close:function(){this.$refs.newDashboardForm.close()},save:function(){var self=this,formModel=self.$refs.newDashboardForm.getFormModel(),formdata={dashboard:{dashboardName:formModel.dashboardName,moduleId:formModel.moduleId}};self.$http.post("/dashboard/add",formdata).then((function(response){self.$message({message:"Dashboard created successfully!",type:"success"}),self.close()}))}}},dashboard_NewDashboardvue_type_script_lang_js=NewDashboardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(dashboard_NewDashboardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewDashboard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/44101.js.map