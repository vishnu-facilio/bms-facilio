"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[15425],{
/***/415425:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return ModuleCountCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/site/ModuleCountCard.vue?vue&type=template&id=184a0063&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"site-details-card p30"},[_c("div",{staticClass:"flex-middle justify-content-space width100 height100"},[_vm._l(_vm.modulesList,(function(module,index){return _c("div",{key:index,class:["text-center width33",index!==_vm.modulesList.length-1&&"space-card-border-right"]},[_vm.loading?_c("div",[_c("spinner",{attrs:{show:!0}})],1):_c("div",[_c("div",["fire_alarms"===module.key?_c("div",{staticClass:"warning-alarm"},[_c("InlineSvg",{staticClass:"vertical-middle",attrs:{src:"svgs/info-warning",iconClass:"icon icon-xxs"}}),_c("InlineSvg",{staticClass:"vertical-middle",attrs:{src:"svgs/"+module.icon,iconClass:"icon icon-lg"}})],1):_c("InlineSvg",{staticClass:"vertical-middle",attrs:{src:"svgs/"+module.icon,iconClass:"icon icon-lg"}}),_c("div",{staticClass:"fc-black-com f24 pT10 bold pointer",on:{click:function($event){return _vm.redirectToModuleList(module.key,_vm.recordId)}}},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.moduleCountMap,module.key+".count","---"))+" ")]),_c("div",{staticClass:"fc-black-com text-uppercase f12 bold mT5"},[_vm._v(" "+_vm._s(_vm.$getProperty(_vm.moduleCountMap,module.key+".displayName","---"))+" ")])],1)])])})),349===this.$org.id&&_vm.details.data&&_vm.details.data.number?_c("div",{staticClass:"text-center border-left4 pL20"},[_c("InlineSvg",{staticClass:"vertical-middle",attrs:{src:"svgs/spacemanagement/room",iconClass:"icon icon-xxll"}}),_c("div",{staticClass:"fc-black-com f24 pT10 bold pointer"},[_vm._v(" "+_vm._s(_vm.details.data.number)+" ")]),_c("div",{staticClass:"fc-black-com text-uppercase f12 bold mT5"},[_vm._v(" "+_vm._s(_vm.$t("space.sites.accomendation_rooms"))+" ")])],1):_vm._e()],2)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),defineProperty=__webpack_require__(482482),validation=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(821057),__webpack_require__(976801),__webpack_require__(648324),__webpack_require__(670560),__webpack_require__(990260)),router=__webpack_require__(329435),ModuleCountCardvue_type_script_lang_js={props:["details","moduleName"],data:function(){return{moduleCountMap:{},modulesList:[{key:"work_orders",icon:"spacemanagement/workorder"},{key:"fire_alarms",icon:"spacemanagement/alarm"},{key:"bms_alarms",icon:"spacemanagement/alarm"},{key:"assets",icon:"spacemanagement/asset"}],moduleVsFetchUrl:{site:{url:"campus/reportcards",paramKey:"campusId"},building:{url:"building/reportcards",paramKey:"buildingId"},floor:{url:"floor/reportcards",paramKey:"floorId"},space:{url:"space/reportcards",paramKey:"spaceId"}},loading:!1}},computed:{recordId:function(){return(this.details||{}).id||-1}},created:function(){this.loadCardDetails()},methods:{loadCardDetails:function(){var _this=this,recordId=this.recordId,moduleVsFetchUrl=this.moduleVsFetchUrl,moduleName=this.moduleName;if(recordId>0){var _params;this.loading=!0;var params=(_params={},(0,defineProperty/* default */.Z)(_params,moduleVsFetchUrl[moduleName].paramKey,recordId),(0,defineProperty/* default */.Z)(_params,"fetchReportCardsMeta",["moduleCount"]),_params);this.$http.post("".concat(moduleVsFetchUrl[moduleName].url),params).then((function(_ref){var reportcards=_ref.data.reportcards,status=_ref.status;if(200!==status)throw new Error("Error Occurred");reportcards&&(0,validation/* isArray */.kJ)(reportcards)&&reportcards.forEach((function(card){_this.$set(_this.moduleCountMap,"".concat(card.name),{count:card.data,displayName:card.label})}))})).catch((function(_ref2){var message=_ref2.message;_this.$message.error(message)})).finally((function(){_this.loading=!1}))}},redirectToModuleList:function(param,id){if(!param)return null;var filter={operatorId:38,value:["".concat(id)]},routeDetails={work_orders:{path:"/app/wo/orders/open",module:"workorder",viewname:"open"},fire_alarms:{path:"/app/fa/faults/active",module:"newreadingalarm",viewname:"active"},bms_alarms:{path:"/app/fa/bmsalarms/bmsActive",module:"bmsalarm",viewname:"bmsActive"},assets:{path:"/app/at/assets/all",module:"asset",viewname:"all"}};if(["work_orders","fire_alarms","bms_alarms"].includes(param)){var _ref3=routeDetails[param]||{},path=_ref3.path,module=_ref3.module,viewname=_ref3.viewname,searchFilter={resource:(0,objectSpread2/* default */.Z)({module:module},filter)},query={includeParentFilter:!0,search:JSON.stringify(searchFilter)};if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForModule */.Jp)(module,router/* pageTypes */.As.LIST)||{},name=_ref4.name;name&&this.$router.push({name:name,params:{viewname:viewname},query:query})}else this.$router.push({path:path,query:query})}else if("assets"===param){var _ref5=routeDetails[param]||{},_path=_ref5.path,_module=_ref5.module,_viewname=_ref5.viewname,_searchFilter={space:(0,objectSpread2/* default */.Z)({},filter)},_query={search:JSON.stringify(_searchFilter)};if((0,router/* isWebTabsEnabled */.tj)()){var _ref6=(0,router/* findRouteForModule */.Jp)(_module,router/* pageTypes */.As.LIST)||{},_name=_ref6.name;_name&&this.$router.push({name:_name,params:{viewname:_viewname},query:_query})}else this.$router.push({path:_path,query:_query})}}}},site_ModuleCountCardvue_type_script_lang_js=ModuleCountCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(site_ModuleCountCardvue_type_script_lang_js,render,staticRenderFns,!1,null,"184a0063",null)
/* harmony default export */,ModuleCountCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/15425.js.map