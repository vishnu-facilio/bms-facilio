"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[82841],{
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports},
/***/622957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupEmptyState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupEmptyState.vue?vue&type=template&id=839bdf38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-empty"},[_c("div",{staticClass:"fc-setup-empty-image"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}})],1),_c("div",{staticClass:"fc-setup-empty-txt"},[_vm._t("emptyHeading")],2),_c("div",{staticClass:"fc-setup-empty-txt-desc"},[_vm._t("emptyDescription")],2)])},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupEmptyState=component.exports},
/***/353324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupPagination.vue?vue&type=template&id=0e7c1e5a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"mT-5 d-flex",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_vm.hideToggle?_vm._e():_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer pR5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.of"))+" "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer pL5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})],1):_vm._e()])},staticRenderFns=[],FPagination=__webpack_require__(929593),SetupPaginationvue_type_script_lang_js={extends:FPagination/* default */.Z},components_SetupPaginationvue_type_script_lang_js=SetupPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SetupPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupPagination=component.exports},
/***/928885:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ExistingUserForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/portal/ExistingUserForm.vue?vue&type=template&id=4c1ce376
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.canShowUsersList?_c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0 scale-up-center fc-dialog-header-hide",attrs:{visible:!0,width:"50%","before-close":_vm.close,"append-to-body":!0}},[_c("div",{staticClass:"new-header-container pL20 pR0 height60px line-height30"},[_c("div",{staticClass:"new-header-modal"},[_c("div",{staticClass:"new-header-text flex-middle justify-content-space height30"},[_c("div",{staticClass:"setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("common._common.add_existing_user"))+" ")]),_c("div",{staticClass:"fR fc-subheader-right flex-middle"},[_c("div",{staticClass:"flex-middle position-relative mR10"},[_vm.userSearchIcon?_c("i",{staticClass:"el-icon-search pointer fw6 fc-black3-16",on:{click:_vm.showUserSearch}}):_vm._e(),_vm.showUserSearchInput?_c("div",{staticClass:"flex-middle"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Search"},on:{change:_vm.activeUserSearch},model:{value:_vm.activeUserSearchData,callback:function($$v){_vm.activeUserSearchData=$$v},expression:"activeUserSearchData"}}),_c("div",[_c("i",{staticClass:"el-icon-close fc-close-icon-search pointer",on:{click:_vm.clearUser}})])],1):_vm._e()]),_c("pagination",{ref:"pagination",attrs:{total:_vm.userListCount,perPage:50,currentPage:_vm.page},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1)])])]),_vm.loading?_c("div",{staticClass:"flex-middle height450"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.userList)&&!_vm.loading?_c("div",{staticClass:"height450 flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.no_users_available"))+" ")])],1):_vm._e(),_vm.loading||_vm.$validation.isEmpty(_vm.userList)?_vm._e():_c("div",{staticStyle:{"padding-bottom":"52px"}},[_c("el-table",{ref:"elTable",staticClass:"fc-table-th-pLalign-reduce",staticStyle:{width:"100%"},attrs:{data:_vm.userList,height:"450"}},[_c("el-table-column",{attrs:{prop:"name",label:_vm.$t("common.products.name"),width:"270"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:data.row},model:{value:_vm.selectedUser,callback:function($$v){_vm.selectedUser=$$v},expression:"selectedUser"}},[_vm._v(" "+_vm._s(data.row.name)+" ")])]}}],null,!1,901707198)}),_c("el-table-column",{attrs:{prop:"email",label:_vm.$t("common.header.email"),width:"250"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_vm._v(" "+_vm._s(data.row.email)+" ")]}}],null,!1,3513958705)}),_c("el-table-column",{attrs:{prop:"phone",label:_vm.$t("common.header.phone"),width:"200"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_vm._v(" "+_vm._s(data.row.phone?data.row.phone:"---")+" ")]}}],null,!1,3666873135)})],1)],1),_c("div",{staticClass:"dialog-footer"},[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.close()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.next()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.next"))+" ")])],1)])]):_vm.canShowRolesList?_c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0 scale-up-center fc-dialog-header-hide",attrs:{visible:!0,width:"35%","before-close":_vm.close,"append-to-body":!0}},[_c("div",{staticClass:"p30 pB100"},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("common.products.user"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{disabled:""},model:{value:_vm.selectedUser.id,callback:function($$v){_vm.$set(_vm.selectedUser,"id",$$v)},expression:"selectedUser.id"}},_vm._l(_vm.userList,(function(user){return _c("el-option",{key:user.id,attrs:{label:user.name,value:user.id}})})),1),_c("p",{staticClass:"fc-input-label-txt pT20 pB10"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.role"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.selectedRoleId,callback:function($$v){_vm.selectedRoleId=$$v},expression:"selectedRoleId"}},_vm._l(_vm.rolesList,(function(role){return _c("el-option",{key:role.roleId,attrs:{label:role.name,value:role.roleId}})})),1)],1),_c("div",{staticClass:"dialog-footer"},[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.back()}}},[_vm._v(_vm._s(_vm.$t("common.header.back")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{loading:_vm.saving,disabled:_vm.$validation.isEmpty(_vm.selectedRoleId),type:"primary"},on:{click:function($event){return _vm.saveRecord()}}},[_vm._v(" "+_vm._s(_vm.saving?_vm.$t("common.products.adding"):_vm.$t("common._common.add"))+" ")])],1)])]):_vm._e()},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FSearch=(__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(456646),__webpack_require__(821694),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(947748)),api=__webpack_require__(32284),WidgetPagination=__webpack_require__(806339),ExistingUserFormvue_type_script_lang_js={props:["app"],data:function(){return{saving:!1,userListCount:"",loading:!0,userList:[],selectedUser:null,selectedRoleId:null,canShowUsersList:!0,canShowRolesList:!1,page:1,showUserSearchInput:!1,activeUserSearchData:"",userSearchIcon:!0}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,_context.next=3,_this.loadApplicationUserCount();case 3:return _context.next=5,_this.loadApplicationUser();case 5:return _context.next=7,_this.loadRolesForApp();case 7:_this.loading=!1;case 8:case"end":return _context.stop()}}),_callee)})))()},components:{FSearch:FSearch/* default */.Z,Pagination:WidgetPagination/* default */.Z},computed:{appId:function(){return this.app.id}},watch:{page:function(newVal,oldVal){oldVal!=newVal&&this.loadApplicationUser()}},methods:{loadApplicationUserCount:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var search;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:
// let userFilters = {}
// if (searchQuery) {
//   userFilters.name = { operatorId: 5, value: [searchQuery] }
// }
_this2.activeUserSearchData&&(search=_this2.activeUserSearchData),api/* API */.bl.get("/v2/application/users/list?fetchCount=true",{appId:_this2.appId||_this2.$route.params.id,fetchNonAppUsers:!0,search:search}).then((function(_ref){var data=_ref.data,error=_ref.error;error?_this2.$message.error(error.message||"Error Occured"):_this2.userListCount=data.count}));case 2:case"end":return _context2.stop()}}),_callee2)})))()},loadApplicationUser:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var search,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
// let userFilters = {}
// if (searchQuery) {
//   userFilters.name = { operatorId: 5, value: [searchQuery] }
// }
return _this3.activeUserSearchData&&(search=_this3.activeUserSearchData),_this3.loading=!0,_context3.next=4,api/* API */.bl.get("/v2/application/users/list?page=".concat(_this3.page,"&perPage=50"),{appId:_this3.appId||_this3.$route.params.id,fetchNonAppUsers:!0,search:search});case 4:_yield$API$get=_context3.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this3.userList=[]:(_this3.userList=data.users||[],_this3.userList=(0,toConsumableArray/* default */.Z)(new Map(_this3.userList.map((function(user){return[user["uid"],user]}))).values())),_this3.loading=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},activeUserSearch:function(){this.loadApplicationUserCount(),this.loadApplicationUser(),this.page=1},searchUsers:function(searchQuery){this.page=1,this.loadApplicationUserCount(searchQuery),this.loadApplicationUser(searchQuery)},loadRolesForApp:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var appId,_yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return appId=_this4.appId,_context4.next=3,api/* API */.bl.get("/setup/roles",{appId:appId});case 3:_yield$API$get2=_context4.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?_this4.$message.error(error.message||"Error Occured"):_this4.rolesList=(data.roles||[]).filter((function(role){return"Super Administrator"!==role.name}));case 7:case"end":return _context4.stop()}}),_callee4)})))()},next:function(){this.canShowUsersList=!1,this.canShowRolesList=!0},back:function(){this.canShowRolesList=!1,this.canShowUsersList=!0},close:function(){this.$emit("close")},saveRecord:function(){var _this5=this;this.saving=!0;var selectedRoleId=this.selectedRoleId,selectedUser=this.selectedUser,userData={appId:this.appId||this.$route.params.id,user:{id:selectedUser.id,email:selectedUser.email,roleId:selectedRoleId}};api/* API */.bl.post("/v2/application/users/add",userData).then((function(_ref2){var error=_ref2.error;error?_this5.$message.error(error.message||"Error Occurred"):(_this5.$message(_this5.$t("common.header.existing_user_added")),_this5.$emit("saved"),_this5.$store.dispatch("loadUsers",!0))})).finally((function(){_this5.saving=!1,_this5.close()}))},showUserSearch:function(){this.showUserSearchInput=!0,this.userSearchIcon=!1},clearUser:function(){this.showUserSearchInput=!1,this.userSearchIcon=!0,this.activeUserSearchData=null,this.activeUserSearch()}}},portal_ExistingUserFormvue_type_script_lang_js=ExistingUserFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(portal_ExistingUserFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ExistingUserForm=component.exports},
/***/191954:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NewUserList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/users/NewUserList.vue?vue&type=template&id=3cb67484&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-page"},[_c("SetupLayout",{scopedSlots:_vm._u([{key:"heading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.users"))+" ")]},proxy:!0},{key:"description",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.list_all_user"))+" ")]},proxy:!0},{key:"actions",fn:function(){return[_c("div",{staticClass:"flex-middle"},[_vm.canShowApps?_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Select App",filterable:""},model:{value:_vm.appId,callback:function($$v){_vm.appId=$$v},expression:"appId"}},_vm._l(_vm.applications,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1):_vm._e(),_c("div",{staticClass:"action-btn setting-page-btn mL20"},[_vm.canShowApps?_c("el-dropdown",{on:{command:_vm.addNewForm}},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.add_user"))),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"new"}},[_vm._v(_vm._s(_vm.$t("common.products.new_user")))]),_c("el-dropdown-item",{attrs:{command:"existing"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.existing_user"))+" ")])],1)],1):_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.addUser}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.add_user"))+" ")])],1)],1)]},proxy:!0},{key:"searchAndPagination",fn:function(){return[_c("portal-target",{attrs:{name:"#usertable-search-and-pagination"}})]},proxy:!0},{key:"tabs",fn:function(){return[_c("div",{staticClass:"d-flex"},[_c("router-link",{staticClass:"fc-user-list-header mR40",attrs:{to:{name:"users"}}},[_c("div",[_vm._v(_vm._s(_vm.$t("setup.users_management.users")))]),_c("div",{staticClass:"sh-selection-bar"})]),_c("router-link",{staticClass:"fc-user-list-header mR40 ",attrs:{to:{name:"pendingusers"}}},[_c("div",[_vm._v(_vm._s(_vm.$t("setup.setupLabel.pending_users")))]),_c("div",{staticClass:"sh-selection-bar"})])],1)]},proxy:!0},{key:"extraFilter",fn:function(){return[_c("portal-target",{staticClass:"width100",attrs:{name:"#user-table-extra-filter"}})]},proxy:!0},{key:"body",fn:function(){return[_c("div",{staticClass:"fc-setup-list-tab"},[_c("UserTable",{ref:"userTable",attrs:{selectedApp:_vm.selectedApp,appId:_vm.appId}})],1),_vm.showDialog?_c("edit-user",{attrs:{isNew:!0,appId:_vm.appId,applications:_vm.selectedApp},on:{save:_vm.reloadUserList,close:function($event){_vm.showDialog=!1}}}):_vm._e(),_vm.showExistingDialog?_c("AddExistingUser",{attrs:{app:_vm.selectedApp},on:{saved:_vm.reloadUserList,close:function($event){_vm.showExistingDialog=!1}}}):_vm._e()]},proxy:!0}])})],1)},staticRenderFns=[],SetupLayoutvue_type_template_id_2c9efb2b_scoped_true_render=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(538077),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"setup-layout-root"},[_c("div",{staticClass:"header-container "},[_c("div",[_c("div",{staticClass:"header-title"},[_vm._t("heading")],2),_c("div",{staticClass:"description-style"},[_vm._t("description")],2)]),_c("div",[_vm._t("actions")],2)]),_c("div",{staticClass:"second-header"},[_vm._t("tabs"),_vm._t("searchAndPagination")],2),_c("div",{staticClass:"extra-filter flex-middle fc-filter-animation"},[_vm._t("extraFilter")],2),_c("div",{staticClass:"setup-body"},[_vm._t("body")],2)])}),SetupLayoutvue_type_template_id_2c9efb2b_scoped_true_staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,SetupLayoutvue_type_template_id_2c9efb2b_scoped_true_render,SetupLayoutvue_type_template_id_2c9efb2b_scoped_true_staticRenderFns,!1,null,"2c9efb2b",null)
/* harmony default export */,SetupLayout=component.exports,EditUser=__webpack_require__(323755),appUtil=__webpack_require__(843097),UserTablevue_type_template_id_456bc9a2_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("portal",{attrs:{to:"#usertable-search-and-pagination"}},[_c("div",{staticClass:"fc-search-and-pagination"},[_c("pagination",{ref:"page",staticClass:"nowrap pT5",attrs:{total:_vm.userCount,currentPage:_vm.page,perPage:_vm.perPage},on:{"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}}),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{\n          arrow: true,\n          arrowType: 'round',\n          animation: 'fade',\n        }"}],staticClass:"fc-portal-filter-border",class:{filterActive:_vm.showFilter},attrs:{content:_vm.$t("common._common.advanced_filters")},on:{click:_vm.showExtraFilter}},[_c("inline-svg",{staticClass:"pointer",attrs:{src:"svgs/dashboard/filter",iconClass:"icon icon-sm-md fc-fill-path-grey"}}),_c("div",{class:{"dot-active-pink":_vm.isFilterActive}})],1)],1)]),_c("portal",{attrs:{to:"#user-table-extra-filter"}},[_vm.showFilter?_c("div",{staticClass:"fc-search-type"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"relative mR20"},[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.search"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 width250px",attrs:{placeholder:"Search",clearable:""},on:{clear:_vm.refreshList},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.refreshList.apply(null,arguments)}},model:{value:_vm.activeUserSearchData,callback:function($$v){_vm.activeUserSearchData=$$v},expression:"activeUserSearchData"}})],1),_vm.inviteAcceptStatus?_c("div",[_c("div",{staticClass:"fc-black-13 text-left bold pB5"},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Select",filterable:""},on:{change:_vm.refreshList},model:{value:_vm.activeSubTab,callback:function($$v){_vm.activeSubTab=$$v},expression:"activeSubTab"}},_vm._l(_vm.tabList,(function(tab,inex){return _c("el-option",{key:inex,attrs:{label:tab.label,value:tab.value}})})),1)],1):_vm._e()])]):_vm._e()]),_vm.loading?_c("setup-loader",{class:["shadow-none",this.tableHeightClass],scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})]},proxy:!0}],null,!1,3199698086)}):_vm.$validation.isEmpty(_vm.userlist)&&!_vm.loading?_c("setup-empty",{class:["shadow-none",this.tableHeightClass],scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.empty.empty_user"))+" ")]},proxy:!0},{key:"emptyDescription",fn:function(){},proxy:!0}])}):_c("el-table",{staticClass:"width100 fc-setup-table-th-borderTop fc-setup-table fc-setup-table-p0",attrs:{data:_vm.userlist,height:_vm.tableHeight,fit:!0,"header-cell-style":{background:"#f3f1fc"}}},[_c("el-table-column",{attrs:{prop:"name",label:_vm.$t("common.roles.name")},scopedSlots:_vm._u([{key:"default",fn:function(userData){return[_c("div",{staticClass:"fc-user-list-hover",on:{click:function($event){return _vm.openSummary(userData.row)}}},[_c("user-avatar",{attrs:{size:"md",user:userData.row}})],1)]}}])}),_c("el-table-column",{attrs:{prop:"email",label:_vm.$t("common.header._email")}}),_c("el-table-column",{attrs:{prop:"role.name",label:_vm.$t("common.wo_report.role"),width:"200"}}),_c("el-table-column",{attrs:{label:_vm.$t("maintenance._workorder.status"),width:"150"},scopedSlots:_vm._u([_vm.inviteAcceptStatus?{key:"default",fn:function(userData){return[_c("el-switch",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{disabled:"Super Administrator"===userData.row.role.name,"data-arrow":"true",title:_vm.$t("setup.users_management.user_status"),"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeStatus(userData.row)}},model:{value:userData.row.userStatus,callback:function($$v){_vm.$set(userData.row,"userStatus",$$v)},expression:"userData.row.userStatus"}})]}}:{key:"default",fn:function(userData){return[_c("el-button",{staticClass:"pT0 pB0",attrs:{type:"text"},on:{click:function($event){return _vm.reinvite(userData.row)}}},[_vm._v(" "+_vm._s(_vm.pendingUserStatus(userData))+" ")])]}}],null,!0)}),_vm.inviteAcceptStatus?_c("el-table-column",{attrs:{width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(userData){return["Super Administrator"!==userData.row.role.name?_c("div",{staticClass:"visibility-visible-actions justify-content-even flex-middle"},[userData.row.userStatus?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fa fa-unlock reset-icon visibility-hide-actions",attrs:{"data-arrow":"true",title:_vm.$t("setup.users_management.send_reset_pw")},on:{click:function($event){return _vm.reset(userData.row)}}}):_vm._e(),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete visibility-hide-actions delete-icon",attrs:{"data-arrow":"true",title:_vm.$t("setup.users_management.delete_user")},on:{click:function($event){return _vm.deleteUser(userData.row)}}}),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit visibility-hide-actions",attrs:{"data-arrow":"true",title:_vm.$t("setup.users_management.edit_user")},on:{click:function($event){return _vm.editUser(userData.row)}}})]):_vm._e()]}}],null,!1,2898511504)}):_c("el-table-column",{attrs:{width:"150"},scopedSlots:_vm._u([{key:"default",fn:function(userData){return[_c("div",{staticClass:"visibility-visible-actions"},[_vm._v("    "),_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete visibility-hide-actions delete-icon",attrs:{"data-arrow":"true",title:_vm.$t("common.header.delete_user")},on:{click:function($event){return _vm.deleteUser(userData.row)}}})])]}}])})],1),_vm.showDialog?_c("edit-user",{attrs:{user:_vm.editedUser,isNew:!1,appId:_vm.appId,applications:_vm.selectedApp},on:{save:_vm.loadUserData,close:function($event){_vm.showDialog=!1}}}):_vm._e()],1)},UserTablevue_type_template_id_456bc9a2_scoped_true_staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(32284)),SetupPagination=__webpack_require__(353324),User=__webpack_require__(426803),validation=__webpack_require__(990260),SetupLoader=__webpack_require__(233432),SetupEmptyState=__webpack_require__(622957),UserTablevue_type_script_lang_js={props:["appId","selectedApp"],data:function(){return{userlist:[],showDialog:!1,loading:!0,editedUser:null,sendingUserId:-1,perPage:50,userCount:null,activeUserSearchData:"",showFilter:!1,activeSubTab:"all",tabList:[{label:"All",value:"all"},{label:"Active Users",value:"activeUsers"},{label:"Inactive Users",value:"inActiveUsers"}]}},components:{EditUser:EditUser/* default */.Z,Pagination:SetupPagination/* default */.Z,UserAvatar:User/* default */.Z,SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z},computed:{activeTab:function(){return"users"===this.$route.name?"user":"pending"},tableHeight:function(){return this.showFilter?"calc(100vh - 310px)":"calc(100vh - 210px)"},tableHeightClass:function(){return this.showFilter?"height-with-filter":"height-without-filter"},isFilterActive:function(){return this.activeUserSearchData||"all"!=this.activeSubTab},page:function(){return this.$route.query.page||1},inviteAcceptStatus:function(){return"user"===this.activeTab},userStatus:function(){var activeTab=this.activeTab,activeSubTab=this.activeSubTab;return"user"===activeTab&&"all"===activeSubTab||"pending"===activeTab?null:"activeUsers"===activeSubTab}},watch:{activeTab:{handler:function(){this.changeTab()}},page:function(){this.loadUserData()},appId:{handler:function(newVal){(0,validation/* isEmpty */.xb)(newVal)||this.loadUserData()},immediate:!0}},methods:{changeTab:function(){this.userSearchIcon=!0,this.activeSubTab="all",this.refreshList()},pendingUserStatus:function(userData){var _userData$row,sendingUserId=this.sendingUserId;return sendingUserId===(null===userData||void 0===userData||null===(_userData$row=userData.row)||void 0===_userData$row?void 0:_userData$row.id)?this.$t("setup.users_management.sending"):this.$t("setup.users_management.reinvite")},showExtraFilter:function(){this.showFilter=!this.showFilter},reinvite:function(user){var _this=this;this.sendingUserId=user.id,api/* API */.bl.post("setup/resendinvite",{userId:user.id,isPortal:!1}).then((function(_ref){var error=_ref.error;error?(_this.sendingUserId=-1,_this.$message.error(_this.$t("setup.users_management.error_occured"))):(_this.$message.success(_this.$t("setup.users_management.invitation_send_success")),_this.sendingUserId=-1,_this.$store.dispatch("loadUsers",!0))}))},loadUsersCount:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var appId,page,perPage,inviteAcceptStatus,userStatus,search,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return appId=_this2.appId,page=_this2.page,perPage=_this2.perPage,inviteAcceptStatus=_this2.inviteAcceptStatus,userStatus=_this2.userStatus,search=_this2.activeUserSearchData,_context.next=3,api/* API */.bl.get("/v2/application/users/list",{page:page,perPage:perPage,inviteAcceptStatus:inviteAcceptStatus,userStatus:userStatus,appId:appId,fetchCount:!0,search:(0,validation/* isEmpty */.xb)(search)?null:search});case 3:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this2.$message.error(error.message||"Error Occured"):_this2.userCount=data.count;case 7:case"end":return _context.stop()}}),_callee)})))()},editUser:function(user){this.editedUser=user,this.showDialog=!0},changeStatus:function(userinfo){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref2,uid,ouid,userStatus,params,_yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _ref2=userinfo||{},uid=_ref2.uid,ouid=_ref2.ouid,userStatus=_ref2.userStatus,params={user:{uid:uid,ouid:ouid,userStatus:userStatus}},_context2.next=4,api/* API */.bl.post("/setup/changestatus",params);case 4:_yield$API$post=_context2.sent,error=_yield$API$post.error,error?_this3.$message.error(_this3.$t("setup.users_management.error_occured")):(userStatus?_this3.$message.success(_this3.$t("setup.users_management.user_activated")):_this3.$message.success(_this3.$t("setup.users_management.user_deactivated")),_this3.$store.dispatch("loadUsers",!0),_this3.loadUserData());case 7:case"end":return _context2.stop()}}),_callee2)})))()},loadusers:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var appId,page,perPage,inviteAcceptStatus,userStatus,search,_yield$API$get2,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.loading=!0,appId=_this4.appId,page=_this4.page,perPage=_this4.perPage,inviteAcceptStatus=_this4.inviteAcceptStatus,userStatus=_this4.userStatus,search=_this4.activeUserSearchData,_context3.next=4,api/* API */.bl.get("/v2/application/users/list",{page:page,perPage:perPage,inviteAcceptStatus:inviteAcceptStatus,userStatus:userStatus,appId:appId,search:(0,validation/* isEmpty */.xb)(search)?null:search});case 4:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,error=_yield$API$get2.error,error?_this4.$message.error(error.message||"Error Occured"):_this4.userlist=data.users||[],_this4.loading=!1;case 9:case"end":return _context3.stop()}}),_callee3)})))()},refreshList:function(){this.$router.push({query:{}}),this.loadUserData()},loadUserData:function(){this.loadUsersCount(),this.loadusers()},reset:function(user){var _this5=this;api/* API */.bl.post("/fresetPassword",{emailaddress:user.email}).then((function(_ref3){var _data$invitation,data=_ref3.data,error=_ref3.error;error?_this5.$dialog.notify(_this5.$t("setup.users_management.pw_reset_not_send")):(_this5.resetDone=!0,"success"===(null===data||void 0===data||null===(_data$invitation=data.invitation)||void 0===_data$invitation?void 0:_data$invitation.status)?(_this5.$dialog.notify(_this5.$t("setup.users_management.pw_reset_link")),_this5.$store.dispatch("loadUsers",!0)):_this5.$dialog.notify(_this5.$t("setup.users_management.pw_reset_not_send")))}))},deleteUser:function(user){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _ref4,uid,ouid,name,id,params,value,_yield$API$post2,error,deletingIndex;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _ref4=user||{},uid=_ref4.uid,ouid=_ref4.ouid,name=_ref4.name,id=_ref4.id,params={user:{uid:uid,ouid:ouid}},_context4.next=4,_this6.$dialog.confirm({title:_this6.$t("setup.users_management.delete_user_msg"),message:"".concat(_this6.$t("setup.users_management.delete_user_msg2")," User ").concat(name," ?"),rbDanger:!0,rbLabel:_this6.$t("setup.users_management.delete")});case 4:if(value=_context4.sent,value){_context4.next=7;break}return _context4.abrupt("return");case 7:return _context4.next=9,api/* API */.bl.post("/setup/deleteUser",params);case 9:_yield$API$post2=_context4.sent,error=_yield$API$post2.error,error?_this6.$message.error(_this6.$t("setup.users_management.unable_to_delete")):(_this6.$message.success(_this6.$t("setup.users_management.user_delete_success")),deletingIndex=_this6.userlist.findIndex((function(user){return user.id===id})),-1!==deletingIndex&&(_this6.userlist.splice(deletingIndex,1),_this6.userCount--),_this6.$store.dispatch("loadUsers",!0));case 12:case"end":return _context4.stop()}}),_callee4)})))()},openSummary:function(user){this.$router.push({name:"userSummary",params:{id:user.id,appId:this.appId}})}}},users_UserTablevue_type_script_lang_js=UserTablevue_type_script_lang_js,UserTable_component=(0,componentNormalizer/* default */.Z)(users_UserTablevue_type_script_lang_js,UserTablevue_type_template_id_456bc9a2_scoped_true_render,UserTablevue_type_template_id_456bc9a2_scoped_true_staticRenderFns,!1,null,"456bc9a2",null)
/* harmony default export */,UserTable=UserTable_component.exports,ExistingUserForm=__webpack_require__(928885),router=__webpack_require__(329435),NewUserListvue_type_script_lang_js={name:"NewUsersList",data:function(){return{showDialog:!1,applications:[],appId:null,showExistingDialog:!1,appLoading:!1}},title:function(){return this.title},components:{SetupLayout:SetupLayout,EditUser:EditUser/* default */.Z,UserTable:UserTable,AddExistingUser:ExistingUserForm/* default */.Z},computed:{canShowApps:function(){var applications=this.applications;return applications.length>1},selectedApp:function(){var _this=this;return this.applications.find((function(app){return app.id===_this.appId}))}},created:function(){this.$store.dispatch("loadShifts"),this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups"),this.loadAppList()},methods:{loadAppList:function(){var _this2=this;return this.appLoading=!0,(0,appUtil/* loadApps */.jJ)().then((function(_ref){var data=_ref.data,error=_ref.error;if(error)_this2.$message.error(error.message||"Error Occured");else{_this2.applications=data.filter((function(app){return 3===app.appCategory}));var _getApp=(0,router/* getApp */.wx)(),currentApp=_getApp.linkName,selectedApp=_this2.applications.find((function(app){return app.linkName===currentApp}))||_this2.applications.find((function(app){return app.isDefault}))||_this2.applications[0];_this2.appId=(selectedApp||{}).id}})).finally((function(){return _this2.appLoading=!1}))},reloadUserList:function(){var _this$$refs$userTable;null===(_this$$refs$userTable=this.$refs["userTable"])||void 0===_this$$refs$userTable||_this$$refs$userTable.loadUserData()},addUser:function(){this.showDialog=!0},addNewForm:function(cmd){"new"===cmd?this.addUser():"existing"===cmd&&(this.showExistingDialog=!0)}}},users_NewUserListvue_type_script_lang_js=NewUserListvue_type_script_lang_js,NewUserList_component=(0,componentNormalizer/* default */.Z)(users_NewUserListvue_type_script_lang_js,render,staticRenderFns,!1,null,"3cb67484",null)
/* harmony default export */,NewUserList=NewUserList_component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/82841.js.map