"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[19795],{
/***/882401:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ItemTool}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/ItemTool.vue?vue&type=template&id=eff8209c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.recordData?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_vm.showSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{attrs:{trigger:"click",height:"120px",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.photos,(function(photo,index){return photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()})),1)],1):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]),_vm.showName?_c("div",[_c("div",{staticClass:"textoverflow-ellipsis width110px pL8"},[_vm._v(" "+_vm._s("others"===_vm.module?_vm.recordData:_vm.recordData.name)+" ")])]):_vm._e()])]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),ItemToolvue_type_script_lang_js=(__webpack_require__(434284),{props:["size","recordData","name","hovercard","module"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.recordData.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge"]}},mounted:function(){this.loadAvatarUrl()},computed:{showSlide:function(){if(this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},watch:{recordData:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){this.avatarUrl=this.recordData.photoUrl,this.recordData.photoUrl?this.avatarUrl=this.recordData.photoUrl:this.avatarUrl=this.getDefaultAvatar()},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.recordData){if("item"===this.module)return __webpack_require__(73188);if("tool"===this.module)return __webpack_require__(392708);if("others"===this.module)return __webpack_require__(73188)}return __webpack_require__(73188)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}}),avatar_ItemToolvue_type_script_lang_js=ItemToolvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_ItemToolvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ItemTool=component.exports},
/***/481161:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DetailsWidgetMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var render,staticRenderFns,defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(506203),__webpack_require__(689730),__webpack_require__(990260)),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),utils_field=__webpack_require__(815872),router=__webpack_require__(329435),FetchViewsMixin=__webpack_require__(646716),lookupModulesRouterMap={workorder:function(id,viewname){return{name:"wosummarynew",params:{id:id,viewname:viewname}}},ticket:function(id,viewname){return{name:"wosummarynew",params:{id:id,viewname:viewname}}},asset:function(id,viewname){return{path:"/app/at/assets/".concat(viewname,"/").concat(id,"/overview")}},alarm:function(id,viewname){return{path:"/app/fa/faults/".concat(viewname,"/newsummary/").concat(id)}},vendors:function(id,viewname){return{path:"/app/vendor/vendors/".concat(viewname,"/summary/").concat(id)}},purchaseorder:function(id,viewname){return{name:"poSummary",params:{id:id,viewname:viewname}}},tenant:function(id,viewname){return{name:"tenantSummary",params:{id:id,viewname:viewname}}},tenantunit:function(id,viewname){return{name:"tenantUnitSummary",params:{id:id,viewname:viewname}}},custom:function(id,viewname,moduleName){return{name:"custommodules-summary",params:{moduleName:moduleName,viewname:viewname,id:id}}}},lookUpSpecialSupportModules=["alarm","workorder","ticket","asset","vendors","purchaseorder","tenant","tenantunit"],DetailsWidgetMixinvue_type_script_lang_js={data:function(){return{isLookupSimple:utils_field/* isLookupSimple */.qu,exportDownloadUrl:{},lookUpSpecialSupportModules:lookUpSpecialSupportModules}},mixins:[FetchViewsMixin/* default */.Z],methods:{isLookUpRedirectApplicable:function(field){var _ref=field||{},displayTypeEnum=_ref.displayTypeEnum,lookupModuleName=_ref.lookupModuleName,fieldObj=_ref.field,_ref2=fieldObj||{},lookupModule=_ref2.lookupModule,_ref3=lookupModule||{},custom=_ref3.custom,typeEnum=_ref3.typeEnum;return"LOOKUP_SIMPLE"===displayTypeEnum&&lookupModuleName&&"BASE_ENTITY"===typeEnum&&(this.lookUpSpecialSupportModules.includes(lookupModuleName)||custom||(0,router/* isWebTabsEnabled */.tj)())},redirectToLookUpFieldSummary:function(lookUpField){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _ref4,lookupModuleName,name,field,details,isV3Api,_ref5,data,_ref6,lookupModule,_ref7,custom,viewname,_ref8,id,_ref9,routeName;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _ref4=lookUpField||{},lookupModuleName=_ref4.lookupModuleName,name=_ref4.name,field=_ref4.field,details=_this.details,isV3Api=_this.isV3Api,_ref5=details||{},data=_ref5.data,_ref6=field||{},lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},custom=_ref7.custom,_context.next=7,_this.fetchView(lookupModuleName);case 7:if(viewname=_context.sent,_ref8=isV3Api||(field||{}).default?(details||{})[name]:(data||{})[name],id=_ref8.id,!(0,validation/* isEmpty */.xb)(id)){_context.next=11;break}return _context.abrupt("return");case 11:(0,router/* isWebTabsEnabled */.tj)()?(_ref9=(0,router/* findRouteForModule */.Jp)(lookupModuleName,router/* pageTypes */.As.OVERVIEW)||{},routeName=_ref9.name,routeName&&_this.$router.push({name:routeName,params:{viewname:viewname,id:id}})):custom?_this.$router.push(lookupModulesRouterMap["custom"](id,viewname,lookupModuleName)):_this.$router.push(lookupModulesRouterMap[lookupModuleName](id,viewname));case 12:case"end":return _context.stop()}}),_callee)})))()},isFileField:function(field){return"FILE"===field.displayTypeEnum},isCustomField:function(field){return!this.$getProperty(field,"field.default",!1)},getFileName:function(field){var record,details=this.details,isV3Api=this.isV3Api;if(isV3Api)record=details;else{var _ref10=details||{},data=_ref10.data;record=this.isCustomField(field)?data:details}if(!(0,validation/* isEmpty */.xb)(record)){var filename=record["".concat(field.name,"FileName")];if(!(0,validation/* isEmpty */.xb)(filename))return filename}return"---"},downloadAttachment:function(field){var url,record,_this2=this,details=this.details,isV3Api=this.isV3Api;if(isV3Api)record=details;else{var _ref11=details||{},data=_ref11.data;record=this.isCustomField(field)?data:details}if(!(0,validation/* isEmpty */.xb)(record)){var filename=record["".concat(field.name,"FileName")];(0,validation/* isEmpty */.xb)(filename)||(url=record["".concat(field.name,"DownloadUrl")],(0,validation/* isEmpty */.xb)(this.exportDownloadUrl[field.name])?this.exportDownloadUrl=(0,defineProperty/* default */.Z)({},field.name,url):(this.exportDownloadUrl=(0,defineProperty/* default */.Z)({},field.name,null),this.$nextTick((function(){_this2.exportDownloadUrl=(0,defineProperty/* default */.Z)({},field.name,url)}))))}},getFormattedDisplayName:function(){var fieldObj=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},field=fieldObj.field,formFieldDisplayName=fieldObj.displayName,fieldDisplayName=this.$getProperty(field,"displayName");return 1===this.$org.id?formFieldDisplayName||fieldDisplayName:fieldDisplayName||formFieldDisplayName;//ICD wants its fieldLabel to be formFieldDisplaName
},getFormattedValue:function(fieldObj,lookupObj,sites){var _this3=this;return new Promise((function(resolve){lookupObj||(lookupObj={});var value,field=fieldObj.field,lookupModuleName=fieldObj.lookupModuleName,_ref12=field||{},_ref12$lookupModule=_ref12.lookupModule,lookupModule=void 0===_ref12$lookupModule?{}:_ref12$lookupModule;if(lookupObj&&field?value=(0,validation/* isEmpty */.xb)(lookupObj[field.name])?null:lookupObj[field.name]:lookupObj&&(value=(0,validation/* isEmpty */.xb)(lookupObj[fieldObj.name])?null:lookupObj[fieldObj.name]),field&&(0,utils_field/* isSiteField */.Vn)(field)||(0,utils_field/* isSiteField */.Vn)(fieldObj)){var site=sites[value];value=site&&site.label?site.label:"---",resolve(value)}else if((0,validation/* isEmpty */.xb)(field)||!(0,utils_field/* isDateField */.y2)(field)&&!(0,utils_field/* isDateTimeField */.K)(field))if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isSpecialEnumField */.je)(field))resolve(value?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else if((0,validation/* isEmpty */.xb)(field)||!(0,utils_field/* isEnumField */.Ri)(field)&&!(0,utils_field/* isSystemEnumField */.Hw)(field))if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isMultiEnumField */.yS)(field))resolve(_this3.getMultiEnumFieldValues(field,value));else if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isBooleanField */.Mw)(field))resolve((0,validation/* isBoolean */.jn)(value)?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else if(!(0,validation/* isEmpty */.xb)(field)&&(0,utils_field/* isGeoLocationField */.PR)(fieldObj))resolve(value?(0,field_utils/* getDisplayValue */.UZ)(fieldObj,value):"");else if(field&&"DURATION"===field.displayType||"DURATION"===fieldObj.displayTypeEnum)resolve(_this3.$helpers.getFormattedDuration(value,(0,validation/* isEmpty */.xb)(field.unit)?"s":field.unit));else if(!(0,validation/* isEmpty */.xb)(field)&&[2,3].includes(field.dataType)){var _field=fieldObj.field,_ref13=_field||{},unit=_ref13.unit;value=(_this3.isV3Api?(0,validation/* isNullOrUndefined */.le)(value):(0,validation/* isEmpty */.xb)(value))?"---":(0,validation/* isEmpty */.xb)(unit)?"".concat(value):["$","â‚¹"].includes(unit)?" ".concat(unit," ").concat(value):"".concat(value," ").concat(unit),resolve(value)}else if("MULTI_LOOKUP"===(field||{}).dataTypeEnum)resolve(_this3.getMultiLookupValue(value));else if("STRING_SYSTEM_ENUM"===(field||{}).dataTypeEnum)resolve(value?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else if(value&&(lookupModule&&"basespace"===lookupModule.name||"basespace"===lookupModuleName)){var spaceName=_this3.$getProperty(value,"name");(0,validation/* isEmpty */.xb)(spaceName)&&(spaceName=_this3.space[value.id]?_this3.space[value.id]:"---"),resolve(spaceName)}else if(lookupModule&&["users","requester"].includes(lookupModule.name)||["users","requester"].includes(lookupModuleName)){var userId=(value||{}).id,userName=_this3.$getProperty(value,"name");if((0,validation/* isEmpty */.xb)(userName))if(userId){var _ref14=_this3.$store.getters.getUser(userId)||{},_ref14$name=_ref14.name,name=void 0===_ref14$name?"---":_ref14$name;resolve(name)}else resolve("---");else resolve(userName)}else if(field&&"ticket"===lookupModule.name&&"workpermit"===_this3.$getProperty(field.module,"name",""))resolve((0,validation/* isEmpty */.xb)((value||{}).serialNumber)?"---":"#".concat(value.serialNumber));else if(((0,utils_field/* isLookupSimple */.qu)(fieldObj)||(0,utils_field/* isLookupPopup */.CT)(fieldObj))&&_this3.$getProperty(lookupObj,fieldObj.name,null)&&(0,validation/* isObject */.Kn)(lookupObj[fieldObj.name])&&_this3.$getProperty(lookupObj,"".concat(fieldObj.name,".primaryValue"),null)||field&&["LOOKUP_SIMPLE","LOOKUP_POPUP"].includes(field.displayType)&&_this3.$getProperty(lookupObj,field.name,null)&&(0,validation/* isObject */.Kn)(lookupObj[field.name])&&_this3.$getProperty(lookupObj,"".concat(field.name,".primaryValue"),null)){
// Custom modules lookup fields
var _name=field&&field.name||fieldObj.name;resolve(lookupObj[_name].primaryValue?lookupObj[_name].primaryValue:"---")}else if(value&&(((0,utils_field/* isLookupSimple */.qu)(fieldObj)||(0,utils_field/* isLookupPopup */.CT)(fieldObj))&&fieldObj.lookupModuleName||field&&["LOOKUP_SIMPLE","LOOKUP_POPUP"].includes(field.displayType)&&_this3.$getProperty(field.lookupModule,"name",""))){var isRotating=["rotatingItem","rotatingTool"].includes(field.name);if(isRotating)resolve(value||"---");else{var _lookupModuleName=field&&_this3.$getProperty(field.lookupModule,"name","")||fieldObj.lookupModuleName;(0,picklist/* getFieldValue */.oe)({lookupModuleName:_lookupModuleName,selectedOptionId:[value.id]}).then((function(_ref15){var value,error=_ref15.error,data=_ref15.data;error||(value=_this3.$getProperty(data,"0.label")),resolve(value||"---")}))}}else"resource"===(field||{}).name?resolve((value||{}).name?value.name:"---"):_this3.isFileField(fieldObj)||"SIGNATURE"===_this3.$getProperty(fieldObj,"field.displayType")?resolve(_this3.getFileName(fieldObj)):resolve(value||"---");else resolve(value?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---");else resolve(value>0?(0,field_utils/* getDisplayValue */.UZ)(field,value):"---")}))},getMultiLookupValue:function(value){var lookupRecordNames=(value||[]).map((function(currRecord){return currRecord.displayName||currRecord.name||currRecord.subject}));return lookupRecordNames.length>5?"".concat(lookupRecordNames.slice(0,5).join(", ")," +").concat(Math.abs(lookupRecordNames.length-5)):(0,validation/* isEmpty */.xb)(lookupRecordNames)?"---":"".concat(lookupRecordNames.join(", "))},getSysFieldValue:function(field){var value,details=this.details;if("sysModifiedBy"===field.name||"sysCreatedBy"===field.name||"lastIssuedToUser"===field.name){var userId=(details[field.name]||{}).id,userName=this.$getProperty(details[field.name],"name");if(!(0,validation/* isEmpty */.xb)(userName))return userName;if(userId){var _ref16=this.$store.getters.getUser(userId)||{},_ref16$name=_ref16.name,name=void 0===_ref16$name?"---":_ref16$name;return name}}else{if("sysCreatedTime"!==field.name&&"sysModifiedTime"!==field.name&&"lastIssuedTime"!==field.name)return value=details[field.name],value||"---";if(value=details[field.name],(0,validation/* isEmpty */.xb)(value))return"---";var timePerdiod=this.$options.filters.formatDate(value);if(!(0,validation/* isEmpty */.xb)(timePerdiod))return timePerdiod}return"---"},getMultiEnumFieldValues:function(field){var values=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],enumMap=field.enumMap,valueStr=(values||[]).reduce((function(accStr,value){var str=enumMap[value]||"";return(0,validation/* isEmpty */.xb)(accStr)?"".concat(str):"".concat(accStr,", ").concat(str)}),"");return(0,validation/* isEmpty */.xb)(valueStr)?"---":valueStr},toggleVisibility:function(offsetHeight){var _this4=this;this.isAllVisible=!this.isAllVisible,this.isAllVisible?this.$nextTick((function(){var height=_this4.$refs["content-container"].scrollHeight+(offsetHeight||90),width=_this4.$refs["content-container"].scrollWidth;_this4.resizeWidget({height:height,width:width})})):this.$nextTick((function(){return _this4.resizeWidget({h:_this4.defaultWidgetHeight})}))},autoResize:function(){var _this5=this;this.$nextTick((function(){var container=_this5.$refs["content-container"];if(container){var dimensions,height=_this5.$refs["content-container"].scrollHeight+60,width=_this5.$refs["content-container"].scrollWidth;if((0,validation/* isFunction */.mf)(_this5.calculateDimensions)&&(dimensions=_this5.calculateDimensions({height:height,width:width})),!(0,validation/* isEmpty */.xb)(dimensions)){var _ref17=dimensions||{},h=_ref17.h,params={};if(h<=_this5.defaultWidgetHeight)_this5.needsShowMore=!1,params={height:height,width:width};else{var _this5$defaultWidgetH=_this5.defaultWidgetHeight,defaultWidgetHeight=void 0===_this5$defaultWidgetH?7:_this5$defaultWidgetH;_this5.needsShowMore=h>defaultWidgetHeight,_this5.defaultWidgetHeight=defaultWidgetHeight,params=_this5.needsShowMore?{h:defaultWidgetHeight}:{h:h}}_this5.resizeWidget(params)}}}))}}},common_DetailsWidgetMixinvue_type_script_lang_js=DetailsWidgetMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(common_DetailsWidgetMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DetailsWidgetMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
},
/***/719795:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return HorizontalFieldDetails}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/widget/common/field-details/HorizontalFieldDetails.vue?vue&type=template&id=29b60b9e&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:["asset-details-widget",_vm.widget.title&&"pT0"]},[_vm.widget.title?[_c("div",{staticClass:"widget-topbar"},[_c("div",{staticClass:"widget-title mL0"},[_vm._v(_vm._s(_vm.widget.title))])])]:_vm._e(),_vm.loading?_c("div",{class:["container",_vm.widget.title&&"pL0"]},[_vm._l([1,2,3],(function(index){return _c("div",{key:index,staticClass:"field"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("span",{class:["lines loading-shimmer",_vm.widget.title&&"m0"]})]),_c("el-col",{attrs:{span:12}},[_c("span",{class:["lines loading-shimmer",_vm.widget.title&&"m0"]})])],1)],1)})),_c("div",{staticClass:"field"},[_c("el-row",[_c("el-col",{attrs:{span:12}}),_c("el-col",{attrs:{span:12}})],1)],1)],2):_vm.emptyState?_c("div",{staticClass:"mT20",staticStyle:{color:"#8ca1ad"}},[_c("div",{staticClass:"d-flex flex-direction-column"},[_c("inline-svg",{staticClass:"vertical-middle self-center",attrs:{src:"svgs/emptystate/notes",iconClass:"icon icon-xxxlg mR5"}}),_c("div",{staticClass:"f14 pL10 self-center"},[_vm._v(" "+_vm._s(_vm.$t("qanda.template.no_fields"))+" ")])],1)]):_c("div",{ref:"content-container",class:["container",_vm.widget.title&&"pL0"]},[_vm._l(_vm.fieldsList,(function(field,index){return[["TEXTAREA","RICH_TEXT"].includes(field.displayTypeEnum)?_c("el-row",{key:field.name+index,staticClass:"field full-row"},[_c("el-col",{staticClass:"field-label",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.getFormattedDisplayName(field))+" ")]),"TEXTAREA"===field.displayTypeEnum?_c("el-col",{staticClass:"field-value line-height22 text-area",attrs:{span:16}},[_vm._v(" "+_vm._s(field.displayValue)+" ")]):_vm._e(),"RICH_TEXT"===field.displayTypeEnum?_c("el-col",{staticClass:"field-value line-height22",attrs:{span:16}},[_vm.$validation.isEmpty(field.displayValue)?_c("span",[_vm._v("---")]):_c("div",{staticClass:"rich-text-preview-details",domProps:{innerHTML:_vm._s(_vm.sanitize(field.displayValue))}})]):_vm._e()],1):_vm.showChildMeterExp&&"childMeterExpression"===field.name?_c("el-row",{key:"childMeter-"+field.name+"-"+index,staticClass:"field full-row"},[_c("el-col",{staticClass:"field-label",attrs:{span:6}},[_vm._v(_vm._s(field.displayName))]),_c("el-col",{staticClass:"field-value",attrs:{span:18}},[_c("child-meter-expression",{attrs:{assetDetails:_vm.details}})],1)],1):_c("el-row",{key:field.name+"-"+index,staticClass:"field"},[_c("el-col",{key:field.displayName,staticClass:"field-label",attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.getFormattedDisplayName(field))+" ")]),_c("el-col",{key:field.displayName+"value",staticClass:"field-value",attrs:{span:12}},[_vm.details.rotatingItem&&_vm.details.rotatingItem.id&&"rotatingItem"===field.name?_c("div",{on:{click:function($event){return _vm.$router.push({path:"/app/inventory/item/all/"+_vm.details.rotatingItem.id+"/summary"})}}},[_c("item-tool-avatar",{attrs:{name:"true",size:"lg",module:"item",recordData:_vm.details["rotatingItem"].itemType}})],1):_vm.details.rotatingTool&&_vm.details.rotatingTool.id&&"rotatingTool"===field.name?_c("div",{on:{click:function($event){return _vm.$router.push({path:"/app/inventory/tools/all/"+_vm.details.rotatingTool.id+"/summary"})}}},[_c("item-tool-avatar",{attrs:{name:"true",size:"lg",module:"tool",recordData:_vm.details["rotatingTool"].toolType}})],1):_vm.isLookupSimple(field)?_c("div",[_c("GlimpseLookupWrapper",{attrs:{field:field,record:_vm.details,siteList:_vm.siteList,recordModuleName:_vm.moduleName}})],1):_vm.systemFields.includes(field.name)?_c("div",[_vm._v(" "+_vm._s(_vm.getSysFieldValue(field))+" ")]):_vm.isFileField(field)?_c("div",[_c("el-row",[_c("el-col",{key:index+1+"asset",staticClass:"attachment-label pointer",attrs:{span:12}},[_vm.exportDownloadUrl[field.name]?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl[field.name]}}):_vm._e(),_c("a",{on:{click:function($event){return _vm.downloadAttachment(field)}}},[_vm._v(" "+_vm._s(_vm.getFileName(field))+" ")])])],1)],1):"SIGNATURE"===_vm.$getProperty(field,"field.displayType")?_c("div",[_c("SignatureField",{attrs:{field:(field||{}).field,record:_vm.details}})],1):_vm.isGeoLocationField(field)?[_vm.$validation.isEmpty(field.displayValue)?_c("span",[_vm._v("---")]):_c("div",{staticClass:"bluetxt pointer",on:{click:function($event){return _vm.$helpers.openInMapForLatLngStr(field.displayValue)}}},[_vm._v(" "+_vm._s("@"+field.displayValue)+" ")])]:"URL_FIELD"===field.displayTypeEnum?[_vm.$validation.isEmpty(field.displayValue)||"---"===field.displayValue?_c("span",[_vm._v("---")]):_c("a",{staticClass:"url-field-display",attrs:{rel:"nofollow",href:_vm.$getProperty(field,"displayValue.href",""),target:_vm.$getProperty(field,"displayValue.target",""),referrerpolicy:"no-referrer"}},[_vm._v(_vm._s(_vm.getUrlDisplayName(field)))])]:"CURRENCY"===field.displayTypeEnum?[_vm.showCurrencyField(field)?_c("div",{staticClass:"d-flex"},[_c("span",[_vm._v(_vm._s(_vm.getCurrencyFieldValue(field)))]),_vm.showInfoIcon(field)?_c("el-popover",{attrs:{placement:"bottom",title:_vm.$t("setup.currency.rate"),width:"230",trigger:"click"},model:{value:_vm.showPopOver,callback:function($$v){_vm.showPopOver=$$v},expression:"showPopOver"}},[_c("div",{staticClass:"currency-conversion-rate",on:{click:function($event){_vm.showPopOver=!1}}},[_c("fc-icon",{staticClass:"pointer rate-svg-close",attrs:{group:"default",name:"close",size:"15"}}),_c("span",{staticClass:"currency-desc"},[_vm._v(" "+_vm._s(""+_vm.getCurrencyFieldValue(field,!0))+" ")])],1),_c("fc-icon",{staticClass:"pointer info-position mL2",attrs:{slot:"reference",group:"dsm",name:"info",size:"13"},slot:"reference"})],1):_vm._e()],1):_c("span",[_vm._v("---")])]:"MULTI_CURRENCY"===field.displayTypeEnum?[_c("CurrencyPopOver",{attrs:{field:field,details:_vm.details,showInfo:!0}})]:"TIME"===_vm.$getProperty(field,"field.displayType")?_c("div",[_vm.$validation.isEmpty(field.displayValue)?_c("span",[_vm._v("---")]):_c("div",[_vm._v(" "+_vm._s(""+_vm.getTimeFieldValue(field))+" ")])]):_c("span",[_vm._v(_vm._s(field.displayValue))])],2)],1)]})),_vm.additionalField?_c("div",{staticClass:"field"},[_c("el-row",[_c("el-col",{staticClass:"field-label",attrs:{span:12}}),_c("el-col",{staticClass:"field-value",attrs:{span:12}})],1)],1):_vm._e()],2),_vm.needsShowMore?_c("div",{staticClass:"text-center pT10 pB15 mR20",staticStyle:{"background-color":"#fff"}},[_c("a",{staticClass:"fc-link fc-link-animation text-capitalize letter-spacing0_3 f13",on:{click:function($event){return _vm.toggleVisibility()}}},[_vm._v(_vm._s(_vm.showMoreLinkText))])]):_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),api=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(670560),__webpack_require__(538077),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(648324),__webpack_require__(32284)),validation=__webpack_require__(990260),ItemTool=__webpack_require__(882401),vuex_esm=__webpack_require__(420629),ChildMeterExpressionvue_type_template_id_26a21a66_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.$validation.isEmpty(_vm.expression)?_c("div",[_vm._v("---")]):_c("div",{staticStyle:{display:"flex"}},_vm._l(_vm.expression,(function(exp,index){return _c("div",{key:index},[exp.id?_c("a",{staticClass:"pointer",on:{click:function($event){return _vm.openAssetLink(exp.id)}}},[_vm._v(_vm._s(exp.name))]):_c("span",{staticClass:"bold pR5 pL5"},[_vm._v(_vm._s(exp.op))])])})),0)])},ChildMeterExpressionvue_type_template_id_26a21a66_staticRenderFns=[],ChildMeterExpressionvue_type_script_lang_js=(__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(450886),__webpack_require__(425728),__webpack_require__(879288),__webpack_require__(733313),{props:["assetDetails"],mounted:function(){this.getExpression(this.assetDetails.childMeterExpression)},data:function(){return{expression:[]}},methods:{getExpression:function(expression){var _this=this;if(!(0,validation/* isEmpty */.xb)(expression)){var assetIds=expression.split(/[^0-9]/).filter((function(arr){return!(0,validation/* isEmpty */.xb)(arr)})),param={filters:{id:{operatorId:9,value:assetIds}}};this.$util.loadAsset(param).then((function(_ref){var assets=_ref.assets;_this.expression=expression.split(/(\d+)*(\()*(\))*(\+)*(\-)*/).filter((function(arr){return!(0,validation/* isEmpty */.xb)(arr)})),_this.expression=_this.expression.map((function(exp){if(isNaN(exp))return{op:exp};var asset=assets.find((function(asset){return asset.id===Number(exp)}));return{id:asset.id,name:asset.name}}))}))}},openAssetLink:function(id){this.$router.push({path:"/app/at/assets/all/"+id+"/overview"})}}}),fields_ChildMeterExpressionvue_type_script_lang_js=ChildMeterExpressionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(fields_ChildMeterExpressionvue_type_script_lang_js,ChildMeterExpressionvue_type_template_id_26a21a66_render,ChildMeterExpressionvue_type_template_id_26a21a66_staticRenderFns,!1,null,null,null)
/* harmony default export */,ChildMeterExpression=component.exports,DetailsWidgetMixin=__webpack_require__(481161),SignatureColumn=__webpack_require__(724460),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),field=__webpack_require__(815872),sanitize=__webpack_require__(678042),picklist=__webpack_require__(961358),GlimpseLookupWrapper=__webpack_require__(705219),log_map_state=__webpack_require__(766331),TimeFormatMixin=__webpack_require__(128143),CurrencyPopOver=__webpack_require__(706881),skipFieldsForModuleMap={facility:["slotDuration","amenities","isChargeable","maxSlotBookingAllowed","isMultiBookingPerSlotAllowed","bookingAdvancePeriodInDays","isAttendeeListNeeded"]},HorizontalFieldDetailsvue_type_script_lang_js={name:"FieldDetails",props:["moduleName","details","layoutParams","resizeWidget","calculateDimensions","primaryFields","widget","isV3Api"],components:{ItemToolAvatar:ItemTool/* default */.Z,ChildMeterExpression:ChildMeterExpression,SignatureField:SignatureColumn/* default */.Z,GlimpseLookupWrapper:GlimpseLookupWrapper/* default */.Z,CurrencyPopOver:CurrencyPopOver/* default */.Z},mixins:[DetailsWidgetMixin/* default */.Z],data:function(){return{loading:!1,systemFields:["sysModifiedBy","sysCreatedBy","sysCreatedTime","sysModifiedTime","lastIssuedToUser","lastIssuedToWo","lastIssuedTime"],fieldsList:[],filterfields:["address"],lookupValue:null,needsShowMore:!1,isAllVisible:!1,defaultWidgetHeight:(this.layoutParams||{}).h,additionalField:!1,emptyState:!1,showChildMeterExp:!1,siteList:[],showPopOver:!1}},created:function(){this.isGeoLocationField=field/* isGeoLocationField */.PR,this.sanitize=sanitize/* sanitize */.N,this.$store.dispatch("getActiveCurrencyList")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo},users:function(state){return state.users},account:function(state){return state.account}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),{},{sites:function(){var siteList=this.siteList,siteObj={};return siteList.forEach((function(obj){siteObj["".concat(obj.value)]=obj})),siteObj},space:function(){return this.spaces.reduce((function(arr,space){return arr[space.id]=space.name,arr}),{})},showMoreLinkText:function(){return this.isAllVisible?this.$t("common._common.view_less"):this.$t("common._common.view_more")},multiCurrency:function(){var _ref=this.account.data.currencyInfo||{},displaySymbol=_ref.displaySymbol,currencyCode=_ref.currencyCode,multiCurrencyEnabled=_ref.multiCurrencyEnabled;return{displaySymbol:displaySymbol,currencyCode:currencyCode,multiCurrencyEnabled:multiCurrencyEnabled}}}),watch:{details:{handler:function(value,oldValue){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isEqual_default()(value,oldValue)){_context.next=6;break}return _context.next=3,_this.$store.dispatch("view/loadModuleMeta",_this.moduleName);case 3:return _context.next=5,_this.getSites();case 5:_this.getFormMeta();case 6:case"end":return _context.stop()}}),_callee)})))()},immediate:!0}},methods:{getSites:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _ref2,_ref2$siteId,siteId,defaultIds,params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_ref2=_this2.details||{},_ref2$siteId=_ref2.siteId,siteId=void 0===_ref2$siteId?null:_ref2$siteId,!(0,validation/* isEmpty */.xb)(siteId)){_context2.next=3;break}return _context2.abrupt("return");case 3:return defaultIds=[siteId],params={field:{lookupModuleName:"site"},defaultIds:defaultIds,perPage:1},_context2.next=7,(0,picklist/* getFieldOptions */._K)(params).then((function(_ref3){var error=_ref3.error,options=_ref3.options;error||(_this2.siteList=options)}));case 7:case"end":return _context2.stop()}}),_callee2)})))()},deserialize:function(data){var _this3=this,moduleName=this.moduleName,promises=[],skipFields=[].concat((0,toConsumableArray/* default */.Z)(this.filterfields),(0,toConsumableArray/* default */.Z)(this.primaryFields),(0,toConsumableArray/* default */.Z)(skipFieldsForModuleMap[moduleName]||[])),fieldsArray=this.$getProperty(data,"fields",[]),fields=[];fieldsArray.forEach((function(field){var dataObj=!_this3.isV3Api&&field.field&&!0!==field.field.default?_this3.details.data:_this3.details;if(!skipFields.includes(_this3.$getProperty(field,"field.name"))){var promise=_this3.getFormattedValue(field,dataObj,_this3.sites).then((function(value){_this3.$set(field,"displayValue",value)}));promises.push(promise),fields.push(field)}"childMeterExpression"===field.name&&(_this3.showChildMeterExp=!(0,validation/* isEmpty */.xb)(dataObj.childMeterExpression))})),this.fieldsList=fields;var fieldCount=this.fieldsList.length-this.fieldsList.filter((function(field){return"TEXTAREA"===field.displayTypeEnum})).length;this.showChildMeterExp&&--fieldCount,fieldCount%2!==0&&(this.additionalField=!0),Promise.all(promises).then((function(){_this3.loading=!1,_this3.autoResize()}))},getFormMeta:function(){var _this$widget,_this$widget2,_this4=this,moduleName=this.moduleName,details=this.details;(0,validation/* isEmpty */.xb)(moduleName)||(0,validation/* isEmpty */.xb)(details)?this.emptyState=!0:(this.loading=!0,api/* API */.bl.get("/v3/summary/fields/".concat(this.moduleName),{formId:details.formId?details.formId:-1,id:details.id,widgetParams:null!==(_this$widget=this.widget)&&void 0!==_this$widget&&_this$widget.widgetParams?JSON.stringify(null===(_this$widget2=this.widget)||void 0===_this$widget2?void 0:_this$widget2.widgetParams):null}).then((function(_ref4){var error=_ref4.error,data=_ref4.data;error?(_this4.emptyState=!0,_this4.autoResize()):(_this4.emptyState=!1,_this4.deserialize(data)),_this4.loading=!1})))},getUrlDisplayName:function(field){var _ref5=field||{},displayValue=_ref5.displayValue,_ref6=displayValue||{},name=_ref6.name,href=_ref6.href;return name||href},getCurrencyFieldValue:function(field){var rate=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_ref7=field||{},displayValue=_ref7.displayValue,_this$multiCurrency=this.multiCurrency,baseSymbol=_this$multiCurrency.displaySymbol,baseCode=_this$multiCurrency.currencyCode,multiCurrencyEnabled=_this$multiCurrency.multiCurrencyEnabled,_ref8=displayValue||{},displaySymbol=_ref8.displaySymbol,currencyValue=_ref8.currencyValue,baseCurrencyValue=_ref8.baseCurrencyValue,exchangeRate=_ref8.exchangeRate,currencyCode=_ref8.currencyCode,baseValue="";return multiCurrencyEnabled&&baseCode!==currencyCode&&(baseValue="( ".concat(baseSymbol," ").concat(baseCurrencyValue," )")),rate?"".concat(baseSymbol," 1 = ").concat(displaySymbol," ").concat(exchangeRate):"".concat(displaySymbol," ").concat(currencyValue," ").concat(baseValue)},showCurrencyField:function(field){return!(0,validation/* isEmpty */.xb)(field.displayValue)&&"---"!=field.displayValue},showInfoIcon:function(field){var _this$multiCurrency2=this.multiCurrency,baseCode=_this$multiCurrency2.currencyCode,multiCurrencyEnabled=_this$multiCurrency2.multiCurrencyEnabled,_ref9=field||{},displayValue=_ref9.displayValue,_ref10=displayValue||{},currencyCode=_ref10.currencyCode;return multiCurrencyEnabled&&baseCode!==currencyCode},getTimeFieldValue:function(field){var _ref11=field||{},displayValue=_ref11.displayValue;return"---"===displayValue?displayValue:(0,TimeFormatMixin/* getFormatedTime */.$)(displayValue)}}},field_details_HorizontalFieldDetailsvue_type_script_lang_js=HorizontalFieldDetailsvue_type_script_lang_js,HorizontalFieldDetails_component=(0,componentNormalizer/* default */.Z)(field_details_HorizontalFieldDetailsvue_type_script_lang_js,render,staticRenderFns,!1,null,"29b60b9e",null)
/* harmony default export */,HorizontalFieldDetails=HorizontalFieldDetails_component.exports},
/***/73188:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/item-img.7bf6d6bd.jpg";
/***/},
/***/392708:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"img/tool-img.a48b92e6.jpg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/19795.js.map