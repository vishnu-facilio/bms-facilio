"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[46404],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/572689:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PlaceholderPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/placeholder/PlaceholderPopover.vue?vue&type=template&id=4b0a2072&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"p0"},[_c("el-scrollbar",{staticClass:"fc-placeholder-picker"},_vm._l(_vm.optionsList,(function(option,index){return _c("div",{key:option.name+"-"+index,class:["el-dropdown-menu__item fc-field-item",_vm.selectedIndex===index&&"selected-list-item"],on:{click:function($event){return _vm.emitOptions(option,_vm.options)},mouseover:function($event){return _vm.openPopover(option,_vm.options,index)}}},[_c("div",{staticClass:"font-normal"},[_vm._v(_vm._s(option.displayName))]),option.children?_c("div",[_c("i",{staticClass:"el-icon-arrow-right"})]):_vm._e()])})),0)],1)},staticRenderFns=[],validation=__webpack_require__(990260),PlaceholderPopovervue_type_script_lang_js={props:["options"],data:function(){return{selectedIndex:null}},computed:{optionsList:function(){var children=this.options.children;return children||this.options}},methods:{emitOptions:function(option,options){var children=option.children;(0,validation/* isEmpty */.xb)(children)&&this.$emit("itemClick",{option:option,options:options})},openPopover:function(option,options,index){var children=option.children;(0,validation/* isEmpty */.xb)(children)?this.selectedIndex=null:this.selectedIndex=index,this.$emit("openPopover",{option:option,options:options})}}},placeholder_PlaceholderPopovervue_type_script_lang_js=PlaceholderPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(placeholder_PlaceholderPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,"4b0a2072",null)
/* harmony default export */,PlaceholderPopover=component.exports},
/***/546404:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return EmailTemplateEditor}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/EmailTemplates/EmailTemplateEditor.vue?vue&type=template&id=7a3ae6e9
var MentionList_render,MentionList_staticRenderFns,render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-email-template-page"},[_vm.loading?_c("div",{staticClass:"form-customization-container fc-email-template-loading"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading}}):_vm._e()],1):[_c("div",{staticClass:"form-customization-container"},[_c("el-form",{ref:"emailForm",attrs:{model:_vm.emailStructure,rules:_vm.rules}},[_c("div",{staticClass:"fc-email-breadcrumb-header"},[_c("div",[_c("div",{staticClass:"flex-middle fc-setup-breadcrumb"},[_c("div",{staticClass:"fc-setup-breadcrumb-inner pointer",on:{click:_vm.setupHomeRoute}},[_vm._v(" "+_vm._s(_vm.$t("common.products.home"))+" ")]),_c("div",{staticClass:"fc-setup-breadcrumb-inner pL10 pR10"},[_c("i",{staticClass:"el-icon-arrow-right f14 fwBold"})]),_c("div",{staticClass:"fc-setup-breadcrumb-inner pointer",on:{click:_vm.setupTemplateRoute}},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.templates"))+" ")]),_c("div",{staticClass:"fc-setup-breadcrumb-inner pL10 pR10"},[_c("i",{staticClass:"el-icon-arrow-right f14 fwBold"})]),_c("div",{staticClass:"fc-breadcrumbBold-active"},[_vm._v(" "+_vm._s(_vm.moduleMeta.displayName)+" ")])]),_c("div",{staticClass:"pT10"},[_c("el-input",{staticClass:"fc-template-email-input fc-email-top-input-width",attrs:{placeholder:"Template name goes here...."},model:{value:_vm.emailStructure.name,callback:function($$v){_vm.$set(_vm.emailStructure,"name",$$v)},expression:"emailStructure.name"}})],1)]),_c("div",[_c("div",{staticClass:"flex-middle"},[_vm.isNew?_c("el-dropdown",{staticClass:"fc-dropdown-menu-template mR20",attrs:{size:"medium","split-button":"",type:"primary"},on:{command:function($event){return _vm.saveAsDrafts($event)}}},[_c("el-button",{staticClass:"fc-save-btn-template",on:{click:_vm.emailTemplateAddOrUpdate}},[_vm._v(" Save ")]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"draft"}},[_vm._v("Save as draft")])],1)],1):_c("el-button",{staticClass:"fc-dropdown-menu-template2 mR10",staticStyle:{width:"84px"},attrs:{size:"medium"},on:{click:_vm.emailTemplateAddOrUpdate}},[_vm._v(" Save ")]),_c("el-button",{staticClass:"fc-wo-border-btn height34 pL0 pR0 text-capitalize",staticStyle:{"line-height":"1px",width:"84px"},on:{click:_vm.goBack}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel"))+" ")])],1)])]),_c("div",{staticClass:"d-flex m15 mL0 mR0"},[_c("div",{staticClass:"fc-template-editor-area"},[_c("div",[_c("div",[_vm.showPlainTextEditor?_c("RichTextArea",{ref:"emailTemplateRichtext",staticClass:"fc-email-template-editor-content fc-richtext-message-template",attrs:{isRichTextMode:_vm.isRichTextMode,disabled:_vm.disabled,isEdit:!0,rows:19,maxRows:19,hideImgTool:!1,hideOrderedList:!1,hideUnorderedList:!1,canShowModeToggle:!1,hideToolBar:!0},on:{"update:isRichTextMode":function($event){_vm.isRichTextMode=$event},"update:is-rich-text-mode":function($event){_vm.isRichTextMode=$event}},scopedSlots:_vm._u([{key:"plainTextModeRichText",fn:function(){return[_c("div",{staticClass:"flex-middle"},[_vm.showPlainTextEditor?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"fc-html-editor-btn",attrs:{content:"HTML"},on:{click:_vm.showHtmlEditor}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/html",iconClass:"icon icon-lg vertical-middle"}})],1):_vm._e(),_c("div",{staticClass:"toolbar-separator mL10"}),_vm.showPlainTextEditor?_c("el-dropdown",{on:{command:function($event){return _vm.showPlainTextMode($event)}}},[_c("span",{staticClass:"el-dropdown-link"},[_c("i",{staticClass:"el-icon-more fc-plain-text-14 mL30 mR15"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_c("el-dropdown-item",{attrs:{command:"plainTextMode"}},[_vm._v("Switch to plain text")])],1)],1):_c("div",{staticClass:"showPlainTextComp",on:{click:_vm.changeMode}},[_vm._v(" Switch to richtext editor ")])],1)]},proxy:!0},{key:"emailSubjectMain",fn:function(){return[_vm.showPlainTextEditor?_c("RichTextArea",{ref:"emailTemplateRichtext",staticClass:"mT20 fc-email-subject-template-header",attrs:{placeholder:"Subject",isRichTextMode:_vm.isRichTextMode,disabled:_vm.disabled,isEdit:!0,rows:1,maxRows:1,hideImgTool:!1,hideOrderedList:!1,hideUnorderedList:!1,canShowModeToggle:!1,hideToolBar:!1},on:{"update:isRichTextMode":function($event){_vm.isRichTextMode=$event},"update:is-rich-text-mode":function($event){_vm.isRichTextMode=$event}},model:{value:_vm.emailStructure.subject,callback:function($$v){_vm.$set(_vm.emailStructure,"subject",$$v)},expression:"emailStructure.subject"}}):_c("el-input",{staticClass:"fc-template-email-input fc-template-subject-email mT10",attrs:{placeholder:"Subject"},model:{value:_vm.emailStructure.subject,callback:function($$v){_vm.$set(_vm.emailStructure,"subject",$$v)},expression:"emailStructure.subject"}})]},proxy:!0}],null,!1,244802042),model:{value:_vm.emailStructure.message,callback:function($$v){_vm.$set(_vm.emailStructure,"message",$$v)},expression:"emailStructure.message"}}):_c("div",[_c("div",{staticClass:"fc-changeto-richtext-mode"},[_c("div",{staticClass:"label-txt-black bold"},[_vm._v(" Plain text mode ")]),_c("div",{staticClass:"text-right fc-url-blue-txt pointer",on:{click:_vm.changeMode}},[_c("i",{staticClass:"el-icon-back pR10 f16 f18"}),_vm._v(" Change to rich text mode ")])]),_c("div",[_c("el-input",{staticClass:"fc-template-email-input fc-template-subject-email mT10",attrs:{placeholder:"Subject"},model:{value:_vm.emailStructure.subject,callback:function($$v){_vm.$set(_vm.emailStructure,"subject",$$v)},expression:"emailStructure.subject"}})],1),_c("el-input",{staticClass:"subject fc-input-full-border-select2 template-editor-area",attrs:{type:"textarea",placeholder:"Enter the text here",autosize:{minRows:14,maxRows:14},resize:"none"},model:{value:_vm.emailStructure.message,callback:function($$v){_vm.$set(_vm.emailStructure,"message",$$v)},expression:"emailStructure.message"}})],1)],1)])]),_c("div",{staticClass:"fc-upload-data-right-side"},[_c("div",{staticClass:"fc-upload-template-tools d-flex"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"pointer p4",class:{activeAttach:_vm.viewAttachmentBlock},attrs:{content:"Attachment"},on:{click:_vm.showAttahchmentBlock}},[_c("inline-svg",{attrs:{src:"svgs/template-attachment",iconClass:"icon text-center icon-md fill-black-g"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"pointer p4",class:{activeAttach:_vm.viewScriptBlock},attrs:{content:"Placeholder"},on:{click:_vm.showScriptBlock}},[_c("inline-svg",{attrs:{src:"svgs/code",iconClass:"icon text-center icon-md"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"pointer p4",class:{activeAttach:_vm.viewShortcutBlock},attrs:{content:"Shortcuts"},on:{click:_vm.ShowKeyboardShortcuts}},[_c("inline-svg",{attrs:{src:"svgs/keyboard-shortcuts",iconClass:"icon text-center icon-md"}})],1)]),_c("div",{staticClass:"fc-uploaded-right-bg"},[_vm.viewAttachmentBlock?_c("div",{staticClass:"fc-email-attachment-con relative"},[_vm.fileUploader?_c("div",{staticClass:"drop-zone",on:{drop:_vm.handleFileDrop}}):_vm._e(),_c("div",{staticClass:"fc-black3-16 pL20 pR20 pT20 pB10 fc-right-side-header"},[_vm._v(" Upload Properties ")]),_c("div",{staticClass:"fc-right-side-scroll"},[_c("div",{staticClass:"fc-attach-using-block"},[_c("div",{staticClass:"fc-black2-14 bold"},[_vm._v(" Attach files ")]),_c("div",[_c("DirectFileAttachment",{attrs:{module:"templatefileattachment",record:"",templateId:_vm.templateId,fileAttachments:_vm.fileAttachments},on:{removeFileId:_vm.removeFileId,addAttachment:_vm.addAttachment}})],1)]),_c("urlAttachment",{attrs:{urlAttachments:_vm.urlAttachments}}),_c("div",{staticClass:"fc-file-field"},[_c("div",{staticClass:"fc-black2-14 bold"},[_vm._v(" Attach file field ")]),_c("div",{staticClass:"fc-file-field-bg"},[_vm.viewAttachmentBlock?_c("FileFieldAttachment",{attrs:{fileIdsList:_vm.templateFileIds},on:{"update:fileIdsList":function($event){_vm.templateFileIds=$event},"update:file-ids-list":function($event){_vm.templateFileIds=$event}}}):_vm._e()],1)])],1)]):_vm._e(),_vm.viewScriptBlock?_c("div",{staticClass:"script-block"},[_c("div",{staticClass:"fc-black3-16 pL20 pR20 pT20 pB10 fc-right-side-header"},[_vm._v(" Placeholder Properties ")]),_c("div",{staticClass:"fc-template-placeholder-tab"},[_c("el-tabs",{staticClass:"fc-template-placeholder-tab",on:{"tab-click":_vm.handleClick},model:{value:_vm.activePlaceholderName,callback:function($$v){_vm.activePlaceholderName=$$v},expression:"activePlaceholderName"}},[_c("el-tab-pane",{attrs:{label:"Advanced",name:"advanced"}},[_c("div",[_c("div",{staticClass:"position-relative"},[_c("code-mirror",{staticClass:"code-editor-template",attrs:{codeeditor:!0,placeholder:"//Type your script here"},model:{value:_vm.emailStructure.userWorkflow.workflowV2String,callback:function($$v){_vm.$set(_vm.emailStructure.userWorkflow,"workflowV2String",$$v)},expression:"\n                              emailStructure.userWorkflow.workflowV2String\n                            "}}),_c("div",[_vm.hideBackdrop?_c("div",{staticClass:"fc-code-editor-backdrop"},[_c("div",{staticClass:"fc-code-edit"},[_c("div",{staticClass:"fc-code-edit-txt",on:{click:_vm.clickToHideBackDrop}},[_vm._v(" Edit ")])])]):_vm._e(),_vm.editBtnHideAndShow?_c("el-button",{staticClass:"btn-green-full fc-code-edit-btn",on:{click:_vm.showBackdropReturn}},[_vm._v(" Done ")]):_vm._e()],1)],1)])])],1)],1)]):_vm._e(),_vm.viewShortcutBlock?_c("div",{staticClass:"shortcut-block"},[_c("div",{staticClass:"fc-black3-16 pL20 pR20 pT20 pB10 fc-right-side-header"},[_vm._v(" Shortcuts ")]),_c("div",[_c("div",{staticClass:"pT10"},[_c("Shortcuts")],1)])]):_vm._e()])])]),_vm.notifyEnable?_c("div",{staticClass:"fc-email-template-bottom-notify"},[_c("i",{staticClass:"el-icon-info"}),_vm._v(" "),_c("span",{staticClass:"bold"},[_vm._v("HINT:")]),_vm._v(" To insert a merge field, type "),_c("b",[_vm._v("$")]),_vm._v(" and choose one from the list. "),_c("div",{staticClass:"fc-email-notify-close pointer",on:{click:_vm.closeNotify}},[_c("i",{staticClass:"el-icon-close bold"})])]):_vm._e()])],1),_vm.showTestMail?_c("PreviewEmail",{attrs:{messageText:_vm.emailStructure.name,emailMessage:_vm.emailStructure.message},on:{onClose:function($event){_vm.showTestMail=!1}}}):_vm._e(),_vm.showHtmlEditorDialog?_c("HtmlEditor",{attrs:{options:{mode:"text/html"}},on:{onClose:function($event){_vm.showHtmlEditorDialog=!1},onSave:_vm.onHtmlEditorClose},model:{value:_vm.emailStructure.message,callback:function($$v){_vm.$set(_vm.emailStructure,"message",$$v)},expression:"emailStructure.message"}}):_vm._e()],_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Confirmation",visible:_vm.confirmationDialogVisible,width:"35%","before-close":_vm.handleClose},on:{"update:visible":function($event){_vm.confirmationDialogVisible=$event}}},[_c("div",{staticClass:"fc-confirmation-dialog-body"},[_c("div",{staticClass:"heading-black16 break-word f14 fw4 line-height20"},[_vm._v(" Your changes are not saved. please save your changes if not saved your changes will be loose. ")])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.confirmationDialogVisible=!1}}},[_vm._v(" "+_vm._s(_vm.$t("setup.users_management.cancel"))+" ")]),_c("el-button",{staticClass:"modal-btn-save fc-error-btn-bg",attrs:{type:"primary"},on:{click:function($event){return _vm.confirmationDialogShow()}}},[_vm._v(" Confirm ")])],1)])],2)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),EmailTemplateRichTextAreavue_type_template_id_2b869935_render=(__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(634338),__webpack_require__(506203),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(212826),__webpack_require__(228436),__webpack_require__(162506),__webpack_require__(339772),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(538077),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isRichText?_c("div",{staticClass:"richtext-area"},[_c("Editor",{ref:"richTextEditor",style:{minHeight:_vm.minHeight,maxHeight:_vm.maxHeight},attrs:{readOnly:_vm.disabled,placeholder:_vm.placeholder,htmlValue:_vm.content,char:"$",hideToolBar:_vm.hideToolBar},scopedSlots:_vm._u([_vm.canShowModeToggle?{key:"editorMode",fn:function(){return[_c("div",{staticClass:"self-center marginL-auto mR15 cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.plain_text_mode"))+" ")])]},proxy:!0}:null,{key:"plainTextMode",fn:function(){return[_vm._t("plainTextModeRichText")]},proxy:!0},{key:"emailSubject",fn:function(){return[_c("div",[_vm._t("emailSubjectMain")],2)]},proxy:!0}],null,!0),model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1):_c("div",{staticClass:"richtext-area plain-text-mode"},[_c("div",{staticClass:"richtext-editor"},[_c("div",{staticClass:"richtext-toolbar"},[_c("div",{staticClass:"toolbar-button marginL-auto cursor-pointer mode-btn",on:{click:function($event){return _vm.changeMode()}}},[_vm._v(" "+_vm._s(_vm.$t("forms.builder.switch_to_richtext"))+" ")])]),_c("el-input",{key:"plain-text",staticClass:"richtext-content",attrs:{type:"textarea",resize:"none",placeholder:_vm.placeholder},model:{value:_vm.content,callback:function($$v){_vm.content=$$v},expression:"content"}})],1)])}),EmailTemplateRichTextAreavue_type_template_id_2b869935_staticRenderFns=[],EmailTemplateRichTextvue_type_template_id_6e438584_render=(__webpack_require__(879288),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"richtext-editor"},[_vm.hideToolBar?_c("div",{staticClass:"richtext-toolbar"},[_c("el-dropdown",{attrs:{trigger:"click"},on:{command:_vm.setFontSize}},[_c("div",{staticClass:"toolbar-dropdown-trigger"},[_vm._v(" "+_vm._s((_vm.textSize||{}).label)+" "),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.fontOptions,(function(option,optionKey){return _c("el-dropdown-item",{key:"option-"+optionKey,staticClass:"toolbar-dropdown-option",attrs:{command:option}},[_vm._v(" "+_vm._s(option.label)+" ")])})),1)],1),_c("el-popover",{attrs:{placement:"top-start",width:"180",trigger:"click","popper-class":"fc-text-align-popover"}},[_c("span",{staticClass:"fc-table-btn-popover flex-middle",attrs:{slot:"reference"},slot:"reference"},[_c("div",{staticClass:"rc-font-family text-left"},[_vm._v(" "+_vm._s(_vm.familyName)+" ")]),_c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),_c("div",{staticClass:"popup-container-new"},_vm._l(_vm.FontFamilyList,(function(label,key){return _c("button",{key:key,staticClass:"fc-editor-fontFamily",style:{fontFamily:label},attrs:{lable:label},on:{click:function(){return _vm.selectFamily(key)}}},[_c("div",{staticClass:"fc-editor-fontFamily",class:{"is-active":_vm.selectedFontFamily===key}},[_vm._v(" "+_vm._s(key)+" ")])])})),0)]),_c("div",{staticClass:"toolbar-separator mL5"}),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button toolbar-button-bold mT5",class:{"is-active":_vm.isActive("bold")},attrs:{content:"Bold"},on:{click:function(){return _vm.formatContent("bold")}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/bold1",iconClass:"icon icon-xs"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button toolbar-button-italic mT5",class:{"is-active":_vm.isActive("italic")},attrs:{content:"Italic"},on:{click:function(){return _vm.formatContent("italic")}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/italic1",iconClass:"icon icon-xs"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button mT5",class:{"is-active":_vm.isActive("underline")},attrs:{content:"Underline"},on:{click:function(){return _vm.formatContent("underline")}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/underline1",iconClass:"icon icon-sm"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button mT5",class:{"is-active":_vm.isActive("strike")},attrs:{content:"Strike through"},on:{click:function(){return _vm.formatContent("strike")}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/strikethrough1",iconClass:"icon icon-sm"}})],1),_c("div",{staticClass:"toolbar-separator"}),_vm.hideUnorderedList?_vm._e():_c("div",{staticClass:"toolbar-button",class:{"is-active":_vm.isActive("bullet-list")},on:{click:function(){return _vm.formatContent("bullet-list")}}},[_c("inline-svg",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-icon",attrs:{src:"richtext-editor/ordered-list1",content:"Unordered list",iconClass:"icon icon-sm-md"}})],1),_vm.hideOrderedList?_vm._e():_c("div",{staticClass:"toolbar-button",class:{"is-active":_vm.isActive("ordered-list")},on:{click:function(){return _vm.formatContent("ordered-list")}}},[_c("inline-svg",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],attrs:{src:"richtext-editor/unordered-list1",clsdass:"toolbar-icon",content:"order list",iconClass:"icon icon-sm-md vertical-middle"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button toolbar-button-link mT5",class:{"is-active":_vm.isActive("link")},attrs:{content:"Link"},on:{click:_vm.showLinkPrompt}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/link1",iconClass:"icon icon-sm-md"}})],1),_c("div",{staticClass:"toolbar-separator"}),_c("ColorPicker",{on:{currentColor:_vm.setHighlight},scopedSlots:_vm._u([{key:"reference",fn:function(){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button toolbar-button-link",class:{"is-active":_vm.isActive("backgroundColor")},attrs:{content:"Highlight"}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/highlight1",iconClass:"icon icon-sm-md"}})],1)]},proxy:!0}],null,!1,3208448900)}),_c("ColorPicker",{on:{currentColor:_vm.setColor},scopedSlots:_vm._u([{key:"reference",fn:function(){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button toolbar-button-link",class:{"is-active":_vm.isActive("color")},attrs:{content:"Text color"}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/text-color1",iconClass:"icon icon-sm-md"}})],1)]},proxy:!0}],null,!1,2909245223)}),_c("div",{staticClass:"toolbar-separator"}),_c("el-popover",{attrs:{placement:"top-start",width:"50",trigger:"click","popper-class":"fc-text-align-popover"}},[_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"fc-table-btn-popover mT4",attrs:{slot:"reference",content:"Text align"},slot:"reference"},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/left-align1",iconClass:"icon icon-xxll"}})],1),_c("button",{directives:[{name:"tippy",rawName:"v-tippy"}],class:{"is-active":_vm.isActive({textAlign:"left"})},attrs:{title:"Left"},on:{click:function($event){_vm.editor.chain().focus().setTextAlign("left").run()}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/left-align",iconClass:"icon icon-xs"}})],1),_c("button",{directives:[{name:"tippy",rawName:"v-tippy"}],class:{"is-active":_vm.isActive({textAlign:"center"})},attrs:{title:"Center"},on:{click:function($event){_vm.editor.chain().focus().setTextAlign("center").run()}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/center-align",iconClass:"icon icon-xs"}})],1),_c("button",{directives:[{name:"tippy",rawName:"v-tippy"}],class:{"is-active":_vm.isActive({textAlign:"right"})},attrs:{title:"Right"},on:{click:function($event){_vm.editor.chain().focus().setTextAlign("right").run()}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/right-align",iconClass:"icon icon-xs"}})],1),_c("button",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:"Unset"},on:{click:function($event){_vm.editor.chain().focus().unsetTextAlign().run()}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/unset-align",iconClass:"icon icon-xs"}})],1)],1),_c("el-popover",{attrs:{placement:"top-start",width:"300",trigger:"click"}},[_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}}},[_vm._v(" Insert table ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().addColumnBefore().run()}}},[_vm._v(" Add column before ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().addColumnAfter().run()}}},[_vm._v(" Add column after ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().deleteColumn().run()}}},[_vm._v(" Delete column ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().addRowBefore().run()}}},[_vm._v(" Add row before ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().addRowAfter().run()}}},[_vm._v(" Add row after ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().deleteRow().run()}}},[_vm._v(" Delete row ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().deleteTable().run()}}},[_vm._v(" Delete table ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().mergeCells().run()}}},[_vm._v(" Merge cells ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().splitCell().run()}}},[_vm._v(" Split cell ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().toggleHeaderColumn().run()}}},[_vm._v(" Toggle header column ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().toggleHeaderRow().run()}}},[_vm._v(" Toggle header row ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().toggleHeaderCell().run()}}},[_vm._v(" Toggle header cell ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().mergeOrSplit().run()}}},[_vm._v(" Merge or split ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().setCellAttribute("colspan",2).run()}}},[_vm._v(" Set cell attribute ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().fixTables().run()}}},[_vm._v(" Fix tables ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().goToNextCell().run()}}},[_vm._v(" Goto next cell ")]),_c("button",{staticClass:"fc-rich-text-btn",on:{click:function($event){_vm.editor.chain().focus().goToPreviousCell().run()}}},[_vm._v(" GoTo previous cell ")]),_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"fc-table-btn-popover mT5",attrs:{slot:"reference",content:"Table"},slot:"reference"},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/table1",iconClass:"icon icon-sm"}})],1)],1),_c("div",{staticClass:"toolbar-separator"}),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button toolbar-button-link",class:{"is-active":_vm.isActive("image")},attrs:{content:"Image"},on:{click:_vm.addImage}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/image",iconClass:"icon icon-sm"}})],1),_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round"},expression:"{ arrow: true, arrowType: 'round' }"}],staticClass:"toolbar-button toolbar-button-link mL0",class:{"is-active":_vm.isActive("blockquote")},attrs:{content:"Blockquote"},on:{click:function($event){_vm.editor.chain().focus().toggleBlockquote().run()}}},[_c("inline-svg",{staticClass:"toolbar-icon",attrs:{src:"richtext-editor/blockquote1",iconClass:"icon icon-xs"}})],1),_c("div",{staticClass:"flex-middle"},[_vm._t("plainTextMode")],2)],1):_vm._e(),_c("div",[_vm._t("emailSubject")],2),_c("EditorContent",{staticClass:"richtext-content richtext-email-editor-container",attrs:{editor:_vm.editor}})],1)}),EmailTemplateRichTextvue_type_template_id_6e438584_staticRenderFns=[],sanitize=(__webpack_require__(186466),__webpack_require__(678042)),filters=__webpack_require__(638203),validation=__webpack_require__(990260),dist=__webpack_require__(96922),ColorPickervue_type_template_id_1b80113a_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.close,expression:"close"}],attrs:{placement:"bottom",width:"240",trigger:"manual","popper-class":"scheduler-color-picker"},scopedSlots:_vm._u([{key:"reference",fn:function(){return[_c("div",{on:{click:function($event){_vm.visibility=!0}}},[_vm._t("reference")],2)]},proxy:!0}],null,!0),model:{value:_vm.visibility,callback:function($$v){_vm.visibility=$$v},expression:"visibility"}},[_c("div",{staticClass:"popup-container"},[_vm._l(_vm.colorPalette,(function(color,index){return[color!==_vm.selectedColor?_c("div",{key:index,staticClass:"color-shade",style:{"background-color":""+color},on:{click:function($event){return _vm.saveColor(color)}}}):_c("div",{key:"dropdown-"+index,on:{click:function($event){return _vm.saveColor(color)}}},[_c("InlineSvg",{staticClass:"color-shade",style:{"background-color":""+color},attrs:{src:"tick-sign",iconClass:"icon icon-xxs margin-auto",iconStyle:"fill: #fff"}})],1)]}))],2)])},ColorPickervue_type_template_id_1b80113a_staticRenderFns=[],toConsumableArray=__webpack_require__(488478),COLOR_HASH=["#000","#E60001","#FF9900","#FFFF00","#008A00","#0065CC","#9833FF","#FFFFFF","#FACCCC","#FFEBCB","#FFFFCC","#CBE8CC","#CCDFF5","#EAD6FF","#BBBBBB","#EF6565","#FFC166","#FFFF65","#65B966","#66A2E0","#C284FF","#888888","#A00000","#B26A01","#B2B200","#016000","#0047B1","#6B24B1"],ColorPickervue_type_script_lang_js={props:["selectedColor","additionalColors","customColorPalette"],data:function(){return{visibility:!1,currentColor:null}},created:function(){this.currentColor=this.selectedColor},computed:{colorPalette:function(){var _ref=this||{},_ref$additionalColors=_ref.additionalColors,additionalColors=void 0===_ref$additionalColors?[]:_ref$additionalColors,customColorPalette=_ref.customColorPalette;return customColorPalette||[].concat((0,toConsumableArray/* default */.Z)(additionalColors),COLOR_HASH)}},methods:{saveColor:function(color){this.currentColor=color,this.$emit("currentColor",{color:color}),this.close()},close:function(){this.visibility=!1}}},editors_ColorPickervue_type_script_lang_js=ColorPickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(editors_ColorPickervue_type_script_lang_js,ColorPickervue_type_template_id_1b80113a_render,ColorPickervue_type_template_id_1b80113a_staticRenderFns,!1,null,null,null)
/* harmony default export */,ColorPicker=component.exports,api=__webpack_require__(32284),extension_document_dist=__webpack_require__(920336),extension_paragraph_dist=__webpack_require__(526022),extension_text_dist=__webpack_require__(652701),extension_bold_dist=__webpack_require__(67937),extension_italic_dist=__webpack_require__(573816),extension_underline_dist=__webpack_require__(348510),extension_strike_dist=__webpack_require__(704281),extension_list_item_dist=__webpack_require__(134565),extension_bullet_list_dist=__webpack_require__(530561),extension_ordered_list_dist=__webpack_require__(851575),extension_link_dist=__webpack_require__(949924),link_plugin=extension_link_dist/* default */.Z.extend({inclusive:function(){return this.options.autolink=!1},addAttributes:function(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},style:{default:null}}}}),extension_image_dist=__webpack_require__(126761),image_plugin=extension_image_dist/* default */.ZP.extend({addOptions:function(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},addAttributes:function(){return{src:{default:null},alt:{default:null},title:{default:null},style:{default:null}}}}),extension_table_header_dist=__webpack_require__(843626),tableHeader_plugin=extension_table_header_dist/* default */.Z.extend({addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(element){var colwidth=element.getAttribute("colwidth"),value=colwidth?[parseInt(colwidth,10)]:null;return value},renderHTML:function(){return{style:"border: 1px solid #d0d9e2;color: #2f4058;font-weight: 400;background-color: #fafbff;"}}}}},parseHTML:function(){return[{tag:"th"}]}}),extension_table_cell_dist=__webpack_require__(100658),tableCell_plugin=extension_table_cell_dist/* default */.Z.extend({addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(element){var colwidth=element.getAttribute("colwidth"),value=colwidth?[parseInt(colwidth,10)]:null;return value},renderHTML:function(){return{style:"border: 1px solid #d0d9e2;color: #2f4058;font-weight: 400;"}}}}},parseHTML:function(){return[{tag:"td"}]}}),extension_heading_dist=__webpack_require__(207490),extension_text_style_dist=__webpack_require__(723621),extension_placeholder_dist=__webpack_require__(893237),core_dist=__webpack_require__(905865),FontSize=core_dist/* Extension */.hj.create({name:"fontSize",addOptions:function(){return{types:["textStyle"]}},addGlobalAttributes:function(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:function(element){return element.style.fontSize.replace(/['"]+/g,"")},renderHTML:function(attributes){return attributes.fontSize?{style:"font-size: ".concat(attributes.fontSize)}:{}}}}}]},addCommands:function(){return{setFontSize:function(fontSize){return function(_ref){var chain=_ref.chain;return chain().setMark("textStyle",{fontSize:fontSize+"px"}).run()}},unsetFontSize:function(){return function(_ref2){var chain=_ref2.chain;return chain().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}}}),fontsize_plugin=FontSize,Color=core_dist/* Mark */.vc.create({name:"color",addOptions:function(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes:function(){return this.options.multicolor?{color:{default:null,parseHTML:function(element){return element.getAttribute("data-text-color")||element.style.color},renderHTML:function(attributes){return attributes.color?{"data-text-color":attributes.color,style:"color: ".concat(attributes.color)}:{}}}}:{}},parseHTML:function(){return[{tag:"span"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["span",(0,core_dist/* mergeAttributes */.P1)(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){var _this=this;return{toggleColor:function(attributes){return function(_ref2){var commands=_ref2.commands;return commands.toggleMark(_this.name,attributes)}}}}}),color_plugin=Color,BackgroundColor=core_dist/* Mark */.vc.create({name:"backgroundColor",addOptions:function(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes:function(){return this.options.multicolor?{color:{default:null,parseHTML:function(element){return element.getAttribute("data-text-color")||element.style.backgroundColor},renderHTML:function(attributes){return attributes.color?{"data-text-color":attributes.color,style:"background-color: ".concat(attributes.color)}:{}}}}:{}},parseHTML:function(){return[{tag:"span"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["span",(0,core_dist/* mergeAttributes */.P1)(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){var _this=this;return{toggleBackgroundColor:function(attributes){return function(_ref2){var commands=_ref2.commands;return commands.toggleMark(_this.name,attributes)}}}}}),bgcolor_plugin=BackgroundColor,paragraph_plugin=extension_paragraph_dist/* default */.Z.extend({renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["p",(0,core_dist/* mergeAttributes */.P1)(this.options.HTMLAttributes,HTMLAttributes),0]}}),extension_mention_dist=__webpack_require__(684047),tippy_esm=__webpack_require__(145088),Spinner=__webpack_require__(604947),router=__webpack_require__(70630),PlaceholderPopover=__webpack_require__(572689),MentionListvue_type_script_lang_js={props:{command:{type:Function,required:!0},query:{type:String,required:!1,default:function(){return""}}},render:function(){var h=arguments[0];return h("div",{class:"suggestion-datas"},[this.loading?h("div",{class:"mention-list-spinner"},[h(Spinner/* default */.Z,{attrs:{show:!0,size:80}})]):h("div",{class:"flex flex-row"},[h(PlaceholderPopover/* default */.Z,{on:(0,objectSpread2/* default */.Z)({},{itemClick:this.emitOptions,openPopover:this.openPopover}),attrs:{options:this.filtredOption}}),this.childrenPopovers])])},data:function(){return{showPopover:!0,value:[],selectedIndex:0,moduleFields:[],loading:!0,items:[],searchQuery:null,showSubMenuItem:!1,placeholder:null,options:[],selectedData:null,childrenPopovers:[]}},watch:{items:function(){this.selectedIndex=0}},components:{Spinner:Spinner/* default */.Z,PlaceholderPopover:PlaceholderPopover/* default */.Z},computed:{filtredOption:function(){var _this=this;return""===this.query?this.options:this.options.filter((function(option){if(option.name.toLowerCase().indexOf(_this.query.toLowerCase())>=0)return option}))},getIndex:function(){var _this2=this;return""===this.query?0:this.options.findIndex((function(option){if(option.name.toLowerCase().indexOf(_this2.query.toLowerCase())>=0)return option}))},mentionList:function(){return this.items},resultQuery:function(){var _this3=this;return this.searchQuery?this.mentionList.filter((function(item){return _this3.searchQuery.toLowerCase().split(" ").every((function(v){return item.displayName.toLowerCase().includes(v)}))})):this.mentionList},moduleName:function(){return this.$getProperty(router/* default */.Z.currentRoute,"params.moduleName")}},created:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this4.getModuleFields();case 2:return _context.next=4,_this4.loadPlaceholders();case 4:case"end":return _context.stop()}}),_callee)})))()},methods:{emitOptions:function(items){var option=items.option;option&&this.selectItem(option)},handleChildClick:function(items){var option=items.option,options=items.options;if(option.name&&options.name){var name={name:"".concat(options.name,".").concat(option.name)};this.selectItem(name)}},openPopover:function(_ref){var childOption=_ref.option,parentOption=_ref.options;if((0,validation/* isEmpty */.xb)(childOption.children))this.childrenPopovers.pop();else{var visited=this.$getProperty(parentOption,"visited");visited?this.childrenPopovers.pop():parentOption.visited=!0,this.childrenPopovers.push(this.addChildPopover(childOption))}},addChildPopover:function(options){var h=this.$createElement;return h(PlaceholderPopover/* default */.Z,{class:"popover-border-left",on:(0,objectSpread2/* default */.Z)({},{itemClick:this.handleChildClick}),attrs:{options:options}})},onKeyDown:function(_ref2){var event=_ref2.event;return"ArrowUp"===event.key?(this.upHandler(),!0):"ArrowDown"===event.key?(this.downHandler(),!0):"Enter"===event.key&&(this.enterHandler(),!0)},upHandler:function(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler:function(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler:function(){var item=this.resultQuery[this.selectedIndex];this.selectItem(item)},selectItem:function(item){item&&this.command({id:"{"+this.$getProperty(router/* default */.Z.currentRoute,"params.moduleName")+"."+item.name+"}"})},getModuleFields:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this5.loading=!0,_context2.next=3,api/* API */.bl.get("v2/modules/fields/fields?moduleName=".concat(_this5.moduleName));case 3:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this5.$message.error(error.message||"Error Occurred"):_this5.items=data.fields,_this5.loading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},showMenuList:function(){this.showSubMenuItem=!0},loadPlaceholders:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var url,_yield$API$get2,data,_data$placeholders,fields,moduleFields,filter;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!_this6.options.length){_context3.next=2;break}return _context3.abrupt("return");case 2:if((0,validation/* isEmpty */.xb)(_this6.$getProperty(router/* default */.Z.currentRoute,"params.moduleName"))){_context3.next=15;break}return _this6.loading=!0,url="v3/placeholders/".concat(_this6.$getProperty(router/* default */.Z.currentRoute,"params.moduleName")),_context3.next=7,api/* API */.bl.get(url);case 7:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,_data$placeholders=data.placeholders,fields=_data$placeholders.fields,moduleFields=_data$placeholders.moduleFields,_this6.options=fields,_this6.options.forEach((function(field,index){var module=field.module;if(!(0,validation/* isEmpty */.xb)(module)){var children=moduleFields[module];_this6.options[index]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{children:children})}})),filter=_this6.filter,(0,validation/* isFunction */.mf)(filter)&&(_this6.options=_this6.options.filter(filter)),_this6.loading=!1;case 15:case"end":return _context3.stop()}}),_callee3)})))()},handleChange:function(value){this.loadPlaceholders()}}},editors_MentionListvue_type_script_lang_js=MentionListvue_type_script_lang_js,MentionList_component=(0,componentNormalizer/* default */.Z)(editors_MentionListvue_type_script_lang_js,MentionList_render,MentionList_staticRenderFns,!1,null,null,null)
/* harmony default export */,MentionList=MentionList_component.exports,_this=void 0,suggestions_plugin={char:"$",data:function(){return{moduleFields:[],loading:!0,getModuleData:[]}},render:function(){var component,popup;return{onStart:function(props){component=new dist/* VueRenderer */.aA(MentionList,{parent:_this,propsData:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{mentionsdata:[{name:"test placeHolders"}]})}),popup=(0,tippy_esm/* default */.ZP)("body",{getReferenceClientRect:props.clientRect,appendTo:function(){return document.body},content:component.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate:function(props){component.updateProps(props),popup[0].setProps({getReferenceClientRect:props.clientRect})},onKeyDown:function(props){var _component$ref;return"Escape"===props.event.key?(popup[0].hide(),!0):null===(_component$ref=component.ref)||void 0===_component$ref?void 0:_component$ref.onKeyDown(props)},onExit:function(){popup[0].destroy(),component.destroy()}}}},extension_table_dist=__webpack_require__(907829),extension_table_row_dist=__webpack_require__(433991),extension_text_align_dist=__webpack_require__(496279),extension_blockquote_dist=__webpack_require__(99734),starter_kit_dist=__webpack_require__(615176),extension_font_family_dist=__webpack_require__(407070);// CONCATENATED MODULE: ./node_modules/@tiptap/extension-typography/dist/index.js
const emDash=override=>(0,core_dist/* textInputRule */.DS)({find:/--$/,replace:null!==override&&void 0!==override?override:"—"}),ellipsis=override=>(0,core_dist/* textInputRule */.DS)({find:/\.\.\.$/,replace:null!==override&&void 0!==override?override:"…"}),openDoubleQuote=override=>(0,core_dist/* textInputRule */.DS)({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:null!==override&&void 0!==override?override:"“"}),closeDoubleQuote=override=>(0,core_dist/* textInputRule */.DS)({find:/"$/,replace:null!==override&&void 0!==override?override:"”"}),openSingleQuote=override=>(0,core_dist/* textInputRule */.DS)({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:null!==override&&void 0!==override?override:"‘"}),closeSingleQuote=override=>(0,core_dist/* textInputRule */.DS)({find:/'$/,replace:null!==override&&void 0!==override?override:"’"}),leftArrow=override=>(0,core_dist/* textInputRule */.DS)({find:/<-$/,replace:null!==override&&void 0!==override?override:"←"}),rightArrow=override=>(0,core_dist/* textInputRule */.DS)({find:/->$/,replace:null!==override&&void 0!==override?override:"→"}),copyright=override=>(0,core_dist/* textInputRule */.DS)({find:/\(c\)$/,replace:null!==override&&void 0!==override?override:"©"}),trademark=override=>(0,core_dist/* textInputRule */.DS)({find:/\(tm\)$/,replace:null!==override&&void 0!==override?override:"™"}),servicemark=override=>(0,core_dist/* textInputRule */.DS)({find:/\(sm\)$/,replace:null!==override&&void 0!==override?override:"℠"}),registeredTrademark=override=>(0,core_dist/* textInputRule */.DS)({find:/\(r\)$/,replace:null!==override&&void 0!==override?override:"®"}),oneHalf=override=>(0,core_dist/* textInputRule */.DS)({find:/(?:^|\s)(1\/2)$/,replace:null!==override&&void 0!==override?override:"½"}),plusMinus=override=>(0,core_dist/* textInputRule */.DS)({find:/\+\/-$/,replace:null!==override&&void 0!==override?override:"±"}),notEqual=override=>(0,core_dist/* textInputRule */.DS)({find:/!=$/,replace:null!==override&&void 0!==override?override:"≠"}),laquo=override=>(0,core_dist/* textInputRule */.DS)({find:/<<$/,replace:null!==override&&void 0!==override?override:"«"}),raquo=override=>(0,core_dist/* textInputRule */.DS)({find:/>>$/,replace:null!==override&&void 0!==override?override:"»"}),multiplication=override=>(0,core_dist/* textInputRule */.DS)({find:/\d+\s?([*x])\s?\d+$/,replace:null!==override&&void 0!==override?override:"×"}),superscriptTwo=override=>(0,core_dist/* textInputRule */.DS)({find:/\^2$/,replace:null!==override&&void 0!==override?override:"²"}),superscriptThree=override=>(0,core_dist/* textInputRule */.DS)({find:/\^3$/,replace:null!==override&&void 0!==override?override:"³"}),oneQuarter=override=>(0,core_dist/* textInputRule */.DS)({find:/(?:^|\s)(1\/4)$/,replace:null!==override&&void 0!==override?override:"¼"}),threeQuarters=override=>(0,core_dist/* textInputRule */.DS)({find:/(?:^|\s)(3\/4)$/,replace:null!==override&&void 0!==override?override:"¾"}),Typography=core_dist/* Extension */.hj.create({name:"typography",addInputRules(){const rules=[];return!1!==this.options.emDash&&rules.push(emDash(this.options.emDash)),!1!==this.options.ellipsis&&rules.push(ellipsis(this.options.ellipsis)),!1!==this.options.openDoubleQuote&&rules.push(openDoubleQuote(this.options.openDoubleQuote)),!1!==this.options.closeDoubleQuote&&rules.push(closeDoubleQuote(this.options.closeDoubleQuote)),!1!==this.options.openSingleQuote&&rules.push(openSingleQuote(this.options.openSingleQuote)),!1!==this.options.closeSingleQuote&&rules.push(closeSingleQuote(this.options.closeSingleQuote)),!1!==this.options.leftArrow&&rules.push(leftArrow(this.options.leftArrow)),!1!==this.options.rightArrow&&rules.push(rightArrow(this.options.rightArrow)),!1!==this.options.copyright&&rules.push(copyright(this.options.copyright)),!1!==this.options.trademark&&rules.push(trademark(this.options.trademark)),!1!==this.options.servicemark&&rules.push(servicemark(this.options.servicemark)),!1!==this.options.registeredTrademark&&rules.push(registeredTrademark(this.options.registeredTrademark)),!1!==this.options.oneHalf&&rules.push(oneHalf(this.options.oneHalf)),!1!==this.options.plusMinus&&rules.push(plusMinus(this.options.plusMinus)),!1!==this.options.notEqual&&rules.push(notEqual(this.options.notEqual)),!1!==this.options.laquo&&rules.push(laquo(this.options.laquo)),!1!==this.options.raquo&&rules.push(raquo(this.options.raquo)),!1!==this.options.multiplication&&rules.push(multiplication(this.options.multiplication)),!1!==this.options.superscriptTwo&&rules.push(superscriptTwo(this.options.superscriptTwo)),!1!==this.options.superscriptThree&&rules.push(superscriptThree(this.options.superscriptThree)),!1!==this.options.oneQuarter&&rules.push(oneQuarter(this.options.oneQuarter)),!1!==this.options.threeQuarters&&rules.push(threeQuarters(this.options.threeQuarters)),rules}});
//# sourceMappingURL=index.js.map
// EXTERNAL MODULE: ./node_modules/@tiptap/extension-gapcursor/dist/index.js
var extension_gapcursor_dist=__webpack_require__(638170),extension_dropcursor_dist=__webpack_require__(482973),extension_code_block_dist=__webpack_require__(983416),FORMAT_CHAIN_HASH={italic:"toggleItalic",bold:"toggleBold",underline:"toggleUnderline",strike:"toggleStrike","bullet-list":"toggleBulletList","ordered-list":"toggleOrderedList",heading:"toggleHeading",link:"setLink",unlink:"unsetLink"},FORMAT_COMMAND_HASH={color:"toggleColor",small:"setFontSize",unsetSmall:"unsetFontSize",highlight:"toggleBackgroundColor"},FONT_FAMILY={Inter:"Inter","Comic Sans":"Comic Sans MS, Comic Sans",Serif:"serif",Monospace:"monospace",Cursive:"cursive",Garamond:"Garamond",Georgia:"georgia","Sans-Serif":"sans-serif",Tahoma:"tahoma","trebuchet ms":"trebuchet ms",Verdana:"verdana",unsetFontFamily:""},SMALL_FONT_SIZE=12,EmailTemplateRichTextvue_type_script_lang_js={props:{value:{type:String},readOnly:{type:Boolean,default:!1},placeholder:{type:String,default:"Enter text here"},hideImgTool:{type:Boolean,default:!1},hideOrderedList:{type:Boolean,default:!1},hideUnorderedList:{type:Boolean,default:!1},hideToolBar:{type:Boolean,default:!0}},components:{EditorContent:dist/* EditorContent */.kg,ColorPicker:ColorPicker},provide:{mentions:"hello"},data:function(){return{editor:null,html:null,selectedBgColor:"",selectedTextColor:"",mentionsList:[],render:!1,familyName:"Sans-Serif",FontFamilyList:FONT_FAMILY,selectedFontFamily:"Sans-Serif"}},mounted:function(){this.getMentionsList(),this.init()},beforeDestroy:function(){this.destoryEditor()},watch:{readOnly:function(newVal,oldVal){newVal!==oldVal&&this.editor.setOptions({editable:!newVal})}},computed:{textSize:function(){var _ref=this||{},fontOptions=_ref.fontOptions,editor=_ref.editor,_ref2=fontOptions||{},currentTextSize=_ref2.normal;return Object.values(fontOptions).forEach((function(option){var _ref3=option||{},isActive=_ref3.isActive;!(0,validation/* isEmpty */.xb)(editor)&&isActive(editor)&&(currentTextSize=option)})),currentTextSize},fontOptions:function(){var _this=this;return{h1:{label:"Heading 1",level:1,isActive:function(editor){return editor.isActive("heading",{level:1})},isHeading:!0},h2:{label:"Heading 2",level:2,isActive:function(editor){return editor.isActive("heading",{level:2})},isHeading:!0},h3:{label:"Heading 3",level:3,isActive:function(editor){return editor.isActive("heading",{level:3})},isHeading:!0},normal:{label:"Normal",isActive:function(editor){return editor.isActive("paragraph")},isHeading:!1},small:{label:"Small",isActive:function(editor){var currentElementAttr=_this.editor.getAttributes("textStyle"),_ref4=currentElementAttr||{},fontSize=_ref4.fontSize,currentFontSize="".concat(SMALL_FONT_SIZE,"px");return editor.isActive("paragraph")&&fontSize===currentFontSize},isHeading:!1}}}},methods:{getMentionsList:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this2$$router,moduleName,url,_yield$API$get,data,_data$placeholders,fields,moduleFields,returnData;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return moduleName=(null===(_this2$$router=_this2.$router)||void 0===_this2$$router||null===(_this2$$router=_this2$$router.currentRoute)||void 0===_this2$$router||null===(_this2$$router=_this2$$router.params)||void 0===_this2$$router?void 0:_this2$$router.moduleName)||null,url="v3/placeholders/".concat(moduleName),_context.next=4,api/* API */.bl.get(url);case 4:_yield$API$get=_context.sent,data=_yield$API$get.data,_data$placeholders=data.placeholders,fields=_data$placeholders.fields,moduleFields=_data$placeholders.moduleFields,returnData=[],fields.forEach((function(field,index){var module=field.module;if(!(0,validation/* isEmpty */.xb)(module)){var children=moduleFields[module];returnData[index]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{children:children})}})),_this2.mentionsList=returnData;case 10:case"end":return _context.stop()}}),_callee)})))()},init:function(){var _this3=this,readOnly=this.readOnly,value=this.value,onUpdate=this.onUpdate,extensionsList=this.extensionsList;this.editor=new dist/* Editor */.ML({content:value||"",editable:!readOnly,extensions:extensionsList(),onUpdate:onUpdate}),this.$nextTick((function(){_this3.render=!0}))},selectFamily:function(key){this.familyName=key,this.selectedFontFamily=key;var name=FONT_FAMILY[key];""==name?this.editor.chain().focus().unsetFontFamily().run():this.editor.chain().focus().setFontFamily("".concat(name)).run()},setContent:function(content){this.editor.commands.setContent(content)},destoryEditor:function(){this.editor.destroy()},extensionsList:function(){var _ref5=this||{},placeholder=_ref5.placeholder;return[extension_document_dist/* default */.Z,extension_paragraph_dist/* default */.Z,extension_text_dist/* default */.Z,extension_bold_dist/* default */.ZP,extension_italic_dist/* default */.ZP,extension_underline_dist/* default */.Z,extension_strike_dist/* default */.ZP,extension_list_item_dist/* default */.Z,extension_bullet_list_dist/* default */.ZP,extension_ordered_list_dist/* default */.ZP,link_plugin.configure({HTMLAttributes:{class:"my-custom-class"}}),extension_heading_dist/* default */.Z.configure({levels:[1,2,3]}),extension_text_style_dist/* default */.Z,fontsize_plugin.configure({types:["textStyle"]}),color_plugin.configure({multicolor:!0}),bgcolor_plugin.configure({multicolor:!0}),extension_mention_dist/* default */.ZP.configure({HTMLAttributes:{class:"mention"},suggestion:suggestions_plugin}),extension_placeholder_dist/* default */.Z.configure({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:placeholder,showOnlyWhenEditable:!0,showOnlyCurrent:!0}),extension_table_dist/* default */.ZP.configure({resizable:!0}),extension_table_row_dist/* default */.Z,extension_table_header_dist/* default */.Z,extension_table_cell_dist/* default */.Z,extension_text_align_dist/* default */.Z.configure({types:["heading","paragraph"]}),extension_blockquote_dist/* default */.ZP,starter_kit_dist/* default */.Z,extension_font_family_dist/* default */.Z,Typography,extension_gapcursor_dist/* default */.Z,image_plugin,extension_dropcursor_dist/* default */.Z,extension_code_block_dist/* default */.ZP,tableHeader_plugin,paragraph_plugin,tableCell_plugin]},isActive:function(type){var _ref6=this||{},editor=_ref6.editor;return!(0,validation/* isEmpty */.xb)(editor)&&!(0,validation/* isEmpty */.xb)(editor.isActive)&&(editor||{}).isActive(type)},formatContent:function(type){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,formatChainName=FORMAT_CHAIN_HASH[type]||{},formatCommandName=FORMAT_COMMAND_HASH[type]||{};(0,validation/* isEmpty */.xb)(formatChainName)?(0,validation/* isEmpty */.xb)(formatCommandName)||(this.editor.commands[formatCommandName](params),this.editor.chain().focus().run()):
// had to be chained
this.editor.chain().focus()[formatChainName](params).run()},onUpdate:function(_ref7){var editor=_ref7.editor,html=editor.getHTML(),isNotEmpty=!(0,validation/* isEmpty */.xb)((0,filters/* htmlToText */.s9)(html)),hasChanged=(0,sanitize/* sanitize */.N)(html)!==(0,sanitize/* sanitize */.N)(this.html);(isNotEmpty||hasChanged)&&(this.html=html,this.$emit("input",isNotEmpty?(0,sanitize/* sanitize */.N)(html):null))},
// format methods
setFontSize:function(option){var _ref8=option||{},level=_ref8.level,isHeading=_ref8.isHeading,label=_ref8.label,textSize=this.textSize;if(isHeading)
// unset small font size
this.formatContent("unsetSmall"),this.formatContent("heading",{level:level});else{var _ref9=textSize||{},_level=_ref9.level;"Small"===label?(
// toggle heading back
this.formatContent("heading",{level:_level}),this.editor.commands.setFontSize(SMALL_FONT_SIZE)):"Normal"===label&&(
// unset small font size
this.formatContent("unsetSmall"),
// toggle heading back
this.formatContent("heading",{level:_level}))}},setColor:function(_ref10){var color=_ref10.color,_ref11=this||{},selectedTextColor=_ref11.selectedTextColor;this.selectedTextColor=color===selectedTextColor?"":color,this.formatContent("color",{color:color})},setHighlight:function(_ref12){var color=_ref12.color,_ref13=this||{},selectedBgColor=_ref13.selectedBgColor;this.selectedBgColor=color===selectedBgColor?"":color,this.formatContent("highlight",{color:color})},showLinkPrompt:function(){var _ref14=this||{},_ref14$editor=_ref14.editor,editor=void 0===_ref14$editor?{}:_ref14$editor,previousUrl=editor.getAttributes("link").href,url=window.prompt("URL",previousUrl);if(null!==url){if(""===url)return void this.formatContent("unlink");this.formatContent("link",{href:url})}},addImage:function(){var url=window.prompt("URL");url&&this.editor.chain().focus().setImage({src:url}).run()}}},EmailTemplates_EmailTemplateRichTextvue_type_script_lang_js=EmailTemplateRichTextvue_type_script_lang_js,EmailTemplateRichText_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailTemplateRichTextvue_type_script_lang_js,EmailTemplateRichTextvue_type_template_id_6e438584_render,EmailTemplateRichTextvue_type_template_id_6e438584_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailTemplateRichText=EmailTemplateRichText_component.exports,EmailTemplateRichTextAreavue_type_script_lang_js={props:{value:{type:String},field:{type:Object},rows:{type:Number,default:6},maxRows:{type:Number,default:12},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Enter text here"},isEdit:{type:Boolean,default:!1},hideImgTool:{type:Boolean,default:!1},hideOrderedList:{type:Boolean,default:!1},hideUnorderedList:{type:Boolean,default:!1},isRichTextMode:{type:Boolean,default:!0},canShowModeToggle:{type:Boolean,default:!1},hideToolBar:{type:Boolean,default:!0}},components:{Editor:EmailTemplateRichText},computed:{content:{get:function(){return this.value},set:function(value){this.$emit("input",value)}},isRichText:{get:function(){return this.isRichTextMode},set:function(value){this.$emit("update:isRichTextMode",value)}},
// Assuming a <p></p> tag inside editor
// has fonts-size 1rem and margin-bottom 1rem
minHeight:function(){return"".concat(2.27*this.rows,"rem")},maxHeight:function(){return"".concat(2.27*this.maxRows,"rem")}},methods:{setContent:function(content){var editorContext=this.$refs["richTextEditor"];editorContext.setContent(content)},changeMode:function(){var isRichText=this.isRichText,value=this.value;if(isRichText)this.showConfirmModeSwitch();else{var htmlContent="<p>".concat(value,"</p>");this.content=htmlContent,this.proceedChangingModes()}},showConfirmModeSwitch:function(){var _this=this,dialogObj={htmlMessage:"".concat(this.$t("forms.builder.switch_alert")),rbDanger:!0,rbLabel:"Confirm"};this.$dialog.confirm(dialogObj).then((function(canProceed){if(canProceed){var value=_this.value,textContent=(0,filters/* htmlToText */.s9)(value);_this.content=textContent,_this.proceedChangingModes()}}))},proceedChangingModes:function(){var isRichText=this.isRichText;this.isRichText=!isRichText}}},EmailTemplates_EmailTemplateRichTextAreavue_type_script_lang_js=EmailTemplateRichTextAreavue_type_script_lang_js,EmailTemplateRichTextArea_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailTemplateRichTextAreavue_type_script_lang_js,EmailTemplateRichTextAreavue_type_template_id_2b869935_render,EmailTemplateRichTextAreavue_type_template_id_2b869935_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailTemplateRichTextArea=EmailTemplateRichTextArea_component.exports,CodeMirror=__webpack_require__(919324),EmailPreviewvue_type_template_id_4ca4b38a_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"pB15 fc-dialog-center-container fc-dialog-center-body-p0 fc-email-preview-dialog",attrs:{visible:!0,width:"80%",title:_vm.$t("setup.emailTemplates.test_email"),"append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",[_c("div",{staticClass:"email-preview-container width100"},[_c("div",{staticClass:"email-preview-inner-block"},[_c("div",{domProps:{innerHTML:_vm._s(_vm.sanitize(_vm.emailMessage))}})])]),_c("el-footer",{staticClass:"pB20 pT20 pL30 pR30",attrs:{height:"100"}},[_c("el-form",{ref:"emailTestform",staticClass:"width500px",attrs:{model:_vm.mailTestForm}},[_c("el-form-item",[_c("div",{staticClass:"fwBold fc-black-14 text-left"},[_vm._v(" To ")]),_c("div",{staticClass:"flex-middle"},[_c("el-input",{staticClass:"width100 fc-input-full-border2",attrs:{disabled:""},model:{value:_vm.mailTestForm.toMail,callback:function($$v){_vm.$set(_vm.mailTestForm,"toMail",$$v)},expression:"mailTestForm.toMail"}}),_c("el-button",{staticClass:"setup-el-btn mL20"},[_vm._v("Send")])],1)])],1)],1)],1)])],1)},EmailPreviewvue_type_template_id_4ca4b38a_staticRenderFns=[],EmailPreviewvue_type_script_lang_js={props:["emailMessage","messageText"],data:function(){return{mailTestForm:{fields:null,toMail:this.$account.user.email}}},created:function(){this.sanitize=sanitize/* sanitize */.N},methods:{closeDialog:function(){this.$emit("onClose")},actionSave:function(){}}},EmailTemplates_EmailPreviewvue_type_script_lang_js=EmailPreviewvue_type_script_lang_js,EmailPreview_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailPreviewvue_type_script_lang_js,EmailPreviewvue_type_template_id_4ca4b38a_render,EmailPreviewvue_type_template_id_4ca4b38a_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailPreview=EmailPreview_component.exports,EditorShortcutsvue_type_template_id_4edbe33f_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-editor-right-side-scroll"},[_c("div",{staticClass:"fc-black3-16 pB20 bold pL20 pR20 pT10 bold pT10"},[_vm._v(" Essentials ")]),_c("div",{staticClass:"fc-scroll-shortcut-area"},[_c("el-table",{staticClass:"fc-keyboard-shortcut-table",staticStyle:{width:"100%"},attrs:{data:_vm.essentialsData}},[_c("el-table-column",{attrs:{prop:"command",label:"command"}}),_c("el-table-column",{attrs:{prop:"windows",label:"windows"},scopedSlots:_vm._u([{key:"default",fn:function(windows){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(windows.row.windows)+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"mac",label:"mac"},scopedSlots:_vm._u([{key:"default",fn:function(mac){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(mac.row.mac)+" ")])]}}])})],1)],1),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-black3-16 pB20 bold pL20 pR20 pT10 bold"},[_vm._v(" Text Formatting ")]),_c("el-table",{staticClass:"fc-keyboard-shortcut-table",staticStyle:{width:"100%"},attrs:{data:_vm.textFormattingData}},[_c("el-table-column",{attrs:{prop:"command",label:"command"}}),_c("el-table-column",{attrs:{prop:"windows",label:"windows"},scopedSlots:_vm._u([{key:"default",fn:function(windows){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(windows.row.windows)+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"mac",label:"mac"},scopedSlots:_vm._u([{key:"default",fn:function(mac){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(mac.row.mac)+" ")])]}}])})],1)],1),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-black3-16 pB20 bold pL20 pR20 pT10 bold"},[_vm._v(" Paragraph Formatting ")]),_c("el-table",{staticClass:"fc-keyboard-shortcut-table",staticStyle:{width:"100%"},attrs:{data:_vm.paragraphFormatting}},[_c("el-table-column",{attrs:{prop:"command",label:"command"}}),_c("el-table-column",{attrs:{prop:"windows",label:"windows"},scopedSlots:_vm._u([{key:"default",fn:function(windows){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(windows.row.windows)+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"mac",label:"mac"},scopedSlots:_vm._u([{key:"default",fn:function(mac){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(mac.row.mac)+" ")])]}}])})],1)],1),_c("div",{staticClass:"mT20 pB100"},[_c("div",{staticClass:"fc-black3-16 pB20 bold pL20 pR20 pT10 bold"},[_vm._v(" Text Selection ")]),_c("el-table",{staticClass:"fc-keyboard-shortcut-table",staticStyle:{width:"100%"},attrs:{data:_vm.textSelection}},[_c("el-table-column",{attrs:{prop:"command",label:"command"}}),_c("el-table-column",{attrs:{prop:"windows",label:"windows"},scopedSlots:_vm._u([{key:"default",fn:function(windows){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(windows.row.windows)+" ")])]}}])}),_c("el-table-column",{attrs:{prop:"mac",label:"mac"},scopedSlots:_vm._u([{key:"default",fn:function(mac){return[_c("div",{staticClass:"fc-shortcut-bg"},[_vm._v(" "+_vm._s(mac.row.mac)+" ")])]}}])})],1)],1)])])},EditorShortcutsvue_type_template_id_4edbe33f_staticRenderFns=[],EditorShortcutsvue_type_script_lang_js={data:function(){return{essentialsData:[{command:"Copy",windows:"Control C",mac:"Cmd C"},{command:"Cut",windows:"Control X",mac:"Cmd X"},{command:"Paste",windows:"Control V",mac:"Cmd V"},{command:"Paste without formatting",windows:"Control Shift V",mac:"Cmd Shift V"},{command:"Paste without formatting",windows:"Control Shift V",mac:"Cmd Shift V"},{command:"Undo",windows:"Control Z",mac:"Cmd Z"},{command:"Redo",windows:"Control Shift Z",mac:"Cmd Shift Z"},{command:"Add a line break",windows:"Shift Enter",mac:"Shift Enter"}],textFormattingData:[{command:"Bold",windows:"Control + B\t",mac:"Cmd + B"},{command:"Italicize",windows:"Control + I",mac:"Cmd + I"},{command:"Underline\t",windows:"Control + U",mac:"Cmd + U"},{command:"Strikethrough",windows:"Control + Shift + X",mac:"Cmd + Shift + X"},{command:"Highlight",windows:"Control + Shift + H",mac:"Cmd + Shift + H"},{command:"Code",windows:"Control + E",mac:"Cmd + E"}],paragraphFormatting:[{command:"Apply normal text style",windows:"Control + Alt + 0",mac:"Cmd + Alt + 0"},{command:"Apply heading style 1\t",windows:"Control + Alt + 1",mac:"Cmd + Alt + 1"},{command:"Apply heading style 2\t",windows:"Control + Alt + 2",mac:"Cmd + Alt + 2"},{command:"Apply heading style 3",windows:"Control + Alt + 3",mac:"Cmd + Alt + 3"},{command:"Apply heading style 4",windows:"Control + Alt + 4",mac:"Cmd + Alt + 4"},{command:"Apply heading style 5",windows:"Control + Alt + 5",mac:"Cmd + Alt + 5"},{command:"Apply heading style 6",windows:"Control + Alt + 6",mac:"Cmd + Alt + 6"},{command:"Ordered list",windows:"Control + Shift + 7",mac:"Cmd + Alt + 7"},{command:"Bullet list",windows:"Control + Shift + 8",mac:"Cmd + Shift + 8"},{command:"Task list",windows:"Control + Shift + 9",mac:"Cmd + Shift + 9"},{command:"Blockquote",windows:"Control + Shift + B",mac:"Cmd + Shift + B"},{command:"Left align\t",windows:"Control + Shift + L",mac:"Cmd + Shift + L"},{command:"Center align",windows:"Control + Shift + E",mac:"Cmd + Shift + E"},{command:"Right align",windows:"Control + Shift + R",mac:"Cmd + Shift + R"},{command:"Justify",windows:"Control + Shift + J",mac:"Cmd + Shift + J"},{command:"Code block",windows:"Control + Alt + C",mac:"Cmd + Alt + C"},{command:"Subscript",windows:"Control + ",mac:"Cmd + ,"},{command:"Superscript",windows:"Control + .",mac:"Cmd + ."}],textSelection:[{command:"Select all",windows:"Control + A",mac:"Cmd + A"},{command:"Extend selection one character to left",windows:"Shift + left arrow",mac:"Shift + left arrow"},{command:"Extend selection one character to right",windows:"Shift + right arrow",mac:"Shift + right arrow"},{command:"Extend selection one line up",windows:"Shift + up arrow",mac:"Shift + up arrow"},{command:"Extend selection one line down",windows:"Shift + Down arrow",mac:"Shift + Down arrow"},{command:"Extend selection to the beginning of the document",windows:"Control + Shift + up arrow",mac:"Control + Shift + up arrow"},{command:"Extend selection to the end of the document\t",windows:"Control + Shift + down arrow",mac:"Control + Shift + down arrow"}]}}},EmailTemplates_EditorShortcutsvue_type_script_lang_js=EditorShortcutsvue_type_script_lang_js,EditorShortcuts_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EditorShortcutsvue_type_script_lang_js,EditorShortcutsvue_type_template_id_4edbe33f_render,EditorShortcutsvue_type_template_id_4edbe33f_staticRenderFns,!1,null,null,null)
/* harmony default export */,EditorShortcuts=EditorShortcuts_component.exports,HtmlEditorvue_type_template_id_9c404f34_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0 fc-html-container fc-html-editor-preview-page",attrs:{"append-to-body":!0,title:"HTML Editor",visible:!0,width:"85%","before-close":_vm.closeDialog}},[_c("div",{staticClass:"fc-genearate-html-codes",on:{click:_vm.generateHtmlCodes}},[_vm._v(" Generate html codes ")]),_c("div",{staticClass:"fc-editor-and-preview"},[_c("div",{staticClass:"width50"},[_c("code-mirror",{attrs:{codeeditor:!0,options:{mode:"text/javascript"}},model:{value:_vm.htmlEditor,callback:function($$v){_vm.htmlEditor=$$v},expression:"htmlEditor"}})],1),_c("div",{staticClass:"width50"},[_c("div",{staticClass:"html-editor-preview",domProps:{innerHTML:_vm._s(_vm.htmlEditor)}})])]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.save()}}},[_vm._v("Insert")])],1)]),_vm.showGenerateCode?_c("CodeGenerator",{on:{onCloseGenerator:function($event){_vm.showGenerateCode=!1}}}):_vm._e()],1)},HtmlEditorvue_type_template_id_9c404f34_staticRenderFns=[],GenerateCodesvue_type_template_id_f96362ac_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container fc-dialog-center-body-p0 fc-html-container",attrs:{"append-to-body":!0,title:"Generator",visible:!0,width:"85%","before-close":_vm.closeDialog}},[_c("div",{staticClass:"height100 pB100"},[_c("el-tabs",{staticClass:"fc-generator-tabs",on:{"tab-click":_vm.handleClick},model:{value:_vm.activeName,callback:function($$v){_vm.activeName=$$v},expression:"activeName"}},[_c("el-tab-pane",{attrs:{label:"Button",name:"button"}},[_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("URL:")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.urlInput,callback:function($$v){_vm.urlInput=$$v},expression:"urlInput"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("Text:")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.urlInputText,callback:function($$v){_vm.urlInputText=$$v},expression:"urlInputText"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("Title:")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.urlInputTitle,callback:function($$v){_vm.urlInputTitle=$$v},expression:"urlInputTitle"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("Background Color:")]),_c("el-col",{attrs:{span:10}},[_c("el-color-picker",{staticClass:"editor-color-picker",model:{value:_vm.urlBgPicker,callback:function($$v){_vm.urlBgPicker=$$v},expression:"urlBgPicker"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("Font Color:")]),_c("el-col",{attrs:{span:10}},[_c("el-color-picker",{staticClass:"editor-color-picker",model:{value:_vm.urlFontColorPicker,callback:function($$v){_vm.urlFontColorPicker=$$v},expression:"urlFontColorPicker"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("Padding:")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.codePadding,callback:function($$v){_vm.codePadding=$$v},expression:"codePadding"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("Border radius:")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.codeBorderRadius,callback:function($$v){_vm.codeBorderRadius=$$v},expression:"codeBorderRadius"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v("Font Weight:")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.codeFontWeight,callback:function($$v){_vm.codeFontWeight=$$v},expression:"codeFontWeight"}})],1)],1),_c("div",{staticClass:"fwBold"},[_vm._v(" Output: ")]),_c("div",{staticClass:"mT20"},[_c("a",{style:{color:_vm.urlFontColorPicker,background:_vm.urlBgPicker,padding:_vm.codePadding,borderRadius:_vm.codeBorderRadius,fontWeight:_vm.codeFontWeight},attrs:{target:"_blank",href:_vm.urlInputText,title:_vm.urlInputTitle}},[_vm._v(_vm._s(_vm.urlInputText))]),_c("span",{staticClass:"pL10 pointer fc-italic fc-blue-txt4-12 text-left",on:{click:_vm.copyBtnCode}},[_vm._v("Copy the code")])])],1),_c("el-tab-pane",{attrs:{label:"image",name:"img"}},[_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v(" Source ")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.imgSource,callback:function($$v){_vm.imgSource=$$v},expression:"imgSource"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v(" Width ")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.imgWidth,callback:function($$v){_vm.imgWidth=$$v},expression:"imgWidth"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v(" Height ")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.imgHeight,callback:function($$v){_vm.imgHeight=$$v},expression:"imgHeight"}})],1)],1),_c("div",{staticClass:"fwBold"},[_vm._v(" Output: ")]),_c("div",{staticClass:"mT20"},[_c("img",{style:{width:_vm.imgWidth,height:_vm.imgHeight},attrs:{src:_vm.imgSource}}),_c("div",{staticClass:"pointer fc-italic fc-blue-txt4-12 text-left mT15",on:{click:_vm.copyImgCode}},[_vm._v(" Copy the code ")])])],1),_c("el-tab-pane",{attrs:{label:"Link",name:"link"}},[_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v(" URL: ")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.linkUrl,callback:function($$v){_vm.linkUrl=$$v},expression:"linkUrl"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v(" Text: ")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.linkText,callback:function($$v){_vm.linkText=$$v},expression:"linkText"}})],1)],1),_c("el-row",{staticClass:"mB20 flex-middle"},[_c("el-col",{attrs:{span:4}},[_vm._v(" Title: ")]),_c("el-col",{attrs:{span:10}},[_c("el-input",{staticClass:"width100 fc-input-full-border2",model:{value:_vm.linkTitle,callback:function($$v){_vm.linkTitle=$$v},expression:"linkTitle"}})],1)],1),_c("div",{staticClass:"fwBold"},[_vm._v(" Output: ")]),_c("div",{staticClass:"mT20"},[_c("a",{attrs:{target:"_blank",href:_vm.linkUrl,title:_vm.linkTitle}},[_vm._v(_vm._s(_vm.linkText))]),_c("span",{staticClass:"pL10 pointer fc-italic fc-blue-txt4-12 text-left",on:{click:_vm.copyLink}},[_vm._v("Copy the code")])])],1)],1)],1)])},GenerateCodesvue_type_template_id_f96362ac_staticRenderFns=[],GenerateCodesvue_type_script_lang_js={data:function(){return{activeName:"button",urlInput:"https://",urlInputText:"Sample",urlInputTitle:"Sample",urlBgPicker:"#ee518f",urlFontColorPicker:"#fff",codePadding:"10px",codeBorderRadius:"4px",codeFontWeight:"normal",imgSource:"https://facilio.com/images/facilio-blue-logo.svg",imgHeight:"100px",imgWidth:"100px",imgStyle:"",linkUrl:"",linkText:"Sample",linkTitle:"",numberColumns:null,numberRows:null}},methods:{closeDialog:function(){this.$emit("onCloseGenerator")},handleClick:function(){},copyBtnCode:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var copy;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return copy='<a\n              target="_blank"\n              href="'.concat(_this.urlInputText,'"\n              title="').concat(_this.urlInputTitle,'"\n              style="\n                color: ').concat(_this.urlFontColorPicker,";\n                background: ").concat(_this.urlBgPicker,";\n                padding: ").concat(_this.codePadding,";\n                font-weight: ").concat(_this.codeFontWeight,";\n                border-radius: ").concat(_this.codeBorderRadius,';\n              "\n              >').concat(_this.urlInputText,"</a\n            >"),_context.next=3,navigator.clipboard.writeText(copy);case 3:_this.$message({message:"Code copied",type:"success"});case 4:case"end":return _context.stop()}}),_callee)})))()},copyImgCode:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var copyImg;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return copyImg='<img\n            src="'.concat(_this2.imgSource,'"\n            style="width: ').concat(_this2.imgWidth,"; height: ").concat(_this2.imgHeight,'"\n          />'),_context2.next=3,navigator.clipboard.writeText(copyImg);case 3:_this2.$message({message:"Code copied",type:"success"});case 4:case"end":return _context2.stop()}}),_callee2)})))()},copyLink:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var copyLink;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return copyLink='  <a target="_blank"\n              href="'.concat(_this3.linkUrl,'"\n              title="').concat(_this3.linkTitle,'"\n              >').concat(_this3.linkText,"</a\n            >"),_context3.next=3,navigator.clipboard.writeText(copyLink);case 3:_this3.$message({message:"Code copied",type:"success"});case 4:case"end":return _context3.stop()}}),_callee3)})))()},copyTable:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var copyTableList;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return copyTableList="",_context4.next=3,navigator.clipboard.writeText(copyTableList);case 3:_this4.$message({message:"Code copied",type:"success"});case 4:case"end":return _context4.stop()}}),_callee4)})))()}}},EmailTemplates_GenerateCodesvue_type_script_lang_js=GenerateCodesvue_type_script_lang_js,GenerateCodes_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_GenerateCodesvue_type_script_lang_js,GenerateCodesvue_type_template_id_f96362ac_render,GenerateCodesvue_type_template_id_f96362ac_staticRenderFns,!1,null,null,null)
/* harmony default export */,GenerateCodes=GenerateCodes_component.exports,HtmlEditorvue_type_script_lang_js={props:["visibility","value"],data:function(){return{htmlEditor:"",codeShowAndPreview:"HTML Editor",content:"",showGenerateCode:!1}},components:{CodeMirror:CodeMirror/* default */.Z,CodeGenerator:GenerateCodes},mounted:function(){this.htmlEditor=this.value},methods:{closeDialog:function(){var editor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$emit("onClose",editor)},save:function(){this.htmlEditor.includes("<script")||(this.closeDialog(this.htmlEditor),this.$emit("onSave",this.htmlEditor))},generateHtmlCodes:function(){this.showGenerateCode=!0}}},EmailTemplates_HtmlEditorvue_type_script_lang_js=HtmlEditorvue_type_script_lang_js,HtmlEditor_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_HtmlEditorvue_type_script_lang_js,HtmlEditorvue_type_template_id_9c404f34_render,HtmlEditorvue_type_template_id_9c404f34_staticRenderFns,!1,null,null,null)
/* harmony default export */,HtmlEditor=HtmlEditor_component.exports,vuex_esm=__webpack_require__(420629),EmailTemplateFileFieldsvue_type_template_id_dadc535e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("FileFieldAttachments",{attrs:{module:"templatefilefieldattachment",fileFieldsList:_vm.fileFieldsList,fileFieldIds:_vm.fileFields},on:{"update:fileFieldIds":function($event){_vm.fileFields=$event},"update:file-field-ids":function($event){_vm.fileFields=$event}}})],1)},EmailTemplateFileFieldsvue_type_template_id_dadc535e_staticRenderFns=[],FileFieldAttachmentvue_type_template_id_2297e4ba_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-form",[_c("el-row",[_c("div",{staticClass:"fc-fileField-url-select"},[_c("el-col",{attrs:{span:24}},[_c("el-select",{staticClass:"fc-input-full-border-select2-template width100",attrs:{filterable:"",clearable:"",multiple:"",placeholder:"Select file fields"},on:{change:function($event){return _vm.handleValuechange()}},model:{value:_vm.fileFields,callback:function($$v){_vm.fileFields=$$v},expression:"fileFields"}},_vm._l(_vm.fileFieldsList,(function(fileField,index){return _c("el-option",{key:index,attrs:{label:fileField.displayName||fileField.name,value:fileField.id}})})),1)],1)],1)])],1)],1)},FileFieldAttachmentvue_type_template_id_2297e4ba_staticRenderFns=[],FileFieldAttachmentvue_type_script_lang_js={props:["fileFieldIds","fileFieldsList"],computed:{fileFields:{get:function(){return this.fileFieldIds},set:function(value){this.$emit("update:fileFieldIds",value)}}},methods:{handleValuechange:function(){this.$emit("change",this.fileFields)}}},components_FileFieldAttachmentvue_type_script_lang_js=FileFieldAttachmentvue_type_script_lang_js,FileFieldAttachment_component=(0,componentNormalizer/* default */.Z)(components_FileFieldAttachmentvue_type_script_lang_js,FileFieldAttachmentvue_type_template_id_2297e4ba_render,FileFieldAttachmentvue_type_template_id_2297e4ba_staticRenderFns,!1,null,null,null)
/* harmony default export */,FileFieldAttachment=FileFieldAttachment_component.exports,util_validation=__webpack_require__(586529),EmailTemplateFileFieldsvue_type_script_lang_js={props:["fileIdsList"],data:function(){return{}},components:{FileFieldAttachments:FileFieldAttachment},mounted:function(){
// if (this.fileIdsList && this.fileIdsList.length) {
//   this.fileFieldIds = this.fileIdsList
// }
},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo}})),{},{fileFields:{get:function(){return this.fileIdsList},set:function(value){this.$emit("update:fileIdsList",value)}},fileFieldsList:function(){var moduleMeta=this.moduleMeta;if(!(0,util_validation/* isEmpty */.xb)(moduleMeta)){var fields=moduleMeta.fields,fileFields=[];if(!(0,util_validation/* isEmpty */.xb)(fields))return fields.forEach((function(field){var _ref=field||{},dataTypeEnum=_ref.dataTypeEnum,displayType=_ref.displayType;(0,util_validation/* isEmpty */.xb)(displayType)||"FILE"!==displayType._name||(0,util_validation/* isEmpty */.xb)(dataTypeEnum)||"FILE"!==dataTypeEnum._name||fileFields.push(field)})),fileFields}return[]}})},EmailTemplates_EmailTemplateFileFieldsvue_type_script_lang_js=EmailTemplateFileFieldsvue_type_script_lang_js,EmailTemplateFileFields_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailTemplateFileFieldsvue_type_script_lang_js,EmailTemplateFileFieldsvue_type_template_id_dadc535e_render,EmailTemplateFileFieldsvue_type_template_id_dadc535e_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailTemplateFileFields=EmailTemplateFileFields_component.exports,EmailTemplateDirectAttachmentvue_type_template_id_c987439e_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-attachments new-attachments fc-email-attachment"},[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm._e(),_vm.loading||!_vm.$validation.isEmpty(_vm.attachments)||_vm.uploadingfile?_vm.uploadingfile&&0===_vm.attachments.length?_c("el-row",{key:"file-loading",staticClass:"attchment-row visibility-visible-actions"},[_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"pL10"},[_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n            placement: 'top',\n            animation: 'shift-away',\n            arrow: true,\n          }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:_vm.uploadingfile.fileName}},[_vm._v(_vm._s(_vm.uploadingfile.fileName))]),_c("Progress",{attrs:{percentage:_vm.uploadingfile.percentage}})],1)]),_c("el-col",{staticClass:"mT5 pointer",attrs:{span:2}},[_c("span",[_c("inline-svg",{staticClass:"pointer mL10 visibility-hide-actions",attrs:{src:"svgs/delete",iconClass:"icon icon-sm fill-grey"}})],1)])],1):_vm._e():_c("div",[_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("p",{staticClass:"fc-black2-18"},[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files"))),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")]),_c("p",{staticClass:"pB0"},[_vm._v(" (or) ")]),_c("el-button",{staticClass:"fc-green-btn-new"},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Attach files ")])],1)])]),_vm.attachments?_c("div",[_vm.attachments.length>0?_c("div",[_c("div",{staticClass:"row fc-summary-attchment wo-fc-summary-attchment pL0"},[_vm._l(_vm.attachments,(function(attachment,index){return _c("el-row",{key:attachment.attachmentId,staticClass:"attchment-row visibility-visible-actions"},[_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"pL10"},[_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName}},[_vm._v(_vm._s(attachment.fileName))])])]),_c("el-col",{staticClass:"mT5 pointer",attrs:{span:2}},[_vm.canShowDelete(attachment)?_c("span",{on:{click:function($event){return _vm.deleteAttachment(attachment,index)}}},[_c("inline-svg",{staticClass:"pointer mL10 visibility-hide-actions",attrs:{src:"svgs/delete",iconClass:"icon icon-sm fill-grey"}})],1):_vm._e()])],1)})),_vm.uploadingfile?_c("el-row",{key:"file-loading",staticClass:"attchment-row visibility-visible-actions"},[_c("el-col",{attrs:{span:22}},[_c("div",{staticClass:"pL10"},[_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:_vm.uploadingfile.fileName}},[_vm._v(_vm._s(_vm.uploadingfile.fileName))]),_c("Progress",{attrs:{percentage:_vm.uploadingfile.percentage}})],1)]),_c("el-col",{staticClass:"mT5 pointer",attrs:{span:2}},[_c("span",[_c("inline-svg",{staticClass:"pointer mL10 visibility-hide-actions",attrs:{src:"svgs/delete",iconClass:"icon icon-sm fill-grey"}})],1)])],1):_vm._e()],2),!_vm.diasbleAttachment&&_vm.attachments.length?_c("div",{staticClass:"mT20"},[_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox-after-add-dropdown dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("el-button",{staticClass:"fc-green-btn-new"},[_c("i",{staticClass:"el-icon-plus bold"}),_vm._v(" Add Files ")])],1)])]):_vm._e()]):_vm._e()]):_vm._e(),_vm.visibility&&_vm.selectedAttachedFile?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.selectedAttachedFile,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)},EmailTemplateDirectAttachmentvue_type_template_id_c987439e_staticRenderFns=[],EmailSummaryAttachmentsvue_type_template_id_ff71b5d8_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-attachments new-attachments fc-email-attachment"},[_vm.loading?_c("div",{staticClass:"text-center"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_vm._e(),!_vm.loading&&_vm.$validation.isEmpty(_vm.attachments)?_c("div",[_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files"))+" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")]),_c("p",{staticClass:"pB0 pT16"},[_vm._v(" (or) ")]),_c("el-button",{staticClass:"fc-green-btn-new"},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Attach files ")])],1)])]):_c("div",[_vm.attachments.length>0?_c("div",[_c("div",{staticClass:"row fc-summary-attchment wo-fc-summary-attchment pL0"},_vm._l(_vm.attachments,(function(attachment,index){return _c("el-row",{key:attachment.attachmentId,staticClass:"attchment-row visibility-visible-actions"},[_c("el-col",{attrs:{span:22}},[_c("el-col",{attrs:{span:18}},[_c("div",{staticClass:"pL10"},[_c("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                    placement: 'top',\n                    animation: 'shift-away',\n                    arrow: true,\n                  }"}],staticClass:"self-center show text-left fc-black-13 textoverflow-ellipsis max-width300px",staticStyle:{border:"none"},attrs:{title:attachment.fileName}},[_vm._v(_vm._s(attachment.fileName))])])])],1),_c("el-col",{staticClass:"mT5 pointer",attrs:{span:2}},[_vm.canShowDelete(attachment)?_c("span",{on:{click:function($event){return _vm.deleteAttachment(attachment,index)}}},[_c("inline-svg",{staticClass:"pointer mL10 visibility-hide-actions",attrs:{src:"svgs/delete",iconClass:"icon icon-sm fill-grey"}})],1):_vm._e()])],1)})),1),_vm.diasbleAttachment?_vm._e():_c("div",{staticClass:"mT20"},[_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox-after-add-dropdown dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("el-button",{staticClass:"fc-green-btn-new"},[_c("i",{staticClass:"el-icon-plus bold"}),_vm._v(" Attach files ")])],1)])])]):_c("div",[_vm.diasbleAttachment?_vm._e():_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[_c("div",{staticClass:"dropbox"},[_c("input",{staticClass:"input-file",attrs:{type:"file",multiple:""},on:{change:function($event){return _vm.filesChange($event.target.files)}}}),_c("p",{staticClass:"fc-black2-18"},[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_files"))),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")]),_c("p",{staticClass:"pB0"},[_vm._v(" (or) ")]),_c("el-button",{staticClass:"fc-green-btn-new"},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" Attach files ")])],1)])])]),_vm.visibility&&_vm.selectedAttachedFile?_c("preview-file",{attrs:{visibility:_vm.visibility,previewFile:_vm.selectedAttachedFile,files:_vm.attachments},on:{"update:visibility":function($event){_vm.visibility=$event}}}):_vm._e()],1)},EmailSummaryAttachmentsvue_type_template_id_ff71b5d8_staticRenderFns=[],PreviewFile=(__webpack_require__(821057),__webpack_require__(903650),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(891719),__webpack_require__(720096)),EmailSummaryAttachmentsvue_type_script_lang_js={props:["module","record","diasbleAttachment","progressBarData"],data:function(){return{loading:!0,status:{UPLOADING:1,SUCCESS:2,FAILED:3},attachments:[],formFieldName:"attachment",selectedAttachedFile:null,visibility:!1,fileListUpload:[]}},components:{PreviewFile:PreviewFile/* default */.Z},computed:{customColors:function(){return"#835af8"}},mounted:function(){this.loadAttachments()},watch:{record:function(recordObj){this.loadAttachments()}},methods:{handleRemove:function(file,fileList){},handlePreview:function(file){},beforeRemove:function(file,fileList){return this.$confirm("Cancel the transfert of ".concat(file.name," ?"))},canShowDelete:function(attachment){var _ref=attachment||{},uploadedBy=_ref.uploadedBy,status=_ref.status,SUCCESS=this.status.SUCCESS;return((0,validation/* isEmpty */.xb)(status)||status===SUCCESS)&&uploadedBy===this.$account.user.id},deleteAttachment:function(attachment,index){var _this=this,module=this.module,ids=[];ids.push(attachment.id);var obj={attachmentId:ids,module:module};this.$dialog.confirm({title:this.$t("common.header.delete_attachment"),message:this.$t("common.header.are_you_sure_you_want_to_delete_this_attachment"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then((function(value){value&&_this.$http.post("/v2/attachments/delete",obj).then((function(_ref2){var _ref2$data=_ref2.data,message=_ref2$data.message,responseCode=_ref2$data.responseCode;_ref2$data.result;if(0!==responseCode)throw new Error(message);_this.attachments.splice(index,1)}))}))},selectedFile:function(inList){this.selectedAttachedFile=inList,this.visibility=!0},loadAttachments:function(){return this.loading=!0,this.$http.get("/attachment?module="+this.module+"&recordId="+this.record.id).then((function(response){if(200===response.status)return this.attachments=response.data.attachments?response.data.attachments:[],this.loading=!1,0;this.loading=!0})).catch((function(error){error&&(self.loading=!1,self.attachments=null)}))},filesChange:function(files){var _this2=this,fileList=Array.from(files);if(fileList.length){var formData=new FormData;formData.append("module",this.module),formData.append("recordId",this.record.id);var _this$status=this.status,UPLOADING=_this$status.UPLOADING,SUCCESS=_this$status.SUCCESS,FAILED=_this$status.FAILED;fileList.forEach((function(file){var _ref3=file||{},name=_ref3.name,size=_ref3.size,type=_ref3.type,fileEntry={fileId:-1,fileName:name,fileSize:size,contentType:type,status:UPLOADING,error:null,previewUrl:null,uploadedBy:_this2.$account.user.id};formData.append(_this2.formFieldName,file,name),_this2.attachments.unshift(fileEntry)})),this.$http.post("/attachment/add",formData).then((function(_ref4){var data=_ref4.data;data.attachments.forEach((function(attachment){var fileId=attachment.fileId,fileName=attachment.fileName,fileSize=attachment.fileSize,attachmentIdx=_this2.attachments.findIndex((function(a){return a.fileName===fileName&&a.fileSize===fileSize}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this2.attachments[attachmentIdx];attachmentFile=fileId?(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),attachment),{},{status:SUCCESS}):(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this2.$set(_this2.attachments,attachmentIdx,attachmentFile)}}))})).catch((function(){fileList.forEach((function(file){var _ref5=file||{},name=_ref5.name,size=_ref5.size,attachmentIdx=_this2.attachments.findIndex((function(a){return a.fileName===name&&a.fileSize===size}));if(!(0,validation/* isEmpty */.xb)(attachmentIdx)){var attachmentFile=_this2.attachments[attachmentIdx];attachmentFile=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},attachmentFile),{},{status:FAILED,error:"Upload failed."}),_this2.$set(_this2.attachments,attachmentIdx,attachmentFile)}}))}))}},getUser:function(assign){if(null!==assign&&assign.id){var assignto=this.$store.getters.getUser(assign.id);return assignto?assignto.name:"---"}return"---"},icon:function(file){return file&&"image/png"===file?"statics/icons/png.svg":"statics/icons/pdf.svg"}}},EmailTemplates_EmailSummaryAttachmentsvue_type_script_lang_js=EmailSummaryAttachmentsvue_type_script_lang_js,EmailSummaryAttachments_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailSummaryAttachmentsvue_type_script_lang_js,EmailSummaryAttachmentsvue_type_template_id_ff71b5d8_render,EmailSummaryAttachmentsvue_type_template_id_ff71b5d8_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailSummaryAttachments=EmailSummaryAttachments_component.exports,Progressvue_type_template_id_cec3e4dc_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-progress",{staticClass:"image-upload-progressbar",attrs:{"text-inside":!0,"stroke-width":4,percentage:_vm.percent,"show-text":!1}})],1)},Progressvue_type_template_id_cec3e4dc_staticRenderFns=[],Progressvue_type_script_lang_js={data:function(){return{percent:0,step:3}},watch:{percentage:{deep:!0,handler:function(newVal){this.percent=this.percentage}}},props:{percentage:{type:Number,default:function(){return 0}},progressTime:{type:Number,default:function(){return 100}},progressStep:{type:Number,default:function(){return 3}}},computed:{estimatedTime:function(){return 0}},mounted:function(){this.percent=this.percentage,this.step=this.progressStep,this.loadProgress()},methods:{loadProgress:function(){var _this=this,count=setInterval((function(){_this.percent>100&&(clearInterval(count),_this.percent=100),_this.percent<100&&(_this.percent>50&&_this.percent<70?_this.step=_this.step+2:_this.percent>70&&_this.percent<90?_this.step=_this.step+3:_this.percent>90&&(_this.step=_this.step+4),_this.percent+=_this.step)}),this.progressTime)}}},components_Progressvue_type_script_lang_js=Progressvue_type_script_lang_js,Progress_component=(0,componentNormalizer/* default */.Z)(components_Progressvue_type_script_lang_js,Progressvue_type_template_id_cec3e4dc_render,Progressvue_type_template_id_cec3e4dc_staticRenderFns,!1,null,null,null)
/* harmony default export */,Progress=Progress_component.exports,EmailTemplateDirectAttachmentvue_type_script_lang_js={props:["templateId","module","record","diasbleAttachment","fileAttachments"],data:function(){return{uploadingfile:null}},components:{Progress:Progress},extends:EmailSummaryAttachments,watch:{attachments:function(value){this.$emit("update:fileAttachments",value)}},methods:{canShowDelete:function(){return!0},loadAttachments:function(){this.attachments=this.fileAttachments||[],this.loading=!1},filesChange:function(fileList){var _this=this;if(fileList.length){var formData=new FormData;formData.append("fileContent",fileList[0]);var _ref=fileList[0]||{},name=_ref.name,size=_ref.size,type=_ref.type,fileEntry={fileId:-1,fileName:name,fileSize:size,contentType:type,error:null,previewUrl:null,percentage:0};this.uploadingfile=fileEntry,api/* API */.bl.post("/v2/files/add",formData).then((function(_ref2){var data=_ref2.data,error=_ref2.error;error?_this.$message.error(error.message||"Error Occured"):(_this.uploadingfile.percentage=100,setTimeout((function(){_this.uploadingfile=null;var attachmentIndexMap={},fileEntry={attachmentId:-1,fileId:data.fileInfo.fileId,fileName:fileList[0].name,fileSize:fileList[0].size,contentType:fileList[0].type,status:_this.status.UPLOADING,error:null,previewUrl:null,type:1};_this.attachments.push(fileEntry),attachmentIndexMap["0"]=_this.attachments.length-1,_this.$emit("addAttachment",data.fileInfo)}),500))}))}},deleteAttachment:function(attachment,index){var _this2=this;if(attachment.id>0){var templateId=this.templateId,ids=[];ids.push(attachment.id);var formData={moduleName:"templatefileattachment",templateId:templateId,attachmentIds:ids};this.$dialog.confirm({title:this.$t("common.header.delete_attachment"),message:this.$t("common.header.are_you_sure_you_want_to_delete_this_attachment"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then((function(value){value&&api/* API */.bl.post("/v2/template/attachment/delete",formData).then((function(_ref3){var error=_ref3.error;error&&_this2.$message.error(error.message||"Error Occured")}))}))}this.attachments.splice(index,1),this.$emit("removeFileId",attachment.fileId,index)}}},EmailTemplates_EmailTemplateDirectAttachmentvue_type_script_lang_js=EmailTemplateDirectAttachmentvue_type_script_lang_js,EmailTemplateDirectAttachment_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailTemplateDirectAttachmentvue_type_script_lang_js,EmailTemplateDirectAttachmentvue_type_template_id_c987439e_render,EmailTemplateDirectAttachmentvue_type_template_id_c987439e_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailTemplateDirectAttachment=EmailTemplateDirectAttachment_component.exports,EmailTemplateUrlAttachmentvue_type_template_id_08e9b66f_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-url-reuslt-block"},[_c("div",{staticClass:"fc-attach-using-url"},[_c("div",{staticClass:"fc-black2-14 bold"},[_vm._v(" Attach files using url ")]),_c("div",{staticClass:"fc-url-add-block"},[_c("div",{staticClass:"pL20 pR20 fc-url-template-block pB20 border-bottom24"},[_c("div",{staticClass:"fc-url-grey-title opacity-100",staticStyle:{color:"#000"}},[_vm._v(" Url title ")]),_c("el-input",{staticClass:"width100 fc-input-full-border2 mT10",class:{inActiveUrlClass:_vm.getInputValidateClass},attrs:{placeholder:"Add url",type:"url"},on:{change:function($event){return _vm.validateUrl(_vm.templateUrlData.urlString)}},model:{value:_vm.templateUrlData.urlString,callback:function($$v){_vm.$set(_vm.templateUrlData,"urlString",$$v)},expression:"templateUrlData.urlString"}}),_vm.getInputValidateClass?_c("div",{staticClass:"fc-url-alert-txt pT5"},[_vm._v(" Invalid url ")]):_vm._e(),_c("el-button",{staticClass:"fc-template-grey-btn mT10",class:{activeEnableBtn:_vm.templateUrlData.urlString},attrs:{disabled:_vm.getInputValidateClass},on:{click:_vm.addTemplateUrl}},[_vm._v("Add")])],1),_c("div",_vm._l(_vm.urlObjects,(function(iex,inx){return _c("el-row",{key:inx,staticClass:"pL20 pB10 pT10 flex-middle justify-content-space pR20"},[_c("el-col",{attrs:{span:21}},[iex.edit?_c("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"width100 fc-template-edit-input",class:{inActiveUrlClass:_vm.getInputValidateClass},on:{blur:function($event){iex.edit=!1,_vm.$emit("update")},keyup:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter"))return null;iex.edit=!1,_vm.$emit("update")}},model:{value:iex.urlString,callback:function($$v){_vm.$set(iex,"urlString",$$v)},expression:"iex.urlString"}}):_c("div",[_c("label",{staticClass:"fc-url-blue-txt break-word pR20",on:{click:function($event){iex.edit=!0}}},[_vm._v(" "+_vm._s(iex.urlString)+" ")])])],1),_c("el-col",{attrs:{span:3}},[iex.edit?_c("div",{staticClass:"pL20"},[_c("div",{on:{click:function($event){return _vm.showUrlFieldEditClose(inx)}}},[_c("inline-svg",{staticClass:"pointer",attrs:{src:"svgs/tick",iconClass:"icon icon-md"}})],1)]):_vm._e(),iex.edit?_vm._e():_c("div",{staticClass:"flex-middle justify-content-end"},[_c("div",{staticClass:"pointer",on:{click:function($event){return _vm.showUrlFieldEdit(inx)}}},[_c("i",{staticClass:"el-icon-edit f14 fc-setup-list-edit"})]),_c("div",{staticClass:"pointer",on:{click:function($event){return _vm.removeUrlItem(inx)}}},[_c("i",{staticClass:"el-icon-delete f14 pointer fc-setup-list-delete"})])])])],1)})),1)])])])},EmailTemplateUrlAttachmentvue_type_template_id_08e9b66f_staticRenderFns=[],EmailTemplateUrlAttachmentvue_type_script_lang_js=(__webpack_require__(322462),__webpack_require__(169358),{props:{urlAttachments:{type:Array,default:function(){return[]}}},data:function(){return{editedUrlField:null,templateUrlData:[{urlString:"",type:3,edit:!1}],attachmentsDataSetEdit:[],showUrlAttachment:!0,showUrlEditAttachment:!1,showUrlAttachmentInput:!1}},computed:{getInputValidateClass:function(){if(this.templateUrlData.urlString){var regex=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;if(!this.templateUrlData.urlString.match(regex))return!0}return!1},urlObjects:function(){return this.templateUrlData.filter((function(element){return 0!==Object.keys(element.urlString).length}))}},mounted:function(){this.templateUrlData=this.formattedUrldata(this.urlAttachments)},directives:{focus:{inserted:function(el){el.focus()}}},methods:{formattedUrldata:function(urlObjects){var _this=this,object=[];return urlObjects.forEach((function(rt){_this.$set(rt,"edit",!1),object.push(rt)})),urlObjects},removeUrlItem:function(inx){this.templateUrlData.splice(inx,1)},showUrlFieldEdit:function(index){this.urlObjects[index].edit=!0,this.showUrlAttachment=!1,
// this.showUrlEditAttachment = true
this.showUrlAttachmentInput=!0},showUrlFieldEditClose:function(index){this.urlObjects[index].edit=!1,this.showUrlEditAttachment=!1,this.showUrlAttachment=!0,this.showUrlAttachmentInput=!1},addTemplateUrl:function(){this.templateUrlData.urlString?(this.templateUrlData.push({urlString:this.templateUrlData.urlString,type:this.templateUrlData.type,edit:this.templateUrlData.edit}),this.templateUrlData.urlString=null,this.$emit("upadte:urlAttachments",this.urlObjects)):this.$message.error("Please, add your Url")},validateUrl:function(){var regex=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;if(!this.templateUrlData.urlString.match(regex))return this.inActiveUrlClass=!0,!1}}}),EmailTemplates_EmailTemplateUrlAttachmentvue_type_script_lang_js=EmailTemplateUrlAttachmentvue_type_script_lang_js,EmailTemplateUrlAttachment_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailTemplateUrlAttachmentvue_type_script_lang_js,EmailTemplateUrlAttachmentvue_type_template_id_08e9b66f_render,EmailTemplateUrlAttachmentvue_type_template_id_08e9b66f_staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailTemplateUrlAttachment=EmailTemplateUrlAttachment_component.exports,_facilio_router=__webpack_require__(329435),EmailTemplateEditorvue_type_script_lang_js={props:["content","disabled"],title:function(){return"Email template"},data:function(){return{draftsModeSelection:null,fileUploader:!1,attachmentTypes:{FILE:1,FIELD:2,URL:3},loading:!0,emailStructure:{name:"",subject:"",message:"",userWorkflow:{workflowV2String:""},workflow:{}},attachmentsList:[],fileAttachments:[],urlAttachments:[],templateData:[],showScriptDialog:!1,showFileAttachDialog:!1,templateId:-1,templateUrlStrings:[],templateFileIds:[],templateFileFileIds:[],showAttachmentDialog:!1,showTestMail:!1,moduleData:[],notifyEnable:!0,showKeyboardShortcuts:!1,rules:{},saving:!1,showOrHidePlainText:!0,showPlainTextEditor:!0,isRichTextMode:!0,showHtmlEditorDialog:!1,attachmentDialogVisible:!1,showUrlFiledAttachment:!1,showFileUpload:!1,userScriptHeader:"Map scriptFunc(Map "+this.selectedModule+") {\n",userScriptFooter:"\n}",attachmentListEdit:[],moduleFieldsData:[],moduleFieldsTemplateData:[],moduleFilterDatas:{},viewAttachmentBlock:!0,viewScriptBlock:!1,viewShortcutBlock:!1,activePlaceholderName:"advanced",fileList:[],fileFieldsList:[],fileFieldIds:[],editedUrlField:null,hideBackdrop:!1,editBtnHideAndShow:!1,fileIds:[],isValid:!1,inActiveUrlClass:!1,confirmationDialogVisible:!1,urlFieldDataOnEdit:[],attachmentsDataSetEdit:[]}},components:{RichTextArea:EmailTemplateRichTextArea,CodeMirror:CodeMirror/* default */.Z,PreviewEmail:EmailPreview,Shortcuts:EditorShortcuts,HtmlEditor:HtmlEditor,FileFieldAttachment:EmailTemplateFileFields,DirectFileAttachment:EmailTemplateDirectAttachment,urlAttachment:EmailTemplateUrlAttachment},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.getModuleFields(),_this.content&&(_this.message=_this.content),_this.$store.dispatch("view/loadModuleMeta",_this.selectedModule),_this.loadModuleMetaDatas(),_this.moduleDataFilter();
// this.$store.dispatch('emailTemplate/getMentionsList')
case 5:case"end":return _context.stop()}}),_callee)})))()},mounted:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loading=!0,_context2.next=3,_this2.fileFieldIdData();case 3:if(_this2.isNew){_context2.next=7;break}return _context2.next=6,_this2.templateSummaryData();case 6:_this2.templateData.userWorkflow&&_this2.templateData.userWorkflow.workflowV2String&&(_this2.hideBackdrop=!0);case 7:return _this2.loading=!1,_context2.next=10,_this2.showAttahchmentBlock();case 10:_this2.viewAttachmentBlock=!0;case 11:case"end":return _context2.stop()}}),_callee2)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({selectedModule:{get:function(){return this.$route.params.moduleName},set:function(moduleName){var name=this.$route.name;this.$router.replace({name:name,params:{moduleName:moduleName}})}},appLinkName:function(){var appName=(0,_facilio_router/* getApp */.wx)().linkName;return appName},summaryId:function(){return this.$route.params.id?parseInt(this.$route.params.id):-1},isNew:function(){return(0,validation/* isEmpty */.xb)(this.summaryId)}},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo}})),{},{isNewEditCode:function(){var emailStructure=this.emailStructure;return null===emailStructure.userWorkflow||emailStructure.userWorkflow>0}}),methods:{handleDragOver:function(){this.fileUploader=!0},handleDropLeave:function(){this.fileUploader=!1},handleFileDrop:function(){this.fileUploader=!1},handleTemplete:function(){this.isNewEditCode&&(this.hideBackdrop=!0)},htmlTagsRemove:function(originalString){return originalString.replace(/(<([^>]+)>)/gi,"")},emailTemplateAddOrUpdate:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_this3.$refs["emailForm"].validate(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(valid){var url,params,workflowData,subjectWorkflowData,_yield$API$post,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(valid){_context3.next=2;break}return _context3.abrupt("return",!1);case 2:return _this3.saving=!0,url="v2/template/email/addOrUpdate?moduleName=".concat(_this3.selectedModule),params={},workflowData={},subjectWorkflowData={},_this3.isNew&&(_this3.emailStructure.message&&_this3.$common.setExpressionFromPlaceHolder(workflowData,_this3.emailStructure.message,_this3.selectedModule),_this3.emailStructure.subject&&_this3.$common.setExpressionFromPlaceHolder(workflowData,_this3.emailStructure.subject),params.emailStructure={subject:_this3.htmlTagsRemove(_this3.emailStructure.subject),name:_this3.emailStructure.name,message:_this3.emailStructure.message,workflow:workflowData},(0,validation/* isEmpty */.xb)(_this3.emailStructure.userWorkflow)||(0,validation/* isEmpty */.xb)(_this3.emailStructure.userWorkflow.workflowV2String)||(_this3.emailStructure.message&&_this3.$common.setExpressionFromPlaceHolder(workflowData,_this3.emailStructure.message,_this3.selectedModule),_this3.emailStructure.subject&&_this3.$common.setExpressionFromPlaceHolder(workflowData,_this3.emailStructure.subject),params.emailStructure={subject:_this3.htmlTagsRemove(_this3.emailStructure.subject),name:_this3.emailStructure.name,message:_this3.emailStructure.message,workflow:workflowData,userWorkflow:{isV2Script:!0,workflowV2String:"Map scriptFunc(Map ".concat(_this3.selectedModule,") {\n ").concat(_this3.emailStructure.userWorkflow.workflowV2String," \n}")}})),_this3.isNew||(_this3.emailStructure.message&&_this3.$common.setExpressionFromPlaceHolder(workflowData,_this3.emailStructure.message,_this3.selectedModule),_this3.emailStructure.subject&&_this3.$common.setExpressionFromPlaceHolder(workflowData,_this3.htmlTagsRemove(_this3.emailStructure.subject)),params.emailStructure={id:_this3.summaryId,subject:_this3.htmlTagsRemove(_this3.emailStructure.subject),name:_this3.emailStructure.name,message:_this3.emailStructure.message,workflow:workflowData},(0,validation/* isEmpty */.xb)(_this3.emailStructure.userWorkflow)||(0,validation/* isEmpty */.xb)(_this3.emailStructure.userWorkflow.workflowV2String)||(_this3.$common.setExpressionFromPlaceHolder(workflowData,_this3.emailStructure.message,_this3.selectedModule),_this3.$common.setExpressionFromPlaceHolder(subjectWorkflowData,_this3.htmlTagsRemove(_this3.emailStructure.subject),_this3.selectedModule),params.emailStructure={id:_this3.summaryId,subject:_this3.htmlTagsRemove(_this3.emailStructure.subject),name:_this3.emailStructure.name,message:_this3.emailStructure.message,workflow:workflowData,userWorkflow:{isV2Script:!0,workflowV2String:"Map scriptFunc(Map ".concat(_this3.selectedModule,") {\n ").concat(_this3.emailStructure.userWorkflow.workflowV2String," \n}")}})),!0===_this3.showPlainTextEditor?params.emailStructure.html=!0:params.emailStructure.html=!1,_this3.draftsModeSelection?params.emailStructure.draft=!0:params.emailStructure.draft=!1,_this3.isNew?params.attachmentList=_this3.constructAttachmentList():params.attachmentList=_this3.EditconstructAttachmentList(),_this3.templateUrlStrings&&_this3.$common.setExpressionFromPlaceHolder(_this3.emailStructure.workflow,_this3.templateUrlStrings.join()),_context3.next=15,api/* API */.bl.post(url,params);case 15:_yield$API$post=_context3.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this3.$message.error(error.message||_this3.$t("common._common.error_occured")):(_this3.$message.success(_this3.$t("setup.emailTemplates.email_saved_successfully")),_this3.$emit("onSave",data.emailStructures),_this3.goBack()),_this3.saving=!1;case 20:case"end":return _context3.stop()}}),_callee3)})));return function(_x){return _ref.apply(this,arguments)}}());case 1:case"end":return _context4.stop()}}),_callee4)})))()},templateSummaryData:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,api/* API */.bl.get("v2/template/email/view?id=".concat(_this4.summaryId));case 2:_yield$API$get=_context5.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this4.$message.error(error.message||"Error Occurred"):(_this4.templateData=data.emailStructure,_this4.emailStructure=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this4.templateData),{},{name:_this4.templateData.name,subject:_this4.templateData.subject,message:_this4.templateData.message,attachments:_this4.templateData.attachments,userWorkflow:_this4.templateData.userWorkflow?{workflowV2String:_this4.getScriptWorkflow(_this4.templateData.userWorkflow)}:{workflowV2String:""}}),_this4.attachmentsList=_this4.templateData.attachments,_this4.attachmentsList&&(_this4.attachmentsDataSetEdit=[],_this4.fileAttachments=[],_this4.urlAttachments=[],_this4.attachmentsList.forEach((function(file){2===file.typeInteger?_this4.attachmentsDataSetEdit.push(file):1===file.typeInteger?_this4.fileAttachments.push(file):3===file.typeInteger&&_this4.urlAttachments.push(file)}))),_this4.setAttachmentfileIds());case 6:case"end":return _context5.stop()}}),_callee5)})))()},setAttachmentfileIds:function(){var _this5=this;this.attachmentsList&&this.attachmentsList.forEach((function(file){1===file.typeInteger?_this5.attachmentsList.push(file.fileId):2===file.typeInteger?_this5.templateFileIds.push(file.fieldId):3===file.typeInteger&&_this5.urlFieldDataOnEdit.push(file.urlString)}))},configureScript:function(){this.showScriptDialog=!0},actionSave:function(){this.showScriptDialog=!1},goBack:function(){var selectedModule=this.selectedModule;this.$router.push({name:"emailtemplates.list",selectedModule:selectedModule})},showFileSupportDialog:function(){this.showFileAttachDialog=!0,this.showFileAttachment&&(this.showFileAttachment=!0),this.showUrlFiledAttachment&&(this.showUrlFiledAttachment=!0),this.showFileUpload&&(this.showFileUpload=!0)},showAttachmentSupportDialog:function(){this.showFileAttachDialog=!0,this.showFileAttachment=!0,this.showUrlFiledAttachment=!1,this.showFileUpload=!1},showFileUploadSupportDialog:function(){this.showFileAttachDialog=!0,this.showUrlFiledAttachment=!0,this.showFileAttachment=!1,this.showFileUpload=!1},showFileFieldsSupportDialog:function(){this.showFileAttachDialog=!0,this.showFileUpload=!0,this.showUrlFiledAttachment=!1,this.showFileAttachment=!1},EditconstructAttachmentList:function(){this.attachments=[];var attachments=[],templateFileIds=this.templateFileIds,urlAttachments=this.urlAttachments,fileAttachments=this.fileAttachments;return fileAttachments.length&&fileAttachments.forEach((function(rt){var obj={fileId:rt.fileId,type:1};attachments.push(obj)})),templateFileIds&&templateFileIds.length&&templateFileIds.forEach((function(rt){var obj={fieldId:rt,type:2};attachments.push(obj)})),urlAttachments&&urlAttachments.length&&urlAttachments.forEach((function(rt){var obj={urlString:rt.urlString,type:3};attachments.push(obj)})),attachments.length&&(this.attachmentList=attachments),attachments},constructAttachmentList:function(){this.attachments=[];var attachments=[],templateFileIds=this.templateFileIds,urlAttachments=this.urlAttachments,fileAttachments=this.fileAttachments;return fileAttachments&&fileAttachments.forEach((function(rt){var obj={fileId:rt.fileId,type:1};attachments.push(obj)})),templateFileIds&&templateFileIds.length&&templateFileIds.forEach((function(rt){var obj={fieldId:rt,type:2};attachments.push(obj)})),urlAttachments&&urlAttachments.length&&urlAttachments.forEach((function(rt){var obj={urlString:rt.urlString,type:3};attachments.push(obj)})),attachments.length&&(this.attachmentList=attachments),attachments},onSaveAttachments:function(urlArray,fileIds,attachments,fileFieldIds){this.templateUrlStrings=urlArray,this.templateFileIds=fileIds,this.templateFileFileIds=fileFieldIds,this.emailStructure.attachmentsList=attachments},getScriptWorkflow:function(workflow){return(0,validation/* isEmpty */.xb)(workflow)||(0,validation/* isEmpty */.xb)(workflow.workflowV2String)?null:workflow.workflowV2String.replace("Map scriptFunc(Map ".concat(this.selectedModule,") {\n"),"").replace(new RegExp("\n}$"),"")},emailTemplateAction:function(){this.showTestMail=!0},getModuleFields:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var _yield$API$get2,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,api/* API */.bl.get("v2/modules/fields/fields?moduleName=".concat(_this6.selectedModule));case 2:_yield$API$get2=_context6.sent,error=_yield$API$get2.error,data=_yield$API$get2.data,error?_this6.$message.error(error.message||"Error Occurred"):_this6.moduleData=data.fields;case 6:case"end":return _context6.stop()}}),_callee6)})))()},closeNotify:function(){this.notifyEnable=!1},showKeyboardShortcutsOpen:function(){this.showKeyboardShortcuts=!0},showPlain:function(){var _this7=this;this.$confirm("Some formatting will be lost when converting to plain text.\n\n Are you sure want to continue?","Change to plain text",{confirmButtonText:"Change Format",cancelButtonText:"Cancel",cancelButtonClass:"msg-cancel-btn",confirmButtonClass:"msg-confirm-btn",customClass:"fc-el-msgBox",type:"warning"}).then((function(){_this7.$refs["templateEditor"].removeFormat(),_this7.emailStructure.message=_this7.emailStructure.message.replace(/<div([^>]*)>/gi,"").replace(/<br>/gi,"\n").replace(/<\/div>/gi,"").trim(),_this7.showPlainTextEditor=!1})).catch((function(){}))},showPlainText:function(){this.showPlainTextEditor=!this.showPlainTextEditor},showHtmlEditor:function(){this.showHtmlEditorDialog=!0},changeMode:function(){var showPlainTextEditor=this.showPlainTextEditor;if(showPlainTextEditor)this.showConfirmModeSwitch();else{var htmlContent="<p>".concat(this.emailStructure.message,"</p>");this.emailStructure.message=htmlContent,this.proceedChangingModes()}},deleteFileFieldsAttachment:function(key){this.templateFileFileIds.splice(key,1)},showConfirmModeSwitch:function(){var _this8=this,dialogObj={htmlMessage:"".concat(this.$t("forms.builder.switch_alert")),rbDanger:!0,rbLabel:"Confirm"};this.$dialog.confirm(dialogObj).then((function(canProceed){if(canProceed){var textContent=(0,filters/* htmlToText */.s9)(_this8.emailStructure.message);_this8.emailStructure.message=textContent,_this8.proceedChangingModes()}}))},proceedChangingModes:function(){var showPlainTextEditor=this.showPlainTextEditor;this.showPlainTextEditor=!showPlainTextEditor},showListOfAttachment:function(){this.attachmentDialogVisible=!0},deleteUrlAttachment:function(key){this.templateUrlStrings.splice(key,1)},getFileIcon:function(attachment){var contentType=attachment.contentType,type=attachment.type,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS;if(!contentType||!type)return FILE_TYPE_ICONS[0].path;var selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},onHtmlEditorClose:function(editor){var editorContext=this.$refs["emailTemplateRichtext"];editorContext.setContent(editor),this.$set(this.emailStructure,"message",editor),this.showHtmlEditorDialog=!1},onOptionsSelect:function(command){"file"===command?(this.showFileAttachDialog=!0,this.showFileAttachment=!0,this.showUrlFiledAttachment=!1,this.showFileUpload=!1):"url"===command?(this.showFileAttachDialog=!0,this.showUrlFiledAttachment=!0,this.showFileAttachment=!1,this.showFileUpload=!1):"fileFields"===command&&(this.showFileAttachDialog=!0,this.showFileUpload=!0,this.showUrlFiledAttachment=!1,this.showFileAttachment=!1)},fileFieldIdData:function(){var moduleMeta=this.moduleMeta;if(!(0,validation/* isEmpty */.xb)(moduleMeta)){var fields=moduleMeta.fields,fileFields=[];(0,validation/* isEmpty */.xb)(fields)||(fields.forEach((function(field){var _ref2=field||{},dataTypeEnum=_ref2.dataTypeEnum,displayType=_ref2.displayType;(0,validation/* isEmpty */.xb)(displayType)||"FILE"!==displayType._name||(0,validation/* isEmpty */.xb)(dataTypeEnum)||"FILE"!==dataTypeEnum._name||fileFields.push(field)})),this.fileFieldsList=fileFields)}},deleteFileAttachment:function(event){this.attachmentsList.splice(event,1)},loadModuleMetaDatas:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var _yield$API$get3,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,api/* API */.bl.get("/module/meta?moduleName=".concat(_this9.selectedModule));case 2:_yield$API$get3=_context7.sent,error=_yield$API$get3.error,data=_yield$API$get3.data,error?_this9.$message.error(error.message||_this9.$t("common._common.error_occured")):_this9.moduleFieldsData=data.meta&&data.meta.fields;case 6:case"end":return _context7.stop()}}),_callee7)})))()},moduleDataFilter:function(){var _this10=this;this.moduleFilterDatas=this.attachmentsList.filter((function(el){return _this10.moduleFieldsData.some((function(f){return f.fieldId===el.fieldId&&f.fieldId===el.fieldId}))}))},setupHomeRoute:function(){return this.isNew||(this.confirmationDialogVisible=!0),this.$router.replace({path:"/".concat(this.appLinkName,"/setup/home")})},setupTemplateRoute:function(){if(this.isNew)return this.$router.replace({path:"/".concat(this.appLinkName,"/setup/customization/emailtemplates")});this.confirmationDialogVisible=!0},confirmationDialogShow:function(){return this.isNew||(this.confirmationDialogVisible=!0),this.$router.replace({path:"/".concat(this.appLinkName,"/setup/customization/emailtemplates")})},showAttahchmentBlock:function(){this.viewAttachmentBlock=!0,this.viewScriptBlock=!1,this.viewShortcutBlock=!1},showScriptBlock:function(){this.viewAttachmentBlock=!1,this.viewScriptBlock=!0,this.viewShortcutBlock=!1},ShowKeyboardShortcuts:function(){this.viewAttachmentBlock=!1,this.viewScriptBlock=!1,this.viewShortcutBlock=!0},showPlainTextMode:function(command){"plainTextMode"===command&&this.changeMode()},handleClick:function(){
//tabs clicked
},clickToHideBackDrop:function(){this.hideBackdrop=!1,this.editBtnHideAndShow=!0},showBackdropReturn:function(){this.hideBackdrop=!0,this.editBtnHideAndShow=!1},addAttachment:function(file){this.addFileId(file.fileId)},addFileId:function(fileId){this.fileIds.push(fileId)},removeFileId:function(fileId,index){this.fileIds.splice(index,1)},handleClose:function(){this.dialogVisible=!1},filesChange:function(fileList){var _this11=this;if(fileList.length){var formData=new FormData;formData.append("fileContent",fileList[0]),api/* API */.bl.post("/v2/files/add",formData).then((function(_ref3){var data=_ref3.data,error=_ref3.error;if(error)_this11.$message.error(error.message||"Error Occured");else{var attachmentIndexMap={},fileEntry={attachmentId:-1,fileId:data.fileInfo.fileId,fileName:fileList[0].name,fileSize:fileList[0].size,contentType:fileList[0].type,status:_this11.status.UPLOADING,error:null,previewUrl:null};_this11.attachments.push(fileEntry),attachmentIndexMap["0"]=_this11.attachments.length-1,_this11.$emit("addAttachment",data.fileInfo)}}))}},saveAsDrafts:function(command){"draft"===command&&(this.draftsModeSelection=command,this.emailTemplateAddOrUpdate())}}},EmailTemplates_EmailTemplateEditorvue_type_script_lang_js=EmailTemplateEditorvue_type_script_lang_js,EmailTemplateEditor_component=(0,componentNormalizer/* default */.Z)(EmailTemplates_EmailTemplateEditorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,EmailTemplateEditor=EmailTemplateEditor_component.exports;
// EXTERNAL MODULE: ./node_modules/@tiptap/extension-dropcursor/dist/index.js
}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/46404.js.map