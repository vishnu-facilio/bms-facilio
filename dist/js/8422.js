(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[8422],{
/***/673362:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetMultiChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetMultiChooser.vue?vue&type=template&id=0ccc2fed
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top",width:"60%","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","before-close":_vm.handleclose,"append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"multi f-element",attrs:{id:"spaceassetchooser"}},[_vm.hideBanner?_vm._e():_c("banner",{attrs:{message:_vm.message,hideIcon:!_vm.selectedList.count}}),_c("div",{staticStyle:{height:"600px","overflow-y":"hidden"}},[_c("div",{staticStyle:{"background-color":"#ffffff",height:"100%",width:"100%",display:"inline-block"}},[_c("div",{staticClass:"flex-middle justify-content-space pT20 pL20 pR20"},[_vm.isAsset?_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",placeholder:_vm.assetCategory.placeHolder,disabled:!_vm.isAsset||_vm.disable},on:{change:_vm.onCategoryChange},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:parseInt(value)}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategoryChange},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1),_vm.hideBanner?_vm._e():_c("div",{staticClass:"pull-right"},[_c("el-radio-group",{on:{change:_vm.onIncludeTypeChange},model:{value:_vm.includeType,callback:function($$v){_vm.includeType=$$v},expression:"includeType"}},[_c("el-radio",{staticClass:"fc-radio",attrs:{label:"all"}},[_vm._v("All")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"include"}},[_vm._v("Include")]),_c("el-radio",{staticClass:"fc-radio",attrs:{label:"exclude"}},[_vm._v("Exclude")])],1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"20px","padding-right":"20px","border-bottom":"1px solid #e6ecf3 !important"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v("search")]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.setResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"asset-chooser-select-block"},[_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"inline"},[!_vm.resourceType||_vm.resourceType.includes(field.spaceType+1)?_c("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationChange(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1):_vm._e()],1)})),_c("span",{staticClass:"searchicon pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])],2)])])],1),_c("div",{staticClass:"scroll-multichooser"},[_c("el-row",[_c("el-col",{staticClass:"table-scroll-chooser",attrs:{span:_vm.hideBanner?16:24}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px","overflow-y":"scroll","padding-bottom":"50px"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table border-right-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow "},[_c("el-checkbox",{attrs:{disabled:"exclude"===_vm.includeType&&!_vm.hideBanner},on:{change:_vm.onSelectAllChange},model:{value:_vm.selectall,callback:function($$v){_vm.selectall=$$v},expression:"selectall"}})],1),_c("td",{staticClass:"headerrow width30"},[_vm._v("#ID")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("NAME")]),_c("td",{staticClass:"headerrow width30"},[_vm._v("CATEGORY")])])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:space.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(space,!0)}},model:{value:space.selected,callback:function($$v){_vm.$set(space,"selected",$$v)},expression:"space.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(space)}}},[_vm._v(" "+_vm._s(space.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(space.spaceTypeVal)+" ")])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:asset.id,staticClass:"tablerow",class:{selectedrow:asset.selected}},[_c("td",{staticClass:"contentrow"},[_c("el-checkbox",{on:{change:function($event){return _vm.toggleSelect(asset,!0)}},model:{value:asset.selected,callback:function($$v){_vm.$set(asset,"selected",$$v)},expression:"asset.selected"}})],1),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" #"+_vm._s(asset.id)+" ")]),_c("td",{staticClass:"contentrow width30",on:{click:function($event){return $event.stopPropagation(),_vm.toggleSelect(asset)}}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")])]):_vm._e()})),_vm.spaceList&&_vm.spaceList.length<1&&_vm.assetList&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_vm.hideBanner?_c("el-col",{staticClass:"chooser-selected-container",attrs:{span:8}},[_c("div",{staticClass:"chooser-scroll-block"},[_vm.selectedList&&_vm.selectedList.length?_c("div",{staticClass:"count-message"},[_vm._v(" "+_vm._s(_vm.message)+" ")]):_vm._e(),_vm._l(_vm.selectedList,(function(resource,value){return _c("div",{key:value,staticClass:"selected-field"},[_vm._v(" "+_vm._s(resource.name)+" "),_c("i",{staticClass:"el-icon-close remove",on:{click:function($event){return _vm.deSelect(resource)}}})])}))],2)]):_vm._e()],1)],1),_c("div",{staticClass:"f-footer row"},[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.handleclose}},[_c("span",[_vm._v("Cancel")])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.associate}},[_c("span",[_vm._v("Ok")])])])],1)]),_c("div",{staticStyle:{position:"absolute",top:"45%",left:"45%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),v_infinite_scroll=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(561364)),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),ResourceMixin=__webpack_require__(22637),FBannervue_type_template_id_85b57242_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.message?_c("div",{staticClass:"banner-block",style:{"background-color":_vm.bannerColor}},[_c("div",{staticClass:"banner-content"},[_c("i",{directives:[{name:"show",rawName:"v-show",value:!_vm.hideIcon,expression:"!hideIcon"}],class:["banner-icon flLeft",_vm.bannerIcon],style:{color:_vm.bannerTextColor},attrs:{"aria-hidden":"true"}}),_c("p",{staticClass:"banner-txt flLeft",style:{color:_vm.bannerTextColor}},[_vm._v(" "+_vm._s(_vm.message)+" ")])])]):_vm._e()])},FBannervue_type_template_id_85b57242_staticRenderFns=[],FBannervue_type_script_lang_js={props:["message","icon","color","textColor","hideIcon"],computed:{bannerColor:function(){var color;return this.color?color=this.color:this.isError||(color="#ecf3da"),color},bannerTextColor:function(){var color;return this.textColor?color=this.textColor:this.isError||(color="#67933a"),color},bannerIcon:function(){var icon;return this.icon?icon=this.icon:this.isError||(icon="el-icon-circle-check-outline"),icon}}},components_FBannervue_type_script_lang_js=FBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FBannervue_type_script_lang_js,FBannervue_type_template_id_85b57242_render,FBannervue_type_template_id_85b57242_staticRenderFns,!1,null,null,null)
/* harmony default export */,FBanner=component.exports,vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","disable","hideBanner"],components:{Banner:FBanner,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{selectall:!1,showQuickSearch:!1,includeType:"all",selectedList:[]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{message:function(){var message,selectedCount=this.selectedList.length;if("all"===this.includeType&&this.categoryName)message="All "+this.categoryName+"s have been selected";else if("all"!==this.includeType&&selectedCount){var includeMsg;includeMsg=this.hideBanner?" Selected":"include"===this.includeType?" Included":" Excluded";var resource=(this.categoryName?this.categoryName:"")+(this.showAsset?" Asset":" Space");message=selectedCount+" "+resource+(selectedCount>1?"s":"")+includeMsg}else message=this.resourceType?"No Space Selected":"No Asset Selected";return message},categoryName:function(){return!this.assetCategory||this.assetCategory.value<=0?"":this.assetCategory.options[this.assetCategory.value]}}),created:function(){var _this=this;this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadAssetCategory").then((function(){_this.initResourceData()}))},watch:{visibility:function(val){val?this.reInit():val||!this.query||this.selectedList&&this.selectedList.length||this.$emit("associate",{})},query:function(val){this.quickSearchQuery=val,val&&(this.showQuickSearch=!0,this.setResourceData())},initialResourcesFecthed:function(val){val&&this.setInitialData()}},methods:{reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.checkAndInitResourceData()},deSelect:function(object){var resource=this.resourceList.find((function(resource){return resource.id===object.id}));resource?resource.selected=!1:resource=object,this.setSelectedResource(resource),this.setIncludeTypeOnChange()},handleclose:function(){this.$emit("update:visibility",!1),this.$emit("update:siteId",null)},openSpace:function(){this.isAsset=!1,this.loadSpace()},openAsset:function(){this.isAsset=!0,this.loadAsset()},associate:function(){var obj={};"all"!==this.includeType&&(obj.resourceList=this.selectedList,obj.isInclude="include"===this.includeType),this.$emit("associate",obj)},toggleQuickSearch:function(){var _this2=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.setResourceData())},onCategoryChange:function(){this.assetCategory.value?this.includeType="all":this.setIncludeTypeOnChange(),this.onCategorySelected(),this.selectedList=[]},onSpaceCategoryChange:function(){this.spaceCategory;this.onSpaceCategorySelected(),this.selectedList=[]},onSelectAllChange:function(){var _this3=this;this.selectedList=[],this.resourceList.forEach((function(resource){_this3.$set(resource,"selected",_this3.selectall),_this3.setSelectedResource(resource)})),this.setIncludeTypeOnChange()},toggleSelect:function(resource,alreadyChanged){alreadyChanged||this.$set(resource,"selected",!resource.selected),this.setSelectedResource(resource),this.selectall=this.selectedList.length===this.resourceList.length,this.setIncludeTypeOnChange()},setInitialData:function(){var _this4=this;if(this.initialData){var selectedResources=this.initialData.selectedResources;this.includeType=selectedResources&&selectedResources.length?this.initialData.isIncludeResource?"include":"exclude":"all";var idArray=[];selectedResources&&(this.selectedList=[],this.resourceList.forEach((function(resource){var resourceSelectedObj=_this4.initialData.selectedResources.some((function(selctedResource){return selctedResource.id===resource.id}));_this4.$set(resource,"selected",resourceSelectedObj),_this4.setSelectedResource(resource)}))),this.selectedList&&selectedResources&&this.selectedList.length<selectedResources.length&&(this.selectedList=[],this.initialData.selectedResources.forEach((function(d){idArray.push(d.id)})),this.$util.loadResource(idArray).then((function(fields){_this4.selectedList=fields})))}},setIncludeTypeOnChange:function(){"all"===this.includeType?this.includeType="include":this.selectedList.length||(this.includeType="all")},onIncludeTypeChange:function(){var _this5=this;"all"===this.includeType&&(this.resourceList.forEach((function(resource){_this5.$set(resource,"selected",!1)})),this.selectedList=[],this.selectall=!1)},isSelected:function(resourceId){return this.selectedList.find((function(resource){return resource.id===resourceId}))},onLocationChange:function(field){var _this6=this;this.onLocationSelected(field).then((function(){_this6.setListSelected()})),this.setIncludeTypeOnChange()},setResourceData:function(){var _this7=this;this.loadResourceData().then((function(){_this7.setListSelected()}))},setListSelected:function(){var _this8=this,selectedIds=this.selectedList.map((function(resource){return resource.id}));this.isAsset?this.assetList.map((function(asset){return selectedIds.includes(asset.id)&&_this8.$set(asset,"selected",!0),asset})):this.spaceList.map((function(space){return selectedIds.includes(space.id)&&_this8.$set(space,"selected",!0),space}))},setSelectedResource:function(resource){if(resource.selected)this.selectedList.push(this.$helpers.cloneObject(resource));else{var idx=this.selectedList.findIndex((function(sr){return sr.id===resource.id}));-1!==idx&&this.selectedList.splice(idx,1)}}}},components_SpaceAssetMultiChooservue_type_script_lang_js=SpaceAssetMultiChooservue_type_script_lang_js,SpaceAssetMultiChooser_component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetMultiChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetMultiChooser=SpaceAssetMultiChooser_component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/503658:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return BaseDialogBox}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/Components/BaseDialogBox.vue?vue&type=template&id=4730d566
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.visibility?_c("el-dialog",{attrs:{"custom-class":"base-dialog-box",title:_vm.title,visible:_vm.visibility,"append-to-body":!0,"show-close":!1,"close-on-click-modal":!1,width:_vm.width,"destroy-on-close":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"title-slot",style:{display:_vm.hideHeader?"none":"block"},attrs:{slot:"title"},slot:"title"},[_c("div",{staticClass:"title-div"},[_vm._v(" "+_vm._s(_vm.title)+" ")]),_c("hr")]),_c("div",{staticClass:"dialog-body"},[_vm._t("body")],2),_c("span",{class:_vm.isAlert?"dialog-footer-alert":"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"mR10 dialog-btn confirm-btn",attrs:{disabled:_vm.disableConfirm,type:"el-button  el-button--primary"},on:{click:_vm.onConfirm}},[_vm._v(_vm._s(_vm.confirmText))]),_c("el-button",{staticClass:"mL10 dialog-btn cancel-btn",attrs:{disabled:_vm.disableCancel},on:{click:_vm.onCancel}},[_vm._v(_vm._s(_vm.cancelText))]),_vm.onClearAll?_c("el-button",{staticClass:"clear-all-btn",staticStyle:{"margin-left":"20px !important","text-decoration":"underline"},attrs:{type:"text"},on:{click:_vm.onClearAll}},[_vm._v("Clear all")]):_vm._e()],1)]):_vm._e()],1)},staticRenderFns=[],BaseDialogBoxvue_type_script_lang_js={props:["title","visibility","width","onCancel","cancelText","onConfirm","confirmText","disableCancel","disableConfirm","hideHeader","onClearAll","isAlert"]},Components_BaseDialogBoxvue_type_script_lang_js=BaseDialogBoxvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Components_BaseDialogBoxvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,BaseDialogBox=component.exports},
/***/608578:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return UnsavedChangesErrorDialogBox}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/Components/UnsavedChangesErrorDialogBox.vue?vue&type=template&id=1cce89bc&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("base-dialog-box",{attrs:{visibility:_vm.visibility,onConfirm:_vm.save,onCancel:_vm.cancel,hideHeader:!0,isAlert:!0,cancelText:"No",confirmText:"Yes",width:"480px"},on:{"update:visibility":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"dialog-content-body",attrs:{slot:"body"},slot:"body"},[_c("div",{staticClass:"header"},[_vm._v(" Cancel Editing? ")]),_c("div",{staticClass:"content-body",staticStyle:{"margin-bottom":"0px"}},[_vm._v(" Changes you made so far will not be saved ")])])])],1)},staticRenderFns=[],BaseDialogBox=__webpack_require__(503658),UnsavedChangesErrorDialogBoxvue_type_script_lang_js={props:["visibility"],components:{BaseDialogBox:BaseDialogBox/* default */.Z},methods:{cancel:function(){this.$emit("result",!1),this.$emit("update:visibility",!1)},save:function(){this.$emit("result",!0),this.$emit("update:visibility",!1)}}},Components_UnsavedChangesErrorDialogBoxvue_type_script_lang_js=UnsavedChangesErrorDialogBoxvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Components_UnsavedChangesErrorDialogBoxvue_type_script_lang_js,render,staticRenderFns,!1,null,"1cce89bc",null)
/* harmony default export */,UnsavedChangesErrorDialogBox=component.exports},
/***/303783:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return saveReportMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),NewReportSummaryHelper=(__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(434284),__webpack_require__(228436),__webpack_require__(169358),__webpack_require__(648324),__webpack_require__(601458)),api=__webpack_require__(32284),vuex_esm=__webpack_require__(420629),router=__webpack_require__(329435),saveReportMixinvue_type_script_lang_js={props:["report","config"],mixins:[NewReportSummaryHelper/* default */.Z],mounted:function(){this.loadReportFolders()},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getCurrentUser"])),watch:{newReport:{handler:function(newState){}}},data:function(){return{moduleOptions:{},moduleLoading:!0,moduleNameLocal:null,reportFolders:[],newReport:{name:"",description:"",reportFolderId:"",analyticsType:1,addToDashboard:!1,isTemplate:!1},disableSaveButton:!1}},methods:{loadReportFolders:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url,self;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:
// no module name case is energy data reports, DON't send moduleName prop as energydata.;leave null for energreports
url="/v3/report/folders?moduleName=energydata",self=_this,//pivot
url+="&isPivot=true",api/* API */.bl.get(url).then((function(response){response.error||(self.reportFolders=response.data.reportFolders)}));case 4:case"end":return _context.stop()}}),_callee)})))()},init:function(){this.report&&this.$helpers.copy(this.newReport,this.report)},saveFolder:function(folderName){var _this2=this,self=this;this.applySharing();var apiUrl=null;return apiUrl="/v3/report/folder/create?moduleName=energydata&isPivot=true",new Promise((function(resolve,reject){var a={reportFolder:{name:folderName,reportSharing:_this2.reportSharing}};
//adding folder type =>3 for pivot reports.TODO  send typeEnum for Reading and module reports too
self.report&&5==self.report.reportType&&(a.reportFolder.folderType=3),api/* API */.bl.post(apiUrl,a).then((function(response){response.error?(_this2.$message.error(response.error.message),reject(response.error)):response.data.reportFolder&&response.data.reportFolder.id?resolve(response):reject(response)})).catch((function(error){error&&reject(error)}))}))},applySharing:function(){var self=this;if(this.reportSharing=[],1===self.shareTo)this.reportSharing.push({type:1,userId:self.getCurrentUser().ouid});else if(3===self.shareTo){if(self.sharedUsers.length>0){this.reportSharing.push({type:1,userId:self.getCurrentUser().ouid});for(var i=0;i<self.sharedUsers.length;i++)self.sharedUsers[i]!==self.getCurrentUser().ouid&&this.reportSharing.push({type:1,userId:self.sharedUsers[i]})}if(self.sharedRoles.length>0)for(var _i=0;_i<self.sharedRoles.length;_i++)this.reportSharing.push({type:2,roleId:self.sharedRoles[_i]});if(self.sharedGroups.length>0)for(var _i2=0;_i2<self.sharedGroups.length;_i2++)this.reportSharing.push({type:3,groupId:self.sharedGroups[_i2]})}},addReport:function(override){this.disableSaveButton=!0,this.$emit("savingStarted");var self=this,newReportParams={},apiUrl=null;
//pivot report
apiUrl="v2/report/savePivotReport";var reportId=this.$route.query.reportId&&!this.$route.query.duplicate?this.$route.query.reportId:-1;
//apiUrl = reportId === -1 ? 'v3/report/pivot/create' : 'v3/report/pivot/update'
newReportParams=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.config),{},{reportContext:this.newReport}),reportId&&(newReportParams["reportId"]=reportId),self.saving=!0,api/* API */.bl.post(apiUrl,newReportParams).then((function(response){var reportContext=response.data.report;if(override){var reportURL=self.getRouterUrl(reportContext,self.viewModes().EDIT,!1),reportURLSplit=reportURL.split("?");reportURL=reportURLSplit[0],self.close(response.data),self.$router.replace({path:reportURL,query:{reportId:reportContext.id}})}else self.$router.push(self.getRouterUrl()+reportContext.id),
// self.$router.replace({ query: { reportId: reportContext.id } })
self.$emit("savingEnded"),
// let notifyInstance = self.$notify({
//   title: self.$t('common._common.report_saved_successfully'),
//   message: self.$t('common._common.click_here_to_open_report'),
//   type: 'success',
//   duration: 0,
//   customClass: 'report-save-success',
//   onClick: function() {
//     if (notifyInstance) {
//       notifyInstance.close()
//     }
//     let reportURL = null
//     reportURL = self.getRouterUrl()
//     self.$router.push({ path: reportURL })
//   },
// })
self.close(response.data),self.saving=!1})).catch((function(error){self.saving=!1,alert(error),self.$emit("savingEnded")}))},viewModes:function(){var viewModes={VIEW:1,EDIT:2};return viewModes},getRouterUrl:function(){var reportURL="/app/em/pivot/view/";if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW),name=_findRouteForTab.name;reportURL=this.$router.resolve({name:name}).href,reportURL+="/"}return reportURL},getReportObject:function(){this.close({report:this.newReport})},saveReport:function(){var self=this;if(this.newReport.name&&this.newReport.name.trim().length)if(this.newReport.reportFolderId){var reportFolderId=-1;try{reportFolderId=parseInt(this.newReport.reportFolderId)}catch(err){}this.disableSaveButton=!0,isNaN(reportFolderId)||reportFolderId<0?self.saveFolder(this.newReport.reportFolderId).then((function(response){reportFolderId=response.data.reportFolder.id,self.newReport.reportFolderId=reportFolderId,self.addReport()})):self.addReport()}else alert(this.$t("common.header.please_choose_folder_enter_new_folder"));else alert(this.$t("common.header.please_enter_the_report_name"))},close:function(reportObj){this.$emit("reportSaved",JSON.parse(JSON.stringify(reportObj.report))),this.newReport={name:"",description:"",reportFolderId:"",addToDashboard:!1}}}},Components_saveReportMixinvue_type_script_lang_js=saveReportMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Components_saveReportMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,saveReportMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/892249:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return skeletonLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/Components/skeletonLoader.vue?vue&type=template&id=6e653e86&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return"Table"==_vm.preset?_c("div",[_c("div",{staticClass:"skeleton-table"},[_vm.showCheckBox?_c("div",{staticClass:"skl-checkbox-column"},[_c("div",{staticClass:"skl-checkbox-row",style:"background-color:#f1f2f4;margin-bottom:0;"},[_c("div",{staticClass:"skl-checkbox",style:"background-color:white"})]),_vm._l(_vm.rows,(function(row,index){return _c("div",{key:index,staticClass:"skl-checkbox-row"},[_c("div",{staticClass:"skl-checkbox shine-lines-effect"})])}))],2):_vm._e(),_vm._l(_vm.columns,(function(column,index){return _c("div",{key:index,staticClass:"skeleton-table-column",style:"width:"+_vm.calculatedColumnWidth},[_vm._m(0,!0),_vm._l(_vm.rows,(function(row,index){return _c("div",{key:index,staticClass:"skeleton-table-row"},[_vm._m(1,!0)])}))],2)}))],2)]):_c("div",_vm._l(_vm.rowCount,(function(index){return _c("div",{key:index,staticClass:"shine-lines-effect skeleton-text",style:"width:"+_vm.width+";height:"+_vm.height+";"})})),0)},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"skeleton-table-header"},[_c("div",{staticClass:"skl-header-cell"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"skl-row-cell"},[_c("div",{staticClass:"skl-shimmer shine-lines-effect"})])}],validation=(__webpack_require__(879288),__webpack_require__(990260)),skeletonLoadervue_type_script_lang_js={computed:{calculatedColumnWidth:function(){return(0,validation/* isEmpty */.xb)(this.columnWidth)?"".concat(parseInt(100/this.columns),"%"):this.columnWidth}},props:{rowCount:{type:Number,default:5},showCheckBox:{type:Boolean,default:!1},preset:{type:String,default:"none"},columns:{type:Number,default:3},rows:{type:Number,default:3},columnWidth:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"100%"}}},Components_skeletonLoadervue_type_script_lang_js=skeletonLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Components_skeletonLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,"6e653e86",null)
/* harmony default export */,skeletonLoader=component.exports},
/***/122765:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return PivotBuilderNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/pivot/PivotBuilderNew.vue?vue&type=template&id=f059db36
var render=function(){var this$1=this,_vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-builder-new-ui"},[_c("el-dialog",{attrs:{"custom-class":"new-pivot-builder-dialog-box",visible:!0,"append-to-body":!0,"show-close":!1,width:"100%",height:"100vh"}},[_c("div",{staticClass:"pivot-builder-new  height-100  d-flex flex-col white-background"},[_c("div",{staticClass:"pivot-header-main-content",style:{width:"100%"}},[_c("header",{staticClass:"fc-report-header flex-shrink-0 header-pivot show-edit-icon",style:{"justify-content":"space-between"}},[_c("div",{staticClass:"title-and-icon-section"},[_c("div",{staticClass:"pull-left report-title-section"},[_c("el-breadcrumb",[_c("el-breadcrumb-item",{staticClass:"bread-crumb-text",attrs:{to:{path:_vm.getBreadCrumbPath(1)}}},[_vm._v("Analytics")]),_c("el-breadcrumb-item",{staticClass:"bread-crumb-text",attrs:{to:{path:_vm.getBreadCrumbPath(2)}}},[_vm._v("Pivot")]),_c("el-breadcrumb-item",{staticClass:"bread-crumb-text",attrs:{to:{path:_vm.getBreadCrumbPath(3)}}},[_vm._v(_vm._s(_vm.reportFolderName))])],1)],1),_c("div",{staticClass:"icon-and-title"},[_c("div",{class:"left-pane-icon-section "+(_vm.leftPaneVisibility?"":"left-pane-active"),staticStyle:{"padding-top":"1px"}},[_c("img",{class:"hamburger-menu-builder "+(_vm.leftPaneVisibility?"":"ham-menu-builder-active"),attrs:{src:__webpack_require__(255231),width:"18px",height:"18px"},on:{click:function($event){_vm.leftPaneVisibility=!_vm.leftPaneVisibility}}})]),_c("div",{staticClass:"newreport-title-input"},[_vm._v(" "+_vm._s(_vm.reportObject.name)+" ")]),_c("el-button",{staticClass:"edit-btn",staticStyle:{"margin-left":"10px",padding:"5px !important"},attrs:{size:"mini",circle:""},on:{click:function(){this$1.editMode=!0,this$1.moduleSlectVisibility=!0}}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/edit",iconClass:"icon-sm flex icon"}})],1)],1)]),_c("div",{staticClass:"pull-right report-btn-section"},[_c("SavePivotReportComponent",{attrs:{report:_vm.reportObject,config:_vm.config},on:{reportSaved:_vm.reportSaved,savingStarted:function($event){return _vm.spinnerStatToggle(3)},savingEnded:function($event){return _vm.spinnerStatToggle(4)}}})],1)]),_c("div",{staticClass:"pivot-builder-new-body"},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.leftPaneVisibility,expression:"leftPaneVisibility"}],staticClass:"d-flex pivot-builder-body items-stretch",style:{display:_vm.leftPaneVisibility?"flex":"none",border:"1px solid #ebedf4",height:"calc(100vh - 60px)"}},[_c("div",{staticClass:"overflow-hidden flex-shrink-0 pivot-left-pane  pL25 pT10"},[_c("div",[_c("div",{staticClass:"config-section"},[_c("div",{staticClass:"PivotDimentions"},[_c("PivotDimentions",{attrs:{pivotBaseModuleName:_vm.config.moduleName,builderConfig:_vm.config,pivotResponse:_vm.pivotTable,initaialRows:_vm.config.rows,activeColumn:_vm.activeColumn,criteria:_vm.config.criteria,dateFieldId:_vm.config.dateFieldId},on:{deleteRowValue:_vm.deleteRowValue,pivotDimentionUpdated:_vm.pivotDimentionUpdated,openUserFilter:_vm.openAddCriteriaDialog,dimensionsLoaded:function($event){return _vm.spinnerStatToggle(1)},activeColumnChanged:_vm.activeColumnChanged}})],1),_c("div",{staticClass:"pivot-measures"},[_c("PivotMeasures",{attrs:{pivotBaseModuleName:_vm.config.moduleName,builderConfig:_vm.config,pivotResponse:_vm.pivotTable,initaialValues:_vm.config.values,activeColumn:_vm.activeColumn},on:{deleteRowValue:_vm.deleteRowValue,pivotMeasureUpdated:_vm.pivotMeasureUpdated,measuresLoaded:function($event){return _vm.spinnerStatToggle(2)},activeColumnChanged:_vm.activeColumnChanged}})],1)])])])]),_c("div",{staticClass:"pivot-table-section",style:{width:_vm.leftPaneVisibility?"calc( 100% - 434px )":"100%"}},[_c("PivotTable",{ref:"pivotTable",attrs:{sortBy:_vm.config.sortBy,showTimelineFilter:_vm.config.showTimelineFilter,dateOperator:_vm.config.dateOperator,dateValue:_vm.config.dateValue,activeColumn:_vm.activeColumn,spinnerStat:_vm.spinnerStat,pivotTable:_vm.pivotTable,loading:_vm.tableLoading,isNoConfig:_vm.isNoConfig,theme:_vm.config.templateJSON.theme,enableColumnFormat:!0,columnFormatting:_vm.config.templateJSON.columnFormatting,fetchPivotDataError:_vm.fetchPivotDataError,diable_userfilter_drillown:_vm.config.templateJSON.diable_userfilter_drillown},on:{"update:loading":function($event){_vm.tableLoading=$event},sortChanged:_vm.handleTableSortIconClick,pickerChanged:_vm.handlePickerChange,columnResizeEvent:_vm.columnResizeEvent,openColumnFormatDialog:_vm.openColumnFormatDialog,openConditionalFormatDialog:_vm.openConditionalFormatDialog,openCellVisualizationDialog:_vm.openCellVisualizationDialog,columnPinningEvent:_vm.columnPinningEvent,columnTextWarpEvent:_vm.columnTextWarpEvent,headerLabelChanged:_vm.headerLabelChanged,activeColumnChanged:_vm.activeColumnChanged,recordCountUpdated:_vm.setRecordCount}},[_c("div",{staticClass:"pivot-tool-bar-container",attrs:{slot:"tools-section"},slot:"tools-section"},[_c("div",{staticClass:"filter-section pivot-tab-hover",staticStyle:{"margin-left":"16px",padding:"6.5px 8px",width:"80px"},on:{click:_vm.openAddCriteriaDialog}},[_vm.config.dateFieldId<0&&null==_vm.config.criteria?_c("img",{attrs:{src:__webpack_require__(661391),height:"15px",width:"15px"}}):_c("img",{attrs:{src:__webpack_require__(670497),height:"15px",width:"15px"}}),_c("div",{staticClass:"filter-tilte"},[_vm._v(" "+_vm._s(_vm.$t("pivot.filters"))+" ")])]),_c("PivotThemeCustomization",{attrs:{initialTheme:_vm.config.templateJSON.theme,initialRowHieght:_vm.config.templateJSON.theme.density},on:{rowHeightChanged:_vm.rowHeightChanged,themeConfigChanged:_vm.themeConfigChanged}}),_c("HideColumnsCustomization",{attrs:{columnConfig:_vm.config.templateJSON.columnFormatting}}),_c("RowLimit",{attrs:{recordCount:_vm.recordCount,config:_vm.config},on:{rowsCountUpdated:_vm.configChanged}})],1)])],1)])])])]),_vm.columnFormatConfig.visibility?_c("ColumnFormatDialog",{attrs:{visibility:_vm.columnFormatConfig.visibility,field:_vm.columnFormatConfig.field,alias:_vm.columnFormatConfig.alias,editConfig:_vm.columnFormatConfig.editConfig,isDataColumn:_vm.columnFormatConfig.isDataColumn,fieldName:_vm.columnFormatConfig.fieldName},on:{close:function($event){_vm.columnFormatConfig.visibility=!1},columnFormatConfig:_vm.columnFormatConfigAdded}}):_vm._e(),_c("ModuleSelectDialogBox",{attrs:{"v-if":_vm.moduleSlectVisibility,visibility:_vm.moduleSlectVisibility,moduleName:_vm.config.moduleName,editMode:_vm.editMode,report:_vm.reportObject},on:{"update:visibility":function($event){_vm.moduleSlectVisibility=$event},"update:moduleName":function($event){return _vm.$set(_vm.config,"moduleName",$event)},"update:module-name":function($event){return _vm.$set(_vm.config,"moduleName",$event)},"update:report":function($event){_vm.reportObject=$event},closeDialog:function($event){_vm.moduleSlectVisibility=!1},reportSaved:_vm.reportSaved,moduleSelected:function($event){return _vm.spinnerStatToggle(3)}}}),_vm.conditionalFormatConfig.visibility?_c("ConditionalFormatDialog",{attrs:{visibility:_vm.conditionalFormatConfig.visibility,alias:_vm.conditionalFormatConfig.alias,variables:_vm.conditionalFormatConfig.fields,editConfig:_vm.conditionalFormatConfig.editConfig},on:{"update:visibility":function($event){return _vm.$set(_vm.conditionalFormatConfig,"visibility",$event)},closeDialog:function($event){_vm.conditionalFormatConfig.visibility=!1,_vm.conditionalFormatConfig.editConfig={}},conditionFormatAdded:_vm.conditionFormatAdded}}):_vm._e(),_vm.cellVisualizationConfig.visibility?_c("cell-visualization-dialog",{attrs:{visibility:_vm.cellVisualizationConfig.visibility,alias:_vm.cellVisualizationConfig.alias,editConfig:_vm.cellVisualizationConfig.editConfig,referenceDataColumnOptions:_vm.referenceDataColumnOptions},on:{"update:visibility":function($event){return _vm.$set(_vm.cellVisualizationConfig,"visibility",$event)},closeDialog:function($event){_vm.cellVisualizationConfig.visibility=!1,_vm.cellVisualizationConfig.editConfig={}},cellVisualizationConfigAdded:_vm.cellVisualizationConfigAdded}}):_vm._e(),_vm.showAddCriteriaDialog?_c("PivotUserFilterDialogBox",{attrs:{visibility:_vm.showAddCriteriaDialog,criteria:_vm.config.criteria,moduleName:_vm.config.moduleName,dateFields:_vm.dateFields,dateFieldId:_vm.config.dateFieldId,disableUserFilterInDrilldown:_vm.config.templateJSON.diable_userfilter_drillown},on:{"update:visibility":function($event){_vm.showAddCriteriaDialog=$event},save:_vm.criteriaSaved,disableFilterInDrilldown:_vm.disableFilterInDrilldown}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),slicedToArray=__webpack_require__(554621),toConsumableArray=__webpack_require__(488478),router=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(425728),__webpack_require__(670560),__webpack_require__(169358),__webpack_require__(947522),__webpack_require__(300268),__webpack_require__(865137),__webpack_require__(538077),__webpack_require__(339772),__webpack_require__(634338),__webpack_require__(506203),__webpack_require__(450886),__webpack_require__(241830),__webpack_require__(329435)),api=__webpack_require__(32284),NewDateHelper=__webpack_require__(105534),utils_field=__webpack_require__(815872),utility_methods=__webpack_require__(773258),validation=__webpack_require__(990260),PivotDefaults=__webpack_require__(706214),PivotTable=__webpack_require__(231910),utils_utility_methods=__webpack_require__(555005),PivotDimentionsvue_type_template_id_3d0631f6_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-dimentions"},[_c("div",{staticClass:"title-section"},[_c("div",{staticClass:"dimension-title"},[_c("div",{staticClass:"title"},[_vm._v(" "+_vm._s(_vm.$t("pivot.dimensions"))+" ")]),_c("div",{staticClass:"hr-line"})])]),_c("div",{staticClass:"pivot-dimention-list"},[_vm.showLoader?_c("skeletonLoader",{attrs:{rowCount:3,width:"186.5px",height:"28px"}}):_vm._e(),_vm.showLoader?_vm._e():_c("div",{staticClass:"outter-container-rows"},[_c("div",{staticClass:"search-bar"},[_c("el-input",{staticClass:"pivot-search-box",attrs:{size:"mini",placeholder:"Search...","prefix-icon":"el-icon-search"},model:{value:_vm.pivotDimentionSearch,callback:function($$v){_vm.pivotDimentionSearch=$$v},expression:"pivotDimentionSearch"}})],1),_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.nullifyActiveRow,expression:"nullifyActiveRow"}],staticClass:"original-list-row"},[_vm.reRender?_c("div",{staticClass:"pivot-dimention-fields-section pB35"},[_c("el-collapse",{attrs:{accordion:""},model:{value:_vm.activeModule,callback:function($$v){_vm.activeModule=$$v},expression:"activeModule"}},[_c("el-collapse-item",{attrs:{name:_vm.pivotBaseModuleName}},[_c("template",{slot:"title"},[_c("div",{staticClass:"module-title-icon-section"},[_c("div",{staticClass:"module-icon-section",staticStyle:{"margin-left":"2px"}},[_c("img",{attrs:{src:__webpack_require__(148140),width:"14px",height:"16px"}})]),_vm.pivotBaseModule?_c("div",{staticClass:"module-name-section base-module-name"},[_vm._v(" "+_vm._s(_vm.pivotBaseModule.displayName)+" ")]):_vm._e()])]),_c("div",{staticClass:"original-list-row-full"},[_c("draggable",{staticClass:"dragArea list-group",attrs:{list:_vm.pivotFilteredDimentions,group:{name:"pivotDimentions",pull:"clone"},clone:_vm.pivotDimentionAdded,options:_vm.draggableOptions},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1}}},[0==_vm.pivotFilteredDimentions.length?_c("div",{staticClass:"task-handle mR10",staticStyle:{"padding-left":"27px"}},[_vm._v(" No Data ")]):_vm._l(_vm.pivotFilteredDimentions,(function(row,index){return _c("div",{key:index,staticClass:"field-row",class:{"field-hover":_vm.activeRow==row.primary.uuid},on:{click:function($event){$event.stopPropagation(),_vm.activeRow==row.primary.uuid?_vm.activeRow=null:_vm.activeRow=row.primary.uuid}}},[_vm.isDecimalField(row.primary)||_vm.isNumberField(row.primary)||_vm.isIdField(row.primary)?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticStyle:{"margin-top":"9px"},attrs:{src:__webpack_require__(867037),width:"15px",height:"15px"}})]):_vm.isLookupField(row.primary)?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticStyle:{"margin-top":"4px"},attrs:{src:__webpack_require__(66195),width:"15px",height:"15px"}})]):_vm.isDateField(row.primary)||_vm.isDateTimeField(row.primary)?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticStyle:{"margin-top":"4px"},attrs:{src:__webpack_require__(789920),width:"15px",height:"15px"}})]):_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticStyle:{"margin-top":"9px"},attrs:{src:__webpack_require__(91321),width:"15px",height:"15px"}})]),_c("div",{staticClass:"row-body-section"},[_c("div",{class:_vm.activeRow==row.primary.uuid?"mT-auto mB-auto each-row active-row-width":"mT-auto mB-auto each-row"},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start",content:row.primary.displayName,"open-delay":1e3}},[_c("span",[_vm._v(_vm._s(row.primary.displayName))])])],1),_c("div",{staticClass:"move-row-button",on:{click:function($event){return _vm.moveRow(row)}}},[_c("img",{attrs:{src:__webpack_require__(712016),width:"15px",height:"15px"}})]),(_vm.isDateField(row.primary)||_vm.isDateTimeField(row.primary))&&_vm.showAggr?_c("div",{staticClass:"aggr-select-option pR10 pT1",style:_vm.activeRow==row.primary.uuid?"display:inline":""},[_c("el-select",{attrs:{filterable:"",size:"mini","default-first-option":"",placeholder:"Aggr","popper-class":"fc-group-select","value-key":"label"},on:{focus:function($event){_vm.activeRow=row.primary.uuid},change:function($event){return _vm.reRenderDimension()}},model:{value:row.selectedTimeAggr,callback:function($$v){_vm.$set(row,"selectedTimeAggr",$$v)},expression:"row.selectedTimeAggr"}},_vm._l(_vm.timeAggregation,(function(aggr){return _c("el-option",{key:aggr.name,attrs:{label:aggr.label,value:aggr.value},on:{click:function($event){$event.stopPropagation()}}})})),1)],1):_vm._e()])])}))],2)],1)],2)],1),_c("div",{staticClass:"lookup-options-list"},[_vm.islookupOptionsAvailable?_vm._e():_c("div",{staticClass:"looup-items-title-section"},[_vm._v(" "+_vm._s(_vm.$t("pivot.lookups"))+" ")]),_vm._l(_vm.filteredLookupOptions,(function(lookup,index){return _c("div",{key:index,staticClass:"single-lookup-field"},[lookup.lookupOptions.length>0?_c("el-collapse",{attrs:{accordion:""},model:{value:_vm.activeModule,callback:function($$v){_vm.activeModule=$$v},expression:"activeModule"}},[_c("el-collapse-item",{attrs:{name:lookup.lookupPrimary.moduleName}},[_c("template",{slot:"title"},[_c("div",{staticClass:"module-title-icon-section"},[_c("div",{staticClass:"module-icon-section"},[_c("fc-icon",{staticClass:"one-level-lookup-icon",attrs:{group:"files",name:"one-level-lookup"}})],1),lookup.lookupPrimary?_c("div",{staticClass:"lookup-name-section"},[_vm._v(" "+_vm._s(lookup.lookupPrimary.displayName)+" ")]):_vm._e()])]),_vm.reRenderLookup?_c("div",{staticClass:"original-list-row-full"},[_c("draggable",{staticClass:"dragArea list-group",attrs:{list:lookup.lookupOptions,group:{name:"pivotDimentions",pull:"clone",put:!1},clone:function(dim){return _vm.pivotDimentionAdded(dim,lookup.lookupPrimary)},options:_vm.draggableOptions},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1}}},_vm._l(lookup.lookupOptions,(function(row,index){return _c("div",{key:index,staticClass:"field-row",class:{"field-hover":_vm.activeRow==row.uuid},on:{click:function($event){_vm.activeRow==row.uuid?_vm.activeRow=null:_vm.activeRow=row.uuid}}},[_vm.isDecimalField(row)||_vm.isNumberField(row)||_vm.isIdField(row)?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticClass:"sortable-icon",attrs:{src:__webpack_require__(520171),width:"15px",height:"15px"}}),_c("img",{staticStyle:{"margin-top":"5px"},attrs:{src:__webpack_require__(867037),width:"15px",height:"15px"}})]):_vm.isLookupField(row)?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticClass:"sortable-icon",attrs:{src:__webpack_require__(520171),width:"15px",height:"15px"}}),_c("img",{attrs:{src:__webpack_require__(66195),width:"15px",height:"15px"}})]):_vm.isDateField(row)||_vm.isDateTimeField(row)?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticClass:"sortable-icon",attrs:{src:__webpack_require__(520171),width:"15px",height:"15px"}}),_c("img",{attrs:{src:__webpack_require__(789920),width:"15px",height:"15px"}})]):_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{staticClass:"sortable-icon",attrs:{src:__webpack_require__(520171),width:"15px",height:"15px"}}),_c("img",{staticStyle:{"margin-top":"5px"},attrs:{src:__webpack_require__(91321),width:"15px",height:"15px"}})]),_c("div",{staticClass:"row-body-section lookups-row"},[_c("div",{class:_vm.activeRow==row.uuid?"mT-auto mB-auto each-row active-row-width":"mT-auto mB-auto each-row"},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start",content:row.displayName,"open-delay":1e3}},[_c("span",[_vm._v(_vm._s(row.displayName))])])],1),_c("div",{staticClass:"move-row-button",on:{click:function($event){return _vm.moveRow(row,lookup.lookupPrimary)}}},[_c("img",{attrs:{src:__webpack_require__(712016),width:"15px",height:"15px"}})]),_vm.isDateField(row)||_vm.isDateTimeField(row)?_c("div",{staticClass:"aggr-select-option pR10 pT1",style:_vm.activeRow==row.uuid?"display:inline":""},[_c("el-select",{attrs:{filterable:"","default-first-option":"",size:"mini",placeholder:"Aggr","popper-class":"fc-group-select","value-key":"label"},on:{focus:function($event){_vm.activeRow=row.uuid},change:function($event){return _vm.reRenderLookupFlds()}},model:{value:row.selectedTimeAggr,callback:function($$v){_vm.$set(row,"selectedTimeAggr",$$v)},expression:"row.selectedTimeAggr"}},_vm._l(_vm.timeAggregation,(function(aggr){return _c("el-option",{key:aggr.name,attrs:{label:aggr.label,value:aggr.value},on:{click:function($event){$event.stopPropagation()}}})})),1)],1):_vm._e()])])})),0)],1):_vm._e()],2)],1):_vm._e()],1)}))],2)],1):_vm._e()])]),_vm._m(0),_c("div",{staticClass:"new-list-row"},[_c("div",{staticClass:"row-header"},[_c("div",{staticClass:"title-header"},[_c("img",{attrs:{src:__webpack_require__(745322),width:"15px",height:"15px"}}),_c("span",{staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("pivot.rows")))])])]),_vm.showLoader?_c("skeletonLoader",{attrs:{rowCount:1,width:"186.5px",height:"28px"}}):_vm._e(),_vm.showLoader?_vm._e():_c("draggable",{staticClass:"dragArea list-group new-list",class:{"dragging-active":_vm.isDraggingActive},attrs:{list:_vm.pivotConfigDimentions,options:_vm.draggableOptions},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1},change:_vm.pivotDimenetionUpdated}},[_vm._l(_vm.pivotConfigDimentions,(function(row,index){return _c("div",{key:index,staticClass:"field-row-new",class:{activeDimention:_vm.activeColumn===row.alias},on:{click:function($event){return $event.stopPropagation(),_vm.$emit("activeColumnChanged",row.alias)},mouseenter:function($event){_vm.rowHover=row.alias},mouseleave:function($event){_vm.rowHover=null}}},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start","open-delay":1e3}},[_c("div",{attrs:{slot:"content"},slot:"content"},[row.selectedTimeAggr>=0&&_vm.getDataType(row.alias)?_c("span",[_vm._v(" "+_vm._s(_vm.timeAggregationMap[row.selectedTimeAggr]+" ( "+_vm.getFieldLabel(row.alias,row.field,row.fieldDisplayName))+" "),void 0!=row.field.module&&-1!=row.lookupFieldId?_c("span",[_vm._v(" "+_vm._s("("+row.field.module.displayName+")")+" ")]):_vm._e(),_vm._v(" "+_vm._s(")")+" ")]):_c("span",[_vm._v(" "+_vm._s(_vm.getFieldLabel(row.alias,row.field,row.fieldDisplayName))+" "),void 0!=row.field.module&&-1!=row.lookupFieldId?_c("span",[_vm._v(" "+_vm._s("("+row.field.module.displayName+")")+" ")]):_vm._e()])]),_c("div",[_vm.isDecimalField(_vm.getField(row.alias,row.field))||_vm.isNumberField(_vm.getField(row.alias,row.field))||_vm.isIdField(_vm.getField(row.alias,row.field))?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("InlineSvg",{staticStyle:{"margin-top":"7px"},attrs:{src:"svgs/pivot/icon-123",iconClass:"icon icon-sm15"}})],1):_vm.isLookupField(_vm.getField(row.alias,row.field))?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("InlineSvg",{attrs:{src:"svgs/pivot/Lookup field",iconClass:"icon icon-sm15"}})],1):_vm.isDateField(_vm.getField(row.alias,row.field))||_vm.isDateTimeField(_vm.getField(row.alias,row.field))?_c("div",{staticClass:"task-handle mR10 pointer"},[_c("InlineSvg",{attrs:{src:"svgs/pivot/icon-date",iconClass:"icon icon-sm15"}})],1):_c("div",{staticClass:"task-handle mR10 pointer"},[_c("InlineSvg",{staticStyle:{"margin-top":"6px"},attrs:{src:"svgs/pivot/icon-abc",iconClass:"icon-sm15 icon"}})],1),_vm.reRenderDimentions?_c("div",{staticClass:"mT-auto mB-auto field-label-area"},[_c("div",{staticClass:"pivot-row-label"},[_vm._v(" "+_vm._s(_vm.getFieldLabel(row.alias,row.field,row.fieldDisplayName))+" "),void 0!=row.field.module&&-1!=row.lookupFieldId?_c("span",[_vm._v(_vm._s("("+row.field.module.displayName+")"))]):_vm._e()])]):_vm._e(),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_c("div",{staticClass:"inline"},[_c("i",{staticClass:"el-icon-close pivot-icon-hover",on:{click:function($event){return $event.stopPropagation(),function(){return _vm.pivotDimentionRemoved(row)}.apply(null,arguments)}}})])])])])],1)})),0==_vm.pivotConfigDimentions.length?_c("div",{key:677,staticClass:"config-instruction-section"},[_vm._v(" "+_vm._s(_vm.$t("pivot.dropDimention"))+" ")]):_vm._e()],2)],1)],1)])},PivotDimentionsvue_type_template_id_3d0631f6_staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"vertical-line-split"},[_c("div",{staticClass:"vertical-line"})])}],constant=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(648324),__webpack_require__(354754)),uuid=__webpack_require__(455877),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),skeletonLoader=__webpack_require__(892249),field_utils=__webpack_require__(455344),PivotDimentionsvue_type_script_lang_js={name:"PivotDimentions",props:["pivotBaseModuleName","initaialRows","builderConfig","pivotResponse","activeColumn"],components:{draggable:vuedraggable_umd_default(),skeletonLoader:skeletonLoader/* default */.Z},watch:{pivotBaseModuleName:function(newVal){newVal&&(this.loadPivotDimentions(),this.loadPivotBaseModuleMeta())},initaialRows:function(newVal){newVal&&(this.pivotConfigDimentions=newVal)}// activeColumn() {
//   this.reRenderDimentions = false
//   setTimeout(() => {
//     this.reRenderDimentions = true
//   }, 100)
// },
},created:function(){this.setTimeAggrIdVsMap()},computed:{pivotFilteredDimentions:function(){var _this=this;return this.pivotDimentionSearch?this.transformedPivotDiemtions.filter((function(rowObj){return rowObj.primary.displayName.toLowerCase().includes(_this.pivotDimentionSearch.toLowerCase())})):this.transformedPivotDiemtions},transformedPivotDiemtions:function(){var _this2=this,transformedPivotDimentions=this.pivotDimentions.map((function(field){var _rowObject$primary,rowObject={};if(rowObject.primary=(0,objectSpread2/* default */.Z)({},field),"LOOKUP"==field.dataTypeEnum&&_this2.meta[field.lookupModule.name]){var lookupOptions=(0,toConsumableArray/* default */.Z)(_this2.meta[field.lookupModule.name]),selectedField=lookupOptions.find((function(lookupField){return lookupField.mainField}));rowObject.lookupOptions=(0,toConsumableArray/* default */.Z)(lookupOptions),rowObject.selectedLookupField=(0,objectSpread2/* default */.Z)({},selectedField)}else rowObject.lookupOptions=[];return"DATE_TIME"!=field.dataTypeEnum&&"DATE"!=field.dataTypeEnum||!(0,validation/* isEmpty */.xb)(null===rowObject||void 0===rowObject||null===(_rowObject$primary=rowObject.primary)||void 0===_rowObject$primary?void 0:_rowObject$primary.selectedTimeAggr)||(rowObject.selectedTimeAggr=0),rowObject}));return transformedPivotDimentions},transformedLookupOptionsList:function(){var _this3=this,transformArray=[];return this.pivotDimentions.forEach((function(field){var rowObject={};if(rowObject.lookupPrimary=(0,objectSpread2/* default */.Z)({},field),"LOOKUP"==field.dataTypeEnum&&"siteId"!=field.name&&_this3.meta[field.lookupModule.name]){var lookupOptions=_this3.meta[field.lookupModule.name].filter((function(fd){return fd.id>0}));rowObject.lookupOptions=(0,toConsumableArray/* default */.Z)(lookupOptions),transformArray.push(rowObject)}})),transformArray},filteredLookupOptions:function(){var _this4=this;if(!this.pivotDimentionSearch)return this.transformedLookupOptionsList;var cloneTransformedLookupOptionsList=JSON.parse(JSON.stringify(this.transformedLookupOptionsList)),filtered=cloneTransformedLookupOptionsList.map((function(lookup){return lookup.lookupOptions=lookup.lookupOptions.filter((function(lp){return"DATE_TIME"!=lp.dataTypeEnum&&"DATE"!=lp.dataTypeEnum||!(0,validation/* isEmpty */.xb)(lp.selectedTimeAggr)||(lp.selectedTimeAggr=0),lp.displayName.toLowerCase().startsWith(_this4.pivotDimentionSearch.toLowerCase())})),lookup}));return filtered},islookupOptionsAvailable:function(){return this.filteredLookupOptions.every((function(l){return 0==l.lookupOptions.length}))}},mounted:function(){this.pivotBaseModuleName&&(this.loadPivotDimentions(),this.loadPivotBaseModuleMeta())},data:function(){return{pivotDimentions:[],showLoader:!0,showAggr:!0,transformedPivotDimentions:[],pivotConfigDimentions:[],draggableOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"pivotDimentions",sort:!0},activeModule:"",activeRow:null,reRenderDimentions:!0,activeSelectBox:!1,isDraggingActive:!1,meta:{},pivotColumnFormat:{},pivotDimentionSearch:"",activeLookupFieldName:null,pivotBaseModule:null,defaultColFormat:PivotDefaults/* defaultColFormat */.WW,timeAggregation:PivotDefaults/* timeAggregation */.tP,rowHover:null,reRender:!0,reRenderLookup:!0,timeAggregationMap:{}}},methods:{isDecimalField:field_utils/* isDecimalField */.No,isNumberField:field_utils/* isNumberField */.Z2,isIdField:field_utils/* isIdField */.sh,isLookupField:field_utils/* isLookupField */.Qf,isDateField:field_utils/* isDateField */.y2,isDateTimeField:field_utils/* isDateTimeField */.K,initDimentions:function(){this.initaialRows&&(this.pivotConfigDimentions=JSON.parse(JSON.stringify(this.initaialRows)))},reRenderDimension:function(){var _this5=this,list=document.querySelector(".pivot-dimention-fields-section"),scrollPos=list.scrollTop;this.showAggr=!1,this.$nextTick((function(){_this5.reRender=!0,_this5.showAggr=!0,_this5.scrollTop(scrollPos,list)}))},scrollTop:function(pos,list){list.scrollTop=pos},reRenderLookupFlds:function(){var _this6=this,list=document.querySelector(".pivot-dimention-fields-section"),scrollPos=list.scrollTop;this.$nextTick((function(){_this6.reRenderLookup=!0,_this6.scrollTop(scrollPos,list)}))},nullifyActiveRow:function(){this.activeRow=null},moveRow:function(row,lookup){var addRow=this.pivotDimentionAdded(row,lookup||null);this.pivotConfigDimentions.push(addRow),this.pivotDimenetionUpdated({added:{element:addRow}})},loadPivotDimentions:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var resp,data,error,meta;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,api/* API */.bl.get("v2/report/getTabularRowReportFields",{moduleName:_this7.pivotBaseModuleName});case 2:resp=_context.sent,data=resp.data,error=resp.error,error?_this7.$message.error("Error loading row options "):(
//api format getTabularRowReportFields/asset ->meta{asset:fields,relatedModule(vendor):fields}
//take main module 'asset'.for each lookup field in asset ,fill fields from lookup's module
meta=data.meta,_this7.meta=meta,
//add a unique uuid to each field, some fields have same name and id, Asset.building and asset.space
Object.keys(meta).forEach((function(moduleName){meta[moduleName].forEach((function(field){field.uuid=(0,uuid.v4)(),["site","building","floor","space"].includes(moduleName)&&(field.aggr=constant/* default */.Z.SPACE_AGGREGATE_OPERATOR.getOperatorId(moduleName))}))})),_this7.pivotDimentions=meta[_this7.pivotBaseModuleName]);case 5:case"end":return _context.stop()}}),_callee)})))()},getDataType:function(alias){var _this$pivotResponse,_this$pivotResponse$p,_this$pivotResponse$p2;if(null!==this&&void 0!==this&&null!==(_this$pivotResponse=this.pivotResponse)&&void 0!==_this$pivotResponse&&_this$pivotResponse.pivotAliasVsField[alias])return"DATE_TIME"===(null===(_this$pivotResponse$p=this.pivotResponse.pivotAliasVsField[alias])||void 0===_this$pivotResponse$p?void 0:_this$pivotResponse$p.dataTypeEnum)||"DATE"===(null===(_this$pivotResponse$p2=this.pivotResponse.pivotAliasVsField[alias])||void 0===_this$pivotResponse$p2?void 0:_this$pivotResponse$p2.dataTypeEnum)},getFieldLabel:function(alias,field,fieldDisplayName){return fieldDisplayName||(field.displayName?field.displayName:this.pivotResponse&&this.pivotResponse.pivotAliasVsField[alias]&&this.pivotResponse.pivotAliasVsField[alias].displayName?this.pivotResponse.pivotAliasVsField[alias].displayName:this.builderConfig.templateJSON.columnFormatting[alias].label)},getField:function(alias,field){return field.dataType?field:this.pivotResponse&&this.pivotResponse.pivotAliasVsField[alias]?this.pivotResponse.pivotAliasVsField[alias]:{}},pivotDimentionAdded:function(row,lookupField){var alias="row_".concat((0,utility_methods/* getUniqueCharAlias */.ip)(this.pivotConfigDimentions.map((function(row){return row.alias.split("_")[1]})))),field={};field=lookupField?row:row.primary;var rowObj={field:field,aggr:field.aggr?field.aggr:0,lookupFieldId:lookupField?lookupField.id:-1,alias:alias,moduleName:lookupField&&null!==lookupField&&void 0!==lookupField&&lookupField.lookupModule?lookupField.lookupModule.name:null,fieldDisplayName:field.displayName};return(null===row||void 0===row?void 0:row.selectedTimeAggr)>=0&&(rowObj.selectedTimeAggr=row.selectedTimeAggr),rowObj.field.aggr=0,rowObj},loadPivotBaseModuleMeta:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleMetaResp,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("v2/modules/meta/".concat(_this8.pivotBaseModuleName));case 2:moduleMetaResp=_context2.sent,data=moduleMetaResp.data,error=moduleMetaResp.error,error?_this8.$message.error("Error fetching base module meta"):(_this8.pivotBaseModule=JSON.parse(JSON.stringify(data.meta)),_this8.activeModule=_this8.pivotBaseModule.name,_this8.$emit("dimensionsLoaded"),_this8.showLoader=!1);case 5:case"end":return _context2.stop()}}),_callee2)})))()},pivotDimentionRemoved:function(dimention){this.$emit("deleteRowValue",dimention.alias)},pivotDimenetionUpdated:function(_ref){var added=_ref.added;if(added){var rowObj=added.element,formatConfig=this.defaultColFormat.rowColumn;formatConfig.label=rowObj.field.displayName,this.pivotColumnFormat[rowObj.alias]=(0,objectSpread2/* default */.Z)({},formatConfig)}this.$emit("pivotDimentionUpdated",{dimentions:this.pivotConfigDimentions,formats:this.pivotColumnFormat})},openUserFilter:function(){this.$emit("openUserFilter")},setTimeAggrIdVsMap:function(){var _this9=this;PivotDefaults/* timeAggregation */.tP.forEach((function(aggr){_this9.timeAggregationMap[aggr.value]=aggr.label}))}}},Components_PivotDimentionsvue_type_script_lang_js=PivotDimentionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(Components_PivotDimentionsvue_type_script_lang_js,PivotDimentionsvue_type_template_id_3d0631f6_render,PivotDimentionsvue_type_template_id_3d0631f6_staticRenderFns,!1,null,null,null)
/* harmony default export */,PivotDimentions=component.exports,PivotMeasuresvue_type_template_id_76605bf7_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-measures"},[_c("div",{staticClass:"title-section pB15"},[_c("div",{staticClass:"title"},[_vm._v(" "+_vm._s(_vm.$t("pivot.measures"))+" ")]),_c("div",{staticClass:"hr-line"})]),_c("div",{staticClass:"pivot-dimention-list"},[_vm.showLoader?_c("skeletonLoader",{attrs:{rowCount:3,width:"186.5px",height:"28px"}}):_vm._e(),_vm.pivotBaseModuleName&&!_vm.showLoader?_c("div",{staticClass:"original-list-row"},[_vm.isReadingModule?_c("div",[_c("div",{staticClass:"choose-data-module-type mT5",staticStyle:{width:"186.5px"}},[_c("div",[_vm.showMeasuresSearch?_vm._e():_c("i",{staticClass:"el-icon-search search-bar-icon",staticStyle:{color:"#cacdd4",height:"13px",width:"13px"},on:{click:function($event){_vm.showMeasuresSearch=!_vm.showMeasuresSearch}}})]),_c("div",{staticClass:"vertical-divider"}),_vm.showMeasuresSearch?_vm._e():_c("div",{staticClass:"measures-filter-selector"},[_vm.filterBtn?_c("div",{staticClass:"measures-filter-btn",class:_vm.isReadingModuleSet?"":"filter-active",staticStyle:{"padding-left":"2px",width:"50px",height:"20px","padding-bottom":"1px"},on:{click:function($event){return _vm.setAllModuleType()}}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/doubletick",iconClass:_vm.isReadingModuleSet?_vm.isReadingModuleSet?"icon filter-pivot-svg pivot-disabled-btn scale3":"":"icon filter-pivot-svg pivot-filter-active scale3"}}),_c("div",[_c("span",{staticClass:"fW500"},[_vm._v(_vm._s(_vm.$t("pivot.all")))])])],1):_vm._e(),_vm.filterBtn?_c("div",{staticClass:"measures-filter-btn",class:_vm.isReadingModuleSet?"filter-active":"",staticStyle:{width:"90px","padding-left":"3px",height:"20px","padding-bottom":"1px"},on:{click:function($event){return _vm.setReadingModuleType()}}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/hashsquare",iconClass:_vm.isReadingModuleSet?"icon filter-pivot-svg pivot-filter-active":_vm.isReadingModuleSet?"":"icon filter-pivot-svg pivot-disabled-btn"}}),_c("div",[_c("span",{staticClass:"fW500"},[_vm._v(_vm._s(_vm.$t("pivot.readings")))])])],1):_vm._e()]),_vm.showMeasuresSearch?_c("div",{staticClass:"search-bar"},[_c("el-input",{staticClass:"pivot-search-box",attrs:{size:"small",placeholder:"Search..."},model:{value:_vm.pivotDimentionSearch,callback:function($$v){_vm.pivotDimentionSearch=$$v},expression:"pivotDimentionSearch"}},[_vm.showMeasuresSearch?_c("template",{slot:"prefix"},[_c("i",{staticClass:"el-icon-search mT8",on:{click:function($event){!_vm.showMeasuresSearch&&(_vm.showMeasuresSearch=!_vm.showMeasuresSearch)}}})]):_vm._e(),_vm.showMeasuresSearch?_c("template",{slot:"suffix"},[_c("i",{staticClass:"el-icon-close ",staticStyle:{"margin-top":"6px",cursor:"pointer"},on:{click:function($event){_vm.showMeasuresSearch=!_vm.showMeasuresSearch}}})]):_vm._e()],2)],1):_vm._e(),_vm._m(0)])]):_vm._e(),_vm.isReadingModule?_vm._e():_c("div",{staticClass:"search-bar"},[_c("el-input",{staticClass:"pivot-search-box",attrs:{size:"small",placeholder:"Search...","prefix-icon":"el-icon-search"},model:{value:_vm.pivotDimentionSearch,callback:function($$v){_vm.pivotDimentionSearch=$$v},expression:"pivotDimentionSearch"}})],1),_vm.reRender&&_vm.dataModuleType==_vm.PIVOT_DATA_MODULE_TYPE.MODULE?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.nullifyActiveRow,expression:"nullifyActiveRow"}],staticClass:"modules-and-fields-list"},[_c("el-collapse",{attrs:{accordion:""},model:{value:_vm.activeRealtedModuleName,callback:function($$v){_vm.activeRealtedModuleName=$$v},expression:"activeRealtedModuleName"}},[_c("el-collapse-item",{attrs:{name:_vm.pivotBaseModule.name}},[_c("template",{slot:"title"},[_c("div",{staticClass:"module-title-icon-section",staticStyle:{"margin-left":"2px"}},[_c("div",{staticClass:"module-icon-section"},[_c("img",{attrs:{src:__webpack_require__(148140),width:"14px",height:"16px"}})]),_c("div",{staticClass:"module-name-section base-module-name"},[_vm._v(" "+_vm._s(_vm.pivotBaseModule.displayName)+" ")])])]),_c("div",{staticClass:"original-list-row-full"},[0==_vm.pivotFilteredDimentions.length?_c("div",{staticClass:"task-handle mR10",staticStyle:{"padding-left":"27px"}},[_vm._v(" No Data ")]):_c("draggable",{staticClass:"dragArea list-group",attrs:{list:_vm.pivotFilteredDimentions,group:{name:"pivotMeasures",pull:"clone",put:!1},options:_vm.draggableOptions,clone:_vm.pivotMeasureAdded},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1}}},_vm._l(_vm.pivotFilteredDimentions,(function(row,index){return _c("div",{key:index,staticClass:"field-row one",style:_vm.activeRow==row.primary.uuid?"background-color: #ecf0f6;":"",on:{click:function($event){$event.stopPropagation(),_vm.activeRow==row.primary.uuid?_vm.activeRow=null:_vm.activeRow=row.primary.uuid}}},[_c("div",{staticClass:"task-handle pointer"},[_c("i",{staticClass:"fa fa-hashtag field-icon"})]),_c("div",{staticClass:"row-body-section"},[_c("div",{class:_vm.activeRow==row.primary.uuid?"mT-auto mB-auto each-row active-row-width":"mT-auto mB-auto each-row"},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start",content:row.primary.displayName,"open-delay":1e3}},[_c("span",[_vm._v(_vm._s(row.primary.displayName))])])],1),_c("div",{staticClass:"move-row-button",style:_vm.activeRow==row.primary.uuid?"display:inline;padding-top:6px;padding-right:2px;":"",on:{click:function($event){return _vm.moveRow(row)}}},[_c("img",{attrs:{src:__webpack_require__(712016),width:"15px",height:"15px"}})]),_vm.showAggr?_c("div",{staticClass:"aggr-select-option mR10",style:_vm.activeRow==row.primary.uuid?"display:inline":"padding-top:4px;"},[_c("el-select",{attrs:{filterable:"",size:"mini",placeholder:"Aggr","popper-class":"fc-group-select","value-key":"label"},on:{focus:function($event){_vm.activeRow=row.primary.uuid},change:function($event){return _vm.reRenderMeasures()}},model:{value:row.selectedAggr,callback:function($$v){_vm.$set(row,"selectedAggr",$$v)},expression:"row.selectedAggr"}},_vm._l(row.aggrOptions,(function(aggr){return _c("el-option",{key:aggr.label,attrs:{label:aggr.label,value:aggr.value},on:{click:function($event){$event.stopPropagation()}}})})),1)],1):_vm._e()])])})),0)],1)],2)],1),_vm.isRelatedFieldsAvailable?_vm._e():_c("div",{staticClass:"related-header"},[_vm._v(" "+_vm._s(_vm.$t("pivot.related"))+" ")]),_vm._l(_vm.filteredRealatedModuleMeasures,(function(relatedModuleObj,index1){return _c("div",{key:"related-modules-list"+index1,staticClass:"related-modules-list",on:{click:function($event){return $event.stopPropagation(),_vm.scrollAdjust($event)}}},[_c("el-collapse",{attrs:{accordion:""},model:{value:_vm.activeRealtedModuleName,callback:function($$v){_vm.activeRealtedModuleName=$$v},expression:"activeRealtedModuleName"}},[relatedModuleObj.fields.length>0?_c("el-collapse-item",{attrs:{name:relatedModuleObj.moduleName}},[_c("template",{slot:"title"},[_c("div",{staticClass:"module-title-icon-section",staticStyle:{"margin-left":"2px"}},[_c("div",{staticClass:"module-icon-section"},[_c("img",{attrs:{src:__webpack_require__(148140),width:"14px",height:"16px"}})]),_c("div",{staticClass:"module-name-section"},[_vm._v(" "+_vm._s(relatedModuleObj.moduleObj.displayName)+" ")])])]),_c("div",{staticClass:"original-list-row-full"},[_c("draggable",{staticClass:"dragArea list-group",attrs:{list:relatedModuleObj.fields,group:{name:"pivotMeasures",pull:"clone",put:!1},options:_vm.draggableOptions,clone:function(field){return _vm.pivotSubModuleMeasureAdded(field,relatedModuleObj.moduleObj)}},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1}}},_vm._l(relatedModuleObj.fields,(function(row,index){return _c("div",{key:index,staticClass:"field-row two",style:_vm.activeRow==row.primary.uuid?"background-color: #ecf0f6;":"",attrs:{id:"rml"+index1+"-row2-"+index},on:{click:function($event){$event.stopPropagation(),_vm.activeRow==row.primary.uuid?_vm.activeRow=null:_vm.activeRow=row.primary.uuid}}},[_c("div",{staticClass:"task-handle  pointer"},[_c("i",{staticClass:"fa fa-hashtag field-icon"})]),_c("div",{staticClass:"row-body-section"},[_c("div",{class:_vm.activeRow==row.primary.uuid?"mT-auto mB-auto each-row active-row-width":"mT-auto mB-auto each-row"},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start",content:row.primary.displayName,"open-delay":1e3}},[_c("span",[_vm._v(_vm._s(row.primary.displayName))])])],1),_c("div",{staticClass:"move-row-button",style:_vm.activeRow==row.primary.uuid?"display:inline;padding-top:6px;padding-right:2px;":"",on:{click:function($event){return _vm.moveRow(row)}}},[_c("img",{attrs:{src:__webpack_require__(712016),width:"15px",height:"15px"}})]),_vm.relatedShowAggr?_c("div",{staticClass:"aggr-select-option",style:_vm.activeRow==row.primary.uuid?"display:inline":"padding-top:4px;"},[_c("el-select",{attrs:{filterable:"","default-first-option":"",size:"mini",placeholder:"Aggr","popper-class":"fc-group-select","value-key":"label"},on:{focus:function($event){_vm.activeRow=row.primary.uuid},change:function($event){return _vm.reRenderRelatedMeasures()}},model:{value:row.selectedAggr,callback:function($$v){_vm.$set(row,"selectedAggr",$$v)},expression:"row.selectedAggr"}},_vm._l(row.aggrOptions,(function(aggr){return _c("el-option",{key:aggr.label,attrs:{label:aggr.label,value:aggr.value},on:{click:function($event){$event.stopPropagation()}}})})),1)],1):_vm._e()])])})),0)],1)],2):_vm._e()],1)],1)})),_vm.isReadingModule?_c("div",{staticClass:"related-header"},[_vm._v(" "+_vm._s(_vm.$t("pivot.readings"))+" ")]):_vm._e(),_vm._l(_vm.searchReadingMeasures,(function(asset_categroy,index1){return _vm.isReadingModule?_c("div",{key:"related-readings-list"+index1,staticClass:"related-readings-list",on:{click:function($event){return $event.stopPropagation(),_vm.scrollReadingAdjust($event)}}},[_c("el-collapse",{attrs:{accordion:""},on:{change:function($event){return _vm.loadAssetReadingFields(asset_categroy)}},model:{value:_vm.activeRelatedReadingCategory,callback:function($$v){_vm.activeRelatedReadingCategory=$$v},expression:"activeRelatedReadingCategory"}},[_c("el-collapse-item",[_c("template",{slot:"title"},[_c("div",{staticClass:"module-title-icon-section",staticStyle:{"margin-left":"2px"}},[_c("div",{staticClass:"module-icon-section"},[_c("fc-icon",{staticStyle:{scale:"0.8"},attrs:{group:"action",name:"asset-category",color:"#ff3184"}})],1),_c("div",{staticClass:"module-name-section"},[asset_categroy.displayName?_c("span",[_vm._v(" "+_vm._s(asset_categroy.displayName)+" ")]):_c("span",[_vm._v(" "+_vm._s(asset_categroy.name)+" ")])])])]),_c("div",{staticClass:"original-list-row-full"},[_vm.isReadingsLoading?_c("div",{staticClass:"task-handle mR10",staticStyle:{"padding-left":"27px"}},[_c("skeletonLoader",{attrs:{rowCount:2,width:"186.5px",height:"28px"}})],1):asset_categroy.readings&&0==asset_categroy.readings.length?_c("div",{staticClass:"task-handle mR10",staticStyle:{"padding-left":"27px"}},[_vm._v(" "+_vm._s(_vm.$t("pivot.empty_reading"))+" ")]):_vm._e(),_c("draggable",{staticClass:"dragArea list-group reading-box-height",attrs:{list:asset_categroy.readings,group:{name:"pivotMeasures",pull:"clone",put:!1},options:_vm.draggableOptions,clone:_vm.pivotReadingsAdded},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1}}},_vm._l(asset_categroy.readings,(function(row,index){return _c("div",{key:index,staticClass:"field-row two",style:_vm.activeRow==row.primary.uuid?"background-color: #ecf0f6;":"",attrs:{id:"rml"+index1+"-row2-"+index},on:{click:function($event){$event.stopPropagation(),_vm.activeRow==row.primary.uuid?_vm.activeRow=null:_vm.activeRow=row.primary.uuid}}},[_c("div",{staticClass:"task-handle  pointer"},[_c("InlineSvg",{attrs:{src:"svgs/pivot/hashsquare",iconClass:"icon readings-icon"}})],1),_c("div",{staticClass:"row-body-section"},[_c("div",{class:_vm.activeRow==row.primary.uuid?"mT-auto mB-auto each-row active-row-width":"mT-auto mB-auto each-row"},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start",content:row.primary.displayName,"open-delay":1e3}},[_c("span",[_vm._v(_vm._s(row.primary.displayName))])])],1),_c("div",{staticClass:"move-row-button",style:_vm.activeRow==row.primary.uuid?"display:inline;padding-top:6px;padding-right:2px;":"",on:{click:function($event){return _vm.moveReadingRow(row)}}},[_c("img",{attrs:{src:__webpack_require__(712016),width:"15px",height:"15px"}})]),_vm.relatedShowAggr?_c("div",{staticClass:"aggr-select-option",style:_vm.activeRow==row.primary.uuid?"display:inline":"padding-top:4px;"},[_c("el-select",{attrs:{filterable:"","default-first-option":"",size:"mini",placeholder:"Aggr","popper-class":"fc-group-select","value-key":"label"},on:{focus:function($event){_vm.activeRow=row.primary.uuid},change:function($event){return _vm.reRenderRelatedMeasures()}},model:{value:row.selectedAggr,callback:function($$v){_vm.$set(row,"selectedAggr",$$v)},expression:"row.selectedAggr"}},_vm._l(row.aggrOptions,(function(aggr){return _c("el-option",{key:aggr.label,attrs:{label:aggr.label,value:aggr.value},on:{click:function($event){$event.stopPropagation()}}})})),1)],1):_vm._e()])])})),0)],1)],2)],1)],1):_vm._e()}))],2):_vm._e(),_vm.reRender&&_vm.dataModuleType==_vm.PIVOT_DATA_MODULE_TYPE.READING?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.nullifyActiveRow,expression:"nullifyActiveRow"}],staticClass:"modules-and-fields-list"},[_c("div",{staticClass:"related-header"},[_vm._v(" "+_vm._s(_vm.$t("pivot.readings"))+" ")]),_vm._l(_vm.searchReadingMeasures,(function(asset_categroy,index1){return _c("div",{key:"related-modules-list"+index1,staticClass:"related-modules-list",on:{click:function($event){return $event.stopPropagation(),_vm.scrollAdjust($event)}}},[_c("el-collapse",{attrs:{accordion:""},on:{change:function($event){return _vm.loadAssetReadingFields(asset_categroy)}},model:{value:_vm.activeRelatedReadingCategory,callback:function($$v){_vm.activeRelatedReadingCategory=$$v},expression:"activeRelatedReadingCategory"}},[_c("el-collapse-item",[_c("template",{slot:"title"},[_c("div",{staticClass:"module-title-icon-section",staticStyle:{"margin-left":"2px"}},[_c("div",{staticClass:"module-icon-section"},[_c("fc-icon",{staticStyle:{scale:"0.8"},attrs:{group:"action",name:"asset-category",color:"#ff3184"}})],1),_c("div",{staticClass:"module-name-section"},[asset_categroy.displayName?_c("span",[_vm._v(" "+_vm._s(asset_categroy.displayName)+" ")]):_c("span",[_vm._v(" "+_vm._s(asset_categroy.name)+" ")])])])]),_c("div",{staticClass:"original-list-row-full"},[_vm.isReadingsLoading?_c("div",{staticClass:"task-handle mR10",staticStyle:{"padding-left":"27px"}},[_c("skeletonLoader",{attrs:{rowCount:2,width:"186.5px",height:"28px"}})],1):asset_categroy.readings&&0==asset_categroy.readings.length?_c("div",{staticClass:"task-handle mR10",staticStyle:{"padding-left":"27px"}},[_vm._v(" "+_vm._s(_vm.$t("pivot.empty_reading"))+" ")]):_vm._e(),_c("draggable",{staticClass:"dragArea list-group reading-box-height",attrs:{list:asset_categroy.readings,group:{name:"pivotMeasures",pull:"clone",put:!1},options:_vm.draggableOptions,clone:_vm.pivotReadingsAdded},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1}}},_vm._l(asset_categroy.readings,(function(row,index){return _c("div",{key:index,staticClass:"field-row two",style:_vm.activeRow==row.primary.uuid?"background-color: #ecf0f6;":"",attrs:{id:"rml"+index1+"-row2-"+index},on:{click:function($event){$event.stopPropagation(),_vm.activeRow==row.primary.uuid?_vm.activeRow=null:_vm.activeRow=row.primary.uuid}}},[_c("div",{staticClass:"task-handle  pointer",staticStyle:{scale:"0.8"}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/hashsquare",iconClass:"icon readings-icon"}})],1),_c("div",{staticClass:"row-body-section"},[_c("div",{class:_vm.activeRow==row.primary.uuid?"mT-auto mB-auto each-row active-row-width":"mT-auto mB-auto each-row"},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start",content:row.primary.displayName,"open-delay":1e3}},[_c("span",[_vm._v(_vm._s(row.primary.displayName))])])],1),_c("div",{staticClass:"move-row-button",style:_vm.activeRow==row.primary.uuid?"display:inline;padding-top:6px;padding-right:2px;":"",on:{click:function($event){return _vm.moveReadingRow(row)}}},[_c("img",{attrs:{src:__webpack_require__(712016),width:"15px",height:"15px"}})]),_vm.relatedShowAggr?_c("div",{staticClass:"aggr-select-option",style:_vm.activeRow==row.primary.uuid?"display:inline":"padding-top:4px;"},[_c("el-select",{attrs:{filterable:"","default-first-option":"",size:"mini",placeholder:"Aggr","popper-class":"fc-group-select","value-key":"label"},on:{focus:function($event){_vm.activeRow=row.primary.uuid},change:function($event){return _vm.reRenderRelatedMeasures()}},model:{value:row.selectedAggr,callback:function($$v){_vm.$set(row,"selectedAggr",$$v)},expression:"row.selectedAggr"}},_vm._l(row.aggrOptions,(function(aggr){return _c("el-option",{key:aggr.label,attrs:{label:aggr.label,value:aggr.value},on:{click:function($event){$event.stopPropagation()}}})})),1)],1):_vm._e()])])})),0)],1)],2)],1)],1)}))],2):_vm._e()]):_vm._e(),_vm._m(1),_c("div",{staticClass:"new-list-row"},[_c("div",{staticClass:"row-header"},[_c("div",{staticClass:"title-header"},[_c("img",{staticStyle:{"margin-top":"5px",transform:"scale(1.5)"},attrs:{src:__webpack_require__(279967),width:"12px",height:"12px"}}),_c("span",{staticStyle:{"margin-top":"5px","padding-left":"5px",position:"absolute"}},[_vm._v(_vm._s(_vm.$t("pivot.values")))])]),_c("div",{staticClass:"add-function-btn"},[_c("div",[_c("el-button",{staticClass:"el-button function-icon-button setup-el-btn",attrs:{disabled:_vm.isNoConfig},on:{click:_vm.openAddFormulaDialog}},[_c("div",{staticClass:"function-btn-inside-container"},[_vm._v(" "+_vm._s(_vm.$t("pivot.addFunction"))+" ")])])],1)])]),_vm.showLoader?_c("skeletonLoader",{attrs:{rowCount:1,width:"186.5px",height:"28px"}}):_vm._e(),_vm.showLoader?_vm._e():_c("draggable",{staticClass:"dragArea list-group new-list",class:{"dragging-active":_vm.isDraggingActive},attrs:{list:_vm.pivotConfigMeasures,options:_vm.draggableOptions},on:{start:function($event){_vm.isDraggingActive=!0},end:function($event){_vm.isDraggingActive=!1},change:_vm.pivotMeasureUpdated}},[_vm._l(_vm.pivotConfigMeasures,(function(data,index){return _c("div",{key:index,staticClass:"field-row-new",class:{activeMeasure:_vm.activeColumn===data.alias},on:{click:function($event){return $event.stopPropagation(),_vm.triggerActiveColumn(data)},mouseenter:function($event){_vm.rowHover=data.alias},mouseleave:function($event){_vm.rowHover=null}}},[_c("el-tooltip",{staticClass:"fld-tooltip",attrs:{effect:"dark",placement:"top-start","open-delay":1e3}},[_c("div",{attrs:{slot:"content"},slot:"content"},[data.moduleMeasure&&data.moduleMeasure.aggr?_c("span",[_vm._v(" "+_vm._s(_vm.aggrMap[data.moduleMeasure.aggr]+" ( "+data.fieldDisplayName+" ) ")+" ")]):_c("span",[_vm._v(" "+_vm._s(data.fieldDisplayName)+" ")])]),_c("div",[data.valueType===_vm.valueType.DATA&&data.moduleMeasure&&data.moduleMeasure.moduleType==_vm.PIVOT_DATA_MODULE_TYPE.READING?_c("div",{staticStyle:{"padding-bottom":"3px","padding-right":"3px",scale:"0.8"}},[_c("InlineSvg",{attrs:{src:"svgs/pivot/hashsquare",iconClass:"icon readings-icon"}})],1):data.valueType===_vm.valueType.DATA?_c("div",{staticClass:"value-icon"},[_c("i",{staticClass:"fa fa-hashtag field-icon",style:_vm.activeColumn===data.alias?"color:white":""})]):_vm.activeColumn===data.alias?_c("div",{staticClass:"function-icon"},[_c("img",{attrs:{src:__webpack_require__(616693),width:"12px",height:"12px"}})]):_c("div",{staticClass:"function-icon"},[_c("img",{attrs:{src:__webpack_require__(857539),width:"12px",height:"12px"}})]),_c("div",{staticClass:"mT-auto mB-auto field-label-area"},[_c("div",{staticClass:"field-label-container",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[_vm._v(" "+_vm._s(data.fieldDisplayName)+" ")])]),_c("div",{staticClass:"mL-auto mT-auto mB-auto"},[_c("div",{staticClass:"inline",staticStyle:{display:"flex","align-items":"center"}},[_c("div",{staticClass:"pointer pivot-icon-hover config-pivot-icon",staticStyle:{padding:"3px 7px",scale:"0.7"},on:{click:function(){return _vm.openPivotMeasureSettings(data)}}},[data.valueType===_vm.valueType.DATA?_c("InlineSvg",{attrs:{src:"svgs/pivot/config",iconClass:"icon icon-sm15 iconmT3"}}):_c("InlineSvg",{attrs:{src:"svgs/pivot/edit",iconClass:"icon edit-pivot-svg"}})],1),_c("i",{staticClass:"el-icon-close pointer field-icon-new pivot-icon-hover",style:_vm.activeColumn===data.alias?"color:white":"",on:{click:function($event){return $event.stopPropagation(),function(){return _vm.pivotMeasureRemoved(data)}.apply(null,arguments)}}})])])])])],1)})),0==_vm.pivotConfigMeasures.length?_c("div",{key:677,staticClass:"config-instruction-section"},[_vm._v(" "+_vm._s(_vm.$t("pivot.dropMeasures"))+" ")]):_vm._e()],2)],1),_vm.showAddFormulaDialog?_c("PivotFormulaDialogNew",{attrs:{visibility:_vm.showAddFormulaDialog,moduleName:_vm.pivotBaseModuleName,formatConfig:_vm.formatConfig,editConfig:_vm.editConfig,label:_vm.label,pivotFieldMap:_vm.pivotFieldMap},on:{"update:visibility":function($event){_vm.showAddFormulaDialog=$event},save:_vm.pivotFormulaAdded,update:_vm.pivotFormulaUpdated}}):_vm._e()],1),_vm.showMeasureSettings?_c("pivot-measure-settings-dialog-box",{attrs:{visibility:_vm.showMeasureSettings,moduleName:_vm.pivotMeasuresSettings.moduleName,baseModuleName:_vm.pivotBaseModuleName,config:_vm.pivotMeasuresSettings.config,fields:_vm.pivotMeasuresSettings.fields},on:{"update:visibility":function($event){_vm.showMeasureSettings=$event},updatePivotMeasureSettings:_vm.updatePivotMeasureSettings}}):_vm._e()],1)},PivotMeasuresvue_type_template_id_76605bf7_staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"vertical-line-split"},[_c("div",{staticClass:"vertical-line"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"vertical-line-split"},[_c("div",{staticClass:"vertical-line"})])}],PivotFormulaDialogNewvue_type_template_id_44ec1bbe_scoped_true_render=(__webpack_require__(162506),__webpack_require__(821694),__webpack_require__(821057),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("base-dialog-box",{attrs:{visibility:_vm.visibility,onConfirm:_vm.save,onCancel:_vm.closeDialog,disableConfirm:!_vm.columnName||!_vm.expression||!_vm.dataTypeEnum,cancelText:"Cancel",confirmText:"Save",title:_vm.$t("pivot.valueBased"),width:"650px"},on:{"update:visibility":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"dialog-content-body",staticStyle:{"margin-bottom":"20px"},attrs:{slot:"body"},slot:"body"},[_c("el-row",{staticClass:"mT20"},[_c("el-row",{staticClass:"pivot-formula-dialog-text"},[_vm._v(" "+_vm._s(_vm.$t("pivot.measureName"))+" ")]),_c("el-row",[_c("el-input",{staticClass:"fc-input-full-border2 mT10",attrs:{placeholder:"Measure Name"},model:{value:_vm.columnName,callback:function($$v){_vm.columnName=$$v},expression:"columnName"}})],1)],1),_c("el-row",{staticClass:"mT20"},[_c("el-row",[_c("el-col",{staticClass:"pivot-formula-dialog-text",attrs:{span:18}},[_vm._v(" "+_vm._s(_vm.$t("pivot.expression"))+" ")]),_c("el-col",{staticClass:"pivot-formula-dialog-text",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.$t("pivot.dataType"))+" ")])],1),_c("el-row",{staticClass:"mB10"},[_c("el-col",{attrs:{span:18}},[_c("el-input",{staticClass:"fc-input-full-border2 mT10  width90",attrs:{placeholder:"A + B"},model:{value:_vm.expression,callback:function($$v){_vm.expression=$$v},expression:"expression"}})],1),_c("el-col",{attrs:{span:6}},[_c("el-select",{staticClass:"fc-input-full-border-select2 mT10 module-date-field-select",attrs:{filterable:"",placeholder:"Select"},model:{value:_vm.dataTypeEnum,callback:function($$v){_vm.dataTypeEnum=$$v},expression:"dataTypeEnum"}},_vm._l(_vm.dataTypeOptions,(function(data,index){return _c("el-option",{key:"module-date-field-option"+index,attrs:{label:data.displayName,value:data.value}})})),1)],1)],1)],1),_c("div",{staticClass:"fbVariableLegendContainer mT10 formulalengendscontainer"},[_c("div",{staticClass:"mB10 columns-title"},[_vm._v(" "+_vm._s(_vm.$t("pivot.columns"))+" ")]),_vm._l(_vm.pivotFieldMap,(function(point,index){return _c("div",{key:index,staticClass:"fbVariableLegend"},[_c("div",{staticClass:"variableAliasContainer"},[_vm._v(" "+_vm._s(point.paramAlias)+" ")]),_c("div",{staticClass:"variableLabelContainer"},[_vm._v(_vm._s(point.label))])])}))],2)],1)])],1)}),PivotFormulaDialogNewvue_type_template_id_44ec1bbe_scoped_true_staticRenderFns=[],BaseDialogBox=(__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(857267),__webpack_require__(503658)),PivotFormulaDialogNewvue_type_script_lang_js={props:["visibility","editConfig","pivotFieldMap","index","label","moduleName","formatConfig"],computed:{paramsMap:function(){var params={};return this.pivotFieldMap.forEach((function(pivotField){params[pivotField.paramAlias]=pivotField.alias})),params}},components:{BaseDialogBox:BaseDialogBox/* default */.Z},data:function(){return{meta:{},columnName:null,expression:null,dataTypeEnum:null,variablesUsedInExp:[],variableMap:{},dataTypeOptions:[{displayName:"Date",value:"DATE_TIME"},{displayName:"String",value:"STRING"},{displayName:"Number",value:"NUMBER"},{displayName:"Decimal",value:"DECIMAL"},{displayName:"Boolean",value:"BOOLEAN"}]}},created:function(){this.editConfig&&(this.columnName=this.label,this.expression=this.editConfig.expression,this.dataTypeEnum=this.editConfig.dataTypeEnum)},methods:{closeDialog:function(){this.$emit("update:visibility",!1)},initExpressionParams:function(){var _this=this,params=Object.keys(this.paramsMap),regExString=/\(|\)|\+|\-|\\|\*|\/|\ |\%|\~|\&|\^|\>|\<|\=|\!/,expressionArray=this.expression.split(regExString);return expressionArray.forEach((function(variable){variable=variable.replace(" ","");var index=params.findIndex((function(p){return p==variable}));if(-1!=index){var alias=_this.paramsMap[variable];_this.variablesUsedInExp.push(alias),_this.variableMap[alias]=variable}})),this.expression},save:function(){if(this.columnName&&this.expression||null!=this.dataType){this.initExpressionParams();var config={columnName:this.columnName,dataTypeEnum:this.dataTypeEnum,moduleName:this.moduleName,expression:this.expression,variableMap:this.variableMap,field:null,criteria:null},formatting=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},PivotDefaults/* defaultColFormat */.WW.formulaColumn),{},{label:this.columnName});this.editConfig?(config.alias=this.editConfig.alias,this.$emit("update",{params:{formula:config,formatting:formatting},index:this.index})):this.$emit("save",{formula:config,formatting:formatting})}}}},Components_PivotFormulaDialogNewvue_type_script_lang_js=PivotFormulaDialogNewvue_type_script_lang_js,PivotFormulaDialogNew_component=(0,componentNormalizer/* default */.Z)(Components_PivotFormulaDialogNewvue_type_script_lang_js,PivotFormulaDialogNewvue_type_template_id_44ec1bbe_scoped_true_render,PivotFormulaDialogNewvue_type_template_id_44ec1bbe_scoped_true_staticRenderFns,!1,null,"44ec1bbe",null)
/* harmony default export */,PivotFormulaDialogNew=PivotFormulaDialogNew_component.exports,PivotMeasureSettingsDialogBoxvue_type_template_id_057725e1_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("base-dialog-box",{attrs:{visibility:_vm.visibility,onConfirm:_vm.saveModuleName,onCancel:_vm.cancelEdit,cancelText:"Cancel",confirmText:"Save",title:"Value Based On",width:"650px"},on:{"update:visibility":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"dialog-content-body",staticStyle:{"margin-bottom":"20px"},attrs:{slot:"body"},slot:"body"},[_c("div",{staticClass:"data-config-section"},[_c("el-row",{staticClass:"config-row",staticStyle:{"padding-bottom":"10px"}},[_c("el-col",{attrs:{span:6}},["2"==_vm.config.moduleType||2==_vm.config.moduleType?_c("div",{staticClass:"config-label"},[_vm._v(" "+_vm._s(_vm.$t("pivot.preferences"))+" ")]):_c("div",{staticClass:"config-label"},[_vm._v(" "+_vm._s(_vm.$t("pivot.dateFilter"))+" ")])]),"1"==_vm.config.moduleType||1==_vm.config.moduleType?_c("el-col",{attrs:{span:12}},[_c("el-switch",{staticStyle:{"margin-top":"10px"},attrs:{disabled:"2"===_vm.config.moduleType},model:{value:_vm.enableTimelineFilter,callback:function($$v){_vm.enableTimelineFilter=$$v},expression:"enableTimelineFilter"}})],1):_vm._e()],1),!_vm.enableTimelineFilter||"1"!==_vm.config.moduleType&&1!=_vm.config.moduleType?_vm._e():_c("el-row",{staticClass:"config-row mL15"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"config-label"},[_vm._v(" "+_vm._s(_vm.$t("pivot.dateField"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Select"},model:{value:_vm.configLocal.dateFieldId,callback:function($$v){_vm.$set(_vm.configLocal,"dateFieldId",$$v)},expression:"configLocal.dateFieldId"}},_vm._l(_vm.dateFieldOptions,(function(dateField,index){return _c("el-option",{key:"module-date-field-option"+index,attrs:{label:dateField.displayName,value:dateField.id}})})),1)],1)],1),_vm.enableTimelineFilter?_c("el-row",{staticClass:"config-row mL15"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"config-label"},[_vm._v(" "+_vm._s(_vm.$t("pivot.period"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Select"},model:{value:_vm.configLocal.datePeriod,callback:function($$v){_vm.$set(_vm.configLocal,"datePeriod",$$v)},expression:"configLocal.datePeriod"}},_vm._l(_vm.datePeriodOptions,(function(datePeriod,index){return _c("el-option",{key:"module-date-period"+index,attrs:{label:datePeriod.label,value:datePeriod.dateOperator}})})),1)],1)],1):_vm._e(),_vm.enableTimelineFilter?_c("el-row",{staticClass:"config-row mL15"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"config-label"},[_vm._v(" "+_vm._s(_vm.$t("pivot.baseline"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Select"},model:{value:_vm.configLocal.baselineLabel,callback:function($$v){_vm.$set(_vm.configLocal,"baselineLabel",$$v)},expression:"configLocal.baselineLabel"}},_vm._l(_vm.baselinePeriodOptions,(function(datePeriod,index){return _c("el-option",{key:"module-base-period"+index,attrs:{label:datePeriod.name,value:datePeriod.name}})})),1)],1)],1):_vm._e(),20==_vm.configLocal.datePeriod?_c("el-row",{staticClass:"config-row mL15"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"config-label"},[_vm._v(" "+_vm._s(_vm.$t("pivot.customRange"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-date-picker",{staticClass:"fc-input-full-border2",staticStyle:{width:"69% !important","border-radius":"5px !important"},attrs:{type:"datetimerange",placeholder:"Select start date and time","value-format":"timestamp"},model:{value:_vm.customDateRange,callback:function($$v){_vm.customDateRange=$$v},expression:"customDateRange"}})],1)],1):_vm._e(),"2"==_vm.config.moduleType||2==_vm.config.moduleType?_c("el-row",{staticClass:"config-row mL15"},[_c("el-col",[_c("div",[_c("span",[_vm._v(_vm._s(_vm.$t("pivot.exclude_global_time_filter")))]),_c("el-checkbox",{staticStyle:{"margin-left":"95px"},model:{value:_vm.configLocal.excludeFromTimelineFilter,callback:function($$v){_vm.$set(_vm.configLocal,"excludeFromTimelineFilter",$$v)},expression:"configLocal.excludeFromTimelineFilter"}})],1)])],1):_vm._e()],1),_vm.showHideCriteria?_c("div",{staticClass:"mT35"},[_c("span",[_vm._v("Criteria")]),_c("el-switch",{staticStyle:{"margin-left":"95px"},model:{value:_vm.criteriaEnabled,callback:function($$v){_vm.criteriaEnabled=$$v},expression:"criteriaEnabled"}})],1):_vm._e(),_vm.criteriaEnabled&&_vm.showHideCriteria&&2==_vm.config.moduleType?_c("div",{staticClass:"mT10"},[_c("el-radio-group",{staticClass:"fc-input-full-border-select2 mT10 module-select",on:{change:function($event){return _vm.changeShowCriteriaType(_vm.showCriteriaType)}},model:{value:_vm.showCriteriaType,callback:function($$v){_vm.showCriteriaType=$$v},expression:"showCriteriaType"}},[_c("el-radio-button",{attrs:{label:1}},[_vm._v(_vm._s(_vm.$t("pivot.ParentCriteria"))+" ")]),_c("el-radio-button",{attrs:{label:2}},[_vm._v(_vm._s(_vm.$t("pivot.DataCriteria"))+" ")])],1)],1):_vm._e(),_vm.criteriaEnabled&&_vm.showHideCriteria?_c("div",{key:_vm.showDataFilter,staticClass:"criteria-section",on:{click:function($event){_vm.criteriaValidMsg=!1}}},[_vm.showParentModuleFilter?_c("CriteriaBuilder",{ref:"f-parent-pivot-filter",attrs:{moduleName:_vm.baseModuleName},model:{value:_vm.configLocal.dataFilter,callback:function($$v){_vm.$set(_vm.configLocal,"dataFilter",$$v)},expression:"configLocal.dataFilter"}}):_vm._e(),_vm.showDataFilter?_c("CriteriaBuilder",{ref:"f-pivot-data-filter",attrs:{moduleName:_vm.moduleName},model:{value:_vm.configLocal.criteria,callback:function($$v){_vm.$set(_vm.configLocal,"criteria",$$v)},expression:"configLocal.criteria"}}):_vm._e(),_vm.criteriaValidMsg?_c("div",[_c("span",{staticStyle:{color:"#f56c6c","margin-left":"9px"}},[_vm._v("Please add valid criteria")])]):_vm._e()],1):_vm._e()])])],1)},PivotMeasureSettingsDialogBoxvue_type_template_id_057725e1_scoped_true_staticRenderFns=[],dist=__webpack_require__(191853),PivotMeasureSettingsDialogBoxvue_type_script_lang_js={props:["visibility","config","fields","moduleName","baseModuleName"],components:{BaseDialogBox:BaseDialogBox/* default */.Z,CriteriaBuilder:dist/* CriteriaBuilder */.IP},created:function(){this.init(),this.changeShowCriteriaType(this.showCriteriaType)},mounted:function(){var _this$configLocal,_this$configLocal2,_this$configLocal3,_this$configLocal4,_this$configLocal5,_this$configLocal6,_this$configLocal7,_this$configLocal8;this.loadBaselineOptions(),this.config&&(this.configLocal=(0,objectSpread2/* default */.Z)({},this.config)),"2"!=(null===(_this$configLocal=this.configLocal)||void 0===_this$configLocal?void 0:_this$configLocal.moduleType)&&this.configLocal.dateFieldId<0&&(this.configLocal.dateFieldId=null),this.criteriaEnabled=!!(null!==(_this$configLocal2=this.configLocal)&&void 0!==_this$configLocal2&&_this$configLocal2.criteria||null!==(_this$configLocal3=this.configLocal)&&void 0!==_this$configLocal3&&_this$configLocal3.dataFilter),this.formatter&&(this.formatterLocal=(0,objectSpread2/* default */.Z)({},this.formatter)),
// this.enableTimelineFilter = this.configLocal.excludeFromTimelineFilter
this.config.startTime>0&&this.endTime>0&&(this.customDateRange[0]=this.config.startTime,this.customDateRange[1]=this.config.endTime),"2"==(null===(_this$configLocal4=this.configLocal)||void 0===_this$configLocal4?void 0:_this$configLocal4.moduleType)&&(this.enableTimelineFilter=!0),"1"==(null===(_this$configLocal5=this.configLocal)||void 0===_this$configLocal5?void 0:_this$configLocal5.moduleType)&&this.config.dateFieldId>0&&(this.enableTimelineFilter=!0),"1"==(null===(_this$configLocal6=this.configLocal)||void 0===_this$configLocal6?void 0:_this$configLocal6.moduleType)&&!(0,validation/* isEmpty */.xb)(null===(_this$configLocal7=this.configLocal)||void 0===_this$configLocal7?void 0:_this$configLocal7.criteria)&&(0,validation/* isEmpty */.xb)(null===(_this$configLocal8=this.configLocal)||void 0===_this$configLocal8?void 0:_this$configLocal8.dataFilter)&&(this.configLocal.dataFilter=this.configLocal.criteria,this.configLocal.criteria=null)},computed:{dateFieldOptions:function(){var _this$config,options=[];if("2"==(null===this||void 0===this||null===(_this$config=this.config)||void 0===_this$config?void 0:_this$config.moduleType))
// options.push({ id: -99, displayName: 'NONE' })
return options.push({id:-1,displayName:"TTIME"}),options;if(!this.fields)return options;options.push({id:-99,displayName:"NONE"});var dateFields=this.fields.filter((function(field){return(0,utils_field/* isDateTypeField */.S6)(field)}));return options.push.apply(options,(0,toConsumableArray/* default */.Z)(dateFields)),options}},data:function(){return{moduleOptions:{},configLocal:{},enableTimelineFilter:!1,formatterLocal:{},refreshKey:0,baselinePeriodOptions:[],customDateRange:[],datePeriodOptions:PivotDefaults/* datePeriodOptions */.SD,criteriaEnabled:!1,criteriaValidMsg:!1,showHideCriteria:!0,existingOption:[],showCriteriaType:1,showDataFilter:!1,showParentModuleFilter:!1}},methods:{init:function(){var _this$configLocal9;this.config&&(null==this.config.baselineLabel&&(this.config.baselineLabel="None"),this.configLocal=(0,objectSpread2/* default */.Z)({},this.config),"2"==(null===(_this$configLocal9=this.configLocal)||void 0===_this$configLocal9?void 0:_this$configLocal9.moduleType)&&(this.enableTimelineFilter=!0),this.showHideCriteria=!(0,validation/* isEmpty */.xb)(this.moduleName))},loadBaselineOptions:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,api/* API */.bl.get("/baseline/all");case 2:_yield$API$get=_context.sent,data=_yield$API$get.data,data&&(_this.baselinePeriodOptions=JSON.parse(JSON.stringify(data)),_this.baselinePeriodOptions.splice(0,0,{id:-1,name:"None"}));case 5:case"end":return _context.stop()}}),_callee)})))()},isValidCriteria:function(criteria){if(!criteria.conditions)return!1;//all conditions empty ,invalid criteria
var areAllConditionsEmpty=!1;return areAllConditionsEmpty=Object.keys(criteria.conditions).every((function(conditionKey){var condition=criteria.conditions[conditionKey];return!!(0,validation/* isEmpty */.xb)(condition)||(!condition.fieldName||!condition.operatorId||void 0)})),!areAllConditionsEmpty},cancelEdit:function(){this.$emit("update:visibility",!1)},saveModuleName:function(){this.configLocal=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.configLocal),{},{excludeFromTimelineFilter:this.configLocal.excludeFromTimelineFilter,startTime:this.customDateRange[0],endTime:this.customDateRange[1]}),this.enableTimelineFilter||(this.configLocal.dateFieldId=-99),this.criteriaEnabled||(this.configLocal.criteria=null,this.configLocal.dataFilter=null),"None"==this.configLocal.baselineLabel&&(this.configLocal.baselineLabel=null),!this.configLocal.criteria||this.isValidCriteria(this.configLocal.criteria)?(this.$emit("updatePivotMeasureSettings",this.configLocal),this.$emit("update:visibility",!1)):this.criteriaValidMsg=!0},changeShowCriteriaType:function(showFilterType){this.showDataFilter=2==showFilterType,this.showParentModuleFilter=1==showFilterType}}},Components_PivotMeasureSettingsDialogBoxvue_type_script_lang_js=PivotMeasureSettingsDialogBoxvue_type_script_lang_js,PivotMeasureSettingsDialogBox_component=(0,componentNormalizer/* default */.Z)(Components_PivotMeasureSettingsDialogBoxvue_type_script_lang_js,PivotMeasureSettingsDialogBoxvue_type_template_id_057725e1_scoped_true_render,PivotMeasureSettingsDialogBoxvue_type_template_id_057725e1_scoped_true_staticRenderFns,!1,null,"057725e1",null)
/* harmony default export */,PivotMeasureSettingsDialogBox=PivotMeasureSettingsDialogBox_component.exports,vuex_esm=__webpack_require__(420629),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),readingSupportedModules=["asset","site","building","floor","space"],PIVOT_DATA_MODULE_TYPE={MODULE:1,READING:2},valueType={DATA:"DATA",FORMULA:"FORMULA"},PivotMeasuresvue_type_script_lang_js={name:"PivotMeasures",props:["pivotBaseModuleName","builderConfig","pivotResponse","initaialValues","activeColumn"],components:{draggable:vuedraggable_umd_default(),PivotMeasureSettingsDialogBox:PivotMeasureSettingsDialogBox,PivotFormulaDialogNew:PivotFormulaDialogNew,skeletonLoader:skeletonLoader/* default */.Z},watch:{pivotBaseModuleName:function(newVal){newVal&&this.initMeasures()},initaialValues:function(newVal){newVal&&(this.pivotConfigMeasures=newVal)},dataModuleType:function(newVal){var _this=this;newVal&&(this.filterBtn=!1,this.$nextTick((function(){_this.filterBtn=!0})))},showMeasuresSearch:function(newVal){this.pivotDimentionSearch=newVal?this.pivotDimentionSearch:null}},created:function(){this.setAggrMap(),this.isShowReadingDataOptions()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategoryOptions:"assetCategory"})),(0,vuex_esm/* mapState */.rn)({spaceCategoryOptions:"spaceCategory"})),{},{pivotFilteredDimentions:function(){var _this2=this;if(!this.pivotDimentionSearch)return this.transformedPivotMeasures;var measures=this.transformedPivotMeasures.filter((function(rowObj){return rowObj.primary.displayName.toLowerCase().includes(_this2.pivotDimentionSearch.toLowerCase())}));return measures},isReadingModuleSet:function(){return this.dataModuleType==this.PIVOT_DATA_MODULE_TYPE.READING},transformedPivotMeasures:function(){var transformedPivotMeasures=this.transformMeasures(this.pivotMeasures);return transformedPivotMeasures},transformedRelatedModuleMeasures:function(){var _this3=this,transformArray=this.relatedModulesList.map((function(relatedMod){return relatedMod.fields=_this3.transformMeasures(relatedMod.fields),relatedMod}));return transformArray},filteredRealatedModuleMeasures:function(){var _this4=this;if(!this.pivotDimentionSearch||""==this.pivotDimentionSearch)return this.transformedRelatedModuleMeasures;var filteredValues=JSON.parse(JSON.stringify(this.transformedRelatedModuleMeasures));return filteredValues=filteredValues.map((function(relatedMod){return relatedMod.fields=relatedMod.fields.filter((function(rowObj){var _rowObj$primary;return(null===(_rowObj$primary=rowObj.primary)||void 0===_rowObj$primary?void 0:_rowObj$primary.displayName)&&rowObj.primary.displayName.toLowerCase().startsWith(_this4.pivotDimentionSearch.toLowerCase())})),relatedMod})),filteredValues},isRelatedFieldsAvailable:function(){return this.filteredRealatedModuleMeasures.every((function(rm){return 0==rm.fields.length}))},searchReadingMeasures:function(){var _filteredValues,_filteredValues2;if(!this.pivotDimentionSearch||""==this.pivotDimentionSearch){if("asset"==this.pivotBaseModuleName)return this.assetCategoryOptions;if("space"==this.pivotBaseModuleName)return this.spaceCategoryOptions;if(["site","building","floor"].includes(this.pivotBaseModuleName))return this.allSpaceReadings[this.pivotBaseModuleName]}var asset_category_cloned=null;"asset"==this.pivotBaseModuleName?asset_category_cloned=cloneDeep_default()(this.assetCategoryOptions):"space"==this.pivotBaseModuleName?asset_category_cloned=cloneDeep_default()(this.spaceCategoryOptions):["site","building","floor"].includes(this.pivotBaseModuleName)&&(asset_category_cloned=cloneDeep_default()(this.allSpaceReadings[this.pivotBaseModuleName]));var filteredValues=JSON.parse(JSON.stringify(asset_category_cloned)),self=this;return filteredValues=null===(_filteredValues=filteredValues)||void 0===_filteredValues?void 0:_filteredValues.map((function(relatedMod){var _relatedMod$readings;return relatedMod.readings=null===relatedMod||void 0===relatedMod||null===(_relatedMod$readings=relatedMod.readings)||void 0===_relatedMod$readings?void 0:_relatedMod$readings.filter((function(rowObj){var _rowObj$primary2;return(null===(_rowObj$primary2=rowObj.primary)||void 0===_rowObj$primary2?void 0:_rowObj$primary2.displayName)&&rowObj.primary.displayName.toLowerCase().includes(self.pivotDimentionSearch.toLowerCase())})),relatedMod})),null!==(_filteredValues2=filteredValues)&&void 0!==_filteredValues2?_filteredValues2:[]},pivotFieldMap:function(){var _this5=this;if(!this.pivotResponse||!this.builderConfig)return[];var fielsAliases=Object.keys(this.pivotResponse.pivotAliasVsField),formulaValidFieldAliases=[],pivotFieldMapLocal=[];return fielsAliases.forEach((function(key){key.startsWith("formula")||formulaValidFieldAliases.push(key)})),formulaValidFieldAliases.forEach((function(alias){pivotFieldMapLocal.push({alias:alias,paramAlias:_this5.getCharAlias(alias),label:_this5.builderConfig.templateJSON.columnFormatting[alias].label})})),pivotFieldMapLocal.sort((function(a,b){return a.paramAlias>b.paramAlias?1:-1})),pivotFieldMapLocal},isNoConfig:function(){return!(this.builderConfig&&this.builderConfig.rows.length>0&&this.builderConfig.values.length>0)}}),mounted:function(){this.pivotBaseModuleName&&this.initMeasures()},data:function(){return{PIVOT_DATA_MODULE_TYPE:PIVOT_DATA_MODULE_TYPE,dataModuleType:PIVOT_DATA_MODULE_TYPE.MODULE,pivotMeasures:[],showMeasuresSearch:!1,filterBtn:!0,reRender:!0,showLoader:!0,showAggr:!0,relatedShowAggr:!0,pivotConfigMeasures:[],draggableOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"pivotMeasures",sort:!0},showAddFormulaDialog:!1,aggrMap:{28:"Last Value"},aggrOptions:PivotDefaults/* aggrOptions */.ky,rowHover:null,charAliasMap:{},activeRow:null,label:"",activeSelectBox:!1,meta:{},activeRealtedModuleName:null,activeRelatedReadingCategory:null,pivotMeasuresSettings:{},pivotColumnFormat:{},lookupFieldOptions:[],baseModuelFields:[],relatedModulesList:[],editConfig:null,formatConfig:null,pivotDimentionSearch:"",showMeasureSettings:!1,defaultColFormat:PivotDefaults/* defaultColFormat */.WW,pivotBaseModule:{},isDraggingActive:!1,valueType:valueType,
//reading variables
assetCategory:{},all_category:{id:-1,name:"All Category"},allSpaceReadings:{building:[{name:"Building Readings",id:-1}],floor:[{name:"Floor Readings",id:-1}],site:[{name:"Site Readings",id:-1}]},isReadingModule:!1,isReadingsLoading:!1}},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapActions */.nv)(["loadAssetCategory","loadSpaceCategory"])),{},{setAggrMap:function(){var _this6=this;this.aggrOptions.forEach((function(obj){_this6.aggrMap[obj.value]=obj.label}))},isShowReadingDataOptions:function(){this.isReadingModule=readingSupportedModules.includes(this.pivotBaseModuleName)},scrollAdjust:function(event){var elmTop=event.target.closest(".related-modules-list").getBoundingClientRect().top,parentTop=event.target.closest(".related-modules-list").parentElement.getBoundingClientRect().top,temp=event.target.closest(".modules-and-fields-list").scrollTop;this.$nextTick((function(){event.target.closest(".modules-and-fields-list").scrollTop=elmTop-parentTop+temp}))},scrollReadingAdjust:function(event){var elmTop=event.target.closest(".related-readings-list").getBoundingClientRect().top,parentTop=event.target.closest(".related-readings-list").parentElement.getBoundingClientRect().top,temp=event.target.closest(".modules-and-fields-list").scrollTop;this.$nextTick((function(){event.target.closest(".modules-and-fields-list").scrollTop=elmTop-parentTop+temp}))},reRenderMeasures:function(){var _this7=this,list=document.querySelector(".modules-and-fields-list"),scrollPos=list.scrollTop;this.showAggr=!1,this.$nextTick((function(){_this7.reRender=!0,_this7.showAggr=!0,_this7.scrollTop(scrollPos,list)}))},reRenderRelatedMeasures:function(){var _this8=this,list=document.querySelector(".modules-and-fields-list"),scrollPos=list.scrollTop;this.relatedShowAggr=!1,this.$nextTick((function(){_this8.reRender=!0,_this8.relatedShowAggr=!0,_this8.scrollTop(scrollPos,list)}))},scrollTop:function(pos,list){list.scrollTop=pos},nullifyActiveRow:function(){this.activeRow=null},triggerActiveColumn:function(data){this.$emit("activeColumnChanged",data.alias),this.nullifyActiveRow()},initMeasures:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this9,_this9.isShowReadingDataOptions(),_this9.fetchMetricOptions(_this9.pivotBaseModuleName).then((function(res){_this9.pivotMeasures=res})),_this9.loadNonReadingModuleFields(),_this9.loadReleatedModuleOptions(),_this9.loadPivotBaseModuleMeta(),"asset"!=_this9.pivotBaseModuleName){_context.next=11;break}return _context.next=9,_this9.loadAssetCategory();case 9:_context.next=15;break;case 11:if("space"!=_this9.pivotBaseModuleName){_context.next=15;break}return _context.next=14,_this9.loadSpaceCategory();case 14:_this9.spaceCategoryOptions.splice(0,0,_this9.all_category);case 15:_this9.initialValues&&(_this9.pivotConfigMeasures=JSON.parse(JSON.stringify(_this9.initialValues))),
// if (this.initialFormula)
//   this.pivotConfigMeasures = [...this.initialValues]
_this9.$emit("measuresLoaded"),_this9.showLoader=!1;case 18:case"end":return _context.stop()}}),_callee)})))()},openAddFormulaDialog:function(){this.showAddFormulaDialog=!0},getCharAlias:function(alias){var _this10=this,index=Object.keys(this.charAliasMap).findIndex((function(e){return _this10.charAliasMap[e]==alias})),keys=Object.keys(this.charAliasMap);if(-1!=index)return keys[index];keys=keys.map((function(e){return e.toLowerCase()}));var varAlias=(0,utility_methods/* getUniqueCharAlias */.ip)(keys),result=varAlias.toUpperCase();return this.charAliasMap[result]=alias,result},transformMeasures:function(fields){var transformedPivotMeasures=fields.map((function(field){var rowObject={};return rowObject.primary=(0,objectSpread2/* default */.Z)({},field),rowObject.aggrOptions=[{label:"count",value:1},{label:"avg",value:2},{label:"sum",value:3},{label:"min",value:4},{label:"max",value:5}],rowObject.selectedAggr=1,rowObject}));return transformedPivotMeasures},transformReadingMeasures:function(readings){var transformedReadingMeasures=readings.map((function(field){field.uuid=(0,uuid.v4)();var rowObject={};
// if (
//   typeof field.dataTypeEnum == 'object' &&
//   field.dataTypeEnum.typeAsString == 'Boolean'
// ) {
//   rowObject.aggrOptions = [{ label: 'last value', value: 28 }]
//   rowObject.selectedAggr = 28
// }
return rowObject.primary=(0,objectSpread2/* default */.Z)({},field),field&&!field.hasOwnProperty("displayName")&&(rowObject.primary.displayName=field.name),field&&field.hasOwnProperty("kpiType")&&(rowObject.primary.id=field.readingFieldId,rowObject.primary.moduleId=field.readingModuleId),rowObject.aggrOptions=[{label:"avg",value:2},{label:"sum",value:3},{label:"min",value:4},{label:"max",value:5},{label:"last value",value:28}],rowObject.selectedAggr=3,rowObject}));return null!==transformedReadingMeasures&&void 0!==transformedReadingMeasures?transformedReadingMeasures:[]},loadNonReadingModuleFields:function(){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("v2/modules/meta/".concat(_this11.pivotBaseModuleName));case 2:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this11.$message.error("Error loading all fields for module"):_this11.baseModuelFields=data.meta.fields.map((function(field){return field.uuid=(0,uuid.v4)(),field}));case 6:case"end":return _context2.stop()}}),_callee2)})))()},loadReleatedModuleOptions:function(){var _this12=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var resp,data,error,submodules;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,api/* API */.bl.get("/v2/report/getDataModuleList",{moduleName:_this12.pivotBaseModuleName});case 2:if(resp=_context4.sent,data=resp.data,error=resp.error,!error){_context4.next=8;break}_this12.$message.error("Error loading  module list"),_context4.next=12;break;case 8:return submodules=data.modules,//module submodule up to itself case, wo -parent wo , remove the submodule here
_context4.next=11,Promise.all(submodules.filter((function(module){return module.name!=_this12.pivotBaseModuleName})).map(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(moduleObj){var submoduleObj;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.t0=moduleObj.name,_context3.t1=moduleObj,_context3.next=4,_this12.fetchMetricOptions(moduleObj.name);case 4:return _context3.t2=_context3.sent,submoduleObj={moduleName:_context3.t0,moduleObj:_context3.t1,fields:_context3.t2},_context3.abrupt("return",submoduleObj);case 7:case"end":return _context3.stop()}}),_callee3)})));return function(_x){return _ref.apply(this,arguments)}}()));case 11:_this12.relatedModulesList=_context4.sent;case 12:_this12.loading=!1;case 13:case"end":return _context4.stop()}}),_callee4)})))()},fetchMetricOptions:function(nonReadingModule){var _this13=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var resp,data,error,no_of_measures,measure_fields;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,api/* API */.bl.get("v2/report/getMetricsList",{moduleName:nonReadingModule});case 2:if(resp=_context5.sent,data=resp.data,error=resp.error,!error){_context5.next=8;break}_this13.$message.error("Error loading metric list"),_context5.next=12;break;case 8:return no_of_measures=[],measure_fields=data.Fields.filter((function(field){if(field.uuid=(0,uuid.v4)(),!field.columnName||"ID"!==field.columnName)return field;no_of_measures.push(field)})),no_of_measures.length&&measure_fields.splice(0,0,no_of_measures[0]),_context5.abrupt("return",measure_fields);case 12:case"end":return _context5.stop()}}),_callee5)})))()},loadPivotBaseModuleMeta:function(){var _this14=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var moduleMetaResp,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,api/* API */.bl.get("v2/modules/meta/".concat(_this14.pivotBaseModuleName));case 2:moduleMetaResp=_context6.sent,data=moduleMetaResp.data,error=moduleMetaResp.error,error?_this14.$message.error("Error fetching base module meta"):(_this14.pivotBaseModule=JSON.parse(JSON.stringify(data.meta)),_this14.activeRealtedModuleName=_this14.pivotBaseModule.name);case 5:case"end":return _context6.stop()}}),_callee6)})))()},pivotMeasureUpdated:function(_ref2){var added=_ref2.added;if(added){var element=added.element;if(element.valueType===valueType.DATA){var _element$moduleMeasur,_element$moduleMeasur2,formatConfig=this.defaultColFormat.dataColumn;2==(null===element||void 0===element||null===(_element$moduleMeasur=element.moduleMeasure)||void 0===_element$moduleMeasur?void 0:_element$moduleMeasur.moduleType)?formatConfig.label=element.moduleMeasure.readingField.displayName:(0,validation/* isEmpty */.xb)(null===(_element$moduleMeasur2=element.moduleMeasure)||void 0===_element$moduleMeasur2||null===(_element$moduleMeasur2=_element$moduleMeasur2.readingField)||void 0===_element$moduleMeasur2?void 0:_element$moduleMeasur2.displayName)?formatConfig.label=element.moduleMeasure.field.displayName:(element.moduleMeasure.moduleType=2,formatConfig.label=element.moduleMeasure.readingField.displayName),this.pivotColumnFormat[element.alias]=(0,objectSpread2/* default */.Z)({},formatConfig)}}this.$emit("pivotMeasureUpdated",{measures:this.pivotConfigMeasures,formats:this.pivotColumnFormat})},moveRow:function(row){var addRow=this.pivotMeasureAdded(row);this.pivotConfigMeasures.push(addRow),this.pivotMeasureUpdated({added:{element:addRow}})},moveReadingRow:function(row){var addRow=this.pivotReadingsAdded(row);this.pivotConfigMeasures.push(addRow),this.pivotMeasureUpdated({added:{element:addRow}})},pivotMeasureAdded:function(row){var alias="data_".concat((0,utility_methods/* getUniqueCharAlias */.ip)(this.pivotConfigMeasures.map((function(row){return row.alias.split("_")[1]})))),rowObj={moduleType:1,aggr:row.selectedAggr,baselineLabel:null,excludeFromTimelineFilter:!1,field:row.primary,alias:alias,moduleName:row.primary.module.name,dateFieldId:-99,datePeriod:22,criteria:null,dataFilter:null};return{moduleMeasure:rowObj,valueType:valueType.DATA,alias:alias,fieldDisplayName:row.primary.displayName}},pivotSubModuleMeasureAdded:function(row){var alias="data_".concat((0,utility_methods/* getUniqueCharAlias */.ip)(this.pivotConfigMeasures.map((function(row){return row.alias.split("_")[1]})))),rowObj={valueType:valueType.DATA,moduleType:1,aggr:row.selectedAggr,baselineLabel:null,excludeFromTimelineFilter:!1,field:row.primary,alias:alias,moduleName:row.primary.module.name,dateFieldId:-99,datePeriod:22,criteria:null,subModuleFieldId:row.primary.id,dataFilter:null};this.pivotConfigMeasures.push({moduleMeasure:rowObj,valueType:valueType.DATA,alias:alias,fieldDisplayName:row.primary.displayName});var formatConfig=this.defaultColFormat.dataColumn;formatConfig.label=row.primary.displayName,this.pivotColumnFormat[alias]=(0,objectSpread2/* default */.Z)({},formatConfig),this.$emit("pivotMeasureUpdated",{measures:this.pivotConfigMeasures,formats:this.pivotColumnFormat})},pivotFormulaAdded:function(_ref3){var formula=_ref3.formula,formatting=_ref3.formatting;formula.alias="formula_".concat((0,utility_methods/* getUniqueCharAlias */.ip)(this.pivotConfigMeasures.map((function(row){return row.alias.split("_")[1]})))),formula=(0,objectSpread2/* default */.Z)({},formula),this.pivotColumnFormat[formula.alias]=formatting,this.pivotConfigMeasures.push({customMeasure:formula,alias:formula.alias,valueType:valueType.FORMULA,fieldDisplayName:formatting.label}),this.showAddFormulaDialog=!1,this.$emit("pivotMeasureUpdated",{measures:this.pivotConfigMeasures,formats:this.pivotColumnFormat})},pivotFormulaUpdated:function(_ref4){var params=_ref4.params,formula=params.formula,formatting=params.formatting,index=this.pivotConfigMeasures.findIndex((function(val){return val.alias===formula.alias}));-1!==index&&(this.pivotConfigMeasures[index]={customMeasure:formula,alias:formula.alias,valueType:valueType.FORMULA,fieldDisplayName:formatting.label}),this.showAddFormulaDialog=!1,this.$emit("pivotMeasureUpdated",{measures:this.pivotConfigMeasures,formats:this.pivotColumnFormat})},pivotMeasureRemoved:function(measure){this.$emit("deleteRowValue",measure.alias)},mouseEnterRow:function(uuid){this.mouseEnterRow||(this.activeRow=uuid)},mouseLeaveRow:function(){},openPivotMeasureSettings:function(measure){var _measure$moduleMeasur;measure.alias.startsWith("data")?(this.pivotMeasuresSettings["moduleName"]=measure.moduleMeasure.moduleName,this.pivotMeasuresSettings["config"]=(0,objectSpread2/* default */.Z)({},measure.moduleMeasure),this.pivotMeasuresSettings["fields"]=null!==(_measure$moduleMeasur=measure.moduleMeasure)&&void 0!==_measure$moduleMeasur&&null!==(_measure$moduleMeasur=_measure$moduleMeasur.field)&&void 0!==_measure$moduleMeasur&&null!==(_measure$moduleMeasur=_measure$moduleMeasur.module)&&void 0!==_measure$moduleMeasur&&_measure$moduleMeasur.fields?(0,toConsumableArray/* default */.Z)(measure.moduleMeasure.field.module.fields):(0,toConsumableArray/* default */.Z)(this.baseModuelFields),this.showMeasureSettings=!0):(this.editConfig=measure.customMeasure,this.label=measure.fieldDisplayName,this.formatConfig=this.pivotColumnFormat[measure.alias],this.showAddFormulaDialog=!0)},updatePivotMeasureSettings:function(config){this.pivotMeasuresSettings={};var index=this.pivotConfigMeasures.findIndex((function(measure){return measure.alias==config.alias}));-1!=index&&(this.pivotConfigMeasures[index]=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.pivotConfigMeasures[index]),config),this.pivotConfigMeasures[index].alias.startsWith("data")?this.pivotConfigMeasures[index].moduleMeasure=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.pivotConfigMeasures[index].moduleMeasure),config):this.pivotConfigMeasures[index].customMeasure=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.pivotConfigMeasures[index].customMeasure),config),this.$emit("pivotMeasureUpdated",{measures:this.pivotConfigMeasures,formats:this.pivotColumnFormat}))},changeMeasuresDataType:function(){this.nullifyActiveRow(),
// if (!this.isEditing) this.resetDefauts()
this.dataModuleType==PIVOT_DATA_MODULE_TYPE.MODULE&&this.loadNonReadingModuleFields()},loadSiteBuildingFloorReadings:function(moduleName,space_category){var _this15=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var _yield$API$post,data,error,readings;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,api/* API */.bl.post("reading/getallspacetypereadings",{spaceType:_this15.getSpaceType(moduleName)});case 2:_yield$API$post=_context7.sent,data=_yield$API$post.data,error=_yield$API$post.error,error?_this15.$message.error("error loading reading fields for ".concat(moduleName)):(readings=_this15.getReadingFieldForSpaceModules(data),(0,validation/* isEmpty */.xb)(readings)||_this15.$set(space_category,"readings",_this15.transformReadingMeasures(_this15.getReadingFieldForSpaceModules(data))));case 6:case"end":return _context7.stop()}}),_callee7)})))()},getReadingFieldForSpaceModules:function(data){var fields=[],keys=Object.keys(data.moduleMap);return keys.forEach((function(key){var fields_map=data.moduleMap[key];(0,validation/* isEmpty */.xb)(fields_map)||(0,validation/* isEmpty */.xb)(fields_map.length)||fields_map.forEach((function(field_obj){(0,validation/* isEmpty */.xb)(field_obj.fields)||(0,validation/* isEmpty */.xb)(field_obj.fields.length)||fields.push.apply(fields,(0,toConsumableArray/* default */.Z)(field_obj.fields))}))})),fields},getSpaceType:function(moduleName){switch(moduleName){case"site":return"Sites";case"building":return"Buildings";case"floor":return"Floors"}},pivotReadingsAdded:function(row){var _row$primary,alias="data_".concat((0,utility_methods/* getUniqueCharAlias */.ip)(this.pivotConfigMeasures.map((function(row){return row.alias.split("_")[1]})))),rowObj={valueType:valueType.DATA,moduleType:this.dataModuleType,aggr:row.selectedAggr,baselineLabel:null,excludeFromTimelineFilter:!1,readingField:row.primary,alias:alias,dateFieldId:-1,datePeriod:22,moduleName:null===row||void 0===row||null===(_row$primary=row.primary)||void 0===_row$primary||null===(_row$primary=_row$primary.module)||void 0===_row$primary?void 0:_row$primary.name,criteria:null,dataFilter:null};return{moduleMeasure:rowObj,valueType:valueType.DATA,alias:alias,fieldDisplayName:row.primary.displayName};
// let formatConfig = this.defaultColFormat.dataColumn
// formatConfig.label = row.primary.displayName
// this.pivotColumnFormat[alias] = { ...formatConfig }
// this.$emit('pivotMeasureUpdated', {
//   measures: this.pivotConfigMeasures,
//   formats: this.pivotColumnFormat,
// })
},loadAssetReadingFields:function(asset_category){var _this16=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var reading_url,kpiFilter,_yield$Promise$all,_yield$Promise$all2,data1,data2,data3,readings,searchKeyword;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:if(_context8.prev=0,_this16.isReadingsLoading=!0,reading_url="space"===_this16.pivotBaseModuleName?"v2/readings/spacecategory":"v2/readings/assetcategory",!["site","building","floor"].includes(_this16.pivotBaseModuleName)){_context8.next=7;break}return _context8.next=6,_this16.loadSiteBuildingFloorReadings(_this16.pivotBaseModuleName,asset_category);case 6:return _context8.abrupt("return",_context8.sent);case 7:return kpiFilter=JSON.stringify({assetCategory:{operatorId:36,value:[asset_category.id+""]},kpiType:{operatorId:54,value:["1"]},oneLevelLookup:{}}),_context8.t0=Promise,_context8.next=11,api/* API */.bl.get(reading_url,{id:asset_category.id,excludeEmptyFields:!1,fetchValidationRules:!1,readingType:"connected"},{force:!0});case 11:return _context8.t1=_context8.sent,_context8.next=14,api/* API */.bl.get(reading_url,{id:asset_category.id,excludeEmptyFields:!1,fetchValidationRules:!1,readingType:"available"},{force:!0});case 14:return _context8.t2=_context8.sent,_context8.next=17,api/* API */.bl.get("v1/setup/readingkpi",{filters:kpiFilter},{force:!0});case 17:return _context8.t3=_context8.sent,_context8.t4=[_context8.t1,_context8.t2,_context8.t3],_context8.next=21,_context8.t0.all.call(_context8.t0,_context8.t4);case 21:if(_yield$Promise$all=_context8.sent,_yield$Promise$all2=(0,slicedToArray/* default */.Z)(_yield$Promise$all,3),data1=_yield$Promise$all2[0],data2=_yield$Promise$all2[1],data3=_yield$Promise$all2[2],!(data1.data.error||data2.data.error||data3.data.error)){_context8.next=28;break}throw new Error("Error loading reading fields for asset category");case 28:readings=[].concat((0,toConsumableArray/* default */.Z)(data1.data.readings),(0,toConsumableArray/* default */.Z)(data2.data.readings),(0,toConsumableArray/* default */.Z)(data3.data.data.readingkpi)),readings.length>0&&!(0,validation/* isEmpty */.xb)(_this16.pivotDimentionSearch)&&(searchKeyword=_this16.pivotDimentionSearch.toLowerCase(),readings=readings.filter((function(rowObj){var _rowObj$displayName;return null!==rowObj&&void 0!==rowObj&&null!==(_rowObj$displayName=rowObj.displayName)&&void 0!==_rowObj$displayName&&_rowObj$displayName.toLowerCase().includes(searchKeyword)||null!==rowObj&&void 0!==rowObj&&rowObj.name&&rowObj.name.toLowerCase().includes(searchKeyword)?rowObj:void 0}))),_this16.$set(asset_category,"readings",_this16.transformReadingMeasures(readings)),_this16.isReadingsLoading=!1,_context8.next=38;break;case 34:_context8.prev=34,_context8.t5=_context8["catch"](0),_this16.isReadingsLoading=!1,_this16.$message.error(_context8.t5.message);case 38:case"end":return _context8.stop()}}),_callee8,null,[[0,34]])})))()},setAllModuleType:function(){this.dataModuleType=this.PIVOT_DATA_MODULE_TYPE.MODULE},setReadingModuleType:function(){this.dataModuleType=this.PIVOT_DATA_MODULE_TYPE.READING}// getParentModuleId() {
//   if (this.pivotBaseModuleName == 'asset') {
//     return this.assetCategory.assetModuleID
//   } else if (this.pivotBaseModuleName == 'space') {
//     return this.spaceCategoryId
//   }
// },
})},Components_PivotMeasuresvue_type_script_lang_js=PivotMeasuresvue_type_script_lang_js,PivotMeasures_component=(0,componentNormalizer/* default */.Z)(Components_PivotMeasuresvue_type_script_lang_js,PivotMeasuresvue_type_template_id_76605bf7_render,PivotMeasuresvue_type_template_id_76605bf7_staticRenderFns,!1,null,null,null)
/* harmony default export */,PivotMeasures=PivotMeasures_component.exports,SavePivotReportComponentvue_type_template_id_43697a2c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"save-pivot-report"},[_c("el-button",{staticClass:"pivot-save-cancel-btn",class:_vm.disableSaveButton?"disable-pointer":"",attrs:{type:"el-button save-btn el-button--primary",disabled:_vm.disableSaveButton},on:{click:_vm.saveReport}},[_vm._v(" "+_vm._s(_vm.$t("pivot.save"))+" ")]),_c("el-button",{staticClass:"pivot-save-cancel-btn pivot-cancel-btn",on:{click:_vm.cancelBtnHandler}},[_vm._v(" "+_vm._s(_vm.$t("pivot.cancel"))+" ")]),_vm.showUnsavedChangesDialogBox?_c("UnsavedChangesErrorDialogBox",{attrs:{visibility:_vm.showUnsavedChangesDialogBox},on:{"update:visibility":function($event){_vm.showUnsavedChangesDialogBox=$event},result:_vm.resultHander}}):_vm._e()],1)},SavePivotReportComponentvue_type_template_id_43697a2c_scoped_true_staticRenderFns=[],UnsavedChangesErrorDialogBox=__webpack_require__(608578),saveReportMixin=__webpack_require__(303783),SavePivotReportComponentvue_type_script_lang_js={props:["report","config"],components:{
// SavePivotReportDialogBox,
UnsavedChangesErrorDialogBox:UnsavedChangesErrorDialogBox/* default */.Z},watch:{config:{handler:function(){this.unsavedChanges=!0},deep:!0},report:{handler:function(){this.init()},deep:!0,immediate:!0}},mounted:function(){},data:function(){return{
// showSaveDialogBox: false,
showUnsavedChangesDialogBox:!1,unsavedChanges:!1}},mixins:[saveReportMixin/* default */.Z],methods:{cancelBtnHandler:function(){this.unsavedChanges?this.showUnsavedChangesDialogBox=!0:this.goBackToPreviousRoute()},resultHander:function(res){res&&this.goBackToPreviousRoute()},goBackToPreviousRoute:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW),name=_findRouteForTab.name,url=this.$router.resolve({name:name}).href;this.$route.query.reportId&&(url=this.$router.resolve({name:name,params:{reportId:this.$route.query.reportId}}).href),this.$router.push(url)}else this.$route.query.reportId?this.$router.push("/app/em/pivot/view/".concat(this.$route.query.reportId)):this.$router.push("/app/em/pivot/view")},reportSaved:function(reportObj){this.$emit("reportSaved",reportObj)}}},Components_SavePivotReportComponentvue_type_script_lang_js=SavePivotReportComponentvue_type_script_lang_js,SavePivotReportComponent_component=(0,componentNormalizer/* default */.Z)(Components_SavePivotReportComponentvue_type_script_lang_js,SavePivotReportComponentvue_type_template_id_43697a2c_scoped_true_render,SavePivotReportComponentvue_type_template_id_43697a2c_scoped_true_staticRenderFns,!1,null,"43697a2c",null)
/* harmony default export */,SavePivotReportComponent=SavePivotReportComponent_component.exports,ConditionalFormatDialogvue_type_template_id_c6ac0aa0_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-add-criteria"},[_c("BaseDialogBox",{attrs:{visibility:_vm.visibility,onConfirm:_vm.save,onCancel:_vm.closeDialog,onClearAll:_vm.clearAll,cancelText:"Cancel",confirmText:"Save",title:_vm.$t("pivot.conditionalFormatting"),width:"52%"},on:{"update:visibility":function($event){_vm.visibility=$event}}},[_vm.loading?_vm._e():_c("div",{staticClass:"dialog-content-body ",attrs:{slot:"body"},slot:"body"},[_c("el-collapse",{staticClass:"new-rule-collapse f13 position-relative controllogic-collapse",attrs:{accordion:!0},model:{value:_vm.activeNames,callback:function($$v){_vm.activeNames=$$v},expression:"activeNames"}},[_c("draggable",{attrs:{list:_vm.conditionalFormatting,options:_vm.draggableOptions},on:{change:_vm.handleReorder}},_vm._l(_vm.conditionalFormatting,(function(conditional,index){return _c("el-collapse-item",{key:index,staticClass:"rule-border-blue mT20 position-relative",staticStyle:{"border-left":"1px solid rgb(228, 235, 241)"},attrs:{name:index}},[_c("template",{slot:"title"},[_c("div",{staticClass:"task-handle mR10 pointer"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_vm._v(" "+_vm._s(_vm.$t("pivot.conditionalRule"))+" "+_vm._s(index+1)+" ")]),_c("div",{staticClass:"pL20"},[_c("div",{staticClass:"conditional-formatting"},[_c("new-criteria-builder",{key:_vm.refreshKey,staticClass:"graphics-criteria-builder",attrs:{title:_vm.$t("pivot.specifyCondition"),exrule:conditional.criteria,showSiteField:!0,module:"pivotbuilder",variables:_vm.filteredVariables},on:{condition:function(criteria){return _vm.getCriteria(criteria,index)}}}),_c("div",{staticClass:"style-container pB20"},[_c("el-row",[_c("label",{staticClass:"fc-modal-sub-title",attrs:{for:"name"}},[_vm._v(_vm._s(_vm.$t("pivot.formatting")))]),_c("div",{staticClass:"fc-sub-title-desc"},[_vm._v(" "+_vm._s(_vm.$t("pivot.specifyStyles"))+" ")])]),_c("el-row",{staticClass:"mT10",attrs:{gutter:10}},[_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"pivot-fc-input-label-txt mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.cellBackground"))+" ")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:conditional.styles.bgColor,callback:function($$v){_vm.$set(conditional.styles,"bgColor",$$v)},expression:"conditional.styles.bgColor"}})],1)]),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"pivot-fc-input-label-txt mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.textBackground"))+" ")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:conditional.styles.textBgColor,callback:function($$v){_vm.$set(conditional.styles,"textBgColor",$$v)},expression:"conditional.styles.textBgColor"}})],1)]),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"pivot-fc-input-label-txt mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.textColor"))+" ")]),_c("div",{staticClass:"fc-color-picker card-color-container"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:conditional.styles.textColor,callback:function($$v){_vm.$set(conditional.styles,"textColor",$$v)},expression:"conditional.styles.textColor"}})],1)])],1),_c("el-row",{staticClass:"mT20"},[_c("el-col",{attrs:{span:11}},[_c("span",{staticClass:"pivot-fc-input-label-txt pB5",staticStyle:{"font-weight":"500"}},[_vm._v(" "+_vm._s(_vm.$t("pivot.displayValue"))+" ")]),_c("div",[_c("el-input",{staticClass:"fc-border-select",model:{value:conditional.styles.displayValue,callback:function($$v){_vm.$set(conditional.styles,"displayValue",$$v)},expression:"conditional.styles.displayValue"}})],1)]),_c("el-col",{attrs:{span:11}},[_c("span",{staticClass:"pivot-fc-input-label-txt pB5 mL10",staticStyle:{"font-weight":"500"}},[_vm._v(" "+_vm._s(_vm.$t("pivot.textStyle"))+" ")]),_c("div",[_c("el-select",{staticClass:"fc-border-select mL10 width100",attrs:{multiple:!0},model:{value:conditional.styles.textStyle,callback:function($$v){_vm.$set(conditional.styles,"textStyle",$$v)},expression:"conditional.styles.textStyle"}},[_c("el-option",{attrs:{label:_vm.$t("pivot.italic"),value:"italic"}}),_c("el-option",{attrs:{label:_vm.$t("pivot.bold"),value:"bold"}}),_c("el-option",{attrs:{label:"Strikethrough",value:"strike-through"}})],1)],1)])],1),_c("el-row",{staticClass:"mT20"},[conditional.styles.hasOwnProperty("blink")?_c("el-col",{attrs:{span:12}},[_c("div",[_c("el-checkbox",{model:{value:conditional.styles.blink,callback:function($$v){_vm.$set(conditional.styles,"blink",$$v)},expression:"conditional.styles.blink"}},[_vm._v(_vm._s(_vm.$t("pivot.blink")))])],1)]):_vm._e()],1)],1)],1),_vm.conditionalFormatting.length>1?_c("img",{staticClass:"delete-icon pointer",staticStyle:{height:"18px",width:"18px","margin-right":"3px"},attrs:{src:__webpack_require__(385769)},on:{click:function($event){return _vm.deleteRule(index)}}}):_vm._e()])],2)})),1)],1),_c("el-button",{staticClass:"fc-btn-green-medium-fill mT20 f14 fwBold",attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:_vm.addRule}})],1)])],1)},ConditionalFormatDialogvue_type_template_id_c6ac0aa0_scoped_true_staticRenderFns=[],NewCriteriaBuilder=__webpack_require__(859850),colors=__webpack_require__(519898),card_constants=__webpack_require__(806186),ConditionalFormatDialogvue_type_script_lang_js={props:["variables","visibility","alias","editConfig"],components:{NewCriteriaBuilder:NewCriteriaBuilder/* default */.Z,draggable:vuedraggable_umd_default(),BaseDialogBox:BaseDialogBox/* default */.Z},data:function(){return{loading:!1,predefinedColors:card_constants/* predefinedColors */.UH,activeNames:0,conditionalFormatting:[],draggableOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0},refreshKey:0}},mounted:function(){this.initConditionalFormatting()},watch:{visibility:function(){this.initConditionalFormatting()}},computed:{filteredVariables:function(){return this.variables}},methods:{rerender:function(){var _this=this;this.loading=!0,setTimeout((function(){_this.loading=!1,_this.cleardata()}),500)},cleardata:function(){this.conditionalFormatting=[],this.addRule()},clearAll:function(){this.conditionalFormatting=[]},initConditionalFormatting:function(){(0,validation/* isEmpty */.xb)(this.editConfig)||(0,validation/* isUndefined */.o8)(this.editConfig)?(this.conditionalFormatting=[],this.addRule()):this.conditionalFormatting=JSON.parse(JSON.stringify(this.editConfig))},getCriteria:function(criteria,index){this.conditionalFormatting[index]&&(this.conditionalFormatting[index].criteria=criteria)},getPredefinedColors:function(){return colors/* default */.Z.readingcardColors},deleteRule:function(key){this.conditionalFormatting.splice(key,1)},handleReorder:function(){this.refreshKey++},getEmptyCFObject:function(){var cf={criteria:{pattern:""},styles:{}};return cf.styles=this.setAdditionalStats(cf.styles),cf},setAdditionalStats:function(styles){return this.$set(styles,"blink",!1),this.$set(styles,"displayValue",null),this.$set(styles,"textStyle","normal"),this.$set(styles,"textBgColor",null),this.$set(styles,"textColor",null),this.$set(styles,"bgColor",null),styles},addRule:function(){this.conditionalFormatting.push(this.getEmptyCFObject())},save:function(){this.$emit("conditionFormatAdded",{prop:this.alias,formatting:this.conditionalFormatting}),this.$emit("update:visibility",!1)},closeDialog:function(){this.$emit("closeDialog")}}},Components_ConditionalFormatDialogvue_type_script_lang_js=ConditionalFormatDialogvue_type_script_lang_js,ConditionalFormatDialog_component=(0,componentNormalizer/* default */.Z)(Components_ConditionalFormatDialogvue_type_script_lang_js,ConditionalFormatDialogvue_type_template_id_c6ac0aa0_scoped_true_render,ConditionalFormatDialogvue_type_template_id_c6ac0aa0_scoped_true_staticRenderFns,!1,null,"c6ac0aa0",null)
/* harmony default export */,ConditionalFormatDialog=ConditionalFormatDialog_component.exports,ColumnFormatDialogvue_type_template_id_0c1ca56f_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("BaseDialogBox",{attrs:{visibility:_vm.visibility,title:_vm.$t("pivot.columnFormat"),onConfirm:_vm.save,onCancel:_vm.closeDialog,cancelText:"Cancel",confirmText:"Save",width:"46%"},on:{"update:visibility":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"dialog-content-body pB20",attrs:{slot:"body"},slot:"body"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):_vm._e(),_vm.loading?_vm._e():_c("div",{staticClass:"body"},[_c("div",{staticClass:"main-layout-cft"},[_c("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[_c("el-row",[_c("el-row",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.columnName"))+" ")]),_c("el-row",{staticClass:"text-left line-height25 mT5"},[_c("el-input",{staticClass:"fc-input-full-border2 width60",attrs:{disabled:""},model:{value:_vm.fieldName,callback:function($$v){_vm.fieldName=$$v},expression:"fieldName"}})],1)],1),_c("el-row",[_c("el-row",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.dataType"))+" ")]),_c("el-row",{staticClass:"text-left line-height25 mT5"},[_c("el-input",{staticClass:"fc-input-full-border2 width60",attrs:{disabled:""},model:{value:_vm.fieldDataType,callback:function($$v){_vm.fieldDataType=$$v},expression:"fieldDataType"}})],1)],1)],1),_c("div",{staticStyle:{"justify-content":"space-between"}},[_vm.showUnitSelectorOption?_c("el-row",[_c("el-row",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.unit"))+" ")]),_c("el-row",{staticClass:"text-left line-height25 mT10"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{disabled:""},model:{value:_vm.field.unit,callback:function($$v){_vm.$set(_vm.field,"unit",$$v)},expression:"field.unit"}})],1)],1):_vm._e(),_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.alignment"))+" ")])]),_c("el-row",[_vm.reRender?_c("el-select",{staticClass:"fc-input-full-border-select2 mT5 module-select",staticStyle:{width:"275px"},attrs:{filterable:"",placeholder:"Select","popper-class":"fc-group-select"},on:{change:function($event){return _vm.reRenderDropdown()}},model:{value:_vm.config.textAlign,callback:function($$v){_vm.$set(_vm.config,"textAlign",$$v)},expression:"config.textAlign"}},_vm._l(_vm.textAlignOptions,(function(textAlign,index){return _c("el-option",{key:"textAlign-options"+index,attrs:{label:textAlign.label,value:textAlign.value}})})),1):_vm._e()],1)],1),_vm.showDecimalPoints?_c("div",{staticClass:"decimal-points-input"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.decimalPoints"))+" ")])]),_c("el-row",[_c("el-input",{staticClass:"fc-input-full-border-select2 width60 mT5",attrs:{type:"number"},model:{value:_vm.config.decimalPoints,callback:function($$v){_vm.$set(_vm.config,"decimalPoints",$$v)},expression:"config.decimalPoints"}})],1)],1)],1):_vm._e()],1)]),_vm.showUnitOption?_c("div",{staticClass:"metric-block mT20 "},[_c("label",{staticClass:"fc-modal-sub-title"},[_vm._v(" "+_vm._s(_vm.$t("pivot.unit"))+" ")]),_vm.showUnitSelectorOption?_c("div",{staticClass:"metric-display-unit-selecter"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.displayUnit"))+" ")])]),_c("el-row",[_c("el-select",{staticClass:"fc-input-full-border-select2 mT5 module-select",staticStyle:{width:"275px"},attrs:{filterable:"",placeholder:"Select","popper-class":"fc-group-select"},on:{change:_vm.converToUnitChanged},model:{value:_vm.config.displayUnit,callback:function($$v){_vm.$set(_vm.config,"displayUnit",$$v)},expression:"config.displayUnit"}},_vm._l(_vm.metricUnitOptions,(function(metric,index){return _c("el-option",{key:"displayUnit-options"+index,attrs:{label:metric.displayName,value:metric.unitId}})})),1)],1)],1)],1):_c("div",{staticClass:"metric-custom-unit-input-box mT10"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.customUnit"))+" ")])]),_c("el-row",[_c("el-input",{staticClass:"fc-input-full-border-select2 mT5 module-select",attrs:{placeholder:"Custom unit"},model:{value:_vm.config.customUnit,callback:function($$v){_vm.$set(_vm.config,"customUnit",$$v)},expression:"config.customUnit"}})],1)],1)],1),_c("div",{staticClass:"show-unit-at-selecter mT10"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25"},[_vm._v(" "+_vm._s(_vm.$t("pivot.showUnitAt"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2 mT5 module-select",staticStyle:{width:"275px"},attrs:{filterable:"",placeholder:"Select","popper-class":"fc-group-select"},on:{change:_vm.unitShowAtChanged},model:{value:_vm.unitDisplayLocation,callback:function($$v){_vm.unitDisplayLocation=$$v},expression:"unitDisplayLocation"}},_vm._l(_vm.unitDisplayOptions,(function(unitDisplay,index){return _c("el-option",{key:"unitDisplay-options"+index,attrs:{label:unitDisplay.label,value:unitDisplay.value}})})),1)],1),_c("el-col",{staticClass:"pL10",attrs:{span:12}},[_c("el-radio-group",{staticClass:"fc-input-full-border-select2 mT5 mL5 module-select cf-radio-group",staticStyle:{width:"275px",display:"flex"},model:{value:_vm.config.prefix,callback:function($$v){_vm.$set(_vm.config,"prefix",$$v)},expression:"config.prefix"}},[_c("el-radio-button",{staticClass:"cf-btn",attrs:{label:!0}},[_vm._v(_vm._s(_vm.$t("pivot.prefix")))]),_c("el-radio-button",{staticClass:"cf-btn",attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("pivot.suffix")))])],1)],1)],1)],1)]):_vm._e(),_vm.showNumberFormatBlock?_c("div",{staticClass:"separator-block mT20"},[_c("label",{staticClass:"fc-modal-sub-title"},[_vm._v(" "+_vm._s(_vm.$t("pivot.separator"))+" ")]),_c("div",{staticClass:"show-unit-at-selecter mT10"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.localeSeparator"))+" ")])]),_c("el-row",[_c("el-radio-group",{staticClass:"fc-input-full-border-select2  width60 mT5 module-select",model:{value:_vm.config.applyLocaleSeparator,callback:function($$v){_vm.$set(_vm.config,"applyLocaleSeparator",$$v)},expression:"config.applyLocaleSeparator"}},[_c("el-radio-button",{attrs:{label:!0}},[_vm._v(_vm._s(_vm.$t("pivot.default")))]),_c("el-radio-button",{attrs:{label:!1}},[_vm._v(_vm._s(_vm.$t("pivot.custom")))])],1)],1)],1)],1),_vm.showDecimalOptions?_c("div",{staticClass:"decimal-separetor-selecter"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.decimalSeparator"))+" ")])]),_c("el-row",[_c("el-select",{staticClass:"fc-input-full-border-select2 width60 mT5 module-select",attrs:{filterable:"",placeholder:"Select","popper-class":"fc-group-select"},model:{value:_vm.config.decimalSeparator,callback:function($$v){_vm.$set(_vm.config,"decimalSeparator",$$v)},expression:"config.decimalSeparator"}},_vm._l(_vm.decimalSeparatorOptions,(function(decimalSeparator,index){return _c("el-option",{key:"decimalSeparator-options"+index,attrs:{label:decimalSeparator.label,value:decimalSeparator.value}})})),1)],1)],1)],1):_vm._e(),_vm.showThousandSeparator?_c("div",{staticClass:"thousand-separetor-selecter"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.thousandSeparator"))+" ")])]),_c("el-row",[_c("el-select",{staticClass:"fc-input-full-border-select2 width60 mT5 module-select",attrs:{filterable:"",placeholder:"Select","popper-class":"fc-group-select"},model:{value:_vm.config.thousandSeparator,callback:function($$v){_vm.$set(_vm.config,"thousandSeparator",$$v)},expression:"config.thousandSeparator"}},_vm._l(_vm.thousandSeparatorOptions,(function(thousandSeparator,index){return _c("el-option",{key:"thousandSeparator-options"+index,attrs:{label:thousandSeparator.label,value:thousandSeparator.value}})})),1)],1)],1)],1):_vm._e()]):_vm._e(),_vm.showEnumBlocKFormatValue||_vm.showBooleanBlocKFormatValue?_c("div",{staticClass:"alias-block mT10 "},[_c("label",{staticClass:"fc-modal-sub-title"},[_vm._v(" "+_vm._s(_vm.$t("pivot.formatValues"))+" ")]),_vm.showBooleanBlocKFormatValue?_c("div",{staticClass:"boolean-block"},[_c("div",{staticClass:"true-alias"},[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.true"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2  mT5 module-select",attrs:{placeholder:"True"},model:{value:_vm.config.trueValue,callback:function($$v){_vm.$set(_vm.config,"trueValue",$$v)},expression:"config.trueValue"}})],1),_c("div",{staticClass:"false-alias"},[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.false"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2  mT5 module-select",attrs:{placeholder:"False"},model:{value:_vm.config.falseValue,callback:function($$v){_vm.$set(_vm.config,"falseValue",$$v)},expression:"config.falseValue"}})],1)]):_vm._e(),_vm.showEnumBlocKFormatValue?_c("div",{staticClass:"enum-block mT10 "},_vm._l(_vm.enumAliasList,(function(enumObj,index){return _c("div",{key:index,staticClass:"enum-alias"},[_c("el-row",[_c("el-row",[_c("div",{staticClass:"pivot-fc text-left line-height25 mT10"},[_vm._v(" "+_vm._s(enumObj.value)+" ")])]),_c("el-row",[_c("el-input",{staticClass:"fc-input-full-border-select2 mT5 module-select",attrs:{placeholder:enumObj.value},model:{value:_vm.config.enumValues[enumObj.key],callback:function($$v){_vm.$set(_vm.config.enumValues,enumObj.key,$$v)},expression:"config.enumValues[enumObj.key]"}})],1)],1)],1)})),0):_vm._e()]):_vm._e()])],1)])},ColumnFormatDialogvue_type_template_id_0c1ca56f_scoped_true_staticRenderFns=[],ColumnFormatDialogvue_type_script_lang_js=(__webpack_require__(689730),{props:["field","alias","editConfig","visibility","isDataColumn","fieldName"],components:{BaseDialogBox:BaseDialogBox/* default */.Z},computed:{enumAliasList:function(){var _this=this,enumList=[],keys=Object.keys(this.field.enumMap);return keys.forEach((function(key){enumList.push({key:key,value:_this.field.enumMap[key]})})),enumList},fieldDataType:function(){var dataType=this.field.dataTypeEnum;return dataType[0]+dataType.slice(1).toLowerCase()},showUnitOption:function(){return(0,utils_field/* isDecimalField */.No)(this.field)||(0,utils_field/* isNumberField */.Z2)(this.field)||this.field.unit},showUnitSelectorOption:function(){return this.field.metricEnum},showThousandSeparator:function(){return(this.isDataColumn||(0,utils_field/* isDecimalField */.No)(this.field)||(0,utils_field/* isNumberField */.Z2)(this.field))&&!this.config.applyLocaleSeparator},showDecimalOptions:function(){return(0,utils_field/* isDecimalField */.No)(this.field)&&!this.config.applyLocaleSeparator},showDecimalPoints:function(){return(0,utils_field/* isDecimalField */.No)(this.field)},showBooleanBlocKFormatValue:function(){return this.isBooleanField(this.field)},showEnumBlocKFormatValue:function(){return this.isEnumField(this.field)},showNumberFormatBlock:function(){return this.isDataColumn||(0,utils_field/* isDecimalField */.No)(this.field)||(0,utils_field/* isNumberField */.Z2)(this.field)}},data:function(){return{config:{textAlign:null,unitId:-1,metricId:null,appendUnit:!1,displayUnit:-1,prefix:!1,headerUnit:!1,unit:null,decimalSeparator:".",decimalPoints:2,thousandSeparator:",",enumValues:{},applyLocaleSeparator:!0},reRender:!0,unitDisplayLocation:0,textAlignOptions:[{label:"Center",value:"center"},{label:"Left",value:"left"},{label:"Right",value:"right"}],decimalSeparatorOptions:[{label:"Dot (.)",value:"."},{label:"Comma (,)",value:","},{label:"Single quote (')",value:"'"}],thousandSeparatorOptions:[{label:"Comma (,)",value:","},{label:"Dot (.)",value:"."}],unitDisplayOptions:[{label:"None",value:0},{label:"Header",value:1},{label:"Each row",value:2}],metricUnits:null,metricUnitOptions:null,metricOptions:null,loading:!1}},mounted:function(){var _this$editConfig;
// let nodes = document.getElementsByClassName('cf-btn').childNodes
// for (let i = 0; i < nodes.length; i++) {
//   if (nodes[i].nodeName.toLowerCase() == 'span') {
//     nodes[i].style.width = '138px'
//   }
// }
this.editConfig&&(this.config=JSON.parse(JSON.stringify(this.editConfig))),null!==(_this$editConfig=this.editConfig)&&void 0!==_this$editConfig&&_this$editConfig.textAlign||((0,utils_field/* isNumberField */.Z2)(this.field)||(0,utils_field/* isDecimalField */.No)(this.field)||(0,utils_field/* isIdField */.sh)(this.field)?this.config.textAlign="right":(0,utils_field/* isBooleanField */.Mw)(this.field)||(0,utils_field/* isEnumField */.Ri)(this.field)?this.config.textAlign="center":this.config.textAlign="left"),this.config.appendUnit||this.config.headerUnit?!this.config.appendUnit&&this.config.headerUnit?this.unitDisplayLocation=1:this.config.appendUnit&&!this.config.headerUnit&&(this.unitDisplayLocation=2):this.unitDisplayLocation=0,this.getDefaultMetricUnits()},methods:{isNumberField:utils_field/* isNumberField */.Z2,isDecimalField:utils_field/* isDecimalField */.No,isIdField:utils_field/* isIdField */.sh,isBooleanField:utils_field/* isBooleanField */.Mw,isEnumField:utils_field/* isEnumField */.Ri,changeUnitId:function(){},closeDialog:function(){this.$emit("close")},reRenderDropdown:function(){var _this2=this;this.reRender=!1,this.$nextTick((function(){_this2.reRender=!0}))},save:function(){this.$emit("columnFormatConfig",{alias:this.alias,config:(0,objectSpread2/* default */.Z)({},this.config)})},metricUnitChanged:function(initial){var _this3=this,metric=this.metricOptions.find((function(mt){return mt.metricId==_this3.config.metricId}));metric&&(this.metricUnitOptions=this.metricUnits[metric._name]),this.field.unitId>0?(this.config.unitId=this.field.unitId,this.config.displayUnit=this.editConfig&&this.config.metricId==this.editConfig.metricId?this.editConfig.displayUnit:this.field.unitId,this.converToUnitChanged(this.config.convertToUnitId)):initial&&(this.config.unitId=this.metricUnitOptions[0].unitId,this.config.displayUnit=this.metricUnitOptions[0].unitId,this.converToUnitChanged(this.config.convertToUnitId))},getDefaultMetricUnits:function(){var _this4=this;api/* API */.bl.get("/units/getDefaultMetricUnits").then((function(_ref){var data=_ref.data,metricWithUnits=data.metricWithUnits,metrics=data.metrics;_this4.metricUnits=metricWithUnits,_this4.metricOptions=metrics,_this4.field.metric>0&&(_this4.config.metricId=_this4.field.metric),_this4.metricUnitChanged(!1)}))},unitShowAtChanged:function(value){0==value?(this.config.appendUnit=!1,this.config.headerUnit=!1):1==value?(this.config.appendUnit=!1,this.config.headerUnit=!0):2==value&&(this.config.appendUnit=!0,this.config.headerUnit=!1)},converToUnitChanged:function(optn){var unit=this.metricUnitOptions.find((function(ut){return(null===ut||void 0===ut?void 0:ut.unitId)==optn}));this.config.unit=null===unit||void 0===unit?void 0:unit.symbol}}}),Components_ColumnFormatDialogvue_type_script_lang_js=ColumnFormatDialogvue_type_script_lang_js,ColumnFormatDialog_component=(0,componentNormalizer/* default */.Z)(Components_ColumnFormatDialogvue_type_script_lang_js,ColumnFormatDialogvue_type_template_id_0c1ca56f_scoped_true_render,ColumnFormatDialogvue_type_template_id_0c1ca56f_scoped_true_staticRenderFns,!1,null,"0c1ca56f",null)
/* harmony default export */,ColumnFormatDialog=ColumnFormatDialog_component.exports,ModuleSelectDialogBoxvue_type_template_id_685cacb3_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showDialog&&_vm.visibility?_c("base-dialog-box",{attrs:{visibility:_vm.visibility,onConfirm:_vm.saveModuleName,onCancel:_vm.closeDialog,disableCancel:!1,cancelText:"Cancel",confirmText:_vm.editMode?"Save":"Next",title:_vm.$t("pivot.editPopupHeader"),width:"490px"},on:{"update:visibility":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"dialog-content-body",attrs:{slot:"body"},slot:"body"},[_c("el-row",{staticClass:"input-section"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"module-text"},[_vm._v(" "+_vm._s(_vm.$t("pivot.name"))+" ")])]),_c("el-col",[_c("el-input",{staticClass:"fc-input-full-border-select2 name-field",model:{value:_vm.reportName,callback:function($$v){_vm.reportName=$$v},expression:"reportName"}}),!_vm.reportName&&_vm.validate?_c("div",{staticClass:"error-message"},[_vm._v(" Please enter Name ")]):_vm._e()],1)],1),_c("el-row",{staticClass:"input-section"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"module-text description"},[_vm._v(" "+_vm._s(_vm.$t("pivot.description"))+" ")])]),_c("el-col",[_c("el-input",{staticClass:"fc-input-full-border-select2 name-field",attrs:{type:"textarea",autosize:{minRows:2}},model:{value:_vm.description,callback:function($$v){_vm.description=$$v},expression:"description"}})],1)],1),_c("el-row",{staticClass:"input-section"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"module-text"},[_vm._v(" "+_vm._s(_vm.$t("pivot.folder"))+" ")])]),_c("el-col",[_c("el-select",{staticClass:"fc-input-full-border2 width100",attrs:{filterable:!0,"allow-create":!0,placeholder:_vm.$t("pivot.click_enter_new_folder_name")},model:{value:_vm.folderId,callback:function($$v){_vm.folderId=$$v},expression:"folderId"}},_vm._l(_vm.reportFolders,(function(folder,idx){return _c("el-option",{key:idx,attrs:{label:folder.name,value:folder.id}})})),1),!_vm.folderId&&_vm.validate?_c("div",{staticClass:"error-message"},[_vm._v(" Click enter to add new folder ")]):_vm._e()],1)],1),_c("div",{staticClass:"module-select-heading"},[_vm._v("Choose data you want to analyse")]),_c("el-row",{staticClass:"input-section"},[_c("el-col",{attrs:{span:8}},[_c("div",{staticClass:"module-text"},[_vm._v(" "+_vm._s(_vm.$t("pivot.module"))+" ")])]),_c("el-col",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",disabled:_vm.editMode,placeholder:"Module Name","popper-class":"fc-group-select",loading:_vm.moduleLoading,"loading-text":_vm.$t("pivot.loading")},model:{value:_vm.moduleNameLocal,callback:function($$v){_vm.moduleNameLocal=$$v},expression:"moduleNameLocal"}},[_c("el-option-group",{attrs:{label:_vm.$t("pivot.systemModules")}},_vm._l(_vm.moduleOptions.systemModules,(function(module,index){return _c("el-option",{key:index,attrs:{label:module.displayName,value:module.name}})})),1),_vm.moduleOptions.customModules&&_vm.moduleOptions.customModules.length>0?_c("el-option-group",{attrs:{label:_vm.$t("pivot.customModules")}},_vm._l(_vm.moduleOptions.customModules,(function(module,index){return _c("el-option",{key:index,attrs:{label:module.displayName,value:module.name}})})),1):_vm._e()],1),_vm.moduleNameLocal||!_vm.validate||_vm.editMode?_vm._e():_c("div",{staticClass:"error-message"},[_vm._v(" Please select Module ")])],1)],1)],1)]):_vm._e()],1)},ModuleSelectDialogBoxvue_type_template_id_685cacb3_scoped_true_staticRenderFns=[],ModuleSelectDialogBoxvue_type_script_lang_js=(__webpack_require__(659749),__webpack_require__(386544),{props:["visibility","moduleName","editMode","report"],components:{BaseDialogBox:BaseDialogBox/* default */.Z},created:function(){this.report&&(this.reportObject=JSON.parse(JSON.stringify(this.report)))},watch:{report:{handler:function(newState){var _newState$module,_newState$module2;this.reportObject=JSON.parse(JSON.stringify(newState)),this.reportName=newState.name,this.description=null!==newState&&void 0!==newState&&newState.description?newState.description:"",this.folderId=null!==newState&&void 0!==newState&&newState.reportFolderId?newState.reportFolderId:-1,this.moduleNameLocal=null!==newState&&void 0!==newState&&null!==(_newState$module=newState.module)&&void 0!==_newState$module&&_newState$module.name?null===newState||void 0===newState||null===(_newState$module2=newState.module)||void 0===_newState$module2?void 0:_newState$module2.name:this.moduleNameLocal},immediate:!0,deep:!0},editMode:{handler:function(newState){1==newState&&(this.showDialog=newState)},immediate:!0}},mounted:function(){this.$route.query.mName&&this.$route.query.folderId&&this.$route.query.reportName?(this.showDialog=!1,this.moduleNameLocal=this.$route.query.mName,this.folderId=this.$route.query.folderId,this.reportName=this.$route.query.reportName,this.description=this.$route.query.description?this.$route.query.description:"",this.saveModuleName()):this.loadModuleOptions()},mixins:[saveReportMixin/* default */.Z],data:function(){return{showDialog:!0,folderId:null,reportName:"",description:"",reportObject:{},validate:!1,moduleOptions:{},moduleLoading:!0,moduleNameLocal:null}},methods:{loadModuleOptions:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var resp,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,api/* API */.bl.get("/v2/automation/module");case 2:resp=_context.sent,data=resp.data,error=resp.error,error?_this.$message.error("Error loading module list"):(_this.moduleOptions.systemModules=data.modules.filter((function(e){return!e.custom})),_this.moduleOptions.customModules=data.modules.filter((function(e){return e.custom})),_this.moduleLoading=!1);case 5:case"end":return _context.stop()}}),_callee)})))()},saveModuleName:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _this2$newReport;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if((_this2.moduleNameLocal||_this2.editMode)&&_this2.folderId&&_this2.reportName||isNaN(_this2.folderId)){_context2.next=3;break}return _this2.validate=!0,_context2.abrupt("return");case 3:if(1!=_this2.editMode){_context2.next=11;break}return _this2.reportObject.name=_this2.reportName,_this2.reportObject.description=_this2.description,_this2.reportObject.reportFolderId=_this2.folderId,null!==(_this2$newReport=_this2.newReport)&&void 0!==_this2$newReport&&_this2$newReport.reportType||(_this2.newReport.reportType=5),_this2.$emit("closeDialog"),_this2.$emit("reportSaved",_this2.reportObject),_context2.abrupt("return");case 11:_this2.newReport.name=_this2.reportName,_this2.newReport.description=_this2.description,_this2.newReport.reportFolderId=_this2.folderId,isNaN(_this2.folderId)||(_this2.newReport.reportFolderId=parseInt(_this2.folderId)),_this2.newReport.reportType=5,_this2.getReportObject(),_this2.$emit("update:moduleName",_this2.moduleNameLocal),_this2.$emit("closeDialog"),_this2.$emit("moduleSelected");case 20:case"end":return _context2.stop()}}),_callee2)})))()},closeDialog:function(){this.validate=!1,this.editMode?this.$emit("closeDialog"):this.$router.go(-1)}}}),Components_ModuleSelectDialogBoxvue_type_script_lang_js=ModuleSelectDialogBoxvue_type_script_lang_js,ModuleSelectDialogBox_component=(0,componentNormalizer/* default */.Z)(Components_ModuleSelectDialogBoxvue_type_script_lang_js,ModuleSelectDialogBoxvue_type_template_id_685cacb3_scoped_true_render,ModuleSelectDialogBoxvue_type_template_id_685cacb3_scoped_true_staticRenderFns,!1,null,"685cacb3",null)
/* harmony default export */,ModuleSelectDialogBox=ModuleSelectDialogBox_component.exports,CellVisualizationDialogvue_type_template_id_cfccc5a6_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("BaseDialogBox",{attrs:{visibility:_vm.visibility,onConfirm:_vm.save,onCancel:_vm.closeDialog,cancelText:"Cancel",confirmText:"Save",title:_vm.$t("pivot.cellVisualization"),width:"40%"},on:{"update:visibility":function($event){_vm.visibility=$event}},scopedSlots:_vm._u([{key:"body",fn:function(){return[_c("div",{staticClass:"dialog-body-section",attrs:{slot:"body"},slot:"body"},[_c("div",{staticClass:"pivot-cell-visual-dialog-wrapper"},[_c("div",{staticClass:"pivot-visual-config-section width60"},[_c("div",{staticClass:"visual-data-column"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.visualType"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2  mT5 module-date-field-select width90",attrs:{filterable:"","default-first-option":!0,placeholder:"Select"},model:{value:_vm.visualConfig.visualType,callback:function($$v){_vm.$set(_vm.visualConfig,"visualType",$$v)},expression:"visualConfig.visualType"}},[_c("el-option",{key:"visual-type-option-1",attrs:{label:"Text",value:"text"}}),_c("el-option",{key:"visual-type-option-2",attrs:{label:"Data bar",value:"data-bar"}}),_c("el-option",{key:"visual-type-option-3",attrs:{label:"Compare",value:"compare"}}),_c("el-option",{key:"visual-type-option-4",attrs:{label:"Circle",value:"circle"}})],1)],1),_vm.visualConfig.visualType&&"text"!=_vm.visualConfig.visualType?_c("div",{staticClass:"progress-bar-settings"},[_c("div",{staticClass:"reference-value-difference  mT10"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.compareWith"))+" ")]),_c("el-radio-group",{staticClass:"fc-input-full-border-select2 mT10 module-select",on:{change:_vm.updateCompareWithValue},model:{value:_vm.compareWithModel,callback:function($$v){_vm.compareWithModel=$$v},expression:"compareWithModel"}},[_c("el-radio-button",{attrs:{label:_vm.$t("pivot.maxValue")}}),_c("el-radio-button",{attrs:{label:_vm.$t("pivot.constant")}}),_c("el-radio-button",{attrs:{label:_vm.$t("pivot.referenceColumn")}})],1)],1),"referenceColumn"==_vm.visualConfig.compareWith?_c("div",{staticClass:"reference-data-column"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.referenceColumn"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2  mT5 module-date-field-select width90",attrs:{filterable:"",placeholder:"Select"},model:{value:_vm.visualConfig.referenceAlias,callback:function($$v){_vm.$set(_vm.visualConfig,"referenceAlias",$$v)},expression:"visualConfig.referenceAlias"}},_vm._l(_vm.referenceOptions,(function(dataColumn,index){return _c("el-option",{key:"reference-data-field-option"+index,attrs:{label:dataColumn.label,value:dataColumn.alias}})})),1)],1):_vm._e(),"constant"==_vm.visualConfig.compareWith?_c("div",{staticClass:"reference-data-column "},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.constantValue"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2 mT10 width90",attrs:{placeholder:"Constant Value"},model:{value:_vm.visualConfig.constantValue,callback:function($$v){_vm.$set(_vm.visualConfig,"constantValue",$$v)},expression:"visualConfig.constantValue"}})],1):_vm._e(),_c("el-row",{staticClass:"color-picker-section-fill-color  mT10"},[_vm.showFillColor?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fill-color-wrapper"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25 mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.fillColor"))+" ")]),_c("div",{staticClass:"fc-color-picker card-color-container mT5"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:_vm.visualConfig.fillColor,callback:function($$v){_vm.$set(_vm.visualConfig,"fillColor",$$v)},expression:"visualConfig.fillColor"}})],1)])]):_vm._e(),_vm.showTextColor?_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"text-color"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25  mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.textColor"))+" ")]),_c("div",{staticClass:"fc-color-picker card-color-container mT5"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:_vm.visualConfig.textColor,callback:function($$v){_vm.$set(_vm.visualConfig,"textColor",$$v)},expression:"visualConfig.textColor"}})],1)])]):_vm._e()],1),_vm.showArrowColor?_c("el-row",{staticClass:"color-picker-section-arrow-color  mT10"},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fill-color-wrapper"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25 mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.upArrowColor"))+" ")]),_c("div",{staticClass:"fc-color-picker card-color-container mT5"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:_vm.visualConfig.upArrowColor,callback:function($$v){_vm.$set(_vm.visualConfig,"upArrowColor",$$v)},expression:"visualConfig.upArrowColor"}})],1)])]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"text-color"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25  mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.downArrowColor"))+" ")]),_c("div",{staticClass:"fc-color-picker card-color-container mT5"},[_c("el-color-picker",{attrs:{predefine:_vm.getPredefinedColors()},model:{value:_vm.visualConfig.downArrowColor,callback:function($$v){_vm.$set(_vm.visualConfig,"downArrowColor",$$v)},expression:"visualConfig.downArrowColor"}})],1)])])],1):_vm._e(),_vm.showValueOption?_c("div",{staticClass:"display-value mT10"},[_c("el-checkbox",{staticClass:"fc-grey7-12 f14 text-left line-height25  mT15",model:{value:_vm.visualConfig.showValue,callback:function($$v){_vm.$set(_vm.visualConfig,"showValue",$$v)},expression:"visualConfig.showValue"}},[_vm._v(_vm._s(_vm.$t("pivot.showValue")))])],1):_vm._e()],1):_vm._e()]),_c("div",{staticClass:"pivot-visual-preview-section width40 mT10 mL20"},[_c("div",{staticClass:"fc-grey7-12 f14 text-left line-height25  mb5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.preview"))+" ")]),"data-bar"==_vm.previewVisualType?_c("data-bar-view",{attrs:{value:_vm.previewValue,referenceValue:_vm.previewReferenceValue,visualConfig:_vm.visualConfig}}):"compare"==_vm.previewVisualType?_c("compare-view",{attrs:{value:_vm.previewValue,referenceValue:_vm.previewReferenceValue,visualConfig:_vm.visualConfig}}):"circle"==_vm.previewVisualType?_c("circle-view",{attrs:{value:_vm.previewValue,referenceValue:_vm.previewReferenceValue,visualConfig:_vm.visualConfig}}):_c("div",{staticClass:"text-preview"},[_vm._v(" "+_vm._s(_vm.previewValue)+" ")])],1)])])]},proxy:!0}])})},CellVisualizationDialogvue_type_template_id_cfccc5a6_scoped_true_staticRenderFns=[],DataBarView=__webpack_require__(959252),CompareView=__webpack_require__(51928),CircleView=__webpack_require__(971669),CellVisualizationDialogvue_type_script_lang_js={props:["alias","editConfig","visibility","referenceDataColumnOptions"],components:{DataBarView:DataBarView/* default */.Z,CompareView:CompareView/* default */.Z,CircleView:CircleView/* default */.Z,BaseDialogBox:BaseDialogBox/* default */.Z},data:function(){return{visualConfig:{visualType:"text",compareWith:"maxValue",referenceAlias:null,constantValue:null,showValue:!1,upArrowColor:null,downArrowColor:null},compareWithModel:"Max value"}},computed:{referenceOptions:function(){var _this=this;return this.referenceDataColumnOptions.filter((function(option){return option.alias!=_this.alias}))},showFillColor:function(){return this.visualConfig.visualType&&"text"!=this.visualConfig.visualType&&"compare"!=this.visualConfig.visualType},showValueOption:function(){return this.visualConfig.visualType&&"text"!=this.visualConfig.visualType&&"compare"!=this.visualConfig.visualType},showTextColor:function(){return this.visualConfig&&"data-bar"==this.visualConfig.visualType},showArrowColor:function(){return this.visualConfig.visualType&&"compare"==this.visualConfig.visualType},previewVisualType:function(){return this.visualConfig.visualType},previewValue:function(){return 7},previewReferenceValue:function(){return 10}},mounted:function(){if(this.editConfig&&this.editConfig.visualType){this.visualConfig=JSON.parse(JSON.stringify(this.editConfig));var compareWith=this.visualConfig.compareWith;"maxValue"==compareWith?this.compareWithModel="Max value":"constant"==compareWith?this.compareWithModel="Constant":"referenceColumn"==compareWith&&(this.compareWithModel="Reference column")}},methods:{closeDialog:function(){this.$emit("closeDialog")},save:function(){this.$emit("cellVisualizationConfigAdded",{alias:this.alias,visualConfig:(0,objectSpread2/* default */.Z)({},this.visualConfig)})},getPredefinedColors:function(){return colors/* default */.Z.readingcardColors},updateCompareWithValue:function(label){"Max value"==label?this.visualConfig.compareWith="maxValue":"Constant"==label?this.visualConfig.compareWith="constant":"Reference column"==label&&(this.visualConfig.compareWith="referenceColumn")}}},Components_CellVisualizationDialogvue_type_script_lang_js=CellVisualizationDialogvue_type_script_lang_js,CellVisualizationDialog_component=(0,componentNormalizer/* default */.Z)(Components_CellVisualizationDialogvue_type_script_lang_js,CellVisualizationDialogvue_type_template_id_cfccc5a6_scoped_true_render,CellVisualizationDialogvue_type_template_id_cfccc5a6_scoped_true_staticRenderFns,!1,null,"cfccc5a6",null)
/* harmony default export */,CellVisualizationDialog=CellVisualizationDialog_component.exports,PivotUserFilterDialogBoxvue_type_template_id_51b16bfc_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("base-dialog-box",{attrs:{visibility:_vm.visibility,onConfirm:_vm.save,onClearAll:_vm.clearAll,disableConfirm:_vm.isFilterEmpty,onCancel:_vm.closeDialog,cancelText:"Cancel",confirmText:"Save",title:_vm.$t("pivot.filters"),width:"642px"},on:{"update:visibility":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"dialog-content-body pT20",staticStyle:{"margin-bottom":"20px"},attrs:{slot:"body"},slot:"body"},[_c("div",{staticClass:"time-line-filter-section"},[_c("div",{staticClass:"pivot-user-filter"},[_c("el-row",{staticStyle:{display:"flex"}},[_c("el-col",{staticStyle:{width:"15%"}},[_vm._v(" "+_vm._s(_vm.$t("pivot.userFilter")))]),_c("el-col",[_c("el-switch",{staticStyle:{"margin-top":"-3px"},model:{value:_vm.enableUserFilter,callback:function($$v){_vm.enableUserFilter=$$v},expression:"enableUserFilter"}})],1)],1)],1),_vm.enableUserFilter?_c("div",{staticClass:"userfilter-select-section"},[_c("el-row",[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"date-filter-label f13"},[_vm._v(" "+_vm._s(_vm.$t("pivot.dateFilter"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width60 mT5 date-field-select",attrs:{filterable:"",placeholder:"None"},model:{value:_vm.dateFieldIdModel,callback:function($$v){_vm.dateFieldIdModel=$$v},expression:"dateFieldIdModel"}},_vm._l(_vm.allDateFields,(function(dateField,index){return _c("el-option",{key:"date-field-option"+index,attrs:{label:dateField.displayName,value:dateField.id}})})),1)],1)],1),_c("el-row",[_c("el-col",{attrs:{span:6}},[_c("div",{staticClass:"date-filter-label f13"},[_vm._v(" "+_vm._s(_vm.$t("pivot.skip_in_drilldown"))+" ")])]),_c("el-col",{attrs:{span:12}},[_c("el-checkbox",{staticClass:"mT15 mL5 scope-txt14 scope-border",on:{change:function($event){return _vm.$emit("disableFilterInDrilldown",_vm.disableFilterInDrilldown)}},model:{value:_vm.disableFilterInDrilldown,callback:function($$v){_vm.disableFilterInDrilldown=$$v},expression:"disableFilterInDrilldown"}})],1)],1),_vm.dateValidMsg?_c("div",{staticStyle:{"margin-top":"15px"}},[_c("span",{staticStyle:{color:"#f56c6c"}},[_vm._v("Please select any value")])]):_vm._e()],1):_vm._e()]),_c("div",{staticClass:"mT35"},[_c("span",[_vm._v("Criteria")]),_c("el-switch",{staticStyle:{"margin-left":"26px"},model:{value:_vm.criteriaEnabled,callback:function($$v){_vm.criteriaEnabled=$$v},expression:"criteriaEnabled"}})],1),_vm.criteriaEnabled?_c("div",{staticClass:"criteria-section",on:{click:function($event){_vm.criteriaValidMsg=!1}}},[_c("CriteriaBuilder",{attrs:{moduleName:_vm.moduleName},model:{value:_vm.criteriaModel,callback:function($$v){_vm.criteriaModel=$$v},expression:"criteriaModel"}}),_vm.criteriaValidMsg?_c("div",[_c("span",{staticStyle:{color:"#f56c6c","margin-left":"9px"}},[_vm._v("Please add valid criteria")])]):_vm._e()],1):_vm._e()])])],1)},PivotUserFilterDialogBoxvue_type_template_id_51b16bfc_scoped_true_staticRenderFns=[],isEqual=(__webpack_require__(795765),__webpack_require__(879288),__webpack_require__(821552),__webpack_require__(618446)),isEqual_default=__webpack_require__.n(isEqual),PivotUserFilterDialogBoxvue_type_script_lang_js={props:["visibility","moduleName","criteria","dateFieldId","dateFields","disableUserFilterInDrilldown"],components:{BaseDialogBox:BaseDialogBox/* default */.Z,CriteriaBuilder:dist/* CriteriaBuilder */.IP},watch:{dateFieldIdModel:{handler:function(newVal){isEqual_default()(newVal,this.dateFieldId)||(this.isFilterEmpty=!1)}},criteriaModel:{handler:function(newVal){null!=newVal&&(this.criteriaEnabled=!0),isEqual_default()(newVal,this.criteria)||(this.isFilterEmpty=!1)},deep:!0},enableUserFilter:function(newVal){0==newVal&&(this.dateFieldIdModel=-1)},criteriaEnabled:function(newVal){0==newVal&&(this.criteriaModel=null)},criteria:function(newVal){this.criteriaModel=(0,utility_methods/* deepCloneObject */.kh)(newVal)}},data:function(){return{criteriaModel:null,isFilterEmpty:!0,dateFieldIdModel:null,dateValidMsg:null,enableUserFilter:!1,criteriaEnabled:!1,allDateFields:[],criteriaValidMsg:!1,disableFilterInDrilldown:!1}},created:function(){this.disableFilterInDrilldown=this.disableUserFilterInDrilldown,this.criteriaValidMsg=!1,this.updateNoneInDateFields(),this.dateFieldId<0||(this.enableUserFilter=!0),this.criteriaModel=(0,utility_methods/* deepCloneObject */.kh)(this.criteria),this.dateFieldIdModel=this.dateFieldId>0?this.dateFieldId:null,this.criteriaEnabled||this.enableUserFilter||(this.isFilterEmpty=!0)},methods:{updateNoneInDateFields:function(){var _this=this,none_date_field={label:"None",id:-1,value:-1,displayName:"None"};this.allDateFields.push(none_date_field),this.dateFields&&this.dateFields.length&&this.dateFields.forEach((function(date_field){_this.allDateFields.push(date_field)}))},isValidCriteria:function(criteria){if(!criteria.conditions)return!1;var conditions=criteria.conditions;for(var key in conditions)if(Number.isInteger(Number.parseInt(key))){var condition=conditions[key];if((0,validation/* isEmpty */.xb)(condition)||(0,validation/* isEmpty */.xb)(condition.operatorId)||(0,validation/* isEmpty */.xb)(condition.fieldName))return!1}return!0},closeDialog:function(){this.$emit("update:visibility",!1)},save:function(){
//on save update saved criteria  state in parent comp
//   if (!this.criteriaEnabled) {
//     this.criteriaModel = null
//   }
//   if (!(this.criteriaModel && this.isValidCriteria(this.criteriaModel))) {
//     this.criteriaValidMsg = true
//     return
//   }
//   if (this.enableUserFilter && this.dateFieldIdModel < 0) {
//     this.dateValidMsg = true
//     return
//   }
//   if (!this.enableUserFilter) this.dateFieldIdModel = -1
//   this.$emit('save', this.criteriaModel, this.dateFieldIdModel)
// },
if(!this.isFilterEmpty){if(this.criteriaEnabled&&(!this.criteriaModel||!this.isValidCriteria(this.criteriaModel)))return void(this.criteriaValidMsg=!0);if(this.enableUserFilter&&this.dateFieldIdModel<0)return void(this.dateValidMsg=!0);this.enableUserFilter||(this.dateFieldIdModel=-1),this.$emit("save",this.criteriaModel,this.dateFieldIdModel)}},clearAll:function(){this.enableUserFilter=!1,this.criteriaEnabled=!1}}},Components_PivotUserFilterDialogBoxvue_type_script_lang_js=PivotUserFilterDialogBoxvue_type_script_lang_js,PivotUserFilterDialogBox_component=(0,componentNormalizer/* default */.Z)(Components_PivotUserFilterDialogBoxvue_type_script_lang_js,PivotUserFilterDialogBoxvue_type_template_id_51b16bfc_scoped_true_render,PivotUserFilterDialogBoxvue_type_template_id_51b16bfc_scoped_true_staticRenderFns,!1,null,"51b16bfc",null)
/* harmony default export */,PivotUserFilterDialogBox=PivotUserFilterDialogBox_component.exports,PivotThemeCustomizationvue_type_template_id_2dd76567_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{placement:"bottom-start"},model:{value:_vm.visible,callback:function($$v){_vm.visible=$$v},expression:"visible"}},[_c("div",{staticClass:"pivot-theme-customization"},[_c("div",{staticClass:"theme-text-color text-left line-height25 mB10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.fontSize"))+" ")]),_c("el-radio",{staticClass:"theme-text-color",attrs:{label:"small"},model:{value:_vm.themeConfig.fontSize,callback:function($$v){_vm.$set(_vm.themeConfig,"fontSize",$$v)},expression:"themeConfig.fontSize"}},[_c("span",{staticClass:"theme-text-color"},[_vm._v(_vm._s(_vm.$t("pivot.small")))])]),_c("el-radio",{staticClass:"theme-text-color",attrs:{label:"medium"},model:{value:_vm.themeConfig.fontSize,callback:function($$v){_vm.$set(_vm.themeConfig,"fontSize",$$v)},expression:"themeConfig.fontSize"}},[_c("span",{staticClass:"theme-text-color"},[_vm._v(_vm._s(_vm.$t("pivot.medium")))])]),_c("el-radio",{staticClass:"theme-text-color",attrs:{label:"large"},model:{value:_vm.themeConfig.fontSize,callback:function($$v){_vm.$set(_vm.themeConfig,"fontSize",$$v)},expression:"themeConfig.fontSize"}},[_c("span",{staticClass:"theme-text-color"},[_vm._v(_vm._s(_vm.$t("pivot.large")))])]),_c("div",{staticClass:"theme-text-color text-left line-height25 mT10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.themeColor"))+" ")]),_c("div",{staticClass:"theme-color-selection-container pB10"},_vm._l(_vm.pivotThemeOptions,(function(theme){return _c("div",{key:"pivotTheme-"+theme.color,staticClass:"theme-color-box",class:{"active-theme":theme.class===_vm.themeConfig.class},style:{"background-color":theme.color},on:{click:function($event){_vm.themeConfig.class=theme.class}}})})),0),_c("div",{staticClass:"theme-text-color text-left line-height25 mT5"},[_vm._v(" "+_vm._s(_vm.$t("pivot.grid"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100 mT10 theme-text-color",attrs:{filterable:"",placeholder:"Select"},model:{value:_vm.themeConfig.grid,callback:function($$v){_vm.$set(_vm.themeConfig,"grid",$$v)},expression:"themeConfig.grid"}},[_c("el-option",{staticClass:"f13",attrs:{label:_vm.$t("pivot.both"),value:"both"}}),_c("el-option",{staticClass:"f13",attrs:{label:_vm.$t("pivot.horizontal"),value:"horizontal"}}),_c("el-option",{staticClass:"f13",attrs:{label:_vm.$t("pivot.vertical"),value:"vertical"}}),_c("el-option",{staticClass:"f13",attrs:{label:_vm.$t("pivot.none"),value:"none"}})],1),_c("div",{staticClass:"theme-text-color text-left line-height25 mT10"},[_c("PivotRowHeightCustomization",{attrs:{initialRowHieght:_vm.initialRowHieght},on:{rowHeightChanged:function($event){return _vm.$emit("rowHeightChanged",$event)}}})],1),_c("div",{staticClass:"mT10"},[_c("div",{staticClass:"pB15"},[_c("span",{staticClass:"theme-text-color mR10"},[_vm._v(_vm._s(_vm.$t("pivot.showRowNumbers")))]),_c("el-switch",{staticStyle:{"margin-left":"72px"},model:{value:_vm.themeConfig.number,callback:function($$v){_vm.$set(_vm.themeConfig,"number",$$v)},expression:"themeConfig.number"}})],1),_c("div",[_c("span",{staticClass:"theme-text-color mR10 ",staticStyle:{"padding-right":"14px"}},[_vm._v(_vm._s(_vm.$t("pivot.stripes")))]),_c("el-switch",{staticStyle:{"margin-left":"72px"},model:{value:_vm.themeConfig.stripe,callback:function($$v){_vm.$set(_vm.themeConfig,"stripe",$$v)},expression:"themeConfig.stripe"}})],1)])],1),_c("div",{staticClass:"theme-label-container pivot-tab-hover",staticStyle:{"margin-left":"16px"},attrs:{slot:"reference"},slot:"reference"},[_c("inline-svg",{staticClass:"vertical-middle",attrs:{src:"svgs/pivot/themes",iconClass:"icon icon-sm-md"}}),_c("span",{staticClass:"theme-text-color",staticStyle:{"padding-left":"4px","vertical-align":"-1px"}},[_vm._v(_vm._s(_vm.$t("pivot.theme")))])],1)])},PivotThemeCustomizationvue_type_template_id_2dd76567_scoped_true_staticRenderFns=[],PivotRowHeightCustomizationvue_type_template_id_1e8db977_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"pivot-row-height-customization"},[_c("div",{staticClass:"theme-text-color text-left line-height25 mB10"},[_vm._v(" "+_vm._s(_vm.$t("pivot.rowHeight"))+" ")]),_c("el-radio",{staticClass:"theme-text-color",attrs:{label:"SMALL"},model:{value:_vm.density,callback:function($$v){_vm.density=$$v},expression:"density"}},[_c("span",{staticClass:"theme-text-color"},[_vm._v(_vm._s(_vm.$t("pivot.small")))])]),_c("el-radio",{staticClass:"theme-text-color",attrs:{label:"MEDIUM"},model:{value:_vm.density,callback:function($$v){_vm.density=$$v},expression:"density"}},[_c("span",{staticClass:"theme-text-color"},[_vm._v(_vm._s(_vm.$t("pivot.medium")))])]),_c("el-radio",{staticClass:"theme-text-color",attrs:{label:"LARGE"},model:{value:_vm.density,callback:function($$v){_vm.density=$$v},expression:"density"}},[_c("span",{staticClass:"theme-text-color"},[_vm._v(_vm._s(_vm.$t("pivot.large")))])])],1)},PivotRowHeightCustomizationvue_type_template_id_1e8db977_scoped_true_staticRenderFns=[],PivotRowHeightCustomizationvue_type_script_lang_js={props:["initialRowHieght"],watch:{density:function(newVal){this.$emit("rowHeightChanged",newVal)}},mounted:function(){this.initialRowHieght&&(this.density=this.initialRowHieght)},data:function(){return{visible:!1,density:"SMALL"}}},Components_PivotRowHeightCustomizationvue_type_script_lang_js=PivotRowHeightCustomizationvue_type_script_lang_js,PivotRowHeightCustomization_component=(0,componentNormalizer/* default */.Z)(Components_PivotRowHeightCustomizationvue_type_script_lang_js,PivotRowHeightCustomizationvue_type_template_id_1e8db977_scoped_true_render,PivotRowHeightCustomizationvue_type_template_id_1e8db977_scoped_true_staticRenderFns,!1,null,"1e8db977",null)
/* harmony default export */,PivotRowHeightCustomization=PivotRowHeightCustomization_component.exports,PivotThemeCustomizationvue_type_script_lang_js={props:["initialTheme","initialRowHieght"],watch:{themeConfig:{handler:function(newVal){this.$emit("themeConfigChanged",newVal)},deep:!0}},components:{PivotRowHeightCustomization:PivotRowHeightCustomization},mounted:function(){this.initialTheme?this.themeConfig=JSON.parse(JSON.stringify(this.initialTheme)):this.themeConfig=PivotDefaults/* defaultTheme */.uH,this.$delete(this.themeConfig,"density")},data:function(){return{themeConfig:{},visible:!1,pivotThemeOptions:[{class:"default",color:"#f3f1fc"},{class:"blue",color:"#1a77bc"},{class:"teal",color:"#4b9789"},{class:"purple",color:"#7f56c2"},{class:"black-orange",color:"#fadfd3"},{class:"bright-orange ",color:"#ec743c"},{class:"yellow",color:"#f9c132"},{class:"green",color:"#bef19c"},{class:"mac-os",color:"#ebeaed"},{class:"mid-night",color:"#222323"}]}}},Components_PivotThemeCustomizationvue_type_script_lang_js=PivotThemeCustomizationvue_type_script_lang_js,PivotThemeCustomization_component=(0,componentNormalizer/* default */.Z)(Components_PivotThemeCustomizationvue_type_script_lang_js,PivotThemeCustomizationvue_type_template_id_2dd76567_scoped_true_render,PivotThemeCustomizationvue_type_template_id_2dd76567_scoped_true_staticRenderFns,!1,null,"2dd76567",null)
/* harmony default export */,PivotThemeCustomization=PivotThemeCustomization_component.exports,HideColumnsCustomizationvue_type_template_id_202c61a6_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{placement:"bottom"},model:{value:_vm.visible,callback:function($$v){_vm.visible=$$v},expression:"visible"}},[_c("div",{staticClass:"hide-column-customize"},_vm._l(_vm.columnConfig,(function(conf,index){return _c("div",{key:index,staticClass:"single-hide-column-container"},[_c("div",{staticClass:"column-label-container"},[_vm._v(" "+_vm._s(conf.label)+" ")]),_c("el-switch",{model:{value:conf.hideColumn,callback:function($$v){_vm.$set(conf,"hideColumn",$$v)},expression:"conf.hideColumn"}})],1)})),0),_c("div",{staticClass:"hide-label-container pivot-tab-hover",staticStyle:{"margin-left":"16px"},attrs:{slot:"reference"},slot:"reference"},[_c("i",{staticClass:"el-icon-view",staticStyle:{height:"16px",width:"16px","font-weight":"600 !important",transform:"scale(1.1)"}}),_vm._v(" "+_vm._s(_vm.$t("pivot.hideColumns"))+" ")])])},HideColumnsCustomizationvue_type_template_id_202c61a6_scoped_true_staticRenderFns=[],HideColumnsCustomizationvue_type_script_lang_js={props:["columnConfig"],data:function(){return{visible:!1}}},Components_HideColumnsCustomizationvue_type_script_lang_js=HideColumnsCustomizationvue_type_script_lang_js,HideColumnsCustomization_component=(0,componentNormalizer/* default */.Z)(Components_HideColumnsCustomizationvue_type_script_lang_js,HideColumnsCustomizationvue_type_template_id_202c61a6_scoped_true_render,HideColumnsCustomizationvue_type_template_id_202c61a6_scoped_true_staticRenderFns,!1,null,"202c61a6",null)
/* harmony default export */,HideColumnsCustomization=HideColumnsCustomization_component.exports,RowLimitvue_type_template_id_9ac6ee36_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{attrs:{placement:"bottom"},on:{hide:function($event){return _vm.$emit("rowsCountUpdated")}},model:{value:_vm.visible,callback:function($$v){_vm.visible=$$v},expression:"visible"}},[_c("div",{staticClass:"hide-column-customize"},[_c("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[_c("span",{staticStyle:{"margin-bottom":"0","margin-right":"5px"}},[_vm._v("No. of Rows")]),_c("el-input",{staticClass:"fc-input-full-border-select2 name-field",staticStyle:{width:"100px"},attrs:{type:"number",min:1,max:2e3},model:{value:_vm.config.sortBy.limit,callback:function($$v){_vm.$set(_vm.config.sortBy,"limit",_vm._n($$v))},expression:"config.sortBy.limit"}})],1),_vm.showLimitBubble?_c("div",{staticStyle:{color:"grey",opacity:"0.7"}},[_c("span",{staticStyle:{color:"red"}},[_vm._v("*")]),_c("i",[_vm._v("Modify row limit to view more data")])]):_vm._e()]),_c("div",{staticClass:"row-count-label-container pivot-tab-hover",staticStyle:{"margin-left":"16px"},attrs:{slot:"reference"},slot:"reference"},[_vm.showLimitBubble?_c("img",{staticStyle:{"margin-top":"1px",scale:"1.3"},attrs:{src:__webpack_require__(225800),iconClass:"icon icon-sm-md ",height:"15px",width:"16px"}}):_c("img",{staticStyle:{"margin-top":"1px",scale:"1.2"},attrs:{src:__webpack_require__(152897),height:"15px",width:"15px"}}),_c("span",{staticStyle:{"margin-left":"8px"}},[_vm._v(_vm._s(_vm.$t("pivot.rowLimit")))])])])},RowLimitvue_type_template_id_9ac6ee36_staticRenderFns=[],RowLimitvue_type_script_lang_js={props:["config","recordCount"],data:function(){return{visible:!1,showLimitBubble:!1}},watch:{"config.showLimitBubble":function(newval){this.showLimitBubble=newval}}},Components_RowLimitvue_type_script_lang_js=RowLimitvue_type_script_lang_js,RowLimit_component=(0,componentNormalizer/* default */.Z)(Components_RowLimitvue_type_script_lang_js,RowLimitvue_type_template_id_9ac6ee36_render,RowLimitvue_type_template_id_9ac6ee36_staticRenderFns,!1,null,null,null)
/* harmony default export */,RowLimit=RowLimit_component.exports,PivotBuilderNewvue_type_script_lang_js={name:"PivotBuilder",props:["id"],components:{PivotTable:PivotTable/* default */.Z,ColumnFormatDialog:ColumnFormatDialog,SavePivotReportComponent:SavePivotReportComponent,ConditionalFormatDialog:ConditionalFormatDialog,CellVisualizationDialog:CellVisualizationDialog,PivotDimentions:PivotDimentions,ModuleSelectDialogBox:ModuleSelectDialogBox,PivotMeasures:PivotMeasures,PivotUserFilterDialogBox:PivotUserFilterDialogBox,PivotThemeCustomization:PivotThemeCustomization,HideColumnsCustomization:HideColumnsCustomization,RowLimit:RowLimit},created:function(){var _this=this;this.$route.query.module&&!this.$route.query.reportId&&api/* API */.bl.get("v2/modules/meta/".concat(this.$route.query.module)).then((function(_ref){var error=_ref.error;error||(_this.isModuleAvailable=!0,_this.config.moduleName=_this.$route.query.module)})),this.loadModuleOptions().then((function(){var reportId=_this.$route.query.reportId;reportId&&(_this.loadReportFolders(),api/* API */.bl.post("v2/report/executePivotReport",{reportId:reportId}).then((function(_ref2){var data=_ref2.data;_this.config.moduleName=data.report.module.name,_this.config.templateJSON=data.pivotTemplateJSON,_this.config.sortBy=data.sorting,_this.loadDateFields(),_this.reportObject.name=data.report.name,_this.config.rows=data.rows,_this.config.data=data.data,_this.config.values=data.values,_this.config.formula=data.formula,_this.config.criteria=data.criteria,_this.config.startTime=data.startTime,_this.config.endTime=data.endTime,
// if (data.startTime != -1 || data.endTime != -1) {
//   this.config.showTimelineFilter = true
// }
_this.reportObject=data.report,_this.reportObject.reportType=5,_this.config.showTimelineFilter=data.dateField>0,_this.config.showTimelineFilter&&(_this.config.dateOperator=data.dateOperator,_this.config.dateValue=data.dateOperatorValue,_this.config.dateFieldId=data.dateField,(0,validation/* isEmpty */.xb)(data.dateOffset)||(_this.config.dateOffset=data.dateOffset)),_this.tableLoading=!0,_this.isModuleAvailable=!0,_this.pivotTable=data,_this.tableLoading=!1,
// this.configChanged()
null!==data&&void 0!==data&&data.showLimitBubble?_this.$set(_this.config,"showLimitBubble",data.showLimitBubble):_this.$set(_this.config,"showLimitBubble",!1)})))}))},mounted:function(){(this.$route.query.module||this.$route.query.reportId)&&(this.moduleSlectVisibility=!1,this.spinnerStatToggle(3))},watch:{"config.moduleName":{immediate:!0,handler:function(){
//clear all options when module changes
this.$route.query.reportId||(this.config.rows=[],this.config.data=[],this.config.formula=[],this.loadDateFields(),this.loadReportFolders())}},"config.templateJSON.theme.number":{immediate:!0,handler:function(){this.configChanged()}}},computed:{isNewPivotReport:function(){return!this.reportId},reportFolderName:function(){var _this$reportFolders$f,_this2=this;return this.reportObject&&this.reportObject.reportFolderId>0&&!isNaN(this.reportObject.reportFolderId)&&this.reportFolders?null===(_this$reportFolders$f=this.reportFolders.find((function(rep){return rep.id===_this2.reportObject.reportFolderId})))||void 0===_this$reportFolders$f?void 0:_this$reportFolders$f.name:this.reportObject.reportFolderId?this.reportObject.reportFolderId:"Default"},reportId:function(){var reportId=this.id;return reportId&&!isNaN(reportId)?parseInt(reportId):null},isEditView:function(){return!!this.$route.query.reportId},dateFieldOptions:function(){var options=[];options.push({id:-99,displayName:"None"});var dateFields=this.dateFields||[];return options.push.apply(options,(0,toConsumableArray/* default */.Z)(dateFields)),options},isNoConfig:function(){return!(this.config.rows.length>0&&this.config.values.length>0)},referenceDataColumnOptions:function(){var _this$pivotTable,_this$pivotTable2,_this3=this;if(null===(_this$pivotTable=this.pivotTable)||void 0===_this$pivotTable||!_this$pivotTable.pivotAliasVsField)return[];var fielsAliases=Object.keys(null===(_this$pivotTable2=this.pivotTable)||void 0===_this$pivotTable2?void 0:_this$pivotTable2.pivotAliasVsField),formulaValidFieldAliases=[],pivotFieldMapLocal=[];return fielsAliases.forEach((function(key){if(key.startsWith("data"))formulaValidFieldAliases.push(key);else{var _this3$pivotTable,field=null===(_this3$pivotTable=_this3.pivotTable)||void 0===_this3$pivotTable?void 0:_this3$pivotTable.pivotAliasVsField[key];((0,field_utils/* isNumberField */.Z2)(field)||(0,field_utils/* isDecimalField */.No)(field))&&formulaValidFieldAliases.push(key)}})),formulaValidFieldAliases.forEach((function(alias){pivotFieldMapLocal.push({alias:alias,label:_this3.config.templateJSON.columnFormatting[alias].label})})),pivotFieldMapLocal},pivotFieldMap:function(){var _this$pivotTable3,_this4=this,fielsAliases=Object.keys(null===(_this$pivotTable3=this.pivotTable)||void 0===_this$pivotTable3?void 0:_this$pivotTable3.pivotAliasVsField),formulaValidFieldAliases=[],pivotFieldMapLocal=[];return fielsAliases.forEach((function(key){key.startsWith("formula")||formulaValidFieldAliases.push(key)})),formulaValidFieldAliases.forEach((function(alias){pivotFieldMapLocal.push({alias:alias,paramAlias:_this4.getCharAlias(alias),label:_this4.config.templateJSON.columnFormatting[alias].label})})),pivotFieldMapLocal.sort((function(a,b){return a.paramAlias>b.paramAlias?1:-1})),pivotFieldMapLocal}},data:function(){return{datePeriodOptions:PivotDefaults/* datePeriodOptions */.SD,editMode:!1,recordCount:0,spinnerStat:{measures:!0,dimensions:!0},draggableOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0},isModuleAvailable:!1,editConfig:null,
// edit config
editIndex:-1,
// edit index
formatConfig:null,moduleLoading:!0,moduleOptions:{systemModules:[],customModules:[]},rowOptions:[],
/**  PIVOT MODULE,ROW,DATA AND COLUMNS*/
showAddCriteriaDialog:!1,dateFields:null,showSidePanel:!0,
/** *****************/
showAddRowDialog:!1,showAddDataDialog:!1,showAddFormulaDialog:!1,moduleSlectVisibility:!0,fetchPivotDataError:!1,leftPaneVisibility:!0,leftPaneActiveTab:"CONFIG",
//CONFIG || SETTINGS
tableLoading:!1,reportObject:{name:"",reportType:5},reportFolders:[],activeColumn:null,pivotTable:null,pivotThemeOptions:PivotDefaults/* pivotThemeOptions */.Jr,charAliasMap:{},config:{showTimelineFilter:!1,templateJSON:{theme:PivotDefaults/* defaultTheme */.uH,columnFormatting:{},diable_userfilter_drillown:!1},builderV2:!0,moduleName:null,criteria:null,rows:[],values:[],formula:[],drillDown:2,dateOperator:28,dateValue:null,dateFieldId:-99,startTime:-1,endTime:-1,sortBy:{alias:null,order:3,limit:50},showLimitBubble:!1},columnFormatConfig:{field:null,visibility:!1,isDataColumn:!1},conditionalFormatConfig:{variables:[],visibility:!1,prop:null,editConfig:{}},cellVisualizationConfig:{alias:null,visibility:!1,editConfig:{}}}},methods:{disableFilterInDrilldown:function(prop){this.config.templateJSON.diable_userfilter_drillown=prop},getBreadCrumbPath:function(type){if((0,router/* isWebTabsEnabled */.tj)()){var _findRouteForTab=(0,router/* findRouteForTab */.OD)(router/* pageTypes */.As.PIVOT_VIEW),name=_findRouteForTab.name;return 2==type?this.$router.resolve({name:name}).href:3==type?this.$router.resolve({name:name,query:{folderId:this.reportObject.reportFolderId}}).href:this.$route.fullPath}return 1==type?"/app/em/analytics":2==type?"/app/em/pivot/view":3==type?"/app/em/pivot/view?folderId=".concat(this.reportObject.reportFolderId):void 0},handleTableSortIconClick:function(newSortBy){this.config.sortBy=newSortBy,this.configChanged()},setRecordCount:function(val){this.recordCount=val},spinnerStatToggle:function(val){1==val?this.spinnerStat.dimensions=!0:2==val?this.spinnerStat.measures=!0:3==val?(this.spinnerStat.dimensions=!1,this.spinnerStat.measures=!1):4==val&&(this.spinnerStat.dimensions=!0,this.spinnerStat.measures=!0)},headerLabelChanged:function(_ref3){var prop=_ref3.prop,label=_ref3.label;this.config.templateJSON.columnFormatting[prop].label=label,this.pivotTable.pivotReconstructedData.headers[prop]=label},toggleTimelineFilter:function(val){
//on enabling filter pivottable doesn't emit pickerChange ,only on subsequent changes so set initial start and endtimes here
if(val){var _NewDateHelper$getDat=(0,slicedToArray/* default */.Z)(NewDateHelper/* default */.Z.getDatePickerObject(this.config.dateOperator,this.config.dateValue).value,2),startTime=_NewDateHelper$getDat[0],endTime=_NewDateHelper$getDat[1];this.config.startTime=startTime,this.config.endTime=endTime,this.config.dateValue=startTime+","+endTime}else this.config.startTime=-1,this.config.endTime=-1;this.configChanged()},handlePickerChange:function(datePickerObj){
//set current state of date picker in config object
var _datePickerObj$value=(0,slicedToArray/* default */.Z)(datePickerObj.value,2),startTime=_datePickerObj$value[0],endTime=_datePickerObj$value[1];this.config.startTime=startTime,this.config.endTime=endTime,this.config.dateOperator=datePickerObj.operatorId,this.config.dateValue=startTime+","+endTime,(0,validation/* isEmpty */.xb)(datePickerObj.offset)||(this.config.dateOffset=Math.abs(datePickerObj.offset)),this.configChanged()},loadDateFields:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this5.config.moduleName){_context.next=2;break}return _context.abrupt("return");case 2:return _context.next=4,api/* API */.bl.get("v2/modules/meta/".concat(_this5.config.moduleName));case 4:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this5.$message.error("Error loading date fields for module"):_this5.dateFields=data.meta.fields.filter((function(field){return(0,utils_field/* isDateTypeField */.S6)(field)}));case 8:case"end":return _context.stop()}}),_callee)})))()},criteriaSaved:function(criteria,dateFieldId){this.showAddCriteriaDialog=!1,this.config.criteria=criteria,this.config.showTimelineFilter=dateFieldId>0,this.config.dateFieldId=dateFieldId,this.configChanged()},loadModuleOptions:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var resp,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api/* API */.bl.get("/v2/automation/module");case 2:resp=_context2.sent,data=resp.data,error=resp.error,error?_this6.$message.error("Error loading module list"):(_this6.moduleOptions.systemModules=data.modules.filter((function(e){return!e.custom})),_this6.moduleOptions.customModules=data.modules.filter((function(e){return e.custom})),_this6.moduleLoading=!1);case 5:case"end":return _context2.stop()}}),_callee2)})))()},activeColumnChanged:function(activeColumn){this.activeColumn=activeColumn},openAddCriteriaDialog:function(){this.config.moduleName&&(this.showAddCriteriaDialog=!0)},columnResizeEvent:function(_ref4){var width=_ref4.width,column=_ref4.column;this.config.templateJSON.columnFormatting[column].width=width,this.config.templateJSON.columnFormatting[column].autoWidth=!1},columnPinningEvent:function(_ref5){var prop=_ref5.prop,value=_ref5.value;this.config.templateJSON.columnFormatting[prop].isFixed=value,this.configChanged()},openCellVisualizationDialog:function(alias){if(this.cellVisualizationConfig.alias=alias,alias.startsWith("data")){var index=this.config.values.findIndex((function(dt){return dt.alias==alias}));if(-1!=index&&this.config.values[index].moduleMeasure.visualConfig){var editConfig=(0,objectSpread2/* default */.Z)({},this.config.values[index].moduleMeasure.visualConfig);this.cellVisualizationConfig.editConfig=editConfig}}else{var _index=this.config.formula.findIndex((function(dt){return dt.alias==alias}));if(-1!=_index&&this.config.formula[_index].customMeasure.visualConfig){var _editConfig=(0,objectSpread2/* default */.Z)({},this.config.formula[_index].customMeasure.visualConfig);this.cellVisualizationConfig.editConfig=_editConfig}}this.cellVisualizationConfig.visibility=!0},cellVisualizationConfigAdded:function(_ref6){var alias=_ref6.alias,visualConfig=_ref6.visualConfig;if(alias.startsWith("data")){var index=this.config.values.findIndex((function(dt){return dt.alias==alias}));-1!=index&&(this.config.values[index].moduleMeasure.visualConfig=visualConfig)}else{var _index2=this.config.formula.findIndex((function(dt){return dt.alias==alias}));-1!=_index2&&(this.config.formula[_index2].customMeasure.visualConfig=visualConfig)}this.cellVisualizationConfig={alias:null,visibility:!1,editConfig:{}},this.configChanged()},themeConfigChanged:function(themeConfig){this.config.templateJSON.theme=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.config.templateJSON.theme),themeConfig)},rowHeightChanged:function(rowHeight){this.config.templateJSON.theme.density=rowHeight},openColumnFormatDialog:function(prop){var field;!this.pivotTable||null!==prop&&void 0!==prop&&prop.startsWith("formula")?(prop&&prop.startsWith("data")?field=this.config.values.find((function(dt){return dt.alias==prop})):prop&&prop.startsWith("row")?field=this.config.rows.find((function(row){return row.alias==prop})):prop&&prop.startsWith("formula")&&(field=this.config.formula.find((function(formula){return formula.alias==prop}))),!field||null!==prop&&void 0!==prop&&prop.startsWith("formula")?this.columnFormatConfig.field=field:this.columnFormatConfig.field=field.field):this.columnFormatConfig.field=this.pivotTable.pivotAliasVsField[prop];
// if (prop.startsWith('data')) {
//   this.columnFormatConfig.isDataColumn = true
// }
this.config.templateJSON.columnFormatting[prop].format&&(this.columnFormatConfig.editConfig=(0,objectSpread2/* default */.Z)({},this.config.templateJSON.columnFormatting[prop].format)),this.config.templateJSON.columnFormatting[prop].label&&(this.columnFormatConfig.fieldName=this.config.templateJSON.columnFormatting[prop].label),this.columnFormatConfig.alias=prop,this.columnFormatConfig.visibility=!0},openConditionalFormatDialog:function(prop){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var columnConfig;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return columnConfig=_this7.config.templateJSON.columnFormatting[prop],_this7.conditionalFormatConfig.alias=prop,_context3.next=4,_this7.getConditionalFormattingFields();case 4:_this7.conditionalFormatConfig.fields=_context3.sent,null!==columnConfig&&void 0!==columnConfig&&columnConfig.conditionalFormat&&(_this7.conditionalFormatConfig.editConfig=columnConfig.conditionalFormat),_this7.conditionalFormatConfig.visibility=!0;case 7:case"end":return _context3.stop()}}),_callee3)})))()},getConditionalFormattingFields:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$_this8$$http$p,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_this8.$http.post("v2/report/pivotMetaFields",{rows:_this8.config.rows,data:_this8.config.data,formula:_this8.config.formula,columnFormatting:_this8.config.templateJSON.columnFormatting});case 2:return _yield$_this8$$http$p=_context4.sent,data=_yield$_this8$$http$p.data,_context4.abrupt("return",data.meta);case 5:case"end":return _context4.stop()}}),_callee4)})))()},conditionFormatAdded:function(_ref7){var prop=_ref7.prop,formatting=_ref7.formatting;this.config.templateJSON.columnFormatting[prop].conditionalFormat=formatting,this.conditionalFormatConfig.editConfig=[],this.conditionalFormatConfig.visibility=!1,this.configChanged()},columnFormatConfigAdded:function(_ref8){var alias=_ref8.alias,config=_ref8.config;this.config.templateJSON.columnFormatting[alias].format=config,this.columnFormatConfig.visibility=!1,this.configChanged()},columnTextWarpEvent:function(_ref9){var prop=_ref9.prop,value=_ref9.value;this.config.templateJSON.columnFormatting[prop].textWarp=value,this.configChanged()},hideShowRow:function(row){var prop=row.alias,currentValue=this.config.templateJSON.columnFormatting[prop].hideColumn;this.config.templateJSON.columnFormatting[prop].hideColumn=!currentValue,this.configChanged()},hideShowData:function(data){var prop=data.alias,currentValue=this.config.templateJSON.columnFormatting[prop].hideColumn;this.config.templateJSON.columnFormatting[prop].hideColumn=!currentValue,this.configChanged()},hideShowFormula:function(formula){var prop=formula.alias,currentValue=this.config.templateJSON.columnFormatting[prop].hideColumn;this.config.templateJSON.columnFormatting[prop].hideColumn=!currentValue,this.configChanged()},deleteRowValue:function(alias){var _this$config;alias==this.activeColumn&&(this.activeColumn=null);var formulasUsed=this.getFormulasUsed(alias);if(null!==(_this$config=this.config)&&void 0!==_this$config&&null!==(_this$config=_this$config.templateJSON)&&void 0!==_this$config&&_this$config.columnFormatting&&this.$delete(this.config.templateJSON.columnFormatting,alias),formulasUsed.length>0){var messageString="This column used in the the formula ".concat(1==formulasUsed.length?"column":"columns"," ( ").concat(formulasUsed.join(", ")," ), please try again after removing it."),promptObj={title:"Delete Row",message:messageString,rbHide:!0};this.$dialog.confirm(promptObj)}else{if(alias&&alias.startsWith("row"))return this.config.rows=this.config.rows.filter((function(row){return row.alias!==alias})),void this.configChanged();this.config.values=this.config.values.filter((function(row){return row.alias!==alias})),this.$delete(this.config.templateJSON.columnFormatting,alias),this.resetSortByColumn(alias),this.configChanged()}},isColumnHidden:function(prop){var _this$config$template,style={};return null!==(_this$config$template=this.config.templateJSON.columnFormatting[prop])&&void 0!==_this$config$template&&_this$config$template.hideColumn&&(style["opacity"]=.5),style},loadReportFolders:function(){var _this9=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var url,self;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:
// no module name case is energy data reports, DON't send moduleName prop as energydata.;leave null for energreports
url="/v3/report/folders?moduleName=energydata",self=_this9,//pivot
url+="&isPivot=true",api/* API */.bl.get(url).then((function(response){response.error||(self.reportFolders=response.data.reportFolders)}));case 4:case"end":return _context5.stop()}}),_callee5)})))()},getFormulasUsed:function(alias){var _this10=this,result=[];return this.config.values.forEach((function(value){if(!value.alias.startsWith("data")){var variablesUsedInExp=Object.keys(value.customMeasure.variableMap);result=variablesUsedInExp.filter((function(val){return val===alias})).map((function(){return _this10.config.templateJSON.columnFormatting[alias].label}))}})),result},reportSaved:function(reportObj){this.reportObject=reportObj},resetSortByColumn:function(alias){
//when sort by column is deleted  , set first row column as sort column
this.config.sortBy.alias==alias&&(this.config.sortBy.order=2,this.config.rows.length?this.config.sortBy.alias=this.config.rows[0].alias:this.config.sortBy.alias=null)},pivotDimentionUpdated:function(_ref10){var dimentions=_ref10.dimentions,formats=_ref10.formats;this.config.rows=(0,toConsumableArray/* default */.Z)(dimentions),this.config.templateJSON.columnFormatting=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.config.templateJSON.columnFormatting),formats),this.configChanged()},pivotMeasureUpdated:function(_ref11){var measures=_ref11.measures,formats=_ref11.formats;this.config.values=(0,toConsumableArray/* default */.Z)(measures),this.config.templateJSON.columnFormatting=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.config.templateJSON.columnFormatting),formats),this.configChanged()},getCharAlias:function(alias){var _this11=this,index=Object.keys(this.charAliasMap).findIndex((function(e){return _this11.charAliasMap[e]==alias})),keys=Object.keys(this.charAliasMap);if(-1!=index)return keys[index];keys=keys.map((function(e){return e.toLowerCase()}));var varAlias=(0,utility_methods/* getUniqueCharAlias */.ip)(keys),result=varAlias.toUpperCase();return this.charAliasMap[result]=alias,result},configChanged:function(){var _this12=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_this12.config.rows.length&&_this12.config.values.length&&(
//first time rows and data added ,set first row as sort column
_this12.config.sortBy.alias||(_this12.config.sortBy.alias=_this12.config.rows[0].alias),_this12.tableLoading=!0,_this12.fetchPivotData().then((function(data){_this12.pivotTable=data,_this12.tableLoading=!1})));case 1:case"end":return _context6.stop()}}),_callee6)})))()},getConfig:function(){var config=(0,objectSpread2/* default */.Z)({},this.config);return null!=config.dateFieldId&&-1!=config.dateFieldId&&-99!=config.dateFieldId&&(-1!=this.config.startTime||-1!=this.config.endTime||null!=config.dateFieldId&&-1!=config.dateFieldId&&-99!=config.dateFieldId)||(delete config.startTime,delete config.endTime,delete config.dateValue,delete config.dateOperator,delete config.dateFieldId),config},fetchPivotData:function(){var _this13=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var serverConfig,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return serverConfig=_this13.getSerializedParams(_this13.getConfig()),_context7.next=3,api/* API */.bl.post("v2/report/fetchTabularReportData",(0,objectSpread2/* default */.Z)({},serverConfig));case 3:if(_yield$API$post=_context7.sent,data=_yield$API$post.data,error=_yield$API$post.error,!error){_context7.next=10;break}_this13.fetchPivotDataError=!0,_context7.next=15;break;case 10:return _this13.fetchPivotDataError=!1,_this13.config.data=data.data,null!==data&&void 0!==data&&data.showLimitBubble?_this13.$set(_this13.config,"showLimitBubble",data.showLimitBubble):_this13.$set(_this13.config,"showLimitBubble",!1),Object.freeze(data.pivotTableData),_context7.abrupt("return",data);case 15:case"end":return _context7.stop()}}),_callee7)})))()},getSerializedParams:function(config){var serializedConfig=(0,utility_methods/* deepCloneObject */.kh)(config);return serializedConfig.rows.forEach((function(row){row.field=(0,utils_utility_methods/* serializeProps */._$)(row.field,["id","name","moduleId","tableName","displayName","aggr"])})),serializedConfig.values.forEach((function(_ref12){var moduleMeasure=_ref12.moduleMeasure;moduleMeasure&&(moduleMeasure.field?moduleMeasure.field=(0,utils_utility_methods/* serializeProps */._$)(moduleMeasure.field,["id","name","moduleId","tableName","displayName","aggr"]):moduleMeasure.readingField&&(moduleMeasure.readingField=(0,utils_utility_methods/* serializeProps */._$)(moduleMeasure.readingField,["id","name","moduleId","tableName","aggr"])))})),serializedConfig}}},pivot_PivotBuilderNewvue_type_script_lang_js=PivotBuilderNewvue_type_script_lang_js,PivotBuilderNew_component=(0,componentNormalizer/* default */.Z)(pivot_PivotBuilderNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PivotBuilderNew=PivotBuilderNew_component.exports},
/***/353654:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"d7f1f315aba97cd14240ee6f3d34465f.svg";
/***/},
/***/271791:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"8f181d382ffbfa8849763c3ada75c3c6.svg";
/***/},
/***/385769:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4a9843791f38c4a28fdf9f0a4584780d.svg";
/***/},
/***/857539:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0c4c867eeab407b0ed9771b49db7359e.svg";
/***/},
/***/616693:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"01612d87d10d98e7a5d192a858f2da7a.svg";
/***/},
/***/661391:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"7ccb1b2c1abfe155045a323441d9f2e2.svg";
/***/},
/***/66195:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"bfdf05270c6c82ae6e46b6112c162442.svg";
/***/},
/***/225800:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"fa90b12730c24817e7ed4523156c2b6b.svg";
/***/},
/***/152897:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"1b990caa6f4472eaafc30c8773901e94.svg";
/***/},
/***/520171:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"4c0ec74771f88d0395b4d4bab4b57be4.svg";
/***/},
/***/670497:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"1c79444032dfd505e87690894f052add.svg";
/***/},
/***/867037:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"200957beb7f418b7601913a7c84d507d.svg";
/***/},
/***/91321:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ef0aaf51a118c6aa08c6c70908cd5687.svg";
/***/},
/***/789920:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"c1061d541bc8d80b582a55ffc2532cea.svg";
/***/},
/***/255231:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"8a4d6d3884a034ddb10151ca7d273628.svg";
/***/},
/***/148140:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"16f3cee8b19e9514ad12c99430fd2126.svg";
/***/},
/***/712016:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"f21def7be60bf6c051cddb640746d9c0.svg";
/***/},
/***/745322:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"9916d99d3c6e7bdb093d7644891d610b.svg";
/***/},
/***/279967:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"87ef46df352e9852b30747768d74c51e.svg";
/***/},
/***/797818:
/***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"img/loading.c54b20b0.gif"}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/8422.js.map