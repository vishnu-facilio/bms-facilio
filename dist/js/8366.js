(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[8366,32686,80865,53021],{
/***/749563:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AssetBreakdown}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/AssetBreakdown.vue?vue&type=template&id=118ba6c6&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticStyle:{"z-index":"999999"},attrs:{visible:_vm.visibility,"append-to-body":!0,"custom-class":"setup-dialog40 setup-dialog asset-breakdown-popup","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("error-banner",{attrs:{error:_vm.error,errorMessage:_vm.errorText},on:{"update:error":function($event){_vm.error=$event},"update:errorMessage":function($event){_vm.errorText=$event},"update:error-message":function($event){_vm.errorText=$event}}}),_c("div",{staticClass:"content-section"},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(_vm._s("Report Asset Downtime"))])])]),_c("div",{staticClass:"new-body-modal"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.message"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:"Enter the Condition"},model:{value:_vm.breakdown.condition,callback:function($$v){_vm.$set(_vm.breakdown,"condition",$$v)},expression:"breakdown.condition"}})],1)],1),_c("el-row",{staticClass:"mT20",attrs:{align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.time"))+" ")]),_c("div",{staticClass:"form-input"},[_c("f-date-picker",{staticClass:"fc-input-full-border-select2 form-date-picker",attrs:{type:"datetimerange","start-placeholder":"Start Date","end-placeholder":"End Date"},on:{change:_vm.pickerChange},model:{value:_vm.time,callback:function($$v){_vm.time=$$v},expression:"time"}})],1)])],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving},on:{click:_vm.saveAssetBreakdown}},[_vm._v(_vm._s(_vm.isSaving?"Saving...":_vm.$t("common._common._save")))])],1)])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),ErrorBanner=(__webpack_require__(450886),__webpack_require__(297157)),utils_validation=__webpack_require__(990260),FDatePicker=__webpack_require__(358551),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),AssetBreakdownvue_type_script_lang_js={props:["assetBDSourceDetails","visibility"],components:{ErrorBanner:ErrorBanner/* default */.Z,FDatePicker:FDatePicker/* default */.Z},data:function(){return{breakdown:{sourceId:null,condition:null,assetid:null,sourceType:null},time:[],fromtime:null,totime:null,error:!1,errorText:"",isSaving:!1}},mounted:function(){this.initAssetBreakDown()},methods:{initAssetBreakDown:function(){this.breakdown=(0,objectSpread2/* default */.Z)({},this.assetBDSourceDetails)},pickerChange:function(value){var _this=this;!(0,utils_validation/* isEmpty */.xb)(value)&&(0,utils_validation/* isArray */.kJ)(value)?(this.fromtime=value[0],this.totime=value[1],this.time=value.map((function(val){return _this.getTimeInSystemZone(val)}))):this.time=[]},validation:function(){(0,utils_validation/* isEmpty */.xb)(this.breakdown.condition)?(this.errorText=this.$t("common.placeholders.please_enter_condition"),this.error=!0):2!=this.time.length?(this.errorText=this.$t("common.placeholders.please_choose_time"),this.error=!0):(this.errorText="",this.error=!1)},saveAssetBreakdown:function(){var _this2=this;if(this.validation(),!this.error){var assetBDSourceDetails=(0,objectSpread2/* default */.Z)({},this.breakdown),fromtime=this.fromtime,totime=this.totime;assetBDSourceDetails.fromtime=fromtime,assetBDSourceDetails.totime=totime,this.isSaving=!0,this.$http.post("/v2/assetbreakdown/addNew",{assetBDSourceDetails:assetBDSourceDetails}).then((function(response){0===response.data.responseCode?(_this2.$message.success(_this2.$t("common._common.Asset_breakdown_saved_successfully")),_this2.$emit("onSave"),_this2.closeDialog()):_this2.$message.error(response.data.message),_this2.isSaving=!1})).catch((function(){_this2.$message.error(_this2.$t('common._common."Failed_to_record_breakdown')),_this2.closeDialog(),_this2.isSaving=!1}))}},getTimeInSystemZone:function(value){return moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss")},closeDialog:function(){this.$emit("update:visibility",!1)}}},components_AssetBreakdownvue_type_script_lang_js=AssetBreakdownvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AssetBreakdownvue_type_script_lang_js,render,staticRenderFns,!1,null,"118ba6c6",null)
/* harmony default export */,AssetBreakdown=component.exports},
/***/297157:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ErrorBanner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ErrorBanner.vue?vue&type=template&id=3d9e5288
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasError?_c("div",{staticClass:"error-block",attrs:{id:"error"}},[_c("p",{staticClass:"error-txt"},[_c("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.errorMessage?_vm.errorMessage:"Please fill all mandatory fields.")+" ")]),_c("i",{staticClass:"el-icon-close error-close-icon",on:{click:_vm.closeBanner}})]):_vm._e()])},staticRenderFns=[],ErrorBannervue_type_script_lang_js={props:["error","errorMessage"],computed:{hasError:{get:function(){return this.error},set:function(value){this.$emit("update:error",value)}}},methods:{closeBanner:function(){this.hasError=!1,this.$emit("update:errorMessage","")}}},components_ErrorBannervue_type_script_lang_js=ErrorBannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ErrorBannervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ErrorBanner=component.exports},
/***/615987:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PDFDownload}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PDFDownload.vue?vue&type=template&id=be2ef4d6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.downloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.downloadUrl}}):_vm._e()},staticRenderFns=[],api=__webpack_require__(32284),validation=__webpack_require__(990260),PDFDownloadvue_type_script_lang_js={props:["url","additionalInfo","isDownload"],data:function(){return{downloadUrl:null}},watch:{isDownload:{handler:function(val){var url=this.url;!(0,validation/* isEmpty */.xb)(url)&&val&&this.downloadPdf()},immediate:!0}},methods:{downloadPdf:function(){var _this=this,url=this.url,additionalInfo=this.additionalInfo;this.$message({message:"Downloading...",showClose:!0,duration:0}),api/* API */.bl.post("/v2/integ/pdf/create",{url:url,additionalInfo:additionalInfo}).then((function(_ref){var data=_ref.data,error=_ref.error;if(_this.$message.closeAll(),error){var _error$message=error.message,message=void 0===_error$message?"Unable to fetch download link":_error$message;_this.$message.error(message)}else _this.downloadUrl=(data||{}).fileUrl;_this.$emit("update:isDownload",!1)}))}}},components_PDFDownloadvue_type_script_lang_js=PDFDownloadvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PDFDownloadvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PDFDownload=component.exports},
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/646716:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FetchViewsMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var render,staticRenderFns,regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),api=__webpack_require__(32284),FetchViewsMixinvue_type_script_lang_js={methods:{fetchView:function(moduleName){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,_yield$API$get,data,error,_ref,groupViews;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.prev=0,params={moduleName:moduleName,groupType:1,viewType:1},_context.next=4,api/* API */.bl.get("/v2/views/viewList",params);case 4:if(_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error){_context.next=10;break}return _ref=data||{},groupViews=_ref.groupViews,_context.abrupt("return",_this.getFirstView(groupViews));case 10:_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context["catch"](0),_context.abrupt("return","all");case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])})))()},getFirstView:function(groupViews){var _ref2=(groupViews||[]).find((function(group){return!(0,validation/* isEmpty */.xb)(group.views)}))||{},views=_ref2.views,_this$$getProperty=this.$getProperty(views,"0",{}),name=_this$$getProperty.name;return name||"all"}}},base_FetchViewsMixinvue_type_script_lang_js=FetchViewsMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(base_FetchViewsMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FetchViewsMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
},
/***/760218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PageBuilder}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/page/PageBuilder.vue?vue&type=template&id=0dd0982f
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showPage&&_vm.pagebuilderComponent?_c(_vm.pagebuilderComponent,_vm._b({tag:"component",attrs:{module:_vm.module},on:{forceOldPage:function($event){_vm.forceOld=!0}}},"component",_vm.$attrs,!1)):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuex_esm=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),PageBuildervue_type_script_lang_js={props:["module"],data:function(){return{forceOld:!1,showPage:!1}},components:{NewPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(44119),__webpack_require__.e(88262),__webpack_require__.e(82080),__webpack_require__.e(88506)]).then(__webpack_require__.bind(__webpack_require__,110570))},OldPageBuilder:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(23803),__webpack_require__.e(55246)]).then(__webpack_require__.bind(__webpack_require__,223803))}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!_this.$helpers.isLicenseEnabled("PAGE_BUILDER")){_context.next=4;break}return _context.next=4,_this.$store.dispatch("pagebuilder/loadNewPageEnabledModules");case 4:_context.next=8;break;case 6:_context.prev=6,_context.t0=_context["catch"](0);case 8:_this.$nextTick((function(){_this.showPage=!0}));case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({newPageEnabledModules:function(state){return state.pagebuilder.newPageEnabledModules}})),{},{pagebuilderComponent:function(){var newPageEnabledModules=this.newPageEnabledModules,module=this.module,forceOld=this.forceOld,isNew=(newPageEnabledModules||[]).includes(module),showNew=!forceOld&&(this.showNewPageBuilder||isNew);return showNew?"NewPageBuilder":"OldPageBuilder"},showNewPageBuilder:function(){var query=this.$route.query,_query$showNewPageBui=query.showNewPageBuilder,showNewPageBuilder=void 0!==_query$showNewPageBui&&_query$showNewPageBui;return!0===showNewPageBuilder||"true"===showNewPageBuilder}})},page_PageBuildervue_type_script_lang_js=PageBuildervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(page_PageBuildervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PageBuilder=component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"Â  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports},
/***/383943:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return CustomModulesCreation}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/custom-module/CustomModulesCreation.vue?vue&type=template&id=7325388c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:[_vm.isCreateEditWidgetConfigured?"form-widget-container":"form-data-creation",_vm.isEmpty(_vm.widgetsArr)?"":"form-creation-widgets",_vm.customClassForContainer]},[_vm.showEmptyState?_c("div",{staticClass:"form-empty-container"},[_c("inline-svg",{staticClass:"d-flex module-view-empty-state",attrs:{src:"svgs/no-configuration",iconClass:"icon"}}),_c("div",{staticClass:"mB10 mT10 no-template-text f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("forms.live_form.no_forms"))+" ")]),_c("div",{staticClass:"contact-admin-text f14 self-center"},[_vm._v(" "+_vm._s(_vm.$t("forms.live_form.contact_admin"))+" ")])],1):_c("div",{staticClass:"height-100",class:[_vm.$validation.isEmpty(_vm.widgetsArr)?"":"form-left-container"]},[_vm.isCreateEditWidgetConfigured?_vm._e():_c("div",{staticClass:"header mT20 mB10 d-flex"},[_c("div",{staticClass:"title mT10"},[_vm._v(_vm._s(_vm.title))]),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return _c("el-option",{key:index,attrs:{value:form,label:form.displayName}})})),1):_vm._e()],1),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_vm.isCreateEditWidgetConfigured?_c("ConnectedAppViewWidget",{attrs:{widgetId:_vm.widgetId,recordId:_vm.moduleDataId,context:_vm.moduleData}}):_c("f-webform",{ref:"f-webform",attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isEdit:_vm.isEdit,isV3Api:_vm.isV3Api,moduleData:_vm.moduleData,moduleDataId:_vm.moduleDataId,isWidgetsSupported:_vm.isWidgetsSupported,subFormRecords:_vm.subFormRecords,modifyFieldPropsHook:_vm.modifyFieldPropsHook},on:{"update:form":function($event){_vm.formObj=$event},onBlur:_vm.onBlurHook,onWidgetChange:_vm.onWidgetChange,save:_vm.saveRecord,cancel:_vm.redirectToList}})],1),_c("portal-target",{staticClass:"widgets-container",attrs:{name:"side-bar-widgets"}})],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),regeneratorRuntime=__webpack_require__(150124),objectSpread2=__webpack_require__(595082),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(990260)),FormCreation=__webpack_require__(373729),ConnectedAppViewWidget=__webpack_require__(767004),FetchViewsMixin=__webpack_require__(646716),router=__webpack_require__(329435),CustomModuleData=__webpack_require__(689565),CustomModulesCreationvue_type_script_lang_js={extends:FormCreation/* default */.Z,props:["dataObj","selectedFormDetails"],components:{ConnectedAppViewWidget:ConnectedAppViewWidget["default"]},mixins:[FetchViewsMixin/* default */.Z],data:function(){return{widgetId:null,isEmpty:validation/* isEmpty */.xb}},computed:{showEmptyState:function(){var _ref=this||{},forms=_ref.forms;return!this.isLoading&&(0,validation/* isEmpty */.xb)(forms)&&!this.isCreateEditWidgetConfigured},moduleName:function(){var moduleName=this.$route.params.moduleName;// TODO: make this a prop and use directly
return moduleName||(moduleName=this.$attrs.moduleName),(0,validation/* isEmpty */.xb)(moduleName)?null:moduleName},moduleDisplayName:function(){return this.formObj&&this.formObj.module?this.formObj.module.displayName:""},isWidgetsSupported:function(){return!0},isCreateEditWidgetConfigured:function(){var widgetId=this.widgetId;return!(0,validation/* isEmpty */.xb)(widgetId)},isV3Api:function(){return!0},modelDataClass:function(){return CustomModuleData/* CustomModuleData */.u},customProps:function(){return{}},loadDataManually:function(){return!1}},methods:{init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleDataId,moduleName,loadDataManually,widgetId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(moduleDataId=_this.moduleDataId,moduleName=_this.moduleName,loadDataManually=_this.loadDataManually,_this.isLoading=!0,(0,validation/* isEmpty */.xb)(moduleDataId)&&!loadDataManually){_context.next=7;break}return _context.next=5,_this.loadModuleData({moduleName:moduleName,moduleDataId:moduleDataId});case 5:_context.next=8;break;case 7:_this.moduleData=new _this.modelDataClass((0,objectSpread2/* default */.Z)({moduleName:moduleName},_this.dataObj||{}));case 8:if((0,validation/* isEmpty */.xb)(_this.selectedFormDetails)){_context.next=13;break}return _context.next=11,_this.loadFormData(null,_this.selectedFormDetails||null);case 11:return _this.selectedForm=_context.sent,_context.abrupt("return");case 13:return _context.next=15,_this.getCreateEditRecordWidgetId();case 15:if(widgetId=_context.sent,(0,validation/* isEmpty */.xb)(widgetId)){_context.next=21;break}_this.widgetId=widgetId,_this.isLoading=!1,_context.next=24;break;case 21:return _context.next=23,_this.loadFormsList(moduleName);case 23:_this.setInitialForm();case 24:_this.isLoading=!1;case 25:case"end":return _context.stop()}}),_callee)})))()},getCreateEditRecordWidgetId:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var isEdit,operatorValue,filters,_yield$_this2$modelDa,connectedAppWidgets,_ref2,_ref3,selectedWidget,_ref4,widgetId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return isEdit=_this2.isEdit,operatorValue=isEdit?7:6,filters={entityType:{operatorId:9,value:["".concat(operatorValue)]}},_this2.isLoading=!0,_context2.prev=4,_context2.next=7,_this2.modelDataClass.loadWidgets(filters);case 7:return _yield$_this2$modelDa=_context2.sent,connectedAppWidgets=_yield$_this2$modelDa.connectedAppWidgets,_ref2=connectedAppWidgets||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,1),selectedWidget=_ref3[0],_ref4=selectedWidget||{},widgetId=_ref4.id,_context2.abrupt("return",widgetId);case 14:_context2.prev=14,_context2.t0=_context2["catch"](4),_this2.showErrorToastMessage(_context2.t0,_this2.$t("custommodules.form.widget_error"));case 17:case"end":return _context2.stop()}}),_callee2,null,[[4,14]])})))()},loadFormsList:function(moduleName){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,_this3.modelDataClass.loadFormsList(moduleName);case 3:_this3.forms=_context3.sent,_context3.next=9;break;case 6:_context3.prev=6,_context3.t0=_context3["catch"](0),_this3.showErrorToastMessage(_context3.t0,_this3.$t("custommodules.form.form_template_error"));case 9:case"end":return _context3.stop()}}),_callee3,null,[[0,6]])})))()},loadModuleData:function(_ref5){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var moduleDataId,moduleName,_ref6,customProps;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return moduleDataId=_ref5.moduleDataId,moduleName=_ref5.moduleName,_context4.prev=1,_ref6=_this4||{},customProps=_ref6.customProps,_context4.next=5,_this4.modelDataClass.fetch((0,objectSpread2/* default */.Z)({moduleName:moduleName,id:moduleDataId},customProps));case 5:_this4.moduleData=_context4.sent,_context4.next=11;break;case 8:_context4.prev=8,_context4.t0=_context4["catch"](1),_this4.showErrorToastMessage(_context4.t0,_this4.$t("custommodules.summary.record_summary_error"));case 11:case"end":return _context4.stop()}}),_callee4,null,[[1,8]])})))()},loadFormData:function(formId,selectedFormDetails){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var selectedForm,moduleName,moduleDataId,moduleData,loadDataManually,dataObj,formObj,form;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return selectedForm=_this5.selectedForm,moduleName=_this5.moduleName,moduleDataId=_this5.moduleDataId,moduleData=_this5.moduleData,loadDataManually=_this5.loadDataManually,dataObj=_this5.dataObj,formObj={},_context5.prev=2,_context5.next=5,_this5.modelDataClass.loadFormData({formId:formId,moduleName:moduleName,selectedForm:selectedFormDetails||selectedForm});case 5:form=_context5.sent,(0,validation/* isEmpty */.xb)(form)||(formObj=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},form),{},{secondaryBtnLabel:_this5.$t("common._common.cancel"),primaryBtnLabel:_this5.$t("common._common._save")}),((0,validation/* isEmpty */.xb)(moduleDataId)||(0,validation/* isEmpty */.xb)(null===moduleData||void 0===moduleData?void 0:moduleData.id))&&!loadDataManually&&(0,validation/* isEmpty */.xb)(dataObj)||(formObj=_this5.moduleData.deserialize(formObj)),_this5.formObj=formObj),_context5.next=12;break;case 9:_context5.prev=9,_context5.t0=_context5["catch"](2),_this5.showErrorToastMessage(_context5.t0,_this5.$t("custommodules.form.form_details_error"));case 12:return _context5.abrupt("return",formObj);case 13:case"end":return _context5.stop()}}),_callee5,null,[[2,9]])})))()},saveRecord:function(formModel){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var formObj,afterSaveHook,afterSerializeHook,response;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return formObj=_this6.formObj,afterSaveHook=_this6.afterSaveHook,afterSerializeHook=_this6.afterSerializeHook,_this6.isSaving=!0,
//same params as serialize method
_context6.next=4,_this6.moduleData.save(formObj,formModel,afterSerializeHook);case 4:response=_context6.sent,_this6.isSaving=!1,
// Hook to handle notification after crud operation
_this6.notificationHandler(response),
// Hook to handle response after crud operation
!(0,validation/* isEmpty */.xb)(afterSaveHook)&&(0,validation/* isFunction */.mf)(afterSaveHook)&&_this6.afterSaveHook(response);case 8:case"end":return _context6.stop()}}),_callee6)})))()},afterSaveHook:function(response){var moduleName=this.moduleName,data=response[moduleName],id=data.id;this.redirectToSummary(id)},redirectToSummary:function(id){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var moduleName,viewname,_ref7,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _this7.isSaving=!0,moduleName=_this7.moduleName,_context7.next=4,_this7.fetchView(moduleName);case 4:viewname=_context7.sent,_this7.isSaving=!1,(0,router/* isWebTabsEnabled */.tj)()?(_ref7=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name,name&&_this7.$router.push({name:name,params:{viewname:viewname,id:id}})):_this7.$router.push({name:"custommodules-summary",params:{id:id,viewname:viewname}}).catch((function(){}));case 7:case"end":return _context7.stop()}}),_callee7)})))()},redirectToList:function(){var moduleName=this.moduleName;if((0,router/* isWebTabsEnabled */.tj)()){var _ref8=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},name=_ref8.name;name&&this.$router.push({name:name})}else this.$router.push({name:"custommodules-list",params:{moduleName:moduleName}}).catch((function(){}))},showErrorToastMessage:function(error,customMsg){var message=(null===error||void 0===error?void 0:error.message)||customMsg;this.$message.error(message)}}},custom_module_CustomModulesCreationvue_type_script_lang_js=CustomModulesCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(custom_module_CustomModulesCreationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CustomModulesCreation=component.exports},
/***/667345:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SurveyBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/survey/SurveyBar.vue?vue&type=template&id=4819c4ba&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showBar?_c("div",{staticClass:"survey-bar-container",attrs:{"data-testid":"survey-bar-container"}},[_c("div",{class:["sidebar-loader",_vm.isLoading&&"on"]}),_vm.isLoading?_c("div",{staticClass:"d-flex survey-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex survey-bar"},[_c("i",{staticClass:"el-icon-warning-outline warning-icon"}),_c("el-tooltip",{staticClass:"m4",attrs:{effect:"dark",content:_vm.surveyBarTitle,placement:"top-start"}},[_c("div",{staticClass:"survey-bar-helper mR40",attrs:{"data-testid":"survey-bar-helper"}},[_vm._v(" "+_vm._s(_vm.surveyBarTitle)+" ")])]),_vm.showSurveyOptions?_c("div",["Take Survey"===_vm.buttonTitle?_c("div",{staticClass:"survey-btn mR15"},[_c("div",{staticClass:"take-survey-btn",attrs:{"data-testid":"take-survey-btn"},on:{click:function($event){return _vm.redirectToLatestSurvey()}}},[_vm._v(" "+_vm._s(_vm.buttonTitle)+" ")])]):_vm._e()]):_vm._e()],1)]):_vm._e()},staticRenderFns=[],router=(__webpack_require__(976801),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(70630)),_facilio_router=__webpack_require__(329435),validation=__webpack_require__(990260),helpers=__webpack_require__(778390),moment=helpers/* default */.ZP.getOrgMoment,SurveyBarvue_type_script_lang_js={name:"SurveyBar",data:function(){return{isLoading:!1,responseStatusHash:{1:"DISABLED",2:"NOT_ANSWERED",3:"PARIALLY_ANSWERED",4:"COMPLETED"}}},props:["surveyDetails","moduleName","recordId"],computed:{getCurrentUserId:function(){var $account=this.$account,_ref=$account||{},user=_ref.user,peopleId=this.$getProperty(user,"peopleId",null);return peopleId},surveyBarTitle:function(){var surveyDetails=this.surveyDetails,_ref2=surveyDetails||{},_ref2$response=_ref2.response,response=void 0===_ref2$response?[]:_ref2$response,name=this.$t("survey.survey_title");if(!(0,validation/* isEmpty */.xb)(response)){var latestSurvey=response[response.length-1]||{},surveyTitle=this.$t("survey.survey_title");name=this.$getProperty(latestSurvey,"name",surveyTitle)}return name},buttonTitle:function(){var surveyDetails=this.surveyDetails,responseStatusHash=this.responseStatusHash,_ref3=surveyDetails||{},_ref3$response=_ref3.response,response=void 0===_ref3$response?[]:_ref3$response;if(!(0,validation/* isEmpty */.xb)(response)){var latestSurvey=response[response.length-1]||{};if(this.isSurveyExpired())return null;var _ref4=latestSurvey||{},responseStatus=_ref4.responseStatus,isRetakeAllowed=_ref4.isRetakeAllowed;return"COMPLETED"!==responseStatusHash[responseStatus]||isRetakeAllowed?["COMPLETED","PARIALLY_ANSWERED"].includes(responseStatusHash[responseStatus])?this.$t("survey.retake_survey"):this.$t("survey.take_survey"):""}return null},canShowResults:function(){var surveyDetails=this.surveyDetails,responseStatusHash=this.responseStatusHash,_ref5=surveyDetails||{},response=_ref5.response,isSuperAdmin=_ref5.isSuperAdmin,canShowResult=!1;return response.forEach((function(survey){var _ref6=survey||{},responseStatus=_ref6.responseStatus;canShowResult=canShowResult||"COMPLETED"===responseStatusHash[responseStatus]})),canShowResult&&isSuperAdmin},isSurveyForCurrentUser:function(){var surveyDetails=this.surveyDetails,getCurrentUserId=this.getCurrentUserId,_ref7=surveyDetails||{},_ref7$response=_ref7.response,response=void 0===_ref7$response?[]:_ref7$response,_ref8=response[response.length-1]||{},assignedTo=_ref8.assignedTo,_ref9=assignedTo||{},id=_ref9.id;return id===getCurrentUserId},showBar:function(){var showViewAllSurvey=this.showViewAllSurvey,buttonTitle=this.buttonTitle,canShowResults=this.canShowResults,isSurveyForCurrentUser=this.isSurveyForCurrentUser,canShowSurveyBtn=!(0,validation/* isEmpty */.xb)(buttonTitle);return(canShowSurveyBtn||showViewAllSurvey||canShowResults)&&buttonTitle===this.$t("survey.take_survey")&&isSurveyForCurrentUser},showSurveyOptions:function(){var buttonTitle=this.buttonTitle;return!(0,validation/* isEmpty */.xb)(buttonTitle)},allSurveysRetakeAvailable:function(){var surveyDetails=this.surveyDetails,responseStatusHash=this.responseStatusHash,_ref10=surveyDetails||{},response=_ref10.response,allSurveysAvailable=!0;return response.forEach((function(survey){var currentSurveyAvailable=!0,_ref11=survey||{},responseStatus=_ref11.responseStatus,isRetakeAllowed=_ref11.isRetakeAllowed;currentSurveyAvailable=["COMPLETED","PARIALLY_ANSWERED"].includes(responseStatusHash[responseStatus])||"COMPLETED"===responseStatusHash[responseStatus]&&isRetakeAllowed,allSurveysAvailable=allSurveysAvailable||currentSurveyAvailable})),allSurveysAvailable},showViewAllSurvey:function(){var _this=this,surveyDetails=this.surveyDetails,allSurveysRetakeAvailable=this.allSurveysRetakeAvailable,_ref12=surveyDetails||{},isViewAllSurvey=_ref12.isViewAllSurvey,response=_ref12.response,activeSurveyCount=0,allSurveysExpired=!0;return response.forEach((function(survey){var surveyExpired=_this.isSurveyExpired(survey);surveyExpired||(activeSurveyCount+=1),allSurveysExpired=allSurveysExpired&&surveyExpired})),isViewAllSurvey&&!allSurveysExpired&&allSurveysRetakeAvailable&&activeSurveyCount>1}},methods:{isSurveyExpired:function(surveyInfo){var surveyDetails=this.surveyDetails,_ref13=surveyDetails||{},_ref13$response=_ref13.response,response=void 0===_ref13$response?[]:_ref13$response,retakeTime=null,expiryTime=null;if(!(0,validation/* isEmpty */.xb)(response)){var latestSurvey=response[response.length-1]||{},_ref14=latestSurvey||{},retakeExpiry=_ref14.retakeExpiry,expiryDate=_ref14.expiryDate;retakeTime=retakeExpiry,expiryTime=expiryDate}var currentTimeStamp=moment().valueOf(),reTakeOptionExpired=!1,surveyExpired=!1;if(!(0,validation/* isEmpty */.xb)(surveyInfo)){var _ref15=surveyInfo||{},_retakeExpiry=_ref15.retakeExpiry,_expiryDate=_ref15.expiryDate;retakeTime=_retakeExpiry,expiryTime=_expiryDate}return!(0,validation/* isEmpty */.xb)(retakeTime)&&currentTimeStamp>retakeTime&&(reTakeOptionExpired=!0),!(0,validation/* isEmpty */.xb)(expiryTime)&&currentTimeStamp>expiryTime&&(surveyExpired=!0),reTakeOptionExpired||surveyExpired},redirectToLatestSurvey:function(){var _this2=this,surveyDetails=this.surveyDetails,_getApp=(0,_facilio_router/* getApp */.wx)(),appName=_getApp.linkName,_ref16=surveyDetails||{},_ref16$response=_ref16.response,response=void 0===_ref16$response?[]:_ref16$response,_ref17=response[response.length-1]||{},id=_ref17.id,params={id:id,appName:appName},_router$resolve=router/* default */.Z.resolve({name:"newSurveyLiveForm",params:params}),href=_router$resolve.href;window.open(href,"_blank"),window.addEventListener("message",(function(event){event.origin===window.origin&&_this2.$router.go(0)}))}}},survey_SurveyBarvue_type_script_lang_js=SurveyBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(survey_SurveyBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4819c4ba",null)
/* harmony default export */,SurveyBar=component.exports},
/***/565003:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ViewAllSurveys}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/survey/ViewAllSurveys.vue?vue&type=template&id=78b35bb0&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"fc-dialog-center-container all-surveys",attrs:{title:_vm.$t("survey.all_surveys"),visible:_vm.showSurveyDialog||_vm.showAllResponses,width:"40%","append-to-body":!0,"before-close":_vm.closeDialog}},[_c("div",{staticClass:"survey-container mT10"},[_vm.isLoading?_c("div",{staticClass:"mT20"},[_c("spinner",{attrs:{show:_vm.isLoading,size:"80"}})],1):_c("div",[_vm.checkSurveyAvailable?_vm._l(_vm.surveys,(function(survey){return _c("div",{key:"survey-"+survey.id},[_vm.showAllResponses?_c("div",{staticClass:"survey-row flex-middle d-flex mB20"},[_c("div",{staticClass:"survey-title pL30"},[_vm._v(" "+_vm._s(survey.name)+" ")]),_c("div",{staticClass:"survey-btn"},[_c("div",{staticClass:"retake-survey mR20",on:{click:function($event){return _vm.showIndividualResponseDialog(survey)}}},[_vm._v(" "+_vm._s(_vm.$t("survey.view_survey_answer"))+" ")])])]):_c("div",{staticClass:"survey-row flex-middle d-flex mB20"},[_c("div",{staticClass:"survey-title pL30 mR40"},[_vm._v(" "+_vm._s(survey.name)+" ")]),_c("div",{staticClass:"survey-btn"},[_vm.canShowTakeSurvey(survey)?_c("div",{staticClass:"retake-survey mL10 mR20",on:{click:function($event){return _vm.redirectToSurvey(survey.id)}}},[_vm._v(" "+_vm._s(_vm.$t("survey.take_survey"))+" ")]):_vm.canShowReTakeSurvey(survey)&&!_vm.isSurveyExpired(survey)?_c("div",{staticClass:"retake-survey mL10 mR20",on:{click:function($event){return _vm.redirectToSurvey(survey.id)}}},[_vm._v(" "+_vm._s(_vm.$t("survey.retake_survey"))+" ")]):_c("span")])]),_c("div",{staticClass:"row-seperator mB10"})])})):_c("div",{staticStyle:{"margin-left":"35%"}},[_c("InlineSvg",{staticClass:"self-center mT10",attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-130 emptystate-icon-size "}}),_c("div",{staticClass:"fc-black-dark\n           f16 bold mT10 line-height10 self-center",staticStyle:{"margin-left":"-30px"}},[_vm._v(" "+_vm._s(_vm.$t("survey.no_more_surveys_available"))+" ")])],1)],2)]),_c("IndividualSurveyResult",{ref:"user-response",attrs:{showResultDialog:_vm.showIndividualResponse,details:_vm.details,surveyLoading:_vm.surveyLoading,module:_vm.moduleName,recordName:_vm.recordName},on:{"update:showResultDialog":function($event){_vm.showIndividualResponse=$event},"update:show-result-dialog":function($event){_vm.showIndividualResponse=$event},"update:surveyLoading":function($event){_vm.surveyLoading=$event},"update:survey-loading":function($event){_vm.surveyLoading=$event}}})],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),validation=(__webpack_require__(689730),__webpack_require__(976801),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(990260)),router=__webpack_require__(70630),_facilio_router=__webpack_require__(329435),SurveyUtil=__webpack_require__(575369),helpers=__webpack_require__(778390),IndividualSurveyResult=__webpack_require__(640879),moment=helpers/* default */.ZP.getOrgMoment,ViewAllSurveysvue_type_script_lang_js={name:"ViewAllSurveys",props:["showSurveyDialog","moduleName","recordId","showAllResponses","recordName"],data:function(){return{isLoading:!1,surveys:[],templates:[],responseStatusHash:{1:"DISABLED",2:"NOT_ANSWERED",3:"PARIALLY_ANSWERED",4:"COMPLETED"},buttonTitleHash:{},details:{},surveyLoading:!1,surveyPage:1,surveyPerPage:50,templatePage:1,templatePerPage:50,viewName:"all",showIndividualResponse:!1}},components:{IndividualSurveyResult:IndividualSurveyResult/* default */.Z},watch:{showSurveyDialog:{handler:function(newVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!newVal){_context.next=3;break}return _context.next=3,_this.loadAvailableSurveys();case 3:case"end":return _context.stop()}}),_callee)})))()},immediate:!0},showAllResponses:{handler:function(newVal){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!newVal){_context2.next=3;break}return _context2.next=3,_this2.loadAvailableSurveys();case 3:case"end":return _context2.stop()}}),_callee2)})))()},immediate:!0}},computed:{checkSurveyAvailable:function(){var surveys=this.surveys;return surveys.length>0},getCurrentUserId:function(){var $account=this.$account,_ref=$account||{},user=_ref.user,peopleId=this.$getProperty(user,"peopleId",null);return peopleId}},methods:{loadAvailableSurveys:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var recordId,moduleName,surveyPage,surveyPerPage,viewName,showAllResponses,type,filters,surveys;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this3.isLoading=!0,recordId=_this3.recordId,moduleName=_this3.moduleName,surveyPage=_this3.surveyPage,surveyPerPage=_this3.surveyPerPage,viewName=_this3.viewName,showAllResponses=_this3.showAllResponses,type={},filters={},showAllResponses?showAllResponses&&(filters={responseStatus:{operatorId:54,value:["4"]}}):type={isViewAllSurvey:!0},surveys=[],_context3.next=8,(0,SurveyUtil/* loadAllSurveys */.UI)(moduleName,recordId,type,surveyPage,surveyPerPage,viewName,null,filters);case 8:surveys=_context3.sent,surveys=surveys.slice(),surveys=surveys.reverse(),_this3.surveys=surveys,_this3.fillButtonTitles(),_this3.isLoading=!1;case 14:case"end":return _context3.stop()}}),_callee3)})))()},isSurveyForCurrentUser:function(survey){var _ref2=survey||{},assignedTo=_ref2.assignedTo,_ref3=assignedTo||{},id=_ref3.id;return id===this.getCurrentUserId},showAllSurveyResponses:function(survey){var responseStatusHash=this.responseStatusHash,_ref4=survey||{},responseStatus=_ref4.responseStatus,isRetakeAllowed=_ref4.isRetakeAllowed;return["COMPLETED","PARIALLY_ANSWERED","NOT_ANSWERED"].includes(responseStatusHash[responseStatus])||"COMPLETED"===responseStatusHash[responseStatus]&&isRetakeAllowed},showIndividualResponseDialog:function(survey){this.showIndividualResponse=!0,this.loadSurveyDetail(survey)},loadSurveyDetail:function(selectedSurvey){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this4.surveyLoading=!0,_context4.next=3,(0,SurveyUtil/* getSurveyDetails */["if"])(selectedSurvey);case 3:_this4.details=_context4.sent,_this4.surveyLoading=!1;case 5:case"end":return _context4.stop()}}),_callee4)})))()},fillButtonTitles:function(){var _this5=this,surveys=this.surveys,buttonTitleHash=this.buttonTitleHash;surveys.forEach((function(survey){var _ref5=survey||{},id=_ref5.id,buttonTitle=_this5.getButtonTitle(survey);_this5.$set(buttonTitleHash,"".concat(id),buttonTitle)}))},isSurveyExpired:function(survey){var _ref6=survey||{},retakeExpiry=_ref6.retakeExpiry,expiryDate=_ref6.expiryDate,isRetakeAllowed=_ref6.isRetakeAllowed,currentTimeStamp=moment().valueOf(),reTakeOptionExpired=!1,surveyExpired=!1;return!(0,validation/* isEmpty */.xb)(retakeExpiry)&&currentTimeStamp>retakeExpiry&&(reTakeOptionExpired=!0),!(0,validation/* isEmpty */.xb)(expiryDate)&&(0,validation/* isEmpty */.xb)(isRetakeAllowed)&&currentTimeStamp>expiryDate&&(surveyExpired=!0),reTakeOptionExpired||surveyExpired},getButtonTitle:function(survey){var responseStatusHash=this.responseStatusHash,_ref7=survey||{},responseStatus=_ref7.responseStatus,isRetakeAllowed=_ref7.isRetakeAllowed;return["NOT_ANSWERED","PARIALLY_ANSWERED"].includes(responseStatusHash[responseStatus])?this.$t("survey.take_survey"):"COMPLETED"===responseStatusHash[responseStatus]&&isRetakeAllowed?this.$t("survey.retake_survey"):this.$t("survey.survey_taken")},canShowTakeSurvey:function(survey){var buttonTitleHash=this.buttonTitleHash,_ref8=survey||{},id=_ref8.id,buttonTitle=this.$getProperty(buttonTitleHash,"".concat(id),"");return"Take Survey"===buttonTitle},canShowReTakeSurvey:function(survey){var buttonTitleHash=this.buttonTitleHash,_ref9=survey||{},id=_ref9.id,buttonTitle=this.$getProperty(buttonTitleHash,"".concat(id),"");return"Retake Survey"===buttonTitle},redirectToSurvey:function(id){var moduleName=this.moduleName,recordId=this.recordId,_getApp=(0,_facilio_router/* getApp */.wx)(),appName=_getApp.linkName,params={id:id,appName:appName},_router$resolve=router/* default */.Z.resolve({name:"newSurveyLiveForm",params:params,query:{name:moduleName,recordId:recordId}}),href=_router$resolve.href;window.open(href,"_blank")},closeDialog:function(){var showAllResponses=this.showAllResponses;showAllResponses?this.$emit("update:showAllResponses",!1):this.$emit("update:showSurveyDialog",!1)}}},survey_ViewAllSurveysvue_type_script_lang_js=ViewAllSurveysvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(survey_ViewAllSurveysvue_type_script_lang_js,render,staticRenderFns,!1,null,"78b35bb0",null)
/* harmony default export */,ViewAllSurveys=component.exports},
/***/455360:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkOrderSummaryPdfOptions}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v1/WorkOrderSummaryPdfOptions.vue?vue&type=template&id=0c2591ac&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.visibility?_c("el-dialog",{attrs:{"append-to-body":!0,title:_vm.title,visible:_vm.visibility,width:"28%","before-close":_vm.closeDialog,"custom-class":"fc-dialog-center-container scale-up-center"},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{staticClass:"height300"},[_c("el-checkbox",{model:{value:_vm.checked,callback:function($$v){_vm.checked=$$v},expression:"checked"}},[_vm._v(_vm._s(_vm.$t("common.wo_report.show_photo")))]),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.showAttachement,callback:function($$v){_vm.showAttachement=$$v},expression:"showAttachement"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_attachement"))+" "),_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:_vm.$t("common.wo_report.prints_image_type"),placement:"bottom"}},[_c("i",{staticClass:"el-icon-info capp-linkname"})])],1),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.showComments,callback:function($$v){_vm.showComments=$$v},expression:"showComments"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_comments"))+" ")]),_c("el-checkbox",{staticClass:"pT20 mR100",model:{value:_vm.showHistory,callback:function($$v){_vm.showHistory=$$v},expression:"showHistory"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_history"))+" ")]),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.useSiteLogo,callback:function($$v){_vm.useSiteLogo=$$v},expression:"useSiteLogo"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.use_site_logo"))+" ")]),_c("el-checkbox",{staticClass:"pT20",model:{value:_vm.showSignature,callback:function($$v){_vm.showSignature=$$v},expression:"showSignature"}},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.show_signature"))+" ")])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.disableDownloadButton},on:{click:function($event){_vm.isDownloadOption?_vm.downloadWorkOrder():_vm.printWorkOrder()}}},[_vm._v(_vm._s(_vm.confirmButtonText)+" ")])],1)]):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),router=(__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(779307),__webpack_require__(398858),__webpack_require__(461318),__webpack_require__(33228),__webpack_require__(634338),__webpack_require__(212826),__webpack_require__(329435)),vuex_esm=__webpack_require__(420629),WorkOrderSummaryPdfOptionsvue_type_script_lang_js={
//props: ['visibility', 'workorders', 'viewName', 'isDownloadOption', 'pdfUrl'],
props:{visibility:{type:Boolean,default:!1},workorders:{type:Array,default:function(){return[]}},viewName:{type:String,default:""},isDownloadOption:{type:Boolean,default:!1},pdfUrl:{type:String,default:""},isPdfDownload:{type:Boolean,default:!1}},data:function(){return{checked:!1,showAttachement:!1,showComments:!1,showHistory:!1,useSiteLogo:!1,showSignature:!0}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({currentTab:function(state){return state.webtabs.selectedTab},currentGroup:function(state){return state.webtabs.selectedTabGroup}})),{},{selected:function(){return this.data.checked},title:function(){var isDownloadOption=this.isDownloadOption;return isDownloadOption?this.$t("common.wo_report.download_options"):this.$t("common.wo_report.print_options")},confirmButtonText:function(){var isDownloadOption=this.isDownloadOption;return isDownloadOption?this.$t("common.wo_report.download"):this.$t("common.wo_report.print")},disableDownloadButton:function(){var isDownloadOption=this.isDownloadOption,isPdfDownload=this.isPdfDownload;return isDownloadOption&&isPdfDownload}}),methods:{closeDialog:function(){this.$emit("update:visibility",!1)},getFileUrl:function(){var workorders=this.workorders,checked=this.checked,showAttachement=this.showAttachement,showComments=this.showComments,showHistory=this.showHistory,useSiteLogo=this.useSiteLogo,showSignature=this.showSignature,viewName=this.viewName,_getApp=(0,router/* getApp */.wx)(),linkName=_getApp.linkName,appName="newapp"===linkName?"app":linkName,query=new URLSearchParams;if(query.append("workorderId",workorders),query.append("showImage",checked),query.append("showAttachements",showAttachement),query.append("showComments",showComments),query.append("showHistory",showHistory),query.append("useSiteLogo",useSiteLogo),query.append("showSignature",showSignature),query.append("viewName",viewName),(0,router/* isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,currentGroup=this.currentGroup;query.append("currentTabId",currentTab.id),query.append("currentGroupId",currentGroup.id)}var url="".concat(window.location.origin,"/").concat(appName,"/pdf/summarydownloadreport?").concat(query.toString());return url},printWorkOrder:function(){var getFileUrl=this.getFileUrl,url=getFileUrl();window.open(url)},downloadWorkOrder:function(){var getFileUrl=this.getFileUrl,url=getFileUrl();this.$emit("update:pdfUrl",url)}}},v1_WorkOrderSummaryPdfOptionsvue_type_script_lang_js=WorkOrderSummaryPdfOptionsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_WorkOrderSummaryPdfOptionsvue_type_script_lang_js,render,staticRenderFns,!1,null,"0c2591ac",null)
/* harmony default export */,WorkOrderSummaryPdfOptions=component.exports},
/***/209870:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WoV3EditForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v3/WoV3EditForm.vue?vue&type=template&id=0a10ab59
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",[_c("el-dialog",{staticStyle:{"z-index":"1999"},attrs:{fullscreen:!0,"append-to-body":!0,visible:_vm.visibility,title:_vm.$t("common._common.workorder_edit"),"custom-class":"fc-wo-edit-form-dialog fc-dialog-form setup-dialog-right setup-dialog50 setup-dialog f-webform-right-dialog new-asset-container","before-close":_vm.cancelForm}},[_c("div",{staticClass:"header pT10 pB10 pL30 pR30 d-flex"},[_c("div",{staticClass:"title mT10"},[_vm._v(" "+_vm._s(_vm.$t("common._common.workorder_edit"))+" ")]),_vm.forms.length>1?_c("el-select",{staticClass:"fc-input-full-border-select2 mL-auto width25",attrs:{"value-key":"name"},model:{value:_vm.selectedForm,callback:function($$v){_vm.selectedForm=$$v},expression:"selectedForm"}},_vm._l(_vm.forms,(function(form,index){return _c("el-option",{key:index,attrs:{value:form,label:form.displayName}})})),1):_vm._e()],1),_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("f-webform",{attrs:{form:_vm.formObj,module:_vm.moduleName,isSaving:_vm.isSaving,isEdit:!0,moduleDataId:_vm.moduleDataId,moduleData:_vm.moduleData,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0,isV3Api:!0,modifySectionPropsHook:_vm.modifySectionPropsHook,modifyFieldPropsHook:_vm.modifyFieldPropsHook},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.saveRecord,cancel:_vm.cancelForm}})],1)],1):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),CustomModulesCreation=(__webpack_require__(339772),__webpack_require__(434284),__webpack_require__(162506),__webpack_require__(383943)),FetchViewsMixin=__webpack_require__(646716),TasksMixin=__webpack_require__(153046),validation=__webpack_require__(990260),WoV3EditFormvue_type_script_lang_js={extends:CustomModulesCreation["default"],mixins:[FetchViewsMixin/* default */.Z,TasksMixin/* default */.Z],props:{visibility:Boolean,wo:Object},name:"WoV3EditForm",methods:{cancelForm:function(){this.$emit("visibilityUpdate",!1)},afterSaveHook:function(){this.$emit("visibilityUpdate",!1),this.$root.$emit("reloadWO")},modifySectionPropsHook:function(section){
// editing tasks is not allowed; hiding the section in form
var fields=section.fields;if(!(0,validation/* isEmpty */.xb)(fields)&&(0,validation/* isArray */.kJ)(fields)&&1===fields.length){var displayTypeEnum=fields[0].displayTypeEnum;if("TASKS"===displayTypeEnum)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},section),{},{hideSection:!0})}else{
// guarenteed to have 1 assignment field
var assignmentFldIndex=fields.findIndex((function(f){return"assignment"===f.name}));if(-1===assignmentFldIndex)return;var assignmentField=fields[assignmentFldIndex]||{},userObj=this.$getProperty(assignmentField,"value.assignedTo.id",null),groupObj=this.$getProperty(assignmentField,"value.assignmentGroup.id",null);this.$set(assignmentField.value,"assignedTo",(0,validation/* isEmpty */.xb)(userObj)?{id:""}:userObj),this.$set(assignmentField.value,"assignmentGroup",(0,validation/* isEmpty */.xb)(groupObj)?{id:""}:groupObj),fields.splice(assignmentFldIndex,1,assignmentField),this.$set(section,"fields",fields)}},modifyFieldPropsHook:function(field){var _ref=field||{},name=_ref.name;if("jobPlan"===name)return(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field),{},{isDisabled:!0})}}},v3_WoV3EditFormvue_type_script_lang_js=WoV3EditFormvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v3_WoV3EditFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WoV3EditForm=component.exports},
/***/243116:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WorkorderOverview}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v3/WorkorderOverview.vue?vue&type=template&id=40dc574c&scoped=true
var render=function(){var this$1=this,_vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{height:"auto"}},[_vm.loading?_c("div",{staticClass:"text-center width100 pT50 mT50"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_c("div",[_c("div",{staticClass:"\n        fc__layout__align fc__asset__main__header\n        pT20\n        pB10\n        pL20\n        pR20\n        fc-visibility-gicon-visible fc-wo-translate-icon\n      ",staticStyle:{width:"auto","align-items":"center !important","border-bottom":"none"}},[_c("div",{staticClass:"fL pointer"},[_c("div",{staticClass:"wos-id",attrs:{title:_vm.$t("common.header.back")},on:{click:_vm.back}},[_c("img",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"perspective"},expression:"{ arrow: true, animation: 'perspective' }"}],staticClass:"vertical-middle mR5 mL3 pointer",attrs:{src:__webpack_require__(528661),"data-position":"top",width:"12",height:"12"}}),_c("span",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.workorder?_vm.workorder.serialNumber:"---"))])]),_c("div",{staticClass:"heading-black22 pT5 flex-middle"},[_vm.workorder&&_vm.workorder.moduleState&&_vm.workorder.moduleState.id&&_vm.isStatusLocked(_vm.workorder.moduleState.id,"workorder")?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fa fa-lock locked-wo",attrs:{"data-arrow":"true",title:_vm.$t("maintenance.approval.waiting_for_approval")}}):_vm._e(),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"max-width500px textoverflow-ellipsis show",attrs:{title:_vm.workorder.subject,"data-arrow":"true"}},[_vm._v(" "+_vm._s(_vm.workorder&&_vm.workorder.subject?_vm.workorder.subject:"---")+" ")]),_c("span",{staticClass:"fc-newsummary-chip"},[_vm._v(" "+_vm._s(_vm.moduleStateName)+" ")])])]),_c("div",{staticClass:"fR display-flex"},[_vm.$helpers.isLicenseEnabled("GOOGLE_TRANSLATION")?_c("div",[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,arrowType:"round",animation:"fade"},expression:"{ arrow: true, arrowType: 'round', animation: 'fade' }"}],staticClass:"gTranslate-icon-place fc-gtransalte",class:{translateActive:_vm.isActive},attrs:{content:"Show translation for text in subject,description, comments & tasks"},on:{click:_vm.handleTranslate}},[_c("inline-svg",{attrs:{src:"svgs/google-translate",iconClass:"icon text-center icon-md vertical-middle"}})],1)]):_vm._e(),_c("CustomButton",{attrs:{moduleName:_vm.moduleName,position:_vm.POSITION.SUMMARY,record:_vm.workorder,transformFn:_vm.transformFormData,updateUrl:_vm.updateUrlString},on:{refresh:_vm.onTransitionSuccess}}),_c("TransitionButtons",{ref:"TransitionButtons",attrs:{moduleName:_vm.moduleName,record:_vm.workorder,transformFn:_vm.transformFormData,updateUrl:_vm.updateUrlString,transitionFilter:_vm.transitionFilter,disabled:_vm.isApprovalEnabled,buttonClass:"asset-el-btn"},on:{currentState:function(id){return _vm.setCurrentState(id)},transitionSuccess:_vm.onTransitionSuccess,transitionFailure:function(){}}}),_vm.isApprovalEnabled?_c("portal",{attrs:{to:"pagebuilder-sticky-top"}},[_vm.isApprovalEnabled?_c("ApprovalBar",{attrs:{transformFn:_vm.transformFormData,moduleName:_vm.moduleName,record:_vm.workorder,canShowEdit:"true"},on:{onSuccess:_vm.onTransitionSuccess,onFailure:function(){},onEdit:function(){this$1.$root.$emit("editWorkorder")}}}):_vm._e()],1):_vm._e(),_vm.checkIfSurveyLicenseEnabled&&_vm.isSurveyEnabled&&!_vm.isApprovalEnabled?_c("portal",{attrs:{to:"pagebuilder-fixed-top"}},[_c("SurveyBar",{attrs:{surveyDetails:_vm.surveyDetails,moduleName:"workorder",recordId:_vm.woId}})],1):_vm._e(),_vm.isWorkOrderFeatureSettingsLicenseEnabled&&_vm.canShowMessageBanner?_c("portal",{attrs:{to:"pagebuilder-fixed-top"}},[_c("div",{staticClass:"wo_task_view_banner pT5"},[_c("span",{staticClass:"wo_task_view_banner_subject"},[_c("fc-icon",{attrs:{group:"action",name:"info"}}),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.bannerMessage))])],1)])]):_vm.isWorkOrderFeatureSettingsLicenseEnabled||!_vm.isTasksTab||_vm.hasExecuteTaskPermission?_vm._e():_c("portal",{attrs:{to:"pagebuilder-fixed-top"}},[_c("div",{staticClass:"wo_task_view_banner pT5"},[_c("span",{staticClass:"wo_task_view_banner_subject"},[_c("fc-icon",{attrs:{group:"action",name:"info"}}),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.$t("common.products.workorder_no_update_task")))])],1)])]),_c("el-dropdown",{staticClass:"mL10 fc-btn-ico-lg pointer",staticStyle:{"padding-top":"5px","padding-bottom":"5px"},attrs:{trigger:"click"}},[_c("span",{staticClass:"el-dropdown-link"},[_c("img",{attrs:{src:__webpack_require__(935010),width:"16",height:"16"}})]),_c("el-dropdown-menu",{staticClass:"p10",attrs:{slot:"dropdown",trigger:"click"},slot:"dropdown"},[_c("div",{staticClass:"\n                pT5\n                pB5\n                fc-label-hover\n                label-txt-black\n                f14\n                pL10\n                pR10\n                pointer\n              ",on:{click:function($event){return _vm.openPrintOptionDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.print"))+" ")]),_c("div",{staticClass:"\n                pT5\n                pB5\n                fc-label-hover\n                label-txt-black\n                f14\n                pL10\n                pR10\n                pointer\n              ",on:{click:function($event){return _vm.openDownloadOptionDialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.download"))+" ")]),_vm.canShowReportDownTime?_c("div",{staticClass:"\n                pT5\n                pB5\n                fc-label-hover\n                label-txt-black\n                f14\n                pL10\n                pR10\n                pointer\n              ",on:{click:function($event){return _vm.openAssetBreakDown(_vm.workorder.resource.id,_vm.workorder.subject)}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.report_downtime"))+" ")]):_vm._e(),_vm.enablePrerequisiteApprove?_c("div",{staticClass:"\n                pT5\n                pB5\n                fc-label-hover\n                label-txt-black\n                f14\n                pL10\n                pR10\n                pointer\n              ",on:{click:function($event){return _vm.preRequisiteApprove()}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.prerequisite_approve"))+" ")]):_vm._e(),_vm.isTutenLabs&&_vm.isWorkOrderEditable()?_c("div",{staticClass:"\n                pT5\n                pB5\n                fc-label-hover\n                label-txt-black\n                f14\n                pL10\n                pR10\n                pointer\n              ",on:{click:function($event){return _vm.openEditWODialog()}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.edit"))+" ")]):_vm._e(),_vm.editFormVisibilty?_c("WoV3EditForm",{attrs:{moduleName:"workorder",visibility:_vm.editFormVisibilty,wo:_vm.workorder},on:{visibilityUpdate:_vm.handleUpdateVisibility}}):_vm._e(),_vm.showViewAllSurvey?_c("div",{staticClass:"\n                pT5\n                pB5\n                fc-label-hover\n                label-txt-black\n                f14\n                pL10\n                pR10\n                pointer",on:{click:function($event){_vm.showSurveyDialog=!0}}},[_vm._v(" "+_vm._s(_vm.$t("survey.take_other_surveys"))+" ")]):_vm._e()],1)],1)],1)]),_c("ViewAllSurveysDialog",{attrs:{showSurveyDialog:_vm.showSurveyDialog,recordId:_vm.woId,moduleName:"workorder",recordName:_vm.workOrderName},on:{"update:showSurveyDialog":function($event){_vm.showSurveyDialog=$event},"update:show-survey-dialog":function($event){_vm.showSurveyDialog=$event}}}),!_vm.loading&&_vm.woBundle&&_vm.woBundle.workorder?_c("page",{key:_vm.woBundle?_vm.woBundle.workorder.id:-1,attrs:{module:_vm.moduleName,moduleDisplayName:_vm.moduleDisplayName,recordName:_vm.workOrderName,id:_vm.woBundle?_vm.woBundle.workorder.id:-1,details:_vm.woBundle,primaryFields:_vm.primaryFields,notesModuleName:"ticketnotes",attachmentsModuleName:"ticketattachments",isV3Api:!0}}):_vm._e(),_vm.openTaskOptions?_c("workorder-options",{attrs:{workorders:[_vm.woBundle&&_vm.woBundle.workorder.id],visibility:_vm.openTaskOptions,viewName:_vm.viewname,isDownloadOption:_vm.isDownloadOption,pdfUrl:_vm.pdfUrl,isPdfDownload:_vm.isPdfDownload},on:{"update:visibility":function($event){_vm.openTaskOptions=$event},"update:pdfUrl":function($event){_vm.pdfUrl=$event},"update:pdf-url":function($event){_vm.pdfUrl=$event}}}):_vm._e(),_c("pdf-download",{attrs:{url:_vm.pdfUrl,isDownload:_vm.isPdfDownload},on:{"update:isDownload":function($event){_vm.isPdfDownload=$event},"update:is-download":function($event){_vm.isPdfDownload=$event}}}),_vm.showAssetBreakdown?_c("asset-breakdown",{attrs:{assetBDSourceDetails:_vm.assetBDSourceDetails,visibility:_vm.showAssetBreakdown},on:{"update:visibility":function($event){_vm.showAssetBreakdown=$event}}}):_vm._e()],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),WoV3EditForm=(__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(209870)),vuex_esm=__webpack_require__(420629),eventBus=__webpack_require__(398011),api=__webpack_require__(32284),PageBuilder=__webpack_require__(760218),CustomButtonUtil=__webpack_require__(746095),WorkOrderSummaryPdfOptions=__webpack_require__(455360),Spinner=__webpack_require__(604947),CustomButton=__webpack_require__(623857),TransitionButtons=__webpack_require__(987612),validation=__webpack_require__(990260),workorderHelper=__webpack_require__(865764),ApprovalBar=__webpack_require__(42525),SurveyBar=__webpack_require__(667345),ViewAllSurveys=__webpack_require__(565003),SurveyUtil=__webpack_require__(575369),AssetBreakdown=__webpack_require__(749563),utils=__webpack_require__(866089),router=__webpack_require__(329435),PDFDownload=__webpack_require__(615987),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),SurveyMixin=__webpack_require__(872125),WorkorderOverviewvue_type_script_lang_js={name:"WorkOrderOverview",props:["viewname"],components:{Page:PageBuilder/* default */.Z,Spinner:Spinner/* default */.Z,workorderOptions:WorkOrderSummaryPdfOptions/* default */.Z,CustomButton:CustomButton/* default */.Z,TransitionButtons:TransitionButtons/* default */.Z,ApprovalBar:ApprovalBar/* default */.Z,SurveyBar:SurveyBar/* default */.Z,ViewAllSurveysDialog:ViewAllSurveys/* default */.Z,AssetBreakdown:AssetBreakdown/* default */.Z,WoV3EditForm:WoV3EditForm/* default */.Z,PdfDownload:PDFDownload/* default */.Z},mixins:[workorderHelper/* default */.Z,utils/* default */.Z,SurveyMixin/* default */.Z],mounted:function(){var _this=this;this.$root.$on("reloadWO",function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(res){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!res){_context.next=4;break}_this.woBundle.workorder=res.wo,_context.next=8;break;case 4:return _this.loadWorkorderSummary(),_context.next=7,(0,SurveyUtil/* loadSurveyForSurveyBar */.It)(!1,_this.moduleName,_this.woId,_this.surveyDetails);case 7:_this.surveyDetails=_context.sent;case 8:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())},created:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this2.loadWorkorderSummary(),_context2.next=3,(0,SurveyUtil/* loadSurveyForSurveyBar */.It)(!1,_this2.moduleName,_this2.woId,_this2.surveyDetails);case 3:_this2.surveyDetails=_context2.sent,_this2.$store.dispatch("loadTicketStatus","asset"),_this2.$store.dispatch("loadTicketStatus","assetmovement"),_this2.$store.dispatch("loadAssetCategory"),_this2.$store.dispatch("loadAssetType"),_this2.$store.dispatch("loadApprovalStatus"),eventBus/* eventBus */.Y.$on("refesh-parent",(function(){return _this2.refreshObj()})),eventBus/* eventBus */.Y.$on("refreshWorkOrderPage",(function(){return _this2.debounceLoadWorkOrderSummary()})),eventBus/* eventBus */.Y.$on("refresh-overview",_this2.refreshObj),eventBus/* eventBus */.Y.$on("stateflows",_this2.loadStateflows),eventBus/* eventBus */.Y.$on("woDescriptiontranslate",(function(woDescriptiontranslate){_this2.woDescriptiontranslate=woDescriptiontranslate}));case 14:case"end":return _context2.stop()}}),_callee2)})))()},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("refresh-overview",this.refreshObj)},destroyed:function(){var _this3=this;eventBus/* eventBus */.Y.$off("woDescriptiontranslate",(function(){_this3.woDescriptiontranslate=!1})),eventBus/* eventBus */.Y.$off("refreshWorkOrderPage")},data:function(){return{moduleName:"workorder",woBundle:null,loading:!0,isActive:!1,stateflows:[],primaryFields:["name","description","category","type","siteId","space"],POSITION:CustomButtonUtil/* POSITION_TYPE */.Rz,openTaskOptions:!1,
// asset breakdown reporting specific
showAssetBreakdown:!1,assetBDSourceDetails:{},editFormVisibilty:!1,isDownloadOption:!1,pdfUrl:"",workOrderSettingsRelatedData:{}}},watch:{woId:{handler:function(newVal){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:newVal&&_this4.refreshObj();case 1:case"end":return _context3.stop()}}),_callee3)})))()},immediate:!0}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({ticketStates:function(state){return state.ticketStatus.asset},moduleMeta:function(state){return state.view.metaInfo},hasWorkOrderClosePermission:function(){return(0,router/* isWebTabsEnabled */.tj)()?this.$hasPermission("".concat(this.moduleName,":UPDATE_CLOSE_WORKORDER")):this.$hasPermission("".concat(this.moduleName,":CLOSE_WORK_ORDER"))}})),{},{moduleDisplayName:function(){var moduleMeta=this.moduleMeta,_ref2=moduleMeta||{},displayName=_ref2.displayName;return displayName},isTutenLabs:function(){var TUTEN_LABS=592,currentOrgID=this.$org.id;return currentOrgID&&currentOrgID===TUTEN_LABS}},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory","isStatusLocked"])),{},{currentModuleName:function(){return"workorder"},isWoStateTransitionLicenseEnabled:function(){return this.$helpers.isLicenseEnabled("WO_STATE_TRANSITION_V3")},updateUrlString:function(){return this.isWoStateTransitionLicenseEnabled?null:"v2/workorders/update"},woId:function(){return this.$route.params.id},isStateFlowEnabled:function(){return Boolean(this.woBundle&&this.woBundle.workorder.moduleState&&this.woBundle.workorder.moduleState.id)},
// currentModuleState() {
//   let currentStateId =
//     this.woBundle &&
//     this.woBundle.workorder &&
//     this.woBundle.workorder.moduleState.id
//   let currentState =
//     this.ticketStates &&
//     this.ticketStates.find(state => state.id === currentStateId)
//   return currentState ? currentState.displayName : null
// },
workorderState:function(){return"wos"},moreOptions:function(){return this.$hasPermission("asset:UPDATE")||this.$hasPermission("asset:CREATE")},workorder:function(){var _this$woBundle,wo=null===this||void 0===this||null===(_this$woBundle=this.woBundle)||void 0===_this$woBundle?void 0:_this$woBundle.workorder;return wo||{}},canShowReportDownTime:function(){var workorder=this.workorder,isNotPortal=this.isNotPortal,_ref3=workorder||{},resource=_ref3.resource,_ref4=resource||{},resourceType=_ref4.resourceType,id=_ref4.id,ASSET=2;return isNotPortal&&resourceType===ASSET&&-1!==id},workOrderName:function(){var woBundle=this.woBundle,_ref5=woBundle||{},workorder=_ref5.workorder,_ref6=workorder||{},subject=_ref6.subject;return(0,validation/* isEmpty */.xb)(subject)?"---":subject},enablePrerequisiteApprove:function(){return this.woBundle&&this.woBundle.workorder.prerequisiteEnabled&&this.woBundle.workorder.allowNegativePreRequisite&&3===this.woBundle.workorder.allowNegativePreRequisite&&this.woBundle.workorder.prerequisiteApprover&&!this.woBundle.workorder.preRequisiteApproved&&2===this.woBundle.workorder.preRequestStatus},isApprovalEnabled:function(){var _ref7=this.woBundle.workorder||{},approvalFlowId=_ref7.approvalFlowId,approvalStatus=_ref7.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)},hasExecuteTaskPermission:function(){
// hasUpdateTaskPermission changed to hasExecuteTaskPermission
var _ref8=(0,router/* getApp */.wx)()||{},linkName=_ref8.linkName;return"newapp"===linkName||this.$hasPermission("workorder:UPDATE_WORKORDER_TASK")},hasManageTaskPermission:function(){var _ref9=(0,router/* getApp */.wx)()||{},linkName=_ref9.linkName;return"newapp"===linkName||this.$hasPermission("workorder:UPDATE_TASK")},isTasksTab:function(){var tabName=this.$getProperty(this,"$route.query.tab");return"tasks"===tabName},isPlansTab:function(){var tabName=this.$getProperty(this,"$route.query.tab");return"plans"===tabName},isActualsTab:function(){var tabName=this.$getProperty(this,"$route.query.tab");return"Actuals"===tabName},bannerMessage:function(){var message=null,isTasksTab=this.isTasksTab,isPlansTab=this.isPlansTab,isActualsTab=this.isActualsTab,workOrderSettingsRelatedData=this.workOrderSettingsRelatedData,_ref10=workOrderSettingsRelatedData||{},workOrderSettings=_ref10.workOrderSettings;
// Tasks tab conditional messages
if(isTasksTab){var _ref11=workOrderSettings||{},executeTask=_ref11.executeTask,_ref12=executeTask||{},reason=_ref12.reason,allowed=_ref12.allowed,workorder=this.workorder,_ref13=workorder||{},noOfTasks=_ref13.noOfTasks;allowed||(0,validation/* isEmpty */.xb)(reason)||!((0,validation/* isEmpty */.xb)(noOfTasks)||noOfTasks<=0)?(0,validation/* isEmpty */.xb)(reason)||(message=reason):
/*
            -> True when executeTask is false, and there is no task in workorder 
            -> It's been done to not-to show "Task Execution not allowed" bannerMessage when there are no tasks.
           */
message=null}else if(isPlansTab){
// Plans tab conditional messages
var _ref14=workOrderSettings||{},inventoryPlaning=_ref14.inventoryPlaning,_ref15=inventoryPlaning||{},_reason=_ref15.reason;(0,validation/* isEmpty */.xb)(_reason)||(message=_reason)}else if(isActualsTab){
// Actuals tab conditional messages
var _ref16=workOrderSettings||{},inventoryActuals=_ref16.inventoryActuals,_ref17=inventoryActuals||{},_reason2=_ref17.reason;(0,validation/* isEmpty */.xb)(_reason2)||(message=_reason2)}return message},canShowMessageBanner:function(){return!(0,validation/* isEmpty */.xb)(this.bannerMessage)},isLockedState:function(){var workorder=this.workorder,_ref18=workorder||{},moduleState=_ref18.moduleState;return this.$getProperty(moduleState,"recordLocked",!1)},isPdfDownload:{get:function(){var openTaskOptions=this.openTaskOptions,isDownloadOption=this.isDownloadOption,pdfUrl=this.pdfUrl;return openTaskOptions&&isDownloadOption&&!(0,validation/* isEmpty */.xb)(pdfUrl)},set:function(newValue){newValue||this.$set(this,"pdfUrl",""),this.$set(this,"openTaskOptions",newValue)}},moduleStateName:function(){var woBundle=this.woBundle,_ref19=woBundle||{},workorder=_ref19.workorder,_ref20=workorder||{},moduleState=_ref20.moduleState,_ref21=moduleState||{},_ref21$displayName=_ref21.displayName,displayName=void 0===_ref21$displayName?"---":_ref21$displayName;return displayName},isWorkOrderFeatureSettingsLicenseEnabled:function(){var $helpers=this.$helpers,_ref22=$helpers||{},isLicenseEnabled=_ref22.isLicenseEnabled;return isLicenseEnabled("WORK_ORDER_FEATURE_SETTINGS")}}),methods:{handleViewResults:function(){this.$router.push({path:"",query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.$route.query),{},{tab:"timelog and metrics"})})},handleUpdateVisibility:function(data){this.editFormVisibilty=data},openEditWODialog:function(){this.handleUpdateVisibility(!0)},openAllSurveyDialog:function(){this.showSurveyDialog=!0},loadWorkorderSummary:function(){var force=arguments.length>0&&void 0!==arguments[0]&&arguments[0],loadPage=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading=loadPage,
//TODO: WORK_ORDER_FEATURE_SETTINGS license check
this.isWorkOrderFeatureSettingsLicenseEnabled?this.loadWorkorderSummaryWithWorkOrderFeatureSettingAPI(force):
// -- can be removed later --
this.loadWorkorderSummaryOld(force)},loadWorkorderSummaryOld:function(force){var _this5=this;api/* API */.bl.fetchRecord("workorder",{id:this.$route.params.id},{force:force}).then((function(res){_this5.$set(_this5,"woBundle",res),_this5.woBundle.id=_this5.woBundle.workorder.id,_this5.$store.dispatch("workorder/setCurrentWO",_this5.woBundle.workorder)})).then((function(){for(var sectionID in
// filtering prerequisite sections
_this5.woBundle.workorder.preReqSections={},_this5.woBundle.workorder.taskSections){var taskSection=_this5.woBundle.workorder.taskSections[sectionID];taskSection.preRequest&&(_this5.woBundle.workorder.preReqSections[+sectionID]=taskSection)}var preReqSectionIDs=Object.keys(_this5.woBundle.workorder.preReqSections).map((function(k){return+k}));
// filtering prerequisite tasks
for(var _sectionID in _this5.woBundle.workorder.preReqTasks={},_this5.woBundle.workorder.tasks)preReqSectionIDs.includes(+_sectionID)&&(_this5.woBundle.workorder.preReqTasks[_sectionID]=_this5.woBundle.workorder.tasks[_sectionID]);_this5.loading=!1})).catch((function(error){var _error$message=error.message,message=void 0===_error$message?"Error occured while fetching workorkder":_error$message;_this5.$message.error(message)}))},loadWorkorderSummaryWithWorkOrderFeatureSettingAPI:function(force){var _this6=this;api/* API */.bl.fetchRecord("workorder",{id:this.$route.params.id},{force:force}).then((function(res){_this6.$set(_this6,"woBundle",res),_this6.woBundle.id=_this6.woBundle.workorder.id,_this6.$store.dispatch("workorder/setCurrentWO",_this6.woBundle.workorder)})).then((function(){for(var sectionID in
// filtering prerequisite sections
_this6.woBundle.workorder.preReqSections={},_this6.woBundle.workorder.taskSections){var taskSection=_this6.woBundle.workorder.taskSections[sectionID];taskSection.preRequest&&(_this6.woBundle.workorder.preReqSections[+sectionID]=taskSection)}var preReqSectionIDs=Object.keys(_this6.woBundle.workorder.preReqSections).map((function(k){return+k}));
// filtering prerequisite tasks
for(var _sectionID2 in _this6.woBundle.workorder.preReqTasks={},_this6.woBundle.workorder.tasks)preReqSectionIDs.includes(+_sectionID2)&&(_this6.woBundle.workorder.preReqTasks[_sectionID2]=_this6.woBundle.workorder.tasks[_sectionID2]);_this6.loading=!1})).then((0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var workorder,route;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if((0,validation/* isEmpty */.xb)(_this6.workorder)){_context4.next=6;break}return workorder=_this6.workorder,route="v3/workorders/features/"+workorder.id,_context4.next=5,api/* API */.bl.get(route);case 5:return _context4.abrupt("return",_context4.sent);case 6:case"end":return _context4.stop()}}),_callee4)})))).then((function(_ref24){var data=_ref24.data,error=_ref24.error;if((0,validation/* isEmpty */.xb)(data))(0,validation/* isEmpty */.xb)(error)||_this6.$message.error(error.message||_this6.$t(common.workorder.error_occurred_while_fetching_work_order_feature_settings_message));else{var woBundle=_this6.woBundle,workOrderSettingsRelatedData=_this6.workOrderSettingsRelatedData;workOrderSettingsRelatedData=(0,objectSpread2/* default */.Z)({},data),woBundle=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},woBundle),data),_this6.$set(_this6,"woBundle",woBundle),_this6.$set(_this6,"workOrderSettingsRelatedData",workOrderSettingsRelatedData)}})).catch((function(error){var _error$message2=error.message,message=void 0===_error$message2?"Error occured while fetching workorkder":_error$message2;_this6.$message.error(message)}))},getCurrentModuleState:function(){var woBundle=this.woBundle,_ref25=woBundle||{},workorder=_ref25.workorder,_ref26=workorder||{},moduleState=_ref26.moduleState;return moduleState},refreshObj:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _this7.loadWorkorderSummary(!0),_context5.next=3,(0,SurveyUtil/* loadSurveyForSurveyBar */.It)(!0,_this7.moduleName,_this7.woId,_this7.surveyDetails);case 3:_this7.surveyDetails=_context5.sent;case 4:case"end":return _context5.stop()}}),_callee5)})))()},loadStateflows:function(value){this.stateflows=value},back:function(){this.$router.go(-1)},openPrintOptionDialog:function(){this.openTaskOptions=!0,this.isDownloadOption=!1},openDownloadOptionDialog:function(){this.openTaskOptions=!0,this.isDownloadOption=!0},refreshWoDetails:function(){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _this8.loadWorkorderSummary(),_context6.next=3,(0,SurveyUtil/* loadSurveyForSurveyBar */.It)(!1,_this8.moduleName,_this8.woId,_this8.surveyDetails);case 3:_this8.surveyDetails=_context6.sent;case 4:case"end":return _context6.stop()}}),_callee6)})))()},onTransitionSuccess:function(){this.woBundle.workorder.loadTimer=!1,this.refreshWoDetails(),this.reloadRelatedRecords(),this.loadTasks()},reloadRelatedRecords:function(){eventBus/* eventBus */.Y.$emit("refresh-related-list")},transitionFilter:function(transition){var stateObj=this.$store.getters.getTicketStatus(transition.toStateId,"workorder"),isDisallowedState="CLOSED"===stateObj.type&&!this.hasWorkOrderClosePermission;return!isDisallowedState},handleTranslate:function(){this.woDescriptiontranslate=!this.woDescriptiontranslate,eventBus/* eventBus */.Y.$emit("woDescriptiontranslate",this.woDescriptiontranslate),this.isActive=!this.isActive},setCurrentState:function(id){this.$setProperty(this,"woBundle.workorder.moduleState.id",id)},debounceLoadWorkOrderSummary:debounce_default()((function(){this.loadWorkorderSummary(!0,!1)}),1e3)}},v3_WorkorderOverviewvue_type_script_lang_js=WorkorderOverviewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v3_WorkorderOverviewvue_type_script_lang_js,render,staticRenderFns,!1,null,"40dc574c",null)
/* harmony default export */,WorkorderOverview=component.exports},
/***/528661:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"2ee101f37a965f2ea9553a1e4c1a221b.svg";
/***/},
/***/935010:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"765af973ce02f8f593ec7a4e85d08efb.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/8366.js.map