(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[73477],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/383274:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FAssignment}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FAssignment.vue?vue&type=template&id=3fd62ade
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showRecommendedUsers&&"view"===_vm.viewtype?_c("el-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",attrs:{"popper-class":"fc-popover-p02 fc-assignment-popover-height",placement:"bottom",width:"320",trigger:"click"},on:{show:function($event){return _vm.loadrecommendedUsers()}}},[_c("div",{staticClass:"row popover-active-block",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"10px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel pointer"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel pointer"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"pL5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",{staticClass:"fc-search-sticky"},["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"}},[_vm.recommendedUsersList.length&&"workorder"===_vm.moduleName?_c("div",[_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommended_users"))+" ")]),_vm._l(_vm.recommendedUsersList,(function(recommendedUser,reusridx){return _c("div",{key:reusridx,on:{click:function($event){return _vm.assignViewWorkOrder(recommendedUser)}}},[_c("div",{staticClass:"group-item-label pointer"},[_vm._v(" "+_vm._s(recommendedUser.name)+" ( "+_vm._s(_vm.userVsTicketCountObj[recommendedUser.id])+" Tickets) ")])])}))],2):_vm._e(),"workorder"===_vm.moduleName&&_vm.recommendedUsersList.length?_c("div",{staticClass:"label-txt-black pL20 pT10 bold"},[_vm._v(" "+_vm._s(_vm.$t("common._common.others"))+" ")]):_vm._e(),_vm._l(_vm.userList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])}))],2):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px","padding-left":"10px"}},_vm._l(_vm.memberList,(function(user,usridx){return _c("div",{key:usridx,on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])])})),0):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("div",{staticClass:"scroll fc-assignment-scroll-popup",staticStyle:{"min-width":"150px","min-height":"320px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("div",{key:grpidx,on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("div",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticClass:"pL5",staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])]):_vm._e()})),0):_vm._e(),_c("span",{attrs:{slot:"reference"},slot:"reference"},[_vm._t("showFAssignmentPopover")],2)]):"form"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment"},[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassign("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",{staticClass:"p5"},[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignWorkOrder(user,usridx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignWorkOrder(group,grpidx,_vm.assignmentValue)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()],1):"view"===_vm.viewtype?_c("q-popover",{ref:"assignedtopopover",staticClass:"assignment-popover groupAssignment",on:{open:function($event){_vm.isPopverVisible=!0},close:function($event){_vm.isPopverVisible=!1}}},[_vm.isPopverVisible?[_c("div",{staticClass:"row",staticStyle:{"background-color":"#f1f3f5"}},[_c("div",{staticClass:"col-12",staticStyle:{"padding-left":"25px","padding-right":"25px","padding-top":"20px",width:"100%"}},[_c("span",{staticClass:"col-6 pull-left",class:{active:"assignmentGroup"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Team"},on:{click:function($event){return _vm.assignment("assignmentGroup")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.team")))]),_vm.selectedGroup?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignmentGroup")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedGroup))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])]),_c("span",{staticClass:"col-6 pull-right",class:{active:"assignedTo"===_vm.assignmentValue||"assignedToGroupMember"===_vm.assignmentValue},staticStyle:{width:"46%"},attrs:{"data-test-selector":"Staff"},on:{click:function($event){return _vm.assignment("assignedTo")}}},[_c("div",{staticClass:"group-label"},[_vm._v(_vm._s(_vm.$t("common.wo_report.staff")))]),_vm.selectedName?_c("div",{staticClass:"group-sublabel"},[_c("span",{on:{click:function($event){return _vm.reassignWO("assignedTo")}}},[_c("img",{staticClass:"svg-icon remove-icon",attrs:{src:__webpack_require__(583972)}})]),_c("span",[_vm._v(_vm._s(_vm.selectedName))])]):_c("div",{staticClass:"group-sublabel"},[_vm._v(" "+_vm._s(_vm.$t("common.header.unassigned"))+" ")])])])]),_c("div",["assignedTo"===_vm.assignmentValue?_c("f-search",{key:"assignedTo",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.userList,callback:function($$v){_vm.userList=$$v},expression:"userList"}}):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("f-search",{key:"assignedToGroupMember",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.memberList,callback:function($$v){_vm.memberList=$$v},expression:"memberList"}}):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("f-search",{key:"assignmentGroup",staticClass:"mL20",attrs:{boolval:"true"},model:{value:_vm.groupList,callback:function($$v){_vm.groupList=$$v},expression:"groupList"}}):_vm._e()],1),"assignedTo"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.userList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignedToGroupMember"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.memberList,(function(user,usridx){return _c("q-item",{key:usridx,attrs:{"data-test-selector":""+user.name},on:{click:function($event){return _vm.assignViewWorkOrder(user)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(user.name))])])],1)})),1):_vm._e(),"assignmentGroup"===_vm.assignmentValue?_c("q-list",{staticClass:"scroll",staticStyle:{"min-width":"150px","min-height":"200px","padding-left":"10px"},attrs:{link:""}},_vm._l(_vm.groupList,(function(group,grpidx){return group.active?_c("q-item",{key:grpidx,attrs:{"data-test-selector":""+group.name},on:{click:function($event){return _vm.assignViewWorkOrder(null,group,grpidx)}}},[_c("q-item-main",{staticClass:"group-item-label"},[_c("span",[_vm._v(_vm._s(group.name))]),_c("span",{staticStyle:{color:"#a5a5a5"}},[_vm._v(" ("+_vm._s(_vm.memberCount(group))+") ")]),_c("i",{staticClass:"q-icon material-icons",staticStyle:{float:"right","margin-right":"20px",color:"#a5a5a5"}},[_vm._v("keyboard_arrow_right")])])],1):_vm._e()})),1):_vm._e()]:_vm._e()],2):_vm._e()},staticRenderFns=[],defineProperty=__webpack_require__(482482),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),quasar_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(641358)),vuex_esm=__webpack_require__(420629),FSearch=__webpack_require__(947748),validation=__webpack_require__(990260),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),FAssignmentvue_type_script_lang_js={props:{model:{},viewtype:{},record:{},form:{},siteId:{default:null},recordId:{},moduleName:{},showRecommendedUsers:{}},data:function(){return{showQuickSearch:!1,loading:!1,quickSearchQuery:null,assignmentValue:"assignmentGroup",selectedName:"",selectedGroup:"",selctedGroupMember:"",userVsTicketCountObj:{},memberList:[],typeVal:this.viewtype,workorder:null,actions:{assign:{loading:!1}},userList:[],recommendedUsersList:[],groupList:[],filtereduserList:[],filteredgroupList:[],filteredmemberList:[],isPopverVisible:!1}},components:{QPopover:quasar_esm/* QPopover */.oe,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QList:quasar_esm/* QList */.tu,FSearch:FSearch/* default */.Z},watch:{record:function(){this.loadWorkorders()},siteId:{handler:function(newVal,oldVal){var getCurrentSiteId=this.getCurrentSiteId,viewtype=this.viewtype;isEqual_default()(newVal,oldVal)||isEqual_default()(newVal,getCurrentSiteId)||isEqual_default()(viewtype,"view")||this.scopeTeamUser()},immediate:!0},isPopverVisible:function(){this.isPopverVisible&&"view"===this.viewtype&&(0,validation/* isEmpty */.xb)(this.userList)&&(0,validation/* isEmpty */.xb)(this.groupList)&&this.scopeTeamUser()},model:{handler:function(newVal,oldVal){if(!isEqual_default()(newVal,oldVal)){var assignedTo=newVal.assignedTo,assignmentGroup=newVal.assignmentGroup,_ref=assignedTo||{},assignedToId=_ref.id,_ref2=assignmentGroup||{},assignmentGroupId=_ref2.id;(0,validation/* isEmpty */.xb)(assignedToId)&&(this.selectedName=null),(0,validation/* isEmpty */.xb)(assignmentGroupId)&&(this.selectedGroup=null)}}}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatusByLabel","getCurrentSiteId","getUser","getGroup"])),created:function(){var _this=this;this.$store.dispatch("loadTicketStatus","workorder").then((function(){_this.loadWorkorders()}))},methods:{memberCount:function(group){var _ref3=group||{},members=_ref3.members;return(members||[]).length},loadrecommendedUsers:function(){var _this2=this;this.loading=!0,this.userVsTicketCountObj={},this.recommendedUsersList=[];var url="v2/recommended/workorder?woId=".concat(this.record.id);this.$http.get(url).then((function(response){0===response.data.responseCode&&response.data.result&&response.data.result.recommendedUsers&&response.data.result.recommendedUsers.forEach((function(element){_this2.recommendedUsersList.push(element.user),_this2.userVsTicketCountObj[element.user.id]=element.reason.no_of_tickets;for(var i=0;i<_this2.userList.length;i++)_this2.userList[i].id===element.user.id&&_this2.userList.splice(i,1)})),_this2.loading=!1})).catch((function(){
// TODO handle errors
}))},loadWorkorders:function(){var objKey="model";"view"===this.viewtype&&(objKey="record");var parent=this[objKey],_ref4=parent||{},assignedTo=_ref4.assignedTo,assignmentGroup=_ref4.assignmentGroup,_ref5=assignedTo||{},assignedToId=_ref5.id,assignedToName=_ref5.name,_ref6=assignmentGroup||{},assignmentGroupId=_ref6.id,assignmentGroupName=_ref6.name;(0,validation/* isEmpty */.xb)(assignedToName)?this.selectedName=(0,validation/* isEmpty */.xb)(assignedToId)?null:this.getUserNameFromList(assignedToId):this.selectedName=assignedToName,(0,validation/* isEmpty */.xb)(assignmentGroupName)?this.assignmentGroupName=(0,validation/* isEmpty */.xb)(assignmentGroupId)?null:this.getGroupNameFromList(assignmentGroupId):this.selectedGroup=assignmentGroupName},assignment:function(value){this.assignmentValue=value},assignWorkOrder:function(assignedObj,index,value){var isValueChanged=!1,model=this.model,$refs=this.$refs,_ref7=model||{},assignedTo=_ref7.assignedTo,assignmentGroup=_ref7.assignmentGroup,_ref8=assignedObj||{},id=_ref8.id,name=_ref8.name;if("assignmentGroup"===value){var _ref9=assignmentGroup||{},assignmentGroupId=_ref9.id;(0,validation/* isEmpty */.xb)(name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(id)?null:this.getGroupNameFromList(id):this.selectedGroup=name,(0,validation/* isEmpty */.xb)(assignmentGroup)||(isValueChanged=assignmentGroupId!==id,this.$set(this.model.assignmentGroup,"id",id),this.$set(this.model.assignmentGroup,"name",name)),this.$emit("input",id),this.$emit("value",model),this.groupmemberList(index),isValueChanged&&this.$emit("onChange")}if("assignedTo"===value||"assignedToGroupMember"===value){
// get the assignedTo user and update using 'updateAssignedTo' emit.
var _ref10=assignedTo||{},assignedToId=_ref10.id;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,(0,validation/* isEmpty */.xb)(assignedTo)||(isValueChanged=assignedToId!==id,this.$set(this.model.assignedTo,"id",id),this.$set(this.model.assignedTo,"name",name)),this.$emit("input",id),this.$emit("value",model),$refs["assignedtopopover"]&&$refs["assignedtopopover"].close(),isValueChanged&&this.$emit("onChange",assignedObj)}},groupmemberList:function(groupIndex){this.assignmentValue="assignedToGroupMember",this.memberList=this.groupList[groupIndex].members,this.selectedName=null},assignViewWorkOrder:function(assignedTo,assignmentGroup,index){var _this3=this,$refs=this.$refs,record=this.record,assignObj={},moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref11=moduleState||{},statusId=_ref11.id,_ref12=record||{},recordId=_ref12.id;if(assignObj.id=[recordId],assignedTo){assignObj.assignedTo=assignedTo;var _ref13=assignedTo||{},id=_ref13.id,name=_ref13.name;(0,validation/* isEmpty */.xb)(name)?this.selectedName=(0,validation/* isEmpty */.xb)(id)?null:this.getUserNameFromList(id):this.selectedName=name,$refs["assignedtopopover"]&&$refs["assignedtopopover"].close()}if(assignmentGroup){assignObj.assignmentGroup=assignmentGroup;var _ref14=assignmentGroup||{},_id=_ref14.id,_name=_ref14.name;(0,validation/* isEmpty */.xb)(_name)?this.selectedGroup=(0,validation/* isEmpty */.xb)(_id)?null:this.getGroupNameFromList(_id):this.selectedGroup=_name,this.groupmemberList(index)}assignObj.status={id:statusId,status:"Assigned"},this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this3.$emit("assignactivity",assignObj),_this3.$dialog.notify(_this3.$t("common.products.workorder_assigned_successfully"))}))},scopeTeamUser:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params,siteId,_yield$API$post,data,error,_ref15,groups,users;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={},siteId=_this4.siteId,siteId&&(params.siteId=siteId),_context.next=5,api/* API */.bl.post("v3/group/scopeBySite",params);case 5:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,error||(_ref15=data||{},groups=_ref15.groups,users=_ref15.users,_this4.userList=users||[],_this4.groupList=groups||[]);case 9:case"end":return _context.stop()}}),_callee)})))()},removeTeamWO:function(assignValue){var _assignObj,_this5=this,record=this.record,_ref16=record||{},recordId=_ref16.id,moduleState=this.getTicketStatusByLabel("Assigned","workorder"),_ref17=moduleState||{},statusId=_ref17.id,assignObj=(_assignObj={id:[recordId]},(0,defineProperty/* default */.Z)(_assignObj,assignValue,{id:-1}),(0,defineProperty/* default */.Z)(_assignObj,"status",{id:statusId,status:"Assigned"}),_assignObj);this.$store.dispatch("workorder/assignWorkOrder",assignObj).then((function(){_this5.$emit("assignactivity",assignObj),_this5.$dialog.notify(_this5.$t("common.products.workorder_assigned_successfully"))}))},reassign:function(assignValue){var model=this.model,_ref18=model||{},assignmentGroup=_ref18.assignmentGroup,assignedTo=_ref18.assignedTo;"assignmentGroup"===assignValue&&(this.selectedGroup=null,(0,validation/* isEmpty */.xb)(assignmentGroup)||(this.$set(this.model.assignmentGroup,"id",null),this.$set(this.model.assignmentGroup,"name",null))),"assignedTo"===assignValue&&(this.selectedName=null,(0,validation/* isEmpty */.xb)(assignedTo)||(this.$set(this.model.assignedTo,"id",null),this.$set(this.model.assignedTo,"name",null)))},reassignWO:function(assignValue){"assignmentGroup"===assignValue&&(this.selectedGroup=null),"assignedTo"===assignValue&&(this.selectedName=null),this.removeTeamWO(assignValue)},getUserNameFromList:function(id){var userList=this.userList;if((0,validation/* isEmpty */.xb)(userList))return this.getUser(id).name;var user=userList.find((function(user){return user.id===id}));return(0,validation/* isEmpty */.xb)(user)?void 0:this.$getProperty(user,"name",null)},getGroupNameFromList:function(id){var _this6=this,groupList=this.groupList;if((0,validation/* isEmpty */.xb)(groupList))this.$store.dispatch("loadGroups").then((function(){return(_this6.getGroup(id)||{}).name}));else{var group=groupList.find((function(group){return group.id===id}));if(!(0,validation/* isEmpty */.xb)(group))return this.$getProperty(group,"name",null)}}}},components_FAssignmentvue_type_script_lang_js=FAssignmentvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FAssignmentvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FAssignment=component.exports},
/***/611097:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDuration}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDuration.vue?vue&type=template&id=be32332e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-input-label-txt pB0",class:_vm.labelClass},[_vm._v(" "+_vm._s(_vm.label?_vm.label:this.$t("maintenance.pm_list.duration"))+" ")]),_c("el-row",{staticClass:"mT10",attrs:{gutter:10}},[_vm._t("prefix"),_c("el-col",{attrs:{span:"l"==_vm.size?10:7}},[_c("el-input",{staticClass:"duration-days-input fc-input-full-border2",attrs:{type:"number",min:"0"},model:{value:_vm.duration.day,callback:function($$v){_vm.$set(_vm.duration,"day",$$v)},expression:"duration.day"}}),_c("span",{staticClass:"textcolor pL10"},[_vm._v(_vm._s(_vm.$tc("maintenance.pm_list.day_s")))])],1),_c("el-col",{attrs:{span:11}},[_c("el-select",{staticClass:"fc-input-full-border2",staticStyle:{width:"60px"},model:{value:_vm.duration.hour,callback:function($$v){_vm.$set(_vm.duration,"hour",$$v)},expression:"duration.hour"}},_vm._l(_vm.getNumberRange(23),(function(hour){return 0!==hour.value||!_vm.minHour||_vm.duration.day>0?_c("el-option",{key:hour.value,attrs:{label:hour.label,value:hour.value}}):_vm._e()})),1),_c("span",{staticClass:"textcolor hours-txt-align"},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.hour_s")))])],1)],2)],1)},staticRenderFns=[],FDurationvue_type_script_lang_js=(__webpack_require__(670560),{props:["value","label","labelClass","format","size","minHour"],data:function(){return{duration:{day:0,hour:0}}},watch:{duration:{handler:function(newVal,oldVal){this.onValueChange()},deep:!0}},mounted:function(){var unwatch=this.$watch("value",(function(value){var duration=value;if(duration&&-1!==duration){var factor=1;factor="h"===this.format?1:3600;var days=Math.floor(duration/(24*factor));duration-=24*days*factor;var hours=Math.floor(duration/factor);this.duration.day=days,this.duration.hour=hours,unwatch&&unwatch()}}),{immediate:!0})},methods:{getNumberRange:function(no){for(var list=[],i=0;i<=no;i++)list.push({label:i+"",value:i});return list},onValueChange:function(){var factor=1;factor="h"===this.format?1:3600;var duration=24*this.duration.day*factor;duration+=this.duration.hour*factor,this.$emit("input",duration||-1)}}}),components_FDurationvue_type_script_lang_js=FDurationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDurationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDuration=component.exports},
/***/201117:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupFieldWrapper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FLookupFieldWrapper.vue?vue&type=template&id=0b196d62
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"lookup-wrapper"},[_vm.fieldObj.field?_c("FLookupField",{class:{"handle-wizard-icon":_vm.handleWizardIcon},attrs:{model:_vm.modelObj,field:_vm.fieldObj,disabled:_vm.disabled,siteId:_vm.siteId,hideLookupIcon:_vm.hideWizard,hideDropDown:_vm.hideDropDown,preHookFilterConstruction:_vm.filterConstruction,fetchOptionsOnLoad:_vm.fetchOptionsOnLoad,fetchOptionsMethod:_vm.fetchOptionsMethod},on:{"update:model":function($event){_vm.modelObj=$event},showLookupWizard:_vm.showLookupWizard,recordSelected:_vm.onRecordSelected}}):_c("el-input"),!_vm.hideWizard&&_vm.canShowLookupWizard?_c("div",[_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.fieldObj,siteId:_vm.siteId,withReadings:_vm.withReadings},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue,showMainFieldSearch:function($event){return _vm.onWizardShow(!1)}}})],1):_vm._e()],1)},staticRenderFns=[],slicedToArray=__webpack_require__(554621),FLookupField=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(450886),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(891719),__webpack_require__(855048)),validation=__webpack_require__(990260),FLookupFieldWrappervue_type_script_lang_js={name:"f-lookup-field-wrapper",props:{value:[Number,String,Array],label:String,
// Label of selected value if any
formField:Object,field:Object,
// Pass field object if form field not available and field avaialble
moduleName:String,
// Pass module name and field name if field object not avaialble
fieldName:String,disabled:{type:Boolean,default:!1},siteId:Number,hideWizard:{type:Boolean,default:!1},hideDropDown:{type:Boolean,default:!1},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},withReadings:Boolean,handleWizardIcon:{
// To handle wizard icon css
type:Boolean,default:!0},filterConstruction:{type:Function,default:function(field){return field.filters}}},components:{FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(99751),__webpack_require__.e(42054)]).then(__webpack_require__.bind(__webpack_require__,499751))}},data:function(){return{fieldObj:{isDataLoading:!1,options:[],lookupModuleName:"",field:null,filters:{},isDisabled:!1},canShowLookupWizard:!1}},computed:{modelObj:{get:function(){return(0,validation/* isEmpty */.xb)(this.value)?this.value:(0,validation/* isArray */.kJ)(this.value)?this.value.map((function(val){return parseInt(val)})):parseInt(this.value)},set:function(value){this.$emit("input",value)}}},created:function(){this.handleDefaultOption()},mounted:function(){var formField=this.formField,field=this.field;(0,validation/* isEmpty */.xb)(formField)?(0,validation/* isEmpty */.xb)(field)?this.fetchField():this.setField(field):this.fieldObj=formField},watch:{canShowLookupWizard:function(value){value||this.onWizardShow(value)}},methods:{showLookupWizard:function(field,canShow){this.fieldObj=field,this.canShowLookupWizard=canShow,this.onWizardShow(!0)},setLookupFieldValue:function(props){var _this=this,field=props.field,_ref=field||{},multiple=_ref.multiple,selectedItems=_ref.selectedItems;if(multiple){var valueArr=[];selectedItems.forEach((function(item){var value=item.value,label=item.label;_this.addOption(value,label),valueArr.push(value)})),this.modelObj=valueArr,this.onRecordSelected(selectedItems,valueArr)}else{var _ref2=selectedItems||[],_ref3=(0,slicedToArray/* default */.Z)(_ref2,1),selectedItem=_ref3[0],value=selectedItem.value,label=selectedItem.label;this.addOption(value,label),this.modelObj=value,this.onRecordSelected(selectedItem)}this.onWizardShow(!1)},onWizardShow:function(show){this.$emit("showingLookupWizard",show)},fetchField:function(){var _this2=this,moduleName=this.moduleName,fieldName=this.fieldName;this.$util.loadModuleMeta(moduleName).then((function(meta){var field=meta.fields.find((function(field){return field.name===fieldName}));_this2.setField(field)}))},onRecordSelected:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.$emit.apply(this,["recordSelected"].concat(args))},handleDefaultOption:function(){var label=this.label,value=this.value;(0,validation/* isEmpty */.xb)(label)||(0,validation/* isEmpty */.xb)(value)||this.addOption(value,label)},setField:function(field){var fieldObj=this.fieldObj;fieldObj.field=field,fieldObj.multiple=field.multiple,fieldObj.lookupModuleName=field.lookupModule.name,(0,validation/* isArray */.kJ)(this.modelObj)?fieldObj.selectedItems=this.modelObj.map((function(id){return{value:id}})):fieldObj.selectedItems={value:this.modelObj}},addOption:function(id,label){var fieldObj=this.fieldObj,options=fieldObj.options,newOptionObj={label:label,value:id};(0,validation/* isEmpty */.xb)(options)?options.push(newOptionObj):options.some((function(option){return option.value===id}))||options.unshift(newOptionObj),this.$set(this.fieldObj,"options",options)}}},components_FLookupFieldWrappervue_type_script_lang_js=FLookupFieldWrappervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FLookupFieldWrappervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupFieldWrapper=component.exports},
/***/645877:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSchedule}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSchedule.vue?vue&type=template&id=39758f39
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-row",{staticClass:"schedule-layout",attrs:{gutter:80,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.frequency"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",style:{width:_vm.schedule.custom||0===_vm.schedule.facilioFrequency||1===_vm.schedule.facilioFrequency?"100%":"50%"},model:{value:_vm.schedule.facilioFrequency,callback:function($$v){_vm.$set(_vm.schedule,"facilioFrequency",$$v)},expression:"schedule.facilioFrequency"}},_vm._l(_vm.frequencyTypes,(function(ftype,index){return _c("el-option",{key:index,attrs:{label:ftype.label,value:parseInt(ftype.value)}})})),1),_vm.schedule.custom||0===_vm.schedule.facilioFrequency?_vm._e():["week"===_vm.dayTypes[_vm.schedule.facilioFrequency]?_c("el-select",{staticClass:"pL10 fc-input-full-border-select2",staticStyle:{width:"49%"},model:{value:_vm.schedule.executeOnDay,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDay",$$v)},expression:"schedule.executeOnDay"}},_vm._l(_vm.days,(function(day){return _c("el-option",{key:day,attrs:{label:_vm.dayNames[day],value:day}})})),1):"month"===_vm.dayTypes[_vm.schedule.facilioFrequency]?_c("el-select",{staticClass:"pL10 fc-input-full-border-select2",staticStyle:{width:"49%"},model:{value:_vm.schedule.executeOnDate,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDate",$$v)},expression:"schedule.executeOnDate"}},_vm._l(_vm.getNumberRange(31),(function(date){return _c("el-option",{key:date.value,attrs:{label:date.label,value:date.value}})})),1):"year"===_vm.dayTypes[_vm.schedule.facilioFrequency]?[_c("el-select",{staticClass:"pL10 fc-input-full-border-select2",staticStyle:{width:"30%"},model:{value:_vm.schedule.executeOnMonth,callback:function($$v){_vm.$set(_vm.schedule,"executeOnMonth",$$v)},expression:"schedule.executeOnMonth"}},_vm._l(_vm.months,(function(month,index){return _c("el-option",{key:month,attrs:{label:_vm._f("monthName")(index+1),value:month}})})),1),_c("el-select",{staticStyle:{width:"18% fc-input-full-border-select2"},model:{value:_vm.schedule.yearlyDayValue,callback:function($$v){_vm.$set(_vm.schedule,"yearlyDayValue",$$v)},expression:"schedule.yearlyDayValue"}},_vm._l(_vm.getNumberRange(31),(function(date){return _c("el-option",{key:date.value,attrs:{label:date.label,value:date.value}})})),1)]:_vm._e()]],2),0!==_vm.schedule.facilioFrequency?_c("el-col",{attrs:{span:24}},[_c("el-checkbox",{model:{value:_vm.schedule.custom,callback:function($$v){_vm.$set(_vm.schedule,"custom",$$v)},expression:"schedule.custom"}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.custom"))+" ")])])],1):_vm._e(),_vm.schedule.custom&&0!==_vm.schedule.facilioFrequency?_c("el-col",{staticClass:"custom-frequency",attrs:{span:24}},[4!==_vm.schedule.facilioFrequency&&5!==_vm.schedule.facilioFrequency?[_c("div",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.run_every"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2",staticStyle:{width:"100%"},model:{value:_vm.schedule.frequency,callback:function($$v){_vm.$set(_vm.schedule,"frequency",$$v)},expression:"schedule.frequency"}},_vm._l(_vm.repeatList,(function(ftype,index){return _c("el-option",{key:index,attrs:{label:ftype.label,value:ftype.value}})})),1)]:_vm._e(),_c("div",{staticClass:"fc-input-label-txt pB10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.execute_on"))+" ")]),"day"===_vm.dayTypes[_vm.schedule.facilioFrequency]||"week"===_vm.dayTypes[_vm.schedule.facilioFrequency]?_c("div",{staticClass:"fc-input-full-border-select2"},[_c("el-select",{staticClass:"fc-tag",staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:_vm.schedule.executeOnDays,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDays",$$v)},expression:"schedule.executeOnDays"}},_vm._l(_vm.days,(function(day){return _c("el-option",{key:day,attrs:{label:_vm.dayNames[day],value:day}})})),1)],1):"month"===_vm.dayTypes[_vm.schedule.facilioFrequency]?_c("div",{staticStyle:{width:"100%"}},[_c("el-col",{attrs:{span:8}},[_c("el-select",{key:"typeday",staticClass:"fc-input-full-border-select2",model:{value:_vm.schedule.executeOnType,callback:function($$v){_vm.$set(_vm.schedule,"executeOnType",$$v)},expression:"schedule.executeOnType"}},[_c("el-option",{attrs:{label:"Day",value:"day"}}),_c("el-option",{attrs:{label:"Week",value:"week"}})],1)],1),_c("el-col",{attrs:{span:16}},["day"===_vm.schedule.executeOnType?_c("el-select",{key:"datevalue",staticClass:"pL10 fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:_vm.schedule.executeOnDates,callback:function($$v){_vm.$set(_vm.schedule,"executeOnDates",$$v)},expression:"schedule.executeOnDates"}},_vm._l(_vm.getNumberRange(31),(function(date){return _c("el-option",{key:date.value+"day",attrs:{label:date.label,value:date.value}})})),1):_vm._e(),"week"===_vm.schedule.executeOnType?_c("el-cascader",{staticClass:"pL10 fcascader",staticStyle:{width:"100%"},attrs:{options:_vm.getWeekList()},model:{value:_vm.schedule.executeOnWeek,callback:function($$v){_vm.$set(_vm.schedule,"executeOnWeek",$$v)},expression:"schedule.executeOnWeek"}}):_vm._e()],1)],1):"year"===_vm.dayTypes[_vm.schedule.facilioFrequency]?_c("div",{staticClass:"flLeft",staticStyle:{width:"100%"}},[_c("el-col",{attrs:{span:16}},[_c("el-select",{key:"months",staticClass:"fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:_vm.schedule.executeOnMonths,callback:function($$v){_vm.$set(_vm.schedule,"executeOnMonths",$$v)},expression:"schedule.executeOnMonths"}},_vm._l(_vm.months,(function(month,index){return _c("el-option",{key:month+"month",attrs:{label:_vm._f("monthName")(index+1),value:month}})})),1)],1),_c("el-col",{attrs:{span:8}},[_c("el-select",{staticClass:"pL10 fc-input-full-border-select2",staticStyle:{width:"100%"},model:{value:_vm.schedule.yearlyDayValue,callback:function($$v){_vm.$set(_vm.schedule,"yearlyDayValue",$$v)},expression:"schedule.yearlyDayValue"}},_vm._l(_vm.getNumberRange(31),(function(date){return _c("el-option",{key:date.value+"yearday",attrs:{label:date.label,value:date.value}})})),1)],1)],1):_vm._e()],2):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),moment_timezone=(__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(76265),__webpack_require__(976801),__webpack_require__(689730),__webpack_require__(450886),__webpack_require__(480008)),moment_timezone_default=__webpack_require__.n(moment_timezone),validation=__webpack_require__(990260),FSchedulevue_type_script_lang_js={props:["from","times","value","initialSchedule","simple"],data:function(){return{frequencyTypes:[],schedule:{frequencyType:1,facilioFrequency:1,frequency:1,executeOnDay:"",executeOnDays:[],executeOnType:"day",executeOnDate:"",executeOnDates:[],executeOnWeek:[],executeOnMonth:"",executeOnMonths:[],yearlyDayValue:"",custom:!1},days:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],dayNames:{Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},weeks:["First","Second","Third","Fourth","Last"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayTypes:{
// based on facilio frequency
1:"day",2:"week",3:"month",4:"month",5:"month",6:"year"}}},computed:{startTime:function(){return this.from?this.from:new Date},repeatList:function(){var dayTypes=this.dayTypes,schedule=this.schedule,facilioFrequency=schedule.facilioFrequency;return this.generateFrequencyTimes(dayTypes[facilioFrequency],60)},localStartTime:function(){return moment_timezone_default()(this.startTime).tz(moment_timezone_default().tz.guess())}},mounted:function(){var self=this;this.loadScheduleInfo(),this.setInitialValue(),this.$watch("schedule",(function(){this.$emit("input",self.constructScheduleObj())}),{deep:!0})},methods:{getDayIndex:function(dayName){dayName||(dayName=this.localStartTime.format("ddd"));var dayIndex=this.days.indexOf(dayName);return dayIndex+1},getMonthIndex:function(monthName){monthName||(monthName=this.localStartTime.format("MMM"));var monthIndex=this.months.indexOf(monthName);return monthIndex+1},getWeekName:function(weekIndex){weekIndex||(weekIndex=Math.ceil(this.localStartTime.date()/7));var weekName=this.weeks[weekIndex-1];return weekName||(weekName=this.weeks[this.weeks.length-1]),weekName},getWeekIndex:function(weekName){if(!weekName)return Math.ceil(this.localStartTime.date()/7);var weekIndex=this.weeks.indexOf(weekName);return weekIndex+1},loadScheduleInfo:function(){for(var key in this.frequencyTypes=[],this.simple?this.facilioFrequency=1:this.frequencyTypes.push({label:"Do not repeat",value:0}),this.$constants.FACILIO_FREQUENCY)this.$constants.FACILIO_FREQUENCY.hasOwnProperty(key)&&this.frequencyTypes.push({label:this.$constants.FACILIO_FREQUENCY[key],value:key});var dayShortName=this.localStartTime.format("ddd");this.schedule.executeOnDays.length||(this.schedule.executeOnDay=dayShortName,1===this.schedule.facilioFrequency?this.schedule.executeOnDays=this.days:2===this.schedule.facilioFrequency&&this.schedule.executeOnDays.push(dayShortName));var selectedDate=parseInt(this.localStartTime.format("DD"));if(this.schedule.executeOnDates.length||(this.schedule.executeOnDate=selectedDate,this.schedule.executeOnDates.push(selectedDate)),!this.schedule.executeOnWeek.length){var weekOfMonthStr=this.getWeekName();this.schedule.executeOnWeek.push(weekOfMonthStr),this.schedule.executeOnWeek.push(dayShortName)}if(!this.schedule.executeOnMonths.length){var month=this.localStartTime.format("MMM");this.schedule.executeOnMonth=month,this.schedule.executeOnMonths=[month],this.schedule.yearlyDayValue=parseInt(selectedDate)}},constructScheduleObj:function(){var newSchedule={frequencyType:0,facilioFrequency:this.schedule.facilioFrequency,frequency:1,values:[],times:[],custom:this.schedule.custom};if(this.times?newSchedule.times=this.times:newSchedule.times.push("00:00"),this.schedule.custom&&(newSchedule.frequency=this.schedule.frequency),1===this.schedule.facilioFrequency){if(newSchedule.frequencyType=this.schedule.facilioFrequency,this.schedule.custom&&7!==this.schedule.executeOnDays.length){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.schedule.executeOnDays);try{for(_iterator.s();!(_step=_iterator.n()).done;){var dayName=_step.value;newSchedule.values.push(this.getDayIndex(dayName))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}else if(2===this.schedule.facilioFrequency){newSchedule.frequencyType=this.schedule.facilioFrequency;var _step2,days=this.schedule.custom?this.schedule.executeOnDays:[this.schedule.executeOnDay],_iterator2=(0,createForOfIteratorHelper/* default */.Z)(days);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _dayName=_step2.value;newSchedule.values.push(this.getDayIndex(_dayName))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else if([3,4,5].includes(this.schedule.facilioFrequency)){if(this.schedule.custom&&"week"===this.schedule.executeOnType){newSchedule.frequencyType=4,newSchedule.weekFrequency=this.getWeekIndex(this.schedule.executeOnWeek[0]),newSchedule.values=[];var weekValue=this.schedule.executeOnWeek[1];if("Whole_Week"===weekValue)newSchedule.values=[1,2,3,4,5,6,7];else if("Mon_Fri"===weekValue)newSchedule.values=[1,2,3,4,5];else if("Weekend"===weekValue)newSchedule.values=[6,7];else{var dayIndex=this.getDayIndex(weekValue);dayIndex>0&&(newSchedule.values=[dayIndex])}}else{newSchedule.frequencyType=3;var dates=this.schedule.custom?this.schedule.executeOnDates:[this.schedule.executeOnDate];newSchedule.values=dates}4===this.schedule.facilioFrequency?newSchedule.frequency=3:5===this.schedule.facilioFrequency&&(newSchedule.frequency=6)}else if(6===this.schedule.facilioFrequency){newSchedule.frequencyType=5,newSchedule.yearlyDayValue=this.schedule.yearlyDayValue;var _step3,months=this.schedule.custom?this.schedule.executeOnMonths:[this.schedule.executeOnMonth],_iterator3=(0,createForOfIteratorHelper/* default */.Z)(months);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var monthName=_step3.value;newSchedule.values.push(this.getMonthIndex(monthName))}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}return newSchedule},generateFrequencyList:function(){var newObj=[{value:"day",label:"Day",children:this.generateFrequencyTimes("day",50)},{value:"week",label:"Week",children:this.generateFrequencyTimes("week",50)},{value:"month",label:"Month",children:this.generateFrequencyTimes("month",50)},{value:"year",label:"Year",children:this.generateFrequencyTimes("year",50)}];return newObj},generateFrequencyTimes:function(type,no){var list=[];if(!(0,validation/* isEmpty */.xb)(type))for(var i=0;i<no;i++)0===i?list.push({label:type.charAt(0).toUpperCase()+type.slice(1),value:1}):list.push({label:i+1+" "+type+"s",value:i+1});return list},getWeekList:function(){var options=[{label:"First",value:"First",children:this.getWeekDays()},{label:"Second",value:"Second",children:this.getWeekDays()},{label:"Third",value:"Third",children:this.getWeekDays()},{label:"Fourth",value:"Fourth",children:this.getWeekDays()},{label:"Last",value:"Last",children:this.getWeekDays()}];return options},getNumberRange:function(no){for(var list=[],i=1;i<=no;i++)list.push({label:i+"",value:i});return list},getWeekDays:function(){var list=[{label:"Whole week",value:"Whole_Week"},{label:this.dayNames["Mon"],value:"Mon"},{label:this.dayNames["Tue"],value:"Tue"},{label:this.dayNames["Wed"],value:"Wed"},{label:this.dayNames["Thu"],value:"Thu"},{label:this.dayNames["Fri"],value:"Fri"},{label:this.dayNames["Sat"],value:"Sat"},{label:this.dayNames["Sun"],value:"Sun"},{label:"Monday - Friday",value:"Mon_Fri"},{label:"Weekend",value:"Weekend"}];return list},setInitialValue:function(){var _this=this;if(this.initialSchedule)if(this.schedule.facilioFrequency=-1!==this.initialSchedule.facilioFrequency?this.initialSchedule.facilioFrequency:0,this.schedule.frequency=this.initialSchedule.frequency,this.schedule.custom=this.initialSchedule.custom,1===this.initialSchedule.facilioFrequency||2===this.initialSchedule.facilioFrequency)this.schedule.executeOnDays=this.initialSchedule.values.map((function(day){return _this.days[day-1]})),this.schedule.executeOnDay=this.schedule.executeOnDays[0];else if([3,4,5].includes(this.schedule.facilioFrequency))if(this.initialSchedule.weekFrequency>0){var value;this.schedule.executeOnType="week",this.schedule.executeOnWeek[0]=this.getWeekName(this.initialSchedule.weekFrequency);var length=this.initialSchedule.values.length;value=7===length?"Whole_Week":5===length?"Mon_Fri":2===length?"Weekend":this.days[this.initialSchedule.values[0]-1],this.schedule.executeOnWeek[1]=value}else this.schedule.executeOnType="day",this.schedule.executeOnDates=this.initialSchedule.values,this.schedule.executeOnDate=this.initialSchedule.values[0];else 6===this.initialSchedule.facilioFrequency&&(this.schedule.executeOnMonths=this.initialSchedule.values.map((function(month){return _this.months[month-1]})),this.schedule.executeOnMonth=this.schedule.executeOnMonths[0],this.schedule.yearlyDayValue=this.initialSchedule.yearlyDayValue>0?this.initialSchedule.yearlyDayValue:"");else this.$emit("input",this.constructScheduleObj())}},watch:{startTime:function(){this.loadScheduleInfo(),this.$emit("input",this.constructScheduleObj())},initialSchedule:function(){this.setInitialValue()},times:function(){this.$emit("input",this.constructScheduleObj())},"schedule.facilioFrequency":function(val){1===val?this.schedule.executeOnDays=this.days:2===val&&(this.schedule.executeOnDays=[this.schedule.executeOnDay?this.schedule.executeOnDay:this.localStartTime.format("ddd")])}}},components_FSchedulevue_type_script_lang_js=FSchedulevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSchedulevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSchedule=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/21864:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return OutsideClick}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/OutsideClick.vue?vue&type=template&id=6761c108
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.onOutsideClick,expression:"onOutsideClick"}]},[_vm._t("default")],2):_vm._e()},staticRenderFns=[],OutsideClickvue_type_script_lang_js={props:["visibility"],methods:{onOutsideClick:function(){this.$emit("onOutsideClick"),this.$emit("update:visibility",!1)}}},components_OutsideClickvue_type_script_lang_js=OutsideClickvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_OutsideClickvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,OutsideClick=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/855048:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FLookupField}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FLookupField.vue?vue&type=template&id=473d4b8e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isFieldLoading?_c("FieldLoader",{attrs:{isLoading:_vm.isFieldLoading}}):_c("div",{staticClass:"f-lookup-chooser f-lookup-chooser-container"},[_c("el-select",{ref:"selectBox",class:["fc-input-full-border-select2 width100",(!_vm.canHideLookupIcon||_vm.canShowQuickCreateIcon)&&"resource-search",_vm.isMultiple&&"fc-tag",_vm.hideDropDown&&!_vm.disabled&&"skip-disable"],attrs:{"collapse-tags":"",remote:_vm.isRemote,filterable:"",clearable:_vm.canHideLookupIcon,multiple:_vm.isMultiple,popperAppendToBody:_vm.popperAppendToBody,"remote-method":function(searchText){return _vm.remoteMethod(searchText)},loading:_vm.field.isDataLoading,"loading-text":_vm.$t("common._common.searching"),disabled:_vm.disabled||_vm.hideDropDown,placeholder:_vm.field.placeHolderText||"Select"},on:{change:_vm.recordSelected},model:{value:_vm.modelObj,callback:function($$v){_vm.modelObj=$$v},expression:"modelObj"}},[_c("div",{staticClass:"flRight d-flex",class:!_vm.disabled&&"pointer",attrs:{slot:"prefix"},slot:"prefix"},[_vm.canShowSystemClear?_c("div",{staticClass:"flookup-remove-icon-alignment flookup-remove-icon",on:{click:_vm.clearData}},[_c("i",{staticClass:"el-icon-circle-close pointer fc-lookup-icon f13"})]):_vm._e(),_vm.canHideLookupIcon?_vm._e():_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openLookupFieldWizard(_vm.field)}}},[_c("inline-svg",{attrs:{src:"lookup",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1),_vm.canShowQuickCreateIcon?_c("div",{staticClass:"icon-class-alignment",on:{click:function($event){return $event.stopPropagation(),_vm.openQuickCreate()}}},[_c("el-tooltip",{attrs:{effect:"dark",content:"Add\n          "+_vm.moduleDisplayName,placement:"top"}},[_c("inline-svg",{attrs:{src:"add-pink",iconClass:"icon icon-sm-md fc-lookup-icon"}})],1)],1):_vm._e()]),_vm._l(_vm.field.options,(function(option,index){return _c("el-option",{key:option.value+" "+index,staticClass:"fc-input-full-border-select2 width100",attrs:{label:option.label,value:option.value}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.label))]),_vm.$validation.isEmpty(option.secondaryLabel)?_vm._e():_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.secondaryLabel))]),_vm.getIsSiteDecommissioned(option)?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"select-float-right-text13 pL10",attrs:{title:_vm.$t("setup.decommission.decommissioned")}},[_c("fc-icon",{staticClass:"fR pT10",attrs:{group:"alert",name:"decommissioning",size:"16"}})],1):_vm._e()])}))],2),_vm.showQuickCreateData?_c("QuickCreateData",{attrs:{canShowDialog:_vm.showQuickCreateData,quickCreateField:_vm.field,setAddedRecord:_vm.setAddedRecord},on:{"update:canShowDialog":function($event){_vm.showQuickCreateData=$event},"update:can-show-dialog":function($event){_vm.showQuickCreateData=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(879288),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(425728),__webpack_require__(634338),__webpack_require__(990260)),constant=__webpack_require__(354754),picklist=__webpack_require__(961358),field_utils=__webpack_require__(455344),FieldLoader=__webpack_require__(62979),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),LOOKUP_FIELD_PLACEHOLDER_MAP={people:{value:"${LOGGED_PEOPLE}",label:"Current User"},users:{value:"${LOGGED_USER}",label:"Current User"}},FLookupFieldvue_type_script_lang_js={name:"f-lookup-field",props:{model:{},field:{type:Object},disabled:{type:Boolean},siteId:{type:[Number,String]},categoryId:{type:Number},hideLookupIcon:{type:Boolean,default:!1},popperAppendToBody:{required:!1,type:Boolean,default:!0},fetchOptionsOnLoad:{type:Boolean,default:!0},fetchOptionsMethod:{type:Function},preHookFilterConstruction:{type:Function,default:function(field){return field.filters}},hideDropDown:{type:Boolean,default:!1},skipLoading:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},userfilmoduleEnum:{type:String},parentModuleId:{type:Number},selectedOptions:{type:Array}},components:{FieldLoader:FieldLoader/* default */.Z,QuickCreateData:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(41323),__webpack_require__.e(99751),__webpack_require__.e(11305),__webpack_require__.e(80390),__webpack_require__.e(89142),__webpack_require__.e(97770),__webpack_require__.e(76422),__webpack_require__.e(99813)]).then(__webpack_require__.bind(__webpack_require__,676433))}},data:function(){return{localSearch:!1,isLoadedOnce:!1,currentModelValue:!1,showQuickCreateData:!1}},computed:{customOptions:function(){var _ref=this||{},field=_ref.field,_ref2=field||{},lookupModule=_ref2.lookupModule;if((0,validation/* isEmpty */.xb)(lookupModule))return[];var _ref3=lookupModule||{},name=_ref3.name;return(0,validation/* isEmpty */.xb)(LOOKUP_FIELD_PLACEHOLDER_MAP[name])?[]:[LOOKUP_FIELD_PLACEHOLDER_MAP[name]]},modelObj:{get:function(){return this.model},set:function(value){this.currentModelValue=value,this.$emit("update:model",value)}},moduleDisplayName:function(){var field=this.field,_ref4=field.field||{},lookupModule=_ref4.lookupModule,_ref5=lookupModule||{},displayName=_ref5.displayName;return displayName},isFieldLoading:function(){var field=this.field,defaultIds=this.defaultIds,skipLoading=this.skipLoading,isLoadedOnce=this.isLoadedOnce;return!skipLoading&&!isLoadedOnce&&!(0,validation/* isEmpty */.xb)(defaultIds)&&field.isDataLoading},isPickListTypeModule:function(){var field=this.field,fieldObj=field.field,_ref6=fieldObj||field,lookupModule=_ref6.lookupModule,_ref7=lookupModule||{},type=_ref7.type;
// type 1 is for base entity modules
return!!type&&1!==type},isRemote:function(){var localSearch=this.localSearch;return!localSearch},canHideLookupIcon:function(){var hideLookupIcon=this.hideLookupIcon,isPickListTypeModule=this.isPickListTypeModule,hideDropDown=this.hideDropDown,field=this.field,userfilmoduleEnum=this.userfilmoduleEnum,_ref8=field||{},config=_ref8.config,canHide=!1;if(!(0,validation/* isEmpty */.xb)(config)){var canShowLookupWizard=this.$getProperty(config,"canShowLookupWizard",null);(0,validation/* isNull */.Ft)(canShowLookupWizard)||(canHide=!canShowLookupWizard)}return!hideDropDown&&("PICK_LIST"===userfilmoduleEnum||(canHide||hideLookupIcon||isPickListTypeModule))},canShowQuickCreateIcon:function(){var disabled=this.disabled,field=this.field,_ref9=field||{},config=_ref9.config,canShow=!1;return(0,validation/* isEmpty */.xb)(config)||(canShow=this.$getProperty(config,"canShowQuickCreate")),disabled&&(canShow=!1),canShow},isSiteEnabled:function(){var siteId=Number(this.$cookie.get("fc.currentSite")),currentSiteId=siteId>0?siteId:-1;return!(0,validation/* isEmpty */.xb)(currentSiteId)},isMultiple:function(){var field=this.field;return!!field.multiple},resourceModuleName:function(){var field=this.field,config=field.config,lookupModuleName=field.lookupModuleName,_ref10=config||{},isFiltersEnabled=_ref10.isFiltersEnabled,filterValue=_ref10.filterValue;if(isFiltersEnabled&&constant/* default */.Z.LOOKUP_FILTER_ENABLED_FIELDS.includes(lookupModuleName)){var moduleName=constant/* default */.Z.LOOKUP_FILTERS_MAP[filterValue];return moduleName}return null},isResourceField:function(){var field=this.field,name=field.name,isResourceField=(0,field_utils/* isChooserTypeField */.Rq)(field)||"resource"===name;return isResourceField},
// To prefill the existing values, we have to send default ids in picklist api
defaultIds:function(){var modelObj=this.modelObj,selectedOptions=this.selectedOptions,isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(modelObj)||!1,defaultIds=[],selectedOptionsArr=(selectedOptions||[]).map((function(option){return parseInt(option)}));return(0,validation/* isEmpty */.xb)(selectedOptions)?(0,validation/* isEmpty */.xb)(modelObj)||isPlaceHoldersEnabled||(defaultIds=(0,validation/* isArray */.kJ)(modelObj)?(0,toConsumableArray/* default */.Z)(modelObj):[modelObj]):defaultIds=(0,toConsumableArray/* default */.Z)(selectedOptionsArr),defaultIds=defaultIds.filter((function(val){return!constant/* default */.Z.FIELD_PLACEHOLDERS.includes(val)})),defaultIds},operatorLookupModule:function(){var field=this.field,_ref11=field||{},operatorLookupModule=_ref11.operatorLookupModule;return operatorLookupModule||{}},skipSiteFilter:function(){var field=this.field,_ref12=field||{},config=_ref12.config,_ref13=config||{},_ref13$skipSiteFilter=_ref13.skipSiteFilter,skipSiteFilter=void 0!==_ref13$skipSiteFilter&&_ref13$skipSiteFilter;return skipSiteFilter},canShowSystemClear:function(){var canHideLookupIcon=this.canHideLookupIcon,isClearable=this.isClearable,modelObj=this.modelObj,disabled=this.disabled;return!canHideLookupIcon&&!disabled&&(isClearable&&!(0,validation/* isEmpty */.xb)(modelObj))}},watch:{model:function(newVal){var _this=this,currentModelValue=this.currentModelValue,isRemote=this.isRemote;isEqual_default()(newVal,currentModelValue)||(isRemote&&this.getOptions({initialFetch:!0}).then((function(options){_this.$set(_this.field,"options",options)})),this.$set(this,"modelObj",newVal))},siteId:{handler:function(newVal,oldVal){var _this2=this,isSiteEnabled=this.isSiteEnabled,skipSiteFilter=this.skipSiteFilter;skipSiteFilter||isSiteEnabled||newVal===oldVal||this.getOptions({initialFetch:!0}).then((function(options){_this2.$set(_this2.field,"options",options)}))}},parentModuleId:{handler:function(newVal,oldVal){var _this3=this;newVal!==oldVal&&this.getOptions({initialFetch:!0}).then((function(options){_this3.$set(_this3.field,"options",options)}))}},operatorLookupModule:{handler:function(newVal,oldVal){var _this4=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this4.$set(_this4.field,"options",options)}))}},"field.clientCriteria":{handler:function(newVal,oldVal){var _this5=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this5.$set(_this5.field,"options",options)}))}},categoryId:{handler:function(newVal,oldVal){var _this6=this;isEqual_default()(newVal,oldVal)||this.getOptions({initialFetch:!0}).then((function(options){_this6.$set(_this6.field,"options",options)}))}},"field.options":{handler:function(value){var modelObj=this.modelObj;if(!(0,validation/* isEmpty */.xb)(value))if((0,validation/* isEmpty */.xb)(modelObj))this.field.selectedItems=[];else if((0,validation/* isArray */.kJ)(modelObj)){var selectedItems=value.filter((function(option){return modelObj.includes(option.value)}));this.field.selectedItems=selectedItems}else{var selectedItem=value.find((function(option){return option.value===modelObj}));this.field.selectedItems=[selectedItem]}},immediate:!0},isLoadedOnce:{handler:function(value){value&&this.$emit("optionsLoadedOnce")}}},created:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var fetchOptionsOnLoad,field,modelObj,customOptions,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:
// Have to skip fetching options initially, when module is 'resource' and filters is not enabled
if(fetchOptionsOnLoad=_this7.fetchOptionsOnLoad,field=_this7.field,modelObj=_this7.modelObj,customOptions=_this7.customOptions,_this7.currentModelValue=modelObj,_this7.getIsSiteDecommissioned=picklist/* getIsSiteDecommissioned */.Yx,!fetchOptionsOnLoad){_context2.next=12;break}return _context2.next=6,_this7.getOptions({initialFetch:!0});case 6:if(_context2.t0=_context2.sent,_context2.t0){_context2.next=9;break}_context2.t0=[];case 9:options=_context2.t0,_this7.$set(_this7.field,"options",[].concat((0,toConsumableArray/* default */.Z)(customOptions),(0,toConsumableArray/* default */.Z)(options))),_this7.$set(_this7,"isLoadedOnce",!0);case 12:_this7.remoteMethod=_this7.$helpers.debounce(function(){var _ref14=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(searchText){var isDataLoading,_options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(isDataLoading=field.isDataLoading,isDataLoading){_context.next=6;break}return _context.next=4,_this7.getOptions({searchText:searchText});case 4:_options=_context.sent,_this7.$set(_this7.field,"options",_options);case 6:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref14.apply(this,arguments)}}(),1e3);case 13:case"end":return _context2.stop()}}),_callee2)})))()},methods:{focus:function(){(0,validation/* isEmpty */.xb)(this.$refs["selectBox"])||this.$refs["selectBox"].focus()},getOptions:function(params){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var searchText,initialFetch,fetchOptionsMethod,field,siteId,categoryId,isRemote,defaultIds,resourceModuleName,isResourceField,skipSiteFilter,selectedOptions,_field$filters,fieldFilters,options,filters,props,perPageCount,_yield$_this8$fetchOp,_yield$_this8$fetchOp2,optionsArr,error,_ref15,message,_yield$getFieldOption,_yield$getFieldOption2,_optionsArr,_error,meta,_ref16,_message,_meta$localSearch,localSearch;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:
/*
                Have to return empty options if field is of resourcetype, if filters havent be enabled
                and if no values selected already
              */
if(searchText=params.searchText,initialFetch=params.initialFetch,fetchOptionsMethod=_this8.fetchOptionsMethod,field=_this8.field,siteId=_this8.siteId,categoryId=_this8.categoryId,isRemote=_this8.isRemote,defaultIds=_this8.defaultIds,resourceModuleName=_this8.resourceModuleName,isResourceField=_this8.isResourceField,skipSiteFilter=_this8.skipSiteFilter,selectedOptions=_this8.selectedOptions,_field$filters=field.filters,fieldFilters=void 0===_field$filters?{}:_field$filters,options=[],(0,validation/* isEmpty */.xb)(resourceModuleName)||(field.resourceLookupModuleName=resourceModuleName),filters=_this8.preHookFilterConstruction(field),(0,validation/* isEmpty */.xb)(filters)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},fieldFilters),filters)),(0,validation/* isEmpty */.xb)(categoryId)||(field.filters=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},field.filters),{},{category:{operator:"is",value:["".concat(categoryId)]}})),props={field:field,searchText:searchText},skipSiteFilter||(props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{siteId:siteId})),!(isResourceField&&(0,validation/* isEmpty */.xb)(resourceModuleName)&&(0,validation/* isEmpty */.xb)(defaultIds))){_context3.next=12;break}return _context3.abrupt("return",options);case 12:if(initialFetch&&isRemote&&(perPageCount=defaultIds.length>50?defaultIds.length:50,props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{page:1,perPage:perPageCount,defaultIds:defaultIds}),((0,validation/* isEmpty */.xb)(resourceModuleName)&&isResourceField||!(0,validation/* isEmpty */.xb)(selectedOptions))&&(
// Have to fetch only selected values, which is same as the number of defaultids
props=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},props),{},{perPage:defaultIds.length}))),_this8.$set(field,"isDataLoading",!0),(0,validation/* isEmpty */.xb)(fetchOptionsMethod)){_context3.next=25;break}return _context3.next=17,_this8.fetchOptionsMethod(props);case 17:_yield$_this8$fetchOp=_context3.sent,_yield$_this8$fetchOp2=_yield$_this8$fetchOp.options,optionsArr=void 0===_yield$_this8$fetchOp2?[]:_yield$_this8$fetchOp2,error=_yield$_this8$fetchOp.error,error&&(_ref15=error||{},message=_ref15.message,_this8.$message.error(message||"Error Occured")),options=optionsArr,_context3.next=35;break;case 25:return _context3.next=27,(0,picklist/* getFieldOptions */._K)(props);case 27:_yield$getFieldOption=_context3.sent,_yield$getFieldOption2=_yield$getFieldOption.options,_optionsArr=void 0===_yield$getFieldOption2?[]:_yield$getFieldOption2,_error=_yield$getFieldOption.error,meta=_yield$getFieldOption.meta,_error&&(_ref16=_error||{},_message=_ref16.message,_this8.$message.error(_message||"Error Occured")),meta&&(0,validation/* isEmpty */.xb)(searchText)&&(_meta$localSearch=meta.localSearch,localSearch=void 0!==_meta$localSearch&&_meta$localSearch,_this8.$set(_this8,"localSearch",localSearch)),options=_optionsArr;case 35:return _this8.$set(field,"isDataLoading",!1),_context3.abrupt("return",options);case 37:case"end":return _context3.stop()}}),_callee3)})))()},clearData:function(){this.$emit("update:model",""),this.recordSelected("")},recordSelected:function(value){var field=this.field,_this$field$options=this.field.options,options=void 0===_this$field$options?[]:_this$field$options,isMultiple=this.isMultiple,selectedValues=null;isMultiple?(selectedValues=options.filter((function(e){return(value||[]).includes(e.value)})),field.selectedItems=selectedValues):(selectedValues=options.find((function(e){return e.value==value}))||{},field.selectedItems=[],(0,validation/* isEmpty */.xb)(selectedValues)||(field.selectedItems=[selectedValues])),this.$emit("recordSelected",selectedValues,field)},openLookupFieldWizard:function(field){var disabled=this.disabled;disabled||this.$emit("showLookupWizard",field,!0)},openQuickCreate:function(){var disabled=this.disabled;disabled||(this.showQuickCreateData=!0)},setAddedRecord:function(props){var record=props.record,_ref17=record||{},id=_ref17.id,name=record.displayName||record.name||record.subject,field=this.field;field.selectedItems=[{value:id,label:name}],this.$emit("setLookupFieldValue",{field:(0,objectSpread2/* default */.Z)({},field)})}}},forms_FLookupFieldvue_type_script_lang_js=FLookupFieldvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FLookupFieldvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FLookupField=component.exports},
/***/62979:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FieldLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FieldLoader.vue?vue&type=template&id=7252e23e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"field-loading loading-shimmer"}):_vm._e()},staticRenderFns=[],FieldLoadervue_type_script_lang_js={props:{isLoading:{type:Boolean,required:!0}}},forms_FieldLoadervue_type_script_lang_js=FieldLoadervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FieldLoadervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FieldLoader=component.exports},
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports},
/***/930871:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FilterCondition}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/FilterCondition.vue?vue&type=template&id=07f5ab06&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"filter-condition-container"},[_c("el-popover",{attrs:{value:!0,visibleArrow:!1,popperClass:_vm.popoverClass}},[_c("outside-click",{staticClass:"filter-condition-block",attrs:{visibility:!0},on:{onOutsideClick:function($event){return _vm.close()}}},[_c("div",{staticClass:"filter-condition-body"},[_vm.isTag?_c("div",{staticClass:"fc-dark-blue-txt13 f13 pointer mL10 pT10 pB10 fwBold",on:{click:function($event){return $event.stopPropagation(),_vm.$emit("back")}}},[_c("i",{staticClass:"el-icon-back fw6 mR10 fc-dark-blue-txt13"}),_vm._v(" Back to Filter List ")]):_vm._e(),_vm.currentFilterProxy?_c("div",{staticClass:"filter-condition-radion-btn pT10"},[_vm.dateTimeFields.includes(_vm.fieldName)||["DATE_TIME","DATE"].includes(_vm.currentFilterProxy.operator)?_c("div",[_vm._l(_vm.currentFilterProxy.options,(function(label,value){return _c("el-radio",{key:value,staticClass:"fc-radio-btn pB10",attrs:{label:value},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},[_vm._v(" "+_vm._s(label)+" ")])})),"date"===_vm.currentFilterProxy.type?_c("div",[_vm.currentFilterProxy.hideDateRange?_vm._e():_c("el-radio",{staticClass:"fc-radio-btn pB10",attrs:{label:"20",value:"20"},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},[_vm._v(" Custom ")]),"20"===_vm.currentFilterValueProxy?_c("f-date-picker",{staticClass:"position-relative fc-subheader-right-search",attrs:{type:"datetimerange","value-format":"timestamp",format:"dd-MM-yyyy HH:mm"},on:{change:_vm.applyFilters},model:{value:_vm.currentFilterProxy.dateRange,callback:function($$v){_vm.$set(_vm.currentFilterProxy,"dateRange",$$v)},expression:"currentFilterProxy.dateRange"}}):_vm._e()],1):_vm._e()],2):_c("div",{staticClass:"filter-radio-display"},[_vm._l(_vm.conditionList,(function(condition){return[_vm.allowedConditions(condition)?_c("el-radio",{key:condition.operatorId,staticClass:"fc-radio-btn pB10",attrs:{label:condition.operatorId},model:{value:_vm.operatorId,callback:function($$v){_vm.operatorId=$$v},expression:"operatorId"}},[_vm._v(" "+_vm._s(condition.operator)+" "),"select"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-select",{staticClass:"search-select-comp2 fc-tag mT10 search-filter-border-left fc-search-select-width select-border-left",attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"Select"},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},_vm._l(_vm.currentFilterProxy.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1),["resourceType","lookup"].includes(_vm.currentFilterProxy.displayType)&&![1,2].includes(condition.operatorId)&&condition.operatorId===_vm.operatorId?_c("div",[_vm.$fieldUtils.isLookupDropDownField(_vm.metaInfo.fields.find((function(v){return v.name===_vm.fieldName})))?_c("FLookupFieldWrapper",{staticClass:"search-input-comp search-select-comp2 fc-tag mT10 search-filter-border-left fc-search-select-width select-border-left",attrs:{hideDropDown:_vm.hideDropDownForLookup,field:_vm.getFieldObj(_vm.currentFilterProxy,_vm.fieldName),label:_vm.currentFilterProxy.selectedLabel},on:{recordSelected:_vm.setLookUpFilter,showingLookupWizard:function($event){_vm.showingLookupWizard=!0}},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}}):_vm._e()],1):_vm._e(),"string"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"text",autofocus:!0},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})],1),"number"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"number",autofocus:!0},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})],1),"decimal"!==_vm.currentFilterProxy.displayType||[1,2].includes(condition.operatorId)||condition.operatorId!==_vm.operatorId?_vm._e():_c("div",[_c("el-input",{staticClass:"width270px fc-input-full-border2 filter-condition-input",attrs:{type:"number",autofocus:!0},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})],1),["asset","space"].includes(_vm.currentFilterProxy.displayType)&&![1,2].includes(condition.operatorId)&&condition.operatorId===_vm.operatorId?_c("div",[_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border fc-tag mT1 fc-search-select-width mT10 search-filter-border-left",attrs:{filterable:"",multiple:"","collapse-tags":"",value:_vm.$validation.isEmpty(_vm.currentFilterValueProxy)?null:[1],disabled:""}},[_c("el-option",{attrs:{label:_vm.spaceAssetFilter,value:1}})],1),_c("i",{staticClass:"el-input__icon el-icon-search filter-spacce-condition-search",attrs:{slot:"suffix"},on:{click:function($event){return _vm.spaceAssetProps(_vm.currentFilterProxy)}},slot:"suffix"})],1),_vm.chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{showAsset:"asset"===_vm.currentFilterProxy.displayType,initialValues:_vm.initialValues,visibility:_vm.chooserVisibility,hideBanner:!0},on:{associate:function($event){return _vm.associateResource($event,_vm.currentFilterProxy)},"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e()],1):_vm._e()]):_vm._e()]}))],2)]):_vm._e()]),_c("div",{staticClass:"search-select-filter-btn"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold",on:{click:function($event){return _vm.applyFilters()}}},[_vm._v(" DONE ")])],1)])],1)],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),OutsideClick=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(450886),__webpack_require__(21864)),validation=__webpack_require__(990260),SpaceAssetMultiChooser=__webpack_require__(673362),FDatePicker=__webpack_require__(358551),SearchTagMixin=__webpack_require__(200689),FLookupFieldWrapper=__webpack_require__(201117),FilterConditionvue_type_script_lang_js={props:["fieldName","isTag","popClass","hideDropDownForLookup"],components:{SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,FDatePicker:FDatePicker/* default */.Z,OutsideClick:OutsideClick/* default */.Z,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z},mixins:[SearchTagMixin/* default */.Z],data:function(){return{initialValues:null,chooserVisibility:!1,excludeOperators:[74,75,76,77,78,79,35,87,52,53],operatorId:null,operators:{subject:"STRING",title:"STRING",primaryContactName:"STRING",description:"STRING",name:"STRING",primaryContactEmail:"STRING",primaryContactPhone:"STRING",assetCategoryId:"LOOKUP",kpiCategory:"LOOKUP",assetDepartment:"LOOKUP",siteId:"LOOKUP",assetType:"LOOKUP",category:"LOOKUP",dueDate:"DATE",actualWorkEnd:"DATE",space:"LOOKUP",visitedSpace:"LOOKUP",asset:"LOOKUP",resource:"LOOKUP",sourceType:"NUMBER",ticketType:"LOOKUP",typeId:"LOOKUP",status:"LOOKUP",moduleState:"LOOKUP",assignedTo:"LOOKUP",registeredBy:"LOOKUP",executedBy:"LOOKUP",frequency:"LOOKUP",createdTime:"LOOKUP",tasks:"LOOKUP",priority:"LOOKUP",alarmType:"NUMBER",acknowledgedBy:"LOOKUP",severity:"LOOKUP",previousSeverity:"LOOKUP",readingAlarmCategory:"LOOKUP",readingrule:"LOOKUP",tenant:"LOOKUP"},popoverClass:"right-0 p0",showingLookupWizard:!1}},computed:{currentFilterProxy:{get:function(){var fieldName=this.fieldName,filterObjectsData=this.filterObjectsData;return filterObjectsData[fieldName]||{}},set:function(value){var filterObjectsData=this.filterObjectsData,fieldName=this.fieldName;this.$set(filterObjectsData,fieldName,value)}},currentFilterValueProxy:{get:function(){var currentFilterProxy=this.currentFilterProxy;return currentFilterProxy.value||[]},set:function(value){this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{value:value})}},spaceAssetFilter:function(){var currentFilterProxy=this.currentFilterProxy,filter="";return(0,validation/* isEmpty */.xb)(currentFilterProxy.value)||(filter=currentFilterProxy.value.length,"asset"===currentFilterProxy.displayType?filter+="Asset":filter+="Space",currentFilterProxy.value.length>1&&(filter+="s")),filter},conditionList:function(){var type=this.$getProperty(this.operators,this.fieldName,null),_ref=this.metaInfo||{},_ref$operators=_ref.operators,operators=void 0===_ref$operators?{}:_ref$operators;return(0,validation/* isEmpty */.xb)(type)?(type=this.currentFilterProxy,operators[type.operator]):operators[type]}},watch:{fieldName:{handler:function(){var currentFilterProxy=this.currentFilterProxy;this.operatorId=this.$getProperty(currentFilterProxy,"operatorId",null)},immediate:!0},popClass:{handler:function(newValue){newValue&&(this.popoverClass=newValue,this.popoverClass+=" p0")},immediate:!0}},methods:{allowedConditions:function(label){return!("BUILDING_IS"===label._name&&"space"!==this.fieldName||"LOOKUP"===label._name||this.excludeOperators.includes(label.operatorId))},associateResource:function(resource,field){this.chooserVisibility=!1,field.value=resource.resourceList?resource.resourceList.map((function(res){return res.id})):[],this.applyFilters()},applyFilters:function(){this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{operatorId:this.operatorId}),this.applyFilter(),this.close()},close:function(){this.chooserVisibility||this.showingLookupWizard||this.$emit("close")}}},components_FilterConditionvue_type_script_lang_js=FilterConditionvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FilterConditionvue_type_script_lang_js,render,staticRenderFns,!1,null,"07f5ab06",null)
/* harmony default export */,FilterCondition=component.exports},
/***/718452:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Search}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/components/Search.vue?vue&type=template&id=1f319dc4&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-black-small-txt-12"},[_vm.showSearch?_vm._e():_c("div",{on:{click:function($event){return $event.stopPropagation(),_vm.search()}}},[_c("i",{staticClass:"el-icon-search fc-black-2 f16 pointer fw-bold",on:{click:function($event){return $event.stopPropagation(),_vm.search()}}})]),_vm.showSearch?_c("outside-click",{attrs:{visibility:_vm.showSearch},on:{onOutsideClick:function($event){return _vm.close()}}},[_c("div",{staticClass:"inline-flex hideSearch fc-subheader-right-search"},[_c("el-select",{staticClass:"search-select-comp",attrs:{filterable:"",placeholder:"Select"},on:{change:function($event){return _vm.onFilterChange()}},model:{value:_vm.fieldName,callback:function($$v){_vm.fieldName=$$v},expression:"fieldName"}},_vm._l(_vm.filterObjectsData,(function(label,value){return _c("el-option",{key:value,attrs:{label:label.label,value:value}})})),1),_vm.$validation.isEmpty(_vm.$getProperty(_vm.filterObjectsData,_vm.fieldName))?_vm._e():_c("div",["select"===_vm.currentFilterProxy.displayType?_c("div",["date"===_vm.currentFilterProxy.type?["20"!==_vm.currentFilterValueProxy?_c("el-select",{staticClass:"search-select-comp2 search-border-left fc-tag fc-search-bar-select",attrs:{filterable:"",placeholder:"Select","popper-class":"f-search-popover"},on:{change:function($event){return _vm.applyDateFilter()}},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},[_vm._l(_vm.currentFilterProxy.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),_vm.currentFilterProxy.hideDateRange?_vm._e():_c("el-option",{attrs:{label:"Custom",value:"20"}})],2):_vm._e(),_c("f-date-picker",{directives:[{name:"show",rawName:"v-show",value:"20"===_vm.currentFilterValueProxy,expression:"currentFilterValueProxy === '20'"}],ref:"fdate",staticClass:"mT10 new-search-date-filter search-date-picker",attrs:{type:"datetimerange","value-format":"timestamp",format:"dd-MM-yyyy HH:mm"},on:{change:function($event){return _vm.applyFilter()}},model:{value:_vm.currentFilterProxy.dateRange,callback:function($$v){_vm.$set(_vm.currentFilterProxy,"dateRange",$$v)},expression:"currentFilterProxy.dateRange"}})]:_c("el-select",{ref:"selectDropdown",staticClass:"search-select-comp2 search-border-left fc-tag",attrs:{multiple:"","collapse-tags":"",filterable:"",disabled:_vm.canDisableField,placeholder:_vm.conditionsPlaceHolder,"popper-class":"f-search-popover"},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}},[_vm._l(_vm.currentFilterProxy.options,(function(label,value){return _c("el-option",{key:"option-"+value,attrs:{label:label,value:value}})})),_c("div",{staticClass:"search-select-filter-btn pT5"},[_c("el-button",{staticClass:"btn-green-full filter-footer-btn fw-bold",on:{click:function($event){return _vm.applyFilter()}}},[_vm._v("DONE")])],1)],2)],2):_vm._e(),["resourceType","lookup"].includes(_vm.currentFilterProxy.displayType)&&!_vm.currentFilterProxy.specialType?[_c("FLookupFieldWrapper",{key:"lookup-"+_vm.fieldName,staticClass:"search-input-comp",attrs:{field:_vm.getFieldObj(_vm.currentFilterProxy,_vm.fieldName),label:_vm.currentFilterProxy.selectedLabel,hideWizard:_vm.hideLookupWizard,hideDropDown:_vm.hideDropDown},on:{recordSelected:_vm.setLookUpFilter,showingLookupWizard:function(value){return _vm.showingLookupWizard=value}},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})]:_vm._e(),"string"===_vm.currentFilterProxy.displayType?[_c("el-input",{ref:"f-search",staticClass:"input-with-select search-input-comp search-icon-set",attrs:{disabled:_vm.canDisableField,placeholder:_vm.conditionsPlaceHolder,clearable:"",autofocus:!0,type:"search","prefix-icon":_vm.canDisableField?"":"el-icon-search"},nativeOn:{click:function($event){return $event.stopPropagation(),$event.preventDefault(),function(){}.apply(null,arguments)},keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.applyFilter()}},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})]:_vm._e(),["number","decimal"].includes(_vm.currentFilterProxy.displayType)?_c("div",[_c("el-input",{ref:"f-search",staticClass:"input-with-select search-input-comp search-icon-set",attrs:{type:"number",disabled:_vm.canDisableField,placeholder:_vm.conditionsPlaceHolder,clearable:"",autofocus:!0,"prefix-icon":_vm.canDisableField?"":"el-icon-search"},nativeOn:{click:function($event){return $event.stopPropagation(),$event.preventDefault(),function(){}.apply(null,arguments)},keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.applyFilter()}},model:{value:_vm.currentFilterValueProxy,callback:function($$v){_vm.currentFilterValueProxy=$$v},expression:"currentFilterValueProxy"}})],1):_vm._e(),["asset","space"].includes(_vm.currentFilterProxy.displayType)?_c("div",{staticClass:"resource-list"},[_c("el-select",{staticClass:"multi resource-list el-input-textbox-full-border search-select-comp2 down-arrow-remove search-border-left fc-tag width100",attrs:{filterable:"",multiple:"","collapse-tags":"",value:_vm.$validation.isEmpty(_vm.currentFilterValueProxy)?[]:[1],disabled:""}},[_c("el-option",{attrs:{label:_vm.spaceAssetFilter,value:1}})],1),_vm.canDisableField?_vm._e():_c("i",{staticClass:"el-input__icon el-icon-search filter-space-search-icon3",on:{click:function($event){return _vm.spaceAssetProps(_vm.currentFilterProxy)}}})],1):_vm._e()],2),_vm.hideOperatorDialog?_vm._e():_c("el-button",{staticClass:"pointer user-select-none filter-btn",attrs:{disabled:"date"===_vm.currentFilterProxy.type&&"20"!==_vm.currentFilterValueProxy},on:{click:function($event){return $event.stopPropagation(),_vm.openFilterConditionPopup()}}},[_c("img",{staticStyle:{width:"18px"},attrs:{src:__webpack_require__(7634)}})]),_vm.showFilterCondition?_c("filter-condition",{attrs:{fieldName:_vm.fieldName,hideDropDownForLookup:_vm.hideDropDown},on:{close:function($event){_vm.showFilterCondition=!1}}}):_vm._e()],1)]):_vm._e(),_vm.chooserVisibility?_c("space-asset-multi-chooser",{staticClass:"fc-input-full-border-select2",attrs:{showAsset:"asset"===_vm.currentFilterProxy.displayType,initialValues:_vm.initialValues,visibility:_vm.chooserVisibility,hideBanner:!0},on:{associate:function($event){return _vm.associateResource($event,_vm.currentFilterProxy)},"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e()],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),OutsideClick=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(450886),__webpack_require__(21864)),FDatePicker=__webpack_require__(358551),validation=__webpack_require__(990260),SpaceAssetMultiChooser=__webpack_require__(673362),FilterCondition=__webpack_require__(930871),SearchTagMixin=__webpack_require__(200689),FLookupFieldWrapper=__webpack_require__(201117),Searchvue_type_script_lang_js={name:"Search",props:["config","moduleName","defaultFilter","includeAllMetaFields","hideOperatorDialog"],components:{OutsideClick:OutsideClick/* default */.Z,FDatePicker:FDatePicker/* default */.Z,SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,FilterCondition:FilterCondition/* default */.Z,FLookupFieldWrapper:FLookupFieldWrapper/* default */.Z},mixins:[SearchTagMixin/* default */.Z],data:function(){return{fieldName:null,showFilterCondition:!1,chooserVisibility:!1,initialValues:null,showingLookupWizard:!1}},computed:{currentFilterProxy:{get:function(){var fieldName=this.fieldName,filterObjectsData=this.filterObjectsData;return filterObjectsData[fieldName]||{}},set:function(value){var filterObjectsData=this.filterObjectsData,fieldName=this.fieldName;this.$set(filterObjectsData,fieldName,value)}},currentFilterValueProxy:{get:function(){var currentFilterProxy=this.currentFilterProxy;return currentFilterProxy.value||[]},set:function(value){this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{value:value})}},spaceAssetFilter:function(){var currentFilterProxy=this.currentFilterProxy,filter="";return(0,validation/* isEmpty */.xb)(currentFilterProxy.value)||(filter=currentFilterProxy.value.length,"asset"===currentFilterProxy.displayType?filter+="Asset":filter+="Space",currentFilterProxy.value.length>1&&(filter+="s")),filter},conditionsPlaceHolder:function(){var currentFilterProxy=this.currentFilterProxy,_ref=currentFilterProxy||{},operatorId=_ref.operatorId;return 1===operatorId?"is Empty":2===operatorId?"is Not Empty":"Search..."},canDisableField:function(){var currentFilterProxy=this.currentFilterProxy,operatorId=currentFilterProxy.operatorId,OPERATOR_CHECK={isEmpty:1,isNotEmpty:2};return[OPERATOR_CHECK.isEmpty,OPERATOR_CHECK.isNotEmpty].includes(operatorId)},hideLookupWizard:function(){return!1},hideDropDown:function(){var currentFilterProxy=this.currentFilterProxy,fieldName=this.fieldName,_ref2=this.getFieldObj(currentFilterProxy,fieldName)||{},name=_ref2.name;return"resource"===name}},watch:{config:{handler:function(value,oldValue){JSON.stringify(value)!==JSON.stringify(oldValue)&&this.initSearchFields()}},defaultFilter:{handler:function(value){this.fieldName=value},immediate:!0},appliedFilters:function(value,oldValue){JSON.stringify(value)!==JSON.stringify(oldValue)&&(this.setFilterApplied(),this.resetFilterData())}},methods:{onFilterChange:function(){if(this.showFilterCondition){var filterObj=this.currentFilterProxy;this.setOperatorId(filterObj,this.fieldName)}},openFilterConditionPopup:function(){this.showFilterCondition=!0,this.setOperatorId()},applyDateFilter:function(){var filterData=this.currentFilterProxy;filterData&&"20"!==filterData.value?this.applyFilter():this.$refs["fdate"].focus()},associateResource:function(resource,field){this.chooserVisibility=!1,field.value=resource.resourceList?resource.resourceList.map((function(res){return res.id})):[],this.applyFilter()},search:function(){this.$store.dispatch("search/toggleActiveStatus",!0)},close:function(){this.showingLookupWizard||this.showFilterCondition||this.$store.dispatch("search/toggleActiveStatus",!1)}}},components_Searchvue_type_script_lang_js=Searchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Searchvue_type_script_lang_js,render,staticRenderFns,!1,null,"1f319dc4",null)
/* harmony default export */,Search=component.exports},
/***/200689:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SearchTagMixin}});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var render,staticRenderFns,defineProperty=__webpack_require__(482482),slicedToArray=__webpack_require__(554621),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(670560),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(947522),__webpack_require__(336585),__webpack_require__(450886),__webpack_require__(212826),__webpack_require__(420629)),validation=__webpack_require__(990260),clone=__webpack_require__(766678),clone_default=__webpack_require__.n(clone),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),SPACE_FIELDS=["space","visitedSpace","resourceIdSpace"],OPERATOR_CHECK={isEmpty:1,isNotEmpty:2,related:88},SearchTagMixinvue_type_script_lang_js={created:function(){var moduleName=this.moduleName,singleFieldFilterObj=this.singleFieldFilterObj;if((0,validation/* isUndefined */.o8)(singleFieldFilterObj)&&moduleName){var promises=[this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadAssetType"),this.$store.dispatch("loadRoles"),this.$store.dispatch("loadAssetDepartment"),this.$store.dispatch("loadSites"),this.$store.dispatch("loadInventoryCategory"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("loadReadingAlarmCategory"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadTicketStatus",moduleName),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadUsers")];this.searchMetaInfo||promises.push(this.$store.dispatch("view/loadModuleMeta",moduleName)),Promise.all(promises).catch((function(){})).finally(this.initSearchFields)}},data:function(){return{excludeCustomfieldsForSpecificModules:["readingrule","preventivemaintenance"],dateTimeFields:["createdTime","dueDate","responseDueDate","actualWorkEnd","acknowledgedTime","warrantyExpiryDate","clearedTime","modifiedTime"]}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({showSearch:function(state){return state.search.active},users:function(state){return state.users},groups:function(state){return state.groups},viewMetaInfo:function(state){return state.view.metaInfo}})),(0,vuex_esm/* mapGetters */.Se)({getFilterConfig:"search/getFilterConfig"})),{},{metaInfo:function(){return this.viewMetaInfo},appliedFilters:function(){var $route=this.$route,_ref=$route||{},search=_ref.query.search;return(0,validation/* isEmpty */.xb)(search)?null:JSON.parse(this.$route.query.search)},filterObjectsData:{get:function(){var config=this.getFilterConfig;return this.$getProperty(config,"data",null)},set:function(value){var config=this.getFilterConfig||{};this.$store.dispatch("search/updateFilterConfig",(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},config),{},{data:value}))}}}),watch:{moduleName:function(newVal,oldVal){if(newVal&&newVal!==oldVal&&(0,validation/* isUndefined */.o8)(this.singleFieldFilterObj)){var moduleName=this.moduleName,excludeCustomfieldsForSpecificModules=this.excludeCustomfieldsForSpecificModules,canAddCustomFields=moduleName&&!excludeCustomfieldsForSpecificModules.includes(moduleName),payload={moduleName:moduleName,canAddCustomFields:canAddCustomFields,includeAllMetaFields:this.includeAllMetaFields};this.searchMetaInfo||this.$store.dispatch("view/loadModuleMeta",newVal),this.$store.dispatch("loadTicketStatus",newVal),this.$store.dispatch("search/init",payload)}}},methods:{initSearchFields:function(){var _this=this,singleFieldFilterObj=this.singleFieldFilterObj;if((0,validation/* isUndefined */.o8)(singleFieldFilterObj)){if(this.config){var config=cloneDeep_default()(this.config);this.$store.dispatch("search/updateFilterConfig",config)}var excludeCustomfieldsForSpecificModules=this.excludeCustomfieldsForSpecificModules,moduleName=this.moduleName,metaInfo=this.metaInfo,includeAllMetaFields=this.includeAllMetaFields,canAddCustomFields=moduleName&&!excludeCustomfieldsForSpecificModules.includes(moduleName);this.$store.dispatch("search/init",{moduleName:moduleName,canAddCustomFields:canAddCustomFields,includeAllMetaFields:includeAllMetaFields,metaInfo:metaInfo}).finally((function(){return _this.setFilterApplied()}))}},getFieldObj:function(currentFilterProxy,fieldName){var metaInfo=this.metaInfo;if(88!==currentFilterProxy.operatorId){var searchFieldName=fieldName;["resourceIdSpace","resourceIdAsset"].includes(fieldName)&&(searchFieldName="space");var fieldObj=metaInfo.fields.find((function(field){return field.name===searchFieldName}));return"resourceType"===currentFilterProxy.displayType&&this.$set(fieldObj,"multiple",!0),"siteId"===fieldName?(this.$set(fieldObj,"lookupModule",{name:"site",displayName:"Site"}),this.$set(fieldObj,"multiple",!0)):"resourceIdSpace"===fieldName?(this.$set(fieldObj,"lookupModule",{name:"basespace",displayName:"Space"}),this.$set(fieldObj,"multiple",!0)):"resourceIdAsset"===fieldName&&(this.$set(fieldObj,"lookupModule",{name:"asset",displayName:"Asset"}),this.$set(fieldObj,"multiple",!0)),fieldObj}return"siteId"===fieldName?{lookupModule:{name:"site"}}:{lookupModule:{name:fieldName}}},setFilterApplied:function(){var _this2=this,appliedFilters=(0,validation/* isEmpty */.xb)(this.appliedFilters)?{}:this.appliedFilters,filters=Object.keys(appliedFilters||{}),filterObjectsData=clone_default()(this.filterObjectsData||{});Object.entries(filterObjectsData).forEach((function(_ref2){var _ref3=(0,slicedToArray/* default */.Z)(_ref2,2),fieldName=_ref3[0],filterData=_ref3[1],key=filterData.key?filterData.key:fieldName;if(filters.includes(key)){var filterObj=_this2.$getProperty(appliedFilters,key,{});(0,validation/* isArray */.kJ)(filterObj)&&(filterObj=filterObj[0]);var _filterObj=filterObj,operatorId=_filterObj.operatorId,value=_filterObj.value,selectedLabel=_filterObj.selectedLabel,_ref4=_this2.getFieldObj({},"siteId")||{},_ref4$multiple=_ref4.multiple,multiple=void 0!==_ref4$multiple&&_ref4$multiple;if(["string","number"].includes(filterData.displayType))filterData.value=(0,validation/* isEmpty */.xb)(value)?"":value[0];else if("lookup"===filterData.displayType)
//filterData.value = !isEmpty(value) ? value[0] : '' // replacement for this is given in below if-else condition
!(0,validation/* isEmpty */.xb)(value)&&(0,validation/* isArray */.kJ)(value)&&value.length>0?multiple||1!=value.length?filterData.value=value:filterData.value=value[0]:filterData.value="",filterData.selectedLabel=selectedLabel;else if(filterData.customdate){if(!(0,validation/* isEmpty */.xb)(value)){var dateRange=value.map((function(date){return parseInt(date)}));filterData.dateRange=dateRange}filterData.value=operatorId+""}else filterData.value=value;filterData.operatorId=operatorId}})),this.filterObjectsData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.filterObjectsData),filterObjectsData)},spaceAssetProps:function(filterData){this.chooserVisibility=!0;var selectedResources=this.$getProperty(filterData,"value",[]).map((function(id){return{id:parseInt(id)}}));this.initialValues={isIncludeResource:!0,selectedResources:selectedResources}},operatorIdForFields:function(filterData,fieldName){var operatorId;return operatorId=(0,validation/* isEmpty */.xb)(filterData.operatorId)?"resourceIdSpace"===fieldName||"resourceIdAsset"===fieldName?15:SPACE_FIELDS.includes(fieldName)?38:["subject","name","title"].includes(fieldName)||"STRING"===this.$getProperty(filterData,"operator","")?5:["sourceType","alarmType"].includes(fieldName)||["NUMBER","DECIMAL"].includes(this.$getProperty(filterData,"operator",""))?9:"isAcknowledged"===fieldName||"BOOLEAN"===this.$getProperty(filterData,"operator","")?15:"ENUM"===this.$getProperty(filterData,"operator","")?54:36:filterData.operatorId,operatorId},setOperatorId:function(fieldData,fieldName){var returnId=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,validation/* isEmpty */.xb)(fieldName)&&(fieldName=this.fieldName),(0,validation/* isEmpty */.xb)(fieldData)&&(fieldData=this.$getProperty(this.filterObjectsData,fieldName,null));var operatorId=this.operatorIdForFields(fieldData,fieldName);if(returnId)return operatorId;this.$setProperty(fieldData,"operatorId",operatorId)},constructDateFilter:function(filterValue,fieldName){filterValue=filterValue.split("_");var operatorId=1===filterValue.length?parseInt(filterValue[0]):parseInt(filterValue[1]),filter={operatorId:operatorId};if(20===operatorId){var filterData=this.$getProperty(this.filterObjectsData,fieldName,null),dateRange=this.$getProperty(filterData,"dateRange",null);if((0,validation/* isEmpty */.xb)(dateRange))return!1;filter.value=dateRange.map((function(date){return date+""}))}else[39,40,41,50,59,60,61].includes(operatorId)&&(filter.value=[filterValue[0]]);return filter},setCustomDateFilters:function(filters,fieldName){var filter,_this3=this,filterData=this.$getProperty(this.filterObjectsData,fieldName),filterVal=filterData.value,key=filterData.key||fieldName;(0,validation/* isArray */.kJ)(filterVal)?(filters[key]=[],filterVal.forEach((function(fval){filter=_this3.constructDateFilter(fval,fieldName),filter&&filters[key].push(filter)}))):(filter=this.constructDateFilter(filterVal,fieldName),filter&&(filters[key]=filter))},applyFilter:function(filterData){(0,validation/* isEmpty */.xb)(filterData)?filterData=this.filterObjectsData:this.filterObjectsData=filterData;var filters=this.formatDataForFilter(filterData);(0,validation/* isEmpty */.xb)(filters)?this.$store.dispatch("search/resetFilters"):this.$store.dispatch("search/applyFilters",filters),this.showFilterCondition=!1,this.close()},formatDataForFilter:function(filterData){var _this4=this,filters={},_loop=function(){var field=filterData[fieldName],key=field.key?field.key:fieldName;if(!(0,validation/* isEmpty */.xb)(field.value)||[OPERATOR_CHECK.isEmpty,OPERATOR_CHECK.isNotEmpty].includes(field.operatorId))if(field.customdate)_this4.setCustomDateFilters(filters,fieldName);else{var filterObj={operatorId:_this4.setOperatorId(field,fieldName,!0)};if([OPERATOR_CHECK.isEmpty,OPERATOR_CHECK.isNotEmpty].includes(field.operatorId)){var _ref5=_this4.$getProperty(filterData,fieldName,null)||{},operator=_ref5.operator;["subject","name","title"].includes(fieldName)||!(0,validation/* isEmpty */.xb)(operator)&&"STRING"===operator?field.value="":field.value=[]}if("assignedTo"===fieldName){var users=[],groups=[];field.value.forEach((function(user){-1!==user.indexOf("_group")?groups.push(user.substring(0,user.indexOf("_group"))):users.push(user)})),users.length&&(filterObj.value=users),groups.length&&(filterObj.value=groups,key="assignedToId"===key?"assignmentGroupId":"assignmentGroup"),filters[key]=filterObj}else{var value;if((0,validation/* isArray */.kJ)(field.value)?(0,validation/* isObject */.Kn)(field.value[0])?(field.value[0].value=_this4.$getProperty(field.value[0],"value")+"",value=field.value):value=field.value.map((function(val){return val+""})):value=[field.value],filterObj.value=value,SPACE_FIELDS.includes(fieldName)||"asset"===fieldName||"resourceIdAsset"==fieldName?(key=field.key||fieldName,filters[key]||(filters[key]=[]),(0,validation/* isObject */.Kn)(filters[key])?(0,validation/* isEmpty */.xb)(filters[key].value)||(filters[key]=(0,objectSpread2/* default */.Z)({},filterObj)):filters[key].push(filterObj)):filters[key]=filterObj,"lookup"===field.displayType){
//Since fieldValue is array of only one object
(0,validation/* isArray */.kJ)(filters[key])&&(filters[key]=filters[key][0]);var fieldValue=filters[key].value,_ref6=_this4.getFieldObj(field,fieldName)||{},_ref6$multiple=_ref6.multiple,multiple=void 0!==_ref6$multiple&&_ref6$multiple;(0,validation/* isArray */.kJ)(fieldValue)&&!multiple&&(fieldValue=fieldValue[0]),filters[key]["selectedLabel"]=field.selectedLabel,
// filters[key].value = !isEmpty(fieldValue) ? [fieldValue.toString()]: []
(0,validation/* isEmpty */.xb)(fieldValue)?filters[key].value=[]:filters[key].value=multiple?fieldValue:[fieldValue.toString()],OPERATOR_CHECK.related===field.operatorId&&(filters[key].relatedFieldName=field.relatedFieldName)}}}};for(var fieldName in filterData)_loop();return filters},setLookUpFilter:function(filter){if((0,validation/* isArray */.kJ)(filter)){var valueArr=[];filter.forEach((function(item){var key=item.hasOwnProperty("id")?"id":"value";valueArr.push(item[key])})),this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{value:valueArr})}else{var value=filter.value,selectedLabel=filter.label;this.currentFilterProxy=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},this.currentFilterProxy),{},{value:value,selectedLabel:selectedLabel})}this.showingLookupWizard=!1,this.applyFilter()},resetFilterData:function(){var _this5=this,appliedFilters=(0,validation/* isEmpty */.xb)(this.appliedFilters)?{}:this.appliedFilters,filters=Object.keys(appliedFilters||{});Object.entries(this.filterObjectsData||{}).forEach((function(_ref7){var _ref8=(0,slicedToArray/* default */.Z)(_ref7,2),fieldName=_ref8[0],filterData=_ref8[1],key=filterData.key?filterData.key:fieldName;filters.includes(key)||(filterData.value=(0,validation/* isArray */.kJ)(filterData.value)?[]:"",delete filterData.operatorId,_this5.filterObjectsData=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this5.filterObjectsData),{},(0,defineProperty/* default */.Z)({},fieldName,filterData)))}))}}},components_SearchTagMixinvue_type_script_lang_js=SearchTagMixinvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SearchTagMixinvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SearchTagMixin=component.exports;
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
},
/***/714218:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DeprecatedCommonLayout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newapp/list/DeprecatedCommonLayout.vue?vue&type=template&id=33b4bc06
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"layout common-list-layout d-flex"},[_vm._t("views-list",(function(){return[_vm.canShowViewsSidePanel&&!_vm.hideViewSidebar?_c("ViewsList",{attrs:{canShowViewsSidePanel:_vm.canShowViewsSidePanel,groupViews:_vm.groupViews,moduleName:_vm.moduleName},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},onChange:_vm.goToView}}):_vm._e()]})),_c("div",{staticClass:"list-content-container"},[_c("div",{class:["view-header-container subheader-section",!0===_vm.hasQuery&&"filter-class"]},[_vm._t("views",(function(){return[_c("ViewHeader",{attrs:{moduleName:_vm.moduleName,showRearrange:_vm.showViewRearrange,showCurrentViewOnly:_vm.showSearch,maxVisibleMenu:_vm.visibleViewCount,showEditIcon:_vm.showViewEdit,pathPrefix:_vm.pathPrefix,retainFilters:_vm.filtersToRetain,canShowViewsSidePanel:_vm.canShowViewsSidePanel},on:{"update:canShowViewsSidePanel":function($event){_vm.canShowViewsSidePanel=$event},"update:can-show-views-side-panel":function($event){_vm.canShowViewsSidePanel=$event},viewsLoaded:function($event){return _vm.$emit("viewsLoaded")},hideViewSidebar:function(val){return _vm.hideViewSidebar=val}}})]})),_c("div",{staticClass:"fR fc-subheader-right"},[_vm._t("header")],2)],2),_c("div",{staticClass:"height100 common-content-container"},[_vm._t("content"),_vm._t("default")],2)])],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(169358),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(689730),__webpack_require__(634338),__webpack_require__(420629)),validation=__webpack_require__(990260),ViewHeader=__webpack_require__(629039),ViewsSidePanel=__webpack_require__(409886),router=__webpack_require__(329435),DeprecatedCommonLayoutvue_type_script_lang_js={props:["moduleName","getPageTitle","showViewRearrange","visibleViewCount","showViewEdit","pathPrefix","retainFilters"],components:{ViewHeader:ViewHeader/* default */.Z,ViewsList:ViewsSidePanel/* default */.Z},created:function(){this.$store.dispatch("view/clearViews").catch((function(){})),(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},data:function(){return{currentModuleName:this.moduleName,hideViewSidebar:!1,isSidePanelOpen:JSON.parse(localStorage.getItem("fc-view-sidepanel"))||!1}},title:function(){var title=this.getPageTitle();return(0,validation/* isEmpty */.xb)(title)?"":title},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo},viewDetail:function(state){return state.view.currentViewDetail},showSearch:function(state){return state.search.active},currentTab:function(state){return state.webtabs.selectedTab},groupViews:function(state){return(0,validation/* isEmpty */.xb)(state.view.groupViews)?[]:state.view.groupViews}})),{},{currentView:function(){var $route=this.$route;return $route.params.viewname?$route.params.viewname:null},filtersToRetain:function(){var retainFilters=this.retainFilters;return(0,validation/* isNull */.Ft)(retainFilters)?[]:(0,validation/* isEmpty */.xb)(retainFilters)?["search","includeParentFilter"]:retainFilters},hasQuery:function(){var query=this.$route.query;return""===query.filters||!!query.filters},canShowViewsSidePanel:{get:function(){var isSidePanelOpen=this.isSidePanelOpen,$slots=this.$slots,isViewHeaderOverriden=!(0,validation/* isEmpty */.xb)($slots.views);return isSidePanelOpen&&!isViewHeaderOverriden},set:function(value){this.isSidePanelOpen=value,localStorage.setItem("fc-view-sidepanel",value)}}}),watch:{moduleName:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.setPageTitle()},$route:function(newVal,oldVal){newVal.params.viewname!==oldVal.params.viewname&&this.setPageTitle()},metaInfo:function(newVal,oldVal){newVal&&oldVal!==newVal&&this.setPageTitle()},currentView:{handler:function(newVal,oldVal){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!newVal||oldVal===newVal){_context.next=5;break}return _context.next=3,_this.loadViewDetails();case 3:_this.getMetaInfo(),_this.setPageTitle();case 5:case"end":return _context.stop()}}),_callee)})))()},immediate:!0}},methods:{reloadList:function(){var routeParams=this.$getProperty(this,"$route.params");this.$router.push({params:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},routeParams),{},{viewname:""})}).catch((function(){})),this.$router.push({params:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},routeParams),{},{viewname:routeParams.viewname})}).catch((function(){}))},getMetaInfo:function(){this.$store.dispatch("view/loadModuleMeta",this.moduleName).catch((function(){}))},goToView:function(view){var group=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,validation/* isEmpty */.xb)(view)){var viewname=view.name;if("rearrange-views"===viewname)return void(this.showReorderPanel=!0);var currentTab=this.currentTab,_this$retainFilters=this.retainFilters,retainFilters=void 0===_this$retainFilters?[]:_this$retainFilters,query=this.$route.query,hasRetainableQuery=retainFilters.some((function(filterName){return query.hasOwnProperty(filterName)}));if((0,router/* isWebTabsEnabled */.tj)()){var route=(0,router/* findRouteForTab */.OD)(currentTab.id,{pageType:router/* pageTypes */.As.LIST})||{};route&&this.$router.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},route),{},{params:{viewname:viewname},query:hasRetainableQuery?query:null})).catch((function(error){}))}else{var path=this.getPathForView(view,group);this.$router.push({path:path,query:query}).catch((function(){}))}}},getPathForView:function(view){var pathPrefix=this.pathPrefix,prefix="/"===pathPrefix[pathPrefix.length-1]?pathPrefix.slice(0,-1):pathPrefix;return"".concat(prefix,"/").concat(view.name)},loadViewDetails:function(){this.$store.dispatch("view/loadViewDetail",{viewName:this.currentView,moduleName:this.moduleName}).catch((function(){}))},setPageTitle:function(){var getPageTitle=this.getPageTitle,setTitle=this.setTitle,currentView=this.currentView,title=getPageTitle(currentView);(0,validation/* isEmpty */.xb)(title)||setTitle(title)},keyDownHandler:function(e){if(e.shiftKey&&"N"===e.key&&(0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.CREATE)||{},name=_ref.name;"body"===e.target.localName&&name&&this.$router.push({name:name}).catch((function(){}))}}}},list_DeprecatedCommonLayoutvue_type_script_lang_js=DeprecatedCommonLayoutvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_DeprecatedCommonLayoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DeprecatedCommonLayout=component.exports},
/***/358551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDatePicker}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/assets/overview/FDatePicker.vue?vue&type=template&id=fd3cfbc4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-date-picker",{ref:"date-picker",attrs:{appendToBody:_vm.appendToBody,clearable:!_vm.hideClear,type:_vm.type,"value-format":_vm.valueFormat,format:_vm.pickerFormat,placeholder:_vm.placeholder,disabled:_vm.disabled,editable:_vm.editable,"default-value":_vm.defaultValue,"picker-options":_vm.pickerOptions,"prefix-icon":_vm.prefixIcon,"clear-icon":_vm.clearIcon,"start-placeholder":_vm.startPlaceholder,"end-placeholder":_vm.endPlaceholder,"time-arrow-control":_vm.arrowControl,"default-time":_vm.defaultTime},on:{change:_vm.pickerChange},model:{value:_vm.ttime,callback:function($$v){_vm.ttime=$$v},expression:"ttime"}})},staticRenderFns=[],validation=(__webpack_require__(976801),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(756532),__webpack_require__(634338),__webpack_require__(450886),__webpack_require__(843843),__webpack_require__(990260)),constant=__webpack_require__(354754),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),FDatePickervue_type_script_lang_js={props:["appendToBody","value","value-format","format","default-value","placeholder","disabled","editable","picker-options","type","prefix-icon","clear-icon","start-placeholder","end-placeholder","hideClear","arrowControl","default-time"],mounted:function(){this.init()},data:function(){return{timeinorg:[]}},computed:{isRangeType:function(){var _ref=this||{},type=_ref.type;return["daterange","datetimerange"].includes(type)},defaultFormats:function(){var $timeformat=this.$timeformat,$dateformat=this.$dateformat,dateformat=($dateformat||"").replaceAll("Y","y");return dateformat=(dateformat||"").replaceAll("D","d"),{date:dateformat,month:"yyyy-MM",datetime:"".concat(dateformat," ").concat($timeformat),time:"".concat($timeformat),week:"yyyywWW",timerange:"".concat($timeformat),daterange:"".concat(dateformat),monthrange:"yyyy-MM",datetimerange:"".concat(dateformat," ").concat($timeformat),year:"yyyy"}},pickerFormat:function(){var _ref2=this||{},defaultFormats=_ref2.defaultFormats,type=_ref2.type,format=_ref2.format;return(0,validation/* isEmpty */.xb)(format)&&!(0,validation/* isEmpty */.xb)(defaultFormats[type])?defaultFormats[type]:format},ttime:{get:function(){var _this=this,_ref3=this||{},value=_ref3.value,isRangeType=_ref3.isRangeType;return(0,validation/* isEmpty */.xb)(value)?isRangeType?[]:"":isRangeType?value.map((function(val){return _this.getTimeInSystemZone(val)})):this.getTimeInSystemZone(value)},set:function(value){var isRangeType=this.isRangeType;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("input",this.timeinorg),this.$emit("change",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("input",modifiedTimeFormat),this.$emit("change",modifiedTimeFormat)}}}},methods:{pickerChange:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value)this.timeinorg[time]=this.$helpers.getTimeInOrg(value[time]);this.$emit("pickerChange",this.timeinorg)}else{var modifiedTimeFormat=this.$helpers.getTimeInOrg(value);this.$emit("pickerChange",modifiedTimeFormat)}},init:function(){var isRangeType=this.isRangeType,value=this.value;if(isRangeType){if((0,validation/* isEmpty */.xb)(value))this.timeinorg=[];else for(var time in value){var timeVal=parseInt(value[time]);this.timeinorg[time]=timeVal}this.$emit("input",this.timeinorg)}else if(!(0,validation/* isEmpty */.xb)(value)){var isPlaceHoldersEnabled=constant/* default */.Z.FIELD_PLACEHOLDERS.includes(value)||!1;isPlaceHoldersEnabled||this.$emit("input",value)}this.$emit("initialized")},focus:function(){this.$refs["date-picker"].focus()},getTimeInSystemZone:function(value){return new Date(moment_timezone_default().tz(value,this.$timezone).format("YYYY-MM-DD HH:mm:ss"))}}},overview_FDatePickervue_type_script_lang_js=FDatePickervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(overview_FDatePickervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDatePicker=component.exports},
/***/93551:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return NewPmList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/preventive/v1/NewPmList.vue?vue&type=template&id=175d6338
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("CommonListLayout",{attrs:{moduleName:_vm.moduleName,visibleViewCount:5,getPageTitle:function(){return _vm.viewName},pathPrefix:"/app/wo/planned/"},scopedSlots:_vm._u([{key:"header",fn:function(){return[_vm.showSearch?_vm._e():[_c("pagination",{staticClass:"pL15 fc-black-small-txt-12",attrs:{total:_vm.listCount,perPage:50}}),_vm.listCount>0?_c("span",{staticClass:"separator"},[_vm._v("|")]):_vm._e()],_c("el-tooltip",{attrs:{effect:"dark",content:_vm.$t("common._common.search"),placement:"left"}},[_c("search",{key:_vm.moduleName+"-search",staticClass:"fc-black-small-txt-12",attrs:{config:_vm.filterConfig,moduleName:_vm.moduleName,defaultFilter:_vm.defaultFilter}})],1),_vm.showSearch?_vm._e():[_c("span",{staticClass:"separator pL10"},[_vm._v("|")]),_c("div",[_vm.hasCreatePMv1Permission?_c("button",{staticClass:"fc-create-btn",staticStyle:{"margin-top":"-10px"},on:{click:function($event){return _vm.redirectToFormCreation()}}},[_c("i",{staticClass:"el-icon-plus white-color f12 fw-bold"})]):_vm._e()])]]},proxy:!0},{key:"content",fn:function(){return[_c("div",[_c("tags",{attrs:{disableSaveFilters:!0}})],1),_c("div",[_vm.showLoading?_c("div",{staticClass:"flex-middle fc-empty-white mL10 mT10 mR10 mB10 pR10 width100"},[_c("spinner",{attrs:{show:_vm.showLoading,size:"80"}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.preventiveList)&&!_vm.showLoading?_c("div",{staticClass:"height100vh fc-empty-white flex-middle justify-content-center flex-direction-column common-empty-data-con m10"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/maintenance",iconClass:"icon text-center icon-xxxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.no_pm"))+" ")])],1):_vm._e(),_vm.showLoading||_vm.$validation.isEmpty(_vm.preventiveList)?_vm._e():_c("div",{staticClass:"height100"},[_c("div",{staticClass:"fc-list-view p10 pT0 height100 mT10 fc-list-table-container fc-table-td-height fc-table-viewchooser pB100",class:_vm.$route.query.search?"fc-list-table-search-scroll":""},[_vm.selectedPreventive.length>0?_c("div",{staticClass:"pull-left table-header-actions"},[_c("div",{staticClass:"action-btn-slide btn-block"},["active"!==_vm.currentView?_c("button",{staticClass:"btn btn--tertiary",class:{disabled:_vm.actions.activate.loading},on:{click:function($event){return _vm.activate(_vm.selectedPreventive)}}},[_vm.actions.delete.loading?_vm._e():_c("i",{staticClass:"fa fa-check b-icon"}),_vm.actions.activate.loading?_c("i",{staticClass:"fa fa-circle-o-notch b-icon fa-spin",attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.activate"))+" ")]):_vm._e(),"inactive"!==_vm.currentView?_c("button",{staticClass:"btn btn--tertiary",class:{disabled:_vm.actions.deactivate.loading},on:{click:function($event){return _vm.deactivate(_vm.selectedPreventive)}}},[_vm.actions.delete.loading?_vm._e():_c("i",{staticClass:"fa fa-ban b-icon"}),_vm.actions.deactivate.loading?_c("i",{staticClass:"fa fa-circle-o-notch b-icon fa-spin",attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.deactivate"))+" ")]):_vm._e(),_c("button",{staticClass:"btn btn--tertiary",class:{disabled:_vm.actions.delete.loading},on:{click:function($event){return _vm.deletePreventive(_vm.selectedPreventive,_vm.index)}}},[_vm.actions.delete.loading?_vm._e():_c("i",{staticClass:"fa fa-trash-o b-icon"}),_vm.actions.delete.loading?_c("i",{staticClass:"fa fa-circle-o-notch b-icon fa-spin",attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(_vm.$t("common._common.delete"))+" ")])])]):_vm._e(),"upcoming"!==_vm.currentView?_c("el-table",{staticClass:"fc-list-eltable",staticStyle:{width:"100%"},attrs:{data:_vm.preventiveList,height:"100%",index:_vm.indexMethod,"row-class-name":"no-hover"},on:{"selection-change":_vm.selectPmList}},[_c("el-table-column",{attrs:{type:"selection",width:"60"}}),_c("el-table-column",{attrs:{fixed:"",width:"90",label:_vm.$t("common._common.id")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+preventive.row.id))])]}}],null,!1,3758332055)}),_c("el-table-column",{staticClass:"pR0",attrs:{fixed:"",width:"300",label:_vm.$t("maintenance.pm_list.title")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"text-left main-field-column",on:{click:function($event){return _vm.openSummary(preventive.row.id,preventive.row.pmCreationTypeEnum)}}},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fw5 q-item-label ellipsis primary-field max-width300px",attrs:{small:"",title:preventive.row.title}},[_vm._v(" "+_vm._s(preventive.row.title)+" ")])])]}}],null,!1,2937130414)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"170",label:_vm.$t("maintenance.wr_list.type")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"q-item-label"},[_vm._v(" "+_vm._s(preventive.row.woTemplate.typeId>0?_vm.getPMType(preventive.row.woTemplate.typeId):"---")+" ")])]}}],null,!1,1846274239)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"220",label:_vm.$t("maintenance.wr_list.assignedto")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"q-item-division relative-position",staticStyle:{"min-width":"180px",display:"flex","align-items":"center"}},[_c("div",{staticClass:"wo-assigned-avatar",staticStyle:{width:"38px",float:"left"}},[_c("user-avatar",{staticClass:"pm-list-avatar",attrs:{size:"md",user:_vm.getUser(preventive.row.woTemplate.assignedToId),group:_vm.getGroup(preventive.row.woTemplate.assignmentGroupId),showPopover:!0,showLabel:!0}})],1)])]}}],null,!1,2076382649)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"200",label:_vm.$t("maintenance.wr_list.space_asset")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[1===preventive.row.pmCreationType?_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(-1!==preventive.row.woTemplate.resourceId&&preventive.row.woTemplate.resource?preventive.row.woTemplate.resource.name:"---"))]):3===preventive.row.pmCreationType&&8===preventive.row.assignmentType?_c("span",[_vm._v(" "+_vm._s(preventive.row.siteIds&&preventive.row.siteIds.length>0?preventive.row.siteIds.length+" - Site(s)":"---")+" ")]):_c("span",[_vm._v(_vm._s(preventive.row.pmCategoryDescription?preventive.row.pmCategoryDescription:"---"))])]}}],null,!1,3057491901)}),"all"===_vm.currentView||-1!==_vm.currentViewDetail.id?_c("el-table-column",{staticClass:"pR0",attrs:{width:"200",label:_vm.$t("maintenance._workorder.status")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return["all"===_vm.currentView||-1!==_vm.currentViewDetail.id?_c("div",{staticClass:"text-left"},[_c("div",{staticClass:"q-item-label"},[_vm._v(" "+_vm._s(0===preventive.row.status?"InActive":"Active")+" ")])]):_vm._e()]}}],null,!1,501897027)}):_vm._e(),_c("el-table-column",{staticClass:"pR0",attrs:{width:"280",label:_vm.$t("maintenance._workorder.trigger")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"frequency-msg-txt"},[_vm._v(" "+_vm._s(preventive.row.pmTriggerDescription?preventive.row.pmTriggerDescription:"---")+" ")])]}}],null,!1,3977618628)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"280",label:_vm.$t("maintenance._workorder.sites")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[preventive.row.siteObjects?_c("el-tooltip",{attrs:{effect:"dark","open-delay":500,placement:"left"}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("p",{domProps:{innerHTML:_vm._s(_vm.getSitesAsString(preventive.row.siteObjects).replace(/(?:\r\n|\r|\n)/g,"<br />"))}})]),_c("div",{staticClass:"frequency-msg-txt"},[_vm._v(" "+_vm._s(_vm.getSitesMessage(preventive.row.siteObjects))+" ")])]):_c("div",[_vm._v(" "+_vm._s("---")+" ")])]}}],null,!1,77317887)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"280",label:_vm.$t("maintenance._workorder.ticket_category")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"frequency-msg-txt"},[_vm._v(" "+_vm._s(null!=preventive.row.ticketCategory?preventive.row.ticketCategory.displayName:"---")+" ")])]}}],null,!1,466775856)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"280",label:_vm.$t("maintenance._workorder.vendor_name")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"frequency-msg-txt"},[_vm._v(" "+_vm._s(null!=preventive.row.vendor?preventive.row.vendor.name:"---")+" ")])]}}],null,!1,2028842698)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"280",label:_vm.$t("maintenance._workorder.next_execution_time")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[preventive.row.nextExecutionTime>0?_c("div",{staticClass:"frequency-msg-txt"},[_c("div",[_vm._v(" "+_vm._s(_vm._f("formatDate")(preventive.row.nextExecutionTime,!0))+" ")]),_c("div",[_vm._v(" "+_vm._s(_vm._f("formatDate")(preventive.row.nextExecutionTime,!1,!0))+" ")])]):_c("div",{staticClass:"frequency-msg-txt"},[_vm._v(" "+_vm._s("---")+" ")])]}}],null,!1,3106589063)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"280",label:_vm.$t("maintenance._workorder.last_triggered")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[preventive.row.lastTriggeredTime&&preventive.row.lastTriggeredTime>0?_c("div",{staticClass:"frequency-msg-txt"},[_c("div",[_vm._v(" "+_vm._s(_vm._f("formatDate")(preventive.row.lastTriggeredTime,!0))+" ")]),_c("div",[_vm._v(" "+_vm._s(_vm._f("formatDate")(preventive.row.lastTriggeredTime,!1,!0))+" ")])]):_c("div",{staticClass:"frequency-msg-txt"},[_vm._v(" "+_vm._s("---")+" ")])]}}],null,!1,414732755)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"100",label:""},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_vm.$hasPermission("planned:UPDATE")||_vm.$hasPermission("planned:DELETE")?_c("el-dropdown",{attrs:{trigger:"click"},on:{command:_vm.handleMoreActions}},[_c("el-button",{attrs:{type:"text",icon:"el-icon-more more-icon","data-test-selector":"Icon"}}),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[_vm.$hasPermission("planned:UPDATE")?_c("span",[preventive.row.status?_c("el-dropdown-item",{attrs:{command:{action:"executePMs",data:preventive.row},"data-test-selector":"Execute_Now"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.execute_now")))]):_vm._e(),preventive.row.status?preventive.row.data&&preventive.row.data.woGenerationStatus?_vm._e():_c("el-dropdown-item",{attrs:{command:{action:"deactivate",data:preventive.row},"data-test-selector":"Deactivate"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.deactivate")))]):_c("el-dropdown-item",{attrs:{command:{action:"activate",data:preventive.row},"data-test-selector":"Activate"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.activate")))]),preventive.row.data&&preventive.row.data.woGenerationStatus?_vm._e():_c("el-dropdown-item",{attrs:{command:{action:"edit",data:preventive.row},"data-test-selector":"Edit"}},[_vm._v(_vm._s(_vm.$t("common._common.edit")))])],1):_vm._e(),_vm.$hasPermission("planned:DELETE")?_c("span",[preventive.row.data&&preventive.row.data.woGenerationStatus?_vm._e():_c("el-dropdown-item",{attrs:{command:{action:"delete",data:preventive.row},"data-test-selector":"Delete"}},[_vm._v(_vm._s(_vm.$t("common._common.delete")))])],1):_vm._e()])],1):_vm._e()]}}],null,!1,4148173858)})],1):_c("el-table",[_c("el-table-column",{staticClass:"pR0",attrs:{width:"100",label:_vm.$t("common._common.id")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+preventive.row.value.id))])]}}],null,!1,1364220946)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"200",label:_vm.$t("maintenance.pm_list.title")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"text-left main-field-column",on:{click:function($event){return _vm.openSummary(preventive.row.id)}}},[_c("div",{staticClass:"q-item-label ellipsis primary-field"},[_vm._v(" "+_vm._s(preventive.row.value.title)+" ")])])]}}],null,!1,682862544)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"200",label:_vm.$t("maintenance.wr_list.type")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"q-item-label"},[_vm._v(" "+_vm._s(preventive.row.value.typeId>0?_vm.getPMType(preventive.row.value.typeId):"---")+" ")])]}}],null,!1,685899487)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"200",label:_vm.$t("maintenance.pm_list.created_by")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("user-avatar",{attrs:{size:"sm",user:_vm.getUser(preventive.row.value.createdById)}})]}}],null,!1,1451715117)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"200",label:_vm.$t("maintenance._workorder.trigger")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[preventive.row.value.triggers&&preventive.row.value.triggers.length>0&&preventive.row.value.triggers[0].schedule?_c("div",["DO_NOT_REPEAT"===preventive.row.value.triggers[0].schedule.frequencyTypeEnum?_c("span",{staticClass:"q-item-label",staticStyle:{"text-transform":"uppercase"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.one_time")))]):_vm._e(),"DAILY"===preventive.row.value.triggers[0].schedule.frequencyTypeEnum?_c("span",{staticClass:"q-item-label",staticStyle:{"text-transform":"uppercase"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.daily")))]):_vm._e(),"WEEKLY"===preventive.row.value.triggers[0].schedule.frequencyTypeEnum?_c("span",{staticClass:"q-item-label",staticStyle:{"text-transform":"uppercase"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.weekly")))]):_vm._e(),"MONTHLY_DAY"===preventive.row.value.triggers[0].schedule.frequencyTypeEnum?_c("span",{staticClass:"q-item-label",staticStyle:{"text-transform":"uppercase"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.monthly")))]):_vm._e(),"MONTHLY_WEEK"===preventive.row.value.triggers[0].schedule.frequencyTypeEnum?_c("span",{staticClass:"q-item-label",staticStyle:{"text-transform":"uppercase"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.monthly")))]):_vm._e(),"YEARLY"===preventive.row.value.triggers[0].schedule.frequencyTypeEnum?_c("span",{staticClass:"q-item-label",staticStyle:{"text-transform":"uppercase"}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.yearly")))]):_vm._e(),_vm._v(" "+_vm._s(preventive.row.value.triggers)+" ")]):_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v("---")])])]}}],null,!1,3148831931)}),_c("el-table-column",{staticClass:"pR0",attrs:{width:"200",label:_vm.$t("maintenance.pm_list.scheduled")},scopedSlots:_vm._u([{key:"default",fn:function(preventive){return[_c("div",{staticClass:"q-item-label"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(1e3*preventive.row.key))+" ")])]}}],null,!1,3512973617)})],1),_c("space-asset-multi-chooser",{attrs:{visibility:_vm.chooserVisibility,siteId:_vm.siteId,query:_vm.resourceQuery,initialValues:_vm.resourceData,showAsset:!0,disable:!0,filter:_vm.filter},on:{"update:visibility":function($event){_vm.chooserVisibility=$event},"update:siteId":function($event){_vm.siteId=$event},"update:site-id":function($event){_vm.siteId=$event},associate:_vm.associateResource}}),_c("new-work-order-new",{attrs:{visibility:_vm.showCreateNewDialog,defaultForm:"newPreventiveMaintenance"}}),_vm.showEditPreventiveDialog?_c("edit-preventive",{attrs:{preventive:_vm.editPreventiveData}}):_vm._e(),_vm.showExecutionConfig?_c("el-dialog",{staticClass:"fc-dialog-center-container resource-dialog",attrs:{visible:_vm.showExecutionConfig,"append-to-body":!0,width:"30%",title:"SELECT SPACE/ASSETS"},on:{"update:visible":function($event){_vm.showExecutionConfig=$event}}},[_c("div",{staticClass:"mT20"},[_c("el-input",{staticClass:"fc-input-full-border2 text-input-icon-align input-padding width100",attrs:{placeholder:"search",type:"search","prefix-icon":"el-icon-search"},on:{change:_vm.forceUpdate},model:{value:_vm.searchQuery,callback:function($$v){_vm.searchQuery=$$v},expression:"searchQuery"}})],1),_c("table",{staticClass:"fc-pm-form-table clear-both"},[_c("thead",[_c("tr",{staticClass:"pm-trigger-head-tr"},[_c("th",{staticClass:"pT10 pB10"},[_c("el-checkbox",{staticClass:"pR20",on:{change:_vm.selected},model:{value:_vm.selectAllResources,callback:function($$v){_vm.selectAllResources=$$v},expression:"selectAllResources"}}),_vm._v("SELECT ALL ")],1)])]),_c("tbody",{staticClass:"mT10"},_vm._l(_vm.resources,(function(resource,key){return _c("tr",{directives:[{name:"show",rawName:"v-show",value:!_vm.searchQuery.trim()||resource.name.trim().toLowerCase().startsWith(_vm.searchQuery.trim().toLowerCase()),expression:"\n                    !searchQuery.trim() ||\n                      resource.name\n                        .trim()\n                        .toLowerCase()\n                        .startsWith(searchQuery.trim().toLowerCase())\n                  "}],key:key,staticClass:"mB10"},[_c("td",{staticClass:"pT15 pB15"},[_c("el-checkbox",{staticClass:"pR20",on:{change:_vm.forceUpdate},model:{value:_vm.resources[key].selected,callback:function($$v){_vm.$set(_vm.resources[key],"selected",$$v)},expression:"resources[key].selected"}}),_vm._v(" "+_vm._s(resource.name)+" ")],1)])})),0)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showExecutionConfig=!1}}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.actions.executePM.multiExecLoading},on:{click:function($event){return _vm.executPMs(_vm.currenPMId,_vm.resources)}}},[_vm._v("EXECUTE")])],1)]):_vm._e()],1)])])]},proxy:!0}])})},staticRenderFns=[],esm_typeof=__webpack_require__(103336),createForOfIteratorHelper=__webpack_require__(566347),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),User=(__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(670560),__webpack_require__(228436),__webpack_require__(300268),__webpack_require__(434284),__webpack_require__(450886),__webpack_require__(634338),__webpack_require__(879288),__webpack_require__(425728),__webpack_require__(648324),__webpack_require__(947522),__webpack_require__(162506),__webpack_require__(76265),__webpack_require__(426803)),EditPreventivevue_type_template_id_5bb97d84_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("q-modal",{ref:"createNewModel",attrs:{position:"right","content-classes":"fc-create-record"},on:{close:_vm.close}},[_c("q-btn",{staticClass:"fc-model-close",attrs:{flat:""},on:{click:_vm.closeDialog}},[_c("q-icon",{attrs:{name:"close"}})],1),_c("form-layout",{attrs:{layout:_vm.formlayout},on:{onsave:_vm.saveWorkOrder,cancel:_vm.closeDialog}},[_c("el-col",{attrs:{md:24,lg:24}},[_c("div",{staticClass:"bold pT15 pB15"},[_vm._v("Scheduling")]),_c("el-form-item",{attrs:{label:"Start from"}},[_vm._v(_vm._s(_vm.preventiveForm)+" "),_c("el-date-picker",{attrs:{type:"datetime"},model:{value:_vm.preventiveForm.startTime,callback:function($$v){_vm.$set(_vm.preventiveForm,"startTime",$$v)},expression:"preventiveForm.startTime"}}),_vm._v(" } } ")],1),_c("f-schedule",{attrs:{from:_vm.preventiveForm.startTime},model:{value:_vm.preventiveForm.schedule,callback:function($$v){_vm.$set(_vm.preventiveForm,"schedule",$$v)},expression:"preventiveForm.schedule"}}),_vm.preventiveForm.schedule&&_vm.preventiveForm.schedule.frequencyType>0?_c("el-form-item",{attrs:{label:"Stop repeating after"}},[_c("el-select",{model:{value:_vm.preventiveForm.stopAfter,callback:function($$v){_vm.$set(_vm.preventiveForm,"stopAfter",$$v)},expression:"preventiveForm.stopAfter"}},[_c("el-option",{attrs:{label:"Never",value:"never"}}),_c("el-option",{attrs:{label:"Time",value:"time"}}),_c("el-option",{attrs:{label:"Count",value:"count"}})],1),"time"===_vm.preventiveForm.stopAfter?_c("el-date-picker",{attrs:{type:"datetime"},model:{value:_vm.preventiveForm.stopAfterTime,callback:function($$v){_vm.$set(_vm.preventiveForm,"stopAfterTime",$$v)},expression:"preventiveForm.stopAfterTime"}}):_vm._e(),"count"===_vm.preventiveForm.stopAfter?_c("el-input-number",{model:{value:_vm.preventiveForm.stopAfterCount,callback:function($$v){_vm.$set(_vm.preventiveForm,"stopAfterCount",$$v)},expression:"preventiveForm.stopAfterCount"}}):_vm._e()],1):_vm._e()],1),_c("el-col",{attrs:{md:24,lg:24}},[_c("div",{staticClass:"bold pT15 pB15"},[_vm._v("Tasks")]),_vm._l(_vm.tasks,(function(task,index){return _c("el-form-item",{key:index},[_c("el-input",{staticStyle:{width:"80% !important"},model:{value:task.subject,callback:function($$v){_vm.$set(task,"subject",$$v)},expression:"task.subject"}}),0!==index?_c("el-button",{staticClass:"p15",attrs:{type:"text",icon:"el-icon-minus"},on:{click:function($event){return _vm.removeTask(index)}}}):_vm._e(),_c("el-button",{staticClass:"p15",attrs:{type:"text",icon:"el-icon-plus"},on:{click:_vm.addTask}})],1)}))],2)],1)],1)],1)},EditPreventivevue_type_template_id_5bb97d84_staticRenderFns=[],Formlayout=(__webpack_require__(857267),__webpack_require__(16133)),FSchedule=__webpack_require__(645877),quasar_esm=__webpack_require__(641358),EditPreventivevue_type_script_lang_js={props:["preventive"],data:function(){return{formlayout:{title:"Edit Preventive Maintenance",metaurl:"/workorder/layout"},isPreventive:!1,savePreventiveVisible:!1,preventiveForm:{title:this.preventive,startTime:this.preventive.startTime?new Date(this.preventive.startTime):new Date,schedule:this.preventive.schedule,stopAfter:this.preventive.stopAfter,stopAfterTime:this.preventive.stopAfterTime,stopAfterCount:1},preventiveSaving:!1,workorder:null,tasks:[{subject:null}]}},mounted:function(){this.$refs.createNewModel.open()},components:{QModal:quasar_esm/* QModal */.hc,QBtn:quasar_esm/* QBtn */.OV,QIcon:quasar_esm/* QIcon */.oF,FormLayout:Formlayout/* default */.Z,FSchedule:FSchedule/* default */.Z},methods:{removeTask:function(index){this.tasks.splice(index,1)},addTask:function(){this.tasks.push({subject:null})},close:function(){var newpath=this.$route.path.replace("/new","");this.$router.replace({path:newpath})},closeDialog:function(){this.$refs.createNewModel.close()},saveWorkOrder:function(formdata){var preventiveFormData={};preventiveFormData.title=formdata.workorder.subject,preventiveFormData.startTime=new Date(this.preventiveForm.startTime).getTime(),preventiveFormData.schedule=this.preventiveForm.schedule,"time"===this.preventiveForm.stopAfter?preventiveFormData.endExecutionTime=new Date(this.preventiveForm.stopAfterTime).getTime():"count"===this.preventiveForm.stopAfter&&(preventiveFormData.maxExecution=this.preventiveForm.stopAfterCount);var data={};data.workorder=formdata.workorder,data.workorder.requester=formdata.requester,data.preventivemaintenance=preventiveFormData,data.tasks=this.tasks;var saveurl="/workorder/editPreventiveMaintenance",self=this;self.$http.post(saveurl,data).then((function(response){if("object"===(0,esm_typeof/* default */.Z)(response.data)){var alert1=Alert.create({html:"Preventive maintenance created successfully!",color:"positive",position:"top-center"});setTimeout((function(){alert1.dismiss()}),1500),self.close(),self.resetPreventive()}else{var alert3=Alert.create({html:"Preventive maintenance creation failed, please check requester email address!",color:"negative",position:"top-center"});setTimeout((function(){alert3.dismiss()}),1500),self.formlayout.submit=!1}})).catch((function(error){var alert2=Alert.create({html:" creation failed! [ "+error+"]",color:"negative",position:"top-center"});setTimeout((function(){alert2.dismiss()}),1500),self.formlayout.submit=!1}))},resetPreventive:function(){this.preventiveForm.title="",this.preventiveForm.startTime=new Date,this.preventiveForm.schedule=null,this.preventiveForm.stopAfter="never",this.preventiveForm.stopAfterTime="",this.preventiveForm.stopAfterCount=1,this.tasks=[{subject:null}]}}},preventive_EditPreventivevue_type_script_lang_js=EditPreventivevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(preventive_EditPreventivevue_type_script_lang_js,EditPreventivevue_type_template_id_5bb97d84_render,EditPreventivevue_type_template_id_5bb97d84_staticRenderFns,!1,null,null,null)
/* harmony default export */,EditPreventive=component.exports,SpaceAssetMultiChooser=__webpack_require__(673362),NewWorkOrdervue_type_template_id_07b64f8c_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibilityState,fullscreen:!0,"custom-class":"fc-dialog-form fc-dialog-right","show-close":!1,"close-on-click-modal":!1,"before-close":_vm.handleClose},on:{"update:visible":function($event){_vm.visibilityState=$event},close:_vm.close}},[_c("span",{attrs:{slot:"title"},slot:"title"},[_c("el-row",{staticClass:"form-header"},[_c("el-col",{attrs:{span:12}},[_c("el-dropdown",{attrs:{trigger:"click"},on:{command:_vm.switchForm}},[_c("span",{staticClass:"el-dropdown-link form-title"},[_vm._v(" "+_vm._s(_vm.activeForm.label)+" "),_c("i",{staticClass:"el-icon-arrow-down down-arrow"})]),_c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},_vm._l(_vm.formList,(function(form,index){return form.value!==_vm.activeForm.value?_c("el-dropdown-item",{key:index,attrs:{command:form.value}},[_vm._v(_vm._s(form.label))]):_vm._e()})),1)],1)],1),_c("el-col",{staticClass:"text-right form-label pointer",attrs:{span:12}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.choose_from_temp"))+" "),_c("i",{staticClass:"el-icon-arrow-down down-arrow"})])],1)],1),_c("el-form",{ref:"newWOForm",attrs:{"label-position":"top"},on:{submit:function($event){return $event.preventDefault(),_vm.save.apply(null,arguments)}}},[_c("div",{staticClass:"fc-form-content",staticStyle:{"padding-bottom":"100px","max-height":"85vh"}},[_c("new-workorder-form",{attrs:{assets:_vm.allAssets,model:_vm.newWorkOrder}}),"newPreventiveMaintenance"===_vm.activeForm.value?_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"bold pT15 pB15"},[_vm._v(_vm._s(_vm.$t("common.header.scheduling")))]),_c("q-datetime",{staticClass:"form-item",attrs:{"float-label":"Start Time",type:"datetime"},model:{value:_vm.preventiveForm.startTime,callback:function($$v){_vm.$set(_vm.preventiveForm,"startTime",$$v)},expression:"preventiveForm.startTime"}}),_c("f-schedule",{attrs:{from:_vm.preventiveForm.startTime},model:{value:_vm.preventiveForm.schedule,callback:function($$v){_vm.$set(_vm.preventiveForm,"schedule",$$v)},expression:"preventiveForm.schedule"}}),_c("el-row",{attrs:{gutter:80,align:"middle"}},[_c("el-col",{attrs:{span:12}},[_c("q-select",{staticClass:"form-item",attrs:{"float-label":"Stop repeating after",options:_vm._f("options")(_vm.stopAfterMenu,"label","value"),clearable:!0},model:{value:_vm.preventiveForm.stopAfter,callback:function($$v){_vm.$set(_vm.preventiveForm,"stopAfter",$$v)},expression:"preventiveForm.stopAfter"}})],1),_c("el-col",{attrs:{span:12}},["time"===_vm.preventiveForm.stopAfter?_c("q-datetime",{staticClass:"form-item",attrs:{"float-label":"Stop at",type:"datetime"},model:{value:_vm.preventiveForm.stopAfterTime,callback:function($$v){_vm.$set(_vm.preventiveForm,"stopAfterTime",$$v)},expression:"preventiveForm.stopAfterTime"}}):_vm._e(),"count"===_vm.preventiveForm.stopAfter?_c("q-input",{staticClass:"form-item",attrs:{type:"number","float-label":"Stop at"},model:{value:_vm.preventiveForm.stopAfterCount,callback:function($$v){_vm.$set(_vm.preventiveForm,"stopAfterCount",$$v)},expression:"preventiveForm.stopAfterCount"}}):_vm._e()],1)],1),_c("div",{staticClass:"bold pT30 pB10"},[_vm._v(_vm._s(_vm.$t("common._common.reminders")))]),_vm._l(_vm.reminders,(function(reminder,index){return _c("el-row",{key:index,attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:3}},[_c("div",{staticClass:"q-if-focused text-primary remind-label"},[_c("span",[_vm._v(_vm._s(_vm.$t("common._common.remind")))])])]),_c("el-col",{attrs:{span:6}},[_c("q-select",{staticClass:"form-item",attrs:{options:_vm._f("options")(_vm.reminderType,"label","value")},model:{value:reminder.type,callback:function($$v){_vm.$set(reminder,"type",$$v)},expression:"reminder.type"}})],1),_c("el-col",{attrs:{span:12}},[_c("q-select",{staticClass:"form-item",attrs:{options:_vm._f("options")(_vm.generateReminderOptions(index==_vm.reminders.length-1),"label","value"),clearable:!0},model:{value:reminder.duration,callback:function($$v){_vm.$set(reminder,"duration",$$v)},expression:"reminder.duration"}})],1),_c("el-col",{attrs:{span:3}},[index!=_vm.reminders.length-1?_c("div",{staticClass:"add-entity-btn add-reminder",on:{click:function($event){return _vm.removeReminder(index)}}},[_c("i",{staticClass:"el-icon-circle-close-outline"})]):-1!=reminder.duration?_c("div",{staticClass:"add-entity-btn add-reminder",on:{click:function($event){return _vm.addReminder()}}},[_c("i",{staticClass:"el-icon-circle-plus-outline"})]):_vm._e()])],1)}))],2):_vm._e(),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"bold pB15"},[_vm._v(_vm._s(_vm.$t("common._common.tasks")))]),_vm.taskList.length?_c("div",{staticClass:"col-12 summary-task-content pT15"},[_c("el-collapse",{attrs:{accordion:""}},_vm._l(_vm.taskList,(function(task,index){return _c("el-collapse-item",{key:index,staticClass:"newTaskCollapse",attrs:{name:index}},[_c("template",{slot:"title"},[_c("div",{staticClass:"row task-list"},[_c("div",{staticClass:"col-1 self-center taskstatusdot",staticStyle:{"max-width":"30px"}},[_c("div",{staticClass:"task-dot open"})]),_c("div",{staticClass:"col-9 ellpsis fc-summary-content-row"},[_vm._v(" "+_vm._s(task.subject?task.subject:"")+" ")]),_c("div",{staticClass:"col-1"}),_c("div",{staticClass:"col-1 self-center",on:{click:function($event){return _vm.removeTask(index)}}},[_c("i",{staticClass:"q-icon material-icons destroy",staticStyle:{"font-size":"16px","font-weight":"500"},attrs:{"aria-hidden":"true"}},[_vm._v(_vm._s(_vm.$t("common._common.close")))])])])])],2)})),1)],1):_vm._e(),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showAddTask,expression:"showAddTask"}],staticClass:"pT15"},[_c("new-task-form",{attrs:{assets:_vm.allAssets,model:_vm.newTask,isTask:!0}}),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"flLeft primarybtn mR10"},[_c("el-button",{staticStyle:{"margin-top":"-5px",background:"rgb(57, 178, 194)",color:"white","border-color":"rgb(57, 178, 194)"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:_vm.addTask}},[_vm._v(_vm._s(_vm.$t("common._common.add")))])],1),_c("div",{staticClass:"flLeft primarybtn"},[_c("el-button",{staticStyle:{"margin-top":"-5px"},attrs:{type:"text"},on:{click:_vm.cancelNewTask}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))])],1)])],1),_vm.showAddTask?_vm._e():_c("div",{staticClass:"pT15"},[_c("div",{staticClass:"add-entity-btn",on:{click:_vm.addNewTask}},[_c("i",{staticClass:"el-icon-circle-plus-outline"}),_c("span",[_vm._v(_vm._s(_vm.$t("common._common.add_task")))])])])])],1)]),_c("div",{staticClass:"modal-dialog-footer"},[_c("button",{staticClass:"modal-btn-cancel",attrs:{type:"button"},on:{click:_vm.closeDialog}},[_c("span",[_vm._v(_vm._s(_vm.$t("common._common.cancel")))])]),_c("button",{staticClass:"modal-btn-save",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.$t("common._common._save")))])])])],1)},NewWorkOrdervue_type_template_id_07b64f8c_staticRenderFns=[],vuex_esm=__webpack_require__(420629),NewWorkOrderFormvue_type_template_id_1b4e9145_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"newWorkorderForm"},[_c("el-form",{ref:"ruleForm",attrs:{model:_vm.model,rules:_vm.rules,"label-position":"top"}},[_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{style:{width:_vm.isPlannedWO||_vm.isTemplate?"100%":"65%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor",staticStyle:{color:"#dc7171"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.subject"))+" "),_c("el-input",{staticClass:"form-item",attrs:{placeholder:" ",maxlength:300},model:{value:_vm.model.subject,callback:function($$v){_vm.$set(_vm.model,"subject",$$v)},expression:"model.subject"}})],1)]),_vm.isPlannedWO||_vm.isTemplate?_vm._e():_c("el-col",{staticStyle:{width:"35%"},attrs:{span:8}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.requester"))+" ")]),_c("div",[_c("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",placeholder:"example@domain.com"},model:{value:_vm.model.requester.email,callback:function($$v){_vm.$set(_vm.model.requester,"email",$$v)},expression:"model.requester.email"}},_vm._l(_vm.userlist,(function(user){return _c("el-option",{key:user.email,attrs:{label:user.name,value:user.email}},[_c("span",{staticStyle:{float:"left"}},[_vm._v(_vm._s(user.email))])])})),1)],1)])],1),_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" "),_c("el-input",{ref:"textareaexpand",staticClass:"form-item border-bottom-add",staticStyle:{"white-space":"pre-wrap"},attrs:{autosize:{minRows:2,maxRows:2},type:"textarea"},nativeOn:{keyup:function($event){return _vm.handletextarea.apply(null,arguments)}},model:{value:_vm.model.description,callback:function($$v){_vm.$set(_vm.model,"description",$$v)},expression:"model.description"}})],1)])],1),_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("maintenance.wr_list.category")))]),_c("div",[_c("el-select",{staticClass:"form-item",staticStyle:{width:"100%"},attrs:{placeholder:" "},model:{value:_vm.model.category.id,callback:function($$v){_vm.$set(_vm.model.category,"id",$$v)},expression:"model.category.id"}},_vm._l(_vm.ticketcategory,(function(category){return _c("el-option",{key:category.id,attrs:{label:category.displayName,value:parseInt(category.id)}})})),1)],1)])],1),_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.maintenance_type"))+" ")]),_c("div",[_c("el-select",{staticClass:"form-item down-arrow-height-remove",staticStyle:{width:"100%"},attrs:{placeholder:" "},model:{value:_vm.model.type.id,callback:function($$v){_vm.$set(_vm.model.type,"id",$$v)},expression:"model.type.id"}},_vm._l(_vm.tickettype,(function(type,key){return _c("el-option",{key:key,attrs:{label:type,value:parseInt(key)}})})),1)],1)])],1),!_vm.currentSiteId||_vm.currentSiteId<=0?_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor",staticStyle:{color:"#dc7171"}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.site"))+" ")]),_c("div",[_c("el-select",{staticClass:"form-item down-arrow-height-remove",staticStyle:{width:"100%"},attrs:{disabled:_vm.currentSiteId&&_vm.currentSiteId>0,placeholder:" "},model:{value:_vm.model.siteId,callback:function($$v){_vm.$set(_vm.model,"siteId",$$v)},expression:"model.siteId"}},_vm._l(_vm.site,(function(s){return _c("el-option",{key:s.id,attrs:{label:s.name,value:s.id}})})),1)],1)])],1):_vm._e(),_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.team_staff"))+" ")]),_c("div",{staticStyle:{"border-bottom":"1px solid #d8dce5","padding-bottom":"5px","padding-top":"5px"}},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.model)))]),_c("span",{staticStyle:{float:"right","padding-right":"12px"}},[_c("img",{staticClass:"svg-icon team-down-icon",attrs:{src:__webpack_require__(620955)}})])]),_c("f-assignment",{attrs:{model:_vm.model,siteId:_vm.model.siteId,viewtype:"form"}}),_c("div")],1)],1),_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.space_asset"))+" ")]),_c("div",{staticClass:"add"},[_c("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:_vm.$t("maintenance.wr_list.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.spaceAssetDisplayName,_vm.showSpaceAssetChooser()}},model:{value:_vm.spaceAssetDisplayName,callback:function($$v){_vm.spaceAssetDisplayName=$$v},expression:"spaceAssetDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.visibility=!0}},slot:"suffix"})])],1)])],1),_c("el-row",[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("maintenance.wr_list.priority")))]),_c("div",[_c("el-select",{staticClass:"form-item down-arrow-height-remove",staticStyle:{width:"100%"},attrs:{placeholder:" "},model:{value:_vm.model.priority.id,callback:function($$v){_vm.$set(_vm.model.priority,"id",$$v)},expression:"model.priority.id"}},_vm._l(_vm.ticketpriority,(function(priority,key){return _c("el-option",{key:key,attrs:{label:priority.displayName,value:parseInt(priority.id)}})})),1)],1)])],1),_vm.isPlannedWO?_c("div",[_c("duration",{attrs:{labelClass:"textcolor"},model:{value:_vm.model.duration,callback:function($$v){_vm.$set(_vm.model,"duration",$$v)},expression:"model.duration"}})],1):_c("el-row",[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(_vm.$t("maintenance.wr_list.duedate")))]),_c("f-date-picker",{staticClass:"form-item date-icon-right",staticStyle:{width:"100%"},attrs:{"prefix-icon":"","float-label":"Due Date",type:"datetime"},model:{value:_vm.model.dueDate,callback:function($$v){_vm.$set(_vm.model,"dueDate",$$v)},expression:"model.dueDate"}})],1)],1),_c("el-row",[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.allow_user_wh"))+" ")]),_c("el-checkbox",{staticClass:"pT10",model:{value:_vm.model.isWorkDurationChangeAllowed,callback:function($$v){_vm.$set(_vm.model,"isWorkDurationChangeAllowed",$$v)},expression:"model.isWorkDurationChangeAllowed"}})],1)],1),_vm._l(_vm.customFields,(function(customField,key){return _vm.model.data?_c("el-row",{key:key},[_c("el-col",{staticStyle:{width:"62%"},attrs:{span:18}},[_c("div",{staticClass:"textcolor"},[_vm._v(_vm._s(customField.displayName))]),["NUMBER","DECIMAL"].includes(customField.dataTypeEnum)||["NUMBER","DECIMAL"].includes(customField.dataTypeEnum._name)?_c("el-input",{staticClass:"form-item",attrs:{type:"number",placeholder:" "},model:{value:_vm.model.data[customField.name],callback:function($$v){_vm.$set(_vm.model.data,customField.name,$$v)},expression:"model.data[customField.name]"}}):"DATE"===customField.dataTypeEnum||"DATE"===customField.dataTypeEnum._name?_c("f-date-picker",{staticClass:"form-item",attrs:{type:"date","value-format":"timestamp"},model:{value:_vm.model.data[customField.name],callback:function($$v){_vm.$set(_vm.model.data,customField.name,$$v)},expression:"model.data[customField.name]"}}):"DATE_TIME"===customField.dataTypeEnum||"DATE_TIME"===customField.dataTypeEnum._name?_c("f-date-picker",{staticClass:"form-item",attrs:{type:"datetime","value-format":"timestamp"},model:{value:_vm.model.data[customField.name],callback:function($$v){_vm.$set(_vm.model.data,customField.name,$$v)},expression:"model.data[customField.name]"}}):2===customField.displayTypeInt?_c("el-input",{staticClass:"form-item",attrs:{type:"textarea",autosize:{minRows:1,maxRows:3}},model:{value:_vm.model.data[customField.name],callback:function($$v){_vm.$set(_vm.model.data,customField.name,$$v)},expression:"model.data[customField.name]"}}):_c("el-input",{staticClass:"form-item",attrs:{type:"text",placeholder:" "},model:{value:_vm.model.data[customField.name],callback:function($$v){_vm.$set(_vm.model.data,customField.name,$$v)},expression:"model.data[customField.name]"}})],1)],1):_vm._e()})),_c("wo-space-asset-chooser",{attrs:{visibility:_vm.visibility,query:_vm.quickSearchQuery,filter:_vm.filter},on:{associate:_vm.associate,"update:visibility":function($event){_vm.visibility=$event}}})],2)],1)},NewWorkOrderFormvue_type_template_id_1b4e9145_staticRenderFns=[],FAssignment=__webpack_require__(383274),SpaceAssetChooser=__webpack_require__(372587),FDuration=__webpack_require__(611097),FDatePicker=__webpack_require__(358551),TeamStaffMixin=__webpack_require__(462599),log_map_state=__webpack_require__(766331),NewWorkOrderFormvue_type_script_lang_js={props:["model","customFields","isPlannedWO","isTemplate"],mixins:[TeamStaffMixin/* default */.Z],components:{FAssignment:FAssignment/* default */.Z,WoSpaceAssetChooser:SpaceAssetChooser/* default */.Z,Duration:FDuration/* default */.Z,FDatePicker:FDatePicker/* default */.Z},data:function(){return{visibility:!1,quickSearchQuery:"",spaceAssetDisplayName:"",userlist:[],error:"",asset:{subject:"",description:""},rules:{subject:[{required:!0,message:"Please enter the subject",trigger:"blur"}],description:[{required:!0,message:" ",trigger:"blur"}]},currentSiteId:null,filter:{}}},created:function(){this.$store.dispatch("loadSite"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketStatus","workorder"),this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketstatus:function(state){return state.ticketStatus.workorder},ticketpriority:function(state){return state.ticketPriority},ticketcategory:function(state){return state.ticketCategory},site:function(state){return state.site}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketTypePickList"])),{},{tickettype:function(){return this.getTicketTypePickList()},assignToList:function(){return this.users.concat(this.groups)}}),mounted:function(){this.loadusers(),this.model.resource&&(this.spaceAssetDisplayName=this.model.resource.name),this.currentSiteId=Number(this.$cookie.get("fc.currentSite")),this.currentSiteId=this.currentSiteId&&this.currentSiteId>0?this.currentSiteId:null,this.currentSiteId&&(this.model.siteId=this.currentSiteId),1===this.site.length&&(this.model.siteId=this.site[0].id,this.filter.siteId=this.model.siteId)},watch:{"model.resource":function(val){val&&(this.spaceAssetDisplayName=val.name)},"model.description":function(val){var _this=this;setTimeout((function(){_this.handletextarea()}),50)},"model.siteId":function(val){this.filter.siteId=this.model.siteId}},methods:{handletextarea:function(){var el=this.$refs.textareaexpand;setTimeout((function(){el.$refs.textarea.style.cssText="height:auto",el.$refs.textarea.style.cssText="height:"+el.$refs.textarea.scrollHeight+"px"}),0)},showSpaceAssetChooser:function(){this.visibility=!0},associate:function(selectedObj){this.model.resource=selectedObj,this.spaceAssetDisplayName=selectedObj.name,this.visibility=!1},loadusers:function(){var self=this;self.$http.get("/setup/portalusers").then((function(response){self.userlist=response["data"].users})).catch((function(error){}))}}},forms_NewWorkOrderFormvue_type_script_lang_js=NewWorkOrderFormvue_type_script_lang_js,NewWorkOrderForm_component=(0,componentNormalizer/* default */.Z)(forms_NewWorkOrderFormvue_type_script_lang_js,NewWorkOrderFormvue_type_template_id_1b4e9145_render,NewWorkOrderFormvue_type_template_id_1b4e9145_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewWorkOrderForm=NewWorkOrderForm_component.exports,NewTaskFormvue_type_template_id_4d854bc0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-row",{attrs:{gutter:50,align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"form-item",attrs:{"float-label":"Task Title"},model:{value:_vm.model.subject,callback:function($$v){_vm.$set(_vm.model,"subject",$$v)},expression:"model.subject"}})],1)],1)],1)},NewTaskFormvue_type_template_id_4d854bc0_staticRenderFns=[],NewTaskFormvue_type_script_lang_js={props:["model","assets"],data:function(){return{}},created:function(){this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketStatus","workorder"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},locations:function(state){return state.locations},ticketstatus:function(state){return state.ticketStatus.workorder},ticketpriority:function(state){return state.ticketPriority},ticketcategory:function(state){return state.ticketCategory}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}}))},forms_NewTaskFormvue_type_script_lang_js=NewTaskFormvue_type_script_lang_js,NewTaskForm_component=(0,componentNormalizer/* default */.Z)(forms_NewTaskFormvue_type_script_lang_js,NewTaskFormvue_type_template_id_4d854bc0_render,NewTaskFormvue_type_template_id_4d854bc0_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewTaskForm=NewTaskForm_component.exports,picklist=__webpack_require__(961358),NewWorkOrdervue_type_script_lang_js={props:["visibility","defaultForm"],components:{QInput:quasar_esm/* QInput */.Ke,QSelect:quasar_esm/* QSelect */.zO,QDatetime:quasar_esm/* QDatetime */.fB,FSchedule:FSchedule/* default */.Z,"new-workorder-form":NewWorkOrderForm,"new-task-form":NewTaskForm},data:function(){return{assets:[],visibilityState:this.visibility,activeForm:{label:this.$t("maintenance.wr_list.new_wo"),value:"newWorkOrder"},formList:[{label:this.$t("maintenance.wr_list.new_wo"),value:"newWorkOrder"},{label:this.$t("maintenance.wr_list.new_wo_template"),value:"newWorkOrderTemplate"},{label:this.$t("maintenance.wr_list.new_pm"),value:"newPreventiveMaintenance"}],newWorkOrder:{requester:{email:""},subject:"",description:"",space:{id:""},asset:{id:""},category:{id:""},type:{id:""},priority:{id:""},assignedTo:{id:""},assignmentGroup:{id:""},dueDate:null},preventiveForm:{startTime:new Date,schedule:null,stopAfter:"never",stopAfterTime:"",stopAfterCount:1},reminders:[],stopAfterMenu:[{label:"Never",value:"never"},{label:"Time",value:"time"},{label:"Count",value:"count"}],reminderType:[{label:"Before",value:1},{label:"After",value:2}],taskList:[],showAddTask:!1,newTask:{subject:"",space:{id:-1},asset:{id:-1},isReadingTask:!1,readingFieldId:-1},allAssets:[]}},created:function(){this.loadAssetPickListData(),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadTicketStatus","workorder"),this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadGroups")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},ticketstatus:function(state){return state.ticketStatus.workorder},ticketpriority:function(state){return state.ticketPriority},ticketcategory:function(state){return state.ticketCategory}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),watch:{visibility:function(newVal){this.visibilityState=newVal},defaultForm:function(){this.defaultForm&&this.switchForm(this.defaultForm)}},mounted:function(){this.defaultForm&&this.switchForm(this.defaultForm),this.addReminder()},methods:{loadAssetPickListData:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"asset",skipDeserialize:!0}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this.$message.error(error.message||"Error Occured"):_this.assets=options;case 6:case"end":return _context.stop()}}),_callee)})))()},switchForm:function(formName){this.activeForm=this.formList.find((function(form){return form.value===formName}))},close:function(){},closeDialog:function(){this.visibilityState=!1,this.handleClose()},handleClose:function(done){var newpath=this.$route.path.replace("/new","");this.$router.replace({path:newpath}),this.newWorkOrder={requester:{email:""},subject:"",description:"",space:{id:""},asset:{id:""},category:{id:""},type:{id:""},priority:{id:""},assignedTo:{id:""},assignmentGroup:{id:""},dueDate:null},this.preventiveForm={startTime:new Date,schedule:null,stopAfter:"never",stopAfterTime:"",stopAfterCount:1},this.taskList=[],this.showAddTask=!1},addNewTask:function(){this.newTask={subject:"",space:{id:-1},asset:{id:-1},isReadingTask:!1,readingFieldId:-1},this.showAddTask=!0},addTask:function(){this.newTask.subject?(this.taskList.push(this.newTask),this.newTask={subject:"",space:{id:-1},asset:{id:-1},isReadingTask:!1,readingFieldId:-1},this.showAddTask=!1):this.$message({message:this.$t("common._common.task_title_required"),type:"error"})},cancelNewTask:function(){this.showAddTask=!1},removeTask:function(index){this.taskList.splice(index,1)},expand:function(expandTask){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.taskList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var taskEntry=_step.value;taskEntry.expand=!1}}catch(err){_iterator.e(err)}finally{_iterator.f()}expandTask.expand=!0},save:function(){var workorder=this.newWorkOrder;workorder.dueDate&&(workorder.dueDate=new Date(workorder.dueDate).getTime()),workorder.space.id||delete workorder.space,workorder.asset.id||delete workorder.asset,workorder.category.id||delete workorder.category,workorder.priority.id||delete workorder.priority,workorder.assignmentGroup.id||delete workorder.assignmentGroup,workorder.assignedTo.id||delete workorder.assignedTo,workorder.dueDate||delete workorder.dueDate;var formdata={};if(formdata.workorder=workorder,formdata.requester=workorder.requester,formdata.tasks=this.taskList,"newWorkOrder"===this.activeForm.value)this.saveWorkOrder(formdata);else if("newWorkOrderTemplate"===this.activeForm.value)this.saveWorkOrderTemplate(formdata);else if("newPreventiveMaintenance"===this.activeForm.value){var preventiveFormData={},trigger={};preventiveFormData.title=formdata.workorder.subject,trigger.startTime=new Date(this.preventiveForm.startTime).getTime(),trigger.schedule=this.preventiveForm.schedule,preventiveFormData.triggers=[],preventiveFormData.triggers.push(trigger);for(var reminderList=[],idx=0;idx<this.reminders.length;idx++)-1!==this.reminders[idx].duration&&reminderList.push(this.reminders[idx]);formdata.reminders=reminderList,"time"===this.preventiveForm.stopAfter?preventiveFormData.endTime=new Date(this.preventiveForm.stopAfterTime).getTime():"count"===this.preventiveForm.stopAfter&&(preventiveFormData.maxCount=this.preventiveForm.stopAfterCount),formdata.preventivemaintenance=preventiveFormData,this.savePreventiveMaintenance(formdata)}},saveWorkOrder:function(formdata){var saveurl="/workorder/add",self=this;self.$http.post(saveurl,formdata).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(response.data.workorder&&self.$store.state.workorder.workorders.splice(0,0,response.data.workorder),self.$message({message:this.$t("common.wo_report.workorder_created_success"),type:"success"}),self.closeDialog()):self.$message({message:this.$t("common.wo_report.workorder_creation_failed"),type:"error"})})).catch((function(error){self.$message({message:this.$t("common.wo_report.workorder_creation_failed"),type:"error"})}))},saveWorkOrderTemplate:function(formdata){var saveurl="/workorder/saveTemplate",self=this;self.$http.post(saveurl,formdata).then((function(response){self.$message({message:this.$t("common._common.workorder_template_created_successfully"),type:"success"}),self.closeDialog()})).catch((function(error){error&&self.$message({message:this.$t("common._common.workorder_template_creation_failed"),type:"error"})}))},savePreventiveMaintenance:function(formdata){var saveurl="/workorder/addPreventiveMaintenance",self=this;self.$http.post(saveurl,formdata).then((function(response){self.$message({message:this.$t("common.wo_report.preventive_maintenance_creation_failed"),type:"success"}),self.closeDialog()})).catch((function(error){self.$message({message:this.$t("common.wo_report.preventive_maintenance_creation_failed"),type:"error"})}))},generateReminderOptions:function(isNever){var options=[];isNever&&options.push({label:"Never",value:-1});for(var i=1;i<24;i++)options.push({label:i+(1===i?" Hour":" Hours"),value:3600*i});for(var _i=1;_i<32;_i++)options.push({label:_i+(1===_i?" Day":" Days"),value:24*_i*3600});return options},addReminder:function(){this.reminders.push({duration:-1,type:1})},removeReminder:function(index){this.reminders.splice(index,1)}}},dialogs_NewWorkOrdervue_type_script_lang_js=NewWorkOrdervue_type_script_lang_js,NewWorkOrder_component=(0,componentNormalizer/* default */.Z)(dialogs_NewWorkOrdervue_type_script_lang_js,NewWorkOrdervue_type_template_id_07b64f8c_render,NewWorkOrdervue_type_template_id_07b64f8c_staticRenderFns,!1,null,null,null)
/* harmony default export */,NewWorkOrder=NewWorkOrder_component.exports,vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),DeprecatedCommonLayout=__webpack_require__(714218),FPagination=__webpack_require__(929593),Search=__webpack_require__(718452),Tags=__webpack_require__(482912),router=__webpack_require__(329435),validation=__webpack_require__(586529),NewPmListvue_type_script_lang_js={components:{UserAvatar:User/* default */.Z,EditPreventive:EditPreventive,SpaceAssetMultiChooser:SpaceAssetMultiChooser/* default */.Z,NewWorkOrderNew:NewWorkOrder,CommonListLayout:DeprecatedCommonLayout/* default */.Z,Pagination:FPagination/* default */.Z,Search:Search/* default */.Z,Tags:Tags/* default */.Z},directives:{infiniteScroll:vue_infinite_scroll_default()},data:function(){return{cancelExecutionConfig:!1,resources:[],selectAllResources:!1,searchQuery:"",showExecutionConfig:!1,currenPMId:null,multiExecLoading:!1,filter:{},searchTextfield:"",loading:!1,selectAll:!1,newViewName:"",idsResource:[],actions:{activate:{loading:!1},deactivate:{loading:!1},delete:{loading:!1},executePM:{loading:!1,multiExecLoading:!1}},resourceData:{},siteId:null,selectedPmId:"",isMultiResource:this.isAsset,selectedPreventive:[],preventiveList:[],resourceQuery:null,chooserVisibility:!1,upcomingPreventiveList:[],fetchingMore:!1,nextPage:1,hasMorePages:!1,perPage:50,emptyName:{name:"Unknow"},selectedPmObj:[],listCount:"",defaultFilter:"title",filterConfig:{moduleName:"preventivemaintenance",path:"/app/wo/planned/",data:{title:{label:"Title",displayType:"string",value:""},id:{label:this.$t("maintenance._workorder.pm_id"),displayType:"number"},category:{label:this.$t("maintenance.wr_list.category"),displayType:"select",options:{},value:[],key:"categoryId"},siteId:{label:"Site",options:{},value:[],displayType:"lookup",key:"siteId"},resourceIdSpace:{label:this.$t("maintenance._workorder.space"),displayType:"lookup",options:{},value:[],key:"resourceIdSpace"},resourceIdAsset:{label:this.$t("maintenance._workorder.asset"),displayType:"lookup",options:{},value:[],key:"resourceIdAsset"},assignedTo:{label:this.$t("maintenance.wr_list.staff/team"),displayType:"select",options:{},value:[],key:"assignedToId"},ticketType:{label:this.$t("maintenance.wr_list.type"),displayType:"select",options:{},value:[],key:"typeId",views:["all","active","inactive"]},frequency:{label:this.$t("maintenance._workorder.frequency"),displayType:"select",operatorId:9,options:this.$constants.FACILIO_FREQUENCY,value:[]},priority:{label:this.$t("maintenance.wr_list.priority"),displayType:"select",options:{},key:"priorityId",value:[]}},availableColumns:["title","category","priority","frequency","ticketType","assignedTo","asset","space","resourceIdAsset","resourceIdSpace",this.$helpers.isLicenseEnabled("TENANTS")?"tenant":""],fixedCols:["title"],saveView:!0,includeParentCriteria:!0,
// Temporary
disableColumnCustomization:!0}}},mounted:function(){this.loadPreventiveList(),this.loadPMCount()},created:function(){if(this.$store.dispatch("loadTicketType"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadBuildings"),this.$helpers.isLicenseEnabled("TENANTS")){var tenantObj={label:"Tenant",displayType:"select",options:{},value:[],key:"tenantId"};this.$set(this.filterConfig.data,"tenant",tenantObj)}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({currentViewDetail:function(state){return state.view.currentViewDetail},assetCategory:function(state){return state.assetCategory},showSearch:function(state){return state.search.active},currentTab:function(state){return state.webtabs.selectedTab}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketTypePickList","getSpaceCategoryPickList","getUser","getBuildingsPickList","getGroup"])),(0,vuex_esm/* mapGetters */.Se)("webtabs",["tabHasPermission"])),{},{buildingList:function(){return this.getBuildingsPickList()},tickettype:function(){return this.getTicketTypePickList()},showLoading:function(){return this.loading||this.$store.state.view.detailLoading},spacecategory:function(){return this.getSpaceCategoryPickList()},scrollDisabled:function(){return this.fetchingMore||!this.hasMorePages||this.loading},page:function(){return this.$route.query.page||1},showCreateNewDialog:function(){return!!this.$route.query.create},showEditPreventiveDialog:function(){return!!this.$route.query.edit},currentView:function(){var viewName=this.$attrs.viewname||this.$route.params.viewname;return viewName||"all"},filters:function(){return this.$route.query.search?JSON.parse(this.$route.query.search):null},search:function(){return this.$route.query.searchText?this.$route.query.searchText:null},includeParentFilter:function(){return this.$route.query.includeParentFilter&&("true"===this.$route.query.includeParentFilter||!0===this.$route.query.includeParentFilter)},moduleName:function(){return"preventivemaintenance"},viewName:function(){var viewList={all:"All Preventive Maintenance",active:"Active Preventive Maintenance",preventive:"Preventive Maintenance",corrective:"Corrective Preventive Maintenance",rounds:"Rounds Preventive Maintenance",breakdown:"Breakdown Preventive Maintenance",compliance:"Compliance Preventive Maintenance",upcoming:"Upcoming Preventive Maintenance",inactive:"Inactive Preventive Maintenance"},title=this.$getProperty(viewList,this.currentView,null);return title||"Planned Maintenance"},hasCreatePMv1Permission:function(){if((0,router/* isWebTabsEnabled */.tj)()){var currentTab=this.currentTab,tabHasPermission=this.tabHasPermission;return tabHasPermission("CREATE",currentTab)}var $hasPermission=this.$hasPermission;return $hasPermission("planned:CREATE")}}),watch:{currentView:function(newVal,oldVal){oldVal!==newVal&&(this.resetPagination(),this.loadPreventiveList(),this.loadPMCount(),this.selectAll=!1,this.selectedPreventive=[])},filters:function(){this.resetPagination(),this.loadPreventiveList(),this.loadPMCount(),this.selectAll=!1,this.selectedPreventive=[]},search:function(){this.resetPagination(),this.loadPreventiveList(),this.selectAll=!1,this.selectedPreventive=[]},page:function(newVal,oldVal){oldVal!==newVal&&(this.loadPreventiveList(),this.selectAll=!1,this.selectedPreventive=[])},selectAll:function(val){var self=this;val?(this.selectedPreventive=[],this.preventiveList.filter((function(preventive){self.selectedPreventive.push(preventive.id)}))):this.selectedPreventive.length===this.preventiveList.length&&(this.selectedPreventive=[])}},methods:{selected:function(val){for(var i=0;i<this.resources.length;i++)this.searchQuery.trim()&&!this.resources.name.trim().toLowerCase().startsWith(this.searchQuery.trim().toLowerCase())||(this.resources[i].selected=val);this.$forceUpdate()},loadResourcePlanner:function(id){return this.$http.get("v2/workorders/pmResourcePlanner?id=".concat(id))},forceUpdate:function(){this.$forceUpdate()},selectPmList:function(selectedpm){this.selectedPmObj=selectedpm,this.selectedPreventive=selectedpm.map((function(value){return value.id}))},resourceLabel:function(_ref){var assignmentType=_ref.assignmentType,spaceCategoryId=_ref.spaceCategoryId,assetCategoryId=_ref.assetCategoryId,resources=_ref.resources,buildingId=_ref.buildingId,buildingName=this.buildingList[buildingId];return 1===assignmentType?resources&&resources.length?buildingName?"".concat(buildingName," - ").concat(resources.length," Floors"):"".concat(resources.length," Floors"):buildingName?"".concat(buildingName," - All Floors"):"All Floors":3===assignmentType?resources&&resources.length?buildingName?"".concat(buildingName," - ").concat(resources.length," ").concat(this.spacecategory[Number(spaceCategoryId)]):"".concat(resources.length," ").concat(this.spacecategory[Number(spaceCategoryId)]):buildingName?"".concat(buildingName," - All ").concat(this.spacecategory[Number(spaceCategoryId)]):"All ".concat(this.spacecategory[Number(spaceCategoryId)]):4===assignmentType?resources&&resources.length?buildingName?"".concat(buildingName," - ").concat(resources.length," ").concat(this.assetCategory.find((function(i){return i.id===Number(assetCategoryId)})).displayName):"".concat(resources.length," ").concat(this.assetCategory.find((function(i){return i.id===Number(assetCategoryId)})).displayName):buildingName?"".concat(buildingName," - All ").concat(this.assetCategory.find((function(i){return i.id===Number(assetCategoryId)})).displayName):"All ".concat(this.assetCategory.find((function(i){return i.id===Number(assetCategoryId)})).displayName):"---"},resetPagination:function(){this.nextPage=1,this.fetchingMore=!1,this.hasMorePages=!1,this.preventiveList=[],this.upcomingPreventiveList=[]},loadMore:function(){this.scrollDisabled||(this.fetchingMore=!0,this.loadPreventiveList())},openSummary:function(id,pmCreationType){if(id)if((0,router/* isWebTabsEnabled */.tj)()){var currentView=this.currentView,moduleName=this.moduleName,_ref2=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref2.name;name&&this.$router.push({name:name,params:{viewname:currentView,pmCreationType:pmCreationType,id:id}})}else pmCreationType&&"MULTI_SITE"===pmCreationType?this.$router.push({path:"multisummary/"+id}):this.$router.push({path:"summary/"+id})},associateResource:function(selectedObj){this.selectedResource=selectedObj,this.selectedResourceList=selectedObj.resourceList,this.isIncludeResource=selectedObj.isInclude;var fieldName,url,data={};url="/workorder/addBulkPreventiveMaintenance";var self=this;this.selectedResourceList?(fieldName=this.isIncludeResource?"includedResources":"excludedResources",this.idsResource=this.selectedResourceList.map((function(resource){return resource.id})),data.assetids=this.idsResource,data.type=fieldName,data.pmId=this.selectedPmId,data.categoryId=this.resourceData.assetCategory,self.$http.post(url,data).then((function(){self.nextPage=1,self.loadPreventiveList()}))):(this.selectedResource=selectedObj,this.selectedResourceList=selectedObj.resourceList,this.isIncludeResource=selectedObj.isInclude,url="/workorder/addBulkPreventiveMaintenance",this.selectedResourceList?(fieldName=this.isIncludeResource?"includedResources":"excludedResources",this.idsResource=this.selectedResourceList.map((function(resource){return resource.id})),data.assetids=this.idsResource,data.type=fieldName,data.pmId=this.selectedPmId,data.categoryId=this.resourceData.assetCategory,self.$http.post(url,data).then((function(){self.nextPage=1,self.loadPreventiveList()}))):(fieldName="all",data.type=fieldName,data.pmId=this.selectedPmId,data.categoryId=this.resourceData.assetCategory,self.$http.post(url,data).then((function(){self.nextPage=1,self.loadPreventiveList()})))),this.chooserVisibility=!1,this.filter={},this.resourceQuery=null},loadPreventiveList:function(){var _this=this,url="/planned/".concat(this.currentView);url+="?page=".concat(this.page,"&perPage=").concat(this.perPage),this.filters&&(url+="&filters=".concat(encodeURIComponent(JSON.stringify(this.filters))),this.includeParentFilter&&(url+="&includeParentFilter=true")),this.search&&(url+="&search=".concat(this.search)),this.loading=!0,this.$http.get(url).then((function(response){response.data&&(_this.page,_this.preventiveList=response.data),_this.loading=!1}))},loadPMCount:function(){var _this2=this,url1="/planned/pmCount?viewName=".concat(this.currentView);this.filters&&(url1+="&filters=".concat(encodeURIComponent(JSON.stringify(this.filters))),this.includeParentFilter&&(url1+="&includeParentFilter=true")),this.search&&(url1+="&search=".concat(this.search)),url1+="&count=true",this.$http.get(url1).then((function(_ref3){var data=_ref3.data;data&&(_this2.listCount=data.woCount)})).catch((function(error){}))},handleMoreActions:function(cmd){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var id,moduleName,_ref4,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if("deactivate"!==cmd.action){_context.next=4;break}_this3.changePMStatus(cmd.data.id,0),_context.next=21;break;case 4:if("activate"!==cmd.action){_context.next=8;break}_this3.changePMStatus(cmd.data.id,1),_context.next=21;break;case 8:if("executePMs"!==cmd.action){_context.next=20;break}if(id=cmd.data.id,_this3.currenPMId=id,3!==cmd.data.pmCreationType){_context.next=17;break}return _this3.resources=[],_context.next=15,_this3.loadResourcePlanner(id).then((function(response){var resourcePlanners=response.data.resourcePlanners;resourcePlanners.forEach((function(r){_this3.resources.push({id:r.resourceId,name:r.resourceName})}))}));case 15:return _this3.showExecutionConfig=!0,_context.abrupt("return");case 17:2===cmd.data.pmCreationType?(_this3.actions.executePM.loading=!0,_this3.$http.get("/workorder/getMultiplePMResources?pmId=".concat(cmd.data.id)).then((function(resp){resp.data&&resp.data.multiPmResources&&(_this3.currenPMId=cmd.data.id,_this3.resources=resp.data.multiPmResources||[],_this3.selectAllResources=!1,_this3.actions.executePM.multiExecLoading=!1,_this3.showExecutionConfig=!0),_this3.actions.executePM.loading=!1}))):_this3.executPMs(id),_context.next=21;break;case 20:"delete"===cmd.action?_this3.deletePreventive([cmd.data.id]):"applyTo"===cmd.action?(_this3.selectedPmId=cmd.data.id,cmd.data.woTemplate.resource&&(_this3.resourceData={assetCategory:cmd.data.woTemplate.resource.category.id}),cmd.data.siteId&&cmd.data.siteId>0&&(_this3.filter.siteId=cmd.data.siteId),_this3.chooserVisibility=!0):"edit"===cmd.action&&((0,router/* isWebTabsEnabled */.tj)()?(moduleName=_this3.moduleName,_ref4=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.EDIT)||{},name=_ref4.name,name&&_this3.$router.push({name:name,params:{id:cmd.data.id}})):"MULTI_SITE"===cmd.data.pmCreationTypeEnum?_this3.$router.push({path:"/app/wo/multiplanned/new",query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this3.$route.query),{},{edit:"".concat(cmd.data.id)})}):_this3.$router.push({path:"/app/wo/planned/new",query:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this3.$route.query),{},{edit:"".concat(cmd.data.id)})}));case 21:case"end":return _context.stop()}}),_callee)})))()},getPMType:function(type){return this.tickettype[type]},changePMStatus:function(id,status,message){var self=this,url="/workorder/changePreventiveMaintenanceStatus",formdata={};Array.isArray(id)?formdata.id=id:formdata.id=[id],formdata.preventivemaintenance={status:status},self.actions.delete.loading=!0,self.$http.post(url,formdata).then((function(){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(formdata.id);try{var _loop=function(){var pmid=_step.value,idx=self.preventiveList.indexOf(self.preventiveList.find((function(pm){return pm.id===pmid})));"all"!==self.currentView?self.preventiveList.splice(idx,1):(self.preventiveList[idx].status=status,self.toggleSelection(pmid))};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}message&&self.$message({message:message,type:"success"}),self.selectAll=!1})).catch((function(error){var message=self.$getProperty(error,"data.message","Status Change of Planned maintenance failed!");self.$message({message:message,type:"error"}),self.selectAll=!1})),self.actions.delete.loading=!1},toggleSelection:function(id){var idx=this.selectedPreventive.indexOf(id);-1===idx?this.selectedPreventive.push(id):this.selectedPreventive.splice(idx,1)},prettyScheduleObject:function(scheduleObj){if(!scheduleObj)return"---";var prettyStr="";if("DAILY"===scheduleObj.frequencyTypeEnum)prettyStr="Every "+(1===scheduleObj.frequency?"day":scheduleObj.frequency+" days");else if("WEEKLY"===scheduleObj.frequencyTypeEnum){prettyStr="Every "+(1===scheduleObj.frequency?"week":scheduleObj.frequency+" weeks");var days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];prettyStr+=" on ";for(var i=0;i<scheduleObj.values.length;i++)0!==i&&(prettyStr+=","),prettyStr+=days[i+1]}else if("MONTHLY_DAY"===scheduleObj.frequencyTypeEnum){prettyStr="Every "+(1===scheduleObj.frequency?"month":scheduleObj.frequency+" months"),prettyStr+=" on ";for(var _i=0;_i<scheduleObj.values.length;_i++)0!==_i&&(prettyStr+=","),prettyStr+=scheduleObj.values[_i]+this.nth(scheduleObj.values[_i])}else if("MONTHLY_WEEK"===scheduleObj.frequencyTypeEnum){prettyStr="Every "+(1===scheduleObj.frequency?"month":scheduleObj.frequency+" months"),prettyStr+=" on (";var weeks=["First","Second","Third","Fourth","Last"],_days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];prettyStr+=weeks[scheduleObj.weekFrequency-1]+" week",prettyStr+=" - ";for(var _i2=0;_i2<scheduleObj.values.length;_i2++)0!==_i2&&(prettyStr+=","),prettyStr+=_days[_i2+1];prettyStr+=")"}else if("YEARLY"===scheduleObj.frequencyTypeEnum){prettyStr="Every "+(1===scheduleObj.frequency?"year":scheduleObj.frequency+" years"),prettyStr+=" on ";for(var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_i3=0;_i3<scheduleObj.values.length;_i3++){0!==_i3&&(prettyStr+=",");var j=scheduleObj.values[_i3];prettyStr+=months[j-1]}}return prettyStr},nth:function(d){if(d>3&&d<21)return"th";switch(d%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},activate:function(id){this.changePMStatus(id,1),this.selectedPreventive=[]},deactivate:function(id){this.actions.delete.loading=!0,this.changePMStatus(id,0,this.$t("maintenance.pm_list.pm_deactivate_success")),this.selectedPreventive=[]},deletePreventive:function(ids,index){var self=this;self.$dialog.confirm({title:self.$t("maintenance.pm_list.pm_delete_title"),message:self.$t("maintenance.pm_list.pm_delete_body"),rbDanger:!0,rbLabel:self.$t("common._common.delete")}).then((function(value){value&&self.$http.post("/workorder/deletepm",{id:ids}).then((function(response){response.data&&"object"===(0,esm_typeof/* default */.Z)(response.data)&&(self.$message({message:self.$t("maintenance.pm_list.pm_delete_success"),type:"success"}),self.nextPage=1,self.loadPreventiveList(),"upcoming"===self.currentView?self.upcomingPreventiveList.splice(index,1):self.preventiveList.splice(index,1)),self.selectAll=!1})).catch((function(error){var message=self.$getProperty(error,"data.message","Deletion of Planned maintenance failed!");self.$message({message:message,type:"error"}),self.selectAll=!1}))}))},executPMs:function(id,resources){var self=this;resources?self.actions.executePM.multiExecLoading=!0:self.actions.executePM.loading=!0;var data={};data.pmId=id,data.pmIncludeExcludeResourceContexts=this.resources.filter((function(i){return i.selected})).map((function(k){return{resourceId:k.id,pmId:id,isInclude:!0}})),self.$http.post("/workorder/executePreventiveMaintenance",data).then((function(){self.multiExecLoading=!1,self.$message({message:self.$t("maintenance.pm_list.pm_success"),type:"success"}),self.actions.executePM.loading=!1,self.actions.executePM.multiExecLoading=!1,self.showExecutionConfig=!1,self.selectedPreventive=[]})).catch((function(){self.$message({message:self.$t("maintenance.pm_list.pm_failure"),type:"error"}),self.actions.executePM.multiExecLoading=!1}))},indexMethod:function(index){return 2*index},redirectToFormCreation:function(){if((0,router/* isWebTabsEnabled */.tj)()){var moduleName=this.moduleName,_ref5=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.CREATE)||{},name=_ref5.name;name&&this.$router.push({name:name})}else this.$helpers.isLicenseEnabled("MULTISITEPM")?this.$router.push({path:"/app/wo/multiplanned/new"}):this.$router.push({path:"/app/wo/planned/new"})},getSitesAsString:function(siteObjects){var sitesString="";return(0,validation/* isEmpty */.xb)(siteObjects)?sitesString="---":siteObjects.forEach((function(site){sitesString+=site.name,site.id!=siteObjects[siteObjects.length-1].id&&(sitesString+="\n")})),sitesString},getSitesMessage:function(siteObjects){if((0,validation/* isEmpty */.xb)(siteObjects))return"---";var siteCount=siteObjects.length;return 0===siteCount.length?"---":1===siteCount?siteObjects[0].name:2===siteCount?siteObjects[0].name+" + 1 site":siteObjects[0].name+" + "+(siteCount-1)+" sites"}}},v1_NewPmListvue_type_script_lang_js=NewPmListvue_type_script_lang_js,NewPmList_component=(0,componentNormalizer/* default */.Z)(v1_NewPmListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,NewPmList=NewPmList_component.exports},
/***/583972:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3aed7174c314bbc14fee9c5cd51e20fa.svg";
/***/},
/***/620955:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"3feba09e23b73ae14f127291e5aab046.svg";
/***/},
/***/7634:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"a9487fe98c87670f4c21aa6dfd4aef8d.svg";
/***/},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/73477.js.map