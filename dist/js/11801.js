(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[11801],{
/***/111801:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FacilioWebForm}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FacilioWebForm.vue?vue&type=template&id=c510cdf4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("div",{staticClass:"mT50 fc-webform-loading"},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_c("div",[_vm.editObj&&_vm.editObj.customTitle?_c("div",{staticClass:"fc-pm-main-content-H"},[_vm._v(" "+_vm._s(_vm.editObj.customTitle)+" "),_c("div",{staticClass:"fc-heading-border-width43 mT15"})]):_vm.title?_c("div",{staticClass:"fc-pm-main-content-H"},[_vm._v(" "+_vm._s(_vm.title)+" "),_c("div",{staticClass:"fc-heading-border-width43 mT15"})]):_vm._e(),_c("el-form",{ref:"newRecordForm",attrs:{disabled:_vm.disableForm,"label-position":_vm.labelPosition,model:_vm.model,rules:_vm.rules},on:{submit:function($event){return $event.preventDefault(),_vm.save.apply(null,arguments)}}},[_vm._l(_vm.sections,(function(section,sidx){return _c("div",{key:sidx,attrs:{id:_vm.name?"section-"+sidx:null}},_vm._l(section.fields,(function(r,fidx){return _c("el-row",{key:fidx,staticClass:"fc-web-form-row",attrs:{gutter:20}},_vm._l(section.fields[fidx],(function(element,index){return _c("el-col",{key:index,staticClass:"fc-web-form-input-col",attrs:{span:_vm.span(_vm.labelPosition,element.span)}},[element.displayTypeEnum?_c("el-form-item",{class:element.displayTypeEnum,attrs:{label:element.displayName,required:element.required,"label-width":"150px",prop:element.parent?element.parent+"."+element.name:element.name}},["TEXTBOX"===element.displayTypeEnum&&element.parent?_c("el-input",{staticClass:"fc-input-full-border2 width575px",attrs:{placeholder:"Enter "+element.displayName},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}}):"TEXTBOX"===element.displayTypeEnum&&("workOrder"===element.name&&"inventoryRequestWOForm"===_vm.name||"email"===element.name&&_vm.editObj&&"contactForm"===_vm.name)?_c("el-input",{staticClass:"fc-input-full-border2 width575px",attrs:{disabled:!0,placeholder:"Enter "+element.displayName},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"TEXTBOX"===element.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border2 width575px",attrs:{placeholder:"Enter "+element.displayName},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"LONG_DESC"===element.displayTypeEnum?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-s-order pointer edit-icon-color",attrs:{"data-arrow":"true",title:_vm.$t("common.header.add_long_description")},on:{click:function($event){_vm.addLongDescriptionVisibility=!0}}}):"TEXTAREA"===element.displayTypeEnum&&element.parent?_c("el-input",{staticClass:"fc-input-full-border-textarea width575px",attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"Type your "+element.displayName,resize:"none"},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}}):"TEXTAREA"===element.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border-textarea width575px",attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"Type your "+element.displayName,resize:"none"},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"NUMBER"!==element.displayTypeEnum&&"DECIMAL"!==element.displayTypeEnum||!element.parent?"NUMBER"===element.displayTypeEnum||"DECIMAL"===element.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border2 width575px",attrs:{type:"number",min:0},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"DECISION_BOX"!==element.displayTypeEnum||!_vm.editObj||"Edit Tool Type"!==_vm.editObj.customTitle&&"Edit Item Type"!==_vm.editObj.customTitle||"isRotating"!==element.name?"DECISION_BOX"===element.displayTypeEnum&&"item_types_form"===_vm.name&&"isConsumable"===element.name?_c("el-checkbox",{attrs:{disabled:!_vm.model["isRotating"]},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"DECISION_BOX"===element.displayTypeEnum&&"item_types_form"===_vm.name&&"isRotating"===element.name?_c("el-checkbox",{on:{change:function($event){return _vm.isRotatingChangeActions()}},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"DECISION_BOX"===element.displayTypeEnum&&element.parent?_c("el-checkbox",{model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}}):"DECISION_BOX"===element.displayTypeEnum?_c("el-checkbox",{model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"DATE"===element.displayTypeEnum&&element.parent?_c("el-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{type:"date"},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}}):"DATE"===element.displayTypeEnum?_c("el-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{type:"date"},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"DATETIME"===element.displayTypeEnum&&element.parent?_c("el-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{type:"datetime"},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}}):"DATETIME"!==element.displayTypeEnum||"reservationForm"!==_vm.name||"scheduledEndTime"!==element.name&&"scheduledStartTime"!==element.name?"DATETIME"===element.displayTypeEnum?_c("el-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{type:"datetime"},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"TIME"===element.displayTypeEnum&&element.parent?_c("el-time-picker",{staticClass:"fc-input-full-border-select2 width575px",attrs:{format:"HH:mm","value-format":"timestamp",placeholder:element.displayName},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}}):"TIME"===element.displayTypeEnum?_c("el-time-picker",{staticClass:"fc-input-full-border-select2 width575px",attrs:{format:"HH:mm","value-format":"timestamp",placeholder:element.displayName},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):"URGENCY"===element.displayTypeEnum?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:""},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}},_vm._l(element.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):element.options&&element.parent&&_vm.model[element.parent][element.name]&&_vm.editObj&&_vm.editObj[element.parent]&&_vm.editObj[element.parent].disabled?_c("div",[element.options&&element.parent?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{disabled:""},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},_vm._l(element.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:String(option.value)}})})),1):_vm._e()],1):element.options&&"vendor"===element.parent&&_vm.model[element.parent][element.name]&&("purchaseRequestForm"===_vm.name||"purchaseOrderForm"===_vm.name||"purchaseContractForm"===_vm.name)?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",clearable:!element.required},on:{change:function($event){return _vm.vendorChangeActions(_vm.model[element.parent][element.name])}},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},_vm._l(element.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):element.options&&"storeRoom"===element.parent&&_vm.model[element.parent][element.name]&&("purchaseRequestForm"===_vm.name||"purchaseOrderForm"===_vm.name)?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",clearable:!element.required},on:{change:function($event){return _vm.storeRoomChangeActions(_vm.model[element.parent][element.name])}},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},_vm._l(element.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):["portalWorkpermitForm","workpermitForm"].includes(_vm.name)&&"permitType"===element.name?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",clearable:!element.required},on:{change:function($event){return _vm.permitTypeChangeActions(_vm.model[element.name])}},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}},_vm._l(element.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:String(option.value)}})})),1):["portalWorkpermitForm","workpermitForm"].includes(_vm.name)&&"vendorContact"===element.parent?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",disabled:_vm.disableWorkPermitVendorFields,clearable:!element.required},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},_vm._l(_vm.vendorContacts,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.name,value:String(option.id)}})})),1):["portalWorkpermitForm","workpermitForm"].includes(_vm.name)&&"vendor"===element.parent?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",disabled:_vm.disableWorkPermitVendorFields,clearable:!element.required},on:{change:function($event){return _vm.permitVendorChangeActions(_vm.model[element.parent][element.name])}},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},_vm._l(element.options,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.label,value:option.value}})})),1):"vendor"===element.parent?[_c("FLookupField",{staticClass:"width575px",attrs:{model:_vm.model[element.parent][element.name],field:_vm.getVendorField},on:{"update:model":function($event){return _vm.$set(_vm.model[element.parent],element.name,$event)},showLookupWizard:function(){return _vm.canShowLookupWizard=!0}}}),_vm.canShowLookupWizard?_c("FLookupFieldWizard",{attrs:{canShowLookupWizard:_vm.canShowLookupWizard,selectedLookupField:_vm.getVendorField},on:{"update:canShowLookupWizard":function($event){_vm.canShowLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.canShowLookupWizard=$event},setLookupFieldValue:_vm.setLookupFieldValue}}):_vm._e()]:"rotatingItem"===element.parent?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",clearable:!element.required},on:{change:_vm.rotatingItemToolChangeActions},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},[_vm._l(_vm.rotatingItemList,(function(item,index){return _c("el-option",{key:index,attrs:{label:item.itemType.name,value:String(item.id)}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(item.itemType.name))]),_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(item.storeRoom.name))])])}))],2):"rotatingTool"===element.parent?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",clearable:!element.required},on:{change:_vm.rotatingItemToolChangeActions},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},_vm._l(_vm.rotatingToolList,(function(option,index){return _c("el-option",{key:index,attrs:{label:option.toolType.name,value:String(option.id)}},[_c("span",{staticClass:"fL"},[_vm._v(_vm._s(option.toolType.name))]),_c("span",{staticClass:"select-float-right-text13"},[_vm._v(_vm._s(option.storeRoom.name))])])})),1):"SPACEMULTICHOOSER"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px",staticStyle:{float:"left"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},model:{value:_vm.selectedResourceLabel,callback:function($$v){_vm.selectedResourceLabel=$$v},expression:"selectedResourceLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0}},slot:"suffix"})]),_vm.chooserVisibility?_c("space-asset-multi-chooser",{attrs:{resourceType:"2, 3, 4",disable:!0,visibility:_vm.chooserVisibility,initialValues:_vm.resourceData,filter:_vm.filter,showAsset:!1,hideBanner:!0},on:{associate:_vm.associateResource,"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e()],1):"SITEMULTICHOOSER"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px",staticStyle:{float:"left"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},model:{value:_vm.selectedSiteLabel,callback:function($$v){_vm.selectedSiteLabel=$$v},expression:"selectedSiteLabel"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.chooserVisibility=!0}},slot:"suffix"})]),_vm.chooserVisibility?_c("space-asset-multi-chooser",{attrs:{resourceType:[1],disable:!0,visibility:_vm.chooserVisibility,initialValues:_vm.siteresourceData,showAsset:!1,hideBanner:!0},on:{associate:_vm.associateSite,"update:visibility":function($event){_vm.chooserVisibility=$event}}}):_vm._e()],1):element.options&&element.parent?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{clearable:!element.required,filterable:""},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}},_vm._l(element.options,(function(option,index){return _vm.filterBySite(option)?_c("el-option",{key:index,attrs:{label:option.label,value:option.value}}):_vm._e()})),1):element.options?_c("el-select",{staticClass:"fc-input-full-border-select2 width575px",attrs:{filterable:"",clearable:!element.required},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}},_vm._l(element.options,(function(option,index){return _vm.filterBySite(option)?_c("el-option",{key:index,attrs:{label:option.label,value:option.value}}):_vm._e()})),1):"ATTACHMENT"===element.displayTypeEnum?_c("div",[_c("div",{staticClass:"fc-attachments fc-wo-form-attachement-block"},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.model["attachedFiles"].attachments.length>=1,expression:"model['attachedFiles'].attachments.length >= 1"}],staticClass:"pB25 border-bottom3 pT10"},[_c("span",[_c("img",{staticClass:"pull-right pointer",staticStyle:{height:"15px",width:"13px"},attrs:{src:__webpack_require__(401213),onclick:"document.getElementById('facilio-web-form-file-attachment').click()"}})])]),_vm._l(_vm.model["attachedFiles"].attachments,(function(attachment,index){return _c("div",{key:attachment.name,staticClass:"fc-attachment-row visibility-visible-actions"},[_c("div",{staticClass:"attachment-label label-txt-black"},[_vm._v(" "+_vm._s(attachment.fileName)+" ")]),_c("div",{staticClass:"attachment-sublabel"},[_c("span",{staticClass:"fc-grey-text12-light"},[_vm._v(_vm._s(_vm._f("prettyBytes")(attachment.fileSize)))]),1===attachment.status?_c("span",{staticClass:"attachment-sublabel"},[_vm._v(", "+_vm._s(_vm.$t("common._common.uploading")))]):2===attachment.status?_c("span",{staticClass:"attachment-sublabel"},[_vm._v(", "+_vm._s(_vm.$t("common._common.success")))]):_c("span",{staticClass:"attachment-sublabel"},[_vm._v(" "+_vm._s(attachment.error))]),_c("div",{staticClass:"innerblock pull-right visibility-hide-actions"},[_c("i",{staticClass:"el-icon-delete fc-delete-icon pointer attach-delete-icon",on:{click:function($event){return _vm.deleteAttachment("attachedFiles",index)}}})])])])})),_c("div",{directives:[{name:"show",rawName:"v-show",value:!_vm.model["attachedFiles"].attachments.length,expression:"!model['attachedFiles'].attachments.length"}],staticClass:"pointer",on:{change:function($event){return _vm.filesChange("attachedFiles",$event.target.files)}}},[_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""},on:{submit:function($event){return $event.preventDefault(),_vm.addAttachment.apply(null,arguments)}}},[_c("div",{staticClass:"dropbox text-center"},[_c("img",{staticClass:"mT10 opacity-05",attrs:{src:__webpack_require__(581121),width:"20",height:"20"}}),_c("input",{ref:"attachment",refInFor:!0,staticClass:"input-file",attrs:{id:"facilio-web-form-file-attachment",type:"file"}}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_file"))),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])])])],2)]):"LOGO"===element.displayTypeEnum?_c("div",[_c("div",{staticClass:"fc-attachments fc-wo-form-attachement-block"},[_vm.model["logo"].logoImageUrl?_c("div",{staticClass:"fc-attachment-row visibility-visible-actions tenant-upload-con"},[_c("div",{staticClass:"logo-upload"},[_c("span",{staticClass:"input-upload tenant-upload"},[_c("input",{ref:"logo",refInFor:!0,staticClass:"upload",staticStyle:{width:"200px",height:"100px"},attrs:{type:"file"},on:{change:function($event){return _vm.logoChange("logo",$event.target.files)}}}),_c("span",{staticClass:"upload-icon-block"},[_c("img",{staticClass:"upload-img",attrs:{src:__webpack_require__(138688)}}),_vm.model["logo"].logoImageUrl?_c("img",{staticClass:"upload-img2",attrs:{src:_vm.model["logo"].logoImageUrl}}):_vm._e()])])])]):_vm._e(),_vm.model["logo"].logoImageUrl?_vm._e():_c("div",{staticClass:"pointer",on:{change:function($event){return _vm.logoChange("logo",$event.target.files)}}},[_c("form",{attrs:{enctype:"multipart/form-data",novalidate:""},on:{submit:function($event){return $event.preventDefault(),_vm.addAttachment.apply(null,arguments)}}},[_c("div",{staticClass:"dropbox text-center"},[_c("img",{staticClass:"mT10 opacity-05",attrs:{src:__webpack_require__(581121),width:"20",height:"20"}}),_c("input",{ref:"attachment",refInFor:!0,staticClass:"input-file",attrs:{id:"facilio-web-form-file-attachment",type:"file"}}),_c("p",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.drag_and_drop_file"))),_c("br"),_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_browse"))+" ")])])])])])]):"WOASSETSPACECHOOSER"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px",staticStyle:{float:"left"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.spaceAssetDisplayName,_vm.showSpaceAssetChooser()}},model:{value:_vm.spaceAssetDisplayName,callback:function($$v){_vm.spaceAssetDisplayName=$$v},expression:"spaceAssetDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.visibility=!0}},slot:"suffix"})]),_c("wo-space-asset-chooser",{attrs:{visibility:_vm.visibility,query:_vm.quickSearchQuery,appendToBody:!1,filter:_vm.filter},on:{associate:function($event){return _vm.associate($event,element.name)},"update:visibility":function($event){_vm.visibility=$event}}})],1):"QR"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px",staticStyle:{float:"left"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.spaceAssetDisplayName,_vm.showSpaceAssetChooser(),_vm.hitServer}},model:{value:_vm.spaceAssetDisplayName,callback:function($$v){_vm.spaceAssetDisplayName=$$v},expression:"spaceAssetDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.visibility=!0}},slot:"suffix"})]),_c("wo-space-asset-chooser",{attrs:{visibility:_vm.visibility,query:_vm.quickSearchQuery,appendToBody:!1,filter:_vm.filter},on:{associate:function($event){return _vm.associateQr($event,element.name)},"update:visibility":function($event){_vm.visibility=$event}}})],1):"SPACECHOOSER"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px",staticStyle:{float:"left"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.spaceAssetDisplayName,_vm.showSpaceAssetChooser()}},model:{value:_vm.spaceAssetDisplayName,callback:function($$v){_vm.spaceAssetDisplayName=$$v},expression:"spaceAssetDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.visibility=!0}},slot:"suffix"})]),_c("wo-space-asset-chooser",{attrs:{visibility:_vm.visibility,query:_vm.quickSearchQuery,showAsset:!1,picktype:"space",appendToBody:!1,filter:_vm.filter},on:{associate:function($event){return _vm.associate($event,element.name)},"update:visibility":function($event){_vm.visibility=$event}}})],1):"RESERVABLE_SPACES"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px",staticStyle:{float:"left"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{readonly:"",type:"text",placeholder:_vm.$t("common._common.select_space")},on:{change:function($event){return _vm.showSpaceAssetChooser()}},model:{value:_vm.spaceAssetDisplayName,callback:function($$v){_vm.spaceAssetDisplayName=$$v},expression:"spaceAssetDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.visibility=!0}},slot:"suffix"})]),_c("wo-space-asset-chooser",{attrs:{visibility:_vm.visibility,query:_vm.quickSearchQuery,showAsset:!1,picktype:"space",appendToBody:!1,hideSidebar:"false",queryFilter:_vm.reservableFilter,resourceType:[4]},on:{associate:function($event){return _vm.associate($event,element.name)},"update:visibility":function($event){_vm.visibility=$event}}})],1):"BUILDINGCHOOSER"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px",staticStyle:{float:"left"}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"text",placeholder:_vm.$t("common._common.to_search_type")},on:{change:function($event){_vm.quickSearchQuery=_vm.spaceAssetDisplayName,_vm.showSpaceAssetChooser()}},model:{value:_vm.spaceAssetDisplayName,callback:function($$v){_vm.spaceAssetDisplayName=$$v},expression:"spaceAssetDisplayName"}},[_c("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{"line-height":"0px !important","font-size":"16px !important",cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function($event){_vm.visibility=!0}},slot:"suffix"})]),_c("wo-space-asset-chooser",{attrs:{showAsset:!1,visibility:_vm.visibility,query:_vm.quickSearchQuery,resourceType:[2],appendToBody:!1,filter:_vm.filter},on:{associate:function($event){return _vm.associate($event,element.name)},"update:visibility":function($event){_vm.visibility=$event}}})],1):"TEAMSTAFFASSIGNMENT"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px"},[_c("div",{staticClass:"fc-border-input-div"},[_c("span",[_vm._v(_vm._s(_vm.getTeamStaffLabel(_vm.model)))]),_c("span",{staticStyle:{float:"right","padding-right":"5px"}},[_c("i",{staticClass:"el-icon-arrow-down team-down-icon",staticStyle:{color:"#5a7591 !important","font-size":"14px !important","font-weight":"600 !important"}})])]),_c("f-assignment",{attrs:{model:_vm.model,siteId:_vm.model.siteId,viewtype:"form"}}),_c("div")],1):"USER"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 width575px"},[_c("div",{staticClass:"form-input"},[_c("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:element.displayName},model:{value:_vm.model[element.name].id,callback:function($$v){_vm.$set(_vm.model[element.name],"id",$$v)},expression:"model[element.name].id"}},_vm._l(_vm.users,(function(user){return _vm.showUsersWithNoScope&&user.accessibleSpace&&user.accessibleSpace.length>0?_vm._e():_c("el-option",{key:user.id,attrs:{label:user.name,value:String(user.id)}})})),1)],1)]):"MULTI_USER_LIST"===element.displayTypeEnum?_c("div",{staticClass:"fc-input-full-border-select2 el-select-block fc-tag width575px"},[_c("div",{staticClass:"form-input"},[_c("el-select",{staticClass:"width100",attrs:{"collapse-tags":"",multiple:!0,filterable:"",clearable:"",placeholder:element.displayName},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}},_vm._l(_vm.users,(function(user){return _vm.showUsersWithNoScope&&user.accessibleSpace&&user.accessibleSpace.length>0?_vm._e():_c("el-option",{key:user.id,attrs:{label:user.name,value:String(user.id)}})})),1)],1)]):"TICKETNOTES"===element.displayTypeEnum?_c("el-input",{staticClass:"fc-input-full-border-textarea width575px",attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"Type your "+element.displayName,resize:"none"},model:{value:_vm.model.comment,callback:function($$v){_vm.$set(_vm.model,"comment",$$v)},expression:"model.comment"}}):"DURATION"===element.displayTypeEnum?[_c("div",{staticClass:"position-relative"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{type:"number"},model:{value:_vm.model[element.name].days,callback:function($$v){_vm.$set(_vm.model[element.name],"days",$$v)},expression:"model[element.name].days"}},[_c("span",{staticClass:"pR10 fc-grey6 f12",attrs:{slot:"suffix"},slot:"suffix"},[_vm._v(_vm._s(_vm.$t("common._common.days")))])]),_c("el-select",{staticClass:"fc-input-full-border-select2 duration-input mL15 position-relative",model:{value:_vm.model[element.name].hours,callback:function($$v){_vm.$set(_vm.model[element.name],"hours",$$v)},expression:"model[element.name].hours"}},_vm._l(_vm.model[element.name].options,(function(item,idx){return _c("el-option",{key:idx,attrs:{label:item.label,value:item.value}})})),1),_c("span",{staticClass:"fc-grey6 f12 position-relative fc-input-select-hour"},[_vm._v(_vm._s(_vm.$t("common._common.hours")))])],1)]:"ADDRESS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"profile-input-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.street"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_street")},model:{value:_vm.model[element.name].street,callback:function($$v){_vm.$set(_vm.model[element.name],"street",$$v)},expression:"model[element.name].street"}})],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.city"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.entre_city")},model:{value:_vm.model[element.name].city,callback:function($$v){_vm.$set(_vm.model[element.name],"city",$$v)},expression:"model[element.name].city"}})],1)])],1)],1),_c("div",{staticClass:"profile-input-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.state"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_state")},model:{value:_vm.model[element.name].state,callback:function($$v){_vm.$set(_vm.model[element.name],"state",$$v)},expression:"model[element.name].state"}})],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.zipcode"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"number",placeholder:_vm.$t("setup.setup_profile.enter_zipcode")},model:{value:_vm.model[element.name].zip,callback:function($$v){_vm.$set(_vm.model[element.name],"zip",$$v)},expression:"model[element.name].zip"}})],1)])],1)],1),_c("div",{staticClass:"profile-input-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.country"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("setup.setup_profile.enter_country")},model:{value:_vm.model[element.name].country,callback:function($$v){_vm.$set(_vm.model[element.name],"country",$$v)},expression:"model[element.name].country"}},_vm._l(_vm.countryList,(function(country){return _c("el-option",{key:country.value,attrs:{label:country.label,value:String(country.value)}})})),1)],1)])],1)],1)]):"SADDRESS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},["billToAddress"===element.name||"shipToAddress"===element.name?_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}):_vm._e(),_c("div",{staticClass:"profile-input-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.street"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_street")},model:{value:_vm.model[element.name].street,callback:function($$v){_vm.$set(_vm.model[element.name],"street",$$v)},expression:"model[element.name].street"}})],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.city"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.entre_city")},model:{value:_vm.model[element.name].city,callback:function($$v){_vm.$set(_vm.model[element.name],"city",$$v)},expression:"model[element.name].city"}})],1)])],1)],1),_c("div",{staticClass:"profile-input-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.state"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{placeholder:_vm.$t("setup.setup_profile.enter_state")},model:{value:_vm.model[element.name].state,callback:function($$v){_vm.$set(_vm.model[element.name],"state",$$v)},expression:"model[element.name].state"}})],1)]),_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.zipcode"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"number",placeholder:_vm.$t("setup.setup_profile.enter_zipcode")},model:{value:_vm.model[element.name].zip,callback:function($$v){_vm.$set(_vm.model[element.name],"zip",$$v)},expression:"model[element.name].zip"}})],1)])],1)],1),_c("div",{staticClass:"profile-input-container"},[_c("el-row",{attrs:{gutter:20}},[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"profile-input-group pB20"},[_c("p",{staticClass:"input-label-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.country"))+" ")]),_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:"",placeholder:_vm.$t("setup.setup_profile.enter_country")},model:{value:_vm.model[element.name].country,callback:function($$v){_vm.$set(_vm.model[element.name],"country",$$v)},expression:"model[element.name].country"}},_vm._l(_vm.countryList,(function(country){return _c("el-option",{key:country.value,attrs:{label:country.label,value:String(country.value)}})})),1)],1)])],1)],1)]):"IMAGE"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_vm.model[element.name]?_c("div",{staticClass:"web-form-image-uploaded"},[_c("img",{staticClass:"upload-img",attrs:{src:_vm.getBaseURL()+"/v2/files/preview/"+_vm.model[element.name],title:_vm.$t("common.attachment_form.click_to_change")}}),_c("input",{staticClass:"input-file-image",staticStyle:{height:"160px",width:"100%",position:"absolute",top:"0",left:"0",cursor:"pointer"},attrs:{type:"file",drag:"",accept:"image/*"},on:{change:function($event){return _vm.imageChange($event.target.files,element.name)}}})]):_c("div",{staticClass:"web-form-image-body"},[_c("input",{staticClass:"input-file-image",staticStyle:{height:"160px",width:"100%",position:"absolute",top:"0",left:"0",cursor:"pointer"},attrs:{type:"file",drag:"",accept:"image/*"},on:{change:function($event){return _vm.imageChange($event.target.files,element.name)}}}),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.attachment_form.click_to_choose_file_drag"))+" ")])])]):"PURCHASEDITEM"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("table",{staticClass:"setting-list-view-table fc-inventory-item-table store-table"},[_c("thead",[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text uppercase",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.quantity"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text uppercase",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.unit_price"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common._common.quantity"),type:"number",min:0},model:{value:_vm.model[element.name][index].quantity,callback:function($$v){_vm.$set(_vm.model[element.name][index],"quantity",$$v)},expression:"model[element.name][index].quantity"}})],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.unit_price"),type:"number",min:0},model:{value:_vm.model[element.name][index].unitcost,callback:function($$v){_vm.$set(_vm.model[element.name][index],"unitcost",$$v)},expression:"model[element.name][index].unitcost"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addPurchasedItemEntry(_vm.model[element.name],index,element.displayTypeEnum)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.model[element.name].length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)])]):"SERVICEVENDORS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.vendor"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.last_price"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.model[element.name][index].vendor.id,callback:function($$v){_vm.$set(_vm.model[element.name][index].vendor,"id",$$v)},expression:"model[element.name][index].vendor.id"}},_vm._l(_vm.vendors,(function(vendor,index){return _c("el-option",{key:index,attrs:{label:vendor.label,value:vendor.value}})})),1)],1),_c("td",{staticClass:"pL20"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.price"),type:"number",min:0},model:{value:_vm.model[element.name][index].lastPrice,callback:function($$v){_vm.$set(_vm.model[element.name][index],"lastPrice",$$v)},expression:"model[element.name][index].lastPrice"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:"Add"},on:{click:function($event){return _vm.addServiceVendorEntry(_vm.model[element.name],index,element.displayTypeEnum)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.model[element.name].length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:"Remove"},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)])]):"UNIT"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("el-row",{staticClass:"position-relative",attrs:{gutter:20}},[_c("el-col",{staticClass:"position-relative",attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",on:{change:function($event){return _vm.loadUnit(element.name,element.MetricMeta)}},model:{value:element.MetricMeta.metric,callback:function($$v){_vm.$set(element.MetricMeta,"metric",$$v)},expression:"element.MetricMeta.metric"}},_vm._l(_vm.metricsUnits.metrics,(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.name,value:dtype.metricId}})})),1),_c("span",{staticClass:"position-absolute right60"},[_vm._v(_vm._s(_vm.$t("common.tabs.metric")))])],1),_c("el-col",{staticClass:"position-relative",attrs:{span:12}},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{clearable:""},on:{change:function($event){return _vm.setUnit(element.name,element.MetricMeta.unitId)}},model:{value:element.MetricMeta.unitId,callback:function($$v){_vm.$set(element.MetricMeta,"unitId",$$v)},expression:"element.MetricMeta.unitId"}},_vm._l(_vm.metricsUnits.metricWithUnits[element.MetricMeta.metricName],(function(dtype,index){return _c("el-option",{key:index,attrs:{label:dtype.displayName,value:dtype.unitId}})})),1),_c("span",{staticClass:"position-absolute right35"},[_vm._v(_vm._s(_vm.$t("common.header.unit")))])],1)],1)],1):"VENDOR_CONTACTS"===element.displayTypeEnum?[_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},["VENDOR_CONTACTS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[0===_vm.model[element.name].length?_c("table",{staticClass:"setting-list-view-table store-table width100"},[_c("tbody",[0===_vm.model[element.name].length?_c("div",[_c("div",{staticStyle:{"text-align":"center"}},[_c("div",[_c("img",{attrs:{src:__webpack_require__(15482),width:"100",height:"100"}})]),_c("el-button",{staticClass:"btnsize txt pointer fc-btn-green-medium-fill",on:{click:function($event){return _vm.addVendorContactEntry(_vm.model[element.name])}}},[_vm._v(_vm._s(_vm.$t("common.header.add_contact")))])],1)]):_vm._e()])]):_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.phone"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.email"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.portal_access"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.products.name")},model:{value:_vm.model[element.name][index].name,callback:function($$v){_vm.$set(_vm.model[element.name][index],"name",$$v)},expression:"model[element.name][index].name"}})],1),_c("td",{staticClass:"pL20"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.phone")},model:{value:_vm.model[element.name][index].phone,callback:function($$v){_vm.$set(_vm.model[element.name][index],"phone",$$v)},expression:"model[element.name][index].phone"}})],1),_c("td",{staticClass:"pL20"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.email")},model:{value:_vm.model[element.name][index].email,callback:function($$v){_vm.$set(_vm.model[element.name][index],"email",$$v)},expression:"model[element.name][index].email"}})],1),_c("td",{staticClass:"pL20"},[_c("el-switch",{staticClass:"pL20",model:{value:_vm.model[element.name][index].isPortalAccessNeeded,callback:function($$v){_vm.$set(_vm.model[element.name][index],"isPortalAccessNeeded",$$v)},expression:"\n                                  model[element.name][index]\n                                    .isPortalAccessNeeded\n                                "}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addVendorContactEntry(_vm.model[element.name])}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})])])])])})),0)])]):_vm._e()])])]:"EXTERNAL_ATTENDEES"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},["EXTERNAL_ATTENDEES"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[0===_vm.model[element.name].length?_c("table",{staticClass:"setting-list-view-table store-table width100"},[_c("tbody",[0===_vm.model[element.name].length?_c("div",[_c("div",{staticStyle:{"text-align":"center"}},[_c("div",[_c("img",{attrs:{src:__webpack_require__(15482),width:"100",height:"100"}})]),_c("el-button",{staticClass:"btnsize pointer txt fc-btn-green-medium-fill",on:{click:function($event){return _vm.addExternalAttendeeEntry(_vm.model[element.name],index)}}},[_vm._v(_vm._s(_vm.$t("common.header.add_external_attendee")))])],1)]):_vm._e()])]):_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup_profile.email"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.products.name")},model:{value:_vm.model[element.name][index].name,callback:function($$v){_vm.$set(_vm.model[element.name][index],"name",$$v)},expression:"model[element.name][index].name"}})],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("setup.setup_profile.email")},model:{value:_vm.model[element.name][index].email,callback:function($$v){_vm.$set(_vm.model[element.name][index],"email",$$v)},expression:"model[element.name][index].email"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addExternalAttendeeEntry(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})])])])])})),0)])]):_vm._e()])])]:"LINEITEMS"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},["LINEITEMS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),"rentalLeaseContractForm"!==_vm.name?_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.quantity"))+" ")]):_vm._e(),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.unit_price"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",on:{change:function($event){return _vm.loadTypes(_vm.model[element.name][index].inventoryType)}},model:{value:_vm.model[element.name][index].inventoryType,callback:function($$v){_vm.$set(_vm.model[element.name][index],"inventoryType",$$v)},expression:"\n                                  model[element.name][index].inventoryType\n                                "}},[_c("el-option",{key:"1",attrs:{label:_vm.$t("common.header.item"),value:1}}),_c("el-option",{key:"2",attrs:{label:_vm.$t("common.header.tool"),value:2}}),"purchaseOrderForm"===_vm.name||"purchaseRequestForm"===_vm.name?_c("el-option",{key:"4",attrs:{label:_vm.$t("common._common.others"),value:4}}):_vm._e()],1)],1),_c("td",{staticClass:"module-builder-td"},[1===parseInt(_vm.model[element.name][index].inventoryType)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},on:{change:function($event){return _vm.lineItemChangeActionItem(_vm.model[element.name][index])}},model:{value:_vm.model[element.name][index].itemType.id,callback:function($$v){_vm.$set(_vm.model[element.name][index].itemType,"id",$$v)},expression:"\n                                  model[element.name][index].itemType.id\n                                "}},[_c("el-option-group",{key:"1",attrs:{label:"Vendor Items"}},_vm._l(_vm.vendorItems,(function(vendorItem,index){return _c("el-option",{key:index,attrs:{label:vendorItem.itemType.name,value:vendorItem.itemType.id}})})),1),_c("el-option-group",{key:"2",attrs:{label:_vm.vendorItems.length>0?"Other Items":""}},_vm._l(_vm.nonVendorItems,(function(item,index){return _c("el-option",{key:index,attrs:{label:item.name,value:item.id}})})),1)],1):_vm._e(),2===parseInt(_vm.model[element.name][index].inventoryType)?_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},on:{change:function($event){return _vm.lineItemChangeActionTool(_vm.model[element.name][index])}},model:{value:_vm.model[element.name][index].toolType.id,callback:function($$v){_vm.$set(_vm.model[element.name][index].toolType,"id",$$v)},expression:"\n                                  model[element.name][index].toolType.id\n                                "}},_vm._l(_vm.toolTypes,(function(tool,index){return _c("el-option",{key:index,attrs:{label:tool.name,value:tool.id}})})),1):_vm._e(),4===parseInt(_vm.model[element.name][index].inventoryType)?_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.wo_report.remarks")},model:{value:_vm.model[element.name][index].remarks,callback:function($$v){_vm.$set(_vm.model[element.name][index],"remarks",$$v)},expression:"model[element.name][index].remarks"}}):_vm._e()],1),"rentalLeaseContractForm"!==_vm.name?_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common._common.quantity"),min:0,type:"number"},model:{value:_vm.model[element.name][index].quantity,callback:function($$v){_vm.$set(_vm.model[element.name][index],"quantity",$$v)},expression:"model[element.name][index].quantity"}})],1):_vm._e(),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.tabs.cost"),type:"number",min:0},model:{value:_vm.model[element.name][index].unitPrice,callback:function($$v){_vm.$set(_vm.model[element.name][index],"unitPrice",$$v)},expression:"model[element.name][index].unitPrice"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addItemEntry(_vm.model[element.name],index,element.displayTypeEnum)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.model[element.name].length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)])]):_vm._e()])])]:"INVREQUEST_LINE_ITEMS"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50",class:"inventoryRequestWOForm"===_vm.name?"margin-top-negative-50":""},["INVREQUEST_LINE_ITEMS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.name"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.quantity"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",on:{change:function($event){return _vm.loadTypes(_vm.model[element.name][index].inventoryType)}},model:{value:_vm.model[element.name][index].inventoryType,callback:function($$v){_vm.$set(_vm.model[element.name][index],"inventoryType",$$v)},expression:"\n                                  model[element.name][index].inventoryType\n                                "}},[_c("el-option",{key:"1",attrs:{label:_vm.$t("common.header.item"),value:1}}),_c("el-option",{key:"2",attrs:{label:_vm.$t("common.header.tool"),value:2}})],1)],1),_c("td",{staticClass:"module-builder-td"},[1===parseInt(_vm.model[element.name][index].inventoryType)?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.model[element.name][index].itemType.id,callback:function($$v){_vm.$set(_vm.model[element.name][index].itemType,"id",$$v)},expression:"\n                                    model[element.name][index].itemType.id\n                                  "}},_vm._l(_vm.itemTypes,(function(itemType,index){return _c("el-option",{key:index,attrs:{label:itemType.name,value:itemType.id}})})),1)],1):_vm._e(),2===parseInt(_vm.model[element.name][index].inventoryType)?_c("div",[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.model[element.name][index].toolType.id,callback:function($$v){_vm.$set(_vm.model[element.name][index].toolType,"id",$$v)},expression:"\n                                    model[element.name][index].toolType.id\n                                  "}},_vm._l(_vm.toolTypes,(function(toolType,index){return _c("el-option",{key:index,attrs:{label:toolType.name,value:toolType.id}})})),1)],1):_vm._e()]),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common._common.quantity"),min:0,type:"number"},model:{value:_vm.model[element.name][index].quantity,callback:function($$v){_vm.$set(_vm.model[element.name][index],"quantity",$$v)},expression:"model[element.name][index].quantity"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addIRItemEntry(_vm.model[element.name],index,element.displayTypeEnum)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.model[element.name].length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)])]):_vm._e()])])]:"LABOUR_LINE_ITEMS"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},["LABOUR_LINE_ITEMS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.labour"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.rate_hr"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},on:{change:function($event){return _vm.loadRateForLabour(_vm.model[element.name][index])}},model:{value:_vm.model[element.name][index].labour.id,callback:function($$v){_vm.$set(_vm.model[element.name][index].labour,"id",$$v)},expression:"model[element.name][index].labour.id"}},_vm._l(_vm.labours,(function(labour,index){return _c("el-option",{key:index,attrs:{label:labour.name,value:labour.id}})})),1)],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.rate_hr"),type:"number"},model:{value:_vm.model[element.name][index].cost,callback:function($$v){_vm.$set(_vm.model[element.name][index],"cost",$$v)},expression:"model[element.name][index].cost"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addLabourEntry(_vm.model[element.name],index,element.displayTypeEnum)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.model[element.name].length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)])]):_vm._e()])])]:"WARRANTY_LINE_ITEMS"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},["WARRANTY_LINE_ITEMS"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common._common.service"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.item_coverage"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.tool_coverage"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.labor_coverage"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:""},model:{value:_vm.model[element.name][index].service.id,callback:function($$v){_vm.$set(_vm.model[element.name][index].service,"id",$$v)},expression:"\n                                  model[element.name][index].service.id\n                                "}},_vm._l(_vm.services,(function(service,index){return _c("el-option",{key:index,attrs:{label:service.name,value:service.id}})})),1)],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.item_coverage"),type:"number",max:100,min:0},model:{value:_vm.model[element.name][index].itemCoverage,callback:function($$v){_vm.$set(_vm.model[element.name][index],"itemCoverage",$$v)},expression:"\n                                  model[element.name][index].itemCoverage\n                                "}})],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.tool_coverage"),type:"number",max:100,min:0},model:{value:_vm.model[element.name][index].toolCoverage,callback:function($$v){_vm.$set(_vm.model[element.name][index],"toolCoverage",$$v)},expression:"\n                                  model[element.name][index].toolCoverage\n                                "}})],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:_vm.$t("common.header.labor_coverage"),type:"number",max:100,min:0},model:{value:_vm.model[element.name][index].labourCoverage,callback:function($$v){_vm.$set(_vm.model[element.name][index],"labourCoverage",$$v)},expression:"\n                                  model[element.name][index].labourCoverage\n                                "}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addWarrantyLineEntry(_vm.model[element.name],index,element.displayTypeEnum)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.model[element.name].length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)])]):_vm._e()])])]:"VISITOR_INVITEES"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},["VISITOR_INVITEES"===element.displayTypeEnum?_c("div",{staticClass:"position-relative"},[_c("table",{staticClass:"setting-list-view-table store-table"},[_c("thead",{staticClass:"setup-dialog-thead"},[_c("tr",[_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.products.visitor"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.email"))+" ")]),_c("th",{staticClass:"setting-table-th setting-th-text",staticStyle:{width:"240px"}},[_vm._v(" "+_vm._s(_vm.$t("common.header.phone"))+" ")]),_c("th")])]),_c("tbody",_vm._l(_vm.model[element.name],(function(field,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions"},[_c("td",{staticClass:"module-builder-td"},[_c("el-select",{staticClass:"fc-input-full-border-select2 width100",attrs:{filterable:"",clearable:"","allow-create":""},on:{change:function($event){return _vm.fillVisitorObject(_vm.model[element.name][index])}},model:{value:_vm.model[element.name][index].id,callback:function($$v){_vm.$set(_vm.model[element.name][index],"id",$$v)},expression:"model[element.name][index].id"}},_vm._l(_vm.visitors,(function(visitor,index){return _c("el-option",{key:index,attrs:{label:visitor.name,value:visitor.id}})})),1)],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:"Email",readonly:!_vm.isSelectCreateNew(_vm.model[element.name][index].id)},model:{value:_vm.model[element.name][index].email,callback:function($$v){_vm.$set(_vm.model[element.name][index],"email",$$v)},expression:"model[element.name][index].email"}})],1),_c("td",{staticClass:"module-builder-td"},[_c("el-input",{staticClass:"fc-input-full-border-select2 duration-input",attrs:{placeholder:"Phone",readonly:!_vm.isSelectCreateNew(_vm.model[element.name][index].id)},model:{value:_vm.model[element.name][index].phone,callback:function($$v){_vm.$set(_vm.model[element.name][index],"phone",$$v)},expression:"model[element.name][index].phone"}})],1),_c("td",[_c("div",{staticClass:"visibility-hide-actions export-dropdown-menu"},[_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.add")},on:{click:function($event){return _vm.addVisitorInviteesEntry(_vm.model[element.name],index,element.displayTypeEnum)}}},[_c("img",{staticClass:"mR10 mT10",attrs:{src:__webpack_require__(353654)}})]),_vm.model[element.name].length>1?_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:_vm.$t("common._common.remove")},on:{click:function($event){return _vm.removeEntryFromList(_vm.model[element.name],index)}}},[_c("img",{staticClass:"mT10",attrs:{src:__webpack_require__(385769)}})]):_vm._e()])])])})),0)])]):_vm._e()])])]:"SCHEDULER_INFO"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},[_c("el-row",{attrs:{span:24}},[_c("el-col",{attrs:{span:12}},[_c("el-checkbox",{model:{value:_vm.model[element.name].isCheckedPayment,callback:function($$v){_vm.$set(_vm.model[element.name],"isCheckedPayment",$$v)},expression:"model[element.name].isCheckedPayment"}},[_vm._v(_vm._s(_vm.$t("common.header.schedule_payment")))]),_vm.model[element.name].isCheckedPayment?_c("el-radio-group",{on:{change:function($event){return _vm.paymentRadioGroupChangeActions(_vm.model[element.name])}},model:{value:_vm.model[element.name].frequencyType,callback:function($$v){_vm.$set(_vm.model[element.name],"frequencyType",$$v)},expression:"model[element.name].frequencyType"}},[_c("el-radio",{staticClass:"width100 mT20",attrs:{label:1}},[_vm._v(" "+_vm._s(_vm.$t("common._common.daily"))+" ")]),_c("el-radio",{staticClass:"width100 mT20",attrs:{label:2}},[_vm._v(" "+_vm._s(_vm.$t("common._common.weekly"))+" ")]),_c("el-radio",{staticClass:"width100 mT20",attrs:{label:3}},[_vm._v(" "+_vm._s(_vm.$t("common._common.monthly"))+" ")]),_c("el-radio",{staticClass:"width100 mT20",attrs:{label:4}},[_vm._v(" "+_vm._s(_vm.$t("common._common.yearly"))+" ")])],1):_vm._e()],1),_vm.model[element.name].isCheckedPayment?_c("el-col",{staticClass:"label-txt2",attrs:{span:12}},[1===_vm.model[element.name].frequencyType?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.every"))+" "),_c("el-input",{staticClass:"width100px mT10 fc-input-label-txt",attrs:{type:"number",min:0},model:{value:_vm.model[element.name].paymentInterval,callback:function($$v){_vm.$set(_vm.model[element.name],"paymentInterval",$$v)},expression:"model[element.name].paymentInterval"}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.days"))+" "),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.header.at_time"))+" "),_c("el-time-picker",{staticClass:"width100px mT10 fc-input-full-border2",attrs:{format:"HH:mm","value-format":"timestamp"},model:{value:_vm.model[element.name].scheduleTime,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleTime",$$v)},expression:"model[element.name].scheduleTime"}})],1)],1):_vm._e(),2===_vm.model[element.name].frequencyType?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.every"))+" "),_c("el-input",{staticClass:"width100px mT10 fc-input-label-txt",attrs:{type:"number",min:0},model:{value:_vm.model[element.name].paymentInterval,callback:function($$v){_vm.$set(_vm.model[element.name],"paymentInterval",$$v)},expression:"model[element.name].paymentInterval"}}),_vm._v(" "+_vm._s(_vm.$t("common.wo_report.weeks"))+" "),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.header.at_time"))+" "),_c("el-time-picker",{staticClass:"width100px mT10 fc-input-full-border2",attrs:{format:"HH:mm","value-format":"timestamp"},model:{value:_vm.model[element.name].scheduleTime,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleTime",$$v)},expression:"model[element.name].scheduleTime"}})],1),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common._common.on_day"))+" "),_c("el-select",{staticClass:"width100px mT10 fc-input-full-border-select2",model:{value:_vm.model[element.name].scheduleDay,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleDay",$$v)},expression:"model[element.name].scheduleDay"}},_vm._l(_vm.model[element.name].weekdays,(function(options,index){return _c("el-option",{key:index,attrs:{label:options.label,value:options.value}})})),1)],1)],1):_vm._e(),3===_vm.model[element.name].frequencyType?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.every"))+" "),_c("el-input",{staticClass:"width100px mT10 fc-input-label-txt",attrs:{type:"number",min:0},model:{value:_vm.model[element.name].paymentInterval,callback:function($$v){_vm.$set(_vm.model[element.name],"paymentInterval",$$v)},expression:"model[element.name].paymentInterval"}}),_vm._v(" "+_vm._s(_vm.$t("common._common.months"))+" "),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.header.on"))+" "),_c("el-select",{staticClass:"width100px mL35 mT10 fc-input-full-border-select2",model:{value:_vm.model[element.name].scheduleDay,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleDay",$$v)},expression:"model[element.name].scheduleDay"}},_vm._l(_vm.model[element.name].days,(function(options,index){return _c("el-option",{key:index,attrs:{label:options.label,value:options.value}})})),1)],1),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.header.at_time"))+" "),_c("el-time-picker",{staticClass:"width100px mL5 mT10 fc-input-full-border2",attrs:{format:"HH:mm","value-format":"timestamp"},model:{value:_vm.model[element.name].scheduleTime,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleTime",$$v)},expression:"model[element.name].scheduleTime"}})],1)],1):_vm._e(),4===_vm.model[element.name].frequencyType?_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.every"))+" "),_c("el-input",{staticClass:"width100px mT10 fc-input-label-txt",attrs:{type:"number",min:0},model:{value:_vm.model[element.name].paymentInterval,callback:function($$v){_vm.$set(_vm.model[element.name],"paymentInterval",$$v)},expression:"model[element.name].paymentInterval"}}),_vm._v(" "+_vm._s(_vm.$t("common._common.years"))+" "),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.header.on"))+" "),_c("el-select",{staticClass:"width100px mL30 mT10 fc-input-full-border-select2",model:{value:_vm.model[element.name].scheduleMonth,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleMonth",$$v)},expression:"model[element.name].scheduleMonth"}},_vm._l(_vm.model[element.name].months,(function(options,index){return _c("el-option",{key:index,attrs:{label:options.label,value:options.value}})})),1)],1),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common._common.on_day"))),_c("el-select",{staticClass:"width100px mL5 mT10 fc-input-full-border-select2",model:{value:_vm.model[element.name].scheduleDay,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleDay",$$v)},expression:"model[element.name].scheduleDay"}},_vm._l(_vm.model[element.name].days,(function(options,index){return _c("el-option",{key:index,attrs:{label:options.label,value:options.value}})})),1)],1),_c("div",[_vm._v(" "+_vm._s(_vm.$t("common.header.at_time"))+" "),_c("el-time-picker",{staticClass:"width100px mT10 fc-input-full-border2",attrs:{format:"HH:mm","value-format":"timestamp"},model:{value:_vm.model[element.name].scheduleTime,callback:function($$v){_vm.$set(_vm.model[element.name],"scheduleTime",$$v)},expression:"model[element.name].scheduleTime"}})],1)],1):_vm._e()]):_vm._e()],1)],1)])]:"RECURRING_VISITOR"===element.displayTypeEnum?[_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con mT10"},[_c("div",{staticClass:"width100 pB50"},[_c("el-row",[_c("el-col",{attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common._common.type"))+" ")]),_c("el-radio-group",{staticClass:"width100",on:{change:function($event){return _vm.resetIsRecurringValues(_vm.model[element.name].isRecurring,element.name)}},model:{value:_vm.model[element.name].isRecurring,callback:function($$v){_vm.$set(_vm.model[element.name],"isRecurring",$$v)},expression:"model[element.name].isRecurring"}},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:1}},[_vm._v(_vm._s(_vm.$t("common.wo_report.non_recurring"))+" ")]),_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:2}},[_vm._v(_vm._s(_vm.$t("common.wo_report.recurring"))+" ")])],1)],1),1===_vm.model[element.name].isRecurring?_c("el-col",{staticClass:"mT20",attrs:{span:24}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.expected_start_time"))+" ")]),_c("f-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{"value-format":"timestamp",type:"datetime"},model:{value:_vm.model[element.name].expectedStartTime,callback:function($$v){_vm.$set(_vm.model[element.name],"expectedStartTime",$$v)},expression:"model[element.name].expectedStartTime"}})],1),_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.expected_end_time"))+" ")]),_c("f-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{"value-format":"timestamp",type:"datetime"},model:{value:_vm.model[element.name].expectedEndTime,callback:function($$v){_vm.$set(_vm.model[element.name],"expectedEndTime",$$v)},expression:"model[element.name].expectedEndTime"}})],1)],1):_vm._e(),2===_vm.model[element.name].isRecurring?_c("el-col",{staticClass:"mT20",attrs:{span:24}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.start_date"))+" ")]),_c("f-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{"value-format":"timestamp",type:"date"},model:{value:_vm.model[element.name].startDate,callback:function($$v){_vm.$set(_vm.model[element.name],"startDate",$$v)},expression:"model[element.name].startDate"}})],1),_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.end_date"))+" ")]),_c("f-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{"value-format":"timestamp",type:"date"},model:{value:_vm.model[element.name].endDate,callback:function($$v){_vm.$set(_vm.model[element.name],"endDate",$$v)},expression:"model[element.name].endDate"}})],1),_c("el-col",{staticClass:"mT20",attrs:{span:24}},[_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.start_time"))+" ")]),_c("el-time-picker",{staticClass:"width100 fc-input-full-border-select2",attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:_vm.$t("common.wo_report.start_time")},model:{value:_vm.model[element.name].startTime,callback:function($$v){_vm.$set(_vm.model[element.name],"startTime",$$v)},expression:"model[element.name].startTime"}})],1),_c("el-col",{attrs:{span:12}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.end_time"))+" ")]),_c("el-time-picker",{staticClass:"width100 fc-input-full-border-select2",attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:_vm.$t("common.wo_report.end_time")},model:{value:_vm.model[element.name].endTime,callback:function($$v){_vm.$set(_vm.model[element.name],"endTime",$$v)},expression:"model[element.name].endTime"}})],1)],1),_c("el-col",{staticClass:"mT20",attrs:{span:24}},[_c("p",{staticClass:"fc-input-label-txt"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.allowed_days"))+" ")]),_vm._l(_vm.model[element.name].weeks,(function(week,wIndex){return _c("el-checkbox",{key:wIndex,model:{value:week.value,callback:function($$v){_vm.$set(week,"value",$$v)},expression:"week.value"}},[_vm._v(_vm._s(week.displayName))])}))],2)],1):_vm._e()],1)],1)])]:"ASSETMULTICHOOSER"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con"},[_c("div",{staticClass:"width100 pB50"},[_vm.model.assets.length>0?_c("div",{staticClass:"taskbar fc-pm-task-form-table-con"},[_c("table",{staticClass:"fc-pm-form-table fc-pm-form-task-table"},[_c("tbody",_vm._l(_vm.model.assets,(function(asset,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions pointer table-hover"},[_c("td",[_c("div",{staticClass:"dot-green fL mL5"})]),_c("td",{staticStyle:{width:"500px"}},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticStyle:{width:"500px"}},[_vm._v(" "+_vm._s(asset.name)+" ")]),_c("td",{staticStyle:{width:"500px"}},[_vm._v(" "+_vm._s(_vm.getAssetCategory(asset.category.id).displayName)+" ")]),_c("td",[_c("div",{staticClass:"taskremoveicon visibility-hide-actions pR10",on:{click:function($event){return $event.stopPropagation(),_vm.removeAsset(index)}}},[_c("i",{staticClass:"el-icon-delete fc-delete f14 pointer visibility-hide-actions"})])])])})),0)])]):_vm._e(),_c("div",[_vm.model.assets.length<=0?_c("div",{staticStyle:{"text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/task",iconClass:"icon text-center icon-xxxlg"}})],1):_vm._e(),_vm.model.assets.length<=0?_c("div",{staticClass:"boldtext line-height0"},[_vm._v(" "+_vm._s(_vm.$t("common._common.select_asset_associated_tenant"))+" ")]):_vm._e(),_vm.model.assets.length<=0?_c("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[_c("el-button",{staticClass:"fc-btn-green-medium-fill",staticStyle:{"text-align":"center"},on:{click:function($event){_vm.utilityChooserVisibility=!0}}},[_vm._v(_vm._s(_vm.$t("common.header.associate_assets")))])],1):_c("div",{staticStyle:{"margin-top":"10px"}},[_c("el-button",{staticClass:"fc-btn-green-medium-fill",staticStyle:{"text-align":"center"},on:{click:function($event){_vm.utilityChooserVisibility=!0}}},[_vm._v(_vm._s(_vm.$t("common.header.associate_assets")))])],1)])])])]:_vm._e():_c("f-date-picker",{staticClass:"fc-input-full-border2 width575px",attrs:{disabled:"scheduledEndTime"===element.name&&6!==parseInt(_vm.model["durationType"]),"value-format":"timestamp",type:"datetime"},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):_c("el-checkbox",{attrs:{disabled:""},model:{value:_vm.model[element.name],callback:function($$v){_vm.$set(_vm.model,element.name,$$v)},expression:"model[element.name]"}}):_c("el-input",{staticClass:"fc-input-full-border2 width575px",attrs:{type:"number",min:0},model:{value:_vm.model[element.parent][element.name],callback:function($$v){_vm.$set(_vm.model[element.parent],element.name,$$v)},expression:"model[element.parent][element.name]"}}),_vm.utilityChooserVisibility?_c("space-asset-multi-chooser",{attrs:{resourceType:[2,3,4],disable:!0,visibility:_vm.utilityChooserVisibility,initialValues:_vm.energyUtilityData,filter:_vm.filter,showAsset:!0,hideBanner:!0},on:{associate:_vm.associateAssets,"update:visibility":function($event){_vm.utilityChooserVisibility=$event}}}):"TASKS"===element.displayTypeEnum?[_c("div",{staticClass:"fc-heading-border-width43 mT15",staticStyle:{"margin-top":"-10px","margin-bottom":"30px"}}),_c("div",{staticClass:"row full-layout-white fc-form-wo-task-con",attrs:{id:"task"}},[_c("div",{staticClass:"width100 pB50"},[1===_vm.model[element.name].length&&"default"===_vm.model[element.name][0].section&&0===_vm.model[element.name][0].tasks.length?_c("div",[_c("div",{staticStyle:{"text-align":"center"}},[_c("inline-svg",{attrs:{src:"svgs/emptystate/task",iconClass:"icon text-center icon-xxllg vertical-middle"}})],1),_c("div",{staticClass:"nowo-label"}),_c("div",{staticStyle:{"text-align":"center"}},[_c("el-button",{staticClass:"btnsize txt fc-btn-green-medium-fill",on:{click:function($event){return _vm.addNewTask()}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_task")))]),_c("el-button",{staticClass:"btnsize txt taskbutton fc-btn-green-medium-border",on:{click:function($event){return _vm.addNewSection()}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_section")))])],1)]):_vm._e(),_c("draggable",{attrs:{options:{draggable:_vm.moveIt?".asf":""},element:"div",list:_vm.model[element.name]}},_vm._l(_vm.model[element.name],(function(section,sectionIdx){return _c("div",{key:sectionIdx,staticClass:"wo-task-section asf"},["default"!==section.section?_c("div",{staticClass:"tasksection visibility-visible-actions pT10",staticStyle:{height:"43px"},on:{click:function($event){_vm.selectedTaskSectionIdx=sectionIdx}}},[_c("el-input",{staticClass:"flLeft task-input-bold task-input-untitled",staticStyle:{width:"100%","font-weight":"bold"},attrs:{type:"text",placeholder:""},model:{value:section.section,callback:function($$v){_vm.$set(section,"section",$$v)},expression:"section.section"}}),_c("div",{staticClass:"flLeft sectionremoveicon visibility-hide-actions",staticStyle:{"padding-top":"6px"},on:{click:function($event){return $event.stopPropagation(),_vm.removeTaskSection(sectionIdx)}}},[_c("i",{staticClass:"el-icon-delete fc-delete f14 pointer",staticStyle:{position:"absolute",right:"0"}})]),_c("div",{staticClass:"clearboth"})],1):_vm._e(),_c("draggable",{attrs:{options:{draggable:_vm.moveIt?".asd":""},element:"div",list:section.tasks}},[_c("div",{staticClass:"taskbar fc-pm-task-form-table-con"},[_c("table",{staticClass:"fc-pm-form-table fc-pm-form-task-table"},[_c("tbody",_vm._l(section.tasks,(function(task,index){return _c("tr",{key:index,staticClass:"visibility-visible-actions pointer table-hover",class:{selectedTask:_vm.selectedTask===task,notselectedTask:_vm.selectedTask!==task,selectedErrorTask:_vm.errorIndex===index&&sectionIdx===_vm.selectedTaskSectionIdx},on:{click:function($event){_vm.selectedTaskSectionIdx=sectionIdx,_vm.selectedTask=task,_vm.selectedTaskIdx=index,_vm.showTaskDetails(task)}}},[_c("td",[_c("div",{staticClass:"dot-green fL mL5"})]),_c("td",{staticStyle:{width:"500px"}},[_c("el-input",{ref:"task-"+section.section+"-"+index,refInFor:!0,staticClass:"pL10 fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"Enter a task"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.onTaskEnter($event,index,task.subject)},paste:function($event){return _vm.onTaskPaste(section.element,index,$event)}},model:{value:task.subject,callback:function($$v){_vm.$set(task,"subject",$$v)},expression:"task.subject"}})],1),_c("td",[_c("div",{staticClass:"position-relative"},[_c("el-input",{staticClass:"fc-input-full-border-select-hover fc-input-full-border-select2 btn-border-hide fc-form-space-input pR0"},[_c("el-button",{staticClass:"btn-border-hide visibility-hide-actions",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function($event){_vm.selectedTaskSectionIdx=sectionIdx,_vm.selectedTaskIdx=index,_vm.showTaskSpaceAssetChooser()}},slot:"append"})],1),_c("div",{staticClass:"taskdesc wo-task-in"},[_vm._v(" "+_vm._s(task.resource?task.resource.name:"")+" ")])],1)]),_c("td",[_c("el-button",{staticClass:"mT0 btn-border-hide visibility-hide-actions",staticStyle:{width:"20px"},on:{click:function($event){_vm.showTaskSettings=!0}}},[_c("img",{attrs:{src:__webpack_require__(108277),height:"16px",width:"16px"}})])],1),_c("td",[_c("div",{staticClass:"taskremoveicon visibility-hide-actions pR10",on:{click:function($event){return $event.stopPropagation(),_vm.removeTask(section.section,index)}}},[_c("i",{staticClass:"el-icon-delete fc-delete f14 pointer visibility-hide-actions"})])])])})),0)])])]),_c("task-space-asset-chooser",{attrs:{visibility:_vm.taskSpaceChooserVisibility,quickSearchQuery:_vm.taskQuickSearchQuery,filter:_vm.filter},on:{associate:_vm.associateTaskSpace,"update:visibility":function($event){_vm.taskSpaceChooserVisibility=$event}}})],1)})),0),1!==_vm.model[element.name].length||"default"!==_vm.model[element.name][0].section||0!==_vm.model[element.name][0].tasks.length?_c("div",{staticClass:"pT20"},[_c("el-button",{staticClass:"fc-btn-green-medium-fill",on:{click:function($event){return _vm.addNewTask()}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_task")))]),_c("el-button",{staticClass:"fc-btn-green-medium-border",on:{click:function($event){return _vm.addNewSection()}}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.add_section")))])],1):_vm._e()],1)]),_c("el-dialog",{staticClass:"fc-dialog-center-container taskdialog2",attrs:{title:_vm.$t("common._common.task_details"),visible:_vm.showTaskSettings,width:"40%"},on:{"update:visible":function($event){_vm.showTaskSettings=$event}}},[_c("div",{staticClass:"task-container-scroll2"},[_c("el-row",{attrs:{align:"middle"}},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))),_c("el-input",{staticClass:"fc-input-full-border-textarea",attrs:{type:"textarea",autoComplete:"off",rows:1,resize:"none",placeholder:"Enter Description",autosize:{minRows:5,maxRows:5}},model:{value:_vm.selectedTask.description,callback:function($$v){_vm.$set(_vm.selectedTask,"description",$$v)},expression:"selectedTask.description"}})],1)])],1),_c("div",{staticClass:"mB10"},[_c("el-checkbox",{model:{value:_vm.selectedTask.attachmentRequired,callback:function($$v){_vm.$set(_vm.selectedTask,"attachmentRequired",$$v)},expression:"selectedTask.attachmentRequired"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.photo")))]),_c("el-checkbox",{on:{change:function($event){_vm.selectedTask.inputType=_vm.selectedTask.enableInput?_vm.selectedTask.inputType:1}},model:{value:_vm.selectedTask.enableInput,callback:function($$v){_vm.$set(_vm.selectedTask,"enableInput",$$v)},expression:"selectedTask.enableInput"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.enable_input")))])],1),_vm.selectedTask.enableInput?_c("div",[_c("div",{staticClass:"pT10 fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.task_type"))+" ")]),_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{disabled:(!_vm.selectedTask.resource||_vm.selectedTask.resource.id<=0)&&(!_vm.model.resource||!_vm.model.resource.id||_vm.model.resource.id<=0),color:"secondary",label:"2"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.reading"))+" "+_vm._s(_vm.selectedTask.resource&&!(_vm.selectedTask.resource.id<=0)||_vm.model.resource&&_vm.model.resource.id&&!(_vm.model.resource.id<=0)?"":_vm.$t("maintenance._workorder.select_asset_space")))]),_c("el-radio",{staticClass:"fc-radio-btn pT15 ",attrs:{color:"secondary",label:"3"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.text")))]),_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"4"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.number")))]),_c("el-radio",{staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"5"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.option")))]),_c("el-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"fc-radio-btn pT15",attrs:{color:"secondary",label:"6"},on:{change:_vm.onSelectInput},model:{value:_vm.selectedTask.inputType,callback:function($$v){_vm.$set(_vm.selectedTask,"inputType",$$v)},expression:"selectedTask.inputType"}},[_vm._v(_vm._s(_vm.$t("maintenance._workorder.checkbox")))])],1):_vm._e(),"2"===_vm.selectedTask.inputType?_c("div",[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.reading_field"))+" ")]),_c("div",[_c("el-select",{staticClass:"form-item",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:" "},model:{value:_vm.selectedTask.readingFieldId,callback:function($$v){_vm.$set(_vm.selectedTask,"readingFieldId",$$v)},expression:"selectedTask.readingFieldId"}},_vm._l(_vm.taskReadingFields,(function(readingField){return _c("el-option",{key:readingField.id,attrs:{label:readingField.displayName,value:readingField.id}})})),1)],1)]):_vm._e(),"4"===_vm.selectedTask.inputType?_c("div",[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.validation"))+" ")]),_c("el-select",{staticClass:"form-item fc-input-full-border-select2",staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:_vm.selectedTask.validation,callback:function($$v){_vm.$set(_vm.selectedTask,"validation",$$v)},expression:"selectedTask.validation"}},[_c("el-option",{key:"none",attrs:{label:_vm.$t("common.wo_report.none"),value:"none"}}),_c("el-option",{key:"incremental",attrs:{label:_vm.$t("common._common.incremental"),value:"incremental"}}),_c("el-option",{key:"decremental",attrs:{label:_vm.$t("common._common.decremental"),value:"decremental"}}),_c("el-option",{key:"safeLimit",attrs:{label:_vm.$t("common._common.safe_limit"),value:"safeLimit"}})],1),"safeLimit"===_vm.selectedTask.validation?_c("div",{staticClass:"inline-space-between"},[_c("div",[_c("div",{staticClass:"fc-dark-grey-txt14 mT10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.minimum_value"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number"},model:{value:_vm.selectedTask.minSafeLimit,callback:function($$v){_vm.$set(_vm.selectedTask,"minSafeLimit",$$v)},expression:"selectedTask.minSafeLimit"}})],1),_c("div",[_c("div",{staticClass:"fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.pm_list.max_value"))+" ")]),_c("el-input",{staticClass:"fc-input-full-border2",attrs:{type:"number"},model:{value:_vm.selectedTask.maxSafeLimit,callback:function($$v){_vm.$set(_vm.selectedTask,"maxSafeLimit",$$v)},expression:"selectedTask.maxSafeLimit"}})],1)]):_vm._e()],1):_vm._e(),"5"===_vm.selectedTask.inputType||"6"===_vm.selectedTask.inputType?_c("div",{staticClass:"wo-options"},[_c("div",{staticClass:"pT20 fc-dark-grey-txt14"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.options"))+" ")]),_vm._l(_vm.selectedTask.options,(function(option,index){return _c("div",{key:option,staticClass:"taskoption visibility-visible-actions",staticStyle:{"padding-bottom":"10px"}},["5"===_vm.selectedTask.inputType?_c("div"):_vm._e(),"6"===_vm.selectedTask.inputType?_c("div",{staticClass:"flLeft",staticStyle:{width:"14px",height:"14px","margin-top":"9px","margin-right":"7px","border-radius":"3px",border:"1px solid #c4d1dd"}}):_vm._e(),_c("div",{staticClass:"flLeft",staticStyle:{"padding-left":"3px",width:"200px"}},[_c("el-input",{staticClass:"fc-input-full-border2 width200px task-option-input",attrs:{type:"text",placeholder:""},model:{value:option.name,callback:function($$v){_vm.$set(option,"name",$$v)},expression:"option.name"}},[_c("template",{slot:"prepend"},[_vm._v(_vm._s(index+1))])],2)],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.selectedTask.options.length>2,expression:"selectedTask.options.length > 2"}],staticClass:"flLeft optionremoveicon",on:{click:function($event){return _vm.remove(_vm.selectedTask.options,index)}}},[_c("i",{staticClass:"el-icon-delete visibility-hide-actions pointer mL10"})]),_c("div",{staticClass:"clearboth"})])})),_c("div",{staticClass:"add-option pointer",on:{click:function($event){return _vm.addTaskOption(_vm.selectedTask)}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.add_option"))+" ")])],2):_vm._e()],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showTaskSettings=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveTaskSettings}},[_vm._v(_vm._s(_vm.$t("common._common._save")))])],1)])]:_vm._e(),element.allowCreate?_c("el-button",{directives:[{name:"tippy",rawName:"v-tippy"}],class:"left"===_vm.labelPosition?24===_vm.span(_vm.labelPosition,element.span)?"purchase-item-type-plus-btn-left-span":"purchase-item-type-plus-btn":"purchase-item-type-plus-btn-top",attrs:{type:"text",title:"Add New"},on:{click:function($event){return _vm.showCreateDialog(element)}}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e()],2):_vm._e()],1)})),1)})),1)})),_vm.addLongDescriptionVisibility?_c("long-description-editor",{attrs:{content:_vm.model.longDesc,visibility:_vm.addLongDescriptionVisibility},on:{"update:visibility":function($event){_vm.addLongDescriptionVisibility=$event},saved:function(data){return _vm.saveLongDescriptionData(data)}}}):_vm._e()],2)],1)])},staticRenderFns=[],esm_typeof=__webpack_require__(103336),objectSpread2=__webpack_require__(595082),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),countries=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(879288),__webpack_require__(450886),__webpack_require__(538077),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(169358),__webpack_require__(162506),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(634338),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(648324),__webpack_require__(425728),__webpack_require__(587207)),FAssignment=__webpack_require__(383274),SpaceAssetChooser=__webpack_require__(372587),FDatePicker=__webpack_require__(358551),vuex_esm=__webpack_require__(420629),SpaceAssetMultiChooser=__webpack_require__(673362),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),validation=__webpack_require__(990260),LongDescriptionEditorvue_type_template_id_68ee41be_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",[_c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,title:"Long Description",width:"50%",open:"top","before-close":_vm.cancelEdit,"custom-class":"fc-dialog-center-container inventory-store-dialog fc-web-form-dialog","append-to-body":!0},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("vue-editor",{staticClass:"height250 pT15",attrs:{disabled:_vm.disabled},model:{value:_vm.vueEditorData,callback:function($$v){_vm.vueEditorData=$$v},expression:"vueEditorData"}}),_vm.disabled?_vm._e():_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.cancelEdit}},[_vm._v("CANCEL")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.saveEdit}},[_vm._v("SAVE")])],1)],1)],1):_vm._e()},LongDescriptionEditorvue_type_template_id_68ee41be_staticRenderFns=[],vue2_editor_esm=__webpack_require__(2739),LongDescriptionEditorvue_type_script_lang_js={props:{content:String,visibility:Boolean,disabled:{type:Boolean,default:!1}},components:{VueEditor:vue2_editor_esm/* VueEditor */.bR},data:function(){return{vueEditorData:null}},mounted:function(){this.content&&(this.vueEditorData=this.content)},methods:{cancelEdit:function(){this.$emit("update:visibility",!1)},saveEdit:function(){this.$emit("saved",this.vueEditorData)}}},components_LongDescriptionEditorvue_type_script_lang_js=LongDescriptionEditorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_LongDescriptionEditorvue_type_script_lang_js,LongDescriptionEditorvue_type_template_id_68ee41be_render,LongDescriptionEditorvue_type_template_id_68ee41be_staticRenderFns,!1,null,null,null)
/* harmony default export */,LongDescriptionEditor=component.exports,picklist=__webpack_require__(961358),InventoryUtil=__webpack_require__(976195),baseUrl=__webpack_require__(420499),filters=__webpack_require__(638203),FLookupField=__webpack_require__(855048),FLookupFieldWizard=__webpack_require__(499751),TeamStaffMixin=__webpack_require__(462599),log_map_state=__webpack_require__(766331),enumFieldsList=["costType","unitType","status","rentalLeaseContractType","durationType","deviceType","contactType","workType","tenantType","permitType"],FacilioWebFormvue_type_script_lang_js={props:{name:{type:String},categoryId:[],reset:{type:Boolean},emitForm:{type:Boolean,required:!0},editObj:{type:Object},isServicePortal:{type:Boolean},formObj:null,disableForm:{type:Boolean},formFields:null,siteScope:Array},mixins:[TeamStaffMixin/* default */.Z],components:{WoSpaceAssetChooser:SpaceAssetChooser/* default */.Z,FAssignment:FAssignment/* default */.Z,draggable:vuedraggable_umd_default(),"space-asset-multi-chooser":SpaceAssetMultiChooser/* default */.Z,"task-space-asset-chooser":SpaceAssetChooser/* default */.Z,LongDescriptionEditor:LongDescriptionEditor,FDatePicker:FDatePicker/* default */.Z,FLookupField:FLookupField/* default */.Z,FLookupFieldWizard:FLookupFieldWizard["default"]},data:function(){return{canShowLookupWizard:!1,confirmRequest:{assignedTo:{id:""},assignmentGroup:{id:""},resource:null,assets:[],spaces:[]},loading:!0,mode:!1,fields:[],title:"",labelPosition:"left",model:null,rules:{},dataTypeMapping:{},pickListData:{},woSpaceAssetvisibility:{},mandatoryFields:{},visibility:!1,quickSearchQuery:"",taskQuickSearchQuery:"",spaceAssetDisplayName:"",sections:[],lastAddedSectionCount:1,selectedTaskSectionIdx:0,selectedTaskIdx:0,showAddTask:!1,showAddTrigger:!1,taskSpaceChooserVisibility:!1,chooserVisibility:!1,utilityChooserVisibility:!1,selectedTask:{validation:"none",options:[],inputType:1,enableInput:!1,attachmentRequired:!1,readingFieldId:null},newTask:{subject:"",description:"",resource:{id:-1},readingFieldId:null,options:[],inputType:1,sectionId:-1,uniqueId:-1,enableInput:!1,attachmentRequired:!1,inputValidation:null,inputValidationRuleId:-1,safeLimitRuleId:-1,minSafeLimit:null,maxSafeLimit:null,validation:"none"},moveIt:!0,dialogVisible:!1,showTaskSettings:!1,taskReadingFields:[],errorIndex:null,metricsUnits:{},countryList:countries/* default */.Z,imageUploadUrl:null,utilityAssets:[],selectedResourceLabel:null,selectedSiteLabel:null,selectedAssetLabel:null,selectedResources:[],selectedAssets:[],items:[],itemTypes:[],tools:[],toolTypes:[],vendors:[],assets:[],storeRooms:[],vendorItems:[],nonVendorItems:[],labours:[],services:[],addLongDescriptionVisibility:!1,visitors:[],formId:-1,disableWorkPermitVendorFields:!0,vendorContacts:[],vendorOpts:{},actualForms:null}},created:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:_this.$store.dispatch("loadSite"),_this.$store.dispatch("loadTicketCategory"),_this.$store.dispatch("loadTicketStatus","workorder"),_this.$store.dispatch("loadTicketType"),_this.$store.dispatch("loadTicketPriority"),_this.$store.dispatch("loadAssetCategory"),_this.$store.dispatch("loadSpaceCategory"),_this.$store.dispatch("loadGroups"),_this.loadAssetPickListData(),_this.loadPickList("vendors",_this.vendorOpts).then((function(){for(var options=_this.vendorOpts.options,i=0;i<options.length;i++)options[i].value=""+options[i].value}));case 10:case"end":return _context.stop()}}),_callee)})))()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},locations:function(state){return state.locations},ticketstatus:function(state){return state.ticketStatus.workorder},ticketpriority:function(state){return state.ticketPriority},ticketcategory:function(state){return state.ticketCategory},sites:function(state){return state.site}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketCategoryPickList","getTicketStatusPickList","getTicketTypePickList","getTicketPriorityPickList","getSpaceCategoryPickList","getAssetCategory"])),{},{getVendorField:function(){var vendorField,fields=this.fields;return fields.forEach((function(field){var currentField=field[0];"vendor"===currentField.parent&&(vendorField=field[0])})),vendorField},showUsersWithNoScope:function(){return"multi_web_pm"===this.name},reservableFilter:function(){var temp={reservable:{value:["true"],operator:"is"}};return temp},spaceMap:function(){return this.spaces.reduce((function(arr,space){return arr[space.id]=space.name,arr}),{})},ticketStatusMap:function(){return this.getTicketStatusPickList("workorder")},tickettype:function(){return this.getTicketTypePickList()},spacecategory:function(){return this.getSpaceCategoryPickList()},filter:function(){var filter={};return this.model.siteId&&this.model.siteId?filter.site=Number(this.model.siteId):this.model.site&&this.model.site.id&&(filter.site=Number(this.model.site.id)),filter},resourceData:function(){return{isIncludeResource:!0,selectedResources:this.model.spaces.map((function(resource){return{id:resource&&"object"===(0,esm_typeof/* default */.Z)(resource)?resource.id:resource}}))}},siteresourceData:function(){return{selectedResources:this.model.sites&&this.model.sites.map((function(space){return{id:space}}))}},energyUtilityData:function(){return{assetCategory:this.categoryId,isIncludeResource:!0,selectedResources:this.model.assets.map((function(resource){return{id:resource&&"object"===(0,esm_typeof/* default */.Z)(resource)?resource.id:resource}}))}},currentSiteId:function(){return Number(this.$cookie.get("fc.currentSite"))},rotatingItemList:function(){var _this2=this;return this.items.filter((function(item){return _this2.$getProperty(item,"itemType.isRotating")}))},rotatingToolList:function(){var _this3=this;return this.tools.filter((function(tool){return _this3.$getProperty(tool,"toolType.isRotating")}))},defaultFields:function(){var actualForms=this.actualForms,_ref=actualForms||{},fields=_ref.fields,defaultFields=[];return(0,validation/* isEmpty */.xb)(fields)||fields.forEach((function(field){var _ref2=field||{},fieldObj=_ref2.field,name=_ref2.name;((0,validation/* isEmpty */.xb)(fieldObj)||fieldObj.default)&&defaultFields.push(name)})),defaultFields}}),mounted:function(){this.initForm(this.formObj)},watch:{siteScope:function(newVal){if(newVal&&newVal.length&&this.groups&&this.fields){for(var filtered=[],k=0;k<this.groups.length;k++){var group=this.groups[k];if(!group.siteId||group.siteId<0){var option={};option.label=group.name,option.value=String(group.groupId),option.siteId=group.siteId,filtered.push(option)}else if(this.siteScope.includes(group.siteId)){var _option={};_option.label=group.name,_option.value=String(group.groupId),_option.siteId=group.siteId,filtered.push(_option)}}for(var i=0;i<this.fields.length;i++){var field=this.fields[i];if(field)for(var j=0;j<field.length;j++){var element=field[j];element&&(element.lookupModuleName&&"groups"===element.lookupModuleName&&(element.options=filtered))}}}},loading:function(newVal,oldVal){newVal!==oldVal&&(this.loading||this.$emit("loaded"))},editObj:function(newVal,oldVal){var _this4=this,self=this;if(newVal!==oldVal){var obj=this.$helpers.cloneFromSchema(this.model,newVal);Object.keys(obj).filter((function(key){return key in _this4.model})).forEach((function(key){if(obj[key]&&"spaces"===key)self.selectedResourceLabel=self.resourceLabel(obj[key]),_this4.model[key]=obj[key];else if(obj[key]&&"space"===key)self.spaceAssetDisplayName=self.model[key].name,self.model[key]=obj[key];else if(obj[key]&&"assets"===key)_this4.model[key]=obj[key];else if(obj[key]&&"sites"===key)self.selectedSiteLabel=self.siteLabel(obj[key]),_this4.model[key]=obj[key];else if(obj[key]&&"assignmentGroup"!==key&&"assignedTo"!==key&&"owner"!==key){_this4.model[key]=obj[key];var defaultFields=_this4.defaultFields;_this4.model[key]instanceof Object&&_this4.model[key].hasOwnProperty("id")&&obj[key]instanceof Object&&obj[key].hasOwnProperty("id")&&obj[key].id&&"vendor"!==key&&defaultFields.includes(key)&&(_this4.model[key].id=String(obj[key].id))}}))}},emitForm:function(){this.emitForm&&this.save()},reset:function(){this.reset&&(this.resetForm(),this.$emit("update:reset",!1))},model:{handler:function(){this.model&&this.$emit("update:model",this.model),this.model.resource&&this.model.resource.name&&(this.spaceAssetDisplayName=this.model.resource.name),this.model.spaces&&(this.selectedResourceLabel=this.resourceLabel(this.model.spaces)),this.model.sites&&(this.selectedSiteLabel=this.siteLabel(this.model.sites)),""===this.spaceAssetDisplayName&&this.model.space&&"reservationForm"===this.name&&(this.spaceAssetDisplayName=this.model.space.name)},deep:!0},formObj:{handler:function(newVal,oldVal){this.initForm(newVal)}}},methods:{setLookupFieldValue:function(props){var _ref3=props||{},field=_ref3.field,_ref4=field||{},parent=_ref4.parent,name=_ref4.name,id=this.$getProperty(field,"selectedItems.0.value");this.model[parent][name]=id},getBaseURL:function(){return(0,baseUrl/* getBaseURL */.BS)()},getSpaceName:function(id){return id&&this.spaceMap[id]?this.spaceMap[id]:""},span:function(labelPosition,currentSpan){return"left"===labelPosition?1===currentSpan?24:8:1===currentSpan?24:12},resourceFilter:function(){return[3]},saveTaskSettings:function(){this.model.tasks[this.selectedTaskSectionIdx].tasks[this.selectedTaskIdx]=this.$helpers.cloneObject(this.selectedTask),this.showTaskSettings=!1},filterBySite:function(option){var hasSite=this.model.hasOwnProperty("site"),hasSiteId=this.model.hasOwnProperty("siteId");if(option.hasOwnProperty("siteId")&&option.siteId&&option.siteId>-1&&(hasSite||hasSiteId)){var siteId=hasSite?this.model.site.id:this.model.siteId;return!(siteId&&siteId>-1)||Number(option.siteId)===Number(siteId)}return!0},addAttachment:function(){},attachnewfile:function(){this.$refs.uploadData.open()},filesChange:function(elementName,selectedFiles){for(var num in selectedFiles){var fileEntry={fileName:selectedFiles[num].name,fileSize:selectedFiles[num].size,prettyFileSize:(0,filters/* prettyBytes */.Hi)(selectedFiles[num].size),contentType:selectedFiles[num].type,status:null,error:null,selectedFiles:selectedFiles[num]};this.model[elementName].attachments.push(fileEntry),this.model[elementName].uploadFiles.push(new File([selectedFiles[num]],selectedFiles[num].name))}},logoChange:function(elementName,selectedFile){var self=this,picReader=new FileReader;this.model[elementName].uploadLogo.push(new File([selectedFile[0]],selectedFile[0].name)),picReader.addEventListener("load",(function(event){self.model[elementName].logoImageUrl=event.target.result})),picReader.readAsDataURL(selectedFile[0])},deleteAttachment:function(name,index){this.model[name].attachments&&this.model[name].uploadFiles&&(this.model[name].attachments.splice(index,1),this.model[name].uploadFiles.splice(index,1))},deleteLogo:function(name){this.model[name].logo&&this.model[name].uploadLogo&&(this.model[name].uploadLogo=[],this.model[name].logoImageUrl="")},initForm:function(formObj){var _this5=this;if(this.name)if(formObj)this.bindFieldsType(formObj);else{var url=null;url=(this.isServicePortal,"/getFormMeta?formNames=".concat(this.name)),
// eslint-disable-next-line @facilio/no-http
this.$http.get(url).then((function(response){_this5.formId=response.data.forms[0].id,_this5.bindFieldsType(response.data.forms[0]),_this5.actualForms=response.data.forms[0]})).catch((function(){}))}else this.bindFieldsType(this.formFields)},showSpaceAssetChooser:function(){this.visibility=!0},showTaskSpaceAssetChooser:function(){this.taskSpaceChooserVisibility=!0},associateResource:function(selectedObj){this.model.spaces=[],selectedObj.resourceList&&selectedObj.resourceList.length&&(this.model.spaces=selectedObj.resourceList),this.selectedResourceLabel=this.resourceLabel(this.model.spaces),this.chooserVisibility=!1,this.$forceUpdate()},associateSite:function(selectedObj){this.model.sites=[],selectedObj.resourceList&&selectedObj.resourceList.length&&(this.model.sites=selectedObj.resourceList.map((function(resource){return resource.id}))),this.selectedSiteLabel=this.siteLabel(this.model.sites),this.chooserVisibility=!1,this.$forceUpdate()},associateAssets:function(selectedObj){this.model.assets=[],selectedObj.resourceList&&selectedObj.resourceList.length&&(this.model.assets=selectedObj.resourceList,this.selectedAssetLabel=this.assetLabel(this.model.assets)),this.utilityChooserVisibility=!1,this.$forceUpdate()},removeAsset:function(index){this.model.assets.splice(index,1),this.$forceUpdate()},resourceLabel:function(selectedResourceObject){if(selectedResourceObject){var message,selectedCount=selectedResourceObject.length,categoryName="Space";return message=selectedCount>0?selectedCount+" "+(selectedCount>1?categoryName+"s":categoryName):"",message}},siteLabel:function(selectedResourceObject){if(selectedResourceObject){var message,selectedCount=selectedResourceObject.length,categoryName="Site";return message=selectedCount>0?selectedCount+" "+(selectedCount>1?categoryName+"s":categoryName):"",message}},assetLabel:function(selectedResourceObject){if(selectedResourceObject){var message,selectedCount=selectedResourceObject.length,categoryName="Asset";return message=selectedCount>0?selectedCount+" "+(selectedCount>1?categoryName+"s":categoryName):"",message}},associateTaskSpace:function(selectedObj){this.taskSpaceChooserVisibility=!1,this.model.tasks[this.selectedTaskSectionIdx].tasks[this.selectedTaskIdx].resource=selectedObj,this.onSelectInput()},associateQr:function(selectedObj,fieldName){this.model[fieldName||"resource"]={id:selectedObj.id},this.spaceAssetDisplayName=selectedObj.name,this.visibility=!1,this.$emit("workflowresponse",selectedObj.id),this.$forceUpdate()},associate:function(selectedObj,fieldName){this.model[fieldName||"resource"]={id:selectedObj.id},this.spaceAssetDisplayName=selectedObj.name,this.visibility=!1,this.$forceUpdate()},resetForm:function(){var _this6=this;
// Temp handing for reset should work on props to reset all fields
Object.keys(this.model).forEach((function(v){_this6.model[v]instanceof Object&&_this6.model[v].hasOwnProperty("id")?_this6.model[v].id=null:_this6.model[v]=null,_this6.spaceAssetDisplayName&&(_this6.spaceAssetDisplayName="")})),this.$refs["newRecordForm"].resetFields()},bindFieldsType:function(data){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var modelObj,modifier,promises,requesterPostion,i,field,_loop,y;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:for(i in _this7.title=data.displayName,_this7.labelPosition=data.labelPositionVal,_this7.fields=[],modelObj={},modifier={},promises=[],_this7.loading=!0,_this7.isServicePortal&&(data.fields.forEach((function(d,i){"requester"===d.name&&(requesterPostion=i)})),requesterPostion>-1&&(_this7.$portaluser?data.fields.splice(requesterPostion,1):(data.fields.splice(requesterPostion,1,{displayTypeEnum:"TEXTBOX",name:"name",parent:"requester",sequenceNumber:1,displayName:"Requester Name",span:1,required:!0,isRequester:!0}),data.fields.splice(requesterPostion+1,0,{displayTypeEnum:"TEXTBOX",name:"email",parent:"requester",sequenceNumber:2,displayName:"Requester Email",span:1,required:!0,isRequester:!0}),_this7.reorderSequenceNumber(data.fields)))),data.fields)field=data.fields[i],_this7.fields[field.sequenceNumber-1]||(_this7.fields[field.sequenceNumber-1]=[]),1===field.span?_this7.fields[field.sequenceNumber-1].push(field):2===field.span?_this7.fields[field.sequenceNumber-1][0]?_this7.fields[field.sequenceNumber-1][0]=field:_this7.fields[field.sequenceNumber-1].push(field):3===field.span&&(_this7.fields[field.sequenceNumber-1][1]?_this7.fields[field.sequenceNumber-1][1]=field:_this7.fields[field.sequenceNumber-1].push(field));_loop=(0,regeneratorRuntime/* default */.Z)().mark((function _loop(y){var _loop2,k;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:modifier[y]=[],_loop2=(0,regeneratorRuntime/* default */.Z)().mark((function _loop2(){var field,uidx,user,userOption,gidx,group,option,isPromise,sidx,space,_option2,_isPromise,_isPromise2,_isPromise3,options,_gidx,_group,_option3,_isPromise4,_isPromise5,_isPromise6,_isPromise7,_isPromise8,vendorId,permitType,_isPromise9,urgency,_i2,_i3,_i4;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(field=_this7.fields[y][k],"users"!==field.specialType){_context2.next=7;break}for(uidx in field.options=[],_this7.users)user=_this7.users[uidx],userOption={},userOption.label=user.name+" ("+user.email+")",userOption.value=user.id,field.options.push(userOption);modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]),_context2.next=104;break;case 7:if("groups"!==field.specialType){_context2.next=13;break}for(gidx in field.options=[],_this7.groups)group=_this7.groups[gidx],option={},option.label=group.name,option.value=group.groupId,option.siteId=group.siteId,(!_this7.showUsersWithNoScope||!group.siteId||group.siteId<0)&&field.options.push(option),field.options.push(option);modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]),_context2.next=104;break;case 13:if("LOOKUP_POPUP"!==field.displayTypeEnum||"location"!==field.lookupModuleName){_context2.next=18;break}isPromise=_this7.parseFieldObject(field,_this7.locations,modifier,y),isPromise&&promises.push(isPromise),_context2.next=104;break;case 18:if("LOOKUP_POPUP"!==field.displayTypeEnum||"basespace"!==field.lookupModuleName){_context2.next=23;break}if(field.options=[],_this7.spaces&&_this7.spaces.length>0){for(sidx in _this7.spaces)space=_this7.spaces[sidx],_option2={},_option2.label=space.name+" ("+space.spaceTypeVal+")",_option2.value=space.id,field.options.push(_option2);modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])}else _this7.pickListData[field.lookupModuleName]=!0,_this7.loadPickList(field.lookupModuleName,field).then((function(_){modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])}));_context2.next=104;break;case 23:if("LOOKUP_POPUP"!==field.displayTypeEnum||"site"!==field.lookupModuleName){_context2.next=28;break}field.options=[],_this7.sites&&_this7.sites.length>0?_this7.sites.forEach((function(site){var option={};option.label=site.name,option.value=String(site.id),field.options.push(option)})):(_this7.pickListData[field.lookupModuleName]=!0,_this7.loadPickList(field.lookupModuleName,field).then((function(_){modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])}))),_context2.next=104;break;case 28:if("LOOKUP_POPUP"!==field.displayTypeEnum||!field.lookupModuleName||"building"!==field.lookupModuleName){_context2.next=33;break}_isPromise=_this7.parseSpaceFieldObject(field,_this7.spaces,"Building",modifier,y),_isPromise&&promises.push(_isPromise),_context2.next=104;break;case 33:if("LOOKUP_POPUP"!==field.displayTypeEnum||"floor"!==field.lookupModuleName){_context2.next=38;break}_isPromise2=_this7.parseSpaceFieldObject(field,_this7.spaces,"Floor",modifier,y),_isPromise2&&promises.push(_isPromise2),_context2.next=104;break;case 38:if("LOOKUP_POPUP"!==field.displayTypeEnum||"asset"!==field.lookupModuleName){_context2.next=43;break}_isPromise3=_this7.parseFieldObject(field,_this7.assets,modifier,y),_isPromise3&&promises.push(_isPromise3),_context2.next=104;break;case 43:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"vendors"!==field.lookupModuleName||!_this7.vendorOpts||!_this7.vendorOpts.options){_context2.next=48;break}field.options=_this7.vendorOpts.options,modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]),_context2.next=104;break;case 48:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"tickettype"!==field.lookupModuleName||"web_pm"!==_this7.name&&"multi_web_pm"!=_this7.name){_context2.next=55;break}options=[],Object.keys(_this7.tickettype).forEach((function(i){_this7.tickettype[i]&&options.push({label:_this7.tickettype[i],value:String(i)})})),field.options=options,modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]),_context2.next=104;break;case 55:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"groups"!==field.lookupModuleName){_context2.next=61;break}for(_gidx in field.options=[],_this7.groups)_group=_this7.groups[_gidx],_option3={},_option3.label=_group.name,_option3.value=String(_group.groupId),_option3.siteId=_group.siteId,field.options.push(_option3);modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]),_context2.next=104;break;case 61:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"ticketstatus"!==field.lookupModuleName){_context2.next=66;break}_isPromise4=_this7.parseFieldObject(field,_this7.ticketStatusMap,modifier,y),_isPromise4&&promises.push(_isPromise4),_context2.next=104;break;case 66:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"ticketpriority"!==field.lookupModuleName){_context2.next=71;break}_isPromise5=_this7.parseFieldObject(field,_this7.getTicketPriorityPickList(),modifier,y),_isPromise5&&promises.push(_isPromise5),_context2.next=104;break;case 71:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"ticketcategory"!==field.lookupModuleName){_context2.next=76;break}_isPromise6=_this7.parseFieldObject(field,_this7.getTicketCategoryPickList(),modifier,y),_isPromise6&&promises.push(_isPromise6),_context2.next=104;break;case 76:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"spaceCategory"!==field.lookupModuleName){_context2.next=81;break}_isPromise7=_this7.parseFieldObject(field,_this7.spacecategory,modifier,y),_isPromise7&&promises.push(_isPromise7),_context2.next=104;break;case 81:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"site"!==field.lookupModuleName&&"siteId"!==field.name){_context2.next=86;break}field.options=[],_this7.sites&&_this7.sites.length>0?
// handling for gobal site switch
_this7.currentSiteId&&_this7.currentSiteId>0?(_this7.sites.forEach((function(site){var option={};option.label=site.name,option.value=String(site.id),site.id===_this7.currentSiteId&&field.options.push(option)})),"site"===field.name&&modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])):(_this7.sites.forEach((function(site){var option={};option.label=site.name,option.value=String(site.id),field.options.push(option)})),"site"===field.name&&modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])):(_this7.pickListData[field.lookupModuleName]=!0,_this7.loadPickList(field.lookupModuleName,field).then((function(_){"site"===field.name&&modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])}))),_context2.next=104;break;case 86:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"rotatingItem"!==field.name){_context2.next=96;break}return _context2.next=89,(0,InventoryUtil/* getFilteredItemList */.Oh)();case 89:_this7.items=_context2.sent,field.options=[],_this7.pickListData[field.lookupModuleName]=!0,_isPromise8=_this7.loadPickList(field.lookupModuleName,field).then((function(_){modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])})),_isPromise8&&promises.push(_isPromise8),_context2.next=104;break;case 96:if("LOOKUP_SIMPLE"!==field.displayTypeEnum||"rotatingTool"!==field.name){_context2.next=103;break}return _context2.next=99,(0,InventoryUtil/* getFilteredToolList */.FI)();case 99:_this7.tools=_context2.sent,_this7.fillLookUpMeta(field,modifier,promises,y),_context2.next=104;break;case 103:if("LOOKUP_SIMPLE"===field.displayTypeEnum&&"vendorContact"===field.name&&["portalWorkpermitForm","workpermitForm"].includes(_this7.name))
// temp hack
vendorId=_this7.$getProperty(_this7,"editObj.vendor.id",null),permitType=_this7.$getProperty(_this7,"editObj.permitType",null),vendorId>0&&_this7.permitVendorChangeActions(vendorId,!0),1!==Number(permitType)&&"portalWorkpermitForm"!==_this7.name||(_this7.disableWorkPermitVendorFields=!1),_this7.fillLookUpMeta(field,modifier,promises,y);else if("LOOKUP_SIMPLE"===field.displayTypeEnum||"LOOKUP_POPUP"===field.displayTypeEnum)field.options=[],_this7.pickListData[field.lookupModuleName]=!0,_isPromise9=_this7.loadPickList(field.lookupModuleName,field).then((function(_){modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])})),_isPromise9&&promises.push(_isPromise9);else if("URGENCY"===field.displayTypeEnum)for(field.options=[],urgency=["Not Urgent","Urgent","Emergency"],_i2=0;_i2<urgency.length;_i2++)field.options.push({label:urgency[_i2],value:_i2+1});else if("DURATION"===field.displayTypeEnum)for(modelObj[field.name]={days:0,hours:0,options:[]},_i3=0;_i3<24;_i3+=.5)modelObj[field.name].options.push({label:_i3,value:_i3});else if("ADDRESS"===field.displayTypeEnum)_this7.editObj&&_this7.editObj[field.name]?modelObj[field.name]={id:_this7.editObj[field.name].id,street:null,city:null,state:null,zip:null,lat:1.1,lng:1.1,country:null}:modelObj[field.name]={street:null,city:null,state:null,zip:null,lat:1.1,lng:1.1,country:null};else if("SADDRESS"===field.displayTypeEnum)_this7.editObj&&_this7.editObj.hasOwnProperty(field.name)?modelObj[field.name]={id:_this7.editObj[field.name].id,street:null,city:null,state:null,zip:null,lat:1.1,lng:1.1,country:null}:"billToAddress"===field.name&&null===_this7.editObj?_this7.$http.get("/settings/company").then((function(response){modelObj[field.name]={street:null,city:null,state:null,zip:null,lat:1.1,lng:1.1,country:null};var address=response.data.org;modelObj.billToAddress.city=address.city,modelObj.billToAddress.state=address.state,modelObj.billToAddress.street=address.street,modelObj.billToAddress.country=address.country,modelObj.billToAddress.zip=address.zip})):modelObj[field.name]={street:null,city:null,state:null,zip:null,lat:1.1,lng:1.1,country:null};else if("PURCHASEDITEM"===field.displayTypeEnum)_this7.$set(modelObj,field.name),modelObj[field.name]=[{unitcost:null,quantity:null}];else if("WARRANTY_LINE_ITEMS"===field.displayTypeEnum)_this7.$set(modelObj,field.name),modelObj[field.name]=[{service:{id:null},toolCoverage:null,itemCoverage:null,labourCoverage:null}],_this7.loadTypes(5);else if("VENDOR_CONTACTS"===field.displayTypeEnum)_this7.$set(modelObj,field.name),modelObj[field.name]=[];else if("SERVICEVENDORS"===field.displayTypeEnum)_this7.$set(modelObj,field.name),modelObj[field.name]=[{vendor:{id:null},lastPrice:null}],_this7.loadVendorPickListData();else if("EXTERNAL_ATTENDEES"===field.displayTypeEnum)_this7.$set(modelObj,field.name),modelObj[field.name]=[];else if("RECURRING_VISITOR"===field.displayTypeEnum)modelObj[field.name]={isRecurring:1,expectedStartTime:null,expectedEndTime:null,startDate:null,endDate:null,startTime:null,endTime:null,weeks:[{dayOfWeek:1,displayName:"Monday",value:!0},{dayOfWeek:2,displayName:"Tuesday",value:!0},{dayOfWeek:3,displayName:"Wednesday",value:!0},{dayOfWeek:4,displayName:"Thrusday",value:!0},{dayOfWeek:5,displayName:"Friday",value:!0},{dayOfWeek:6,displayName:"Saturday",value:!0},{dayOfWeek:7,displayName:"Sunday",value:!0}]};else if("LINEITEMS"===field.displayTypeEnum)_this7.loadTypes(1),_this7.loadTypes(2),_this7.loadTypes(4),_this7.$set(modelObj,field.name),modelObj[field.name]=[{inventoryType:1,itemType:{id:null},toolType:{id:null},remarks:null,quantity:null,unitPrice:null}];else if("INVREQUEST_LINE_ITEMS"===field.displayTypeEnum)_this7.loadTypes(1),_this7.loadTypes(2),_this7.$set(modelObj,field.name),modelObj[field.name]=[{inventoryType:1,itemType:{id:null},toolType:{id:null},quantity:null}];else if("VISITOR_INVITEES"===field.displayTypeEnum)_this7.loadTypes(6),_this7.$set(modelObj,field.name),modelObj[field.name]=[{id:null,name:null,phone:null,email:null}];else if("LABOUR_LINE_ITEMS"===field.displayTypeEnum)_this7.loadLabours(),_this7.$set(modelObj,field.name),modelObj[field.name]=[{labour:{id:null},cost:null}];else if("SCHEDULER_INFO"===field.displayTypeEnum)for(modelObj[field.name]={isCheckedPayment:!1,paymentInterval:null,scheduleDay:null,scheduleMonth:null,scheduleTime:null,frequencyType:1,weekdays:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],months:[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}],days:[]},_i4=1;_i4<=28;_i4++)modelObj[field.name].days.push({label:_i4,value:_i4});else"UNIT"===field.displayTypeEnum?(field.MetricMeta={unitId:null,metric:null,metricName:null},_this7.loadDefaultMetricUnits()):"MULTI_USER_LIST"===field.displayTypeEnum?modelObj[field.name]=[]:"USER"===field.displayTypeEnum?(modelObj[field.name]={id:null},"reservationForm"===_this7.name&&"reservedFor"===field.name&&(modelObj[field.name].id=String(_this7.$account.user.id))):"DATE"!==field.displayTypeEnum||"requestedTime"!==field.name&&"orderedTime"!==field.name?"SELECTBOX"===field.displayTypeEnum&&"country"===field.name?field.options=countries/* default */.Z:"WOASSETSPACECHOOSER"===field.displayTypeEnum||"QR"===field.displayTypeEnum?modelObj["resource"]=null:"DECISION_BOX"===field.displayTypeEnum&&"isConsumable"===field.name?(modelObj[field.name]=!0,_this7.editObj&&_this7.editObj.hasOwnProperty("isConsumable")&&!_this7.editObj[field.name]&&(modelObj[field.name]=!1)):"DECISION_BOX"===field.displayTypeEnum?field.field&&!field.field.default?(modelObj.hasOwnProperty("data")||(modelObj["data"]={}),modelObj["data"][field.name]=!1,modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:field.name,parent:"data",displayName:field.displayName,required:field.required,span:field.span}])):modelObj[field.name]=!1:"SPACEMULTICHOOSER"===field.displayTypeEnum?modelObj["spaces"]=null:"SITEMULTICHOOSER"===field.displayTypeEnum?modelObj["sites"]=[]:"TASKS"===field.displayTypeEnum?modelObj["tasks"]=[{section:"default",tasks:[]}]:"ASSETMULTICHOOSER"===field.displayTypeEnum?modelObj["assets"]=[{section:"default",assets:[]}]:field.field&&enumFieldsList.includes(field.field.name)?"SELECTBOX"===field.displayTypeEnum&&(field.options=[],field.field.enumMap&&(Object.keys(field.field.enumMap).forEach((function(key){var option={};option.label=field.field.enumMap[key],option.value=key,field.options.push(option)})),modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]))):field.field&&!field.field.default&&("SELECTBOX"===field.displayTypeEnum?(field.options=[],field.field.enumMap&&(Object.keys(field.field.enumMap).forEach((function(key){var option={};option.label=field.field.enumMap[key],option.value=key,field.options.push(option)})),modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:field.name,parent:"data",displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]))):modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:field.name,parent:"data",displayName:field.displayName,required:field.required,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])):modelObj[field.name]=Date.now();case 104:"undefined"===typeof modelObj[field.name]&&("REQUESTER"===field.displayTypeEnum?modelObj[field.name]={}:"ATTACHMENT"===field.displayTypeEnum?modelObj["attachedFiles"]={attachments:[],uploadFiles:[]}:"LOGO"===field.displayTypeEnum?modelObj["logo"]={uploadLogo:[],logoImageUrl:""}:"WOASSETSPACECHOOSER"===field.displayTypeEnum?modelObj["resource"]=null:"TEAMSTAFFASSIGNMENT"===field.displayTypeEnum?(modelObj["assignedTo"]={id:""},modelObj["assignmentGroup"]={id:""}):"TICKETNOTES"===field.displayTypeEnum?modelObj["comment"]=null:"siteId"===field.name?modelObj["siteId"]="":"LOOKUP_SIMPLE"===field.displayTypeEnum||"LOOKUP_POPUP"===field.displayTypeEnum?modelObj[field.name]={id:""}:field.isRequester?(modelObj.hasOwnProperty(field.parent)||(modelObj[field.parent]={}),modelObj[field.parent][field.name]=""):field.field&&!field.field.default?(modelObj.hasOwnProperty("data")||(modelObj["data"]={}),modelObj["data"][field.name]=null):modelObj[field.name]=null),field.required&&"REQUESTER"!==field.displayTypeEnum&&(field.parent?(_this7.rules[field.parent]=[],_this7.rules[field.parent].push({required:!0,message:"Please input ".concat(field.displayName),trigger:"blur"})):(_this7.rules[field.name]=[],_this7.rules[field.name].push({required:!0,message:"Please input ".concat(field.displayName),trigger:"blur"}))),"ATTACHMENT"===field.displayTypeEnum?_this7.dataTypeMapping["attachedFiles"]=field.displayTypeEnum:_this7.dataTypeMapping[field.name]=field.displayTypeEnum;case 107:case"end":return _context2.stop()}}),_loop2)})),_context3.t0=(0,regeneratorRuntime/* default */.Z)().keys(_this7.fields[y]);case 3:if((_context3.t1=_context3.t0()).done){_context3.next=8;break}return k=_context3.t1.value,_context3.delegateYield(_loop2(),"t2",6);case 6:_context3.next=3;break;case 8:case"end":return _context3.stop()}}),_loop)})),_context4.t0=(0,regeneratorRuntime/* default */.Z)().keys(_this7.fields);case 11:if((_context4.t1=_context4.t0()).done){_context4.next=16;break}return y=_context4.t1.value,_context4.delegateYield(_loop(y),"t2",14);case 14:_context4.next=11;break;case 16:_this7.editObj?(modelObj.hasOwnProperty("siteId")||(modelObj["siteId"]=null),_this7.model=_this7.$helpers.cloneFromSchema(modelObj,_this7.editObj),Object.keys(_this7.model).filter((function(key){return key in _this7.model})).forEach((function(key){_this7.model[key]&&"assignmentGroup"!==key&&"assignedTo"!==key&&_this7.model[key]instanceof Object&&_this7.model[key].hasOwnProperty("id")&&_this7.model[key]instanceof Object&&_this7.model[key].hasOwnProperty("id")&&_this7.model[key].id&&"vendor"!==key&&(_this7.model[key].id=String(_this7.model[key].id))}))):_this7.model=modelObj,Promise.all(promises).then((function(_){Object.keys(modifier).forEach((function(e){var m=modifier[e];m.length>0&&m.forEach((function(n){n.required&&_this7.rules[n.parent?"".concat(n.parent,".").concat(n.name):n.name].push({required:!0,message:"Please input Requester Name",trigger:"blur"}),1===n[0].span?_this7.fields[e].splice(0,1,n[0]):2===n[0].span?_this7.fields[e][0]?_this7.fields[e][0]=n[0]:_this7.fields[e].push(n[0]):3===n[0].span&&(_this7.fields[e][1]?_this7.fields[e][1]=n[0]:_this7.fields[e].push(n[0]))}))}));
// Temp hack to introduce sections
var containsTask=!1;_this7.sections.push({fields:[]},{fields:[]});for(var _i=0;_i<_this7.fields.length;_i++)_this7.fields[_i]&&(_this7.fields[_i][0]&&"TASKS"===_this7.fields[_i][0].displayTypeEnum?(_this7.fields[_i][0].name="tasks",containsTask=!0,_this7.fields[_i].span=1,_this7.$set(_this7.sections[1],"fields",[_this7.fields[_i]])):_this7.fields[_i][0]&&"ASSETMULTICHOOSER"===_this7.fields[_i][0].displayTypeEnum?(_this7.fields[_i][0].name="utilityMeters",containsTask=!0,_this7.fields[_i].span=1,_this7.$set(_this7.sections[1],"fields",[_this7.fields[_i]])):!_this7.fields[_i][0]||"LINEITEMS"!==_this7.fields[_i][0].displayTypeEnum||"purchaseContractForm"!==_this7.name&&"rentalLeaseContractForm"!==_this7.name?_this7.fields[_i][0]&&"WARRANTY_LINE_ITEMS"===_this7.fields[_i][0].displayTypeEnum&&"warrantyContractForm"===_this7.name||_this7.fields[_i][0]&&"INVREQUEST_LINE_ITEMS"===_this7.fields[_i][0].displayTypeEnum&&"inventoryRequestForm"===_this7.name?(_this7.fields[_i][0].name="lineItems",containsTask=!0,_this7.fields[_i].span=1,_this7.$set(_this7.sections[1],"fields",[_this7.fields[_i]])):_this7.fields[_i][0]&&"VISITOR_INVITEES"===_this7.fields[_i][0].displayTypeEnum?(_this7.fields[_i][0].name="invitees",containsTask=!0,_this7.sections.push({fields:[]}),_this7.$set(_this7.sections[2],"fields",[_this7.fields[_i]])):_this7.fields[_i][0]&&"RECURRING_VISITOR"===_this7.fields[_i][0].displayTypeEnum?(containsTask=!0,_this7.fields[_i].span=1,_this7.$set(_this7.sections[1],"fields",[_this7.fields[_i]])):_this7.fields[_i][0]&&"SCHEDULER_INFO"===_this7.fields[_i][0].displayTypeEnum?(_this7.fields[_i][0].name="payment",containsTask=!0,_this7.sections.push({fields:[]}),_this7.sections[2].fields.push(_this7.fields[_i])):_this7.fields[_i][0]&&"LABOUR_LINE_ITEMS"===_this7.fields[_i][0].displayTypeEnum&&"labourContractForm"===_this7.name?(containsTask=!0,_this7.fields[_i].span=1,_this7.$set(_this7.sections[1],"fields",[_this7.fields[_i]])):_this7.sections[0].fields.push(_this7.fields[_i]):(_this7.fields[_i][0].name="lineItems",containsTask=!0,_this7.fields[_i].span=1,_this7.$set(_this7.sections[1],"fields",[_this7.fields[_i]])));containsTask||_this7.sections.splice(1,1),_this7.loading=!1}));case 18:case"end":return _context4.stop()}}),_callee2)})))()},cloneFromSchema:function(schema,obj){var _this8=this,value={};return Object.keys(schema).forEach((function(key){schema[key]instanceof Object&&obj[key]instanceof Object?value[key]=_this8.$helpers.cloneFromSchema(schema[key],obj[key]):value[key]=obj[key]})),value},reorderSequenceNumber:function(fields){fields.forEach((function(d,i){d.sequenceNumber=i+1}))},parseSpaceFieldObject:function(field,typeName,spaceType,modifier,index){var _this9=this;return field.options=[],this.spaces&&this.spaces.length>0?(Object.keys(this.spaces).forEach((function(key){var option={};_this9.spaces[key].spaceTypeVal===spaceType&&(option.label=_this9.spaces[key].name,option.value=_this9.spaces[key].id,field.options.push(option))})),modifier[index].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]),null):(this.pickListData[field.lookupModuleName]=!0,this.loadPickList(field.lookupModuleName,field).then((function(_){modifier[index].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])})))},parseFieldObject:function(field,typeName,modifier,index){return field.options=[],(0,validation/* isEmpty */.xb)(typeName)?(this.pickListData[field.lookupModuleName]=!0,this.loadPickList(field.lookupModuleName,field).then((function(_){modifier[index].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])}))):(Object.keys(typeName).forEach((function(key){var option={};option.label=typeName[key],option.value=key,field.options.push(option)})),modifier[index].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}]),null)},loadPickList:function(moduleName,field){var _this10=this;return(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:moduleName},perPage:500}).then((function(_ref5){var error=_ref5.error,options=_ref5.options;error?_this10.$message.error(error.message||"Error Occured"):(_this10.pickListData[moduleName]=!1,field.options=options)}))},sendClientErrorLog:function(error){if(!(0,validation/* isEmpty */.xb)(error)){var $account=this.$account,_ref6=$account||{},user=_ref6.user,data={userId:user.ouid,orgId:user.orgId,route:this.$router.name,message:error.message,stacktrace:error.stack||"",browser:"browser",os:"os",ceType:"client: FacilioWebForm.vue",ceInfo:null,ceUa:null};this.$http.post("/v2/errors/web",data).catch((function(){setTimeout((function(){}),6e4);//delays logging by 1min if api call fails
}))}},save:function(){var _this11=this;try{this.saving=!0;var formId=this.formId,model=this.model;this.$refs["newRecordForm"].validate((function(valid){valid?(_this11.$emit("formID",formId),_this11.$emit("validated",_this11.transformAsContextObj(model))):_this11.$emit("failed",_this11.transformAsContextObj(model))}))}catch(error){this.$message.error(this.$t("maintenance.old_pm.something_went_wrong_in_form")),this.sendClientErrorLog(error)}},cancel:function(){this.$emit("cancel",!0)},transformAsContextObj:function(model){var _this12=this,self=this;return Object.keys(model).forEach((function(key){if(model[key]&&"data"===key)Object.keys(model[key]).forEach((function(a){var dataType=self.dataTypeMapping[a];"DATE"===dataType||"DATETIME"===dataType?isNaN(model[key].a)&&(model[key][a]=Date.parse(model[key][a])):"DURATION"===dataType?model[key][a].duration=_this12.$util.daysHoursToUnixTime(model[key][a]):model[key][a]&&""===model[key][a].id&&(model[key][a].id=-1)}));else{var dataType=self.dataTypeMapping[key];"DATE"===dataType||"DATETIME"===dataType?isNaN(model[key])?model[key]=Date.parse(model[key]):isNaN(Date.parse(model[key]))||"requestedTime"!==key&&"requiredTime"!==key&&"orderedTime"!==key&&"endDate"!==key&&"fromDate"!==key&&"renewalDate"!==key&&"expectedStartTime"!==key&&"expectedEndTime"!==key||(model[key]=Date.parse(model[key])):"DURATION"===dataType?model[key].duration=_this12.$util.daysHoursToUnixTime(model[key]):model[key]&&""===model[key].id&&"owner"!==key?model[key].id=-1:model[key]&&""===model[key].id&&"owner"===key&&(model[key].id=-99)}})),model},addNewSection:function(){var error=this.validatePreTasks();error?this.$message.error(error):(this.selectedTaskSectionIdx=this.model["tasks"].length,this.model["tasks"][this.selectedTaskSectionIdx]={section:this.checkAndAddSection("Untitled Section"),tasks:[]},this.addNewTask(),this.$forceUpdate())},addNewTask:function(event,index){var _this13=this,error=this.validatePreTasks();if(error)this.$message.error(error);else{var newTask=this.$helpers.cloneObject(this.newTask);newTask.resource=this.$helpers.cloneObject(this.model.resource),this.model.resource&&newTask.resource&&(newTask.resource.name=this.spaceAssetDisplayName);var taskSection=this.model["tasks"][this.selectedTaskSectionIdx];index=index>=0?index:taskSection.tasks.length,taskSection.tasks.splice(index,0,newTask),this.$nextTick((function(){var ref=_this13.$refs["task-"+taskSection.section+"-"+index];ref&&ref[0].focus()})),this.showTaskDetails(newTask)}},fillReadings:function(){var _this14=this;this.readingFields=[],this.newWorkOrder.resource&&2===this.newWorkOrder.resource.resourceType&&this.$util.loadReadingFields(this.newWorkOrder.resource,!1).then((function(fields){_this14.readingFields=fields}))},fillTaskReadings:function(){var _this15=this;this.$util.loadReadingFields(this.selectedTask.resource,!1).then((function(fields){_this15.taskReadingFields=fields}))},onSelectInput:function(){"2"===this.selectedTask.inputType?(this.selectedTask.resource&&-1!==this.selectedTask.resource.id||(this.selectedTask.resource=this.newWorkOrder.resource),this.fillTaskReadings()):"5"!==this.selectedTask.inputType&&"6"!==this.selectedTask.inputType||this.selectedTask.options.length<2&&(this.addTaskOption(this.selectedTask),this.addTaskOption(this.selectedTask))},addTaskOption:function(selectedTask){selectedTask.options.push({name:""})},onTaskSelectInput:function(){"2"===this.taskSettingsEdit.inputType?this.fillTaskReadingsForTasks():"5"===this.taskSettingsEdit.inputType?(this.taskSettingsEdit.options=[],this.addTaskOption(this.taskSettingsEdit),this.addTaskOption(this.taskSettingsEdit)):"6"===this.taskSettingsEdit.inputType&&(this.taskSettingsEdit.options=[{name:""},{name:""}],this.taskSettingsEdit.options[0].name="YES",this.taskSettingsEdit.options[1].name="NO")},showTaskDetails:function(task){this.showAddTask=!0,this.showAddTrigger=!1,this.selectedTask=this.$helpers.cloneObject(task),this.selectedTask.inputType=String(this.selectedTask.inputType),this.selectedTask.inputType&&(this.selectedTask.enableInput=!0),this.onSelectInput()},removeTask:function(sectionName,index){var currentSection=this.model["tasks"].filter((function(section){return section.section===sectionName}))[0];currentSection.tasks.splice(index,1),this.closedisplay()},removeTaskSection:function(index){this.model["tasks"][index-1].tasks=this.model["tasks"][index-1].tasks.concat(this.model["tasks"][index].tasks),this.model["tasks"].splice(index,1),this.closedisplay(),this.selectedTaskSectionIdx=index-1},remove:function(list,index){list.splice(index,1)},closedisplay:function(){this.showAddTask=!1,this.showAddTrigger=!1},onTaskEnter:function($event,index,subject){$event.target&&0===$event.target.selectionStart&&subject||index++,this.addNewTask($event,index)},onTaskPaste:function(tasks,index,event){var _this16=this,data=event.clipboardData.getData("text/plain");if(data){var list=data.split(/[\n\r]/g);list.length>1&&(tasks[index].subject||(tasks[index].subject=list.splice(0,1)[0]),list.forEach((function(subject){subject&&(_this16.addNewTask(event,++index),tasks[index].subject=subject)})),event.preventDefault())}},checkAndAddSection:function(section){var newsection=section;for(var key in this.model["tasks"])newsection===this.model["tasks"][key].section&&(newsection=this.checkAndAddSection(newsection+this.lastAddedSectionCount),this.lastAddedSectionCount++);return newsection},validatePreTasks:function(data){var error;this.isTaskError=!1,this.errorIndex=null;var taskLength=this.model["tasks"][this.selectedTaskSectionIdx].tasks.length,prevTask={};if(taskLength>=1)prevTask=this.model["tasks"][this.selectedTaskSectionIdx].tasks[taskLength-1],prevTask&&(error=this.validateTask(prevTask),error&&(this.errorIndex=taskLength-1));else if(this.selectedTaskSectionIdx>=1){var preSectionLastTask=this.model["tasks"][this.selectedTaskSectionIdx-1].tasks.length;prevTask=this.model["tasks"][this.selectedTaskSectionIdx-1].tasks[preSectionLastTask-1],prevTask&&(error=this.validateTask(prevTask)),error&&(this.errorIndex=preSectionLastTask-1)}if(error)return this.isTaskError=!0,error},validateTask:function(task){var errorMsg="";return task.subject||(errorMsg+="Please specify the task subject \n"),task.enableInput&&(2===parseInt(task.inputType)?(parseInt(task.readingFieldId)<1||!task.readingFieldId)&&(errorMsg+="Please select a specific reading type \n"):4===parseInt(task.inputType)?"safeLimit"===task.validation&&(task.minSafeLimit||task.maxSafeLimit||(errorMsg+="Please enter either minimum or maximum value \n")):5===parseInt(task.inputType)&&(task.options.length<2?errorMsg+="Please enter atleast two options\n":task.options[0].name||task.options[1].name||(errorMsg+="Please enter atleast two options \n"))),errorMsg},cancelTaskSettings:function(){this.showTaskSettings=!1},forceUpdate:function(){this.$forceUpdate()},addPurchasedItemEntry:function(field,index,type){"PURCHASEDITEM"===type&&field.push({unitcost:null,quantity:null})},addLabourEntry:function(field,index,type){field.push({labour:{id:null},cost:null})},addWarrantyLineEntry:function(field){field.push({service:{id:null},toolCoverage:null,itemCoverage:null,labourCoverage:null})},addServiceVendorEntry:function(field){field.push({vendor:{id:null},lastPrice:null})},addVendorContactEntry:function(field){field.push({name:null,email:null,phone:null,isPortalAccessNeeded:!1})},addVisitorInviteesEntry:function(field){field.push({id:null,email:null,phone:null})},addItemEntry:function(field){var emptyData={inventoryType:1,itemType:{id:null},toolType:{id:null},remarks:null,quantity:null,unitPrice:null};field.push(emptyData)},addIRItemEntry:function(field){var emptyData={inventoryType:1,itemType:{id:null},toolType:{id:null},quantity:null};field.push(emptyData)},removeEntryFromList:function(list,index){list.splice(index,1)},addExternalAttendeeEntry:function(field){field.push({name:null,email:null})},imageChange:function(file,name){if(file){var formData=new FormData;formData.append("fileContent",file[0]);var self=this;self.$http.post("/v2/files/add",formData).then((function(response){self.model[name]=response.data.result.fileInfo.fileId}))}},loadDefaultMetricUnits:function(){var self=this;self.$http.get("/units/getDefaultMetricUnits").then((function(response){self.metricsUnits=response.data}))},loadUnit:function(name,field){if(field.metric>0){var metric=this.metricsUnits.metrics.filter((function(d){if(d.metricId===field.metric)return d}));field.metricName=metric[0]._name,"PERCENTAGE"===field.metricName&&this.metricsUnits.metricWithUnits[metric[0]._name].splice(1,1),field.unitId=this.setOrgUnit(field.metric),this.model[name]=this.setOrgUnit(field.metric)}},setOrgUnit:function(metricId){if(this.metricsUnits.orgUnitsList){var unitId=null;return this.metricsUnits.orgUnitsList.forEach((function(d){d.metric===metricId&&(unitId=d.unit)})),unitId>0?unitId:null}},setUnit:function(name,unitid){this.model[name]=unitid},showCreateDialog:function(element){var self=this;this.$quickAdd.open({formName:element.createFormName,moduleName:element.lookupModuleName,onAdd:function(data){if(data.moduleData){var option={label:data.moduleData.displayName?data.moduleData.displayName:data.moduleData.name,value:data.moduleData.id+""};element.options.push(option),element.parent?self.model[element.parent][element.name]=option.value:self.model[element.name]=option.value}},onCancel:function(){}})},loadTypes:function(type){var _this17=this,rotatingFilter={isRotating:{operatorId:15,value:["true"]}};if(1===type){if(0===this.itemTypes.length){var self=this,url="v2/itemTypes/view/all";"rentalLeaseContractForm"===this.name&&(url=url+"?&filters="+encodeURIComponent(JSON.stringify(rotatingFilter))),this.$http.get(url).then((function(response){self.itemTypes=response.data.result&&response.data.result.itemTypes?response.data.result.itemTypes:[],self.nonVendorItems=self.itemTypes}))}}else if(2===type){if(0===this.toolTypes.length){var _self=this,_url="v2/toolTypes/view/all";"rentalLeaseContractForm"===this.name&&(_url=_url+"?&filters="+encodeURIComponent(JSON.stringify(rotatingFilter))),this.$http.get(_url).then((function(response){_self.toolTypes=response.data.result&&response.data.result.toolTypes?response.data.result.toolTypes:[]}))}}else if(3===type){if(0===this.vendors.length){var _self2=this;_self2.$http.get("/v2/vendors/view/all").then((function(response){_self2.vendors=response.data.result.vendors})).catch((function(){}))}}else if(4===type){if(0===this.storeRooms.length){var _self3=this;_self3.$http.get("/v2/storeRoom/view/all").then((function(response){_self3.storeRooms=response.data.result.storeRooms})).catch((function(){}))}}else if(5===type){if(0===this.services.length){var _self4=this;_self4.$http.get("/v2/service/all").then((function(response){_self4.services=response.data.result.services})).catch((function(){}))}}else 6===type&&0===this.visitors.length&&this.$http.get("/v2/visitor/all").then((function(response){_this17.visitors=response.data.result.visitors||[]})).catch((function(){}))},loadLabours:function(){var self=this;self.$http.get("/v2/labour/labourList").then((function(response){self.labours=response.data.result.labours})).catch((function(){}))},loadRateForLabour:function(labourData){var selectedLabour=this.labours.filter((function(labour){return labourData.labour.id===labour.id}));1===selectedLabour.length?labourData.cost=selectedLabour[0].cost:labourData.cost=null},vendorChangeActions:function(id){var self=this;this.$http.get("/v2/itemTypesForVendors/vendor/"+id).then((function(response){self.vendorItems=response.data.result.itemVendors,self.nonVendorItems=self.itemTypes.filter((function(item){return!self.vendorItems.some((function(vItem){return item.id===vItem.itemType.id}))}))})).catch((function(){}))},storeRoomChangeActions:function(id){var selectedStoreRoom=this.storeRooms.filter((function(store){return store.id===parseInt(id)}));this.model.shipToAddress&&selectedStoreRoom[0].location&&(this.model.shipToAddress.city=selectedStoreRoom[0].location.city,this.model.shipToAddress.state=selectedStoreRoom[0].location.state,this.model.shipToAddress.street=selectedStoreRoom[0].location.street,this.model.shipToAddress.country=selectedStoreRoom[0].location.country,this.model.shipToAddress.zip=selectedStoreRoom[0].location.zip)},isApprovalNeededChangeActions:function(){this.model["isApprovalNeeded"]||(this.model["isGatePassRequired"]=!1)},isRotatingChangeActions:function(){this.model["isRotating"]||(this.model["isConsumable"]=!0)},rotatingItemToolChangeActions:function(){this.model.rotatingItem.id>0&&(this.model.rotatingTool.id=null),this.model.rotatingTool.id>0&&(this.model.rotatingItem.id=null)},lineItemChangeActionItem:function(val){if(val.itemType&&val.itemType.id&&this.model.vendor.id){var param={vendorId:this.model.vendor.id,inventoryType:1,itemTypeId:val.itemType.id};this.$http.post("/v2/purchasecontract/getActiveContractPrice",param).then((function(response){0===response.data.responseCode&&(val.unitPrice=response.data.result.unitPrice)})).catch((function(){}))}},lineItemChangeActionTool:function(val){if(val.toolType&&val.toolType.id&&this.model.vendor.id){var param={vendorId:this.model.vendor.id,inventoryType:2,toolTypeId:val.toolType.id};this.$http.post("/v2/purchasecontract/getActiveContractPrice",param).then((function(response){0===response.data.responseCode&&(val.unitPrice=response.data.result.unitPrice)})).catch((function(){}))}},loadAssetPickListData:function(){var _this18=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"asset",skipDeserialize:!0}});case 2:_yield$getFieldOption=_context5.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this18.$message.error(error.message||"Error Occured"):_this18.assets=options;case 6:case"end":return _context5.stop()}}),_callee3)})))()},loadVendorPickListData:function(){var _this19=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _yield$getFieldOption2,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"vendors"}});case 2:_yield$getFieldOption2=_context6.sent,error=_yield$getFieldOption2.error,options=_yield$getFieldOption2.options,error?_this19.$message.error(error.message||"Error Occured"):_this19.vendors=options;case 6:case"end":return _context6.stop()}}),_callee4)})))()},loadServicePickListData:function(){var _this20=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var _yield$getFieldOption3,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"services"}});case 2:_yield$getFieldOption3=_context7.sent,error=_yield$getFieldOption3.error,options=_yield$getFieldOption3.options,error?_this20.$message.error(error.message||"Error Occured"):_this20.services=options;case 6:case"end":return _context7.stop()}}),_callee5)})))()},saveLongDescriptionData:function(data){this.model["longDesc"]=data,this.addLongDescriptionVisibility=!1},paymentRadioGroupChangeActions:function(model){model.paymentInterval=null,model.scheduleTime=null,model.scheduleDay=null,model.scheduleMonth=null},isSelectCreateNew:function(id){return!(0,validation/* isEmpty */.xb)(id)&&isNaN(id)},fillVisitorObject:function(field){if(this.isSelectCreateNew(field.id))field.phone=null,field.email=null;else{var visitor=this.visitors.find((function(i){return i.id===field.id}));field.phone=visitor.phone,field.email=visitor.email}},resetIsRecurringValues:function(isRecurring,fieldName){this.model[fieldName]={isRecurring:isRecurring,expectedStartTime:null,expectedEndTime:null,startDate:null,endDate:null,startTime:null,endTime:null,weeks:[{dayOfWeek:1,displayName:"Monday",value:!0},{dayOfWeek:2,displayName:"Tuesday",value:!0},{dayOfWeek:3,displayName:"Wednesday",value:!0},{dayOfWeek:4,displayName:"Thrusday",value:!0},{dayOfWeek:5,displayName:"Friday",value:!0},{dayOfWeek:6,displayName:"Saturday",value:!0},{dayOfWeek:7,displayName:"Sunday",value:!0}]}},permitTypeChangeActions:function(val){1===Number(val)?this.disableWorkPermitVendorFields=!1:(this.disableWorkPermitVendorFields=!0,this.$setProperty(this,"model.vendor.id",""),this.$setProperty(this,"model.vendorContact.id",""))},permitVendorChangeActions:function(val,init){var _this21=this;if(!(0,validation/* isEmpty */.xb)(val)){var filter={vendor:{operatorId:36,value:[val+""]}};this.$http.get("/v2/contacts/all?filters="+encodeURIComponent(JSON.stringify(filter))).then((function(response){0===response.data.responseCode&&_this21.$set(_this21,"vendorContacts",response.data.result.contacts||[])}))}init||this.$setProperty(this,"model.vendorContact.id","")},fillLookUpMeta:function(field,modifier,promises,y){field.options=[],this.pickListData[field.lookupModuleName]=!0;var isPromise=this.loadPickList(field.lookupModuleName,field).then((function(_){modifier[y].push([{displayTypeEnum:field.displayTypeEnum,name:"id",parent:field.name,displayName:field.displayName,required:field.required,options:field.options,span:field.span,allowCreate:field.allowCreate,lookupModuleName:field.lookupModuleName,createFormName:field.createFormName}])}));isPromise&&promises.push(isPromise)}}},components_FacilioWebFormvue_type_script_lang_js=FacilioWebFormvue_type_script_lang_js,FacilioWebForm_component=(0,componentNormalizer/* default */.Z)(components_FacilioWebFormvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FacilioWebForm=FacilioWebForm_component.exports},
/***/138688:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"80f46d3c22415d207bb6917da6b29753.svg";
/***/},
/***/401213:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"fdd0e7f1a607dbd85c230219e6d6b6ac.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/11801.js.map