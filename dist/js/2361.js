(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[2361,51201,5831],{
/***/574752:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Avatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Avatar.vue?vue&type=template&id=7f0d5689
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.user||_vm.name?_c("div",{staticClass:"fc-avatar-inline"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl,alt:"Profile Avatar"}}):_c("div",{staticClass:"fc-avatar",class:_vm.sizeClass,style:_vm.bgColor},[_vm._v(" "+_vm._s(_vm.trimmedName)+" ")])]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(709873),__webpack_require__(228436),__webpack_require__(450886),__webpack_require__(677049),__webpack_require__(821694),__webpack_require__(420629)),Avatarvue_type_script_lang_js={props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},color:{type:String},name:{type:Boolean}},data:function(){return{sizeClass:"fc-avatar-"+this.size,fullName:"",trimmedName:null,avatarUrl:null,bgColor:"background-color: "+(this.color?this.color:this.getRandomBgColor())}},computed:(0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),mounted:function(){var _this=this;if(this.user){var userName="";if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this.user.id}));userObj&&userObj.avatarUrl&&(this.avatarUrl=userObj.avatarUrl),userObj&&userObj.name&&(userName=userObj.name)}userName=userName||this.user.name,userName&&(this.fullName=userName,this.trimmedName=this.getAvatarName(userName),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))}else this.name&&(this.trimmedName=this.getAvatarName(this.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},watch:{user:function(){var _this2=this;if(this.user.avatarUrl)this.avatarUrl=this.user.avatarUrl;else if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this2.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null;this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.name":function(){this.user.name&&(this.fullName=this.user.name,this.trimmedName=this.getAvatarName(this.user.name),this.bgColor="background-color: "+(this.color?this.color:this.getRandomBgColor()))},"user.avatarUrl":function(){this.user.avatarUrl?this.avatarUrl=this.user.avatarUrl:this.avatarUrl=null},"user.id":function(){var _this3=this;if(this.user.id){var userObj=this.users.find((function(user){return user.id===_this3.user.id}));userObj&&userObj.avatarUrl?this.avatarUrl=userObj.avatarUrl:this.avatarUrl=null}else this.avatarUrl=null}},methods:{getAvatarName:function(name){for(var parts=name.split(/[ -]/),initials="",initialLen=2,count=0,i=0;i<parts.length;i++)if(""!==parts[i].trim()&&(initials+=parts[i].charAt(0),count++,count>=initialLen))break;initials.length<initialLen&&name.length>=initialLen&&(initials=name.trim().substring(0,initialLen));var avatarName=initials.toUpperCase();return avatarName},getRandomBgColor:function(){var colors=["#FFBA51","#34BFA3","#FF2F82","#29D9A7","#ECDC74","#927FED","#FF61A8","#fbf383","#ac4352","#6db1f4"],userKey=this.user.email?this.user.email:this.user.name,userUniqueNum=Array.from(userKey).map((function(letter){return letter.charCodeAt(0)})).reduce((function(current,previous){return previous+current})),colorIndex=userUniqueNum%colors.length,color=colors[colorIndex];return color}}},components_Avatarvue_type_script_lang_js=Avatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Avatarvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Avatar=component.exports},
/***/947748:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FSearch}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FSearch.vue?vue&type=template&id=aca29d08
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-search-container mR20"},[void 0!=_vm.boolval?_c("div",[_c("el-input",{ref:"quickSearchQuery",staticClass:"fc-input-full-border-h35 mT15 mR10 wo-assigned-search",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_vm.quickSearchQuery?_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"}):_vm._e()])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&void 0==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},nativeOn:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.quickSearch.apply(null,arguments)}},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):_vm._e(),1==_vm.showQuickSearch&&void 0==_vm.boolval&&1==_vm.remote?_c("div",[_c("el-input",{directives:[{name:"show",rawName:"v-show",value:_vm.showQuickSearch,expression:"showQuickSearch"}],ref:"quickSearchQuery",staticClass:"f-quick-search-input ",attrs:{autofocus:!0,placeholder:"Search","prefix-icon":"el-icon-search"},on:{change:_vm.remoteSearch},model:{value:_vm.quickSearchQuery,callback:function($$v){_vm.quickSearchQuery=$$v},expression:"quickSearchQuery"}},[_c("i",{staticClass:"el-icon-close pointer",attrs:{slot:"suffix"},on:{click:_vm.closeSearch},slot:"suffix"})])],1):void 0==_vm.boolval&&_vm.searchHide?_c("div",{staticClass:"pointer flRight",on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})]):_vm._e()])},staticRenderFns=[],FSearchvue_type_script_lang_js=(__webpack_require__(538077),__webpack_require__(260228),{props:["value","searchKey","","boolval","remote"],data:function(){return{showQuickSearch:!1,quickSearchQuery:null,initialList:null,searchHide:!0}},beforeDestroy:function(){this.closeSearch()},mounted:function(){void 0!=this.boolval&&(this.showQuickSearch=this.boolval)},methods:{quickSearch:function(){var list,_this=this;this.value&&(this.quickSearchQuery?(this.initialList||(this.initialList=this.$helpers.cloneObject(this.value)),list=this.initialList.filter((function(item){return item[_this.searchKey||"name"].toLowerCase().indexOf(_this.quickSearchQuery.toLowerCase())>=0}))):(list=this.initialList,this.initialList=null),list&&this.$emit("input",list))},remoteSearch:function(){this.$emit("search",this.quickSearchQuery)},toggleQuickSearch:function(){var _this2=this;this.searchHide=!1,this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this2.$refs.quickSearchQuery&&_this2.$refs.quickSearchQuery.focus()}))},clearSearch:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.searchHide=!0},closeSearch:function(){void 0===this.boolval&&this.toggleQuickSearch(),this.quickSearchQuery=null,this.remote?this.remoteSearch():this.quickSearch(),this.searchHide=!0,this.showQuickSearch=!1,this.$emit("close")}}}),components_FSearchvue_type_script_lang_js=FSearchvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FSearchvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FSearch=component.exports},
/***/350367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUploadPhotos}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FUploadPhotos.vue?vue&type=template&id=5a0f9682
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"upload-photos-dialog fc-dialog-center-container",attrs:{title:"Upload Photos",visible:_vm.showDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event},"before-close":_vm.closeDialog}},[_vm.showDialog?_c("el-upload",{attrs:{multiple:"","list-type":"picture-card","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-error":_vm.onError,"on-remove":_vm.onRemove}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e(),_c("span",{staticClass:"dialog-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.done}},[_vm._v("Done")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),eventBus=__webpack_require__(398011),FUploadPhotosvue_type_script_lang_js={props:["module","record","list"],data:function(){return{photos:[],showDialog:!1,isChanged:!1}},methods:{open:function(){this.photos=(0,validation/* isEmpty */.xb)(this.list)?[]:this.list,this.showDialog=!0},onUpload:function(_ref){var file=_ref.file,data=(_ref.onError,{parentId:this.record.id,module:this.module}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.list.push(result.photos[0]),this.isChanged=!0)},onError:function(){this.$message.error(this.$t("setup.users_management.Invalid_image"))},onRemove:function(file){var _this=this;this.$http.post("/v2/photos/delete",{id:file.id,photoId:file.photoId,module:this.module,parentId:this.record.id}).then((function(response){if(0===response.data.responseCode){var list=(0,toConsumableArray/* default */.Z)(_this.list),index=list.findIndex((function(f){return f.id===file.id}));list.splice(index,1),_this.$emit("updatePhotos",list),_this.isChanged=!0}})).catch((function(){}))},done:function(){this.showDialog=!1,this.photos=[],this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1)},closeDialog:function(){this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1),this.showDialog=!1}}},components_FUploadPhotosvue_type_script_lang_js=FUploadPhotosvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUploadPhotosvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUploadPhotos=component.exports},
/***/131792:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PmReadingsable}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PmReadingsable.vue?vue&type=template&id=6b0e38a0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100"},[_vm.resources&&_vm.resources.length?_c("div",{staticClass:"pm-reading-table-settings row"},[_c("div",{staticClass:"fL col-6 text-left"},[_c("el-select",{staticClass:"transparent-select-box",on:{change:_vm.getReadingData},model:{value:_vm.resourceId,callback:function($$v){_vm.resourceId=$$v},expression:"resourceId"}},_vm._l(_vm.resources,(function(resource,index){return _c("el-option",{key:index,attrs:{label:resource.name,value:resource.id}})})),1)],1),_vm.hidedatefilter||_vm.config.hidedatefilter?_vm._e():_c("new-date-picker",{ref:"newDatePicker",staticClass:"fR text-right col-6",attrs:{zone:_vm.$timezone,dateObj:_vm.dateFilter},on:{date:_vm.setDateFilter}})],1):_vm._e(),_c("div",{staticClass:"width100 overflow-hidden"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):!_vm.loading&&_vm.tabeldata.length?[_c("HotTable",{ref:"hotTable",staticClass:"pmhottable",style:_vm.styleCss,attrs:{root:_vm.root,settings:_vm.hotSettings}})]:_vm.tabeldata.length?_vm._e():_c("div",{staticClass:"no-pm-reading-data"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label f14"},[_vm._v(" There are no work orders in this time period. ")])],1)],2)])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),NewDatePicker=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(186466),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(865137),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(879288),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(648324),__webpack_require__(434284),__webpack_require__(900773)),vue_handsontable=__webpack_require__(366258),vue_handsontable_default=__webpack_require__.n(vue_handsontable),NewDateHelper=__webpack_require__(105534),api=__webpack_require__(32284),PmReadingsablevue_type_script_lang_js={props:["pmObject","pm","workorder","config","settings"],components:{HotTable:vue_handsontable_default(),NewDatePicker:NewDatePicker/* default */.Z},data:function(){return{root:"tabular-pm-hot",triggerFrequencyInt:1,hidedatefilter:!0,units:[],frequencyMap:{DAILY:"hh:mm a",WEEKLY:"ddd",MONTHLY:"MMM YYYY",QUARTERTLY:"MMM YYYY",HALF_YEARLY:"MMM YYYY",ANNUALLY:"YYYY"},frequencyToDateForamterMap:{DAILY:{day:"hh:mm a",week:"ddd",month:"DD MMM YYYY",quarter:"DD MMM YYYY",year:"DD MMM YYYY"},WEEKLY:{day:"hh:mm a",week:"ddd",month:"MMM YYYY",quarter:"MMM YYYY",year:"YYYY"},MONTHLY:{day:"hh:mm a",week:"ddd",month:"MMM YYYY",quarter:"MMM YYYY",year:"YYYY"},QUARTERTLY:{day:"hh:mm a",week:"ddd",month:"MMM YYYY",quarter:"MMM YYYY",year:"YYYY"},HALF_YEARLY:{day:"hh:mm a",week:"ddd",month:"MMM YYYY",quarter:"MMM YYYY",year:"YYYY"},ANNUALLY:{day:"hh:mm a",week:"ddd",month:"MMM YYYY",quarter:"MMM YYYY",year:"YYYY"}},loading:!1,resourceId:null,tabeldata:[],updateData:[],dateFilter:NewDateHelper/* default */.Z.getDatePickerObject(22),sectionRows:[],taskRows:[],hotSettings:{data:[],columns:[],colHeaders:!1,rowHeaders:!1,rowHeaderWidth:200,width:"100%",height:200,renderAllRows:!0,readOnly:!0,columnSorting:!1,stretchH:"all",fillHandle:!1,autoWrapRow:!0,colWidths:180},hotTable:null,tableState:{
// table config to save
columns:[]},initialRendered:!1}},computed:{styleCss:function(){return"width: 100% !important;"},resources:function(){if(this.pm&&2===this.pm.pmCreationType&&this.pmObject&&this.pmObject.preventivemaintenance&&this.pmObject.preventivemaintenance&&this.pmObject.preventivemaintenance.resourcePlanners){var data=[];return this.pmObject.preventivemaintenance.resourcePlanners.forEach((function(rt){data.push(rt.resource)})),data}return this.pm&&1===this.pm.pmCreationType&&this.workorder&&this.workorder.resource?[this.workorder.resource]:[]},triggers:function(){return this.pm&&this.pm.triggers&&this.pm.triggers.length?this.pm.triggers:[]},mergedTaskList:function(){if(this.pmObject&&this.pmObject.taskList){var list=[];return Object.values(this.pmObject.taskList).forEach((function(rt){Object.values(rt).forEach((function(rl){list.push(rl)}))})),list}return[]},sectionHierarchy:function(){var _this=this,sections=[];if(this.pmObject&&this.pmObject.taskList){var keys=Object.keys(this.pmObject.taskList);keys.forEach((function(i){return sections.push({section:i,tasks:_this.pmObject.taskList[i]})}))}return sections}},created:function(){var _this2=this;api/* API */.bl.get("/v2/getReadingFieldUnits").then((function(_ref){var data=_ref.data,error=_ref.error;error?_this2.$message.error(error.message||"Error Occured"):_this2.units=_this2.$getProperty(data,"readingFieldUnits.orgUnitsList",null)}))},mounted:function(){var _this3=this,self=this;this.config&&(this.config.operatorId&&(this.dateFilter=NewDateHelper/* default */.Z.getDatePickerObject(this.config.operatorId,this.config.dateValueString)),this.config.resourceId&&(this.resourceId=this.config.resourceId)),this.$nextTick((function(rt){_this3.settings&&(Object.keys(_this3.settings).forEach((function(column){self.hotSettings[column]=self.settings[column]})),_this3.$mobile&&_this3.settings.height<100&&(_this3.hotSettings.height=600)),_this3.hidedatefilter=!1})),this.triggers&&this.triggers.length&&(this.triggerFrequencyInt=Math.min.apply(Math,(0,toConsumableArray/* default */.Z)(this.triggers.map((function(rt){return rt.frequency}))))),this.init()},methods:{init:function(){this.setDefaultValues(),this.pm&&this.getReadingData()},setDefaultValues:function(){this.resourceId=this.resources&&this.resources.length?this.resources[0].id:null},getReadingData:function(){var self=this;self.loading=!0,this.tabeldata=[];var params={pmId:this.pm.id,resourceId:this.resourceId,startTime:this.dateFilter.value&&this.dateFilter.value.length?this.dateFilter.value[0]:null,endTime:this.dateFilter.value&&this.dateFilter.value.length?this.dateFilter.value[1]:null},url="/v2/workorders/getPreventiveMaintenanceReadings";self.$http.post(url,params).then((function(response){response.data&&response.data.result&&response.data.result.workorders&&response.data.result.workorders.length&&self.prepareTableData(response.data.result.workorders),self.loading=!1}))},prepareTableData:function(data){data&&(this.tabeldata=data,data.sort((function(a,b){return a.createdTime-b.createdTime})),this.hotSettings.columns=this.getColData2(data,this.pmObject),this.hotSettings.data=this.getData2(data,this.pmObject),this.setTableData())},getColData2:function(data,pmObject){var d=[];return d.push({data:"Task"}),data.forEach((function(rt){d.push({data:rt.id,renderer:function(instance,td,row,col,prop,value,cellProperties){while(td.firstChild)td.removeChild(td.firstChild);var textNode=document.createTextNode(value||"");td.appendChild(textNode)}})})),d},displayValue:function(value,obj){if(value&&obj){if(obj.readingFieldUnit>-1){var val=this.units.find((function(rt){return rt.unit===obj.readingFieldUnit}))&&this.units.find((function(rt){return rt.unit===obj.readingFieldUnit})).unitEnum&&this.units.find((function(rt){return rt.unit===obj.readingFieldUnit})).unitEnum.symbol?this.units.find((function(rt){return rt.unit===obj.readingFieldUnit})).isLeft?this.units.find((function(rt){return rt.unit===obj.readingFieldUnit})).unitEnum.symbol+" "+value:value+" "+this.units.find((function(rt){return rt.unit===obj.readingFieldUnit})).unitEnum.symbol:value;return val}return value}return""},getColData:function(data,pmObject){var d=[];return data.forEach((function(rt){d.push({type:"numeric"})})),d},mergeTasks:function(task){if(task&&task){var list=[];return Object.values(task).forEach((function(rt){Object.values(rt).forEach((function(rl){list.push(rl)}))})),list}return[]},getData2:function(data,pmObject){var _this4=this,allRows=[],headerRow={Task:"Tasks"};data.forEach((function(workorder){headerRow[workorder.id]=_this4.$time.format(workorder.createdTime,"DD MMM YYYY hh:mm a")})),allRows.push(headerRow);var row=0;return this.sectionHierarchy.forEach((function(s){var sectionRow={Task:s.section};allRows.push(sectionRow),row++,_this4.sectionRows.push(row),s.tasks.forEach((function(task){var taskRow={Task:task.subject};data.forEach((function(workorder){for(var mergedTasks=_this4.mergeTasks(workorder.tasks),i=0;i<mergedTasks.length;i++){var t=mergedTasks[i];263===_this4.$account.org.id||146===_this4.$account.org.id?t.uniqueId===task.uniqueId&&(taskRow[workorder.id]=t.inputValue||null):t.readingFieldId===task.readingFieldId&&(taskRow[workorder.id]=t.inputValue||null)}})),allRows.push(taskRow),row++,_this4.taskRows.push(row)}))})),allRows},getData:function(data,pmObject){var d=[],self=this;return self.mergedTaskList.forEach((function(rt){var d1=[];data.forEach((function(rl){var tasks=[];if(tasks=self.mergeTasks(rl.tasks),tasks.length){var dat=tasks.find((function(rx){return rx.readingFieldId===rt.readingFieldId}))?tasks.find((function(rx){return rx.readingFieldId===rt.readingFieldId})).inputValue:null;d1.push(dat)}})),d.push(d1)})),d},getColHeader:function(data,pmObject){var _this5=this,self=this,d=[];return this.triggers&&this.triggers.length?data.forEach((function(rt){d.push(self.$time.format(rt.createdTime,_this5.getDateFormater(_this5.triggers.find((function(r){return r.frequency===_this5.triggerFrequencyInt})).frequencyEnum)))})):data.forEach((function(rt){d.push(self.$time.format(rt.createdTime,"DD MMM YYYY hh:mm a"))})),d},getDateFormater:function(FreqEnum){return this.frequencyToDateForamterMap[FreqEnum]&&this.frequencyToDateForamterMap[FreqEnum][this.dateFilter.operationOn]?this.frequencyToDateForamterMap[FreqEnum][this.dateFilter.operationOn]:this.frequencyMap[FreqEnum]},getRowHeader:function(data,pmObject){for(var rowHeaders=[],i=0;i<this.sectionHierarchy.length;i++){rowHeaders.push(this.sectionHierarchy[i].section);for(var noOfTasks=this.sectionHierarchy[i].tasks.length,j=0;j<noOfTasks;j++)rowHeaders.push(this.sectionHierarchy[i].tasks[j].subject)}return rowHeaders},setTableData:function(){var _this6=this,self=this;this.hotSettings.afterChange=function(from,to){
// self.updatedata(from, to)
self.updatedata2(from,to)},this.hotSettings.afterColumnMove=function(from,to){self.saveCurrentState()},this.hotSettings.afterColumnResize=function(col,width){self.saveCurrentState(),self.setTableHeight()},this.hotSettings.afterRender=function(){!self.hotTable&&self.$refs["hotTable"]&&(self.hotTable=self.$refs["hotTable"].table,self.setTableHeight()),self.initialRendered||(self.initialRendered=!0)},this.hotSettings.afterRenderer=function(td,row,col,prop,value,cellProperties){0===row?td.classList.add("fhot-table-header"):self.sectionRows.includes(row)?(td.classList.add("fhot-section-row"),0===col&&td.classList.add("fhot-section-cell")):0!==col||self.sectionRows.includes(row)?td.classList.add("fhot-data-cell"):td.classList.add("fhot-task-cell")},this.hotSettings.mergeCells=[],this.sectionRows.forEach((function(row){return _this6.hotSettings.mergeCells.push({row:row,col:0,colspan:4,rowspan:1})}))},convertreadableObj:function(data){return{row:data[0],col:data[1],pre:data[2],val:data[3]}},validData:function(editObj,tableData){if(null==editObj.pre&&editObj.val){if(!isNaN(Number(editObj.val)))return!0}else if(editObj.pre!==editObj.val)return!isNaN(Number(editObj.val)&&"READING"===tableData.inputTypeEnum);return!1},updatedata2:function(data,source){var self=this;if("edit"===source&&data&&data[0]&&data[0].length){var editObj=this.convertreadableObj(data[0]),tableSourceData={};if(this.tabeldata.find((function(rt){rt.id===editObj.col&&(tableSourceData=self.mergeTasks(rt.tasks)[editObj.row]?self.mergeTasks(rt.tasks)[editObj.row]:null)})),this.validData(editObj,tableSourceData)){if(tableSourceData["inputValue"]=editObj.val+"",this.updateData.find((function(rt){return rt.id===tableSourceData.id}))){var index=this.updateData.findIndex((function(rt){return rt.id===tableSourceData.id}));this.updateData.splice(index,1,tableSourceData)}else this.updateData.push(tableSourceData);this.$emit("readingData",this.updateData)}}},updatedata:function(data,source){if("edit"===source&&data&&data[0]&&data[0].length){var editObj=this.convertreadableObj(data[0]),tableSourceData=Object.values(this.tabeldata[editObj.col].tasks)?this.mergeTasks(Object.values(this.tabeldata[editObj.col].tasks))[editObj.row]:null;if(this.validData(editObj,tableSourceData)){if(tableSourceData["inputValue"]=editObj.val+"",this.updateData.find((function(rt){return rt.id===tableSourceData.id}))){var index=this.updateData.findIndex((function(rt){return rt.id===tableSourceData.id}));this.updateData.splice(index,1,tableSourceData)}else this.updateData.push(tableSourceData);this.$emit("readingData",this.updateData)}}},setTableHeight:function(){},saveCurrentState:function(){for(var _this7=this,stateColumns=[],_loop=function(){var colWidth=_this7.hotTable.getColWidth(i),idx=_this7.hotTable.toPhysicalColumn(i),name=_this7.hotSettings.columns[idx].name,stateColumn=_this7.tableState.columns.find((function(col){return col.name===name}));stateColumn.width=colWidth,stateColumns.push(stateColumn)},i=0;i<this.hotTable.getColHeader().length;i++)_loop();this.tableState.columns=stateColumns,this.reportConfig.params.tabularState=JSON.stringify(this.tableState)},setDateFilter:function(data){this.dateFilter=data,this.getReadingData()}}},components_PmReadingsablevue_type_script_lang_js=PmReadingsablevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PmReadingsablevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PmReadingsable=component.exports},
/***/751201:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Asset}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Asset.vue?vue&type=template&id=30a11ac8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.asset?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[!_vm.showSlide||"undefined"!==typeof _vm.disableSlide&&!1!==_vm.disableSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{staticClass:"fc-avatar-carousel",attrs:{trigger:"click",autoplay:!1,"indicator-position":"none"}},[_vm._l(_vm.photos,(function(photo,index){return[photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()]}))],2)],1),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.asset.name))])])]):_vm._e(),!_vm.showUpload||"undefined"!==typeof _vm.disableUpload&&!1!==_vm.disableUpload?_vm._e():_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{module:"assetphotos",list:_vm.photos,record:_vm.asset},on:{updatePhotos:function($event){return _vm.handleUpdate()}}})],1)])]):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(350367)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),api=__webpack_require__(32284),Assetvue_type_script_lang_js={props:["size","asset","name","hovercard","disableUpload","disableSlide"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.asset.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge","widget"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl()},created:function(){this.$store.dispatch("loadAssetType")},computed:(0,objectSpread2/* default */.Z)({showSlide:function(){if(this.photos&&this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},(0,vuex_esm/* mapGetters */.Se)(["getAssetType"])),watch:{asset:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var asset,size,sliderEnabledSize,disableSlide,_ref,avatarUrl,assetId,_yield$API$get,error,data,_ref2,_ref2$photos,photos,defaultAvatarUrl;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(asset=_this.asset,size=_this.size,sliderEnabledSize=_this.sliderEnabledSize,disableSlide=_this.disableSlide,_ref=asset||{},avatarUrl=_ref.avatarUrl,assetId=_ref.id,!(sliderEnabledSize.indexOf(size)>=0&&(!disableSlide||disableSlide&&"true"===disableSlide))){_context.next=12;break}if(!assetId){_context.next=12;break}return _this.photosLoading=!0,_context.next=7,api/* API */.bl.get("/photos/get?module=assetphotos&parentId=".concat(assetId));case 7:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_ref2=data||{},_ref2$photos=_ref2.photos,photos=void 0===_ref2$photos?[]:_ref2$photos,(0,validation/* isEmpty */.xb)(photos)||photos.forEach((function(photo){var _ref3=photo||{},url=_ref3.url;(0,validation/* isEmpty */.xb)(url)||(avatarUrl=url)})),_this.$set(_this,"photos",photos)),_this.photosLoading=!1;case 12:(0,validation/* isEmpty */.xb)(avatarUrl)?(defaultAvatarUrl=_this.getDefaultAvatar()||"",_this.$set(_this,"avatarUrl",defaultAvatarUrl)):_this.$set(_this,"avatarUrl",avatarUrl);case 13:case"end":return _context.stop()}}),_callee)})))()},handleUpdate:function(){this.loadAvatarUrl()},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.asset&&this.asset.type&&this.asset.type.id){var name=this.getAssetType(this.asset.type.id)?this.getAssetType(this.asset.type.id).name:"";return __webpack_require__("Plumbing Equipment"===name||"Equipment"===name?164065:"Furniture"===name?703659:"Vehicle"===name?916803:164065)}return __webpack_require__(164065)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Assetvue_type_script_lang_js=Assetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Assetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Asset=component.exports},
/***/826127:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Space}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Space.vue?vue&type=template&id=5d05009e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.space?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[_vm.showSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{attrs:{trigger:"click",height:"120px",autoplay:!1,"indicator-position":"none"}},_vm._l(_vm.photos,(function(photo,index){return photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:photo.url}})]):_vm._e()})),1)],1):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.space.name))])])]):_vm._e(),_vm.showUpload?_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{list:_vm.photos,module:"basespacephotos",record:_vm.space}})],1):_vm._e()])]):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(350367)),Spacevue_type_script_lang_js={props:["size","space","name","hovercard"],data:function(){return{avatarUrl:this.getDefaultAvatar(),sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.space.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["xxxlg","shuge","huge","xhuge"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl(),this.space.avatarUrl&&(this.avatarUrl=this.space.avatarUrl)},computed:{showSlide:function(){if(this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},watch:{space:function(){this.avatarUrl=this.getDefaultAvatar(),this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){if(this.sliderEnabledSize.indexOf(this.size)>=0){var self=this;self.photos=[],this.space.id>0&&(self.photosLoading=!0,self.$http.get("/photos/get?module=basespacephotos&parentId="+this.space.id).then((function(response){if(self.photos=response.data.photos||[],self.photosLoading=!1,self.photos.length){var _step2,_iterator2=(0,createForOfIteratorHelper/* default */.Z)(self.photos);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var photo=_step2.value;if(photo.url){self.avatarUrl=photo.url;break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}})))}this.space.avatarUrl?this.avatarUrl=this.space.avatarUrl:(this.avatarUrl=this.getDefaultAvatar(),this.space.avatarUrl=this.avatarUrl)},getDefaultAvatar:function(space){var avatarUrl="";if("Campus"===this.space.type||"SITE"===this.space.spaceTypeEnum)avatarUrl=__webpack_require__(555751);else if("Building"===this.space.type||"BUILDING"===this.space.spaceTypeEnum)avatarUrl=__webpack_require__(188742);else if("Space"===this.space.type||"SPACE"===this.space.spaceTypeEnum){var subCategory="";avatarUrl=__webpack_require__("Cafeteria"===subCategory?73209:"Toilet"===subCategory?924353:"Dining"===subCategory?351129:398596)}else avatarUrl=__webpack_require__(188742);return avatarUrl},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Spacevue_type_script_lang_js=Spacevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Spacevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Space=component.exports},
/***/426803:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return User}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/User.vue?vue&type=template&id=c662fbbc
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.userObj?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.showPopover&&-1!==_vm.userObj.id?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_c("span",[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)],1),_vm.showLabel?[_vm.user&&_vm.user.id>0||_vm.group&&_vm.group.id>0?_c("div",{staticClass:"wo-team-txt"},[_c("div",{staticClass:"assignment-avatar-name",class:{"color-d":!_vm.user}},[_vm._v(" "+_vm._s(_vm.user&&_vm.user.id>0?_vm.user.name||(_vm.users.find((function(usr){return usr.id===_vm.user.id}))||{}).name:"---")+" ")]),_c("div",{staticClass:"assignment-group-name",class:{"color-d":!_vm.group}},[_vm._v(" "+_vm._s(_vm.group?_vm.group.name||(_vm.$store.getters.getGroup(_vm.group.id)||{}).name:"---")+" ")])]):_c("div",{staticClass:"wo-team-txt",staticStyle:{"padding-top":"7px","font-size":"14px",color:"#aaa","letter-spacing":"0.2px"}},[_vm._v(" ---/--- ")])]:0!=_vm.name?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(_vm._s(_vm.userObj.name))])])]):_vm._e()],2)]):_vm._e()},staticRenderFns=[],objectSpread2=__webpack_require__(595082),Avatar=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(574752)),AvatarPopovervue_type_template_id_8ef9b9ec_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"avatar-popover-container"},[_c("el-popover",{ref:"popover1",staticStyle:{display:"block",padding:"0"},attrs:{placement:"top-start",trigger:"hover",width:"383",clas:"avatar-popover","popper-class":"avatar-popover",height:_vm.defaultheight,"open-delay":600},model:{value:_vm.popoverShown,callback:function($$v){_vm.popoverShown=$$v},expression:"popoverShown"}},[_c("div",{staticClass:"popover-content-block"},[_c("div",{staticClass:"popover-avatar"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.user,color:_vm.color,showPopover:!1}})],1),_c("div",{staticClass:"popover-avatar-det"},[_c("div",{staticClass:"avatar-name-txt"},[_vm._v(" "+_vm._s(_vm.user.name?_vm.user.name:"----")+" ")]),_c("div",{staticClass:"mail-block"},[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"13px","vertical-align":"middle"},attrs:{src:__webpack_require__(702638)}}),_c("span",{staticClass:"mail-txt"},[_vm._v(_vm._s(_vm.user.email?_vm.user.email:"----")+" ")])]),_c("div",[_c("img",{staticClass:"envelope-icon",staticStyle:{height:"15px"},attrs:{src:__webpack_require__(47424)}}),_c("span",{staticClass:"popover-phone-number"},[_vm._v(" "+_vm._s(_vm.user.mobile?_vm.user.mobile:"----")+" ")])])]),"workorder"===_vm.moduleName?_c("div",{staticClass:"popover-footer"},[_c("ul",[_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("open")}}},[_c("div",{staticClass:"open-result-txt"},[_vm._v(" "+_vm._s(_vm.result.openWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OPEN")])]),_c("li",{staticClass:"popover-footer-list border-RL",on:{click:function($event){return _vm.getOpen("overdue")}}},[_c("div",{staticClass:"overdue-result-txt"},[_vm._v(" "+_vm._s(_vm.result.overDueWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("OVERDUE")])]),_c("li",{staticClass:"popover-footer-list",on:{click:function($event){return _vm.getOpen("duetoday")}}},[_c("div",{staticClass:"dueday-result-txt"},[_vm._v(" "+_vm._s(_vm.result.dueTodayWorkOrdersCount)+" ")]),_c("div",{staticClass:"result-txt-black"},[_vm._v("DUE TODAY")])])])]):_vm._e()]),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)],1)},AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns=[],AvatarPopovervue_type_script_lang_js=(__webpack_require__(670560),__webpack_require__(648324),{props:["size","user","color","name","moduleName"],data:function(){return{defaultheight:"230px",result:{},popoverShown:!1,viewname:""}},components:{Avatar:Avatar["default"]},mounted:function(){
// this.showPopover = this.showpopoverFooter
this.moduleName&&(this.defaultheight="160px")},watch:{popoverShown:function(val){val&&this.userOpenDatas()}},methods:{userOpenDatas:function(){var self=this;self.$http.post("/widget/getUserCardData",{ouid:this.user.id}).then((function(response){200===response.status&&(self.result=response.data.result)}))},getOpen:function(viewName){var filter={assignedTo:{operator:"is",value:[this.user.id+""]}};this.$router.push("/app/wo/orders/"+viewName+"?search="+encodeURIComponent(JSON.stringify(filter)))}}}),components_AvatarPopovervue_type_script_lang_js=AvatarPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AvatarPopovervue_type_script_lang_js,AvatarPopovervue_type_template_id_8ef9b9ec_render,AvatarPopovervue_type_template_id_8ef9b9ec_staticRenderFns,!1,null,null,null)
/* harmony default export */,AvatarPopover=component.exports,vuex_esm=__webpack_require__(420629),Uservue_type_script_lang_js={created:function(){this.$store.dispatch("loadGroups")},components:{Avatar:Avatar["default"],AvatarPopover:AvatarPopover},props:{size:{type:String},user:{type:Object},avatarStyle:{type:Object},name:{type:Boolean,default:function(){return!0}},showLabel:{type:Boolean},showPopover:{type:Boolean},moduleName:{type:String},group:{type:Object},hovercard:{type:Boolean}},data:function(){return{hoverCardId:"userHoverCardId-"+(this.user?this.user.id:"unkown"),loadHoverCardData:!1,labelStatus:this.hideLabel}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users}})),{},{userObj:function(){var _this=this,hasUser=this.user&&this.user.id>0,user=hasUser?this.$getProperty(this.user,"name")?this.user:this.users.find((function(usr){return usr.id===_this.user.id})):null;return user||{id:-1,name:"Unknown"}},color:function(){return-1!==this.userObj.id?"":this.group?"#c3c3c3":"#e3e3e3"}}),methods:{loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1}}},avatar_Uservue_type_script_lang_js=Uservue_type_script_lang_js,User_component=(0,componentNormalizer/* default */.Z)(avatar_Uservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,User=User_component.exports},
/***/318637:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return donutProgress}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/snapChart/donutProgress.vue?vue&type=template&id=11b74433
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"progressParent",class:_vm.className,style:{width:_vm.width+"%"}},[_c("div",{attrs:{id:"donutProgress"}})])},staticRenderFns=[],d3=__webpack_require__(348727),donutProgressvue_type_script_lang_js={props:["percent","className","width"],mounted:function(){this.drawChrat()},methods:{drawChrat:function(){var percentage=(this.percent?this.percent:0)/100,tau=2*Math.PI,width=100,height=100,outerRadius=Math.min(width,height)/2,innerRadius=outerRadius/5*4.2,fontSize=Math.min(width,height)/4,arc=d3.arc().innerRadius(innerRadius).outerRadius(outerRadius).cornerRadius(outerRadius-innerRadius).startAngle(0),svg=d3.select("#donutProgress").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(width,height)+" "+Math.min(width,height)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+Math.min(width,height)/2+","+Math.min(width,height)/2+")"),text=svg.append("text").text("0%").attr("text-anchor","middle").style("font-size",fontSize+"px").style("fill","#333").attr("dy",fontSize/3).attr("dx",2),defs=svg.append("defs"),gradient=defs.append("linearGradient").attr("id","svgGradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","100%");gradient.append("stop").attr("class","start").attr("offset","0%").attr("stop-color","#ffaacc").attr("stop-opacity",1),gradient.append("stop").attr("class","end").attr("offset",100*percentage+"%").attr("stop-color","#ff3184").attr("stop-opacity",1),svg.append("path").datum({endAngle:tau}).style("fill","#f7f8f9").attr("d",arc);var midground=svg.append("path").datum({endAngle:0*tau}).style("fill","url(#svgGradient)").attr("d",arc);function arcTween(transition,newAngle){transition.attrTween("d",(function(d){var interpolate=d3.interpolate(d.endAngle,newAngle);return function(t){return d.endAngle=interpolate(t),text.text(Math.round(d.endAngle/tau*100)+"%"),arc(d)}}))}midground.transition().duration(750).call(arcTween,percentage*tau)}}},snapChart_donutProgressvue_type_script_lang_js=donutProgressvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(snapChart_donutProgressvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,donutProgress=component.exports},
/***/23369:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FChartTitle}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FChartTitle.vue?vue&type=template&id=1781dc98
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-new-chart-title"},[_vm.titeList&&_vm.titeList&&_vm.titeList.length&&!_vm.loading?_c("div",{staticClass:"flex-middle justify-center"},_vm._l(_vm.titeList,(function(data,index){return _c("div",{key:index,staticClass:"f-chart-mandv-title",style:_vm.getStyle(data)},[_vm._v(" "+_vm._s(data.title)+" ")])})),0):_vm._e()])},staticRenderFns=[],FChartTitlevue_type_script_lang_js={props:["chartContext","config"],data:function(){return{titeList:[],loading:!1}},mounted:function(){var self=this;this.loading=!0,setTimeout((function(){self.titeList=self.chartContext.regionsTitles,self.loading=!1}),1e3)},methods:{getStyle:function(data){return"width:"+data.diff+"px"}}},components_FChartTitlevue_type_script_lang_js=FChartTitlevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FChartTitlevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FChartTitle=component.exports},
/***/875963:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewChart}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FNewChart.vue?vue&type=template&id=8078524e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 f-singlechart"},[_vm.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"charttypechanger fc-new-chart-type-single top-minus-86",attrs:{options:_vm.options},on:{getOptions:_vm.getOptionsFromTypeChart}}),_vm.chartContext&&!1!==_vm.options.settings.chart?_c("div",{staticStyle:{"text-align":"center"}},[_c("div",{style:_vm.isWidget?"position: relative; top: 15px;":""},[_vm.showAlarms&&_vm.showAlarmTitle?_c("div",{staticClass:"fc-alarms-chart-title",style:"sensorrollupalarm"===_vm.moduleName?"color: #324056 !important;font-weight: bold;":""},[_vm._v(" Alarms ")]):_vm._e(),_c("div",{ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"})]),_vm.relatedAlarms?_c("div",[_vm._l(_vm.relatedAlarms,(function(relAlarm,idx){return[_c("div",{key:idx,style:_vm.isWidget?"position: relative; top: 15px;":""},[_c("div",{staticClass:"fc-alarms-chart-title",staticStyle:{"text-transform":"capitalize",color:"#324056 !important"}},[_vm._v(" "+_vm._s(relAlarm?relAlarm.alarmTitle:"")+" ")]),_c("div",{ref:"relatedAlarmsChartEle",refInFor:!0,staticClass:"fc-alarms-chart pdf-chart"})])]}))],2):_vm._e(),_vm.chartContext.options.legend.show&&"top"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,resultObj:_vm.resultObj,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config,isScatterPlot:_vm.chartContext&&_vm.chartContext.scatterConfig},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.chartContext.options.regionConfig?_c("f-chart-title",{ref:"chartTitle",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config,chartContext:_vm.chartContext},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.drilldownParams?_c("drilldown-breadcrumb",{attrs:{drilldownParams:_vm.drilldownParams},on:{crumbClick:function($event){return _vm.$emit("crumbClick",$event)}}}):_vm._e(),_c("div",{staticClass:"fc-newchart-container",class:{"scatter-full-opacity":_vm.c3.params&&_vm.c3.params.data&&_vm.c3.params.data.types&&!Object.values(_vm.c3.params.data.types).includes("bubble")}},[_c("div",{ref:"newChartEle",staticClass:"fc-new-chart pdf-chart",class:{"hide-y2-axis":_vm.options&&_vm.options.axis&&!1===_vm.options.axis.showy2axis}}),_vm.chartContext.options.legend.show&&"right"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{style:{width:_vm.chartContext.options.legend.width+"px"},attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config},on:{ontoggle:_vm.ontoggle}}):_vm._e()],1),_vm.chartContext.options.legend.show&&"bottom"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.showWidget?_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends",attrs:{chart:_vm.c3.chart,reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,data:_vm.data,options:_vm.options},on:{ontoggle:_vm.ontoggle}}):_vm._e()],1):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),billboard=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(670560),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(795765),__webpack_require__(879288),__webpack_require__(872695)),basechart=__webpack_require__(503162),ReportDataUtil=__webpack_require__(760396),c3_helper=__webpack_require__(167021),FChartLegends=__webpack_require__(906575),DrilldownBreadcrumb=__webpack_require__(374520),FChartTitle=__webpack_require__(23369),FWidgetLegends=__webpack_require__(547301),FChartType=__webpack_require__(294309),JumpToHelper=__webpack_require__(921466),tooltip=__webpack_require__(460895),color_helper=__webpack_require__(794211),deepmerge=__webpack_require__(708634),d3=__webpack_require__(348727),formatter=__webpack_require__(676240),validation=__webpack_require__(990260),FNewChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z,ReportDataUtil/* default */.Z],props:["resultObj","isWidget","showWidgetLegends","config","specialScatter","relatedAlarms","moduleName","drilldownParams"],components:{FChartLegends:FChartLegends/* default */.Z,FWidgetLegends:FWidgetLegends/* default */.Z,FChartType:FChartType/* default */.Z,FChartTitle:FChartTitle/* default */.Z,DrilldownBreadcrumb:DrilldownBreadcrumb/* default */.Z},computed:{showWidget:function(){return!("undefined"!==typeof this.showWidgetLegends&&!this.showWidgetLegends)},isRegression:function(){return!!(this.$route.path.includes("regression")||this.resultObj&&this.resultObj.regressionConfig&&0!==this.resultObj.regressionConfig.length&&!0===this.resultObj.regression)},showAlarmTitle:function(){return!this.chartContext||!this.chartContext.options||!this.chartContext.options.hideAlarmTitle}},data:function(){return{chartContext:null,chartId:Math.random().toString(36).substr(2,9),c3:{params:null,chart:null},showAlarms:!1,updateTimeout:null}},mounted:function(){this.isRegression&&(this.hidecharttypechanger=!0),this.render()},beforeDestroy:function(){tooltip/* default */.Z.hideTooltip(),this.c3&&this.c3.chart&&this.c3.chart.destroy(),this.chartContext=null,this.c3.params=null,this.c3.chart=null},methods:{render:function(){var _this=this;this.data&&(this.chartContext=null,this.$nextTick((function(){_this.chartContext={},_this.chartContext.options=_this.getOptions(),_this.chartContext.dateRange=_this.dateRange,_this.chartContext.options.general&&_this.chartContext.options.general.hideZeroes?_this.chartContext.data=_this.formatZeroesInData(_this.data):_this.chartContext.data=_this.data,_this.chartContext.options.benchmark&&_this.chartContext.options.benchmark.show&&(_this.chartContext.reportVarianceData=_this.resultObj?_this.resultObj.reportData.aggr:null),_this.chartContext.xValueMode=_this.isXValueMode(_this.chartContext.options,_this.data),_this.options.defaultDurationUnit&&(_this.chartContext.defaultDurationUnit=_this.options.defaultDurationUnit),_this.chartContext.specialScatter=!!_this.specialScatter,_this.chartContext.unitMap=_this.getUnitMap(_this.options.dataPoints),_this.chartContext.enumMap=_this.getEnumMap(_this.options.dataPoints),_this.resultObj&&_this.resultObj.baselineData&&(_this.chartContext.baselineColors=_this.resultObj.baselineDataColors,_this.chartContext.baselineData=_this.resultObj.baselineData),_this.chartContext.openAlarm=function(alarmList){if(alarmList){var _step,alarmId=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var a=_step.value;alarmId.push(a.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.jumpToAlarms(alarmId)}},"pie"!==_this.chartContext.options.type&&"donut"!==_this.chartContext.options.type||(_this.chartContext.options.padding.top=20),_this.resultObj&&_this.resultObj.Readingdp&&(_this.chartContext["Readingdp"]=_this.resultObj.Readingdp),_this.resultObj&&_this.resultObj.scatterConfig&&(_this.chartContext["scatterConfig"]=_this.resultObj.scatterConfig,_this.chartContext["xMap"]=_this.resultObj.xMap);var c3Params=c3_helper/* default */.Z.prepare(_this.chartContext);c3Params&&(c3Params.data.onclick=function(d){var _d;if(null==(null===(_d=d)||void 0===_d?void 0:_d.index))for(var i=0;i<d.values.length;i++){var _d2;if((null===(_d2=d)||void 0===_d2?void 0:_d2.values[i].id)==d.id){d=d.values[i];break}}_this.$emit("drilldown",d)}),_this.mergeOption&&(_this.chartContext.options.padding.left=_this.mergeOption.padding.left,_this.chartContext.options.padding.right=_this.mergeOption.padding.right,_this.chartContext.options.axis.x.label.text="Month",c3Params.axis.y.label.text="No of Work Request"),_this.isWidget&&(_this.chartContext.options.legend.show?c3Params.size.height=c3Params.size.height-50:c3Params.size.height=c3Params.size.height-20,_this.options.widgetLegend.show&&(c3Params.size.height=c3Params.size.height-75),_this.resultObj&&_this.resultObj.report.userFilters&&(c3Params.size.height=c3Params.size.height-65)),_this.drilldownParams&&(c3Params.size.height=c3Params.size.height-25,_this.isWidget&&(c3Params.size.height=c3Params.size.height-25)),"gauge"===_this.chartContext.options.type&&c3Params.size.height>350&&(c3Params.size.height=350);var self=_this;self.showAlarms=1===_this.getOptions().common.mode&&_this.getOptions().settings.alarm,_this.config&&_this.config.hasOwnProperty("showAlarms")&&(self.showAlarms=_this.config.showAlarms),self.showAlarms&&(_this.chartContext.alarms=_this.alarms,c3Params.size.height=c3Params.size.height-100);var alarmsParams=null;if(self.showAlarms&&(alarmsParams=c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,_this.alarms),self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams))),self.relatedAlarms&&self.relatedAlarms.length)for(var idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][idx]){var relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,self.relatedAlarms[idx]);relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][idx],billboard.bb.generate(relalarmsParams)}if(_this.chartContext.options.customizeC3){var defaultOptions={},mergedOptions=deepmerge/* default */.Z.objectAssignDeep(defaultOptions,c3Params,_this.chartContext.options.customizeC3);c3Params=mergedOptions}var print=JSON.parse(_this.$getProperty(_this,"$route.query.printing")||null);if(self.$refs["newChartEle"]){c3Params.bindto=self.$refs["newChartEle"],self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight);var width=self.$refs["newChartEle"].clientWidth;print&&!(0,validation/* isEmpty */.xb)(width)&&(c3Params.size.width=self.$refs["newChartEle"].clientWidth),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(_this.byPassSetting(c3Params))}else _this.$nextTick((function(){if(self.showAlarms&&self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams)),self.relatedAlarms&&self.relatedAlarms.length)for(var _idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][_idx]){var _relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(this.chartContext,c3Params.data.json.x,self.relatedAlarms[_idx]);_relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][_idx],billboard.bb.generate(_relalarmsParams)}c3Params.bindto=self.$refs["newChartEle"];var width=self.$refs["newChartEle"].clientWidth;print&&!(0,validation/* isEmpty */.xb)(width)&&(c3Params.size.width=self.$refs["newChartEle"].clientWidth),self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(this.byPassSetting(c3Params))}))})))},ontoggle:function(key,hiddenLegends){if(this.c3.params.ontoggle&&"function"===typeof this.c3.params.ontoggle){var callback=this.c3.params.ontoggle.bind(this.c3.chart.internal,key);callback()}if("bar"===this.chartContext.options.type&&this.chartContext.options.bar.showGroupTotal){var groupTotalData=c3_helper/* default */.Z.getGroupTotalDataPoint(this.c3.params,hiddenLegends);groupTotalData&&this.c3.chart.load({json:{group_total:groupTotalData}})}},byPassSetting:function(params){if(params&&params.data&&params.data.hasOwnProperty("labels")&&!0===params.data.labels){var formattedLabel={centered:!1,format:function(v){return Number.isInteger(v)?d3.format(",")(v):v?(0,formatter/* formatCurrency */.xG)(v):null}};this.$set(params.data,"labels",formattedLabel)}return params},getOptionsFromTypeChart:function(options,ctype){
//to set the chart type based on the widget
this.config&&this.config.widget&&this.config.widget.dataOptions&&(this.config.widget.dataOptions.chartType=ctype.chartTypeInt,this.config.widget.dataOptions.chartTypeInt=ctype.chartTypeInt)},isXValueMode:function(options,data){if(("pie"===options.type||"donut"===options.type)&&data&&data.x&&2===Object.keys(data).length){if(options.xColorMap)return!0;for(var colors=color_helper/* default */.Z.newColorPicker(data.x.length),xColorMap={},i=0;i<data.x.length;i++){var xVal=data.x[i];xColorMap[xVal]=options.xColorMap&&options.xColorMap[xVal]?options.xColorMap[xVal]:colors[i]}return options.xColorMap=xColorMap,!0}return options.xColorMap=null,!1},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},components_FNewChartvue_type_script_lang_js=FNewChartvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewChartvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewChart=component.exports},
/***/374520:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DrilldownBreadcrumb}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/components/DrilldownBreadcrumb.vue?vue&type=template&id=77c09de1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"drilldown-breadcrumb  p5 mL90 d-flex"},[_c("div",{staticClass:"crumb-item"},[_c("span",{staticClass:"f12 bold breadcrumb-text mR5 letter-spacing0_5 ",on:{click:function($event){return _vm.handleClick(-1)}}},[_vm._v(" "+_vm._s(_vm.$t("reportdrilldown.all"))+" ")]),_c("i",{staticClass:"el-icon-arrow-right f12 mR3"})]),_vm._l(_vm.drilldownParams.drilldownCriteria,(function(drilldownCriteria,stepIndex){return _c("div",{key:stepIndex,staticClass:"crumb-item",class:[{"is-last":stepIndex==_vm.drilldownParams.drilldownCriteria.length-1}]},[_c("span",{key:"crumb-text"+stepIndex,staticClass:"f12 bold breadcrumb-text mR5 letter-spacing0_5 ",class:[{"is-last":stepIndex==_vm.drilldownParams.drilldownCriteria.length-1}],on:{click:function($event){return _vm.handleClick(stepIndex)}}},[_vm._v(" "+_vm._s(drilldownCriteria.breadcrumbLabel))]),stepIndex!=_vm.drilldownParams.drilldownCriteria.length-1?_c("i",{key:"crumb-icon"+stepIndex,staticClass:"el-icon-arrow-right f12 mR3"}):_c("i",{key:"crumb-close"+stepIndex,staticClass:"el-icon-circle-close pointer f12 hide-v",on:{click:function($event){return _vm.handleClick(stepIndex-1)}}})])}))],2)},staticRenderFns=[],DrilldownBreadcrumbvue_type_script_lang_js={props:{drilldownParams:{type:Object,default:null}},data:function(){return{}},methods:{handleClick:function(crumbIndex){
//ignore click on last item
crumbIndex!=this.drilldownParams.length-1&&this.$emit("crumbClick",crumbIndex)}}},components_DrilldownBreadcrumbvue_type_script_lang_js=DrilldownBreadcrumbvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_DrilldownBreadcrumbvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DrilldownBreadcrumb=component.exports},
/***/377905:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return pmNotification}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/preventive/pmNotification.vue?vue&type=template&id=69cc0884
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.showConfigureNotification?_c("el-dialog",{staticClass:"fc-dialog-center-container notification-trigger-dialog",attrs:{title:"NOTIFICATION",visible:_vm.showConfigureNotification,width:"40%","append-to-body":!0},on:{"update:visible":function($event){_vm.showConfigureNotification=$event}}},[_c("el-row",{},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("Name")]),_c("el-col",{attrs:{span:24}},[_c("el-input",{staticClass:"fc-input-full-border-select3",model:{value:_vm.reminderTemplateEdit.name,callback:function($$v){_vm.$set(_vm.reminderTemplateEdit,"name",$$v)},expression:"reminderTemplateEdit.name"}})],1)],1),_c("el-row",{staticClass:"mT25"},[_c("el-col",{attrs:{span:11}},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("Duration")]),_c("el-select",{staticClass:"fc-input-full-border-select3 width240px",attrs:{placeholder:"Select"},model:{value:_vm.reminderTemplateEdit.duration,callback:function($$v){_vm.$set(_vm.reminderTemplateEdit,"duration",$$v)},expression:"reminderTemplateEdit.duration"}},_vm._l(_vm.generateReminderOptions(),(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),1)],1),_c("el-col",{staticClass:"mL45",attrs:{span:8}},[_c("div",{staticClass:"fc-input-label-txt mb5"},[_vm._v("Type")]),_c("el-select",{staticClass:"fc-input-full-border-select3 width240px",attrs:{placeholder:"Select"},model:{value:_vm.reminderTemplateEdit.type,callback:function($$v){_vm.$set(_vm.reminderTemplateEdit,"type",$$v)},expression:"reminderTemplateEdit.type"}},_vm._l(_vm.reminderType,(function(item){return _c("el-option",{key:item.value,attrs:{label:item.label,value:item.value}})})),1)],1)],1),_c("el-row",{staticClass:"mT25"},[_c("el-col",{attrs:{span:4}},[_c("el-checkbox",{staticClass:"mT10",model:{value:_vm.reminderTemplateEdit.isEmail,callback:function($$v){_vm.$set(_vm.reminderTemplateEdit,"isEmail",$$v)},expression:"reminderTemplateEdit.isEmail"}},[_vm._v("Email")])],1),_c("el-col",{attrs:{span:4}},[_c("el-checkbox",{staticClass:"mT10",model:{value:_vm.reminderTemplateEdit.isSms,callback:function($$v){_vm.$set(_vm.reminderTemplateEdit,"isSms",$$v)},expression:"reminderTemplateEdit.isSms"}},[_vm._v("SMS")])],1),_c("el-col",{attrs:{span:3}},[_c("el-checkbox",{staticClass:"mT10",model:{value:_vm.reminderTemplateEdit.isMobile,callback:function($$v){_vm.$set(_vm.reminderTemplateEdit,"isMobile",$$v)},expression:"reminderTemplateEdit.isMobile"}},[_vm._v("Mobile")])],1)],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel f13",on:{click:function($event){_vm.showConfigureNotification=!1}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save f13",on:{click:_vm.addReminder}},[_vm._v("Save")])],1)],1):_vm._e()],1)},staticRenderFns=[],pmNotificationvue_type_script_lang_js=(__webpack_require__(670560),{props:["reminders","showConfigureNotification"],data:function(){return{reminderTemplateEdit:{},reminderType:[{label:"Before Execution",value:1},{label:"After Execution",value:2},{label:"Before Due",value:3},{label:"After Due",value:4}]}},watch:{reminders:function(val,oldVal){this.$emit("update:reminders",val)},showConfigureNotification:function(val,oldVal){this.$emit("update:showConfigureNotification",val)}},methods:{generateReminderOptions:function(){var options=[];options.push({label:"30 Min",value:1800});for(var i=1;i<24;i++)options.push({label:i+(1===i?" Hour":" Hours"),value:3600*i});for(var _i=1;_i<32;_i++)options.push({label:_i+(1===_i?" Day":" Days"),value:24*_i*3600});return options},addReminder:function(){this.showConfigureNotification=!1,
// if (this.editNotificationConfiguration) {
Object.assign(this.reminders[this.reminderTemplateEdit.index],this.$helpers.cloneObject(this.reminderTemplateEdit))}}}),preventive_pmNotificationvue_type_script_lang_js=pmNotificationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(preventive_pmNotificationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,pmNotification=component.exports},
/***/359975:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PmTriggers}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/preventive/v1/PmTriggers.vue?vue&type=template&id=13051597
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.pm.triggers&&_vm.pm.triggers.length?_c("div",{staticClass:"pm-trigger-scroll"},[_c("div",{staticClass:"fc-black3-16 text-capitalize mL30 mT30"},[_vm._v(" Trigger List ")]),_vm.pm.triggers&&_vm.pm.triggers.length?_c("div",{staticClass:"clearboth mT20 mL30",staticStyle:{border:"1px solid #e6ecf3","border-bottom":"none"}},[_c("el-row",{staticClass:"trigger-table-heading"},[_c("el-col",{staticClass:"text-left pL15",attrs:{span:2}},[_c("InlineSvg",{staticStyle:{visibility:"hidden"},attrs:{src:"svgs/speedmeter",iconClass:"icon icon-md vertical-middle"}})],1),_c("el-col",{attrs:{span:7}},[_c("div",{staticClass:"fc-black-11 fwBold text-uppercase"},[_vm._v("Name")])]),_c("el-col",{attrs:{span:4}},[_c("div",{staticClass:"fc-black-11 fwBold text-uppercase"},[_vm._v("Type")])]),_c("el-col",{attrs:{span:9}},[_c("div",{staticClass:"fc-black-11 fwBold text-uppercase"},[_vm._v("Trigger Message")])]),_c("el-col",{attrs:{span:2}})],1),_vm._l(_vm.pm.triggers,(function(trigger,index){return _c("div",{key:index},[_c("el-row",{staticClass:"border-bottom4 pT15 pB15 pm-trigger-hover"},[1===trigger.triggerExecutionSource?_c("div",{staticClass:"flex-middle"},[_c("el-col",{staticClass:"text-center pL15",attrs:{span:2}},[_c("InlineSvg",{attrs:{src:"svgs/calendar",iconClass:"icon icon-md vertical-middle fc-grey-svg-color"}})],1),_c("el-col",{staticClass:"pL15",attrs:{span:7}},[_c("span",{staticClass:"label-txt-black line-height20"},[_vm._v(_vm._s(trigger.name))])]),_c("el-col",{staticStyle:{"padding-left":"6px"},attrs:{span:4}},[_c("span",{staticClass:"label-txt-black bold"},[_vm._v("Scheduled")])]),_c("el-col",{attrs:{span:9}},[_c("div",{staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" "+_vm._s(trigger.scheduleMsg)+" ")])]),1===trigger.triggerType?_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"fc-dark-blue-txt13"},[_vm._v("Default")])]):_vm._e()],1):_vm._e(),2===trigger.triggerExecutionSource?_c("div",[_c("el-col",{staticClass:"text-center pL15",attrs:{span:2}},[_c("InlineSvg",{attrs:{src:"svgs/speedmeter",iconClass:"icon icon-md vertical-middle"}})],1),_c("el-col",{staticClass:"pL15",attrs:{span:7}},[_c("span",{staticClass:"label-txt-black line-height20"},[_vm._v(_vm._s(trigger.name))])]),_c("el-col",{staticStyle:{"padding-left":"6px"},attrs:{span:4}},[_c("span",{staticClass:"label-txt-black bold"},[_vm._v("Reading")])]),_c("el-col",{attrs:{span:9}},[_c("div",{staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" "+_vm._s(trigger.readingRule.readingField.displayName)+" ")]),_c("div",[_vm._v(" "+_vm._s("Exceeds "+trigger.startReading+(trigger.readingRule.readingField.unit?" "+trigger.readingRule.readingField.unit:"")+" and at every successive "+trigger.readingInterval+(trigger.readingRule.readingField.unit?" "+trigger.readingRule.readingField.unit:""))+" ")])]),1===trigger.triggerType?_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"fc-dark-blue-txt13"},[_vm._v("Default")])]):_vm._e()],1):_vm._e(),3===trigger.triggerExecutionSource?_c("div",[_c("el-col",{staticClass:"text-center pL15",attrs:{span:2}},[_c("InlineSvg",{attrs:{src:"svgs/alarm",iconClass:"icon icon-md vertical-middle fc-grey-svg3"}})],1),_c("el-col",{staticClass:"pL15",attrs:{span:7}},[_c("span",{staticClass:"label-txt-black line-height20"},[_vm._v(_vm._s(trigger.name))])]),_c("el-col",{staticStyle:{"padding-left":"6px"},attrs:{span:4}},[_c("span",{staticClass:"label-txt-black bold"},[_vm._v("Alarm Rule")])]),_c("el-col",{attrs:{span:9}},_vm._l(trigger.workFlowRule.criteria.conditions,(function(condition){return _c("div",{key:condition,staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" "+_vm._s(condition.fieldName)+" "+_vm._s(condition.operator.toLowerCase())+" "+_vm._s(condition.value)+" ")])})),0),1===trigger.triggerType?_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"fc-dark-blue-txt13"},[_vm._v("Default")])]):_vm._e()],1):_vm._e(),4===trigger.triggerExecutionSource?_c("div",[_c("el-col",{staticClass:"text-center pL15",attrs:{span:2}},[_c("InlineSvg",{attrs:{src:"svgs/calendar",iconClass:"icon icon-md vertical-middle fc-grey-svg-color"}})],1),_c("el-col",{staticClass:"pL15",attrs:{span:7}},[_c("span",{staticClass:"label-txt-black line-height20"},[_vm._v(_vm._s(trigger.name))])]),_c("el-col",{staticStyle:{"padding-left":"6px"},attrs:{span:4}},[_c("span",{staticClass:"label-txt-black bold"},[_vm._v("Manual")])]),_c("el-col",{attrs:{span:9}},[trigger.sharingContext?_vm._l(trigger.sharingContext,(function(sharing,key){return _c("div",{key:key},[1===sharing.type?_c("div",{staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" "+_vm._s(_vm.$account.user.name)+" ")]):_vm._e(),2===sharing.type?_c("div",{staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" "+_vm._s(_vm.findRoleName(sharing.roleId))+" ")]):_vm._e(),3===sharing.type?_c("div",{staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" "+_vm._s(_vm.$store.getters.getGroup(sharing.groupId).name)+" ")]):_vm._e()])})):_c("div",{staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" Everyone ")])],2),1===trigger.triggerType?_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"fc-dark-blue-txt13"},[_vm._v("Default")])]):_vm._e()],1):_vm._e(),5===trigger.triggerExecutionSource?_c("div",[_c("el-col",{staticClass:"text-center pL15",attrs:{span:2}},[_c("InlineSvg",{attrs:{src:"svgs/calendar",iconClass:"icon icon-md vertical-middle fc-grey-svg-color"}})],1),_c("el-col",{staticClass:"pL15",attrs:{span:7}},[_c("span",{staticClass:"label-txt-black line-height20"},[_vm._v(_vm._s(trigger.name))])]),_c("el-col",{staticStyle:{"padding-left":"6px"},attrs:{span:4}},[_c("span",{staticClass:"label-txt-black bold"},[_vm._v("Custom")])]),_c("el-col",{attrs:{span:9}},[_c("div",{staticClass:"fc-list-subject line-height20 fw4"},[_vm._v(" "+_vm._s(trigger.customModuleName)+" - "+_vm._s(trigger.dateFieldName)+" ")])]),1===trigger.triggerType?_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"fc-dark-blue-txt13"},[_vm._v("Default")])]):_vm._e()],1):_vm._e()])],1)}))],2):_vm._e(),!_vm.model.isLoading&&"bulk"===_vm.model.woData.workOrderType&&_vm.model.triggerData.triggers.length?_c("resource-plan",{staticClass:"mT60",attrs:{pmid:_vm.pm.id,pm:_vm.pm,resources:_vm.resources,summaryEdit:!0,model:_vm.model}}):_vm._e()],1):_c("div",[_c("div",{staticClass:"flex-middle width100 height80vh justify-center shadow-none white-bg-block flex-direction-column"},[_c("InlineSvg",{attrs:{src:"svgs/emptystate/history",iconClass:"icon icon-xxxxlg mR10"}}),_c("div",{staticClass:"nowo-label text-center pT10"},[_vm._v(" No Triggers Available ")])],1)])])},staticRenderFns=[],PmSummaryResourcePlannervue_type_template_id_f2e23574_render=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(169358),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(538077),__webpack_require__(162506),__webpack_require__(865137),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"fc-pm-form-container"},[_c("div",{staticClass:"position-relative"},[_c("div",{staticClass:"flex-middle width100 justify-content-space mT30 mL30 PL20"},[_c("div",{staticClass:"fc-black3-16 text-capitalize"},[_vm._v(" Associated "+_vm._s(2===_vm.pm.pmCreationType&&4===_vm.pm.assignmentType?"Assets":"Spaces")+" ")]),_c("div",{staticClass:"fc-black-small-txt-12"},[_c("div",{staticClass:"flex-middle",staticStyle:{height:"28px"}},[_c("div",{},[_c("span",[_vm._v(_vm._s(_vm.pageSettings.from+1)+" - "+_vm._s(Math.min(_vm.pageSettings.to,_vm.resources.length))+" ")]),_c("span",[_vm._v("of "+_vm._s(_vm.resources.length))]),[_c("span",{staticClass:"el-icon-arrow-left fc-black-small-txt-12 fw-bold f16 pointer mL10 mR5",class:{disable:0===_vm.pageSettings.from},on:{click:function($event){return _vm.prevPage()}}}),_c("span",{staticClass:"el-icon-arrow-right fc-black-small-txt-12 f16 pointer mR10 fw-bold",class:{disable:Math.min(_vm.pageSettings.to,_vm.resources.length)===_vm.resources.length},on:{click:function($event){return _vm.nextPage()}}})]],2),_c("div",{staticClass:"fc-separator-lg mL10 mR10",staticStyle:{height:"17px","line-height":"17px"}}),_c("f-search",{staticClass:"mL10 mR30 ",model:{value:_vm.resources,callback:function($$v){_vm.resources=$$v},expression:"resources"}})],1)])]),_c("div",{staticClass:"fc-pm-task-form-table-con pm-resource-table pT20 clearboth mL30 pm-summary-resources-table-con position-relative"},[_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.selectAll||_vm.model.woData.resourceList.filter((function(i){return i.selected})).length,expression:"\n            selectAll ||\n              model.woData.resourceList.filter(i => i.selected).length\n          "}],staticClass:"mL30 trigger-action-btn"},[_c("el-button",{staticClass:"btn--tertiary fw4 rounded-none",on:{click:function($event){_vm.showTriggerSelect=!0}}},[_vm._v("Trigger")]),_c("el-button",{staticClass:"btn--tertiary fw4 rounded-none",on:{click:function($event){_vm.showNotificationSelect=!0}}},[_vm._v("Notifications")]),_c("el-button",{staticClass:"btn--tertiary fw4 rounded-none",on:{click:function($event){_vm.showUserSelect=!0}}},[_vm._v("Assign User")]),_c("el-button",{staticClass:"btn--tertiary fw4 rounded-none",on:{click:function($event){return _vm.save()}}},[_vm._v("Apply")])],1),_c("table",{staticClass:"fc-pm-form-table"},[_c("thead",[_c("tr",{staticClass:"pm-trigger-head-tr"},[_c("th",{staticClass:"pT10 pB10",staticStyle:{"padding-left":"25px !important"}},[_vm.assignmentToAssetCategory(_vm.pm)?_c("div",[_vm._v(" ASSETS ")]):_vm._e(),_vm.assignmentToSpaceCategory(_vm.pm)||_vm.assignmentToAllFloors(_vm.pm)?_c("div",[_vm._v(" SPACES ")]):_vm._e()]),_c("th",{staticClass:"pT10 pB10 text-left"},[_vm._v("ASSIGNED TO")])])]),_c("tbody",_vm._l(_vm.pagedAssets(),(function(res,key){return _c("tr",{key:key},[_c("td",[_vm._v(_vm._s(res.name))]),_c("td",[_vm._v(_vm._s(_vm.fetchUserName(res.assignedToId)))])])})),0)])])])]),_vm.showTriggerSelect?_c("el-dialog",{staticClass:"fc-dialog-center-container resource-dialog",attrs:{visible:_vm.showTriggerSelect,"append-to-body":!0,title:"TRIGGERS",width:"30%"},on:{"update:visible":function($event){_vm.showTriggerSelect=$event}}},[_vm.model.triggerData.triggers.length?_c("el-row",{staticClass:"pT10 pB10"},[_c("el-checkbox",{attrs:{checked:_vm.checkedDefault},on:{change:function(val){val?_vm.selectedTriggers.push("0"):_vm.selectedTriggers=_vm.selectedTriggers.filter((function(i){return"0"===i})),_vm.forceUpdate()}}},[_vm._v(" "+_vm._s(_vm.model.triggerData.triggers[0].name)+" (Default) ")])],1):_vm._e(),_vm._l(_vm.model.triggerData.triggers,(function(trigger,index){return _c("el-row",{key:index,staticClass:"pT10 pB10"},[_c("el-checkbox",{attrs:{checked:_vm.selectedTriggers.includes(trigger.name)},on:{change:function(val){val?_vm.selectedTriggers.push(trigger.name):_vm.selectedTriggers=_vm.selectedTriggers.filter((function(i){return i===trigger.name})),_vm.forceUpdate()}}},[_vm._v(" "+_vm._s(trigger.name)+" ")])],1)})),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel f13",on:{click:function($event){_vm.showTriggerSelect=!1,_vm.selectedTriggers=[],_vm.checkedDefault=!1}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save f13",on:{click:_vm.applyTriggers}},[_vm._v("Apply")])],1)],2):_vm._e(),_vm.showNotificationSelect?_c("el-dialog",{staticClass:"fc-dialog-center-container add-triger-dialog resource-dialog",attrs:{visible:_vm.showNotificationSelect,"append-to-body":!0,title:"NOTIFICATIONS",width:"30%"},on:{"update:visible":function($event){_vm.showNotificationSelect=$event}}},[_vm._l(_vm.model.triggerData.reminders,(function(notification,ikey){return _c("el-row",{key:ikey,staticClass:"mT10 mB10"},[_c("el-checkbox",{attrs:{checked:_vm.selectedReminders.includes(notification.name),label:notification.name},on:{change:function(val){val?_vm.selectedReminders.push(notification.name):_vm.selectedReminders=_vm.selectedReminders.filter((function(i){return i===notification.name})),_vm.forceUpdate()}}},[_vm._v(" "+_vm._s(notification.name))])],1)})),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel f13",on:{click:function($event){_vm.showNotificationSelect=!1,_vm.selectedReminders=[]}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save f13",on:{click:_vm.applyNotifications}},[_vm._v("Apply")])],1)],2):_vm._e(),_vm.showUserSelect?_c("el-dialog",{staticClass:"fc-dialog-center-container add-triger-dialog resource-dialog",attrs:{visible:_vm.showUserSelect,"append-to-body":!0,title:"ASSIGN USER",width:"30%"},on:{"update:visible":function($event){_vm.showUserSelect=$event}}},[_c("el-row",{staticClass:"pT10"},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:"-1"},model:{value:_vm.selectedAssignee,callback:function($$v){_vm.selectedAssignee=$$v},expression:"selectedAssignee"}},[_vm._v(_vm._s(_vm.model.triggerData.defaultAssignedTo>0?_vm.userList.find((function(i){return i.ouid===_vm.model.triggerData.defaultAssignedTo})).name+" (Default)":"Default"))])],1),_vm._l(_vm.userList,(function(user,ikey){return _c("el-row",{key:ikey,staticClass:"pT10 pB10"},[_c("el-radio",{staticClass:"fc-radio-btn",attrs:{label:user.ouid},model:{value:_vm.selectedAssignee,callback:function($$v){_vm.selectedAssignee=$$v},expression:"selectedAssignee"}},[_vm._v(" "+_vm._s(user.name))])],1)})),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel f13",on:{click:function($event){_vm.showUserSelect=!1,_vm.selectedAssignee=null}}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save f13",on:{click:_vm.applyUser}},[_vm._v("Apply")])],1)],2):_vm._e()],1)}),PmSummaryResourcePlannervue_type_template_id_f2e23574_staticRenderFns=[],esm_typeof=__webpack_require__(103336),toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(879288),__webpack_require__(689730),__webpack_require__(339772),__webpack_require__(648324),__webpack_require__(634338),__webpack_require__(228436),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(420629)),FSearch=__webpack_require__(947748),PMMixin=__webpack_require__(369087),PmSummaryResourcePlannervue_type_script_lang_js={mixins:[PMMixin/* default */.Z],props:["model","summaryEdit","includeMainContent","pmid","pm","resources"],components:{FSearch:FSearch/* default */.Z},data:function(){return{pageSettings:{perPage:10,page:1,from:0,to:10},selectAll:!1,searchQuery:"",popovers:{},triggerPopovers:{},notificationPopovers:{},showTriggerSelect:!1,showNotificationSelect:!1,selectedTrigger:null,selectedReminders:[],selectedTriggers:[],checkedDefault:!1,showUserSelect:!1,selectedAssignee:null,reminderType:[{label:"Before Execution",value:1},{label:"After Execution",value:2},{label:"Before Due",value:3},{label:"After Due",value:4}],perPage:20,page:1,from:0,to:0,hasMorePage:!1}},watch:{page:function(){this.from=(this.page-1)*this.perPage+1,this.to=this.from+this.perPage-1,this.to>=this.model.woData.resourceList.length&&(this.to=this.model.woData.resourceList.length,this.hasMorePage=!0)},"model.woData.resourceList":{handler:function(newVal,oldVal){this.model.woData.resourceList.length&&(this.from=1,this.perPage>=this.model.woData.resourceList.length?(this.to=this.model.woData.resourceList.length,this.hasMorePage=!1):(this.to=this.perPage,this.hasMorePage=!0))},
// deep: true,
immediate:!0}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory"),this.$store.dispatch("loadGroups"),this.$store.dispatch("loadBuildings")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({groups:function(state){return state.groups},users:function(state){return state.users}})),{},{userList:function(){var _this=this;if(this.model.woData.woModel.groups&&this.model.woData.woModel.groups.id){var group=this.groups.find((function(group){return group.id===Number(_this.model.woData.woModel.groups.id)}));return group.members}return this.users},buildingName:function(){var buildingId=this.model.woData.selectedBuilding,building=this.buildingList.find((function(i){return i.id===buildingId}));return building?building.name:""},buildingList:function(){var _this2=this,buildings=this.$store.getters.getBuildings;return buildings&&this.model.woData.woModel&&this.model.woData.woModel.site.id?buildings.filter((function(i){return i.siteId===Number(_this2.model.woData.woModel.site.id)})):buildings}}),methods:{nextPage:function(){var maxPage=-1;
// when there are 10 records with 5 per page,
// you get exactly 2 pages
maxPage=this.resources.length%this.pageSettings.perPage===0?this.resources.length/this.pageSettings.perPage:this.resources.length/this.pageSettings.perPage+1,this.pageSettings.page!==maxPage&&(this.pageSettings.page=this.pageSettings.page+1,this.updatePaginationPivots())},prevPage:function(){
// you cannot go beyond page 1
1!==this.pageSettings.page&&(this.pageSettings.page=this.pageSettings.page-1,this.updatePaginationPivots())},updatePaginationPivots:function(){1===this.pageSettings.page?(this.pageSettings.from=0,this.pageSettings.to=this.pageSettings.perPage):(this.pageSettings.from=(this.pageSettings.page-1)*this.pageSettings.perPage,this.pageSettings.to=Math.min(this.pageSettings.page*this.pageSettings.perPage,this.resources.length))},pagedAssets:function(){return this.resources.slice(this.pageSettings.from,this.pageSettings.to)},fetchUserName:function(ID){var user=this.$store.getters.getUser(ID);return user?user.name:"---"},assignmentToAssetCategory:function(pm){return 2===pm.pmCreationType&&4===pm.assignmentType},assignmentToSpaceCategory:function(pm){return 2===pm.pmCreationType&&3===pm.assignmentType},assignmentToAllFloors:function(pm){return 2===pm.pmCreationType&&1===pm.assignmentType},prev:function(){this.page=this.page-1},next:function(){this.page=this.page+1},save:function(){var _this3=this;if(!this.model.woData.woModel.site.id||this.model.woData.woModel.site.id<=0)this.$message({message:"Site is mandatory",type:"error"});else{var workorder=this.$helpers.cloneObject(this.model.woData.woModel);Object.assign(workorder,workorder.woModel),workorder.isSignatureRequired=this.model.woData.isSignatureRequired;var uploadFiles=[];if(this.model.woData.woModel.attachedFiles){for(var i=0;i<this.model.woData.woModel.attachedFiles.uploadFiles.length;i++)uploadFiles.push(new File([this.model.woData.woModel.attachedFiles.uploadFiles[i]],this.model.woData.woModel.attachedFiles.uploadFiles[i].name));this.model.woData.woModel.attachedFiles.attachments&&(workorder.attachments=this.model.woData.woModel.attachedFiles.attachments.filter((function(u){return u.fileId>0}))),delete workorder.attachedFiles}delete workorder.woModel,workorder.resource=this.model.woData.singleResource,workorder.resource&&!workorder.resource.id&&delete workorder.resource,workorder.category&&!workorder.category.id&&delete workorder.category,workorder.type&&!workorder.type.id&&delete workorder.type,workorder.priority&&!workorder.priority.id&&delete workorder.priority,workorder.site&&workorder.site.id&&(workorder.siteId=workorder.site.id,delete workorder.site),workorder.assignmentGroup=workorder.groups,workorder.assignmentGroup&&(workorder.assignmentGroup.id?workorder.assignmentGroup={id:workorder.assignmentGroup.id}:delete workorder.assignmentGroup),this.model.triggerData.defaultAssignedTo&&(workorder.assignedTo={id:this.model.triggerData.defaultAssignedTo});var formdata={};formdata.workorder=workorder,workorder.duration&&(workorder.duration=this.$util.daysHoursToUnixTime(workorder.duration)||-1),formdata.deleteReadingRulesList=[];var _ret,sections=[],sequence=1,isSingleWoAssetType="single"===this.model.woData.workOrderType&&"ASSET"===this.model.woData.singleResource.resourceTypeEnum,_loop=function(){var _formdata$deleteReadi,section=_this3.$helpers.cloneObject(_this3.model.taskData.taskSections[key]);if(section.pmIncludeExcludeResourceContexts=[],section.selectedResourceList.forEach((function(x){section.pmIncludeExcludeResourceContexts.push({resourceId:x.id,isInclude:!0,parentType:2})})),delete section.selectedResourceList,section.pmTaskSectionTemplateTriggers=[],section.triggers.forEach((function(x,index){"All"!==x.triggerName&&(x.executeIfNotInTime=0===index?-1:24*x.executeIfNotInTime*60*60,section.pmTaskSectionTemplateTriggers.push(x))})),delete section.triggers,section.category&&section.category.length&&("CURRENT_FLOOR"===section.category[0]||"CURRENT_ASSET"===section.category[0]||"CURRENT_SPACE"===section.category[0]?section.assignmentType=5:"space"===section.category[0]?(section.assignmentType=3,section.spaceCategoryId=section.category[1]):"asset"===section.category[0]&&(section.assignmentType=4,section.assetCategoryId=section.category[1])),isSingleWoAssetType&&(section.assignmentType=-1,section.assetCategoryId=-1),"5"===section.inputType||"6"===section.inputType){var secOptions=[];for(var key3 in section.options){var option=section.options[key3];option&&option.name&&(secOptions[key3]=option.name)}section.options=secOptions}else section.options=[];var sectionRules=_this3.constructReadingRules(section);section.readingRules=sectionRules.readingRules,section.actionsList=sectionRules.actionsList,(_formdata$deleteReadi=formdata.deleteReadingRulesList).push.apply(_formdata$deleteReadi,(0,toConsumableArray/* default */.Z)(sectionRules.deleteReadingRulesList)),section.taskTemplates=_this3.$helpers.cloneObject(section.tasks),delete section.tasks;var _ret2,_loop3=function(){var _formdata$deleteReadi2,task=section.taskTemplates[key2];task.pmIncludeExcludeResourceContexts=[],task.selectedResourceList.forEach((function(x){task.pmIncludeExcludeResourceContexts.push({resourceId:x.id,isInclude:!0,parentType:3})})),delete task.selectedResourceList,delete task.readingFields,task.siteId=_this3.model.woData.woModel.site.id,task.category&&task.category.length&&("CURRENT_FLOOR"===task.category[0]||"CURRENT_ASSET"===task.category[0]||"CURRENT_SPACE"===task.category[0]?task.assignmentType=5:"space"===task.category[0]?(task.assignmentType=3,task.spaceCategoryId=task.category[1]):"asset"===task.category[0]&&(task.assignmentType=4,task.assetCategoryId=task.category[1])),isSingleWoAssetType&&(task.assignmentType=-1,task.assetCategoryId=-1);var errorMsg=_this3.validateTask(task);if(errorMsg)return _this3.$message({message:errorMsg,type:"error"}),_this3.isSaving=!1,{v:{v:void 0}};if("5"===task.inputType||"6"===task.inputType){var taskOptions=[];for(var _key in task.options){var _option=task.options[_key];_option&&_option.name&&(taskOptions[_key]=_option.name)}task.options=taskOptions}else task.options=[];var taskRules=_this3.constructReadingRules(task);task.readingRules=taskRules.readingRules,(_formdata$deleteReadi2=formdata.deleteReadingRulesList).push.apply(_formdata$deleteReadi2,(0,toConsumableArray/* default */.Z)(taskRules.deleteReadingRulesList)),task.readingFieldId||(task.readingFieldId=-1),task.sequence=sequence,sequence+=1};for(var key2 in section.taskTemplates)if(_ret2=_loop3(),_ret2)return _ret2.v;sections.push(section)};for(var key in this.model.taskData.taskSections)if(_ret=_loop(),_ret)return _ret.v;formdata.tasks=sections;var preventiveFormData={};preventiveFormData.title=formdata.workorder.subject,preventiveFormData.triggers=[],preventiveFormData.preventOnNoTask=this.model.woData.isPreventOnNoTask,preventiveFormData.pmCreationType="single"===this.model.woData.workOrderType?1:2,preventiveFormData.baseSpaceId=this.model.woData.selectedBuilding||-1,preventiveFormData.pmIncludeExcludeResourceContexts=[],"ALL_FLOORS"===this.model.woData.resourceType?(preventiveFormData.assignmentType=1,this.model.woData.selectedFloorList.forEach((function(x){preventiveFormData.pmIncludeExcludeResourceContexts.push({resourceId:x.id,isInclude:!0,parentType:1})}))):"SPACE_CATEGORY"===this.model.woData.resourceType?(preventiveFormData.assignmentType=3,preventiveFormData.spaceCategoryId=this.model.woData.spacecategoryId,this.model.woData.selectedSpaceList.forEach((function(x){preventiveFormData.pmIncludeExcludeResourceContexts.push({resourceId:x.id,isInclude:!0,parentType:1})}))):"ASSET_CATEGORY"===this.model.woData.resourceType&&(preventiveFormData.assignmentType=4,preventiveFormData.assetCategoryId=this.model.woData.assetCategoryId,this.model.woData.selectedResourceList.forEach((function(x){preventiveFormData.pmIncludeExcludeResourceContexts.push({resourceId:x.id,isInclude:!0,parentType:1})}))),preventiveFormData.resourcePlanners=[],this.model.woData.resourceList.forEach((function(resource){var triggerContexts,noti=[];if(resource.triggerNames.length)if(1===resource.triggerNames.length&&"0"===resource.triggerNames[0])resource.triggerNames=[];else{var index=resource.triggerNames.findIndex((function(i){return"0"===i}));index>=0&&_this3.model.triggerData.triggers.length&&resource.triggerNames.splice(index,1,_this3.model.triggerData.triggers[0].name)}(resource.notifications.forEach((function(n){noti.push({reminderName:n})})),noti.length||resource.triggerNames.length||resource.assignedTo&&resource.assignedTo>-1)&&(resource.triggerNames.length?triggerContexts=resource.triggerNames.map((function(i){return{name:i}})):_this3.model.triggerData.triggers.length&&(triggerContexts=[{name:_this3.model.triggerData.triggers[0].name}]),preventiveFormData.resourcePlanners.push({assignedToId:resource.assignedTo||_this3.model.triggerData.defaultAssignedTo,resourceId:resource.id,pmResourcePlannerReminderContexts:noti,triggerContexts:triggerContexts}))}));var reminders=[];for(var x in preventiveFormData.triggers=[],this.model.triggerData.triggers){var trigger=Object.assign({},this.model.triggerData.triggers[x]);trigger.triggerType="0"===x?1:2,trigger.schedule&&(trigger.custom=trigger.schedule.custom),1===trigger.type?(trigger.triggerExecutionSource=1,trigger.startTime=this.$helpers.addTime(trigger.startDate,trigger.startHour.length?trigger.startHour[0]:"00:00"),trigger.stopAfter,trigger.endTime=-1,trigger.frequency=trigger.schedule.facilioFrequency,trigger.frequency.length>1?preventiveFormData.frequency=8:preventiveFormData.frequency=trigger.schedule.facilioFrequency,preventiveFormData.custom=trigger.schedule.custom):2===trigger.type?(trigger.triggerExecutionSource=2,trigger.startTime=-1,trigger.endTime=-1,"never"===trigger.stopAfterReading&&(trigger.endReading=-1)):3===trigger.type&&(trigger.startTime=-1,trigger.endTime=-1,trigger.triggerExecutionSource=3,trigger.workFlowRule={criteria:this.$helpers.cloneObject(trigger.criteria)},trigger.workFlowRule.criteria&&delete trigger.workFlowRule.criteria.regEx,delete trigger.criteria),delete trigger.initialSchedule,preventiveFormData.triggers.push(trigger)}var templates=["email","sms","mobile"];if(this.model.triggerData.reminders&&this.model.triggerData.reminders.length)for(var _loop2=function(){var reminder=_this3.$helpers.cloneObject(_this3.model.triggerData.reminders[_i]);reminder.template&&templates.forEach((function(t){var mode="email"===t?"mail":t;if(reminder.template[t].toAddr&&reminder.template[t].toAddr.length){var data={type:_this3.config[t].type,message:reminder.template[t].message,name:_this3.config[t].name,workflow:{}};_this3.$common.setUserMailWorkflow(reminder.template[t].toAddr,data,mode),_this3.$common.setExpressionFromPlaceHolder(data.workflow,reminder.template[t].message),"mail"!==t&&"mobile"!==t||(data.subject=reminder.template[t].subject,_this3.$common.setExpressionFromPlaceHolder(data.workflow,reminder.template[t].subject)),"sms"===t&&(data.body=reminder.template[t].subject),reminder["".concat(t,"template")]={actionType:_this3.config[t].actionType,templateJson:data}}})),reminder.template&&delete reminder.template,reminders.push(reminder)},_i=0;_i<this.model.triggerData.reminders.length;_i++)_loop2();formdata.preventivemaintenance=preventiveFormData,formdata.reminders=[];for(var idx=0;idx<reminders.length;idx++)-1!==reminders[idx].duration&&formdata.reminders.push(reminders[idx]);this.updatePreventiveMaintenance(formdata,uploadFiles)}},constructReadingRules:function(obj){var readingRules=[],actionsList=[],deleteReadingRulesList=[];return"4"===obj.inputType&&("none"===obj.validation?obj.inputValidationRuleId&&-1!==obj.inputValidationRuleId&&deleteReadingRulesList.push(obj.inputValidationRuleId):"incremental"===obj.validation||"decremental"===obj.validation?readingRules.push({id:obj.inputValidationRuleId||-1,name:"incremental"===obj.validation?"Incremental":"Decremental",ruleType:9,event:{activityType:1},thresholdType:5,workflow:{expressions:[{name:"a",constant:"${inputValue}"},{name:"b",constant:"${previousValue}"}],parameters:[{name:"inputValue",typeString:"Number"},{name:"previousValue",typeString:"Number"}],resultEvaluator:"incremental"===obj.validation?"(b!=-1)&&(a<b)":"(b!=-1)&&(a>b)"}}):"safeLimit"===obj.validation&&("undefined"!==typeof obj.minSafeLimit&&null!=obj.minSafeLimit||"undefined"!==typeof obj.maxSafeLimit&&null!=obj.maxSafeLimit)&&readingRules.push({id:obj.inputValidationRuleId||-1,name:"Safelimit",ruleType:9,event:{activityType:1},thresholdType:5,workflow:{expressions:[{name:"a",constant:"${inputValue}"},{name:"b",constant:null===obj.minSafeLimit?-1:obj.minSafeLimit},{name:"c",constant:null===obj.maxSafeLimit?-1:obj.maxSafeLimit}],parameters:[{name:"inputValue",typeString:"Number"}],resultEvaluator:"(b!=-1&&a<b)||(c!=-1&&a>c)"}})),{readingRules:readingRules,actionsList:actionsList,deleteReadingRulesList:deleteReadingRulesList}},updatePreventiveMaintenance:function(data,uploadFiles){var _this4=this,formData=new FormData;if(data.preventivemaintenance.siteId=data.workorder.siteId,formData.append("workOrderString",JSON.stringify(data.workorder)),formData.append("preventiveMaintenanceString",JSON.stringify(data.preventivemaintenance)),formData.append("tasksString",JSON.stringify(data.tasks)),data.reminders&&formData.append("reminderString",JSON.stringify(data.reminders)),formData.append("deleteReadingRulesListString",JSON.stringify(data.deleteReadingRulesList)),uploadFiles)for(var num=0;num<uploadFiles.length;num++)formData.append("attachedFiles",uploadFiles[num]);this.$http.post("/workorder/updateNewPreventiveMaintenance?id="+parseInt(this.pmid),formData).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?_this4.$message({message:"Planned maintenance updated successfully!",type:"success"}):_this4.$message({message:"Planned maintenance updation failed!",type:"error"})})).catch((function(_){_this4.$message({message:"Failed to edit Planned maintenance!",type:"error"})}))},ellipsis:function(string){return string.length>10?string.substring(0,9)+"...":string},generateReminderOptions:function(){var options=[];options.push({label:"30 Min",value:1800});for(var i=1;i<24;i++)options.push({label:i+(1===i?" Hour":" Hours"),value:3600*i});for(var _i2=1;_i2<32;_i2++)options.push({label:_i2+(1===_i2?" Day":" Days"),value:24*_i2*3600});return options},templateOptions:function(notifications){var _this5=this,options=[],allTimeOptions=this.generateReminderOptions(),timeLookup={};allTimeOptions.forEach((function(op){timeLookup[op.value]=op.label}));var typeLookup={};return this.reminderType.forEach((function(type){typeLookup[type.value]=type.label})),notifications.forEach((function(notification,i){var n=_this5.model.triggerData.reminders.find((function(k){return k.name===notification}));options.push("".concat(timeLookup[n.duration]," ").concat(typeLookup[n.type]))})),options},moveToNext:function(){this.$emit("next")},moveToPrevious:function(){this.$emit("previous")},applyNotifications:function(){if(this.selectedReminders.length)for(var i=0;i<this.model.woData.resourceList.length;i++)this.model.woData.resourceList[i].selected&&(this.model.woData.resourceList[i].notifications=this.$helpers.cloneObject(this.selectedReminders));this.showNotificationSelect=!1,this.selectedReminders=[],this.$forceUpdate()},applyTriggers:function(){if(this.checkedDefault)for(var i=0;i<this.model.woData.resourceList.length;i++)this.model.woData.resourceList[i].triggerNames=["0"];if(this.selectedTriggers.length)for(var _i3=0;_i3<this.model.woData.resourceList.length;_i3++)this.model.woData.resourceList[_i3].selected&&(this.checkedDefault?this.model.woData.resourceList[_i3].triggerNames=[].concat((0,toConsumableArray/* default */.Z)(this.model.woData.resourceList[_i3].triggerNames),(0,toConsumableArray/* default */.Z)(this.selectedTriggers)):this.model.woData.resourceList[_i3].triggerNames=(0,toConsumableArray/* default */.Z)(this.selectedTriggers));this.showTriggerSelect=!1,this.selectedTriggers=[],this.checkedDefault=!1,this.$forceUpdate()},applyUser:function(){if(this.selectedAssignee)for(var i=0;i<this.model.woData.resourceList.length;i++)this.model.woData.resourceList[i].selected&&(-1===this.selectedAssignee?this.model.woData.resourceList[i].assignedTo=-1:this.model.woData.resourceList[i].assignedTo=Number(this.selectedAssignee));this.showUserSelect=!1,this.selectedAssignee=null,this.$forceUpdate()},selected:function(val){for(var i=0;i<this.model.woData.resourceList.length;i++)this.searchQuery.trim()&&!this.model.woData.resourceList[i].name.trim().toLowerCase().includes(this.searchQuery.trim().toLowerCase())||i>=this.from-1&&i<this.to&&(this.model.woData.resourceList[i].selected=val)},userName:function(resource){var _this6=this;if(!this.userList)return"";var user=this.userList.find((function(user){return user.ouid===resource.assignedTo}));if(user)return user.name;var defaultVal=this.userList.find((function(user){return user.ouid===_this6.model.triggerData.defaultAssignedTo}));return defaultVal?"".concat(defaultVal.name," (Default)"):""},forceUpdate:function(){this.$forceUpdate()},selectTrigger:function(index,triggerName){this.model.woData.resourceList[index].triggerName=triggerName,this.$forceUpdate()},selectedUser:function(index,ouid){this.model.woData.resourceList[index].assignedTo=Number(ouid),this.popovers[index]=!1;var resourceList=this.$helpers.cloneObject(this.model.woData.resourceList);this.$set(this.model.woData,"resourceList",resourceList)},removeNotif:function(key,name){this.model.woData.resourceList[key].notifications=this.model.woData.resourceList[key].notifications.filter((function(i){return i!==name})),this.$forceUpdate()},handleSingleNotification:function(key){1===this.model.woData.resourceList[key].notifications.length?this.model.woData.resourceList[key].notifications.splice(0,1):this.model.woData.resourceList[key].notifications.push(this.model.triggerData.reminders[0].name)}}},preventive_PmSummaryResourcePlannervue_type_script_lang_js=PmSummaryResourcePlannervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(preventive_PmSummaryResourcePlannervue_type_script_lang_js,PmSummaryResourcePlannervue_type_template_id_f2e23574_render,PmSummaryResourcePlannervue_type_template_id_f2e23574_staticRenderFns,!1,null,null,null)
/* harmony default export */,PmSummaryResourcePlanner=component.exports,InlineSvg=__webpack_require__(586166),PmTriggersvue_type_script_lang_js={props:["pm","resources","pmObject"],created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory"),this.$store.state.roles&&this.$store.state.roles.length||this.$store.dispatch("loadRoles"),this.$store.dispatch("loadGroups")},data:function(){return{value:"",model:{isEdit:!1,isLoading:!1,emitForm:!1,isClone:!1,woData:{woModel:null,workOrderType:"single",resourceLabel:"",resourceName:"",selectedBuilding:null,spacecategoryId:null,resourceQuery:null,selectedResourceList:[],isIncludeResource:!0,assetCategoryId:null,resourceType:null,selectedSpaceList:[],isIncludeSpace:!0,selectedFloorList:[],isIncludeFloor:!0,singleResource:null,quickSearchQuery:"",spaceAssetDisplayName:"",resourceList:[],isPreventOnNoTask:!0,isSignatureRequired:!1},taskData:{taskSections:[{name:"Untitled Section",category:null,dummyValue:[1],inputType:null,resourceLabel:"",selectedResourceList:[],isIncludeResource:null,attachmentRequired:!1,enableInput:!1,readingFieldId:null,validation:null,minSafeLimit:null,maxSafeLimit:null,options:[],triggers:[{triggerName:"All"}],additionInfo:{defaultValue:"",failureValue:"",woCreateFormId:null,deviationOperatorId:null},tasks:[{name:"",resourceLabel:"",description:"",inputType:null,attachmentRequired:!1,enableInput:!1,readingFieldId:null,inputValidationRuleId:null,validation:null,minSafeLimit:null,maxSafeLimit:null,options:[],selectedResourceList:[],isIncludeResource:null,category:null,readingFields:[],additionInfo:{defaultValue:"",failureValue:"",woCreateFormId:null,deviationOperatorId:null}}]}]},triggerData:{defaultAssignedTo:null,triggers:[],reminders:[]}},newTrigger:{name:"",type:-1,startHour:["00:00"],startDate:new Date,startTime:null,schedule:null,stopAfter:"never",endTime:new Date,startReading:null,readingFieldId:null,stopAfterReading:"never",endReading:null,readingInterval:null},remindersTemplate:{name:null,type:null,duration:null,isEmail:null,isSms:null,isMobile:null,emailtemplate:null,smstemplate:null,mobiletemplate:null}}},components:{"resource-plan":PmSummaryResourcePlanner,InlineSvg:InlineSvg/* default */.Z},mounted:function(){var _this=this;
// let siteId = this.$route.query.site
if(this.model.isEdit=!0,this.model.isLoading=!0,this.model.isEdit){var woData=this.$helpers.cloneObject(this.pmObject.workorder);woData.site={id:""},woData.site.id=woData.siteId,delete woData.siteId,woData.duration=this.$util.unixTimeToDaysHours(woData.duration),woData.assignmentGroup&&(woData.groups=this.$helpers.cloneObject(woData.assignmentGroup),delete woData.assignmentGroup),woData.attachments&&(woData.attachedFiles={attachments:[],uploadFiles:[]},woData.attachedFiles.attachments=woData.attachments),woData.resource&&(this.model.woData.singleResource=this.$helpers.cloneObject(woData.resource),delete woData.resource),this.model.woData.isSignatureRequired=woData.isSignatureRequired,delete woData.isSignatureRequired,this.model.woData.isPreventOnNoTask=this.pmObject.preventivemaintenance.preventOnNoTask,this.$set(this.model.woData,"woModel",woData),this.model.woData.assetCategoryId=this.pmObject.preventivemaintenance.assetCategoryId,this.model.woData.spacecategoryId=String(this.pmObject.preventivemaintenance.spaceCategoryId),this.model.woData.woModel.preventOnNoTask=this.pmObject.preventivemaintenance.preventOnNoTask,this.model.woData.workOrderType=1===this.pmObject.preventivemaintenance.pmCreationType?"single":"bulk",this.model.woData.selectedBuilding=this.pmObject.preventivemaintenance.baseSpaceId;var resourceMap={};this.pmObject.listOfTasks&&this.pmObject.listOfTasks.forEach((function(t){t.resource&&t.resource.id>0&&!resourceMap.hasOwnProperty(t.resource.id)&&(resourceMap[t.resource.id]=t.resource)}));var triggerMap={};this.pmObject.preventivemaintenance.triggers&&this.pmObject.preventivemaintenance.triggers.forEach((function(i){triggerMap[i.id]=i})),this.$nextTick((function(){
// when building is filled watchers fire
2===_this.pmObject.preventivemaintenance.pmCreationType?1===_this.pmObject.preventivemaintenance.assignmentType?(_this.model.woData.resourceType="ALL_FLOORS",_this.$nextTick((function(){
// when resourceType is filled watchers fire
_this.pmObject.preventivemaintenance.pmIncludeExcludeResourceContexts&&_this.pmObject.preventivemaintenance.pmIncludeExcludeResourceContexts.forEach((function(x){_this.model.woData.selectedFloorList.push({id:x.resourceId})})),_this.fillTasks(_this.pmObject.sectionTemplates,_this.model.woData.resourceType,2,null,resourceMap,triggerMap),_this.model.isLoading=!1}))):3===_this.pmObject.preventivemaintenance.assignmentType?(_this.model.woData.resourceType="SPACE_CATEGORY",_this.$nextTick((function(){_this.pmObject.preventivemaintenance.pmIncludeExcludeResourceContexts&&_this.pmObject.preventivemaintenance.pmIncludeExcludeResourceContexts.forEach((function(x){_this.model.woData.selectedSpaceList.push({id:x.resourceId})})),_this.fillTasks(_this.pmObject.sectionTemplates,_this.model.woData.resourceType,2,null,resourceMap,triggerMap),_this.model.isLoading=!1}))):4===_this.pmObject.preventivemaintenance.assignmentType&&(_this.model.woData.resourceType="ASSET_CATEGORY",_this.$nextTick((function(){_this.pmObject.preventivemaintenance.pmIncludeExcludeResourceContexts&&_this.pmObject.preventivemaintenance.pmIncludeExcludeResourceContexts.forEach((function(x){_this.model.woData.selectedResourceList.push({id:x.resourceId})})),_this.fillTasks(_this.pmObject.sectionTemplates,_this.model.woData.resourceType,2,null,resourceMap,triggerMap),_this.model.isLoading=!1}))):_this.$nextTick((function(){_this.fillTasks(_this.pmObject.sectionTemplates,_this.model.woData.resourceType,1,_this.model.woData.singleResource,resourceMap,triggerMap),_this.model.isLoading=!1})),_this.pmObject.workorder.assignedTo&&(_this.model.triggerData.defaultAssignedTo=_this.pmObject.workorder.assignedTo.id),_this.pmObject.reminders&&(_this.model.triggerData.reminders=[],_this.pmObject.reminders&&_this.pmObject.reminders.length&&_this.pmObject.reminders.forEach((function(r){_this.model.triggerData.reminders.push(_this.$helpers.cloneFromSchema(_this.remindersTemplate,r))}))),_this.pmObject.preventivemaintenance.triggers&&(_this.model.triggerData.triggers=_this.pmObject.preventivemaintenance.triggers.map((function(trigger){var newTrigger=_this.$helpers.cloneObject(_this.newTrigger);for(var key in newTrigger)trigger.hasOwnProperty(key)&&trigger[key]&&-1!==trigger[key]&&(newTrigger[key]=trigger[key]);return 1===trigger.triggerExecutionSource?(newTrigger.type=1,trigger.schedule.timeObjects=null,newTrigger.initialSchedule=trigger.schedule,newTrigger.initialSchedule.facilioFrequency=trigger.frequency,newTrigger.initialSchedule.custom=trigger.schedule.custom,trigger.custom&&(newTrigger.initialSchedule.custom=trigger.custom),newTrigger.startHour=trigger.schedule.times,newTrigger.startTime&&-1!==newTrigger.startTime&&(newTrigger.startDate=new Date(newTrigger.startTime).setHours(0,0,0,0)),newTrigger.endTime&&-1!==newTrigger.endTime&&(newTrigger.endTime=new Date(newTrigger.endTime),newTrigger.stopAfter="time")):2===trigger.triggerExecutionSource?(newTrigger.type=2,newTrigger.stopAfterReading=trigger.endReading&&-1!==trigger.endReading?"reading":"never"):3===trigger.triggerExecutionSource&&(newTrigger.type=3,trigger.workFlowRule&&(newTrigger.criteria=trigger.workFlowRule.criteria,delete newTrigger.criteria.regEx,delete newTrigger.criteria.computedValues,newTrigger.criteria.conditions&&Object.keys(newTrigger.criteria.conditions).forEach((function(i){delete newTrigger.criteria.conditions[i].computedValues,delete newTrigger.criteria.conditions[i].computedWhereClause})))),newTrigger}))),_this.$nextTick((function(){var resources=_this.pmObject.preventivemaintenance.resourcePlanners;resources&&resources.forEach((function(r){var selected=!1,triggerNames=[],name=r.resource?r.resource.name:"",assignedTo=r.assignedToId,notifications=[],id=r.resourceId;r.triggerContexts&&_this.pmObject.preventivemaintenance.triggers&&r.triggerContexts.forEach((function(k){var trigger=_this.pmObject.preventivemaintenance.triggers.find((function(i){return i.id===k.id}));trigger&&triggerNames.push(trigger.name)})),null!=triggerNames&&triggerNames.length||(triggerNames=["0"]),r.pmResourcePlannerReminderContexts&&r.pmResourcePlannerReminderContexts.forEach((function(i){if(_this.pmObject.reminders){var rem=_this.pmObject.reminders.find((function(k){return k.id===i.reminderId}));rem&&notifications.push(rem.name)}})),_this.model.woData.resourceList.push({selected:selected,triggerNames:triggerNames,name:name,assignedTo:assignedTo,notifications:notifications,id:id})}))}))}))}},computed:{},methods:{findRoleName:function(id){var role=this.$store.state.roles.filter((function(i){return i.roleId===id}));return role[0].name},resourceListHandler:function(){var _this2=this;if("bulk"===this.model.woData.workOrderType)if("SPACE_CATEGORY"===this.model.woData.resourceType)this.model.woData.selectedSpaceList&&0!==this.model.woData.selectedSpaceList.length?null===this.model.woData.isIncludeSpace||void 0===this.model.woData.isIncludeSpace||this.model.woData.isIncludeSpace?(this.$set(this.model.woData,"resourceList",this.model.woData.selectedSpaceList),this.model.woData.resourceList.forEach((function(resource){resource.triggerNames=["0"],resource.assignedTo=null,resource.notifications=[],resource.selected=!1}))):this.model.woData.spacecategoryId&&this.model.woData.spacecategoryId>0&&this.$util.loadSpacesContext(4,null,[{key:"site",operator:"is",value:this.model.woData.woModel.site.id},{key:"building",operator:"is",value:this.model.woData.selectedBuilding},{key:"spaceCategory",operator:"is",value:this.model.woData.spacecategoryId}]).then((function(response){_this2.$set(_this2.model.woData,"resourceList",response.records),_this2.model.woData.resourceList=_this2.model.woData.resourceList.filter((function(i){for(var j=0;j<_this2.model.woData.selectedSpaceList.length;j++)if(_this2.model.woData.selectedSpaceList[j].id===i.id)return!1;return!0})),_this2.model.woData.resourceList.forEach((function(resource){resource.triggerNames=["0"],resource.assignedTo=null,resource.notifications=[],resource.selected=!1}))})):this.model.woData.spacecategoryId&&this.model.woData.spacecategoryId>0&&this.$util.loadSpacesContext(4,null,[{key:"site",operator:"is",value:this.model.woData.woModel.site.id},{key:"building",operator:"is",value:this.model.woData.selectedBuilding},{key:"spaceCategory",operator:"is",value:this.model.woData.spacecategoryId}]).then((function(response){_this2.$set(_this2.model.woData,"resourceList",response.records),_this2.model.woData.resourceList.forEach((function(resource){resource.triggerNames=["0"],resource.assignedTo=null,resource.notifications=[],resource.selected=!1}))}));else if("ASSET_CATEGORY"===this.model.woData.resourceType)if(this.model.woData.selectedResourceList&&0!==this.model.woData.selectedResourceList.length){if(null===this.model.woData.isIncludeResource||void 0===this.model.woData.isIncludeResource||this.model.woData.isIncludeResource)this.$set(this.model.woData,"resourceList",this.model.woData.selectedResourceList),this.model.woData.resourceList.forEach((function(resource){resource.triggerNames=["0"],resource.assignedTo=null,resource.notifications=[],resource.selected=!1}));else if(this.model.woData.assetCategoryId&&this.model.woData.assetCategoryId>0){var spaceId=this.model.woData.selectedBuilding;(!this.model.woData.selectedBuilding||this.model.woData.selectedBuilding<0)&&(spaceId=this.model.woData.woModel.site.id),this.$util.loadAsset({spaceId:spaceId,categoryId:this.model.woData.assetCategoryId}).then((function(response){_this2.$set(_this2.model.woData,"resourceList",response.assets.filter((function(i){for(var j=0;j<_this2.model.woData.selectedResourceList.length;j++)if(_this2.model.woData.selectedResourceList[j].id===i.id)return!1;return!0}))),_this2.model.woData.resourceList.forEach((function(resource){resource.triggerNames=["0"],resource.assignedTo=null,resource.notifications=[],resource.selected=!1}))}))}}else if(this.model.woData.assetCategoryId&&this.model.woData.assetCategoryId>0){var _spaceId=this.model.woData.selectedBuilding;(!this.model.woData.selectedBuilding||this.model.woData.selectedBuilding<0)&&(_spaceId=this.model.woData.woModel.site.id),this.$util.loadAsset({spaceId:_spaceId,categoryId:this.model.woData.assetCategoryId}).then((function(response){_this2.$set(_this2.model.woData,"resourceList",response.assets),_this2.model.woData.resourceList.forEach((function(resource){resource.triggerNames=["0"],resource.assignedTo=null,resource.notifications=[],resource.selected=!1}))}))}},sortBySequence:function(a,b){return a.taskTemplates[0].sequence<b.taskTemplates[0].sequence?-1:a.taskTemplates[0].sequence>b.taskTemplates[0].sequence?1:0},fillTasks:function(sectionTemplates,resourceType,creationType,singleResource,resourceMap,triggerMap){var _this3=this;if(sectionTemplates)this.model.taskData.taskSections.splice(0,1),sectionTemplates.sort(this.sortBySequence),sectionTemplates.forEach((function(section,i){var taskSection={name:"Untitled Section",category:null,dummyValue:[1],inputType:null,resourceLabel:"",selectedResourceList:[],isIncludeResource:null,attachmentRequired:!1,enableInput:!1,validation:null,minSafeLimit:null,maxSafeLimit:null,options:[],tasks:[],triggers:[],additionInfo:{defaultValue:"",failureValue:"",woCreateFormId:null,deviationOperatorId:null}};Object.keys(section).filter((function(key){return key in taskSection})).forEach((function(key){taskSection[key]=_this3.$helpers.cloneObject(section[key])})),taskSection.tasks=[],taskSection.enableInput=section.inputType>1,taskSection.inputType=String(section.inputType),taskSection.assignmentType=section.assignmentType,taskSection.selectedResourceList=[],section.pmIncludeExcludeResourceContexts&&section.pmIncludeExcludeResourceContexts.forEach((function(i){return taskSection.selectedResourceList.push({id:i.resourceId})})),section.additionInfo&&(section.additionInfo.options&&(taskSection.options=section.additionInfo.options.map((function(x){return{name:x}}))),taskSection.additionInfo.defaultValue=section.additionInfo.defaultValue,taskSection.additionInfo.failureValue=section.additionInfo.failureValue,taskSection.additionInfo.woCreateFormId=section.additionInfo.woCreateFormId,taskSection.additionInfo.deviationOperatorId=section.additionInfo.deviationOperatorId),section.pmTaskSectionTemplateTriggers&&section.pmTaskSectionTemplateTriggers.length?(taskSection.triggers=[],section.pmTaskSectionTemplateTriggers.forEach((function(ptc){ptc.triggerName=triggerMap[ptc.triggerId].name,ptc.executeIfNotInTime=ptc.executeIfNotInTime>0?ptc.executeIfNotInTime/86400:-1,taskSection.triggers.push(ptc)}))):taskSection.triggers=[{triggerName:"All"}],2===creationType?5===taskSection.assignmentType?"ALL_FLOORS"===resourceType?taskSection.category=["CURRENT_FLOOR"]:"SPACE_CATEGORY"===resourceType?taskSection.category=["CURRENT_SPACE"]:"ASSET_CATEGORY"===resourceType&&(taskSection.category=["CURRENT_ASSET"]):4===taskSection.assignmentType?taskSection.category=["asset",section.assetCategoryId]:3===taskSection.assignmentType&&(taskSection.category=["space",section.spaceCategoryId]):2===singleResource.resourceType?taskSection.category=["CURRENT_ASSET"]:1===singleResource.resourceType&&(5!==taskSection.assignmentType&&taskSection.assignmentType&&-1!==taskSection.assignmentType?4===taskSection.assignmentType?taskSection.category=["asset",section.assetCategoryId]:3===taskSection.assignmentType&&(taskSection.category=["space",section.spacecategoryId]):(taskSection.assignmentType=5,taskSection.category=["CURRENT_SPACE"]));var task={name:"",resourceLabel:"",description:"",inputType:null,attachmentRequired:!1,enableInput:!1,readingFieldId:null,validation:null,inputValidationRuleId:null,minSafeLimit:null,maxSafeLimit:null,options:[],selectedResourceList:[],isIncludeResource:null,category:taskSection.category,readingFields:[],additionInfo:{defaultValue:"",failureValue:"",woCreateFormId:null,deviationOperatorId:null}};2===creationType?section.taskTemplates&&section.taskTemplates.forEach((function(t){if(5===t.assignmentType?"CURRENT_FLOOR"===taskSection.category[0]?t.category=["CURRENT_FLOOR"]:"SPACE_CATEGORY"===taskSection.category[0]||"space"===taskSection.category[0]?t.category=["CURRENT_SPACE"]:"ASSET_CATEGORY"!==taskSection.category[0]&&"asset"!==taskSection.category[0]||(t.category=["CURRENT_ASSET"]):4===t.assignmentType?t.category=["asset",t.assetCategoryId]:3===t.assignmentType&&(t.category=["space",t.spacecategoryId]),t.enableInput=t.inputType>1,t.inputType=String(t.inputType),t.additionInfo&&t.additionInfo.options&&(t.options=t.additionInfo.options.map((function(x){return{name:x}}))),t.selectedResourceList=[],t.pmIncludeExcludeResourceContexts&&t.pmIncludeExcludeResourceContexts.forEach((function(i){return t.selectedResourceList.push({id:i.resourceId})})),t.readingRules&&t.readingRules.length){var rule=t.readingRules[0];if(t.inputValidationRuleId=rule.id,"(b!=-1)&&(a<b)"===rule.workflow.resultEvaluator)t.validation="incremental";else if("(b!=-1)&&(a>b)"===rule.workflow.resultEvaluator)t.validation="decremental";else if("(b!=-1&&a<b)||(c!=-1&&a>c)"===rule.workflow.resultEvaluator){t.validation="safeLimit";var min=rule.workflow.expressions.find((function(val){return"b"===val.name})).constant;t.minSafeLimit="-1"===min?null:min;var max=rule.workflow.expressions.find((function(val){return"c"===val.name})).constant;t.maxSafeLimit="-1"===max?null:max}}taskSection.tasks.push(_this3.$helpers.cloneFromSchema(task,t))})):section.taskTemplates&&section.taskTemplates.forEach((function(t,taskIndex){if(5===t.assignmentType)"CURRENT_SPACE"===taskSection.category[0]||"space"===taskSection.category[0]?t.category=["CURRENT_SPACE"]:"CURRENT_ASSET"!==taskSection.category[0]&&"asset"!==taskSection.category[0]||(t.category=["CURRENT_ASSET"]);else if(4===t.assignmentType)t.category=["asset",t.assetCategoryId];else if(3===t.assignmentType)t.category=["space",t.spacecategoryId];else if(!t.assignmentType||-1===t.assignmentType)if(t.readingFieldId>0&&t.resourceId>0&&resourceMap[t.resourceId]){var resource=resourceMap[t.resourceId];"CURRENT_SPACE"===taskSection.category[0]&&(1===resource.resourceType?resource.category&&resource.category.id&&resource.id!==singleResource.id&&(t.assignmentType=3,t.category=["space",resource.category.id],t.pmIncludeExcludeResourceContexts=[resource]):2===resource.resourceType&&resource.category&&resource.category.id&&resource.id!==singleResource.id&&(t.assignmentType=3,t.category=["asset",resource.category.id],t.pmIncludeExcludeResourceContexts=[resource]))}else t.assignmentType=5,"CURRENT_SPACE"===taskSection.category[0]?t.category=["CURRENT_SPACE"]:"CURRENT_ASSET"===taskSection.category[0]&&(t.category=["CURRENT_ASSET"]);if(t.enableInput=t.inputType>1,t.inputType=String(t.inputType),t.additionInfo&&t.additionInfo.options&&(t.options=t.additionInfo.options.map((function(x){return{name:x}}))),t.selectedResourceList=[],t.pmIncludeExcludeResourceContexts&&t.pmIncludeExcludeResourceContexts.forEach((function(i){return t.selectedResourceList.push({id:i.resourceId})})),t.readingRules&&t.readingRules.length){var rule=t.readingRules[0];if(t.inputValidationRuleId=rule.id,"(b!=-1)&&(a<b)"===rule.workflow.resultEvaluator)t.validation="incremental";else if("(b!=-1)&&(a>b)"===rule.workflow.resultEvaluator)t.validation="decremental";else if("(b!=-1&&a<b)||(c!=-1&&a>c)"===rule.workflow.resultEvaluator){t.validation="safeLimit";var min=rule.workflow.expressions.find((function(val){return"b"===val.name})).constant;t.minSafeLimit="-1"===min?null:min;var max=rule.workflow.expressions.find((function(val){return"c"===val.name})).constant;t.maxSafeLimit="-1"===max?null:max}}taskSection.tasks.push(_this3.$helpers.cloneFromSchema(task,t))})),_this3.model.taskData.taskSections.push(taskSection)}));else for(var i=0;i<this.model.taskData.taskSections.length;i++)if(2===creationType){if("ALL_FLOORS"===resourceType){this.model.taskData.taskSections[i].category=["CURRENT_FLOOR"];for(var j=0;j<this.model.taskData.taskSections[i].tasks.length;j++)this.model.taskData.taskSections[i].tasks[j].category=["CURRENT_FLOOR"]}else if("SPACE_CATEGORY"===resourceType){this.model.taskData.taskSections[i].category=["CURRENT_SPACE"];for(var _j=0;_j<this.model.taskData.taskSections[i].tasks.length;_j++)this.model.taskData.taskSections[i].tasks[_j].category=["CURRENT_SPACE"]}else if("ASSET_CATEGORY"===resourceType){this.model.taskData.taskSections[i].category=["CURRENT_ASSET"];for(var _j2=0;_j2<this.model.taskData.taskSections[i].tasks.length;_j2++)this.model.taskData.taskSections[i].tasks[_j2].category=["CURRENT_ASSET"]}}else if(2===singleResource.resourceType){this.model.taskData.taskSections[i].category=["CURRENT_ASSET"];for(var _j3=0;_j3<this.model.taskData.taskSections[i].tasks.length;_j3++)this.model.taskData.taskSections[i].tasks[_j3].category=["CURRENT_ASSET"]}else if(1===singleResource.resourceType){this.model.taskData.taskSections[i].category=["CURRENT_SPACE"];for(var _j4=0;_j4<this.model.taskData.taskSections[i].tasks.length;_j4++)this.model.taskData.taskSections[i].tasks[_j4].category=["CURRENT_SPACE"]}}}},v1_PmTriggersvue_type_script_lang_js=PmTriggersvue_type_script_lang_js,PmTriggers_component=(0,componentNormalizer/* default */.Z)(v1_PmTriggersvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PmTriggers=PmTriggers_component.exports},
/***/702638:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"763b584b7aa649bd99722d2be3c8036a.svg";
/***/},
/***/250620:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"03daa5e7a5fe4964f41cd5e0c6dbcdb3.svg";
/***/},
/***/47424:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"400bdd76d58614975db74618a6f968ef.svg";
/***/},
/***/30684:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"52c2ff301190417db7febd08d4cd5153.svg";
/***/},
/***/164065:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ee31f43b8151f3590eba8e0562377413.svg";
/***/},
/***/188742:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"22bc1f7e3fecc069519710728d363ce9.svg";
/***/},
/***/73209:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"feab5de01574d25fa144b4289c5c1d69.svg";
/***/},
/***/555751:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"299b4c1da32a42a00cf63d01aaeb8c83.svg";
/***/},
/***/703659:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"782922838e1b33e6568fd666d379c2b8.svg";
/***/},
/***/351129:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"34313c056b103abf1cd337cccc6f8896.svg";
/***/},
/***/398596:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"a4d2fa3a3df16df5c45be4f9a34439f4.svg";
/***/},
/***/572902:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"db5324b7cf9058a0aa45899e55bf6444.svg";
/***/},
/***/924353:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0d57a0742a44e20a09bf2796286c373d.svg";
/***/},
/***/916803:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"45e80daecf3b2313cd875b1056bb278b.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/2361.js.map