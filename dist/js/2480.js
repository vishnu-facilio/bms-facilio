"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[2480],{
/***/502480:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SupplierArrearWidget}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/etisalat/suppliers/SupplierArrearWidget.vue?vue&type=template&id=75a3d3ec
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"p30 flex-center-vH"},[_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"fc-black3-16 bold"},[_vm._v(" "+_vm._s(_vm.$t("etisalat.payments.outstanding_amount"))+" ")]),_c("div",{staticClass:"fc-black3-16 f22 pT10"},[_vm._v(" "+_vm._s((_vm.formatCurrency(_vm.result.outstandingSum)||0)+" AED")+" ")]),_c("div",{staticClass:"fc-grey6-13"},[_vm._v(_vm._s(_vm.result.outStandingCount)+" bills")])]),_vm.result.outStandingCount?_c("el-col",{attrs:{span:10}},[_c("el-button",{staticClass:"fc-border-btn-green bR5 mT34 f8 fwBold",on:{click:function($event){return _vm.createMemo(_vm.result)}}},[_vm._v(_vm._s(_vm.$t("etisalat.etisalat.create_invoice")))])],1):_vm._e()],1)],1),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:"Create payment Memo",visible:_vm.dialogVisible,width:"35%","show-close":!1,"before-close":_vm.handleClose},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("div",{staticClass:"postion-relative"},[_vm.createPMmeta.buttonInfo?_c("div",{staticClass:"height200"},[_c("div",{staticClass:"pB5"},[_vm._v(" "+_vm._s("Supplier name - "+_vm.createPMmeta.data.supplier)+" ")]),_c("div",{staticClass:"pB5"},[_vm._v(" "+_vm._s("Total Arrear Amount - "+_vm.createPMmeta.data.cost)+" ")]),_c("div",{staticClass:"pB5"},[_vm._v(" "+_vm._s("No of bills - "+_vm.createPMmeta.data.count)+" ")])]):_c("div",{staticClass:"height200"},[_vm.createPMmeta.data.invoice.id?_c("div",{staticClass:"pB5",on:{click:function($event){return _vm.goToInvoice(_vm.createPMmeta.data.invoice)}}},[_vm._v(" "+_vm._s("Payment memo #$"+_vm.createPMmeta.data.invoice.id+" created successfully")+" ")]):_vm._e()]),_c("div",{staticClass:"modal-dialog-footer"},[_vm.createPMmeta.buttonInfo?_c("el-button",{staticClass:"modal-btn-cancel",attrs:{disabled:_vm.saving},on:{click:function($event){return _vm.closeDialog()}}},[_vm._v("CANCEL")]):_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.getData()}}},[_vm._v("CANCEL")]),_vm.createPMmeta.buttonInfo?_c("el-button",{staticClass:"modal-btn-save ",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.createInvoice}},[_vm._v(" "+_vm._s(_vm.saving?"Creating payment Memo...":"Create payment Memo"))]):_c("el-button",{staticClass:"modal-btn-save ",attrs:{type:"primary"},on:{click:function($event){return _vm.getData()}}},[_vm._v(" "+_vm._s("OK"))])],1)])])],1)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(420629)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),formatter=__webpack_require__(676240),axios=__webpack_require__(409669),axios_default=__webpack_require__.n(axios),SupplierArrearWidgetvue_type_script_lang_js={props:["details","moduleName"],data:function(){return{pdfopen:!1,currentPage:0,pageCount:0,dialogVisible:!1,result:{underReviewSum:0,canceledSum:0,outstandingSum:0,canceledCount:0,outStandingCount:0,underReviewCount:0},createPMmeta:{info:"",buttonInfo:!0,data:{}},params:{nameSpace:"SupplierSummary",functionName:"getArrearSummaryCount",paramList:[]},saving:!1}},mounted:function(){this.getData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo}})),{},{fields:function(){return this.moduleMeta.fields||[]},fieldDisplayNames:function(){var _this=this;if(this.moduleMeta&&this.moduleMeta.fields){var fieldMap={};return this.moduleMeta.fields.forEach((function(field){_this.$set(fieldMap,field.name,field.displayName)})),fieldMap}return[]}}),methods:{formatCurrency:function(value){return(0,formatter/* formatCurrency */.xG)(value,2)},goToInvoice:function(invoice){var routeData=this.$router.resolve({path:"/app/supp/custom_invoices/all/".concat(invoice.id,"/summary")});window.open(routeData.href,"_blank")},getDate:function(time){return moment_timezone_default()(Number(time)).tz(this.$timezone).format("DD MMM YYYY")},getData:function(){var _this2=this,supplierrid=this.details.id;this.params.paramList=[],this.params.paramList.push(supplierrid),this.result={underReviewSum:0,canceledSum:0,outstandingSum:0,canceledCount:0,outStandingCount:0,underReviewCount:0},this.closeDialog(),this.$http.post("/v2/workflow/runWorkflow",this.params).then((function(resp){resp.data.result&&resp.data.result.workflow&&resp.data.result.workflow.returnValue&&(_this2.result=resp.data.result.workflow.returnValue)}))},isResponse:function(response){return!(!response||!response.data||0!==response.data.responseCode)},crossOrginReuest:function(){var xhr=new XMLHttpRequest,url="/etisalat/api/generateArrearInvoiceForOutStandingAmount";xhr.setRequestHeader("Content-Type","application/json"),xhr.open("POST",url,!0),xhr.onreadystatechange=someHandler,xhr.send(JSON.stringify({supplierId:this.details.id}))},createInvoice:function(){var _this3=this;this.saving=!0;var url="".concat(window.location.origin,"/etisalat/api/generateArrearInvoiceForOutStandingAmount");axios_default().post(url,{supplierId:this.details.id}).then((function(response){_this3.saving=!1,_this3.createPMmeta.data={},_this3.$set(_this3.createPMmeta.data,"invoice",_this3.getInvoiceData(response.data)),_this3.createPMmeta.info="",_this3.createPMmeta.buttonInfo=!1})).catch((function(error){_this3.saving=!1,_this3.createPMmeta.buttonInfo=!1}))},getInvoiceData:function(data){return data.result&&data.result.invoices&&data.result.invoices.length?data.result.invoices[0]:null},createMemo:function(bill){var totalAmount=bill.outstandingSum,billCount=bill.outStandingCount;this.dialogVisible=!0,this.$set(this.createPMmeta.data,"supplier",this.details.name),this.$set(this.createPMmeta.data,"cost","".concat(this.formatCurrency(totalAmount)||0," AED")),this.$set(this.createPMmeta.data,"count","".concat(billCount||0)),this.createPMmeta.info=""},handleClose:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.createPMmeta.buttonInfo=!0}}},suppliers_SupplierArrearWidgetvue_type_script_lang_js=SupplierArrearWidgetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(suppliers_SupplierArrearWidgetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SupplierArrearWidget=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/2480.js.map