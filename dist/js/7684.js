"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[7684,2680],{
/***/180653:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return UserScopingList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/UserScopes/UserScopingList.vue?vue&type=template&id=187f32b0
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-email-template-page"},[_c("SetupHeader",{scopedSlots:_vm._u([{key:"heading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.userScoping.user_scoping"))+" ")]},proxy:!0},{key:"description",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.userScoping.user_scoping_desc"))+" ")]},proxy:!0},{key:"actions",fn:function(){return[_c("el-button",{staticClass:"setup-el-btn mL20",attrs:{type:"primary"},on:{click:_vm.addUserCreation}},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.user_scoping"))+" ")])]},proxy:!0},{key:"filter",fn:function(){return[_c("div",{staticClass:"flex-middle"},[_c("div",[_c("div",{staticClass:"fc-black-14 text-left bold pB10"},[_vm._v(" Applications ")]),_vm.canShowApps?_c("el-select",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Select App",filterable:""},on:{change:_vm.userScopesListData},model:{value:_vm.appId,callback:function($$v){_vm.appId=$$v},expression:"appId"}},_vm._l(_vm.applications,(function(app){return _c("el-option",{key:app.linkName,attrs:{label:app.name,value:app.id}})})),1):_vm._e()],1)])]},proxy:!0}])}),_vm.loading?_c("setup-loader",{scopedSlots:_vm._u([{key:"setupLoading",fn:function(){return[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})]},proxy:!0}],null,!1,3199698086)}):_vm.$validation.isEmpty(_vm.userScopeList)&&!_vm.loading?_c("setup-empty",{scopedSlots:_vm._u([{key:"emptyImage",fn:function(){return[_c("inline-svg",{attrs:{src:"svgs/copy2",iconClass:"icon icon-sm-md"}})]},proxy:!0},{key:"emptyHeading",fn:function(){return[_vm._v(" "+_vm._s(_vm.$t("setup.userScoping.no_user_scopes"))+" ")]},proxy:!0}])}):_c("el-table",{staticClass:"fc-setup-table-th-borderTop fc-setup-table fc-setup-table-p0 m10 fc-email-template-table",attrs:{data:_vm.userScopeList,height:"calc(100vh - 300px)",fit:!0}},[_c("el-table-column",{attrs:{label:"name"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"fc-role-name",on:{click:function($event){return _vm.editUserScopes(scope.row)}}},[_vm._v(" "+_vm._s(scope.row.scopeName)+" ")])]}}])}),_c("el-table-column",{attrs:{label:"Description"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm._v(" "+_vm._s(scope.row.description?scope.row.description:"---")+" ")]}}])}),_c("el-table-column",{attrs:{label:"Created time"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[scope.row.createdTime>-1?_c("div",[_vm._v(" "+_vm._s(_vm._f("formatDate")(scope.row.createdTime,!0))+" ")]):_c("div",[_vm._v(" --- ")])]}}])}),_c("el-table-column",{attrs:{label:"Is default"},scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_vm._v(" "+_vm._s(scope.row.default?scope.row.default:"---")+" ")]}}])}),_c("el-table-column",{staticClass:"visibility-visible-actions",scopedSlots:_vm._u([{key:"default",fn:function(scope){return[_c("div",{staticClass:"flex-middle"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mR10",attrs:{content:"Clone"},on:{click:function($event){return _vm.addCloneUserScope(scope.row)}}},[_c("i",{staticClass:"el-icon-document-copy visibility-hide-actions f16 fc-portal-filter-border fc-icon-common-hover"})]),!1===scope.row.default?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-delete visibility-hide-actions f16 fc-portal-filter-border mR10 fc-edit-setup-delete-hover",attrs:{content:"Delete scope"},on:{click:function($event){return _vm.deleteScopes(scope.row)}}}):_vm._e(),!1===scope.row.default?_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"el-icon-edit visibility-hide-actions f16 fc-portal-filter-border fc-setup-edit-hover",attrs:{content:"Edit user scope"},on:{click:function($event){return _vm.editCreationForm(scope.row)}}}):_vm._e()])]}}])})],1),_vm.showUserScopeForm?_c("UserScopeAddForm",{attrs:{isNew:_vm.isNew,userScopeData:_vm.selectedUserScopeData,applicationId:_vm.appId},on:{onClose:_vm.reloadUserScope}}):_vm._e(),_vm.showUserCreationForm?_c("userScopeCreation",{attrs:{isNew:_vm.isNew,applicationId:_vm.appId,userScopeData:_vm.selectedUserScopeData},on:{onClose:function($event){_vm.showUserCreationForm=!1},onSave:_vm.userScopesListData}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),SetupLoader=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(233432)),SetupEmptyState=__webpack_require__(622957),SetupHeaderTabs=__webpack_require__(291612),api=__webpack_require__(32284),router=__webpack_require__(329435),UserScopingAddOrEdit=__webpack_require__(852092),UserScopeCreationvue_type_template_id_6b4f7704_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{title:_vm.isNew?_vm.$t("setup.create.create_user_scope"):_vm.$t("setup.create.edit_user_scope"),visible:!0,width:"30%","before-close":_vm.closeDialog}},[_c("el-form",{ref:"scopeForm",attrs:{model:_vm.scopingContext,"label-position":"top"}},[_c("div",{staticClass:"height330 overflow-y-scroll pB50"},[_c("el-form-item",{attrs:{label:"Scope name"}},[_c("el-input",{staticClass:"fc-input-full-border2 fc-input-user-scope",attrs:{placeholder:"Enter the scope name"},model:{value:_vm.scopingContext.scopeName,callback:function($$v){_vm.$set(_vm.scopingContext,"scopeName",$$v)},expression:"scopingContext.scopeName"}})],1),_c("el-form-item",{attrs:{label:_vm.$t("common._common.enter_desc")}},[_c("el-input",{staticClass:"fc-input-full-border-select2",attrs:{type:"textarea",autosize:{minRows:2,maxRows:2},resize:"none",placeholder:_vm.$t("common._common.enter_desc")},model:{value:_vm.scopingContext.description,callback:function($$v){_vm.$set(_vm.scopingContext,"description",$$v)},expression:"scopingContext.description"}})],1)],1)]),_c("div",{staticClass:"modal-dialog-footer",staticStyle:{"z-index":"900"}},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.saving},on:{click:_vm.addScope}},[_vm._v(_vm._s(_vm.$t("panel.dashboard.confirm")))])],1)],1)],1)},UserScopeCreationvue_type_template_id_6b4f7704_staticRenderFns=[],objectSpread2=__webpack_require__(595082),UserScopeCreationvue_type_script_lang_js=(__webpack_require__(659749),__webpack_require__(386544),{props:["applicationId","userScopeData","isNew"],data:function(){return{saving:!1,scopingContext:{scopeName:"",description:""}}},created:function(){this.isNew||(this.scopingContext=(0,objectSpread2/* default */.Z)({},this.userScopeData))},methods:{addScope:function(){var _this=this;this.$refs["scopeForm"].validate(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(valid){var url,params,_yield$API$post,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(valid){_context.next=2;break}return _context.abrupt("return",!1);case 2:return _this.laoding=!0,url="v2/scoping/addOrUpdate",params={},_this.isNew?params.scopingContext={scopeName:_this.scopingContext.scopeName,applicationId:_this.applicationId,description:_this.scopingContext.description}:params.scopingContext={scopeName:_this.scopingContext.scopeName,applicationId:_this.applicationId,description:_this.scopingContext.description,id:_this.userScopeData.id},_context.next=8,api/* API */.bl.post(url,params);case 8:_yield$API$post=_context.sent,error=_yield$API$post.error,data=_yield$API$post.data,error?_this.$message.error(error.message||_this.$t("common._common.error_occured")):(_this.$message.success(_this.$t("common._common.user_scope_saved_successfully")),_this.$emit("onSave",data.scopingContext),_this.closeDialog());case 12:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())},closeDialog:function(){this.$emit("onClose")}}}),UserScopes_UserScopeCreationvue_type_script_lang_js=UserScopeCreationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(UserScopes_UserScopeCreationvue_type_script_lang_js,UserScopeCreationvue_type_template_id_6b4f7704_render,UserScopeCreationvue_type_template_id_6b4f7704_staticRenderFns,!1,null,null,null)
/* harmony default export */,UserScopeCreation=component.exports,appUtil=__webpack_require__(843097),UserScopingListvue_type_script_lang_js={data:function(){return{loading:!0,applications:[],appId:null,userScopeList:[],isNew:!0,showUserScopeForm:!1,selectedUserScopeData:null,showUserCreationForm:!1}},title:function(){return"User Scoping"},components:{SetupLoader:SetupLoader/* default */.Z,SetupEmpty:SetupEmptyState/* default */.Z,SetupHeader:SetupHeaderTabs/* default */.Z,UserScopeAddForm:UserScopingAddOrEdit["default"],userScopeCreation:UserScopeCreation},created:function(){var _this=this;this.loadApps().then((function(){_this.userScopesListData()}))},computed:{canShowApps:function(){var applications=this.applications;return applications.length>1},selectedApp:function(){var _this2=this;return this.applications.find((function(app){return app.id===_this2.appId}))}},methods:{loadApps:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$_loadApps,error,data,_getApp,currentApp,selectedApp;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,appUtil/* loadApps */.jJ)();case 2:_yield$_loadApps=_context.sent,error=_yield$_loadApps.error,data=_yield$_loadApps.data,error?_this3.$message.error(error.message||"Error Occured"):(_this3.applications=(0,appUtil/* getFilteredApps */.iN)(data),_getApp=(0,router/* getApp */.wx)(),currentApp=_getApp.linkName,selectedApp=_this3.applications.find((function(app){return app.linkName===currentApp}))||_this3.applications[0],_this3.appId=(selectedApp||{}).id);case 6:case"end":return _context.stop()}}),_callee)})))()},userScopesListData:function(){var _arguments=arguments,_this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var force,_yield$API$get,error,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return force=!(_arguments.length>0&&void 0!==_arguments[0])||_arguments[0],_this4.loading=!0,_context2.next=4,api/* API */.bl.get("v2/scoping/scopingList?appId=".concat(_this4.appId),{force:force});case 4:_yield$API$get=_context2.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this4.$message.error(error.message||"Error Occurred"):_this4.userScopeList=data.scopingContextList,_this4.loading=!1;case 9:case"end":return _context2.stop()}}),_callee2)})))()},deleteScopes:function(scope){var _this5=this,force=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$dialog.confirm({title:this.$t("setup.userScoping.delete_user_scopes"),message:this.$t("setup.userScoping.are_you_sure_you_want_to_delete_this_user"),rbDanger:!0,rbLabel:this.$t("common._common.delete")}).then(function(){var _ref=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(value){var _yield$API$post,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(value){_context3.next=2;break}return _context3.abrupt("return");case 2:return _context3.next=4,api/* API */.bl.post("v2/scoping/delete",{scopingId:scope.id},{force:force});case 4:_yield$API$post=_context3.sent,error=_yield$API$post.error,error?_this5.$message.error(error.message||_this5.$t("setup.userScoping.delete_user_failed")):(_this5.$message.success(_this5.$t("setup.userScoping.delete_user")),_this5.$nextTick((function(){_this5.userScopesListData()})));case 7:case"end":return _context3.stop()}}),_callee3)})));return function(_x){return _ref.apply(this,arguments)}}())},addUserScopes:function(){this.showUserScopeForm=!0,this.isNew=!0,this.selectedUserScopeData=null},editUserScopes:function(user){this.showUserScopeForm=!0,this.isNew=!1,this.selectedUserScopeData=user},editCreationForm:function(user){this.showUserCreationForm=!0,this.isNew=!1,this.selectedUserScopeData=user},addUserCreation:function(){this.isNew=!0,this.selectedUserScopeData=null,this.showUserCreationForm=!0},addCloneUserScope:function(user){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var url,params,_yield$API$post2,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _this6.loading=!0,url="v2/scoping/clone",params={scopingId:user.id},_context4.next=5,api/* API */.bl.post(url,params);case 5:_yield$API$post2=_context4.sent,error=_yield$API$post2.error,error?_this6.$message.error(error.message||_this6.$t("common._common.error_occured")):(_this6.$message.success(_this6.$t("setup.userScoping.clone_successfully")),_this6.$nextTick((function(){_this6.userScopesListData()}))),_this6.loading=!1;case 9:case"end":return _context4.stop()}}),_callee4)})))()},reloadUserScope:function(){this.showUserScopeForm=!1,this.userScopesListData()}}},UserScopes_UserScopingListvue_type_script_lang_js=UserScopingListvue_type_script_lang_js,UserScopingList_component=(0,componentNormalizer/* default */.Z)(UserScopes_UserScopingListvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,UserScopingList=UserScopingList_component.exports},
/***/622957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupEmptyState}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupEmptyState.vue?vue&type=template&id=839bdf38
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-empty"},[_c("div",{staticClass:"fc-setup-empty-image"},[_c("inline-svg",{attrs:{src:"svgs/list-empty",iconClass:"icon text-center icon-xxxxlg"}})],1),_c("div",{staticClass:"fc-setup-empty-txt"},[_vm._t("emptyHeading")],2),_c("div",{staticClass:"fc-setup-empty-txt-desc"},[_vm._t("emptyDescription")],2)])},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupEmptyState=component.exports},
/***/291612:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupHeaderTabs}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupHeaderTabs.vue?vue&type=template&id=86381c1c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{},[_c("el-header",{staticClass:"fc-v1-setup-header",attrs:{height:"150"}},[_c("div",{staticClass:"flex-middle justify-content-space fc-header-border-bottom p20"},[_c("div",[_c("div",{staticClass:"fc-v1-setup-heading"},[_vm._t("heading")],2),_c("div",{staticClass:"fc-v1-setup-description"},[_vm._t("description")],2)]),_c("div",{staticClass:"flex-middle"},[_vm._t("actions")],2)]),_c("div",[_c("div",{staticClass:"fc-setup-tab-content"},[_vm._t("tabs",(function(){return[_vm._t("tabFilter",(function(){return[_c("div",{staticClass:"flex-middle justify-content-space p20"},[_c("div",{},[_vm._t("filter")],2),_c("div",{},[_vm._t("searchAndPagination")],2)])]})),_vm._t("tabContent")]}))],2)])])],1)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={}
/* normalize component */,component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupHeaderTabs=component.exports},
/***/233432:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SetupLoader}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/components/SetupLoader.vue?vue&type=template&id=367e612c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"fc-setup-loader"},[_vm._t("setupLoading")],2)},staticRenderFns=[],componentNormalizer=__webpack_require__(801001),script={},component=(0,componentNormalizer/* default */.Z)(script,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SetupLoader=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/7684.js.map