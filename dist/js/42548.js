"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[42548],{
/***/842548:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FQuickCreateRecord}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/forms/FQuickCreateRecord.vue?vue&type=template&id=1a0a8b26&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("el-dialog",{attrs:{visible:_vm.dialogVisibility,"append-to-body":!0,title:_vm.displayName,"before-close":_vm.closeDialog,"custom-class":"fc-dialog-center-container f-webform-right-dialog"},on:{"update:visible":function($event){_vm.dialogVisibility=$event}}},[_vm.isLoading?_c("div",{staticClass:"loading-container d-flex"},[_c("Spinner",{attrs:{show:_vm.isLoading}})],1):_c("FWebform",{attrs:{form:_vm.formObj,module:_vm.moduleName,moduleDisplayName:_vm.displayName,isSaving:_vm.isSaving,canShowPrimaryBtn:!0,canShowSecondaryBtn:!0},on:{"update:form":function($event){_vm.formObj=$event},save:_vm.saveRecord,cancel:_vm.closeDialog}})],1)],1)},staticRenderFns=[],FormCreation=(__webpack_require__(821057),__webpack_require__(260228),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(373729)),FWebform=__webpack_require__(434500),FQuickCreateRecordvue_type_script_lang_js={name:"QuickCreateForm",extends:FormCreation/* default */.Z,components:{FWebform:FWebform/* default */.Z},props:["dialogVisibility","moduleName","parentId"],data:function(){return{isSaving:!1}},computed:{displayName:function(){return(this.formObj||{}).displayName},moduleDataId:function(){return-1}},methods:{saveRecord:function(formModel){var _this=this,moduleName=this.moduleName,formObj=this.formObj,url="",formRecord="custom_tenantutility"===moduleName?this.serializedData(formObj,formModel):[this.serializedData(formObj,formModel)],formData=new FormData,urlKey=moduleName,key="vendorDocuments"===moduleName?"documents":"tenantcontact"===moduleName?"tenantContacts":"".concat(moduleName,"s");
// Have to Handle Module Req Url, body ,result according to Module
"vendorcontact"===moduleName?key="vendorContacts":"clientcontact"===moduleName?key="clientContacts":"custom_tenantutility"===moduleName&&(key="moduleData"),this.$helpers.setFormData(key,formRecord,formData),"contact"===moduleName?urlKey="contacts":"custom_tenantutility"===moduleName&&(urlKey="moduleData"),"vendorDocuments"===moduleName?(formData.append("parentAttachmentModuleName",moduleName),formData.append("documents[0].parentId.id",this.parentId),urlKey="documents"):"contact"===moduleName?(formData.append("contacts[0].vendor.id",this.parentId),formData.append("contacts[0].contactType",2)):"insurance"===moduleName?formData.append("insurances[0].vendor.id",this.parentId):"tenantcontact"===moduleName?(formData.delete("tenantContacts[0].tenant.id"),formData.append("tenantContacts[0].tenant.id",this.parentId)):"vendorcontact"===moduleName?(formData.delete("vendorContacts[0].vendor.id"),formData.append("vendorContacts[0].vendor.id",this.parentId)):"clientcontact"===moduleName&&(formData.delete("clientContacts[0].client.id"),formData.append("clientContacts[0].client.id",this.parentId)),url="/v2/".concat(urlKey,"/add"),"custom_tenantutility"===moduleName&&(url="v2/module/data/add",formData.append("moduleName","custom_tenantutility"),formData.append("withLocalId",!1)),this.isSaving=!0;var promise=this.$http.post(url,formData).then((function(_ref){var _ref$data=_ref.data,message=_ref$data.message,responseCode=_ref$data.responseCode,result=_ref$data.result;if(0!==responseCode)throw new Error(message);var addedRecord=result["vendorDocuments"===moduleName||"custom_tenantutility"===moduleName?urlKey:"".concat(moduleName,"s")];_this.$message.success("Added successfully"),_this.$emit("saved",addedRecord[0]),_this.closeDialog()})).catch((function(_ref2){var message=_ref2.message;_this.$message.error(message)}));Promise.all([promise]).finally((function(){return _this.isSaving=!1}))},closeDialog:function(){this.$emit("update:dialogVisibility",!1)}}},forms_FQuickCreateRecordvue_type_script_lang_js=FQuickCreateRecordvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(forms_FQuickCreateRecordvue_type_script_lang_js,render,staticRenderFns,!1,null,"1a0a8b26",null)
/* harmony default export */,FQuickCreateRecord=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/42548.js.map