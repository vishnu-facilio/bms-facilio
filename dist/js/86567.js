(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[86567],{
/***/398758:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return AnalayticsFilter}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/AnalayticsFilter.vue?vue&type=template&id=c060834c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"building-popover"},[_c("div",{staticClass:"side-bar-site-details flex-middle"},[_vm.isSiteAnalysis?_c("div",[_c("InlineSvg",{staticClass:"pointer",attrs:{src:"svgs/spacemanagement/site",iconClass:"icon-50"}})],1):_c("div",{staticClass:"building-icon-container",staticStyle:{margin:"-10px -10px"}},[_c("InlineSvg",{staticClass:"pointer",attrs:{src:"svgs/spacemanagement/building",iconClass:"icon-50 resize_building_icon"}})],1),_c("div",{staticClass:"pL10 width100"},[_c("div",{staticClass:"display-flex-between-space"},[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#")+_vm._s(_vm.selectedBuildingId))]),_c("div",{staticStyle:{"margin-top":"12px","margin-right":"15px"}},[_c("div",{staticClass:"popover-text",attrs:{slot:"reference"},on:{click:function($event){return _vm.showLookupWizard()}},slot:"reference"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.change_site_message_label"))+" ")])])]),_c("div",{staticClass:"display-flex-between-space",staticStyle:{"margin-top":"-8px"}},[_c("div",{staticClass:"label-text pointer label_text",on:{click:function($event){return _vm.showLookupWizard()}}},[_vm._v(" "+_vm._s(_vm.selectedBuildingLabel)+" ")])])])]),_vm.showingLookupWizard?_c("div",[_c("LookupWizard",{attrs:{canShowLookupWizard:_vm.showingLookupWizard,field:_vm.isSiteAnalysis?_vm.siteFieldObj:_vm.buildingFieldObj},on:{"update:canShowLookupWizard":function($event){_vm.showingLookupWizard=$event},"update:can-show-lookup-wizard":function($event){_vm.showingLookupWizard=$event},setLookupFieldValue:function(value){return _vm.toggleBuilding(value.field.selectedItems[0].value,value.field.selectedItems[0].label)}}})],1):_vm._e()])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),ui_forms=(__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(141323)),picklist=__webpack_require__(961358),AnalayticsFiltervue_type_script_lang_js={props:["config","selectedBuildings","multiple","zones","isSiteAnalysis"],components:{LookupWizard:ui_forms/* LookupWizard */.ns},data:function(){return{selectedBuildingsInternal:[],showingLookupWizard:!1,selectedBuildingLabel:"",selectedBuildingId:null,buildingFieldObj:{isDataLoading:!1,options:[],lookupModuleName:"building",field:{lookupModule:{name:"building",displayName:"Building"}},selectedItems:[],forceFetchAlways:!0,filters:{},isDisabled:!1},siteFieldObj:{isDataLoading:!1,options:[],lookupModuleName:"site",field:{lookupModule:{name:"site",displayName:"Site"}},selectedItems:[],forceFetchAlways:!0,filters:{},isDisabled:!1}}},created:function(){
// this.$store.dispatch('loadSites')
// this.$store.dispatch('loadBuildings')
},computed:{},mounted:function(){this.selectedBuildingsInternal=this.selectedBuildings,this.getBuildingLabel(),this.selectedBuildingId=this.selectedBuildings&&this.selectedBuildings[0]?this.selectedBuildings[0]:this.isSiteAnalysis?"No Sites":"No Buildings"},watch:{selectedBuildingsInternal:function(newVal){this.$emit("update:selectedBuildings",this.selectedBuildingsInternal)}},methods:{showLookupWizard:function(){this.showingLookupWizard=!0},getBuildingLabel:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.selectedBuildingsInternal=_this.selectedBuildings,!_this.selectedBuildingsInternal[0]||_this.isSiteAnalysis){_context.next=6;break}return _context.next=4,(0,picklist/* getFieldValue */.oe)({lookupModuleName:"building",selectedOptionId:[_this.selectedBuildingsInternal[0]]}).then((function(_ref){var error=_ref.error,data=_ref.data;if(!error&&data){var value=data[0].label;_this.selectedBuildingLabel=value,_this.buildingFieldObj.selectedItems[0]={value:_this.selectedBuildingsInternal[0],label:_this.selectedBuildingLabel}}}));case 4:_context.next=12;break;case 6:if(!_this.selectedBuildingsInternal[0]||!_this.isSiteAnalysis){_context.next=11;break}return _context.next=9,(0,picklist/* getFieldValue */.oe)({lookupModuleName:"site",selectedOptionId:[_this.selectedBuildingsInternal[0]]}).then((function(_ref2){var error=_ref2.error,data=_ref2.data;if(!error&&data){var value=_this.$getProperty(data,"0.label");_this.selectedBuildingLabel=value,_this.siteFieldObj.selectedItems[0]={value:_this.selectedBuildingsInternal[0],label:_this.selectedBuildingLabel}}}));case 9:_context.next=12;break;case 11:_this.selectedBuildingLabel=_this.isSiteAnalysis?"No Sites":"No Buildings";case 12:case"end":return _context.stop()}}),_callee)})))()},toggleBuilding:function(buildingId,buildingName){if(this.multiple){var idx=this.selectedBuildingsInternal.indexOf(buildingId);-1!==idx?this.selectedBuildingsInternal.length>1&&this.selectedBuildingsInternal.splice(idx,1):this.selectedBuildingsInternal.push(buildingId)}else this.selectedBuildingsInternal=[buildingId],buildingId&&buildingName&&(this.selectedBuildingId=buildingId,this.selectedBuildingLabel=buildingName)},updateSelectedBuilding:function(buildings){this.selectedBuildingsInternal=buildings}}},components_AnalayticsFiltervue_type_script_lang_js=AnalayticsFiltervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_AnalayticsFiltervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AnalayticsFilter=component.exports},
/***/287374:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDataPointSelector}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/components/FDataPointSelector.vue?vue&type=template&id=ae43b48c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.visibility?_c("div",{staticClass:"analytics-sidebar-bg"},[_vm.applyDisable&&_vm.templateFilterToggle?_c("div",{staticClass:"analytics-topbar-warning"},[_c("div",{staticClass:"Only-one-data-point flex-middle"},[_c("InlineSvg",{attrs:{src:"svgs/info-warning",iconClass:"icon vertical-middle icon-md fill-orange"}}),_c("div",{staticClass:"pL10"},[_vm._v(" Only one datapoint allowed for customization. If you want to select other datapoints please ")]),_c("div",{staticClass:"text-style-1 pL5"},[_vm._v("Disable the customization.")]),_c("div",{staticClass:"mL10"},[_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:_vm.updateTemplateFilterToggle},model:{value:_vm.templateFilterToggle,callback:function($$v){_vm.templateFilterToggle=$$v},expression:"templateFilterToggle"}})],1)],1)]):_vm._e(),_c("div",{staticClass:"sidebar-position-setup",style:{top:!0===_vm.applyDisable&&!0===_vm.templateFilterToggle?"45px":"0px"}},[_c("div",{staticClass:"sidebar-close-btn pointer",on:{click:_vm.cancel}},[_vm._m(0)]),_c("div",{staticClass:"building-analysis-sidebar-conatainer"},[_vm.buildingIds&&_vm.buildingIds.length?_vm.loading?_c("div",{staticClass:"newanalytics-sidebar col-3"},[_c("spinner",{attrs:{show:_vm.loading}})],1):_c("div",{staticClass:"newanalytics-sidebar col-3"},[_c("div",{staticClass:"data-pointer-selector-popup"},[_c("analaytics-filter",{attrs:{zones:_vm.zones,selectedBuildings:_vm.selectedBuildings,isSiteAnalysis:_vm.isSiteAnalysis},on:{"update:selectedBuildings":function($event){_vm.selectedBuildings=$event},"update:selected-buildings":function($event){_vm.selectedBuildings=$event}}})],1),_c("div",[_vm.showQuickSearch?_c("div",[_c("div",{staticClass:"fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative fc-list-search-wrapperbuilding-search"},[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.searchKey,expression:"searchKey"}],ref:"quickSearchQuery",staticClass:"quick-search-input4",attrs:{autofocus:"",type:"text",placeholder:"Search"},domProps:{value:_vm.searchKey},on:{keyup:_vm.quickSearch,input:function($event){$event.target.composing||(_vm.searchKey=$event.target.value)}}}),_c("svg",{staticClass:"close-icon4",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.closeSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_vm._e(),_c("div",{staticClass:"building-analysis-side-block"},[_c("div",{staticClass:"building-hover-actions"},[_c("div",{staticClass:"sidebar-asset-H fL",staticStyle:{cursor:"pointer"},on:{click:_vm.loadAssetCategories}},[_vm._v(" Assets ")])]),"assets"===_vm.config.mainPanel.currentModule?_c("div",{staticClass:"building-anlysis-active-block"},[_vm._l(_vm.config.mainPanel.assetCategories,(function(category,index){return _vm.config.mainPanel.assetCategories&&_vm.config.mainPanel.assetCategories.length?_c("div",{key:index,class:["building-anlysis-label-txt","clearboth",{"asset-list-block-txt-active":_vm.config.mainPanel.selectedAssetCategory===category.id}],on:{click:function($event){return _vm.openAssetCategory(category.id)}}},[_c("i",{class:{"fa fa-circle":!0,"dot-blue-icon":_vm.config.mainPanel.selectedAssetCategory===category.id,"dot-grey-icon":_vm.config.mainPanel.selectedAssetCategory!=category.id},attrs:{"aria-hidden":"true"}}),_c("div",{staticClass:"width80"},[_vm._v(_vm._s(category.displayName))])]):_vm._e()})),_vm.config.mainPanel.assetCategoriesLoading?_c("spinner",{staticClass:"clearboth",attrs:{show:_vm.config.mainPanel.assetCategoriesLoading}}):_vm.config.mainPanel.assetCategories.length?_vm._e():_c("div",{staticClass:"building-anlysis-label-txt clearboth"},[_vm._v(" -- No assets -- ")])],2):_vm._e()]),_c("div",{staticClass:"building-analysis-side-block"},[_c("div",{staticClass:"building-hover-actions"},[_c("div",{staticClass:"sidebar-asset-H fL",staticStyle:{cursor:"pointer"},on:{click:_vm.loadKPIAssetCategories}},[_vm._v(" KPI'S ")])]),"kpis"===_vm.config.mainPanel.currentModule?_c("div",{staticClass:"building-anlysis-active-block"},[_vm.config.mainPanel.kpiAssetCategories&&_vm.config.mainPanel.kpiAssetCategories.length?_c("div",_vm._l(_vm.config.mainPanel.kpiAssetCategories,(function(category,index){return _c("div",{key:index,class:["building-anlysis-label-txt","clearboth",{"asset-list-block-txt-active":_vm.config.mainPanel.selectedKPICategory===category.id}],on:{click:function($event){return _vm.openKPIAssetCategory(category.id)}}},[_c("i",{class:{"fa fa-circle":!0,"dot-blue-icon":_vm.config.mainPanel.selectedKPICategory===category.id,"dot-grey-icon":_vm.config.mainPanel.selectedKPICategory!=category.id},attrs:{"aria-hidden":"true"}}),_c("div",{staticClass:"width80"},[_vm._v(_vm._s(category.displayName))])])})),0):_vm._e(),_vm.config.mainPanel.kpiAssetCategoriesLoading?_c("spinner",{staticClass:"clearboth",attrs:{show:_vm.config.mainPanel.kpiAssetCategoriesLoading}}):_vm.config.mainPanel.kpiAssetCategories&&!_vm.config.mainPanel.kpiAssetCategories.length?_c("div",{staticClass:"building-anlysis-label-txt clearboth"},[_vm._v(" -- No KPIS -- ")]):_vm._e()],1):_vm._e()]),_c("div",{staticClass:"building-analysis-side-block"},[_c("div",{staticClass:"building-hover-actions"},[_c("div",{staticClass:"sidebar-asset-H fL",staticStyle:{cursor:"pointer"},on:{click:_vm.loadSpaceReadings}},[_vm._v(" Spaces ")])])]),_vm.isSiteAnalysis?_vm._e():_c("div",{staticClass:"building-analysis-side-block"},[_c("div",{staticClass:"building-hover-actions"},[_c("div",{staticClass:"sidebar-asset-H fL",staticStyle:{cursor:"pointer"},on:{click:_vm.weatherPanelToggler}},[_vm._v(" Weather ")]),_vm.weatherPanel.show?_c("div",{attrs:{lass:"building-anlysis-active-block"}},_vm._l(_vm.weatherModules,(function(weatherModule,wIdx){return _c("div",{key:wIdx,class:["pointer","building-anlysis-label-txt","clearboth",{"asset-list-block-txt-active":_vm.weatherPanel.weatherCategory&&weatherModule.displayName===_vm.weatherPanel.weatherCategory.displayName}],on:{click:function($event){return _vm.loadWeatherReadings(weatherModule)}}},[_c("i",{class:{"fa fa-circle":!0,"dot-blue-icon":!0===weatherModule.selected,"dot-grey-icon":!1===weatherModule.selected},attrs:{"aria-hidden":"true"}}),_c("div",{staticClass:"width80"},[_vm._v(_vm._s(weatherModule.displayName))])])})),0):_vm._e()])]),_c("div",{staticClass:"building-analysis-side-block"},[_c("div",{staticClass:"building-hover-actions"},[_c("div",{staticClass:"sidebar-asset-H fL",staticStyle:{cursor:"pointer"},on:{click:_vm.loadEnPIReadings}},[_vm._v(" EnPI ")])])]),_c("div",{staticClass:"building-analysis-side-block"},[_c("div",{staticClass:"building-hover-actions"},[_c("div",{staticClass:"sidebar-asset-H fL",staticStyle:{cursor:"pointer"},on:{click:_vm.loadRuleAssetCategories}},[_vm._v(" Rules ")])]),"rules"===_vm.config.mainPanel.currentModule?_c("div",{staticClass:"building-anlysis-active-block"},[_vm._l(_vm.config.mainPanel.ruleAssetCategories,(function(category,index){return _vm.config.mainPanel.ruleAssetCategories&&_vm.config.mainPanel.ruleAssetCategories.length?_c("div",{key:index,class:["building-anlysis-label-txt","clearboth",{"asset-list-block-txt-active":_vm.config.mainPanel.selectedRuleAssetCategory===category.id}],on:{click:function($event){return _vm.openRuleAssetCategory(category.id)}}},[_c("i",{class:{"fa fa-circle":!0,"dot-blue-icon":_vm.config.mainPanel.selectedRuleAssetCategory===category.id,"dot-grey-icon":_vm.config.mainPanel.selectedRuleAssetCategory!=category.id},attrs:{"aria-hidden":"true"}}),_c("div",{staticClass:"width80"},[_vm._v(_vm._s(category.displayName))])]):_vm._e()})),_vm.config.mainPanel.ruleAssetCategoriesLoading?_c("spinner",{staticClass:"clearboth",attrs:{show:_vm.config.mainPanel.ruleAssetCategoriesLoading}}):_vm.config.mainPanel.ruleAssetCategories?_vm._e():_c("div",{staticClass:"building-anlysis-label-txt clearboth"},[_vm._v(" -- No assets -- ")])],2):_vm._e()]),_c("div",{staticClass:"building-analysis-side-block"},[_c("div",{staticClass:"building-hover-actions"},[_c("div",{staticClass:"sidebar-asset-H fL",staticStyle:{cursor:"pointer"},on:{click:_vm.loadMVProjects}},[_vm._v(" M & V ")])])])])]):_c("div",[_vm._v(" No buildings selected. ")]),_vm.config.assetPointsPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-lalign"},[_c("div",{staticClass:"assets-points-inner-container"},[_c("el-tabs",{on:{"tab-click":function($event){"rules"===_vm.config.mainPanel.currentModule?_vm.openRuleAssetCategory(_vm.config.mainPanel.selectedRuleAssetCategory):_vm.openAssetCategory(_vm.config.mainPanel.selectedAssetCategory)}},model:{value:_vm.config.assetPointsPanel.activeSubTab,callback:function($$v){_vm.$set(_vm.config.assetPointsPanel,"activeSubTab",$$v)},expression:"config.assetPointsPanel.activeSubTab"}},[_c("el-tab-pane",{attrs:{label:"Points",name:"points"}},[_c("span",{attrs:{slot:"label"},slot:"label"},[_c("img",{staticStyle:{position:"relative",top:"4px",right:"7px"},attrs:{src:__webpack_require__(587758),width:"18px",height:"18px"}}),_vm._v(_vm._s("rules"===_vm.config.mainPanel.currentModule?"Alarms":"Points"))]),_c("div",{staticClass:"building-points-search"},[_c("el-input",{attrs:{placeholder:"Filter points",autofocus:""},model:{value:_vm.config.assetPointsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.assetPointsPanel,"filterQuery",$$v)},expression:"config.assetPointsPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.assetPointsPanel.loading?_c("spinner",{attrs:{show:_vm.config.assetPointsPanel.loading}}):_vm.config.assetPointsPanel.data&&_vm.config.assetPointsPanel.data.length?_vm._l(_vm.sortedAssetPointsPanel,(function(item,index){return _c("div",{key:index,staticClass:"asset-list-block-txt",class:{"asset-list-block-txt-active":parseInt(_vm.config.assetPointsPanel.selectedAssetOrPoint)===parseInt(item.id)},on:{click:function($event){return _vm.openPoint(item.id)}}},[_c("div",{staticClass:"asset-active-select-item"},[_vm._v(" "+_vm._s(item.displayName?item.displayName:item.name)+" ")])])})):_c("div",{staticClass:"asset-list-block-txt text-center"},[_vm._v(" No points found. ")])],2)]),_c("el-tab-pane",{attrs:{label:"Assets",name:"assets"}},[_c("span",{attrs:{slot:"label"},slot:"label"},[_c("img",{staticStyle:{position:"relative",top:"4px",right:"8px"},attrs:{src:__webpack_require__(134105),width:"16px",height:"16px"}}),_vm._v("Assets")]),_c("div",{staticClass:"building-points-search"},[_c("el-input",{attrs:{placeholder:"Filter assets",autofocus:""},model:{value:_vm.config.assetPointsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.assetPointsPanel,"filterQuery",$$v)},expression:"config.assetPointsPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.assetPointsPanel.loading?_c("spinner",{attrs:{show:_vm.config.assetPointsPanel.loading}}):_vm.config.assetPointsPanel.data&&_vm.config.assetPointsPanel.data.length?_vm._l(_vm.sortedAssetPointsPanel,(function(item,index){return _c("div",{key:index,staticClass:"asset-list-block-txt",class:{"asset-list-block-txt-active":parseInt(_vm.config.assetPointsPanel.selectedAssetOrPoint)===parseInt(item.id)},on:{click:function($event){return _vm.openAsset(item.id)}}},[_c("div",{staticClass:"asset-active-select-item"},[_vm._v(" "+_vm._s(item.name?item.name:item.displayName)+" ")])])})):_c("div",{staticClass:"asset-list-block-txt text-center"},[_vm._v(" No assets found. ")])],2)])],1)],1)]):_vm._e(),_vm.config.kpiPointsPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-lalign"},[_c("div",{staticClass:"assets-points-inner-container"},[_c("div",{staticClass:"select-reading-header",staticStyle:{"padding-bottom":"17px","padding-top":"16px !important"}},[_c("span",{attrs:{slot:"label"},slot:"label"},[_c("img",{staticStyle:{position:"relative",top:"4px",right:"7px"},attrs:{src:__webpack_require__(587758),width:"18px",height:"18px"}}),_vm._v(_vm._s("KPI'S"))])]),_c("div",{staticClass:"building-points-search"},[_c("el-input",{attrs:{placeholder:"Filter Kpis",autofocus:""},model:{value:_vm.config.kpiPointsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.kpiPointsPanel,"filterQuery",$$v)},expression:"config.kpiPointsPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.kpiPointsPanel.loading?_c("spinner",{attrs:{show:_vm.config.kpiPointsPanel.loading}}):_vm.config.kpiPointsPanel.data&&_vm.config.kpiPointsPanel.data.length?_vm._l(_vm.filterKpisPanel,(function(item,index){return _c("div",{key:index,staticClass:"asset-list-block-txt",class:{"asset-list-block-txt-active":parseInt(_vm.config.kpiPointsPanel.selectedKpi)===parseInt(item.id)},on:{click:function($event){return _vm.openKpiTypePoint(item)}}},[_c("div",{staticClass:"asset-active-select-item"},[_vm._v(" "+_vm._s(item.displayName?item.displayName:item.name)+" ")])])})):_c("div",{staticClass:"asset-list-block-txt text-center"},[_vm._v(" No Kpi's found. ")])],2)])]):_vm._e(),_vm.config.mvPointsPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-lalign"},[_c("div",{staticClass:"assets-points-inner-container"},[_c("el-tabs",{on:{"tab-click":function($event){return _vm.openmvproject(_vm.config.mainPanel.selectedAssetCategory)}},model:{value:_vm.config.mvPointsPanel.activeSubTab,callback:function($$v){_vm.$set(_vm.config.mvPointsPanel,"activeSubTab",$$v)},expression:"config.mvPointsPanel.activeSubTab"}},[_c("el-tab-pane",{attrs:{label:"Points",name:"points"}},[_c("span",{attrs:{slot:"label"},slot:"label"},[_c("img",{staticStyle:{position:"relative",top:"4px",right:"7px"},attrs:{src:__webpack_require__(587758),width:"18px",height:"18px"}}),_vm._v("Points")]),_c("div",{staticClass:"building-points-search"},[_c("el-input",{attrs:{placeholder:"Filter points",autofocus:""},model:{value:_vm.config.mvPointsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.mvPointsPanel,"filterQuery",$$v)},expression:"config.mvPointsPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.mvPointsPanel.loading?_c("spinner",{attrs:{show:_vm.config.mvPointsPanel.loading}}):_vm.config.mvPointsPanel.data&&_vm.config.mvPointsPanel.data.length?_vm._l(_vm.filteredMvPointsPanel,(function(item,index){return _c("div",{key:index,staticClass:"asset-list-block-txt",class:{"asset-list-block-txt-active":_vm.config.mvPointsPanel.selectedMvOrPoint===item.id},on:{click:function($event){return _vm.openMvPoint(item.id)}}},[_c("div",{staticClass:"asset-active-select-item"},[_vm._v(" "+_vm._s(item.displayName?item.displayName:item.name)+" ")])])})):_c("div",{staticClass:"asset-list-block-txt text-center"},[_vm._v(" No points found. ")])],2)]),_c("el-tab-pane",{attrs:{label:"M&V",name:"mvs"}},[_c("span",{attrs:{slot:"label"},slot:"label"},[_c("img",{staticStyle:{position:"relative",top:"4px",right:"8px"},attrs:{src:__webpack_require__(134105),width:"16px",height:"16px"}}),_vm._v("M&V")]),_c("div",{staticClass:"building-points-search"},[_c("el-input",{attrs:{placeholder:"Filter M&Vs",autofocus:""},model:{value:_vm.config.mvPointsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.mvPointsPanel,"filterQuery",$$v)},expression:"config.mvPointsPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.mvPointsPanel.loading?_c("spinner",{attrs:{show:_vm.config.mvPointsPanel.loading}}):_vm.config.mvPointsPanel.data&&_vm.config.mvPointsPanel.data.length?_vm._l(_vm.filteredMvPointsPanel,(function(item,index){return _c("div",{key:index,staticClass:"asset-list-block-txt",class:{"asset-list-block-txt-active":_vm.config.mvPointsPanel.selectedMvOrPoint===item.id},on:{click:function($event){return _vm.openMv(item.id)}}},[_c("div",{staticClass:"asset-active-select-item"},[_vm._v(" "+_vm._s(item.name?item.name:item.displayName)+" ")])])})):_c("div",{staticClass:"asset-list-block-txt text-center"},[_vm._v(" No M&Vs. ")])],2)])],1)],1)]):_vm._e(),_vm.config.selectReadingsPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-shadow"},[_c("div",[_c("div",{staticClass:"assets-points-inner-container readings-list-container"},[_c("div",{staticClass:"select-reading-header"},[_c("div",{staticClass:"select-reading-H"},[_vm._v(" "+_vm._s("rules"===_vm.config.mainPanel.currentModule?"SELECT ALARMS":"SELECT READINGS")+" ")])]),_c("div",{staticClass:"building-points-search building-points-height"},[_c("el-input",{attrs:{placeholder:"Filter readings",autofocus:""},model:{value:_vm.config.selectReadingsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.selectReadingsPanel,"filterQuery",$$v)},expression:"config.selectReadingsPanel.filterQuery"}})],1),_c("div",{staticClass:"mT20 readings-scroll"},[_vm.config.selectReadingsPanel.loading?_c("spinner",{attrs:{show:_vm.config.selectReadingsPanel.loading}}):_vm.config.selectReadingsPanel.data&&_vm.config.selectReadingsPanel.data.length?_c("el-checkbox-group",{staticClass:"building-check-list",on:{change:_vm.addToBuildingMap},model:{value:_vm.config.mainPanel.selectedDataPoints,callback:function($$v){_vm.$set(_vm.config.mainPanel,"selectedDataPoints",$$v)},expression:"config.mainPanel.selectedDataPoints"}},_vm._l(_vm.sorteddReadingsPanel,(function(item,index){return _c("el-checkbox",{key:index,attrs:{label:item.id+"_"+_vm.config.selectReadingsPanel.parentId}},[_vm._v(_vm._s(item.displayName?item.displayName:item.name))])})),1):_c("div",{staticClass:"text-center"},[_vm._v(" No data found. ")])],1)])])]):_vm._e(),_vm.config.selectAssetsPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-shadow"},[_c("div",[_c("div",{staticClass:"assets-points-inner-container readings-list-container"},[_vm._m(1),_c("div",{staticClass:"building-points-search building-points-height"},[_c("el-input",{attrs:{placeholder:"Filter assets",autofocus:""},model:{value:_vm.config.selectAssetsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.selectAssetsPanel,"filterQuery",$$v)},expression:"config.selectAssetsPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.selectAssetsPanel.loading?_c("spinner",{attrs:{show:_vm.config.selectAssetsPanel.loading}}):_vm.config.selectAssetsPanel.data&&_vm.config.selectAssetsPanel.data.length?_c("el-checkbox-group",{staticClass:"building-check-list asset-checklist",on:{change:_vm.checkForRangePoints},model:{value:_vm.config.mainPanel.selectedDataPoints,callback:function($$v){_vm.$set(_vm.config.mainPanel,"selectedDataPoints",$$v)},expression:"config.mainPanel.selectedDataPoints"}},_vm._l(_vm.sortedAssetsPanel,(function(item,index){return _c("el-checkbox",{key:index,attrs:{label:_vm.config.selectAssetsPanel.readingId+"_"+item.id}},[_vm._v(_vm._s(item.displayName?item.displayName:item.name))])})),1):_c("div",[_vm._v(" No data found. ")])],1)])])]):_vm._e(),_vm.config.selectKPIPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-shadow"},[_c("div",[_c("div",{staticClass:"assets-points-inner-container readings-list-container"},[_vm._m(2),_c("div",{staticClass:"building-points-search building-points-height"},[_c("el-input",{attrs:{placeholder:"Filter assets",autofocus:""},model:{value:_vm.config.selectKPIPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.selectKPIPanel,"filterQuery",$$v)},expression:"config.selectKPIPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.selectKPIPanel.loading?_c("spinner",{attrs:{show:_vm.config.selectKPIPanel.loading}}):_vm.config.selectKPIPanel.data&&_vm.config.selectKPIPanel.data.length?_c("el-checkbox-group",{staticClass:"building-check-list asset-checklist",on:{change:_vm.checkForRangePoints},model:{value:_vm.config.mainPanel.selectedDataPoints,callback:function($$v){_vm.$set(_vm.config.mainPanel,"selectedDataPoints",$$v)},expression:"config.mainPanel.selectedDataPoints"}},_vm._l(_vm.sortedKpiAssetsPanel,(function(item,index){return _c("el-checkbox",{key:index,attrs:{label:_vm.config.selectKPIPanel.readingId+"_"+item.id+"_kpi"}},[_vm._v(_vm._s(item.displayName?item.displayName:item.name))])})),1):_c("div",{staticClass:"text-center"},[_vm._v(" No data found. ")])],1)])])]):_vm._e(),_vm.config.selectMvReadingsPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-shadow"},[_c("div",[_c("div",{staticClass:"assets-points-inner-container readings-list-container"},[_vm._m(3),_c("div",{staticClass:"building-points-search building-points-height"},[_c("el-input",{attrs:{placeholder:"Filter readings",autofocus:""},model:{value:_vm.config.selectMvReadingsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.selectMvReadingsPanel,"filterQuery",$$v)},expression:"config.selectMvReadingsPanel.filterQuery"}})],1),_c("div",{staticClass:"mT20 readings-scroll"},[_vm.config.selectMvReadingsPanel.loading?_c("spinner",{attrs:{show:_vm.config.selectMvReadingsPanel.loading}}):_vm.config.selectMvReadingsPanel.data&&_vm.config.selectMvReadingsPanel.data.length?_c("el-checkbox-group",{staticClass:"building-check-list",on:{change:_vm.addToBuildingMap},model:{value:_vm.config.mainPanel.selectedDataPoints,callback:function($$v){_vm.$set(_vm.config.mainPanel,"selectedDataPoints",$$v)},expression:"config.mainPanel.selectedDataPoints"}},_vm._l(_vm.filteredMvReadingsPanel,(function(item,index){return _c("el-checkbox",{key:index,attrs:{label:item.id+"_"+_vm.config.selectMvReadingsPanel.parentId}},[_vm._v(_vm._s(item.displayName?item.displayName:item.name))])})),1):_c("div",{staticClass:"text-center"},[_vm._v(" No data found. ")])],1)])])]):_vm._e(),_vm.config.selectMvsPanel.show?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-shadow"},[_c("div",[_c("div",{staticClass:"assets-points-inner-container readings-list-container"},[_vm._m(4),_c("div",{staticClass:"building-points-search building-points-height"},[_c("el-input",{attrs:{placeholder:"Filter M&Vs",autofocus:""},model:{value:_vm.config.selectMvsPanel.filterQuery,callback:function($$v){_vm.$set(_vm.config.selectMvsPanel,"filterQuery",$$v)},expression:"config.selectMvsPanel.filterQuery"}})],1),_c("div",{staticClass:"asset-list-container mT10"},[_vm.config.selectMvsPanel.loading?_c("spinner",{attrs:{show:_vm.config.selectMvsPanel.loading}}):_vm.config.selectMvsPanel.data&&_vm.config.selectMvsPanel.data.length?_c("el-checkbox-group",{staticClass:"building-check-list asset-checklist",on:{change:_vm.checkForRangePoints},model:{value:_vm.config.mainPanel.selectedDataPoints,callback:function($$v){_vm.$set(_vm.config.mainPanel,"selectedDataPoints",$$v)},expression:"config.mainPanel.selectedDataPoints"}},_vm._l(_vm.filteredmvsPanel,(function(item,index){return _c("el-checkbox",{key:index,attrs:{label:_vm.config.selectMvsPanel.readingId+"_"+item.id}},[_vm._v(_vm._s(item.displayName?item.displayName:item.name))])})),1):_c("div",[_vm._v(" No data found. ")])],1)])])]):_vm._e(),_vm.showFourthPanel?_c("div",{staticClass:"assets-points-Scontainer assets-points-Scontainer-shadow overflow-y"},[_c("div",{staticClass:"height100 overflow-y-scroll pB200"},[_c("div",{staticClass:"fc-text-pink11 text-uppercase pT23 pB20 pL20 mB10 position-sticky top0 z-index1 white-bg"},[_vm._v(" SELECTED DATA POINTS "),_c("span",{staticClass:"fc-grey-text"},[_vm._v(_vm._s(_vm.selectedDataPoints))])]),_c("div",{staticClass:"analtics-point-selector4 mB30"},_vm._l(_vm.summaryList,(function(readingGroup,readingGroupIndex){return _c("div",{key:readingGroupIndex,staticClass:"mB20"},[_c("div",{staticClass:"sidebar-asset-H pL20 mB30"},[_vm._v(" "+_vm._s(readingGroup.label)+" ")]),_vm._l(readingGroup.readings,(function(readings,readingIndex){return _c("el-row",{key:readingIndex,staticClass:"pL20 pR20 analtics-point-selector4-row"},[_c("el-col",{attrs:{span:1}},[_c("div",{staticClass:"dot-dark-grey5 mT8"})]),_c("el-col",{staticClass:"mL5",attrs:{span:21}},[_c("div",{staticClass:"label-txt-black line-height20"},[_vm._v(" "+_vm._s(readings.readingLabel)+" ")]),_c("div",{staticClass:"fc-grey2-text12"},[_vm._v(" "+_vm._s(readings.resourceLabel?readings.resourceLabel:"")+" ")]),_c("div",{staticClass:"fc-grey2-text12"},[_vm._v(" "+_vm._s(_vm.moreThanOneLocation&&readings.location?readings.location:"")+" ")])]),_c("el-col",{attrs:{span:1}},[_c("i",{staticClass:"el-icon-close analtics-point-selector4-close",on:{click:function($event){return _vm.removeDataPointFromGroup(readings,readingGroupIndex)}}})])],1)}))],2)})),0)]),_vm.config.mainPanel.selectedDataPoints&&_vm.config.mainPanel.selectedDataPoints.length?_c("div",{staticClass:"building-analysis-point-container row",style:{bottom:!0===_vm.applyDisable&&!0===_vm.templateFilterToggle?"160px":"100px"}},[_c("div",{staticClass:"building-analysis-points-wrap flex-middle flex-direction-column col-12"},[_c("div"),_c("div",{staticClass:"building-analysis-points-btn flex-middle col-4"},[_c("el-button",{staticClass:"btn-grey-fill pL30 pR30",attrs:{type:"button"},on:{click:_vm.cancel}},[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))]),_c("el-button",{staticClass:"btn-blue-fill pL30 pR30 mL15",attrs:{type:"button"},on:{click:_vm.apply}},[_vm._v(_vm._s(_vm.$t("maintenance.pm_list.apply")))])],1)])]):_vm._e()]):_vm._e()])]),_c("el-dialog",{staticClass:"fc-dialog-center-container",attrs:{visible:_vm.deleteRangePoint,title:"Delete Range point",width:"40%","append-to-body":!0,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function($event){_vm.deleteRangePoint=$event},keydown:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"esc",27,$event.key,["Esc","Escape"]))return null;_vm.deleteRangePoint=!1}}},[_c("div",{staticClass:"height200"},[_c("div",[_vm._v(" This datapoint is part of a range group. Deleting it, removes the range group. ")]),_c("div",[_vm._v("Are you sure you want to delete it?")]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.cancelRangeDeletion}},[_vm._v("Close")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.deleteRangePoints}},[_vm._v("Delete")])],1)])])],1):_vm._e()])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{},[_c("i",{staticClass:"el-icon-close"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"select-reading-header"},[_c("div",{staticClass:"select-reading-H"},[_vm._v(" SELECT ASSETS ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"select-reading-header"},[_c("div",{staticClass:"select-reading-H"},[_vm._v(" SELECT ASSETS ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"select-reading-header"},[_c("div",{staticClass:"select-reading-H"},[_vm._v(" SELECT READINGS ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"select-reading-header"},[_c("div",{staticClass:"select-reading-H"},[_vm._v(" SELECT M&Vs ")])])}],toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),asyncIterator=__webpack_require__(607283),AnalayticsFilter=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(670560),__webpack_require__(228436),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(169358),__webpack_require__(162506),__webpack_require__(450886),__webpack_require__(339772),__webpack_require__(634338),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(398758)),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),api=__webpack_require__(32284),picklist=__webpack_require__(961358),cloneDeep=__webpack_require__(150361),cloneDeep_default=__webpack_require__.n(cloneDeep),FDataPointSelectorvue_type_script_lang_js={props:["visibility","zones","isSiteAnalysis","savedPoints","reportObject","templateFilterToggle"],data:function(){return{config:{mainPanel:{currentModule:"",assetCategories:null,assetCategoriesLoading:!1,selectedAssetCategory:null,selectedDataPoints:[],ruleAssetCategories:null,ruleAssetCategoriesLoading:null,selectedRuleAssetCategory:null,selectedKPICategory:null,kpiAssetCategories:null,kpiAssetCategoriesLoading:!1},assetPointsPanel:{show:!1,activeSubTab:"points",data:null,loading:!0,selectedAssetOrPoint:null,filterQuery:""},selectReadingsPanel:{show:!1,data:null,loading:!1,parentId:null,filterQuery:""},selectAssetsPanel:{show:!1,data:null,loading:!1,readingId:null,filterQuery:""},mvPointsPanel:{show:!1,activeSubTab:"mvs",data:null,loading:!0,selectedMvOrPoint:null,filterQuery:""},selectMvReadingsPanel:{show:!1,data:null,loading:!1,parentId:null,filterQuery:""},selectMvsPanel:{show:!1,data:null,loading:!1,readingId:null,filterQuery:""},kpiPointsPanel:{show:!1,activeSubTab:"kpis",data:null,loading:!0,selectedKpi:null,filterQuery:""},selectKPIPanel:{show:!1,data:null,loading:!1,readingId:null,filterQuery:""}},weatherPanel:{show:!1,weatherCategory:null},loading:!0,readings:{categories:[],assets:{},categoryWithAssets:{},fields:{},categoryWithFields:{}},mvprojects:null,mvreadings:[],mvAssetMap:null,mvprojectNameMap:null,showQuickSearch:!1,quickSearchQuery:null,selectedBuildings:[],newWeatherModule:{displayName:"New Weather",moduleName:"newWeather",selected:!1},weatherModules:[{displayName:"Live Weather",moduleName:"weather",selected:!1},{displayName:"Daily Weather",moduleName:"weatherDaily",selected:!1},{displayName:"Degree Days",selected:!1},{displayName:"Psychrometric",moduleName:"psychrometric",selected:!1}],deleteRangePoint:!1,rangePointConfirmation:!1,pointDeletionStore:{},summaryList:[],allFields:{assets:[],rules:[],kpis:[]},currentKey:0,siteId:null,applyDisable:!1,rulereadings:{categories:[],assets:{},categoryWithAssets:{},fields:{},categoryWithFields:{}},kpireadings:{categories:[],assets:{},categoryWithAssets:{},fields:{},categoryWithFields:{}},field_vs_Kpi_map:{},id_vs_asset:{},hideUserFilter:!1,urlParams:{perPage:50,page:1,viewName:"hidden-all"},default_building_id:null,selectedBuildingLabel:this.isSiteAnalysis?"No Sites":"No Buildings"}},components:{AnalayticsFilter:AnalayticsFilter/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({assetCategory:function(state){return state.assetCategory}})),{},{newSiteSummary:function(){return this.$helpers.isLicenseEnabled("NEW_SITE_SUMMARY")&&this.$helpers.isLicenseEnabled("WEATHER_INTEGRATION")},selectedDataPoints:function(){return this.config.mainPanel.selectedDataPoints.length<10?"0"+this.config.mainPanel.selectedDataPoints.length:this.config.mainPanel.selectedDataPoints.length},isRangeModeEnabled:function(){if("undefined"!==typeof this.reportObject&&null!==this.reportObject){var dP=this.reportObject.options.dataPoints.filter((function(point){return"rangeGroup"===point.type}));return 0!==dP.length}return!1},moreThanOneLocation:function(){var locationSet=new Set;if(0!==this.summaryList.length){var _step4,_iterator4=(0,createForOfIteratorHelper/* default */.Z)(this.summaryList);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step5,group=_step4.value,_iterator5=(0,createForOfIteratorHelper/* default */.Z)(group.readings);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var reading=_step5.value;locationSet.add(reading.location)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}return locationSet.size>1}return!1},showFourthPanel:function(){return 0!==this.summaryList.length&&(0!==this.config.mainPanel.selectedDataPoints.length||0===this.summaryList.length||(this.addToSummaryListNew(),!1))},buildingIds:function(){if(this.selectedBuildings&&this.selectedBuildings.length){var _step6,buildingIds=[],_iterator6=(0,createForOfIteratorHelper/* default */.Z)(this.selectedBuildings);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var sb=_step6.value;buildingIds.push(parseInt(sb))}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}return buildingIds}return null},buildingList:function(){return{}},selectedBuildingName:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldValue,data,error,value,_yield$getFieldValue2,_data,_error,_value;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.selectedBuildings||!_this.selectedBuildings.length){_context.next=18;break}if(1!==_this.selectedBuildings.length){_context.next=18;break}if(!_this.selectedBuildings[0]||_this.isSiteAnalysis){_context.next=11;break}return _context.next=5,(0,picklist/* getFieldValue */.oe)({lookupModuleName:"building",selectedOptionId:[_this.selectedBuildings[0]]});case 5:_yield$getFieldValue=_context.sent,data=_yield$getFieldValue.data,error=_yield$getFieldValue.error,!error&&data&&(value=_this.$getProperty(data,"0.label"),_this.selectedBuildingLabel=value),_context.next=18;break;case 11:if(!_this.selectedBuildings[0]||!_this.isSiteAnalysis){_context.next=18;break}return _context.next=14,(0,picklist/* getFieldValue */.oe)({lookupModuleName:"site",selectedOptionId:[_this.selectedBuildings[0]]});case 14:_yield$getFieldValue2=_context.sent,_data=_yield$getFieldValue2.data,_error=_yield$getFieldValue2.error,!_error&&_data&&(_value=_this.$getProperty(_data,"0.label"),_this.selectedBuildingLabel=_value);case 18:case"end":return _context.stop()}}),_callee)})))()},filteredAssetPointsPanel:function(){var self=this;return this.config.assetPointsPanel.data&&this.config.assetPointsPanel.data.length?this.config.assetPointsPanel.filterQuery&&this.config.assetPointsPanel.filterQuery.trim().length?this.config.assetPointsPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.assetPointsPanel.filterQuery.toLowerCase())>=0)return d})):this.config.assetPointsPanel.data:[]},filteredMvPointsPanel:function(){var self=this;if(this.config.mvPointsPanel.data&&this.config.mvPointsPanel.data.length){if(this.config.mvPointsPanel.filterQuery&&this.config.mvPointsPanel.filterQuery.trim().length){var filteredData=this.config.mvPointsPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.mvPointsPanel.filterQuery.toLowerCase())>=0)return d}));return this.$helpers.sortData("name",filteredData)}return this.$helpers.sortData("name",this.config.mvPointsPanel.data)}return[]},filteredReadingsPanel:function(){var self=this;return this.config.selectReadingsPanel.data&&this.config.selectReadingsPanel.data.length?this.config.selectReadingsPanel.filterQuery&&this.config.selectReadingsPanel.filterQuery.trim().length?this.config.selectReadingsPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.selectReadingsPanel.filterQuery.toLowerCase())>=0)return d})):this.config.selectReadingsPanel.data:[]},filteredAssetsPanel:function(){var self=this;return this.config.selectAssetsPanel.data&&this.config.selectAssetsPanel.data.length?this.config.selectAssetsPanel.filterQuery&&this.config.selectAssetsPanel.filterQuery.trim().length?this.config.selectAssetsPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.selectAssetsPanel.filterQuery.toLowerCase())>=0)return d})):this.config.selectAssetsPanel.data:[]},filteredMvReadingsPanel:function(){var self=this;if(this.config.selectMvReadingsPanel.data&&this.config.selectMvReadingsPanel.data.length){if(this.config.selectMvReadingsPanel.filterQuery&&this.config.selectMvReadingsPanel.filterQuery.trim().length){var filteredData=this.config.selectMvReadingsPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.selectMvReadingsPanel.filterQuery.toLowerCase())>=0)return d}));return this.$helpers.sortData("name",filteredData)}return this.$helpers.sortData("name",this.config.selectMvReadingsPanel.data)}return[]},filteredmvsPanel:function(){var self=this;if(this.config.selectMvsPanel.data&&this.config.selectMvsPanel.data.length){if(this.config.selectMvsPanel.filterQuery&&this.config.selectMvsPanel.filterQuery.trim().length){var filteredData=this.config.selectMvsPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.selectMvsPanel.filterQuery.toLowerCase())>=0)return d}));return this.$helpers.sortData("name",filteredData)}return this.$helpers.sortData("name",this.config.selectMvsPanel.data)}return[]},filterKpisPanel:function(){var self=this;return this.config.kpiPointsPanel.data&&this.config.kpiPointsPanel.data.length?this.config.kpiPointsPanel.filterQuery&&this.config.kpiPointsPanel.filterQuery.trim().length?this.config.kpiPointsPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.kpiPointsPanel.filterQuery.toLowerCase())>=0)return d})):this.config.kpiPointsPanel.data:[]},filteredKpiAssetsPanel:function(){var self=this;return this.config.selectKPIPanel.data&&this.config.selectKPIPanel.data.length?this.config.selectKPIPanel.filterQuery&&this.config.selectKPIPanel.filterQuery.trim().length?this.config.selectKPIPanel.data.filter((function(d){var name=d.displayName?d.displayName:d.name;if(name.toLowerCase().indexOf(self.config.selectKPIPanel.filterQuery.toLowerCase())>=0)return d})):this.config.selectKPIPanel.data:[]},sortedKpiAssetsPanel:function(){return this.$helpers.sortData("name",this.filteredKpiAssetsPanel)},sortedAssetPointsPanel:function(){return this.$helpers.sortData("name",this.filteredAssetPointsPanel)},sorteddReadingsPanel:function(){return this.$helpers.sortData("name",this.filteredReadingsPanel)},sortedAssetsPanel:function(){return this.$helpers.sortData("name",this.filteredAssetsPanel)}}),watch:{buildingIds:function(newVal,oldVal){JSON.stringify(newVal)!==JSON.stringify(oldVal)&&(this.config.mainPanel.currentModule="",this.loadKPIAssetCategories(),this.loadAssetCategories(),this.resetReadings())},selectedBuildingName:function(){var _selectedBuildingName=(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(newVal){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.selectedBuildingName;case 2:this.$emit("selectBuildings",{name:this.selectedBuildingLabel,ids:this.selectedBuildings});case 3:case"end":return _context2.stop()}}),_callee2,this)})));function selectedBuildingName(_x){return _selectedBuildingName.apply(this,arguments)}return selectedBuildingName}(),buildingList:function(newval){this.setDefaultSelection()},"config.mainPanel.selectedDataPoints":{handler:function(newVal,oldVal){0===newVal.length||null!==this.savedPoints&&"undefined"!==typeof this.savedPoints||this.addToSummaryListNew()},deep:!0},savedPoints:function(newValue,oldVal){newValue&&this.prepareSavedDataPoints()}},mounted:function(){},created:function(){var _this2=this;Promise.all([this.$store.dispatch("loadAssetCategory"),this.loadDefaultBuilding()]).then((function(){_this2.setDefaultSelection()}))},methods:{loadDefaultBuilding:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get,data,error,_yield$API$get2,_data2,_error2;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this3.isSiteAnalysis){_context3.next=9;break}return _context3.next=3,api/* API */.bl.get("/v3/picklist/building",_this3.urlParams,{force:!0});case 3:_yield$API$get=_context3.sent,data=_yield$API$get.data,error=_yield$API$get.error,!error&&(null===data||void 0===data?void 0:data.pickList.length)>0&&(_this3.default_building_id=data.pickList[0].value),_context3.next=15;break;case 9:return _context3.next=11,api/* API */.bl.get("/v3/picklist/site",_this3.urlParams,{force:!0});case 11:_yield$API$get2=_context3.sent,_data2=_yield$API$get2.data,_error2=_yield$API$get2.error,!_error2&&(null===_data2||void 0===_data2?void 0:_data2.pickList.length)>0&&(_this3.default_building_id=_data2.pickList[0].value);case 15:case"end":return _context3.stop()}}),_callee3)})))()},updateTemplateFilterToggle:function(){this.$emit("update:templateFilterToggle",this.templateFilterToggle)},addToBuildingMap:function(newVal){var buildingId=this.buildingIds[0];this.config.buildingToReadingMap||(this.config["buildingToReadingMap"]={}),this.config.buildingToReadingMap[buildingId]=newVal},checkForRangePoints:function(newVal){if(this.addToBuildingMap(newVal),this.reportObject&&0!==this.summaryList.length){var rangeGroups=this.reportObject.options.dataPoints.filter((function(dP){return"rangeGroup"===dP.type}));if(0!==rangeGroups.length){var _step7,inRangeGroup=new Set,_iterator7=(0,createForOfIteratorHelper/* default */.Z)(rangeGroups);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _step9,rGroup=_step7.value,_iterator9=(0,createForOfIteratorHelper/* default */.Z)(rGroup.children);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var child=_step9.value;inRangeGroup.add(child.fieldId+"_"+child.parentId),this.pointDeletionStore["readingId"]=child.fieldId,this.pointDeletionStore["resourceId"]=child.parentId}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}var _step8,_iterator8=(0,createForOfIteratorHelper/* default */.Z)(inRangeGroup);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var inPoint=_step8.value;if(!newVal.includes(inPoint))return void(this.deleteRangePoint=!0)}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}}}},getAllSummaryDataPoints:function(){var allDataPoints=[];if(this.summaryList)for(var key in this.summaryList)allDataPoints.push.apply(allDataPoints,(0,toConsumableArray/* default */.Z)(this.summaryList[key].readings));return allDataPoints},convertToList:function(readings){var _step10,readingsObject={},_iterator10=(0,createForOfIteratorHelper/* default */.Z)(readings);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var reading=_step10.value;readingsObject[reading.id]=reading}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}return readingsObject},cancelRangeDeletion:function(){this.pointDeletionStore={};var _step11,dataPoints=[],_iterator11=(0,createForOfIteratorHelper/* default */.Z)(this.reportObject.options.dataPoints);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var dp=_step11.value;dp.children&&0!==dp.children.length?dataPoints.push.apply(dataPoints,(0,toConsumableArray/* default */.Z)(JSON.parse(JSON.stringify(dp.children)))):dataPoints.push(JSON.parse(JSON.stringify(dp)))}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}for(var _i=0,_dataPoints=dataPoints;_i<_dataPoints.length;_i++){var dataPoint=_dataPoints[_i];dataPoint["aliases"]={},dataPoint.aliases["actual"]=dataPoint.alias,dataPoint["yAxis"]={},dataPoint.yAxis["fieldId"]=dataPoint.fieldId}this.setInitialValues(dataPoints,null,"restoreRange"),this.deleteRangePoint=!1},deleteRangePoints:function(){
// obtain range points
var existingDataPoints=(0,toConsumableArray/* default */.Z)(this.config.mainPanel.selectedDataPoints),readingId=this.pointDeletionStore["readingId"],resourceId=this.pointDeletionStore["resourceId"],tobeDeleted=[];if(this.reportObject){var _step12,_iterator12=(0,createForOfIteratorHelper/* default */.Z)(this.reportObject.options.dataPoints);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var dP=_step12.value;if("rangeGroup"===dP.type){var inDp=dP.children.filter((function(rDp){return rDp.fieldId===readingId&&rDp.parentId===resourceId}));if(0!==inDp.length){tobeDeleted.push.apply(tobeDeleted,(0,toConsumableArray/* default */.Z)(dP.children));break}}}
// to reduce dataPoints
}catch(err){_iterator12.e(err)}finally{_iterator12.f()}var _step13,toBeDeleted=this.reduceDataPoints(tobeDeleted),_iterator13=(0,createForOfIteratorHelper/* default */.Z)(toBeDeleted);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var dataPoint=_step13.value,index=existingDataPoints.indexOf(dataPoint.fieldId+"_"+dataPoint.parentId);-1!==index&&existingDataPoints.splice(index,1)}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}this.config.mainPanel.selectedDataPoints=existingDataPoints,this.addToSummaryListNew(),this.deleteRangePoint=!1}},reduceDataPoints:function(toBeDeletedDataPoints){var uniqueKeys=new Set;return toBeDeletedDataPoints.map((function(dp){return uniqueKeys.add(dp.fieldId+"."+dp.parentId)})),1===uniqueKeys.size?[toBeDeletedDataPoints[0]]:toBeDeletedDataPoints},prepareSavedDataPoints:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var _this4$summaryList,points,_iterator14,_step14,group,_iterator16,_step16,reading,groups,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_loop,_iteratorAbruptCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,_iteratorAbruptCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,_iterator,_step,dataPoints,summaryListNew;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if((0,validation/* isEmpty */.xb)(_this4.savedPoints)){_context7.next=40;break}points=(0,toConsumableArray/* default */.Z)(_this4.savedPoints),_this4.currentKey=_this4.currentKey+1,_iterator14=(0,createForOfIteratorHelper/* default */.Z)(_this4.savedPoints);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){group=_step14.value,_iterator16=(0,createForOfIteratorHelper/* default */.Z)(group.readings);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;)reading=_step16.value,reading.marked=_this4.currentKey}catch(err){_iterator16.e(err)}finally{_iterator16.f()}}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}groups=cloneDeep_default()(points),_this4.summaryList=[],_iteratorAbruptCompletion=!1,_didIteratorError=!1,_context7.prev=9,_loop=(0,regeneratorRuntime/* default */.Z)().mark((function _loop(){var group,kpiCategoryId,kpiGroupsIndex,_loop2,assetGroupIndex,_loop3;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(group=_step.value,kpiCategoryId=null,(0,validation/* isEmpty */.xb)(group)||"kpi"!==group.label){_context6.next=35;break}return kpiGroupsIndex=points.findIndex((function(point){return point.label===group.label})),_context6.next=6,_this4.loadKPIAssetCategories();case 6:_iteratorAbruptCompletion2=!1,_didIteratorError2=!1,_context6.prev=8,_loop2=(0,regeneratorRuntime/* default */.Z)().mark((function _loop2(){var reading,assetCategories,category,_this4$kpireadings$fi,label,kpiObj,selectedDP,_dataPoints2,kpiReading;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(reading=_step2.value,kpiCategoryId=reading.categoryId?reading.categoryId:-1,assetCategories=_this4.config.mainPanel.kpiAssetCategories||[],category=assetCategories.filter((function(category){return category.id===kpiCategoryId})),(0,validation/* isEmpty */.xb)(category[0])){_context4.next=14;break}return label=category[0].displayName,_context4.next=8,_this4.openKPIAssetCategory(kpiCategoryId);case 8:"DYNAMIC"!==reading.kpiType&&(kpiObj=_this4.field_vs_Kpi_map[reading.readingId],selectedDP=_this4.$getProperty(_this4,"config.mainPanel.selectedDataPoints")||[],_dataPoints2=selectedDP.map((function(point){var pointSplit=point.split("_"),fieldId=pointSplit[0];return parseInt(fieldId)===reading["readingId"]&&(point=(null===kpiObj||void 0===kpiObj?void 0:kpiObj.id)+"_"+pointSplit[1]+"_kpi"),point})),_this4.config.mainPanel.selectedDataPoints=_dataPoints2,reading["readingId"]=parseInt(null===kpiObj||void 0===kpiObj?void 0:kpiObj.id)),_this4.addAssetToGroup(label,reading,kpiCategoryId),_this4.config.kpiPointsPanel.activeSubTab="kpis",reading["readingLabel"]=null===(_this4$kpireadings$fi=_this4.kpireadings.fields[reading.readingId])||void 0===_this4$kpireadings$fi?void 0:_this4$kpireadings$fi.name,kpiReading=_this4.kpireadings.fields[reading.readingId]||{},_this4.openKpiTypePoint(kpiReading);case 14:case"end":return _context4.stop()}}),_loop2)})),_iterator2=(0,asyncIterator/* default */.Z)(group.readings);case 11:return _context6.next=13,_iterator2.next();case 13:if(!(_iteratorAbruptCompletion2=!(_step2=_context6.sent).done)){_context6.next=18;break}return _context6.delegateYield(_loop2(),"t0",15);case 15:_iteratorAbruptCompletion2=!1,_context6.next=11;break;case 18:_context6.next=24;break;case 20:_context6.prev=20,_context6.t1=_context6["catch"](8),_didIteratorError2=!0,_iteratorError2=_context6.t1;case 24:if(_context6.prev=24,_context6.prev=25,!_iteratorAbruptCompletion2||null==_iterator2.return){_context6.next=29;break}return _context6.next=29,_iterator2.return();case 29:if(_context6.prev=29,!_didIteratorError2){_context6.next=32;break}throw _iteratorError2;case 32:return _context6.finish(29);case 33:return _context6.finish(24);case 34:-1!==kpiGroupsIndex&&points.splice(kpiGroupsIndex,1);case 35:if((0,validation/* isEmpty */.xb)(group)||"Asset"!==group.label){_context6.next=68;break}assetGroupIndex=points.findIndex((function(point){return point.label===group.label})),_this4.loadAssetCategories(),_this4.config.mainPanel.currentModule="assets",_iteratorAbruptCompletion3=!1,_didIteratorError3=!1,_context6.prev=41,_loop3=(0,regeneratorRuntime/* default */.Z)().mark((function _loop3(){var inReading,assetCategory,assetCategoryLabel,category,self;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(inReading=_step3.value,assetCategory=inReading.categoryId?inReading.categoryId:-1,assetCategoryLabel=_this4.assetCategory.filter((function(category){return category.id===parseInt(assetCategory)})),0!==assetCategoryLabel.length&&(assetCategoryLabel=assetCategoryLabel[0].displayName,_this4.addAssetToGroup(assetCategoryLabel,inReading,assetCategory)),!_this4.config.mainPanel.assetCategories){_context5.next=12;break}if(category=_this4.config.mainPanel.assetCategories.filter((function(categories){return categories.id===parseInt(assetCategory)})),0===category.length){_context5.next=12;break}return _this4.config.assetPointsPanel.activeSubTab="assets",_context5.next=10,_this4.openAssetCategory(assetCategory);case 10:self=_this4,_this4.$nextTick().then((function(){if("undefined"!==typeof self.readings.categoryWithAssets[assetCategory]){self.readings.categoryWithFields[assetCategory][inReading.readingId];var asset=self.readings.categoryWithAssets[assetCategory][inReading.resourceId];asset&&self.openAsset(inReading.resourceId)}}));case 12:case"end":return _context5.stop()}}),_loop3)})),_iterator3=(0,asyncIterator/* default */.Z)(group.readings);case 44:return _context6.next=46,_iterator3.next();case 46:if(!(_iteratorAbruptCompletion3=!(_step3=_context6.sent).done)){_context6.next=51;break}return _context6.delegateYield(_loop3(),"t2",48);case 48:_iteratorAbruptCompletion3=!1,_context6.next=44;break;case 51:_context6.next=57;break;case 53:_context6.prev=53,_context6.t3=_context6["catch"](41),_didIteratorError3=!0,_iteratorError3=_context6.t3;case 57:if(_context6.prev=57,_context6.prev=58,!_iteratorAbruptCompletion3||null==_iterator3.return){_context6.next=62;break}return _context6.next=62,_iterator3.return();case 62:if(_context6.prev=62,!_didIteratorError3){_context6.next=65;break}throw _iteratorError3;case 65:return _context6.finish(62);case 66:return _context6.finish(57);case 67:-1!==assetGroupIndex&&points.splice(assetGroupIndex,1);case 68:case"end":return _context6.stop()}}),_loop,null,[[8,20,24,34],[25,,29,33],[41,53,57,67],[58,,62,66]])})),_iterator=(0,asyncIterator/* default */.Z)(groups);case 12:return _context7.next=14,_iterator.next();case 14:if(!(_iteratorAbruptCompletion=!(_step=_context7.sent).done)){_context7.next=19;break}return _context7.delegateYield(_loop(),"t0",16);case 16:_iteratorAbruptCompletion=!1,_context7.next=12;break;case 19:_context7.next=25;break;case 21:_context7.prev=21,_context7.t1=_context7["catch"](9),_didIteratorError=!0,_iteratorError=_context7.t1;case 25:if(_context7.prev=25,_context7.prev=26,!_iteratorAbruptCompletion||null==_iterator.return){_context7.next=30;break}return _context7.next=30,_iterator.return();case 30:if(_context7.prev=30,!_didIteratorError){_context7.next=33;break}throw _iteratorError;case 33:return _context7.finish(30);case 34:return _context7.finish(25);case 35:(_this4$summaryList=_this4.summaryList).push.apply(_this4$summaryList,(0,toConsumableArray/* default */.Z)(points)),
//code to display the datapoints as per the selected order while edit
dataPoints=_this4.$getProperty(_this4,"config.mainPanel.selectedDataPoints"),summaryListNew=dataPoints.reduce((function(groups,dataPoint){var _step15,fieldId=parseInt(dataPoint.split("_")[0]),_iterator15=(0,createForOfIteratorHelper/* default */.Z)(_this4.summaryList);try{var _ret,_loop4=function(){var group=_step15.value,_ref=group||{},readings=_ref.readings,reading=(readings||[]).filter((function(ele){return ele.readingId===fieldId}))[0];if(!(0,validation/* isEmpty */.xb)(reading)){var readingIndex=(readings||[]).findIndex((function(ele){return ele.readingId===reading.readingId})),existingGroup=groups.filter((function(ele){return ele.label===group.label}))[0];if((0,validation/* isEmpty */.xb)(existingGroup)){var fieldObj={};return fieldObj["label"]=group.label,fieldObj["categoryId"]=group.label,fieldObj["readings"]=[reading],groups.push(fieldObj),group.readings.splice(readingIndex,1),0;// break
}var groupIndex=groups.findIndex((function(ele){return ele.label===existingGroup.label}));if(-1!=readingIndex&&-1!=groupIndex){var fields=groups[groupIndex].readings;fields.push(reading),groups[groupIndex].readings=fields,group.readings.splice(readingIndex,1)}return 0;// break
}};for(_iterator15.s();!(_step15=_iterator15.n()).done;)if(_ret=_loop4(),0===_ret)break}catch(err){_iterator15.e(err)}finally{_iterator15.f()}return groups}),[]),_this4.summaryList=summaryListNew,_this4.savedPoints=null;case 40:case"end":return _context7.stop()}}),_callee4,null,[[9,21,25,35],[26,,30,34]])})))()},addAssetToGroup:function(label,reading,assetCategory){if(this.summaryList&&0===this.summaryList.length){var temp={};temp["label"]=label,temp["categoryId"]=assetCategory,temp["readings"]=[],temp.readings.push(reading),this.summaryList.push(temp)}else if(this.summaryList&&this.summaryList.length>0){var readingGroup=this.summaryList.filter((function(group){return group.label===label}));if(0!==readingGroup.length)readingGroup[0].readings.push(reading);else{var _temp={};_temp["label"]=label,_temp["categoryId"]=assetCategory,_temp["readings"]=[],_temp.readings.push(reading),this.summaryList.push(_temp)}}},getRangeGroup:function(reading){if(this.reportObject){var _step17,_iterator17=(0,createForOfIteratorHelper/* default */.Z)(this.reportObject.options.dataPoints);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var dataPoint=_step17.value;if("rangeGroup"===dataPoint.type&&dataPoint.children){var _step18,_iterator18=(0,createForOfIteratorHelper/* default */.Z)(dataPoint.children);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var child=_step18.value;if(child.fieldId===reading.readingId&&child.parentId===reading.resourceId)return!0}}catch(err){_iterator18.e(err)}finally{_iterator18.f()}}}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}}},removeDataPointFromGroup:function(reading,readingGroupIndex){if(this.isRangeModeEnabled){
// to find range point
var isRangePoint=this.getRangeGroup(reading);isRangePoint?(this.deleteRangePoint=!0,this.pointDeletionStore["readingId"]=reading.readingId,this.pointDeletionStore["resourceId"]=reading.resourceId):this.removePoint(reading,readingGroupIndex)}else this.removePoint(reading,readingGroupIndex)},removePoint:function(reading,readingGroupIndex){var readingGroup=this.summaryList[readingGroupIndex],kpiFieldObj=this.$getProperty(this,"kpireadings.fields")||{},kpiObj=Object.keys(kpiFieldObj).filter((function(key){return parseInt(key)===reading.readingId}))[0],dataPointKey=reading.readingId+"_"+reading.resourceId,readingSumId=(0,validation/* isEmpty */.xb)(kpiObj)?dataPointKey:dataPointKey+"_kpi";this.config.mainPanel.selectedDataPoints.splice(this.config.mainPanel.selectedDataPoints.indexOf(readingSumId),1);var readingIndex=readingGroup.readings.indexOf(reading);readingGroup.readings.splice(readingIndex,1),0===readingGroup.readings.length&&this.summaryList.splice(readingGroupIndex,1)},isSummaryEmpty:function(id,isAsset){if(0===this.summaryList.length)return!0;if(isAsset){var filteredGroup=this.summaryList.filter((function(pointGroup){return pointGroup.categoryId&&pointGroup.categoryId===id}));return 0===filteredGroup.length}var _filteredGroup=this.summaryList.filter((function(pointGroup){return pointGroup.label===id}));return 0===_filteredGroup.length},getCategoryFromId:function(reading){var readingSplit=reading.split("_"),assetObject=this.readings.assets[parseInt(readingSplit[readingSplit.length-1])],mvObject=this.mvAssetMap?this.mvAssetMap[parseInt(readingSplit[readingSplit.length-1])]:null;return this.kpireadings&&this.kpireadings.assets&&this.kpireadings.assets[parseInt(readingSplit[1])]&&this.kpireadings.fields&&this.kpireadings.fields[parseInt(readingSplit[0])]&&"kpi"===readingSplit[2]?"kpis":this.rulereadings&&this.rulereadings.assets&&this.rulereadings.assets[parseInt(readingSplit[readingSplit.length-1])]&&this.rulereadings.fields&&this.rulereadings.fields[parseInt(readingSplit[0])]?"rules":this.buildingIds[0]===parseInt(readingSplit[1])?"":assetObject?"assets":mvObject?"mvs":"weather"},addToSummaryListNew:function(){var _this5=this,mainPanel=this.config.mainPanel;this.applyDisable=!1;var existingReadings=[],points=[];if(this.config.mainPanel.selectedDataPoints&&0!==this.config.mainPanel.selectedDataPoints.length){if(this.reportObject&&4===this.reportObject.reportType){var _step19,existingAsset=this.reportObject.options.reportTemplate.defaultValue,_iterator19=(0,createForOfIteratorHelper/* default */.Z)(this.config.mainPanel.selectedDataPoints);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var point=_step19.value;if(existingAsset!==parseInt(point.split("_")[1])){"assets"!==mainPanel.currentModule&&"space"!==mainPanel.currentModule||(this.applyDisable=!0);break}var temp={point:point,isDone:!1};points.push(temp)}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}}else{var _step20,_iterator20=(0,createForOfIteratorHelper/* default */.Z)(this.config.mainPanel.selectedDataPoints);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var _point=_step20.value,_temp2={point:_point,isDone:!1};points.push(_temp2)}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}}if(0!==this.summaryList.length){this.currentKey=this.currentKey+1;var _step21,_iterator21=(0,createForOfIteratorHelper/* default */.Z)(this.summaryList);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _step23,group=_step21.value,_iterator23=(0,createForOfIteratorHelper/* default */.Z)(group.readings);try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var reading=_step23.value;existingReadings.push(reading)}}catch(err){_iterator23.e(err)}finally{_iterator23.f()}}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}var _step22,_iterator22=(0,createForOfIteratorHelper/* default */.Z)(points);try{var _loop5=function(){var dataPoint=_step22.value,readingSplit=dataPoint.point.split("_"),readingId=parseInt(readingSplit[0]),resourceId=parseInt(readingSplit[1]),reading=existingReadings.filter((function(element){return element.readingId+"_"+element.resourceId===readingId+"_"+resourceId}));if(0===reading.length)return 1;// continue
reading[0].marked=_this5.currentKey,dataPoint.isDone=!0};for(_iterator22.s();!(_step22=_iterator22.n()).done;)_loop5()}catch(err){_iterator22.e(err)}finally{_iterator22.f()}}this.removeUnwantedReadings();var notInserted=points.filter((function(point){return!1===point.isDone}));if(0!==notInserted.length){var _step24,_iterator24=(0,createForOfIteratorHelper/* default */.Z)(notInserted);try{var _loop6=function(){var nInsert=_step24.value,readingSplit=nInsert.point.split("_"),category=_this5.getCategoryFromId(nInsert.point),readingObject=null;if("kpis"===category){var readings=_this5.allFields[category].filter((function(reading){return(null===reading||void 0===reading?void 0:reading.id)==readingSplit[0]}))[0];readingObject=(0,validation/* isEmpty */.xb)(readings)?{}:readings}else category&&""!==category&&_this5.allFields[category]&&_this5.allFields[category][parseInt(readingSplit[0])]&&(readingObject=_this5.allFields[category][parseInt(readingSplit[0])]);var categoryLabel=null,categoryId=null;if("assets"===category){for(var _i2=0,_Object$keys=Object.keys(_this5.readings.categoryWithAssets);_i2<_Object$keys.length;_i2++){var cat=_Object$keys[_i2];if(Object.keys(_this5.readings.categoryWithAssets[cat]).includes(readingSplit[readingSplit.length-1])){categoryId=parseInt(cat);break}categoryId=-1}categoryLabel=_this5.config.mainPanel.assetCategories.filter((function(categories){return categories.id===categoryId}))[0].name}else if("rules"===category){for(var _i3=0,_Object$keys2=Object.keys(_this5.rulereadings.categoryWithAssets);_i3<_Object$keys2.length;_i3++){var _cat=_Object$keys2[_i3];if(Object.keys(_this5.rulereadings.categoryWithAssets[_cat]).includes(readingSplit[readingSplit.length-1])){categoryId=parseInt(_cat);break}categoryId=-1}categoryLabel=_this5.config.mainPanel.ruleAssetCategories.filter((function(categories){return categories.id===categoryId}))[0].name}else if("kpis"===category){for(var _i4=0,_Object$keys3=Object.keys(_this5.kpireadings.categoryWithAssets);_i4<_Object$keys3.length;_i4++){var _cat2=_Object$keys3[_i4];if(Object.keys(_this5.kpireadings.categoryWithAssets[_cat2]).includes(readingSplit[1])){categoryId=parseInt(_cat2);break}categoryId=-1}categoryLabel=_this5.config.mainPanel.kpiAssetCategories.filter((function(categories){return categories.id===categoryId}))[0].name}else if("weather"===category&&readingObject){var _step25,_iterator25=(0,createForOfIteratorHelper/* default */.Z)(_this5.summaryList);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _step26,_group=_step25.value,_iterator26=(0,createForOfIteratorHelper/* default */.Z)(_group.readings);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _reading=_step26.value;if(_reading.readingId+"_"+_reading.resourceId===readingSplit[0]+"_"+readingSplit[1]){categoryLabel=_group.label;break}}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}}}catch(err){_iterator25.e(err)}finally{_iterator25.f()}categoryLabel||(categoryLabel=_this5.weatherModules.filter((function(wModule){return wModule&&wModule.moduleName===readingObject.module})),categoryLabel=0===categoryLabel.length?"Degree Days":categoryLabel[0].displayName)}else if("mvs"===category){var _step27,_iterator27=(0,createForOfIteratorHelper/* default */.Z)(_this5.summaryList);try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _step28,_group2=_step27.value,_iterator28=(0,createForOfIteratorHelper/* default */.Z)(_group2.readings);try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var _reading2=_step28.value;if(_reading2.readingId+"_"+_reading2.resourceId===readingSplit[0]+"_"+readingSplit[1]){categoryLabel=_group2.label;break}}}catch(err){_iterator28.e(err)}finally{_iterator28.f()}}}catch(err){_iterator27.e(err)}finally{_iterator27.f()}categoryLabel||(categoryLabel="M&Vs")}else 0!==_this5.allFields.length&&(_this5.allFields["space"]&&"undefined"!==typeof _this5.allFields["space"][parseInt(readingSplit[0])]?(readingObject=_this5.allFields["space"][parseInt(readingSplit[0])],categoryLabel="Space"):(readingObject=_this5.allFields["enpi"][parseInt(readingSplit[0])],categoryLabel="Enpi"));var existingGroup=_this5.summaryList.filter((function(inGroup){return inGroup.label===categoryLabel}));if(0===_this5.summaryList.length||0===existingGroup.length){var _reading3={};_reading3["readingId"]=parseInt(readingSplit[0]),_reading3["readingLabel"]=readingObject.displayName?readingObject.displayName:readingObject.name,_reading3["resourceId"]=parseInt(readingSplit[1]),_reading3["resourceLabel"]="assets"===category?_this5.readings.assets[parseInt(readingSplit[readingSplit.length-1])]:"rules"===category&&_this5.rulereadings.assets[parseInt(readingSplit[readingSplit.length-1])]?_this5.rulereadings.assets[parseInt(readingSplit[readingSplit.length-1])]:"kpis"===category&&_this5.kpireadings.assets[parseInt(readingSplit[1])]?_this5.kpireadings.assets[parseInt(readingSplit[1])]:"mvs"===category&&_this5.mvprojectNameMap?_this5.mvprojectNameMap[parseInt(readingSplit[readingSplit.length-1])]:null,_reading3["location"]=_this5.selectedBuildingLabel,//this.selectedBuildingName
_reading3["marked"]=_this5.currentKey;var _temp3={};_temp3["label"]=categoryLabel,_temp3["readings"]=[],"assets"!==category&&"kpis"!==category||(_temp3["categoryId"]=categoryId),_temp3.readings.push(_reading3),_this5.summaryList.push(_temp3)}else{var _reading4={};_reading4["readingId"]=parseInt(readingSplit[0]),_reading4["readingLabel"]=readingObject.displayName?readingObject.displayName:readingObject.name,_reading4["resourceId"]=parseInt(readingSplit[1]),_reading4["resourceLabel"]="assets"===category?_this5.readings.assets[parseInt(readingSplit[readingSplit.length-1])]:"kpis"===category&&_this5.kpireadings.assets[parseInt(readingSplit[1])]?_this5.kpireadings.assets[parseInt(readingSplit[1])]:"mvs"===category&&_this5.mvprojectNameMap?_this5.mvprojectNameMap[parseInt(readingSplit[readingSplit.length-1])]:null,_reading4["location"]=_this5.selectedBuildingLabel,//this.selectedBuildingName
_reading4["marked"]=_this5.currentKey,existingGroup[0].readings.push(_reading4)}nInsert.isDone=!0};for(_iterator24.s();!(_step24=_iterator24.n()).done;)_loop6()}catch(err){_iterator24.e(err)}finally{_iterator24.f()}}}},removeUnwantedReadings:function(){var _step29,_iterator29=(0,createForOfIteratorHelper/* default */.Z)(this.summaryList);try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _step30,group=_step29.value,_iterator30=(0,createForOfIteratorHelper/* default */.Z)(group.readings);try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var reading=_step30.value;if(reading&&reading.marked!==this.currentKey){var readingIndex=group.readings.indexOf(reading);group.readings.splice(readingIndex,1)}0===group.readings.length&&this.summaryList.splice(this.summaryList.indexOf(group),1)}}catch(err){_iterator30.e(err)}finally{_iterator30.f()}}}catch(err){_iterator29.e(err)}finally{_iterator29.f()}},weatherPanelToggler:function(){this.newSiteSummary?this.loadNewWeatherReadings(this.newWeatherModule):this.weatherPanel.show?this.weatherPanel.show=!1:this.weatherPanel.show=!0},weatherModuleHandler:function(weatherModule,readings){if(weatherModule.moduleName){var _step31,filtered=[],_iterator31=(0,createForOfIteratorHelper/* default */.Z)(readings);try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var reading=_step31.value;reading.module===weatherModule.moduleName&&filtered.push(reading)}}catch(err){_iterator31.e(err)}finally{_iterator31.f()}return filtered}var _step32,_filtered=[],_iterator32=(0,createForOfIteratorHelper/* default */.Z)(readings);try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var _reading5=_step32.value;"cdd"!==_reading5.module&&"hdd"!==_reading5.module&&"wdd"!==_reading5.module||_filtered.push(_reading5)}}catch(err){_iterator32.e(err)}finally{_iterator32.f()}return _filtered},setDefaultSelection:function(){if(this.selectedBuildings=[],this.buildingList){var filters={};this.$route.query.filters&&(filters=JSON.parse(this.$route.query.filters)),filters.buildingId&&-1!==filters.buildingId?this.selectedBuildings=[filters.buildingId]:this.selectedBuildings=[this.default_building_id]}},setSelectedBuildings:function(selectedBuildings){this.selectedBuildings=selectedBuildings},toggleQuickSearch:function(){var _this6=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch&&this.$nextTick((function(){_this6.$refs.quickSearchQuery.focus()}))},closeSearch:function(){this.toggleQuickSearch(),this.quickSearchQuery=null,this.quickSearch()},loadAssetCategories:function(){var self=this;self.weatherPanel.show=!1,self.weatherPanel.weatherCategory=null;var _step33,_iterator33=(0,createForOfIteratorHelper/* default */.Z)(self.weatherModules);try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var module=_step33.value;module.selected=!1}}catch(err){_iterator33.e(err)}finally{_iterator33.f()}if("assets"!==self.config.mainPanel.currentModule){self.config.mainPanel.currentModule="assets",self.config.mainPanel.selectedAssetCategory=null;var panels=[];self.config["assetPointsPanel"].show&&panels.push("assetPointsPanel"),self.config["selectReadingsPanel"].show&&panels.push("selectReadingsPanel"),self.config["selectAssetsPanel"].show&&panels.push("selectAssetsPanel"),self.config["mvPointsPanel"].show&&panels.push("selectAssetsPanel"),self.config["selectMvsPanel"].show&&panels.push("selectAssetsPanel"),self.config["selectMvReadingsPanel"].show&&panels.push("selectReadingsPanel"),self.config["kpiPointsPanel"].show&&panels.push("kpiPointsPanel"),self.config["selectKPIPanel"].show&&panels.push("selectKPIPanel"),self.togglePanel(panels),self.config.mainPanel.assetCategoriesLoading=!0,self.$http.post("/asset/getAssetCategoryWithReadings",{buildingIds:self.buildingIds}).then((function(response){var categoryIds=Object.keys(response.data);self.config.mainPanel.assetCategories=self.assetCategory.filter((function(ele){for(var index=0;index<categoryIds.length;index++){var element=categoryIds[index];if(parseInt(element)===ele.id)return ele.toggle=!1,ele}})),self.config.mainPanel.assetCategoriesLoading=!1,self.loading=!1}))}else self.config.mainPanel.currentModule=""},loadKPIAssetCategories:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var self,panels,currentModule,params,_yield$API$get3,data,error,categoryIds;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context8){while(1)switch(_context8.prev=_context8.next){case 0:if(self=_this7,panels=[],currentModule=_this7.$getProperty(self,"config.mainPanel.currentModule")||null,"kpis"!==currentModule){_context8.next=6;break}return self.config.mainPanel.currentModule="",_context8.abrupt("return");case 6:return self.config["assetPointsPanel"].show&&panels.push("assetPointsPanel"),self.config["selectReadingsPanel"].show&&panels.push("selectReadingsPanel"),self.config["selectAssetsPanel"].show&&panels.push("selectAssetsPanel"),self.config["mvPointsPanel"].show&&panels.push("selectAssetsPanel"),self.config["selectMvsPanel"].show&&panels.push("selectAssetsPanel"),self.config["selectMvReadingsPanel"].show&&panels.push("selectReadingsPanel"),self.config["kpiPointsPanel"].show&&panels.push("kpiPointsPanel"),self.config["selectKPIPanel"].show&&panels.push("selectKPIPanel"),self.togglePanel(panels),self.config.mainPanel.selectedKPICategory=null,self.config.mainPanel.currentModule="kpis",self.config.mainPanel.kpiAssetCategoriesLoading=!0,params={buildingIds:self.buildingIds},_context8.next=21,api/* API */.bl.get("v3/readingKpi/analytics/fetchAssetCategoriesContainingKpis",params);case 21:_yield$API$get3=_context8.sent,data=_yield$API$get3.data,error=_yield$API$get3.error,error||(categoryIds=Object.keys(data),self.config.mainPanel.kpiAssetCategories=self.assetCategory.filter((function(ele){for(var index=0;index<categoryIds.length;index++){var element=categoryIds[index];if(parseInt(element)===ele.id)return ele.toggle=!1,ele}}))),self.config.mainPanel.kpiAssetCategoriesLoading=!1;case 26:case"end":return _context8.stop()}}),_callee5)})))()},openKPIAssetCategory:function(categoryId){var _this8=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var self,params,_yield$API$get4,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context9){while(1)switch(_context9.prev=_context9.next){case 0:if(self=_this8,self.togglePanel("kpiPointsPanel"),self.config.mainPanel.selectedKPICategory=categoryId,self.config.kpiPointsPanel.loading=!0,self.config.kpiPointsPanel.selectedKpi=null,_this8.config.mainPanel.currentModule="kpis",!self.kpireadings.categories.includes(categoryId)||!self.kpireadings.categoryWithAssets[categoryId]){_context9.next=10;break}_this8.setAssetPointsPanelForKpi(categoryId),_context9.next=18;break;case 10:return params={categoryId:categoryId},(0,validation/* isEmpty */.xb)(self.buildingIds)||(params["buildingIds"]=self.buildingIds),_context9.next=14,api/* API */.bl.get("v3/readingKpi/analytics/getReadingsForSpecificAssetCategory",params);case 14:_yield$API$get4=_context9.sent,data=_yield$API$get4.data,error=_yield$API$get4.error,error||(_this8.setAssetReadingsForKpi(categoryId,data),_this8.setAssetPointsPanelForKpi(categoryId));case 18:case"end":return _context9.stop()}}),_callee6)})))()},setAssetReadingsForKpi:function(categoryId,data){var _this9=this,self=this;self.kpireadings.categories.includes(categoryId)||self.kpireadings.categories.push(categoryId),void 0!==data.categoryWithAssets[categoryId]&&(self.kpireadings.categoryWithAssets[categoryId]=data.categoryWithAssets[categoryId]),data.categoryWithFields[categoryId]&&(self.kpireadings.categoryWithFields[categoryId]=data.categoryWithFields[categoryId]);for(var _loop7=function(){var kpiId=_Object$keys4[_i5],fieldObj=data.fields[kpiId],readingField=fieldObj.readingField;self.kpireadings.fields[kpiId]||(fieldObj["id"]=kpiId,self.kpireadings.fields[kpiId]=_this9.$helpers.cloneObject(fieldObj));var fields=self.allFields["kpis"].filter((function(field){return field.id===kpiId}));self.allFields["kpis"]&&(0,validation/* isEmpty */.xb)(fields)&&self.allFields["kpis"].push(fieldObj),_this9.field_vs_Kpi_map[null===readingField||void 0===readingField?void 0:readingField.fieldId]=fieldObj},_i5=0,_Object$keys4=Object.keys(data.fields);_i5<_Object$keys4.length;_i5++)_loop7();if(data.assets)for(var _i6=0,_Object$keys5=Object.keys(data.assets);_i6<_Object$keys5.length;_i6++){var assetId=_Object$keys5[_i6];self.kpireadings.assets[assetId]||(this.id_vs_asset[assetId]=data.assets[assetId],self.kpireadings.assets[assetId]=data.assets[assetId])}},setAssetPointsPanelForKpi:function(categoryId){var self=this;if(""===self.config.kpiPointsPanel.activeSubTab){var assetIds=Object.keys(self.kpireadings.categoryWithAssets[categoryId]);self.config.kpiPointsPanel.data=assetIds.map((function(el){return{id:el,name:self.kpireadings.assets[el]}})),self.config.kpiPointsPanel.loading=!1}else{var readingIds=Object.keys(self.kpireadings.categoryWithFields[categoryId])||[];self.config.kpiPointsPanel.data=readingIds.map((function(el){return self.kpireadings.fields[el]})),self.config.kpiPointsPanel.loading=!1}},loadRuleAssetCategories:function(){var self=this;this.weatherPanel.show=!1,this.weatherPanel.weatherCategory=null;var _step34,_iterator34=(0,createForOfIteratorHelper/* default */.Z)(self.weatherModules);try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var module=_step34.value;module.selected=!1}}catch(err){_iterator34.e(err)}finally{_iterator34.f()}if("rules"!==this.config.mainPanel.currentModule){this.config.mainPanel.currentModule="rules",this.config.mainPanel.selectedRuleAssetCategory=null,this.config.mainPanel.ruleAssetCategories=null,this.config.mainPanel.ruleAssetCategoriesLoading=!0;var panels=[];this.config["assetPointsPanel"].show&&panels.push("assetPointsPanel"),this.config["selectReadingsPanel"].show&&panels.push("selectReadingsPanel"),this.config["selectAssetsPanel"].show&&panels.push("selectAssetsPanel"),this.config["mvPointsPanel"].show&&panels.push("selectAssetsPanel"),this.config["selectMvsPanel"].show&&panels.push("selectAssetsPanel"),this.config["selectMvReadingsPanel"].show&&panels.push("selectReadingsPanel"),this.togglePanel(panels),self.$http.post("/asset/getAssetCategoryWithReadings",{buildingIds:self.buildingIds,fetchOnlyAlarmPoints:!0}).then((function(response){var categoryIds=Object.keys(response.data);self.config.mainPanel.ruleAssetCategories=self.assetCategory.filter((function(ele){for(var index=0;index<categoryIds.length;index++){var element=categoryIds[index];if(parseInt(element)===ele.id)return ele.toggle=!1,ele}})),self.config.mainPanel.ruleAssetCategoriesLoading=!1,self.loading=!1}))}else this.config.mainPanel.currentModule=""},resetReadings:function(){this.readings={categories:[],assets:{},categoryWithAssets:{},fields:{},categoryWithFields:{}},this.kpireadings={categories:[],assets:{},categoryWithAssets:{},fields:{},categoryWithFields:{}}},removeSelectedDataPoint:function(dataPoint,index){this.config.mainPanel.selectedDataPoints.splice(index,1)},togglePanel:function(){for(var self=this,configKeys=Object.keys(self.config),_len=arguments.length,panels=new Array(_len),_key=0;_key<_len;_key++)panels[_key]=arguments[_key];for(var _i7=0,_configKeys=configKeys;_i7<_configKeys.length;_i7++){var configKey=_configKeys[_i7];panels.indexOf(configKey)>=0?self.config[configKey].show=!0:(self.config[configKey].show=!1,self.config[configKey].selectedItem=null)}},openmvproject:function(mvId){var self=this;self.togglePanel("mvPointsPanel"),self.config.mvPointsPanel.loading=!0,self.config.mvPointsPanel.selectedMvOrPoint=null,"mvs"===self.config.mvPointsPanel.activeSubTab?(self.config.mvPointsPanel.data=self.mvprojects?self.mvprojects.map((function(el){return{id:el.id,name:el.name}})):[],self.config.mvPointsPanel.loading=!1):(self.config.mvPointsPanel.data=self.mvreadings?self.mvreadings.map((function(el){return{id:el.id,name:el.displayName}})):[],self.allFields["mvs"]=self.convertToList(self.config.mvPointsPanel.data),self.config.mvPointsPanel.loading=!1)},openAssetCategory:function(categoryId){var _this10=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee7(){var self,assetIds,readingIds;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context10){while(1)switch(_context10.prev=_context10.next){case 0:if(self=_this10,self.togglePanel("assetPointsPanel"),self.config.mainPanel.selectedAssetCategory=categoryId,self.config.assetPointsPanel.loading=!0,self.config.assetPointsPanel.selectedAssetOrPoint=null,!self.readings.categories.includes(categoryId)||!self.readings.categoryWithAssets[categoryId]){_context10.next=9;break}"assets"===self.config.assetPointsPanel.activeSubTab?(assetIds=Object.keys(self.readings.categoryWithAssets[categoryId]),self.config.assetPointsPanel.data=assetIds.map((function(el){return{id:el,name:self.readings.assets[el]}})),self.config.assetPointsPanel.loading=!1):(readingIds=Object.keys(self.readings.categoryWithFields[categoryId]),self.config.assetPointsPanel.data=readingIds.map((function(el){return self.readings.fields[el]})),self.config.assetPointsPanel.loading=!1),_context10.next=12;break;case 9:if(!self.buildingIds){_context10.next=12;break}return _context10.next=12,self.$http.post("/asset/getReadingsForSpecificAssetCategory",{buildingIds:self.buildingIds,categoryIds:[categoryId]}).then((function(response){if(self.readings.categories.includes(categoryId)||self.readings.categories.push(categoryId),void 0!==response.data.categoryWithAssets[categoryId]&&(self.readings.categoryWithAssets[categoryId]=response.data.categoryWithAssets[categoryId]),response.data.categoryWithFields[categoryId]&&(self.readings.categoryWithFields[categoryId]=response.data.categoryWithFields[categoryId]),response.data.fields)for(var _i8=0,_Object$keys6=Object.keys(response.data.fields);_i8<_Object$keys6.length;_i8++){var fieldId=_Object$keys6[_i8];self.readings.fields[fieldId]||(self.readings.fields[fieldId]=response.data.fields[fieldId]),self.allFields["assets"]&&!self.allFields["assets"][fieldId]&&(self.allFields["assets"][fieldId]=response.data.fields[fieldId])}if(response.data.assets)for(var _i9=0,_Object$keys7=Object.keys(response.data.assets);_i9<_Object$keys7.length;_i9++){var assetId=_Object$keys7[_i9];self.readings.assets[assetId]||(self.readings.assets[assetId]=response.data.assets[assetId])}if("assets"===self.config.assetPointsPanel.activeSubTab&&self.readings.categoryWithAssets[categoryId]){var _assetIds=Object.keys(self.readings.categoryWithAssets[categoryId]);self.config.assetPointsPanel.data=_assetIds.map((function(el){return{id:el,name:self.readings.assets[el]}})),self.config.assetPointsPanel.loading=!1}else if(self.readings.categoryWithFields[categoryId]){var _readingIds=Object.keys(self.readings.categoryWithFields[categoryId]);self.config.assetPointsPanel.data=_readingIds.map((function(el){return self.readings.fields[el]})),self.config.assetPointsPanel.loading=!1}else self.config.assetPointsPanel.loading=!1}));case 12:case"end":return _context10.stop()}}),_callee7)})))()},openRuleAssetCategory:function(categoryId){var _this11=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee8(){var self,assetIds,readingIds;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context11){while(1)switch(_context11.prev=_context11.next){case 0:if(self=_this11,_this11.togglePanel("assetPointsPanel"),_this11.config.mainPanel.selectedRuleAssetCategory=categoryId,_this11.config.assetPointsPanel.loading=!0,_this11.config.assetPointsPanel.selectedAssetOrPoint=null,!_this11.rulereadings.categories.includes(categoryId)||!(0,validation/* isEmpty */.xb)(_this11.buildingIds)){_context11.next=9;break}"assets"===_this11.config.assetPointsPanel.activeSubTab?(assetIds=Object.keys(_this11.rulereadings.categoryWithAssets[categoryId]),_this11.config.assetPointsPanel.data=assetIds.map((function(el){return{id:el,name:self.rulereadings.assets[el]}})),_this11.config.assetPointsPanel.loading=!1):(readingIds=Object.keys(_this11.rulereadings.categoryWithFields[categoryId]),_this11.config.assetPointsPanel.data=readingIds.map((function(el){return _this11.rulereadings.fields[el]})),_this11.config.assetPointsPanel.loading=!1),_context11.next=12;break;case 9:if(!_this11.buildingIds){_context11.next=12;break}return _context11.next=12,self.$http.post("/asset/getReadingsForSpecificAssetCategory",{buildingIds:self.buildingIds,categoryIds:[categoryId],fetchOnlyAlarmPoints:!0}).then((function(response){if(self.rulereadings.categories.includes(categoryId)||self.rulereadings.categories.push(categoryId),self.rulereadings.categoryWithAssets[categoryId]=response.data.categoryWithAssets[categoryId],self.rulereadings.categoryWithFields[categoryId]=response.data.categoryWithFields[categoryId],response.data.fields)for(var _i10=0,_Object$keys8=Object.keys(response.data.fields);_i10<_Object$keys8.length;_i10++){var fieldId=_Object$keys8[_i10];self.rulereadings.fields[fieldId]||(self.rulereadings.fields[fieldId]=response.data.fields[fieldId]),self.allFields["rules"]&&!self.allFields["rules"][fieldId]&&(self.allFields["rules"][fieldId]=response.data.fields[fieldId])}if(response.data.assets)for(var _i11=0,_Object$keys9=Object.keys(response.data.assets);_i11<_Object$keys9.length;_i11++){var assetId=_Object$keys9[_i11];self.rulereadings.assets[assetId]||(self.rulereadings.assets[assetId]=response.data.assets[assetId])}if("assets"===self.config.assetPointsPanel.activeSubTab){var _assetIds2=Object.keys(self.rulereadings.categoryWithAssets[categoryId]);self.config.assetPointsPanel.data=_assetIds2.map((function(el){return{id:el,name:self.rulereadings.assets[el]}})),self.config.assetPointsPanel.loading=!1}else{var _readingIds2=Object.keys(self.rulereadings.categoryWithFields[categoryId]);self.config.assetPointsPanel.data=_readingIds2.map((function(el){return self.rulereadings.fields[el]})),self.config.assetPointsPanel.loading=!1}}));case 12:case"end":return _context11.stop()}}),_callee8)})))()},openAsset:function(assetId){var _this12=this;this.config.assetPointsPanel.selectedAssetOrPoint=assetId,this.togglePanel("assetPointsPanel","selectReadingsPanel"),this.config.selectReadingsPanel.loading=!0,this.config.selectReadingsPanel.parentId=assetId;var fieldIds="rules"===this.config.mainPanel.currentModule?this.rulereadings.categoryWithAssets[this.config.mainPanel.selectedRuleAssetCategory][assetId]:this.readings.categoryWithAssets[this.config.mainPanel.selectedAssetCategory][assetId];this.config.selectReadingsPanel.data=null===fieldIds||void 0===fieldIds?void 0:fieldIds.map((function(el){return"rules"===_this12.config.mainPanel.currentModule?_this12.rulereadings.fields[el]:_this12.readings.fields[el]})),this.config.selectReadingsPanel.loading=!1},openKpiTypePoint:function(item){var _this13=this;this.config.kpiPointsPanel.selectedKpi=item.id,this.togglePanel("kpiPointsPanel","selectKPIPanel"),this.config.selectKPIPanel.loading=!0,this.config.selectKPIPanel.readingId=item.id;var assetIds=this.kpireadings.categoryWithFields[this.config.mainPanel.selectedKPICategory][item.id]||[];this.config.selectKPIPanel.data=assetIds.map((function(el){return{id:el,name:_this13.kpireadings.assets[el]}})),this.config.selectKPIPanel.loading=!1},openPoint:function(pointId){var _this14=this;this.config.assetPointsPanel.selectedAssetOrPoint=pointId,this.togglePanel("assetPointsPanel","selectAssetsPanel"),this.config.selectAssetsPanel.loading=!0,this.config.selectAssetsPanel.readingId=pointId;var assetIds="rules"===this.config.mainPanel.currentModule?this.rulereadings.categoryWithFields[this.config.mainPanel.selectedRuleAssetCategory][pointId]:this.readings.categoryWithFields[this.config.mainPanel.selectedAssetCategory][pointId];this.config.selectAssetsPanel.data=assetIds.map((function(el){return{id:el,name:"rules"===_this14.config.mainPanel.currentModule?_this14.rulereadings.assets[el]:_this14.readings.assets[el]}})),this.config.selectAssetsPanel.loading=!1},openMvPoint:function(pointId){var self=this;self.config.assetPointsPanel.selectedMvOrPoint=pointId,self.togglePanel("mvPointsPanel","selectMvsPanel"),self.config.selectMvsPanel.loading=!0,self.config.selectMvsPanel.readingId=pointId,self.config.selectMvsPanel.data=self.mvprojects?self.mvprojects.map((function(el){return{id:el.id,name:el.name}})):[],self.config.selectMvsPanel.loading=!1},openMv:function(mvId){var self=this;self.config.mvPointsPanel.selectedMvOrPoint=mvId,self.togglePanel("mvPointsPanel","selectMvReadingsPanel"),self.config.selectMvReadingsPanel.loading=!0,self.config.selectMvReadingsPanel.parentId=mvId,self.config.selectMvReadingsPanel.data=self.mvreadings?self.mvreadings.map((function(el){return{id:el.id,name:el.displayName}})):[],self.allFields["mvs"]=self.convertToList(self.config.selectMvReadingsPanel.data),self.config.selectMvReadingsPanel.loading=!1},getReadingFields:function(readings){var _step35,data=[],_iterator35=(0,createForOfIteratorHelper/* default */.Z)(readings);try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var reading=_step35.value;if(reading.fields){var _step36,_iterator36=(0,createForOfIteratorHelper/* default */.Z)(reading.fields);try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var field=_step36.value;field.module=reading.name,data.push(field)}}catch(err){_iterator36.e(err)}finally{_iterator36.f()}}}}catch(err){_iterator35.e(err)}finally{_iterator35.f()}return data},loadSpaceReadings:function(){var self=this;self.config.mainPanel.currentModule="spaces",self.togglePanel("selectReadingsPanel"),self.config.selectReadingsPanel.loading=!0,self.config.selectReadingsPanel.parentId=self.buildingIds[0],self.$http.get("/reading/getspacespecificreadings?parentId="+self.buildingIds[0]).then((function(response){self.config.selectReadingsPanel.data=self.getReadingFields(response.data.filter((function(el){
// TODO check whether to show for building analysis also, all readings except enpi
if(self.isSiteAnalysis?7!==el.type:3===el.type)return el}))),self.allFields["space"]=self.convertToList(self.config.selectReadingsPanel.data),self.config.selectReadingsPanel.loading=!1}))},loadNewWeatherReadings:function(weatherModule){var _this15=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee9(){var _this15$buildingIds,buildingIds,buildingId,_yield$API$get5,data,error,_ref2,_ref2$fields,fields,stationId;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context12){while(1)switch(_context12.prev=_context12.next){case 0:if(_this15.config.selectReadingsPanel.loading=!0,_this15.config.mainPanel.currentModule=weatherModule.moduleName,_this15.togglePanel("selectReadingsPanel"),_this15$buildingIds=_this15.buildingIds,buildingIds=void 0===_this15$buildingIds?0:_this15$buildingIds,buildingId=buildingIds[0],(0,validation/* isEmpty */.xb)(buildingId)){_context12.next=12;break}return _context12.next=8,api/* API */.bl.get("v3/weather/buildingSpecificWeatherFields?",{buildingId:buildingId});case 8:_yield$API$get5=_context12.sent,data=_yield$API$get5.data,error=_yield$API$get5.error,error?(_this15.config.selectReadingsPanel.data=[],_this15.config.selectReadingsPanel.parentId=null):(_ref2=data||{},_ref2$fields=_ref2.fields,fields=void 0===_ref2$fields?[]:_ref2$fields,stationId=_ref2.stationId,_this15.config.selectReadingsPanel.data=fields,_this15.config.selectReadingsPanel.parentId=stationId,_this15.allFields["weather"]=_this15.convertToList(fields));case 12:_this15.config.selectReadingsPanel.loading=!1;case 13:case"end":return _context12.stop()}}),_callee9)})))()},loadWeatherReadings:function(weatherModule){var self=this;self.weatherPanel.weatherCategory=weatherModule;var _step37,_iterator37=(0,createForOfIteratorHelper/* default */.Z)(self.weatherModules);try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var module=_step37.value;module.selected=!1}}catch(err){_iterator37.e(err)}finally{_iterator37.f()}self.config.selectReadingsPanel.loading=!0,self.config.mainPanel.currentModule=weatherModule.moduleName,self.togglePanel("selectReadingsPanel"),weatherModule.selected=!0;var fetchWeatherReadings=function(siteId){self.$http.get("/reading/getspacespecificreadings?excludeForecastReadings=false&parentId="+siteId).then((function(response){self.config.selectReadingsPanel.data=self.weatherModuleHandler(weatherModule,self.getReadingFields(response.data)),self.allFields["weather"]=self.convertToList(self.config.selectReadingsPanel.data),self.config.selectReadingsPanel.loading=!1}))};self.$http.get("/building/"+self.buildingIds[0]).then((function(response){if(response.data.building){var siteId=response.data.building.siteId;self.config.selectReadingsPanel.parentId=siteId,fetchWeatherReadings(siteId)}else self.$http.get("/zone/"+self.buildingIds[0]).then((function(response){if(response.data.zone){var _siteId=response.data.zone.siteId;self.config.selectReadingsPanel.parentId=_siteId,fetchWeatherReadings(_siteId)}}))}))},loadEnPIReadings:function(){var self=this;self.config.mainPanel.currentModule="enpi",self.togglePanel("selectReadingsPanel"),self.config.selectReadingsPanel.loading=!0,self.config.selectReadingsPanel.parentId=self.buildingIds[0],self.$http.get("/reading/getspacespecificreadings?parentId="+self.buildingIds[0]).then((function(response){self.config.selectReadingsPanel.data=self.getReadingFields(response.data.filter((function(el){if(7===el.type)return el}))),self.allFields["enpi"]=self.convertToList(self.config.selectReadingsPanel.data),self.config.selectReadingsPanel.loading=!1}))},loadMVProjects:function(){var self=this;self.config.mainPanel.currentModule="mv",self.config.mvPointsPanel.loading=!0;var panels=[];self.config["assetPointsPanel"].show&&panels.push("assetPointsPanel"),self.config["selectReadingsPanel"].show&&panels.push("selectReadingsPanel"),self.config["selectAssetsPanel"].show&&panels.push("selectAssetsPanel"),self.config["mvPointsPanel"].show&&panels.push("selectAssetsPanel"),self.config["selectMvsPanel"].show&&panels.push("selectAssetsPanel"),self.config["selectMvReadingsPanel"].show&&panels.push("selectReadingsPanel"),self.togglePanel(panels),self.togglePanel("mvPointsPanel");var fetchMvDetails=function(siteId){var mvprojects=self.$http.get("/v2/mv/getMVProjectList").then((function(response){self.mvprojects=response.data.result.mvprojects.filter((function(project){return project.siteId===siteId}))})),mvreadings=self.$http.get("/v2/readings/getSubModuleRel?moduleName=mvproject").then((function(response){var submodules=response.data.result.submodules;for(var module in self.mvreadings=[],submodules)self.mvreadings=self.mvreadings.concat(submodules[module].fields);self.mvreadings!==[]&&(self.mvreadings=self.mvreadings.filter((function(el){return 3===el.dataType})))}));Promise.all([mvprojects,mvreadings]).finally((function(){if("mvs"===self.config.mvPointsPanel.activeSubTab?(self.config.mvPointsPanel.data=self.mvprojects?self.mvprojects.map((function(el){return{id:el.id,name:el.name}})):[],self.config.mvPointsPanel.loading=!1):(self.config.mvPointsPanel.data=self.mvreadings?self.mvreadings.map((function(el){return{id:el.id,name:el.displayName}})):[],self.config.mvPointsPanel.loading=!1),self.mvAssetMap={},self.mvprojectNameMap={},self.mvprojects)for(var project in self.mvprojects)self.mvAssetMap[self.mvprojects[project].id]=self.mvprojects[project].meter.id,self.mvprojectNameMap[self.mvprojects[project].id]=self.mvprojects[project].name}))};self.$http.get("/building/"+self.buildingIds[0]).then((function(response){if(response.data.building){var siteId=response.data.building.siteId;fetchMvDetails(siteId)}else self.$http.get("/zone/"+self.buildingIds[0]).then((function(response){if(response.data.zone){var _siteId2=response.data.zone.siteId;fetchMvDetails(_siteId2)}}))}))},cancel:function(){this.$emit("update:visibility",!1)},getBuildingId:function(dp){for(var building in this.config.buildingToReadingMap){var dataPoint=this.config.buildingToReadingMap[building].find((function(d){return d===dp}));if(dataPoint)return building}return null},apply:function(){var _this16=this;if(!1===this.applyDisable){var dataPoints=[];if(this.config.mainPanel.selectedDataPoints&&this.config.mainPanel.selectedDataPoints.length){var _step38,_iterator38=(0,createForOfIteratorHelper/* default */.Z)(this.config.mainPanel.selectedDataPoints);try{var _loop8=function(){var dp=_step38.value,buildingId=_this16.getBuildingId(dp),readingFieldId=parseInt(dp.split("_")[0]),parentId=parseInt(dp.split("_")[1]),aggr=null,name=null,dataType=null,moduleName=null;_this16.readings&&_this16.readings.assets[parentId]&&_this16.allFields.assets&&_this16.allFields.assets[readingFieldId]&&(name=_this16.readings.assets[parentId]+" ( "+_this16.allFields.assets[readingFieldId].displayName+" )",dataType=_this16.readings.fields[readingFieldId].dataType),_this16.rulereadings&&_this16.rulereadings.assets[parentId]&&_this16.allFields.rules&&_this16.allFields.rules[readingFieldId]?(name=_this16.rulereadings.assets[parentId]+" ( "+_this16.allFields.rules[readingFieldId].displayName+" )",dataType=_this16.rulereadings.fields[readingFieldId].dataType):_this16.mvprojectNameMap&&_this16.mvprojectNameMap[parentId]&&_this16.allFields.mvs&&_this16.allFields.mvs[readingFieldId]?name=_this16.mvprojectNameMap[parentId]+" ( "+_this16.allFields.mvs[readingFieldId].name+" )":_this16.readingName||_this16.assetName||(_this16.allFields.space&&_this16.allFields.space[readingFieldId]?(name=_this16.allFields.space[readingFieldId].displayName,dataType=_this16.allFields.space[readingFieldId].dataType):_this16.allFields.weather&&_this16.allFields.weather[readingFieldId]?(name=_this16.allFields.weather[readingFieldId].displayName,dataType=_this16.allFields.weather[readingFieldId].dataType):_this16.allFields.enpi&&_this16.allFields.enpi[readingFieldId]&&(name=_this16.allFields.enpi[readingFieldId].displayName,dataType=_this16.allFields.enpi[readingFieldId].dataType)),_this16.mvAssetMap&&_this16.mvAssetMap[parentId]&&_this16.allFields.mvs&&_this16.allFields.mvs[readingFieldId]&&(buildingId=-1,aggr=3,moduleName="mvproject");var dataPoint={parentId:parentId,name:name,moduleName:moduleName,yAxis:{dataType:dataType,fieldId:readingFieldId,aggr:_this16.readings.fields&&_this16.readings.fields[readingFieldId]&&_this16.readings.fields[readingFieldId].unit&&["currency","kwh","co2","kg","mwh"].includes(_this16.readings.fields[readingFieldId].unit.trim().toLowerCase())?3:aggr||2},buildingId:parseInt(buildingId),prediction:!!(_this16.readings&&_this16.readings.fields&&_this16.readings.fields[readingFieldId]&&_this16.readings.fields[readingFieldId].module)&&11===_this16.readings.fields[readingFieldId].module.type,duplicateDataPoint:!1};if(_this16.allFields.kpis&&"kpi"===dp.split("_")[2]){var readings=_this16.allFields["kpis"].filter((function(reading){return(null===reading||void 0===reading?void 0:reading.id)==readingFieldId}))[0];if(!(0,validation/* isEmpty */.xb)(readings))if("DYNAMIC"===readings.kpiType)_this16.hideUserFilter=!0,name=(0,validation/* isEmpty */.xb)(_this16.id_vs_asset[parentId])?name:_this16.id_vs_asset[parentId]+" ( "+readings.name+" )",dataPoint.name=name,dataPoint.kpiType=readings.kpiType,dataPoint.yAxis.dynamicKpi=readingFieldId,dataPoint.yAxis.fieldId=null,dataPoint.yAxis.dataType=null,dataPoints.push(dataPoint);else{var _readings$readingFiel=readings.readingField,readingField=void 0===_readings$readingFiel?{}:_readings$readingFiel;name=(0,validation/* isEmpty */.xb)(_this16.id_vs_asset[parentId])?name:_this16.id_vs_asset[parentId]+" ( "+readingField.displayName+" )",dataPoint.kpiType=readings.kpiType,dataPoint.prediction=11===(null===readingField||void 0===readingField?void 0:readingField.moduleType),dataPoint.yAxis.fieldId=null===readingField||void 0===readingField?void 0:readingField.fieldId,dataPoint.name=name,dataPoint.yAxis.dataType=null===readingField||void 0===readingField?void 0:readingField.dataType,dataPoints.push(dataPoint)}}else dataPoints.push(dataPoint)};for(_iterator38.s();!(_step38=_iterator38.n()).done;)_loop8()}catch(err){_iterator38.e(err)}finally{_iterator38.f()}}var selectedAssetCategory=this.config.mainPanel.selectedAssetCategory;selectedAssetCategory&&(this.$parent.assetCategoryName=this.config.mainPanel.assetCategories.filter((function(categories){return categories.id===selectedAssetCategory}))[0].name),this.$emit("hideFilter",this.hideUserFilter),this.$emit("updateDataPoints",dataPoints)}},checkAndReduceRangeTraces:function(dataPoints){var _step39,finalDataPoints=[],keyAndDataPoints={},_iterator39=(0,createForOfIteratorHelper/* default */.Z)(dataPoints);try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var dP=_step39.value,fieldId=(0,validation/* isEmpty */.xb)(dP.yAxis.dynamicKpi)?dP.yAxis.fieldId:dP.yAxis.dynamicKpi;keyAndDataPoints.hasOwnProperty(fieldId+"."+dP.parentId)||(keyAndDataPoints[fieldId+"."+dP.parentId]=[]),keyAndDataPoints[fieldId+"."+dP.parentId].push(dP)}
//reducing data point
}catch(err){_iterator39.e(err)}finally{_iterator39.f()}for(var key in keyAndDataPoints)if(3===keyAndDataPoints[key].length){var aliases=keyAndDataPoints[key][0].aliases.actual.split("."),dataPoint=this.$helpers.cloneObject(keyAndDataPoints[key][0]);dataPoint.aliases.actual=aliases[0],finalDataPoints.push(dataPoint)}else finalDataPoints.push(keyAndDataPoints[key][0]);return finalDataPoints},setInitialValues:function(dataPoints,buildings){var _this17=this,finalDataPoints=this.checkAndReduceRangeTraces(dataPoints);finalDataPoints.length!==this.config.mainPanel.selectedDataPoints.length&&(this.config.mainPanel.selectedDataPoints=[],finalDataPoints.forEach((function(dp){2===dp.type||dp.duplicateDataPoint||((0,validation/* isEmpty */.xb)(dp.yAxis.dynamicKpi)?_this17.config.mainPanel.selectedDataPoints.push(dp.yAxis.fieldId+"_"+dp.parentId):_this17.config.mainPanel.selectedDataPoints.push(dp.yAxis.dynamicKpi+"_"+dp.parentId+"_kpi"))}))),buildings&&buildings.length&&!this.selectedBuildings.includes(buildings[0])&&this.setSelectedBuildings(buildings)}}},components_FDataPointSelectorvue_type_script_lang_js=FDataPointSelectorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDataPointSelectorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDataPointSelector=component.exports},
/***/134105:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"32593a37e7348ae1623e9e42913d7e55.svg";
/***/},
/***/857539:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0c4c867eeab407b0ed9771b49db7359e.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/86567.js.map