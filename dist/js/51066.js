"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[51066],{
/***/51066:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SupplierCancelPayments}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/etisalat/suppliers/SupplierCancelPayments.vue?vue&type=template&id=4d16fd3b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{},[_vm.isLoading?_c("div",{staticClass:"flex-middle justify-content-center"},[_c("spinner",{attrs:{show:!0,size:80}})],1):_vm._e(),_vm.$validation.isEmpty(_vm.result)&&!_vm.isLoading?_c("div",{staticClass:"height100vh fc-empty-white flex-middle justify-content-center flex-direction-column"},[_c("inline-svg",{attrs:{src:"svgs/emptystate/readings-empty",iconClass:"icon text-center icon-xxxlg"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Cancelled Payments available ")])],1):_vm._e(),_vm.isLoading||_vm.$validation.isEmpty(_vm.result)?_vm._e():_c("div",{},[_c("table",{staticClass:"supplier-cancel-table"},[_c("thead",[_c("th",{staticClass:"width20"},[_vm._v(_vm._s(_vm.$t("etisalat.common.month")))]),_c("th",{staticClass:"width30"},[_vm._v(" "+_vm._s(_vm.$t("etisalat.payments.disputes_alerts"))+" ")]),_c("th",{staticClass:"width30"},[_vm._v(_vm._s(_vm.$t("etisalat.common.details")))]),_c("th",{staticClass:"width20"},[_vm._v(_vm._s(_vm.$t("etisalat.common.actions")))])]),_c("tbody",_vm._l(_vm.result,(function(value,key){return _c("tr",{key:key},[_c("td",{staticClass:"width20 bold"},[_vm._v(_vm._s(_vm.getDate(key,"MMM YYYY",!0)))]),_c("td",{staticClass:"width30"},[value["count"].canceled?[_c("div",{staticClass:"bold"},[_vm._v(" "+_vm._s(Object.keys(value["count"].canceled)&&value["count"].canceled.cost?_vm.formatCurrency(value["count"].canceled.cost)+" AED":"---")+" ")]),_c("div",{staticClass:"fc-greey9-12 pT5"},[_vm._v(" "+_vm._s(Object.keys(value["count"].canceled)&&value["count"].canceled.count?"From "+value["count"].canceled.count+" Bills":"---")+" ")])]:_vm._e()],2),value.region?_c("td",{staticClass:"width30"},[_vm._l(value.region.regionList,(function(region,index){return _c("div",{key:index},[_vm._v(" "+_vm._s(_vm.$t("etisalat.payments.region_code"))+" : "+_vm._s(region)+" ")])})),_vm._l(value.region.costCenteList,(function(cost,index){return _c("div",{key:index,staticClass:"pT10"},[_vm._v(" "+_vm._s("Cost Center")+" : "+_vm._s(cost)+" ")])}))],2):_c("td",{staticClass:"width30"}),_c("td",{staticClass:"width20"},[_c("div",{staticClass:"fc-blue-txt3-13 pointer",on:{click:function($event){return _vm.showAlerts(key)}}},[_vm._v(" "+_vm._s(_vm.$t("etisalat.common.show_alerts"))+" ")]),_c("div",{staticClass:"pT10 fc-blue-txt3-13 pointer",on:{click:function($event){return _vm.redirectToBills("canceled",key)}}},[_vm._v(" "+_vm._s(_vm.$t("etisalat.common.show_bills"))+" ")])])])})),0)])])])])},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(648324),__webpack_require__(634338),__webpack_require__(420629)),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),formatter=__webpack_require__(676240),NewDateHelper=__webpack_require__(105534),router=__webpack_require__(329435),validation=__webpack_require__(990260),SupplierCancelPaymentsvue_type_script_lang_js={props:["details","moduleName"],mixins:[NewDateHelper/* default */.Z],data:function(){return{dateFilter:NewDateHelper/* default */.Z.getLastNMonthsTimeStamp(12),pdfopen:!1,isLoading:!0,currentPage:0,pageCount:0,result:{},billState:null,alertState:null,params:{nameSpace:"SupplierSummary",functionName:"canceledPayments",paramList:[]}}},created:function(){this.getAlertStateList(),this.getBillStateList()},mounted:function(){this.getData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({moduleMeta:function(state){return state.view.metaInfo}})),{},{fields:function(){return this.moduleMeta.fields||[]},fieldDisplayNames:function(){var _this=this;if(this.moduleMeta&&this.moduleMeta.fields){var fieldMap={};return this.moduleMeta.fields.forEach((function(field){_this.$set(fieldMap,field.name,field.displayName)})),fieldMap}return[]}}),methods:{getBillStateList:function(){var _this2=this;this.$http.get("v2/state/list?parentModuleName=custom_utilitybills").then((function(_ref){var data=_ref.data;_this2.billState=data.result.status||[]}))},getAlertStateList:function(){var _this3=this;this.$http.get("v2/state/list?parentModuleName=custom_alert").then((function(_ref2){var data=_ref2.data;_this3.alertState=data.result.status||[]}))},showAlerts:function(timeStamp){if(timeStamp){var moduleName="custom_alert",url="/app/al/".concat(moduleName,"/all"),startTime=moment_timezone_default()(Number(timeStamp)).tz(this.$timezone).startOf("month").valueOf(),id=this.details.id,name=this.details.name,endTime=moment_timezone_default()(Number(timeStamp)).tz(this.$timezone).endOf("month").valueOf(),time=[];time.push(startTime+""),time.push(endTime+"");var value=[];value.push(id+"");var statusId=null,stateValue=[];statusId=this.alertState.find((function(rt){return"cancelled"===rt.status})).id,stateValue.push(statusId+"");var routeData,filters={date_3:{operatorId:20,value:time},lookup_1:{operatorId:36,value:value,selectedLabel:name},moduleState:{operatorId:36,value:stateValue}},query={search:JSON.stringify(filters),includeParentFilter:!0};if((0,router/* isWebTabsEnabled */.tj)()){var _ref3=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},_name=_ref3.name;_name&&(routeData=this.$router.resolve({name:_name,query:query}))}else routeData=this.$router.resolve({path:url,query:query});(0,validation/* isEmpty */.xb)(routeData)||window.open(routeData.href,"_blank")}},redirectToBills:function(state,timeStamp){if(state&&timeStamp){var moduleName="custom_utilitybills",url="/app/al/".concat(moduleName,"/all"),startTime=moment_timezone_default()(Number(timeStamp)).tz(this.$timezone).startOf("month").valueOf(),id=this.details.id,name=this.details.name,endTime=moment_timezone_default()(Number(timeStamp)).tz(this.$timezone).endOf("month").valueOf(),time=[];time.push(startTime+""),time.push(endTime+"");var value=[];value.push(id+"");var statusId=this.billState.find((function(rt){return"disputed"===rt.status})).id;"disputed"===state?statusId=this.billState.find((function(rt){return"disputed"===rt.status})).id:"undisputed"===state?statusId=this.billState.find((function(rt){return"alertprocessed"===rt.status})).id:"canceled"===state&&(statusId=this.billState.find((function(rt){return"canceled"===rt.status})).id);var stateValue=[];stateValue.push(statusId+"");var routeData,filters={date_5:{operatorId:20,value:time},supplier:{operatorId:36,value:value,selectedLabel:name},moduleState:{operatorId:36,value:stateValue}},query={search:JSON.stringify(filters),includeParentFilter:!0};if((0,router/* isWebTabsEnabled */.tj)()){var _ref4=(0,router/* findRouteForModule */.Jp)(moduleName,router/* pageTypes */.As.LIST)||{},_name2=_ref4.name;_name2&&(routeData=this.$router.resolve({name:_name2,query:query}))}else routeData=this.$router.resolve({path:url,query:query});(0,validation/* isEmpty */.xb)(routeData)||window.open(routeData.href,"_blank")}},formatCurrency:function(value){return(0,formatter/* formatCurrency */.xG)(value,2)},goToInvoice:function(invoice){var routeData;if((0,router/* isWebTabsEnabled */.tj)()){var _ref5=(0,router/* findRouteForModule */.Jp)("custom_invoices",router/* pageTypes */.As.OVERVIEW)||{},name=_ref5.name;name&&(routeData=this.$router.resolve({name:name,params:{id:invoice.id,viewname:"all"}}))}else routeData=this.$router.resolve({path:"/app/supp/custom_invoices/all/".concat(invoice.id,"/summary")});(0,validation/* isEmpty */.xb)(routeData)||window.open(routeData.href,"_blank")},getDate:function(time,formatter,uppercase){return uppercase?moment_timezone_default()(Number(time)).tz(this.$timezone).format(formatter).toUpperCase():moment_timezone_default()(Number(time)).tz(this.$timezone).format(formatter)},getData:function(){var _this4=this,supplierrid=this.details.id,value=this.dateFilter.value;this.params.paramList=[supplierrid].concat((0,toConsumableArray/* default */.Z)(value)),this.$http.post("/v2/workflow/runWorkflow",this.params).then((function(resp){resp.data.result&&resp.data.result.workflow&&resp.data.result.workflow.returnValue&&(_this4.result=resp.data.result.workflow.returnValue,_this4.isLoading=!1)}))}}},suppliers_SupplierCancelPaymentsvue_type_script_lang_js=SupplierCancelPaymentsvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(suppliers_SupplierCancelPaymentsvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SupplierCancelPayments=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/51066.js.map