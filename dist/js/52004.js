"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[52004,5831],{
/***/516400:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ShimmerLoading}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ShimmerLoading.vue?vue&type=template&id=0d998f44
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"shimmer"},["form"===_vm.type?_c("section",[_vm._m(0)]):"profile"===_vm.type?_c("section",[_vm._m(1)]):"text"===_vm.type?_c("section",[_vm._m(2)]):"img"===_vm.type?_c("section",[_vm._m(3)]):"none"===_vm.type?_c("section",[_c("article",{staticClass:"sh-background img"})]):_vm._e()])},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("article",{staticClass:"sh-background form"},[_c("div",{staticClass:"g"}),_c("div",{staticClass:"h"}),_c("div",{staticClass:"i"}),_c("div",{staticClass:"j"}),_c("div",{staticClass:"k"}),_c("div",{staticClass:"l"}),_c("div",{staticClass:"m"}),_c("div",{staticClass:"n"}),_c("div",{staticClass:"o"}),_c("div",{staticClass:"p"}),_c("div",{staticClass:"q"}),_c("div",{staticClass:"r"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("article",{staticClass:"sh-background profile "},[_c("div",{staticClass:"g"}),_c("div",{staticClass:"h"}),_c("div",{staticClass:"i"}),_c("div",{staticClass:"j"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("article",{staticClass:"sh-background text"},[_c("div",{staticClass:"a"}),_c("div",{staticClass:"b"}),_c("div",{staticClass:"c"}),_c("div",{staticClass:"d"}),_c("div",{staticClass:"e"}),_c("div",{staticClass:"f"}),_c("div",{staticClass:"g"}),_c("div",{staticClass:"h"}),_c("div",{staticClass:"i"}),_c("div",{staticClass:"j"}),_c("div",{staticClass:"k"}),_c("div",{staticClass:"l"})])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("article",{staticClass:"sh-background img"},[_c("div",{staticClass:"g"})])}],ShimmerLoadingvue_type_script_lang_js={props:["config"],computed:{type:function(){return this.config&&this.config.type?this.config.type:"none"}}},components_ShimmerLoadingvue_type_script_lang_js=ShimmerLoadingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ShimmerLoadingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ShimmerLoading=component.exports},
/***/23369:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FChartTitle}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FChartTitle.vue?vue&type=template&id=1781dc98
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"f-new-chart-title"},[_vm.titeList&&_vm.titeList&&_vm.titeList.length&&!_vm.loading?_c("div",{staticClass:"flex-middle justify-center"},_vm._l(_vm.titeList,(function(data,index){return _c("div",{key:index,staticClass:"f-chart-mandv-title",style:_vm.getStyle(data)},[_vm._v(" "+_vm._s(data.title)+" ")])})),0):_vm._e()])},staticRenderFns=[],FChartTitlevue_type_script_lang_js={props:["chartContext","config"],data:function(){return{titeList:[],loading:!1}},mounted:function(){var self=this;this.loading=!0,setTimeout((function(){self.titeList=self.chartContext.regionsTitles,self.loading=!1}),1e3)},methods:{getStyle:function(data){return"width:"+data.diff+"px"}}},components_FChartTitlevue_type_script_lang_js=FChartTitlevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FChartTitlevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FChartTitle=component.exports},
/***/875963:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FNewChart}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/newcharts/components/FNewChart.vue?vue&type=template&id=8078524e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 f-singlechart"},[_vm.hidecharttypechanger?_vm._e():_c("f-chart-type",{staticClass:"charttypechanger fc-new-chart-type-single top-minus-86",attrs:{options:_vm.options},on:{getOptions:_vm.getOptionsFromTypeChart}}),_vm.chartContext&&!1!==_vm.options.settings.chart?_c("div",{staticStyle:{"text-align":"center"}},[_c("div",{style:_vm.isWidget?"position: relative; top: 15px;":""},[_vm.showAlarms&&_vm.showAlarmTitle?_c("div",{staticClass:"fc-alarms-chart-title",style:"sensorrollupalarm"===_vm.moduleName?"color: #324056 !important;font-weight: bold;":""},[_vm._v(" Alarms ")]):_vm._e(),_c("div",{ref:"alarmsChartEle",staticClass:"fc-alarms-chart pdf-chart"})]),_vm.relatedAlarms?_c("div",[_vm._l(_vm.relatedAlarms,(function(relAlarm,idx){return[_c("div",{key:idx,style:_vm.isWidget?"position: relative; top: 15px;":""},[_c("div",{staticClass:"fc-alarms-chart-title",staticStyle:{"text-transform":"capitalize",color:"#324056 !important"}},[_vm._v(" "+_vm._s(relAlarm?relAlarm.alarmTitle:"")+" ")]),_c("div",{ref:"relatedAlarmsChartEle",refInFor:!0,staticClass:"fc-alarms-chart pdf-chart"})])]}))],2):_vm._e(),_vm.chartContext.options.legend.show&&"top"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,resultObj:_vm.resultObj,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config,isScatterPlot:_vm.chartContext&&_vm.chartContext.scatterConfig},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.chartContext.options.regionConfig?_c("f-chart-title",{ref:"chartTitle",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config,chartContext:_vm.chartContext},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.drilldownParams?_c("drilldown-breadcrumb",{attrs:{drilldownParams:_vm.drilldownParams},on:{crumbClick:function($event){return _vm.$emit("crumbClick",$event)}}}):_vm._e(),_c("div",{staticClass:"fc-newchart-container",class:{"scatter-full-opacity":_vm.c3.params&&_vm.c3.params.data&&_vm.c3.params.data.types&&!Object.values(_vm.c3.params.data.types).includes("bubble")}},[_c("div",{ref:"newChartEle",staticClass:"fc-new-chart pdf-chart",class:{"hide-y2-axis":_vm.options&&_vm.options.axis&&!1===_vm.options.axis.showy2axis}}),_vm.chartContext.options.legend.show&&"right"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{style:{width:_vm.chartContext.options.legend.width+"px"},attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap,config:_vm.config},on:{ontoggle:_vm.ontoggle}}):_vm._e()],1),_vm.chartContext.options.legend.show&&"bottom"===_vm.chartContext.options.legend.position?_c("f-chart-legends",{ref:"chartLegend",attrs:{chart:_vm.c3.chart,options:_vm.options,xValueMode:_vm.chartContext.xValueMode,xLabelMap:_vm.chartContext.xLabelMap},on:{ontoggle:_vm.ontoggle}}):_vm._e(),_vm.showWidget?_c("f-widget-legends",{ref:"newWidget",staticClass:"widget-legends",attrs:{chart:_vm.c3.chart,reportVarianceData:_vm.resultObj?_vm.resultObj.reportData.aggr:null,data:_vm.data,options:_vm.options},on:{ontoggle:_vm.ontoggle}}):_vm._e()],1):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),billboard=(__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(260228),__webpack_require__(212826),__webpack_require__(670560),__webpack_require__(76265),__webpack_require__(169358),__webpack_require__(795765),__webpack_require__(879288),__webpack_require__(872695)),basechart=__webpack_require__(503162),ReportDataUtil=__webpack_require__(760396),c3_helper=__webpack_require__(167021),FChartLegends=__webpack_require__(906575),DrilldownBreadcrumb=__webpack_require__(374520),FChartTitle=__webpack_require__(23369),FWidgetLegends=__webpack_require__(547301),FChartType=__webpack_require__(294309),JumpToHelper=__webpack_require__(921466),tooltip=__webpack_require__(460895),color_helper=__webpack_require__(794211),deepmerge=__webpack_require__(708634),d3=__webpack_require__(348727),formatter=__webpack_require__(676240),validation=__webpack_require__(990260),FNewChartvue_type_script_lang_js={mixins:[basechart/* default */.Z,JumpToHelper/* default */.Z,ReportDataUtil/* default */.Z],props:["resultObj","isWidget","showWidgetLegends","config","specialScatter","relatedAlarms","moduleName","drilldownParams"],components:{FChartLegends:FChartLegends/* default */.Z,FWidgetLegends:FWidgetLegends/* default */.Z,FChartType:FChartType/* default */.Z,FChartTitle:FChartTitle/* default */.Z,DrilldownBreadcrumb:DrilldownBreadcrumb/* default */.Z},computed:{showWidget:function(){return!("undefined"!==typeof this.showWidgetLegends&&!this.showWidgetLegends)},isRegression:function(){return!!(this.$route.path.includes("regression")||this.resultObj&&this.resultObj.regressionConfig&&0!==this.resultObj.regressionConfig.length&&!0===this.resultObj.regression)},showAlarmTitle:function(){return!this.chartContext||!this.chartContext.options||!this.chartContext.options.hideAlarmTitle}},data:function(){return{chartContext:null,chartId:Math.random().toString(36).substr(2,9),c3:{params:null,chart:null},showAlarms:!1,updateTimeout:null}},mounted:function(){this.isRegression&&(this.hidecharttypechanger=!0),this.render()},beforeDestroy:function(){tooltip/* default */.Z.hideTooltip(),this.c3&&this.c3.chart&&this.c3.chart.destroy(),this.chartContext=null,this.c3.params=null,this.c3.chart=null},methods:{render:function(){var _this=this;this.data&&(this.chartContext=null,this.$nextTick((function(){_this.chartContext={},_this.chartContext.options=_this.getOptions(),_this.chartContext.dateRange=_this.dateRange,_this.chartContext.options.general&&_this.chartContext.options.general.hideZeroes?_this.chartContext.data=_this.formatZeroesInData(_this.data):_this.chartContext.data=_this.data,_this.chartContext.options.benchmark&&_this.chartContext.options.benchmark.show&&(_this.chartContext.reportVarianceData=_this.resultObj?_this.resultObj.reportData.aggr:null),_this.chartContext.xValueMode=_this.isXValueMode(_this.chartContext.options,_this.data),_this.options.defaultDurationUnit&&(_this.chartContext.defaultDurationUnit=_this.options.defaultDurationUnit),_this.chartContext.specialScatter=!!_this.specialScatter,_this.chartContext.unitMap=_this.getUnitMap(_this.options.dataPoints),_this.chartContext.enumMap=_this.getEnumMap(_this.options.dataPoints),_this.resultObj&&_this.resultObj.baselineData&&(_this.chartContext.baselineColors=_this.resultObj.baselineDataColors,_this.chartContext.baselineData=_this.resultObj.baselineData),_this.chartContext.openAlarm=function(alarmList){if(alarmList){var _step,alarmId=[],_iterator=(0,createForOfIteratorHelper/* default */.Z)(alarmList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var a=_step.value;alarmId.push(a.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.jumpToAlarms(alarmId)}},"pie"!==_this.chartContext.options.type&&"donut"!==_this.chartContext.options.type||(_this.chartContext.options.padding.top=20),_this.resultObj&&_this.resultObj.Readingdp&&(_this.chartContext["Readingdp"]=_this.resultObj.Readingdp),_this.resultObj&&_this.resultObj.scatterConfig&&(_this.chartContext["scatterConfig"]=_this.resultObj.scatterConfig,_this.chartContext["xMap"]=_this.resultObj.xMap);var c3Params=c3_helper/* default */.Z.prepare(_this.chartContext);c3Params&&(c3Params.data.onclick=function(d){var _d;if(null==(null===(_d=d)||void 0===_d?void 0:_d.index))for(var i=0;i<d.values.length;i++){var _d2;if((null===(_d2=d)||void 0===_d2?void 0:_d2.values[i].id)==d.id){d=d.values[i];break}}_this.$emit("drilldown",d)}),_this.mergeOption&&(_this.chartContext.options.padding.left=_this.mergeOption.padding.left,_this.chartContext.options.padding.right=_this.mergeOption.padding.right,_this.chartContext.options.axis.x.label.text="Month",c3Params.axis.y.label.text="No of Work Request"),_this.isWidget&&(_this.chartContext.options.legend.show?c3Params.size.height=c3Params.size.height-50:c3Params.size.height=c3Params.size.height-20,_this.options.widgetLegend.show&&(c3Params.size.height=c3Params.size.height-75),_this.resultObj&&_this.resultObj.report.userFilters&&(c3Params.size.height=c3Params.size.height-65)),_this.drilldownParams&&(c3Params.size.height=c3Params.size.height-25,_this.isWidget&&(c3Params.size.height=c3Params.size.height-25)),"gauge"===_this.chartContext.options.type&&c3Params.size.height>350&&(c3Params.size.height=350);var self=_this;self.showAlarms=1===_this.getOptions().common.mode&&_this.getOptions().settings.alarm,_this.config&&_this.config.hasOwnProperty("showAlarms")&&(self.showAlarms=_this.config.showAlarms),self.showAlarms&&(_this.chartContext.alarms=_this.alarms,c3Params.size.height=c3Params.size.height-100);var alarmsParams=null;if(self.showAlarms&&(alarmsParams=c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,_this.alarms),self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams))),self.relatedAlarms&&self.relatedAlarms.length)for(var idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][idx]){var relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(_this.chartContext,c3Params.data.json.x,self.relatedAlarms[idx]);relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][idx],billboard.bb.generate(relalarmsParams)}if(_this.chartContext.options.customizeC3){var defaultOptions={},mergedOptions=deepmerge/* default */.Z.objectAssignDeep(defaultOptions,c3Params,_this.chartContext.options.customizeC3);c3Params=mergedOptions}var print=JSON.parse(_this.$getProperty(_this,"$route.query.printing")||null);if(self.$refs["newChartEle"]){c3Params.bindto=self.$refs["newChartEle"],self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight);var width=self.$refs["newChartEle"].clientWidth;print&&!(0,validation/* isEmpty */.xb)(width)&&(c3Params.size.width=self.$refs["newChartEle"].clientWidth),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(_this.byPassSetting(c3Params))}else _this.$nextTick((function(){if(self.showAlarms&&self.$refs["alarmsChartEle"]&&(alarmsParams.bindto=self.$refs["alarmsChartEle"],billboard.bb.generate(alarmsParams)),self.relatedAlarms&&self.relatedAlarms.length)for(var _idx in self.relatedAlarms)if(self.$refs["relatedAlarmsChartEle"]&&self.$refs["relatedAlarmsChartEle"][_idx]){var _relalarmsParams=c3_helper/* default */.Z.prepareBooleanChart(this.chartContext,c3Params.data.json.x,self.relatedAlarms[_idx]);_relalarmsParams.bindto=self.$refs["relatedAlarmsChartEle"][_idx],billboard.bb.generate(_relalarmsParams)}c3Params.bindto=self.$refs["newChartEle"];var width=self.$refs["newChartEle"].clientWidth;print&&!(0,validation/* isEmpty */.xb)(width)&&(c3Params.size.width=self.$refs["newChartEle"].clientWidth),self.isWidget&&self.$refs["chartLegend"]&&(c3Params.size.height=c3Params.size.height-(self.$refs["chartLegend"].$el.clientHeight-20)),self.fixedChartHeight&&(c3Params.size.height=self.fixedChartHeight),self.c3.params=c3Params,self.c3.chart=billboard.bb.generate(this.byPassSetting(c3Params))}))})))},ontoggle:function(key,hiddenLegends){if(this.c3.params.ontoggle&&"function"===typeof this.c3.params.ontoggle){var callback=this.c3.params.ontoggle.bind(this.c3.chart.internal,key);callback()}if("bar"===this.chartContext.options.type&&this.chartContext.options.bar.showGroupTotal){var groupTotalData=c3_helper/* default */.Z.getGroupTotalDataPoint(this.c3.params,hiddenLegends);groupTotalData&&this.c3.chart.load({json:{group_total:groupTotalData}})}},byPassSetting:function(params){if(params&&params.data&&params.data.hasOwnProperty("labels")&&!0===params.data.labels){var formattedLabel={centered:!1,format:function(v){return Number.isInteger(v)?d3.format(",")(v):v?(0,formatter/* formatCurrency */.xG)(v):null}};this.$set(params.data,"labels",formattedLabel)}return params},getOptionsFromTypeChart:function(options,ctype){
//to set the chart type based on the widget
this.config&&this.config.widget&&this.config.widget.dataOptions&&(this.config.widget.dataOptions.chartType=ctype.chartTypeInt,this.config.widget.dataOptions.chartTypeInt=ctype.chartTypeInt)},isXValueMode:function(options,data){if(("pie"===options.type||"donut"===options.type)&&data&&data.x&&2===Object.keys(data).length){if(options.xColorMap)return!0;for(var colors=color_helper/* default */.Z.newColorPicker(data.x.length),xColorMap={},i=0;i<data.x.length;i++){var xVal=data.x[i];xColorMap[xVal]=options.xColorMap&&options.xColorMap[xVal]?options.xColorMap[xVal]:colors[i]}return options.xColorMap=xColorMap,!0}return options.xColorMap=null,!1},reRender:function(){var _this2=this;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return _this2.render()}),500)},resize:function(){this.reRender(),this.$refs["newWidget"]&&this.$refs["newWidget"].resize()},update:function(){this.reRender()}}},components_FNewChartvue_type_script_lang_js=FNewChartvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FNewChartvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FNewChart=component.exports},
/***/323957:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CardLoading}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/card-builder/components/CardLoading.vue?vue&type=template&id=664ae08c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 width100 newcard-shimmer"},[_c("shimmer-loading",{staticClass:"map-shimmer height100"})],1)},staticRenderFns=[],ShimmerLoading=__webpack_require__(516400),CardLoadingvue_type_script_lang_js={components:{shimmerLoading:ShimmerLoading/* default */.Z}},components_CardLoadingvue_type_script_lang_js=CardLoadingvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CardLoadingvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CardLoading=component.exports},
/***/517185:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return IndoorFloorPlanSwitcher}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/components/IndoorFloorPlanSwitcher.vue?vue&type=template&id=7e5aeac4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{staticClass:"floor-filter-con"},[_c("div",{staticClass:"position-relative floor-filter-align",staticStyle:{width:"691px"}},[_c("div",{staticClass:"floor-filter-sec-building floor-filter-sec"},[_vm._m(0),_c("div",{staticClass:"floor-filter-search"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Search","prefix-icon":"el-icon-search",clearable:""},model:{value:_vm.floorSearchBuilding,callback:function($$v){_vm.floorSearchBuilding=$$v},expression:"floorSearchBuilding"}})],1),_vm.siteLoading?_c("div",[_c("spinner",{attrs:{show:_vm.siteLoading,size:"80"}})],1):_c("div",{staticClass:"floor-filter-building-list"},[_c("el-collapse",{model:{value:_vm.buildingActive,callback:function($$v){_vm.buildingActive=$$v},expression:"buildingActive"}},[_vm._l(_vm.filteredSites,(function(site,index){return[_vm.filterdBuildingMap[site.id]?_c("el-collapse-item",{key:index,attrs:{name:site.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"flex-middle"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/site",iconClass:"icon text-center icon-xxlll"}})],1),_c("div",{staticClass:"pL10 bold"},[_vm._v(" "+_vm._s(site.name)+" ")])])]),_vm.buildingLoading?_c("div",[_c("spinner",{attrs:{show:_vm.buildingLoading,size:"80"}})],1):_vm.filterdBuildingMap[site.id]?_vm._l(_vm.filterdBuildingMap[site.id],(function(building,idx){return _c("div",{key:idx,staticClass:"flex-middle floor-list-bg",class:{active:_vm.selctedBuilding===building.id},on:{click:function($event){return _vm.selectBuilding(building)}}},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/building",iconClass:"icon text-center icon-lg"}}),_c("div",{staticClass:"label-txt-black text-left pL10"},[_vm._v(" "+_vm._s(building.name)+" ")])],1)})):_c("div",[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/building",iconClass:"icon text-center icon-xxlll"}}),_c("div",{staticClass:"label-txt-black fwbold"},[_vm._v(" No building ")])],1)],2):_vm._e()]}))],2)],1)]),_vm.floorSection?_c("div",{staticClass:"floor-filter-sec-floor floor-filter-sec floor-filter-right"},[_vm._m(1),_c("div",{staticClass:"floor-filter-search"},[_c("el-input",{staticClass:"mT5 fc-input-full-border2",attrs:{placeholder:"Search","prefix-icon":"el-icon-search"},model:{value:_vm.floorSearch,callback:function($$v){_vm.floorSearch=$$v},expression:"floorSearch"}})],1),_c("div",{staticClass:"floor-filter-con-scroll mT30 floor-filter-building-list"},[_vm.floorLoading?_c("div",[_c("spinner",{attrs:{show:_vm.floorLoading,size:"80"}})],1):_vm.buildingFloorMap[_vm.selctedBuilding]&&_vm.buildingFloorMap[_vm.selctedBuilding].length?_vm._l(_vm.filteredfloor,(function(floor,fidx){return _c("div",{key:fidx,staticClass:"flex-middle floor-list-bg",class:{active:floor.id===_vm.floorId},on:{click:function($event){return _vm.changeFloorPlan(floor)}}},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/floor",iconClass:"icon text-center icon-lg"}}),_c("div",{staticClass:"label-txt-black text-left pL10"},[_vm._v(" "+_vm._s(floor.name)+" ")])],1)})):[_c("div",{staticClass:"text-center mT80"},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/floor",iconClass:"icon text-center icon-xlg"}}),_c("div",{staticClass:"label-txt-black fwBold pT10"},[_vm._v(" No floors ")])],1)]],2)]):_vm._e(),_vm.floorSection?_c("div",{staticClass:"floor-filter-close-ico"},[_c("i",{staticClass:"el-icon-back",on:{click:_vm.handleChange}})]):_vm._e()])]):_vm._e()},staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floor-filter-header flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black3-16 bold text-left f15"},[_vm._v(" Buildings ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floor-filter-header flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black3-16 bold text-left f15 "},[_vm._v(" Floors ")])])}],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),vuex_esm=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(169358),__webpack_require__(538077),__webpack_require__(434284),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(670560),__webpack_require__(648324),__webpack_require__(420629)),api=__webpack_require__(32284),IndoorFloorPlanSwitchervue_type_script_lang_js={props:["visibility","floorplanId","floorId","buildingId"],data:function(){return{floorSearchBuilding:null,buildingActive:[],floorSection:!1,siteBuildingMap:{},buildingLoading:!1,selctedBuilding:null,floorLoading:!1,buildingFloorMap:{},floorSearch:null,siteLoading:!1}},watch:{fpType:{immediate:!0,handler:function(){
// change floorplan here
}}},created:function(){this.$store.dispatch("loadSite"),this.loadSearchBuilding()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.site}})),{},{fpType:function(){return this.$route.query&&this.$route.query.type?this.$route.query.type:1},filteredSites:function(){
// return this.sites.filter(data => {
//   if (this.floorSearchBuilding) {
//     if (
//       data.name
//         .toLowerCase()
//         .indexOf(this.floorSearchBuilding.toLowerCase()) > -1
//     ) {
//       return data
//     }
//     return null
//   }
//   return data
// })
return this.sites},filterdBuildingMap:function(){var _this=this,siteBuildingMap=this.siteBuildingMap,buildingandSiteMap={};return siteBuildingMap&&Object.keys(siteBuildingMap).forEach((function(siteId){var buildings=siteBuildingMap[siteId].filter((function(building){return _this.floorSearchBuilding?building.name.toLowerCase().indexOf(_this.floorSearchBuilding.toLowerCase())>-1?building:null:building}));buildings.length&&_this.$set(buildingandSiteMap,siteId,buildings)})),buildingandSiteMap},filteredfloor:function(){var _this2=this,floors=this.buildingFloorMap[this.selctedBuilding];return floors.filter((function(data){return _this2.floorSearch?data.name.toLowerCase().indexOf(_this2.floorSearch.toLowerCase())>-1?data:null:data}))}}),methods:{changeFloorPlan:function(floor){floor&&floor.indoorFloorPlanId&&floor.indoorFloorPlanId!==this.floorplanId&&this.$router.replace({params:{floorId:floor.id,floorplanid:floor.indoorFloorPlanId}}),this.afterFloorplanChangeHook(floor),this.handleChange()},selectBuilding:function(building){this.selctedBuilding=building.id,this.floorSection=!0,this.buildingFloorMap[building.id]||this.loadFloor(building.id)},afterFloorplanChangeHook:function(){
// after floorplan change hook
},
// changeSite(id) {
//   if (!this.siteBuildingMap[id]) {
//     this.loadBuilding(id)
//   }
// },
closeFloorSection:function(){this.floorSection=!1},handleChange:function(){this.$emit("update:visibility",!1)},loadSearchBuilding:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var url,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this3.siteLoading=!0,_this3.siteBuildingMap={},_this3.buildingActive=[],url="/v2/building/list?viewName=all",_this3.floorSearchBuilding&&(url="/v2/building/list?viewName=all&search=".concat(_this3.floorSearchBuilding)),_context.next=7,api/* API */.bl.get(url);case 7:_yield$API$get=_context.sent,data=_yield$API$get.data,data&&data.buildings&&data.buildings.length&&data.buildings.forEach((function(building){_this3.selectBuilding&&building.id===_this3.buildingId&&_this3.selectBuilding(building),building.siteId&&(_this3.buildingActive.push(building.siteId),_this3.siteBuildingMap[building.siteId]?_this3.siteBuildingMap[building.siteId].push(building):_this3.$set(_this3.siteBuildingMap,building.siteId,[building]))})),_this3.afterBuildingDataHook(),_this3.siteLoading=!1;case 12:case"end":return _context.stop()}}),_callee)})))()},afterBuildingDataHook:function(){
// after building load hook
},loadBuilding:function(siteId){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var url,_yield$API$get2,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this4.buildingLoading=!0,url="/v2/basespace/getBaseSpaceChildren?baseSpaceId=".concat(siteId),_context2.next=4,api/* API */.bl.get(url);case 4:_yield$API$get2=_context2.sent,data=_yield$API$get2.data,data&&_this4.$set(_this4.siteBuildingMap,siteId,data.basespaces),_this4.buildingLoading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},loadFloor:function(buildignId){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var filter,url,params,_yield$API$get3,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this5.floorLoading=!0,filter={building:{operatorId:36,value:[buildignId+""]},indoorFloorPlanId:{operatorId:2}},url="/v2/module/data/list",params={moduleName:"floor",viewName:"hidden-all",filters:JSON.stringify(filter)},_context3.next=6,api/* API */.bl.get(url,params);case 6:_yield$API$get3=_context3.sent,data=_yield$API$get3.data,data&&_this5.$set(_this5.buildingFloorMap,buildignId,data.moduleDatas),_this5.floorLoading=!1;case 10:case"end":return _context3.stop()}}),_callee3)})))()}}},components_IndoorFloorPlanSwitchervue_type_script_lang_js=IndoorFloorPlanSwitchervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_IndoorFloorPlanSwitchervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,IndoorFloorPlanSwitcher=component.exports},
/***/374520:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return DrilldownBreadcrumb}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/report/components/DrilldownBreadcrumb.vue?vue&type=template&id=77c09de1
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"drilldown-breadcrumb  p5 mL90 d-flex"},[_c("div",{staticClass:"crumb-item"},[_c("span",{staticClass:"f12 bold breadcrumb-text mR5 letter-spacing0_5 ",on:{click:function($event){return _vm.handleClick(-1)}}},[_vm._v(" "+_vm._s(_vm.$t("reportdrilldown.all"))+" ")]),_c("i",{staticClass:"el-icon-arrow-right f12 mR3"})]),_vm._l(_vm.drilldownParams.drilldownCriteria,(function(drilldownCriteria,stepIndex){return _c("div",{key:stepIndex,staticClass:"crumb-item",class:[{"is-last":stepIndex==_vm.drilldownParams.drilldownCriteria.length-1}]},[_c("span",{key:"crumb-text"+stepIndex,staticClass:"f12 bold breadcrumb-text mR5 letter-spacing0_5 ",class:[{"is-last":stepIndex==_vm.drilldownParams.drilldownCriteria.length-1}],on:{click:function($event){return _vm.handleClick(stepIndex)}}},[_vm._v(" "+_vm._s(drilldownCriteria.breadcrumbLabel))]),stepIndex!=_vm.drilldownParams.drilldownCriteria.length-1?_c("i",{key:"crumb-icon"+stepIndex,staticClass:"el-icon-arrow-right f12 mR3"}):_c("i",{key:"crumb-close"+stepIndex,staticClass:"el-icon-circle-close pointer f12 hide-v",on:{click:function($event){return _vm.handleClick(stepIndex-1)}}})])}))],2)},staticRenderFns=[],DrilldownBreadcrumbvue_type_script_lang_js={props:{drilldownParams:{type:Object,default:null}},data:function(){return{}},methods:{handleClick:function(crumbIndex){
//ignore click on last item
crumbIndex!=this.drilldownParams.length-1&&this.$emit("crumbClick",crumbIndex)}}},components_DrilldownBreadcrumbvue_type_script_lang_js=DrilldownBreadcrumbvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_DrilldownBreadcrumbvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,DrilldownBreadcrumb=component.exports},
/***/872227:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WorkPlaceFloorAnalysis}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workplaceAnalytics/WorkPlaceFloorAnalysis.vue?vue&type=template&id=34882958
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("WorkplaceAnalyticsTopbar",{attrs:{building:_vm.resource.building,floor:_vm.resource.floor},on:{goback:function($event){return _vm.goBack()}}}),_c("div",{staticClass:"wp-analytics-body"},[_vm.render?_c("WorkPlaceTreeMap",{staticClass:"workplace-treemap",attrs:{buildingId:_vm.buildingId,floorId:_vm.floorId}}):_vm._e()],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),WorkPlaceTreeMapvue_type_template_id_dd6f3464_render=(__webpack_require__(879288),__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(425728),__webpack_require__(260228),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.serverConfig?_c("el-container",{staticClass:"wp-chart-conatiner"},[_c("el-container",{staticClass:"flex relative"},[_vm.fullLoading?_c("div",{staticClass:"wp-loading"},[_c("spinner",{attrs:{show:_vm.fullLoading,size:"80"}})],1):_vm._e(),_c("WorkplaceAnalyticsLeagend",{attrs:{building:{name:"",id:this.buildingId},floor:{name:"",id:this.floorId},departments:_vm.selectedDepartmentIds},on:{dataLoaded:_vm.leagendDataLoaded}}),_c("FNewAnalyticModularReport",{ref:"newAnalyticReport",staticClass:"text-center width100 treemap-ct-section",attrs:{serverConfig:_vm.serverConfig,module:_vm.moduleObj,defaultChartType:"treemap",hideTabs:!0,hideHeader:!0,hidecharttypechanger:!0,chartType:"treemap",isWidget:!1,showPeriodSelect:!1,hideUserFilter:!0},on:{"update:serverConfig":function($event){_vm.serverConfig=$event},"update:server-config":function($event){_vm.serverConfig=$event},reportLoaded:_vm.reportLoaded}})],1),_c("el-aside",{staticClass:"h100",attrs:{width:"350px"}},[_c("WorkplaceAnalyticsSidebar",{attrs:{departmentData:_vm.dataDepartmentList,departmentInfo:_vm.departmentInfo},on:{departmentChanged:_vm.getDepartmentChanges}})],1)],1):_c("div",{staticClass:"text-center"},[_c("div",{staticClass:"p15 flex-middle height80vh justify-content-center flex-direction-column"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/emptystate/reportlist",iconClass:"icon text-center icon-xxxlg"}})],1),_c("div",{staticClass:"nowo-label"},[_vm._v(" "+_vm._s(_vm.$t("common._common.please_select_data_points_analyze"))+" ")])])])],1)}),WorkPlaceTreeMapvue_type_template_id_dd6f3464_staticRenderFns=[],objectDestructuringEmpty=__webpack_require__(991172),AnalyticsMixin=(__webpack_require__(506203),__webpack_require__(947522),__webpack_require__(244936)),FNewAnalyticModularReport=__webpack_require__(247942),WorkplaceAnalyticsSidebarvue_type_template_id_1cf1f4b0_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"h100 white-background p20 overflow-hidden"},[_c("div",[_c("div",{staticClass:"pB10 fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.$t("floorplan.departments"))+" ")]),_c("div",[_c("el-input",{staticClass:"width100 fc-input-full-border2 fc-input-full-border2-prefix wpa-search",attrs:{size:"medium",placeholder:"Search",clearable:""},on:{input:_vm.searchContent},model:{value:_vm.search,callback:function($$v){_vm.search=$$v},expression:"search"}},[_c("i",{staticClass:"el-input__icon pointer fc-grey8 f14 fwBold el-icon-search mR5",attrs:{slot:"prefix"},slot:"prefix"})])],1)]),_vm.loading?_vm._e():_c("div",{staticClass:"pT20 checkbox-containter overflo-auto h100"},[_c("el-checkbox",{staticClass:"width80 ellipsis overflow-hidden pL15 pB10",on:{change:function($event){return _vm.handleSelectAll()}},model:{value:_vm.selectAll,callback:function($$v){_vm.selectAll=$$v},expression:"selectAll"}},[_vm._v(_vm._s(_vm.$t("floorplan.select_all")))]),_vm._l(_vm.filteredList,(function(department,index){return[_c("div",{key:index,staticClass:"checkbox-gray-area flex"},[_c("div",{staticClass:"dp-color",style:{background:department.color,"border-radius":"4px"}}),_c("el-checkbox",{staticClass:"width80 ellipsis overflow-hidden",class:{disable:department.selected},attrs:{disabled:department.disabled},on:{change:function($event){return _vm.changeDepartment()}},model:{value:department.selected,callback:function($$v){_vm.$set(department,"selected",$$v)},expression:"department.selected"}},[_vm._v(_vm._s(department.name))]),_c("el-tooltip",{attrs:{placement:"top"}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("div",{staticClass:"pB5 f13"},[_vm._v(" "+_vm._s(_vm.getInfo(department).occupied+" out of "+(_vm.getInfo(department).vacant+_vm.getInfo(department).occupied)+" seats placed in "+department.name)+" ")])]),department.selected?_c("div",{staticClass:"dp-value bold p10 pointer"},[_vm._v(" "+_vm._s(_vm.getInfo(department).occupied+"/"+(_vm.getInfo(department).vacant+_vm.getInfo(department).occupied))+" ")]):_vm._e()])],1)]}))],2)])},WorkplaceAnalyticsSidebarvue_type_template_id_1cf1f4b0_staticRenderFns=[],api=(__webpack_require__(169358),__webpack_require__(186466),__webpack_require__(564043),__webpack_require__(61514),__webpack_require__(538077),__webpack_require__(32284)),debounce=__webpack_require__(23279),debounce_default=__webpack_require__.n(debounce),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),WorkplaceAnalyticsSidebarvue_type_script_lang_js={props:["departmentData","departmentInfo"],created:function(){this.init()},data:function(){return{departmentList:[],search:null,departments:[],selectedDepartmentmap:[],firstDepartmentMap:{},loading:!1,counter:0,selectAll:!0}},watch:{departmentData:{handler:function(newVal,oldVal){null!==newVal&&Object.keys(newVal).length>0&&!isEqual_default()(newVal,oldVal)&&(this.formatedDepartmentinfo(),this.counter>0?this.prepareDepartmentafterData():this.prepareDepartments(),this.counter++)},deep:!0}},computed:{formatDepartmentInfo:function(){var _this=this,result={};return Object.values(this.departmentInfo).forEach((function(d){Object.keys(d).forEach((function(key){var data=result[key],incomingData=d[key];data||_this.$set(result,key,{vacant:0,occupied:0});var vacant=result[key].vacant,occupied=result[key].occupied,incomingDataVacant=incomingData.vacant||0,incomingDataOccupied=incomingData.occupied||0;_this.$set(result,key,{vacant:vacant+incomingDataVacant,occupied:occupied+incomingDataOccupied})}))})),result},filteredList:function(){var _this2=this;return null!==this.search?this.departmentList.filter((function(rt){return rt.name.toLowerCase().indexOf(_this2.search.toLowerCase())>=0?rt:null})):this.departmentList}},methods:{handleSelectAll:function(){var _this3=this;this.selectAll?this.departmentList.forEach((function(data){data.disabled||_this3.$set(data,"selected",!0)})):this.departmentList.forEach((function(data){data.disabled||_this3.$set(data,"selected",!1)})),this.changeDepartment()},formatedDepartmentinfo:function(){},getInfo:function(department){return this.formatDepartmentInfo[department.id]||{vacant:0,occupied:0}},searchContent:debounce_default()((function(){this.prepareDepartmentafterData()}),1e3),prepareDepartments:function(){var _this4=this,activeList=[],disabledList=[];this.firstDepartmentMap=this.$helpers.cloneObject(this.departmentData),this.departments.forEach((function(data){_this4.$set(data,"selected",!1),_this4.departmentData[data.id]?(_this4.$set(data,"selected",!0),_this4.$set(data,"disabled",!1),_this4.$set(data,"value",_this4.departmentData[data.id].value),activeList.push(data)):(_this4.$set(data,"disabled",!0),disabledList.push(data))})),this.departmentList=this.$helpers.cloneObject([].concat(activeList,disabledList))},prepareDepartmentafterData:function(){var _this5=this,activeList=[],disabledList=[];this.departmentList.forEach((function(data){var _this5$departmentData;_this5.firstDepartmentMap[data.id]?(_this5.$set(data,"value",null!==(_this5$departmentData=_this5.departmentData[data.id])&&void 0!==_this5$departmentData&&_this5$departmentData.value?_this5.departmentData[data.id].value:0),activeList.push(data)):
// this.$set(data, 'disabled', true)
disabledList.push(data)})),this.departmentList=this.$helpers.cloneObject([].concat(activeList,disabledList))},init:function(){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_this6.getDepartments();case 2:_this6.formatedDepartmentinfo();
//this.prepareDepartments()
case 3:case"end":return _context.stop()}}),_callee)})))()},getDepartments:function(){var _this7=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this7.loading=!0,params={moduleName:"department"},_context2.next=4,api/* API */.bl.get("v2/module/data/list",params);case 4:_yield$API$get=_context2.sent,data=_yield$API$get.data,_this7.departments=data.moduleDatas,_this7.loading=!1;case 8:case"end":return _context2.stop()}}),_callee2)})))()},changeDepartment:function(){var ids=[];this.departmentList.forEach((function(rt){rt.selected||rt.disabled||ids.push(rt.id)})),this.$emit("departmentChanged",ids)}}},workplaceAnalytics_WorkplaceAnalyticsSidebarvue_type_script_lang_js=WorkplaceAnalyticsSidebarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(workplaceAnalytics_WorkplaceAnalyticsSidebarvue_type_script_lang_js,WorkplaceAnalyticsSidebarvue_type_template_id_1cf1f4b0_render,WorkplaceAnalyticsSidebarvue_type_template_id_1cf1f4b0_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkplaceAnalyticsSidebar=component.exports,WorkplaceAnalyticsLeagendvue_type_template_id_339bb475_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.loading?_vm._e():_c("div",{staticClass:"wp-analytics-leagend flex width100 fc__layout_media_center justify-content-center p20"},[_c("div",{staticClass:"p10 pR20"},[_c("div",{staticClass:"wp-l-value"},[_vm._v(_vm._s(_vm.cardData.vacant))]),_c("div",{staticClass:"wp-l-key"},[_vm._v(_vm._s(_vm.$t("floorplan.vacant_desks")))])]),_c("div",{staticClass:"p10 pR20"},[_c("div",{staticClass:"wp-l-value"},[_vm._v(_vm._s(_vm.cardData.occupied))]),_c("div",{staticClass:"wp-l-key"},[_vm._v(_vm._s(_vm.$t("floorplan.occupied_desks")))])]),_c("div",{staticClass:"p10 pR20"},[_c("div",{staticClass:"wp-l-value"},[_vm._v(" "+_vm._s(_vm._f("percentage")(_vm.cardData.occupied,_vm.cardData.deskCount))+" ")]),_c("div",{staticClass:"wp-l-key"},[_vm._v(_vm._s(_vm.$t("floorplan.occupiedPercentage")))])])])},WorkplaceAnalyticsLeagendvue_type_template_id_339bb475_staticRenderFns=[],WorkplaceAnalyticsStatusCard=(__webpack_require__(865137),__webpack_require__(932065)),WorkplaceAnalyticsLeagendvue_type_script_lang_js={extends:WorkplaceAnalyticsStatusCard/* default */.Z,computed:{leagendData:function(){var newObj={},obj=this.cardData;return Object.keys(obj).sort().reverse().forEach((function(key){newObj[key]=obj[key]})),newObj}}},workplaceAnalytics_WorkplaceAnalyticsLeagendvue_type_script_lang_js=WorkplaceAnalyticsLeagendvue_type_script_lang_js,WorkplaceAnalyticsLeagend_component=(0,componentNormalizer/* default */.Z)(workplaceAnalytics_WorkplaceAnalyticsLeagendvue_type_script_lang_js,WorkplaceAnalyticsLeagendvue_type_template_id_339bb475_render,WorkplaceAnalyticsLeagendvue_type_template_id_339bb475_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkplaceAnalyticsLeagend=WorkplaceAnalyticsLeagend_component.exports,eventBus=__webpack_require__(398011),WorkPlaceTreeMapvue_type_script_lang_js={mixins:[AnalyticsMixin/* default */.Z],components:{FNewAnalyticModularReport:FNewAnalyticModularReport/* default */.Z,WorkplaceAnalyticsSidebar:WorkplaceAnalyticsSidebar,WorkplaceAnalyticsLeagend:WorkplaceAnalyticsLeagend},props:["floorId","buildingId"],data:function(){var buildingUserFilter={fieldId:1614157,dataType:7,chooseValue:{type:1,values:[],otherEnabled:!1},name:"Building",component:{componentType:1,availableComponents:[1,2],dataType:7},defaultValues:[],values:this.buildingId?[this.buildingId]:[],allValues:[]},floorUserFilter={fieldId:1614158,dataType:7,chooseValue:{type:1,values:[],otherEnabled:!1},name:"Floor",component:{componentType:1,availableComponents:[1,2],dataType:7},defaultValues:[],values:this.floorId?[this.floorId]:[],allValues:[]};return{departmentInfo:{},fullLoading:!0,childCallbackSyanc:{leagendCallback:!1,reportCallback:!1},selectedDepartmentIds:[],leagendData:{},dataDepartmentList:{},reportObject:null,resultObject:null,chartDimensions:{width:980,height:600},serverConfig:{xField:{field_id:1614158,module_id:137767},yField:[null],dateField:null,groupBy:[{field_id:1682506,module_id:137767},{field_id:1614593,module_id:137767}],criteria:{pattern:"(1)",conditions:{1:{fieldName:"deskType",value:"1",columnName:"Desks.DESK_TYPE",operatorId:54,isResourceOperator:!1,parseLabel:null,valueArray:["1"],operatorLabel:"is",active:!0,operatorsDataType:{dataType:"ENUM",displayType:"SELECTBOX"},isSpacePicker:!1}},resourceOperator:!1},having:null,sortFields:null,sortOrder:null,limit:null,userFilters:this.floorId?[floorUserFilter]:[buildingUserFilter],moduleType:null,moduleName:"desks"},moduleObj:{moduleName:"desks",moduleDisplayName:"Desks",moduleId:137767}}},mounted:function(){var _this=this;eventBus/* eventBus */.Y.$on("heatmapLoaded",(function(_ref){var departmentInfo=Object.assign({},((0,objectDestructuringEmpty/* default */.Z)(_ref),_ref));_this.$nextTick((function(){_this.departmentInfo=null!==departmentInfo&&void 0!==departmentInfo&&departmentInfo.departmentInfo?departmentInfo.departmentInfo:null,_this.childCallbackSyanc.reportCallback=!0}))}))},beforeDestroy:function(){eventBus/* eventBus */.Y.$off("heatmapLoaded")},watch:{"reportObject.treeMapData":function(rawData,oldVal){isEqual_default()(rawData,oldVal)||this.prepareDepartment()},childCallbackSyanc:{handler:function(newVal){newVal.leagendCallback&&newVal.reportCallback&&(this.fullLoading=!1)},deep:!0}},methods:{leagendDataLoaded:function(){var _this2=this;this.$nextTick((function(){_this2.childCallbackSyanc.leagendCallback=!0}))},getDepartmentChanges:function(ids){this.childCallbackSyanc={leagendCallback:!1,reportCallback:!1},this.fullLoading=!0,this.selectedDepartmentIds=ids,this.setDepartmentCriteria(ids)},setDepartmentCriteria:function(departments){var criteria={fieldName:"department",operatorLabel:"isn't",active:!0,value:departments.join(),valueArray:departments,columnName:"Desks.DEPARTMENT_ID",operatorId:37,operatorsDataType:{dataType:"LOOKUP",displayType:"LOOKUP_POPUP"},isSpacePicker:!1};if(departments.length){var pattern="(1 and 2)";this.$set(this.serverConfig.criteria.conditions,"2",criteria),this.$set(this.serverConfig.criteria,"pattern",pattern)}else{var _pattern="(1)";delete this.serverConfig.criteria.conditions["2"],this.$set(this.serverConfig.criteria,"pattern",_pattern)}},reportLoaded:function(report,result){var _result$reportData,_this3=this;this.reportObject=report,this.resultObject=result,this.prepareDepartment(),null!==result&&void 0!==result&&null!==(_result$reportData=result.reportData)&&void 0!==_result$reportData&&_result$reportData.data&&!result.reportData.data.length&&this.$nextTick((function(){_this3.childCallbackSyanc.reportCallback=!0}))},prepareDepartment:function(){var _reportObject$treeMap,_this4=this,reportObject=this.reportObject;this.dataDepartmentList={},null!==reportObject&&void 0!==reportObject&&null!==(_reportObject$treeMap=reportObject.treeMapData)&&void 0!==_reportObject$treeMap&&_reportObject$treeMap.children&&reportObject.treeMapData.children.forEach((function(floor){null!==floor&&void 0!==floor&&floor.children&&floor.children.forEach((function(department){_this4.setDepartmentData(department,department.key)}))}))},setDepartmentData:function(data,departmentId){var _dataDepartmentList$d,dataDepartmentList=this.dataDepartmentList;if(null!==(_dataDepartmentList$d=dataDepartmentList[departmentId])&&void 0!==_dataDepartmentList$d&&_dataDepartmentList$d.value){var value=dataDepartmentList[departmentId].value;this.$set(dataDepartmentList,departmentId,{value:data.value+value,name:data.name,color:data.color})}else this.$set(dataDepartmentList,departmentId,{value:data.value,name:data.name,disabled:!1,color:data.color})}}},workplaceAnalytics_WorkPlaceTreeMapvue_type_script_lang_js=WorkPlaceTreeMapvue_type_script_lang_js,WorkPlaceTreeMap_component=(0,componentNormalizer/* default */.Z)(workplaceAnalytics_WorkPlaceTreeMapvue_type_script_lang_js,WorkPlaceTreeMapvue_type_template_id_dd6f3464_render,WorkPlaceTreeMapvue_type_template_id_dd6f3464_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkPlaceTreeMap=WorkPlaceTreeMap_component.exports,vuex_esm=__webpack_require__(420629),router=__webpack_require__(329435),WorkplaceAnalyticsTopbarvue_type_template_id_e7684ebc_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"setting-header3 position-relative fp-header indoor-fp-topbar p10"},[_c("div",{staticClass:"wp-back-icon pointer"},[_c("i",{staticClass:"el-icon-back",on:{click:function($event){return _vm.goBack()}}})]),_c("div",{staticClass:"setting-title-block fp-chooser-new",on:{click:_vm.showBuildingFilter}},[null!==_vm.buildingId?_c("div",{staticClass:"fc-black3-16 fw4 f15 line-height20"},[_c("i",{staticClass:"el-icon-office-building f18 mR10"}),_vm.building?_c("span",[_vm._v(_vm._s(""+_vm.building.name))]):_c("span",[_vm._v(_vm._s("Building"))]),null!==_vm.floor?_c("span",[_c("i",{staticClass:"el-icon-arrow-right fc-grey-text12-light f18 pR5 pL5 vertical-bottom bold"})]):_vm._e(),null!==_vm.floor?_c("span",[_vm._v(_vm._s(""+_vm.floor.name))]):_vm._e()]):_c("div",{staticClass:"fc-black3-16 fw4 f15 line-height20"},[_c("i",{staticClass:"el-icon-office-building f18 mR10"}),_c("span",[_vm._v(_vm._s("Workplace"))])])])]),_vm.filterDialogOpen?_c("FloorSwicther",{attrs:{visibility:_vm.filterDialogOpen,floorId:_vm.floorId,buildingId:_vm.buildingId},on:{"update:visibility":function($event){_vm.filterDialogOpen=$event}}}):_vm._e()],1)},WorkplaceAnalyticsTopbarvue_type_template_id_e7684ebc_staticRenderFns=[],WorkplaceAnalysisFloorSwitchervue_type_template_id_41bd9fe8_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visibility?_c("div",{staticClass:"floor-filter-con"},[_c("div",{staticClass:"position-relative floor-filter-align",staticStyle:{width:"691px"}},[_c("div",{staticClass:"floor-filter-sec-building floor-filter-sec"},[_vm._m(0),_c("div",{staticClass:"floor-filter-search"},[_c("el-input",{staticClass:"fc-input-full-border2",attrs:{placeholder:"Search","prefix-icon":"el-icon-search",clearable:""},model:{value:_vm.floorSearchBuilding,callback:function($$v){_vm.floorSearchBuilding=$$v},expression:"floorSearchBuilding"}})],1),_vm.siteLoading?_c("div",[_c("spinner",{attrs:{show:_vm.siteLoading,size:"80"}})],1):_c("div",{staticClass:"floor-filter-building-list"},[_c("el-collapse",{model:{value:_vm.buildingActive,callback:function($$v){_vm.buildingActive=$$v},expression:"buildingActive"}},[_vm._l(_vm.filteredSites,(function(site,index){return[_vm.filterdBuildingMap[site.id]?_c("el-collapse-item",{key:index,attrs:{name:site.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"flex-middle"},[_c("div",[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/site",iconClass:"icon text-center icon-xxlll"}})],1),_c("div",{staticClass:"pL10 bold"},[_vm._v(" "+_vm._s(site.name)+" ")])])]),_vm.buildingLoading?_c("div",[_c("spinner",{attrs:{show:_vm.buildingLoading,size:"80"}})],1):_vm.filterdBuildingMap[site.id]?_vm._l(_vm.filterdBuildingMap[site.id],(function(building,idx){return _c("div",{key:idx,staticClass:"flex-middle floor-list-bg",class:{active:_vm.selctedBuilding===building.id},on:{click:function($event){return _vm.openBuilding(building)}}},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/building",iconClass:"icon text-center icon-lg"}}),_c("div",{staticClass:"label-txt-black text-left pL10"},[_vm._v(" "+_vm._s(building.name)+" ")]),_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Open Building view",placement:"left-end"}})],1)})):_c("div",[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/building",iconClass:"icon text-center icon-xxlll"}}),_c("div",{staticClass:"label-txt-black fwbold"},[_vm._v(" No building ")])],1)],2):_vm._e()]}))],2)],1)]),_c("div",{staticClass:"floor-filter-sec-floor floor-filter-sec floor-filter-right"},[_vm._m(1),_c("div",{staticClass:"floor-filter-search"},[_c("el-input",{staticClass:"mT5 fc-input-full-border2",attrs:{placeholder:"Search","prefix-icon":"el-icon-search"},model:{value:_vm.floorSearch,callback:function($$v){_vm.floorSearch=$$v},expression:"floorSearch"}})],1),_c("div",{staticClass:"floor-filter-con-scroll mT30 floor-filter-building-list"},[_vm.floorLoading?_c("div",[_c("spinner",{attrs:{show:_vm.floorLoading,size:"80"}})],1):_vm.buildingFloorMap[_vm.selctedBuilding]&&_vm.buildingFloorMap[_vm.selctedBuilding].length?_vm._l(_vm.filteredfloor,(function(floor,fidx){return _c("div",{key:fidx,staticClass:"flex-middle floor-list-bg",class:{active:floor.id===_vm.floorId},on:{click:function($event){return _vm.changeFloorPlan(floor)}}},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/floor",iconClass:"icon text-center icon-lg"}}),_c("div",{staticClass:"label-txt-black text-left pL10"},[_vm._v(" "+_vm._s(floor.name)+" ")])],1)})):[_c("div",{staticClass:"text-center mT80"},[_c("inline-svg",{attrs:{src:"svgs/spacemanagement/floor",iconClass:"icon text-center icon-xlg"}}),_c("div",{staticClass:"label-txt-black fwBold pT10"},[_vm._v(" No floors ")])],1)]],2)]),_c("div",{staticClass:"floor-filter-close-ico"},[_c("i",{staticClass:"el-icon-back",on:{click:_vm.handleChange}})])])]):_vm._e()},WorkplaceAnalysisFloorSwitchervue_type_template_id_41bd9fe8_staticRenderFns=[function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floor-filter-header flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black3-16 bold text-left f15"},[_vm._v(" Buildings ")])])},function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"floor-filter-header flex-middle justify-content-space"},[_c("div",{staticClass:"fc-black3-16 bold text-left f15 "},[_vm._v(" Floors ")])])}],IndoorFloorPlanSwitcher=(__webpack_require__(857267),__webpack_require__(648324),__webpack_require__(517185)),WorkplaceAnalysisFloorSwitchervue_type_script_lang_js={extends:IndoorFloorPlanSwitcher/* default */.Z,methods:{findRoute:function(){if((0,router/* isWebTabsEnabled */.tj)()){var tabType=router/* tabTypes */.VF.CUSTOM,config={type:"workplace-analytics"},_ref=(0,router/* findRouteForTab */.OD)(tabType,{config:config})||{},name=_ref.name;return name?this.$router.resolve({name:name}).href:null}return"/app/wp/workplacetreemap"},openBuilding:function(building){var _this=this;if(this.floorId)this.selectBuilding(building);else{var parentPath=this.findRoute();parentPath&&this.$router.push({path:"".concat(parentPath,"/").concat(building.id)}),this.$nextTick((function(){_this.handleChange()}))}},changeFloorPlan:function(floor,building){var _this2=this;floor&&floor.id?this.$router.replace({params:{floorId:floor.id,buildingId:this.selctedBuilding}}):building&&this.openBuilding(building),this.$nextTick((function(){_this2.handleChange()}))},loadFloor:function(buildignId){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var filter,url,params,_yield$API$get,data;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this3.floorLoading=!0,filter={building:{operatorId:36,value:[buildignId+""]}},url="/v2/module/data/list",params={moduleName:"floor",viewName:"hidden-all",filters:JSON.stringify(filter)},_context.next=6,api/* API */.bl.get(url,params);case 6:_yield$API$get=_context.sent,data=_yield$API$get.data,data&&_this3.$set(_this3.buildingFloorMap,buildignId,data.moduleDatas),_this3.floorLoading=!1;case 10:case"end":return _context.stop()}}),_callee)})))()}}},workplaceAnalytics_WorkplaceAnalysisFloorSwitchervue_type_script_lang_js=WorkplaceAnalysisFloorSwitchervue_type_script_lang_js,WorkplaceAnalysisFloorSwitcher_component=(0,componentNormalizer/* default */.Z)(workplaceAnalytics_WorkplaceAnalysisFloorSwitchervue_type_script_lang_js,WorkplaceAnalysisFloorSwitchervue_type_template_id_41bd9fe8_render,WorkplaceAnalysisFloorSwitchervue_type_template_id_41bd9fe8_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkplaceAnalysisFloorSwitcher=WorkplaceAnalysisFloorSwitcher_component.exports,WorkplaceAnalyticsTopbarvue_type_script_lang_js={components:{FloorSwicther:WorkplaceAnalysisFloorSwitcher},props:{building:{type:Object,required:!1,default:null},floor:{type:Object,required:!1,default:null}},data:function(){return{filterDialogOpen:!1}},computed:{buildingId:function(){var _this$building;return null!==(_this$building=this.building)&&void 0!==_this$building&&_this$building.id?this.building.id:null},floorId:function(){var _this$floor;return null!==(_this$floor=this.floor)&&void 0!==_this$floor&&_this$floor.id?this.floor.id:null}},methods:{goBack:function(){this.$emit("goback")},showBuildingFilter:function(){this.filterDialogOpen=!0},actions:function(name){}}},workplaceAnalytics_WorkplaceAnalyticsTopbarvue_type_script_lang_js=WorkplaceAnalyticsTopbarvue_type_script_lang_js,WorkplaceAnalyticsTopbar_component=(0,componentNormalizer/* default */.Z)(workplaceAnalytics_WorkplaceAnalyticsTopbarvue_type_script_lang_js,WorkplaceAnalyticsTopbarvue_type_template_id_e7684ebc_render,WorkplaceAnalyticsTopbarvue_type_template_id_e7684ebc_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkplaceAnalyticsTopbar=WorkplaceAnalyticsTopbar_component.exports,WorkPlaceFloorAnalysisvue_type_script_lang_js={components:{WorkPlaceTreeMap:WorkPlaceTreeMap,WorkplaceAnalyticsTopbar:WorkplaceAnalyticsTopbar},props:["building"],data:function(){return{render:!0,headerDetails:{header:null,subHeader:null},resource:{floor:null,building:null}}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({sites:function(state){return state.site}})),{},{buildingId:function(){var _this$building,_this$$route;return null!==(_this$building=this.building)&&void 0!==_this$building&&_this$building.id?this.building.id:null!==(_this$$route=this.$route)&&void 0!==_this$$route&&null!==(_this$$route=_this$$route.params)&&void 0!==_this$$route&&_this$$route.buildingId?Number(this.$route.params.buildingId):null},floorId:function(){var _this$$route2;return null!==(_this$$route2=this.$route)&&void 0!==_this$$route2&&null!==(_this$$route2=_this$$route2.params)&&void 0!==_this$$route2&&_this$$route2.floorId?Number(this.$route.params.floorId):null}}),watch:{floorId:function(newVal,oldVal){newVal!==oldVal&&this.remount()},buildingId:function(newVal,oldVal){newVal!==oldVal&&this.remount()}},mounted:function(){null!==this.floorId?this.getFloor():this.getBuilding()},methods:{findRoute:function(){if((0,router/* isWebTabsEnabled */.tj)()){var tabType=router/* tabTypes */.VF.CUSTOM,config={type:"workplace-analytics"},_ref=(0,router/* findRouteForTab */.OD)(tabType,{config:config})||{},name=_ref.name;return name?this.$router.resolve({name:name}).href:null}return"/app/wp/workplacetreemap"},goBack:function(){
// window.history.go(-1)
this.remount();var parentPath=this.findRoute();parentPath&&(this.floorId?this.$router.push({path:"".concat(parentPath,"/").concat(this.buildingId)}):this.$router.push({path:"".concat(parentPath)}))},remount:function(){var _this=this;null!==this.floorId?this.getFloor():this.getBuilding(),this.render=!1,this.$nextTick((function(){_this.render=!0}))},getFloor:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _data$floor,params,_yield$API$post,data,_data$floor$building;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return params={floorId:_this2.floorId},_context.next=3,api/* API */.bl.post("v2/floor/details",params);case 3:_yield$API$post=_context.sent,data=_yield$API$post.data,null!==data&&void 0!==data&&null!==(_data$floor=data.floor)&&void 0!==_data$floor&&_data$floor.id&&(null!==(_data$floor$building=data.floor.building)&&void 0!==_data$floor$building&&_data$floor$building.name&&(_this2.$set(_this2.resource,"building",data.floor.building),_this2.$set(_this2.headerDetails,"header",data.floor.building.name)),_this2.$set(_this2.resource,"floor",data.floor),_this2.$set(_this2.headerDetails,"subHeader",data.floor.name));case 6:case"end":return _context.stop()}}),_callee)})))()},getBuilding:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _data$building,params,_yield$API$post2,data,_data$building$site,site;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return params={buildingId:_this3.buildingId},_context2.next=3,api/* API */.bl.post("v2/building/details",params);case 3:_yield$API$post2=_context2.sent,data=_yield$API$post2.data,null!==data&&void 0!==data&&null!==(_data$building=data.building)&&void 0!==_data$building&&_data$building.id&&(null!==(_data$building$site=data.building.site)&&void 0!==_data$building$site&&_data$building$site.id&&(site=_this3.sites.find((function(rt){return rt.id===data.building.site.id})),null!==site&&void 0!==site&&site.name&&_this3.$set(_this3.headerDetails,"header",site.name)),_this3.$set(_this3.resource,"building",data.building),_this3.$set(_this3.resource,"floor",null),_this3.$set(_this3.headerDetails,"subHeader",data.building.name));case 6:case"end":return _context2.stop()}}),_callee2)})))()}}},workplaceAnalytics_WorkPlaceFloorAnalysisvue_type_script_lang_js=WorkPlaceFloorAnalysisvue_type_script_lang_js,WorkPlaceFloorAnalysis_component=(0,componentNormalizer/* default */.Z)(workplaceAnalytics_WorkPlaceFloorAnalysisvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkPlaceFloorAnalysis=WorkPlaceFloorAnalysis_component.exports},
/***/932065:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkplaceAnalyticsStatusCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workplaceAnalytics/WorkplaceAnalyticsStatusCard.vue?vue&type=template&id=026f424e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("cardLoading",{staticClass:"status-card-loading"}):_c("el-card",{staticClass:"fc-workplace-analytics-card p0 flex",attrs:{shadow:"hover"},on:{click:function($event){return _vm.clickAction()}}},[_c("div",{staticClass:"flex",staticStyle:{"border-right":"1px solid #f4f4f4"}},[_vm.cardData.building&&_vm.cardData.building[0]&&_vm.cardData.building[0].photoId?_c("img",{staticClass:"wp-building-img-container pointer ",attrs:{src:_vm.getImage(_vm.cardData.building[0].photoId)}}):_c("InlineSvg",{staticClass:"pointer wp-building-conteriner wp-building-img-container",attrs:{src:"svgs/spacemanagement/building",iconClass:"icon icon-xxxxlg "}})],1),_c("div",{staticClass:"d-flex fc-card-item-vertical-align p15 pL20"},[_c("div",{staticClass:"flex"},[_c("div",{staticClass:"f20  fwBold"},[_vm._v(" "+_vm._s(_vm.building.name)+" ")])]),_c("div",{staticClass:"flex-middle "},[_c("div",{staticClass:"mR20 border-right-sep pR20"},[_c("inline-svg",{staticClass:"wp-secondary-icons",attrs:{src:"svgs/Sq-feet",iconClass:"icon text-center icon-xl"}}),_vm.cardData.building&&_vm.cardData.building[0]&&_vm.cardData.building[0].area?_c("div",{staticClass:"text-center wp-secodary-text"},[_vm._v(" "+_vm._s(_vm.formatCurrency(_vm.cardData.building[0].area)+" sq.ft")+" ")]):_c("div",{staticClass:"text-center wp-secodary-text"},[_vm._v(" "+_vm._s("0 sq.ft")+" ")])],1),_c("div",{staticClass:"mR20 border-right-sep pR20"},[_c("inline-svg",{staticClass:"wp-secondary-icons",attrs:{src:"svgs/Desk3",iconClass:"icon text-center icon-xl"}}),_c("div",{staticClass:"text-center wp-secodary-text"},[_vm._v(" "+_vm._s((_vm.cardData.deskCount||0)+" Desks")+" ")])],1),_c("div",{staticClass:"mR20"},[_c("inline-svg",{staticClass:"wp-secondary-icons",attrs:{src:"svgs/floor",iconClass:"icon text-center icon-xl"}}),_c("div",{staticClass:"text-center wp-secodary-text"},[_vm._v(" "+_vm._s(_vm.cardData.floorCount+" Floors")+" ")])],1)]),_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"mR20"},[_c("div",{staticClass:" f14 wp-text3 pB5"},[_vm._v(_vm._s(_vm.$t("floorplan.vacant")))]),_c("div",{staticClass:"f22 fwBold text-center"},[_vm._v(" "+_vm._s(_vm.cardData.vacant)+" ")])]),_c("div",{staticClass:"mR20"},[_c("div",{staticClass:" f14 wp-text3 pB5"},[_vm._v(_vm._s(_vm.$t("floorplan.occupied")))]),_c("div",{staticClass:"f22 fwBold text-center"},[_vm._v(" "+_vm._s(_vm.cardData.occupied)+" ")])]),_c("div",{staticClass:"mR20"},[_c("div",{staticClass:" f14 wp-text3 pB5"},[_vm._v(" "+_vm._s(_vm.$t("floorplan.occupiedPercentage"))+" ")]),_c("div",{staticClass:"f22 fwBold text-center"},[_vm._v(" "+_vm._s(_vm._f("percentage")(_vm.cardData.occupied,_vm.cardData.deskCount))+" ")])]),_c("div",{staticClass:"mR20"},[_c("div",{staticClass:" f14 wp-text3 pB5"},[_vm._v(" "+_vm._s(_vm.$t("floorplan.reservable"))+" ")]),_c("div",{staticClass:"f22 fwBold text-center"},[_vm._v(" "+_vm._s(_vm.cardData.reservable)+" ")])])])])])],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(897389),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(32284)),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),CardLoading=__webpack_require__(323957),baseUrl=__webpack_require__(420499),formatter=__webpack_require__(676240),WorkplaceAnalyticsStatusCardvue_type_script_lang_js={props:["building","floor","departments"],components:{cardLoading:CardLoading/* default */.Z},created:function(){this.init()},filters:{percentage:function(value,total){return 0===value?"0%":value?"".concat((value/total*100).toFixed(1),"%"):value}},data:function(){return{loading:!1,cardData:null}},watch:{departments:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||this.init()}},methods:{formatCurrency:function(value){return(0,formatter/* formatCurrency */.xG)(value,0)},getImage:function(photoId){return"".concat((0,baseUrl/* getBaseURL */.BS)(),"/v2/files/preview/").concat(photoId)},clickAction:function(){this.$emit("cardClicked",this.building)},init:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$floor,_data$data,params,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,params={cardContext:{cardLayout:"deskstatus_layout_1",cardParams:{title:_this.building.name,buildingId:_this.building.id,floorId:null!==(_this$floor=_this.floor)&&void 0!==_this$floor&&_this$floor.id?_this.floor.id:null,departments:_this.departments||[]}}},_context.next=4,api/* API */.bl.post("v2/dashboard/cards/getCardData",params);case 4:_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,null!==data&&void 0!==data&&null!==(_data$data=data.data)&&void 0!==_data$data&&_data$data.valueMap?_this.cardData=data.data.valueMap:error&&_this.$message.error("".concat(error.message)),_this.loading=!1,_this.$emit("dataLoaded");case 10:case"end":return _context.stop()}}),_callee)})))()}}},workplaceAnalytics_WorkplaceAnalyticsStatusCardvue_type_script_lang_js=WorkplaceAnalyticsStatusCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(workplaceAnalytics_WorkplaceAnalyticsStatusCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkplaceAnalyticsStatusCard=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/52004.js.map