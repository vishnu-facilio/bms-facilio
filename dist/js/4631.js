(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[4631],{
/***/490966:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ColumnCustomization}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/ColumnCustomization.vue?vue&type=template&id=3753cf18
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.showDialog,fullscreen:!0,"custom-class":"cc-dialog",title:_vm.$t("common._common.column_settings"),"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event}}},[_c("div",{staticClass:"scrollable",staticStyle:{padding:"20px 0","max-height":"85vh"}},[_vm.fixedFields&&_vm.fixedFields.length?_c("div",{staticClass:"fixed-column"},[_c("el-checkbox-group",{model:{value:_vm.selectedFixedColumns,callback:function($$v){_vm.selectedFixedColumns=$$v},expression:"selectedFixedColumns"}},_vm._l(_vm.fixedFields,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",staticStyle:{border:"none"},attrs:{disabled:field.disabled,label:field.fieldId}},[_vm._v(_vm._s(_vm.getDisplayName(field)))])})),1)],1):_vm._e(),_c("el-divider",{staticClass:"mT0 mB20"}),_c("el-checkbox-group",{staticClass:"fc-column-checkbox pL20 pR20 pT0 pB0",model:{value:_vm.selectedColumns,callback:function($$v){_vm.selectedColumns=$$v},expression:"selectedColumns"}},[_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.sortedFields,"data-parent":"default"}},_vm._l(_vm.sortedFields,(function(field){return _c("el-checkbox",{key:field.name,staticClass:"column-item",class:{checkboxSelected:!0===field.edit},attrs:{label:field.name,value:field.name}},[_c("el-row",[_c("el-col",{attrs:{span:1}},[_c("inline-svg",{staticClass:"vertical-middle cursor-drag icon-right column-drag-icon",staticStyle:{cursor:"-webkit-grabbing"},attrs:{src:"drag-drop",iconClass:"icon icon-sm-md"}})],1),_c("el-col",{attrs:{span:22}},[field.edit?_c("el-input",{ref:"columnRenameInp",refInFor:!0,staticClass:"fc-input-border-remove width90 column-name-change-input",attrs:{placeholder:"Change your column name",autofocus:!0},on:{blur:function($event){field.edit=!1,_vm.$emit("update")},keyup:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter"))return null;field.edit=!1,_vm.$emit("update")}},model:{value:field.columnDisplayName,callback:function($$v){_vm.$set(field,"columnDisplayName",$$v)},expression:"field.columnDisplayName"}}):_c("div",{},[_vm._v(" "+_vm._s(field.columnDisplayName)+" "),field.field&&field.field.displayName!==field.columnDisplayName?_c("span",{staticClass:"fc-grey-text12 pL5"},[_vm._v(_vm._s(field.field.displayName))]):_vm._e()])],1),_c("el-col",{staticClass:"visibility-hide-actions text-right",attrs:{span:1}},[_c("i",{staticClass:"el-icon-edit pR10 fc-grey3-text14 pL25 column-edit-icon",on:{click:function($event){return $event.stopPropagation(),$event.preventDefault(),_vm.showRenameColumn(field)}}})])],1)],1)})),1),_c("draggable",{attrs:{options:_vm.dragOptions,list:_vm.selectedlookupColumns,"data-parent":_vm.selectedLookup}},_vm._l(_vm.selectedlookupColumns,(function(field){return _c("el-checkbox",{key:field.fieldId,staticClass:"column-item",attrs:{label:field.fieldId,"data-field-id":field.fieldId},on:{change:function($event){return _vm.onLookupSelected(field)}}},[_vm._v(" "+_vm._s(field.columnDisplayName)+" ")])})),1)],1)],1),_c("div",{staticClass:"modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){_vm.showDialog=!1}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.isSaving,disabled:_vm.isSaving},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.isSaving?_vm.$t("common._common._saving"):_vm.$t("common._common._save")))])],1)])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),vuex_esm=(__webpack_require__(670560),__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(634338),__webpack_require__(339772),__webpack_require__(947522),__webpack_require__(420629)),vuedraggable_umd=__webpack_require__(909980),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),validation=__webpack_require__(990260),jquery=__webpack_require__(619755),jquery_default=__webpack_require__.n(jquery),columnConfigUtil=__webpack_require__(486613),ColumnCustomizationvue_type_script_lang_js={props:["visible","moduleName","viewName","relatedViewDetail","relatedMetaInfo","refreshRelatedList","excludeMainField"],data:function(){return{selectedColumns:[],selectedFixedColumns:[],showDialog:this.visible,sortedFields:this.allFields,nonSelectableColumns:["localId","photoId"],lookupMetaColumns:{},selectedLookup:"",dragOptions:{handle:".icon-right",ghostClass:"drag-ghost",dragClass:"custom-drag",animation:150},columnNameShow:!1,isSaving:!1,editedColumn:null}},components:{draggable:vuedraggable_umd_default()},created:function(){var _this$nonSelectableCo,nonSelectableColumns=this.$getProperty(this.columnConfig,"nonSelectableColumns");(0,validation/* isEmpty */.xb)(nonSelectableColumns)||(_this$nonSelectableCo=this.nonSelectableColumns).push.apply(_this$nonSelectableCo,(0,toConsumableArray/* default */.Z)(nonSelectableColumns));this.sortedFields=this.allFields},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({stateMetaInfo:function(state){return state.view.metaInfo},stateViewDetail:function(state){return state.view.currentViewDetail}})),{},{metaInfo:function(){var stateMetaInfo=this.stateMetaInfo,relatedMetaInfo=this.relatedMetaInfo;return(0,validation/* isEmpty */.xb)(relatedMetaInfo)?stateMetaInfo:relatedMetaInfo},viewDetail:function(){var stateViewDetail=this.stateViewDetail,relatedViewDetail=this.relatedViewDetail;return(0,validation/* isEmpty */.xb)(relatedViewDetail)?stateViewDetail:relatedViewDetail},currentView:function(){return this.viewName?this.viewName:this.$route.params.viewname?this.$route.params.viewname:"all"},columnConfig:function(){var _ref=this.$attrs||{},columnConfig=_ref.columnConfig;return(0,validation/* isEmpty */.xb)(columnConfig)?(0,columnConfigUtil/* getColumnConfig */.U)(this.moduleName):columnConfig},fixedColumns:function(){
// Will be disabled. User wont be able to select
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedColumns=columnConfig.fixedColumns;return fixedColumns}return[]},fixedSelectableColumns:function(){
// Cannot change the order
var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var fixedSelectableColumns=columnConfig.fixedSelectableColumns;return fixedSelectableColumns}return[]},availableColumns:function(){var columnConfig=this.columnConfig;if(!(0,validation/* isEmpty */.xb)(columnConfig)){var availableColumns=columnConfig.availableColumns;return availableColumns}return[]},metaColumns:function(){var _this=this,columns=[];return this.metaInfo&&this.metaInfo.fields&&this.viewDetail&&(columns=this.metaInfo.fields.map((function(field){return field.columnDisplayName=_this.viewDetail.defaultModuleFields&&_this.viewDetail.defaultModuleFields[field.name]?_this.viewDetail.defaultModuleFields[field.name].columnDisplayName:field.displayName,field}))),columns},allFields:function(){var _this2=this,viewFields=this.viewFields.filter((function(field){return 17!==_this2.$getProperty(field,"field.dataType")})),metaColumns=this.metaColumns.filter((function(field){return!_this2.viewFields.find((function(val){return val.name===field.name}))&&!(_this2.nonSelectableColumns||[]).includes(field.name)&&(!(_this2.availableColumns||{}).length||-1!==_this2.availableColumns.indexOf(field.name)||!field.default)&&17!==field.dataType})),columns=[].concat((0,toConsumableArray/* default */.Z)(viewFields),(0,toConsumableArray/* default */.Z)(metaColumns)).filter((function(field){return!(_this2.allFixedColumns||[]).includes(field.name)}));return columns},viewFields:function(){var _this3=this,columns=[];return this.viewDetail&&this.viewDetail.fields&&(columns=this.viewDetail.fields.map((function(vf){vf.name=(vf.field||{}).name||vf.fieldName,vf.fieldId=(vf.field||{}).fieldId;var defaultColumnName=_this3.viewDetail.defaultModuleFields&&_this3.viewDetail.defaultModuleFields[vf.name]?_this3.viewDetail.defaultModuleFields[vf.name].columnDisplayName:null;return vf.columnDisplayName=vf.columnDisplayName||defaultColumnName||vf.field.displayName,vf}))),columns},fixedFields:function(){var _this4=this;return this.metaColumns.filter((function(field){return(_this4.allFixedColumns||[]).includes(field.name)})).map((function(field){return field.disabled=(_this4.fixedColumns||[]).includes(field.name),field}))},allFixedColumns:function(){return(0,validation/* isEmpty */.xb)(this.fixedSelectableColumns)?this.fixedColumns:this.fixedColumns.concat(this.fixedSelectableColumns)},lookupList:function(){var _this5=this,fields=[];return(this.columnConfig||{}).lookupToShow&&this.metaColumns&&(fields=this.metaColumns.filter((function(field){return field.lookupModule&&(!_this5.columnConfig.lookupToShow.length||(_this5.columnConfig.lookupToShow||[]).includes(field.name))}))),fields},selectedlookupColumns:function(){var _this6=this;return this.lookupMetaColumns[this.selectedLookup]?this.lookupMetaColumns[this.selectedLookup].filter((function(field){return-1===_this6.sortedFields.findIndex((function(vf){return vf.fieldId===field.fieldId}))})).map((function(field){return field.columnDisplayName=field.displayName,field.parentFieldId=_this6.selectedLookupObj.fieldId,field})):[]},selectedLookupObj:function(){var _this7=this;return this.lookupList.find((function(field){return field.name===_this7.selectedLookup}))},mainField:function(){return this.metaColumns.find((function(field){return field.mainField}))}}),watch:{visible:function(val,oldVal){val&&this.reInit(),this.showDialog=val},showDialog:function(val,oldVal){this.$emit("update:visible",val)},allFields:function(val){this.sortedFields=val}},methods:{showRenameColumn:function(field){var _this8=this;this.$set(field,"edit",!0),this.$nextTick((function(){_this8.$refs["columnRenameInp"][0].focus()}))},save:function(){var _this9=this;this.isSaving=!0;var excludeMainField=this.excludeMainField,fields=[];fields=(0,validation/* isEmpty */.xb)(excludeMainField)?[{fieldId:this.mainField.id}].concat((0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}})))):(0,toConsumableArray/* default */.Z)(this.sortedFields.filter((function(sf){return(_this9.selectedColumns||[]).includes(sf.name)})).map((function(sf){return{fieldId:sf.fieldId,parentFieldId:sf.parentFieldId,columnDisplayName:sf.columnDisplayName,fieldName:sf.name||sf.fieldName}}))),fields=[].concat((0,toConsumableArray/* default */.Z)(fields),(0,toConsumableArray/* default */.Z)(this.selectedFixedColumns.map((function(id){return{fieldId:id}}))));var self=this;this.$store.dispatch("view/customizeColumns",{moduleName:this.moduleName,viewName:this.currentView,fields:fields}).then((function(){self.isSaving=!1,self.showDialog=!1,self.$emit("refreshRelatedList"),self.$message.success(self.$t("common._common.view_updated_successfully"))})).catch((function(error){_this9.$message.error(error.message||_this9.$t("common._common.error_occured"))}))},editColumn:function(){this.editedColumn=this.field},reInit:function(){var _this10=this;this.selectedLookup="",this.selectedColumns=[],this.selectedFixedColumns=[],this.viewFields.forEach((function(vf){(_this10.allFixedColumns||[]).includes(vf.name)&&-1===vf.parentFieldId?(_this10.fixedSelectableColumns||[]).includes(vf.name)&&_this10.selectedFixedColumns.push(vf.fieldId):_this10.selectedColumns.push(vf.name)}))},loadModuleMeta:function(){var _this11=this;this.selectedLookup&&!this.lookupMetaColumns[this.selectedLookup]&&this.$http.get("/module/meta?moduleName="+this.selectedLookupObj.lookupModule.name).then((function(response){_this11.$set(_this11.lookupMetaColumns,_this11.selectedLookup,response.data.meta.fields)}))},getDisplayName:function(field){var displayName=field.columnDisplayName;if(this.viewDetail&&this.viewDetail.fields){var vf=this.viewDetail.fields.find((function(vf){return vf.name===field.name}));vf&&(displayName=vf.columnDisplayName||displayName)}return displayName},onLookupSelected:function(field){this.animate(field.fieldId,(function(){this.selectedlookupColumns=this.selectedlookupColumns.filter((function(lf){return lf.fieldId!==field.fieldId})),field.columnDisplayName+=" ("+this.selectedLookupObj.displayName+")",this.sortedFields.push(field)}))},animate:function(fieldId,cbk){var $selectedElement=jquery_default()('[data-field-id="'+fieldId+'"]'),oldOffset=$selectedElement.offset();$selectedElement.appendTo(jquery_default()("[data-parent='default']"));var newOffset=$selectedElement.offset(),temp=$selectedElement.clone().appendTo("body");temp.css({position:"absolute",left:oldOffset.left,top:oldOffset.top,zIndex:3e3,width:$selectedElement[0].offsetWidth}),$selectedElement.css("visibility","hidden");var self=this;temp.animate({top:newOffset.top,left:newOffset.left},350,(function(){
// $selectedElement.css('visibility', 'visible')
$selectedElement.remove(),temp.remove(),cbk.call(self)}))}}},components_ColumnCustomizationvue_type_script_lang_js=ColumnCustomizationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ColumnCustomizationvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,ColumnCustomization=component.exports},
/***/404631:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WorkRequestList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/WorkRequestList.vue?vue&type=template&id=67a5f4c6&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("portal",{attrs:{to:"approval-list-top",slim:""}},[_c("div",{staticClass:"d-flex"},[_c("span",{staticClass:"separator mR10"},[_vm._v("|")]),_c("div",{staticClass:"mode-switcher"},_vm._l(_vm.modes,(function(mode,modeName){return _c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom",arrow:!0},expression:"{ placement: 'bottom', arrow: true }"}],key:modeName,staticClass:"mR15 cursor-pointer",class:{"is-active":mode.isActive},attrs:{title:mode.label},on:{click:function($event){_vm.selectedMode=modeName}}},[_c("inline-svg",{attrs:{src:mode.icon,"icon-class":"icon icon-md"}})],1)})),0)])]),_vm.$validation.isEmpty(_vm.list)?_c("div",{staticClass:"full-layout-white height100 m10"},[_c("div",{staticClass:"row container nowor"},[_c("div",{staticClass:"justify-center nowo fc-h100vh pT50"},[_c("div",[_c("inline-svg",{staticClass:"mB10",attrs:{src:"svgs/emptystate/workorder",iconClass:"icon text-center icon-xxxxlg height-auto"}}),_c("div",{staticClass:"nowo-label"},[_vm._v(" No Work Requests Found ")]),_c("div",{staticClass:"nowo-sublabel",staticStyle:{width:"24%"}},[_vm._v(" There are no work orders that require approval. ")])],1)])])]):"GRID"===_vm.selectedMode?_c("div",{staticClass:"fc-list-view height100vh p10 pB100"},[_c("div",{staticClass:"scrollable130-y100 fc-full-border"},_vm._l(_vm.list,(function(workorder){return _c("div",{key:workorder.id,staticClass:"workorder-row d-flex"},[_c("div",{staticClass:"pL20 d-flex",on:{click:function($event){return _vm.openSummary(workorder)}}},[_c("div",{staticClass:"text-primary mR20"},[_c("user-avatar",{attrs:{size:"md",user:workorder.requestedBy,showPopover:!0,name:!1}})],1),_c("div",{staticClass:"d-flex flex-col"},[_c("div",{staticClass:"d-flex"},[_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",animation:"shift-away",arrow:!0},expression:"{\n                  placement: 'top',\n                  animation: 'shift-away',\n                  arrow: true,\n                }"}],staticClass:"ellipsis fc-list-subject max-width300px",attrs:{title:workorder.subject}},[_vm._v(" "+_vm._s(workorder.subject)+" ")]),workorder.urgency>0?_c("div",{staticClass:"fc-tag-urgent mL10",style:{background:_vm.urgencyColorCode[workorder.urgency]}},[_vm._v(" "+_vm._s(_vm.$constants.WO_URGENCY[workorder.urgency])+" ")]):_vm._e()]),_c("div",{staticClass:"ellipsis fc-list-desc max-width500px"},[_vm._v(" "+_vm._s(workorder.description)+" ")]),_c("div",{staticClass:"width500px inline-flex flex-row align-center pT10 f13",staticStyle:{color:"#454448"}},[_c("div",{staticClass:"ellipsis fc-id"},[_vm._v("#"+_vm._s(workorder.serialNumber))]),workorder.sourceType?[_c("span",{staticClass:"separator"},[_vm._v("|")]),_c("div",{staticStyle:{color:"#2ea2b2","padding-right":"5px"}},[2===workorder.sourceType?_c("i",{staticClass:"fa fa-envelope-o"}):10===workorder.sourceType?_c("i",{staticClass:"f14 fa fa-globe"}):1===workorder.sourceType?_c("i",{staticClass:"f14 el-icon-service approval-el-icon-service"}):4===workorder.sourceType?_c("i",{staticClass:"f14 el-icon-bell approval-el-icon-bell"}):5===workorder.sourceType?_c("i",{staticClass:"f14 el-icon-date approval-el-icon-date"}):_vm._e()]),workorder.requester?_c("div",{staticClass:"pT0",staticStyle:{"padding-right":"8px",color:"#8ca1ad"}},[_vm._v(" "+_vm._s(_vm.$validation.isEmpty(workorder.requester.id)?"---":workorder.requester.name)+" ")]):_vm._e()]:_vm._e(),workorder.resource&&!_vm.$validation.isEmpty(workorder.resource.id)?_c("div",{staticClass:"fc-grey2-text12"},[_c("span",{staticClass:"separator"},[_vm._v("|")]),1===workorder.resource.resourceType?_c("img",{staticClass:"mR5",staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticClass:"mR5",staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(30684)}}),_vm._v(" "+_vm._s(workorder.resource.name)+" ")]):_vm._e()],2)])]),_c("div",{staticClass:"d-flex mL-auto width200px mR100"},[_vm.$validation.isEmpty(_vm.getApprovalStates(workorder))?_vm._e():_c("div",{staticClass:"approval-list-action-container ",on:{click:function($event){return $event.stopPropagation(),function(){}.apply(null,arguments)}}},[_c("ApprovalButtons",{staticClass:"approval-list-actions",attrs:{size:"small",moduleName:"workorder",record:workorder,availableTransitions:_vm.getApprovalStates(workorder),transformFn:_vm.transformFormData,updateUrl:_vm.updateUrl},on:{onSuccess:_vm.onTransitionSuccess,onFailure:_vm.onTransitionError}})],1),_c("div",{staticClass:"pT0"},[_c("span",{staticClass:"mT10 show"},[workorder.priority?_c("i",{staticClass:"fa fa-circle prioritytag mR5",style:{color:_vm.getTicketPriority(workorder.priority.id).colour},attrs:{"aria-hidden":"true"}}):_vm._e(),_vm._v(" "+_vm._s(workorder.priority&&workorder.priority.id>0?_vm.getTicketPriority(workorder.priority.id).displayName:"---")+" ")]),_c("div",{staticClass:"creted-time mT10"},[_c("i",{staticClass:"fa fa-clock-o fc-due-date-clock",staticStyle:{"padding-right":"5px","font-size":"15px"}}),_c("span",{staticStyle:{"font-size":"13px"}},[_vm._v(" Created "+_vm._s(_vm._f("fromNow")(workorder.createdTime))+" ")])])])])])})),0)]):_c("div",{staticClass:"fc-list-view fc-list-table-container height100vh fc-table-td-height fc-table-viewchooser p10 pB100"},[_c("div",{staticClass:"view-column-chooser",staticStyle:{top:"10px"},on:{click:function($event){_vm.showColumnSettings=!0}}},[_c("img",{staticStyle:{"text-align":"center",position:"absolute",top:"35%",right:"29%"},attrs:{src:__webpack_require__(266707)}})]),_c("el-table",{ref:"approvalList",staticClass:"width100",attrs:{data:_vm.list,height:"auto",fit:!0},on:{"row-click":_vm.goToSummary}},[_c("el-table-column",{attrs:{fixed:"",prop:"",label:"ID","min-width":"90"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"fc-id"},[_vm._v(_vm._s("#"+data.row.serialNumber))])]}}])}),_c("el-table-column",{attrs:{fixed:"",prop:"",label:"SUBJECT",width:"300"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flex-middle",attrs:{small:"",title:_vm.$getProperty(data,"row.subject")}},[_c("div",{staticClass:"fw5 ellipsis textoverflow-ellipsis width200px"},[_vm._v(" "+_vm._s(_vm.$getProperty(data,"row.subject"))+" ")])])]}}])}),_vm._l(_vm.viewColumns.filter((function(field){return!_vm.isFixedColumn(field.name)||field.parentField})),(function(field,index){return _c("el-table-column",{key:index,attrs:{prop:field.name,label:field.displayName,align:"DECIMAL"===_vm.$getProperty(field,"field.dataTypeEnum")?"right":"left","min-width":"200"},scopedSlots:_vm._u([{key:"default",fn:function(data){return["siteId"===field.name?_c("div",[_c("span",[_vm._v(" "+_vm._s(data.row.siteId?_vm.getSiteName(data.row.siteId):"---")+" ")])]):"urgency"===field.name?[_vm.getUrgency(data.row.urgency)?_c("div",{style:{color:_vm.urgencyColorCode[data.row.urgency]}},[_vm._v(" "+_vm._s(_vm.getUrgency(data.row.urgency))+" ")]):_c("div",[_vm._v("---")])]:"resource"===field.name?_c("div",{staticClass:"relative-position",staticStyle:{"min-width":"170px"}},[data.row.resource&&-1!==data.row.resource.id?_c("div",[_c("div",{staticClass:"flLeft mR7"},[1===data.row.resource.resourceType?_c("img",{staticStyle:{height:"12px",width:"14px"},attrs:{src:__webpack_require__(572902)}}):_c("img",{staticStyle:{height:"11px",width:"14px"},attrs:{src:__webpack_require__(30684)}})]),_c("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"flLeft ellipsis max-width140px",attrs:{small:"","data-position":"bottom",title:data.row.resource.name}},[_vm._v(" "+_vm._s(data.row.resource.name)+" ")])]):_c("div",[_c("span",{staticClass:"secondary-color color-d"},[_vm._v(" --- "+_vm._s(_vm.$t("maintenance.wr_list.space_asset"))+" --- ")])])]):_c("div",[_c("div",{staticClass:"table-subheading",class:{"text-right":"DECIMAL"===_vm.$getProperty(field,"field.dataTypeEnum")}},[_vm._v(" "+_vm._s(_vm.getColumnDisplayValue(field,data.row)||"---")+" ")])])]}}],null,!0)})})),_c("el-table-column",{attrs:{fixed:"right",prop:"",label:"","column-key":"actions",width:"250"},scopedSlots:_vm._u([{key:"default",fn:function(data){return[_c("div",{staticClass:"approval-list-action-container",on:{click:function($event){return $event.stopPropagation(),function(){}.apply(null,arguments)}}},[_c("ApprovalButtons",{staticClass:"approval-list-actions",attrs:{size:"small",moduleName:"workorder",record:data.row,availableTransitions:_vm.getApprovalStates(data.row),transformFn:_vm.transformFormData,updateUrl:_vm.updateUrl},on:{onSuccess:_vm.onTransitionSuccess,onFailure:_vm.onTransitionError}})],1)]}}])})],2),_c("column-customization",{attrs:{visible:_vm.showColumnSettings,moduleName:"workorder",columnConfig:_vm.columnConfig,viewName:_vm.currentView},on:{"update:visible":function($event){_vm.showColumnSettings=$event}}})],1)],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(450886),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(840889)),ViewMixin=__webpack_require__(453877),workorderTransform=__webpack_require__(112143),ColumnCustomization=__webpack_require__(490966),vuex_esm=__webpack_require__(420629),User=__webpack_require__(426803),api=__webpack_require__(32284),WorkRequestListvue_type_script_lang_js={props:["list","currentView","refreshAction","setSortConfig","setTransitionConfig","getApprovalStates","openSummary"],mixins:[ViewMixin/* default */.Z,workorderTransform/* default */.Z],components:{ApprovalButtons:ApprovalButtons/* default */.Z,ColumnCustomization:ColumnCustomization/* default */.Z,UserAvatar:User/* default */.Z},created:function(){this.init()},data:function(){return{showColumnSettings:!1,columnConfig:{fixedColumns:["serialNumber","subject"],availableColumns:[]},urgencyColorCode:{1:"#7fa5ff",2:"#f56837",3:"#e65244"},selectedMode:localStorage.getItem("fc-approval-view")||"LIST"}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({users:function(state){return state.users},groups:function(state){return state.groups},sites:function(state){return state.sites}})),(0,vuex_esm/* mapGetters */.Se)(["getTicketPriority"])),{},{modes:function(){var selectedMode=this.selectedMode;return{GRID:{icon:"svgs/grid-view",label:"Grid View",isActive:"GRID"===selectedMode},LIST:{icon:"svgs/list-view",label:"List View",isActive:"LIST"===selectedMode}}},updateUrl:function(){return"/v2/workorders/update"},tableRef:function(){return this.$refs["approvalList"]}}),watch:{list:"init",selectedMode:function(value){localStorage.setItem("fc-approval-view",value)}},methods:{init:function(){this.updateSortConfig(),this.setTransitionConfig(this.updateUrl,this.transformFormData)},updateSortConfig:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var excludedSortFields,sortConfig,sortConfigList,_yield$API$get,data,error,_ref,_ref$meta,meta;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return excludedSortFields=["assignedTo","assignedBy","assignmentGroup","createdBy","requestedBy","requester"],sortConfig={orderBy:{label:_this.$t("maintenance.wr_list.datecreated"),value:"createdTime"},orderType:"desc"},sortConfigList=[],_context.next=5,api/* API */.bl.get("/module/metafields",{moduleName:"workorder"});case 5:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error||(_ref=data||{},_ref$meta=_ref.meta,meta=void 0===_ref$meta?{}:_ref$meta,sortConfigList=(meta.fields||{}).map((function(_ref2){var name=_ref2.name;return name}))),_this.setSortConfig(sortConfig,sortConfigList,excludedSortFields);case 10:case"end":return _context.stop()}}),_callee)})))()},onTransitionSuccess:function(){this.refreshAction()},onTransitionError:function(){this.$message.error("Could not update Work Order")},goToSummary:function(row,col){["selection","actions"].includes(col.columnKey)||this.openSummary(row)},getSiteName:function(siteId){var site=(this.sites||[]).find((function(_ref3){var id=_ref3.id;return id===siteId}));return site?site.name:"---"},getUrgency:function(value){var urgency=this.$constants.WO_URGENCY[value];return urgency}}},components_WorkRequestListvue_type_script_lang_js=WorkRequestListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_WorkRequestListvue_type_script_lang_js,render,staticRenderFns,!1,null,"67a5f4c6",null)
/* harmony default export */,WorkRequestList=component.exports},
/***/266707:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"aa8bf7d214fbcc77945abad62903a613.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/4631.js.map