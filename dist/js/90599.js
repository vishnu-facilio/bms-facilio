(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[90599],{
/***/919324:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return CodeMirror}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/CodeMirror.vue?vue&type=template&id=f33b888a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("codemirror",{attrs:{options:_vm.cmOption,placeholder:_vm.placeholder},on:{input:_vm.onCmCodeChange,ready:_vm.onCmReady,focus:_vm.onCmFocus},model:{value:_vm.script,callback:function($$v){_vm.script=$$v},expression:"script"}})],1)},staticRenderFns=[],vue_codemirror=__webpack_require__(375055),CodeMirrorvue_type_script_lang_js=(__webpack_require__(304631),__webpack_require__(471707),__webpack_require__(959372),__webpack_require__(620017),__webpack_require__(796876),__webpack_require__(988386),{data:function(){return{script:null,cmOption:{tabSize:4,styleActiveLine:!0,mode:"text/javascript",theme:"default",lineNumbers:!0,line:!0,matchBrackets:!0,foldGutter:!0,placeholder:!1,hintOptions:{completeSingle:!1},showCursorWhenSelecting:!0}}},props:["value","options","placeholder"],components:{codemirror:vue_codemirror.codemirror},computed:{codemirror:function(){return this.$refs.myCm.codemirror}},watch:{value:{handler:function(){this.script=this.$helpers.cloneObject(this.value),this.options&&Object.assign(this.cmOption,this.options)},immediate:!0}},methods:{onCmReady:function(cm){},onCmFocus:function(cm){},onCmCodeChange:function(newCode){this.$emit("input",newCode)},addCode:function(code){this.script=this.script+="\n"+code+"\n"},onCmScroll:function(){}}}),components_CodeMirrorvue_type_script_lang_js=CodeMirrorvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_CodeMirrorvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,CodeMirror=component.exports},
/***/436756:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FDialogNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FDialogNew.vue?vue&type=template&id=388b7f7a
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"costdialog",class:["f-dialog",_vm.customClass],attrs:{visible:_vm.visible,"before-close":_vm.close,width:_vm.width,"append-to-body":!0},on:{"update:visible":function($event){_vm.visible=$event}}},[_c("div",{staticClass:"f-dialog-title",attrs:{slot:"title"},slot:"title"},[_vm._t("header",(function(){return[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.title)+" ")])]}))],2),_c("div",{staticClass:"f-dialog-content",style:_vm.styleCss},[_vm._t("content"),_vm._t("default")],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.close}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.save}},[_vm._v(_vm._s(_vm.loading?_vm.loadingTitle||"Saving...":_vm.confirmTitle||"Save"))])],1)]}))],2)])},staticRenderFns=[],FDialogNewvue_type_script_lang_js={props:["title","confirmTitle","visible","customClass","width","maxHeight","stayOnSave","loading","loadingTitle","record"],computed:{styleCss:function(){return this.maxHeight?{"max-height":this.maxHeight,overflow:"scroll"}:null}},methods:{close:function(){this.$emit("close"),this.$emit("update:visible",!1)},save:function(){this.$emit("save"),this.stayOnSave||this.$emit("update:visible",!1)}}},components_FDialogNewvue_type_script_lang_js=FDialogNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FDialogNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FDialogNew=component.exports},
/***/507008:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPopover}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FPopover.vue?vue&type=template&id=878762a4
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:_vm.getRef,attrs:{"popper-class":"f-popover",width:_vm.width||""===_vm.width?_vm.width:280,placement:_vm.placement,trigger:_vm.trigger||"click",hide:"hide"},on:{show:function(){return _vm.$emit("show")}},model:{value:_vm.showpopover,callback:function($$v){_vm.showpopover=$$v},expression:"showpopover"}},[_c("div",{staticClass:"fc-popover-content"},[_vm._t("header",(function(){return[_c("div",{staticClass:"title uppercase f12 bold",staticStyle:{"letter-spacing":"1.1px",color:"#000000"}},[_vm._v(" "+_vm._s(_vm.title)+" ")])]})),_c("div",[_vm._t("content")],2)],2),_c("div",{staticClass:"f-footer row",staticStyle:{height:"46px"}},[_vm._t("footer",(function(){return[_c("button",{staticClass:"footer-btn footer-btn-secondary col-6",attrs:{type:"button"},on:{click:_vm.cancel}},[_c("span",[_vm._v(_vm._s(_vm.$t("setup.users_management.cancel")))])]),_c("button",{staticClass:"footer-btn footer-btn-primary col-6",attrs:{type:"button"},on:{click:_vm.save}},[_c("span",[_vm._v(_vm._s(_vm.confirmTitle?_vm.confirmTitle:_vm.$t("common._common.ok")))])])]}))],2),_c("template",{slot:"reference"},[_vm._t("reference")],2)],2)},staticRenderFns=[],FPopovervue_type_script_lang_js={props:["popperClass","placement","value","popperRef","trigger","title","width","maxHeight","confirmTitle"],data:function(){return{showpopover:!1}},watch:{showpopover:function(val){null!=this.value&&this.$emit("input",val)},value:function(val){this.showpopover=val}},mounted:function(){var element=this.$refs[this.getRef].$el;if(this.popperClass&&element.firstElementChild.classList.add(this.popperClass),this.maxHeight){var content=element.querySelector(".fc-popover-content");content.classList.add("scrollable"),content.style["max-height"]=this.maxHeight+"px"}},computed:{getRef:function(){return this.popperRef?this.popperRef:"fpopup"}},methods:{save:function(){this.showpopover=!1,this.$emit("save")},cancel:function(){this.showpopover=!1,this.$emit("close")},hide:function(){this.$emit("hide")}}},components_FPopovervue_type_script_lang_js=FPopovervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FPopovervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FPopover=component.exports},
/***/786100:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Layout}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/energy/analytics/Layout.vue?vue&type=template&id=5bb314ab
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"analystics-layout row height100"},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"height100 layoutWhite ensidebar"},[_c("div",{staticClass:"analytics-header-title"},[_vm._v("Analytics")]),_c("div",{staticClass:"scrollable",staticStyle:{"padding-bottom":"100px"}},[_vm._l(_vm.subheaderMenu,(function(category,cidx){return _c("div",{key:cidx,staticClass:"analytics-sidebar-category"},[_c("div",{staticStyle:{"padding-left":"20px"}},["energy"===category.icon?_c("img",{staticStyle:{width:"18px",float:"left","margin-right":"8px"},attrs:{src:__webpack_require__(875819)}}):"reading"===category.icon?_c("img",{staticStyle:{width:"18px",float:"left","margin-right":"8px"},attrs:{src:__webpack_require__(305482)}}):_vm._e(),_c("span",[_vm._v(" "+_vm._s(category.label)+" ")])]),_c("div",{staticClass:"analytics-sidebar-menulist"},_vm._l(category.menu,(function(menu,index){return _c("router-link",{key:index,staticClass:"analytics-sidebar-menu",attrs:{to:menu.path,title:menu.label,tag:"div"}},[_vm._v(" "+_vm._s(menu.label)+" ")])})),1)])})),"/app/em/oldanalytics/reading"===this.$route.path?_c("derivation",{attrs:{type:5,isOld:!0}}):_vm._e()],2)]),_c("router-view",{staticClass:"analytic-summary"})],1)])},staticRenderFns=[],Derivationvue_type_template_id_72e087be_render=(__webpack_require__(564043),__webpack_require__(857267),function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{attrs:{id:"f-derivation"}},[_c("div",{staticClass:"derivation-sidebar-category",style:{"padding-top":_vm.isOld?"20px":""}},[_c("div",{style:{"padding-left":_vm.isOld?"20px":"21px"}},[_vm.isOld?_c("img",{staticStyle:{width:"18px",float:"left","margin-right":"8px"},attrs:{src:__webpack_require__(209943)}}):_vm._e(),_c("span",[_vm._v("Derivations")]),_c("span",{staticClass:"flRight dervn-add pointer",attrs:{slot:"reference"},on:{click:_vm.showAddWorkflow},slot:"reference"},[_vm._v("+ADD")])]),_c("div",{staticClass:"derivation-sidebar-menulist"},[_vm.loading?_c("div",[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1):_vm._l(_vm.derivations,(function(derivation,idx){return _c("div",{key:derivation.id,staticClass:"derivation-sidebar-menu"},[derivation.selected?_c("div",{staticClass:"flLeft dervn-selected"},[_c("i",{staticClass:"el-icon-check dervn-color",on:{click:function($event){return _vm.derivationSelected(derivation)}}})]):_vm._e(),_c("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ellipsis inline flLeft",staticStyle:{"max-width":"62%"},attrs:{title:derivation.name}},[_vm._v(" "+_vm._s(derivation.name)+" ")]),_c("div",{staticClass:"inline pL10 dervn-edit pointer"},[_c("i",{staticClass:"el-icon-edit dervn-color",on:{click:function($event){return _vm.showEditWorkflow(derivation)}}})]),_c("div",{staticClass:"inline pointer  dervn-delete pL10"},[_c("i",{staticClass:"el-icon-delete dervn-color",on:{click:function($event){return _vm.deleteDerivation(derivation.id,idx)}}})]),derivation.selected?_vm._e():_c("div",{staticClass:"flRight dervn-select",on:{click:function($event){return _vm.derivationSelected(derivation)}}},[_c("i",{staticClass:"el-icon-plus dervn-color"})])])}))],2)]),_vm.showForm?_c("f-dialog",{attrs:{visible:_vm.showForm,width:"38%",title:(_vm.isNew?"Add":"Edit")+" Derivation"},on:{"update:visible":function($event){_vm.showForm=$event},save:_vm.save,close:_vm.reset}},[_c("div",{attrs:{slot:"content"},slot:"content"},[_c("div",[_vm._v("Derivation Name")]),_c("el-input",{staticClass:"pB20",attrs:{placeholder:_vm.$t("common._common.enter_name")},model:{value:_vm.newderivation.name,callback:function($$v){_vm.$set(_vm.newderivation,"name",$$v)},expression:"newderivation.name"}}),_c("formula",{attrs:{module:"formulaField",hideModeChange:!0},model:{value:_vm.newderivation.workflow,callback:function($$v){_vm.$set(_vm.newderivation,"workflow",$$v)},expression:"newderivation.workflow"}})],1)]):_vm._e()],1)}),Derivationvue_type_template_id_72e087be_staticRenderFns=[],esm_typeof=__webpack_require__(103336),FFormulaBuilder=(__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(648324),__webpack_require__(902294)),FDialogNew=__webpack_require__(436756),Derivationvue_type_script_lang_js={props:["type","isOld"],
// isOld temporary until new analytics is finished
components:{Formula:FFormulaBuilder/* default */.Z,FDialog:FDialogNew/* default */.Z},data:function(){return{newderivation:{name:"",workflow:null,analyticsType:this.type},loading:!1,showForm:!1,derivations:[],selectedDerivations:[],
// For report
isNew:!0,selectedDerivation:null}},mounted:function(){this.loadDerivations()},computed:{initialDerivations:function(){return this.$route.query.derivations?JSON.parse(this.$route.query.derivations):[]}},methods:{loadDerivations:function(){var _this=this;this.loading=!0,this.$http.post("/dashboard/derivationList",{type:this.type}).then((function(response){if(_this.loading=!1,_this.derivations=response.data.derivations||[],_this.initialDerivations.length){_this.selectedDerivations=_this.initialDerivations;var initialIds=_this.initialDerivations.map((function(d){return d.id}));_this.derivations=_this.derivations.map((function(d){return initialIds.includes(d.id)&&_this.$set(d,"selected",!0),d}))}}))},derivationSelected:function(derivation,isId){isId&&(derivation=this.derivations.find((function(d){return d.id===derivation})));var idx=this.selectedDerivations.findIndex((function(d){return d.id===derivation.id})),query={};if(-1!==idx?(this.$set(derivation,"selected",!1),this.selectedDerivations.splice(idx,1)):(this.$set(derivation,"selected",!0),this.selectedDerivations.push(derivation)),this.selectedDerivations.length){var param=this.selectedDerivations.map((function(d){return{id:d.id,name:d.name,workflowId:d.workflowId}}));query={derivations:JSON.stringify(param)}}this.$router.push({query:query})},save:function(){var url,derivation,_this2=this;this.isNew?(url="addDerivation",derivation=this.newderivation):(url="updateDerivation",derivation=this.$helpers.compareObject(this.newderivation,this.selectedDerivation),derivation.id=this.selectedDerivation.id),this.$http.post("/dashboard/"+url,{derivation:derivation}).then((function(response){if("object"===(0,esm_typeof/* default */.Z)(response.data)){var newDerivation=response.data.derivation;if(_this2.isNew)_this2.derivations.push(newDerivation);else{var idx=_this2.derivations.findIndex((function(d){return d.id===newDerivation.id}));_this2.derivations[idx]=newDerivation}_this2.reset(),_this2.derivationSelected(newDerivation)}else _this2.$message.error(_this2.isNew?"Derivation addition failed":"Derivation updation failed")}))},deleteDerivation:function(id,idx){var _this3=this;this.$dialog.confirm({title:"Delete Derivation",message:"Are you sure you want to delete this derivation?",rbDanger:!0,rbLabel:"Delete"}).then((function(value){value&&_this3.$http.post("/dashboard/deleteDerivation",{id:[id]}).then((function(response){"object"===(0,esm_typeof/* default */.Z)(response.data)?(_this3.derivations.splice(idx,1),_this3.$message.success("Derivation deleted successfully")):_this3.$message.error("Derivation cannot be deleted")}))}))},reset:function(){this.newderivation.workflow=null,this.newderivation.name=""},showAddWorkflow:function(){this.isNew=!0,this.newderivation.name="",this.newderivation.workflow=null,this.showForm=!0},showEditWorkflow:function(derivation){this.isNew=!1,this.selectedDerivation=derivation,this.newderivation.name=derivation.name,this.newderivation.workflow=this.$helpers.cloneObject(derivation.workflow),this.showForm=!0}}},analytics_Derivationvue_type_script_lang_js=Derivationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(analytics_Derivationvue_type_script_lang_js,Derivationvue_type_template_id_72e087be_render,Derivationvue_type_template_id_72e087be_staticRenderFns,!1,null,null,null)
/* harmony default export */,Derivation=component.exports,Layoutvue_type_script_lang_js={title:function(){return"Analytics"},data:function(){return{subheaderMenu:[{label:"Energy",icon:"energy",menu:[{label:"Consumption Analysis",path:{path:"/app/em/oldanalytics/consumption"}},{label:"Load Analysis",path:{path:"/app/em/oldanalytics/load"}},{label:"Heatmap Analysis",path:{path:"/app/em/oldanalytics/heatmap"}},{label:"Peak Energy Analysis",path:{path:"/app/em/oldanalytics/peakenergy"}},{label:"EnPI Analysis",path:{path:"/app/em/oldanalytics/enpi"}},{label:"Regression Analysis",path:{path:"/app/em/oldanalytics/regression"}}]},{label:"Reading",icon:"reading",menu:[{label:"Reading Analysis",path:{path:"/app/em/oldanalytics/reading"}}]}]}},components:{Derivation:Derivation},mounted:function(){this.init()},watch:{$route:function(from,to){this.init()}},methods:{init:function(){"/app/em/oldanalytics"!==this.$route.path&&"/app/em/oldanalytics/"!==this.$route.path||this.$router.replace({path:"/app/em/oldanalytics/consumption"})}}},analytics_Layoutvue_type_script_lang_js=Layoutvue_type_script_lang_js,Layout_component=(0,componentNormalizer/* default */.Z)(analytics_Layoutvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Layout=Layout_component.exports},
/***/875819:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"16948dce226b1aa72f2a851c44a2c105.svg";
/***/},
/***/305482:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"33e2c05ac703b6f51071b805a18eb625.svg";
/***/},
/***/209943:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"5b628a2f6d2ac37abe6923b81fc2f31c.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/90599.js.map