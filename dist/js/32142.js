(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[32142],{
/***/350367:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FUploadPhotos}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/FUploadPhotos.vue?vue&type=template&id=5a0f9682
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{staticClass:"upload-photos-dialog fc-dialog-center-container",attrs:{title:"Upload Photos",visible:_vm.showDialog,"append-to-body":!0},on:{"update:visible":function($event){_vm.showDialog=$event},"before-close":_vm.closeDialog}},[_vm.showDialog?_c("el-upload",{attrs:{multiple:"","list-type":"picture-card","file-list":_vm.photos,action:"",accept:"image/*","http-request":_vm.onUpload,"on-success":_vm.onUploadSuccess,"on-error":_vm.onError,"on-remove":_vm.onRemove}},[_c("i",{staticClass:"el-icon-plus"})]):_vm._e(),_c("span",{staticClass:"dialog-footer modal-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:_vm.closeDialog}},[_vm._v("Cancel")]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:_vm.done}},[_vm._v("Done")])],1)],1)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),validation=(__webpack_require__(434284),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(990260)),eventBus=__webpack_require__(398011),FUploadPhotosvue_type_script_lang_js={props:["module","record","list"],data:function(){return{photos:[],showDialog:!1,isChanged:!1}},methods:{open:function(){this.photos=(0,validation/* isEmpty */.xb)(this.list)?[]:this.list,this.showDialog=!0},onUpload:function(_ref){var file=_ref.file,data=(_ref.onError,{parentId:this.record.id,module:this.module}),formData=new FormData;for(var key in formData.append("file",file,file.name),data)this.$helpers.setFormData(key,data[key],formData);return this.$http.post("v2/photos/upload",formData)},onUploadSuccess:function(response){var _response$data=response.data,responseCode=_response$data.responseCode,result=_response$data.result;0===responseCode&&(this.list.push(result.photos[0]),this.isChanged=!0)},onError:function(){this.$message.error(this.$t("setup.users_management.Invalid_image"))},onRemove:function(file){var _this=this;this.$http.post("/v2/photos/delete",{id:file.id,photoId:file.photoId,module:this.module,parentId:this.record.id}).then((function(response){if(0===response.data.responseCode){var list=(0,toConsumableArray/* default */.Z)(_this.list),index=list.findIndex((function(f){return f.id===file.id}));list.splice(index,1),_this.$emit("updatePhotos",list),_this.isChanged=!0}})).catch((function(){}))},done:function(){this.showDialog=!1,this.photos=[],this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1)},closeDialog:function(){this.isChanged&&(eventBus/* eventBus */.Y.$emit("refreshDetails"),this.isChanged=!1),this.showDialog=!1}}},components_FUploadPhotosvue_type_script_lang_js=FUploadPhotosvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FUploadPhotosvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FUploadPhotos=component.exports},
/***/372587:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return SpaceAssetChooser}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/SpaceAssetChooser.vue?vue&type=template&id=daefb110
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-dialog",{attrs:{visible:_vm.visibility,fullscreen:!1,open:"top","custom-class":" fc-dialog-up spaceassetchooser setup-dialog60","append-to-body":!0,"before-close":_vm.handleclose},on:{"update:visible":function($event){_vm.visibility=$event}}},[_c("div",{attrs:{id:"spaceassetchooser"}},[_c("div",{staticStyle:{height:"600px","max-height":"600px"}},[_vm.hideSidebar?_vm._e():_c("div",{staticClass:"sidebar",staticStyle:{height:"100%",width:"33%",display:"inline-block"}},[_c("div",{staticClass:"pT30",staticStyle:{"margin-left":"30px","z-index":"100"}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-right":"30px"},attrs:{disabled:"asset"===_vm.picktype},on:{click:function($event){"asset"!==_vm.picktype&&_vm.openSpace()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"normalspace":"selectedspace"})]),_c("div",{staticClass:"txtstyle pointer flLeft",staticStyle:{"padding-left":"5px"}},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"flLeft",attrs:{disabled:"space"===_vm.picktype},on:{click:function($event){"space"!==_vm.picktype&&_vm.openAsset()}}},[_c("div",{staticClass:"flLeft",staticStyle:{"padding-top":"1px"}},[_c("i",{staticClass:"el-icon-circle-check",class:_vm.isAsset?"selectedspace":"normalspace"})]),_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"txtstyle pointer",staticStyle:{"padding-left":"5px"}},[_vm._v(_vm._s(_vm.$t("common.space_asset_chooser.asset")))])]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticClass:"clearboth"})]),_c("div",{staticStyle:{"margin-left":"30px"}},[_c("div",{staticClass:"space-heading pT30 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_location"))+" ")]),_vm._l(_vm.resourceConfig,(function(field){return _c("div",{key:field.spaceType,staticClass:"pB15"},[_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:field.placeHolder,"data-test-selector":""+field.placeHolder,disabled:4===field.spaceType&&!_vm.isAsset||field.disabled},on:{change:function($event){return _vm.onLocationSelected(field)}},model:{value:field.value,callback:function($$v){_vm.$set(field,"value",$$v)},expression:"field.value"}},_vm._l(field.options,(function(option){return _c("el-option",{key:option.id,attrs:{label:option.name,value:option.id,"data-test-selector":field.placeHolder+"_"+option.name}})})),1)],1)})),_c("div",{staticClass:"pT30"},[_c("div",{staticClass:"space-heading pT15 pB5"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.by_category"))+" ")]),_c("div",[_vm.isAsset?_c("el-select",{attrs:{filterable:"",clearable:"",placeholder:_vm.assetCategory.placeHolder,"data-test-selector":""+_vm.$t("common.space_asset_chooser.by_category"),disabled:!_vm.isAsset},on:{change:_vm.onCategorySelected},model:{value:_vm.assetCategory.value,callback:function($$v){_vm.$set(_vm.assetCategory,"value",$$v)},expression:"assetCategory.value"}},_vm._l(_vm.assetCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value,"data-test-selector":_vm.$t("common.space_asset_chooser.by_category")+"_"+label}})})),1):_c("el-select",{staticClass:"inline asset-category fc-input-full-border2",attrs:{filterable:"",clearable:"",placeholder:_vm.spaceCategory.placeHolder},on:{change:_vm.onSpaceCategorySelected},model:{value:_vm.spaceCategory.value,callback:function($$v){_vm.$set(_vm.spaceCategory,"value",$$v)},expression:"spaceCategory.value"}},_vm._l(_vm.spaceCategory.options,(function(label,value){return _c("el-option",{key:value,attrs:{label:label,value:value}})})),1)],1)])],2)]),_c("div",{staticClass:"pull-right heightlist",style:{width:_vm.hideSidebar?"100%":"67%"}},[_c("div",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[_vm.showQuickSearch?_c("div",{staticStyle:{display:"inline-block",width:"100%"}},[_c("div",{staticClass:"col-6 fc-list-search"},[_c("div",{staticClass:"fc-list-search-wrapper relative chooser-search"},[_c("svg",{staticClass:"search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"}},[_c("title",[_vm._v(_vm._s(_vm.$t("common._common.search")))]),_c("path",{attrs:{d:"M21.487 22.927l7.037 7.037c.473.473 1.238.475 1.71.003s.47-1.237-.003-1.71l-7.037-7.037c3.96-4.82 3.675-11.967-.846-16.487C17.539-.076 9.757-.092 4.966 4.699S.191 17.272 5 22.081c4.52 4.52 11.667 4.805 16.487.846zM6.679 6.413c3.848-3.848 10.099-3.836 13.962.027s3.875 10.114.027 13.962c-3.848 3.848-10.099 3.836-13.962-.027S2.831 10.261 6.679 6.413z"}})]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.quickSearchQuery,expression:"quickSearchQuery"}],ref:"quickSearchQuery",staticClass:"quick-search-input",attrs:{autofocus:"autofocus",type:"text",placeholder:"Search"},domProps:{value:_vm.quickSearchQuery},on:{keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?null:_vm.loadResourceData.apply(null,arguments)},input:function($event){$event.target.composing||(_vm.quickSearchQuery=$event.target.value)}}}),_c("svg",{staticClass:"close-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","aria-hidden":"true"},on:{click:_vm.toggleQuickSearch}},[_c("title",[_vm._v("close")]),_c("path",{attrs:{d:"M17.992 16l8.796-8.796a1.409 1.409 0 0 0-1.992-1.992L16 14.008 7.204 5.212a1.409 1.409 0 0 0-1.992 1.992L14.008 16l-8.796 8.796a1.409 1.409 0 0 0 1.992 1.992L16 17.992l8.796 8.796a1.409 1.409 0 0 0 1.992-1.992L17.992 16z"}})])])])]):_c("div",{staticClass:"flex-middle justify-content-space"},[_c("span",{staticClass:"spaceheading",staticStyle:{display:"inline-block"}},[_vm._v(_vm._s(_vm.isAsset?this.$t("common.space_asset_chooser.asset_list"):this.$t("common.space_asset_chooser.space_list")))]),_c("span",{staticClass:"pull-right pointer"},[_c("span",{on:{click:_vm.toggleQuickSearch}},[_c("i",{staticClass:"el-icon-search"})])])])]),_c("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:_vm.loadMores,expression:"loadMores"}],staticClass:"scroll",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[_c("v-infinite-scroll",{staticStyle:{"max-height":"500px",height:"500px","overflow-y":"scroll"},attrs:{loading:_vm.loading,offset:20},on:{bottom:_vm.nextPage}},[_c("table",{staticClass:" pT15 fc-list-view-table"},[_c("thead",[_c("tr",{staticClass:"tablerow pT30",staticStyle:{"background-color":"#ffffff",padding:"15px"}},[_c("td",{staticClass:"headerrow width30"},[_vm._v(" #"+_vm._s(_vm.$t("common._common.id"))+" ")]),_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.name"))+" ")]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"headerrow width30"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.category"))+" ")]),_c("td"),_c("td")])]),_c("tbody",[_vm._l(_vm.spaceList,(function(space){return _vm.isAsset?_vm._e():_c("tr",{key:space.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===space},attrs:{"data-test-selector":""+space.name},on:{click:function($event){return _vm.select(space,1)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v(" #"+_vm._s(1==space.spaceType?"SI"+space.id:2==space.spaceType?"BU"+space.id:3==space.spaceType?"FL"+space.id:4==space.spaceType?"SP"+space.id:space.id)+" ")]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.name))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(space.spaceTypeVal))]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===space?"visible":"hidden"}})])])})),_vm._l(_vm.assetList,(function(asset){return _vm.isAsset?_c("tr",{key:"asset_"+asset.id,staticClass:"tablerow",class:{selectedrow:_vm.selectedObj===asset},attrs:{"data-test-selector":""+asset.name},on:{click:function($event){return _vm.select(asset,2)}}},[_c("td",{staticClass:"contentrow width30"},[_vm._v("#"+_vm._s(asset.id))]),_c("td",{staticClass:"contentrow width30"},[_vm._v(_vm._s(asset.name))]),_vm.hideSidebar?_vm._e():_c("td",{staticClass:"contentrow width30"},[_vm._v(" "+_vm._s(asset.category?_vm.getAssetCategory(asset.category.id).displayName:"---")+" ")]),_c("td"),_c("td",[_c("i",{staticClass:"el-icon-check",staticStyle:{color:"#39b2c2","padding-left":"20px"},style:{visibility:_vm.selectedObj===asset?"visible":"hidden"}})])]):_vm._e()})),_vm.spaceList.length<1&&_vm.assetList.length<1?_c("tr",{staticStyle:{background:"none",border:"none","margin-top":"20px"}},[_c("td",{staticClass:"text-center label-txt-black",staticStyle:{"border-bottom":"none","font-size":"14px","padding-top":"40px",cursor:"auto"},attrs:{colspan:"100%"}},[_vm._v(" No "+_vm._s(_vm.isAsset?"Asset":"Space")+" to display! ")])]):_vm._e()],2)])])],1),_c("div",{staticClass:"space-asset-footer"},[_c("div",{staticClass:"space-asset-footer-align"},[_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold",border:"2px solid #cde2e5",color:"#8eb1b6","letter-spacing":"0.5px",padding:"8px",width:"100px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_cancel"},on:{click:_vm.handleclose}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticStyle:{"font-size":"13px","font-weight":"bold","letter-spacing":"0.5px","background-color":"#39b2c2","border-color":"#39b2c2",padding:"8px","text-transform":"uppercase"},attrs:{"data-test-selector":"SpaceAsset_save",type:"primary"},on:{click:_vm.associate}},[_vm._v(_vm._s(_vm.$t("common._common.select")))])],1)])])]),_c("div",{staticStyle:{position:"absolute",top:"40%",left:"55%","z-index":"5"}},[_c("spinner",{attrs:{show:_vm.resourceLoading,size:"70"}})],1)])])},staticRenderFns=[],objectSpread2=__webpack_require__(595082),vue_infinite_scroll=__webpack_require__(49026),vue_infinite_scroll_default=__webpack_require__.n(vue_infinite_scroll),ResourceMixin=__webpack_require__(22637),v_infinite_scroll=__webpack_require__(561364),v_infinite_scroll_default=__webpack_require__.n(v_infinite_scroll),Spinner=__webpack_require__(604947),vuex_esm=__webpack_require__(420629),SpaceAssetChooservue_type_script_lang_js={mixins:[ResourceMixin/* default */.Z],props:["visibility","appendToBody","query","picktype","hideSidebar","isService"],directives:{infiniteScroll:vue_infinite_scroll_default()},components:{Spinner:Spinner/* default */.Z,VInfiniteScroll:v_infinite_scroll_default()},data:function(){return{fetchingMore:!1,selected:!1,selectedObj:{},showQuickSearch:!1}},created:function(){this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadSpaceCategory")},mounted:function(){
// quickSearchQuery
"asset"===this.picktype&&(this.isAsset=!0),this.initResourceData()},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getAssetCategory"])),{},{scrollDisabled:function(){return!1}}),component:{Spinner:Spinner/* default */.Z},watch:{visibility:function(val){var _this=this;val&&!this.query?(this.reInit(),this.hideSidebar&&(this.showQuickSearch=!0,this.$nextTick((function(){_this.$refs.quickSearchQuery&&_this.$refs.quickSearchQuery.focus()})))):val||!this.query||this.selectedObj&&this.selectedObj.id||this.$emit("associate",{},this.isAsset?"asset":"space")},query:function(val){var _this2=this;this.quickSearchQuery=val,val&&this.$refs.quickSearchQuery&&(this.selectedObj={},this.showQuickSearch=!0,this.$nextTick((function(){_this2.$refs.quickSearchQuery.focus()})),this.loadResourceData())}},methods:{loadMores:function(){this.fetchingMore=!0,this.openAsset(!0)},reInit:function(){this.showQuickSearch=!1,this.quickSearchQuery=null,this.paging.page=1,this.checkAndInitResourceData()},handleclose:function(){this.$emit("update:visibility",!1)},openSpace:function(){this.isAsset=!1,this.paging.page=1,this.loadSpace()},openAsset:function(isLoad){this.isAsset=!0,this.paging.page=1,this.loadAsset(isLoad)},select:function(obj,type){this.selectedObj=obj},associate:function(){this.$emit("associate",this.selectedObj,this.isAsset?"asset":"space")},toggleQuickSearch:function(){var _this3=this;this.showQuickSearch=!this.showQuickSearch,this.showQuickSearch?this.$nextTick((function(){_this3.$refs.quickSearchQuery.focus()})):(this.quickSearchQuery=null,this.loadResourceData())}}},components_SpaceAssetChooservue_type_script_lang_js=SpaceAssetChooservue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_SpaceAssetChooservue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,SpaceAssetChooser=component.exports},
/***/479776:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkorderTimer}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/WorkorderTimer.vue?vue&type=template&id=744e77af
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.workorder?_c("div",{staticClass:"wo-timer fc__wo__sum__timer",staticStyle:{"min-height":"45px"}},[!_vm.workorder.loadTimer||_vm.loading?[_c("spinner",{attrs:{show:!0,size:"40"}})]:_vm.workorder.moduleState&&_vm.$store.getters.getTicketStatus(_vm.workorder.moduleState.id,"workorder").timerEnabled?[_c("timer",{staticClass:"alarm-timer p10 wip",attrs:{time:_vm.time}})]:_vm.workorder.moduleState&&_vm.workorder.moduleState.id||"Work in Progress"!==_vm.workorder.status.status?_vm.time?[_vm.actualWorkDurationField?_c("static-timer",{staticClass:"alarm-timer p10 static",attrs:{time:_vm.time,static:!0,twoDigits:"true",duration:_vm.duration}}):_vm._e()]:[_c("div",{staticClass:"fc-timer p10 nothing static"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"t-hours"},[_c("div",{staticClass:"t-label"},[_vm._v(_vm._s("00"))]),_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.hour"))+" ")])]),_c("span",{staticClass:"t-separate"},[_vm._v(":")]),_c("div",{staticClass:"t-mins"},[_c("div",{staticClass:"t-label"},[_vm._v(_vm._s("00"))]),_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.min"))+" ")])]),_c("span",{staticClass:"t-separate pL13"},[_vm._v(":")]),_c("div",{staticClass:"t-secs"},[_c("div",{staticClass:"t-label"},[_vm._v(_vm._s("00"))]),_c("div",{staticClass:"t-sublabel uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.sec"))+" ")])])])])]:[_c("timer",{attrs:{vclass:"alarm-timer p10 wip",time:_vm.time}})]],2):_vm._e()},staticRenderFns=[],Timer=__webpack_require__(114857),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),WorkorderTimervue_type_script_lang_js={props:["actualWorkDurationField","loading"],components:{Timer:Timer/* default */.Z,StaticTimer:Timer/* default */.Z},watch:{workorder:{handler:function(){},deep:!0}},created:function(){this.$store.dispatch("loadTicketStatus","workorder")},computed:{time:function(){if(this.workorder.loadTimer){var time=this.workorder.actualWorkStart>this.workorder.resumedWorkStart?this.workorder.actualWorkStart:this.workorder.resumedWorkStart,duration=this.workorder.actualWorkDuration;return time=time>-1?time:moment_timezone_default()().tz(this.$timezone).valueOf(),duration=1e3*(duration>-1?duration:0),time-duration}return moment_timezone_default()().tz(this.$timezone).valueOf()},duration:function(){var actualWorkDurationField=this.actualWorkDurationField;if(this.workorder.loadTimer){var duration=this.workorder.actualWorkDuration;return duration=duration>-1?duration:0,this.$helpers.getDurationInSecs(duration,(null===actualWorkDurationField||void 0===actualWorkDurationField?void 0:actualWorkDurationField.unit)||"s")}return 0},workorder:function(){return this.$store.state.workorder.currentWorkOrder}}},components_WorkorderTimervue_type_script_lang_js=WorkorderTimervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_WorkorderTimervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkorderTimer=component.exports},
/***/42525:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalBar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/approval/ApprovalBar.vue?vue&type=template&id=4fea8923&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{class:["sidebar-loader",(_vm.loading||_vm.isSaving)&&"on"]}),_vm.loading?_c("div",{staticClass:"d-flex approval-bar"},[_vm._v(" "+_vm._s(_vm.$t("panel.loading_load"))+" ")]):_c("div",{staticClass:"d-flex approval-bar"},[_c("div",{staticClass:"approval-desc mR30 f14"},[_vm.isRejected?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" "+_vm._s(_vm.$t("panel.was"))+" "),_c("span",{staticClass:"bold",staticStyle:{color:"#dd7171"}},[_vm._v(_vm._s(_vm.$t("panel.rejected")))]),_vm._v(" for this "+_vm._s(_vm.moduleDisplayName||_vm.moduleName)+". "),_vm.resendApproval?[_c("span",[_vm._v("You can")]),_vm.canShowEdit?[_c("span",{staticClass:"mL5"},[_vm._v("either")]),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.$emit("onEdit")}}},[_vm._v(" edit ")])]),_c("span",{staticClass:"mL5"},[_vm._v("or")])]:_vm._e(),_c("span",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_c("a",{class:["mL5 bold",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.resendApproval)}}},[_vm._v(" resend ")])]),_c("span",{staticClass:"mL5"},[_vm._v("for approval.")])]:_vm._e()]:_vm.hasApprovalList&&!_vm.hideApprovers?[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending from "),_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.approvers[0].name))]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"mL5 approvers-more-icon"},[_vm._v(" +"+_vm._s(_vm.approvers.length-1)+" ")])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApproverTypeAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()]:(_vm.$validation.isEmpty(_vm.transitions),[_c("span",{staticClass:"bold"},[_vm._v(_vm._s(_vm.policyName))]),_vm._v(" is pending ")])],2),_vm.$validation.isEmpty(_vm.transitions)?_vm._e():_c("div",{staticClass:"approval-links text-uppercase f12 bold"},[_c("div",{class:[_vm.isSaving&&"cursor-not-allowed"]},[_vm.approveTransition?_c("a",{class:["link-approve mR15",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.approveTransition)}}},[_c("inline-svg",{attrs:{src:"tick-sign",iconClass:"icon icon-xs"}}),_vm._v(" "+_vm._s(_vm.approveTransition.name)+" ")],1):_vm._e(),_vm.rejectTransition?_c("a",{class:["link-reject",_vm.isSaving&&"pointer-events-none"],on:{click:function($event){return _vm.requestToSave(_vm.rejectTransition)}}},[_c("inline-svg",{attrs:{src:"svgs/close",iconClass:"icon icon-xxs"}}),_vm._v(" "+_vm._s(_vm.rejectTransition.name)+" ")],1):_vm._e()])])]),_vm.canShowForm?[_c("TransitionForm",{attrs:{moduleName:_vm.selectedTransition.moduleName,recordId:_vm.record.recordId,formId:_vm.selectedTransition.formId,record:_vm.record,transition:_vm.selectedTransition,approvalRule:_vm.approvalRule,saveAction:_vm.saveAction,closeAction:_vm.closeStateFlowForm,isV3:_vm.isV3}})]:_vm._e()],2)},staticRenderFns=[],toConsumableArray=__webpack_require__(488478),objectSpread2=__webpack_require__(595082),ApprovalButtons=(__webpack_require__(689730),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(425728),__webpack_require__(434284),__webpack_require__(976801),__webpack_require__(634338),__webpack_require__(840889)),ApprovalForm=__webpack_require__(548127),ApprovalUserAvatar=__webpack_require__(400438),validation=__webpack_require__(990260),vuex_esm=__webpack_require__(420629),ApprovalBarvue_type_script_lang_js={extends:ApprovalButtons/* default */.Z,props:["hideApprovers","canShowEdit","canHideMsg"],components:{TransitionForm:ApprovalForm/* default */.Z,ApproverTypeAvatar:ApprovalUserAvatar/* default */.Z},data:function(){return{isSaving:!1}},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({metaInfo:function(state){return state.view.metaInfo}})),{},{transitions:function(){return(0,validation/* isEmpty */.xb)(this.stateTransitions)?[]:(0,toConsumableArray/* default */.Z)(this.stateTransitions).slice(0,2)},policyName:function(){return(0,validation/* isEmpty */.xb)(this.approvalRule)?"Approval":this.$getProperty(this.approvalRule,"name")},shouldCurrentUserApprove:function(){return!(0,validation/* isEmpty */.xb)(this.transitions)},hasApprovalList:function(){return!(0,validation/* isEmpty */.xb)(this.approvers)},approvalMeta:function(){return{approvalList:this.pendingApprovalList}},approvers:function(){var approvers=[];return this.pendingApprovalList.forEach((function(approver){var value=approver.value,type=approver.type;(0,validation/* isEmpty */.xb)(value)?"TENANT"===type?approvers.push({name:"Tenant",type:"TENANT"}):"VENDOR"===type&&approvers.push({name:"Vendor",type:"VENDOR"}):(0,validation/* isArray */.kJ)(value)?approvers.push.apply(approvers,(0,toConsumableArray/* default */.Z)(value)):approvers.push(value)})),approvers},isRejected:function(){return"Rejected"===this.$getProperty(this.currentState,"status")},shouldCreateModuleRecord:function(){return!1},shouldCreateNotes:function(){return!1},approveTransition:function(){return this.transitions.find((function(t){return"Approve"===t.name}))},rejectTransition:function(){return this.transitions.find((function(t){return"Reject"===t.name}))},resendApproval:function(){return this.transitions.find((function(t){return!["Approve","Reject"].includes(t.name)}))},moduleDisplayName:function(){var _this$metaInfo;return null===(_this$metaInfo=this.metaInfo)||void 0===_this$metaInfo?void 0:_this$metaInfo.displayName}}),methods:{showMessage:function(transition){
/* override */
var name=transition.name,action="";["Approve","Reject"].includes(name)?"Approve"===name?action="approved":"Reject"===name&&(action="rejected"):action="resent for approval",this.$message.success("".concat(this.moduleDisplayName||this.moduleName," was ").concat(action))},requestToSave:function(transition){var _this=this;this.isSaving=!0,this.startTransition(transition).finally((function(){return _this.isSaving=!1}))},saveAction:function(formData){return this.transitionToState(formData)},getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver},defaultResponseHandler:function(_ref,transition){var error=_ref.error,canShowForm=this.canShowForm;error?(!this.canHideMsg&&this.$message.error(error.message),this.$emit("onFailure",{error:error,transition:transition})):(canShowForm&&this.closeStateFlowForm(),this.fetchAvailableStates(),this.$emit("onSuccess",{error:error,transition:transition}),!this.canHideMsg&&this.showMessage(transition))}}},approval_ApprovalBarvue_type_script_lang_js=ApprovalBarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(approval_ApprovalBarvue_type_script_lang_js,render,staticRenderFns,!1,null,"4fea8923",null)
/* harmony default export */,ApprovalBar=component.exports},
/***/751201:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return Asset}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/avatar/Asset.vue?vue&type=template&id=30a11ac8
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.asset?_c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position cursor-pointer"},[!_vm.showSlide||"undefined"!==typeof _vm.disableSlide&&!1!==_vm.disableSlide?_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative"},[_vm.avatarUrl?_c("img",{staticClass:"fc-avatar",class:_vm.sizeClass,attrs:{src:_vm.avatarUrl}}):_vm._e()]):_c("div",{staticClass:"q-item-side q-item-side-left q-item-section relative",class:_vm.sizeClass},[_c("el-carousel",{staticClass:"fc-avatar-carousel",attrs:{trigger:"click",autoplay:!1,"indicator-position":"none"}},[_vm._l(_vm.photos,(function(photo,index){return[photo.url?_c("el-carousel-item",{key:index},[_c("img",{staticClass:"fc-avatar-square",class:_vm.sizeClass,attrs:{target:"_blank",src:photo.url},on:{click:function($event){return _vm.openPhotoUrl(photo.originalUrl)}}})]):_vm._e()]}))],2)],1),_vm.showName?_c("div",[_c("div",[_c("span",{staticClass:"q-item-label"},[_vm._v(_vm._s(_vm.asset.name))])])]):_vm._e(),!_vm.showUpload||"undefined"!==typeof _vm.disableUpload&&!1!==_vm.disableUpload?_vm._e():_c("div",[_c("span",{staticClass:"upload-space-photos pointer",on:{click:_vm.showUploadPhotoDialog}},[_c("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),_c("f-upload-photos",{ref:"uploadDialog",attrs:{module:"assetphotos",list:_vm.photos,record:_vm.asset},on:{updatePhotos:function($event){return _vm.handleUpdate()}}})],1)])]):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),FUploadPhotos=(__webpack_require__(434284),__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(350367)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),api=__webpack_require__(32284),Assetvue_type_script_lang_js={props:["size","asset","name","hovercard","disableUpload","disableSlide"],data:function(){return{avatarUrl:null,sizeClass:"fc-avatar-"+this.size,hoverCardId:"spaceHoverCardId-"+this.asset.id,showName:"undefined"===typeof this.name||"true"===this.name,showHoverCard:"undefined"===typeof this.hovercard||"true"===this.hovercard,loadHoverCardData:!1,photosLoading:!0,photos:[],sliderEnabledSize:["shuge","huge","xhuge","widget"]}},components:{FUploadPhotos:FUploadPhotos/* default */.Z},mounted:function(){this.loadAvatarUrl()},created:function(){this.$store.dispatch("loadAssetType")},computed:(0,objectSpread2/* default */.Z)({showSlide:function(){if(this.photos&&this.photos.length){if(this.sliderEnabledSize.indexOf(this.size)>=0){var _step,allUrlNull=!0,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.photos);try{for(_iterator.s();!(_step=_iterator.n()).done;){var photo=_step.value;if(photo.url){allUrlNull=!1;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!allUrlNull}return!1}return!1},showUpload:function(){return this.sliderEnabledSize.indexOf(this.size)>=0}},(0,vuex_esm/* mapGetters */.Se)(["getAssetType"])),watch:{asset:function(){this.loadAvatarUrl()}},methods:{loadAvatarUrl:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var asset,size,sliderEnabledSize,disableSlide,_ref,avatarUrl,assetId,_yield$API$get,error,data,_ref2,_ref2$photos,photos,defaultAvatarUrl;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(asset=_this.asset,size=_this.size,sliderEnabledSize=_this.sliderEnabledSize,disableSlide=_this.disableSlide,_ref=asset||{},avatarUrl=_ref.avatarUrl,assetId=_ref.id,!(sliderEnabledSize.indexOf(size)>=0&&(!disableSlide||disableSlide&&"true"===disableSlide))){_context.next=12;break}if(!assetId){_context.next=12;break}return _this.photosLoading=!0,_context.next=7,api/* API */.bl.get("/photos/get?module=assetphotos&parentId=".concat(assetId));case 7:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error||(_ref2=data||{},_ref2$photos=_ref2.photos,photos=void 0===_ref2$photos?[]:_ref2$photos,(0,validation/* isEmpty */.xb)(photos)||photos.forEach((function(photo){var _ref3=photo||{},url=_ref3.url;(0,validation/* isEmpty */.xb)(url)||(avatarUrl=url)})),_this.$set(_this,"photos",photos)),_this.photosLoading=!1;case 12:(0,validation/* isEmpty */.xb)(avatarUrl)?(defaultAvatarUrl=_this.getDefaultAvatar()||"",_this.$set(_this,"avatarUrl",defaultAvatarUrl)):_this.$set(_this,"avatarUrl",avatarUrl);case 13:case"end":return _context.stop()}}),_callee)})))()},handleUpdate:function(){this.loadAvatarUrl()},openPhotoUrl:function(url){window.open(url,"_blank")},getDefaultAvatar:function(){if(this.asset&&this.asset.type&&this.asset.type.id){var name=this.getAssetType(this.asset.type.id)?this.getAssetType(this.asset.type.id).name:"";return __webpack_require__("Plumbing Equipment"===name||"Equipment"===name?164065:"Furniture"===name?703659:"Vehicle"===name?916803:164065)}return __webpack_require__(164065)},loadHoverCard:function(){this.loadHoverCardData=!0},hideHoverCard:function(){this.loadHoverCardData=!1},showUploadPhotoDialog:function(){this.$refs.uploadDialog.open()}}},avatar_Assetvue_type_script_lang_js=Assetvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(avatar_Assetvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,Asset=component.exports},
/***/400438:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return ApprovalUserAvatar}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/approvals/components/ApprovalUserAvatar.vue?vue&type=template&id=443099a5&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"inline"},[_c("div",{staticClass:"fc-avatar-element q-item-division relative-position"},[_c("div",{staticClass:"q-item-side-left q-item-section"},[_vm.hasUser?_c("avatarPopover",{attrs:{user:_vm.userObj,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.userObj,color:_vm.color}})],1)]):_vm.fieldType?_c("avatarPopover",{attrs:{user:_vm.fieldTypeUserValue,moduleName:_vm.moduleName}},[_c("span",{attrs:{slot:"reference"},slot:"reference"},[_c("avatar",{attrs:{size:_vm.size,user:_vm.fieldTypeUserValue,color:_vm.color}})],1)]):_c("div",{class:["icon-border",_vm.userTypeIcon[_vm.userType.type].background]},[_c("inline-svg",{class:["mT2",_vm.userTypeIcon[_vm.userType.type].marginLeft],attrs:{src:_vm.userTypeIcon[_vm.userType.type].icon,iconClass:"icon text-center fc-fill-path fill-path-white "+_vm.userTypeIcon[_vm.userType.type].iconSize}})],1)],1),_c("div",{staticClass:"flex-middle"},[_vm.$validation.isObject(_vm.typeLabel)?_c("span",{staticClass:"q-item-label d-flex flex-wrap"},[_vm._v(" "+_vm._s(_vm.typeLabel.value)+"  "),_vm.typeLabel.type?_c("span",{staticClass:"text-fc-grey mL5"},[_vm._v(" ("+_vm._s(_vm.typeLabel.type)+") ")]):_vm._e()]):_c("span",{staticClass:"q-item-label d-flex flex-wrap user-type"},[_vm._v(" "+_vm._s(_vm.typeLabel)+" ")]),_vm.approvers.length>1?_c("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[_vm._t("default",(function(){return[_c("div",{staticClass:"approvers-more-icon"},[_vm._v("+"+_vm._s(_vm.approvers.length-1))])]}),{slot:"reference"}),_c("div",_vm._l(_vm.approvers.slice(1),(function(approver){return _c("div",{key:approver.name,staticClass:"mB10"},[_c("ApprovalUserAvatar",{attrs:{size:"md",user:approver,userType:_vm.getApproverType(approver),moduleName:_vm.moduleName,approvalMeta:_vm.approvalMeta}})],1)})),0)],2):_vm._e()],1)])])},staticRenderFns=[],validation=(__webpack_require__(425728),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(990260)),User=__webpack_require__(426803),ApprovalUserAvatarvue_type_script_lang_js={name:"ApprovalUserAvatar",extends:User/* default */.Z,props:["userType","approvalMeta","approverObj"],computed:{hasUser:function(){var id=this.$getProperty(this.userObj,"id");return!(0,validation/* isEmpty */.xb)(id)},fieldType:function(){var _this$userType=this.userType,type=_this$userType.type,value=_this$userType.value;return"FIELD"===type&&!(0,validation/* isEmpty */.xb)(value)},fieldTypeUserValue:function(){var fieldType=this.fieldType,userType=this.userType,value=userType.value;return fieldType?(0,validation/* isArray */.kJ)(value)&&!(0,validation/* isEmpty */.xb)(value)?value[0]:value:null},fieldName:function(){var approverObj=this.approverObj,approvalMeta=this.approvalMeta,_ref=approvalMeta||{},_ref$approvalList=_ref.approvalList,approvalList=void 0===_ref$approvalList?[]:_ref$approvalList;if(!(0,validation/* isEmpty */.xb)(approvalList)){var displayName=approvalList.find((function(list){return list.approverGroup===approverObj.approverGroup})).field.displayName;return displayName}return null},color:function(){return-1!==this.userObj.id||this.fieldType?"":this.group?"#c3c3c3":"#e3e3e3"},userTypeIcon:function(){var userIcon={TENANT:{icon:"svgs/tenant",background:"green",iconSize:"icon-lg",marginLeft:"mL4"},VENDOR:{icon:"svgs/apps/vendor",background:"orange",iconSize:"icon-lg",marginLeft:"mL4"},ROLE:{icon:"svgs/role",background:"yellow",iconSize:"icon-xl",marginLeft:"mL3"},GROUP:{icon:"svgs/team",background:"blue",iconSize:"icon-xl",marginLeft:"mL3"},FIELD:{icon:"user",background:"brown",iconSize:"icon-lg",marginLeft:"mL4"}};return userIcon},typeLabel:function(){var _this$userType2=this.userType,type=_this$userType2.type,value=_this$userType2.value;if("USER"===type)return{value:this.userObj.name,type:null};if("TENANT"===type)return value?{value:value.name,type:"Tenant"}:"Tenant";if("VENDOR"===type)return value?{value:value.name,type:"Vendor"}:"Vendor";if("FIELD"===type){var _ref2=this.fieldTypeUserValue||{},name=_ref2.name;return{value:name||this.fieldName,type:"Field"}}return value.name},approvers:function(){var _this$userType3=this.userType,type=_this$userType3.type,value=_this$userType3.value;return"USER"===type?[this.userObj]:(0,validation/* isArray */.kJ)(value)?value:[value]}},methods:{getApproverType:function(approver){return approver.id?{type:"USER",value:approver}:approver}}},components_ApprovalUserAvatarvue_type_script_lang_js=ApprovalUserAvatarvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_ApprovalUserAvatarvue_type_script_lang_js,render,staticRenderFns,!1,null,"443099a5",null)
/* harmony default export */,ApprovalUserAvatar=component.exports},
/***/526424:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WOSummaryResourceCard}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v1/WOSummaryResourceCard.vue?vue&type=template&id=2b98078e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.loading?_c("div",{staticClass:"white-bg-block p20 wo-space-card"},[_c("spinner",{attrs:{size:"50",show:!0}})],1):_vm.record&&_vm.record.resource?_c("div",{staticClass:"white-bg-block p20 wo-space-card"},[2===_vm.record.resource.resourceType?_c("div",{staticClass:"fc-id11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.asset"))+" ")]):_c("div",{staticClass:"fc-id11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.space"))+" ")]),_c("div",{staticClass:"flex-middle label-txt-black pT10"},[_c("div",{staticClass:"flex-middle"},[_c("div",[2===_vm.record.resource.resourceType?_c("div",[_c("AssetAvatar",{staticClass:"asset-space-img",attrs:{size:"lg",name:"false",asset:{id:-1,name:""}}})],1):1===_vm.record.resource.spaceType?_c("div",[_c("InlineSvg",{staticClass:"pointer",attrs:{src:"svgs/spacemanagement/site",iconClass:"icon icon-xxxl vertical-middle"}})],1):2===_vm.record.resource.spaceType?_c("div",[_c("InlineSvg",{staticClass:"pointer",attrs:{src:"svgs/spacemanagement/building",iconClass:"icon icon-xxxl vertical-middle"}})],1):3===_vm.record.resource.spaceType?_c("div",[_c("InlineSvg",{staticClass:"pointer",attrs:{src:"svgs/spacemanagement/floor",iconClass:"icon icon-xxxl vertical-middle"}})],1):_c("div",[_c("InlineSvg",{staticClass:"pointer",attrs:{src:"svgs/spacemanagement/space",iconClass:"icon icon-xxxl vertical-middle"}})],1)]),_c("div",{staticClass:"pL15 flex-col"},[2===_vm.record.resource.resourceType?_c("div",{staticClass:"label-txt-black bold width-fit ",class:!_vm.$validation.isEmpty(_vm.record.resource.sysDeletedTime)&&_vm.record.resource.sysDeletedTime>0?"action-disabled":"pointer"},[_c("span",{on:{click:function($event){return _vm.openAsset(_vm.record.resource.id)}}},[_vm._v(_vm._s(_vm.record.resource.name?_vm.record.resource.name:"---"))])]):_c("div",{staticClass:"label-txt-black bold width-fit ",class:!_vm.$validation.isEmpty(_vm.record.resource.sysDeletedTime)&&_vm.record.resource.sysDeletedTime>0?"action-disabled":"pointer"},[_c("span",{on:{click:function($event){return _vm.redirectToPortfolio()}}},[_vm._v(" "+_vm._s(_vm.recordName)+" ")]),_vm.record.resource&&_vm.record.resource.floorId&&_vm.hierarchyList&&4===_vm.hierarchyList.length?_c("span",{on:{click:function($event){return _vm.openFloorplan(_vm.record.resource)}}},[_c("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"View Floor Plan",placement:"bottom"}},[_c("i",{staticClass:"fa fa-map-o  f11 pL5 pointer fc-black-11 op6"})])],1):_vm._e()]),_c("div",{staticClass:"d-flex pT5 flex-wrap"},_vm._l(_vm.hierarchyList,(function(item,index){return _c("div",{key:index},[2===_vm.record.resource.resourceType||index!=_vm.hierarchyList.length-1?_c("div",{staticClass:"d-flex flex-direction-row",on:{click:function($event){return _vm.redirect(item.route)}}},[_c("div",{staticClass:"fc-black-11 text-left pointer line-height15"},[_vm._v(" "+_vm._s(item.displayName)+" ")]),2===_vm.record.resource.resourceType&&index!==_vm.hierarchyList.length-1||2!==_vm.record.resource.resourceType&&_vm.hierarchyList.length>1&&index!==_vm.hierarchyList.length-2?_c("div",{staticClass:"pL10 pR10"},[_c("el-divider",{attrs:{direction:"vertical"}})],1):_vm._e()]):_vm._e()])})),0)])])])]):_c("div",{staticClass:"white-bg-block p20 wo-site-card"},[_c("div",{staticClass:"fc-id11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.site"))+" ")]),_c("div",[_c("div",{staticClass:"flex-middle"},[_c("div",{on:{click:_vm.siteRoute}},[_c("InlineSvg",{staticClass:"pointer",attrs:{src:"svgs/spacemanagement/site",iconClass:"icon icon-xxxl vertical-middle"}})],1),_c("div",{staticClass:"label-txt-black pointer pL10",on:{click:_vm.siteRoute}},[_vm._v(" "+_vm._s(_vm.siteName)+" ")])])])])])},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),SpaceCardMixin=(__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(434284),__webpack_require__(960170)),api=__webpack_require__(32284),validation=__webpack_require__(990260),Asset=__webpack_require__(751201),router=__webpack_require__(329435),FetchViewsMixin=__webpack_require__(646716),relatedFieldUtil=__webpack_require__(850558),WOSummaryResourceCardvue_type_script_lang_js={props:["record","resourceFieldKey","moduleName"],mixins:[SpaceCardMixin/* default */.Z,FetchViewsMixin/* default */.Z],components:{AssetAvatar:Asset["default"]},data:function(){return{hierarchyList:[],loading:!1,siteName:"---"}},computed:{recordName:function(){var record=this.record,_ref=record||{},resource=_ref.resource;return this.$getProperty(resource,"name","---")}},created:function(){this.loadResourceDetails(),this.getSiteName(this.$getProperty(this.record,"siteId",null))},methods:{loadResourceDetails:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var resource,resourceId,_data$asset,_yield$API$get,data,error,_data$asset2,_yield$API$get2,_data,_error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.hierarchyList=[],resource=_this.$getProperty(_this.record,"".concat(_this.resourceFieldKey||"resource")),(0,validation/* isEmpty */.xb)(resource)){_context.next=23;break}if(resourceId=resource.id,2!==resource.resourceType){_context.next=15;break}return _this.loading=!0,_context.next=8,api/* API */.bl.get("/v2/assets/".concat(resourceId,"?fetchHierarchy=true"));case 8:_yield$API$get=_context.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this.$message.error(error.message||"Error Occurred"):null!==data&&void 0!==data&&null!==(_data$asset=data.asset)&&void 0!==_data$asset&&_data$asset.space&&(_this.hierarchyList=_this.initHierarchy(null===data||void 0===data||null===(_data$asset2=data.asset)||void 0===_data$asset2?void 0:_data$asset2.space)),_this.loading=!1,_context.next=23;break;case 15:return _this.loading=!0,_context.next=18,api/* API */.bl.get("/v2/basespaces/".concat(resourceId,"?fetchDeleted=true"));case 18:_yield$API$get2=_context.sent,_data=_yield$API$get2.data,_error=_yield$API$get2.error,_error?_this.$message.error(_error.message||"Error Occurred"):null!==_data&&void 0!==_data&&_data.basespace&&(_this.hierarchyList=_this.initHierarchy(null===_data||void 0===_data?void 0:_data.basespace)),_this.loading=!1;case 23:case"end":return _context.stop()}}),_callee)})))()},siteRoute:function(){var parentPath=this.findRoute();parentPath&&this.$router.push({path:"".concat(parentPath,"/site/").concat(this.record.siteId,"/overview")})},openFloorplan:function(resource){resource&&resource.floorId&&resource.id&&(this.$set(this.floorPlanViewMode,"floorId",resource.floorId),this.$set(this.floorPlanViewMode,"focus",{spaceId:resource.id}),this.floorplanVisible=!0)},getSiteName:function(siteId){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var moduleName,id,url,_yield$API$get3,data,_ref2,site,_yield$getUnRelatedMo,_site;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if((0,validation/* isEmpty */.xb)(siteId)){_context2.next=18;break}if(moduleName=_this2.moduleName,"serviceRequest"!=moduleName){_context2.next=13;break}if(id=_this2.$getProperty(_this2.record,"id",null),(0,validation/* isEmpty */.xb)(id)){_context2.next=11;break}return url="v3/serviceRequest/".concat(id,"/site"),_context2.next=8,api/* API */.bl.get(url,{});case 8:_yield$API$get3=_context2.sent,data=_yield$API$get3.data,(0,validation/* isEmpty */.xb)(data)||(_ref2=data||{},site=_ref2.site,_this2.siteName=_this2.$getProperty(site,"name","---"));case 11:_context2.next=18;break;case 13:return _context2.next=15,(0,relatedFieldUtil/* getUnRelatedModuleSummary */.$B)(moduleName,"site",siteId);case 15:_yield$getUnRelatedMo=_context2.sent,_site=_yield$getUnRelatedMo.site,_this2.siteName=_this2.$getProperty(_site,"name","---");case 18:case"end":return _context2.stop()}}),_callee2)})))()},openAsset:function(id){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var viewname,_ref3,name;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.fetchView("asset");case 2:viewname=_context3.sent,(0,router/* isWebTabsEnabled */.tj)()?(_ref3=(0,router/* findRouteForModule */.Jp)("asset",router/* pageTypes */.As.OVERVIEW)||{},name=_ref3.name,name&&_this3.$router.push({name:name,params:{viewname:viewname,id:id}})):_this3.$router.push({path:"/app/at/assets/".concat(viewname,"/").concat(id,"/overview")});case 4:case"end":return _context3.stop()}}),_callee3)})))()},redirectToPortfolio:function(){var hierarchyList=this.$getProperty(this,"hierarchyList",[]),route=this.$getProperty(hierarchyList,"".concat(hierarchyList.length-1,".route"),null);(0,validation/* isEmpty */.xb)(route)||this.redirect(route)}}},v1_WOSummaryResourceCardvue_type_script_lang_js=WOSummaryResourceCardvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v1_WOSummaryResourceCardvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WOSummaryResourceCard=component.exports},
/***/587971:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return WorkOrderFieldDetails}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v1/WorkOrderFieldDetails.vue?vue&type=template&id=0ae895fa&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:[_vm.isDisableForApproval?"wo-sidebar-margin":"fR pm-summary-inner-right-con width28 height100 scrollbar-style",!_vm.isNotPortal&&"portal-wo-scroll"]},[_c("div",{class:["fc-scrollbar-wrap",{pT20:!_vm.isDisableForApproval&&!_vm.forV3,mT10:_vm.isDisableForApproval&&!_vm.forV3}]},[_vm.isDisableForApproval||297===_vm.$org.id?_vm._e():_c("div",{staticClass:"white-bg-block mb fc__wo__sum__timer pB20 pT20"},[_c("div",{staticClass:"fc-id11 text-uppercase pL15"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.work_duration"))+" ")]),_c("wo-timer",{staticClass:"alarm-timer wo-duration",attrs:{loading:_vm.loading,actualWorkDurationField:_vm.actualWorkDurationField}})],1),_vm.$helpers.isLicenseEnabled("QUOTATION")||!_vm.$helpers.isLicenseEnabled("INVENTORY")||_vm.isDisableForApproval?_vm._e():_c("div",{staticClass:"white-bg-block mT20 p20"},[_c("div",{staticClass:"fc-id11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.total_cost"))+" ")]),_c("div",{staticClass:"fc-black-17 pT5"},["$"===_vm.$currency||"₹"===_vm.$currency?_c("span",{staticClass:"f15",domProps:{innerHTML:_vm._s(_vm.recordCurrency||_vm.$currency)}}):_vm._e(),_vm._v(" "+_vm._s(_vm.workorder.totalCost>-1?_vm.$d3.format(",")(_vm.workorder.totalCost):0)+" "),"$"!==_vm.$currency&&"₹"!==_vm.$currency?_c("span",{staticClass:"f15",domProps:{innerHTML:_vm._s(_vm.recordCurrency||_vm.$currency)}}):_vm._e()])]),_c("WOSummaryResourceCard",{staticClass:"mT20",attrs:{record:_vm.workorder,moduleName:"workorder"}}),_vm.$helpers.isLicenseEnabled("QUOTATION")?_c("WOQuotationCard",{attrs:{workorder:_vm.workorder}}):_vm._e(),_vm.isTenantEnabled&&!_vm.canHideField("tenant")?_c("div",[_vm.workorder.tenant&&_vm.workorder.tenant.id>0?_c("div",{staticClass:"white-bg-block mT20 p20 wo-tenant-card text-left"},[_c("div",{staticClass:"fc-id11 text-uppercase text-left"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.tenant"))+" ")]),_c("div",{staticClass:"pointer pT5 text-left",on:{click:function($event){return _vm.openTenant(_vm.workorder.tenant.id)}}},[_c("el-row",{staticClass:"flex-middle"},[_c("el-col",{attrs:{span:2}},[_c("tenant-avatar",{attrs:{name:!1,size:"md",tenant:_vm.workorder.tenant}})],1),_c("el-col",{staticClass:"pT3 pL10",attrs:{span:22}},[_c("div",{staticClass:"label-txt-black bold line-height20"},[_vm._v(" "+_vm._s(_vm.workorder.tenant.name)+" ")]),_c("div",{staticClass:"fc-black-13 text-left line-height20"},[_vm._v(" "+_vm._s(_vm.workorder.tenant.primaryContactName)+" ")]),_c("div",{staticClass:"fc-black-13 text-left line-height20"},[_vm._v(" "+_vm._s(_vm.workorder.tenant.primaryContactEmail)+" ")]),_c("div",{staticClass:"pT5 fc-black-13 text-left"},[_vm._v(" "+_vm._s(_vm.workorder.tenant.primaryContactPhone)+" ")])])],1)],1)]):_vm._e()]):_vm._e(),_c("div",{staticClass:"white-bg-block mT20 p20 mB20"},[_c("div",{staticClass:"fc-id11 text-uppercase text-left"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.responsibility"))+" ")]),_c("div",{staticClass:"fc-text-pink11 text-uppercase text-uppercase text-left pT10 pB10 f10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.staff/team"))+" ")]),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[_vm.workorder.assignedTo&&_vm.workorder.assignedTo.id>0||_vm.workorder.assignmentGroup&&_vm.workorder.assignmentGroup.id>0?_c("div",{staticClass:"flLeft width80"},[_c("user-avatar",{attrs:{size:"md",user:_vm.workorder.assignedTo,group:_vm.workorder.assignmentGroup,showPopover:!0,showLabel:!0,moduleName:"workorder"}})],1):_c("div",{staticClass:"flLeft color-d"},[_vm._v("--- / ---")])])])],1),_vm.canHideField("vendor")?_vm._e():_c("div",[_c("div",{staticClass:"fc-text-pink11 text-uppercase text-left f10"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.vendor"))+" ")]),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"label-txt-black mT10"},[_c("div",{staticClass:"flLeft",class:_vm.workorder.vendor?"":"color-d"},[_vm._v(" "+_vm._s(_vm.workorder.vendor&&_vm.workorder.vendor.name?_vm.workorder.vendor.name:"---")+" ")]),_c("div",{staticClass:"clearboth"})])])],1),_c("div",[_c("div",{staticClass:"fc-text-pink11 text-uppercase text-left f10"},[_vm._v(" "+_vm._s(_vm.$t("common.products.requester"))+" ")]),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[_vm.workorder.requester&&_vm.workorder.requester.name?_c("div",{staticClass:"pT10"},[_vm._v(" "+_vm._s(_vm.workorder.requester.name)+" ")]):_c("div",{staticClass:"pT10"},[_vm._v("---")])])])],1)],1)],1)],1),_c("div",{class:[_vm.isDisableForApproval||297===_vm.$org.id?"":"mT20"]},[_c("div",{staticClass:"approval-wo-fields-con",class:[{"white-bg-block position-relative p20 pT20":!_vm.isDisableForApproval}],staticStyle:{overflow:"scroll"}},[_vm.isDisableForApproval?_vm._e():_c("div",{staticClass:"flex-middle justify-content-space mB20"},[_c("div",{staticClass:"label-txt-black fwBold"},[_vm._v(" "+_vm._s(_vm.$t("common.header.Workorder_details"))+" ")]),_vm.canEdit?_c("div",{staticClass:"wo-details-edit-btn",on:{click:_vm.openWoEditForm}},[_c("i",{staticClass:"el-icon-edit pR5"}),_vm._v(" "+_vm._s(_vm.$t("common._common.edit"))+" ")]):_vm._e()]),_vm.workorder.space&&!_vm.canHideField("space")?_c("div",[_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_c("div",[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.raised_for"))+" ")])])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black"},["Building"===_vm.workorder.space.spaceTypeVal?_c("div",[_c("div",{staticClass:"place"},[_vm._v(" "+_vm._s(_vm.workorder.space.id?_vm.getSpace(_vm.workorder.space.siteId).name:"---")+" ")])]):"Site"===_vm.workorder.space.spaceTypeVal?_c("div",[_c("div",{staticClass:"place",staticStyle:{"padding-bottom":"35px"}},[_vm._v(" "+_vm._s(_vm.workorder.space.id?_vm.getSpace(_vm.workorder.space.id).name:"---")+" ")])]):_vm._e(),"Building"===_vm.workorder.space.spaceTypeVal?_c("div",[_c("div",{staticClass:"inplace",staticStyle:{"padding-bottom":"35px"}},[_vm._v(" "+_vm._s(_vm.workorder.space.name)+" ")])]):_vm._e()])])],1)],1):_vm._e(),_vm.canHideField("type")?_vm._e():_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("type"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[_c("div",{staticClass:"flLeft picklist",staticStyle:{"font-size":"14px","letter-spacing":"0.6px",color:"#333"}},[_vm.workorder.type&&_vm.workorder.type.id>0?_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s(_vm.getPMType(_vm.workorder.type.id))+" ")]):_c("div",{staticClass:"flLeft color-d"},[_vm._v("---")]),_c("div",{staticClass:"clearboth"})])])])],1),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("priority"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[_c("div",{staticClass:"flLeft picklist",staticStyle:{"font-size":"14px","letter-spacing":"0.6px",color:"#333"}},[_vm.workorder.priority&&_vm.workorder.priority.id>0?_c("div",{staticClass:"flLeft"},[_c("span",{staticClass:"q-item-label"},[_c("i",{staticClass:"fa fa-circle prioritytag",style:{color:_vm.getTicketPriority(_vm.workorder.priority.id).colour},attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.workorder.priority&&_vm.workorder.priority.id>0?_vm.getTicketPriority(_vm.workorder.priority.id).displayName:"---")+" ")])]):_c("div",{staticClass:"flLeft color-d"},[_vm._v("---")]),_c("div",{staticClass:"clearboth"})])])])],1),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("category"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[_c("div",{staticClass:"flLeft picklist",staticStyle:{"font-size":"14px","letter-spacing":"0.6px",color:"#333"}},[_vm.workorder.category&&_vm.workorder.category.id>0?_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s((_vm.getTicketCategory(_vm.workorder.category.id)||{}).displayName||"---")+" ")]):_c("div",{staticClass:"flLeft color-d"},[_vm._v("---")]),_c("div",{staticClass:"clearboth"})])])])],1),_vm.isClientEnabled?_c("div",[_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("client"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[_vm.workorder.client&&_vm.workorder.client.id>0?_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s(_vm.workorder.client.name)+" ")]):_c("div",{staticClass:"flLeft"},[_vm._v("---")])])])],1)],1):_vm._e(),_c("div",{staticClass:"clearboth"}),_vm.canHideField("sourceTypeVal")?_vm._e():_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("sourceType"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black"},[_vm.workorder.sourceType&&_vm.workorder.sourceTypeVal?_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s(_vm.workorder.sourceTypeVal)+" ")]):_c("div",{staticClass:"flLeft"},[_vm._v("---")]),_c("div",{staticClass:"clearboth"})])])],1),_vm.canHideField("createdTime")?_vm._e():_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("createdTime"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black"},[_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.createdTime))+" ")]),_c("div",{staticClass:"clearboth"})])])],1),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("dueDate"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[-1!==_vm.workorder.dueDate?_c("div",{staticClass:"flLeft",on:{click:function($event){return _vm.$refs.showdatepicker.focus()}}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.dueDate))+" ")]):_c("div",{staticClass:"flLeft color-d"},[_vm._v(" --- ")]),_c("div",{staticClass:"clearboth"})])])],1),_vm.canHideField("responseDueDate")?_vm._e():_c("el-row",{staticClass:"wo__details__res"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("responseDueDate"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[-1!==_vm.workorder.responseDueDate?_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.responseDueDate))+" ")]):_c("div",{staticClass:"flLeft color-d"},[_vm._v("---")]),_c("div",{staticClass:"clearboth"})])])],1),[5,14].includes(_vm.workorder.sourceType)&&!_vm.canHideField("sourceType")?_c("div",[_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("pm"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black"},[_c("div",{staticClass:"flLeft bluetxt",staticStyle:{cursor:"pointer"},on:{click:_vm.openPM}},[_vm._v(" "+_vm._s(_vm.workorder.pm?"#"+_vm.workorder.pm.id:"---")+" ")]),_c("div",{staticClass:"clearboth"})])])],1)],1):_vm._e(),_vm.workorder.parentWO&&!_vm.canHideField("parentWO")?_c("div",[_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("parentWO"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black"},[_c("div",{staticClass:"flLeft bluetxt",staticStyle:{cursor:"pointer"},on:{click:function($event){return _vm.openParentWo(_vm.workorder.parentWO)}}},[_vm._v(" "+_vm._s(_vm.workorder.parentWO&&_vm.workorder.parentWO.serialNumber?"#"+_vm.workorder.parentWO.serialNumber:"---")+" ")]),_c("div",{staticClass:"clearboth"})])])],1)],1):_vm._e(),_vm.workorder.safetyPlan&&this.$helpers.isLicenseEnabled("SAFETY_PLAN")&&!_vm.canHideField("safetyPlan")?_c("div",[_c("el-row",{staticClass:"wo__details__res"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("safetyPlan"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black"},[_c("div",{staticClass:"flLeft bluetxt"},[_vm._v(" "+_vm._s(_vm.workorder.safetyPlan&&_vm.workorder.safetyPlan.name?_vm.workorder.safetyPlan.name:"---")+" ")]),_c("div",{staticClass:"clearboth"})])])],1)],1):_vm._e(),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("stateFlowId"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[!_vm.workorder.stateFlowId||_vm.$validation.isEmpty(_vm.workorder.stateFlowRule)||_vm.$validation.isEmpty(_vm.workorder.stateFlowRule.name)?_c("div",{staticClass:"flLeft"},[_vm._v("---")]):_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s(_vm.workorder.stateFlowRule.name)+" ")])])])],1),_c("el-row",{staticClass:"flex-middle pB20"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" "+_vm._s(_vm.getFieldDisplayName("slaPolicyId"))+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions"},[_vm.workorder.slaPolicyId>0&&!_vm.$validation.isEmpty(_vm.workorder.slaRule)&&!_vm.$validation.isEmpty(_vm.workorder.slaRule.name)?_c("div",{staticClass:"flLeft"},[_vm._v(" "+_vm._s(_vm.workorder.slaRule.name)+" ")]):_c("div",{staticClass:"flLeft"},[_vm._v("---")])])])],1),_vm._l(_vm.filteredFields,(function(field,index){return[field.default||!_vm.workorder.data||_vm.isFieldEmpty(field,_vm.workorder.data)?_vm._e():_c("div",{key:index},[_c("el-row",{staticClass:"pB20 flex-middle"},[_c("el-col",{attrs:{span:10}},[_c("div",{staticClass:"fc-blue-label line-height20"},[_vm._v(" "+_vm._s(field.displayName)+" ")])]),_c("el-col",{attrs:{span:14}},[_c("div",{staticClass:"label-txt-black visibility-visible-actions flex-middle"},["DATE"===field.dataTypeEnum||"DATE"===field.dataTypeEnum._name||"DATE_TIME"===field.dataTypeEnum||"DATE_TIME"===field.dataTypeEnum._name?_c("div",[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.workorder.data[field.name]))+" ")]):"ENUM"===field.dataTypeEnum||"ENUM"===field.dataTypeEnum._name?_c("div",{staticClass:"picklist",staticStyle:{"font-size":"14px","letter-spacing":"0.6px",color:"#333"}},[_c("div",{staticClass:"flLeft",class:(_vm.workorder.data||{})[field.name]?"":"color-d"},[_vm._v(" "+_vm._s((_vm.workorder.data||{})[field.name]?field.enumMap[parseInt((_vm.workorder.data||{})[field.name])]:"---")+" ")])]):"MULTI_ENUM"===field.dataTypeEnum||"MULTI_ENUM"===field.dataTypeEnum._name?_c("div",{staticClass:"picklist overflow-hidden",staticStyle:{"font-size":"14px","letter-spacing":"0.6px",color:"#333"}},[_c("div",{class:(_vm.workorder.data||{})[field.name]?"":"color-d"},[_vm._v(" "+_vm._s(_vm.getMultiEnumFieldValues({field:field,data:_vm.workorder.data}))+" ")])]):"BOOLEAN"===field.dataTypeEnum||"BOOLEAN"===field.dataTypeEnum._name?_c("div",{staticClass:"picklist",staticStyle:{"font-size":"14px","letter-spacing":"0.6px",color:"#333"}},[_c("div",{staticClass:"flLeft",class:_vm.$validation.isBoolean((_vm.workorder.data||{})[field.name])?"":"color-d"},[_vm._v(" "+_vm._s(_vm.$validation.isBoolean((_vm.workorder.data||{})[field.name])?(_vm.workorder.data||{})[field.name]?field.trueVal||"True":field.falseVal||"False":"---")+" ")])]):_vm.canHideField("Number")||"NUMBER"!==field.dataTypeEnum&&"NUMBER"!==field.dataTypeEnum._name||23!==field.displayTypeInt?"SIGNATURE"===_vm.$getProperty(field,"displayType")?_c("div",[_c("SignatureField",{attrs:{field:field,record:_vm.workorder}})],1):_vm.isFileTypeField(field)?[_vm.$validation.isEmpty(_vm.workorder.data[field.name+"FileName"])?_c("div",[_vm._v("---")]):_c("div",{staticClass:"d-flex file-column width100",on:{click:function($event){return _vm.openAttachment(field,_vm.workorder.data||{})}}},[_c("el-tooltip",{attrs:{effect:"dark",content:_vm.workorder.data[field.name+"FileName"],placement:"top-start","open-delay":1e3}},[_c("a",{staticClass:"truncate-text"},[_vm._v(" "+_vm._s(_vm.workorder.data[field.name+"FileName"])+" ")])])],1)]:_vm.canShowLookupField(field)?_c("div",["users"===_vm.$getProperty(field,"lookupModule.name","")&&_vm.$getProperty(_vm.workorder,"data."+field.name+".id")?_c("div",[_vm._v(" "+_vm._s(_vm.$store.getters.getUser(_vm.workorder.data[field.name].id).name)+" ")]):_vm.isLookupSimpleField(field)?_c("div",[_c("GlimpseLookupWrapper",{attrs:{field:field,record:_vm.workorder.data,recordModuleName:"workorder"}})],1):_vm._e()]):_vm.$validation.isEmpty(_vm.workorder.data[field.name])||"MULTI_LOOKUP"!==field.dataTypeEnum?_vm.canShowRichTextContent(field)?_c("div",[_c("div",{staticClass:"d-flex "},[_c("fc-icon",{attrs:{group:"default",name:"eye-open",color:"#2b8bff"}}),_c("span",{staticClass:"mL7 mT2 view-rich-text",on:{click:function($event){return _vm.openRichTextPreview(field)}}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view")))])],1)]):_vm.workorder.data&&!_vm.$validation.isEmpty(_vm.workorder.data[field.name])?_c("div",[_vm._v(" "+_vm._s(_vm.workorder.data[field.name])+" ")]):_c("div",[_vm._v(" --- ")]):_c("div",[_vm._v(" "+_vm._s(_vm.getMultiLookupValue(_vm.workorder.data[field.name]))+" ")]):_c("div",[_vm._v(" "+_vm._s(_vm.$helpers.getFormattedDuration(_vm.workorder.data[field.name],_vm.$validation.isEmpty(field.unit)?"s":field.unit))+" ")]),_c("div",{staticClass:"clearboth"})],2)])],1)],1)]}))],2)])],1),_vm.editFormVisibilty?_c("WoV3EditForm",{attrs:{moduleName:"workorder",visibility:_vm.editFormVisibilty,wo:_vm.workorder},on:{visibilityUpdate:_vm.handleUpdateVisibility}}):_vm._e(),_vm.floorplanVisible?_c("workorder-floorplanview",{attrs:{visible:_vm.floorplanVisible,floorplandata:_vm.floorPlanViewMode},on:{close:function(){_vm.floorplanVisible=!1}}}):_vm._e(),_vm.showPreview&&_vm.selectedFile?_c("preview-file",{attrs:{visibility:_vm.showPreview,previewFile:_vm.selectedFile,files:[_vm.selectedFile]},on:{"update:visibility":function($event){_vm.showPreview=$event}}}):_vm._e(),_vm.showRichTextPreview?_c("RichTextPreview",{attrs:{showRichTextPreview:_vm.showRichTextPreview,richTextField:_vm.richTextField,richTextContent:_vm.richTextContent},on:{closeRichTextPreview:_vm.closeRichTextPreview}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),objectSpread2=__webpack_require__(595082),router=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(634338),__webpack_require__(670560),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(169358),__webpack_require__(450886),__webpack_require__(506203),__webpack_require__(689730),__webpack_require__(329435)),vuex_esm=__webpack_require__(420629),validation=__webpack_require__(990260),picklist=__webpack_require__(961358),utils_field=__webpack_require__(815872),workorderHelper=__webpack_require__(865764),WorkorderTimer=__webpack_require__(479776),User=__webpack_require__(426803),WoV3EditForm=__webpack_require__(209870),Tenant=__webpack_require__(6840),WorkorderFloorplanviewvue_type_template_id_cf632c3a_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.visible?_c("el-dialog",{attrs:{"custom-class":"f-image-editor fc-dialog-fp-container fp-adder",visible:_vm.visible,"modal-append-to-body":!1,width:"50%",title:"Floor Plan","before-close":_vm.closeDialog},on:{"update:visible":function($event){_vm.visible=$event}}},[_vm.loading?[_c("spinner",{staticStyle:{"margin-top":"150px"},attrs:{show:!0,size:80}})]:[-1===_vm.floorPlanViewMode.floorPlanId?_c("div",{staticClass:"empty-container"},[_c("div",{staticClass:"wo-empty-notes"},[_vm._v(" NO FLOOR PLAN ASSOCIATED ")])]):_c("floorplan-view",{staticClass:"floor-wo-overview",attrs:{floorplanId:_vm.floorPlanViewMode.floorPlanId,floorId:_vm.floorId,hideHeader:!0,data:_vm.data,focus:_vm.focus,viewMode:"maintenance",loadViewMode:!0,hideSettings:!0},on:{floorModeData:_vm.getData}})]],2):_vm._e()},WorkorderFloorplanviewvue_type_template_id_cf632c3a_staticRenderFns=[],d3=(__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(212826),__webpack_require__(947522),__webpack_require__(348727)),WorkorderFloorplanviewvue_type_script_lang_js={props:["visible","floorplandata"],data:function(){return{loading:!1,floorId:null,floorPlanViewMode:{viewMode:"maintenance",floorPlanId:null,scriptModeInt:1},data:[],focus:null}},components:{floorplanView:function(){return Promise.all(/* import() */[__webpack_require__.e(93208),__webpack_require__.e(50232),__webpack_require__.e(93765),__webpack_require__.e(95953),__webpack_require__.e(35309),__webpack_require__.e(18778),__webpack_require__.e(12303),__webpack_require__.e(84290),__webpack_require__.e(31721),__webpack_require__.e(64418),__webpack_require__.e(5603),__webpack_require__.e(57432),__webpack_require__.e(435),__webpack_require__.e(72230),__webpack_require__.e(94255),__webpack_require__.e(67683),__webpack_require__.e(44178),__webpack_require__.e(91132),__webpack_require__.e(20280),__webpack_require__.e(78256),__webpack_require__.e(22200),__webpack_require__.e(49081),__webpack_require__.e(89472),__webpack_require__.e(12085),__webpack_require__.e(55754),__webpack_require__.e(86494),__webpack_require__.e(3037),__webpack_require__.e(49908),__webpack_require__.e(22061),__webpack_require__.e(31602),__webpack_require__.e(73609),__webpack_require__.e(773),__webpack_require__.e(65545),__webpack_require__.e(42208),__webpack_require__.e(33015),__webpack_require__.e(2950),__webpack_require__.e(94925),__webpack_require__.e(23943),__webpack_require__.e(58661),__webpack_require__.e(6497),__webpack_require__.e(13803),__webpack_require__.e(22353),__webpack_require__.e(20390)]).then(__webpack_require__.bind(__webpack_require__,222353))}},mounted:function(){this.floorplandata&&(this.floorId=this.floorplandata.floorId,this.focus=this.floorplandata.focus,this.fetchFloorDetails(),this.floorplandata.floorPlanId&&this.getVieMode())},methods:{getData:function(data){this.data=data},closeDialog:function(){this.$emit("update:visible",!1),this.$emit("close")},handleView:function(mode,data){this.floorPlanViewMode.viewMode=mode,this.getVieMode(data)},getVieMode:function(){var _this=this;this.$http.post("/v2/floorPlan/viewFloorPlanMode",{floorPlanViewMode:this.floorPlanViewMode}).then((function(_ref){var data=_ref.data;0===data.responseCode&&(_this.data=data.result.data,_this.prepareStyle(_this.data),_this.loading=!1)}))},getColor:function(){return"#"+Math.random().toString(16).substr(2,6)},prepareStyle:function(data){var _this2=this,colors=d3.scaleLinear().range(["#1b7f01","#7fc001","#ffff01","#fb8002","#fa1000"]);if(data&&data.areas){var areas=data.areas,style={};if("readings"===this.floorPlanViewMode.viewMode){var domaindata=[];areas.forEach((function(rt){rt.value&&rt.value.value&&domaindata.push(rt.value.value)})),colors.domain(domaindata),areas.forEach((function(rt){if(rt.value&&rt.value.value){var label="".concat(rt.value.value," ").concat(rt.value.unit||"");_this2.$set(style,"fill",colors(rt.value.value)),_this2.$set(rt,"styles",style),_this2.$set(rt,"label",label),style={}}}))}else areas.forEach((function(rt){_this2.$set(style,"fill",_this2.getColor()),_this2.$set(rt,"styles",style),style={}}))}},fetchFloorDetails:function(){var _this3=this;if(this.loading=!0,this.floorId)return this.$http.get("/v2/pages/floor?id=".concat(this.floorId)).then((function(_ref2){var data=_ref2.data;0===data.responseCode&&(_this3.floorPlanViewMode.floorPlanId=data.result.record.defaultFloorPlanId,_this3.getVieMode())}))}}},components_WorkorderFloorplanviewvue_type_script_lang_js=WorkorderFloorplanviewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_WorkorderFloorplanviewvue_type_script_lang_js,WorkorderFloorplanviewvue_type_template_id_cf632c3a_render,WorkorderFloorplanviewvue_type_template_id_cf632c3a_staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkorderFloorplanview=component.exports,WOQuotationCardvue_type_template_id_f2fecf64_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.isLoading?_c("div",{staticClass:"white-bg-block mT20 position-relative"},[_c("spinner",{attrs:{show:!0,size:80}})],1):_c("div",{staticClass:"white-bg-block mT20 position-relative"},[_c("div",[_c("div",{staticClass:"p20"},[_c("div",{staticClass:"fc-id11 text-uppercase"},[_vm._v(" MAINTENANCE COST ")]),_c("currency",{staticClass:"pT10 fc-black2-20",attrs:{value:_vm.$validation.isEmpty(_vm.workorder.totalCost)?0:_vm.workorder.totalCost}})],1),_vm.$validation.isEmpty(_vm.quotationList)&&_vm.workorder.isQuotationNeeded?_c("div",{staticClass:"fc-wo-create-quotation-link fc-border-top1"},[_c("div",{staticClass:"fc-dark-blue3-13 bold",on:{click:_vm.redirectToQuotationForm}},[_c("i",{staticClass:"el-icon-plus pR5 fwBold"}),_vm._v("Create Quote ")])]):_vm._e()]),_vm.downloadUrl?_c("iframe",{staticClass:"hide",attrs:{src:_vm.downloadUrl}}):_vm._e(),_vm.quotationSummaryDetails?_c("el-dialog",{staticClass:"fc-dialog-header-hide",attrs:{visible:_vm.dialogVisible,width:"80%"},on:{"update:visible":function($event){_vm.dialogVisible=$event}}},[_c("div",{staticClass:"fc-quotation-wo-action "},[_c("div",{staticClass:"bold fc-white-14 pR20 pointer",on:{click:function($event){return _vm.openQuotationSummary(_vm.quotationSummaryDetails)}}},[_c("i",{staticClass:"fa fa-external-link pR5",attrs:{"aria-hidden":"true"}}),_vm._v(" Go To Summary ")]),_c("div",{staticClass:"bold fc-white-14 pR20 pointer",on:{click:function($event){return _vm.downloadQuotation(_vm.quotationSummaryDetails)}}},[_c("inline-svg",{attrs:{src:"svgs/download2",iconClass:"icon vertical-text-top icon-xs fc-fill-path fill-path-white mR5"}}),_vm._v(" Download ")],1),_c("div",{staticClass:"fc-white-14 f20 pointer",on:{click:function($event){_vm.dialogVisible=!1}}},[_c("i",{staticClass:"el-icon-close"})])]),_vm.summaryLoading?_c("div",[_c("spinner",{attrs:{show:_vm.summaryLoading,size:80}})],1):_c("div",[_c("QuotationPreview",{attrs:{details:_vm.quotationSummaryDetails}})],1)]):_vm._e()],1),_vm.$validation.isEmpty(_vm.quotationList)?_vm._e():_c("div",{staticClass:"white-bg-block mT20 position-relative"},[_c("div",{staticClass:"p20"},[_c("div",{staticClass:"fc-id11 text-uppercase pB10"},[_vm._v(" "+_vm._s(_vm.quotationList.length>1?"Quotes":"Quote")+" ")]),_vm._l(_vm.quotationList,(function(record,index){return _c("div",{key:index,staticClass:"fc-wo-quote-card visibility-visible-actions pointer"},[_vm.isApprovalEnabled(record)?_c("div",{staticClass:"mT20 mB10 wo-quotation-approval-bar"},[_c("ApprovalBar",{key:record.id+"approval-bar",staticClass:"approval-bar-shadow",attrs:{moduleName:"quote",record:record,hideApprovers:!0},on:{onSuccess:function($event){return _vm.loadWorkorderQuotations(!0)},onFailure:function(){}}})],1):_vm._e(),_c("div",{staticClass:"items-baseline flex pT15 justify-content-space"},[_c("div",{staticClass:"items-baseline flex width70"},[_c("div",{staticClass:"fc-black2-14 bold pR10 pB5"},[_vm._v(" "+_vm._s(record.subject)+" ")]),_c("el-tag",{staticClass:"fc-tag-status text-uppercase",class:["Sent"===_vm.getTicketStatusDetails(record).status?"fc-tag-status-bg-green":"fc-tag-status-bg-grey"]},[_vm._v(_vm._s(_vm.getTicketStatusDetails(record).displayName))])],1),_c("div",{staticClass:"flex justify-content-end wo-quote-round-btn visibility-hide-actions width30"},[_c("el-button",{attrs:{round:"",icon:"el-icon-view"},on:{click:function($event){return _vm.openQuotationPreview(record)}}}),_c("el-button",{attrs:{round:"",icon:"el-icon-download"},on:{click:function($event){return _vm.downloadQuotation(record)}}}),_c("el-button",{attrs:{round:""},on:{click:function($event){return _vm.openQuotationSummary(record)}}},[_c("i",{staticClass:"fa fa-external-link",attrs:{"aria-hidden":"true"}})])],1)]),_c("div",{staticClass:"flex-middle justify-content-space pT10"},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" TOTAL AMOUNT ")]),_c("div",[_c("currency",{staticClass:"fc-black-14 bold",attrs:{value:record.totalCost}})],1)]),_c("div",{staticClass:"flex-middle justify-content-space pT10"},[_c("div",{staticClass:"fc-blue-label"},[_vm._v(" BILL DATE ")]),_vm.$validation.isEmpty(record.billDate)?_vm._e():_c("div",{staticClass:"fc-black-14 bold"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(record.billDate,!0))+" ")])])])}))],2),_vm.workorder.isQuotationNeeded?_c("div",{staticClass:"fc-wo-create-quotation-link"},[_c("div",{staticClass:"fc-dark-blue3-13 bold",on:{click:_vm.redirectToQuotationForm}},[_c("i",{staticClass:"el-icon-plus pR5 fwBold"}),_vm._v("Create Quote ")])]):_vm._e()]),_vm.showMarkupDialog?_c("el-dialog",{staticClass:"agents-dialog fc-dialog-center-container fc-dialog-center-container-2",staticStyle:{"z-index":"9999999999"},attrs:{title:"Download Preferences",visible:_vm.showMarkupDialog,width:"40%","append-to-body":!0,"before-close":_vm.closemarkupDialog},on:{"update:visible":function($event){_vm.showMarkupDialog=$event}}},[_c("div",{staticClass:"label-txt-black line-height24"},[_c("el-checkbox",{model:{value:_vm.withMarkup,callback:function($$v){_vm.withMarkup=$$v},expression:"withMarkup"}},[_vm._v("Download With Markup Value")]),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-save f13 w100",on:{click:function($event){return _vm.downloadQuote(_vm.selectedRecord)}}},[_vm._v(_vm._s("Download"))])],1)],1)]):_vm._e()],1)},WOQuotationCardvue_type_template_id_f2fecf64_staticRenderFns=[],api=(__webpack_require__(648324),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(32284)),ApprovalBar=__webpack_require__(42525),QuotationPreviewParent=__webpack_require__(678958),FetchViewsMixin=__webpack_require__(646716),relatedFieldUtil=__webpack_require__(850558),WOQuotationCardvue_type_script_lang_js={props:["workorder"],components:{ApprovalBar:ApprovalBar/* default */.Z,QuotationPreview:QuotationPreviewParent["default"]},mixins:[FetchViewsMixin/* default */.Z],data:function(){return{quotationList:{},downloadUrl:null,isLoading:!1,summaryLoading:!0,dialogVisible:!1,quotationSummaryDetails:{},withMarkup:!0,showMarkupDialog:!1,selectedRecord:null}},created:function(){this.loadWorkorderQuotations(),this.$store.dispatch("loadTicketStatus","quote")},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketStatus"])),{},{getCustomerTypeByApp:function(){return"tenant"===(0,router/* getApp */.wx)().linkName?"1":"client"===(0,router/* getApp */.wx)().linkName?"2":"vendor"===(0,router/* getApp */.wx)().linkName?"4":"occupant"===(0,router/* getApp */.wx)().linkName?"3":null}}),methods:{canShowMarkup:function(record){return(null===record||void 0===record?void 0:record.showMarkupValue)||!1},pdfUrl:function(record){var appName=(0,router/* getApp */.wx)().linkName;return this.canShowMarkup(record)&&this.withMarkup?"".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(appName,"/pdf/quotationpdf?quotationId=").concat(record.id,"&withmarkup=true"):this.canShowMarkup(record)&&!this.withMarkup?"".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(appName,"/pdf/quotationpdf?quotationId=").concat(record.id,"&withmarkup=false"):"".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(appName,"/pdf/quotationpdf?quotationId=").concat(record.id)},isApprovalEnabled:function(record){var _ref=record||{},approvalFlowId=_ref.approvalFlowId,approvalStatus=_ref.approvalStatus;return!(0,validation/* isEmpty */.xb)(approvalFlowId)&&!(0,validation/* isEmpty */.xb)(approvalStatus)},updateWorkorder:function(val){var _this=this,updateObj={id:[this.workorder.id],fields:{isQuotationNeeded:val}};this.isLoading=!0,this.$store.dispatch("workorder/updateWorkOrder",updateObj).then((function(){_this.$message.success(_this.$t("maintenance._workorder.wo_update_success")),_this.isLoading=!1})).catch((function(){_this.$message.error(_this.$t("maintenance._workorder.wo_update_failed"))}))},getTicketStatusDetails:function(record){return this.getTicketStatus(this.$getProperty(record,"moduleState.id",-1),"quote")||{}},loadWorkorderQuotations:function(){var _arguments=arguments,_this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var force,workorder,_ref2,id,relatedFieldName,relatedConfig,clientCriteria,params,_yield$API$fetchAllRe,error,list;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return force=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],_this2.isLoading=!0,workorder=_this2.workorder,_ref2=workorder||{},id=_ref2.id,relatedFieldName=(0,relatedFieldUtil/* getRelatedFieldName */.C9)("workorder","quote"),relatedConfig={moduleName:"workorder",id:id,relatedModuleName:"quote",relatedFieldName:relatedFieldName},clientCriteria={conditions:{1:{fieldName:"customerType",operatorId:9,value:_this2.getCustomerTypeByApp},2:{fieldName:"customerType",operatorId:1,value:null}},pattern:"(1 or 2)"},// let filters = {
//   customerType: { operatorId: 9, value: [this.getCustomerTypeByApp] },
// }
params={},// if (!isEmpty(filters) && this.getCustomerTypeByApp !== null) {
//   params = { filters: JSON.stringify(filters) }
// }
(0,validation/* isEmpty */.xb)(clientCriteria)||(params={clientCriteria:JSON.stringify(clientCriteria)}),_context.next=11,api/* API */.bl.fetchAllRelatedList(relatedConfig,params,{force:force});case 11:_yield$API$fetchAllRe=_context.sent,error=_yield$API$fetchAllRe.error,list=_yield$API$fetchAllRe.list,error?_this2.$error.message(error.message||"Error Occured"):(0,validation/* isEmpty */.xb)(list)||(_this2.quotationList=list),_this2.isLoading=!1;case 16:case"end":return _context.stop()}}),_callee)})))()},redirectToQuotationForm:function(){var url="/app/tm/quotation/new",query={workorder:this.workorder.id,workorderLabel:this.workorder.subject};if((0,validation/* isEmpty */.xb)(this.$getProperty(this.workorder,"tenant.id",-1))||(query["customerType"]=1,query["tenant"]=this.workorder.tenant.id,query["tenantLabel"]=this.workorder.tenant.name),(0,validation/* isEmpty */.xb)(this.$getProperty(this.workorder,"client.id",-1))||(query["customerType"]=2,query["client"]=this.workorder.client.id,query["clientLabel"]=this.workorder.client.name),(0,validation/* isEmpty */.xb)(this.workorder.siteId)||(query["siteId"]=this.workorder.siteId),320===this.$account.org.id?((0,validation/* isEmpty */.xb)(this.workorder.data)||(0,validation/* isEmpty */.xb)(this.workorder.data.unit)||(query["unit"]=this.workorder.data.unit.id,query["unitLabel"]=this.workorder.data.unit.name),(0,validation/* isEmpty */.xb)(this.workorder.resource)||(0,validation/* isEmpty */.xb)(this.workorder.resource.building)||(query["building"]=this.workorder.resource.building.id,query["buildingLabel"]=this.workorder.resource.name)):(query["subject"]=this.workorder.subject,query["description"]=this.workorder.description),(0,router/* isWebTabsEnabled */.tj)()){var _ref3=(0,router/* findRouteForModule */.Jp)("quote",router/* pageTypes */.As.CREATE)||{},name=_ref3.name;name&&this.$router.push({name:name,query:query})}else this.$router.push({path:url,query:query})},openQuotationPreview:function(record){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var _yield$API$fetchRecor,quote,error,_error$message,message;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.quotationSummaryDetails=null,_this3.dialogVisible=!0,_this3.summaryLoading=!0,_context2.next=5,api/* API */.bl.fetchRecord("quote",{id:(record||{}).id});case 5:_yield$API$fetchRecor=_context2.sent,quote=_yield$API$fetchRecor.quote,error=_yield$API$fetchRecor.error,(0,validation/* isEmpty */.xb)(error)?_this3.quotationSummaryDetails=quote:(_error$message=error.message,message=void 0===_error$message?"Error Occured while fetching Quote":_error$message,_this3.$message.error(message)),_this3.summaryLoading=!1;case 10:case"end":return _context2.stop()}}),_callee2)})))()},downloadQuotation:function(record){this.selectedRecord=null,this.showMarkupDialog=!1,this.canShowMarkup(record)?(this.selectedRecord=record,this.showMarkupDialog=!0):this.downloadQuote(record)},closemarkupDialog:function(){this.showMarkupDialog=!1,this.selectedRecord=!1},downloadQuote:function(record){var _this4=this;this.closemarkupDialog(),this.downloadUrl=null,this.$message({message:"Downloading...",showClose:!0,duration:0}),api/* API */.bl.post("/v2/integ/pdf/create",{url:this.pdfUrl(record)}).then((function(_ref4){var data=_ref4.data,error=_ref4.error;if(_this4.$message.closeAll(),error){var _error$message2=error.message,message=void 0===_error$message2?"Unable to fetch quote download link":_error$message2;_this4.$message.error(message)}else{var _ref5=data||{},fileUrl=_ref5.fileUrl;_this4.downloadUrl=fileUrl||null}_this4.withMarkup=!0}))},openQuotationSummary:function(_ref6){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var id,routerPath,viewname,_ref7,name,_ref8,href;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(id=_ref6.id,routerPath="",!(0,router/* isWebTabsEnabled */.tj)()){_context3.next=10;break}return _context3.next=5,_this5.fetchView("quote");case 5:viewname=_context3.sent,_ref7=(0,router/* findRouteForModule */.Jp)("quote",router/* pageTypes */.As.OVERVIEW)||{},name=_ref7.name,name&&(_ref8=_this5.$router.resolve({name:name,params:{viewname:viewname,id:id}})||{},href=_ref8.href,routerPath=href),_context3.next=11;break;case 10:routerPath=_this5.$router.resolve({path:"/app/tm/quotation/all/".concat(id,"/overview")}).href;case 11:window.open(routerPath,"_blank");case 12:case"end":return _context3.stop()}}),_callee3)})))()}}},v1_WOQuotationCardvue_type_script_lang_js=WOQuotationCardvue_type_script_lang_js,WOQuotationCard_component=(0,componentNormalizer/* default */.Z)(v1_WOQuotationCardvue_type_script_lang_js,WOQuotationCardvue_type_template_id_f2fecf64_render,WOQuotationCardvue_type_template_id_f2fecf64_staticRenderFns,!1,null,null,null)
/* harmony default export */,WOQuotationCard=WOQuotationCard_component.exports,SignatureColumn=__webpack_require__(724460),WOSummaryResourceCard=__webpack_require__(526424),RichTextPreviewDialog=__webpack_require__(66368),GlimpseLookupWrapper=__webpack_require__(705219),log_map_getters=__webpack_require__(160799),WorkOrderFieldDetailsvue_type_script_lang_js={name:"WorkOrderFieldDetails",mixins:[workorderHelper/* default */.Z],components:{WoTimer:WorkorderTimer/* default */.Z,UserAvatar:User/* default */.Z,WoV3EditForm:WoV3EditForm/* default */.Z,TenantAvatar:Tenant/* default */.Z,WorkorderFloorplanview:WorkorderFloorplanview,WOQuotationCard:WOQuotationCard,SignatureField:SignatureColumn/* default */.Z,WOSummaryResourceCard:WOSummaryResourceCard/* default */.Z,RichTextPreview:RichTextPreviewDialog/* default */.Z,GlimpseLookupWrapper:GlimpseLookupWrapper/* default */.Z},props:["workorder","updateWoActions","refreshWoDetails","excludeFields","isDisableForApproval","currentView","forV3"],data:function(){return{floorplanVisible:!1,duedate:"",vendorsList:[],editFormVisibilty:!1,fields:[],floorPlanViewMode:{},loading:!0,selectedFile:null,showPreview:!1,richTextContent:null,richTextField:null,showRichTextPreview:!1}},mounted:function(){this.loadVendorsPicklist(),this.loadFields(),this.isFileTypeField=utils_field/* isFileTypeField */.Lg},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapGetters */.Se)(["getTicketPriority","isStatusLocked","getApprovalStatus","getTicketCategory"])),(0,log_map_getters/* mapGettersWithLogging */.t)(["getSpace"])),{},{isTenantEnabled:function(){return this.$helpers.isLicenseEnabled("TENANTS")},isClientEnabled:function(){return this.$helpers.isLicenseEnabled("CLIENT")},isRequestedState:function(){var workorder=this.workorder,_ref=workorder||{},approvalStatus=_ref.approvalStatus;if((0,validation/* isEmpty */.xb)(approvalStatus))return!1;var statusObj=this.getApprovalStatus(approvalStatus.id);return this.$getProperty(statusObj,"requestedState",!1)},filteredFields:function(){
// this is only for investa org vendor portal
return 17===this.$org.id?(this.fields||[]).filter((function(field){return"wototalcost"!==field.name})):this.fields||[]},canEdit:function(){if(!this.$hasPermission("workorder:UPDATE")||406===this.$account.org.orgId||274===this.$account.org.orgId&&1240===this.$account.user.roleId)
// Restricting for 406 || BrightFM ,Techinician Role
return!1;var hasState=this.$getProperty(this.workorder,"moduleState.id",null),isLocked=!!hasState&&this.isStatusLocked(this.workorder.moduleState.id,"workorder"),isRequestedState=this.isRequestedState;return hasState&&!isLocked&&!isRequestedState},actualWorkDurationField:function(){return this.fields.find((function(field){return"actualWorkDuration"===field.name}))}}),methods:{canShowRichTextContent:function(field){var _ref2=field||{},displayType=_ref2.displayType,richTextContent=this.getRichTextContent(field);return!(0,validation/* isEmpty */.xb)(richTextContent)&&"RICH_TEXT"===displayType},getRichTextContent:function(field){var workorder=this.workorder,_ref3=workorder||{},data=_ref3.data,_ref4=field||{},name=_ref4.name;return this.$getProperty(data,name,"")},openRichTextPreview:function(field){this.richTextContent=this.getRichTextContent(field),this.richTextField=field,this.showRichTextPreview=!0},closeRichTextPreview:function(){this.richTextContent=null,this.richTextField=null,this.showRichTextPreview=!1},handleUpdateVisibility:function(data){this.editFormVisibilty=data},getFieldDisplayName:function(fieldName){var fields=this.fields,_ref5=fields.find((function(f){return f.name===fieldName}))||{},displayName=_ref5.displayName;return displayName||""},getMultiEnumFieldValues:function(props){var field=props.field,_props$data=props.data,data=void 0===_props$data?{}:_props$data,name=field.name,enumMap=field.enumMap,values=data[name]||[],valueStr=values.reduce((function(accStr,value){var str=enumMap[value]||"";return(0,validation/* isEmpty */.xb)(accStr)?"".concat(str):"".concat(accStr,", ").concat(str)}),"");return(0,validation/* isEmpty */.xb)(valueStr)?"---":valueStr},canShowLookupField:function(field){return!(0,validation/* isEmpty */.xb)(field)&&(!this.canHideField("isLookupField")&&(0,utils_field/* isLookupField */.Qf)(field))},openTenant:function(id){if(id)if((0,router/* isWebTabsEnabled */.tj)()){var _ref6=(0,router/* findRouteForModule */.Jp)("tenant",router/* pageTypes */.As.OVERVIEW)||{},name=_ref6.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else{var url="/app/tm/tenants/all/"+id+"/overview";this.$router.replace({path:url})}},loadVendorsPicklist:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"vendors"}});case 2:_yield$getFieldOption=_context.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error?_this.$message.error(error.message||"Error Occured"):_this.vendorsList=options;case 6:case"end":return _context.stop()}}),_callee)})))()},openParentWo:function(parentWo){var _ref7=parentWo||{},id=_ref7.id;if(id)if((0,router/* isWebTabsEnabled */.tj)()){var currentView=this.currentView,_ref8=(0,router/* findRouteForModule */.Jp)("workorder",router/* pageTypes */.As.OVERVIEW)||{},name=_ref8.name;name&&this.$router.push({name:name,params:{viewname:currentView,id:id}})}else this.$router.push({path:"/app/wo/orders/summary/"+id})},redirectToSpecialModule:function(field,data){if(!(0,validation/* isEmpty */.xb)(field)&&!(0,validation/* isEmpty */.xb)(data)){var fieldName=field.name,_field$lookupModule=field.lookupModule,lookupModule=void 0===_field$lookupModule?{}:_field$lookupModule;if(!(0,validation/* isEmpty */.xb)(lookupModule)){var name=lookupModule.name;if((0,router/* isWebTabsEnabled */.tj)()){var _ref9=(0,router/* findRouteForModule */.Jp)(name,router/* pageTypes */.As.OVERVIEW)||{},routeName=_ref9.name;if(routeName){var _ref10="vendors"===name?data[name]:data[fieldName],id=_ref10.id;this.$router.push({name:routeName,params:{viewname:"all",id:id}})}}else{var urlHash={vendors:{name:"vendorsummary",params:{viewname:"all",vendorid:this.$getProperty(data,"vendors.id",null)}},custom:{name:"custommodules-summary",params:{viewName:"all",id:data[fieldName].id,moduleName:name}},inspectionResponse:{name:"individualInspectionSummary",params:{viewname:"all",id:this.$getProperty(data,"".concat(fieldName,".id"),null)}},inductionResponse:{name:"individualInductionList",params:{viewname:"all",id:this.$getProperty(data,"".concat(fieldName,".id"),null)}}},routerParams={};"vendors"===name?routerParams=urlHash["vendors"]:"CUSTOM"===lookupModule.typeEnum?routerParams=urlHash["custom"]:Object.keys(urlHash).includes(name)&&(routerParams=urlHash[name]),(0,validation/* isEmpty */.xb)(routerParams)||this.$router.push(routerParams)}}}},updateWo:function(){this.updateWoActions(),this.refreshWoDetails()},findRoute:function(){if((0,router/* isWebTabsEnabled */.tj)()){var tabType=router/* tabTypes */.VF.CUSTOM,config={type:"portfolio"},route=(0,router/* findRouteForTab */.OD)(tabType,{config:config})||{};return(0,validation/* isEmpty */.xb)(route)?null:this.$router.resolve({name:route.name}).href}return"/app/home/portfolio"},canHideField:function(fieldName){return this.excludeFields.includes(fieldName)},isFieldEmpty:function(field,workorderData){var name=field.name,displayType=field.displayType,value=workorderData[name];return("SIGNATURE"===displayType||(0,utils_field/* isFileTypeField */.Lg)(field))&&(value=workorderData["".concat(name,"Id")]),(0,validation/* isEmpty */.xb)(value)},openAttachment:function(field,workorder){this.selectedFile={contentType:workorder["".concat(field.name,"ContentType")],fileName:workorder["".concat(field.name,"FileName")],downloadUrl:workorder["".concat(field.name,"DownloadUrl")],previewUrl:workorder["".concat(field.name,"Url")]},this.showPreview=!0},getMultiLookupValue:function(value){var lookupRecordNames=(value||[]).map((function(currRecord){return currRecord.displayName||currRecord.name||currRecord.subject}));return lookupRecordNames.length>5?"".concat(lookupRecordNames.slice(0,5).join(", ")," +").concat(Math.abs(lookupRecordNames.length-5)):(0,validation/* isEmpty */.xb)(lookupRecordNames)?"---":"".concat(lookupRecordNames.join(", "))}}},v1_WorkOrderFieldDetailsvue_type_script_lang_js=WorkOrderFieldDetailsvue_type_script_lang_js,WorkOrderFieldDetails_component=(0,componentNormalizer/* default */.Z)(v1_WorkOrderFieldDetailsvue_type_script_lang_js,render,staticRenderFns,!1,null,"0ae895fa",null)
/* harmony default export */,WorkOrderFieldDetails=WorkOrderFieldDetails_component.exports},
/***/539884:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"0583a4b2baa10f449134fd3347e2951c.svg";
/***/},
/***/164065:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"ee31f43b8151f3590eba8e0562377413.svg";
/***/},
/***/703659:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"782922838e1b33e6568fd666d379c2b8.svg";
/***/},
/***/916803:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"45e80daecf3b2313cd875b1056bb278b.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/32142.js.map