"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[60317],{
/***/360317:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AlarmSummary}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/firealarm/alarms/v2/AlarmSummary.vue?vue&type=template&id=219e16f9
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.alarm?_c("div",[_c("div",{staticClass:"alarm-summary-header"},[_c("div",{staticClass:"fL"},[_c("div",{staticClass:"fc-id"},[_vm._v("#"+_vm._s(_vm.alarm.id))]),_c("div",{staticClass:"fc-black3-24 max-width650px textoverflow-height-ellipsis"},[_vm._v(" "+_vm._s(_vm.alarm.subject?_vm.alarm.subject:"---")+" ")]),_c("div",[_vm.alarm.severity?_c("div",{staticClass:"flex-middle mT10"},[_c("div",{staticClass:"uppercase secondary-color summaryseverityTag f11",style:{"background-color":_vm.getAlarmSeverity(_vm.alarm.severity.id).color}},[_vm._v(" "+_vm._s(_vm.alarm.severity.id?_vm.getAlarmSeverity(_vm.alarm.severity.id).displayName:"---")+" ")]),_vm.alarm&&_vm.alarm.lastOccurredTime&&_vm.alarm.lastOccurredTime>-1?_c("div",{staticClass:"fc-blue-label mL10 f11 letter-spacing: 0.7px;",staticStyle:{"margin-top":"-4px"}},[_vm._v(" "+_vm._s(_vm._f("fromNow")(_vm.alarm.lastOccurredTime))+" ")]):_vm._e()]):_vm._e()])]),_c("div",{staticClass:"fR"},[_c("div",{staticClass:"triangle-close"},[_c("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"close-summary-icon material-icons pull-right pointer",attrs:{"data-theme":"light","data-arrow":"true"},on:{click:_vm.closeSummary}},[_vm._v("close")])]),_c("div",{staticClass:"display-flex fc-v2-alarmsum-actions"},[!_vm.alarm.acknowledged&&_vm.isActiveAlarm(_vm.alarm)&&_vm.$hasPermission("alarm:ACKNOWLEDGE_ALARM")?_c("el-button",{staticClass:"fc-btn-green-lg-fill",on:{click:function($event){return _vm.acknowledgeAlarms()}}},[_vm._v(_vm._s(_vm.$t("alarm.alarm.acknowledge")))]):_vm.isActiveAlarm(_vm.alarm)?_c("div",{staticClass:"q-item-label mR10 status-btn2"},[_c("span",{staticClass:"pB10 fc-summary-ack ellipsis"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.acknowledge_by"))+" "+_vm._s(_vm.alarm.acknowledgedBy?_vm.$store.getters.getUser(_vm.alarm.acknowledgedBy.id).name:"Unknown")+" ")]),_c("div",{staticClass:"text-right"},[_vm._v("   "),_c("span",{staticClass:"fc-summary-timeago text-right"},[_vm._v(" "+_vm._s(_vm._f("fromNow")(_vm.alarm.acknowledgedTime>0?_vm.alarm.acknowledgedTime:new Date))+" ")])])]):_c("div",{staticClass:"q-item-label fc-summary-ack status-btn1 pR10 pointer"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.unacknowledged"))+" ")]),_vm.isActiveAlarm(_vm.alarm)&&_vm.$hasPermission("alarm:CLEAR_ALARM")?_c("el-button",{staticClass:"fc-btn-green-lg-border",on:{click:function($event){return _vm.updateAlarmsStatus()}}},[_vm._v(_vm._s(_vm.$t("common.header.clear")))]):_vm._e(),_vm.isActiveAlarm(_vm.alarm)?_c("q-icon",{staticClass:"fc-btn-ico-lg mL10",attrs:{slot:"right",name:"more_vert"},slot:"right"},[_c("q-popover",{ref:"moreactionspopover"},[_c("q-list",{staticClass:"no-border",attrs:{link:""}},[_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common.wo_report.export_csv")},on:{click:function($event){_vm.exportSummary(1),_vm.$refs.moreactionspopover.close()}}})],1),_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common.wo_report.export_xcl")},on:{click:function($event){_vm.exportSummary(2),_vm.$refs.moreactionspopover.close()}}})],1),_vm.occurrence.woId>0?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("alarm.alarm.json")},on:{click:function($event){_vm.openWorkorder(_vm.occurrence.woId),_vm.$refs.moreactionspopover.close()}}})],1):_vm.$hasPermission("alarm:CREATE_WO")?_c("q-item",[_c("q-item-main",{attrs:{label:_vm.$t("common.wo_report.create_workorder")},on:{click:function($event){return _vm.openAlarmWoCreation(_vm.occurrence.lastOccurrenceId)}}})],1):_vm._e()],1)],1)],1):_vm._e()],1)])])]):_c("div"),_vm.alarm?_c("div",{staticClass:"alarm-summary-body clearboth"},[_c("div",{staticClass:"alarm-summary-body-left newalarm-summary-body-left"},[_c("div",{staticClass:"alaram-summary-body-scroll"},[_c("div",{staticClass:"alarm-summary-inner"},[_c("div",{staticClass:"alarm-summary-box-block"},[_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box mR10"},[_vm.occurrence&&_vm.occurrence.additionInfo&&_vm.occurrence.additionInfo.problem?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.problem"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 break-word",domProps:{innerHTML:_vm._s(_vm.occurrence.additionInfo.problem)}})]):_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.message"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 break-word",domProps:{innerHTML:_vm._s(_vm.alarm.description)}})])]),_vm.alarm.readingFieldId>0?_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box",style:_vm.alarm.description?"width:100%":""},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.threshold_metric"))+" ")]),_vm.alarm.readingFieldId&&_vm.readingField.displayName?_c("div",{staticClass:"label-txt-black mT10 line-height20 break-word"},[_vm._v(" "+_vm._s(_vm.alarm.readingFieldId?_vm.readingField?_vm.readingField.displayName:_vm.loadFieldDetails():"---")+" ")]):_vm._e()]),_vm.alarm.readingVal&&_vm.readingField.unit?_c("el-col",{staticClass:"pL20",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recorded_value"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(Number(_vm.alarm.readingVal).toFixed(2))+" "+_vm._s(_vm.loadReadingField())+" ")])]):_vm._e()],1)],1):_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box",style:_vm.alarm.description?"width:100%":""},[_vm.alarm&&!_vm.alarm.rule?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.source"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 break-word"},[_vm._v(" "+_vm._s(_vm.alarm.source?_vm.alarm.source:"---")+" ")])]):_vm._e()])]),_vm.alarm&&_vm.alarm.data?_c("div",{staticClass:"alarm-summary-box-block mT10"},[_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box width100"},[_c("el-row",_vm._l(_vm.alarm.data,(function(key,value){return _c("el-col",{key:value,attrs:{span:6}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.getFieldByName(value)?_vm.getFieldByName(value).displayName:"")+" ")]),_c("div",{staticClass:"label-txt-black line-height20 mT10"},[_vm._v(" "+_vm._s(_vm.$helpers.unitValueString(_vm.getFieldByName(value),_vm.formattedKey(key)))+" ")])])})),1)],1)]):_vm._e(),_c("div",{staticClass:"alarm-summary-box-block mT10"},[5===_vm.alarm.type?_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.condition"))+" ")]),_vm.alarm&&_vm.alarm.condition?_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v(" "+_vm._s(_vm.alarm?_vm.alarm.condition:"---")+" ")]):_c("div",{staticClass:"label-txt-black mT10 line-height20"},[_vm._v("---")])]):_vm._e(),1===_vm.alarm.type?_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("systemlabels.diagnostics.rule"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 pointer",on:{click:function($event){return _vm.openRuleSummary(_vm.alarm.rule.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.rule?_vm.alarm.rule.name:"---")+" ")])]):_vm._e(),_c("div",{staticClass:"alarm-summary-box-left alarm-summary-box mL10"},[_c("el-row",[_c("el-col",{attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common.header.last_occured_time"))+" ")]),_vm.occurrence&&_vm.occurrence.createdTime?_c("div",{staticClass:"fc-black-13 mT10 line-height20 text-left"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.occurrence.createdTime))+" ")]):_c("div",{staticClass:"label-txt-black mT10"},[_vm._v("---")])]),_c("el-col",{staticClass:"pL10 pR0",attrs:{span:12}},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common.header.last_reported_on"))+" ")]),_vm.alarm&&_vm.alarm.lastOccurredTime?_c("div",{staticClass:"fc-black-13 mT10 line-height20 text-left"},[_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.alarm.lastOccurredTime))+" ")]):_c("div",{staticClass:"label-txt-black mT10"},[_vm._v("---")])])],1)],1)]),_vm.alarm.rule?_c("div",{staticClass:"alarm-summary-graph-container"},[_c("div",{staticClass:"alarm-summary-graph-inner"},[_c("div",{staticClass:"alarm-summary-graph-header"},[_c("div",{staticClass:"fc-black-16 bold fL"},[_vm._v(" "+_vm._s(_vm.$t("common.header.alarms_report"))+" ")])]),_c("div",{},[_vm.analyticsConfig?_c("f-new-analytic-report",{ref:"newAlarmAnalyticReport",staticClass:"alarm-summary-chart",attrs:{config:_vm.analyticsConfig}}):_vm._e()],1),_c("div",{staticClass:"analytics-txt pB0"},[_c("div",{staticClass:"fc-summary-content-div"},[_c("div",{staticClass:"content analytics-txt",staticStyle:{cursor:"pointer",color:"rgb(57, 178, 194)","font-size":"13px","text-align":"right","font-weight":"500","margin-right":"20px"},on:{click:function($event){return _vm.jumpAlarmToAnalytics(_vm.occurrence.id,null,12!==_vm.alarm.resource.resourceType)}}},[_vm._v(" "+_vm._s(_vm.$t("common.products.go_to_analytics"))+" "),_c("img",{staticStyle:{width:"13px",height:"9px"},attrs:{src:__webpack_require__(862620)}})])])]),_c("div",[_vm.occurrence.additionInfo&&(_vm.occurrence.additionInfo.possibleCauses||_vm.occurrence.additionInfo.recommendation)?_c("div",[_c("div",{staticClass:"pL20 pR20 mT10 pT20 pB20 border-top3"},[_vm.occurrence.additionInfo.possibleCauses?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common._possible_causes"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 space-preline break-word"},[_vm._v(" "+_vm._s(_vm.occurrence.additionInfo.possibleCauses)+" ")])]):_vm.occurrence.additionInfo.possibleCauses?_vm._e():_c("div")]),_c("div",{staticClass:"mT10 pL20 pR20 pB20"},[_vm.occurrence.additionInfo.recommendation?_c("div",[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.possible_solutions"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 space-preline break-word"},[_vm._v(" "+_vm._s(_vm.occurrence.additionInfo.recommendation)+" ")])]):_vm.occurrence.additionInfo.recommendation?_c("div"):_vm._e()])]):_vm._e()])])]):_vm._e(),_vm.additionInfo&&_vm.additionInfo.rcaJSONArray&&_vm.additionInfo.rcaJSONArray.length>0?_c("div",{staticClass:"mB10 position-relative"},[_c("div",{staticClass:"fc-grey2 mT20 fw-bold text-uppercase f11"},[_vm._v(" "+_vm._s(_vm.$t("common.header.root_cause_analysis"))+" ")]),_c("el-collapse",{ref:"alarmlistcollapse",staticClass:"dashboard-collapse alarm-summary-dashboard",attrs:{accordion:""},model:{value:_vm.activeRule,callback:function($$v){_vm.activeRule=$$v},expression:"activeRule"}},_vm._l(_vm.additionInfo.rcaJSONArray,(function(rca,index){return _c("el-collapse-item",{key:index,staticClass:"pT10 position-relative",attrs:{name:rca.rcaRule.id}},[_c("template",{slot:"title"},[_c("div",{staticClass:"fL width90"},[_c("div",{staticClass:"fc-black3-16 text-capitalize"},[_vm._v(" "+_vm._s(rca.rcaRule.actions[0].template&&rca.rcaRule.actions[0].template.originalTemplate?rca.rcaRule.actions[0].template.originalTemplate.problem:null)+" "),_c("span",{staticClass:"fc-grey2-text12 bold",staticStyle:{"text-transform":"lowercase"}},[_vm._v(" ("+_vm._s(rca.rcaRule?"v"+rca.rcaRule.versionNumber:null)+") ")]),rca.isActive?_c("span",{staticClass:"fc-grey2 f10 f10 pL20"},[_c("i",{staticClass:"fa fa-circle pR10 fc-green",attrs:{"aria-hidden":"true"}}),_vm._v(_vm._s(_vm.$t("common._common.active"))+" ")]):_c("span",{staticClass:"fc-grey2 f10 pL20"},[_c("i",{staticClass:"fa fa-circle pR10 fc-red f10",attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.$t("common._common.inactive"))+" ")])])]),_c("div",{staticClass:"fR"},[_c("i",{staticClass:"el-icon-arrow-up f16"}),_c("i",{staticClass:"el-icon-arrow-down f16"})])]),_c("div",{staticClass:"clear"},[_c("div",[rca.analyticsConfig?_c("f-new-analytic-report",{ref:"newAnalyticReport",refInFor:!0,staticClass:"alarm-summary-chart alarm-summary-chart-root-cause",attrs:{config:rca.analyticsConfig}}):_vm._e()],1),_c("div",{staticClass:"analytics-txt"},[_c("div",{staticClass:"fc-summary-content-div"},[_c("div",{staticClass:"content analytics-txt",staticStyle:{cursor:"pointer",color:"rgb(57, 178, 194)","font-size":"13px","text-align":"right","font-weight":"500","margin-right":"20px"},on:{click:function($event){return _vm.jumpAlarmToAnalytics(_vm.occurrence.id,null,!1,rca.rcaRule.id)}}},[_vm._v(" "+_vm._s(_vm.$t("common.products.go_to_analytics"))+" "),_c("img",{staticStyle:{width:"13px",height:"9px"},attrs:{src:__webpack_require__(862620)}})])])])]),rca.rcaRule.actions&&rca.rcaRule.actions[0]?_c("div",{staticClass:"pT20 pL20 pB20 pR20 border-top3"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common._possible_causes"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 space-preline"},[_vm._v(" "+_vm._s(rca.rcaRule.actions[0].template&&rca.rcaRule.actions[0].template.originalTemplate&&rca.rcaRule.actions[0].template.originalTemplate.possibleCauses?rca.rcaRule.actions[0].template.originalTemplate.possibleCauses:null)+" ")])]):_vm._e(),_c("div",{staticClass:"pL20 pB20 pR20"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.possible_solutions"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 space-preline"},[_vm._v(" "+_vm._s(rca.rcaRule.actions[0].template&&rca.rcaRule.actions[0].template.originalTemplate?rca.rcaRule.actions[0].template.originalTemplate.recommendation:null)+" ")])]),_c("div",{staticClass:"pT30 pL20 pB20 pR20"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase letter-spacing07"},[_vm._v(" "+_vm._s(_vm.$t("common._common.recommendation"))+" ")]),_c("div",{staticClass:"label-txt-black mT10 line-height20 space-preline"},[_vm._v(" "+_vm._s(rca.rcaRule.actions[0].template&&rca.rcaRule.actions[0].template.originalTemplate?rca.rcaRule.actions[0].template.originalTemplate.recommendation:null)+" ")])])],2)})),1)],1):_vm._e(),_c("div",{staticClass:"fc-white-bg-container mT10 p0 alarm-comment-con"},[_c("div",{staticClass:"row pT20",staticStyle:{"border-bottom":"1px solid #f4f4f4"}},[_c("div",{staticClass:"col-12"},[_c("div",{staticClass:"row pL20"},[_c("div",{staticClass:"col-1 fc-black-13 text-left pointer bold",on:{click:function($event){return _vm.selectSubSection("comment")}}},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.comments"))+" "),_c("div",{class:{wosactive:"comment"===_vm.subSection},staticStyle:{width:"50%"}})]),_c("div",{staticClass:"col-1 fc-black-13 text-left pointer bold mL60",on:{click:function($event){return _vm.selectSubSection("event")}}},[_vm._v(" "+_vm._s(_vm.$t("common.header.evetns"))+" "),_c("div",{class:{wosactive:"event"===_vm.subSection},staticStyle:{width:"50%"}})]),_c("div",{staticClass:"col-3 fc-black-13 text-left pointer bold mL40",on:{click:function($event){return _vm.selectSubSection("occurrence")}}},[_vm._v(" "+_vm._s(_vm.$t("alarm.alarm.related_alarms"))+" "),_c("div",{class:{wosactive:"occurrence"===_vm.subSection},staticStyle:{width:"30%"}})])])])]),_vm.loading||"comment"!==_vm.subSection?_vm._e():_c("comments",{staticStyle:{"margin-left":"40px","margin-right":"30px"},attrs:{module:"basealarmnotes",parentModule:"newreadingalarm",record:_vm.alarm,notify:!1}}),"event"===_vm.subSection?_c("div",{staticClass:"row event-inner-container"},[_c("table",{staticStyle:{"margin-bottom":"100px"},attrs:{width:"100%;"}},_vm._l(_vm.formatedEventList,(function(event,index){return _c("tr",{key:index,staticStyle:{"border-bottom":"solid 1px rgba(151, 151, 151, 0.2)","line-height":"2.79"}},[_c("td",{staticStyle:{width:"100%"}},[_c("div",{staticClass:"event-msg"},[_c("div",{staticClass:"id-color f12 pull-left pointer"},[_c("span",{staticClass:"f11"},[_vm._v("#")]),_vm._v(" "+_vm._s(event.id)+" ")]),_c("div",{staticClass:"event-content"},[_vm._v(" "+_vm._s(event.eventMessage)+" ")]),_c("div",{staticStyle:{float:"right","font-size":"12px","letter-spacing":"0.4px","text-align":"right",color:"#919191"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(event.createdTime))+" ")]),_c("div",{staticStyle:{clear:"both"}})])])])})),0)]):_vm._e(),"occurrence"===_vm.subSection?_c("div",[_vm.formatedOccurrence.length?_vm._l(_vm.formatedOccurrence,(function(occurrence,index){return _c("el-row",{key:index,staticClass:"pR10 pT10 pB10 mL20 mR20",staticStyle:{"line-height":"2.79","border-bottom":"solid 1px rgba(151, 151, 151, 0.2)"}},[_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"id-color f13 pull-left pointer"},[_vm._v(" #"+_vm._s(occurrence.id)+" ")])]),_c("el-col",{attrs:{span:15}},[_c("div",{staticClass:"event-content2"},[_vm._v(_vm._s(_vm.alarm.subject))])]),_c("el-col",{attrs:{span:2}},[_c("div",{staticClass:"fc-id",style:{color:_vm.getAlarmSeverity(occurrence.previousSeverity?occurrence.previousSeverity.id:occurrence.severity.id).color}},[_vm._v(" "+_vm._s(_vm.getAlarmSeverity(occurrence.previousSeverity?occurrence.previousSeverity.id:occurrence.severity.id).severity)+" ")])]),_c("el-col",{attrs:{span:5}},[_c("div",{staticStyle:{"font-size":"12px","letter-spacing":"0.4px","text-align":"right",color:"#919191"}},[_vm._v(" "+_vm._s(_vm._f("formatDate")(occurrence.createdTime))+" ")])])],1)})):_c("div",{staticClass:"empty-msg"},[_vm._v(" "+_vm._s(_vm.$t("common.products.no_occurrence_found"))+" ")])],2):_vm._e()],1)])])]),_c("div",{staticClass:"alarm-summary-body-right clearboth newalarm-summary-body-right"},[_c("div",{staticClass:"alaram-summary-body-scroll mL30 mR20"},[_vm.occurrence&&_vm.occurrence.createdTime&&-1===_vm.occurrence.clearedTime?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase pB10"},[_vm._v(" "+_vm._s(_vm.$t("common.header.alarm_duration"))+" ")]),_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+_vm.alarm.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n              html: '#timer_popover_' + alarm.id,\n              distance: 0,\n              interactive: true,\n              theme: 'light',\n              animation: 'scale',\n              arrow: true,\n            }"}],staticClass:"alarm-timer",attrs:{time:_vm.occurrence.createdTime,twoDigits:_vm.showingTwoDigit,title:_vm._f("formatDate")(_vm.occurrence.createdTime)}})],1):_vm.occurrence&&_vm.occurrence.createdTime&&-1!==_vm.occurrence.clearedTime?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase pB10"},[_vm._v(" "+_vm._s(_vm.$t("common.header.alarm_duration"))+" ")]),_c("timer",{directives:[{name:"tippy",rawName:"v-tippy",value:{html:"#timer_popover_"+_vm.alarm.id,distance:0,interactive:!0,theme:"light",animation:"scale",arrow:!0},expression:"{\n              html: '#timer_popover_' + alarm.id,\n              distance: 0,\n              interactive: true,\n              theme: 'light',\n              animation: 'scale',\n              arrow: true,\n            }"}],staticClass:"alarm-timer p10",attrs:{time:_vm.occurrence.clearedTime-_vm.occurrence.createdTime,staticTime:!0,twoDigits:_vm.showingTwoDigit,title:_vm._f("formatDate")(_vm.occurrence.clearedTime-_vm.occurrence.createdTime)}})],1):_vm._e(),_vm.resource?_c("div",{staticClass:"asset-con"},[_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common._common._asset_category"))+" ")]),_vm.resource&&_vm.resource.category&&_vm.resource.category.id?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(_vm.resource&&_vm.getAssetCategoryById(_vm.resource.category.id).displayName?_vm.getAssetCategoryById(_vm.resource.category.id).displayName:"---")+" ")]):_vm._e()]),_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common._common.asset_name"))+" ")]),_vm.resource&&_vm.resource.name?_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openAsset(_vm.alarm.resource.id)}}},[_vm._v(" "+_vm._s(_vm.resource.name?_vm.resource.name:"---")+" ")]):_vm._e()]),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(1,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.products.site"))+" ")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openSite(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(1,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e(),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(2,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common._common.building"))+" ")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openBuilding(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(2,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e(),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(3,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common._common.floor"))+" ")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openFloor(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(3,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e(),_vm.resource&&_vm.resource.space&&_vm.resource.space.name&&"---"!==_vm.getSpace(4,_vm.alarm.resource.space.id)?_c("div",{staticClass:"mT25"},[_c("div",{staticClass:"fc-blue-label f11 text-uppercase"},[_vm._v(" "+_vm._s(_vm.$t("common.space_asset_chooser.space"))+" ")]),_c("div",{staticClass:"mT10 label-txt-black pointer",on:{click:function($event){return _vm.openSpace(_vm.alarm.resource.space.id)}}},[_vm._v(" "+_vm._s(_vm.alarm.resource&&_vm.alarm.resource.space&&_vm.alarm.resource.space.id?_vm.getSpace(4,_vm.alarm.resource.space.id):"---")+" ")])]):_vm._e()]):_vm._e(),_vm.alarm&&_vm.occurrence.woId&&_vm.workorder?_c("div",{staticClass:"mT25"},[_c("div",{},[_c("div",{staticClass:"fc-text-pink11"},[_vm._v(" "+_vm._s(_vm.$t("common._common.workorder"))+" ")]),_vm.workorder&&_vm.workorder.id?_c("div",{staticClass:"label-txt-black mT5 pointer fc-id",on:{click:function($event){return _vm.openWorkorder(_vm.occurrence.woId)}}},[_vm._v(" #"+_vm._s(_vm.workorder.serialNumber)+" ")]):_vm._e(),_vm.workorder&&_vm.workorder.subject?_c("div",{staticClass:"label-txt-black mT5 pointer",on:{click:function($event){return _vm.openWorkorder(_vm.occurrence.woId)}}},[_vm._v(" "+_vm._s(_vm.workorder.subject?_vm.workorder.subject:"---")+" ")]):_vm._e()]),_c("div",[_vm.workorder&&_vm.workorder.dueDate&&-1!==_vm.workorder.dueDate?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v(" "+_vm._s(_vm.$t("common.header.due_time"))+" ")]),_vm.workorder&&_vm.workorder.dueDate?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(-1!==_vm.workorder.dueDate?_vm.workorder.dueDateString:"")+" ")]):_vm._e()]):_vm._e(),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v(" "+_vm._s(_vm.$t("common.products.status"))+" ")]),_vm.workorder&&_vm.workorder.status&&_vm.workorder.status.displayName?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(_vm.workorder.status.displayName?_vm.workorder.status.displayName:"---")+" ")]):_vm._e()]),_vm.workorder&&_vm.workorder.assignedTo>0?_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v(" "+_vm._s(_vm.$t("maintenance.wr_list.assignedto"))+" ")]),_vm.workorder&&_vm.workorder.assignedTo&&_vm.workorder.assignedTo.name?_c("div",{staticClass:"mT10 label-txt-black"},[_vm._v(" "+_vm._s(_vm.workorder.assignedTo.name?_vm.workorder.assignedTo.name:"---")+" ")]):_vm._e()]):_vm._e(),_c("div",{staticClass:"mT20"},[_c("div",{staticClass:"fc-blue-label f11"},[_vm._v(" "+_vm._s(_vm.$t("common.header.priority"))+" ")]),_vm.workorder&&_vm.workorder.priority&&_vm.workorder.priority.priority?_c("div",{staticClass:"mT10 label-txt-black"},[_c("i",{staticClass:"fa fa-circle f9",style:{color:_vm.workorder.priority.colour},attrs:{"aria-hidden":"true"}}),_vm._v(" "+_vm._s(_vm.workorder.priority.priority?_vm.workorder.priority.priority:"---")+" ")]):_vm._e()])])]):_vm._e()])])]):_vm._e(),_vm.showAssetExport?_c("el-dialog",{staticClass:"dialog-header-remove export-dialog",attrs:{visible:_vm.showAssetExport,width:"30%"},on:{"update:visible":function($event){_vm.showAssetExport=$event}}},[_c("div",{staticClass:"new-header-container"},[_c("div",{staticClass:"new-header-text"},[_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s(_vm.$t("common.wo_report.export_alarm_summary"))+" ")])])]),_c("div",{staticClass:"export-body-dailog"},[_c("div",[_c("el-checkbox",{staticStyle:{"padding-bottom":"10px","padding-left":"40px","padding-top":"10px"},attrs:{checked:"",disabled:""}},[_vm._v(_vm._s(_vm.$t("common.events.all_events")))])],1),_c("el-checkbox-group",{staticClass:"check-padding-remove",model:{value:_vm.selectedFields,callback:function($$v){_vm.selectedFields=$$v},expression:"selectedFields"}},[_c("div",{staticClass:"row"},_vm._l(_vm.assetFields,(function(field){return _c("el-checkbox",{key:field.id,staticClass:"check-width",attrs:{label:field.id}},[_vm._v(_vm._s(field?field.displayName:""))])})),1)])],1),_c("div",{staticClass:"modal-dialog-footer"},[_c("el-button",{staticClass:"modal-btn-cancel",on:{click:function($event){return _vm.closeExportDialog()}}},[_vm._v(_vm._s(_vm.$t("common._common.cancel")))]),_c("el-button",{staticClass:"modal-btn-save",attrs:{type:"primary"},on:{click:function($event){return _vm.exportEvent()}}},[_vm._v(_vm._s(_vm.$t("common.wo_report.export_data")))])],1)]):_vm._e(),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e(),_vm.canShowAlarmWoCreation?_c("AlarmWoCreation",{attrs:{canShowDialog:_vm.canShowAlarmWoCreation,currentAlarmId:_vm.currentAlarmId},on:{"update:canShowDialog":function($event){_vm.canShowAlarmWoCreation=$event},"update:can-show-dialog":function($event){_vm.canShowAlarmWoCreation=$event},"update:currentAlarmId":function($event){_vm.currentAlarmId=$event},"update:current-alarm-id":function($event){_vm.currentAlarmId=$event},onSuccess:_vm.onAlarmWoCreation}}):_vm._e()],1)},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),objectSpread2=__webpack_require__(595082),Timer=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(425728),__webpack_require__(947522),__webpack_require__(434284),__webpack_require__(659749),__webpack_require__(386544),__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(670560),__webpack_require__(634338),__webpack_require__(114857)),Comments=__webpack_require__(147105),moment_moment=__webpack_require__(730381),moment_default=__webpack_require__.n(moment_moment),quasar_esm=__webpack_require__(641358),vuex_esm=__webpack_require__(420629),FNewAnalyticReport=__webpack_require__(794925),JumpToHelper=__webpack_require__(921466),AnalyticsMixin=__webpack_require__(244936),NewDateHelper=__webpack_require__(105534),AlarmWoCreation=__webpack_require__(209881),NewReportHelper=__webpack_require__(562023),d3=__webpack_require__(348727),router=__webpack_require__(329435),validation=__webpack_require__(990260),log_map_getters=__webpack_require__(160799),log_map_state=__webpack_require__(766331),AlarmSummaryvue_type_script_lang_js={mixins:[JumpToHelper/* default */.Z,NewReportHelper/* default */.Z,AnalyticsMixin/* default */.Z,NewDateHelper/* default */.Z],data:function(){return{alarmFields:[],assetFields:[],activeRule:null,workorder:null,eventsLoading:!1,relatedAlarmsLoading:!1,summary:!0,showAssetExport:!1,severity:{},subSection:"comment",events:[],showingTwoDigit:!0,relatedalarms:[],selectedFields:[],chartOperatorId:null,exportDownloadUrl:null,asset:null,exportType:null,readingField:null,analyticsConfig:null,loading:!0,acknowledged:!1,additionInfo:null,currentAlarmId:null,canShowAlarmWoCreation:!1}},components:{FNewAnalyticReport:FNewAnalyticReport["default"],Timer:Timer/* default */.Z,Comments:Comments/* default */.Z,QItem:quasar_esm/* QItem */.ry,QItemMain:quasar_esm/* QItemMain */.Ui,QIcon:quasar_esm/* QIcon */.oF,QPopover:quasar_esm/* QPopover */.oe,QList:quasar_esm/* QList */.tu,AlarmWoCreation:AlarmWoCreation/* default */.Z},computed:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},(0,vuex_esm/* mapState */.rn)({alarms:function(state){return state.newAlarm.alarms},users:function(state){return state.users},severityStatus:function(state){return state.alarmSeverity},occurrenceList:function(state){return state.newAlarm.occurrence},eventList:function(state){return state.newAlarm.events}})),(0,log_map_state/* mapStateWithLogging */.g)({spaces:function(state){return state.spaces}})),(0,vuex_esm/* mapGetters */.Se)({getAssetCategoryById:"getAssetCategory",getAlarmSeverity:"getAlarmSeverity"})),(0,log_map_getters/* mapGettersWithLogging */.t)({storeGetSpace:"getSpace"})),{},{alarm:function(){return this.$store.state.newAlarm.currentAlarm},occurrence:function(){return this.$store.state.newAlarm.currentOccurrence},alarmId:function(){return parseInt(this.$route.params.id)},resource:function(){return this.alarm&&this.alarm.resource?this.alarm.resource:null},formatedEventList:function(){var _this=this;return this.eventList.filter((function(rt){if(rt.createdTime)return rt.time=_this.$time.format(rt.createdTime,"DD MMM YYYY hh:mm a")}))},formatedOccurrence:function(){var _this2=this;return this.occurrenceList.filter((function(rt){if(rt.createdTime&&rt.clearedTime)return rt.cleartime=_this2.$time.format(rt.clearedTime,"DD MMM YYYY hh:mm a"),rt.time=_this2.$time.format(rt.createdTime,"DD MMM YYYY hh:mm a")}))}}),created:function(){this.$store.dispatch("loadTicketPriority"),this.$store.dispatch("loadTicketCategory"),this.$store.dispatch("loadAssetCategory"),this.$store.dispatch("loadAlarmSeverity"),this.$store.dispatch("newAlarm/fetchAlarm",{id:parseInt(this.$route.params.id)})},watch:{alarm:function(){var _this3=this;if(this.loading=!0,this.alarm){var title="[#"+this.alarm.id+"] "+this.alarm.subject;this.setTitle(title),this.loadFieldDetails(),this.loadWoDetails(),this.activeRule=null;var config={alarmId:this.occurrence.id,isWithPrerequsite:!0,dateFilter:this.getDatePickerObject(),hidechartoptions:!0,hidetabular:!0,hidecharttypechanger:!0,fixedChartHeight:300,isFromAlarmSummary:!0,applyReportDate:12===this.alarm.sourceType||9===this.alarm.sourceType};this.analyticsConfig?(this.analyticsConfig=null,this.$nextTick((function(){_this3.analyticsConfig=config}))):this.analyticsConfig=config,this.loading=!1}},occurrence:function(){this.$store.dispatch("newAlarm/getOccurrenceFromId",{id:this.alarm}),this.$store.dispatch("newAlarm/getEventsFromId",{id:this.occurrence})},activeRule:{handler:function(newValue,oldValue){null!==newValue&&this.handleChange(newValue)}},alarmId:function(newVal){this.$store.dispatch("newAlarm/fetchAlarm",{id:this.alarmId}),this.loadAssetDetails(),this.loadWoDetails()}},mounted:function(){this.loadAssetDetails(),this.loadWoDetails()},methods:(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({openFromTablesummary:function(row,col){"WORKORDER"===col.label&&this.openWorkorder(row.woId)},formattedKey:function(key){return d3.format(",")(key)}},(0,vuex_esm/* mapActions */.nv)({addAlarmApi:"newAlarm/addAlarm",updateAlarmStatus:"newAlarm/updateAlarmStatus",notifyAlarm:"newAlarm/notifyAlarm",acknowledgeAlarm:"newAlarm/acknowledgeAlarm",getRelatedWorkorderId:"newAlarm/getRelatedWorkorderId",deleteAlarm:"newAlarm/deleteAlarm"})),{},{acknowledgeAlarms:function(){this.acknowledgeAlarm({alarm:this.alarm,occurrence:this.occurrence,acknowledged:!0,acknowledgedBy:this.$account.user}),this.acknowledged=!0,this.loadAssetDetails()},updateAlarmsStatus:function(){this.updateAlarmStatus({occurrence:this.occurrence,alarm:this.alarm,clearedTime:Date.now(),severity:this.severityStatus.find((function(status){return"Clear"===status.severity}))}),this.alarm.clearedBy=this.$account.user},loadRCAReport:function(){var _this4=this;this.additionInfo&&this.additionInfo.rcaJSONArray&&this.additionInfo.rcaJSONArray.length>0&&this.additionInfo.rcaJSONArray.forEach((function(d){_this4.$set(d,"analyticsConfig",null),_this4.$nextTick((function(){_this4.$set(d,"analyticsConfig",{alarmId:_this4.occurrence.id,readingRuleId:d.rcaRule.id,dateFilter:_this4.getDatePickerObject(),hidechartoptions:!0,hidetabular:!0,hidecharttypechanger:!0,fixedChartHeight:300,isFromAlarmSummary:!0,applyReportDate:12===_this4.alarm.sourceType})}))}))},loadAssetDetails:function(){this.loadAlarmFields(),this.loadRCAReport()},loadAlarmFields:function(){var _this5=this;this.$util.loadFields("newreadingalarm",!1).then((function(fields){_this5.alarmFields=fields}))},getFieldByName:function(field){var fields=this.alarmFields.filter((function(d){return d.name===field}));return fields[0]},handleChange:function(changedId){if(this.$refs.newAnalyticReport&&this.$refs.newAnalyticReport.length>0){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.$refs.newAnalyticReport);try{for(_iterator.s();!(_step=_iterator.n()).done;){var ref=_step.value;if(ref.config.readingRuleId===changedId){var index=this.$refs.newAnalyticReport.indexOf(ref);this.$refs.newAnalyticReport[index].resize()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},loadmsg:function(){return this.alarm&&this.alarm.description?this.alarm.description.replace("&deg;C","°C"):"---"},loadReadingField:function(){return this.readingField.unit.replace("&deg;C","°C")},getDatePickerObject:function(){var lastOccurredTime;return lastOccurredTime=this.alarm.lastOccurredTime,this.alarm.lastOccurredTime>0&&(lastOccurredTime=this.alarm.lastOccurredTime),NewDateHelper/* default */.Z.getDatePickerObject(12===this.alarm.sourceType?20:62,""+lastOccurredTime)},chartOperatorHandling:function(operatorId){this.chartOperatorId=operatorId},loadWoDetails:function(){var self=this;if(this.alarm&&this.occurrence.woId&&this.occurrence.woId>0){var url="/workorder/summary/"+this.occurrence.woId;return self.$http.get(url).then((function(response){self.workorder=response.data.workorder}))}self.workorder=null,this.$forceUpdate()},forceUpdate:function(){this.$forceUpdate()},exportEvent:function(){type=1;var array={alarmId:this.occurrence.id,fieldId:this.selectedFields,type:this.exportType,parentId:this.alarm.resource.id},self=this,url="event/eventExport";self.$message({showClose:!0,message:"Downloading...",type:"success"}),this.$http.post(url,array).then((function(response){self.exportDownloadUrl=response.data.fileUrl,self.showAssetExport=!1}))},closeExportDialog:function(){this.showAssetExport=!1,this.selectedFields=[]},exportSummary:function(type){var _this6=this;this.exportType=type,this.showAssetExport=!0,this.$util.loadAssetReadingFields(this.alarm.resource.id).then((function(fields){_this6.assetFields=fields}))},getSpace:function(spaceType,spaceId){var obj=this.storeGetSpace(spaceId);if(obj){if(1===spaceType)return 1===obj.spaceType?obj.name:this.getSpace(1,obj.siteId);if(2===spaceType){if(2===obj.spaceType)return obj.name;if(3===obj.spaceType||4===obj.spaceType)return this.getSpace(2,obj.buildingId)}else if(3===spaceType){if(3===obj.spaceType)return obj.name;if(4===obj.spaceType)return this.getSpace(3,obj.floorId)}else if(4===spaceType&&4===obj.spaceType)return obj.name}return"---"},loadFieldDetails:function(){if(this.alarm&&this.alarm.readingFieldId){var self=this,url="/field/"+this.alarm.readingFieldId;self.$http.get(url).then((function(response){self.readingField=response.data.field}))}},goToAnalytics:function(){this.$router.replace({path:"/app/em/analytics/reading",query:{alarmId:this.occurrence.id}})},openRuleSummary:function(id){if(id){var url="/app/fa/rules/all/"+id+"/newsummary";this.$router.replace({path:url})}},openAsset:function(id){if(id)if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)("asset",router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else{var url="/app/at/assets/all/"+id+"/overview";this.$router.replace({path:url})}},findRoute:function(){if((0,router/* isWebTabsEnabled */.tj)()){var tabType=router/* tabTypes */.VF.CUSTOM,config={type:"portfolio"},route=(0,router/* findRouteForTab */.OD)(tabType,{config:config})||{};return(0,validation/* isEmpty */.xb)(route)?null:this.$router.resolve({name:route.name}).href}return"/app/home/portfolio"},openSite:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId;if(sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/overview");this.$router.replace({path:url})}}}},openBuilding:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId,bid=this.storeGetSpace(id).id;if(bid&&sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/building/").concat(bid);this.$router.replace({path:url})}}}},openFloor:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId,bid=this.storeGetSpace(id).id;if(bid&&sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/floor/").concat(bid);this.$router.replace({path:url})}}}},openSpace:function(id){if(id){var obj=this.storeGetSpace(id),sid=obj.siteId,bid=this.storeGetSpace(id).id;if(bid&&sid){var parentPath=this.findRoute();if(parentPath){var url="".concat(parentPath,"/site/").concat(sid,"/space/").concat(bid);this.$router.replace({path:url})}}}},isActiveAlarm:function(alarm){return"Clear"!==this.getAlarmSeverity(alarm.severity.id).severity},assignAlarm:function(alarm,userId,userName){var data={id:[alarm.id],alarm:{assignedTo:{id:userId,name:userName}}};this.assignAlarmApi({data:data,alarm:alarm})},closeSummary:function(){this.summary=!1;var newpath=this.$route.path.substring(0,this.$route.path.indexOf("/newsummary/"));this.$router.replace({path:newpath})},deleteAlarmById:function(){var self=this;self.$dialog.confirm({title:this.$t("common.header.delete_alarm"),message:this.$t("common._common.are_you_want_delete_this_alarm"),rbDanger:!0,rbLabel:"Delete"}).then((function(value){if(value){self.deleteAlarm(self.alarm.id),self.$message({message:this.$t("common._common.alarm_deleted_successfully"),type:"success"});var newpath="/app/fa/faults/unacknowledged/summary/"+self.alarms[0].id;self.$router.replace({path:newpath})}}))},createWO:function(data){var self=this,fields={};data.category&&(fields.category={id:data.category,name:this.getTicketCategory(data.category).name}),data.priority&&(fields.priority={id:data.priority,name:this.getTicketPriority(data.priority)}),data.assignedTo&&(fields.assignedTo=data.assignedTo),data.assignmentGroup&&(fields.assignmentGroup=data.assignmentGroup),data.siteId>0&&(fields.siteId=data.siteId),self.$store.dispatch("newAlarm/createWoFromAlarm",{id:this.createWoIds,fields:fields}).then((function(d){1===d.data.responseCode?self.$message({message:d.data.message,type:"error"}):(self.$dialog.notify(this.$t("common.wo_report.workorder_created_success")),self.$refs["createWOModel"].close())}))},closeWoDialog:function(){this.$refs["createWOModel"].close()},selectSubSection:function(section){this.subSection=section},alarmstatus:function(status){return 1===status?"":2===status?"Suppressed":3===status?"Cleared":void 0},openWorkorder:function(id){if(!(id>0))return!1;if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)("workorder",router/* pageTypes */.As.OVERVIEW)||{},name=_ref2.name;name&&this.$router.push({name:name,params:{viewname:"all",id:id}})}else this.$router.push({path:"/app/wo/orders/summary/"+id})},onlyInternalProps:function(additionInfo){for(var key in additionInfo)if(""!==key&&"resourceId"!==key&&"eventStateEnum"!==key&&"internalStateEnum"!==key&&"PUBLISH_TYPE"!==key)return!1;return!0},openAlarmWoCreation:function(alarmId){this.canShowAlarmWoCreation=!0,this.currentAlarmId=alarmId},onAlarmWoCreation:function(props){var woId=props.woId;this.$store.commit("newAlarm/UPDATE_ALARM_WO",{woId:woId})}}),filters:{moment:function(date,format){return moment_default()(date).format(format)},getFollowerUser:function(value,users){if(-1!==value.indexOf("@")){var userObj=users.find((function(user){return user.email===value}));if(userObj)return userObj}return{name:value}},sensorName:function(deviceId,devices){var sensorName;for(var key in devices)devices[key].id===deviceId&&(sensorName=devices[key].name);return sensorName},sensorType:function(deviceId,devices){var sensorType;for(var key in devices)devices[key].id===deviceId&&(sensorType=devices[key].type);return sensorType}}},v2_AlarmSummaryvue_type_script_lang_js=AlarmSummaryvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(v2_AlarmSummaryvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AlarmSummary=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/60317.js.map