(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[90731],{
/***/929593:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return FPagination}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/list/FPagination.vue?vue&type=template&id=7641710c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.total>0?_c("div",{staticClass:"flex-center-row-space mT-5",class:{"fc-black-small-txt-12":!_vm.hideToggle}},[_c("el-popover",{attrs:{placement:"bottom",trigger:"click",disabled:_vm.disablePopup}},[_c("span",{staticClass:"p8 pointer",class:[!_vm.disablePopup&&"button-hover"],attrs:{slot:"reference"},slot:"reference"},[_vm.from!==_vm.to?_c("span",[_vm._v(_vm._s(_vm.from)+" - ")]):_vm._e(),_c("span",[_vm._v(_vm._s(_vm.to))]),_vm._v(" of "+_vm._s(_vm.total)+" ")]),_c("el-pagination",{attrs:{layout:"prev, pager, next",total:_vm.total,"pager-count":5,"page-size":_vm.perPage,"current-page":_vm.page},on:{"current-change":_vm.handleCurrentChange,"update:pageSize":function($event){_vm.perPage=$event},"update:page-size":function($event){_vm.perPage=$event},"update:currentPage":function($event){_vm.page=$event},"update:current-page":function($event){_vm.page=$event}}})],1),_vm.hideToggle?_vm._e():_c("span",[_c("span",{staticClass:"el-icon-arrow-left pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.from<=1},on:{click:function($event){_vm.from>1&&_vm.prev()}}}),_c("span",{staticClass:"el-icon-arrow-right pagination-arrow fc-black-small-txt-12 f16 fw-bold pointer p5",class:{disable:_vm.to===_vm.total},on:{click:function($event){_vm.to!==_vm.total&&_vm.next()}}})])],1):_vm._e()])},staticRenderFns=[],router=(__webpack_require__(879288),__webpack_require__(670560),__webpack_require__(329435)),FPaginationvue_type_script_lang_js={props:{total:[Number,String],perPage:Number,hideToggle:{type:Boolean,default:!1},pageNo:Number,hidePopover:{type:Boolean,default:!1}},data:function(){return{from:0,to:0,page:1}},created:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.addEventListener("keydown",this.keyDownHandler)},mounted:function(){this.init()},beforeDestroy:function(){(0,router/* isWebTabsEnabled */.tj)()&&document.removeEventListener("keydown",this.keyDownHandler)},computed:{pageQuery:function(){var _ref=this.$route||{},query=_ref.query,_ref2=query||{},page=_ref2.page;return parseInt(page)||1},hasMorePage:function(){return this.total/this.perPage>1},disablePopup:function(){return this.hidePopover||!this.hasMorePage}},watch:{total:function(){this.init()},pageQuery:function(){this.init()}},methods:{init:function(){if(this.page=this.pageQuery,this.from=(this.page-1)*this.perPage+1,this.from>this.total&&this.from&&this.from>0&&this.total&&this.total>0)this.reset();else{var to=this.from+this.perPage-1;this.to=this.total>to?to:this.total}},handleCurrentChange:function(val){this.page=val,this.from=(this.page-1)*this.perPage+1,this.to=this.total>=this.from+this.perPage?this.from+this.perPage-1:this.total,this.setPage()},next:function(){this.from=this.to+1,this.to+=this.perPage,this.to>this.total&&(this.to=this.total),this.page++,this.setPage()},prev:function(){this.to=this.from-1,this.from-=this.perPage,this.from<=1?this.from=this.page=1:this.page--,this.setPage()},reset:function(){this.page=1,this.setPage(!0)},setPage:function(isReset){if(this.pageNo)this.$emit("onPageChanged",this.page);else{var query={};Object.assign(query,this.$route.query),query?query.page=this.page:query={page:this.page},this.$router.push({query:query}),isReset||this.$emit("onPageChanged",this.page)}},keyDownHandler:function(e){e.shiftKey&&("ArrowRight"===e.key&&this.to!==this.total?this.next():"ArrowLeft"===e.key&&this.from>1&&this.prev())}}},list_FPaginationvue_type_script_lang_js=FPaginationvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(list_FPaginationvue_type_script_lang_js,render,staticRenderFns,!1,null,"7641710c",null)
/* harmony default export */,FPagination=component.exports},
/***/790731:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return SLAList}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/setup/sla/SLAList.vue?vue&type=template&id=004a285c&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"height100 overflow-hidden"},[_c("div",{staticClass:"setting-header2"},[_c("div",{staticClass:"setting-title-block"},[_c("div",{staticClass:"setting-form-title text-capitalize"},[_vm._v(" "+_vm._s(_vm.$t("setup.setup.slapolicies"))+" ")]),_c("div",{staticClass:"heading-description"},[_vm._v(" "+_vm._s(_vm.$t("setup.setupLabel.list_sla_policie"))+" ")])]),_c("div",{staticClass:"action-btn setting-page-btn"},[_c("el-button",{staticClass:"setup-el-btn",attrs:{type:"primary"},on:{click:_vm.newSLA}},[_vm._v(" "+_vm._s(_vm.$t("setup.add.add_sla_policy"))+" ")])],1)]),_c("div",{staticClass:"flex-middle justify-between",staticStyle:{padding:"0px 30px 20px"}},[_c("portal-target",{attrs:{name:"sla-modules"}}),_c("pagination",{attrs:{pageNo:_vm.page,total:_vm.totalCount,perPage:10},on:{"update:pageNo":function($event){_vm.page=$event},"update:page-no":function($event){_vm.page=$event},onPageChanged:function(val){return _vm.page=val}}})],1),_vm._t("subHeaderMenu"),_c("el-tabs",{staticClass:"alarm-action-tab",attrs:{"before-leave":function(){return!1}},on:{"tab-click":_vm.switchTab},model:{value:_vm.currentTab,callback:function($$v){_vm.currentTab=$$v},expression:"currentTab"}},[_c("el-tab-pane",{attrs:{label:"SLA Policies",name:"sla.list"}}),_c("el-tab-pane",{attrs:{label:_vm.$t("setup.setupLabel.sla_tab_switch_title"),name:"sla.types"}})],1),_c("div",{staticClass:"container-scroll mT15",staticStyle:{height:"calc(100vh - 250px)"}},[_c("div",{staticClass:"setting-Rlayout setting-list-view-table"},[_c("el-row",{staticClass:"header-row"},[_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("common.roles.name"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:6}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.description"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.$t("space.sites._site"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text text-center",attrs:{span:4}},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.status"))+" ")]),_c("el-col",{staticClass:"setting-table-th setting-th-text",attrs:{span:4}},[_vm._v(" Â  ")])],1),_vm.loading?_c("el-row",[_c("el-col",{staticClass:"text-center",attrs:{span:24}},[_c("spinner",{attrs:{show:_vm.loading,size:"80"}})],1)],1):_vm.$validation.isEmpty(_vm.slaPolicies)?_c("el-row",[_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:24}},[_vm._v(" "+_vm._s(_vm.$t("setup.empty.empty_sla_policy"))+" ")])],1):_c("draggable",_vm._b({attrs:{draggable:".is-draggable",handle:".task-handle"},on:{change:function($event){return _vm.reorderSLA()}},model:{value:_vm.slaPolicies,callback:function($$v){_vm.slaPolicies=$$v},expression:"slaPolicies"}},"draggable",_vm.dragOptions,!1),_vm._l(_vm.slaPolicies,(function(policy){return _c("el-row",{key:policy.id,class:["is-draggable","body-row tablerow"]},[_c("el-col",{staticClass:"body-row-cell d-flex",attrs:{span:5}},[_c("div",{staticClass:"vertical-middle task-handle inline pR10"},[_c("img",{attrs:{src:__webpack_require__(271791)}})]),_c("div",{staticClass:"pointer",on:{click:function($event){return _vm.editSLA(policy)}}},[_vm._v(" "+_vm._s(policy.name)+" ")])]),_c("el-tooltip",{attrs:{content:policy.description,placement:"top","open-delay":1200,manual:_vm.$validation.isEmpty(policy.description)||policy.description.length<30}},[_c("el-col",{staticClass:"body-row-cell",attrs:{span:6}},[_vm._v(" "+_vm._s(policy.description||"---")+" ")])],1),_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:5}},[_vm._v(" "+_vm._s(_vm.siteList[policy.siteId])+" ")]),_c("el-col",{staticClass:"body-row-cell text-center",attrs:{span:4}},[_c("el-switch",{staticClass:"Notification-toggle",attrs:{"active-color":"rgba(57, 178, 194, 0.8)","inactive-color":"#e5e5e5"},on:{change:function($event){return _vm.changeStatus(policy)}},model:{value:policy.status,callback:function($$v){_vm.$set(policy,"status",$$v)},expression:"policy.status"}})],1),_c("el-col",{staticClass:"body-row-cell",attrs:{span:4}},[_c("div",{staticClass:"text-left actions mT0 text-center d-flex"},[_c("div",{staticClass:"mR15",on:{click:function($event){return _vm.editSLA(policy)}}},[_c("i",{staticClass:"el-icon-edit pointer"})]),_vm.canShowDelete?_c("div",{on:{click:function($event){return _vm.deleteSLA(policy)}}},[_c("inline-svg",{staticClass:"f-delete pointer",attrs:{src:"svgs/delete",iconClass:"icon icon-sm icon-remove"}})],1):_vm._e()])])],1)})),1)],1)])],2)},staticRenderFns=[],objectSpread2=__webpack_require__(595082),toConsumableArray=__webpack_require__(488478),regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),vuedraggable_umd=(__webpack_require__(538077),__webpack_require__(260228),__webpack_require__(450886),__webpack_require__(919649),__webpack_require__(821694),__webpack_require__(76265),__webpack_require__(670560),__webpack_require__(339772),__webpack_require__(162506),__webpack_require__(434284),__webpack_require__(909980)),vuedraggable_umd_default=__webpack_require__.n(vuedraggable_umd),isEqual=__webpack_require__(618446),isEqual_default=__webpack_require__.n(isEqual),api=__webpack_require__(32284),validation=__webpack_require__(990260),FPagination=__webpack_require__(929593),picklist=__webpack_require__(961358),SLAListvue_type_script_lang_js={props:["moduleName"],components:{draggable:vuedraggable_umd_default(),Pagination:FPagination/* default */.Z},title:function(){return"SLA Policies"},data:function(){return{module:null,loading:!1,slaPolicies:[],totalCount:null,dragOptions:{animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:"tasksection",sort:!0},currentTab:"sla.list",page:1,siteList:{"-1":"All Sites"}}},computed:{canShowDelete:function(){return!1}},watch:{moduleName:{handler:function(newVal,oldVal){isEqual_default()(newVal,oldVal)||(0,validation/* isEmpty */.xb)(newVal)||this.loadData()},immediate:!0},page:function(newVal,oldVal){newVal!==oldVal&&this.getPolicyList()}},methods:{loadData:function(){this.getPolicyList(),this.loadCount()},getPolicyList:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var moduleName,page,params,_yield$API$post,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this.loading=!0,moduleName=_this.moduleName,page=_this.page,params={ruleType:12,
//SLA ruletype is 12 for SLA policy
moduleName:moduleName,page:page,perPage:10},_context.next=5,api/* API */.bl.post("v2/modules/rules/list",params);case 5:if(_yield$API$post=_context.sent,data=_yield$API$post.data,error=_yield$API$post.error,!error){_context.next=12;break}_this.$message.error(error.message||"Error loading SLA Policies"),_context.next=15;break;case 12:return _this.slaPolicies=data.workflowRuleList||[],_context.next=15,_this.loadSites();case 15:_this.loading=!1;case 16:case"end":return _context.stop()}}),_callee)})))()},loadCount:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params,_yield$API$get,data,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return params={ruleType:12,
//SLA ruletype is 12 for SLA policy
moduleName:_this2.moduleName},_context2.next=3,api/* API */.bl.get("v2/modules/rules/getCount",params);case 3:_yield$API$get=_context2.sent,data=_yield$API$get.data,error=_yield$API$get.error,error?_this2.$message.error(error.message):_this2.totalCount=_this2.$getProperty(data,"count",null);case 7:case"end":return _context2.stop()}}),_callee2)})))()},loadSites:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var siteIds,defaultIds,perPage,_yield$getFieldOption,error,options;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(siteIds=(_this3.slaPolicies||[]).map((function(policy){return policy.siteId})).filter((function(siteId){return!(0,validation/* isEmpty */.xb)(siteId)})),defaultIds=(0,toConsumableArray/* default */.Z)(new Set(siteIds)),perPage=defaultIds.length,0!==perPage){_context3.next=5;break}return _context3.abrupt("return");case 5:return _context3.next=7,(0,picklist/* getFieldOptions */._K)({field:{lookupModuleName:"site",skipDeserialize:!0},defaultIds:defaultIds,perPage:perPage});case 7:_yield$getFieldOption=_context3.sent,error=_yield$getFieldOption.error,options=_yield$getFieldOption.options,error||(_this3.siteList=(0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({},_this3.siteList),options));case 11:case"end":return _context3.stop()}}),_callee3)})))()},newSLA:function(){this.$router.push({name:"sla.new",params:{moduleName:this.moduleName}})},editSLA:function(slaPolicy){this.$router.push({name:"sla.edit",params:{id:slaPolicy.id,moduleName:this.moduleName}})},deleteSLA:function(_ref){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee4(){var id,_yield$API$post2,error,index;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return id=_ref.id,_context4.next=3,api/* API */.bl.post("/v2/slaPolicy/delete",{id:id});case 3:_yield$API$post2=_context4.sent,error=_yield$API$post2.error,error?_this4.$message.error("Could not delete SLA Policy"):(index=_this4.slaPolicies.findIndex((function(policy){return policy.id===id})),-1!==index&&(_this4.slaPolicies.splice(index,1),_this4.totalCount--,_this4.$message.success("SLA Policy deleted")));case 6:case"end":return _context4.stop()}}),_callee4)})))()},reorderSLA:function(){var _this5=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee5(){var moduleName,slaPolicies,ids,_yield$API$post3,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return moduleName=_this5.moduleName,slaPolicies=_this5.slaPolicies,ids=slaPolicies.map((function(policy){return policy.id})),_context5.next=4,api/* API */.bl.post("/v2/slaPolicy/reorder",{moduleName:moduleName,ids:ids});case 4:_yield$API$post3=_context5.sent,error=_yield$API$post3.error,error?_this5.$message.error(error.message||"Error Occurred"):_this5.$message.success("Reorder Successful");case 7:case"end":return _context5.stop()}}),_callee5)})))()},changeStatus:function(policy){var _this6=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee6(){var id,isActive,url,_yield$API$post4,error;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return id=policy.id,isActive=policy.status,url=isActive?"setup/turnonrule":"setup/turnoffrule",_context6.next=4,api/* API */.bl.post(url,{workflowId:id});case 4:_yield$API$post4=_context6.sent,error=_yield$API$post4.error,error?(_this6.$set(policy,"status",!isActive),_this6.$message.error("Could not change policy status")):_this6.$message.success(isActive?"SLA Policy marked as active":"SLA Policy marked as inactive");case 7:case"end":return _context6.stop()}}),_callee6)})))()},switchTab:function(tab){var params={moduleName:this.moduleName};this.$router.push({name:tab.name,params:params})}}},sla_SLAListvue_type_script_lang_js=SLAListvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(sla_SLAListvue_type_script_lang_js,render,staticRenderFns,!1,null,"004a285c",null)
/* harmony default export */,SLAList=component.exports},
/***/271791:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"8f181d382ffbfa8849763c3ada75c3c6.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/90731.js.map