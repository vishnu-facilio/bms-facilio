(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[81221],{
/***/720096:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return PreviewFile}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/PreviewFile.vue?vue&type=template&id=447c7e89
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.currentFile?_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"preview-file"},[_c("div",{staticClass:"top-toolbar"},[_c("div",{staticClass:"a-top-toolbar"},[_c("div",{staticClass:"file-name word-break-keep"},[_vm._v(" "+_vm._s(_vm.currentFile.fileName)+" ")]),_c("div",{staticClass:"top-toolbar-icon-right flex align-center"},[_vm.currentFile.contentType.includes("image")?[_c("div",{staticClass:"flex-middle pL15"},[_vm.showOriginalImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showOriginalPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_original"))+" ")]):_vm._e(),_vm.showCompressedImage?_c("div",{staticClass:"fc-white-14 word-break-keep pointer",on:{click:_vm.showCompressedPhoto}},[_vm._v(" "+_vm._s(_vm.$t("common._common.view_default"))+" ")]):_vm._e()]),_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.currentFile.contentType.includes("pdf")?[_c("div",{staticClass:"download-icon round flex-middle pL15",on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("i",{staticClass:"el-icon-download op8",staticStyle:{color:"#ffff"}})])]:_vm._e(),_vm.showDeleteOption()?_c("div",{staticClass:"flex-middle pL15",on:{click:function($event){return _vm.deletePreview()}}},[_c("inline-svg",{staticClass:"pointer edit-icon-color close vertical-text-top",attrs:{src:"svgs/delete",iconClass:"icon icon-md"}})],1):_vm._e(),_c("div",{staticClass:"pL15"},[_c("i",{staticClass:"el-icon-close close",on:{click:_vm.closePreview}})])],2)])]),_vm.currentFileIndex>0?_c("a",{staticClass:"el-icon-arrow-left prev",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(-1)}}}):_vm._e(),_vm.currentFileIndex<_vm.files.length-1?_c("a",{staticClass:"el-icon-arrow-right next",staticStyle:{"font-size":"30px"},on:{click:function($event){return _vm.plusSlides(1)}}}):_vm._e(),_c("div",{staticClass:"preview-content"},[_vm.currentFile.contentType.includes("image")?[_vm.compressedImage?_c("img",{staticClass:"content",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl)}}):_vm.originalImage?_c("img",{staticClass:"content original",staticStyle:{"box-shadow":"none"},attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl+"?fetchOriginal=true")}}):_vm._e()]:_vm.currentFile.contentType.includes("pdf")?_c("div",{staticClass:"width100 height-100"},[_c("iframe",{staticClass:"fc-preview-pdf",attrs:{src:_vm.$prependBaseUrl(_vm.currentFile.previewUrl),height:"100%",width:"100%"}})]):_vm.isVideoSupported(_vm.currentFile.contentType)?_c("div",{staticClass:"width100 height-100 fc-preview-video"},[_c("video",{attrs:{controls:""}},[_c("source",{attrs:{src:_vm.$prependBaseUrl(_vm.$getProperty(_vm.currentFile,"downloadUrl",null)),type:_vm.$getProperty(_vm.currentFile,"contentType")}}),_vm._v(" "+_vm._s(_vm.$t("common._common.browser_not_supported"))+" ")])]):_c("div",{staticClass:"no-preview"},[_c("div",{staticClass:"flex justify-center pT24"},[_c("inline-svg",{staticClass:"d-flex",attrs:{src:_vm.getFileIcon(_vm.currentFile),iconClass:"icon icon-60 overlay"}})],1),_c("div",{staticClass:"f14 pT12 pB12"},[_vm._v("No preview available")]),_c("div",{staticClass:"download-button"},[_c("a",{staticClass:"flex flex-row",staticStyle:{color:"#ffff"},on:{click:function($event){return _vm.downloadAttachment(_vm.currentFile)}}},[_c("div",[_vm._v("Download")])])])])],2),_vm.exportDownloadUrl?_c("iframe",{staticStyle:{display:"none"},attrs:{src:_vm.exportDownloadUrl}}):_vm._e()]):_vm._e()},staticRenderFns=[],validation=(__webpack_require__(339772),__webpack_require__(260228),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(228436),__webpack_require__(990260)),PreviewFilevue_type_script_lang_js={props:["previewFile","files","visibility","showDelete","isLockedState","isTaskClosed"],data:function(){return{show:!0,previewUrl:null,currentFileIndex:0,currentFile:null,imageMargin:null,exportDownloadUrl:null,originalImage:!1,compressedImage:!0,showOriginalImage:!0,showCompressedImage:!1}},destroyed:function(){window.removeEventListener("keyup",this.handler)},mounted:function(){window.addEventListener("keyup",this.handler),this.preloadImages()},watch:{},computed:{},methods:{handler:function(){
// If escape key is pressed...
27===event.keyCode?this.closePreview():37===event.keyCode?this.plusSlides(-1):39===event.keyCode&&this.plusSlides(1)},preloadImages:function(){this.currentFile=this.previewFile?this.previewFile:this.files[0],this.currentFileIndex=this.files.indexOf(this.currentFile)},plusSlides:function(n){var index=this.currentFileIndex+n;index<0&&(index=0),index>=this.files.length&&(index=this.files.length-1),this.currentFileIndex=index,this.currentFile=this.files[index]},closePreview:function(){this.$emit("update:visibility",!1)},deletePreview:function(){var currentFile=this.currentFile;this.$emit("onDelete",currentFile)},downloadAttachment:function(file){var _this=this,_ref=file||{},url=_ref.downloadUrl;this.exportDownloadUrl&&(this.exportDownloadUrl=null),this.$nextTick((function(){_this.exportDownloadUrl=url}))},showOriginalPhoto:function(){this.originalImage=!0,this.showCompressedImage=!0,this.showOriginalImage=!1,this.compressedImage=!1},showCompressedPhoto:function(){this.showCompressedImage=!1,this.originalImage=!1,this.showOriginalImage=!0,this.compressedImage=!0},getFileIcon:function(attachment){var contentType=attachment.contentType,FILE_TYPE_ICONS=this.$constants.FILE_TYPE_ICONS,selectedIndex=FILE_TYPE_ICONS.findIndex((function(icons){var fileTypes=icons.fileTypes;return fileTypes.some((function(type){return contentType.includes(type)}))}));return(0,validation/* isEmpty */.xb)(selectedIndex)?FILE_TYPE_ICONS[0].path:FILE_TYPE_ICONS[selectedIndex].path},isVideoSupported:function(contentType){contentType=contentType||"";var supportedTypes=["video/webm","video/mp4","video/ogg"];return supportedTypes.includes(contentType.trim().toLowerCase())},showDeleteOption:function(){var showDelete=this.showDelete,isLockedState=this.isLockedState,isTaskClosed=this.isTaskClosed;return showDelete&&!isLockedState&&!isTaskClosed}}},components_PreviewFilevue_type_script_lang_js=PreviewFilevue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_PreviewFilevue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,PreviewFile=component.exports},
/***/468406:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return WorkorderProgress}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/workorder/workorders/v3/widgets/WorkorderProgress.vue?vue&type=template&id=300b372b
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.taskChartData&&_vm.taskChartData.value&&_vm.taskChartData.value>0?_c("div",{staticClass:"p20 white-bg-block mB20"},[_c("el-row",[_c("el-col",{staticClass:"mT10",attrs:{span:_vm.taskResources.length>1&&_vm.taskResources.length<=30?14:15}},[_c("div",{staticClass:"fc__wo__task__bar fc__wo__task__bar-stacked"},[_c("span",{staticClass:"fc__task__gradient__bar",style:"width:"+_vm.taskChartData.currentValue/_vm.taskChartData.value*100+"%",attrs:{data:_vm.taskChartData}})])]),_c("el-col",{staticClass:"mT15",attrs:{span:3}},[_c("div",{staticClass:"flex-middle justify-content-center"},[_c("div",{staticClass:"green-txt-12"},[_vm._v(" "+_vm._s(_vm.taskChartData.currentValue)+" ")]),_c("div",{staticClass:"fc-grey-text12 pL3"},[_vm._v("/ "+_vm._s(_vm.taskChartData.value))])])]),_c("el-col",{staticClass:"text-right",attrs:{span:5}},[_vm.taskChartData.currentValue!==_vm.taskChartData.value?_c("el-button",{staticClass:"fc-pink-border-btn",attrs:{type:"button"},on:{click:_vm.closeAllTask}},[_vm._v(" "+_vm._s(_vm.selectedTaskResource?_vm.$t("maintenance._workorder.close_filtered_task"):_vm.$t("maintenance._workorder.close_all_task"))+" ")]):_c("div",{staticClass:"pT15 green-txt-13"},[_vm._v(" "+_vm._s(_vm.$t("maintenance._workorder.all_task_closed"))+" ")])],1),_vm.taskResources.length>1&&_vm.taskResources.length<=30?_c("el-col",{staticClass:"flRight mT15 pL20",attrs:{span:1}},[_c("div",{staticClass:"pointer user-select-none",on:{click:function($event){_vm.showTaskResourceFilter=!_vm.showTaskResourceFilter}}},[_c("span",{staticClass:"rotate90"},[_c("img",{staticStyle:{width:"15px"},attrs:{src:__webpack_require__(684890)}})])])]):_vm._e()],1)],1):_vm._e()},staticRenderFns=[],createForOfIteratorHelper=__webpack_require__(566347),workorderHelper=(__webpack_require__(186466),__webpack_require__(865764)),WorkorderProgressvue_type_script_lang_js={name:"WorkorderProgress",props:["moduleName","details"],mixins:[workorderHelper/* default */.Z],data:function(){return{taskChartData:null,taskList:{}}},created:function(){this.workorder&&(this.taskChartData={value:this.workorder.noOfTasks>-1?this.workorder.noOfTasks:0,currentValue:this.workorder.noOfClosedTasks>-1?this.workorder.noOfClosedTasks:0,color:"#9c5fb8,#f87a60",unit:"",centerText:[{label:this.$t("maintenance._workorder.completed")},{label:this.$t("maintenance._workorder.of")+" "+(this.workorder.noOfTasks>-1?this.workorder.noOfTasks:0)+" "+this.$t("maintenance._workorder.tasks")}]})},computed:{currModuleName:function(){return"workorder"},widgetTitle:function(){return"Workorder Progress"},workorder:function(){return this.details.workorder}},methods:{taskResources:function(){var obj={};if(this.taskList)for(var idx in this.taskList){var _step,_iterator=(0,createForOfIteratorHelper/* default */.Z)(this.taskList[idx]);try{for(_iterator.s();!(_step=_iterator.n()).done;){var task=_step.value;task.resource&&task.resource.id>0&&(obj[task.resource.id]=task.resource)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return Object.values(obj)}}},widgets_WorkorderProgressvue_type_script_lang_js=WorkorderProgressvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(widgets_WorkorderProgressvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,WorkorderProgress=component.exports},
/***/684890:
/***/function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"c5bbcb00b28261c206e2f2de4a9fe124.svg";
/***/}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/81221.js.map