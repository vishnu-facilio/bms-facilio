"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[71023],{
/***/604947:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return Spinner}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/Spinner.vue?vue&type=template&id=06a81286&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition",[_c("svg",{directives:[{name:"show",rawName:"v-show",value:_vm.show,expression:"show"}],staticClass:"spinner",class:{show:_vm.show},attrs:{width:_vm.spinnerSize,height:_vm.spinnerSize,viewBox:"0 0 44 44"}},[_c("circle",{staticClass:"path",style:{stroke:_vm.strokeColor},attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},staticRenderFns=[],Spinnervue_type_script_lang_js={name:"spinner",props:["show","size","colour"],computed:{spinnerSize:function(){return this.size?this.size+"px":"50px"},strokeColor:function(){return this.colour?this.colour:"#fd4b92"}}},components_Spinnervue_type_script_lang_js=Spinnervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_Spinnervue_type_script_lang_js,render,staticRenderFns,!1,null,"06a81286",null)
/* harmony default export */,Spinner=component.exports},
/***/371023:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return AppRedirectionHelper}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/error/AppRedirectionHelper.vue?vue&type=template&id=4f5536a6
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.isLoading?_c("div",{staticClass:"mT40"},[_c("Spinner")],1):_vm._e()},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),api=(__webpack_require__(564043),__webpack_require__(857267),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(952003),__webpack_require__(68518),__webpack_require__(113440),__webpack_require__(212826),__webpack_require__(907409),__webpack_require__(322462),__webpack_require__(32284)),validation=__webpack_require__(990260),router=__webpack_require__(329435),dlv_umd=__webpack_require__(226905),dlv_umd_default=__webpack_require__.n(dlv_umd),Spinner=__webpack_require__(604947),redirectionRequiredUrls={workorder:{summaryRoute:"app/wo/(orders)/summary/([0-9]+)",createRoute:"app/wo/create",listRoute:"app/wo/orders/([a-zA-Z0-9-_]+)",pdfRoute:"app/pdf/summarydownloadreport"},asset:{summaryRoute:"app/at/assets/([a-zA-Z0-9-_]+)/([0-9]+)/overview",listRoute:"app/at/assets/([a-zA-Z0-9-_]+)"},serviceRequest:{summaryRoute:"app/sr/serviceRequest/([a-zA-Z0-9-_]+)/([0-9]+)/overview",editRoute:"app/sr/serviceRequest/edit/([0-9]+)",createRoute:"app/sr/serviceRequest/new",listRoute:"app/sr/serviceRequest/([a-zA-Z0-9-_]+)"},customModule:{summaryRoute:"app/ca/modules/(.+)/([a-zA-Z0-9-_]+)/([0-9]+)/summary",editRoute:"app/ca/modules/(.+)/edit/([0-9]+)",createRoute:"app/ca/modules/(.+)/create",listRoute:"app/ca/modules/(.+)/([a-zA-Z0-9-_]+)"},purchaserequest:{summaryRoute:"app/purchase/pr/([a-zA-Z0-9-_]+)/summary/([0-9]+)",editRoute:"app/purchase/pr/new/([0-9]+)",createRoute:"app/purchase/pr/new",listRoute:"app/purchase/pr/([a-zA-Z0-9-_]+)",pdfRoute:"app/pdf/prpdf"},purchaseorder:{summaryRoute:"app/purchase/po/(([a-zA-Z0-9-_]+)/summary/([0-9]+)",createRoute:"app/purchase/po/new"},receivable:{listRoute:"app/purchase/rv/(([a-zA-Z0-9-_]+)"},tenant:{listRoute:"app/tm/tenants/([a-zA-Z0-9-_]+)"},quote:{editRoute:"app/tm/quotation/edit/([0-9]+)",createRoute:"app/tm/quotation/new",pdfRoute:"app/pdf/quotationpdf"},itemTypes:{createRoute:"app/inventory/itemtypes/new"},toolTypes:{createRoute:"app/inventory/tooltypes/new"},transferrequest:{createRoute:"app/inventory/transferrequest/new"},
//no need to handle create edit since they are dialogue
item:{summaryRoute:"app/inventory/item/([a-zA-Z0-9-_]+)/([0-9]+)/summary",listRoute:"app/inventory/item/([a-zA-Z0-9-_]+)"},vendors:{createRoute:"app/vendor/vendors/new"},client:{listRoute:"app/cl/client/([a-zA-Z0-9-_]+)"},announcement:{createRoute:"app/cy/announcements/new"},
//there is no create and edit route
inspectionResponse:{summaryRoute:"app/inspection/individual/([a-zA-Z0-9-_]+)/summary/([0-9]+)",listRoute:"app/inspection/individual/([a-zA-Z0-9-_]+)"},facility:{summaryRoute:"app/bk/facility/([a-zA-Z0-9-_]+)/([0-9]+)/overview",editRoute:"app/bk/facility/([0-9]+)/edit",createRoute:"app/bk/facility/new",listRoute:"app/bk/facility/([a-zA-Z0-9-_]+)"},employee:{summaryRoute:"app/pl/employee/([a-zA-Z0-9-_]+)/summary/([0-9]+)",editRoute:"app/pl/employee/edit/([0-9]+)",createRoute:"app/pl/employee/new",listRoute:"app/pl/employee/([a-zA-Z0-9-_]+)"},facilitybooking:{summaryRoute:"app/bk/facilitybooking/([a-zA-Z0-9-_]+)/([0-9]+)/overview",createRoute:"app/bk/facilitybooking/new",listRoute:"app/bk/facilitybooking/([a-zA-Z0-9-_]+)"},vendorcontact:{summaryRoute:"app/vendor/vendorcontact/([a-zA-Z0-9-_]+)/summary/([0-9]+)",editRoute:"app/vendor/vendorcontact/edit/([0-9]+)",createRoute:"app/vendor/vendorcontact/new",listRoute:"app/vendor/vendorcontact/([a-zA-Z0-9-_]+)"},newreadingalarm:{summaryRoute:"app/fa/faults/([a-zA-Z0-9-_]+)/newsummary/([0-9]+)",listRoute:"app/fa/faults/([a-zA-Z0-9-_]+)"},portfolio:{siteSummaryRoute:"app/home/portfolio/sites/all/site/([0-9]+)/overview",siteChildSummaryRoute:"app/home/portfolio/sites/all/site/([0-9]+)/([a-zA-Z0-9-_]+)/([0-9]+)"},dashboard:{dashboardRoute:"app/home/dashboard/([a-zA-Z0-9-_]+)"},analytics:{analyticsRoute:"app/em/analytics/([a-zA-Z0-9-_]+)"}},AppRedirectionHelpervue_type_script_lang_js={components:{Spinner:Spinner/* default */.Z},data:function(){return{isLoading:!1}},computed:{previousRoute:function(){var prevRoute=dlv_umd_default()(this,"$route.params.currentRoute",window.location.href);return prevRoute},previousRouteEndPoint:function(){var _this$previousRoute=this.previousRoute,previousRoute=void 0===_this$previousRoute?"":_this$previousRoute,url=(previousRoute||"").split("//"),endPoint="";if((url||[]).length>1){
//this will give url without http:// or https://
url=url[1];var baseUrl=(url||"").split("/",1);endPoint=url.replace(baseUrl,"")}return endPoint},searchQuery:function(){var searchQuery=dlv_umd_default()(this,"$route.params.searchQuery","");return searchQuery}},created:function(){this.redirectionHandler()},methods:{redirectionHandler:function(){var _this=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _this$previousRoute2,previousRoute,_this$previousRouteEn,previousRouteEndPoint,_this$searchQuery,searchQuery,routeGroup,_this$findDetailsFrom,matched,moduleName,pageType,viewName,recordId,childModuleName,childRecordId,_yield$API$get,data,_ref,redirectUrl,url;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.isLoading=!0,_this$previousRoute2=_this.previousRoute,previousRoute=void 0===_this$previousRoute2?"":_this$previousRoute2,_this$previousRouteEn=_this.previousRouteEndPoint,previousRouteEndPoint=void 0===_this$previousRouteEn?"":_this$previousRouteEn,_this$searchQuery=_this.searchQuery,searchQuery=void 0===_this$searchQuery?"":_this$searchQuery,routeGroup=_this.findGroupForRoute(previousRoute),!routeGroup){_context.next=16;break}if(_this$findDetailsFrom=_this.findDetailsFromRoute(previousRoute,routeGroup),matched=_this$findDetailsFrom.matched,moduleName=_this$findDetailsFrom.moduleName,pageType=_this$findDetailsFrom.pageType,viewName=_this$findDetailsFrom.viewName,recordId=_this$findDetailsFrom.recordId,childModuleName=_this$findDetailsFrom.childModuleName,childRecordId=_this$findDetailsFrom.childRecordId,!matched){_context.next=16;break}return _context.next=8,api/* API */.bl.get("v3/oldAppMigration/appRedirection",{moduleName:moduleName,viewName:viewName,pageType:pageType,recordId:recordId,previousRoute:previousRouteEndPoint,childModuleName:childModuleName,childRecordId:childRecordId});case 8:if(_yield$API$get=_context.sent,data=_yield$API$get.data,_ref=data||{},redirectUrl=_ref.redirectUrl,(0,validation/* isEmpty */.xb)(redirectUrl)||redirectUrl==previousRouteEndPoint){_context.next=16;break}return url=window.location.origin+redirectUrl,(0,validation/* isEmpty */.xb)(searchQuery)||(url+=searchQuery),window.location.href=url,_context.abrupt("return");case 16:window.location.href=window.location.origin;case 17:case"end":return _context.stop()}}),_callee)})))()},findGroupForRoute:function(errorCausedRoute){return errorCausedRoute.includes("app/wo/create")||errorCausedRoute.includes("app/wo/orders")||errorCausedRoute.includes("app/pdf/summarydownloadreport")?"workorder":errorCausedRoute.includes("app/at/assets")?"asset":errorCausedRoute.includes("app/sr/serviceRequest")?"serviceRequest":errorCausedRoute.includes("app/ca")?"customModule":errorCausedRoute.includes("app/purchase/pr")||errorCausedRoute.includes("app/pdf/prpdf")?"purchaserequest":errorCausedRoute.includes("app/purchase/po")?"purchaseorder":errorCausedRoute.includes("app/purchase/rv")?"receivable":errorCausedRoute.includes("app/tm/tenants")?"tenant":errorCausedRoute.includes("app/tm/quotation")||errorCausedRoute.includes("app/pdf/quotationpdf")?"quote":errorCausedRoute.includes("app/inventory/itemtypes")?"itemTypes":errorCausedRoute.includes("app/inventory/tooltypes")?"toolTypes":errorCausedRoute.includes("app/inventory/transferrequest")?"transferrequest":errorCausedRoute.includes("app/inventory/item")?"item":errorCausedRoute.includes("app/vendor/vendors")?"vendors":errorCausedRoute.includes("app/cl/client")?"client":errorCausedRoute.includes("app/cy/announcements")?"announcement":errorCausedRoute.includes("app/inspection/individual")?"inspectionResponse":errorCausedRoute.includes("app/bk/facilitybooking")?"facilitybooking":errorCausedRoute.includes("app/bk/facility")?"facility":errorCausedRoute.includes("app/pl/employee")?"employee":errorCausedRoute.includes("app/vendor/vendorcontact")?"vendorcontact":errorCausedRoute.includes("app/fa/faults")?"newreadingalarm":errorCausedRoute.includes("app/home/portfolio/sites/all")?"portfolio":errorCausedRoute.includes("app/home/dashboard")?"dashboard":errorCausedRoute.includes("app/em/analytics")?"analytics":""},findDetailsFromRoute:function(errorCausedRoute,routeGroup){var matched=!1,moduleName="",viewName="",recordId=-1,pageType="",childModuleName="",childRecordId=-1,redirectionRequiredRoutesInGroup=redirectionRequiredUrls[routeGroup],_ref2=redirectionRequiredRoutesInGroup||{},summaryRoute=_ref2.summaryRoute,createRoute=_ref2.createRoute,editRoute=_ref2.editRoute,listRoute=_ref2.listRoute,pdfRoute=_ref2.pdfRoute,dashboardRoute=_ref2.dashboardRoute,analyticsRoute=_ref2.analyticsRoute,siteSummaryRoute=_ref2.siteSummaryRoute,siteChildSummaryRoute=_ref2.siteChildSummaryRoute;if(summaryRoute){var rgx=new RegExp(summaryRoute);if(rgx.test(errorCausedRoute)){var result=errorCausedRoute.match(rgx);matched=!0,viewName=result[1],recordId=result[2],moduleName=routeGroup,pageType=router/* pageTypes */.As.OVERVIEW,
//since wo route has no view name in route
"workorder"==routeGroup&&(viewName="all"),"customModule"==routeGroup&&(moduleName=result[1],viewName=result[2],recordId=result[3])}}if(!matched&&editRoute){var _rgx=new RegExp(editRoute);if(_rgx.test(errorCausedRoute)){var _result=errorCausedRoute.match(_rgx);matched=!0,recordId=_result[1],moduleName=routeGroup,pageType=router/* pageTypes */.As.EDIT,
//module name is dynamic will be extracted from route
"customModule"==routeGroup&&(
// in matched group list - 1s group is moduleName and 2nd is recordId
moduleName=_result[1],recordId=_result[2])}}if(!matched&&createRoute){var _rgx2=new RegExp(createRoute);if(_rgx2.test(errorCausedRoute)){var _result2=errorCausedRoute.match(_rgx2);matched=!0,moduleName=routeGroup,pageType=router/* pageTypes */.As.CREATE,"customModule"==routeGroup&&(moduleName=_result2[1])}}if(!matched&&listRoute){var _rgx3=new RegExp(listRoute);if(_rgx3.test(errorCausedRoute)){var _result3=errorCausedRoute.match(_rgx3);matched=!0,moduleName=routeGroup,pageType=router/* pageTypes */.As.LIST,viewName=_result3[1],"customModule"==routeGroup&&(moduleName=_result3[1],viewName=_result3[2])}}if(!matched&&pdfRoute){var _rgx4=new RegExp(pdfRoute);_rgx4.test(errorCausedRoute)&&(matched=!0,moduleName=routeGroup,pageType="PRINT_PAGE")}if(!matched&&dashboardRoute){var _rgx5=new RegExp(dashboardRoute);if(_rgx5.test(errorCausedRoute)){var _result4=errorCausedRoute.match(_rgx5);matched=!0,moduleName=routeGroup,pageType="DASHBOARD",viewName=_result4[1]}}if(!matched&&analyticsRoute){var _rgx6=new RegExp(analyticsRoute);if(_rgx6.test(errorCausedRoute)){var _result5=errorCausedRoute.match(_rgx6);matched=!0,moduleName=routeGroup,childModuleName=_result5[1],pageType="ANALYTICS"}}if(!matched&&siteSummaryRoute){var _rgx7=new RegExp(siteSummaryRoute);if(_rgx7.test(errorCausedRoute)){var _result6=errorCausedRoute.match(_rgx7);matched=!0,moduleName=routeGroup,recordId=_result6[1],pageType="SITE_SUMMARY"}}if(!matched&&siteChildSummaryRoute){var _rgx8=new RegExp(siteChildSummaryRoute);if(_rgx8.test(errorCausedRoute)){var _result7=errorCausedRoute.match(_rgx8);matched=!0,moduleName=routeGroup,recordId=_result7[1],childModuleName=_result7[2],childRecordId=_result7[3],pageType="SITE_CHILD_SUMMARY"}}return{matched:matched,moduleName:moduleName,viewName:viewName,recordId:recordId,pageType:pageType,childModuleName:childModuleName,childRecordId:childRecordId}}}},error_AppRedirectionHelpervue_type_script_lang_js=AppRedirectionHelpervue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(error_AppRedirectionHelpervue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,AppRedirectionHelper=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/71023.js.map