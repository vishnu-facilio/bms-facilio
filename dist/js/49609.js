"use strict";(self["webpackChunkfacilio_web"]=self["webpackChunkfacilio_web"]||[]).push([[49609,25016],{
/***/736374:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// EXPORTS
__webpack_require__.d(__webpack_exports__,{Z:function(){/* binding */return TabCheckRedirect}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/components/TabCheckRedirect.vue?vue&type=template&id=351e140c
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _vm.showSummaryLinkIcon?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{ arrow: true }"}],staticClass:"flex-middle",attrs:{content:"View Summary"},on:{click:_vm.openRecordSummary}},[_c("div",{staticClass:"inline d-flex",domProps:{innerHTML:_vm._s(_vm.computedSvg)}})]):_vm._e()},staticRenderFns=[],InlineSvg=(__webpack_require__(434284),__webpack_require__(586166)),router=__webpack_require__(329435),TabCheckRedirectvue_type_script_lang_js={props:{moduleName:{type:String,required:!0},id:{required:!0}},extends:InlineSvg/* default */.Z,computed:{showSummaryLinkIcon:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;if(name)return!0}return!1}},methods:{openRecordSummary:function(){var viewname="all";if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)(this.moduleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref2.name;if(name){var routeData=this.$router.resolve({name:name,params:{viewname:viewname,id:this.id}});window.open(routeData.href,"_blank")}else this.$message.warning("No summary page found")}}}},components_TabCheckRedirectvue_type_script_lang_js=TabCheckRedirectvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_TabCheckRedirectvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,TabCheckRedirect=component.exports},
/***/25016:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FloorPlanBookingPropertyNew}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/components/FloorPlanBookingPropertyNew.vue?vue&type=template&id=40e08b2e
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"properties-section"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):[_c("div",{staticClass:"new-header-container pT20"},[_c("div",{staticClass:"new-header-text relative"},[_vm.nonReservableResource?_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s("SPACE"==_vm.markerType?"Space properties":"Desk properties")+" ")]):_c("div",{staticClass:"fc-setup-modal-title"},[_vm._v(" "+_vm._s("SPACE"==_vm.markerType?"Book Space":"Book Desk")+" ")]),_c("div",{staticClass:"flex-middle"},[!_vm.isPortal&&_vm.isDesk?_c("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{ arrow: true }"}],attrs:{content:"View Summary"},on:{click:function($event){return _vm.openRecordSummary(_vm.record.id)}}},[_c("inline-svg",{attrs:{src:"svgs/external-link2",iconClass:"icon icon-sm-md fill-blue mR10 pointer"}})],1):_vm._e(),_c("div",{staticClass:"fc-setup-modal-close f18 pointer",on:{click:_vm.handleClose}},[_c("i",{staticClass:"el-icon-close fwBold"})])])])]),_c("div",{staticClass:"new-body-modal infp-left-section height100 pL20 pR20 mT10"},[_c("div",{staticClass:"fc-black-22 bold pT10 pB10"},[_vm._v(" "+_vm._s(_vm.feature.label)+" ")]),_vm.isDesk?_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Desk type ")]),_c("div",{staticClass:"fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.record.deskTypeVal)+" ")])])],1):_vm._e(),_vm.isDesk&&_vm.record.department?_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Department ")]),_c("div",{staticClass:"fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.record.department.name)+" ")])])],1):_vm._e(),"SPACE"==_vm.markerType&&_vm.record.spaceCategory&&_vm.record.spaceCategory.name?_c("el-row",{staticClass:"pT10"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Space category ")]),_c("div",{staticClass:"fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.record.spaceCategory.name)+" ")])])],1):_vm._e(),"SPACE"==_vm.markerType?_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Reservable ")]),_c("div",{staticClass:"fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.feature.isReservable?"Yes":"No")+" ")])])],1):_vm._e(),"SPACE"==_vm.markerType&&_vm.facility?_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Capacity ")]),_c("div",{staticClass:"fc-black-14 text-left bold",staticStyle:{color:"rgb(163, 166, 177)"}},[_vm._v(" "+_vm._s(_vm.facility.usageCapacity)+" ")])])],1):_vm._e(),"SPACE"==_vm.markerType&&_vm.facility&&_vm.facility.amenities&&_vm.amenities.length?_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Amenities ")]),_c("div",{staticClass:"fc-black-14 text-left bold d-flex flex-wrap"},_vm._l(_vm.facility.amenities,(function(amenity,index){return _c("span",{key:index,staticClass:"mR10 mB10"},[_vm._v(" "+_vm._s(amenity.data.name)+" ")])})),0)])],1):_vm._e(),_vm.nonReservableResource?_vm._e():_c("div",{staticClass:"reservable-marker-section"},[_c("el-row",{staticClass:"pT20"},[_c("el-col",{attrs:{span:24}},[_c("div",{staticClass:"fc-input-label-txt pB5"},[_vm._v(" Slots ")]),_c("div",{staticClass:"fc-black-14 text-left bold"},[_vm._v(" "+_vm._s(_vm.currentDate)+" ")])])],1),_c("div",{staticClass:"fc-tag-align-grid"},_vm._l(_vm.slotsToDisplay,(function(slotGroup,index){return _c("el-tag",{key:index,staticClass:"fc-tag-booking ",class:[{active:"FREE"==slotGroup.groupType},{inactive:"BOOKED"==slotGroup.groupType}],on:{click:function($event){return _vm.slotClicked(slotGroup)}}},[_vm._v(" "+_vm._s(_vm.getConcatSlotGroupTime(slotGroup))+" ")])})),1),_c("div",{staticClass:"pT30"},[_c("el-button",{staticClass:"fc-pink-btn-full-width text-capitalize f14 fwBold bR3",on:{click:function($event){return _vm.$emit("book",[])}}},[_vm._v(" Book Now ")])],1)],1)],1)]],2)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),router=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(976801),__webpack_require__(843843),__webpack_require__(434284),__webpack_require__(425728),__webpack_require__(329435)),api=__webpack_require__(32284),lodash=__webpack_require__(496486),FloorPlanBookingPropertyNewvue_type_script_lang_js={props:["deskTypeEnumMap","currentDate","isPortal","objectId","timeRange","viewerMode"],data:function(){return{record:null,loading:!1,feature:{},facility:null,bookings:[],moduleName:null,properties:{},zonesModules:["space","lockers","parkingstall"],height:500}},watch:{objectId:{handler:function(newVal,oldVal){newVal!==oldVal&&this.init()}}},computed:{isDesk:function(){return!(!this.moduleName||"desks"!==this.moduleName)},slotsToDisplay:function(){var _this=this;if(this.facility&&!this.nonReservableResource){var slots=this.facility.slots,groupedSlots=[],currentGroup=[],currentGroupType="FREE";
//do a bookings check here
//set first group type based on first slot booked or not
if(slots&&slots.length){var isFirstBooked=this.isSlotBooked(slots[0]);isFirstBooked&&(currentGroupType="BOOKED")}
//combine continuous free and continuous booked slots
//the  Collation algorith is simple . when next slot and current slot are of same type, keep appedning to the same group
//on state transitions create a new group and push exiting group into collection
return slots.forEach((function(slot){"FREE"!=currentGroupType||_this.isSlotBooked(slot)?"BOOKED"==currentGroupType&&_this.isSlotBooked(slot)?currentGroup.push(slot):"FREE"==currentGroupType&&_this.isSlotBooked(slot)?(currentGroup.length&&(groupedSlots.push({slots:currentGroup,groupType:"FREE"}),currentGroup=[slot]),currentGroupType="BOOKED"):"BOOKED"!=currentGroupType||_this.isSlotBooked(slot)||(currentGroup.length&&(groupedSlots.push({groupType:"BOOKED",slots:currentGroup}),currentGroup=[slot]),currentGroupType="FREE"):currentGroup.push(slot)})),
//push last left over group, no transition in the end
currentGroup.length&&
//dont push any empty groups
groupedSlots.push({groupType:currentGroupType,slots:currentGroup}),groupedSlots}},isSpace:function(){return!!this.zonesModules.includes(this.moduleName)},markerType:function(){return this.isDesk?"DESK":this.isSpace?"SPACE":null},deskType:function(){return this.isDesk&&!(0,lodash.isEmpty)(this.record)?this.record.deskType:null},nonReservableResource:function(){var _this$feature;return(null===this.deskType||1===this.deskType)&&(null===(_this$feature=this.feature)||void 0===_this$feature||!_this$feature.isReservable)}},mounted:function(){this.init()},methods:{init:function(){this.calHeight(),this.getPropertiesData()},calHeight:function(){},getPropertiesData:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _this2.moveText="",params={objectId:_this2.objectId,viewMode:_this2.viewerMode,startTime:_this2.timeRange.startTime,endTime:_this2.timeRange.endTime},_this2.loading=!0,_context.next=5,api/* API */.bl.get("/v3/floorplan/propertiesdata",params).then((function(_ref){var data=_ref.data;if(null!==data&&void 0!==data&&data.properties){var _this2$record,_this2$record2,properties=data.properties;if(_this2.properties=_this2.$helpers.cloneObject(properties),null!==properties&&void 0!==properties&&properties.moduleName&&(_this2.moduleName=properties.moduleName),null!==properties&&void 0!==properties&&properties.record&&(_this2.record=properties.record),null!==properties&&void 0!==properties&&properties.facilitybooking&&!(0,lodash.isEmpty)(properties.facilitybooking))_this2.record&&null!==(_this2$record=_this2.record)&&void 0!==_this2$record&&_this2$record.id&&properties.facilitybooking[_this2.record.id]&&(_this2.bookings=properties.facilitybooking[_this2.record.id]);if(null!==properties&&void 0!==properties&&properties.facility&&!(0,lodash.isEmpty)(properties.facility))_this2.record&&null!==(_this2$record2=_this2.record)&&void 0!==_this2$record2&&_this2$record2.id&&properties.facility[_this2.record.id]&&(_this2.facility=properties.facility[_this2.record.id]);null!==properties&&void 0!==properties&&properties.object&&(_this2.feature=properties.object)}_this2.loading=!1})).catch((function(error){_this2.loading=!1,error&&_this2.$message.error("Error While fetching the data")}));case 5:case"end":return _context.stop()}}),_callee)})))()},openRecordSummary:function(id){var viewname="alldesks";if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)("desks",router/* pageTypes */.As.OVERVIEW)||{},name=_ref2.name;if(name){var routeData=this.$router.resolve({name:name,params:{viewname:viewname,id:id}});window.open(routeData.href,"_blank")}}else{var _routeData=this.$router.resolve({name:"deskSummary",params:{viewname:viewname,id:id}});window.open(_routeData.href,"_blank")}},slotClicked:function(slotGroup){"FREE"==slotGroup.groupType&&this.$emit("book",slotGroup.slots)},getConcatSlotGroupTime:function(slotGroup){return this.$helpers.getOrgMoment(slotGroup.slots[0].slotStartTime).format("HH:mm")+" - "+this.$helpers.getOrgMoment(slotGroup.slots[slotGroup.slots.length-1].slotEndTime).format("HH:mm")},isSlotBooked:function(slot){if(!this.bookings)return!1;var bookedItem=this.bookings.find((function(booking){return booking.slot.id==slot.id}));return!!bookedItem},handleClose:function(){this.$emit("update:visibility",!1),this.$emit("close")}}},components_FloorPlanBookingPropertyNewvue_type_script_lang_js=FloorPlanBookingPropertyNewvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanBookingPropertyNewvue_type_script_lang_js,render,staticRenderFns,!1,null,null,null)
/* harmony default export */,FloorPlanBookingPropertyNew=component.exports},
/***/184894:
/***/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__),
// EXPORTS
__webpack_require__.d(__webpack_exports__,{default:function(){/* binding */return FloorPlanSpaceBookingProperty}});// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5f5f0a0c-vue-loader-template"}!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/pages/indoorFloorPlan/components/FloorPlanSpaceBookingProperty.vue?vue&type=template&id=c84f758e&scoped=true
var render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"properties-section new-properties-section bL0"},[_c("div",{staticClass:"floating-icons"},[_c("div",{staticClass:"flex-middle mR10 pointer"},[_vm.record?_c("TabCheckRedirect",{staticClass:"flex-middle",attrs:{moduleName:_vm.ObjectModuleName,id:_vm.record.id,src:"svgs/external-link2",iconClass:"icon icon-xs  fill-blue"}}):_vm._e()],1),_c("div",{staticClass:"mR15 pointer flex-middle",on:{click:function($event){return _vm.handleClose()}}},[_c("i",{staticClass:"el-icon-close pointer f17 bold"})])]),_c("el-tabs",{staticClass:"m0 h100 space-card-tab",model:{value:_vm.activeName,callback:function($$v){_vm.activeName=$$v},expression:"activeName"}},[_c("el-tab-pane",{attrs:{label:"Quick view",name:"quickview"}},[_c("div",{staticClass:"h100"},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):[_c("div",{staticClass:"100"},[_c("div",{staticClass:"pT0"},[_c("div",{staticClass:"fp-properties-image"},[_c("div",{staticClass:"carousel-container"},[_vm.photosList&&_vm.photosList.length?_c("div",{staticStyle:{width:"320px"},on:{click:_vm.openFilePreview}},[_c("el-carousel",{ref:"siteCarousel",staticClass:"navbar",attrs:{"indicator-position":"none",trigger:"click",autoplay:!1,arrow:"hover",height:"150px"}},_vm._l(_vm.photosList,(function(photo,photoIndex){return _c("el-carousel-item",{key:photoIndex,staticClass:"fc-v1-site-slider-overlay pointer"},[_c("div",[photo.originalUrl?_c("img",{staticClass:"fc-carouselsite-image",attrs:{src:_vm.$helpers.getImagePreviewUrl(photo.photoId),height:"150px",width:"320px"},on:{click:_vm.openFilePreview}}):_vm._e()])])})),1)],1):_c("div",{staticClass:"space-icon-container"},[_c("InlineSvg",{staticStyle:{background:"rgb(222 236 255)"},attrs:{src:"svgs/spacemanagement/space",iconClass:"icon icon-xxxlg "}})],1)])]),_vm.space?_c("div",{staticClass:"fp-properties-text mB20"},[_c("div",{staticClass:"flex-col"},[_c("div",{staticClass:"sp-id-header"},[_vm._v(" "+_vm._s("#"+_vm.space.id)+" ")]),_c("div",{staticClass:"space-name"},[_vm._v(_vm._s(_vm.space.name))]),_vm.spaceSummary?_c("div",{staticClass:"inline-block"},[_c("div",{staticClass:"flex-middle"},[_c("div",{staticClass:"space-container"},[_c("div",{staticClass:"ellipsis sub-content"},[_vm.spaceSummary.building?_c("div",[_vm._v(" "+_vm._s(_vm.spaceSummary.building.name+" ")+" ")]):_vm._e(),_vm.spaceSummary.floor?_c("div",[_vm._v(" "+_vm._s(", "+_vm.spaceSummary.floor.name)+" ")]):_vm._e()])])])]):_vm._e()])]):_vm._e(),_vm.spaceSummary&&_vm.spaceSummary.maxOccupancy&&_vm.spaceSummary.maxOccupancy>0?_c("div",{staticClass:"spacedetails-card-content"},[_c("el-tooltip",{attrs:{placement:"top",trigger:"hover",content:"Capacity"}},[_c("div",{staticClass:"inline-block"},[_c("div",{staticClass:"flex-middle card-occupancy"},[_c("inline-svg",{staticStyle:{"padding-right":"8px",display:"flex"},attrs:{src:"svgs/employeePortal/people",iconClass:"icon text-center icon-sm15 vertical-bottom"}}),_c("div",{staticClass:"ellipsis main-content"},[_vm._v(" "+_vm._s(_vm.spaceSummary.maxOccupancy+" ")+" ")])],1)])])],1):_vm._e(),_vm.amenities&&_vm.amenities.length>0?_c("div",{staticClass:" spacedetails-card-content "},[_c("div",{staticClass:"inline-block"},[_c("div",{staticClass:"flex-middle",staticStyle:{"flex-wrap":"wrap"}},_vm._l(_vm.amenities,(function(amenity,j){return _c("div",{key:j},[amenity?_c("el-tag",{staticClass:"filter-amenity-name"},[_vm._v(" "+_vm._s(amenity.name)+" ")]):_vm._e()],1)})),0)])]):_vm._e(),_vm.isReservable?[_c("div",{staticClass:"fp-properties-text pB5 opacity7"},[_c("div",{staticClass:"flex"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/ic-date-range-2",iconClass:"icon text-center icon-sm15 vertical-bottom"}}),_c("div",{staticClass:"pL10 dateString"},[_vm._v(" "+_vm._s(_vm.dateString)+" ")])],1)]),_c("div",{staticClass:"fp-properties-text opacity7",staticStyle:{"padding-top":"2px"}},[_c("div",{staticClass:"flex"},[_c("inline-svg",{attrs:{src:"svgs/employeePortal/clock",iconClass:"icon text-center icon-sm15 vertical-bottom"}}),_c("div",{staticClass:"pL10 dateString"},[_vm._v(" "+_vm._s(_vm.timeString)+" ")])],1)])]:_vm._e()],2),_vm.isReservable?_c("div",{staticClass:"fp-prop-btn"},[_c("el-button",{staticClass:"fc-white-btn mR10",attrs:{type:"primary"},on:{click:function($event){return _vm.$emit("book",[])}}},[_vm._v(_vm._s("Book"))])],1):_vm._e()])]],2)]),_vm.isReservable?_c("el-tab-pane",{staticClass:"h100",attrs:{label:"Schedule",name:"schedule"}},[_vm.loading?_c("spinner",{attrs:{show:_vm.loading,size:"80"}}):_c("div",{staticClass:"h100"},[_c("div",{staticClass:"h100"},[_c("SpaceBookingCalander",{staticClass:"h100",attrs:{moduleName:"spacebooking",startHour:_vm.bookingHour,startDate:_vm.bookingStartDay,endDate:_vm.bookingEndDay,selectDate:_vm.bookingDate,spaceId:_vm.spaceId,showToday:!1,goToBooking:!1,height:_vm.height}})],1)])],1):_vm._e()],1),_vm.imagePreviewVisibility?_c("PreviewFile",{attrs:{visibility:_vm.imagePreviewVisibility,previewFile:_vm.getFormattedFile[_vm.photoPreviewIndex],files:_vm.getFormattedFile},on:{"update:visibility":function($event){_vm.imagePreviewVisibility=$event}}}):_vm._e()],1)},staticRenderFns=[],regeneratorRuntime=__webpack_require__(150124),asyncToGenerator=__webpack_require__(548534),FloorPlanBookingPropertyNew=(__webpack_require__(260228),__webpack_require__(947522),__webpack_require__(670560),__webpack_require__(434284),__webpack_require__(634338),__webpack_require__(25016)),api=__webpack_require__(32284),lodash=__webpack_require__(496486),card_helpers=__webpack_require__(716956),PreviewFile=__webpack_require__(720096),router=__webpack_require__(329435),SpaceBookingCalendar=__webpack_require__(68305),moment_timezone=__webpack_require__(480008),moment_timezone_default=__webpack_require__.n(moment_timezone),TabCheckRedirect=__webpack_require__(736374),FloorPlanSpaceBookingPropertyvue_type_script_lang_js={extends:FloorPlanBookingPropertyNew["default"],mixins:[card_helpers/* default */.Z],components:{SpaceBookingCalander:SpaceBookingCalendar/* default */.Z,PreviewFile:PreviewFile/* default */.Z,TabCheckRedirect:TabCheckRedirect/* default */.Z},data:function(){return{photosList:[],imagePreviewVisibility:!1,photoPreviewIndex:null,spaceSummary:null,amenities:null,activeName:"quickview"}},watch:{spaceId:{handler:function(){this.setDefaultTab(),this.loadPhotos(),this.loadSpaceDetails()}}},computed:{getFormattedFile:function(){var _this=this,photosList=this.photosList,filePreviewList=[];return photosList.forEach((function(photo){filePreviewList.push({contentType:"image",previewUrl:photo.originalUrl,downloadUrl:_this.$helpers.getFileDownloadUrl(photo.photoId)})})),filePreviewList},isReservable:function(){var _this$properties,_this$record;return"desks"===this.moduleName?!(null===(_this$record=this.record)||void 0===_this$record||!_this$record.reservable)&&this.record.reservable:!(null===(_this$properties=this.properties)||void 0===_this$properties||null===(_this$properties=_this$properties.object)||void 0===_this$properties||!_this$properties.isReservable)&&this.properties.object.isReservable},showSummaryLinkIcon:function(){if((0,router/* isWebTabsEnabled */.tj)()){var _ref=(0,router/* findRouteForModule */.Jp)(this.ObjectModuleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref.name;if(name)return!0}return!1},icons:function(){var ObjectModuleName=this.ObjectModuleName;return"parkingstall"===ObjectModuleName?"svgs/employeePortal/parking5":"desks"===ObjectModuleName?"svgs/employeePortal/icon-hot-desk-2":"space"===ObjectModuleName?"svgs/employeePortal/meeting-room5":"svgs/employeePortal/icon-hot-desk-2"},ObjectModuleName:function(){var _this$properties2;return null!==(_this$properties2=this.properties)&&void 0!==_this$properties2&&_this$properties2.moduleName?this.properties.moduleName:null},space:function(){return this.record},bookingList:function(){var _this$properties3;return this.space&&null!==(_this$properties3=this.properties)&&void 0!==_this$properties3&&_this$properties3.spacebookingmap&&this.properties.spacebookingmap[this.space.id]?this.properties.spacebookingmap[this.space.id]:[]},bookingState:function(){return this.bookingList.length?"Partially available":"Fully available"},location:function(){var _space$building,_space$floor,space=this.space;return"".concat(null!==(_space$building=space.building)&&void 0!==_space$building&&_space$building.name?space.building.name+" - ":"").concat(null!==(_space$floor=space.floor)&&void 0!==_space$floor&&_space$floor.name?space.floor.name:"")},dateString:function(){var _this$timeRange=this.timeRange,startTime=_this$timeRange.startTime,endTime=_this$timeRange.endTime,startDate=this.getUserDate(startTime),endDate=this.getUserDate(endTime);return startDate!==endDate?"".concat(startDate," to ").concat(endDate):startDate},spaceId:function(){var _this$space;return null!==(_this$space=this.space)&&void 0!==_this$space&&_this$space.id?this.space.id:null},bookingStartDay:function(){var startTime=this.timeRange.startTime;return startTime?moment_timezone_default()(startTime).startOf("day").valueOf():null},bookingEndDay:function(){var endTime=this.timeRange.endTime;return endTime?moment_timezone_default()(endTime).endOf("day").valueOf():null},bookingDate:function(){var dt=new Date(this.bookingStartDay||this.getCurrentTime);return dt.format("YYYY-MM-DD")},bookingHour:function(){var startTime=this.timeRange.startTime,dt=new Date(startTime);return dt.getHours()},timeString:function(){var _this$timeRange2=this.timeRange,startTime=_this$timeRange2.startTime,endTime=_this$timeRange2.endTime,start=this.getUserTime(startTime),end=this.getUserTime(endTime);return start!==end?"".concat(start," to ").concat(end):start}},methods:{setDefaultTab:function(){this.activeName="quickview"},openRecordSummary:function(id){var viewname="all";if((0,router/* isWebTabsEnabled */.tj)()){var _ref2=(0,router/* findRouteForModule */.Jp)(this.ObjectModuleName,router/* pageTypes */.As.OVERVIEW)||{},name=_ref2.name;if(name){var routeData=this.$router.resolve({name:name,params:{viewname:viewname,id:id}});window.open(routeData.href,"_blank")}else this.$message.warning("No summary page found found")}},loadSpaceDetails:function(){var _this2=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee(){var _yield$API$get,error,data,space,amenities;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,api/* API */.bl.get("/v3/modules/data/summary?id=".concat(_this2.spaceId,"&moduleName=space"));case 2:_yield$API$get=_context.sent,error=_yield$API$get.error,data=_yield$API$get.data,error?_this2.$message.success("Error while loading "):(space=data.space,amenities=space.amenities,null!=space&&(_this2.spaceSummary=space,_this2.amenities=amenities||[]));case 6:case"end":return _context.stop()}}),_callee)})))()},getPropertiesData:function(){var _this3=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee2(){var params;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _this3.moveText="",params={objectId:_this3.objectId,viewMode:_this3.viewerMode,startTime:_this3.timeRange.startTime,endTime:_this3.timeRange.endTime,newBooking:!0},_this3.loading=!0,_context2.next=5,api/* API */.bl.get("/v3/floorplan/propertiesdata",params).then((function(_ref3){var data=_ref3.data;if(null!==data&&void 0!==data&&data.properties){var _this3$record,_this3$record2,properties=data.properties;if(_this3.properties=_this3.$helpers.cloneObject(properties),null!==properties&&void 0!==properties&&properties.moduleName&&(_this3.moduleName=properties.moduleName),null!==properties&&void 0!==properties&&properties.record&&(_this3.record=properties.record),null!==properties&&void 0!==properties&&properties.facilitybooking&&!(0,lodash.isEmpty)(properties.facilitybooking))_this3.record&&null!==(_this3$record=_this3.record)&&void 0!==_this3$record&&_this3$record.id&&properties.facilitybooking[_this3.record.id]&&(_this3.bookings=properties.facilitybooking[_this3.record.id]);if(null!==properties&&void 0!==properties&&properties.facility&&!(0,lodash.isEmpty)(properties.facility))_this3.record&&null!==(_this3$record2=_this3.record)&&void 0!==_this3$record2&&_this3$record2.id&&properties.facility[_this3.record.id]&&(_this3.facility=properties.facility[_this3.record.id]);null!==properties&&void 0!==properties&&properties.object&&(_this3.feature=properties.object)}_this3.loading=!1})).catch((function(error){_this3.loading=!1,error&&_this3.$message.error("Error While fetching the data")}));case 5:case"end":return _context2.stop()}}),_callee2)})))()},loadPhotos:function(){var _this4=this;return(0,asyncToGenerator/* default */.Z)((0,regeneratorRuntime/* default */.Z)().mark((function _callee3(){var _yield$API$get2,data,_ref4,_ref4$photos,photos;return(0,regeneratorRuntime/* default */.Z)().wrap((function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _this4.loading=!0,_context3.next=3,api/* API */.bl.get("/photos/get?module=basespacephotos&parentId=".concat(_this4.spaceId));case 3:_yield$API$get2=_context3.sent,data=_yield$API$get2.data,data&&(_ref4=data||[],_ref4$photos=_ref4.photos,photos=void 0===_ref4$photos?[]:_ref4$photos,_this4.photosList=photos||[],_this4.loading=!1);case 6:case"end":return _context3.stop()}}),_callee3)})))()},openFilePreview:function(){(0,lodash.isEmpty)(this.photosList)||(this.imagePreviewVisibility=!0);var siteCarouselRef=this.$refs.siteCarousel;(0,lodash.isEmpty)(siteCarouselRef)?this.photoPreviewIndex=0:this.photoPreviewIndex=siteCarouselRef.activeIndex}}},components_FloorPlanSpaceBookingPropertyvue_type_script_lang_js=FloorPlanSpaceBookingPropertyvue_type_script_lang_js,componentNormalizer=__webpack_require__(801001),component=(0,componentNormalizer/* default */.Z)(components_FloorPlanSpaceBookingPropertyvue_type_script_lang_js,render,staticRenderFns,!1,null,"c84f758e",null)
/* harmony default export */,FloorPlanSpaceBookingProperty=component.exports}}]);
//# sourceMappingURL=http://localhost:5050/sourcemaps/js/49609.js.map